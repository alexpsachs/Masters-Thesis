{
    "shishirx34": "LGTM!\n. LGTM!\nYou should wait on @itsananderson to signoff for the objective C changes.. \nObj C looks good to me, but Will would be in a better state to identify issues with it.\n. minor comments, LGTM otherwise!! :+1: \n. LGTM\n. LGTM\n. one offline comment.. otherwise, LGTM!\n. LGTM\n. LGTM!\n. LGTM!\n. LGTM! \n. LGTM! Great work Geoff! :+1: :shipit: \n. LGTM!\n. LGTM\n. LGTM\n. LGTM\n. LGTM\n. LGTM\n. Which was the change that moved iOS files? Could you tag the PR here.\n. LGTM\n. LGTM\n. Couple of typo fixes, LGTM otherwise!\n. Cool feature :+1: LGTM!\n. LGTM\n. Looks good! :shipit: \n. LGTM\n. @xhacker5000, Like @silhouettes said, we do upload the entire package(including a.png) to the CLI(lets call this v5). The server will calculate diff for the previously released package(say v4) with the current one that you are releasing and if say a.png already existed it won't be added to the diff package which will be served to the apps requesting an updateCheck which has package v4. So we take care of saving time/bandwidth on serving updates to the apps. We are improving the diffing logic to so that we can improve the performance and bandwidth for multiple packages(v3, v2...). However to generate diffs we do need to upload the entire package to the server to calculate diff.\nLike @silhouettes said, generating diff from the CLI is one option, however that would require downloading the contents and doing the diff work on CLI which could entail its own set of problems. I think there could be another approach that we can partially merge work to be done between CLI and server which could potentially improve the workflow.\nMain reason that we need to have entire contents for every release on server is so that no matter which app(with any package and appropriate binary version) runs a updateCheck will get the correct content and not break the app.\nThat said, we are always working on improving the user experience for our customers and we will try our best to make uploads work better for you.\n. LGTM\n. LGTM\n. Looks good.\n. LGTM\n. LGTM\n. LGTM!\n. This feature is pretty cool. LGTM! :shipit: \n. LGTM\n. Looks good.\n. what script is this? why do you need it?\n. If I am not mistaken, this would change with my changes to consume packageHash. we will need to pass.. deploymentKey and appVersion(nativeVersion) to get the update.\n. I guess it means callback? But I agree with Damon, better to call it that.\n. put spacing between if and opening paranthesis, similarly for else and braces.. that is our coding guidelines. \nfeedback throughout the code.\nIf someone has a link to the coding guideline page, that would be great for Geoffery.\n. coding guidelines: \nPut a new line space between closing brace '}' and next line unless next line also contains another closing brace '}'\n. there could be an issue here,\nIf I am not mistaken, localPackage is the object returned from the code-push server during an updateCheck.. the data that we got might be an older version.. the appVersion could have been changed following an app store update, however here we would be sending the older details still. Unless if you remove the localPackage everytime there is an appVersion change.. which I am not sure is handled someplace or app store's update takes care of it.\nNevertheless to be safe, what you might want to do would be to extract localPackage's package hash and pass it with configuration.appVersion to the sdk.\n. remove the extra empty lines here.. \n. Reduce redundancy by combining logic;\nvar defaultPackage = {appVersion: configuration.appVersion};\nif (!err && localPackage !== null && localPackage.appVersion === configuration.appVersion) {\n defaultPackage = localPackage;\n} else if (err) {\n console.log(err);\n}\nsdk.queryUpdateWithCurrentPackage(defaultPackage, callback);\n. I should have mentioned this before, final change:\nif (!err && localPackage && localPackage...)\nchecking this way verifies localPackage against null and undefined.. dont need an explicit null check.\n. Why is there a facebook copyright in here? Did you use any code from facebook's distribution? I don't know the restrictions of BSD, but we shouldn't be using code from other organisations or is this a sample app test framework from React native page? I can see that you have our code below.\n. remove?\n. nit: extra line\n. ?\n. are we not marking fixed versions for plugin?\n. nit: don't know if it matters, but may be log error before calling syncStatusChangeCallback, if for some reason callback itself crashes we won't have this logged?\n. align at ':' ?\n. not super important, but may be consider moving the above two(and other related redundant resources in these tests) packages to a resources.json(or something like that) file and read it once before running tests and assign them in here, so that in future if you have a change to the structure of acquisition package you don't have to make the change at multiple places. \nMaintenance of tests becomes a pain after a certain point, its best to keep them as low maintenance as possible.\nAgain, not super important, if you think it is worth it.\n. Note: Releasing assets via CodePush requires that you're using React Native v0.15.0+ and CodePush v1.4.0+ (for iOS) and React Native v0.19.0+ and CodePush v1.7.0+ (Android). If you are using assets and an older version of the CodePush plugin, you should not release updates with assets via CodePush, because it will break your app's ability to load images from the binary. Please test and release appropriately!*\n- You can still use older plugins to release, just not assets, right?\n. intuitive\n. Additionally, make sure that you are releasing to the same deployment that your app is configured to sync with.\n. extra opening brace ( in the link for [these instructions] breaks the link.\n. overloaded version\n. not super important, but may be define \"index.android.bundle\" as a static field above.\n. Remove the double quotes on Manual link text.\n. may be ? in the end?\n. does hasPrefix do ignoreCase comparison? Do you think the casing could be an issue?\n. nit: ...so if it doesn't...\n. Probably to clean up unnecessary links, and noise in index. I see windows setup section added below which would need adding these sublinks under that header too in the index. I am fine either ways.\n. May be log \"file not found\"(something) when exception is thrown for clear react?\n. could you add this. to the instance variables so that its obvious where the value is coming from?\nthis.assetsBundleFileName\n. this._isRunningBinaryVersion\n. this._appVersion\nAnd why do you want to allow running the package with different app version than your binary if its a testConfiguration? Wouldn't that mean in test scenarios I can basically install a 2.0.0 codepush release over 1.0.0 binary release?\n. this._isRunningBinaryVersion here and everywhere else applicable.\n. initialize the reportMap outside of the above if..else if.. block and then return it here. Remove intermediate returns in the if...else if... blocks\n```\nWriteableNativeMap reportMap = null;\nif (...) {...}\nelse if (...) {...}\nreturn reportMap;\n``\n. you can move this outside of thisif..else... why do you want toclearRetryStatusReporthere insidegetRollbackReport?\n. I am confused.. why do youclearRetryStatusReportwhen yougetRetryStatusReport`, shouldn't the status report be cleared either after successful retry or clear before the retry and then overwrite the new status for retry after done?\n. Just wondering how would it get reported twice? Either there could be a failure after we getReport but before we actually report it, in that case we have lost the report, isn't it?\nnit: the function name could be getAndClearRetryStatusReport, will leave it upto you, if this seems to be more hassle than worth it, I would leave it as it is.\n. nit: are single quotes on purpose?\n. ",
    "dtivel": "LGTM\n. LGTM\n. LGTM\n. LG\n. LG\n. lg\n. Looks good.\n. looks good\n. looks good\n. looks good\n. Looks good.\n. Looks good.\n. Looks good.\n. Looks good.\n. Looks good.\n. Looks good.\n. \"Staging\" is a deployment name, but updateCheck takes a deployment key.  You can see the deployment key for your Staging deployment by running the following command, where  is the name of your app.\ncode-push deployment list <AppName>\nFor example, running it on my app \"My App\":\ncode-push deployment list \"My App\"\n...yields:\n\n. Great, I'm glad that worked.\n. Looks good.\n. Looks good.\n. Looks good.\n. Looks good.\n. Looks good.\n. Looks good.\n. Hi, xhacker5000.\n1.  Yes, to make an update available to your app, you would upload your update (build output) to the CodePush service.  The CodePush CLI's release command does exactly this.  Here is some additional documentation on how to release an update:  http://microsoft.github.io/code-push/docs/react-native.html#link-6\n2.  Yes, you can put the sync() call wherever you like, but often it is put in app startup (e.g.:  in componentDidMount()).  sync() does accept some optional arguments, but the API was intended to address the most common scenarios without any additional arguments.  The optional arguments allow you to customize sync()'s behavior.  For example, if you prefer app updates to be applied immediately after download instead of on the next app restart (which is the default), then you can pass options to sync(), like so:\ncodePush.sync({ updateDialog: true, installMode: codePush.InstallMode.IMMEDIATE });\nThe API documentation for sync() has more details.  See https://github.com/Microsoft/react-native-code-push#codepushsync for a full description of the API.\nWhen an app calls sync(), it results in a query to the CodePush service.  If an update is available, it will be downloaded to the device and applied (by default) on app restart, unless you've customized the behavior of sync() to apply the update at some other time.\n3.  The code-push 1.6.0-beta release does not have the release-react command.  The release-react feature was committed yesterday and will be in the next code-push release, which I anticipate to be soon.  To be clear, the release-react command is not required for you to release your update now; you can still use the release command to release your update.  The release-react command just simplifies the React Native release scenario by making it a little less error prone.  If you are eager to try out the release-react command now, you could sync to tip the CodePush repo, and build and run it locally.\n. Looks good.\n. Looks good.\n. Looks good.\n. #229 fixes this.\n. Looks good.\n. Hi, mohanrohith.\nDid any other dependencies download successfully?  If you run the npm command again, does it succeed in downloading this dependency (superagent)?\nI wonder if this was a temporary network issue.  Can you ping github.com successfully?\n. Looks good.\n. Hi, nicinabox.\nWe found a bug and fixed it.  The fix is live.  Can you please try again and let me know the result?\nI apologize for the inconvenience to you.  We'll add test coverage for this issue to make sure it doesn't happen again.\nThanks,\nDamon\n. Thanks, nicinabox.  And sorry again for the issue.\n. Hi, mbernardeau.\nIn MainActivity.java where you call codePush.getBundleUrl(...) what bundle name do you pass?  In your case I think it should be \"main.bundle\".\ncodePush.getBundleUrl(\"main.bundle\")\nThanks,\nDamon\n. Looks good.\n. The command that you're calling:\ncode-push release time_castle_client main.jsbundle 1.0.0 --deploymentName \"Staging\" --description \"inventory\" --mandatory true\n...is attempting to release only main.jsbundle.  It sounds like this file was already released, which would lead to the error you see.\nI think you need to release the directory which contains both the newly built main.jsbundle and /assets folder.  Does this work?  Note this uses the ./code-push-release directory instead of main.jsbundle.\ncode-push release time_castle_client ./code-push-release 1.0.0 --deploymentName \"Staging\" --description \"inventory\" --mandatory true\n. Here is the sync(...) API signature:\ncodePush.sync(options: Object, syncStatusChangeCallback: function(syncStatus: Number), downloadProgressCallback: function(progress: DownloadProgress)): Promise<Number>;\nThe DownloadProgressCallback callback is described in sync(...)'s documentation.  Here's a documentation excerpt:\n- downloadProgressCallback ((progress: DownloadProgress) => void) - Called periodically when an available update is being downloaded from the CodePush server. The method is called with a DownloadProgress object, which contains the following two properties:\n  - totalBytes (Number) - The total number of bytes expected to be received for this update package\n  - receivedBytes (Number) - The number of bytes downloaded thus far.\nHere is your sync(...) call with a DownloadProgressCallback callback:\n```\nvar options = {\n    installMode: codePush.InstallMode.IMMEDIATE,\n    updateDialog: { appendReleaseDescription: true, descriptionPrefix: \"\\n\\\u66f4\u65b0\u4fe1\u606f:\\n\" }\n};\nvar downloadProgressCallback = function(progress) {\n    console.log(\"Received \" + progress.receivedBytes + \" of \" + progress.totalBytes + \" total bytes.\");\n};\ncodePush.sync(options, /syncStatusChangeCallback/ null, downloadProgressCallback);\n```\n. No problem.  Did it work?  Let us know if you run into any issues.\nI just copied code from your now-deleted post under a different issue. :)\n. Which app is this for?  The time castle app?  I want to see what information is logged on our end.\n. Did you add to your Info.plist file a CodePushDeploymentKey entry with the correct deployment key?  If you did not specify a deployment name in your release-react command, then the default deployment is Staging.  In this case the CodePushDeploymentKey value would be your Staging deployment key.\nDoes the app version of your update match your installed app version?  They must match for you to get the update.  You can find your update's app version by running:\ncode-push deployment history MyApp Staging\nIn your app how are you calling sync() or checkForUpdate()?\n. The implementation for code-push release-react starts here, and the code that packages the JavaScript file is the part that runs the react-native CLI.  The CodePush CLI releases the bundle here.\n. Why not delete the commented code?\n. Is \"baseUrl\" correct or is it a copy-paste error?\n. Why not generate JavaScript from TypeScript?\n. \"cb\" should have a name which more clearly conveys its meaning/purpose.  I couldn't figure it out what \"cb\" stood for even after a minute of thinking about it.\nThis feedback applies throughout the file.\n. In previous perftools code reviews Hani pointed out that setTimeout should be fully qualified (window.setTimeout) though I forgot to ask why.\n. Is this a placeholder?\n. Same here.  There's a consistent pattern with other get/set methods here.  This one breaks the pattern.  Should something be renamed?\n. Adding an inline comment for null would improve readability.\nThe feedback applies to all \"cb\" calls in the file.\n. failedApply?\n. Add . at end of sentence.\n. The field name and comment describe different states.  APPLY_SUCCESS means apply succeeded; however, the comment says the \"... update ... is about to be applied.\"  Given the implementation above the field name should be changed to DOWNLOAD_SUCCEEDED.\n. It's odd that the state is APPLY_SUCCESS before apply(...) is called or even completes successfully.  Shouldn't this status be DOWNLOAD_SUCCEEDED?\n. ;\n. .catch(reject)\n.done();\n. Was this a typo (previously)?\n. This looks like a regression of merge #21.\n. It looks like getCurrentPackageHash and getPreviousPackageHash would both null dereference if there is an error.\n. Make \"didUpdate\" the first expression to be evaluated.  It's a simple Boolean check that could make getting the current package hash unnecessary.\nRemove the surrounding parentheses.\n. necessary\n. Remove\n. If the failCallback(...) (or progress or done) callee throws, the file stream won't be closed?\nMove the closure before the callback.\n. Fix spacing.\n. Fix indentation.\n. UpdateBundleFileName\n. In the CodePush repo we use double quotes here and 4 spaces per indent.\nLet's do the same here.\n. until not till\n. NSOutputStream write returns an NSInteger.\nhttps://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSOutputStream_Class/index.html#//apple_ref/occ/instm/NSOutputStream/write:maxLength:\nUpdate lines 47 and 50 to us NSInteger.\n. Is this automatically initialized?\n. \"\n. This constant (@\"app.jsbundle\") is duplicated in CodePush.m.  Can you deduplicate?\nSee UpdateBundleFileName.\n. unnecessarily\n. This file looks like a modification of https://github.com/samsoffes/ssziparchive/blob/master/minizip/unzip.h.\nPlease follow OSS license requirements.\n. Fix spacing.\nfor (int i = 0; i < [data length]; i++) {\n. Move line 49 to line 55 to limit its scope to where it's actually used.\n. Formatting is erratic, sometimes aligned on :, sometimes on aligned on method name, sometimes on nothing.\n. retrieve\n. Remove references to Elvis operator.\nYou're using the ternary operator below (line 8).\nhttp://groovy-lang.org/operators.html#_elvis_operator\n. Great.  Thanks.\n. notifyApplicationReady\n. I don't think you should include caller information in comments.  Just state what this method does.\n. Not crazy about this name.  I think a better name would be \"isUpdateLoading.\"  From the point that the bridge reloads to now, that is what's happening.  If the value is true here, then the update loaded successfully.\n. \"...and installing updates...\"\n\"...be called; otherwise, CodePush will treat the update as failed and...\"\n. \"end user\" (no hyphen)\n. \"end users\" (not hyphenated)\n. \"end user\" (no hyphen)\n. retrieving\n. necessary\n. \"...we don't know if they would work...\"\n. \"end-user\" should only be hyphenated if it's used as an adjective (e.g.:  end-user license agreement).  This feedback applies generally.\n. Should add a comment indicating that this should stay in sync with the CodePush SDK.  It's not obvious here that the array below should be synchronized with the SDK's Verb enum (https://github.com/Microsoft/code-push/blob/master/sdk/script/acquisition-sdk.ts#L6).\n. The convention is to put * with the variable name not with the type name.  Also applies below.\n. This dictionary will be ever growing, never shrinking?\nCan't we clear it at some point, such as before adding a successful deployment status?\n. Remove the comment too.\n. I notice you're renaming \"package\" to \"update\" here and there.  You could also rename \"updatePackage\", \"PACKAGE_HASH_KEY\", \"PACKAGE_FILE_NAME\" and \"getPackageFolderPath.\"\nThere are probably more symbols that could be renamed, but these are what I saw right here.\nIt need not be done with this pull request.\n. I can't make sense of the comment in context.  Should the comment be removed?\n. Should this be a placeholder, like \"your deployment key goes here\"?\n. semver-compliant\n. \"More than one CodePush instance has been initialized.  Please use the instance method codePush.getBundleUrlInternal() to get the correct bundleURL for a particular instance.\"\n. Why is one CodePush instance insufficient?  Why not make this a singleton?\n. final?\n. ",
    "itsananderson": "The file Examples/HybridMobileDeployCompanion/react-packager-cache-5737493143262339187995942fd693ba should not be included.\n. Sorry for the delayed review. LGTM once you remove the temp file.\n. LGTM\n. LGTM\n. They're not intended for direct use, but instead as code samples about how to implement different update scenarios. Similar to the example app, but just the JS rather than an entire app.\n. The packager.sh is shipped with React Native, and is used to package all the JS files. I had to add an extra \"root\" to the package because it doesn't currently support symlinks, so \"npm link\"ing the core library into the example's node_modules wouldn't work.\n. Yes. This PR targets the sdk/api from earlier last week, so there are a few things that will need to be updated. I'm working on some of those updates, but I want to get this merged so we have a baseline to work from.\n. Both of these configurations are convenient for testing different scenarios, so it's nice to be able to switch back and forth by commenting them out. However, there's no need to change the checked-in state from what it was before, so I'll revert this.\n. copy-paste error. Fixing\n. cb is a common convention used in Node/JS, but I'll change to callback for clarity.\n. React Native already uses its own JS transformation/bundling pipeline, which would be very tricky to integrate with TypeScript. Since the JS surface area is so small, I think it's preferable to leave it as plain JS rather than trying to force the React Native into something it wasn't designed for.\n. I'll confirm this, but I don't think there is a \"window\" object in React Native.\n. Yes. I should actually be able to read this from the config, so I'll update the PR.\n. Yep, also a typo. Fixing\n. Fixed\n. Since we return a promise, any errors thrown by downloadUpdate() will be bubbled up to the calling code.\n. Accidental change. I'll revert.\n. The old version is the correct name. This is the package name we'll eventually use to publish the module to NPM.\n. Please remove the .idea and .gradle folders, and add them to the .gitignore\n. Please revert this change.\n. Instead of requiring this value to be passed in, we can use the built-in \"Platform\" module. https://github.com/facebook/react-native/blob/256fa18ab2e2b64aedf80e2d3454e2ef7dd065b5/Libraries/Text/Text.js#L240\n``` javascript\nvar Platform = require(\"Platform\");\nif (Platform.OS === \"android\") {\n    module.exports = require(\"./CodePush.ios.js\");\n} else if (Platform.OS === \"ios\") {\n    module.exports = require(\"./CodePush.android.js\");  \n}\n``\n. Very heavy duplication between the iOS and Android versions. Is there a way we could combine into oneindex.js, and then pass in some light wrappers fromindex.ios.jsandindex.android.js`. If it's not clear what I'm describing, I can help you take a look and see if we can deduplicate.\n. iOS 9 disallows non-SSL connections by default. This configuration allows non-SSL connections. Even though we connect to the service over SSL, this is handy to have for dev against localhost.\n. I'm not sure if we've confirmed that, but I can check.\n. I guess we've done fixed versions for the other projects. I'll switch this over.\n. ",
    "geof90": "LGTM\n. I realized there are lots of generated gradle and library files in there. I would like to discuss which ones we can exclude from the repo...\n. Closed because I want to point the pull request into master instead of update-api\n. LGTM\n. LGTM\n. LGTM\n. How are these used? Do we have to run require(\"react-native-code-push/recipes/UpdateButton.ios\") for example?\n. Ahhh ok.. I thought it would be cool if we are exporting these as components that they could just import and use in their apps with a single line. \nStill, LGTM otherwise.\n. @ide In order to get this to work I had to write my own overriding classes (CodePushReactRootView.java, etc) to RN core modules in order to support to loading bundles from files paths instead of from the assets folder, because the new downloaded update packages need to be persisted somewhere in a user writable folder. I noticed there was another pull request that implements the same functionality. https://github.com/facebook/react-native/pull/2864 Is there any update on whether that would be merged soon? If that works, then CodePush can use that and thus stay as a RN extension plugin that doesn't modify RN core modules and thus does not need to be submitted upstream. Although yes, we would love to help out on the main RN project!\n. @ide Cool! Looking forward to the new releases.\n. Closing, will send a new PR that doesn't use of the overridden facebook classes.\n. LGTM\n. LGTM\n. LGTM!\n. LGTM :+1: \n. Hi @qingfeng, the error looks like React Native is expecting the \"\u7bdd\u706b\" root component to be registered, but it wasn't. Specifically, if in your AppDelegate.m, the RCTRootView is initialized with that module name,\nobjectivec\nRCTRootView *rootView = [[RCTRootView alloc] initWithBundleURL:jsCodeLocation\n                                                    moduleName:@\"\u7bdd\u706b\"\n                                             initialProperties:nil\n                                                 launchOptions:launchOptions];\nThen in the main javascript file, that same module name has to be registered. It has to contain this matching line:\njavascript\nAppRegistry.registerComponent(\"\u7bdd\u706b\", () => App);\nCould we just double confirm with you that this is indeed the case? Since you got it to display the update dialog, I suspect in your updated bundle, the app was not registered correctly with the right name, causing the error to only show up after the bundle is applied.\n. Thanks @qingfeng! I guess it all worked out for you? If so I will close the issue. Thanks nonetheless for your feedback!\n. LGTM\n. LGTM\n. @qingfeng yes it is :)\n. LGTM\n. LGTM\n. LGTM!\n. LGTM, it is a great feature to have.\n. @dlebu I have removed SyncResult, it is just SyncStatus now. I also added an UNKNOWN_ERROR flag to SyncStatus.\n. Thanks for fixing my buggy code :+1: \n. Sorry, are we getting rid of the use of \"extend\" in package-mixins.js as well?\n. LGTM :+1: \n. Probably remove extend from package.json as well since we no longer need it?\n. Yes it is :)\n. LGTM :+1: \n. LGTM :+1: \n. So restartApp will not actually restart the app if there's no pending update?\n. How about \"loadInstalledBundle()\"?\n. Having it part of the global API feels more natural to me. \"Booting up a pending bundle\" sounds like an action that is performed by the global CodePush system rather than something performed on the LocalPackage.\n. restartPendingUpdate sounds good to me!\n. yup LGTM\n. Hi @oney, I'm sorry to hear about that experience. We are definitely thinking of better ways to support developers in recovering their apps from a failed update. Your suggestion makes sense and is definitely something our team can consider to implement in future releases amongst other methods that we have talked about.\nRight now, apart from the rollbackTimeout install option that @lostintangent mentioned, another thing I would suggest to avoid running into such issues is to make full use of the Staging deployment and Promote action built into our CodePush CLI. This means that during development, you could be testing the entire end to end update experience against the Staging deployment, and only after you have verified that the Staging deployment can be installed and run without any crashes, use the code-push promote command to transfer that bundle from Staging to Production.\n. Not by default. You have to specify it as part of the options, eg:\n// After the update is installed, the timer waits for 5 seconds, \n// if it does not receive a notifyApplicationReady() call, it will rollback.\nvar milliseconds = 5000;\nCodePush.sync({rollbackTimeout: milliseconds});\nhttps://github.com/Microsoft/react-native-code-push#codepushsync\n. Please note that I edited my previous comment, the rollbackTimeout takes milliseconds as opposed to seconds which is mentioned in the README. We're fixing the docs\n. small comment and LGTM otherwise\n. LGTM with spelling changes!\n. Scanned through your last changes and it looks good.\n. LGTM!\n. Hi @oney,\nAre you absolutely certain that the code in the native call is executed on the main thread? Is the current code causing any of your animations to block? To check if it is indeed on the main thread, can you insert this piece of code in the method and see what appears in your console: \nif (Looper.myLooper() == Looper.getMainLooper()) {\n    System.out.println(\"ON MAIN THREAD\");\n} else {\n    System.out.println(\"NOT ON MAIN THREAD\");\n}\n\"NOT ON MAIN THREAD\" was what appeared for me.\n. I see. If it is indeed blocking animations, then this fix is needed. I assumed that if it is not on the main thread, it would not block the JS thread or the main thread, which is why I left out all the async dispatches when I was porting the iOS code over to android. Perhaps there is some thread signalling going on under the hood. I will go ahead and merge your change. Thanks!\n. @lostintangent no we probably dont need it, i just copied the latest version off github which included them, ill spend some time to go over what we need and what we dont\n. @lostintangent I think I there's no harm in leaving the AES folder there, this file references it, I don't want to have to modify it. Having it there may let us do things like support password protected/encrypted zips in the future. :)\n. Hi @ajwhite, can we verify that you indeed got back a package with the same package hash?\nCodePush.notifyApplicationReady();\nPromise.all([\n  CodePush.getCurrentPackage(),\n  CodePush.checkForUpdate()\n]).spread((current, update) => {\n  if (!update) {\n    return;\n  }\n  if (!current || current.packageHash !== update.packageHash) {\n    CodePush.sync({\n      updateDialog: false,\n      rollbackTimeout: 10000,\n      installMode: CodePush.InstallMode.IMMEDIATE\n    });\n  } else if (current.packageHash === update.packageHash) {\n    // Verify that this part of the code actually gets executed\n  }\n});\n. In https://github.com/Microsoft/react-native-code-push/blob/master/CodePush.js#L33, there is a queryPackage object that the SDK takes which is used to query the server for updates. The server is configured to check the package hash of the given query package and return an update if it exists. The server should not be returning an update with the same package hash if indeed it was supplied.\nFor example, https://codepush.azurewebsites.net/updateCheck?deploymentKey=YOUR_DEPLOYMENT_KEY&appVersion=1.0.0 may return an update, but https://codepush.azurewebsites.net/updateCheck?deploymentKey=YOUR_DEPLOYMENT_KEY&appVersion=1.0.0&packageHash=LATEST_PACKAGE_HASH will return no update.\nWhat would be really helpful for us to debug this is if you could verify that this queryPackage object indeed has the packageHash object set. Also if you could obtain the URL query string of the call to the server here: https://github.com/Microsoft/code-push/blob/master/sdk/script/acquisition-sdk.ts#L89 and verify that the packageHash exists, and the server indeed responds back with the same packageHash, that would also really help. Sorry for the trouble, we really just need more information as we have not been able to reproduce this issue.\n. LGTM!\n. LGTM! I'll update the website without the TOC since the website already has one.\n. Hi @oney,\nI just merged in a PR https://github.com/Microsoft/react-native-code-push/pull/104 (which is basically very much inspired by your code). It should address the issue that you are facing, plus also generalize it to work for the ON_NEXT_RESTART install mode. Do leave some comments there or file an issue otherwise. Thanks once again for your ideas and contributions!\n. @sulliwane, does it work if you comment out .setUseDeveloperSupport(BuildConfig.DEBUG)?\nIt seems that RN is caching files from the packager and always using them when in debug mode. We are in the process of developing a workaround for this.\n. LGTM!\n. @lostintangent \nThis change will just mean that all of the updates in the documents directory will now be ignored (treated as if they were never installed), since it no longer goes to the Documents directory to find the status file.\n. @dlebu Not yet. We are behind on implementing tests for a few features, e.g the sync implementation currently has no automated test coverage. There is a task in the backlog assigned to me for writing all the automated tests. We just want to quickly get this out there because right now a number of customers have given us feedback that the present way that rollbacks work is not working for them (app crashes before notifyApplicationReady is called that terminates the app preventing the rollback timer from ever kicking in).\n. LGTM!\n. > The expected behavior would be to no-op, since the \"pending\" update from the first call to sync is already downloaded, and therefore, the second call to sync would resolve its promise as no update available.\nIf there was no update released between the first and second call to sync, sync would return SyncStatus.UP_TO_DATE in the second call, which in my opinion, makes sense because the latest package is indeed installed in the first call and it is up to date. Unless there are folks who think we should return SyncStatus.UPDATE_INSTALLED in the second call instead. I have no preference over either.\nIf there WAS an update released between the first and second call to sync, then yes, I agree with @nevir it should download and replacethe first update. Under the current implementation, i think it does that, but it would wrongly assume that the first update is a verified one, i.e. if the second one fails, it would roll back to the first one. This is a problem because we have not yet verified the first one, so that could be a potential cause of the app going into an irrecoverable state. I think this should be fixed - we should completely wipe out the first update.\n@JAStanton @nevir @lostintangent Let me know if you agree with what I just said, and I will go on to fix this issue in the manner I just described.\n. Sometimes this happens: https://github.com/facebook/react-native/issues/4289\nTry again with the --reset-cache option, or try clearing the packager cache rm -rf $TMPDIR/react-*\nLet me know if it works!\n. That will be true if you push the same version of the app both to the app store as well as CodePush. Right now we dont have a mechanism to compare the binary's jsbundle with the one on the CodePush server. Do you have a reason or scenario in mind why someone would want to push the same version both to CodePush as well as to the app stores?\n. @rhaker those are definitely very useful feedback! To your point 2), I will be pushing a change that lets the client be notified of new app store versions pushed to CodePush, so that developers can handle the notification by forcing an app store update, for example.\nAnd its a pity that your Android setup has not been smooth. Do provide us with more information when you get it, and we will fix it prompty!\n. LGTM! There are a few other files where we could add the ES6 features, i had changed them locally and will put them out in my next PR.\n. I agree that we should definitely clear older updates and I am working towards a fix for that, but can I confirm that either of you were seeing a bundle downloaded in an older store version being loaded in a new store version? Because that should definitely not happen, and not clearing pendingUpdate information should not lead to this happening either, so it could indicate a more serious bug with the [CodePush bundleURL] resolution logic which was designed to handle that scenario.\n. Should we do a comparison in [CodePush bundleURL] on the saved package appVersion instead of just the date, just to further iron clad ourselves from this issue?\n. LGTM. GitHub bug!\n. Closed because of issues with the RN Alert being unable to support our scenario, such as it being dismissable when the user touches the outside of the dialog.\n. Thanks @oney! We found the bug. Incremental diff updates had the side effect of causing rollbacks to fail, because files from the previous package were being moved instead of copied to the new update. I assume you were seeing this issue because you were using asset updates.\n. LGTM!\n. @lostintangent So our plan to handle this is to ignore + clear away all older packages when a new binary is applied right?\n. Before merging I will run the automated tests + e2e manual tests with the sync API on iOS and Android\n. LGTM!\n. LGTM!\n. Hi @willchu, I was able to run CodePush on an API level 16 device with the latest version of the plugin. Closing this for now, feel free to re-open and let us know if you are still seeing errors. \n. LGTM!\n. LGTM!\n. LGTM!\n. Hi @jedlau, I will close this because I have incorporated the required changes in https://github.com/Microsoft/react-native-code-push/pull/172. Thanks for your contribution!\n. LGTM!\n. GitHub is back up!\n. Yup agreed, I just pushed a change to wrap the getNewStatusReport in an AsyncTask.\n. Some caveats:\nThe this._codePush = new CodePush(\"deployment-key\", this, BuildConfig.DEBUG) line MUST be placed above the call to super.onCreate(savedInstanceState). This is because the ReactActivity implementation of onCreate() will also initialize the 3rd party packages, which will result in a NPE if this._codePush is not intialized before the call to getPackages().\nDo you think folks will run into issues with this hidden requirement? Should we document this inside as a comment?\n. I believe this issue was closed by https://github.com/Microsoft/react-native-code-push/pull/172 feel free to reopen otherwise.\n. LGTM!\n. LGTM!\n. @maxdjohnson We have merged a PR https://github.com/Microsoft/react-native-code-push/issues/205 that verifies the integrity of merged diff updates. With that I will close this issue for now. Please feel free to reopen it if you see the same issue pop up. Thanks! \n. Closing due to change in RNPM design.\n. Could we see the exception thrown? That could be helpful!\n. Also, how did you update to react-native 0.19.0? did you use the react-native upgrade command? My quick guess could be that Gradle is still sync-ing an older version of the react-native native libraries.\n. LGTM!\n. Closing. The latest RN release includes the RCTPromise fix.\n. LGTM!\n. @lostintangent It would be pretty simple for us to make a mechanism that allows users to change the app metadata during a promote. e.g.\ncode-push promote MyApp sourceDeployment targetDeployment --targetBinaryVersion 2.0.0 --description \"new description\" --mandatory false\n. LGTM!\n. Hi @tristangodfrey,\nThe crash you are seeing is probably due to this issue https://github.com/facebook/react-native/issues/5820. In RN 0.19+, there was a change added to the build script that skipped generating the offline bundle if you are running on the simulator. Therefore the app crashes because the offline bundle cannot be found. I think it has resulted in a lot of confusion in the RN community in general because it is not well documented anywhere. You should not be seeing this crash if you were to run on an actual device.\nI recently sent out a PR to RN https://github.com/facebook/react-native/pull/6119 to make the build script generate the offline bundle if the app is run in the \"Release\" mode. I hope it will get shipped as part of RN 0.21. If not the workaround for now, if you really need to test the offline build update scenario, is to comment out these lines https://github.com/facebook/react-native/commit/5f0ef12cb59f5bf619c3f5b38a7b400f5fbb9b8b in node_modules/react-native/packager/react-native-xcode.sh\n. LGTM!\n. LGTM!\n. @shishirx34 https://github.com/Microsoft/react-native-code-push/commit/7ad0fdcc7c1ad3b71093ce0da47e98fd3006333d click on changed files!\n. LGTM!\n. Hi @dejakob, codepush.gradle is the correct file. The docs in master apply to a version of the plugin that is not released yet, so it might be confusing that the latest version from NPM doesnt contain the codepush.gradle file.\n. You can just ignore and skip step 3 of https://github.com/microsoft/react-native-code-push#plugin-installation-android since it only applies to v1.7.4+. So, no need to use any of our gradle files.\n. LGTM!\n. LGTM!\n. LGTM!\n. @lostintangent I removed all the doc changes.\n. @lostintangent i think the problem might be because we forgot to update the podspec file after we moved all the ios files to a subdirectory. Ill send out a PR to fix this in a bit.\n. @jkhustler while I'm working on the fix, you may want to take a stab at updating your own podspec file too, note that all the codepush .h and .m files are in the ios subdirectory!\n. LGTM!\n. LGTM!\n. Hi @avishayil, could you remove this line \nrunBefore(\"process${targetName}Manifest\", generateBundledResourcesHash)\nfrom the codepush.gradle file and verify that the build succeeds?\n. @avishayil great! We have already merged this fix: https://github.com/Microsoft/react-native-code-push/pull/235\nWe will be uploading the latest bits to NPM soon, but for now if you want CI to work, you could specify github:Microsoft/react-native-code-push as your dependency in package.json to depend directly on the code on the master branch. We will let you know the moment we publish. \nI'll close this issue for now! Feel free to open it again if you run into more problems.\n. LGTM!\n. Hi @chirag04 (and anyone else who could be hitting this issue),\nThe full workaround is to\n1. Delete SSZipArchive from the CodePush library project\n\n2. Update the Header Search Paths of the CodePush library project to point at the version of SSZipArchive that is bundled together with the react-native-zip-archive plugin.\n\nClosing this, feel free to reopen if this does not work for you.\n. @chirag04 Sorry for the late reply, I somehow missed this. The best way I see to prevent having the manual deletion step is to make a fork of our project, delete the folder in that fork, and then specify your fork's github URL as a dependency in your package.json.\n. LGTM!\n. LGTM!\n. Should we do something similar for Android? We could point users to either edit the react.gradle file https://github.com/facebook/react-native/blob/master/local-cli/generator-android/templates/src/app/react.gradle#L84 or run their app in release mode.\n. LGTM!\n. LGTM!\n. LGTM!\n. LGTM!\n. Yup, I'm okay with this change.\n. Hi @GoldenForest, for which version of the plugin are you seeing this error?\n. @ACCTFORGH In Java, did follow all the Plugin Configuration steps? Specifically, did you override the getJSBundleFile() method in your ReactActivity to return CodePush.getBundleUrl()?\n. Hi @sonnylazuardi, the docs you are seeing on master are for a newer, not yet shipped version of the plugin. Could you follow the setup docs here https://github.com/Microsoft/react-native-code-push/blob/f04feadf6efdd464a6af6c7a0076d8042628af3c/README.md#plugin-configuration-android---react-native-v0180 instead? Thanks and let us know if you are still facing issues! Sorry about that.\n. Looks awesome\n. @BilalBudhani Can I confirm that while releasing updates to CodePush, you did not also release a corresponding binary update to TestFlight? If a new version of the binary is downloaded from TestFlight, the jsbundle shipped with that binary would take precedence over any CodePush updates downloaded under the old binary version.\n. @BilalBudhani Can you also confirm that you did steps 2 and 3 of https://github.com/Microsoft/react-native-code-push#plugin-configuration-ios? If that is not done, then the CodePush would install and run updates as they are downloaded but once the app process gets killed and restarted it would revert to loading [[NSBundle mainBundle] URLForResource:@\"main\" withExtension:@\"jsbundle\"] which is the version shipped in the binary.\n. @BilalBudhani That looks right. Do you ever see this issue show up when testing a \"Release\" build on the simulator? Or does it only ever happen when your binary is distributed via TestFlight?\nDo you know of any other plugin/code your app is using that would be clearing away the files in Application Support directory? That's where downloaded CodePush updates are stored.\nThe only place in our plugin code where we ever clear away old updates is https://github.com/Microsoft/react-native-code-push/blob/master/ios/CodePush/CodePush.m#L123, which theoretically will only ever get hit if a new version of the binary is installed causing the modified date of the binary's jsbundle to be different.\n. @niftylettuce The code-push dependency is correct, its the latest on NPM.\nHave you tried @skevy's other recommendation of using babel-preset-react-native-stage-0?\n\nI've gone ahead and packaged this up into ANOTHER, unofficial babel-preset, called babel-preset-react-native-stage-0.\nTo use, simply npm install babel-preset-react-native-stage-0 --save and put\n{ presets: ['react-native-stage-0'] }\n. @niftylettuce have you tried deleting the entire contents of the android/build folder?\n. How about doing rm -fr $TMPDIR/react-*? (to clear the bundle cache)\n. Just to help me understand the problem, what do u mean by a \"production bundle build\"? Are u following these steps https://facebook.github.io/react-native/docs/signed-apk-android.html#content to generate and run a release APK?\n. @niftylettuce Glad it worked out!\n. pwd2key belongs to the SSZipArchive library that we are shipping together with this plugin. My guess is that one of your other plugins in the project are also using the SSZipArchive library, resulting in a duplicate symbol. \n\nThere used to be a similar issue https://github.com/Microsoft/react-native-code-push/issues/241 reported here previously, except that user was linking the project manually (not using CocoaPods).\nIf you followed the workaround in that issue, and manually linked our plugin instead of using CocoaPods, you should be able to get this to work. I am not too sure about the best workaround from a CocoaPods workflow, but I will be happy to investigate this more tomorrow if you are still blocked. My guess is that if you removed the SSZipArchive files from our plugin in the node_modules folder, you should also be able to get this to just work, with some additional effort.\n. This change looks good to me.\n. LGTM!\n. LGTM!\n. LGTM!\n. LGTM!\n. The CodePush server does not gzip responses as far as I know. I have only seen that assertion give problems when doing testing and downloading from the RN dev server which I think does indeed gzip responses. \nThat being said, maybe it makes sense to remove a superfluous assertion would crash the app especially since like mentioned, we verify the package hash anyway.\n. Will it still make sense to call the progressCallback if the expectedContentLength is -1? https://github.com/Microsoft/react-native-code-push/pull/292/files#diff-08a74f0be1f1eaa02fa1d96998fbcc5fR74\nEDIT: Maybe it's fine to leave it there. I guess developers will still want to get progress for the number of received bytes.\n. LGTM! I'll merge this once @lostintangent signs off.\n. Looks awesome!\n. Thanks for the catch!!\n. @ghalong yup you are right, it just changes the version of the APK. If you explicitly specify the --targetBinaryVersion, it should skip trying to look at the build.gradle file. Let me know if it works. Thanks!\n. I see. That makes sense. Perhaps there could be a better way to reference the path to the node_modules directory without assuming that there is a fixed folder depth. I will try to investigate this, but in the meantime if you can think of a better workaround, feel free to send a PR. It seems that your original issue has been resolved so I will close this for now, feel free to reopen otherwise.\n. @johnwayner thanks for reporting!\nIf the package targets an earlier version of the application, it should not be run and be deleted due to this change. Have you encountered this problem yourself?\n. No worries, it's a perfectly legitimate scenario to be calling sync and testing CodePush with the simulator. \nThe fact that updates stick around when you deploy a new binary to the simulator with the same appVersion is by design, because we think it is a bad experience for users to keep having to re-download the same update every time a new binary is deployed. Does this behaviour make sense to you?\nAlso, if you deploy a new binary to the simulator with a newer/different appVersion, the original CodePush updates on disk should be cleared. The SDK would not re-download the CodePush updates because they would be targeting an older version of the binary. I will be double-testing this to ensure that this indeed the behaviour, but I just want to ensure that you are indeed seeing this behaviour, or are you seeing something different?\n\nWhen I updated the app version it would continue to use the downloaded package for the previous version.\n\nThis doesn't sound right. If you updated the app version and deployed a new binary to the simulator, it should delete the updates present on disk and load the one in the binary.\n. @kiliwalk That sounds like a different problem. In this case, you are not getting an update which targets your binary version within the range. I will take a look into this.\n. @kiliwalk Are you able to reproduce this error at all? During the time when your app version is 1.6.0 and your update's targetBinary version is '>=1.6.0 <1.6.2', if you ran the following code:\nconst config = await getConfiguration();\n  const localPackage = await module.exports.getCurrentPackage();\n  console.log(\"config appVersion is: \" + config.appVersion);\n  console.log(\"localPackage appVersion is: \" + localPackage.appVersion);\nWhat do you get?\n. @johnwayner thanks for all that information! I can confirm that what you are seeing is a legitimate bug. The old updates should indeed be cleared or at least not used when checking for updates if u deploy a new binary, even if it doesnt call [CodePush bundleURL]. I'm sorry that you had to go through all that investigation. We will be submitting a fix soon.\n. LGTM!\n. That definitely looks strange, it seems to be a server issue, we'll look into it.\n. Hi @Jered, do you have any idea whats the file size of your upload?\n. We currently impose a limit of 100mb, which should be the error you're seeing. I agree 100% the message needs to be improved. That said, we will increase the limit to unblock you. We have a server deployment scheduled today following which u should no longer see the error. I will keep you updated.\n. Hi @Jered, if you go ahead and do a release now, the server should accept it. Let me know if you are still hitting this issue.\n. Is this the first CodePush update that the app installs? Unfortunately, we are unable to do a diff update for the first update in Android. We have not found a workaround for this yet. However, subsequent updates after the first one will be diff-ed as expected. \nRefer to this PR for more details! https://github.com/Microsoft/react-native-code-push/pull/211\n. It should be asynchronous. How are you calling the download function? Are you using the codePush.sync() API?\n. @CaoLiang1991 We just merged #316 which should address this issue, we will be publishing the update to NPM, so feel free to reopen this issue if the problem still persists after the update.\n. From what I am understanding, you are calling codePush.sync() without any additional options, so the installMode will default to ON_NEXT_RESTART. Therefore, the changes will only show up when you kill the app. This can appear to behave different sometimes for certain emulators from my experience, where if the system resources allocated are not enough, sometimes backgrounding the app will immediately cause the process to get killed, in which case simply returning to the app will cause it to pick up the updates.\nSo, I would suggest for the googleplay version, to either try forcibly killing the app after the update is installed, or changing the call to codePush.sync() to use InstallMode.ON_NEXT_RESUME or InstallMode.IMMEDIATE, and see if it solves your problem. Let us know if otherwise!\n. On the first app launch, will the cold-start call to sync which uses codePush.InstallMode.ON_NEXT_RESUME also happen?\n. Nice!! now we don't have to keep updating this. LGTM!\n. LGTM!\n. @tomauty Can you inspect the \"./release\" folder for changes the second time u generate it using the react-native CLI? I have noticed that if you don't mkdir the \"./release\" folder first, sometimes the JS bundle doesn't appear or some assets go missing.\n. LGTM!\n. Thanks for all the reviews guys! I have incorporated most of the feedback, it should look way better now, please take another look.\n. Hi @xhacker5000, your latest Production update targets appVersion 2.0.4, but your latest app https://itunes.apple.com/us/app/dian-ying/id992080593?mt=8 is on 2.0.5.\nIf you are sure that the latest update can apply to the 2.0.5 version, you can use the following command: \ncode-push patch ArtGallery Production --targetBinaryVersion 2.0.5\n. @xhacker5000 awesome!\n. I did think about those cases and chose not to handle them..\n1. If the install count is greater than the download count, the CLI is clever enough to show \"0 pending\" and never a negative number. I also think it is very unlikely that the download status report would fail (since the client just completed a download successfully which means the client access to an internet connection).\n2. I think saving a single report is good enough, and here's why: As long as the last report gets sent, the numbers will tally. Let's say the user downloads and installs v2, but the v2 report didn't get sent. With this change, the client will not assume that v2 got sent, so if the client somehow installs v3 without sending the v2 report, the client will report an update from v1 -> v3, ignoring v2. The net effect on metrics is that there are 0 users on v1, 0 on v2, and 1 on v3, whether or not we chose to report that v1 -> v2 update will not make any difference.\n. I guess one effect though is that if the v2 report gets lost, v2 will forever have that unresolved \"pending\" install.. But again, I think its very unlikely because for that to happen, the report would have to fail repeatedly everytime the app resumes, and even fail right before the call to codePush.notifyApplicationReady() and codePush.sync() which downloads the v3 update. If the network conditions are so poor for that report to be dropped, its unlikely that v3 would even be downloaded successfully..\n. Hi @ACCTFORGH, did you see the app crash at all, or are these just from the debug logs? If the app did not crash, the download could have simply timed out due to poor network conditions, and reverted to the previous version, which is fine and expected behaviour.\nFrom my experience, the [CodePush] More than one CodePush instance has been initialized. Please use the instance method codePush.getBundleUrlInternal() to get the correct bundleURL for a particular instance. log is very much benign. The issue is that occasionally, the Android OS kills the currently running Activity and restarts it when the app goes into the background, just to free up resources. Because we cached the earlier constructed CodePush instance statically, the log will show up, but it is fine because the previous instance has already been destroyed anyway. I will think of a better way to handle this so that that misleading log doesn't show up.\n. What version of react-native-code-push are you using? At first glace, it looks like the version of react-native-code-push JS code in your update contents is not in sync with your app's Obj-C code. The getUpdateMetadata change was only introduced in react-native-code-push@1.10.3-beta, therefore if you released a JS update which bundles up a newer version of the plugin and it gets downloaded by an app using an older (pre 1.10.3-beta) version of the plugin, that error can occur. \nIf you upgraded our plugin, make sure you redeploy a new binary / release a new binary to the app store, to prevent this issue.\nLet us know if this wasn't the right diagnosis of the problem.\n. @wrlqwe I believe https://github.com/Microsoft/react-native-code-push/issues/241 is a similar issue, let me know if the solution steps in that issue work for you.\n. @LeBlaaanc to your last question, clients on running 2.7.x of the binary would still get the 2.7.x release.\n. LGTM!\n. LGTM!\n. Looking into this now\n. It seems RN broke this feature. The generated bundle when you run react-native bundle and the one generated in the app is different. This repros in 0.27.0-rc, it does not repro in 0.19. I'm not sure if 0.26.1 has the same issue.\n. Additionally, in 0.27.0-rc, everytime u run react-native bundle with the --reset-cache flag, it generates a slightly different jsbundle.\n. Well.. It looks like module IDs attached to each module in the JS bundle gets randomized each time.\n\n. LGTM!\n. @LeBlaaanc Could you also share more about your CI workflow? What's the motivation behind making two releases to the same app simultaneously? I'm not sure what the expected behaviour is on the server when two concurrent releases to the same app at the same time, i would expect its either one of two cases:\n1. One gets rejected because of a duplicate release\n2. One actually gets completely overwritten by the other\nDo you actually see in your deployment history both of those updates with the exact same version?\n. Hi @jerson, right now, our CodePush runtime has no ability to know what the file name of your bundled JS file is if CodePush.getBundleUrl() is not called previously. Did you follow all of the plugin configuration steps listed here, in particular, the overriding of the getJSBundleFile() method?\n. LGTM!\n. LGTM!\n. Seems like a race condition (user presses the button more than once, even though technically the dialog should get dismissed after the first button press). I will try to reproduce this issue and submit a fix if I can. Thanks for reporting!\n. Hi @steezeburger, this behaviour you are seeing happens when the native side of the react-native-code-push plugin was not linked properly. Did you follow all of the plugin installation and plugin configuration steps in our README?\n. No problem at all!\n. It would be great if you could make the .d.ts changes as well, but as it is now it looks good to me!\n. Thanks!\n. LGTM\n. LGTM!\n. LGTM!\n. LGTM!\n. @janicduplessis working on it!\n. Just a stab in the dark.. it seems that in RN >0.27 there were runtime errors around the nativeeventemitter class https://github.com/facebook/react-native/issues/8025, if you recently upgraded to RN 0.27, could u try re-running npm install and re-linking your modules?\nThe only other plugin that I see uses the deviceeventemitter is the fb login button, I would try removing it and seeing if the error still repros. I will try to see if i can diagnose the problem better\n. Thanks for the fix!\n. LGTM!\n. @calclavia The getJSBundleFile() method in Android was just created and released in v1.13.1 of our plugin. Are you using an older version of our plugin?\n. I will close this for now, please feel free to reopen if upgrading to the latest plugin does not resolve this.\n. The reason why I didnt go with that is that we still have to add the resume listener / restart the app depending on the installMode of the second call to install. Since all of that logic is currently implemented in native, i wanted to reuse that instead of reimplementing everything in JS.\n. I'm looking into it. It looks like it went into the legacy loadBundle behaviour, which would indicate that some exception happened. And inside there getCurrentActivity() is somehow returning null, which is bizarre.\nDoes this happen consistently everytime you send out an update?\n. What is your installMode? ON_NEXT_RESTART or ON_NEXT_RESUME? Perhaps the change to use getCurrentActivity() breaks in the scenario where the app is backgrounded. I will try to dogfood this and send out a fix.\n. Awesome!\n. LGTM!\n. Have you configured an app to download and install the update? Are you seeing the install happen successfully?\n. LGTM!\n. LGTM!\n. LGTM!\n. @mtunique #421 has been merged, if you pull down the latest bits from master, do you still hit this issue?\n. We've published react-native-code-push@1.13.3 to NPM that includes this fix.\n. Hi @dorongutman, the CodePushDownloadProgress event is not a keyboard event. Are you sure this would work? And even if it does, it looks strange that we would be registering custom events like this on the Keyboard.\nIs there any official instruction from RN to plugin authors to no longer use the DeviceEventEmitter? I definitely still see the DeviceEventEmitter working in RN 0.29.\n. Cool, thanks for being on the ball anyway!\n. Hi @tomauty, what version of the plugin are you using? We recently shipped a bug fix https://github.com/Microsoft/react-native-code-push/pull/387 that involves a rollback triggered by restarting the app twice. Since you are calling sync on both app start and another component, perhaps this could be a cause?\n. @tomauty We tested backwards compatibility to RN 0.19. I think RN 0.24.1 should be working fine with us.\n. Interesting, I've never seen this error before. Could you clarify what you mean by \"multi-updated labels\"?\n. LGTM!\n. Duplicate of https://github.com/Microsoft/code-push/issues/282\n. @overminder are you using https://www.npmjs.com/package/react-native-admob?\n. @overminder cool! Could you do us a favour and pull the latest bits from GitHub now that I have merged it, and verify that the fix works?\n. The fix was relatively quick because you provided a ton of useful information.\n. Awesome! We'll publish the changes to NPM tomorrow.\n. We've published react-native-code-push@1.13.3 to NPM that includes this fix.\n. @orzarchi This should not happen unless\n1. The recordFilesBeforeBundleCommand build step did not get run\n2. The temp directory is cleared in some other build step removing that file.\nCould you paste the output of react-native run-android so i can better see what's going on with your build?\n. @danieldunderfelt Thanks for the feedback. I will see how we can improve the documentation.\nWhen you created the staging project configuration, did you also manually create a Staging scheme?\n. @danieldunderfelt Unfortunately I was unable to repro the error you were seeing. \nAfter duplicating the release config and calling it staging + setting up the CODEPUSH_KEY config, all I did was go to Product > Scheme > Edit Scheme then set the Build Configuration to Staging. After that I ran the app and it was sync-ing against CodePush with the Staging key just fine.\nWhat version of XCode are you on? I don't know if that matters but I'm using v7.1.1.\nAlso are you using CocoaPods for dependency management?\n. @danieldunderfelt no I only asked because I wasn't using CocoaPods and I was wondering if you were.\n. Closed via #428\n. Looks good! Thanks for the fix!\n. I've published this to NPM: react-native-code-push@1.13.4.\n. Thanks for the feedback. The fact that React native plugins in general can navigate the app away from and back to the main ReactActivity was a scenario we didnt consider. For now I think yes disallowRestarts is the right workaround. And I agree maybe the solution is to call this out more explicitly in the docs, or perhaps add some extra console logging if we detect a few known plugins in the project that does this?\n. @greenteamer Running rnpm link from the RNPM CLI will no longer work in 0.29 for android. \nRNPM has been merged into React Native CLI, so you can try running react-native link instead. \nIf that doesn't work try instead performing the manual installation steps.\nLet me know if react-native link works for you, and I will update the docs.\n. Ah I see, the fix for react-native link will only go out in RN 0.29.2.\nFor now, could you use the manual installation steps?\n. If you replaced this line in your react.gradle file in node_modules https://github.com/facebook/react-native/blob/master/react.gradle#L90 with true, then when you run react-native run-android, immediately close the dev server, it should get forced to pick up the version bundled in the binary contents.\n. I have verified that our plugin is working on a RN 0.30 app. @Override protected String getJSBundleFile() { return CodePush.getJSBundleFile(); } is not ignored.\n@Sciandra-Leva, Line 90 of https://github.com/facebook/react-native/blob/master/react.gradle#L90 tells gradle to only create an offline bundle in the app binary only if its a \"release\" build. Changing it to a hard coded \"true\" value tells it to always create the offline bundle even in a \"debug\" build. Therefore, it needs to be done if you want to see it load the local bundle in debug, otherwise there wouldn't even be a local bundle.\nThe second thing you need to do is to close the dev server, the new terminal window that pops up, when you do react-native run-android. React Native has it hardcoded that in debug, it always first consults the dev server, and only if the dev server is not running, then does it go to the offline bundle.\nI will close this issue for now, feel free to reopen if you are still hitting this.\n. @chirag04 Installing the update from the server has always been expected behaviour whether its 0.30 or below. CodePush only doesn't install the update if one of the conditions are met:\n1. The targetBinaryVersion of the update doesn't apply to the binary version of your app\n2. The packageHash of the update is the same as the one that your app's binary is running\n3. The update has already been downloaded on disk. \nTo expand on 3., In a debug build, if you make a change and re-run react-native run-android with a new change AFTER the app already downloaded a CodePush update, the new binary's JS bundle will take precedence and get run. I have personally verified that this still works even in 0.30.\nPerhaps you are suggesting that we shouldn't be installing updates at all in debug, or we should have some way to send a timestamp of the binary's build contents to the server so that  the server won't return an older update. We've had a similar request on the Cordova side https://github.com/Microsoft/cordova-plugin-code-push/issues/157. I'm interested to know what your thoughts are.\nWill relabel this as \"enhancement\" since it isn't actually a bug.\n. This should be caused by getCurrentActivity() returning null when the app is backgrounded. Should be a simple fix, I will get this out by today.\n. Hi @huitsing, do you have a stack trace? The ones you pasted looks like just debug logs.\n. Could you share a code snippet on how you are using the image picker (options, etc)? I'm trying to set up a repro.\n. I can't get a repro to work from just launching the image picker after a codepush update is installed.\nYou said the crash only happens after the photo is uploaded? What exactly happens in the upload step, it just sends the image data to a server? What is triggering the read to the SD card?\nCould you have accidentally CodePush-ed an update to production after adding a new react native plugin, which isn't bundled in the binary of your production apps, thereby causing a crash since the JS code that was pushed out isn't compatible to the binary? \n. LGTM!\n. I've tested 0.30 on both iOS and Android and have not found any issues, so I will close this.\n. LGTM!\n. Hi @nazywamsiepawel,\nFrom the code snippet you shared, I think the reason why you are seeing this is that you are not calling codePush.notifyAppReady(). After you killed the app and relaunched it, because notifyAppReady() was not called in the previous run of the latest update that was downloaded previously, our plugin triggers a rollback. As such, when you checkForUpdate() again, you actually see the update, but with the failedInstall flag set to true (because we previously failed to install and run it successfully).\nThe beauty of sync is that it takes cares of all of this for you (calling notifyAppReady, checking the failedInstall flag, etc. I'm interested to know why you decided not to use it directly. If it's just because you want to show a custom prompt, you might want to look at the list of options that we provide in updateDialog. I think you can easily achieve the same behaviour you are currently looking to implement by passing the right SyncOptions to the call to codePush.sync().\n. I'm going to close this for now, feel free to reopen if you still need help.\n. > Would it be worth doing something to check that the app version is semver and/or allow them to change it?\nI'm hesitant.. mainly a) I don't see that as part of linking and b) not everyone uses RNPM/react-native link so its not going to help everyone. If anything, I feel like we could display a warning when they use release-react.\n. Did you add the getJSBundleFile override to your MainApplication? https://github.com/Microsoft/react-native-code-push#plugin-configuration-android\n. LGTM!\n. @scottbommarito already checked in tests that work via a different mechanism, so these demo app tests are no longer used.\n. Thanks!\n. This usually only happens when the native part of our plugin is not linked correctly. Could you share your MainApplication.java? Did you follow these plugin configuration steps? https://github.com/Microsoft/react-native-code-push#plugin-configuration-android\n. Are your babel transforms colliding? This issue might be related. https://github.com/graphql/graphql-js/issues/414\nDoes it work if you use require directly like what @ComethTheNerd suggested?\n. Are you using the es7 decorator features? Do you have this in your .babelrc?\n{\n  \"presets\": [\"react-native-stage-0/decorator-support\"]\n}\n. Could u share how u instrumented CodePush in index.android.js?\n. The trace you posted shows u wrapping the \"HelloWorld\" component with the default exported function, but I don't see that in your code snippet\n. @ps-swaroop I am unable to reproduce this error from testing the latest bits on NPM. If you would like, I can set up a skype session with you to see what's going on. Feel free to email me at kogoh AT microsoft.com\n. @ps-swaroop I got your email, I will follow up with you offline and close this since it seems to be a problem unique to your setup.\n. Which version of react-native-code-push are you using? Looks like a similar issue to https://github.com/Microsoft/react-native-code-push/issues/440.\n. Looks awesome! Please make the change @silhouettes suggested.\n. Thanks!\n. @mtunique Are you linking the plugin via this way: https://facebook.github.io/react-native/docs/integration-with-existing-apps.html#add-native-code?\nThe main difficulty is your ReactInstanceManager would be initialized as such:\nmReactInstanceManager = ReactInstanceManager.builder()\n                ...\n                .addPackage(new CodePush(...))\n                .build();\nSo, we can't pass in the mReactInstanceManager instance to CodePush during construction, perhaps it could be a separate method call to set it?\nIf you find an elegant way to implement this, feel free to send out a pull request!\n. What if we let you pass in a custom ReactInstanceManagerHolder interface, that you would need to implement? The interface would expose a method ReactInstanceManager getReactInstanceManager() { ... } to us.\n. @mtunique I just sent out https://github.com/Microsoft/react-native-code-push/pull/470, which should unblock you, please take a look if you are interested.\n. I published #470 to NPM as v1.14.4-beta so it should work if you pull the latest bits!\n. I guess its possible that the iOS and Android bundles generated by React Native could be similar if your app doesn't contain any platform specific components (e.g. TabBarIOS, ViewPagerAndroid), however we don't recommend it. \n.  Both will receive it if you used the same deployment key. CodePush doesn't send platform information when you query for updates, so it will just download the update as long as the binary's version is within the targeted range.\n. Sorry just to clarify your question. You see the error AFTER you removed the line?\n. It's hard to diagnose this without more information. Could you show us the console logs, or show us the stack?\nAre you running in the debug or release scheme?\n. I see. The error message is pretty informative. For example, could you try doing Suggestion number 2 that suggests to remove lines 17-20 of node_modules/react-native/packager/react-native-xcode.sh, and see if the error still occurs?\n. It will load the bundle file that is compiled into disk during the \"Bundle React Native JS Code and Images\" build step. You only really want to do this when you are testing CodePush, since removing the line from node_modules/react-native/packager/react-native-xcode.sh causes the build to become slower. Otherwise, during development, I presume you'd prefer to use the dev server. The iOS configuration section in our README explains all of this, and suggests you do something like this:\n``` objectivec\nNSURL *jsCodeLocation;\nifdef DEBUG\njsCodeLocation = [NSURL URLWithString:@\"http://localhost:8081/index.ios.bundle?platform=ios&dev=true\"];\n\nelse\njsCodeLocation = [CodePush bundleURL];\n\nendif\n```\nso that CodePush is only used in release builds.\n. @kenwheeler not right now. I'll try to add support for this ASAP!\n. This has been published to NPM as v1.14.3!\n. @rahuljiresal Awesome that you managed to figure this out! I'll let @silhouettes sign off before I merge it.\nWe should also check if Android has the same problem.\n. @rahuljiresal I don't know if problem has anything to do with whether its a simulator or emulator. When CodePush CLI uploads the folder containing these update contents, it would zip up the whole folder, including any .DS_Store files along with it. When the device downloads the whole update contents as and unzips it, then tries to verify the hash, it would still (erroneously) add the .DS_Store file to the manifest used to compute the hash. So whether its a simulator or not, theoretically it would still run into the same problem.\nThe android change doesn't have to be part of your PR. I was just leaving a note.\n. Thanks for your contribution! I'll ping you when it's published to NPM.\n. @rahuljiresal Its been published as v1.14.4-beta!\n. I see. We'll see if we can get this fixed today.\n. Could you show us your info.plist and mask out the key?\n. Are you running the debug scheme? From your screenshots CODEPUSH_KEY is not defined in debug.\n. Since CODEPUSH_KEY is not defined in debug, the 400 is expected behavior because you are not sending a deployment key from which to get updates from.\n. I assume you followed the Multi-Deployment Testing section of our docs.\nThe deployment key is used to query updates with a particular deployment. If you release to Staging, then any app configured with the Staging key will get the update. That section of the docs assumes that you won't want to use CodePush during development/Debug, and you will want to prepare a Staging build for your internal testers, then a Release build for publishing to the app store. So, the staging build should be configured with the Staging key, and the Release build will be conifgured with the Production key. You would then make CodePush releases to Staging first, so that once testers have signed off, you can promote the release to Production so that production users can see it.\nTo do a Staging/Release build, you can click on your target > Edit Scheme and change the run configuration to Staging/Release.\n\n. code-push debug ios might not output anything if your app is running in a release build. Could you try running it in debug mode, and if code-push debug ios still doesn't work, try running it from xcode to see the debug logs?\n. \u6211\u4eec\u6682\u65f6\u65e0\u6cd5\u5728\u540e\u7aef\u5141\u8bb8\u4e0d\u5b88semver \u7684\u7248\u672c\u53f7 (\u5982 2.00.7)\u3002\u552f\u4e00\u65b9\u6cd5\u662f\u628a\u7248\u672c\u53f7\u6539\u6210\u5b88semver(\u5982 2.0.7)\uff0c\u6216\u5e94\u7528overrideAppVersion()\uff0c\u7136\u540e\u628a\u65b0\u7248\u672c\u53d1\u5e03\u5230app store\uff0c\u4ee5\u540e\u5c31\u53ef\u4ee5\u7528CodePush \u66f4\u65b0\u90a3\u4e2a\u65b0\u7684\u7248\u672c\u3002\n. Could you show us your AppDelegate.m file? The automatic patch assumes that you have a jsCodeLocation = xxxx line in that file and attempts to automatically patch that for you. If it still doesn't work, you could simply manually patch it instead following our manual iOS Configuration steps.\n. Do you happen to have more than one AppDelegate.m file in your project? I suspect this glob search is not yielding the right file.\nvar ignoreNodeModules = { ignore: \"node_modules/**\" };\nvar appDelegatePath = glob.sync(\"**/AppDelegate.m\", ignoreNodeModules)[0];\n. @traveliago Thanks for diagnosing this! I think really old versions of React Native used to not nest the iOS files under an \"ios\" directory, so it could be just \"Travellago/AppDelegate.m\". Maybe handling these two cases is good enough.. I'll think about this more and send out a fix..\n. If there is an update targeting 0.5.1, the CodePush plugin will install it. During development, if you want to clear away all the updates so that CodePush won't see any updates, you can do code-push deployment clear AppName deploymentName\n. Right now CodePush doesn't send timestamps to the server for the server to determine if it should return an update or not, because we don't have a \"build timestamp\" we can use. However, the SDK does compare local bundles. For example, during development, in debug mode you installed the app to the device/simulator, then u sent a CodePush update to it. Next, you made some changes, and deployed a new version of the app to the device/simulator, WITHOUT first deleting the previous app on the simulator/device. The new binary bits should override the installed CodePush version, and because the CodePush version still exists on disk, it will no longer install new updates. Is this not the behaviour you are seeing?\n. Yes for that scenario you are talking about, the device will get the update.\n. In production, you'd expect the right versions to always be ahead. Let's say you release 1.0.0 to the store. Next, you find a bug, you release v1 to CodePush targeting 1.0.0. Now all users who download 1.0.0 from the store will get the fix.\nFew weeks later, you find that you need to release a new version to the store (maybe you installed a new react native plugin that modified Obj-c code). You publish it as 1.0.1. Now, all users who update their app to 1.0.1 or download it fresh from the store will NOT get CodePush update v1, because it targets 1.0.0.\n. Looks legit. Thanks for your contribution! I will look at this tomorrow.\n. Thanks @ymmuse!\n. Change \"this.getResources()\" to just \"getResources()\". Its a bug on React Native's end - https://github.com/facebook/react-native/pull/9381\n. Change \"strings\" to \"string\"\n. This should have been fixed in the latest version of RN https://github.com/facebook/react-native/commit/1168d0db45dc6105a4e88a7749ad5867d37049d2\n. It depends on the type of error:\n1. Error from \"loading\" the JSBundle (first tick), up to the point the root component is mounted (componentDidMount) in which you call codePush.sync or codePush.notifyAppReady. After CodePush installs an update, if you boot up the new version of the app and the app crashes immediately, the next time you boot up the app, it will rollback to the previous installed version (could be another previously installed CodePush version, or the version in the binary if there isn't one).\n2. Subsequent errors, for example, user presses a button which triggers a function handler which executes an undefined property access. Such errors will cause a crash, but will not trigger a CodePush rollback, because crashes can happen any point of time in the app and we don't want to be overly aggressive in rolling back updates. codePush.notifyAppReady is the mechanism by which an update is \"rubber stamped\" as a successful update - once this has been called during the runtime of a particular CodePush installed version, it will no longer be rolled back.\n. @steffenmllr CodePush downloads the bundle and saves it locally on the device, so the app will still start if the device is offline.\n. It happens when the app calls codePush.sync().\n. Oh, when you build the app in release mode, there is a shell command that is executed that generates the offline bundle packaged into the IPA/apk. That shell command is part of your build when u created the project using react native's CLI, it has nothing to do with CodePush\n. Hmm. What version of NPM are you using? npm -v\n. I assumed glob should be there as brought in by a dependency of React Native. I guess we might have to take a direct dependency on it. In the meantime if you npm install --save-dev glob and then run react-native link again it should work\n. LGTM!\n. @colus001 Have you considered adding a crash reporting tool (e.g. Sentry, Crashlytics) to your app so that we wouldn't be just fighting blind against such errors?\n. @daniel-beard Can you share how you are using these methods from native code, that they would need to be exposed publicly? It is true that they are exposed in Android but they are also completely undocumented, and it would be great if we have a good reason for supporting them going forward.\n. I see. Is there a reason why you can't get this information from JS?\n. I'll go ahead and merge this, the changes look clean. Thanks @daniel-beard!\n. Sorry, when you say iOS/Android SDKs, you mean you want these events to be visible from native (Obj-C/Java) code, or just from JavaScript? The former isn't our primary use case, and I would argue that all of these except the last one are already supported in the latter.\n\nBundle downloaded succesfully\n\nDoes codePush.SyncStatus.UPDATE_INSTALLED not address this?\n\nBundle failed to download\n\nWe don't expect this to happen at all, but if it does codePush.SyncStatus.UNKNOWN_ERROR should be called and the codePush.sync() promise should be rejected with the error.\n\nBundle was applied successfully\n\nAfter booting up the new bundle, if the codePush.notifyAppReady() or codePush.sync() promise gets resolved, it means the bundle is applied successfully.\n\nBundle failed to apply\n\nWe could add a codePush.didRollback() API which when called, returns a promise that resolves to a boolean flag indicating whether app rolled back to an old version during the current boot up. Another way is to use codePush.checkForUpdate() to get the latest update and then check the failedInstall property of the remote package which indicates whether the latest update on the server had previously failed installation.\n. Hi @igrayson, overall the approach looks sound! Thanks for your contribution. I have some comments about the implementation, I will post them later.\n. Thanks @igrayson!\n. LGTM!\n. I can see from the trace the app seems to be in a state where it thinks there is a pending update, but there isn't actually one on disk. From what I see, the only way it can get into that state is if the app installs two updates the installation transaction fails, e.g. app get's killed somewhere on this line, which means the current update is removed but the info dictionary still points to it. It seems like a really unlikely case to ever happen though.\nAnyhow, I will send out a code change later that prevents crashes during rollbacks.\n. We haven't seen apps using CodePush get rejected by Google before, so this is a first for us, but we have seen similar things happen on the iOS App Store. However, we also have many, many customers who are using CodePush in production apps that are live in both stores, so like you said, I don't think it's a case of the Play Store forbidding the use of CodePush or anything like that. Here are some questions I have that could give us a better idea of why the app got rejected:\n1. When a user downloads your app from the Play Store right after it goes live, does it immediately download an update from CodePush? Presumably, an app that immediately downloads a lot of data the moment it gets installed would look fishy. I would instead hold off on publishing another version of the app to CodePush until the app is already live.\n2. Are you using the updateDialog option in codePush.sync? This is highly unlikely, but we had users tell us that the iOS App store rejected apps that showed the update dialog before an update is installed because it was confusing and looked too similar to the OS's update dialog. I'm not sure if this would apply to Android at all.\n3. I know that Niantic is against users using software that call Niantic's private APIs to gain information about Pokemon in different locations. Perhaps the Google Play Store is placing additional attention on such apps and having more stringent checks? Everytime your app get's rejected, have you ever tried resubmitting but not removing CodePush? Does the app still get rejected in those cases?\n. > Yes, it immediately downloads the update. I could see how that could look fishy. What is the best practice here? To wait $interval before checking for updates?\nI don't think you need to wait for an interval to call sync. What i meant was, only when the app is accepted, and it goes live to all users on the Play Store, only then start publishing updates via CodePush. When the reviewers first look at it, they shouldn't have to ask \"why does a fresh version need to download so many additional code updates?\", but instead see the call to codePush.sync that says the app is up to date and doesn't download anything. On the other hand if an app has been around in the store for at least a day, then publishing updates to it seems more acceptable.\n. > When I pushed to the Play Store, I immediately pushed a Code Push update to ensure the Play Store version would be correct.\nThis is a seperate issue, but technically, if you added the codepush.gradle build step (see step 3), it should not download the latest version from CodePush if its contents and hash matches the one in the on-disk version exactly. If that doesn't work, it would suggest there is a bug with our hash generation.\n. @daniel-beard You can sign the CLA here: https://cla.microsoft.com/\n. @daniel-beard Sorry do you mind resolving the conflicts? I want to get this merged. Thanks!\n. I'm sorry for dragging out this PR again, but thinking about this more, I still have some questions:\n1. I see that the motivation for this fix is that we should guard against nil dereferencing NSError ** pointers, e.g. doing things like if (*error) { return nil }.\n2. However, you brought out a second problem, which is that checking the error object in the first place is \"fragile\". I think I am convinced about that.\n3. I'd argue that the fix for 2. would also fix 1. (because we no longer need to nor should check returned error pointers, and therefore, dereference them). So why are all the additional local *localError variables needed then?\nI'll leave some inline comments to better illustrate what I mean.\n. Hi @daniel-beard, I want to respect your time, so if you want me to just merge this and I can continue where you left off later, feel free to let me know!\n. Yes! this looks a lot cleaner (and shorter). I will merge this, test and get it published ASAP.\n. Hi @Pho3nix, I would like to merge your contribution! Could you sign the CLA? Thanks!\n. Thanks!!\n. Hi @Zenton, so your node_modules folder doesn't live in the react root? Because if it does it should technically just work.\nIt will be a nice feature to add, I agree. We also documented the way to manually link our android native library here so you could use that as a workaround for now.\n. How about if we have you declare a project variable, like so:\nproject.ext.set(\"nodeModulesPath\", \"path/to/node_modules\");\nAnd we can update codepush.gradle to use that if its set, otherwise, fall back to the default location. Does that sound ok to you?\n. Hi @huiyangs, yes indeed there is a workaround via the overrideAppVersion method of the Java API.\nhttps://github.com/Microsoft/react-native-code-push#static-methods\n. Just to clarify, are you using rnpm or react-native link? The former seems to be no longer maintained.\n. If you go to the Pods project from XCode, and expand the Headers folder, do you see those file references there? It looks like there are dangling file references that need to be removed.\n. I am unable to reproduce this. Could you provide more information? How did you create the AppStaging scheme, did you duplicate an existing one?\n. Thanks for your contribution!\n. Thanks!\n. Hi @jerson Can you provide more information about when you are calling restartApp? Is it after the sync promise resolves?\n. Are you using a plugin to play the music? react-native-music-control or react-native-audioplayer? I am trying to set up a repro.\n. Hi @jerson, our restartApp() logic did not change over the two versions you mentioned, this crash you are seeing is a result of this change. We need more time to dig into the React Native internals about what we/your audio player is doing such that the jscWrapper is dereferenced but the jsContext isn't. However, as a workaround, could you try stopping the music player before calling restartApp() and see if the problem persists?\n. I could not reproduce this. How did you test the release build? react-native run-android --variant=release, or ./gradlew assembleRelease to generate the APK and install it via some file transfer process?\nThere should be a CodePushHash.json file in the assets directory in the generated signed APK.\n. It seems like the crash is happening AFTER notifyApplicationReady, thats why there is no longer rollback protection because notifyApplicationReady is what \"rubber stamps\" an update as successful.\nMy guess is that your installation code may be causing a crash, maybe there is an undefined property access in trying to install an update when there is none. Could you share your installation code?\nAlso, in general we discourage using the advanced API (notifyApplicationReady, checkForUpdate, install) directly, but instead recommend using either codePush.sync() or the default codePush decorator, as these APIs are more convenient, less error prone, and also customizable for most use cases. It would be great if you could share the reason, if any, why those APIs do not fit your use case, and we can see if we can add additional feature extensions to those APIs.\n. sync already calls checkForUpdate internally, you shouldn't need to call it directly.\nTo achieve what you want, you could simply make use of mandatoryInstallMode and do the following:\njavascript\ncodePush.sync({\n    updateDialog: null, \n    mandatoryInstallMode: codePush.InstallMode.IMMEDIATE,\n    installMode: codePush.InstallMode.ON_NEXT_RESTART\n}).then((status) => {\n    switch (status) {\n        case codePush.SyncStatus.UP_TO_DATE:\n            console.log(\"The app is up to date!\");\n            break;\n    }\n});\nBy the way, the default updateDialog is already null, the default mandatoryInstallMode is already IMMEDIATE, and the default installMode is ON_NEXT_RESTART, so the one line, no frills\ncodePush.sync();\nwould already result in the exact same behavior you want. All of this is documented here.\n\nI know that notifyApplicationReady is natively called in the syncInternal mode but for some reason it's not called if i put the sync in componentDidMount\n\nThat shouldn't be true. What behavior are you seeing that made you come to that conclusion? If you were indeed seeing a problem with that, it would be a bug on our end that we should fix.\n. If you downloaded the latest update on Staging, are you able to see what is in the contents? Do you indeed see that index.android.bundle file? Could you have published an iOS update to Staging and downloaded it from and android client by accident?\n. Thanks! Glad you are unblocked.\n. @sopaco I can't reproduce this problem. Can you show us where are you making the await operations? I tested those on async componentDidMount() and did not see any failures.\n``` javascript\nfunction alertAfterTimeout() {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      Alert.alert(\"Boo!\");\n      resolve(\"resolved\");\n    }, 5000);\n  });\n}\nclass CodePushDemoApp extends Component {\n  async componentDidMount() {\n    var str = await alertAfterTimeout();\n    Alert.alert(str);\n  }\n  ...\n}\nCodePushDemoApp = CodePush({\n  checkFrequency: CodePush.CheckFrequency.ON_APP_START,\n  installMode: CodePush.InstallMode.ON_NEXT_RESUME\n})(CodePushDemoApp);\n``\n. Does the recordFilesBeforeBundleCommand script fail with an exception? It would help us to diagnose the issue.\n. The attached issue is not related, rather this is (yet another) breaking API change toJsBundleLoader.createFileLoaderin RN 0.33 (it no longer requires aContext` to be passed to it). See the related commit: https://github.com/facebook/react-native/commit/0c2fdf4b6af3c4193d351ed615b9fc12c941173a#diff-e110fa648a5e434c9533e8e35b5b1f6dR50\nWe need to change this line https://github.com/Microsoft/react-native-code-push/blob/master/android/app/src/main/java/com/microsoft/codepush/react/CodePushNativeModule.java#L116 in our code.\n. Hi @rozele, did you test this with the immediate and on resume install modes?\n. Thanks @rozele!\n. Does it still repro if you disable caching in HttpClient in react-native-windows?\n. Awesome to finally see progress in this!. fixed in latest commit!\n. done\n. Almost all of the other source files previously written have Facebook copyright in the comments. Should I change all of them? What is our standard format? This was generated by XCode.\n. removed all the copyrights for now.\n. what happens if the download fails? cordova side has an error handller for this\n. local.apply in package-mixins.js does the same thing, is there a reason why we need this here as well?\n. Yeah the main issue I am facing is being able to return promises from native code calls on Android. In the iOS side u have:\nobjectivec\nRCT_EXPORT_METHOD(method:(RCTPromiseResolveBlock)resolve\n                  rejecter:(RCTPromiseRejectBlock)reject)\nEither theres no Android equivalent or I'm not aware of it since its not in the docs. Its all done using callbacks for the Android side. Thus from the JS side, I need to have Promise wrappers for those native calls.\n. Something weird is going on with the numbering. The markdown file says 3., but in the preview it shows 1. Let me try to fix this.\n. Should we download it?\n. EDIT: will fix\n. It looks like the deletion of this code caused a regression. https://github.com/Microsoft/react-native-code-push/issues/39\n. This looks great. If you do want to merge this, I would make a couple of tweaks:\n1. Name the variables packageFileAttributes and  packageDate instead of appFileAttribs and appDate. binaryFileAttributes and binaryDate probably also sound more obvious that we are refering to the file in the app store binary instead of mainFileAttribs and mainDate.\n2. Rename jsCodeLocation to binaryJsBundleUrl\n3. Replace lines 44-53 with a simple if-else statement, that way we save a few lines and make the code look cleaner.\nobjectivec\nif ([binaryDate compare:packageDate] == NSOrderedAscending) {\n    // Return package file because it is newer than the app store binary's JS bundle\n    return [[NSURL alloc] initFileURLWithPath:packageFile];\n} else {\n    return binaryJsBundleUrl;\n}\n. The variable's value will be null when declared\n. So according to https://developer.apple.com/library/ios/releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW5, since ARC is turned on for us, the value will be initialized to nil.\nHowever, I think I will still set it to nil explicitly, so that future contributors won't have to go through this investigation. Seems like many people think it is good practice to do so anyway too. Thanks :)\n. I have added two assertions, one for \"bytesLeft should never be negative in didReceiveData\", one for \"received and expected bytes should be equal in connectionDidFinishLoading\"\n. I have just added some tests in the sample app in this branch, look for Examples/CodePushDemoApp/CodePushDemoAppTests/DownloadProgressTests.\nThey use the react packager (for ease of running, since it starts up automatically when u run the test project) to act as a server to serve 3 pacakges, one 100kb, one 2mb, one 50mb. The tests call the download, after each download, check if the number of bytes returned tally (expected = received).\n. Any way to const-tize the keys \"rollbackTimeout\" and \"allowRestartOnResume\"?\n. They are, the line syncOptions.updateDialog = Object.assign(CodePush.DEFAULT_UPDATE_DIALOG, syncOptions.updateDialog); handles that.\n. I'm not really sure. The thing here is that any thruthy value would work, because it would be shallow merged with the fields from the defaults. I guess there are three options we can put here that would create the same behaviour:\n1. The boolean flag true - which is what i did\n2. An empty object {} - which I don't like, it feels kind of hacky.\n3. Explicitly pass in CodePush.DEFAULT_UPDATE_DIALOG - which is more elegant than 2, but we lose the ability to communicate to developers through this sample app that default values will get picked up even if we don't explicitly pass them in.\nWhat are your thoughts?\nI can also make sure that this behaviour is clearer in the documentation.\n. Do we want to change that behaviour? I think it was okay before we had the ability to control the InstallMode. But after we have the ability to \"install and not restart\", I feel like having this report the success of that operation makes more sense. The INSTALLING_UPDATE status would then be the parallel of what cordova has presently.\n. If the install mode is:\nIMMEDIATE - Sync will not return the UPDATE_INSTALLED status as the whole app will be restarted to a new javascript context before the callback occurs/promise returns. If sync is configured to occur on app start in the new version, it will check for update, and the result UP_TO_DATE will be returned. You are right, they can also use isFirstRun.\nON_NEXT_RESUME or ON_NEXT_RESTART: Sync will return the UPDATE_INSTALLED status after the update is installed. The developer can choose to write some code to maybe do some cleanup before triggering a restart himself.\n. I have updated the docs to explain this behaviour better. Hopefully it causes less confusion.\n. Okay, based on our offline discussion I have changed the behavior to return the UPDATE_INSTALLED status right before the restart. Took me a while because some of my tests were failing after the change. Updated the docs as well.\n. checkForUpdate() or sync()? the former doesn't use CodePush.DEFAULT_UPDATE_DIALOG right?\n. Hmm. That could be a potential bug. I thought it returns a new object but apparently I am wrong. https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\nAlso, passing it the value of \"true\" worked for me with Object.assign() before this change, otherwise the example app would not have worked. Maybe the typecheck is not necessary here.\n. To ensure DEFAULT_UPDATE_DIALOG doesn't get modified, we should do:\nsyncOptions.updateDialog = Object.assign({}, CodePush.DEFAULT_UPDATE_DIALOG, syncOptions.updateDialog);\n. Maybe we should log an inconsistency error instead of an empty else block\n. The deleted lines were wrong I think. $(SRCROOT) in the CodePush project is relative to itself. Having \"$(SRCROOT)/node_modules/react-native/React/**\" is sufficient. The added line supports loading from the Example project's node_modules in the case where the example project is the source root.\n. Maybe not. I'll try to see if it works.\nEDIT: works great!\n. In case we have a native code push SDK, maybe its better to keep the react native prefix there.\n. I wanted to but I think we can't construct a File object for a file in the assets folder, its a packaged apk file, so I can't find any way to retrieve the date.\n. This must have changed in a recent release. I'll try that out\n. We are implementing an interface, so if you do not override the method, the compiler will throw an error.\n. Not that I know of. Let me know if you found a way to do it. The assetsBundleFileUrl was leftover when I tried to find a way to do just that - invoke the bridge to navigate to the script. I will remove it.\n. Its not a hard rule. Consistency is the main concern. I will be happy to add underscores if you think it is important.\n. Will throw exception if it is different instead. http://stackoverflow.com/questions/23113497/what-are-buildconfig-debug-conditional-checks\n. This should be removed.\n. EDIT: This version works okay, at least i was able to run the end to end scenario.\n. Cordova side uses the date of the entire resources folder for comparison. I just fixed it to follow what we did there.\n. Got DeviceEventEmitter to work on iOS :)\n. http://www.merriam-webster.com/dictionary/necessary\n. subsequent\n. update\n. synthetic\n. I got the file from https://github.com/ZipArchive/ZipArchive/blob/master/SSZipArchive/Common.h, it is unmodified. Will add a link to the README where I copied the files from.\n. Added the README here. https://github.com/Microsoft/react-native-code-push/blob/asset-update/SSZipArchive/README.md\n. Will fix because you are absolutely right. Just a note that this was also generated code from running the react-native upgrade command\nhttps://github.com/facebook/react-native/blob/4fc3e26cc8794e0d40d45abd23d065dd18de4e22/local-cli/generator-android/templates/src/app/react.gradle\n. v1.3.0 and v1.4.0?\n. Will this work if the install mode is ON_NEXT_RESTART? My conjecture is in that case this flag will be true on start, hence updates will ALWAYS rollback.\n. @lostintangent BuildConfig is a generated class that is packaged to the parent project, e.g. com.mycompany.myapp.BuildConfig. We have no idea what their namespace is from our plugin package. One possible way is to get developers to pass in that value to CodePush via the constructor so that we can use it. That will involve a small but nonetheless breaking change to the current setup instructions. What do you think?\n. offline discussion - can't do this due to bug with android https://code.google.com/p/android/issues/detail?id=52962\n. Yes it would, I am currently working on android changes now, will incorporate all of yours and shishir's feedback soon.\n. Added!\n. Just a note that this file change is auto-generated from running the react-native upgrade command.\n. Yep sorry, was going to add that in. Am multitasking between 3 PRs\n. Yep, that makes sense.\n. Done\n. Hmm, I thought [CodePush bundleURL] and in turn [CodePush clearUpdates] never gets called in debug mode?\n. In Android, yes getBundleUrl will get called, but it would resolve to the package file if there is an update installed, so clearUpdates() wouldn't get called. The only time clearUpdates() would get called is if a new binary is applied, which I think makes sense even in the dev scenario. What do you think?\n. The trouble is knowing whether we are in dev mode from the CodePush class, since it is set in the parent project's BuildConfig. The only way I can think of right now is to have them pass in that value to us in the constructor or the call to getBundleUrl. Is there a better alternative?\n. Okay, I have made the change to according to your feedback.\n. Are you sure that works? https://babeljs.io/repl/#?experimental=true&evaluate=true&loose=true&spec=false&code=import%20%7B%20NativeModules%20%3A%20%7B%20CodePush%20as%20NativeCodePush%20%7D%20%7D%20from%20%22react-native%22%3B\n. We reference CodePush a few times in this file, e.g. syncStatusChangeCallback(CodePush.SyncStatus... prefer to keep this here for simplicity\n. nit: Think the expression could be improved slightly, the way it is written now sounds like it will no-op if a falsey value was passed to the onlyIfUpdateIsPending parameter.\nMaybe something like \"If a truthy value is passed to the onlyIfUpdateIsPending parameter, then the method call will restart the app if there is actually a pending update waiting to be applied, or no-op otherwise.\"\n. Probably state the default value of isDebugMode?\n. Could notifyApplicationReady be called multiple times? Suppose the developer puts notifyApplicationReady in componentDidMount() to one of the components in the app, perhaps the main page. If the user then switches to a different page/component and comes back later, isFirstRun would still evaluate to true.\n. We could. Although if the flag evaluates to true, we still need to fetch the latest failed update's metadata. The flag would serve as an optimization and prevent a disk hit if the app did not rollback.\n. I'll do an optimization to check isFirstRun first, then check whether it's been reported.\n. Added!\n. I think we should.\n. Added\n. I think its a good idea, refactored.\n. If it is an appVersion identifier, it does not include a colon. Hence the name isStatusReportIdentifierCodePushLabel, it tells you whether it is a CodePush label or it is just a native app version. I agree it would be much cleaner if all this was in the CodePushStatusReport class, i'll push a change in a bit to move that there.\n. Yes if notifyApplicationReady() is called more than once.\n. Point taken about the naming. And no, local variables are not auto-initialized to null in Java. Only class and instance variables are auto-initialized to null.\n. Added the comment\n. I guess this comment can be removed?\n. It is definitely supposed to no-op and show you this message - \nrnpm info Linking react-native-code-push android dependency \nrnpm info Android module react-native-code-push is already linked \nrnpm info Linking react-native-code-push ios dependency \nrnpm info iOS module react-native-code-push is already linked\nThat said, there's some weird issue with android where it is inserting the same lines in gradle twice. I'm checking with those guys\n. Actually, if the original project was linked with RNPM too, everything works fine. If the original project was manually linked via our previous instructions before, the RNPM linker gets confused.\nFiled an issue here:\nhttps://github.com/rnpm/rnpm-plugin-link/issues/27\n. It currently says this: \"Update is invalid - no files with extension .bundle, .js or .jsbundle were found in the update package.\"\n. Take a look at https://github.com/Microsoft/react-native-code-push/blob/master/android/app/src/main/java/com/microsoft/codepush/react/CodePushInvalidUpdateException.java\n. 1. This is the same behaviour as Android https://github.com/Microsoft/react-native-code-push/blob/master/android/app/src/main/java/com/microsoft/codepush/react/CodePush.java#L379: If the error is an IOException (which should not happen), we don't mark the update failed because the problem could be with our plugin, not with the update. I don't really see the value of adding retry logic, it seems like a little overengineering. If it were to fail once I doubt repeating the same process would cause anything different to happen. I think the simplest solution is to reject the sync promise, and get the error printed to the console so that users can report it. I think that if this is in place, we would at least get more information on https://github.com/Microsoft/react-native-code-push/issues/180 and rule out the possibility of a copy operation failing.\n2. Good point, and totally agree, we should delete it before returning.\n. The way the \n+ (NSURL *)bundleURLForResource:(NSString *)resourceName\n                  withExtension:(NSString *)resourceExtension\nis designed, it looks like the resource name and resource extension is variable and may change. Therefore the only thing that knows how to find the binary bundle timestamp is that method, that's why I thought of saving the timestamp in the defaults inside that method so that other methods can retrieve it.\n. I pushed a change to always delete the folder at the destination before unzipping so that leftover folders will not cause issues.\n. Yup!\n. Added the comment. Also [CodePushPackage clearUpdates] deletes the entire CodePush folder which contains everything that we save including this unzip folder destination path.\n. I definitely don't see any point in allowing parallel requests. And I also think rejecting the sync is better. The metaphor I'm thinking of is when an email client is syncing with the email server, when you do a pull-to-refresh in the client app for example, it would block you from doing the pull-to-refresh again until the existing one is completed. Since we are using the \"sync\" metaphor, by definition, it doesn't make sense to \"sync in parallel\", you should be either syncing, in sync, or out of sync.\nIs SYNC_IN_PROGRESS the status we want to return? It sounds pretty okay to me.\n. Actually, should we just on the JS side noOp notifyApplicationReady after the first time it is called? I feel like I am complicating the native notifyApplicationReady logic just to accomodate a scenario that doesn't make sense to allow happen anyway\n. That way I can completely undo this change. Plus it could simplify the reportStatus logic too.\n. It would work under the assumption that nobody will require the same react-native-code-push module twice in the same app, thereby creating two instances. Doing so would defeat the work we are doing to prevent parallel sync requests as well as the work to noOp notifyApplicationReady after the first time.\nBut I think it is a valid assumption that catches most errors.\n. Yes, thats why i didn't do the assignment as per your previous comment. The one im returning is the un-doned promise\n. Yup, that was fixing the issue with detecting that a project has already been linked. I have another tracking issue and PR there now that fixes that issue with single line multi project import statements. \nhttps://github.com/rnpm/rnpm-plugin-link/issues/30\nhttps://github.com/rnpm/rnpm-plugin-link/pull/31\n. Update: That PR got merged too, just waiting for them to publish the latest version to NPM.\n. @lostintangent The RNPM guys have published those latest changes to NPM. Should we merge this? :D\n. Its Void, not void. So yes\n. It creates the destination folder if it doesnt exist, and fails if it already does\n. Previously, we depended on the fact that we create the newPackageFolderPath if it doesnt exist to create the intermediate directories. Now, we only delete it if it exists, so we need this addition to create the intermediate directories, otherwise, the download handler (NSURLConnection) will fail\n. Well, yes. Though the expectation is that the else if only ever saves 1 file existence check during the first time this is called. Once the CodePush path is created, it is never removed unless a new binary is deployed.\n. Are the enums in numerical order? UNKNOWN_ERROR is -1.\n. Actually, since its just for intellisense maybe it doesn't matter at all.\n. ... its changes ...\n. ... its deployment ...\n. Yep.\n. This will not, because it is not in the \"CodePushErrorDomain\". And I think we should not. The reason why I made it failing instead of non-failing because leftover files will screw up the hash computation. However, maybe I can tweak this slightly to check whether the file exists before deleting it.\n1. In the event the file doesn't exist, we should just carry on, because we achieved the effect we want of ensuring the file is removed. The fact that we received a manifest asking us to delete a file that doesnt exist is suspect, but so long as the final hash matches, I think we're good.\n2. In the event an IO error occurs in deleting it, we should fail and reject the promise, but not blacklist it because it is not a problem with the update.\n. So we dont want to compute the hash if it is a zip update but not a diff update? I guess i'm fairly confident the unzipping process won't go wrong.\n. Yep. I think for ease of review I'll do it in another PR.\nSome of them may also involve changes in the API, e.g getCurrentPackage -> getCurrentUpdate, which may break users, so I want to leave it off till we have discussed this further internally.\n. oops! that was leftover from when I was trying to iterate on the code. will remove.\n. Deleted these scripts since they are unused: build-and-test.sh, stop-packager.sh and start-packager.sh\n. They are used in CodePushPackage, thats why I exposed them\n. It is used in both CodePushPackage and CodePushUpdateUtils to get the binaryURL to 1. calculate the hash 2. apply diff updates\n. Sounds like a good idea!\n- done\n. Yup.\n. My thought was, even if they rename it locally, the one deployed to our server will be called main.jsbundle if they use the release-react command, so in order to generate a matching hash we should rename it for them in the manifest. \n. Refactored\n. Got rid of getDefaultJsBundleName.\n. Removed this completely.\n. renamed to \"AssetsFolderName\"\n. Oh, it is also caching in user defaults, if you scroll down a little.\n. Added a comment below\n. Should we include a step to npm install -g rnpm if they have not already done it? Just to be super idiot proof.\n. and then executing\n. I've updated the logic according to your suggestion\n. no space between the * and the _?\n. Can we Math.floor() this value before using it and logging to the user since we are not supporting decimal values? And it gets casted to int when sent to native so that's essentially the behaviour.\n. Probably some future refactoring work we could do is to have a utility method \"createCodePushError\", like how we have \"isCodePushError\". The \"CodePushError\" domain string and code is also defined in the CodePushPackage class as constants and it would be great if we could reuse those / keep those defined in one place.\n. We know of one user eg. https://github.com/Microsoft/react-native-code-push/pull/255 that is thinking of having multiple ReactActivity in their app. While we don't currently support this scenario now, I wanted to keep the architecture flexible for enabling that in the future.\n. We have quotes around \"Manual\" throughout the doc (e.g. the TOC).. i'll keep it consistent.\n. Should we keep this public? Otherwise, the logging here no longer makes sense.\n. Should we use CodePush.this instead, in case more than one instance was constructed?\n. I think we can get rid of this line, java.lang.Exception should be imported by default.\n. I think we need to agree on whether we are using 2 spaces or 4 spaces for tabs at some point :) The above 2 lines are using 4 spaces, but everywhere else is 2 spaces, except for right at the bottom :S\n. There's an extra leading space here is that intentional?\n. I wouldn't mind if you changed everything to 4!\n. Caller\n. These too (here it's 2 spaces, but the CodePush object is defined with 4-spaced tabs)\n. I don't think it does ignoreCase comparison, but we have been using this same check elsewhere, e.g. https://github.com/Microsoft/react-native-code-push/blob/clear-updates-init/ios/CodePush/CodePush.m#L346 and it has not ever caused any problems in practice. The provided URL is generated by RN's app template and there is rarely any need for users to modify it or capitalize the scheme. Hence, I would prefer to leave it as-is.\n. This same technique has been used in the loadBundle method in production with no issues. I am pretty sure it will be set because the bridge is initialized serially but i can double check\n. postFrameCallback needs to be called on the UI thread, otherwise it throws this error \"Thread does not have a looper\"\n. The reason why I didn't do that is because sendDownloadProgressDuringNextFrame is not part of the RCTFrameUpdateObserver protocol, its a custom method\n. If you're fine with ignoring that nitty detail I can just go ahead and rename that\n. You're right, we don't! Updated.\n. But we'll still need to pause the frame observer.\n. Unless you're saying updateDownloadProgressForNextFrame should handle pausing it too if its completed?\n. It could be the same now, but it might not be the same in the future, therefore I don't want to over-engineer this.\n. Yup, basically to help it recover from a bad state.\n. I did think about it, but each implementation of this method is 2 lines (honestly the first line doesn't even count). Making a helper function would turn it to one line, but add 1 extra hop of method indirection for each, and add one more new method.. the readability and brevity gain from doing this doesn't seem that great.\n. I think @lostintangent is referring to matching the terminology of the platform, i.e.\nlastSuspendDate -> OnSuspend() in Windows\nlastPausedDate -> OnPause() in Android\nTherefore I think keeping what we have on the Cordova side is fine.\n. I think in the future, we want to enable the scenario that an app has multiple ReactPages, and a user might want to CodePush them individually.\n. It was a hack for the iOS version of the tests, where it was not easy to test changes the info.plist app version in the XCTest framework. I agree this should be removed in the windows implementation. I'll let @scottbommarito figure out what he needs since now he's in charge of it ;)\n. Specifying ApplicationDataCreateDisposition.Always creates it if it doesn't exist, and opens it if it does.\nhttps://msdn.microsoft.com/library/windows/apps/br241611\n. But codePush.GetJavaScriptBundleFileAsync(codePush.assetsBundleFileName); is a Task, so this method needs to be async in order to await on that.\n. How about renaming removePendingUpdate to overwriteCurrentUpdate? @lostintangent \n. Its not performing the full diff though. The full diff needs to include the new files too. This copies the necessary files (omitting files that are not needed) from the previous package. Hence the name CopyNecessaryFilesFromCurrentPackage\n. Because this is an internal method, I think it should be the caller's responsibility to give a file that has valid JSON written in it, and if not, a JSON parsing exception should be thrown. try... catch-ing it and returning null will make the error harder to diagnose.\ngetPendingUpdate is different because we know exactly which setting is being read from, and the constraint is that it should never contain invalid JSON\n. Exactly right @shishirx34 \n. Its so that any unexpected exception thrown can be annotated with our error message and that it is indeed coming from CodePush.\nHow would we do this otherwise? Throw a RuntimeException?\n. Right... I forgot that all Exceptions are not checked in C#. This is absolutely unecessary, I agree now.\n. This only works if this action could somehow be made non-async. Unfortunately LoadBundle() is async, apart from dispatching back to the UI thread, it also awaits on GetJavaScriptBundleFileAsync(). I will try different ways to make it non-async because I agree it will be much cleaner.. but otherwise, do you think this is fine?\n. I thought you didn't want the word \"resume\" in it. How about \"MinimumBackgroundListener\"? Right now all this listener does is perform an action once the app has been in the background for x number of seconds. \n. During my testing, I found that for an IMMEDIATE install, even though the JS context gets recreated immediately, the \"resume logging\" still shows up in the IDE (Visual Studio) console, that's why I made this change.\n. Can I make style changes like this in a separate PR? Unlike my Windows PR, this is not entirely new code so I want to follow the existing convention.\n. Same for this.. Its being used in existing working production code, I don't want to bloat this PR and introduce unrelated risks.\n. Do you have a better suggestion? I considered \"queue\" instead of \"save\" but it's not really putting anything in a queue..\n. We clear it so that the same one won't possibly get reported twice. If the retry is unsuccessful, it will get re-saved on failure.\n. If codePush.sync() and tryReportStatus() both get called during an app resume, it could happen.. Maybe it's a rare scenario but since it's just one line needed to protect against such scenarios, i thought it wouldn't be much harm doing it.\n. @nevir This resumeListener is our mechanism to retry status reports when the app resumes if the status report call to the server fails. Could we put it back?\n. No, I think refreshing it better mimics the original behaviour. Also, between the time it fails and the next time the app resumes, some other process might have already flushed the queue and reported it. So, what you have now is fine. :)\n. There is also an appVersion key in the report, we also report binary updates. For more info: https://github.com/Microsoft/react-native-code-push/blob/master/ios/CodePush/CodePushTelemetryManager.m#L29\n. Also, the package key is optional\n. # Remove after this framework is published on NPM\n. I think \"0.19.+\" means \"minor version 19, any patch version\". Before I made this change, I was getting build errors. It seemed to be pulling bits from Maven central instead of the local node_modules.\n. I've added it back.\n. Leaving out the access modifier makes it \"package private\", which I thought more closely resembles the behaviour in the Windows implementation.\n. When you say \"squash\" them, I assume you mean drop the second one if the first one is in progress.\nThe problem is with onlyIfUpdateIsPending. Lets say we have this scenario:\n- The first call to restartApp, onlyIfUpdateIsPending is true.\n- The second call to restartApp, onlyIfUpdateIsPending is false. \n- There is no update pending.\nIf we allowed them to run in parallel, the second one would succeed. But if we dropped the second one because the first one is in progress, the customer would see the restart not actually happen despite setting onlyIfUpdateIsPending to false, which is not the right behaviour based on our documentation.\n. If the customer wants to use this API to restart the app regardless of whether an update is pending or not, he would call this with false. If he only wants to restart if there is an actual update downloaded, he would call this with true.\n. Honestly, I'm not sure. I will test it, but I'm guessing the answer is no, so in fact, the entire if switch might not be needed now that we are awaiting on the promise response.\n. So I was wrong, it does indeed get executed, which is kinda weird, but i guess it means that this implementation is ok as-is.\n. Do you think we should also null check the activity?\n. Almost all of loadBundle() is inside a try ...catch which would catch NPEs arising from a null currentActivity, and then fall back to this legacy behaviour. I'm just wondering whether there is a chance that at the top of the loadBundle method where we try to get the current activity, it is already null, and we would be handing over this null instance to loadBundleLegacy. I thought maybe we should do this check just because most other RN native modules also do the same check. But that said, there is no evidence we have ever seen this happen in practice, so I am fine with you merging this as is.\n. I think we should update getHashForBinaryContents to use a Context instead of an Activity. Really, all its doing is looking in the assets folder to retrieve the hash which we precomputed during compile time. So it doesn't need an Activity, we could use the reactContext.\nIn addition, since is rather cheap to just retrieve the precomputed binary hash, maybe it would be okay to retrieve it during app start like what you are doing for the clientUniqueId. But I can understand your apprehension to adding additional IO steps on app start, so maybe this is less important.\n. Do you have a way to do it that wouldn't break backcompat? Can devs still call codePush.sync directly?\n. Yep, I like this suggestion. \ud83d\udc4d \n. Unfortunately they aren't.. I'm ok with making Option 2 default, although it is kinda weird looking.\n. I guess if we go with the MANUAL mode you suggested below, we can replace this with the manual instructions (which would look similar)?\n. \ud83d\udc4d \n. While I see the value of making resume based syncing a default, I feel that keeping the mapping similar to the sync API may help users more easily migrate to this new API (and is probably just cleaner)?\n. How about SyncTrigger? We are triggering sync during an event, ON_APP_START, ON_APP_RESUME, MANUAL (when the user calls sync manually), or perhaps in the future, something like ON_CONNECTED_TO_WIFI.\n. If the activity is killed by the OS, it could be null too. But in that case, there's nothing much we can do, anyway when the app re-launches, it will call sync again, then we will show the dialog again.\n. Yep, implementation artifact. Will remove\n. There's no PList in android.. maybe mBinaryVersion? or mManifestAppVersion?\n. Yes, because with RCTBundleURLProvider they no longer apply\n. Done\n. Yep.. This catches all exceptions including NullPointerExceptions\n. Let's remove this #if guard. I think we should skip this file in all cases, because that's what the server does.\n. The IPA containing the app bundle, which a developer generates and then releases to the store, is still generated by the OSX machine right? From what I understand about this file, it is just used for saving icon display preferences for Finder. I'm not really sure how it got there in the first place even for the simulator, unless a user actually opened up the folder which the simulator references on disk using Finder. Either way, somehow OSX put it there when it generated the app bundle, so I presume its also entirely possible that it would generate it when making a release IPA for the device?\n. If didReceiveResponse gets called above, will connectionDidFinishLoading get called again after? Since we already called the failCallback once before, we don't want to call it again, because we will end up rejecting the promise to JS twice which will result in an error. We should only call the failCallback once.\nMaybe in didReceiveResponse, we should set a flag indicating that we got a 400, and only call the failCallback with the appropriate error here if the flag is set?\n. This is a regression of https://github.com/Microsoft/react-native-code-push/pull/470. Could you take a look at that and fix this? Basically we no longer want to immediately fallback to the legacy logic the moment the activity is not a ReactActivity.\n. Could we make this private?\n. Again a regression of #470, casting this if it isn't a ReactActivity will yield a ClassCastException.\n. Since with your change we always pass getCurrentActivity() to this method.. I think it would be cleaner to just have loadBundleLegacy not take any method params, but simply call getCurrentActivity() here and check for nulls here.\n. @daniel-beard It's already checked below in the else if. The current implementation is much better because it does both: prints the error if one exists, and if it doesnt (which signifies a problem with the method's contract) that gets handled too.\n. That example just says to me that an error can occur without the error pointer being set. The example there shows a success flag being returned by the method. I completely agree with that example there that the success flag should be checked.\nHowever, you are saying that an error pointer can be set without an error actually happening, I fail to see why especially considering the method we are calling into is also implemented by us.\n. Anyway, I don't see what change you are suggesting either. Are you saying we should remove this error pointer check save the failedPackage even if we find that the error pointer is set? Because that doesn't sound safe to me at all. I would rather take the safe route and not write the failedPackage if we detect either of the failure conditions.\n. Ok, I've updated the implementation according to your suggestion.\n. This seems a little unnecessary (at least to me). Why not just return [CodePushPackage getPackage:packageHash error:error];? If [CodePushPackage getPackage] deals with the null pointer deference problem too, then that line already achieves all of your goals - 1. To return the result anyway, 2. To only set the error pointer pointer if its not nil.\n. Same comment here.. NSJSONSerialization accepts a nullable error parameter.\n. Same here.\n. Here too\n. This probably isn't part of your change scope, but I think we should print the error too.\n. Yes, but that would be achieved by passing the error pointer that the caller gave to us directly no?\n. I think we should return NO if the localError is set, regardless of whether the error is nil?\nIf you don't like that, feel free to modify the methods in this file to return boolean flags indicating success, since this file doesn't contain public documented APIs.\n. Right.. what I meant was NSJSONSerialization takes care of not dereferencing null pointers for you since the documentation says the error param can be nullable. Ultimately, what I'm suggesting is just for brevity, since your code does achieve the same thing\n. Why was this addition needed?\n. Ah. Normally the way I do development with is to open the demo app project, instead of the library project itself in Android Studio. The demo app project is configured to include the library project as a dependency so those code files would show up.\n. Could you revert this change then? Or I can remove it after merging.\n. I like this refactoring \ud83d\udc4d \n. Shouldn't this be error:error instead of &localError?\n. error instead of &localError?\n. What would be the drawback if we simply passed error instead of &localError here, if we know that getCurrentPackageHash already guards against nil dereferencing error?\n. I think if we passed error directly instead of &localError to getCurrentPackageHash, we could simply have\nif (!packageHash) {\n    return nil;\n}\nand get rid of these lines:\nif (localError && error) {\n    *error = localError;\n}\n. If possible, I would like to get rid of the need to create this new localError entirely, here and the rest of your changes, unless they serve some other purpose which I am missing.\n. It should be relative to their android project root.\n. ",
    "lostintangent": "LGTM!\n. This fix looks good to me in terms of consistency with Cordova, but I'm really keen on getting feedback from folks on whether or not they want/expect to use CodePush to send client notifications when the running app is using an older version of the binary then is available in its respective store.\n. Hey qingfeng, did you make sure to add the #import statement for the CodePush headers at the top of your AppDelegate.m file? That would be unexpected for getBundleUrl to return nil, so I just want to double check what your setup looks like. Thanks so much for trying out the service and helping us find some bugs!\n. When you added the CodePushDeploymentKey key to your Info.plist file, did you set its value to Staging or to the actual key value for the Staging deployment? (which you can collect by running code-push deployment ls gofire)\n. Hmm, interesting. Are you running this on the simulator or device? And which version of iOS? 9.1? Sorry for the hundred questions, I'm just trying to narrow this down, since we haven't seen it before.\n. Is the JS bundle that you generated and packaged with the binary named main.jsbundle? We currently hardcode that expectation (soon to change), so that would explain the nil if you had named the bundle file differently.\n. Hmm, interesting. I'm downloading an iOS 8 simulator image to see if that is related, since I'm not able to repro this issue. While I'm doing that, could you confirm two more things:\n1. Have you actually applied an update to the app locally? I see that you released one via the CLI, but has your app detected it and applied it?\n2. If you change your jsLocation statement in your AppDelegate.m back to the standard production one, does that work? I'm assuming it does, but I just want to double check.\nFinally, could you update the plugin? We released a new version on Friday that contain some bug fixes that may be related to this (npm install react-native-code-push). If you already have the latest (1.1.0-beta) then disregard this comment :)\n. That looks correct! Yeah apologies, the app expects for your initial bundle file to be included in the project. We should update the docs to be more clear here.\n. Is the CFBundleShortVersionString key in your Info.plist set to a valid semver string? (e.g. 0.9.0) Right now, we require that in order to work, so if your Info.plist file sets this to just a major or a major and a minor, you'll get that error. We're going to relax it, but that it the current behavior. Your code-push release example showed the use of 0.9.0, so just make sure your iOS app is consistent with that.\nWe recently added this requirement to the docs, but I agree its somewhat confusing.\n. No reason to be sorry! I want us to relax this requirement so it just works without needing to use a patch version in your semver string.\nHmm, is \"\u7bdd\u706b\" the name of the app? What is the component name you pass to the AppRegistry call?\n. We fixed the issue where CodePush assumes your root component is named the same as the CFBundleName key in your Info.plist, so in the future, this issue should be less prevalent. Thanks qingfeng!\n. Thanks for reporting this! We're going to release an update to NPM in the morning that includes this fix.\n. Thanks for taking care of this fix! I just merged your change and will release it along with our NPM update this afternoon.\n. Hey @jevakallio, I know it's super annoying, but could I bother you to close this PR and re-submit it? We needed to enable the contribution agreement process, so when you re-submit the PR, you'll be asked to sign our agreement, and then we can merge in your change.\nThank you so much for helping with this issue!\n. LGTM!\n. Thanks for catching this error! I'll merge this and include the fix in our 1.1.1 release we're publishing today.\n. We had actually planned to implement this behavior for the 1.1 update, but I forgot :/ the Cordova plugin already does this, so it would be great to get parity for React. Did you want to review this PR for merge? \n. This change looks good to me.\n@qingfeng could you check that you completed the entire workflow for the CLA? It should have added a new tag to this PR when you finished it. Thanks!\n. I just tested this and it works perfectly. Nice work @qingfeng! I'll merge this as soon as @geof90 signs off, and we can include this in the next release. I'll probably release a new version to NPM on Monday, since this is an important fix, and my other PR resolves a regression, so I'd like to get them out their quickly.\n. Hey @qingfeng, would you be interested in doing a Skype call to discuss what you're up to? You've been so helpful so far and I'd love to understand what cool stuff you're doing :)\n. @TanTan-TT We plan on adding support for this very soon. Thanks for giving us the additional feedback!\n. Awesome! I'm happy to hear that :) \n. This is definitely something we need to do! Thanks for bringing it up @nevir. We'll likely address this in the next week or so, as we light up a few other enhancements.\n. We're going to evaluate using RNPM for making the setup of our plugin easier for both platforms, since the CocoaPods solution would only help iOS. Reopen this issue if you think CocoaPods support specifically would be valuable. Thanks!\n. Agreed, we should change this. We did this primarily based on the fact that the current prescription leads you down the path of calling the bundle main.jsbundle (e.g. the xcodeproj and Gradle build tasks generate that file name by default, the default templates reference that name). \nWe weren't sure how common it was for folks to change this, so we went with the na\u00efve solution first, but definitely want to be fully accommodating moving forward. Out of curiosity, why did you guys customize your bundle file name?\n. We just added support for this in the referenced PR. Let me know if this doesn't work for your scenarios. Thanks!\n. That's a pretty awesome idea actually. Would you want to use that for in the wild perf monitoring?\n. We're actually looking at removing the need to specify a rollbackTimeout as well as call notifyApplicationReady in order to have rollback protection, so I'm going to close this for now until we settle on that and can then discuss whether we should also try to accommodate timing the app start process.\n. You are absolutely right! Thank you for the feedback. I'll send a PR later this afternoon that clarifies that you should replace the production URL location solution and not the development time URL loading solution.\n. The docs have been updated to remove this ambiguity. Let me know if we should change it further. Thanks!\n. Completely agreed! We're working on this capability right now.\n. This is awesome! LGTM. After this gets merged, I'd like to release an update of the plugin.\n. I was just about to ask if you could update the docs as well, but it looks like you took care of that already :)\n. Our Android implementation needs some work to make it fully usable. For example, the CodePushReactInstanceManager doesn't need to exist anymore thanks to changes that were made in the platform. We'll be addressing this this week.\n. That's not good :( the Android support is really just a proof of concept and is missing a handful of features the iOS version has, as well as hasn't been thoroughly tested for perf/etc. We've been focusing on some core service and iOS features, but we'll get the RN Android plugin ready for prime time this week. Thanks for checking it out and being patient!\n. We definitely plan to support assets as well. This is high on our list along with finishing the Android POC. The server and CLI already support releasing multi-file packages, so we just need to update the RN client to support downloading a zip of files instead of simple a JS bundle as well as understanding the diff manifest the server sends down so that we could support incremental updates (e.g. you update or add a single image).\n. That's a great catch, we can add the right heads in the response to accommodate this scenario. We hadn't tested this workflow with replacing fetch and running the network calls in Chrome itself :)\n. We're going to look into this, but in the meantime, would this workaround help you to be unblocked? http://stackoverflow.com/questions/3102819/disable-same-origin-policy-in-chrome\n. I'm going to close this issue based on the Chrome workaround of disabling CORS during your debugging session. Please re-open it if this isn't a good solution for you and we would be more than happy to discuss how to unblock you. Thanks!\n. I'm going to close this and we'll track it as a server bug. Let us know if there is another fix that we should investigate to satisfy this scenario. Thanks!\n. When querying the service for an update, it can respond in one of three ways:\n1. There is an update and here is the download URL for it. This only happens when there the latest release for the deployment has a different hash then the client, but the exact same binary version (which is what we mean by \"App Store version\")\n2. There is an update, but it is associated with a newer version of the binary than you are running. This happens when the latest release for a deployment has a different hash then the client is running, but the release is tagged with a binary version that is greater than what the client is running. In this case, the server doesn't provide a download URL under the assumption that the client needs to update the binary before they could reliably apply the script updates.\nAs you illustrated, the service does return that an update is available in this case, but both clients currently translate this scenario into a \"no update is available\". At some point we need to add support here so that devs could choose to display a \"Go to the store to update\" message\n1. The latest release for the deployment has a different hash then what the client is running, but it's tagged version is older that what the client is running. In this case, the server responds saying that there isn't an update available, based on the assumption that the user is running a binary that actually has newer bits than CodePush has\nThe scenario you mentioned that you want to support should therefore work just fine. That said, we had a temporary bug with this feature that we fixed this afternoon so it might be worth trying again to see if it's resolved :)\n. Did that answer your question at all? Let me know how we can help. Thanks!\n. @rhaker Your assumption is correct. As of right now, we expect that all CodePush deployed updates are targeted at a specific app store/binary version. As you mentioned in #80, I'm going to close this issue. \nIf you have a need for a change in this behavior, please let us know and open up another issue that is specific to your scenario. Thanks!\n. I 100% agree with you. We've been discussing the concept of a deployment being \"forked\" every time you release an update with a new target App Store version. That way, it would be easier to understand/visualize the release history (as well as things like rollback) within a deployment that is potentially maintaining multiple binary versions in parallel. \nCurrently, our recommendation is to create a new deployment when you release a new App Store version, if you want to achieve the behavior you recommended. It's a little bit of a hassle to do, but it's at least easy to understand. When you release a new App Store version, you rename the current deployment to \"Production-{Version}\", create a new production one and add the new deployment key to the app before submitting it to the store. That way, you can release to each one, knowing that your users will absolutely get the updates.\nThat solution is effectively the \"manual\" way of achieving a deployment forking solution we could offer by default. We have many users doing this currently and it works well, but yes, is a pain. I'm taking your feedback as a catalyst to rediscuss this again since I agree we can do much better here.\nRegarding your question about the client being notified about a newer App Store version, the server actually already does this, but the client currently ignores it. We plan to change this such that sync will fire a new status event indicating the precense of a newer App Store version and the app can choose to do what they want with that information.\nWe're trying to move as quick as we can, but we obviously have some more work to do :) thank you so much for the feedback! Let me know if any of this behavior will be a blocker for you guys and we will prioritize accordingly.\n. Yep you could choose to create a new app instead of a new deployment. As you mentioned, either case is a bit of a pain :)\nWe want to notify the client about a new App Store version, and allow the app to do with that information what they will. We're not sure what the right experience/policy is in that scenario, but we at least think it makes sense to provide apps with the data.\nThe version range definitely makes a lot of sense as well. I'm going to give that some thought this evening, to see whether that isn't a simple solution for this scenario. Thanks for mentioning that!\n. Hmm, some of my comments above were responding to @rhaker's comment that seems to have been deleted :)\n. This change looks great! Thanks for taking care of this big refactor :+1: \n. LGTM!\n. Hmm, the CodePush plugin doesnt do anything to modify your plist file. I'm not sure what would have caused that, but it certainly isn't intentional on our part.\nAdditionally, the connection with CodePush uses HTTPS, so that setting shouldn't be neccessary. Try removing it and testing out the CodePush E2E. You shouldn't have any problems, but let us know if you do. Thanks!\n. That's a relief :) thanks for verifying that for me.\n. We actually just changed the API to be \"silent\" by default, and to apply to update on the next restart instead of immediately.\nIf you want the dialog box, and immediate restart, the following is how you would configure it: sync({ updateDialog: true, installMode: CodePush.InstallMode.IMMEDIATE })\nApologies for the confusion. We updated the docs, but I just realized that the getting started section still shows he screenshot with the dialog. I'll update that.\nLet us know if you have feedback about these defaults. We made this change based on user feedback.\n. Yep it definitely works in the simulator. We test it in that environment heavily. Could you elaborate a little on what isn't working? Thanks!\n. Yeah, the silent mode behavior definitely might mask this :) when you're debugging your app, check out the console in either. Xcode or Chrome and you'll see logs with the status of the download process. That way you can track its status and ensure its working :)\n. LGTM!\n. Correct. Please suggest a better name :) The reason I did it this way is because the primary scenario it is trying to help with is letting you \"restart early\" for a previously installed update. It's not meant as a general purpose way to restart the app, since that wouldn't really be that useful.\n. What do you think of the latest change? I removed the global restartApp method and instead, moved it to the LocalPackage object instance after a non-immediate update is installed. This keeps the global API smaller. Currently, this solution would only work for checkForUpdate workflows, which I think is fine for now, since this is a pretty advanced scenario.\n. How about restartPendingUpdate? I like the term \"PendingUpdate\" better than \"InstalledBundle\". \"Installed\" doesn't necessarily mean pending, and I think the \"pending\" part is important. We don't currently use the term \"Bundle\" on the JS-side of the API, and now with Android support, I'd rather not introduce it, since this is more of an iOS name. I also prefer \"restart\" over \"load\" since it seems a little more clear that the app will restart, whereas \"load\" is a little ambiguous.\n. Is that a sign-off? :)\n. Yikes, I'm sorry to hear about that! I'd love to discuss how we could help prevent that kind of situation. Out of curiosity, what was the cause of the crash? Was the JS code busted due to relying on a different version of the native side? Was it a native crash?\nAre you currently specifying a rollbackTimeout when you call sync/apply? When you do, the native code will expect you to call CodePush.notifyApplicationReady after an update, and if you don't, it assumes the update failed and immediately rolls you back to the previous version. It will then \"blacklist\" any updates that previously failed so that it doesn't try to install them again. It would be great to know if that capability would have been able to help you in this particular scenario. Otherwise, we should investigate other options.\n. When you specify a rollbackTimeout to sync, you are basically telling the CodePush runtime to assume the update failed if your app doesn't call notifyApplicationReady within the specified amount of time. When this occurs, it will automatically roll users back to the previous version of the app, so that they aren't stuck on a busted version.\nSo specifying a rollbackTimeout of 5000, gives your app 5 seconds to call notifyApplicationReady before being rolled back.\nThis would have helped your scenario if your crash was caused by buggy JavaScript. If you had a native crash however, then this wouldn't likely have helped you.\nWe're looking into making the rollback support automatic, so that you don't have to specify the timeout and/or call notifyApplicationReady, but you still get the protection of the runtime catching a bad update and rolling your users back automatically.\nIn your case, would this have helped your users? We believe this behavior is valuable, but I want to make sure we consider other solutions that can help prevent this in the future.\n. I'm going to close this for now since I'm not sure if we have any actionable next steps. In addition to the rollback timeout feature I mentioned above on the client, we are also working on a server-driven rollback feature that would let you rollback a deployment to remove a broken release and ensure that users get upgraded back to the working version. I'm hoping these two features together will help respond to incidents like this in the future.\nPlease do let us know if there are any additional requirements/feedback here though!\n. Hey @jonaswindey. In v1.2.2-beta, we actually changed the default behavior of sync to be \"silent\" by default, and to install the update  on the next app restart. This was based on a bunch of user feedback. \nIf you want to display the dialog again, and install it immediately, you can simply call CodePush.sync({ updateDialog: true, installMode: CodePush.InstallMode.IMMEDIATE }), which effectively gives you the old default behavior. We just updated the docs with this change, but I apologize for any confusion!\nLet me know if that works for you and/or if you have any feedback about it. Thanks!\nP.S. If you decide to show the dialog in your app, keep in mind that we also added support to sync for tracking the download progress, which allows you to show/update a \"loading UI\" after the user chooses to accept the download. \n. Hmm, I'm sorry. I just noticed that we updated the getting started section of the docs to mention the silent update behavior, but the API reference section isn't quite as clear when it mentions the sync method. I'll fix this in the morning. Apologies for the confusion!\nRegarding the restart behavior, yep that will account for both manual restarts by the end-user as well as when the OS kills the app when it is in the background. This option is non-deterministic in terms of when the update will actually be applied, but it's also the least invasive to he end-user. The sync method also allows you to specify to install an update on the next resume or immediately after downloading it.\n. Oh right, we need to update the docs on the website, since they're a little out of the date with the readme. Thanks for the reminder!\n. I'm waiting until tomorrow when we merge the Android support into master before releasing an update to NPM. I just checked in the rename from getBundleUrl to bundleURL, so that is one discrepency between the readme/master source and what is one NPM. If you want to use the version on GitHub, that should work great for you, otherwise, I'll update NPM tomorrow and you could use getBundleUrl in the meantime.\nSorry about the disconnect between the readme/website/NPM. We got a little out of sorts this week and will be much more organized moving forward.\n. LGTM!\n. LGTM!\n. Thanks for the catch @oney! This fix looks good.\n. This looks good to me! CCing @geof90 to sign off and merge. Thanks @oney for two contributions in one day :+1: \n. LGTM!\n. LGTM!\n. Hey @iwater, I believe the assets system expects them to be located in an \"assets\" folder next to the JS bundle file on disk. Since we write the updated JS bundle to a new directory on disk, but don't copy over the assets from the binary, then when the RN runtime loads the new bundle, it won't find the original assets.\nWe are working on asset support right now and will release it this week. Stay tuned!\n. Hey @oney, would this solution lose out on the ability to have multiple images for different pixel densities (e.g. foo.png and foo@2x.png) and have the right one get picked up at runtime? I had thought to get that behavior you would need to use xcasset files if you weren't going to use the Reacf Native asset loader.\n. Hey @iwater, this issue was addressed with #82, so I'm going to close this issue. Let us know if you get a chance to try it out!\n. Any feedback is hugely valuable, so always feel free to send as many comments/questions/etc. our way, and rest assured it will absolutely be worth our time :)\nRegarding your questions:\n1. Yes, we should absolutely update this. I'll use this issue to track the fix\n2. Fully agreed. I've been seeing this a lot lately and it has annoyed the heck out of me :)\n3. Good point. I'll add a mention of the --deploymentName parameter to the release section. The CLI docs call it out, and mention that it defaults to \"Staging\" if omitted, but I agree it would be helpful to mention a little bit about it in the RN docs as well.\nRegarding your question about Staging vs. Production deployments, there is nothing functionally different about them. Their names are just arbitrary strings that we assigned to them, and in fact, you could rename Staging to \"Foo\" and Production to \"Bar\" and it wouldn't make any difference. The friendly names are just there to make it easier to release an update from the CLI to a specific \"channel\" that you intend to.\nI'm in the process of writing up some docs that explain the various \"strategies\" that deployments can be used for a little more clearly. We basically recommend that you always test out the E2E update process before pushing it out to end-users, and to achieve that, doing a release to Staging, and then promoting from Staging to Production allows you a high degree of confidence that what you're sending out to customers will work as expected.\nIf you were to accidentally send out a binary to the public store that was configured to use your Staging deployment key, you could simply rename it to \"Production\" (or whatever you would like) and use that key for those purposes.\n. Right now, we would just recommend pushing out a new release. That said, we're planning to add support for doing actual rollbacks via the CLI, which would have the effect of creating a new release that used the code/metadata of the specified update. For example, if you simply called code-push rollback APP_NAME DEPOYMENT_NAME, it would create a new release whose contents/metadata was equivalent to the previous, so it's effectively automating the process you could achieve today, but making it much less error prone. Additionally, you could call code-push rollback APP_NAME DEPLOYMENT_NAME RELEASE_LABEL to rollback to a specific release, if for some reason you wanted to \"jump back\" a few releases. The \"label\" value would come from the label property that we auto-gen for each release, which you can see by running code-push deployment history APP_NAME DEPLOYMENT_NAME.\nLet me know what you think about that proposal. Our hope is that it would be a simple but nice feature to achieve what you could do manually (e.g. release a new version that uses the old code), but quicker :)\n. The release label is an incrementing integer that is unique to the deployment and increases monotonically each time you release to CodePush (including promotions as well as rollbacks). The first release's label is \"v1\", the second is \"v2\" and so on. The label is primarily meant to identify the release in your history (when running code-push deployment history), as well as an identifier for things like crash reporting/analytics so you know the CodePush version along with the app store version when looking at telemetry data. The label is auto-generated by CodePush whenever you release and you can't modify it.\nThe description on the other hand, is a customizable/arbitrary string that you can add to the release when you release, and you can view when you look at history.\nTherefore, the label and the description would both allow you to distinguish each release to CodePush, as long as you use the description to represent a semantically meaningful string (e.g. a feature addition, a bug number, a Git commit SHA).\nI'd be really interested in any feedback here.\n. BTW, here is screenshot example of calling the release history command. The label column is the release label I mentioned above, and the circled string represents a value I passed to the description parameter when calling the release command. I didn't specify a description with the other releases, which is why their description column is blank:\n\n. I like how you're thinking! :) We are very interested in doing smarter deployment strategies like this once we've nailed the core scenarios (e.g. we need rollback, support RN assets). \n. Hey @rhaker, FYI the implicit conversion issue was fixed with #82.\n. This change makes a lot of sense and looks good to me! \n. This is probably a stupid question, but do we even need the aes directory? I thought we only needed the main SSZipArchive files and then minizip. That is what their GitHub repo seems to indicate and is how the 3rd party RN Zip module works.\n. Yep this would resolve that issue. Sorry for the inconvenience!\n. LGTM!\n. The fact that the updateAppVersion property is true means that the server thinks you are running an older version of the app then the update is meant for.\n. You should definitely not need to do all of that! Sorry for the invocenience. I just tried reproing this and I'm not sure what could be the issue.\nsync uses checkForUpdate under the covers and will \"short-circuit\" if it resolves to null. If you remove the \"if (!update)\" block, as well as the \"!current\" expression in your second if statement, does this still work? I'm just wondering if there is something funky with the package hash comparison.\nI'm looking into this right now. Thanks for the patience!\n. Hey @ajwhite, don't worry about it, we figured out the issue and I'm about to send our a PR that will let you remove all of that horrible workaround code you had to write :)\nFor the record, the issue was that you are putting a \"v\" in your app version when releasing from the CLI and so when our plugin would compare the running version, it did so as a dumb string comparison against the version associated with the latest update (e.g. does v2.0.0 === 2.0.0). We'll change this to use semver comparison (which is what the server already does) and everything will work perfectly for you.\nI was also able to confirm that you are the only CodePush user that would have hit this issue, so fortunately you reported it and we can prevent anyone else from running into it :)\nThanks again for your patience and help with this!\n. We're excited to have you use it! #85 was just submitted and we'll get that merged in soon and likely release it along to NPM with support for the new React Native asset system. I'm hoping that will land tomorrow and we'll snap the 1.4.0 release. Thanks again for reporting this error. I'm glad we caught this early :D\n. Yeah that is our problem :( we'll get that PR merged by tomorrow and will publish to NPM. The new asset system landed while we were trying to finish Android support and so it got a little ahead of us.\n. Just merged in the fix for this via #85! Thanks again for helping us get to the better of this. Once the assets support gets merged in, I'll snap 1.4.0 and publish to NPM.\n. @kylezhang That error doesn't look like it has anything to do with CodePush. Did you add CodePush after creating the project or did you just see this error immediately after initializing and running the project?\n. Hey @bogdantmm92, I just submitted PR #88. Could you let me know if you think that is enough detail or if we could help make this less confusing? Thanks so much!\n. Two common causes are:\n1. Your deployment key isn't valid. Make sure you're setting it to the key value (not the name like \"Staging\") of the intended app deployment\n2. Your version number isn't server compliant in the plist file (e.g. It's 1.0 not 1.0.0)\nAre you seeing this error as part of the update check? Or after downloading it/installing it?\n. Awesome! BTW, I just checked in a fix to log any error to the console when an \"unknown error\" occurs. That way it's more obvious in the future what the exact issue is.\n. @akshaysmurthy You can view the logs in either the Xcode console or the ADB logcat output for React Native (depending on the platform you're running). When an unknown error happens during sync, we log the error message along with it, so hopefully you can see the issue.\nDid this error just start for you or are you seeing it on a new project?\n. Hmm, Ok :) Let us know if you hit any other issues!\n. Fixed with #102\n. LGTM!\n. That looks like the iOS breaking change we had to introduce with this release due to now relying on Libz: https://github.com/Microsoft/react-native-code-push/releases/tag/v1.4.0-beta.\nCould you follow the extra step in the breaking change instructions above and see if that helps? Thanks!\n. LGTM!\n. Dude, you totally read me mind :) Thanks man!\n. LGTM! I obviously forgot to test this change in an app with no previous updates. Thanks for this contribution @oney!\n. Hey @oney! Thanks for submitting this PR. I've actually been thinking about this experience a lot lately and I agree that we need to improve this. What I've been thinking about is whether we can do away with the rollbackTimeout/notifyApplicationReady entirely, and instead, have the plugin detect that an error occurred during the app load after a restart, and do the rollback transparently. \nFor example, on the iOS-side, could we subscribe to this notification, mark the fact that the current update failed, and then after the app restarts, look for that mark and roll the user back. That would conceptually be similar to what your PR is doing, but it would potentially have the benefit of removing the rollback timeout, and therefore, requiring less work with the same experience.\nI haven't tested out this theory or looked into the analogue on the Android side, but I'm really keen on making some progress here. What do you think?\n. Hey @sulliwane, we recommend that you actually create a seperate app for each platform. For example, many of our users create apps called \"{AppName}-ios\" and \"{AppName}-android\", and manage them seperately that way.\nYou could achieve the same thing with seperate deployments under a single app as well, so it just depends on which strategy you prefer.\nThe important thing is that you have a different deployment for each, since you want to be able to release updates to each without impacting the other.\n. When you put React Native into debug mode, it will always pull the bundle from the packager server, so even though you're specifying that the JS bundle should come from CodePush, the line that enables dev support will actually trump it. So it seems like the update is being discovered and installed, but when the app actually restarts, it pulling the app version from the packager. \nIf you try running the app in release mode, do you see the updates after restart? The code you linked above disables dev support in release mode which is why I asked.\n. Are you using the new assets support by any chance? We just fixed a bug where the plugin wasn't giving priority to an update if it was uploaded to CodePush earlier than the running binary was built. If you are using assets, you could test whether this is your problem by running the app from Xcode, then releasing an update to CodePush, restart the app and install the update. Restart the app again and if you see your update, then you're hitting the bug we just fixed.\n. Would you be willing to try running \"npm install Microsoft/react-native-code-push\" and trying this scenario to see if the bug fix we submitted fixes your issue. I just tested this again and can't repro your issue.\nBTW, just to also double check, are you setting the JS bundle location in your AppDelegate file to the CodePush bundleURL? I'm sure this is a stupid question but I just wanted to double check :)\n. Yay!!!! Thank you so much for trying that. I'll release a patch update to NPM tomorrow with this fix and a few others.\nOn Android, you need to release just the bundle. The Android client doesn't currently support being given a directory so it would behave unexpectedly. We've got a PR out to React Native to add support to the platform for dynamically updating assets on Android. Once that is merged in and released to NPM, we'll update our plugin to support it.\n. Hey @sulliwane, I went ahead and released a patch update to NPM, so you can go ahead and switch back to an NPM-based dependency if you'd like. The 1.4.2 release includes the fix for your issue, as well as better error logging.\n. It's a combination of the hash and the version of the running binary. So if you're running v1.0.0, with hash \"6789\", and the latest update on your deployment is a different hash, but associated with v1.0.1, then the client wouldn't get the update.\n. LGTM! Is it safe to assume that this change from the documents to library directory shouldn't break any existing users? I suppose it's possible you could get an update that you already have since the logic would now look in a different location for what you're current package is. \n. Makes sense. We should probably mention in the release notes that you should uninstall the app on the simulator or devices so as to clean out the old documents directory. \n. They would see it as optional. The latest release within a deployment always \"shadows\" any previous updates, including its metadata.\nWhat would your desired behavior be in this scenario? Currently, from the service's perspective, there isn't necessarily a guarantee that 0.3 is actually an incremental change from 0.2 and therefore, carries the same mandatory requirements that it's predecessor did.\nI agree that this is an interesting scenario, so I'd love to know more about what you have in mind :)\n. We currently think of mandatory as a piece of metadata that we simply round trip to the client and allow the app to enforce that policy however it sees fit. Right now, the only \"opinion\" that we apply regarding the mandatory flag is that the sync function doesn't add an ignore button to the update prompt, when one is displayed. When using sync for silent updates, or calling checkForUpdate, nothing is done by default when an update is mandatory. The app however could easily choose to modify its behavior in the presence of a mandatory update (e.g. forcibly restart the app immediately, display an \"Update required\" UI when an otherwise silent update is flagged as mandatory). \nWe are absolutely happy to introduce more policy here, we just haven't actually had any requests for it yet. I also fully agree with you that it's weird for an optional update to \"neutralize\" the mandatory nature of the previous release. I think it makes sense for the server to be smart enough to detect that even though the latest update isn't mandatory, there was a mandatory update that was released since the version you are running, and therefore, \"convert\" the update to mandatory.\nWould that kind of behavior make sense? I wouldn't want to prevent you from releasing an update that isn't mandatory any time there was a previously mandatory one, since if users got all of the updates, it wouldn't make sense to have to keep enforcing mandatory. However, accommodating the non-sequential uodate acquisition scenario definitely deserves a special casing.\n. Hey @JAStanton, we discussed this earlier, and we'll plan to make the behavior change that you proposed above, since I agree it makes complete sense. We'll hopefully have it done and deployed next week. Let me know if that sounds good to me. Thanks again for the feedback!\n. This enhancement is now running in production and didn't require any CLI or plugin changes, so it's usable right now :) thanks for the feedback!\n. Great catch @ben-manes! This should be a pretty straight forward and we'll try to get to it early next week. Thanks again for reporting it.\n. Fixed this with #113.\n. Yeah we could look into doing that. Apologies, I thought your bug was specific to us making that implementation change so that you wouldn't get those warnings when consuming the CodePush SDK.\n. LGTM!\n. The expected behavior would be to no-op, since the \"pending\" update from the first call to sync is already downloaded, and therefore, the second call to sync would resolve its promise as no update available. Sync doesn't currently check for pending updates, which is why this behavior exists. That said, we've discussed modifying this behavior, so just because it's the currently expected behavior, doesn't mean it's the right behavior :)\nIf you're interested in \"artificially\" restarting the app in order to apply a previously downloaded update, you could call the restartApp module-level method as a workaround. If however, you want to restart the app only if there is a pending update, there isn't currently a way to do that.\nWe've discussed doing three different things that might help your scenario, and I'd be interested if any of them sound sufficient:\n1. Adding an isPending property to the LocalPackage object that is returned when calling getCurrentPackage. This could be used to query the current package and if the latest update is still pending, restart the app. This might make sense to do in general, but it's probably a roundabout way of solving this scenario specifically.\n2. Add a parameter to restartApp that specifies you only want to restart if there is a pending update. Semantically, I feel like this solution is pretty decent if you want to call sync at one point, and then \"force\" a pending update in another. \n3. Modify sync to look for pending updates, and effectively overwrite the previously specified install mode. The only reason I'm not in love with this one is that the only thing I can imagine people wanting to use this solution for is to apply a pending update sooner, and I'm not sure if this is the most intuitive way to solve it. Maybe it is, I'm not sure.\nWhat are your thoughts? Doing the first or second items would be super straight forward and not breaking changes, so we could address them pretty quickly.\n. OK cool. I'll send a PR out for this tonight. Stay tuned and thanks for the feedback!\n. @nevir I agree with you. The sync method is entirely implemented in JS, and so in order to make it support restarting pending updates, we would need to implement isPending anyways. So that seems like a win-win feature to implement :) I'll send out a PR for that change, which should unblock this scenario, and then we can easily layer further API improvements on top of it. \nThis is such awesome feedback guys! Thank you both so much. \n. I just submitted PR #113 to address the isPending feedback. Check it out! Once that is in, we can discuss the sync improvements.\n. Just merged the isPending support into master. @geof90 was working on another bug fix that I'd like to get in the next release, but we should be able to get that out tomorrow or so.\nI'll keep this bug open to track the changes to sync that we discussed above. Thanks!\n. Currently, the recommendation is that you don't release to CodePush unless there are actually changes beyond what the associated App Store version already includes. That way, when you bump the version and release to the store, you're end-users won't get an update immediately, since there isn't a release on CodePush targeting the same app version (e.g. 1.0.3). However, if you do iterate beyond the App Store version, and you release to CodePush, your users would get an immediate update if they install it from the store after you released the CodePush update. \nWe're discussing a few mechanisms to allow us to identify equivalence between a binary-bundled App Store version and a CodePush version, in the event that you published the same code to both. We just haven't prioritized it due to no one actually requesting it yet. In fact, most people we've talked to liked that they didn't need to release to CodePush in this scenario, since it would be superfluous.\nThat said, it would be awesome to know if there was a scenario we aren't thinking about (I'm sure there are tons!). Let us know if this is a blocking issue or not.\n. Exactly right! \n. I actually started working on a \"release best practices\" doc for the website and was planning on finishing/publishing it as soon as I get home from Hawaii :) Apologies for the random tips spread throughout various discussions. We've been trying to improve the docs incrementally along with improving the product, but I definitely have some work to do. I should be able to document all of our current guidance after Christmas when I'm home. \nRegarding your other two questions:\n1. Are you using the staging deployment and then promoting successful releases to production? As you mentioned, the plugin does provide \"rollback protection\" in the event that a broken release goes out and you want to ensure that your end-users are never blocked, but we also always recommend testing each release on the staging deployment and then promoting the tested/successful release to production. That way, you get the high confidence of releasing anything to production, without needing to release directly to it for testing purposes. When you release a new update to the App Store however, you don't need to test that via CodePush, since you just simply rely on users getting that update from the store. \n2. Nope you didn't miss anything! We don't currently have such a mechanism with sync. The isFirstRun property on the LocalPackage object returned from getCurrentPackage simply indicates whether or not the current app session represents the first time the latest CodePush update has actually been run (after the restart applied it). We've discussed adding logic to sync to have it recognize that it's being called within the first run of a new update and short circuiting, but depending on when the update was installed, it's possible that another update has been released, and therefore, we took the conversative route and didn't bake this in.\nIf you have any feedback/suggestions on how we could make either of these better that would be super valuable. Also, I'd love to know what you're working on if you don't mind sharing :) you can ping me at joncart@microsoft.com anytime. Thanks dude!\n. Yeah, I decided to keep my ES6 changes localized to just the package mixins file for now, since I was already working in there. I didn't realize you had made those ES6 changes already, so I apologize for duplicating efforts!\n. I would expect Build B's JS bundle to take effect since the [CodePush bundleURL] method would give it precedence over any previously downloaded CodePush updates. That said, as you mentioned, we aren't clearing out the previous pending update currently, and so there may be some unexpected behavior in this scenario specifically.\nThis is a good bug report, and it would be pretty straight forward to fix, since we already have logic to detect an App Store update having occurred. Thanks for reporting this! \n. Nope, I wasn't able to repro this issue. I just agreed that we should clean this old state out :)\n. That sounds good to me. That way the date check helps in scenarios where the version doesn't have to be bumped (e.g. development, Fabric), and the appVersion would be primarily for production scenarios\n. LGTM!\n. LGTM, but I'd like to address the few bugs we have logged before making a change in RN version dependency.\n. Since this is simply a code-cleanup PR, which doesn't add any new features, but does represent a breaking change, I think we should wait to merge this along with adding assets support for Android, since that will require a new version of React Native as well. If your PR gets merged in time for 0.18.0, then I think it would be great to release a new minor release of the plugin that depends on that RN version, and adds in Android asset support and removes our dialog implementation at the same time.\n. Are you seeing this on iOS or Android?\n. Hmm interesting. Did this happen with 1.5.0? I didn't think we made any changes to rollback in 1.5.1 but we will investigate this ASAP. Also, does his happen to you on Android as well? Or only iOS?\n. Interesting. OK we're investigating why that ordering dependency exists. Thanks for reporting this!\n. Yay! Thanks for the continued amazing feedback @oney!\n. LGTM!\n. Hey @anback. I'm not able to repro this issue unfortunately. After you upgraded to RN 0.17.0, did you make sure to run react-native upgrade and ensure to stop any running packager instances? Both of those can be potentially responsible for issues like this. \n. If after doing those steps, and you still repro this, could you let me know whether you're seeing this on Android or iOS? Whether you're debugging in Chrome or not? And whether this is a debug or release build? We tested all permutations and never noticed any issues, so it would be great to know if we missed something. Thanks!\n. Awesome! Thanks for confirming. Apologies for the pain here. We've noticed that React upgrades really do require the upgrade, and it isn't specific to CodePush, it just looks like it is :)\n. You just need to uninstall your app from the emulator/device you're testing on. This was a breaking change in 1.5.0, and won't occur once you have a \"fresh\" app install that uses this plugin version.\n. @geof90 Yep, that is my preferred long term solution. I'd like to clear out packages, pending updates and failed updates as soon as we discover a new binary version. We can use the existing bug to track this change, so I'll close this bug.\n. LGTM! \n. LGTM! The async/await change cleans things up so much. Do we feel pretty confident that our current test coverage will give us a solid sanity check after these changes? \n. OK I'm done for real this time :) this PR looks really really good. Thanks for doing all this refactoring!\n. Yep! We have a lot of users distributing their initial binaries through TestFlight (or other beta services) and then using CodePush to push out updates.\n. LGTM!\n. LGTM!\n. Hey @shawnXiao, --out was the pre-RN 0.14.0 name for this parameter. As of RN 0.14.0 (which is the minimum version the CodePush supports), this parameter is named --bundle-output. \nWhich version of React Native are you using? Are you seeing the parameter show up as --out?\n. Those release notes are saying that the --out option was renamed to --bundle-output. The \"for\" should have been a \"to\" to be clearer. From our discussion on Discord, it seems like you're successfully using the --bundle-output parameter, which proves that is the new name.\n. I'm going to close this PR since as mentioned, the current docs reflect the current parameter names for the RN bundle command. \nIf you're using RN 0.14.0 and actually having an issue following our docs, then please re-submit this PR. \n. Thanks for reporting this @willchu! All of our testing up till this point has used KitKat and newer devices/emulators, so I apologize that you're hitting this. We'll make sure to address this and any other issues with Jellybean ASAP!\n. Ah good catch @falsecz! We haven't started looking into 0.18 yet, so we'll figure out how to support it officially and release an update in time for its non-RC release.\n. This issue was fixed with #141. We'll release an update to NPM this weekend.\n. Thanks @skevy! I was planning to make this exact change this afternoon as a response to the bug you referenced. The change looks great to me :+1: \n. Hey @skevy, what do you think about the #141 that @joenoon submitted? Your solution is the cleanest approach, but I'd like to maintain backwards compat for now, and the KVC solution allows for that.\n. Awesome. Thanks @skevy!\n. Thanks @joenoon! PR #139 actually fixed this issue already, but I like this approach since it may be backwards compatible. Presumably this solution would support 0.18 as well as older RN versions? If so, that is super ideal.\n. Yep agreed. I hate having to duplicate code, but I'm also pretty sensitive about introducing breaking changes in our plugin, so it's a balancing act :) I'm going to run our tests using your fix and see if it is in fact backwards compatible, and if so, I think it will be a better solution for us right now, until we decide to actually take a new dependency on a different RN version.\n. Unfortunately, this doesn't appear to be backwards compatible :( Apparently you can only redeclare a property as readwrite in a class extension if its primary interface is already declared as readonly. In pre-0.18, the bundleURL property is already readwrite, and therefore, you can't redeclare it as readwrite again.\nUnless you know of a way to workaround that limitation, I think it makes sense to merge #139, if we can't find a backwards compatible fix to this breaking change.\n@joenoon Thoughts?\n. I'm going to close this PR in favor of us discussing the other two alternatives as better approaches. Thanks for the contribution and let me know if you think that is reasonable!\n. This is a great suggestion! I just verified that this does in fact work for 0.18 and earlier, so it's perfectly backwards compat :) I'm comfortable merging this in, but I'll wait for @geof90 to sign off as well.\n. React Native 0.18.0 introduced a breaking change that caused this issue. We fixed it in master so if you want to grab the CodePush bits from this repo, it will work. I'm also planning on releasing an update to NPM to address this later this afternoon.\n. Just published 1.5.3 to NPM. Thanks for reporting this issue, and let us know if you hit any other problems.\n. Hey @deju, thanks for reporting this! Two questions: is this happening on iOS and/or Android, and what version of React Native are you running?\n. Which version of the CodePush plugin are you using? Anything newer then 1.4.0 requires React Native 0.15.0+, so it's possible that there might be an issue with the JS being compiled correctly.\nAre you able to upgrade your RN version to at least 0.15.0? If so, you shouldn't have any issues using CodePush. Otherwise, I can take a look at this tomorrow and see what the issue might be. After we took a dependency on RN 0.15.0, we stopped testing any previous versions when we release.\nSorry for the inconvenience!\n. Sounds good, thanks for giving CodePush a try! \n. @deju Any luck after the upgrade? Make sure after you upgrade React Native versions that you also run \"react-native upgrade\" as well, since that can be the source of subtle issues of you forget to do it.\n. Any luck @deju? I tried reproing this issue again and couldn't, so I want to make sure we validate that once you upgrade to a supported version of React native\n. Oh man I'm so sorry to hear about your hospital visit. I hope everything is OK!\nThanks for confirming your experience. I'm going to close this bug since it doesn't repro for you once you upgraded to a supported RN version. If you run into any new issues, let us know. Thanks!\n. Hey @gbig! I agree with you that the term \"package\" is less than ideal. Unfortunately, CodePush isn't tied to React Native (it currently supports Cordova, and we're toying with another platform), so we didn't want to call this parameter something that was specific to it. Additionally, even across just React Native apps, the \"package\" could either be a JS bundle or a directory containing a JS bundle and your assets, since we support apps that do and don't use the assets system.\nWe tried to make the documentation (including within the CLI when you run \"code-push release\"), but I would really appreciate suggestions for how we could make this clearer.\nAdditionally, we're planning to add a \"release-react\" command that lets you do a release that adds React Native specific opinion on top (e.g. provides smart defaults, runs the RN bundle command automatically), and so it may make sense for that to be the place that we rename the parameter to something less generic, since it wouldn't need to accommodate non-RN scenarios.\n. Yeah I apologize for that confusion. Do you have any thoughts on what we could rename the parameter to? Or do you think it would be sufficient to worry about it within the React specific release command?\n. What do you think about \"updateContents\"? That way, it removes the term \"package\", which can be confusing, but doesn't specifically couple the contents of the update to just JS.\n. OK cool :) I'll make this change and use this bug to track it. Thanks @qbig!\n. I'm going to close this issue since we're tracking this fix as part of the CLI's repo. You can see the PR for this change here. It will be included in our upcoming 1.5.0 release. Thanks again for providing this awesome feedback!\n. Good catch, thanks @cmcewen!\n. Hey @deju, is 1.0.27 the version number that is set in your app's Info.plist file? You need to make sure that the version number you pass to the release command is the exact same version number of the binary you are deploying to. Otherwise, the call to sync won't see the update available. The version parameter of the release command isn't meant to be the version of the CodePush update, so you shouldn't be bumping it unless you also bumped the binary version as well.\nIf your Info.plist file has a 1.0.0 version number then modify the release command example to specify 1.0.0 instead of 1.0.27 and you're example should work.\nAdditionally, you should be passing \"./release\" as your update contents when calling the release command since you want to be able to update your assets as well. This wouldn't impact whether your app sees the update or not, but it will be helpful for you moving forward.\n. Nope you don't need to change the version in your Info.plist to 1.0.27. You need to run \"code-push release MyDemo ./release 1.0.0\" instead. As I mentioned, the release command expects you to tell it which binary version the CodePush update is for. Since you want it to update 1.0.0, then you need to specify 1.0.0. \nCheck out the docs for more detail: http://microsoft.github.io/code-push//docs/cli.html#app-store-version-parameter\n. Ok cool. I'll close this issue then. Thanks again for trying out the service!\n. Hey @jedlau, yeah RN 0.18.0 broke us so we had to release an update to fix this issue. You should be good to go with the latest bits but let us know if you run into any new issues. Thanks!\n. Thanks @fakefish! \nCurrently, this is the expected behavior in debug builds, since the CodePush plugin isn't clearing out old updates on disk, and therefore, the server sees that you already have the latest update. If we cleared the updates in debug builds, without requiring you to also bump the version of the binary every time you ran from Xcode, you would continue to get the same CodePush update prompt every time you ran the app. This would be a pretty bad experience. In production, you would be bumping the binary version, and therefore, old CodePush updates wouldn't apply anyways (since they'd target a difference version), so you'd see no update available.\nIf you run the app in release mode, the CodePush updates on disk will be cleared when the plugin discovers a new binary, and you'll get the update again, as long as you didn't change the version in the Info.plist file. If this is the behavior you want while debugging, you can change the Xcode scheme to use the release config when you run the app.\nThis behavior is usually what is most convenience and intuitive for devs, so I'd love to understand what your expected behavior was here. Did you want to keep getting the same CodePush update while debugging? Did you release changes to CodePush that you didn't also make to the JS bundle in your Xcode project, and therefore, it was confusing when you didn't see the changes after re-deploying from Xcode?\nApologies for the confusion here!\n. Could you explain why you'd like this behavior? Would it be reasonable for your workflow to just create release builds while debugging to work around this?\n. Besides running your app using the release config, you can also uninstall the app from the device or simulator, and see the update flow again for debugging purposes. I'd prefer not to change any existing bundle resolution logic unless there is an end-user behavior needed.\nIn a production app, you would have to bump the app version in order to release a new binary to the store, and therefore, any existing CodePush releases wouldn't be available unless you released a new update that targeted the new binary version. The scenario you're mentioning would only happen during debugging, so I'd love to see whether the existing workarounds I mentioned above would satisfy your diagnostic needs without us needing to change any production behavior. \n. Are you running the app in debug mode (e.g. you ran react-native run-android)? On Android, React Native forces the JS bundle to be loaded from the packager, and therefore, doesn't consult the CodePush plugin where to get it from. So even after you install an update via CodePush, after the restart, it will still load the bundle from the packager and not from CodePush. We can't work around this unfortunately. This is usually OK during debugging since the changes that you released to CodePush were also likely made locally, so the packager would pick them up.\nHowever, in debug mode, React Native also caches the JS bundle, and therefore, even after you restart the app, it will re-use the locally available file unless you \"force\" it to reload. This makes it seem like the update wasn't installed while debugging. Once again, CodePush is completely out of control of this behavior by default.\nCould you try opening the dev menu and explicitly reload the bundle after you do an update? If that works, you can \"automate\" this by enabling \"dev mode\" for the CodePush plugin, which will automatically clear the JS bundle cache for you. To do this, simply pass the BuildConfig.DEBUG property as the third parameter to the CodePush class's constructor in your MainActivity.java class.\nYou can find more details about this constructor in the docs for the Java API. Let me know how this goes and if you have any feedback on this behavior and/or the docs. Thanks!\n. On Android, we currently only support releasing the JS bundle file directly. Could you modify your release script to specify \"code-push release testandroid ./release/index.android.bundle 1.0.0\" instead of uploading the entire \"release\" folder? This should fix your issue, as I believe the plugin is failing when it would try to install the update, since it was expecting a JS bundle file, but was getting a zip file.\nLet me know if that fixes your problem. Thanks so much for the awesome details for the repro!\n. Yay! Thanks for confirming and I'm glad you got it working. Let us know if you run into any other issues.\n. Thanks @almuro!\n. Yeah we noticed this change as well, but haven't had a chance to respond to it yet. I'll be investigating this today and will update the docs as appropriate. Thanks for reporting this!\n. Apologies for the slower-than-hoped response here! We got iOS working on RN 0.18.0 but we still need to address Android. This will definitely happen tomorrow! \n. That error is usually a manifestation of either the plugin not having been properly installed, or the packager needing a restart. You shouldn't be hitting that otherwise on iOS with RN 0.18.0, so let us know if you've double checked those two conditions and this error persists.\n. Hey guys, I just submitted #156, which includes config instructions for 0.18.0 (it's not the prettiest code in the world but it works for now). If you're planning on implementing a silent install, then you can use the existing plugin bits with these instructions. However, if you want to display an update dialog, this PR also makes a product change that allows this feature in Android 0.18.0. I'll release it to NPM tomorrow after I get sign-off.\n. I just released an update to NPM that unblocks Android on RN 0.18.0 along with the added setup docs. I want to make some changes to make the Java code a little cleaner, but in the meantime, you should be good to go. Let us know if you run into any problems. Thanks!\n. This is a very good point! I apologize for the confusion and lack of docs here. We should accept files with the .js, .jsbundle, and .bundle extensions, so I'll use this bug to track adding support for .js files, as well as updating the docs to specify that the extension is relevant.\n. Hey @alexlau811! Check out the PR I just submitted and let me know what you think. Thanks again for the feedback here! It means a lot to us since it can be easy to glaze over things that aren't documented well enough :)\n. Great! Thanks dude. I just merged this PR. If you're cool using the .jsbundle or .bundle extensions for now, I'll release an update to NPM later that adds the support for .js files as well.\n. Hey @arjunkomath! On Android, we used to require that your main Activity class inherit from FragmentActivity in order to display the update dialog. To fix this, you can do one of two things:\n1. Upgrade your RN plugin to the latest release (1.6.0-beta), which removes this restriction. I would recommend this since it adds some other good features as well.\n2. Make your MainActivity class inherit from FragmentActivity. Our docs explain how to do this in the Android setup section.\nLet me know how it goes! Apologies for the confusion here. If you go with #2, it would be great if you could let us know how to make the docs clearer, since we tried to clarify the need to inherit from FragmentActivity if you wanted to show a dialog.\n. Yay! Thanks for pushing through this issue. I'll update the docs per your suggestion. Let us know if you hit any other issues!\n. @respectTheCode We'll be releasing the fix to NPM today. If you need to get unblocked sooner, you can take a look at PR #164 for the fix. Sorry for the delay! \n. This fix is now in master and will be released to NPM in the morning.\n. Good call @talkol! I'll merge this change right now.\n. Hey @gnestor! You can actually do this today via [CodePushConfig current].deploymentKey = \"\". I agree that it makes more sense to expose this via the CodePush class, and I can send out a PR to make that change. For now, though, you can use the mentioned code snippet.\n. Yay! I'll keep it open to track exposing this property via the CodePush class. I think this a cleaner and more discoverable solution. Thanks for sending this feedback! :)\n. Resolved with #165.\n. Thanks @jedlau! This is the perfect solution. The only reason I'm somewhat waiting to merge this in is because I would ideally love to have a solution that was backwards compatible with previous React Native versions. I'm not aware of a way to do this, so I posted the question on the RN repro to get some advice, and maybe even propose reverting the change in the first place.\n. I've been waiting to merge it because we're planning to release an update tomorrow to NPM that addresses some bugs/etc., and I don't want that release to require RN 0.19.0. Additionally, I've been petitioning that this breaking change be reverted in RN, since it's a huge shame to start requiring RN 0.19 for our users moving forward. It's looking unlikely that that will happen, so we'll likely merge this change in sometime tomorrow and release a patch update to address RN 0.19.0.\nSorry for the delay and thanks for using CodePush :)\n. LGTM!\n. This baby looks good to go! I really really love how clean this is. Awesome job @geof90!\n. Is this still occurring for you? That is a DNS error, and we haven't had any service outages. It may have been a temporal issue on your end to resolve the domain. If you could try again and let us know, that would be great.\n. I haven't been able to repro this and we haven't had any connectivity problems, so I'm going to close this under the assumption that your DNS server had a temporary issues resolving our server's domain. If you try to release again, do you get the issue reliably every time? If so, please activate this. Thanks!\n. BTW, this isn't related to this change, but I just noticed that the getNewStatusReport method wasn't made to run Async like our other potentially expensive JS-exported methods. Should we change that like we did for iOS?\n. LGTM!\n. Nice!! This is unbelievably helpful @oblador! I agree that it makes total sense to have CocoaPods support, especially since RNPM seems to be going in the direction of relying on CocoaPods/Carthage for certain things (e.g. adding custom linking behavior ala libz). This change looks great to me.\n. We're planning to release an update to NPM on Monday that introduces support for updating images on Android, and includes a few bugs fixes (and your PR) :) Does that schedule work OK for you?\n. Awesome! Thanks again for the contribution. I'll ping you as soon as we release on Monday.\n. @oblador We're still doing some testing for our upcoming release, but we released the code-push dependency that master has, so you should be able to install from GitHub in the meantime.\n. LGTM! This is definitely much cleaner than my previous recommendation :)\n. Yeah I think it's fine to document this with a comment. Let's merge this change since I think it's a better solution in the interim.\n. Now that we've broken compat with previous RN versions, I actually think we should refactor our API to be more accommodating of the new Android activity solution, and not worry about taking this change.\n. Hey @ianwalter, sorry for the inconvenience! We don't currently support React Native 0.19.0-RC on iOS due to this breaking change (Android works fine). PR #164 addresses this, so if you want, you could replicate that change locally (or NPM install that commit) to get unblocked immediately. We've been waiting to merge this fix because the moment we do our plugin will require RN 0.19.0, which isn't even \"RTM\" yet. We will be releasing a plugin update tomorrow that needs to support pre-0.19.0, and then we'll likely release another update that includes this fix. \n. Awesome! Thanks for confirming that unblocked you. Let us know if you hit any other issues.\n. LGTM! Can you close the other PR when you merge this?\n. This is high up on our todo list, but it isn't currently possible unfortunately :( Would this be a compelling feature for you? Any feedback here would help us prioritize the work :D\n. Hey @JeanLebrument! So we're beginning to take a look at this and I wanted to get your thoughts on a few things. We were thinking about solving this by adding a new parameter to the release command that lets you specify the percentage of users you want to be eligible for getting it. Then we would add a new command that lets you increase the fraction over time. Does that reflect your thinking? Would you want to be able to decrease the rollout fraction for any reason? Additionally, would you want to be able to release new updates while there was a rollout currently active (not 100% distribution), or would it make sense to restrict releases until an rollout has \"completed\"?\nYour previous comment also seemed to indicate that you were thinking about the rollout segmentation spanning multiple releases as opposed to an individual release. Is that accurate? We were thinking that an individual release could be released as a staged rollout, and once completed, the next release could choose to be a rollout as well, but you would have to specify that you wanted this behavior when releasing it.\nAny thoughts here would be greatly appreciated, since I want to make sure we're accounting for your requirements. Thanks!\n. OK cool, thanks so much for confirming this. We should have a PR out for this pretty soon, and I'll pin you as an FYI.\n. @mvayngrib #190 is also tracking the ability to target releases at specific people and/or groups, which is definitely something we want to do. I was just using this issue to discuss the percentage based rollout.\nI really like your proposal! I'll let you know as soon as we start thinking about this feature.\n. This has been addressed and is now live! You need to upgrade your CLI to the v1.8.0-beta release and your React Native CodePush plugin to the v1.9.0-beta release in order to take advantage of it. Both of those include numerous other improvements, so hopefully it will be worth it :)\nCheck it out and let us know if you have any feedback. Thanks!\n. LGTM!\n. Hey @rlog! That is due to a breaking change caused by React Native 0.19.0. If you upgrade to the latest version of the CodePush plugin (1.7.0), this will be resolved. Let me know how it goes!\n. Oh I see. Yeah apologies, as mentioned in the release docs, CodePush 1.7.0 requires React Native 0.19.0. RN included the breaking change you are hitting and added the platform support necessary for enabling updating images on Android. If you want to use the latest CodePush bits, you'll need to upgrade your RN installation. Otherwise, just install CodePush 1.6.0.\nSorry for the inconvenience here. We've been trying to maintain back compat with each of our plugin releases, but sometimes RN breaks us in a way that we have to take a new hard dependency on a specific platform version.\nCodePush 1.7.0 primarily adds support for RN 0.19.0 (updating images on Android requires this version) so if you're not running that version, it wouldn't add any value to you anyways.\n. Hmm interesting. Apologies for that! So the only devices that exhibit this issue are pre-release versions of iOS? On those devices, are you seeing all assets that you require via the RN assets system disappear after the CodePush update or just the tab bar icons?\nWe haven't done any testing with iOS 9.3 yet, so it's possible there is a breaking change in either RN or the CodePush plugin we need to respond to. We can take a look at this ASAP tomorrow if you could confirm that the issue appears to be limited to that iOS version.\nThanks so much for reporting this!\n. That is really bizarre! I would expect the images to either work or not, so it's really intriguing to me that only the tab bar icons disappear after the CodePush update. Are you using custom icons or system icons? I just ask because I'll try to reproduce the issue on my end and I want to make sure I know the exact setup.\n. Hey @maxdjohnson, so I haven't been able to repro this issue unfortunately :( I upgraded my iPhone to 9.3 beta 2, and added a TabBarIOS component to a demo app, and I'm not seeing the icons disappear after doing a CodePush update. I tried doing an update that did and didn't modify the actual icon to see whether there was an issue with the diffing logic on the server, but it worked in both cases. Can you confirm a couple of things for me, just to make sure I'm testing the right condtions:\n1. Are you referencing your TabBarIOS.Item icons via a require statement or are you relying on referencing them within an xcassets file/etc.? I'm currently testing the require strategy and it seems to be working fine.\njavascript\n   <TabBarIOS.Item title=\"Please work!\" icon={require(\"./sample.png\")}>\n   ...\n   </TabBarIOS.Item>\n2. Could you paste in an example of the react-native bundle and code-push release commands you ran to perform the update? I just want to make sure we're doing the same thing. I'm 99.9999% confident that you are doing the right thing, since it's working on some devices. Otherwise, the icons shouldn't be working at all if you were only releasing the JS bundle for example.\n3. Have you continued to confirm that this only repros on iOS 9.3 beta 2? \nThanks so much and apologies again for the issue here!\n. Hmm, very interesting. Yeah if you could send me both bundles that would be very helpful. You can e-mail me at joncart@microsoft.com\n. Thanks so much! This is really useful.\nOne other question: for all the devices that didn't have this issue, do you know whether they had already installed a previous CodePush update? In the samples you sent me, the one that worked looked like an app that only installed the latest release from CodePush, whereas the one with missing images, it had installed a previous CodePush update.\nThis scenario of transitioning between CodePush releases should work fine, but I'm just curious if you could validate whether any other successful device had also previously installed another update. That would help rule out that scenario, now that we know the issue isn't related to the iOS version.\n. @AndreyNikiforov In your case, are only some of the images missing after the update as well? Or all images? Additionally, can you confirm whether this issue manifested itself after an initial CodePush update or a subsequent one (I.e. an app installed a CodePush update with no problem and then later installed another update only to have some images missing).\n. @AndreyNikiforov Are all of the images disappearing for you after installing the CodePush update? Are you releasing your assets to CodePush along with the JS bundle? In order to use CodePush with an app that uses the RN assets system, you have to release your assets to CodePush. \n. @AndreyNikiforov RN 0.15.0 is when iOS changed the way it loaded images to require them to be located relative to the JS bundle (RN 0.19.0 is when the same behavior launched for Android), so now that you're on 0.19.0, you have to upload your assets along with the JS bundle every time you release an update to CodePush. Can you share an example of the \"react-native bundle\" and \"code-push release\" commands you're running?\n. @AndreyNikiforov Awesome! I'm soo glad that worked for you :)\n. Hey @maxdjohnson, have you seen this issue occur again or was is just that one instance? We haven't been able to track down why this might happen, but we made some general improvements to our diff update logic that could potentially prevent a partial update from happening.\n. We actually do this already :) We believe the bug you're hitting is related to the diff update process, which merges the contents of the current update with the contents of the newly downloaded update. In that case, the downloaded zip would be valid, but it would only include the changed files, so we're relying on the diff merge to fill in the gaps. For some reason, that process seemed to have missed copying some of the images :/ \n. Ah right, I see what you are saying. Yeah that would in fact be the right way to do it. The existing checksum validates the integrity of non-diffs, and the proposal you're making would validate the integrity of updates post diff-merging. We can absolutely do that and can probably get it out early next week with our next planned release!\n. Hey @oney! I'm so sorry to hear this!\nI just tried updating Goodnight and I saw the two update prompts, but as long as I only clicked \"Continue\" once and then wait until the app refreshed, everything worked fine. The issue I had experienced in the past was when I clicked the \"Continue\" button on both prompts, which is what I'm assuming is the issue. We have a bug tracking calling sync twice, and we know it can cause problems.\nWhen I uninstall your app and re-install it from the store, I only see a single update prompt when running, and everything works beautifully, so the double update prompt seems to have been resolved in the latest store version, whereas if people are running older binaries, they can get the two prompts and may run into problems if they click \"Continue\" on both.\nAdditionally, our plugin guards against crashes by rolling the user back when an update encounters issues, but I think there is a bug with that feature when sync is called twice, and therefore, the double update prompt scenario makes it possible for a crash to not result in an automatic rollback.\nDid you fix the double update prompt in your latest store update? If so, I wonder if your users wouldn't hit this issue as long as they update to the latest app store version. Otherwise, I would love to discuss how we could help prevent the double update problem. Is it possible you're not able to repro it because you're running the latest binary which doesn't have the double update prompt issue? As long as this issue is resolved, there shouldn't be any issues releasing updates.\n. The other possibility, based on the stack that you displayed, is that you pushed a CodePush update that was bundled with a different React Native version than the binary host that installed it. That would result in an issue like this. Is it possible that you are testing against the latest binary version, but you have users on older store versions that wouldn't be compatible with the latest CodePush release?\n. This crash as been addressed by #196 and will be released to NPM this afternoon. Thanks for the feed @oney!\n. Hey @mhagmajer! I'm super sorry to hear this! We haven't seen issues like this before, so I'd love to get to the bottom of it and figure out how we can either fix a bug in the product, make sure the docs are clearer, etc. Is this the error message that you saw? \nUpdate is invalid - no files with extension .bundle, .js or .jsbundle were found in the update package.\nAdditionally, could you share an example of the react-native bundle and code-push release commands you ran? Just to help us double-check that we know the workflow you used.\nAfter looking through our code and re-running through a bunch of scenarios, the only way we can imagine this issue is happening is under the following circumstances:\n1. Your app is calling sync on startup\n2. You released an update that was a directory, which didn't include a file with one of the following extensions: .js, .jsbundle or .bundle\nThis would have the effect of automatically downloading the update, and then crashing when the plugin can't find the JS bundle in the zip file. Once the user opens the app again, it would trigger sync again, and therefore, crash, causing the appearance of an infinite crash.\nWe're about to send out a PR that \"blacklists\" an update as having failed when we don't find the JS bundle, as opposed to throwing an exception. The plugin already has the concept of a blacklist, which will be ignored the next time the app calls sync. This would have the effect of making it such that step #2 wouldn't crash, but rather, would log the failure. Therefore, the next time your end-user starts the app, and you call sync, it would see the available update, but know that it failed, and would therefore, ignore it.\nWe believe this behavior fix makes sense to do regardless if it is what you're running into, but I would LOVE to verify if the two steps above reflect your scenario and are responsible for this issue.\nOnce again, I'm super sorry about this issue!\n. That sounds great! Thanks so much for circling back with us. Ping us again if you hit any issues and we'll be happy to help investigate further :) \n. LGTM!\n. Hey @talkol! Apologies for this issue! Yeah I totally agree that this isn't an ideal scenario as it stands. Just thinking about your scenario a little bit, I'd love to pose a few potential options and see what you think. Some of these might be horrible, but for the sake of conversation, I just want to toss things on the wall :)\n1. We could enable \"clearing\" a deployment (e.g. code-push deployment clear [APP_NAME] [DEPLOYMENT_NAME]), so that the key remains the same, but the history of releases are completely cleared. This would have the same effect of deleting it and re-creating a new one that used the same key. This could potentially also have the benefit of \"cleaning\" up a deployment that was used for testing/development that you now want to re-purpose/etc. but it's questionable whether in that case you couldn't just delete/re-create the deployment since during development it isn't so valuable to retain the same key.\n2. We could allow you to actually delete a release from a deployment history. Right now, the deployment history is immutable, but we could certainly discuss changing this. That would have allowed you to remove the release you didn't want to be installed without needing to delete the deployment entirely. This would effectively only be valuable if you had additional releases on the same deployment that you didn't want to completely clear using #1. Additionally, this could potentially be valuable if you accidentally released an update that you don't want to rollback because it would stay in your history, and you just want it completely gone.\n3. We could allow you to \"disable\" a release (or deployment) so that even though it's part of the deployment history, it won't be retrievable by any clients. This would have allowed you to retain the existing deployment and release, while having the benefit of simply hiding it until you want it to be available.\n4. We could allow rollback to work on a deployment with only a single release. Right now, the rollback command rejects the scenario where you try to rollback a deployment that only has a single release. This is because the deployment history is immutable, and therefore, a rollback operation simply makes a new release whose contents/metadata are equal to the rollback target. When there isn't a rollback target, there wouldn't be anything to release. I'd hesitate to overload the rollback command to effectively support deleting a release if there wasn't a previous, as opposed to simply enabling you to delete a release via option #2\n5. We could support your suggestion of allowing a specific key value to be provided to the code-push deployment add command.\n6. Others?\nIn general, I definitely want to support the scenario you ran into, but I'm wondering if there is a way to do it that is a little more \"clean\" that simply allowing the creation of a new deployment with a specific key. I'm not personally in love with #1, #2 or #4, because I feel like changing the immutability invariant of a deployment's history will have downstream effects, and I like how simple/intuitive rollback currently is, so I'd hate to overload it to also support deleting a release in certain scenarios.\nI think #3 could make a lot of sense, since the deployment history itself is still immutable, rollback remains the same, and you don't need to worry about mangling keys. It simply solves the problem of turning the deployment on or off with the intent of \"hiding\" the release from people during a timespan. This could also be used for other scenarios besides the one you reported, so it feels like a simple and natural addition to our existing workflow options.\nThoughts? Thanks so much for the feedback?\nAdditionally, in the meantime, we could fix up your deployment to have the old key, that way your app isn't orphaned in the wild. Send me an e-mail at joncart@microsoft.com and we can take care of it :)\n. @artald 100% agreed. I want to remove the need to ever delete a deployment that is actually in use, and therefore, figuring out the core needs here would be awesome, so we can bake in the necessary support, without needing to resort to deleting/recreating a deployment, and trying to restore the key.\n. Hey @talkol! Have you had a chance to think about this? \n. Hey! So just a quick update: we're working on implementing both the ability to clear a deployment history, as well as the ability to \"disable\" an individual release within the history. That way, you'll have a lot more flexibility over your deployments than you currently do.\nOur hope is to have these both out within the next week, along with some other new features (e.g. rolling out releasing to a percentage of users), so stay tuned and I'll update this issue as we send out the PRs.\n. We just shipped the code-push deployment clear command as part of the 1.8.0 release of the CLI to address this request. We're also going to pursue disabling individual releases, but we'll track that as a separate issue. Thanks for the feedback everyone!\n. LGTM!\n. LGTM!\n. Sorry! I accidentally fat fingered the close button on my phone :/\n. Can you also update the docs in two places:\n1. Add the new sync status to the list of options for the enum\n2. Add the new sync status as a possible resolved value for the promise returned by sync\n. Awesome! Let's merge this baby :) You can disregard my previous comment about the docs. What you have is totally fine.\n. LGTM!\n. LGTM!\n. We're definitely extremely keen to support targeted deployments very very soon, once we finish up some of our core feature set in the next couple of weeks. \nFor #2, are you not interested in a percentage based rollout (as requested in #174), but rather, a time-based roll out that would allow you to specify a time that you want the service to incrementally increase the availability from 0% to 100%?\n. @nevir We're currently investigating staged rollouts with the hope to land this in production in the next couple of weeks. Could we use #174 to drive the discussion around this feature and \"convert\" this issue to focus on the targeted updates? Any feedback you had on the other thread would be hugely appreciated!\n. I'm going to close this issue for now, since we shipped the ability to release canary builds already, and when we get to addressing the targeted updates feature, we'll open an issue to get feedback on the design. Thanks again!\n. @skevy Awesome! Thanks for the heads up. Any idea if this will make it into 0.20.0 \"RTM\"?\n. Beautiful! Thanks so much @skevy!\n. OK :) Let us know if you hit any other issues/etc. Thanks for using CodePush!\n. Hey @livioso! Thank you so much for the amazing detail here. We were able to identify the cause of the \"Callback not found error\" thanks to this and we will be submitting a PR for that ASAP.\nThe issue about the missing \"app.json\" file, however, is a little perplexing. Would you be able to capture an xcappdata file of your app via the Xcode Devices window and send that to me at joncart@microsoft.com? That would be really useful for diagnosing how the app might have got into a bad state.\nAdditionally, could you let me know when you hit this error exactly? Was it just by launching the app? Was it after restarting after installing an update? Was it simply by checking for an update?\nThank you so much and sorry for the inconvenience here!\n. OK cool. That makes sense because your error indicates that the app somehow got into a bad state, and doing a clean across the board would resolve that. That said, PR #196 resolves the crash that will happen when the app gets into this state and we're working to figure out how he \"app.json\" file went missing.\nThanks again so much for reporting this!\n. This error has been addressed with #196 and will be released to NPM soon. Thanks for the feedback and let us know if you hit this problem (or any other problem) again.\n. LGTM!\n. Hey @xhacker5000! v1.7.0+ of the CodePush plugin requires React Native 0.19.0+, and the build error you're seeing is because you're using an older version. If you upgrade to RN 0.19.0 (or 0.20.0 which was just released today), this build error will go away. \nIf you need to stick to your current RN version, you can install the 1.6.0 release of our CodePush plugin, which supports pre-0.19.0 RN.\nLet me know if that works for you! \n. If you follow the steps outlined on this page, you should be good to go: https://facebook.github.io/react-native/docs/upgrading.html#content.\nYou'll unfortunately need to re-install the CodePush plugin after doing the \"react-native upgrade\", but it's better to ensure that your app is fully upgraded.\n. Sorry, the version is \"1.6.0-beta\", so make sure to pass that when you call NPM install.\n. Please let us know any other questions you have as you're using it! I'll close this issue for now. Thanks!\n. Getting a 404 when calling sync typically indicates that the deployment key you're using doesn't exist. Could you check the \"CodePushDeploymentKey\" setting in your Info.plist file and compare it with the key of the deployment you displayed the history above for (run \"code-push deployment ls APP_NAME -k\" to see it)\n. Are you sure you didn't put the value \"Staging\" in your Info.plist? You need to specify the key not the name. If you run \"code-push deployment ls APP_NAME -k\" (note the \"-k\" flag) you will see this value.\n. Yep, if you want to immediately install the update after downloading it, that is the install mode to specify to the call to sync.\nBTW, make sure to pass the EXACT binary version you are targeting when you call the CodePush release command. If your Info.plist is configured as 1.0.0, then you need to pass 1.0.0 to the release command, not 1.0.1.\n. We don't currently have an Obj-C equivalent (or Java for that matter) of the sync method. Much of it is written in JS so that we can share the code between iOS and Android.\nIf you want to also call sync when the app is resumed (as opposed to just started for the first time), you could use the AppState API to do that: https://facebook.github.io/react-native/docs/appstate.html#content.\nWould that work?\n. I'm going to close this since it seems like your issue was addressed :) If you'd like to request we make an Obj-C API equivalent for sync, let's open a seperate issue for that. Otherwise, let us know any other questions you may have. Thanks!\n. Hey @nicinabox! When you say that the binary reports that 2.0.0+110 is installed, do you mean that it discovers that update on the server and downloads/installs it? Despite the fact that in your case, that isn't desired?\nAs you mentioned, this behavior would be currently expected based on the fact that CodePush is seeing that there is an update available for the running binary version. If you had changed the version to 2.0.1 then you wouldn't have seen that behavior. \nWe're actually in the process of trying to improve the integration between CodePush and HockeyApp, and this is one area where it's less than ideal. There isn't really a great workaround for now other than to bump the CFBundleShortVersionString when you release an update to HockeyApp.\nIn non-production scenarios (as well as with TestFlight), this version strong has to be bumped, so this issue only ends up happening with \"beta stores\" like HockeyApp or Fabric.\nOne possible solution would be to allow specifying the build code/number when releasing an update via the CodePush CLI, which we could use to further determine whether there is an update or not.\nThoughts?\n. Totally understood. From that perspective, we absolutely need to lift the requirement for bumping the semver string to better enable using CodePush during beta testing. Here is a little more detail around what we could do to accommodate this scenario:\n1. Update the CodePush plugin to begin sending the build number to the server (in addition to the semver string) whenever it does an update check. This way, the server knows the exact binary that the client is running, and can make a more informed decision about whether it needs an update or not.\n2. ~~Update the CodePush CLI's release command to allow optionally specifying a build number to associate with a release (e.g. code-push release Foo ./release 2.0.0 --build 45). This would allow targeting a CodePush release at a specific binary version, when using the build number as the level of granularity instead of the semver string.~~ The release command already supports passing the build number using the semver compliant syntax (e.g. code-push release Foo ./release 2.0.0+34).\n3. Update the CodePush server to look for the presence of a build number on a release, and use it to inform whether the inquiring client should receive the update or not. If a release doesn't have a build number, or the client doesn't send one, then the existing behavior will kick in. If the release and client have a build number, then the client will only receive the update if they are running the exact same combination of semver and build code (e.g. 2.0.0 (45)). Otherwise, they will not receive the update, assuming that a newer build code has newer bits, and an older build code wouldn't be compatible.\n4. ~~Update the CodePush CLI's deployment h and deployment ls commands to display the build number value for releases that included one (e.g. the App Version column would display the value 2.0.0 (45)).~~ If you add a build number to your target binary version (as mentioned in #2), the App Version column will already display it correctly.\n5. Update the CodePush CLI's newly create release-react command (not shipped yet) to infer the build code automatically and supply it as part of the release. This way, you don't have to actually do anything extra to ensure this scenario works.\nThoughts? There may be some details missing here, but in general, this direction seems reasonable.\n. @nicinabox I actually realized there is another solution that you could use. You can bump the version of your app by appending a pre-release tag, and then using that to target your CodePush releases. So for example, if you update your Info.plist file to be 2.0.0-1, and call code-push release APP CONTENT 2.0.0-1, that would work, without requiring you to touch the major/minor/patch version. This is effectively performing the same function as the build number proposal above, but this would actually work right now to unblock you.\nWhat do you think?\n. OK cool. Let us know :) Thanks!\n. @geof90 Yeah I definitely think we should expand the promote command to allow modifying metadata along with the release copy\n. @nicinabox Did this solution end up working out as a workaround for you? \n. Thanks for the confirmation @nicinabox! Let us know if you hit anything else :)\n. we validated that our plugin works with RN 0.20.0 so you shouldn't have any problems using it with CodePush. Please re-open this issue if you hit a specific issue. Thanks!\n. Could we call the new directory ios instead of iOS?\n- renamed\n. Ah yeah good catch. We recently made the change to hide the key by default since it took up a lot of screen real estate and isn't needed frequently. I just updated the readme to include the \"-k\" flag within the instructions on how to retrieve the key. Let me know if you think that is sufficient or if we need to add more detail. Thanks!\n. @praveenApk Unfortunately I don't have much Swift experience so I'm not immediately sure what the issue could be. I know we have many users using Swift, so it works, but I'll have to investigate this tomorrow. Sorry for the inconvenience. Stay tuned!\n. @DHidee66 That error indicates that the CodePush module hasn't been fully installed, and therefore, the \"proxy\" object isn't being exposed to JS. Could you double check the install instructions to make sure everything is setup?\n. Ah OK that's interesting. Are you calling any CodePush APIs in response to the notification?\n. Also out of curiosity, are you using this module for handling the notifications? https://github.com/oney/react-native-gcm-android?\n. Hmm OK. I just pinged Howard who is the owner of that module (and also uses CodePush in his apps) to see if he has any insight. I'll investigate into it as well to see what might be going on. We haven't seen this issue before so I appreciate you reporting it!\nJust to make sure I'm trying to repro the same scenario, could you let me know which React Natice you're using? RN 0.20.?\nAdditionally, does the JS file that includes your notification handler also include a require/import statement for the \"react-native-code-push\" module? The error you're seeing would actually come from simply loading our JS module, as opposed to calling sync.\n. It seems possible that this issue isn't related to CodePush, but rather, is being caused by this bug in the RN GCM module: https://github.com/oney/react-native-gcm-android/issues/26.\nIf you removed any imports/require statements for CodePush and any sync calls from your project, does this issue go away entirely? Or do you see a similar error but for a different module? I'm just wondering if the CodePush error you're seeing is just a symptom of an underlying issue.\n. We could definitely update the docs if that works, but it seems really unlikely that only the CodePush native module isn't loaded while inactive. The \"NativeCodePush\" object is simply the proxy object generated by the React Native bridge, so the fact that it is undefined seems more like a sign of the bridge itself not being fully operational, than an issue with CodePush.\nI'll keep investigating and will look forward to hearing what you find as well. Thanks dude!\n. If you remove the CodePush import and call to sync entirely, does everything work properly, or do you get a different error when the app isn't active? I'm curious if you would have issues trying to evaluate any native module or not. For example, if you grab the Linking module off of the react-native and  called Linking.getInitialURL(), would that work or would \"Linking\" be undefined?\n. Either way, what we can do is stop doing any JS module initialization if the RN bridge doesn't include the CodePush module (\"NativeCodePush\" is undefined). That way, simply importing the JS module wouldn't throw an error in this case. If you called sync, that would error, but since you're not doing that, it wouldn't be an issue for your scenario.\nI can send out a PR for this in a bit.\n. @DHidee66 Check out #215. If you want to cherry-pick that change, you could unblock yourself right now. We'll likely release an update to NPM next week that will include this fix as well.\n. @krivachy Its an issue with the docs. We recently refactored the code to move all iOS assets into a new folder, but we haven't released that to NPM yet. If you disregard the \"/iOS\" path in the two Xcode install steps (add project and then update header search path), everything will work as expected. Apologies for the confusion, I'll update the docs to mention this.\n. I just updated the readme to mention that the CodePush.xcodeproj file can be found in the root of the of the react-native-code-push directory for plugin versions <=1.7.3-beta. Additionally, I just removed the \"/ios\" suffix from the header search path setup step since it isn't actually necessary since we're already doing a recursive search. Let me know if we can make it any clearer. Thanks and apologies again for the confusion, that was totally our bad!\n. OK cool, thanks @krivachy!\n. LGTM!\n. LGTM!\n. We recently added a new option to the sync method called mandatoryInstallMode, which by default is InstallMode.IMMEDIATE. What that means is that when you call sync(), if it discovers an update that is optional, it will wait until the next restart to apply it (fully silent), however, if it discovers an update that is mandatory, it will apply it immediately. This way, you don't need to rely on the update prompt to drive immediate installs. \nAdditionally, if you want to display a loading screen when an update is available and being downloaded, you can do that by using the sync status changed callback parameter of sync.\njavascript\ncodePush.sync(null, (status) => {\n   // Check the status parameter and show/hide the loading dialog as applicable\n});\nIf you want the behavior that I mentioned above, you can NPM-install the bits from this GitHub repo. Otherwise, we'll be publishing it to NPM this afternoon.\nLet me know if that will work for you. Thanks!\n. I'm going to close this for now since we spoke on Discord, and I believe you were unblocked. Please re-open this if you're still hitting an issue or you wanted to discuss this feedback further. Thanks so much!\n. @jkhustler Hey! Could you try following the steps in this post to see if that works for you? We just updated the docs to explain how to use CocoaPods to install CodePush, but we likely need to add docs for Swift installation specifically.\n. Doh! I'm an idiot, I meant to add this link :)\n. Hmm, Ok let me take a look at this tonight. I'm not immediately sure what the issue might be since the React Native headers should have been added to your header search path after installing it via CocoaPods. Sorry for the issue here, we haven't been (unfortunately) testing in Swift apps so there are likely a few bugs.\n. @geof90 We haven't shipped that change to NPM yet so I'm not sure if that's the problem. We definitely need to fix it for our next release, but I think here is a problem with CodePush being built as a framework by CocoaPods. If you don't set \"use_frameworks!\" in your podfile, and you add the CodePush.h header to a Swift bridging header file, it works fine. But when \"use_frameworks!\" is set, you'll get the compile error mentioned in this bug.\n. I think I figured out the solution, I'm just testing it now :) Stay tuned, I should be sending out a PR within the hour.\n. @jordansexton Wasn't that always necessary? Or are you referring to a scenario where you're installing CodePush via CocoaPods, but not React Native itself?\n. @jkhustler Would you be able to NPM install the bits from this commit and verify that it works for you? Our testing shows that it's working, but I would love to get a sanity check from you as well if that wouldn't be an inconvenience. Thanks!\n. Awesome! Thank you so much for checking that :) I'll just wait for a sign-off from @geof90 before merging this, but we'll get it out ASAP. In the meantime, are you cool with depending on the cocoapods branch as you currently are?\n. @mudetroit We had this issue reported over the weekend and we're about to merge in the fix. As you mentioned, we didn't need the done call at all, so it's a simple fix to ensure compatibility with any spec-compliant Promise implementation.\n. We just merged in this fix and will publish it to NPM this afternoon. Thanks for reporting it!\n. This is definitely on our radar as something we would be interested in doing. Are you finding that the JS bundle represents the majority of your app size, and therefore, having to download the entire thing when you can it is costly? We already perform file-level diff updates so that only changed files will be downloaded. This can eliminate the need to download lots of image assets, which for many apps, represents the bulk of their size.\n. Hey @wangyueg! Did you intend to add some description to this issue? I'm going to close this for now, since it isn't actionable for us, but please re-open it (or create a new issue) if you're running into a problem that we could help with. Thanks!\n. @mohanrohith We just submitted a fix via #242 that removes this GitHub-based dependency. I'm going to close this for now, assuming that you aren't experiencing issues with downloading NPM-based dependencies. Please re-open this if that isn't the case, and we can investigate it further. Thanks for reporting this!\n. This error is typically associated with running your app against the iOS Simulator, where the RN build scripts don't generate a binary bundle by default.\nCould you change your AppDelegate.m file to set the JS bundle location to the standard production code (i.g. [NSBundle mainBundle]...), and see if you get the same error? I'm suspecting that you will, which will confirm that this isn't a CodePush issue.\nIn RN 0.22.0, the binary bundle is now generated for release builds, but if you're using pre-0.21.0, or performing a debug build, you'll need to modify the RN Xcode build script to force it to generate the binary bundle. This is the file you'll need to modify in your local \"node_modules/react-native/packager\" directory.\n. Aside from my comment above, I just checked in a PR that displays a more helpful error message. Let us know if we can do anything else. Thanks!\n. I just checked-in a fix for the second issue, but I can't repro the first one. If you re-pull from GitHub, and  make sure you restart the packager after updating the CodePush plugin, you should be good to go. If you continue to see this problem, could you let us know how you're running if you're running your app in debug or release mode, and against the emulator or a device? Thanks!\n. @avishayil If you pull the latest from GitHub, this issue should be resolved. I'll close this bug for now but please re-open it if the problems persists for you. Thanks! And don't forget to kill any packager processes after the upgrade :)\n. @cancan101 It's definitely non-ideal. Unfortunately, react-native-zip-archive also bundles a copy of SSZipArchive with it, so we couldn't easily share a common dependency from CocoaPods/etc. with that package, if both it and CodePush were installed.\nWhich NPM package is creating the conflict for you? Are you also trying to use react-native-zip-archive? I'll give some thought to this issue today since I agree it needs to be addressed.\n. @ericmuyser Absolutely! If you have the time to put your fork up somewhere where we can review it, I would be happy to make the other API adjustments to fully accommodate RN apps using the WebView component.\n. @geof90 I created a new CodePushErrorUtils class and refactored the NSError creation and detection code into it. While I was at it, I re-organized the CodePushPackage class so that the methods were alpha-sorted.\n. We recently introduced a new file CodePushErrorUtils.m that wouldn't be included in the linked Xcode project after upgrading from NPM (this is one thing that sucks about Xcode groups vs folder references). You can resolve this by running the following steps:\n1. Right-click the Libraries/CodePush.xcodeproj node in your project in Xcode, and select Add Files to \"CodePush.xcodeproj\"...\n2. Select the node_modules/react-native-code-push/ios/CodePush/CodePushErrorUtils.m file.\n3. Click the Add button\n4. Re-build your app\nLet me know if that works for you! Once we actually release these bits to NPM we'll have to document this breaking change, since it requires a little bit of setup after upgrading unfortunately.\nAs an alternative, you could also remove and re-add the entire project reference:\n1. Right-click the Libraries/CodePush.xcodeproj node in your project in Xcode, and select Delete\n2. Click the Remove Reference button\n3. Right-click the Libraries node and select Add Files ...\n4. Select the node_modules/react-native-code-push/ios/CodePush.xcodeproj file\n5. Click the Add button\n6. Re-build your app\n. LGTM!\n. @BilalBudhani Yeah that's why we don't currently document the use of RNPM for Android, since our plugin isn't particularly compatible with the expectations that it has. iOS works perfectly, but Android has some snags.\nYou should be able to fix it though if you perform the manual steps, and do the following additional items that back out of some changes that RNPM made:\n1. Renove the import statement for \"com.microsoft.codepush.react.CodePushReactPackage\".\n2. Remove the \"new CodePushReactPackage()\" expression that RNPM added to the getPackages method. \nAnd you should be good to go! Let us know how that goes.\n. @BilalBudhani Any luck? :)\n. We just updated the docs to call out these changes for RNPM. I'll close this for now but please re-open this if this workaround didn't work for you. Thanks for reporting it!\n. Awesome! Thanks for confirming :)\n. Hmm, yeah that looks like an issue on our end. Could you check the history of your production deployment to see if the promote went through: \"code-push deployment history CrimsonConnect Production\"?\nIf not, could you try running the promote one more time? I'm investigating the issue here in parallel, I'm just curious if it's a temporal problem. Thanks and sorry for the inconvenience!\n. Is this error related to CodePush? RCTJSCProfiler.m is a React Native file, so I don't think that would be caused by us.\n. @xhacker5000 I haven't been able to repro this issue, so I'm thinking it's unrelated to CodePush. I'm going to close the issue for now, but please reopen it if you continue to experience this problem. Thanks!\n. Merging this since it's a simple change.\n. LGTM!\n. @Sean-Snow Are the error logs appearing after you background/resume the app to force the install? Or are you getting these after the update installation completes? Could you let us know what command you ran to generate the update that you released to CodePush? It seems like the update contents might have also be invalid.\n. @Sean-Snow OK thanks for letting us know. Should we close this issue then?\n. Let us know if you run into any other issues! Thanks again.\n. Hey @Jackong! Thanks for submitting this PR. Could you provide a little context about this fix? Did we cause a regression, or does this add support for a new scenario?\n. So you have multiple different React Native views in the same Android app? Does each view use a different JS bundle file name? Your change looks good, but I'm still not sure what the issue is without this change. We're trying to better accommodate integrating CodePush into native apps, so I would love to better understand the user scenario.\n. Got it. So you created different CodePush apps and configured each React Native view with a different deployment key and JS bundle name? And you'll be releasing individual updates to CodePush for each activity? \n. I'm not sure if this PR alone would help support this scenario. Each downloaded CodePush update is stored in a directory called \"CodePush/{HASH}\" within the app's local storage. Because of that, the two JS bundles for your different Activities shouldn't actually conflict, unless they had the exact same hash, which would seem pretty rare. I think this PR is a good change, but I'm actually surprised that the JS bundle name was relevant.\nHowever, one problem you'll encounter is related to the fact that CodePush maintains a JSON file in the root of the \"CodePush\" directory that determines which update is the current. Since there is only one of these files, a single Android app couldn't include multiple Acitivites, each of which had an active CodePush update, regardless what the JS bundle file name is.\nWe would presumably need to allow the CodePush class in our Java API to allow you to specify an \"AppName\" as well that forces it to use its own directory within the \"CodePush\" directory. That way, each Activity would be fully isolated from each other.\n. There may be other work needed to support this scenario, but I'm cool with this change. @geof90? \n. @alexprice91 This is really bizarre! We haven't seen this issue before and I'm not immediately sure why it would happen. Thanks for reporting this, and hopefully we can get to the bottom of it ASAP :)\nSo there are two things going on here:\n1. The CodePush plugin thinks your update didn't install correctly, and therefore, is attempting to roll it back. This is meant to happen if a crash occurs after executing the JS bundle associated with a newly installed update. However, one common way that the CodePush plugin hits a false negative is if the app is calling sync somewhere other than app start (e.g. componentDidMount of a root component), and isn't also calling CodePush.notifyApplicationReady to signal success. The sync method calls notifyApplicationReady, so you typically don't need to call it manually, unless your app start path doesn't naturally call sync.\n2. After the CodePush runtime rolls back a failed update, it saves the hash of that update so that it can blacklist it again in the future. The exception you are getting is due to us trying to save a nil hash to user defaults. We should clearly be checking for this possibility, but I'm also interested how you could have gotten into this state, since we should have been able to retrieve the hash of the update that was just installed.\nCould you let me know the following things so I can try to repro this:\n1. What version of the CodePush plugin are you using?\n2. How are you using the CodePush API in your app? Are you calling sync? If so, when? How is your AppDelegate.m configured?\n3. Where are you running your app? Simulator? Device? Are you using Chrime debugging?\nI'll try to repro this ASAP. Thanks!\n. Thanks for this detail! So you uninstalled the app from the simulator, re-deployed it, installed the update from CodePush again, and everything worked fine?\nThe code you displayed looks good, so I'm suspecting the issue you experienced has to do with Chrome debugging/live reload confusing some CodePush expectations. We've tried to make sure the plugin works great during debugging scenarios, but when Chrome debugging is enabled, we've seen a few issues in the past, and there may be other issues we need to address.\nI'll investigate this more in the morning. In the meantime, let me know if this pops up again. Hopefully it's a edgey case bug that doesn't affect you too much :)\n. @alexprice91 Unfortunately we haven't been able to repro this yet :( I'm going to close it for now since it seemed like you got unblocked. If this issue happens again, please let us know and we'll try to see if we can narrow down the repro. Thanks again!\n. @GoldenHash We're having trouble reproing this issue. In addition to the version of the CodePush plugin you're using, could you also let us know if this is this is happening on iOS or Android, on the emulator or device, with Chrome debugging enabled or disabled, and in a debug or release build? Thanks!\n. @GoldenForest We haven't been able to repro this issue unfortunately, so I'm going to close it for now. If you are still hitting this, could you please re-open this and let us know what type of platform and configuration you were testing against? Thanks!\n. @jxintang We don't currently provide a way to prevent downloading updates on cellular networks, but since your app is simply calling sync (or checkForUpdate), you could use the NetInfo API to determine if the end user is on wi-fi before calling codePush.sync.\nWe have it on our backlog to add a new option to sync that could handle this automatically, but it hasn't been high priority since there's a straight forward solution already.\nWould this be something you'd like us to add? If so, I'd love to get your thoughts on a few design questions:\n1. Would you want to prevent just the download on cellular networks, or would you want to prevent the update check as well? Even though the later wouldn't eat much data, it would still have a battery impact.\n2. What about mandatory updates? Would you want them to be treated special, so that you could ensure critical fixes went out even for users on cellular networks, or would you simply want to prevent all updates from occurring unless the user was on wi-fi?\nThanks for reporting this!\n. @jxintang I'm going to close this since per my previous comment, this is easily achievable today using the NetInfo API. If you would like to request that we add this logic directly to CodePush, please re-open this bug and we can discuss what that enhancement would look like. Thanks!\n. @mbernadeau We used to look for the JS bundle (in a downloaded update) based on a few well-known extensions, but we recently changed that logic to expect the JS bundle you release to CodePush to use the exact same name that was shipped with the binary. Therefore, as @dtivel mentioned, if you're calling getBundleUrl(\"index.android.bundle\") in your MainActivity.java file, you just need to call the JS bundle file \"index.android.bundle\" when you generate it using the React Native CLI.\nI'm glad you reported this issue, since it helps us see that we clearly didn't update the error message when we changed the JS bundle locator logic :) I can send out a PR to fix that, but in the meantime, you should be able to get unblocked by following @dtivel's suggestion.\nAlso, we just recently shipped an update to the CLI that includes a \"release-react\" command that simplifies this whole process, and may be worth checking out. Thanks!\n. Totally agreed that the error message is horrible :) I'll use this bug to track the work to fix it so that no one else hits this same problem.\nThanks so much for reporting it and confirming the suggested workaround.\n. Fixed this via #262. Thanks for the feedback and let us know if you hit anything else.\n. @xcarpentier Good catch! Thanks for fixing this.\n. LGTM!\n. The issue is that we didn't add support for releasing assets on Android until CodePush 1.7.0, so when you release via the CLI, it's uploading a ZIP to the server, but the version of the CodePush plugin you're using expects to get a JS bundle file.\nYou'll need to upgrade to 1.7.0+ of the CodePush plugin if you're app is using assets on Android. Unfortunately, that version of the CodePush plugin also requires at least React Native 0.19.0+, so you'd need to upgrade your RN dependency as well.\n. @vdgnart I forgot to mention that one way you can verify this is the issue is to simply release a JS bundle file to CodePush, instead of a directory (which will be zipped). The problem with that scenario is that all of your images will disappear after doing a CodePush update, but you shouldn't see the error you're getting.\nUnfortunately, React Native didn't add support for dynamically updating images until 0.19.0, which is why we take a hard dependency on that version and above at this point.\n. @vdgnart Did this workaround help out? I'd love to make sure you're unblocked before closing this issue.\n. I'm going to close this issue for now as isn't tracking a product bug that we can repro. @vdgnart If you could please try out the workaround I mentioned and let us know if you run into any issues, that would be awesome. Thanks again for reporting this!\n. Which version of the CodePush plugin are you using? We actually just refactored our Java API to be more compatible with RNPM, which is why the docs updated. The CodePushReactPackage class no longer exists as of CodePush v1.10.0-beta. \n. If you upgrade to v1.10.0-beta of the CodePush plugin, it should be much more compatible with RNPM-based installations, and the README will reflect your setup experience.\n. @BilalBudhani So happy to hear that you got it working correctly. Thanks for letting us know.\n. @mrspeaker Thanks for catching this!\n. @niftylettuce This isn't a bug with CodePush, but rather, an issue with the packager when you use a custom Babelrc file. CodePush uses async/await and unfortunately this ends up causing issues, as you've seen with the linked bug. You would hit this issue if using any other library that uses async/await. The only solution that we've found it to either remove your custom babelrc or update the packager's Babel helpers file as mentioned in the RN bug you mentioned.\n. How are you running the app? \"react-native run-android\"? When you say that it's a production bundle build, do you mean that you actually did a release build of the APK or that you explicitly disabled developer support in your MainActivity? If the latter, then the RN build scripts don't generate the binary bundle by default in a debug build, and so your app will crash because it can't find the JS bundle. \nIf that is in fact the problem, you should be able to remove the \"getJSBundleFile\" method entirely from your MainActivity (to remove the use of CodePush), and still see the same issue,.\n. Nope, but your APK needs to contain a JS bundle. As I mentioned, by default, RN doesn't generate the JS bundle in the APK when doing a debug build (it assumes you're using the packager), so if you're running react-native run-android, you are doing a debug build and your APK won't actually include a JS bundle file to run. That isn't a CodePush issue, and would manifest itself if you removed CodePush entirely as well.\nThere are two solutions:\n1. Do an actual release build\n2. Modify the android\\app\\react.gradle file to enable generating the APK-bundled JS bundle file even in debug builds. Simply changing this line to enabled true would do the trick.\nLet me know if either of those work for you. If not, it would be helpful if you could remove the getJSBundleFile method from your MainActivity file and see if the issue still occurs. \n. As long as you did step 3 here, the CodePush plugin will compare the contents of the binary against the latest update on the server. If you don't do this step, then the client will simply assume any update that is available in the configured CodePush deployment, and is eligible for the requesting client (e.g. the targetBinaryVersion matches, and the release isn't marked as disabled) is available.\n. I just updated our README to mention the custom gradle as part of the RNPM installation path. I didn't realize that was missing. Apologies!\n. Yeah sorry, my readme comment was about the gradle file step missing from the RNPM installation steps.\nAnd no, we don't have our own babelrc file. I'll have to investigate why you're still hitting this issue, but I don't suspect that it's a CodePush issue, as opposed to an RN issue with your custom babelrc.\n. @charlieschwabacher Thanks for tracking down the issue here! We're definitely not using these, so I agree it makes sense to remove it. If you are down to send a PR, that would be much appreciated :)\n. Closing via your PR. Thanks again @charlieschwabacher!\n. Looks good to me. I'll wait for @geof90 to sign off as well before merging, and I'll do some basic smoke testing as well. Thanks for submitting this!\n. @xiaobuu I'm so sorry to hear this! We haven't seen an issue with this behavior before, so I'd love to try to get to the bottom of it.\nStupid question: is it possible that the second update you released was generated after you updated React Native and/or any plugins (including CodePush)? The crash could have happened because of an incompatibility between the binary and the bundle.\nAlso, just to make sure, after the users experience the app crashing, when they re-opened the app, did it successfully roll back to the previous update? Does the CLI display the presence of rollbacks for the release when you run \"code-push deployment history APP DEPLOYMENT\"?\n. The error you're getting it because the update you are releasing isn't different than the current release. We raise this error to prevent users from accidentally releasing the same update multiple times. There's a few things I noticed:\n1. Shouldn't your image path be \"../assets/items/item1.png\"' instead of \"..assets/items/image1.png\"\n2. Why are you copying the assets folder into the code-push-release/assets folder? The \"react-native bundle\" command will do this properly for you\n3. When calling \"react-native bundle\" you are using an entry file of index.ios.js, but your app seems to be using index.js. Which one is correct?\n4. When calling \"release\" you aren't uploading the entire release, so you just need to specify the \"code-push-release\"' folder instead of your main.jsbundle file\nBTW, I would recommend using the new \"release-react\" command in the CLI. It will take care of much of this work for you and will make the release less error prone. Simply run \"code-push release-react time_castle_client ios\". It will handle bundling your app, inferring the app version and releasing it to CodePush.\n. Awesome! We put out the release-react command to simplify this whole process, since we recognized it was error prone. Thanks for confirming! BTW, I would be very interested in knowing what time castle is, since we've been chatting for a while. Is this a public app? :)\n. That sounds awesome! You can email me at joncart@microsoft.com :D\n. @xhacker5000 Any luck? :) The CodePush sample app actually shows how to use the download progress callback as well, if you'd like to see a sample: https://github.com/Microsoft/react-native-code-push/blob/master/Examples/CodePushDemoApp/crossplatformdemo.js#L73 \n. @xhacker5000 I'm going to close this issue since we support download progress and there doesn't appear to be a bug with it. Please re-open this if you run into any problems and/or have a question about how to use it. Thanks!\n. LGTM! I'm cool with removing this line.\n. @eugenehp Thanks for the heads up! Do you know if the recommended solution for 3rd party modules is to update their pod spec to reference React via a \":path\" dependency similar to how a podfile is expected to reference it?\n. Are you running into an issue using CodePush with CocoaPods or where you just filing this issue as an FYI? \n. OK cool. Since the CocoaPods-hosted version of RN is being deprecated, but yet they will still be shipping their pod spec with the NPM package, it seems like we could just simply update the CodePush pod spec to refer to the RN pod within the node_modules folder since it would always be at a fixed location. That way, anyone that wants to use CocoaPods to link their projects can continue to do so, and it will work with their local RN version.\nWe're working with the RNPM team to simplify our installation with it, but I want to make sure our CocoaPods experience works for the folks being native iOS apps with embedded RN views.\n. @eugenehp I confirmed this morning that CodePush will use whatever version of React that the host app is configured with, so as long as folks use the recommended solution of pointing the React dependency at the folder in node_modules, then we should be resilient to the deprecation of the React package in the CocoaPods registry.\nWe definitely want to leave our CocoaPods installation instructions for users building native iOS apps with embedded RN views, so I'm going to close this since I believe there aren't any pending issues with our Podspec or docs.\nPlease re-open this if I missed something or you had another thought in mind. I wasn't sure if you were thinking we should remove our CocoaPods docs entirely, which I don't think we should do for the aforementioned reason.\nMoving forward, we'll be promoting the use of RNPM as the primary installation method for React Native developers, but we want to also maintain interop with native devs using React Native.\nThanks!\n. @eugenehp I just updated our CocoaPods install docs to reference the need to define the React dependency to point at the local NPM installation. Let me know if you think it should be tweaked.\n. Interesting! We hadn't seen this issue, but it's possible that we missed something specific to Android 4.3. I apologize about the inconvenience here. We'll investigate this ASAP in the morning and will try to figure out what is going on. Thanks for the patience!\n. @jjding1986 Did you mean 1.10.1-beta? I don't believe that we released a 1.9.1-beta version. It seems like we regressed pre-KitKat devices with 1.10.1-beta, so we'll investigate the bug and try to get a fix out ASAP.\n. @jamieathans Could you let me know how you were running the app when you had this error? Was it a debug or release build? If debug, did you have Chrome debugging enabled? From looking into the issue briefly, it looks like it should only occur in debug builds on a pre Android 4.4 device. We'll try to narrow this down, but it would be awesome to know if you get this issue in a release build.\n. This was just resolved by #288, so if you want to grab the latest bits from GitHub, you should be able to run the latest CodePush plugin on pre-KitKat Android devices. We'll ship this to NPM tomorrow. Thanks for reporting this issue!\n. Interesting. So it doesn't appear to be an Android OS or build config related issue. By any chance, were you able to repro this on the emulator? It would be valuable to know if this is a device only issue. I highly doubt it, but I have to ask :) \n. @kiliwalk I like what you're thinking :) Right now, we're trying to optimize CodePush for use with any binary distribution \"store\" (e.g. Google Play, App Store, folder share, InTune, MobileIron, etc.), as opposed to us trying to be a binary store of our own. What you're referring to sounds like a good use case of HockeyApp, which would allow releasing new APKs and checking for and downloading updates from them much in the same way as you would using the CodePush SDK (e.g. hockeyApp.checkForUpdate()). We're working on better integration between HockeyApp and CodePush, so it's possible that we could do something smarter here long term.\nThat said, we do plan to support notifying the CodePush client that an update is available which requires a newer binary version. For example, if the end user is running v1.0.0 of your app, and when the app calls sync it discovers an update that is targeting v1.1.0, we want to let the app know so that it could choose to do something with that information (e.g. display an update prompt). We don't currently do this today, but we want to add this soon. \n. @kiliwalk I'm going to close this bug for now since the issue appears to be fixed once you upgrade React Native and CodePush. Please let us know if you run into this same issue after you upgrade, and apologies again for the inconvenience!\n. @rikuayanokozy Are you hitting an issue with this using the CodePush server, or are you only experiencing a problem when using our client plugin with your own server?\n. Thanks for the PR! I just merged your change.\n. I'm assuming that #290 is sufficiently tracking this issue, so I'm closing this one so we can consolidate the debug. Please re-open if that isn't true.\n. LGTM!\n. @kiliwalk Would you be able/willing to submit a PR with that change? Anything we could do to improve the CLI would be hugely appreciated! Otherwise, I will take a look at the superagent-proxy agent this weekend.\n. I'm going to close this issue for now since @kiliwalk's proxy contribution was just merged. Moving forward, we're going to be investigating distributing our servers to China and possibly optimizing the client-side upload process. Let us know if you run into any problems in the meantime. Thanks!\n. I just confirmed that the logic to clear CodePush updates on disk (in debug mode) when the app version is changed works correctly on both iOS and Android, so I'm not entirely sure how you would have got into this situation when deploying your app to the simulator.\n@johnwayner Out of curiosity, could you provide an example of the versions you were specifying before when releasing an app update to CodePush? I'd like to make sure we try to repro your exact situation, since I'd love to track down an issue if one exists :)\nThanks so much!\n. @johnwayner Thanks again for this feedback! We just published the fix to NPM. Please re-open this issue if you continue to experience this problem after upgrading, and let us know if you run into any other problems. Thanks!\n. @chetstone Apologies for the confusion here! The GitHub readme always reflects the state of master, which is periodically ahead of the bits on NPM. The website docs always reflect the public bits on NPM.  \nRegarding the disparity you're seeing, we recently deprecated the getCurrentPackage method in favor of getUpdateMetadata, but we haven't released it to NPM yet (I'll be doing that today). The getCurrentPackage method is still available, but you won't see getUpdateMetadata unless you install the CodePush SDK from GitHub or after upgrading to the release we'll publish this afternoon. We ran into a bug that we're trying to fix which is delaying the NPM release, so I apologize about the doc disparity.\nRegarding the NPM installation question, I believe that you need to specify the version number when running npm ls. If you run npm ls react-native do you get similar output? For me, the behavior you listed for CodePush is the same as trying to list any other NPM module if I omit the version. However, if I run npm ls react-native-code-push@1.10.1-beta, that should work. I believe that is just a behavior of the npm ls command, and isn't related to the CodePush package itself. I could be wrong though, so let me know what you see.\nThanks!\n. FYI, I just added the docs for getCurrentPackage to our GitHub readme, and simply marked is as deprecated in >=1.10.3-beta (which we'll release this afternoon). Sorry again for the confusion.\n. Ah I think there may be a bug with npm ls if the specified package's version has a pre-release tag. Since CodePush includes a -beta suffix, and in my case, I'm using an -rc version of React Native, neither one work correctly with npm ls. If I run npm ls on a non-RC version of React Native, or any other package, it works fine.\n. @chetstone The new SDK release has been published to NPM and includes the getUpdateMetadata method. As I mentioned, I believe the npm ls issue is related to package's whose version includes a pre-release tag, but please re-open this issue if you see any other issues. Thanks!\n. I'd vote to do the DEBUG check, but I'm cool either way. LGTM! Did you want to bump the version to 1.10.3 and I'll release it later this afternoon?\n. @kiliwalk One other thing to note is that when we download a partial update, we merge it with the content of the previous one locally, so when you look at the data directory and see all of the images there, that's why. All of those files weren't necessarily downloaded.\nIf you want, we could help verify that the server is generating diff updates for you if you'd like. Let us know!\n. @CaoLiang1991 Could you let us know which component you're using for navigation? That way we can try to repro this exact issue.\nAs an aside, in your case, you could simply call sync(), since the updateDialog parameter is false by default, and the installMode parameter defaults to ON_NEXT_RESTART.\n. @CaoLiang1991 I believe this issue may be related to the download progress events that we fire from our native plugin to JS. As @geof90 mentioned, the download itself happens on a background thread, but the download progress events that we fire to JS could potentially interrupt your app while it's trying to navigate.\nSince your app isn't even listening to download progress events when you call sync, it doesn't make any sense for these events to even be firing in the first place, so we're going to submit a fix this week to disable these events when an update is being downloaded which didn't request progress events. I'm guessing this should fix your situation.\nThanks for reporting this. Stay tuned!\n. @gmchaturvedi1 Could you take a look at the Chrome console or ADB logcat output when you call sync in your app? That should help shed some light on what may be happening. Also, our troubleshooting docs have some common issues and workarounds that could be worth double checking.\n. Could you try restarting the emulator? Sometimes, when you switch networks there can be connectivity issues. Restarting the emulator will resolve that, if that is in fact the issue.\n. What does the console output show after you try to install the update? Also, can you share how you're calling sync?\n. OK cool. After you install the update, and then kill and restart the app, you're not seeing the changes take affect? Could you try looking at the Chrome logs to see what may be going on?\n. Can you share what your MainActivity looks like? And also, can you try copying and pasting the logs of the app when trying to sync an update in the Google Play version? That should help us figure out what might be going on. You can't use Chrome with the release build, but you can use ADB via \"adb logcat *:S ReactNative:V ReactNativeJS:V\".\n. @gmchaturvedi1 Your MainActivity class needs to override the getJSBundleFile file in order for the React Native runtime to ask CodePush where to get the JS bundle from when the app starts. Refer to step #2 in the Android configuration docs.\njava\n@Override\nprotected String getJSBundleFile() {\n   return CodePush.getBundleUrl();\n}\nThis was likely working for you during development because the changes you were deploying to CodePush were also available locally, so when the app would restart, the packager would pick them up. This issue wouldn't be exclusive to the Google Play store, and should also repro in any release build.\n. Update your MainActivity file like so. Note that I simply added the getJSBundleFile override to the code that you pasted above. As I mentioned in my previous comment, you should be able to follow our conjuration steps and ensure that you've setup everything correctly.\n``` java\npublic class MainActivity extends ReactActivity {\n    /*\n     * Returns the name of the main component registered from JavaScript.\n     * This is used to schedule rendering of the component.\n     /\n    @Override\n    protected String getMainComponentName() {\n        return \"go4skillcom\";\n    }\n/**\n * Returns whether dev mode should be enabled.\n * This enables e.g. the dev menu.\n */\n@Override\nprotected boolean getUseDeveloperSupport() {\n    return BuildConfig.DEBUG;\n}\n\n@Override\n   protected String getJSBundleFile() {\n      return CodePush.getBundleUrl();\n   }\n/**\n * A list of packages used by the app. If the app uses additional views\n * or modules besides the default ones, add more packages here.\n */\n@Override\nprotected List<ReactPackage> getPackages() {\n    return Arrays.<ReactPackage>asList(\n        new MainReactPackage(),\n        new RealmReactPackage(),\n        new VectorIconsPackage(),\n        new CodePush(\"6fmr8pcJ2Ov51fm3at9_ioOn5TXEVy9szxs6g\", this,\n\nBuildConfig.DEBUG)\n        );\n    }\n}\n``\n. What do you mean it is getting corrupted? Maybe try uninstalling the app from the device/emulator, running./android/gradlew cleanDebug` to ensure you do a fresh build, and then re-trying?\n. We're more than happy to help! Thank you for spending the time to give CodePush a try :)\nAs you mentioned, when you update your React Native version, or add/update a module, you will need to upload a new APK to the App Store. CodePush can only be used for changes that touch JS and/or images, Java code.\nBTW, would you be able to share any details about your app? Is it live in the Google Play store already? I'd love to check it out. Thanks!\n. I'm going to close this for now since your issue has been resolved. Please let us know if you run into any other issues. Thanks again!\n. Hmm, interesting. @dhrrgn Could you paste an example of how you're calling sync? Also, is this crash happening when the app first starts and you call sync or after the app is resumed from the background?\nThanks for reporting this! We'll investigate it ASAP.\n. Ah OK, I think I might know what the issue is. Let me try to test out a fix and see if we can't get you unblocked ASAP. Apologies for this problem, and thanks so much for reporting it!\n. Also, do you only see this issue on the first launch after install (via the InitialLaunch component)? Or do you also see it via the resume/cold-start call to sync?\n. @dhrrgn We believe we have addressed this issue, and it has now been released to NPM. Could you update your plugin and let us know if that resolves it for you? Apologies again for the inconvenience.\n. Yay! Thanks so much for confirming this. We'll try to get the other issue resolve ASAP!\n. LGTM! \n. @jozan Thanks!\n. @dhrrgn Investigating right now. Are you able to repro this by any chance? Or do your crash reports indicate what the user was doing? (e.g. was this a fresh install? did they just update from the store) I can see where the NullPointerException would happen, but I'm not sure how the app would get into the state necessary to hit it.\nThanks so much for the extremely helpful stack! We'll try to get out a fix today.\n. @dhrrgn OK cool, that is helpful to know. Thanks so much and stay tuned for a fix.\n. Doh! I didn't mean for this to auto-close this bug. Either way, this has been resolved via the linked PR, and I'll release the update to NPM tonight. Thanks again for letting us know about this issue, and apologies for the two exceptions!\n. @ScandyMark If you're using RNPM to install CodePush, then we aren't involved in the build.gradle modification at all. I'm happy to help drive this issue getting resolved, but it would definitely be a bug with rpm-plugin-link as you suggested.\nOut of curiosity, is this an existing native Android app which you're embedding React Native views into? \n. Makes sense. Thanks for clarifying!\nYou can see the issue with rnpm-plugin-link here, since they simply look for the first dependencies { statement in the build.gradle file, and attempt to add the linked module to it.\n. @ScandyMark I just filed an issue with RNPM and am going to drive the fix from there. I'm going to close this issue from our repo, since it isn't a bug with our plugin. Let me know if you think that makes sense, and if not, feel free to re-open it :) Thanks for letting us know!\n. That's a completely fair point. I'll re-open it for now then, since I would prefer viability for our users over cleaning out bugs :)\n. @ScandyMark This has be resolved in RNPM 1.7.0. Thanks again for reporting this!\n. LGTM!\n. If you set the --sourcemap-output parameter to save your source map file inside of the ./CodePush folder (e.g. --sourcemap-output ./CodePush/sourcemap.map), then it would be included in the zipped update that is released to CodePush. That would also mean that your end users would download this file though. Is that the desired behavior?\n. I'm not actually sure if React Native's debugging support allows a source map to be located on disk, as opposed to being served by the packager. This kind of makes sense considering they only enable red/yellow box in dev mode, and they expect you to be using the packager in debug mode. \nCould you elaborate on the scenario you're trying to achieve? Are you wanting to release debug builds via CodePush and have yellow box display source mapped stacks?\n. @eugenehp I'm going to close this issue for now, since I'm not sure if it's actionable for us. I briefly looked into enabling inline sourcemaps from the release-react command, but it doesn't currently seem possible. If you had a scenario in mind that we could help address, please re-open this. Thanks again!\n. @eugenehp Sounds good. I look forward to seeing what you came up with :)\n. Looks beautiful! \n. @L-Jovi Could you try restarting the packager and also running rm -rf $TEMP/react-*? Additionally, did you recently upgrade you React Native version, without running react-native upgrade? If you remove CodePush from your project do you still get this error? It doesn't seem like a CodePush issue on the surface, but I'd love to try to determine if it is. \n. @kiliwalk Could you elaborate a little bit on this issue? Are you saying that CodePhsh has been working for you but now.access to it is being blocked in China?\n. Interesting. If I check the connectivity from China, it seems to work, but maybe the tests I'm running aren't reflective of reality. We'll investigate this ASAP!\n. It will be blocked in two days? Is there somewhere you were able to see that mentioned?\n. Phew! You had me worried man :) Thanks for the heads up. I really appreciate it.\n. @tomauty Is it the \"this release is identical to the existing one\" message that you're seeing? If so, that may be due to React Native packager caching issues. \nHave you tried using the new release-react command in the CodePush CLI? It will handle the bundling process for you and will also make sure to clear the packager cache (via rm -rf $TEMP/react-*) before hand. Using it, you could simply type code-push release-react MyApp ios -m -t \"*\" to achieve the same affect as your two scripts.\n. @tomauty OK thanks for clarifying. We'll investigate this issue since you definitely shouldn't be seeing it. In the meantime, are you unblocked? It's just a pain to have to release twice? (I just want to make sure I know the severity of the issue)\n. OK cool, thanks for this detail @tomauty. We'll let you know the findings of investigating this issue.\n. @tomauty Were you ever able to try out @geof90's suggestion? I'd like to try to resolve this, and we haven't been able to repro it :/ Thanks again and sorry for this annoyance.\n. @tomauty Ahh that makes a lot of sense! Thanks for confirming that. While you're re-working your process, I'd love any feedback on the release-react command if you decide to go with it. We're trying to improve it to be the simple solution for most apps. Thanks!\n. You can actually \"disable\" the version inference by explictly passing the \"--targetBinaryVersion\" flag when calling release-react.\n. @justim Interesting, we haven't seen an app be rejected for this purpose before. Is your app silently downloading the update and restarting on app start? If their issue is strictly that the content is synced with iCloud, we can definitely update the plugin to prevent this from happening.\n. @justim Yep that makes sense. It's odd that we haven't seen this rejection before, and I really apologize for the issue/inconvenience. We'll make a change to the plugin to prevent iCloud syncing right now and will get that out ASAP. Stay tuned!\n. @justim This has been resolved via #321. If you want, you can pull the update from GitHub directly. Otherwise, we'll be releasing to NPM shortly. Let us know if you run into any other issues, and once again, apologies for this inconvenience!\n. @justim We just release v1.10.6-beta to NPM which includes this fix, along with some perf improvements to the update download process. Let us know how that works out for you. Thanks!\n. Yay!! Thanks for confirming the fix worked for you. \nAny chance you could share details about the app? It's always exciting to see what folks are using CodePush for.\n. Awesome! Let me know if you guys are interested in having the app added to our showcase. Your feedback on this was extremely helpful to identity a key bug with the product, so I'd love to advertise your awesome work if you're interested.\n. @scottbommarito I wouldn't have sent out this PR if I hadn't :) Yes, in the app I was testing, I could clearly see ~1mb per CodePush update (we maintain at most 2 updates at any given time) being stored in iCloud before this change, and then after this change, there was no impact on iCloud storage after downloading CodePush updates.\n. The two most common reasons this can happen are:\n1. Your app isn't calling sync on startup (e.g. you're calling it in a button click or on resume), and you're also not calling notifyApplicationReady on startup. The CodePush runtime needs to be told that the update was considered successful in order to prevent it from rolling back. The sync method calls notifyApplicationReady, so as long as you're calling it on app start, then you're fine, but otherwise, you need to make sure you're calling notifyApplicationReady somewhere in your startup process (e.g. the componentDidMount of your root component).\n2. Your AppDelegate.m file is configured to get the JS bundle location from the binary instead of from CodePush. This prevents CodePush from choosing which update to run on app start.\nDo any of those match your app? If not, could you look at the console logs of your app? The sync method logs a bunch of diagnostic messages and it may help indicate what the issue is.\n. @L-Jovi Any luck trying either of those workarounds?\n. Awesome! Thanks for confirming.\n. @kemcake Thanks for submitting this PR! Could you elaborate a little bit on the scenario this is trying to enable? Are you using React Native for an app extension's UI and you want to use CodePush to load the JS Bundle for it in addition to the main app? \nDoes your JS bundle contain two registered app components, and you reference each one individually from either the AppDelegate.m or the extension's native code?\nWhile this PR enables the extension to load the containing app's JS bundle from the binary, are there any issues with the extension trying to load a CodePush update? Wouldn't the plugin need to be saving the downloaded updates to a shared location that both the main app and extension could access?\nBTW, I'm asking these questions out of pure ignorance, since I'm not very familiar with iOS app extensions :)\n. @kemcake Any chance you could provide a little more context here? I'd love to get your PR moving forward!\n. LGTM!\n. @ghalong Thanks for reporting this, and apologies for the issue. If you upgrade to the latest version of the plugin, the error handling will appropriately catch this issue, and will prevent your app from crashing.\nThat said, we'll definitely fix this bug, since our reload logic should be resilient to apps which aren't inheriting from ReactActivity, since that is a convention not a requirement.\nJust for our own understanding, could you share why you aren't using ReactActivity? The code in your onCreate method seems to duplicate exactly what ReactActivity does for you, so I'd be curious to know what your use case is. Thanks!\n. @ghalong We just submitted a fix for this and will release it to NPM in the next day or so. You can either upgrade your bits from GitHub, or as I mentioned above, if you upgrade to the latest version on NPM, it will already include the improved error handling that will prevent this crash from happening. Thanks again for reporting this!\n. @ghalong Awesome, thanks for confirming. We made this fix anyways, but I would definitely recommend using ReactActivity if possible.\n. @morgondag Thanks for reporting this! We definitely need to make this work on environments with case-sensitive file systems. We can get a fix for that out quick. In the meantime, you can work around this issue by explicitly passing the \"--targetBinaryVersion\" parameter to the release-react command. The CLI reads your app version from the plist file automatically, so if you give it an explicit version, then it won't try to read that file.\n. @morgondag We just submitted a fix for this and will release it to NPM this afternoon. In the meantime, the workaround that I mentioned should get you unblocked. Please re-open this issue if you are still running into issues. Thanks!\n. Apologies! We haven't released this fix to NPM yet. We'll be doing that today. In the meantime, if you set the \"targetBinaryVersion\" flag to bundle short string value in your Info.plist (e.g. 1.2.2), you won't get this error.\n. In the CLI example you posted in your previous comment, you passed the \"--targetBinaryVersion\" flag to the release-react command, but you didn't specify the value (e.g. '--targetBinaryVersion \"1.0.0\"'. If you change that to pass the version number from your Info.plist file, it will work. This is because the release-react command only attempts to read your Info.plist file in order to infer your target binary version, and therefore, if you explicitly set it, then it doesn't need to read the Info.plist file at all.\n. LGTM!\n. [Code reviewing from the plane from Dallas to Tampa]\nThis change looks really good! I just had a couple of thoughts:\n1. Do we need to implement retry logic for the download status report? Presumably, that could fail for some reason, and if we didn't retry it later, then we wouldn't be accurately reflecting the current number of pending installs. Maybe this isn't as big of a deal, but for apps using a restart-based install, it's possible that there could be users with pending installs for hours/days, that we wouldn't be displaying in the CLI until the app is restarted and the successful install report is made. Attempting to retry it on app resume might help the data remain mostly fresh. I'm also not sure what kind of negative impact there would be if the successful install count was greater than the download count for a specific update.\n2. Is it sufficient to only save a single status report for retry? Is it possible to get into a situation where multiple status reports fail and we only retry the last one, and therefore, get into a situation where the data is \"corrupted\"? Since we're trying to improve the reliability of this feature, I just wanted to toss out this scenario and see if it's something we need to consider.\n. Sounds good, thanks a lot for confirming this.\n. We just removed this log message since it was falsely reporting an error. Apologies for the confusion!\n. @CoderZZheng Did this resolve your issue? We aren't able to repro it on our end, so it would be great to make sure you're unblocked.\n. I'm going to close this issue since as @geof90 mentioned, this appears to be a result of your native code being out of sync with the JS code in your app. Please reopen this if the problem persists. Thanks!\n. @wrlqwe Would it be helpful if we updated our podspec to include a subspec that exclude these? That way, you wouldn't need the post-install script. You would simply need to update your pod file to depend on the \"no-SSZipArchive\" version of CodePush.\n. @wrlqwe Regardless if you keep your private script, I wanted to take this opportunity to improve this situation for future users. Could you take a quick look at #348 and see if that looks reasonable? Thanks!\n. @wrlqwe The reason we aren't using CocoaPods to manage our SSZipArchive dependency is so that React Native users who aren't using CocoaPods don't need to run pod install after NPM-installing CodePush. I suppose we could make that an NPM post-install script, but then we'd still have a dependency on CocoaPods. I like that CodePush is fully self-contained for most of our users.\nThat said, if someone is directly using CocoaPods, then it definitely makes sense that we allow linking with CodePush without SSZipArchive included.\n. I'm going to close this via #348. It sounds like you're unblocked via your own scripts, but let us know if you run into any other problems or if the pod spec change doesn't suit your needs. Thanks!\n. @LeBlaaanc It's possible that this is related to issue #345. Could you let us know which version of React Native you're currently using? It seems like the bundler broke our current heuristic for detecting if the binary-contained contents are the same as an update in CodePush. Thanks!\n. @LeBlaaanc When an app calls sync, the server will attempt to find the latest update that the client is eligible for, and it isn't already running. Therefore, when you release a new update that targets a newer binary version, users on older versions will continue to get updates they hadn't already synchronized with. Additionally, you could even release a new CodePush update that targets the older binary version, and that wouldn't impact the users on the newer binary version, since the server would \"skip\" over that release for clients that weren't eligible for it.\n. @LeBlaaanc Is the outstanding issue here that your users are getting the app from HockeyApp and then downloading a CodePush update that is already equivalent to what they have in the binary? If so, I think this issue is potentially a dupe of either #352 and/or #345, since we now know that React Native broke our plugin's ability to hash the binary contents and determine equivalence with the CodePush server, and that it's possible for two difference machines (e.g. multiple CI builds) to release the exact same update to CodePush without them being treated equivalentely.\nI just want to make sure we're investigating this issue if it's outstanding, or if we can close it in favor of one of the other two and focus on fixing those core issues. Thanks!\n. @LeBlaaanc Perfect, thanks so much!\n. Closing as a duplicate of #349.\n. LGTM!\n. LGTM!\n. Thanks BTW for this awesome and thorough PR :) Before commenting any further, I want to spend a little time tomorrow playing around with this implementation to see how it \"feels\". \nCould you also share a little bit of code from the app you're working on (maybe a Gist?), to help me understand exactly how you're using this? For example, are you calling disallowRestart at the beginning of an \"onboarding\" flow and then calling allowRestart when the end user finishes it? Where is your call to sync at? In a different component?\nThanks so much!\n. @dbasedow Makes sense, thanks a lot for providing that detail. How are you currently using restartAllowed?\n. I wonder whether we can add the appropriate logging to the restartApp, disallowRestart and allowRestart methods, and ensure that restartApp resolves/rejects it's returned promise/etc. to assist in debugging, and remove the restartAllowed method.\nFor the sample, we can always have our own app-specific state that determines whether restarts are allowed or not for display purposes. I somewhat hesitate to add any new APIs to the module unless we have a clear reason to.\n. LGTM! Thanks a lot for this contribution. I really really like this feature :)\n. @dbasedow Even though it would be pretty trivial for folks to create themselves, I wonder whether it wouldn't be cool to create a standard container component that handles the mount/dismount logic of disallowing/allowing restarts in a declarative way. That way, you wouldn't even need to use these new APIs directly, you just wrap your component(s) in a <codePush.RestartBarrier> (crappy name for example only) and let it handle the details for you.\n. If you remove that flag from the Xcode build script does this feature suddenly work?\n. I'm marking this as external now that we now it's an issue with React Native/node-haste. It looks like they may fix it, so we can use this bug to track it.\n. Closing this is a dupe of #352, since we'll track both scenarios via the same root problem.\n. @wrlqwe The primary reason we haven't used spec.dependency up to this point is so that the CodePush NPM package is entirely self-contained and doesn't require CocoaPods to resolve any dependencies. I'd prefer to leave it this way for now, since most of our users aren't using CocoaPods are part of their dev workflow.\nMaybe I'm missing something, since I'm by no means a CocoaPods expert, so I'd love to know if we can achieve a simple experience for both CocoaPods and non-CocoaPods users other than what we're doing.\n. @wrlqwe OK cool :) Would this fix allow you and your team to remove your post-install NPM scripts and use CodePush?\n. @hanleirx Is this the same issue as #339? It would be great if you could share the details about how your app is currently configured. \n. What if you type \"code-push deployment h renewanother Staging\"? Unless you created a deployment named \"XXX\", that wouldn't exist for you to view history on. \nCan you verify that you have configured your deployment key correctly either in your Info.plist (for iOS) or your main activity file (for Android)? \n. When you call the release command without specifying a deployment, it will default to releasing to \"Staging\". If you run \"code-push deployment h renewanother Staging\" you'll see your releases.\nAlso, could you try using the release-react command instead? Instead of running react-native bundle and then code-push release, just run \"code-push release-react renewanother ios\".\nWhich deployment key did you add to your app itself? It's important that the deployment you are releasing to is the same one that your app is configured with.\n. You need to ensure that the \"CodePushDeploymentKey\" entry in your Info.plist file is set to the key of your staging deployment. Note that this value shouldn't be \"Staging\". It needs to be the value that you see in the \"Deployment Key\" column when you run the \"code-push deployment ls renewanother -k\" command.\n. Ah right that might explain it :) one thing that can be helpful is to look at the debug logs for your app. The CodePush plugin logs the status of the syncing process, so you can tell when the download has completed and you can safely restart.\nI'm going to close this issue for now since you figured out the problem. Sorry for the confusion, and let us know if you hit anything else.\n. The client will only download files which have changed, but we don't currently support syncing just a subset of a single file. So if you release an update that only changed JS and not images, then the next time your app syncs with the server, it would download the entire JS bundle file but not the images.\n. If you release an update that changed th JS bundle, then your users will re-download the entire JS bundle. But they won't download any files which didn't change (like images).\n. OK cool, I'll close this issue for now then.\n. @LeBlaaanc Hmm, the server should be rejecting duplicate releases, so if you're not seeing that behavior, that is a bug we need to investigate. \n. @LeBlaaanc If you run code-push release-react locally, on the exact same codebase, without making any changes, do you see the subsequent releases get rejected by the server? Or does this only happen in your CI environment?\n. I'm wondering if this is the same issue as #345, since the two individual CI environments would likely generate subtely different JS bundles, and therefore, result in duplicate releases.\n. @alexprice91 That solution could work as a workaround, but ideally our plugin would be able to detect updates that are equivalent to the binary contents. We had this feature working for a while, but it was unfortunately regressed in React Native 0.26.0, so we're working with them to get it working again. \n. @LeBlaaanc My assumption as of a week ago was that if multiple machines generated a JS bundle from the same code base, that the resulting bundle files would have identical contents. It turns out that assumption was false, and unfortunately, if releases are made to CodePush from multiple machines (e.g. the same dev with different workstations, multiple devs on the team, or different CI build agents), then it becomes possible for the same release to actually be accepted multiple times, because from CodePush's point of view, they are different.\nThe reason I mentioned the binary hashing scenario is that I believe it is broken due to the same reason why the release command isn't rejecting an update that is \"identical\" to the latest one on the source deployment: because what we thought should be identical JS bundles turn out not to be. \nMy hope is that once React Native / node-haste fixes the bundling process to be deterministic, then my aforementioned assumption becomes true and we gain various benefits as a result. There is still the possibility of two releases being allowed from CI due to some concurrency issues (I.e. the second release is made before the first is complete), but we can discuss that seperately, if it is in fact a common problem in practice. \n. @LeBlaaanc Here is the discussion we started with the RN folks, where they indicated they will investigate solving the root cause of this issue: https://github.com/facebook/react-native/pull/7758.\n. @kennethlynne Is it crashing your build, or simply failing it? When the CLI rejects a duplicate release, it should just be returning with an error code, not actually crashing the process.\nWhat would be your ideal behavior here? The duplicate rejection behavior is currently by design to prevent accidentally releasing the same thing multiple times. Do you want the CLI to allow duplicate releases?\n. @kennethlynne We could do that, but in the meantime, most CI servers have a way to configure that certain build steps shouldn't fail the entire build if they fail. Which CI solution are you using? For example, Bitrise lets you specify the is_skippable: true setting on a specific step.\n. @LeBlaaanc It's interesting that @kennethlynne would see his releases get rejected due to be equivalent to the latest release, however you aren't, despite the fact that you're both using Bitrise :)\n. @LeBlaaanc I haven't had a chance to test it yet, but it appears that this issue has been resolved in the master branch of React Native. If so, that means it should hopefully be released in 0.29. I'll test it later to confirm, but I just wanted to give you the heads up in case you were also interested in trying the bleeding edge RN bits :)\n. @LeBlaaanc Just to confirm: this issue is in fact solved in RN 0.29, and I just checked in a fix on our end for iOS (yay!). We'll send out a PR to address the Android side of things, along with a few other fix we need to make to address some additional RN 0.29 breaking changes. Thanks for the patience here.\n. The fix for this has now been shipped to NPM. As mentioned, it unfortunately requires RN 0.29, but once you install that, and the latest CodePush, this feature will work properly. Thanks for the patience and let us know if you run into any issues.\n. @nicinabox Ah, yeah our logic that tries to infer the app version isn't currently smart enough to parse this. One way to work around it in the meantime is to explicitly pass the -t \"2.8.4\" flag to your call to release-react. That will prevent the release-react command from trying to parse the Gradle file in the first place.\n. Awesome :) I'm going to leave this bug open to track us adding support for reading the gradle.properties file in the event that a build.gradle is referencing a project property as its versionName. My previous comment will help unblock you in the meantime, but I want this scenario to just work. Thanks for the feedback!\n. @nicinabox FYI, I just sent out a PR that addresses this scenario and will allow you to start releasing Android updates to CodePush without needing to explicitly set the target binary version.\n. This has been resolved and will be included in our next CLI release tomorrow. Thanks again for the feedback!\n. This has been released to NPM, so once you upgrade, you should be good to go :)\n. I'm going to close this issue for now since I think your question was answered. Let us know if you have any other questions or run into other issues. Thanks!\n. Thanks!\n. @niksinfinite10 Did you use RNPM to install the CodePush plugin? We don't generate any code in your MainActivity.java file that references the R class, so this typo sounds like a bug with rnpm-plugin-link. I can take a look into this and potentially file a bug with them.\n. I confirmed that this behavior is coming from RNPM, and I logged a bug to track it. Thanks for letting us know!\n. This was just resolved by the RNPM team, so I'm going to resolve this.\n. That is referring to the version of this plugin (\"react-native-code-push\"), not the \"code-push\" NPM package. If you check out the release notes for v1.9.0, you'll see that it includes the client side support for rollout.\n. I'm going to close this issue, but if you're experiencing an issue with rollout, and/or you think we can make our docs more clear, please re-open it and let us know. Thanks!\n. I can update the docs to be more clear, apologies about that. In general, we use the term \"CodePush SDK\" to refer to the platform-specific client plugin. The \"code-push\" NPM package is referred to as our \"Management SDK\" and unless you're scripting a Node build script, isn't directly relevant to most users.\nWith rollout, it's important to keep in mind that it works by breaking up all possible devices into groups (aka \"cohorts\") and then only allowing users in the specified percentage group to get it. Specifying a 20% rollout isn't saying that 1 in 5 users will necessarily get it. It's saying that users whose device ID falls within the 20% range will get it, and no one else will. Therefore, when testing it with single digits, the results could have a decent degree of error. As opposed to having 50+ users, where it becomes more accurate due to the randomness of the user's device IDs.\n. Anytime! I also tweaked our docs to remove the term \"CodePush SDK\", that way it hopefully doesn't seem overly confusing. Let me know if you think it could be clearer, and feel free to send a PR if you have any suggestions. Thanks again!\n. @codyhazelwood Hmm, interesting. The dev vs. release differences that our plugin has shouldn't impact you in this way. Could you confirm that your App Store build is configured with the right deployment key and/or that you're releasing updates to the right deployment? You can run \"code-push deployment ls APP_NAME -k\" to compare the keys with the one you configured with your app. Additionally, you can run \"code-push deployment h APP_NAME DEPLOYMENT\" to confirm that your release was made to the expected deployment. \nWe'll try to figure out this issue ASAP. Apologies for the inconvenience!\n. @codyhazelwood OK so if you're seeing rollbacks, then that seemingly proves that the update is being downloaded and installed after all, so the deployment key wouldn't be an issue, an that rules out a few other possible issues.\nThe most common reason for local rollbacks are: \n1. An app isn't calling notifyAppReady (or sync, which calls notifyAppReady) on app start, and therefore, after an update is installed, the CodePush plugin thinks it failed and rolls in back. In your case, you're calling sync on start, so that isn't an issue. Plus, you would have definitely seen that problem when doing local debugging\n2. The update is crashing for some reason. Could you confirm that you are releasing an iOS build, using the exact same React Native version to your CodePush production deployment? For example, if you accidentally released an Android build to a deployment being used by iOS, that would lead to a crash, or if you're App Store binary was build with React Native 0.25 but you're using RN 0.26 locally.\nRegarding the logs, the best things to check would be your crash reporting service (e.g. HockeyApp, Crashlytics) to see if you had any crashes in the wild. Regarding the logs, the sync method outputs a bunch of logs, but React Native \"disables\" them in release builds by default. Did you already try testing a release build locally? If not, that would likely be worth trying, and you can enable logs by following the instructions here. We haven't seen any issues specifically with apps distributed via a store, but it's possible that there is an issue with a release build.\n. @magrinj Do either of my suggestions above match your scenario? The update won't rollback as long as it doesn't include a crash (obviously :)), and your app is calling sync or notifyAppReady on app start to notify the CodePush runtime that the update should be considered successful.\n. Also, can you confirm that the update you are releasing is using the exact same version of React Native (and any custom plugins) as the binary you are releasing to? If there is a mismatch, then that could lead to a crash and the update would rollback.\n. You need to make sure that you call either _codePushSync or codePush.notifyApplicationReady in your componentDidMount event handler. Those being called is how the CodePush plugin sees the update as having been successful. With the way you are calling sync now, after an update is installed, if the app is killed (by the user or OS) before the end user ever resumes it from the background, the update won't be marked as successful and will be rolled back on the next cold start.\nI would recommend just calling _codePushSync directly in your componentDidMount method (in addition to calling it in your app state change handler), since that will resolve this problem, and also have the benefit of not waiting until a resume to check for updates after the app is cold started.\n. Awesome! I'll update our docs to make this clearer. Apologies for the confusion!\n. @AwesomeJerry We actually fixed this issue in v1.11.0 of the CodePush CLI. Could you check if you're already running that version? If not, you should be able to update to the latest on NPM and be good to go. Otherwise, we can investigate why you're still hitting this problem.\n. Awesome! Thanks for confirming this.\n. That is really bizarre! Are you seeing this on both Android and iOS?\n. @cnjsstong Are you still hitting this issue? I'd love to make sure you're unblocked, and would love to get a little more details so we can try to repro the problem. Can you share the code you are using to call sync? Thanks!\n. @cnjsstong We sent out a PR to prevent the call to sync from hanging like this, however, it doesn't address the root cause of why you're hitting this issue in the first place.\nAfter the fix in #368 is merged, you would see the DOWNLOADING_PACKAGE status, and then the Promise returned by sync would resolve with UNKNOWN_ERROR (the call was hanging due to an exception being thrown when the update is downloading). That said, you want the sync call to actually succeed, so we need to understand what's going on.\nIf you could let us know if you're experiencing this problem on iOS or Android, what version of React Native you're using, and what other RN plugins your app has installed, that would be hugely helpful to try to get a repro. Thanks!\n. I'm going to close this for now since we can't unfortunately repro it, and we resolved the hang. If you experienced any instances where calling sync results in an exception, please let us know, and we can investigate the issue further. Thanks!\n. Thanks for the fix!\n. I'm going to close this PR for now since I think the better solution here is to send a PR to react-native-sound and other components to ensure they support the RN assets system, as opposed to allowing CodePush to \"virtualize\" assets on its own.\n. @nevir That's an awesome idea :) We'll definitely have to do an investigation into what this would look like. In lieu on RN improving their background task story, we also have quite a few users embedding RN into existing native apps, and have asked to be able to do the install in the background so as to mitigate the restart flash.\n. @nevir I had a few free minutes today, and threw together a prototype of this feature. In addition to adding the new install mode, it also supports the existing minimumBackgroundDuration setting, that way you can do either of the following:\n``` javascript\n// Restart the app as soon as the app is put into the background,\n// instead of waiting for it to be resumed to the foreground\ncodePush.sync({ installMode: codePush.InstallMode.ON_NEXT_SUSPEND });\n// Restart the app while it is in the background, but only after it has\n// been in the background for 2 minutes, so that user context isn't\n// lost unless the app suspension is long enough to not matter\ncodePush.sync({ \n    installMode: codePush.InstallMode.ON_NEXT_SUSPEND,\n    minimumBackgroundDuration: 2 * 60\n});\n```\nDoes that match the use cases you had in mind? It definitely is a pretty awesome experience. I need to test it out a little more thoroughly before I want to send our a PR, but I was just curious if this was in-line with your thoughts.\n. @nevir Yep this would work with LocalPackage.install as well!\n. Interesting. I didn't realize we had an issue here :) Thanks for submitting this fix. It looks great, si let me just do some smoke testing and we can get it merged in.\n. LGTM! I'll wait for @geof90 to take a look and merge it in. Thanks again for this fix.\n. @mikedouglas We just released this fix to NPM. Thanks so much for the contribution.\n. LGTM!\n. @nevir This looks great! I really like your change to move the SSZipArchive dependency to its own subspec.\nNow that I see your change, I wonder whether we shouldn't rename the NoZip sub-spec to Core and then remove the Full subspec as well as the default_subspec setting. That way, depending on just CodePush gets you our bits + SSZipArchive, and if you didn't need/want SSZipArchive, you just depend on CodePush/Core, which seems cleaner than CodePush/NoZip and allows us to further simplify our Podspec.\nThoughts? You don't need to make that change, but I'd love to get your feedback :)\n. @nevir If we don't specify a default_subspec, is the default behavior to include all subspecs? If so, I wonder if we could remove that setting as well as the Full sub spec entirely, since they may be redundant.\n. Beautiful! I love this change. Thanks so much dude :)\n. @nevir Just released this fix to NPM. Thanks again for the contribution!\n. Thanks for catching this!\n. LGTM!\n. Yeah you're totally right. To keep things simple, I wrote the multi-deployment doc using the standard debug and release configurations within the Xcode project, but in practice, you would likely want to create a new configuration called \"Staging\" (or similar) that would allow you to configure it seperately from your actual local debugging environment. \nApologies for the confusion. I'll update the docs later this morning to call this out. The AppDelegate.m code sample will remain the same, but the multi-deployment setup will just include a few more steps to create the staging configuration, and then instructions on how to build the app using the newly created staging configuration.\nThanks so much for the feedback!\n. Perfect. I'll send out the PR with the changes this afternoon and will CC you on it to get feedback before we merge it in.\n. Just updated the docs to include mention of how to create a new Staging configuration. Let me know what you think.\n. I'm going to close this for now, but please re-open it or comment if you feel like we need to add more detail to the docs. Thanks again for the feedback and sorry for the confusion!\n. This is definitely something we want to enable very soon. Thanks for filing this, since we'll use it to track the feature and increase the priority :) The description solution would be my recommendation in the meantime as well, but I'd like to make this scenario a little more first-class.\n. @nevir OK great, thanks for letting us know that. That's really helpful for prioritization.\n. Interesting. I can see from the stack why this exception could occur, but I'm not sure how to get into a state where it would be possible.\nWas this a release or debug build? Was your AppDelegate.m configured to get the JS bundle location from CodePush or from the packager?\n. Any chance you can recall the sequence of steps you took that led to this issue? Did you deploy a production build to the simulator, then install a CodePush update and then hit this issue? Did you re-deploy a binary update between the time you installed the update and restarted the app to apply it? \n. @nevir Have you seen this issue occur again? I believe it is actually related to #378, and therefore, if we fix the root cause there, where calling install twice on the same update can get an app into a bad state, then it should prevent this from happening as well.\nWithout a reliable repro (which we haven't been able to get), we can't say for sure, but I'm fairly confident that the double install bug leads to general state corruption of the CodePush plugin, and preventing it should prevent numerous resulting bugs such as this.\n. OK cool. I'm going to close this as resolved via #407 then, but please re-open this if you see it happen. Thanks again!\n. Thanks for the contribution! Looks good to me :)\n. We can look into this ASAP to make sure you're unblocked. Just to make sure we can repro this, can you share where in your app you're calling the code snippet you previously posted, and where you're calling notifyApplicationReady? Or does it matter?\n. OK perfect, thanks so much for providing this snippet. I'll try to repro this, but in parallel, I wonder whether you couldn't replace the call to getUpdateMetadata and LocalPackage.install with codePush.restartApp(true). I believe that would achieve the experience you want (force an immediate restart if the update was downloaded within a certain threshold), and may workaround a bug we have with the LocalPackage.install method.\n. My same comment applies to your new snippet :) I think you could simplify your thencallback via the suggestion I mentioned previously, and that may also resolve this issue.\n. Yay! That is the solution I would actually recommend, so if you're cool with that code, then that should unblock you, and we can investigate this bug in parallel.\n. Yeah that solution would make sense. I think that's how we'll actually resolve this.\n. This looks great to me as well. We really appreciate all the recent contributions @nevir!\n. @nevir This has now been shipped to NPM via the 1.13.0-beta release of this plugin. Thanks again for your contribution!\n. Looks great! \n. Ah that would explain it. This is why I was asking on Discord if you could check if your key was for your Android app, since this error indicates that the update it's syncing doesn't appear to be a \"valid\" iOS application. I apologize for not specifically asking to check both your plist and call to sync.\nI agree we could improve the message. For the most part, it is attempting to shed light on the fact that you released a JS bundle with a different name than your binary did, which we don't allow. Up until now, that is the primary error case. We have lots of users dynamically specifying their deployment key when calling sync, but I'd love to understand how we could improve the product/docs based on what your expectations were here.\nI just reviewed our docs and they seem to explain fairly well that the key you pass to sync overwrites the one in your plist. Were you expecting both keys to be used, and possibly have their content merged? How were you actually releasing the updates of the shared code? When you showed the screenshots of your release command, it definitely looked like a \"valid\" release, so I'm guessing you shared the screenshot of your iOS app deployment and we never discussed the shared code deployment?\n. Makes sense. Thanks for that detail! I'll send a PR with an improved error message when I get into the office and will ping you for feedback. Sorry again for the confusion. I really want our diagnostic logs to be helpful, so I'll try to take advantage of this awesome feedback :)\n. This error message has been improved to call out the need to verify your configured deployment. Apologies again for the confusion. Let us know if you have any further feedback or questions. Thanks!\n. Thanks so much for this fix!\n. Would calling getUpdateMetadata(UpdateState.PENDING) satisfy your requirements? A \"pending\" update is one that has been downloaded but not yet installed, which sounds like what you're looking for. It's possible that our docs explain UpdatetState.PENDING poorly, so either we can improve them if the current behavior fits your needs, or we can definitely make sure to add the necessary new state for this scenario. Thanks!\n. @cameronbourke Are you explicitly calling remotePackage.download and not installing the update until some later point, or are you calling sync? If the later, then the update is always being \"installed\", but the restart won't happen until the point that you specify via the InstallMode (e.g. resume).\n. @cameronbourke We actually add an isPending property to the localPackage after it's installed, so assuming that you have a reference to the package so that you can install it, you could potentially use the localPackage.isPending property to check whether the local package that you've downloaded is pending (install was called on it) or not. Would that work? In your case, checking !localPackage.isPending should be equivalent to the proposed enhancement to getUpdateMetadata.\nSince this proposal woundn't benefit sync, I'd love to figure out if we can accommodate this need via the \"advanced mode APIs\", since the app is likely needing to maintain some of its own state anyways.\n. BTW, is this to support your react-native-cp-update-button component? If so, maybe I could take a look at it better to understanding your needs. As an aside, we should figure out how to incorporate that into our docs so that it gets the deserved visibility. Thanks so much for creating it :) it's been on our backlog to create some UI components, so it's unbelievably awesome to have this contribution.\nI think there may be some other improvements we can help with. For example, you could use the non-document getConfiguration method to retrieve the app's binary versio automatically, so that your AppVersion component doesn't need to ask the dev to specify it. Additionally, it may be cool to display the binary version + CodePush update label if the dev didn't specify a JSON string as the description value.\n. LGTM!\n. LGTM!\n. Do you get this error when the app is restarted after installing a CodePush update? What about running the app before any CodePush updates have been installed? Does it work fine, even though you've configured the app to pull the JS bundle location from CodePush?\n. Hmm, everything is working great for me using RN 0.28 RC. Are you running the RN bits from master? If so, it's possible that there was a breaking change that we haven't seen yet.\n. Awesome, thanks so much for confirming that. Yeah, I actually just noticed that commit earlier and also noticed your comment :) We'll definitely need to figure out how to respond to that change, since we currently require a reference to the Activity.\n. @chirag04 We're making that change right now :) We should have an RN 0.29 compatible release out by early next week.\n. If you change your import to \"const CodePush = require('react-native-code-push')\" does the error go away and everything work? \nWe ship our d.ts with our NPM package, and our package.json references it, so I'd expect this to just work, but maybe the version of TS you're using doesn't support it? \nWhat version of TS are you using? I can try to repro this and see how can help resolve this error.\n. OK, thanks for confirming that. I'll look into why TS isn't auto-detecting our module definition in order to allow import statements. Stay tuned!\n. @calclavia Could you share your tsconfig.json file contents? Specifically, I'm curious if you have the compilerOptions.noResolve property set to true. I found that if I had that property set, then I ran into the same issue as you, but if I didn't, then everything would work great.\n. @calclavia It seems like the culprit is the fact that you're targetting ES6. If I use your exact config, I can repro the issue. However, if I change the target setting to es5, everything works correctly.\nIn your case, I'm sure you want to emit ES6, so another option that I noticed works is to change the moduleResolution property to node. Could you try that out and see if it makes a difference for you?\n. I confirmed with the TypeScript team that setting the moduleResolution property to node is the right solution here. The issue is that our NPM module ships with a d.ts file, but when you set the target compiler option to es6, that is apparently disabling the module resolution logic which will look for d.ts files within the node_modules folder. Explicitly setting moduleResolution to node \"re-enables\" the behavior that looks within the node_modules folder, and everything should work, using either require or ES6 imports. Let me know what you think.\n. @calclavia I can definitely add this to our readme. Have you been able to load all other NPM modules using ES6 import statements? This issue seems like a general TypeScript thing, and I'd love to know if you had examples of other NPM modules that were working for you, so we could see if there's an issue with CodePush. \n. I'm going to close this issue for now, but I'll make sure to update our docs tomorrow with TS info related to this issue in case others run into it. Thanks again for the feedback!\n. @calclavia FYI, I just added a section to our docs about this: https://github.com/Microsoft/react-native-code-push/blob/master/README.md#typescript-consumption\nLet me know if you think we can improve this any further. Thanks again!\n. @imalbert What version of RNPM are you running? The code you mentioned is actually generated by RNPM, not our plugin, so if there's a bug in it, I can follow up with them to get it looked at.\n. Ah right, my bad. I just fixed this. Thanks so much for the feedback here!\n. Yep! Just fixed it. Thanks a lot for the feedback.\n. After thinking about this again, I wonder whether the simplest thing to do here is to simply update our docs to call out the following for RN v0.29.0+ apps:\n``` javascript\nNSURL *jsCodeLocation;\nifdef DEBUG\njsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index.ios\" fallbackResource:nil];\n\nelse\njsCodeLocation = [CodePush bundleURL];\n\nendif\n```\nThe only thing that is \"odd\" about that, is that the RCTBundleURLProvider will also return the path to the binary if the packager isn't running. So if the app was in debug-mode, but the dev had for some reason stopped the packager, the app would use the binary-bundled bits, which isn't necessarily obvious. I think it's fine for now though.\n. The fix for this has been merged into master, so if anyone wants, you can install the bits from there. Additionally, we'll release this to NPM later this afternoon. Thanks!\n. The getUpdateMetadata method will only ever return information about a CodePush update, not the binary. Therefore, it will return null if you aren't currently running a CodePush update (or if there isn't a pending update, depending on what UpdateState you specify).\nAre you seeing different behavior? Or are you requesting that it returns information about the binary if the user is running the binary-bundled content, as opposed to a CodePush update?\nApologies if I'm misunderstanding you. We haven't heard any issues with the getUpdateMetdata method, so we'll definitely try to figure out how to unblock you here.\n. @avishayil What do you think about us adding a new method called getAppVersion (or something similar) that would return the version of the binary, with the running CodePush label appended to it (if applicable)? This way you could simply call this method and use the return type in all circumstances?\n``` javascript\n// This would return \"1.0.0\" if the app is running the binary, and\n// \"1.0.0.1\", \"1.0.0.2\", etc. if the app was running a CodePush update\nconst version = await codePush.getAppVersion();\n// Same behavior as above, but would concat the binary version and\n// CodePush update with a hyphen instead of a period (e.g. \"1.0.0-1\").\nconst version = await codePush.getAppVersion(\"-\");\n```\nIf possible, I'd prefer to keep the behavior of getUpdateMetadata as it is, as opposed to trying to overload it to expose binary information as well.\nIf the above solution looks interesting to you, you could actually implement it on your end in the meantime (or customize it), since we already have a method (that isn't documented) to get the app's binary version:\n``` javascript\nasync function getAppVersion(seperator = \".\") {\n  const [{appVersion}, update] = await Promise.all([\n    CodePush.getConfiguration(),\n    CodePush.getUpdateMetadata()\n  ]);\nif (!update) {\n    return appVersion;\n  }\nconst label = update.label.substring(1);\n  return ${appVersion}${seperator}${label};\n};\n``\n. @avishayil Did that proposed solution end up working for you? We'd like to add this capability to the core plugin, and it would be great to get your feedback on how well it worked.\n. @vanBrunneren That's really odd that you're experiencing this. Apologies! We have a lot of users that distribute via TestFlight, and I'm not aware of anything that would be different between a local or TestFlight distribution. Just to confirm, are you literally calling justcodePush.sync()in your main component, or are you passing in parameters to thesync` call? I just want to be able to identify your exact repro case.\nAdditionally, can you share your AppDelegate.m contents that configure your JS bundle location? I just want to rule out any potential config issues (unlikely but possible). Could you also share how you are releasing your updates? Are you flagging them as mandatory? Assuming you're simply calling codePush.sync(), the only reason the app would programmatically restart (and potentially lead to the white screen) is if the update was marked as mandatory. If you're not releasing updates as mandatory, but you're seeing this behavior, then that might be cause for another issue.\nAlso, just to confirm. You mentioned that the app rolls back. After the crash happens, and you re-open the app, it had successfully returned back to the binary version? I just want to double-check that the rollback feature is working correctly here.\nWe'll try to figure this out and get you unblocked ASAP.\n. @vanBrunneren That is very useful! Would you be able to view the \"more details\" view of that crash and paste in the JS stack? There should hopefully be more information about the exception. I can see where in RN that exception is occuring, but it would be extremely useful if we had a rough indication of why it happened.\n. That's interesting. Your first exception seemed to be caused by this line, but the second seemed to be caused by this line. In order for the second one to occur, presumably there would need to have been some kind of race condition.\nCould you let us know which version of React Native you're running, as well as which other 3rd party modules you have installed? I'm wondering if there is a bug/incompatibility with our plugin somewhere.\n. @vanBrunneren Any updates? After investigating, we haven't been able to repro this unfortunately. As @geof90 mentioned, it seems like this bug has been associated with native modules that haven't been properly installed. That is why many people mention running rnpm link solves it.\nIn your case, since you said everything works locally, but then breaks in TestFlight, I'm wondering whether there is something different happening in your build between the two environments. Can you confirm that you're using the same release/build steps in both cases?\n. @vanBrunneren Totally understood that getting your release out is the highest priority. That sucks that we weren't able to work out-of-the-box for your app, but please do reach out in the future if you try CodePush again. With the somewhat volatile nature of the React Native ecosystem right now, we're doing our best to improve interop with other 3rd party plugins, but we occasionally discover entirely new issues that we hadn't predicted/encountered before. Thanks again for reaching out!\n. Good catch! This LGTM, thanks for the contribution :)\n. LGTM! Thanks for making this change, it cleans things up a lot.\n. LGTM!\n. @L-Jovi We use the standard React Native Alert module to display the update dialog, which as far as I can tell, doesn't expose any way to control the text alignment. Under the covers, this module is using the system dialog for iOS and Android, including the default styling, which I believe provides the most consistent looking experience for end users.\nIf you needed to control the text alignment of the message, I think you'd have to use a custom 3rd party dialog module that supported it. You can then use your own custom dialog when calling sync by not enabling the updateDialog property, and showing your own dialog in the sync status callback.\n. @L-Jovi Absolutely! Let us know if you'd like us to investigate this more. In theory, I think we could support changing the text alignment, but it might require tweaking the runtime UI tree in a way that could break across OS versions. Thanks again for the feedback!\n. @nicinabox When I read your first post, my initial thought was that it seemed too coincidental that you started seeing production users getting pre-release CodePush updates after you did an App Store update :) Let us know if you run into any other issues here!\n. LGTM!\n. LGTM!\n. Could this be handled entirely in JS? That way the UWP implementation would benefit as well? If we added a new \"isInstalled\" property, that was set to false for remote packages, and true for local packages (similarly to how isPending works currently), then presumably we could simply check if a package was installed and no-op a call to install, without ever needing to transition to the native side.\nThis change looks great to me, I just wanted to throw the thought out there :)\n. Ah OK. I guess there's a bit of a design question of whether it would be better to completely no-op subsequent installs of a package, as opposed to short-circuiting some of the behavior. I had originally thought we were doing the former, based on the fact that we haven't been prescribing the use of the install method in order to change the install mode of a pending update. The restartApp method would presumably solve this for some scenarios, and if we found that people wanted to attach a resume listener explicitly, there may be another solution for that.\nEither way, this change looks good, I just had the wrong expectations of the behavior.\n. BTW, could this possibly fix #376 as well? The root issue there was that the current package was missing when performing a rollback, so I wonder whether the double install bug deleted the package at the right time, and things got screwed up.\n. @brunobar79 Could I ask you a huge favor? We unfortunately haven't been able to repro this, and we think we know how to fix the exception, but I'd love to understand the root cause better, but we're not sure what is going wrong in your app. Could you perform the following:\n1. Open up the node_modules/react-native-code-push/android/app/src/main/com/microsoft/codepush/react/CodePushNativeModule.java file (phew that's a long path!)\n2. Find the catch statement on line 144\n3. Insert the following expression directly inside of it e.printStackTrace(); (above the call to loadBundleLegacy).\n4. Repro this issue again and paste the new logcat output\nWe clearly need to add better logging to our restart logic, since it's unfortunate that we're a little blind to the cause of this issue you're hitting right now. Apologies for this inconvenience, and thanks so much for reaching out!\n. @brunobar79 Your comment about using ON_NEXT_RESTART vs ON_NEXT_RESUME confirms that the issue is with our \"programmatic restart\" logic on Android. Thanks for confirming that! We're going to submit a fix that we believe will help with this, but unfortunately, we don't know the exact root cause and can't repro the problem, so any help with diagnosing this would be hugely helpful. Thanks again!\n. @brunobar79 Unfortunately, we still haven't been able to repro this, but we may have resolved it with #410. When you get back into the office next week, could you pull the latest bits from this repo and give it a spin? Thanks so much!\n. Correction, this fix has now been shipped to NPM, so you can just grab the bits from there whenever is convenient. Let us know how it goes!\n. Considering the current version of our plugin explicitly only supports RN 0.19+, I had figured this was the correct behavior, so I didn't fully understand the change to use the + syntax.\nLGTM!\n. Fixed via #416.\n. @mtunique If you pull the latest bits from this repo instead of NPM, does that resolve the issue? We recently disabled lint warnings from failing the build, so you hopefully shouldn't be running into this. We should fix the lint warnings in general, but you should be able to get unblocked with the bits from master.\n. Did we ever confirm whether or not the RN packager bundles up images as well? If so, should we call out that the CodePush service would allow more than just script updates?\n. Should we add a tad more detail here to explain that this gets the JS bundle location from either the package (on first load after app install) or the disk location, after an update has been applied?\n. I believe we're going with the name \"CodePush\" as the stylized product name. The hyphen in the NPM/etc. names isn't meant to indicate a space between the words, so much as to make the name more readable in the absence of casing\n. I agree this name isn't great. APPLY_SUCCESS is also being used for the Cordova plugin, so I'm cool with a name change as long as we're consistent.\n. Yep agreed.\n. Yep :)\n. Good idea. I'm const-ify those two and the \"hash\" key while I'm at it.\n. Shou do we change the default install mode to on next restart here as well?\n. This should reference the install mode not the restartImmediately parameter.\n. Update restartImmediately mention\n. Since these are callbacks not events, do we want to drop the \"on\" prefix and add the \"Callback\" suffix (e.g. syncStatusChangeCallback, downloadProgressCallback).\nIf you agree, we shou do also update the readme as well.\n. Could we add a \"[CodePush]\" prefix to these log messages so that users could easily filter them in or out in their dev console?\n. Accepting either {} or CodePush.DEFAULT_UPDATE_DIALOG make total sense, and I think that also accepting true as a shortcut for saying \"Show the UI with the default settings\" seems fine to me. I'd rather this than having a separate flag to control showing the UI.\n. I only added the typecheck because it doesn't work :) If you run the app in debug mode with Chrome, I'm assuming that Object.assign is actually the \"real\" version not a polyfill, and it throws a warning saying that it doesn't accept non-object values.\n. Why did you make this change?\n. Do we need to do this now that https://github.com/facebook/react-native/commit/b86a6e3b44a63e92cf3a7976d2fa26c4bf412df1#commitcomment-14069903 went in to master?\n. This comment line doesn't make sense :)\n. Should this just be \"com.microsoft.codepush\"?\n. Do we also need to check whether the binary bundle is newer?\n. We should always remove the pending update, and add an assert that the current and pending hash matches, instead of using the if statement above.\n. Does Java use underscores as a convention for naming instance variables?\n. Does the RN bridge for Android not have a way to reload itself? Also, I don't see where you're using the assetsBundleFileUrl variable.\n. What is this method for? Doesn't the override in the native module below handle this?\n. Do we need to override this method since we aren't actually using it?\n. This shouldn't be writable, along with build version as well, since it doesn't make any sense to mutate these values.\n. I would be in favor of completely removing this class. I don't think it adds enough value to exist separately from the Codepush class. I eventually want to refactor it out of the Obj-c implementation.\n. I thought iOS supports DeviceEventEmitter as well. Could we use that for both?\n. Do we need to update this to 0.15.0? Or does this version support everything we need?\n. Do we need to explicitly set the numeric values? Won't they be 0, 1, and 2 naturally?\n. I think we need to figure out a way to do this before merging this in, since giving precedence to the binary version is important for the app store update scenario.\n. How about...'add the :react-native-code-push project as a compile-time dependency:'\n. syncing?\n. The deployment key was configured above. Should we change this to simply. \"Ensure that the versionName property in your android/app/build.gradle file is set to a semver compliant value.\"\n. Maybe change this to \"Update the MainActivity.java file to use CodePush\"?\n. We shouldn't need to check for the pending update before restarting here.\n. Same as above, shouldn't the resume handler simply restart?\n. What about \"initializeUpdateAfterRestart\" or something like that?\n. Should this be hasResumeListener? Also, can we add the underscore prefix? :)\n. var { Platform } ?\n. _header\n. No space between the * and the variable name\n. NSString diffManifestFilePath\n. NSString currentPackageFolderPath\n. NSDictionary *manifestJSON\n. We should add a comment here that mentions that this file needs to be kept in sync with the equivalent constant in the React Native repo, and even point to the file/line that its located at.\n. It might not be entirely necessary, but I'd still love to know whether we can do this only during debug builds. I'd like to be hyper-sensitive with any work we do as part of the app load process, to keep CodePush as impactless as possible.\nCould you quickly try seeing whether BuildConfig.DEBUG can be used here? I'm assuming that it would be true/false depending on what the \"parent\" project configuration is, and therefore, when the dev support is enabled, we would clear the bundle, but when it's not, we wouldn't.\n. What if we simply said \"Loading JS bundle from binary\", and then add another log to the CodePush path that said \"Loading JS bundle from latest CodePush update\"?\n. With this simplification, is this function needed anymore? Or could we inline it within checkForUpdate?\n. I was thinking the same thing :)\n. Should we also add a test for checking isPending after a call to getCurrentPackage since that is actually populated differently and is the most common case?\n. Was the fix for the immediately-applied update bug simply removing this call to loadBundle and allowing the script-side to trigger the restart? Would this bug affect the Android plugin?\n. Should we also clear out failed updates? The Cordova plugin does this and I think it makes sense since those updates may work now that there is a new binary.\n. Shouldn't you be calling clearUpdates here?\n. Should we not do this part in debug mode? Otherwise, you could continuously get the same CodePush update over and over while deploying new binaries to the simulator and device right? \n. That's would prevent bundleURL from getting called after an update is installed, but the initial app load would still trigger bundeURL of the dev uses it for the JS bundle location. While debugging with Chrome and the packager, they wouldn't call bundleURL, so you're right, this would never get hit. Thanks for the clarification!\n. Since getBundleUrl is always called, even in debug mode, wouldn't this get called and cause some potential oddities in the dev workflow? \n. I just worry about getting an update available over and over again in dev mode when you're not bumping the version but you're redeploying new binaries. The update check wouldn't send a hash (since it was cleared) so the server would keep giving it the update. In iOS, that wouldn't happen due to the behavior we discussed, but on Android it seems like this could happen.\n. As I think about it, it doesn't seem too bad to add a new parameter to the constructor called \"debugMode\" or something. We could use it for this and we could also only clear the local cache file of that value is true.\n. Shouldn't this only happen in debug mode?\n. Could you use object destructuring to pull out the CodePush module using import syntax? Something like this: import { NativeModules: { CodePush: NativeCodePush } } from \"react-native\";\n. const?\n. Could we replace the Object.assign call with object spread? Something like this: { ...nativeConfig, ...{ deploymentKey } }\n. Could we replace the assign call with object spread like mentioned above?\n. Could we do this instead?: { ...downloadedPackage, ...local } \n. Wouldn't this line in the finally block be enough?\n. There are a few properties whose key and value are the same and can be simplified (e.g. \"checkForUpdate: checkForUpdate,\" -> \"checkForUpdate,\")\n. Should we just do an inline export of the object definition above instead of relying on a seperate export statement?\n. const?\n. const?\n. Double quotes? It seems like we've tried standardizing on them.\n. Should we move this to the top of the import \"block\"? I'd love to organize these import statements a little bit. I'd also be in favor of seperate to the imports from the const/requires.\n. Do we need these surrounding parens?\n. const?\n. Can we remove this line?\n. const?\n. I was suggesting removing the parens from the return statement :) I think we should leave them in the second expression of the if statement above.\n. const?\n. const?\n. const?\n. Since we never re-assign this reference, it can be made const as well.\n. const\n. const since we never re-assign\n. const\n. const\n. const\n. Can we mark this file as strict mode as well?\n. Couldn't this logic be driven off of \"isFirstRun\"? Presumably we should know whether we need to report a successful install without needing to check whether it has been reported already. Maybe I'm missing something, but I just want to make sure that we do as little as possible as part of the app start.\n. Could we just set a flag before doing a rollback that we then check here? I'd love to keep this function as simple as possible.\n. Is this necessary? Wouldn't the status report already include the same app version that would be part of the config?\n. This needs to be above the deployment key entry since it can be nil (e.g. the dev didn't add a key to the info.plist file), and nil will signal the end of the key pairs being added to the dictionary.\n. Alpha sort\n. The scenario where there isn't anything to report is exactly what I'd like to optimize. Ideally, calling notifyApplicationReady should have an extremely low impact on an app that hasn't even released an update yet. Maybe what you have is fine, i just wanted to mention the desire to keep app start as lean as possible, since this will run every time, but be unnecessary most of the time.\n. We can't use the identifier package since Babel will reject it when a dev tries to bundle their JS. \n. We can't use the identifier package here.\n. We'll need to update this to 1.5.1-beta to accommodate the package fix I have a PR out for.\n. Xcode complains about this variable not being used. Should we cache the UUID in defaults after all? I noticed that is what the Cordova device plugin does, and I wonder if that helps support edge-case scenarios where a new UUID would be generated when upgrading an existing binary installation.\n. NSDictionary *currentPackage. Also, since you're not doing anything with the error, would it make sense to just pass nil as the error parameter?\n. NSString *binaryIdentifier\n. NSString *clientUniqueId\n. I'm not sure if it makes sense to call the bundleURL method here. Our current expectations for debugging are that this method isn't called while debugging with Chrome, so I'm not sure what negative side-effects might occur if this is now called.\nAdditionally, since you're calling the parameterless version, it wouldn't work correctly if the dev wasn't using the default JS bundle file name.\n. Alpha sort\n. Sort these two\n. Should this be an else if? \n. This condition seems to run every time I call notifyApplicationReady, so I'm not sure whether the report is being saved or not. \n. Should we include \"CodePush\" in this name somewhere? (e.g. \"X-CodePush-SDK-Version\")\n. What do you think about moving all these report status methods out into their own class? The CodePush class is getting kind of cluttered and I'd like to start refactoring it out a little bit more.\n. nit: Align the curly braces?\n. Could we refactor this code a little bit to resolve/return in a single place? Maybe what you have is fine, it just seems like a little bit of duplication.\n. Sort?\n. I'm not sure I fully understand this code. If the previousStatusReportIdentifier isn't nil, when would it ever be set to an invalid report identifier? The code for this seems to simply check for nil (which you already do), and then check to see if it includes a colon. Do we need this check at all? If we do need it, it might be worthwhile adding a comment that explains what it is for.\n. I wonder whether it wouldn't be cleaner to have a single method that can retrieve the previous status report, and would return either nil or an object that already includes the parsed deployment key and label. It feels like this code knows more about how the status reports are persisted then it needs to.\n. When would the current and previous update have the same identifier? Is that even possible?\n. We can probably remove all of the internal methods from the interface, since the CodePush class doesn't consume them.\n. What about getRollbackReport?\n. What about getUpdateReport?\n. What about getBinaryUpdateReport?\n. What about calling this something like CodePushTelemetryManager?\n. Move this above for sorting purposes?\n. Since you're not sorting all methods together, what do you think about adding a \"#pragma mark - Private methods\" line above this group so it's clear what the two method groups are\n. Move this to the top of the these four lines?\n. Align curly braces\n. Align curly braces\n. Align this and the other two curly braces\n. Should we wrap this entire method in a call to \"dispatch_async\" (just like \"installUpdate\") so that we don't synchronously tie up the native module thread?\n. How about \"copyDirectoryContents\"? And the params could be \"sourceDirectoryPath\" and \"destinationDiectoryPath\"?\n. Should we go with \"source\" everywhere instead of \"from\"? I think it reads a little better.\n. I'd prefer if we didn't use acronym identifiers. How about \"inputStream\", \"bufferStream\" and \"zipStream\"? It obviously looks repetitive at the point of declaration but I think it makes the code easier to read when you're using the variables latter on. Also, do we need to initialize these to null or would the compiler do that for us?\n. How about \"findJSBundleInUpdateContents\"? The word \"Main\" doesn't seem necessary and I like adding \"UpdateContents\" since it adds a little more semantic value to what this function is trying to achieve.\n. I understand what you're doing here, but I might not in a month :) Could we add a simple comment explaining that the relative path is used for zipped updates vs single file updates?\n. OK cool, thanks for confirming :)\n. What do you think about replacing \"Package\" with \"Update\"? I'd like to start eradicating the use of the word \"Package\" in our codebase :)\n. What about \"processDiffUpdate\" or something similar? Since you moved this into an update-specific utils, I like the idea of having the method names be as specific to the scenario as possible. Additionally, since this method also deletes files from the current package, it isn't just about copying files. \n. I assume we don't need this or the other import?\n. Should this be >=0.19.0? We don't want to artificially block future versions that might just work.\n. Is it really necessary to cd up like this? Did you get this solution from the RNPM team? It just kind of seems strange. I would have expected the RNPM script to walk up the CWD until it found an RN app or something similar.\n. How about \"...the following output in your terminal...\"?\n. The version of the CodePush plugin that uses RNPM isn't going to support <RN 0.19.0 versions, so we presumably don't even need this section anymore right?\n. What will this error message be? It would be great if we rejected this with a clear message ala \"An update was downloaded, but ignored, because it didn't include a valid JS bundle file.\"\n. Should we hyperlink directly to the iOS setup section in the readme to make this easier?\n. Same comment as above.\n. How does this behave if you re-install the plugin to acquire a newer version, but the host project has already linked to CodePush? Does it effectively no-op? Or would the dev have to perform some steps again? \n. We probably don't need this heading anymore once we make this readme specific to RN 0.19.0+.\n. You can remove this link since the section it points to has been removed.\n. What about if the project is using other custom modules? Would the first and/or subsequent links of CodePush screw up the build file?\n. Ah OK cool.\n. I'd rather leave this as updatePackage and change the name of the mutable one to mutablePackage. In fact, if you look at the implementation of CodePushPackage.downloadPackage, it does the same thing.\n. Why are we pulling this from the defaults as opposed to just getting the current binary timestamp and storing that in the package?\n. Could we refactor this logic out into a utils method called [CodePushUtils binaryBundleModifiedDateString] or something? That way, this code and the download code can both use them. I'm assuming you're storing this date as a way to share this value between both methods?\n. Is this to try to catch the scenario where the process of merging the previous and current update fails partway for some reason? If so, cool :) Looking at this quickly, I don't fully understand whether the following would cause issues:\n1. This error object wouldn't be using the CodePush erorr domain, and therefore, the calling code wouldn't mark the update as having failed. Maybe that is expected? I guess if the merging process failed, that wouldn't be an issue with the update itself, but rather, an issue with our plugin? And therefore, we would want to try again? Should we have some retry logic here? I would really love to understand when and why this might fail.\n2. If we return here, we are leaving the unzipped update folder on disk. Is that OK? Or should we attempt to delete it as well before returning?\n. Ah right, that's a good point. I guess this is yet another example of why our current API has some odd consequences as opposed to having a more intuitive entry point for the plugin than bundleURL.\n. When would this be nil? Only in debug where a bundle wasn't generated? \n. Isn't it typically Objective-C convention to leave off the get prefix for accessor methods?\n. Does this really need to happen on every app launch? Maybe it would make more sense to use a static variable to carry this value? The write/synchronize to user defaults is causing disk I/O, so I'm just wondering if that is the best solution for this afterall.\n. How about bundleResourceName and bundleResourceExtension? Those match the parameter names we use for bundleURL.\n. Sort\n. Why is this part of the public API section?\n. It feels a little weird to set these two variables and then use the binaryJsBundleUrl to then access them. I like the previous line better since it's clearer what is happening.\n. Maybe call this binaryBundleURL? We should definitely at least capitalize the URL part since that is the Cocoa Touch convention.\n. Hmm, maybe it's OK after all. I don't feel strongly about it :)\n. Sort these two and remove the extra newline below.\n. I know this is unrelated to your PR, but could you create a new pragma section called \"Static variables\" that includes these two and the three above? I just noticed that I grouped all of these into a \"Private constants\" section, which isn't accurate.\n. How about modifiedDateOfFileAtURL? We should definitely capitalize the URL part (in the parameter as well), and I feel like the \"Of[X]At[Y]\" format is more idiomatic of Cococa Touch APIs (e.g. attributesOfItemAtPath).\n. This should be *URL (including the fileURL parameter name. Additionally, this should be in the private API section right?\n. Can you add a brief comment here explaining why you're doing this? It would be helpful to remember that this is for catching the scenario were a previous download failed. BTW, could you also confirm that this folder would get removed in the future if a new binary was discovered, as opposed to waiting for a new CodePush update?\n. Maybe call this \"syncInternal\"?\n. I'm confused by this because it looks like the \"removePendingUpdate\" argument is set to true if there is a pending update, but you're only deleting the current update if there isn't a pending update. Does this need to be changed to \"if (removePendingUpdate)\" or am I reading it wrong?\nIs the \"!\" operator a typo? The same logic in Java doesn't have it and seems correct as far as my understanding goes.\n. You used the Java variable name :) \"didUpdate\" isn't defined here. \n. I'm still not sure how I feel about this. I think the fix you made to notifyApplicationReady and the change you made to remove a pending update when installing a new update addressed two core issues, but I'm still not convinced that we should allow queuing concurrent calls to sync as opposed to rejecting the second with a new status (e.g. SYNC_IN_PROGRESS). If a sync call was setup to display a UI when it was checking or finished checking for the update, it wouldn't add any value to run both, since that would be a poor user experience. Since we don't know when sync will be called and how it will be presented, I think it's a much safer and simpler solution to just not allow sync to be called while another call is in progress.\nCan you think of a reason why calling it twice in parallel would actually be valuable? Calling sync twice within a single user session makes total sense, which is why we need the logic to clear a pending update when downloading, but I don't see the value in allowing calling sync concurrently, especially since the side effects would be unknown.\n. How would this behave in the following scenario:\n1. App is restarted to apply a new update and isFirsrRun is set to true\n2. App calls sync and installs a new update that will be applied on next restart\n3. App calls sync again\nWouldn't the second sync call in #3 remove the pending update from #2 because #1 set isFirstRun to true? This may be a fairly rare scenario, but it seems like one that we need to accommodate.\nMaybe you can track whether the running update has been validated, and only remove the pending update of it hasn't. That way, the call to sync in #3 wouldn't remove the pending update for #2 because even though isFirstRun is true, we would also know that we already validate that update and therefore, don't want to remove the potentially newer pending one.\n. I like that metaphor / rationale :) :+1: \n. I'm cool with SYNC_IN_PROGRESS. I can't think of anything much better :)\n. Yep that's much simpler and better :+1: \n. Are you sure that would create two instances? JS modules are supposed to be singletons already, so this pattern should work just fine. It would be good to verify that Babel / RN abide by this behavior, but I'm pretty sure they do. \n. Don't you need to assign the result of this expression back to \"syncPromise\" before returning it?\n. Doesn't calling done here end the Promise chain so that devs couldn't call .then on it?\n. Could we do \"return (...args) {\" and then do \"syncInternal(...args)\" below? That way we don't have to define the signature/default values twice.\n. Don't you need to check for null here since the callback is optional? Additionally, can we add logging here to indicate the state?\n. Actually, never mind, you need access to the sync callback, so what you have is probably easier.\n. Never mind, I see what you're doing now :)\n. Ah right, got it. Thanks for clarifying that!\n. I'd prefer always logging this, instead of only when there isn't a sync callback. That way, basic diagnostics could still be done via the console as opposed to having to set break points or expect the dev to add their own logging.\n. I noticed that your RNPM PR just got merged, but I'm not sure if that would address the scenario I mentioned above. If a dev manually linked another RN module by appending the project name to an existing include statement in their build.gradle file, when they installed CodePush, it would then break their build file.\n. Does this need to return null when the method has a void return type?\n. Does this create the directory if it doesn't exist?\n. Why this change?\n. Would it make sense to make this an else if after the following clause? \n. Ah OK, interesting. Another Java thing I didn't know about :)\n. Is this important now because of the hash validation?\n. Will this cause the update to be black listed? Do we need it to?\n. Does this need to be part of the interface?\n. How about \"isValidDiffUpdate\"? I prefer using the term \"Diff\" as opposed to \"Zip\".\n. I don't think this needs to be part of the public interface either\n. Could we use the \"android.util.Base64\" class here instead of doing this? This article seems to use that solution: http://karanbalkar.com/2013/05/tutorial-28-implement-sha1-and-md5-hashing-in-android/\n. Should we call this CodePushUpdateUtils? The current name implies it is more generic than it actually is.\n. While we're making some refactoring changes, should we replace the use of the word \"Package\" for \"Update\" (e.g. newUpdateHash, newUpdateDirectoryPath).\n. Could we save this hash somewhere so that at most, we only have to compute the hash on the first run after a binary installation? I'd prefer to keep app start as light as possible.\n- done\n. This behavior is kind of odd. Now this method can return null, the metadata about a CodePush update, or the metadata about the binary contents. Should we change it to just always return an object that is either the binary or a CodePush update, and then reject the promise in error conditions?\n. Is this only to accommodate the packager?\n. Do we need to make this part of our public/documented Obj-C API?\n. Isn't the \"assets\" folder name static/fixed? If so, the name \"Default\" is maybe a little misleading.\n. This seems a little brittle since we know people can rename it. Shouldn't we try to get the actual bundle file name from the CodePush class?\n. There seems to be a decent amount of duplication between this and verifyHashForDiffUodate. Is it possible to refactor them to share some of this logic?\n. Actually, I wonder if it wouldn't make more sense for getConfigiration to return the binary hash and update checkForUpdate to detect a null current package and use the config' hash and version instead. This seems to provided a cleaner seperate on between getCurrentPackage and getConfigiration. Since we don't document getConfiguration, it also allows us to add this new behavior without having to modify the public JS API.\n. Are either of these two methods currently used outside of its enclosing class? If not, I'd rather omit them from the interface.\n. Is this accommodating the scenario where you built the app against the simulator and it didn't create the bundle? I would love to add a simple comment to these kinds of statements, since it will be hard to remember what it's purpose is in the future.\n. Doesn't the JS side already cache the results of calling getConfiuration the first time it does? If so, we wouldn't need to cache this on the native side as well. I'd still love to think about how to cache this in user defaults as well, so we don't have to recompile this every time the app is started.\n. Would it be better to use path.join here and the two places below? To fully accommodate this being run on Windows/OS X/Linux?\n. We don't know for certain that this is what the file will be named do we?\n. For the last expression, don't you also want to check that localPackage is null? Since we wouldn't care about the binary's hash if the user was running on a CodePush update?\n. We don't need the get prefix.\n. We don't need the get prefix.\n. What if you moved this expression to the same line as the (? That might make this look a little cleaner, and then align the other three with it.\n. Would it be easier to read this if we just set it to true instead of relying on the isRunningBinaryVersion variable?\n. Same comment as with the iOS version\n. BTW, this change was necessary because we're using NSObject and we were previously getting away with not explicitly importing it because RCTBridgeModule.h was importing it for us. Now that we've removed that dependency, we now need to explicitly import the Foundation.h file to ensure NSObject resolves correctly.\n. I actually wonder whether we shouldn't just remove the second and third conditions entirely, and rely on the native side to determine whether a local package is still valid or not. I believe we had this check in back before we started clearing updates on disk, so it's potentially just legacy cruft that we don't need anymore. I don't believe that the Cordova plugin does any validation like this before using a local package to query the server with.\n. As I think about this more, since we already clear updates when a new binary is installed in release, the only time that this last expression would matter is after a binary update in debug mode. In those scenarios, it's likely that the dev didn't bump the version anyways, and therefore, this version check would only prevent using an update in debug mode, where the dev actually bumped the version. If we care about this scenario, I would argue that it might be a cleaner solution to change our logic to clear updates in debug mode if the version has changed.\n. I just quickly looked at the iOS implementation, and we already know the update and binary version, so it would be super simple to change the logic to clear updates in debug mode when the versions are different. That way, our assumption is that if you're not bumping the version in debug mode, we keep old updates so you don't get unnecessary CodePush updates, but as soon as you bump the version, even in debug mode, we clear updates. We actually need to do this anyways to accommodate the new range feature, since the newly bumped version may no longer be eligible for the locally installed updates.\n. Ah good catch.\n. Remove the indentation here since its no longer the child of a list item.\n. Remove the space between the equal sign and the 1.\n. Does this #if block need to actually be moved outside of the TEST section? I just noticed that it seems to add the closing brace for the { added at the very top of this file.\n. Good call, I'll fix this.\n. Yeah that's a much better solution.\n. The UI will actually display a ? already.\n. Since the s.source property specifies the Git tag using the s.version property, would it cause any issues for folks if we removed the -beta suffix here since the actual Git tag would include it?\n. Ah right, good catch.\n. Totally agreed :) I personally prefer 4 spaces, but for now, I'll make sure we use 2 for consistency.\n. It was probably an artifact of me splitting up a long comment line into two.\n. Should we move this out to another method? Somehing like \"clearDebugUpdates\" or whatever? It might help keep this core method slim. \n. Should we actually wrap this in an #ifdef DEBUG statement? That way it's limited to just debug builds? I can't imagine why someone would create a release build that is using the packager, and I'm in favor of optimizing release builds as much as possible.\n. Do we want to keep this pragma group sorted?\n. Are there any chances of this not working due to a timing issue? It just seems a little brittle to expect the bridge to be set when this is run. I'd almost be in favor of create a setBridge method to hook the exact moment that we know the bridge is available.\n. LoadBundle is a little different since it's not called as part of the init phase, so it wouldn't be possible for there to be a timing issue. \nThat said, I just took a look again at the code in RN that creates modules and this should be fine. I forgot that it will create the module on the main thread if it has an init method, so dispatching this block will indeed always happen after the bridge property is set.\nThanks for humoring me!\n. Would it make more sense to move this above the [connection setDelegateQueue] call?\n. Does the call to postFrameCallback need to run on the UI thread or can this dispatch call be moved to inside the doFrame method as needed?\n. How about #pragma mark - RCTFrameUpdateObserver Methods? We use this convention in other areas.\n. How about calling this operationQueue?\n. Now that we're doing this, I wonder if we still need to call dispatch_async within the CodePush class.\n. How about updateDownloadProgressForNextFrame? We're not actually sending every download progress event, since they're being throttled.\n. I'm cool with it.\n. How about calling this hasScheduledNextFrame, or isNextFramePending or something similar? \"Busy\" seems a little odd in this context, since we're really talking about an event that we don't need to schedule multiple times, as opposed to an operation that can take too long.\n. Would it be cleaner if updateDownloadProgressForNextFrame did this check? That way, this block simply requests that the progress be updated and doesn't know or care about how it's been scheduled/throttled.\n. Do we actually need this?\n. Should we prefix these names with underscores? That has been the convention we use for ivars.\n. Do we actually need to maintain the isAppExtension variable? It seems like a generally accepted solution to look for the appex extension in order to detect whether the current executable is an app or an app extension. I'd love to not need to create the three additional bundleURLForAppExtension methods unless we absolutely need them.\n. Is this line trying to reference the containing app's bundle from within the running extension? If so, could you add a comment explaining that? Presumably this logic could break in future iOS versions, so I'd love to be explicit about what we're trying to achieve if there isn't a better solution.\n. Can you sort these?\n. Should all of these be marked as const instead of read only? We don't need to change their values in a constructor, so I think that would be the more approrpriate annotation.\n. What is the intent of this line?\n. We should called this \"lastSuspendDate\" to follow the terminology of the platform.\n. In general, I think the convention in C# is for constants to be named using pascal casing, so I think we should use the same coding style throughout all of this code.\n. Like we've been doing in Objective-C, I believe the naming convention for instance variables is to camel casing (like you're doing), but to prefix the names with an underscore.\n. We should wrap this in our namespace, and I think we should strip the \"CodePush\" prefix, since it isn't necessary with the namespace. \n. Same comment as the install mode enum.\n. I think we should replace \"Directories\" with \"Folders\" since that is the common term in UWP.\n. Should we be using CopyAsync?\n. Should this be private?\n. Pascal casing?\n. This is a general purpose comment: does it make sense to annotate a method as public when it's contained in an internal class? I feel like we should potentially remove the public modifiers from all internal classes, since I'm not sure it makes a ton of sense.\n. Should we use TryGetItemAsync instead? That way you don't have to rely on the exception handling logic.\n. Do we actually need this custom exception type?\n. Should we move this to the else block below?\n. I don't think we need this exception type since we don't explicitly catch it anywhere, and we don't store any custom metadata along with the error message either.\n. Do we need to define this? I thought C# auto-gens a parameter less constructor for you.\n. I don't think we need this custom error type.\n. Should this be private? Also, the \"s\" should be uppercase.\n. What do you think about calling this \"UpdateManager\"? That way we keep the term \"Package\" out of the new UWP implementation, and I also don't think we need to \"CodePush\" prefix thanks to the namespace.\n. Can we sort the methods in this file? Also, I believe that many of the methods in this class are private. Can we update them as such?\n. I think we should remove the \"CodePush\" prefix, since the namespace makes this clear already.\n. We could use the collection initializer syntax to clean this up a little bit.\n. Does the RN4W bridge not allow accepting custom enums as parameters?\n. Should we use a dictionary initializer for this? \n. I would vote to move this class into its own file if we can.\n. Can we move this class into its own file?\n. We should be able to just throw an InvalidOoerationExceprion\n. Actually I think we can replace this custom exception type and just throw InvalidOoerationException from the download method.\n. What do you think about moving this and every method that (transitively) calls it into a new \"SettingsManager\" class?\n. I think we should consider using \"var\" for type inference throughout this code, since it's obvious in many places what the type is.\n. We should mark this class as sealed, and I'm actually wondering whether we should call it \"CodePushPackage\" since that more accurately reflects its purpose to the app developer.\n. Instead of creating the Action instance, can't we simply pass a reference to \"reactInstanceManager.RecrateReactContextInBackground\" to this method?\n. Does it make sense for this method to be async since it should be synchronously reloading the app upon being called?\n. That's besides the point. We definitely have room for improving our Android implementation, but I'm simply proposing that we try not to introduce non-idiomatic C#, since this is entirely new code. Refactoring existing code is a different discussion.\n. I proposed this name precisely because I am familiar with React Native, and the terminology for what this class represents is a \"Package\". Just looking at the interface it implements makes that clear :) \"CodePushReactPackage\" is fine with me.\nThat said, our use of the word \"Package\" in our API is largely a legacy issue, and something that we've started removing over time. I don't feel super strongly about this comment, but to be entirely accurate, this class doesn't represent the CodePush module, it represents the React Native package object that contributes the module to the runtime.\n. If we want to achieve tooling support for grouping method definitions, you could use the #region directive, which allows expanding/collapsing the entire group. This is somewhat equivalent to our use of #pragma in Obj-C.\n. I wonder whether it would be nicer to have a static constructor that initialized a private variable, that all other methods in this class use internally. The static constructor won't get called until one of its classes methods are actually called, so you gain the same benefits of deferring this code until it's necessary, but the code that consumes it would arguably be a little cleaner.\n. I would still vote for using \"Folders\" instead of \"Directories\".\n. Should this and isPendingUpdate be moved to the SettingsManager?\n. I would vote to rename this to \"LifecycleEventListener\". We listen to suspend as well, so it isn't just a resume listener, and the CodePush prefix doesn't add any value since the namespace already scopes it down pretty specifically.\n. What do you think about this constructor simply taking in an Action that it triggers as necessary? The consuming code could then just pass in a reference to the loadBundle method, and this class is completely simpllified to just listening to lifecycle events and throttling them as necessary.\n. These names should be pascal-cased, and you can omit the values, since the compiler will take care of it.\n. Same comment as the install mode enum.\n- addressed!\n. Sort by key?\n- addressed!\n. Use the dictionary initializer syntax?\n. Since we're not actually augmenting the error object in any way, I still vote for us using the InvalidOperationException class (or another one as appropriate). I believe that C# favors re-using core exception types as much as possible, and I think we can achieve the behavior we want of rejecting a bad download without needing to subclass our our exception type.\n. The var keyword definitely seems appropriate in a few places in this method.\n- addressed!\n. Use dictionary initializer syntax?\n. I would keep the name of this agnostic to what it actually does, that way it's fully decoupled from the consumer. Maybe just \"_resumeAction\"?\n. Does this need to be dispatched to the native modules thread? Since the reload logic just immediately dispatches back to the UI thread, and this operation doesn't need to actually be async, I don't think we need to worry about doing this unless it's required.\n. Just return the new List, since the local var isn't necessary?\n. If you did the above, then you could call this class something like \"ThrottledResumeListener\" or something more specific, without needing to be tied to CodePush per se. Not at all necessary, but it could help improve the semantics of the component.\n. Sort these by variable name. Additionally, wouldn't the compiler set this to null by default?\n. Yep I think it's fine. This was just a minor question that I was curious about.\n. I would vote for adding newlines between the region directives. \n- addressed\n. I think that abbreviations are generally frowned upon in .NET for class names and methods, so the use of \"Min\" here feels a little odd. \n. Why? That comment makes sense if the d.ts file lives independent of the code it's defining, but that isn't the case here.\n. By pasing true to restartApp, you're already preventing the restart from happening unless there is a pending update. Do we need the restartPending flag at that point?\n. Do we actually need the new install mode for this? The install mode represents when the update should be attempted to be installed automatically, but it may happen sooner (e.g. if the app calls restartApp), and it could also happen later (e.g. if you specified a minimumBackgroundDurarion). The ON_NEXT_RESTART install mode basically disables automatically forcing a restart, so the name of this new install mode is also potentially a little confusing, since it's behavior is more closely aligned with IMMEDIATE, with some policy-based delaying in place.\nI would vote to remove this install mode, since I think this new behavior is conceptually similar to what minimumBackgroundDuration already does for resume-based installs, and therefore, it seems fine to have a way to delay immediate installs without requiring a new install mode.\nAs an aside, should restartApp even be allowed to be called if you've explicitly disallowed restarts? It feels like restartApp is really the \"primitive\" that allows restarting the app, and if we're adding the ability to disallow it, then maybe that's where the delay behavior should go. Then, anywhere that calls restartApp would simply be allowed or not, but they wouldn't need to worry about interacting with the RestartManager.\n. Maybe move restartApp into the RestartManager? That way, that module handles the policy of when a restart is allowed and there behavior of a restart itself. Then everywhere that currently internally calls the native bridge's restartApp directly could just start calling the version within the RestartManager.\n. I think this behavior is fine. If the need ever arises, I suppose we could allow disallowRestart to specify whether mandatory updates are allowed to \"force\" a restart that would otherwise be disallowed.\n. Now that I think about it, you were right to track the state of whether a restart was requested. If an app calls this method, but an update was installed with a restart-based install mode, I'm not sure if it makes sense to trigger a restart. It seems like it makes sense for this method to toggle the flag and only call restart if an update is pending that wanted to programmatically restart the app in the first place, but couldn't because it was previously disallowed.\nMaybe restartApp could set a flag indicating that a restart was requested if it was disallowed?\n. If the restart isn't currently allowed, I wonder if we should indicate that to the caller somehow. Maybe it isn't too important for now, but it's something to keep in mind.\n. We're discussing removing this method altogether, so we can discuss the name if we decide to leave it in.\n. Like I mentioned above, I'd prefer to remove this method entirely if we can.\n. @scottbommarito I agree we would need to accommodate that scenario, but that doesn't mean we shouldn't account for resume-based installs. If we're going to have a feature for disallowing synthetic restarts, it doesn't make sense for it to be specific to updates installed via IMMEDIATE, since that is just one way of triggering them.\nThe RestartManager could easily have a private method called clearPendingRestart (or whatever) that is called anytime the LocalPackage.install method is called with a non-immediate mode. There is potentially a more elegant way of doing this, so I'm not trying to portray any type of implementation opinion, as opposed to simply saying that we shouldn't restart upon calling allowRestart unless there is a currently pending update that wanted to restart in the first place (which a ON_NEXT_RESTART update wouldn't have).\n. Fine with me :)\n. I'm not sure if the original bug exists in Cordova. If so, then yeah, we should add it there as well.\n. As you mentioned, this is ordered alphabetically, not based on the sequence you would call them in. I don't see the reason why we would order things based on sequence in an API reference document. Additionally, as I call out, this is already an advanced API, so I don't think we need to optimize our doc flow specifically for this.\n. That's an edge case scenario that I decided not to call out explicitly, since this doc is already fairly long as it is. If we get a question about it, then I'll update it.\n. I'm fine with \"process\" over \"wizard\" (though I don't think it makes much of a difference), but \"login\" definitely doesn't capture the intent of the example, and the exact scenario that I've seen people implement this feature for in the past was for an on boarding process, not anything to do with login.\n. Would it be simpler to just do doDownloadAndInstall().then(resolve, reject)? \n. I'd prefer to call this _restartInProgress, but either way is fine. But, we should use camel casing for the name to be consistent with others, and sort it alphabetically.\n. If there isn't a pending update, and an app calls this twice specifying true for the onlyIfUpdateIsPending parameter, then this wouldn't be reset to false since the app wouldn't actually restart. I don't think that's the end of the world, but since we're logging messages when a restart is \"blocked\" due to one being in progress, I'd prefer to address this edge case.\n. Isn't this duplicating logic between this JS method and its corresponding native implementation? It might be better to have the native restartApp method return a Promise (or something similar) which allows the JS-side to determine whether the restart actually happened, at which point, you can reset the _inProgress variable to false.\n. Couldn't you set __inProgress to true and then set it to false when a Promise returned by NativeCodePush.restartApp resolves? That way, you set the flag to true immediately, which blocks subsequent calls to restartApp in the same flush cycle of the JS->native call queue. If the app actually restarts, then it doesn't matter, but at least you can guarantee that calls to restartApp can succeed after the native call which doesn't result in a restart has completed, and returned back to JS. Isn't this effectively how sync prevents multiple concurrent calls?\n. I agree with the current implementation. Thanks again for the fix dude!\n. Should we finally alias this method to be CodePush.getJSBundleFile? That way its named just like the \"outer\" method? This is what we did for UWP. It's a small change, but I feel like it cleans up the API a bit, and we're already making a ton of changes for RN 0.29 anyways.\n. Why this change? I don't believe our plugin would support 0.18, so having a min version still seems to make sense.\n. We can probably simplify the demo app by removing the explicit bundle name parameter.\n. Sort these?\n. Do we need this one method anymore?\n. Should we mark these as being @Deprecated? That way the code and usage is clearer that we expected you to just the newer methods?\n. Should we explicitly mark all of these are public? I believe we chose to be explicit in the Windows implementation, and RN Java code seems to do the same.\n. Should we start using the \"m\" prefix for private class members? That seems to be the equivalent of the _ in the Java world, and its what RN uses.\n. Should we initialize this object in the constructor? That way each method didn't need to construct it themselves?\n. Can't you cast \"currentActivity\" instead of needing to retrieve the current activity again?\n. In the UWP implementation, I believe we renamed this to \"UpdateManager\". I'd be in favor of changing this to CodePushUpdateManager as well.\n. Do we actually use this anywhere? I wonder whether we can't remove it.\n. Do we need the \"CodePush\" prefix in these? \"mNativeModule\", etc. might be sufficient in the context of the CodePush class. \n. Since this is a native module as well, can't you just call getCurrentActivity to get the Activity?\n. Per my comment below, do we actually need this?\n. The convention for non-final static members seems to be to prefix them with \"s\" instead of \"m\".\n.  Should we move this log within the if statement below it, that way we only actuallynlog that the app is being restarted if in fact it is?\n. I don't think it will actually help safe-guard us here, since the loadBundle method doesn't check against null, and therefore, would crash far before we hit this part, and the code which recreates the RN context couldn't null out the Activity reference we have, or force it to be GC'd, since we'd still be keeping it alive. The issue here was that we allowed RN to control the lifetime of the Activity reference, by delegating to getCurrentActivity, as opposed to capturing our own reference for the span of time that we need it.\n. Yeah I think doing this check might makes sense, but it probably should be within loadBundle, as do the error check up front before propagating it further.\n. OK cool, I'll move this to app start and update the until method to take a Context instead of an Activity. Then our only dependency on getCurrentActivity will be the restart logic, which I don't see a way around unfortunately.\n. ",
    "ide": "Do you want to submit this upstream?\n. #2864 will be merged soon. I hope we can include it with 0.14-rc or 0.15-rc. I'm a believer in making RN core be flexible and have small surface area so that projects like yours can integrate with it as plugins, and it's exciting to see your work.\n. ",
    "msftclas": "@geof90, Thanks for signing the contribution license agreement so quickly! Actual humans will now validate the agreement and then evaluate the PR.\nThanks, MSBOT;\n. Hi @geof90, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        In order for us to evaluate and accept your PR, we ask that you sign a contribution license agreement. It's all electronic and will take just minutes. I promise there's no faxing. https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @jevakallio, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @lostintangent, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Jonathan Carter). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @lostintangent, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Jonathan Carter). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @qingfeng, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        In order for us to evaluate and accept your PR, we ask that you sign a contribution license agreement. It's all electronic and will take just minutes. I promise there's no faxing. https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. @qingfeng, Thanks for signing the contribution license agreement so quickly! Actual humans will now validate the agreement and then evaluate the PR.\nThanks, MSBOT;\n. Hi @lostintangent, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Jonathan Carter). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @lostintangent, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Jonathan Carter). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @lostintangent, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Jonathan Carter). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @geof90, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        In order for us to evaluate and accept your PR, we ask that you sign a contribution license agreement. It's all electronic and will take just minutes. I promise there's no faxing. https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. @geof90, Thanks for signing the contribution license agreement so quickly! Actual humans will now validate the agreement and then evaluate the PR.\nThanks, MSBOT;\n. Hi @oney, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @oney, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @shawnXiao, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @skevy, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @joenoon, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. @joenoon, Thanks for signing the contribution license agreement so quickly! Actual humans will now validate the agreement and then evaluate the PR.\nThanks, MSBOT;\n. Hi @joenoon, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    You've already signed the contribution license agreement. Thanks!\nThe agreement was validated by Microsoft and real humans are currently evaluating your PR.\nTTYL, MSBOT;\n. Hi @cmcewen, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @Almouro, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @talkol, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @jedlau, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @oblador, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        In order for us to evaluate and accept your PR, we ask that you sign a contribution license agreement. It's all electronic and will take just minutes. I promise there's no faxing. https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. @oblador, Thanks for signing the contribution license agreement so quickly! Actual humans will now validate the agreement and then evaluate the PR.\nThanks, MSBOT;\n. Hi @dejakob, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @shishirx34, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Shishir Horane). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @Jackong, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        In order for us to evaluate and accept your PR, we ask that you sign a contribution license agreement. It's all electronic and will take just minutes. I promise there's no faxing. https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @xcarpentier, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @mrspeaker, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @charlieschwabacher, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        In order for us to evaluate and accept your PR, we ask that you sign a contribution license agreement. It's all electronic and will take just minutes. I promise there's no faxing. https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. @charlieschwabacher, Thanks for signing the contribution license agreement so quickly! Actual humans will now validate the agreement and then evaluate the PR.\nThanks, MSBOT;\n. Hi @grabbou, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @triage, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @rikuayanokozy, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @vincentfretin, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @jozan, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @L-Jovi, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @kemcake, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        In order for us to evaluate and accept your PR, we ask that you sign a contribution license agreement. It's all electronic and will take just minutes. I promise there's no faxing. https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. @kemcake, Thanks for signing the contribution license agreement so quickly! Actual humans will now validate the agreement and then evaluate the PR.\nThanks, MSBOT;\n. Hi @dbasedow, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        In order for us to evaluate and accept your PR, we ask that you sign a contribution license agreement. It's all electronic and will take just minutes. I promise there's no faxing. https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. @dbasedow, Thanks for signing the contribution license agreement so quickly! Actual humans will now validate the agreement and then evaluate the PR.\nThanks, MSBOT;\n. Hi @Kerumen, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @scottbommarito, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Scott Bommarito). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @tonyxiao, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @lisong, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @mikedouglas, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @nevir, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. @nevir, Thanks for signing the contribution license agreement so quickly! Actual humans will now validate the agreement and then evaluate the PR.\nThanks, MSBOT;\n. Hi @patoroco, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @nevir, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    You've already signed the contribution license agreement. Thanks!\nThe agreement was validated by Microsoft and real humans are currently evaluating your PR.\nTTYL, MSBOT;\n. Hi @nevir, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    You've already signed the contribution license agreement. Thanks!\nThe agreement was validated by Microsoft and real humans are currently evaluating your PR.\nTTYL, MSBOT;\n. Hi @scottbommarito, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Scott Bommarito). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @arnif, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @scottbommarito, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Scott Bommarito). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @scottbommarito, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Scott Bommarito). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @nevir, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    You've already signed the contribution license agreement. Thanks!\nThe agreement was validated by Microsoft and real humans are currently evaluating your PR.\nTTYL, MSBOT;\n. Hi @corymsmith, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @calclavia, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @dorongutman, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @joshuafeldman, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        In order for us to evaluate and accept your PR, we ask that you sign a contribution license agreement. It's all electronic and will take just minutes. I promise there's no faxing. https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. @joshuafeldman, Thanks for signing the contribution license agreement so quickly! Actual humans will now validate the agreement and then evaluate the PR.\nThanks, MSBOT;\n. @joshuafeldman, Thanks for signing the contribution license agreement so quickly! Actual humans will now validate the agreement and then evaluate the PR.\nThanks, MSBOT;\n. Hi @magrinj, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @madsleejensen, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @greena13, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @rahuljiresal, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @ymmuse, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        In order for us to evaluate and accept your PR, we ask that you sign a contribution license agreement. It's all electronic and will take just minutes. I promise there's no faxing. https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. @ymmuse, Thanks for signing the contribution license agreement so quickly! Actual humans will now validate the agreement and then evaluate the PR.\nThanks, MSBOT;\n. Hi @daniel-beard, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @igrayson, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        In order for us to evaluate and accept your PR, we ask that you sign a contribution license agreement. It's all electronic and will take just minutes. I promise there's no faxing. https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. @igrayson, Thanks for signing the contribution license agreement so quickly! Actual humans will now validate the agreement and then evaluate the PR.\nThanks, MSBOT;\n. Hi @igrayson, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    You've already signed the contribution license agreement. Thanks!\nThe agreement was validated by Microsoft and real humans are currently evaluating your PR.\nTTYL, MSBOT;\n. @daniel-beard, Thanks for signing the contribution license agreement so quickly! Actual humans will now validate the agreement and then evaluate the PR.\nThanks, MSBOT;\n. Hi @Pho3nix, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        In order for us to evaluate and accept your PR, we ask that you sign a contribution license agreement. It's all electronic and will take just minutes. I promise there's no faxing. https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. @Pho3nix, Thanks for signing the contribution license agreement so quickly! Actual humans will now validate the agreement and then evaluate the PR.\nThanks, MSBOT;\n. Hi @felipecsl, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        In order for us to evaluate and accept your PR, we ask that you sign a contribution license agreement. It's all electronic and will take just minutes. I promise there's no faxing. https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @lklots, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @mobileDevNativeCross, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @mobileDevNativeCross, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @rozele, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Eric Rozell). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @rozele, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Eric Rozell). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @rozele, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Eric Rozell). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @rozele, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Eric Rozell). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @rozele, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Eric Rozell). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @rozele, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Eric Rozell). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @rozele, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Eric Rozell). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @hilkeheremans, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        In order for us to evaluate and accept your PR, we ask that you sign a contribution license agreement. It's all electronic and will take just minutes. I promise there's no faxing. https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. @hilkeheremans, Thanks for signing the contribution license agreement so quickly! Actual humans will now validate the agreement and then evaluate the PR.\nThanks, MSBOT;\n. Hi @ianlin, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @Swordsman-Inaction, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @mkonicek, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @Ape-Bite-Apple, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        In order for us to evaluate and accept your PR, we ask that you sign a contribution license agreement. It's all electronic and will take just minutes. I promise there's no faxing. https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @dingbat, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @Lughino, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @tristanbbq, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @buptkang, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Bo Kang). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @sogko, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @sotayamashita, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @sotayamashita, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @buptkang, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Bo Kang). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @puhfista, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        In order for us to evaluate and accept your PR, we ask that you sign a contribution license agreement. It's all electronic and will take just minutes. I promise there's no faxing. https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @vladimir-kotikov, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Vladimir Kotikov). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @vladimir-kotikov, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Vladimir Kotikov). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @matrosov-nikita, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Nikita Matrosov (Akvelon)). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @vonovak, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @sergey-akhalkov, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    You've already signed the contribution license agreement. Thanks!\nThe agreement was validated by Microsoft and real humans are currently evaluating your PR.\nTTYL, MSBOT;\n. Hi @vladimir-kotikov, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Vladimir Kotikov). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @matrosov-nikita, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Nikita Matrosov (Akvelon)). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @vladimir-kotikov, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Vladimir Kotikov). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @sergey-akhalkov, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    You've already signed the contribution license agreement. Thanks!\nThe agreement was validated by Microsoft and real humans are currently evaluating your PR.\nTTYL, MSBOT;\n. Hi @max-mironov, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        In order for us to evaluate and accept your PR, we ask that you sign a contribution license agreement. It's all electronic and will take just minutes. I promise there's no faxing. https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @christopherdro, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        In order for us to evaluate and accept your PR, we ask that you sign a contribution license agreement. It's all electronic and will take just minutes. I promise there's no faxing. https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @sergey-akhalkov, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    You've already signed the contribution license agreement. Thanks!\nThe agreement was validated by Microsoft and real humans are currently evaluating your PR.\nTTYL, MSBOT;\n. Hi @teodors, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @jeremistadler, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        In order for us to evaluate and accept your PR, we ask that you sign a contribution license agreement. It's all electronic and will take just minutes. I promise there's no faxing. https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @jeremistadler, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    You've already signed the contribution license agreement. Thanks!\nWe will now validate the agreement and then real humans will evaluate your PR.\nTTYL, MSBOT;\n. Hi @sergey-akhalkov, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Sergey Akhalkov (Akvelon)). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @abodalevsky, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    You've already signed the contribution license agreement. Thanks!\nThe agreement was validated by Microsoft and real humans are currently evaluating your PR.\nTTYL, MSBOT;\n. Hi @sergey-akhalkov, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Sergey Akhalkov (Akvelon)). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @sergey-akhalkov, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Sergey Akhalkov (Akvelon)). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @sergey-akhalkov, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Sergey Akhalkov (Akvelon)). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @sergey-akhalkov, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        It looks like you're a Microsoft contributor (Sergey Akhalkov (Akvelon)). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    \nTTYL, MSBOT;\n. Hi @tlvenn, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. Hi @Igor1201, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    \n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\n    \nTTYL, MSBOT;\n. \nThis seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \n@max-mironov,\nThanks for your contribution as a Microsoft full-time employee or intern. You do not need to sign a CLA.\nThanks,\nMicrosoft Pull Request Bot. \n@cqingwang,\nThanks for your contribution.\nTo ensure that the project team has proper rights to use your work, please complete the Contribution License Agreement at https://cla.microsoft.com.\nIt will cover your contributions to all Microsoft-managed open source projects.\nThanks,\nMicrosoft Pull Request Bot. \n@sergey-akhalkov,\nThanks for your contribution as a Microsoft full-time employee or intern. You do not need to sign a CLA.\nThanks,\nMicrosoft Pull Request Bot. \n@ymusiychuk-lohika,\nThanks for your contribution.\nTo ensure that the project team has proper rights to use your work, please complete the Contribution License Agreement at https://cla.microsoft.com.\nIt will cover your contributions to all Microsoft-managed open source projects.\nThanks,\nMicrosoft Pull Request Bot. @ymusiychuk-lohika, thanks for signing the contribution license agreement. We will now validate the agreement and then the pull request.\nThanks, Microsoft Pull Request Bot. \nThis seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \n@max-mironov,\nThanks for your contribution as a Microsoft full-time employee or intern. You do not need to sign a CLA.\nThanks,\nMicrosoft Pull Request Bot. \n@abodalevsky,\nThanks for having already signed the Contribution License Agreement. Your agreement was validated by Microsoft. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \n@sergey-akhalkov,\nThanks for your contribution as a Microsoft full-time employee or intern. You do not need to sign a CLA.\nThanks,\nMicrosoft Pull Request Bot. \n@abodalevsky,\nThanks for having already signed the Contribution License Agreement. Your agreement was validated by Microsoft. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \n@sergey-akhalkov,\nThanks for your contribution as a Microsoft full-time employee or intern. You do not need to sign a CLA.\nThanks,\nMicrosoft Pull Request Bot. \nThis seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \nThis seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \n@sergey-akhalkov,\nThanks for your contribution as a Microsoft full-time employee or intern. You do not need to sign a CLA.\nThanks,\nMicrosoft Pull Request Bot. \n@sergey-akhalkov,\nThanks for your contribution as a Microsoft full-time employee or intern. You do not need to sign a CLA.\nThanks,\nMicrosoft Pull Request Bot. \n@sergey-akhalkov,\nThanks for your contribution as a Microsoft full-time employee or intern. You do not need to sign a CLA.\nThanks,\nMicrosoft Pull Request Bot. \nThis seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. @cmcewen, thanks for signing the contribution license agreement. We will now validate the agreement and then the pull request.\nThanks, Microsoft Pull Request Bot. \n@jiaminglu,\nThanks for your contribution.\nTo ensure that the project team has proper rights to use your work, please complete the Contribution License Agreement at https://cla.microsoft.com.\nIt will cover your contributions to all Microsoft-managed open source projects.\nThanks,\nMicrosoft Pull Request Bot. @jiaminglu, thanks for signing the contribution license agreement. We will now validate the agreement and then the pull request.\nThanks, Microsoft Pull Request Bot. \nThis seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \nThis seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \n@JulienKode,\nThanks for your contribution.\nTo ensure that the project team has proper rights to use your work, please complete the Contribution License Agreement at https://cla.microsoft.com.\nIt will cover your contributions to all Microsoft-managed open source projects.\nThanks,\nMicrosoft Pull Request Bot. @JulienKode, thanks for signing the contribution license agreement. We will now validate the agreement and then the pull request.\nThanks, Microsoft Pull Request Bot. \n@almirfilho,\nThanks for your contribution.\nTo ensure that the project team has proper rights to use your work, please complete the Contribution License Agreement at https://cla.microsoft.com.\nIt will cover your contributions to all Microsoft-managed open source projects.\nThanks,\nMicrosoft Pull Request Bot. @almirfilho, thanks for signing the contribution license agreement. We will now validate the agreement and then the pull request.\nThanks, Microsoft Pull Request Bot. \n@AndrewJack,\nThanks for your contribution.\nTo ensure that the project team has proper rights to use your work, please complete the Contribution License Agreement at https://cla.microsoft.com.\nIt will cover your contributions to all Microsoft-managed open source projects.\nThanks,\nMicrosoft Pull Request Bot. @AndrewJack, thanks for signing the contribution license agreement. We will now validate the agreement and then the pull request.\nThanks, Microsoft Pull Request Bot. \n@oliversommer,\nThanks for having already signed the Contribution License Agreement. Your agreement was validated by Microsoft. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \n@iacopo87,\nThanks for having already signed the Contribution License Agreement. Your agreement was validated by Microsoft. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \nThis seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. @farwayer, thanks for signing the contribution license agreement. We will now validate the agreement and then the pull request.\nThanks, Microsoft Pull Request Bot. \n@AndrewJack,\nThanks for having already signed the Contribution License Agreement. Your agreement was validated by Microsoft. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \nThis seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \nThis seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \nThis seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \nThis seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \nThis seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \n@disharmonized,\nThanks for your contribution.\nTo ensure that the project team has proper rights to use your work, please complete the Contribution License Agreement at https://cla.microsoft.com.\nIt will cover your contributions to all Microsoft-managed open source projects.\nThanks,\nMicrosoft Pull Request Bot. @disharmonized, thanks for signing the contribution license agreement. We will now validate the agreement and then the pull request.\nThanks, Microsoft Pull Request Bot. \nThis seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \nThis seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \nThis seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \n@AndrewJack,\nThanks for having already signed the Contribution License Agreement. Your agreement was validated by Microsoft. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \n@disharmonized,\nThanks for having already signed the Contribution License Agreement. Your agreement was validated by Microsoft. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \nThis seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \nThis seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \n@ruslan-bikkinin,\nThanks for having already signed the Contribution License Agreement. Your agreement was validated by Microsoft. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \n@ruslan-bikkinin,\nThanks for having already signed the Contribution License Agreement. Your agreement was validated by Microsoft. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \n@ruslan-bikkinin,\nThanks for having already signed the Contribution License Agreement. Your agreement was validated by Microsoft. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \n@Zakeelm,\nThanks for your contribution as a Microsoft full-time employee or intern. You do not need to sign a CLA.\nThanks,\nMicrosoft Pull Request Bot. \nThis seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \nThis seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \n@ruslan-bikkinin,\nThanks for your contribution as a Microsoft full-time employee or intern. You do not need to sign a CLA.\nThanks,\nMicrosoft Pull Request Bot. \n@AndrewJack,\nThanks for having already signed the Contribution License Agreement. Your agreement was validated by Microsoft. We will now review your pull request.\nThanks,\nMicrosoft Pull Request Bot. \n@ruslan-bikkinin,\nThanks for your contribution as a Microsoft full-time employee or intern. You do not need to sign a CLA.\nThanks,\nMicrosoft Pull Request Bot. \n@ruslan-bikkinin,\nThanks for your contribution as a Microsoft full-time employee or intern. You do not need to sign a CLA.\nThanks,\nMicrosoft Pull Request Bot. \n@ruslan-bikkinin,\nThanks for your contribution as a Microsoft full-time employee or intern. You do not need to sign a CLA.\nThanks,\nMicrosoft Pull Request Bot.  All CLA requirements met..  All CLA requirements met..  All CLA requirements met..  All CLA requirements met..  All CLA requirements met..  All CLA requirements met..  All CLA requirements met..  All CLA requirements met..  All CLA requirements met..  All CLA requirements met..  All CLA requirements met..  All CLA requirements met..  All CLA requirements met..  All CLA requirements met..  All CLA requirements met..  All CLA requirements met..  All CLA requirements met..  All CLA requirements met.. ",
    "ababol": "Nice!\n. ",
    "silhouettes": "LGTM!\n. LGTM\n. Looks good!\n. So we just discussed this and we probably shouldn't have CORS turned on at all. Having CORS turned on in the server (along with session cookies) is a legacy thing that should have been removed a long time ago. Re-opening this so that we can track its removal!\n. Looks good!\n. Just a bunch of typos, sorry for being nitpicky! LGTM\n. Would it make more sense to pass the deploymentKey to queryUpdateWithCurrentPackage() in the SDK, rather than modifying the config and re-constructing the SDK each time?\n. Or yeah, I guess this is fine, I'm aware that we're trying to make small incremental changes without turning things into a big refactor! (LGTM)\n. Looks good!\n. Looks good!\n. Sweet! Looks good\n. @CarlosLCervantes, what command were you running when you got this? Are you able to get a consistent repro?\n. Thanks for the info, this was very useful and I'm glad you figured it out. We could maybe show a better error message here, I'll re-open this issue just to track that. Feel free to let us know if you run into anything else!\n. Thanks for reporting this! We have fixed our handling of network failures in code-push-cli@1.12.5-beta: https://github.com/Microsoft/code-push/releases/tag/v1.12.5-beta\n. Looks good!\n. Thanks for updating with the fix @avishayil!\n. Hi @kiliwalk, that's an interesting issue. I will try to reproduce it, but in the meantime, it might help to know a few things about your setup:\nWhat Android version are you running?\nIs this on a debug/release build, and on an emulator or a physical device?\nWhat API are you using for network requests? e.g. Fetch\n. Hi @kiliwalk, so I was able to reproduce your issue with react-native@0.23.0-rc4 and react-native-code-push@1.10.0-beta. However, I was able to fix it by doing both of the following:\n1. Upgrade CodePush to the latest (react-native-code-push@1.10.2-beta)\n2. Upgrade React Native to the latest (react-native@0.23.1)\nThe life-cycle of the cookie manager in react-native is a little complex, and it doesn't seem to be handled correctly by the hard restart mechanism we were using in 1.10.0. Since 1.10.0, we've switched to a more lightweight restart mechanism that is quicker and less obtrusive for the end user, however it seems to suffer from a different issue that was fixed as a side effect of the latest version of react-native.\nSo, upgrading both should fix it for you. Please let me know if that works!\n. I'm so sorry about the inconvenience, and we'd definitely like to make the native upgrade experience smoother. Also, we absolutely love suggestions and are always looking to improve! If you don't mind I have a few questions:\n1. With the --download-url flag, would that be the URL of the release in the play store? We definitely have the capability to notify of available store updates - would it be sufficient to display a dialogue that simply directs the user to the app store to get whatever is the latest release, or is it important to have a specific URL?\n2. By app-level diff, do you mean a diff that includes the native code? We do already have diffing of the script and assets we currently push over the air, although patching native code is very technically challenging.\n. Looking at our server logs, it looks like your releases are timing out on our server. We've definitely had issues connecting with users specifically in China and are looking at geo-distribution options over the next few weeks.\nAs you're in a hurry, I will increase our timeout threshold to 2 hours so that you're unblocked for now, at least until we have a permanent fix. Thanks so much for being patient, and I will get back to you as soon as this change is deployed!\n. Hi @xhacker5000, we've deployed that change for you. Can you confirm that you're unblocked for now? We will continue looking at a long-term fix in the meantime.\n. The whole package, including [a.png], will be uploaded from the CLI, but when the client receives the update, they will download only the files that have changed. Out of curiosity, how big is your package?\nGenerating the diff from the CLI rather than the server is certainly an option for speeding up the upload! It would mean we'd have to download the metadata for the previous package(s) that we'd like to diff against though. We'll have to think about the pros and cons of this approach, tagging @shishirx34 as he is working in this area.\n. Hi @ghalong, this is certainly unusual - is the reason they are in separate directories because you own a native app that embeds react-native code?\nWe can look into possibly adding an option that allows you to specify the location of your gradle file, but in the mean-time a good workaround would be to just specify the --targetBinaryVersion flag, which will skip that step.\n. Hi @rahuljiresal, this normally indicates some kind of issue where the hash of the package computed on the server doesn't match the hash computed on the client. Would it be okay with you if I inspected the contents of your package? If so, could you email me at rihua@microsoft.com with your deploymentKey and release label?\n. @mvayngrib - notifyAppReady() (or sync(), which calls it internally), need to be called at some point in the first run of the update to mark it as successful. The second time the app is booted, it will check if the update was marked as successful. If not, it will be rolled back.\nWe recommend making one of these calls immediately in your root componentDidMount() (and in fact if you wrap your root component we do this for you), because the user could quit the app at any moment, including immediately after it loads. So, if you only have a single call to sync() a minute after the app loads, and a user quits the app 30 seconds into the first run of the update, it will be rolled back the next time the app is booted.\nNote that the intent of the rollback feature is to ensure that your update is well formed and loads successfully, not that it is free of errors during the whole lifecycle of its execution. I hope this makes sense!. Looks good!\n. Hey @brunobar79, just checking in - were you able to resolve your issue with the fix we shipped?\n. Looks good!\n. Hey @mtunique, sorry about this! I'll be looking into this tomorrow.\n. #421 should fix this :)\n. @tomauty, @iniestano8, are you still seeing your issues?\n. Aside from the backgroundDuration comment, LGTM!\n. I love this, the implementation is very clean! Just left a bunch of comments/ideas on documentation and API shape, probably of varying degrees of quality, that would be cool to hear your thoughts on.\n. Hey @jkrems, that's a cool idea, although I just want to understand a little bit more about the use case you have in mind. When you mention needing to bump your major version constantly, are you doing this so that older updates are not applied to newer binaries? Or are you referring generally to the problem of having a hybrid native/React-Native app, where the native part churns a lot independently of the React-Native part of the app?\nI'm assuming you know that we can release to a range of semvers, and that doesn't quite address your needs?\n. Gotcha. This is a good idea, and it can possibly be linked to another issue we have with beta distribution where the app store version is not typically updated. Is this urgent or blocking for you? I'd like to discuss it with the team next Tuesday, but can expedite things if needed.\n. @jkrems - Okay, so let me know if you think this is the cleanest way to do it. What we're currently thinking is just an extra optional argument to the native constructor (which sets the ABI globally). There wouldn't be any option to dynamically change it during the running of your app (although that could be added in future as options to sync() and checkForUpdate()). Does that make sense to you?\n. Hi @ilovell, did you follow the RNPM installation steps or the manual way? Would you be able to show me the contents of your build.gradle file? If you can't post it here because it's sensitive, you're also welcome to email me.\n. Hey @ilovelll, I think in this line:\napply from \"../../node_modules/react-native-code-push/android/codepush.gradle\"\nYou missed a : character after from (see the line above it). Once you uncomment that line and add the :, does it build successfully?\n. Great, no worries! Let us know if you run into any other issues.\n. No probs, feel free to reach out anytime!\n. (edited for clarity, as my initial phrasing was confusing)\n@jhabdas: The deployment key only gives access to the latest version of the source that was explicitly released on that deployment, and hence it's only as secret as the source is. For apps that are open source to begin with, this is a non-issue. For apps that are closed source, the deployment key won't be visible to you.\nOf course, if you have the app installed on your device, as RN uses client-side languages it is possible to reverse engineer it to get the deployment key, but if you have that capability then you already have the ability to get the source, and the deployment key doesn't give you anything extra.\nWe can certainly change the install docs to encourage loading it from a config file or the like, but my intuition is that it doesn't matter too much. I'm happy to hear your thoughts though - does this make sense to you?\n. Ah, I see where your concern is. No, a deployment key doesn't give you any kind of ability to write to the deployment, it only gives you the ability to download the latest update on that deployment (read-only access). In some of our early mockups, you'd even email the deployment key to beta testers who you wanted to install your app. Basically, if you have access to view the source of an app, you already have access to everything the deployment key would give you.\nBeing able to publish updates to the deployment, on the other hand, requires you to have access to the developer's account on CodePush, which requires either OAuth credentials or a separate 'access key' credential for the CLI that is never used anywhere in our SDK's.\nDoes that make sense to you?\n. I realized my initial comment was kind of confusing/misleading, so I tidied it up a bit! If you still have concerns, please let me know.\n. Hi @Sciandra-Leva, please check out #153, which might give you more information about this specific problem. Does that help?\nAs we've gotten this multiple times, I'll leave this issue open to track adding more documentation (and, if feasible, devising some kind of fix or workaround). We are definitely open to ideas here!\n. @chirag04: RN 0.30.0 was just released a few days ago with some breaking changes, and we haven't validated its compatibility with CodePush yet, so it's certainly possible that some features have been broken. Just a few questions to help us diagnose this:\n- Are you running on Android or iOS? Are you running the latest react-native-code-push version?\n- Just to double-check, you've followed these instructions: https://github.com/Microsoft/react-native-code-push#plugin-configuration-ios?\n- This was working for you before RN 30, and then got broken after you updated?\nThanks heaps for this report - we will likely validate RN 0.30.0 tomorrow, perform any fixes if needed, and update our compatibility chart.\n. Looks good!\n. @huitsing, did you still need help with this issue?\n. Thanks, looking forward to getting to the bottom of this!\n. Hi @huitsing, just a friendly ping! Were you able to repro the crash?\n. Thanks @huitsing, I'm glad it's working now :)\n. We have tested it and have not found any critical issues. #442 is still being investigated, but it's not clear that it is linked to RN 0.30. We'll do more rigorous checking and update our documentation on Monday (PST).\n. Looks good! Thanks for taking care of this :)\n. Looks good!\n. @nazywamsiepawel, did you still need help with this?\n. Would it be worth doing something to check that the app version is semver and/or allow them to change it?\n. Looks good!\n. A few things we can try here:\n1. What do the CodePush logs say when you test it locally if you substitute in the production key? You can use any log viewer or the code-push debug command to see them.\n2. Do you see any installs or rollbacks in your deployment history? code-push deployment history <AppName> Production\n2. Just as a sanity check, you've double checked that the deploymentKey is configured correctly in your app?\n. Nice catch - I'll tidy that up!\n. Looks good! Might talk to you about the tests later\n. @lekenny, did you still need help with this?\n. Thanks so much for contributing this! It looks great, I'll let @geof90 have a quick look too before we merge it.\n. Thanks heaps for your contribution @madsleejensen :)\n. Looks good!\n. Thanks for the issue and update @greena13, this is helpful!\n. Thanks for diagnosing this @greena13! We will have react-native link working properly for our plugin in our upcoming release today.\n. Looks good!\n. Looks good!\n. Looks good!\n. Wow! That was fast! Well done on diagnosing the issue, and thanks for the PR. I'm happy to merge it as long as the #if guard is removed, and it's up to you if you'd like to make the other changes (I'm happy to make them if you don't want to).\n. This fix is now available in 1.15.0-beta. Release notes can be found at: https://github.com/Microsoft/react-native-code-push/releases/tag/v1.15.0-beta.\n. @kenwheeler, @steffenmllr, was there anything else you'd like to know? Feel free to ask if you need more clarification.\n. Hi @colus001, the only reason an app will ever rollback is if CodePush.notifyAppReady() was not called on the first run of the app. If you wrap your root component as in the getting started, or you call CodePush.sync() on componentDidMount(), this should be called behind the scenes for you. Have you done one of these two things?\nIf you have set up CodePush correctly, the only reason CodePush.notifyAppReady() would not be called is because you released an update that crashes before it can be called, for example if you release an Android update to an iOS deployment, or there is some exception as your app boots up.\nJudging by your description, it sounds like CodePush is rolling back your app gracefully, and any crash would be originating from your app and not CodePush itself. As CodePush is not a crash reporting service, we do not provide you with information about why your app crashed, and it is up to you to use your own crash reporting service, which you'd need regardless of whether you used CodePush.\nTo be clear, we do offer multiple ways of diagnosing what is happening with your app:\n- The code-push deployment history command shows you how many installs, rollbacks, and active users you have on each version of your app.\n- We do actually emit logs as you requested. You can see this by running your app while it is connected to your machine, and using a log viewer or running code-push debug on a terminal.\n- We are working on integration scenarios with other crash reporting services.\nDoes this help?\n. @colus001 - to re-iterate, have you tried any of the things I mentioned to help you out?\n1. How are you calling CodePush? Did you wrap your root component, did you call CodePush.sync() in your componentDidMount(), or did you do neither (that would be a problem)?\n2. What does code-push deployment history show?\n3. Have you tried to look at the logs emitted from the app and from CodePush, for example by running code-push debug while the app is connected to your machine?\n4. Have you tried any kind of general-purpose debugging? As mentioned before, we've done everything we can to let you know that the app rolled back, that the reason is that CodePush.notifyAppReady() was not called, and then if it's a crash it's up to you to figure out what it was. For example, if it is indeed a crash as you claim, do you have a stack trace?\n5. Another possibility - is it possible that you're releasing script assets that depend on a native change?\n. I'm going to close this for now, but please comment again if you need further help!\n. Looks good!\n. Looks good!\n. Not a big deal, but there were some small issues with this PR (which has not been released to npm yet) that I've fixed in #526!\n. This fix is now available in 1.15.0-beta. Release notes can be found at: https://github.com/Microsoft/react-native-code-push/releases/tag/v1.15.0-beta. Thanks so much for the patience, and we look forward to your feedback! Please let us know if you still run into any issues.\n. Looks good!\n. @tsambora, did you still need help with this?\n. Is it possible that you published an iOS update to the same deployment, instead of an Android one? We recommend that iOS and Android be kept as separate CodePush apps to avoid confusion.\n. Thank you @sopaco! We are soon hoping to add built-in platform support (distinguishing between iOS and Android) for apps, but we're not there yet.\n. Hi @sopaco, I'm not sure I follow - so you're saying every asynchronous operation in your app is blocked by CodePush? I'm not sure that makes sense to me - how did you verify that CodePush is the cause of this?\n. Hi @sopaco, did you still want to follow up on this issue?\n. Are you blocked on other network calls while an update is downloading? That could be a possible explanation. (I doubt an update check would use much network at all, so it would purely be the cost of downloading the update when there is one).\nHow long are your operations blocked for, and does that time period correspond to any CodePush activity? Can you show us where you are making the await operations?\n. @sopaco - The download should happen asynchronously, so that other activities are not blocked, however it may be competing for network resources.\nHow big is your update, and how fast is your connection? I am also assuming that you're located in China - we will be rolling out a CDN with our next update which will improve the download speed.\n. Thank you for filing this and posting the fix, much appreciated!\n. @jerson, sorry about the delay - I will try to get onto this today!\n. @jerson, @alexHlebnikov - to be clear, does this happen on RN 0.33?\n. Comparing the stack trace to our repo, it looks like the problem happens in CodePush.getUpdateMetadata(). I wasn't able to reproduce the problem without calling this function, so I'll try adding it in and see if it shows up. In the meantime, if anyone has any guidance on where they are specifically calling this, and with what arguments, to cause the crash, that would be really appreciated!\n. I was able to reproduce the crash in the following conditions:\n1. The app is running the script version that was bundled with the binary (i.e. no CodePush updates installed yet)\n2. A CodePush update has been downloaded, but the app has not been restarted yet (the update is pending)\n3. CodePush.getUpdateMetadata() is called, either with no arguments or with UpdateState.RUNNING\nI am very confident that @cmcewen's PR fixes the issue, thank you!! I will make a release after we verify everything is working cleanly with RN 0.33 and 0.34, and then close this issue.\n. @jerson, that's strange, this seems like a different issue. I can't reproduce this, so I need a little more information (sorry for having so many questions, please answer whatever you can):\n1. Can you show me how you're calling CodePush?\n2. Is the crash happening before or after the restart?\n3. Are you sure it's a crash this time, and do you have a new stack trace?\n4. Are you running in debug or release, and presumably still on RN 0.33?\n. Ah - yes, this is a separate issue (specific to RN 0.34), and I will use #536 to track it. It's important to be clear about the RN version, because problems can be impossible to diagnose otherwise. Thanks so much for your patience, and I will try to address it over the next few days!\n. This fix is now available in 1.15.0-beta. Release notes can be found at: https://github.com/Microsoft/react-native-code-push/releases/tag/v1.15.0-beta. Thanks so much for the patience, and we look forward to your feedback! Please let us know if you still run into any issues.\n. Which version of RN/CodePush/iOS are you running? We will try to look at this within the next two days.\n. @xlj44400, @iZaL - which versions of RN, CodePush, and iOS are you seeing this on?\n. @xlj44400, @iZal - I think I've found the code causing the problem and fixed it in #526.\nThe bug was merged into master but not yet released to npm. Can you confirm that you found this issue while running the CodePush version on our master branch, possibly with the example app? We've traditionally done most of our testing before npm releases, but in future we will aim to do more up-front so that our master branch is stable.\n. Also, note that once you've synced to the latest commit, you'll need to delete the react-native-code-push folder in your app's node_modules (rm -r <AppName>/node_modules/react-native-code-push), and then run npm install again, because npm doesn't automatically detect changes in local file dependencies.\n. Thanks for filing this. RN 0.33 is not on our list of supported versions yet, but we will test it and iron out any issues over the next two days before updating the docs/pushing out a release. Thanks for your patience!\n. @chetstone, @legander - sorry about the delay. I will try to look at this today!\n. @chetstone, @legander - Sorry for the delay. I'm having significant difficulty getting my hands on an iOS7 device, or even simulator (it is not supported at all on OS X El Capitan).\nIs iOS7 support truly important to you, keeping in mind that less than 3% of iOS devices are running it (and decreasing everyday)? Are you sure that it's a CodePush-specific problem?\nI think that what you are looking for may be this PR submitted to React Native, specifically for networking calls when using RN 0.33 with iOS 7: https://github.com/facebook/react-native/pull/10013/files (https://github.com/facebook/react-native/pull/10013)\n. What version of RN/CodePush is running in your app? We will try to look at this over the next two days, although it may be difficult.\n. @joshuafeldman just a friendly ping!\n. Closing this so that we can use #515 to track it\n. We will have a look at this within the next two days!\n. Thank you, this extra information is very valuable. When you say 'trigger codepush', are you talking about the checking for the update, or the installing of it once the update has already been downloaded?\n. @rogerkerse, @15071304899: I am investigating this now, but just to make things a little easier for me, what versions of react-native and react-native-code-push are you using?\n. @rogerkerse, @15071304899 - just following up, can you let me know the versions of react-native and react-native-code-push you are using?\n. I set up an app with:\n- react-native-code-push 1.14.6-beta\n- react-native 0.33.0\n- iOS 10.0 (simulator)\n- Both immediate and resume-based checks/installs\nAnd I wasn't able to reproduce any problems. With the resume-based, it did the check/download on the first resume, and then loaded the updated app on the second resume. With the update dialog-based install, it immediately applied the update.\n@rogerkerse, @15071304899 - if you're still running into this problem, please let me know what versions of react-native and react-native-code-push you are using.\n. @davidsalib, yours seems to be a different issue - I will follow up with you in #544.\n. @rogerkerse, @15071304899: If you were running the version of react-native-code-push that was on master (as opposed to a released npm version), then I am almost certain that it is fixed with #543. If this is true, and you'd like to test it, you'll need to clean install your npm dependencies and do a clean build. Please let me know if that fixed it for you!\n. This fix is now available in 1.15.0-beta. Release notes can be found at: https://github.com/Microsoft/react-native-code-push/releases/tag/v1.15.0-beta. Thanks so much for the patience, and we look forward to your feedback! Please let us know if you still run into any issues.\n. @sopaco: CodePush has a rollback feature that protects you from bad updates - if CodePush is not called in the first run of an update, the CodePush SDK will assume that it has crashed, and undo the update the next time the app is restarted. That update will also be 'black-listed', so that it won't be applied again.\nDoes this make sense to you? If you run code-push deployment history <appName> <deploymentName> from the CLI, what do you see?\nAs for why your app is rolling back, can you show me how you're calling CodePush?\n. @sopaco, did you still need help with this?\n. This is similar to #696 but I will address it here in case the root cause is different.\n@rt2zz, @silentcoast, are you wrapping your root component like this: https://github.com/Microsoft/react-native-code-push#plugin-usage?\nTo clarify - CodePush has a notifyAppReady() function that needs to be called when an update is loaded successfully, that marks the update as 'successful'. If this is not called at some point in the first run of an update, it will be rolled back the next time the app restarts. We recommend just calling this in your componentDidMount(). Actually, the wrapper above will just do that for you, so that you technically don't need to know about this at all.\n(As an alternative, CodePush.sync() also calls notifyAppReady() internally, but you may not be calling sync() on every run of your app)\nDoes this help?. @vojtechnovak - yes - currently, we don't have any logic to distinguish between the two platforms, so it's important that they are kept separate. If you publish an iOS release to an Android app or vice versa, it'll crash and be automatically rolled back.\n. @geof90 - Just a heads up, I tested it and I don't think this is it... Turns out that change made it into 0.34 but not 0.33\n. Hi @sbycrosz, I'm unable to reproduce this on RN 0.33. Are you sure you got this on RN 0.33? And the problem went away when you used RN 0.32?\n. @DanDance, @sbycrosz - are you seeing this in debug mode only? Is it possible that what you're seeing is this? https://github.com/Microsoft/react-native-code-push/issues/438\n. @sbycrosz - thanks so much for the stripped down repro. I was able to reproduce it, and upgrading to react-native-code-push 1.14.6-beta actually fixed the problem. I'm not sure which release fixed this as we have had many releases since 1.13.2-beta, but it's possible that it was the loader fix that was shipped in 1.14.6-beta (release notes).\nPlease let me know if that works for you! If you'd like RN 34 compat, we will also be making a new release in a day or two.\n@DanDance also!\n. Thanks for filing this! As this is an issue on the CodePush CLI, I've moved this to https://github.com/Microsoft/code-push/issues/326 and will follow up there.\n. Could you try running react-native link react-native-code-push instead of rnpm link?\n. Hi @joeytat, @fanyuRN, @Lughino - I am investigating this now and would really appreciate your input. The linking script looks for the following lines (or similar) in AppDelegate.m in order to patch them for CodePush, and appears to be unable to find them:\n```\njsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index.ios\" fallbackResource:nil];\nRCTRootView *rootView = [[RCTRootView alloc] initWithBundleURL:jsCodeLocation\n                                                      moduleName:@\"DummyApp\"\n                                               initialProperties:nil\n                                                   launchOptions:launchOptions];\n```\nCan I ask if you have these lines in some other file (if so, which)? Was your app created from scratch with React Native, or are you integrating RN into an app that was originally built natively?\n. Thanks, this is really helpful.\n@Lughino - Did you have a jsCodeLocation = ... line in your AppDelegate.m originally, before you ran react-native link? Is it possible you had multiple AppDelegate.m files, for example if there was a sample app embedded in your repo somewhere?\n. It seems like there are two sources of error here:\n1. The regular expression used to find the jsCodeLocation = ... line failed to match newlines correctly (on Windows?) - @Lughino's PR to fix this has been merged into master, thank you!\n2. The line is in a file other than AppDelegate.m - I will consider adding some fallback logic to ask the user which file the line is in, or to specify manual install instructions.\n. This looks to be the same as #515, so I'm going to close this so that we can track it there. Thanks for filing this - based on your description, it seems like it's not a problem with RN 0.33, but with react-native-code-push 1.14.6-beta.\n. @StevePotter just tagging you on this issue (which is the same as #539) so that you can track it here! We are currently swamped, but I'll try to get onto this next week.\n. @StevePotter, @ljunb, @snowjade - I'm investigating this now and would love any information you could give about your setup. What is happening is that the linking script is looking for an Info.plist in the same directory as your AppDelegate.m, and failing. Do you happen to have multiple AppDelegate.m files, or anything else unusual about your setup?\nFor reference, here is the offending code:\n```\nvar appDelegatePath = glob.sync(\"*/AppDelegate.m\", ignoreNodeModules)[0];\n// Glob only allows foward slashes in patterns: https://www.npmjs.com/package/glob#windows\nvar plistPath = glob.sync(path.join(path.dirname(appDelegatePath), \"Info.plist\").replace(/\\/g, \"/\"), ignoreNodeModules)[0];\nvar appDelegateContents = fs.readFileSync(appDelegatePath, \"utf8\");\nvar plistContents = fs.readFileSync(plistPath, \"utf8\");\n```\n. @stewart42 - I am fairly sure that your issue is related to a breaking change in RN 0.34, so I'm moving your issue here:\n- react-native-code-push version: 1.14.6-beta\n- react-native version: 0.34\n- iOS/Android version: Android 7.0\n- Does this reproduce on a simulator, or only on a physical device? physical device (Nexus 5x)\n- Repro steps and/or stack trace:\nconst codePushOptions = {\n    checkFrequency: codePush.CheckFrequency.ON_APP_RESUME,\n    installMode: codePush.InstallMode.ON_NEXT_RESUME,\n    mandatoryInstallMode: codePush.InstallMode.IMMEDIATE,\n};\n- upload a new bundle to code-push servers\n- pause the activity \n- resume the activity\n- codepush downloads new bundle\n- pause the activity\n- resume the activity and then below happens\n  1. The exception java.lang.NoSuchMethodException: createFileLoader [class android.content.Context, class java.lang.String] occurs at L116\n  2. then an exception java.lang.NoSuchFieldException: No field mJSBundleFile in class Lcom/facebook/react/XReactInstanceManagerImpl; (declaration of 'com.facebook.react.XReactInstanceManagerImpl' appears in /data/app/com.xxxxxxxx.android.debug-1/base.apk) is raised at L122\n  3. the outer catch then triggers loadBundleLegacy() which attempts to recreate the activity\n  4. once the activity is recreated the onHostResume event fires L434 and loadBundle is called looping back to the first excpetion above\nWe are imbedding this in an existing app that does have multiDexEnabled set to true, not sure if this is relevant?\nAny ideas what I am doing wrong? \n. We will address this early next week, but if a fix is needed immediately, you could downgrade to  RN 0.33.0. Thanks to @geof90 for identifying the cause:\nThis is (yet another) breaking API change to JsBundleLoader.createFileLoader in RN 0.33 (it no longer requires a Context to be passed to it). See the related commit: https://github.com/facebook/react-native/commit/0c2fdf4b6af3c4193d351ed615b9fc12c941173a#diff-e110fa648a5e434c9533e8e35b5b1f6dR50\nWe need to change this line https://github.com/Microsoft/react-native-code-push/blob/master/android/app/src/main/java/com/microsoft/codepush/react/CodePushNativeModule.java#L116 in our code.\n. @stewart42 - sorry I didn't reply! We generally try to support older versions of RN for as long as possible, as not everybody updates to the latest version, and we still want them to be able to receive the latest CodePush features and fixes. I've put our PR #557 which maintains backward compatibility - thanks so much for helping to validate the fix!\n. 22d2a146d2901857714eafa2552d68264b87137e has been lightly tested on both iOS and Android against RN 0.34.1 and should be stable. Alternatively, I am trying to get two more small additions into the next release, and that should be published and well-tested within the next two days.\n. v1.15.0-beta has been published, and has been tested up to React Native 0.35.0! Release notes can be found at: https://github.com/Microsoft/react-native-code-push/releases/tag/v1.15.0-beta. Thanks so much for the patience, and we look forward to your feedback!\n. This seems to be the same as #539 - I'm going to close it so that we can track it there! We're currently swamped, but I'll try to have a look at this next week.\n. Now that I look at it, this actually seems to be the same as #534 - I'll close this one too so that we can track it there.\n. Thanks so much for your detailed investigation of this! As I'm fairly sure this is an issue related to RN 0.34 support, I'm going to close this so that we can use #536 to track it.\n. No worries, thanks so much for the update @igorclark and feel free to come back if you have any other issues!\n. Yes - the recommendation is to use separate CodePush apps. Apologies for the confusion! We will clarify it in the README, and we also have future plans to improve the way we handle different platforms of the same app.\nI'm going to close this for now, but please let me know if you have any other questions!\n. Hi @afilp - in this specific case, the CodePush SDK is smart enough to detect that the structure of the update does not match what is expected for the platform, and reject the update without disturbing the user (assuming silent mode).\nSorry for any concern this may have caused you! In future, we recommend creating a Staging version of your app pointing to your Staging deployment, and validating CodePush updates there first before running code-push promote to promote them to your Release deployment. As a last resort, we also have an automatic rollback feature that can sometimes save you if you push a bad update. Remember, with great power comes great responsibility!\n. @davidsalib - There are a few possible reasons I can think of:\n- The version running on your device isn't actually detecting an update. Is it possible that you are running a debug build in your simulator, and a release build on your device, and no deployment key (or the wrong deployment key) is configured for your release build? If you'd like to know for sure, you could maybe add some logging, or check whether an update is actually detected by hooking into codePushStatusDidChange() as shown here.\n- The update was applied once, but it was rolled back. This is unlikely given your description, but it might be worth checking the output when you run code-push deployment history for any rollbacks.\nFailing that, could you let me know the versions of react-native and react-native-code-push you are running?\n. Hi @davidsalib, did you still need help with this?\n. Hi @afilp - this is expected behavior. For it to do what you want you can do one of two things:\n- If you never want updates from past builds to be applied to newer builds, use the targetBinaryVersion flag. For example, you could set it to <= 1.0.0 or just 1.0.0, and then just make sure the versionName on your older build is 1.0.0 and the versionName on your newer build is something like 1.0.1\n- If you want to sometimes share CodePush updates between multiple builds, but your issue is that the build that you released is newer than what was already on CodePush, then what you should do is push a CodePush release of the contents of your newer build before you publish it to the store. Then, when your newer build checks for an update, it will see that the hash of the update is the same as what it already has, and not apply it. We recommend doing this regardless of anything else, because by uploading the version that is shipped with your binary, the server has something to diff against when you push your next update.\nThis should be mentioned in the documentation somewhere, but it may not be clear - if you can think of any way to make this more clear to new users, please let me know! Going to close this for now but please let me know if this helped.\n. Hi @afilp - on iOS the targetBinaryVersion option is also available, and refers to the CFBundleShortVersionString in your Info.plist. Due to potential issues with clocks being mismatched, CodePush doesn't attempt to compare the timestamp of a binary with an update to see if it was published 'before' or 'after', and only relies on what you explicitly specify using binary versions. Does that help?\n. Hi @afilp - that's strange, we have never seen this problem. Do you mind emailing us at codepush@microsoft.com with your deploymentKey, and we will attempt to verify this issue?\n. Hi @scerelli, is react-native a dependency in your package.json?\n. Ah - that's a great point! I've filed this request on the code-push repo (https://github.com/Microsoft/code-push/issues/331) so that we can follow up on this at some point. As you seem to have resolved it with a workaround, I'm going to close this one for now. Thanks for filing this!\n. Note that we can't resolve these fields statically unless we pin our minimum dependency version of react-native on the version where the public interface is introduced. As this would be a breaking change (older versions would then no longer be supported), we could potentially continue using reflection as a stop-gap for a few versions before pinning the minimum version.\nAnother option is to simply leave a comment in the RN codebase that will dissuade changes, or encourage them to tag us in the relevant PR's.\n. Hi @zvona, thanks so much for filing this and apologies for the slow response! That line has been removed and this has been merged into master. We should make a release sometime this week or next week.\n. (This was released in 1.15.1-beta (release notes))\n. Hi @sopaco, our rollback mechanism relies on CodePush being 'notified' that an update is successful. This helps us catch crashes, as well as situations where the bundle simply does not load. If you wrap your root component as advised in the getting started, we will call CodePush.notifyAppReady() automatically for you in your componentDidMount() so that an update is 'rubber stamped' as successful, and your updates should work as expected. Does this help?\n. @sopaco - you should do this:\n```\nlet codePushOptions = { checkFrequency: codePush.CheckFrequency.MANUAL };\nclass MyApp extends Component {\n}\nMyApp = codePush(codePushOptions)(MyApp);\n```\nThe wrapper component will call codePush.notifyAppReady() inside componentDidMount(), which is recommended. You can still manually call sync() wherever you like.\nI'm going to close this for now, but please comment if you need further help!\n. Hi @muyuballs, all of our releases are marked with the -beta tag, so running npm install react-native-code-push@1.15.0-beta should work. As it's the latest version, npm install react-native-code-push and npm install react-native-code-push@latest should also work.\nBy the way, are you filing this because you saw that version in the Supported Versions section of the docs? That might have been because the docs were updated a day or so before 1.15.0-beta was published, in which case I apologize for the confusion!\n. Thanks for this @hilkeheremans, this is a very clever fix! I just have some small style comments I left - if you could address those, I would love to merge this!\n. Great stuff :)\n. Hi @igorclark, this is the line in our source that deletes the generated bundle after it is released: https://github.com/Microsoft/code-push/blob/master/cli/script/command-executor.ts#L1184.\nWe don't currently have the resources to address this issue, but as a temporary workaround, maybe you could find that line in your global node modules and comment it out? Alternatively, if you wanted to submit a PR to customize the release-react command, we would love to look at it!\nFor some context, here is what the release-react command does: https://github.com/Microsoft/code-push/blob/master/cli/script/command-executor.ts#L1264\nAnd here is where command line flags are parsed: https://github.com/Microsoft/code-push/blob/master/cli/script/command-parser.ts#L414\nPlease let us know what you end up going with :)\n. Hi @ACCTFORGH, yes - any app with the key can receive updates. I don't agree that it's a security risk though - the deployment key only gives read access to the latest updates explicitly released on a deployment, and hence it's only as secret as the source is. If you have a copy of the app, and the capability to reverse engineer it to get its deployment key, then you have the same reverse engineering capability to get the source, and the deployment key doesn't give you anything on top of what you already have (you could just keep getting updates on your copy of the app and then reverse engineering it to get the source). Does this make sense?\nI gather that you're primarily concerned about keeping your source code secret from people who have downloaded your app. In this case, I believe this is not supported by React Native itself - see this discussion: https://github.com/facebook/react-native/issues/1093. As mentioned in that issue, code on the client is not secret - you should aim to keep any sensitive information on the server.\nRegarding your other question, CodePush stores the downloaded js bundle in the Android assets folder, so it's only as secure as the Android assets system is. Again, if your goal is to hide your source from people who have already downloaded a copy of your app, I'm not sure if React Native is the right platform for you (if it's even achievable on any platform).\n. @ACCTFORGH, thanks for that! I'm going to close this now, but please feel free to ask any additional questions.\n. Sorry, what were the steps you took to make this error happen?\n. Hi @mikelambert, apologies for the confusion here. To clarify - our recommended guidance is to make separate apps for each platform (i.e. MyApp-ios and MyApp-android). That way you can target changes on each platform separately and have different release cadences. As for the other subtleties raised in your question:\n1. CodePush deployments do not track, or have any concept of platform (Android/iOS)\n2. The release-react command can only release one platform at a time\n3. An Android bundle released to an iOS app, or vice versa, will be silently rejected by our SDK\nDoes this help?\nWe've tried to make this guidance clear (to have separate apps for each platform) in our docs, but as always there may still be room for improvement. If you have any suggestions, please let us know!\n. Ahh, I see what we missed! I remember adding that guideline somewhere in the getting started, but yes, we should really make it clear in the examples. Thank you!\n. I've updated the GitHub docs, the docs on the website will be updated later. Thanks :)\n. @sharingjingang050241 - so I gather you specifically want to change the deployment key on your new app to what it was on your old one? There is no way to do this as an end user, but if you'd like we can change it back for you. Please email codepush@microsoft.com with the following details:\n1. What is your current deployment key, and what would you like to change it to?\n2. Approximately when did you delete your old app? (We need to verify that the deployment key you are requesting actually belonged to you)\n3. What was the reason you deleted your old app? (This is purely for our own product improvement purposes)\nI'm going to close this issue for now, but I look forward to your email!\n. For anyone else reading this issue in the future, please note that we can no longer service individual requests to restore deployment keys. If you have removed your deployment by accident, please create a new deployment and ship an app store update with your new deployment key. We've also taken care to release a CLI update with a more severe confirmation prompt, to help reduce the likelihood of this happening in the future.. Thanks for filing this, these are extremely helpful! Will have a look at it over the next few days.\n. Hi @mrkhan2, I'm assuming you ran react-native link react-native-code-push. Could you maybe run through the manual install steps and verify that everything is correct? https://github.com/Microsoft/react-native-code-push#plugin-installation-ios---manual\n. Hi @mrkhan2, could you copy-paste the code that you used for your main component/entry file here? Alternatively, if you pushed your newly created React Native project to GitHub, perhaps we could have a look at it. (Note that you may be exposing your deployment key by doing this, so please replace it if you care about keeping it secret)\n. Hi @ninjz, I believe that when running in debug mode, React Native will force your app to load from the packager, regardless of what you have instrumented in code. More information here: https://github.com/Microsoft/react-native-code-push/issues/153\nDoes this resolve the problem for you?\n. Hi @StevePotter - we have actually gotten the same request and implemented this flag already! Please see: https://github.com/Microsoft/code-push/issues/255.\nI'm going to close this for now, but please let me know if that works for you!\n. Please see: http://microsoft.github.io/code-push/faq/index.html\n. Hi @seph14, could you upgrade to the latest CLI and try again? (npm install -g code-push-cli@latest). I suspect that your access key has expired, and if that is the case, the latest CLI will display a much better error message.\nSorry for the confusion, and please let me know if that resolves it for you!\n. @seph14 - I'm going to close this for now, but please let me know if you run into any more issues!\n. I was able to verify that everything is working smoothly on RN 0.36, with the exception of specifically immediate restarts, on Android specifically. Most of our users are not using this method to install their updates, but if anybody is urgently in need of this, please upvote/comment and I will prioritize accordingly!\n. Basically, something has changed in React Native that has caused the mechanism we use to restart/re-construct the app to crash (hence why it only affects IMMEDIATE/ON_NEXT_RESUME). I am investigating it now, but if anyone has any pointers that would also be really appreciated! This is the stack trace, it seems like the old instance of the app is not cleanly destroyed.\nW/unknown:React: Tried to enqueue runnable on already finished thread: 'native_modules... dropping Runnable.\nW/MessageQueue: Handler (com.facebook.react.bridge.queue.MessageQueueThreadHandler) {ca8f682} sending message to a Handler on a dead thread\n                java.lang.IllegalStateException: Handler (com.facebook.react.bridge.queue.MessageQueueThreadHandler) {ca8f682} sending message to a Handler on a dead thread\n                    at android.os.MessageQueue.enqueueMessage(MessageQueue.java:543)\n                    at android.os.Handler.enqueueMessage(Handler.java:643)\n                    at android.os.Handler.sendMessageAtTime(Handler.java:612)\n                    at android.os.Handler.sendMessageDelayed(Handler.java:582)\n                    at android.os.Handler.post(Handler.java:338)\n                    at com.facebook.react.bridge.queue.MessageQueueThreadImpl.runOnQueue(MessageQueueThreadImpl.java:61)\n                    at com.facebook.react.bridge.queue.NativeRunnable.run(Native Method)\n                    at android.os.Handler.handleCallback(Handler.java:751)\n                    at android.os.Handler.dispatchMessage(Handler.java:95)\n                    at com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:31)\n                    at android.os.Looper.loop(Looper.java:154)\n                    at com.facebook.react.bridge.queue.MessageQueueThreadImpl$3.run(MessageQueueThreadImpl.java:196)\n                    at java.lang.Thread.run(Thread.java:761)\nW/unknown:React: Tried to enqueue runnable on already finished thread: 'native_modules... dropping Runnable.\nW/MessageQueue: Handler (com.facebook.react.bridge.queue.MessageQueueThreadHandler) {ca8f682} sending message to a Handler on a dead thread\n                java.lang.IllegalStateException: Handler (com.facebook.react.bridge.queue.MessageQueueThreadHandler) {ca8f682} sending message to a Handler on a dead thread\n                    at android.os.MessageQueue.enqueueMessage(MessageQueue.java:543)\n                    at android.os.Handler.enqueueMessage(Handler.java:643)\n                    at android.os.Handler.sendMessageAtTime(Handler.java:612)\n                    at android.os.Handler.sendMessageDelayed(Handler.java:582)\n                    at android.os.Handler.post(Handler.java:338)\n                    at com.facebook.react.bridge.queue.MessageQueueThreadImpl.runOnQueue(MessageQueueThreadImpl.java:61)\n                    at com.facebook.react.bridge.queue.NativeRunnable.run(Native Method)\n                    at android.os.Handler.handleCallback(Handler.java:751)\n                    at android.os.Handler.dispatchMessage(Handler.java:95)\n                    at com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:31)\n                    at android.os.Looper.loop(Looper.java:154)\n                    at com.facebook.react.bridge.queue.MessageQueueThreadImpl$3.run(MessageQueueThreadImpl.java:196)\n                    at java.lang.Thread.run(Thread.java:761)\n. It seems like the onHostResume() event on React's LifeCycleEventListener has been modified to fire immediately when added if the app is in the foreground, rather than waiting for it to be backgrounded and then resumed. This has caused a few downstream effects which I'm still investigating.\n. Hi @benedicthsieh - my sincere apologies, we will release a compatible update for RN 0.36 and 0.37 today or tomorrow. In the mean-time, I think the best way would be to patch the offending release using the code-push patch command.\n. I was able to fix the crash and rollback (originally caused by our resume handler being triggered twice due to a change in RN's LifeCycleEventManager).\nSeparately, I was not able to prevent the following warning being logged to the console on immediate/resume-based restarts when run in debug mode. It is coming from somewhere in React Native, but I'm unable to pinpoint exactly which object is attempting to queue the Runnable, as the behavior changes when breakpoints are set.\nHowever, this warning seems to be completely benign - it will be logged to the console anywhere from 0-2 times on restart, and appears to depend on the order in which React Native objects are re-initialized. Other than that, there are no ill effects.\nW/unknown:React: Tried to enqueue runnable on already finished thread: 'native_modules... dropping Runnable.\nW/MessageQueue: Handler (com.facebook.react.bridge.queue.MessageQueueThreadHandler) {ca8f682} sending message to a Handler on a dead thread\n                java.lang.IllegalStateException: Handler (com.facebook.react.bridge.queue.MessageQueueThreadHandler) {ca8f682} sending message to a Handler on a dead thread\n                    at android.os.MessageQueue.enqueueMessage(MessageQueue.java:543)\n                    at android.os.Handler.enqueueMessage(Handler.java:643)\n                    at android.os.Handler.sendMessageAtTime(Handler.java:612)\n                    at android.os.Handler.sendMessageDelayed(Handler.java:582)\n                    at android.os.Handler.post(Handler.java:338)\n                    at com.facebook.react.bridge.queue.MessageQueueThreadImpl.runOnQueue(MessageQueueThreadImpl.java:61)\n                    at com.facebook.react.bridge.queue.NativeRunnable.run(Native Method)\n                    at android.os.Handler.handleCallback(Handler.java:751)\n                    at android.os.Handler.dispatchMessage(Handler.java:95)\n                    at com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:31)\n                    at android.os.Looper.loop(Looper.java:154)\n                    at com.facebook.react.bridge.queue.MessageQueueThreadImpl$3.run(MessageQueueThreadImpl.java:196)\n                    at java.lang.Thread.run(Thread.java:761)\n. I have released the fix to react-native-code-push@1.16.0-beta (release notes). Please feel free to use RN 36 and 37!\nIn future we will endeavor to ensure compatibility earlier in the cycle, including verifying React Native 0.38.0 before it comes out next week.\nPlease let us know if you have any feedback!\n. @jerson, @codyhazelwood, @tomauty, @ivpusic, @EladPlayground, @benedicthsieh \n. HI @burgalon, that is a warning rather than an exception, and it seems to be benign. Basically, when the app restarts, there may be some messages left in the queue targeting the old React Native instance. These messages will be dropped, but that's okay because that's what we want (we're rebooting the app from scratch).. @stewart42, sorry about the slow response. Does @quinnliu's fix work for you by any chance?\n. Thank you for the details - I suspect the issue is either with our compatibility with CocoaPods, or with RN 34. @bendellarocco, are you using CocoaPods? Also when you say 'react 25', do you mean react-native@0.25.0?\n. I tried a simple barebones app with react-native@0.34.0, react-native-code-push@1.15.0-beta, and installation using react-native link, and was not able to reproduce.\nI will follow up by trying the same thing with CocoaPods, and then the same thing with react-native@0.25.1 (it is possible they are two separate issues).\n. I am still unable to reproduce with react-native@0.34.0, react-native-code-push@1.15.0-beta, and CocoaPods this time. @stewart42, @shrutic - are you able to show me your repo somehow? If not, would you like to do a Skype session sometime?\n. Are you all using swift?\n. Okay, so I've set up a project from scratch using Swift and I've reproduced the issue! Thanks for your patience, fix will be coming shortly.. I'm going to estimate 3 days on this, apologies for the wait!. The fix has been tested and published in react-native-code-push@1.16.1-beta (release notes). Thank you so much for your patience, and feel free to come back if you run into any other issues!\n@stewart42 @quinnliu @shrutic @bendellarocco @dcvz . Just to double check, if you do a clean and then build, this still reproduces?\n. Closing this until we get more feedback that it is needed!. Great catch. It's strange because this had definitely been tested and was working before - from my brief research it looks like Java often (but not always) does optimizations to re-use the same object when they are the same string. Thanks so much for finding this!\n. I will make sure this is released soon.\n. Sorry for the delay, and thanks for the contribution @mkonicek!\n. By the way @mkonicek - in which version of RN did you start distributing the Android artifacts via npm instead of maven?\n. Hi @ljhender, I believe I know the root cause - it should be fixed in master, and I'll publish a release with the fix today.\n. Hi @ljhender, react-native-code-push@1.15.1-beta has been published with a fix for this (release notes). Please let me know if that resolves it for you!\n. Hi @L-Jovi, unfortunately we don't currently have an on-premise solution. For now, we recommend just using the official CodePush server - you are welcome to build your own, but keep in mind that we cannot guarantee compatibility with any unofficial servers, especially as new features come out in the future. I hope this helps, feel free to ask any additional questions!\n. Hi @DeDuckProject, there is a --targetBinaryVersion flag (documentation) that you can use here to explicitly specify the app version(s) that you'd like to target. You can specify this manually, or if you'd like, you could also automate this by writing some kind of script. Does that help?\n. This is a tricky one... could you perhaps show me the output of code-push deployment history <AppName> <DeploymentName>?\n. I can't see what codePushOptions is from your screenshot, but is it possible that the this pointer is not binded correctly for codePushStatusDidChange?\nAlso, here is a working example: https://github.com/Microsoft/react-native-code-push/blob/master/Examples/CodePushDemoApp/demo.js\n. Glad you were able to solve it!\n. Ah - thank you!! We've been trying to figure out all of the issues with the linking script but it's been difficult to know what is different on people's machines. This is extremely helpful!!\n. Hi @Ape-Bite-Apple, are you intending to submit an issue or a PR? If your intention is to submit a PR, I'm afraid you've selected the wrong branch.\n. @Ape-Bite-Apple - it seems like you intended to file an issue. Are you using the code-push release-react command? I believe that should solve your problem. In the mean time, I'm going to close this pull request, but feel free to ask additional questions.\n. HI @cooperka, this may be very problem-specific, but if you wipe the data on the simulator (it should be available as a menu option) and re-deploy the app, it should behave as if it was a fresh install and apply the original version you intended. Does that solve the problem for you?\n. I'm going to close this for now seeing as there is a workaround, but if there are more requests to disable rollbacks we can re-visit it!\n. Thanks for your contribution @dingbat!\n. @Lughino - Ahh, this explains a lot! I'm guessing this is a Windows vs OS X problem. Thanks so much for your contribution, I will merge this.\n. Hi @kiranruth, which version of npm are you using? I'm assuming that you ran this from the root of your project, which already has a package.json set up?\n. Do you mind showing me the contents of your package.json?\n. Closing this for now, but feel free to reopen!. Yes, sorry about that! If you upgrade to the latest CLI (npm install -g code-push-cli@latest), we will have fixed that error message.\n. Hi @faceyspacey, I think what you might be looking for is the deployment history command, which will show you whether or not you have a mandatory release in your history. If you do, then you are right that the latest release will 'inherit' the mandatory attribute. If this is indeed the cause and you'd like to change it, you can patch the release to no longer be mandatory.\nDoes this help?\n. Hey @faceyspacey, in answer to your questions:\n1. We have some hashing logic to ensure that if the version of the script code running in the binary is identical to the CodePush update that would be applied, the SDK will report the app as already up-to-date. Is this not the case for you (i.e. are you sure there isn't a tiny difference between the uploaded CodePush update and the version you're shipping to the store?)\n2. You can indeed modify older releases, you just need to use the --label <releaseLabel> flag :)\n3. For your issue with your intro animation being interrupted, I'd recommend using the disallowRestart() and allowRestart() methods to delay the restart until after the animation. If you also have an issue with the animation being played through twice, maybe you could save some state locally to ensure that it is not played the second time.\nI'm not sure if the discoverability of these features is a problem - let me know if you have any ideas to improve it :)\n. Hi @aqnaruto, I'm not sure if your problem is solved now, but if not, can you show me the contents of Main.js?\n. Thanks for your contribution!\n. Hi @tobiaskiel, thanks for this detailed issue. react-native-code-push@1.15.1-beta is not actually compatible with react-native@0.36.0 - we recommend upgrading to react-native-code-push@1.16.0-beta (release notes), which was recently released.\nWe try and keep our compatibility list up-to-date on our README, but I understand that it's not always obvious where to look. In future we will try to solve breaking issues earlier so that we can guarantee that the latest CodePush release is always compatible with the latest React Native release.\nAs a side note, I'm also assuming that you've wrapped your root component as described in the Plugin Usage, with a checkFrequency of MANUAL. If this step is skipped, it would also cause rollbacks.\nDoes this solve the problem for you?\n. I am glad that helped! Going to close this issue now, but feel free to come back if you have any other issues!\n. @chetstone For the behavior in the debug build, I wouldn't worry as your app is likely still loading from the packager (React Native coerces it into doing so). A lot of our users don't test CodePush in debug, but if you'd like to do so there are some more details in #153 and a workaround in #438.\nI believe that the crash that you're seeing happens when codePush.getUpdateMetadata() is called in a specific situation, and can be fixed by upgrading to the latest react-native-code-push (1.16.0-beta). If you'd like more details, the bug is #515, which was fixed in react-native-code-push@1.15.0-beta (release notes).\nPlease let me know if that solves the problem for you!\n. @chetstone - You shouldn't need to upgrade React Native, it should just work. To keep your mind at ease, we try to keep our compatibility table up to date here. Please let me know how that goes!\nAnd yes, thank you for the feedback about debug builds. We'll try and go through everything again and figure out the setup that makes the most sense, although it might be a week or two.\n. LGTM!. Tagging @SimchaShats as their issue is a duplicate of this one.. Are you all running react-native-code-push@1.16.0-beta, or do some of you have earlier versions? And are you all on RN 36/37?. Hi all, I've tested this with our sample app with RN 0.37 and CodePush 1.16 and have been unable to reproduce it. I can try this with a different app, but in the meantime, is it possible that you have a prior mandatory release (between the version originally running on the device, and the latest version) that is causing your latest release to be converted to mandatory?\nMore documentation on that behavior here: https://github.com/Microsoft/code-push/tree/master/cli#mandatory-parameter. @yellowChao, @SimchaShats, can I confirm whether this explains your issues also? Is it possible that you have a prior mandatory release (between the version originally running on the device, and the latest version) that is causing your latest release to be converted to mandatory?\nMore documentation on that behavior here: https://github.com/Microsoft/code-push/tree/master/cli#mandatory-parameter. Great :) - so seems like the problem for most people was an intermediary mandatory release. Closing for now!. Thanks for the contribution @sogko!. Thanks for the contribution @sotayamashita!. Hi @sotayamashita, I don't think we should accept this change, because we use the camel-case codePush all throughout the docs. If you have any other thoughts or contributions we are all ears though!. Thanks so much for the update @Milkdog, this is helpful!. Hi @lisong, not currently. We currently do a file-based diff (replace each file that has changed, but keep the files that have not changed). This makes sense to me, because most of the size of an app is likely to come from assets, like images and video. Is there any reason you think we should do a text-based diff?. Hi @mobohua, can you show us your MainApplication.java file?. Thanks so much for the update @mobohua, as your problem is solved I'm going to close this now but feel free to come back with any other issues!. Hi @gorangajic, does this error happen the first time the app is run, before the CodePush update is applied, or after an update is applied?. That is very strange, so that's good to know. Thanks so much for the update!. Is there a reason you used the release command instead of release-react?\nAlso, I don't believe that React Native 0.34.1 is supported by CodePush 1.14.6-beta - if you install a version from this list of supported versions, does that resolve the problem?. @vladimir-kotikov - whatever the final fix is, please make sure the compatibility table in the README.md is updated, and that the fix is backwards compatible with older RN versions (or if not, that the breaking change is a conscious decision and is reflected in the compatibility table). Great stuff! I agree - we should confirm 0.40 compatibility is solid before merging, as that is the version our users will install. Nice work!. Tagging @sergey-akhalkov and @vladimir-kotikov seeing as @matrosov-nikita may not be able to follow up on this!. Closing this PR in favor of #683. Hi @max-mironov, do you mind signing the CLA?. @AndrewJack - I think the main reason is that we'd like to avoid the overhead of maintaining multiple active branches simultaneously and porting features/fixes between them etc. Although I'd be interested to hear any alternative arguments.. @buptkang and I are actively looking at it, we expect to have it released tomorrow or on Monday.. Hi all, we ran into some minor unanticipated issues and have a supplemental PR up with some tweaks to ensure that we are backwards compatible and that some other header issues are taken care of. It will be merged tonight, and we will make a release tomorrow morning!. By the way, please note that when you perform releases, there are flags that allow you to set a range of versions to target, e.g. >= 0.4.0 < 0.5.0.\nJust be aware of any binary compatibility issues if you do this though, and be aware that this package will be applied on top of any future app store updates in that range unless those updates are also published to CodePush!. Not at the moment, unfortunately :(\nClosing this for now, but feel free to ask any additional questions!. Looks good, thanks for the PR @teodors!. Thanks for the update @ConnorJWilliams!. @ThisIsMissEm - tradition mostly. At the beginning of the project, we wanted to indicate that the project was still in its beta stages, hence the pre-release tag -beta. Of course, what we should have done is followed convention and numbered our releases with a major version of 0, e.g. 0.17.0.. right!. @panarasi @jeremistadler - I've been meaning to go through this, I just wanted to figure out how the main website will reflect these changes (http://microsoft.github.io/code-push/docs/react-native.html), seeing as currently it's also a monolith, and yes it would be nice to have an auto-updating solution. Will give this some thought but also open to ideas! Tagging @buptkang also as this will be related to your work.. Thanks for the tip, we'll check it out! @buptkang has agreed to look at this as part of his work to synchronize the website with the GitHub docs. I've assigned this to him, and he will likely need approximately one week as he just needs to finish what he's currently working on.\nThanks so much for this @jeremistadler, this is a very thoughtful and useful contribution. Please let us know if you'd like us to get this done sooner.. Thank you @jeremistadler :). @buptkang - you might need to check if there have been any changes to the README since this PR was submitted, because they may not be reflected here. Thank you so much for your contribution! As this is a large PR, please give us a week or so to work our way through it.. @rozele Do you think your and @matthargett's reviews are sufficient to merge this?. I will merge this PR on Monday unless anyone still wants to make changes.\nThanks everyone for the great work and the very informative comments :). @mikelambert Thanks for the very detailed report! One of our vendors will look at this sometime over the next week or so. There are two possible explanations for the error as far as I can see:\n\nThe 'Bad Gateway' originates between the client and our server, e.g. a network/proxy issue\nThe 'Bad Gateway' originates from our server itself\n\nThey should be able to figure out which it is by looking at our server logs, and to tell you whether it is expected or not.\nNote that either way, the effect shouldn't be too bad - a failure on the reportStatus route for a given client will mean that CodePush metrics for your app will be slightly off, and a failure on the updateCheck route (assuming it's not persistent) will mean that client won't be able to update until the next check. I'm assuming that the numbers you report are a small percentage of your overall traffic, but if not then please let me know.. Ahh, nice observation! If they are all geographically in the same location then it definitely gives more credence to the idea that the 502's are coming from some kind of proxy.. Based on the information given, I think a reasonable conclusion is that the app is being run from inside a firewall. I'll close this issue for now, but if you think it deserves more investigation @mikelambert, or if you think the way we handle this use-case needs to be improved, please let us know!. @sergey-akhalkov - can you please do the verification for us, and then update the README? You can either use Bo's app generation script or the test app or something else, it's up to you.. Hey @vedovato, is your root component wrapped? Like this: https://github.com/Microsoft/react-native-code-push#plugin-usage. Hi @vedovato:\nThe wrapper just calls .sync(), but the difference is that it also calls notifyAppReady() in the root componentDidMount. If this function is not called in the first run of a CodePush update to 'rubber stamp' it as having launched successfully, the update will be rolled back the next time the app is started.\nSo, to solve your problem, I suggest you just add a call to that function as soon as the update is loaded. Does that solve your issue?. Also, have you ever reproduced the issue on a simulator, or does it only ever happen on the device? Would either of you (@pcarion, @ivpusic) be willing to share your code with us so that we can reproduce it?. I'll just merge this for you - could you put the original PR back up again?. Will look at this tomorrow. Hey Bo, there are still a few comments above that haven't been addressed, could you maybe double check again?. @buptkang - No rush at all, but I just realized that this script doesn't allow you to install react-native-code-push from a local directory, which is important for testing. No need to do it if you have other work, but if you ever have spare time it might be something worth adding.. If you feel that it will make you more productive, feel free to go ahead! No worries either way.. @Igor1201: Apologies if my understanding is weak here - we can override where it is written to, but won't it still be read from the same location?. @dannyyaou: We can look into this for you, but please note that we won't be able to do this again. Please email codepush@microsoft.com using the email address that your account is registered with (we have received some emails, but they are not from the email address originally associated with your GitHub account). In the email, please include the deploymentKey you'd like to change, and the original deploymentKey you previously owned, and we will change it for you once we verify you owned the original deploymentKey. Once your deployment has been restored, you can use the code-push patch command to disable the offending release.\n@max-mironov @sergey-akhalkov - We already have a confirmation prompt on the app rm and deployment rm commands for this exact reason, but when you are back, can you:\n\nMake the message more severe than it currently is (e.g. Are you sure? Any deployment keys associated with this deployment will be lost FOREVER.)\n\nMake sure the prompt defaults to 'no' if no input is entered. For anyone else reading this issue in the future, please note that we can no longer service individual requests to restore deployment keys. If you have removed your deployment by accident, please create a new deployment and ship an app store update with your new deployment key. We've also taken care to release a CLI update with a more severe confirmation prompt, to help reduce the likelihood of this happening in the future.. Hi @dannyyaou, do you have any code to hide the page? Here are all of the possible SyncStatuses: https://github.com/Microsoft/react-native-code-push/blob/bb04535fbef4cb580da4c29ae628452cc0774fc8/CodePush.js#L496/. Also, which version of react-native-code-push did you upgrade from originally?. @dannyyaou, a few more questions:\n\n\nAs mentioned before, are you handling the other SyncStatuses and hiding the view when you get a bad one? https://github.com/Microsoft/react-native-code-push/blob/bb04535fbef4cb580da4c29ae628452cc0774fc8/CodePush.js#L496/\n\nTo confirm, this is happening on real devices, but not the simulator? Can you tell me the iOS version that is running on the real device?\nTo confirm, the issue is both that no download progress being reported, and also the download never completes?. @dannyyaou I will follow up on your other comments later, but are you saying you're not hiding the screen if the app is up-to-date or if there was an error? Surely you need to handle the UP_TO_DATE, UPDATE_IGNORED, and UNKNOWN_ERROR statuses if you don't want the screen to show forever?. @sergey-akhalkov @max-mironov - Could one of you look at this when you come back on Monday?. Yes - the way we resolve updates is that we look for the latest CodePush release for which its appVersion range satisfies the version in your Info.plist. So, it is possible to support multiple app versions in the same deployment. Does this make sense to you, and do you have any further questions?\n\nWith the fact that the version is read from your Info.plist - that is a good point, and we will consider making doc changes.. No worries, and glad to hear :)\n@sergey-akhalkov @max-mironov - I remember we had another issue asking to clarify the behavior for appVersion ranges that target pre-releases. Could we also address this issue at the same time when we are making those doc changes?. @jamealg Are you absolutely certain that the iOS version you published didn't target 1.0.6? Could you check the output of code-push deployment history <appName> <deploymentName>?. Hey @jamealg, CodePush will simply serve the latest release that targets the version your app is running. So yep, v1 still targets *, which matches 1.0.6, hence why your app is receiving it. You have two options here:\n\nPatch or disable v1. You can use code-push patch to change the target app version. Note that semver ranges are quite powerful, so if you want to be fancy you can do something like >=1.0.3 <1.0.5, for example.\nAlternatively, push the bundle you published with 1.0.6 to CodePush. Note that there's nothing technically wrong with publishing a release to * as you've done here, as long as you keep your CodePush deployment up-to-date with each release. We recommend pushing the bundle that shipped with your app store release regardless for a few reasons:\nIf you'd like the code that's in 1.0.6 to also apply to other versions, e.g. 1.0.3, this will help you maintain consistency across your binaries (assuming there are no breaking changes). Remember, you can control exactly which binaries it will be applied to, if there are any breaking changes.\nIt provides you with clarity about what is deployed across all of your versions. When you glance at your history, your app will always be the latest CodePush release for that version, regardless of if it was shipped with your app store release or not. That will also avoid any issues like the one you have posted. Also, for your current situation this will 'fix' the apps that have already downloaded v1.\nOn the CodePush server, every CodePush release is diffed against prior versions. By publishing your baseline app store version, we can diff subsequent updates against it. Note that the SDK performs a hash comparison when it polls for updates, so your app shouldn't download the same package again.\n\n\n\nDoes this solve the issue for you?. @octohedron - Thanks for the issue, and apologies for the confusion! We've already tried to mention the need for an app for each platform in the docs wherever we could, but of course there still might be gaps. Could you be more specific about where we should add this clarification?\n@max-mironov - When he replies, could you add that clarification there?. @ryankask - Just to keep you updated, @sergey-akhalkov will change it back to 23.0.1, and we will publish a release this week. Thank you for filing this!. @EdmundMai thanks for filing an issue. Some others will look at this shortly, but in the meantime, what is the CFBundleShortVersionString in your Info.plist? That needs to match the App Version semver range expression that is marked on your update (currently 1.0 from your example). Hi @sergey-akhalkov - could you or Max reproduce this issue, and then test the fix against 0.43, 0.41 and 0.39 (just looking at the breaking changes table) to ensure that it's backwards compatible? I assume it only applies to Android. Thank you :). @aslakagens, it should be merged tomorrow or the day after. We will publish this on npm the same day that RN 0.43 exits RC.. Paging @panarasi - should he ask Fastlane to incorporate this natively?\nMy personal thoughts are that we would be okay with this, but we may not be able to provide any special support for it.. @andrejunges we will publish the release today.. For others looking at this issue, I am linking it to an equivalent issue in the RN repo which is more up-to-date: https://github.com/facebook/react-native/issues/13011. It seems unlikely that CodePush is the issue here.. @quentinyang could you list the iOS packages that you are currently using? This may also help the investigation in the linked issue.. Hey @ajwhite, we've recently begun reviving our investigation into a code signing feature. Our original plan is something like this: https://github.com/Microsoft/code-push/issues/307#issuecomment-242824845. Do you have any thoughts on that approach as compared to yours? My thoughts at the time were that we didn't need to store anything on the server at all, that way in the unlikely event that the server was compromised there would still be nothing that could be done to forge a release.. @max-mironov Please investigate this one as soon as you are able!. Thanks for the feedback. I've thought a bit more about the problem I am trying to solve here, and I no longer think we should do this. Basically, there are two types of users, and they should be both taken care of if we follow the semver standard and publish the breaking change as react-native-code-push@2.0.0-beta when RN 0.43 comes out:\n\nExisting users. They will be on CodePush 1.x and RN <= 0.42, which is a working setup. They won't upgrade to 2.0.0-beta (a major version increment!) without investigating whether it is compatible with their setup. They might upgrade to RN 0.43, but if CodePush breaks there, then they will instinctively look for the latest release of CodePush (2.0.0-beta), which will work.\nNew users - by default, they will set up with RN 0.43 (latest) and CodePush 2.0.0-beta (latest), and that will work for them. They won't install CodePush 1.x or RN < 0.43 without good reason.\n\nBasically, we just need to uphold two invariants - that breaking changes in CodePush will be represented by a major version bump, and that the latest React Native version will always be supported by the latest CodePush version.\nGiven that the above should just work, I think it makes less sense to tolerate the issues that might be introduced by using peerDependencies:\n\nUsing an expression like >= 0.43 may give the false impression that we support all subsequent RN versions. For example, if RN 0.45 is a breaking change, then a small subset of users might try to upgrade to it with the assumption that CodePush will just work, and find that our peerDependencies section confuses them more than it helps them. The alternative to using >= 0.43 is to update the expression on every release, like @sergey-akhalkov mentions.\nAn expression like >= 0.43.0 does not encompass rc versions, for example 0.43.0-rc. An expression like >= 0.43.0-0 will match 0.43.0-rc, but it won't match rc versions on later releases, for example 0.44.0-rc. This is documented in https://github.com/npm/npm/issues/8854. I had considered doing an expression like >= 0.43.0-0 || >= 0.44.0-0 || >= 0.45.0-0 to mimic what we want >= 0.43.0 to do, but given the reflection in the first half of this comment I'm now convinced that the added complexity is not worth it.\n\nIf people have more thoughts here, I'm open to hear them! However, I need to publish 1.17.3-beta today, so in the absence of further comments I will publish this version without the peerDependencies.. Also in answer to your question @max-mironov - according to our compatibility table, this version should support 0.19. I'm not sure whether that is true or not as we haven't tested that version in a long time, but if it is not true, then I'm not suggesting that we should support that version - we would just update the compatibility table in that case.. I'll merge this for you as I'd like to include this in today's release.. @j2kun - not without additional work, unfortunately. You could possibly put the name of the deployment as a property in your Info.plist, immediately below where the deployment key is specified.. Yes, it is private unfortunately :( Could you maybe use whatever mechanism you are using to dynamically get new deployment keys, to also feed the new deployment name?. Thanks @j2kun, your feedback is appreciated! We'll keep an eye out for similar requests.. @BretJohnson - could you review this PR?. @BretJohnson just a friendly ping!. To clarify for future use, any increment in the major version (from 1.x.x to 2.x.x, or from 2.x.x to 3.x.x) is a large change and should be done in consultation with our release notes. We've updated our release notes to note this breaking change, apologies for not noting this earlier!. Thank you for the description of the issue @cooperka, and apologies for the false positive error message! It covers the majority of scenarios, but I can see that we missed something - if you were able to add on a small note at the end addressing your situation, we would be happy to look at the PR.. Hey I don't think a failure in the apply promise is being handled here - would it be better to do:\nreturn localPackage.apply(syncOptions.rollbackTimeout);\n})\n.catch(reject)\n.done();\n. I think it's the same issue here, it might be better to do:\n.catch(reject)\n.done();\n. I want to just fix a few nittish things and rephrase slightly, is this okay? (You can edit this comment if you want the source)\n- apply(rollbackTimeout: Number = 0, restartImmediately: Boolean = true): Promise<void>: Applies this package to the application by unzipping its contents (e.g. the JS bundle) and saving it to the location on disk where the runtime expects to find the latest version of the app. If the restartImmediately parameter is set to false, the apply will complete, but it won't take effect until the next time that the app is restarted. Otherwise, the app will be immediately restarted after performing the apply, so that the end-user sees the changes. If a value greater than zero is provided to the rollbackTimeout parameter, the application will wait for the notifyApplicationReady method to be called for the given number of milliseconds.\nAlso, again a little nittish, but is it a bit strange that we are talking about 'restartImmediately' before we talk about 'rollbackTimeout', considering the arguments are the other way around?\n. Will we need to re-use CodePush.DEFAULT_UPDATE_DIALOG if we call checkForUpdate() multiple times?\n. Sorry - yeah I meant sync() :P was just pointing out that DEFAULT_UPDATE_DIALOG gets modified here\n. retrieve\n. that\n. occurring\n. update\n. synthetically (or 'manually' or 'artificially' might be better)\n. programmatically?\n. an update\n. necessary\n. publicly\n. publicly\n. publicly\n. retrieve\n. I think the example is a little bit ambiguous as it doesn't necessarily distinguish a 'key' and a 'deployment' as being separate things, so I'd rephrase it from:\n\nwhose value is the key of the deployment you want to configure this app against (e.g. the Staging deployment for FooBar app)\n\nto:\n\nwhose value is the key of the deployment you want to configure this app against (e.g. the key for the Staging deployment of the FooBar app)\n. refer to *the [documentation]\n. For my own education - is there a reason we'd want to restart multiple times back-to-back, as opposed to squashing them into a single restart?\n. (For my education) In what scenario does the value of onlyIfUpdateIsPending matter (assuming that we check whether an update is pending before we call restartApp)? If I understand correctly, you'd have to call restartApp(), but by the time the restart happens, the update is no longer pending?\n. Oh! Didn't realize this was exposed directly to the customer. So it's a convenience thing, gotcha!\n. Okay, so this makes sense. Basically, we process these requests one by one, with the idea that we may eventually find one where a restart actually happens. If a restart happens at any point, the context gets destroyed and the queue gets wiped (so the restart would only happen once).\n\nWould it make sense to rename these two variables to _processingRestartRequest and _restartRequests, to make it clear that they're not necessarily restarts?\n. Does the interior of that if block actually get executed if the app is restarted?\n. Are decorators not supported by default? If so, then perhaps it would be worth just making option 2 the default? We could maybe then also just remove this option and leave it as a footnote to option 2, only for those people who already know how to use decorators and have their project configured for it.\n. If we're intending for the decorator to be the standard prescription, maybe it would be better to describe the options here, and link to this from syncOptions rather than the other way around\n. Just a thought - would it be worth just making codePushify the default export? So something like:\n```\nimport codePush from \"react-native-code-push\";\nlet codePushOptions;\n@codePush(codePushOptions)\nclass MyApp extends Component {\n}\n```\nI'm not sure about this - interested to hear what you think.\n. Seeing as we now have the option of re-defining the default behavior without breaking people, would it be worth considering making the default InstallMode to be on resume, after a specific time interval? And the default SyncMode to be on resume?\n. This is probably something we can discuss - we want everyone new to use the decorator going forward right? Instead of muddying the waters by documenting sync() in detail here, would it be worth just adding a link to the 'legacy' version of the README at the top of this one, for people who were already using it? (Or alternatively a link straight to the API reference section, as those people probably don't need the 'getting started')?\nThen we can just treat sync() as an advanced API that you can find if you scroll down and look at the API reference, similarly to checkForUpdate() etc. We could also have a single sentence here explaining that there are advanced ways to use the API that do not use the decorator, but not go into much detail beyond the API reference.\n. Would SyncFrequency be a more descriptive name here?\nAlso, I'm interested in what we can do here to prevent these options from being confused with the InstallMode options, as they are rather similar. CheckMode or CheckFrequency, as compared to InstallMode? shrug\n. This is a random thought, I'd be interested in hearing what you think. Would it be worth adding a MANUAL option here? This would basically just result in notifyAppReady() being injected into componentDidMount() and nothing else (for now). Our docs could just document the MANUAL option as an alternative way of using CodePush, where you call sync() wherever you need it (doesn't matter if it's on app start or not). Then sync() is not technically an alternative to codePushify(), it's just something you can use in MANUAL mode.\nFor example, if someone wants to do a codePush update on button press (who knows why), then they wouldn't need to know about notifyApplicationReady(), they can just call sync() on the button press and it works as they expect.\n. Should this if statement be outside of the if (!React) block, so that we can check it even if React was successfully found the first time?\nAlso, I'm not sure we need (2) - do we expect this to happen often?\n. ;\n. Is this the only case in which it is null?\n. I don't think we need the shown variable here - this listener will be removed as soon as it's shown\n. Could we simplify the phrasing here to something like: Wrap your root component?\n. and call CodePush.sync() as desired: ?\n. Is sync() going to inherit options from the root decorator?\n. codePushify is still a property on CodePush in the implementation, we should probably make it consistent one way or another\n. two options\n. To avoid cluttering the getting started, could we take these babel instructions and move them to a separate section or README and just link to them here?\n. Maybe leave a comment here that we inferred that it was a component?\n. I think it should still be singular ('Decorator') here and above\n. Oh crap, I made a mistake earlier - these should be MyApp = codePush(MyApp), here and below\n. Should we pin these dependencies too?\n. let syncStatusCallback; above this if?\n. Is this change intentional?\n. Did you mean to remove these instructions?\n. semver, here and in AndroidManifest.xml?\n. retrieve\n. If you don't mind, could you add a little explanation on what uncommenting the top line does? Does it just disable CodePush and load from the development server?\n. So if mReactInstanceManager is undefined, we definitely fall back to this?\n. So I believe this error will also happen if the package you release was created on OS X (with accompanying .DS_Store), but downloaded on a real mobile device, because the server's hashing algorithm explicitly ignores .DS_Store and any __MACOSX/ directory at the root (even if those were bundled in the package).\nIn other words, the problem here is an inconsistency between the hashing algorithm used on the server and the hashing algorithm used on the client. So, I think you can remove this #ifdef, and if you like, you can also check for the __MACOSX directory, but that's up to you (I'm happy to fix it afterwards otherwise).\nIn future, I'd like to modify the CLI so that these files are not included in the release in the first place.\n. Shouldn't we still bind this to the object that was passed into createClass()? Or is it just too difficult to get access to that object?\n. When people override the module path, what location are they expecting to set the path relative to?\n. Could you change code push to CodePush?\n. I will merge this and then fix it up afterwards. Thanks for the PR!\n. Correct me if I'm wrong, but I think the end result would be the same if this was just require(\"./package.json\"); (note the double quotes also).\nAlso, I don't think you need the comment above - the comment below does a great job explaining everything.\n. Small nit - we generally put spaces between ternary operators (i.e. package ? package.name : null)\n. Ohh, that sounds plausible. I guess maybe require(\"./package.json\") resolves relative to __dirname (the folder this file is located in), and path.resolve(\"./package.json\") resolves relative to the user's pwd.  This makes sense to me!\n. Might want to remove the test addition here. @buptkang - I think this line is incorrect, right?. Can we swap this with the statement above?. Same here, please swap the ordering so that <> is the default. (and below in the other file). @vladimir-kotikov, @sergey-akhalkov - I'm tagging you because @max-mironov is out at the moment.\nI've looked through this and compared it to the project.pbxproj in our demo app. Looking for the INFOPLIST_FILE key, I see there are four options depending on project and build:\nDebug build for CodePushDemoAppTests\nRelease build for CodePushDemoAppTests\nDebug build for CodePushDemoApp\nRelease build for CodePushDemoApp\nIt's unclear to me which Info.plist file would actually get used - looking at the implementation of getBuildProperty(), it seems like it would be the first one found, and you can optionally narrow down by the build type, but not by the project. So, if I understand correctly, it would use the Info.plist file for CodePushDemoAppTest, which is not what we want, right?. @max-mironov that's a great point. And yep, that sounds like a good solution. Between that and specifying the build type to getBuildProperty() I think it would work quite well :). Add to .gitignore. Instead of creating this skeleton directory, maybe we can just pull straight from the example app to prevent duplication. Feel free to remove the ES6 decorator if that causes problems, as most people just use the simple wrapper.. Can we have this simply as a comment at the top of the script? I don't think we need a separate README. Can we re-name this script to generate-app.sh, and remove the mobile_env variable and the run-ios and run-android? I don't think that part is necessary, and we typically want to test both anyway. In future, we can use generate-app however we like, for example as one of a series of steps.. This should be called code_push_cli_version for clarity. Also why do we need this variable? It doesn't seem to be used anywhere else. You might be able to remove the gitignore as well, assuming that the test app can be generated in any directory. I don't think these make sense as environment variables - I don't think of them as things that need to be persisted across sessions, you really only want to set them once for the execution of the script. Instead, I recommend doing an input prompt that can be overriden by command-line arguments.\nIn other words:\n```\nprompt> ./generate-app.sh\nWhat react-native version would you like to use (default: latest)? \nWhat react-native-code-push version would you like to use (default: latest)? 1.17.0-beta\nUsing:\nreact-native@0.41.0\nreact-native-code-push@1.17.0-beta\n```\nCan be overriden like this:\n```\nprompt> ./generate-app.sh latest 1.17.0-beta\nUsing:\nreact-native@0.41.0\nreact-native-code-push@1.17.0-beta\n``. What does 'yo, yo, yo' here and below mean?. Also, we can probably put it directly in theExamplesdirectory, if we can get it down to a single script file. Can we also automate the steps for setting up debug mode testing of CodePush?. ;. Is it okay to assume that we want the 'Release' build? And if we do put 'Release' here, will the function you added successfully pick the Release one?. Could you leave a short note here explaining why? (Similar to your PR description, with a link). @rozele That would be ideal and would help us to avoid being broken by changes, but it's up to you if that's your priority. We do the same kind of reflection on the other platforms, although we would like to at some point in the distant future submit PR's so that we can get rid of it.. Can you mirror these changes to the.npmignore` file, and if possible, could you also leave a comment at the top of this file informing future contributors that they need to do the same?\nI'm also assuming there's nothing you want to exclude from the npm package that isn't already listed here, but please add them there if so!. @matthargett I suspect the purpose of this is to post to the CodePush server after a rollback happens, so that users can see a record of the number of rollbacks in the CodePush CLI. If you'd like to file an issue and do a separate PR I am fine with that!. Do you think this will cover all bases?\nvar plistPathValue = getBuildSettingsPropertyMatchingTargetProductName(parsedXCodeProj, INFO_PLIST_PROJECT_KEY, targetProductName, \"Release\")\n    || getBuildSettingsPropertyMatchingTargetProductName(parsedXCodeProj, INFO_PLIST_PROJECT_KEY, targetProductName)\n    || parsedXCodeProj.getBuildProperty(INFO_PLIST_PROJECT_KEY, \"Release\")\n    || parsedXCodeProj.getBuildProperty(INFO_PLIST_PROJECT_KEY);\nOr if any of those should be removed or it should be re-ordered in any way?. I'm not sure what is meant by persisting after the app restarts programatically. As far as I understood, the key only persists for the duration of the call, regardless of when the call is made, so:\ncodePush.sync({ deploymentKey: key })   // This call uses the specified key, regardless of when it is called\n    .then(() => {\n        codePush.sync();    // This call uses the key specified natively, regardless of when it is called\n    });\nHave I gotten something confused here? If I haven't gotten it muddled up, then maybe this is what you mean?\n*NOTE: The deployment key specified via `codePush.sync({ deploymentKey: key })` does not persist beyond the given call, and needs to be specified as an option each time it is used.*\nI'm not sure that using IMMEDIATE install mode or not makes any difference - are you saying that the value set to the variable key is lost when the app restarts, but not when it restarts programmatically? Because that's not what I'd expect.. Could you remove this line altogether?. Can you move this comment down to just above line 159, where it is used? And can you add the checkFrequency argument back in so that the behavior is equivalent to what it was before?. I think the run-ios and run-android commands below can be removed. For a good separation of concerns, I feel like it would be better for this script to only be responsible for generating the app. If desired in the future, other scripts can be responsible for running the app in different ways (or running integration tests on it), and they can be chained together with this one in different combinations.. Please remove these three lines. In general don't keep commented code around unless there's a reason for it.. I think this line would be better modified to describe the script as a CodePush + RN sample app generation script. These bash variables don't apply anymore, and can be removed. I think this would be better described as a script that can generate a sample app for a specific version of React Native and CodePush. Also, it is no longer named run.sh. Do we need this section? This variable doesn't seem to be used anywhere.. Can we also automate the steps for setting up debug mode testing of CodePush?. Please move this comment ^^. There is no new here. Why use perl here if we are using sed above and below?. If we're removing the .bak files immediately, we probably shouldn't make them to begin with. Can probably remove this line, seeing as you added the Reproduction section. If you'd like, you could encourage them to post the stack trace in the Description section. I think this was more of an aesthetic preference than anything else (put the case we expect to use first), so there wasn't necessarily a specific technical reason for it.\nWith the error you're facing, I'm not sure without additional investigation - but I could hypothesize that both \"RCTConvert.h\" and <React/RCTConvert.h> exist in 0.40 and later, and you're meant to use the latter.. I don't think #if #else would protect you from duplicate imports. The #if only checks for existence - if it exists, it will try to import it. That's why my hypothesis is that the ordering might matter here - you should order by preference, in case both exist.. ",
    "qingfeng": "yes, #import \"CodePush.h\" to AppDelegate.m\n. \n. yes CodePushDeploymentKey into Info.plist\n\n. simulator or device will not work, and iOS 8\n. (*'-') < code-push deployment ls gofire                                                                                            15-11-03 1:17\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Name       \u2502 Deployment Key                       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Production \u2502 a4ec189d-xxxxxx \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Staging    \u2502 85181c72-xxxxxxxxx \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n``\n. I run command:\nreact-native bundle --minify --out main.jsbundle\ncode-push release gofire main.jsbundle 0.9.0\n. I put into the project main.jsbundle on ok, Up and running\n\nNSLog(@\"[CodePush getBundleUrl] %@\", [CodePush getBundleUrl]);\n2015-11-03 02:22:32.369 gouhuo-native[2115:712575] [CodePush getBundleUrl] file:///private/var/mobile/Containers/Bundle/Application/0BCA7B0F-7011-41A0-B848-6D792EF9027F/gouhuo-native.app/main.jsbundle\nis OK?\n. but in react-native call CodePush.sync() reason:\n2015-11-03 02:35:11.560 [info][tid:com.facebook.React.JavaScript] 'reason', [Error: 400: An update check must include a deployment key, and provide a semver compliant app version]\ncode:\ncomponentDidMount: function() {\n    CodePush.sync()\n      .then((status) => {\n        console.log(\"status\", status);\n          if (status == codePush.SyncStatus.UPDATE_APPLIED) {\n              // Do any neccessary work here before the app\n              // is restarted in order to apply the update\n              console.log(\"UPDATE_APPLIED\", UPDATE_APPLIED);\n          }\n      })\n      .catch((reason) => {\n          // Do something with the failure\n          console.log(\"reason\", reason);\n      });\n  },\n. sorry, i change CFBundleShortVersionString to 0.9.0 is work\nbut, click install\n\nafter error\n\nIt may be \"\u7bdd\u706b\" These two Chinese characters sake?\nHere's the problem?\nhttps://github.com/Microsoft/react-native-code-push/blob/a208afe7a1f96cc5852e2481ae00a725eac7a668/CodePushConfig.m#L18\n. https://github.com/Microsoft/react-native-code-push/blob/a208afe7a1f96cc5852e2481ae00a725eac7a668/CodePushConfig.m#L18\nNSString *rootComponent = [infoDictionary objectForKey:@\"CFBundleName\"];\nmy app CFBundleName is \u7bdd\u706b, My local modify gouhuo-native is run\n. So, I try! thanks @geof90 \nthe service is cool :beer: \n. thanks :beer: \n. @lostintangent :beers: \n. :beers:\n. @msftclas done\n. @lostintangent @geof90 I want to know my idea is reasonable?\n. @geof90 @lostintangent I changed over, please review, thanks\n. @lostintangent \nYou have successfully signed your document using DocuSign :)\n. :beers: \n. http://facebook.github.io/react-native/showcase.html\n\nThis is our company developed APP\uff0cCan you use email? ~ Skype, I may not be very convenient :)\n. :beers:\n. COOL! :beers: \n. ",
    "jevakallio": "Closing this, as it looks like https://github.com/Microsoft/react-native-code-push/commit/0eb8eab264d083ed99ab2ab3493ce2b54acb2ad0, landed in master yesterday, already solves this issue by using RCTBridge.reload. \nThanks for fixing my issue proactively :)\n. Sure, no problem!\n. ",
    "TanTan-TT": "@geof90 I want to propose another enhancement for download new js package. Is there possible to get progress when downloading js package?\n. @lostintangent Thanks. I will try it first when you release this.\n. @lostintangent I have upgraded the lastest version. All new features are great!\n. ",
    "nevir": ":+1: \n. Nope! Still using main.jsbundle, as well :p\nWe are customizing the development location, however - in order to utilize react-native-webpack-server, as well as to bake in the developer's hostname for easier on-device debugging\n. Potentially! It would definitely be nice to know how long it takes to reload on various devices. Would help inform when it's a good time to trigger an update\n. :+1: \n. > There is an update, but it is associated with a newer version of the binary than you are running. This happens when the latest release for a deployment has a different hash then the client is running, but the release is tagged with a binary version that is greater than what the client is running. In this case, the server doesn't provide a download URL under the assumption that the client needs to update the binary before they could reliably apply the script updates.\nHmm, @lostintangent, this seems like dangerous behavior to me. For example, let's say we have the following builds:\n- binary: 1.0, bundle: 1\n- binary: 1.0, bundle: 2\n- binary: 1.1, bundle: 3\nSay a user has binary: 1.0, bundle: 1.  As described, when that app checks for updates, the server will respond with \"no updates\". \nHowever, I think it would be preferable for the server to return with a pointer to bundle 2 (the most recent bundle available for that binary version).\nGoing a step further, the server could also return an extra bit of metadata with that response indicating that there's also a newer binary version\n. Awesome, yeah. I think deployment forking makes a lot of sense.\nAlso: an alternative to think about is expressing range constraints on the binary version rather than exact versions (but I don't think I understand all the implications of that yet)\nNone of this is currently blocking us, though, since we've got a separate version check system in place already on our API side that can help us handle users who end up with extremely stale builds\n. @lostintangent how do you envision the mandatory flag being used (in the current mode)?\n. > The expected behavior would be to no-op, since the \"pending\" update from the first call to sync is already downloaded, and therefore, the second call to sync would resolve its promise as no update available.\nHmm, that's counterintuitive to me - I would expect the download to no-op, but not the entire sync process.\nIt seems like it might be worth also having sync check for new versions always, even if there's a downloaded copy; but only download if the downloaded one differs from the remote version.\nSimilar edge case:\n1. sync is called (in ON_NEXT_RESTART mode). Update 1 is downloaded.\n2. sync is called (in ON_NEXT_RESTART mode) some time later; update 2 is available.\n   - Under this current logic, it would never download (until after update 1 has applied), right?\n   - Seems like it would be ideal to download update 2 and blow away the cached copy of 1\n3. (ideally) On restart, apply update 2; skipping over 1.\n. isPending is awesome either way though :)  :+1:  to that\n. Ooor maybe I'm wrong here, all the versions are -beta!\n. Awesome, can't wait!\n\nDoh! I totally missed #174 - percentage based rollout would cover that just fine (time based could be built on top of it pretty trivially)\n. \ud83d\udc4d \n. This PR is sacrilege! \ud83d\udc4d \n. (or, it might be worth waiting for react native to provide an abstraction for background tasks)\n. > and have asked to be able to do the install in the background so as to mitigate the restart flash.\nThe way we're mitigating the flash is to expose a hook to show/hide our splash screen (which is handy for masking any view screwups on app launch, too).  We hide the splash screen once everything has spun up (around the same time we call notifyAppReady).  Similarly, we show the splash screen once we know there's an update that needs to be applied.\nI'm not sure it's easy to abstract that, given everyone's native architecture is going to be somewhat different - could be a nice thing for example projects, though\n. Yeah!  That's perfect!  We'd want to use the minimumBackgroundDuration approach\n(also, just to make sure: I'm assuming this works via localPackage.install() as well)\n. Haven't had a chance to use it yet, but we're excited to (soon)!\nOn Tue, Apr 11, 2017, 02:53 Sergey Akhalkov notifications@github.com\nwrote:\n\nClosing this due to #770\nhttps://github.com/Microsoft/react-native-code-push/pull/770 has been\nmerged\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/366#issuecomment-293208962,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAChnZetwu1Pkh7DfbVivc6F9jNC3Pfnks5ru02FgaJpZM4IwXIP\n.\n. \ud83d\udc4d sounds like the right approach to me :)\n. Oh, sorry missed that in your initial comment.  I'm not sure how it behaves! lemme test\n. Works for framework builds!\n. awesome, thanks!\n. Awesome.  I'd say it's not very high priority, at least for us - the description approach isn't all that bad\n. Production build; bundle uri came from code push.\n\nStill can't repro :(\nOn Tue, Jun 14, 2016, 20:55 Jonathan Carter notifications@github.com\nwrote:\n\nInteresting. I can see from the stack why this exception could occur, but\nI'm not sure how to get into a state where it would be possible.\nWas this a release or debug build? Was your AppDelegate.m configured to\nget the JS bundle location from CodePush or from the packager?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/376#issuecomment-226081898,\nor mute the thread\nhttps://github.com/notifications/unsubscribe/AAChna1T-I_CoPJSPq1kQTZPUmR5cA4uks5qL3fKgaJpZM4I16cX\n.\n. I believe the steps I took were something along these lines:\n1. deploy to simulator w/ baked in bundle\n2. new bundle was available; it was downloaded and applied (immediately, I think)\n3. the new bundle was missing a call to notifyAppReady\n4. re-deployed a new copy to the simulator (or it may have been the same build? unsure)\n5. app crashed on first launch\n. Haven't seen it repeat\n. \ud83d\udc4d \n. So, this is actually a bit of an issue for us:\n- We'd like to be able to check for updates before the app fully loads\n  - Intention: ensure that first launch after downloading a new native app has the most recent bundle (transparently to the user)\n  - We'll also time it out after a few seconds and just update in the background (in case of bad connectivity)\n- But at the same time, we don't want to mark the app as ready before that (since we're not likely to encounter errors on boot until after checking for updates on boot)\n. Thanks!  Really appreciate how response you guys are\n\nDoesn't seem to matter (since the currently-applying package stays pending until we call notifyAppReady) - but we do call notifyAppReady asynchronously later (if there is no update to install), often 250ms+ later\nHere's a slightly cleaned up copy of what we've got atm (and experiencing the infinite update loop with):\n``` jsx\nfunction handleAppLaunch() {\n  return new Promise((resolve, reject) => {\n    let completed = false;\nsetTimeout(() => {\n  if (completed) return;\n  completed = true;\n  resolve();\n}, 5000);\n\ndoTheEquivalentOfSync({installMode: codePush.InstallMode.ON_NEXT_RESUME})\n  .then(async () => {\n    // We didn't make it in time; nothing more to do.\n    if (completed) return;\n    completed = true; // Don't allow the timer to fire.\n    const pendingPackage = await codePush.getUpdateMetadata(codePush.UpdateState.PENDING);\n    pendingPackage.install(codePush.InstallMode.IMMEDIATE).then(resolve, reject);\n  })\n  .catch(error => {\n    if (completed) {\n      console.error(`handleAppLaunch failed after timeout:`, error);\n    } else {\n      completed = true;\n      reject(error);\n    }\n  });\n\n});\n}\n```\n(notifyAppLaunch is called at some point after this function resolves)\nAnd doTheEquivalentOfSync does all of sync, except call notifyAppLaunch\n. Sorry, just updated that snippet too - not actually calling sync() :P\n. Yup, tweaking my code to see how it goes!\nAlso, huh, it does happen when calling sync() too - that's not what I expected (because sync calls notifyAppReady)!\n. ...it also isn't updating the bundle URL (still pointing to the baked in bundle after calling install).  I might have something else going on here, too?\n. Ha, perfect, the restartApp(true) workaround works like a charm thus far!  Testing a little bit more\n. Yeah, that seems like a pretty straightforward approach to me!  If it's the recommended approach, all the better :)\n. you know, it might actually be good to just throw if someone calls install when there's an update being loaded?  Or maybe just silently ignore it if it's the same update that's currently being loaded?\n. \ud83d\udc4d \n. Just pushed the .d.ts tweaks\n. sweet :D\n. Oho, yup!  Totally missed this bit of recursion\n. Alright, it's back via 04e84b5 - PTAL\n. Would it be better if I don't refresh the status (and just let the original report propagate through the status changes?)\n. \ud83d\udc4d \n. It seems to complicate it a fair bit, primarily due to the retry logic\nMaking that code behave the same, without checking the status report up front is hard to follow; and it seems weird to only treat it as optional from notifyApplicationReadyInternal but not when recursing\n. ",
    "oney": "Thanks a lot!\n. Thanks a lot!\nJust notice something.\nfunction downloadPackage in CodePushPackage.java will block UI, users can't tap anything and all animations will stop.\nAlso, the download task take more than 10 seconds, but on iOS only take about 0.5 seconds.\n. Understood. Looking forward to great works this week!\n. :+1: :+1: :+1: \n. Thanks.\nI only use CodePush.sync(); to update. My react-native-code-push version is 1.1.2-beta.\nIn that version, CodePush.sync(); will show an alert to ask users download update, and after finishing download, it will apply it instantly.\nDoes CodePush.sync();automatically rollback when the code runs incorrectly?\n. Thanks for reply.\nI am a little confused. So, if I set rollbackTimeout to 5000 when calling sync method, my problem will be solved. Is it right?\n. Still thinking this issue. How about using confirming new release success callback that is combined with rollback callback?\nIt means that the app downloads new version and applies it, but it doesn't make this new version valid in next launch. If new version works correctly, we call a function to marks new version as successful. If new version crashes, in next launch, the app will find last version fails, then apply previous version and blacklist this version.\n. It showed NOT ON MAIN THREAD.\nBut the weird thing is that UI interactions and animations were blocked if downloading was not in AsyncTask.\n. Quick solution is\nPlace your images to images folder, drag to Xcode project. Uncheck Copy items if needed and select Create folder references. Then, the images folder will be added to project with blue color.\n\n\nChange your images object to uri\njavascript\nrequire('../images/mypic.png')\n{uri: './images/mypic.png'} // <- change to\n. Yes, you are right.\nPut image to xcasset and using {uri: 'mypic.png'} will get the image?\n. Of course. If the rollback is automatic, it will be awesome! I don't think you must merge this PR, just want to give some help.\nI will use these code in my app now(I only use IMMEDIATE install mode) and I will look forward to automatic rollback.\n. You guys do a great job! Thanks! :metal: \n. Sorry. iOS.\n. Hmm.... My steps are more complex.\nIf no update is installed and it installs a update that will crash, the rollback works.\nIf it install a update that works before, and then it installs a update that will crash, the rollback doesn't work. It means the app will crash in next launch.\n. I don't test 1.5.0 and Android.\n. OK.\nIf I put CodePush.sync in front of crash code, the rollback works in both situations that are mentioned in above comment.\njavascript\ncomponentDidMount() {\n  CodePush.sync(...);\n  this.ddd();  // <- crash because no this function\n},\n. Thanks! There is another information, I face the issue on both React Native 0.16.0 and 0.17.0.\n. Good! The bug is fixed in my test! :+1: \n. Thanks for helping.\nThese codes are handling the CodePush update\n``` javascript\nvar TheApp = React.createClass({\n  componentDidMount() {\n    this.checkCodePush();\n    this._onAppState();\n  },\n  checkCodePush() {\n    var options = {\n      updateDialog: {\n        title: T.updateDialogTitle,\n        mandatoryContinueButtonLabel: T.updateDialogMandatoryContinue,\n        mandatoryUpdateMessage: T.updateDialogMandatoryUpdateMessage,\n      },\n      installMode: CodePush.InstallMode.IMMEDIATE,\n    };\nCodePush.sync(options, (status) => {\n  switch (status) {\n    case CodePush.SyncStatus.DOWNLOADING_PACKAGE:\n      this._showLoading();\n      break;\n    case CodePush.SyncStatus.AWAITING_USER_ACTION:\n      break;\n  }\n});\n\n},\n  _onAppState() {\n    AppState.addEventListener('change', (currentAppState) => {\n      switch (currentAppState) {\n        case 'active':\n          this.checkCodePush();\n          break;\n        case 'background':\n          break;\n        default:\n      }\n    });\n  },\n  render() {\n    ...\n  }\n});\n```\nOnly TheApp component touch CodePush. Basically, when the app launches, it won't call AppState.addEventListener('change', with currentAppState = active. So, it should not trigger two update prompts in theory.\nI think I don't change anything of these codes about CodePush and not update react-native or react-native-code-push module between the update that @lostintangent faced the issue and this update.\n. I think it should be related to my GCM module.\nPlease use this configuration to solve the problem\n. Hmm.. If you follow this configuration, you won't have if (GcmAndroid.launchNotification) { scope.\n. The code in my README will cause this issue, and there is no way to solve it now. So, I recommended using this configuration to avoid the issue.\n. Oh, got it.\nYes, you can. On Android, although the app is closed, it still can be launched by receiving GCM notification.\n. Thanks!\n. Yes, you are right. It will always rollback in ON_NEXT_RESTART mode. It should record the install mode to handle it in other way.\n. ",
    "dlebu": "Some comments, looks good otherwise.\n. Minor comments, otherwise LGTM. The only thing I could see simplifying here is SyncStatus vs SyncResult enums.\n. LGTM!\n. Do we have any automated tests for this change?\n. :+1: \n. What is this for?\n. We should add tests for this code. There are a lot of things that can go wrong when manually writing/counting bytes. If there is no time now, we should probably add some assertions, and play with the product as much as possible before releasing.\n. This would be a good place for an assertion. Can bytesLeft ever be negative?\n. We should have a name for the progress interface. DownloadProgress maybe?\n. Do we want to leave all these default messages in and use then in the case updateDialog is not null but the user did not specify any messages/title/labels?\n. Having a separate method that handles logging will make it easier if we want to change the [CodePush] tag in the future.\n. Does this status bring any value? UPDATE_INSTALLED will be send immediately anyway.\n. Also, I feel like it's hard to keep track of SyncStatus vs SyncResult names. Would it make sense to combine the two enums into one, and send all of them in the progress callback, but only the final ones in the result? That way, we avoid situations like this one where we have to come up with two names for the same state. (IDLE vs UPDATE_INSTALLED)\n. Ignore my previous comment about the dialog. I see it now. :+1: \n. Sounds good. I just saw it and added a comment. :+1: \n. Thanks for changing the names here. These are awesome!\n. Are we still using updateNotification? What is the behavior here?\n. Is it a known pattern to use an option as both a boolean flag and an object? I think this was the cause of my confusion earlier.\n. For Cordova we call this right before reloading the application.\n. This is a nice addition.\n. I was thinking if it makes sense to have a separate flag that controls the UI in addition to the updateDialog object. But then I could argue that users might set the updateDialog but forget to set the flag.\n. So sync will not make another update check on restart in this scenario? In case of an error, probably nothing will get called anyway. In case of success, if they want to know they just updated, they can use isFirstRun, right?\n. I understand the behavior. What I think complicates things from a developer perspective is to expect both UPDATE_INSTALLED and UP_TO_DATE in the same first run of the application. Also, before reloading the application, for the IMMEDIATE case, the developer does not get any kind of warning, they cannot react to it in any way.\n. Also, the behavior is not consistent for all install modes. Why would we want to make an exception for IMMEDIATE?\n. Cool, thanks for making this change. :+1: \n. How about handling the exception silently and not re-throwing here?\n. ",
    "rhaker": "I've been using CodePush for the past few days (thanks for putting this together!) and will provide more feedback under another issue. But I'm trying to understand the updating behavior and I think I have the same confusion as discussed above.\nTo be clear, if I build a version 0.1.7 in Xcode which gets uploaded to the App Store, then the plain vanilla case for applying patches (via CodePush) would be to apply all code-push release updates as 0.1.7? In other words, if I make a tiny text change and release it to CodePush as version 0.1.8, then the update won't be applied to users who installed 0.1.7 via the App Store because there's an assumption that the App Store Binary may be incompatible and needs to be updated? \nIs my understanding of this correct? Thanks in advance for all the help (and I'll provide more feedback under another issue)...\n. Jonathan, thanks for the words. As I said above, CodePush is really well done (and the issues above are super low priority). I'm in the process of building on android, so I should have android-specific feedback for you in the next few weeks.\nWith respect to deployment v. staging, your response is really helpful. I was worried there were some sort of sandbox limits imposed on Staging that could cause an issue - because I'm constantly switching between emulator/device and dev/release. I need to figure out some way to automate better...\nWith respect to #54, the approach makes a lot of sense. I read on one of the other issues about rolling back a problematic release. Do you have any best practices on rollbacks? For example, if I do several patches (code-push releases) on a v0.1.10, is there any way to roll back to a specific one (since they are all named 0.1.10), or is it better just to push out a new release with a forced update?\n. That makes sense. \nTo me, the value of rollbacks is during the firedrill period when you've realized there's a bug, but don't have the solution to push out a \"forced update\" new release. You don't want to think about creating a new release, you just want to quickly rollback and spend time finding the bug. In practice, rolling back to the previous version will probably cover 99 percent of the cases.\nI haven't looked at the RELEASE_LABEL and don't know how human-readable it is. I was imagining some sort of message analogous to the git commit -m \"This is the Release Label\" message, where you could attach a human readable string on each CodePush release to distinguish one from another. But this may be overkill and it's always easy to say things and not have to implement them. A RELEASE_LABEL that shows the diffs or something might be more than sufficient. The main issue is if you've done 30 CodePushes for the latest App Store binary, will you be able to distinguish one from the other with the RELEASE_LABEL?\n. Ah, that's beautiful. The description field is exactly what I was thinking about - and I need to start using it in my CodePushes because I didn't know about it (or didn't read the docs carefully enough). \nI can imagine some sort of future scenario where you can release a bunch of different versions and be able to do some sort of intelligent mapping based on the version (and the description would quickly tell you what's in the release for the mapping). For example, you could do geo-filtering based on IP, where you could push a North American version with a description \"North America production release\" to IP-filtered North American users and then you could rollback those users to a \"Global production release\" if there was some sort of bug. Basically, you could use the deployment history as a mini-dashboard for analytics and release planning (and targeted production rollback). [Note: I'm probably overlapping some of the Staging vs Deployment current functionality here.]\nFYI, I know this isn't implemented and probably requires drastic technical manipulation. It's just a quick brainstorm.\nAll the best. Good luck with this.\n. Nice. I'm going to close this issue - so it's one more thing off your plate.\n. Hey, Jonathan.\nA few comments/questions:\n1) Just stumbled on this recommendation. It makes sense and would probably be an improvement over my setup (which currently has a restart flash for a clean app install). I guess the only thing that makes me hesitate is that when it comes time to do the first codepush, that something (inevitably) would go wrong and the app would crash - without having tested that the actual release works. Of course, I'm sure there are workarounds with setting up a mock codepush and then deleting it...\n2)  I originally was looking for a .isFirstRun parameter for sync and couldn't find it. I saw something for .getCurrentPackage and thought I could invoke the client to halt the update somehow (on the first run when I know the binary is equivalent to the codepush release). Did I miss something here?\n3) Is there somewhere where you've got a list of these recommendations? I've seen at least 3 or 4 of these buried in the issues (e.g. rollbacks, android vs ios, first update, etc). And they are all really smart and insightful and time saving. It would be awesome to have these compiled in one place as your current \"gold standard\" best practices.\nThanks in advance.\n. Ouch. My bad. Didn't mean to catch you on your break. Please don't read this until you're back...\n\nI'm currently using sync with the immediate install option and no dialog box to the user. Everything is operating as expected (and according to the docs). There are, however, two points that are probably worth providing you with additional feedback, if for no other reason than you asked.\n1) Flash on (first) update. I previously submitted to the App Store and they approved the app, but I made some small changes and resubmitted. The current version being submitted has the flash restart on clean install described above. In the future, I can remedy it using your suggested approach.\nWhen I do a future codepush, however, the flash restart will come back and without the dialog telling the user of the update, I'm concerned it will be viewed as a \"crash\" (even though it's the expected behavior). It's just the cost-benefit tradeoff of me preferring to force the latest version to be installed (with the flash restart) versus waiting until the app is restarted with the typical default behavior of a sync without the immediate install parameter. I'm completely aware that this is something you probably have already thought a lot about and it's probably as optimized as possible.\nI haven't thought of how this could be remedied. Ideally there could be a splash screen or loading message or something shown instead of the flash - but I haven't investigated the technical feasibility of this (and it's probably difficult if I had to guess). Same thing with some sort of lazy loading of the bundle - where you essentially have 2 bundles for the app at one time.\nAnyway, this is just feedback that's beyond the scope, because (as I said) I'm fully aware that it's the expected behavior. If Apple ever approves the app, I'll let you know so you can see how the flash looks in the actual context of a live install.\n2) The second pain point is when the user has a prior app store binary and you essentially lose control of pushing releases. This was on a prior thread. I didn't like the idea of forked deployment. I decided it was just a little too messy for me. Instead, I built a side process that gives me some sort of control when this event occurs. You had mentioned something like this in the aforementioned thread. What I've done is build a check that allows me to (almost) force the user to the app store if I lose control and can't codepush them.  \nSo those are my 2 points. You guys have done a great job and this is more like how can you make something really good even better. All the basic stuff seems to be handled quite well.\nSwitching gears, now. I've just about finished with the Android version of the project and I still have some debugging to do with CodePush. If I do a clean init on a blank project, install CodePush, and run, everything works fine. But, if I install CodePush as the last piece to my working project, I'm getting a crash (a NullPointerException).\nI need to investigate this further and isolate the exact issue, so I can provide further guidance. For android, I'm using 13 (non-core) modules. I had to write a bunch of custom features like the camera, sms, etc that just didn't exist yet while I was building the app. So my MainActivity is pretty busy and I'm guessing that one of the modules has a conflict somewhere. I just haven't had the chance to replicate the issue to provide you with better color.\nAnyway, I hope you had a good break (now that you're back) and I'll let you know what happens with the various items I talked about.\nAll the best.\n. ",
    "sulliwane": "Sorry my bad! no relations at all with code-push, it was there before.\n. Ok, it works great with your code. And I'm fine with this new defaults :) thanks\n. One more false positive, indeed it's possible. It was downloading very slowly the bundle (china), so it just took time to see the changes. Thanks!\n. I was killing the app to \"start\" the update, and so killing the chrome debugging sessions at the same time. So using sync({ updateDialog: true, installMode: CodePush.InstallMode.IMMEDIATE }) was very helpful for debugging :+1: \n. awsome!\n. I have same problem on ios, _[CodePush] An unknown error occurred. _\nI just checked my deployment key and my version number, both are valid. Spent 2 hours on this without success...any idea to isolate the problem?\nthanks.\n. the problem was this issue: https://github.com/Microsoft/react-native-code-push/pull/94\nSolved now with 1.4.1\n. thanks, I will use two different deployments I think as it makes more sense to me.\n. Will try tomorrow! Thx\nOn 9 December 2015 00:32:06 GMT+08:00, Jonathan Carter notifications@github.com wrote:\n\nWhen you put React Native into debug mode, it will always pull the\nbundle from the packager server, so even though you're specifying that\nthe JS bundle should come from CodePush, the line that enables dev\nsupport will actually trump it. So it seems like the update is being\ndiscovered and installed, but when the app actually restarts, it\npulling the app version from the packager. \nIf you try running the app in release mode, do you see the updates\nafter restart? The code you linked above disables dev support in\nrelease mode which is why I asked.\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/Microsoft/react-native-code-push/issues/98#issuecomment-162937343\n\n\nSent from my phone with K-9 mail.\n. I just tried with IOS in the simulator (release: production, so no DEV menu), the update dialog show up, then it downloads (looking at the apple networking tool), after 5min with no network activity, I kill the app in the simulator, restart it. And no difference, the version is not the one downloaded from internet. However, no update dialog show up this time, which means that code-push believes that the current in-use jsbundle is up to date (but it is clearly not the one just downloaded from internet).\nI will try with android later, but the problem seems to be the same. I'm wondering how to debug that.\nEdit: looking at this #99 , that may give more information on how to debug\n. Yes, I'm using the new assets support.\nI restarted a few times, and the app is still showing the old jsbundle. Moreover, I'm always building first, then make a modification in my JS, then:\nreact-native bundle --platform ios --entry-file index.ios.js --bundle-output ./release/main.jsbundle --assets-dest ./release \nthen:\ncode-push release appName ./release 1.0.0 --deploymentName Production_ios --description 'code push 1.4.1 for ios with assets V1.0.6'\nSo I'm not quite sure this bug apply in my case. Maybe I should revert to jsbundle only.\n. AppDelegate was correctly set :) I just npm install Microsoft/react-native-code-push, and it WORKS! Thanks. Finally code-push is applying the update. Awesome. I trying with android now (I'm wondering, for Android, I can bundle and push with assets, but code-push for android will just apply the jsbundle and ignore the assets right?)\n. perfect, using 1.4.2 right now. Working fine on IOS. :+1:  \non Android (bundled with JS only) it's working only if I \"reload JS\" from dev menu (packager not running on my computer, so it's not fetching the JSbundle from my computer for sure). But if, after code-push download the new jsbundle in the phone, I kill the app and start again, it won't use the newly downloaded jsbundle. I have to \"reload JS\" from dev menu.\nNote: I didn't try with Android APP that has not the dev menu enabled. Will try later (not sure yet how to use assembleRelease)\n. @geof90 Awesome, Disabling DEV mode works on Android. Looking forward your workaround, as well as Android assets support :) Thanks a lot.\n(note: \"reload JS\" was actually loading from the computer, I just didn't notice it, my bad).\n. @lostintangent Could you please confirm that the only parameter that will fire a code-push download is the hash of the bundle (different with local = download, same with local = up to date) ? Thanks.\n. Got it. I forgot about the version of the binary. thanks.\nOn 10/12/2015 23:57, Jonathan Carter wrote:\n\nIt's a combination of the hash and the version of the running binary. \nSo if you're running v1.0.0, with hash \"6789\", and the latest update \non your deployment is a different hash, but associated with v1.0.1, \nthen the client wouldn't get the update.\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/Microsoft/react-native-code-push/issues/98#issuecomment-163668926.\n. \n",
    "jonaswindey": "Ok sorry, but I didn't see that in the docs. I was looking at the docs here but apparently that doesn't sync with the README file here on github. My bad. You might take a look at that though for future misunderstanding.\nAnother question, you mention that the update will be installed on the next app restart. Is this only happening when a user manually closes the app (by double-pressing home and swiping the app away)? Or does an app restart regularly/scheduled when it's running in the background too?\nThanks \n. Allright, thanks for the quick feedback.\n. Just a small question, any reason why the default sync install mode is CodePush.InstallMode.ON_NEXT_RESTART and not CodePush.InstallMode.ON_NEXT_RESUME? \n. So stress, I guess I was just unlucky about my timing yesterday to start using this project ;)\n. ",
    "iwater": "thank you for your hard work\n. ",
    "ajwhite": "Woulds this resolve https://github.com/facebook/react-native/issues/4549 (RE https://github.com/Microsoft/react-native-code-push/issues/84#issuecomment-161839376)\n. Ah -- I mistakenly have been incrementing the \"app version\" thinking that's how I push releases. I see that the app version specifies which target should allow the update. Fantastic.\nFor anyone else confused -- make sure that when you perform a release that your version is targeting the version you want to sideload\n. So a couple things are going on here.\nOne - A little user error on my part, the released version does an IMMEDIATE installation without an update dialog. \nHowever, it appears to continuously reload\n. I ended up having to do the following workaround to avoid it endlessly reinstalling the updated version (which did not appear to fail).\njs\nCodePush.notifyApplicationReady();\nPromise.all([\n  CodePush.getCurrentPackage(),\n  CodePush.checkForUpdate()\n]).spread((current, update) => {\n  if (!update) {\n    return;\n  }\n  if (!current || current.packageHash !== update.packageHash) {\n    CodePush.sync({\n      updateDialog: false,\n      rollbackTimeout: 10000,\n      installMode: CodePush.InstallMode.IMMEDIATE\n    });\n  }\n});\nOtherwise, CodePush.sync will continuously download, install, and restart the app\n. Exactly this -- If I don't wrap any conditions, and simply do CodePush.sync, it reinstalls. I compared the two hashes during this reinstallation period and they were the same\n. For privacy reasons, I'm going to remove the screen gif in 5 minutes, incase you need to save a copy.\n. Since I'm running in production mode on the device using this, i can't console, so I threw in an AlertIOS.alert('foo', 'bar') in that equality check for the same package.\nConfirmed that it fires repeatedly. \n. Okay. I'll try to get back to you timely, but this may run into next week. \n. OH man. It's been a long day.. Glad you guys narrowed that down! Fantastic, I'll keep my eyes out. We're very excited to use this tool :smile: \n. :+1: :100: :clap: \n\nsupport for the new React Native asset system\n\nWould this explain https://github.com/facebook/react-native/issues/4549? I just realized that the build where my image assets were missing was likely synced from CodePush\n. Fantastic, nice work :+1: \n. @kylezhang in 0.16.0 of ReactNative they upgraded from Babel5 to Babel6. This is a large breaking change in how the .bablerc configuration files are structured. Many dependencies that are commonly found in React Native projects still use Babel5, while React Native compiles with Babel6. In your case, react-deep-force-update is using a Babel5 formatted .babelrc (furthermore you can see that this dependency is indeed using Babel5).\nDiscussion issue: https://github.com/facebook/react-native/issues/4062#issuecomment-162550776\nCurrent workaround that I'm using: https://github.com/facebook/react-native/issues/4062#issuecomment-164598155\n. +1 on this\n. Thanks, very helpful! Nice work\n. Feel free to close if this isn't tracking anything new -- I'm all set after the full reinstallation of the app\n. I'm a bit speculative that this response from Apple is particular to CodePush.\nFor clarity, as I'm sure there will be developers verifying the effect on CodePush, the current guidelines from Apple can be summarized by Rollout's blog post:\n\nApple\u2019s guidelines explicitly permit you to push executable code directly to your app, bypassing the App Store, under these two conditions:\n1. The code is run by Apple\u2019s built-in WebKit framework or JavascriptCore\n2. The code does not provide, unlock or enable additional features or functionality\n\nAdditionally, straight from the source itself via Apple Developer Program License Agreement section 3.3.2:\n\nExcept as set forth in the next paragraph, an Application may not download or install\nexecutable code. Interpreted code may only be used in an Application if all scripts, code and\ninterpreters are packaged in the Application and not downloaded. The only exceptions to the\nforegoing are scripts and code downloaded and run by Apple's built-in WebKit framework or\nJavascriptCore, provided that such scripts and code do not change the primary purpose of the\nApplication by providing features or functionality that are inconsistent with the intended and\nadvertised purpose of the Application as submitted to the App Store.\n\nCodePush adheres to these guidelines. In contrast, Rollout and JSPatch provide a framework for Javascript to execute any arbitrary native code. CodePush does not operate under these conditions.\nAnecdotally, we use CodePush exclusively in our applications (no Rollout or JSPatch or the like). As of this post, we have not received such warnings.. > My thoughts at the time were that we didn't need to store anything on the server at all, that way in the unlikely event that the server was compromised there would still be nothing that could be done to forge a release.\nGreat point, the real value is in the process of signing the bundle, and verifying the bundle within the application. If it gets an untrusted bundle, it will simply reject it. The server-side validation really doesn't play a critical role here, and as you mention, opens up its own vector.\nAgreed on this point \ud83d\udc4d. I've observed installations that fail at the download level appear to result in a failure to install and get marked as a rollback. Our logs seem to indicate intermittent interruptions on the code push server side, which one should expect of any remote resource.\nHowever, I'd imagine we can be more resilient about download failures. I may be misguided that my small number of rollbacks are represented by download failures, but I just encountered a higher volume and the logs I have on file show:\n- An SSL error has occurred and a secure connection to the server cannot be made\n- Could not connect to the server\n- The request timed out\nThe number of log entries seems to match the number of rollbacks reported.\n\nWhat can be done to gracefully handle transport related issues, where the installation can become reattempted w/o ignoreFailedUpdates being used, as that can have unintended consequences of actual rollbacks being reattempted.\n  . Indeed a failure can be marked if part of the download & unpacking process failed.\nHowever, it's not a catch-all scenario. This is only if it's a \"code push error\". A code push error can happen when:\n- The download is missing a bundle file \n- Fails the hash check when signature verification is enabled\n- Fails the signature check when signature verification is enabled\n- Missing JWT when signature verification is enabled\n- Fails the hash check when signature verification is not enabled\nAll of these are valid reasons to reject the build. I'm not otherwise seeing download failures leading to rollbacks, so this might be a red herring. I can't pin down why only a subset of devices are rolling back... @yaronlevi these would be JS logs on a separate service like Sentry. \u261d\ufe0f We do this by calling CodePush.restartApp(). I have not been able to reproduce this on my end, and from some light research, external storage typically has a different file path than what I saw in our logs. @Zakeelm, our product is in a unique position when it comes to Code Push. Is there a good method of contact that I could reach out with our situation? We've been using Code Push since it came out and worked closely with folks like Jonathan Carter in the early days.\nAs an aside, this is not a request to accelerate timelines, but it does involve a question about the feature deprecations slated in the next month or so.. This is due to https://github.com/facebook/react-native/issues/19259. Please remove your tokens from the debug output . Any updates on this @kissmypiss? We're closely following this issue, as we're preparing an upcoming release.. Thanks for sharing @carloscuesta!. Yes. Since it's not the other way around (adding new dependencies that require native modules), you're not accessing any native features that don't already exist. You're just removing access to the already existing native features.\nSo given that, you should be in the clear. . Yeah good call on this dependency, v-flexible to different formats that conform to semver\n. ",
    "kylezhang": "When I learn the first react-native demo,\nuse: react-native init Box\n......\nThe next error\n\n. @lostintangent Thanks your answer, initializing and running the project\n. @ajwhite /(\u3112o\u3112)/~~\nWhat can I do it\uff1f\nThanks\uff01\uff01\uff01\n. ",
    "bogdantmm92": "Indeed, that was the problem. Maybe you guys could make it more clear by showing this image in the documentation.\nThanks a lot!\n. ",
    "MrPluto": "what will throw  \"An unknown error \" ??  i got the error when i change the key in plist file\n. just  when i open my simulator. and CodePush log Checking for update ,then log An unknown error.\nsomething confused me, what does  [CodePush bundle] work?   seems my code doesn't work if i choose this line ?\n. forgive me, i cant remerber sync or checkForupdate method.\n. @geof90 :+1:\n. for me i just need set like this\n```\npost_install do |installer|\n    installer.pods_project.build_configurations.each do |config|\n        if config.name == 'Staging'\n            config.build_settings['CONFIGURATION_BUILD_DIR'] = '$(BUILD_DIR)/Release$(EFFECTIVE_PLATFORM_NAME)'\n        end\n    end\nend\n```. what's difference between CodePushPublicKey and CodePushDeploymentKey? \nany docs ?. awesome @alexandergoncharov . ",
    "akshaysmurthy": "@lostintangent Where are you logging this error you mentioned above? I am asking this because we cannot really debug in Chrome to see the log when we are using CodePush to provide the JS bundle.\nBTW I am using a switch statement on the Sync Status and I'm getting a -1.\n. @lostintangent Thanks I'll check the logs out tonight (I am indeed using Xcode). And yes, I started seeing the error message since yesterday. \n. @lostintangent Interestingly enough I do not see it anymore - \u00af(\u30c4)/\u00af Thanks :)\n. ",
    "cbrevik": "Indeed this was the problem, I should've read the release notes first! Thanks for the help.\n. ",
    "JAStanton": "IMO if a prior version was mandatory that sets the floor as to the new minimum allowed version. I don't like having mandatory versions trumped by optional versions. \n. Awesome thanks so much!\nOn Wed, Dec 23, 2015 at 3:38 PM Jonathan Carter notifications@github.com\nwrote:\n\nThis enhancement is now running in production and didn't require any CLI\nor plugin changes, so it's usable right now :) thanks for the feedback!\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/103#issuecomment-167009419\n.\n. Yeah the first two solutions would work best actually. I think isPending on the LocalPackage would probably make the most sense. Thats the first place I looked :)\n. Thanks!\n. I guess I hadn't thought it all the way through, the approach you're suggesting sounds just fine. \n\n1) With the first build I will push to app store.\n2) Then next time I have a hotfix I push a new build to code-push,\n3) Once i've done that I bump the version of my app and push to app store w/ code fix in place.\n4) While I wait a week for Apple to approve my latest build my users will get the Hotfix nearly immediately via code-push\n5) when the next user comes along they will download a build from the app store with the hotfix and there will be no code-push updates waiting for them.\nNeat :)\n. ",
    "ben-manes": "fyi, the workaround for now is to disable the bug pattern.\ngradle\nallprojects {\n  gradle.projectsEvaluated {\n    tasks.withType(JavaCompile) {\n      options.compilerArgs << \"-Xep:Overrides:OFF\"\n    }\n  }\n}\n. Oh, I figured you might also add the ErrorProne plugin to your build. I think there were some warnings, again very simple fixes. The static analysis doesn't slow down the build, as its meant to be run as part of a normal dev cycle.\n. Oh it definitely was. I like having a clean build :-)\nI just meant it seemed like a hygienic thing to do and figured it probably occurred to you.\n. ",
    "ohtangza": "As of today, better to try \"--noDuplicateReleaseError\". ",
    "bhagwans": "@ohtangza @geof90 \ni tried  \"--noDuplicateReleaseError\"  but same error it is giving even though i changed code.\nim implementing codepush with ionic 2(IOS).\nmy ionic info\nCordova CLI: 7.0.1 \nIonic Framework Version: 3.1.1\nIonic CLI Version: 2.2.3\nIonic App Lib Version: 2.2.1\nIonic App Scripts Version: 1.3.6\nios-deploy version: Not installed\nios-sim version: Not installed\nOS: Linux 4.4\nNode Version: v6.10.3\n. Hi @ruslan-bikkinin , thanks for commenting\nActually it is working in android as expected but not in ios.\nDo we need any extra configuration in x-code?. hello @sergey-akhalkov, thanks for commenting. my code-push version is 2.0.2-beta. i met with same error in android as well and it got solved by changing version in xml. . version should not be less than the previously specified version.. ",
    "ruslan-bikkinin": "Hello, @bhagwans, and thanks for reaching us. I have created test application with the following configuration:\nCordova CLI: 7.0.1\ncordova-plugin-code-push: v1.9.5-beta\n then I have executed three sequential release-cordova commands: \n code-push release-cordova testapp_cordova android, got successful release;\n code-push release-cordova testapp_cordova android, got  duplicate release error;\n* code-push release-cordova testapp_cordova android --noDuplicateReleaseError, got duplicate release warning.\nIn my case, code-push cli works as expected. If you need additional help regarding your question, please, feel free to open new issue in https://github.com/Microsoft/cordova-plugin-code-push repo using issue template specified there. . @bhagwans I tried to reproduce this behavior on macOs Sierra 10.12.5, but it works as expected there too.. Hi, @bluerunrun, and thank you for your question. Could you, please, provide us more details about your problem? It would be nice, if you will submit new issue and fill technical information needed for us to help you. . Hi @sospedra. Please fill new issue as we could discuss your particular case and help you.. Hi @merryejik and thanks for reaching us. Please fill new issue so we could help you.. Hi, @baba43 and thanks for question! Exchanging keys after build is a good way to screw up something and to lost control on your builds. Technically, yes, you can exchange keys in runtime, using Dynamic Deployment Assignment, SDK is not bounding you here, but when you are going to switch deployment keys, you need to be absolutely sure, that application cache is cleaned up. Otherwise, you can break something and lost a lot of time by seeking what is wrong. Any way, that is very risky and bad practice. There is another approach, you can use and we are recommending you to use - Multi Deployment Assignment. E.g. you can prepare several environments for your application (dev, prod, etc) and use different deployment keys for it. Then you can create builds for each environment and use it. You can test it in dev and then if everything is okay promote it to prod. That's the best choice here, i guess. Also, you can take a look at https://github.com/Microsoft/react-native-code-push/issues/614#issuecomment-274051514 - there was similar conversations.\nI hope this will help you, please, let me know if it is. . @amardeepranu thanks for the interest, we are planning to release a new version including fix for that during this month.. @jeremyong @jbcullis @ghuh @yaronlevi @huangkaiw3n\nHi all of you guys and let me clarify how rollback is working. CodePush does not trace any errors or something like that, the condition to determine whether the update was succeeded or not is if codePush.notifyAppReady (or codePush.notifyApplicationReady) was called. This method mark update as installed successfully on native side so if on next app start there will be pending update with status differs than installed successfully then it will be rolled back. If you are using sync command, this will be done automatically as part of update mechanism:\nhttps://github.com/Microsoft/react-native-code-push/blob/8c5bf4ba72a63de6a58e87e1276345656a1d3147/CodePush.js#L343\nThis part of code couldn't be called when there was error before reaching this code which in general could be caused by incorrect bundle execution which, in turn, caused by bug in bundle initialization. As you can see this is very straight-forward and harmless approach, so if you want to handle app rollback in other conditions you should install update manually, no need to provide additional option for this.\nPlease let us know if this information was helpful for you or you need additional help from our side.. @yaronlevi \nIf CodePush.notifyApplicationReady(); will not be called until next app restart app will be rolled back. This method call could be unreached due to several errors including developer code bugs.\nPlease refer to this documentation section for more info..  @ghuh \n\nWe've seen this issue when the user manually kills the app on Android, there was no crash involved.\n\nPlease submit new issue for it with detailed information about your application so we could help you in this particular case.\n@ghuh  @jbcullis \n\nhypothetically, if the app experienced a hard exit in the same session where we updated the bundle, would it be possible for the app to still think it's up to date but roll back to the previous bundle?\nIf for some reason the app starts to crash because of the latest version code pushed, users could put in a support ticket and we would look into the issue and just code push a fix or release a new binary as a last resort.\n\nIf you release a broken update (that causes your app crash) and disable automatic client rollbacks, your application couldn't be updated via codepush anymore because client code couldn't be executed. Besides might be situations when broken application will be crashing over and over again - that will lead to bad user experience. This is not what we expect for our customers in general. As a solution for possible rare false-positive rollbacks we could implement retry installation mechanism in future: if for some reason update couldn't be installed we rollback it but doesn't send report to the server. Instead we will try to install it again later and if will not succeeded then we will rollback it and send report to the server. I believe that would be a reasonable compromise in this case.\n. Got it, guys!\n\nAlso, getting some kind of log info about the device that experienced the rollback could be very helpful.\n\nHow do you think, @yaronlevi, what kind of information will be useful?\n. @monotkate \nI believe there is no way to implement retry logic using API because this feature requires SDK changes. \n@yaronlevi \nYes, we are considering to implement this as highly requested feature. I'll keep you posted.. @ryanvanderpol Unfortunately, codepush doesn't provide any logs for rollbacks for now. You can create separate issue to continue discussion about your specific case. . Description updated with more detailed information about feature usage.. Hello @limitsapp please submit new issue with the description of specifics of your problem so will could help you.. @fungilation thanks for reaching us! Yeah, it seems to be a bug in postlinking scripts, i will be working on fix tomorrow. If you need additional assistance from our side with linking your application with react-native-code-push feel free to ask.. @fungilation I just made PR with fix, could you please check it out and let us know does it resolve your issue?. @fungilation you can check out patched version of react-native-code-push directly from my branch:\nshell\ncd /path/to/your/rn-app\nrm -rf node_modules/react-native-code-push\nnpm i ruslan-bikkinin/react-native-code-push#fix-postlink\nSorry that I'vent provided this instructions at the beginning.. @fungilation thank you for reply! So fix in the master now and I am closing issue.. @fungilation thanks for interest in code signing feature! We have a plans to update link scripts to provide support for code-signing feature, but for now you need to do it manually. Please, refer to iOS or Android API documentation sections to get more information how to setup public key for your application. \nUPD, well, it seems to be that documentation leads to wrong link for iOS part of public key configuration, here is the right one: https://github.com/Microsoft/react-native-code-push/blob/master/docs/setup-ios.md#code-signing-setup\nThanks you for noticing about that, @fungilation, Ill fix it soon! . Fix in the master, so I close it for now. @fungilation please feel free to reopen it if you will have any questions.. Thanks @AndrewJack for quick fix!. Seems to be that PR #1018 fixed the issue for 1.5.1-beta. Folks who still want to use 5.1.0-beta can add those lines intoproguard.pro` placed in your app level (not in react-native-code-push) as workaround:\n-dontwarn com.auth0.jwt.**. @akshetpandey could you please check latest master?. hi @esprehn and thanks for reaching us! Please try to replace \njavascript\nimport CodePush from 'react-native-code-push'\nwith\njavascript\nlet CodePush = require('react-native-code-push').default\nand double check that you've been correctly configured code-push SDK on native side of your app (otherwise CodePush wouldn't be initialized on client side and CodePush variable will be equal to undefined).\nPlease, let us know if it helps you.\n. @esprehn hi! No pressure from our side but if you get a chance to look at this - please let us know.. So I am closing this for now due to prolonged absence of response, please, feel free to reopen if needed.. Hello @omeraplak and thanks for your question. \nPlease verify if you are able to build main.jsbundle file using following command:\nreact-native bundle --platform ios --dev false --entry-file index.ios.js --bundle-output ios/main.jsbundle.\nIf so, could you please provide me with content of AppDelegate.m file?. @omeraplak glad to here your issue is resolved. Feel free to come back if you will have any more issues or questions.. @wack17s thanks for submitting issue. I tried to reproduce your problem on simulator using our demo project, but it is working without troubles. Could you please confirm that issue is reproducing only on real device?. @wack17s very strange. Could you please share with us any logs producing by your test application (app log on device, app log in xcode)? . @wack17s just a friendly ping on this.. @wack17s thanks for your response! You can always collect logs from Xcode no matter what mode you've been used to compile application (debug or release). If you are using real device all you need is to follow these steps:\n\nConnect device to mac\nSelect Window -> Devices.\nSelect your device in the left panel.\nClick the little arrow as shown in the screenshot below.\n\nDo some stuff on device\nClick Save console button and send us output.. Hi, @percyz and thanks for reaching us. We have explanation for this behavior in our documentation is this section:\n\n\nNOTE: CodePush updates should be tested in modes other than Debug mode. In Debug mode, React Native app always downloads JS bundle generated by packager, so JS bundle downloaded by CodePush does not apply.\n\nIf you want to test CodePush updates in debug mode, despite everything, you need to set \nproject.ext.react = [\n...\n        bundleInDebug: true\n]\nin app/build.gradle.\nPlease let us know if it helps you.\n. @percyz Could you please release new update for your app, then try to install it on device and share app logs with us (from logcat or android studio)?. Hello again, @percyz, just a friendly ping on this.. I am glad your problem is resolved, so I'am closing this issue for now, please reopen if will have any more questions.. Hi @ryanvanderpol and thanks for submitting the issue! \n\nbecause the version in the app store may be several months old\n\nIt seems to be that you are releasing updates using newer version of react-native than you've been used before. The point is that bundles generated by different versions of react-native differs too and may be incompatible and erroneous in runtime (like in #775). Please check that you are using the same react-native version to generate bundle as you've been used at the first app store release. \nLet us know if it helps or any updates.. Hi again @ryanvanderpol.\nTo reproduce this issue I was following next steps:\n\n\nPrepare simple demo project titled issue1044 using this configuration:\n\n\nindex.ios.js:\n\n\n```js\nlet codePushOptions = { \n    checkFrequency: codePush.CheckFrequency.ON_APP_START,\n    installMode: codePush.InstallMode.IMMEDIATE \n};\nclass App extends Component {\n    render() {\n         \n\n               old version\n             \n\n    }a\n}\nlet codePushOptions = { \n  checkFrequency: CodePush.CheckFrequency.ON_APP_START,\n  installMode: CodePush.InstallMode.IMMEDIATE \n};\nCodePushDemoApp = CodePush(codePushOptions)(CodePushDemoApp);\nAppRegistry.registerComponent(\"issue1044\", () => CodePushDemoApp);\n```\n\nios/issue1044/AppDelegate.m:\n\n```objective-c\nimport \"AppDelegate.h\"\nimport \nimport \nimport \n@implementation AppDelegate\n\n(BOOL)application:(UIApplication )application didFinishLaunchingWithOptions:(NSDictionary )launchOptions\n{\n  // make ios to ask user for grant permission\n  UIUserNotificationSettings *settings = [UIUserNotificationSettings\n                                          settingsForTypes: UIUserNotificationTypeAlert | UIUserNotificationTypeBadge | UIUserNotificationTypeSound\n                                          categories:nil];\n\n[[UIApplication sharedApplication] registerUserNotificationSettings:settings];\n  [[UIApplication sharedApplication] registerForRemoteNotifications];\nNSURL *jsCodeLocation;\n  jsCodeLocation = [CodePush bundleURL];\nRCTRootView *rootView = [[RCTRootView alloc] initWithBundleURL:jsCodeLocation\n                                                      moduleName:@\"issue1044\"\n                                               initialProperties:nil\n                                                   launchOptions:launchOptions];\n  rootView.backgroundColor = [[UIColor alloc] initWithRed:1.0f green:1.0f blue:1.0f alpha:1];\nself.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];\n  UIViewController *rootViewController = [UIViewController new];\n  rootViewController.view = rootView;\n  self.window.rootViewController = rootViewController;\n  [self.window makeKeyAndVisible];\n  return YES;\n}\n@end\n``\n2. Openios/issue1044` in XCode and build project in release mode.\n\n\nRun simulator.\n\n\nInstall application to simulator manually:\n\n\n```shell\nopen app build directory. NOTE: directory name issue1044-fxjhfkypnwvproahdhuesartjzrwcd can differ on your local machine\ncd ~/Library/Developer/Xcode/DerivedData/issue1044-fxjhfkypnwvproahdhuesartjzrw/Build/Products/Release-iphonesimulator/\ninstall app on simulator\nxcrun simctl install booted issue1044.app\n```\n\n\nRelease update to codepush server (change old version text to new version).\n\n\nRun installed application on simulator.\n\n\nAfter that app was showing push notifications permission dialog, than new update successfully be applied without any crash.\nCould you please take a look at application and let us know whether it behaving the same way or not? Here is the link to demo app\nAnd also, please, could you tell us does your application crashing only after appstore execution or after manual install on device?. @ryanvanderpol @brendan-rius, guys, are you sure this issue is not related to these react-native-sentry issues: \n https://github.com/getsentry/react-native-sentry/issues/244, \n https://github.com/getsentry/react-native-sentry/issues/228,\n* https://github.com/getsentry/react-native-sentry/issues/261? \nIssue \u2116244 has the similar exception details as @ryanvanderpol posted in this thread.. Hi @iOSQiao and thanks for submitting the issue. Please clarify does your issue duplicating #1041?. @iOSQiao could you please clarify, what do you mean when you are saying \"flash back\"?. @iOSQiao okay, i got it. So could you please provide us any logs from your application?. Well, @iOSQiao, hard to say what is the cause of your problem using information you provided. Please, could you fill the entire issue template so we will be aware about details that can be important in investigation.. Thanks for the update, I\u2019m closing this, please feel free to reopen if needed.. Hi @RoboTeddy, to resolve the installation mode you can use the following approach:\n1. call checkForUpdate\n2. look if update is mandatory or not\n3. apply your custom logic\nPlease let us know if you have any questions.. hi @RoboTeddy \n\nonce by me and once by syncInternal\n\nNo need to call sync method, you can use remotePackage.download and localPackage.install after calling checkForUpdate.. @RoboTeddy Here is the main steps of update:\n\nCall CodePush.checkForUpdate and get remotePackage instance: https://github.com/Microsoft/react-native-code-push/blob/a585cbb0039e9072e80f37c46acd3cc5065e628b/CodePush.js#L346\nCall remotePackage.download to retrieve localPackage instance: https://github.com/Microsoft/react-native-code-push/blob/a585cbb0039e9072e80f37c46acd3cc5065e628b/CodePush.js#L350\n\nCall localPackage.install to install downloaded package: https://github.com/Microsoft/react-native-code-push/blob/a585cbb0039e9072e80f37c46acd3cc5065e628b/CodePush.js#L356. Hi, @omeraplak and thanks for submitting this issue. It seems to be a bug in example app, thanks for pointing to this, I'll we fix it soon!. @Jacse Yes we will merge it soon!. @Jacse I mean when react-native-windows version 0.50 will be released :wink: . Hi @danieldelouya and thanks for submitting the issue, could you please provide small reproducable demo for this?. Hi @tianweicc and thanks for reaching us.\nPlease follow the issue template so we could be able to help you with your issue.. Glad to here that @linjson! I am closing this issue for now. @tianweicc if solution suggested by @linjson will not help you please feel free to reopen it.. Hello @brendan-rius and thanks for submitting the issue. Could you please:\n\n\nClarify which platform your application is using: android or ios? \n\n\nShare app logs with us: one from app with correct CP version and one from app with incorrect CP version. Please, pay attention whether logs contains 503 errors came from CodePush service. . @brendan-rius thanks for your answer, could you please:\n\n\nClarify which platform your application is using: android or ios?\n\nShare app logs with us: one from app with correct CP version and one from app with incorrect CP version. Please, pay attention whether logs contains 503 errors came from CodePush service.. @brendan-rius thanks for response, we will be waiting for them.. Hi @mohitgoibibo and thanks for submitting the issue.\n\nTry to reinstall node modules: rm -rf node_modules && npm install.\nPlease let us know if it helps or any updates.. @mohitgoibibo CodePush does not support Gradle 3 because it requires BuildTools 26. We are following React Native minimal BuildTools requirements which is 23.0.1 to be compatible with it.\nSo I am closing this for now, please feel free to ask if you have any questions.. @mohitgoibibo I've just tried to use Gradle 3 on RN 0.50 version and it works well. I believe we should investigate why it isn't working with codepush indeed. . It seems to be that something changed between versions of Gradle or Android Studio so now during the building in Android studio it cannot find node if it's absent on usr/local/bin/node path or any other default binary apps paths that can be observed by Android Studio. To fix this you can use several workarounds:\n\nmanually specify node executable path by settings nodeExecutableAndArgs in app/build.gradle (as said here):\n\nproject.ext.react = [\n        nodeExecutableAndArgs : [\"/usr/local/bin/node\"]\n];\n\ncreate symbolic link to your node executable targetting /usr/local/bin/node:\n\nln -s /home/<YOUR_USER>/.nvm/versions/node/v6.11.3/bin/node /usr/local/bin/node\n\nbuild your project in console instead of Android Studio\n\n. Well, it seems to be that this issue affects only those users, who install node non-traditional way (for example via nvm) and location of node are identifying by PATH variable. Android Studio doesn't inherit PATH variable from the shell, so it's nothing from CodePush side can be done here to fix it. You could use workarounds mentioned above or run Android Studio from shell.. Update: this issue are producing on clean RN application too (without codepush) for release variant if you are building it via Android Studio: Build->Build APK (s).. Hi @seanadkinson and thanks for reporting, we\u2019ll check this as soon as possible. . Hi @sandropoluan and thanks for reaching us. \nYou can try to release update using code-push release-react myaap-Android Android --deploymentName Production --targetBinaryVersion \">=1.0.0 <1.2.1\"\nPlease let us know if this helps or any updates.. @fungilation please double check this is not metro-bundler/RN issue as it was before.. @fungilation could you please provide minimal version of your app so we could try to reproduce your issue? Please attach app logs too if you have it.. Hi @fungilation, sorry for delay, unfortunately, I have another priorities for now, but don't worry I will be back soon and we will continue discussion.. @fungilation please try to re-install CodePush for your app:\n1. Uninstall CodePush using these instrustions\n2. Install CodePush using manual steps instead of react-native link.. @fungilation could you please share with me the output of code-push app ls and appcenter apps list (please install appcenter cli with npm i -g appcenter-cli)?. @fungilation Its looks strange, I believe we should investigate this on our side. Yeah, probably, this issue somehow related with migration to appcenter. @fungilation could you please confirm that switching to code-push release-react gfung/WonderSwipe solves your problem? I mean after executing this command and installing update on device install metrics begins to appear?. @fungilation could you please add download progress logs to your app like this:\njs\nsync() {\n    CodePush.sync(\n      { /* your options */},\n      (progress) => {\n       console.log(progress.receivedBytes + \" of \" + progress.totalBytes + \" received.\")\n      }\n    );\n  }\nand share these logs with us? . Hi again @fungilation and sorry for the delayed response - currently we are under-resourced and have to take care of other things in terms of appcenter and codepush. As for your case, I\u2019ve tried to reproduce it, but with no luck, so could you please share with me the minimum version of your app where the issue reproduces? (package.json is not enough due to we also need js code to reproduce the issue). You also can email me at v-rubikk@microsoft.com and share the full working version of your app so I can try to investigate it, but again - the minimum working version of you the code with minimum repro steps is the best choice for us because we\u2019ll be able to determine the root cause of the issue much faster.\nI\u2019ve also notice that you are using --outputDir parameter, could you please try to release an update without it? Just to make sure that your issue does not relate to this one somehow https://github.com/Microsoft/code-push/pull/545. @hwangjr thanks for submitting the issue. \n\ni want to change the deployment key fetched from server, so maybe i just change the mDeploymentKey value in react-native-code-push/CodePush.java at master \u00b7 Microsoft/react-native-code-push\n\nYou can not do that because mDeploymentKey has private access. You can change deployment key on client side using deploymentKey option. Please refer to documentation section for more information.\nIn general I think, yes, android SDK lacks of this method and it should be added for consistency purpose. But now we are highly backlogged and can't start working on it right now. We could pick it up when we'll got free time. So if you want this feature be shipped as soon as possible you could make contribution, we will appreciate your help.. Hi @jqn and thanks for your question. Yes, bundle and assets are storing on CodePush server. . Hi @aliceathens and thanks for the question. Could you please share with us JS client code you are using to integrate CodePush  for your app?. Hi @aliceathens \nNo pressure from our side but if you get a chance to look at this - please let us know.. Hi @pcguru and thanks for submitting the issue. Could you please share with us how have you created public/private key pair (commands you used, tools etc) and share with us CodePushPublicKey section from your Info.plist file?. Hi @fungilation and thanks for submitting the issue.\nCodePush isn't support unlink command - only link. Using this command may lead to possible errors as you mentioned here. If you want to remove react-native-code-push from application you need to do it manually.\nSo I am closing this, please let us know if any updates.. @fungilation I tried to reproduce your issue even with unlink command execution and it worked well for me.\n\nWhat's changed in CodePush since 5.1.3-beta that may have caused this breakage?\n\nNothing special that could affect link command.\n\nDo I just yarn add @ to update the package, and no need to be concerned about the package linking? \n\nYes you do. Usually you don't need to worry about linking codepush as it just inject codepush initialization in your code.. Hi @jay1337 and thanks for submitting the issue. Please try to replace index.js content with the following:\n```js\nimport { AsyncStorage } from 'react-native';\nimport { Navigation } from 'react-native-navigation';\nimport React from 'react';\nimport { Text } from 'react-native';\nimport codePush from \"react-native-code-push\";\nclass App extends React.Component {\nconstructor(props) {\n    super(props);\n}\n\nrender() {\n    return (\n        <Text onPress={() => codePush.restartApp(false)}>\n        Touch to run codePush.restartApp and see the crash\n        </Text>\n    );\n}\n\n}\nNavigation.registerComponent('app', () => codePush(App));\nAsyncStorage.getItem('environment', () => {\n    Navigation.startSingleScreenApp({\n        screen: {\n            screen: 'app',\n        },\n        passProps: { },\n    });\n});\n```\nLet us know if it helps.. @jay1337 \n\nRN should not expect any app id to be registered since with RNN there is no getMainComponentName in MainActivity.java\n\nAs documentation for react-native-navigation said,\n\nEvery screen that you want to be able to place in a tab, push to the navigation stack or present modally needs to be registered.\n\nI believe, you have to place Navigation.registerComponent('app', () => codePush(App)); before AsyncStorage.getItem(..) anyway so probably you should change your approach for screen registration. Be aware to use codePush(App) instead of just App to \"codepushify\" your application the proper way to prevent errors in the future.. Hi @jay1337  sorry for late response. After further investigation, yeah, I believe you was right, something isn't clearing up completely after CodePush.restart() in case of RNN. I am working on fix now so I'll keep you posted.. @jay1337 JFYI we've created issue in react-native-navigation repo as we have no clues what could be the source of problem and whether that approach for screen registration (generate random name on each programmatic restart) is valid or not. No worries, we will be able to continue investigation as we'll get help/response from folks from RNN.. @die20 @jay1337 The correct way to integrate CodePush SDK into RNN application is the following:\n\nMainActivity.java:\n\n```java\nimport com.facebook.react.ReactActivity;\nimport com.reactnativenavigation.controllers.SplashActivity;\npublic class MainActivity extends SplashActivity {\n}\n``` \n\nMainApplication.java:\n\n```java\nimport android.app.Application;\nimport com.facebook.react.ReactApplication;\nimport com.facebook.react.ReactNativeHost;\nimport com.facebook.react.ReactPackage;\nimport com.facebook.react.shell.MainReactPackage;\nimport com.facebook.soloader.SoLoader;\nimport com.microsoft.codepush.react.CodePush;\nimport com.reactnativenavigation.NavigationApplication;\nimport com.microsoft.codepush.react.ReactInstanceHolder;\nimport java.util.Arrays;\nimport java.util.List;\npublic class MainApplication extends NavigationApplication  implements ReactInstanceHolder {\n@Override\npublic boolean isDebug() {\n    // Make sure you are using BuildConfig from your own application\n    return BuildConfig.DEBUG;\n}\n\nprotected List<ReactPackage> getPackages() {\n    // Add additional packages you require here\n    return Arrays.<ReactPackage>asList(\n        new CodePush(\"deployment-key-here\", getApplicationContext(), BuildConfig.DEBUG)\n    );\n}\n\n@Override\npublic List<ReactPackage> createAdditionalReactPackages() {\n    return getPackages();\n}\n\n@Override\npublic String getJSBundleFile() {\n    return CodePush.getJSBundleFile();\n}\n\n\n@Override\npublic String getJSMainModuleName() {\n    return \"index\";\n}\n\n    @Override\n    public ReactInstanceManager getReactInstanceManager() {\n        return getReactNativeHost().getReactInstanceManager();\n    }\n\n}\n`` . @jay1337 We should use it because CodePush must be told how to find React Native instance. In RNN case you can implementReactInstanceHolderas was shown above or alternatively useCodePush.setReactInstanceHolderinonCreatemethod withgetReactNativeHost().getReactInstanceManager();` value. In some cases ignoring addition of this may lead to undesired behavior as it was in https://github.com/Microsoft/react-native-code-push/issues/1096. @SudoPlz \n\nSo do you think adding implements ReactInstanceHolder will also fix the app crash?\n\nIt is required for RNN apps which is using CodePush. Please add it and let us know if it helps you.\n  . Hey @jay1337, sorry for the delayed response, I\u2019ve investigated this issue once again and unfortunately I cannot see any simple and reliable ways to resolve it right now, so please let me know if you have any ideas how we could avoid this issue.\nAnyway we\u2019ll try to get any feedback from wix/react-native-navigation guys and monitor this issue https://github.com/wix/react-native-navigation/issues/2331 to see how we could resolve it.\nAs for now, since your use case looks very specific and we haven\u2019t received such kind of issues before - we are going to close it and focus on other hight priority features.\nBut please feel free to reopen the issue if you have any news or ideas how to resolve it, we\u2019ll also reopen this issue in case of a lot of similar requests.. Hi @xclidongbo and thanks for reaching us.\nPlease double check your application targeting the same version that code-push update targets. In your case, CFBundleVersion should be 3.0 within Info.plist.. Hi @chandansharma786  and thanks for asking. Please take a look at this comment, you'll find instructions how to run codepush on gradle 3. . Hi @Ehesp and thanks for submitting the issue. In your case the better way to avoid such problems is to create new major version of app including native side changes, e.g. for example v1.0 -> v2.0 . Then release new update via codepush targeting new binary version using --target-binary-version or -t option:\nappcenter codepush release-react -a yourapp -t 2.0\nPlease refer to relevant documentation section for more information.\nLet us know if it helps you or any updates.\n. Hi @Ehesp, did you have a chance to look at this?. Hi @rushabhnagda11 and thanks for submitting the issue. This is expected behavior because CodePush doesn't just replace your local dev server url with codepush server url. You need to configure CodePush on client side of your RN application in order to begin use it.\nPlease let us know if it helps or you need additional assistance.. Hi @Fuhrmann and sorry for delayed response. Yes, you problem might be related with fact that you didn't declared ReactInstanceHolder. To declare ReactInstanceHolder you just need to edit MainApplication.java as following:\n```java\nimport com.microsoft.codepush.react.ReactInstanceHolder;\n//implement ReactInstanceHolder interface\npublic class MainApplication extends NavigationApplication implements ReactInstanceHolder {\n///...\n@Override\npublic ReactInstanceManager getReactInstanceManager() {\n    return getReactNativeHost().getReactInstanceManager();\n}\n\n}\n```\nPlease let us know if it solves your problem or any updates.. Closing it as duplicate of https://github.com/Microsoft/code-push/issues/541. Hi @ryanvanderpol and thanks for submitting the issue. We understand your problem but CodePush itself not intended to be a bug/crash tracker, you should use AppCenter Crashes or any other related tools for it. We could in future add possibility to gather extra information about device wherein rollback been occurred but in terms of Appcenter as we are about to move current RN SDK to AppCenter SDK and ship all new features there. \nAnyway, of course we will try to help you with your current issue. Could you please, update your issue with additional information about your application, environment as specified in our issue template? As your case is very specific, please, try to provide as much details as possible including Sentry logs.. Hi @Mifayo and thanks for reaching us. Please update your issue with additional information using issue template.. I am closing this issue due to inactivity. Feel free to create the new one using issue template and containing detailed description of your problem.. Hi @Albinzr and thanks for submitting the issue. Please follow these steps:\n\nRun npm uni --save react-native-code-push from the app directory\nRemove code-push references from JS code \nRemove code-push SDK from your app:\n\n\nAndroid instructions\n\n* Update `build.gradle`:\n\n```gradle\ninclude ':app'/*, ':react-native-code-push'\nproject(':react-native-code-push').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-code-push/android/app')*/\n```\n\n* Update `android/app/build.gradle`\n\n```gradle\n...\ndependencies {\n    ...\n    //compile project(':react-native-code-push')\n}\n...\n//apply from: \"../../node_modules/react-native-code-push/android/codepush.gradle\"\n```\n\n* Update `MainApplication.java`\n\n```java\n//import com.microsoft.codepush.react.CodePush;\n\npublic class MainApplication extends Application implements ReactApplication {\n\n    private final ReactNativeHost mReactNativeHost = new ReactNativeHost(this) {\n        ...\n\n/*\n        @Override\n        protected String getJSBundleFile() {\n            return CodePush.getJSBundleFile();\n        }\n*/\n        @Override\n        protected List getPackages() {\n            return Arrays.asList(\n                new MainReactPackage(),\n//                new CodePush(\"deployment-key-here\", MainApplication.this, BuildConfig.DEBUG)\n            );\n        }\n    };\n}\n```\n\nor update `MyReactActivity.java` (select the way that is working for you)\n\n```java\n...\n//import com.microsoft.codepush.react.CodePush;\n\npublic class MyReactActivity extends Activity {\n    private ReactRootView mReactRootView;\n    private ReactInstanceManager mReactInstanceManager;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        ...\n        mReactInstanceManager = ReactInstanceManager.builder()\n                // ...\n                //.addPackage(new CodePush(\"deployment-key-here\", getApplicationContext(), BuildConfig.DEBUG))\n\n                //.setJSBundleFile(CodePush.getJSBundleFile())\n                // ...\n\n                .build();\n        mReactRootView.startReactApplication(mReactInstanceManager, \"MyReactNativeApp\", null);\n\n        setContentView(mReactRootView);\n    }\n\n    ...\n}\n```\n\n* Remove any entries in `res/values/string.xml` related with CodePush (if it exists)\n\n\n\niOS instructions\n\n**If you installed Codepush via cocoapods**\n\n* Remove CodePush from Podfile, then `pod install` again.\n* Remove entries beginning with `CodePush` from `Info.plist`\n\n**If you installed Codepush manually**\n\n* Remove `CodePush.xcodeproj` from `Libraries` directory\n* Remove any of next dependencies if it unnecessary for your app: `SSZipArchive`, `JWT`, `Base64`\n* Select the project node in Xcode and select the \"Build Phases\" tab of your project configuration. Remove `libCodePush.a` and `libz.tbd` (or remove the -lz flag from the Other Linker Flags field in the Linking section of the Build Settings) from `Link binary with libraries` list.\n\n**Common steps**\n* Update `AppDelegate.m`\n\n```objective-c\n// #import \n...\n\n//#ifdef DEBUG\n    jsCodeLocation = [NSURL URLWithString:@\"http://localhost:8081/index.bundle?platform=ios&dev=true\"];\n//#else\n//    jsCodeLocation = [CodePush bundleURL];\n//#endif\n\n```\n\n* Update `Info.plist` (remove `codepush.azurewebsites.net`)\n\n\n\n ...other configs... \nNSAppTransportSecurity\n\nNSExceptionDomains\n\ncodepush.azurewebsites.net\n\n\n ...other configs... \n\n\n\n\nRemove any codepush references on native side\nClean and rebuild project.\n\nPlease let us know if it helps or any updates.. Hi @sercand and thanks for submitting the issue. We already have this in our backlog https://github.com/Microsoft/react-native-code-push/issues/778 and we are planning to implement it in Appcenter React-native SDK after Codepush migration into it. \nPlease feel free to reopen in case of any questions or issues. Hi @imdadahad and thanks for sunmitting the issue. I believe this issue is related to connection problems with github. Please, try again later or check your network settings. \nPLease let us know if it helps or any updates.. Hi @imdadahad and thanks for submitting the issue. Codepush doesn't provide such steps for linking. The only things that CodePush is asking during the link are Deployment Keys for iOS and Android. I believe your issue relates to appcenter-crashes or appcenter-analytics module for RN. Please, feel free to submit new issue in related repo, so guys who are familiar with this workarea will be able to help you much faster.. So I am closing this, feel free to re-open this if you will have any questions or any updates.. Hi @quy1403 and thanks for submitting the issue.\nFirst of all, please make sure you have configured CodePush SDK on native side as described here: https://github.com/Microsoft/react-native-code-push/issues/1088#issuecomment-353344540. Then if it will not help you, please, share with us javascript code sample of how you use CodePush SDK on client side.. @quy1403 could you please share the JS code you are using but without unknown methods to us like iconsLoaded, this.startApp(opts) etc? It would be better if you will prepare minimum version of the whole App.js so we could try to reproduce your issue on our side. It is really hard to help you without having full picture.. Hi @LiuYibin and thanks for reaching us. Could you please share with us detailed info about build error that was occurred during the building of your app (text output, screenshots)?. @LiuYibin so you are trying to add react-native-code-push to your app via cocoa pods but your app has it's own SSZipArchive lib installed before? Please correct me if I missed something.. @LiuYibin please try to do the following steps and let us know if it would help you or not:\n\nRe-add CodePush in your ios/Podspec file using approach from our docs:\n\n```\nSSZipArchive already in use\npod 'CodePush', :path => '../node_modules/react-native-code-push', :subspecs => ['Core', 'JWT', 'Base64']\n```\n\nRun pod update from ios directory\n\nUpdate: I was able to reproduce your issue exactly as you described and could resolve it completely using steps above.. Hi @prashantvv and thanks for questioning. Could you please clarify what build system you are talking about and also give us detailed example of what are trying to do?. Got it. Codepush itself doesn't have any custom tools to resolve nodejs dependencies during the build, control over the packages is in react-native bundle and npm hands. Generally, npm can handle conflicting dependencies by keeping package's own dependent package version within it. For example, react-native-code-push depends on glob@^5.0.15. If you want to use glob@3.0.0 or glob@my_custom_local_version for your application npm will download your custom version and will be keeping 5.0.15 version for react-native-code-push separately so they will not be crossed with your one.\nAs for your second question, my advice is to run npm i after any changes with dependencies that take place in package.json.\nPlease let us know if it helps you or any updates.. Hi @sujitpk-perennial and thanks for your question. Did Releasing update contents to CodePush: action take more time than usual before throwing error? Could you please also share with us user name and app name you used and approximate time when you was making release so we could search for it in our backend logs.. @sujitpk-perennial I checked our server statistics and didn't find any requests in past 48 hours that includes sujit or AdPost_home_copy entries. So please make sure you are connecting to official CodePush server for releasing updates.. Hi @sujitpk-perennial I found several requests at December, 28 and all of them succeeded but had long response time. So in this case I think low internet connection speed was the reason for your issue. If this issue persists and you consider that low connection isn't the cause of it, please, feel free to re-open this.. Hi @EthanChouTW and thanks for reaching us. Could you please share with us native application logs generated by CodePush during update (they have [CodePush] prefix)?. @EthanChouTW So you mean that you have application running with binary version 2.1.0, then you are releasing 2.1.0 update via codepush, checking for update on real device (expecting that this update will be ignored due to version match) and codepush still suggests you to install update for v2.1.0? Did I get right or missed something?. I have manually created branch https://github.com/Microsoft/react-native-code-push/tree/brownfield_apps just now, so this I am closing this PR.. Hi @abrel and thanks for reaching us. Did you increment binary version of your application and release new codepush update using --targetBinaryVersion targetting this version? In case of changes to application that touches native side (including incrementing minor version of reac- native and react-antive-code-push) it is extremely necessary to release new binary version of application and do not mix up on-air updates for different binary versions. Please refer to relevant documentation section if needed. . I am closing this for now, please feel free to re-open it if needed.. Hi @mark-friedman and thanks for submitting the issue. v5.0.0-beta of react-native-code-push is for react-native v0.47.x only. Please use v4.1.0-beta version of  react-native-code-push for RN v0.46.3.\nPlease let us know if this information was helpful for you or any updates.. Yes, you can use v5.1 with RN 0.46.x as well.. Hi @marcmo, I was able to reproduce your issue using demo project you sent us. After further investigation I am suspecting that the root of the problem is somewhere in react-native. Actually, when you are using any install modes but ON_NEXT_RESTART, CodePush is using soft restart of app without killing it. This mechanism uses react-native method instanceManager.recreateReactContextInBackground(); that does the trick. \nEverything works pretty good when you are starting the app from scratch but something goes wrong after restarting the app using this method because probably several context parts aren't cleared completely in case of registering components asynchronously. \nWe have similar issue here. I will prepare a clean demo and ask the react-native team on github about possible solutions. I will post the results here.\nAs for now, you can switch install mode to ON_NEXT_RESTART as a workaround. . Hi @ericketts, I am not responsible for codepush stuff anymore, I believe the right person for it is @alexandergoncharov.. Hi @pyr0hu and thanks for questioning. Actually, you don't have to use codePush() - it is just a handy way to integrate CodePush for the most of the users and under the hood it wraps your root component with the new one that already integrated with codePush and calls predefined sync method within (details). So, yes, you have to manually run codePush.sync({deploymentKey: 'your-key-here'}) for dynamic deployment usage. \nPlease let us know if this information was helpful for you or you need any more help from us.. Glad to hear that @pyr0hu! So I am closing this, don't hesitate to re-open if you will need any more assistance from our side.. Hi @birkir and thanks for reaching us. Did you add ReactInstanceHolder import:\njava\nimport com.microsoft.codepush.react.ReactInstanceHolder;\n?. Hi @ThomasGaubert \nIn terms of this PR, please, make sure that diff updates, signed updates are working correctly. Also, you should be sure that these changes doesn't require server side changes, otherwise, they should be done as well. \nPlease pay attention, that CLI force update to be placed in \"CodePush\" directory, so also make sure that your changes are consistent with that. . HI @felipegr6 and thanks for submitting PR. Code formatting changes look good to me, but as for changing android tools/sdk version, I think that it will produce breaking changes for our current customers. Latest version of React Native is using android tools v23 and targeting sdk v22:\nhttps://github.com/facebook/react-native/blob/master/ReactAndroid/build.gradle#L247-L253\nMy opinion is that we should continue to support all sdk/tools versions that are supported by React Native as it's plugin. . may be you should use writeFileSync, readFileSync here?. There is no chown commands on windows, it should be check for platform appears here. @sergey-akhalkov yeah, streams are working asynchronously and should be processed respectively. Usage of writeFileSync/readFileSync are the simplest alternative to copy files in this particular case.. @max-mironov no, we can't, because logging should be executed anyway regardless signature verification enabled or not..  @max-mironov good idea, thanks, i'll try to do it . @max-mironov it is not so critical, but, yeah, i can do it. @max-mironov, good proposition, i think i'll do it your way \u261d\ufe0f . @max-mironov changes added, thx!. @max-mironov makes sense, I'll do it, tnx!. > Also don't understand why do we need at all err variable, seems that it is not used anywhere at all\nthis is a part of callback function signature. >Not sure if !*error is needed here, I believe if (!error) should be enough.\nOkay, i will refactor it to simplify conditions. @max-mironov got it!\n. @max-mironov got it!. @max-mironov I'll fix it, thx!\n. @max-mironov I'll tried to make code on android and ios looks the same as possible, so that's why I call this function that way. If it is crucial, I can change it on both platforms, what do you think?. @max-mironov not so important for now, i think. May be later, if payload structure will become more complicated.. @max-mironov No, we don't, because we just send Error to method caller in order to it be able to process error. This is method's caller responsibility to provide initialized pointer for NSError*.. @max-mironov Okay, thx!. @sergey-akhalkov thanks for suggestion, I'll do it!. @sergey-akhalkov, I'll fix it.. @sergey-akhalkov I'll fix it. @sergey-akhalkov nice proposition, I'll do it!. @sergey-akhalkov thx, I'll do it.. I think we need to add exception logging here to be able determine cause of problem in future:\njava\nCodePushUtils.log(ex.getMessage());\nCodePushUtils.log(ex.getStackTrace().toString());. Not at all, I'll simplify it as you suggested, @sergey-akhalkov, thx!. RNCP version should be fixed here. May be we should use latest pre 0.49 RN version here (i mean 0.48.4)?. react-native-windows is missing here. @max-mironov I think we should land this PR first #1051. @max-mironov okay i got it. @max-mironov okay, nevermind. @max-mironov okay reasonable. @sergey-akhalkov thanks for that!. Please remove extra space character at the end of string here and below.. Pointless change.. React-native version sets in package.json. Please, remove this change.. Do we really need to combine specifics objects creation helpers in one file? . General: PackageDownloader specific tests should be placed in separate file.. It is a bad practice to share constant values between tests files. Each test should be isolated from each other. All constants references like APP_VERSION, CLIENT_UNIQUE_ID and so on should be replaced with hardcoded values. Please fix it here and in another test files.. Each datacontract should be tested in separate test file.. @annakocheshkova Sure, why not? This is actually a short code fragment.. @annakocheshkova Got it, I'll fix it.. @sergey-akhalkov got it. I'll fix it.. @sergey-akhalkov no need here.. @sergey-akhalkov I'll fix it here and in other places, thx.. What is the point of this change? We still have createDebugCoverageReportExecutionDataFile variable declared above that is equals to file(\"${buildDir}/outputs/code-coverage/connected/coverage.ec\").. @sergey-akhalkov deployment key can't be empty because this value is from server response and can't be empty by its essence.. Please remove empty line.. Does it really throws JsonSyntaxException?. Just my opinion, but I believe we don't need to pass the whole Context in constructor if we want to use just a part of it. In this case more transparent way to do that is to add static initialize function like createFrom or something like that.. Do we really need to suppress the fact that we have malformed pending update info saved on a device? . Do we really need to suppress the fact that we have malformed failed updates info saved on a device?. The name of the function doesn't clearly explain it's meaning. I think it can be rename to existsFailedUpdate.. Empty line.. Redundant comment header.. Empty line.. @annakocheshkova I meant, that we just call applicationContext.getSharedPreferences and nothing more is needed from applicationContext at all.. @annakocheshkova gotcha, just ignore this comment branch then.. Please remove this unnecessary change.. Why do you use logAssert instead of info or just log?. @MatkovIvan Thanks for pointing on that!. @annakocheshkova My opinion here is that test should be as obvious as possible and this class doesn't contain complex test cases/mocks so no need to overload test class.. @annakocheshkova agree with you, i'll fix that.. @annakocheshkova got it.. @annakocheshkova yes we can, but it just worsen understanding test scenario.. @annakocheshkova Well I believe we need the third one to decide. @sergey-akhalkov what do you think about this?. Do we really need to begin try { from this line? May be we should move it to 72?. Please move @Override to the line above. @annakocheshkova ok.. @annakocheshkova here: https://github.com/Microsoft/react-native-code-push/pull/1190/files/f9d71f7d2aa31058d35c5b85265d946cdf869caa#diff-17e6f8e9bf1806dd28225e4928e5c8b0R48. Please use more detailed name.. Please use more detailed name.. Please use more detailed name.. What is the reason for adding FileException if we already have IOException?. What is the reason for moving it here? This method isn't throw no more exception anyway.. This method should't throw any errors as said in his description , so please remove this change and place TODO comment here in order to don't forget to return here later to add trackException instead. . @annakocheshkova yeah, I will delete it, thx.. @annakocheshkova I know, just missed it after refactoring. Thx anyway,. @annakocheshkova Nope. @annakocheshkova got it.. @annakocheshkova agree.. @annakocheshkova Actually, we could have more than one listeners on native side, depends on user wish. . @annakocheshkova thanks, I will fix that.. @annakocheshkova yes, originally client Acquisition SDK operates with Package interface which is equal to CodePushPackage. @annakocheshkova got it.. @annakocheshkova because originally acquisition sdk uses CodePushPackage as container for failed updates info.. @max-mironov Yeah, I'll fix that, thanks Max.. Please add note that this parameter is needed for Crashes only. Please add note that if its value equals null, exceptions will not be tracked.. Do we need this change?. @sergey-akhalkov CodePush.notifyApplicationReady(); will call method from CodePushNativeModule.. @sergey-akhalkov because that was the logical mistake I previously fixed in the main code, but but not in tests.. @sergey-akhalkov because that was the logical mistake I previously fixed in the main code, but but not in tests.. @sergey-akhalkov All clarifications are present in javadocs for each of test methods.. @sergey-akhalkov no need - that was the bug I fixed.. @sergey-akhalkov because that was the logical mistake I previously fixed in the main code, but but not in tests..  Please change this line mFileUtils.unzipFile(downloadFile, new File(unzippedFolderPath)); -> mFileUtils.unzipFile(downloadFile, unzippedFolder);. Please note, that these methods should be deprecated since new version of CodePush. If they are dropped now, breaking change for API will be introduced and customers will have to change their CodePush initialization code to make it work.. Please, see this comment. Please, see this comment. Please, see this comment. ",
    "sergey-akhalkov": "Hi @bhagwans, could you please provide us with the version of your code-push-cli? In bash please execute code-push -v command.. Hi @israrwz, please feel free to create new issue and provide us repro steps/reproducible demo. Hi @altruio, could you please create new issue using this template, so we would able to help you?. Hi @nevir, @tomauty, I've just created the PR  that implements this feature, would you have a chance to look at it and verify if it works as expected?. Closing this due to #770 has been merged. @panarasi, I've investigated the ways we could implement this and I suppose we could use the same approach and just implement another one property (called customMetadata as example) that users would be able to use instead of description.\nI also think it would be convenient to implement 2 ways users would be able to specify customMetadata - as plain value or as a path to some .json file like this:\n1. code-push release-react myapp ios --customUpdateMetadata=\"myvalue\"\n2. code-push release-react myapp ios --customUpdateMetadata=./mymetadata.json\nWhat do you think?. Closing this due to https://github.com/Microsoft/code-push/issues/273. Hi @thomasttvo, could you please create new issue in react-native-code-push repo and provide us as much info as possible? Also it would be very helpful for us if you could try to reproduce the issue on our sample app - just to make sure if the issue have place because of CodePush.. @thomasttvo, got it, thanks for the clarification! Please let us know if you have any questions or see any issues.. @bernatfortet, could you please try to apply instructions from this PR https://github.com/Microsoft/react-native-code-push/pull/690 and let me know if it helps?. Closing this due to https://github.com/Microsoft/react-native-code-push/pull/690 has been merged and fixed similar issue https://github.com/Microsoft/react-native-code-push/issues/688, please feel free to reopen in case of any questions or issues.. I suppose the docs should be improved to pay attention on the fact, that CodePush updates should not be tested in Debug mode, so I've created #682\nClosing this for now, please feel free to reopen it if needed. . @joaosilva05 - hi! \nSorry for the silence, do you still experiencing the issue? If so, could you please provide me with your versions of react, react-native and react-native-code-push? . @MartinMobilize, I've sent you Example app (via email) where I've resolved some integration issues. Most of them have place due to Example app using react-native-navigation module. . @rodrigopivi, in case of using NavigationModule it is also important to properly export CodePush package in MainApplication.java file:\nJava\n    @Nullable\n    @Override\n    public List<ReactPackage> createAdditionalReactPackages() {\n        return Arrays.<ReactPackage>asList(\n            new CodePush(null, MainApplication.this, BuildConfig.DEBUG)\n        );\n    }\nIn case of wrong import we have the situation when NativeCodePush variable is undefined:\njavascript\nlet NativeCodePush = require(\"react-native\").NativeModules.CodePush;\nhttps://github.com/Microsoft/react-native-code-push/blob/master/CodePush.js#L8. @rahulmishra-goibibo, you've got the log message due to native-site of react-native-code-push Module have not been installed properly:\nhttps://github.com/Microsoft/react-native-code-push/blob/master/CodePush.js#L475\nhttps://github.com/Microsoft/react-native-code-push/blob/master/CodePush.js#L533\nDue to you have verified manual installation steps multiple times, it is hard to say what goes wrong, so could you please provide me with minimal version of your app where the issue  reproduces, so I would able to investigate it? You could prepare it using our example app.. Closing this for now, please feel free to reopen or create new one if needed.. Hi @wvicioso, do you still experiencing the issue? If so, could please provide me more info regarding to your project and environment?. Hi @soleilgl, thanks for reaching us. Could you please take a look at this https://github.com/Microsoft/react-native-code-push/issues/790#issuecomment-294148452 and let me know if it helps? Otherwise could you please share full content of MainApplication.java file?. @soleilgl, got it, thank you!. Hi @NedYork, thanks for reaching out to me. This issue most likely means that native side of CodePush SDK has not been configured correctly, you could try to figure out what goes wrong here by using manual installation steps guide. You also could provide me with the minimal version of your app so I can try to figure out the root cause of the issue and help you to fix it. . @panarasi, got it, will do.. @prithsharma, could you please look at https://github.com/Microsoft/react-native-code-push#android?\nI've updated the documentation so for now there is an additional buildType - releaseStaging, so you could store your staging deployment key there. releaseStaging buildType works exactly like release buildType and it uses offline js bundle instead of bundle downloaded via packager.\nThe same for iOS - https://github.com/Microsoft/react-native-code-push#ios. You could create Staging configuration and store staging deployment key there. \nPlease let me know if it helps or if you have any questions.. @valetarton, please feel free to create new issue if you need any help.. @prithsharma, just a friendly ping, please let me know if docs update helps or if you have any questions.. Closing this, please feel free to reopen if needed.. @hojberg - hi! Changes probably fixing the issue are already in CodePush.m and package-mixins.js files belong to react-native-code-push having version 1.16.1-beta.. @jaggerwang - hi! I've got the same warning while using react-native@0.40.0 and react-native-code-push@1.17.0-beta, so I've started investigation.. @jaggerwang, I've found the place where the warning occurs: https://github.com/facebook/react-native/blob/master/React/Modules/RCTEventEmitter.m#L54\nIt happens when there are no event listeners registered for CodePushDownloadProgress event.\nSo to go it away you could just implement realization of codePushDownloadDidProgress method:\nJavaScript\nexport default class myapp extends Component {\n  codePushDownloadDidProgress(progress) {\n        console.log(progress.receivedBytes + \" of \" + progress.totalBytes + \" received.\");\n  }\n  ...\n  }\n}\nPlease let me know if there are any issues like this one\n\n2016-09-16 12:43:04.621 [error][tid:com.facebook.react.CodePushQueue][RCTEventEmitter.m:46] CodePushDownloadProgress is not a supported event type for CodePush. Supported events are: (null)\n\nor if I could help you.. @jonrh, \n\n// Doesn't work on app resume, but I may be missing or doing something wrong\nlet codePushOptions = { checkFrequency: codePush.CheckFrequency.ON_APP_RESUME };\nMyApp = codePush(codePushOptions)(MyApp);\n\nHmm, I've tried this option and it works well for me. Could you please try our demo app? It prints CodePush statuses on the screen, so you could see if the option works. Let me know if you have any questions or see any issue.. @LiuC520, seems like it's the issue of another kind. I believe that the root of the problem is not in Sending CodePushDownloadProgress with no listeners registered. warning, but you could try to add codePushDownloadDidProgress event listener as I've described above and verify if it works. \nIn case the error still reproduces, could you please create separate issue and provide us additional info?. Closing this for now, please feel free to reopen.. Closing this for now, please feel free to reopen it if needed!. Seems to be fixed by #652, please feel free to reopen it if needed.. Closing this, due to #614 . Hi @krizpoon, understand your concern here, could you please help us to improve the docs:\nrm\nNote, if you are targeting both platforms it is recommended to create separate CodePush applications for each platform.\nShould we just use something like you must instead of it is recommended or rephrase this at all?. Hi @adambene, thanks for reaching us, could you please clarify what do you mean by transferring deployment keys between apps, could you please provide a real use case/usage scenario?. @adambene, thanks for the clarification, we are going to discuss what mechanics we can provide to avoid such kind of situations. I'll let you know if I have any updates regarding this.. @jonrh,\n\nwas this perhaps never an issue on iOS?\n\nWe've not reported before that the issue reproduces for iOS too, also @sopaco said:\n\nI also have some such problem only in Android.\n\nFor the matter of that:\n\nCould there be a similar block/issue?\n\nI don't sure about it, so we need some investigation - could you please verify if the issue reproduces or not in case of using AsyncStorage (instead of using Keychain)? If so, please create new issue so we would able to start investigation and fixing.\n. @jonrh, no problem, thank you!. Hi @mrkhan2. To make sure that iOS react-native app works properly in release mode you could try to enable logging like this: http://stackoverflow.com/a/39091109 (please let me know if you can see any errors in console while debug).\nTo push updates in release mode I've done following steps:\n\nChange deployment key to production in info.plist file then build and run the app.\nMake changes in index.ios.js file.\nRelease updates like this: code-push release-react MyApp ios -d Production\nRelaunch the app twice: first time for download updates, second - for install.\nMake sure there is no errors and updates installed successfully.\n\nAs for me - I haven't faced any issues both for staging and release builds, so please let me know if you have any updates or ideas.\n. Hi @rt2zz. Could you please verify your deployment key (CodePushDeploymentKey prop in the info.plist file)? Seems like it has wrong format - probably space chars at the end of the string or smth else. Please let me know if you still see this issue.. @mrkhan2, @rt2zz - is the issue still reproduces for you? Please let me know if I could help you.. @mrkhan2 - thank you for response, I close the issue for now, feel free to reopen it if needed.. Closing this due to #763 has been merged, please feel free to reopen if needed.. @IrvingAxelB - hi!\nTo avoid unexpected issues make sure you are using compatible versions of react-native and react-native-code-push (Supported React Native platforms).\nI've also faced with this issue and fixed it by adding React to my Podfile:\npod 'React', :path => '../node_modules/react-native'\n  pod 'React/RCTGeolocation', :path => '../node_modules/react-native'\n  pod 'React/RCTImage', :path => '../node_modules/react-native'\n  pod 'React/RCTNetwork', :path => '../node_modules/react-native'\n  pod 'React/RCTText', :path => '../node_modules/react-native'\n  pod 'React/RCTWebSocket', :path => '../node_modules/react-native'\n  pod 'CodePush', :path => '../node_modules/react-native-code-push'. Hi @rafaelcorreiapoli, please feel free to create new issue and fill out the issue's template - we'll glad to help you.. @zhangjunhou, @Krupen, @chenpengjun, @pvsong, @lubegamark - hello! Could you please tell me what version of Android Plugin for Gradle are you using? After investigation I've found, that plugin version lower than 1.3.0 makes build in a different way than version 1.3.0 or higher. For example: project with com.android.tools.build:gradle:1.2.0 plugin has $buildDir/intermediates/res/debug path after build, and project with com.android.tools.build:gradle:1.3.0 has $buildDir/intermediates/res/merged/debug. This is the reason why the fix, provided by @chenpengjun works fine. \nSo this issue also can be fixed by changing plugin version to com.android.tools.build:gradle:1.3.0 or higher.. @Krupen, @Ge-yuan-jun - hi! \nI've reproduced project structure provided by @Krupen and got similar issue. Seems like it happens due to using non-default node_modules folder location, by default it should be located directly into project  root directory (execute react-native init myapp command to investigate default project structure). \nWhile trying to fix the issue I've done following \n1. add line nodeModulesPath=\"path/to/node_modules\" at the end of gradle.properties file (nodeModulesPath=\"../../android-v2/react-native-consumer-app/node_modules/node_modules\" as example). Instead of changing gradle.properties file you could also change path/to/node_modules/react-native-code-push/android/codepush.gradle file. Change code line nodeModulesPath = \"../../node_modules\"; to nodeModulesPath = \"path/to/node_modules\";\n2. Change command line arguments in path/to/node_modules/react-native/react.gradle file from \"node_modules/react-native/local-cli/cli.js\" to \"path/to/node_modules/react-native/local-cli/cli.js\"\n(as example - in ../../android-v2/react-native-consumer-app/node_modules/react-native/react.gradle file change argument from \"node_modules/react-native/local-cli/cli.js\" to \"android-v2/react-native-consumer-app/node_modules/react-native/local-cli/cli.js\")\nand got this error received by react-native package after executing gradlew assembleRelease command (but provided steps works well for gradlew assembleDebug command): \n\n`Cannot find entry file index.android.js in any of the roots: [\"D:\\myapp\\android-v2\\react-native-consumer-app\"]\n:app:bundleReleaseJsAndAssets FAILED`\n\nIt feels like react-native is not able to find source files needed for bundling due to unexpected project structure. \n. Closing this for now, please feel free to reopen it if the issue still reproduces or if I could help you somehow.. Hi @xMikeTx, due to react-native internal \"things\" (as I can remember) you probably need to use the following project structure as workaround:\nproject-folder\n--android\n----app\n--index.android.js\n--node_modules\n--package.json\n...\n. Hi @zijing07, thanks for reaching us and for the investigation. I've not seen this issue for a long time, I believe this PR resolves the issue, could you please confirm?. @bennyguitar - do you still experiencing the issue? Please let me know if I could help you.. Closing this, please feel free to reopen.. @vonovak - hi! The fact, that JS bundle is still loaded via React Native packager (due to jsCodeLocation variable is configured to use React Native packager for each app restart in debug mode) after CodePush updates were installed, is confusing: there are two questions about testing CodePush updates in Debug mode: https://github.com/Microsoft/react-native-code-push/issues/672 and https://github.com/Microsoft/code-push/issues/364.\nThat is why I also believe that Debug (implementation/bugs fixing without using CodePush) -> Staging (Testing CodePush updates) -> Production (promote tested CodePush updates to production) workflow is convenient and also suppose that having 3 build configs is  seems to be very handy. And @goldylucks is probably right in https://github.com/Microsoft/react-native-code-push/issues/667 that docs should be updated to let users know about \"confusing fact\" and better workflow.. @goldylucks, provided workflow looks good, but I've said above:\n\nI also believe that Debug (implementation/bugs fixing without using CodePush) -> Staging (Testing CodePush updates) -> Production (promote tested CodePush updates to production) workflow is convenient\n\nBy default CodePush has Staging and Production deployments, and the new one could be added manually by executing code-push deployment add <appName> <deploymentName> command.\nI think the issue is that current version of docs does not pay attention on the fact, that CodePush updates should not be tested in Debug mode due to React Native packager is always used in Debug mode to load js bundle.. >docs does not pay attention on the fact, that CodePush updates should not be tested in Debug mode due to React Native packager is always used in Debug mode to load js bundle.\nSo I've also created #682 ([docs] CodePush updates should be tested in Release mode only). Closing this due to https://github.com/Microsoft/react-native-code-push/issues/682 and https://github.com/Microsoft/react-native-code-push/pull/694\nPlease feel free to reopen if needed.. @iSimar - hi!\nPlease verify if you able to build main.jsbundle file using following command:\nreact-native bundle --platform ios --dev false --entry-file index.ios.js --bundle-output ios/main.jsbundle.\nIf so, could  you please provide me with content of AppDelegate.m file?. @mmoutenot, do I understand that correct that you have [ios] main.jsbundle is not found error? \nIf so,  could you please provide me with the command(s) you are using for releasing CodePush updates for iOS? \nAlso it would be very helpful if you could provide me with react-native-code-push version, react-native version, repro steps and/or stack trace.\n. @mmoutenot, hmm, seems like you've experienced environment specific problem, you could try to run commands following below and use generated output to determine what version of node causes the issue:\n```bash\n$ nvm ls\n...\n$ node\n\n[ process.argv, process.release ]\n...\n``\nPlease let me know if the issue is resolved or if you need any help.\n. @mmoutenot, just a friendly ping.. Hello @igrayson. I've tried to reproduce provided issue with following repro steps:\n1. Create new react-nativemyappusingreact-native@0.38.0andreact-native-code-push@1.15.0-betapackages, then install several node packages from provided podfile.\n2. Executepod initcommand and replace createdPodfilecontent with provided, then executepod installcommand.\n3. Openmyappproject usingmyapp.xcworkspacefile, then successfully lunch application on simulator.\n4. Replacereact-native-code-push@1.15.0-betawithreact-native-code-push@1.16.1-beta5. Update pod dependencies and make sure thatPodsusing new version ofreact-native-code-push` package.\n5. Successfully repeat step 3.\n\nSo, I haven't faced any issues with building and running the app using provided pod file, so please let me know if you have any ideas (xcode configuration, project setting and etc.) \n. @Igor1201, thank you for reaching us and sorry for late reply. \nI've created swift app using Xcode, then I've performed pod install command to install dependencies using provided by you podfile (including use_frameworks! line) and I've got no errors while building the swift app. So, could you please provide me with minimal version of your's react-native swift app where the issue reproduces? It would be very helpful, so I'll be able to determine the root cause of the issue.. @Igor1201, no problem! So I'm closing this for now, please feel free to reopen.. Closing this for now, please feel free to reopen if you have any questions.. @silhouettes, I've probably found the way we could get apk_build_time value without adding CodePush.setBuildTimeStamp(...) line. We need to add following things:\n1. add this lines:\ngroovy\nandroid.buildTypes.each {\n    it.resValue 'string', 'CODE_PUSH_APK_BUILD_TIME', System.currentTimeMillis() + \"L\"\n}\ninto codepush.gradle file. It allows us to store build time value locally into app/src/main/res/values/strings.xml file (content of strings.xml file would not be changed physically, just on the fly, but I should verify it twice). \n2. then we should read CODE_PUSH_APK_BUILD_TIME value from app/src/main/res/values/strings.xml file like this:\nJava\nlong getBinaryResourcesModifiedTime() { //we probably should change method name\n...\n    String packageName = this.mContext.getPackageName();\n    int codePushApkBuildTimeId = this.mContext.getResources().getIdentifier(\"CODE_PUSH_APK_BUILD_TIME\", \"string\", packageName);\n    String codePushApkBuildTime = this.mContext.getResources().getString(codePushApkBuildTimeId);\n...\nand convert codePushApkBuildTime variable value to long. We could add this lines into android/app/src/main/java/com/microsoft/codepush/react/CodePush.java file.\nWhat do you think?. @silhouettes, I've created https://github.com/Microsoft/react-native-code-push/pull/683. It does not contain manual installation steps and any docs changes, it uses app/src/main/res/values/strings.xml file to store apk build time value. codepush.grade script does not change app/src/main/res/values/strings.xml file physically, it inserts CODE_PUSH_APK_BUILD_TIME key on the fly (while building project).. @Chren - hi! \nCould you please confirm that there is no additional gradle.properties file exists in android/app/ directory? In case there are exist both android/app/gradle.properties and android/gradle.properties used only first one. . @aiyidu - I've tried to reproduce the issue with no luck using following repro steps: \n1. > react-native init myapp\n    > npm install --save react-native-code-push@1.16.1-beta\n    > react-native link react-native-code-push\n2. Add ANDROID_BUILD_VERSION_NAME=3.0.0 property to android/gradle.properties file\n3. Change versionName property from versionName \"1.0\" to versionName ANDROID_BUILD_VERSION_NAME in android/app/build.gradle file\n4. Then executed code-push release-react myapp android -d AndroidDev --des \"First Commit\" command \nSo could you please correct my repro steps or provide me with code samples (gradle.properties, android/app/build.gradle files content)?. @aiyidu, I've integrated provided gradle.properties file into my project and it works well, so could you please help me to determine cause of the issue? Fists, we need to check version of your code-push-cli using code-push -v command and update it if it has version lower than 1.12.6-beta.\nIn case update does not help we could try to debug code-push-cli. I suppose the issue probably occurs in C:\\Users\\%username%\\AppData\\Roaming\\npm\\node_modules\\code-push-cli\\script\\command-executor.js file in the following lines: \n\ntry {\n   const parsedProperties: any = properties.parse(propertiesContent);\n   appVersion = parsedProperties[propertyName];\n} catch (e) {\n       throw new Error('Unable to parse \"${propertiesFile}\". Please ensure it is a well-formed properties file.');\n}\nif (!appVersion) {\n       throw new Error('No property named \"${propertyName}\" exists in the \"${propertiesFile}\" file.');\n}\n\nSo could you please add logs listed below after appVersion = parsedProperties[propertyName]; line, then execute code-push release-react AIXY android -d AndroidDev --des \"First Commit\" command and send me console log?\n\nlog('propertiesContent value: \"${propertiesContent}\"');\nlog('parsedProperties value: \"${parsedProperties}\"');\nlog('appVersion value: \"${appVersion}\"');\n\nTo get more info you could also debug node.js using following command:\nnode --inspect --debug-brk \"C:\\Users\\%username%\\AppData\\Roaming\\npm\\node_modules\\code-push-cli\\script\\cli.js\" release-react AIXY android -d AndroidDev --des \"First Commit\". @aiyidu, value of propertiesContent variable looks weird, it should be equal to gradle.properties file content. fs.readFileSync() default node.js function is used to get gradle.properties file content, but for now it returns wrong value. You could try to update node.js version, it might help.\n\nAnd could you tell me how to debug node.js in mac?\nI run your command but get error:\nnode: bad option: --inspect\n\nI suppose you are using old version of node.js, you could update it (I'm using 7.4.0) or install node-inspector. I've added debugger; code line before var propertiesFile = knownLocations.find(fileExists); then executed sudo node --inspect --debug-brk /usr/local/lib/node_modules/code-push-cli/script/cli.js release-react rncp660 android -d AndroidDev --des \"First Commit\" command to start debugging.\n\nparsedProperties value: [object Object]\n\nTo fix [object Object] you could wrap up parsedProperties variable with JSON.stringify:\nexports.log(\"parsedProperties value: \" + JSON.stringify(parsedProperties));. @SamMatthewsIsACommonName, hi! Could you please try to fix it by installing CodePush plugin manually (look at pt.6)?\nI assume the issue will be fixed soon by React Native team so we wouldn't have to fix it manually.. @emielvanliere - hi! \nYes, you are right, we have to load react-native part due to react-native-code-push/CodePush.js file contains implementation of CodePush module. . @panarasi, @jy1989 - hi!\nI've updated PR and tested it with newly created React Native apps having react-native versions v0.39.2 and v0.40.0 and now it should work, please verify.. @goldylucks - hi! I suppose you are right, I've added https://github.com/Microsoft/react-native-code-push/issues/614#issuecomment-274051514 describing the same things...\n\nand if not, I could prepare a PR with better docs about that matter :)\n\nI would be very grateful if you could help us to update the docs, it could help developers to find better workflow and let them know about js bundle behavior in Debug mode, please let me know if you have any questions.. @chirag04 - hi!\nThere are two PRs, #665 and #638 are waiting to be merged and released. Hoping this will happen soon.. @grabbou, got it, thanks!\nIt would be great to support #665 due to benefits you've described in  https://github.com/facebook/react-native/issues/11747#issuecomment-271989016.\n\nThat approach seems better as it doesn't pollute global namespace and reduces one more step when user links \"manually\".\n\nSo after releasing react-native link ... updates we would merge #655 and update the react-native-code-push documentation.. @JusticeLai - hi!\nI've got the same issue using initial react-native app, so I've created https://github.com/facebook/react-native/issues/11861. @grabbou, got it, thanks!. @JusticeLai, I've applied this https://github.com/facebook/react-native/pull/11889/files changes and got build success message in release mode.. @dingbat - hi. I've tried to build initial React Native project (execute react-native init myapp command) using this PR and got build failed - CodePush.h file not found, it means that https://github.com/Microsoft/react-native-code-push/pull/665 and https://github.com/Microsoft/react-native-code-push/pull/638 PRs is steel required for react-native@0.40.0. \nBy the way I think it may be a good idea to apply this PR in next release of CodePush due to breaking changes in https://github.com/facebook/react-native/releases/tag/v0.40.0 . But this PR has no back compatibility with React Native having version v0.39.2. To make CodePush able to work both with react-native@0.40.0 and react-native@0.39.2 header files should use __has_include(...) statements. (I've added comments in files changes of this PR).\n@christopherdro, could you please rebase your commit to provide back compatibility? Please let me know if you see any issues or have any questions.. @adbl - hi!\ngetUpdateMetadata method returns info about latest installed package and supposes that local js code is in use, I don't sure if its behavior should be changed to determine js code location...\nTo make it easier to understand what js code location is in use we could output its location using this:\n...\nconst { SourceCode } = require('NativeModules');\n...\n<Text style={styles.messages}>{SourceCode.scriptURL}</Text>\n...\nDepending on jsCodeLocation variable value it prints different paths:\n1. jsCodeLocation = [CodePush bundleURL]; \n2. jsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index.ios\" fallbackResource:nil];\n\nAs for debugging: \n``` \nifdef DEBUG\njsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index.ios\" fallbackResource:nil];\nelse\njsCodeLocation = [CodePush bundleURL]; \nendif\n``\nRegarding to this code lines dev bundle is used on each app start. To make it possible to use local js code in debug mode we should done following:\n1. ReplacejsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index.ios\" fallbackResource:nil];withjsCodeLocation = [CodePush bundleURL];`.\n2. Force the JS bundle to be generated in simulator builds by removing the if block that echoes \"Skipping bundling for Simulator platform\" in the \"node_modules/react-native/packager/react-native-xcode.sh\" file.\n. @abdl, I've created https://github.com/Microsoft/react-native-code-push/pull/673 PR contains isUsingReactNativeBundle method. Please let me know if  you have any questions or see any issues.. @adbl, I've committed docs updates in https://github.com/Microsoft/react-native-code-push/pull/673. @panarasi, done! The issue number is #682. Probably this method is surplus and PR should not be merged. It would be better to use workflow described in https://github.com/Microsoft/react-native-code-push/issues/614 to avoid the situation when it is hard to say what js bundle is in use.. @mongolgamestudio - hi!\nSeems like you have faced with this issues: https://github.com/Microsoft/cordova-plugin-code-push/issues/196, https://github.com/Microsoft/react-native-code-push/issues/650\nCould you please try this PR https://github.com/Microsoft/react-native-code-push/pull/654 and let me know if it helps?\n. @jaggerwang - hi! \nI've tried to reproduce the issue using react-native@0.40.0, but with no luck. :( \nAlso I've noticed that you are using https://github.com/wix/react-native-navigation/pull/652. From this article we could see that this library supports React Native 0.37.0 only. So could you please try to test IMMEDIATE installation mode with react-native@0.37.0 and let me know if the issue still reproduces?\n. Closing this for now, please feel free to reopen.. @vonovak, I've found another way we could add staging build variant - we have to use releaseStaging naming instead of staging as workaround due to this line.. @kodemi, as workaround you could add \ngradle\nbuildConfigField \"String\", \"CODEPUSH_KEY\", '\"\"' \nline here. It will prevent CodePush from installing updates due to empty deployment key.\nPlease let me know if you have any questions or see any issues.. @Amurmurmur, I've got the same issue and resolved it like this: \n\nSo I've changed Staging Build Products Path value from $(BUILD_DIR)/$(CONFIGURATION)$(EFFECTIVE_PLATFORM_NAME) to $(BUILD_DIR)/Release$(EFFECTIVE_PLATFORM_NAME)\nCould you please verify if it works for you? If so, we should probably update the documentation to workaround the issue.. @Amurmurmur, thanks for the response. I've reproduced and fixed the issue in the same way without using CodePush. So initial react-native app (created by react-native init myapp command) also has this issue, we should probably investigate it to find more suitable solution or at least update the documentation.. Closing this, please feel free to reopen if needed. @jameslcj, got it, closing this for now, please feel free to reopen if needed!. Fixed it, thanks!. @Fantasim, do I understand correctly that you've received an update message which points to code-push deployment released 3 weeks ago? If so, this message probably means that the app does not have any installed updates. To check it you could try to call CodePush.getUpdateMetadata(CodePush.UpdateState.RUNNING) method. In my case it returns some metadata, which means that the app have successfully installed update, so I have no update messages anymore.\nTo test your changes you could try to \n1. prepare release/staging build which does not contain new changes and changes made 3 weeks ago.\n2. then you need to install changes made 3 weeks ago\n3. release new CodePush deployment and install it. \nIn case if you've already released new changes the last CodePush deployment will be applied on step 2.\nWe've also discussed best approach to test CodePush updates: https://github.com/Microsoft/react-native-code-push/issues/614\nPlease also note that CodePush updates should not be tested in debug mode: https://github.com/Microsoft/react-native-code-push/issues/682. @Fantasim, are you still experiencing the issue? Please let me know if I could help you.. @buptkang, thank you, I've applied the correction. @LiuC520, are  you using the same deployment key both for Android and iOS?\nIt feels like you've released an update for android using code-push release-react myapp android command and tried to install produced update for iOS, but there are different bundle names for iOS and Android:\n\nAndroid: index.android.bundle\niOS: main.jsbundle\n\nSo could you please try to execute code-push release-react myapp ios command and install the update again? Please let me know if it helps. . @vedovato, do you still experiencing the issue? Please let me know if you see any issues.. @vedovato, could you please provide me minimal version of the app (https://codepaste.net/ehp1a1 link does not work for me) where the issue reproduces? So I will investigate it and try to help you.. @vedovato, I have a quick look on your code snapshot and I could advice you the following:\n1. Remove lines: https://gist.github.com/vedovato/d4405ff36db140125e607fdec6d66621#file-index-js-L4,  https://gist.github.com/vedovato/d4405ff36db140125e607fdec6d66621#file-index-js-L60 and https://gist.github.com/vedovato/d4405ff36db140125e607fdec6d66621#file-news-js-app-news-screen-L31\n2. Add News = codePush({ installMode: codePush.InstallMode.ON_NEXT_RESUME })(News); line here: https://gist.github.com/vedovato/d4405ff36db140125e607fdec6d66621#file-news-js-app-news-screen-L112\nPlease let me know if it helps or if you see any issues. . @vedovato, closing this for now, please feel free to reopen if the issue still reproduces or if you have any questions.. Hi @kwnccc, thanks for reaching us. Could you please share pure project source code with me? So I'll be able to investigate it and find out the root cause of the issue.. @kwnccc, thanks for sharing the source code and repro steps. I can see that the source code is fine, but I can see an issue in your repro steps - you shouldn't test CodePush updates in Debug mode while react-native packager is working, please take a look at this NOTE from official docs:\n\nNOTE: CodePush updates should be tested in modes other than Debug mode. In Debug mode, React Native app always downloads JS bundle generated by packager, so JS bundle downloaded by CodePush does not apply.\n\nIf you want to test CodePush updates in development/debug mode for iOS you should do the following:\n\nModify the\u00a0AppDelegate.m\u00a0to force the JSCode location to be \"remote\". (This is already done for you if you are using the example app)\n```objective-c\njsCodeLocation = [CodePush bundleURL];\n\n//#ifdef DEBUG\n////  jsCodeLocation = [NSURL URLWithString:@\"http://localhost:8081/index.ios.bundle?platform=ios&dev=true\"];\n//  jsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index.ios\"fallbackResource:nil];\n//#else\n//  jsCodeLocation = [CodePush bundleURL];\n//#endif\n//\n```\n\nComment around lines 17-20 in\u00a0node_modules/react-native/scripts/react-native-code.sh\u00a0the lines:\nsh\n    # if [[ \"$PLATFORM_NAME\" = \"iphonesimulator\" ]]; then\n      # echo \"Skipping bundling for Simulator platform\"\n      # exit 0;\n    # fi\n\nPlease let me know if it helps or if the issue is still reproduced for you.. @kwnccc, do I get it right if you are searching the way to verify if an update has been installed or not? To achieve it you could use codePush.SyncStatus.UPDATE_INSTALLED event, also you could call and print result of execution of getUpdateMetadata method\nPlease let me know if you have any questions.. @leonardgithub, to promote app version you have to change android:versionName property value in AndroidManifest.xml file, but it cannot be changed at runtime. This is how Android designed. To promote app version you need to perform a release to the app market store.\nClosing this for now, please feel free to reopen if you have any questions or if you have any ideas how we could change app version at run-time (programmatically). Thank you!. @Micjoyce, I could see that your bundle command does not contain --assets-dest parameter, it may cause the issue - from the react-native-code-push docs I've found:\n\nImages dissappear after installing CodePush update\nIf your app is using the React Native assets system to load images (i.e. the require(./foo.png) syntax), then you MUST release your assets along with your JS bundle to CodePush. Follow these instructions to see how to do this.\n\nYou probably need to use smth like this:\n```\nmkdir ./CodePush\nreact-native bundle --platform ios \\\n--entry-file index.ios.js \\\n--bundle-output ./CodePush/main.jsbundle \\\n--assets-dest ./CodePush \\\n--dev false\ncode-push release MyApp-iOS ./CodePush 1.0.0\n``\nCould you please try to use commands I've listed above and let me know if any changes?. @ivpusic, We've probable have not faced with this random issue before, so could you please provide me with the way you are loading images (i.e. the require(./foo.png) syntax or smth else) and releasing CodePush updates (vanillareleaseorrelease-reactcommands)? Also it would be very helpful if you could provide me with minimal version of the app where the issue reproduces.. @Micjoyce, @ivpusic, just a friendly ping.. @ivpusic, sorry for slow responce.\nI've tried to reproduce the issue using provided examples but with no luck, so could you please provide me with the minimal version of the app where the issue reproduces? (you could use [react-native-code-push` demo app](https://github.com/Microsoft/react-native-code-push/tree/master/Examples) as template). Also could you please clarify what you mean by\n\nand after component rerender is triggered, image will show up\n\nDo I get it right that all images will show up in case you manually triggering component rerenderer by calling this.forceUpdate() method?\n. @Micjoyce. @ivpusic, just a friendly ping.. @ivpusic,\n\nHow I \"fix\" this, is just to navigate to another tab in the application, go back, and then they will show up.\n\nAre you using React Native Navigation Module: https://github.com/wix/react-native-navigation? The root cause of the issue could probably be here, but we need to check it, so could you please verify if the issue reproduces in case you are not using Navigation Module?\nI also can see that your second example contains absolute path: \njsx\n// example 2:\n<Image style={{width: smallDimensions, height: smallDimensions}} source={require('myapp/assets/...')} />\nPlease note, that absolute path maps to the old (binary) version of the image, you should use relative paths instead if you want to update assets (images) via CodePush.\n. @ivpusic, could also please confirm if you've CodePush-ified your app's root component? . Hi @ivpusic, I've tried to reproduce the issue but with no luck again, so I'm closing this for now.\nPlease feel free to reopen in case you able to reproduce this with our sample app. If you can't reproduce the bug on it, provide us as much info as possible about your project (it would be best if you could share with us minimal of your app code where we can reproduce the issue this way).. Hello @pcarion, thank you for reaching us. Could you please answer several questions:\n1. Do you use testflight to test your app?\n2. Does your app use https://github.com/react-community/react-navigation module for navigation?\n3. Does the issue reproduce both for Android and iOS?\nI'll try to reproduce the issue again using example apps from react-navigation repo, hoping I'll be able to reproduce the issue this time, so if you have any ideas or could share me with code samples I'll be much appreciated, thank you.. Hey guys, I've reproduced the issue but for Android only, so I've created new issue in React Native repo due to it reproduces even if CodePush module not integrated into the project.\nAs for iOS - i'm still trying to repro it, so it would be great if someone who experiencing the issue could share source codes (or reproduce it using sample apps) with me. Thank you!. Hi @cmoody, got it, please let me know if any changes.\nSo as for Android - it seems like it is a known issue that have place due to memory problem, I've found workaround: add android:largeHeap=\"true\" to AndroidManifest.xml Application section. I've tested it and it works well for me, please verify if it fixes the issue for Android and let me know if any changes.. @cmoody, @pcarion, @ivpusic, just a friendly ping.. Hello @cmoody, do you have any updates?. @cmoody, thanks for the response, so I'm closing this for now again, we'll reopen it when more info or stable repro will be available.. @freddy24, could you please try to use var codePush = require(\"react-native-code-push\") instead of import...? In case the issue is still reproduces please share me with full content of MainApplication.java and index.android.js. files - It feels like your app using some additional libraries such as NavigationModule or another.. @freddy24, I could see two getPackages() methods in your MainApplication.java, so it seems that native part of CodePush was not installed properly.\nPlease try to inject CodePush in the first getPackages() method and let me know if any changes:\njava\npublic static MyReactPackage getPackages() {\n    return packages; // inject CodePush here\n}. >I got this message:[CodePush] The CodePush module doesn't appear to be properly installed. Please double-check that everything is setup correctly.\nIt happens due to native-side of CodePush was not installed properly. For now I could not see anything wrong with CodePush installation, so could you please provide me with minimal version of the app where the issue reproduces? You also could compare your MainApplication.java file with the same file in CodePushDemoApp.. @freddy24, got it, thanks for the response.\n@moaxaca, please let me know if you still experiencing the issue or if you have any questions.. Closing this for now, please feel free to reopen if needed.. Closing this due to https://github.com/Microsoft/react-native-code-push/issues/762 has been created.. @chirag04, got it, thanks!. Closing this due to https://github.com/Microsoft/react-native-code-push/pull/735 has been merged. Please feel free to reopen if need.. Thank you @buptkang and @silhouettes, it's very helpful script!\n\nallow you to install react-native-code-push from a local directory\n\nPlease let me know if I could help you with this improvement.\n. @dbof10, please try to import CodePush like this var CodePush = require(\"react-native-code-push\") and let me know if any changes.. @passabilities, thanks for the feedback. I've added PR implements this functionality here. In case you want to test it you could use my code-push fork.. Closing this due to #399 has been merged.. Hi @MrBr, thanks for reaching us and sorry for such late reply.\n\nthe current Android implementation leaves mAssetsBundleFileName with null value which prevents proper CodePush synchronization. It fails when checking if there is proper entry file in the bundle because it is looking for the null\n\nI don't sure if I get it right, but I've not heard about such kind of issue before. Could you please provide us with more info or repro steps, stack trace to get better understanding what actually goes wrong?\nCould you also please clarify what do you mean by \"In long term, if sync is already checking entry bundle file, then I would allow JS part to change it for the new bundle.\"  and also clarify (provide pseudo code if possible) which way you are planning to use setAssestsBundleFileName method?\nPlease also let me know if you see any issues.\n. @MrBr, just a friendly ping.. Hi @MrBr, sorry for such delayed response. I've reviewed your post ones again and I've got your idea here. To set mAssetsBundleFileName private var value you could use CodePush.getJSBundleFile(\"index.android.bundle\"); method to set custom JS bundle name. Please pay attention to CodePush setup for react native activity:\n```js\n@Override\n    protected void onCreate ( Bundle savedInstanceState ) {\n    super.onCreate( savedInstanceState );\n\n    if ( Build.VERSION.SDK_INT >= Build.VERSION_CODES.M ) {\n        if ( !Settings.canDrawOverlays( this ) ) {\n            Intent intent = new Intent( Settings.ACTION_MANAGE_OVERLAY_PERMISSION,\n                    Uri.parse( \"package:\" + getPackageName() ) );\n            startActivityForResult( intent, OVERLAY_PERMISSION_REQ_CODE );\n        }\n    }\n\n    mReactRootView = new ReactRootView( this );\n    mReactInstanceManager = ReactInstanceManager.builder()\n                                                .setApplication( getApplication() )\n                                                .addPackage( new MainReactPackage() )\n                                                .addPackage( new RCTCameraPackage() )\n                                                .addPackage( new SvgPackage() )\n                                                .addPackage( new RNFSPackage() )\n                                                .addPackage(new CodePush(BuildConfig.CODEPUSH_KEY, getApplicationContext(), BuildConfig.DEBUG))\n\n//                                                    .addPackage( new MapsPackage() )\n                                                    .addPackage( new ReactNativeMapboxGLPackage() )\n                                                    .addPackage( new RCTBluetoothSerialPackage() )\n                                                    .setUseDeveloperSupport( BuildConfig.DEBUG )\n                                                    .setInitialLifecycleState( LifecycleState.RESUMED )\n                .setJSBundleFile(CodePush.getJSBundleFile(\"index.android.bundle\"))\n                                                    .build();\n    // Get passed extras and pass to React Native as initial props.\n\n    String facilityUid  = getIntent().getStringExtra( this.getPackageName() + \".facilityUid\" );\n    String initialRoute = getIntent().getStringExtra( this.getPackageName() + \".initialRoute\" );\n\n    Bundle initialProps = new Bundle();\n\n    initialProps.putString(\"facilityUid\", facilityUid);\n    initialProps.putString(\"initialRoute\", initialRoute);\n\n    mReactRootView.startReactApplication( mReactInstanceManager, \"myappname\", initialProps );\n\n    setContentView( mReactRootView );\n}\n\n```\nClosing this for now, please feel free to reopen in case of any concerns or questions.. @eladmoshe, thanks for the question. The source code uploaded to the Code Push Servers can only be accessed using your access key. Once uploaded, only meta data about the source code can change, not the code itself. We are also working on adding the ability to sign the code and verify its validity, but this is something for the future.\nAlso, all communications are via HTTPS protocol. CodePush CLI and React Native SDK do verify that CodePush Web Server SSL certificate is valid.. @ggordan, sorry for slow response. \nDo you still experiencing the issue? If so, could you please put console.log(downloadUrl) line before this line or just debug it? Use this url for downloading via browser and unzipping update package contents , so we would able to verify if the index.android.bundle file exists within update package contents and determine if the problem is in preparing CodePush update (code-push-cli) or in React Native Module for CodePush (react-native-code-push).. @ggordan, just a friendly ping.. Hello @gabergg, sorry for slow response, do you still experiencing the issue? Were you able to resolve it?. Closing this due to #743 has been merged. Please feel free to reopen if needed.. @byk04712, thanks for response. Closing this for now, please feel free to reopen if needed.. @dannyyaou, thank you for the response, closing this for now, please feel free to reopen if needed.. Hi @ou2s, thanks for reaching us. \nCould you please clarify - do I get it right if \n1. your Info.plist has version 5.0\n2. you have released several update for 5.0\n3. you have released new binary version of your app 5.0.1\n4. you want to avoid of installing updates that have been released for  5.0 to 5.0.1?\nIf so, CodePush automatically gets your app version from your Info.plist file and it works for most of the users. Also it's important to note that CodePush using semver rules while making a desition to distribute the specific update for the current binary version of your app or not.\nTo avoid this issue you can use major.minor.patch version structure for your app or just release updates using target-binary-version parameter\nPlease let me know if I've missed something or if you have any questions or considerations.. @ou2s, I got your concern here, thanks for the clarification. We are going to discuss if it would be more clear for users to convert app version from build.gradle or info.plist to the major.minor.patch format by default to avoid of unexpected installations. We'll let you know the results, thanks.. @JakeRawr, you've probably faced with the one of common issues:\n\nImages dissappear after installing CodePush update\nIf your app is using the React Native assets system to load images (i.e. the require(./foo.png) syntax), then you MUST release your assets along with your JS bundle to CodePush.\n\nPlease look at the list of supported components, seems like you are using static images syntax (i.e. using the { uri: \"foo\" }), such approach does not supported by CodePush, so you have to use React Native assets system (i.e. using the require(\"./foo.png\") syntax) like here.\nPlease let me know if it helps or if you have any questions.. @MattyK14, thank you for the reference, I've also created PR https://github.com/Microsoft/react-native-code-push/pull/747 that fixes this inconsistency.. @zslucky, I've tried to reproduce the issue using provided repro steps but with no luck. \nAs for me I have following after executing react-native init myapp and npm install --save react-native-code-push@latest commands:\njson\n\"dependencies\": {\n    \"react\": \"15.4.2\",\n    \"react-native\": \"0.41.2\",\n    \"react-native-code-push\": \"^1.17.1-beta\"\n  },\nCould you please look at your version of react-native-code-push in package.json file in dependencies list? It should be the same as for me - ^1.17.1-beta. @zslucky, oh, I see, looks like the problem is in leading v letter: v1.17.1-beta. I've found the same issue here: https://github.com/CocoaPods/CocoaPods/issues/1687\nI also could confirm that previous version of react-native-code-push does not use leading v letter in the version prop. And current version (v1.17.1-beta) use it.\nBut I still haven't reproduced the issue - my ../node_modules/react-native-code-push/package.json file contains well formatted version prop: \"version\": \"1.17.1-beta\" (I've installed react-native-code-push package using npm install --save react-native-code-push@latest command).\nBy the way, I think It would be great to fix this issue, because for now it is not possible to use local copy or remote repo of react-native-code-push for installation using podFile.\nThank you so mush!. Hi @L-Jovi, thank you for the question. \nCould you please confirm if you are using info.plist file to store production deployment key by default and using codePush.sync({ deploymentKey: STAGING_KEY }); code to override default value by clicking the hidden button 6 times?\nIf so, please note that the deployment key specified via codePush.sync({ deploymentKey: STAGING_KEY }); does not persist beyond the given call, and needs to be specified as an option each time it is used. It means that  after app restarts - production deployment key is in use again, so it is expected behavior that you've received Production-0 notification by open the app again.\nTo fix the issue you could probably use the following approach (or smth similar):\n1. The hidden button is being clicked 6 times, so the app should work in Staging mode from this moment across all app restarts.\njavascript\nawait AsyncStorage.setItem('isStaging', 'true');\n2. Check if app works in Staging mode or not to choose what deployment key should be used, then launch CodePush sync:\njavascript\nif (isStaging) {\n    codePush.sync({ deploymentKey: STAGING_KEY });\n} else {\n    codePush.sync({ deploymentKey: PROD_KEY });\n}\n3. The hidden button is being clicked 6 times again, so the app should work in Production mode from this moment across all app restarts.\njavascript\nawait AsyncStorage.setItem('isStaging', 'false');\nPlease let me know if it helps or if you have any questions.. @L-Jovi, Staging and Production deployments are actually two different \"branches\". At every single moment of the time react-native-code-push works with only one deployment and does not know anything about other deployments. This means that in case of using Staging deployment key your app will download updates from Staging \"branch\". Then, if you start using Production deployment key, CodePush will \"forget\" about Staging brunch and will try to download and apply the latest available CodePush update from Production \"branch\".\n\nand then, if I apply the Staging-1 version, we could also receive Production-0 notification by open app again, I mean we could downgrade from Staging-1 to Production-0, but I don't think it correct\n\nYou've received Production-0 notification due to the app had reloaded and started using Production deployment key (specified by default in info.plist file). That's why I suggest you to save current deployment name in AsyncStorage to use it across all app restarts, so Staging deployment key will not be overridden by Production on next app restart.\nPlease let me know if you have any questions.. @ryankask, thank you for reporting the issue.\n\nThis version requirement was recently changed because of #725 but requiring the newer version seems out of step with React Native's version.\n\nAgreed, seems like there is an inconsistency, but I could see that the PR fixes this issue https://github.com/Microsoft/react-native-code-push/issues/724.\n\nI'm not an Android developer so perhaps I'm misunderstanding something but should this change be rolled back?\n\nI also think it would be better to have one common version (in case if it's possible) of Android SDK build tools: the same both for React Native and React Native Module for CodePush, so I'll investigate and discuss this approach. As for now, to fix the issue you could try to download and install the android-25 SDK build tools version. Please let me know if it helps.. Closing this due to #747 has been merged.. Hi @silhouettes, I've reproduced the issue for RN 0.43.0-rc.1 for Android only and I can confirm that provided fix works well for this version of RN. I also can confirm that the fix has no backwards compatibility both with RN 0.39 and RN 0.41.. Merging this due to all seems to be ok, except this issue, that have place due to the React version 16.0.0-alpha.5 has been published on NPM. It can be fixed by downgrading React version to 16.0.0-alpha.3 in your package.json file and re-installing the dependencies.. @nihgwu, thank you for clarification, the commit has been merged so I suppose the next release of RN will fix the issue.. @michaelduminy, we've released new version of React Native Module for CodePush: react-native-code-push@2.0.1-beta (it's available via npm), please let me know if you see any issues or have any questions.. Hi @rahulmishra-goibibo, sorry for late reply. Do you still experiencing the issue?\nDo I get it right if you've released CodePush update for previous version of your app, let's say 1.1.1, then you've increased app version to 1.1.2 and released your app to the play store?\nIf so, I could assume, that some amount of your app users have installed CodePush update due to using old version 1.1.1 of your app. And users are using new version 1.1.2 won't install CodePush update due to it has been released for old version.\nPlease let me know if you have any questions.. @rahulmishra-goibibo, CodePush SDK reports to the CodePush server if update was installed successfully on componentDidMount event. We also have implemented retry logic in case there is an error occurred while trying report deployment status (lost interned connection for example).\nI could assume, that this mismatch have place due to there is a little difference between number of downloaded apps and number of active users who are using your app. Does it make sense?. @rahulmishra-goibibo, thank you for the response. \nClosing this, please feel free to reopen if needed.. Hello @coutliuxing, @adrianha, thank you for reaching us the issue. Could you please answer several questions below to help us to determine the problem:\n1) Can you please try to reproduce this with our sample app? If you can't reproduce the bug on it, provide us as much info as possible about your project (it would be best if you could share with us minimal of your app code where we can reproduce the issue this way)\n2) What are react-native/react-native-code-push versions you are using?. @coutliuxing, yeah, I could see that you've successfully released CodePush update and that your app is properly configured, except the buildToolsVersion: \"25.0.0\", we and React Native are officially supporting  buildToolsVersion: \"23.0.1\". \nCould you please describe me what actually goes wrong (actual behavior)  and what you are expecting instead (expected behavior). Could you please also share me with minimum of  your client side code (js files), it would be very helpful for me due to I'll figure out which way you are using animations.. @adrianha, @coutliuxing, could you please also confirm if the issue reproduces only in Release build on physical device?. @corymsmith, could you please share your index.android.js file contents? I just want to clarify which way you are using ImageView and onPressIn/onPressOut events. Could you please also confirm if the the issue reproduces in Debug build on emulator too?. @adrianha, do you experiencing the same issue as in https://github.com/Microsoft/react-native-code-push/issues/739#issuecomment-290057696?\nIf I get it right you've got following repro steps (please correct them if needed): \n1. Your app uses binary version of the code, so animation is smooth.\n2. You've released an CodePush update\n3. Your app downloads and installs the CodePush update\n4. After app restarts animations becomes slower\nCould you please also provide me with index.android.js file contents just to make it clear for me what kind of animation you are using?. @adrianha,\n\nMy app become slower when using binary version. It will be back to normal state after restart and applying the update from code push.\nWhen i run on releaseStaging mode, everything is alright even after fresh install.\n\nIt is really weird, have you tried to test Fresh install without CodePush module (remove it from js and java files), does the issue reproduce in this case? Is it possible that the root cause of the issue could be in your release build type configuration? Please try to disable minifyEnabled option in release build type and verify if the issue is reproduces. Please let me know if any updates.. @coutliuxing, thanks for the example app. I was able to reproduce the issue and I could see, that animation becomes a little bit slower after installing CodePush update than before, but I could not see huge impact.\nI've found here http://stackoverflow.com/a/9563467 that internal storage (including assets directory) much slower to access a file inside it, than res folder. CodePush SDK uses internal storage to store update contents inside it, so this is a most likely reason why you've got animation performance impact. I don't sure if there is exists easy way to avoid the issue, I'll let you know if I find it, please also let me know if you have any ideas.. @adrianha, just a friendly ping.. @adrianha, no problem, I'm closing this for now, please feel free to reopen in case of any updates!. Hello @yaronlevi, thank you for the question. \nI've verified RN 0.42 support here: https://github.com/Microsoft/react-native-code-push/pull/742 and all seems to be ok, please let me know if you see any issues while using react-native-code-push with RN 0.42. Hi @rouge3351, seems like you've got this issue due to React folder in /project_dir/ios/Pods directory. I could not see that folder in my Pods folder, so the issue does not reproduce. Please try to remove /project_dir/ios/Pods/React folder and let me know if it helps.\nAlso please make sure your Podfile has been configured properly. Here is contents of my own version of Podfile:\n```Podfile\npod 'React', :path => '../node_modules/react-native', :subspecs => [\n    'Core',\n    'RCTText',\n    'RCTNetwork',\n    'RCTWebSocket', # needed for debugging\n    # Add any other subspecs you want to use in your project\n]\npod 'CodePush', :path => '../node_modules/react-native-code-push'\n```. Hi @desmond1121, thanks for reaching us and sorry for late reply. \nCould you please clarify (add details) about workflow that will include bintray in build process and how we can help you with this (what should we implement / add support for)?\nPlease let me know if you have any questions or see any issues.. Hi @desmond1121, I'm closing this for now, please feel free to reopen if any updates.. @talenguyen, what version of Android Plugin for Gradle you are using?  Revision 2.3.0+ requires Build Tools 25.0.0 or higher: https://developer.android.com/studio/releases/gradle-plugin.html. I'm closing the issue now as it turns out that code-push is valid for using with app store. Will reopen this one if any changes.. Closing this for now due to discussion have place in https://github.com/Microsoft/code-push/issues/307.\nPlease feel free to reopen if needed.. Hi @diegocouto, thank you for reporting the issue. Also please sorry for late reply.\nThe issue is caused by this line of code. But the root cause of the issue is that stateless component is in use. Our demo app extends React.Component: class CodePushDemoApp extends Component { and use it further with codePush decorator: CodePushDemoApp = CodePush(codePushOptions)(CodePushDemoApp); \nTo fix the issue could you please try the following:\nsetup.js\n```javascript\nclass MyRoot extends Component {\n    ...\n    render() {\n        return \n    }\n}\nMyRoot = codePush(MyRoot);\nlet App = () => (\n  \n\n\n);\nmodule.exports = App;\n```\nI've also found the code sample that uses the same approach.\nPlease let me know if it helps or if you have any issues.. @diegocouto, just a friendly ping.. @diegocouto, great! Closing this, please feel free to reopen if needed.. Hello @WhynoChinese, please also look at the same issue here: https://github.com/Microsoft/react-native-code-push/issues/457, it also may help you to figure out what goes wrong.. Hello @kevinTutu, here is PR fixing this issue: https://github.com/Microsoft/react-native-code-push/pull/735, please let me know if it helps or if you see any other issues.. @kevinTutu, could you please clarify - you have tried to apply PR fixing the issue and the issue is steel reproduces?\nHere you could see that React Native team has changed ReactChoreographer class location: https://github.com/Microsoft/react-native-code-push/pull/735/files#diff-99865b122cb5308ab005ac99ccb55da0L22. @Colmea, got it, closing this for now.\n\nI still don't know how to dynamically add my codepush key in MainApplication.java and why we need this if we have the keys in build.gradle, but it's not related to this issue.\n\nPlease look at https://github.com/Microsoft/react-native-code-push#android\nUsing this approach you just need to specify build type you what to use, so BuildConfig.CODEPUSH_KEY property will contain appropriate deployment key value. . Hi @Phredward, thank you for reaching us, I've just created PR fixing the issue, so would you have a chance to look at it and verify if it works as expected?. Closing this due to #765 has been merged.. @silhouettes, looks good to me, but do I get it right it probably means that we have to update peerDependencies each time new version of RN is released: \n1. release react-native-code-push@1.18.0 due to breaking changes in RN 0.43 and update peer dependencies to peerDependencies: \"0.43.x\"\n2. release react-native-code-push@1.18.1 due to RN 0.44 has been release without any breaking changes, update peer dependencies to peerDependencies: \"0.43.x-0.44.x\"\n3. release react-native-code-push@1.19.0  due to breaking changes in RN 0.45 and update peer dependencies to peerDependencies: \"0.45.x\"\n4. and so on... ?\n. Closing this for now due to use case is very rare and currently we have more important items to work on.. Hi @chang-chaunce, you've probably faced with this issue due to breaking changes that have been introduced by Android plugin for Gradle, revision 2.3.0\nTo fix the issue please try to downgrade your version of Android plugin for Gradle to 2.2.3 here and change buildToolsVersion value to 23.0.1 due to it's officially supported by React Native and CodePush.. @BretJohnson, no problem, thanks!. Hi @zeljkoX, could you please verify if CODE_PUSH_APK_BUILD_TIME key value is in resources.arsc file?\nYou can find it like this:\n\nIn case  you would not be able to find that value please try to re-install react-native-code-push module and then re-build your app.\nPlease let me know if you have any questions.. Hi @jsierles, sorry for late reply, do you still experiencing the issue?\n. Hi @youngcube, thanks for reaching us, could you please double check if codepush.gradle file inside your's node_modiles/react-native-code-push/android folder contains this line?. @youngcube, got it. If I get it right you've created new issue here https://github.com/Microsoft/react-native-code-push/issues/873, so I was able to reproduce it using your example app and currently investigating it.. @jsierles, could you please create new issue and provide us more info by filling issue template or you could look at #873 and verify if you have the similar use case as there.. @jsierles, please also look at https://github.com/Microsoft/react-native-code-push/issues/873#issuecomment-306776546 - it could help.. Hi @coutliuxing, if you don't mind, let's discuss the issue here https://github.com/Microsoft/react-native-code-push/issues/739, I just want to avoid duplication.\nClosing this due to we already have the similar issue.. Hi @guilharj, thanks for reaching us and sorry for late reply.\n@iacopo87 has implemented node binary path configuration, please verify. As for identify node_modules \u2013 as I can remember I\u2019ve experienced a lot of issues with changing node_modules location due to react-native architecture, so I don\u2019t think if we should configure it, but I could be wrong. Please let me know what do you think.. Hi @guilharj, I've published https://github.com/Microsoft/react-native-code-push/pull/869, could you please have a chance to look at this and verify if it works as expected?. Hi @bulby97, thank you for reaching us. Could you please verify if the issue also reproduces for react-native:  0.43.0-rc.5? Do I get it right that you are using immediate installation mode? If so, please try to close, then open app and verify if the issue still reproduces. Please let me know if any updates.. Hi @jcharbo, provided issue has been fixed in https://github.com/Microsoft/react-native-code-push/pull/735. I suppose that react-native-code-push@2.0.0-beta will be released very soon.. @bulby97, React Native team have released new version of RN: react-native@0.43.0, please verify if the issue is fixed by the new release. In case the issue still reproduces, it would be very helpful if you'll provide me with code samples (the way you are using FlatList), so I'll be able to start investigation mush faster. Anyway I'll let you know if any updates.. @bulby97, thank you for the explanation, I'll try to figure out what goes wrong and let you know if any updates.. @bulby97, I've crated sample app that uses FlatList from RN examples and I've got no layout issues after releasing and applying CodePush update, so is it possible that you are trying to apply js bundle (from CodePush update) compiled with RN0.43 to the apps that have been compiled with RN0.42 and that are currently running js bundle that also has been complied with RN0.42?\n. @bulby97, I believe you should not apply js bundle compiled with RN0.43 to the app that is currently running RN0.42 or vice versa. It could lead unexpected issues due to the app running RN0.43 may have important native side changes that are not present in the app running RN0.42. The same is for js bundles - js bundle produced by RN0.43 may have another content (or way it interacts with the native side) than js bundle produced by RN0.42.\nI suppose it would be much better to release app compiled with RN0.43 to the app store first, and then produce CodePush updates if needed.. @jcharbo, we've released new version of React Native Module for CodePush: react-native-code-push@2.0.1-beta (it's available via npm), please let me know if you see any issues or have any questions.. @bulby97, no problem, thank you for reaching us and feel free to reopen if needed!. Hello @Kennytian, @Lxxyx, thank you for reaching us. react-native-code-push@2.0.1-beta has no backwards compatibility with RN0.42 due to braking changes that has been made in RN0.43, I've updated compatibility table to make it more clear.\nPlease let me know if you have any questions.. Hi @messense, thank you for reaching us. Could you please provide us what versions of react-native and react-native-code-push you've been used before upgrade? \nPlease also provide me with steps you've used to upgrade react-native and react-native-code-push \n to verify if the steps are the same as here.  In case you've used another installation steps, please try totally remove react-native-code-push module and install it again using manual installation steps.\nIs it possible if you are experiencing similar problem that described here: https://github.com/Microsoft/react-native-code-push/issues/775#issuecomment-291534691?. @messense, I've tried to reproduce the issue with the following repro steps, but with no luck:\n1. Build app having version 1.0\n2. Release CodePush update v1: code-push release-react rncp782-ios ios --targetBinaryVersion=~1.0\n3. Successfully Install CodePush update v1 on app having version 1.0\n4. Build app having version 1.1\n5. Receive App up to date message.\nSo could you please correct my repro steps if needed and try to reproduce the issue using our sample app (or provide me with additional info regarding the issue/environment and etc.)? \nAs for now, you could try to use patch command to fix targetBinaryVersion parameter value.\n. @messense, no problem!. Closing this due to #787 has been merged.. Hi @claykohut, thanks for reaching us. I've investigated the issue, seems like there is a mismatch between the documentation and implementation. Documentation says that disallowRestart works with InstallMode.ON_NEXT_RESUME, but from the source code I can see the following:\n1. disallowRestart method affects  RestartManager.restartApp method\n2. RestartManager.restartApp is used by install method only in case InstallMode.IMMEDIATE is in use\n3. App restarts programmatically via native side both for Android and iOS due to _allowed flag does not used by native side. \nAs result disallowRestart feature works for InstallMode.IMMEDIATE only. For now we are working on Support Brownfield React Native apps feature, so we'll move _allowed flag to the native side and use it further for ON_NEXT_RESUME, ON_NEXT_SUSPEND https://github.com/Microsoft/react-native-code-push/pull/770 and IMMEDIATE installation modes, so the issue will be fixed.\nPlease let me know if you have any questions.. Hi @joeferraro, thanks for reaching us. We've already implemented \"Support for Brownfield React Native apps\" feature that also includes this improvement, here you can find my fork. Here you can see native RestartManager where the issue is fixed. \nThe main problem why we aren't merging this is that we need to test \"Support for Brownfield React Native apps\" very carefully and deeply to avoid as much issues as possible. So currently we are testing this, so we will be very grateful if you could help us to test it if possible.. Hi @MrLoh, thanks for reaching us. \n\nHas this been release yey\n\nUnfortunately, no, currently we have other priorities, but we'll back to this asap.\n\nand does it also apply to ON_NEXT_SUSPEND, the docs only mention ON_NEXT_RESUME at the moment.\n\nafter releasing \"support for brownfield apps\" feature it will support both ON_NEXT_RESUME and ON_NEXT_SUSPEND. Hi @skleest, could you please confirm if the issue has been fixed to you by this PR?\nPlease let me know if you have any questions or see any issues.. @skleest, I'm closing this for now, please feel free to reopen if needed.. Hi @skleest, thanks for reaching out to me. It is difficult to say what goes wrong here without exact reproduction steps or app sample where the issue reproduces.\nHave you configured your staging env using this article? If not, please go thru it and check if everything has been configured cofigured correctly.\nPlease let me know if any updates or if you have any questions.. Hi @natdm, thank  you for reaching us. Could you please execute code-push debug android command and share output with me?\nIt seems like you've got The CodePush module doesn't appear to be properly installed. Please double-check that everything is setup correctly. error. To fix it please try to remove new CodePush(\"REDACTED\", MainApplication.this, BuildConfig.DEBUG) line from protected List<ReactPackage> getPackages() { and let me know if any updates.. @natdm, please also add \nJava\n    @Override\n    protected String getJSBundleFile() {\n      return CodePush.getJSBundleFile();\n    }\nmethod to the MainApplication class and let me know if any changes.. @natdm, \n\nIt's already in there.\n\nCould you please clarify - have you added getJSBundleFile method directly in MainApplication, not in the  ReactNativeHost:\nJava\npublic class MainApplication extends NavigationApplication implements ReactApplication {\n    @Nullable\n    @Override\n    public String getJSBundleFile() {\n      return CodePush.getJSBundleFile();\n    }\n    ...\n}. @natdm, I've just tried to use CodePush with react-native-navigation module and it works well for me:\n1. Copy https://github.com/wix/react-native-navigation/tree/master/example\n2. Install CodePush\n3. Change MainApplication.java file like this:\n ```Java\npublic class MainApplication extends NavigationApplication {\n    @Override\n    public boolean isDebug() {\n        return BuildConfig.DEBUG;\n    }\n@Nullable\n@Override\npublic String getJSBundleFile() {\n  return CodePush.getJSBundleFile();\n}\n\n@Nullable\n@Override\npublic List<ReactPackage> createAdditionalReactPackages() {\n    return Arrays.<ReactPackage>asList(\n      new CodePush(\"kbWUqemN-getsFnDL8D0thDFKXtSNJramkK7f\", MainApplication.this, BuildConfig.DEBUG)\n  );\n}\n\n}\n4. Change [this line](https://github.com/wix/react-native-navigation/blob/master/example/src/screens/index.android.js#L19) to:JavaScript\nimport CodePush from 'react-native-code-push';\n// register all screens of the app (including internal ones)\nexport function registerScreens() {\n  Navigation.registerComponent('example.FirstTabScreen', () => CodePush(FirstTabScreen));\n  ...\n}\n``\nPlease look at [myapp](https://github.com/Microsoft/react-native-code-push/files/922058/example.-.Copy.zip) and verify if it works for you.\n. @natdm, closing this for now, please feel free to reopen if needed.. Hello @xwartz, thank you for reaching us. It's really strange, we have not seen this issue before. Please let me know if you have any ideas that could help me to reproduce the issue. . @xwartz, just a friendly ping.. @xwartz, I also have not reproduced the issue, but due to you are usingreact-native-code-pushhaving version1.15.0-betaI would recommend you to upgrade it to1.15.1-beta`, because that release contains fix for similar issue: \n\nFix a comparison check on Android that could cause an issue in the bundle loading behavior on some devices. We highly recommend upgrading to this version if you were previously on react-native-code-push@1.15.0-beta. (@Swordsman-Inaction)\n\nSo I'm closing this for now, please feel free to reopen, we'll also reopen it in case the issue will have place again and more info will be available (app source codes, repro steps and etc.).. Hi @ravi5955, thanks for reaching us. The issue has been fixed in v2.1.0 - also take a look at https://github.com/Microsoft/react-native-code-push/pull/870. So could you please try to upgrade your version of react-native-code-push and verify if the issue is still reproduced?. Hello @lelup, thank you for reaching us. I've just tried to reproduce the issue but with no luck. Could you please take a look at our sample app and verify if it works for you? You also could find there the way we are using to show current sync status.. @lelup, here is the dialog options that you can customize:\nJson\n{ \"updateDialog\": { \"title\": \"My title\" } }\nPlease let me know if you have any questions or see any issues.. @lelup, no problem! I'm closing this for now, please feel free to reopen in case of any questions or issues.. Hi @MrMYHuang, thanks for reaching us and sorry for such late reply. \nI've investigated it, and have found out, that we are using HttpClient and WebClient to track download progress. There is no custom logic to report download progress, so your solution to use codePush.SyncStatus.UPDATE_INSTALLED is correct here.\nSo I'm closing this for now, please feel free to reopen in case of any questions or issues.. Hi @cmcewen, thanks for the contribution! Currently, we are experiencing some issues with this, so could you please have a chance to look at the exception @max-mironov have sent above?\nCould you please also confirm this PR #824 has the same improvements as yours?. Hello @ndbroadbent, thank you for reaching us.\nReact Native disables logging in Release mode by default, to enable it, you could try the following: https://gist.github.com/huston007/61490dbc3269d89e4ac2e310fe21c554\nPlease let me know if it helps.. @ndbroadbent, closing this for now, please feel free to reopen if needed.. Hello @jiaminglu, thank you for the contribution. I've just tested your PR and first point (For newly installed android apps...) works like a charm, but second one crashes my test app in release mode. I agree that the def resourcesDirConfigName = \"jsBundleDir${targetName}\" line looks like a typo, but as of now it crashes the app when we change it. \nSo I suggest to revert second point for now, because it needs to be investigated more deeply. Please let me know what do you think.. @jiaminglu, got it, thanks for the clarification, I'll copy your explanation and create new issue in react-native-code-push repo, just to make sure we won't forgot about it.. Hello @yellowChao, thanks for reaching us. To specify js bundle url you need to change jsCodeLocation variable value. In case you want to change js bundle file name you need to use bundleURLForResource method.\nIn case it does not fit for you, could you please clarify what you want achieve by adding (void)specifyBundleUrl:(NSURL*)url; method?. @yellowChao, as of now, we are extremely backlogged and currently working on \"Code signing\" and \"Support brownfield React Native apps\" features, so we'll be very grateful if you could try to implement this enhancement (it does not look very difficult) and publish PR to deliver this method faster. \nAs of now you can use [CodePush bundleURLForResource:@\"main\" withExtension:@\"jsbundle\" subdirectory:@\"Frameworks/User.framework/User.bundle\"] method, please let me know if this method does not work as expected.. Hi @Temereru, thanks for reaching us. Could you please clarify - are you using the same deployment key both for Android and iOS? If so, you need to create new app in CodePush CLI and set new deployment key for iOS:\n\nNote, if you are targeting both platforms it is recommended to create separate CodePush applications for each platform.\n\nThen you need to release CodePush update for iOS: code-push release-react myapp-ios ios. Please let me know if it helps.. @Temereru, got it, thank you, so I'm closing this for now, please feel free to reopen if needed.. Hello @matt33, thanks for reaching us. Please take a look at comments below:\n\nIs there any way to find out why these rollbacks happened?\nIs there any way to debug this or see what is happening?\n\nTo achieve it you need to use an exception reporter library, so it will allow you to track and report the exceptions both for native side and js code.\n\nAlso what could be the reason for the long white screen hangs from code push side (we are thinking slow internet connection)?\n\nIt's hard to say what went wrong or reproduce it without any code samples. Does the issue reproduces for all releases you have uploaded or it have started to reproduce from specific one?\n\nAre there any accessible logs from code-push server for us to see whether our app is really hanging while checking for code push updates? - something like CodePush check started, CodePush check finished etc.\n\nCodePush SDK reports to the CodePush Server (using acquisition-sdk module) that an update has been downloaded by the app user, then it reports to the server if an update has been installed successfully or not. To log things like CodePush check started, CodePush check finished you could use an existing logs reporter library and sync status change callback to track sync statuses.. @matt33, no problem! Don't you mind if I close the issue for now, so we will reopen it in case you'll find out more info regarding to it?. @matt33, I'm closing this for now, please feel free to reopen.. Hi @abodalevsky, I'm sorry for the delay. Thank you very much for the contribution! It looks good to me, so merging this.. Hello @peacechen, @Amurmurmur, @didierbrun, thank you for reaching us and for your help with the issue, and sorry for the delay. I agree with @max-mironov that we should go ahead and release the fix asap even if it does not reproduce for us (please let me know if you have any ideas or if you could share source code that can help us to reproduce it), but we also need to verify if the fix will work properly for other users who aren't experiencing the issue. So we are going to test it and make new release this days (@axemclion, @pniko, please let me know if you have other thoughts). Thank you for the patience.. Hello @inakianduaga, thanks for reaching us. I believe that the issue is the same as in #771. You need to remove and install React Native Module for CodePush manually using this articles: iOS Setup, Android Setup\nPlease let me know if it helps or if you have any difficulties.. @inakianduaga, it is very important to override getJSBundleFile method, so you need to add this code to make React Native able to receive non default JS bundle path, but provided by CodePush instead.. @inakianduaga, just a friendly ping.. Hi @inakianduaga, please take a look at the note from the docs:\n\nNOTE: CodePush updates should be tested in modes other than Debug mode. In Debug mode, React Native app always downloads JS bundle generated by packager, so JS bundle downloaded by CodePush does not apply.\n\nPlease let me know if you have any questions.. Closing this for now, please feel free to reopen if needed.. Hi @hanishs17, thanks for reaching us. Did you have an access to CodePush server before the issue? In case you have tried to register CodePush first time, it would sound obviously, but have you configured firewall or proxy (VPN)? You also could try to relaunch your internet connection (I have heard it helps someone before). Please let me know if you have any updates.. @hanishs17, just a friendly ping.. Closing this for now, please feel free to reopen if needed.. @bernatfortet, thanks for  your response.\n\nMaybe it's a terminal issue?\n\nIt is difficult to say due to there is no stable reproduction steps that we could use to determine root cause of the issue. \nPlease let us know if you have any questions or see any issues.. The issue has been investigated and it does not relate to CodePush due to configuration of resourcesDir parameter  in prop.ext.react also cause the problems, so closing this for now.. Hi @chrisjrex, thanks for reaching us. I believe that Multi-Deployment Testing for iOS can help you to resolve it. Please pay attention on point 7: \n\nGo to Build Location -> Per-configuration Build Products Path -> Staging and change Staging value from $(BUILD_DIR)/$(CONFIGURATION)$(EFFECTIVE_PLATFORM_NAME) to $(BUILD_DIR)/Release$(EFFECTIVE_PLATFORM_NAME)\n\nAlso please let me know if it helps.. @chrisjrex, just a friendly ping.. @chrisjrex, thanks for the response, so I'm closing this, please feel free to reopen if needed.. Hi @julienvincent, thanks for reaching us. I've just tried to reproduce your issue, but with no luck - it works well for me on physical device. Is it possible if you have the same issue as here https://github.com/Microsoft/react-native-code-push/issues/775#issuecomment-291534691?\nIf not, could you please then be more specific regarding to repro steps, source code and environment settings? You also could try to reproduce the issue using our sample app (we'll use it later to investigate the issue). @julienvincent, great, please feel free to reopen if needed.. Hi @emielvanliere, thanks for reaching us. I have not heard about such kind of issues before, so could you please be more specific regarding to repro steps or way how we could reproduce the issue (you can use our sample app to reproduce it)?\nI also have several questions:\n1. could you please clarify what do you mean by js bundle version 1.1.35/1.1.38, is that your custom property?\n2. Have you stopped the packager while testing CodePush updates? Please note that CodePush updates should be tested only in modes other than Debug.. @emielvanliere, \n\nWe are sure to call codePush.notifyAppReady(); in the componentDidMount of our root component.\n\nHave you wrapped the root component with CodePush (MyRootComponent = codePush(MyRootComponent))? \nIf so, I think that codePush.notifyAppReady() method is called twice (by CodePush and by your code) - so this may cause the issue, let's try to remove codePush.notifyAppReady() method call from your code and let me know if any updates.\nIf it does not help, please provide us with ideas how we could reproduce it. Without stable repro steps and source code samples (at least client side code where CodePush is used) it is really hard to determine the root cause of the issue.. Closing this for now, @emielvanliere, please feel free to reopen if any updates.. Hi @webkodierer, thanks for reporting the issue! As of now, we are extremely backlogged and currently working on frequently asked feature - Code Signing, so we'll implement this improvement later. If you have a time and ability you could try to help us to deliver this improvement faster by publishing pull request - implementation does not look very difficult.\nTo fix the issue, I suggest to generate unique name for CodePushResourcesMap.json file in codepush.gradle script, then pass it as an argument both for recordFilesBeforeBundleCommand and generateBundledResourcesHash tasks. Then we will need to receive such unique filename in those tasks like this: var TEMP_FILE_PATH = process.argv[3]; \nPlease let me know what do you think.. Hi @mike623, thanks for reaching us.\n\nFresh new user also need update immediately because they downloaded previous source code.\n\nHave you released updates after releasing new app version for store (you can check it by printing your deployment history)? In this case users will download the latest released CodePush update. To prevent it you could use target binary version parameter and specify for which version of the app you want to release an update.\nPlease let me know if it helps or if you have any questions.. @mike623 just a friendly ping.. Hi @mike623, closing this for now, please feel free to reopen the issue or create new one if needed.. Hi @NULLPointerGuy, thanks for reaching us. Could you please try to remove 1st step from you repro? Due to ./gradlew assembleRelease command already contains logic that will generate and inject offline bundle into you apk. Let me know if any changes.. @NULLPointerGuy got it, thanks for the response!. Hi @smk524198002, thanks for reaching us, please verify if your project is configured correctly using this manual. Especially pay attention on this line: apply from: \"../../node_modules/react-native-code-push/android/codepush.gradle\"\nPlease let me know if any updates.. Hi @joshuapinter, as I can remember - I've faced with differences between apks produced by gradlew assembleRelease command and by Android Studio a long time ago. \nI don't know why (please let me know if you have any ideas), but the release apk generated by Android Studio does not have build-in js bundle for React Native apps, that is the reason why I'm usually using gradlew assembleRelease command.\nSo I have the following workflow: \n1. execute gradlew assembleRelease\n2. Generate Signed APK via Android Studio\n3. Verify if everything works well. Hi @alexeyMohnatkin, thanks for reaching us. I believe that ad-hoc apps should work with CodePush as well as other app. As of now, it is hard to say what goes wrong without any logs or code samples. Please let me know if you have any questions.. Hi @pvsong, I've a CodePushified react-native app that has been built in release mode and installed on the iPhone. It works well for me without any exception. Also here is the customer  that has CodePushified app and successfully distributes it via TestFlight - then the app successfully downloads and applies CodePush update. \nTo determine the root cause the issue you probably need to set up an exception reporter library and share collected logs with me, so I would able to analyze it and try to determine the cause of the issue.\nAs of now it is really hard to say what goes wrong without any logs or code samples.. @alexeyMohnatkin, I've just tried to configure and install test app on device that uses Release and Staging schemes and it works well for me. I've just completed this steps, then I've changed Archive's Build Configuration value from default \"Release\" to \"Staging\":\n\nSo could you please confirm if you've changed Archive's default Build Configuration value?\n. Hi @jbcullis, could you please create new issue and provide us more info, so we would able to investigate and fix it?. @alexeyMohnatkin, @jbcullis, closing this for now, please feel free to reopen or create new issue so we would able to help you.. Hi @dwilt, I've tried to reproduce the issue but with now luck, so could you please create new issue and provide us as much info as possible?. @dwilt, got it, we also have an iOS Plugin Configuration guide, so you could also verify if everything is set upped correct. \nThank you for your response and let me know if you have any questions or see any issues.. Hi @jinxac, got it, let's continue investigation in the issue you have created https://github.com/Microsoft/react-native-code-push/issues/893. Hi @AndrewJack, thanks for reaching us. \n\nTrying to reproduce on the Example\n\nGot it, this would be very helpful for investigation, please let me know if any updates.\n. @AndrewJack, thank you for such great investigation! I think we can remove support for old react native versions due to breaking changes that have been released in v2.0.1-beta. We'll fix the issue asap, but if you have a time and ability you could help us to deliver this fix much faster (due to you already have configured environment) by publishing pull request - we'll be very grateful. \nPlease let us know if it works for you (if not, we'll start investigating and fixing it asap) or if you have any questions.\n. @AndrewJack, thank you for the contribution! I'll review it and notify you if needed.\n\nI'm surprised code push doesn't have an supported react native api to setJSBundle yet.\n\nI suppose that React Native module for CodePush have been implemented a long time ago and have supported big amount of react-native versions until v2.0.1-beta. As of now I think code-push could support react native api to setJSBundle. We'll investigate and implement it, thank you for your advice. Please also let me know if you have any thoughts/advises that could help us to implement this better way.. Hi @jasan-s, thanks for reaching us. \nCodePush allows you to push client side assets only such us js bundle, images and etc. \nCodePush doesn't allow to update native-side code (Java, Objective-C), so it is probably not possible to push new lib with CodePush due to that lib may use native-side code. But I don't sure about libs that doesn't use native-side code, they probably can work.\nPlease let me know if you have any questions or see any issues.. @jasan-s, just a friendly ping.. Hi guys, \n@pniko, I was able to configure with CodePush an android brownfield app that has 2 RN apps.\nHere is the repo with demo: https://github.com/sergey-akhalkov/codepush2apps\nKeynotes:\n1. We have android brownfield app that has 2 RN apps.\n2. This folder contains configured native code, please pay attention to the following lines of code:\nfirst: .setJSBundleFile(CodePush.getJSBundleFile(\"CodePush/MyRNApp1/index1.android.bundle\"))\nsecond: .setJSBundleFile(CodePush.getJSBundleFile(\"CodePush/MyRNApp2/index2.android.bundle\"))\n3. index1.js and index2.js are entry points for both RN apps.\n4. Use commands from bundle-commands.txt file to make initial RN bundles. \nGenerated bundles are here.\n5. To make a CodePush update you should use CodePush dir as parent for you RN apps dirs, the example is here . To generate update contents use commands from the codepush-commands.txt file.\n6. Some small changes in the CodePush core has been made, so if we are going to support this feature, we need to reflect them to the production repo. \nSummary: single CodePush package/update contents bundles for both RN apps. This approach allows to update both apps at ones and we need not reimplement CodePush core in this case. We cannot use separate deployment for each RN app due to it requires significant changes in the CodePush core. It's also important to note that rollback feature will not work correctly in this case because an update can be registered as successful when first RN app will report that it works as expected, but the second RN app in the same moment can have a critical issue.\nScreencast (update welcome string Welcome to MY RN APP 111! -> Welcome to MY RN APP 111! v1):\n\n. @vidyuthd, just a friendly ping. . Hi @rawpaw, thanks for reaching us. Could you please share with us content or your pod file and way you are using CodePush to check for updates (js code)? . @rawpaw, got it, thanks for the clarification, please feel free to reopen if needed.. Hello @sudhanshu6247, thanks for reaching us and sorry for late reply. \nCould you please clarify which way you are building your apk in release mode? Are  you running gradlew assembleRelease command?. @sudhanshu6247, I'm closing this for now, please feel free to reopen.. Hi @oliversommer, great, thank you for the contribution. Looks good to me, so I'm merging this, then we'll prepare and test new release of react-native-code-push and will let you know if any questions or issues.. Hi @shrutic, thanks for reaching us. I've just tried to set up clean project that uses react-native@0.43.3 and react-native-code-push@2.0.2-beta and it works well for me. So I don't sure about your fork, but official version of RN compiles well with CodePush and I can not see any issues. So could you please try to install official version of react-native@0.43.3 and verify if the issue still reproduces?. @shrutic, got it, thanks for the clarification, please let me know if you have any questions.. @shrutic, closing this for now, please let me know if any changes.. Hi @iacopo87, thank you for the contribution!\nLooks good to me, so I'm going to merge it.. Closing this due to #864 has been merged.. @max-mironov, in release notes I think that we should mention about (breaking?) changes with return type.. Hi @guilharj, great! Thanks for review and testing.. Hi @cherniv, thanks for reaching as, could you please take a look at MainActivity.java and MainApplication.java files from our example app  and let me know if you have any questions?. Hi @cherniv, got it, thanks for your reply. \n\nBut it is still crashing when the app is in background and it is opened from a push notification.\n\nCould you please create new issue and provide us more info about it, so we would able to investigate it and help you?. @cherniv, got it, thanks for the information!. Hi @youngcube, thanks for reaching us. \nI believe I've found the root cause of the issue - you need to add this line:\napply from: \"../../node_modules/react-native-code-push/android/codepush.gradle\" to your build.gradle file , because as of now codepush.gradle script does not executed.\nPlease also double check if you have completed all Android installation steps\nPlease let me know if it helps. @youngcube, the issue with resources build time is fixed, but I can confirm that the app is still crashes, I've investigated your MainActivity.java file and I can see that it has very specific structure, so I've changed it to this one\n```java\npackage com.awesomeproject;\nimport com.facebook.react.ReactActivity;\npublic class MainActivity extends ReactActivity {\n/**\n * Returns the name of the main component registered from JavaScript.\n * This is used to schedule rendering of the component.\n */\n@Override\nprotected String getMainComponentName() {\n    return \"AwesomeProject\";\n}\n\n}\nand I've successfully launched your app. Could you please try the code above and let me know if it works for you?. @youngcube, please try add `CodePush.getJSBundleFile();` line before `setContentView(mReactRootView);` like this:java\npublic class MainActivity extends ReactActivity implements DefaultHardwareBackBtnHandler {\n    private ReactRootView mReactRootView;\n    private ReactInstanceManager mReactInstanceManager;\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    mReactRootView = new ReactRootView(this);\n    mReactInstanceManager = ReactInstanceManager.builder()\n            .setApplication(getApplication())\n            .setBundleAssetName(\"main.bundle\")\n            .setJSMainModuleName(\"TingBadgeManager\")\n            .addPackage(new SQLitePluginPackage())\n            .addPackage(new CodePush(\"dGwE7TupBMiZyAxCAPABUpAg-FjL8157884c-07f4-462d-87f8-bfa0f5f1d9e6\", getApplicationContext(), BuildConfig.DEBUG))       // register CodePush Plugin here\n            .addPackage(new MainReactPackage())\n            .setUseDeveloperSupport(com.facebook.react.BuildConfig.DEBUG)\n            .setInitialLifecycleState(LifecycleState.RESUMED)\n            .build();\n    mReactRootView.startReactApplication(mReactInstanceManager, \"TingBadgeManager\", null);\n    CodePush.getJSBundleFile();\n    setContentView(mReactRootView);\n}\n\n``\nYou also probably will need to specify your bundle filenameCodePush.getJSBundleFile(\"main.bundle\");Please let me know if it helps.\n. @booker-laputa, please take a look at [target binary version parameter ](https://github.com/Microsoft/code-push/tree/master/cli#target-binary-version-parameter) and let me know if you have any questions.. Hi @booker-laputa, thanks for the clarification. Unfortunately, there is no method to receive update(b) (that has been released for app 2.0) for app 1.0, due tocheckForUpdates relies on current binary version of your app while checking for updates. \nTo avoid this limitation you can release an update that will havetargetBinaryVersion='*'`, so all your apps would be able to receive the latest update info, but you need to take control over installation process, due to update released for app 2.0 may have breaking changes and you won't install it on 1.0\nPlease let me know if you have any questions.. @booker-laputa, CodePush CLI has history command, but I don't sure if it is what you are looking for due to you need this info on user's devices.\nClosing this for now, please feel to reopen if needed or if you have any questions.. Hi @grigored, got it, thank you for the information, please feel free to reopen if needed. Also let us know if you have any questions or see any issues.. Hi @sattaman, thanks for reaching us, we will check for compatibility soon and will update this table. We also let you know if any updates.. Hey guys, I would recommend you to avoid of using CodePush with RN 0.45 for now, due to new version of RN has some breaking changes that does not allow CodePush to reload js bundle, in another words CodePush.restartApp and the following install mods are not work with RN 0.45: IMMEDIATE, ON_NEXT_RESUME, ON_NEXT_SUSPEND.\nI've also created new issue in RN: https://github.com/facebook/react-native/issues/14533\nSo I'll let you know if any updates.. Hi @SudoPlz, correct, ON_NEXT_RESTART install mode works well both for Android and iOS.. Hey guys, the issue I've created https://github.com/facebook/react-native/issues/14533 is probably stuck,  so I've investigated it deeper and I believe that I've implemented solution that should fix it - PR https://github.com/Microsoft/react-native-code-push/issues/901. \nCould you guys please try this PR and let me know if it works or if you see any issues? Please also let me know if you see some improvements for this PR.\nIn case provided solution works - we'll release new version of react-native-code-push and I'll also try to prepare and publish PR in React Native. \n. Closing this due to https://github.com/Microsoft/react-native-code-push/releases/tag/v3.0.0-beta has been released.. Hi @tonylkc, thanks for reaching us. Could you please check if you have the same issue as here? If not, please share with us the source code where you are calling sync function, so we could figure out your CodePush settings (checkFrequency, installMode, etc.)\nAs for me, I've successfully released and installed CodePush update using react-native version 0.44.0 and react-native-code-push version 2.1.0-beta with the following app source code: https://github.com/Microsoft/react-native-code-push/tree/master/Examples/CodePushDemoApp. @tonylkc, just a friendly ping.. Closing this for now, please feel free to reopen if any updates.. Hi @booker-laputa, thanks for reaching us. Could you please take a look at iOS Setup guide and verify if you have the same setup as yours?\nPlease let me know if it help or if you still experiencing the issue.. @booker-laputa, I've figured out that Salesforce SDK uses pod file for project dependencies, so you need to add pod 'CodePush', :path => '../node_modules/react-native-code-push' line into the myapp/ios/Podfile. Please try and let me know if any changes.. Hi @booker-laputa, thanks for your response, closing this, please feel free to reopen if needed.. Hi @nerdmed, thanks for the contribution! Looks good to me, so merging this.. Hi @iageoghe, I've investigated the issue and tried to reproduce it - but with no luck, the app does not crash (the issue has been reproducing on real device in release mode). \nThe only issue I can see - update does not applied after successful installation. I've found the root cause of this issue - we need to decorate our main component here like this: \n```js\nPre_Built_Demo = CodePush({ checkFrequency: CodePush.CheckFrequency.MANUAL })(Pre_Built_Demo);\nAppRegistry.registerComponent('Pre_Built_Demo', () => Pre_Built_Demo);\n``\nIn case the update process has been interrupted by closing the app - the app asks to update again on next app start.\nI'll try to reproduce the issue again and let you know if any changes, please also let me know if you have any ideas.. Hi @maggialejandro, thanks for reaching us and for filling out the issue. The issue is ingradle-to-jsplugin that we are using to parsebuild.gradlefile. To fix it you should add spaces betweencompileand(projectlike this:compile (project(\":react-native-google-signin\")){andcompile (project(':react-native-maps')){`\nPlease let me know if it works or not, so I'm closing this as of now, please also feel free to reopen if needed.. Hi @maggialejandro, got it, I've created new issue https://github.com/ninetwozero/gradle-to-js/issues/8\nAs of now you can use targetBinaryVersion parameter to workaround this issue.. Hi @dongbingbin77, thanks for reaching us, please take a look at issue template and fill it out - it would help us to investigate and reproduce the issue.\nPlease also let me know if you have any questions.. Closing this due to https://github.com/Microsoft/react-native-code-push/issues/890 has been created.. Hi @akki-ng, thanks for reaching us! \nCould you please clarify what is codePushOnBinaryVersionMismatch method doing? If I get it right - it calls each time we call checkForUpdate. As of now this method looks like callback for checkForUpdate, instead of this we can use the following code:\njs\ncheckForUpate() {\n    CodePush.checkForUpdate()\n        .then((update) => console.log(update));\n}. @akki-ng, got it, thanks for the clarification! Everything looks good and I'm going to merge it, but before doing it we also need to update readme due to App Store review process: \n\nApps must not force users to rate the app, review the app, download other apps, or other similar actions in order to access functionality, content, or use of the app.\n\nIssue sample is here https://stackoverflow.com/questions/37310731/apple-rejected-app-because-i-am-forcing-users-to-update-their-app-version\nAt least we should mention about review process and this issue for iOS developers - that should help them to avoid such kind of problems in the future. What do you think?. Hi @akki-ng, \n\nAs per codepush's concern I guess we are not violating any terms of android/iOS. Right?\n\nI don't think so, this PR just provides an ability for developers to handle binary version mismatch. A developer will decide to use this or not. Also CodePush already has updateDialog property that also can cause Apple rejection, so we've mentioned about this in the docs as I can remember.. Hi @akki-ng, we are going to make a release this week and we could include your PR, but could you please do the following first: \n1. update readme with notes regarding new codePushOnBinaryVersionMismatch method/feature.\n2. update readme with    notes I've mentioned above regarding possible apple store rejection.\n3. update typings\nPlease let me know if you have any questions.. Hi @TrustTheBoy, please take a look at the following:\n1.  https://github.com/Microsoft/react-native-code-push/blob/b14654ebd93980c0f32cc28c73344561ed1d36c6/CodePush.js#L479\n2. https://github.com/Microsoft/react-native-code-push/blob/b14654ebd93980c0f32cc28c73344561ed1d36c6/CodePush.js#L79\nSo I believe your sync method call should look like this:\njs\nCodePush.sync(\n      {}, //options\n      this.codePushStatusDidChange.bind(this),\n      this.codePushDownloadDidProgress.bind(this),\n      this.codePushOnBinaryVersionMismatch.bind(this)\n    );. @TrustTheBoy let's continue discussion in https://github.com/Microsoft/react-native-code-push/issues/1023 issue please\n. Hi @GantMan, LGTM, thanks for the contribution!. Hi @dongbingbin77, thanks for filling out issue template. Please try to move your codePush.sync({ call into the componentDidMount method and let me know if any changes.. @dongbingbin77, no, I mean that you should move codePush.sync method into the componentDidMount method like this:\n```js \nclass rncp890 extends Component {\n  constructor() {\n    super();\n    this.state = { restartAllowed: true };\n  }\ncomponentDidMount() {\n    CodePush.notifyAppReady();\n    CodePush.sync({\n        updateDialog: false,\n        installMode: CodePush.InstallMode.IMMEDIATE\n    });\n  }\n...\n``. @dongbingbin77, hmm, everything works well for me, please take a look at my app sample\n[rncp890.zip](https://github.com/Microsoft/react-native-code-push/files/1084527/rncp890.zip)\n and pay attention ondemo.jsfile contents. To build an apk please usegradlew assembleDebugcommand. . @dongbingbin77, great! Closing this for now, please feel free to reopen if needed.. Hi @wuyunqiang, thanks for reaching us. I'm not able to reproduce the issue with the steps you has provided (before your steps I've performedreact-native initcommand to create clean RN project) - please provide us more info regarding your project (source code, app sample, etc.). @wuyunqiang, please take a look at [Plugin Installation (iOS - Manual)](https://github.com/Microsoft/react-native-code-push/blob/master/docs/setup-ios.md#plugin-installation-ios---manual) and check if your app has been configured in the same way or not. Please let me know if any updates.. Closing this for now, please feel free to reopen if needed.. Hi @dongbingbin77, thanks for reaching us, could you please clarify what do you mean byincremental updates`?. @dongbingbin77, got it, thanks for the clarification. This feature works by default on code push server and there is no need to perform some additional actions from your side. But currently we have an issue with this feature https://github.com/Microsoft/cordova-plugin-code-push/issues/255 and we're working on it.\nPlease let me know if you have any questions or see any issues.. @dongbingbin77,\n\nMeaning that this function is the default, but now there are bugs, need to repair it?\n\nCorrect.\n\nIf so, I would like to know when to fix this problem?\n\nWe are working on it and I'm hoping this will happen soon. Sorry for the inconvenience - I'll let you know if any updates.. Hi @dongbingbin77, we've investigated it and found out the root cause of the issue. So the fix has been implemented and we are going to test it and verify if everything is ok.\nI hope that we'll deploy the fix to Prod soon (I suppose it will happen on this week). Ones again - sorry for the inconvenience and for the delay.. Hi @dongbingbin77, the fix has been deployed, please release new update and verify if it works. Feel free to reopen the issue if needed.. Hi @jinxac, thanks for reaching us. Could you please take a look at https://github.com/Microsoft/react-native-code-push/issues/840 and verify if you have the same issue and if https://github.com/Microsoft/react-native-code-push/issues/840#issuecomment-302635288 resolves it?. @jinxac, got it, please let me know if any updates.. Hi @jinxac, could you please share with me the minimal version of the app where the issue is reproduces?. @jinxac, do I get it right if your app does not receiving any updates in case it has been archived/build with Staging scheme or you are experiencing some compile issues while trying to follow this steps? . Hi @jinxac, sorry for the delayed response, do you still experiencing the issue?. Hi @jinxac, sorry for the delayed reply. I've investigated the problem you have and faced with linking issue while archiving. But I've successfully configured my project with Production and Staging schemes - CodePush updates work as expected. Also, I'm using the latest version of react-native and react-native-code-push, so the issue with linking could probably be here.\nSo I'm going to downgrade RN and CodePush versions and verify if everything works - I'll let you know if any changes.\nPlease also take a look at my project here: rncp893 copy.zip\nIf you have a chance - you could also try to downgrade RN and CodePush versions and verify if it works or not.\nThanks for the patience.. @jinxac, I've found out the root cause of linker issue - we need to change podfile like that:\n```podfile\nUncomment the next line to define a global platform for your project\nplatform :ios, '9.0'\ntarget 'rncp893' do\n  # Uncomment the next line if you're using Swift or would like to use dynamic frameworks\n  # use_frameworks!\n# Pods for rncp893\npod \"Yoga\", :path => \"../node_modules/react-native/ReactCommon/yoga\"\n  pod 'React', :path => '../node_modules/react-native', :subspecs => [\n    'Core',\n    'BatchedBridge'\n  ]\n  pod 'CodePush', :path => '../node_modules/react-native-code-push'\ntarget 'rncp893Tests' do\n    inherit! :search_paths\n    # Pods for testing\n  end\nend\ntarget 'rncp893-tvOS' do\n  # Uncomment the next line if you're using Swift or would like to use dynamic frameworks\n  # use_frameworks!\n# Pods for rncp893-tvOS\ntarget 'rncp893-tvOSTests' do\n    inherit! :search_paths\n    # Pods for testing\n  end\nend\n```\nPlease let me know if it helps.. Hi @jinxac, please take a look at rncp893 copy.zip\nI've configured this project to use pods, release and staging schemes. Also archiving works well both for release and staging, CodePush also works correctly.\nPlease pay attention on podfile and this customization:\n1. \n\n2. \n\nPlease let me know if it helps or if you have any questions or see any issues.\n. Hi @jinxac, do you have any updates on this? I'm closing this for now, please feel free to reopen if needed.. Hi @brookemitchell, thanks for the feedback. By CI do you mean appcenter.ms?\nPlease let me know if you need any help or have any questions.. Hi @jinxac, thanks for reaching us again!\n\nHave u faced this issue?\n\nI believe not, so I don't sure how exactly I can help you here, did you tried the working sample above? Does it work for you?. @jinxac, we are very \"backlogged\" and have no ability and time to manage such kind of issues, but please feel free to create a CodePush related issue - we'll take a look at it in order of priority.. Hi @ptomasroos, thank you very much for this info and for publishing PR https://github.com/Microsoft/react-native-code-push/pull/895 - we'll release version 3.0.0 of react-native-code-push that will contain this changes after RN 0.46 release.\nPlease let me know if you have any question and see any issues.. Closing this due to v5.0.0-beta has been released, please feel free to reopen if needed.. Hi @ptomasroos, thank you for the contribution! LGTM, we'll merge it just before releasing new version of react-native-code-push. Hi @janicduplessis, thanks for reaching us. We are following the approach when our master branch is always compatible with the latest stable version of RN (the current stable version is 0.46.4). So we are going to merge this PR just after RN 0.47 will be released, then we'll make sure if new version of RN does not break us, then we'll release new version of react-native-code-push that will support RN 0.47. \n. Hi @patw0929, sure! We are going to test the PR with RN 0.47.0 today and merge it if everything is ok.. Hey @ptomasroos, @janicduplessis, @patw0929, the PR has been verified and merged!. Hey guys, we've released react-native-code-push@5.0.0 - please let us know if you see any issues.. Hi @cooperka, agreed, thanks for voicing your concerns, that really makes sense for users to restore backwards compatibility for RN 0.46.x\nSo we are going to do the following - we'll wait for bunch of fixed bugs or implemented features and then we'll release new version of react-native-code-push (saying 5.1.0 or 5.0.1) that will also include restoring compatibility with RN 0.46.x\nAlso, there is no need to support react-native-code-push@4.x.x due to 5.x.x will restore compatibility with RN v0.46, so users just will need to update their version of react-native-code-push (they will do it anyway if they want to receive bug fixes or new features for react-native-code-push@4.x.x), does it makes sense?\nPlease let me know if you have any other thoughts or considerations.. Hi @abodalevsky, thanks for the contribution, LGTM.. Hi @arrayoutofbounds, thanks for reaching us. I've tried to reproduce the issue but with no luck - could you please try to provide me exact reproduction steps - so I'll be able to reproduce it using our sample app?\nPlease also note that CodePush updates should not be tested on debug build.. Closing this for now, please feel free to reopen.. Hi @SudoPlz, thanks for reaching us. Looks weird - this issue has been resolved a long time ago in https://github.com/Microsoft/react-native-code-push/releases/tag/v2.0.1-beta and I can not reproduce it.\nI've experienced another compatibility issue and fixed it in  https://github.com/Microsoft/react-native-code-push/pull/905\nCould you please try to setup fresh project (or remove and reinstall node_modules) and let me know if the issue is still reproduces for you?. Hi @mikelambert, thanks for the contribution, LGTM! Could you please also take a look at https://github.com/Microsoft/react-native-code-push/pull/857 and verify if it resolves the issue you have?. @mikelambert, got it, thanks for the clarification!. @max-mironov, LGTM, please feel free to merge.. @D1no, just a friendly ping.. Closing this for now, please feel free to reopen.. Hi @pinqy520, thanks for reaching us. Please note, that react-native-code-push version: 2.1.0-beta is not compatible with RN 0.45 - please take a look at details here https://github.com/Microsoft/react-native-code-push/issues/878\nAlso the issue you have provided looks very similar to this one https://github.com/Microsoft/react-native-code-push/issues/795 and I believe it has been fixed here https://github.com/Microsoft/react-native-code-push/pull/870.\nCould you please provide me the command you are using to release new CodePush updates? Also it would be very helpful if you could provide me with exact repro steps so I would be able to reproduce the issue using fresh RN app. . @pinqy520, thanks for the clarification, I've just tried to reproduce the issue but with no luck, so could you  please provide me with full deployment history both for Staging and Production? (code-push deployment history <appName> <deploymentName>). Hi @pinqy520, got it, thanks for the outputs. I believe the issue has place due CodePush Service diffing issue that has been fixed recently - https://github.com/Microsoft/react-native-code-push/issues/892\nDue to I'm not able to reproduce the issue you have - I would recommend you to release new 0.0.14 binary version of the app and create new deployment instead of Staging to test your updates and promote to Production - something like \"Staging2\" or so.\nPlease let me know if you have any questions or considerations. . Hi @pinqy520, got it, please take a look at my response here . Hi @kala888, thanks for reaching us. Please note, that CodePush updates should not be tested in debug mode, from official docs: \n\nNOTE: CodePush updates should be tested in modes other than Debug mode. In Debug mode, React Native app always downloads JS bundle generated by packager, so JS bundle downloaded by CodePush does not apply.\n\nTo test your updates in debug mode you should:\n1. close React Native packager if exists\n2. add the following lines to your app/build.gradle file:\ngradle\nproject.ext.react = [\n        bundleInDebug: true\n]\n3. open projectRoot/android folder and perform there ./gradlew assembleDebug command\n4. close React Native packager if exists\n5. install produces apk file and open your app.\nPlease let me know if you have any questions.. @kala888, great! Thanks for the clarification). Hi @andrepcg, I've just tried to reproduce the issue with the following repro steps but with no luck:\n1. build this sample app.zip in release mode\n2. install it on device\n3. release several CodePush updates\n4. open app on device, check for updates and install the latest one\n5. restart app\n6. update is applied with no errors\nSo could you please correct my repro steps or provide me with the minimal version of your app where the issue is reproduces? Also it would be helpful if you could provide me with the command you are using to release new updates and full release history.. Got it, please let me know if any updates, I'll also try to perform other test cases and let you know if any changes.. Hey guys @andrepcg, @youanswer, @pinqy520, thanks for reaching us. Currently, we are trying to reproduce the issue and figure out why currentPackageFolderPath variable is null. In case we won't find the root cause of the issue, we'll implement workaround that will help us to avoid the issue - in case getCurrentPackageFolderPath() returns null, we are going to ask server for full package instead of diff, so we are going to avoid this condition and update should be applied without any exceptions.\nThanks for your patience and let me know if you have any questions or considerations.. Hey guys, could you please perform codePush.getCurrentPackage() method before codePush.sync and share us with its output (I mean share it in case when the issue reproduces)? This check relates to currentPackageFolderPath variable I've talked above and it could help us to investigate the issue.. Hey guys @andrepcg, @youanswer, @pinqy520, @rj12info, could you please insert if (Platform.OS === \"ios\" && config.packageHash) { line in your node_modules/react-native-code-push/CodePush.js file instead of if (config.packageHash) {, rebuild your apk with this changes, release an update and let me know if the issue is still reproduces?. Ok guys, I've created PR https://github.com/Microsoft/react-native-code-push/pull/911 and merged it to master, tomorrow we are going to produce patch releases v2.1.1 and v3.0.1 for react-native-code-push.\nPlease let me know if you have any questions/considerations or if the issue is still reproduces.. Closing this for now, please feel free to reopen if the issue is still reproduce.. Hi @Jakevin, thanks for reaching us, the issue has been fixed in v3.0.1, please upgrade and let me know if you see any issues.\nSo I'm closing this for now, please feel free to reopen if needed.. Hi @harsinyee, thanks for reaching us. Could you please take a look at https://github.com/Microsoft/react-native-code-push/issues/516 and https://github.com/Microsoft/react-native-code-push/issues/782 and let me know if it helps? Please also pay attention on https://github.com/Microsoft/react-native-code-push/issues/782#issuecomment-292941100. Hi @diennguyentien, thanks for reaching us. As I can see - you are using RN 0.46.1, please note, that we are not officially supporting this version of RN currently, but we are going to test it and release a new version of react-native-code-push on this week. Could you please try to use RN 0.45.x if possible and verify if the issue is still reproduce?. Hi @diennguyentien, we've released react-native-code-push v4.0.0-beta that should support RN 0.46.x, please verify and feel free to reopen in case the issue is still reproduce. . Hi @AndrewJack, thank you for the contribution, looks good to me.. Hi @dkadlecek, thanks for reaching us. Please take a look at https://github.com/Microsoft/react-native-code-push/issues/919#issuecomment-315303332 and let me know if you have any questions.. Closing this as duplicate, please feel free to reopen if needed.. Hi @blairvanderhoof, thanks for reaching us. Please note, that you should not test CodePush updates in debug mode. From official docs:\n\nNOTE: CodePush updates should be tested in modes other than Debug mode. In Debug mode, React Native app always downloads JS bundle generated by packager, so JS bundle downloaded by CodePush does not apply.\n\nIn case you still want to test CodePush updates in debug mode, please make sure that react native packager has been disabled and that myappRoot/android/app/build.gradle contains the following code:\ngradle\nproject.ext.react = [\n    bundleInDebug: true\n]\nThen you need to perform .\\gradlew assembleDebug or .\\gradlew assembleRelease command in \n myappRoot/android folder.\nPlease let me know if you have any questions or see any issues.. Hi @blairvanderhoof, I'm closing this for now, please feel free to reopen if needed.. Hi @jsierles, thanks for reaching us. Yes, you could move this method implementation to CodePush.java but please note, that the native implementation does not return failedInstall and isFirstRun props.\nPlease also take a look at this method implementation from \"Support for Brownfield Apps\" feature, it might help.\nPlease let me know if you have any questions.. Hi @jsierles, closing this for now, please feel free to reopen if needed.. Hi @feiyingx, I'm closing this, please feel free to reopen if you have any questions.. Hi @flyjennyetn, thanks for reaching us. Could you please fill out all points from the new issue template - repro steps, stack trace and etc. so we would be able to help you.. @flyjennyetn, could you please clarify what the issue is? (provide us stack trace, screenshot or so). Also please provide us exact repro steps how we could reproduce it.. Hi @flyjennyetn, thanks for providing us with source codes, could you please clarify how could we reproduce the issue and what the issue is? Also I can see that your index.ios.js file is not CodePush'ified.. Hi @flyjennyetn, if I get it right, you are trying to configure your initial project with CodePush.\nSo, you could follow this steps:\n1. code-push app add myapp-ios ios react-antive\n1. react-native init myapp\n2. cd myapp\n3. npm i --save react-native-code-push\n4. react-native link react-native-code-push\n5. replace index.android.js and index.ios.js files from your project with related files from here. Also copy and paste images folder and demo.js file.\n6. react-native run-ios\nPlease also take a look at https://github.com/Microsoft/react-native-code-push/issues/893#issuecomment-317648454, there you can find configured project (that using multi-deployment-testing feature for iOS)  and use it as an example.\nSo I'm closing this for now, please feel free to reopen if you have any questions. In case you have any issues, please create new one and do important thing - please use the following template to create the issue, otherwise, we'll mark it as incomplete and close.. Hi @wuyunqiang, thanks for reaching us. If I get it right we can continue the discussion here https://github.com/Microsoft/react-native-code-push/issues/941, I'll take a look at the issue you've created and let you know if I have any questions.. Hi @wuyunqiang, I can see that you are testing CodePush updates in Debug mode, but you shouldn't do so - please take a look at the note from the official docs: \n\nNOTE: CodePush updates should be tested in modes other than Debug mode. In Debug mode, React Native app always downloads JS bundle generated by packager, so JS bundle downloaded by CodePush does not apply.\n\nThat is the most possible reason why you couldn't see any changes after refresh. Please let me know if you have any questions or considerations.. @wuyunqiang, sure, it's possible to test updates in debug mode, to do so you need:\n\nModify the\u00a0AppDelegate.m\u00a0to force the JSCode location to be \"remote\". (This is already done for you if you are using the example app)\n\n```objective-c\njsCodeLocation = [CodePush bundleURL];\n//#ifdef DEBUG\n////  jsCodeLocation = [NSURL URLWithString:@\"http://localhost:8081/index.ios.bundle?platform=ios&dev=true\"];\n//  jsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index.ios\"fallbackResource:nil];\n//#else\n//  jsCodeLocation = [CodePush bundleURL];\n//#endif\n//\n2. Comment around lines 17-20 in\u00a0`node_modules/react-native/scripts/react-native-code.sh`\u00a0the lines:sh\n    # if [[ \"$PLATFORM_NAME\" = \"iphonesimulator\" ]]; then\n      # echo \"Skipping bundling for Simulator platform\"\n      # exit 0;\n    # fi\n```\nPlease let me know if it helps.. @wuyunqiang, yeah, you need to perform run-ios ones just after the changes you have made in AppDelegate.m. Hi @wjm117, just wondering - what the reason is? Is it somehow relates to other plugins?. Hi @pre10der89, could you please confirm if your enhancement request has been implemented here https://github.com/Microsoft/react-native-code-push/pull/1051 ? . Hi @xiaoyongchen, thanks for reaching us. Could you please clarify what the issue is and provide us more details - repro steps, stack trace, actual and expected result and etc? Thanks. Hi @oliviachang29, thanks for reaching us and sorry for the delayed response. The exception you have \nTypeError: Cannot read property 'InstallMode' of undefined at Object.<anonymous> (src/components/Shared/CodePushComponent.js:4:63)\nfrequently happens for users who want to integrate CodePush into the React Native app that uses react-native-navigation module. Please take a look at https://github.com/Microsoft/react-native-code-push/issues/790#issuecomment-294148452 and let me know if it helps.. Hi @awnali, thanks for reaching us. I've reproduced the issue you are experiencing using your code and the app also does not install an update in Release on Device for me, but I did not manage to repro the issue using our demo.js file. Could you please try our demo.js and let us know if the issue is still reproduced or not? If so - we'll try to figure out the root cause of the issue you have. Thanks for the patience. . Hi @buptkang, thanks for the note, will do. The main difference between generate-app.sh and create-app.js is that create-app.js also creates 2 CodePush apps using code-push app add <appName> <platform> react-native command both for Android and iOS. Then the script inserts Staging deployment keys while linking. \nAlso the create-app.js allows to specify not package version only, but source code location too both for react-native and react-native-code-push.\n. Hi @tmaly1980, thanks for reaching us.\n\nDo I get it right if you are searching for mechanics to determine if the app is in TestFlight or in the Prod? Then you would like to use that info to dynamically switch Staging and Prod deployment keys, right? \nIf so, I've already investigated this problem and unfortunately, seems like there is no ability to determine if the app is in TestFlight or in the Prod via native side. That means you'll have to use different schemas in case you want to test your updates in Staging before promoting them to Prod.\nThe only workaround that I can see is described here https://stackoverflow.com/a/41557481\nAnother solution is to make a build that points to real data by default, but has a hidden switch you can teach internal users to use to switch to test data.\nHere we could use Dynamic Deployment Assignment feature. Please also take a look at this https://github.com/Microsoft/react-native-code-push/issues/786#issuecomment-319608461 for more details and let us know if you have any questions.\nCould you please clarify - what do you mean by major releases? It is up to you in which way you want to use CodePush, but we would recommend you to use CodePush service to release bug fixes and improvements/features that maintain the app\u2019s original/presented purpose (i.e. don\u2019t CodePush a calculator into a first-person shooter), please take a look at http://microsoft.github.io/code-push/faq/index.html\n\nLet me know if you have any other questions.. Hi @sospedra, thanks for reaching us. Do you have any updates on this? I'm closing this for now, please feel free to reopen if you have a chance to return to this issue again.. @sospedra, got it, thank you.. Hey guys, thanks for getting in touch! \nHave you changed your Build Configuration to Staging here: Product -> Scheme -> Edit Scheme -> Archive -> Build Configuration\n\n?\n. Hi @RomanISWG, please take a look at demo I've prepared - rncp976 copy.zip\nAnd try to Run it with Release and Staging configurations and let me know if it works or if you see any issues.\n. @atom-r, take a look at https://github.com/Microsoft/react-native-code-push/issues/893#issuecomment-317648454 - there you can find CodePushified react-native app that uses cocoapods and multi-deployment testing feature.\nI'm closing this issue, please feel free to ask questions or reopen if needed.. Hi @sibelius, it's totally up to you, but I think that it would be more convenient to have different schemes for Staging and Release.\nPlease let me know if you have any other questions.. Hi @lunarraid, thanks for reaching us.\n\nbut the Android equivalent is hidden behind a private class instance.\n\nCould you please clarify, do I get it right if there is a private method that we should expose so you could use it further to get bundle assets path? If so, what the method is, getJSBundleFile? . Hi @lunarraid, got it, thanks for the clarification! I'm going to investigate it and probably implement, but currently, we are testing and finalizing our high priority feature - code signing, so I'll let you know if I  have any updates regarding your feature request.\nAlso, if you have a time and ability you could try to implement this feature by yourself - we will be very grateful. So please let me know if you want to implement this feature or I'll implement it later, please also take a look at exemplary implementation details:\n1. expose  getCurrentPackageFolderPath method in CodePushNativeModule.java like this:\njava\n    @ReactMethod\n    public void getCurrentPackageFolderPath(final Promise promise) {\n        promise.resolve(this.mUpdateManager.getCurrentPackageFolderPath());\n    }\n2. add getCurrentPackageFolderPath method in CodePush.js:\njs\nasync function getCurrentPackageFolderPath() {\n  return await NativeCodePush.getCurrentPackageFolderPath();\n}\nand \njs\nif (NativeCodePush) {\n  CodePush = codePushify;\n  Object.assign(CodePush, {\n    ...\n    getCurrentPackageFolderPath,\n    ...\nAnother option - just add new property to getUpdateMetadata method output.\nPlease also note that this method should be implemented for iOS too.\nLet me know if you have any questions or considerations.. Hi @wjm117, we've just tested collaborators functionality and it works as expected for us:\n1. I've executed code-push collaborator add rncp976-android v-maximi@microsoft.com command\n2. @max-mironov has received an email and accepted invitation\n3. Max has executed code-push app ls command and from its output he can see my rncp976-android app that I've shared.\nCould you please confirm if you've received an email and accepted the invitation?. @wjm117, great! Thanks for the response.. Hi @aceisScope, thanks for reaching us and sorry for the inconvenience. We've just received an email from another customer with the same issue and as of now I can see that it's gone. Seems like there was a temporary server side issue, so could you please verify if everything works for you now and let us know if the issue is still reproduced? . Hi @RuanFluid, thanks for reaching us!\nThere are some items we need to clarify, they should help us avoid some problems and determine the root cause of the issue:\n\n\nAre you using different CodePush apps to release updates? From official docs:\n\nAs with all other React Native plugins, the integration experience is different for iOS and Android, so perform the following setup steps depending on which platform(s) you are targeting. Note, if you are targeting both platforms it is recommended to create separate CodePush applications for each platform.\n\n\n\nYou should not test CodePush update in Debug mode, from official docs: \n\nNOTE: CodePush updates should be tested in modes other than Debug mode. In Debug mode, React Native app always downloads JS bundle generated by packager, so JS bundle downloaded by CodePush does not apply.\n\n\n\nWhat CodePush command are you using to release updates for Android and iOS apps?. @RuanFluid, thanks for the response. \nI believe the issue happens because of you are using the same CodePush app Fluid-iOS both for Android and iOS, please let me explain. When you release an update - react-native compile all your js files into the single js bundle, this bundle has different names for Android and iOS platforms: \n\nFor Android - index.android.bundle\nFor iOS - main.jsbundle\n\nThat the reason why you are receiving this error \nAndroid app tries to download CodePush update that has been release for iOS, so this update contains main.jsbundle inside, not index.android.bundle\nTo fix the issue you should add another CodePush app for Android and use it further to release udpates.\nPlease let me know if you have any questions.. @RuanFluid, as I can see you are using targetBinaryVersion parameter, is there a chance if you have released an update that may also target to 3.0.0? \nCould you please share full release history?. @RuanFluid, got it, could you please try to debug or just add console.log(queryPackage) and   console.log(update) lines of code just after https://github.com/Microsoft/react-native-code-push/blob/master/CodePush.js#L53 in your /node_modules/react-native-code-push/CodePush.js file and share me with output? . @RuanFluid, great, thank you! \nFrom this output I can see that there is exist release in Production deployment with label: \"v12\" that probably may target to 3.0.0 by semver rules that CodePush server uses. Unfortunately, due to CodePush server design we able to see only last 50 releases, so probably there is no way to determine targetBinaryVersion value in v12 release.\nTo fix the issue you can execute code-push patch Fluid-iOS Production -l v12 --disabled command to disable this release. Also I would recommend you to create separate CodePush apps for Android and iOS.\nPlease let me know if you have any questions or see any issues.. @RuanFluid, looks weird, I'm going to investigate why CodePush server allows to download such old release but doesn't allow to disable it.\nSeems like the only (and right) way for you now is to create separate CodePush Android app, sorry for the inconvenience.\nPlease let me know if you have any questions.. @RuanFluid, so I'm closing the issue for now, please feel free to reopen or create new one if you have new questions.. Hi @AndrewJack, thanks for reaching us. No, I've not seen similar issues. \n\nIs there a chance if you have the same issue as here https://github.com/Microsoft/react-native-code-push/issues/775#issuecomment-291534691 ?\nHave you incremented your app version after upgrade?\nIs there a chance that you've released a CodePush update a long time ago that may target to your current app binary version?. @AndrewJack, got it, thank you, please let us know if you have any updates or have any questions.. Hi @AndrewJack, just a friendly ping - do you have any updates on this?. Got it, thanks for the update!. Hey guys, thanks for reaching us. \n\nWe've tested react-native@0.48.1 with react-native-code-push@5.0.0 several times and it works well for us. So could you please provide us with minimum versions of your apps so we would be able to reproduce the issue and investigate/fix it? You could also try to reproduce the issue on example app we provide in our repo or generate your own using app generation script: https://github.com/Microsoft/react-native-code-push/blob/master/Examples/create-app.js. @fungilation, got it, thanks. So I'm closing the issue for now, please feel free to provide us more details and reopen the issue.. Hi @adambom, thanks for reaching us, please feel free to create and fill out new issue so we would be able to help you.\nAlso, does it make sense if the issue somehow relates to this one https://github.com/Microsoft/code-push/issues/511#issuecomment-328653354 ? In case of this issue I believe the server returns The service is unavailable body instead of json payload, that probably could cause the issue.. Hi @jaggerwang, thanks for reaching us.\nTo build your app in releaseStaging build type do the following:\n1. go to android folder \n2. execute ./gradlew assembleReleaseStaging command. It will produce /android/app/build/outputs/apk/app-releaseStaging-unsigned.apk file.\n3. Open Android Studio -> Build -> Generate signed apk -> Build Type: releaseStaging -> Finish. It will produce /android/app/app-releaseStaging.apk file\nHere is Android sample app I've configured: rncp991.zip\nFor iOS please take a loot at this https://github.com/Microsoft/react-native-code-push/issues/893#issuecomment-317648454. Hi @jaggerwang, \n1. Regarding Android - got it.\n2. Regarding iOS - have you downloaded the sample app (to verify if it works for you?) and paid attention to the second screenshot I made here https://github.com/Microsoft/react-native-code-push/issues/893#issuecomment-317648454 ? . @jaggerwang, I've not changed Per-configuration Intermediate Build Files Path option, but Per-configuration Build Products Path, the same I've done for Pods project, please pay attention to the second screenshot from my comment. You could also try to download the sample app I've provided in the comment or share with me minimum version of your app so I could try to spend some time on it and probably fix the issue you have. . @jaggerwang, it's really hard to say what goes wrong here with the charts.framework you are using in your project without the real app. If you could share it with me - I could spend some time on it and try to fix the issue.. Closing this, please feel free to reopen if you have source code or exact repro steps that could help me to reproduce the issue.. Hi @belal-mazlom, thanks for filling this out!\nCould you please answer the following questions:\n1. Do I get it right that if the issue has place after the last CodePush update you've released? And you haven't seen any issues before?\n2. Are you absolutely sure that the last update you have made is correct and has no issues? What the changes have you made?\n3. Have you updated version of react-native on your machine or react-native version that you have locally is the same as your app running in Prod?\n4. Does the issue reproduce for the apps installed from App Store only or it also could be reproduced locally in Release mode (Release schema)?. Got it, thanks for the answers. The issue looks really weird, please let me explain - you've successfully released several updates before and the issue has started to reproduce only from the last update. \n1. Could you please provide me with the changes you have made in your react native screens?\n2. Could you please also confirm if you have not updated any other npm packages you are using?. @belal-mazlom, do you have a chance to try to change only one of the text string in your app and release that dumb update to Prod and verify if update works or not?. Hi @belal-mazlom, sorry for the delayed response. \n\nDo you think removing node_modules directory and run npm install cause this issue!\n\nYes, I suppose that some of your npm packages have incompatible changes after npm install. NPM install in this case may trigger modules updates. To fix the issue you could try to release new binary version of your app to app store, then try to release new CodePush update and verify if it works.\nI don't think the issue has place due to CodePush internal things because most of the customers use it without any issues. By the way removing or not CodePush from your app is totally up to you.. Closing this for now, please feel free to reopen.. Hi @kandiva, thanks for reaching us. Could you please fill out all relevant fields from issue template (above)? What the version of RN you've used before? Have you incremented your binary app version after RN update?. Hi @EskelCz, @omeraplak, please feel free to create new issues if needed.. Hi @lisong, thanks for reaching us. Yeah, that's known \"issue\" and we've tried to fix it but reverted our changes due to the following issues: #906, #910\nWe've already deployed server-side changes needed to fix the issue, so you could try to perform this changes and verify if it works for you. We also gonna test it and in case everything works well - we'll create PR.. Hi @slicejunk, thanks for pointing to this. I'm going to investigate if we could use another jwt lib to avoid this issue, we'll let you know if any updates.. Hi @slicejunk, @mortezaalizadeh, I've fixed the issue in https://github.com/Microsoft/react-native-code-push/pull/1007, please verify. We are also going to test and merge it asap.. Hi @ebaynaud, thanks for reaching us and sorry for the delayed response. \nWe have several points to clarify:\n1. What is the binary version of your app running in prod now?\n2. Could you please share production deployment history with us?\n3. Do I get it right if update dialog properly shows for staging version of your app?\n4. Could you please share with us the way you are initializing CodePush in java? ( i.e. new CodePush(...) ). @ebaynaud, thanks for the response. From your answers I cannot see any stranges or issues, so I'll try to create demo app and reproduce/fix the issue, in case the issue will not reproduce for me - I'll share with you generated demo app so you'll be able to review it.\nPS by deployment history I meant output for code-push deployment history <appName> <deploymentName>. I've tried to reproduce the issue but with no luck, here are repro steps:\n1. prepare android app to use multi-deployment-testing feature\n2. change app versionName to 1.0.5\n3. code-push release-react rncp1004-android android -d Staging -t ~1.0.0\n4. code-push promote rncp1004-android Staging Production\n5. ./gradlew assembleRelease & adb install app-release.apk\n6. Successfully install update from Production deployment: \n\nHere is app source code: rncp1004.zip\n. @ebaynaud, \n\nI think I'll start from scratch now removing my code-push apps then creating them again. I'll tell you whether my issue is solved after that now that I'm comfortable with code-push use.\n\nGot it, let me know if any updates.\n\nEDIT: My guess is nothing in multi-deployment setup because I can use the whole process without it.\n\nCorrect!\n\nNo changes because changes from v1 staging were reverted in v2 staging so v1 prod does not propose update... Possible?\n\nYes, that sounds like a truth and could be the reason of that behavior. \nBy the way, please let me know if you have any updates regarding this issue and find out stable repro steps, as for now I'm closing the issue, please feel free to ask questions here if any and reopen the issue.. Hi @slickdev, thanks for reaching us. I believe you have the similar issue as here https://github.com/Microsoft/react-native-code-push/issues/739#issuecomment-290639575\nActually, CodePush changes link to jsbundle to load from another location on device storage. And this another location could be probably slower for data access than access to ipa contents.\nBy the way, could you please provide us with minimum version of your app where the issue reproduces - we'll try to investigate it and see if we would be able to resolve the issue or not.\n. Got it, I'm closing this for now, please feel free to reopen or create new one.. Hi @shubhnik, thanks for reaching us. \nYou cannot integrate CodePush into existing apps without releasing new binary versions of your apps and publishing them to the stores.\nTo integrate CodePush into the apps you should do the following:\n1. Follow up this guides: iOS setup, Android setup\n2. increment your binary app versions both for Android and iOS apps\n3. publish your apps to the stores\nPlease let me know if you have any questions.. Hi @balesz, thanks for pointing to this. I just want to clarify - is that mismatch breaks something? I mean, usually, devs using SyncStatus enum this way: \nhttps://github.com/Microsoft/react-native-code-push/blob/f5e6de5f4a0cdd7a8b7b4d42d0811fd742521e62/Examples/CodePushDemoApp/demo.js#L25\nSo, do you experiencing the issue while using it in typescript?. Hi @balesz, the issue has been fixed in https://github.com/Microsoft/react-native-code-push/commit/32a1653e128b919579ca05be5a2a6edad4d7da67\nI'm closing this for now, please feel free to reopen if you see any other issues with typings.. Hi @TrustTheBoy, thanks for reaching us. Please take a look at this comment and let me know if it helps https://github.com/Microsoft/react-native-code-push/pull/888#issuecomment-309784920\nPlease also let me know if you see any issues.. @TrustTheBoy, could you please share us your deployment history? - code-push deployment history <appName> <deploymentName> and also provide us the version of your app you are trying to update?. @TrustTheBoy, \nCould you please clarify what do you mean by Build a private cloud on your foundation?. Hi @TrustTheBoy, I've configured for you the demo app that will demonstrate you how binary version mismatch feature works: please see the source code of the app  rncp1023 copy.zip\nPreconditions: \n1. App has version 1.0.0\n2. Binary version mismatch has been configured in demo.js file\n3. An CodePush update has been released that targets to 1.0.1 binary version\nI'm closing the issue for now, please feel free to ask questions regarding the demo I have provided.\n. @akki-ng, no problem!. Hi @Borisboky, could you please clarify - what the problem is to show Click to install button only when CodePush.SyncStatus.UPDATE_INSTALLED status has been triggered (UPDATE_INSTALLED event means that an update has been downloaded and installed, but it's waiting for to be applied)? Also CodePush API has  CodePush.getCurrentPackage() method that will return isPending: true in case update is installed and waiting for bundle reload to be applied (you could use CodePush.restartApp() method for that purposes).\nFor details please see: \n1. https://github.com/Microsoft/react-native-code-push/blob/b14654ebd93980c0f32cc28c73344561ed1d36c6/CodePush.js#L325\n2. https://github.com/Microsoft/react-native-code-push/blob/b14654ebd93980c0f32cc28c73344561ed1d36c6/CodePush.js#L369\nPlease let us know if it helps.. @Borisboky, all SyncStatusChange events are sequential, another words they are triggered in the strict order. It means that if you've received DOWNLOADING_PACKAGE - the will be downloading until receiving INSTALLING_UPDATE event, which also will be installing until UPDATE_INSTALLED event. Please let me know if it makes sense for you.. @Borisboky, yes, but you should subscribe to SyncStatus events by using  codePushStatusDidChange event handler, please see our docs and usage example from the demo app: https://github.com/Microsoft/react-native-code-push/blob/b14654ebd93980c0f32cc28c73344561ed1d36c6/Examples/CodePushDemoApp/demo.js#L20\nIf you have no ability handle those events you should call CodePush.getCurrentPackage() method and verify if the current package has isPending: true flag, which means that an update has been downloaded and installed, but it's waiting for to be applied.. @Borisboky, we have no such approach as codePush.getUpdateMetadata(codePush.UpdateState.DOWNLOADING), but to verify if sync is in progress you could try to call CodePush.sync() method again, in this case you should receive SYNC_IN_PROGRESS or UPDATE_INSTALLED events.\nSYNC_IN_PROGRESS means that an update is currently downloading or installing.. Closing this for now, please feel free to reopen in case of any questions. Hi @FredyC, thanks for reaching us.\nIn our docs we have the following point:\n\nNote, if you are targeting both platforms it is recommended to create separate CodePush applications for each platform.\n\nProbably we should change recommended word to needed one, also I believe we should change our log message to display the fact that the error probably have place due to using the same deployment key both for android and ios, what do you think?. @FredyC, to see the content of update package you could use checkForUpdate method - received metadata will contain downloadUrl: https://github.com/Microsoft/react-native-code-push/blob/b14654ebd93980c0f32cc28c73344561ed1d36c6/typings/react-native-code-push.d.ts#L119 that actually maps to the update zip archive, so you can download it, unzip and verify its content.. Hi @gaykov, thanks for reaching us. I've just successfully run an CodePushified React Native app on Android 4.3 - have no issues. Could you please try to install the lates version of react-native-code-push@5.1.2 because we've fixed dex overflow exception there. Please let me know if it helps . Hi @feiyingx , please take a look at this response  regarding this issue. Sorry for the inconvenience and thanks for the patience.. Hey guys, let's continue discussion in the common place https://github.com/Microsoft/code-push/issues/547 due to the issue affects not React Native users only.. Hi @el-lsan, thanks for reaching us.\nIf I get your use case right - the behavior you are experiencing is expected. Actually, CodePush uses semver for check target binary version conditions, and condition 4.1.0 >= 4.0.1 is true for semver check. That is the reason why the update targeting to 4.0.1 has been applied to app having version 4.1.0\nTo fix the issue you should disable or patch all releases that have no an upper bound.\nPlease let me know if you have any questions.. Hi @GregTheGreek, thanks for reaching us, please take a look at target binary version chapter - it should resolve your problem. \nPlease let me know if you have any other questions.. Hi @wack17s, I'm closing this for now, please feel to reopen if you have a chance to take a look at the message above.. Hi @jinghun1999, please take a look at https://github.com/Microsoft/react-native-code-push/issues/991#issuecomment-328074153 , there you can find the working example.. Closing this and removing bug label, please feel free to reopen if the issue is still reproduced for you after upgrading to react-native-sentry@0.28. @brendan-rius, great, thanks letting us know!. Hi @rozele, got it, thanks for the contribution!. Hi @rozele , just a friendly ping regarding this question:\n@rozele - can you please confirm that fix is landed in latest release?\nAlso just curious - in your release history you have always rc versions and sometimes not (like here). So on which conditions it depends on?. @rozele , got it, thanks for the clarification, going to merge it and release an update tomorrow or in the beginning of the next week.. Hi @danieldelouya, got it, closing this for now, please feel free to reopen.. Hi @josesuero, thanks for reaching us. Could you please provide us a small reproducible demo so we would be able to investigate it and help you?. Closing this for now, please feel free to provide the demo app where the issue reproduces so we would be glad to help you.. Hi @monotkate, thanks for reaching us and sorry for the delayed response. \nThe behavior you are experiencing is expected due to one of the following reasons:\n1. App crashes after new updated has been applied, so rollback to the previous package is absolutely correct behavior here. \n2. The exception does not crash your app, but codePush.notifyAppReady() method has not been called.\nAnother words, to prevent rollbacks codePush.notifyAppReady() method should be called each time after a new update is applied. \nI'm closing this issue for now, please feel free to reopen in case of any questions or issues!. Hi @israrwz, please take a look at this https://github.com/Microsoft/react-native-code-push/issues/790#issuecomment-294148452 and let me know if it helps. Hi guys @israrwz, @tkiefhaber, do I get it right if the demo app provided in https://github.com/Microsoft/react-native-code-push/issues/790#issuecomment-294148452 works well for you, but your app still doesn't work? If so, please provide me with the minimum version of your apps where the issue is reproduced.. Hey guys, I'm closing this for now, please feel free to reopen the issue or create new one and provide us with exact repro steps that we could follow to configure the app that uses codepush and react-native-navigation modules in the same manner as your's app does it. Or just provide us the minimum versions of your apps where the issue is reproduced. . @israrwz, I believe the issue happens here: https://github.com/Microsoft/code-push/blob/7557fcffe808a4fa2e0b17dab717ed95911272bd/sdk/script/acquisition-sdk.ts#L73\nIs there a chance if you somehow changed/override CodePushServerURL config value in your  info.plist file?. @israrwz, it is really hard to say what goes wrong here without having the demo version of your app where the issue reproduces - could you please share it with us so we would be able to help you?. @israrwz, the only thing we can probably do in this case - it's try to debug the app. I believe that the root cause of the issue is in https://github.com/Microsoft/react-native-code-push/blob/751bf02836f6af652cbd2d9f5a499444a5964a00/ios/CodePush/CodePush.m#L687 method that returns empty/undefined value for serverUrl prop. \nCould you please set the breakpoint here \nhttps://github.com/Microsoft/react-native-code-push/blob/751bf02836f6af652cbd2d9f5a499444a5964a00/ios/CodePush/CodePush.m#L690\nand confirm that ServerURLConfigKey/serverUrl has value other than null/empty-string?. @israrwz, good to know, thanks for the update!. Hi @matthiasleitner, thanks for reaching us and sorry for the delayed response. Could you please share with us your build.gradle file and also provide the way you are initializing CodePush instance int the MainApplication.java file?. @matthiasleitner, great, thanks.\nFrom the code you have provided I can see that you are using variant.buildConfigField \"String\", \"CODEPUSH_KEY\", \"\\\"flavourreleasekey\\\"\" approach to \"patch\" your BuildConfig, so could you please make sure if your BuildConfig.CODEPUSH_KEY has non-null/empty-sting value and it actually matches with the productFlavor you have selected for build (just add some kind of logging before initializing the CodePush)?. @matthiasleitner, got it, I have a couple of questions then:\n1. what command you are using for build your apk?\n2. what version has your built app/apk, something like 1.0.0-flavour1? If so, please note that CodePush uses semver rules while working with versions: https://github.com/Microsoft/code-push/tree/master/cli#target-binary-version-parameter\n3. what command you are using for releasing updates for specific flavor, have you specified the targetBinaryVersion parameter to inform the CLI that it should use version 1.0.0-flavour1 (versionName + versionNameSuffix)?. Hey @matthiasleitner do you happen to have any updates about it?. Hi @TheCodeTalker, thanks for reaching us. Could you please clarify step 3, do we really need this? I've just tried to setup the new project as below and everything works well for me:\n1. react-native init --version 0.48.3 rncp1067\n2. cd rncp1067\n3. npm install --save react-native-code-push\n4. react-native link react-native-code-push\n5. Build project in Debug. @TheCodeTalker, could you please clarify what the question is? Do I get it right if you are trying to run your app on a simulator? If so, do you see any issues/exception while trying to run your app on the simulator?. @TheCodeTalker, it's really hard to say what goes wrong here without a reproducible demo, could you please share with me the minimum version of your app where the issue reproduces?. Hi @stueynet, thanks for reaching us. Promoted release in Production deployment will contain exactly the same code as the release in Staging deployment that has been used for promotion. By security reasons CodePush server does not change any code you pushed.\nTo test your releases you can use one of the following approaches:\n1. Dynamic Deployment Assignment\n2. Multi-Deployment Testing. Hi @mohitgoibibo, thanks for reaching us, could you please confirm if the issue does not reproduce for you in case you are using the previous version of the gradle?\nFrom the issue details I can see A problem occurred starting process 'command 'node'', it means that codepush.gradle script cannot find nodejs.\nPlease also take a look at the similar issue here: https://github.com/facebook/react-native/issues/6875. Hi @mohitgoibibo, please use this workaround for now https://github.com/facebook/react-native/issues/6875#issuecomment-293220175 that helped me to resolve the issue (able to build a apk via Android Studio)\nWe'll try investigate and fix it a little bit later, thanks for letting us know about this issue and thanks for the patience.. Hi @fungilation, @ovaris, thanks for reaching us and sorry for the inconvenience. The issue looks really weird (especially in the fact that it does not reproduce for us and that it has been resolved by itself). Also we haven't seen it before. \nAs for now - please update your code-push-cli due to it contains a bugfix that may affect not only users who are using code-signing (this fix has not been merged for appcenter-cli yet). Probably the issue can somehow relate to this one https://github.com/Microsoft/code-push/issues/547 - we are working on it.\nPlease let us know if it will happen again, so I'm closing this for now.. Hi @jqn, closing this, please feel free to reopen.. Hi @aliceathens, from your client code I can see that you are using react-navigation. And in this case I think that react-native link does not work as expected. \nTo fix the issue you need to configure the CodePush manually:\n1. Plugin Installation (iOS - Manual)\n2. Plugin Configuration (iOS)\nPlease let me know if you have any questions or see any issues.. Hi @tk-pivotus, thanks for reaching us. Please take a look at updateDialog to see how the dialog can be customized. Please let me know if you have any questions.. Hi @ryanvanderpol, please also pay attention to the codePush.notifyAppReady() function, from the official docs:\n\nNotifies the CodePush runtime that a freshly installed update should be considered successful, and therefore, an automatic client-side rollback isn't necessary. It is mandatory to call this function somewhere in the code of the updated bundle. Otherwise, when the app next restarts, the CodePush runtime will assume that the installed update has failed and roll back to the previous version. This behavior exists to help ensure that your end users aren't blocked by a broken update.\nWhen can we expect logs for rollbacks to be available?\n\nCodePush is not crashes tracker. You need to use one of the related tools to collect crashes info for analysis.\nCould you also please clarify - do I get it right from this https://github.com/Microsoft/react-native-code-push/issues/1044 issue that you have Sentry installed/configured and it does not track any errors even if you have rollbacks? If so, please make sure you are using codePush.notifyAppReady() method.. Hi @sercand, thanks for reaching us! Yes, it makes sense due to the diffing feature will return only the file has been changed instead of whole js bundle. As of now, we are going to start migrating CodePush SDK to the  https://github.com/Microsoft/AppCenter-SDK-Android and https://github.com/Microsoft/AppCenter-SDK-Apple So most of the new features will be implemented there. \nThank you for the feedback/feature request, please let us know if you have any questions/concerns/considerations.. Hi @freddy24, thanks for reaching us. CodePush has been migrated to the AppCenter, so for apps management, you can use appcenter-cli now. In case you still want to use old code-push-cli you need to perform the following command to create an app:\ncode-push app add <appName> <os> <platform>\nFor example: code-push app add MyApp ios react-native\nPlease let me know if you have any questions or see any issues.\n. @freddy24, what version of the code-push-cli are you using, the latest, right (code-push -v)? \nCould you please try to remove it and install again.. JFYI - I've just tried to perform the code-push app add rncp1103 ios react-native command - everything works fine for me.. \ud83d\udc4d  , closing this, let us know if you have any other questions or see any issues.. Hi @alen252, thanks for reaching us. The issue looks very weird, just have tried to login using Mac - have no issues. Have you seen this solution https://github.com/nodejs/node/issues/3742#issuecomment-155545828 for the same issue in the nodejs repo?. @alen252 , got it, could you please make sure you are not behind the proxy?. >Yes,I'm sure i don't set proxy.\nWhat version of code-push-cli are you using? Could you please try to login via https://github.com/Microsoft/appcenter-cli ?. >I try login via https://github.com/Microsoft/appcenter-cli. I login success.\nGreat, due to CodePush is a part of the AppCenter - you can use AppCenter CLI now.\n\nBut code-push login still failed.\n\nHmm, haven't seen such kind of issues before, it's really hard to say what goes wrong here because I believe the issue is probably environment specific, but let's try the following:\n1. code-push logout\n2. npm uni -g code-push-cli\n3. npm i -g code-push-cli\n4. logout from the https://appcenter.ms/apps and then login\n5. code-push login\nLet me know if you have any changes.. @alen252 , do you have any issues with start using the new appcenter-cli instead of old code-push-cli (please take a look at this for more info http://microsoft.github.io/code-push/)? The issue looks very specific and it does not reproduce nor for me nor for the rest of the CodePush team, also haven't seen such kind of issues before from the other customers.\nI'm going to investigate it once again and let you know if I have any updates, but for now I believe you can start using new cli without any issues. \nPlease let me know if you have any concerns or have any issues w/ the new cli.\n. Closing this, please feel free to reopen and provide more info / exact repro steps that will help us to reproduce this issue. . Hi @alen252, ahh I see, going to try to investigate why codepush-management.azurewebsites.net is probably blocked or so, btw we are going to use in the appcenter-cli another codepush service soon that should not have such kind of problem. Will let you know if I have any updates.. Hi @iyegoroff, thanks for the contribution, do I get it right everything works fine w/o using the code-signing feature? Could you please also try to make an release using the old code-push-cli. And the last question - have you used the --output-dir parameter while making releases?. >So appcenter is not yet supported officially?\nRecently we have migrated code-push-cli commands to the appcenter-cli, so the issue probably could be in the new cli itself, not in the native SDK, that is the reason why I'm asking this.\nCould you also please perform the code-push deployment history <appName> <deploymentName> --format json command, download the latest release you made via blob url, unzip it and scan it (ls -a) for the .codepushrelease signature file - just want to understand where this file locates in and to make sure if the update package structure is the same as for the releases w/o using code-signing.. @iyegoroff, not a problem, just perform the code-push deployment history <appName> <deploymentName> --format json command and share its output w/ us when it'll be convinient for you.. @iyegoroff, probably the issue somehow relates to this one https://github.com/Microsoft/code-push/issues/544 even if you are not using the --outputDir parameter.\nSo could you please try to test this PR https://github.com/Microsoft/appcenter-cli/pull/346 and let me know if the issue is gone or not, thanks for the patience. . @iyegoroff, closing this for now, please feel free to reopen if you have a chance to take a look at https://github.com/Microsoft/react-native-code-push/pull/1106#issuecomment-351354657. Hi @jinghun1999, thanks for reaching us, please take a look at \nhttps://github.com/Microsoft/react-native-code-push/blob/553e2eaef00583ce1fdf24b76f6025b7f0a9d8fc/Examples/CodePushDemoApp/App.js#L35\nLet me know if you have any other questions.. Hi @jinghun1999, closing this, please feel free to reopen or create new one in case of any questions/issues.. Hi @adbl, thanks for your request and sorry for the late reply. \nCould you please clarify - do I get it right that your app restarts when becoming active even if CodePush does not install any update? If so, could you please confirm/make sure if iOS Data Protection properly works for regular React Native app that does not use CodePush?. @adbl,\n\nwill you then look into how Data Protection could be causing issues with code push?\n\nSure! We'll try to determine the root cause of the issue and fix it if possible.\n\nI\u2019ll think about if we can make an internal release without code push\n\nThanks, that would be great, we'll wait for your response.. Hi @adbl, I'm closing this for now, please feel free to reopen if you have any updates.. Hi @tirrorex, thanks for reaching us, this is the expected behavior, please see https://github.com/Microsoft/code-push/tree/master/cli#target-binary-version-parameter\nAnother words 1.0 is a wildcard constraint matching >=1.0.0 <1.1.0.\nPlease let me know if you have any other questions.. @tirrorex, you can use patch command of the code-push or appcenter CLIs to target the exact version you want. . Hi @bhgames, got it! Please let us know if you see any issues or have any other questions.. Hi @kdong007, @michaelmerrill, thanks for reaching us.\nPlease take a look at this https://github.com/Microsoft/react-native-code-push/issues/893#issuecomment-317648454 If I get your issue right - it might help you to resolve the configuration problem (CodePush + RN + CocoaPods).\nPlease let me know if you have any questions.. @kdong007, thanks for letting me know, I'm closing this, please feel free to reopen or create a new one in case of any questions/issues.. @quy1403, closing this, please feel free to reopen.. @prashantvv, closing this, please feel free to reopen if you see any issues after testing.. Hi @MrMYHuang, looks good to me, thanks for the contribution!. Hi @wuyunqiang, thanks for reaching us!\nPlease double check if CodePush is installed correctly, especially step 3 from the manual installation guide.. Hi @wuyunqiang, got it, so I'm closing this because of #1133 . Hi @niros001, thanks for reaching us!\nCould you please fill out our issue template to provide us more info?\nThe main concern here is that we cannot currently understand what you have done (what steps have you performed) to reproduce the issue. Providing a minimal working version of your app where the issue reproduces also would be great. . @niros001, just a friendly ping.. Closing this, please feel free to reopen and provide us more info regarding your issue.. Hi @showtan, thanks for reaching us! \nCould you please provide us more info regarding your issue by filling out this issue template. Please also double check if you've installed CodePush plugin correctly using manual installation guide. \n  . @showtan, please take a look and analyse configured with CodePush sample apps here https://github.com/Microsoft/react-native-code-push/tree/master/Examples and let us know if you have any questions or see any issues.\nPlease also take a look at https://github.com/facebook/react-native/issues/14209#issuecomment-308753362. Closing this for now, please feel free to reopen.. Hi @wuyunqiang, great! So, do I get it right if you've resolved the issue and it can be closed? Please let me know if you have any questions or see any issues.. Hi @GideonLiu, thanks for reaching us.\n\n[CodePush] Update is invalid - A JS bundle file named \"main.jsbundle\" could not be found within the downloaded contents. Please ensure that your app is syncing with the correct deployment and that you are releasing your CodePush updates using the exact same JS bundle file name that was shipped with your app's binary.\"\n\nCould you please confirm if you are using different deployments for releasing updates for Android and iOS?. @GideonLiu, could you please try to perform code-push deployment list <appName> --format json command, then download blobUrl as zip, unzip it and see if package contents have main.jsbundle file inside? If you have a chance - please make a screenshot to show the package structure and contents.\nAlso I've noted, that you are using general release command to release an update, so please double check if your \"/Users/Gideon/Desktop/RN/\" directory also contains main.jsbundle file inside.\n  . @GideonLiu, seems like iOS part of CodePush SDK awaits \"CodePush\" folder as prefix for manifest:\nhttps://github.com/Microsoft/react-native-code-push/blob/e1cdd90e4ee6645a138eab8a43d383a37d50ef71/ios/CodePush/CodePushUpdateUtils.m#L9\nCould you please try to rename your RN folder as CodePush and let me know if it fixes your issue?. @GideonLiu, got it, seems like an issue, we are going to investigate it in order of priority and let you know if we have any news. \nAs of now, please increment your app version each time you reinstall it - this workaround should help you to avoid of installing diff update instead of full.\nPlease let me know if you have any questions.. Hi @shyaniv7, thank you for reaching us and submitting an issue.\nCould you please clarify - do I get it right if your workaround assumes that each dev (who has several projects) will have to edit postlink.js manually? If so, I think we need to improve it - our goal is to reduce manual installation steps as much as possible. \nI can see the following solution for your use case - instead of throwing \nbash\nRunning ios postlink script\nCould not determine correct xcode proj path to retrieve related plist file, there are multiple xcodeproj under the solution.\nwe can output a list of available xcodeproj projects and prompt a user to select needed one.\nThis issue looks very specific so we are going to take care of it in order of priority,  (currently we are working on CodePush SDK to AppCenter SDK migration). \nAnyway, this issue does not look very difficult so we'll be very grateful if you have a chance and time to make a contribution and fix this issue.\n  . @shyaniv7, got it, thanks for the clarification.\n\nI will attempt to fix the post link script and make a contribution.\n\nGreat! Please let us know if you have any questions.. Hi @abrel, please also take a look at this issue https://github.com/Microsoft/react-native-code-push/issues/775 - you can probably have the same use case.. HI @abrel, sorry for the delayed response. \nCould you please perform the following steps just to make sure your issue does not somehow relate to compatibility issues?\n1. Build and install new binary version of your app on device \n2. Create new CodePush \"test\" deployment \n3. Release CodePush update to this deployment \n4. Verify if everything is ok an try to release another one update once again\nPlease let me know if you still have the issue with styles after performing steps above. If so, please share what kind of changes you are making while releasing a CodePush update, also the minimum working version of your app where the issue reproduces would be very helpful for us.. Hi @marcmo, thanks for reaching us.\nI've added clarification tag by mistake. As for your issue,  could you please double check if your app has been configured correctly using this installation guide.\nPlease also take a look at this https://github.com/Microsoft/react-native-code-push/issues/790#issuecomment-294148452 - at the end of the comment you can find the configured app that should work.. @marcmo, could you please share which way you are registering your callable module?\nAs for the sample app above, please pay attention to the following code:\n```\nimport CodePush from 'react-native-code-push';\n// register all screens of the app (including internal ones)\nexport function registerScreens() {\n  Navigation.registerComponent('example.FirstTabScreen', () => CodePush(FirstTabScreen));\n  ...\n}\n```. >are you sure about the call to CodePush?\nYeah, I'm sure, please take a look at codePush(..) usage here.\n\nthis is how I use codepush:\n\nLooks good, it's really weird why CodePush doesn't work for you. Could you please share the minimum working version of you App so I'll be able to take a look at it closer? \nAs of now I don't sure what exact root cause of your issue is, but I'm sure that demo app I've provided here https://github.com/Microsoft/react-native-code-push/issues/790#issuecomment-294148452 worked well for me - could you please also download it and confirm if it works for you?\n. Hi @marcmo, got it, will wait for the demo!\n\nI was hoping you already experienced situations where code-push was working when running in development mode, but not in an release-build.\n\nPlease note, that running RN app in the development mode is not actually the same as running in release mode, please see official docs:\n\nNOTE: CodePush updates should be tested in modes other than Debug mode. In Debug mode, React Native app always downloads JS bundle generated by packager, so JS bundle downloaded by CodePush does not apply.\n\nLoading JS bundle via packager is the main reason why you have no issue in debug mode. CodePush uses locally installed JS bundle instead.. @marcmo, great, thank you! I'm going to investigate it and let you know if I have any questions or If I'll found the root cause of the issue.. @thibautguedou3, I'm closing this for now, but please feel free to reopen the issue and provide us working example where this happens.. Hi @kdong007, thanks for reaching us, please take a look at https://github.com/Microsoft/react-native-code-push/blob/master/docs/api-android.md#static-methods\nAnd let me know if you have any questions or see any issues.. Closing this, please feel free to reopen if you have any questions.. Hi @mdsaddam, great! So I'm closing this, please feel free to reopen in case of any other issues or questions.. Hi @maxkomarychev, thanks for reaching us.\n\nCodePush should not crash the app. It should safely fallback to original bundle.\n\nAbsolutely agreed, to have good UX we definitely should not crash an app while installing broken CodePush update. Currently, we are actively working on CodePush native SDKs (both Android and Apple) migration to the App Center native SDKs, while migrating we are going to fix such kind of problems in addition to general rollbacks enhancement (add an ability to see the reason of rollbacks). The migration process will take some time and when we have it finished - you'll be able to use appcenter-codepush service from the https://github.com/Microsoft/AppCenter-SDK-React-Native/ with all the improvements I've listed above.\nPlease also let me know if you see any other issues or have any questions.. Hi @quy1403, thanks for reaching us.\n\nHow can I re-start my app programically.\n\nPlease take a look at codepush.restartApp method. Let me know if it helps or if you have any questions.. Closing this, please feel free to reopen if you have any questions or see any issues.. Ah I got it, we need to add new app because of the gradle and buildTools versions, so LGTM then, but still need to remove some BUCK and other extra files that are not really needed.. @annakocheshkova , @ruslan-bikkinin please pay attention to this fix, we also must apply it to our brownfield apps feature.. To make CodePush able to work both with react-native@0.40.0 and react-native@0.39.2 we probably should use:\n```objective-c\nif __has_include(\"RCTEventEmitter.h\")\nimport \"RCTEventEmitter.h\"\nelif __has_include()\nimport \nelse\nimport \"React/RCTEventEmitter.h\"   // Required when used as a Pod in a Swift project\nendif\n. The same here:objective-c\nif __has_include(\"RCTAssert.h\")\nimport \"RCTAssert.h\"\nelse\nimport \nendif\nif __has_include(\"RCTBridgeModule.h\")\nimport \"RCTBridgeModule.h\"\nelse\nimport \nendif\nif __has_include(\"RCTConvert.h\")\nimport \"RCTConvert.h\"\nelse\nimport \nendif\nif __has_include(\"RCTEventDispatcher.h\")\nimport \"RCTEventDispatcher.h\"\nelse\nimport \nendif\nif __has_include(\"RCTRootView.h\")\nimport \"RCTRootView.h\"\nelse\nimport \nendif\nif __has_include(\"RCTUtils.h\")\nimport \"RCTUtils.h\"\nelse\nimport \nendif\n.objective-c\nimport \"CodePush.h\"\nif __has_include(\"RCTConvert.h\")\nimport \"RCTConvert.h\"\nelse\nimport \nendif\n.objective-c\nimport \"CodePush.h\"\nif __has_include(\"RCTConvert.h\")\nimport \"RCTConvert.h\"\nelse\nimport \nendif\n```. >I'm not sure what is meant by persisting after the app restarts programatically.\nIMMEDIATE installation mode uses RestartManager.restartApp() method to restart app programatically (user does not kill the app process and launch it again)\n\nI'm not sure that using IMMEDIATE install mode or not makes any difference - are you saying that the value set to the variable key is lost when the app restarts, but not when it restarts programmatically? Because that's not what I'd expect.\n\nI've created demo app and could confirm, that the value set to variable key is not probably lost when app restart programmatically. Here is the code I've used to reproduce the issue:\n```javascript\n  syncProduction() {\n    CodePush.sync(\n      { deploymentKey: \"iDKl3x098ODmeItIQEyEMjV3M7EjVyM2ZvIuz\" } // Production deployment key\n    )\n  }\nsyncStaging() {\n    CodePush.sync(); // Staging deployment key should be taken from native-side\n  }\nrestartApp() {\n    CodePush.restartApp(); // both \"CodePush.restartApp()\" and \"IMMEDIATE\" installation mode are using \"RestartManager.restartApp()\" method to restart app programatically (user does not kill the app process and launch it again)\n  }\n``\nRepro steps:\n1. callsyncProduction()method\n2. callrestartApp()method\n3. callsyncStaging()` method\nActual: CodePush prints \"App up to date.\" due to probably using Production deployment key\nExpected: CodePush prints \"Update installed and will be applied on restart.\" due to using staging deployment key\nWhat is really bothering me - is the fact, that if I'll call restartApp() twice on step 2 - I'll not fall into the issue. It probably means that restartApp() method does not work properly.\nI believe I should fix restartApp() method to avoid this confusing behavior instead of updating the docs. I suppose that the expected behavior is *NOTE: The deployment key specified viacodePush.sync({ deploymentKey: key })does not persist beyond the given call, and needs to be specified as an option each time it is used.* as you've described above.. @abodalevsky, could you please clarify what means number 4?. @abodalevsky, do I get it right if FileBundlePrefix const is used in GetJavaScriptBundleFileAsync method only, so there are no possible issues with this change?. Please update readme and typings in order to mention about new handleBinaryVersionMismatch feature and checkForUpdate method signature changes. @ruslan-bikkinin, are there any reasons to use writeFileSync and readFileSync instead of createReadStream and createWriteStream?. fixed, thanks. fixed, thanks. I believe we should try to find the better name for preparePublicKeyForDecoding method, probably something like this:\npreparePublicKeyForDecoding  -> GetKeyValueFromPublicKeyString // remove BEGIN / END tags and line breaks from public key string.  Typo here - succueded.  Typo here - succueded. I believe it would be more elegant to use ?: ternary operator here due to this block of code is used for logging purposes only:\nCPLog((isDiffUpdate) ?  @\"Applying diff update.\" : @\"Applying full update.\"). Should not we refactor it like this?\n```objective-c\n+ (void) handleFailedDataIntegrityCheck:(void (^)(NSError err))failCallback\n                                   error:(NSError *)error\n{\n    NSString * const errorMessage = @\"The update contents failed the data integrity check.\"; \nCPLog(errorMessage);\n\nif (!error) {\n    *error = [CodePushErrorUtils errorWithMessage:errorMessage];\n}\n\nfailCallback(*error);\nreturn;\n\n}\n. Code style issue here and below - should be `if (` instead of `if(`. I would prefer to avoid of using `handleFailedDataIntegrityCheck` method at all and implement error handling like this:objective-c\n    if (!error) {\n        error = [CodePushErrorUtils errorWithMessage:@\"Code Signing integrity check error...\"];\n    }\nCPLog(error);\n\nfailCallback(*error);\nreturn;\n\nThis will allow us to have different error messages for code signing integrity check and for general integrity check and determine in future where the issue occurs. Also it makes code cleaner due to we have no method where we pass `error` as parameter ones again.. The same as above is here:objective-c\n    if (!error) {\n        error = [CodePushErrorUtils errorWithMessage:@\"General integrity check error...\"];\n    }\nCPLog(error);\n\nfailCallback(*error);\nreturn;\n\n. Please also double check that you are operating with pointers and addresses of `error` parameter correctly while checking for nil and below. . fixed, thanks!. Do we really need result variable here?\nWould it probably better to do the following:js\npostlinks.reduce((p, fn) => p.then(fn), Promise.resolve())\n    .catch((err) => {\n        console.error(err.message);\n    });\n``. Please changebuildToolsVersionback to the23.0.1. Don't think if we should add this line.. Do we really need to change gradle version? I would prefer to leave it as it is if possible.. Please note that this version of build gradle should be compatible with build tools 23.0.1. Add a comment above?. What isparsedIdentifier[0]andparsedIdentifier[1]. It would be better to declare new descriptive variables for this array items.. Empty string check?. Add a blank line before comment?. Blank line before comment?. Blank line. @ruslan-bikkinin, why we need not this check here? Could you please explain? I can see that ifdeploymentKeyis an empty stringhasDeploymentKey()method will returntrue, but actually it should returnfalse.. Do we really need this fakes (please let me know if they are not fakes) to be merged?. What is actuallyFULL_prefix means?. Please be careful with properties names changes of local manifests and etc. I mean in terms of backward compatibility.. Could you please clarify why we have changedmock(JSONObject.class), mock(DownloadProgressCallback.class)to an empty string?. empty line - please add a comment after that or remove it.. Don't sure if we need this comment, is it some kind of todo?. I believe we should not uselogAssert ` method, please see https://github.com/Microsoft/AppCenter-SDK-Android/search?utf8=%E2%9C%93&q=AppCenterLog.logAssert&type=\nYou should use info, debug and etc. Please also investigate AppCenter-SDK-Android repo for the same situations.. We should notify React Native instance that we are requesting app restart. Another words React Native client should be subscribed on App Restart events. I would prefer to change onRestartReady method name to onRestart to avoid of confusing. Please let me know if I've missed something.. @ruslan-bikkinin, I would prefer to use mock(InputStream.class) instead of createGoodResource. BaseJob name looks too generic, what about BaseHttpJob or so?. I would prefer to use the same terms as we've been using before, instead of QueryUpdateJob we can use CheckForUpdateJob, RepostStatusDownloadJob, RepostStatusDeployJob, it looks consistent and more clear in terms of existing ecosystem.. Do we need this condition? Further we are manipulating with deploymentStatusReport.getStatus() only.. We don't need to add om.microsoft.appcenter:appcenter if we have appcenter-crashes. Please provide more info in comment why we \"Do nothing\" while tracking an exception (app secret has not been specified, bad request or etc.). Remove blank line or add comment. please avoid of using button1Text and button2Text names, please provide exact names what buttons are doing.. We need to remove all usages of notifyApplicationReady method from the native API.. Please remove all secrets and deployment keys from the demo/testing apps. Why we have changed CodePushLocalPackage to CodePushPackage?. Why have we switched from  CodePushLocalPackage to CodePushPackage?. What is the purpose of this test, what are you trying to verify? Please provide a clarification here and below.. Please double check this condition.. Could you please clarify why?. Got it, thanks.. Ahh I see, thanks. ",
    "wuyunqiang": "I met this bug,how to do?. @sergey-akhalkov  I try to perform 'rnpm unlink react-native-code-push' \nand react-native link react-native-code-push\nbut still here.\nerror: implicit declaration of function 'RCTSharedApplication' is invalid in C99 [-Werror,-Wimplicit-function-declaration]\n  UIViewController vc = [[[RCTSharedApplication() delegate] window] rootViewController];\n                            ^\n error: bad receiver type 'int'\n  UIViewController vc = [[[RCTSharedApplication() delegate] window] rootViewController];\n                            ^~~~~~~~~~~~~~~~~~~~~~\n2 errors generated.\n BUILD FAILED \nAndroid is ok.\nI don't konw ios.. @flyjennyetn  hi \u6211\u4e5f\u9047\u5230\u8fd9\u4e2a\u95ee\u9898 \u8bf7\u95ee\u4f60\u662f\u600e\u4e48\u89e3\u51b3\u7684\u554a \u8fd8\u6709\u672c\u5730\u7684\u6587\u4ef6\u4f1a\u4e0d\u4f1a\u5728\u91cd\u65b0loading\u540e \u8986\u76d6codepush\u66f4\u65b0\u7684\u6587\u4ef6\u554a\uff1f. \u4f60\u4e0d\u662f\u8bf4\u662f\u4f60\u4e0a\u4f20\u9519\u4e86\u4e48\uff1f \u4f60\u662f\u76f4\u63a5run ios\u4e48? \u6253\u5305\u540e\u53ef\u4ee5\u4e48\uff1f\u6211\u4e0d\u592a\u61c2iOS\u7684. \u6211\u7684\u95ee\u9898\u5df2\u7ecf\u89e3\u51b3 \u6211\u662f\u5728debug\u6a21\u5f0f\u4e0b\u66f4\u65b0\u540e\u672c\u5730\u6587\u4ef6\u540e\u66ff\u6362\u6389\u4e0b\u8f7d\u540e\u7684\u6587\u4ef6\u56e0\u6b64\u770b\u4e0d\u5230\u7ed3\u679c release\u662f\u6b63\u5e38\u7684\u3002\u5177\u4f53\u53c2\u8003\uff1ahttps://github.com/Microsoft/react-native-code-push/issues/941\n\u5b89\u5353\u6210\u529f \u8bc1\u660e\u670d\u52a1\u5668\u914d\u7f6e\u662f\u6ca1\u6709\u95ee\u9898 \niOS\u7b2c\u4e00\u6b21\u66f4\u65b0\u6210\u529f \u540e\u9762\u5931\u8d25 \u53ef\u80fd\u662f\u4f60\u66f4\u65b0\u540e\u7684\u4ee3\u7801\u6709\u95ee\u9898\u5427\u6216\u8005\u770b\u4e00\u4e0b\u4f60iOS\u7684\u914d\u7f6e@zhangyi5628 \n\u4e5f\u53ef\u4ee5\u53c2\u8003\uff1ahttps://github.com/wuyunqiang/ReactNativeUtil/issues/26. I  use codepush to Android and it ok. .  In Debug mode,can I setting someting to stop RN load JS bundle generated by packager? \nlike android setting ip:port to some string. ios can do that ? \n if release is ok?\n@sergey-akhalkov .  change it  after jsCodeLocation = [CodePush bundleURL];\nI need to run-ios again?. ok thx.. oh it's good for me \nvery thx.. @sergey-akhalkov \nhttps://github.com/Microsoft/react-native-code-push/issues/1133\n. \u989d OK\u3002I konw how to fix this bug.\nI change build.gradle like that:https://github.com/wuyunqiang/ReactNativeUtil/issues/19\nand change codepush.gradle like that.\n\nnow I have new problem.\n/Users/wuyunqiang/Documents/test/testApp/node_modules/react-native-code-push/android/app/src/main/java/com/microsoft/codepush/react/CodePushNativeModule.java\ncan't find class like that.\n\nHOW TO FIX?\n. ok I copy codepush package to my project.and is ok.. OK\u3002\ncode is here https://github.com/wuyunqiang/AndroidToRN. ",
    "youngjuning": "same issues. https://github.com/youngjuning/youngjuning.github.io/issues/187. bash\nreact-native bundle --platform ios --dev false --entry-file index.js --bundle-output ios/main.jsbundle\nnow, rn has no index.ios.js. https://github.com/youngjuning/youngjuning.github.io/issues/187. I have the same issue 0.57.4. https://github.com/youngjuning/youngjuning.github.io/issues/187. ",
    "chhornponleu": "I recently face the same issue and could not find helpful solution. I tried to understand the message and found out that I was trying to release the same code as new version.\nI change few lines of code and retry. \n....\nIt works then!!!. ",
    "Andreyco": "How about specifying target binary version of pushed update?\n\nrelease 1.0.0 to app store/play store\npush several updates via code push\nrelease 1.1.0 to app store/play store & patch latest pushed update to target binary <1.1.0\npush several updates via code push which targets binary >=1.1.0\nrelease 1.2.0 to app store/play store & patch latest pushed update to target binary \">=1.1.0 <1.2.0\"\n\nRepeat steps 2 and 3 as needed.\nThe point is to mark latest binary version (which is not known ahead) for already pushed update.. ",
    "karltaylor": "I just want to clarify the correct process here:\n\nIf I upload a binary to the app store (1.0.0). This is what users will receive. And I should not push a bundle to codepush.\nUsers will download the app and it will open as normal (and not download an update). (1.0.0)\nI push a hotfix / new feature to codepush deployment and test (1.0.1-rc)\nI promote this bundle to production (1.0.1)\nExisting users will receive the 1.0.1 codepush update and download.\nI release to app store (1.0.1)\nNew users get that version. (1.0.1) But will this trigger a download?. Sorry for hijacking but it's the same problem - when I try and do appcenter codepush deployment clear Staging\n\nI get an error:\nbash\nError: {\"message\":\"Forbidden\",\"code\":\"Forbidden\"}\nEdit:\nThe fix for this is you have to be set to 'Manager' Role in the App Settings. But then you should also do\nbash\n$ appcenter logout\n$ appcenter login\nTo refresh credentials. After that I can do appcenter codepush release-react and it would deploy. ",
    "alexandergoncharov": "Hi @karltaylor ,\nNo, this will not trigger a download because all CodePush release have target-binary-version field which indicate binary version for current release. if 1.0.1 binary version try to check update(and you have release only for 1.0.0) then your app will not be updated.\nFor more info please check 2 item from this doc:  https://github.com/Microsoft/code-push/tree/master/cli#releasing-updates-react-native\nPlease let me know if it was helpful or you have any questions.\nThanks,\nAlexander. Hi all,\nYeah, I'll look at this as soon as possible. It is in queue. Sorry for this delay.\nThanks,\nAlexander. Hi @Chamode,\nThanks for reporting!\nCould you please check that you successfully installed plugin and imported it?\nThanks,\nAlexander. If you use rnpm(link command) you don't have to use cocoaPods. Link command should be enough.. Hi all,\nSure, I'll reopen it. Thanks for reporting!\nIt requires more time for investigate. Sorry for this delay.\n. Hi all,\nI see that This issue have been fixed in react-native. https://github.com/facebook/react-native/issues/22383\nSo, I'm going to close this issue for now. Please feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @krunalsshah ,\nSorry for long delay.\nYou don't have to compile react-native-code-push android native module for developing. You can make changes in local package and then npm install it locally for testing changes or you can make changes in installed package for your project(node_modules/react-native-code-push).\nAbout build issue of react-native-code-push android native module: I'm not sure that it is necessary to build module independently as it is module and it is good work with app but I'll investigate it.\nPlease let me know if my suggestions for development was useful for you or you have any questions.\nThanks,\nAlexander. Hi @krunalsshah,\nI'll close this issue for now as I haven't heard from you in a while. But please feel free to reopen it if you will have any questions.\nThanks,\nAlexander. Hi @MrPluto,\nCodePushDeploymentKey is used for getting updates from codePush service. Without this key you can't get updates. For getting this key please check this: https://docs.microsoft.com/en-us/appcenter/distribution/codepush/cli#deployment-management\nCodePushDeploymentKey is used for codeSign of updates. This is protection system for checking that current update is implemented by author. Please check this: https://github.com/Microsoft/react-native-code-push/blob/master/docs/setup-android.md#code-signing-setup and https://github.com/Microsoft/code-push/tree/master/cli#code-signing. Hi all,\nWe are working on it.. Hi @SudoPlz, @manjeetwadi, @anuraginwadi, @shashankwadi,,\nCould you please provide some part of your code which can help me to reproduce this issue?\nThanks,\nAlexander. Hi all,\nSorry for long delay.\nSeems this reason of this Error in zipStream.close() method but no info how is it possible to reproduce exactly it.\nAnyway, I added Error manually in this place and this Error crash user app like this: \n\nApp shouldn\u2019t be crashed if we got Exception from our plugin because our broken plugin should not affect work of application. So, I think that we should catch CodePushExceptions and just log it without throwing.\nFound approaches for this:\n1. Made wrapper for CodePushNativeModule with overriding all public method with Try-catch.\n  Pros:\n     * easy fast fix.\n  Cons:\n     * Not good approach because if other developers will add new methods then they should add new method in wrapper.\n\nUse https://github.com/cglib/cglib for working with Proxy Java class. We can\u2019t use Proxy approach without this lib in our case.\n Pros:\nMinimal changes for existing code.\n Cons:\nAdding external lib.\n\n\n\nI think that first approach is prefer in our case because it isn\u2019t expected new methods in functional and issue is not so critical for adding external lib.\nAnyway, I think we should continue investigate issue with closing stream but at first, I think, we should fix issue with closing  app if we got error from CodePush.\n@half-ogre , Could you please share your thoughts about approaches?\nThanks,\nAlexander. Yeah, just catching errors will be more easy and faster. So, we can implement catching errors as hot fix until we finish work on brownfield.\n@NickToropov, @half-ogre  What do you think about it?. Hi all,\nI made PR for preventing crashes of app by catching Exceptions. Could please someone test it?\nhttps://github.com/Microsoft/react-native-code-push/pull/1286\nThanks,\nAlexander. Hi all,\nChanges are published in 5.3.4 version: https://github.com/Microsoft/react-native-code-push/releases/tag/v5.3.4\nI'll close this issue as it was resolved by hot fix but please feel free to reopen it if you have any questions.\nThanks,\nAlexander\n. Hi @SudoPlz ,\nSorry for long delay.\nThere isn't any fix implementation for this as this issue in React-native was closed as inactive.\nCould you please share any more logs of code example which can help us to reproduce issue?\nThanks,\nAlexander. @SudoPlz , Yeah, seems this Error is called from successful callback of CodePushDialog.\nCould you please let me know have you tried to repro this on your device?\nThanks,\nAlexander. Closed at now because we are finding the best solution for this issue.. LGTM!\n@tmaly1980 Thanks for contributing!. Hi @xiaogaofudao,\nThanks for reporting!\nI tested plugin with RN@0.55.3: No issues found.\nCreated PR for updating Readme.\nI'll close this issue. If you will have any questions please feel free to reopen it or create new.\nThanks,\nAlexander. Hi @tarunkonda123,\nThanks for reporting!\nCould you please provide some part of code which can help me reproduce your issue?\nAlso, would be great if you will provide your Android version.\nThanks,\nAlexander. Hi @Adwich,\nThanks for reporting!\nI've tested usual scenario and haven't found any issue. Your issue line(compile project(':react-native-code-push')) was  added.\nCould you please share your command and actions which you used for setup?\nAlso, this is setup documentation which can help you setup successfully: https://github.com/Microsoft/react-native-code-push#getting-started\nThanks,\nAlexander. @Adwich , Could you please try to make one more project just for test with CodePush setup? \nAnd if this issue is reproduced then could you please share this project with reproducing issue?\nBecause I can't repro this and I'm not sure what is the reason of issue. Your test project will help me to investigate it.\nThanks,\nAlexander . Hi @Adwich,\nI'll close this issue for now as I didn't hear answer form you in a while. Please feel free to reopen it if you will have any questions.\nThanks,\nAlexander. Hi @marc-whil \nThanks for contributing!. Hi @841660202 \nThanks for reporting!\nCould you please clarify Are you still having this issue?\nThanks,\nAlexander . Hi @841660202,\nI'll close this issue for now as I haven't heard answer form you in while. Please feel free to reopen it if you will have any questions.\nThanks,\nAlexander. Hi @ujwal-setlur,\nThanks for reporting!\nI reproduced your issue. I'll investigate it a little bit later.\nThanks,\nAlexander. About debug builds with code-push: I'm afraid it is No, debug builds use code-push functionality. But if you will try to update app throw codePush with enabling liveReload server You would just get app version which you use on liveReload server.  It may seems that update isn't working. \nFrom documentation(Here: https://github.com/Microsoft/react-native-code-push#releasing-updates):\n\nNOTE: CodePush updates should be tested in modes other than Debug mode. In Debug mode, React Native app always downloads JS bundle generated by packager, so JS bundle downloaded by CodePush does not apply.\n\nThanks,\nAlexander. Hi all,\nSorry for long delay.\nFound that the issue is reproducing only in Live Reload mode.\nAs hot workaround you can just comment your CodePush calling during developing your app. But don't forget to uncomment it when you will release your updates.\nIf you would like to test CodePush logic(that your updates successful will be installed to your user devices) you should use only Release build. \nInvestigation of the reason of issue in progress.\nThanks,\nAlexander. Hi all,\nSorry for long delay.\nI opened PR for this issue: https://github.com/Microsoft/react-native-code-push/pull/1332. \nCould please someone test it?\nThanks,\nAlexander. @ujwal-setlur, Thanks for help!\nPlease let me know about your results.. Hi all,\nI'm going to close this issue as fix already in master. This changes will be available in the next publish.\nFeel free to reopen this if you have any questions or issue reproduce again.\nThanks,\nAlexander. Hi @g33ktony ,\nThanks for reporting!\nCould you please provide reprosteps as I can't reproduce it after fix? All works correct for me.. Hi @nitrosalat ,\nThanks for reporting!\nCould you please provide reprosteps as I can't reproduce it after fix? All works correct for me.. Hi @Devlin556,\nThanks for reporting!\nCould you please provide reprosteps as I can't reproduce it after fix?\nAlso, please ensure that you use fresh react-native-code-push version.. Hi @wenkangzhou, @g33ktony , @ujwal-setlur ,\nI see that you all have the issue like that. Could you please provide logs, versions, reprosteps or dummy project with reproducing issue?\nThanks,\nAlexander. Hi @kelset,\nGood catch.\nThanks for contributing!. LGTM!. Hi @GonzaloRecioG \nThanks for reporting!\nCould you please provide some test project with reproducing issue with repo steps?  This would really help to understand the reason of the issue and find approach for fixing it.\nThanks,\nAlexander. Hi @GonzaloRecioG ,\nSorry for long delay.\nAbout ignoring assets: I'm not sure about ignoring but You can use code-push release  command with setting path to file/folder which you would like to release.\nFor more info please check docs: https://github.com/Microsoft/code-push/tree/master/cli#releasing-updates-general\nThanks,\nAlexander. HI @ycman0307,\nThanks for reporting!\nIf I understand correctly you need deployment key for codePush?\nIf yes, for example, you can use this commands:\n\nappcenter codepush deployment add -a {UserName}/{ProjectNameInAppCenter} Staging\nappcenter codepush deployment list -a {UserName}/{ProjectNameInAppCenter}\n\nPlease for more information check documentation: https://docs.microsoft.com/en-us/appcenter/distribution/codepush/cli\nPlease let me know if it was helpful or you still have any questions.\nThanks,\nAlexander. I think that Microsoft docs have enough full steps for setup codePush for app.\nYou can start here: https://docs.microsoft.com/en-us/appcenter/distribution/codepush and go ahead with visiting internal links in steps.\nAlso you can use example project for setup: https://github.com/Microsoft/react-native-code-push/tree/master/Examples/CodePushDemoApp\nGood luck in studying and feel free to ask any questions!\nThanks,\nAlexander . Hi @ycman0307 ,\nI'll close this issue for now as I did not hear any questions from you. But please feel free to reopen it if you will have any questions.\nThanks.\nAlexander. Hi @shawnXiao ,\nSorry for long delay and yhanks for reporting!\nI investigated list of apps which have this vulnerability: https://zipperdown.org/ and I haven't found us there.\nSo, could you please clarify with more details in which place we have this vulnerability and what is exactly in our module?\nThanks,\nAlexander. Hi @Victoriayangx ,\nThanks for reporting!\nCould you please provide example of your using CodePush and logs?\nAlso would be great if you will provide test project with detailed reprosteps with reproducing issue. It can really help me reproduce issue and find the reason of issue.\nThanks,\nAlexander. Hi @Victoriayangx ,\nIs this issue still relevant for you?. Hi @Victoriayangx ,\nI'll close this issue for now as I haven't heard from you in a while. But please feel free to reopen it if you will have any questions or provide some additional info as I described above. \nThanks,\nAlexander. Hi @fatfatson ,\nThanks for reporting!\nAbout your 5 step: It shouldn't be as different deployments should have different deploymentKey.\nCodePush doesn't decide from which deployment should get updates. CodePush just use key for current build type. You should set different keys for different build types of your app.\nFor more information please check docs: https://github.com/Microsoft/react-native-code-push#multi-deployment-testing\nPlease let me know if it was helpful or I understand your incorrect.\nThanks,\nAlexander. Hi @fatfatson ,\nI'll close this issue for now as I haven't heard from you in a while unfortunately. But please feel free to reopen it if you will have any questions.\nThanks,\nAlexander . Hi @borkess ,\nThanks for reporting!\nCould you please provide more additional info:\n Versions of react-native-code-push and your react-native\n How do you use codePush in code\n* Would be great if you will provide test project with steps what did you do which can help me reproduce your issue.\nAlso please double check that you did all steps as in docs for getting started: https://github.com/Microsoft/react-native-code-push#getting-started\nThanks,\nAlexander\n. Good news!\nThanks for keeping in touch. I'll close this issue for now as it was resolved but please feel free to reopen it if you will have any questions.\nThanks,\nAlexander. Hi @duckscorpion13 ,\nThanks for reporting.\nDo you mean that you app can't be updated using 3G/3G network?\nIf yes please provide more additional info:\n Logs\n How do you use CodePush in your code\n Your react-native-code-push version\n Would be great if you will provide test project with detailed steps which can help me reproduce issue\nAlso, please double check that you have good 3G/4G connection.\nThanks,\nAlexander. @duckscorpion13  Good news =)\nSo, I'll close this issue for now as it was resolved. But please feel free to reopen it if you will have any questions.. Hi @sangdesigner ,\nCould you please fill issue template?\nhttps://github.com/Microsoft/react-native-code-push/blob/master/.github/ISSUE_TEMPLATE.md\nThanks,\nAlexander. Hi @sangdesigner,\nUnfortunately, it is difficult to help without your provided additional info as in issue template.\nCould you please fill it and provide to us as much additional info as possible? Any logs, code example, repro steps would really help to understand your issue. \nThanks,\nAlexander. @sangdesigner , if I understand you correctly you have issue with updating metadata at now?. Could you please provide details about it? Unfortunately I can't help you without details.\nYou can do it here or you can open new issue as it is separate issue.. I noted that you are using react-native-auto-updater. It is alternative project. So if you are just using react-native-auto-updater I think you should to ask your question in their repo: https://github.com/redbooth/react-native-auto-updater\nThanks,\nAlexander. Got it. So, if you don't have any issue with CodePush I'll close this issue for now. But please feel free to reopen it if you will have any question.\nThanks,\nAlexander. Hi @sangdesigner ,\nUnfortunately I didn't work with react-native-auto-updater and I don't know what is reason of issue =(\nI think that the best place where someone can help you with react-native-auto-updater is  react-native-auto-updater repo: https://github.com/redbooth/react-native-auto-updater.\nThanks,\nAlexander\n. Hi @MrChristofferson,\nThanks for contributing!\nGood catch!. Hi @yulianger ,\nThanks for reporting!\nThis issue arises if verifying hash folder is failed.\nCould you please provide as more additional info as possible using template: https://github.com/Microsoft/react-native-code-push/blob/master/.github/ISSUE_TEMPLATE.md ?\nAlso, Are you using codeSign for updates? (more info: https://github.com/Microsoft/code-push/tree/master/cli#code-signing) and It would be great if you will provide test project with reproducing issue with detailed repro-steps.\nThanks,\nAlexander. Hi @zhaoziliang and @yulianger ,\nI'm working on your issue. Could you please also share command for for releasing updates, using sign updates or not?\nAnd other details would be helpful. Please provide as much as possible.\nThanks,\nAlexander. @zhaoziliang , @yulianger also, could you please provide your release history?\nYou can use code-push deployment history <appName> <deploymentName> command for this.\nThanks,\nAlexander. @yulianger Could you please provide test project with detailed steps which can help me reproduce your issue? \nI can't reproduce it unfortunately.\nAlso, have you tried to use appenter cli for releasing? Docs: https://github.com/Microsoft/appcenter-cli (for example: appcenter codepush release-react -a <your-name>/<ProjectNameInAppCenter> -d Staging).\nThere was similar issue from user who fixed it using appCenter cli.\nPlease let me know if it was helpful or not.\nThanks,\nAlexander. Hi @yulianger and @zhaoziliang ,\nAre you still facing this issue?\nThanks,\nAlexander. Hi all,\nI'm going to close this issue for now as I haven't heard from you in a while and I can't reproduce it.\nPlease feel free to reopen it if you'll have any questions or you'll provide test project with reproducing issue.\nThanks,\nAlexander. Hi @jamessawyer ,\nThanks for reporting!\nI tried to reproduce your issue with your configuration but app successfully got update.\nCould you please provide logs for this and test project for reproducing issue with detailed repo steps? It can really help me reproduce your issue and find the reason.\nThanks,\nAlexander. Good news =) \nThanks for keeping us in touch.. Hi @kevindavee ,\nThanks for reproting!\nYesterday I created test app with ON_NEXT_RESTART and it worked correct. Possible it is wrong configuration or some specific case.  Could you please share your CodePush configuration in code, logs and platform? Also would be great if you will provide test project with reproducing issue and detailed repro steps.\nThanks,\nAlexander. About logs: You can start app from Xcode/AndroidStudio and see logs in output or use logcat command for android: https://developer.android.com/studio/command-line/logcat. @kevindavee  I tested your code example - no issue found. And --mandatory update installed by forcing restarting as @NickToropov noted.\nSo, if you would like to install your update on next restart you should use pushing update without --mandatory option or set install mode for mandatory updates as provide @NickToropov above.\nFor our recommendation use  --mandatory option only if you really need it. For more information please check docs: https://github.com/Microsoft/code-push/blob/master/cli/README.md#mandatory-parameter\nPlease let me know if it was helpful for you and it resolved your issue or not.\nThanks,\nAlexander. Hi @macbellingrath,\nThanks for contribution!\nGood catch!. Hi @piyush965 ,\nThanks for reporting!\nCould you please clarify did you get a chance to check this doc for windows setup: https://github.com/Microsoft/react-native-code-push/blob/master/docs/setup-windows.md ?\nPlease let me know If it isn't full for you or you have any question.\nThanks,\nAlexander. Hi @piyush965 ,\nGot it. Good catch. I'll investigate it and update doc a little bit later. Sorry for this long delay.\nThanks,\nAlexander. Hi @piyush965 ,\nSorry for long delay.\nCould you please clarify how exactly did you create your RN WPF application without UWP?\nAs I investigated RN WPF and found that it require UWP for creation.\nPossible you have some specific case and I would like to try it.\nThanks,\nAlexander. Hi @piyush965 \nI found the way to create wpf project without uwp and tested this case.\nCreated PR for updating doc: https://github.com/Microsoft/react-native-code-push/pull/1322\nThanks for suggestion about improving docs!\nThanks,\nAlexander. Hi @piyush965 ,\nSorry for long delay.  I'll investigate it and create doc for setup WPF a little bit later. \nThanks,\nAlexander. Hi @felipegr6 ,\nThanks for contribution!. Hi @tomauty ,\nThanks for reporting!\nCould you please clarify one moment:\n\ndownloads take quite some time\n\nHow long for about?  And in comparison with others?\nI'm not sure that there should be big difference in downloading but I'll investigate it on server side a little bit later.\nThanks,\nAlexander. Hi @tomauty ,\nI'll close this issue for now as I haven't heard from you in a while. Also I tested it and didn't found any big differences in time.\nPlease feel free to reopen it if you'll have any questions.\nThanks,\nAlexander. Hi @zxccvvv,\nThanks for reporting.\nYour request is in queue and we will investigate it a little bit later. Sorry for this delay.\nUPDATE:\nI reproduced this issue.\nThanks,\nAlexander. Hi @HsuWeiYu666 ,\nThanks for reporting!\nCould you please provide more info according with issue template?\nIt will help to understand what is going wrong as for now  It isn't enough information.\nThanks,\nAlexander . Hi @HsuWeiYu666 \nIf my translator is correct your issue was solved. So, I'll close this issue for now but please, feel free to reopen it if you'll have any questions.\nThanks,\nAlexander. Hi @brzonsea,\nThanks for reporting!\n\nCould this be a dependency issue? \n\nYes, I think it can be. I Investigate your logs and found that your app got permissions issue. I'm not sure that it is CodePush issue. Please check that you added all necessary permissions for your app.\nPlease let me know if it was helpful or could you please provide test project with detailed reprosteps which help me reproduce your issue?\nThanks,\nAlexander. Good news that your issue was resolved.\nI haven't seen compatibility issue with react-native@0.54 version before.\nAnd I can't to reproduce it.\nAnyway could you please test project or code example which can help me reproduce this issue for investigation?\nThanks,\nAlexander. Hi @brzonsea \nJust a friendly ping about reproducing demo.\nThanks,\nAlexander. Hi @brzonsea ,\nUnfortunately I'm going to close this issue for now as I haven't heard from you in a while.\nPlease feel free to reopen it if you have any questions or provide reproducing demo.\nThanks,\nAlexander. Hi @fungilation ,\nThanks for reporting.\nNo any mistakes. There is code changes in adding method API for Android: https://github.com/Microsoft/react-native-code-push/commit/201735ebad5ddac232be8ab6c96670c1b2102e07\nList of changes for this version is here: https://github.com/Microsoft/react-native-code-push/releases/tag/v5.3.5\nPlease let me know if you have any questions.\nThanks,\nAlexander. Hi @LuisRizo \nSorry for long delay.\nYeah, I think that react and react-native will be enough for code-push. But please don't forget that code-push also has dependencies: https://github.com/Microsoft/react-native-code-push/blob/master/package.json \nAbout native modules: You can't change native code throw CodePush as CodePush works just with JsBundles. For changing native code you should make new binary version of your app.\nCould you please clarify if it was helpful for you or you have any questions.\nThanks,\nAlexander. Hi @LuisRizo ,\nSorry for long delay.\nSo, if I understand you correctly, you would like to remove some native code from your app. \nFor this you should make new binary version with this changes and deliver it to your end-users. Before delivering you can also check that code-push work correct and try to update app on you test device. If I understand you correct you can sent some instructions to users with your app for getting this new binary version.  And then you can continue make updates with codepush.   \nPlease let me know if it was helpful or I understand your issue incorrect or you have any questions.\nThanks,\nAlexander. Hi @LuisRizo,\nThanks for this details!\nYeah, I got it. So, I think that it should works. It should not broke app If your new update will not use some installed plugin in your v1.4.0 app.\nBut I think it will be better if you'll test installing this update on your local device to ensure that all this works correct in your case if it is possible.\nI just tested it with test project and didn't find some issues.\nPlease let me know if it was helpful for you and then results of your work.\nThanks,\nAlexander. @LuisRizo I was glad to help.  You are always welcome :)\nSo, if question is answered I'm going to close this issue for now but please feel free to reopen it if you have any questions.\nAnd I will be waiting your result. \nThanks,\nAlexander. Hi @yangxiang1994,\nThanks for reporting!\nUnfortunately, We can't remove it at all as many users would like to setup deployment key with this approach.\nAnyway,  I found that link doesn't ask deployment key for Ios in case if it already exist. But in Android case link ask key for every calling.\nSo, I'll investigate and fix this. \nIf I understand you correct, you setup keys manually and in this case when I fix it link command doesn't ask keys. \nPlease let me know if this approach will block you anyway.\nI let you now when create PR for this.\nThanks,\nAlexander. Good news =)\nThanks for keeping us in touch.. Hi @prizoner627 ,\nThanks for reporting!\nCould you please provide test project with detailed repro steps which can help me reproduce this issue? \nThanks,\nAlexander . Hi @prizoner627 \nUnfortunately I'm going to close this issue as I haven't heard from you in a while. =(\nPlease feel free to reopen it if you have any questions or you provide test project for reproduce issue.\nThanks,\nAlexander. Hi @iosfitness ,\nThanks for reporting!\nCould you please provide more details about archiving? What exactly were commands you ran?\nThanks,\nAlexander. Hi @iosfitness ,\nSorry for delay.\nCould you please clarify what exactly approach have you used for installing code-push? rnpm, cocoaPods or manual? (https://github.com/Microsoft/react-native-code-push/blob/master/docs/setup-ios.md)\nAnd it s possible to provide test project with reproducing issue? \nThanks,\nAlexander. Hi @yupuyang ,\nThanks for reporting!\nCould you please provide context and more details for your question?\nThanks,\nAlexander. Hi @yupuyang,\nUnfortunately I'm going to close this issue as I haven't heard from you in a while. =(\nPlease feel free to reopen it if you have any questions or provide more details.\nThanks,\nAlexander . Hi @tsaohucn ,\nThanks for reporting!\nThere isn't any callback for customisation updateDialog buttons.\nBut you can use syncStatus for checking if update was ignored and add there your custom logic.\nPlease check example project for this: https://github.com/Microsoft/react-native-code-push/blob/master/Examples/CodePushDemoApp/App.js#L37\nPlease let me know if it was helpful or you have any questions.\nThanks,\nAlexander. Hi @tsaohucn ,\nUnfortunately I'm going to close this issue as I haven't heard from you in a while.\nPlease feel free to reopen it or open one more if you have any questions.\nThanks,\nAlexander. Hi @kaixiniOSTT,\nIf I understand you correctly you would like to make silence update without any pop-ups.\nCould you please check this example silence update from example project: https://github.com/Microsoft/react-native-code-push/blob/master/Examples/CodePushDemoApp/App.js#L71\nPlease let me know if you have any questions.\nThanks,\nAlexander  . Hi @kaixiniOSTT ,\nCould you please fill issue template: https://github.com/Microsoft/react-native-code-push/blob/master/.github/ISSUE_TEMPLATE.md with detailed description of your issue and provide more details like code samples, logs, test project with reproducing issue?\nThanks,\nAlexander. Hi @kaixiniOSTT ,\nUnfortunately I'm going to close this issue as I haven't heard from you in a while. \nPlease feel free to reopen it or open one more if you have any questions. \nThanks, \nAlexander . Hi @thecachedbyte \nThanks for reporting!\nCould you please clarify is it stable issue and you have only 2998272  bytes for all time or it was once?\nThanks,\nAlexander. Hi @thecachedbyte \nIt is strange issue. \nIs it possible to reproduce issue on your device? If yes, could you please share logs from AndroidStudio/adb logcat? Possible there can be more info about this issue.\nAlso, could you please provide your configuration for CodePush?  (It is like so: https://github.com/Microsoft/react-native-code-push/blob/master/Examples/CodePushDemoApp/App.js#L81)\nAnd could you please clarify have you tried to release one more update?\nThanks,\nAlexander. Hi @thecachedbyte ,\nSorry for long delay.\nThis is strange issue. Possible there can be some user-locally issue but I'm not sure for now.\nWhat is situation at now? Is there more number the same instances of issues?\nThanks,\nAlexander. @thecachedbyte , unfortunately it isn't so. In mismatch case there will be just error with logging this error massage. https://github.com/Microsoft/react-native-code-push/blob/master/android/app/src/main/java/com/microsoft/codepush/react/CodePushUpdateManager.java#L198\nBut yeah, I think that it will be better if plugin will try to download update one more time in mismatch case. Please let me investigate it more closer.\n. Hi @thecachedbyte ,\nThanks for this additional info. We'll investigate approach for adding several attempts to get update in mismatch size case.\nWe'll keep you in touch.\nThanks,\nAlexander. Hi @thecachedbyte and @jkk ,\nPossible do you have some more specified pattern of issue? Possible this is specific Samsung device or specific Android version/Samsung android shell version? Or something else that can help me reproduce issue? . @jkk , Thanks!\nCould you please clarify all issue devices have this issue or not? For example all Samsung S9, Android 8.0 have this issue? or some this devices can get update successfully?. @jkk, @thecachedbyte friendly reminder about my last question =). @thecachedbyte , Got it. Thanks. I think that calling one more downloading will not fix  issue with this behavior.  I should investigate it more.. @jkk , Sure! It will be useful if you find more information. Please keep us in touch.. Hi @thecachedbyte ,\nSorry for delay. No, it shouldn't affect updating app. Appcenter cli is just new cli with codepush and other managing appcenter. Code-push cli is just for CodePush and will be deprecated soon. This CLIs have same functionality.\nI thought that issue possible might be in byte counting on device  but after investigating counting logic I didn't found any issues.\nAlso I noticed by your message that all issue updates have less bytes then expected. Possible there is some network or device app stack(like os or some launchers) issue. Also possible there is some pattern about location, Do you have this information?\nYeah, you and @jkk just 2 who reported about this issue.\nAlso, Could you please provide more info about your hybrid app?. Hi @thecachedbyte,\nCodePush should catch any errors from CodePush logic and just print this error to console without any crashing app as CodePush should NOT break app for any reason. Or do you have info about exactly crashing app?\nOr do you mean just ignore this error? If so, I think it isn't good idea as I see that we have less bytes than we expected by your statistics: https://github.com/Microsoft/react-native-code-push/issues/1335#issuecomment-403189890. Possible it is mean that we loss something during getting update and behaviour for this case can be unexpected. But if you agree with that and would like to test it with your users I can remove this checking.\n. Hi @thecachedbyte and @jkk ,\nJust a friendly ping about my last question :) \nAnd is it the same behaviour?. Hi @thecachedbyte and @jkk ,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it.\nThanks,\nAlexander. Hi @vivek-walecha-657 ,\nI'm not sure about the reason. There may be many options: some network issue, local router issue, some Samsung launcher issue(as all issue devices is Samsung https://github.com/Microsoft/react-native-code-push/issues/1335#issuecomment-412535309).\nUnfortunately we still haven't found the real reason of this issue as we can't stably reproduce it.\n@vivek-walecha-657 Could you please clarify have you faced this issue too? If yes could you please provide info as much as possible.  For we should stable reproduce it for investigating and fixing it.\nThanks,\nAlexander. @vivek-walecha-657,\n I'm not sure that it can be the reason of issue. Have you found some changes of behaviour after  adding CodePush.setReactInstanceHolder(mReactNativeHost);?. Hi @vivek-walecha-657,\n\nCan you throw some light on the size mismatch?\n\nI don't have any big info about that but what kind of info would you like to get?\nIt would be really great if you find some pattern or something else that can help us reproduce this issue on us device for debugging this issue. Unfortunately without this info it is really hard to find real reason of issue.\nYou can just update code push react native SDK as npm package. npm update react-native-code-push. Please let me know if you waiting from me some other information.. Hi @vivek-walecha-657,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @krystofbe ,\nThanks for reporting!\nYeah, it is so because react-native has updated buildTools in @0.56 version. It is known issue. Fix in progress.\nThanks,\nAlexander. Hi @krystofbe  and @mouthzipper \nCreated PR for this: https://github.com/Microsoft/react-native-code-push/pull/1342\nCould you please test it when you get the chance?\nThanks,\nAlexander . Hi @xaviraol,\nDo you mean use project-wide properties? Yeah, It is good approach. Thanks for this.. Hi all,\n1342 is updates with project-wide properties.. Hi all,\nI'm going to close this issue as fix in master and already in new release.\nPlease feel free to reopen it if you have any questions or you face this issue again.\nThanks,\nAlexander. Hi @deehuey,\nThanks for reporting!\nYeah, it is so because react-native has updated buildTools in @0.56 version. It is known issue. Fix in progress.\nAlso, thanks for your investigation and suggested fix =)\nAs we have already issue for comparability with new version lets keep it in one place: https://github.com/Microsoft/react-native-code-push/issues/1336\nSo, I'll close this issue for now but please feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @krunalsshah,\nThanks for contributing!\nGood catch, thanks for updating docs! . Hi @showtan001  and @JslinSir ,\nThanks for reporting!\nCould you please share mectrics(installs, downloads) and your logs for this? Logs should be from checking updates to reopening app and getting previous version.\nThanks,\nAlexander. @iloveyumiforever , Could you please provide additional info which I described above? . @iloveyumiforever , Great to see that your issue was resolved. Thanks for keeping us in touch.\n@showtan001 I'm going to close this issue as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @krunalsshah \nThanks for contributing!\nGood catch!. Hi @shivawu ,\nThanks for reporting!\nUnfortunately It isn't possible to make diff with binary version for now as all diff logic working on server and there is calculating differences between updates. \nBut I think that it can be investigated as enhancement.\nLet me investigate it more closer.\nThanks,\nAlexander. Hi @shivawu ,\nSeems it isn't possible to implement for now as it isn't possible to install diff-update to binary version. And this is why the first update will be always full. After first full update it is possible to install diff-update on already installed update.\nI'm sorry to saying this. \nSo, I'm going to close this issue for now but please feel free to reopen it if you have any questions.\nThanks,\nAlexander. Yeah, it is possible to implement extra option and we can get diff with binary version but it will not fix this issue as we can't install this diff update on binary version, only full update. It isn't possible to mix updates and binary files fo now. That is reason that we install only full update for first installing.\nPlease let me know if you have any questions.. Hi @krystofbe \nThanks for testing!. Hi @rozele \nThanks for reporting!\nCould you please clarify have you tried to setup codepush for windows using this docs?\nhttps://github.com/Microsoft/react-native-code-push/blob/master/docs/setup-windows.md\nThanks,\nAlexander. Hi @rozele ,\nFor now react-native-code-push doesn't support link command for windows. For setup code-push to react-native-windows we have only manual approach which described here: https://github.com/Microsoft/react-native-code-push/blob/master/docs/setup-windows.md\nUnfortunately I'm going to close this issue as I haven't heard from you in a while.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @EdwardNickson ,\nThanks for reporting!\nYeah, we have this one: https://codepush.blob.core.windows.net\nSo, in general, Here is 3 codepush servers which should be allowed to your users: \nhttps://codepush.azurewebsites.net\nhttps://codepushupdates.azureedge.net\nhttps://codepush.blob.core.windows.net\nThanks,\nAlexander\n. Please let me know it was helpful for you or you have more questions.. Hi @zxccvvv ,\nThanks for reporting!\nYeah, update.isFirstRun will be true  as long as app will be reopened. I think that you should add some logic for prevent additional showing your Modal. You can add one more bool variable for checking if Modal already was shown or something like that.\nPlease let me know if it was helpful or you have any questions.\nThanks,\nAlexander. Hi @zxccvvv ,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @ErickMaeda ,\nThanks for contributing!\nGood catch. =). Hi @sankalpgoibibo ,\nThanks for reporting!\nUnfortunately I can't reproduce your issue. Could you please test project with reproducing issue and detailed repro steps?\nThanks,\nAlexander. Good news. \nThanks for keeping us in touch!. Hi @chocky335,\nThanks for reporting!\nUnfortunately I can't reproduce it. I made new update with image and successfully got image in app with CodePush.\nCould you please provide test project with reproducing issue and detailed repro steps? \nThanks,\nAlexander. > It started happening after upgrade to RN 0.56 maybe smth with dependencies\nYeah, it is possible.\nCould you please check that all your dependencies have been updated to versions that support RN@0.56?\nAlso, for my test I used just clear RN project (react-native init test command) then replace app.js like in example app: https://github.com/Microsoft/react-native-code-push/blob/master/Examples/CodePushDemoApp/App.js . Just removed image tag and image form images folder.  Made binary app. Then added image and tried to update on device. Successfully got update with image. \nPlease let me know if it was helpful.\nThanks,\nAlexander. Hi @chocky335 ,\nUnfortunately I'm going to close this issue as I haven't heard from you in while.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @lucianomlima ,\nThanks for reporting!\nYou can use both, just what you prefer. But in our recommendation is to use appcenter-cli.\nAt now there isn't any reason for deprecate it.\nIf there will be some deprecate deadline we will put this information in docs.\nPlease let me know if it was helpful or you have any questions.\nThanks,\nAlexander. Hi @AlirezaAkbarix ,\nThanks for reporting! \nI reproduce this issue only for this case: Started downloading, Lost internet connection(for test I used airplane mode), Stuck on it with CodePush.SyncStatus.CHECKING_FOR_UPDATE.\nBut I can't reproduce your case with stuck on  CodePush.SyncStatus.CHECKING_FOR_UPDATE. In this case I got correct error with internet connection.\nI'll investigate this issue with stuck on CodePush.SyncStatus.CHECKING_FOR_UPDATE.\nAbout CodePush.SyncStatus.CHECKING_FOR_UPDATE: Could you please provide detailed repro steps for getting error in this case?\nAlso please let me know you have any question.\nThanks,\nAlexander\n. @AlirezaAkbarix , Yeah, I reproduced it. This for described repro steps.\nI'll investigate it a little later and let you know. \nThanks,\nAlexander. Hi @chengkaigithub ,\nThanks for reporting!\nIt is interesting.\nCould you please clarify what type of asset did you use?\nThanks,\nAlexander\n. @chengkaigithub Got it. And after this changes you successfully got your image in app?. @chengkaigithub Thanks for this checking. Let me investigate this. \nAlso, Is it possible to provide some test project with reproducing issue? You can just create clear project with your picture?  For app.js file code you can use example form this repo: https://github.com/Microsoft/react-native-code-push/blob/master/Examples/CodePushDemoApp/App.js. Sure, Thanks for test project.\nI'll let you know about this results.. Hi @chengkaigithub ,\nUnfortunately I also can't run your app. At first I run ./offlinePackageRN.sh android andnpm i.\nThen I tried to run react-native link but got next Error:\n\nrnpm-install ERR! Something went wrong while linking. Error: ENOENT: no such file or directory, open '/Users/alexander.goncharov/Documents/TestPrimordialFuseRN/android/app/src/main/java/com/suixingpay/testmposrn/MainApplication.java' \nPlease file an issue here: https://github.com/facebook/react-native/issues \nENOENT: no such file or directory, open '/Users/alexander.goncharov/Documents/TestPrimordialFuseRN/android/app/src/main/java/com/suixingpay/testmposrn/MainApplication.java'\n\nAlso tried to run react-native run-android but got next error: \n\nScanning folders for symlinks in /Users/alexander.goncharov/Documents/TestPrimordialFuseRN/node_modules (16ms)\nAndroid project not found. Maybe run react-native android first?\n\nCould you please clarify if I miss something or could you please provide detailed steps for run your app?\nThanks,\nAlexander . Hi @ryanliszewski ,\nThanks for reporting!\nIs it possible to provide test project with reproducing issue and detailed repro steps?  as I can't reproduce it.\nAnd also, I see that this issue appears in Release. Could  you please clarify have you tested it in debug mode?\nThanks,\nAlexander. Hi @ryanliszewski ,\nJust a friendly ping about dummy project =). Hi @ryanliszewski ,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen this issue if you have dummy project or you have any questions.\nThanks,\nAlexander. Hi @alchy58 ,\nThanks for reporting!\nIt is strange issue.\nCould you please clarify this issue appears only after uploading in AppStore? Just for testing with Xcode no any issues?\nHave you some integrated bug tracker for your app? Is there some logs about this issue?\nIf I understand correctly this screen is empty until user reload app? and does it works correct after reload app?\nThanks,\nAlexander\n. Hi @mxc7609  and @buyuxing \nThanks for reporting!\nCould you please provide also command that you used for releasing update? \nAnd is it possible to provide test project with reproducing issue and detailed repro steps?\nThanks,\nAlexander. Hi @imankitaman \nThanks for reporting!\nCould you please provide test project with reproducing issue as I can't reproduce it?\nThanks,\nAlexander. Good news :) \nSo, if issue was resolved I'm going to close this issue for now but please feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @yeomann ,\nThanks for reporting!\nAs it is issue for appcenter-analytics and appcenter-crashes I think that it will be better if you will report this issue to according repo: https://github.com/Microsoft/AppCenter-SDK-React-Native\nIt will be faster to get response for you in those repo.\nPlease let me know if you have any questions.\nThanks,\nAlexander. Hi @krunalsshah ,\nSorry for long delay.\nThanks for contributing!. Hi @filbertteo ,\nThanks for reporting!\nYeah, that's alright to use CodePush as CodePush updates only web resources(JSBundle, images, etc) and does not change native code for app like Java(or Objective-C for ios).\nAnd this part of docs fully allow to use CodePush:\n\nThis restriction does not apply to code that runs in a virtual machine and has limited access to Android APIs (such as JavaScript in a webview or browser).\n\nPlease let me know if it was helpful for you or you have any questions.\nThanks,\nAlexander. Hi @krunalsshah,\nThanks for contributing!. Hi @noellaby ,\nThanks for reporting!\nIf I understand it correct you already fixed your issue?\nThanks,\nAlexander . @noellaby Glad to hear that your issue was resolved. Thanks for keep us in touch!. Hi @JesusTSeger ,\nThanks for reporting!\nYeah, You should update code-push plugin package, re-link it and create new native build(production) and deliver it to your users.\nPlease let me know if it was helpful or you have any questions.\nThanks,\nAlexander. Hi @iain-merrick-fanduel,\nThanks for contributing!\nWe'll investigate it as soon as possible. It is in queue. Sorry for delay.\nThanks,\nAlexander. Hi @iain-merrick-fanduel ,\nThanks for this suggestions but I have to prevent this PR for now as we trying to keep max sync with react-native build.gradle file. For now there is still compile: https://github.com/facebook/react-native/blob/master/ReactAndroid/build.gradle#L296\nI think we should to consider this pr in the future. But for now I'm going to close this PR.\nPlease let me know if you have any questions.\nThanks,\nAlexander\n. Yeah, we would like to support old Gradle versions too. And yeah, we will update it when it will be really necessary. We trying to support new and also old versions. . @iain-merrick-fanduel , I'm going to close this PR for now but return to it when it will be necessary to update 'compile'. \nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander . Hi @GregoryCollett,\nThanks for reporting!\nWe use \"Bug fixing\" text for small bugs. For big bugs or changes we add more info.\nFor example for 5.4.0 release \"Bug fixing\" is just fix this issue: https://github.com/Microsoft/react-native-code-push/issues/1272\nHope it was helpful for you.\nPlease let me know if you have any questions or suggestions.\nThanks,\nAlexander. @GregoryCollett , Sure. Pr attached in that issue. \nIt is this PR: https://github.com/Microsoft/react-native-code-push/pull/1332\nPlease let me know if you have any questions.. Hi @byk04712,\nThanks for reporting!\nGood news  =)\nSo, as issue was resolved I'm going to close this issue for now.\nPlease feel free to reopen this issue if you have any questions.\nThanks,\nAlexander . Hi @sidhusubhash ,\nThanks for reporting!\nCould you please provide your platforms and detailed reporsteps?\nThanks,\nAlexander. If you use pod install you don't have to use link command. And in the other side if you use link command you don't have to use cocoaPods. So, you should use only one of this approaches.\nPlease let me know if it was helpful you have any questions.. Good news =) \nThanks for keeping us in touch!. Hi @dkadlecek ,\nms docs already update: https://docs.microsoft.com/en-us/appcenter/distribution/codepush/react-native#plugin-installation-ios---cocoapods\nI'm going to close this issue for now as it was resolved.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @Jeijie,\nThanks for reporting!\nFor delete all releases in deployment you can use this command: appcenter codepush deployment clear -a <userName/appName> <deploymentName>\nAlso, If you have just one incorrect release(for example you have 2 release v1 and v2. v2 is incorrect) and you would like to rollback to v1 all users who has v2 then you can roll back v2 release. For this you can use this command: appcenter codepush rollback --target-release <releaseLabel>  -a <userName>/<appName> <deploymentName>\nPlease  let me know if it was helpful for you or have any questions.\nThanks,\nAlexander. I think that it is mean that question was answered.\nI'm going to close this issue for now but please feel free to reopen it if you have any questions.\n. Hi @gbachik ,\nThanks for reporting!\nThanks for test project! I just downloaded this project, run npm i, react-native link react-native-code-push, 'react-native run-ios` and successfully got update by clicking on your test button.\nI'm not sure what exactly wrong with your app but seems you setup all this correct and I don't see any issues. If your issue continue appears you can try to build and run app from Xcode just for test.\nPlease let me know if it was helpful or you have any questions or issue still appears.\nThanks,\nAlexander. @gbachik , \nYeah, You should choose setup approach from here: https://github.com/Microsoft/react-native-code-push/blob/master/docs/setup-ios.md\nRecommend approach is RNPM (link command) because this the fastest approach as it makes all manually steps automatically.\nIt is strange if Link command miss some steps.\nCould you please test this command on new clear project?\nFor this you can do next steps:\n1. Create  new React-native app: react-native init test, and go in project folder cd test.\n2. Create app in AppCenter: appcenter apps create -d test -o iOS -p React-Native, add deployment: appcenter codepush deployment add -a <userName>/test Staging and check deployment key: appcenter codepush deployment list -a <userName>/test\n3. Install CodePush: yarn add react-native-code-push --save and link it: react-native link react-native-code-push. For deployments key for ios you should use key from  appcenter codepush deployment list -a <userName>/test command. If you don't need Android just tap Enter for ignore it.\n4. Setup CodePush configuration. For this you can use App.js from example: https://github.com/Microsoft/react-native-code-push/blob/master/Examples/CodePushDemoApp/App.js (Just remove 109 line if you don't have Image )\n5. Sign your app with XCode.\n6. Run appcenter codepush release-react -a <userName>/test -d Staging for releasing update.\n7. Change App.js file(I recommend to change some text to see that your release was installed).\n8. Run your app and try to update. But please note that in debug mode you changes will not be applied as app will download Jsbundle from dev server. For fixing this you can run app in release mode or just close dev server for testing.  \nPlease let me know if it was helpful or you have some questions.\n . Good news =)\nThanks for getting us in touch!. Hi @antonsivogrivov ,\nThanks for reporting!\nCould you please share your issue schema?. Hi @iain-merrick-fanduel ,\nThanks for reporting!\nWe will investigate this issue a bit later. It is in queue.  Sorry for this delay.\nThanks,\nAlexander. Hi @hanford ,\nThanks for contributing!\nCould you please clarify more detailed what exactly is the reason of this line? What is this issue(would be great if you provide repro steps) and how this fixed it?\nThanks,\nAlexander. Hi @hanford ,\nSorry for this delay.\nCould you please provide detailed reprosteps or provide dummy project which can help me reproduce this issue(mean issue which appears without this changes)?\nI would like to investigate it more closer and test it. \n. @hanford , Yeah, That would be great. \nSo, I'll close this PR for now but please feel free to reopen it with reproduce steps when you have more time for this or if you have any questions.\nThanks,\nAlexander. Hi @gchallen,\nThanks for reporting!\nYeah, you right. If I understand your issue correct you would like to check version of update. I think that you should check label of release or just put information about version in description of release.\nLabel is a serial number of release for deployment. Just run appcenter codepush deployment history -a <userName>/<appName> <deployment> and check label column.\nFor putting some info in description field just use --description field during release.\nFor check this info in code you can use localPackage for getting metadata of release and check necessary field. For more info please check docs: https://github.com/Microsoft/react-native-code-push/blob/master/docs/api-js.md#localpackage\nPlease let me know if it was helpful or you have any questions. \nThanks,\nAlexander. Hi @gchallen ,\nI'm going to close this issue as I haven't heard from you in a while unfortunately.\nAlso, I hope that you questions was answered =)\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @lisong ,\nThanks for contributing!\nCould you please clarify more detailed about your PR? What exactly issue you solved with this PR and what approach have you used?\nIt can help make review for your PR faster.\nThanks,\nAlexander. @lisong , thanks.\nIt is logic changes and it require more time for investigate and test it. Sorry for this delay. \nPlease stay in touch. =)\n. Hi @betsun2017 ,\nThanks for reporting!\nCould you please fill issue template with more details? It can help us to understand issue faster.\nhttps://github.com/Microsoft/react-native-code-push/blob/master/.github/ISSUE_TEMPLATE.md\nThanks,\nAlexander. Hi @betsun2017 ,\nThanks for demo project.  I reproduce your issue. Also I tested ON_NEXT_SUSPEND on other dummy project, no issue found.\nI think that you issue that you use AppState for calling sync method.\nPlease let me know if it was helpful or you have any questions.. Hi @shubhnik ,\nThanks for reporting!\nThis is strange issue. Could you please share logs during update?. @shubhnik , Got it. It is strange behavior. Yeah, CodePush logs marked with [CodePush] tag. Could you please also check logs after reloading app? Possible there can be some Error or something else.\nCould you please also provide dummy project with detailed repro steps? It can help us reproduce issue.. Great! Thanks for keeping us in touch.\nSo, as issue was resolved I'm going to close this issue. Please feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @tlweiii6465 ,\nThanks for reporting!\nCould you please provide command which you used for release update? . Hi @tlweiii6465 ,\nSorry for this delay!\nIt is looks like to CodePush try to install release on device with enabled sign feature but your release wasn't signed. So, CodePush prevent installing this release.\nFor use sign feature you should add add private key for all releases. So your command should looks like so: appcenter codepush release-react -a Project-ios -d Staging -k private.pem\nPlease let me know if it was helpful or you have any questions.\nThanks,\nAlexander\n. > it detected an update package so is...\n@tlweiii6465, Could you please clarify what is \"it\"?\nYou can use create new deployment with this command: appcenter codepush deployment add -a <userName>/<appName> <deploymentName>\nor clean existing deployment with this command: appcenter codepush deployment clear -a <userName>/<appName> <deploymentName>\nAlso, before clearing your deployments could you please run this command: code-push deployment history <yourAppName> <yourTargetDeploymentName> --format=json\nYou'll see json with your releases. Find your issue release, download release package(for this use blobUrl filed), add .zip  for your downloaded file and unzip it. Please check your root folder. It should be CodePush name. Please let me know if it so or wrong.\nThanks,\nAlexander. @tlweiii6465, it is strange. Could you please provide test project with detailed repro steps which help me reproduce this issue?\nI would like to debug it.\nAnd please provide result of your root folder with steps from my last message.. Depends https://github.com/Microsoft/react-native-code-push/pull/1393. Hi @ricoharisin ,\nThanks for contributing!\nCould you please also provide repro steps for code version without your changes for your issue?\nI would like to reproduce and debug it as I can't reproduce it.. Hi @DavideValdo ,\nThanks for reporting!\nCould you please run this command: code-push deployment history <yourAppName> <yourTargetDeploymentName> --format=json\nYou'll see json with your releases. Find your issue release, download release package(for this use blobUrl filed), add .zip for your downloaded file and unzip it. Please check your root folder. It should be CodePush name. Please let me know if it so or wrong.\nThanks,\nAlexander. @DavideValdo ,\nThanks for keeping us in touch!\ncode-push cli is still operational but it will be deprecated soon. Our recommendation is using appcenter-cli.  . Hi @hungvu193 ,\nThanks for contributing!\nCould you please clarify what is problem with CodePushPublicKey when using constructor?. @hungvu193 , I just tested it and didn't found any issue. I created dummy project, integrated code-push with react-native link command and added code sign with constructor approach. Successfully got update. Here is dummy project: \nhttps://drive.google.com/open?id=1-Ja-lBedMP6aQ0sago2GWgMA-XiF1HI0\nPlease check it and let me know if I miss something or you have any questions.\n. Hi @hungvu193 ,\nI'm going to close this PR for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @dungnguyen10989 ,\nThanks for reporting!\nCould you please clarify what is your difficulty and issue?\nI mean like your steps and actual behavior.\nThanks,\nAlexander . Hi @dungnguyen10989 ,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @izarov,\nThanks for reporting!\nIs it possible to provide test project with configured Bluetooth?. Hi @izarov ,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it if your have any questions or you provide dummy project.\nThanks,\nAlexander. Hi @squirly ,\nThanks for contributing! . Hi @squirly ,\nSorry for this delay.\nI investigated it more closer and found that this changes affect users who still using Android Gradle Plugin less than 3.0.0 version. We are trying to support as much users as possible.\nBut you made good changes and a little later we will return to this PR and finish it. So, your efforts will not be lose.\nSo, for now I'm going to close this PR but please feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @kousun12,\nThanks for reporting!\nAbout Android problem: Could you please share your logs?\nAbout message: I can't reproduce it. There is correct message without any mentioning of mandatory update. Could you please share dummy project with repro steps? It helps me reproduce this issue.\nThanks,\nAlexander\n. @kousun12 , notifyAppReady already called in sync method. So you should call it one more time.\nCould you please share dummy project with repro steps? . Hi @kousun12 ,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander\n. Hi @carloscuesta ,\nThanks for reporting!\nI reproduced your issue. Link for Android always asks deployment key(even if it is provided). \nWe will investigate your issue a bit later. It is in queue. Sorry for this delay.\nI'll post status of progress. Please be in touch. :)\nThanks,\nAlexander. Yeah, you are right. I'll investigate and implement fix a bit later. It is in queue. Sorry for this delay.. Hi @carloscuesta,\nSorry for this delay.\nI implemented fix for this issue. Could you please test it?\nhttps://github.com/Microsoft/react-native-code-push/pull/1538. Hi @sundeepsingh12 ,\nThanks for reporting!\nI just retested react-native@0.57.1 version and haven't found any errors. This issue appears in case if CodePush can't set JsBundle. So, possible there can be other issue.\nCould you please provide dummy project with detailed reprosteps? \nThanks,\nAlexander. Also, could you please clarify what exactly version was used for creating app and releasing CodePush update? . Hi @sundeepsingh12 ,\nYeah, I reproduced issue with release build. Investigating.. @sundeepsingh12 ,\nCould you please provide logs during update, repro steps and some dummy project with reproducing issue?. Hi @jmcginty,\nYour PR already merged in Master. So, I'm going to close this issue for now.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @jmcginty ,\nThanks for contributing!\nWe'll review your PR a bit later. It is in queue. Sorry for delay.. Hi @jmcginty ,\nSorry for this delay!\nI reproduced this issue and tested your changes. This fix the issue.\nThanks for contributing!\nThanks,\nAlexander. Hi @schavaLogi ,\nThanks for reporting!\n\n\nAdded private key in string.xml (Android)\n\n\nPlease ensure that you added public key. Not private. As private should be existed only on developer-end and should be used for signing release with add -k option for CLI.\nAlso please ensure that you configured CodePush for using this public key as described here(2 paragraph): https://github.com/Microsoft/react-native-code-push/blob/master/docs/setup-android.md#code-signing-setup \nIf it was not helpful could you please add dummy project with reproducing issue?\nThanks,\nAlexander. @schavaLogi , Thanks for sample.\nAt first, you shouldn't get string from resources for public key. https://github.com/srinuch1981/ReduxNavigation/blob/master/android/app/src/main/java/com/reduxnavigation/MainApplication.java#L36\n For this you should add just id of this resource(without getString wrapper) to constructor. As if constructor gets id for this last parameter it will use it as public key. In string case constructor will use it as custom server for CodePush deployments and releases.\nPlease check logic with this changes and let me know it was helpful or issue is still here.. @schavaLogi , Yeah, it is expected because checking signing or not is configured on device end(not server) and even release is singed but device shouldn't check it, release should be installed.\nOn other side if signing is enabled on device side and release was not signed then release shouldn't be installed.\nI hope it was helpful for you :) . Hi @ferrannp,\nThanks for reporting!\nCould you please point setup approach? RNPM or manually? For more info please check this docs: https://github.com/Microsoft/react-native-code-push/blob/master/docs/setup-android.md#plugin-installation-android\nThanks,\nAlexander. Hi @bgold0,\nThanks for reporting!\nCould you please try to do next steps:\n1. close XCode(perhaps it worths to clear DerivedData folder)\n2. modify your Podfile according to this section: https://github.com/Microsoft/react-native-code-push/blob/master/docs/setup-ios.md#plugin-installation-ios---cocoapods\n3. execute pod install command\n4. open generated *.xcworkspace file in XCode\nPlease let me know if it fixed your issue or issue is still here.\nThanks,\nAlexander. Yeah, appcenter package using pods and that is reason of issue. Manual installation also helps.\nWe'll investigate this issue for link command. \nAs issue was resolved I'm going to close this issue for now. Please feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @lnfnunes ,\nThanks for reporting!\nCould you please also share logs during update?\nFor Android you can get it with Android Studio or with adb logcat command.\nThanks,\nAlexander. @lnfnunes , Thanks for logs and screens and sorry for delay.\nSo, I would like to clarify, your issue is that app doesn't installing update at all or just installing update only after restart app in case when should be installed IMMEDIATE?. @lnfnunes, Yeah, even IMMEDIATE setting has state when it waiting the restart as update can be applied only after restart. But in this case restart should be called from CodePush, not from user action.\nCould you please try to wait a few seconds in this state? The app should be restarted automatically.\nPlease let me know your results.. Hi @lnfnunes ,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease fell free to reopen it if you have any questions.\nThanks,\nAlexander . Hi @lnfnunes,\nSorry for delay.\nI investigated your app.js example, put it in my app and all worked correct.\nHere is my dummy proj with your app.js file. For setup it just unzip it and run yarn install.\nAlso, mandatory's install mode  is IMMEDIATE by default. So, you don't have to setup it here: https://gist.github.com/lnfnunes/9569912f1be3d89bc11cc21abdd8f470#file-app-js-L151\nPlease test my app and let me know your results.. Hi @lnfnunes ,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @jamessawyer ,\nThanks for reporting!\nSize of app should be increase noticeably only after first update. All next updates can increase the size of app but unnoticeably.\nCould you please provide dummy project with reproducing issue?\nThanks,\nAlexander   . Sure, you are always welcome =)\nJust a friendly ping about dummy project.. Hi @jamessawyer ,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @deecewan,\nThanks for reporting!\nIf you would like to make release from custom folder you should use appcenter codepush release command. But for this command you should keep bundle and assets in one folder as you should release folder with all necessary components.\nPlease let me know if it was helpful or you have any questions.\nAlso, I'm not sure that codepush require build/generated folder. Could you please share command which you used for release and error message?\nThanks,\nAlexander\n. Yeah, you are right. codepush.gradle generate hash with scripts/generateBundledResourcesHash.js file. No any native code calling.\nSo, I think that your workaround shouldn't break CodePush but it should be tested before.\nPlease let me know if it was helpful or you have any questions.. Hi @deecewan ,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @nitish1099 ,\nThanks for reporting!\nCould you please ensure that you have correct field of CodePushDeploymentKey in Info.plist?\nThere should be correct deployment key as from appcenter codepush deployment list -a {userName}/{appName} -k\nPlease let me know if it was helpful or you still have this issue.\nThanks,\nAlexander. Hi @ismailcse11 ,\nThanks for reporting!\nThis is react-native repo. Please open this issue in according repo: https://github.com/Microsoft/cordova-plugin-code-push/issues\nPlease provide also commands which you used for release update after opening new issue? \nThanks,\nAlexander. And I'm going to close this issue. Please feel free to ask any questions in according repo: https://github.com/Microsoft/cordova-plugin-code-push/issues. Hi @saranshagarwal ,\nThanks for reporting!\nIt looks like that you have some issue with setting bundle for IMMEDIATE but then it is set successfully after reloading.\nCould you please provide some dummy project with repro steps? I would like to debug it.\nThanks,\nAlexander . Sure, I'll try to reproduce issue with this example and let you know results.\nAlso, which approach have you used for installing CodePush?  With link command or manual?. Hi @krunalsshah ,\nThanks for reporting and sorry for this delay!\nSo, you would like to get update in background while app is minimised and then when user open app update should be installed. Is it correct?\nThanks,\nAlexander . @krunalsshah @vasanthk , I got it. Thanks. Yeah, unfortunately it isn't possible for now but we have this feature on our roadmap. I can't provide any ETA for now but i'll let you know any news about this. \nSo, I'm going to close this issue for now but please feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @krunalsshah ,\nThanks for reporting!\nIt is strange issue. Do you have any logs about that?\nThanks,\nAlexander. @krunalsshah , Yeah. It is strange. \nI'm not sure what is the reason of this behavior without any additional logs.\nCould you please clarify what is situation at now?\nAlso, if this issue still here I think you can make one more release for testing.\nAnd my recommendation is add some bug trackers for your app for knowing what is going in your app on user devices.\nThanks,\nAlexander  . Hi @krunalsshah ,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @afilp ,\nThanks for reporting!\nIt is strange issue. Could you please provide some dummy project with reproducing issue? I would like to debug it.\nThanks,\nAlexander. Hi @afilp ,\nSorry for delay.\nIt is strange issue as I have also com.nimbusds:nimbus-jose-jwt:5.1 and net.minidev:json-smart:2.3 in my dummy project and all works correct.\nCould you please share your android/app/build/intermediates/transforms/dexBuilder/debug/__content__.json file, build.gradle file from root folder and app/build.gradle file?\nI would like to reproduce your issue and investigate it.. Hi @AlMel3000 , @AndrewJack , thanks for providing workarounds.\nI reproduced issue. My investigation in progress.. Hi @LDty ,\nThanks for reporting!\nCould you please clarify provide more details about your issue. So, If path has only lowercase letters then you successful can use use 0001_0001_001.mp3 file. In case if uppercase letters exist in path you can't use 0001_0001_001.mp3 file after updating?\nThanks,\nAlexander\n. oh, I see. So your main issue that after using CodePush your files contains in folder like CodePush/<hash>/CodePush?\nIf it is so I would like to recommend you to use relative path if is possible instead of absolute path. It should fix your issue.\nPlease let me know if it was helpful or you have any issues.\nThanks,\nAlexander . Hi @LDty ,\nSorry for delay.\nSo, you would like to keep mp3 files as part of release but after updating app path to them is changed to lowercase. Is it correct?\nIs it possible to provide some dummy project with repro steps? I would like to debug it.\nAlso, you said that possible you should use another way. Do you have any ideas about this approach?. Hi @LDty ,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it if you have any questions or prepare dummy project.\nThanks,\nAlexander . Hi @monicse09ku ,\nThanks for reporting!\nBut I found that you already open same issue in code-push repo: https://github.com/Microsoft/code-push/issues/602\nSo, I'm going to close this issue for now as duplicate and continue conversation on original issue.\nPlease feel free to reopen if if you have any questions.\nThanks,\nAlexander\n. Hi @gabrielrolfsen,\nThanks for reporting!\nCould you please provide full logs and detailed reprosteps or dummy project with reproducing issue? as I can't reproduce this issue, all works fine for me.\nThanks,\nAlexander. hmm, so, you changed some UI part, made release and update was successfully installed. After that you made one more changes, made new release and update was not successfully installed. Is it correct? \nIf yes, could you please share this changes?  . @gabrielrolfsen , could you please ensure that you don't have any dev server running?\nAs for this case CodePush update will not be applied as React-Native just get code from your work machine.\nYou should run your app in Release mode or just close dev server.. Hi @gabrielrolfsen ,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @l1br3 ,\nThanks for contributing!\nWe will check your pull request a bit later. It is in queue. Sorry for this delay.\nThanks,\nAlexander . Hi @l1br3,\nSorry for long delay!\nI see that you save code changes from other items. I think that it can confuse users as this hide changes which require on current steps.\nCould you please clarify what exactly difficulties have you faced?. Hi @l1br3,\nI'm going to close this PR for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it by answering on question above and we will continue our work on this.\nThanks,\nAlexander. Hi @Spicely ,\nThanks for reporting!\nCould you please provide some dummy project with reproducing issue? I would like to debug.\nAt now, I think that issue can be in absolute path of your mp3 files. Could you please try to use related path if this possible?\nThanks,\nAlexander. @Spicely, @cq0702, Thanks for providing this example.\nCould you please clarify is it possible to provide full dummy project with configured music package and example music which possible to build and run without any additional settings?. Hi @Spicely, @cq0702,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it if you have any questions or provide a dummy project.\nThanks,\nAlexander. Hi @keshk26 ,\nThanks for reporting and sorry for delay.\nI'm not sure that your issue has any correlation to that issue(#1272).\nCould you please clarify what approach have you used for setup CodePush? Manual or with react-native link command?\nAlso, Your stack trace went from some place in your bundle. It is mean that this issue can be from other place, not exactly CodePush. Could you please clarify can you reproduce this issue stably?\nThanks,\nAlexander\n. Great! Thanks for keeping us in touch!\nFeel free to ask any questions.. Hi @KasperOlesenMagnetix,\nThanks for reporting!\nCould you please provide link or something like that to the place where X509TrustManager is used? . Hi @KasperOlesenMagnetix,\nSorry for delay.\nYeah, CodePushUpdateUtils.java uses X509EncodedKeySpec. But I'm not sure if this can be reason of this issue as you are only single reporter about this issue. Aslo, I see on your screen that issue package(If I correct understand Danish language on screen :)) is org.acra.util.NativeTrustManager but we are using instance of java.security.spec.X509EncodedKeySpec.\nCould you please run global searching in your project? There should be some more places which using X509.\nPlease let me know your results.\n. Got it. Thanks for letting us know!\nSo, I'm going to close this issue for now as this issue has nothing to do with CodePush.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @amrew,\nThanks for contributing and sorry for delay!\nCould you please describe some situation if someone can change downloaded code?. Hi @amrew,\nI'm going to close this PR for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it by answering on question above and we will continue our work on this.\nThanks,\nAlexander. Hi @tanmaybhatt,\nThanks for reporting!\nYeah, you are right. I reproduced it. Working on fix. Thanks.. @joaovpmamede, No, It isn't. I see that you opened new issue for this: https://github.com/Microsoft/react-native-code-push/issues/1483\nLet's continue our conversation there.. Hi @2hyjun and @tanmaybhatt,\nFix already in Master and in new Release: https://github.com/Microsoft/react-native-code-push/releases/tag/v5.5.1\nSo, I'm going to close this issue. Please feel free to reopen it if you have any questions or face this issue again.\nThanks,\nAlexander. Hi @baicuhaha,\nThanks for reporting!\nIf I understand correct your new update can't be applied and device rolls back to old version. Is it correct?\nCould you please provide logs during update?\nYou can grab it with AndroidStudio or adb logcat command. There should be logs with [CodePush] tag.\nPlease let me know if you have any questions.\nThanks,\nAlexander. oh, I see. It looks like that you running debug version with running dev server. Could you please try to close dev server or run release mode and try to update your app one more time?. Hi @s349856186,\nThanks for reporting!\nFor disabling confirmation dialog you should just add updateDialog: false to codepush settings.\nFull code example should be like so: \nsilentSync() {\n    CodePush.sync(\n        { updateDialog: false },\n        this.codePushStatusDidChange.bind(this),\n        this.codePushDownloadDidProgress.bind(this)\n    );\n}\nFor more info please check this docs: https://github.com/Microsoft/react-native-code-push/blob/master/docs/api-js.md#codepushoptions\nPlease let me know if it was helpful or you have any questions.\nThanks,\nAlexander. Hi @IceApriler,\nThanks for reporting!\nCould you please ensure that your app have plist.info in this path \"ios/operator-app/Info.plist\" or \"ios/Info.plist\"?. Sure, no worries :)\nThanks for keeping us in touch!. Hi @joaovpmamede,\nThanks for reporting!\nCould you please share your appDelegate.m file and do you have rollback metrics for this?\nThanks,\nAlexander. It is interesting.  Your appDelegate.m looks like correct. \nCould you please provide some dummy project with reproducing issue and reprosteps? I would like to debug it.. Yeah, sure. Just provide it when it's ready, thanks :). Hi @cmcaboy,\nThanks for contributing!\nCould you please provide some dummy project with reproducing issue or reprosteps? I would like to reproduce this issue and test your PR.. Hi @cmcaboy, \nI'm going to close this PR for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it by providing dummy project with reproducing issue and we will continue our work on this.\nThanks,\nAlexander. Hi @NULLPointerGuy ,\nThanks for contributing!\nYeah, you are right but multiple instances of ReactInstance Manager is just one issue of many possible issues. I think that this issue is not common issue to add this to the table as it can confuses some customers.\nSo, I'm going to close this PR for now but please feel free to reopen it if you have any questions, another thoughts or I missed something.. Hi @vrgimael ,\nThanks for reporting!\nNo, it isn't expected and strange issue. I just tested it on my test project and I can't reproduce it. All works correct for me.\nAlso, Staging deployment differs from Production deployment only in name and this names just default example names. You can create new deployment with any name.\nSo, Could you please try to release one more update and check if result is the same? Please let me know your results or if you have any questions.\nThanks,\nAlexander. Hi @vrgimael, just a friendly ping :) . Hi @vrgimael,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. @gengjiawen,  Could you please provide more detailed information about what is issue exactly and what is solution of this issue with fixing steps? As here isn't full information about your changes at now.. @gengjiawen ,Yeah, I have. :)\nI just would like to ask you to place here full information in PR description for understanding what is going on without looking in code. It helps other guys understanding your changes if they will investigate code and go in git history and PRs.\nYou can set it with Issue field and Solution field. Thanks!. Hi @gengjiawen \nI'm going to close this PR for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it by answering on question above and we will continue our work on this.\nThanks,\nAlexander. Hi @dgobaud,\nThanks for reporting!\nI reproduced this issue. Working on fix. I'll keep you updated on progress.\nThanks,\nAlexander. Hi @dgobaud ,\nPR https://github.com/Microsoft/react-native-code-push/pull/1501 already in Master and will be in the next release.\nSo, I'm going to close this issue for now. Please feel free to reopen it if you have any questions or face this issue again.\n. Hi @jhabdas,\nThanks for reporting!\nYeah, http://codepush.tools has expired but we replaced all this links with this one: https://microsoft.github.io/code-push/\nThis site is the same. So, you can use it as old site.\nI'm going to close this issue for now but please feel free to reopen it if you have any questions.\nThanks,\nAlexander\n. Hi @monicse09ku,\nThanks for reporting!\nCould you please share your logs during update?\nAlso, I marked that you use --targetBinaryVersion as *. Please ensure that there are not any conflicts with native part.. Hi @monicse09ku,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @ervivek40,\nThis is react-native-code-push repo but I see that you opened similar issue in cordova-plugin-code-push: https://github.com/Microsoft/cordova-plugin-code-push/issues/495\nSo, let's continue our conversation there.\nI'll close this issue as duplicate.\n. Hi @rnagella,\nThanks for reporting!\nUnfortunately it isn't possible to set specific label for release. It is implemented like this for preventing version confusion and CodePush just take last available version.\nCould you please describe why would you like to set specific label version?. Yeah, that is expected behaviour. Please check this comment for more info: https://github.com/Microsoft/react-native-code-push/issues/1512#issuecomment-458011417\nMy recommendation for your situation is using --description filed of release for putting some version information of your release and do not worry about label version as it is just for CodePush.\nPlease check this docs for more info: https://docs.microsoft.com/en-us/appcenter/distribution/codepush/cli#description-parameter\nAlso, you can add some global variable for version in JS code.\nI just would like to say that you shouldn't check you version by label in case if you are using promoting and your label can be changed for real code version in different deployments.\nPlease let me know if it was helpful of you have any questions. . Hi @rnagella,\nThanks for reporting!\nYeah, it is expected behaviour as numbering should starting from 1 for each deployment. It is require for keeping consistency for each deployments as CodePush just take the last available release by label. Costumers can promote promote release or make new release from cli and there should be increased version. But if CodePush will keep promoting version it can break consistency. \nMy recommendation for your situation is using --description filed of release for putting some version information of your release and do not worry about label version as it is just for CodePush.\nPlease check this docs for more info: https://docs.microsoft.com/en-us/appcenter/distribution/codepush/cli#description-parameter\nPlease let me know if it was helpful or you have any questions.\nThanks,\nAlexander. Hi @iamolegga,\nThanks for contributing!. Hi @itayga,\nThanks for reporting!\nCould you please provide some dummy project with reproducing issue and reprosteps? I would like to debug it.. Hi @itayga,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @alisn72,\nThanks for reporting!\nYeah, it is looks like internet request issue. Could you please check that app has all necessary permissions?\nIf it was not helpful could you please provide dummy project with reproducing issue and reprosteps?. @alisn72,  That's great!  Thanks for keeping us in touch and feel free to ping us on any issues!. Hi @bars0um,\nThanks for reporting!\nCould you please try to test this scenario with appcenter cli instead of code-push cli and let me know your results?\nPlease let me know if you have any questions.. Hi @bars0um,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @ryanlntn,\nThanks for reporting!\nI think that you can use --target-binary-version field for achieve your scenario. But then you should change binary version on every new build for tests. Please check this docs for more info: https://docs.microsoft.com/en-us/appcenter/distribution/codepush/cli#target-binary-version-parameter\nPlease let me know if it was helpful or you have any questions. Hi @ryanlntn,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @srishanbhattarai,\nThanks for reporting!\nSo, Your update haven't released to CodePush if there is some rollbacks in current deployment? Is it correct?\nCould you please ensure that your released your update in correct app and deployment. Also you can check it with UI in appcenter.ms.\nI just tested you case and all works correct for me.\nPlease let me know if you have any questions.\nThanks,\nAlexander. @srishanbhattarai , Sorry for delay.\nI tested your scenario with missed releases after rollback and all works correct for me.\nCould you please provide some dummy project with reproducing issue and reprosteps? I would like to debug missing releases and your rollback.. Hi @srishanbhattarai,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @boliveira,\nThanks for reporting!\nBy default CodePush doesn't use code signing feature. For enabling it you should just add CodePushPublicKey filed to you info.plist file for IOS or /strings.xml` file for Android.\nFor test it you can add this filed, release new update without signing with private key and try to install this update. You should get error.\nPlease let me know if it was helpful or you have any questions.. @boliveira, Could you please describe more detailed about server certificate public key? Where did you find it and how is it possible to reproduce it for me?. @boliveira, Yeah, got it. But CodeSigning should handle this.\nCould you please describe situation if someone can send a valid certificate?\n. Hi @boliveira,\nYeah, you are right. HPKP wasn't implemented because of code signing already handling this scenario and this should be enough for security and we don't have implementing HPKP on our roadmap for now. Sorry for this.\nPlease let me know if it was helpful or you have any questions.. Hi @isaaclem ,\nThanks for reporting!\nYeah, I reproduced this issue. It removes changes for android but not full changes. And for IOS it doesn't remove changes at all. Investigating.. Hi @xqwIOS ,\nThanks for reporting!\nPlease ensure that you successfully imported CodePush object. If it was not helpful could you please provide some dummy project with reproducing issue and reporsteps? I would like to debug it.. Hi @xqwIOS,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it if you have any questions.. Hi @TylerNRobertson,\nThanks for reporting!\nUnfortunately I can't reproduce it. I created new react-native project, installed code-push plugin, linked and used Android Studio for building and got successfully build.\nCould you please share some dummy project with reproducing issue? I would like to debug it. . @TylerNRobertson, got it. Thanks for keeping us in touch!\nPlease feel free to ping us if you have any questions or issues. . Hi @devyu ,\nThanks for reporting!\nYeah, That's strange issue. I just tested it on test project and all works fine for me. Could you please provide some dummy project with reproducing issue and reprosteps? I would like to debug it.. And what is your issue platform? (Android/IOS). @devyu, unfortunately I can't reproduce it.  Could you please provide some dummy project with reproducing issue and reprosteps? I would like to debug it.. @devyu , Thanks for demo project! I'll investigate it as soon as possible and let you know my results.. Hi @yasir-netlinks,\nThanks for reporting!\nCould you please provide info about how you use deployment key? Is it just in string.xml file? Or you used some global variable or something like this?\nMy suggestion is just your apk has issue with deployment key.. Hi @rvssvl,\nThanks for reporting!\nPossible your have some issue deployment key. Could you please share logs during update? You can grab it with AndroidStudio. There should be logs with [CodePush] tags.. Yeah, that's correct. THis implemented like so because CodePush can't update native code part. And for preventing native and js version conflicts. For example  if JS part call some native module which was removed in previous version.\nSo, everything is working correctly now? Do you have any other questions?. @yasir-netlinks , Yeah, code-push release-react command set --targetVersion as native version from build.gradle from android or from info.plist for IOS and you don't have to set additionally --targetVersion but you can to do it if you want change target version :)\nFrom client device side, Codepush check if --targetVersion of available update is correct(it also can be range of versions) for native version then CodePush downloads it.\nPlease let me now if it was helpful or you have other questions.. @yasir-netlinks For your case yeah, it breaks codepush as your target version is 1.0.0 and your binary version will be 1.0.1. Client CodePush part just check that versions mismatch and update should be downloaded. For fixing this your can set target version of update as 1.0(this equals 1.0.X). But this depends on your changes if this js bundle will work with this new bundle version then it's fine. Please be careful with versions and test this cases before promote it to your users.\nAbout description: This is just release description with some additional info which should be visible for developers but if you want you can also print it in update dialog window. For this you should use  descriptionPrefix of updateDialog option. For more info please check this docs: https://github.com/Microsoft/react-native-code-push/blob/master/docs/api-js.md#codepushoptions\nFor getting description message from release metadata you should use getUpdateMetadata method. For more info please check this docs: https://github.com/Microsoft/react-native-code-push/blob/master/docs/api-js.md#codepushgetupdatemetadata\nPlease let me know if it was helpful for or you have any questions.. @yasir-netlinks , Yeah, you think correct.  It's strange. It should be updated as this settings in jsBundle. CodePush just replace old jsBundle with new codePush jsBundle. Could you please ensure that your update contains this changes?\n. If you would like to check existing code in update bundle you should download this bundle from UI:\nGo to Distribute -> CodePush -> choose release -> \"Download bundle\" in the upper right corner.\nDownloaded file will contain JSBundle file and check it there.\nPlease let me know your results or if you have any questions. \n. Hi @yasir-netlinks,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @JonsonHI,\nThanks for reporting!\nI just tested your case with your versions and successfully got update even after reload app.\nCould you please share your logs during update? There should be logs with [CodePush] tags.. > codepush main.jsbundle Can I replace it?\nYeah, you can. You should just put the other path to your bundle for --bundle-output argument.. oh, yeah, sorry, missed logs. I don't see any issues. It looks like your update was installed but path to update was broken after reopen. It is strange.\nI'm not sure that path to your jsbundle can conflict with CodePush as release-react command make new own bundle and release it.\nIf you would like to release exactly your generated bundle you should use release  command.\nCould you please provide some dummy project with reproducing issue and reprosteps? I would like to debug it.. Hi @JonsonHI,\nI'm going to close this issue for now as you confirmed that this issue was resolved.\nhttps://github.com/Microsoft/react-native-code-push/issues/1533#issuecomment-468506926\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @zhoujunwei,\nThanks for reporting!\nI see that error text doesn't according to some CodePush issue. Possible It is some external issue. Could you please ensure that this issue was occurred because COdePush? You can just remove CodePush and try to run again.\nPlease let me know you results.. @zhoujunwei CodePush updates just JS code part and resources like images. So, you should configure it just for react-native project.. @zhoujunwei, Could you please clarify have you used link command for setup CodePush or manual approach?\nAnd could you please provide some dummy project with reproducing issue and reprosteps? I would like to debug it.. Hi @zhoujunwei ,\nI'm going to close this issue for now as I haven't heard from you in a while unfortunately.\nPlease feel free to reopen it if you have any questions.\nThanks,\nAlexander. Hi @rohit95kumar,\nThanks for reporting!\nCould you please ensure that this issue is from CodePush plugin? You can just remove this plugin and try to run your app again. . @rohit95kumar, yeah, I understand it. I mean that we should to ensure that this issue is not from CodePush plugin. Possible there is some other issue as I don't see any CodePush files in logs.\nIf you remove CodePush plugin and successfully log in without issue I think in this case CodePush affect some parts. But at first we should ensure it.. @JonsonHI so, was your issue #1530 fully fixed?. Hi @JonsonHI,\nCould you please describe your issue more detailed and why you would like to change AppDelegate.m by this way?. Yeah, I see. But I think this code part is not from CodePush as this should be created by react-native project. Could you please share place where you got this code part?\nAlso, new react-native@0.59 version uses initWithBridge method in AppDelegate.m file.. Hi @GioLogist,\nThanks for reporting!\nCould you please provide more detailed reprosteps or some dummy project with reproducing issue and reprosteps? I would like to reproduce it and debug.. Hi @GioLogist , Just a friendly ping :). Hi @deepueg,\nThanks for contributing!. Hi @raphaeleidus,\nThanks for contributing!\nWe will investigate it a bit later as soon as possible. Sorry for delay.. Hi all,\nWe implemented fix for link logic for react-native@0.59 and released new version of CodePush plugin: https://github.com/Microsoft/react-native-code-push/releases\nSo, I'm going to close this issue for now but please feel free to reopen it if you have any questions or face this issue again.\nThanks,\nAlexander. Hi @telmen ,\nThanks for reporting!\nCould you please clarify more details of approach which you used for creating apk?. @telmen That's great that your issue was resolved. Thanks for keeping us in touch!. Hi @acollazomayer ,\nThanks for reporting!\nUnfortunately I can't reproduce it as 59 version works correctly with CodePush plugin. Possible there is some issue with upgrading your project. Could you please share some dummy project with reproducing issue and reprosteps? I would like to debug it.. oh, I see. Could you please try to upgrade also react-native-code-push plugin?. Hi @zhazhangjun ,\nThanks for reporting!\nCould you please share your CodePush settings from JS code part?. Hi @yinxh2016,\nLooks like your binary app has 1.0.0 binary version and target-binary-version field is mean that specified version which should be use for install current update.\nFor more info please check this docs: https://docs.microsoft.com/en-us/appcenter/distribution/codepush/cli#target-binary-version-parameter\nPlease let me know if it was helpful or you have any questions.\nThanks,\nAlexander. Yeah, we can, but we have some cases when resolveInstanceManager() has errors. In this case we should use clearDebugCacheIfNeeded with null argument. I think that adding this logic into next try-catch block is unnecessary as it make it more difficult for understanding. \nCould you please share your thoughts about it?  . Yeah, good suggestion. Thanks. I added comments. . Could you please add removing of unzipped folder like in Master? \nFileUtils.deleteFileAtPathSilently(unzippedFolderPath);\nFrom here: https://github.com/Microsoft/react-native-code-push/blob/master/android/app/src/main/java/com/microsoft/codepush/react/CodePushUpdateManager.java#L234. @krunalsshah , yeah, That's great! You made the good thing that you've added removing unzippedFolderPath before Error. But in the successful case(without any Error) unzipped folder will not be deleted at all. But it should be deleted after coping context.\nPlease correct me if I missed something.. @krunalsshah Thanks!. If you mean just the last brace then it is mean that you added new line at the end of file. Possible it is so because your automation code-style generator added this new line.. Could you please clarify why are you using compileOnly here for react-native?. @iamolegga,\nJust small nit: Could you please put LocalPackage before null as LocalPackage is main type.. @iamolegga, just a friendly ping :). ",
    "anback": "I got it working now when i reinstalled everything, closing issue\n. ",
    "CarlosLCervantes": "Seeing this today from the cli\n. Any command that needed to hit the codepush server was failing with this.\nI was able to diagnose it as an issue with our network. For some reason a DNS lookup to codepush.azurewebsites.net was failing for every box in our network.\nI was able to push my updates out by tethering to my phone call network.\n. ",
    "mvayngrib": "awesome, thanks for the speedy reply\n. it would be good to have fine control in addition to percentages. Off the top of my head, in the app you can set an id for the installation:\njs\nCodePush.setID('..some stable device identifier..')\nthen on the dev end something like:\nbash\ncode-push ls-devices <appName> ...\nand then during the push, you could push updates to specific users or groups of users by ID.\n. something like https://github.com/mafintosh/browser-sync-stream could really minimize the update size. I mean the approach, not necessarily the module itself\n. @lostintangent when does Code Push decide that an update was unsuccessful? For example, if I call sync() a minute after the app loads, is that too late?. @silhouettes cool, that's more or less what I figured, but really appreciate for the in-depth answer!. oof, my bad for not checking the docs well enough. It's described in https://github.com/Microsoft/react-native-code-push#multi-deployment-testing\nso something like this i imagine (in build.gradle)\n/// from: https://pilloxa.gitlab.io/posts/safer-passwords-in-gradle/\ndef getPassword(String currentUser, String keyChain) {\n   def stdout = new ByteArrayOutputStream()\n   def stderr = new ByteArrayOutputStream()\n   exec {\n       commandLine 'security', '-q', 'find-generic-password', '-a', currentUser, '-s', keyChain, '-w'\n       standardOutput = stdout\n       errorOutput = stderr\n       ignoreExitValue true\n   }\n   //noinspection GroovyAssignabilityCheck\n      stdout.toString().trim()\n}\n...\ndef codePushStagingKey = getPassword(\"<accountName>\", \"android_code_push_staging\")\ndef codePushProductionKey = getPassword(\"<accountName>\", \"android_code_push_production\")\n...\nandroid {\n    buildTypes {\n        debug {\n            ...\n            buildConfigField \"String\", \"CODEPUSH_KEY\", \"\\\"${codePushStagingKey}\\\"\"\n            ....\n        }\n        release {\n            ...\n            buildConfigField \"String\", \"CODEPUSH_KEY\", \"\\\"${codePushProductionKey}\\\"\"\n            ....\n        }\n    }\n}\n. @sagark1510 @NickToropov could you share the fix diff? I'm experiencing a similar issue. ",
    "shawnXiao": "https://facebook.github.io/react-native/docs/running-on-device-ios.html\n\nNote that on 0.14 we'll change the API of react-native bundle. The major changes are:\nAPI is now entry-file  based instead of url based.\nNeed to specify which platform you're bundling for --platform .\nOption --out has been renamed for --bundle-output.\nSource maps are no longer automatically generated. Need to specify --sourcemap-output \n. \n",
    "willchu": "Thanks @lostintangent! Do you have a time estimate for when you would release a fix? It would be really helpful. \n. ",
    "skevy": "All that needs to happen is to import RCTBridge+Private.h\n. Fixed in https://github.com/Microsoft/react-native-code-push/pull/139\n. @lostintangent I think that's fine. Probably better. When we get a few versions down the line, we can use RCTBridge+Private.\n. FYI: https://github.com/facebook/react-native/commit/c9a1956c4fd9cfb6bf883c835b501d097181e1a4\n. Hmm. Probably should. Let me check on that and I'll report back.\n. Added: https://github.com/facebook/react-native/issues/5762\n. Np. This fix got turned around pretty quickly...but if you ever have a critical bug in the future, don't hesitate to ping me on the issue/PR. Sometimes super critical stuff can get lost in the fray. Code-push is great...want to make sure we keep it running with each release :)\n. For further information, see here: https://github.com/facebook/react-native/issues/4844#issuecomment-204035720\n. ",
    "joenoon": "@lostintangent Oh nice, I missed #139 !  It looks like the RCTBridge+Private.h file has only been around since Dec 15, 2015, so yes I guess this PR would be better for backward compatibility.  Its too bad because I like #139 more!\n. ",
    "falsecz": "duplicate https://github.com/Microsoft/react-native-code-push/issues/138\n. ",
    "deju": "@lostintangent  iOS, and the version of React Native is 0.14.2.\n. @lostintangent  The CodePush version is 1.5.2-beta. i will update the React Native ang try it. thank you!\n. Yes, i updating. I will let you know the result after trying it!  Thank you!\n. @lostintangent sorry, i have updated the latest version of RN and occur some problems, so i need fix it. I am fixing now... I were in hospital yesterday. sorry\n. @lostintangent It is OK now. The error was disappered. RN(v0.14->0.17), Node(v4.x-> v5.x), npm(v2.x->3.x). I am testing the function now.\n. @lostintangent The version in the Info.plist is 1.0.0. Am i change the version to 1.0.27? Are there need i rebuild the app and resubmit to appstore?\n. @lostintangent  Ok, it is all right. Thanks.\n. ",
    "israrwz": "I'm still getting this error with following versions:\n    \"react-native\": \"^0.49.2\",\n    \"react-native-code-push\": \"^5.1.3-beta\",\n\n. Unfortunately https://github.com/Microsoft/react-native-code-push/issues/790#issuecomment-294148452 didn't help either.. with further debugging, I was able to find a detailed version of the exception:\nTypeError: Cannot read property 'slice' of undefined\n    at new AcquisitionManager (http://192.168.0.80.xip.io:8081/index.bundle?platform=ios&dev=true&minify=false:129592:29)\n    at getPromisifiedSdk (http://192.168.0.80.xip.io:8081/index.bundle?platform=ios&dev=true&minify=false:128960:13)\n    at checkForUpdate$ (http://192.168.0.80.xip.io:8081/index.bundle?platform=ios&dev=true&minify=false:128805:17)\n    at tryCatch (http://192.168.0.80.xip.io:8081/index.bundle?platform=ios&dev=true&minify=false:12910:40)\n    at Generator.invoke [as _invoke] (http://192.168.0.80.xip.io:8081/index.bundle?platform=ios&dev=true&minify=false:13098:22)\n    at Generator.prototype.(anonymous function) [as next] (http://192.168.0.80.xip.io:8081/index.bundle?platform=ios&dev=true&minify=false:12935:21)\n    at tryCatch (http://192.168.0.80.xip.io:8081/index.bundle?platform=ios&dev=true&minify=false:12910:40)\n    at invoke (http://192.168.0.80.xip.io:8081/index.bundle?platform=ios&dev=true&minify=false:12968:20)\n    at http://192.168.0.80.xip.io:8081/index.bundle?platform=ios&dev=true&minify=false:12976:13\n    at tryCallOne (http://192.168.0.80.xip.io:8081/index.bundle?platform=ios&dev=true&minify=false:12266:12)\nlogging.js:3 [CodePush] Cannot read property 'slice' of undefined\nBut I have no idea how to fix it.. No.\nThe only Codepush related values in my info.plist are:\n<key>CodePushDeploymentKey</key>\n    <string>**********************************my key</string>\nand \n<key>NSAppTransportSecurity</key>\n    <dict>\n        <key>NSExceptionDomains</key>\n        <dict>\n            <key>codepush.azurewebsites.net</key>\n            <string/>\n            <key>codepush.blob.core.windows.net</key>\n            <string/>\n            <key>codepushupdates.azureedge.net</key>\n            <string/>\n            <key>localhost</key>\n            <dict>\n                <key>NSExceptionAllowsInsecureHTTPLoads</key>\n                <true/>\n            </dict>\n        </dict>\n    </dict>. Unfortunately our project is a huge one and we added code-push at the end of our project development. \nInitially I had manually integrated codepush in Xcode, I thought that could have been the issue. But the issue persists even when I installed using CocoaPods.. First off that code in my version of CodePush.m is at line 685\nand it doesn't seem to have any configuration data.\nattached is the screenshot of breakpoint:\n\n. So what could be the reason for this function not picking the serverUrl value?. Finally fixed it :)\nThe issue was that I had only set the Version number but not the Build string in the identity settings of general pane in xcode.\nIt is working fine now.\n. ",
    "qbig": "That sounds great! I did felt puzzled trying to upload apk files while doc mentions that only js and images could be updated. I guess it is specially confusing for people with Android or iOS background\n. How about \"jsPackage\" ? So that it doesn't change much for Cordova users but for RN users it set itself apart clearly from apk or ipa files, which is the major source of confusion.\n. Sounds good to me. Definitely better than \"package\"\n. @lostintangent no:) Thanks to you! Really appreciate it.\n. ",
    "jedlau": "Problem doesn't exist in react-native-code-push@1.5.3-beta.\n. ",
    "JRJian": "Hey @lostintangent , how do you fix it?\n. finally, i found the solution in #139 ! thks\n. ",
    "fakefish": "Thanks\nFor the question, I think it should be getting the same CodePush update while debugging.\n. I want to see if my app version is older then release version, what the operate flow is.\n. Thanks, I have already do in this way.\n. ",
    "virtoolswebplayer": "check my code\ntest react-native  0.17.0  + react-native-code-push 1.5.3-beta  on android\ndownload is ok -> auto restart  -> alert me 'codepushDemo has stopped', -> manually restart the app -> app is up to date , but not apply update \nmybundle.sh\n``` bash\n!/usr/bin/env bash\nrm -rf ./release/*\nreact-native bundle --platform android  \\\n--entry-file index.android.js  \\\n--bundle-output ./release/index.android.bundle  \\\n--dev false\ncode-push release testandroid  ./release 1.0.0\n```\nMainActivity.java\n``` java\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        mReactRootView = new ReactRootView(this);\n    codePush = new CodePush(\"this my key \", this, BuildConfig.DEBUG);\n\n    mReactInstanceManager = ReactInstanceManager.builder()\n            .setApplication(getApplication())\n            .setJSBundleFile(codePush.getBundleUrl(\"index.android.bundle\"))\n            .addPackage(codePush.getReactPackage())\n\n            .setJSMainModuleName(\"index.android\")\n            .addPackage(new MainReactPackage())\n\n            //.setUseDeveloperSupport(BuildConfig.DEBUG)\n            .setInitialLifecycleState(LifecycleState.RESUMED)\n            .build();\n\n    mReactRootView.startReactApplication(mReactInstanceManager, \"codepush\", null);\n\n    setContentView(mReactRootView);\n}\n\n```\ncrossplatformdemo.js\n``` javascript\n'use strict';\nimport React, {\n  AppRegistry,\n  Dimensions,\n  Image,\n  StyleSheet,\n  Text,\n  TouchableOpacity,\n  View,\n} from \"react-native\";\nimport Button from \"react-native-button\";\nimport CodePush from \"react-native-code-push\";\nlet CodePushDemoApp = React.createClass({\n  async sync() {\n    let self = this;\n    try {\n      return await CodePush.sync(\n        { \n          updateDialog: true,\n          installMode: CodePush.InstallMode.IMMEDIATE\n        }, \n        (syncStatus) => {\n          switch(syncStatus) {\n            case CodePush.SyncStatus.CHECKING_FOR_UPDATE: \n              self.setState({\n                syncMessage: \"Checking for update.\"\n              });\n              break;\n            case CodePush.SyncStatus.DOWNLOADING_PACKAGE:\n              self.setState({\n                syncMessage: \"Downloading package.\"\n              });\n              break;\n            case CodePush.SyncStatus.AWAITING_USER_ACTION:\n              self.setState({\n                syncMessage: \"Awaiting user action.\"\n              });\n              break;\n            case CodePush.SyncStatus.INSTALLING_UPDATE:\n              self.setState({\n                syncMessage: \"Installing update.\"\n              });\n              break;\n            case CodePush.SyncStatus.UP_TO_DATE:\n              self.setState({\n                syncMessage: \"App up to date.\",\n                progress: false\n              });\n              break;\n            case CodePush.SyncStatus.UPDATE_IGNORED:\n              self.setState({\n                syncMessage: \"Update cancelled by user.\",\n                progress: false\n              });\n              break;\n            case CodePush.SyncStatus.UPDATE_INSTALLED:\n              self.setState({\n                syncMessage: \"Update installed and will be run when the app next resumes.\",\n                progress: false\n              });\n              break;\n            case CodePush.SyncStatus.UNKNOWN_ERROR:\n              self.setState({\n                syncMessage: \"An unknown error occurred.\",\n                progress: false\n              });\n              break;\n          }\n        },\n        (progress) => {\n          self.setState({\n            progress: progress\n          });\n        }\n      );\n    } catch (error) {\n      CodePush.log(error);\n    }\n  },\ngetInitialState() {\n    return { };\n  },\nrender() {\n    let syncView, syncButton, progressView;\nif (this.state.syncMessage) {\n  syncView = (\n    <Text style={styles.messages}>{this.state.syncMessage}</Text>\n  );\n} else {\n  syncButton = ( \n    <Button style={{color: 'green'}} onPress={this.sync}>\n      Start Sync!\n    </Button>\n  );\n}\n\nif (this.state.progress) {\n  progressView = (\n    <Text style={styles.messages}>{this.state.progress.receivedBytes} of {this.state.progress.totalBytes} bytes received</Text>\n  );\n}\n\nreturn (\n  <View style={styles.container}>\n    <Text style={styles.welcome}>\n      ios and anroid version 2.7\n    </Text>\n    {syncButton}\n    {syncView}\n    {progressView}\n  </View>\n);\n\n}\n});\nlet styles = StyleSheet.create({\n  image: {\n    marginTop: 50,\n    width: Dimensions.get('window').width - 100,\n    height: 365 * (Dimensions.get('window').width - 100) / 651,\n  },\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    backgroundColor: '#F5FCFF',\n    paddingTop: 50\n  },\n  welcome: {\n    fontSize: 20,\n    textAlign: 'center',\n    margin: 10\n  },\n  messages: {\n    textAlign: 'center',\n  },\n});\nAppRegistry.registerComponent('codepush', () => CodePushDemoApp);\n```\n. thanks a lot ' it's ok !!  please close this issues\n. ",
    "kamek-pf": "Hey, sorry to bump this @lostintangent , but :\n\nOn Android, React Native forces the JS bundle to be loaded from the packager\n\nI also ran into this, and it's quite confusing that the updates aren't applied as you'd expect when in development mode. \nI spent a fair part of the day trying to understand what I did wrong. Turns out everything was set up correctly, but it took me a while to figure it out.\nI feel like this should be mentioned in the docs.\nOther than that, very nice tool, keep up the good work !\n. ",
    "ecjs": "+1 For this..I am just getting started with React Native + Code Push, and got held up here.\n. \nIs this a problem with React 0.18.0 or something that I did wrong during setup?\n. Seeing how RN 0.19 was released, it would be awesome to see this merged.  Thanks for the great work on this, loving it so far.\n. No problem, sounds good! \n. ",
    "alexlau811": "Wow! Your action is just so quick and that PR is super great. Thank you so much!\n. ",
    "arjunkomath": "@lostintangent It worked :) I went with first method and updated to 1.6.0-beta. Thank you!\nIt would be great if you could mention this in the documentation for codepush.sync() https://github.com/Microsoft/react-native-code-push#codepushsync\n. ",
    "respectTheCode": "Any progress on this? RN 0.19 has been released.\n. ",
    "gnestor": "It works! Great. Thanks @lostintangent and feel free to close.\n. ",
    "oblador": "Thanks for the quick reply/merge. Do you guys have a release schedule (referencing the git repo doesn't work since it depends on an unreleased version of code-push)?\n. Perfect, thanks :-)\n. That works :+1:\n. ",
    "ianwalter": "Oh I missed that PR. Thanks, that fixed it!\n. ",
    "JeanLebrument": "Yes definitely! I can do the trick using my back-end: Segment users in two\ngroups. The first one is composed of 20% of my users and the app is updated\neach time a new release is available. For the other group, the app will\nrely on a boolean value set from the backend to do the update or not.\nCould be an option but definitely less convenient than handling this\nfeature from your side!\nOn Tue, Feb 2, 2016 at 10:45 PM Jonathan Carter notifications@github.com\nwrote:\n\nThis is high up on our todo list, but it isn't currently possible\nunfortunately :( Would this be a compelling feature for you? Any feedback\nhere would help us prioritize the work :D\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/174#issuecomment-178843649\n.\n. Hey @lostintangent \n\nThanks for your interest on this ticket! \nI guess for now, a simple solution should do the job. The two command lines you proposed seem cover the need. \n- Would you want to be able to decrease the rollout fraction for any reason?\nI don't think I would need such a feature. If a rolled out version is buggy, I would revert to the last stable version until a new version fixes the bug rather than decrease the number of users on the bugged version.\n- Additionally, would you want to be able to release new updates while there was a rollout currently active (not 100% distribution), or would it make sense to restrict releases until an rollout has \"completed\"?\nIt makes more sense to me to restrict releases until a rollout has \"completed\". Having too many fragmented versions over the users could be really painful to manage.\n- Your previous comment also seemed to indicate that you were thinking about the rollout segmentation spanning multiple releases as opposed to an individual release. Is that accurate?\nNot really. Exemple of what I was thinking: Let's assume that I have a version 1.0.0 released to all my users, then I worked on a new version (let's call it 1.1.0) with fixes and a couple a new features. I want to test this new version on 10% of my users just to sure that it's stable. If so, I will progressively increase the percentage until 100%. Otherwise I will revert all the users to the version 1.0.0 waiting the new version to be fixed.\nFeel free if you need further informations.\n. I'm glad that it helped and good job for the tool!\nOn Mon, Feb 29, 2016 at 5:08 PM Jonathan Carter notifications@github.com\nwrote:\nOK cool, thanks so much for confirming this. We should have a PR out for this\npretty soon, and I'll pin you as an FYI.\n\u2014\nReply to this email directly or view it on GitHub .\n. ",
    "tristangodfrey": "Just ran into this myself too, running 1.7.0-beta :/\n. Understood! Thanks for the swiftness @lostintangent appreciate it, enjoy your day buddy.\n. Perfect! \ud83d\udc4d\n. Hi @geof90,\nI actually looked at react-native-xcode.sh but just assumed it wasn't running at all. I think for now just linking the bundle files in my .xcodeproj manually works fine, don't really want to add any more exceptions to my .gitignore. Thanks!\n. ",
    "maxdjohnson": "No worries thanks for the quick reply!\nIt seems like it's only happening for the 9.3 prerelease and the TabBarIOS images. The odd thing is that the images were working on the prerelease phone before the bundle was updated via codepush. I'll do some more investigation tomorrow and try to reproduce it. \n. We're using custom icons. Thanks for digging in!\n. 1. Yes I'm using require for the tab bar images\n2. I'm running the bundler and code push from a python3 script. Relevant parts:\ndef make_release():\n    try:\n        os.mkdir('./release')\n    except FileExistsError:\n        pass\n    print(\"Building release javascript bundle\")\n    subprocess.run(['react-native', 'bundle',\n        '--entry-file', 'index.ios.js',\n        '--platform', 'ios',\n        '--dev', 'false',\n        '--bundle-output', BUNDLE,\n        '--sourcemap-output', BUNDLE_MAP,\n        '--assets-dest', './release'],\n        check=True)\n    shutil.copy2(BUNDLE, './release/main.jsbundle')\n(slightly different from the example - creates the jsbundle ouside the release dir and then copies it in)\nsubprocess.run(['code-push', 'release', 'Nudge', './release', push_config.version], check=True)\n1. Tested on another 9.3 beta device and no issue - looks like it's not the ios version causing the issue\nI investigated some more by downloading the app container from both phones. Looks like there is a folder of assets missing from the release directory of the problematic app. Note these are both running the same OS, the same app version, and the same code push bundle, but one code push bundle is missing some assets. Could it be a problem with the unpacking of the code push archive?\nIf it would help in debugging I can send you both bundles to investigate\n. Sent!\n. There was a device that had installed a previous code push update that did not exhibit the issue. Don't have a copy of the app container for you unfortunately, since I reinstalled the app to test on 9.3\n. Haven't used it since so not sure. I would have confidence to use it if the client verified the checksum of the bundle contents (after unpacking, before loading the new code) and rolled back if there was a mismatch (client side rollback is really inspired, my favorite feature. Seems like a perfect solution for this)\nIs this part of the update improvements you mentioned / is it on the roadmap?\n. Awesome to hear! I might be misunderstanding, but it sounds like the checksum is verified before the diff is applied. What do you think about doing a final checksum after the diff (and any other transformations) are applied? This seems like a sure-fire way to ensure that the state of the bundle on the device exactly matches the bundle uploaded to CodePush.\n. Great thanks! Impressed with your velocity :)\n. ",
    "AndreyNikiforov": "Seeing the same behavior. RN 0.19, Code-push 0.7.0-beta, iOS 9.2.1\n. @lostintangent Images were in the app after install though Crashlytics and disappeared after subsequent code-push update (in my case it happens even on new installs due to the fact that code-push does not have version metadata).\nI am wondering it this bug may be related to the breaking change in RN 0.19: Load assets from same folder as JSbundle \u2013 e730a9f...\n. @lostintangent I was using RN 0.14 and releasing main.jsbundle only. After upgrading to RN 0.19 (and code-push 0.7) without changing code-push release params, I started loosing images (all as far as I can differentiate). \nI followed guides and added assets catalog to the bundle I am releasing and still loosing images. I don't know how to check code-push release content through code-push cli, so I can only assume that code-push distributed bundle and assets together.\n. @lostintangent I debugged processes before code-push release executed and found that assets folder was not prepared in my CI for code-push. After I fixed it images appeared!\nThanks for your prompt responses!\n. ",
    "mhagmajer": "Guys, and especially @lostintangent, thank you for very informative responses! :+1:\nI wish I could present you with more details on the issue I encountered, however, I couldn't repro the problem after I moved the resources to within the app. I also checked if the assets updates work in a fresh project on RN 0.19.0 and RNCP 1.7.1-beta and they do. This is not a pressing matter to the development of our app and I can't investigate more what happened there right now. Next time we need to ship resources as an update, I'll keep a close look at this, and will reopen the issue with as much details as I can.\nI'd like to take this opportunity to say how much I appreciate your work on this. Ability to immediately push updates to native client has speeden up our development a lot. Keep it up! :)\n. ",
    "artald": "I have to agree with @talkol on this.\nWhen a live app is bound to a specific deployment key, it makes sense that this key will remain valid even when a certain release\\deployment is removed. That's the whole point of pushing code remotely, so you wouldn't need to update the app itself...\nPersonally i'm leaning towards the second option of completely deleting a release from the deployment history. Alternatively, the third option of disabling a release would also work, as long as rollbacks will \"know\" to skip disabled releases.\n. ",
    "zoontek": "I've just met a similar problem.\nMy app was already uploaded to the Play store (in beta program).\nSince it was the first time I perform an update using code-push, I ignore about the different possible deployments (Production, Staging and more). My release was broken (no images), and since it was my first one, I couldn't rollback.\nI delete the deployment channel and recreate them (with a new key).\nSo I think a \"clearing deployments\" could be awesome.\n. ",
    "basketofsoftkittens": "+1\n. ",
    "jdmunro": "Never mind - user error!\n. ",
    "livioso": "Hey @lostintangent.\nThanks a lot for your fast reply. \nI'm unable to reproduce the error this morning after a rm -rf ./node_modules/, npm install, Product > Clean in Xcode and rm -rf ~/Library/Developer/XCode/DerivedData/. \nThe error is magically gone... \ud83e\udd14\n. Alright. Thanks again for the fast support!\n. ",
    "xhacker5000": "Thanks for you reply so quickly , could tell me how to upgrade my RN version safely and speed :P\n. I am try to install 1.6.0 release with this cmd\nsh\nnpm install react-native-code-push@1.6.0\nbut it's faild\n. thanks , I am trying , if that work I will let you know\n. Build done!\nthank you for your reply timely.\nI will enjoy code push now , maybe will disturb you again \n. code-push 1.6.0beta without command code-push release-react ?\n. # my version info is this\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Label \u2502 Release Time      \u2502 App Version \u2502 Mandatory \u2502 Description                   \u2502 Install Metrics      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v1    \u2502 an hour ago       \u2502 1.0.0       \u2502 No        \u2502                               \u2502 No installs recorded \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v2    \u2502 an hour ago       \u2502 1.0.1       \u2502 No        \u2502                               \u2502 No installs recorded \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v3    \u2502 a few seconds ago \u2502 1.0.1       \u2502 Yes       \u2502 add version show in homescene \u2502 No installs recorded \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\nI call codePush.sync() on componentWillMount()\nlog is:\n```\n2016-02-18 13:20:11.126 [trace][tid:com.facebook.React.JavaScript] [CodePush] Checking for update.\n2016-02-18 13:20:12.794 [trace][tid:com.facebook.React.JavaScript] [CodePush] An unknown error occurred.\n2016-02-18 13:20:12.795 [trace][tid:com.facebook.React.JavaScript] [CodePush] 404: The specified resource does not exist.\n```\nwhy...\n. shoud I call some other API to install the latest version ?\n. Yes I put the deployment key which value of name \"Staging\" into this , should I change it to Production's\nthis is my deployment info \n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Name       \u2502 Update Metadata                            \u2502 Install Metrics      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Production \u2502 No updates released                        \u2502 No installs recorded \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Staging    \u2502 Label: v3                                  \u2502 No installs recorded \u2502\n\u2502            \u2502 App Version: 1.0.1                         \u2502                      \u2502\n\u2502            \u2502 Mandatory: Yes                             \u2502                      \u2502\n\u2502            \u2502 Release Time: 14 minutes ago               \u2502                      \u2502\n\u2502            \u2502 Released By: 17599228@qq.com               \u2502                      \u2502\n\u2502            \u2502 Description: add version show in homescene \u2502                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n. Yes , it's my mistake , I copy error key into it , sorry .\nand this is the correct log:\n2016-02-18 13:37:43.180 [trace][tid:com.facebook.React.JavaScript] [CodePush] Checking for update.\n2016-02-18 13:37:45.524 [trace][tid:com.facebook.React.JavaScript] [CodePush] App is up to date.\n2016-02-18 13:38:24.196 [trace][tid:com.facebook.React.JavaScript] { name: 'launch' }\n. When I restart the App ,that's is the newest version , it's cool \nBut I wanna restart app when download finish , should I write some code for that ?\nmaybe : codePush.InstallMode.IMMEDIATE\n. codePush.sync()\nI want call this when object-c level which function is \n- (void)applicationDidBecomeActive:(UIApplication *)application\nIs there any object-c API in there ?\nthanks for you reply timely\n. Thank you for your nice work , I am really enjoy code-push to bring my convenience\n. sorry, it's index.ios.js\nI am not sure about \nShouldn't your image path be \"../assets/items/item1.png\"' instead of \"..assets/items/image1.png\"\nI just try the code-push release-react time_castle_client ios, it's seem very nice\n. Thank you very much for povide  release-react cli , it's very great!\n. not finish yet .\nit's a game app with real life , I mean your body in the reality.\nwhen you enter a room(what I prepare for you) , then you open the time-castle app \nthen you will enjoy everything.\ntime-castle will using ibeacon tech , in the room , ibeacon check your postion ,and turn on some hardware , you can recv message on time-castle-client app , and it's adventure game . \nif you interesting ,  welcome to Beijing  I will show you , that's is amazing game\n. could I have your email address :D , I can make an ad-hoc version for you :)\n. thank you \nBTW , are you from China , I found you using Chinese '\u66f4\u65b0\u4fe1\u606f'\n. Still trying ...\n. no it's zxlorderclient\n. I am already release , thanks for your help.\nthere are some issue for time-castle project,  as you know time-castle is game like app , so there is always have a lots of assets , like image, music ,or something like this. \nI want to know if  file [a.png] I already release it , when I release the next version , the [a.png] still be upload again or not?\n. I use the release.sh like this to release \n``` javascript\n!/usr/bin/env bash\ncode-push release-react ArtGallery ios -m --description \"\u70b9\u5f71\u66f4\u65b0\" -d Production\n```\n. I checked everything , CodePushDeploymentKey , and step debug code-push project;\nevery time code-push  return status = 4\nthat's meaning code-push up-to-date\nbut in fact it's not the newest version .\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Name       \u2502 Update Metadata                  \u2502 Install Metrics            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Production \u2502 Label: v13                       \u2502 Active: 1.2% (2 of 164)    \u2502\n\u2502            \u2502 App Version: 2.0.4               \u2502 Total: 3                   \u2502\n\u2502            \u2502 Mandatory: Yes                   \u2502                            \u2502\n\u2502            \u2502 Release Time: 37 minutes ago     \u2502                            \u2502\n\u2502            \u2502 Released By: project@loocall.com \u2502                            \u2502\n\u2502            \u2502 Description: \u70b9\u5f71\u66f4\u65b0                \u2502                            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Staging    \u2502 Label: v3                        \u2502 Active: 1.0e+2% (23 of 22) \u2502\n\u2502            \u2502 App Version: 1.0.0               \u2502 Total: 23                  \u2502\n\u2502            \u2502 Mandatory: Yes                   \u2502                            \u2502\n\u2502            \u2502 Release Time: Mar 23             \u2502                            \u2502\n\u2502            \u2502 Released By: project@loocall.com \u2502                            \u2502\n\u2502            \u2502 Description: firstcommit         \u2502                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\nPlease help\n. Oh , thanks very much  , I am very appreciate \ud83d\udc4d \ud83d\udc4d \ud83d\udc4d \ud83d\udc4d\n. ",
    "nicinabox": "\nWhen you say that the binary reports that 2.0.0+110 is installed, do you mean that it discovers that update on the server and downloads/installs it? Despite the fact that in your case, that isn't desired?\n\nThat's correct.\n\nIf you had changed the version to 2.0.1 then you wouldn't have seen that behavior.\n\nThat was my conclusion as well. The awkward thing that that we're actually \"targeting\" 2.0.0 as this release. It's a rewrite with many pre-2.0.0 builds. Even after we start doing semver bumps there might be situations we're it's ideal to only bump the build and not the version (eg, we add someone to the provisioning profile and release the binary again)\n\nOne possible solution would be to allow specifying the build code/number when releasing an update via the CodePush CLI\n\nThis could work. I'd be happy to more specifically qualify my version with build info.\n. Actually that might work. I'll have to make some adjustments in our build system to make sure tags and changelog happen correctly, but this might be viable. I'll see if I can try it before the end of the week. :+1: \n. Ah good point. That's probably not a dealbreaker for us since our Staging builds use a different api endpoint and may have some prerelease features enabled that we don't want in our production build.\n. I've been pretty heads down shipping this week (and with code-push!). Right now I've talked with the people who had issues with the version mismatch and got folks up to speed with the right binaries. It hasn't been an issue again (we had very few binary builds though), but I think I'll start adding the build number as a pre-release number until something more official or configurable is available.\nThanks @lostintangent and @geof90 for your support!\n. No worries! Here's some more output:\n\n. :+1: Thanks guys, you're doing great!\n\n. Works for me. Thanks for the tip!\n. \n. I guess sometimes you just need to tell someone your problem so you can connect the dots in your head.\nI'm pretty sure I know what happened. This isn't an issue in code push. \nWhen I submitted 2.8.11 I remember having trouble with xcode not opening, so I submitted the existing binary using Application Loader. I'm almost positive that I uploaded the same binary used for HockeyApp to the App Store. This would explain why the Production release isn't working and users are getting updates from Prerelease.\nSorry to trouble you all, you're doing great <3\n. Totally. Thanks for being my rubber ducky :)\n. ",
    "jeanregisser": "@lostintangent interesting workaround indeed!\nOne drawback though is we lose the ability to promote versions between Staging and Production. The promoted versions wouldn't be picked up by the Production build since its version wouldn't match, am I correct?\n. ",
    "praveenApk": "@lostintangent Many thanks for the prompt reply. Somehow i fixed the issue by following the steps below.\n1. Add the CodePush to the swift project.\n    npm install --save react-native-code-push \n2. Give the path of CodePush directory in the podfile.\n    pod 'CodePush', :path => './node_modules/react-native-code-push'\n3. Install the pod. This takes care the automatic linking of libraries to the xcode.\n    pod install\n4. Add the CodePush header file to the bridging header file.\n    #import \"CodePush.h\"\nThat's it. I am able to access CodePush from my swift files.\n. ",
    "dcflow": "Hey @lostintangent , \nI have a GCM module that does something in the background when my app is closed and it receives a notification. Then is when the error appears. \nWhen i run the project normally I get the usual CodePush logs that it checked for a new version and there was no updates. \n. @lostintangent Yes that's the one. And the sync() method is not called.\n. Yes I am using RN 0.20 and I do import CodePush in the main file. Well that library has some issues which I just reported but I don't think those are related to this one. The import statement will always get called when the app uses these kind of libraries. \nOne solution is to call the import  only when the app is active. If that works, then it might be helpful in the documentation. I will check it in a moment.\n. Of course import' and 'export' may only appear at the top level .. what was I thinking. \nSince it's a single bundle you either have it or you don't.\n. Great idea .. Thank you :)\n. @lostintangent Thank you :) You are blazing fast :zap:\n. @oney That's what I'm using. This happened when the app was closed and \n(GCMAndroid.launchNotification) was undefined instead of having a value.\nSo in your code this is always false when the app is closed. \njs\nif (GcmAndroid.launchNotification) {\n  var notification = GcmAndroid.launchNotification\n...\nelse \n``\n. @oney The code is in your Readme file. \nHow are you supposed to know that you have a notification when the app is shut down?\n. @oney  I already installedreact-native-system-notificationand did replacecom..RNGcmListenerServicew/io.neson.react.notification.GCMNotificationListenerService`.\nI just can't understand how do you show a notification when the app is completely shut down, not in background but terminated.\n. ",
    "maqen": "So the required CodePush.js seem to be in \"root\" now. Maybe because used for both android and ios platforms.\nAcording to the image the directory seem to be $(SRCROOT)/../node_modules/react-native-code-push\n\nMaybe just an update in readme that is needed?\n. ",
    "krivachy": "Ah, ok - thanks, I fixed it as well in my version, but seemed illogical that the iOS version searches through the Android folder as well. As long as it's intended it's fine.\nThanks :+1: I'll close this now.\n. ",
    "dejakob": "Oh, I see. So, I should be using the build.gradle file in the latest release?\n. Ok, thank you :)\n. okay, I am retarded. I used code-push as an import instead of react-native-code-push...\n\ud83d\udc4a \n. ",
    "jkhustler": "sure thing! Do you mean the steps in the README? I've followed those and that's where I ran into problems\n. When I use #import \"CodePush.h\", I get File not found.\nIf I use #import <CodePush/CodePush.h> I'm able to find the file but get the same error as before.\n. Maybe something to note is that my nodes_modules dir lives .. relative to my iOS project root rather than .. Here is what my Podfile looks like:\n`use_frameworks!\ndef app_pods\n    pod 'CocoaLumberjack/Swift', '2.2.0'\n    pod 'LogglyLogger-CocoaLumberjack', '2.3.0'\n    pod 'PubNub', '4.2.7'\n    pod 'libPhoneNumber-iOS', '~> 0.8'\n    pod 'ObjectMapper', '1.1.4'\n    pod 'React', :path => '../node_modules/react-native', :subspecs => [\n      'Core',\n      'RCTImage',\n      'RCTNetwork',\n      'RCTText',\n      'RCTWebSocket',\n    ]\n    pod 'CodePush', :path => '../node_modules/react-native-code-push'\nend\ndef testing_pods\n    pod 'Quick', '0.9.1'\n    pod 'Nimble', '3.1.0'\nend\ntarget 'FAKE_APP_TARGET' do\n    app_pods\nend\ntarget 'FAKE_APP_TESTING_TARGET' do\n    app_pods\n    testing_pods\nend\n. No worries. Please let me know if there is anything I can do to help.\n. @lostintangent yes I believe that is correct. However I have dependencies that require swift code :/ so I do need set \"use_frameworks!\"\n. Is this a quick fix, or should I go ahead and try to other installation methods for now?\n. :+1: thanks for the quick fix! :)\n. I've just loaded thecocoapodsbranch directly via cocoapods as a dependency and putimport CodePush` in a swift file and I'm able to call methods. Is this sufficient verification? And it is not a inconvenience, thanks for your hard work!\n. yes, I can wait.\n. ",
    "jordansexton": "pod 'React', :path => '../node_modules/react-native' is still necessary with 1.8.0-beta, which installs the pod for React 0.11.0 rather than what's in node_modules (I'm on 0.20.0).\n. ",
    "91jason": "thanks~\n. ",
    "avishayil": "Yeah, it does.\nI have a problem now with the CI of CodePush, any chance for a hotfix?\n. Also:\nCodePush.m:549:42: Use of undeclared identifier 'minimumBackgroundDuration'\n. Thanks, looks this solves the issue.\n. Hi, sorry to open the issue again, but same happens here. Happens on Android on Production build, haven't tested on iOS production build yet.\nInstalling updates is going through, but after killing the task from the recent apps menu updates are gone.\n. Hi, seems that I missed the part that says to wrap the root component with MyApp = CodePush(MyApp);\nI updated the CodePush library from an earlier version, and therefore required to place this line.\nEverything seems to work correctly after this.\nHope it would help more fellows encountering this issue.\n. Yes, that's what I'm trying to achieve. \nThanks for the quick response. \n. Yeah, that could work, thanks! \n. Actually it did. Thanks!\nBut, I couldn't figure out why you need to await for it, since the local label is already installed on your device, and therefore should be available without expensive queries like that.\n. Thanks!\nOn Aug 28, 2016 4:09 AM, \"Geoffrey Goh\" notifications@github.com wrote:\n\nThe app seems to be in a state where it thinks there is a pending update,\nbut there isn't actually one on disk. From what I see, the only way it can\nget into that state is if the app installs two updates the installation\ntransaction fails, e.g. app get's killed somewhere on this line\nhttps://github.com/Microsoft/react-native-code-push/blob/master/ios/CodePush/CodePushPackage.m#L463,\nwhich means the current update is removed but the info dictionary still\npoints to it. It seems like a really unlikely case to ever happen though.\nAnyhow, I will send out a PR that prevents crashes during rollbacks.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/493#issuecomment-242949823,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAyekOjx84LZ55vvQcjsw8fSroqWsTI2ks5qkN-0gaJpZM4JtyyO\n.\n. \n",
    "chirag04": "@geof90 well this work but everytime i npm install i would need to delete the folder and set the path again. Can we do one time setup?\n. @lostintangent can we do something for those who are not using CocoaPods ?\n. app works fine in dev mode. in release mode it crashes immediately even before the initial screen is displayed.\n. yeah i'm using RN bits from master. There was something broken between 28 and master i guess. I updated to a more recent version of RN and it works fine now.\nCouldn't update to master break of this breaking change: https://github.com/facebook/react-native/commit/49f20f41546e3ba8e7fe43c84c4c701684d0434d. That would be a breaking change for code-push also i suppose.\nThanks for the help. Keep up the amazing work \ud83d\udc4d \n. @lostintangent https://github.com/facebook/react-native/commit/49f20f41546e3ba8e7fe43c84c4c701684d0434d#commitcomment-18003386\nCan we update code-push to match that ^\n. awesome\n. - running on android. iOS works fine. Using the latest npm release of code-push.\n- yep, follow those instructions correctly.\n- yep, it was working fine before RN 30.\nOther noticeable change was we change the app version to  v1.0 because of a change in bundle Id. Before changing the bundle Id, app was using v1.5. App name is still the same and using the same deployment keys. Not sure if this is y it's not working correctly.\n. it seems like it's not installing the update in debug on ios but does install on android. Ideally i would expect code-push to not do anything in debug mode.\n. related: https://github.com/Microsoft/react-native-code-push/issues/703\n@nihgwu do you also need to add missing import import com.facebook.react.uimanager.ViewManager; in codepush.java?. this is a blocker for us. cc @sergey-akhalkov . this is weird. maybe i accidentally removed it while making it work for RN 43 and added it back.. @almirfilho can you send a PR to add this to the docs?. in our RN fork, we publish the archives for android. It should work then. eg: https://github.com/facebook/react-native/compare/master...4Catalyzer:17_4_6. I don't remember the exact steps but ./gradlew :ReactAndroid:installArchives should do it.\nJust follow the steps in this script: https://github.com/facebook/react-native/blob/master/scripts/publish-npm.js. @shrutic your fork looks good to me. make sure you are not building from source when switching to your fork. also double check you are install react native from your fork. No need to publish your fork to npm.. somewhere inside: node_modules/react-native/android directory. Also double check this line in your build.gradle: https://github.com/facebook/react-native/blob/master/local-cli/templates/HelloWorld/android/build.gradle#L21\nWorst case: i would say it's best to just create a new project and try to replicate the problem with minimum changes. then switch to your fork and see how it goes.. you should have files like these in your node_modules/react-native/android/com/facebook/react/react-native.\n\n. Set the ref only if withRef option is provided and check if ref exists before using it in any function. ",
    "cancan101": "This solution seems less than ideal. Why does this project need to vendor SSZipArchive? Is there no way to handle this dependency in a smarter fashion that does not conflict with other npm packages?\nie some equivalent of NoZip.\n. Yes, am trying to use react-native-zip-archive and I do see they are vendoring as well. I suppose you are both doing so to solve the problem of dependency management in the case where the user is not using Cocoapods. \nThe reason that I don't want to install react-native-code-push using cocoapods is the requirement to then install RN using cocoapods which I do not want to do.\n. ",
    "plrthink": "I'm the author of react-native-zip-archive. I'm also facing this problem today since we are integrating CodePush to our own app.\nHonestly, I'm not familiar with native development and I don't know how cocoapod solve this dependency so is there anything I can do with that? I'm so willing to fix this with codepush team.\n. @itinance I haven't tried that approach yet. But I think not every rn users use cocoapod, so I still want to try some other solutions.\nMy colleague told me that since the linker in xcode identifies code by its class names so I changed the class name of SSZipArchive to RNSSZipArchive and this solved the problem. But it still not a perfect way to do that.\nIf any user is facing the same issue then you can install react-native-zip-archive via github with custom-ssziparchive branch now. \nStill trying to find a better solution...\n. @RoosterKelly I have just pushed the next branch which should fix this issue. You can install it via \"react-native-zip-archive\": \"mockingbot/react-native-zip-archive#next\" to test it out. If it works on your side, I would publish a version to npm ASAP . For folks still use some workarounds to solve this issue, please update react-native-zip-archive to v2 which would fix this out of the box.\n. ",
    "itinance": "From the codepush-docs:\n\nCodePush depends on an internal copy of the SSZipArchive library, so if your project already includes it (either directly or via a transitive dependency), then you can install a version of CodePush which excludes it by depending specifically on the Core subspec:\npod 'CodePush', :path => './node_modules/react-native-code-push', :subspecs => ['Core']\nNOTE: The above paths needs to be relative to your app\u2019s Podfile, so adjust it as nec cessary.\n\nHave you tried this out?\n. ",
    "RoosterKelly": "@geof90 This is still a significant problem. Is there yet a good solution that does not require constant management of this package just so it does not conflict with other react native modules?\nSolutions found so far:\nDelete the SSZipArchive and update the search path, which gets overwritten on ever npm install\nCreate fork, do your own builds.  When keep track of updates to parent get and merge changes any time you need them.\nBoth solutions incur significant cost on any team that runs into this issue.\n@plrthink Have you had any success on finding a work around on your end?\n. ",
    "peacechen": "I upgraded my project to RN 0.56 and CodePush 5.4.0.  The build blew up complaining of duplicate symbol errors for Base64, JWT and SSZipArchive.  itinance's suggestion of subspecs => ['Core'] for the CodePush pod fixed the problem.\nMy app isn't using react-native-zip-archive so I'm not sure what's pulling that in.  Maybe because CodePush.xcodeproj is included under the project's Libraries?. Thanks for the reference.  Can't tell whether it's the same issue since our app uses CodePush 1.15-1.17, while yours uses 2.0.2 and yours didn't have this issue on 1.17.  Unless this issue is more fundamental to the CodePush platform and is triggering a bug on multiple versions.. @didierbrun   Thank you very much for diagnosing this.  Debugging this on my end was frustrating since I had no visibility into the crash. \nWould it be possible to backport this fix for React Native pre-0.40 ?  (e.g. 1.17.4-beta) \nWe're not yet able to upgrade to the latest version of RN.. @max-mironov   -- I will test that in the morning.  Thanks for the link\nI'm surprised that a breaking change like this isn't affecting everyone.  Is there a special condition triggered by a few use cases that isn't happening for the majority of users?. @max-mironov  -- I've confirmed on a physical iPad that PR #809 fixes the update crash.  When you attempted to recreate the bug, were you running a debug or release build?  I only saw the crash on a release build.  It doesn't crash on a debug build.\nWould there be any way to expedite releasing this fix for the 1.x and 2.x react-native-code-push branches?  Custom manual patching is hard to manage for CI.. Hopefully the Microsoft team will approve the update soon.  This has been a hard blocker for our app since early last week.  I suspect that this is affecting a fair amount of people, with only a few who have made their way here to report it.  Given the careful and minimal code changes, the risk is low, and if there is a side effect, users have the option to revert to 1.17-3 or 2.0.2.. Would you mind backporting the fix to the 1.x releases?  We're not able to upgrade to RN 0.4x yet.. Thanks @max-mironov @pniko \nSince npm doesn't allow publishing a back-rev release, I went ahead and created a 1.17.4-beta branch in my fork, cherry-picking the relevant commits since 1.17.3-beta.  It may be consumed in the package.json as:\n\"dependencies\": {\n    ...\n    \"react-native-code-push\": \"https://github.com/peacechen/react-native-code-push#4377312\",\n    ...\n  }\nNot intended as a long-term solution, but we needed to get the fix for our app out there yesterday.. That looks good @max-mironov .  Thanks again for your help throughout all this.. @max-mironov  Thanks for the test project. Having a bit of trouble building it, seeing this error logged in the console:\n\nThe CodePush module doesn't appear to be properly installed. Please double-check that everything is setup correctly.\n\nI'll keep plugging at it, but in the meantime I've updated the OP to specify release & physical device.  I vaguely recall seeing it in the simulator but my memory could be wrong on this.  It definitely occurs on release builds + physical device.\nUpdate: Runs properly from Xcode, but not the command line.. Apologies for the ambiguity.  Your test project builds and runs from Xcode but not the command line.  Dimensions are returned as expected in the test app.\n. For our app's internal code as well as a 3rd party library that uses Dimensions, the returned values are incorrect immediately after an update.  The symptom appears to be that it returns the landscape width & height values when the device is in portrait mode.  I've yet to see it do the opposite, though we primarily run our app in portrait mode.\nI'll try to dig in more with the debugger.. This behavior appears to be due to React Native and not CodePush.  I've observed Dimensions returning incorrect results on app resume when no CodePush update has been applied.  Thanks for your help and apologies for taking up your time.. I was not properly importing CodePush in MainApplication.java and passing the proper constructor args.  Mine looks like:\n```\nimport com.microsoft.codepush.react.CodePush;\n//...\npublic class MainApplication extends Application implements ReactApplication {\nprivate final ReactNativeHost mReactNativeHost = new ReactNativeHost(this) {\n//...\n\n@Override\nprotected List<ReactPackage> getPackages() {\n  return Arrays.<ReactPackage>asList(\n      new MainReactPackage(),\n        new CodePush(BuildConfig.CODEPUSH_KEY, MainApplication.this, BuildConfig.DEBUG),\n        //...\n  );\n}\n\n```\nSince it's working with RN 0.53, the documentation should be updated to include it.  I originally read that 0.53 support is TBD and didn't dig down further at first.. @iTOYS \nThe main Readme at https://github.com/Microsoft/react-native-code-push has under the supported versions table:\n| React Native version(s) | Supporting CodePush version(s)                       |\n|-------------------------|------------------------------------------------------|\n...\n| v0.46-v0.52             | v5.1+ (RN removed unused registration of JS modules)|\n| v0.53+                  | TBD :) We work hard to respond to new RN releases, but they do occasionally break us. We will update this chart with each RN release, so that users can check to see what our \"official\" support is.\nIt would help new users or people upgrading their CodePush by updating the supported RN version to v0.46-0.53 for CodePush v5.1\n. I searched the issues again (for the 10th time, with google too) and was able to dig this up:\nhttps://github.com/Microsoft/react-native-code-push/issues/1401#issuecomment-427561520\n\nWorkaround is to create the folder manually.\n\nManually creating the sub-folders .... /intermediates/assets/debug got past this error.  That's kind of crazy to have to do that.  Any insight as to why this is happening on upgrades?\nEdit: yet another encounter on SO\nhttps://stackoverflow.com/questions/52579414/codepushhash-not-found-working-with-code-push. Hello yuri, and thanks for looking into this.\nThat stage is being skipped:\n:app:bundleDebugJsAndAssets SKIPPED\nI don't recall turning that off.  Any idea how to enable it?\nEdit: some information here may be applicable --\nhttps://proandroiddev.com/bundling-react-native-during-android-release-builds-ec52c24e200d\nHowever enabling bundleInDebug slows down debug builds.  Any way to avoid that?\nSince the debug bundle isn't necessary to run the debug build, it would be helpful if CodePush creates that path, or puts it directly in the intermediates directory.. My environment is using Gradle plugin 3.2.0, so it looks like you've found the culprit.  We're not ready to upgrade to RN 0.57 due to some of its breaking changes. \nI could run a postinstall script to patch the codepush.gradle file until a new version is released.  Will you be adding that to the repo?  If not, I could create a PR.  I just need a commit to reference for the patch file.. Thanks @yuri-kulikov for digging up that obscure bug!  I would've burned hours trying to figure out why the production build failed.  I owe ya one. \ud83c\udf7a . ",
    "ericmuyser": "Sweet. Thanks for this @lostintangent!\n. Smooth moves\n. ",
    "BilalBudhani": "@lostintangent Sorry for replying late I was traveling for last couple of days. \nI did get the plugin setup done manually on Android and it works perfectly fine. Thanks for guiding me out there. I went through the doc changes in regards to rnpm for Android as well. It sounds good to me. :+1: \n. @geof90 I confirm that no release to TestFlight was sent. All the updates were being sent via CodePush only. \n. @geof90 Yes, I've done that step as well. My AppDelegate.m file looks like this \n``` objective-c\nNSURL *jsCodeLocation;\nifdef DEBUG\njsCodeLocation = [NSURL URLWithString:@\"http://localhost:8081/index.ios.bundle?platform=ios&dev=true\"];\n\nelse\njsCodeLocation = [CodePush bundleURL];\n\nendif\n```\n. @geof90 I'm don't experience this while testing a \"Release\" build on simulator. This is something I've experienced on TestFlight only as of now. \nI don't have any code which is clearing away \"Application Support Directory\". Also, I don't think any of the plugins I'm using would be causing this. Here's is the list of plugins I'm using\njson\n  \"dependencies\": {\n    \"react\": \"^0.14.7\",\n    \"react-native\": \"^0.22.2\",\n    \"react-native-code-push\": \"^1.9.0-beta\",\n    \"react-native-device-info\": \"^0.9.0\",\n    \"react-native-image-picker\": \"^0.18.3\",\n    \"react-native-refreshable-listview\": \"git+https://github.com/jsdf/react-native-refreshable-listview.git\",\n    \"react-native-vector-icons\": \"^1.3.0\",\n    \"tcomb-form-native\": \"^0.4\"\n}\n. @geof90 I found the problem. Issue was from our side. There was a miscommunication between me and the other developer who releases the TestFlight builds. Turns out he was still uncommenting react native jsbundle part which was not needed before sending the build. I got that sorted with him and now everything is working as expected. \nSorry for the inconvenience caused by me. I apologies for it. Closing the issue.\n. ",
    "Sean-Snow": "i cleanr my app,then install release app .it's work.I can not reproduce this error\u3002 @lostintangent \n. thank you. close it\n. ",
    "Jackong": "@lostintangent I'm integrating react-native with an existing project. Each team is developing for different modules, so I need multiple bundles for different modules on my project.\n. Yes, I have multiple different React-Native activities/views in same APP. And every activities is developed by different teams. So When I use different bundle file name with different code-push APP on my project. I found it do not work because of the hard-code UPDATE_BUNDLE_FILE_NAME.\n. Yes. But to be honest, I'm not sure whether is right to use different bundle name and deployment key. Will this lead to some issue?\n. ",
    "philip-tong": "@Jackong \nHave you successfully load different bundle with codepush?\n. ",
    "alexprice1": "Thanks for the speedy response! Deleting the app and re-downloading it fixed it, but maybe we can recreate it.\n1) I am using 1.8.0-beta on ios\n2) At the root of my project I have this:\nimport codePush from 'react-native-code-push';\ncodePush.notifyApplicationReady();\n// codePush.sync();\nI have some actions that are handling all my interactions with codePush. This is what that code looks like:\n```\nimport { getConstants } from '../constants/index';\nconst {\n  SET_AVAILABLE_UPDATE,\n  SET_GETTING_REMOTE_PACKAGE_STATUS,\n} = getConstants('update');\nimport codePush from 'react-native-code-push';\nfunction setAvailableUpdate(update) {\n  return {\n    type: SET_AVAILABLE_UPDATE,\n    update,\n  };\n}\nfunction setGettingRemotePackageStatus(isGetting) {\n  return {\n    type: SET_GETTING_REMOTE_PACKAGE_STATUS,\n    isGetting,\n  };\n}\nexport function download() {\n  return function(dispatch, getState) {\n    dispatch(setGettingRemotePackageStatus(true));\ngetState()\n  .getIn(['update', 'availableUpdate'])\n  .download()\n  .then((update) => {\n    if(update) {\n      return update.install(codePush.InstallMode.IMMEDIATE);\n    }\n  })\n  .then(() => {\n    dispatch(setGettingRemotePackageStatus(false));\n  })\n  .catch((error) => {\n    console.log('error', error.stack);\n  });\n\n};\n}\nexport function checkForUpdates() {\n  return function(dispatch) {\n    dispatch(setGettingRemotePackageStatus(true));\n    codePush\n      .checkForUpdate()\n      .then((update) => {\n        dispatch(setGettingRemotePackageStatus(false));\n        if (update) {\n          dispatch(setAvailableUpdate(update));\n        }\n      })\n      .catch((error) => {\n        console.log('error', error.stack);\n      });\n  };\n}\n```\nMy AppDelegate.m:\n```\n/\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n \n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n /\nimport \"AppDelegate.h\"\nimport \"RCTRootView.h\"\nimport \"CodePush.h\"\n@implementation AppDelegate\n\n(BOOL)application:(UIApplication )application didFinishLaunchingWithOptions:(NSDictionary )launchOptions\n{\n  NSURL *jsCodeLocation;\n\n#ifdef DEBUG\n    jsCodeLocation = [NSURL URLWithString:@\"http://192.168.1.148:8081/index.ios.bundle?platform=ios&dev=true\"];\n  #else\n    jsCodeLocation = [CodePush bundleURL];\n  #endif\nRCTRootView *rootView = [[RCTRootView alloc] initWithBundleURL:jsCodeLocation\n                                                      moduleName:@\"chat\"\n                                               initialProperties:nil\n                                                   launchOptions:launchOptions];\nself.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];\n  UIViewController *rootViewController = [UIViewController new];\n  rootViewController.view = rootView;\n  self.window.rootViewController = rootViewController;\n  [self.window makeKeyAndVisible];\n  return YES;\n}\n@end\n```\nNotice how the codePush.sync is commented. It very well could of not of been commented when the issue happened. I was working across several files and was saving, so I am sure live reload was catching my comments/uncommenting.\nMy app presents a GUI to allow the user to check for updates. If there is an update available, it allows the user to download and install it,\n3) I am running my app on an ios simulator using react-native 0.20 while chrome debugging.\n. I am having a similar issue where I bundle up my code for a release. I do a code-push  for users who want to update, and I update my app in the app store. Once they download the app in the app store, it says that their is an update from codepush. \nI am thinking of passing in the version number in the metadata, and only showing there is an update if codepush's version is greater than the version they have. Thoughts?\n. ",
    "mbernardeau": "@dtivel @lostintangent Thanks a lot, it works perfectly now !\nI guess the error message was just a bit misleading.\nAnyway great work :)\n. ",
    "ACCTFORGH": "I encountered the modified error message. Not sure what went wrong. Here is my code\nCLI:\n_Command: _code-push release-react app_name android\nRunning \"react-native bundle\" command:\nnode node_modules/react-native/local-cli/cli.js bundle --assets-dest /var/folders/t3/dlvzzrc50k11spnvz0h613_00000gn/T/CodePush --bundle-output /var/folders/t3/dlvzzrc50k11spnvz0h613_00000gn/T/CodePush/index.android.bundle --dev false --entry-file index.android.js --platform android\nbundle: Created ReactPackager\nbundle: start\nbundle: finish\nbundle: Writing bundle output to: /var/folders/t3/dlvzzrc50k11spnvz0h613_00000gn/T/CodePush/index.android.bundle\nbundle: Closing client\nbundle: Copying 58 asset files\nbundle: Done writing bundle output\nbundle: Done copying assets\nReleasing update contents to CodePush:\nUpload progress:[==================================================] 100% 0.0s\nSuccessfully released an update containing the \"/var/folders/t3/dlvzzrc50k11spnvz0h613_00000gn/T/CodePush\" directory to the \"Staging\" deployment of the \"app_name\" app.\nCode in JS:\ncodePush.sync()\nCode in Java:\nnew CodePush(\"staging key\", this, BuildConfig.DEBUG),\nError message:\n[CodePush] Update is invalid - A JS bundle file named \"null\" could not be found within the downloaded contents. Please check that you are releasing your CodePush updates using the exact same JS bundle file name that was shipped with your app's binary.\nEnvironment:\nRN 0.24 Android\nReally appreciate your help!\n. @geof90 Ah, I missed this step in the guide. Thanks for pointing it out\uff01\n. @silhouettes Thanks for the reply. Yes, I think what you said makes sense. Some more sophisticated obfuscation from React Native side would be helpful to enhance security.\n. ",
    "sonnylazuardi": "thanks this solves\n my problem @geof90 \n. ",
    "HenryStevens": "Duplicate of #247 \n. ",
    "krishlahoti1": "@avishayil  can u pls tell where did you place the content MyApp = CodePush(MyApp); in your application.\nAnd after that, did u check that the app sticks to latest update and doesn't roll back to previous version?. ",
    "sujitpk-perennial": "@krishlahoti1  You can add this code to the root component as \nconst codePushOptions = {\n  checkFrequency: codePush.CheckFrequency.ON_APP_RESUME,\n  installMode: codePush.InstallMode.ON_NEXT_RESTART\n}\nAppName = codePush(codePushOptions)(AppName);\nmodule.exports = AppName\n. Hello @Martian2Lee  I am also facing the same issue. I am getting error as 'Unable to get the hash of the binary's bundled resources - \"codepush.gradle\" may have not been added to the build definition' My app is already live. I already did 4-5 times code-push to update the app functionality for Android. Now I have added auth, share functionality in the app. But currently I commented the code. But auth, share package is already there is node_modules. Is addition of new package giving me this issue ? \n. Hello @sergey-akhalkov I am also facing the same issue. My app is already live. I already did 4-5 times code-push to update the app functionality for Android. Now I have added auth, share functionality in the app. But currently I commented the code. But auth, share package is already there is node_modules. Is addition of new package giving me this issue ? \n. @samermurad can you help me with your solution? I am also facing same issue but only for iOS. Android is working fine.. @Arshiamidos are you able to do codePush the changes done in js file which is added in .thml file ?\n . @ruslan-bikkinin  Approximate time is 5 to 6 min. UserName is sujit and app name is AdPost_home_copy.  Is this happen when internet connection is slow ? Because I am facing low internet connection  here.\n. @ruslan-bikkinin Sorry for sharing wrong information. Actually username is sujit.kaulavkar and app name is AdPost_Home. . I am also facing same issue? @niros001 have you find any solution?\n. @iTOYS \nSorry for the late reply. I tried above command. But it is saying command is not correct. \nI tried other options from suggestions but no luck.\n\ncode-push release app_name ios/ *\ncode-push release app_name ./ios *\ncode-push release app_name specitic_path_a_single_js_file *\n. @iTOYS  I am getting error as \n[Error]  ENOENT: no such file or directory, stat 'ios/build/Intermediates/ArchiveIntermediates/AppName/BuildProductsPath/Release-iphoneos/AppName.app'\n. I tried now above command. Now it is not giving me any error. But still not getting all files. \nI will share sample app. . @iTOYS I have uploaded sample project and you will find it here . Here I am just loading js on webView to show a alert. . @iTOYS have you find any reason. There is a same question asked https://github.com/Microsoft/react-native-code-push/issues/1086#issuecomment-367747052. . @iTOYS Thanks for your reply. I have already added js, css files into assets folder. But again it is not downloading those files on the phone. iOS app is not yet released on App Store as I am stuck at this stage.. @Arshiamidos I already installed the app on my iPhone. Now I am doing some changes in js file which loads on webView. I am not able to update the app for those js files using codepush. Are you ?\n\n. ",
    "niftylettuce": "\n. I resolved, here was my new .babelrc file:\n{\n  \"presets\": [ \"react-native\" ],\n  \"plugins\": [\n    \"transform-decorators-legacy\",\n    \"transform-do-expressions\",\n    \"transform-function-bind\",\n    \"transform-class-constructor-call\",\n    \"transform-export-extensions\",\n    \"syntax-trailing-function-commas\",\n    \"transform-exponentiation-operator\"\n  ]\n}\nI also ran the packager with --reset-cache to work: node_modules/react-native/packager/packager.sh --reset-cache.\nThank you and also thanks to @skevy for help over Slack in ExponentJS.\n. So I need to release one version to Code Push first in order for my app to stop crashing since it can't find a JS Bundle or something?\n. What does the JS Bundle compare itself to when you check for updates?  Let's say I haven't released a version to Code Push yet -- I run gradle commands here, sign the app, and install it on a device.  https://gist.github.com/marty-wang/5a71e9d0a6a2c6d6263c.  Do I need to explicitly say the version I have on the device through JS or something?\n. I used rnpm to install it, so I'm assuming it worked.  I also edited my app's MainActivity.java file to add/replace the line with CodePush being added under list package (and added my deployment key in there in quotes).\n. Here's adb logcat, the bug persists with bundled builds somehow, is the packager cache not cleared for bundler?  This is incredibly frustrating.\nlog\n03-31 14:19:16.527 21131 21152 E ReactNativeJS: undefined is not a function (evaluating 'babelHelpers.asyncToGenerator')\n03-31 14:19:16.534 21131 21153 E AndroidRuntime: FATAL EXCEPTION: mqt_native_modules\n03-31 14:19:16.534 21131 21153 E AndroidRuntime: Process: com.myapp, PID: 21131\n03-31 14:19:16.534 21131 21153 E AndroidRuntime: Theme: themes:{}\n03-31 14:19:16.534 21131 21153 E AndroidRuntime: com.facebook.react.modules.core.JavascriptException: undefined is not a function (evaluating 'babelHelpers.asyncToGenerator'), stack:\n. See https://github.com/Microsoft/react-native-code-push/issues/271 for how I resolved it in debug/developer mode - but for some reason it still persists with these bundled releases.\n. @lostintangent Still same issue after modifying/updating readme.\n. Is this using its own version of .babelrc or something? https://github.com/Microsoft/react-native-code-push/blob/master/android/codepush.gradle#L54\n. @lostintangent Is it because the code-push dependency of react-native-code-push@v1.10.0-beta is 1.8.0-beta instead of 1.9+?\n. yeah, I've used that.  Thing is I don't know how to clear the release/bundle cache.  I tried on a fresh react-native init and added code push and it worked fine.\n. Could it  be because contents of my index.android.js are require('./src');? \n. @geof90 yeah\n. Not sure if it makes a difference, but the clean/fresh react native init was v0.22.2 and the version I'm working with and running into this error with is v0.21.0\n. Tried that too, and watchman del all thing -- and killed all processes with node/watchman\n. I'm following this https://gist.github.com/marty-wang/5a71e9d0a6a2c6d6263c - same thing pretty much @geof90 \n. (I skip step 1)\n. OK got it working.  I upgraded to latest RN v0.22.2, cleared node_modules, killed watchman and node, cleared watchman with watchman watch-del-all, rm -rf ~/.npm and then from scratch re-installed code push (w/o using rnpm).  I also removed the android/app/build folder and android/build folder (I only had removed app's build folder in the past, which may have been the actual issue).  Regardless, closing, as this is fixed.\n. ",
    "dayudodo": "I found maybe is the watchman problem, I use the react 0.41.2, it occured this issue, because I install the stage-0, error, so uninstall it, but still. finally, I delete all the project and git clone again, error still their! but same project is good at my PC! so, watchman watch-del-all, rebuild, everything OK!\nultimate solution \nbrew uninstall watchman. ",
    "htxiong": "@niftylettuce thanks, your solution works for me. . ",
    "altruio": "\nLet me know if either of those work for you. If not, it would be helpful if you could remove the getJSBundleFile method from your MainActivity file and see if the issue still occurs.\n\n@lostintangent Was experiencing the same, and I removed the getJSBundleFile per your advice and the problem indeed did stop occurring. I don't suppose this is a good solution if I want CodePush to still work in production though, so would you have any other advice? ;)\n. ",
    "charlieschwabacher": "Hey - thanks for the quick response.  I realized my issue was related to running in 'Test' scheme, and it looks the culprit is some test code at the end of pwd2key.c including a main function.  I was able to fix by commenting out lines 165-187 here https://github.com/Microsoft/react-native-code-push/blob/master/ios/CodePush/SSZipArchive/aes/pwd2key.c#L165 .  If you guys aren't using these tests, I think it could make sense to lose everything after line 105.  Please let me know if a pull would be helpful.\n. Thank you for pointing me in the right direction, and for merging!\n. ",
    "xiaobuu": "@lostintangent Thank you for the hint. I just recalled that I might have upgraded the CodePush from 1.9.0 to 1.10.0, maybe that's what makes the app crash!  I'm going to close the issue. I'll check if the app crash in next release, thank you again!\n. ",
    "eugenehp": "@lostintangent I'm not sure why you had React dependency in the first place. The RN migrated to different Xcode project template several versions ago.\nIf you still need it, maybe you can go with this idea \u2013 https://github.com/facebook/react-native/issues/6125#issuecomment-188246761\n. Hey Jonathan,\nJust a heads up.\nIt doesn't break anything big. But I used a manual integration instead of\ncocoa pod based one.\nSo maybe it makes sense to put this migration in your roadmap?\nThanks.\nOn Sunday, April 10, 2016, Jonathan Carter notifications@github.com wrote:\n\nAre you running into an issue using CodePush with CocoaPods or where you\njust filing this issue as an FYI?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly or view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/284#issuecomment-208077470\n. Thanks @lostintangent this totally makes sense. Good job!\n. Just a note to myself:\n\nios/Podfile must contain pod 'React', :path => '../node_modules/react-native' \nto avoid \n\nReact has been deprecated\n. thanks @lostintangent \nI might missed that at the first place. Now it's all good. \ud83d\udc4d \n. It would be awesome to overwrite this option inlineSourceMap in here https://github.com/facebook/react-native/tree/master/packager#pathtomodulenamemapbundle-query-params\n. Hey Jonathan,\n\nThanks for helping on this. Yeah, it will be bundled, but how can I access it within the application, as an asset? Cause it's just plain JSON format in there. Just wondering if you had similar ideas.\n\n. @lostintangent and whenever you reference it back inside the system, it creates a circular dependency, where it just crashes the packager with Unable to find this module in its module map or any of the node_modules directories under ...\n. Thanks @lostintangent \nI found a way to get that data in a standalone builds, I wouldn't call it a nice way.\nI'll release the open source version of it soon, so you'll be able to advise me on it \ud83d\ude09\nThanks!\n. ",
    "jeodiong": "pod 'React', :path => '../node_modules/react-native'\n  pod 'yoga', :path => '../node_modules/react-native/ReactCommon/yoga'. ",
    "jjding1986": "also got this issue using 1.9.1-beta on HUAWEI G750-T00 running Android 4.2.2\nand when using Nexus 6 running Android 6.0.1 everything is ok.\nI just create a simple React Native project by 'react-native init AwesomeProject', and add code push function by 'npm install --save react-native-code-push'\n. ",
    "tianjianchn": "thanks for the response @silhouettes .\n- android version: 4.2.2 and 6.0, both tested\n- debug and release build, both tested\n- physical device\n- i'm using the fetch api, and set credentials: 'same-origin' in the options\n. and react native version: \"react-native\": \"^0.23.0-rc4\",\n. @lostintangent \ntest with emulator, same probleam:(\ngenymotion version: 2.6.0\nandroid version: 6.0.0 API 23\n. thank you @silhouettes .\ni'd checked the 1.10.1 used mechanism, it used the similar steps as the react native's Reload JS.\nso, i have to upgrade the native code. ok, though it's a tough thing.\nby the way, could u suggest some proper ways to guide the end user to upgrade when native code changes? i'd like code-push to supply some kind of ways to work on this situation. for example, add an option(like --download-url), let the user download the upgraded app. or even we can do an app-level diff to make the upgrade more lightweight. never mind, its just my suggestion:D\n. - say android(i have no experience on ios publish yet), the --download-url may refer to the apk file in my own file server, or an url in the third-party store. or even we can push the apk file in code-push:)\n- i have no more know about the app-level diff, but some third-party android stores can supply an incremental update for the native app. i guess its maybe native code patching \n. sometimes i was facing the same problem. you may need to use proxy to push the update.\ni'd changed the local code-push-cli script, to add superagent-proxy package which read the system-wide proxy setting. \n. i've tried, but you know, i have to add superagent-proxy's typescript definition first. it's a little time-consuming work, so i changed the local js script directly. \nbut i'll try that again, as you wish:)\n. I don't know whether my situation is same as @johnwayner . \nEnvironment: \n- \"react-native\": \"^0.25.0-rc\",\n- \"react-native-code-push\": \"^1.10.2-beta\"\n- the client app version 1.6.0\nProblem:\n- After i release an update which targetBinaryVersion is '>=1.6.0 <1.6.2', the client's checkForUpdate method returns null, and a debug log [CodePush] An update is available but it is targeting a newer binary version than you are currently running. displayed.\n- Then i release another update which targetBinaryVersion is '>=1.0.0 <1.6.2', the client can get this update right \nThe problem is occurred after upgrade react-native(from 0.23) and react-native-code-push(from 1.10.0).\n. @geof90 It's my fault, sorry\n. thanks @geof90 and @lostintangent .\n@lostintangent , What I checked is the unzipped directory(I commented the delete statement in .java file). \nThings run as @geof90 said, the subsequent updates after the first update will not contain all images.\nI will do more check to my current staging environment app.\nThanks your help again!\n. Yes, the download url domain https://codepush.blob.core.windows.net/ is blocked, I can visit it by using proxy. But checkForUpdate and cli is still working\n. @lostintangent , It's working now. Just blocked in two days. \n. sorry, not the future, just the past two days:)\nAnyway, it's ok now, and if blocked again, I will reopen this and make you guys know that.\nThanks.\n. ",
    "rikuayanokozy": "Yes, I only reach this problem when using my own server, that compress response with gzip. Because we wire deploy jsbundle directly(without zip), enable gzip can reduce about 30% transfer.\nNSURLConnection handle gzip compression transparently, and as you mentioned we'll check package hash after download, I think the assertion can be removed safely.\n. I opened a PR for this, please review.\nhttps://github.com/Microsoft/react-native-code-push/pull/292\n. ",
    "ghalong": "Hi @silhouettes ,thank you!Our App have android and iOS version,and they are independent project.A few days ago,we introduced React Native to our project in order to improve the work efficient,we want the RN code keep away from our former iOS or Android code,so make the RN code be a independent project and managed by git.I have check the --targetBinaryVersion,it seems just change the version of the apk? I am not good at English,I hope you can understand me. : )\n. Hi,@geof90 thank you,I have tried specify the --targetBinaryVersion and it does work well! There's also something would be pay attention when the RN code directory does't same with android code, when import the code-push gradle file,like apply from: \"../../../AwesomeProject/node_modules/react-native-code-push/android/codepush.gradle\",we would modify the related gradle code to  def recordFilesBeforeBundleCommand = tasks.create(\n                    name: \"recordFilesBeforeBundleCommand${targetName}\",\n                    type: Exec) {\n                commandLine \"node\", \"../../../AwesomeProject/node_modules/react-native-code-push/scripts/recordFilesBeforeBundleCommand.js\", resourcesDir\n            } and def generateBundledResourcesHash = tasks.create(\n                    name: \"generateBundledResourcesHash${targetName}\",\n                    type: Exec) {\n                commandLine \"node\", \"../../../AwesomeProject/node_modules/react-native-code-push/scripts/generateBundledResourcesHash.js\", resourcesDir, \"$jsBundleDir/$bundleAssetName\", assetsDir\n            } to the real path of the RNCode directory,otherwise it would appear like \"can't find recordFilesBeforeBundleCommand\" and so on. : )\n. @lostintangent Hi,thanks for your answer,because our BaseActivity have something that we have implemented previously\uff0cI want use them.I just the beginner of the RN and code-push,thanks for you asked  why me aren't using ReactActivity,now I realized it is not necessary using BaseActivity if I use the RN,using ReactActivity will be a better choice.\n. ",
    "Krupen": "I have a similar problem.\nI am getting Error: Cannot find module '/Users/krupenghetiya/AndroidStudioProjects/node_modules/react-native-code-push/scripts/recordFilesBeforeBundleCommand.js' when I do ./gradlew assembleRelease\nI have applid plugin as below: \napply from: \"../../android-v2/react-native-consumer-app/node_modules/react-native/react.gradle\"\napply from: \"../../android-v2/react-native-consumer-app/node_modules/react-native-code-push/android/codepush.gradle\"\nand it doesn't give any error, it gradle syncs and complies well.\nI have a submodule for React-Native code as I have both Android and iOS app and code management becomes easy.\nMy recordFilesBeforeBundleCommand.js would be at path /Users/krupenghetiya/AndroidStudioProjects/android-v2/react-native-consumer-app/node_modules/react-native-code-push/scripts/recordFilesBeforeBundleCommand.js'\nSo how do I specify it?. I have a similar problem.\nI am getting Error: Cannot find module /Users/krupenghetiya/AndroidStudioProjects/node_modules/react-native-code-push/scripts/recordFilesBeforeBundleCommand.js when I do ./gradlew assembleRelease\nI have applied plugin as below:\napply from: \"../../android-v2/react-native-consumer-app/node_modules/react-native/react.gradle\"\napply from: \"../../android-v2/react-native-consumer-app/node_modules/react-native-code-push/android/codepush.gradle\"\nand it doesn't give any error, it gradle syncs and complies well.\nI have a submodule(different directory) for React-Native code as I have both Android and iOS app and code management becomes easy.\nMy recordFilesBeforeBundleCommand.js would be at path /Users/krupenghetiya/AndroidStudioProjects/android-v2/react-native-consumer-app/node_modules/react-native-code-push/scripts/recordFilesBeforeBundleCommand.js\nSo how do I specify it?. @sergey-akhalkov I am using gradle 2.2.0. It is happening only after integrating code-push by Microsoft. I checked-out previous commit (without code-push) and it worked well. But now even if I remove codepush code on my latest commits, problem still persists.\n@Ge-yuan-jun Work around will be to generate bundle files and put them manually in android/app/src/main/assets/index.android.bundle folder, and build using android-studio.\nI use below command to generate bundle files:\nreact-native bundle --dev false --platform android  --entry-file index.android.js \\\n  --bundle-output android/app/src/main/assets/index.android.bundle \n  --assets-dest android/app/src/main/res/\nThe paths will change based on your project structure Or you can create anywhere and then copy-paste it at above path.. ",
    "johnwayner": "I think I may have had this issue because I was calling sync even in my development environment (using the simulator).  When I updated the app version it would continue to use the downloaded package for the previous version.\nI also misused the app version specification for the deployments.  I was thinking I was specifying a minimum version rather than a npm-style version specification.\nI'm fine with closing this out as user error.  It just seemed a bit suspicious to request updates using the previous package's appVersion, so I thought I'd bring it up.\n. The key to my issues seems to stem from not using jsCodeLocation = [CodePush bundleURL]; on the simulator.  Because of this the application is running from code served via the react native on-the-fly http-based code deployment process.\nI have a screen in the application that reports the current version as queried via CodePush's getCurrentPackage method.  This method will return package information if it is present -- even if not running.  There is code to handle this by including an additional _isDebugOnly field on the package result.  Unfortunately this flag is not set because isRunningBinaryVersion defaults to NO and is never set otherwise b/c of the lack of call to [CodePush bundleURL] (I'm guessing on this bit. I haven't actually traced the initialization back to that call).\nThis lack of bundleURL call is also the reason the out dated package is not removed.\nThe bundle was installed via calling download and then install from the remote package object returned by checkForUpdate.  But all that is silly if not using [CodePush bundleURL].\nSo I think this is mostly user error with a dash of confusing results due to isRunningBinaryVersion defaulting to NO.\nAnd since you asked, I'll include the specific version information, although I doubt it's useful at this point.\nIf I start the application with the appVersion set to '0.1.4' and call checkForUpdate I correctly get the last updated that has targetBinaryVersion='0.1.4' which in my case is v32.  If I then change the appVersion to '0.1.5' (in xcode) and re-run the app, getCurrentPackage still returns v32 (although I now know it's not actually running that code).  And the the checkForUpdate call returns v32 as well because that call uses my v32 package's appVersion (0.1.4) in that request instead of the app's actual version (0.1.5).\n. No problem.  Happy to be able to help.\n. ",
    "chetstone": "Thanks for the explanation. I'll want to use the new API.\nI've always used npm ls to find out what version I have installed. What's\nthe point if you already know the version?\nThis is the first time I've seen it not work. Maybe there's something wrong\nwith your package.json?\n$ npm ls react-native\nSadhana@0.0.2 /Users/chet/prj/malas/firebase\n\u2514\u2500\u2500 react-native@0.22.2\nOn Tue, Apr 19, 2016 at 12:45 PM, Jonathan Carter notifications@github.com\nwrote:\n\n@chetstone https://github.com/chetstone Apologies for the confusion\nhere! The GitHub readme always reflects the state of master, which is\nperiodically ahead of the bits on NPM. The website docs always reflect the\npublic bits on NPM.\nRegarding the disparity you're seeing, we recently deprecated the\ngetCurrentPackage method in favor of getUpdateMetadata, but we haven't\nreleased it to NPM yet (I'll be doing that today). The getCurrentPackage\nmethod is still available, but you won't see getUpdateMetadata unless you\ninstall the CodePush SDK from GitHub or after upgrading to the release\nwe'll publish this afternoon. We ran into a bug that we're trying to fix\nwhich is delaying the NPM release, so I apologize about the doc disparity.\nRegarding the NPM installation question, I believe that you need to\nspecify the version number when running npm ls. If you run npm ls\nreact-native do you get similar output? For me, the behavior you listed\nfor CodePush is the same as trying to list any other NPM module if I omit\nthe version. However, if I run npm ls react-native-code-push@1.10.1-beta,\nthat should work. I believe that is just a behavior of the npm ls\ncommand, and isn't related to the CodePush package itself. I could be wrong\nthough, so let me know what you see.\nThanks!\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly or view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/299#issuecomment-212064698\n. The terminology is a little confusing with so many components with similar names. But the warning in the documentation does specifically say the CodePush SDK, not react-native-code-push.\n\nI came to this because I was trying to test my first push to Production by limiting it to myself. After pushing with a rollout parameter of 20, I tried to load the update on my device right away and it wouldn't load. I used react-native-code-push 1.10.3-beta in my production build, so it should have worked. I suspect the problem was some kind of edge case due to it being my first push (v1) in that deployment, or the small number of users I have so far (low single digits :-) I patched the update to increase the rollout to 100 and then I was able to load the update.\n. Thanks for the explanation.\nOn Sun, May 29, 2016 at 1:52 PM, Jonathan Carter notifications@github.com\nwrote:\n\nI can update the docs to be more clear, apologies about that. In general,\nwe use the term \"CodePush SDK\" to refer to the platform-specific client\nplugin. The \"code-push\" NPM package is referred to as our \"Management SDK\"\nand unless you're scripting a Node build script, isn't directly relevant to\nmost users.\nWith rollout, it's important to keep in mind that it works by breaking up\nall possible devices into groups (aka \"cohorts\") and then only allowing\nusers in the specified percentage group to get it. Specifying a 20% rollout\nisn't saying that 1 in 5 users will necessarily get it. It's saying that\nusers whose device ID falls within the 20% range will get it, and no one\nelse will. Therefore, when testing it with single digits, the results could\nhave a decent degree of error. As opposed to having 50+ users, where it\nbecomes more accurate due to the randomness of the user's device IDs.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/359#issuecomment-222379285,\nor mute the thread\nhttps://github.com/notifications/unsubscribe/AA7l16cc5sn249dvitxb2-AWMaG805dAks5qGe6EgaJpZM4IpN1U\n.\n. @silhouettes Thanks for looking into this. Yes it certainly looks like that's the issue. I've asked if they could merge the fix to 0.33.1 as I have several customers using iOS7 and there's one more feature in 0.33 I'd like to add before support goes away. It doesn't seem like it's a code-push problem though.\n. Thanks for the response. It seems to be working now. I temporarily took out all the code-push stuff and was working on other things which involved changing the android build, trying to straighten out the name of the app, etc. Probably something I changed there (which involved a couple clean builds) fixed this.\n\nNow to test to see if code-push actually works. I have a question after reading your notes on multi-deployment testing. Those notes seem to focus on changing the deployment key. But the default build of Android seems to always use the packager server to download the bundle, so you wouldn't be able to use code-push because the installed bundle isn't being used. It seems you need three configurations: \n1. Development, uses packager\n2. Staging, builds an APK with staging deployment key\n3. Release, builds APK with release deployment key.\nOr is there a clever way to use the same debug build for 1 and 2?\n. @matrosov-nikita Thanks very much for the script. I'll give it a try.\nThis issue has been reported  on Product Pains and there is a PR pending to fix it.. Just tried taking out the !__DEV__ in the above code so codepush would run in the debug build. It also crashes after downloading the update. Then, weirdly, on restart it claims it is using the update bundle but it is not.\n11-17 11:51:09.761 22582 22582 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/io.malamode.debug/files/CodePush/5b0bc4dfaeb43a8ed77cd0c98c98861f49536fef992ab38eada7b7e0fd578218/CodePush/index.android.bundle\"\n11-17 11:51:11.181 22582 22624 I ReactNativeJS: Running application \"MalaMode\" with appParams: {\"initialProps\":{},\"rootTag\":1}. __DEV__ === true, development-level warning are ON, performance optimizations are OFF\n11-17 11:51:12.601 22582 22624 I ReactNativeJS: [CodePush] Checking for update.\n11-17 11:51:13.401 22582 22624 I ReactNativeJS: [CodePush] App is up to date.\nI know it's using not using the update bundle because __DEV__ is false in the update bundle, and  the update's features are not there.\n. Thanks! I'm on react-native 0.32.1. Do I have to upgrade react-native to\nuse newer versions of RN code-push?\nOn Thu, Nov 17, 2016 at 2:59 PM Richard Hua notifications@github.com\nwrote:\n\n@chetstone https://github.com/chetstone For the behavior in the debug\nbuild, I wouldn't worry as your app is likely still loading from the\npackager (React Native coerces it into doing so). A lot of our users don't\ntest CodePush in debug, but if you'd like to do so there are some more\ndetails in #153\nhttps://github.com/Microsoft/react-native-code-push/issues/153 and a\nworkaround in #438\nhttps://github.com/Microsoft/react-native-code-push/issues/438.\nI believe that the crash that you're seeing happens when\ncodePush.getUpdateMetadata() is called in a specific situation, and can\nbe fixed by upgrading to the latest react-native-code-push (1.16.0-beta).\nIf you'd like more details, the bug is #515\nhttps://github.com/Microsoft/react-native-code-push/issues/515, which\nwas fixed in react-native-code-push@1.15.0-beta (release notes\nhttps://github.com/Microsoft/react-native-code-push/releases/tag/v1.15.0-beta\n).\nPlease let me know if that solves the problem for you!\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/612#issuecomment-261383011,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AA7l197tTv0HtR5xyaXJ8u_uEuUUMp9Yks5q_M43gaJpZM4K1qAC\n.\n. Oh and by the way, I agree with most of your users who don't test CodePush in debug, because it seems like a very tricky thing to do. But your instructions on Multi-Deployment Testing seem to suggest that that's the way to do it. I think it would be better to have separate Debug, Staging and Release builds the way you have described the setup for iOS. Do you agree?\n. @silhouettes Thanks a lot. Upgrading to 1.16.0-beta fixed the crashing problem.\n\nLooking forward to updates on android configuration.\n. ",
    "Jered": "153.4MB fairly hefty but there are a lot of included images since this is a prototype without a CDN or backend.\n. awesome! Thank you so much.\n. Worked perfectly! Thank you.\n. ",
    "CaoLiang1991": "codePush.sync({\n            updateDialog: false,\n            installMode: codePush.InstallMode.ON_NEXT_RESTART\n          }\n        );\nFirst page  is LoginPage\uff0cafter  login success\uff0cit is not to second page\u3002 It is waiting for the download.\n.   render() {\n    if (this.state.isLogin === true) {\n      return ;\n    } else if (this.state.isLogin === null) {\n      return \n    } else {\n      if (React.Platform.OS == 'ios') {\n        StatusBarIOS.setStyle(0);\n      }\n      return ;\n    }\n  },\nimport Router from 'react-native-router-fix';\n. ",
    "gmchaturvedi1": "when i am using react-native run-android and start chrome console showing\ncode-push update then showing network error.\nkindly find the scrreenshot\n[image: Inline image 1]\nkindly suggest what to check to resolve the same\nreagrds\nG M Chaturvedi\nOn Fri, Apr 22, 2016 at 8:26 PM, Jonathan Carter notifications@github.com\nwrote:\n\n@gmchaturvedi1 https://github.com/gmchaturvedi1 Could you take a look\nat the Chroome console or ADB logcat output when you call sync in your app?\nThat should help shed some light on what may be happening. Also, our\ntroubleshootinf\nhttps://github.com/Microsoft/react-native-code-push/blob/master/README.md#debugging--troubleshooting\ndocs have some common issues and workarounds that could be worth double\nchecking.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly or view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/304#issuecomment-213463140\n. Now updaye is giving popup but nothing changed .ia it take more time to be\nin effect\nOn 22 Apr 2016 23:07, \"Jonathan Carter\" notifications@github.com wrote:\nCould you try restarting the emulator? Sometimes, when you switch networks\nthere can be connectivity issues. Restarting the emulator will resolve\nthat, if that is in fact the issue.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly or view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/304#issuecomment-213522888\n. I am just calling sync woth root component componentdidmount lifecycle and\ncall codePush.sync() as suggested in documents\nOn 22 Apr 2016 23:54, \"Jonathan Carter\" notifications@github.com wrote:\nWhat does the console output show after you try to install the update?\nAlso, can you share how you're calling sync?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly or view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/304#issuecomment-213540937\n. in localhost update is working but in googleplay pop up update is coming\nbut changes is not done.\n\nOn Sat, Apr 23, 2016 at 12:07 AM, Jonathan Carter notifications@github.com\nwrote:\n\nOK cool. After you install the update, and then kill and restart the app,\nyou're not seeing the changes take affect? Could you try looking at the\nChrome logs to see what may be going on?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly or view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/304#issuecomment-213546771\n. i did the same as you have suggested in your trail mail.But still not\nupdating. i set InstallMode.IMMEDIATE .Update dialogue box show\nimmediateley after release update but when we continue nothing chnaged as\nper the release(whilein locl system it is working).Is their anything so it\nis not updating in app install through google play.\n\nRegards\nG m chaturvedi\nOn Sat, Apr 23, 2016 at 4:13 AM, Geoffrey Goh notifications@github.com\nwrote:\n\nFrom what I am understanding, you are calling codePush.sync() without any\nadditional options, so the installMode will default to ON_NEXT_RESTART.\nTherefore, the changes will only show up when you kill the app. This can\nappear to behave different sometimes for certain emulators from my\nexperience, where if the system resources allocated are not enough,\nsometimes backgrounding the app will immediately cause the process to get\nkilled, in which case simply returning to the app will cause it to pick up\nthe updates.\nSo, I would suggest for the googleplay version, to either try forcibly\nkilling the app after the update is installed, or changing the call to\ncodePush.sync() to use InstallMode.ON_NEXT_RESUME or\nInstallMode.IMMEDIATE, and see if it solves your problem. Let us know if\notherwise!\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly or view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/304#issuecomment-213614834\n. i see a weired thing that when update is available the update window is\nshowing only continue button. but as i am watching one screecast of mr\npurushottam ,on update two button will rise install and ignor.\n\nMainActivty\npackage com.go4skillcom;\nimport com.facebook.react.ReactActivity;\nimport io.realm.react.RealmReactPackage;\nimport com.oblador.vectoricons.VectorIconsPackage;\nimport com.microsoft.codepush.react.CodePush;\nimport com.facebook.react.ReactPackage;\nimport com.facebook.react.shell.MainReactPackage;\nimport java.util.Arrays;\nimport java.util.List;\npublic class MainActivity extends ReactActivity {\n```\n/*\n * Returns the name of the main component registered from JavaScript.\n * This is used to schedule rendering of the component.\n /\n@Override\nprotected String getMainComponentName() {\n    return \"go4skillcom\";\n}\n/*\n * Returns whether dev mode should be enabled.\n * This enables e.g. the dev menu.\n /\n@Override\nprotected boolean getUseDeveloperSupport() {\n    return BuildConfig.DEBUG;\n}\n/*\n * A list of packages used by the app. If the app uses additional views\n * or modules besides the default ones, add more packages here.\n /\n@Override\nprotected List getPackages() {\n    return Arrays.asList(\n        new MainReactPackage(),\n        new RealmReactPackage(),\n        new VectorIconsPackage(),\n        new CodePush(\"6fmr8pcJ2Ov51fm3at9_ioOn5TXEVy9szxs6g\", this,\n```\nBuildConfig.DEBUG)\n        );\n    }\n}\nregards\nG M chaturvedi\nOn Sat, Apr 23, 2016 at 9:23 PM, Jonathan Carter notifications@github.com\nwrote:\n\nCan you share what your MainActivity looks like? And also, can you try\ncopying and pasting the logs of the app when trying to sync an update in\nthe Google Play version? That should help us figure out what might be going\non. You can't use Chrome with the release build, but you can use ADB via\n\"adb logcat *:S ReactNative:V ReactNativeJS:V\".\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly or view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/304#issuecomment-213768059\n. Sorry for the delayed response from my side asbibm not access vthe\nnetwork.kindly help me out on yhis\nOn 25 Apr 2016 18:54, \"gajendra nath\" gmchaturvedi@gmail.com wrote:\ni see a weired thing that when update is available the update window is\nshowing only continue button. but as i am watching one screecast of mr\npurushottam ,on update two button will rise install and ignor.\nMainActivty\npackage com.go4skillcom;\nimport com.facebook.react.ReactActivity;\nimport io.realm.react.RealmReactPackage;\nimport com.oblador.vectoricons.VectorIconsPackage;\nimport com.microsoft.codepush.react.CodePush;\nimport com.facebook.react.ReactPackage;\nimport com.facebook.react.shell.MainReactPackage;\nimport java.util.Arrays;\nimport java.util.List;\npublic class MainActivity extends ReactActivity {\n```\n/*\n * Returns the name of the main component registered from JavaScript.\n * This is used to schedule rendering of the component.\n /\n@Override\nprotected String getMainComponentName() {\n    return \"go4skillcom\";\n}\n/*\n * Returns whether dev mode should be enabled.\n * This enables e.g. the dev menu.\n /\n@Override\nprotected boolean getUseDeveloperSupport() {\n    return BuildConfig.DEBUG;\n}\n/*\n * A list of packages used by the app. If the app uses additional views\n * or modules besides the default ones, add more packages here.\n /\n@Override\nprotected List getPackages() {\n    return Arrays.asList(\n        new MainReactPackage(),\n        new RealmReactPackage(),\n        new VectorIconsPackage(),\n        new CodePush(\"6fmr8pcJ2Ov51fm3at9_ioOn5TXEVy9szxs6g\", this,\n```\nBuildConfig.DEBUG)\n        );\n    }\n}\nregards\nG M chaturvedi\nOn Sat, Apr 23, 2016 at 9:23 PM, Jonathan Carter <notifications@github.com\n\nwrote:\nCan you share what your MainActivity looks like? And also, can you try\ncopying and pasting the logs of the app when trying to sync an update in\nthe Google Play version? That should help us figure out what might be going\non. You can't use Chrome with the release build, but you can use ADB via\n\"adb logcat *:S ReactNative:V ReactNativeJS:V\".\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly or view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/304#issuecomment-213768059\n. so shall i need to add these as suggested in mainActivity. Kindly tell me\nthe location .\n\n\nso i can try and get back with update.\nthanks & Regards\nG M Chaturvedi\nOn Mon, Apr 25, 2016 at 9:23 PM, Jonathan Carter notifications@github.com\nwrote:\n\n@gmchaturvedi1 https://github.com/gmchaturvedi1 Your MainActivity class\nneeds to override the getJSBundleFile file in order for the React Native\nruntime to ask CodePush where to get the JS bundle from when the app\nstarts. Refer to step #2\nhttps://github.com/Microsoft/react-native-code-push/pull/2 in the Android\nconfiguration docs\nhttps://github.com/Microsoft/react-native-code-push#plugin-configuration-android\n.\n@Overrideprotected String getJSBundleFile() {\n   return CodePush.getBundleUrl();\n}\nThis was likely working for you during development because the changes you\nwere deploying to CodePush were also available locally, so when the app\nwould restart, the packager would pick them up.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly or view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/304#issuecomment-214413176\n. after adding these lines in mainactivity file when i assemble and install\nlocally then this is going corrupt\n\nOn Mon, Apr 25, 2016 at 9:51 PM, gajendra nath gmchaturvedi@gmail.com\nwrote:\n\nso shall i need to add these as suggested in mainActivity. Kindly tell me\nthe location .\nso i can try and get back with update.\nthanks & Regards\nG M Chaturvedi\nOn Mon, Apr 25, 2016 at 9:23 PM, Jonathan Carter <notifications@github.com\n\nwrote:\n@gmchaturvedi1 https://github.com/gmchaturvedi1 Your MainActivity\nclass needs to override the getJSBundleFile file in order for the React\nNative runtime to ask CodePush where to get the JS bundle from when the app\nstarts. Refer to step #2\nhttps://github.com/Microsoft/react-native-code-push/pull/2 in the Android\nconfiguration docs\nhttps://github.com/Microsoft/react-native-code-push#plugin-configuration-android\n.\n@Overrideprotected String getJSBundleFile() {\n   return CodePush.getBundleUrl();\n}\nThis was likely working for you during development because the changes\nyou were deploying to CodePush were also available locally, so when the app\nwould restart, the packager would pick them up.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly or view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/304#issuecomment-214413176\n. its done and now chnaging. thanks for your valuable support to resolve\nthis. i just have one doubt when i will install any module then code-push\nrelease will change this or i have generate apk and upload in google play.\n\n\nthanks & Regards\nG M Chaturvedi\nOn Mon, Apr 25, 2016 at 10:04 PM, Jonathan Carter notifications@github.com\nwrote:\n\nUpdate your MainActivity file like so. Note that I simply added the\ngetJSBundleFile override to the code that you pasted above. As I\nmentioned in my previous comment, you should be able to follow our\nconjuration steps and ensure that you've setup everything correctly.\npublic class MainActivity extends ReactActivity {\n    /*     * Returns the name of the main component registered from JavaScript.     * This is used to schedule rendering of the component.     /\n    @Override\n    protected String getMainComponentName() {\n        return \"go4skillcom\";\n    }\n/**     * Returns whether dev mode should be enabled.     * This enables e.g. the dev menu.     */\n@Override\nprotected boolean getUseDeveloperSupport() {\n    return BuildConfig.DEBUG;\n}\n@Override\n   protected String getJSBundleFile() {\n      return CodePush.getBundleUrl();\n   }\n/**     * A list of packages used by the app. If the app uses additional views     * or modules besides the default ones, add more packages here.     */\n@Override\nprotected List<ReactPackage> getPackages() {\n    return Arrays.<ReactPackage>asList(\n        new MainReactPackage(),\n        new RealmReactPackage(),\n        new VectorIconsPackage(),\n        new CodePush(\"6fmr8pcJ2Ov51fm3at9_ioOn5TXEVy9szxs6g\", this,BuildConfig.DEBUG)\n    );\n}\n}\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly or view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/304#issuecomment-214431751\n. our app in alpha stage .We are working on education app for training and\nassessment for diffenet competative examination and boards exam in india\nand we will be live by next week. Once we will live ,we will share you our\napp details. Again thanks because it will ease  our life continuous\nintegration.\n\nThanks & Regards\nG M Chaturvedi\nOn Tue, Apr 26, 2016 at 9:00 AM, Jonathan Carter notifications@github.com\nwrote:\n\nWe're more than happy to help! Thank you for spending the time to give\nCodePush a try :)\nAs you mentioned, when you update your React Native version, or add/update\na module, you will need to upload a new APK to the App Store. CodePush can\nonly be used for changes that touch JS and/or images, Java code.\nBTW, would you be able to share any details about your app? Is it live in\nthe Google Play store already? I'd love to check it out. Thanks!\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly or view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/304#issuecomment-214596489\n. sorry i am late replying. it is solved .. \n",
    "dhrrgn": "It happens when the app first starts and we call sync.  Here is our code:\nthis.setState({state: CHECKING}, () => {\n      codePush.sync({ updateDialog: false }, (syncStatus) => {\n        switch (syncStatus) {\n          case codePush.SyncStatus.DOWNLOADING_PACKAGE:\n            this.setState({state: DOWNLOADING});\n            break;\n          case codePush.SyncStatus.INSTALLING_UPDATE:\n            this.setState({state: APPLYING});\n            break;\n        }\n      })\n        .then((syncStatus) => {\n          switch (syncStatus) {\n            case codePush.SyncStatus.UP_TO_DATE:\n              this.setState({state: UP_TO_DATE}, this._done);\n              break;\n            case codePush.SyncStatus.UPDATE_INSTALLED:\n              this.setState({state: DONE}, this._done);\n              break;\n            default:\n              this.setState({state: DONE}, this._done);\n          }\n        })\n        .catch(() => {\n          this.setState({state: DONE}, this._done);\n        });\n    });\n. Small note on where that code is:  That code is in an InitialLaunch component which is shown on first app launch after install to make sure they are up to date.  All other times (on resume or cold-start) we simply run: codePush.sync({ updateDialog: false, installMode: codePush.InstallMode.ON_NEXT_RESUME });\n. It only seems to happen on the first launch.  To answer @geof90's question:  No, we have all calls to sync (for resume and cold-start) guarded with this:\n// This is only set to `true` if the InitialLaunch fully completes its CodePush sync.\n    if (Settings.get('InitialLaunchCompleted', false)) {\n      this._checkForUpdates(); // This function initiates the sync.\n    }\n. Just a little more info regarding the exception: We have seen crashes on Android 4.4.2 and 5.0.1, and funnily enough, it has only happened on Samsung devices (but I highly suspect that is just a coincidence).\nAlso, not sure this helps, but here is the stacktrace from the update check HTTP request thread:\nOkHttp https://codepush.azurewebsites.net/updateCheck?deploymentKey=<REDACTED>&appVersion=1.5.0&packageHash=<REDACTED>&isCompanion=&label=v1&clientUniqueId=<REDACTED>\n       at libcore.io.Posix.getaddrinfo(Posix.java)\n       at libcore.io.ForwardingOs.getaddrinfo(ForwardingOs.java:61)\n       at java.net.InetAddress.lookupHostByName(InetAddress.java:405)\n       at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)\n       at java.net.InetAddress.getAllByName(InetAddress.java:214)\n       at com.squareup.okhttp.internal.Network$1.resolveInetAddresses(Network.java:29)\n       at com.squareup.okhttp.internal.http.RouteSelector.resetNextInetSocketAddress(RouteSelector.java:187)\n       at com.squareup.okhttp.internal.http.RouteSelector.nextProxy(RouteSelector.java:156)\n       at com.squareup.okhttp.internal.http.RouteSelector.next(RouteSelector.java:98)\n       at com.squareup.okhttp.internal.http.HttpEngine.createNextConnection(HttpEngine.java:344)\n       at com.squareup.okhttp.internal.http.HttpEngine.connect(HttpEngine.java:327)\n       at com.squareup.okhttp.internal.http.HttpEngine.sendRequest(HttpEngine.java:245)\n       at com.squareup.okhttp.Call.getResponse(Call.java:267)\n       at com.squareup.okhttp.Call$ApplicationInterceptorChain.proceed(Call.java:224)\n       at com.squareup.okhttp.Call.getResponseWithInterceptorChain(Call.java:195)\n       at com.squareup.okhttp.Call.access$100(Call.java:34)\n       at com.squareup.okhttp.Call$AsyncCall.execute(Call.java:162)\n       at com.squareup.okhttp.internal.NamedRunnable.run(NamedRunnable.java:33)\n       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)\n       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)\n       at java.lang.Thread.run(Thread.java:841)\n. @lostintangent I will update and publish a new release today.  I got a few more crash reports over the weekend for a separate issue I will be opening.\n. @lostintangent The latest version has resolved this crash.  Thanks for the quick turn-around on this.\n. @lostintangent I cannot reproduce this.  I can't see any information as to what the user was doing.  However, I am seeing that 9 users have had this happen 44 times.  So, I assume that it is not a first-launch type issue...unless those users keep re-installing...which is highly unlikely.\n. ",
    "ScandyMark": "not a native Android app.  buildscript came about from crashlytics install\nhttps://fabric.io/kits/android/crashlytics/install\nI've left an issue report with rnpm folks.  I have no strong need to have issue pushed, simply moved line in the build file.\n. Closing make sense.  Concern would be that folks often look at open issue when they run into an error, so might over look.  But my experience is RNPM folks fixes usually come in a day or two.\n. ",
    "L-Jovi": "@lostintangent  thanks for your reply, I eventually ensure it's react native version cause issue.\n. @anthonywebb  I think you could try to remove Bundle React Native code and images of Build Phases in Xcode to prevent that shell script execute.\n. @lostintangent   thanks for your reply !\nI follow that calling notifyApplicationReady in componentDidMount and it works fine now :)\n. @lostintangent  thanks for your patient reply :)\n. thanks for reply :)\n. @sergey-akhalkov  thanks for your reply :)\nabout the config\n\nCould you please confirm if you are using info.plist file to store production deployment key by default and using codePush.sync({ deploymentKey: STAGING_KEY });\n\nyes, I refer to the README and config the $(CODEPUSH_KEY) in Info.plist\nabout the key specified as an option each time it is used\n\ncode to override default value by clicking the hidden button 6 times?\nIf so, please note that the deployment key specified via codePush.sync({ deploymentKey: STAGING_KEY }); does not persist beyond the given call, and needs to be specified as an option each time it is used. It means that after app restarts - production deployment key is in use again,\n\nyes, I config my Production and Staging key in my js file as json format, and read them everytime when codepush.sync called.\nabout the approach to fix issue\n\n\nThe hidden button is being clicked 6 times again, so the app should work in Production mode from this moment across all app restarts.\n\n\nI just not very clear above step, I have 2 test env,\nthe hidden button which could be clicked 6 times only trigger Staging hotfix by our inner team,\nand open app could only trigger Production hotfix by all user (our inner team + outer user)\nI'm not sure why click hidden button could trigger the Production hotfix from what you say in step 3, I execute the hotfix logic in separated user interaction.\nactually I'm not ensure that I understand code-push logic right, in my opinion, code-push could \"remember\" the version at liner timeline(forgive my poor english, I dont know more appropriate word..)\nI mean that if I push Staging-0 -> promote to Production-0 -> push Staging-1, the code-push will know that the Staging-1 is newest version, so it will get null response from checkForUpdate the Production.\nso if I understand right, I think my hotfix logic may make sense, I just don't understand clearly why the code-push still checkForUpdate Production available after our inner team already apply the newest Staging-1 version, I think it should response null is right.\nsorry for the trouble,\nthanks again for your patience.\nregards.\n. @sergey-akhalkov   awesome, I eventually understand your mean, thanks for your patience :). Thanks for your reply :). @iTOYS Thanks for your reply, maybe I didn't express clearly.\nWe have native project which have several pages implemented by react-native,\nI have no idea that where the best place to call sync() method, because when user launch app, they have no chance to request whole js bundle from server if they don't arrive pages which implements by react-native.. ",
    "anthonywebb": "@L-Jovi but how did you fix it?  I have the same issue.\n. ",
    "tomauty": "Note that if I run that top command twice (without changing anything the second time) and do a second deploy, it will work! I would think they would have the same checksum. Not sure what's going on.\n. Unfortunately no, it's this one:\nThe update contents failed the data integrity check.\nI could try release-react, but my first command above should reset the packager cache anyway, I would think.\n. Good to know that I can shorten this build process though!\n. Yeah I don't mind releasing twice. If it helps, this also only happens when I'm updating from an existing codepush bundle. If I reinstall, I'll get the newest package without a second push.\n. Hmm I can do that. I definitely keep the release folder there for my whole development cycle, but it is still worth checking out, for sure.\n. Will be testing it now. In the past I've checked the release folder and it looked okay. I'll take a checksum too to be sure.\nEdit - Failed integrity check the first time. Here's the checksum:\n5f78678ff70af61d1997c3562e41dfe0\nObtained via find -s release -type f -exec md5sum {} \\; | md5sum.\n. Second release has a different checksum than the first, I wonder if my method is bad. Anyway, will keep posted.\n. Second one did work. Also noted that the bundle size was much larger the second time around. Maybe I should be re-creating the release folder every time?\n. First bundle had size 2300095 bytes, latter had 8865515. Sorry for spam, just reporting all possibly relevant info.\n. Update! I think I know what the deal is here. I thought react-native bundle already had implemented reset-cache, however it turns out they just added it in 0.26-rc.\nhttps://github.com/facebook/react-native/commit/90f9f48498ce6174d022d85fd87ae71715adf0e7\nI'll close this for now and rework my process to ensure cache is being reset, and will re-open if issues still occur. Thanks for the help!\n. I've been able to get this all to work by stopping the packager when running my release command, and also recreating the release folder each time. Currently it'll be difficult to move to release-react because of the inferred targetBinaryVersion. Working with TestFlight/Prod builds means I update that multiple times but might deploy to a lower version. Still in the evaluation phase though, and I do see I can specify it manually.\n. I would love this! Sorry for a useless comment, but I hope this makes it in soon.\n. I'm on 1.10.3-beta so...quite a bit behind. Didn't realize. Any risk with updating to latest if I'm on RN 0.24.1? \n. Yes please. What's the recommended 'next best thing' to immediate restarts for mandatory updates? \n. Noticing this as well. Changing to resizeMode={'contain'} seems to fix it. Most of these were absolutely positioned images. Maybe some data stripped from assets in the bundling/distribution process?. ",
    "youweit": "I just ran into this problem, recreating the ./release folder fixed this problem!\n. ",
    "rahuljiresal": "I keep running into this problem. This is what I see.\n2016-08-17 14:39:28.140 [info][tid:com.facebook.react.JavaScript] [CodePush] Checking for update.\n2016-08-17 14:39:28.549 [info][tid:com.facebook.react.JavaScript] [CodePush] Downloading package.\n2016-08-17 14:39:28.780 [info][tid:com.facebook.react.JavaScript] [CodePush] An unknown error occurred.\n2016-08-17 14:39:28.780 [info][tid:com.facebook.react.JavaScript] [CodePush] The update contents failed the data integrity check.\nI have tried code-push release-react and react-native bundle with code-push release separately. I also cleaned the release folder and recreated it. Nothing helped.\nEvery now and then, it is able to update. But not all the time. Does it depend on how often we release versions? \n. @silhouettes Thanks for the prompt reply. Just sent you an email.\n. Okay, found the problem. @silhouettes Will submit a PR soon and tag you.\n. @silhouettes Could you please take a look at this? Thanks!\n. @geof90 Android will not have the same problem because the Android emulator never generates these files. The emulator is actually a Virtual Machine running on your computer. Unlike the iPhone simulator, which runs on top of Mac OS (uses its libraries, sometimes with some changes), and \"simulates\" the behavior of iPhone.\n. @geof90 @silhouettes Made the changes to add __MACOSX to the ignore list.\nThanks for looking into this. \nIf possible, can you tag/release a new version on npm so I can start using that?\n. This file is never generated on iOS's file system. Its only Mac OS X that generates this file. The iPhone simulator (being a simulator, and not an emulator) uses OS X's file system, and hence you see this file on the simulator. So I'm guessing checking for the filename would be useless when the app is being built for release. But if you still insist, I can remove it.\n. ",
    "bluerunrun": "Hi @lostintangent @geof90 @silhouettes ,i run into same error. But in my case, after react-native bundle ,i have to add some js files to directory which i would code-push later.Because of that,i get \"Update contents fail data integrity check\".Is there a way to solve this problem?.Or is there a way to bundle some js files as assets instead of bundle into index.ios.bundle. Forgive my bad English.If you still need me to provide anything, please let me know.Thanks.. And if i just react-native bundle and code-push release without any extra operations such as I described above,code push will be performed as expected.. ",
    "zhaoziliang": "I also encountered this problem. I have compiled it with a Mac computer. So there is a .DS_Store file in the folder. After I delete this file and publish it using codepush, the problem is not there. I can try it.. I also encountered this problem. I have compiled it with a Mac computer. So there is a .DS_Store file in the folder. After I delete this file and publish it using codepush, the problem is not there. I can try it.. @alexandergoncharov \n./code-push release b-android ../android_js/ 1.0.2    --deploymentName Production\n./code-push release b-ios ../ios_js/ 1.0.2    --deploymentName Production\n. @yulianger \nIntegrity checking means that the summary calculated by the update package on the server is not the same as the one calculated by the client, so I suspect it is caused by a similar hidden file. You can find the reason from this aspect.. @yulianger \nYes, when I deleted the.DS_Store file, I solved the problem, but it was not guaranteed that all the mistakes were due to the file, and it could be caused by other reasons.. ",
    "sunny635533": "i also has the problem , and only found it in ios. How to solve it? codePush's update  alway failed in ios.. @NickToropov \n1. I don't have that code in my hight-component. I will try to add it next time, then verify the problem whether is  because of it?\n2. call checkForHotpatch method at hight-component's componentWillMount and also call  when app lifecycle is \u201cactive\u201d \n\n3. \n\n4. From getUpdateMetadata() , seems to get \"failedInstall:true\".\n5. this occur in Debug and Release.\n6. one of iOS version is 8.4.\nmy project is https://github.com/sunny635533/TestCodePush\nthanks!\n. Hi, @NickToropov your step is right. Maybe you could try that:\ncode-push release-react issue1408-ios ios -m true -d Staging --des \"change add route button style\" -t \"*\"\nI think the rollback happens occasionally. Sometimes When downloading updates, the progress bar of the update unchanged, for example 23% , then the  page stays there for a long time and could not do anything! So I have to shut down App\u3002Finally  I can see a rollback in code-push history. \nI tried to disconnect the network or quit the app when I tried to update it midway. It still updated the lastest normally and didnt rollback. So i dont understand what the rollback would happen under what conditions??. @NickToropov I get a log with xcode!!!!\n2018-11-12 21:28:30.560 [info][tid:com.facebook.react.JavaScript] ========= env ==========Staging ,sessionId:20181112hsKrVymF2fkbsqh ,role:cz ,userId:A0000001141005A000 , routeName:TransportAccountNavigator\n2018-11-12 21:28:30.719 [info][tid:com.facebook.react.JavaScript] ========== getUpdateMetadata ======={\"isPending\":false,\"binaryDate\":\"1540967334.858006\",\"isMandatory\":true,\"label\":\"v9\",\"bundlePath\":\"CodePush/main.jsbundle\",\"failedInstall\":false,\"packageHash\":\"1613688c38da08fb6df38e4a11ef64dcf5e817d619a6d573a934ce468975fe6f\",\"downloadUrl\":\"https://codepushupdates.azureedge.net/storagev2/NcTGTQIWIvgQgkoi70zJ0WWYgElw080db430-e919-421b-b0c5-16a7302cb692\",\"description\":\"test code-push update66\",\"packageSize\":617008,\"appVersion\":\"2.9.4\",\"deploymentKey\":\"Q_QxtfpH7ZsWgioSgV0nwJKixxX4080db430-e919-421b-b0c5-16a7302cb692\",\"isFirstRun\":false}\n\u2026\u2026.\n2018-11-12 21:29:27.266076+0800 Staging[20648:1980311] [] nw_connection_get_connected_socket 79 Connection has no connected handler\n2018-11-12 21:29:28.076899+0800 Staging[20648:1980111] Could not successfully update network info during initialization.\n2018-11-12 21:29:28.077784+0800 Staging[20648:1980111] Could not successfully update network info during initialization.\n2018-11-12 21:29:28.303478+0800 Staging[20648:1980598] [] nw_connection_get_connected_socket 83 Connection has no connected handler\n2018-11-12 21:29:28.602114+0800 Staging[20648:1980111] [Snapshotting] Snapshotting a view (0x7fe118321400, UIKeyboardImpl) that is not in a visible window requires afterScreenUpdates:YES.\n2018-11-12 21:29:29.596947+0800 Staging[20648:1981054] Task <87B66155-69B6-4739-86C9-A9385B4C1058>.<1> finished with error - code: -999\n2018-11-12 21:29:29.859 [info][tid:com.facebook.react.JavaScript] ======= checkForHotpatch =======Q_QxtfpH7ZsWgioSgV0nwJKixxX4080db430-e919-421b-b0c5-16a7302cb692\n2018-11-12 21:29:29.859610+0800 Staging[20648:1980643] ======= checkForHotpatch =======Q_QxtfpH7ZsWgioSgV0nwJKixxX4080db430-e919-421b-b0c5-16a7302cb692\n2018-11-12 21:29:29.862 [info][tid:com.facebook.react.JavaScript] [CodePush] Disallowing restarts\n2018-11-12 21:29:29.862347+0800 Staging[20648:1980643] [CodePush] Disallowing restarts\n2018-11-12 21:29:30.310197+0800 Staging[20648:1981313] TIC TCP Conn Failed [86:0x60400016dc80]: 3:-9802 Err(-9802)\n2018-11-12 21:29:30.336113+0800 Staging[20648:1981312] [] nw_connection_get_connected_socket 88 Connection has no connected handler\n2018-11-12 21:29:30.758328+0800 Staging[20648:1981312] TIC TCP Conn Failed [87:0x604000172c00]: 3:-9802 Err(-9802)\n2018-11-12 21:29:31.142669+0800 Staging[20648:1981312] TIC TCP Conn Failed [81:0x600000176980]: 12:8 Err(-65554)\n2018-11-12 21:29:31.147724+0800 Staging[20648:1981054] Task <5AC47CE1-8B2A-4B61-A855-9422EE10EA35>.<0> HTTP load failed (error code: -1003 [12:8])\n2018-11-12 21:29:31.147982+0800 Staging[20648:1981312] NSURLConnection finished with error - code -1003\n2018-11-12 21:29:32.659 [info][tid:com.facebook.react.JavaScript] ==== code-push onHotpatchDownloadStart! ===\n2018-11-12 21:29:32.659326+0800 Staging[20648:1980643] ==== code-push onHotpatchDownloadStart! ===\n2018-11-12 21:29:33.362 [info][tid:com.facebook.react.JavaScript] code-push onHotpatchDownloadProgress done is 17771,total is 432451\n2018-11-12 21:29:33.562566+0800 Staging[20648:1980643] code-push onHotpatchDownloadProgress done is 392781,total is 432451\n2018-11-12 21:29:33.590 [info][tid:com.facebook.react.JavaScript] code-push onHotpatchDownloadProgress done is 432451,total is 432451\n2018-11-12 21:29:33.591706+0800 Staging[20648:1980643] code-push onHotpatchDownloadProgress done is 432451,total is 432451\n2018-11-12 21:29:33.673753+0800 Staging[20648:1981311] \n[CodePush] Applying diff update.\n2018-11-12 21:29:33.674093+0800 Staging[20648:1981311] \n[CodePush] Verifying hash for folder path: /Users/sunny/Library/Developer/CoreSimulator/Devices/C16E983C-5107-4573-A32C-B54E52912DEC/data/Containers/Data/Application/3A97B5A2-1155-4ACF-9C4D-EE56D77DAE5E/Library/Application Support/CodePush/d2b14883a7983a6b91ea233e27b731bfb50a47c7ef1507f978521ed62da73941\n2018-11-12 21:29:33.729352+0800 Staging[20648:1981311] \n[CodePush] Manifest string: (\n    \"CodePush/main.jsbundle.meta:831730b045b941c1067b0b3e6bd21110e08f85bbf8fdd1f723792fa8910791da\",\n    \"CodePush/main.jsbundle:e1f93412f15931b8040b1971b6d72e0d6da81ed6d4a8ce2eb6e8d3935f439086\",\n    \"CodePush/assets/node_modules/react-native-ratings/src/images/bell.png:315749213623d6d0f095ed3a2bea7c205a7c85a1799014f7831bb30df73d0188\",\n    \"CodePush/assets/node_modules/react-native-ratings/src/images/airbnb-star-selected.png:cc272529e7576ef8f86b1b758c2610f53d6ceb5f39698cacce7d060c00a39cd3\",\n    \"CodePush/assets/node_modules/react-native-ratings/src/images/heart.png:bf6adfcc3b77fdc0e224a8dd84ff1e8ee109645daae9bb32486b70cce6fc0316\",\n    \"CodePush/assets/node_modules/react-native-ratings/src/images/airbnb-star.png:a15b007aa47fa315c13854a02cabdeef989138ae781ff267ddfe756f8003b0c8\",\n    \"CodePush/assets/node_modules/react-native-ratings/src/images/rocket.png:202386b813319debcf2a4a5307f01ae42e451c619dc25ad53df888a6045f7aa9\",\n    \"CodePush/assets/node_modules/react-native-ratings/src/im\n2018-11-12 21:29:33.730289+0800 Staging[20648:1981311] \n[CodePush] Expected hash: d2b14883a7983a6b91ea233e27b731bfb50a47c7ef1507f978521ed62da73941, actual hash: 9fc0946d2a8d0c3ea9a7a5f4158208b2eb3126e4513c139bfa337630b9c499d8\n2018-11-12 21:29:33.730421+0800 Staging[20648:1981311] \n[CodePush] The update contents failed the data integrity check.\n2018-11-12 21:29:33.750 [info][tid:com.facebook.react.JavaScript] ===== code-push onHotpatchDownloadFinish! ====\n2018-11-12 21:29:33.750579+0800 Staging[20648:1980643] ===== code-push onHotpatchDownloadFinish! ====\n2018-11-12 21:29:33.751 [info][tid:com.facebook.react.JavaScript] [CodePush] The update contents failed the data integrity check.2018-11-12 21:33:20.464273+0800 Staging[20648:1981553] [] nw_connection_get_connected_socket 314 Connection has no connected handler\n2018-11-12 21:33:22.563590+0800 Staging[20648:1984648] [] nw_connection_get_connected_socket 317 Connection has no connected handler\n2018-11-12 21:33:24.037142+0800 Staging[20648:1980111] Could not successfully update network info during initialization.\n2018-11-12 21:33:24.390978+0800 Staging[20648:1981054] TIC TCP Conn Failed [319:0x604000173740]: 12:8 Err(-65554)\n2018-11-12 21:33:24.393449+0800 Staging[20648:1984648] Task .<0> HTTP load failed (error code: -1003 [12:8])\n2018-11-12 21:33:24.398786+0800 Staging[20648:1984648] NSURLConnection finished with error - code -1003\n2018-11-12 21:33:24.509977+0800 Staging[20648:1984648] [] nw_connection_get_connected_socket 321 Connection has no connected handler\n2018-11-12 21:33:24.726024+0800 Staging[20648:1984648] [] nw_connection_get_connected_socket 322 Connection has no connected handler\n**2018-11-12 21:33:24.772737+0800 Staging[20648:1980111] [Snapshotting] Snapshotting a view (0x7fe118080e00, UIKeyboardImpl) that has not been rendered at least once requires afterScreenUpdates:YES.\n2018-11-12 21:29:33.751530+0800 Staging[20648:1980643] [CodePush] The update contents failed the data integrity check.\n2018-11-12 21:29:33.959276+0800 Staging[20648:1981311] [] nw_connection_get_connected_socket 95 Connection has no connected handler\n2018-11-12 21:29:34.420172+0800 Staging[20648:1981311] [] nw_connection_get_connected_socket 96 Connection has no connected handler\n2018-11-12 21:29:35.772 [info][tid:com.facebook.react.JavaScript] [CodePush] Re-allowing restarts\n2018-11-12 21:29:35.772507+0800 Staging[20648:1980643] [CodePush] Re-allowing restarts. ok\uff0chttps://github.com/sunny635533/TestCodePush\uff0c\n@NickToropov i add this in demo project.. @NickToropov you just run\n1. run \" npm install\" .\n2. go to ios folder, run \" pod install\" .\n3. run ios project on simulator, then push a new update to code-push server, like that:\n code-push release-react TestCodePush-iOS ios -m true -d Staging --des \"test code-push update\" -t \">=2.9.4\" \nThen app will get the update from code-push and will get some error logs from xcode. App is dead at this time ,because it always stay at a update's progress page !\n. @NickToropov , I run code-push release-react** from TestCodePush folder,not ios. The issue didnt  reproduced from my demo repository. In my real project, sometimes the issue will occur.. In ios , I didnt add CodePushPublicKey in info.list . Android also didnt add the CodePushPublicKey. I just add it in js codes. \n\n\n\nIf ios does not add this key, is there a chance that the hash key will not match and roll back?. In my demo project, also has progress dialog when app get a new update from code-push,it will show.I think i should try add CodePushPublicKey in my project, and check the problem whether still occur.. @NickToropov   Always keep in touch with me, thank you for your patience so much !!! You help me find the cuase of the problem that I really want to know\uff01\nBut, is there a way to tell me when the user device space is not enough?. @NickToropov OK. I will consider what you said.. @NickToropov No. thanks!. ",
    "justim": "It's the very basic implementation of Code Push with just an codePush.sync() call in the componentDidMount, nothing fancy.\nIt seems from their feedback that it's just about the location of the bundle, which is synced to iCloud.\n. Great! Thanks.\n. Thanks! I just pushed a new version to iTunes Connect for review with the new version.\n. Yay! Our app was successfully released. Thanks for the quick response! \ud83d\udc4d \n. Yes, sure :)\nWe're currently in the progress of rebuilding our old app in React Native. We released a pretty basic version and want to use CodePush to quickly iterate with new features. It's exciting for us as well!\nApp store: Dutch home rentals\n. Sweet, I created an issue for this, thanks! Microsoft/code-push#218\n. ",
    "scottbommarito": "did u verify that before it was syncing CodePush assets to the iCloud and after this it doesn't?\nif yes, LGTM\n. LGTM...we should do this on cordova as well, a lot of the code should be almost directly portable\n- Am in the process of writing the Cordova implementation :) - geof90\n. // LGTM\n. // LGTM\n. // LGTM\n. // LGTM\n. note: i have checked in the entirety of the code-push-plugin-testing-framework so that we can start testing the app while we wait for OSS approval\n. succeeds on VSTS!\n. Thanks for submitting this change! I've actually already made this change in another PR that's in review. It should be merged fairly soon. Stay tuned!\n. Hey @lisong, the change you requested is now merged!\n. // LGTM\n. Looks pretty good to me! Thanks for these changes!\n. @lostintangent \n. @geof90 \n. @geof90 @lostintangent \n. updated this again\n@geof90 @lostintangent \n. @geof90 @lostintangent \nhow about now?\n. // LGTM\n. small question, // LGTM regardless\n. wait, why are we taking these out if we never touched those sections in the readme?\n. not super familiar with react native, but if we call it CodePushPackage then that gets confusing with the concept of a \"package\" with respect to CodePush, aka local and remote packages. maybe CodePushReactPackage to avoid confusion?\n. we should take a look at our Android code then--the naming convention for member variables in native Android code is to prefix with an m, aka mVariableName\n. +1 on the change them to const, you're not doing anything special here so just plain old compile-time const is completely fine\n. why are some of these static and some not?\n. this and \"didUpdate\" should be ordered below the block of static keys right below this, statics/consts/readonlys should all be at the top of the file and then the nonconsts/nonstatics should be next\n. my understanding of it is \"if we can't parse the failedUpdates from the settings, then replace the failedUpdates in the settings with an empty JSON object\". makes sense to me if we're sure that the only reason JArray.parse could fail is that failedUpdatesString is filled with invalid data, and that we're not overwriting good data that just failed to parse once due to some other issue\n. I agree, would look a lot cleaner.\n. is it necessary to keep calling create container every time we need to read or write to the settings? is it possible we could cache this and save time?\n. it looks to me like all of these two get settings functions are very similar (getFailedUpdates/getPendingUpdate). get settings, read from settings and return default if failure, then return parsed object from settings and write default to settings if failure. could we make a helper function for them to use and also so that if we need to expand to additional settings we can do so easily?\n. this and RemovePendingUpdate are nearly identical but with a different key...not sure how helpful it would be to make a helper function but if there were 3 functions here I would definitely do it\n. may need to do that on the cordova side as well, I think I named the variable there \"lastPausedDate\" to follow this lol\n. it's short enough where I don't see a problem with it in the same file as CodePushNativeModule, but I agree that CodePushNativeModule should be moved to its own file\n. there's gotta be some initializer syntax for this...\n. Yea this class doesn't represent a package, it's a collection of methods that deal with packages/updates. I like \"UpdateManager\"\n. const instead?\n. glancing at the CodePushPackage class, it seems to me like the class as a whole just really consists of methods that might as well be static anyway and therefore not require an instance of the class. do you agree? could we get rid of this private variable and just call CodePushPackage.functionName() directly?\n. if you move these null checks into GetPackage you can shorten these functions down to \"return await GetPackage(await GetCurrentPackageHash());\" and then u also don't have to worry about being passed null packageHashes\n. GetCurrentPackageHash and GetPreviousPackageHash are nearly identical except using a different key...helper function?\n. I would recommend adding comments above each of these 4 line chunks of code.\ne.g. // Get the folder of the new update using its hash\n. I think this method needs some comments to be a little clearer. From now, what I understand is...\n\"if removePendingUpdate, then the current package is removed from the current package info and replaced by the update package and the previous package remains--otherwise, the previous package is removed and replaced by the current package and the update package is put as the current package.\"\nThe phrase \"removePendingUpdate\" is not descriptive enough for me because what it's really doing is deciding which package remains in the package info, and while the current package is assumed to be a pending update, that is not enforced or explained in this code anywhere.\n. if this is only used in your ios tests that you made for the react native ios tests, then i'm probably going to remove it so u shouldn't worry about having to implement this\n. (const?)\n. this does more than just copying...it also deletes the files that were deleted by the update. this is more like performDiffWithPackage or something\n. you try-catch this in getPendingUpdate...is it safe not to do so here?\n. probably should get rid of the CodePush prefix\n. probably should get rid of the CodePush prefix\n. yea, looks like you would have to use CopyAsync(destinationFolder, newName, nameCollisionOption) and pass in the existing name as the new name and replaceIfExisting for the nameCollisionOption\n. I think if we follow the idiom with the underscore prefixes then using \"this.\" shouldn't be necessary\n. yea I totally agree, I was just making a mental note to fix the idiom in our java code sometime\n. yea I agree was just mentioning this as something to consider\n. i like overwriteCurrentUpdate a lot more\n. usually you make these things static as well, since they're shared across every CodePushTelemetryManager.\nthat may require you to add \"CodePushTelemetryManager.\" before every use but I don't think so\n. how about DEPLOYMENT_STATUS_SUCCEEDED and DEPLOYMENT_STATUS_FAILED instead?\n. idk iOS idioms but this method name looks really odd to me...\n. I think you still need the\n// Type definitions for React Native CodePush module.\n// Project: https://github.com/Microsoft/react-native-code-push\nabove everything\n. i would prefer it if we left a comment describing how currentInstance could be not null but ultimately it doesn't matter\n. don't forget to remove this comma given that we're no longer doing ON_NEXT_RESTART_OPPORTUNITY\n. definitely this. i'm not sure if NativeCodePush.restartApp(onlyIfUpdateIsPending); ever returns if it actually restarts, so maybe return true; if a restart doesn't happen and return nothing (falsy) otherwise?\n. i think isAllowed would be a better name for this\n. isRestartAllowed?\n. i don't think it's necessary to track whether or not a restart was requested. i think what needs to happen is if an update is pending and its restart mode is IMMEDIATE then it needs to restart the app here, and otherwise shouldn't. tracking whether a restart was requested gets close to that behavior, but i'd be worried that it may lead to issues with situations like the following:\n1. restarts are disallowed\n2. IMMEDIATE update gets downloaded, wants to restart but is rejected\n3. ON_NEXT_RESUME update gets downloaded, doesn't try to restart\n4. restarts are allowed again\n5. app restarts because a restart was rejected while it was disallowed\nsince the pending update is not IMMEDIATE, this is invalid behavior\n. i generally avoid multi-line if statements without brackets, because\nif (a)\n    b;\nbecomes\nif (a)\n    b;\n    c;\nwithout much thought, which leads to issues. i would just append the return; on the end of the single line.\n. should we add this logic to the cordova plugin as well?\n. \"necessary\"?\n. i think \"onboarding wizard\" is a little bit of a confusing term to use here, maybe \"login process\" or something more colloquial?\n. it's weird to me that in these docs, allowRestart is first and disallowRestart is second, when you'd always want to call them in the opposite order. i think it's fine given that they're alphabetized but it's something to consider\n. \"login process\" or something more colloquial than \"onboarding wizard\"?\n. you have two \"3\"s LOL\n. why is this numbered list not separated by new lines while the one in allowRestart is?\n. when i looked it up...\nhttps://www.google.com/search?q=onboarding+wizard&ie=utf-8&oe=utf-8\nunlike \"watermark\", i don't see any wikipedia or similar page describing what it means in a dictionary definition, just a bunch of articles where a couple people seem to describe their process as an \"onboarding wizard\" arbitrarily. if somebody, like me, who has never heard the term and doesn't know what it means, tries to look it up and its not immediately obvious to them what it is, then we should use a different term lol\n. \"synchronizes\", \"separate\", and \"components\"\n. i think i would mention here that if a second update is installed while one is waiting to restart, the old update gets ignored in favor of the new update, and if that new update doesn't require a restart, no restart will happen.\n. (another \"onboarding wizard\" here in case decide to change to a different term)\n. yea i prefer \"onboarding process\" over \"onboarding wizard\" still\n. This was done so that the Cordova plugin and this plugin have identical numberings.\n. this was to fix a bug discovered during testing that threw this error but was never caught and crashed the app on startup\n. after this point, the rest of the PR is typings files\n. the following removed files are cordova plugin d.ts files that i accidentally checked in\n. woops, the leading _ led me to believe this was snake-case, my bad\n. I've been trying all day to get it work like that to, unfortunately, no avail. The general issue is that receiving information from the plugin requires using a promise. Because the promise is not synchronous, the _inProgress field takes a non-negligible amount of time to update, and calling restartApp twice in a row causes it to crash still because _inProgress has not been updated yet. In retrospect, I think this line is incorrect as well because it always sets _inProgress to true because NativeCodePush.getUpdateMetadata returns a promise (which passes the !! check) and not an actual boolean. I wrote a new test case so we now have coverage of a) restarts in progress block other restarts and b) restarts that are ignored do not block additional restarts but unfortunately this seems to be a harder problem than i had thought initially.\n. yea, talked with @geof90 about it offline, seems like the sync in progress approach is the best way to go\n. do you think it might be better to put this check inside tryReportStatus instead?\n. I don't see a new version of this function anywhere, it's necessary for tests.\n. ",
    "kemcake": "For an iOS app extension using React Native you have 2 options:\n- You build an new bundle especially for this extension that you embed in the .appex app\n- Or you use the same bundle but specify a different application or parameters while loading the app.\nFor the first case, you can just act as a normal application, and CodePush will work normally.\nFor the second case, the idea was to let CodePush decide where to get the bundle. After trying few approach and implement it the app where the problem came from, I finally found that since we can assume CodePush update the bundle at the application root (correct me if I'm wrong), all we need to do is to get that bundle directly without CodePush. We definitely don't want to start any CodePush update or job on the bundle while using the extension because it's often a short time experience and the main app could be running on the background.\nTo conclude, this PR is actually not necessary, I just had an idea that wasn't so good, if someone wants to use the main bundle managed by CodePush in an extension all he has to do is to get the bundle like this:\nNSBundle* bundle = [NSBundle mainBundle];\nbundle = [NSBundle bundleWithURL:[[bundle.bundleURL URLByDeletingLastPathComponent] URLByDeletingLastPathComponent]];\nNSURL* bundleURL = [bundle URLForResource:@\"main\" withExtension:@\"jsbundle\"];\n(And yes this may break in future versions so it's better not using it in CodePush directly)\n. I totally agree, but there is the case where we want to have a separate bundle for your app extension...\nMaybe we could juste have a bundle variable, default to [NSBundle mainBundle] and edit this variable in extension's source. Or juste expose isAppExtension...\n. ",
    "morgondag": "@lostintangent \n$code-push release-react myApp --entryFile ./index.ios.js ios -d Staging --mandatory --targetBinaryVersion\nStill gives this:\n[Error]  Unable to find or read \"Info.plist\" in the \"iOS/app\" or \"iOS\" folders.\nSeams to not be fixed in code-push-li either or there is no released version?\nnpm install -g code-push-cli@latest\n1.10.0-beta\n. @lostintangent not sure what you mean by targetBinaryVersion. \nadding a version to info.plist dosen't do anything.\n. @lostintangent thank you for taking the time and explain. \nPassing --targetBinaryVersion '0.1.0' works!\n. ",
    "CoderZZheng": "Thank you, you may be right, I'm testing now\n. ",
    "wrlqwe": "@geof90 sorry for the late reply, I haven't use this solution because each developers in our team have to configure this, I fix this by wrote an script to remove the minizip and aes libs refs in CodePush's podspec and link it to npm's post-install script, everyone's 'pod install' will install CodePush without these 2 libs, so everyone would be happy. \ud83d\ude01\n. @lostintangent may be you could use spec.dependency to manage SSZipArchive. but this problem is conflicts between ZipArchive and SSZipArchive after all, because they both using minizip and aes by containing them in their pods, not CodePush's problem...\nmay be our team should not use mattconnolly/ZipArchive any more, it's inactive for a long time.\n. This is an great idea, It's helpful!!\nI think use SSZipArchive by spec.dependency is useful. \nLet pod manage the dependency is better than linking files directly.\n. @lostintangent got it, thanks for your great work~\n. ",
    "spacesuitdiver": "Probably a dupe of #112 but I'd still be curious thoughts in an in-house environment that gets updates immediately. \n. Hi @rub8n,\n1. Yes, this seems to reflect our current in-house workflow.\n2. When I say immediately I just am referring to not going through any App Store review and referring to HockeyApp.\n3. We use a very similar tool, bitrise which contains a workflow to build the app.\n. @lostintangent R 0.14.8 RN 0.25.1 however my results are due to my workflow I think, @rub8n did you ever write anything up, anything I can help with?\n. @lostintangent @rub8n on a related note, if I target a 2.7.x on my \"Production\" deployment and then later on target 2.8.x, what happens to the 2.7.x release, does it keep updating?\n. @lostintangent I can't confirm that the client side has this issue as we switched off mandatory updates so it's hard to notice. I'm okay with closing this issue and I can comment on one of those if I confirm that I have client side jsbundle compare problems. I do know the release command is certainly creating duplicate releases even running RN 0.25. I'll be sure to update the other issues with this info.\n. @lostintangent how can I help, I'm not seeing this behavior?\n. @geof90 history lists both. We run code-push release for multiple apps that share the same jsbundle. A git webhook triggers all x number of apps to compile in CI concurrently, each app might make an attempt to \"release\" to code-push if a release doesn't already exist but multiples might be running concurrently thus two might hit the release command at (very close to) the same time.\n. @alexprice91 I think you might be confusing the mobile side comparison (which I think is related/originated in #345) to the release comparison. My problem is release-react command literally generates another \"v\" in the deployment history list.\n@lostintangent this still occurs and I don't see how it could even be prevented if I run say 5 release commands concurrently. What should be the expected behavior in this scenario with the current CodePush code and where should the comparison occur? We keep mentioning some form of binary comparison but firstly, I'm using RN 0.25 and secondly I don't even know it would have anything yet to compare it to if it is run concurrently.\n. Okay great. Thanks so much for the clarifications. Any timeline from the RN team or can you relay to us any thoughts or updates they have on the matter?\n. I use bitrise as well fyi.\n. @lostintangent ah interesting... I'll give it a go once 0.29 is released ;)\n. ",
    "rub8n": "Hi @LeBlaaanc, is great to see your question as I just started working on a tutorial to cover CI & CD scenarios with CodePush and VSTS.\nA few clarification questions:\n- Is this a fair representation of the workflow you describe above - Build app > Release and install via HA > Release manual update via CP without changing any part of the jsbundle > bundle update happens on app installed via HA?\n- When you say \u201cin-house environment that get updates immediately\u201d, do you refer to solutions for immediately sending jsbundle updates, full binary updates or both?\n- Have you looked into our CodePush VSTS extension?\n. If that's the workflow, then in theory you should not get a bundle update as we verify the local jsbundle contents against those in the server and only try to update when they are different.\nAre you able to constantly repro this issue? Also, are you hitting this on Android or iOS?\n. ",
    "dbasedow": "I have currently two points in the app where I disable restarts. The on-boarding is very simple, I use a container component that wraps the NavigationCardStack for all the on-boarding screens. The container has a componentDidMount and componentWillUnmount for allowing/disallowing restarts. The sync call is in the app root's componentDidMount (I want to experiment with more frequent calls).  For the first start this works really well. If an update is available it gets downloaded during the on-boarding flow and once the on-boarding is finished the app reloads and you see exactly what you're supposed to see.\nThe other case is specific to our app. The app I am working on does workout tracking. You can imagine that people will be extremely annoyed if their workout \"crashes\" (that's what it looks like). Right now I am also using componentDidMount and componentWillUnmount but on a single screen in the flow. So let's say I have a Tracking screen and after that a Result screen. If I put the componentDidMount and componentWillUnmount in the Tracking screen, the restarts will stay disabled until the Tracking screen is popped from the navigation stack. This is definitely not a good way to do it. I think for cases like this there should always be a container component.\nI can also imagine cases that are not bound to components, like file uploads or other background operations. My initial implementation allowed nesting allowRestart/disallowRestart for cases like this. I removed it because I think it could be confusing and if needed is trivial to implement.\n. restartAllowed is only used in the example app to make a toggle button. I'm not sure if anyone will need it for anything other than debugging.\n. That's a good idea. I will try to come up with something.\n. You're right it's not needed.\n. I agree that the new install mode is very closely related to IMMEDIATE. I initially wanted to name it ASAP but that seemed even more confusing. At least for my use case a time based delay will not be sufficient, I want to be able to only have restarts happen at certain points.\nMoving the decision to restartApp makes complete sense, but the state still has to be kept somewhere with functions for mutating it. Where would you put it?\n. I'll implement that.\nIf I remove the new install mode there is another potentially confusing issue: if I disable restarts and then receive a mandatory update it will also be delayed. I'm not sure if this is actually an issue but I could imagine the case that I want normal updates as soon as a restart is allowed but mandatory updates should still force an immediate restart. For my project it's not a problem, I'm not sure what other users need.\n. Since I am now exposing the onlyIfUpdateIsPending a simple flag no longer suffices. Is there really a case where onlyIfUpdateIsPending is set to false? installUpdate always calls savePendingUpdate regardless of InstallMode. The only use of restartApp(false) I could find was in local package's install(). But that happens after installUpdate.\n. ",
    "hanleirx": "OK\uff0cfirstly I use the demo\uff0cit's efficient and I click the button,then it can renew the version.But I want renew automatically,so I change the code like this\nimport React, { Component } from 'react'; \nimport {\n  AppRegistry,\n  Dimensions,\n  Image,\n  StyleSheet,\n  Text,\n  TouchableOpacity,\n  View,\n  Alert\n} from 'react-native';\nimport Button from \"react-native-button\";\nimport CodePush from \"react-native-code-push\";\nlet CodePushDemoApp = React.createClass({\n  async sync() {\n    let self = this;\n  },\n  componentDidMount() {\n      try {\n     CodePush.sync(  );\n    } catch (error) {\n      CodePush.log(error);\n    }\n    Alert.alert(\n            'Alert Title',\n            'alertMessage',\n          )\n  },\n  getInitialState() {\n    return { };\n  },\n  render() {\n    let syncView, syncButton, progressView;\n    if (this.state.syncMessage) {\n      syncView = (\n        {this.state.syncMessage}\n      );\n    } else {\n      syncButton = (\n        \n          Start Sync!\n        \n      );\n    }\n    if (this.state.progress) {\n      progressView = (\n        {this.state.progress.receivedBytes} of {this.state.progress.totalBytes} bytes received\n      );\n    }\n    return (\n      \n\n          Welcome to CodePush!111222333444555666777888\n        \n        {syncButton}\n        {syncView}\n        {progressView}\n      \n    );\n  }\n});\nlet styles = StyleSheet.create({\n  image: {\n    marginTop: 50,\n    width: Dimensions.get('window').width - 100,\n    height: 365 * (Dimensions.get('window').width - 100) / 651,\n  },\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    backgroundColor: '#F5FCFF',\n    paddingTop: 50\n  },\n  welcome: {\n    fontSize: 20,\n    textAlign: 'center',\n    margin: 10\n  },\n  messages: {\n    textAlign: 'center',\n  },\n});\nAppRegistry.registerComponent('renewanother', () => CodePushDemoApp);\nwhen I compile it there is no errors except no renewing.\nAnd another problem is when I run this -ode-push deployment history renewanother XXX\nit had error-[Error]  Deployment \"XXX\" does not exist.\nI don't know why.\n. Yes,I have the Staging because I use this-'code-push app add renewanother'\nJust now I run this-'code-push deployment add renewanother IOSDevelopment',and it shows -'Successfully added the \"IOSDevelopment\" deployment with key ',\nBut when I run -'code-push deployment history renewanother IOSDevelopment',it shows-'\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Label \u2502 Release Time \u2502 App Version \u2502 Mandatory \u2502 Description \u2502 Install Metrics \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n'\nIs it right? why can it not be renewed ?\nI don't know the order clearly .\nEvery time I renew the project I will run these:\nreact-native bundle --platform ios --entry-file index.ios.js  --bundle-output ./release/main.jsbundle --assets-dest ./release --dev false\ncode-push release renewanother ./release/main.jsbundle 1.0.10\nthen I will restart my app\nwhat do I lack of?\nI need your help!\n. Which deployment key did you add to your app itself\nI don't understand what this mean.Does it mean that I push Staging to CodePushDeploymentKey in my Info.plist?\nAnd I run code-push release-react renewanother ios,then I run code-push deployment h renewanother Staging, it shows v20   \u2502 8 minutes ago \u2502 1.0.0       \u2502 No        \u2502             \u2502 No installs recorded .\nBut when I restart the app  its interface is no change, and I don't know why.\n. Yes, I know it and when I run 'code-push deployment ls renewanother -k',I can see '\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Name           \u2502 Deployment Key                        \u2502 Update Metadata                \u2502 Install Metrics      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\n'\nI know the reason that it can't renew is that the time is too short so the file can't be downloaded.\nThank you\uff01\n. Sorry,I don't understand.You mean react-native-code-push can't only renew the changed file,right?\nFor example,\nfirst version:\n\n          Just try it\uff01\n        \nsecond version:\n\n          Just try it again!\n        \nso every time I will download the the same part,is it?\n. Ok ,thank you .I got it.\n. OK\uff0cthank you!\n. ",
    "kennethlynne": "The issue for me is that it rejects duplicates, but then my issue is that it crashes the build. Any parameters one can specify or something to work around it? Related: http://stackoverflow.com/questions/37725312/skip-deploying-to-codepush-when-the-package-content-has-not-changed\n. @lostintangent it exits non-zero, so the build is failing, but not crashing. And the decision to not allow duplicate releases is a good one! I just need a simple way to allow us to merge to master and run the deployment without having to do complicated diffs etc. \nWhenever one changes documentation or parts of the native code, the build will fail if we do not guard the codepush step. \nThe decired behaviour would probably be to pass a flag to the CLI so that it simply skips duplicates if there is no changes in the bundle, but does not exit non-zero, but it still exits non-zero on other issues.\n. @lostintangent good point! Using bitrise, thanks! \n. ",
    "jerson": "Sorry was my mistake\nI had forgotten to add this\n@Override\n    protected String getJSBundleFile() {\n        return CodePush.getBundleUrl();\n    }\nnow it works. thank you very much\n. for me worked with \n```ruby\npost_install do |installer|\n  installer.pods_project.build_configurations.each do |config|\n              if config.name == 'Staging'\n                  config.build_settings['CONFIGURATION_TEMP_DIR'] = '$(PROJECT_TEMP_DIR)/Release$(EFFECTIVE_PLATFORM_NAME)'\n                  config.build_settings['CONFIGURATION_BUILD_DIR'] = '$(BUILD_DIR)/Release$(EFFECTIVE_PLATFORM_NAME)'\n              end\n  end\n  installer.pods_project.targets.each do |target|\n          target.build_configurations.each do |config|\n              if config.name == 'Staging'\n                  config.build_settings['CONFIGURATION_TEMP_DIR'] = '$(PROJECT_TEMP_DIR)/Release$(EFFECTIVE_PLATFORM_NAME)'\n                  config.build_settings['PODS_CONFIGURATION_BUILD_DIR'] = '${PODS_BUILD_DIR}/Release$(EFFECTIVE_PLATFORM_NAME)'\n              end\n          end\n  end\nend\n```. @geof90  I'm playing music in the background and updating the time of the song, maybe these actions are likely to generate the error.\n. but if it worked well before with the previous version\njson\n    \"react-native-code-push\": \"^1.13.5-beta\",\n    \"react-native\": \"^0.30.0\",\n. No, I've created my own native module react, but it is a bit similar to this https://github.com/tlenclos/react-native-audio-streaming\n. @geof90  The problem was related to Realm instance but now is fixed :) , closed \ud83d\udc4d \n. check this repo, was an old error but now is solved\nhttps://github.com/jerson/realm-example-error\nand\nhttps://github.com/realm/realm-js/issues/520#issuecomment-232098885. @calclavia  i have the same problem but with v1.14 :/  please reopen \n09-18 23:50:33.881   833  1033 D AudioService: Stream muted, skip playback\n09-18 23:50:33.925 20648 20648 D AudioPlayerModule: onHostResume\n09-18 23:50:33.959 20648 20648 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/56f364d115d2d57af414323a839517e2264cae4eebb2825658acab4a3cf8020e/CodePush/index.android.bundle\"\n09-18 23:50:34.015 20648 20648 D AudioPlayerModule: onHostPause\n09-18 23:50:34.021 20648 20648 D AudioPlayerModule: onHostDestroy\n09-18 23:50:34.034 20648 20648 W PhoneWindow: Previously focused view reported id 10 during save, but can't be found during restore.\n09-18 23:50:34.034 20648 20648 D AudioPlayerModule: onHostResume\n09-18 23:50:34.069 20648 20648 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/56f364d115d2d57af414323a839517e2264cae4eebb2825658acab4a3cf8020e/CodePush/index.android.bundle\"\n09-18 23:50:34.095 20648 20648 D AudioPlayerModule: onHostPause\n09-18 23:50:34.119 20648 20648 D AudioPlayerModule: onHostDestroy\n09-18 23:50:34.126 20648 20648 D AudioPlayerModule: onHostResume\n09-18 23:50:34.154 20648 20648 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/56f364d115d2d57af414323a839517e2264cae4eebb2825658acab4a3cf8020e/CodePush/index.android.bundle\"\n09-18 23:50:34.173 20648 20648 D AudioPlayerModule: onHostPause\n09-18 23:50:34.182 20648 20715 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":11}. __DEV__ === false, development-level warning are OFF, performance optimizations are ON\n09-18 23:50:34.200 20648 20648 D AudioPlayerModule: onHostDestroy\n09-18 23:50:34.210 20648 20648 D AudioPlayerModule: onHostResume\n09-18 23:50:34.237 20648 20648 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/56f364d115d2d57af414323a839517e2264cae4eebb2825658acab4a3cf8020e/CodePush/index.android.bundle\"\n09-18 23:50:34.262 20648 20648 D AudioPlayerModule: onHostPause\n09-18 23:50:34.282 20648 20648 D AudioPlayerModule: onHostDestroy\n09-18 23:50:34.291 20648 20648 D AudioPlayerModule: onHostResume\n09-18 23:50:34.323 20648 20648 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/56f364d115d2d57af414323a839517e2264cae4eebb2825658acab4a3cf8020e/CodePush/index.android.bundle\"\n09-18 23:50:34.344 20648 20648 D AudioPlayerModule: onHostPause\n09-18 23:50:34.365 20648 20648 D AudioPlayerModule: onHostDestroy\n09-18 23:50:34.375 20648 20648 D AudioPlayerModule: onHostResume\n09-18 23:50:34.421 20648 20648 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/56f364d115d2d57af414323a839517e2264cae4eebb2825658acab4a3cf8020e/CodePush/index.android.bundle\"\n09-18 23:50:34.447 20648 20648 D AudioPlayerModule: onHostPause\n09-18 23:50:34.478 20648 20648 D AudioPlayerModule: onHostDestroy\n09-18 23:50:34.490 20648 20648 D AudioPlayerModule: onHostResume\n09-18 23:50:34.490 20648 20674 I art     : Background sticky concurrent mark sweep GC freed 48647(3MB) AllocSpace objects, 45(900KB) LOS objects, 16% free, 17MB/20MB, paused 9.502ms total 112.667ms\n09-18 23:50:34.519 20648 20648 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/56f364d115d2d57af414323a839517e2264cae4eebb2825658acab4a3cf8020e/CodePush/index.android.bundle\"\n09-18 23:50:34.539 20648 20648 D AudioPlayerModule: onHostPause\n09-18 23:50:34.568 20648 20648 D AudioPlayerModule: onHostDestroy\n09-18 23:50:34.574 20648 20715 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":21}. __DEV__ === false, development-level warning are OFF, performance optimizations are ON\n09-18 23:50:34.583 20648 20648 D AudioPlayerModule: onHostResume\n09-18 23:50:34.590 20648 20715 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":31}. __DEV__ === false, development-level warning are OFF, performance optimizations are ON\n09-18 23:50:34.614 20648 20648 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/56f364d115d2d57af414323a839517e2264cae4eebb2825658acab4a3cf8020e/CodePush/index.android.bundle\"\n09-18 23:50:34.686 20648 20715 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":41}. __DEV__ === false, development-level warning are OFF, performance optimizations are ON\n09-18 23:50:34.706 20648 20698 E AndroidRuntime: FATAL EXCEPTION: AsyncTask #5\n09-18 23:50:34.706 20648 20698 E AndroidRuntime: Process: com.app.music.staging, PID: 20648\n09-18 23:50:34.706 20648 20698 E AndroidRuntime: Theme: themes:{}\n09-18 23:50:34.706 20648 20698 E AndroidRuntime: java.lang.RuntimeException: An error occurred while executing doInBackground()\n09-18 23:50:34.706 20648 20698 E AndroidRuntime:    at android.os.AsyncTask$3.done(AsyncTask.java:309)\n09-18 23:50:34.706 20648 20698 E AndroidRuntime:    at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:354)\n09-18 23:50:34.706 20648 20698 E AndroidRuntime:    at java.util.concurrent.FutureTask.setException(FutureTask.java:223)\n09-18 23:50:34.706 20648 20698 E AndroidRuntime:    at java.util.concurrent.FutureTask.run(FutureTask.java:242)\n09-18 23:50:34.706 20648 20698 E AndroidRuntime:    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:234)\n09-18 23:50:34.706 20648 20698 E AndroidRuntime:    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)\n09-18 23:50:34.706 20648 20698 E AndroidRuntime:    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)\n09-18 23:50:34.706 20648 20698 E AndroidRuntime:    at java.lang.Thread.run(Thread.java:818)\n09-18 23:50:34.706 20648 20698 E AndroidRuntime: Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'java.util.Iterator org.json.JSONObject.keys()' on a null object reference\n09-18 23:50:34.706 20648 20698 E AndroidRuntime:    at com.microsoft.codepush.react.CodePushUtils.convertJsonObjectToWritable(CodePushUtils.java:65)\n09-18 23:50:34.706 20648 20698 E AndroidRuntime:    at com.microsoft.codepush.react.CodePushNativeModule$4.doInBackground(CodePushNativeModule.java:307)\n09-18 23:50:34.706 20648 20698 E AndroidRuntime:    at com.microsoft.codepush.react.CodePushNativeModule$4.doInBackground(CodePushNativeModule.java:283)\n09-18 23:50:34.706 20648 20698 E AndroidRuntime:    at android.os.AsyncTask$2.call(AsyncTask.java:295)\n09-18 23:50:34.706 20648 20698 E AndroidRuntime:    at java.util.concurrent.FutureTask.run(FutureTask.java:237)\n09-18 23:50:34.706 20648 20698 E AndroidRuntime:    ... 4 more\n09-18 23:50:34.718   833  1792 W ActivityManager:   Force finishing activity com.app.music.staging/com.app.music.MainActivity\n. @silhouettes any progress? :/ :( \n. @silhouettes i tested in RN 0.33 , RN 0.34 RC and RN 0.34 :/\nit seems that the problem is from RN 0.33\n. @bgeihsgt \n1. executes your application\n2. sends an update codepush\n3. update your application\n4. when the update is applied, the application to crash\n5. if you Relaunching the application update will already have applied\n. i think is like a bucle, i tested right now and this is the output\nplease ignore the com.github.yamill.orientation.OrientationModule, i tested without this module but the error is the same \n```\n9-27 11:49:14.965 14847 14847 W ContextImpl: Implicit intents with startService are not safe: Intent { act=com.sand.airdroid.action.push.check (has extras) } android.content.ContextWrapper.startService:587 com.sand.airdroid.servers.push.api.PushManager.a:218 com.sand.airdroid.app.PushApp.b:71 \n09-27 11:49:22.491   733   924 I ActivityManager: START u0 {act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10200000 cmp=com.google.android.googlequicksearchbox/com.google.android.launcher.GEL (has extras)} from uid 1000 on display 0\n09-27 11:49:22.563 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:22.779 24698 24698 E NowRemoteClient: skipping logEndstates, service is null\n09-27 11:49:22.803 24698 24698 I GEL     : handleIntent(Intent { act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10600000 cmp=com.google.android.googlequicksearchbox/com.google.android.launcher.GEL (has extras) })\n09-27 11:49:23.255 24970 24981 I AttachedClient: Adding client event 2 to pending list.\n09-27 11:49:23.260 24970 24970 I MicroDetectionWorker: Micro detection mode: [mDetectionMode: [1]].\n09-27 11:49:23.294 24970 13940 W LocationOracle: No location history returned by ContextManager\n09-27 11:49:23.377 24970 14899 I MicroRecognitionRunner: Starting detection.\n09-27 11:49:23.393 24970 13316 I MicrophoneInputStream: mic_starting com.google.android.apps.gsa.speech.audio.ag@d783e9c\n09-27 11:49:23.417 24698 24992 W OpenGLRenderer: Incorrectly called buildLayer on View: ShortcutAndWidgetContainer, destroying layer...\n09-27 11:49:23.433   220   944 D audio_hw_primary: adev_open_input_stream: enter: sample_rate(16000) channel_mask(0x10) devices(0x80000004)        stream_handle(0xb741fdf8) io_handle(237) source(6)\n09-27 11:49:23.447   220 14901 I AudioFlinger: AudioFlinger's thread 0xb0f24008 ready to run\n09-27 11:49:23.447   220 14901 D audio_hw_primary: in_standby: enter: stream (0xb741fdf8) usecase(9: audio-record)\n09-27 11:49:23.448   220 14901 D audio_hw_primary: in_standby: enter: stream (0xb741fdf8) usecase(9: audio-record)\n09-27 11:49:23.464   220 14901 D audio_hw_primary: in_set_parameters: enter: kvpairs=input_source=6;routing=-2147483644\n09-27 11:49:23.470 24970 13316 I MicrophoneInputStream: mic_started com.google.android.apps.gsa.speech.audio.ag@d783e9c\n09-27 11:49:23.474   220 14901 D audio_hw_primary: start_input_stream: enter: stream(0xb741fdf8)usecase(9: audio-record)\n09-27 11:49:23.474   220 14901 D audio_hw_primary: select_devices: out_snd_device(0: ) in_snd_device(64: voice-rec-mic)\n09-27 11:49:23.474   220 14901 D hardware_info: hw_info_append_hw_type : device_name = voice-rec-mic\n09-27 11:49:23.474   220 14901 I msm8974_platform: platform_send_audio_calibration: sending audio calibration for snd_device(64) acdb_id(61)\n09-27 11:49:23.500   220 14901 D ACDB-LOADER: ACDB -> send_audio_cal, acdb_id = 61, path =  1\n09-27 11:49:23.500   220 14901 D ACDB-LOADER: ACDB -> send_adm_topology\n09-27 11:49:23.500   220 14901 D ACDB-LOADER: ACDB -> ACDB_CMD_GET_AUDPROC_COMMON_TOPOLOGY_ID\n09-27 11:49:23.506  1472  1472 I HeadsetService: Headset=false; Bluetooth=false ; USB=false; Speaker=true; Line out=false\n09-27 11:49:23.508   220 14901 D ACDB-LOADER: ACDB -> send_audtable\n09-27 11:49:23.508   220 14901 D ACDB-LOADER: ACDB -> ACDB_CMD_GET_AUDPROC_COMMON_TABLE\n09-27 11:49:23.508   220 14901 D ACDB-LOADER: ACDB -> AUDIO_SET_AUDPROC_CAL\n09-27 11:49:23.508   220 14901 D ACDB-LOADER: ACDB -> send_audvoltable\n09-27 11:49:23.508   220 14901 D ACDB-LOADER: ACDB -> ACDB_CMD_GET_AUDPROC_GAIN_DEP_STEP_TABLE\n09-27 11:49:23.508   220 14901 D         : Failed to fetch the lookup information of the device 0000003D \n09-27 11:49:23.508   220 14901 D ACDB-LOADER: ACDB -> AUDIO_SET_AUDPROC_VOL_CAL\n09-27 11:49:23.508   220 14901 D ACDB-LOADER: ACDB -> AUDIO_SET_AFE_CAL\n09-27 11:49:23.544   220 14901 D audio_hw_primary: select_devices: done\n09-27 11:49:23.567   733  1054 D WifiService: acquireWifiLockLocked: WifiLock{NlpWifiLock type=2 binder=android.os.BinderProxy@acda206}\n09-27 11:49:23.635 24970 24970 I MicroDetectionWorker: onReady\n09-27 11:49:24.005   733   943 D AudioService: Stream muted, skip playback\n09-27 11:49:24.011 24970 24970 I MicroDetector: Keeping mic open: false\n09-27 11:49:24.011 24970 24970 I AudioController: shutdown\n09-27 11:49:24.011 24970 24970 I MicrophoneInputStream: mic_close com.google.android.apps.gsa.speech.audio.ag@d783e9c\n09-27 11:49:24.012 24970 13316 E AudioRecord-JNI: Error -4 during AudioRecord native read\n09-27 11:49:24.017 24970 14898 I DeviceStateChecker: DeviceStateChecker cancelled\n09-27 11:49:24.035   220 14901 D audio_hw_primary: in_set_parameters: enter: kvpairs=routing=0\n09-27 11:49:24.035   220 14901 D audio_hw_primary: in_standby: enter: stream (0xb741fdf8) usecase(9: audio-record)\n09-27 11:49:24.075   220 14901 D hardware_info: hw_info_append_hw_type : device_name = voice-rec-mic\n09-27 11:49:24.082   220   945 D audio_hw_primary: adev_close_input_stream: enter:stream_handle(0xb741fdf8)\n09-27 11:49:24.082   220   945 D audio_hw_primary: in_standby: enter: stream (0xb741fdf8) usecase(9: audio-record)\n09-27 11:49:24.085 24970 14899 I MicroRecognitionRunner: Detection finished\n09-27 11:49:24.095  1472  1472 I HeadsetService: Headset=false; Bluetooth=false ; USB=false; Speaker=true; Line out=false\n09-27 11:49:24.097 24970 27307 I MicroRecognitionRunner: Stopping hotword detection.\n09-27 11:49:24.263   733 21341 D WifiService: releaseWifiLockLocked: WifiLock{NlpWifiLock type=2 binder=android.os.BinderProxy@acda206}\n09-27 11:49:24.280   231   300 I ThermalEngine: Sensor:batt_therm:31000 mC\n09-27 11:49:25.003   733   943 D AudioService: Stream muted, skip playback\n09-27 11:49:25.005   733  1435 I ActivityManager: START u0 {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.app.music.staging/com.app.music.MainActivity (has extras)} from uid 10028 on display 0\n09-27 11:49:25.078 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:25.225 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:25.340 29835 29850 W art     : Suspending all threads took: 5.354ms\n09-27 11:49:25.395 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:25.425 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:25.454 29835 29850 I art     : Background sticky concurrent mark sweep GC freed 99405(6MB) AllocSpace objects, 24(960KB) LOS objects, 15% free, 37MB/44MB, paused 12.743ms total 315.879ms\n09-27 11:49:25.474 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:25.474 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:25.474 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:25.474 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:25.474 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:25.474 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:25.474 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:25.474 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:25.474 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:25.474 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:25.474 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:25.474 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:25.474 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:25.474 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:25.474 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:25.474 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:25.474 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:25.474 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:25.474 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:25.474 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:25.474 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:25.474 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:25.474 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:25.474 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:25.474 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:25.522 29835 29835 W PhoneWindow: Previously focused view reported id 10 during save, but can't be found during restore.\n09-27 11:49:25.522 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:25.561 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:25.575 24698 24711 I art     : Background sticky concurrent mark sweep GC freed 22479(1954KB) AllocSpace objects, 107(2MB) LOS objects, 19% free, 19MB/24MB, paused 1.247ms total 129.841ms\n09-27 11:49:25.625 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:25.662 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:25.663 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:25.663 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:25.663 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:25.663 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:25.663 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:25.663 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:25.663 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:25.663 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:25.663 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:25.663 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:25.663 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:25.663 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:25.663 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:25.663 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:25.663 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:25.663 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:25.663 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:25.663 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:25.663 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:25.663 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:25.663 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:25.663 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:25.663 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:25.663 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:25.663 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:25.678 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:25.722 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:25.744 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:25.761 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":11}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:25.787 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:25.788 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:25.788 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:25.788 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:25.788 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:25.788 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:25.788 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:25.788 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:25.788 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:25.788 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:25.788 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:25.788 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:25.788 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:25.788 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:25.788 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:25.788 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:25.788 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:25.788 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:25.788 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:25.788 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:25.788 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:25.788 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:25.788 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:25.788 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:25.788 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:25.788 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:25.797 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:25.831 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:25.865 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:25.908 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:25.909 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:25.909 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:25.909 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:25.909 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:25.909 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:25.909 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:25.909 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:25.909 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:25.909 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:25.909 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:25.909 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:25.909 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:25.909 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:25.909 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:25.909 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:25.909 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:25.909 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:25.909 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:25.909 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:25.909 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:25.909 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:25.909 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:25.909 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:25.909 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:25.909 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:25.921 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:25.963 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:25.983 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:26.026 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:26.027 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:26.027 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:26.027 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:26.027 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:26.027 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:26.027 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:26.027 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:26.027 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:26.027 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:26.027 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:26.027 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:26.027 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:26.027 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:26.027 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:26.027 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:26.027 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:26.027 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:26.027 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:26.027 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:26.027 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:26.027 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:26.027 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:26.027 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:26.027 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:26.027 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:26.042 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:26.078 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:26.105 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:26.140 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:26.141 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:26.141 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:26.141 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:26.141 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:26.141 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:26.141 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:26.141 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:26.141 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:26.141 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:26.141 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:26.141 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:26.141 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:26.141 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:26.141 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:26.141 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:26.141 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:26.141 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:26.141 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:26.141 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:26.141 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:26.141 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:26.141 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:26.141 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:26.141 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:26.141 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:26.151 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:26.193 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:26.209 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:26.267 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:26.269 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:26.269 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:26.269 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:26.269 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:26.269 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:26.269 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:26.269 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:26.269 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:26.269 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:26.269 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:26.269 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:26.269 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:26.269 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:26.269 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:26.269 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:26.269 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:26.269 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:26.269 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:26.269 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:26.269 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:26.269 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:26.269 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:26.269 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:26.269 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:26.269 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:26.279 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:26.328 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:26.332 29835 29850 I art     : Background partial concurrent mark sweep GC freed 108973(6MB) AllocSpace objects, 55(1236KB) LOS objects, 29% free, 37MB/53MB, paused 2.835ms total 138.923ms\n09-27 11:49:26.345 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:26.409 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:26.411 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:26.411 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:26.411 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:26.411 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:26.411 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:26.411 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:26.411 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:26.411 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:26.411 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:26.411 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:26.411 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:26.411 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:26.411 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:26.411 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:26.411 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:26.411 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:26.411 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:26.411 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:26.411 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:26.411 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:26.411 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:26.411 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:26.411 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:26.411 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:26.411 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:26.425 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:26.447 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":21}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:26.462 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:26.474 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":31}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:26.493 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:26.521 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:26.522 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:26.522 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:26.522 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:26.522 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:26.522 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:26.522 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:26.522 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:26.522 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:26.522 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:26.522 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:26.522 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:26.522 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:26.522 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:26.522 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:26.522 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:26.522 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:26.522 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:26.522 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:26.522 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:26.522 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:26.522 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:26.522 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:26.522 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:26.522 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:26.522 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:26.538 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:26.571 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:26.604 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":41}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:26.661 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":51}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:26.688 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:26.689 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":61}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:26.719 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:26.721 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:26.721 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:26.721 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:26.721 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:26.721 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:26.721 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:26.721 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:26.721 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:26.721 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:26.721 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:26.721 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:26.721 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:26.721 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:26.721 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:26.721 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:26.721 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:26.721 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:26.721 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:26.721 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:26.721 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:26.721 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:26.721 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:26.721 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:26.721 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:26.721 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:26.728 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:26.758 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:26.781 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":71}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:26.800 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:26.839 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:26.840 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:26.840 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:26.840 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:26.840 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:26.840 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:26.840 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:26.840 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:26.840 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:26.840 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:26.840 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:26.840 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:26.840 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:26.840 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:26.840 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:26.840 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:26.840 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:26.840 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:26.840 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:26.840 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:26.840 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:26.840 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:26.840 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:26.840 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:26.840 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:26.840 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:26.847 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:26.879 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:26.902 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:26.941 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:26.942 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:26.942 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:26.942 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:26.942 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:26.942 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:26.942 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:26.942 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:26.942 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:26.942 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:26.942 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:26.942 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:26.942 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:26.942 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:26.942 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:26.942 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:26.942 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:26.942 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:26.942 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:26.942 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:26.942 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:26.942 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:26.942 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:26.942 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:26.942 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:26.942 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:26.955 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:26.990 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:27.007 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:27.058 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:27.059 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:27.059 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:27.059 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:27.059 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:27.059 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:27.059 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:27.059 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:27.059 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:27.059 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:27.059 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:27.059 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:27.059 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:27.059 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:27.059 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:27.059 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:27.059 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:27.059 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:27.059 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:27.059 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:27.059 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:27.059 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:27.059 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:27.059 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:27.059 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:27.059 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:27.069 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:27.110 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:27.138 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:27.166 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:27.167 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:27.167 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:27.167 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:27.167 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:27.167 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:27.167 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:27.167 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:27.167 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:27.167 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:27.167 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:27.167 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:27.167 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:27.167 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:27.167 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:27.167 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:27.167 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:27.167 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:27.167 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:27.167 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:27.167 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:27.167 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:27.167 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:27.167 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:27.167 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:27.167 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:27.179 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:27.211 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:27.231 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:27.256 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:27.258 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:27.258 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:27.258 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:27.258 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:27.258 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:27.258 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:27.258 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:27.258 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:27.258 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:27.258 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:27.258 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:27.258 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:27.258 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:27.258 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:27.258 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:27.258 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:27.258 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:27.258 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:27.258 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:27.258 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:27.258 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:27.258 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:27.258 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:27.258 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:27.258 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:27.265 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:27.299 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:27.316 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:27.342 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:27.343 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:27.343 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:27.343 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:27.343 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:27.343 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:27.343 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:27.343 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:27.343 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:27.343 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:27.343 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:27.343 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:27.343 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:27.343 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:27.343 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:27.343 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:27.343 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:27.343 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:27.343 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:27.343 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:27.343 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:27.343 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:27.343 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:27.343 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:27.343 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:27.343 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:27.353 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:27.390 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:27.414 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:27.439 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:27.441 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:27.441 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:27.441 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:27.441 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:27.441 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:27.441 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:27.441 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:27.441 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:27.441 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:27.441 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:27.441 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:27.441 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:27.441 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:27.441 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:27.441 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:27.441 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:27.441 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:27.441 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:27.441 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:27.441 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:27.441 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:27.441 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:27.441 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:27.441 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:27.441 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:27.451 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:27.488 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:27.515 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:27.542 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:27.543 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:27.543 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:27.543 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:27.543 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:27.543 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:27.543 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:27.543 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:27.543 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:27.543 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:27.543 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:27.543 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:27.543 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:27.543 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:27.543 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:27.543 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:27.543 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:27.543 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:27.543 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:27.543 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:27.543 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:27.543 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:27.543 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:27.543 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:27.543 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:27.543 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:27.552 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:27.582 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:27.597 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:27.623 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:27.630 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:27.630 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:27.630 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:27.630 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:27.630 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:27.630 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:27.630 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:27.630 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:27.630 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:27.630 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:27.630 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:27.630 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:27.630 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:27.630 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:27.630 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:27.630 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:27.630 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:27.630 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:27.630 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:27.630 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:27.630 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:27.630 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:27.630 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:27.630 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:27.630 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:27.641 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:27.679 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:27.704 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:27.727 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:27.728 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:27.728 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:27.728 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:27.728 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:27.728 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:27.728 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:27.728 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:27.728 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:27.728 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:27.728 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:27.728 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:27.728 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:27.728 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:27.728 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:27.728 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:27.728 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:27.728 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:27.728 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:27.728 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:27.728 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:27.728 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:27.728 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:27.728 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:27.728 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:27.728 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:27.736 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:27.806 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:27.825 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:27.897 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:27.898 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:27.898 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:27.898 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:27.898 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:27.898 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:27.898 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:27.898 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:27.898 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:27.898 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:27.898 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:27.898 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:27.898 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:27.898 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:27.898 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:27.898 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:27.898 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:27.898 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:27.898 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:27.898 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:27.898 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:27.898 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:27.898 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:27.898 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:27.898 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:27.898 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:27.907 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:27.956 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:27.974 29835 29850 I art     : Background sticky concurrent mark sweep GC freed 105118(9MB) AllocSpace objects, 109(2MB) LOS objects, 16% free, 44MB/53MB, paused 10.347ms total 232.036ms\n09-27 11:49:27.975 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:28.019 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:28.020 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:28.020 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:28.020 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:28.020 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:28.020 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:28.020 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:28.020 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:28.020 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:28.020 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:28.020 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:28.020 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:28.020 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:28.020 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:28.020 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:28.020 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:28.020 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:28.020 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:28.020 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:28.020 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:28.020 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:28.020 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:28.020 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:28.020 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:28.020 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:28.020 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:28.039 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:28.071 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:28.097 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:28.145 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:28.146 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:28.146 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:28.146 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:28.146 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:28.146 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:28.146 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:28.146 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:28.146 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:28.146 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:28.146 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:28.146 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:28.146 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:28.146 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:28.146 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:28.146 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:28.146 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:28.146 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:28.146 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:28.146 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:28.146 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:28.146 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:28.146 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:28.146 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:28.146 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:28.146 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:28.162 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:28.196  2505  2722 D HeadsetStateMachine: Disconnected process message: 10, size: 0\n09-27 11:49:28.231   733   744 I art     : Background sticky concurrent mark sweep GC freed 48892(7MB) AllocSpace objects, 6(520KB) LOS objects, 24% free, 25MB/33MB, paused 3.023ms total 122.248ms\n09-27 11:49:28.250 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:28.252  2505  2722 D HeadsetStateMachine: Disconnected process message: 10, size: 0\n09-27 11:49:28.280 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:28.302 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:28.304 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:28.304 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:28.304 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:28.304 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:28.304 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:28.304 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:28.304 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:28.304 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:28.304 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:28.304 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:28.304 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:28.304 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:28.304 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:28.304 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:28.304 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:28.304 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:28.304 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:28.304 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:28.304 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:28.304 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:28.304 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:28.304 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:28.304 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:28.304 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:28.304 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:28.315 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:28.344 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:28.365 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:28.399 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:28.400 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:28.400 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:28.400 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:28.400 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:28.400 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:28.400 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:28.400 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:28.400 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:28.400 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:28.400 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:28.400 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:28.400 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:28.400 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:28.400 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:28.400 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:28.400 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:28.400 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:28.400 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:28.400 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:28.400 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:28.400 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:28.400 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:28.400 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:28.400 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:28.400 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:28.413 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:28.447 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:28.470 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:28.508 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:28.509 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:28.509 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:28.509 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:28.509 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:28.509 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:28.509 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:28.509 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:28.509 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:28.509 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:28.509 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:28.509 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:28.509 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:28.509 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:28.509 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:28.509 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:28.509 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:28.509 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:28.509 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:28.509 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:28.509 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:28.509 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:28.509 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:28.509 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:28.509 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:28.509 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:28.517 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:28.546 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:28.575 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:28.598 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:28.599 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:28.599 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:28.599 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:28.599 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:28.599 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:28.599 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:28.599 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:28.599 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:28.599 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:28.599 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:28.599 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:28.599 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:28.599 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:28.599 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:28.599 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:28.599 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:28.599 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:28.599 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:28.599 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:28.599 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:28.599 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:28.599 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:28.599 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:28.599 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:28.599 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:28.610 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:28.638 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:28.655 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:28.685 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:28.686 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:28.686 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:28.686 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:28.686 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:28.686 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:28.686 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:28.686 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:28.686 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:28.686 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:28.686 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:28.686 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:28.686 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:28.686 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:28.686 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:28.686 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:28.686 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:28.686 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:28.686 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:28.686 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:28.686 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:28.686 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:28.686 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:28.686 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:28.686 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:28.686 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:28.696 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:28.738 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:28.756 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:28.822 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:28.823 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:28.823 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:28.823 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:28.823 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:28.823 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:28.823 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:28.823 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:28.823 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:28.823 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:28.823 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:28.823 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:28.823 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:28.823 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:28.823 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:28.823 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:28.823 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:28.823 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:28.823 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:28.823 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:28.823 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:28.823 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:28.823 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:28.823 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:28.823 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:28.823 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:28.832 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:28.874 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:28.901 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:28.923 29835 29850 I art     : Background partial concurrent mark sweep GC freed 186468(14MB) AllocSpace objects, 72(19MB) LOS objects, 39% free, 22MB/36MB, paused 16.312ms total 215.431ms\n09-27 11:49:28.930 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:28.931 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:28.931 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:28.931 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:28.931 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:28.931 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:28.931 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:28.931 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:28.931 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:28.931 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:28.931 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:28.931 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:28.931 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:28.931 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:28.931 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:28.931 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:28.931 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:28.931 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:28.931 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:28.931 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:28.931 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:28.931 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:28.931 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:28.931 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:28.931 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:28.931 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:28.944 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:28.974 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:28.992 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:29.015 29835 29895 E AndroidRuntime: FATAL EXCEPTION: mqt_native_modules\n09-27 11:49:29.015 29835 29895 E AndroidRuntime: Process: com.app.music.staging, PID: 29835\n09-27 11:49:29.015 29835 29895 E AndroidRuntime: Theme: themes:{}\n09-27 11:49:29.015 29835 29895 E AndroidRuntime: java.lang.NullPointerException: Attempt to invoke virtual method 'void com.facebook.react.uimanager.ReactShadowNode.addChildAt(com.facebook.csslayout.CSSNode, int)' on a null object reference\n09-27 11:49:29.015 29835 29895 E AndroidRuntime:    at com.facebook.react.uimanager.UIImplementation.setChildren(UIImplementation.java:369)\n09-27 11:49:29.015 29835 29895 E AndroidRuntime:    at com.facebook.react.uimanager.UIManagerModule.setChildren(UIManagerModule.java:289)\n09-27 11:49:29.015 29835 29895 E AndroidRuntime:    at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:29.015 29835 29895 E AndroidRuntime:    at com.facebook.react.bridge.BaseJavaModule$JavaMethod.invoke(BaseJavaModule.java:319)\n09-27 11:49:29.015 29835 29895 E AndroidRuntime:    at com.facebook.react.cxxbridge.JavaModuleWrapper.invoke(JavaModuleWrapper.java:158)\n09-27 11:49:29.015 29835 29895 E AndroidRuntime:    at com.facebook.react.bridge.queue.NativeRunnable.run(Native Method)\n09-27 11:49:29.015 29835 29895 E AndroidRuntime:    at android.os.Handler.handleCallback(Handler.java:739)\n09-27 11:49:29.015 29835 29895 E AndroidRuntime:    at android.os.Handler.dispatchMessage(Handler.java:95)\n09-27 11:49:29.015 29835 29895 E AndroidRuntime:    at com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:31)\n09-27 11:49:29.015 29835 29895 E AndroidRuntime:    at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:29.015 29835 29895 E AndroidRuntime:    at com.facebook.react.bridge.queue.MessageQueueThreadImpl$3.run(MessageQueueThreadImpl.java:196)\n09-27 11:49:29.015 29835 29895 E AndroidRuntime:    at java.lang.Thread.run(Thread.java:818)\n09-27 11:49:29.027 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:29.028 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:29.028 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:29.028 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:29.028 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:29.028 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:29.028 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:29.028 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:29.028 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:29.028 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:29.028 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:29.028 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:29.028 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:29.028 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:29.028 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:29.028 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:29.028 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:29.028 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:29.028 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:29.028 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:29.028 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:29.028 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:29.028 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:29.028 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:29.028 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:29.028 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:29.042   733   747 W ActivityManager:   Force finishing activity com.app.music.staging/com.app.music.MainActivity\n09-27 11:49:29.348   733   747 I WindowManager: Screenshot max retries 4 of Token{f9afcd9 ActivityRecord{1899b20 u0 com.app.music.staging/com.app.music.MainActivity t721 f}} appWin=Window{1d58163 u0 com.app.music.staging/com.app.music.MainActivity} drawState=1\n09-27 11:49:29.363   733  1054 W art     : Long monitor contention event with owner method=void com.android.server.am.ActivityManagerService.crashApplication(com.android.server.am.ProcessRecord, android.app.ApplicationErrorReport$CrashInfo) from ActivityManagerService.java:12975 waiters=0 for 307ms\n09-27 11:49:29.418   733   772 W art     : Long monitor contention event with owner method=void com.android.server.am.ActivityManagerService.crashApplication(com.android.server.am.ProcessRecord, android.app.ApplicationErrorReport$CrashInfo) from ActivityManagerService.java:12975 waiters=2 for 356ms\n09-27 11:49:29.422 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:29.435   733   772 W BroadcastQueue: Skipping deliver [background] BroadcastRecord{832338e u-1 android.net.conn.CONNECTIVITY_CHANGE} to ReceiverList{ea8f290 29835 com.app.music.staging/10150/u0 remote:5d98953}: process crashing\n09-27 11:49:29.471 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:29.474   733 20434 I OpenGLRenderer: Initialized EGL, version 1.4\n09-27 11:49:29.497 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:29.543 29835 29835 I Choreographer: Skipped 30 frames!  The application may be doing too much work on its main thread.\n09-27 11:49:29.564 29835 29835 E ActivityThread: Performing pause of activity that is not resumed: {com.app.music.staging/com.app.music.MainActivity}\n09-27 11:49:29.564 29835 29835 E ActivityThread: java.lang.RuntimeException: Performing pause of activity that is not resumed: {com.app.music.staging/com.app.music.MainActivity}\n09-27 11:49:29.564 29835 29835 E ActivityThread:    at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3398)\n09-27 11:49:29.564 29835 29835 E ActivityThread:    at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3386)\n09-27 11:49:29.564 29835 29835 E ActivityThread:    at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:3361)\n09-27 11:49:29.564 29835 29835 E ActivityThread:    at android.app.ActivityThread.-wrap13(ActivityThread.java)\n09-27 11:49:29.564 29835 29835 E ActivityThread:    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1381)\n09-27 11:49:29.564 29835 29835 E ActivityThread:    at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:29.564 29835 29835 E ActivityThread:    at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:29.564 29835 29835 E ActivityThread:    at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:29.564 29835 29835 E ActivityThread:    at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:29.564 29835 29835 E ActivityThread:    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:29.564 29835 29835 E ActivityThread:    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:29.575 29835 29835 W com.facebook.appevents.internal.ActivityLifecycleTracker: Unexpected activity pause without a matching activity resume. Logging data may be incorrect. Make sure you call activateApp from your Application's onCreate method\n09-27 11:49:29.610 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:29.611 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:29.611 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:29.611 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:29.611 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:29.611 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:29.611 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:29.611 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:29.611 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:29.611 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:29.611 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:29.611 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:29.611 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:29.611 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:29.611 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:29.611 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:29.611 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:29.611 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:29.611 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:29.611 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:29.611 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:29.611 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:29.611 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:29.611 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:29.611 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:29.611 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:29.623 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:29.629   733   772 W BroadcastQueue: Skipping deliver [background] BroadcastRecord{f0290ee u-1 android.net.conn.CONNECTIVITY_CHANGE} to ReceiverList{20f8f0 29835 com.app.music.staging/10150/u0 remote:36e2d33}: process crashing\n09-27 11:49:29.672 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:29.739 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:29.740 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":81}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:29.757 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:29.758 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:29.758 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:29.758 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:29.758 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:29.758 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:29.758 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:29.758 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:29.758 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:29.758 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:29.758 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:29.758 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:29.758 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:29.758 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:29.758 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:29.758 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:29.758 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:29.758 29835 29835 E unknown:React:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4099)\n09-27 11:49:29.758 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap15(ActivityThread.java)\n09-27 11:49:29.758 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1369)\n09-27 11:49:29.758 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:29.758 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:29.758 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:29.758 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:29.758 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:29.758 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:29.768 29835 29835 D AudioPlayerModule: onHostResume\n09-27 11:49:29.772   733   772 W BroadcastQueue: Skipping deliver [background] BroadcastRecord{365fb87 u-1 android.net.conn.CONNECTIVITY_CHANGE} to ReceiverList{9fd61a1 29835 com.app.music.staging/10150/u0 remote:166f608}: process crashing\n09-27 11:49:29.788 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":91}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:29.797 29835 29835 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.app.music.staging/files/CodePush/2010a59fc3c016739e90bfba7c5f905877e8f7458e011d521c76c6f79f998093/CodePush/index.android.bundle\"\n09-27 11:49:29.810 29835 29835 D AudioPlayerModule: onHostPause\n09-27 11:49:29.813 29835 29835 D AudioPlayerModule: onHostDestroy\n09-27 11:49:29.814 29835 29835 E unknown:React: receiver already unregistered\n09-27 11:49:29.814 29835 29835 E unknown:React: java.lang.IllegalArgumentException: Receiver not registered: com.github.yamill.orientation.OrientationModule$1@ce47e6\n09-27 11:49:29.814 29835 29835 E unknown:React:     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:781)\n09-27 11:49:29.814 29835 29835 E unknown:React:     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1205)\n09-27 11:49:29.814 29835 29835 E unknown:React:     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:582)\n09-27 11:49:29.814 29835 29835 E unknown:React:     at com.github.yamill.orientation.OrientationModule.onHostDestroy(OrientationModule.java:171)\n09-27 11:49:29.814 29835 29835 E unknown:React:     at com.facebook.react.bridge.ReactContext.onHostDestroy(ReactContext.java:205)\n09-27 11:49:29.814 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.moveToBeforeCreateLifecycleState(XReactInstanceManagerImpl.java:607)\n09-27 11:49:29.814 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:539)\n09-27 11:49:29.814 29835 29835 E unknown:React:     at com.facebook.react.XReactInstanceManagerImpl.onHostDestroy(XReactInstanceManagerImpl.java:546)\n09-27 11:49:29.814 29835 29835 E unknown:React:     at com.facebook.react.ReactActivityDelegate.onDestroy(ReactActivityDelegate.java:128)\n09-27 11:49:29.814 29835 29835 E unknown:React:     at com.facebook.react.ReactActivity.onDestroy(ReactActivity.java:72)\n09-27 11:49:29.814 29835 29835 E unknown:React:     at android.app.Activity.performDestroy(Activity.java:7296)\n09-27 11:49:29.814 29835 29835 E unknown:React:     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1143)\n09-27 11:49:29.814 29835 29835 E unknown:React:     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3864)\n09-27 11:49:29.814 29835 29835 E unknown:React:     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3895)\n09-27 11:49:29.814 29835 29835 E unknown:React:     at android.app.ActivityThread.-wrap5(ActivityThread.java)\n09-27 11:49:29.814 29835 29835 E unknown:React:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1417)\n09-27 11:49:29.814 29835 29835 E unknown:React:     at android.os.Handler.dispatchMessage(Handler.java:102)\n09-27 11:49:29.814 29835 29835 E unknown:React:     at android.os.Looper.loop(Looper.java:148)\n09-27 11:49:29.814 29835 29835 E unknown:React:     at android.app.ActivityThread.main(ActivityThread.java:5471)\n09-27 11:49:29.814 29835 29835 E unknown:React:     at java.lang.reflect.Method.invoke(Native Method)\n09-27 11:49:29.814 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n09-27 11:49:29.814 29835 29835 E unknown:React:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n09-27 11:49:30.543 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":101}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:30.563 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":111}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:30.637 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":121}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:30.664 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":131}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:30.700 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":141}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:30.767 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":151}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:30.786 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":161}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:30.811 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":171}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:30.905 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":181}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:30.930 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":191}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:30.996 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":201}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:31.023 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":211}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:31.046 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":221}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:31.080 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":231}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:31.113 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":241}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:31.155 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":251}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:31.181 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":261}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:31.212 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":271}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:31.244 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":281}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:31.275 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":291}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:31.305 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":301}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:31.354 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":311}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:31.382 29835 29894 I ReactNativeJS: Running application \"app\" with appParams: {\"initialProps\":{},\"rootTag\":321}. DEV === false, development-level warning are OFF, performance optimizations are ON\n09-27 11:49:33.174  2505  2722 D HeadsetStateMachine: Disconnected process message: 10, size: 0\n09-27 11:49:33.209  2505  2722 D HeadsetStateMachine: Disconnected process message: 10, size: 0\n```\n. @silhouettes  this is the error in Fabric may be useful \nhttp://crashes.to/s/47deab43c21\n. @silhouettes i tested with PR 535 but still crash after update , also tested with this library for restart app https://github.com/avishayil/react-native-restart and it works but no update code push bundle i think that maybe its a problem with bundle instalation\n. Hi @silhouettes \n1 -  \n``` javascript\nimport codePush from 'react-native-code-push'\nimport {Platform} from 'react-native'\nimport PubSub from 'pubsub-js'\nimport Promise from 'bluebird'\nexport default class BundleUpdater {\n//...\n\n// i call this\n    static update(): Promise {\n        DEV && console.log('[BundleUpdater]', 'update');\n    return codePush.sync({\n         installMode: codePush.InstallMode.ON_NEXT_RESUME,\n    }, (status) => {\n\n        switch (status) {\n            case codePush.SyncStatus.DOWNLOADING_PACKAGE:\n                PubSub.publish('onBundleUpdateDownloading', true);\n                __DEV__ && console.log('[BundleUpdater]', 'DOWNLOADING_PACKAGE');\n                break;\n            case codePush.SyncStatus.INSTALLING_UPDATE:\n                __DEV__ && console.log('[BundleUpdater]', 'INSTALLING_UPDATE');\n                break;\n            case codePush.SyncStatus.UPDATE_INSTALLED:\n                PubSub.publish('onBundleUpdateInstalled', true);\n                __DEV__ && console.log('[BundleUpdater]', 'UPDATE_INSTALLED');\n                break;\n        }\n\n    }, ({receivedBytes, totalBytes,}) => {\n\n        __DEV__ && console.log('[BundleUpdater]', 'DOWNLOADING_PACKAGE', receivedBytes, totalBytes)\n\n        return true;\n    }).catch((error) => {\n        __DEV__ && console.log('[BundleUpdater]', 'ERROR', error);\n        return true;\n    });\n}\n\n}\n```\n2 - After resume or restart app\n3 - in release mode with RN 0.34.1\n. similar to #536\n. @stewart42 it work for me :) \ud83d\udc4d \n. same here im using react-native-fs and block when download \n. immediate restarts  on Android  :( \n. ",
    "codyhazelwood": "@lostintangent Thanks for the quick reply!\nThe key listed in my Info.plist under CodePushDeploymentKey does match the key returned with the code-push ls -k command.  The interesting thing is that the history command shows rollbacks.  Is there a way to pull logs on why it rolled back?  It's odd that the App Store version is rolling back when running straight from Xcode doesn't.\n. I'll close the issue for now while I do some of the debugging you suggested.  Thanks!\n. One of my issues was that I misunderstood the documentation on the version number.  My app store version was 1.5.0 and I was trying to release a code push update with v1.5.1.\nAs far as the rollbacks go, I'm not sure what happened.  I rm -rf'ed my node_modules and reinstalled and resubmitted to the app store.  All appears to be good now!\n. ",
    "magrinj": "@codyhazelwood So what's the problem you find ? I have a similar problem, my app rollback and don't want tu update to the latest version I push with CodePush, I don't really understand why...\n. @lostintangent Thanks for your quick reply! \nI check your suggestion, and my keys are identical. When I print my history log of all versions, I got some versions with rollback.\nI forgot to update my version in package.json between two version of my app, do you think that could be the problem ?\nYes I just do a TestFlight update to be sure right now, so I have the same version of react-native as my simulator.\n. I call the sync method like that:\n``` jsx\n  componentDidMount() {\n    // Sync CodePush with new bundle\n    AppState.addEventListener('change', (newState) => {\n      newState === 'active' && this._codePushSync();\n    });\n    AuthStore.listen(this.onChange);\n  }\n_codePushSync() {\n    codePush.sync({ updateDialog: {\n      appendReleaseDescription: true,\n      descriptionPrefix: '\\n\\nChange log:\\n',\n    },\n    installMode: codePush.InstallMode.IMMEDIATE });\n  }\n```\n. and the log of my version looks like:\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Label \u2502 Release Time   \u2502 App Version \u2502 Mandatory \u2502 Description \u2502 Install Metrics        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v1    \u2502 21 days ago    \u2502 1.0         \u2502 No        \u2502             \u2502 No installs recorded   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v2    \u2502 20 days ago    \u2502 1.1         \u2502 No        \u2502             \u2502 Active: 4.5% (1 of 22) \u2502\n\u2502       \u2502                \u2502             \u2502           \u2502             \u2502 Total: 2               \u2502\n\u2502       \u2502                \u2502             \u2502           \u2502             \u2502 Rollbacks: 1           \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v3    \u2502 20 days ago    \u2502 1.1         \u2502 No        \u2502             \u2502 Active: 4.5% (1 of 22) \u2502\n\u2502       \u2502                \u2502             \u2502           \u2502             \u2502 Total: 2 (3 pending)   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v4    \u2502 20 days ago    \u2502 1.1         \u2502 No        \u2502             \u2502 No installs recorded   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v5    \u2502 20 days ago    \u2502 1.1         \u2502 No        \u2502             \u2502 Active: 0% (0 of 22)   \u2502\n\u2502       \u2502                \u2502             \u2502           \u2502             \u2502 Total: 3 (2 pending)   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v6    \u2502 19 days ago    \u2502 1.1         \u2502 No        \u2502             \u2502 Active: 0% (0 of 22)   \u2502\n\u2502       \u2502                \u2502             \u2502           \u2502             \u2502 Total: 3 (1 pending)   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v7    \u2502 16 days ago    \u2502 1.1         \u2502 No        \u2502             \u2502 Active: 18% (4 of 22)  \u2502\n\u2502       \u2502                \u2502             \u2502           \u2502             \u2502 Total: 7 (6 pending)   \u2502\n\u2502       \u2502                \u2502             \u2502           \u2502             \u2502 Rollbacks: 2           \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v8    \u2502 a day ago      \u2502 1.2         \u2502 No        \u2502             \u2502 No installs recorded   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v9    \u2502 a day ago      \u2502 1.2         \u2502 No        \u2502             \u2502 Active: 18% (4 of 22)  \u2502\n\u2502       \u2502                \u2502             \u2502           \u2502             \u2502 Total: 6 (1 pending)   \u2502\n\u2502       \u2502                \u2502             \u2502           \u2502             \u2502 Rollbacks: 1           \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v10   \u2502 4 hours ago    \u2502 1.1         \u2502 No        \u2502             \u2502 No installs recorded   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v11   \u2502 4 hours ago    \u2502 1.1         \u2502 No        \u2502             \u2502 Active: 4.5% (1 of 22) \u2502\n\u2502       \u2502                \u2502             \u2502           \u2502             \u2502 Total: 1               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v12   \u2502 27 minutes ago \u2502 1.1         \u2502 No        \u2502             \u2502 No installs recorded   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v13   \u2502 17 minutes ago \u2502 1.2         \u2502 No        \u2502             \u2502 Active: 0% (0 of 22)   \u2502\n\u2502       \u2502                \u2502             \u2502           \u2502             \u2502 Total: 0 (1 pending)   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v14   \u2502 a minute ago   \u2502 1.2         \u2502 Yes       \u2502             \u2502 Active: 0% (0 of 22)   \u2502\n\u2502       \u2502                \u2502             \u2502           \u2502             \u2502 Total: 0 (1 pending)   \u2502\n. Oh ok I understand, thank you very much for your help, I'm going to try it! \n. Looks like it works, thanks a lot @lostintangent ! :) \n. No problem! Yes I think that's gonna help some people to don't do the same error than me! \n. ",
    "itcurves": "I have something similar issue. My code push work fine before but I push the new version but there is no pop for the client to install new update. how I can check what is the problem?\nPlease help as I am on learning track of code push and have no idea why it is not loading new on device.\nThank you in advance.. ",
    "max-mironov": "Hello @itcurves and thanks for reaching us. \nAs I can see the current thread is too old and I'm not sure that it is completely related to you issue. This way I believe it would be best if you create a separate issue (you can find a good template here) and provide us as much info as possible about your problem and about your application. Explain what you did, what you expected to happen and what actually happens. \nWe are ready to help but we need more info to identify the root cause of your issue.. @nicotroia please checkout our compatibility table - https://github.com/Microsoft/react-native-code-push#supported-react-native-platforms.\nSeems that your version of code push plugin is not supported by RN 0.47. @Rolando-Barbella - hi, react-native-code-push 2.0.1 is not compatible with react-native 0.42x. \nPlease see https://github.com/Microsoft/react-native-code-push/issues/780 for details.. @honki91 - hi, some additional information regarding this can be found here and there.\n\nIf your app targets both iOS and Android, please create separate apps for each platform with CodePush (see the note below for details). \nNote, if you are targeting both platforms it is recommended to create separate CodePush applications for each platform.. @Jacse  - that looks interesting. However I was not able to reproduce it with RN 0.44 and RNCP 2.0.3-beta.\nI've initialized new RN application with rninit init testapp_rn --source react-native@0.44\nAdded plugin with npm install --save react-native-code-push@2.0.3-beta and run react-native link react-native-code-push. \n\nSo could you please be more specific about your environment/project structure. Ideally you can share with us the minimum app where we can reproduce this case.. @Jacse thanks for this, the error should be relative to  double quotes in path name.\nMy guess is that when we parse pbxproj here we probably have INFOPLIST_FILE value in quotes. \nIs it possible for you to verify this (open project.pbxproj file in editor and share with us value for INFOPLIST_FILE key). If our assumptions are correct we will prepare PR to fix this case.\nPlease let us know what you find out.. @ngxiaoyi - got it, thanks, could you please share with us the contents of your project.pbxproj file or the value of INFOPLIST_FILE key from pbxproj?. @Jacse - thanks for this, will fix this case for link command ASAP.. @Jacse, @ngxiaoyi - I've added PR to remove quotes from plist path, please verify if it works for you.. @panarasi, @iageoghe - what do you think, do we need to proceed with this?\nIMO this issue should be closed as far as we do not see anyone who claims about this for last several month (I believe it was fixed in RN 0.36+). Your insight here is much appreciated. . @mmoutenot we are closing the issue for now, please reopen or create a new one when you get a chance to look at this.. Closed it for now as a pull request with fixes has been already merged.. @jordanmkoncz hello - yes, that fix should be present in recent 1.17.3 beta version. \nIf you still see the issue is it possible for you to open another ticket and fill as much details as possible here and we will look at?. @silhouettes - I've added logic to narrow results by PRODUCT_NAME, can you please look at this when you have time.. Hello @ewindso, thank you for filling the issue. Right now it is not very clear how you are integrating RN  into the Fragment, so it would be very helpful if you could provide a minimum working example of the app integration or may be a minimum app. So we can repro your case and try to identify how this can be fixed.. Hello @patrickomeara, do you have a chance to verify that you can successfully get updates from your Staging deployment (which was promoted to v3 Prod)? If yes - please verify once again that your are running the app which is of version 0.4.0  and the Deployment key in plist file is correct. \nYou can also try to debug the app on iOS simulator which is configured with your prod release key to view the diagnostic logs produced by the CodePush plugin within your app (should be built with debug configuration), please see https://microsoft.github.io/code-push/docs/cli.html#link-5 for details.. Closed as an exact duplicate of https://github.com/Microsoft/code-push/issues/386. @vedovato - hi, do you have a chance to look at this?. @vedovato - any updates about this? Just a friendly ping :). @vedovato \nNo problem, it's not something super urgent. Please verify it at any convenient time for you :) We just wanted to be sure that the issue is fixed for you.\n. Hello @leonardgithub, do I get it right that you would like to bump app version via code-push release command? If so than unfortunately it is impossible to do via code-push release due to React Native plugin will sync your JS bundle file and any image assets only. \nAlso please note that you can specify target binary version for any release like so:\ncode-push release-react MyApp-Android android --targetBinaryVersion \"~1.1.0\nso you can manage which version of the app your code-push release will be applied.. @merlinpatt - hi. So - yes, in fact it is possible to push such changes that will try to mirror another app. \nBut remember that usually  bank apps (or other valuable apps) uses two factor authentication, so even if someone stole a password that would be not enough. \nAlso as far as it is not possible to push native changes - that will make more difficult to potentially harm user.\nFinally most likely that the app will be banned by Apple or GooglePlay very soon as it will violate Apple's developer agreement or GooglePlay policies. . Closing the issue for now, please reopen/create a new one if the issue still persist or you have any questions.. @silhouettes sure, we'll handle this. Hi @dannyyaou, is it correct that before updating code-push plugin to the latest version everything works as expected?\nAlso this is not absolutely clear for me: \n\nWhen I mentioned the version which is the first version with react-native-code-push@1.17.0-beta, that means the bundle version that uploaded to codepush server, but native code on the device is still 1.14.6-beta, I guess that's cause of the problem..\n\nHave you tried to remove code-push plugin completely from the app and then reinstall the latest version again? . @dannyyaou - hi, do you have a chance to look at this?. Hi @cosmith, do you have separate apps for iOS and Android with different deployment keys? If not this may be the root cause of this issues. Please let us know.\n. Thank you for your reply @cosmith! \nAnyway as stated here https://microsoft.github.io/code-push/docs/cli.html#link-3 \n\"NOTE: Using the same app for iOS and Android may cause installation exceptions because the CodePush update package produced for iOS will have different content from the update produced for Android.\"\nSo it would be better to create separate apps. Please let us know if you need further help or we can close the ticket?. Correct, please let us know if deploying to separate platforms resolve the issue. . @cosmith that make sense, thank you for feedback. Will try to update docs to make things more evident.\nIf you don't mind I'm closing the issue for now, feel free to reopen or create a new one in case of any questions.. Hi @amourya-systango, could you please clarify which platform are you in?\nIf you are on Android do you setup it as it is described in the guidelines? Is your MainApplication class extended by Application class?. For react-native-code-push plugin mocha test framework is used.\nPlease see https://github.com/Microsoft/react-native-code-push/blob/master/code-push-plugin-testing-framework/package.json#L20 for reference.. Hello @amourya-systango, do you still experience the issue?. Hi @kevinhylant, sorry for slow response.\nCould you please be more specific about your repro steps?\nI've tried the following:\n1) init new react-native app with react-native init AppName\n2) added latest react-natvie-code-push-plugin and also dependencies from above with yarn\n3) linked react-native-code-push-plugin with react-native link react-native-code-push command\n4) was able to run npm test without any error and also react-native run-ios works well.\nSo can you have a look at this and provide some more info about your use case (or exact reproduction steps)?\n. @amourya-systango hi, do you have a chance to look at this?. @amourya-systango - just a friendly ping :). Hey @amourya-systango, I just wanted to verify if you still experience the issue you have initially created. If you don't see any issues let us know if we can close it for now.. @amourya-systango I'll close the issue currently, please feel free to reopen it if any questions or if you see any issues.. Hey @bencollab, I have just tried to reproduce your issue but unfortunately with no luck. \nSo I've used iPhone7 iOS 10.3.2 with RN 0.44.2 and react-native-code-push 3.0.1-beta.\nI've produced version 2.0.13 of my app, released few updates, verified they are available and applied correctly. \nAfter that I've produced new version of the app (v. 2.0.16) and have verified that I do not see any updates now. \nIs it possible for you to verify the issue once again (could you also try to release it without Testflight to see if the issue could be reproducible this way either) and try to check once again if my repro steps are complete and if you have any other conditions that I have missed probably. \nPlease let us know the results.. Hey @bencollab, thanks for quick reply. Sure thing, I can check tomorrow with version 2.0.9 but I don't believe that this could be the reason of the issue. AFAIK CodePush uses semver for comparing versions so it should work correctly with v.2.0.9 in this case.\nAnyway when you build new binary on the device old updates are removed and only those who are targeting your binray version would be downloaded. \nBTW you said \n\ntry to reproduce again, but with an app version 2.0.9\n\nif I install version 2.0.9 of the app then it should be correct that release v21 is applied because its target binary version is satisfied. So it looks like expected result, isn't it? . @bencollab - thanks for heads up! Let us know if you get more info regarding this or see any issues.. @bencollab - good catch, so I've just recalled that we have the similar question previously, could you please take a look at the following:\nhttps://github.com/Microsoft/code-push/issues/400#issuecomment-281279417\nSo probably we have to update our docs to make things much clearer, if you have any suggestions or could help us with PR for this - that would be much appreciated. \n. @bencollab Yes, you are correct with your assumptions and adding patch version is referring to the app being requesting the update. \nAs for target binary version : it is indeed treated as range and as for specifying separate option or flag - in my point of view that is probably not required because you could always narrow versions to match exact number (or patch your release if you need to update previous one). \nAdditional flag also could lead to increasing complexity for the API, which is also may not be desired. \nAnyway than you very much for pointing at this and we probably should at least update documentation to avoid confusion in future.. @bencollab I think that patch command is what you are looking for. You could update your target binary version for this release from 2.0 to 2.0.0. I could look at this more tomorrow if needed. . @bencollab Thanks for providing with feedback. \nI understand your concerns and that all really make sense for me. But to be honest  for now we didn't get any requests for this yet, so for sure if it becomes something that gets more and more votes - we definitely should go ahead with this. \nFrom the other point of view I believe that some people could get used to expect current behavior at that moment and release updates with current logic in mind. So we should consider this scenario also.. Hello @mike623, thank you for filling the issue.\nAs for the second question - by default code push prohibit to release packages with identical contents, you can override this behavior if needed as it is described here - https://github.com/Microsoft/code-push/tree/master/cli#no-duplicate-release-error-parameter.\nFor the issue with request timeout can you please help us and answer some questions to clarify:\nDoes it reproduced on sample app? Which way do you release your code-push updates? Were the previous updates successful or this is the first package you were downloading to apply?. Hi @mike623, please let us know if you still face the issue.. @diegoperini - thanks for the info! @mike623 - I'm closing the issue for now, please feel free to reopen or create a new one of you could still see this (also it would be great if you could try to login-logout from cli first as it was suggested by @diegoperini). @qinghantang - hi, if possible could you please rephrase the problem in English and try to provide us with more info like it is described here. @qinghantang, I'm closing the issue for now because of lack of description, please reopen or create a new one with more detailed repro steps if needed,. Hi @EdmundMai, could you please try to slightly change your code when you codepushify your app.\nInstead of this one:\nexport default codePush(MyApp);\ntry to use this:\nexport default MyApp = codePush(MyApp).\nPlease let me know if it helps.\n. Hey there @gitfdy, please verify our compatibility table here. Seems that 0.41.2 is not compatible with CPRN 4.1.0-beta. Hello @438198602 thanks for posting an issue, a couple of questions:\na) What version of code-push cli/react-native you are on? Do you see any issues with other commands (like code-push app ls/ code-push deployment history MyApp Production etc?\nb) Are you able to reproduce this on our Sample app, or it is not working there either?\n. @438198602 is it possible for you to ping me via skype so it would be easier to determine the issue? (my skype id is max.mironov89). @438198602 btw just a guess - may your issue be related to something like this?\n- http://stackoverflow.com/questions/37189081/react-native-command-not-found\n- http://stackoverflow.com/questions/32253981/path-error-while-installing-react-native-command-not-found-error \nHave you tried to uninstall and re-install node-npm and reinstall  react-native-cli?. @438198602 thank you, do you mind if I close the current issue for now? You can create a new one or reopen this issue when you get a chance to verify this and if you have any questions.. Hello @WhynoChinese, thank you for reaching us the issue. Can you please answer several questions below to help us to determine the problem:\n1) Can you try to reproduce this with our sample app? If you can't reproduce the bug on it, provide us as much info as possible about your project (it would be best if you could share with us minimal of your app code where we can reproduce the issue this way)\n2) What are react-native/react-native-code-push versions you are using?\n3) Can you verify that your native part of the plugin is linked correctly? Do you use react-native link for this?\n4) Is it possible that you have the same problem as it was described here https://github.com/Microsoft/react-native-code-push/issues/505?. @WhynoChinese, do you have a chance to look at this?. @WhynoChinese thank you for your reply! If you don't mind I'm closing the issue now if you have resolved it, please feel free to reopen or create a new one of needed.. @palaniraja thanks for pointing at this, we've fixed typo.. Hello @kevinhylant can you please clarify - you are unable to build the app with xCode and got an error with \n\nReact/RCTBridge.h not found\n\n(make sure that all steps from here are completed)?\nOr you can build the app with xCode and deploy to the device but it crashes when you call sync method for update? But only first time, so subsequent sync calls will work?. @kevinhylant just to double check that on step B-1 you are adding correct node_modules/react-native-code-push/ios version of react-native-code-push (so you have removed the previous one and installed the latest with npm install command). Seems that something goes wrong after step B-2 and I've tried to repro this by manually removing - installing react-native code-push and updating react-native with npm install and seems it works fine,\n. @kevinhylant got it, thanks. I've googled about this problem, what I've found so far and you can possibly try do look at:\nhttp://stackoverflow.com/a/41488258\nhttps://github.com/facebook/react-native/issues/12042#issuecomment-275025960\nAlso I believe that adding references to header search paths is not really needed, so may be it make sense to try to reinstall code push plugin and see if it helps. If it is possible for you to share (or reproduce this on small example) the app so we can try to build on our side - it would be great.. @kevinhylant, do you have a chance to look at this? Please let us know if you still face the issue.. @kevinhylant  - I'm closing the issue for now, please reopen or create a new one if you still have this problem.. Hello @Colmea - that looks very interesting!\nI've tried to reproduce the issue on my own and add releaseStaging to my build gradle and build it with react-native run-android --variant=releaseStaging and it works. \nHow do you see message \n\napp is up to date?\n\nCan you provide us with output for both code-push debug android and adb logcat commands?\nE.g. mine said: \n\nLoading JS bundle from \"assets://index.android.bundle\"\n[07:32:52] Checking for update.\n[07:32:52] Reporting binary update (1.0)\n[07:32:54] Downloading package.\n[07:32:55] Installing update.\n[07:32:55] Update is installed and will be run when the app next resumes.\n\nAlso on your screenshot seems that you are showing history for Production deployment whereas releaseStaging should be for Staging one?. @Colmea \nAs for your question regarding usage of configuration instead of variant - I believe it depends upon react-native version you are running for, please see similar SO question here.\nYou will have \n\n[07:32:54] Downloading package.\n\nmessage only when you actually download package or you mean that you will see download progress bar when downloading?\nBtw your logs said that you are actually running version 0.3.0, have you tried to run new binary version and see if it helps?\nAnyway if you don't mind can we add some logging to see what deployment key you are actually running against your app. Could you please go to node_modules -> react-natve-code-push -> CodePush.js file and add log(config.deploymentKey); at line 31 right after this one:\n const config = deploymentKey ? { ...nativeConfig, ...{ deploymentKey } } : nativeConfig; .\nSo then remove the app from device, rebuild it deploy again and run code-push debug android.\nPlease let us know the results and if you see the same deployment key as specified with build.gradle here.. @Colmea - thanks for quick turn around!\nYeah, that should be possible, at least looks like I was able to do this initially when trying to reproduce the issue. May be you can share the minimum example of your app so I can try it on my environment to see if it works? \n. @Colmea - hi, could you please look at this and let us know if we can help you here.. Hello @gavinyeah, thank you for your question,\nI've tried to reproduce this on sample app, so I've:\n1) Defined app version in build.gradle as of 2.7.0\n2) Deployed the app with react-native run-android\n3) Released new version with -t \">=2.7.0\" flag\n4) Was able to apply new release\n\nDo you have any special aspects about your app? Is your case reproducible with our sample app?\nAlso can you try to run code-push debug android command and share with as what is the output when you run your app and try to update it?\n. @gavinyeah - thank you so much for detailed explanation of the root cause of the issue. If you don't mind I'm closing this one now, please feel free to reach as if you see any other issues with code-push.. @silhouettes do I get it right that RN v0.19 will be ok and fully compatible with latest release of our plugin?. @nerdmed  - hi, can you please try the following:\n1) Change codePushOptions to const codePushOptions = { checkFrequency: codePush.CheckFrequency.ON_APP_RESUME , installMode: codePush.InstallMode.ON_NEXT_RESUME};\n2) Instead of export default codePush(codePushOptions)(MyApp);\n can you use the following:\nexport default class MyApp extends Component {...};\nMyApp = codePush(codePushOptions)(MyApp);\nPlease let us know if it helps.. @nerdmed - hi again, do you have a chance to look at this?. @nerdmed - please let us know if you have any updates about this :). @nerdmed thanks for heads up, this will be useful for further reference if we get the same error. Thanks again, appreciate it!. Hi @just4fun, according to this https://github.com/Microsoft/code-push/tree/master/cli#target-binary-version-parameter it is ok to release updates only to v.2.0.0 and users that are running earlier version will not be affected.\n\nThis specifies the store/binary version of the application you are releasing the update for, so that only users running that version will receive the update, while users running an older and/or newer version of the app binary will not. This is useful for the following reasons:\n\n\nIf a user is running an older binary version, it's possible that there are breaking changes in the CodePush update that wouldn't be compatible with what they're running.\n\n\nIf a user is running a newer binary version, then it's presumed that what they are running is newer (and potentially incompatible) with the CodePush update.. Hey @just4fun, if you use code-push release-react command than (more details here) the following behavior will be performed:\nTargetBinaryVersion of this release will be inferring by using the version name that is specified in your project's Info.plist (for iOS) and build.gradle (for Android) files. \n\n\n\nSo there is no need to set up target binary version explicitly unless you want to change the default behavior. Also if you use general  command to release updates it will not be allowed  to release unless you set up target binary version on your own.\nYou can always verify which version your release belong to by executing the following command:\ncode-push deployment history AppNAme DeploymentName -> App Version column.\nPlease let us know if it solves your question.. Hello @jaeky, I've looked at your plist file provided and although it looks valid when checking it via plutil <filename> tool it looks like one of our 3rd party dependencies - plist  is throwing an error at this line: https://github.com/Microsoft/code-push/blob/master/cli/script/command-executor.ts#L877. \nSo I've dig deeper and it looks that empty nodes like <key></key>  are not legal here and should be replaced with something like this <key>123</key>.\nCould you please verify this and let us know if it helps.. Closing the issue due to fix is merged and verified, thank you @guilharj  for your help with this.. Hello @jordanmkoncz, thanks for filling the issue.\nYou can help us to determine the issue more quickly by doing the following:\nAll \"magic\" of searching correct plist path is done here: ./node_modules/react-native-code-push/scripts/postlink/ios/postlink.js.\nSo here we try to determine correct path for plist file.\nCan you add right before this line one more console.log('Couldnt find xcode project, return the default value) statement so we can be sure if we are not failing here when calling react-native link react-native-code-push.\nI believe other cases will be caught by console.log statements, so we will be able to determine what is going wrong by looking for the output.\nThe next place where you may fail to get correct plist path is here.\nThis logic is pretty good described by the comment above, so you need to verify the following:\nOpen your project.pbxproj file in any text editors and find INFOPLIST_FILE occurrences. Check here what is plist path here (may be you could also share with us your project.pbxproj file so we can verify this on our side also).\nPlease let us know the results.\n. @jordanmkoncz please let us know if you have a chance to look at this.. @jordanmkoncz np, that's ok, thanks for heads up! Will wait for your response.. @jordanmkoncz, just gentle ping on this :). @jordanmkoncz if you don't mind I'll close it for now, please reopen when you have a chance to revisit it.. Hi @youngcube, thanks for reaching us.\nI've tried to reproduce your issue but with no luck.\nI've done the following:\n1) Created new RN application with RNinit  CLI (RN 0.43.0, react 16.0.0-alpha.6)\n2) npm install --save react-native-code-push@2.0.3-beta\n3) npm i --save react-native-sqlite-storage@3.3.1 \n4) react-native link react-native-code-push\n5) open project with Android Studio, was able to build it without any exceptions\nCould you please confirm that you still see the error when using the steps from above? (or in other words with newly created app)\n. @youngcube - np, thanks for quick reply.\nSo do I get it right that you can build your project successfully unless you do react-native-link command?\nCan you try to do manual installation (instead of link command) to see if it helps. Also can you try to remove /node_modules folder completely from your project and then do fresh npm install to reinstall dependencies. Please let us know the results.. @youngcube - have you tried to remove node_modules and then do npm i?. @youngcube got it, thanks. Do you have a chance to reach me directly and share with me your project so I can investigate the problem deeper? . @youngcube - understood, that's ok. I'vent seen such issues before so it's not easy for me to say what's wrong here without looking through the source code. If you got an idea how to reproduce it with some kind of demo app that would be very useful. \nAlso one more thing - can you please verify that path to react-native points to correct location here:\nallprojects {\n    repositories {\n        mavenLocal()\n        jcenter()\n        maven {\n            // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm\n            url \"$rootDir/../node_modules/react-native/android\"\n        }\n    }\n}\nAnd also if it is possible - keep us posted if you have any updates about the issue.. @youngcube - that's good to hear. Do you mind creating separate issue in this repository, so we can address it and discuss other details there?. Sure thing @silhouettes :). Hello @dwilt, thank you for your kind words, your feedback is highly appreciated!\nAs for your question - we have CodePushOptions object that allows you to specify the deployement key, so you can use something e.g. like the following:\ncodePush.sync({ deploymentKey: \"KEY\",  mandatoryInstallMode: codePush.InstallMode.ON_NEXT_RESUME });\nYou can provide deploymentKey for codePush.checkForUpdate method as well.\nYou can also have a quick look at Dynamic Deployment Assignment section which mey be also interesting for you.\nPlease let us know if it was something that you were looking for.. @dwilt thank you for you feedback, we will look at how to improve our docs about this.. Hey @dwilt, you've got this error due to you remove this line from strings.xml but still reference it in CodePush constructor.\nIt looks like you should use the default behavior here like you noted above\nnew CodePush(BuildConfig.CODEPUSH_KEY, MainApplication.this, BuildConfig.DEBUG)\nThis way e.g. empty string will be initiated at first time and then you override this value from JS side. \nLet me know if it helps.. Hello @rahuljiresal, code-push uses semver package internally as a semver parser, so for version 2.0.0-beta this check semver.satisfies('2.0.0-beta', '*') returns false.\nYou should release an update with version 2.0.0-beta if you are going to target prerelease tags in your updates.\nPlease let us know if it helps.\n. Also please see https://github.com/Microsoft/code-push/issues/335 for more info.. @rahuljiresal, I believe we can close the issue now, please let us know if any questions. . Hey @lelup what version of RN and RN CodePush you are on?\nI believe the issue might be because you use RN <43 with latest version of RN CodePush plugin.  Please see our compatibility table for details. \nPlease let us know if it helps. \n. @lelup got it, that should be the issue. I'm closing the ticket for now, feel free to reopen/create a new one if you have any questions. . Hello @iambanh2, you can probably do one of the following:\n1) Upgrade RN to 0.43.x version and use react-native-code-push 2.0.x versions\n2) Use react-native-code-push 1.17.x versions with RN 0.40-0.42 versions.\nPlease choose whatever is more convenient to you.. Hey @jjdp, thanks for reaching us. \nCan you try to reproduce this issue on our basic sample, so we've updated it recently and didn't see such kind of problem here.\nOtherwise it would be great if you provide us more info on how you instantiate code-push or other special conditions met in your app.\n. @jjdp - hi, do you have a chance to look at this?. @jjdp - thanks for this. Do I get it right that this is related to 3rd party library and not related to code-push and therefore we can close it (as far as it is discussed in another thread)?. @jjdp so have you tried to reproduce this without CodePush? Or you have started seen this issue only after CodePush was added to your app?. @jjdp we are not using StaticLayoutProxy dependency at CodePush source code at all unlike RN have this one, so probably the only way to avoid it is to use solution provided by you above. So I believe this issue relates to RN only because in this example it is reproduced without CodePush.. Hello @cooperka.\nDue to you use debug scheme for building the project (Product-> Scheme -> Edit Scheme -> Run -> Build Configuration) you need to inject the following logic before you init codePush in AppDelegate.m:\n```\nifdef DEBUG\njsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index.ios\" fallbackResource:nil];\n\nelse\njsCodeLocation = [CodePush bundleURL];\n\nendif\n```\nWe should add this to our example app too, thanks for pointing at this.\nAnother option should be to use Release Build Configuration instead of Debug.\nPlease verify if it helps and let us know the results.. Hi @cooperka - do you have a chance to look at this? We can also enhance the error message - just let us know what description you believe fits best for your case. Please let us know what you think about this.. @cooperka - thanks for this. Can you please have a look at this PR: https://github.com/Microsoft/react-native-code-push/pull/811 and let us know if we are good here or should change error message to be more descriptive.. Closing this as PR has been merged.. @cmcewen - thanks for contribution. I've tried to apply your PR and then build it in xCode with blank RN app but I've got the following errors:\n\nCould you please have a look at this and guide me if I'm missing something?. @cmcewen we believe that both - your PR and #824 serves the same goal but the latter also has support for podspecs, so if you don't mind we'll close this one to avoid duplication. Please let us know if you have any concerns or you have any suggestions.. @jiaminglu thanks for contribution, your PR looks good, merging your PR to Master.. Hey @mike623 we recommend to create separate CodePush applications for each platform to avoid issues when e.g. you have released an update for iOS but your Android app also shows an update and it breaks it. \nThis will help to avoid such problems like were described e.g. here: https://github.com/Microsoft/react-native-code-push/issues/723\nPlease let us know if you have more questions.. @mike623 - please let us know if you need any further assistance with this.. Closing the issue, feel free to reopen if any Q's.. Hello @minhtc, thank you for submitting PR.\nI've tried to reproduce your issue with latest CodePush and React-Native but with no luck.\nDespite I've download property I don't see any problems when calling this method on native side.\n\nCould you please be more specific about the repro steps, is it an environemnt specific/version specific issue?. @minhtc - hi. Just have tried with RN 0.39 and CodePushReactNative 1.16.0-beta. Seems working well either.\nI've the following NSDictionary values:\n\nAfter that update is downloaded successfully. May be you have any other special conditions, is it reproducible every time on fresh install? Is it working on latest RN version? BTW what version of xCode you are on?. Hey @huangdou0204, sorry for the delay in response. \nDo you still experience the issue? Have you tried to put NotifyAppReady in componentDidMount event? It would be great if you share with us the minimum app example where the issue can be reproduced so we can see how you instantiate CodePush and apply update  check logic. \nAlso have you tried default behavior if it works for you like it is done in our basic sample?. hi @neeboo. Basically you should use release scheme configuration in order to allow bundles to be loaded and applied correctly after code-push update is applied (otherwise it will be always loaded from packager by default in debug configuration). You can change your configuration with Product -> Scheme -> Edit Scheme -> select Release configuration in xCode. \nPlease let me know if it helps.. @neeboo thank you for your answer. \nWe have some info about this in guides here: https://github.com/Microsoft/react-native-code-push#releasing-updates\n\nNOTE: CodePush updates should be tested in modes other than Debug mode. In Debug mode, React Native app always downloads JS bundle generated by packager, so JS bundle downloaded by CodePush does not apply.\n\nBut I believe that we can improve this message a little bit. Please let us know what can be changed here so we can add this info in this section or may be in other place.. @huangdou0204 - do you still experience the issue? Please let us know if you have any updates about it.. Closing the issue for now, please feel free to reopen or create a new issue if any questions. . Hello @Amurmurmur, as you've mentioned earlier - probably your issue could relates to https://github.com/Microsoft/react-native-code-push/issues/816. Could you please verify this and check if suggested fixes can help you?. Hey Guys, just minor heads up, seems that we've already  PR that should fix this issue - https://github.com/Microsoft/react-native-code-push/pull/809. We've started discussing issue with 'download' property here but unfortunately haven't finished yet.\nIn the lights of your recent answers and if you have a chance to verify if the issue is fixed by this PR I believe that we should merge it ASAP (and also enhance the fix with removing download  prop on native side to be sure that it works for \"Support Brownfield React Native apps\" feature either). . @peacechen, @didierbrun - thanks guys, please let us know the results.\nI'm also a little bit surprised here because I was not able to reproduce this under typical conditions. Will try to dig deeper into this tomorrow.. @peacechen - just tested both debug and release builds against \n\"react-native\": \"^0.44.0\",\n    \"react-native-code-push\": \"^2.0.2-beta\"\non simulator and on real device (iOS 8.1) - and it is working like a charm for me.\nAlso have verified for RN 0.34.1 and React-Native-CodePush 1.16.1-beta in release build and it is working well for me either.\nAnyway as far as it looks like removing download property is fixing the problem I think we should go ahead and merge these PR's while we continue our investigation about the exact reproduction steps. \n@axemclion, @pniko - what do you think about this?\n. @peacechen - we wholeheartedly agree that we should provide fix also for older versions.\nI've just published fix for v1.17.4, please verify (followed similar approach as here)\nAs far as 1.17.4 is now available via npm (as it is shown via npm view react-native-code-push) - I believe we can close the issue going further.\n@peacechen - please let us know if it works for you or if you see any issues. . Thank all of you guys for your help with this issue. I'm closing this now, please let us know if you still have any problems with this.. @peacechen - thanks for contribution. Since currently the issue is fixed on JS side we believe we can postpone to add this check on native side for now. We will incorporate this fix later when we will integrate \"Support for Brownfield apps\" feature. Currently close this PR. Thanks again for looking at this.. Hello @tigerohuang, thanks for reaching us. Any chance that you have similar problem as it was discussed in the links below?\nWarning from Apple\nhttps://github.com/Microsoft/code-push/issues/415. Close this for now as duplicate of https://github.com/Microsoft/react-native-code-push/issues/748, please update older thread if you have any thought/assumptions about this.. Hello @yelkamel, your issue looks similar to https://github.com/Microsoft/react-native-code-push/issues/816\nThe fix is on flight and new version will be available really soon. Thank you for your patience!. @yelkamel no problem and sorry for inconvenience, this will be resolved ASAP.. Hello @JulienKode, I'm really sorry for such delay in response. I've tried to build react-native-code-push with your changes and it looks good. Merging in to Master and thanks for contribution.. Hello @almirfilho, thank you for your question and for your kind words :)\nI believe the following domains should be added (taken from here):\n<access origin=\"https://codepush.azurewebsites.net\" />\n<access origin=\"https://codepush.blob.core.windows.net\" />\n<access origin=\"https://codepushupdates.azureedge.net\" />\nPlease let us know if it answers your question.\n. Hello @li-zhenyu, that looks odd. \nCan you please be more specific about how you install CodePush into your app?\nWhich plugin installation steps have you followed from here?. @li-zhenyu\nSo to sum it up, when you say \"Actually I got another warning\" does it mean that you still have Unable to resolve module 'react-native-code-push' error or this error has gone away?\nHave you tried to build project with xCode and what is the full build output there?\nIdeally it would be great if you can share with us your app so we can quickly have a look at what is wrong with your configuration. \nAlso it may looks reasonable to e.g. remove CodePush from your app and then reinstall it again and see if it helps to resolve the issue. \n. @li-zhenyu \nSo after a quick search I found that usually Mach-O Linker Error means you have not included a header file for a function you are using in your code (here are some more details). \nAs for ALWAYS_SEARCH_USER_PATHS - I don't think that this could be a reason of build failure because it is just warning, not an error.\nIn general I'd recommend firstly to remove CodePush temporary from your project and try to build the project. In this case if everything works fine we can be sure that the problem is somehow related to CodePush. After that (if it works well) try to add CodePush again to see if the issue still exists.\nPlease let us know the results.. Hi @mobile-support93, as I get it right you have InstallMode: Immediate for installing updates.\nProbably as a solution you can try to use InstallMode:On_NEXT_SUSPEND, this was recently released in v2.0.3-beta. So this should install the app in the background and this way can help you to avoid seeing white screen on applying new bundle. \nPlease let us know if it helps.. @mobile-support93 - please let us know if the information from above help you to resolve the issue.. I'm closing the issue now as of no response, please feel free to reopen or create a new one if needed.. @esutton thank you for reaching us. \nWe try to do our best to maintain backwards compatibility of our plugin with previous versions of React Native, but due to the nature of the platform, and the existence of breaking changes between releases sometimes it is not possible to use specific version of the plugin with exact version of RN.\nPlease remember that you could use react-native-code-push 1.17.x versions with RN 0.40-0.42 versions in your case.. Thank you for feedback @esutton, appreciate it!\nAs for using 1.17.x versions - you will have almost all functionality as code-push can provide for today, so there should be no problem with this.\nYou can check for details of what was added in latest 2.0.x releases here:\n1) v2.0.1-beta\n2) v2.0.2-beta\n3) v2.0.3-beta\nBut again, using 1.17.x version will be ok and you can have all the functionality working as expected with this versions.. @esutton From my point of view it is not a good idea having single code base but different package versions for different platforms, the differences between versions will turn out really hard to maintain at some point.\nBut at least you can always have two separate apps, one for iOS and one for Android if you really need to have latest version of the plugin for iOS platform.\nThere is a similar question  in StackOverflow, but I'm not sure if it can help you a lot.. Hi @peacechen - just have tried to reproduce your issue but with no luck. Probably I'm missing something within your repro steps? \nI've attached my little demo app here (dropped node_modules to reduce size) so can you have a look at this and see if you have an issue there? There are 3 buttons in it, one for immediate update, one for background update and one for showing dimensions. After every code push update dimensions are the same for me.\n(Note: I'vent yet tried with iOS 10.3 on real device, was tested on simulator in Release Mode).\ntestapp_rn34.zip\nPlease let us know the results.. @peacechen, ok I've tried this with real device on iOS 10.3.1 and release build with latest react and code-push but don't see any issues. (have tried to run both from xCode and command line)\nDo you have a chance to verify if you still have issue with e.g react 0.44?\nAlso when you say\n\nUpdate: Runs properly from Xcode, but not the command line.\n\ndo you mean that dimensions are incorrect after code-push update when deployed via command line or you mean that my example runs from xCode but not command line? . @peacechen thanks for update. So do you have any idea how to reproduce it with test app or may be you have other conditions?. @peacechen - hi again, do you have any updates about this item?. @peacechen - np, thanks for update!. Hey @pvinis - thank you for your question.\nFor iOS CodePush uses CFBundleShortVersionString key in the Info.plist file to verify if it satisfy your update's semver range. If yes - then update will be applied. \nPlease have a look at TargetBinaryVersion section for detailed info about versioning. \nPlease let us know if you have more questions regarding this.. @pvinis \nI don't really get what do you mean by \"but to apply this fix, i need to migrate some state thing\"?\nYou can always release mandatory  update with all critical fixes and it will be applied to all users whether they are on code-push version X or already on code-push version Y. But I'm not sure if it is something you are asking for. Can you please clarify more if possible.. @pvinis  - thank you for explanation, hope I get it right now. \nSo I believe in general we suppose that store versions should serve that purpose and when you perform breaking changes it may seems reasonable to bump app version of the app (and this way CodePush updates will be mostly for addressing bugs and/or adding small changes).\nBut in several cases you can probably use CodePush js api to inspect possible update and verify if you ever need to proceed with it.\nYou can use checkForUpdate  method  to see whether the configured app deployment has an update available. If it has an update you can inspect its props and decide if you would like to download it. \nYou can also use getUpdateMetadata  method which retrieves the metadata for an installed update whose state matches the specified updateState parameter. This way you can get out what update you are running if any. \nStrictly speaking 'updates' doesn't have versions at all, they are distinguished by label property which is automatically given to the update by the CodePush server. Hope it helps.\nAlso would be great if someone else in the community will have a fresh look at this and share their thoughts if any.\n. Closing this for now, please reopen this one or create new issue if you have further questions. . Hey @Amurmurmur, I have tried to reproduce your issue but with no luck. So basically I've done the following (as you have described):\nreact-native init RNIssue843\nyarn add react-native-code-push\nyarn add react-navigation\nreact-native run-ios\nAlso linked code-push with react-native link react-native-code-push.\nMy index.ios.js is as follows:\n```import React, { Component } from 'react';\nimport {\n  AppRegistry,\n  StyleSheet,\n  Text,\n  View\n} from 'react-native';\nimport codePush from \"react-native-code-push\";\nclass RNIssue843 extends Component {\nconstructor(props){\n      super(props);\n  }\ncomponentDidMount() {\n    if (!DEV)\n      codePush.sync({\n        updateDialog: true,\n        installMode: codePush.InstallMode.IMMEDIATE\n      });\n  }\nrender() {\n    return (\n     \nTEST\n\n    );\n  }\n}\nRNIssue843 = codePush({ checkFrequency: codePush.CheckFrequency.MANUAL })(RNIssue843);\nAppRegistry.registerComponent('RNIssue843', () => RNIssue843);\nexport default RNIssue843;\n```\nSo could you please verify if my repro steps are correct or if you can reproduce the issue when starting from the scratch?\n. @Amurmurmur thank you for your kind words, you are always welcome!. @AndrewJack - thanks for great contribution. I believe we should test it very careful before merging this changes. \nAlso I'vent got a chance yet to dive deeper into it but we have one PR that probably has some overlap with your changes, do you mind to have a quick look at it also to see if it somehow deals with your problem and if you think it ever make sense (or your changes will fix this item also). We really appreciate your experience here and your insight would be very valuable for us. . Hello @AndrewJack. Your changes looks good and reasonable to me! I've double checked all main cases (with different installModes) on emulator and on real device with signed apk (Android7) and haven't found any issues. We really appreciate your efforts and help here - thank you for this!\nI'm good with merging this stuff but probably @sergey-akhalkov  could also have a look at this before we incorporate this changes to Master.\n. @EwyynTomato - thank you so much for pointing at this, I've created PR that should fix the issue - https://github.com/Microsoft/react-native-code-push/pull/861. \n@hzyIO, @EwyynTomato  - could you please check to see if this soultion works for you? (from my side I've also tested it with emulator/real device on signed/unsigned apk with fresh install and codepush updates applied).\nIf you guys have any reason if it can be implemented other ways - please voice your concerns.. @hzyIO, @EwyynTomato - guys, just a friendly ping, do you have a chance to look at this?. @hzyIO I'm going to close the issue as I believe the fix is merged in Master, please test it when you have time and provide us with your feedback. For sure reopen the issue if you see any problems with this.. @hose314 thanks for letting us know, that looks interesting. \nIs it possible for you to provide us with an example of how we can replicate this issue so we can investigate it? Or even better if you could reproduce it with our sample app? . Hi @hslls, got it. Could you please confirm that your issue is not the same as this one which we are currently investigating?. Hey @yellowChao, thank you for your question. I believe that it is not possible due to we do not have logic to handle multiple packages in bundleUrlForResourceMethod . Please let us know if you have any thoughts or considerations about this.. @yellowChao, @JuanbingTeam  thank you so much for referencing the issue. So I'm afraid this is not something that code push supports \"out of box\". Currently we are working on CodeSigning feature and I'm not sure that we can handle this and investigate properly in the nearest time. However if you have time and could manage this you could add the corresponding PR. You help here would be much appreciated.\nPlease let us know if you have other thoughts or considerations about this.. Thanks for the update @vidyuthd , I believe this way we could close the issue for now, feel free to reopen if you will see this again.. Hi @weijianfeng , this looks like the package probably is not linked. It would be great if we have more information to figure out what's the root cause. Can you please describe step by step what you have done, what you project structure looks like in Android Studio and what does your settings.gralde/build.gradle looks like?\nAlso can you please have a quick look at the following q's at SO to see if suggested answers could help?\nhttps://stackoverflow.com/questions/22743582/error-configuration-with-name-default-not-found-in-android-studio\nhttps://stackoverflow.com/questions/17188489/android-studio-gradle-configuration-with-name-default-not-found. @weijianfeng - got it, thanks for quick turn around!. Hi @2ducanhpham, thank  you for your question.\nCould you please give me a little guidance how I can reproduce your problem from the scratch?\nHave you followed configuration steps described here https://github.com/luggit/react-native-config#android?\nAlso is it possible for you to verify if the issue reproduces without code-push plugin installed?. @2ducanhpham thank you for your reply. Could you please double check that the issue is relative to code-push? (i.e. remove code-push, add logic that grabs env variable somewhere and check to see if you have issue like this one:\nex: Detecting android app version:\n[Error] No property named \"env.get(VERSION)\" exists in the \"android/gradle.properties\" file.\nPlease let us know the results.\n. Hi again @2ducanhpham, sorry for delay in response, I believe I've got your point. \nSo the issue you have faced arrises because our CLI does not have logic to parse env variables in gradle/plist files (basically all the parsing \"magic\" is done here). \nProbably we could think about support for parsing env variables but anyway there can be issues because different modules can vary in API (e.g. dotenv uses process.env.VARNAME whereas  other library can use other semantics like this one project.env.get(\"VARNAME\") etc.)\nFor your particular case I think that general release form would be suitable.\nSo you just define your version nave as a parameter here and it should work.\nPlease let us know the results.. @2ducanhpham - got it and thank you for your feedback. We are constantly working on improving the product, so I believe this can be addressed somewhere in future. \nIf you don't mind I'm closing the issue currently, feel free to reach us if any questions. . @jay1337 - thank you so much for pointing at this. \nI've added PR to fix this inconsistency (have tried this on emulator and real device with Android 7 and RN 0.44 and CP 2.0.3-beta) - could you please also verify if it works for you on your side?. @jay1337 - hi, please let us know if you have a chance to look at this.. Hi @yaronlevi, thank you for reaching us.\nI've tried to use react-native link react-native-code-push and looks like it adds compile project(':react-native-code-push') line to my android/app/build.gradle file (I'm on RN 0.44.2).\nI've done the following:\n1) react-native init MyProjectName\n2) npm install --save react-native-code-push@latest\n3) react-native link react-native-code-push.\nSo it looks like this dependency should be added at this step.\nCould you please clarify if I'm missing something or your repro steps are different?. @yaronlevi - hi again, please let us know if you still experience the issue.. @yaronlevi\nI believe we can close the issue currently, please reopen or create a new item if you have any issues with this going further.. Hi @farwayer , thank you so much for contribution, your PR looks good for me, I've also tested it one more time and haven't found any issues with this.\n@chirag04 - could you please explain a little bit more your point - what are the benefits here with adding withRef option in such particular case? . Guys - I believe we can merge this changes to Master and we can always enhance this in future if needed. Please feel free to voice your concerns or suggestions if any.. Hi @bicitech, thank you for reaching us.\nSo as you noted in Additional information you have tested it in debug build. I believe this may be the root cause of the issue. \nBy default, the react-native run-android command builds and deploys the debug version of your app, so if you want to test out a release/production build, simply run `react-native run-android --variant release. Refer to the React Native docs for details about how to configure and create release builds for your Android apps.\nAslo there are some more information about it in our docs. \nPlease let us know if it helps you to resolve the issue.\n. @bicitech - just a friendly ping :) Please let us know if you still experience an issue.. @jaggerwang thank you for your reply, if you don't mind I'm closing the issue. Feel free to reach us if any questions. . Hi @bogomazov, thanks for your question.\n1. Released package hash is compared with last package hash with same app version (Package hash is generated as a sorted array of key value pairs (one for each file in the release), of the format  <relativeFilePath>: <SHA256HashOfFileContents> and then stringify this array and hash that to get a single directoryHash). So if you change file contents then new hash will be generated and code push consider this bundle is updated.\n2. Code push update will not be applied unless its target binary version is the same as the AppStore binary version.  You can find some more explanation here.\nPlease let us know if it helps or you have more questions.. Hey @bogomazov, I believe we can close the issue if you have no more questions at this time, please do not hesitate to reach us if any other questions or if you see any issues with code push.. @youngcube - thanks for getting it back, I believe that could be useful for other  people who will have similar problems. \nI'm closing the issue for now.. Hey @ronitpattjoshi. sorry for delay in response. So could you please describe your issue in more details i.e. \na) Explain what you did, what you expected to happen, and what actually happens. Also exact reproduction steps and stack trace will be much appreciated.\nb) If possible try to reproduce your bug on our basic sample: https://github.com/Microsoft/react-native-code-push/tree/master/Examples/CodePushDemoApp. If you can't reproduce the bug on it, provide us as much info as possible about your project, how you initiate code-push, may be you can share with us basic sample.\nAlso additional information like:\n react-native-code-push version\n react-native version\n Android version\n Does this reproduce on a debug build or release build\nwould be also very useful for us.. @rahuljiresal  - thanks for reply. \nSo in general CodePush updates should be tested in modes other than Debug mode. In Debug mode, React Native app always downloads JS bundle generated by packager, so JS bundle downloaded by CodePush does not apply. \nAlso what is the output for code-push deployment history <AppName> <DeploymentName> command? Can you confirm that your target binary version match the bundle binary version your are running? Can you please double check that deployment key points to correct Deployment?\nAnd do I get it right that CodePush in your application is initialized the same way as we do in our example?. @ronitpattjoshi \nSo you see that you have not empty Install Metrics for two versions, correct? Could you paste the output here to make it clear?\nPlease have a look at docs how to specify Target Binary Version. Bundle version could be specified in build gradle file.\nThe deployment key specified in your application should match the deployment key associated with the deployment for which you are producing the updates via code-push CLI.  . @ronitpattjoshi - do you have a chance to look at this? Please let us know if any further questions. . Closing this for now, please feel free to reopen if you still face the issue or have any further questions. . Closing the item since fix for it https://github.com/Microsoft/react-native-code-push/pull/1037 has been merged.. Hey @akki-ng, first of all thank you for your contribution to the project, we appreciate it! \n At that moment I believe we have two PRs with the same purpose (this one and #920). I think we can go ahead with #920  due to the latter includes typings and readme. \nSo I'm going to close this PR, please let me know if you have any concerns about this.. @akki-ng thanks for quick reply. I don't think that you need to sign CLA for #920 as it is already marked as cla-signed. . @akki-ng Yep but I thought that you have already signed it before (please correct me if Im wrong). If you have not signed it previously - could you please do it now. And sorry for confusion about this.. @akki-ng thanks for this. So after you have signed the CLA I believe no more further steps needed (if you have any issues with this please let us know).. @akki-ng I think so as #920 is based on your commit aa6e989 (https://github.com/Microsoft/react-native-code-push/pull/920/commits).. @akki-ng I'm hoping it will be included in the next react-native-code-push release. . @akki-ng sounds good, will try to manage this soon.. @maxkomarychev currently you can update from Master branch and we are going to release new version with this stuff in the nearest time!. @jjdp sure that's a kind of solution but from our point of view that looks a little... hacky?\nI mean here that we should keep step with what react-native do (and BTW that is what react-native officially suggest to do: https://github.com/facebook/react-native/commit/ce6fb337a146e6f261f2afb564aa19363774a7a8) \n\nTo upgrade, remove all overrides of createJSModules and keeping calling your JS modules as before\n\nThat way we have released new update with incremented major version which means that other users (who use RN < 0.47) should not be affected. \nMore than that - that new release (5.0.0) do nothing but only add compatibility with latest react-native. So you should not worry about this release at all if you are on RN < 47 and there should be no issues with this release if you upgrade to RN47 and higher later. \n. Hey @bigsassy, thanks to pointing at this, I've updated docs to point to correct link (probably was broken when we split docs to several parts). . I'll close the issue for now as PR has been merged. . @bigsassy so we are not saying that it is totally prohibited, we just wanted to aware that  it is against Apple's policy for an app to display an update prompt (so the app may be blocked by AppleStore somehow because of that). \nSo we could only recommend  not to use it, but the final decision is always up to you.. Hey @D1no, thanks for reaching us. \nSo if I correctly get your point the issue is that you have to run code-push release-react ios-app ios twice and this causes two separate react-native bundle calls which produce the same output?\nSo this way is it possible for you to use general release command? This will allow you to avoid calling react-native bundle each time, you just need to create a bundle once before and then you need to specify the location of the updated app code and assets you want to release. Please let us know if this can work for you?. Hey @rj12info, thank you for sharing this. Is it possible for you track code-push.getCurrentPackage output for us as it is described here? This would really help us a lot in investigating the issue.. Hi all, we just released hotfix both for v2.1.x and 3.0.x. Please let us know if you see any issues.. Hey @bgoyal2222, I just have tried to reproduce your issue with react-native 0.43.4 and react-native-code-push 2.1.0-beta following your steps but with no luck. (android 7 real device)\nDid you happen to reproduce this issue constantly with the steps you have provided? \nHave you tried to release another version to see if it works?\nAt what time did you see the crash, what CodePush InstallMode do you use?\nAlso just a guess but probably your issue could be somehow related to #910, so maybe it make sense to update to 2.1.1-beta to see if it helps. . @bgoyal2222 unfortunately I believe that you should update code push dependency to 2.1.1-beta to fix this issue because the problem is with code-push itself, so seems that the only way is to release new version of your app. Sorry for inconvenience. \n. I'm closing the issue for now, please let us know if you have more questions. . Hey @harsinyee, did you have a chance to look if links from above can help?. Thanks for the update @harsinyee, closing the issue for now. Feel free to contact to us if any help is needed.. Hi there @MarcusHurney, thank you for your question. \nSo the main limitation of a Create React Native App project is that it must be written in pure JavaScript and not have any dependencies which rely on custom native code (i.e. ones which require running react-native link to work). \nThat is the reason why you were unable to run \"react-native link react-native-code-push\" command.\nAs a solution of integrating code-push to your app you can always \"eject\" to your own build setup if you need to write custom native code or modify how your app is built. \nFor this you should run npm run eject from your project working directory. \nPlease refer to the documentation first and remember that running eject is a permanent action.\nAfter that you should be able to continue integration of code-push plugin with react-native link react-native-code-push. \nPlease let us know if it helps.. @MarcusHurney I'm going to close the issue for now, please reopen it if needed or let us know if you have any questions. . Hello @youngcube, thanks for sharing this. Could you please have a look at #919 regarding usage of SDK version 25.. @youngcube can you please have a look at this comment and verify if dynamically changing compileSdkVersion and buildToolsVersion for your subprojects could help in your case. . @youngcube got it and thanks! Please let us know the results when ready.. @youngcube understood, that's ok, thanks for the update. Anyway hope info from this thread could be useful if someone else face similar issues in future.. Hi there @tapz, thanks for your question. We have discussed this issue previously so could you please take a look at the following links:\nupdate android SDK to version 25 and android SDK version mismatch\nThe latter states that the current react-native supports android API up to level  23, the react-native-code-push repo will sync with their upgrade. \nSo I believe we should keep build tools version in sync with react native to avoid SDK verison mismatch.\nPlease let us know if you have any questions or considerations regarding this.. @tapz - hi again. In accordance with the info from above I'm going to close this issue for now. Let us know if any concerns or have questions regarding this.. LGTM. @sergey-akhalkov - if you could also have a look at this and don't have any concerns I'm ok with merging this.. @newyankeecodeshop good catch and thanks for contribution! Merging this.. @cooperka - thank you, looks good for me and we appreciate your help with this!\nThis PR would be merged once RN released new version containing referenced changes.. @cooperka seems that latest RN48 introduced this changes so we can merge this PR going further. Thanks for taking care of it @cooperka . Thanks, merging this!. @AndrewJack Great stuff and thanks for taking care of this. Looks good to me. \ncc @sergey-akhalkov to also have a look at this before merging. Hi @ashrithks. Aside from Rollout parameter I think it make sense to use different deployments this way, so you can test e.g. Staging deployment for specific uses and later (after you have verified that this update is ok) you can promote this release to all the rest ones.  \nPlease let us know if you have any questions.. Closing this for now, feel free to reach us if any further questions. . Hello @kelset, thank you for your question.\nSo while there is actually no strict rule and 100% guarantee that the app will be banned this way users should be aware of the following statement (taken from AppStore Review Guidance):\n\nApps must not force users to rate the app, review the app, download other apps, or other similar actions in order to access functionality, content, or use of the app.\n\nThat's the thing that should be taken into account while using the update dialog with iOS. . @kelset gotcha, if you could create a PR to improve the existing documentation that would be much appreciated. . Hi @blairvanderhoof, so I think that when you archive the app for appStore release it should regenerate a new bundle. Anyway I don't see how the question is related to code-push. Is it possible that code push update was applied accidentally and thus override your latest changes?\nActually you can do the following to verify if the new bundle is generated on release:\n1) Remove code-push  from the app (just to be sure that no updates can be applied accidentally)\n2) Close all packagers before building  for archive\n3) Archive your app to the app store release, verify the output\nPlease let us know the results.. @pankaj-ag please let us know if the comment from above help you to resolve your issue. Hi there @iamhardik08 , that looks like your version of RN is not compatible with RNCP.\nYou should use RNCP v3.0.0+ this way.\nPlease checkout our compatibility table: https://github.com/Microsoft/react-native-code-push#supported-react-native-platforms. Hi @danielbm thanks for your question. \nSo I have tried your case but I could successfully update my app. Here are my repro steps:\n1) Create new rn app with rninit init RNISSUE939 --source react-native@0.45.1\n2) cd RNISSUE939\n3) Add code-push plugin with npm install --save react-native-code-push@3.0.1-beta\n4) Link plugin with react-native link react-native-code-push\n5) Add my android Deployment key while linking\n6) Code-pushify my index.android.js as follows:\n```\nimport React, { Component } from 'react';\nimport {\n  AppRegistry,\n  StyleSheet,\n  Text,\n  View\n} from 'react-native';\nimport codePush from \"react-native-code-push\";\nexport default class RNISSUE939 extends Component {\n  render() {\n    return (\n      \n\n          Welcome to React Native!\n        \n\n          To get started, edit index.android.js\n        \n\n          Double tap R on your keyboard to reload,{'\\n'}\n          Shake or press menu button for dev menu\n        \n\n    );\n  }\n}\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#F5FCFF',\n  },\n  welcome: {\n    fontSize: 20,\n    textAlign: 'center',\n    margin: 10,\n  },\n  instructions: {\n    textAlign: 'center',\n    color: '#333333',\n    marginBottom: 5,\n  },\n});\nRNISSUE939 = codePush(RNISSUE939);\nAppRegistry.registerComponent('RNISSUE939', () => RNISSUE939);\n``\n7) Deploy the app to the device \n8) Verify it was running successfully\n9) Release code-push update, restart the app to force it to check/dl update, restart it again to apply update\n10) Verify update was applied\n11) Double check that updates were reported successfully to service withcode-push deployment history test-r-android Staging` command\n12) Verified the output:\n\nPlease let us know if you have another steps to reproduce it or if we are missing something.\n. Hi again @danielbm, just a friendly ping on this ;). Sure thing @danielbm, let us know if you need any help with this!. Hi there @BalaKrishnaJ27, please take a look at https://github.com/Microsoft/code-push/tree/master/cli#patching-update-metadata command and let us know if it is something you are looking for.. I believe we can close the issue now, please feel free to reach us if any questions.. Hi @wjm117 thank you for your question.\nIs it possible that your update was rolled back while applying?\nCould you share with us the output of deployment history command for your application? \nAlso can you verify if you see this issue with our basic sample app or maybe you can share with us the minimum example where we can see that issue? . @wjm117 just a friendly ping on this. @wjm117 - thanks for the update!. @pre10der89, @rozele - hey guys, could you please take a look at this and let us know if the issue is still actual with the latest release of RN Windows 0.50+ or not?. Hey guys, I believe we can close the issue as https://github.com/Microsoft/react-native-code-push/releases/tag/v5.2.0-beta has been released with #1051. Please let us know if any concerns.. @esutton also please take a look at this @panarasi  blog post http://blog.nparashuram.com/2017/09/ab-testing-for-react-native-apps-with.html that might be interesting for you!. @esutton AFAIK at that moment only County level information is supported. Please checkout https://docs.microsoft.com/en-us/mobile-center/analytics/overview ->Country/Region and Languages section for more information.. Closing this item as a duplicate of #954 as the latter has at least some additional information . Hi @gHashTag, that probably could be related to the way you are informing users about your updates - that is update dialog. Could you please  remove it, try again and let us know the results.\nAlso please take a look at the following information regarding AppStore rejections: https://github.com/Microsoft/react-native-code-push#store-guideline-compliance. Hello @anttitakalahti and thanks for submitting PR. \nWe've already investigated for this possibility and at that moment we've decided to keep build tools version in sync with react native to avoid SDK version mismatch. \nYou can find more information and discussion about this below:\nhttps://github.com/Microsoft/react-native-code-push/issues/919\nhttps://github.com/Microsoft/react-native-code-push/pull/725\nhttps://github.com/Microsoft/react-native-code-push/issues/733\nhttps://github.com/Microsoft/react-native-code-push/issues/929. I'm closing this PR for now, please voice your concerns if any.. @oliviachang29  please let us know if you have a chance to look at this.. @oliviachang29, np, that's ok. For that moment I'll close the issue, please reopen it if needed when you get a chance to verify.. Hi there @foggy1, seems that your config for installing ON_NEXT_SUSPEND is ok, but as far as I can see ON_NEXT_SUSPEND feature was introduced in react-native-code-push v2.0.3-beta. Could you please confirm that you are using correct version of the plugin?\nAlso could you please provide us what platform you are on? Is it iOS or Android (and what version)?. Thanks @foggy1, please let us know the results!. Hey @foggy1, just a friendly ping on this :). Glad to hear that and thanks for quick response!. Hello @awnali, seems that there is no issues with your code however I've found the following:\nI was able to reproduce the issue (that looks very similar to the situation you have described) with the following repro steps:\n1) Create new app with new deployment key and with provided RN and code-push plugin versions\n2) Build app in Debug mode\n3) Produces several updates in debug mode, verify it is working great\n4) Change scheme to Release mode and build the app again with xCode (do not change anything on js side!)\n5) Produce new update and verify it is not working\nSo to verify if this assumption is true could you please do the following: clear deployment history for your deployment (code-push deployment clear AppName DeploymentName), install Release app once again and produce new releases to verify if it works. \nIt seems that this issue could be related to the situation when packageHash's are the same for newly installed app when switching between different schemes and plugin failed to determine if this is the 1st update or it is a diff update. That is why we recommend to use different deployment keys for different schemes.\nBTW you could also increment the app version when switching between release modes to overcome this issue.\nPlease let us know if the info from above helps.. hi @xiaoyongchen and thanks for the question. Could you please be a little bit more descriptive about the symptoms of the problem and provide us the following information to make it easier for us to determine the root cause of the issue:\n1) Explain step by step what you did, what you expected to happen, and what actually happens. \n2) Could you try to reproduce the issue with our Sample app (with the code your have shared with us?) Or the issue is only reproducible on your app?\n3) In the closed duplicated item #934 it looks like the issue was related to iOS platform. Can you confirm that the issue is relevant to both platforms?\n4) Can you explain what do you mean by \"only one crash\"? Does it mean that have seen that issue only once or the issue has stable reproduction steps?. @xiaoyongchen understood and thanks. I've tried it on my side with RN 0.46.4 and RNCP 4.1.0-beta and and seems that it is working great. \nSo probably that it could be an issue with upgrading to newer version of react-native.\nCould you please try to do the following:\n1) Completely remove react-native-code-push plugin\n2) Close the terminal with packager, open a new one, run npm cache clean before you run your project\n2) Launch the app without plugin to verify that the issue is not related to it\n3) Add the plugin again from the scratch\nPlease let us know if it helps.. @xiaoyongchen - hi, do you have a chance to look at this?. @xiaoyongchen - hi again. Is it possible for you to share with us the minimum app (link on github or probably a zip archive) so we can debug locally to get out what the issue is? \nAs far as I can see at that moment there is something wrong with how you integrate code push but without the sample app it is really not easy to say what you are doing wrong.. @xiaoyongchen thanks, replied you via email.. Hi @xiaoyongchen.\nCould you please try to compose your messages in one post so it would be easier to collaborate with this in future.\nAs for your issue, once again - I don't see any problems and how it is related with code-push there.\nMore than that I was able to run your project with release configuration (on Android real deive) without any issues (and also restart it several times successfully).\nI've done the following:\n1) Remove node_modulesfolder and package-lock.json file from the project\n2) Remove everything from android/app/build folder\n3) Run npm install\n4) Execute react-native run-android and run your app successfully \n5) Also run your app with release build and was able to run the app successfully.\nAnyway I don't see any issues here with code-push, if you see any problems with code-push could you try to be more specific about the symptoms and try to replicate them with fresh new app with the react-native and code-push version where you experience the issue. \nOtherwise I don't see any relevance here within our plugin.\nPlease let us know if any questions or considerations.\n. @xiaoyongchen \nHmm just have tried to kill the app on the device and reopen it again several times and didn't see any issues.\nAnyway it looks like the issue described at the beginning of the thread is not reproduced anymore so I think this item could be closed as it is not a good practice to discuss and fix several items in one single thread. \nIf you can see other problems that are indeed related to code-push I believe it make sense to create another issue and provide us with all the info that is described in our new Issue Template. Also it would be great if you could verify if you can see the issue with our Sample App.\n. @sospedra that looks like something that require additional investigation. \nCould you try to be more descriptive about how to reproduce this issue e.g. by doing a) ... b) ... c) ... steps so we could replicate the issue on our side and see what's going wrong here?\nAlso if you could reproduce this case (by integrading code-push like you do in your real app) with rninit init NewApp it would be very helpful. . Hello @jaysig and thanks for reaching us.\nUnfortunately react-native 0.44 is not compatible with react-native code-push plugin 5.0.0-beta due to some breaking changes in the react-native. \nPlease checkout our compatibility table to see which versions of react-native and react-native-code-push are compatible.  \nIn your case you can fix the issue in two different ways:\n1) Upgrade react-native from 0.44 to 0.47 \n2) Downgrade react-native-code-push to v2.0.+ \nPlease let us know if this helps.. Hi @HannanShaik, please note that this method is considered deprecated as of v1.10.3-beta of the CodePush module.\nCould you please try running getUpdateMetadata  method instead with codePush.UpdateState.PENDING updateState parameter.\nTo get currently installed update you can run this method with codePush.UpdateState.RUNNING parameter but note that it can return null in case the end-user hasn't installed any CodePush updates yet or app isn't currently running a CodePush update.\nPlease let us know if any questions.. Yep, you'll get null if you have fresh install, also I think may be it would be better to call checkForUpdate method in your case to see if update is available and if it should be downloaded for specific user (and it will depend upon remotePackage instance that can be returned by this method).. @mdanics - hi. \nSo as it is stated in the linked reference - currently we have diffing mechanism that will send only those files that were changed. \nWhat is the purpose of ignoring some files unless native update?. @mdanics, just a friendly ping on this . @mdanics \nIn case there are several apps code-push is unable to determine the relevance between all of them even if their code would be almost the same, so I don't think it would be possible to do a single code-push to all of them. And also code-push need original update source to calculate the diff, otherwise it is impossible to to this job. \nSo I don't see how this improvement can help in this situation.. I believe we can close this issue at that moment as we do not have plans to implement this currently and also do not get frequent user's request regarding this. \nWe can always revisit this later if needed.. @tmaly1980 - hi, please let us know if you have a chance to look at this!. Closing the item for now, please feel free to reopen or ask additional questions when if any.. Hi @jaysig \nI've tried to reproduce your issue with the following steps:\n1) rninit init AppName react-native@0.44.3\n2) cd AppName\n3) npm install --save react-native-code-push@2.1.1-beta\n4) react-native link react-native-code-push\n5) open project in xCode (mine version is 8.3.3) and verify it is building without any errors \n6) go to Product->Archive and was able to archive it without errors\nPlease let us know if your steps differ. . Thanks for the update @jaysig!. Hello @andrerfneves, that's a good question. So it looks like that approach should work.\nI've tried a quick demo on iOS with react-native-sound and it works great for me (meaning that I was able to update mp3 files with code push release).\nI've used similar approach as with Images and call require for loading asset (also created  \"audio\" folder in the root of the app).\nHere is my constructor init code:\nvar mySound = new Sound(require(\u2018./audio/a3734.mp3\u2019), \u2018\u2019, (error) => {\nSo to answer your question - yes, assets will be coupled within your application bundle if you reference them via require.. @andrerfneves I believe I can close the issue at that moment if you do not have any further questions, please feel free to reopen/ask additional questions if needed.. @grigored - hi, so yes, the bundle is always sent as a zip archive so its size should be smaller. \nRegarding the rest questions:\na) If you do native changes and upload new app to AppStore you should always increment app version and this way your previous updates would not be applied. This really make sense and also when you do native changes you always update js/css/assets part accordingly, so no need for users to apply code push updates\nb) It make sense to use ON_NEXT_RESUME mode to install updates silently, also please take a look at our new feature for installing updates - ON_NEXT_SUSPEND - this can bring a great user experience to your app. \nThe only notice here is to avoid using update dialog, you can see more details about why you should not use it in your code push updates here.\nPlease feel free to ask if you have more questions.. @grigored I'm closing your questions for now, please let us know if you have more questions or need clarifications regarding this.. Closing this issue as the fix is deployed to prod. Hello @wuyunqiang,\nYou should use appendReleaseDescription option to enable this.\nPlease have a look at this from CodePushOptions->UpdateDialog section details from our documentation.\nPlease let me know if it helps.. Hi @sospedra and thanks for asking.\nJust to clarify:\n1) Your app worked perfectly with code-push before (so this means that code-push is initialized correctly)\n2) You have updated Facebook SDK, increment the app version to 6.2, released this to AppStore\n3) After that you have released new code-push update without any issues\n4) Code-push is unable to detect new updates now when running in release-mode on device?\nBTW you know that in general you should not test code-push updates in debug mode (or probably some kind of tweaks needed to force react-native bundle js/assets explicitly). \nHave you tried it in release mode? Do you still see this behavior?\nAlso can you verify what is the code-push status of the update  using syncStatusChangeCallback callback?\nIs SyncStatus equal to  UpToDate value or is it different?. @sospedra - just a friendly ping on this.. @sospedra - thanks for update!\nSo it looks like you should run react-native run-ios --configuration Release as it is described in docs here.\nCan you please provide us with the output of the code-push deployment history <appName> <deploymentName> command for your app and also what is the CFBundleShortVersionString value for your app in info.plist file?. @sospedra \nWell, that looks weird. You know that without any debug output from your side its really hard to say whats going wrong here (especially taken into account that it is working in simulator). As I can see at that moment that we do not get any complaints yet of such kind, so seems that your app is the only one.\nThings that can probably help:\n1) Why don't you release one more code-push update and see if it doesn't work also? (as I can see from  deployment history you have tried only once)\n2) If it doesn't help is it possible to bump AppVersion to see if the problem constantly occurs with different target binary versions?\n3) Probably you can try to reinstall code-push plugin from the scratch (rm -rf node_modules && npm i) \n3) If it is possible you can try to update react-native and react-native-code-push plugin to the latest versions and verify if it helps\nIn general we require additional information from your side to identify whats going wrong (as we assume that code-push init logic is good so far we need some kind of logging here to see what requests code-push sends to the service).\nIf you were able to reproduce it in Release mode on your side than probably you could add some output logging and provide us with it. \nThe main point of interest for us here at that moment is what is the result of theupdate variable in this method:\nconst update = await sdk.queryUpdateWithCurrentPackage(queryPackage)\n and what is the value of queryPackage variable. \nI'm looking forward for your reply to get out what is the reason of the issue.. I've also looked for service logs related to your requests and saw that it didn't  return any relevant update data. So is it possible for you to release new code-push update for your app and see the result?\nSo my guess here - is it possible that your currently running binary version package hash is identical to the released code-push update package hash? Thus service states that there is no updates available at that moment. To verify this assumption we should release new code-push update with modified hash.. Hey @sospedra, do you have a chance to look at the information from above?. @sospedra - thanks for quick turnaround. Looking forward for the results :). @sospedra - hi! No pressure from our side but if you get a chance to look at this - please let us know.. Hi there @Kariko and thank you for your question. \nAt that moment could you please provide us what version of react-native and reac-native-code-push plugin you are on? . @Kariko - got it and thanks!\nUnfortunately RN 0.46.0 is not compatible with RNCP 5.0.0 and higher due to breaking changes introduced in latest react-native releases.\nYou should use RNCP ^4.0.0 this way. Please checkout our compatibility table here  and let us know if it helps.. Hi @joshuapinter,\nSo I'm seeing that you are using not the recommended way of integration CodePush within your app (well I mean here that not the way we suppose to use it in our docs:)  ).\nThat probably could be an issue. Can you try to move away getJSBundleFile method from ReactNative class to MainApplication.java class. Also can you please take a look at the example with similar integration logic that promise to work well: https://github.com/youngcube/AwesomeProject/blob/master/android/app/src/main/java/com/awesomeproject/MainActivity.java\nIf it doesn't help could you please try to repoduce your issue within this sample so we could also try to build it on our side and see if it works?\nPlease let us know if it helps.. @joshuapinter - hi again.\nSo regarding your questions: \ngetJSBundleFile method lives as a method for react-native ReactNativeHost  class, so in the example I've provided above it is overriding exactly ReactNativeHost  class instance, which in turns is the member of ReactApplication interface, implemented by MainApplicationclass. \nProbably you should implement this interface in your application file and do all this stuff in order to make it work.\nAlso when using onCreate(Bundle savedInstanceState) method you build the instance of ReactInstanceManager here (see example provided), so jsBundleFile is injected here by calling overriden getJsBundleFile method.\nPlease let us know what you found out and if it helps.. @joshuapinter yep, that looks the right way. The same as in the example from my first post. \nLet us know if it works.. Hey @joshuapinter, do you have any updates on this?. @lucianomlima \nI believe that \n\nReact Native: 0.45.1\nReact Native Code Push: 5.0.0-beta\n\nare not compatible for android at all. Please use RNCP v3.0+ in this case. Checkout our Compatibility Table for reference.. @lucianomlima  glad to hear that it is working now for andoird :) \nAs for iOS - I suppose it should also work well. The error you have provided looks like an issue with changing react-native versions, not a code-push issue.\nPlease also take a look at this issue in react-native repo first that probably could be related to your case.. Thanks for update @lucianomlima , I'm happy that it is working now.\nBTW just for reference for @joshuapinter - you are also extending MultiDexApplication and it is working well, am I correct? . Hey @joshuapinter \nFrankly that is an example I've taken from a user who reported the similar issue, not created by me.\nWell I think that it is some kind of copy-paste issue and I'm pretty sure that you don't need both of it :)\nI think only the latter is needed in your case. That make sense, while I'm not sure if this repository is actively watching by the maintainer it would be good to have it anyway.. @lucianomlima - thanks for answering. I believe @joshuapinter is asking mostly about how you've integrated codepush within your app. Is your configuration logic looks alike that was provided in sample app from the above? In other words can you share steps that you have performed in your app (which extends MultiDexApplication) to add code-push? We appreciate your help here with this.. Hey @joshuapinter, so just to reiterate:\n1) You have configured your Application class as follows:\n```\npublic class YourApplication extends MultiDexApplication implements ReactApplication {\nprivate final ReactNativeHost mReactNativeHost = new ReactNativeHost(this) {\n    @Override\n    protected String getJSBundleFile() {\n        return CodePush.getJSBundleFile();\n    }\n    @Override\n    protected boolean getUseDeveloperSupport() {\n        return BuildConfig.DEBUG;\n    }\n\n    @Override\n    protected List<ReactPackage> getPackages() {\n        List<ReactPackage> packages = new ArrayList<>();\n        packages.add(new MainReactPackage());\n        packages.add(new CodePush(BuildConfig.CODEPUSH_KEY, getApplicationContext(), BuildConfig.DEBUG));\n        return packages;\n    }\n};\n\n@Override\npublic ReactNativeHost getReactNativeHost() {\n    return mReactNativeHost;\n}\n\n@Override\n  public void onCreate() {\n  super.onCreate();\n  SoLoader.init(this, /* native exopackage */ false);\n\n}\n}\n```\n\n\nYou have removed getJSBundleFile  and anything else code-push related from your public class ReactNative extends Activity implements DefaultHardwareBackBtnHandler, ReactApplication { class \n\n\nTry to run the app \n\n\nIf the issue still persist and you would like, you can email me directly at v-maximi AT microsoft.com , so that I can try your build and run it on my own (because it is not easy to say what's wrong here without seeing what you have done exactly).. Thanks for getting it back @joshuapinter! I'm also all for adding this information to our docs, hope we'll have a chance to manage it soon.. Hi @zheng-liu-seattle and thanks for reporting!\nThat doesn't look like an issue for me because I don't see anywhere in docs that we should ignore updates that were declined by user through update dialog.\nWe indeed have logic to ignore failed updates and that make sense not to install failed update twice.\nFor Update Dialog we simply report UPDATE_IGNOREDstatus and that's it. \nI believe that we should not preserve the state of update being ignored as some users might really need that to be asked every time (but in fact we do not advise to use UpdateDialog at all because of that note).\nIf you have any other thoughts we are all ears though!. Hello @agersoncgps and thanks for asking.\nCould you please share the code how you have integrated code-push?\nDid you use sync method for this?. @agersoncgps thanks for update, I've tried your code with android and didn't see such warnings, probably that warnings are ios specific.\nHowever I've found similar issue to yours, please take a look at this comment and let us know if it helps.. @agersoncgps - I'm closing the issue for now as I believe the question was already answered in the issue linked above, please let us know if any questions or have any concerns. . Hello @wjm117,\nI believe that you should not do step 2 at all:\n\nI add our app to my account like this:code-push app add \n\nIn case you are a collaborator of the app you have shared access to it, so you should use you shared app (to which you was added as a collaborator with code-push collaborator add <appName> <collaboratorEmail> command) and do not create a new app this way.\nPlease let us know if any troubles or if you have more questions. . I believe we could close the issue at that moment, probably a service blip. \nPlease let us know if you see something suspicious. . Hey @harshithpawar94, I'm sorry but I don't understand completely what is the question based on the info you have provided. Could you please create new issue and include only the relevant information in the body of the issue, also please provide us with valid repro steps and clear actual/expected information. Thanks in advance!. Hello @kesiena115, I've tried to follow your approach and was unable to reproduce the issue.\nLet's go over the steps again:\n1) I've created new rn app rninit init issue987 react-native@0.47.1\n2) Moved to the app's directory cd issue987\n3) I've installed RNCP npm install --save react-native-code-push@5.0.0-beta\n4) I've created new app with Staging and Production deployments code-push app add issue987_android android react-native\n5) I've linked libraries as follows: react-native link react-native-code-push\n6) I've generated signing key as it is described here\n7) I've added signing config to the app build.gradle as it is described here \n8) Verified that mine MainApplication.java init code is the same as yours\n9) Configured code-push in index.android.js file as follows: \n\nindex.android.js (Click to expand)\n\n```\nimport React, { Component } from 'react';\nimport {\n  AppRegistry,\n  StyleSheet,\n  Text,\n  TouchableOpacity,\n  View\n} from 'react-native';\n\nimport CodePush from \"react-native-code-push\";\n\nexport default class issue987 extends Component {\n\n  constructor() {\n    super();\n    this.state = { restartAllowed: true };\n  }\n\n  codePushStatusDidChange(syncStatus) {\n    switch(syncStatus) {\n      case CodePush.SyncStatus.CHECKING_FOR_UPDATE:\n        this.setState({ syncMessage: \"Checking for update.\" });\n        break;\n      case CodePush.SyncStatus.DOWNLOADING_PACKAGE:\n        this.setState({ syncMessage: \"Downloading package.\" });\n        break;\n      case CodePush.SyncStatus.AWAITING_USER_ACTION:\n        this.setState({ syncMessage: \"Awaiting user action.\" });\n        break;\n      case CodePush.SyncStatus.INSTALLING_UPDATE:\n        this.setState({ syncMessage: \"Installing update.\" });\n        break;\n      case CodePush.SyncStatus.UP_TO_DATE:\n        this.setState({ syncMessage: \"App up to date.\", progress: false });\n        break;\n      case CodePush.SyncStatus.UPDATE_IGNORED:\n        this.setState({ syncMessage: \"Update cancelled by user.\", progress: false });\n        break;\n      case CodePush.SyncStatus.UPDATE_INSTALLED:\n        this.setState({ syncMessage: \"Update installed and will be applied on restart.\", progress: false });\n        break;\n      case CodePush.SyncStatus.UNKNOWN_ERROR:\n        this.setState({ syncMessage: \"An unknown error occurred.\", progress: false });\n        break;\n    }\n  }\n\n  /** Update is downloaded silently, and applied on restart (recommended) */\n  sync() {\n    CodePush.sync(\n      {},\n      this.codePushStatusDidChange.bind(this),\n      null\n    );\n  }\n\n  render() {\n    return (\n      \n\n          Welcome to React Native!\n        \n\nPress for background sync\n\n\n          To get started, edit index.android.js\n        \n\n          Double tap R on your keyboard to reload,{'\\n'}\n          Shake or press menu button for dev menu 222\n        \n{this.state.syncMessage || \"\"}\n\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#F5FCFF',\n  },\n  welcome: {\n    fontSize: 20,\n    textAlign: 'center',\n    margin: 10,\n  },\n  instructions: {\n    textAlign: 'center',\n    color: '#333333',\n    marginBottom: 5,\n  },\n});\n\nlet codePushOptions = { checkFrequency: CodePush.CheckFrequency.MANUAL };\nissue987 = CodePush(codePushOptions)(issue987);\n\nAppRegistry.registerComponent('issue987', () => issue987);\n\n```\n\n\n10) Verified the app is running well with react-native run-android --variant=release\n11) Produced new code push release for Production deployment with the following command:\ncode-push release-react issue987_android android --deploymentName Production\nNOTE that we should explicitly provide deployment name here \n12) Press sync button on my app, verified update is installed\nCould you please take a look at this and let me know if your steps are different and you still see an issue.\n. Hey @kesiena115, that's great that you were able to update your app successfully. \nRegarding your questions:\n1) In the end it's up to you to decide whether you should use silent updates or specifically prompt user if s/he would like to update the app. \nJust beware of Store Guideline Compliance when using update dialog with immediate updates for this.\nFrom my point of view silent updates using ON_NEXT_RESUME or ON_NEXT_SUSPEND should fit the best for most of the customers. \n2) In general - yes, you can just simply replace the key before uploading the app to AppStrore and that's it. Also you could use MultiDeployment workflow to define custom config settings for each type of the build (that is what was done in your sample). This way correct deployment key would be applied based on build type.\nPlease let me know if you have more questions. . @kesiena115 - I'm going to close the issue as it seems to be resolved, please feel free to reach us in case of any troubles with code-push.. Hey @claykohut, thanks for notifying, I believe that this issue is related to https://github.com/Microsoft/code-push/issues/511. If you don't mind we'll close this issue because it relates more to code-push service rather then SDK's, so it would be easier to have all discussion in one place.. Relates to https://github.com/Microsoft/react-native-code-push/issues/986 issue.\n@kumark86 - do you have any stable conditions where we can replicate it? Can you share a quick sample app so we can reproduce it locally?. @kumark86 do you have any updates regarding this? Are you able to reproduce it constantly? . @sood03 thanks, got it! I'll try to reproduce your issue with configuration you have provided on demo app and let you know the results. BTW what is the android version you are testing? Is it android 7? Do you have any other aspects in your application that I could probably miss?. @sood03 np, you should use `` instead of to keep tabs.\nAs for your issue - I've tried to reproduce it with RN45.1 and RNCP3.0.0 but with no luck.\nI've attached archive with my demo (you'll need to npm i and change code-push deployment key), so you can try it locally to see if you will be able to reproduce the issue somehow. \nPlease let us know if you can find anything.\nAndroidCrash.zip\n. @sood03 sorry to bother you but did you have a chance to try to reproduce your case with the demo app I've provided?. @sood03 thanks for reply, please let us know if you could find anything.. @AndrewJack thanks for reply, what do you mean by \n\nupdating the same thing that is being destroyed.\n\nI've tried immediate update and remove visible element from the app but seems ok. Do you have more precise scenario we can try to test to see if we have an issue?. Hello @sood03, thanks for reply.\nSo do I get it right the issue is fixed at that moment for you?\nBTW I've also tried to replicate your case but with no luck, my demo.js is the following:\n\nClick to expand\n```\nimport React, { Component } from \"react\";\nimport {\n  AppRegistry,\n  Dimensions,\n  Image,\n  StyleSheet,\n  Text,\n  Container,\n  Content,\n  TouchableOpacity,\n  View,\n} from \"react-native\";\nimport CodePush from \"react-native-code-push\";\nimport Modal from 'react-native-modalbox';\nclass AndroidCrash extends Component {\n  constructor() {\n    super();\n    this.state = { restartAllowed: true };\n  }\ncodePushStatusDidChange(syncStatus) {\n    switch(syncStatus) {\n      case CodePush.SyncStatus.CHECKING_FOR_UPDATE:\n        this.setState({ syncMessage: \"Checking for update.\" });\n        break;\n      case CodePush.SyncStatus.DOWNLOADING_PACKAGE:\n        this.setState({ showDownloadingModal: true });\n        this.setState({ syncMessage: \"Downloading package.\" });\n        this._modal.open();\n        break;\n      case CodePush.SyncStatus.AWAITING_USER_ACTION:\n        this.setState({ syncMessage: \"Awaiting user action.\" });\n        break;\n      case CodePush.SyncStatus.INSTALLING_UPDATE:\n        this.setState({ syncMessage: \"Installing update.\" });\n        break;\n      case CodePush.SyncStatus.UP_TO_DATE:\n        this.setState({ syncMessage: \"App up to date.\", progress: false });\n        break;\n      case CodePush.SyncStatus.UPDATE_IGNORED:\n        this.setState({ syncMessage: \"Update cancelled by user.\", progress: false });\n        break;\n      case CodePush.SyncStatus.UPDATE_INSTALLED:\n        this._modal.close();\n        this.setState({ showDownloadingModal: false });\n        this.setState({ syncMessage: \"Update installed and will be applied on restart.\", progress: false });\n        break;\n      case CodePush.SyncStatus.UNKNOWN_ERROR:\n        this.setState({ syncMessage: \"An unknown error occurred.\", progress: false });\n        break;\n    }\n  }\ncodePushDownloadDidProgress(progress) {\n    this.setState({ progress });\n  }\ntoggleAllowRestart() {\n    this.state.restartAllowed\n      ? CodePush.disallowRestart()\n      : CodePush.allowRestart();\nthis.setState({ restartAllowed: !this.state.restartAllowed });\n\n}\ngetUpdateMetadata() {\n    CodePush.getUpdateMetadata(CodePush.UpdateState.RUNNING)\n      .then((metadata: LocalPackage) => {\n        this.setState({ syncMessage: metadata ? JSON.stringify(metadata) : \"Running binary version\", progress: false });\n      }, (error: any) => {\n        this.setState({ syncMessage: \"Error: \" + error, progress: false });\n      });\n  }\n/* Update is downloaded silently, and applied on restart (recommended) /\n  sync() {\n    CodePush.sync(\n      {},\n      this.codePushStatusDidChange.bind(this),\n      this.codePushDownloadDidProgress.bind(this)\n    );\n  }\n/* Update pops a confirmation dialog, and then immediately reboots the app /\n  syncImmediate() {\n    CodePush.sync(\n      { installMode: CodePush.InstallMode.IMMEDIATE, updateDialog: true },\n      this.codePushStatusDidChange.bind(this),\n      this.codePushDownloadDidProgress.bind(this)\n    );\n  }\nbtnPressed(){\n    this.setState({ syncMessage: \"Btn pressed: \"});\n    this._modal.open();\n  }\nrender() {\n    let progressView;\nif (this.state.progress) {\n  progressView = (\n    <Text style={styles.messages}>{this.state.progress.receivedBytes} of {this.state.progress.totalBytes} bytes received</Text>\n  );\n}\n\nreturn (\n\n    <View style={styles.container}>\n         <Modal\n            ref={c => {\n                    this._modal = c;\n                }}\n          >\n            <View>\n                <Text>Hi Modal downloading update</Text>\n            </View>\n        </Modal>\n\n\n      <Text style={styles.welcome}>\n        Welcome to CodePush! 111\n      </Text>\n\n    <TouchableOpacity onPress={this.syncImmediate.bind(this)}>\n        <Text style={styles.syncButton}>Press for dialog-driven sync</Text>\n      </TouchableOpacity>\n\n   <TouchableOpacity onPress={this.btnPressed.bind(this)}>\n      <Text style={styles.syncButton}>Newly added button</Text>\n    </TouchableOpacity>\n    </View>\n\n);\n\n}\n}\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    backgroundColor: \"#F5FCFF\",\n    paddingTop: 50\n  },\n  image: {\n    margin: 30,\n    width: Dimensions.get(\"window\").width - 100,\n    height: 365 * (Dimensions.get(\"window\").width - 100) / 651,\n  },\n  messages: {\n    marginTop: 30,\n    textAlign: \"center\",\n  },\n  restartToggleButton: {\n    color: \"blue\",\n    fontSize: 17\n  },\n  syncButton: {\n    color: \"green\",\n    fontSize: 17\n  },\n  welcome: {\n    fontSize: 20,\n    textAlign: \"center\",\n    margin: 20\n  },\n});\n/*\n * Configured with a MANUAL check frequency for easy testing. For production apps, it is recommended to configure a\n * different check frequency, such as ON_APP_START, for a 'hands-off' approach where CodePush.sync() does not\n * need to be explicitly called. All options of CodePush.sync() are also available in this decorator.\n /\nlet codePushOptions = { checkFrequency: CodePush.CheckFrequency.MANUAL };\nAndroidCrash = CodePush(codePushOptions)(AndroidCrash);\nAppRegistry.registerComponent(\"AndroidCrash\", () => AndroidCrash);\n```\n\nSo I've \nthis._modal.close();\nthis.setState({ showDownloadingModal: false }); \nin my UpdateInstalled event but it is still working.. Thanks @sood03, please let us know if any updates!. Hi @kandiva, probably you should reinstall code-push and try again. \nYou can also checkout this comment https://github.com/Microsoft/react-native-code-push/issues/970#issuecomment-324854648 and try to do the same things on your side. \nPlease let us know if it helps.. @kandiva please let us know if you have a chance to look at this. Closing the issue for now, please feel free to reopen or create a new one if you still have any troubles with this.. @kandiva so you have done the following but with no luck, correct? \nXcode Clean, close Xcode, delete node_modules, npm cache clean, npm install, open Xcode and try to build?\n. Hey everybody, we've released 5.1.1-beta that should fix the problem. Please let us know if you see any issues with this.. Hello @wholcman, you can use different check Frequency modes to verify if update exist. I believe the fastest should be codePush.CheckFrequency.ON_APP_RESUME  especially when used with combination of codePush.InstallMode.IMMEDIATE. \n. @wholcman \nYou can also checkout how this is done in our demo app to see other ways to integrate codepush that probably should be easier. You can e.g. change codePushOptions here to try different workflows which suit best for you.. Closing this, please feel free to reach us if you have more questions. . Hello @jpahalwani, so we have several related threads regarding this, you can quickly observe them:\nhttps://github.com/Microsoft/react-native-code-push/issues/748\nhttps://github.com/Microsoft/react-native-code-push/issues/949\nhttps://github.com/Microsoft/code-push/issues/415\nhttps://github.com/Microsoft/code-push/issues/486\nIn short for today we are not aware if any apps were rejected due to code-push usage itself.\nWe are actively monitoring this and at that moment it turns our that none of these issues were really related to code-push plugin usage.\nAlso we do not recommend to use update dialog within your app, please take a look at this section for more details.. @jpahalwani I'm closing this issue currently if you have no more questions, feel free to reach us if any.. Hi @TheRohitSharma, you are right, it make sense to update to the latest RN and RNCP if possible. \nAnd yes, you should go through the store this way, this is required.\nAs for your issue - as stated in our compatibility table RN 0.36 is not compatible with RNCP 1.6.0.\n. @TheRohitSharma \nThe rule of thumb here is that when you produce new binary update you should always increment app version. That really make sense and if you do this old updates which could be possibly incompatible should never be applied again. (here is the logic which handles this situation).\nCould you please increment app version, install apk on device and verify if it is working?\n. @TheRohitSharma \nFor android you should change versionName parameter in app build.gradle file.. Thanks for reply @TheRohitSharma, closing the issue now since it has been resolved.. @zhaoheqi hi, and thanks for reaching us.\nCould you please be more specific about your issue, i.e. what you've done/what happens/what you expected to see/your environment etc.\nWe have a good template here, so probably if you could follow this it would be easier for us to determine what happens.. Closing the issue, will reopen when we'll have more info regarding this.. Hi there @damathryx, it looks like RNCP 2.0.2-beta is incompatible with RN 0.46.4 for Android.\nCould you please update to RNCP v4.0+ and try again?\nAlso just to double check - you should use different deployment keys for each platform. . @damathryx could you please try upgrade to e.g. 5.1.1-beta, because we've restored compatibility with RN46 starting with this version (sorry for confusion here).. @damathryx thanks for reply!\nSo several questions to clarify:\n1) You are using two different apps with different deployment keys, one for iOS and one for Android?\n2) Can you confirm that the issue reproduces only with Mandatory install mode and works fine without it?\n. @damathryx thanks!\nSo looks like you are using incorrect syntaxis here:\n@codePush({\n  mandatoryInstallMode: true,\n  mandatoryContinueButtonLabel: 'proceed',\n  installMode: codePush.InstallMode.ON_NEXT_RESUME,\n  checkFrequency: codePush.CheckFrequency.ON_APP_RESUME,\n})\nPlease use it as following for mandatoryInstallMode:\nmandatoryInstallMode: CodePush.InstallMode.IMMEDIATE, instead. \nLet me know if it helps.. Hey @HananeAlSamrout, are you also getting TypeError: expected dynamic type double but had type boolean in stacktrace?. @HananeAlSamrout that is definitely another kind of issue we are hunting for.\nYou can look at this thread for more details: https://github.com/Microsoft/react-native-code-push/issues/995\nProbably some info from this could be helpful.\nAlso it would be better to move our conversation regarding this to #995. And we would be very grateful if you can help us to reproduce this issue on our side!. @HananeAlSamrout awesome, thank you so much!. @HananeAlSamrout thanks for reply. That is good that the issue is fixed for you. I've tried to reproduce it as described here but it was working for me. If you have some clues what I'm missing it would be much appreciated.. Folks - I believe that it is not a good idea to mix all your problems in one issue. All your 3 crashes have nothing in common and should be discussed in separate threads. \n@damathryx - I'm pretty sure that your issue will be fixed as described here: https://github.com/Microsoft/react-native-code-push/issues/1014#issuecomment-332208906 so I'm closing the current one, please let me know if you still experience any problems or have any questions.\n@TrustTheBoy As far as your problem is not related to the topic starter issue please create a separate one so we can continue discussion of it in another thread. \nPlease fill all the relevant fields, specifically:\n react-native-code-push version:\n react-native version:\n Does this reproduce on a debug build or release build?\n How do you initialize your code push within your app\n Do you have any special aspects about your app\n Were you able to update your app previously using the same steps, in other words your app was working well before or you have not tried this before?\n Are you able to reproduce your issue with our sample app?. Hello @smaradona! Yep, binary update should take precedence over any CodePush updates unless old code push update is not targeting multiple binary versions.\nCould you share the output of code-push deployment history <appName> <deploymentName> with us?. @smaradona yeah that should work! Also you can just disable this update targeting '' versions.. Great :) I'll close the issue as it seems to be resolved, feel free to reach us if you need any help with code-push.. @TrustTheBoy your issue is looking similar to this one: https://github.com/Microsoft/react-native-code-push/issues/921\nIt was fixed in PR https://github.com/Microsoft/react-native-code-push/pull/924 and released in RNCP 4.1.0-beta, so could you please update to this version (or later) and let us know if you still can see the issue?. @TrustTheBoy can you share the minimum example how you integrate code push?\nAlso do I get it right that updating to the latest React-Native and react-native-code-push didn't solve your problem?. @TrustTheBoy thanks for getting back!. Hello @vintercider thanks for letting us know. Indeed there is an issue with iOS 9. We're using this library to verify JWT on iOS and it appears that it fails to execute correctly at the following lines:\nhttps://github.com/yourkarma/JWT/blob/a8829959acd7fbc79bdb47f433e3b9243e1c304f/Core/Algorithms/RSFamily/RSKeys/JWTCryptoSecurity.m#L111\nUnfortunately all iOS devices that uses iOS9 will be unable to use code signing feature correctly at that moment.  Though the number of devices with this version of iOS is less than 5% we will try to find out how to overcome this problem.\nAlso we have filled the corresponding issue in JWT repo: https://github.com/yourkarma/JWT/issues/146. Hi @vintercider this issue is fixed in 5.1.3-beta release, could you please verify and let us know if it works for you.. @Borisboky hi, thanks for question. \nWe have codePushStatusDidChange method that you can subscribe to and add custom logic on different events.\nTake a look at how this is implemented in our demo application.\nE.g. you can add custom logic to the following events (I believe AWAITING_USER_ACTION is what you are looking for):\ncodePushStatusDidChange(syncStatus) {\n    switch(syncStatus) {\n      case CodePush.SyncStatus.CHECKING_FOR_UPDATE:\n        this.setState({ syncMessage: \"Checking for update.\" });\n        break;\n      case CodePush.SyncStatus.DOWNLOADING_PACKAGE:\n        this.setState({ syncMessage: \"Downloading package.\" });\n        break;\n      case CodePush.SyncStatus.AWAITING_USER_ACTION:\n        this.setState({ syncMessage: \"Awaiting user action.\" });\n        break;\n      case CodePush.SyncStatus.INSTALLING_UPDATE:\n        this.setState({ syncMessage: \"Installing update.\" });\n        break;\n      case CodePush.SyncStatus.UP_TO_DATE:\n        this.setState({ syncMessage: \"App up to date.\", progress: false });\n        break;\n      case CodePush.SyncStatus.UPDATE_IGNORED:\n        this.setState({ syncMessage: \"Update cancelled by user.\", progress: false });\n        break;\n      case CodePush.SyncStatus.UPDATE_INSTALLED:\n        this.setState({ syncMessage: \"Update installed and will be applied on restart.\", progress: false });\n        break;\n      case CodePush.SyncStatus.UNKNOWN_ERROR:\n        this.setState({ syncMessage: \"An unknown error occurred.\", progress: false });\n        break;\n    }\n  }\nMore info about downloadProgressCallback can be found here.\nPlease let us know if it helps.. Hi @joarwilk, so in general when you do new AppStore release (with binary update) you should always increment AppVersion. So this way old codepush updates will not be applied (of course if you do not change target binary version of the codepush release manually to something line *). \nWith this workflow you should never worry about old codepush updates and also as far as your new app version would contain latest code there is no need to apply any of old updates.\nPlease let me know if you have more questions or something is unclear.. @joarwilk np, you are welcome :). Hi @joarwilk, probably you could inspect your app network calls to see what's going on. Yesterday we have a temporary problem with service availability (please see #1028) and I think that it could be the reason of your issue. \nDo you still have problems with updates? . Closing this issue as seems to be relative to #1028, please let us know if any further questions. . @GregTheGreek please let us know if you have a chance to look at this?. Closing this for now, please reopen or let us know if any questions. . Hello @jgcmarins your react-native version is not compatible with latest react-native-code-push, please checkout our compatibility table here: https://github.com/Microsoft/react-native-code-push#supported-react-native-platforms.\nTo use latest react-native-code-push you should upgrade react-native to 0.46 or higher.. @djalmaaraujo Thank you for contribution, looks good, merging it!. Thanks for contribution @deecewan, really appreciate it! Looks good and merging it to Master.. Hi @adambene, could you please describe how you test this use case?\nI've tried it on my own and it works. My workflow is as follows:\n1) Release new code-push update with empty description\n2) Verify it is empty by viewing release history\n3) Patch update with new description\n4) Verify it is not empty by viewing release history\n5) Verify that description field is showing correctly on my device with codePush.getUpdateMetadata() method\nSo the main point here is that you should 1st patch, then do getUpdateMeadata. If you have already downloaded and installed update then you will not see updated description because it was empty at the time you were downloading it.\nPlease let me know if it helps or if you have any questions.. @ViraRodionova sorry, could you please check if it is a duplicate case for https://github.com/Microsoft/react-native-code-push/issues/1041 or not?. Hey @omeraplak we have updated CodePushDemoApp to latest RN49 and verified that it works. Thanks for letting us know.. @jay1337 - sorry, probably I've missed something. Do you see anything wrong with this?. @jay1337 - fixed (https://github.com/Microsoft/react-native-code-push/commit/3bce5a1100d5da7c236315217317d7ea1e0851b4), thanks for pointing!. Hey @duoduo2012, please follow the issue template so we could be able to help you with your issue.. Closing the issue, please resubmit with provided template from above when you get a chance.. @adricl thanks for update, will do really soon.\n@rozele - can you please confirm that fix is landed in latest release?\nAlso just curious - in your release history you have always rc versions and sometimes  not (like here). So on which conditions it depends on?. @itchingpixels - thanks for pointing, appreciate it!. @danieldelouya please let us know if you have a chance to look at this?. Hey @sunweiyang we have several similar issues before, currently we are not going to upgrade to 25.0.0, please see this for more info: https://github.com/Microsoft/react-native-code-push/issues/919\nAs a workaround - please take a look at the following comment: https://github.com/Microsoft/react-native-code-push/pull/725#issuecomment-284979977 hope it helps.. Closing this, let us know if you have any questions with this.. Hey there @srinuch1981, please consider that code push updates should not be tested in debug mode, could you please try it in release mode and let us know the results? \nFrom docs:\n\nNOTE: CodePush updates should be tested in modes other than Debug mode. In Debug mode, React Native app always downloads JS bundle generated by packager, so JS bundle downloaded by CodePush does not apply.. Hi @afilp, could you please double check if your current react-native version is compatible with latest react-native-code-push version.\nPlease  refer to our Compatibility Table for this.\nAs for react-native-code-push v5.1.3-beta -> only react-native v0.46-v0.49 are supported. \nPlease let us know if it helps.. @afilp I've tried with latest rncp and rn49 from the scratch and don't see any issues with this. Also have added Firebase to my project and was able to build it.\n\nMy android/build.gradle is the same as yours except that I don't have url 'https://maven.google.com'. Are you sure you really need this?\nCould you confirm that you could reproduce the issue on fresh new react-native app? \nIf it is something related to your project than it is not easy to say whats wrong here. Probably you could share with us minimum app so we could try to build it on our side to see if we have an error. Please let us know what you think about it.. @afilp that is really odd however looks like the issue is related to your configuration - not a codepush itself (as far as we do not get any more reported issues like that). \nWith that said its really hard to say what is wrong with your configuration/codepush integration without actually looking at the code. Is it possible for you to share with us a small reproducible demo or better provide us with steps how we can fall into this issue (e.g. 1) do rninit init MyIssue1061 2) npm i react-native-code-push 3) react-native link react-native-code-push and so on and so forth). \nLooking forward for more information from your side.. Hey @afilp do you happen to have any updates about it?. Awesome! Thanks for update @afilp!. Closing the issue for now, please feel free to reopen when you get more info regarding this . Hello @stueynet - you are right, that is a good place to ask questions about codepush :)\nSo in general the rule for determining correct target binary version is as follows:\nif you do not specify it explicitly than it will be fetched automatically from corresponding plist file for iOS and build.gradle for android. The logic for getting AppVersion could be found here.\nIn other words you should set target binary version parameter in case you want to override the version that is defined in plist/build.gradle or if you want to address a wider range of AppVersions to which codepush updates should be applied.\nMore info regarding target binary version parameter is here.\nPlease feel free to ask questions if any.. @stueynet\nYup, you are right:\n\nSetting the targetBinaryVersion will literally only install that particular codepush deployment on devices that have that exact binary version\n\nFor this one:\n\nThen when you push a subsequent build with no targetBinaryVersion set it will be installed on all devices.\n\nCorrect thing is that it will be installed on all devices that much target binary version that will be fetched by default from info.plist/build.gradle. \nWith that said I think it could be reasonable to have e.g. the following workflow:\n1) You should always bump app version when making binary changes/changes that could be incompatible with previous codebase\n2) You could release code push update targeting the older app versions with specifying --targetBinaryVersion parameter\n3) You can omit this parameter if you would like to target the binary version that is currently specified in your info.plist/build.gradle files.\nPlease let me know if you have more questions. \n. @stueynet, no this files will not be included in codepush release at all.. @stueynet \nYes - that could be an issue if all your codepush updates are targeting the same binary version. \nTo avoid this situation you should try to distinguish updates that could have incompatible changes with AppVersion parameter to avoid confusion.\nBut on the other hand if you push changes to binary (that could introduce some kind of incompatibility) you should anyway bump version number and release new AppStore update due to this changes could not be applied via codepush only.. @stueynet \nOk, so I believe the following should work for you:\n1) You have AppStore version 1.4.9. You also have CodePush with target binary version 1.4.9. So far so good.\n2) You have new AppStore version 1.5.0. Also produced new CodePush update with target binary version 1.5.0. \nAt that moment all users that are using 1.4.9 will receive CodePush updates 1.4.9, for those who are using 1.5.0 CodePush updates targeting 1.5.0 will be applied.\n3) You produce new AppStore version 1.5.1 (I assume so because CodePush update targeting 1.5.1 doesn't make sense without the app with corresponding app version). And after that produce new CodePush update for version 1.5.1.\nSo here we have the current state:\n- CodePush update for 1.5.1 is applied only to AppVersion 1.5.1.\n- Older app versions (1.4.9 and 1.5.0) do not receive incompatible update 1.5.1 (because this update is not targeting their binary version).\n- As long as someone updates the app version on the device manually (say from 1.5.0 to 1.5.1) all previous CodePush updates are cleared and only updates that are targeting 1.5.1 would be applied.\nIn other words updates that are targeting different binary versions are completely isolated and could not break the app somehow. \nPlease let me know if I'm missing something here.\n. @stueynet \nYes, it is strongly recomended not to use some kind of ranges like say targetBinaryVersion=* because this could lead to compatibility issues. Or at least you should know what you are doing and why you need this.\nFor this one:\n\nOnce you have a codepush release attached to a specific binary version, all future code push releases must always target a specific version\n\nWhy do you see a problem with this? There is no need to specify it manually because our CLI in smart enough to fetch this automatically. \nAlso from my point of view it make sense to scope codepush update to specific version. \nWhat is the purpose for your new update to target old versions? But it is good that you have an ability to provide a fix for older versions with targetBinaryVersion if needed, do you agree with me?\nSo for this:\n\nYou can no longer just do codepush release because 1.4.9, 1.5.0, 1.5.1 would all get the new release that has the 1.5.1 minimum dependency\n\nThis is not clear for me. You need to do CodePush release that has 1.5.1 dependency (and so I assume you bump version number in the app)? If you already bump it - no worries, it will target correct version. If not - you have a choice to set it manually via targetBinaryVersion. \nSo finally that's true - in general you cannot just produce new release without specific binary version especially if you have breaking changes. The versioning here for rescue. Also I believe that this is one of the main purposes of versioning - help us to designate which update we should apply to which version. \n. No problem @stueynet, you are always welcome :) . @stueynet \nIf you need to target several versions at the same time you could use range for this. \nAlthough you must understand all the risks that we have discussed above but it is still possible to target several versions at the same time. You could do it e.g. the following way:\ncode-push release-react AppName PlatformName --targetBinaryVersion=1.5.1-1.5.2. Hello @stueynet \nYep, you are right:\n\nall code push release only targets the binary version of the app, based on when you do the release.\n\nAnd you don't need to add targetBinaryVersion if your current application targets the desired version. Otherwise you could specify it directly. \n\nSo key take way for me is that every codepush release is automatically tied to the binary version in the local codebase from where you push the codepush release.\n\nYes, that is correct.. Closing the issue for now, please feel free to reopen when you get a chance to revisit it and provide us with minimum app where we can reproduce the issue.. @seanadkinson - hi and sorry for inconvenience, please see https://github.com/Microsoft/cordova-plugin-code-push/issues/314#issuecomment-342398757 answer for details. . Hey @adricl, closing this due to fix merged!. Hey @seanadkinson, do you still experience the issue on your side? \nIs it the 1st time you are using react native code push or it was working well previously?\nI've tried on my newly created app (High Sierra, Android Studio 3) and got the following output on clean:\n```\n20Nov17\n16:45   Executing tasks: [clean, :app:generateDebugSources, :app:generateDebugAndroidTestSources, :app:mockableAndroidJar, :app:prepareDebugUnitTestDependencies]\n16:45   Gradle build finished in 7s 271ms\n```. @seanadkinson - please let us know what you'll find out finally.\nAlso probably you can take a look at similar issue on SO - https://stackoverflow.com/questions/40227064/gradle-builds-are-very-slow-after-upgrading-to-mac-os-sierra, not sure if related but you can check it out anyway.. @seanadkinson I'd rather close the issue in the meantime as it does't seems to be something that affects all users and more likely specific to your environment. \nBut we are good to help you investigate and collaborate more if needed and if the issue still persists - just let us know when you get a chance to revisit it and if you need any help!. Thanks for response @seanadkinson, good to know that the issue is fixed!. Hello @rizwanahmed19, you will be prompted to add both keys, first for android and then for iOS. If you want you can skip one of these steps - just hit enter and no key will be injected at all. \nFrom my point of view it would be better if you have two apps (one for iOS, one for android) and will enter the required keys on linking.. Hey @wangcheng714, @felix-zg\nSo just to clarify -> you are able to release the update being an owner of the app but collaborators are unable to release the app due to app does not exist error?\nIf you get a chance - could you please try the following:\n1) Share the output of code-push app ls when logged in as a collaborator\n2) Try to release the update using the new AppCenter CLI to get out if it is not working also? (appcenter codepush release-react)\n3) Login to AppCenter site to verify if you are added as a collaborator's there?. Thanks guys, good to know that the issue is resolved for you.. Hey @thecachedbyte, thanks for reporting!  Several questions:\nWhat is the exact error you see? Is it still \"App doesn't exist?\"\nAre you trying it with OLD CLI? If yes what is the CLI version you are on?\nCan you share the output of code-push app ls command?\nCan you try it with new CLI and let us know if it is not working either? . Hey @thecachedbyte, just have tried (I am a collaborator for this app) and it works for me.\n\n```\nD:\\Projects\\Issues\\rnIssue1090>code-push release-react sergey.akhalkov/rncp976-android android\nDetecting android app version:\nUsing the target binary version value \"1.0\" from \"android\\app\\build.gradle\".\n...\nReleasing update contents to CodePush:\nUpload progress:[==================================================] 100% 0.0s\nSuccessfully released an update containing the \"C:\\Users\\max\\AppData\\Local\\Temp\\CodePush\" directory to the \"Staging\" deployment of the \"sergey.akhalkov/rncp976-android\" app.\nD:\\Projects\\Issues\\rnIssue1090>\n```\nCan you share the exact command you are executing? Does your app belongs to organization in app center or not? . @thecachedbyte thanks for quick turnaround!\nAs for new CLI - it seems that this PR is needed to fix your issue (if you get a chance to test it with it that would be great).\nOtherwise could you try with old CLI? Could you share the output and command you are using with us?. @southerneer please take a look at the following comment: https://github.com/Microsoft/appcenter-cli/issues/324#issuecomment-347434975. Closing this as the issue is resolved in latest version of appcenter. . Hello @s-shiva1995, could you please take a look at the issues from below having the similar problem:\n1) https://github.com/Microsoft/react-native-code-push/issues/771\n2) https://github.com/Microsoft/react-native-code-push/issues/1046\nPlease double check that codePush.gradleis correctly referenced in build.gradle (also please check the following comment https://github.com/Microsoft/react-native-code-push/issues/873#issuecomment-306776546)\nLet us know if helps or any questions. . np, thanks for updating! . Also it's worth mentioning that the issue relates more to react-native link functionality itself rather then what code-push does. Meaning here that it reproduces with other plugins as well as you have already pointed above.. Hey @samermurad, thanks for reaching us and for your question.\nCould you please clarify us some points so we could assume that we are on the same page.\nYou said: can I somehow force these js files to be treated as assets and  somehow code-push doesn't treat them as such, when running a release without code push it works.\nDo you mean here that when releasing with codepush CLI these files are not included but when you just run react-native bundle ... they are?\nAlso for #977 as I get it right the problem was that path for some files was changed after applying code-push update (and that is expected!) and it was required to get out the directory where they were located so user can reference them correctly. Will it work for you if you bundle your js files and reference them for your needs later?\nAlso don't get it well why do you need to treat js files as assets and do not just bundle them normally as other js contents for using them later? . @samermurad got it, so if I get it correctly your js/css are not found, probably you could debug the app to see where it is looking for this files? It seems to be an issue with relative path being changed after applying codepush update but would be great to have an app to verify. . @samermurad so it looks like that html file was bundled whereas js/css not? Do you use the same approach to load html as here: https://stackoverflow.com/a/35816271?\nAlso it is still possible to use inline css/js to resolve your issue, sure it is not an elegant solution but probably it could work for you. . @samermurad it looks like html is loaded correctly as it has been \"required\".\nIt is stated here: https://github.com/facebook/react-native/issues/505#issuecomment-180346039 \nAlso according to this one js/css files will not be bundled. So I'm afraid it is not possible to treat them as assets.\nSo if you copy this files when codepush update is applied in codepush dir I believe it should work.\nAlso if their location is unchanged you probably can use absolute path for these files.\n. @samermurad I'd rather to close this if you don't have any further questions, but if you have any - please let us know, we are all ears.. Hey @wd is it possible that update is just installed? https://github.com/Microsoft/react-native-code-push/blob/master/CodePush.js#L549\nIf you release another update will you always get this status? Does updates applied at all?. @wd got it, thanks for update! As for docs - it make sense to keep them in sync with actual code, we can update them a little bit later or if you would like you can create a PR for this, that would be much appreciated!. Hey @ranvirgorai, looks odd, can you try to do the following and let me know the results:\n1) react-native init rnIssue1090\n2) cd rnIssue1090\n3) npm i\n4) npm i react-native-code-push --save\n5) react-native link react-native-code-push\n6) react-native run-android. @ranvirgorai thanks for updating, good to know that the issue is fixed. I'm closing the current one, please feel free to reach us if you need any help going further!. Hey @xiaoyongchen do you still see the issue? Could you please provide us an exact command and the output for the error message?\nI've tried e.g. code-push deployment ls MyTestOrganization_maximi/max-rename -k but don't see any issues. . @xiaoyongchen do you have a chance to look at this?. Closing this, please create new issue if needed.. Thanks @RobertPaul01 for quick turnaround, we are good with merging this! . Hi there @niros001 , thanks for staying in touch. \nIn order to fix your issue faster and to get out what is going wrong here we need some additional information from your side, more specifically:\n1) exact way you are integrating CodePush (with code samples)\n2) ios/android?\n3) release/debug mode?\n4) simulator/real device?\n5) what was in your update, anything suspicious?\n6) probably sharing deployment history would be useful (especially if you add --format json argument to it)\nSo 1st point is the most important. Also would be great if you could share with us minimum sample where we can reproduce the issue.\nFinally reopening it and looking forward for more details from your side! . Thanks for contributing @JodiWarren!. Closing the issue for now. If you are still facing the problem with configuration please reach us (even better would be to provide us a minimum example of the app which is not working). . @EthanChouTW please let us know if you have a chance to look at this.. @DaddyWarbucks thanks for letting us know, at that moment we are not working on this task but we are always welcome if anyone would like to contribute and are ready to help/review the changes. \nAt that moment please remember that you are still able to do manual linking of codepush in that case, so you won't be blocked. . @abrel please let us know if you have a chance to look at this.. @mark-friedman ya, sorry for confusion here, we've released 5.0.0 with no backwards compatibility to RN 0.46.x, later we have released 5.1.0 which is compatible with RN 0.46 also. \nI believe we can close the issue, feel free to reach us if any questions.. Hello @aliceathens,  thanks for asking, could you please share exact commands you have executed?\nAlso please share with us the output of code-push deployment history <appName> <deploymentName> before and after you have executed promote command (for both deployments).\nAlso just in case - the quick ref on how promote command should work exactly. . @aliceathens \nSo code-push deployment ls command is showing only the latest release for the deployment.\ncode-push deployment history <appName> <deploymentName> is showing the whole picture. Here it looks like you have both releases, v12 for 1.0 ver and v13 for 2.0. Seems to  be correct.\nPlease let me know if I'm missing something or any questions. . Hey @aliceathens, I believe we can close the question for now, but please let us know if you still have more questions about this - we are gladly to look at!. Hello @di9it, I've tried it with new react native app and don't have any issues, my repro steps:\n1) react-native init RNIssue1141\n2) cd RNIssue1141\n3) npm i\n4) npm i --save react-native-code-push\n5) react-native link react-native-code-push\nCould you please try this and let me know if it works.. @di9it please let us know if you have a chance to look at this!. Closing the issue for now, please let us know if you still have this problem or have more questions. . Hello @HAMPLENI, thanks for letting us know. \nI'm a little confused how to reproduce it, I just have tried a boilerplate react-native type-script app, added codepush with e.g. getUpdateMetadata method on page. Called tsc to compile the project and didn't see any issues. \nMine complierOptions:\n\"compilerOptions\": {\n        \"target\": \"es2015\",\n        \"module\": \"commonjs\",\n        \"jsx\": \"react\",\n        \"outDir\": \"build\",\n        \"rootDir\": \"src\",\n        \"allowSyntheticDefaultImports\": true,\n        \"noImplicitAny\": true,\n        \"experimentalDecorators\": true,\n        \"preserveConstEnums\": true,\n        \"allowJs\": true,\n        \"sourceMap\": true\n    },\nSo I think it would be great if you could share with us a small sample app where the issue is reproduced, so we can build it on our side and fix it. \nPlease let me know if it works for you.. @HAMPLENI please let us know if you have a chance to look at this!. Hi there @HAMPLENI thanks for sharing the example.\nSo I've tried to open it with vscode and build it with \ncmd + shift + b\n\nLooks good so far, I can see the output in tsbuild/index.js and no errors. \nPlease let me know what are your steps here.\nBtw my typescript version is 2.6.2.. Hello there @wuyingtong, thanks for sharing.\nCould you please clarify - is it the first time you see the issue or it was working great previously for you?\nAs a solution you could try two things firstly:\n1) Try to use https://github.com/Microsoft/appcenter-cli and release update with it\n2) Try to completely reinstall old CLI as it seems to be broken. \nPlease let me know if it helps.. @wuyingtong what does appcenter codepush release-react command output says?. Hello @thibautguedou3, that looks odd as it seems that there were no significant changes that could affect performance in two latest releases. \nHowever have you tried to rollback to v.5.1.3 again to see if the issue would be fixed by downgrading react-native-code-push?. @thibautguedou3 \nLooking for the 2 latest releases I don't see any significant changes that could affect performance dramatically, also we've not received more complains regarding this. \nIs it possible for you to share with us working example where this happens so we could investigate it more to get out the reason of the issue? \n. Hello @mdsaddam, thanks for asking. \nCould you please try to follow the logic as we have in our demo app (exporting app after we have wrapped it with codepush, not before) https://github.com/Microsoft/react-native-code-push/blob/master/Examples/CodePushDemoApp/App.js#L162 and let us know if it helps. In yes - we will update the docs accordingly. Thanks!. @mdsaddam thanks for update! We've added PR to make docs more clear (https://github.com/Microsoft/react-native-code-push/pull/1151). . Hello @leoskyrocker, thanks for the interest to our project! \nYou are right, no need to wrap the app with codepush, it is just a convenient way of integration for most of the users.\nYou can freely use e.g. a combination of checking for update, downloading remote package  and later installing local package. Just be sure that NotifyAppReady is called properly.\nPlease let us know if you have more questions. . @leoskyrocker yeah, Im not aware of any plans for changing this!\nThanks for feedback :). @zhaohailog just a friendly ping on this :). @zhaohailog good to know, just want to be sure that the issue has been resolved for you :)\nI'm closing this one now.. Hello @alburdette619, just have tried to reproduce your case but don't see any issues with it.\nWhat I've done:\n1) Create new blank rn app\n2) add rncodepush plugin and npm i \n3) link react-native-code-push\n4) integrate code-push the same way as in our sample \n5) run it on real device (iPhone7) with react-native run-ios --device and was able to open it and e.g. check for update\nCould you please be more specific about your repro steps or try it with my repro steps and let us know if it works.\nBTW we do not recommend to run codepush in debug mode at all, please refer to our troubleshooting guide here.\nMore generally:\nBe sure that you are running app in modes other than Debug. In Debug mode, React Native app always downloads JS bundle generated by packager, so JS bundle downloaded by CodePush does not apply.. @alburdette619 do you have a chance to look at this?. Closing this as of no response, please let us know if you still need any help with it.. Hey there @lyahdav thanks for pointing at this. \nWe have added a little bit more explanation for CodePush integration in this PR: https://github.com/Microsoft/react-native-code-push/pull/1151/files\nProbably this could be further improved, if you get a chance to create a PR to improve it that would be very much appreciated! . Good day @felipegr6! That sounds like a good idea and we have tried to do this before (and also have several PRs/issues with it) please see these threads mentioned below for details:\nhttps://github.com/Microsoft/react-native-code-push/pull/950#issuecomment-320167492\nPlease take a look at this issue describing the problem:\nhttps://github.com/Microsoft/react-native-code-push/issues/733\nI believe we can close the PR for now, sorry for any inconvenience that might have caused.\nIf you have more questions or considerations - we are all ears.\n . Thanks for fixing!. @silhouettes, you are absolutely right, this way we cannot guarantee that correct plist file will be taken (although in our case for CodePushDemoApp this will still work because this will take not the first item found but the last one - since there is no \"break\" in the loop when correct item is found).\nAnyway seems that this problem also exists for current solution (we are just taking the first plist file found). So we can try to use more robust solution, where we will look for plist path only in those sections where we have PRODUCT_NAME property defined and matching to package.name. This will work for the most of projects based on default template generated with init command. In case we cannot find this section in pbxproj file we can always fall back to the default solution.\nWhat do you think about this?\n. Hmm, I believe we want to use 'Release' build and indeed if we pass the 4th parameter to getBuildSettingsPropertyMatchingTargetProductName function as 'Release' it will take the only release build if it exists. \nI'm not sure if pbxproj file always have the same order of debug/release sections as in the example? If yes - then 'Release' will always be the last one and correctly picked up. But when we invoke function with only three params it will work if we have only one definition for build (I mean release or debug). Is it a use case?\n@silhouettes, Please let me know if you think it doesn't make sense and we can always expect to get 'release' build.. Sure thing, thanks for pointing!. @AndrewJack - thanks for pointing at this, added commit to fix this.. If this 4th parameter is callback may be it make sense to add callback postfix to this to avoid confusion (on first sight looks like boolean variable for me, not a function). Probably space is missing between if and brackets. Aye, good note, and it can be moved away from getJSBundleFileInternal method probably. Agreed!. Does it make sense to mark this var as Static also in accordance with how you e.g. add this to mServerUrl?. I see that we have several places where we throw an UnknownException but why don't we add a more meaningful name to the exception class e.g. something like CodePushInvalidPublicKeyException? \nThe key point here from my side here - is this a really Unknown exception or do we know what kind of  exception it is?. Don't think if we ever need this if block here due to we can move this log statement (and this is the only thing that this block is doing now) to Line 255 right after new if (isDiffUpdate) block begins.. Gotcha! May be we can also state what kind of update is applying currently with\nisDiffUpdate ? CodePushUtils.log(\"Applying diff update.\") : CodePushUtils.log(\"Applying full update.\") but that is completely up to you.. As the value is taken from plist file that can be shared between different libraries does it make sense to name it CodePushPublicKey to avoid confusion about the reference of this property? (the same as for deploymentKey/ServerUrl). Not sure if !*error is needed here, I believe if (!error) should be enough. . ~~Also don't understand why do we need at all err variable, seems that it is not used anywhere at all~~. Just style issue to use spaces between }else{ or probably use Ternary operator here. Same style issue, please use spaces (and please check all the places below). From my point of view Clean is not a good name here, probably preparePublicKeyForDecoding or something else could fit better. I can see that other verify methods here return BOOL  value (that make sense!) but this one is not. Maybe parseJWT should better reflect the purpose of it.. Again please verify if we ever need this error && *error? . Probably could move @contentHash to constants. Do we need to check for null here before assigning variable (e.g. if (error) {...})?. yep, looks like this can be modified for both SDK's. Agreed!. Well, that should be in most cases, but if someone will not do it we'll get an exception here. Although we do not expect that someone else should call it who knows how it would be changed in future? I'd prefer to stick to the arguments provided e.g. in this answer. But that's only my opinion, no pressure from my side :). Does it make sense to keep logging here to help devs to debug going further?. This is done in accordance with previous implementation (seems make sense to test against local copy of RN). Don't see any differences within these two versions in comparison of configuration/usage, so not sure if this change is required . I'd like to add this later, in another PR, so we keep previous version of react-native-windows in old CodePushDemoApp-pre0.49 and we should test and upgrade to latest react-native-windows separately for newly created demo app.. nit: mistype, differently in your app. Not sure if the word whole application fits good here. Probably we could rephrase like If you are integrating Code Push into React Native application please do the following steps:. I'd prefer to say here If you are integrating React Native into existing native application please do the following steps:. missing space before comment?. nit: space missing. nit: space missing. Can we reuse final ReactInstanceManager instanceManager = resolveInstanceManager(); variable from line 125 (from below) in clearDebugCacheIfNeeded to avoid unnecessary using reflection twice and additional try-catch block?. No worries, I believe current solution fits well. The only thing that I'd probably add is a comment with e.g. reference to the issue or some explanation of the intent because it could be not evident why do we need this logic at all.. typo: reactNativeVersionBellowV049 with one \"l\"?. Don't get this, could you please clarify what problems w/ dependencies are when using npm? It seems like I usually use npm for new react-native+cp project and don't see any issues.. Could you please provide the exact error/problem caused by this line? It works on mac previously so just wondering what happens now? \nAlso if it turns out that we really do not need this it make sense to remove this like and not to comment it.. I'm no sure if we need this condition at all. \n1) We can assign reactNativeVersionBellowV049 false by default\n2) If we do not have reactNativeVersion specified may be it make sense to terminate the script and provide an error? Will the code  below work if we do not specify rn version?. Lets move these two lines below that identifies if rn version is lower than certain rn version to separate function like function isReactNativeVesionLowerThan(reactNativeCodePushVersion, versionToCheckFor). also probably reactNativeVersionIsLowerThanV049 would be a better naming. nit: probably won't hurt to validate version param is not null and is number. ",
    "awesomejerry": "I was in v1.7.0-beta. Thanks for the information. Closing the issue :D\n. After upgrading RN to 0.39.0, React to 15.4.1 and RNCP to 1.16.1-beta. It's solved.. ",
    "lisong": "ok\n. thanks a lot\n. thanks for reply! sometimes you just fix a bug. maybe just a condition and react-native-cli has not split js bundles files, when app contains many business. jsbundles is really very big. it an expensive network. maybe google-diff-match-patch is a choices.. OK. why v5.3.2 not fix\njs\n  let queryPackage;\n  if (localPackage) {\n    queryPackage = localPackage;\n  } else {\n    queryPackage = { appVersion: config.appVersion };\n    if (Platform.OS === \"ios\" && config.packageHash) {\n      queryPackage.packageHash = config.packageHash;\n    }\n  }. i read the code. it could not solve this problem in client. it's complicate. diff update way need copy current package to generate new packages, but android resource it in apk. could we contact  react-native team, proposal  storage bundle and res in other place ?. @alexandergoncharov  thanks for reply! it's for https://github.com/Microsoft/react-native-code-push/issues/626 , it's useful features. i wonder if necessary, i will finish the mac and windows platform.\n. I see. it is need change server too.. OK. OK. what this ?. thanks, it's right, i found the answer  when open with sublime text2. . ",
    "panarasi": "@lostintangent Do you still have that prototype ? We are thinking of move all update logic to the native land - that would help with background updates. However, if you were able to solve it in a different way, I think we should look at that too.. @sergey-akhalkov Can you investigate this issue ?\u00a0This may be possible once we move\u00a0all our logic to native code. . @sergey-akhalkov I think we should look at how this can be done. . @cameronbourke Do you still need this functionality ? . @cameronbourke Thanks for the info. In that case, let me close this issue for now, and copy this over to our backlog. . This information is actually a part of the native bundle and making Async calls would be the only way this can be accessed. We do not save this information in the JS bundle that is sent back.\nLooks like the issue is solved for you, so closing this issue. Please re-open if you have questions . @daniel-beard We are looking at moving all the download logic to native land to serve this use case. cc @sergey-akhalkov - If we have this issue capture else where, can you add it here ? . This is likely to be fixed, since there have been a lot of changes in the header. Closing this issue. If you still have a bug, please reopen this and we can look at this. . @sergey-akhalkov Related to https://github.com/Microsoft/react-native-code-push/issues/614 ? \nIf it is related, lets close this issue since we are working on the other issue. . Closing this issue, issue moved to service repo. . @vladimir-kotikov What would be the proposed fix here? Are you saying we need to test the earlier versions, or is this something we would need to implement ? . @marcpechaitis Was this issue resolved ? . @marcpechaitis Thanks.\u00a0Closing this issue. Please re-open it if\u00a0you still have a problem. . @wafisher Ping. . @sergey-akhalkov I think we should investigate this issue. . @insaindesign I think this is a good point. However, if we change the name now, it would break existing apps. Is there a way you could ignore it in the flow type checking ? . @sergey-akhalkov Can we investigate this ? We would need a backward compatible\u00a0change. . @brettpappas Was your question answered ? Closing the issue since there is no other action item. Please re-open the issue if you still have the question and we can help you. . @lisong Thanks for the input. We have added this idea as something we would explore for the next version of Code Push. I am closing this issue here since it has been copied to our backlog. . @triage Was wondering if this issue is fixed for you. Closing this issue since this is a little old. Please ping us if you are still having this issue and we would be happy to help. . @liheyuan The code push bundles are updated in the acquisition SDK. This is a JavaScript file that runs only when React Native is running. If React Native's JSC VM is halted, this will also halt unfortunately. \nI am not sure if there is a way around it. We are currently exploring the possibility of downloading the bundle in a background thread. \ncc @silhouettes - here is a request for a background thread download for our bundle. . @liheyuan I have added the request to support background threads to our backlog. Hence closing this issue, since the current capabilities do not support this scenario. . @uc-asa Sorry for the late response. I am checking in to see if this is still an issue for you? Were you able to get this fixed ? Since this issue seems specific to your case, I would suggest you ping us on Discord where we can chat and help you with a solution. \nClosing this bug for now since this is pretty old. If you still have the issue, please ping us and we would be glad to help. . @igrayson Pinging you to see if this issue was resolved. Closing this issue for now, but please re-open it if this is still an issue. . @sergey-akhalkov Can we investigate this ? . @vladimir-kotikov Can you create a new issue capturing the need to in the code-push repo and then close this issue please ? . @benjaminb10 Pinging you to see if this fixes the issue. I am closing this issue for now, but if you still have issues, please let us know and we will be glad to help out. . @JuanbingTeam Could you help us understand the use case better please ? Is your project a native project where you try to include React Native twice ? Is there a sample repo that you could share to help us understand this case better ? . @JuanbingTeam Wanted to ping you see if you have more information on this. . @silhouettes Can you review this, and if it looks ok, lets merge this in. . Once this PR is merged, please close #650 . Closing this issue since the fix for this is already merged. . @emielvanliere Were you able to solve this problem ? As @sergey-akhalkov said, the logic to update the bundle currently lives in the CodePush.js file. More specifically, the server side checks are actually happening in the Acquisition SDK. \nHence, if you want to update the bundle from the native app, all of this logic would have to be re-implemented in the native code. All the code for unzipping and storing the bundle happens in the native code.\nIs there a reason you cannot let the updates happen in react-native ? \nAt this point, we do not plan to expose that method in the native code, since that logic is share in Cordova and React Native plugins. Please let us know if there is anything we could do to help.\nClosing this bug since there is no code change required. Let us know if this resolution does not work for you and we could explore other solutions. . @sergey-akhalkov @BretJohnson Should this not have a phase to Copy Headers too ? I tried running it, the headers were included, but header was not copied over to /Users/mYName/Library/Developer/Xcode/DerivedData/MYPROJ/Build/Products/Debug-iphonesimulator/include/CodePush/CodePush.a. @silhouettes As I understand, @max-mironov is employed my Microsoft, so we may not need the CLA. I think we should be good to merge this if you think the review looks ok. . I think we should close this since #614 already captures the issue. \n@goldylucks If you think #614 does not cover your concern, please let us know and we can reopen the bug. . Closing this issue since RN 0.40 is now supported. . @patrickomeara I was wondering if this bug is fixed ? Please let us know if there is any way we could help. . I just closed #673 since I am not sure we need to add this method to Code Push. I think a better way would be to update the documentation to specify that only release mode is used. \n@sergey-akhalkov is creating a new bug to update the documentation and will update the bug number here. I think we should close this issue once we have the bug for adding documentation. . We should close this PR without merging, since it is better to mention this in docs. . @jaggerwang Thanks for the issue. Wanted to ping you again to see if this is still an issue. Could this be an issue with react native navigation as mentioned in @sergey-akhalkov 's comment above ?  . Hey @jeremistadler Thanks for the Pull request. We were tied up with fixing 0.40 bugs - I think this looks good.\n@silhouettes I want to merge this PR. Github also now allows gh-pages for the docs folder, so this could also help in automatically updating code-push docs. . @silhouettes Since this is resolved, can we close this issue ?. I think we should close this issue here and have documentation in CodePush linking to the Fastlane action. \nBtw, we are also working on integrating CodePush with Mobile Center - it would have a similar experience. . Closing this issue since we are already working on CodePush and Mobile Center integration. . ",
    "mikedouglas": "We just started getting reports after upgrading from RN 0.24.1 to 0.26. Either the global pausing in RCTDisplayLink is a newer optimization, or there was another module that was previously subscribed to the frame updates.\n. Thanks for the quick review, merge, and release!\n. ",
    "steezeburger": "I did. Let me run through them again. I may have missed something.\n. For some reason it didn't link libCodePush.a properly the first time. I must have done something silly. Thanks for the quick reply! Sorry to take your time.\n. ",
    "wrousseau": "Thank you for answering so quickly ! This is something I will likely need in the following few days so if you need some extra feedback or even some help, I'd be more than happy to provide some (even though I'm just getting started with react native, coming from Ionic).\n. ",
    "jiyinyiyong": "I found the bug now in my code. Unexpected. There are 2 deployment keys in the package, the one in info.plist is correct, but the one in CodePush.sync({deploymentKey: ...}) is wrong since it's common code for both platforms.\nThe error message is really misleading.\n. Some factors here, English is not my first language so picking informations from a long document made things tougher, and second I have no experiences on developing Native apps so some terminologies made me confused even though I've been writing React for the Web for long. I just made more mistakes than you thought.\n\nWere you expecting both keys to be used, and possibly have their content merged?\n\nI followed the guide but not sure about how to fill in the code in JavaScript. What I did then was reading several examples by searching \"codepush.sync\" on GitHub and reused code by filling in my key. I was not very sure about the key at first no mention to found I actually have two keys in the project. I noticed this problem in the morning and my workmate explained to me how CodePush is using plist. Then I found I was wrong.\n\nHow were you actually releasing the updates of the shared code?\n\nStill struggling on this since this is my first Native app.\n\nWhen you showed the screenshots of your release command, it definitely looked like a \"valid\" release, so I'm guessing you shared the screenshot of your iOS app deployment and we never discussed the shared code deployment?\n\nAt first I tried with Android and it worked after you told me to find logs. As I got errors in trying iOS and I actually did put a new deployment key in info.plist by hand, but did not realise my true mistake. I thought it was a problem in trying iOS.\nI might have Googled tens of problems in the past weeks in starting React Native. It's always harder to correct my mistakes without right messages.\n. And thanks for your guide in Discord~\n. ",
    "cameronbourke": "@lostintangent That was my assumption as well! But I think the docs detail a similar but different scenario. The UpdateState.PENDING in the DOCS reads as:\n\nIndicates than an update has been installed, but the app hasn't been restarted yet in order to apply it. This can be useful for determining whether there is a pending update, which you may want to force a programmatic restart (via restartApp) in order to apply.\n\nIn my case, the update has not been installed yet, only downloaded. \n. @lostintangent Thanks for the quick reply! I am doing the earlier: \n\ncalling remotePackage.download and not installing the update until some later point\n. My use case the moment is to be able to do the following:\n\ngetUpdateMetadata(UpdateState.DOWNLOADED)\nSo that returns to the localPackage downloaded as opposed to what I am doing currently to cache that version @ https://github.com/cameronbourke/react-native-cp-update-button/blob/master/src/lib/downloadNewVersion.js#L7\n. @lostintangent Haha yeah it is! That would be awesome, more than welcome to get some feedback from you guys on how it can be improved as well!\n. @panarasi Yeah, this would be great! However, please don't prioritise implementing this as, https://github.com/cameronbourke/react-native-cp-update-button, has been working fine without it. The win I'd get out of having this functionality is efficiency. . ",
    "calclavia": "@lostintangent Using const CodePush = require('react-native-code-push') makes the error go away. But I can't use import statements.\nTS version: 1.8.10\n. {\n    \"compilerOptions\": {\n        \"target\": \"es6\",\n        \"jsx\": \"react\",\n        \"noImplicitAny\": true,\n        \"experimentalDecorators\": true,\n        \"preserveConstEnums\": true,\n        \"outDir\": \"build\",\n        \"sourceMap\": true,\n        \"noEmitOnError\": true,\n        \"allowJs\": true\n    },\n    \"filesGlob\": [\n        \"typings/**/*.d.ts\",\n        \"src/**/*.ts\",\n        \"src/**/*.tsx\"\n    ],\n    \"exclude\": [\n        \"node_modules\",\n        \"test\"\n    ],\n    \"compileOnSave\": false\n}\n. @lostintangent Thanks! That works now. Would've been helpful if it was on the docs/README.\n. Actually, updated CodePush to v1.14 and it's fixed. :)\n. ",
    "imalbert": "I'm using rnpm 1.9.0\n. This is awesome. Thanks guys!\n. ",
    "ashleydw": "Got the same, the docs should state:\nbuildConfigField \"String\", \"CODEPUSH_KEY\", '\"<INSERT_STAGING_KEY>\"'\nNote the single quotes outside the double. More info: http://stackoverflow.com/questions/30796533/how-to-generate-buildconfigfield-with-string-type\n. ",
    "pavelyevchenko": "why then applicationId \"some string\" - goes without double quotation ?. ",
    "leonardgithub": "@lostintangent my pleasure\n. @max-mironov yes, you are right. I am lazy to release my app of new version to the app market stores, and I want code push help promote the app version (i.e. 1.1.0 to 1.2.0), which can save my time. Thanks. Thank you, sergey-akhalkov. ",
    "stovmascript": "My DEBUG build is acting strangely with this configuration, which I've made myself and thought would work. It will try to load the offline bundle - the dev menu also looks like the offline bundle should be loaded, since half of the options (live reload, etc.) are missing. But after reloading, I get a redbox error complaining that the packager server isn't running.\n. ",
    "SudoPlz": "I was looking for that exact code.\nWorks for me, thank you..!. If you're using CodePush.sync then the third parameter is what causes that issue (particularly leaving the 3rd param empty)\nCodePush.sync(\n      {}, // codepush options\n      (syncStatus) => { // status callback\n            // do smthing with the sync status\n      },\n      (progress) => { // progress callback (Specify a function here otherwise you'll get a warning)\n            // do smthing with the progress value\n      }\n);. Thanks that resolved the issue for me as well..\nI was using a function (defined in app.gradle) to automatically set the version of our app the same as what is defined in package.json like so:\n```\ndef getVersionFromPackageJson() {\n    def inputFile = new File(\"../package.json\")\n    def packageJson = new JsonSlurper().parseText(inputFile.text)\n    return packageJson[\"version\"]\n}\ndef getVersionCodeFromPackageJson() { // major [0], minor [1], patch [2]\n    def (major, minor, patch) = getVersionFromPackageJson().tokenize('.')\n    def npmVersionArr = [Integer.parseInt(major), Integer.parseInt(minor), Integer.parseInt(patch)] as int[]\n    def npmVersion = npmVersionArr[0] * 10000 + npmVersionArr[1] * 100 + npmVersionArr[2]\n    return npmVersion\n}\ndefaultConfig {\n        ....\n        minSdkVersion 16\n        targetSdkVersion 22\n        versionCode getAcuityVersionCodeFromPackageJson()\n        versionName getAcuityVersionFromPackageJson()\n        ....\n    }\n``\nand received the following error:[Error]  No property named \"getVersionFromPackageJson()\" exists in the \"android/gradle.properties\" file.`\nNow it's ok.. Ok @sergey-akhalkov  so does that mean that if we use ON_NEXT_RESTART it's fine to still use RN 0.45 on both iOS and Android?. Awesome, thanks Sergey!. Nevermind I think this has to do with the fact that I'm building directly from react-native source (0.46.x) instead of using an npm version of react-native. I now have problems on my local android project as well, so I'm closing this issue for the time being.. Can't wait enough for this!. I'm so glad I found that issue, I thought I was the only one experiencing this error.\nHere's our production stacktrace:\n01-04 14:56:40.351 28508-28636/? I/ReactNativeJS: Running application \"WELCOME\" with appParams: {\"initialProps\":{\"screenInstanceID\":\"screenInstanceID2\",\"navigatorID\":\"navigatorID1_nav\",\"navigatorEventID\":\"screenInstanceID2_events\"},\"rootTag\":31}. __DEV__ === false, development-level warning are OFF, performance optimizations are ON\n01-04 14:56:40.351 28508-28636/? E/ReactNativeJS: Application WELCOME has not been registered.\n\n        Hint: This error often happens when you're running the packager (local dev server) from a wrong folder. For example you have multiple apps and the packager is still running for the app you were working on before.\n        If this is the case, simply kill the old packager instance (e.g. close the packager terminal window) and start the packager in the correct app folder (e.g. cd into app folder and run 'npm start').\n\n        This error can also happen due to a require() error during initialization or failure to call AppRegistry.registerComponent.\n01-04 14:56:40.375 28508-28525/? V/FA: Session started, time: 421664741\n01-04 14:56:40.378 28508-28525/? D/FA: Logging event (FE): _s, Bundle[{_o=auto, _sc=NavigationActivity, _si=-2780332768407465954}]\n01-04 14:56:40.383 28508-28637/? E/AndroidRuntime: FATAL EXCEPTION: mqt_native_modules\n         Process: com.ourBelovedApp.app.android, PID: 28508\n         com.facebook.react.common.JavascriptException: Application WELCOME has not been registered.\n\n         Hint: This error often happens when you're running the packager (local dev server) from a wrong folder. For example you have multiple apps and the packager is still running for the app you were working on before.\n         If this is the case, simply kill the old packager instance (e.g. close the packager terminal window) and start the packager in the correct app folder (e.g. cd into app folder and run 'npm start').\n\n         This error can also happen due to a require() error during initialization or failure to call AppRegistry.registerComponent.\n\n         , stack:\n         runApplication@311:1390\n         value@64:3177\n         <unknown>@64:911\n         value@64:2606\n         value@64:883\n\n             at com.facebook.react.modules.core.ExceptionsManagerModule.showOrThrowError(ExceptionsManagerModule.java:56)\n             at com.facebook.react.modules.core.ExceptionsManagerModule.reportFatalException(ExceptionsManagerModule.java:40)\n             at java.lang.reflect.Method.invoke(Native Method)\n             at com.facebook.react.bridge.JavaMethodWrapper.invoke(JavaMethodWrapper.java:374)\n             at com.facebook.react.bridge.JavaModuleWrapper.invoke(JavaModuleWrapper.java:162)\n             at com.facebook.react.bridge.queue.NativeRunnable.run(Native Method)\n             at android.os.Handler.handleCallback(Handler.java:790)\n             at android.os.Handler.dispatchMessage(Handler.java:99)\n             at com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:31)\n             at android.os.Looper.loop(Looper.java:164)\n             at com.facebook.react.bridge.queue.MessageQueueThreadImpl$3.run(MessageQueueThreadImpl.java:194)\n             at java.lang.Thread.run(Thread.java:764)\n01-04 14:56:40.420 28508-28525/? V/FA: Using measurement service\n\nSo do you think adding implements ReactInstanceHolder will also fix the app crash?. @ruslan-bikkinin Nope, the problem isn't resolved, after adding that code I still received the same crash on Staging and Production. I'm also using AsyncStorage while initialising, but the initialisation does not depend on this.\nCan you tell me what the golden rule is here? Use AsyncStorage AFTER codepush has initialised? Is that it?\nThanks!. Good, thanks, I'll try that and post back if it worked.\nOn the mean time, I guess we can disable force-restarting the app.\nPerhaps downloading the patch but updating the next time the app starts naturally might be a good way around that issue until it's resolved, since that won't force the app to restart and thus crash.. So that solution did work for me. I'm no longer receiving a crash.\nBesides that, I did register my react-native-navigation screens (before doing anything else in the code) so I'm sure that helped too.. I'm using startSingleScreenApp and that's absolutely the last thing I call (even after updating code push).. Interesting. Thanks @iTOYS . I'm not 100% sure but I think not, because I now receive this (not sure if it's exactly the same issue though)\nThey both say: java.lang.RuntimeException: An error occurred while executing doInBackground()\nI opened another issue (I know you've already seen that)\nhttps://github.com/Microsoft/react-native-code-push/issues/1257. Got it, do you think it could crash the app in a previous version? (i.e the one I'm using 5.2.0-beta) ?. I got it from Bugsnag, the crash reporting service we're using and it's super weird because the first line doesn't give much information (Error 500: is super generic).. Yes there is such an option but I surely don't have it enabled.\nIn fact I wasn't even aware it exists, and by default it's off.\nStill that looks like a callback, it's not a Promise is it?. Hmm interesting find but if a Promise is unhandled the app is going to crash anyway won't it? (in react-native). Ok I'll try disabling that and check if the issue is gone.\nThanks for eyeballing this with me Artem.. I just noticed there's no such flag in their react-native library, what we've been reading was documentation for node. :/. In case there's no other way to track this, feel free to close the issue once you handle the promise rejection.. Will do, thank you so much Artem.\nI'm closing this for now, feel free to merge the PR, and I'll keep an eye open for incoming crash reports.. Any idea as to when that will be merged?. I'm going to try and post back.\nHere's my code:\n@Override\nprotected void onCreate(@Nullable Bundle savedInstanceState) {\n    // We need this in order to fix https://github.com/Microsoft/react-native-code-push/issues/1257#issuecomment-381944498\n    CodePush.getJSBundleFile(); // we must run this before setLayout takes place\n    // a.k.a before super.onCreate\n\n    super.onCreate(savedInstanceState);\n}\n\nUnfortunately since I'm using react-native-navigation I don't have fine control over when setContentView get's called, do you think calling getJSBundleFile before super.onCreate() will be ok @iTOYS ?. ok, so I can't do that because I receive:\njava.lang.RuntimeException: Unable to start activity ComponentInfo{com.testapp.app.android/com.testapp.app.android.MainActivity}: com.microsoft.codepush.react.CodePushNotInitializedException: A CodePush instance has not been created yet. Have you added it to your app's list of ReactPackages?\n              at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2665)\n              at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2726)\n              at android.app.ActivityThread.-wrap12(ActivityThread.java)\n              at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1477)\n              at android.os.Handler.dispatchMessage(Handler.java:102)\n              at android.os.Looper.loop(Looper.java:154)\n              at android.app.ActivityThread.main(ActivityThread.java:6119)\n              at java.lang.reflect.Method.invoke(Native Method)\n              at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)\n              at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\n           Caused by: com.microsoft.codepush.react.CodePushNotInitializedException: A CodePush instance has not been created yet. Have you added it to your app's list of ReactPackages?\n              at com.microsoft.codepush.react.CodePush.getJSBundleFile(CodePush.java:186)\n              at com.microsoft.codepush.react.CodePush.getJSBundleFile(CodePush.java:181)\n              at com.testapp.app.android.MainActivity.onCreate(MainActivity.java:25)\n              at android.app.Activity.performCreate(Activity.java:6679)\n              at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1118)\n              at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2618)\n              at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2726)\u00a0\n              at android.app.ActivityThread.-wrap12(ActivityThread.java)\u00a0\n              at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1477)\u00a0\n              at android.os.Handler.dispatchMessage(Handler.java:102)\u00a0\n              at android.os.Looper.loop(Looper.java:154)\u00a0\n              at android.app.ActivityThread.main(ActivityThread.java:6119)\u00a0\n              at java.lang.reflect.Method.invoke(Native Method)\u00a0\n              at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)\u00a0\n              at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\n:/\nIs there any other place I can run getJSBundleFile ?\nAt the moment I'm running it in MainApplication.java like so:\n@Override\n    public String getJSBundleFile() {\n        return CodePush.getJSBundleFile();\n    }. Ok so back to ground zero. No idea what to try.. Nope, no success yet @manjeetwadi . Awesome, thanks for the update @alexandergoncharov we'll be patiently standing by.\n:). Unfortunately I was not able to reproduce that at will. We only received that on our crash-reporter (bugsnag).\nMaybe someone else knows more?. Thanks @alexandergoncharov . But I really need that updateDialog I don't want to remove it :/\nSo I'm not running Codepush.sync attached to a react-native component, I'm using it on it's own like so:\nCodepush.sync(options)\nIt's been working fine for a long time now but since I'm using react-native-navigation, the activity that was running at the time I initially ran Codepush.sync(options) is no longer there. Could that be the cause of this?\nDoes react-native-code-push rely on the initial activity always being alive in order to run without issues?. Hey @NickToropov,\nthat looks good, but unfortunately I have no way of reproducing that issue, otherwise I would have checked..\nWe received that crash in bugsnag from one of the production devices unfortunately, and it doesn't happen on my debug device.. Will do, thanks @NickToropov I really appreciate it.. Nope, I hadn't seen it but still this is something that has to be fixed in react-native-code-push right?. I don't know much about this issue as it happened on a clients (production) device for which we received a log and isn't on our hands atm.\nHere's more info in case it helps:\napiLevel: 25\nbatteryLevel: 0.63\nbrand: motorola\ncharging: false\ncpuAbi: [\n  \"armeabi-v7a\",\n  \"armeabi\"\n]\ndpi: 272\nfreeDisk: 10766757888\nfreeMemory: 190145816\nid: d96d5afc-8675-4707-86b6-aa8c8512fb6d\njailbroken: false\nlocale: en_US\nlocationStatus: allowed\nmanufacturer: motorola\nmodel: Moto E (4) Plus\nnetworkAccess: cellular\norientation: portrait\nosBuild: NPRS26.58-45-6\nosName: android\nosVersion: 7.1.1\nscreenDensity: 1.7\nscreenResolution: 1198x720\ntime: 2018-05-11T14:41:53.000Z\ntotalMemory: 201326592\nThe only other piece of info I can attach is the threads at the time of the crash all-though I doubt that will help.\nWhat I can tell you is, that crash probably took place, when the user was asked wether they want to update to the latest version or not, and the clicked on the codepush dialog.. Hi again @alexandergoncharov nope, I haven't tried reproducing that, and I don't think I can reproduce that at will on my device (since I've been clicking that dialog for a long time now without crashes) and I don't have a Moto E (4) Plus on 7.1.1 to test it with the same device as that user.. @NickToropov the PR looks good my friend, can't wait to get that merged.. I'll close this for now in hopes that it's resolved. If it turns out to persist I'll re-open.\nThanks @NickToropov . ",
    "vanBrunneren": "@lostintangent hey thank you for your fast answer ;)\nIn the binary which I have uploaded to TestFlight I had the following configuration in my componentDidMount of the main Component:\n```\ncomponentDidMount() {\n    codePush.sync({ installMode: codePush.InstallMode.IMMEDIATE });\n\n    AppState.addEventListener(\"change\", (newState) => {\n        newState === \"active\" && codePush.sync({ installMode: codePush.InstallMode.IMMEDIATE });\n    });\n\n}\n```\nI changed this method in my update in code push. But as I'm realizing this, the change in the updated file doesn't have any impact on this because code push hasn't updated my file right?\nMy AppDelegate looks like this in the CodeLocation Session:\n```\nifdef DEBUG\njsCodeLocation = [NSURL URLWithString:@\"http://localhost:8081/index.ios.bundle?platform=ios&dev=true\"];\n\nelse\njsCodeLocation = [CodePush bundleURL];\n\nendif\n```\nDo you need more of the AppDelegate?\nI'm releasing my updates with this commands:\ncode-push release-react <AppName> ios -> then it goes to the Staging\ncode-push promote <AppName> Staging Production -> and its live\nYes if it crashes and I open the app again it returns (rollback) to the binary version. The rollback works as it should I guess, because the new release has an error (or code-push think it has an error \ud83d\ude04 )  and it returns to the binary version.\nthank you for your help\n. maybe this helps in this case, and maybe you can tell me that this isn't a issue with code-push.\nI managed to get an error from fabric.io:\nFatal Exception: RCTFatalException: Unhandled JS Exception: Native module cannot be null.\n0  CoreFoundation                 0x180f12db0 __exceptionPreprocess\n1  libobjc.A.dylib                0x180577f80 objc_exception_throw\n2  CoreFoundation                 0x180f12cf8 -[NSException initWithCoder:]\n3  Akionis.ch                     0x100187190 RCTFatal (RCTAssert.m:137)\n4  Akionis.ch                     0x1001820a0 -[RCTExceptionsManager reportFatalException:stack:exceptionId:] (RCTExceptionsManager.m:64)\n5  CoreFoundation                 0x180f18a60 __invoking___\n6  CoreFoundation                 0x180e10488 -[NSInvocation invoke]\n7  CoreFoundation                 0x180e14db0 -[NSInvocation invokeWithTarget:]\n8  Akionis.ch                     0x100185978 -[RCTModuleMethod invokeWithBridge:module:arguments:] (RCTModuleMethod.m:499)\n9  Akionis.ch                     0x1001a6ec0 -[RCTBatchedBridge _handleRequestNumber:moduleID:methodID:params:] (RCTBatchedBridge.m:981)\n10 Akionis.ch                     0x1001a68b4 __33-[RCTBatchedBridge handleBuffer:]_block_invoke.319 (RCTBatchedBridge.m:909)\n11 libdispatch.dylib              0x18095d4bc _dispatch_call_block_and_release\n12 libdispatch.dylib              0x18095d47c _dispatch_client_callout\n13 libdispatch.dylib              0x1809694c0 _dispatch_queue_drain\n14 libdispatch.dylib              0x180960f80 _dispatch_queue_invoke\n15 libdispatch.dylib              0x18095d47c _dispatch_client_callout\n16 libdispatch.dylib              0x18096b914 _dispatch_root_queue_drain\n17 libdispatch.dylib              0x18096b0b0 _dispatch_worker_thread3\n18 libsystem_pthread.dylib        0x180b75470 _pthread_wqthread\n19 libsystem_pthread.dylib        0x180b75020 start_wqthread\nbut I still don't know why this is happening on TestFlight and when I run it locally it works...\n. I don't really know if this helps you an if this is what you want but thats the best I can get:\n```\n # Crashlytics - plaintext stacktrace downloaded by Pascal Brunner at Mon, 27 Jun 2016 12:34:22 GMT\nURL: https://fabric.io/couponplus/ios/apps/ch.aktionis.aktionis/issues/576d0118ffcdc04250c06ecc/sessions/eb1ada9dc1924623b1c8c59c085be20d\nOrganization: CouponPlus\nPlatform: ios\nApplication: Aktionis\nVersion: 2.0.2 (14)\nBundle Identifier: ch.aktionis.Aktionis\nIssue: 12\nSession: eb1ada9dc1924623b1c8c59c085be20d\nDate: 2016-06-26T17:54:15Z\nFatal Exception: RCTFatalException: Unhandled JS Exception: this._nativeModule.addListener is not a function. (In 'this._nativeModule.addListener(e)', 'this._nativeModule.addListener' is undefined)\n0  CoreFoundation                 0x1820c2db0 __exceptionPreprocess\n1  libobjc.A.dylib                0x181727f80 objc_exception_throw\n2  CoreFoundation                 0x1820c2cf8 -[NSException initWithCoder:]\n3  Akionis.ch                     0x1000e3190 RCTFatal (RCTAssert.m:137)\n4  Akionis.ch                     0x1000de0a0 -[RCTExceptionsManager reportFatalException:stack:exceptionId:] (RCTExceptionsManager.m:64)\n5  CoreFoundation                 0x1820c8a60 __invoking\n6  CoreFoundation                 0x181fc0488 -[NSInvocation invoke]\n7  CoreFoundation                 0x181fc4db0 -[NSInvocation invokeWithTarget:]\n8  Akionis.ch                     0x1000e1978 -[RCTModuleMethod invokeWithBridge:module:arguments:] (RCTModuleMethod.m:499)\n9  Akionis.ch                     0x100102ec0 -[RCTBatchedBridge handleRequestNumber:moduleID:methodID:params:] (RCTBatchedBridge.m:981)\n10 Akionis.ch                     0x1001028b4 33-[RCTBatchedBridge handleBuffer:]_block_invoke.319 (RCTBatchedBridge.m:909)\n11 libdispatch.dylib              0x181b0d4bc _dispatch_call_block_and_release\n12 libdispatch.dylib              0x181b0d47c _dispatch_client_callout\n13 libdispatch.dylib              0x181b194c0 _dispatch_queue_drain\n14 libdispatch.dylib              0x181b10f80 _dispatch_queue_invoke\n15 libdispatch.dylib              0x181b0d47c _dispatch_client_callout\n16 libdispatch.dylib              0x181b1b914 _dispatch_root_queue_drain\n17 libdispatch.dylib              0x181b1b0b0 _dispatch_worker_thread3\n18 libsystem_pthread.dylib        0x181d25470 _pthread_wqthread\n19 libsystem_pthread.dylib        0x181d25020 start_wqthread\n-1. com.apple.xpc.uncorkq\n0  libsystem_kernel.dylib         0x181c40fd8 mach_msg_trap + 8\n1  libsystem_kernel.dylib         0x181c40e54 mach_msg + 72\n2  libxpc.dylib                   0x181d6b14c xpc_pipe_routine + 256\n3  libxpc.dylib                   0x181d5df18 _xpc_interface_routine + 200\n4  libxpc.dylib                   0x181d65b7c _xpc_bootstrap_services + 120\n5  libdispatch.dylib              0x181b0d47c _dispatch_client_callout + 16\n6  libdispatch.dylib              0x181b18728 _dispatch_barrier_sync_f_invoke + 100\n7  libxpc.dylib                   0x181d5a24c _xpc_dyld_image_callback + 308\n8  Akionis.ch                     0x1200f885c (Missing)\n9  Akionis.ch                     0x1201016a4 (Missing)\n10 Akionis.ch                     0x1200f8a0c (Missing)\n11 Akionis.ch                     0x1200fdf78 (Missing)\n12 libdispatch.dylib              0x181b3d6a0 (Missing)\n13 UIFoundation                   0x1871a751c init_UIApplicationLinkedOnOrAfter + 48\n14 UIFoundation                   0x1871a3fbc +[NSTextStorage initialize] + 80\n15 libobjc.A.dylib                0x181728fc8 _class_initialize + 800\n16 libobjc.A.dylib                0x18172f8b8 lookUpImpOrForward + 184\n17 libobjc.A.dylib                0x181739d78 _objc_msgSend_uncached_impcache + 56\n18 Akionis.ch                     0x10017eab0 -[RCTText initWithFrame:] (RCTText.m:26)\n19 Akionis.ch                     0x1001799f8 -[RCTTextManager view] (RCTTextManager.m:36)\n20 Akionis.ch                     0x100129f1c -[RCTComponentData createViewWithTag:] (RCTComponentData.m:92)\n21 Akionis.ch                     0x100125938 50-[RCTUIManager createView:viewName:rootTag:props:]_block_invoke (RCTUIManager.m:949)\n22 libdispatch.dylib              0x181b0d4bc _dispatch_call_block_and_release + 24\n23 libdispatch.dylib              0x181b0d47c _dispatch_client_callout + 16\n24 libdispatch.dylib              0x181b12b84 _dispatch_main_queue_callback_4CF + 1844\n25 CoreFoundation                 0x182078d50 __CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE + 12\n26 CoreFoundation                 0x182076bb8 __CFRunLoopRun + 1628\n27 CoreFoundation                 0x181fa0c50 CFRunLoopRunSpecific + 384\n28 GraphicsServices               0x183888088 GSEventRunModal + 180\n29 UIKit                          0x18728a088 UIApplicationMain + 204\n30 Akionis.ch                     0x100022c04 main (main.m:16)\n31 libdispatch.dylib              0x181b3e8b8 (Missing)\n0. com.apple.NSURLSession-work\n0  libsystem_kernel.dylib         0x181c5bf48 psynch_mutexdrop + 8\n1  libsystem_pthread.dylib        0x181d2a07c _pthread_mutex_unlock_drop + 68\n2  libobjc.A.dylib                0x181729318 monitor_tt::leave() + 16\n3  libobjc.A.dylib                0x1817290c8 _class_initialize + 1056\n4  libobjc.A.dylib                0x18172f8b8 lookUpImpOrForward + 184\n5  libobjc.A.dylib                0x181739d78 _objc_msgSend_uncached_impcache + 56\n6  CFNetwork                      0x1827f64c8 -[NSHTTPCookieStorage cookiesForURL:] + 172\n7  CFNetwork                      0x1827261e4 -[__NSURLBackgroundSession requestWithCookiesApplied:] + 232\n8  CFNetwork                      0x1827274cc -[__NSURLBackgroundSession _onqueue_uploadTaskForRequest:uploadFile:bodyData:completion:] + 336\n9  CFNetwork                      0x182727288 __80-[__NSURLBackgroundSession uploadTaskForRequest:uploadFile:bodyData:completion:]_block_invoke + 40\n10 CFNetwork                      0x182726788 __68-[__NSURLBackgroundSession performBlockOnQueueAndRethrowExceptions:]_block_invoke + 76\n11 libdispatch.dylib              0x181b0d47c _dispatch_client_callout + 16\n12 libdispatch.dylib              0x181b18728 _dispatch_barrier_sync_f_invoke + 100\n13 CFNetwork                      0x1827266e8 -[__NSURLBackgroundSession performBlockOnQueueAndRethrowExceptions:] + 144\n14 CFNetwork                      0x1827271e8 -[__NSURLBackgroundSession uploadTaskForRequest:uploadFile:bodyData:completion:] + 204\n15 Akionis.ch                     0x1001c82cc -[CLSNetworkClient startNewUploadRequest:filePath:] (CLSNetworkClient.m:206)\n16 Akionis.ch                     0x1001c89f4 __77-[CLSNetworkClient checkSession:forTasksMatchingDescription:completionBlock:]_block_invoke (CLSNetworkClient.m:266)\n17 CFNetwork                      0x1827d36c8 __46-[NSURLSession getTasksWithCompletionHandler:]_block_invoke_2 + 232\n18 CFNetwork                      0x18272cc5c __67-[__NSURLBackgroundSession _onqueue_getTasksWithCompletionHandler:]_block_invoke + 28\n19 Foundation                     0x182a7c540 __NSBLOCKOPERATION_IS_CALLING_OUT_TO_A_BLOCK + 16\n20 Foundation                     0x1829ce870 -[NSBlockOperation main] + 96\n21 Foundation                     0x1829bee48 -[__NSOperationInternal _start:] + 604\n22 Foundation                     0x182a7e934 __NSOQSchedule_f + 224\n23 libdispatch.dylib              0x181b0d47c _dispatch_client_callout + 16\n24 libdispatch.dylib              0x181b194c0 _dispatch_queue_drain + 864\n25 libdispatch.dylib              0x181b10f80 _dispatch_queue_invoke + 464\n26 libdispatch.dylib              0x181b1b390 _dispatch_root_queue_drain + 728\n27 libdispatch.dylib              0x181b1b0b0 _dispatch_worker_thread3 + 112\n28 libsystem_pthread.dylib        0x181d25470 _pthread_wqthread + 1092\n29 libsystem_pthread.dylib        0x181d25020 start_wqthread + 4\n1. com.apple.libdispatch-manager\n0  libsystem_kernel.dylib         0x181c5d4d8 kevent_qos + 8\n1  libdispatch.dylib              0x181b207d8 _dispatch_mgr_invoke + 232\n2  libdispatch.dylib              0x181b0f648 _dispatch_source_invoke + 50\n2. Thread\n0  libsystem_kernel.dylib         0x181c5cb48 __workq_kernreturn + 8\n1  libsystem_pthread.dylib        0x181d25530 _pthread_wqthread + 1284\n2  libsystem_pthread.dylib        0x181d25020 start_wqthread + 4\nCrashed: com.twitter.crashlytics.ios.exception\n0  Akionis.ch                     0x1001c6a74 CLSProcessRecordAllThreads (CLSProcess.c:376)\n1  Akionis.ch                     0x1001c6a74 CLSProcessRecordAllThreads (CLSProcess.c:376)\n2  Akionis.ch                     0x1001c6e94 CLSProcessRecordAllThreads (CLSProcess.c:403)\n3  Akionis.ch                     0x1001b7b84 CLSHandler (CLSHandler.m:24)\n4  Akionis.ch                     0x1001c5198 __CLSExceptionRecord_block_invoke (CLSException.mm:197)\n5  libdispatch.dylib              0x181b0d47c _dispatch_client_callout + 16\n6  libdispatch.dylib              0x181b18728 _dispatch_barrier_sync_f_invoke + 100\n7  Akionis.ch                     0x1001c4c44 CLSExceptionRecord (CLSException.mm:206)\n8  Akionis.ch                     0x1001c4a80 CLSExceptionRecordNSException (CLSException.mm:102)\n9  Akionis.ch                     0x1001c46e0 CLSTerminateHandler() (CLSException.mm:259)\n10 libc++abi.dylib                0x18171af44 std::__terminate(void ()()) + 16\n11 libc++abi.dylib                0x18171a85c __cxxabiv1::exception_cleanup_func(_Unwind_Reason_Code, _Unwind_Exception) + 134\n12 libobjc.A.dylib                0x181728094 _objc_exception_destructor(void*) + 330\n13 Akionis.ch                     0x10010302c -[RCTBatchedBridge _handleRequestNumber:moduleID:methodID:params:] (RCTBatchedBridge.m:986)\n14 Akionis.ch                     0x1001028b4 __33-[RCTBatchedBridge handleBuffer:]_block_invoke.319 (RCTBatchedBridge.m:909)\n15 libdispatch.dylib              0x181b0d4bc _dispatch_call_block_and_release + 24\n16 libdispatch.dylib              0x181b0d47c _dispatch_client_callout + 16\n17 libdispatch.dylib              0x181b194c0 _dispatch_queue_drain + 864\n18 libdispatch.dylib              0x181b10f80 _dispatch_queue_invoke + 464\n19 libdispatch.dylib              0x181b0d47c _dispatch_client_callout + 16\n20 libdispatch.dylib              0x181b1b914 _dispatch_root_queue_drain + 2140\n21 libdispatch.dylib              0x181b1b0b0 _dispatch_worker_thread3 + 112\n22 libsystem_pthread.dylib        0x181d25470 _pthread_wqthread + 1092\n23 libsystem_pthread.dylib        0x181d25020 start_wqthread + 4\n4. Thread\n0  libsystem_kernel.dylib         0x181c5c41c __semwait_signal + 8\n1  libsystem_c.dylib              0x181b7922c nanosleep + 212\n2  libc++.1.dylib                 0x1816f13b4 std::__1::this_thread::sleep_for(std::__1::chrono::duration > const&) + 84\n3  JavaScriptCore                 0x185cc2690 bmalloc::Heap::scavenge(std::__1::unique_lock&, std::__1::chrono::duration >) + 188\n4  JavaScriptCore                 0x185cc2340 bmalloc::Heap::concurrentScavenge() + 84\n5  JavaScriptCore                 0x185cc4ad8 bmalloc::AsyncTask::entryPoint() + 100\n6  JavaScriptCore                 0x185cc4a68 bmalloc::AsyncTask::pthreadEntryPoint(void*) + 12\n7  libsystem_pthread.dylib        0x181d27b28 _pthread_body + 156\n8  libsystem_pthread.dylib        0x181d27a8c _pthread_body + 154\n9  libsystem_pthread.dylib        0x181d25028 thread_start + 4\n5. WebThread\n0  libsystem_kernel.dylib         0x181c40fd8 mach_msg_trap + 8\n1  libsystem_kernel.dylib         0x181c40e54 mach_msg + 72\n2  CoreFoundation                 0x182078c60 __CFRunLoopServiceMachPort + 196\n3  CoreFoundation                 0x182076964 __CFRunLoopRun + 1032\n4  CoreFoundation                 0x181fa0c50 CFRunLoopRunSpecific + 384\n5  WebCore                        0x185f8e61c RunWebThread(void*) + 456\n6  libsystem_pthread.dylib        0x181d27b28 _pthread_body + 156\n7  libsystem_pthread.dylib        0x181d27a8c _pthread_body + 154\n8  libsystem_pthread.dylib        0x181d25028 thread_start + 4\n6. JavaScriptCore::Marking\n0  libsystem_kernel.dylib         0x181c5bf24 __psynch_cvwait + 8\n1  libsystem_pthread.dylib        0x181d26ce8 _pthread_cond_wait + 648\n2  libc++.1.dylib                 0x1816b342c std::__1::condition_variable::wait(std::__1::unique_lock&) + 56\n3  JavaScriptCore                 0x185a752cc JSC::GCThread::waitForNextPhase() + 144\n4  JavaScriptCore                 0x185a75364 JSC::GCThread::gcThreadMain() + 84\n5  JavaScriptCore                 0x18574af14 WTF::threadEntryPoint(void) + 212\n6  JavaScriptCore                 0x18574ae24 WTF::wtfThreadEntryPoint(void) + 24\n7  libsystem_pthread.dylib        0x181d27b28 _pthread_body + 156\n8  libsystem_pthread.dylib        0x181d27a8c _pthread_body + 154\n9  libsystem_pthread.dylib        0x181d25028 thread_start + 4\n7. com.facebook.react.ShadowQueue\n0  libsystem_kernel.dylib         0x181c5bf24 __psynch_cvwait + 8\n1  libsystem_pthread.dylib        0x181d26ce8 _pthread_cond_wait + 648\n2  libobjc.A.dylib                0x1817292b8 monitor_tt::wait() + 28\n3  libobjc.A.dylib                0x181728ef8 _class_initialize + 592\n4  libobjc.A.dylib                0x18172f8b8 lookUpImpOrForward + 184\n5  libobjc.A.dylib                0x181739d78 _objc_msgSend_uncached_impcache + 56\n6  Akionis.ch                     0x10018224c -[RCTShadowText buildTextStorageForWidth:widthMode:] (RCTShadowText.m:125)\n7  Akionis.ch                     0x1001836c4 RCTMeasure (RCTShadowText.m:37)\n8  Akionis.ch                     0x1000e77e8 layoutNode (Layout.c:616)\n9  Akionis.ch                     0x1000e7f1c layoutNode (Layout.c:816)\n10 Akionis.ch                     0x1000e84cc layoutNode (Layout.c:960)\n11 Akionis.ch                     0x1000e84cc layoutNode (Layout.c:960)\n12 Akionis.ch                     0x1000e84cc layoutNode (Layout.c:960)\n13 Akionis.ch                     0x1000de7d0 -[RCTRootShadowView collectViewsWithUpdatedFrames] (RCTRootShadowView.m:40)\n14 Akionis.ch                     0x100122004 -[RCTUIManager uiBlockWithLayoutUpdateForRootView:] (RCTUIManager.m:514)\n15 Akionis.ch                     0x10012694c -[RCTUIManager _layoutAndMount] (RCTUIManager.m:1062)\n16 Akionis.ch                     0x100102dc0 __36-[RCTBatchedBridge batchDidComplete]_block_invoke (RCTBatchedBridge.m:948)\n17 libdispatch.dylib              0x181b0d4bc _dispatch_call_block_and_release + 24\n18 libdispatch.dylib              0x181b0d47c _dispatch_client_callout + 16\n19 libdispatch.dylib              0x181b194c0 _dispatch_queue_drain + 864\n20 libdispatch.dylib              0x181b10f80 _dispatch_queue_invoke + 464\n21 libdispatch.dylib              0x181b1b390 _dispatch_root_queue_drain + 728\n22 libdispatch.dylib              0x181b1b0b0 _dispatch_worker_thread3 + 112\n23 libsystem_pthread.dylib        0x181d25470 _pthread_wqthread + 1092\n24 libsystem_pthread.dylib        0x181d25020 start_wqthread + 4\n8. com.twitter.crashlytics.ios.binary-images\n0  libsystem_kernel.dylib         0x181c5bf6c __psynch_mutexwait + 8\n1  libsystem_pthread.dylib        0x181d2a39c _pthread_mutex_lock_wait + 96\n2  libsystem_pthread.dylib        0x181d2a57c _pthread_mutex_lock_slow + 296\n3  libdispatch.dylib              0x181b3caec (Missing)\n4  libdispatch.dylib              0x181b3d590 (Missing)\n5  Akionis.ch                     0x1001e3690 CLSMachOSliceGetExecutablePath (CLSMachO.m:264)\n6  Akionis.ch                     0x1001af500 __CLSBinaryImageChanged_block_invoke (CLSBinaryImage.m:503)\n7  libdispatch.dylib              0x181b0d4bc _dispatch_call_block_and_release + 24\n8  libdispatch.dylib              0x181b0d47c _dispatch_client_callout + 16\n9  libdispatch.dylib              0x181b194c0 _dispatch_queue_drain + 864\n10 libdispatch.dylib              0x181b10f80 _dispatch_queue_invoke + 464\n11 libdispatch.dylib              0x181b0d47c _dispatch_client_callout + 16\n12 libdispatch.dylib              0x181b1b914 _dispatch_root_queue_drain + 2140\n13 libdispatch.dylib              0x181b1b0b0 _dispatch_worker_thread3 + 112\n14 libsystem_pthread.dylib        0x181d25470 _pthread_wqthread + 1092\n15 libsystem_pthread.dylib        0x181d25020 start_wqthread + 4\n9. com.twitter.crashlytics.ios.MachExceptionServer\n0  libsystem_kernel.dylib         0x181c40fd8 mach_msg_trap + 8\n1  libsystem_kernel.dylib         0x181c40e54 mach_msg + 72\n2  Akionis.ch                     0x1001b2bdc CLSMachExceptionServer (CLSMachException.c:179)\n3  libsystem_pthread.dylib        0x181d27b28 _pthread_body + 156\n4  libsystem_pthread.dylib        0x181d27a8c _pthread_body + 154\n5  libsystem_pthread.dylib        0x181d25028 thread_start + 4\n10. Thread\n0  libsystem_kernel.dylib         0x181c5cb48 __workq_kernreturn + 8\n1  libsystem_pthread.dylib        0x181d25530 _pthread_wqthread + 1284\n2  libsystem_pthread.dylib        0x181d25020 start_wqthread + 4\n11. com.facebook.react.JavaScript\n0  libsystem_kernel.dylib         0x181c40fd8 mach_msg_trap + 8\n1  libsystem_kernel.dylib         0x181c40e54 mach_msg + 72\n2  CoreFoundation                 0x182078c60 CFRunLoopServiceMachPort + 196\n3  CoreFoundation                 0x182076964 __CFRunLoopRun + 1032\n4  CoreFoundation                 0x181fa0c50 CFRunLoopRunSpecific + 384\n5  Akionis.ch                     0x1000fabf8 +[RCTJSCExecutor runRunLoopThread] (RCTJSCExecutor.mm:233)\n6  Foundation                     0x182a97e4c __NSThread__start + 1000\n7  libsystem_pthread.dylib        0x181d27b28 _pthread_body + 156\n8  libsystem_pthread.dylib        0x181d27a8c _pthread_body + 154\n9  libsystem_pthread.dylib        0x181d25028 thread_start + 4\n12. Thread\n0  libsystem_kernel.dylib         0x181c5cb48 __workq_kernreturn + 8\n1  libsystem_pthread.dylib        0x181d25530 _pthread_wqthread + 1284\n2  libsystem_pthread.dylib        0x181d25020 start_wqthread + 4\n13. Thread\n0  libsystem_kernel.dylib         0x181c5cb48 __workq_kernreturn + 8\n1  libsystem_pthread.dylib        0x181d25530 _pthread_wqthread + 1284\n2  libsystem_pthread.dylib        0x181d25020 start_wqthread + 4\n14. JavaScriptCore::Marking\n0  libsystem_kernel.dylib         0x181c5bf24 __psynch_cvwait + 8\n1  libsystem_pthread.dylib        0x181d26ce8 _pthread_cond_wait + 648\n2  libc++.1.dylib                 0x1816b342c std::__1::condition_variable::wait(std::__1::unique_lock&) + 56\n3  JavaScriptCore                 0x185a752cc JSC::GCThread::waitForNextPhase() + 144\n4  JavaScriptCore                 0x185a75364 JSC::GCThread::gcThreadMain() + 84\n5  JavaScriptCore                 0x18574af14 WTF::threadEntryPoint(void) + 212\n6  JavaScriptCore                 0x18574ae24 WTF::wtfThreadEntryPoint(void) + 24\n7  libsystem_pthread.dylib        0x181d27b28 _pthread_body + 156\n8  libsystem_pthread.dylib        0x181d27a8c _pthread_body + 154\n9  libsystem_pthread.dylib        0x181d25028 thread_start + 4\n15. com.apple.NSURLConnectionLoader\n0  libsystem_kernel.dylib         0x181c40fd8 mach_msg_trap + 8\n1  libsystem_kernel.dylib         0x181c40e54 mach_msg + 72\n2  CoreFoundation                 0x182078c60 CFRunLoopServiceMachPort + 196\n3  CoreFoundation                 0x182076964 __CFRunLoopRun + 1032\n4  CoreFoundation                 0x181fa0c50 CFRunLoopRunSpecific + 384\n5  CFNetwork                      0x182721c68 +[NSURLConnection(Loader) _resourceLoadLoop:] + 412\n6  Foundation                     0x182a97e4c __NSThread__start + 1000\n7  libsystem_pthread.dylib        0x181d27b28 _pthread_body + 156\n8  libsystem_pthread.dylib        0x181d27a8c _pthread_body + 154\n9  libsystem_pthread.dylib        0x181d25028 thread_start + 4\n16. AVAudioSession Notify Thread\n0  libsystem_kernel.dylib         0x181c40fd8 mach_msg_trap + 8\n1  libsystem_kernel.dylib         0x181c40e54 mach_msg + 72\n2  CoreFoundation                 0x182078c60 __CFRunLoopServiceMachPort + 196\n3  CoreFoundation                 0x182076964 __CFRunLoopRun + 1032\n4  CoreFoundation                 0x181fa0c50 CFRunLoopRunSpecific + 384\n5  libAVFAudio.dylib              0x1887199e0 GenericRunLoopThread::Entry(void) + 164\n6  libAVFAudio.dylib              0x1886ee75c CAPThread::Entry(CAPThread) + 84\n7  libsystem_pthread.dylib        0x181d27b28 _pthread_body + 156\n8  libsystem_pthread.dylib        0x181d27a8c _pthread_body + 154\n9  libsystem_pthread.dylib        0x181d25028 thread_start + 4\n17. GAIThread\n0  libsystem_kernel.dylib         0x181c40fd8 mach_msg_trap + 8\n1  libsystem_kernel.dylib         0x181c40e54 mach_msg + 72\n2  CoreFoundation                 0x182078c60 CFRunLoopServiceMachPort + 196\n3  CoreFoundation                 0x182076964 __CFRunLoopRun + 1032\n4  CoreFoundation                 0x181fa0c50 CFRunLoopRunSpecific + 384\n5  Foundation                     0x1829b0cfc -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 308\n6  Foundation                     0x182a06030 -[NSRunLoop(NSRunLoop) run] + 88\n7  Akionis.ch                     0x100042d98 +[GAI threadMain:] (GAI.m:229)\n8  Foundation                     0x182a97e4c __NSThread__start + 1000\n9  libsystem_pthread.dylib        0x181d27b28 _pthread_body + 156\n10 libsystem_pthread.dylib        0x181d27a8c _pthread_body + 154\n11 libsystem_pthread.dylib        0x181d25028 thread_start + 4\n```\n. this is my package.json:\n{\n  ...\n  },\n  \"scripts\": {\n    \"start\": \"node_modules/react-native/packager/packager.sh\"\n  },\n  \"dependencies\": {\n    \"@exponent/react-native-navigator\": \"^0.4.5\",\n    \"alt\": \"^0.18.4\",\n    \"react\": \"^15.1.0\",\n    \"react-native\": \"^0.27.0\",\n    \"react-native-activity-view\": \"^0.2.8\",\n    \"react-native-android-statusbar\": \"^0.1.2\",\n    \"react-native-carousel\": \"^0.8.0\",\n    \"react-native-code-push\": \"^1.7.3-beta\",\n    \"react-native-device-info\": \"^0.9.3\",\n    \"react-native-facebook-login\": \"^1.2.0\",\n    \"react-native-google-analytics-bridge\": \"^2.0.0\",\n    \"react-native-htmlview\": \"^0.5.0\",\n    \"react-native-maps\": \"^0.5.0\",\n    \"react-native-radio-buttons\": \"^0.11.0\",\n    \"react-native-send-intent\": \"^1.0.10\",\n    \"react-native-vector-icons\": \"^2.0.2\",\n    \"rnpm\": \"^1.7.0\"\n  },\n  \"devDependencies\": {\n    \"rnpm-plugin-upgrade\": \"^0.26.0\"\n  }\n}\n. Well after hours of digging / reinstalling and linking modules we decided to cancel this release and temporary remove code-push from our project. \nWe tried everything from changing the RN Version to changing / updating every plugin and we weren't able to fix this problem. We decided then to build a Release without the great feature of Code-Push, because we had to release as soon as possible. Our plan for now is to make our build stabler and as soon as we have time for this we're going to try Code-Push again.\nI think in this issue one of the native Plugins was installed and configured with a wrong version of another plugin or the RN version or something like this. But nevermind we found another solution.\nI'm closing this for now until I hit the same error (but hopfully not \ud83d\ude04 ). Thank you for your awesome plugin and the great support \ncheers \ud83c\udf7b \n. @ivpusic no at the moment we don't have the capacity to give code-push another shot. I hope we're getting this in the near future. ",
    "ivpusic": "@vanBrunneren any updates on this problem? are you again using code-push? how did you solve mentioned issue?. are you planning to integrate these changes soon? This is the only thing blocking me from migrating to RN 0.40.. awesome! thanks a lot for your time and effort!. @sergey-akhalkov sorry for delay.\n```jsx\n// example 1:\n\n// example 2:\n\n```\nrelease commands\nbash\ncode-push release-react -m myapp-ios ios\ncode-push promote -m myapp-ios Staging Production\nI can confirm that the same is happening also for RN 0.42-RC3 + RNCP v1.17.0-beta. @sergey-akhalkov sorry for a delay...so all images are showing up correctly in 90% percent of the cases. When 10% happen, then if I have 20 images on the screen, maybe 15 of them won't show...it is really random. How I \"fix\" this, is just to navigate to another tab in the application, go back, and then they will show up.\nAs I said before....this happens only after I push some fix via code-push. If the application did not download code-push update, then this never happens.. I am using https://github.com/react-community/react-navigation for navigation.\nTnx for tip regarding loading images. Will do it that way in the future. However this issue happens also for images which are loaded over network (https). yes. ",
    "thomasttvo": "Experiencing this right now. When I archived the project, which includes code-push, I needed to remove a bunch of RN projects from the Libraries folder to prevent duplication error since we already load them with the Podfile. However, this action seemed to prevent the app from requiring some native modules when it runs. . [Fixed]\n@sergey-akhalkov just found the fix yesterday. When I removed the Libraries projects, it caused some associated linked binaries to become inactive/conflicted as no reference to them was found, so:\n\nI just had to remove them from linked binaries and keep using the Podfile.\nAlternatively, I could keep the Libraries projects in there and delete the references from the Podfile.\n\nIn the end, I realized I misread the documentation. I thought the Podfile section and the linking Libraries section are 2 different steps, but it was actually 2 different alternatives.. ",
    "corymsmith": "No worries!\n. ",
    "brunobar79": "Hey Geoffrey, thanks for looking into this.\nIt happens every single time I push an update.\nOnce I launch the app, and there'a a new update available I think it tries\nto \"hot swap\" bundles and it crashes.\nAbout my install mode,is set to ON _NEXT_RESUME,\nBut I'd like to note that this crash happens with the app running in\nforeground.\nLaunch the app => check updates => download new bundle => restarting app =>\nloading new bundle => crash.\nLet me know if you need more info.\nThanks!\nOn Thursday, June 30, 2016, Geoffrey Goh notifications@github.com\n<javascript:_e(%7B%7D,'cvml','notifications@github.com');> wrote:\n\nI'm looking into it. It looks like it went into the legacy loadBundle\nbehaviour, which would indicate that some exception happened. And inside\nthere getCurrentActivity() is somehow returning null, which is bizarre.\nDoes this happen consistently everytime you send out an update?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/408#issuecomment-229836679,\nor mute the thread\nhttps://github.com/notifications/unsubscribe/ABMKWuf4PKMD-FMZkG7FzCBnzgwE7CEvks5qRHXIgaJpZM4JCvuz\n.\n. Just a quick update:  I've changed the installMode from ON_NEXT_RESUME to ON_NEXT_RESTART and it's working fine.\n. Hey guys, I'm sorry but I won't be in the office until next Tuesday but\nI'll add the logs then and I'll update this thread.\n\nI can also confirm that I didn't flag any release as mandatory.\nOn Fri, Jul 1, 2016 at 2:37 PM, Jonathan Carter notifications@github.com\nwrote:\n\n@brunobar79 https://github.com/brunobar79 Your comment about using\nON_NEXT_RESTART vs ON_NEXT_RESUME confirms that the issue is with our\n\"programmatic restart\" logic on Android. Thanks for confirming that! We're\ngoing to submit a fix that we believe will help with this, but\nunfortunately, we don't know the exact root cause and can't repro the\nproblem, so any help with diagnosing this would be hugely helpful. Thanks\nagain!\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/408#issuecomment-230018797,\nor mute the thread\nhttps://github.com/notifications/unsubscribe/ABMKWsfvGPLbJv4ZXdNE-Uk9o9AiLZ1yks5qRV5TgaJpZM4JCvuz\n.\n. @silhouettes  @lostintangent  @geof90  Hey guys, sorry for the delay. I just upgraded to 1.13.2-beta and it's working perfectly. Thanks!\n\n\ud83d\udcaf \ud83d\udcaf \ud83d\udcaf \ud83d\udcaf \ud83d\udcaf \n. ",
    "mtunique": "Find another way to implement it or disable Werror in subprojects.\n. Thanks.But the latest bits from this repo can't resolve the issue.\n. @geof90  Thanks. It is fixed.\n. Maybe it is better than a separate method to set the ReactInstanceManager.\n. It work in react native 0.29. Thanks.\n. ",
    "dorongutman": "Sorry, this is NOT true - the deprecation is only for keyboard related events.closing.\n. ",
    "senthilsivanath": "Would take code push to next level. Must have. Eagerly waiting. \n. ",
    "patniko": "Closing this issue out for now. It is on our backlog for execution in the future.. Currently not something we are planning to execute on. If there is more demand for it we will re-investigate.. Sure thing. Setting up a test right now to see if I can reproduce the issue before @sergey-akhalkov becomes available again.. Sorry for the delay on this one! PR has been merged and the latest npm published. Let us know if you continue having any issues your end with the new package.. @max-mironov @sergey-akhalkov Can either of you take care of the backport request today?. Hi @yellowChao, we aren't currently planning to support this. If it is something more users request we will re-open and investigate further, but right now our existing backlog won't permit it.. Reopening this @yellowChao because we are now revisiting this issue and will support it in the near future.. Hi @yaronlevi, please see my response in #1099 for more information. You'll be happy to know we have our eyes already on the problem.. Prioritized for investigation later on. Please take a look @sergey-akhalkov when you have some bandwidth.. Thanks for the feedback @kelset!. @panarasi recently demonstrated an approach to A/B testing utilizing Mobile Center's Push, Analytics and CodePush technologies. Using our Mobile Center Push SDK he was able to define two user segments and push a notification to each with a different deployment key specified in the payload. When one of the users clicked on the notification to launch his application it grabbed the deployment key specified in the notification and checked the CodePush services for an update against that key. After the users app was updated he relied on Mobile Center's Analytics to determine the solution with the best reception.\nWe're working to further enhance these types of capabilities and workflows today so expect more features, documentation and breakdowns in the not so distant future covering this and similar topics.. I believe this is what you are looking for @esutton. \nhttps://www.youtube.com/watch?v=f_-S0ZhVmvQ&list=PLFHvL21g9bk3RxJ1Ut5nR_uTZFVOxu522&index=11\nThe use case you are trying to achieve depends on how the devices are shared. You could theoretically identify a deployment key on login for that user and make sure their device gets updated to the instructor or service tech deployment if they aren't already on the correct one prior to use. . Thanks @cooperka!. Closing this for now as the rejection appears to attributed to the use of react-blur which accesses private API's. If you remove this package, resubmit and still are denied please reopen and we will continue the discussion.. Thanks for the input @just4fun. We'll lookout for your followup once you get the results of your latest submission.. Not quite sure this PR represents an improvement on our existing docs. Closing this for now.. Hi @feiyingx, we got a bit backlogged working on the new CodePush service and code-signing features, but are still underway. We are wrapping up creating the management service so CLI users won't run into 503's during releases, but are a bit behind on the service responsible for handling device checkins. Realistic timeframe would be towards the end of the year for everything to be finished. The timer approach is your best bet for now, but rest assured we are working to have this nailed down and resolved asap. Thanks!. Hi @ryanvanderpol, better crash and rollback support is very high on our priority list! In fact we just moved our entire backend into App Center so we can set the stage for better crash and analytics support in the near future which should accomplish what you are looking for. The way rollbacks presently work within CodePush prevents us from gathering the detailed lower level information you are after and requires a rewrite, but we are changing that in the near future. After we finish moving the CodePush SDK's into the App Center SDK's as a new module around February we'll be focusing heavily on better rollback, crash and patching support for React Native and Cordova solutions.. @ryanvanderpol We are still heads down on rewrites for the SDK's right now that will bring detailed rollback and JS crash information to the surface in a visual and actionable manner, but have finished building out our new backend and releasing Cordova support for App Center. Small team, but we are absolutely still dedicated to mitigating your concerns. I will follow up on this thread in the February timeframe with an update as we get closer to shipping the updates you've been looking for.. Good point @yaronlevi ! I will go through the board with the team and do a bit of house cleaning.. @ThomasGaubert just a quick update - we're going to move the behavior into the new App Center SDK's currently in the works. Won't be too much longer now.. ",
    "iniestano8": "The same as you. I install a new app and there are multi-updated labels(v1,v2), it crashes when i start it. But it is fine when i update from v1 to v2. I use codePush.sync() in method 'componentDidMount' of main js, here is the error log:\njava.lang.RuntimeException: Couldn't call JS module 0, method 0: bridge configuration isn't available. This probably means you're calling a JS module method before bridge setup has completed or without a JS bundle loaded.\n    at com.facebook.react.bridge.queue.NativeRunnable.run(Native Method)\n    at android.os.Handler.handleCallback(Handler.java:733)\n    at android.os.Handler.dispatchMessage(Handler.java:95)\n    at com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:31)\n    at android.os.Looper.loop(Looper.java:136)\n    at com.facebook.react.bridge.queue.MessageQueueThreadImpl$3.run(MessageQueueThreadImpl.java:187)\n    at java.lang.Thread.run(Thread.java:841)\n. @silhouettes it's fine with me, and I have resolved my problem. thanks\n. @geof90 Is it normal that ios app received the update when i push update to android ? (code-push release-react  android)\n. @silhouettes could you answer me the question please?  If I push an update to android (use commend 'code-push release-react android'), both iphone and android phone will receive the update tips? but the update content will be shown on iphone after installing.\n. Ok,I see. Thanks.\n. ",
    "overminder": "@geof90 \nThanks for your fix! That's pretty quick..\nYes, I'm using react-native-admob. But as you might have already figured out, any kind of native activity should be able to trigger this.\n. @geof90 Yes, I can confirm that 337a03e fixes this issue. Good job!\n. ",
    "orzarchi": "I've managed to solve the problem thanks to your hints.\nI've noticed that the recordFilesBeforeBundleCommand build step was indeed not being called, so I looked at my gradle files.\nI've noticed I was applying the codepush gradle file before applying the react one, so I tried changing the order as follows:\napply from: \"react.gradle\"\napply from: \"../../node_modules/react-native-code-push/android/codepush.gradle\"\nAnd now the recordFilesBeforeBundleCommandRelease step was called and the build passed.\nCheers!\n. ",
    "danieldunderfelt": "Hi!\nNo, that was created when I copied the release config and made the staging config.\n. @geof90 No, not using CocoaPods. Does it manage these things for me?\nWhen I figured out why my builds weren't working, that the third-party packages didn't have a staging config, I thought having cocoapods wouldn't matter.\n. @geof90 oh, good good!\nMaybe your xcode made staging config for your third-party packages, and my xcode glitched out and didn't?\n. ",
    "thorbenandresen": "Nice, this did also fix it for me. I omitted the Step 3 (changing the project.pbxproj) and my Fabric.framework does still work fine. \nHowever when I use different PRODUCT_NAMES for the different build environment, I am getting now a build error. I am have setup the names according to this article\n\nWhen i build my release config everything works, but not when I build the debug or staging config. In these cases I get the following errors: \n\nI have tried to fix it by\n- set Target => Info => Executable file to $(PRODUCT_NAME)\n- set Target => Bundler Loader to => $(BUILT_PRODUCTS_DIR)/$(PRODUCT_NAME).app/$(PRODUCT_NAME)\nI have cleaned my build folder before each build. \nThis did not happen before, so it could be related to this issue. \n(For now my workaround is to use different app icons in order to distinguish my different build environment - as outlines in the article above)\n. ",
    "FernandoMorais": "Here I solved the staging problem by correcting the TEST_HOST which is pointing to a fixed value despite the new PRODUCT_NAME.\nI've changed the scheme to use the staging variation for tests builds.\nI hope it helps!\n. really nice @huitsing! Much more complete solution!\n. ",
    "huitsing": "Our solution might be helpful here as well: https://zeemee.engineering/how-to-set-up-multiple-schemes-configurations-in-xcode-for-your-react-native-ios-app-7da4b5237966#.pxa41apg1\n. This only happens on a release build unfortunately, so we don't get much context. \n. Hi @silhouettes - we ended up shipping without CodePush on Android for this release to avoid the crashing, but it's in our near-term backlog to reevaluate. Hopefully we can give you a much cleaner, more direct answer soon on this.\n. Hi @silhouettes - thanks for the ping! We have just finished testing this (within the past hour) and it's working great! No crashes. \nWe can't really prove it, but there is a descent chance that we were in a bad state on our deployed JS bundle's compatibility with the underlying native code in our dev environment when we were experiencing problems. From your end, I'd assume that this is a non-issue. I will open a new issue if we run into any other problems.\n. ",
    "jm555jm": "I have the same issue, too. I use xcode 8 beta 6.\nlibrary not found for -lCodePush with build configuration \"Staging\".\nI have fix just re-add libCodePush.a at Linked Framework and Libraries.\nNow everything works fine =).\n. ",
    "flavordaaave": "@jm555jm THX for the hint. I had quite a few external libraries and I was desperately trying to unlink and re-link them without any luck. But manually removing and re-adding them in the Link Binary with Libraries section finally solved the issue and my builds are succeeding again.\n. ",
    "bernatfortet": "@jm555jm @flavordaaave thanks for the tip! \nIt took me a couple minutes to figure out exactly how to do that, so for others:\n1. Select your app target\n2. Make sure you are in the General Tab\n3. Scroll down until Link Binary with Libraries\n4. Select libCodePush\n5. Press - minus button at the bottom left\n6. Press + plus button and search for libCodePush\n\ud83d\udc4d . Actually after trying that I found that I was still with the Release scheme.\nAfter changing it to staging, and after removing and re-adding the library it still doesn't work \ud83d\ude1e \nSame exact error.. I'm getting the same error when running: \ncode-push release-react xxxxxx ios\n[Error]  Unable to connect to the CodePush server. Are you offline, or behind a firewall or proxy?\n(getaddrinfo ENOTFOUND codepush-management.azurewebsites.net codepush-management.azurewebsites.net:443)\nI'm not behind a proxy or firewall. Also, I'm not offline since I can post this.\nI tried restarting my internet and it's still happening.. Solved\nI was using iterm2. I closed the tab, opened a new one, and executed the command again: it worked.\nMaybe it's a terminal issue?. ",
    "Amurmurmur": "+1 Same error, with the header, when on Staging Scheme :(. Any one having an issue when using tipsi-stripe and having multiple deployments?\nMy pod file\n```\nUncomment the next line to define a global platform for your project\nplatform :ios, '9.0'\nworkspace 'appname'\ntarget 'targetNameTests' do\n  # Uncomment the next line if you're using Swift or would like to use dynamic frameworks\n  # use_frameworks!\n# Pods for targetName\n  pod 'AppCenter/Crashes', '~> 1.6.1'\n  pod 'AppCenter/Analytics', '~> 1.6.1'\n  pod 'AppCenterReactNativeShared', '~> 1.5.1'\n  # Stripe\n  pod 'Stripe', '~> 11.2.0'\ntarget 'targetNameTests' do\n    inherit! :search_paths\n    # Pods for testing\nend\n\nend\npost_install do |installer|\n    installer.pods_project.targets.each do |target|\n      if target.name == 'targetName'\n        target.build_configurations.each do |config|\n          if config.name == 'Staging'\n            config.build_settings['CONFIGURATION_TEMP_DIR'] = '$(PROJECT_TEMP_DIR)/Release$(EFFECTIVE_PLATFORM_NAME)'\n            config.build_settings['CONFIGURATION_BUILD_DIR'] = '$(PROJECT_TEMP_DIR)/Release$(EFFECTIVE_PLATFORM_NAME)'\n          end\n        end\n      end\n    end\n  end\n``\nI've setPer-configuration Build Products Pathfor Staging to$(BUILD_DIR)/Release$(EFFECTIVE_PLATFORM_NAME)Also I've updated PODS_CONFIGURATION_BUILD_DIRfor Staging to${PODS_BUILD_DIR}/Release$(EFFECTIVE_PLATFORM_NAME)`\nIm getting the following:\nld: library not found for -lStripe\nclang: error: linker command failed with exit code 1 (use -v to see invocation). @sergey-akhalkov Yep that worked!! Thank you so much.\nHowever I guess its just a workaround and the team has to fix it anyway, or add this in the documentation?!\nCheeers. @almadsen That didnt work for me :/ Only the solution suggested by @sergey-akhalkov did work. :/. @max-mironov I just replied to the relevant #816 issue.\nThe suggested PR #809 fixes the issue!\nThank you very much for your help!\nCant wait to update via NPM.\nClosing for now \ud83d\udc4d . I think I have a similar issue as you. I was able to catch exception in a release/staging build on ios.\nThough a crash only happens on the ios platform.\n #815 . @sergey-akhalkov I can confirm the suggested PR #809 fixes the crash!\nCant wait to update via NPM \ud83d\udc4d . Alright figured it out.\nInstead of App = codePush({ checkFrequency: codePush.CheckFrequency.MANUAL })(App);\nI did\nApp = codePush({ checkFrequency: codePush.CheckFrequency.MANUAL })(new App());\nFor some unknown reasons I forgot to count on that constructor.\nThank you for your attention.. Omg I cant believe it,\nreact-native-router-flux was causing the problem, I completely uninstalled it, everything is smooth.\n@max-mironov Thank you very much for testing it for me and for your time, so that I went into different direction and fixed the issue finally.\nNothing code-push related, AWESOME WORK and FAST response as usual.\n\ud83d\udc4d \ud83d\udc4d \ud83d\udc4d You are awesome guys, thank you. \ud83d\udc4d \ud83d\udc4d \ud83d\udc4d . ",
    "ndbroadbent": "Hi, I also ran into an issue, and came straight here. But for me, I just had to run pod install, and then everything worked after that.. Argh I still struggled with this for quite a while, but then I realized that you need to build a Release version first, before building Staging. (Because I changed the 'build products path' to $(BUILD_DIR)/Release$(EFFECTIVE_PLATFORM_NAME).)\nSo if you run a clean, or delete derived data, make sure you switch to your Release scheme and press cmd+B to run a build, before you try to build Staging. Because your Staging build depends on some things that need to be in that Release folder.. Sorry, I don't think this is related to code push. I was struggling to find where ms-appx:// was coming from, but I think my issue was just related to a strange conflict in my node_modules.. ",
    "fannt": "I had a trouble with cocoapods overriding this config settings, used this as a workaround:\npost_install do |installer|\n  installer.pods_project.targets.each do |target|\n    if target.name == 'YourTarget'\n      target.build_configurations.each do |config|\n        if config.name == 'STAGING'\n          config.build_settings['CONFIGURATION_TEMP_DIR'] = '$(PROJECT_TEMP_DIR)/Release$(EFFECTIVE_PLATFORM_NAME)'\n          config.build_settings['CONFIGURATION_BUILD_DIR'] = '$(PROJECT_TEMP_DIR)/Release$(EFFECTIVE_PLATFORM_NAME)'\n        end\n      end\n    end\n  end\nend. ",
    "mtt87": "In my case after following the instructions on the official documentation I had to change this as well to be $PODS_BUILD_DIR/Release$(EFFECTIVE_PLATFORM_NAME)\n\n. ",
    "wprater": "These fixes don't seem to work on CI servers, since the Release build path won't have any build or header files in it.  \nAny thoughts on fixes or running on a CI (Buddy Build or MSFT App Center?). This issue is persisting for me when I try to build on Buddy Build or MMC App Center.  anyone else encounter this?. ",
    "MyGuySi": "@wprater I'm having the same issue, it works fine if I build Release first. Did you happen to get it working?. I'm getting this issue too when running in iOS simulator, I installed with react-native link.\nI'm using it as per the instructions:\n```\nimport React, { Component } from 'react';\nvar codePush = require('react-native-code-push');\nimport ContractorNavigator from './navigation/ContractorNavigator';\nclass App extends Component {\n  render() {\n    return (\n      \n    );\n  }\n}\nexport default codePush(App);\n```\nbut I'm still getting codePush is not a function\nI've tried restarting the packager with --reset-cache and rebuilding the iOS app. @vladimir-kotikov I'm really sorry, it appears to be working correctly now. I simply removed the code while I was working on something else now that I've come back and tried it again, its working fine.\nMy apologies, it must have been some caching issue, though I cleaned the iOS project, reset the React Native Packager cache and rebuilt everything. Weird... ",
    "aligfl": "@wprater did you get it working on your CI system ? aka buddybuild or App Center?\nDid you try the solution proposed by @huitsing ?\naka: https://zeemee.engineering/how-to-set-up-multiple-schemes-configurations-in-xcode-for-your-react-native-ios-app-7da4b5237966. Someone posted a solution on another thread. Which has worked for me locally + CI (buddybuild)\nSolution: https://github.com/facebook/react-native/issues/11813#issuecomment-310029148. ",
    "jpaolini": "Not sure if this helps, but I had to do something similar to @fannt.  Cocopods was overwriting the configurations:\npost_install do |installer|\n  installer.pods_project.targets.each do |target|\n    if target.name.downcase == 'YourTargetName\n      target.build_configurations.each do |config|\n        if config.name.downcase == 'staging'\n          config.build_settings['CONFIGURATION_BUILD_DIR'] = '$(BUILD_DIR)/Release$(EFFECTIVE_PLATFORM_NAME)'\n        end\n      end\n    end\n  end\nend. ",
    "NickToropov": "Hi @Amurmurmur, I'm sure that problem is still in CONFIGURATION_BUILD_DIR and CONFIGURATION_TEMP_DIR settings. I've just created new ReactNative application, copied your Podfile, actualized it to this:\n```\nUncomment the next line to define a global platform for your project\nplatform :ios, '9.0'\nworkspace 'appname'\ntarget 'Issue426' do\n  # Uncomment the next line if you're using Swift or would like to use dynamic frameworks\n  # use_frameworks!\n# React Native requirements\npod 'React', :path => '../node_modules/react-native', :subspecs => [\n    'Core',\n    'CxxBridge', # Include this for RN >= 0.47\n    'DevSupport', # Include this to enable In-App Devmenu if RN >= 0.43\n    'RCTText',\n    'RCTNetwork',\n    'RCTWebSocket', # Needed for debugging\n    'RCTAnimation', # Needed for FlatList and animations running on native UI thread\n    # Add any other subspecs you want to use in your project\n ]\n # Explicitly include Yoga if you are using RN >= 0.42.0\n pod 'yoga', :path => '../node_modules/react-native/ReactCommon/yoga'\n pod 'DoubleConversion', :podspec => '../node_modules/react-native/third-party-podspecs/DoubleConversion.podspec'\n pod 'glog', :podspec => '../node_modules/react-native/third-party-podspecs/glog.podspec'\n pod 'Folly', :podspec => '../node_modules/react-native/third-party-podspecs/Folly.podspec'\n# Pods for targetName\n  pod 'AppCenter/Crashes', '~> 1.6.1'\n  pod 'AppCenter/Analytics', '~> 1.6.1'\n  pod 'AppCenterReactNativeShared', '~> 1.5.1'\n  # Stripe\n  pod 'Stripe', '~> 11.2.0'\nend\npost_install do |installer|\n    installer.pods_project.targets.each do |target|\n        if target.name == 'Issue426'\n            target.build_configurations.each do |config|\n                if config.name == 'Staging'\n                    config.build_settings['CONFIGURATION_TEMP_DIR'] = '$(PROJECT_TEMP_DIR)/Release$(EFFECTIVE_PLATFORM_NAME)'\n                    config.build_settings['CONFIGURATION_BUILD_DIR'] = '$(PROJECT_TEMP_DIR)/Release$(EFFECTIVE_PLATFORM_NAME)'\n                end\n            end\n        end\n    end\nend\n``\nthen executedpod install, opened generatedappname.xcworkspacein XCode, added newStagingconfiguration (based on Release configuration), added newStagingscheme, updatedPre-configuration Build Files PathandPre-configuration Intermediate Build Files Path` for both Issue426 and Pods project. After this steps my demo project built successfully. \nPlease try my steps and if the issue won't be solved provide me with sample project that I could able to reproduce your situation and help to fix it.. Hi @adalvi13, please check if your Podfile is similar to this one. Hi @shyaniv7, we've tested and it seems that everything looks good. Thanks @tmaly1980 for fix!\nI'll close this issue but feel free to reopen this or create a new one if you have any questions.\nThanks for using CodePush!. Hi @fatfatson,\nIs the issue still relevant for you?. Hi @fatfatson,\nI\u2019ll close this issue for now, please open it again if there are any questions.. Hi @fatfatson, \nI've reproduced you issue. The point is that notifyAppReady method is called in componentDidMount method: \nhttps://github.com/Microsoft/react-native-code-push/blob/163e2b5b8d1fd0b6967507444881ebd6ceb7f0f3/CodePush.js#L464\nI tried to comment this line and my update rolled back to previous version.\nPlease, let me know if it was helpful for you.. Hi @fatfatson, I hope my clarification was helpful for you, will close this issue for now.\nPlease open it again if there are any questions.. @wynch yes, it's RN issue. CodePush does nothing with your js/assets. It just calls RN cli under the hood and pushes generated bundle to CodePush server from where your customers can download it. The main difference between downloaded bundle and binary bundle is location. We saw several places in RN code where there are conditions checking whether bundle/asset is located in app or in file system. We don't know if there is a PR with fixes in RN repository.. Hi @Fsarmento! thanks for demo app! I've reproduced the issue. Please try to apply workaround suggested by @ex3ndr above. It works for me.. Hi @Catpants,\nI am going to close this issue for now, but please feel free to reopen it if you still have any questions.. Hi @AndreyMitsyk, I've merged PR#1298 with fix for this issue in master branch. Please take a look at it.\nThe fix is that we should mock CodePush to use in jest tests:\n```\njest.mock('react-native-code-push', () => {\n  const cp = (_) => (app) => app;\n  Object.assign(cp, {\n    InstallMode: {},\n    CheckFrequency: {},\n    SyncStatus: {},\n    UpdateState: {},\n    DeploymentStatus: {},\n    DEFAULT_UPDATE_DIALOG: {},\ncheckForUpdate: jest.fn(),\ncodePushify: jest.fn(),\ngetConfiguration: jest.fn(),\ngetCurrentPackage: jest.fn(),\ngetUpdateMetadata: jest.fn(),\nlog: jest.fn(),\nnotifyAppReady: jest.fn(),\nnotifyApplicationReady: jest.fn(),\nsync: jest.fn(),\n\n});\n  return cp;\n});\n```\nI'll close this issue for now but feel free to reopen it if there are any questions. Hi @half-ogre,\nwe discussed the issue with @max.mironov and @sergey.akhalkov and our thought is also that plugin shouldn\u2019t crash the app, but we suggest just to add catching and logging of CodePushUnknownException. \nThere is no point to implementing something more complex here as brownfield-apps-dev branch already contains similar mechanism https://github.com/Microsoft/react-native-code-push/blob/brownfield-apps-dev/android/app/src/main/java/com/microsoft/codepush/common/utils/CodePushLogUtils.java#L57. Hi @SudoPlz,\nplease take a look at my PR that should fix your issue. Hi @SudoPlz,\nwe've released a new plugin version - 5.3.4 with fix for this issue.\nPlease, update your app with new plugin.. @SudoPlz, I'll close this issue as it was resolved by hot fix but please feel free to reopen it if you have any questions or the issue turns out.. Hi @SudoPlz, \nI think I was able to reproduce the issue and fix it. Please take a look at PR. Hi @SudoPlz, \nwe've released a new plugin version - 5.3.4 with fix for the issue.\nPlease, update your application with new plugin.. Hi @ay5000,\nI\u2019ll close this issue for now as there are no questions from you. But please feel free to reopen it if you will have any questions.. Hi @marc-whil, could you please describe your flow with usage clearUpdates method more detailed? Some code snippets or demos will also be very useful and help us to make decision about your PR.. Hi all! We've decided to merge the PR with some additional notes in docs and logging. Thanks for contribution!. Hi @danieloj, thanks for posting the issue.\nUnfortunately I was unable to reproduce your issue. Please, have a look at sample and check if the issue is reproducible here for you. Looking forward for your reply.\nIssue1273.zip\n. Hi @danieloj, \nI\u2019ll close this issue for now. Please feel free to reopen it if you will have any questions.. Hi guys,\nI reproduced similar issue and was able to fix it by adding @2x and @3x images (as discussed in https://github.com/react-community/react-native-maps/issues/725).\ndirectory structure after adding images:\nprojectRoot\n\u2514 images\n  \u251c img.png\n  \u251c img@2x.png\n  \u2514 img@3x.png\nFor more info about react-native images please check docs: https://facebook.github.io/react-native/docs/images.html\nPlease, try the solution and let us know if it was helpful.. Hi @PackZhang, did you try the solution with adding @2x and @3X images as I described here. @PackZhang could you please provide us with sample app that reproduces the issue?. Hi guys, @PackZhang, @GonzaloRecioG, can anyone create a sample app that reproduces this issue?. Hi all! I've created a demo app - Issue1276.zip\nPlease try to play with it:\n - extract the zip and go to Issue1276 folder, \n - run yarn,\n - insert your own YOUR_GOOGLE_MAPS_API_KEY and reactNativeCodePush_androidDeploymentKey keys,\n - run react-native run-android or build  release apk and install it on device\n - publish changes with code-push release-react <AppName> android and update the app on device with Press to sync link.\nExpected: image on map should retain its sizes\nPlease, let me know if the issue is reproduced on the demo or make changes in it to reproduce the issue.. Hi guys, @PackZhang, @GonzaloRecioG, could you let me know if you have a chance to look at my comment above. @phatlaunchdeck, I tested on Android as @GonzaloRecioG specified that issue is reproduced on both Android and iOS. Will test it with iOS and come back a bit later.. Hi guys! try to use the following workaround:\n``\nclass MapMarker extends Component {\n  state = {\n    initialRender: true\n  }\n  render() {\n    return (\n      <MapView.Marker \n        coordinate={this.props.coordinate}>\n        <Image\n          source={this.props.source}\n          onLayout={() => this.setState({ initialRender: false })}\n          key={${this.state.initialRender}`}\n        />\n      \n    )\n  }\n}\n...\n\n\n\n```\nIt should work for both iOS and Android.\nPlease let me know if it works for you.. Hi all, I'll close this issue for now as there is no activity here. If anyone still faces the issue and suggested workaround doesn't solve the problem please reopen this one.. Hi guys! I'm going to close this issue for now as it's not related to CodePush and there is a workaround provided by @yuri-kulikov.. Hi @ycman0307, thanks for reporting the issue.\nI tried your repro steps and finished without any error. Then I turned off my Internet and got the same error:\n\u279c  Issue1279 react-native run-android\n\u2026\nFAILURE: Build failed with an exception.\n\nWhat went wrong:\nA problem occurred configuring project ':app'.\nCould not resolve all dependencies for configuration ':app:_debugApk'.\nA problem occurred configuring project ':react-native-code-push'.\n      > Could not resolve all dependencies for configuration ':react-native-code-push:_debugPublishCopy'.\n         > Could not resolve net.minidev:json-smart:[1.3.1,2.3].\n           Required by:\n               Issue1279:react-native-code-push:unspecified > com.nimbusds:nimbus-jose-jwt:5.1\n            > Could not resolve net.minidev:json-smart:[1.3.1,2.3].\n               > Failed to list versions for net.minidev:json-smart.\n                  > Unable to load Maven meta-data from https://jcenter.bintray.com/net/minidev/json-smart/maven-metadata.xml.\n                     > Could not GET 'https://jcenter.bintray.com/net/minidev/json-smart/maven-metadata.xml'.\n                        > jcenter.bintray.com\n\n\n\nPlease, check your internet connection and try react-native run-android again.\nPlease, let me know if it was helpful or you still have any questions.. Hi @ycman0307,\nreact-native-code-push plugin should work without any configuration. Please check if you have access to the following addresses from your device:\nhttps://codepush.azurewebsites.net\nhttps://codepush.blob.core.windows.net\nhttps://codepushupdates.azureedge.net\nIf not, please, try to configure proxy for your wifi connection and try to get access to the specified addresses again.\nLet me know if it was helpful or there are any questions.. Hi @ycman0307, \nI'll close this issue for now. Please feel free to open it again if you have any questions.. Hi @xwartz, thanks for reporting issue.\nPlease, could you provide us with sample app or repro steps so that we could reproduce the issue?. Hi @xwartz, I'll close this issue for now but let me know if you will see anything related you can share with us going further. Hi @jdnichollsc, thanks for reporting!\nPlease try to execute code-push release-react <app-name> ios -m --description \"Publish last changes\" -d Production command and let me know whether it finished successfully or not.. Hi @jdnichollsc, the most likely reason of the fail is a network issue. Please check the result for the following url https://codepush-management.azurewebsites.net/health. It should return Healthy.. @jdnichollsc do you have a chance to try to release this from another machine? (I'd like to see if the issue is with your machine configuration or with code-push endpoint).. @jdnichollsc, thanks for getting back, that is good that the issue is resolved finally, I\u2019m closing this one right now but let me know if you will see anything related you can share with us going further. Hi @jiaoxuebing2014, the most likely reason is that your n.props.url object is undefined. So please, check if n.props.url is initialized with some value. \nPlease, let me know if it was helpful or there are any other questions. . @jiaoxuebing2014, Good news =)\nSo, I'll close this issue for now as it was resolved. But please feel free to reopen it if you will have any questions.. Hi @kissmypiss, we have several related threads regarding this, you can quickly observe them:\n748\n949\nMicrosoft/code-push#415\nMicrosoft/code-push#486\nIn short for today we are not aware if any apps were rejected due to code-push usage itself.\nWe are actively monitoring this and at that moment it turns our that none of these issues were really related to code-push plugin usage.\nAlso we do not recommend to use update dialog within your app, please take a look at this section for more details.. Hi @sagark1510, thanks for posting the issue.\nThe most likely reason is that you didn't change Per-configuration Build Products Path for Staging configuration. Please see this doc in step 7 and check if you have required changes. \nPlease, let me know if it was helpful.. @sagark1510 please could you provide me with demo app that reproduce the issue?. Hi @sagark1510, Yes, the issue is not related to CodePush. It seems I was able to fix your project. Please could you grant me permissions that I could create branch in your repo and push changes?. @sagark1510, I pushed my changes to new NT/fix-staging-build branch. Please look at it. \n- DF0C042220C141980054349E /* Staging Release */\n+ AF0A605620C1900500818166 /* Staging Release */ \n //// I just recreated `Staging Release` configuration. Don't pay attention on such changes. \nI think that the following changes could affect the success build:\n - shellScript\n - HEADER_SEARCH_PATHS\n - CONFIGURATION_BUILD_DIR\n - CONFIGURATION_TEMP_DIR\nPlease try it and let me know if it was helpful. @NickToropov you're welcome! Glad to hear the issue was solved :)\nI'll close this issue for now but please feel free to reopen it if you have any questions.. Hi @kevindavee please try to add one more code-push option mandatoryInstallMode:\nconst codePushOptions = {\n  checkFrequency: codePush.CheckFrequency.ON_APP_RESUME,\n  installMode: codePush.InstallMode.ON_NEXT_RESTART,\n  mandatoryInstallMode: codePush.InstallMode.ON_NEXT_RESTART\n}\nPlease see this doc. Hi @carloscuesta, thanks for posting the issue! I think I've fixed it a few days ago. Please look at the  commit and similar issue #1245\nPlease, let me know if it was helpful or if you have any other question.\n. I'll close the issue. Please reach us if you have more questions.. Hi @scottmas, thanks for posting this issue!\nI was trying to reproduce the issue with no success. Please look at my steps:\n1) prepare a test project:\nreact-native init Issue1309\ncd Issue1309\nyarn add babel-plugin-transform-inline-environment-variables --dev\nyarn add react-native-code-push\nreact-native link react-native-code-push\n2) add transform-inline-environment-variables plugin in .babelrc file:\n\"plugins\": [\n    [\"transform-inline-environment-variables\", {\n      \"include\": [\"TEST\"]\n    }]\n  ]\n3) add demo code in App.render() method:\nexport default class App extends Component<Props> {\n  render() {\n    console.log(`TEST is equal to ${process.env.TEST}`);\n4) execute TEST=Issue1309 appcenter codepush release-react -a <user-name>/Issue1309-Ios -d Staging\n5) go to appcenter.ms, select your latest CodePush Staging release and click Download bundle button\n\n6) rename downloaded file to .zip and unzip it.\n7) open main.jsbundle from unzipped folder in a text editor and find line console.log(\"TEST is equal to Issue1309\") that shows me that variable was applied.\nPlease could you specify if you did some special steps and/or provide me with demo project that I could reproduce this issue.. Hi @PerspectivesLab, thanks for posting this issue. I wasn't able to reproduce the issue. \nPlease, could you provide us with demo app that reproduces your issue?. I'll close the issue as of no response but feel free to reopen if you have more details about it.. Hi @jdnichollsc, I think you can achieve it by specifying custom Environment variable with correct deployment key for every branch and then use appcenter-pre-build.sh to write it inside Android or iOS application.\nPlease, let me know if is was helpful for you situation.. Hi @jdnichollsc \n\nHow can I change the build configuration to use Debug for my develop branch?\n\nIf I understood you correctly you just need to create a new shared build scheme Debug:\n\nand push changes to your develop branch\nThen go to appcenter.ms, select your application -> Build -> develop branch -> Configure Build and choose Debug scheme in Shared Scheme section:\n\nNow you'll be able to build your develop branch using Debug configuration.\nPlease, try this solution and let me know if it was helpful. Also please specify more details/clarifications if I misunderstood you.. > But do you have any example to change the deployment name using appcenter-pre-build.sh? I want to use a new deployment called Develop instead of Staging for the development build.\nplease, clarify if Develop deployment belongs to CodePush? If so then you need just to create such deployment with appcenter cli:\nappcenter codepush deployment add -a <ownerName>/<appName> Develop\nand pass it to release-react command:\nappcenter codepush release-react -a <ownerName>/<appName> -d Develop\nNote, that before releasing with codepush cli you should update deployment key in your application and release new version with updated keys.\nappcenter-pre-build.sh is executed only during appcenter build process.. @jdnichollsc glad to hear that I could help you! :). Hi @zxccvvv thanks for posting the issue!  \n\n\ncheck the C:\\Users\\\\AppData\\Local\\Temp\\CodePush\\CodePush\\index.android.bundle but there's no file and my path stop at C:\\Users\\\\AppData\\Local\\Temp\\CodePush\n\n\nyes, this folder should be cleaned after uploading bundle to the code-push server.\n\nUpdate is invalid - A JS bundle file named\n\nWe have several related threads regarding this, you can quickly observe them:\n970,\n1025\nAlso it would be useful if you could provide us with demo app and/or more detailed repro steps as I wasn't able to reproduce it on our side.. @zxccvvv thanks for reply! I'm glad to hear that the issue is finally resolved. . Hi @eshwartm, thanks for posting the issue.\nPlease could you provide us with more detailed steps or/and demo apps that reproduce your issue?. Hi @eshwartm, I've done the specified steps but can't build the project. I get No such module 'React' in AppDelegate.swift file. Have you faced such issue when building your app or do you have any suggestions how to fix it?\n\n. I've already tried it many times . Hi @eshwartm, I think I was able to reproduce your issue. Please try to rename your file  index.android.js to index.ios.js (also specify index.ios.js instead of index.android.js in AppDelegate.swift) and let me know if it was helpful.. Hi @eshwartm, I'll close this issue for now but please feel free to reopen it if you have any questions.. Hi @Symous, the most likely reason of the issue is that code-push-cli isn't properly installed. Please try to reinstall it and try to execute code-push app list again.. @Symous, please try the following:\ncd /usr/local/lib/node_modules/code-push-cli\nrm -rf node_modules\nyarn (or npm intall)\ncode-push app ls\nAfter executing yarn or npm install there should be pseudomap module installed in ./node_modules folder.\nAlso you can try to use appcenter cli instead of code-push-cli.. Hi @Symous, glad to hear the problem was solved! . Hi @marekchen, thanks for posting the issue!\nPlease try to turn off Configure on demand option:\n\nPlease let me know if it was helpful. . Glad to hear the problem was solved! \nI'll close this issue for now but please feel free to reopen it or create a new one if you have any questions.. Hi @krunalsshah \nThanks for contributing!. Hi @iosfitness I'll close this ticket for now but please feel free to reopen it if the issue is still actual for you or create a new one if you have any other questions.. Hi @thecachedbyte, do you have information about how many different devices/users report this issue? (whether it's a single/small group of devices with connection issues or may be a group of devices from a region with internet issues). Hi guys! Could anyone provide us with demo app that reproduces the issue? . Hi @showtan001, based on your initial post it's hard to detect the problem as you use CodePush in not typical way. So we require demo app to figure out the issue.\nAlso specify the following:\n How was CodePush setup: RNPM, CocoaPods or Manual . Please see the following doc.\n Does this reproduce on a debug build or release build?\n* Does this reproduce on a simulator, or only on a physical device?. Hi @AlirezaAkbarix \n\n[Q]\nHow to terminate current process (for example for this above situation, be able to terminate after 10s)?\n\nNow it's impossible to terminate current process/request. As a workaround you can manually check connection and then call sync method.. @AlirezaAkbarix, to check if device is connected to the Internet you should make a request and check its status. Any other approaches just say that you have turned on some interfaces and that doesn't guarantee access to required Internet services.. Hi @AlirezaAkbarix, I'll close the issue but if you have any question fill free to reopen this issue or create new one.. Hi @chengkaigithub, could you explain in more details how should we build your demo (may be step by step explanation)? If I open it in Android Studio and run it (press green triangle) then app turns out without js bundle at all. I also tried to generate signed release apk but result was the same. Did I miss any steps?. Thanks @chengkaigithub, I'll try it a bit later. I (or @alexandergoncharov) will back as soon as there are any news.. Hi @chengkaigithub! It seems that something is missed in demo repository.\nI got the following errors when tried to execute specified commands:\n\u279c  TestPrimordialFuseRN git:(master) \u2717 react-native link\nScanning folders for symlinks in ~/Projects/TestPrimordialFuseRN/node_modules (23ms)\n? What is your CodePush deployment key for Android (hit  to ignore) \nrnpm-install info Platform 'ios' module react-native-code-push is already linked\nrnpm-install info Linking react-native-code-push android dependency\nrnpm-install ERR! Something went wrong while linking. Error: ENOENT: no such file or directory, open ~/Projects/TestPrimordialFuseRN/android/app/src/main/java/com/suixingpay/testmposrn/MainApplication.java\nPlease file an issue here: https://github.com/facebook/react-native/issues\nENOENT: no such file or directory, open '~/Projects/TestPrimordialFuseRN/android/app/src/main/java/com/suixingpay/testmposrn/MainApplication.java'\n\u279c  TestPrimordialFuseRN git:(master) \u2717 ./offlinePackageRN.sh android\n--------------------------------- android \u51c6\u5907\u5de5\u4f5c ---------------------------------\n\u521b\u5efa\u76ee\u5f55: ./bundle/android\n\u5f00\u59cb\u6253\u5305 android\nScanning folders for symlinks in ~/Projects/TestPrimordialFuseRN/node_modules (29ms)\nScanning folders for symlinks in ~/Projects/TestPrimordialFuseRN/node_modules (19ms)\nLoading dependency graph, done.\nSyntaxError: ~/Projects/TestPrimordialFuseRN/node_modules/react-native-scrollable-tab-view/SceneComponent.js: A trailing comma is not permitted after the rest element (9:32)\n7 |\n   8 | const SceneComponent = (Props) => {\n  9 |   const {shouldUpdated, ...props, } = Props;\n     |                                 ^\n  10 |   return \n  11 |       \n  12 |         {props.children}\n--------------------------------- \u6253\u5305 android \u7ed3\u675f ---------------------------------\n--------------------------------- android \u79fb\u52a8\u6587\u4ef6\u5f00\u59cb ---------------------------------\n\u79fb\u52a8android\u6587\u4ef6\u5230\u6307\u5b9a\u4f4d\u7f6e\ncp: ./bundle/android/index.android.bundle: No such file or directory\ncp: ./bundle/android/index.android.bundle.meta: No such file or directory\ncp: ./bundle/android/drawable-hdpi/: No such file or directory\ncp: ./bundle/android/drawable-mdpi/: No such file or directory\ncp: ./bundle/android/drawable-xhdpi/: No such file or directory\ncp: ./bundle/android/drawable-xxhdpi/: No such file or directory\ncp: ./bundle/android/drawable-xxxhdpi/*: No such file or directory\n--------------------------------- android \u79fb\u52a8\u6587\u4ef6\u7ed3\u675f ---------------------------------\nand then in Android Studio terminal:\n\u279c  android git:(master) \u2717 ./gradlew clean\nzsh: no such file or directory: ./gradlew\nCould you please check one more time if everything is ok in repository and reprosteps?. Hi @chengkaigithub! Thanks for detailed steps. I was able to reproduce the issue. It's definitely a weird behavior. Will continue to look for the cause of the problem. If you have any news or any investigation results please share them here. Will be in touch.. Hey @chengkaigithub! Please take a look at this thread. The main idea is that some classes are used before being declared by babel. In your app such code is: \nconst drawableFileTypes = new Set([\n  'gif',\n   ...\n]); \nAs a workaround try to modify your index.js to:\n```\nimport {name as appName} from './app.json';\nimport {AppRegistry} from 'react-native';\nAppRegistry.registerComponent(appName, () => require('./app/Root').default);\n```\nI've tested this approach and CodePush updates were installed and run properly(images are shown).\nAlso you can try to update RN to 0.57.0 and check if it helps as many dependencies related to babel were upgraded.\nPlease, let me know if it was helpful.. Awesome! Do you have any other questions?. Thanks for using CodePush!. Hi @ryanliszewski, did you have a chance to create dummy project that reproduce this issue?. Hi guys! It's strange issue. We have many users that test their apps with TestFlight without any issues. In general archiving process uses Release scheme so there shouldn't be any differences between app bundle from XCode and TestFlight except signature. \nPlease if you have any possibility to provide us with logs or may be a demo app that reproduce the issue it'll help us a lot to figure out the cause of the your problem as now it's difficult to say what is going wrong.. @alchy58 glad to hear that issue was resolved! \nI'll close the issue but feel free to reach us if you need any help with code-push.. Hi guys!\n@buyuxing, the cause of your problem is that you didn't call CodePush.notifyAppReady(). Please see this doc\n@mxc7609, could you please share the output of command code-push deployment history MyApp-Android <your-deployment[Staging|Production|AnyOther]> --format=json and it would be very helpful if you could create a demo project that reproduces the issue as it's hard to say what is wrong in your project now.. Hi @buyuxing, it's very strange. I've just checked it. Both Android and iOS rolled back. Could you please provide us with simple demo project that reproduces different behavior?. Hey guys! \nWe haven\u2019t heard from you in a while, so I am going to go ahead and close this issue. If you still have any questions, you can reopen this one or if you prefer you can create a new issue. . Hi @imankitaman, the error says that the script can't find substring jsCodeLocation = in your AppDelegate.m file. Please check if the substring is there. Also it's possible that there are more than one AppDelegate.m file in your project directory so the script tries to patch incorrect file.  Please check these assumptions and let us know if it was helpful. \nAlso please look at similar issue.. Hi @keshk26, I wasn't able to reproduce your issue. Could you please provide us with demo project that reproduce the problem?. @keshk26 glad to hear that you solved your problem!. Hi @BatDroid, \nThanks for asking!\nIt can be done if your binary and pushed versions have the most precise format and are equal.\nFor example: 1.0.1, 2.2.3, etc.\nIf you specify 1.0 for your pushed version then it will be available for downloading for all binary versions in range from 1.0 to 1.1 (for example 1.0.1, 1.0.213). Hi @BatDroid \nYeah, the codepush just iterates through releases and compares your binary version(passed in request) and release targetBinaryVersion param(every pushed release has targetBinaryVersion param) and choose the latest one that satisfy this condition. So in your scenario if all releases have the same targetBinaryVersion (for example 1.0) than the latest v3 release will be chosen.\nAlso please take a look at disabled param. You can disable your v3 release and codepush server will return v2 release as the latest.. Hi @BatDroid, I'll close this issue for now but please fill free to reopen this one or create new issue if you have any questions.. Hi @krunalsshah, yes, official documentation says that by default dev dependencies will be installed so I don\u2019t see the point to extend our documentation. Hi @krunalsshah, is this issue reproduced stably? If yes, please provide us with demo app or detailed repro steps that we could find the cause of the problem faster. Also please specify the following information:\n react-native-code-push version:\n react-native version:\n package.json file\n Does this reproduce on a debug build or release build?\n* Does this reproduce on a simulator, or only on a physical device?. Am I right that you suggest just not to create and keep new folder with invalid update? \nIn this case folder with unzipped content still remains on the disk. @krunalsshah  thanks for answering! We'll review it more detailed a bit later. Will be in touch!. Hi @krunalsshah, please could you check my answer in your PR and let me know if you can do required changes or provide any other feedback.. Hi! I'll close this issue for now as there is no activity here and in PR. Please reopen them if you have time to continue work on your PR.. Hi @krunalsshah, please do similar changes for iOS too to keep logic in sync.. @krunalsshah please check ios native code. Here unzipped content is copied to newUpdateFolderPath and below there is a code for checking if relativeBundlePath exists. This logic corresponds to existing logic in android native code. So you should update ios logic too for consistency.. @krunalsshah, will wait for your response! Ping me when you have any updates. Hey @krunalsshah! Do you have any updates?. Hi @krunalsshah! my thoughts are the same - do in iOS part the same changes as you have done in Android part. You said that your friend @ghostatron was going to look at the iOS implementation. Did he have a chance to do it? Please let me know if you and @ghostatron won't do required changes. Hey @krunalsshah! We haven\u2019t heard from you in a while, so I am going to go ahead and close this PR. Please feel free to reopen it if you have time to work on it.. Hi @fzyzcjy, unfortunately, we cannot do anything with that. This is just plugin which can download and update jsbundle on app. You can try to use some proxy but there is no guarantee that it will solve the issue.. @fzyzcjy, yes it's possible but not recommended and not supported by our team. You can look at one implementation: https://github.com/lisong/code-push-server and user/fork this one or create your own implementation.. Hi @Jazk-Z! If I understood correctly you use local.properties file to store deployment keys. And as this file shouldn't be tracked by git it isn't in your repository and when build process try to clone build the project from source control it cannot find this file and fails. To solve the problem of providing deployment keys and keep them in secret I'd recommend you to use Environment variables. Just create as many variables as you need and pass them in build.gradle as described here.\nAlso take a look at custom build scripts. It could help you in some scenarios.\nPlease let me know if it was helpful. . Hi @Jazk-Z! you can configure environment variables using this manual. Please take a look at the docs and let me know if it solves you issue.. Hey! \nWe haven\u2019t heard from you in a while, so I am going to go ahead and close this issue. Should you still have any questions, you can reopen this issue; or if you prefer you can create a new one.. Hi @Jazk-Z! to setup environment variables and build scripts please see these docs: \n- https://docs.microsoft.com/en-us/appcenter/build/custom/scripts/\n- https://docs.microsoft.com/en-us/appcenter/build/custom/variables/ \nPlease let me know if it was helpful or you have any other questions.. Hey!\nWe haven\u2019t heard from you in a while, so I am going to go ahead and close this issue. If you still have any questions, you can reopen this issue; or if you prefer you can create a new one.. Hi @dkadlecek we're sorry you've faced this issue. Please could you provide us with some more details: \n- what was the previous version of CodePush plugin?\n- what mechanism was used to integrate CodePush plugin? (take a look at this doc)\n- what exactly steps were used for updating plugin\nIt would be great if you could create a basic demo app that reproduces the issue.. I tried to reproduce the issue but with no success. I've performed the following steps:\n1. create a basic RN app: react-native init Issue1378 --version=0.53.3\n2. added CodePush plugin: yarn add react-native-code-push@5.2.2 and linked it: react-native link react-native-code-push\n3. created in ios folder Podfile from here\n4. ran pod install in ios directory\n5. opened generated Issue1378.xcworkspace in XCode and built it. Result - success\n6. updated CodePush plugin: yarn add react-native-code-push@latest (in project root directory) and linked it: react-native link react-native-code-push\n7. closed XCode and cleared ~/Library/Developer/Xcode/DerivedData directory\n8. deintegrated pods: pod deintegrate and install it again pod install (in ios directory)\n9. opened Issue1378.xcworkspace in XCode and built it. Result - success.\nPlease try to follow my steps and check if your build is successful. (if I missed some steps/details please specify them). Hi @dkadlecek! I've prepared a demo app\nIssue1378.zip. Take a look at it.\nTo setup do the following steps:\n- unzip Issue1378.zip and go to unzipped folder\n- execute yarn\n- go to ios directory and execute pod install\n- open generated Issue1378.xcworkspace in XCode and built it\nNote:\nIf you have error The name of the given podspec 'GLog' doesn't match the expected one 'glog'\nfix the Glog spec name in:\n/Issue1378/node_modules/react-native/third-party-podspecs/GLog.podspec\nspec.name = 'glog'\nand in\n/Issue1378/node_modules/react-native/third-party-podspecs/Folly.podspec\nspec.dependency 'glog'\n. Hi @dkadlecek. Yes, it's better to move to only one approach of managing dependencies. . Hey! How is your progress? Is the issue solved or do you have any other questions?. Hi @dkadlecek, the docs are outdated. Will fix them soon. Use manual in this repository: https://github.com/Microsoft/react-native-code-push/blob/master/docs/setup-ios.md. Hi @lhuazai. If I understand you correctly your app shows update dialog, you tap \"Install\" button, downloading process is reported, app restarts but after that your new updates are not applied and you see the previous version of app?\nIf yes, then the most likely cause of the problem is an error that occurs  when new bundle is loaded.\nPlease share logs from XCode or any other tracking system(if you use them). Also it would be great if you could provide us with a demo app that reproduces your issue.. Do you observe any errors in XCode logs window?. also I think you should use something similar to\n```\nifdef DEBUG\n jsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index\" fallbackResource:nil];\n\nelse\n jsCodeLocation = [CodePush bundleURL];\n\nendif\n```\nPlease read this section.\nPlease let me know if it was helpful.. Hi @lhuazai!\nWe haven\u2019t heard from you in a while, so I am going to go ahead and close this issue. If you still have any questions, you can reopen this issue; or if you prefer you can create a new one.. Hi @mattcolman! Did you specify deployment key for Debug configuration? If no then it's expected behavior. Checking for updated (which is in the specified code:\nexport default codePush({ checkFrequency: codePush.CheckFrequency.ON_APP_RESUME })(App);) is performed regardless of whether it is Debug or Release or Staging.\nIf it's critical for you to avoid such error you can use one of the following approaches:\n- comment code export default codePush({ checkFrequency: codePush.CheckFrequency.ON_APP_RESUME })(App);\n- create Debug deployment and specified key for Debug configuration. Hi @antonsivogrivov, please take a loot at this doc and check if you set Per-configuration Build Products Path as specified in manual.. @antonsivogrivov glad to hear that we were able to help you!. Hi @iain-merrick-fanduel yes, it's possible but it's also possible that some users don't use any VCS, so they'll have to support some kind of \"recent commit\" or \"timestamp\" manually. That's why plugin logic shouldn't depend on VCS.. @iain-merrick-fanduel, do you have any other questions? . Yes, thanks for suggestion! But currently we have no appropriate solution for the issue. May be later changes will allow to improve this behavior. We'll keep that in mind!\nWill close this issue as it seems to be answered, feel free to reach us if you need any help with code-push.\nThanks for using CodePush!. Hi @hanford! What is your Gradle version? In the specified thread it's mentioned that Gradle 4 is required. Did you tested it with Gradle version below 4?. Hi @krunalsshah! Initially the development direction was aimed to have most part of logic in js side and use native side only in case we cannot do somehting without it. That\u2019s why we have checkForUpdates and sync in js code. Going further we aimed to move to the point when we would like to support brownfield apps so I believe sooner or later that will be merged and supported completely. As for now please take a look at brownfield-apps-dev branch (for example here). So you can implement you own sync based on the code in brownfield-apps-dev branch.\nPlease let me know if it was helpful or you have any other questions.. Hi @krunalsshah, I'll close the issue as it seems to be resolved, feel free to reach us if you need any help with code-push.. Hi @betsun2017, do you have code something like \n```\nlet codePushOptions = { checkFrequency: CodePush.CheckFrequency.MANUAL };\nApp = CodePush(codePushOptions)(App);\nexport default App;\n``\n?\nI've just tested your scenario and it had no issues. Also it would be very helpful if you provide us with demo app.. Is this issue reproduced stably? Also please could you share logs from XCode(tagged with[CodePush])? . Hey! \nWe haven\u2019t heard from you in a while, so I am going to go ahead and close this issue. Should you still have any questions, you can reopen the issue or if you prefer you can create a new one. Please don\u2019t hesitate to contact us again.. Hi @thecachedbyte!\nIs/node_modules/react-native-code-push/android/codepush.gradleexecuted during your build process?. Hey! \nWe haven\u2019t heard from you in a while, so I am going to go ahead and close this ticket. Should you still have any questions, you can reopen the ticket; or if you prefer you can create a new one.\nThanks for using CodePush!. Hi @nextdooroldwang! \nYes,updateCheckrequest doesn't contains packageHash param for Android if you have no CodePush updates installed yet. See this [line](https://github.com/Microsoft/react-native-code-push/blob/82b3336adb0a0bc2168b81d91499b13df7ad585c/CodePush.js#L49) please.. Hey @nextdooroldwang! Was my answer helpful for you or do you have any other questions?. Hey! \nWe haven\u2019t heard from you in a while, so I am going to go ahead and close this issue. Should you still have any questions, you can reopen the issue or if you prefer you can create a new one. . Hi @tspop! Could you please provide more details about the issue you've faced? It's possible that you had a different issue as it's an ordinary practice to use configuration variables with CodePush and everything should work properly. Please take a look at [the doc](https://github.com/Microsoft/react-native-code-push/blob/master/docs/multi-deployment-testing-ios.md) where it's descrubed how to configure environment for multideployment testing.\nLet me know if it was helpful or I missed something?. Hey! \nWe haven\u2019t heard from you in a while, so I am going to go ahead and close this PR. Please feel free to reopen it if you have time to provide us with more information/clarification.. Hi @yueqch! I've just created a basic RN app with integrated CodePush plugin. Then I've updated gradle-wrapper version to 4.6 and built the app. Result:BUILD SUCCESSFUL`. Please take a look at attached demo and change it so that your issue could be reproduced there and share with us. We'll try so figure out what is going wrong.\nNote: please execute yarn command in the root of unzipped app before start to build\n. Hey! \nWe haven\u2019t heard from you in a while, so I am going to go ahead and close this issue. Should you still have any questions, you can reopen the issue or if you prefer you can create a new one.. Hi @fungilation! I think that specified issue should be fixed by this commit a year ago. Also I've just created a basic RN app with integrated CodePush plugin and tried to unlink:\n\u279c  Issue1402 react-native unlink react-native-code-push\nrnpm-install info Unlinking react-native-code-push ios dependency\nrnpm-install info Platform 'ios' module undefined has been successfully unlinked\nrnpm-install info Unlinking react-native-code-push android dependency\nrnpm-install info Platform 'android' module undefined has been successfully unlinked\nCould you provide us with more info about your project and which dependencies do you have? It would be very helpful if you could prepare a demo app that reproduce the issue or specify exactly steps to reproduce it.. Hey! \nWe haven\u2019t heard from you in a while, so I am going to go ahead and close this issue. Should you still have any questions, you can reopen the issue or if you prefer you can create a new one.. Hi @ricoharisin! Could you please clarify some questions? I've just created a basic RN (0.57.0) app with integrated CodePush(5.4.2) plugin, bumped android gradle plugin to 3.2+ and gradle itself to 4.6,  built release apk and ran in Android 6.0.1. Result: red screen with error Unable to load script from assets 'index.android.bundle'. Make sure your bundle is packaged correctly pr you're running a packager server. So it seems that RN doesn't support gradle plugin above 3.1.4. Do you have any other changes in your configuration that allow you to build and run RN app without that error?. @ricoharisin I think that your issue is connected with skipping bundleJsAndAssets task. Definition of this task contains instructions for creating directories that are lately used by generateBundledResourcesHash${targetName} task. So to prevent the error you can skip generateBundledResourcesHash${targetName} task too. But in this case you should manually generate bundle hash on your separate step after manually build react native bundle.. @ricoharisin please try not to skip bundleJsAndAssets task and check if you get the same Error: ENOENT: no such file or directory, open. Share your results here. Hey! \nWe haven\u2019t heard from you in a while, so I am going to go ahead and close this PR. Should you still have additional information, you can reopen it. \nNevertheless thanks for contributing! We'll keep it in mind and will be back to it when specified plugin version will be supported by ReactNative team.. Hi @adrianha! I think that if you generate bundle manually then you should generate hash manually too or provide additional support for hash generation script(something like @squirly mentioned). But it completely depends on your flow. Our build process logic is linked to RN one so if you change something we can't guarantee working flow go on correctly.. Hi @thecachedbyte! We have a similar question asked recently. Please take a look at it: issue#1391.\nLet me know if it was helpful or you have any other questions.. Hey! I'll close the issue as it seems to be resolved, feel free to reach us if you need any help with code-push.. Hi @sunny635533! Could you please clarify some details:\n1. do you have code similar to:\n    let codePushOptions = { checkFrequency: CodePush.CheckFrequency.MANUAL };\n    App = CodePush(codePushOptions)(App);\n    export default App;\n2. where do you exactly call your checkForHotpatch method and from where deploymentKey is taken?\n3. what dependencies do you have(in package.json file)?\n4. do you have any logs related to CodePush?\n5. does the issue occur in Debug or Release? \n6. what is your iOS version?\nAlso it would be very helpful if you could provide us with demo project where this issue can be \nreproduced. Hi @sunny635533, thanks for demo! unfortunately I wasn't able to reproduce the issue. I made the following steps:\n- git clone https://github.com/sunny635533/TestCodePush.git\n- cd TestCodePush\n- yarn\n- code-push app add issue1408-ios ios react-native\n- changed deployment keys in TestCodePush/src/model/env-config.tsx\n- commented get Navigator() in ./node_modules/react-native/Libraries/react-native/react-native-implementation.js\n- react-native start\n- tsc -w\n- cd ios\n- pod install\n- opened HongSiRN.xcworkspace in XCode 10\n- fixed compile error in TestCodePush/ios/Pods/ReactiveCocoa/ReactiveCocoa/NSObject+Intercepting.swift line 218\n- run app from XCode\n- code-push release-react issue1408-ios ios --p ./ios/HongSiRN/Staging.plist\n- triggered code-push sync. Result - changes were applied,  no rollback.\nrepeated last two steps several times - changes were applied, no rollbacks.\nTested on iOS emulators 12 and 8.4\nPlease check my steps if I missed something? Is the issue reproduced stably for demo repository in your case?\nAlso rollbacks can be related to different binary versions. For example one of your users haven't updated binary version of application and tried to apply updates from CodePush. In this case new js code can fail as it isn't compatible with old native code.. Hi @sunny635533! Thanks for logs! The error here says that your packageHash in CodePush update differs from calculated hash after install this update. So something is wrong in hash calculation. Also I've noticed that there is a mention of react-native-ratings package in your logs. But there is no such package in demo repository. Could you update the repo that I could try to reproduce your issue once again?. What exactly command (with all parameters) do you use to release new update and from what folder do you execute it?. Am I right that you run code-push release-react from ios folder?\nAnd is the issue reproduced on your side from demo repository?. Are you using code singing feature for your real project?. CodePushPublicKey is not the same as codePushDeploymentKey. Code singing feature uses CodePushPublicKey. codePushDeploymentKey is used for checking necessary updates (Int/Staging/Production).\nYou mentioned that your real app stays at update's progress page but demo project has no such progress. Could you add such progress dialog/page into demo project or describe how to call it if it already exists there?. If you don't use --privateKeyPath option in release-react command then it's not necessary to add CodePushPublicKey in your project. \nIt seems I've finally reproduced the issue. I've got logs similar to yours:\n...\n2018-11-16 19:28:05.925 [info][tid:com.facebook.react.JavaScript] code-push onHotpatchDownloadProgress done is 209265,total is 343209\n2018-11-16 19:28:06.063 [info][tid:com.facebook.react.JavaScript] code-push onHotpatchDownloadProgress done is 343209,total is 343209\n2018-11-16 19:28:14.724 HongSiRN[10796:1624755] \n[CodePush] Applying diff update.\n2018-11-16 19:28:14.725 HongSiRN[10796:1624755] \n[CodePush] Verifying hash for folder path: /var/mobile/Containers/Data/Application/BE373089-CCE7-40CC-94CB-4F1403017475/Library/Application Support/CodePush/8b0594563f5cdd806c9d9b87a10c3d7b2c83fc2510dd8b3a22a20965e1e5d28b\n2018-11-16 19:28:18.411 HongSiRN[10796:1624755] \n[CodePush] Manifest string: (\n    \"CodePush/assets/assets/chezhu/1.png:8ef9b3cec3eb2f675821eb148c25f81afca41bbee1c9b901afd0bc05e82b08f4\",\n    \"CodePush/assets/assets/chezhu/10.png:8ef9b3cec3eb2f675821eb148c25f81afca41bbee1c9b901afd0bc05e82b08f4\",\n    \"CodePush/assets/assets/chezhu/11.png:8ef9b3cec3eb2f675821eb148c25f81afca41bbee1c9b901afd0bc05e82b08f4\",\n    \"CodePush/assets/assets/chezhu/12.png:8ef9b3cec3eb2f675821eb148c25f81afca41bbee1c9b901afd0bc05e82b08f4\",\n    \"CodePush/assets/assets/chezhu/13.png:8ef9b3cec3eb2f675821eb148c25f81afca41bbee1c9b901afd0bc05e82b08f4\",\n    \"CodePush/assets/assets/chezhu/14.png:8ef9b3cec3eb2f675821eb148c25f81afca41bbee1c9b901afd0bc05e82b08f4\",\n    \"CodePush/assets/assets/chezhu/15.png:8ef9b3cec3eb2f675821eb148c25f81afca41bbee1c9b901afd0bc05e82b08f4\",\n    \"CodePush/assets/assets/chezhu/16.png:8ef9b3cec3eb2f675821eb148c25f81afca41bbee1c9b901afd0bc05e82b08f4\",\n    \"CodePush/assets/assets/chezhu/17.png:8ef9b3cec3eb2f675821eb148c25f81afca41bbee1c9b901afd0bc05e82b08f4\",\n    \"CodePush/assets/assets/chezhu/18.png:8ef9b3cec3eb2f675821eb148c25f81afca41bbee1c9b901afd0bc05e82b08f4\",\n    \"CodePush/assets/assets/chezhu/19.png:8ef9b3cec3eb2f675821eb148c25f81afca41bbee1c9b901afd0bc05e82b08f4\",\n    \"CodePush/assets/assets/chezhu/2.png:8ef9b3cec3eb2f675821eb148c25f81afca41bbee1c9b901afd0bc05e82b08f4\",\n    \"CodePush/assets/assets/chezhu/20.png:8ef9b3cec3eb2f675821eb148c25f81afca41bbee1c9b901afd0bc05e82b08f4\",\n    \"CodePush/assets/assets/chezhu/21.png:8ef9b3cec3eb2f675821eb148c25f81afca41bbee1c9b901afd0bc05e82b08f4\",\n    \"CodePush/assets/assets/chezhu/3.png:8ef9b3cec3eb2f675821eb148c25f81afca41bbee1c9b901afd0bc05e82b08f4\",\n    \"CodePush/assets/assets/chezhu/4.png:8ef9b3cec3eb2f675821eb148c25f81afca41bbee1c9b901afd0bc05e82b08f4\",\n    \"CodePush/assets/assets/chezhu/5.png:a7a55db50913873fdf6d10ca6790763c9ab196a22d0878517829272b507fac6b\",\n    \"CodePush/assets/assets/chezhu/back@2x.png:1d92f28b9ed1aed0110d2d41fd891c0e1a196d2b74dd9380e04e3b49194dd764\",\n    \"CodePush/assets/assets/chezhu/back@3x.png:438c3970aaaee38198d4f2d6315778225caedd63ba7b85cee0ab76f124ae1199\",\n    \"CodePush/main.jsbundle:73b8579ef08451d50792a95f8463a15b5d3ce817594d5eee74227566fe63a119\",\n    \"CodePush/main.jsbundle.meta:563c6f75adb58c3864484c1450196f6895aeaa601102d9e2c97369f186c9eb5a\"\n)\n2018-11-16 19:28:18.423 HongSiRN[10796:1624755] \n[CodePush] Expected hash: 8b0594563f5cdd806c9d9b87a10c3d7b2c83fc2510dd8b3a22a20965e1e5d28b, actual hash: 21cb26eaee413f32c17f7c532993950bf39d43fd7972373ac9def972020758fc\n2018-11-16 19:28:18.423 HongSiRN[10796:1624755] \n[CodePush] The update contents failed the data integrity check.\nThe cause of the problem is that there is no enough space on device. As we can see in logs CodePush plugin tries Applying diff update. Diff update has small size and contains only files that were changed in comparison with previous release. All other necessary files plugin tries to copy from previous update and fails because of insufficient space. So not all required files were copied. Then plugin calculates hash of new update and compare it with hash calculated on server. As hashes are different update process fails and rolls back to previous version.. I'm glad to hear that I could help you ) \nTo check available space I think you can use a RN plugin (something similar to this) or implement similar logic in your app by yourself. \n. @sunny635533 do you have any other questions?. I'll close the issue as it seems to be resolved, feel free to reach us if you need any help. \nThanks for using CodePush!. Hi all! I've just tested unbundling with CodePush and it seems that single unbundled indexed file works like ordinary RN bundle on both iOS and Android.\n@thecachedbyte you mentioned that now you are blocked by Could not get BatchedBridge error. Could you provide more details about that issue as I haven't faced with it?(perhaps it would be better to start new thread)\n@lithin did you get performance increasing by using default unbundling or with option --indexed-unbundle? The question is if it's enough for you to have a single unbundled indexed file to get performance improvements? During my investigation I've faced with crash if I try to run multiple files  unbundled package from file system not from apk assets.. Hi guys! I may have been a bit hasty. Yesterday I've faced with Could not get BatchedBridge error on Android when tried to prepare demo app. The error occurs even on pure RN application with --indexed-ram-bundle(replacement for --indexed-unbundle) option. So we have to wait till it's fixed in RN or any kind of workaround suggested. Here is a link to RN issue: https://github.com/facebook/react-native/issues/21282. Hi @squirly! Thanks for contributing.. Hi @abdohossam5! I've checked your scenario on basic RN app with integrated CodePush plugin in release mode on emulator iPhoneX(iOS 12.0) and real device iPhone6(iOS 12.0). There are no crashes. It's possible that you have some specific dependencies/logic. Could you please provide us with demo project that reproduces the issue?. Yes, write me an email v-nitoro@microsoft.com. Hi @abdohossam5! It's great! Could you please share your investigation results(here or via email)?. Hi @MatthieuLemoine! We had a pair of similar issues: https://github.com/Microsoft/react-native-code-push/issues/1368, https://github.com/Microsoft/react-native-code-push/issues/679. Could you try solutions suggested there? If they don't help please provide us with demo project that reproduce the issue. Currently we have no Circular dependency errors so the cause of the issue may be related to specific versions of gradle/gradle plugin or dependencies structure.. Hi @squirly! Thanks for contributing.. Hey guys! The issue is in minifying. It's required to keep mBundleLoader field of ReactInstanceManager unminified.\nSetup your proguard file with the following rule:\n-keepclassmembers class com.facebook.react.ReactInstanceManager {\n    private final ** mBundleLoader;\n}\nPlease, try this fix and let me know  if it solves the issue.\n. Created a PR#1425. @ivanbtrujillo what error do you get? Could you share output from logcat with error related to this issue? . Please take a look at attached demo: Issue1420.zip\nexecute yarn command in the root of the project, insert your deployment key in Issue1420/android/app/src/main/res/values/strings.xml, update singing config Issue1420/android/app/build.gradle, switch build variant to Release and run the app. Then publish CodePush updates and observe app behavior.\n. @ivanbtrujillo I'm glad to hear your issue was resolved.\nSo I'll close this issue for now as it seems to be resolved.\nPlease feel free to reopen it you have any question or create a new one.. @sundeepsingh12, @Udbhav12 we've fixed issue mentioned first(Unable to set JsBundle...). Now I'm sure you've faced with another one so please provide us with more info as @alexandergoncharov asked above that we could try to fix it.. @Udbhav12 the issue is that you don't call notifyAppReady\nPlease check in this docs:\n1. https://github.com/Microsoft/react-native-code-push#debugging--troubleshooting \n\"If you're not calling sync on app start (e.g. within componentDidMount of your root component), then you need to explicitly call notifyApplicationReady on app start, otherwise, the plugin will think your update failed and roll it back.\"\n1. https://github.com/Microsoft/react-native-code-push/blob/master/docs/api-js.md#codepushnotifyappready\nTry to add this code to your root component:\ncomponentDidMount() {\n    codePush.notifyAppReady();\n}. Hi @trubi! Yes, it's very weird issue. Here is a link to method that returns url(in local file system) from where bundle will be launched.\nAt the moment the only assumption is that something is wrong with CurrentPackage metadata so the code decides to use binary version. \nCodePush downloads and unpacks bundle in file:///var/mobile/Containers/Data/Application/{app_id}/Library/Application Support/CodePush/{package_hash}/CodePush/ directory. So if nothing is found here than binary version will be launched.\nIf you have any updates or repro steps/demo please share with us.. Hi @trubi! Do you have any updates/additional info on this issue?. Glad to hear! So I'll close this issue for now. Please reopen it if you face it again.. Hi @pvinis! Thanks for contributing!. Hi @kevinresol! Please could you provide step by step scenario that I could reproduce the issue (especially sequence of steps with changing target versions)? . Here is my steps:\n1. react-native init Issue1426 --version 0.56.0\n1. cd Issue1426\n1. yarn add react-native-code-push@$5.4.2\n1. code-push app add Issue1426-Android android react-native\n1. react-native link react-native-code-push\n1. code-push release-react Issue1426-Android android -t 1.0.0\n1. opened project in AndroidStudio; changed versionCode to 2 and versionName to 1.0.1; switched to release build variant; configured singing section and run app on real device.\n1. performed check for updates. Result: no updates as target version doesn't match app version\n1. code-push release-react Issue1426-Android android -t 1.0.1\n1. performed check for updates. Result: update was downloaded and successfully applied\nYou mentioned Play Store. Unfortunately we have no opportunity to post test apps for every issue there. Is it important step? I'm sure that this issue can be reproduced without posting app there.\nPlease check my steps if I missed something. . Please add required steps in my sequence that I could reproduce the issue.  It could be very helpful if you provide us with a demo app. Hey! I'm going to close this issue as there is no activity here. Should you still have any questions, you can reopen the issue or if you prefer you can create a new one.. Hi @ultramiraculous! Thanks for contributing! . Hi @js1121302139! Could you provide detailed steps that I could follow them and reproduce your issue? Also It would be great if you could provide a demo project that I could investigate and try to help to solve your issue.. Hi @clementinoux! Thanks for reporting an issue. \nI need exact steps to be able to create a basic RN app from scratch and try to reproduce your issue. So please provide me with step-by-step reproducible flow with specifying all versions/plugins that you use.. Hi guys! I'm going to close this issue as there is no activity here. Please reopen it or create a new one if you have possibility to provide detailed steps or demo project that to reproduce the issue.. Hi @youngjuning! Could you provide exact steps that I could use to create a basic RN app and try to reproduce this issue?. Hi @ferrannp! Please try the solution below:\nI guess your library has build.gradle file with specified versionName:\nandroid {\n    ...\n    defaultConfig {\n        ...\n        versionCode 123\n        versionName \"1.2.3\"\n        ...\n    }\n    ...\n}\nSo you can specify this versionName to use with CodePush. Just call CodePush.overrideAppVersion method before creating CodePush instance. As an argument pass your.library.package.BuildConfig.VERSION_NAME:\n@Override\nprotected List<ReactPackage> getPackages() {\n    CodePush.overrideAppVersion(your.library.package.BuildConfig.VERSION_NAME);\n    return Arrays.<ReactPackage>asList(\n        new MainReactPackage(),\n        new CodePush(getResources().getString(R.string.reactNativeCodePush_androidDeploymentKey), getApplicationContext(), BuildConfig.DEBUG)\n    );\n}\nIf you prefer to have different version to track then just add \nandroid {\n    ...\n    defaultConfig {\n        ...\n        buildConfigField \"String\", \"CodePushVersion\", \"\\\"1.1.2\\\"\"\n        ...\n    }\n    ...\n}\nand pass this CodePushVersion property to overrideAppVersion method.\nPlease let me know if was helpful for you.\n. Hi @RajeshBatth! Currently there is not possibility to do that. To solve your issue please try to use ON_NEXT_RESUME(restart the app the next time it is resumed from the background) option.\nPlease let me know if it was helpful or you have any other questions.. Sorry I have no such information. . @RajeshBatth I'll close this issue for now as it seems to be answered. Please feel free to reopen this issue or create a new one if you have any other question.. Hi @maxweb4u! Unfortunately I wasn't able to reproduce your issue. I performed the following steps:\n1. react-native init Issue1437 --version 0.56.0\n1. code-push app add Issue1437-Ios ios react-native\n1. cd Issue1437 && yarn add react-native-code-push@5.4.2\n1. react-native link react-native-code-push (and specified needed deployment keys)\n1. yarn add axios@0.18.0\n1. modified App.js file with fetching data via axios library (see attached demo below)\n1. opened Issue1437/ios/Issue1437.xcodeproj in XCode, changed Run configuration to Release and ran project\n1. performed several code-push updates and after every updated executed axios request. Result - data was fetched, no errors.\nPlease check my steps and correct them that I could reproduce issue on my side. Or take a look at attached demo and modify it to reproduce issue. \nNote: to run demo execute yarn first in project root and paste your deployment key in Issue1437\u2069/\u2068ios\u2069/Issue1437\u2069/Info.plist\nDemo: Issue1437.zip\n. Sorry, I haven't faced this error before so unfortunately can't help you. But you can try to configure my demo project to reproduce it and then we'll try to solve it together.. Hi @maxweb4u! I am going to close this issue for now as there is no activity here. Please feel free to reopen it if you have any updates or create a new one for other questions. Hi @ferrannp! \nYou can try to create instance of CodePushUpdateManager and call its getCurrentPackage method:\nCodePushUpdateManager updateManager = new CodePushUpdateManager(context.getFilesDir().getAbsolutePath());\nJSONObject currentPackage = updateManager.getCurrentPackage();\nif (currentPackage) {\n    // no CodePush updates\n    return;\n}\n// here extract required data from JSON\nAnother option is to implement the same logic by yourself based on CodePush source code.\nPlease let me know if it was helpful or you have any other questions.. If you have CodePush update then it doesn't depend when you check it. Our plugin just reads  metadata from two json files sequentially. So if your currentPackage is null then there is no codepush update yet or one of metadata files is damaged. Please try to debug from this line.. Hi @ferrannp! Were you able to get current package metadata? Or do you have any other questions?. Hey! \nWe haven\u2019t heard from you in a while, so I am going to go ahead and close this issue. Should you still have any questions, you can reopen the issue or if you prefer you can create a new one.. Hi @s349856186! As I know unfortunately there is no possibility to customize this Alert from javascript code. \nWe use the standard React Native Alert module to display the update dialog, which as far as I can tell, doesn't expose any way to control the text alignment. Under the covers, this module is using the system dialog for iOS and Android, including the default styling, which I believe provides the most consistent looking experience for end users.\nSo the only option to control dialog appearance is to use a custom 3rd party dialog module that supported it. But in this case you'll have to implement your own sync method (based on original one).\nLet me know if you have any other questions.. Hi @cgerikj! We have a clearUpdates method (added in PR#1269):\n\n\nclearUpdates: Clear all downloaded CodePush updates. This is useful when switching to a different deployment which may have an older release than the current package. \nNote: we don\u2019t recommend to use this method in scenarios other than that (CodePush will call this method automatically when needed in other cases) as it could lead to unpredictable behavior.\n\n\nPlease check if it's suitable for your case.. Cool! Thanks for using CodePush!. Hi @s349856186! You can pass custom localized resources to update dialog through updateDialog parameter of sync method:\nsync({\n  updateDialog: {\n      appendReleaseDescription: false,\n      descriptionPrefix: \" Description: \",\n      mandatoryContinueButtonLabel: \"Continue\",\n      mandatoryUpdateMessage: \"An update is available that must be installed.\",\n      optionalIgnoreButtonLabel: \"Ignore\",\n      optionalInstallButtonLabel: \"Install\",\n      optionalUpdateMessage: \"An update is available. Would you like to install it?\",\n      title: \"Update available\"\n  }\n});\nFor detailed description please look at updateDialog section in this doc.\nLet me know if it was helpful for you or you have any other questions.. Hi @abaddonGIT! Do you have any logs (besides sentry) or investigation results specifying that the issue is related to CodePush? Are you able to reproduce the issue on demo RN project created from scratch with integrated CodePush plugin? Did you try to bump up versions of RN and CodePush plugin?\nWe require as more info as possible about your project to try to help you. Also it would be very helpful if you could create demo project that reproduce the issue.. Hey! \nWe haven\u2019t heard from you in a while, so I am going to go ahead and close this issue. Should you still have any questions, you can reopen the issue or if you prefer you can create a new one.. Hi @qq326646683! Thanks for reporting it. Do you have detailed repro steps or demo project that I could try to reproduce your issue and help to solve it. Also please share logs from LogCat with this exception.. @yz1311 Thanks for logs! Any repro steps/demo project?. @yz1311 do you have possibility to try to reproduce the issue on such devices?\nIt seems that this issue is device specific. So testing on such devices can point us in the right direction.. Hi @DavideValdo! One clarification: do you launching a React Native instance without an Activity (for example, from within a native push notification receiver)?. @DavideValdo did you try to use this docs or it doesn't suit you?\nAs for the example code you specified then it seems it's obsolete and required to be updated.. Please try such code:\n```\npublic class MainApplication extends Application implements ReactApplication {\n  ...\n  private ReactInstanceHolder instanceHolder = new ReactInstanceHolder() {\n    @Override\n    public ReactInstanceManager getReactInstanceManager() {\n      return mReactNativeHost.getReactInstanceManager();\n    }\n  };\n@Override\n  public void onCreate() {\n    ...\n    CodePush.setReactInstanceHolder(instanceHolder);\n    ...\n  }\n  ...\n}\n``. Great!  We'll update docs a bit later. Will leave this issue opened until fix it.. It seems that this deletion is unnecessary here as the same is done on lines 148-151 andnewUpdateFolderPathfolder isn't created tillFileUtils.copyDirectoryContents(unzippedFolderPath, newUpdateFolderPath)` (your 245 line). ",
    "joshuafeldman": "Pull request https://github.com/Microsoft/react-native-code-push/pull/428\n. @geof90 after using it for a while it looks like this doesn't actually work and is causing a rollback on second launch. Looks like some of the other code push classes make assumptions about the directory structure. In CodePushPackage.m there is a method called -getBinaryAssetsPath which is assuming that assets exists at the root of the bundle. I believe this assumption is breaking this. I advise we fix these assumptions (not sure if there are more yet) or rollback the change in your master branch since it will break for people. This ticket should be reopened.\n. I see this in the console\n[info][tid:com.facebook.react.JavaScript] [CodePush] Checking for update.\n[info][tid:com.facebook.react.JavaScript] [CodePush] An unknown error occurred.\n[info][tid:com.facebook.react.JavaScript] [CodePush] g.getCurrentPackage is not a function. (In 'g.getCurrentPackage()', 'g.getCurrentPackage' is undefined)\n. @geof90 I updated to this branch and I can confirm is does fix the rollback after first launch. Any chance we can get this merged in and the version updated so we can go back to using the master branch?\nThanks!!!\n. ",
    "mcrowe": "Yeah. That caught me off-guard, too. Especially considering the behaviour is platform specific. Overall, CodePush has been a ridiculously amazing tool to use. Seriously awesome open-source contribution!\ndisallowRestart solves the issue for me just fine. To be honest, I didn't think of that solution until I wrote up my issue above.\n. Running react-native link react-native-code-push currently adds an incorrect header search path as @ujwal-setlur witnessed. If you have run that command, you will need to:\n1) Follow the instructions under Manual Plugin Installation\n2) Change the Header Search Paths entry for code-push to $(SRCROOT)/../node_modules/react-native-code-push/ios. ",
    "greenteamer": "@geof90 actualy react-native link does not work to\n. @geof90 yes, thank you, i don't use manual correctly in first time, but now everything allright!\n. ",
    "ps-swaroop": "Hi,\nI am still getting the same issue. Can someone please help?\ncode-push version : 1.12.1-beta\nreact-native version : 0.30.0\n. package com.tute.codepushdemo;\nimport android.app.Application;\nimport com.facebook.react.ReactApplication;\nimport com.facebook.react.ReactNativeHost;\nimport com.facebook.react.ReactPackage;\nimport com.facebook.react.shell.MainReactPackage;\nimport com.microsoft.codepush.react.CodePush;\nimport java.util.Arrays;\nimport java.util.List;\n/*\n- Created by satyanarayana.p on 04/08/16.\n  /\n  public class MainApplication extends Application implements ReactApplication{\n  @Override\n  public ReactNativeHost getReactNativeHost() {\n      return mReactNativeHost;\n  }\nprivate final ReactNativeHost mReactNativeHost = new ReactNativeHost(this) {\n      // 2. Override the getJSBundleFile method in order to let\n      // the CodePush runtime determine where to get the JS\n      // bundle location from on each app start\n      @Override\n      protected String getJSBundleFile() {\n          return CodePush.getJSBundleFile();\n      }\n```\n  @Override\n  protected boolean getUseDeveloperSupport() {\n      return true;\n  }\n@Override\n  protected List getPackages() {\n      // 3. Instantiate an instance of the CodePush runtime and add it to the list of\n      // existing packages, specifying the right deployment key. If you don't already\n      // have it, you can run \"code-push deployment ls  -k\" to retrieve your key.\n      return Arrays.asList(\n              new MainReactPackage(),\n              new CodePush(\"ZJTOemC_YjYc7OZqFWgKX6AVCNpq4yEgjuq_Z\", MainApplication.this, BuildConfig.DEBUG)\n      );\n  }\n  ```\n};\n  }\n. I am not using es7 decorator\n. Using \"require\" also didn't work.\n. var CodePush = require(\"react-native-code-push\");\nclass HelloWorld extends React.Component {\n  componentDidMount() {\n    CodePush.sync({ updateDialog: { title: \"An update is available!\" } });\n  }\n  render() {\n    return (\n      \nHello, World\n\n    )\n  }\n}\n. 'use strict';\nimport React from 'react';\nimport {\n  AppRegistry,\n  StyleSheet,\n  Text,\n  View\n} from 'react-native';\nvar CodePush = require(\"react-native-code-push\");\nclass HelloWorld extends React.Component {\n  componentDidMount() {\n    CodePush.sync({ updateDialog: { title: \"An update is available!\" } });\n  }\n  render() {\n    return (\n      \nHello, World\n\n    )\n  }\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n  },\n  hello: {\n    fontSize: 20,\n    textAlign: 'center',\n    margin: 10,\n  },\n});\nAppRegistry.registerComponent('HelloWorld', () => HelloWorld);\nThis is the whole code. I just posted a snippet earlier.\n. @geof90 I mailed you few more details. The funny thing is if I create a new project using \"react-native init AwesomeProject\" everything works fine. Issue occurs every time I try to integrate to an existing project.\n. I was not configuring well. Issue is fixed\n. ",
    "jkrems": "The problem comes up when only a small part of an app is developed using react native and the app already has a versioning policy. During the development of one app version there might be multiple (incompatible) iterations of the JavaScript side because of changes in native/JS interfaces. But it might not be feasible to bump the app store version \"randomly\" because of it when other, non-react native-related things are already depending with that value.\nIn other words: The app store version may already have an established meaning and it might not be \"semver ABI version for react-native JS/native code interactions\".\n. It's not blocking me right now. I mostly wanted to get a feeling if this is something you'd consider adding to the SDK.\n. That sounds good & matches what I had in mind when creating the issue! Given that it's supposed to be a version for the native interface, changing it at runtime (at least on iOS, not sure what Android would allow) seems less important.\n. Thanks!\n. ",
    "ilovelll": "Hi @silhouettes here is the build.gradle\n```\napply plugin: \"com.android.application\"\nimport com.android.build.OutputFile\n/\n * The react.gradle file registers a task for each build variant (e.g. bundleDebugJsAndAssets\n * and bundleReleaseJsAndAssets).\n * These basically call react-native bundle with the correct arguments during the Android build\n * cycle. By default, bundleDebugJsAndAssets is skipped, as in debug/dev mode we prefer to load the\n * bundle directly from the development server. Below you can see all the possible configurations\n * and their defaults. If you decide to add a configuration block, make sure to add it before the\n * apply from: \"../../node_modules/react-native/react.gradle\" line.\n \n * project.ext.react = [\n *   // the name of the generated asset file containing your JS bundle\n *   bundleAssetName: \"index.android.bundle\",\n \n *   // the entry file for bundle generation\n *   entryFile: \"index.android.js\",\n \n *   // whether to bundle JS and assets in debug mode\n *   bundleInDebug: false,\n \n *   // whether to bundle JS and assets in release mode\n *   bundleInRelease: true,\n \n *   // whether to bundle JS and assets in another build variant (if configured).\n *   // See http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Build-Variants\n *   // The configuration property can be in the following formats\n *   //         'bundleIn${productFlavor}${buildType}'\n *   //         'bundleIn${buildType}'\n *   // bundleInFreeDebug: true,\n *   // bundleInPaidRelease: true,\n *   // bundleInBeta: true,\n \n *   // the root of your project, i.e. where \"package.json\" lives\n *   root: \"../../\",\n \n *   // where to put the JS bundle asset in debug mode\n *   jsBundleDirDebug: \"$buildDir/intermediates/assets/debug\",\n \n *   // where to put the JS bundle asset in release mode\n *   jsBundleDirRelease: \"$buildDir/intermediates/assets/release\",\n \n *   // where to put drawable resources / React Native assets, e.g. the ones you use via\n *   // require('./image.png')), in debug mode\n *   resourcesDirDebug: \"$buildDir/intermediates/res/merged/debug\",\n \n *   // where to put drawable resources / React Native assets, e.g. the ones you use via\n *   // require('./image.png')), in release mode\n *   resourcesDirRelease: \"$buildDir/intermediates/res/merged/release\",\n *\n *   // by default the gradle tasks are skipped if none of the JS files or assets change; this means\n *   // that we don't look at files in android/ or ios/ to determine whether the tasks are up to\n *   // date; if you have any other folders that you want to ignore for performance reasons (gradle\n *   // indexes the entire tree), add them here. Alternatively, if you have JS files in android/\n *   // for example, you might want to remove it from here.\n *   inputExcludes: [\"android/\", \"ios/\"],\n \n *   // override which node gets called and with what additional arguments\n *   nodeExecutableAndArgs: [\"node\"]\n \n *   // supply additional arguments to the packager\n *   extraPackagerArgs: []\n * ]\n */\napply from: \"../../node_modules/react-native/react.gradle\"\n// apply from \"../../node_modules/react-native-code-push/android/codepush.gradle\"\n/*\n * Set this to true to create two separate APKs instead of one:\n *   - An APK that only works on ARM devices\n *   - An APK that only works on x86 devices\n * The advantage is the size of the APK is reduced by about 4MB.\n * Upload all the APKs to the Play Store and people will download\n * the correct one based on the CPU architecture of their device.\n /\ndef enableSeparateBuildPerCPUArchitecture = false\n/*\n * Run Proguard to shrink the Java bytecode in release builds.\n /\ndef enableProguardInReleaseBuilds = false\nandroid {\n    compileSdkVersion 23\n    buildToolsVersion \"23.0.1\"\ndefaultConfig {\n    applicationId \"com.myapp\"\n    minSdkVersion 16\n    targetSdkVersion 22\n    versionCode 1\n    versionName \"1.0.0\"\n    ndk {\n        abiFilters \"armeabi-v7a\", \"x86\"\n    }\n}\nsigningConfigs {\n    release {\n        storeFile file(MYAPP_RELEASE_STORE_FILE)\n        storePassword MYAPP_RELEASE_STORE_PASSWORD\n        keyAlias MYAPP_RELEASE_KEY_ALIAS\n        keyPassword MYAPP_RELEASE_KEY_PASSWORD\n    }\n}\nsplits {\n    abi {\n        reset()\n        enable enableSeparateBuildPerCPUArchitecture\n        universalApk false  // If true, also generate a universal APK\n        include \"armeabi-v7a\", \"x86\"\n    }\n}\nbuildTypes {\n    release {\n        minifyEnabled enableProguardInReleaseBuilds\n        proguardFiles getDefaultProguardFile(\"proguard-android.txt\"), \"proguard-rules.pro\"\n        signingConfig signingConfigs.release\n    }\n}\n// applicationVariants are e.g. debug, release\napplicationVariants.all { variant ->\n    variant.outputs.each { output ->\n        // For each separate APK per architecture, set a unique version code as described here:\n        // http://tools.android.com/tech-docs/new-build-system/user-guide/apk-splits\n        def versionCodes = [\"armeabi-v7a\":1, \"x86\":2]\n        def abi = output.getFilter(OutputFile.ABI)\n        if (abi != null) {  // null for the universal-debug, universal-release variants\n            output.versionCodeOverride =\n                    versionCodes.get(abi) * 1048576 + defaultConfig.versionCode\n        }\n    }\n}\n\n}\ndependencies {\ncompile fileTree(dir: 'libs', include: ['*.jar'])\ncompile 'com.android.support:appcompat-v7:23.0.1'\ncompile 'com.facebook.react:react-native:+'\n// From node_modules\ncompile project(':react-native-code-push')\ncompile project(':react-native-camera')\ncompile project(':react-native-fs')\ncompile project(':react-native-zip-archive')\ncompile project(':react-native-sqlite-storage')\ncompile project(':react-native-share')\ncompile 'org.jetbrains:annotations-java5:15.0'\n\n}\n// Run this once to be able to run the application with BUCK\n// puts all compile dependencies into folder libs for BUCK to use\ntask copyDownloadableDepsToLibs(type: Copy) {\n  from configurations.compile\n  into 'libs'\n}\n```\n. Hi @silhouettes , very thank you! It can build success now.\nSorry for my stupid mistake. This issue can be close.\n. After unchecked the debug executable option in schema, the code-push can be installed normly.\n. ",
    "ghost": "Closing to decrease visibility.\n. @silhouettes Native apps have the benefit of security through obscurity. While it may be possible to access the source code of an RN app by snooping, it seems to me it'd be much harder than, say, a web application. But access to the source is not my primary concern, it's the possibility of overwriting someone's app once you know their key. If that's possible, even in a beta stage, I'd strongly suggest updating the docs to warn users and provide a method for abstracting secrets away into an environment variable or config outside the application. What do you think?\n. @silhouettes yes, and thanks for helping me get past that concern!\n. Sure, we do have a jsCodeLocation line there. If it helps, we made two modifications to the stock AppDelegate.m file, - added the facebooksdk, added crashlytics integration which overrides the rn logging facility.\nAppDelegate.m\n```\n/\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n \n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n /\nimport \"AppDelegate.h\"\nimport \nimport \"RCTBundleURLProvider.h\"\nimport \"RCTRootView.h\"\n//START Crashlytics stuff\nimport \nimport \nimport \nimport \"RCTLog.h\"\n//END Crashlytics stuff\n@implementation AppDelegate\n\n(BOOL)application:(UIApplication )application didFinishLaunchingWithOptions:(NSDictionary )launchOptions\n{\n  //START Fabric Crashlytics stuff\n  [Fabric with:@[[Crashlytics class]]];\n  RCTSetLogThreshold(RCTLogLevelInfo);\n  RCTSetLogFunction(CrashlyticsReactLogFunction);\n  //END Fabric Crashlytics stuff\n\nNSURL *jsCodeLocation;\njsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index.ios\" fallbackResource:nil];\nRCTRootView *rootView = [[RCTRootView alloc] initWithBundleURL:jsCodeLocation\n                                                      moduleName:@\"TravelIago\"\n                                               initialProperties:nil\n                                                   launchOptions:launchOptions];\n  rootView.backgroundColor = [[UIColor alloc] initWithRed:1.0f green:1.0f blue:1.0f alpha:1];\nself.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];\n  UIViewController *rootViewController = [UIViewController new];\n  rootViewController.view = rootView;\n  self.window.rootViewController = rootViewController;\n  [self.window makeKeyAndVisible];\n  return YES;\n}\n\n(BOOL)application:(UIApplication )application openURL:(NSURL )url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {\n  BOOL handled = [[FBSDKApplicationDelegate sharedInstance] application:application\n                                                                openURL:url\n                                                      sourceApplication:sourceApplication\n                                                             annotation:annotation\n                  ];\n  // Add any custom logic here.\n  return handled;\n}\n\nRCTLogFunction CrashlyticsReactLogFunction = ^(\n                                               RCTLogLevel level,\n                                               __unused RCTLogSource source,\n                                               NSString fileName,\n                                               NSNumber lineNumber,\n                                               NSString message\n                                               )\n{\n  NSString log = RCTFormatLog([NSDate date], level, fileName, lineNumber, message);\nifdef DEBUG\nfprintf(stderr, \"%s\\n\", log.UTF8String);\n  fflush(stderr);\nelse\nCLS_LOG(@\"REACT LOG: %s\", log.UTF8String);\nendif\nint aslLevel;\n  switch(level) {\n    case RCTLogLevelTrace:\n      aslLevel = ASL_LEVEL_DEBUG;\n      break;\n    case RCTLogLevelInfo:\n      aslLevel = ASL_LEVEL_NOTICE;\n      break;\n    case RCTLogLevelWarning:\n      aslLevel = ASL_LEVEL_WARNING;\n      break;\n    case RCTLogLevelError:\n      aslLevel = ASL_LEVEL_ERR;\n      break;\n    case RCTLogLevelFatal:\n      aslLevel = ASL_LEVEL_CRIT;\n      break;\n  }\n  asl_log(NULL, NULL, aslLevel, \"%s\", message.UTF8String);\n};\n@end\n```\n. @geof90 you were right! I did a console.log right after the glob search and found that it was picking up an AppDelegate.m file from sample projects that come packaged with the Facebook SDK. Probably something to watch out for. \nTo fix it - I just hardcoded the value like so in postlink.js:\nvar appDelegatePath = \"ios/TravelIago/AppDelegate.m\"\nInstead of doing a glob search, how about just getting the app name from package.json and appending to a string? i.e. \"ios/$appname/AppDelegate.m\"\n. If it's a breaking change may I suggest bumping the major in accordance with SemVer unless you've got something more practical going on.. Fair enough. I'm preserving link vestiges so I'll add a strikethrough and a link to the archived redirect: https://web.archive.org/web/20160402102250/http://codepush.tools/. ",
    "kelset": "Hi guys.\nI tried @geof90 workaround but it didn't work for me: moreover, I'm not entirely sure why modifying Line 90 should have any effect on forcing the app to get the \"codepush staging in remote\" version (but I'm 99% sure it's simply because I can't understand properly how it all works).\nIn the Deepak Sisodiya video a similar workaround for the iOS Simulator is to:\n1. Modify the AppDelegate.m to force the JSCode location to be \"remote\":\n```\njsCodeLocation = [CodePush bundleURL];\n//#ifdef DEBUG\n////  jsCodeLocation = [NSURL URLWithString:@\"http://localhost:8081/index.ios.bundle?platform=ios&dev=true\"];\n//  jsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index.ios\"fallbackResource:nil];\n//#else\n//  jsCodeLocation = [CodePush bundleURL];\n//#endif\n//\n``\n1. Commenting around lines 18-19 innode_modules/react-native/packager/react-native-code.sh` the lines:\nif [[ \"$PLATFORM_NAME\" = \"iphonesimulator\" ]]; then\n      echo \"Skipping bundling for Simulator platform\"\n      # I have to comment this in order to make CodePush work in iOS simulator\n      # exit 0;\n    fi\n(I'm writing it here since. as @silhouettes wrote, we'll use this issue for documentation)\nThat said, the #153 issue give a good explanation of why this issue happen:\n\nOn Android, React Native forces the JS bundle to be loaded from the packager, and therefore, doesn't consult the CodePush plugin where to get it from.\n\nBut still I don't know how to get to my objective, which is to have an Android device running my react-native application \"pointing\" to my staging deployment instead of localhost. Is Generating Signed APK the only way?\n. > For getting data from codepush in android. You need to make a release build and run in device then only it will get data from codepush. \nYes, I understand better know.\nThanks all.\n. Hey @max-mironov, thanks for pointing out that extract, didn't read that document.\nI guess that, then, there is probably a fine line there of showing something without \"forcing\" and still allowing the user to keep using the app in the standard way.\n(I think that we can close the issue then, maybe I can submit a small PR to have all these information in the README). @christophmegusta that's another repo, I've submitted a PR to this one.. I don't understand why you think the rejection is linked to react-native-code-push, since the two paragraphs you mentioned are not related to it.. > just because I noticed that some developers received warning email from Apple\nCan you link/clarify where did you hear about this?\n\nI'm not sure whether CodePush is also not allowed\n\nIt is, there is a whole section of the README about it.\nMoreover, the two paragraphs you mentioned are not related to codepush's functionality imho.. Hey @just4fun thanks for keeping this issue updated.\nIt's quite weird, tbh, that you are getting so many troubles for code-push. I've recently submitted the new version of our app and it got rejected 3 times but never for code-push related issues. Maybe it's related to the market you are developing your app for? \ud83e\udd14. > What this framework does is super prohibited in the App Store guidelines, really.\nThat's not true. At all. And there's a section in the README dedicated to explaining it deeply.\n\nLet's say that you upload a app that let's you tweet, super simple, and it gets approved on the App Store. The next day you just change the whole jsBundle cause you want to have a porn app, and now teenagers who downloaded your \"twitter app\" have a porn app in their phones... See what I mean?\n\nThat's the only scenario they prohibit.\nYou can use CP without worries as long as you use it properly for OTA updates of the app you got approved.. @Zakeelm any update on the roadmap between now & October? Will this feature be implemented? \ud83d\ude07\nOr we should start shifting towards the App Center altogether?. Hey @sergey-akhalkov @ruslan-bikkinin, sorry to bother you for this issue, but it seems that in the past two issues related to this there have not been many steps forward (#1102, #778) to supporting it and the plan from the RN Core is to push for this feature to be \"on by default\" in a future release - you can read the details here.. ",
    "deepaksisodiya": "@Sciandra-Leva \nHi, In my video I told to change file AppDelegate.m and node_modules/react-native/packager/react-native-code.sh for testing purpose only (only for IOS simulator). after testing you should revert your changes as it was.\nHere is the project for i made while making the video. https://github.com/deepaksisodiya/reactnative-codepush\n. @Sciandra-Leva \nHey, For getting data from codepush in android. You need to make a release build and run in device then only it will get data from codepush.\nreact-native run-android make debug build not the release build.\nHere is the link on how to make release build https://facebook.github.io/react-native/docs/signed-apk-android.html\n. ",
    "pthrasher": "``\nlet opts = {\n  title: 'Choose a Photo', // specify null or empty string to remove the title\n  cancelButtonTitle: 'Cancel',\n  takePhotoButtonTitle: 'Take Photo', // specify null or empty string to remove this button\n  // specify null or empty string to remove this button\n  chooseFromLibraryButtonTitle: 'Choose Photo from Library',\n  maxHeight: 900,\n  maxWidth: 900,\n  quality: 1,\n  cameraType: 'back', // 'front' or 'back'\n  mediaType: 'photo', // 'photo' or 'video'\n  allowsEditing: true, // Built in functionality to resize/reposition the image after selection\n  // photos only - disables the base64data` field from being generated\n  // (greatly improves performance on large photos)\n  noData: false,\n  storageOptions: {\n    skipBackup: true,\n    path: 'uploads',\n  },\n};\nImagePickerManager.showImagePicker(opts, (response) => {\n  if (response.didCancel) {\n    // handle user cancel case.\n  } else if (response.error) {\n    // handle error case.\n  } else if (response.customButton) {\n    // Handle custom button response.\n  } else {\n    // Handle photo upload.\n  }\n});\n```\n. ",
    "KGALLET": "Yes, I have it in my MainApplication. The setup of the plugin is nice, but I think this is the way I use to update my app that isn't..\n. I reupload a new binary version of my app on Play Store. Now it seems to be ok. \nClosed. :)\nThx\n. ",
    "ComethTheNerd": "Have you tried requiring the dependency instead of importing it:\nvar codePush = require(\"react-native-code-push\");\n. ",
    "greena13": "I am getting this issue, also. Are you able to please share your solution for others who find their way to this page?\nEdit: The solution for me was a combination of a number of things.\n- The recommended instructions for <=1.9.0-beta of the CodePush plugin\n- Reading the source code for CodePush.java\n- Consulting a similar issue\nUsing React Native 0.29.2, react-native-code-push 1.14.1-beta (which uses code-push 1.8.0-beta)\nThe relevant parts of MainApplication.java at the end of it looked like this:\n```\n// import code push\nimport com.microsoft.codepush.react.CodePush;\n// Add CodePush to MainApplication because of React Native >= 0.29.0; for earlier\n// versions add to MainActivity (refer to above instructions)\n// See https://github.com/Microsoft/react-native-code-push/tree/e717eb024fe9d1810ac21c40c097f7bc165ea5f1#plugin-configuration-android---react-native-v0180\npublic class MainApplication extends Application implements ReactApplication {\n  //  Define instance variable\n  private CodePush _codePush;\nprivate final ReactNativeHost mReactNativeHost = new ReactNativeHost(this) {\n@Override\nprotected boolean getUseDeveloperSupport() {\n  return BuildConfig.DEBUG;\n}\n\n@Override\nprotected String getJSBundleFile() {\n  // use the API described in <=1.9.0-beta instructions, adjusting for deprecated method\n  // See https://github.com/Microsoft/react-native-code-push/blob/e717eb024fe9d1810ac21c40c097f7bc165ea5f1/android/app/src/main/java/com/microsoft/codepush/react/CodePush.java\n  return _codePush.getJSBundleFile(\"index.android.bundle\");\n}\n\n@Override\nprotected List<ReactPackage> getPackages() {\n  // Set instance variable; pass MainApplication.this as second argument. For React\n  // Native < 0.29.0, I think you need just this.\n  _codePush = new CodePush(BuildConfig.CODEPUSH_KEY, MainApplication.this, BuildConfig.DEBUG);\n\n  return Arrays.<ReactPackage>asList(\n      new MainReactPackage(),\n      // include CodePush in list. Instructions suggest using _codePush.getReactPackage()\n      // but this is not defined for Code Push 1.8.0-beta.\n      // See https://github.com/attentiveness/reading/issues/11 for more information\n      _codePush\n  );\n}\n\n};\n}\n``\n. This ended up being an issue with React Native. It seemsreact.gradleexpects all release variants to have the phraserelease` in them, otherwise it builds it as a development build. This caused my app to crash. By renaming my staging variant to stagingRelease and running\n./gradlew assembleStagingRelease\nIt builds the release APK, but pointed at the Staging CodePush deployment, like I want. It's then just a matter of installing the APK on the device or emulator\n./gradlew installStagingRelease\nAnd confirming from the logs and release history that it is indeed retrieving bundles from the Staging deployment.\n. @SimchaShats edit your app/build.gradle's buildTypes and ensure any release or staging builds end in release or Release, eg stagingRelease. Otherwise, Gradle will not create the release bundle of your application. There is something incompatible with CodePush when it is built for release and when React still has all its debugging and development configuration turned on.\n. This ended up being because the version of react-native I was using (0.29.2) failed to complete the steps listed in https://github.com/Microsoft/react-native-code-push#plugin-configuration-ios automatically when I ran the link command. \nI had to perform them manually and I think the issue has now been resolved.\n. ",
    "rakshans1": "I had same issue when i was running app in remote device. It got fixed when i ran \nreact-native run-android and built the package again\n. ",
    "tristanbbq": "@greena13: same as @rakshans1 for me. I had the issue, but then ran react-native run-ios (iOS in my case) and it fixed it.\n. ",
    "joaosilva05": "I'm also having this issue.\nTried all of the above solutions but can't get it to work.\nThis is my index.android.js:\n```\nimport React from 'react';\nimport {\n  AppRegistry,\n  StyleSheet,\n  Text,\n  View\n} from 'react-native';\nvar CodePush = require(\"react-native-code-push\");\nlet codePushOptions = { checkFrequency: CodePush.CheckFrequency.ON_APP_RESUME };\nclass HelloWorld extends React.Component {\n  render() {\n    return (\n      \nMudei memo\n\n    )\n  }\n}\nHelloWorld = CodePush(codePushOptions)(HelloWorld);\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n  },\n  hello: {\n    fontSize: 20,\n    textAlign: 'center',\n    margin: 10,\n  },\n});\nAppRegistry.registerComponent('HelloWorld', () => HelloWorld);\n```\nAnd here is MyReactApplication.java:\n```\npublic class MyReactApplication extends MultiDexApplication implements ReactApplication {\nprivate CodePush _codePush;\n\nprivate final ReactNativeHost mReactNativeHost = new ReactNativeHost(this) {\n    @Override\n    protected String getJSBundleFile() {\n        return _codePush.getJSBundleFile();\n    }\n    @Override\n    protected boolean getUseDeveloperSupport() {\n        return BuildConfig.DEBUG;\n    }\n\n    @Override\n    protected List<ReactPackage> getPackages() {\n        _codePush = new CodePush(BuildConfig.CODEPUSH_KEY, MyReactApplication.this, BuildConfig.DEBUG);\n\n        List<ReactPackage> packages = new ArrayList<>();\n        packages.add(new MainReactPackage());\n        packages.add(_codePush);\n\n        return packages;\n    }\n};\n\n@Override\npublic ReactNativeHost getReactNativeHost() {\n    return mReactNativeHost;\n}\n\n}\n```. ",
    "MartinMobilize": "I have the same problem.\ncode-push version: 1.12.6 beta.\nreact-native version: 0.40 (also didn't work with 0.37 and 0.38).\nI tried the RNPM  and also the manual guide but it doesn't work.\nHere is my relevant code:\nimport codePush from \"react-native-code-push\";\nconst store = configureStore();\nregisterScreens(store, Provider);\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        store.dispatch(fetchUserState());\n        require('./strings/index');\n        this.startApp();\n    }\nstartApp() {\n    Navigation.startSingleScreenApp({\n        screen: {\n            screen: 'app.Group', // unique ID registered with Navigation.registerScreen\n            navigatorStyle: {}, // override the navigator style for the screen, see \"Styling the navigator\" below (optional)\n            navigatorButtons: {} // override the nav buttons for the screen, see \"Adding buttons to the navigator\" below (optional)\n        },\n        drawer: { // optional, add this  if you want a side menu drawer in your app\n            left: { // optional, define if you want a drawer from the left\n                screen: 'app.NavigationDrawer' // unique ID registered with Navigation.registerScreen\u05ea\n            }\n        },\n        passProps: {}, // simple serializable object that will pass as props to all top screens (optional)\n        animationType: 'slide-down' // optional, add transition animation to root change: 'none', 'slide-down', 'fade'\n    });\n}\n\n}\nApp = codePush(App);\nexport default App;. And on my android index.js I only create an instance of App component:\n*/\nimport App from './js/app';\nconst app = new App();\n. ",
    "rodrigopivi": "The problem here is that the JS file uses module.exports = ... and the typescript definition file expects a exports.default\nhttps://github.com/Microsoft/react-native-code-push/blob/master/CodePush.js#L536\nhttps://github.com/Microsoft/react-native-code-push/blob/master/typings/react-native-code-push.d.ts#L423\ncurrently i'm having to use:\njs\nconst CodePush = require(\"react-native-code-push\");\nor\njs\nimport * as CodePush from \"react-native-code-push\";\n(CodePush as any).sync(...);\nbut this breaks type tooling\n. expecting this to get merged soon, it\u00b4s breaking for RN 0.43, which is already at pre release state. ",
    "rahulmishra-goibibo": "The same error occurs for me too although on iOS. On android it works just fine. I installed and linked codepush to my ios app multiple times checking each step, but still i am getting the above error. And the log message says \"[CodePush] The CodePush module doesn't appear to be properly installed. Please double-check that everything is setup correctly\". I am really stuck. Could anyone please help me out. Hi, \nAfter pushing my app to the codepush server and then to the google play store i am getting a huge difference in total number of installs of the app by the users in codepush deployment history and google playstore. It's almost in the ratio 1:2 favouring the playstore. Can anybody guide me as why this could happen. Hi @sergey-akhalkov Thanks for the reply. But the above scenario does not apply to me. This was the first time that i had pushed an update for my app with codepush. And going by your example i released the version 1.1.1(with codepush) and after that i have neither increased the version nor updated it yet. Although currently the difference is not much, to be precise it's almost showing 6 thousands downloads for this version(with codepush i.e. 1.1.1) in play store and a few hundreds less in the codepush console (almost 5.5 thousands total downloads). While there may not be that big a difference now, still i am wondering what could possibly be the reason for this ?. @sergey-akhalkov Yes. Thank you for the clarification. Much appreciated. ",
    "amedeedaboville": "Not sure if this helps, but I had the same issue: iOS installation looked solid (libCodePush.a added, libz.tbd added, AppDelegate.m updated) but CodePush remained undefined after import and I got the  [CodePush] The CodePush module doesn't appear to be properly installed. Please double-check that everything is setup correctly warning.\nA Clean of the main project in Xcode, and then re-running react-native run-ios seemed to fix it. :man_shrugging: . ",
    "wvicioso": "cleaning xcode did not work. I'm using rn v .41. ",
    "soleilgl": "@sergey-akhalkov Hi, I am having the same issue, could you please help me?\nerror: undefined is not an object (evaluating '_reactNativeCodePush2.default.sync')\nI used all methods above, but still can not get it resolved.\n \"react\": \"15.4.2\",\n\"react-native\": \"0.42.3\",\n\"react-native-code-push\": \"1.17.0-beta\",\n\nthanks!. @sergey-akhalkov \nHi, my MainApplication.java file is like:\npackage com.app;\nimport com.facebook.react.ReactActivity;\npublic class MainActivity extends ReactActivity {\n/**\n * Returns the name of the main component registered from JavaScript.\n * This is used to schedule rendering of the component.\n */\n@Override\nprotected String getMainComponentName() {\n    return \"app\";\n}\n\n}\nI tried your method but still doesn't work...... i resolved it by using:\n$ react-native link react-native-code-push\nthanks!. ",
    "NedYork": "Hi @sergey-akhalkov , I'm running into the '(0, _reactNativeCodePush2.default) is not a function.' error in iOS only (Android is working properly). I've tried 'var codePush = require(\"react-native-code-push\");' instead of importing, but run into \"codePush is not a function. (In 'codePush(AppContainer)', 'codePush' is undefined)\" error. Cleaning in XCode and rerunning didn't work either. Also tried manual linking iOS. Any ideas?\nDependencies are as follows:\n\"react\": \"15.3.2\",\n\"react-native\": \"0.37.0\",\n\"react-native-code-push\": \"1.17.2-beta\",. ",
    "maotora": "I had this issue and in my case, I had to downgrade to react-native-code-push@3.0.1-beta.. ",
    "shrijanshukla89": "In my case, I had left the JS server running from the App1 (which had code-push)\nreact-native init App2\nreact-native run-android\nand then got this same error. wasted an hour. \nkilled JS server process. phew. everything works now.. ",
    "nodesman": "I was able to fix this by moving the codePush function call that wraps the root component to index.js rather that exporting it wrapped from the component's definition file. \nApp.js:\n```\nimport React, { Component } from 'react';\nimport {\n  Platform,\n  StyleSheet,\n  Text,\n  View\n} from 'react-native';\nconst instructions = Platform.select({\n  ios: 'Press Cmd+R to reload,\\n' +\n    'Cmd+D or shake for dev menu',\n  android: 'Double tap R on your keyboard to reload,\\n' +\n    'Shake or press menu button for dev menu',\n});\nclass App extends Component<{}> {\n  render() {\n    return (\n      \n\n          Welcome to React Native!\n        \n\n          To get started, edit App.js\n        \n\n          {instructions}\n        \n\n    );\n  }\n}\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#F5FCFF',\n  },\n  welcome: {\n    fontSize: 20,\n    textAlign: 'center',\n    margin: 10,\n  },\n  instructions: {\n    textAlign: 'center',\n    color: '#333333',\n    marginBottom: 5,\n  },\n});\nvar App = codePush(App); //WRONG! REMOVE THIS STATEMENT\nexport default App;\n```\nindex.js:\n```\nimport { AppRegistry } from 'react-native';\nimport MyRootElement from './App';\nimport codePush from \"react-native-code-push\";\nvar root = codePush(App);\nAppRegistry.registerComponent('kernelapp', () => root);\n```. ",
    "firofame": "this solved the error for me https://github.com/Microsoft/react-native-code-push/blob/master/docs/setup-android.md. ",
    "akash-cp": "Try re-installing react-native run-android after updating react native version.. ",
    "joevo2": "Im having this issue on iOS, weirdly enough if I run it through Xcode it works fine, but running through react-native run-ios it gives me the same undefined thing. ",
    "huang-xiao-jian": "I have the same issue on ios, manual setup solve the issue.\nhttps://github.com/Microsoft/react-native-code-push/blob/master/docs/setup-ios.md#plugin-installation-ios---manual. ",
    "HannanShaik": "@huang-xiao-jian Thanks dude. This worked. I had issue with the iOS only.. Got the answer from docs. https://microsoft.github.io/code-push/docs/react-native.html\n```\nnull if the app is currently running the JS bundle from the binary and not a CodePush update. This occurs in the following scenarios:\n\nThe end-user installed the app binary and has yet to install a CodePush update.\nThe end-user installed an update of the binary (e.g. from the store), which cleared away the old CodePush updates, and gave precedence back to the JS binary in the binary.\n```\n\nIn my case, Scenario 1 has happened.. Yes @max-mironov I will use getUpdateMetadata. \nIn case of a fresh release to app store, i will get null right? At this point should I call CodePush.sync() but there is no bundle that I have pushed to codepush yet.. ",
    "ksairi": "Hi all!\nI have a situation with codepush v5.4.2, react-native v0.57.3 in iOS v11.4.1, Xcode v9.4.2\nI followed the manual instructions and I have the same structure as @nodesman mentions.\nHere is how it is set up:\nclass DirectDrinks extends React.Component {\nrender () {\nreturn (\n<Provider store={store}>\n<App />\n</Provider>\n)\n}\n}\nconst DirectDrinksContainer = __DEV__ ?  DirectDrinks : codePush(DirectDrinks)\n  AppRegistry.registerComponent('DirectDrinks', () => DirectDrinksContainer)\n}\nThis is the error:\n[CodePush] Loading JS bundle from file:///var/mobile/Containers/Data/Application/4ADF3EFD-A35D-4F24-AA38-284DE595DFD1/Library/Application%20Support/CodePush/050d16fa25e1735660f781f94465dae99e21e6c3c3a369c9c979ed83b6156c3b/CodePush/main.jsbundle\n2018-11-29 10:07:30.657781+1300 DirectDrinks Rep Staging[443:280490] Task <BA15548B-E059-426D-A822-D008006BDE5F>.<2> finished with error - code: -999\n2018-11-29 10:07:30.963 [error][tid:com.facebook.react.JavaScript] undefined is not an object (evaluating 'h.init')\n2018-11-29 10:07:30.964970+1300 DirectDrinks Rep Staging[443:280568] undefined is not an object (evaluating 'h.init')\n2018-11-29 10:07:30.968 [fatal][tid:com.facebook.react.ExceptionsManagerQueue] Unhandled JS Exception: undefined is not an object (evaluating 'h.init')\n2018-11-29 10:07:30.968070+1300 DirectDrinks Rep Staging[443:280490] Unhandled JS Exception: undefined is not an object (evaluating 'h.init')\n2018-11-29 10:07:30.970 [error][tid:com.facebook.react.JavaScript] Module AppRegistry is not a registered callable module (calling runApplication)\n2018-11-29 10:07:30.969696+1300 DirectDrinks Rep Staging[443:280568] Module AppRegistry is not a registered callable module (calling runApplication)\n2018-11-29 10:07:30.970964+1300 DirectDrinks Rep Staging[443:280490] *** Terminating app due to uncaught exception 'RCTFatalException: Unhandled JS Exception: undefined is not an object (evaluating 'h.init')', reason: 'Unhandled JS Exception: undefined is not an object (evaluating 'h.init'), stack:\ninit@725:583\n<unknown>@658:787\nn@2:553\n<unknown>@654:808\nn@2:553\n<unknown>@653:148\nn@2:553\n<unknown>@651:381\nn@2:553\n<unknown>@647:658\nn@2:553\n<unknown>@641:349\nn@2:553\n<unknown>@640:79\nn@2:553\n<unknown>@337:380\nn@2:553\n<unknown>@336:79\nn@2:553\n<unknown>@335:79\nn@2:553\n<unknown>@334:79\nn@2:553\n<unknown>@328:206\nn@2:553\n<unknown>@327:79\nn@2:553\n<unknown>@13:913\nn@2:553\n<unknown>@12:30\nn@2:553\ni@2:266\nglobal code@1069:9\n'\n*** First throw call stack:\n(0x18161ad8c 0x1807d45ec 0x10145b7bc 0x101457c3c 0x181622580 0x181501748 0x18150656c 0x10146f5c0 0x1014b6724 0x1014b6480 0x180f0caa0 0x180f0ca60 0x180f169b4 0x180f172fc 0x180f17cc8 0x180f20098 0x18123fe70 0x18123fb08)\nlibc++abi.dylib: terminating with uncaught exception of type NSException\nIn __DEV__ no crashes, but when codepush() function executes, it crashes. It was a versioning problem. In the server there was a bundle created with version 5.0.0-beta.\nThen we updated code-push to its latest (5.4.2), there must have some big changes that some functions changed. That was the problem, we updated the bundle in server and is ok now!. Hi all!\nI have a situation with codepush v5.4.2, react-native v0.57.3 in iOS v11.4.1, Xcode v9.4.2\nI followed the manual instructions and I have the same structure as @nodesman mentions.\nHere is how it is set up:\nclass DirectDrinks extends React.Component {\nrender () {\nreturn (\n<Provider store={store}>\n<App />\n</Provider>\n)\n}\n}\nconst DirectDrinksContainer = __DEV__ ?  DirectDrinks : codePush(DirectDrinks)\n  AppRegistry.registerComponent('DirectDrinks', () => DirectDrinksContainer)\n}\nThis is the error:\nDirectDrinks Rep Staging[1019:756474] *** Terminating app due to uncaught exception 'RCTFatalException: Unhandled JS Exception: undefined is not an object (evaluating 'h.init')', reason: 'Unhandled JS Exception: undefined is not an object (evaluating 'h.init'), stack:\ninit@725:583\n<unknown>@658:787\nn@2:553\n<unknown>@654:808\nn@2:553\n<unknown>@653:148\nn@2:553\n<unknown>@651:381\nn@2:553\n<unknown>@647:658\nn@2:553\n<unknown>@641:349\nn@2:553\n<unknown>@640:79\nn@2:553\n<unknown>@337:380\nn@2:553\n<unknown>@336:79\nn@2:553\n<unknown>@335:79\nn@2:553\n<unknown>@334:79\nn@2:553\n<unknown>@328:206\nn@2:553\n<unknown>@327:79\nn@2:553\n<unknown>@13:913\nn@2:553\n<unknown>@12:30\nn@2:553\ni@2:266\nglobal code@1069:9\n'\n*** First throw call stack:\n(0x1822d2d8c 0x18148c5ec 0x100b58478 0x100b54960 0x1822da580 0x1821b9748 0x1821be56c 0x100b6c384 0x100bb3054 0x100bb2db0 0x181bc4aa0 0x181bc4a60 0x181bce9b4 0x181bcf2fc 0x181bcfcc8 0x181bd8098 0x181ef7e70 0x181ef7b08)\nlibc++abi.dylib: terminating with uncaught exception of type NSException\nIn __DEV__ no crashes, but when codepush() function executes, it crashes. It was a versioning problem. In the server there was a bundle created with version 5.0.0-beta.\nThen we updated code-push to its latest (5.4.2), there must have some big changes that some functions changed. That was the problem, we updated the bundle in server and is ok now!. ",
    "madsleejensen": "Ah the missing variable declaration was a mistake @silhouettes :) It should be fixed now! \n. ",
    "SimchaShats": "@greena13 Hi I have the same error but I didn't understand how to fix it? can you describe your solution please?\n. Can you show your whole build.grdale file, please?\n. I'm using ./gradlew assembleRelease or tried also \"generate signed apk\" from android studio, and copy apk to device, I checked assets directory and didn't find this file... But I generated a lot of apk I don't remember all ways how I did it, in of them I saw this file... But I don't know how generated this particular apk! :(\n. Ah I think I found the error... I added sign.config to build.gradle and ran ./gradlew assembleRelease in regular console without settings of Android Studio and it's created CodePushHash.json file. Sorry for issue.\n. @NullPointerGuy Hi it was long time ago so I don't remember really, I think I just tried to use assembleRelease from console and it worked, but not sure... Like @geof90 wrote. @NULLPointerGuy,Yep ofcours, attached this file...\nbuild.gradle.zip\n. Hi @silhouettes \nCodePush: \"version\": \"1.16.0-beta\"\nRN: 0.37. @silhouettes @vonovak may be it can be also important, I'm using wix-navigation, it has a little bit different point of entrance in application.... ",
    "chiragms": "@greena13 It worked like a charm. Thanks @greena13.\nSaved my day girl! Thanks a million.. ",
    "igrayson": "We have a related use-case of running our react instance entirely without an activity. I've created a PR, exposing the change we're already using, which happens to take the approach initially discussed here.\nhttps://github.com/Microsoft/react-native-code-push/pull/491\n. Fixed regressions, caused by basing off of an older master.\n. Updated, updated README, and moved to a InstanceHolder abstraction.\n. Yes, 1.16.1-beta was where I first saw this. I rolled back until I hit\n1.14.6\nOn Mon, Dec 19, 2016 at 3:24 AM, Vladimir Kotikov notifications@github.com\nwrote:\n\n@igrayson https://github.com/igrayson, have you tried to upgrade to\nreact-native-code-push@1.16.1-beta\nhttps://github.com/Microsoft/react-native-code-push/releases/tag/v1.16.1-beta?\nYour problem sounds very similar to #583\nhttps://github.com/Microsoft/react-native-code-push/issues/583, which\nhas been fixed in that release.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/645#issuecomment-267941970,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AGnzXOlLUdjBe4K-nwhmF_BeT0E67v2-ks5rJmmAgaJpZM4LPnL8\n.\n. Manually fudging the top of CodePush.h to remove the conditional, and leaving it as \n\n```objc\nimport \"React/RCTEventEmitter.h\"   // Required when used as a Pod in a Swift project\n```\nmakes my problem go away.. It's used by CodePushNativeModule\n. It may not be. The only way I could wrestle android studio into being able\nto navigate/compile the project was to allow it to install a gradle wrapper\nat android/app.\nSeparately, it would be great if we had developer setup instructions for\nAndroid Studio, in this repo.\nOn Tue, Aug 30, 2016 at 11:04 AM, Geoffrey Goh notifications@github.com\nwrote:\n\nIn .gitignore\nhttps://github.com/Microsoft/react-native-code-push/pull/491#discussion_r76847599\n:\n\n@@ -132,6 +132,7 @@ gen/\n .gradle/\n build/\n /build/\n+android/app/gradle\n\nWhy was this addition needed?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/pull/491/files/f6ea4ec00d8528c665d76585154e0c064213a724#r76847599,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AGnzXGro5WrB2BC_jVjp_SoV2UrNPMU3ks5qlHCfgaJpZM4JtcJe\n.\n. \n",
    "cbcye": "I mean if i use jsCodeLocation = [CodePush bundleURL]; it will occure error ,then remove and use local bundle it is working.\n. Thank you, Below is the debug output info\n2016-08-17 09:18:25.608 [fatal][tid:main] React Native doesn't generate your app's JS bundle by default when deploying to the simulator. If you'd like to test CodePush using the simulator, you can do one of three things depending on your React Native version and/or preferred workflow:\n1. Update your AppDelegate.m file to load the JS bundle from the packager instead of from CodePush. You can still test your CodePush update experience using this workflow (debug builds only).\n2. Force the JS bundle to be generated in simulator builds by removing the if block that echoes \"Skipping bundling for Simulator platform\" in the \"node_modules/react-native/packager/react-native-xcode.sh\" file.\n3. Deploy a release build to the simulator, which unlike debug builds, will generate the JS bundle (React Native >=0.22.0 only).\n   2016-08-17 09:18:25.613 Huola[1736:56887] Loading JS bundle from (null)\n   2016-08-17 09:18:25.613 Huola[1736:56887] * Assertion failure in -RCTBatchedBridge loadSource:, /work/app/reactnative/Huola/node_modules/react-native/React/Base/RCTBatchedBridge.m:180\n   2016-08-17 09:18:25.615 Huola[1736:56887] * Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'bundleURL must be non-nil when not implementing loadSourceForBridge'\n   *** First throw call stack:\n   (\n   0   CoreFoundation                      0x00000001051c2d85 __exceptionPreprocess + 165\n   1   libobjc.A.dylib                     0x00000001043b7deb objc_exception_throw + 48\n   2   CoreFoundation                      0x00000001051c2bea +[NSException raise:format:arguments:] + 106\n   3   Foundation                          0x0000000104001e1e -[NSAssertionHandler handleFailureInFunction:file:lineNumber:description:] + 169\n   4   Huola                               0x0000000103874c8a -[RCTBatchedBridge loadSource:] + 746\n   5   Huola  libc++abi.dylib: terminating with uncaught exception of type NSException\n. Thank you very much, it is working after i remove the following code in node_modules/react-native/packager/react-native-xcode.sh\n# if [[ \"$PLATFORM_NAME\" = \"iphonesimulator\" ]]; then\n    #   echo \"Skipping bundling for Simulator platform\"\n    #   exit 0;\n    # fi\n. Sorry , after i remove the code the application can start , but load local bundle file , is it correct ?\nLoading JS bundle from file:///Users/Gary/Library/Developer/CoreSimulator/Devices/9F01B196-EE1E-4119-96B6-D64CEAD677C7/data/Containers/Bundle/Application/F3171D3C-6347-45BB-B34A-A8EAB260547B/Huola.app/main.jsbundle\n. ",
    "kenwheeler": "\ud83d\udc4d \n. Amazing!\n. ",
    "zhaogao": "great \uff01  #319  this PR resolve my question ,for \"the update contents failed the data integrity check\" ,my code-push version is 1.13.2-beta \n. ",
    "fanyuRN": "sure,\n\n\n. yeah, I don't set the  debug key ,I am running app in the simulator ,\n. I have defined CODEPUSH_KEY in debug ,it seem to no effect ;and I use CodePush.sync(); I dont't know Staging and production is how to map app's development environmeng ,is Provisioning Profile? thank you!\n. thank you ,I hava got it \n. thx\uff0cI got it\n. oh , should I reopen?\n. oh,I am sorry,\n. @gouravsood  oh, I forget  the resolution, maybe you can upgrade your code-push version. ",
    "zaach": "I'm running into this problem as well. I hardcoded CodePushDeploymentKey to one of my deployment keys just to be sure, but it's still giving this error. Any other ways to debug it? Probably unrelated but code-push debug ios doesn't output anything.\n. I didn't see any output for the debug build unless I use jsCodeLocation = [CodePush bundleURL];, which results in this being logged: [03:38:56] Loading JS bundle from (null), and the app not launching.\n. ",
    "RomanISWG": "I have the same problem. What ever I do, nothing helps. I have also set multi-deployment but still getting this error. Can anyone help please?\ncode-push 2.0.2-beta\nreact-native 0.47.2,\nreact-native-cli 2.0.1. Same or similar issues at my side with rn 0.47.2. I have followed multi-deployment-testing guide. However only Debug scheme (with Staging deployment key) does work. Release and Staging scheme do not download any updates. Any ideas to solve this?. I have changed this for Run as I'm not trying to get any ipa yet.. ",
    "PizzaLiu": "What I have found is that if you just add the Multi-Deployment Testing , you'd better clean the project and rebuild it in Xcode (Project / Clean). Hope this help guys!. ",
    "rob-keepsafe": "We ran into this situation as well. It'd be nice if you all logged the error or rethrow it instead of swallowing it.\nFor now, you can dump it by modifying react-native-code-push/CodePush.js to add:\njs\nlog(`Error is ` + e);\n// above this line\nlog(`Report status failed: ${JSON.stringify(statusReport)}`);. Also, this relates to https://github.com/Microsoft/code-push/issues/290#issuecomment-236392414\n\nTo ensure compatibility between the native binary interface and the dynamically updated JS, CodePush versions your binary code using the App Store version of your app. We expect this version to follow semver (e.g. 1.0.0), so it's likely that you just need to change it to conform to the format.. \n",
    "mattcolman": "Hi, I'm experiencing this issue after updating packages from:\n\"react-native\": \"0.42.3\",\n\"react-native-code-push\": \"1.17.4-beta\",\nto\n\"react-native\": \"0.56.0\",\n\"react-native-code-push\": \"5.4.1\",\nWhen running Staging or Release build it works fine, but running a Debug build throws an error. I want to run Debug builds so I don't have to codepush new code for every change while I'm testing.\nI followed the \"Multi-Deployment Testing\" link so I have not defined a deployment key for DEBUG.\nI also have this code to read the jsCodeLocation from the local bundle and not codepush.\n```\nifdef DEBUG\njsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index.ios\" fallbackResource:nil];\n\nelse\njsCodeLocation = [CodePush bundleURL];\n\nendif\n```\nI get this error:\n400: An update check must include a valid deployment key - please check that your app has been configured correctly.\nSo why is codepush still trying to do an update??\nMy codepush implementation is:\nexport default codePush({ checkFrequency: codePush.CheckFrequency.ON_APP_RESUME })(App);\n@fanyuRN this was over a year ago but you seemed to have solved this same issue. Do you remember what fixed it?. Yep, I was experiencing my app freezing in debug mode only and assume it was due to this error, but it was something else. I understand now this error is the expected behaviour. Thanks!. ",
    "FerdinandvHagen": "Just found the error. Placed the function in the wrong method body.\nSorry for the trouble!\n. ",
    "nicotroia": "Hello I'm still having this issue with \"react-native\": \"0.47.1\" and \"react-native-code-push\": \"^2.0.3-beta\"\n```\ncom/microsoft/codepush/react/CodePush.java:295: error: method does not override or implement a method from a supertype\n    @Override\n    ^\n1 error\n:react-native-code-push:compileReleaseJavaWithJavac FAILED\nFAILURE: Build failed with an exception.\n\nWhat went wrong:\nExecution failed for task ':react-native-code-push:compileReleaseJavaWithJavac'.\n```\n\nThis is for android. Any help?. ",
    "joshuapinter": "Hi There, I'm getting this same error but I have it in the correct place and the correct versions: \nReact Native: 0.46.4\nReact Native Code Push: 4.1.0-beta\n```java\npublic class ReactNative extends Activity implements DefaultHardwareBackBtnHandler, ReactApplication {\nprivate static final int OVERLAY_PERMISSION_REQ_CODE = 1;\nprivate ReactRootView mReactRootView;\nprivate ReactInstanceManager mReactInstanceManager;\n\n@Override // <-- Method does not override method from it's super class.\npublic String getJSBundleFile() {\n    return CodePush.getJSBundleFile();\n}\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    // ...\n}\n\n```\nI think this is the reason why my app sees that there is an update, downloads the update, restarts the app but nothing actually changes. I imagine it's because it's not getting the updated JS bundle.\nHelp please! :) . I find that if I run gradlew assembleRelease I don't get this error message because it properly runs the codepush.gradle script. However, if I run Generate Signed APK... from the Build menu in Android Studio, I get this message and I find that it doesn't run the codepush.gradle commands.\nAny idea why Generate Signed APK would be doing something different than gradlew assembleRelease?. Thanks for the reply @sergey-akhalkov. Yes, that's the process we have to use as well. I assumed Generate Signed APK would run gradlew assembleRelease and then sign the APKs that get produced but I guess not. Thanks.. Just as a follow-up, we actually are signing our APK with just gradlew assembleRelease now too, so there's no need to use Generate Signed APK in Android Studio.\nYou can Google how to do this but here's what we're using in our build.gradle:\n```java\n// Load keystore from keystore.properties in the project root directory. Without this the APKs cannot be signed.\ndef keystoreProperties = new Properties()\ndef keystorePropertiesFile = rootProject.file(\"keystore.properties\")\nif ( keystorePropertiesFile.exists() ) {\n    keystoreProperties.load( new FileInputStream(keystorePropertiesFile) )\n} else {\n    println \"Cannot Sign APKs: keystore.properties file is missing so not signing.\"\n}\nif ( keystoreProperties.getProperty(\"RELEASE_STORE_FILE\") ) {\n    signingConfigs {\n        release {\n            storeFile     file( keystoreProperties.getProperty(\"RELEASE_STORE_FILE\") )\n            storePassword keystoreProperties.getProperty(\"RELEASE_STORE_PASSWORD\")\n            keyAlias      keystoreProperties.getProperty(\"RELEASE_KEY_ALIAS\")\n            keyPassword   keystoreProperties.getProperty(\"RELEASE_KEY_PASSWORD\")\n        }\n    }\n}\n```\nAnd then in your root directory, you need a file called keystore.properties with the following structure: \nRELEASE_STORE_FILE=\nRELEASE_STORE_PASSWORD=\nRELEASE_KEY_ALIAS=\nRELEASE_KEY_PASSWORD=\nWorks like a treat!. HI @max-mironov. Thanks for getting back to me so quickly!\nThis is an existing Android application that we've integrated React Native into, so there is no MainApplication.java class. But we do have an application file that I can try moving it to. Let me try that.... Still the same error with trying to Override the getJSBundleFile() method. Where does this method live that we're trying to override it? I'll try loading up your example app and see what I can find out there.. @max-mironov Thanks for the reply, Max. This is what my application file looks like: \njava\npublic class TrakApp extends MultiDexApplication {\nI'll try implementing ReactApplication here and overriding getJSBundleFile to see if it \"takes\".\nDoes that sound like the right plan or am I off base?. @max-mironov Hey Max. Playing with this some more again. \nQuestion: Why do you need to have the following in MainApplication.java's getPackages():\njava\nnew CodePush(\"REE371AKjKfRHTSMvttFfLYNo36oEJNr1Idb7\", getApplicationContext(), BuildConfig.DEBUG)\nand then have the following in MainActivity.java's ReactInstanceManager.builder()?\njava\n.addPackage(new CodePush(\"dGwE7TupBMiZyAxCAPABUpAg-FjL8157884c-07f4-462d-87f8-bfa0f5f1d9e6\", getApplicationContext(), BuildConfig.DEBUG))\nAnd why do you use different CodePush keys for each of them? \nThanks!\nJoshua. @max Okay, perfect. That was my thought as well so I wanted to make sure I wasn't missing anything. \nIf I can confirm that you don't need the first piece, I'll send a PR to remove it.. Okay, so when I don't have the following in my ReactNative.java Activity: \njava\ncodePush.getJSBundleFile();\nI get the following error:\nconsole\ncom.microsoft.codepush.react.CodePushInvalidUpdateException: Update is invalid - A JS bundle file named \"null\" could not be found within the downloaded contents. Please check that you are releasing your CodePush updates using the exact same JS bundle file name that was shipped with your app's binary.\nat com.microsoft.codepush.react.CodePushUpdateManager.downloadPackage(CodePushUpdateManager.java:239)\nat com.microsoft.codepush.react.CodePushNativeModule$3.doInBackground(CodePushNativeModule.java:210)\nat com.microsoft.codepush.react.CodePushNativeModule$3.doInBackground(CodePushNativeModule.java:204)\nWhen I do have that, the logs show that it's loading the package but then I get the following error: \nconsole\njava.lang.AssertionError: recreateReactContextInBackground should only be called after the initial createReactContextInBackground call.\nat com.facebook.infer.annotation.Assertions.assertCondition(Assertions.java:72)\nat com.facebook.react.ReactInstanceManager.recreateReactContextInBackground(ReactInstanceManager.java:311)\nat com.microsoft.codepush.react.CodePushNativeModule$2.run(CodePushNativeModule.java:145)\nat android.os.Handler.handleCallback(Handler.java:739)\nat android.os.Handler.dispatchMessage(Handler.java:95)\nat android.os.Looper.loop(Looper.java:135)\nat android.app.ActivityThread.main(ActivityThread.java:5254)\nat java.lang.reflect.Method.invoke(Native Method)\nat java.lang.reflect.Method.invoke(Method.java:372)\nat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:903)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:698). Hey @lucianomlima, can you share how you've implemented it. I'm also extending MultiDexApplication and running into trouble (see above). \nI would really appreciate it! Thanks!. @max-mironov Any thoughts on the errors I posted? I feel like I'm very very close to getting this to work. And when I do I'll adjust your docs to help others along the way.. Hey Max. Thanks for the reply. I'm going to email you directly so we can do a screen share and walk through this. \nHowever, when we do finally get it working I'll make sure to post my results here for others that land here.. Okay, @max-mironov was able to help me by working on our repo in private. I wanted to come back here and let everybody know what's involved to get Code Push integrated when you have an existing Android application that you have added React Native to. It's quite different and isn't documented so this should help anybody with the same issue as myself.\nHere are the changes necessary:\n1. Add the appropriate version of react-native-code-push to your package.json.\npackage.json\njs\n\"react-native-code-push\": \"^4.1.0-beta\",\n2. Add the react-native-code-push to settings.gradle.\nsettings.gradle\njava\ninclude ':react-native-code-push'\nproject(':react-native-code-push').projectDir = new File(rootProject.projectDir, './node_modules/react-native-code-push/android/app')\nEnsure that the path to node_modules is correct. In our case, we don't have an ios and android directory so we only need ./node_modules/ instead of the typical ../node_modules/.\n3. In your build.gradle apply the build.gradle files from react-native and react-native-code-push.\nourApp/build.gradle\njava\napply from: \"../node_modules/react-native/react.gradle\"\napply from: \"../node_modules/react-native-code-push/android/codepush.gradle\"\nI added this right below apply plugin: 'com.android.application'.\n4. In the same build.gradle file, compile react-native-code-push.\nourApp/build.gradle\njava\ncompile project(':react-native-code-push')\nThat goes in the dependencies { ... } block.\n5. In your Activity where you instantiate React Native, in our case ReactNative.java, you'll need to do the following:\n5a. Import Code Push:\njava\nimport com.microsoft.codepush.react.CodePush;\n5b. Add the CodePush package to the ReactInstanceManager.builder() chain:\njava\n.addPackage(new CodePush(\"your-code-push-key-goes-here\", getApplicationContext(), BuildConfig.DEBUG))\nIt's important that you use the correct key, Staging, for testing purposes. Once you get that working, you can follow other instructions to setup the correct key for Debug (Staging) builds and Release (Production) builds.\n5c. Get the JS Bundle File via Code Push:\njava\nCodePush.getJSBundleFile(\"index.android.bundle\");\nThis can go right above setContentView( mReactRootView );. It's also important that you use the correct name of your bundle file as the param here. In our chase it's the default index.android.bundle.\nThat should be it!\nTo test, you can do something simple like this:\nAdd the following to your first React Native view render: \njs\n<TouchableOpacity onPress={this.checkForUpdates.bind(this)}>\n  <Text style={{fontSize: 24}}>Version 1</Text>\n</TouchableOpacity>\nAnd add the checkForUpdates() method: \njs\nasync checkForUpdates() {\n  let response = await CodePush.sync({\n    updateDialog: true,\n    installMode:  CodePush.InstallMode.IMMEDIATE,\n    deploymentKey: 'your-code-push-key-goes-here',\n  });\n}\nThat will allow you to check for new versions manually (great for initial testing).\nThen change Version 1 to Version 2 and run the following command to build a fresh Code Push bundle: \nbash\ncode-push release-react OurApp android\nYou might have to specify options on there to successfully build a fresh bundle, but that depends on your specific setup.\nYou can check your current Code Push bundles with: \nbash\ncode-push deployment history OurApp Staging\nThe idea is that you should be able to update the Version in your React Native view, publish a new bundle via Code Push and then update to that bundle by pressing \"Version X\" and installing the new bundle. All without restarting the app or manually reloading from the React Native package manager.\nI hope that helps others that might be struggling with this. I suppose some of this should end up in the docs for people that also have unorthodox React Native apps.\nThanks again to @max-mironov for his help.. Hey @rushabhnagda11.\nI can see 3 things that you can try:\n1) Explicitly set your bundle asset name.\n2) Explicitly set your main module path.\n3) Explicitly set your JS bundle file in setJSBundleFile().\nTo help, here is what my working onCreate looks like (with some of my\npackages removed for simplicity):\nmReactInstanceManager = ReactInstanceManager.builder()\n    .setApplication( getApplication() )\n        .setBundleAssetName( \"index.android.bundle\" )\n        .setJSMainModuleName( \"index.android\" )\n        .addPackage( new MainReactPackage() )\n        .addPackage(new CodePush(BuildConfig.CODEPUSH_KEY, getApplicationContext(), BuildConfig.DEBUG))\n    .setUseDeveloperSupport( BuildConfig.DEBUG )\n        .setInitialLifecycleState( LifecycleState.RESUMED )\n        .setJSBundleFile(CodePush.getJSBundleFile(\"index.android.bundle\"))\n        .build();\nTry each of those 1 by 1 and see which one, if any, makes a difference.\nYou\u2019re close to getting it working. :). @rushabhnagda11 Great to hear! And you're Welcome.. @zheng-liu-seattle Did you solve this? If so, what was the issue? Thanks!. @kesiena115 Did you end up getting your app working with this? If so, do you know what was wrong? I'm currently facing a similar issue. The update appears to work fine and the app reloads but the bundle does not update (i.e. the UI doesn't change to reflect the changes I made in the new bundle). \nThanks!. For those wondering, the real answer is to upgrade to react-native version 0.57.2 or greater.. Can confirm. Was also on 5.1.3-beta and using React Native 0.57.2. Upgraded to 5.5.3 and the error went away. Thanks! \ud83d\udc4d . ",
    "hilkeheremans": "We have the same issue. Thanks for diagnosing this!\nEDIT: Submitted a PR based on previous suggestion re using package.json name, but included a fallback on old behavior in case the name does not yield any results. This will retain backwards compatibility with older versions of RN.\n. Seems we are having this as well.\n. There, fixed that stuff per your request. Good luck! ;-)\n. Could you specify a little more? Works fine here, so perhaps it is something different yet closely related.. For some reason, a straight require was unable to locate the package.json file. I guess pwd or cwd can be a little off. To be sure I'll test again with a straight require.\n. Will do, I will correct tomorrow. Thanks for your feedback!\n. Yep, that's probably it now that you mention it! I have a forgetful mind -- I'll also double check the way require resolves paths to be sure.\n. Right on the mark @silhouettes: it just requires off of __dirname. I must have forgotten a ../ somewhere (a mistake easily made when the file is that deep).\nLet's keep things idiomatic and just use a normal require. PR update coming in.\n. ",
    "pbassut": "Had the same issue. Just added the \"Frameworks\" folder to the glob's ignore\n    var ignoreNodeModulesAndPods = { ignore: [\"node_modules/**\", \"ios/Pods/**\", \"ios/Frameworks/**\"] };\nThen used it in the actual glob, like:\nvar appDelegatePaths = glob.sync(\"**/AppDelegate.+(mm|m)\", ignoreNodeModulesAndPods);\nThen ran react-native link react-native-code-push and it worked. ",
    "eladgel": "What I don't understand is why if my code source on my computer is newer then the version on codepush, there is still an update pending from code push, It has an older js code bundle, then the one I have on my device(which was not downloaded from codepush since its a fresh install)\n. I will need to check that:\n1. Fresh Install on device v0(no prior versions)\n2. Release a codepush new bundle for v0\n3. Install on device v1 - see if there is a codepush update to it\nThe behaviour I'm talking about is a fresh install on the device\n1. Release a codepush new bundle for v20\n2. Fresh Install on device v20(no prior versions)-> update gets called\n. So if I work on production now, my Codepush releases should always be ahead of my AppStore releases.\nI think that adding a release strategy for dummies to the manual could be cool\n. Just tested this-> \nPublished version 1 to Development\n\nInstalled version 1.5 on my device\n\nUpdate of binary was called\nThis is how I published the new version\n\ncode-push release-react MYAppName ios --deploymentName Development --targetBinaryVersion 1\n. \n",
    "iadcg": "@geof90 Does this still holds true? Cos I notice this behaviour\nWhen codepush is in Staging\n1. Install app v1.0 on device; using codepush Staging key (no previous codepush release in Appcenter)\n2. Then codepush new js bundle; becomes v1 in Staging.\n3. Do some changes in js and install this same app v1.0 on device.\n4. Opening the app will NOT download the codepush v1 in Staging\n*This is what I expect\nWhen codepush is in Production\n1. Promote codepush v1 above from Staging to Production.\n2. Install app v1.0 on device; using codepush Production key\n3. Opening the app will download the codepush v1 in Production\nIt always download in Production but not in Staging.\n. ",
    "mobohua": "please i had same issue,can you tell me how to fix it?. thank you for your answer @silhouettes ,i had found my fault,in activity,i forget to add a part of code as follow:\n CodePush.setReactInstanceHolder(new ReactInstanceHolder() {\n            @Override\n            public ReactInstanceManager getReactInstanceManager() {\n                return mReactInstanceManager;\n            }\n        });. ",
    "anton-aleksandrov": "@geof90, thank you!\nHowever, this solved only the first issue, but i'm still getting this:\n/MainApplication.java:38: error: cannot find symbol\n            new CodePush(getResources().getString(R.strings.reactNativeCodePush_androidDeploymentKey), getApplicationContext(), BuildConfig.DEBUG),\n                                                   ^\n  symbol:   variable strings\n  location: class R\n1 error\n:app:compileReleaseJavaWithJavac FAILED\nAny suggestions how to solve this?\n. ",
    "Rolando-Barbella": "I have a \"similar\" error but is coming from the  node_mudule/react-native-code-push  folder\n:react-native-code-push:compileReleaseJavaWithJavac - is not incremental (e.g. outputs have changed, no previous execution, etc.).\n/Users/personamac/Documents/Projects/sumoshiftapp/node_modules/react-native-code-push/android/app/src/main/java/com/microsoft/codepush/react/CodePushNativeModule.java:22: error: cannot find symbol\nimport com.facebook.react.modules.core.ChoreographerCompat;\n                                      ^\nsymbol:   class ChoreographerCompat\n\"react-native\": \"0.42.x\",\n\"react-native-code-push\": \"^2.0.1-beta\" \ngradle:2.2.3\n. ",
    "steffenmllr": "I also have a question on this. By using jsCodeLocation = [CodePush bundleURL]; in my AppDelegate.m there is no Fallback if - for some reason - the user is offline when starting the app for the first time there is no bundle and no app or?\n. @geof90 when does the download start? When downloading the app from the app store (postinstall somthing...) or on first start?\n. Ok so just to get this right - sorry for asking again:\nWhen I build the app and publish it to the app store - is there a version bundled within the app or do I also need to download the Initial version ?\n. ",
    "vincentlkl": "My npm version is 2.14.7\n. thanks @geof90 , it is working now.\n. ",
    "colus001": "@silhouettes \nActually it's working most of the time. Normally it works, but sometimes it crashes with no specific reason. Occasionally when I clean npm_modules and reinstall packages, it works.\nUsually we don't do much except fixing bugs. This time we tried to update components and assets such as images with code-push expecting to do this kind of thing more often in the future. Since it broke our build yesterday, I'm not sure if we can use code-push this way. \nAnyways, have any specific milestone to integrate crash report? Maybe we did something wrong, but being unable to debug it is quite painful.\n. ",
    "daniel-beard": "I'm creating a dev settings screen for QA that shows the current status of CodePush which shows the current status of CodePush (including whether it has a failed or pending update)\n. I'm calling this from native, so I'd rather avoid the round trip from iOS -> JS -> iOS\n. Sorry, I should have been more clear, I'd like to see this from the iOS / Android SDKs and available in Release builds.\n. Following up here, I would ideally like a native (Objective-C) approach to listening to successful / failed updates. My vision for this would be NSNotification based. Would the team be open to an approach like this? I don't mind implementing this.\n. Not sure how I can sign the CLA, can someone point me in the right direction?\n. For sure, updating now.\n. Ok @geof90 updated and squashed.\n. I can address the rest of the changes tomorrow :D\n. Ok @geof90 I scrubbed through and removed all the localError vars, and made sure there aren't any more fragile error checks. This should be good to go now.\n. This is known as a \"fragile\" error check. Methods that return a value and accept an error should always check the return value from the method first. \nE.g. \nNSDictionary *failedPackage = [CodePushPackage getCurrentPackage:&error];\nif (!failedPackage) {\n    // handle error here.\n}\n. A non-nil error object doesn't always indicate that an error actually occurred.\n\nWhen dealing with errors passed by reference, it\u2019s important to test the return value of the method to see whether an error occurred, as shown above. Don\u2019t just test to see whether the error pointer was set to point to an error.\n\nhttps://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/ErrorHandling/ErrorHandling.html\n. It's a code smell to check the error pointer directly, and yes, it does happen occasionally that a method will return a non-nil error object even if the call succeeds. https://www.bignerdranch.com/blog/an-nserror-error/\nAn alternative here would be this:\n```\nNSError error;\nNSDictionary failedPackage = [CodePushPackage getCurrentPackage:&error];\nif (!failedPackage) {\n    CPLog(@\"Error getting current update metadata during rollback: %@\", error);\n} else {\n    // Write the current package's metadata to the \"failed list\"\n    [self saveFailedUpdate:failedPackage];\n}\n``\n. \ud83d\udc4d \n. Good point, I'll update this.\n. If this fails, wouldn't you want the caller of this method to know that it was a failure withinNSJSONSerialization` ?\n. Will Update\n. That's happening below:\nif (!result) {\n  if (localError && error) {   // Makes sure we aren't dereferencing a null pointer\n    *error = localError;         // Assigns the value to the `error` parameter that is passed into the method\n  }\n}\n. Yeah I think that would be best, I'll update.\n. Fixed\n. Fixed\n. ",
    "piyushjo": "Have you tried the debug command described here - https://microsoft.github.io/code-push/docs/cli.html#link-5. Would this work? \n. Could you please let us know which error reporting service you are using? Is the requirement that you want to find out where is the bundle output generated? Is it not at this location - ./CodePush/main.jsbundle\nWe have two commands for codepush: release & release-react. With release command you can customize the paths for bundle if that is what you want. \nhttps://microsoft.github.io/code-push/docs/cli.html#link-4 \nthank you. \ncc: @panarasi \n. ",
    "prithsharma": "One method I can think of is to target releases with versions(which I can adjust according to my knowledge of the version in Play Store's open beta and prod) in addition to environments.\nBut it would be really elegant if I could leverage the environments for this.\n. Sorry for posting this as an issue, I'll better ask on StackOverflow. Closing issue.\nhttp://stackoverflow.com/questions/39163313/how-to-use-codepushsreact-native-plugin-staging-and-prod-env-for-android-play\n. Couldn't get an answer on SO still, reopening the issue.\n. I don't think I've found a neat solution to this problem.\nBut this is what I am following right now -\n1. My debug builds(both in Android and iOS) are subscribed to CodePush's staging releases. My QA build on Android is subscribed to the same.\n1. For testing whether a CodePush release would work as expected, I make the staging release and test it in the QA build. \n1. After above works as expected, I promote the release to production.\nIdeally, after the second step, I should be able to make the release to a smaller set of users(beta testers etc.) before promoting it to production in the third step.\nSomething like that could be achieved by checking the app version in your JS and deciding which deployment name to check updates from on the basis of the app version. That would require maintaining a map of the version numbers to deployment names somewhere on the web server so it can be served via an API to the app.\nI haven't done something like this yet since it would get too coupled with the web server(where I would maintain the mapping I talked about).. @sergey-akhalkov really sorry for the late reply. \nMy comment above suggests the same thing as the update in the docs(correct me if I am wrong). \nWhile I had figured it out for Android, I still have to do it for iOS - the iOS staging env docs will be helpful. Thank you.. ",
    "goldylucks": "@prithsharma I'm facing the same problem\n\nOne method I can think of is to target releases with versions(which I can adjust according to my knowledge of the version in Play Store's open beta and prod) in addition to environments.\n\ncan u describe your current flow for achieving this?\n. My android workflow ATM, (no codepush) is:\n1. Develop and test locally (usually on emulator)\n2. upload new apk to alpha, where I'm the only tester (and maybe some close users)\n3. if all works, promoting alpha to beta (usually running open beta)\n4. if all works, promoting to production\nwith codepush there should b minimal app version changes, so I think the workflow would b:\n1. develop and test locally\n2. code-pushify changes to alpha\n3. code-pushify changes to beta\n4. code-pushify changes to production\nAssuming iStore also has easy alpha, beta, and production management for an app, I'll do the same workflow there.\n@sergey-akhalkov what do u think?\n@vonovak what is your \"staging\" ?\nis that another app that's unlisted on the stores?\nor a beta/alpha version of the same app?\ndo u have your apps on both iStore and google store?. @giladartzi those permissions are (wrongfully) built into react-native at the moment. Maybe that's y u r seeing them?\nrefer to this issue on the react-native repo.\nif that is the case, the quick fix is adding the following to AndroidManifest.xml\nxml\n    <uses-permission android:name=\"android.permission.READ_PHONE_STATE\" tools:node=\"remove\" />\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" tools:node=\"remove\" />\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" tools:node=\"remove\" />. ",
    "valetarton": "^^ @sergey-akhalkov found the solution in the recently updated documentation for Android worked like a charm.\nNow just having issues with iOS app downloading update. But that's not your problem :) . ",
    "Jarred-Sumner": "\nWhen a user downloads your app from the Play Store right after it goes live, does it immediately download an update from CodePush? Presumably, an app that immediately downloads a lot of data the moment it gets installed would look fishy. I would instead hold off on publishing another version of the app to CodePush until the app is already live.\n\nYes, it immediately downloads the update. I could see how that could look fishy. What is the best practice here? To wait $interval before checking for updates?\n\nAre you using the updateDialog option in codePush.sync? This is highly unlikely, but we had users tell us that the iOS App store rejected apps that showed the update dialog before an update is installed because it was confusing and looked too similar to the OS's update dialog. I'm not sure if this would apply to Android at all.\n\nI'm not using the updateDialog option. Originally, I was using AppHub but switched to CodePush since this is free and they don't support Android. In one iOS update when I was using Apphub, I had their equivalent of that option enabled and Apple rejected the app update.\n\nI know that Niantic is against users using software that call Niantic's private APIs to gain information about Pokemon in different locations. Perhaps the Google Play Store is placing additional attention on such apps and having more stringent checks? Everytime your app get's rejected, have you ever tried resubmitting but not removing CodePush? Does the app still get rejected in those cases?\n\nPokecrew is not using Niantic's private APIs. It's a crowdsourced map, which means some of the sightings are outdated or irrelevant, but it does make it a little bit tougher to shut down (although not impossible). I do believe Google Play Store is placing additional scrutiny on this app, as it has been rejected numerous times for various reasons (and they're not consistent about things like the app title in the store listing) -- however for this specific reason, of violating the Device and Network Abuse policy, it has only been rejected when calling codePush.sync() on componentDidMount in one of the components mounted on app load.\n\nhave you ever tried resubmitting but not removing CodePush?\n\nYes, and it got rejected for the Device and Network Abuse Policy\n. Gotcha. That makes sense.  I wasn't sure how Code Push worked -- and was concerned that it'd always pull from the hosted version of the code (rather than relying on the on-disk version if it was newer). When I pushed to the Play Store, I immediately pushed a Code Push update to ensure the Play Store version would be correct. I can see how that could raise a flag for them.\n. > if you added the codepush.gradle build step (see step 3), it should not download the latest version from CodePush if its contents and hash matches the one in the on-disk version exactly.\nI didn't add that! My bad.\n. ",
    "Pho3nix": "Hi, yes I will do it soon, have to check let it because of company\ncontracts.\nOn Tue, 30 Aug 2016 at 20:18, Geoffrey Goh notifications@github.com wrote:\n\nHi @Pho3nix https://github.com/Pho3nix, I would like to merge your\ncontribution! Could you sign the CLA? Thanks!\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/pull/500#issuecomment-243526295,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ADUYRJymRiJ7fw8E734Snt1B3PsjYhRNks5qlHA0gaJpZM4JwQIe\n.\n. \n",
    "Zenton": "Hi @geof90,\nMy node_modules lives at my repo root (i.e. my node root). I just have a few more directories between it and my react ios/android directories (standard structuring of code based on purpose).\nBefore posting I tried using the Android manual link and it fails because it tries to run the second script I linked to, which also makes assumptions about directory structure. \nSo unfortunately I can't use manual linking (without manually editing files in my node_modules directory which obviously doesn't work with a team).\nDo you have any ideas for a different workaround?\nThanks\n. Good idea, that'd work well.\n. ",
    "huiyangs": "Great, thanks!\n. ",
    "chadwilken": "I'm using rnpm\n. No there aren't any. I also completely deleted the pods folder and\nreinstalled\n. I ended up just using CocoaPods to handle the install because it was holding up my development.\n. ",
    "bsiddiqui": "@geof90 I figured it out - I had to clear watchman \n. ",
    "logileifs": "@jerson the same thing is happening to me and I'm using Realm as well, could you please share what exactly caused the problem and how you fixed it ?. ",
    "jaisonveneri": "I'd like to know too. You could share @jerson.. Thanks @jerson. ",
    "NULLPointerGuy": "Hi @SimchaShats \nHow did you solve the error? \nEven  I'am experiencing the same error..my build.gradle looks something like this\n`apply from: \"../node_modules/react-native/react.gradle\"\napply from: \"../node_modules/react-native-code-push/android/codepush.gradle\"\nsigningConfigs {\n        release {\n            storeFile file(\"../myreleasekey\")\n            storePassword \"*\"\n            keyAlias \"alias\"\n            keyPassword \"*\"\n        }\n    }`\ndebug{\n    //similar debug configs.\n}\nrelease {\n            minifyEnabled true\n            shrinkResources true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), file('proguard-project.txt')\n            signingConfig signingConfigs.release\n     }\ncompile project(':react-native-code-push')\n. @SimchaShats ok..by any chance do you still happen to have that gradle file? just wanted to refer to it..\nThanks... Hi @sergey-akhalkov \nFound the issue had not added  proguard-rules for react-native, hence closing it !! . I found out that the issue was with the code we were trying to push.\nIt would be helpful if we could get the stack trace/ reason for the rollback, as the issue was not reproducible in staging but only in production.. Hi @alexandergoncharov \nThanks for the reply!\nCan it be documented somewhere else?  had a hard time finding the reason for failure.. ",
    "tsambora": "Ah yes. The crash indeed happened after the notifyApplicationReady. My question is answered then, thanks. Now i'll just have to adjust where the notifyApplicationReady is placed.\nNow regarding my installation code, this is my complete code:\ncodePush.notifyApplicationReady();\ncodePush.checkForUpdate()\n    .then((update) => {\n        if (!update) {\n            console.log(\"The app is up to date!\");\n        } else {\n            if (update.isMandatory) {\n                codePush.sync({updateDialog: null, installMode: codePush.InstallMode.IMMEDIATE});\n            } else {\n                codePush.sync({updateDialog: null, installMode: codePush.InstallMode.ON_NEXT_RESTART});\n            }\n      }\n});\nI'm not sure if i do this right but what i'm trying to do is to download and then immediately apply the update if it's mandatory and download but apply it on restart if it's not. I know that notifyApplicationReady is natively called in the syncInternal mode but for some reason it's not called if i put the sync in componentDidMount so i put it before the checkForUpdate method. Would you help giving me the best practice to do that?\n. @silhouettes no, all clear. I'm gonna simplify my code now. Thank you very much for your help.\n. ",
    "sopaco": "the problem was I add a build-schema in android/app/build.gradle, if I use release schema + Production key, it could works, but use my staging_release schema+Staging key, it show that error message\n``` script\nstaging_release {\n            initWith(buildTypes.release)\n        buildConfigField \"boolean\", \"couldDebug\", 'true'\n        buildConfigField \"String\", \"deployName\", '\"staging_release\"'\n        buildConfigField \"String\", \"SHD_CD_KEY\", '\"xxxxxxxxxxxxxxxxxx\"'\n    }\n\n``\n. i found sometimes it could update and install properly, but sometimes not, in fact it was nothing to do with the release/staging\n@geof90 how do I determine what's wrong?\n. @silhouettes \u270c\ufe0fIt's my falut, previously I thought the code-push could be able to distinguish between Android and IOS via thedeployment {app-name} android/iosparameter. Infact it must be seperated by different app-name.\n. @silhouettes because when i remove these code, it works :}\n. Consider if network is too slowly, the long times cost operation ofawait xxxwill block other await operation?\n. @silhouettes it seems cost much time to download the update file(more than 1 minute), and in this duration any other await operation was blocked. Does all these await operation run on a single thread in react-native?\n. @silhouettes Right! In China our update file is almost about 3MB, duration the code-push-upgrading, any other operations basedawait fetchwas blocked. Looking forward to the CDN you mentioned.\n. @silhouettes \nIt seems I should manually invokenotifyAppReady` in such code?\njs\ncodePush.sync({\n                updateDialog: false,\n                installMode: codePush.InstallMode.IMMEDIATE,\n            }, syncStatus => {\n                switch (syncStatus) {\n                        case codePush.SyncStatus.UPDATE_INSTALLED:\n                                codePush.notifyAppReady();\n                                this.showToast('\u65b0\u7248\u5df2\u5b89\u88c5')\n                                this.setState({upgrade_tip_inline: '\u5df2\u66f4\u65b0'})\n                                break;\n}})\n. @silhouettes \naha, In face in the version of ios, We use such wrapper to make upgrade on startup, but in the version of android ,if we upgrade via code-push's wrapper on startup, all other await operations was blocked until upgrade complete(the problem only occurs in Android)..., so we manually call sync now.\n. @dentalulcer @jerson \nI also have some such problem only in Android.\nsee https://github.com/facebook/react-native/issues/10203\n. ",
    "hongkim91": "@silhouettes Is it best practice to have separate CodePush apps for android/ios? I might have missed it, but is this explained in the documentation somewhere? Thanks :) . ",
    "morelazers": "I have narrowed this down to something within my app. I have overridden window.XMLHttpRequest to solve another issue, and it is this which is causing the issue.\nI will close this issue, since it is not a problem with this package. \n. ",
    "alexHlebnikov": "Same problem here. \n. I've got in RN 0.34.0.RC.0 and RN 0.34.0.\n. ",
    "cmcewen": "Getting the same crashes - from Crashlytics:\nFatal Exception: java.lang.RuntimeException: An error occurred while executing doInBackground()\n       at android.os.AsyncTask$3.done(AsyncTask.java:309)\n       at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:354)\n       at java.util.concurrent.FutureTask.setException(FutureTask.java:223)\n       at java.util.concurrent.FutureTask.run(FutureTask.java:242)\n       at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:234)\n       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)\n       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)\n       at java.lang.Thread.run(Thread.java:818)\nCaused by java.lang.NullPointerException: Attempt to invoke virtual method 'java.util.Iterator org.json.JSONObject.keys()' on a null object reference\n       at com.microsoft.codepush.react.CodePushUtils.convertJsonObjectToWritable(CodePushUtils.java:65)\n       at com.microsoft.codepush.react.CodePushNativeModule$4.doInBackground(CodePushNativeModule.java:307)\n       at com.microsoft.codepush.react.CodePushNativeModule$4.doInBackground(CodePushNativeModule.java:283)\n       at android.os.AsyncTask$2.call(AsyncTask.java:295)\n       at java.util.concurrent.FutureTask.run(FutureTask.java:237)\n       at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:234)\n       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)\n       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)\n       at java.lang.Thread.run(Thread.java:818)\n. We are using that function on a screen in the app - our usage just looks like this: const codePushVersion = await CodePush.getUpdateMetadata();. \nI've been trying to use the Android Studio debugger to see what jsonObj is in public static WritableMap convertJsonObjectToWritable(JSONObject jsonObj) but at least while I'm debugging it always seems to be a valid object\n. I'm pretty confident this fixes the crash. We were able to consistently reproduce this crash before by installing a version of the app that had an older JS bundle, waiting for the codepush update to install in the background, then switching to a screen that would call CodePush.getUpdateMetadata();\nNow following those same steps, we don't see a crash.\n. ",
    "bgeihsgt": "Can someone here post specific repro steps for this crash? We have seen it accidentally but when trying to simulate a CodePush update we couldn't repro.\n. ",
    "iZaL": "+1\n. ",
    "hojberg": "Is this supposed to be fixed in 1.16.1-beta ?. ",
    "jaggerwang": "Still there!\n\njavascript\ncodePush.sync({deploymentKey});\nI'm using pull #670 , because my RN version is 0.40.0.\n. Got it, it works!. And build iOS staging package also failed. I'm using pods, it's ok to build with release config.\n\n\n\n. @sergey-akhalkov For android, your solution is not working for me. And I found another solution, set releaseStaging config to the same with release, except the code-push key.\n\nFor iOS, I'm already did as your screenshot, and it not work for me. The staging config is copy from release, and config exactly as the \"Multi-Deployment Testing\" in README doc. . @sergey-akhalkov For iOS, it is still not working.\nThe \"Build Locations\" config.\n\n\nAnd there is no staging config in the sample app.\n\n. @sergey-akhalkov Sorry, I'm not noticed than the config is against Pods project. I modified the config as follow, but still got error.\n\n\n\n\n. And there is another problem, I must add \"matchingFallbacks = ['release', 'debug']\" in releaseStaging config to make gradle works right. Otherwise it will fail like the following.\n\n. Still the same.\n```\n\u279c  app-dp-rn git:(master) \u2717 react-native run-android --appIdSuffix .debug\nScanning folders for symlinks in /Users/jagger/projects/bici/gtgj/app-dp-rn/node_modules (19ms)\nJS server already running.\nBuilding and installing the app on the device (cd android && ./gradlew installDebug)...\n\nConfigure project :app\nConfiguration 'compile' in project ':app' is deprecated. Use 'implementation' instead.\nConfigure project :react-native-charts-wrapper\nConfiguration 'compile' in project ':react-native-charts-wrapper' is deprecated. Use 'implementation' instead.\nConfigure project :react-native-code-push\nConfiguration 'compile' in project ':react-native-code-push' is deprecated. Use 'implementation' instead.\nConfigure project :react-native-vector-icons\nConfiguration 'compile' in project ':react-native-vector-icons' is deprecated. Use 'implementation' instead.\nTask :app:generateBundledResourcesHashDebug\n4f53cda18c2baa0c0354bb5f9a3ecbe5ed12ab4d8e11ba873c2f11161202b945\nTask :app:installDebug\nInstalling APK 'app-debug.apk' on '6.0-1080p(AVD) - 6.0' for app:debug\nInstalled on 1 device.\n\nBUILD SUCCESSFUL in 28s\n85 actionable tasks: 51 executed, 34 up-to-date\nRunning /Users/jagger/Library/Android/sdk/platform-tools/adb -s emulator-5554 reverse tcp:8081 tcp:8081\nStarting the app on emulator-5554 (/Users/jagger/Library/Android/sdk/platform-tools/adb -s emulator-5554 shell am start -n com.bicisims.gtgjdp..debug/com.bicisims.gtgjdp.MainActivity)...\nStarting: Intent { cmp=com.bicisims.gtgjdp..debug/com.bicisims.gtgjdp.MainActivity }\nError type 3\nError: Activity class {com.bicisims.gtgjdp..debug/com.bicisims.gtgjdp.MainActivity} does not exist.\n```. Yes, it's working. Thanks!. ",
    "jonrh": "@sergey-akhalkov Just to confirm or chime in. I'm new to CodePush but I have the same error running react-native@0.40.0 and react-native-code-push@1.17.0-beta.\nI was following the Plugin Usage guide (awesome docs btw, good job!). Fetching a new bundle works on app restart but it doesn't work on app resume.\njavascript\n// Works correctly after app restarts\nMyApp = codePush(MyApp);\njavascript\n// Doesn't work on app resume, but I may be missing or doing something wrong\nlet codePushOptions = { checkFrequency: codePush.CheckFrequency.ON_APP_RESUME };\nMyApp = codePush(codePushOptions)(MyApp);\nUpdate 2017-02-09: Updating works correctly on app resume, second code snippet was me simply misunderstanding the updating mechanism. Implementing the codePushDownloadDidProgress() method silenced the errors. Thanks @sergey-akhalkov!. I've been trying to diagnose a problem on an iOS app that may suffer from a similar trait. I'm using react-native-keychain to save/load passwords securely. I'm not entirely sure how it works but I think it's done asynchronously. Could there be a similar block/issue?\n@buptkang: The v1.17.1-beta release notes states in Bug Fixes: \"2. (Both iOS and Android) Fixed the issue #574\". The pull request #693 only changed some Java files, were similar iOS changes made in a different PR/commit or was this perhaps never an issue on iOS?. @sergey-akhalkov Thanks! I will try my best. It's been very hard though to produce code that reliably replicates this. I'll submit an issue if I'm able to. Thanks again for your hard work!. ",
    "LiuC520": "Me too\uff0c\n\n[CodePush] Disallowing restarts\n[CodePush] Re-allowing restarts\n[CodePush] Checking for update.\n[CodePush] Downloading package.\nSending CodePushDownloadProgress with no listeners registered.\n[CodePush] An unknown error occurred.\n[CodePush] The folder \u201cunzipped\u201d doesn\u2019t exist.\n\nxcode logger:\n[CodePush] Error deleting downloaded file: Error Domain=NSCocoaErrorDomain Code=4 \"\u201cdownload.zip\u201d couldn\u2019t be removed.\" \nUserInfo={NSFilePath=/Users/vittorio/Library/Developer/CoreSimulator/Devices/88E4ABE2-F4DC-4836-974C-0CFEC3A273F2/data/Containers/Data/Application/DE678A99-45DB-423D-A972-7F836A556410/Library/Application Support/CodePush/download.zip, NSUserStringVariant=(\n    Remove\n), NSUnderlyingError=0x600000447890 {Error Domain=NSPOSIXErrorDomain Code=2 \"No such file or directory\"}}\n```\nlet codePushOptions = { checkFrequency: CodePush.CheckFrequency.ON_APP_RESUME };\ncomponentWillMount() {\n        CodePush.disallowRestart();//\u9875\u9762\u52a0\u8f7d\u7684\u7981\u6b62\u91cd\u542f\uff0c\u5728\u52a0\u8f7d\u5b8c\u4e86\u53ef\u4ee5\u5141\u8bb8\u91cd\u542f\n    }\ncomponentDidMount(){\n    CodePush.allowRestart();//\u5141\u8bb8\u91cd\u542f\uff0c\u5426\u5219\u70ed\u66f4\u65b0\u4e0d\u4f1a\u751f\u6548\n    CodePush.sync({ \n        installMode: CodePush.InstallMode.IMMEDIATE,\n        updateDialog: false,\n    })\n}\n\n...\nMain = CodePush(codePushOptions)(Main);\n```\n. Thank you for your suggestion.\nI've add codePushDownloadDidProgress event listener,but there is a  new problem:\nhttps://github.com/Microsoft/react-native-code-push/issues/695. Thank you !\nI use the command:\n\n1\u3001react-native bundle --platform android --entry-file index.android.js --bundle-output ./bundles/index.android.bundle --assets-dest ./bundles/ --dev false\n2\u3001react-native bundle --platform ios --entry-file index.ios.js --bundle-output ./bundles/index.ios.bundle --assets-dest ./bundles/ --dev false\n3\u3001code-push release \u300aAppName\u300b ./bundles/  1.0.0 \u2014-deploymentName Production  \u2014-mandatory true\n\nI don't know the bundle name for ios ,I use 'index.ios.bundle' instead of 'main.jsbundle', now my problem is solved.. ",
    "sospedra": "I've the same problem with 5.2.0-beta and the workaround didn't seems to work.\nTho, honestly I'm not sure were to place it?. I ran into the same issue. Which causes android app to break only on release mode.\nIt only triggers the error after installation first run. Meaning that after the app explodes with a Fatal Error, if you launch it again won't explode.\nBut even without the fatal error, codepush won't work.\nThis could maybe be related with #968 \nI find some relations:\n\nthe release/debug mode\nonly breaks the app after first installation\n\nCurrently we've uninstalled code-push from our project. We're gonna finish our product release today and start with the code-push issue on Tueday (Monday is holiday here); most probably.\nI'll keep you posted. Tho, any tip would be much appreciated.\ncc @carloscuesta. Thanks for the quick reply and sorry for the delay; these past days were national holidays in Spain and I was out of town.\nThe steps you clarified are absolutely correct ;)\nWith trying in release mode you mean react-native run-android --variant=release (and equivalent for ios: react-native run-ios --configuration Release)?\nUsing syncStatusChangeCallback gives me an all-good value. Everything is up to date. Tho, as I tried to explain, it's always up-to-date in react-native development environment (where I can see the logs).\n. \nDeployment history\njson\n  [\n    {\n      \"appVersion\": \"5.0\",\n      \"blobUrl\": \"https://codepush.blob.core.windows.net/storagev2/b4fQ81DoErUnDMmwIbxgpEV4k6GQ85521bdf-b210-4d1c-8c5e-492d7df9723c\",\n      \"description\": \"\",\n      \"isDisabled\": false,\n      \"isMandatory\": false,\n      \"manifestBlobUrl\": \"https://codepush.blob.core.windows.net/storagev2/NlQKqslUiknvtdoSHWKDhnHDopLX85521bdf-b210-4d1c-8c5e-492d7df9723c\",\n      \"packageHash\": \"e510688212b10117ff669ae5cb0f9cc4aa7c7f79cf991c139a73049e888321da\",\n      \"rollout\": null,\n      \"size\": 4710374,\n      \"uploadTime\": 1496928730036,\n      \"releaseMethod\": \"Promote\",\n      \"originalLabel\": \"v1\",\n      \"originalDeployment\": \"Staging\",\n      \"label\": \"v1\",\n      \"releasedBy\": \"sospedra.r@gmail.com\",\n      \"metrics\": {\n        \"active\": 4,\n        \"downloaded\": 66,\n        \"failed\": 0,\n        \"installed\": 48,\n        \"totalActive\": 2559\n      }\n    },\n    {\n      \"appVersion\": \"5.0\",\n      \"blobUrl\": \"https://codepush.blob.core.windows.net/storagev2/C1J0sdE5DtmRG0tMzNp4bfgznInj85521bdf-b210-4d1c-8c5e-492d7df9723c\",\n      \"description\": \"\",\n      \"isDisabled\": false,\n      \"isMandatory\": false,\n      \"manifestBlobUrl\": \"https://codepush.blob.core.windows.net/storagev2/gOmxCRGUITGkbFcUnckmaIL1oye685521bdf-b210-4d1c-8c5e-492d7df9723c\",\n      \"packageHash\": \"09c9e5a57e241dafb281574ce63c5f7e1e46a93799628632f82d37429c5eb0ab\",\n      \"rollout\": null,\n      \"size\": 4711045,\n      \"uploadTime\": 1496991726017,\n      \"releaseMethod\": \"Promote\",\n      \"originalLabel\": \"v2\",\n      \"originalDeployment\": \"Staging\",\n      \"label\": \"v2\",\n      \"releasedBy\": \"sospedra.r@gmail.com\",\n      \"metrics\": {\n        \"active\": 104,\n        \"downloaded\": 425,\n        \"failed\": 0,\n        \"installed\": 309,\n        \"totalActive\": 2559\n      }\n    },\n    {\n      \"appVersion\": \"5.0\",\n      \"blobUrl\": \"https://codepush.blob.core.windows.net/storagev2/JSW9MN6ZphAgd_2Ub0f-M0JsfPbV85521bdf-b210-4d1c-8c5e-492d7df9723c\",\n      \"description\": \"\",\n      \"isDisabled\": false,\n      \"isMandatory\": false,\n      \"manifestBlobUrl\": \"https://codepush.blob.core.windows.net/storagev2/2o3UoiiPTNN2jTy4g15BqjBf5HjE85521bdf-b210-4d1c-8c5e-492d7df9723c\",\n      \"packageHash\": \"353e68142bea666dd54f4a7548731bce969aec287afe32b319122c07c1483b44\",\n      \"rollout\": null,\n      \"size\": 4713215,\n      \"uploadTime\": 1497543733801,\n      \"releaseMethod\": \"Promote\",\n      \"originalLabel\": \"v3\",\n      \"originalDeployment\": \"Staging\",\n      \"label\": \"v3\",\n      \"releasedBy\": \"sospedra.r@gmail.com\",\n      \"metrics\": {\n        \"active\": 270,\n        \"downloaded\": 924,\n        \"failed\": 1,\n        \"installed\": 582,\n        \"totalActive\": 2559\n      }\n    },\n    {\n      \"appVersion\": \"5.0\",\n      \"blobUrl\": \"https://codepush.blob.core.windows.net/storagev2/JMVpVs9VJMBdOqJaE-1beFDTIpqQ85521bdf-b210-4d1c-8c5e-492d7df9723c\",\n      \"description\": \"\",\n      \"isDisabled\": false,\n      \"isMandatory\": false,\n      \"manifestBlobUrl\": \"https://codepush.blob.core.windows.net/storagev2/L7wpQDqDg1MY-9KHRrDXNoh_hZMh85521bdf-b210-4d1c-8c5e-492d7df9723c\",\n      \"packageHash\": \"a8da2a639c81f9aa460901c54f70915c5b5a1b5535a0a87b62364a8a57a2ecdb\",\n      \"rollout\": null,\n      \"size\": 4715130,\n      \"uploadTime\": 1499098771636,\n      \"releaseMethod\": \"Promote\",\n      \"originalLabel\": \"v4\",\n      \"originalDeployment\": \"Staging\",\n      \"label\": \"v4\",\n      \"releasedBy\": \"sospedra.r@gmail.com\",\n      \"diffPackageMap\": {\n        \"e510688212b10117ff669ae5cb0f9cc4aa7c7f79cf991c139a73049e888321da\": {\n          \"size\": 580976,\n          \"url\": \"https://codepush.blob.core.windows.net/storagev2/gNjkaLSrNgMatQ0RtpLXMiMHhoPg85521bdf-b210-4d1c-8c5e-492d7df9723c\"\n        },\n        \"09c9e5a57e241dafb281574ce63c5f7e1e46a93799628632f82d37429c5eb0ab\": {\n          \"size\": 580976,\n          \"url\": \"https://codepush.blob.core.windows.net/storagev2/jcQnCyF_hngy6jhjZAmKEWPfUiGr85521bdf-b210-4d1c-8c5e-492d7df9723c\"\n        },\n        \"353e68142bea666dd54f4a7548731bce969aec287afe32b319122c07c1483b44\": {\n          \"size\": 580976,\n          \"url\": \"https://codepush.blob.core.windows.net/storagev2/VystaZusrDoYupd_EcYeTECl6joD85521bdf-b210-4d1c-8c5e-492d7df9723c\"\n        }\n      },\n      \"metrics\": {\n        \"active\": 287,\n        \"downloaded\": 895,\n        \"failed\": 1,\n        \"installed\": 527,\n        \"totalActive\": 2559\n      }\n    },\n    {\n      \"appVersion\": \"5.0\",\n      \"blobUrl\": \"https://codepush.blob.core.windows.net/storagev2/UibBNxyF0BrOti3SceP2srZla40m85521bdf-b210-4d1c-8c5e-492d7df9723c\",\n      \"description\": \"\",\n      \"isDisabled\": false,\n      \"isMandatory\": false,\n      \"manifestBlobUrl\": \"https://codepush.blob.core.windows.net/storagev2/VoPA_KwPw7TtON1crvKXZWtPKIce85521bdf-b210-4d1c-8c5e-492d7df9723c\",\n      \"packageHash\": \"cec75d2a8f768003197a2a283b94d5cf1fb1547eea17b0dd4c7727ff0586fdfd\",\n      \"rollout\": null,\n      \"size\": 4717295,\n      \"uploadTime\": 1500568132869,\n      \"releaseMethod\": \"Promote\",\n      \"originalLabel\": \"v5\",\n      \"originalDeployment\": \"Staging\",\n      \"label\": \"v5\",\n      \"releasedBy\": \"sospedra.r@gmail.com\",\n      \"diffPackageMap\": {\n        \"e510688212b10117ff669ae5cb0f9cc4aa7c7f79cf991c139a73049e888321da\": {\n          \"size\": 583141,\n          \"url\": \"https://codepush.blob.core.windows.net/storagev2/NnwG86bJb-BLivk_QBsxcSs-1OnK85521bdf-b210-4d1c-8c5e-492d7df9723c\"\n        },\n        \"09c9e5a57e241dafb281574ce63c5f7e1e46a93799628632f82d37429c5eb0ab\": {\n          \"size\": 583141,\n          \"url\": \"https://codepush.blob.core.windows.net/storagev2/u3Z2lDtuS8AkUbTNZEkzbbz9fvuL85521bdf-b210-4d1c-8c5e-492d7df9723c\"\n        },\n        \"353e68142bea666dd54f4a7548731bce969aec287afe32b319122c07c1483b44\": {\n          \"size\": 583141,\n          \"url\": \"https://codepush.blob.core.windows.net/storagev2/k-mowKAkWhFuO05X3oaHCDSGk4Q985521bdf-b210-4d1c-8c5e-492d7df9723c\"\n        },\n        \"a8da2a639c81f9aa460901c54f70915c5b5a1b5535a0a87b62364a8a57a2ecdb\": {\n          \"size\": 583141,\n          \"url\": \"https://codepush.blob.core.windows.net/storagev2/3pgF0Sc7c04e9a04G4PZIKxNKaR485521bdf-b210-4d1c-8c5e-492d7df9723c\"\n        }\n      },\n      \"metrics\": {\n        \"active\": 1,\n        \"downloaded\": 6,\n        \"failed\": 1,\n        \"installed\": 4,\n        \"totalActive\": 2559\n      }\n    },\n    {\n      \"appVersion\": \"5.0\",\n      \"blobUrl\": \"https://codepush.blob.core.windows.net/storagev2/x4H8eV8dyboQoJRdMS2DzmLRceVm85521bdf-b210-4d1c-8c5e-492d7df9723c\",\n      \"description\": \"\",\n      \"isDisabled\": false,\n      \"isMandatory\": false,\n      \"manifestBlobUrl\": \"https://codepush.blob.core.windows.net/storagev2/h_jOyNQ4nnRciEmw8iLgrw6CbU5585521bdf-b210-4d1c-8c5e-492d7df9723c\",\n      \"packageHash\": \"b1e31b6db49504a78eed3293225c9a2b9f2f0c534b14fae372ee9004b84cd1b9\",\n      \"rollout\": null,\n      \"size\": 4717490,\n      \"uploadTime\": 1500571155377,\n      \"releaseMethod\": \"Promote\",\n      \"originalLabel\": \"v6\",\n      \"originalDeployment\": \"Staging\",\n      \"label\": \"v6\",\n      \"releasedBy\": \"sospedra.r@gmail.com\",\n      \"diffPackageMap\": {\n        \"e510688212b10117ff669ae5cb0f9cc4aa7c7f79cf991c139a73049e888321da\": {\n          \"size\": 583336,\n          \"url\": \"https://codepush.blob.core.windows.net/storagev2/YXUtoYJeeHROA4iJRofwqMkYt7Kh85521bdf-b210-4d1c-8c5e-492d7df9723c\"\n        },\n        \"09c9e5a57e241dafb281574ce63c5f7e1e46a93799628632f82d37429c5eb0ab\": {\n          \"size\": 583336,\n          \"url\": \"https://codepush.blob.core.windows.net/storagev2/HLYFKelivsieIS9uWrCrJfrhKld185521bdf-b210-4d1c-8c5e-492d7df9723c\"\n        },\n        \"353e68142bea666dd54f4a7548731bce969aec287afe32b319122c07c1483b44\": {\n          \"size\": 583336,\n          \"url\": \"https://codepush.blob.core.windows.net/storagev2/uRtCOAKriB54HTzbvsrzcvnmNJte85521bdf-b210-4d1c-8c5e-492d7df9723c\"\n        },\n        \"a8da2a639c81f9aa460901c54f70915c5b5a1b5535a0a87b62364a8a57a2ecdb\": {\n          \"size\": 583336,\n          \"url\": \"https://codepush.blob.core.windows.net/storagev2/H3o900rT2bgtHD3gfyrWHEn5J9sv85521bdf-b210-4d1c-8c5e-492d7df9723c\"\n        },\n        \"cec75d2a8f768003197a2a283b94d5cf1fb1547eea17b0dd4c7727ff0586fdfd\": {\n          \"size\": 583336,\n          \"url\": \"https://codepush.blob.core.windows.net/storagev2/7PIHQ0swfnZW7tswVcISbb3DVld285521bdf-b210-4d1c-8c5e-492d7df9723c\"\n        }\n      },\n      \"metrics\": {\n        \"active\": 246,\n        \"downloaded\": 788,\n        \"failed\": 1,\n        \"installed\": 366,\n        \"totalActive\": 2559\n      }\n    },\n    {\n      \"appVersion\": \"6.2\",\n      \"blobUrl\": \"https://codepush.blob.core.windows.net/storagev2/k2CQMkSiLKxf2tiKS0Ijb5smKLTH85521bdf-b210-4d1c-8c5e-492d7df9723c\",\n      \"description\": \"\",\n      \"isDisabled\": false,\n      \"isMandatory\": true,\n      \"manifestBlobUrl\": \"https://codepush.blob.core.windows.net/storagev2/3h_hn0lnsmxADH7bOr6G-ZlCyJ7D85521bdf-b210-4d1c-8c5e-492d7df9723c\",\n      \"packageHash\": \"944f455683007c7e9ee2c0947116dab43c537e14d7acb00590be1497586de370\",\n      \"rollout\": 100,\n      \"size\": 4769763,\n      \"uploadTime\": 1501608019170,\n      \"releaseMethod\": \"Promote\",\n      \"originalLabel\": \"v7\",\n      \"originalDeployment\": \"Staging\",\n      \"label\": \"v7\",\n      \"releasedBy\": \"sospedra.r@gmail.com\",\n      \"metrics\": {\n        \"active\": 1,\n        \"downloaded\": 1,\n        \"failed\": 0,\n        \"installed\": 1,\n        \"totalActive\": 2559\n      }\n    }\n  ]\n\n\nYou'll see that the last one 6.2 has one active and installed. It's the one I test on development mode. But it's not triggering from production/release as stated before.\n\nAnd the short version string is:\nxml\n<key>CFBundleShortVersionString</key>\n<string>6.2</string>\nIf I'm not wrong, versions match.. I'm currently changing both the React Native version (for other reasons) and code-push (bumping to latest). I then will push a new version into the markets. With its own code-push version.\nI expect to invest one week with this. I'll keep you posted 100% ;). Follow up. Nothing that we tried worked. We're finishing a new release; as we commented in this thread it looks like the last chance to fix the issue. It'll published next week. We'll keep you in touch. I'll reopen when I've got any change on the status or new data.. Hello again @max-mironov @sergey-akhalkov \nWe released on Friday the new application. As I told you we're doing.\nSo far, looks like everything works as expected now.\nWith our our last tests we saw some weird things. Like codepush triggering a rollback when everything was ok (in theory). Hence, our conclusion is that, somehow, the previous codepush bundle became corrupted at some point.\nWith the new market release and a new codepush bundle everything works fine. \nWe can leave the issue closed then.\nMuch appreciated for all the help ;). ",
    "igorferst": "I see the warning in question (Sending CodePushDownloadProgress with no listeners registered) with react-native@0.55.4 and react-native-code-push@5.4.0. The suggestion to implement codePushDownloadDidProgress indeed removed the warning. Please consider adding a note about this to the setup or troubleshooting instructions.. ",
    "chenlongwill": "[CodePush] Downloading package.\nYellowBox.js:67 Sending CodePushDownloadProgress with no listeners registered.\nconsole.warn @ YellowBox.js:67\nlogToConsole @ RCTLog.js:47\nlogIfNoNativeHook @ RCTLog.js:30\n__callFunction @ MessageQueue.js:349\n(anonymous) @ MessageQueue.js:106\n__guard @ MessageQueue.js:297\ncallFunctionReturnFlushedQueue @ MessageQueue.js:105\n(anonymous) @ debuggerWorker.js:72\nlogging.js:3 [CodePush] An unknown error occurred.\nlogging.js:3 [CodePush] The update contents failed the data integrity check.\nThe update contents failed the data integrity check.. ",
    "legander": "Any news yet? @silhouettes \n. ",
    "frantic": "I think I found the issue \u2013 the npm module published contains Android build artifacts[1]. @silhouettes could you please check the .npmignore file and make sure it matches .gitignore?\n\nTo repro, npm install react-native-code-push and check out node_modules/react-native-code-push/android/app/build. The folder is > 30MB in size.\n. @vladimir-kotikov you are right, just checked on a different project and it doesn't seem to affect the IPA size.. \n",
    "vladimir-kotikov": "@frantic, I confirm that the issue with released packages exists, but does it really affects the size of iOS archives? I just checked and in my case archive size with code-push installed is 6Mb vs. 5.3 Mb without it.. #639 improves postlink.js to handle missing AppDelegate.m and reports a meaningful message with link to manual installation section in README. Closing this as the most of the edge cases mentioned above fixed in #639 . Just checked and helloworld app with react-native link'ed code-push is being compiled properly (react-native@0.39.2). @silhouettes, are we interested in fixing this issue for previous RN versions?. @panarasi, I was thinking that we might want to add a logic to postlink script that would add required linker option to Xcode project so the project would compile with older React-native versions (they don't seem to have this flags added by default). @wzy535, are you still seeng this? If so, could you please also paste output of code-push debug android (in addition to code-push deployment history). Closing this as many of edge cases above has been fixed in in https://github.com/Microsoft/react-native-code-push/pull/639. Cool, thanks for the links, @chetstone!. > My testing seemed to show that the \"sync\" option for ON_NEXT_RESUME only checked when the app \"returned\" from background to foreground NOT when the app started initially\nThat's true, the check is performed only in resume handler, but this doesn't cancel the fact that at next startup app will read bundle url and start with the bundle from last update even if you have specified InstallMode.ON_NEXT_RESUME previously.. @liheyuan, could you maybe provide a very basic sample that demonstrates the problem?. Looks like RN has changed their headers location again (see facebook/react-native@63d5bcb). Need to double check if this PR is still required. @MyGuySi, where are you seeing this error? Could you please also check if there is anything suspicious is logged to console, as explained here: Accessing console logs\nHave you tried to debug the app using Chrome debugger?. Okay, thanks for letting us know. @kiszadr, does this reproduce for you every time or this is sporadic failure? Looking at the stacktrace it sounds like a consequence of some network issue but i'm not completely sure - do you see any other messages in console (code-push debug ios) when the error occurs?. Closing this one. @kiszadr, feel free to reopen if you run into this again. @kuhbaar, fetch API is usually polyfilled by react-native (see InitializeCore.js#L171) at JS startup. Looks like in your case there is another code that overwrites global fetch function. Could you please check if fetch is available in your project without invoking CodePush first?. > I'm also importing (but not using yet) 'react-native-fetch-blob'. But i don't think that correlates in anyway\nI actually was thinking that react-native-fetch-blob might be a possible reason of the issue, since one of it's usecases is overwriting global fetch to seamlessly use extended behavior - there are a couple of typical issues, caused by this replacement (see wkh237/react-native-fetch-blob#58 and wkh237/react-native-fetch-blob#190)\nHowever if you say that even after removing react-native-fetch-blob the issue still exists the cause of the problem must be something different. I'm currently out of ideas what might cause the error and would appreciate if you could provide a minimal app where the problem reproduces\nAnother options that I can suggest - you could try to set some breakpoints in node_modules/react-native-code-push/request-fetch-adapter.js around lines 23 and 33 and see what is fetch/window.fetch in your case.. > But is there any possibility of using both packages?\nI think yes, because react-native-fetch-blob's fetch is available as RNFetchBlob.fetch (https://github.com/wkh237/react-native-fetch-blob#download-example--fetch-files-that-needs-authorization-token) and shouldn't conflict with original fetch unless there is some misconfiguration. @igrayson, have you tried to upgrade to react-native-code-push@1.16.1-beta? Your problem sounds very similar to https://github.com/Microsoft/react-native-code-push/issues/583, which has been fixed in that release.. @benedicthsieh, currently there is no such option - temp directory gets wiped after successful release. However release-react runs react-native bundle --assets-dest /output-dir --bundle-output /output-dir/main.jsbundle --dev false --entry-file index.ios.js --platform ios to generate updated bundle, so you could try to reuse this command to get the same bundle as in release. Thanks for suggestion - this might be a useful feature \ud83d\udc4d \n/cc @silhouettes to help decide whether this should be added to backlog. @panarasi, done!. @benjaminb10, even if you don't want to call sync in the root component you'll still need to call notifyAppReady() there - it's essential to call it at the very beginning of app's lifecycle. Calling it right after the sync, as in your example, is not a good idea as in this case it would report bogus data to codepush service. > Something like that doesn't seem to work\nHmm... It actually should work. Have you tried to remove the app from device/emulator before deploying it using react-native run-*. Could you please also share the output of code-push debug <ios|android> command?. I'm not quite sure whether this would really help, though, but rationale here is that code-push stores some metadata about already installed updates in application's data directory, which may affect how new updates are being fetched, so you might want to unistall app from device/emulator first to wipe app metadata and then try to run it again.. Yes, delete and then re-install. Also could you please run code-push debug <ios|android> (depending on platform you're running app on) before and share the output to make it easier to understand why the update is being rolled back?. @giladartzi, I'm not sure if these permissions come from react-native-code-push? A quick search in codebase shows no matches. Is it possible that you have another RN package that  adds these permissions?. @goldylucks, thanks for the info and workaround! Closing this. Looks like this is exactly the same problem as with cordova plugin here: https://github.com/Microsoft/cordova-plugin-code-push/issues/196. @YongHuiLuo, it's really hard to say what exactly caused the error in your case. You might want to try logging an error in rejection handler to get more details:\n`js\ncodePush.checkForUpdate().then((update) => {\n      ...\n    },(error) => {\n       console.log(\"tiny  checkoutFor Update error\");\n       console.error(error, error.message && error.message)\n    }\n);. Thanks for update. I'll close this - feel free to reopen if necessary.. @EngsShi, thanks, updated this in #659 . @kevinTutu, thanks for reporting this!\nThe error message is pretty uninformative and it's hard to determine, where the error occured. Could you please add a console.log(error.stack) line right after console.error(chalk.red(\"[Error]  \" + error.message)); in code-push main module - you can locate it by running which code-push - and then run command again. This would show where the error comes from.. @kevinTutu, were you able to find the cause of this error?. Yeah, changing the glob's pattern is the simplest approach, but we were thinking about more advanced one - reading path to/name of *.plist from xcode project rather than globbing it by pattern.. /cc @BretJohnson . ",
    "rogerkerse": "Figured out the problem. I have set it to \nconst codePushOptions = {\n    checkFrequency: codePush.CheckFrequency.ON_APP_RESUME,\n    installMode: codePush.InstallMode.ON_NEXT_RESUME\n};\nImmediate app resumes does not trigger codepush for some reason. Once the app has been in the background for more than few minutes, then it triggers.\n. I am talking about checking for the update.\n. ",
    "15071304899": "hi~  I also meet this problem .   my project alert  an  updateDialog .   But nothing to happen after click 'continue'  on IOS10 ....\n. ",
    "davidsalib": "I'm having an issue where on the simulator I get a dialog to update, however on my device (in Production) I'm not getting a dialog. I'm using IMMEDIATE for updates. Is that broken on iOS 10? I tried restarting the app more than once and it doesn't detect the update.\n. ",
    "rt2zz": "@silhouettes I am seeing the same issue. Specifically:\n- run code push release\n- first open of app successfully updates\n- second run on different phone does not update, nor do any other syncs from here out\n- jumping into the logs I see An update is available, but it is being ignored due to having been previously rolled back\nWhat would cause the first sync to work and not subsequent? What do you mean by if CodePush is not called in the first run of an update should we be calling some method in code push when the app loads?. @silhouettes I am seeing similar behavior. \nCodePushDeploymentKey ***** [its correct]\n[CodePush] Sync already in progress.\n[CodePush] Checking for update.\n[CodePush] An unknown error occurred.\n[CodePush] 400: An update check must include a valid deployment key - please check that your app has been configured correctly. To view available deployment keys, run 'code-push deployment ls <appName> -k'.\n. ",
    "austin-reynolds-10": "Running into the same issue. Update runs and it downloads the new files. Restarts the app and everything is fine. But when I close the app and re-open it gives the error about it being rolled back and shows the original files. This is happening on both Android and iOS. @silhouettes I completely overlooked that section in the documentation. I added it and worked as expected. . ",
    "vojtechnovak": "Hello! I'd be interested in knowing why exactly this is recommended.? Is it only to control whether an update that affects, say, only android will be downloaded by iOS devices too?\n. ",
    "sbycrosz": "Thanks for the response! \nI think we'll just downgrade to the more stable RN 0.32 atm\n. My RN version was 033 and 032.1 respectively. But let me try it again with a minimal sample project..\n. Hi @silhouettes \nI'm positive I'm using a release build.\nHere's the repro repo https://github.com/sbycrosz/rn33codepush\nwhich I build & install using ./gradlew assembleRelease && adb install -r app/build/outputs/apk/app-release.apk\nAnd here's the adb logcat ReactNativeJS:I *:S that I think would be helpful\n``` sh\n------------ First run\n10-03 00:03:39.302  3592  3609 I ReactNativeJS: backgroundColor: red\n10-03 00:03:39.351  3592  3609 I ReactNativeJS: Running application \"example\" with appParams: {\"initialProps\":{},\"rootTag\":1}. DEV === false, development-level warning are OFF, performance optimizations are ON\n10-03 00:03:39.355  3592  3609 I ReactNativeJS: componentWillMount\n10-03 00:03:39.368  3592  3609 I ReactNativeJS: rendering red\n10-03 00:03:39.398  3592  3609 I ReactNativeJS: [CodePush] Checking for update.\n10-03 00:03:39.415  3592  3609 I ReactNativeJS: [CodePush] Reporting binary update (1.0)\n10-03 00:03:40.343  3592  3609 I ReactNativeJS: [CodePush] Report status failed: {\"appVersion\":\"1.0\"}\n10-03 00:03:40.482  3592  3609 I ReactNativeJS: [CodePush] Awaiting user action.\n10-03 00:03:42.846  3592  3609 I ReactNativeJS: [CodePush] Downloading package.\n10-03 00:03:44.340  3592  3609 I ReactNativeJS: [CodePush] Installing update.\n10-03 00:03:44.398  3592  3609 I ReactNativeJS: [CodePush] Restarting app\n10-03 00:03:44.412  3592  3609 I ReactNativeJS: componentWillUnmount\n------------ After accepting updateDialog\n10-03 00:03:44.422  3592  3609 I ReactNativeJS: [CodePush] Reporting binary update (1.0)\n10-03 00:03:44.481  3592  3609 I ReactNativeJS: Running application \"example\" with appParams: {\"initialProps\":{},\"rootTag\":11}. DEV === false, development-level warning are OFF, performance optimizations are ON\n10-03 00:03:44.501  3592  3609 I ReactNativeJS: componentWillMount\n10-03 00:03:44.513  3592  3609 I ReactNativeJS: rendering red\n10-03 00:03:44.519  3592  3609 I ReactNativeJS: [CodePush] Checking for update.\n10-03 00:03:44.644  3592  3609 I ReactNativeJS: [CodePush] Report status failed: {\"appVersion\":\"1.0\"}\n10-03 00:03:44.766  3592  3609 I ReactNativeJS: [CodePush] App is up to date.\n10-03 00:03:56.684  3592  3609 I ReactNativeJS: componentWillUnmount\n------------ After closing the app via back button then opening it via launcher\n10-03 00:03:58.397  3592  3609 I ReactNativeJS: [CodePush] Reporting binary update (1.0)\n10-03 00:03:58.519  3592  3609 I ReactNativeJS: Running application \"example\" with appParams: {\"initialProps\":{},\"rootTag\":21}. DEV === false, development-level warning are OFF, performance optimizations are ON\n10-03 00:03:58.522  3592  3609 I ReactNativeJS: componentWillMount\n10-03 00:03:58.523  3592  3609 I ReactNativeJS: rendering red\n10-03 00:03:58.524  3592  3609 I ReactNativeJS: [CodePush] Checking for update.\n10-03 00:03:58.794  3592  3609 I ReactNativeJS: [CodePush] Report status failed: {\"appVersion\":\"1.0\"}\n10-03 00:03:58.957  3592  3609 I ReactNativeJS: [CodePush] App is up to date.\n10-03 00:04:04.963  3592  3609 I ReactNativeJS: componentWillUnmount\n------------ After closing the app via app switcher then opening it via launcher\n10-03 00:04:12.720  3652  3669 I ReactNativeJS: backgroundColor: black  <<- Update applied\n10-03 00:04:12.762  3652  3669 I ReactNativeJS: Running application \"example\" with appParams: {\"initialProps\":{},\"rootTag\":1}. DEV === false, development-level warning are OFF, performance optimizations are ON\n10-03 00:04:12.779  3652  3669 I ReactNativeJS: componentWillMount\n10-03 00:04:12.787  3652  3669 I ReactNativeJS: rendering black\n10-03 00:04:12.861  3652  3669 I ReactNativeJS: [CodePush] Checking for update.\n10-03 00:04:12.863  3652  3669 I ReactNativeJS: [CodePush] Reporting CodePush update success (v5)\n10-03 00:04:13.715  3652  3669 I ReactNativeJS: [CodePush] App is up to date.\n```\nMy concern is that RN doesn't reload the JS bundle because ReactNativeJS: backgroundColor: is only printed when the task is killed (not on activity restarts) \n. Thanks @silhouettes!\nI'll make note to upgrade code-push whenever we upgrade RN!\n. ",
    "DanDance": "Hi! I have the same problem. Any updates?\n. Shame on me. Don't forget to merge your branches.... ",
    "joeytat": "I got the same issue. Turned out you have to put jsCodeLocation = [CodePush bundleURL]; into the AppDelegate.m. Anywhere else will cause this issue.\n. @silhouettes \n1) Yes, I thought keep AppDelegate.m neat is nice. so I put those code in another file called 'XXRNManager'. \n2) Integration with existing native app.\n. ",
    "Lughino": "Hi @silhouettes \n- No\n- App created from scratch with react native\n. @silhouettes - Yes, that line of code is present in the AppDelegate.m before launching react-native link.\nI also verified by creating a project from scratch with no external dependencies and no multiple AppDelegate.m in any project folder.\nI hope I was helpful\n. @fanyuRN why you closed this issue?\n. It was marked as \"investigating\" and close it seems that it is resolved.\nI saw that you opened a new issue that just complains about the same thing.\nOpen new issue does not resolve the problem in less time, indeed it slows putting just confusing!\n. ",
    "ljunb": "I got the same issue when I run 'rnpm link react-native-code-push'. My ReactNative is 0.25.0, and CodePush is 1.11.0-beta.\n. ",
    "StevePotter": "Thanks.  It's a minor thing considering it was basically a noop.\n. ",
    "Kennytian": "/node_modules/react-native/local-cli/core/makeCommand.js:19\nthrow new Error(Error occured during executing \"${ command }\" command);\nI'm a react native npm package author,  also issue.   https://github.com/Kennytian/react-native-instabug/issues/14.\n@silhouettes  Please tell me what to fix this issue\n. @sergey-akhalkov  Thanks for your informations!. ",
    "robclouth": "I'm having the same problem, and it's because my AppDelegate is a .mm file not .m, due it using some C++ stuff.\n. ",
    "matrosov-nikita": "@snowjade, @ljunb, @StevePotter, it seems that Info.plist and AppDelegate.m aren't in the same folder. \nI've sent PR (https://github.com/Microsoft/react-native-code-push/pull/639), that improves searching for Info.plist and AppDelegate.\n@robclouth, also this PR adds opportunity to work with AppDelegate.mm files.\nGuys, could you please check whether it works for you?. Hi, @Ge-yuan-jun, I've sent PR which fixes this issue. Could you pls check whether it works for you?. Hi @wafisher \nIt's specific implementation of logging in react-native. This condition(https://github.com/facebook/react-native/blob/master/React/Base/RCTLog.mm#L272) is never satisfied in release configuration. There is great answer which explains a reason and suggests workaround for release configuration to show logs in console: http://stackoverflow.com/questions/39089772/release-mode-diagnostics-in-react-native/39091109.. Hi @artdent, @yangjinsong \nI've sent PR(https://github.com/Microsoft/react-native-code-push/pull/639) which prevents crash if any platform is missing in project.\nAs for other cases, it's really difficult to identify all user's changes. Now, we can only mitigate regex expression to resolve your second problem.. Hi @chetstone\nIt is problem of react-native, which ignores applicationIdSuffix property from build.gradle file. There are two ways to resolve this problem - either run debug version manually (something that you already mentioned) or run the following script from your app directory:\ncd android && ./gradlew installDebug && adb -s <DEVICE_ID> shell am start -n <PACKAGE_ID>.debug/<PACKAGE_ID>.MainActivity\n\ncd android && gradlew.bat installDebug && adb -s <DEVICE_ID> shell am start -n <PACKAGE_ID>.debug/<PACKAGE_ID>.MainActivity\n\nwhere PACKAGE_ID is you package identifier (something like com.mycompany.myapp) and DEVICE_ID is a device identifier as listed by adb devices\nBased on this I'd suggest you to report this issue in react-native or use these workarounds.. Hi, @ptomasroos.\nIt is problem of react-native, it seems that it's expected behaviour and it also affects other plugins.\nHere are some discussions about this issue: https://github.com/facebook/react-native/issues/10312, https://github.com/idehub/react-native-google-analytics-bridge/issues/70, and a comment from one of react-native developers which sheds some light on this.\nBase on this, i think you could safely ignore this warning and your app will continue work as expected. \n. Hi @kevinTutu \nOption -p is for .plist files. You probably need a -g option:\ncode-push release-react XhcClient-android android -g ~xhc_android/redlips/build.gradle\nPlease see code-push release-react --help for more details. Hi @jacob-meacham \nYeah, I see the timestamp within update and built apk time are equal, but there is additional check for binary versions equality. Even though the timestamps are the same, after build step plugin cleans out current local package (if you bump version) and anyway downloads new updates. Could you provide specific case which demonstrates your problem?. @jacob-meacham, I've sent the PR. It uses buildConfigField to get correct apk built time as you've already suggested. Could you pls check whether it works for you?. ",
    "Ge-yuan-jun": "@silhouettes Do CodePush need the ios folder ? I find the AppDelegate.m file is only in the ios folder. But my app is integrated with Android, so I cannot use codePush? Appreciate your reply~. @matrosov-nikita Hi, I have tried your pr. the commad do not show the path must be a string error. But, I still cannot receive new bundle from code-push, so, if it is convenient, could you please help me find out why? Here is the link. I have push all my code to Github. Thanks for your time.. @matrosov-nikita your code is great! In my React Ntive app,it works!Thanks for your time~. @Krupen Same problem. Do you have any solutions? My gradle version is 2.2.2.\n@sergey-akhalkov I have tried your pr, but it doesn't work.. It works in my own app.\nThe configuration is below:\nnode: v6.7.0\nnpm: 3.10.2\nreact-native: 0.38.0. ",
    "Jacse": "I am seeing this now on react-native 0.44 and react-native-code-push 2.0.3-beta. @max-mironov my problem is probably just an edge-case, then. I just did a manual install instead. \nSide note: While doing so I noticed that the docs seem to be outdated. The instructions seem to vary from what react-native link does.. @max-mironov this is the error I run into:\n````\nreturn binding.open(pathModule._makeLong(path), stringToFlags(flags), mode);\n                 ^\nError: ENOENT: no such file or directory, open 'C:\\Users\\Jacob\\my-project\\ios\\\"MyProject-tvOSTests\\Info.plist\"'\n````\nMight have to do with the double quotes.. @max-mironov Sorry I only got back with this now. My .pbxproj contains 12 values for INFOPLIST_FILE. I have them all here for you:\n1. INFOPLIST_FILE = MitLectioTests/Info.plist;\n2. INFOPLIST_FILE = MitLectioTests/Info.plist;\n3. INFOPLIST_FILE = MitLectio/Info.plist;\n4. INFOPLIST_FILE = MitLectio/Info.plist;\n5. INFOPLIST_FILE = \"MitLectio-tvOS/Info.plist\";\n6. INFOPLIST_FILE = \"MitLectio-tvOS/Info.plist\";\n7. INFOPLIST_FILE = \"MitLectio-tvOSTests/Info.plist\";\n8. INFOPLIST_FILE = \"MitLectio-tvOSTests/Info.plist\";\n9. INFOPLIST_FILE = MitLectio/Info.plist;\n10. INFOPLIST_FILE = MitLectioTests/Info.plist;\n11. INFOPLIST_FILE = \"MitLectio-tvOS/Info.plist\";\n12. INFOPLIST_FILE = \"MitLectio-tvOSTests/Info.plist\";\nYou can see the tvOS values have quotes.. @max-mironov I can confirm your fix works, it now links successfully.. @rozele shouldn't this be merged now react-native@0.50.1 is out?. @ruslan-bikkinin ahh \ud83d\ude04 . ",
    "ngxiaoyi": "same as @Jacse , noticed the double quotes under the file path string in the console output errors while I tried to link some plugin. \n```\nrnpm-install info Android module react-native-code-push is already linked\nrnpm-install info iOS module react-native-code-push is already linked\nfs.js:640\n  return binding.open(pathModule._makeLong(path), stringToFlags(flags), mode);\n                 ^\nError: ENOENT: no such file or directory, open '/Users/royshen/workspace/statistics/statistics/ios/\"statistics-tvOSTests/Info.plist\"'\n```. ",
    "stewart42": "Hi, please see https://github.com/Microsoft/react-native-code-push/issues/540 might be related to 0.34 ?\n. I can confirm that changing L116 and L117 to:\njava\nMethod createFileLoaderMethod = jsBundleLoaderClass.getDeclaredMethod(\"createFileLoader\", String.class);\nObject latestJSBundleLoader = createFileLoaderMethod.invoke(jsBundleLoaderClass, latestJSBundleFile);\ndid resolve the issue for RN 0.34. I am not sure how to best structure the code to handle the various versions of react-native. One suggestion could be to tie the versions react-native-code-push to react-native, in the same way that react-native does with react?\n. @silhouettes thanks!\n. @silhouettes have you guys made any progress on this? Can I help in anyway? \n. @quinnliu you could try v1.14.6-beta \n. @silhouettes I tried the suggestion above and I am still getting the issue unfortunately.\n. FWIW, @silhouettes I am referencing codepush the pod file \npod 'CodePush', :path => './node_modules/react-native-code-push'\n. Yes I am using swift. \n@silhouettes,  I have a few items I need to get done today, but I will try to get a sample app with the issue as soon as I can. If still no joy after that we could look to do a skype session.\n. Oh awesome @silhouettes, thanks so much.. @dcvz either revert to 1.14.6-beta or change line 1 of CodePush.h to #import \"React/RCTEventEmitter.h\"\n. @silhouettes any ETA on this fix? Sorry to push, just planning some deployments.. ",
    "rcchen": "Thanks for getting things working with 0.34! Do you know when a tag will be published with the fix yet, or are there snapshot builds of master that can be used in the meantime?\n. ",
    "igorclark": "OK, after much digging, it turns out it was an error in our code. (Natch.) Sorry to have troubled you.\n. Hello @sriraman, I'm afraid I can't remember exactly, but I think I was doing something pretty dumb. I do seem to remember that it wasn't really related to CodePush, it was more an error somewhere else in my code that was meaning the paths weren't right, or something like that. Sorry not to be able to shed more light.. Hi @piyushjo, thanks for getting back to me. We've been trying to use Bugsnag, but we've tried Sentry and Crashlytics too. It's the same issue for any of them with React Native, as they all need you to upload matching bundle and sourcemap files in order to get usable stack traces into JS code, rather than into the underlying Obj-C or Java RN classes.\nUsing release-react, the bundle is not at ./CodePush, it's in some opaque temporary filesystem location (e.g. /var/folders/tx/ckdp0nf12ps6c9txsg6_5hq40000gn/T/CodePush in the push I just did). The problem is that this location is transient, and even if it weren't, it's not accessible programmatically from the code-push CLI, so getting a hold of it in any kind of deploy-syncing script would mean some pretty brittle (e.g.) sed or awking.\nUsing release seems to provide just these options:\n```\n$ code-push release --help\nUsage: code-push release    [options]\nOptions:\n  --deploymentName, -d       Deployment to release the update to  [string] [default: \"Staging\"]\n  --description, --des       Description of the changes made to the app in this release  [string] [default: null]\n  --disabled, -x             Specifies whether this release should be immediately downloadable  [boolean] [default: false]\n  --mandatory, -m            Specifies whether this release should be considered mandatory  [boolean] [default: false]\n  --noDuplicateReleaseError  When this flag is set, releasing a package that is identical to the latest release will produce a warning instead of an error  [boolean] [default: false]\n  --rollout, -r              Percentage of users this release should be available to  [string] [default: \"100%\"]\nExamples:\n  release MyApp app.js \"\"                                     Releases the \"app.js\" file to the \"MyApp\" app's \"Staging\" deployment, targeting any binary version using the \"\" wildcard range syntax.\n  release MyApp ./platforms/ios/www 1.0.3 -d Production        Releases the \"./platforms/ios/www\" folder and all its contents to the \"MyApp\" app's \"Production\" deployment, targeting only the 1.0.3 binary version\n  release MyApp ./platforms/ios/www 1.0.3 -d Production -r 20  Releases the \"./platforms/ios/www\" folder and all its contents to the \"MyApp\" app's \"Production\" deployment, targeting the 1.0.3 binary version and rolling out to about 20% of the users\n```\nand according to the link you posted the updateContents parameter seems to refer to already-existing packaged content (I guess created by react-native bundle), rather than where the content should be packaged. Using this I guess we could do it the other way round, bundle everything to where we want using react-native and then do the release using code-push release rather than release-react and pointing to the bundle. But that takes away a lot of the convenience and niceness of using release-react.\nSo the requirement is to be able to specify in a code-push release-react parameter where the bundle and sourcemap files should be stored, and for them to remain present on the filesystem after the code-push upload has finished in this case. Hope that makes sense.\n. Hey thanks @silhouettes, that's cool, from those source refs it looks fairly straightforward to make it output the bundle to a specific location as well as the sourcemap. Not sure when I'll have time to look further into that either but it seems eminently doable. Thanks!\n. ",
    "sriraman": "@igorclark Can you tell what was the problem with your code. I'm exactly struck in the same problem.. I'm using only CodePush. We didn't use anything frameworks like Rollout.io or JSPathc. Still, My app got rejected by apple with the same warning from Apple today.. ",
    "afilp": "@silhouettes Thank you for your prompt reply!\nSo, now that I did a react-release for iOS do I cause \"harm\" to the Android app? They use the same Deployment Key, so will it get the \"iOS-related\" JS code?! Should I hurry up and change this ASAP? Thanks!\n. Ok, thanks! Keep up the very good work and support.\n. Thanks. And what about iOS releases where the targetBInaryVersion option is not available?\nI am using this for iOS:\ncode-push release-react Exclusivi-iOS ios -d Production --mandatory\nWill the JS part of a NEW build be downgraded to what the CodePush server has? (this would be a \"bug\" IMHO) OR this is automatically smart and works with a \"<=\" logic behind the scenes?\n. @silhouettes Thanks!\nI think that the following code does not work as an AND and causes the latest released app to be updated by an older code-push release:\n--targetBinaryVersion \">=1.2.0 <1.5.3\"\nNote: \"1.5.3\" is the latest release which does not need any code push, HOWEVER the above line seems to work as an OR?\nCan you please show us the correct syntax?\nThanks!\n. @sergey-akhalkov  I have a similar problem in iOS. Code-push crashes the app on a newly submitted version. I just changed one line of code, code-pushed then opened our app. It crashed. Is there a way to debug this?. @max-mironov I have the latest React Native version:  \"^0.49.3\"\nMy android/build.gradle is:\n```\n    // Top-level build file where you can add configuration options common to all sub-projects/modules.\nbuildscript {\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.2.3'\n        classpath 'com.google.gms:google-services:3.1.0' // For firebase-analytics\n    // NOTE: Do not place your application dependencies here; they belong\n    // in the individual module build.gradle files\n}\n\n}\nallprojects {\n    repositories {\n        mavenLocal()\n        jcenter()\n        maven {\n            // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm\n            url \"$rootDir/../node_modules/react-native/android\"\n            url 'https://maven.google.com'\n        }\n    }\n}\n```\nIsn't the above the correct maven? Note that I am also using firebase and this requires the google maven.. @max-mironov \nActually, I do not have \"Firebase\" in the project but these two firebase-related packages:\n\"react-native-firebase-analytics\": \"^4.0.1\",\n    \"react-native-firebase-dynamic-links\": \"^1.0.3\",\nI think the problem is with the 2nd one (dynamic-links). Because of an error there I also had to change the dependencies as such:\n\n. Note, that when I tried after removing react-native-firebase-dynamic-links I get a different error:\n\\node_modules\\react-native-code-push\\android\\app\\src\\main\\java\\com\\microsoft\\codepush\\react\\CodePush.java:291: error: method does not override or implement a method from a supertype\n    @Override\n    ^\n. @max-mironov\nActually, I read somewhere (https://stackoverflow.com/questions/30114860/multiple-maven-repositories-in-one-gradle-file) that each \"maven\" should be separate, so I did this change now:\n\nAfter this change, I do not get the initial errors on initial post, and get this instead (same as above):\n\\node_modules\\react-native-code-push\\android\\app\\src\\main\\java\\com\\microsoft\\codepush\\react\\CodePush.java:291: error: method does not override or implement a method from a supertype\n    @Override\n    ^\nSo, I think that my initial post had to do with the maven syntax and not related to the react-native-firebase-dynamic-links package anymore, but only to react-native-code-push.\n. @max-mironov\nSo, the actual problem is why we get this Override error in code-push, despite we use the compatible versions.. @max-mironov \nIt is  fixed now!\nIt appears that the error was caused with the addition of firebase-dynamic-links package. Some instructions were missing there which caused problems to the rest of the app. I now added additional code and it works fine. \nThank you for your great and instant support!. @iTOYS Since this is a reload (from RN DEV menu) the firebase dynamic links info is lost. Obviously the same happens with Code-Push but I was wondering if you have a workaround or a code change that could store the links and reuse them on next load (after code-push). I assume that this may need some collaboration between you (code-push) and the authors of \"react-native-firebase\"? Thanks for any info.. @alexandergoncharov Thanks for your fast reply, the project I am using is rather complicated to make it simpler and submit it here. \nI can say for sure that the problem arises when we are using apply plugin: 'com.google.gms.google-services' in order to support the react-native-firebase. (as explained in their installation doc here: https://rnfirebase.io/docs/v5.x.x/installation/android )\nSomething is used in google-services related to net.minidev:json-smart that conflicts with your use of net.minidev:json-smart (in versioning).\nI had to comment out apply plugin: 'com.google.gms.google-services' and the conflict ceased to exist BUT this then made react-native-firebase unusable (crashes).\nI have added a similar issue there too, in case you want to co-investigate the problem:\nhttps://github.com/invertase/react-native-firebase/issues/1676\nThank you!. Hello, I am not sure what else to do, as I am not entitled to send the private project here.\nIs there a resolution setting I could use?\nI am not sure what this message means:\nDependency failing: com.nimbusds:nimbus-jose-jwt:5.1 -> net.minidev:json-smart@[1.3.1,2.3], but json-smart version was 2.3.\nBased on the above, isn't 2.3 OK?\n. Please see here, the following seems to have worked!\nhttps://github.com/invertase/react-native-firebase/issues/1676. ",
    "rozele": "@geof90 testing now.\n. @geof90 works with ON_APP_RESUME but I can't get IMMEDIATE to work because of #546.  Trying a manual check now.\n. @geof90 Actually, nevermind.  Pushed up a second update, restarted the app (with an installed update already in queue), the second update was downloaded and app reloaded without any problems. #546 is still a problem though, and occasionally the app will deadlock in InitializeUpdateAfterRestart() with or without this change, but I haven't got a stable repro yet.\n. I'm starting to suspect this is some kind of caching behavior built into Windows.Web.Http.HttpClient.\n. Immediately after an update, the first update check for the given hash usually comes back with a \"no update\" response.  Then all subsequent checks (until app restart) return that same cached response.  Just a theory...\n. Unfortunately it still repros when I set cache-control: no-cache as a header on the HttpRequest object...\n. But I'm not convinced that's eliminating client-side caching, and I can't find a toggle for such behavior.  I could try and add a random parameter (like DateTime) to the URI to see if it still caches...\n. Okay, so there is more evidence in favor of the client-side caching behavior.  By adding a random parameter to the updateCheck URL, the correct response comes back.  Now to figure out why HttpClient could be doing this... \n. Okay, by setting the following on the UWP HttpClient:\n``` c#\n           var filter = new HttpBaseProtocolFilter\n            {\n                AllowAutoRedirect = false,\n            };\n        filter.CacheControl.ReadBehavior = HttpCacheReadBehavior.MostRecent;\n        filter.CacheControl.WriteBehavior = HttpCacheWriteBehavior.NoCache;\n\n        return new DefaultHttpClient(new HttpClient(filter));\n\n```\nThings work properly.  ~~Unfortunately, setting Cache-Control: no-cache should have also worked as expected.  This is definitely a UWP bug, but I'm also curious if this could be a CodePush bug.~~ EDIT: This is an issue with the Cache-Control header missing from the CodePush service response.  Because CodePush can't really know the caching behavior of the underlying HTTP client, shouldn't it send a Cache-Control: no-cache header from the service, or use a URI on the client that changes over time (e.g., by appending a Unix timestamp to the URI to prevent such caching)?\n. Confirmed that if the service responded with a \"Cache-Control\" header, then the HttpClient would do the right thing.  I'll open another issue on http://github.com/Microsoft/code-push because I don't know where else to file service bugs.\n. Thanks for the service update @silhouettes, this works flawlessly now!\n. Please give me one minute to confirm the disposable changes in DownloadPackage did not break anything\n. Looks like InstallMode.ON_APP_RESUME is broken with these changes, confirming if its also broken without these changes.\n. The problem I discovered existed prior to these changes. These changes have no affect on the issue.  I followed up with a separate issue #550.  Okay to merge.\n. I have a fix for this once #551 and #552 are merged.\n. @silhouettes I can attest to the great work\u00a0@matthargett and\u00a0his team have done\u00a0to make react-native-windows\u00a0work for\u00a0Windows\u00a07.. > using PCLStorage;\nI know that we took this dependency for react-native-windows, but it's up to the CodePush team if they'll want to take this dependency here as well.  If you're not using PCLStorage on both sides (UWP and .NET 4.6), it may not be worth taking the dependency. #Closed\n\nRefers to: windows/CodePush.Net46/FileUtils.cs:1 in d9c2028. . @silhouettes I'll take another pass and then approve.. @rihua@microsoft.com one architectural comment about the shared code project.  If we were shipping code push as a compiled binary, it wouldn't matter so much, but now users have to add two projects to their react-native-windows solutions to see all code from the code push module.  Obviously the shared code approach saves a bunch of duplicate code for WPF.  The only other alternative would be to request that a copy of all code be made instead of using a shared project.  Just thought I should point this out, as it could impact perceived debuggability for code push users.\n\nIn reply to: 278792526 . Other than the final comments I've made, and the general comment about shared projects, this looks good.\n\nIn reply to: 278795588 . @pre10der89 thanks for filing this, but I think we need to provide a reasonable alternative to grab the ReactInstanceManager from.  We'll probably need an abstraction like ReactApplication in ReactAndroid (https://github.com/facebook/react-native/blob/master/ReactAndroid/src/main/java/com/facebook/react/ReactApplication.java). Also this breaking change will hopefully land in v0.50 - https://github.com/Microsoft/react-native-windows/pull/1458. Added the necessary changes for that as well.. Thanks @sergey-akhalkov, this is ready to merge. No real reason for not having official releases. We stopped having stable releases after 0.42 primarily because of limited time, but I was hoping to get back on the React Native cadence, publishing RCs simultaneously with theirs, and stable at the end of the month, just been hard to catch up.. The issue is actually caused by the \"shared project\" approach used to implement both UWP and WPF support for react-native-windows. The link command in react-native-windows works similar to Android - it looks for a class matching IReactPackage and grabs the .csproj in that directory. In the case of react-native-code-push, the IReactPackage file is only in the same folder as the .shproj, not the .csproj for UWP. . Since they are already locking to a specific version of react-native, you should also lock to a specific version of react-native-windows (these need to be kept in sync).. Not sure what this using belongs to, since no new type references were added.. add an empty line between methods. #Closed. >nor relible \nnot reliable #Closed. >internal \nEmpty newline between methods. #Closed. >catch \nIs there a \"TryGetFileAsync\" or the like to prevent throwing an exception in a common case?  Is this method typically called when the bundle does not exist? #Closed. > CodePushConstants.AssetsBundlePrefix.Replace(\"ms-appx:///\", String.Empty) \nIn react-native-windows, we eliminated the use of ms-appx:/// in the context of react-native-wpf because the path prefix is controlled by the application.  Since ms-appx:/// is a UWP convention, it should not be used here. #Closed. Since we're in the context of the .NET 4.6 project, do we really need these conditional compile directives?. >nor \nnot #Closed. >newPackageFolderPath \nnewUpdateFolder? #Closed. Maybe rename the variable to something like existingUpdateFolder to make it a bit more readable (then declare a new var below where you actually get the new reference to the folder)\n\nIn reply to: 99630777 . >) Un-zipping is quite long operation \nIt depends on where this is originally called from.  I would assume that this work is already being performed on a background thread, so there would be no reason to create yet another task to continue this work.  At the end of the day, you're still blocking a thread pool thread.. >JObject \nKind of a nitpick, but there seems to be an inconsistent use of explicit and implicit variable types.  On the whole, does the code use mostly var or is there already a healthy mix? The C# coding convention says \"Use implicit typing for local variables when the type of the variable is obvious from the right side of the assignment, or when the precise type is not important.\"  I rarely find a case where type information is really important. #Closed. Delete extra newline.. >UInt64 \njust use ulong here? #Closed. >ulong to long \n*long to ulong #Closed. no file bundle prefix needed for WPF?. This is more of a question for the CodePush team, but should we just make the fields you need here part of the public API on react-native-windows?. This is suspicious, is this some missing feature, or was it just totally dead code?. >new ApplicationDataContainer(); \nAre these settings in-memory only then?  I think ApplicationData.Current.LocalSettings is persisted across runs.. Any specific reason why these were added?. This will screw up the stack trace of the exception (the point where the exception is thrown is recalculated from here).   Since this has no net affect on the behavior other, please remove this catch block.. Another case of a catch block with no purpose.. ",
    "scerelli": "No, moving it to dependencies fix the problem. \nUsually, I put all dependencies into dev-dependencies because none are required for production since react-native will bundle what it's needed from imports. I suggest to walk even through the dev-dependencies\n. ",
    "fadookie": "@panarasi Where is the service repo? We are using a similar hack for controlling runtime bundle loading and would be interested in following an issue/PR if one exists, and potentially making one if it doesn't yet.. ",
    "Choicelin": "the issue still happen after this merge. ",
    "uyson": "\u4e0d\u597d\u610f\u601d\uff0c \u6211\u90fd\u5fd8\u4e86\u4ec0\u4e48\u65f6\u5019\u51fa\u7684\u9519\u8bef\uff0c \n. ",
    "mikelambert": "Ahh, using a separate app per-platform is a great idea, thanks!\nI didn't see this mentioned in the documentation anywhere. They only mention stuff like:\nhttps://microsoft.github.io/code-push/: For example: code-push release-react MyApp ios.\nSame with the react-native doc, though it does at least have one place where it mentions AppName and AppName-android, though doesn't mention why or the justification for it.\n. Graph of errors over two weeks:\n\n. Ahhh, a big clue. I get multiple client ids from the same IP addresses, and these IP addresses are of the form 66.249.69.242 and 66.249.69.246, which are based in Mountain View, CA.\nMy best guess is that this might be the Calypso AppCrawler, crawling my app. It's hard to find too much info out there, but I saw this triggering usage stats on my MixPanel dashboard as well. I think but am unsure that the Calypso crawler might be related to https://firebase.google.com/docs/app-indexing/?hl=en , but there's not much info out there on this.... That changelist 857 was supposed to help the original reported bug 836.\nHowever, AFAIK the bug was a race condition where the \"reader\" ran before the \"writer\" did, resulting in an error trying to open the file.\nPassing in the same filename to both scripts (as 857 does) is smart and probably a better design, but it doesn't change anything to prevent the writer from running before the reader (which can still happen with that change).\nThus this change, which enforces an explicit ordering dependency between them.. ",
    "krizpoon": "I think the guideline should make it even more clear to state the reasons and consequences or make it an absolute must. Because I took it as a recommendation and now my app has been published and everything is too late :(. ",
    "naltimari": "Ok, so the CLI might show an warning, but I removed the app in Mobile Center without releasing it was connected to the deployment key I was already using... it's a shame. ",
    "adambene": "There should be a feature to transfer deployment keys between apps.. Hi @sergey-akhalkov, sure. We accidentally deleted an app from the web UI of the App Center and it contained the Code Push deployments also. There was no warning whatsoever that says it will happen.\nWe'd like to create a new app with the old deployment keys because we want to restore the original state to fix all the apps out there in a backward compatible way.\nAnother option would be to restore the old app with all its codepush releases in the App Center.. @sergey-akhalkov really nice! thanks :). Hi @max-mironov, ah, so the metadata will not be updated on the device.\nThe update was already installed on the test device.\nAfter making the device re-download the update, the description shows up.\nThanks!. ",
    "buptkang": "@DeDuckProject it seems there are two bugs in the react native cli that we fixed in 0.33 (https://github.com/facebook/react-native/commit/f31b6ba953b3caa4f964537b9badef9f4617c530 and https://github.com/facebook/react-native/commit/1168d0db45dc6105a4e88a7749ad5867d37049d2). If you still need to use your current version (0.30.0), you should make the two changes to replace the below code:\nnew CodePush(this.getResources().getString(R.strings.reactNativeCodePush_androidDeploymentKey), getApplicationContext(), BuildConfig.DEBUG)\nas\nnew CodePush(getResources().getString(R.string.reactNativeCodePush_androidDeploymentKey), getApplicationContext(), BuildConfig.DEBUG)\nOtherwise, you can upgrade the React-Native version to above 0.33, which will not raise this issue again. We've also updated the README so that other people don't run into the same issue - thanks so much for filing this!\n. Hi,\nFirst of all, it does not make sense. Inside of rollbackPackage function, if the failedPackage is nil, the code should not continue to execute saveFailedUpdate function. Look at this code snippet:\nhttps://github.com/Microsoft/react-native-code-push/blob/v1.15.0-beta/ios/CodePush/CodePush.m#L463\nSecond, even though saveFailedUpdate is executed, [failedUpdates addObject:failedPackage] should be called instead of insertObject:atIndex:\nhttps://github.com/Microsoft/react-native-code-push/blob/v1.15.0-beta/ios/CodePush/CodePush.m#L497\nIf possible, could you reproduce this error again and give me more details? Also, how frequent do you face up this issue? Have you tried to update the repo release version to 1.16.+?\nBo \n. @gmchaturvedi1 could you share your main js file or give me more in detailed information?  . I test this PR with @silhouettes, and it works well. . @chirag04 @stirman @JusticeLai @ezyone123 \nWe've merged all of the required fixes and verified everything. react-native-code-push@1.17.0-beta has been published to npm with support for react-native@0.40.0. Thanks for your patience.. @christopherdro @dingbat @jsappme @AndrewJack @ivpusic @nihgwu @martijndeh:\nApologies for the delay - we've merged all of the required fixes and verified everything. react-native-code-push@1.17.0-beta has been published to npm with support for react-native@0.40.0. Thanks for your patience, and release notes are coming soon!. I approved this document split PR. I have put the gulp script in the website repo to automatically synchronize the document change from this repo.. @silhouettes According to your comments, I have updated the script. It is ready to merge.. @silhouettes Fixed the comment in the script.. Hello @ryankask, thanks for pointing us this incorrect update. Yep, the current react-native supports up to android API level as 23, the react-native-code-push repo will sync with their upgrade.  In other word, the current version does not support Android SDK 7.0 and upper.. Awesome @max-mironov, I verified it. . @sergey-akhalkov after merging this PR, you can delete the Examples/generate-app.sh code since that script achieves the same goal as this PR. . Totally agree on it. That is reason we should remove that generate-app.sh code and use create-app.js instead. We should also update the document so that users can use this script to re-generate issues that they raise up. . Hey, are you sure the reason of your app rejection is due to CodePush? Did you use packages that relates with JSPatch? You can refer to this previous issue. . Hey, based on your given information, we cannot check what this exception root cause can be. We would suggest you to make another codepush release, which only disable the codepush dialog setting (updateDialog: false) without changing anything else. After that, you can monitor if such error is thrown again? Let us know if you have further concern. . Hey, have you ever by chance seen this similar issue from react-native repo?  . I accept all changes, just have a look at it again.  . Talked and there is a good reason for it. Talked and there is a good reason for it. ",
    "DeDuckProject": "Thanks. @silhouettes , thanks for the answer.\nI've actually started using targetBinaryVersion because I want to target an older version than the current one. So I wonder why I ever wanted to run this without that flag ;)\n. While writing this I understood that I've overridden the the android when I pushed the ios and vice-versa. This is a bit confusing since the command has the \"ios\" or \"android\" param. I thought the the client would be smart enough to only take the last version :(. ",
    "calflegal": "I believe this step fixed this issue for me: http://stackoverflow.com/questions/289274/error-when-import-zlib-in-iphone-sdk#answer-289294\n. Actually, I think since I've upgraded to react-native 0.36.0 I no longer needed those flags?\n. ",
    "iageoghe": "@max-mironov I think your instinct is good here. RN has moved along past the issue.. @yellowChao Closing for now; please let us know if the method @sergey-akhalkov has detailed does not work as expected. Thanks.. Hi @huangkaiw3n - Thanks for submitting this issue. I have a couple of questions:\n1. Do you mean that such users can not update until the next release you distribute through CodePush?\n2. Do you want a behavior where the app tries X number of times to install a CodePush release?. For me it crashes even if the update has been completed.. @sergey-akhalkov You are correct; I was missing configuration for CheckFrequency. Closing.. Hi @feiyingx, the answer to your first question really depends on what the root cause of the failed update is. If a release is made with React Native code that crashes on installation, then CodePush will automatically rollback to the previous released version; in fact, this is one answer to your second question: write code that crashes on load. In this case, the answer to your first question is: release a good update. If the update is good and/or there is some unknown reason for failure, then I would recommend a client-side solution. One user suggested that we add built-in configurable retry logic; in the absence of such a feature now, you could try your hand at adding it yourself. I hope that helps!. ",
    "mrkhan2": "Im having the same problem in #575 \n. @silhouettes thanks for the suggestion. Yes, I've already ran that link command. \nI've been going through the install steps and followed them very closely, yet same result. \nMy problem is very similar to #573 but when I try to run code-push debug ios on debug mode, I get the following output:\n\n[12:22:12] Sync already in progress.\n[12:22:12] Checking for update.\n[12:22:13] An unknown error occurred.\n[12:22:13] 404: The specified resource does not exist.\n\nand I have double checked, all the code-push keys are correct \nUPDATE:\nI noticed that when I run the app in release mode, here are the logs I see:\n\n[CodePush] Loading JS bundle from file:///Users/username/Library/Developer/CoreSimulator/Devices/25E29483-4724-44DE-B423-08EB491003BD/data/Containers/Bundle/Application/2C2D49B3-6187-466D-9781-BBFF3C103F6F/AppName.app/main.jsbundle\n2016-11-07 13:15:23.604 Payper[46946:3246471] [Crashlytics:Crash] Warning: NSUncaughtExceptionHandler is 'mp_handleUncaughtException' in '/Users/username/Library/Developer/CoreSimulator/Devices/25E29483-4724-44DE-B423-08EB491003BD/data/Containers/Bundle/Application/2C2D49B3-6187-466D-9781-BBFF3C103F6F/AppName.app/AppName'\n\nBasically, Crashlytics is throwing a warning at the same spot where the JS bundle is trying to be loaded from, could there be a problem with crashlytics that is causing code push to not work?\n. I created a new react-native project from scratch (react-native init newProj) just to check how if the process of adding code-push  is the problem here.  Here is step by step breakdown, please let me know if this is correct @silhouettes \n1. I am logged into code-push, app registered, etc.\n2. npm install --save react-native-code-push@latest in the project folder\n3. react-native link react-native-code-push\n4. add the staging key to my iOS project when prompted in terminal \n5.  In my index.ios.js file, I addimport codePush from \"react-native-code-push\"; and newProj = codePush(newProj);\n6. I turn on my code-push debug ios\n7. run the project in xcode\nin debug mode the console shows me:\n\nChecking for update.\nAn unknown error occurred.\n404: The specified resource does not exist.\n\nin release mode, I get:\n[CodePush] Loading JS bundle from file:///Users/username/Library/Developer/CoreSimulator/Devices/25E29483-4724-44DE-B423-08EB491003BD/data/Containers/Bundle/Application/2C2D49B3-6187-466D-9781-BBFF3C103F6F/AppName.app/main.jsbundle\nNO changes happen after I do code-push release-react newProj ios\nAm I doing this correctly?\n. @silhouettes Here is the main component file (index.ios.js) of that newProj I created:\n```\nimport React, { Component } from 'react';\nimport {\n  AppRegistry,\n  StyleSheet,\n  Text,\n  View\n} from 'react-native';\nimport codePush from \"react-native-code-push\";\nexport default class newProj extends Component {\ncomponentDidMount() {\n  codePush.sync();\n}\n  render() {\n    return (\n      \n\n          Welcome to React Native!\n        \n\n        index.ios.js\n        \n\n          Press Cmd+R to reload,{'\\n'}\n          Cmd+D or shake for dev menu\n        \n\n    );\n  }\n}\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#F5FCFF',\n  },\n  welcome: {\n    fontSize: 20,\n    textAlign: 'center',\n    margin: 10,\n  },\n  instructions: {\n    textAlign: 'center',\n    color: '#333333',\n    marginBottom: 5,\n  },\n});\nAppRegistry.registerComponent('newProj', () => newProj);\n```\nmy appdelegate.m file looks as the following:\n```\nimport \"AppDelegate.h\"\nimport \"CodePush.h\"\nimport \"RCTBundleURLProvider.h\"\nimport \"RCTRootView.h\"\n@implementation AppDelegate\n\n(BOOL)application:(UIApplication )application didFinishLaunchingWithOptions:(NSDictionary )launchOptions\n{\n  NSURL *jsCodeLocation;\n\nifdef DEBUG\njsCodeLocation = [NSURL URLWithString:@\"http://localhost:8081/index.ios.bundle?platform=ios&dev=true\"];\nelse\njsCodeLocation = [CodePush bundleURL];\nendif\nRCTRootView *rootView = [[RCTRootView alloc] initWithBundleURL:jsCodeLocation\n                                                      moduleName:@\"newProj\"\n                                               initialProperties:nil\n                                                   launchOptions:launchOptions];\n  rootView.backgroundColor = [[UIColor alloc] initWithRed:1.0f green:1.0f blue:1.0f alpha:1];\nself.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];\n  UIViewController *rootViewController = [UIViewController new];\n  rootViewController.view = rootView;\n  self.window.rootViewController = rootViewController;\n  [self.window makeKeyAndVisible];\n  return YES;\n}\n@end\n```\n. Problem was solved for me, the issue was due to a bad production key\nOn Tue, Jan 31, 2017 at 9:28 AM, Sergey Akhalkov notifications@github.com\nwrote:\n\n@mrkhan2 https://github.com/mrkhan2, @rt2zz https://github.com/rt2zz\n- is the issue still reproduces for you? Please let me know if I could help\nyou.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/575#issuecomment-276394830,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AQMOXgsKNo324QS4WhENqNohL1jo1832ks5rX1MjgaJpZM4Kcfkv\n.\n. \n",
    "marcpechaitis": "I too am seeing this happen to my newly deployed iOS app.  When running in DEV mode (either via Simulator or on my device), I see the app showing up in the deployment list.  I am not seeing any users/installs show up when running the version from the app store (including my own device)\nI checked the logs from the App Store version and found this:\n```\nJan  5 12:46:08 myphone myapp(CFNetwork)[713] : TIC TCP Conn Cancel [2:0x1743822f0]\nJan  5 12:46:08 myphone myapp(libsystem_network.dylib)[713] : nw_endpoint_handler_cancel [2 codepush.azurewebsites.net:443 ready resolver (satisfied)]\nJan  5 12:46:08 myphone myapp(libsystem_network.dylib)[713] : nw_endpoint_handler_cancel [2.1 23.101.203.117:443 ready socket-flow (satisfied)]\nJan  5 12:46:08 myphone myapp(libsystem_network.dylib)[713] : __nw_socket_service_writes_block_invoke sendmsg(fd 15, 85 bytes): socket has been closed\nJan  5 12:46:08 myphone myapp(libsystem_network.dylib)[713] : nw_endpoint_flow_protocol_disconnected [2.1 23.101.203.117:443 cancelled socket-flow (null)] Output protocol disconnected\n```\n(I am not sure if that is a red herring or not...but its the only reference to \"codepush\" I found in the logs.)\nHere is my code that performs the sync:\n```\ncomponentDidMount() {\n    CodePush.sync({ deploymentKey: this.getCodePushDeploymentKey(),\n                    updateDialog: false,\n                    installMode: CodePush.InstallMode.ON_APP_RESUME })\n  }\n```\n\nreact-native-code-push version: 1.16.0-beta\nreact-native version: 0.35.0\niOS version: 10.0\n\nCodepush is working perfectly fine on the Android deployment.\nOne other thing to note that might be a factor -- I do not have my codepush deployment key stored in my Info.plist file.  I do not want the key posted publicly in my git repo, so instead I am using react-native-config to hide the key in .env file.  But again, this works fine for android and via simulator so I do not think its the problem? . I suppose it was?  I ended up just adding the deployment key to my plist (I stopped hiding it via react-native-config) and now it is working.\n. @panarasi, but be advised this is not my issue originally...is @wafisher satisfied?. ",
    "wafisher": "This was resolved with the answer from @matrosov-nikita. Thanks!. ",
    "dentalulcer": "help\n. it works for me \n/** CodePushNativeModule.java->downloadUpdate() */\nasyncTask.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);\n. ",
    "levic92": "I started having the same issue with my project. When I deployed the app to some test devices last week codepush was working fine, but in my new builds it will only download updates while in debug mode. I will do some more investigating this weekend and report my findings back here.\n. Update (on iOS):\nSomehow I got it working on my device again (didn't change any code), but then I went to install the app fresh after deleting it off my device and now it won't install updates again.\nIf I install the debug build to the simulator and device it downloads and installs the update fine. In the release build it works properly on the simulator, but will not work on my iPhone. I know there is a debug command, but as far as I understand that only works for the simulator, is there any debugging tools that could help me on my iPhone?\n. ",
    "ninjz": "Hi @silhouettes I think that solves my issue, but now I am confused as to how to have a staging environment for my application. According to the instructions we are to put our staging environment configs in the debug buildType, but since that loads up the app from the packager then it technically is not getting my staging build either\n. Ok that actually makes a lot of sense now. Thanks @ippa !\n. ",
    "ippa": "@ninjz: from my build.gradle, maybe it helps:\n```\nbuildTypes {\n        debug {\n            buildConfigField \"String\", \"CODEPUSH_KEY\", '\"\"'\n        }\n        release {\n            minifyEnabled enableProguardInReleaseBuilds\n            proguardFiles getDefaultProguardFile(\"proguard-android.txt\"), \"proguard-rules.pro\"\n            buildConfigField \"String\", \"CODEPUSH_KEY\", '\"release-keyz\"'\n        }\n    // HACK: Name it \"stagingrelease\" so react-native (via react.gradle) will build it as a release\n    stagingrelease.initWith(buildTypes.release)\n    stagingrelease {\n        buildConfigField \"String\", \"CODEPUSH_KEY\", '\"staging-keyz\"'\n    }\n}\n\n```\nThis setup works well for me for now. a release-quality build with stagingreleasereading from code-push staging deployments. a debug that won't get anything from code-push. and a release with a code-push release key.\n. ",
    "hawkrives": "@panarasi In my project, I have flow configured to ignore all .json files, which it does \u2013\u00a0it will error on other JSON files if I don't \u2013 but it still errors on the CodePushHash.json.\nWe discovered that adding .*/CodePushHash.json, with the leading .*/, will force flow to ignore the file and not error.. ",
    "luongs3": "@silhouettes --noDuplicateReleaseError not work for me,\nInstead of getting error, i got a warning, with the same content:\n'[warning] The uploaded package was not released because it is identical to the contents of the specified deployment's current release.'. @tizzyapunkt bro, you save my life (y). still stuck in this issue ?. ",
    "iTOYS": "Hi @luongs3 \nFlag works properly, we don't publish the same packages.\nThis flag useful for CI and doesn't work like git --amend\nThanks!. Hi guys,\ncould you please paste here your terminal output?\nThanks!. Unfortunately I can't reproduce this issue.\nMy steps:\nbash\n$ react-native init AwesomeProject\n$ cd AwesomeProject\n$ npm i react-native-code-push --save\n$ react-native link react-native-code-push\n$ react-native unlink react-native-code-push\n$ react-native link react-native-code-push\nAnd all works fine.\nCould you please give me more clues e.g.: rn version, node version, npm version, additional steps.\n. Hi guys, sorry for delay.\nUnfortunately I can't reproduce this issue.\nThere is my App.js:\n```\nimport React, { Component } from 'react';\nimport { StyleSheet, Text, View, TouchableOpacity } from 'react-native';\nimport codePush from \"react-native-code-push\";\nclass App extends React.Component {\n  render() {\n    return (\n      \n {\n             codePush.sync({\n                  updateDialog: true,\n                  installMode: codePush.InstallMode.IMMEDIATE\n              });\n          }}>\n        Current version: 10\n\n\n    )\n  }\n}\nlet codePushOptions = { checkFrequency: codePush.CheckFrequency.MANUAL };\nexport default App = codePush(codePushOptions)(App);\n```\nreact-native-cli: 2.0.1\nreact-native: 0.54.2\nreact-native-code-push: 5.3.2\nIf you still faced this issue feel free to reopen it and please attach you example project that I can use to reproduce.\nThanks!. Hi @GideonLiu \nCould you please clarify what do you means:\n\n\nThan I deleted and reinstall my app many times\n\n\nI've tried you case with index.ios.js posted below and latest react-native-code-push all works fine for me:\n```\nimport React, { Component } from 'react';\nimport { AppRegistry, StyleSheet, Text, View, TouchableOpacity } from 'react-native';\nimport codePush from \"react-native-code-push\";\nclass App extends React.Component {\n  render() {\n    return (\n      \n {\n             codePush.sync({\n                  updateDialog: true,\n                  installMode: codePush.InstallMode.IMMEDIATE\n              });\n          }}>\n        Current version: 14\n\n\n    )\n  }\n}\nlet codePushOptions = { checkFrequency: codePush.CheckFrequency.MANUAL };\nApp = codePush(codePushOptions)(App);\nAppRegistry.registerComponent('Awesome47', () => App);\n```\nCould you please make a little example app that I can use for debug.\nThanks!. @GideonLiu\nJust a friendly ping, are you still have this issue?. Good news)\n. Hey, there!\nCould you please test and confirm that #1268 works?. Hi @HAMPLENI \nUnfortunately react-native-code-push doesn't support ES6 imports with TypeScript.\nPlease use const CodePush = require(\"react-native-code-push\"); instead.\nThanks!. Hi @ghyzx \nIs this error reproduce without CodePush? How can I repro this? \nCould you please make a little project to repro?. @ghyzx \nJust a friendly ping. Do you still have this issue? Could you please provide information that I requested above.. Hi @MackYang, sorry for delay!\nSeems like you should rebuild your native application each time that you change fonts.\nOr copy the contents in the Fonts folder to android/app/src/main/assets/fonts\nThanks!. Hi @jaggerwang, sorry for delay.\nCould you please try solution that @EvianZhow offered.\nPlease let me know any results!. @jaggerwang \nJust a friendly ping, any result?. Awesome!. Hi @birkir\nIs this issue still happen with latest version of react-native-code-push?. Closed. If you still facing this issue feel free to reopen . Hi @fatfatson,\nThanks fo reporting!\nCould you please attach archive with sample project to reproduce?\nThanks!. Hi @willmortonscoot \nUnfortunately we can't execute getVersionName() but CLI require version.\nTo avoid this error you should use -t|--target-binary-version option:\nappcenter codepush release-react -a <app_name> -t <version>\nThanks!. Hi @maxaggedon \nIt's impossible to download bundle before the first run.\nIn your case you can check first run inside your code and use following codepush config:\n{ updateDialog: false, installMode: codePush.InstallMode.IMMEDIATE }\nThanks!. Closed now. Feel free to reopen if you still facing this issue. Closed as not reproduce.\nIf you still faced this issue, feel free to reopen issue and please provide info that i can use to reproduce. Readme updated on #1151. Hi @aurorasimran \nPlease try to clear npm cache npm cache celean ~/.npm and reinstall code-push-cli:\nnpm install -g code-push-cli\nPlease check that you don't have any installation errors. Hm, then please try npm cache verify and after npm install -g code-push-cli\nThanks!. Looks like some issue with your npm.\nCould you please check if /usr/local/lib/node_modules/code-push-cli/node_modules/superagent exists.\nIf not, could you please try to install it manually:\nbash\n$ cd /usr/local/lib/node_modules/code-push-cli/\n$ npm install superagent\nThat should fix your issue . It's definitely npm problem((\nWhich version of npm do you use(npm -v)?\nAlso you can try reinstall package:\n$ npm uninstall -g code-push-cli\n$ npm install -g code-push-cli. @aurorasimran \nPlease see https://stackoverflow.com/questions/18401606/npm-doesnt-install-module-dependencies. @aurorasimran \nIs it work for you?. Hi @afilp \nJust for clarification\nIf you Reload JS from RN Dev menu it works as you expect? I'm not sure if this possible in RN. Hi @SudoPlz \nI've created a little fix #1206\nAlso please see https://stackoverflow.com/questions/22320418/setrequestproperty-throwing-java-lang-illegalstateexception-cannot-set-request. Hi @Shinichi52 \nCould you please provide codePushOptions which you put in higher-order component wrapper?. @Shinichi52 \nI'll take a look ASAP!\nThanks!. @Shinichi52 \nSorry for delay! I've tried your example applications and seems like all works fine.\nPlease see outputs below.\n1. First run and restart after installation:\nOS: darwin x64\nAdapter node: v7.9.0 x64\nvscode-chrome-debug-core: 3.23.0\nStarting debugger app worker.\nEstablished a connection with the Proxy (Packager) to the React Native application\nDebugger worker loaded runtime on port 35696\nModule RCTImageLoader requires main queue setup since it overrides `init` but doesn't implement `requiresMainQueueSetup`. In a future release React Native will default to initializing all native modules on a background thread unless explicitly opted-out of.\nModule ReactNativeConfig requires main queue setup since it overrides `constantsToExport` but doesn't implement `requiresMainQueueSetup`. In a future release React Native will default to initializing all native modules on a background thread unless explicitly opted-out of.\nRunning application movieapp.BusyBox ({\n    initialProps =     {\n        commandType = InitialScreen;\n        isUpdating = 0;\n        navigatorEventID = \"screenInstanceID2_events\";\n        navigatorID = \"controllerID1_nav\";\n        screenInstanceID = screenInstanceID2;\n    };\n    rootTag = 1;\n})\nRunning application \"movieapp.BusyBox\" with appParams: {\"rootTag\":1,\"initialProps\":{\"navigatorEventID\":\"screenInstanceID2_events\",\"navigatorID\":\"controllerID1_nav\",\"screenInstanceID\":\"screenInstanceID2\",\"isUpdating\":false,\"commandType\":\"InitialScreen\"}}. __DEV__ === true, development-level warning are ON, performance optimizations are OFF\n[NETINFO] CONNECTION TO WIFI\nsyncStatus... 5\nChecking for updates.\nsyncStatus... 7\nDownloading package.\nSending `CodePushDownloadProgress` with no listeners registered.\nsyncStatus... 8\nInstalling update.\nsyncStatus... 1\nUpdate installed.\n[CodePush] Restarting app\nInvalidating <RCTCxxBridge: 0x6000001c7350> (parent: <RCTBridge: 0x6040000c5a90>, executor: RCTWebSocketExecutor)\nDebugger worker loaded runtime on port 17970\nModule RCTImageLoader requires main queue setup since it overrides `init` but doesn't implement `requiresMainQueueSetup`. In a future release React Native will default to initializing all native modules on a background thread unless explicitly opted-out of.\nModule ReactNativeConfig requires main queue setup since it overrides `constantsToExport` but doesn't implement `requiresMainQueueSetup`. In a future release React Native will default to initializing all native modules on a background thread unless explicitly opted-out of.\nRunning application movieapp.BusyBox ({\n    initialProps =     {\n        commandType = InitialScreen;\n        isUpdating = 0;\n        navigatorEventID = \"screenInstanceID2_events\";\n        navigatorID = \"controllerID1_nav\";\n        screenInstanceID = screenInstanceID2;\n    };\n    rootTag = 11;\n})\nRunning application \"movieapp.BusyBox\" with appParams: {\"rootTag\":11,\"initialProps\":{\"navigatorEventID\":\"screenInstanceID2_events\",\"navigatorID\":\"controllerID1_nav\",\"screenInstanceID\":\"screenInstanceID2\",\"isUpdating\":false,\"commandType\":\"InitialScreen\"}}. __DEV__ === true, development-level warning are ON, performance optimizations are OFF\n[NETINFO] CONNECTION TO WIFI\nsyncStatus... 5\nChecking for updates.\n[CodePush] Reporting CodePush update success (v7)\nsyncStatus... 0\nUp-to-date.\nRunning application movieapp.Movies ({\n    initialProps =     {\n        commandType = InitialScreen;\n        navigatorEventID = \"screenInstanceID4_events\";\n        navigatorID = \"controllerID3_nav0\";\n        screenInstanceID = screenInstanceID4;\n        timestamp = 1519905228845;\n    };\n    rootTag = 21;\n})\nRunning application \"movieapp.Movies\" with appParams: {\"rootTag\":21,\"initialProps\":{\"timestamp\":1519905228845,\"commandType\":\"InitialScreen\",\"navigatorEventID\":\"screenInstanceID4_events\",\"screenInstanceID\":\"screenInstanceID4\",\"navigatorID\":\"controllerID3_nav0\"}}. __DEV__ === true, development-level warning are ON, performance optimizations are OFF\nRunning application movieapp.Movies ({\n    initialProps =     {\n        commandType = InitialScreen;\n        navigatorEventID = \"screenInstanceID5_events\";\n        navigatorID = \"controllerID3_nav1\";\n        screenInstanceID = screenInstanceID5;\n        timestamp = 1519905228845;\n    };\n    rootTag = 31;\n})\nRunning application \"movieapp.Movies\" with appParams: {\"rootTag\":31,\"initialProps\":{\"timestamp\":1519905228845,\"commandType\":\"InitialScreen\",\"navigatorEventID\":\"screenInstanceID5_events\",\"screenInstanceID\":\"screenInstanceID5\",\"navigatorID\":\"controllerID3_nav1\"}}. __DEV__ === true, development-level warning are ON, performance optimizations are OFF \n\nAfter close and reopen application:\nOS: darwin x64\nAdapter node: v7.9.0 x64\nvscode-chrome-debug-core: 3.23.0\nStarting debugger app worker.\nEstablished a connection with the Proxy (Packager) to the React Native application\nDebugger worker loaded runtime on port 17054\nModule RCTImageLoader requires main queue setup since it overrides `init` but doesn't implement `requiresMainQueueSetup`. In a future release React Native will default to initializing all native modules on a background thread unless explicitly opted-out of.\nModule ReactNativeConfig requires main queue setup since it overrides `constantsToExport` but doesn't implement `requiresMainQueueSetup`. In a future release React Native will default to initializing all native modules on a background thread unless explicitly opted-out of.\nRunning application movieapp.BusyBox ({\n    initialProps =     {\n        commandType = InitialScreen;\n        isUpdating = 0;\n        navigatorEventID = \"screenInstanceID2_events\";\n        navigatorID = \"controllerID1_nav\";\n        screenInstanceID = screenInstanceID2;\n    };\n    rootTag = 1;\n})\nRunning application \"movieapp.BusyBox\" with appParams: {\"rootTag\":1,\"initialProps\":{\"navigatorEventID\":\"screenInstanceID2_events\",\"navigatorID\":\"controllerID1_nav\",\"screenInstanceID\":\"screenInstanceID2\",\"isUpdating\":false,\"commandType\":\"InitialScreen\"}}. __DEV__ === true, development-level warning are ON, performance optimizations are OFF\n[NETINFO] CONNECTION TO WIFI\nsyncStatus... 5\nChecking for updates.\nsyncStatus... 0\nUp-to-date.\nRunning application movieapp.Movies ({\n    initialProps =     {\n        commandType = InitialScreen;\n        navigatorEventID = \"screenInstanceID4_events\";\n        navigatorID = \"controllerID3_nav0\";\n        screenInstanceID = screenInstanceID4;\n        timestamp = 1519905376607;\n    };\n    rootTag = 11;\n})\nRunning application \"movieapp.Movies\" with appParams: {\"rootTag\":11,\"initialProps\":{\"timestamp\":1519905376607,\"commandType\":\"InitialScreen\",\"navigatorEventID\":\"screenInstanceID4_events\",\"screenInstanceID\":\"screenInstanceID4\",\"navigatorID\":\"controllerID3_nav0\"}}. __DEV__ === true, development-level warning are ON, performance optimizations are OFF\nRunning application movieapp.Movies ({\n    initialProps =     {\n        commandType = InitialScreen;\n        navigatorEventID = \"screenInstanceID5_events\";\n        navigatorID = \"controllerID3_nav1\";\n        screenInstanceID = screenInstanceID5;\n        timestamp = 1519905376607;\n    };\n    rootTag = 21;\n})\nRunning application \"movieapp.Movies\" with appParams: {\"rootTag\":21,\"initialProps\":{\"timestamp\":1519905376607,\"commandType\":\"InitialScreen\",\"navigatorEventID\":\"screenInstanceID5_events\",\"screenInstanceID\":\"screenInstanceID5\",\"navigatorID\":\"controllerID3_nav1\"}}. __DEV__ === true, development-level warning are ON, performance optimizations are OFF\n\nOnly statuses:\n[NETINFO] CONNECTION TO WIFI\nsyncStatus... 5\nChecking for updates.\nsyncStatus... 7\nDownloading package.\nSending `CodePushDownloadProgress` with no listeners registered.\nsyncStatus... 8\nInstalling update.\nsyncStatus... 1\nUpdate installed.\n/* restart*/\n[NETINFO] CONNECTION TO WIFI\nsyncStatus... 5\nChecking for updates.\n[CodePush] Reporting CodePush update success (v7)\nsyncStatus... 0\nUp-to-date.\nPlease note that I could not install packages with yarn, after reinstall packages with npm application has started. Hi @SudoPlz \nI've conducted several tests and seems like this code can't crash app, just logging error.\nIf you are sure that acquisition-sdk.js is a cause of crash feel free to reopen issue and please provide some additional info!\nThanks!. Hi @sujitpk-perennial \ncode-push release-react runs bundler inside, and seems like react-native bundle doesn't bundle index.html dependencies.\nCould you please try to publish CodePush release with code-push release command, e.g.:\ncode-push release app_name iOS/ *\n. Please try to wrap asterisk in quotes:\ncode-push release app_name ./ios \"*\" . Seem like it's not a CodePush error, pleas try to bundle you app in separate folder and add needed assets manually:\n$ react-native bundle --platform ios --assets-dest /tmp/codepush/app_name --dev false --entry-file index.ios.js --bundle-output /tmp/codepush/app_name/main.jsbundle\n$ code-push release app_name /tmp/codepush/app_name \"*\"\nIf it's possible, could you please create some example project that i can use to reproduce your error.. @sujitpk-perennial \nThanks a lot! I'll take a look ASAP!. Hi @sujitpk-perennial \nUnfortunately React doesn't bundle assets that not mentioned directly in JS(RN) code and we can't include they in a patch. You can try to add required files to ./assets folder and publish new CodePush release\nJust for clarification. If you publish(or build release) your application without CodePush is it work?. Hi @xuan9230 \nIf you trigger sync() manually, please set checkFrequency to MANUAL\nAlso please see this solution which should work perfect for you:\nApp = codePush({ updateDialog: true, installMode: codePush.InstallMode.IMMEDIATE })(App);\nexport default App;\nPlease let me know any results\nThanks!. I think you can use default options for CodePush wrapper function. And use following options in case of first run(you should detect it by himself):\njavascript\nif (firstRun) {\n   codePush.sync({ updateDialog: false, installMode: codePush.InstallMode.IMMEDIATE });\n}\nThanks!. Fixed in #1209 . Hi @danielgarciasantos \nThis is repository about React Native plugin for CodePush. Not about push notifications.\nNevertheless please see https://tips.androidhive.info/2015/04/android-showing-push-notification-in-multiline/\nThanks!). Hi @abudel Thanks fo reporting!\nYou should modify dependencies section in your <project>/node_modules/react-native-code-push/android/app/build.gradle file:\ndiff\ndependencies {\n-    compile 'com.facebook.react:react-native:+'\n+    compile project(':ReactAndroid')\n    compile 'com.nimbusds:nimbus-jose-jwt:5.1'\n}\nThanks!. Hi guys!\nPlease see #1219\nWould be great if you can test this!. @Titozzz \nThanks! Please let me know any results!. Thanks for testing @Titozzz!\nGoing to release new update.. Hi @canyara \nPlease see \nhttps://github.com/Microsoft/react-native-code-push/blob/master/docs/setup-ios.md#plugin-installation-ios---cocoapods\nIf you will have any questions let me know!\nThanks!. Hi @sujayjaju, thanks for reaching us!\nAs I remember React Native doesn't support .svg out of box:\n```\nFAILURE: Build failed with an exception.\n\nWhat went wrong:\nExecution failed for task ':app:mergeReleaseResources'.\n/Users/TOYS/projects/AwesomeProject/android/app/build/generated/res/react/release/drawable-mdpi/image.svg: Error: The file name must end with .xml or .png\n```\n\n\n\nCould you please describe your use case. \nWould be great if you could create little example project which I can use to reproduce.\nThanks!. @sujayjaju \nPlease note \nhttps://www.npmjs.com/package/react-native-svg-uri#known-bugs. Hi @peacechen \nWhat's exactly should be updated in documentation?. Hi @ethanyuwang, sorry for delay!\nYou should export App after wrapping e.g:\n``\nclass App extends React.Component {\n...\n}\n...\nexport default App = codePush({\n  checkFrequency: codePush.CheckFrequency.ON_APP_RESUME,\n  installMode: codePush.InstallMode.ON_NEXT_RESUME\n})(App);\nWith this code all works fine for me!\nThanks!. Hi guys,\nUnfortunately I can't reproduce you issue.\nThere is my App.js:\n```\nimport React, { Component } from 'react';\nimport { StyleSheet, Text, View, TouchableOpacity, Image } from 'react-native';\nimport codePush from \"react-native-code-push\";\nclass App extends React.Component {\n  render() {\n    return (\n      \n\n\n\n {\n             codePush.sync({\n                  updateDialog: true,\n                  installMode: codePush.InstallMode.IMMEDIATE\n              });\n          }}>\n        Current version: 15\n\n\n    )\n  }\n}\nlet codePushOptions = { checkFrequency: codePush.CheckFrequency.MANUAL };\nexport default App = codePush(codePushOptions)(App);\n```\nAfter codepush release was installed all looks the same as in a binary version:\n\nWould be great if you can create little project which I can use to reproduce\nThanks!\n. Sorry guys, I doesn't see difference between binary version and codepush.\nExample project would be helpful!. Hi @Ashwin-Mothilal \nI don't have access to new images.\nCodePush options which i use don't have any affects to styles.\nI'm waiting project from you :)\nThanks!. CodePush and plugins doesn't change your code and assets.\nCould you please download your bundle and compare props values?\nhttps://codepush.azurewebsites.net/updateCheck?deploymentKey=[your-key]&appVersion=[app-version]. Closing this issue for now! I recommend you to wrap all your props values with {}\nThanks!. Hi @ethanyuwang \nI've just tried your code example with react-native@0.54 and react-native-code-push@5.2.2\nAll works fine fo me:\n[CodePush] Checking for update.\n[CodePush] Reporting binary update (1.0)\n[CodePush] App is up to date.\n[CodePush] Checking for update.\n[CodePush] Awaiting user action.\n[CodePush] Downloading package.\n[CodePush] Installing update.\n[CodePush] Restarting app\nCould you please try again with react-native@0.54?\nFeel free to reopen issue if you still have the issue. Hi @amardeepranu, thanks for reporting!\nJust for clarification. Does plugin work correct with RN@0.53?\nWhich cocoapods deps do you use?\nCould you please attach your CodePush.m here?\nThanks!. @amardeepranu \nSorry for delay, I've just tested RN with Podfile, and all works fine for me.\nIf you add ) to the end of your CodePush.m line 1, is it fix your problem?\nActually  we have correct CodePush.m in package and we doesn't modify it while working\n. Hi guys, sorry for delay!\nCould you please provide some additional info how do you use codepush:\n1. How did you install plugin?\n2. What codepush options do you use?\n3. You run sync manually or just wrap root component?\nWould be great if you can create a simple app that I could repeat the error. Hi @lucianomlima, sorry for delay!\nYes, this is correct behavior. Let me explain!\ncurrent.isFirstRun - means that you use package installed from codepush and it's run for the first time. If you just install binary version of application you won't have current.\nIn your case I can recommend add variable and store your custom state:\n```javascript\nlet isFirstRun = true;\n...\nif (isFirstRun) {\n   isFirstRun = false;\n   this.showAlert('Your app is updated!');\n}\n```\nThanks!. @lucianomlima \nI see. This is default behavior, if you would like to install new version ON_RESUME, just set up following options:\nconst codePushOptions = {\n    checkFrequency: CodePush.CheckFrequency.ON_APP_RESUME,\n    installMode: codePush.InstallMode.ON_NEXT_RESUME\n};\nexport default CodePush(codePushOptions)(App); \n. Hi @gregwym \nThanks for pointing us!. react-native-code-push@5.3.2 has been released. Hi @kevindavee,\nYou should wrap your key with quotes, please see\nFor example:\nCODEPUSH_DEPLOYMENT_KEY_STAGING =\\\"deployment_key_here\\\" && cd android && ./gradlew assembleReleaseStaging && cd../\n. Hi guys,\nYou are right, the readme a bit outdated. \nYou don't need to do something special to publish your assets if you use it properly:\n```\n// GOOD\n;\n// BAD\nvar icon = this.props.active ? 'my-icon-active' : 'my-icon-inactive';\n;\n// GOOD\nvar icon = this.props.active\n  ? require('./my-icon-active.png')\n  : require('./my-icon-inactive.png');\n;\n```\nThanks!. Hi @L-Jovi,\nYou can use --targetBinaryVersion| -t flag e.g.:\ncode-push release-react <appName> ios -t 1.0.0\nThanks!. Hi @andresesfm,\nThanks for suggestion, I'll take a look on your PR a bit later!. @andresesfm \nMerged, thanks!. Hi @mdsaddam \nDid you wrap your App class with code push?\n```javascript\nclass App extends React.Component {\n...\n}\nlet codePushOptions = {\n      checkFrequency: CodePush.CheckFrequency.ON_APP_START,\n      installMode: CodePush.InstallMode.ON_NEXT_RESTART,\n      updateDialog: true\n};\nexport default App = CodePush.sync(codePushOptions)(App);\n```. @mdsaddam \nUnfortunately I can't reproduce that.\nSeems like you or one of your dependencies use this: o(a[1]).NativeModules.SourceCode.scriptURL.split(\"://\")[1].split.\nCould you let me know, how it's used in code?\nThanks!. Hi @krunalsshah \nCould you please clarify, what do you want to do?\nThis plugin perfectly builds with React-Native project in last Android studio.\ngradle:2.2.3 and gradle:3.0.0\nIt's not a correct to build react-native-code-push separately \nThanks!. Hi @Catpants \nPlease see example usage of SyncOptions.\nShortly, in your case:\njavascript\ncodePush.sync({ \n   deploymentKey: \"KEY\", \n   installMode: codePush.InstallMode.IMMEDIATE\n});\nThanks!. @Catpants \nI've checked again with this config:\nlet codePushOptions = { checkFrequency: codePush.CheckFrequency.MANUAL };\nexport default App = codePush(codePushOptions)(App);\nand with this sync call:\nconst Staging = \"key_staging\";\nconst Production = \"key_production\";\n...\n<TouchableOpacity\n  style = {{height: 70, width: 200, backgroundColor: 'green'}}\n  onPress={() => {\n     codePush.sync({\n          deploymentKey: Production, \n          updateDialog: true,\n          installMode: codePush.InstallMode.IMMEDIATE\n      },\n      this.codePushStatusDidChange,\n      this.codePushDownloadDidProgress);\n  }}>\n  <Text>Current version: 68(S)</Text> \n</TouchableOpacity>\n...\nSo I haven't faced any issue.\nCould you please describe your flow?\nThanks!. There is typings issue(react-native-code-push.d.ts). Hi @hannigand,\nUnfortunately it's impossible :(. CodePushPublicKey using for code signing.\n. Hi @thatjuan \nWe are compare binaryHash and updateHash, if they are equal, we haven't update binary version.\nIf I right understand, you've built Release configuration and tested on real devices?\nI've checked this case and all work as expected.. Hi @thatjuan, just a friendly ping)\nAre you still facing this issue, do you have any updates?\nThanks!. Closing now. Feel free to reopen if you still facing this.\nThanks!. Hi @SudoPlz \nI'm pretty sure that this our code can't crash your app.\nAs you can see we're just call callback at this point:\n\nhttps://github.com/Microsoft/code-push/blob/master/sdk/script/acquisition-sdk.ts#L224-L227\n\n(there are equal to acquisition-sdk.js:143:20)\np.s. I recommend you to update react-native-code-push to latest version. Actually not, I've especially checked it with the old version\nCould you tell me please where you got output above?(stacktrace). Is it possible that Bugsnag reports all unhandled promise rejection?\nAnd at this time app works fine. @SudoPlz \nhttps://docs.bugsnag.com/platforms/nodejs/other/#using-promises. @SudoPlz \n\nAs of v2.0.0, Bugsnag reports process#unhandledRejection events by default. After handling the rejection, Bugsnag will shut down the process (which will eventually be the default behaviour of Node itself).\n\nYes, it's promise inside.\n. By default app doesn't crash when unhandledRejection happen.\nBugsnag kill it. You are welcome!\nFrom my side I'll try to handle rejection. @SudoPlz \nCould you please check if my fix works for you? #1253 \nThanks!. Duplicate #1249. Hi @pramjeet \nSeems like your Staging deployment has mandatory update.\nMandatory updates always installs immediately.. Hi @aliceathens,\nJust for clarification, you are sure that installs were successful, but you don't see statistics, right?. Can you run app in Android Studio? If yes you would able to see codepush logs ([CodePush]). Seem like you can't call CodePush.sync().\nThere is my output:\n04-10 12:01:16.722 4883-4883/com.awesomeproject D/ReactNative: [CodePush] Loading JS bundle from \"assets://index.android.bundle\"\n04-10 12:02:17.068 4883-4933/com.awesomeproject I/ReactNativeJS: [CodePush] Reporting binary update (1.0)\n04-10 12:03:00.227 4883-4933/com.awesomeproject I/ReactNativeJS: [CodePush] Checking for update.\n04-10 12:03:00.740 4883-4933/com.awesomeproject I/ReactNativeJS: [CodePush] Awaiting user action.\nCould you please share your codePushOptions and how you setup CodePush in App.js?. I've checked with the latest and with your versions of RN and plugin, still don't have any issues:\n04-12 13:26:49.956 12819-12819/com.awesomeproject D/ReactNative: [CodePush] Loading JS bundle from \"assets://index.android.bundle\"\n04-12 13:26:56.493 12819-13057/com.awesomeproject I/ReactNativeJS: Checking for updates.\n04-12 13:26:58.534 12819-13057/com.awesomeproject I/ReactNativeJS: Downloading package.\n04-12 13:26:59.428 12819-13057/com.awesomeproject I/ReactNativeJS: 17997 of 155323 received.\n04-12 13:26:59.444 12819-13057/com.awesomeproject I/ReactNativeJS: 26189 of 155323 received.\n04-12 13:26:59.461 12819-13057/com.awesomeproject I/ReactNativeJS: 65101 of 155323 received.\n04-12 13:26:59.477 12819-13057/com.awesomeproject I/ReactNativeJS: 81485 of 155323 received.\n04-12 13:26:59.494 12819-13057/com.awesomeproject I/ReactNativeJS: 122445 of 155323 received.\n04-12 13:26:59.503 12819-13057/com.awesomeproject I/ReactNativeJS: 155323 of 155323 received.\n04-12 13:26:59.791 12819-13055/com.awesomeproject D/ReactNative: [CodePush] Applying diff update.\n    [CodePush] Verifying hash for folder path: /data/user/0/com.awesomeproject/files/CodePush/01262515fce01c475db38347023acea024b4ffe9ba9424a2fba332e4759172c2\n04-12 13:26:59.819 12819-13055/com.awesomeproject D/ReactNative: [CodePush] Manifest string: [\"CodePush/drawable-mdpi/a.png:307337dfef87a15a738386105df8afd11fdd9ad85d73b50601132e67cc182b1b\",\"CodePush/index.android.bundle.meta:5bca4df51258343720287ab9cf96df8909ae3014e83243babda2d87c660237ab\",\"CodePush/index.android.bundle:55891a501674a80afd70a1ce0f1eabfdd9e922f3ba61d0c2425d169517762e8f\"]\n04-12 13:26:59.821 12819-13055/com.awesomeproject D/ReactNative: [CodePush] Expected hash: 01262515fce01c475db38347023acea024b4ffe9ba9424a2fba332e4759172c2, actual hash: 01262515fce01c475db38347023acea024b4ffe9ba9424a2fba332e4759172c2\n    [CodePush] The update contents succeeded the data integrity check.\n    [CodePush] Verifying signature for folder path: /data/user/0/com.awesomeproject/files/CodePush/01262515fce01c475db38347023acea024b4ffe9ba9424a2fba332e4759172c2\n04-12 13:26:59.866 12819-13055/com.awesomeproject D/ReactNative: [CodePush] JWT verification succeeded, payload content: {claimVersion=1.0.0, iat=Thu Apr 12 13:25:23 GMT+03:00 2018, contentHash=01262515fce01c475db38347023acea024b4ffe9ba9424a2fba332e4759172c2}\n    [CodePush] The update contents succeeded the code signing check.\n04-12 13:26:59.913 12819-13057/com.awesomeproject I/ReactNativeJS: Installing update.\n04-12 13:27:00.028 12819-13057/com.awesomeproject I/ReactNativeJS: Update installed.. Hi @aliceathens, just a friendly ping)\nAre you still facing this issue, do you have any updates?\nThanks!. Closing now. Feel free to reopen if you still facing this.\nThanks!. Hi @L-Jovi \nI hope that this article would be helpful for you\nhttps://facebook.github.io/react-native/docs/communication-ios.html#calling-react-native-functions-from-native-events\nThanks!. We've never faced this before. Did you try something? What result?\nI guess the best place to call sync it's after your customer have loaded RN bundle, the same as in regular RN app. Closing for now. Feel free to reopen if you still faced this issue and provide all possible info that would be helpful for us!\nThanks!. Hi @kevindavee \nThis repo is not related for your issue. \nMicrosoft/appcenter-cli is better place for it:)\nappcenter-cli uses semver.validRange under the hood. So 1.0-beta isn't valid range, but 1.0.0-beta is!\nThanks for reaching us!. Hi @SudoPlz \nYes it can. Have you tried fix your issue as mentioned in #873 ?. Hi @hannigand,\nThere may be various circumstances. Was comment above helpful for you?\nIf you still faced this issue please try to log possible errors. All additional info would be helpful to faster resolve this issue!\nPlease let us know any result, Thanks!. Closing now. Feel free to reopen if you still facing this.\nThanks!. Hi @tmaly1980 \nThank you for contributing! . Hi @xiaogaofudao \nWe haven't test plugin with RN@0.55 yet. But i'm sure that it works properly! :)\nThanks!. @alexandergoncharov PTAL. Hi @841660202 \nCould you please fill this issue by template. Hi @larslockefeer \nThanks for contributing!. We are planning release new version early next week. Please change url to original wix repo. Please use e.getMessage(). ",
    "jsshizhan": "i have the same problem and --noDuplicateReleaseError not work.when i clean history,the problem disappear. ",
    "brettpappas": "everything is working for me using 0.36 and 1.15.0-beta\n. This is actually not what I have found to be true. The docs you referenced are not for InstallMode, they refer to the sync process that checks for updates.\nMy testing seemed to show that the \"sync\" option for ON_NEXT_RESUME only checked when the app \"returned\" from background to foreground NOT when the app started initially. This scenario is only triggered when ON_NEXT_RESTART is set.\n. ",
    "ericnograles": "Working nicely using 0.36 and 1.15.0-beta for me as well!\n. ",
    "vonovak": "btw rn-diff repo might help figuring out whether something got broken\n. quoting the docs:\n1) Silent sync on app start (the simplest, default behavior). Your app will automatically download available updates, and apply them the next time the app restarts\n2) Silent sync every time the app resumes. Same as 1, except we check for updates, or apply an update if one exists every time the app returns to the foreground after being \"backgrounded\".\ntherefore ON_NEXT_RESUME fires both events and you're good to use it ;)\n. I have solved this to my satisfaction by adding a third build type, as described above. This however, also required the ability to configure devEnabled for the build type which is currently not possible. Here's a PR in RN core that would allow it, comment it if you find it handy.. @silhouettes sorry to bother, do you have an opinion on this? Thanks. @goldylucks release is what the app users are running, staging is what we use for testing internally. New features of the app are first code-pushified to staging where they can be tested. Once done, they are moved to production using code push promote. +1 I have explicitly set installMode.ON_NEXT_RESTART but the app is updated without waiting for the restart and restarts right in front of the user. running 0.37. running the same setup as @SimchaShats . I'm using ex-navigation so that shouldn't be the issue\nOn Nov 24, 2016 10:48, \"Simcha Shats\" notifications@github.com wrote:\n\n@silhouettes https://github.com/silhouettes @vonovak\nhttps://github.com/vonovak may be it can be also important, I'm using\nwix-navigation https://github.com/wix/react-native-navigation, it has a\nlittle bit different point of entrance in application...\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/617#issuecomment-262733755,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ABfmwwzZ7G-OE5_0e2qd1RPskfrMtWpIks5rBV2DgaJpZM4K6axq\n.\n. mandatory was the problem, sorry. I guess this can be closed. duplicate of #617 . check out supported versions\n\nv0.19-v0.28 v1.7.0+ (introduced Android asset support). yes, code push does require internet to get its updates, but if the app doesn't connect to the internet it will just run the javascript bundle it has available on the device. related #614 . > I suppose documentation should be updated to specify that only release mode should be used to test CodePush updates.\nI would rather say that only modes other than debug should be used with code push. \nThis paragraph, more specifically\ndebug {\n            ...\n            buildConfigField \"String\", \"CODEPUSH_KEY\", '\"<INSERT_STAGING_KEY>\"'\n            ...\n        }\nshould imo be updated, because it makes no sense to me to use code push in debug buildConfig. Rather I'd create a new buildConfig called staging and put this content into it. This is essentially what is discussed in #614 . ",
    "EladPlayground": "I can confirm that IMMEDIATE and ON_NEXT_RESUME mandatory installation crashes. Any suggestions?\n. ",
    "benedicthsieh": "So I believe that as a result of this bug, any deployment that has a mandatory upgrade anywhere in its history will now crash starting from a clean install, is that correct? That's what we're seeing with our deployment. I'm guessing it's because even after we pushed a non-mandatory upgrade to 'hide' the mandatory one, the upgrade itself will still happen with mandatory behavior (due to the behavior specced under 'Mandatory Parameter' here: https://microsoft.github.io/code-push/docs/cli.html#link-10.\nCan we fix our codepush production deployment by clearing history code-push deployment clear? The docs say not to do this in a production environment, but I'm not sure what else we could do.\n. Patching the mandatory flag out of our history worked, thanks for the tip!\n. Thanks for the speedy response, that's the solution we'll adopt in the near term.\nWould the team consider adding a bundleOutput flag to release-react (like the existing sourcemapOutput flag) for the next release? Or maybe code-push app get <version> in case people wanted to archive their bundles elsewhere?. ",
    "burgalon": "@silhouettes I'm experiencing this exception when calling codePush.appRestart() manually, with RN 0.39.2 and react-native-code-push 1.17.0-beta\n\nW/unknown:React( 1483): Tried to enqueue runnable on already finished thread: 'native_modules... dropping Runnable.\nW/MessageQueue( 1483): Handler (com.facebook.react.bridge.queue.MessageQueueThreadHandler) {536e9bbc} sending message to a Handler on a dead thread\nW/MessageQueue( 1483): java.lang.RuntimeException: Handler (com.facebook.react.bridge.queue.MessageQueueThreadHandler) {536e9bbc} sending message to a Handler on a dead thread\nW/MessageQueue( 1483):  at android.os.MessageQueue.enqueueMessage(MessageQueue.java:294)\nW/MessageQueue( 1483):  at android.os.Handler.sendMessageAtTime(Handler.java:473)\nW/MessageQueue( 1483):  at android.os.Handler.sendMessageDelayed(Handler.java:446)\nW/MessageQueue( 1483):  at android.os.Handler.post(Handler.java:263)\nW/MessageQueue( 1483):  at com.facebook.react.bridge.queue.MessageQueueThreadImpl.runOnQueue(MessageQueueThreadImpl.java:61)\nW/MessageQueue( 1483):  at com.facebook.react.bridge.queue.NativeRunnable.run(Native Method)\nW/MessageQueue( 1483):  at android.os.Handler.handleCallback(Handler.java:615)\nW/MessageQueue( 1483):  at android.os.Handler.dispatchMessage(Handler.java:92)\nW/MessageQueue( 1483):  at com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:31)\nW/MessageQueue( 1483):  at android.os.Looper.loop(Looper.java:137)\nW/MessageQueue( 1483):  at com.facebook.react.bridge.queue.MessageQueueThreadImpl$3.run(MessageQueueThreadImpl.java:196)\nW/MessageQueue( 1483):  at java.lang.Thread.run(Thread.java:856)\n\n. ",
    "beansoftapp": "I've found an problem which causes this exception, eg my React JS used a customized native component, however this native component doesn't added to the ReactInstanceManager.Builder by method addPackage, then this problem will occur.. ",
    "quinnliu": "I am having the same issue using RNPM with versions:\n\"react-native\": \"0.35.0\",\n    \"react-native-code-push\": \"^1.15.0-beta\",\nand Xcode 7.3.1 for my iOS project: https://github.com/Laybium/laybium\nWhen I tried change line 1 of CodePush.h to #import \"React/RCTEventEmitter.h\"\nI still get the same error. \n@silhouettes Is there a earlier version of react-native-code-push I should try? Thanks\nUPDATE: @stewart42 \nI deleted the entire node_modules folder, shut down all processes, then npm install, cmd+shift + k to clean the build, cmd + shift+b to create the build, and then cmd + r to run the app again. This time my app loaded :) \nI think for the future every time you add a new package through npm you always need to delete node_modules and re npm install\n. ",
    "shrutic": "@silhouettes I had the same issue as @stewart42 and I followed the work around as mentioned by @quinnliu  . It unfortunately didnt work for me. I still get the error \"RCTEventEmitter.h\" file not found. For me \"React/RCTEventEmitter.h\" also didnt work. I am trying to setup CodePush for an iMessage Extension using React native. My react native version is 0.34.0 and code push version is 1.15.1\nUPDATE:\nI installed pod file, but also accidentally followed the steps for manually integrating the CodePush plugin from the code push documentation. After reverting manual integration steps back, the work around of @stewart42 of \"React/RCTEventEmitter.h\" worked for me. But without it, I still get the error of \"RCTEventEmitter not found\"\n. Yes I am using Swift as well. I might be able to get a sample app next\nweek. Which version of Cocoapods are you using? I am using 1.0.1. Beyond\n1.0.1, React native has issues for me and so until react native fixes this,\nI am stuck at cocoapods 1.0.1\nOn Wed, Nov 16, 2016 at 3:15 AM, Stewart Scott notifications@github.com\nwrote:\n\nYes I am using swift.\nI have a few items I need to get done today, but I will try to get a\nsample app with the issue as soon as I can.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/583#issuecomment-260920157,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AD8ySa7C4I64dQMRG7OLECT9aY6VcYTXks5q-uXKgaJpZM4Kg-r1\n.\n. Thanks for your response, Chirag. \n\nWhen I remove the /android/ entry from .gitignore, I don't get any other files added. Seems like I need to compile react-native somehow to generate the archives. Could you let me know how I can do that?\n\nFrom this link https://facebook.github.io/react-native/docs/android-building-from-source.html , it seems like I need to build react-native from source (as  I am using a fork branch of react-native with fixes that are yet to be part of react-native release). So I tried the steps described in the link and got the following error.\n\nFrom this link https://github.com/facebook/react-native/issues/11677, it seems like @chirag04  were able to get the react-native to build from source. Could you let me know why I am hitting this error? I installed NDK using my android studio instead of downloading from the zip file included in the link https://facebook.github.io/react-native/docs/android-building-from-source.html here. I followed your guidance in the  https://github.com/facebook/react-native/issues/11677, but still hitting the same error as above. \n\nUPDATE: \nTurns out I have to indeed use the older version of Android-NDK listed in the link https://facebook.github.io/react-native/docs/android-building-from-source.html instead of the one that gets installed from Android Studio. That fixed the issues of react-native compilation. Unfortunately, the Code push issues still exist and I have for now removed Code push from our project. Code push works just fine upon pointing to 0.43.3 version directly but fails with my forked version.\nUpon further investigation, I hit similar errors ( Unable to locate symbol ) even after removing codepush from my android project. \nThen I found out that as per the react-native documentation, there are additional steps to be followed for android when using a forked version of react-native here Building React native from source for android. \nUpon following the above steps, all the \"Unable to locate symbol\" errors without codepush were resolved. But upon adding codepush, the react-native errors still showed up. So for now, I have removed codepush from our project. I will continue to investigate why these errors are still happening\n. @chirag04 could you help me with how to publish archives from React native fork. I could not find any instructions on how to do that in a fork. All the instructions I can find  are how to compile React native android from source.\nWould really appreciate your help as this is blocking me from using many third party libraries in Android.. Thanks @chirag04 for the quick response. I tried the command and was able to generate the jar files. I created a new branch in my fork with these jar files checked in and updated my package.json to point to my new file. After \"npm install\", I still get the \"Unable to locate the symbol\" errors. I looked at the publish-npm.js and I did not see any additional steps except npm publish. Do I have to do a npm publish against my fork? I am not sure how that would work. \nthis is the commit I did to my react-native fork https://github.com/shrutic/react-native/commit/b4b09493d4558a6aae2169253d7d490021a849f4 \n\n. @chirag04 I was indeed building from the source in my project where I was using my fork of react-native. \nI updated my project to no longer build react-native from source. I also made sure that the react-native installed in node_modules is indeed from my fork ( my iOS version of project does not compile if the code isnt from my fork). But I still get the errors I showed in my earlier message. \nShould I make sure that that generated android archive files are also downloaded correctly? Where would they be present in the node_modules?. I could not find the android directory under react-native in node_modules. The relevant path that I did find is ... node_modules/react-native/ReactAndroid/src/main/java/com/facebook/react. But I did not find the react-native directory under it where all the generated archives seemed to get placed when I created the PR https://github.com/shrutic/react-native/commit/b4b09493d4558a6aae2169253d7d490021a849f4. Does this mean the fork was not correctly downloaded?\nI made sure I had the line you specified in my build.gradle.. :(  As I mentioned before, I dont get this problem if I point to the facebook's react-native version directly. It happens only when I switch to my fork. I will try to create a new project with my specific third party libraries against my fork and see if that gives any insights.\nI had one more question. How come all the archives you generated had a version of 10000 while mine has 0.43.3 ( the react-native version that I made a fork of )?. I do not have the directory android in my node_modules/react-native. \nThis is how I reference my forked branch in my package.json\n\"react-native\": \"git://github.com/shrutic/react-native.git#AndroidWorkingTrial\",\n\nAm I missing something? Maybe this mode of referencing forks does not download everything?\n\nUPDATE:\nTurns out the issue was the package-lock.json that was instroduced in npm 5. I deleted my existing lock file and regenerated it. That downloaded the files as expected. And now my project is also compiling fine.. Thanks a ton for your help @chirag04 . ",
    "bendellarocco": "I am seeing this on \"react-native-code-push\": \"^1.15.1-beta\" using react 25\n. I also tried the above steps and had the same results.  I installed using rnpm link as well as the manual process\n. @silhouettes \"react-native\": \"^0.25.1\".  I am not using Cocao Pods for this package.  I am used rnpm link.  And I also tried installing using the manual process.  When I switched to v1.14.6-beta I no longer had this issue.\n. Code Push Options - \nvar codePushOptions = { checkFrequency: codePush.CheckFrequency.ON_APP_RESUME, installMode: codePush.InstallMode.ON_NEXT_RESUME, rollbackTimeout: 10000, }\n. Using your example I was able to solve the issue.  Thank you!\n. ",
    "dcvz": "I'm also experiencing this issue. Is there a temporary workaround?. ",
    "mikberg": "To anyone this might benefit: I could not get this to work using cocoapods. I fixed it by installing codepush manually for iOS.\nI might have an odd configuration, I don't know.. ",
    "IrvingAxelB": "I am also running into this error using \"react-native-code-push\": \"^1.16.1-beta\" and \"react-native\": \"0.35.0\" . ",
    "rafaelcorreiapoli": "I'm still facing this issue\n\"react-native\": \"0.50.4\",\n\"react-native-code-push\": \"^5.2.1\",. This is our current use case as well. Any updates on this ?. ",
    "ssouthpaw": "i add it\npod 'Firebase/Core'\n  pod 'Firebase/Messaging'\n  pod 'RNFirebase', :path => '../node_modules/react-native-firebase'\n  pod \"yoga\", :path => \"../node_modules/react-native/ReactCommon/yoga\"\n  pod 'React', :path => '../node_modules/react-native', :subspecs => [\n  'BatchedBridge', # Required For React Native 0.45.0+\n  'Core',\n]\ni'm using \n\"react-native\": \"0.51.1\",\n\"react-native-code-push\": \"^5.3.3\",. ",
    "zhangjunhou": "physical device\n. ",
    "pvsong": "Same problem!. Same problem with my RN apps and Cordova apps.. codePush work when install app from x-code to iphone. or run on simulator.\nWhen upload app to testflight or release, codePush not work.\n. ",
    "chenpengjun": "i find The directory does not match\nreact-native-code-push/android/codepush.gradle \nbefore file(\"$buildDir/intermediates/res/merged/${targetPath}\")\nupdate file(\"$buildDir/intermediates/res/${targetPath}\"). ",
    "lubegamark": "@sergey-akhalkov I am using gradle 1.2.3\nThanks. ",
    "xMikeTx": "For us the same issue appears with gradle plugin 2.3.2\nProject structure\n-project-folder\n  -- app\n  -- node_modules\nand i got the same behavior as sergey-alkhalkov described with the wrong path.\n. Hi @sergey-akhalkov , thank you for the quick reply.\nI feared, that would be the case :(\nThank you for your help.. ",
    "zijing07": "I have figured this out. The gradle task packageReleaseResources must be run before recordFilesBeforeBundleCommand, then the folder /build/intermediates/bundles/release/res will be generated.\nSo making the recordFilesBeforeBundleCommand depend on packageReleaseResources can get this issue solved.. @waltermvp @sergey-akhalkov  sorry to reply so late, here is my build.sh.\nshell\necho start build android aars\n./gradlew clean\n./gradlew packageReleaseResources\n./gradlew assembleRelease\nEvery time I build an aar, I have to run packageReleaseResources task first, otherwise, the folder /build/intermediates/bundles/release/res will not be generated, which will cause the failure of recordFilesBeforeBundleCommand.\nI currently have no idea this is a bug of codepush or I am using the codepush build in a wrong way. But the workaround works for me.. ",
    "waltermvp": "@zijing07 how/ where do you change these configs?. Same here with RN version .44. ",
    "yimingtang": "The same.\nI'd like to say the link command is so buggy that I have to integrate Code Push myself manually again. I should have done it manually from the beginning if I had realized that your script was broken \ud83d\ude22 \n. Is there any update on this issue?. ",
    "gouravsood": "@fanyuRN was there any resolution identified for this issue? @thiagoterleski and myself both had the same issue and were referred to this issue.\nCan you please suggest and help here?. ",
    "Swordsman-Inaction": "@silhouettes normally it should work, I've tested it on several devices too, it only fails on Samsung S5, just a edge case.\n. ",
    "mkonicek": "Sent a RFC pull request: https://github.com/Microsoft/react-native-code-push/pull/589\n. Thanks for merging @silhouettes!\nWe started using npm to distribute the Android artifacts of React Native in version 0.21 in Feb 2017. The last version published via Maven Central (and mirrored to JCenter) is 0.20:\n- https://bintray.com/bintray/jcenter/com.facebook.react:react-native/view\n- https://mvnrepository.com/artifact/com.facebook.react/react-native\n. ",
    "ljhender": "Digging into this, it looks like CodePush thinks we are running an older version of RN even though we are on 35. \nAdding some logging into CodePushNativeModule, its throwing an exception trying to find a method createFileLoader, shown here \nE/CodePushTest(11058): exception figuring out which RN version.\nE/CodePushTest(11058): java.lang.NoSuchMethodException: Could not find a recognized 'createFileLoader' method\nE/CodePushTest(11058):  at com.microsoft.codepush.react.CodePushNativeModule.setJSBundle(CodePushNativeModule.java:121)\nE/CodePushTest(11058):  at com.microsoft.codepush.react.CodePushNativeModule.loadBundle(CodePushNativeModule.java:164)\nE/CodePushTest(11058):  at com.microsoft.codepush.react.CodePushNativeModule.access$1100(CodePushNativeModule.java:37)\nE/CodePushTest(11058):  at com.microsoft.codepush.react.CodePushNativeModule$6$1.onHostResume(CodePushNativeModule.java:468)\nThen since this is throwing an exception it thinks we are running a RN version < 31 shown here:\nV/CodePushTest(11058): RN < v0.31\nE/CodePushTest(11058): exception doing other stuff.\nE/CodePushTest(11058): java.lang.NoSuchFieldException: mJSBundleFile\nE/CodePushTest(11058):  at java.lang.Class.getDeclaredField(Class.java:546)\nE/CodePushTest(11058):  at com.microsoft.codepush.react.CodePushNativeModule.setJSBundle(CodePushNativeModule.java:145)\nE/CodePushTest(11058):  at com.microsoft.codepush.react.CodePushNativeModule.loadBundle(CodePushNativeModule.java:164)\nLooping continually trying to load the bundle the 'new' way, then falling back to the legacy way, which throws an exception since those methods don't exist since we are on RN 35. Will update as I figure out what is going on in case someone else runs into this issue.\n. @silhouettes Sounds great, appreciate the work you guys are doing. I'll update and try again when its released.\n. @silhouettes Thanks for the update, everything looking good from our end!\n. ",
    "cherniv": "Hey, can you please show your MainApplication.java file to help me show this: https://github.com/Microsoft/react-native-code-push/issues/872\n. Hi @sergey-akhalkov , i'm trying to implement more advanced case, based on this: https://github.com/Microsoft/react-native-code-push/blob/master/docs/setup-android.md#background-react-instances . My React Native version is 0.44, this is relevant to the \"For React Native >= v0.29\" part.. Ok i think i solved the syntax issue like this:\n```\npublic class MainApplication extends Application implements ReactApplication {\npublic class MyReactNativeHost extends ReactNativeHost implements ReactInstanceHolder {\nMyReactNativeHost(Application application) {\n        super(application);\n    }\n\n@Override\nprotected String getJSBundleFile() {\n  return CodePush.getJSBundleFile();\n}\n\n@Override\npublic boolean getUseDeveloperSupport() {\n  return BuildConfig.DEBUG;\n}\n\n@Override\nprotected List<ReactPackage> getPackages() {\n  return Arrays.<ReactPackage>asList(\n    new MainReactPackage(),\n    new ReactNativePushNotificationPackage(),\n    new ReactNativeAudioStreamingPackage(),\n    new CodePush(BuildConfig.CODEPUSH_KEY, MainApplication.this, BuildConfig.DEBUG)\n  );\n}\n\n}\nprivate final MyReactNativeHost mReactNativeHost = new MyReactNativeHost(this);\n@Override\n  public void onCreate() {\n     CodePush.setReactInstanceHolder(mReactNativeHost);\n     super.onCreate();\n  }\n@Override\n  public ReactNativeHost getReactNativeHost() {\n      return mReactNativeHost;\n  }\n}\n```\nBut it is still crashing when the app is in background and it is opened from a push notification.. Hi @sergey-akhalkov  , i figured out that code-push is not a reason for crash, but another third-party plugin . Sorry for bothering!\nP.S. Link to their issue: https://github.com/tlenclos/react-native-audio-streaming/issues/101. ",
    "johnwook": "Although it's not official, I know there is a code-push-server\n. ",
    "geldarhb": "Finally worked after installing the newest version of CP CLI, logging out and then logging in.\n. ",
    "mankins": "What was this caused by, @sopaco ? . @lengocgiang Mine was caused by a babelrc problem. I was using a plugin to remove console.log statements. When I removed it / reverted to the standard .babelrc it worked.. ",
    "lengocgiang": "@sopaco : I also had this problem. How to fix it?. ",
    "devhyunjae": "never mind, i added in the test path :(\n. ",
    "adeelraza": "@devhyunjae I'm getting this error. How did you resolve it?. ",
    "caoyang819": "Sorry, I have already upgrade react native's version(now react native is using 0.39.2).  And it's ok now!\nThank you very much!. ",
    "artdent": "On a side note, the Android script didn't work either for a variety of reasons:\n- my app is in the root directory, not the \"android\" subdirectory\n- my app/build.gradle uses single quotes, breaking the regex that looks for 'apply from: [...]react.gradle'\n- my ReactNativeHost is in its own file, not within the ReactApp class.\nBut, honestly, the manual integration is super easy (edit three files in the standard manner), so I imagine it's probably not worth making the postlink script handle anything more complicated than what's generated by react-native init.\n. ",
    "yangjinsong": "I have also encountered this problem\uff0c how to Solve the problem. ",
    "cooperka": "Even easier, I uninstalled the app and reinstalled it, and that works. That's definitely easier than publishing a new update!\nIt would still be nice if there were a way to disable rollbacks, at least on Staging, but this workaround is fine for now. Thanks for the suggestion @silhouettes.\n. @tlcheah2 correct, to install the same exact version that was automatically rolled back, you need to either clear the app's data (so it forgets it rolled back the update) or just push a new version.. Hi @max-mironov, as mentioned in the original description I have tried both of those solutions already. Here's my code:\n```objc\n  NSURL *jsCodeLocation;\nifdef DEBUG\njsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index.ios\" fallbackResource:nil];\nelse\njsCodeLocation = [CodePush bundleURL];\nendif\nRCTRootView *rootView = [[RCTRootView alloc] initWithBundleURL:jsCodeLocation\n                                                      moduleName:@\"MyApp\"\n                                               initialProperties:nil\n                                                   launchOptions:launchOptions];\n```\nIt works in Debug, but not in Release.. It turns out this was a false-positive error message from CodePush; there was an error in the transpiled bundle.js that caused React Native to fail to load the source code, causing [self binaryBundleURL] to be false.\nMaybe the debug message could be made more clear, or only output in Debug builds? I'd be happy to make a PR if you have a preference.. Thanks for the reminder, @max-mironov. I haven't quite gotten around to this yet, but I was thinking of just disabling the error message for Release builds since the message doesn't apply (in fact suggestion #3 is to use a release build). I think it's a pretty rare problem though (only occurs if you have a syntax error in the transpiled code), so I haven't really prioritized the fix \ud83d\ude3f . @max-mironov so far as I can tell, there's actually nothing in that commit that \"officially recommends\" removing the entire method from external libraries. The recommendation is\n\nTo upgrade, remove all overrides of createJSModules\n\nBy removing the @Override annotation, that successfully resolves the error in a backwards compatible manner. It's not a hack, just good practice. Then people using older versions of React Native for whatever reason will still be able to receive updates to this library.\nHere's a clean example of how to do it while preserving backwards-compatibility: https://github.com/rebeccahughes/react-native-device-info/pull/191/files\nI understand that people on react-native-code-push@4.x won't be affected by this in the short-term, but in the long-term they will not be able to receive new features and bug fixes unless you manually release duplicate fixes to the older branch. It's more work for everyone.. Thanks for the reply @sergey-akhalkov, I think that sounds good! Cheers :beers: . Closing for now, thanks!. Thanks for the update @max-mironov! Fyi the RN PR was modified to change the name of the flag, so I will modify the text here before we merge. It'll be a few hours before I can get to it.. @max-mironov done!. ",
    "tlcheah2": "@silhouettes \nIs that means if rollback happened, there would be no way for the user that was roll backed to reinstall the update through codePush ? \nRather, the user would need to uninstall the whole application and reinstall it as fresh app or wait till the new codePush update available.\n. ",
    "kiranruth": "@silhouettes i'm using npm 3.10.9 and node 7.1.0. Yes i ran this from the root of my project which has a package.json\nI've tried the clearing npm cache using npm cache clear , that was suggested in the npm repository issue but that did not work. \n-Thanks\n. ",
    "edem": "I got the same error ...... D:\\??????>npm install\nnpm WARN tar zlib error: unexpected end of file\nnpm ERR! cb() never called!\nnpm ERR! This is an error with npm itself. Please report this error at:\nnpm ERR!     https://github.com/npm/npm/issues\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     C:\\Users\\asus\\AppData\\Roaming\\npm-cache_logs\\2018-05-31T07_25_15_835Z-debug.log. ",
    "kkgelu": "Okay, I need to re-login again. Hope we get a better error message in future.\n. ",
    "faceyspacey": "that's amazing. thanks so much. Great work with the code push stuff by the way. really good stuff.\n. @silhouettes I have 2 quick questions for you:\n1) what about new releases on the app store that already has the latest version--is there a way to mark the version it has so it doesn't install a mandatory version it already has, which, for me at least, causes a hiccup in my app as it installs it? Also note: the targetBinaryVersion parameter doesn't apply in this case as the app store update is only so new users have the latest javascript code the first time they open the app and no new binary code has changed. I don't want these users having their app restarted because of an inherited mandatory release (or even if the latest release is mandatory) since they already have it.\n2) what if you want to add/remove the mandatory setting on an older release? The patch command only seems to let you patch the latest release. It doesn't have documented a targetRelease parameter like the rollback command. The use case would be the following: \nI want to release a non-mandatory major release and possibly have additional small releases after it, and then at a later point mark that older major release mandatory; the reason I would do this is to avoid the app hiccups on install for the largest # of users. \nMaybe there is something I don't know, but the mandatory release is a very bad last resort in my case as for users who have yet to signup we continue to show an intro animation at the beginning. If you're returning to the app after a mandatory release has been made, it gets about a second through the intro animation and then the app restarts and it plays again. It's jarring and not the smooth user experience we're aiming for. I imagine if you don't have an intro animation it's not as bad, but my guess is that it's an unavoidable consequence everyone will have with a mandatory release, even if just for a split second (more like 1 or 2 seconds though). So that's why the above capability to later mark an old release as mandatory is a nice solution--it lets you limit the percentage of you're users that will experience that glitch. In addition, being able to unflag an older release as mandatory would let you fix any mistakes where an older release than the latest one shouldn't have been made mandatory, as was the case with me in the initial issue here.\n. Hey @silhouettes thanks so much. I wasn't sure whether --label just let you change the label or whether it was a selector. I also think your dis/allowRestart() methods should be sufficient. Regarding #1, I'm not sure--i thought I had pushed the update--but I'll keep a look out and report back if I find any issues. Again, thanks so much!\n. ",
    "aqnaruto": "sorry i am fogot to rebuild it \n. close\n. sorry i am fogot to rebuild android ,it is a basic opretion.  thank your excellent work @silhouettes \n. ",
    "tobiaskiel": "Installed the relese apk on the emulator now the logfile looks a bit different and the app crashes after update being installed and app restarted \n11-16 20:08:43.787  3391  3391 D ReactNative: [CodePush] Loading JS bundle from \"assets://index.android.bundle\"\n11-16 20:08:44.990  3391  3408 I ReactNativeJS: Running application \"DTS\" with appParams: {\"initialProps\":{},\"rootTag\":1}. DEV === false, development-level warning are OFF, performance optimizations are ON\n11-16 20:08:45.564  3391  3408 I ReactNativeJS: [CodePush] Checking for update.\n11-16 20:08:45.567  3391  3408 I ReactNativeJS: [CodePush] Reporting binary update (2.0.2)\n11-16 20:08:47.389  3391  3408 I ReactNativeJS: [CodePush] Awaiting user action.\n11-16 20:08:50.653  3391  3408 I ReactNativeJS: [CodePush] Downloading package.\n11-16 20:08:51.829  3391  3408 I ReactNativeJS: [CodePush] Installing update.\n11-16 20:08:51.868  3391  3391 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.ericsson.dts/files/CodePush/97025bd727fede3db3cdbefbea41cee5315cd77d463ac9cd6e467315dc45614e/CodePush/index.android.bundle\"\n11-16 20:08:51.872  3391  3409 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.ericsson.dts/files/CodePush/97025bd727fede3db3cdbefbea41cee5315cd77d463ac9cd6e467315dc45614e/CodePush/index.android.bundle\"\n11-16 20:08:51.872  3391  3408 I ReactNativeJS: [CodePush] Restarting app\n11-16 20:08:51.953  3391  3391 D ReactNative: [CodePush] Update did not finish loading the last time, rolling back to a previous version.\n--------- beginning of crash\n11-16 20:09:11.213  3449  3449 D ReactNative: [CodePush] Loading JS bundle from \"assets://index.android.bundle\"\n11-16 20:09:12.108  3449  3466 I ReactNativeJS: Running application \"DTS\" with appParams: {\"initialProps\":{},\"rootTag\":1}. DEV === false, development-level warning are OFF, performance optimizations are ON\n11-16 20:09:12.341  3449  3466 I ReactNativeJS: [CodePush] Checking for update.\n11-16 20:09:13.430  3449  3466 I ReactNativeJS: [CodePush] An update is available, but it is being ignored due to having been previously rolled back.\n11-16 20:09:13.430  3449  3466 I ReactNativeJS: [CodePush] App is up to date.\n11-16 20:10:01.053  3491  3491 D ReactNative: [CodePush] Loading JS bundle from \"assets://index.android.bundle\"\n. Thank you for a very quick response. I will try your suggestion//changes first thing tomorrow!\n. Hi @silhouettes ! I can confirm that updating to react-native-code-push@1.16.0-beta for react-native@0.36.0  did solve my problem! \n11-17 07:04:29.350  3586  3615 I ReactNativeJS: [CodePush] Checking for update.\n11-17 07:04:29.353  3586  3615 I ReactNativeJS: [CodePush] Reporting binary update (2.0.2)\n11-17 07:04:30.557  3586  3615 I ReactNativeJS: [CodePush] Awaiting user action.\n11-17 07:04:32.928  3586  3615 I ReactNativeJS: [CodePush] Downloading package.\n11-17 07:04:33.874  3586  3615 I ReactNativeJS: [CodePush] Installing update.\n11-17 07:04:33.943  3586  3616 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.ericsson.dts/files/CodePush/8a163b53f4694818a8cc724310cb06dece37c06cd0c8986614c74fea725a1f31/CodePush/index.android.bundle\"\n11-17 07:04:33.947  3586  3615 I ReactNativeJS: [CodePush] Restarting app\n11-17 07:04:34.580  3586  3638 I ReactNativeJS: Running application \"DTS\" with appParams: {\"initialProps\":{},\"rootTag\":1}. DEV === true, development-level warning are ON, performance optimizations are OFF\n11-17 07:04:34.760  3586  3638 I ReactNativeJS: [CodePush] Checking for update.\n11-17 07:04:34.764  3586  3638 I ReactNativeJS: [CodePush] Reporting CodePush update success (v25)\n11-17 07:04:35.088  3586  3638 I ReactNativeJS: [CodePush] App is up to date.\n. ",
    "nordfogel": "@matrosov-nikita: thanks for your workaround which is still necessary even a year after your suggestion. this issue is still valid and its initial PR pointed out from @chetstone led to a corresponding PR which has been closed misleadingly without merge. At least it has gotten some attention since last week. Unfortunately it seems like a new issue needs to be filed..\na short addition \n-d instead of -s <DEVICE_ID>\ncan be used if there is only one device connected via usb. e.g.\n$ cd android && ./gradlew installAlphaRelease && adb -d shell am start -n <PACKAGE_ID>.alpha/<PACKAGE_ID>.MainActivity\nwhile Alpha is a build flavour. ",
    "xanderberkein": "You can run your app with the appIdSuffix param\nreact-native run-android --appIdSuffix \"debug\"\nYou can find all the available params here: https://github.com/facebook/react-native/blob/master/local-cli/runAndroid/runAndroid.js#L301\nSource: https://stackoverflow.com/a/48340408/5791025. ",
    "johanforssell": "I'm writing new versions of old apps, and thus I have inherited old app id's.\nMy code have the package com.common.package (in source files and AndroidManifest.xml).\nMy build.gradle contains\n```\n    buildTypes {\n        debug {\n        }\n        release {\n            minifyEnabled enableProguardInReleaseBuilds\n            proguardFiles getDefaultProguardFile(\"proguard-android.txt\"), \"proguard-rules.pro\"\n        }\n    }\nflavorDimensions \"appName\"\nproductFlavors {\n    appAAA {\n        dimension \"appName\"\n        applicationId \"com.AAA.app\"\n        versionCode 100\n        versionName \"3.0.0\"\n    }\n    appBBB {\n        dimension \"appName\"\n        applicationId \"com.BBB.app\"\n        versionCode 100\n        versionName '3.0.0'\n    }\n}\n\n```\nFirst the app can be installed with gradlew\ncd android && ./gradlew installAppBBBDebug\nThe I can start it manually with \nadb -s emulator-5554 shell am start -n com.BBB.app/com.common.package.MainActivity\nThis is a bloody hassle. I would rather not have to mess with it like this.. ",
    "rafaelmaeuer": "This is still an issue using android debug with launch.json in vscode. Is there no fix yet or planned?\nAs @matrosov-nikita mentioned, react-native is ignoring applicationIdSuffix property from build.gradle.. ",
    "yellowChao": "+1 please help me\uff0cgive me a hand. @sergey-akhalkov I tried configure CodePush by this way\n[CodePush bundleURLForResource:@\"main\" withExtension:@\"jsbundle\" subdirectory:@\"Frameworks/User.framework/User.bundle\"];\nit requires 3 args and not flexible, can you add a method like this:\n[CodePush specifyBundleResource:@\"Frameworks/User.framework/User.bundle/main.jsbundle\" ]\nso we can use it simpler.\n\u263a\ufe0f. when i read the source code (iOS),  code push update a new jsbundle file\uff0cjust save a same file path\uff0cbut i load another jsbundle , code push think this jsbundle already update, just load last time update jsbundel file\u3002so yours can add logic to splite. 3q. ",
    "JuanbingTeam": "Does anybody test on iOS devices? ..... Same issue found on iOS.\nBut, creating new code push app using cmd line solved the problem. \nNow, everything works well both on android and iOS.\nCheeeeeers!!. @silhouettes , \nNo, no release between the version originally running on the device and the latest version.\nIt seems that the problem was caused by releasing iOS code to Android app ( - -! ).\nEverything works well after deleting the old app, and creating a new one.....\n. @panarasi  Sorry for the late late late response...\nIn short, I have multiple modules in my app. I 'd like to generate one bundle file for each module.\nFor example:  module1.android.bundle, module2.android.bundle, module3.android.bundle...\nNow, in my res folder , I have multiple .bundle and .meta files but only one CodePushHash file.\nmodule1.android.bundle\nmodule1.android.bundle.meta\nmodule2.android.bundle\nmodule2.android.bundle.meta\nmodule3.android.bundle\nmodule3.android.bundle.meta\n...\nCodePushHash (CodePushHash.json for old version)\nSo, My conclusion is CodePush can ONLY manage one JS bundle...\nUnless adding a new API  to config hash file for each bundle.... My project is a huge project. There are several RN entrances. \nEach entrance can config its own ReackPackages (CodePush).. Hi @max-mironov \n653 same issue here.\nIn my project, I can use CodePush to handle multiple bundles. \nEach RN entrance can config its own code push [code push app Id, bundle file name].\nBut the CodePushHash file is the real problem....Whole project can only have one CodePushHash file(Multiple res files with same name will only keep one).\nIf I can config the hash file for each code push package, I think it will work.....\n. ",
    "skeie": "Aha, sorry! Thanks \ud83d\udc4d . ",
    "Milkdog": "I tried hacking things to much. Eventually I got to the root of my problem, and it was that I need to use DebugBundle/ReleaseBundle to use code-push. And even more importantly, I need to build a bundle file before building the app using the commands in ReactAssests/index.windows.bundle. ",
    "thecachedbyte": "Any update on this? It will be awesome if we can achieve text-based diff patching. Downloading jsbundle of 1 or 2 mb on 2g or 3g network in country like India is a costly affair.. Changing AppName to Username/AppName is not working for me.\nNote: I am a collaborator not an owner.. Its happening for new CLI also.. appcenter version 1.0.3.. erroe is same \"app doesn't exist\" https://github.com/Microsoft/appcenter-cli/issues/324. \n. Hi @alexandergoncharov \nSharing crash message instance against one deployment name where we did only one OTA release till now.\nReceived 3006028 bytes, expected 3012378 - 284 instance\nReceived 2997836 bytes, expected 3012378 - 272 instance\nReceived 2999686 bytes, expected 3012378 - 20 instance\nReceived 3008306 bytes, expected 3012378 - 19 instance\nReceived 2999884 bytes, expected 3012378 - 16 instance\nReceived 2998272 bytes, expected 3012378 - 15 instance\nReceived 3004234 bytes, expected 3012378 - 13 instance\nReceived 3010674 bytes, expected 3012378 - 11 instance\nReceived 2996938 bytes, expected 3012378 - 9 instance\nReceived 3010354 bytes, expected 3012378 - 7 instance\nLet me know if you need more information.. @alexandergoncharov We are using default config. Option 1\nUnable to reproduce locally. Its not happening for all our user base. Its happening for a very small set of user and there is no pattern.. @alexandergoncharov Yes we are still getting similar issue reported at crashlytics and newrelic. I will try to get some more logs if possible.\nIdeally even if there is a mismatch in data received vs expected it should not crash, rather it should re initiate fresh download. Please correct me if i am missing something.. @alexandergoncharov Error trace from sentry\ncom.microsoft.codepush.react.g: Received 3005194 bytes, expected 3012378\n    at com.microsoft.codepush.react.h.a(SourceFile:198)\n    at com.microsoft.codepush.react.CodePushNativeModule$3.a(SourceFile:210)\n    at com.microsoft.codepush.react.CodePushNativeModule$3.doInBackground(SourceFile:204)\n    at android.os.AsyncTask$2.call(AsyncTask.java:333)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)\n    at java.lang.Thread.run(Thread.java:764)\njava.lang.RuntimeException: An error occurred while executing doInBackground()\n    at android.os.AsyncTask$3.done(AsyncTask.java:353)\n    at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:383)\n    at java.util.concurrent.FutureTask.setException(FutureTask.java:252)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:271)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)\n    at java.lang.Thread.run(Thread.java:764). @NickToropov Its only happening with Samsung devices. No other common pattern.. @alexandergoncharov only a few of these devices are getting impacted. But it is happening every time for them. One of our user is facing this issue in every session. As soon as he opens our app after sometimes it is getting crashed.. @alexandergoncharov Do we have any update on this? more than 25% of our app crashes are because of this issue. :( Are we anywhere close to the root cause?\nJust wondering if we are the only one facing this issue? is there something wrong in our integration (it is a hybrid app, not a react native only app)?\nAttaching stack trace, if it helps.\nGoibiboAndroid-crashreport-09-26-2018_1517+0530.txt\n. We create a new deployment name whenever there is a contract change between react native and native team. One thing I noticed app team uses codepush cli to create new deployment name and react native team uses appcenter cli to do a codepush release.\nIts highly unlikely but can that cause any issue?. @chandrapal-yadav @vivek-walecha-657 Please provide information how we have integrated codepush and about our hybrid architecture.\n@alexandergoncharov - Will it be possible for you to catch this error and prevent the app from crashing. Or will it be possible for us to catch this error, please suggest?. @NickToropov Thanks for the update. Is it possible for you to share the sample app you worked on? Meanwhile, I will gather more information and reply.. ",
    "karthikmit": "I second @thecachedbyte, as it is a very important requirement for lite apps designed for low bandwidth constraints.. ",
    "zjx": "agree with @thecachedbyte, using google-diff-match-patch will significantly reduce the potential expensive costs may charge to end users.. ",
    "joshyg": "I am seeing the same thing after upgrading react native from 0.25.1 to 0.38.0:\n*** Terminating app due to uncaught exception 'RCTFatalException: The specified JS bundle file wasn't found within the app's binary. Is \"main.jsbundle\" the correct file name?', reason: 'The specified JS bundle file wasn't found within the app's binary. Is \"main...'. ",
    "gorangajic": "I have figured out my problem, dependencies were installed using npm@2 and after installing npm@3 and reinstalling dependencies again everything was fine.\n@joshyg I will close this issue, if you want to stay open I will reopen. ",
    "adbl": "Seeing this same problem on first run with Code Push support, release build on development device, there is no update pushed yet.\n2017-01-12 14:16:27.942 [fatal][tid:main] The specified JS bundle file wasn't found within the app's binary. Is \"main.jsbundle\" the correct file name?\n2017-01-12 14:16:27.943646 ShimClient[2036:685353] The specified JS bundle file wasn't found within the app's binary. Is \"main.jsbundle\" the correct file name?\n2017-01-12 14:16:27.944034 ShimClient[2036:685353] *** Terminating app due to uncaught exception 'RCTFatalException: The specified JS bundle file wasn't found within the app's binary. Is \"main.jsbundle\" the correct file name?', reason: 'The specified JS bundle file wasn't found within the app's binary. Is \"main...'. Ignore that, the packager failed to build, but didn't stop xcode build \ud83d\ude28. I don't know if it should be changed either, but it did cause confusion for me at least. From that perspective it would be nicer if CodePush could detect that the bundle isn't actually RUNNING (which is the default query to getMetaData), because it is in fact not running.\nIf you don't think it should change then I can workaround this by either checking the source url as you suggest and match against localhost or I can simply just check for __DEV__. But I prefer to now have to think about __DEV__ nor js code location. I also want the option to use codePush in a development built at a later time for certain kinds of testing and not have to think about any code that make assumptions about __DEV__ + codePush.\nMaybe then, codePush could export a new function which let's me know whether React is running code loaded by it?. Actually, given the documentation for getUpdateMetadata:\n\nThe updateState parameter is set to UpdateState.RUNNING, but the app isn't currently running a CodePush update. There may be a pending update, but the app hasn't been restarted yet in order to make it active.\n\nThis update could be described as UpdateState.PENDING, but that might also be confusing, since codePush cannot know if it will be loaded next time either. Maybe there could be an UpdateState.INSTALLED or UpdateState.INACTIVE with documentation describing the possible reasons for this update that is installed but still not running?  . Nice @sergey-akhalkov!\nMaybe we should also add a bit of documentation to getUpdateMetadata to describe the scenario I initially described which had me confused...?. This probably https://github.com/facebook/react-native/issues/16689. I would like to add that we typically see a couple of rollbacks on each update that reaches Production. We have extensive logging (also crash reporting) elsewhere and in those cases I looked into I have never found any related log/crash in our other tools. \nWe log stuff immediately when the JS code has loaded and starts executing. When a device upgraded from version A -> B but got rolled back, we had zero JS log entries at version B (for this device). Thus I assume something went wrong internally within codepush, since 99% of devices made this upgrade.. Hi Sergey!\nYes, that\u2019s one of the issues that I believe is related to this. I cannot\nbe completely sure that this is caused by code push, but I know that code\npush does things with the sandbox file system so it\u2019s my suspicion. These\nissues only happen sporadically and in production so I can\u2019t easily confirm\nthat it\u2019s working without Code Push.\nI\u2019ll think about if we can make an internal release without code push but\neverything else the same. If we do that and find that it\u2019s working\nproperly, no random restarts, will you then look into how Data Protection\ncould be causing issues with code push?\nOn Fri, 22 Dec 2017 at 12:51, Sergey Akhalkov notifications@github.com\nwrote:\n\nHi @adbl https://github.com/adbl, thanks for your request and sorry for\nthe late reply.\nCould you please clarify - do I get it right that your app restarts when\nbecoming active even if CodePush does not install any update? If so, could\nyou please confirm/make sure if iOS Data Protection properly works for\nregular React Native app that does not use CodePush at all?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/1109#issuecomment-353583531,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAK22AlGplfaxScb0Bgs2IOFN50IGyPzks5tC5fBgaJpZM4RGrPM\n.\n. I notice this for resizeMode: \"stretch\" too. We are using stretch together with capInsets for some shadow assets (on semi transparent views) and it makes the shadow look completely wrong. . Aha, actually I see now that resizeMode: \"stretch\" is respected but it seems like the capInsets are just gone (which makes the shadow look wrong). Maybe a separate issue.. Hello, the case I mentioned above: yes!\nOn Mon, 26 Mar 2018 at 23:02, Zakeel M. notifications@github.com wrote:\nHey there!\nWe haven't forgotten about this issue. We have been doing some internal\nchanges on the way we're executing github support. Are you still having\nthis problem?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/1222#issuecomment-376310545,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAK22O5xkrsM_c4RwbZgzo4B7BIb_8qWks5tiVdjgaJpZM4SYeGg\n.\n. @iTOYS Thanks for the reply. In the case I described above (using a drop shadow image), we use absolute position and unset the width/height like this:\nshadow: {\n    position: \"absolute\",\n    top: -18,\n    left: -20,\n    bottom: -22,\n    right: -20,\n    width: undefined,\n    height: undefined,\n  },\n\nwith capInsets:\n{\n  top: 22,\n  left: 24,\n  bottom: 26,\n  right: 24,\n}\nThis is probably relevant to the issue, especially unsetting width/height, I should have mentioned it before.. ",
    "iSimar": "The specified JS bundle file wasn't found within the app's binary. Is \"main.jsbundle\" the correct file name?\nlibc++abi.dylib: terminating with uncaught exception of type NSException\nGetting this error after trying to build for external device. Scheme is set to release.. ",
    "mmoutenot": "@sergey-akhalkov I am running into the same problem, perhaps I can shed some light:\n```\nifdef DEBUG\njsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index.ios\" fallbackResource:nil];\n\nelse\njsCodeLocation = [CodePush bundleURL];\n\nendif\nRCTRootView *rootView = [[RCTRootView alloc] initWithBundleURL:jsCodeLocation\n                                                      moduleName:@\"AppName\"\n                                               initialProperties:nil\n                                                   launchOptions:launchOptions];\n```\nThe CodePushDeploymentKey is definitely in my Info.plist. I have CodePush functioning properly in another project, but I'm still having trouble diffing to figure out what is going wrong.\nI have released to Staging twice, and promoted to Production once:\n\nThe moduleName is the exact same as my AppRegistry's registered component.. @sergey-akhalkov that is correct. When I try to run a Release build on my physical device (and therefore retrieve the bundle from codepush) that is the error I get.\nThe command I use to release is code-push release-react HerpAtlasReporter ios\nMy version of react-native is 0.40.0, of react-native-code-push is 1.17.0-beta.\nSteps:\n1. I created a react native app.\n2. I added and linked react native code push\n3. I created a new app for code push, adding the distribution keys to the info.plist, and the code to check for updates in my react app\n4. I change my scheme to Release and run. It fails to run on a physical device with the above error message.\nI am sure it's something stupid I've misplaced or mistaken, as I have another app working with codepush...\nThanks for your help.\n. It may have been a problem with my node version? By changing the Run script build phase:\n-                       shellScript = \"export NODE_BINARY=node\\n../node_modules/react-native/packager/react-native-xcode.sh\";\n+                       shellScript = \"nvm use\\nexport NODE_BINARY=$(which node)\\n../node_modules/react-native/packager/react-native-xcode.sh\";\nThe app now properly runs in Release. I think the problem was that the build was succeeding, but built with an incorrect node version it was unsupported? Huh, cool!. ",
    "pousT": "Neither solution mentioned above worked for me.\nFor me, this problem is solved by changing file line in: [your_project]/ios/[your_project]/AppDelegate.m:\nfrom\njsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index\" fallbackResource:nil];\nto\n  jsCodeLocation =\n    [NSURL URLWithString:@\"http://127.0.0.1:8081/index.bundle?platform=ios&dev=true\"];. ",
    "ptomasroos": "Thanks for the feedback!\n\nOn 9 Dec 2016, at 09:40, Nikita Matrosov notifications@github.com wrote:\nHi, @ptomasroos.\nIt is problem of react-native, it seems that it's expected behaviour and it also affects other plugins.\nHere are some discussions about this issue: facebook/react-native#10312, idehub/react-native-google-analytics-bridge#70, and a comment from one of react-native developers which sheds some light on this.\nBase on this, i think you could safely ignore this warning and your app will continue work as expected.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub, or mute the thread.\n. Blocking here as well since we're using master.. \n",
    "liheyuan": "@vladimir-kotikov \nPlease forgive me for my poor english, React Native was used as hybird mode in our app, which means some page is made up of Native(Objective C), and other made up of React Native.\ne.g.\nI have page A (Native) and B (React Native)\nWhen click button on A, B will be pushed to top of screen.\nThen it will start downloading bundle if have new on CodePush Server.\nBut before it is finished, user may cancel page B and return to page A.\nCurrently, the download and update or React Native bundle would not successfully because the exit of B.\nIt will redownload the bundle again when the user enter page B nexttime.\nI just wonder if there is any way we could made this situation possible, because it's very common for switch between native and rn page in hybird mode usage of react-native\ne.g. \n1) Made the download and upgrade successful even after React Native exit\n2) Provide an API at the native side that could download RN Bundle in background Thread.\nThank you.. ",
    "kevinTutu": "Thank you !  The CLI docs example is wrong, I found the answer in the command-parser file .Thanks !. I do as you tell me ,but I didn't get the effective information\uff0cjust print --  'undefined',like this:\n\nand I add the console.log in command-executor file,like this:\n\nI get the information like this:\n\n. yes\uff0cwe have use our code-push server \uff0c the reason is out server problem\uff0cso sorry\uff0cI have thought code-push-cli problem\uff0cbut is our problem\n\u539f\u59cb\u90ae\u4ef6\n\u53d1\u4ef6\u4eba:Vladimir Kotikovnotifications@github.com\n\u6536\u4ef6\u4eba:Microsoft/react-native-code-pushreact-native-code-push@noreply.github.com\n\u6284\u9001:kevinTutuwangzihang@xiaohongchun.com; Mentionmention@noreply.github.com\n\u53d1\u9001\u65f6\u95f4:2017\u5e741\u67085\u65e5(\u5468\u56db)\u200715:55\n\u4e3b\u9898:Re: [Microsoft/react-native-code-push] code-push [error] permissiondenied, mkdir '/Users' (#658)\n@kevinTutu, were you able to find the cause of this error?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub, or mute the thread.. um,it not fit me , the CodePushNativeModule.java is error, when 'import com.facebook.react.uimanager.ReactChoreographer' has a problem . oh..it's my fault,thanks a lot. ",
    "kiszadr": "Thank for your response. Described above behaviour occurs only once, after Xcode's restart I do not receive it again. I will test code push again tommorow, so I will message you when I will get this issue again with more informations (I will use code-push debug ios ).. ",
    "kuhbaar": "@vladimir-kotikov, thanks for the quick response.\nI'm using fetch multiple times for some async calls to a REST API:\nlet res = await fetch(url + uriquery + \"?format=\" + format +\"&limit=1\");\nand\nlet res = await fetch(url, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      \"amount\": amount,\n      \"payment_method_nonce\": nonce,\n    })\n  })\nI'm also importing (but not using yet) 'react-native-fetch-blob'. But i don't think that correlates in anyway.\nI can see both calls are somewhat similar to the error. Can I use CodePush without overwriting those methods? Thanks for your help!. @vladimir-kotikov \nI tried removing all the fetch calls and the react-native-fetch-blob package, but the error still persists.\nCan you tell me more on how I can check if the global fetch function has been overwritten?\nThanks. @vladimir-kotikov \nI will try it when I get home.\nBut is there any possibility of using both packages?\nThanks. @vladimir-kotikov\nOne thing I don't quite get: If you say my global fetch function is overwritten why does following code still work:\nlet res = await fetch(url, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      \"amount\": amount,\n      \"payment_method_nonce\": nonce,\n    })\n  })\nif the fetch function would have been overwritten, this wouldn't work?. @vladimir-kotikov\nVery interesting behavior: enabling remote debugging magically repairs the problem?\nAs soon as I activate remote debugging, I get the alert \"Update available\" from code push...\nin the release.apk the problem persists. After some restarts it seems to work consistently... Some serious xmas magic happening here.. ",
    "douglasjunior": "Hi, I'm using react-native 0.41.2, react-native-cli 2.0.1 with Android 6.0 (simulator) , and I'm having the same problem with fetch.\nInitially fetch works fine, but after press R+R to realod application, fetch dont works anymore with the message: undefined is not a function (evaluating 'fetch ...\nAny suggestions?. I get a solution. \nThe problem happens because the function that call fetch has been called inside a AsyncStorage promise. It must be some context problem.\nSo, I just changed my workflow and fetch works fine.. ",
    "Igor1201": "I've recently found that this error still happens when you have use_frameworks! declared on the Podfile of a Swift react-native app \n```diff\n NODE_MODULES = '../node_modules' \ntarget 'MyApp' do\n   pod 'Yoga', :path => \"#{NODE_MODULES}/react-native/ReactCommon/yoga\"\n   pod 'React', :path => \"#{NODE_MODULES}/react-native\", :subspecs => [\n         'Core',\n         'RCTText',\n         'RCTImage',\n         'RCTActionSheet',\n         'RCTAnimation',\n         'RCTNetwork',\n         'RCTWebSocket', # remove from here in the production binary\n         'RCTLinkingIOS'\n       ]\n\nuse_frameworks!\n   pod 'CodePush', :path => \"#{NODE_MODULES}/react-native-code-push\"  \n\ntarget 'MyAppUI' do\n     inherit! :search_paths\n   end\ntarget 'MyAppUITests' do\n     inherit! :search_paths\n use_frameworks!\n pod 'KIF', '~> 3.0', :configurations => ['Debug']\n\nend\n end\n```\nWithout this line, the app builds normally.. @sergey-akhalkov I'm sorry about the late reply too.\nWe've tried to reproduce this issue again without luck, even in your main project (which we'd removed CodePush from it, two weeks ago).\nIf we find something valuable on this issue again, I'll ping you.\nThanks for you time.. @silhouettes yeah, once the app is built, it will be read from the same location (the assets folder inside the app), but my change was to set the folder in which the CodePushHash.json is generated before the app itself is built.\nIn my knowledge, we should fallback both paths to their default locations (build/intermediates/assets and build/intermediates/resources) but they should be overridable by the react config vars (resourcesDirDebug, resourcesDirRelease, jsBundleDirDebug and jsBundleDirRelease), exactly the way we're handling resourcesDir right now.. ",
    "benjaminb10": "@vladimir-kotikov Thanks for your reply.\nThe thing is that I'm using this Navigation package: https://github.com/wix/react-native-navigation\nAnd so my index.ios.js file is:\n```\nimport { Navigation } from 'react-native-navigation'\nimport MySubComponent from './App/Components/MySubComponent'\nexport function registerScreens () {\n  Navigation.registerComponent('MySubComponent', () => MySubComponent)\n}\nregisterScreens()\nNavigation.startSingleScreenApp({\n  screen: {\n    screen: 'MySubComponent',\n  }\n})\n```\nWhere do I have to import codepush and call notifyAppReady() ?\nSomething like that doesn't seem to work:\n```\nimport codePush from \"react-native-code-push\";\nimport { Navigation } from 'react-native-navigation'\nimport MySubComponent from './App/Components/MySubComponent'\nexport function registerScreens () {\n  Navigation.registerComponent('MySubComponent', () => MySubComponent)\n}\nregisterScreens()\ncodePush.notifyAppReady()\nNavigation.startSingleScreenApp({\n  screen: {\n    screen: 'MySubComponent',\n  }\n})\n```\n. @vladimir-kotikov What do you mean by: \n\nHave you tried to remove the app from device/emulator before deploying it using react-native run-*. @vladimir-kotikov so you suggest me to delete the app on my iPhone (long press on it), there release it again?. \n",
    "grigored": "I have a similar situation, using wix navigation, and it's not working, always rollback-ing when i close the app. Spent the past few hours trying to make it work. \nWhat I did:\n1) Initially there wasn't any code refresh at all, so I had to make sure in AppDelegate.m i have jsCodeLocation = [CodePush bundleURL];  as detailed in the manual installation instructions (I used react-native link initially, but due to the wix navigation, AppDelegate.m somehow got mixed up)\n2) tried deleting the app from the device, doesn't help\n3) tried calling codePush.notifyAppReady() in index.ios.js, in my main component's componentDidMount(), on a button click. Didn't help. Whenever I close the app and reopen it, it rolls back to the previous code.\nAny ideas, did anyone make this work?. Ok, I finally solved the problem like this https://github.com/Microsoft/react-native-code-push/issues/875. Had the same problem, this is what worked for me https://github.com/Microsoft/react-native-code-push/issues/875. In my case messing around with codePush.sync() brought only problems. What if you remove the part in componentDidMount() part?. After spending several hours on this, i finally found a solution/workaround:\n1. I wasn't able to make codePush.sync work, no matter where i put the sync/notifyAppReady functions.\n1. I tried wrapping the startSingleScreenApp() in a React component, but for some reason that didn't work either. \n1. I tried wrapping the main screen component in @codePush, and that partially worked, but static methods were not copied by the codePush HOC. The answer to this is in the react docs, was considering creating a pull request for this, but I don't have the time right now.\n1. So what I did that finally solved the problem, is I created another react component:\n```\nimport React from \"react\";\nimport codePush from \"react-native-code-push\";\n@codePush({\n    installMode: codePush.InstallMode.ON_NEXT_RESUME,\n    checkFrequency: codePush.CheckFrequency.ON_APP_RESUME,\n})\nexport class CodePushComponent extends React.Component {\n    render() {\n        return null;\n    }\n}\n```\nand then just rendered that component in the main screen. This way, I'm using the recommended decorator method. Not sure what kind of sorcery that decorator is doing that I couldn't replicate with sync/notifyAppReady.\nAlso make sure that in AppDelegate.m you have the right jsCodeLocation = [CodePush bundleURL];. In my case, it looks like this:\n```\nifdef DEBUG\njsCodeLocation = [NSURL URLWithString:@\"http://localhost:8081/index.ios.bundle?platform=ios&dev=true\"];\n\nelse\njsCodeLocation = [CodePush bundleURL];\n\nendif\n. An issue I definitely see is what I mentioned at 3: the codepush HOC doesn't copy static data. I had this problem elsewhere, and am using hoistNonReactStatic to solve it, as described in the [react docs](https://facebook.github.io/react/docs/higher-order-components.html#static-methods-must-be-copied-over).. @tmaly1980 The decorator is just syntactic sugar, you don't have to use it. It's equivalent to the code below\nclass CodePushComponent extends React.Component {\n....\n}\nexport default @codepush(options)(CodePushComponent)\n```. ",
    "jacob-meacham": "@matrosov-nikita yeah, on debug builds right now we're not bumping version appropriately. We should definitely fix that on our side, but it's why I noticed this issue. If the code is just dead, maybe the better solution is just to remove it?. This is similar to the hacked fix I had been using and works for me. Thanks!. ",
    "YongHuiLuo": "@vladimir-kotikov   thank you very much\uff0cI did not do any code changes, but the problem did not reoccurrence, I guess is a network problem, due to the instability of the network environment.. ",
    "aiyidu": "Yes, I'm sure there's only one gradle.properties at android/gradle.properties.\nI finally avoid this error by running command with specify version explicitly (-t 3.0.0).\n. I'm not using react-native init myapp to create project, but integrate react-native into exist project.\nAnd here is the gradle.properties:\ngradle.zip\n. \n@sergey-akhalkov \nI am using mac. So the path actually is: \"/usr/local/lib/node_modules/code-push-cli/script/command-executor.js \"\nThe code-push version I am using is 1.12.6-beta\nAnd I add log as below(which is a little different in mac):\nexports.log(\"propertiesContent value: \"+ propertiesContent);\nexports.log(\"parsedProperties value: \" + parsedProperties);\nexports.log(\"appVersion value: \" + appVersion);\nThen I run command \"code-push release-react AIXY android -d AndroidDev --des \"First Commit\"\"\nI got this:\nDetecting android app version:\norg.gradle.jvmargs=-Xmx2048m -XX:MaxPermSize=512m -XX:+HeapDumpOnOutOfMemoryError -Dfile.e# http://www.gradle.org/docs/current/userguide/multi_project_builds.html#sec:decoupled_projeorg.gradle.jvmargs=-Xmx2048m -XX:MaxPermSize=512m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encKEYSTORE_ALIAS_PASSWORD=readyidu!@#jks\nparsedProperties value: [object Object]\nappVersion value: undefined\n[Error]  No property named \"ANDROID_BUILD_VERSION_NAME\" exists in the \"android/gradle.properties\" file.\nAnd could you tell me how to debug node.js in mac?\nI run your command but get error:\nnode: bad option: --inspect. ",
    "axemclion": "Looks like it is due to this line - https://github.com/Microsoft/react-native-code-push/blob/master/scripts/postlink/ios/postlink.js#L52\nWe need to look for Info.plist, not *Info.plist. \ncc @vladimir-kotikov . @christopherdro Thanks for the PR. Would this be a duplicate of #665 ? . We have been using (this line](https://github.com/Microsoft/react-native-code-push/blob/e42485243d9466fb6c00937bd9f67cee0d96de53/ios/CodePush/RCTConvert%2BCodePushInstallMode.m#L3 for backward compat, so I think we dont have to bump up the major version.\n```\nif __has_include()\nimport \nelse\nimport \"RCTConvert.h\"\nendif\n```. cc @BretJohnson - what do you think of the comment above ? . @pniko This looks like a serious issue. Could we quickly investigate to see what the issue here is ? Once @sergey-akhalkov is back to work, he could continue the investigation. . Could you also please add the other libraries that you are using in your app ? . ",
    "jordanmkoncz": "@max-mironov Has this fix made it into a release yet? I've just followed the CodePush setup instructions from scratch, with \"react-native-code-push\": \"^1.17.3-beta\" being installed, and I had this same issue happen.. @max-mironov Done :). Hey @max-mironov, sorry I've been super busy and haven't had a chance to get back to about this. Should be able to get that extra info for you later this week.. ",
    "SamMatthewsIsACommonName": "@sergey-akhalkov I'm having the same issue, have you been able to fix it?. Hi @sergey-akhalkov I ended up using an earlier version of React Native and worked fine. Cheers!. Hi @sergey-akhalkov  I'm having this issue but I don't think I have any 'multi deployment testing' setup, it's just when I go to run the release scheme. i've tried all solutions i.e manually importing codepush.h, adding the library from scratch etc. I'm running react native 0.40.0 and react-native-code-push 1.16.1-beta. The weird thing was it was working fine and I'd created a build and submitted it to the app store, but then I changed a google services.plist file and suddenly the build broke... I've tried restarting computer etc etc... Also in your solution above I can't actually find the 'Build Locations' settings anywhere, I'm using xcode 8.2\nEDIT: Sorry was using wrong version, needed 1.17.1-beta. ",
    "anhtuank7c": "I have same problem with RN 0.40.0, RN-cli 2.0.1\n```\n/Users/anhtuank7c/Projects/reactnative/Clock/ios/Clock/AppDelegate.m:11:9: fatal error: 'CodePush.h' file not found\nimport \"CodePush.h\"\n    ^\n\n1 error generated.\n BUILD FAILED \n```\nI resovled by manually linking CodePush.h to iOS project.\nopen ios project via xcode, then scrolling to the end, press +\n\nPress Add Other\n\nBrowse to node_modules/react-native-code-push/ios/CodePush/CodePush.h then press Open\n\nNow we have CodePush.h like this.\n\nrun react-native run-ios and enjoy it. ",
    "2ducanhpham": "Thanks @anhtuank7c . Everything work fine if I hard code VERSION in Xcode & versionName in android/app/build.gradle\nBut not good with environment variable\nEx: Xcode: 1.0.0 & versionName \"1.0.2\". Android:\ndefaultConfig {\n    applicationId project.env.get(\"BUNDLE_ID\")\n    minSdkVersion 16\n    targetSdkVersion 22\n    versionCode project.env.get(\"BUILD_NUMBER\").toInteger()\n    versionName project.env.get(\"VERSION\")\n    ndk {\n        abiFilters \"armeabi-v7a\", \"x86\"\n    }\n    manifestPlaceholders = [ FABRIC_KEY:project.env.get(\"FABRIC_KEY\") ]\n}\n\nIOS:\nCFBundleShortVersionString\n__RN_CONFIG_VERSION. Thanks you so much. I hope microsoft can create a better integrated library of environment variables.\nThis is necessary for all applications when deploy\n. ",
    "fabriziogiordano": "I am having the same issue.\n\"dependencies\": {\n    \"react\": \"16.0.0-alpha.12\",\n    \"react-native\": \"0.46.4\",\n    \"react-native-code-push\": \"^4.1.0-beta\"\n  },\n\nIt was working then all of the sudden.. stop working. It is frustrating. Is there something I should do?\n. ",
    "ujwal-setlur": "Check the Header Search Paths under each target. For me, it was \n$(SRCROOT)/../node_modules/react-native-code-push/ios/CodePush\nIt should have been\n$(SRCROOT)/../node_modules/react-native-code-push/ios\n. OK, I am the doofus here. A light bulb finally went off in my head making me think maybe, just maybe that the update I had pushed to the code-push server was buggy and was causing the crash. And indeed it was! I had pushed the update yesterday before I had chased down all the prop-types issues in the third party modules I was using (my own code was clean :).\nAnyway, I pushed a new update, and everything works just fine! Sorry for not thinking straight before I opened this bug!. I will test it today. Thanks!. @g33ktony, nope I didn't. Thing to note is that this happens only on debug build for Android. App id is the same between release and debug builds. ",
    "jackmead515": "This was the output I got related to CodePush when I did react-native link:\nrnpm-install info Android module react-native-code-push is already linked \nrnpm-install info iOS module react-native-code-push is already linked \n\"CodePush.h\" header already imported.\n\"jsCodeLocation\" already pointing to \"[CodePush bundleURL]\".\nCould not determine correct xcode proj path to retrieve related plist file, there are multiple xcodeproj under the solution.\n\"CodePushDeploymentKey\" already specified in the plist file.\n\"getJSBundleFile\" is already overridden\n\"codepush.gradle\" is already linked in the build definition\nNone of the above solutions worked for me.\n@anhtuank7c did you uninstall codepush first before manually installing it? If so, how did you go about doing so?\nI get this when I try to link CodePush.h:\nwarning: skipping file '/Users/jackmead/Documents/Workspace/tesseract-mobile/node_modules/react-native-code-push/ios/CodePush/CodePush.h' (unexpected file type 'sourcecode.c.h' in Frameworks & Libraries build phase)\n. ",
    "dzotos": "Manual configuration worked for me.. ",
    "rdewolff": "Had to do what you advised @mcrowe to get it running. Thanks for sharing the solution!. ",
    "emielvanliere": "Hi @panarasi - yes I was able to find a workaround. What I'm doing now is I start the react-native part of the app but don't display it yet. When booted, RN will check codepush for updates and when it's finished it will call back to the native app which will then display the RN view.. Hi,\nWe have a custom setup (our react-native component is loaded as part of a fully native app) so reproducing this problem might not be trivial.\n\nYes, 1.1.35 and 1.1.38 are the (internal) versions of our js bundle.\nYes, we tested this on a device. No we don't wrap our root component. However, we did build codepush with the DEBUG switch on. We're going to investigate whether this was the problem and update this ticket. Thanks so far!. We've investigated the issue and it turns out that after we refactored our code (to Kotlin), we implemented the getJSBundleFile() override in the wrong place. Once we changed that as per the documentation CodePush works fine.. \n",
    "kevando": "Sweet! I look forward to trying this out. Looks promising, thanks for all the work. ",
    "aziz-boudi4": "@vonovak What the user has a bad/slow internet connection, what is the best practice in this scenario?\nOur users get stuck in the downloading phase when they have a bad connection, any advice on how to deal with that?. ",
    "Rob117": "@aziz-boudi4 \nDo you mean post-download from the App Store, or on the very first time the app boots up?\nIf it's just after using the app at least once, I would recommend performing all of your downloads in the background if it fits your use case. Users that have slower connections won't notice, and once the update is complete you can trigger a restart.\nOther than that, something else you can do is show a sync icon, and if the update takes longer than x seconds time it out and tell them that the update failed due to poor connection quality and will try again on next reboot. For a better user experience, you could even use network status to check if they are on wifi and only update then, etc.\nOf course, if the connection is always bad, that makes the situation pretty untenable and this may not be the best technology for you. . ",
    "jy1989": "hi I've tried to get your modified sources and replace in my project. but the error still there. is it need to do some setup in my project?. ",
    "grabbou": "As already noted in the react-native repo, from the link perspective, it doesn't really matter. Just to say that #665 is not currently supported by the react-native link and so, using it will add headers to search paths anyway. If we decide to merge it, we need to release support for that with react-native at the same time.\nHappy to consider, just need to release the fix in first place.. I'll then ship two things now, 1) the fix 2) that new features. Will update this issue accordingly. . Fix has shipped here https://github.com/facebook/react-native/commit/545072b02d94e264a66987a5cebc15629a16f188. Watch out for a new release to land today or tomorrow. ",
    "JusticeLai": "\n\"react-native\": \"0.40.0\",\n\"react-native-code-push\": \"^1.16.1-beta\",\nxcode Version 8.2.1 (8C1002)\niPhone 6s Plus  Release  Error\niPhone 6s Plus  Debug  is ok. @sergey-akhalkov \n still  same error,\nHave you solved it?. @sergey-akhalkov thanks ,build success.... ",
    "stirman": "@grabbou any update on the next release with .40 support? Thx!. Woot! Thx :). ",
    "ezyone123": "I have tried all the above suggestions and have been able to building in release and debug mode. My issue is my staging build config in Xcode, it still complains about React/RCTBridge.h not found. My staging build configuration is a copy of production. I am not sure if this is a code push issue or a react native/my setup issue. I am just confused as to why release mode works but not staging when its just a copy of release. Any thoughts would be much appreciated. P.S. Staging build config worked before updating to react 0.40 from 0.38.\nI have a stack overflow question with more details if you have any insight. \n. ",
    "slicejunk": "@ezyone123 \nin case it may help for build process:\nadd \n$(BUILD_DIR)/Release$(EFFECTIVE_PLATFORM_NAME)/include\nto Xcode Build Settings / HEADER_SEARCH_PATHS\n. @sergey-akhalkov  you can also use this package to count the number of methods used\nhttps://github.com/mihaip/dex-method-counts\nproguard can shrink this number to only ~3.000 but it is a pain to use it on dev\nI guess some people will get this DexIndexOverflowException just after upgrading to 5.1.0-beta. ",
    "ewindso": "Here's the log:\nI/ReactNativeJS: [CodePush] Downloading package.\nI/ReactNativeJS: [CodePush] Installing update.\nD/Fragment: Pause\nI/ReactNativeJS: [CodePush] Restarting app\nD/Fragment: Resume\nD/ReactNative: [CodePush] Loading bundle on resume\nD/Fragment: Pause\nD/Fragment: Resume\nD/ReactNative: [CodePush] Loading bundle on resume\nD/Fragment: Pause\nD/Fragment: Resume\nD/ReactNative: [CodePush] Loading bundle on resume\n...\nIt continues to Pause / Resume forever.... Thanks @max-mironov -- I got this fixed by implementing ReactInstanceHolder and using CodePush.setReactInstanceHolder.  \nSeems to work like magic after that :)  No more infinite loops.  . ",
    "christopherdro": "@axemclion Are the changes in #665 suppose to achieve the same thing?\nI had to cherry pick the 2 open PR's plus these changes to get our app to build properly.\nAlthough I haven't tested it. Will likely push to stage tomorrow and can confirm back here afterwards.\nHere is how our forked version currently looks.\nhttps://github.com/wildlifela/react-native-code-push/tree/rn-40. ",
    "msftgits": "Hi, I am closing and re-opening this PR to bump the CLA bot. Sorry for the inconvenience!\n. Hi, I am closing and re-opening this PR to bump the CLA bot. Sorry for the inconvenience!\n. ",
    "dingbat": "Any updates on this? This PR alone fixed errors for me on RN 0.40.0 (without needing the other things in the rn-40 branch of @christopherdro's fork.). ",
    "jsappme": "+1. ",
    "AndrewJack": "@sergey-akhalkov Why don't you bump the major version for 0.40 and later, and continue to support 0.29 and older on the 1.x version in a separate 1.x branch? \nJust like how bugsnag have done it - https://github.com/bugsnag/bugsnag-react-native/releases. Trying to reproduce on the Example. @sergey-akhalkov I've figured it out.\n\nEnable proguard\nperform the same steps as above\n\nThen this happens:\n- loadBundle is called from onHostResume CodePushNativeModule.java#L473\n- It then fails to load the method on this line (because proguard + reflection) CodePushNativeModule.java#L160\n- This then is caught and loadBundleLegacy is called - CodePushNativeModule.java#L84\n- This then re-creates the activity\n- Which calls onHostResume again - starting the infinite loop - CodePushNativeModule.java#L473\nDo we still need this legacy support in v2 of code push? Now v2 only support RN v0.43?. I've fixed my code by adding -keep class com.facebook.react.** { *; } for now\nI previously had:\n-keep class com.facebook.react.cxxbridge.** { *; }\n-keep class com.facebook.react.bridge.** { *; }\nwhich worked fine except for code push. Things to fix:\n1. Remove support for old react native versions that may not work anyway (and all the reflection)? Now that v2 only supports RN 0.43 and later.\n2. Fix loadBundleLegacy infinite loop if 1 isn't fixed.\n3. add proguard rules to setup. https://github.com/Microsoft/react-native-code-push/pull/845 - let me know if you need anything changed\nI'm surprised code push doesn't have an supported react native api to setJSBundle yet.. @sergey-akhalkov any chance of this being reviewed/ merged soon?. @max-mironov I've had a look through your changes. I'll rebase my PR once yours has been merged.. @max-mironov I've rebased after your changes were merged.. @matrosov-nikita I've made those suggested changes. Fatal Exception: java.lang.RuntimeException: Unable to start service com.example.react.headlessTask.CodePushTaskService@ef12e5f with Intent { cmp=com.example/.react.headlessTask.CodePushTaskService }: com.microsoft.codepush.react.g: Error updating current package info\n       at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:3314)\n       at android.app.ActivityThread.-wrap21(ActivityThread.java)\n       at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1565)\n       at android.os.Handler.dispatchMessage(Handler.java:102)\n       at android.os.Looper.loop(Looper.java:154)\n       at android.app.ActivityThread.main(ActivityThread.java:6077)\n       at java.lang.reflect.Method.invoke(Method.java)\n       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:865)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:755)\nCaused by com.microsoft.codepush.react.g: Error updating current package info\n       at com.microsoft.codepush.react.CodePushUpdateManager.updateCurrentPackageInfo(CodePushUpdateManager.java:67)\n       at com.microsoft.codepush.react.CodePushUpdateManager.rollbackPackage(CodePushUpdateManager.java:295)\n       at com.microsoft.codepush.react.CodePush.rollbackPackage(CodePush.java:246)\n       at com.microsoft.codepush.react.CodePush.initializeUpdateAfterRestart(CodePush.java:205)\n       at com.microsoft.codepush.react.CodePush.(CodePush.java)\n       at com.example.MainReactNativeHost.getPackages(MainReactNativeHost.java:63)\n       at com.facebook.react.ReactNativeHost.createReactInstanceManager(ReactNativeHost.java:74)\n       at com.facebook.react.ReactNativeHost.getReactInstanceManager(ReactNativeHost.java:41)\n       at com.facebook.react.HeadlessJsTaskService.startTask(HeadlessJsTaskService.java:100)\n       at com.facebook.react.HeadlessJsTaskService.onStartCommand(HeadlessJsTaskService.java:53)\n       at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:3297)\n       at android.app.ActivityThread.-wrap21(ActivityThread.java)\n       at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1565)\n       at android.os.Handler.dispatchMessage(Handler.java:102)\n       at android.os.Looper.loop(Looper.java:154)\n       at android.app.ActivityThread.main(ActivityThread.java:6077)\n       at java.lang.reflect.Method.invoke(Method.java)\n       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:865)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:755)\nCaused by java.io.FileNotFoundException: /data/user/0/com.example/files/CodePush/codepush.json (No such file or directory)\n       at java.io.FileOutputStream.open(FileOutputStream.java)\n       at java.io.FileOutputStream.(FileOutputStream.java)\n       at java.io.FileOutputStream.(FileOutputStream.java)\n       at java.io.PrintWriter.(PrintWriter.java)\n       at com.microsoft.codepush.react.FileUtils.writeStringToFile(FileUtils.java:184)\n       at com.microsoft.codepush.react.CodePushUtils.writeJsonToFile(CodePushUtils.java:228)\n       at com.microsoft.codepush.react.CodePushUpdateManager.updateCurrentPackageInfo(CodePushUpdateManager.java:64)\n       at com.microsoft.codepush.react.CodePushUpdateManager.rollbackPackage(CodePushUpdateManager.java:295)\n       at com.microsoft.codepush.react.CodePush.rollbackPackage(CodePush.java:246)\n       at com.microsoft.codepush.react.CodePush.initializeUpdateAfterRestart(CodePush.java:205)\n       at com.microsoft.codepush.react.CodePush.(CodePush.java)\n       at com.example.MainReactNativeHost.getPackages(MainReactNativeHost.java:63)\n       at com.facebook.react.ReactNativeHost.createReactInstanceManager(ReactNativeHost.java:74)\n       at com.facebook.react.ReactNativeHost.getReactInstanceManager(ReactNativeHost.java:41)\n       at com.facebook.react.HeadlessJsTaskService.startTask(HeadlessJsTaskService.java:100)\n       at com.facebook.react.HeadlessJsTaskService.onStartCommand(HeadlessJsTaskService.java:53)\n       at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:3297)\n       at android.app.ActivityThread.-wrap21(ActivityThread.java)\n       at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1565)\n       at android.os.Handler.dispatchMessage(Handler.java:102)\n       at android.os.Looper.loop(Looper.java:154)\n       at android.app.ActivityThread.main(ActivityThread.java:6077)\n       at java.lang.reflect.Method.invoke(Method.java)\n       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:865)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:755). Fatal Exception: com.microsoft.codepush.react.g: Unable to read failedUpdates data stored in SharedPreferences.\n       at com.microsoft.codepush.react.SettingsManager.isFailedHash(SettingsManager.java:62)\n       at com.microsoft.codepush.react.CodePushNativeModule.isFailedUpdate(CodePushNativeModule.java:486)\n       at java.lang.reflect.Method.invoke(Method.java)\n       at com.facebook.react.bridge.BaseJavaModule$JavaMethod.invoke(BaseJavaModule.java:368)\n       at com.facebook.react.cxxbridge.JavaModuleWrapper.invoke(JavaModuleWrapper.java:138)\n       at com.facebook.react.bridge.queue.NativeRunnable.run(NativeRunnable.java)\n       at android.os.Handler.handleCallback(Handler.java:739)\n       at android.os.Handler.dispatchMessage(Handler.java:95)\n       at com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:31)\n       at android.os.Looper.loop(Looper.java:148)\n       at com.facebook.react.bridge.queue.MessageQueueThreadImpl$3.run(MessageQueueThreadImpl.java:208)\n       at java.lang.Thread.run(Thread.java:818)\nCaused by org.json.JSONException: Value null at 2 of type org.json.JSONObject$1 cannot be converted to JSONObject\n       at org.json.JSON.typeMismatch(JSON.java:100)\n       at org.json.JSONArray.getJSONObject(JSONArray.java:525)\n       at com.microsoft.codepush.react.SettingsManager.isFailedHash(SettingsManager.java:56)\n       at com.microsoft.codepush.react.CodePushNativeModule.isFailedUpdate(CodePushNativeModule.java:486)\n       at java.lang.reflect.Method.invoke(Method.java)\n       at com.facebook.react.bridge.BaseJavaModule$JavaMethod.invoke(BaseJavaModule.java:368)\n       at com.facebook.react.cxxbridge.JavaModuleWrapper.invoke(JavaModuleWrapper.java:138)\n       at com.facebook.react.bridge.queue.NativeRunnable.run(NativeRunnable.java)\n       at android.os.Handler.handleCallback(Handler.java:739)\n       at android.os.Handler.dispatchMessage(Handler.java:95)\n       at com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:31)\n       at android.os.Looper.loop(Looper.java:148)\n       at com.facebook.react.bridge.queue.MessageQueueThreadImpl$3.run(MessageQueueThreadImpl.java:208)\n       at java.lang.Thread.run(Thread.java:818). Fatal Exception: java.lang.RuntimeException: Unable to start service com.example.react.headlessTask.CodePushTaskService@426b0e30 with Intent { cmp=com.example/.react.headlessTask.CodePushTaskService }: com.microsoft.codepush.react.d: Unable to parse contents of /data/data/com.example/files/CodePush/codepush.json, the file may be corrupted.\n       at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:3007)\n       at android.app.ActivityThread.access$2200(ActivityThread.java:175)\n       at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1405)\n       at android.os.Handler.dispatchMessage(Handler.java:102)\n       at android.os.Looper.loop(Looper.java:146)\n       at android.app.ActivityThread.main(ActivityThread.java:5602)\n       at java.lang.reflect.Method.invokeNative(Method.java)\n       at java.lang.reflect.Method.invoke(Method.java:515)\n       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1283)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1099)\n       at dalvik.system.NativeStart.main(NativeStart.java)\nCaused by com.microsoft.codepush.react.d: Unable to parse contents of /data/data/com.example/files/CodePush/codepush.json, the file may be corrupted.\n       at com.microsoft.codepush.react.CodePushUtils.getJsonObjectFromFile(CodePushUtils.java:198)\n       at com.microsoft.codepush.react.CodePushUpdateManager.getCurrentPackageInfo(CodePushUpdateManager.java:55)\n       at com.microsoft.codepush.react.CodePushUpdateManager.getCurrentPackageHash(CodePushUpdateManager.java:105)\n       at com.microsoft.codepush.react.CodePushUpdateManager.getCurrentPackage(CodePushUpdateManager.java:115)\n       at com.microsoft.codepush.react.CodePush.rollbackPackage(CodePush.java:244)\n       at com.microsoft.codepush.react.CodePush.initializeUpdateAfterRestart(CodePush.java:205)\n       at com.microsoft.codepush.react.CodePush.(CodePush.java:72)\n       at com.example.MainReactNativeHost.getPackages(MainReactNativeHost.java:63)\n       at com.facebook.react.ReactNativeHost.createReactInstanceManager(ReactNativeHost.java:74)\n       at com.facebook.react.ReactNativeHost.getReactInstanceManager(ReactNativeHost.java:41)\n       at com.facebook.react.HeadlessJsTaskService.startTask(HeadlessJsTaskService.java:100)\n       at com.facebook.react.HeadlessJsTaskService.onStartCommand(HeadlessJsTaskService.java:53)\n       at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2990)\n       at android.app.ActivityThread.access$2200(ActivityThread.java:175)\n       at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1405)\n       at android.os.Handler.dispatchMessage(Handler.java:102)\n       at android.os.Looper.loop(Looper.java:146)\n       at android.app.ActivityThread.main(ActivityThread.java:5602)\n       at java.lang.reflect.Method.invokeNative(Method.java)\n       at java.lang.reflect.Method.invoke(Method.java:515)\n       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1283)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1099)\n       at dalvik.system.NativeStart.main(NativeStart.java)\nCaused by org.json.JSONException: End of input at character 0 of \n       at org.json.JSONTokener.syntaxError(JSONTokener.java:450)\n       at org.json.JSONTokener.nextValue(JSONTokener.java:97)\n       at org.json.JSONObject.(JSONObject.java:155)\n       at org.json.JSONObject.(JSONObject.java:172)\n       at com.microsoft.codepush.react.CodePushUtils.getJsonObjectFromFile(CodePushUtils.java:195)\n       at com.microsoft.codepush.react.CodePushUpdateManager.getCurrentPackageInfo(CodePushUpdateManager.java:55)\n       at com.microsoft.codepush.react.CodePushUpdateManager.getCurrentPackageHash(CodePushUpdateManager.java:105)\n       at com.microsoft.codepush.react.CodePushUpdateManager.getCurrentPackage(CodePushUpdateManager.java:115)\n       at com.microsoft.codepush.react.CodePush.rollbackPackage(CodePush.java:244)\n       at com.microsoft.codepush.react.CodePush.initializeUpdateAfterRestart(CodePush.java:205)\n       at com.microsoft.codepush.react.CodePush.(CodePush.java:72)\n       at com.example.MainReactNativeHost.getPackages(MainReactNativeHost.java:63)\n       at com.facebook.react.ReactNativeHost.createReactInstanceManager(ReactNativeHost.java:74)\n       at com.facebook.react.ReactNativeHost.getReactInstanceManager(ReactNativeHost.java:41)\n       at com.facebook.react.HeadlessJsTaskService.startTask(HeadlessJsTaskService.java:100)\n       at com.facebook.react.HeadlessJsTaskService.onStartCommand(HeadlessJsTaskService.java:53)\n       at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2990)\n       at android.app.ActivityThread.access$2200(ActivityThread.java:175)\n       at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1405)\n       at android.os.Handler.dispatchMessage(Handler.java:102)\n       at android.os.Looper.loop(Looper.java:146)\n       at android.app.ActivityThread.main(ActivityThread.java:5602)\n       at java.lang.reflect.Method.invokeNative(Method.java)\n       at java.lang.reflect.Method.invoke(Method.java:515)\n       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1283)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1099)\n       at dalvik.system.NativeStart.main(NativeStart.java). Edit: Added reproduction steps. Thanks, I don't think there is any chance of mixing RN versions, they are all targeted at the correct binary versions.\nI will try to reproduce in a simpler sample app. . Hey sorry, I'm a bit busy right now. I've worked around my problem for now by removing the immediate update.\nFeel free to close this issue. I'll reopen when I have more information.. FYI - removing any state changes after a UPDATE_INSTALLED status change fixed this for me. . I think this issue might have something to do with updating state (and causing a render) on the UPDATE_INSTALLED event. \nAfter this event the app will restart. This could cause issues if you are updating the same thing that is being destroyed.\nStill need to test this theory though.. FYI - The problem was also fixed for me by removing the state change in UPDATE_INSTALLED.. The release flow could look something like:\n1) Release a CodePush update\n2) Send a remote push trigger (APN, FCM, etc) or scheduled background job starts\n3) Call CodePush api in Java or Objective C to sync the CodePush bundle\n4) CodePush downloads the new bundle, if new bundle is available\n5) CodePush can then wait for next app start to load the new bundle. Or if it is currently running follow some similar logic to the installMode used in the current JS sync method (ON_NEXT_RESTART or ON_NEXT_RESUME). . @thevolcanomanishere it says in the migration guide FAQs:\n\nAs of now, the only big change is the use of the App Center CLI and the structure of the commands. No changes in your code will be neccesarry until the release of the new SDK next year. In addition to this, CodePush will no longer be open sourced. The CodePush team would like to extend our graditude for your help in making CodePush what it is today. None of this would be possible without such an amazing community.\n\nhttps://docs.microsoft.com/en-us/appcenter/distribution/codepush/migrationguide#faq. @alexandergoncharov \nThe issue occurs when using v4.2.0 of the google-services plugin & codepush\nE.g. \ngradle\nclasspath 'com.google.gms:google-services:4.2.0'\nDowngrading to v4.1.0 works around this issue temporarily.. Seen this issue in production too. \nSame stacktrace as @yz1311 \nOnly on Huawei devices. \nAndroid OS: 8.0 & 9.0\nModels: LYA-L29, CLT-L29, LYA-L09. COL-L29, SNE-LX2, LYA-AL00\nEdit: not sure why or how @NickToropov was unassigned \ud83d\ude15 . Any issue with clearing this before we attempt to load the bundle? We don't need the callback after this point.\nWe must call this before loadBundleLegacy() or it will go into an infinite restart loop.. Avoid assigning inside the loop.. Ah just spotted this - The NumberFormatException should be caught. Should I move this inside if (pendingUpdate != null) { to avoid reading the file getCurrentPackage file every time.. ",
    "wkw": "In case this helps anyone else upgrading iOS, I was getting build failures for a lot of duplicate interface definitions after upgrading to rncp 1.17.0-beta. They all came from this line in my AppDelegate.m: #import \"CodePush.h\". I guess that got left when I r-n unlinked then after re-linking, my appdelegate looked like:\n```\nimport \"AppDelegate.h\"\nimport \nimport \"CodePush.h\"\n```\nRemoving #import \"CodePush.h\" made the build... well, build!\nI have yet to ever test code pushing, so I can't say whether there are any other issues.. ",
    "simonmitchell": "All of the above __has_includes need to be the other way around apart from @axemclion's example, because technically #import \"RCTConvert.h\" is still available to the compiler, it just causes compiler warnings due to a duplicate import!\n```\nif __has_include()\nimport \nelif __has_include(\"RCTRedBox.h\")\nimport \"RCTRedBox.h\"\nelif __has_include(\"React/RCTRedBox.h\")\nimport \"React/RCTRedBox.h\"   // Required when used as a Pod in a Swift project\nendif\n``. I added this style of import into a pull-request I was merging into another library:react-native-navigation`, I only ran the project with RN 0.40.0, so this way around may cause issues with RN < 0.40.0, but the examples above mine certainly didn't work with RN 0.40.0 :). ",
    "patrickomeara": "@panarasi @max-mironov thanks for your help, I was bumping the version number in Info.plist and build.gradle to 0.3.1 which was changing the target version. I have left them at 0.3.0 now and updates are pushing out again.. ",
    "mongolgamestudio": "Thanks for comment.\nI've resolved by clearing cache and data after store update. On first run in MainApplication onCreate :\nSharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);\n    if(prefs.contains(lastKnownVersion)){\n      //Exists.\n      int lastKnownVersionNumber = prefs.getInt(lastKnownVersion, 0);\n      if(lastKnownVersionNumber < BuildConfig.VERSION_CODE) {\n        // App has been upgrade\n        deleteAppDirectory();\n        Log.i(\"com.xxx.yyy\", \"App is upgraded: \"+ BuildConfig.VERSION_CODE);\n        SharedPreferences.Editor editor = prefs.edit();\n        editor.putInt(lastKnownVersion, BuildConfig.VERSION_CODE);\n        editor.commit();\n      }\n      else{\n        Log.i(\"com.xxx.yyy\", \"App is ok: \" + BuildConfig.VERSION_CODE + \": \" + lastKnownVersionNumber);\n      }\n    }\n    else{\n      //Doesn't exists === First run or old version\n      Log.i(\"com.xxx.yyy\", \"First run: \"+ BuildConfig.VERSION_CODE);\n      deleteAppDirectory();\n      SharedPreferences.Editor editor = prefs.edit();\n      editor.putInt(lastKnownVersion, BuildConfig.VERSION_CODE);\n      editor.commit();\n    }. ",
    "petromoldovan": "@silhouettes thank you!!!. ",
    "ConnorJWilliams": "Issue related to our gradle dependency structure in react.gradle. Will mark as resolved.. ",
    "ThisIsMissEm": "Question, why is every release a beta release (marked by -beta). @silhouettes okay, interesting! So, it's not a beta semver release, but rather just the project is beta \u2014 that is, there is no 1.17.0 coming, there is only 1.17.0-beta. ",
    "jeremistadler": "@geof90 @lostintangent @itsananderson \nHave any spare time for this? \ud83d\ude04 . @panarasi @silhouettes Thanks, I guess this PR will brake the site if merged as of now.\nConsidered other solutions such as gitbook or readthedocs?. ",
    "kodemi": "Hi! \"Multi-Deployment Testing\" section for Android has this line for MainApplication.java:\nnew CodePush(BuildConfig.CODEPUSH_KEY, MainApplication.this, BuildConfig.DEBUG). But if we not configure CodePush in debug mode this line causes error when react-native run-android: cannot find symbol ... variable CODEPUSH_KEY. So, how to prevent CodePush to run in debug mode?. ",
    "matthargett": "@silhouettes let me/us know if you'd like to do a video call to accelerate things. we did a few of these with @rozele for some of our larger contributions to React Native Windows and the ChakraCore team.. @rozele we can follow up with a separate PR that creates a NuGet package for CodePush, if you like. Since CodePush isn't like React Native Windows where people may want to extend the core source project with new files, it should probably be a NuGet package regardless of this PR for the best DX.. It was part of @geof90 's original commit (according to git blame). The value is set to true, but never read from. Looks like it was transliterated in to C# incorrectly, maybe? We can file and issue and do a separate PR to fix -- we specifically have user stories in our project for update failure modes that will likely force us to fill missing gaps on that front.. ",
    "abodalevsky": "Regarding PCLStorage. I use it for Net46 project only. In fact this doesn't add additional dependency because it is already exists in ReactNative.Net46 project.\nIn general, probably, it make sense to use PCLStorage for UWP implementation as well. A benefit will be more code shared between UWP & NET implementations. As I mentioned in comments above I tried not to modify existent implementation UWP, as this is not the subject of this PR. . Hi @maxim-pop \nVisualStudio has generated this certificate by default within the project. In general it should be used for signing the assembly for deployment purposes. But I don't see in code that it is used. Therefore I may assume that for this example the *_TemporaryKey.pfx may be safely removed. \nI have created PR #741, please take a look.. Since fix in PR#950 ReactNative.Net46 uses absolute path, without prefix. Therefore all prefixes were removed for Net46 solution.. Unfortunately there is no Try..... functions. Replaced with preliminary verification if file exists. If file doesn't exists (which is most common case) it simply return no any exception will be thrown.. Correct, actually, it has been already fixed in CodePushConstants.AssetsBundlePrefix thus this code replaces nothing. Removed.. Seems like newUpdateFolder is correct name. Fixed.\nThis implementation (including comments :) ) replicates UWP implementation. I've tried to follow the idea not to change existing code as much as possible.  The proposed change make sense but looks like it should be done in both versions (UWP and NET46) that is I believe can be done as separate PR.. Correct, fixed to the var. Yep, totally agree in general. ~But the latest available version of react-native-windows is 0.39.0 This implementation requires more modern version.~\nFixed to 0.40.0-rc.1\nThanks for the release. You are right absolutely! Thanks for this catch.\nFixed in 03af9fcf29e95a00dc8dbdee2214d0e4e2ab2bda. Nothing special, just wanted to avoid npm UNMET PEER DEPENDENCY warnings:\n\nnpm WARN gulp-tslint@7.1.0 requires a peer of tslint@>=4.0.0-dev but none was installed.\nnpm WARN tslint@4.4.2 requires a peer of typescript@>=2.0.0 but none was installed\n\n. Thank you @kevinvangelder! I also added UnitTest project to .npmignore. 4 means last 4 segments of the path where JS bundle is located. The idea of the change was to unify the calculation of js bundle file location for UWP and WPF. While they have different prefix but last 4 segments are the same for both implementations.\nFor example for\n F:\\react-native-code-push\\Examples\\CodePushDemoApp\\windows\\CodePushDemoApp.Wpf\\bin\\x64\\DebugBundle\\CodePush\\cc1dd1ab\\CodePush\\index.windows.bundle\nthe part that will be added to specific prefix will be:\nCodePush/cc1dd1ab/CodePush/index.windows.bundle. It should be fine I have checked it before commit. this file should be created by Visual Studio dynamically. ",
    "maxim-pop": "Hi @abodalevsky ,\nThe Demo App contains a .pfx certificate file (/CodePushDemoApp/windows/CodePushDemoApp/CodePushDemoApp_TemporaryKey.pfx). \nIs it possible to remove it from repo? We have compliance issues with storing secrets in code.. Thanks!. I assume package.json version bump and release not needed here.. ",
    "fungilation": "A verification please for RN 0.42?. Sounds like a perfect marriage. But does it make sense though? Fastlane is for deploying to app stores. Codepush is for bypassing the app stores, and push JS code updates directly to already installed apps.. That is a good use case. Where does your changelogs go though if through code push, inside the app as a modal?. If your app didn't crash to homescreen, it's not the same issue.. Thanks. I will if I see a similar crash again, haven't seen one in days. And let's see if others experience similar crash in other apps.. I think it'd be useful to share and compare dependencies in our package.json, if there's any pattern in possibly 3rd party packages at fault (on latest RN). I haven't seen a new crash yet since my original post, and I've upgraded RN to 0.48.3 today.\njs\n\"dependencies\": {\n  \"babel-plugin-idx\": \"^2\",\n  \"he\": \"^1.1.0\",\n  \"jssha\": \"^2.3.1\",\n  \"lodash\": \"^4.17.2\",\n  \"moment-timezone\": \"^0.5.10\",\n  \"node-summary\": \"file:../node-summary\",\n  \"react\": \"16.0.0-alpha.12\",\n  \"react-native\": \"0.48.3\",\n  \"react-native-blur\": \"^3.1\",\n  \"react-native-code-push\": \"^5.0.0-beta\",\n  \"react-native-firebase\": \"^2.2\",\n  \"react-native-fit-image\": \"^1.4.8\",\n  \"react-native-highlight-words\": \"^1.0.0\",\n  \"react-native-keep-awake\": \"^2.0.4\",\n  \"react-native-linear-gradient\": \"^2.0.0\",\n  \"react-native-modalbox\": \"^1.3.8\",\n  \"react-native-notification\": \"^2.0.0\",\n  \"react-native-orientation\": \"^3.0.0\",\n  \"react-native-parallax-scroll-view\": \"file:../react-native-parallax-scroll-view\",\n  \"react-native-safari-view\": \"^2.0.0\",\n  \"react-native-sentry\": \"^0.23\",\n  \"react-native-status-bar-size\": \"^0.3.2\",\n  \"react-native-swiper\": \"^1.5.10\",\n  \"react-native-tooltip\": \"^5.0.0\",\n  \"react-native-tts\": \"^1.3.0\",\n  \"react-native-vector-icons\": \"^4.1.1\",\n  \"react-native-webview-bridge\": \"https://github.com/lefnire/react-native-webview-bridge.git\",\n  \"react-redux\": \"^5.0.1\",\n  \"redux\": \"^3.6.0\",\n  \"redux-thunk\": \"^2.1.0\"\n},\n\"devDependencies\": {\n  \"redux-logger\": \"^3.0.6\"\n}. Thanks for the quick reply! This is an existing installation and CTRL-C after relinking doesn't seem to have broken anything with my app. The broken postlinking scripts may break new installations however.. @ruslan-bikkinin How should I test it, yarn add https://github.com/Microsoft/react-native-code-push.git instead of using npm since there's no new release yet with your PR?\nOr not, since I'm not seeing it on master commits either.. Looks like you fixed it:\n$ yarn remove react-native-code-push\n...\n$ yarn add ruslan-bikkinin/react-native-code-push#fix-postlink\n...\n$ react-native link react-native-code-push\nScanning 610 folders for symlinks in [PROJECT]/node_modules (7ms)\n? What is your CodePush deployment key for Android (hit <ENTER> to ignore) \nrnpm-install info Linking react-native-code-push android dependency \nrnpm-install info Android module react-native-code-push has been successfully linked \nrnpm-install info Linking react-native-code-push ios dependency \nrnpm-install info iOS module react-native-code-push has been successfully linked \nRunning ios postlink script\n\"CodePush.h\" header already imported.\n\"jsCodeLocation\" already pointing to \"[CodePush bundleURL]\".\nCould not determine correct xcode proj path to retrieve related plist file, there are multiple xcodeproj under the solution.\n? What is your CodePush deployment key for iOS (hit <ENTER> to ignore) [DSN]\nRunning android postlink script\n\"getJSBundleFile\" is already overridden\n\"codepush.gradle\" is already linked in the build definition\n$\nExited to cli prompt cleanly. Ah, was the wrong link giving me lack of docs. Thanks for the update, issue is closed.\nAutomating it in link scripts would be an improvement.. Confirmed fix: https://github.com/Microsoft/react-native-code-push/issues/999#issuecomment-330289676. Metro Bundler fails again, probably.. Update: Got another Sentry error a few hours ago: https://sentry.io/share/issue/1d0884bb8de44f3998ff8e1fe32aa23c/\nI just updated RN from 0.50.1 to 0.50.2, and added this to my package.json:\n\"resolutions\": {\n    \"metro-bundler\": \"0.20.1\"\n  }\nThis seems to have done the trick, with a new CodePush and restarting my app:\n\nCommenting upstream on what appears to be a fix.\nThanks for the reference @adbl . Re-opening this as I'm again seeing similar \"No installs recorded\" on pushed version, after running code-push deployment ls [APP].\nPreviously 5.2.0-beta, upgrading to 5.2.1. On 5.2.0-beta, pushed versions get deployed as reported by code-push deployment ls. But not since upgrading to 5.2.1.\n```\n$ react-native info\nEnvironment:\n  OS: macOS Sierra 10.12.6\n  Node: 8.9.1\n  Yarn: 1.3.2\n  npm: 5.5.1\n  Watchman: 4.9.0\n  Xcode: Xcode 9.2 Build version 9C40b\n  Android Studio: Not Found\nPackages: (wanted => installed)\n  react: 16.0.0 => 16.0.0\n  react-native: 0.50.4 => 0.50.4\n```. I'm pretty certain it's not, as strictly in terms of change management, I haven't touched RN itself with this change. And Metro related issues have been fixed in RN 0.50.\nBefore: RN-code-push 5.2.0-beta, versions pushed and verified as deployed based on code-push deployment ls.\nAfter: RN-code-push 5.2.1, versions pushed not deployed. Same RN.. I'm not sure how I can quickly provide a minimal but still functional version of my app. How about an ejected skeleton from CRNA with my package.json?\njs\n{\n  \"name\": \"APP\",\n  \"version\": \"0.0.1\",\n  \"private\": true,\n  \"eslintConfig\": {\n    \"parserOptions\": {\n      \"ecmaVersion\": 6,\n      \"sourceType\": \"module\",\n      \"ecmaFeatures\": {\n        \"jsx\": true,\n        \"experimentalObjectRestSpread\": true\n      }\n    },\n    \"env\": {\n      \"browser\": true,\n      \"node\": true\n    },\n    \"plugins\": [\n      \"react\",\n      \"react-native\"\n    ],\n    \"rules\": {\n      \"comma-dangle\": [\n        2,\n        \"always-multiline\"\n      ],\n      \"semi\": [\n        2,\n        \"never\"\n      ],\n      \"react-native/no-unused-styles\": 2,\n      \"react-native/split-platform-components\": 2\n    }\n  },\n  \"scripts\": {\n    \"start\": \"node node_modules/react-native/local-cli/cli.js start\"\n  },\n  \"dependencies\": {\n    \"babel-plugin-idx\": \"^2\",\n    \"he\": \"^1.1.0\",\n    \"lodash\": \"^4.17.2\",\n    \"moment\": \"^2.19.0\",\n    \"moment-timezone\": \"^0.5.10\",\n    \"node-summary\": \"../node-summary\",\n    \"react\": \"16.0.0\",\n    \"react-native\": \"0.50.4\",\n    \"react-native-blur\": \"^3.2.0\",\n    \"react-native-code-push\": \"5.2.0-beta\",\n    \"react-native-firebase\": \"^3.0\",\n    \"react-native-fit-image\": \"^1.4.8\",\n    \"react-native-highlight-words\": \"smartkarma/react-native-highlight-words\",\n    \"react-native-keep-awake\": \"^2.0.6\",\n    \"react-native-linear-gradient\": \"^2.0.0\",\n    \"react-native-modalbox\": \"^1.3.8\",\n    \"react-native-notification\": \"../react-native-notification\",\n    \"react-native-orientation\": \"^3.0.0\",\n    \"react-native-parallax-scroll-view\": \"../react-native-parallax-scroll-view\",\n    \"react-native-safari-view\": \"^2.0.0\",\n    \"react-native-sentry\": \"^0.31\",\n    \"react-native-sha256\": \"^1.1.1\",\n    \"react-native-status-bar-size\": \"^0.3.2\",\n    \"react-native-swiper\": \"^1.5.10\",\n    \"react-native-tooltip\": \"../react-native-tooltip\",\n    \"react-native-tts\": \"^1.3.0\",\n    \"react-native-vector-icons\": \"^4.1.1\",\n    \"react-native-webview-bridge\": \"../react-native-webview-bridge-RN0.40\",\n    \"react-redux\": \"^5.0.1\",\n    \"redux\": \"^3.6.0\",\n    \"redux-thunk\": \"^2.1.0\"\n  },\n  \"devDependencies\": {\n    \"redux-logger\": \"^3.0.6\"\n  },\n  \"resolutions\": {\n    \"moment-timezone/moment\": \"^2.19.0\"\n  }\n}. Update: Upgraded RN to 0.51.0 and tested a deploy. code-push deployment ls [APP] now also keep showing \"No installs recorded\" while react-native-code-push is kept on 5.2.0-beta.\nI'm at a loss what broke code push with my install, and if it is specific to my install, how I would fix it. I'd try react-native unlink and link again, but that fails too: https://github.com/Microsoft/react-native-code-push/issues/1085\nOr is this more systemic, if there's any other reports of deploy breakage while CodePush is being folded into App Center?\nSuggestion appreciated on how I can \"reset\" my install or otherwise test why ls keeps showing \"No installs recorded\" from CodePush server?. Tried yarn remove and yarn add react-native-code-push in between the unlink and link as well, to no avail. react-native link react-native-code-push always ends with this:\n```\n? What is your CodePush deployment key for Android (hit  to ignore) [KEY]\nrnpm-install info Linking react-native-code-push android dependency \nrnpm-install info Android module react-native-code-push has been successfully linked \nrnpm-install info Linking react-native-code-push ios dependency \nrnpm-install ERR! Something went wrong while linking. Error: Cannot read property 'match' of undefined \nPlease file an issue here: https://github.com/facebook/react-native/issues \nCannot read property 'match' of undefined\n```\nAlso tried deleting whole /node_modules/ directory and reinstall with yarn. With and without a react-native uninstall react-native-code-push first. react-native link after yarn packages rebuild still stalls at Cannot read property 'match' of undefined when linking react-native-code-push.\nHow do I do a complete unlink/uninstall and clean reinstall that may solve this linking issue? I want to see whether react-native-code-push is somehow broken in how it's linked in my app.. Tried debuging as per the doc, with\n$ code-push debug ios\nListening for ios debug logs (Press CTRL+C to exit)\nAnd that's all it tells me, no logs show up at all after the \"Listening for\" line, while my app is running in iOS (11.2) Simulator.\nMy CodePush integration code in index.js:\n```js\nclass APP extends Component {\n  ...\n}\nAPP = codePush({\n  checkFrequency: codePush.CheckFrequency.ON_APP_RESUME,\n  installMode: codePush.InstallMode.ON_NEXT_SUSPEND,\n  // installMode: codePush.InstallMode.ON_NEXT_RESUME,\n  minimumBackgroundDuration: 600,    // code-push deployment ls APP > Install Metrics should show N pending. To be installed after N seconds\n})(APP)\nSentry.config(\"DSN\").install()\n// https://docs.sentry.io/clients/react-native/codepush/\ncodePush.getUpdateMetadata().then((update) => {\n  if (update)\n    Sentry.setVersion(update.appVersion + '-codepush:' + update.label)\n})\nAppRegistry.registerComponent('APP', () => APP)\n```\nNo logs mean that libCodePush.a isn't working? I do see it linked in Xcode as lib. And I can't get it reinstalled and relinked as I've shown above, it always errors out at the rnpm-install ERR! Something went wrong while linking. Error: Cannot read property 'match' of undefined on link. After that, libCodePush.a disappears from my project.pbxproj.. Ok. Gone through every step of uninstalling and reinstalling/linking manually. Same thing.\nAlong the way, I even found and fixed a side issue. This is in my index.js:\njs\nAPP = codePush({\n    deploymentKey: '[KEY]',   // can't rely on CodePushDeploymentKey: $(CODEPUSH_KEY) in Info.plist?\n    checkFrequency: codePush.CheckFrequency.ON_APP_RESUME,\n    installMode: codePush.InstallMode.ON_NEXT_SUSPEND,   // https://github.com/Microsoft/react-native-code-push/pull/770\n    // installMode: codePush.InstallMode.ON_NEXT_RESUME,    // https://github.com/Microsoft/react-native-code-push/blob/master/docs/api-js.md#installmode\n    minimumBackgroundDuration: 600,    // code-push deployment ls APP > Install Metrics should show N pending. To be installed after N seconds\n  })(APP)\nwhere I didn't specify deploymentKey at run time before, as I relied on key from Xcode config. In my Info.plist:\n<key>CodePushDeploymentKey</key>\n<string>$(CODEPUSH_KEY)</string>\nand I have CODEPUSH_KEY as 2 variables in Xcode production and staging build configs. This was all working before. But now Chrome DevTools console attached to my app in simulator now tells me it was missing a key, so I additionally set it in index.js as shown above. Chrome console now returns on app launch:\n[CodePush] Checking for update.\n[CodePush] Downloading package.\nBUT, hoping for the best with actual code pushed in production, with a code-push release-react APP ios ..., then starting and restarting my Xcode built app on device. No new version gets deployed still and code-push deployment ls APP still shows under the Install Metrics column, \"No installs recorded\".\nI'm out of ideas. Anything else I can debug or test?. $ code-push app ls\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Name        \u2502 Deployments         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 WonderSwipe \u2502 Production, Staging \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n$ appcenter apps list\n* gfung/WonderSwipe (current app)\nAnd from https://appcenter.ms/ dashboard, deploys were working up to last version at v231 on Dec. 4, about a week ago. Please tell me my hair pulling isn't just me and this is something server-side, maybe related to migration to App Center \ud83d\ude2d\n\n. Umm,\n$ code-push release-react gfung/WonderSwipe\nUsage: code-push release-react <appName> <platform> [options]\nOr did you mean: (gfung/WonderSwipe is the current app selected in appcenter)\n```\n$ appcenter codepush release-react -d Production\nDetecting ios app version:\nUsing the target binary version value \"1.0.1\" from \"ios/wonderswipe/Info.plist\".\nRunning \"react-native bundle\" command:\nnode node_modules/react-native/local-cli/cli.js bundle --assets-dest /var/folders/q2/nn87n125621g5t3h_n_nx4vw0000gn/T/code-push1171112-53420-19imw5v.21n8 --bundle-output /var/folders/q2/nn87n125621g5t3h_n_nx4vw0000gn/T/code-push1171112-53420-19imw5v.21n8/main.jsbundle --dev false --entry-file index.js --platform ios\nScanning folders for symlinks in /Users/garyfung/Documents/code/WonderSwipe/node_modules (23ms)\nScanning folders for symlinks in /Users/garyfung/Documents/code/WonderSwipe/node_modules (15ms)\nLoading dependency graph, done.\nbundle: start\nbundle: finish\nbundle: Writing bundle output to: /var/folders/q2/nn87n125621g5t3h_n_nx4vw0000gn/T/code-push1171112-53420-19imw5v.21n8/main.jsbundle\nbundle: Copying 1 asset files\nbundle: Done writing bundle output\nbundle: Done copying assets\nReleasing update contents to CodePush:\nSuccessfully released an update containing the \"/var/folders/q2/nn87n125621g5t3h_n_nx4vw0000gn/T/code-push1171112-53420-19imw5v.21n8\" directory to the \"Production\" deployment of the \"WonderSwipe\" app.\n```\nSo I did that. After, I rebuilt app in Xcode. Some relevant Xcode logs that has \"codepush\" in the lines, while my app is running on device in Production mode and attached to Xcode:\n2017-12-12 11:32:59.192725-0800 wonderswipe[7833:2776259] [Accessibility] ****************** Loading GAX Client Bundle ****************\n2017-12-12 11:33:05.021621-0800 wonderswipe[7833:2776259] \n[CodePush] Loading JS bundle from file:///var/containers/Bundle/Application/9137FF1E-62E3-4C22-B117-150D5D46BF05/wonderswipe.app/main.jsbundle\n2017-12-12 11:33:05.022 [info][tid:main][RCTCxxBridge.mm:213] Initializing <RCTCxxBridge: 0x1d01cf5a0> (parent: <RCTBridge: 0x1d00c0cb0>, executor: (null))\n...\n2017-12-12 11:33:08.008205-0800 wonderswipe[7833:2776259] [App] if we're in the real pre-commit handler we can't actually add any new fences due to CA restriction\n2017-12-12 11:33:08.131089-0800 wonderswipe[7833:2776259] [MC] Lazy loading NSBundle MobileCoreServices.framework\n2017-12-12 11:33:08.131169-0800 wonderswipe[7833:2776259] [MC] Loaded MobileCoreServices.framework\n2017-12-12 11:33:08.169 [info][tid:com.facebook.react.JavaScript] [CodePush] Checking for update.\n2017-12-12 11:33:08.169253-0800 wonderswipe[7833:2776576] [CodePush] Checking for update.\n2017-12-12 11:33:09.710 [info][tid:com.facebook.react.JavaScript] [CodePush] Downloading package.\n2017-12-12 11:33:09.709896-0800 wonderswipe[7833:2776576] [CodePush] Downloading package.\n2017-12-12 11:33:12.377086-0800 wonderswipe[7833:2776566] WF: === Starting WebFilter logging for process wonderswipe\nThen I detached app from Xcode and restarted it. Checking code-push deployment ls WonderSwipe and https://appcenter.ms/, same thing. No installs or downloads recorded on server, \"No installs recorded\".. @ruslan-bikkinin This is console logs I'm getting:\n10:36:37.656 console.js:32 [CodePush] Sync already in progress.\n10:36:38.255 console.js:32 [CodePush] undefined of undefined received.\n10:36:39.151 console.js:32 [CodePush] undefined of undefined received.\nPlease check if I've integrated your code correctly, since I used to specify options in codePush({options})(root_component), not options in a separate .sync call before or after that.\n```js\nclass WonderSwipe extends Component {\n  ...\n}\ncodePush.sync({\n      deploymentKey: '[KEY]',   // can't rely on CodePushDeploymentKey: $(CODEPUSH_KEY) in Info.plist?\n      checkFrequency: codePush.CheckFrequency.ON_APP_RESUME,\n      installMode: codePush.InstallMode.ON_NEXT_SUSPEND,   // https://github.com/Microsoft/react-native-code-push/pull/770\n      // installMode: codePush.InstallMode.ON_NEXT_RESUME,    // https://github.com/Microsoft/react-native-code-push/blob/master/docs/api-js.md#installmode\n      minimumBackgroundDuration: 600,    // code-push deployment ls WonderSwipe > Install Metrics should show N pending. To be installed after N seconds\n    },\n    (progress) => {\n      console.log(\"[CodePush]\", progress.receivedBytes + \" of \" + progress.totalBytes + \" received.\")\n    }\n  )\n  WonderSwipe = codePush()(WonderSwipe)\n. And in case you are wondering, I have in Info.plist:\nNSAppTransportSecurity\n\nNSAllowsArbitraryLoads\n\n\n```. @ruslan-bikkinin any status update would be much appreciated, like whether you think it really is a server side issue or you need more time to investigate? I just want to decide whether I should hold off my app releases or not while CodePush is broken. Much appreciated. Hallelujah!\n\nThis after upgrading other packages I have (moment, react-native-firebase, react-native-sentry), and as part of upgrades I nuked the ios/Pods directory and rebuilt it. And after rebuilding app in Xcode, it just started working with this in Xcode logs:\n[CodePush] Loading JS bundle from file:///var/containers/Bundle/Application/DBB97322-3648-4D92-AE6A-D87B49DDF1D8/wonderswipe.app/main.jsbundle\n...\n2017-12-18 16:22:08.718137-0800 wonderswipe[8885:2912327] [MC] Lazy loading NSBundle MobileCoreServices.framework\n2017-12-18 16:22:08.718205-0800 wonderswipe[8885:2912327] [MC] Loaded MobileCoreServices.framework\n2017-12-18 16:22:08.778 [info][tid:com.facebook.react.JavaScript] [CodePush] Sync already in progress.\n2017-12-18 16:22:08.777925-0800 wonderswipe[8885:2912479] [CodePush] Sync already in progress.\n2017-12-18 16:22:11.025 [warn][tid:com.facebook.react.CodePushQueue][RCTEventEmitter.m:54] Sending `CodePushDownloadProgress` with no listeners registered.\n2017-12-18 16:22:11.025619-0800 wonderswipe[8885:2912486] Sending `CodePushDownloadProgress` with no listeners registered.\n2017-12-18 16:22:11.062185-0800 wonderswipe[8885:2912474] WF: === Starting WebFilter logging for process wonderswipe\n2017-12-18 16:22:11.062231-0800 wonderswipe[8885:2912474] WF: _userSettingsForUser mobile: {\n    filterBlacklist =     (\n    );\n    filterWhitelist =     (\n    );\n    restrictWeb = 1;\n    useContentFilter = 0;\n    useContentFilterOverrides = 0;\n    whitelistEnabled = 0;\n}\n2017-12-18 16:22:11.062280-0800 wonderswipe[8885:2912474] WF: _WebFilterIsActive returning: NO\n2017-12-18 16:22:11.065051-0800 wonderswipe[8885:2912483] \n[CodePush] Applying full update.\nEmphasis on the last line: [CodePush] Applying full update. when before, Xcode logs would end on a [CodePush] Downloading package. line without further logs filtered on [CodePush].\nTested with deploys via both forms:\nappcenter codepush release-react -d Production\nand\ncode-push release-react WonderSwipe ios --outputDir ../WonderSwipe-bundle -d Production --des \"\"\nConsidering the timing of both @ovaris and I having pushed versions downloading/applying in our apps again today. A confirmation from Microsoft that this has been a server issue and is now fixed would be great?. @erlendfh in my Podfile, I only have a single target reference in form of target '<project-name>' do, so I don't believe this is the issue. Also, prior CodePush versions had no issue with cocoapods.\n@ruslan-bikkinin with that said re: prior CodePush versions had no similar issues, even when It's my standard practice to unlink and relink to ensure package is properly linked after update.\n\nWhat's changed in CodePush since 5.1.3-beta that may have caused this breakage?\nIf unlink is not supported as you say, some education appreciated for me then. Do I just yarn add <package>@<version> to update the package, and no need to be concerned about the package linking? Or is there something else to do after the yarn add?. Indeed, I haven't seen this before RN 0.50, and I see it in 2 packages: react-native-code-push and react-native-blur. I upgraded both now and without any relinking, my app works fine. So I'm leaving this alone for now, and the issue is like you said, RN's to fix.. Please see https://github.com/Microsoft/react-native-code-push/issues/1072#issuecomment-350608180. Is there any way I can completely unlink and uninstall react-native-code-push, so I can do a clean reinstall without bumping into Cannot read property 'match' of undefined? The fact that I can't push any new CodePush version that gets reflected in my app tells me CodePush is just not linked or working in my app.. @erlendfh thanks for your suggestion. But what is / how do you determine the \"right insertion point\" for the # Add new pods below this line line?\n\nThis is my /ios/Podfile:\n```ruby\nUncomment the next line to define a global platform for your project\nplatform :ios, '9.0'\ntarget '[APP]' do\n  # Uncomment the next line if you're using Swift or would like to use dynamic frameworks\n  # Can't use with Firebase pod? https://github.com/invertase/react-native-firebase/issues/252#issuecomment-316340974\n  # use_frameworks!\npod 'Firebase/Core'\n  pod 'RNFirebase', :path => '../node_modules/react-native-firebase'    # http://invertase.io/react-native-firebase/#/installation-ios\n  # pod \"Yoga\", :path => \"../node_modules/react-native/ReactCommon/yoga\"   # RN 0.48 and below\n  pod 'yoga', :path => '../node_modules/react-native/ReactCommon/yoga'   # RN 0.49+\n  # https://facebook.github.io/react-native/docs/integration-with-existing-apps.html\n  pod 'React', :path => '../node_modules/react-native', :subspecs => [\n    'BatchedBridge', # Required For React Native 0.45.0+?\n    'Core',\n    'DevSupport', # Include this to enable In-App Devmenu if RN >= 0.43    fixes https://github.com/facebook/react-native/issues/15775#issuecomment-327971300\n    'RCTText',\n    'RCTNetwork',\n    'RCTWebSocket', # needed for debugging\n    # Add any other subspecs you want to use in your project\n  ]\n  # [OPTIONAL PODS] - comment out pods for firebase products you won't be using.\n  # pod 'Firebase/AdMob'\n  # pod 'Firebase/Crash'\n  # pod 'Firebase/DynamicLinks'\n  pod 'Firebase/Auth'\n  pod 'Firebase/RemoteConfig'\n  pod 'Firebase/Database'\n  pod 'Firebase/Firestore'\n  pod 'Firebase/Storage'\n  pod 'Firebase/Messaging'    # Need setup: http://invertase.io/react-native-firebase/#/installation-ios?id=_3-cloud-messaging-optional\n  pod 'Firebase/Performance'\n# new CocoaPods 1.2.1\n  # [!] Automatically assigning platform ios with version 8.3 on target [APP] because no platform was specified. Please specify a platform for this target in your Podfile. See https://guides.cocoapods.org/syntax/podfile.html#platform.\n  platform :ios, '8.3'\nend\n``. Interesting!react-native link react-native-code-pushnow inserts a new linepod 'CodePush', :path => '../node_modules/react-native-code-push'below# Add new pods below this line. Andlink` succeeded.. I guess this is https://github.com/facebook/react-native/issues/13160 which is still an issue after all this time.... ",
    "almadsen": "I was still getting this, my work around for it was/is:\n\nI first tried putting the search link in the target but that still got me a file not found, but in the project part it stoped giving me the error.. ",
    "neopit": "I have a similar error but now with a POD.\nThe trick with $(BUILD_DIR)/Release$(EFFECTIVE_PLATFORM_NAME) seems to work but when there is a dependency that does not work anymore in particularly with GoogleToolboxForMac.\nI tried to make some change on the PODS_CONFIGURATION_BUILD_DIR with the value $PODS_BUILD_DIR/Release$(EFFECTIVE_PLATFORM_NAME) but that does not work !\nSomeone as a solution when we use a POD ?\n. ",
    "jinxac": "@neopit not working with Pods on staging.. tried a lot. @sergey-akhalkov changing Release to Staging under archives messes up with the Pod Dependencies. Pods are installed in Staging folder instead of Release folder but the linking occurs to Release folder which throws error ld: framework not found for pod files.. @sergey-akhalkov doesnt look the like the same issue but my BuildConfiguration is still Release under Archives section of schemes. I will try making it Staging and creating a build once.. Hey @sergey-akhalkov  i tried changing that Release to Staging but that breaks my pods configuration and I get error ld: framework not found Pods_wlv1 and this is coming specifically in staging, release and debug seem to be working fine. . @sergey-akhalkov Can you please me tell me what do you need from my end? Logs/More Info would love to share the necessary info . @sergey-akhalkov looks like there is something wrong with the staging environment itself. So here is what I tried doing:-\n\nInterchanged the staging and release key.\nBuild the archive using my release scheme (which contains staging key itself) and uploaded to app store as beta build.\n\nIn this case I was able to see the changes.\nCan you please let me know if I am missing something. @sergey-akhalkov  I have shared some piece of code above. Can you please tell me once what other information is required? I will share accordingly :) . @sergey-akhalkov setup works fine the steps linked you shared above. Yes you are right that it is not receiving updates when built with staging schemes with Pods. \nWhen I change Release to Staging under scheme Archives it starts to throw error ld: Frameworks not found(these frameworks are specific to Pods) during Linking.I tried to dig in a bit further and saw that under BuildProducts folder I have 2 folders Release-ios and Staging-ios. My entire packages and code is under Release-ios as expected but my Pod specific packages go under Staging-ios folders. Now linker tries to link pod packages from Release-ios folder which throws error. \nNow, When I change Staging to Release under staging scheme Archieves it  works fine and build is created but on testflight(beta) build code push changes are not reflected and under code-push deployment app-name ls -k I see no installs recorded. @sergey-akhalkov thanks for the reply.. yeah still experiencing the same issue. @sergey-akhalkov any updates?. @sergey-akhalkov Thanks a lot for your response. Let me try this out once. . @sergey-akhalkov thanks a ton for sharing.. i am finally back to integrating this to my project again :D .. I tried the exact configuration you mentioned but when i upload the binary to itunes after building with staging scheme  it throws error on itunes saying that the build is invalid (Invalid Bundle - One or more dynamic libraries that are referenced by your app are not present in the dylib search path.) . It works fine release scheme though. Have u faced this issue? . @sergey-akhalkov looks like the pod libraries are getting copied into Staging folder instead of release which leads to https://github.com/facebook/react-native/issues/11813#issuecomment-331368709\n/Users/harkirat/Library/Developer/Xcode/DerivedData/wlv1-grovuwlrhzpjbvenlreejvbtlwol/Build/Intermediates.noindex/ArchiveIntermediates/wlv1 Staging/BuildProductsPath\ntests-MBP:BuildProductsPath harkirat$ ls\nRelease-iphoneos    Staging-iphoneos\ntests-MBP:BuildProductsPath harkirat$\ntests-MBP:BuildProductsPath harkirat$ cd Staging-iphoneos/\ntests-MBP:Staging-iphoneos harkirat$ ls\nGTMOAuth2       Mixpanel        QBImagePickerController\nGTMSessionFetcher   Pods_wlv1.framework RSKImageCropper\nGoogleToolboxForMac Protobuf        nanopb\ntests-MBP:Staging-iphoneos harkirat$\ntests-MBP:BuildProductsPath harkirat$ cd Release-iphoneos/\ntests-MBP:Release-iphoneos harkirat$ ls\n49D27CAF-3566-30BB-9FF1-63E20D4D5231.bcsymbolmap    libRCTMaterialKit.a\n57C7F55D-A2AE-30F3-A6EA-9F38A1651329.bcsymbolmap    libRCTNetwork.a\n5maFL9                          libRCTSettings.a\nB00A891C-B9FD-3621-85B1-D7ACEEB3888C.bcsymbolmap    libRCTText.a\nB881CB00-A637-3C8C-90B1-36E49E358AA1.bcsymbolmap    libRCTVibration.a\nGeneratedInfoPlistDotEnv.h              libRCTWebSocket.a\nHhe8NH                          libRNDeviceInfo.a\nQBImagePicker.framework                 libRNFIRMessaging.a\nQBImagePicker.framework.dSYM                libRNFS.a\nRSKImageCropper.framework               libRNFetchBlob.a\nRSKImageCropper.framework.dSYM              libRNIntercom.a\ninclude                         libRNMixpanel.a\nlibBVLinearGradient.a                   libReact.a\nlibBugsnagReactNative.a                 libReactNativeConfig.a\nlibBugsnagStatic.a                  libcxxreact.a\nlibCodePush.a                       libdouble-conversion.a\nlibRCTActionSheet.a                 libimageCropPicker.a\nlibRCTAnimation.a                   libjschelpers.a\nlibRCTCamera.a                      libthird-party.a\nlibRCTFBSDK.a                       libyoga.a\nlibRCTGeolocation.a                 wlv1.app\nlibRCTImage.a                       wlv1.swiftmodule\nlibRCTLinking.a\nI am pretty aware that this is not code push issue but any help would really be appreciated :) . Thanks in advance\n. @sergey-akhalkov i tried using https://github.com/blargity/react-native-schemes-manager for first creating a staging environment and then a taking a beta build with staging configuration. Looks like its working fine now :). Let me give a try now by changing code push keys. @sergey-akhalkov  with react-native-schemes-manager I was easily able to integrate this. If someone needs any help regards integrations and multiple environments on iOS would love to help.. @rodperottoni  i too have cocoapods in  my project, but it is working fine. What error are using exactly?\nCan you share your profiles and package.json once? . ",
    "xxsnakerxx": "Try to add Staging configuration to CodePush and React projects... works for me. ",
    "eAAwan": "@sergey-akhalkov Thanks man it works. ",
    "jameslcj": "I'm sorry... I have known... because I forgot to invoke the CodePush.notifyAppReady(); when I start  new version first time... \nthank you!. ",
    "Fantasim": "Yes sorry for late answer, i've fixed problem with you help, thanks. ",
    "vedovato": "Hey @silhouettes thanks for your reply. No, it isn't wrapper but it's \"working\".\nCouple of questions:\n- Why does it work without being wrapped? \n- How do i wrap it in a wix-react-native-navigation project since it doesn't use regular class structure?. Well, i think it didn't @silhouettes. Could you take a look at my code? I think everything is ok and no errors/warnings are shown: Btw, it is working fine in Android and just iOS roll-back as mentioned.\nHere's the actual code: https://codepaste.net/ehp1a1\nPs: I tried to call codepush from decorator and also pasted above a method version which's commented inside the componentDidMount.. Yeah, i do @sergey-akhalkov but i think it's something with wix-react-native-navigation not codepush itself. I'm not being able to wrap my root component... Hey, ok i'd appreciate that @sergey-akhalkov. Here goes the code snapshot.\nThank you!. I'll have a look into it soon, @max-mironov @sergey-akhalkov. Sorry for delaying. . Last week i was in trouble with apple certificates so i couldn't test it properly in my phone and this is very important to us so i'll try my best to feedback you very soon. Thank you for pinging me again, @max-mironov. Reiterating, i'll be able to only see this tomorrow in the afternoon :/. ",
    "leimonio": "@sergey-akhalkov I'm currently facing this issue no matter what configuration I have tried.\nReact Native: 0.45.1\nRN Code Push: 3.0.1-beta\nAfter releasing a new version in Staging, there is no way I can update the application version since it's always rolling back with the debug message: \n[CodePush] Checking for update.\n[CodePush] An update is available, but it is being ignored due to having been previously rolled back.\n[CodePush] App is up to date.\nI've also tried the solution @grigored has proposed, but neither this approach has helped update the application. \nDo you have any idea how can I resolve this issue?\nMy root component is like:\n```\nlet codePushOptions = {\n  installMode: codePush.InstallMode.ON_NEXT_RESUME,\n  checkFrequency: codePush.CheckFrequency.ON_APP_RESUME\n}\nclass Root extends Component {\n  componentDidMount() {\n    codePush.sync()\n  }\n  codePushDownloadDidProgress(progress) {\n    console.log(progress.receivedBytes + ' of ' + progress.totalBytes + ' received.')\n  }\n  render() {\n    return \n  }\n}\nRoot = codePush(codePushOptions)(Root)\nexport default Root\n``\n. @grigored also tried commenting out thecomponentDidMount()but the same problem occured to me. \ud83d\ude1e. @sergey-akhalkov @grigored I've also tried a pure react-native project with just react-native and react-native-code-push as dependencies, but the exact same error occurs. I'm running both apps withreact-native run-ios` using packager.. @sergey-akhalkov yeah sure, what i did is to actually create a new RN application. \n\nreact-native init TestingCodePush && cd TestingCodePush\ninitialised the app with CodePush code-push app add TestingCodePush-iOS ios react-native (being already authorised)\nnpm install --save react-native-code-push (v5.0.0-beta, my actual project is using v3.0.1-beta)\nthen I've modified index.ios.js to the following:\n\n```\nimport React, { Component } from 'react';\nimport {\n  AppRegistry,\n  StyleSheet,\n  Text,\n  View\n} from 'react-native';\nimport codePush from \"react-native-code-push\";\nexport default class TestingCodePush extends Component {\n  render() {\n    return (\n      \n\n          Welcome to React Native!\n        \n\n          To get started, edit index.ios.js\n        \n\n          Press Cmd+R to reload,{'\\n'}\n          Cmd+D or shake for dev menu\n        \n\n    );\n  }\n}\nTestingCodePush = codePush(TestingCodePush)\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#F5FCFF',\n  },\n  welcome: {\n    fontSize: 20,\n    textAlign: 'center',\n    margin: 10,\n  },\n  instructions: {\n    textAlign: 'center',\n    color: '#333333',\n    marginBottom: 5,\n  },\n});\nAppRegistry.registerComponent('TestingCodePush', () => TestingCodePush);\n```\n\nrun the application react-native run-ios -> opened the app in the emulator -> enable js remote debugging\nreleased to the Staging env with code-push release-react TestingCodePush-iOS ios\nrefresh app with CMD + R -> watched logs for checking updates and downloading updates in the chrome debugger\nshut down the application, then reopen it in order to get the new update, but the rollback error occurs instead\n[CodePush] Checking for update.\n[CodePush] An update is available, but it is being ignored due to having been previously rolled back.\n[CodePush] App is up to date.\n\nLet me know if this helps.\n. @sergey-akhalkov Thanks for the reference, I've missed this note from the official docs.\nI cannot run the application that way, it seems like it doesn't load anything. I've also tried without packager and it runs properly but because I cannot debug it in browser I'm not sure if the update has been completed properly. After running code-push deployment history TestingCodePush-iOS Staging, the last version deployed it logs No installs recorded. \nIs there any other way I can try the Staging deployed application?. ",
    "Brian-Kaplan": "I thought maybe the .gradle/cache was the issue here but it is not. The last released version in Maven Repo is 0.20.1\nNow understand what's going on here. For some reason this definition in my projects build.gradle\n```\nmaven {\n  // All of React Native (JS, Android binaries) is installed from npm\n  url \"$rootDir/node_modules/react-native/android\"\n}\n\n```\nis not finding the jar. I have double - triple checked this path and its correct...\nSo this \ncompile \"com.facebook.react:react-native:+\" // From node_modules.\nis defaulting to the Maven Repo 0.20.1 instead of my local node_modules installed jars. I have verified that that the local version i have in node_modules is 0.41.2\nWhat am i missing here...?. Wrong repo... my bad. ",
    "Micjoyce": "react-native-code-push version: v1.17.0-beta\nreact-native version: 0.40.0\nI have same problem at ios and android, my local html file and image  all can't load and rendering.\nThere is my build bundle command: \nreact-native bundle --platform ios --entry-file index.ios.js --bundle-output ./bundles/index.ios.bundle --dev false\nrelease new version to code push command: \ncode-push release AppName-ios ./bundles/index.ios.bundle 1.0.0  --description \"1.test. \" --mandatory true\nThere is webview load from local html and got error.\n<WebView\n          source={this.getTemplate()}\n />\n\nIf I use \ncode-push release-react MyApp-iOS ios -m --description \"Modified the header color\"\nall thing will be ok! . ",
    "pcarion": "I also have the exact same issue issue described by ivpusic: after a code-push update of the app, the application is missing quite a few images using a source using require('path'). Once we navigate away from those broken screens and come back, the images appear again. This makes it quite impossible to use code-push at this stage then.\nRN version: 0.43.3\ncode-push: 1.12.6-beta  (I will update that version, but wanted to report that problem first).. ",
    "cmoody": "react-native-code-push version: v2.0.1-beta\nreact-native version: 0.43.0\nI am having similar issues and thought I would toss in a few thoughts to possibly help get to the heart of the issue.\nOne thing I would suggest is tossing in what items you are using for codePush.sync.  I am running the following in componentDidMount on my entry component.\ncodePush.sync({\n      installMode: codePush.InstallMode.IMMEDIATE\n    });\nWhen you hard close the app and re-open is when you see the issue happen.  If you resume the app theres no issue since the component didnt mount again it doesnt run sync.  If you remove sync altogether is also starts to work as expected.  My theory is that calling sync is blocking while it either checks for an update or syncs the assets.  Not really sure how to go about debugging that (iOS noob).  I looked at the sample app and the reason it may be hard to duplicate is those syncs are being called when the action happens rather than every time the component is mounted.  Thats an assumption on my part not knowing if you did it on componentDidMount or not but feel free to correct if you did @sergey-akhalkov \nI will try and see if I can get some free time in the next day or two and post up a version of the example app similar to how I am using it.. Ive tested that project on iOS and it works perfect.  All images load as expected relatively fast.  I took that project and changed it to the following to add CodePush.\nreact-native: 0.43.3\nreact-native-code-push: 2.0.2-beta\n```\nimport React, { Component } from 'react';\nimport {\n  AppRegistry,\n  StyleSheet,\n  Image,\n  Text,\n  View\n} from 'react-native';\nimport codePush from 'react-native-code-push';\nexport default class rnapp extends Component {\n  componentDidMount() {\n    codePush.sync({\n      installMode: codePush.InstallMode.IMMEDIATE\n    });\n  }\nrender() {\n    return (\n      \n\n\n          ...\n          \n\n\n    );\n  }\n}\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#00ff00',\n  },\n  welcome: {\n    fontSize: 20,\n    textAlign: 'center',\n    margin: 10,\n  },\n  instructions: {\n    textAlign: 'center',\n    color: '#333333',\n    marginBottom: 5,\n  },\n  image: {\n    width: 25,\n    height: 25,\n    margin: 3,\n  }\n});\nAppRegistry.registerComponent('rnapp', () => rnapp);\n```\nTwo things changed.\n1) I added CodePush to the componentDidMount\n2) Changed the background color to green\nThe issue I noticed was after I pushed an update to CodePush but its interesting to note that once I added CodePush to the componentDidMount it changed the way the initial load happens.  In the base example it loads the screen and you see each image load individually.  However once CodePush was introduced it showed a white screen for a few seconds before displaying the green background and all of the images already loaded.\nThe next step is pushing changes to the app.  I added 100 new images and changed the background color back to #F5FCFF.\nI then ran the following 2 commands. (I know I know I could just deploy to Staging)\ncode-push release-react rnapp ios -m --description \"Test deploy\"\ncode-push promote rnapp Staging Production -r 100%\nAfter doing that the first load it did the white screen again.  Then it showed the green background with the 100 images.  Then it refreshed and changed the background with updated images and no stutter.  I then hard closed the app and and opened it.  Everything worked as expected.  There was no white screen, no stutter in loading, nothing...I am a little stumped.\nI am going to try and do 2 new things later today.\n1) Use images loaded from an external resource.\n2) Re-organize into subfolders to be more similar to actual app structure.\nI have no idea if those will impact anything but we will see.. Hey @sergey-akhalkov,\nI tested out using external images to see if the network requests caused some impact.  It didnt seem to impact the load time really at all. \nIn my application (non test one) I have removed CodePush which has slightly increased load time but it looks like there is another issue going on.  I think I need to look at some network request clean up and when components are loading to see if thats messing things up.\nSo for me I think this issue isnt a CodePush issue.\nThanks for the help.. ",
    "danieldelouya": "Im having same issue. Without code push i get no white flashes. Soon as i enable it i get white flashes after the splash screen and when i navigate to a new screen.. Hey guys. Sorry for the delay. \nI had to uninstall codepush for now as it was causing bad user experience while starting up. \nI will try to make time to provide a demo to highlight the issue shortly. \n. ",
    "freddy24": "here is my full content of index.android.js and MainApplication.java\n```\nimport React, { Component } from 'react';\nimport { Provider } from 'react-redux'\nimport {\n    AppRegistry,\n    Text,\n    View,\n    Alert\n} from 'react-native';\nimport Home from './src/modules/home';\nimport Base from './src/modules/base';\nimport configureStore from './src/configureStore'\nimport codePush from \"react-native-code-push\"\nclass nativeappIndex extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        };\n    }\n    componentDidMount(){\n         codePush.sync();\n    }\n    render() {\n        const store = configureStore();\n        const {initData,queryInfo} = this.props;\n        return (\n            \n\n\n\n\n        );\n    }\n}\nMainApplication.java\nprivate static final MyReactPackage packages = new MyReactPackage();\npublic static MyReactPackage getPackages() {\n    return packages;\n}\n\nprivate final ReactNativeHost mReactNativeHost = new ReactNativeHost(this) {\n\n    @Override\n    protected boolean getUseDeveloperSupport() {\n        return BuildConfig.DEBUG;\n    }\n\n    @Override\n    protected List<ReactPackage> getPackages() {\n        return Arrays.asList(\n                new MainReactPackage(), packages,new CodePush(\"my deploymentkey\",MainApplication.this,BuildConfig.DEBUG);\n        );\n    }\n};\n\n@Override\npublic ReactNativeHost getReactNativeHost() {\n\nreturn mReactNativeHost;\n    }. @sergey-akhalkov thank you for your reply.\nI change the code as below:\nprivate final ReactNativeHost mReactNativeHost = new ReactNativeHost(this) {\n    @Override\n    protected boolean getUseDeveloperSupport() {\n        return BuildConfig.DEBUG;\n    }\n    @Nullable\n    @Override\n    protected String getJSBundleFile() {\n        return CodePush.getJSBundleFile();\n    }\n    @Override\n    protected List<ReactPackage> getPackages() {\n        return Arrays.asList(\n                new MainReactPackage(),new CodePush(\"my deploymentkey\",MainApplication.this,BuildConfig.DEBUG);//remove packages\n        );\n    }\n};\n\n```\nstill have this problem.. I got this message:[CodePush] The CodePush module doesn't appear to be properly installed. Please double-check that everything is setup correctly.\nI install code push in my project with Android - Manual:\nmy module named \"passenger\",not \"app\"\n1.include ':passenger', ':react-native-code-push'\nproject(':react-native-code-push').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-code-push/android/app')\n2.dependencies {\n    ...\n    compile project(':react-native-code-push')\n}\n3....\napply from: \"../../node_modules/react-native/react.gradle\"\napply from: \"../../node_modules/react-native-code-push/android/codepush.gradle\"\n...\nIs there any problem with my install steps?\n. @sergey-akhalkov @moaxaca thank you very much!\nI find my problem. my activity is not extends ReactActivity, \n@Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        ReactRootView mReactRootView = new ReactRootView(this);\n        mReactInstanceManager = ReactInstanceManager.builder()\n                .setApplication(MainApplication.getInstance())\n                .setBundleAssetName(\"index.android.bundle\")\n                .setJSMainModuleName(\"index.android\")\n                .addPackage(new MainReactPackage())\n                .addPackage(MainApplication.getPackages())\n                .addPackage(new CodePush(\"my key\", getApplication(), BuildConfig.DEBUG))//I didnot add this code before.\n                .setJSBundleFile(CodePush.getJSBundleFile())\n                .setUseDeveloperSupport(BuildConfig.DEBUG)\n                .setInitialLifecycleState(LifecycleState.RESUMED)\n               .build();\n        mReactRootView.startReactApplication(mReactInstanceManager, \"loanapplyReact\", bundle);\n        setContentView(mReactRootView);\n    }\n.addPackage(new CodePush(\"my key\", getApplication(), BuildConfig.DEBUG))//I didnot add this code before.\nproblem fixed! thank you again.\n. I try to run\ncode-push app add MyApp ios react-native\nthen these message comes:\n```\nUsage: code-push app add \nOptions:\n  -v, --version  Show version number  [boolean]\nExamples:\n  app add MyApp  Adds app \"MyApp\"\n``\nstill doesn't work.. @sergey-akhalkov thank you so much . I removed  it and re-install. then runcode-push app add MyApp ios react-native`\nit works. thank you !. ",
    "moaxaca": "Had the same issue in IOS. After doing react-native link react-native-code-push had to clean then rebuild. It appears to be an install issue. . ",
    "MrBr": "Hey @sergey-akhalkov, sorry I've missed the reply. \nIt's been a while since I've faced the problem, so I'll need to dig in if I do not provide enough info.\nAs much as I remember, the problem is that the Android Code Push implementation doesn't know how to load later downloaded JS bundle if the default bundle (the one bundled in the app binary) is not loaded with Code Push as well.\nWhen you do not use Code Push to load default bundle (you leave it to the RN), but only to load the updates sent to the Code Push server, Code Push native part doesn't have defined mAssetsBundleFileName and when an update comes it doesn't know what is the bundle file name, it has null value.\nI have a case where I use 2 RN instances (Views). One instance always has the same bundle and the other loads bundle dynamically with the Code Push. Problem is that Code Push always looks into the same setAssestsBundleFileName and as I do not use Code Push to load the bundle on the start setAssestsBundleFileName stays undefined (null).\nWhat I wanted to say is that if sync method (native Android implementation) is checking for the setAssestsBundleFileName in the update, it would be all right if it could also change it. It makes sense that new bundles can have different main module names.\nFor example, maybe new bundle (update) will not have both index.ios and index.android but only index.js and current implementation doesn't allow it. Or as in my case, I use Code Push to dynamically load independent bundle afterward for specific RN instance and I can not easily define setAssestsBundleFileName.\nIf you look how setAssestsBundleFileName is defined you will see that there is no setter but it is integrated into getJSBundleFileInternal and this implementation makes it hard to change it.\nDoes it help?\nDidn't catch the time to write any code but if it is needed I will find some time.. ",
    "eladmoshe": "Thank you @sergey-akhalkov!\nHaving the ability to sign the code and have the client SDK decline any unsigned update is crucial IMHO for this type of service. I believe that otherwise any enterprise security audit will automatically fail.. ",
    "merlinpatt": "@sergey-akhalkov, I know this is old but I can't much else on React Native code push security concerns so I'll ask here.\nWhat's to prevent a malicious developer from creating a boring app and then later pushing out code that mirrors a bank app or another valuable app?. ",
    "tlvenn": "Just to give some perspective on how this can affect end users, there are multiple CI which will only ship the latest revision for a given Android SDK major version. For example, Bitrise is including 23.0.3 but not 23.0.2 or 23.0.1\nRight now because of this, our builds are failing unless we manually pull the deprecated 23.0.1. By upgrading code push to the latest revision (23.0.3), it fix this issue all together.. @buptkang any chance to merge that soon ? Thanks !. ",
    "byk04712": "I solved this problem. react-native-code-push has SSZipArchive library.  so I removed pod 'SSZipArchive', '~>1.2' from Podfile. and added $(SRCROOT)/../node_modules/react-native-code-push/ios/CodePush/SSZipArchive (set to recuirsive)  to Build Setting -> Header Search Paths. them clear & build. It's works. I just upgrade Xcode9.2 to Xcode9.4 and It's working.. ",
    "adalvi13": "I am still facing same issue, any other solution?. ",
    "dannyyaou": "it seems to be ^1.14.6-beta\n. Its seems like the version that can't get the next version is the first version with react-native-code-push@1.17.0-beta...\nHmm This line seems confused... Can you understand me lol. Maybe it's related to this commit?\nResolve CodePush.h for new iOS apps created with RN 0.40 (#665)\n\nchange of scripts/postlink/ios/postlink.js\nvar codePushHeaderImportStatement =#import \"CodePush.h\";\nbecame\nvar codePushHeaderImportStatement =#import ;. But in the simulator. It still works like a charm. @silhouettes\n1. Nope, Just handling the situation that SyncStatus is 7 with opening that page I mentioned above, and there's no button to hide that page.\n2. its happening on many ios device including mine, and the version of my device is 10.2.1.\n3. Since debugging with released version app is impossible ( is that true? ), the only thing I know is that no download progress was being reported, and I'd waited for a long time, and the download never completes?\nWondering if it's releated to this issue: https://github.com/Microsoft/react-native-code-push/issues/695\nJust guessing\nBTW, When I mentioned the version which is the first version with react-native-code-push@1.17.0-beta, that means the bundle version that uploaded to codepush server, but native code on the device is still 1.14.6-beta, I guess that's cause of the problem... I tried to recreate the problem today with simulator and Staging development key\nand I got this error log\n[CodePush] this._nativeModule.addListener is not a function\nI mean, so the simulator had the same problem this time.... Maybe its related to change on package-mixins.js\nwhich this line of code: \ndownloadProgressSubscription = DeviceEventEmitter.addListener(...\nhad changed to be\ndownloadProgressSubscription = codePushEventEmitter.addListener(...\nI think it's only about the progress part, but the download can't complete either. Yap, That's a mistake that I didn't handle those state.\n@silhouettes \nWhen I recreate the error on my device\nSyncStatus is first to be 5 and then 7 and then 3. Hello, Sorry for replying so late!\nyes ! reinstall last version do work! . ",
    "cosmith": "Hi, we have the same deployment key on both apps.\nWe managed to find the actual error by reinstalling the app from the store on the device where it wasn't working:\n02-23 14:48:14.856 15741 15757 W System.err: com.microsoft.codepush.react.CodePushInvalidUpdateException: Update is invalid - A JS bundle file named \"index.android.bundle\" could not be found within the downloaded contents. Please check that you are releasing your CodePush updates using the exact same JS bundle file name that was shipped with your app's binary.\n02-23 14:48:14.857 15741 15757 W System.err:    at com.microsoft.codepush.react.CodePushUpdateManager.downloadPackage(CodePushUpdateManager.java:239)\n02-23 14:48:14.857 15741 15757 W System.err:    at com.microsoft.codepush.react.CodePushNativeModule$3.doInBackground(CodePushNativeModule.java:232)\n02-23 14:48:14.857 15741 15757 W System.err:    at com.microsoft.codepush.react.CodePushNativeModule$3.doInBackground(CodePushNativeModule.java:226)\n02-23 14:48:14.868 15741 15787 I ReactNativeJS: [CodePush] An unknown error occurred.\n02-23 14:48:14.868 15741 15787 I ReactNativeJS: [CodePush] Update is invalid - A JS bundle file named \"index.android.bundle\" could not be found within the downloaded contents. Please check that you are releasing your CodePush updates using the exact same JS bundle file name that was shipped with your app's binary.. Ok I think we figured it out: since we deploy on the same key, and we deployed iOS right after Android in both cases, it worked for 3 minutes (where we tested it on our devices) and then stopped working.. @max-mironov thanks! I think this should be a lot more visible in the docs, not buried in a note like it is right now. Maybe change the message to:\nWARNING: Using the same app for iOS and Android will cause installation exceptions because the CodePush update package produced for iOS will have different content from the update produced for Android.. Sure, thanks for your help!. ",
    "amourya-systango": "Did your library tested with Jest?\nOn Mon, Feb 27, 2017 at 2:17 PM, max-mironov notifications@github.com\nwrote:\n\nHi @amourya-systango https://github.com/amourya-systango, could you\nplease clarify which platform are you in?\nIf you are on Android do you setup it as it is described in the\nguidelines? Is your MainApplication class extended by Application class?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/718#issuecomment-282660586,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ASQpO8IVe6cpZ_yj6C2vSjOTVC7-yF-vks5rgo28gaJpZM4MKEf0\n.\n. It sounds good, if it is working with npm test. I will test it at my end\nsoon and reply you.\n\nThank You\nOn Fri, Mar 24, 2017 at 1:26 PM, max-mironov notifications@github.com\nwrote:\n\nHi @kevinhylant https://github.com/kevinhylant, sorry for slow response.\nCould you please be more specific about your repro steps?\nI've tried the following:\n\ninit new react-native app with react-native init AppName\nadded latest react-natvie-code-push-plugin and also dependencies\n   from above with yarn\nlinked react-native-code-push-plugin with react-native link\n   react-native-code-push command\nwas able to run npm test without any error and also react-native\n   run-ios works well.\n\nSo can you have a look at this and provide some more info about your use\ncase (or exact reproduction steps)?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/718#issuecomment-288956323,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ASQpO4MM771NLKXGpm0lUNebZEFBJmBlks5ro3cZgaJpZM4MKEf0\n.\n. Hi Max,\n\nI will look into it let me know what I have to do? Am I test it with jest?\nOn Mon, Apr 10, 2017 at 11:13 AM, max-mironov notifications@github.com\nwrote:\n\n@amourya-systango https://github.com/amourya-systango - just a friendly\nping :)\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/718#issuecomment-292854834,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ASQpO43r9_A25otvDhLdbrJ2jpSBfRkJks5rucGXgaJpZM4MKEf0\n.\n\n\n-- \nRegards,\nAkhilesh Mourya\nAssociate Technical Architect\nhttp://www.systango.com/\n. Sure Max, give me some time I will let you know that I'm experiencing the\nissue again or not.\nThanks!\nOn Mon, Apr 10, 2017 at 3:40 PM, max-mironov notifications@github.com\nwrote:\n\nHey @amourya-systango https://github.com/amourya-systango, I just\nwanted to verify if you still experience the issue you have initially\ncreated. If you don't see any issues let us know if we can close it for now.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/718#issuecomment-292907131,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ASQpOw93B5oUedfR9GCBpokHvFtDiWX3ks5rugAjgaJpZM4MKEf0\n.\n\n\n-- \nRegards,\nAkhilesh Mourya\nAssociate Technical Architect\nhttp://www.systango.com/\n. ",
    "kevinhylant": "I am experiencing the same issue on iOS with the following dependencies installed via yarn. \nCurrently, our react-native repo is separate from each our iOS & Android repos & I am seeing this error only when running my tests with Jest.\nHappy to provide additional information to help you debug!\n\"dependencies\": {\n    \"@classpass/dal\": \"3.0.27\",\n    \"global\": \"^4.3.1\",\n    \"gulp\": \"3.9.1\",\n    \"gulp-bump\": \"2.1.0\",\n    \"gulp-exec\": \"2.1.2\",\n    \"gulp-git\": \"1.7.2\",\n    \"gulp-shell\": \"0.5.2\",\n    \"gulp-util\": \"3.0.7\",\n    \"lodash\": \"4.17.4\",\n    \"react\": \"15.4.2\",\n    \"react-native\": \"0.42.0\",\n    \"react-native-code-push\": \"1.17.2-beta\",\n    \"react-native-i18n\": \"1.0.0\",\n    \"react-redux\": \"5.0.3\",\n    \"redux\": \"3.4.0\",\n    \"redux-thunk\": \"2.0.1\",\n    \"run-sequence\": \"1.2.1\",\n    \"uuid\": \"3.0.1\",\n    \"yargs\": \"5.0.0\"\n  },\n  \"devDependencies\": {\n    \"babel-jest\": \"18.0.0\",\n    \"babel-polyfill\": \"6.23.0\",\n    \"babel-preset-react-native\": \"1.9.1\",\n    \"chai\": \"3.5.0\",\n    \"danger\": \"^0.11.5\",\n    \"enzyme\": \"2.7.1\",\n    \"enzyme-to-json\": \"1.4.5\",\n    \"eslint\": \"3.17.0\",\n    \"eslint-config-airbnb\": \"14.1.0\",\n    \"eslint-plugin-import\": \"2.2.0\",\n    \"eslint-plugin-jsx-a11y\": \"4.0.0\",\n    \"eslint-plugin-react\": \"6.10.0\",\n    \"eslint-plugin-react-native\": \"2.3.1\",\n    \"jest\": \"18.1.0\",\n    \"react-addons-test-utils\": \"15.4.2\",\n    \"react-native-cli\": \"2.0.1\",\n    \"react-native-debug-stylesheet\": \"0.1.1\",\n    \"react-native-mock\": \"0.3.1\",\n    \"uglify-js\": \"2.8.9\",\n    \"yarn\": \"0.20.4\"\n  },. @max-mironov  I can confirm that I completed all of those steps. \nOriginally (see A.), Xcode was able to build the project successfully, but once distributed to devices the build crashes on sync\nThen after completing steps, B -> D, Xcode builds failed with React/RCTBridge.h not found as the reason\n. Yes. I am using yarn@0.20.3 and have removed the old version entirely\n(sorry didn't mean to close the issue). Thank you for being so diligent with your responses on this issue - sorry for my very slow response - I had been on vacation. I will review your links and let you know if I need any further assistance / provide additional information if relevant.. ",
    "ssomnoremac": "Thanks. The cli docs are so good! These docs are great too \ud83d\ude00  That answers all my questions yes, and I know what to do going forward as well. It might be enough just to show examples that target version binaries using something like -t >1.0.0. Something like that would have saved me a lot of time. Great work though -- such a solid product! . ",
    "jamealg": "Sorry for the delayed response. Here's what I see. Is it the v1 update targeting * that's forcing it? What's strange is that I'm almost certain I ran deployment clear fewer than 18 days ago so that release shouldn't even be in the history. \n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Label \u2502 Release Time \u2502 App Version \u2502 Mandatory \u2502 Description \u2502 Install Metrics        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v1    \u2502 18 days ago  \u2502 *           \u2502 Yes       \u2502             \u2502 Active: 41% (21 of 51) \u2502\n\u2502       \u2502              \u2502             \u2502           \u2502             \u2502 Total: 38              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v2    \u2502 12 days ago  \u2502 1.0.3       \u2502 Yes       \u2502             \u2502 Active: 16% (8 of 51)  \u2502\n\u2502       \u2502              \u2502             \u2502           \u2502             \u2502 Total: 18              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v3    \u2502 6 days ago   \u2502 1.0.3       \u2502 Yes       \u2502             \u2502 Active: 53% (27 of 51) \u2502\n\u2502       \u2502              \u2502             \u2502           \u2502             \u2502 Total: 27              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518. Yes and thank you for the detailed and thorough response.. ",
    "bencollab": "I'm seeing similar behavior. All of my CodePush releases have targeted a specific binary version (see table below), yet when I build a new binary for my app (in this case, version 2.0.16) and distribute through TestFlight, the app (CodePush) is pulling down and applying v36, which is not what I expect. Am I doing something wrong, or could there be some kind of bug in the version comparison logic?\n\nreact-native-code-push version: 3.0.1-beta\nreact-native version: 0.44.2\niOS/Android/Windows version: iOS 10.3.2\nDoes this reproduce on a debug build or release build? Release\nDoes this reproduce on a simulator, or only on a physical device? Physical Device\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Label \u2502 Release Time                 \u2502 App Version \u2502 Mandatory \u2502 Install Metrics        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v1    \u2502 14 days ago                  \u2502 2.0         \u2502 No        \u2502 No installs recorded   \u2502\n\u2502       \u2502 (Promoted v1 from \"Staging\") \u2502             \u2502           \u2502                        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v2    \u2502 14 days ago                  \u2502 2.0         \u2502 No        \u2502 Active: 1.5% (1 of 65) \u2502\n\u2502       \u2502 (Promoted v2 from \"Staging\") \u2502             \u2502           \u2502 Total: 2               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v3    \u2502 14 days ago                  \u2502 2.0         \u2502 No        \u2502 Active: 0% (0 of 65)   \u2502\n\u2502       \u2502 (Promoted v3 from \"Staging\") \u2502             \u2502           \u2502 Total: 1               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v4    \u2502 14 days ago                  \u2502 2.0         \u2502 No        \u2502 Active: 0% (0 of 65)   \u2502\n\u2502       \u2502 (Promoted v4 from \"Staging\") \u2502             \u2502           \u2502 Total: 1 (1 pending)   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v5    \u2502 14 days ago                  \u2502 2.0         \u2502 No        \u2502 Active: 0% (0 of 65)   \u2502\n\u2502       \u2502 (Promoted v5 from \"Staging\") \u2502             \u2502           \u2502 Total: 3               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v6    \u2502 13 days ago                  \u2502 2.0         \u2502 No        \u2502 Active: 0% (0 of 65)   \u2502\n\u2502       \u2502 (Promoted v6 from \"Staging\") \u2502             \u2502           \u2502 Total: 1               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v7    \u2502 13 days ago                  \u2502 2.0         \u2502 No        \u2502 Active: 0% (0 of 65)   \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 3 (1 pending)   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v8    \u2502 13 days ago                  \u2502 2.0         \u2502 No        \u2502 Active: 0% (0 of 65)   \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 6               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v9    \u2502 13 days ago                  \u2502 2.0         \u2502 No        \u2502 No installs recorded   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v10   \u2502 13 days ago                  \u2502 2.0         \u2502 No        \u2502 Active: 0% (0 of 65)   \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 6               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v11   \u2502 13 days ago                  \u2502 2.0         \u2502 No        \u2502 Active: 3.1% (2 of 65) \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 15 (1 pending)  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v12   \u2502 12 days ago                  \u2502 2.0         \u2502 No        \u2502 Active: 32% (21 of 65) \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 34 (11 pending) \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v13   \u2502 11 days ago                  \u2502 2.0.5       \u2502 No        \u2502 No installs recorded   \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502                        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v14   \u2502 11 days ago                  \u2502 2.0.6       \u2502 No        \u2502 No installs recorded   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v15   \u2502 11 days ago                  \u2502 2.0.9       \u2502 No        \u2502 Active: 3.1% (2 of 65) \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 4 (3 pending)   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v16   \u2502 11 days ago                  \u2502 2.0.9       \u2502 No        \u2502 Active: 0% (0 of 65)   \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 4               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v17   \u2502 10 days ago                  \u2502 2.0.9       \u2502 No        \u2502 Active: 0% (0 of 65)   \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 2               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v18   \u2502 10 days ago                  \u2502 2.0.9       \u2502 No        \u2502 Active: 0% (0 of 65)   \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 3               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v19   \u2502 9 days ago                   \u2502 2.0.9       \u2502 No        \u2502 Active: 0% (0 of 65)   \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 2               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v20   \u2502 9 days ago                   \u2502 2.0.9       \u2502 No        \u2502 Active: 0% (0 of 65)   \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 3               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v21   \u2502 9 days ago                   \u2502 2.0.9       \u2502 No        \u2502 Active: 3.1% (2 of 65) \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 3 (1 pending)   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v22   \u2502 7 days ago                   \u2502 2.0.10      \u2502 No        \u2502 Active: 0% (0 of 65)   \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 2               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v23   \u2502 7 days ago                   \u2502 2.0.10      \u2502 No        \u2502 Active: 0% (0 of 65)   \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 2               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v24   \u2502 7 days ago                   \u2502 2.0.10      \u2502 No        \u2502 Active: 0% (0 of 65)   \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 3               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v25   \u2502 7 days ago                   \u2502 2.0.10      \u2502 No        \u2502 Active: 0% (0 of 65)   \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 1               \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Rollbacks: 1           \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v26   \u2502 6 days ago                   \u2502 2.0.10      \u2502 No        \u2502 Active: 3.1% (2 of 65) \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 4               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v27   \u2502 6 days ago                   \u2502 2.0.11      \u2502 No        \u2502 Active: 0% (0 of 65)   \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 2 (3 pending)   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v28   \u2502 5 days ago                   \u2502 2.0.11      \u2502 No        \u2502 Active: 3.1% (2 of 65) \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 3               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v29   \u2502 5 days ago                   \u2502 2.0.12      \u2502 No        \u2502 Active: 0% (0 of 65)   \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 2 (2 pending)   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v30   \u2502 4 days ago                   \u2502 2.0.12      \u2502 No        \u2502 Active: 0% (0 of 65)   \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 4               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v31   \u2502 4 days ago                   \u2502 2.0.12      \u2502 No        \u2502 Active: 7.7% (5 of 65) \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 9               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v32   \u2502 4 days ago                   \u2502 2.0.13      \u2502 No        \u2502 Active: 0% (0 of 65)   \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 1               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v33   \u2502 4 days ago                   \u2502 2.0.13      \u2502 No        \u2502 Active: 0% (0 of 65)   \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 2               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v34   \u2502 4 days ago                   \u2502 2.0.13      \u2502 No        \u2502 Active: 0% (0 of 65)   \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 2               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v35   \u2502 4 days ago                   \u2502 2.0.13      \u2502 No        \u2502 Active: 0% (0 of 65)   \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 2               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v36   \u2502 3 days ago                   \u2502 2.0.13      \u2502 No        \u2502 Active: 1.5% (1 of 65) \u2502\n\u2502       \u2502                              \u2502             \u2502           \u2502 Total: 2               \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518. @max-mironov Thank you for taking the time to try and reproduce the issue.\n\nI double-checked (with and without TestFlight) with some new builds, and found something interesting: I was wrong about it applying v36; as best I can tell, it's actually reverting back to v21. If you look at the history table, you'll notice that v21 was the last version with a single digit in the patch version component. This is pure speculation, but I suspect this could be a result of CodePush comparing/ordering version string components using string comparison rather than a numeric comparison.\nIs there any chance you could try to reproduce again, but with an app version 2.0.9 prior to version 2.0.16?. > if I install version 2.0.9 of the app then it should be correct that release v21 is applied because its target binary version is satisfied. So it looks like expected result, isn't it?\nRight, I should have been clearer: make sure you push a CodePush update targeting 2.0.9, followed by a binary build of version >= 2.0.10.\n\nwhen you build new binary on the device old updates are removed and only those who are targeting your binray version would be downloaded\n\nI do understand that's the intended behavior, and when I first run the new build on a device, it obviously includes (bundled with the binary) the new JS codebase, but it's definitely downloading and later running (on a subsequent launch of the app) a CodePush version targeted for a lower binary version.. One more thing to note: this only appears to happen (for me) if I don't release any CodePush updates targeting the newest binary (in other words, no CodePush update exists to satisfy the binary version). I've been assuming in that case, there should just be no CodePush update applied, but perhaps I'm mistaken.\nIf I build a new binary version and immediately follow it up with a CodePush update targeting the new version, then it does stay on the correct/newest CodePush versions as expected.. @max-mironov I've been trying to reproduce the issue with a new react-native project, and so far I haven't been able to reproduce the issue with the steps I gave you, so there must be some other factor causing it. I'll keep digging and let you know if I can track it down. No need to try it on your end.. OK, I just reproduced the issue with a new react-native project. These were my steps (this was tested only with iOS):\n\nStart with a new react-native project (and add CodePush support - I'm using all defaults except for { checkFrequency: codePush.CheckFrequency.ON_APP_RESUME,\n  installMode: codePush.InstallMode.ON_NEXT_RESUME }\ncode-push release-react APP_NAME ios -d Production -t 2.0\nMake visible change in JS codebase\nSet app version (CFBundleShortVersionString) to 2.0.1\nBuild app for release and install on device\nRun the app on the device, background the app, and then resume\n\nThe app will have updated to the CodePush version that was targeted for 2.0.\nMore speculation (please forgive me): If semver is being used for the version comparison, maybe the issue is related to the fact that 2.0 is not actually a valid semver version (though often treated the same as 2.0.0.\n. @max-mironov Interesting. In the CLI README under \"Target binary version parameter\", it specifically states:\n\nNOTE: If the app store version in the metadata files are missing a patch version, e.g. 2.0, it will be treated as having a patch version of 0, i.e. 2.0 -> 2.0.0\n\nMaybe I'm misreading that, but I had assumed that by leaving off the target binary version parameter when releasing a CodePush update, I'd essentially be locking the update to only the version specified by the app (e.g., in Info.plist), and that when my app was 2.0, it would be treated the same as 2.0.0. If that's not correct, I think it definitely deserves some correction/explanation in the docs as you say.\nFrom the comment you linked to, it sounds like the target binary version parameter is actually always treated as a semver range (which was not expected).\nThis is just my opinion, but I'd much rather have the behavior corrected to be the way the docs currently make it sound like it should work (seemed pretty clear to me), rather than attempt to document a somewhat bizarre behavior.\nEDIT: I just realized that the README note mentioned above is probably referring to the context of when the app is running and providing its current version to CodePush, rather than the metadata being read during CodePush release deployment (when the parameter isn't specified on the command line). So I suppose that makes a bit more sense, but the confusion is made worse by language like this:\n\nTarget binary version parameter: This specifies the store/binary version of the application you are releasing the update for, so that only users running that version will receive the update ...\nIf you ever want an update to target multiple versions of the app store binary, we also allow you to specify the parameter as a semver range expression.\n\nThat bit sounds very much like a non-range version string (no version range characters) will be treated as an equality comparison (as opposed to always being treated as a semver range expression). Perhaps the CLI could use a separate option or flag to denote whether the target binary version parameter is to be interpreted as a single version or a range. I say that because I believe my scenario (expecting the default [no version specified] to grab my current app version and lock the CodePush deploys to that) is probably more common than not.. > that is probably not required because you could always narrow versions to match exact number\n@max-mironov Is there a way to do that with a version such as \"2.0\"? It doesn't sound like that's possible, and I believe it's fairly common for people to release versions without a patch number.. @max-mironov Hmmm, ok. Yes, I can (already did) use the patch command to retroactively fix that for past versions, but IMO that's just fixing symptoms of the problem rather than the problem itself. I have to say I'm a bit surprised that you consider this to be the intended behavior, but obviously it's not my product so it's your call.. ",
    "ou2s": "Sorry for complaining, we love codepush, but this is a very annoying issue. We had to run the code-push patch more than 100times  to change AppVersion from 5.0 to 5.0.0 for our different apps to make sure that 5.0.1 wont be targeted because we still fear that Apple would reject us for having a codepush installl on launch.\nI think the version parsing in the Info.plist in the CP CLI should have a fix for that.. Thanks for your answer @sergey-akhalkov \nYes you got it right, when 5.0 was defined as App Version in codepush, it was also installing on binary with 5.0.1 version. And in my opnion, this is a bug. CodePush cli should convert 5.0 to 5.0.0to avoid this error.  In order to avoid codepush installations on 5.0.1 we had to patch all previous codepush releases from 5.0to 5.0.0.. Leaving just there for anyone having to patch multiple previous codepush releases. This shell script might help you.\n```\n #!/bin/bash\nfor i in {1..52};\n do code-push patch MyApp-ios Production -l v$i -t \"5.0.0\";\n done\n```. ",
    "JakeRawr": "thanks @sergey-akhalkov \nI've fixed the issue using React-Native-Splash-Screen. I simply added SplashScreen.show() when code push is installing the updated bundle. Thank you for your help and now closing this.\nJake. @pvinis \nYes. If you look at the doc, codePushStatusDidChange is how I determine code push states.\ncodePushStatusDidChange(status) {\n        switch(status) {\n            case codePush.SyncStatus.CHECKING_FOR_UPDATE:\n                console.log(\"Checking for updates.\");\n                break;\n            case codePush.SyncStatus.DOWNLOADING_PACKAGE:\n                console.log(\"Downloading package.\");\n                break;\n            case codePush.SyncStatus.INSTALLING_UPDATE:\n                console.log(\"Installing update.\");\n                break;\n            case codePush.SyncStatus.UP_TO_DATE:\n                console.log(\"Up-to-date.\");\n                break;\n            case codePush.SyncStatus.UPDATE_INSTALLED:\n                SplashScreen.show()\n                console.log(\"Update installed.\");\n                break;\n        }\n    }\n. Hi,\nI think I\u2019m running into the same issue. With @kohei-takata fixes, my assets don\u2019t load. What should I do in this case?. Solved the problem by making nvm default to 8.1.0. Closing\n. ",
    "pvinis": "@JakeRawr when do you call that? is there a callback to know when the update will happen?. no, i understand that. i can tell it that from like appstore version 4.5, target that.\nwhat im asking is this. i have version 4.5. then i have an update that i release to code push, and it happens to the users. lets call that codepush-version X. then later, i find out that i introduced a bug, and to fix it I made codepush-version Y. but to apply this fix, i need to migrate some state thing. so i would like to be able to tell which X and which Y im working with, so before teh update of after the update, i can apply some migration logic.\ndoes that make sense?. so in the app we have some models. when we add a new feature, sometimes we add things to the models. when we do that, sometimes we need to run a migration, to make sure the old model is changed to the new model, before we act upon it and change it. one simple example is if we have like a person model with name and year of birth. then we change this model to have name and date of birth for better calculation of age. so now we need to run a migration that if we go from version 5 to version 6, it will change all the stored data on the app to have a year of birth instead of the full date of birth. and I want to run this one only if I'm going from a version <=5 to a version >=6.\nbut how do I know the version of the js bundle that is pushed to the phone?\nI have the rest of the logic in the app for app store versions. but I need to know the js bundle version too. how do others do js bundle versioning. how can code push know which version I run and which one I will install.\nis that clearer?. thank you for merging :). ",
    "SamiChab": "In my case, I forgot to call the sync() function when app starts. ",
    "zzq0826": "hi. It seems that  SplashScreen.show() is not work on ios? @JakeRawr \n. ",
    "MattyK14": "For future reference, react native currently only supports API 16 - 23. ",
    "ryankask": "I found this gist on the RN Facebook group that should help users that are trying to use newer versions of the SDK: https://gist.github.com/AndrewJack/10dc22708582b009fb74f07904f3bfb1\nBasically, you can dynamically change compileSdkVersion and buildToolsVersion for subprojects.. @silhouettes Great! Thanks for following up.. ",
    "zslucky": "Hi @sergey-akhalkov , thanks a lot, I got the same dependency.\njson\n\"dependencies\": {\n    \"react\": \"15.4.2\",\n    \"react-native\": \"0.41.2\",\n    \"react-native-code-push\": \"^1.17.1-beta\"\n  },\nbut I think it's a CocoaPods issue, when I run the pod install, the CodePush.podspec file in your repo using s.summary = package['version'].sub('-beta', '') and the package.json in your repo is using version v1.17.1-beta, so I think this is the issue.. @sergey-akhalkov  Thanks so much! \ud83d\ude04 . ",
    "EdmundMai": "Hi @silhouettes , it is:\n<key>CFBundleShortVersionString</key>\n<string>1.0</string>\n\n. @max-mironov I think that worked!! When I look at the Xcode log, this is what shows up\nBefore change:\n2017-03-03 19:22:33.815 [info][tid:com.facebook.react.JavaScript] Running application \"MyApp\" with appParams: {\"rootTag\":1,\"initialProps\":{}}. __DEV__ === true, development-level warning are ON, performance optimizations are OFF\nAfter change:\n2017-03-03 19:21:59.255 [info][tid:com.facebook.react.JavaScript] Running application \"MyApp\" with appParams: {\"rootTag\":1,\"initialProps\":{}}. __DEV__ === true, development-level warning are ON, performance optimizations are OFF\n2017-03-03 19:21:59.333 [info][tid:com.facebook.react.JavaScript] [CodePush] Checking for update.\n2017-03-03 19:21:59.337 [info][tid:com.facebook.react.JavaScript] [CodePush] Reporting CodePush update success (v17)\n2017-03-03 19:22:00.526 [info][tid:com.facebook.react.JavaScript] [CodePush] App is up to date\nThanks so much for the help!!!. ",
    "nihgwu": "It's already there:\nhttps://github.com/Microsoft/react-native-code-push/blob/master/android/app/src/main/java/com/microsoft/codepush/react/CodePush.java#L8. @sergey-akhalkov yes I just make it work for RN0.43\nyou can modify it or cut a new version for backward compatibility. @sergey-akhalkov I think that issue should have been resolved by this commit https://github.com/facebook/react-native/commit/14c31d93da30842be45c1d10879c09d744c29381. @sergey-akhalkov no need to update peerDependencies each time RN releases new version\n1. peerDependencies: \">= 0.43.0\"\n2. peerDependencies: \">= 0.43.0\"\n3. peerDependencies: \">= 0.45.0\"\n. ",
    "aslakagens": "When will this be merged?. ",
    "michaelduminy": "@silhouettes 0.43 has been released and the problem persists. Please can you publish the new version of this lib to npm?. Thanks @sergey-akhalkov & @silhouettes! That has solved my compilation issue \ud83d\udc4d . ",
    "gitfdy": "\"react-native\": \"^0.41.2\",\n \"react-native-code-push\": \"^4.1.0-beta\",\n@sergey-akhalkov  build android \nExecution failed for task ':react-native-code-push:compileReleaseJavaWithJavac'.. ",
    "j2kun": "Since commenting here I wrote a barebones version, which I can link to tomorrow (let me know if you'd like this). I agree with what you said, I'm using it to have nice defaults and to do things like auto-generate changelogs from git commits.. @fungilation I think an in-app modal would be a good use case, though I think we only use it for internal record keeping. I also remembered that fastlane does things like extract your binary version from the configs, so you don't have to keep track of which binary version you want to target. You can also run test suites and stop deployment if they fail, etc. I'm not entirely convinced it's the right tool for the job, but fastlane has so many nice bookkeeping utilities (and a nice UI) that I figure why not give it a shot.\nHere's a v0: https://github.com/j2kun/fastlane-codepush\nHere's an example of how it would be used in a Fastfile:\n```\n  desc \"Codepush to staging server (employees only)\"\n  lane :codepush_staging do |options|\n    dry_run = options.has_key?(\"dry_run\")\n    version = Actions.lane_context[SharedValues::VERSION_NUMBER]\n    description = changelog_from_git_commits(merge_commit_filtering: \"exclude_merges\")  # last tag until HEAD\ncodepush(\n  dry_run: dry_run,\n  app_name: 'FooBar',\n  target_binary_version: version,\n  deployment: 'Staging',\n  description: description,  # additional options go here as desired\n)\n\nend\n```\nNot sure what the right next step is. Maybe you folks could give it a look over to make sure it doesn't violate the codepush ethos, and then I can ask the fastlane folks to incorporate it as a natively supported action?\nApologies, I don't contribute to open source very often, certainly never a plugin that spans multiple projects.. FWIW, since it's just a CLI wrapper, I think the fastlane folks would be able to maintain it just fine, should they decide to incorporate it.. @silhouettes I see. My use case is in dynamically changing the deployment via the JS API, so this won't work. I'd be happy to contribute a PR, but it seems the server side is private?. @silhouettes It's not a huge deal. I was testing that mechanism, and it just taking extra steps to go through the code-push-cli deployment history to match up the version numbers with what is reported by getUpdateMetadata.\nAnyway, consider the feature requested :) Hope it's an easy one :). ",
    "iclems": "+1 As I was just looking for this today. Use case is clear for me: I need to push native update via fastlane only once in a while when I add native modules. The rest of the time, I use code push to update the JS bundle only. At the moment, there's a clear pain as most of the time I release code-push before or after the fastlane beta, and it's not easy to prevent the new beta to automatically update to the code-push version. Clearly, the bundle generated during the fastlane release should ideally be pushed to code-push. . ",
    "manuelkch": "if anyone is interested in using codepush for react native app's in fastlane we've created out of business needs a plugin under:https://github.com/manuelkch/fastlane-plugin-code_push. Feel free to participate or ask for features . ",
    "coutliuxing": "@adrianha hi,Your problem solved? . react-native-code-push:1.17.3-beta\nreact-native:0.42.0\nMainApplication.java\n\nbuild.gradle:\n\ncommod:\n\nJust the normal configuration, just have a problem of the interface is more complex, but I use assembleRelease generated apk installation is no problem, just updated will be out of the question. Performance is a imageView, respectively in onPressIn and onPressOut change image, switching between will be delayed. I didn't quite understand you the meaning of this passage, what do you mean I have set up like this before?\nnew CodePush(BuildConfig.CODEPUSH_KEY, MainApplication.this, BuildConfig.DEBUG)\n. \n\n. @sergey-akhalkov No attempt at debug mode.In the simulator also has this problem. @adrianha releaseStaging mode\uff1f\uff1fCan you share how this mode works?. @sergey-akhalkov One can reproduce the problem example\npatchTest.zip\n. Okay , thank you very much ~. ",
    "adrianha": "Yes, its occured when i run on release mode on real device @sergey-akhalkov .\nWhen i run on releaseStaging mode, everything is alright even after fresh install.\nI'm using react-native@0.41.2 and react-native-code-push@1.17.2-beta. Basically, i was following the guide from code push @coutliuxing .\nhere's the config:\n\n. @sergey-akhalkov i think mine is different.\nMy app become slower when using binary version. It will be back to normal state after restart and applying the update from code push.\nSo, its the step:\n1. Fresh install => using binary version (Animation is slow)\n2. Got an update from code-push and downloading the updates in the background\n3. Restart app to apply the update from code-push (Animation became normal)\nHere's my index.js:\n\nTo make it clear: What i describe as animation is when i was trying to show modal from @expo/ex-navigation. hi @sergey-akhalkov ,\ni'll investigate this weekend. sorry for incovenience.. Thanks @sergey-akhalkov !. hi @ThomasGaubert @patniko ,\nany updates on this issue?. Hi @NickToropov ,\nI have same case with @ricoharisin that i generate bundle manually and skip bundleJsAndAssets task. i tried @ricoharisin 's solution and it worked.\nAny thought on this @NickToropov ?. Actually, our build process still follow RN's and hash process is also working as usual. But have you tried to run codepush on android with gradle 3.2 @NickToropov ?. ",
    "yaronlevi": "Great! thanks... will check and report back. Works great!. Also note that if you used the --mandatory flag it forces a restart, which will also cause a crash.. \nWe always get 10% rollbacks, mostly Android.\nConfiguration is::\nAppRegistry.registerComponent('myapp', () =>\n  codePush({\n    checkFrequency: codePush.CheckFrequency.ON_APP_RESUME,\n    installMode: codePush.InstallMode.ON_NEXT_RESUME,\n  })(Root),\n);\nreact-native-code-push@5.1.3-beta\nreact-native@0.49.0\n. @huangkaiw3n +1\nIt could be great if had a way to diagnose the reason for a specific rollback, or as suggested disable this feature altogether. We get rollbacks on JS bundles that are 100% good.\nMy guess is that the process of installing the new bundle gets interrupted in some way: flaky internet connection, some wired user interaction regarding resume/open.\nBut we can only guess, as there is no way of knowing what happened in the client's end.. @ruslan-bikkinin \n\ncould be caused by incorrect bundle execution which\n\nRegarding \"incorrect bundle execution\",\ndo you mean some error in our javascript code?\nLike in app.js near AppRegistry.registerComponent()? (maybe in the ctor)\nAnd if not, where is this \"bug in bundle initialization\" could be found. The only code we control (write) is JS and some native modules.. +1 for a retry mechanism.\nAlso, getting some kind of log info about the device that experienced the rollback could be very helpful.. @ruslan-bikkinin \nWe use react-native-device-info (which is quite popular).\nI would try to follow the implementation of:\nimport DeviceInfo from 'react-native-device-info';\nconst uniqueid = DeviceInfo.getUniqueID();\nAnd make this unique id, which is a unique device id, available in a log when a crash happens.\nLooking at the source code of DeviceInfo.getUniqueID() could be a good reference, as this library is pretty mature and well tested, and generates this unique id for both iOS and Android.. Does one of the suggested solution mentioned above is scheduled on the roadmap or is considered?\nThis is especially important since Code Push is now a part of App Center which is a paid service. This could come as a real deal breaker for some.. Crash reporting on Code Push errors should be a top priority in the roadmap. Especially now that App Center is a paid service.. @ajwhite You said \"in our logs\"... What logs to do you mean, JS or Native? Something like Sentry.io?. Setting delayInHours=0 would cause an immediate retry?. @yuri-kulikov Great feature (-: It's nice seeing React Native and CodePush going forward and improving all time.. @pniko \n\nfocusing heavily on better rollback, crash and patching support\n\nExcited to hear that!. @pniko Maybe we should merge those two issues:\nhttps://github.com/Microsoft/react-native-code-push/issues/880\nThey practically repeat the same pain points, and suggest the same solutions.. +1 Could come as a very handy feature.. @Zakeelm \"App Center\" is a dashboard (and a set of SDKs). It dose not replaces code push. If I am not mistaken, it will be baked into app centers sdk.. ",
    "rouge3351": "yes thank you!!! :) \ni will close my issue. ",
    "skizzo": "I run into this very same error with RN 0.57.7 and have no clue how to fix it. The only thing that works is deleting all folders and files created by code-push, and then restarting the packager. \nAny ideas how I could tell the bundler to just ignore the data created by code-push? Blacklisting the folder in rn-cli.config.js doesn't help, which strikes me as a bit weird too.\nThanks for any suggestions.. Any updates on this?. ",
    "andrejunges": "Is there something holding the next release? Probably there are a lot of people facing the sdk version mismatch issue and waiting for this fix.\nThanks!. ",
    "talenguyen": "I am still facing with same problem when compile react-native-code-push@2.0.2-beta.. ",
    "MrHubble": "Thank you @sergey-akhalkov, changing my Gradle from 2.3.3 to 2.2.3 fixed the issue for me. As a side note, I also had to fix jcenter() so I could add Gradle 2.2.3:\nrepositories {\n    maven {\n        url \"https://jcenter.bintray.com\"\n    }\n    ....\n}\nhttps://stackoverflow.com/a/27477763/1299792. ",
    "BretJohnson": "Does your app use Rollout.io, JSPatch, or any other code update technologies beyond CodePush itself?. @quentinyang We suspect your app is using JSPatch. Can you confirm that. Thanks.. Should we swap the order, to do #if __has_include(<React/RCTConvert.h>) (that is, always check for the 0.40 case first)?  It shouldn't really matter, that that would make all the files consistent and seems slightly better.. ",
    "TyrealGray": "https://github.com/facebook/react-native/issues/12778. ",
    "quentinyang": "I use codepush and others SDK, but no JSPatch.. ",
    "imWildCat": "@quentinyang Chinese SDK? https://github.com/bang590/JSPatch/issues/751\nThese fuxxing SDKs contained JSPatch. They played the evil:\nSDKs which contained JSPatch:\n\nBaidu Map\nAmap (Gaode/Alibaba) Map. \n",
    "diegocouto": "Hi, @sergey-akhalkov! Thank you for your detailed response. \ud83d\ude04  I'll be working on this tomorrow and, as soon as I finish this and some other changes I'll update this issue, ok?\nThanks again! \ud83d\ude09 \nUPDATE\nYep, following this approach, it was possible to get rid of the warning. Thanks! \ud83d\udc4d . ",
    "timscott": "Sure.. ",
    "438198602": "@max-mironov\na)\uff1aMy code-push is 1.12.8-beta\uff0c react-native 0.41.2\uff0ccode-push app ls/code-push deployment history MyApp Production is work\u3002\nb)\uff1aSomeone else to build the server, he can be successful, my error\u3002. @max-mironov \nThank you, but now I have encountered other problems with the React Native, I need to solve this problem\u3002after that, I will try what you say for code-push.Thank you very much\uff01. @max-mironov  OK\uff0cyou can close this issue for now.. ",
    "WhynoChinese": "@max-mironov  This time I was so busy that I did not notice your reply to this I was sorry.Now my team has solved it, I have reworked it and it works.\n. ",
    "qilin55": "@WhynoChinese \u8fd9\u4e2a\u95ee\u9898\u600e\u4e48\u89e3\u51b3\u7684\u53ef\u4ee5\u544a\u8bc9\u6211\u4e00\u4e0b\u5417\uff1f\u9047\u5230\u540c\u6837\u7684\u95ee\u9898\uff0c\u591a\u8c22. ",
    "AyubaMakoa": "\n@max-mironov This time I was so busy that I did not notice your reply to this I was sorry.Now my team has solved it, I have reworked it and it works.\n\nplease can you help explain how you fixed it?. ",
    "Colmea": "Hi @max-mironov ,\nThanks for your quick reply.\nRegarding the screenshot with deployment history. My bad, the screenshot is cropped, but the first table is actually the Staging deployments.\n\napp is up to date\nComes from the code-push debug android:\n```\n[09:18:02] Checking for update.\n[09:18:02] Reporting binary update (0.3.0)\n[09:18:02] App is up to date.\n[09:18:02] Checking for update.\n[09:18:02] App is up to date.\n\n```\nQuestions:\n- I saw you use --variant=releaseStaging. I got an error when running this instead of \"--configuration=releaseStaging\": Task 'installReleaseStagingDebug' not found in root project XXX.\nShould I really use --variant option ? Or --configuration works too ?\n\nShould I see a download when first running my staging app ? Or only when I update it and it's already installed with a previous version.\n\nEDIT: I found that, when running the run-android --variant=releaseStaging, React is looking for a installReleaseStagingDebug task. Which is not correct: it should be  installReleaseStaging . Did I miss something in my releaseStaging config that makes react/android think it's a debug build ?. Hoow, ok. Found it !\nThe deployment key is, indeed, not the good one. Actually, I've har corder the deployment key:\nMainApplication.java:\nprotected List<ReactPackage> getPackages() {\n      return Arrays.<ReactPackage>asList(\n          new MainReactPackage(),\n          new CodePush(getResources().getString(R.string.reactNativeCodePush_androidDeploymentKey), getApplicationContext(), BuildConfig.DEBUG),\nAnd in my strings:xml:\n<string moduleConfig=\"true\" name=\"reactNativeCodePush_androidDeploymentKey\"> XXXXXJz1LSztANsCsNXXXX1xeXXX </string>\nThe question is: how can I dynamically give the Staging or Production deployment key in MainApplication.java following the build type ?\nSo, instead of:\nnew CodePush('deployment-key-here', getApplicationContext(), BuildConfig.DEBUG),\nWe could have something like:\nnew CodePush(buildTypes.CODEPUSH_KEY), getApplicationContext(), BuildConfig.DEBUG),\nIs this possible ? If no, what's the solution to have a dynamic deployment key in MainApplication.java ?. HI @max-mironov \nI guess you can close this issue since I resolved my \"bug\".\nI still don't know how to dynamically add my codepush key in MainApplication.java and why we need this if we have the keys in build.gradle, but it's not related to this issue.\nThank you very much for your help !. ",
    "gavinyeah": "Hi @max-mironov , thanks a lot for looking into this.\nI'm afraid the issue is caused by the bundle naming, not the version expressions.\nIn our local environment, we're using index.android.bundle for Android deployment while using index.ios.bundle for iOS deployment. It works fine.\nIn our build system on Visual Studio Online, we're using main.jsbundle for both Android and iOS deployment. They're deployed separately but both use main.jsbundle as the name of bundle. It works fine for iOS but no installs for Android at all.\nNow I've changed the bundle name back to index.android.bundle for Android and it works. Semver expressions also work fine.. ",
    "Phredward": "Hi @sergey-akhalkov \nThat totally solves the problem, thanks so much!. ",
    "nerdmed": "@max-mironov sorry did not come to this as my workaround works for now. I will check it with my next release probably at the end of the week and try out your suggestions. @max-mironov thanks again for your support. Finally got it running but i had to change the code a little. For me it works with the following:\n```\nconst codePushOptions = {\n    checkFrequency: codePush.CheckFrequency.ON_APP_RESUME,\n    installMode: codePush.InstallMode.ON_NEXT_RESUME,\n};\nexport default codePush(codePushOptions)(MyApp);\n```\nExporting first and then applying codePush does not work. Adding the installMode fixed the problem.\n. Same here, ~only works on restarts! But its really important to get ON_NEXT_RESUME running, seriously who is restarting his apps \ud83d\udc83 ?  Anyone tried to manually download and refresh the bundle on the app resume event? I had a workaround some time ago.~\nJust tested it again and it seems to work also on resume. Maybe its not reliable and sometimes fails for some reason?. ",
    "just4fun": "Thanks @max-mironov , it helps!. Hey @max-mironov , I faced another issue when I want to release v2.0.0 which contains native changes as I mentioned above.\nIt is that the production release with code-push before has no target-binary-version-parameter set, that said if I release v2.0.0 to App Store, users with new app version will also receive the old updates.\nI think there are two ways to resolve it.\n\nRelease a new update with code-push and set target-binary-version-parameter to v2.0.0, then when users update to new app version, they will receive the update, but old version users will not.\nClear release history for Production, then re-push an update for old version v1.0.0 with target-binary-version-parameter, then old version users will still receive updates, but new version users will not.\n\nPlease let me know if you have any thoughts or I misunderstood anything.. @max-mironov thank you.. @kelset @buptkang @axemclion \nHello guys,\nI reported the issue here did not mean I think the rejection is caused by CodePush, just because I noticed that some developers received warning email from Apple, seems like hot fix is not allowed from the middle of 2017, so I'm not sure whether CodePush is also not allowed, hence the issue (or question) here to get more information from community.\nYeah I saw the issue @buptkang provided, but I'm not sure which package included something like JSPatch. The only libraries I added from last summit to App Store, are react-native-search-bar, react-native-blur and react-native-gifted-chat.\n\"apsl-react-native-button\": \"3.0.1\",\n    \"es6-symbol\": \"3.1.1\",\n    \"lodash\": \"4.17.4\",\n    \"md5\": \"2.1.0\",\n    \"moment\": \"2.10.6\",\n    \"react\": \"15.4.2\",\n    \"react-native\": \"0.42.2\",\n    \"react-native-blur\": \"3.1.3\",\n    \"react-native-checkbox\": \"1.0.15\",\n    \"react-native-code-push\": \"1.16.1-beta\",\n    \"react-native-gifted-chat\": \"0.1.4\",\n    \"react-native-image-crop-picker\": \"0.12.9\",\n    \"react-native-image-progress\": \"0.6.0\",\n    \"react-native-keyboard-aware-scroll-view\": \"0.2.5\",\n    \"react-native-message-bar\": \"1.6.0\",\n    \"react-native-progress\": \"3.2.0\",\n    \"react-native-scrollable-tab-view\": \"0.6.0\",\n    \"react-native-search-bar\": \"3.0.0\",\n    \"react-native-side-menu\": \"0.20.1\",\n    \"react-native-vector-icons\": \"4.0.0\",\n    \"react-redux\": \"4.4.1\",\n    \"redux\": \"3.3.1\",\n    \"redux-actions\": \"1.2.1\",\n    \"redux-saga\": \"0.12.0\". I found here is an issue https://github.com/react-native-community/react-native-blur/issues/125, I will leave comment there to see whether it's the root cause.. @kelset - so, the rejection reason I received from App is,\n\nGuideline 2.3.1 - Performance\nWe discovered that your app contains hidden features. \nYou will experience a delayed review process if you deliberately disregard the App Store Review Guidelines, ignore previous rejection feedback in future app submissions, or use your app to mislead or deceive users.\nImportant Information\nAs a result of violating this guideline, your app\u2019s review has been delayed. Future submissions of this app, and other apps associated with your Apple Developer account, will also experience a delayed review. Deliberate disregard of the App Store Review Guidelines and attempts to deceive users or undermine the review process are unacceptable and is a direct violation Section 3.2(f) of the Apple Developer Program License Agreement. Continuing to violate the Terms & Conditions of the Apple Developer Program will result in the termination of your account, as well as any related or linked accounts, and the removal of all your associated apps from the App Store. \nWe want to provide a safe experience for users to get apps and a fair environment for all developers to be successful. If you believe we have misunderstood or misinterpreted the intent of your app, you may submit an appeal for consideration or provide additional clarification by responding directly to this message in Resolution Center in iTunes Connect.\nGuideline 2.5.2 - Performance - Software Requirements\nYour app, extension, or linked framework appears to contain code designed explicitly with the capability to change your app\u2019s behavior or functionality after App Review approval, which is not in compliance with App Store Review Guideline 2.5.2 and section 3.3.2 of the Apple Developer Program License Agreement.\nThis code, combined with a remote resource, can facilitate significant changes to your app\u2019s behavior compared to when it was initially reviewed for the App Store. While you may not be using this functionality currently, it has the potential to load private frameworks, private methods, and enable future feature changes. This includes any code which passes arbitrary parameters to dynamic methods such as dlopen(), dlsym(), respondsToSelector:, performSelector:, method_exchangeImplementations(), and running remote scripts in order to change app behavior and/or call SPI, based on the contents of the downloaded script. Even if the remote resource is not intentionally malicious, it could easily be hijacked via a Man In The Middle (MiTM) attack, which can pose a serious security vulnerability to users of your app.\nImportant Information\nAs a result of violating this guideline, your app\u2019s review has been delayed. Future submissions of this app, and other apps associated with your Apple Developer account, will also experience a delayed review. Deliberate disregard of the App Store Review Guidelines and attempts to deceive users or undermine the review process are unacceptable and is a direct violation Section 3.2(f) of the Apple Developer Program License Agreement. Continuing to violate the Terms & Conditions of the Apple Developer Program will result in the termination of your account, as well as any related or linked accounts, and the removal of all your associated apps from the App Store. \nWe want to provide a safe experience for users to get apps and a fair environment for all developers to be successful. If you believe we have misunderstood or misinterpreted the intent of your app, you may submit an appeal for consideration or provide additional clarification by responding directly to this message in Resolution Center in iTunes Connect. \n\nRegarding 2.3.1, it seems that App Review team didn't use my app in right way, since I didn't provide same account and password as same as the one in the 5 screenshots I provided for submit. I have already sent email to App Review team for more explanation.\nRegarding 2.5.2, if we google the first sentence Your app, extension, or linked framework appears to contain code designed explicitly with the capability to change your app\u2019s behavior or functionality after App Review approval, most the result I got have a keyword \u70ed\u66f4\u65b0(hot push) (I'm in China so most of the result are in Chinese) and some of the result mentioned many developers received email from Apple (for example, \u5f88\u591aiOS \u5f00\u53d1\u8005\u6536\u5230Apple \u8b66\u544a\u90ae\u4ef6\uff0c\u662f\u8981\u5168\u9762\u5c01\u6740\u70ed\u4fee\u590d\u65b9\u6848\u5417\uff1f, it means many iOS developers received warning emails from Apple, does it mean hot push will be completely prohibited ?). I know this does not means ok, since I used CodePush, and I can use it for hot push, so the rejection is caused by it, but hot push has been mentioned in search result indeed, hence the issue here (not means it's a bug or defect, I think it's most like question). I also read through the README.md section you provided, and I did not use updateDialog.\n```javascript\ncomponentDidMount() {\n    // hot push\n  AppState.addEventListener('change', this.handleAppStateChange);\nCodePush.sync({ installMode: CodePush.InstallMode.ON_NEXT_RESUME });\n}\ncomponentWillUnmount() {\n  AppState.removeEventListener('change', this.handleAppStateChange);\n}\nhandleAppStateChange(appState) {\n  if (appState === 'active') {\n    CodePush.sync({ installMode: CodePush.InstallMode.ON_NEXT_RESUME });\n  }\n}\n```\n\nAny questions please let me know.. @pniko - I want to try what you mentioned, but I got latest update from App Review team,\n\nHello, \nThank you for your attention to this matter. While not related to the use of React Native itself, we found your app has a framework with functionality for dynamic functionality updating. It would be appropriate to revise or remove any such features from your app.\nWe appreciate your efforts to comply with the App Store Review Guidelines, and we look forward to reviewing your resubmitted app.\nBest Regards, \nApp Store Review\n\nUsing private API was not mentioned, and if rejection was due to private API, the guideline I violated would be 2.5.1 (https://developer.apple.com/app-store/review/guidelines/), not 2.3.1 and 2.5.2 I think.. Anyway, I replaced react-native-blur with blur image directly just now but keep CodePush in my app, then submit to App Store.\nI will let you know the result.. So, my new submission is still In Review for almost one month after I removed react-native-blur from my app.\nI sent an email to App Review team, I got such reply just now.\n\nThanks for your reply.\nAs per the latest rejection message from September 1, 2017:\nHello,\nThank you for your attention to this matter. While not related to the use of React Native itself, we found your app has a framework with functionality for dynamic functionality updating. It would be appropriate to revise or remove any such features from your app.\nWe appreciate your efforts to comply with the App Store Review Guidelines, and we look forward to reviewing your resubmitted app.\nFurthermore we would like to let you know that we are unable to provide a timeframe for the review of your app, \u201c\u6e05\u6c34\u6cb3\u7554 - stuhome.\u201d\n\nRegrading the framework with functionality for dynamic functionality updating, not sure whether it's react-native-code-push.. Hey @pniko , here is result for my latest submissions.\n\nAs you see, the first rejection on 30 Aug (the time I created this issue) was involved both react-native-blur and react-native-code-push, so I removed react-native-blur who has private API (https://github.com/just4fun/stuhome/commit/afb416a01be679e682a74c5ebc3e42cfdef688c3).\nFor the second rejection on 15 Oct, there was only react-native-code-push, and I got same rejection reason from App Review team like my last comment in this issue above.\nThen I removed react-native-code-push (https://github.com/just4fun/stuhome/commit/efdc616674e967f88a19212e4355584bb990b96a) and re-submitted my app on 29 Oct. Finally, it's ready for sale yesterday.\nAccording to the case I faced and the rejection reason from Apple team, I'm not sure whether it indicates that react-native-code-push is not allowed, but could you have a look whether I was using this library in wrong way (https://github.com/just4fun/stuhome/commit/efdc616674e967f88a19212e4355584bb990b96a), or has this famous library already been forbidden by Apple?\nIf you need more information about my app, please let me know.\nBTW, it seems that I have no access to the re-open button for this issue.. @kelset I don't know.\nI want to involve code-push into my next release, let's have a look then.. ",
    "chang-chaunce": "@sergey-akhalkov  Thank you\uff0cyou're right, I have fixed it.. ",
    "jaeky": "It works successfully! thank you. \ud83d\udc4d . ",
    "zeljkoX": "Thanks for quick answer. I have checked for CODE_PUSH_APK_BUILD_TIME and it wasn't there. Reinstalled and relinked react-native-code-push and now it works.. ",
    "jsierles": "I'm seeing this issue when building the Android build with buck. Any idea if there's a way to fix that? CODE_PUSH_APK_BUILD_TIME is missing from the debug apk.. I still have the issue with buck. With gradle it works fine.. ",
    "youngcube": "I've just got same issue here.\nHere is my dependency :\n\"react\": \"16.0.0-alpha.6\",\n\"react-native\": \"0.44.0\",\n\"react-native-code-push\": \"^2.0.3-beta\",\n\"react-native-sqlite-storage\": \"^3.3.1\",\n\"react-native-macos\": \"0.12.0\"\nI don't see CODE_PUSH_APK_BUILD_TIME in my output apk. I've also tried del node_modules & npm install & clean & rerun but not work.. @sergey-akhalkov Yes.\n\n. @sergey-akhalkov Right. Hope this can help. Thanks !. I got same problems. Here is my dependencies\n\"react\": \"16.0.0-alpha.6\",\n\"react-native\": \"0.43.0\",\n\"react-native-code-push\": \"^2.0.3-beta\",\n\"react-native-sqlite-storage\": \"^3.3.1\"\n\n. @max-mironov Thank you for your response!\nAs you mentioned, I've follow your step with a new Project, and everything is OK. Sad...- -\nSince I want to add React Native in a existed native Android Project. I then read all step that I do in my existed native Project and  add all new code & grade dependency to a new Project without using  react-native link . Everything is just fine again..\nAs my React Native code doesn't strong depend on RN0.43 version. I've also tried backward to RN0.42 & code-push 1.17.3beta. This time, no \" Can not find ChoreographerCompat \" error. My Project can complie successfully.But when my App just run into CodePush method ( like CodePush.sync() ). I got these error: \ncom.facebook.react.common.JavascriptException: undefined is not an object (evaluating 'f.default.sync')\nI use CodePush in my js file like this:\nimport CodePush from 'react-native-code-push'\n...\ncomponentDidMount(){\n        CodePush.sync().then(success =>{\n            console.log(success);\n        }).catch(error =>{\n            console.log(success);\n        });\n}\nI've also tried some syntax like require but no luck.\nMy js code works fine in my another iOS Native with ReactNative App. It's also RN0.43 with code-push 2.0.3beta. I can also reach CodePush's update.\nI'm very sorry for my poor English for I'm not a native English speaker. \nThank you again!\n. Here is my code in my native Project\nMainApplication.java (hidden codepush key)\n```\n    private final ReactNativeHost mReactNativeHost = new ReactNativeHost(this) {\n        @Override\n        protected String getJSBundleFile() {\n            return CodePush.getJSBundleFile(\"main.bundle\");\n        }\n    @Override\n    public boolean getUseDeveloperSupport() {\n        return false;\n    }\n\n    @Override\n    protected List<ReactPackage> getPackages() {\n        return Arrays.<ReactPackage>asList(\n                new MainReactPackage(),\n                new CodePush(\"\uff1f\uff1f\", MainApplication.this, false)\n        );\n    }\n};\n\n@Override\npublic ReactNativeHost getReactNativeHost() {\n    return mReactNativeHost;\n}\n\n```\nReactNativeManager.java\n```\npublic class ReactNativeManager extends Activity implements DefaultHardwareBackBtnHandler {\n    private ReactRootView mReactRootView;\n    private ReactInstanceManager mReactInstanceManager;\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    mReactRootView = new ReactRootView(this);\n    mReactInstanceManager = ReactInstanceManager.builder()\n            .setApplication(getApplication())\n            .setBundleAssetName(\"main.bundle\")\n            .setJSMainModuleName(\"ReactNativeManager\")\n            .addPackage(new MainReactPackage())\n            .setUseDeveloperSupport(BuildConfig.DEBUG)\n            .setInitialLifecycleState(LifecycleState.RESUMED)\n            .build();\n    mReactRootView.startReactApplication(mReactInstanceManager, \"ReactNativeManager\", null);\n    setContentView(mReactRootView);\n}\n\n@Override\npublic void invokeDefaultOnBackPressed() {\n    super.onBackPressed();\n}\n\n@Override\nprotected void onResume() {\n    super.onResume();\n    if (mReactInstanceManager != null) {\n        mReactInstanceManager.onHostResume(this, this);\n    }\n}\n\n@Override\nprotected void onPause() {\n    super.onPause();\n    if (mReactInstanceManager != null) {\n        mReactInstanceManager.onHostPause();\n    }\n}\n\n@Override\nprotected void onDestroy() {\n    super.onDestroy();\n    if (mReactInstanceManager != null) {\n        mReactInstanceManager.onHostDestroy();\n    }\n}\n\n@Override\npublic void onBackPressed() {\n    if (mReactInstanceManager != null) {\n        mReactInstanceManager.onBackPressed();\n    } else {\n        super.onBackPressed();\n    }\n}\n\n@Override\npublic boolean onKeyUp(int keyCode, KeyEvent event) {\n    if (keyCode == KeyEvent.KEYCODE_MENU && mReactInstanceManager != null) {\n        mReactInstanceManager.showDevOptionsDialog();\n        return true;\n    }\n    return super.onKeyUp(keyCode, event);\n}\n\n}\n```\nThere is another thing:\nWhen I run grade sync.Grade warn me that react-native-code-push's buildToolsVersion is too low.Since my Project is 25.0.0. I've updated codepush.gradle into 25.0.0 then gradle can continue to sync and then success. I don't know whether this could make something wrong.. @max-mironov Sorry that I've not mentioned that I've tried to follow this manual installation in my Native Project and a New Created Project. \nNew Create Project : All works fine.\nMy Native Project With RN&codepush:\n- RN0.43 & CodePush 2.0.3: Compile Error with Error message like : not find ChoreographerCompat\n- RN0.42 & CodePush 1.17.3: Compile Success. But when I use CodePush.sync() in my Js . I got these error : \ncom.facebook.react.common.JavascriptException: undefined is not an object (evaluating 'f.default.sync')\nThank you for your response!. @max-mironov Yes. Each time I change package.json's react-native version & code-push version I will delete node_modules and run npm install. But no luck - -.Everything works like I've just mentioned.. @max-mironov Sorry - - I can't share it cause it is a company Project.\nI can tell you more about this Project.\nIt's based on C++ with JNI\uff08I know a little about Java. I'm a iOS Developer\uff09. This Project use some armev7 so lib. I wonder if it could make this issue happen ? \nAnyway, thank you for your advice. I'll try more way with my Android colleague.. @max-mironov Thank you for remind me ! \nNow that not find ChoreographerCompat Error dismiss with RN0.43 & CodePush 2.0.3.\nBut sadly this issue is still alive :\ncom.facebook.react.common.JavascriptException: undefined is not an object (evaluating 'f.default.sync')\nThis error now occur in bothRN0.43 & CodePush 2.0.3. & RN0.42 & CodePush 1.17.3. @max-mironov Good News.\nI've just make a  test Project which can reproduce this bug successfully.\nHere is the git : https://github.com/youngcube/AwesomeProject\nError is : \ncom.facebook.react.common.JavascriptException: undefined is not an object (evaluating 'f.default.sync')\nThanks!. @max-mironov OK.Here is the issue : https://github.com/Microsoft/react-native-code-push/issues/871. Hey @hose314. I've got the same issue.\nHave you change CodePush's bulld.gradle ? I've changed it tocompileSdkVersion 25 and buildToolsVersion \"25.0.0\".  I'm not sure if it can make this crash.\nThanks.. @hose314 Thanks for this information! \n@max-mironov Hope it can help.I've also made another issue to this kind of crash in #918 .. Finally I solved this problem by add some line in my MainActivity\n@Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        mReactRootView = new ReactRootView(this);\n        mReactInstanceManager = ReactInstanceManager.builder()\n                .setApplication(getApplication())\n                .setBundleAssetName(\"main.bundle\")\n                .setJSMainModuleName(\"TingBadgeManager\")\n                .addPackage(new SQLitePluginPackage())\n                .addPackage(new CodePush(\"xxx\", getApplicationContext(), com.xxx.xxx.BuildConfig.DEBUG))       // register CodePush Plugin here\n                .addPackage(new MainReactPackage())\n                .setUseDeveloperSupport(true)\n                .setInitialLifecycleState(LifecycleState.RESUMED)\n                .build();\n        mReactRootView.startReactApplication(mReactInstanceManager, \"TingBadgeManager\", null);\n        setContentView(mReactRootView);\n    }\nThank you all. Please close this issue !. @sergey-akhalkov  Thanks for reply !\nI've add the line I've missed. But no luck. It's crash again in Android 6.x. I've also checked these steps again.But nothing more found to append = =. @sergey-akhalkov Sorry for late reply. I've changed my Project like you said. When I change getMainComponentName ()  to the real ComponentName in my bundle(In this Project it's TingBadgeManager) file it crashed again with same error log.. I've just commit it. Please check.. @sergey-akhalkov Thank you ! I've just add CodePush.getJSBundleFile(\"main.bundle\"); It works !. I am not Android developer so I could misunderstanding this SDK version's effort. Perhaps it's not related to the changing of  compileSdkVersion 25 and buildToolsVersion \"25.0.0\" since RN is also  compileSdkVersion 23 and buildToolsVersion \"23.0.1\".\nWhen I compile my Android project in first time,  CodePush is all 23.It can not be compile for this error log:\n```\nError:The SDK Build Tools revision (23.0.1) is too low for project ':react-native-code-push'. Minimum required is 25.0.0\n```\nSo I change CodePush's buildToolsVersion \"25.0.0\" but leave compileSdkVersion to 23\nIt can compile. But App will crash in some I/O operations sometimes. so I also change CodePush's compileSdkVersion to 25. Now App will not crash in all I/O operations.\nMaybe my issue is not related to SDK problem but hope this clue may help.\n . As for now we've changed our project all subprojects's compileSdkVersion and buildToolsVersion to 23 to fit CodePush & RN. We will release it ASAP and observe this crash report in Fabric. I'll let you know if this crash report dismiss.. @max-mironov We've decided not to use CodePush & RN in our project anymore and transfer JavaScript code into native Java-Android since there are too many crash reports except this one in many Android devices according to the Fabric crash list and user feedback. I'm sorry I can't observe this issue anymore.. ",
    "Martian2Lee": "productFlavors {\n        staging {\n            ...\n            resValue 'string', \"CODE_PUSH_APK_BUILD_TIME\", String.format(\"\\\"%d\\\"\", System.currentTimeMillis())\n            ...\n        }\n        production {\n            ...\n            resValue 'string', \"CODE_PUSH_APK_BUILD_TIME\", String.format(\"\\\"%d\\\"\", System.currentTimeMillis())\n            ...\n        }\n    }\nIn /android/app/build.gradle, I added this line resValue 'string', \"CODE_PUSH_APK_BUILD_TIME\", String.format(\"\\\"%d\\\"\", System.currentTimeMillis()). productFlavors {\n        staging {\n            ...\n            resValue 'string', \"CODE_PUSH_APK_BUILD_TIME\", String.format(\"\\\"%d\\\"\", System.currentTimeMillis())\n            ...\n        }\n        production {\n            ...\n            resValue 'string', \"CODE_PUSH_APK_BUILD_TIME\", String.format(\"\\\"%d\\\"\", System.currentTimeMillis())\n            ...\n        }\n    }\nIn /android/app/build.gradle, I added this line resValue 'string', \"CODE_PUSH_APK_BUILD_TIME\", String.format(\"\\\"%d\\\"\", System.currentTimeMillis()). ",
    "guilharj": "Ho @sergey-akhalkov  thanks for the reply.  For sure we have a good case to explain when it's necessary to change the node_modules path. I'm using react-native in the  \"browfield\", I mean that we have our current app in pure android and now we are including some features in react-native. \nWe've organized the project like this: \n\nPROJECT_HOME_DIR\n--> android app\n----> \n--> react-native-modules\n-----> main_project ( this is the project that we generate the bundle and configure code-push)\n-------->android\n-------->index.android.js\n----->custom_module1 (react-native project imported in main_project)\n----->custom_module2 (react-native project imported in main_project)\n\nSo in this situation, the NATIVE project that goes to the play store is not main_project/android, it is \"android app\".  And I need to apply the gradle plugin of code-push in that build.gradle , and note inside main_project/android/build.gradle. But the node_modules that I use inside \"android app\", is located at \"../react-native-modules/main_project/node_modules\"\nThat is why I should modify the path: Browfiled projects situation :) \nTell me if I was not clear enough. \nThanks again for the reply!.\n. Hi @sergey-akhalkov , I did some tests And appears to work well . Thanks ! . ",
    "merryejik": "I have the same situation.\nIn console I get: \n'Could not determine correct xcode proj path to retrieve related plist file, there are multiple xcodeproj under the solution.'\nSome paths from xcodeProjectPaths:\n'ios/Pods/Pods.xcodeproj/project.pbxproj',\n'ios/reactapp.xcodeproj/project.pbxproj'\nSo you are looking in subfolders too.\nINFOPLIST_FILE in my project 'reactapp/Info.plist'. ",
    "bulby97": "\nSeems like the rc5 is not yet available. \nIt's not immediate, it's every time the app is starting.\nI've already tried to close and open the app again, but nothing changes. :(. @sergey-akhalkov I confirm that the problem still exists with react-native@0.43 and is not related to FlatList. I dropped FlatList to ListView and switched to 0.43 and boom, layout broken.\nAndroid seems ok (just released 0.43 on production on Android and no bugs), but when upgrading from 0.42 to 0.43 and hot push on iOS, I have that layout issue :(\nHere is my branch: https://github.com/bulby97/Venez-et-Raisonnons/tree/feature/concordance\nHot-push with 0.42 is 100% ok. \nSwitching to 0.43 and hot-push is not ok.. > so is it possible that you are trying to apply js bundle (from CodePush update) compiled with RN0.43 to the apps that have been compiled with RN0.42 and that are currently running js bundle that also has been complied with RN0.42?\n@sergey-akhalkov this is exactly what I'm trying to do, sorry if I did not made it clear.\nWhen I have time I'll try to create a sample app running on 0.42, and applying a code-push update running on 0.43\n. \nActually it's a very good and logical point and I don't even know why I didn't even think about it. I must be very tired.\nThanks a lot for your time and sorry ! Closing now.. ",
    "jcharbo": "Hi @bulby97 , I seem to be having an issue upgrading to rc4 as well.  When I compile in Android I get the following:\nError:09:23:37.487 [ERROR] [system.err] /Users/jeremeycharbonnet/thejump/node_modules/react-native-code-push/android/app/src/main/java/com/microsoft/codepush/react/CodePushNativeModule.java:22: error: cannot find symbol\n09:23:37.487 [ERROR] [system.err] import com.facebook.react.uimanager.ReactChoreographer;\n09:23:37.487 [ERROR] [system.err]                                    ^\n09:23:37.487 [ERROR] [system.err]   symbol:   class ReactChoreographer\n09:23:37.487 [ERROR] [system.err]   location: package com.facebook.react.uimanager\n09:23:38.128 [ERROR] [system.err] /Users/jeremeycharbonnet/thejump/node_modules/react-native-code-push/android/app/src/main/java/com/microsoft/codepush/react/CodePushNativeModule.java:257: error: package ReactChoreographer does not exist\n09:23:38.128 [ERROR] [system.err]                                     ReactChoreographer.getInstance().postFrameCallback(ReactChoreographer.CallbackType.TIMERS_EVENTS, new Choreographer.FrameCallback() {\n09:23:38.128 [ERROR] [system.err]                                                                                                          ^\n09:23:38.130 [ERROR] [system.err] /Users/jeremeycharbonnet/thejump/node_modules/react-native-code-push/android/app/src/main/java/com/microsoft/codepush/react/CodePushNativeModule.java:257: error: cannot find symbol\n09:23:38.130 [ERROR] [system.err]                                     ReactChoreographer.getInstance().postFrameCallback(ReactChoreographer.CallbackType.TIMERS_EVENTS, new Choreographer.FrameCallback() {\n09:23:38.130 [ERROR] [system.err]                                     ^\n09:23:38.130 [ERROR] [system.err]   symbol: variable ReactChoreographer\n09:23:38.386 [ERROR] [system.err] 3 errors\n09:23:39.403 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] \n09:23:39.406 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] FAILURE: Build failed with an exception.\n09:23:39.406 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] \n09:23:39.406 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] * What went wrong:\n09:23:39.406 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] Execution failed for task ':react-native-code-push:compileReleaseJavaWithJavac'.\n09:23:39.406 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] > Compilation failed; see the compiler error output for details.\n09:23:39.406 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] \n09:23:39.406 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] * Exception is:\n09:23:39.407 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':react-native-code-push:compileReleaseJavaWithJavac'.\n09:23:39.407 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:84)\n09:23:39.407 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:55)\n09:23:39.407 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:62)\n09:23:39.407 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:58)\n09:23:39.407 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:88)\n09:23:39.407 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter.execute(ResolveTaskArtifactStateTaskExecuter.java:46)\n09:23:39.407 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:51)\n09:23:39.407 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:54)\n09:23:39.407 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\n09:23:39.407 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:34)\n09:23:39.407 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker$1.execute(DefaultTaskGraphExecuter.java:236)\n09:23:39.407 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker$1.execute(DefaultTaskGraphExecuter.java:228)\n09:23:39.407 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.internal.Transformers$4.transform(Transformers.java:169)\n09:23:39.407 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:106)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:61)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:228)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:215)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.processTask(AbstractTaskPlanExecutor.java:77)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.run(AbstractTaskPlanExecutor.java:58)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:54)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:40)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] Caused by: org.gradle.api.internal.tasks.compile.CompilationFailedException: Compilation failed; see the compiler error output for details.\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:48)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:33)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.delegateAndHandleErrors(NormalizingJavaCompiler.java:104)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:53)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:38)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.tasks.compile.CleaningJavaCompilerSupport.execute(CleaningJavaCompilerSupport.java:35)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.tasks.compile.CleaningJavaCompilerSupport.execute(CleaningJavaCompilerSupport.java:25)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.tasks.compile.incremental.IncrementalCompilationFinalizer.execute(IncrementalCompilationFinalizer.java:39)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.tasks.compile.incremental.IncrementalCompilationFinalizer.execute(IncrementalCompilationFinalizer.java:24)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.tasks.compile.JavaCompile.performCompilation(JavaCompile.java:206)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:164)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at com.android.build.gradle.tasks.factory.AndroidJavaCompile.compile(AndroidJavaCompile.java:49)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.project.taskfactory.DefaultTaskClassInfoStore$IncrementalTaskAction.doExecute(DefaultTaskClassInfoStore.java:163)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.project.taskfactory.DefaultTaskClassInfoStore$StandardTaskAction.execute(DefaultTaskClassInfoStore.java:134)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.project.taskfactory.DefaultTaskClassInfoStore$StandardTaskAction.execute(DefaultTaskClassInfoStore.java:123)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:95)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:76)\n09:23:39.408 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   ... 20 more\n09:23:39.409 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]. thanks @sergey-akhalkov , that fixed it. ",
    "lappalj4": "Ok, it seems like the issue in this case is what is being codepushed, not in CodePush itself. Thanks again, and sorry for the troubles.. ",
    "prateekkohli1989": "I think code push should start supporting React Native unbundle. In android, jsbundle took time for initialization, with unbundle it is quick and took less than 1s to load the app. . ",
    "vivek-walecha-657": "any updates on this?. Hi,\n@alexandergoncharov  how can this be possible, what thats the problem in our codepush, how there can be size mismatch?\n`URL downloadUrl = new URL(downloadUrlString);\n            connection = (HttpURLConnection) (downloadUrl.openConnection());\n            bin = new BufferedInputStream(connection.getInputStream());\n        long totalBytes = connection.getContentLength();\n        long receivedBytes = 0;\n\n        File downloadFolder = new File(getCodePushPath());\n        downloadFolder.mkdirs();\n        downloadFile = new File(downloadFolder, CodePushConstants.DOWNLOAD_FILE_NAME);\n        fos = new FileOutputStream(downloadFile);\n        bout = new BufferedOutputStream(fos, CodePushConstants.DOWNLOAD_BUFFER_SIZE);\n        byte[] data = new byte[CodePushConstants.DOWNLOAD_BUFFER_SIZE];\n        byte[] header = new byte[4];\n\n        int numBytesRead = 0;\n        while ((numBytesRead = bin.read(data, 0, CodePushConstants.DOWNLOAD_BUFFER_SIZE)) >= 0) {\n            if (receivedBytes < 4) {\n                for (int i = 0; i < numBytesRead; i++) {\n                    int headerOffset = (int) (receivedBytes) + i;\n                    if (headerOffset >= 4) {\n                        break;\n                    }\n\n                    header[headerOffset] = data[i];\n                }\n            }\n\n            receivedBytes += numBytesRead;\n            bout.write(data, 0, numBytesRead);\n            progressCallback.call(new DownloadProgress(totalBytes, receivedBytes));\n        }\n\n        if (totalBytes != receivedBytes) {\n            throw new CodePushUnknownException(\"Received \" + receivedBytes + \" bytes, expected \" + totalBytes);\n        }`\n\nThis is the code to calculate total bytes in connection and receivedBytes.\nPlease reopen the issue if possible, we need to discuss.\n . @alexandergoncharov Thank You for reopening the issue. Please can you help how there can be a mismatch?. One thing I have done is while integrating is added this line:\nCodePush.setReactInstanceHolder(mReactNativeHost); after super.onCreate(); in Application class, but documentation says:\n\nneeds to be called before super.onCreate(). Is that the issues?. @alexandergoncharov, Thanx for writing back.\nNot exactly, Can you throw some light on the size mismatch?\nBecause it can be possible the bundle we are uploading to app centre and the size coming by update API of code push are not equal.\nTell what other input you need from me? @thecachedbyte and me are working together on this issue.\nRegards,\nVivek\n. @alexandergoncharov \nWe need to update code push react native SDK to the latest version. the code snippet I have attached above is of the older SDK code. If you should have told us this it would be solved earlier.\nAnyways it's my bad ill update the react native SDK.\n. Thanx for update.. @lithin hi you dint get any issue like this?. ",
    "Lxxyx": "Same problem.. ",
    "messense": "\n. @sergey-akhalkov I have checked installation, it's ok.\nBefore upgrading, I did a CodePush js bundle release to old version App(with RN 0.39) with targetBinaryVersion set to ~1.2. Now the new version has binary version 1.3 build 1.\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Name       \u2502 Update Metadata                  \u2502 Install Metrics            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Debug      \u2502 No updates released              \u2502 No installs recorded       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Production \u2502 Label: v14                       \u2502 Active: 14% (318 of 2,340) \u2502\n\u2502            \u2502 App Version: ~1.2                \u2502 Total: 319 (158 pending)   \u2502\n\u2502            \u2502 Mandatory: No                    \u2502                            \u2502\n\u2502            \u2502 Release Time: 9 days ago         \u2502                            \u2502\n\u2502            \u2502 Released By: messense@icloud.com \u2502                            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\nWhen a call codePush.sync() with updateDialog: true:\njavascript\ncodePush.sync({\n  updateDialog: true,\n  installMode: codePush.InstallMode.ON_NEXT_RESUME\n})\nIt shows a dialog asking me to install or cancel update(The update for old App targeting binary version ~1.2) which I believe it should not. After I tap Install and wait for a while it crashes.. I tried to add some logging in CodePush.js:\n2017-04-10 20:34:19.145 [info][tid:com.facebook.react.JavaScript] 'local package:', undefined\n2017-04-10 20:34:19.146 [info][tid:com.facebook.react.JavaScript] 'query package: ', { appVersion: '1.3' }\n2017-04-10 20:34:20.437 [info][tid:com.facebook.react.JavaScript] 'update: ', { deploymentKey: '*******',\n  description: '',\n  label: 'v8',\n  appVersion: '1.3',\n  isMandatory: false,\n  packageHash: 'f653a75a0a0927c9c46f14196d557cb4d6cab4e8193e947b18520a93995bb23f',\n  packageSize: 3015085,\n  downloadUrl: '*****' }\nOh, the label v8 is not goood, so I checked the release history. Apparently I did a wrong targetBinaryVersion release a long time ago, it was set to 1... After I patched the metadata, it did not crash again.\nMy bad.... Thanks for your help!.. ",
    "dwilt": "And by the way, you guys built an incredible product. Nice job. \ud83d\udc4d . @max-mironov This is exactly what I was looking for. You guys should mention this in the setup instructions because while reading the docs, it seems like the only way to have it is by following the native instructions (which you explicitly link to) which involve putting keys in the strings.xml file for Android or in the Info.plist file for iOS. \nEven on your Getting Started page, there is no real reference to this deploymentKey (other than here where it uses the sync method example - not the initialization of the plugin). I wouldn't be surprised if most developers went and setup their keys in the native files without realizing all they needed to put it was in one place on the JS side.. @max-mironov So I updated my main js file to look like this:\n```js\nimport codePush from 'react-native-code-push';\nimport {\n    CODEPUSH_KEY\n} from '../env';\n@codePush({\n    deploymentKey: CODEPUSH_KEY,\n    checkFrequency: codePush.CheckFrequency.ON_APP_RESUME,\n    installMode: codePush.InstallMode.IMMEDIATE\n})\nclass App extends Component {\n``\nI also removed the key fromInfo.plistandstrings.xml`. However, when trying to build on Android, I'm getting this:\n/Users/dwilt/Projects/GJS/gjs-app/android/app/src/main/java/com/greatjonesstreet/MainApplication.java:61: error: cannot find symbol\n        new CodePush(getResources().getString(R.string.reactNativeCodePush_androidDeploymentKey), getApplicationContext(), BuildConfig.DEBUG),\n                                                      ^\n  symbol:   variable reactNativeCodePush_androidDeploymentKey\nAccording to the Android setup it seems that we need to put the license key in the android/app/build.gradle and reference in MainApplication.java when instantiating the plugin:\njava\nnew CodePush(BuildConfig.CODEPUSH_KEY, MainApplication.this, BuildConfig.DEBUG), // Add/change this line.\nIf you're saying all we need to do is put it in our CodePushOptions object, what's this new CodePush call look like?. That still breaks (because I didn't define the keys in android/app/build.gradle):\n/Users/dwilt/Projects/GJS/gjs-app/android/app/src/main/java/com/greatjonesstreet/MainApplication.java:61: error: cannot find symbol\n        new CodePush(BuildConfig.CODEPUSH_KEY, MainApplication.this, BuildConfig.DEBUG),\n                                ^\n  symbol:   variable CODEPUSH_KEY\nWhat does work however is just passing in an empty string:\njava\nnew CodePush(\"\", MainApplication.this, BuildConfig.DEBUG),\nThis sort of explanation is absolutely missing from the documentation :). We're running into this issue as well. I've made some changes which I can confirm were correctly uploaded:\n\nAnd in the console it says it updated:\n\nbut I'm not seeing my changes show up in the app. You can see the matching version number(14). Here's my code:\n```js\nexport function restartApp() {\n    codePush.restartApp();\n}\nexport default async function () {\n    if (codePushEnabled) {\n        const successCode = await codePush.sync({\n            deploymentKey: CODEPUSH_KEY,\n            installMode: codePush.InstallMode.ON_NEXT_RESTART\n        });\n    if (successCode === codePush.SyncStatus.UPDATE_INSTALLED) {\n        store.dispatch(showUpdateModal());\n    }\n}\n\n}\n``\nWhen the app starts, we are callingsync`, then on complete, showing a modal to let the user know we want them to restart the app:\n\nWhen they click \"Ok, restart!\" it does restart the app and after a restart I can see in the console is shows \"Reporting CodePush update success (v14)\" but my changes aren't there. Any ideas?\nThis used to be working flawlessly but it wasn't until lately things aren't working properly.\nVersions:\n\"react-native\": \"0.41.2\",\n\"react-native-code-push\": \"^1.17.3-beta\",. @sergey-akhalkov I figured it out.  We had a conditional inside of our AppDelegate.m file pointing to the packager bundle and not CodePush:\n```\nifdef DEBUG\njsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index.ios\" fallbackResource:nil];\n\nelse\njsCodeLocation = [CodePush bundleURL];\n\nendif\n```\nwhich I double checked because of this comment. ",
    "duhseekoh": "Just curious if there is any downside in terms of codepush functionality to declaring the codepush key in the js bundle itself? \ne.g. Will rollbacks and updates all still happen the same way?. ",
    "baba43": "Same question here.\nAlso is it a bad idea to exchange Staging and Production keys after build? I thought about giving our QA/developers the possibility to change their versions independenly from their build.. ",
    "joeferraro": "@sergey-akhalkov any idea when this might make it into a release?. We have resolved this issue, but frankly, we're not sure how we did it. So I'll close this for now and report back if/when we determine the root cause. Thanks!. ",
    "MrLoh": "Has this been release yey, and does it also apply to ON_NEXT_SUSPEND, the docs only mention ON_NEXT_RESUME at the moment. . See related appcenter issue: https://github.com/Microsoft/AppCenter-SDK-React-Native/issues/501. ",
    "kevinresol": "Any updates? This has been idle for almost an year.. May I know which part is not clear in the \"Steps to Reproduce\" section?. Anyway I will try my best:\n\nMake a release to CodePush, let's suppose its \"Target Version\" is 1.0.0\nMake a android release to Play Store, make sure its version is higher, say 1.0.1\nStart the android app (and it will crash)\nMake a release to CodePush, make sure its \"Target Version\" matches the app version (i.e. 1.0.1)\nStart the android app (and it will not crash). I think play store is not important. But release build (signed) and Android 8 should be the key points.\n\nAhh, sorry I believe I missed one important observation.\nThe app may not crash at the very beginning. On my particular app, it sometimes crashes when user clicks on a password TextInput and sometimes when a button is pressed.. ",
    "canyara": "not fix yet. ",
    "skleest": "@sergey-akhalkov Thanks for the update--will check ASAP.. Hi @sergey-akhalkov Thanks for the update--it is working well on production env.\nI'm having trouble using this on staging environment, getting the following error:\n\"/Users/SLEE/Library/Developer/Xcode/DerivedData/Aura-drnguqqakspmosfmqlphgdyhukcr/Build/Products/Staging-watchos/AuraWatch.app: No such file or directory\"\nSeems like Staging-watchos part is the problem, I'm guessing I have to change build settings somewhere for the watch app. Looked around for a while but couldn't find anything, any ideas?. Thanks @sergey-akhalkov--yes, I overcome other errors (e.g. library not found), but this one seems specific to the watchos seeing that /Staging-watchos/ folder doesnt exist. Is there a way to change that path to Production?. ",
    "natdm": "There's no output for code-push debug android.\nI do have this in the console, I just realized:\njavascript\nlogging.js:3[CodePush] An update is available, but it is being ignored due to having been previously rolled back.\nlogging.js:3[CodePush] App is up to date.\nThis doesn't happen with iOS.. and it doesn't show any installs or rollbacks in the cli\n```\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Name       \u2502 Update Metadata                      \u2502 Install Metrics        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 android    \u2502 Label: v5                            \u2502 No installs recorded   \u2502\n\u2502            \u2502 App Version: 1.0                     \u2502                        \u2502\n\u2502            \u2502 Mandatory: Yes                       \u2502                        \u2502\n\u2502            \u2502 Release Time: a day ago              \u2502                        \u2502\n\u2502            \u2502 Released By: nathan.hyland@gmail.com \u2502                        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 ios        \u2502 Label: v62                           \u2502 Active: 1.4% (1 of 69) \u2502\n\u2502            \u2502 App Version: 1.9                     \u2502 Total: 1               \u2502\n\u2502            \u2502 Mandatory: Yes                       \u2502                        \u2502\n\u2502            \u2502 Release Time: 12 minutes ago         \u2502                        \u2502\n\u2502            \u2502 Released By: nathan.hyland@gmail.com \u2502                        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Production \u2502 No updates released                  \u2502 No installs recorded   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Staging    \u2502 Label: v67                           \u2502 No installs recorded   \u2502\n\u2502            \u2502 App Version: 1.9                     \u2502                        \u2502\n\u2502            \u2502 Mandatory: Yes                       \u2502                        \u2502\n\u2502            \u2502 Release Time: 12 minutes ago         \u2502                        \u2502\n\u2502            \u2502 Released By: nathan.hyland@gmail.com \u2502                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n. Got some debug logs:\nListening for android debug logs (Press CTRL+C to exit)\n[06:54:03] Checking for update.\n[06:54:03] Downloading package.\n[06:54:03] An unknown error occurred.\n[06:54:03] Update is invalid - A JS bundle file named \"null\" could not be found within the downloaded contents. Please check that you are releasing your CodePush updates using the exact s\name JS bundle file name that was shipped with your app's binary.\n```\nThis is after:\n\nDeleting the line you asked me to delete\nStaging and promoting my application\nRestarting android app. It's already in there. . So I added that to the MainApplication directly as you stated. I had to take out @Nullablefor it to compile, though. It'll compile and crash -- my guess is something to do with no @Nullable? (not a big Java developer..)\n\nIf I don't take that out, I get this error:\n```\n/Users/nathanhyland/reactnative/appname/android/app/src/main/java/com/appname/MainApplication.java:21: error: cannot find symbol\n    @Nullable\n     ^\n  symbol:   class Nullable\n  location: class MainApplication\n1 error\nIncremental compilation of 1 classes completed in 0.696 secs.\n:app:compileReleaseJavaWithJavac FAILED\nFAILURE: Build failed with an exception.\n\n\nWhat went wrong:\nExecution failed for task ':app:compileReleaseJavaWithJavac'.\n\nCompilation failed; see the compiler error output for details.\n\n\n\nTry:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\n\nBUILD FAILED\nTotal time: 43.429 secs\nmake: *** [android-prod] Error 1\n```\nWhen I push updates now (without @Nullable), I see this:\n```\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Name       \u2502 Update Metadata                      \u2502 Install Metrics        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 android    \u2502 Label: v8                            \u2502 Active: 0% (0 of 1)    \u2502\n\u2502            \u2502 App Version: 1.1                     \u2502 Total: 0               \u2502\n\u2502            \u2502 Mandatory: Yes                       \u2502 Rollbacks: 1           \u2502\n\u2502            \u2502 Release Time: a few seconds ago      \u2502                        \u2502\n\u2502            \u2502 Released By: nathan.hyland@gmail.com \u2502                        \u2502\n```\n. ",
    "omkarsheral1989": "Adding this fixed for me:\n@Override\n    protected String getJSBundleFile() {\n      return CodePush.getJSBundleFile();\n    }. ",
    "WhoJave": "@natdm have you solved it ? I came across the same problem as you . @TrustTheBoy  hi , how do you solved this crash on Samsung ? I  use react-native-pushy and just crash on Samsung , could u do me a favor ? Tks so much. ",
    "lelup": "Hi @max-mironov \nI used \"react-native\": \"^0.41.2\" and \"react-native-code-push\": \"^2.0.2-beta\" in my app. I will check your help. Thanks!. @sergey-akhalkov Thanks for your support!\nBy the way, I would like to ask you :\nIs there any way to change the language of Alert updated when I run code-push?\n. yep! many thanks @sergey-akhalkov . ",
    "iambanh2": "I got problems. I using RN version \"react-native\": \"0.41.2\". How to fix this problem.. ",
    "jjdp": "@max-mironov i will take a look at it next week when i have time. it probably is because of other libraries. it seems to be caused by proguard because of this warning: \ncom.facebook.fbui.textlayoutbuilder.proxy.StaticLayoutProxy: can't find referenced method 'StaticLayout(java.lang.CharSequence,int,int,android.text.TextPaint,int,android.text.Layout$Alignment,android.text.TextDirectionHeuristic,float,float,boolean,android.text.TextUtils$TruncateAt,int,int)' in library class android.text.StaticLayout\nI have to use one of these:\n-dontwarn com.facebook.fbui.textlayoutbuilder.proxy.StaticLayoutProxy\n-dontwarn android.text.StaticLayout\nyet i can't build a release version if I don't use the above. and\n-keep class com.facebook.fbui.textlayoutbuilder.proxy.StaticLayoutProxy\n-keep class android.text.StaticLayout\nsomehow still warns me when i build.\nhttps://github.com/facebook/react-native/issues/11891. it isn't related to any 3rd party libs at all. it seems to be an issue with RN or the code-push lib compatibility with the StaticLayoutor StaticLayoutProxy as I have tried it with the demo app. i cant reproduce it without codepush since the api has the function to reload RN's bundle. the simplest solution i guess would be to turn off proguard since -dontwarn causes the issue but that would be disappointing. i see. thank you for the info. is there no backwards compatibility < 0.47?\ncan't you just delete the @Override instead of the method. ah that makes sense. ",
    "xwartz": "@sergey-akhalkov \nHi, I can not reproduce this issue, only occurs on some device.. ",
    "ravi5955": "@sergey-akhalkov it occurs always on redmi 4. ",
    "MrMYHuang": "I find a workaround: use codePushStatusDidChange's codePush.SyncStatus.UPDATE_INSTALLED case.. ",
    "jiaminglu": "That commit is removed.\nThe default configuration works well and the problem with resourcesDirConfigName won't cause any problem if we stick to the default configuration.\nThe problem with this line is that, if we choose to use custom configurations, it might cause the generated resources to be placed in wrong place (together with the .jsbundle file), which resulted in wrong hash calculated. (The generateBundledResourcesHash script decides which file is generated by react-native bundle based on mtime, and thus the .jsbundle file is considered as a resource file). ",
    "Terfender": "I am closing this because I have doubt that I am using new libs which touches native codes. \n\nNote: Any product changes which touch native code (e.g. modifying your AppDelegate.m/MainActivity.java file, adding a new plugin) cannot be distributed via CodePush, and therefore, must be updated via the appropriate store(s).\n\nI will confirm that the issues are gone when I submit the new binaries to the stores.\nSorry for inconvenience.. ",
    "Temereru": "I have 2 different apps for android and ios\nbut now I added the deployment key in my index.js - hardcoded, and it is working fine\nyou can close this issue\nthanks for helping :). ",
    "minhtc": "the updatePackage has attribute download which cannot convert to native type so we have to remove it.\n{\n  deploymentKey: 'xxxx',\n  description: '',\n  label: 'v35',\n  appVersion: '3.0.2',\n  isMandatory: true,\n  packageHash: 'xxxx',\n  packageSize: 6181923,\n  downloadUrl: 'xxxx',\n  download: [Function function],\n  isPending: false,\n  failedInstall: false\n}. Can you help to check again width rn 0.39 and log data in objective-C\nMy app crash when trying to read NSDictation updatePackage if the object has 'download' property.. ",
    "matt33": "Just simulated it - when I download the app from the play store, it runs well for the first time. But then when I launch it and update should be installed to the latest available the application hangs on white screen.\nSame problem happens for iOS - after downloading the app from app store and restarting the app, all previous releases should be installed but the app just hangs on white screen.\nIs this because there was a lot of code-push releases since we made the app available in the play store? Is there any way to debug this or see what is happening?. Thanks a lot for the response @sergey-akhalkov \nWe'll try installing bugsnag and debug some more, will post the answer once we have some conclusion.. @tiaanduplessis turned out to be different issue with the splash screen. We still have a couple of rollbacks for every version but did not have time to get to the bottom of it.. ",
    "tiaanduplessis": "@matt33 I'm experiencing a similar issue on android. Were you able to resolve it?. ",
    "neeboo": "Hi @max-mironov , I've came across the same problem after the install-restart process using the example you post up here. I think maybe the bundled JS is downloaded from server but not loaded after device rebooted.\n. Thanks,@max-mironov. Changing the \"Product Scheme\" is the right way to apply the update.\nIt would be good if we can put the instruction to \"code-push-ios-guide\" for those are not familiar to Xcode setting.. ",
    "Evan-Future": "@max-mironov \n\nNOTE: CodePush updates should be tested in modes other than Debug mode. In Debug mode, React Native app always downloads JS bundle generated by packager, so JS bundle downloaded by CodePush does not apply.\n\nthe above answer has solved my question, thank you very much! (unsupport debug!\n\nJS bundle downloaded by CodePush does not apply). \n",
    "didierbrun": "Hello,\nIt seems that the mutableUpdatePackage dictionary in CodePushPackage.m contains a \"download\" key that is a Function, thus it causes a crash during JSON serialization on this line : \nNSData *updateSerializedData = [NSJSONSerialization dataWithJSONObject:mutableUpdatePackage options:0 error:&error];\nAdding this :\n[mutableUpdatePackage removeObjectForKey:@\"download\"];\njust before the NSJSONSerialization and the crash gone.\nHope it helps.. @max-mironov, I will test the PR this evening, thanks for your support.. ",
    "dguillamot": "Can confirm that we are also experiencing this with our app, currently in production. Looking forward to a merged fix via npm whenever you are ready to do so. . ",
    "yelkamel": "Oh sorry, I didn't see this issue.\nIt's similar when I adding this \n[mutableUpdatePackage removeObjectForKey:@\"download\"];\nbefore that \nNSData *updateSerializedData = [NSJSONSerialization dataWithJSONObject:mutableUpdatePackage options:0 error:&error];\nit's work perfectly thank you :) . ",
    "inakianduaga": "Here are more details about the stack trace captured in Android Studio when codepush right after codepush runs the download\n05-03 01:35:55.321 11433-11464/com.reactnativets W/ResourceType: No package identifier when getting value for resource number 0x00000000\n05-03 01:35:55.338 11433-11464/com.reactnativets E/AndroidRuntime: FATAL EXCEPTION: AsyncTask #2\n                                                                   Process: com.reactnativets, PID: 11433\n                                                                   java.lang.RuntimeException: An error occurred while executing doInBackground()\n                                                                       at android.os.AsyncTask$3.done(AsyncTask.java:325)\n                                                                       at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:354)\n                                                                       at java.util.concurrent.FutureTask.setException(FutureTask.java:223)\n                                                                       at java.util.concurrent.FutureTask.run(FutureTask.java:242)\n                                                                       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)\n                                                                       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)\n                                                                       at java.lang.Thread.run(Thread.java:761)\n                                                                    Caused by: com.microsoft.codepush.react.CodePushUnknownException: Error in getting binary resources modified time\n                                                                       at com.microsoft.codepush.react.CodePush.getBinaryResourcesModifiedTime(CodePush.java:113)\n                                                                       at com.microsoft.codepush.react.CodePushNativeModule$3.doInBackground(CodePushNativeModule.java:232)\n                                                                       at com.microsoft.codepush.react.CodePushNativeModule$3.doInBackground(CodePushNativeModule.java:227)\n                                                                       at android.os.AsyncTask$2.call(AsyncTask.java:305)\n                                                                       at java.util.concurrent.FutureTask.run(FutureTask.java:237)\n                                                                       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)\u00a0\n                                                                       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)\u00a0\n                                                                       at java.lang.Thread.run(Thread.java:761)\u00a0\n                                                                    Caused by: android.content.res.Resources$NotFoundException: String resource ID #0x0\n                                                                       at android.content.res.Resources.getText(Resources.java:335)\n                                                                       at android.content.res.Resources.getString(Resources.java:381)\n                                                                       at com.microsoft.codepush.react.CodePush.getBinaryResourcesModifiedTime(CodePush.java:110)\n                                                                       at com.microsoft.codepush.react.CodePushNativeModule$3.doInBackground(CodePushNativeModule.java:232)\u00a0\n                                                                       at com.microsoft.codepush.react.CodePushNativeModule$3.doInBackground(CodePushNativeModule.java:227)\u00a0\n                                                                       at android.os.AsyncTask$2.call(AsyncTask.java:305)\u00a0\n                                                                       at java.util.concurrent.FutureTask.run(FutureTask.java:237)\u00a0\n                                                                       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)\u00a0\n                                                                       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)\u00a0\n                                                                       at java.lang.Thread.run(Thread.java:761)\u00a0\n05-03 01:35:56.103 11433-11433/com.reactnativets I/Choreographer: Skipped 37 frames!  The application may be doing too much work on its main thread.. Upon further investigation it could be the same problem as this issue #771, note that my \nreact-native link react-native-code-push failed to complete cleanly with an error\n```\nrnpm-install info Android module react-native-code-push is already linked\nrnpm-install info iOS module react-native-code-push is already linked\nfs.js:584\n  return binding.open(pathModule._makeLong(path), stringToFlags(flags), mode);\n                 ^\nError: ENOENT: no such file or directory, open '/Users/ianduaga/Downloads/react-native-typescript/ios/\"ReactNativeTS-tvOSTests/Info.plist\"'\n    at Object.fs.openSync (fs.js:584:18)\n    at Object.fs.readFileSync (fs.js:491:33)\n    at Object. (/Users/ianduaga/Downloads/react-native-typescript/node_modules/react-native-code-push/scripts/postlink/ios/postlink.js:63:24)\n    at Module._compile (module.js:571:32)\n    at Object.Module._extensions..js (module.js:580:10)\n    at Module.load (module.js:488:32)\n    at tryModuleLoad (module.js:447:12)\n    at Function.Module._load (module.js:439:3)\n    at Module.require (module.js:498:17)\n    at require (internal/module.js:20:19)\n/Users/ianduaga/Downloads/react-native-typescript/node_modules/react-native/local-cli/core/makeCommand.js:29\n        throw new Error(Error occured during executing \"${command}\" command);\n        ^\nError: Error occured during executing \"node node_modules/react-native-code-push/scripts/postlink/run\" command\n    at ChildProcess.prelink (/Users/ianduaga/Downloads/react-native-typescript/node_modules/react-native/local-cli/core/makeCommand.js:29:15)\n    at emitTwo (events.js:106:13)\n    at ChildProcess.emit (events.js:194:7)\n    at maybeClose (internal/child_process.js:899:16)\n    at Process.ChildProcess._handle.onexit (internal/child_process.js:226:5)\n```\nnot sure that would be related, since the error seems to be for the IOS integration part. @sergey-akhalkov Thanks, I looked through that before (manual Android setup) but I'll give it a shot one more time. One thing I didn't have clear is if the \n// 2. Override the getJSBundleFile method in order to let\n        // the CodePush runtime determine where to get the JS\n        // bundle location from on each app start\n        @Override\n        protected String getJSBundleFile() {\n            return CodePush.getJSBundleFile();\n        }\nis really necessary or not on the latest version? Because the react-native link react-native-code-push added the other things and not that one, and the codepush download & so on seemed to be working without it (in fact adding that was breaking things I believe). @sergey-akhalkov I gave it another shot and now it's sort of working (I had a missing line in the gradle push configuration).\nI mean \"sort of working\" because I don't really understand how codepush should work in dev mode vs release mode. What I would imagine is that in dev mode codepush checks nothing & package is fetched from dev server as usual. In prod mode, it should do the checking and update if new version is found.\nThis is not what I'm seeing however, even when running in dev mode I see the codepush \"checking updates\", \"downloading update\" (if I made a deploy) and so on. While in release mode (building the signed apk and pushing it to the device) I see no codepush logs at all on android logcat. \nHere's a small screen grab showing what happens in dev mode\n\nThe command to generate the codepush release \"custom\" (since I need it to go through the TypeScript compiler):\ntsc && react-native bundle --entry-file build/Index.js --dev false --platform android --bundle-output build/bundle.js && code-push release ReactNative-Android ./build/bundle.js '*' -d Staging\". ",
    "jose920405": "@bernatfortet WOW!..\nWorks... this is very strange. ",
    "JulienKode": "@max-mironov  Thank you !. ",
    "almirfilho": "Thank you very much @max-mironov, I'll test it and return to this issue in the case it does not work.\nClosing this issue.\nP.S.: Don't you think it's worth mentioning this in the Docs?. PR sent =)\nhttps://github.com/Microsoft/react-native-code-push/pull/830. ",
    "li-zhenyu": "hi @max-mironov \nI used react-native link react-native-code-push\nI also added something:\nin Xcode Info:\n\nin Xcode Build Settings:\n\nin info.plist\n\n. @max-mironov \nActually I got another warning:\nwarning: using 'ALWAYS_SEARCH_USER_PATHS = YES' while building targets which define modules ('DEFINES_MODULE = YES') may fail. Please migrate to using 'ALWAYS_SEARCH_USER_PATHS = NO'.\nbut I tried to set the value to 'No', this warning is still happen,\nmay that cause the failed?. @max-mironov \nMy app build failed so I can not see the Unable to resolve module 'react-native-code-push' error.\nI have tried to build with XCode and the output is :\n\nI think 'ALWAYS_SEARCH_USER_PATHS = YES' cause the build failed but I don't know how to fix it.\nSomehow it's value is always YES even I set it to 'No'.\n\nbtw, Xcode version is 8.3.2. @max-mironov \nI uninstalled everything about CodePush and installed again.\nThen I installed it manually, it works fine now.\nThanks, I'm going to close this.. ",
    "mobile-support93": "Thanks, that helped me resolve the issue.. ",
    "esutton": "Looks like it could be an Android CodePush 2.0.3-beta compatibility issue with react-native 0.42.3? \nhttps://github.com/Microsoft/react-native-code-push/issues/792\nI think I will remove CodePush from my Android build settings.\nAt least until I know I can update to something greater than react-native 0.42.3 without breaking react-native-maps and other unknown things.. @max-mironov Thanks Max.  \nI think CodePush is magic and really appreciate your work!\nWhat will I be missing if I downgrade both iOS and Android to 1.17.x versions with RN  0.42.3?\nShould downgrading \"just work\"?. @max-mironov  Very good!\nUpgrading packages for a single iOS platform can be problematic. \nI wish there was some easy way to have two package.json one for Android and one for iOS so I could lock down package versions for each target.  Maybe a Node.js expert might have ideas.\nTwo package.json folders? One for Android and one for iOS?\nThank you for the links!\n. @max-mironov thanks Max!\nOn other packages like react-native-maps, the same release version can be completely broken on either Android or iOS. With this package in particular it can be hard to find a common version that work well.  Hopefully it will stabilize soon and I can lock down the package.json to a good version.\nI do not need the latest CodePush on both iOS and Android so roll-back to to 1.17.x versions with RN 0.42.3 should be good.\nThanks again!. Thank you @pniko.  Is the @panarasi demo for A/B testing online someplace?\nCan a \"user segment\" target a specific known group of users?\nMy use case, in addition to A / B testing,  is to make a user segment for instructors or service techs.\nThe use case is that our instructors and service techs need app functionality that should be hidden from normal users.  For example, resetting our Bluetooth devices to a clean state.\n. Thank you for the video link @pniko !. @max-mironov Great article by is @panarasi \nThank you for letting me know!. I just got Google Analytics and firbase analytics working.\nHowever, I may need to try out mobile-center-analytics\nQuestion: Can mobile-center-analytics display user location to the city level like Google Analytics can?. I tried deleting libCodePush.a from \"Link Binaries With Libraries\" and adding the following to my apps ios/Podfile and then running pod install.\nreact-native link react-native-code-push\nI see my app's loading screen logo, then 'RCTFatalException: Something went wrong.'\nI hate to remove CodePush and waste all time invested.  I am running out of things to try.. Sorry for the noise. Closing.\nI removed CodePush and still have similar problem:\n2017-09-14 09:24:02.253 [fatal][tid:main] No bundle URL present.\nMake sure you're running a packager server or have included a .jsbundle file in your application bundle.\n2017-09-14 09:24:02.256467-0500 FieldScout[454:125024] No bundle URL present.\nMore react native adventure game fun.\n. ",
    "chrisjrex": "@sergey-akhalkov Sorry i thought I had left my reply! I did manage to solve my problem via following your link and a few others.\nThanks that you were so quick getting back to me before. ",
    "julienvincent": "Hi @sergey-akhalkov - It is not related to that issue / comment, but it may be related to something going wrong on my side while upgrading from RN40 => RN44.\nI will do some more testing with my repo as well as with your sample app using 2.0.3-beta and see if I can reproduce it again.\nThanks for your fast reply. So, after re-installing 2.0.3-beta and re-linking I am unable to reproduce this issue.\nClosing \ud83d\udc4d . ",
    "smk524198002": "hi ~ i have the same problem. Can you tell me how to solve it. I am  new . Thanks.. ",
    "zkrige": "Please add this to documentation. It makes no sense that this isnt actually IN the docs. Is there any progress on this? IMMEDIATE works fine in debug mode, but crashes the app and rolls back the update for release builds. ",
    "JasonFehr": "Thanks, I think you guys just saved the day for us! \nI have no idea why generating the signed APK in Android Studio gave that \"Unable to get the hash of the binary's bundled resources \"codepush.gradle\"\" error, but using gradlew assembleRelease solved everything for some reason.. I fixed it this way:\n-Click on the project target => Link Binary with Libraries\n-Remove libCodePush.a \n-Add libCodePush.a file from CodePush.xcodeproj/Products (as opposed to the one from the root directory). ",
    "l1br3": "I'm signing the apk with gradle but I face the same issue. I can confirm it is the way to enable codepush update when opening outside from activity. \nI had several errors while trying to do what the doc says like\nerror: class MyReactNativeHost is public, should be declared in a file named MyReactNativeHost.java\npublic class MyReactNativeHost extends ReactNativeHost implements ReactInstanceHolder\n@sergey-akhalkov , the doc about background react instances should be updated with the syntax from @cherniv.\nI tried to update from a push notification and it's working well. . @sergey-akhalkov PR done\nhttps://github.com/Microsoft/react-native-code-push/pull/1459. @pietro909 \nI'm facing an issue which looks similar. My images get stretched, blurred, zoomed in a very non-consistent way. I use Animated.Image and it leads to very strange results.\nI require all my images in a config file like this:\njs\nexport default {\n  like: require('../Images/Icons/like.png'),\n  dislike: require('../Images/Icons/dislike.png'),\n  favorite: require('../Images/Icons/favorite.png'),\n}\nAnd then use them like this:\njs\n<Animated.View style={[\n      styles.heartBubbleHolder,\n       {left: '55%'},\n       {\n         height: this.animatedValuesHeight[ 3 ],\n        }\n]}>\n        <Animated.Image source={Images.like} style={{\n            width: this.animatedValuesSizes[ 3 ],\n            height: this.animatedValuesSizes[ 3 ],\n            opacity: this.animatedValuesOpacities[ 3 ]\n          }}/>\n</Animated.View>\nAny codepush update gonna break the images.\nBefore update:\n\nAfter update:\n\nPS: I'm not releasing my JS assets along my bundle as instructions are not here anymore.. Hi @pietro909 I actually run the latest RN@0.57.7 and I still face this issue.\nI not use fastimage in my project. Ho I thought you was working for the codepush team ! Sorry \n. If someone can just check if the last override is really usefull ? \nI guess it should maybe return a MyReactNativeHost instance instead of ReactNativeHost instance ? \nBut as I don't know how this code is used by React-Native, I not changed it. \njava\n  @Override\n  public ReactNativeHost getReactNativeHost() {\n    return mReactNativeHost;\n  }. ",
    "jbcullis": "I have it working on Android and iOS without exception, however there seems to be an issue that has only presented on iOS where the app thinks it has successfully updated even if the update process was int interrupted. Once that issue occurs, the only way to get those devices to get up to date is to roll a new version.. I've been experiencing this too. It seems like the app thinks it has already updated. It's very sporadic and I cannot reproduce this at will but when users contact me to say the app isn't updating a reinstall or rolling a new version will typically resolve the issue.. @huangkaiw3n  our versions are:   \n\"react\": \"~15.4.0-rc.4\",\n\"react-native\": \"0.38.0\",\n\"react-native-code-push\": \"^1.17.0-beta\",\n\nCalling sync when the app starts:\nCodePush.sync({ updateDialog: false, installMode: CodePush.InstallMode.IMMEDIATE }).then(...)\nThe then statements hides the loading box if an update is not found.\n. I had never thought to look for rollbacks, I have been watching this since our most recent update 8 days ago and now have 1 rollback on iOS.. Yep, I second this @jeremyong - Put something in the API that allows us to FORCE an update to the latest bundle. We put in a long press button so we can ask users to do a manual check but it doesnt help at all because code-push thinks it has the latest version. The issue has always been that once an update faile, code-push still thinks it was a successful update therefore refuses to update.. @ruslan-bikkinin we have all the same issues as @huangkaiw3n - I don't know 100% if it's the false rollback since we have not yet been able to reproduce it locally. There is no consistency for reproduction as far as I can tell.\nWhat I can tell you with 100% certainty is, the app THINKS it's the latest version and refuses to update. Maybe give us an option to submit our own version number and leave the version control to us?. @ruslan-bikkinin - hypothetically, if the app experienced a hard exit in the same session where we updated the bundle, would it be possible for the app to still think it's up to date but roll back to the previous bundle?. @ruslan-bikkinin I'm interested in a perpetual retry, or even a result on the sync that tells me it's a rollback user and an option for us to tell it to retry would be ideal....that way we could log it and possibly identify cause for rollback. Our users are primarily rural so my feeling is it's a dropped connection but don't know for sure.\nI was trying to hard reset the phone during an update (as per suggested forcing app close above) as the other day but couldn't replicate it. I know it's not a bad push because the same user will re-install and get the latest package no problem.. @jeremyong in our experience, it's luck of the draw with any given push. We have users who have been successfully accepting pushes for the last 18 months and out of the blue, one of the releases will present this issue. Push a new release or ask the user to re-install the app and the problem is solved. This means, the very same push is working just fine with the same user on the same device which is why I believe it's more likely an environmental issue. The randomness is also what is making it so hard to debug because we are yet to be able to re-produce it in house.\nMy preference would be on sync, a response indicating the user has rolled back but failing that, the next best solution for us is a perpetual retry...meaning each time sync is called the app tries to update. At bare minimum, I'd like to see an option to catch a rollback and add it to our bug tracker.\nQuite frankly, I'd take an option where we manage the version codes and handle update decisions.. We really need resolution on this, I've had 2 nasty emails and lost both customers over this issue this month. It scares me to think how many folks are seeing the issue and just bailing on the app rather than reaching out.\nIs there a way to mock a rollback in dev so we can put some handling in place? And please, please, please let us handle the retry and associated logging.. Good work @ajwhite  - most of our customers are rural so consistent connectivity is not guaranteed.....this would explain a lot for us because it seems luck of the draw who experiences a rollback on any given release.. @ajwhite My assumption was some sort of interruption but maybe it's more likely the initial connection to code push as you suggested previously.\nWhat I can tell you is, same person, same device....will be fine for all previous updates and then randomly runs into this issue....then a new release will get that same user back on course.. Same as @adbl - we only get around 1% rollback according to the code push stats but never see any code-push errors appear in our logs.\nWe're also contemplating just going back to standard app store rollouts, we run LOB software so have to eliminate user inconveniences wherever possible.. ",
    "alexeyMohnatkin": "@sergey-akhalkov, what logs do you need?\nHere's my entry file\n```\n...\nimport codePush from 'react-native-code-push';\n...\nclass App extends Component {\n    render() {\n        return (\n            \n\n\n        );\n    }\n}\nexport default codePush(App);\n```\nThere's another strange thing: when I run Staging build it installs updates from Production deployment. \n\n\nAnd I have right app keys in right places, I checked many times.. ",
    "manelalonso": "Sorry, wrong site. Moved to the cordova one.. ",
    "EwyynTomato": "I believe this this caused by the following lines in CodePushNativeModule.java:\nMethod[] methods = jsBundleLoaderClass.getDeclaredMethods();\n            for (Method method : methods) {\n                if (method.getName().equals(\"createFileLoader\")) {\n                    createFileLoaderMethod = method;\n                    break;\n                }\n            }\ncalling the method createFileLoader in com.facebook.react.cxxbridge > JSBundleLoader.java, but the method that should be called was createAssetLoader instead.. ",
    "hzyIO": "No I haven\u2019t yet, will try to get to it today.\n\nOn May 31, 2017, at 1:34 AM, Max notifications@github.com wrote:\n@hzyIO https://github.com/hzyio, @EwyynTomato https://github.com/ewyyntomato - guys, just a friendly ping, do you have a chance to look at this?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub https://github.com/Microsoft/react-native-code-push/issues/847#issuecomment-305123367, or mute the thread https://github.com/notifications/unsubscribe-auth/AALva8BvFKAHtFxZANgOIndeCumpzBqDks5r_SYjgaJpZM4Ngo6C.\n\n\n. @max-mironov Sounds good. I do plan on testing this, will comment again if I have an issue.. ",
    "hose314": "I got issue like \ncom.facebook.jni.CppException: facebook::react::Recoverable: Could not open file/data/data/.../CodePush/index.android.bundle: No such file or directory\nis it related? Also crashing when new updates coming\nLatest version of code push\nRN 0.44.00\nThanks\n. @max-mironov yeap, i'll try, need some time to configure app with deps.\nAnd yeah, is it's strange that file path looks like shown above (i.e file/... not like file:///)?\n. Hi, @youngcube!\nYeap, i've change them due to the react-native-navigation by wix\ncompileSdkVersion 25\nbuildToolsVersion '25.0.2'. I run 0.45 in production with code push. Currently everything is okay. . @sergey-akhalkov thanks for the warning. Sorry for confusion on iOS is everything is okay. Can confirm that im also encountered with the same issue on Android described above.. @youngcube @max-mironov works for me!. ",
    "hslls": "@max-mironov Do you have any solution?. same with @hose314 . ",
    "iskWang": "have same problem +1 \nreact-native-code-push version: v1.17.4-beta\nreact-native-version: 0.37.0. ",
    "youngern": "I had to remove the derivedData folder... @rzrobert yes, I couldn't pinpoint the exact issue but it has something do with the way Xcode caches build data.\nDelete the folder associated with your project in the DerivedData folder\nrm -rf ~/Library/Developer/Xcode/DerivedData/<your project folder>\nIf your project name is your_project, it should be some folder called your_project-[rand string]\ncheers. ",
    "rzrobert": "Are you fix it? I have the same problem\u2026\u2026. @youngern Mabey you can change the way for import like this(node_modules/react-native/React/Base):\nimport \n//#import \"RCTDefines.h\". ",
    "haven2world": "@yellowChao hi,i don't know whether you still need it. my soluation on the segmentfault. ",
    "bird-xiong": "hope to support this soon. ",
    "sergey-cherednichenko": "Hi @vidyuthd, thank you for your question!\nUnfortunately i can't reproduce this bug.\nCould you please try the following example.\nSome files in project changed by react-native-code-push on the link phase, and some of them required to be manually changed when installing react-native-navigation. Therefore you may see merge conflicts between react-native-navigation and react-native-code-push. You may use files from example mentioned above or compare these files with corresponding files of your project and resolve possible conflicts manually.\nPlease see list of files below:\nandroid\\settings.gradle\nandroid\\app\\src\\main\\java\\com\\yourProjectName\\MainApplication.java\nandroid\\app\\build.gradle\nPlease let me know the results. ",
    "vidyuthd": "@sergey-akhalkov , I have a tried on my machine with sample app which has both React Native Navigation and Code Push, and was not able to reproduce this issue. I will look further and seek your help in case its needed.\nThanks. ",
    "lslima91": "@vidyuthd having the same problem with Release and IMMEDIATE. Did you manage to fin the issue?. ",
    "rawpaw": "Hi @sergey-akhalkov , thanks for responding. I have managed to get this working. I think it was because I didn't have \"jsCodeLocation = [CodePush bundleURL];\" in the AppDelegate.m file but had it in a separate file (for good reason). . ",
    "weijianfeng": "I have solved the problem.\nWhen changing settings.gradle I use the following steps to install plugin into the project instead of the steps in document.\nFile -> Module -> Import Gradle Project -> then  select the code push project in node_modules.\nAfter the steps, the settings.gradle is changed.\nOther steps are the same as that in document.. ",
    "jay1337": "@max-mironov I'm not able to test it but your PR seems ok. @max-mironov What about the documentation here https://github.com/Microsoft/react-native-code-push/blob/master/docs/setup-android.md#plugin-installation-android---manual ?. @max-mironov Look at the last changes in Examples/CodePushDemoApp/android/app/src/main/java/com/codepushdemoapp/MainApplication.java : https://github.com/Microsoft/react-native-code-push/commit/c43b0b16ce27c97f86ba7dee4ef525d3f69c1df3#diff-33381e96e8d64db4b13e3e3e9b8e9c16\nThere is a new getJSMainModuleName function.. Thanks for your help.\nWith your code, the app does not crash.\nBut I need the result of AsyncStorage.getItem to register screens so your code is not a fix nor a workaround for me. I need to read a value in AsyncStorage, in order to get the server url to use when connecting screens wrapped with GraphQL Apollo client, before registering them.\nAn other interesting case that makes the app crash:\n```\nimport { AsyncStorage } from 'react-native';\nimport { Navigation } from 'react-native-navigation';\nimport React from 'react';\nimport { Text } from 'react-native';\nimport codePush from \"react-native-code-push\";\nconst App = () =>\n     codePush.restartApp(false)}>\n        Touch to run codePush.restartApp and see the crash\n    \n;\nconst screenName = Math.random().toString();\nNavigation.registerComponent(screenName, () => App);\nNavigation.startSingleScreenApp({\n    screen: {\n        screen: screenName,\n    },\n    passProps: { },\n});\n```\nHere are the logs:\n```\nD/ReactNative( 2166): ReactInstanceManager.createReactContextInBackground()\nD/ReactNative( 2166): ReactInstanceManager.recreateReactContextInBackgroundInner()\nD/ReactNative( 2166): ReactInstanceManager.recreateReactContextInBackgroundFromBundleLoader()\nD/ReactNative( 2166): ReactInstanceManager.recreateReactContextInBackground()\nD/ReactNative( 2166): ReactInstanceManager.runCreateReactContextOnNewThread()\nD/ReactNative( 2166): ReactInstanceManager.createReactContext()\nD/ReactNative( 2166): Initializing React Xplat Bridge.\nD/ReactNative( 2166): Initializing React Xplat Bridge before initializeBridge\nD/ReactNative( 2166): Initializing React Xplat Bridge after initializeBridge\nD/ReactNative( 2166): CatalystInstanceImpl.runJSBundle()\nD/ReactNative( 2166): ReactInstanceManager.setupReactContext()\nD/ReactNative( 2166): CatalystInstanceImpl.initialize()\nD/ReactNative( 2166): ReactInstanceManager.attachRootViewToInstance()\nI/ReactNativeJS( 2166): Running application \"0.9843317680060863\" with appParams: {\"initialProps\":{\"screenInstanceID\":\"screenInstanceID2\",\"navigatorID\":\"navigatorID1_nav\",\"navigatorEventID\":\"screenInstanceID2_events\"},\"rootTag\":1}. DEV === false, development-level warning are OFF, performance optimizations are ON\n=========== restart =========\nE/ReactNativeJS( 2166): Application 0.9843317680060863 has not been registered.\nE/ReactNativeJS( 2166):\nE/ReactNativeJS( 2166): Hint: This error often happens when you're running the packager (local dev server) from a wrong folder. For example you have multiple apps and the packager is still running for the app you were working on before.\nE/ReactNativeJS( 2166): If this is the case, simply kill the old packager instance (e.g. close the packager terminal window) and start the packager in the correct app folder (e.g. cd into app folder and run 'npm start').\nE/ReactNativeJS( 2166):\nE/ReactNativeJS( 2166): This error can also happen due to a require() error during initialization or failure to call AppRegistry.registerComponent.\nE/ReactNativeJS( 2166):\nD/ReactNative( 2166): ReactInstanceManager.attachRootViewToInstance()\nI/ReactNativeJS( 2166): Running application \"0.07154778391122818\" with appParams: {\"initialProps\":{\"screenInstanceID\":\"screenInstanceID2\",\"navigatorID\":\"navigatorID1_nav\",\"navigatorEventID\":\"screenInstanceID2_events\"},\"rootTag\":21}. DEV === false, development-level warning are OFF, performance optimizations are ON\nD/ReactNative( 2166): ReactInstanceManager.detachViewFromInstance()\nD/ReactNative( 2166): CatalystInstanceImpl.destroy() start\nD/ReactNative( 2166): [CodePush] Loading JS bundle from \"assets://index.android.bundle\"\nD/ReactNative( 2166): ReactInstanceManager.ctor()\n```\nMy feeling is that everything is not perfectly cleared before starting the app again (previous app id expected by RN) and also the app is not started again the good RN Navigation way (RN should not expect any app id to be registered since with RNN there is no getMainComponentName in MainActivity.java).... @ruslan-bikkinin, with registration after AsynStorage, everything works find except CodePush restart (that's why I've posted an issue here). Also everything is ok on iOS. So it's not a bad implementation of RNN.\nI think that the way CodePush restarts the app is not compatible with RNN screens registration. Again, it's strange that RN expects a specific app id to be registered.\nHave you tried to reproduce the bug on your side ?\nAs for codePush(App) I call codePush.sync manually and everything works fine.. @ruslan-bikkinin Thanks for this update.. @ruslan-bikkinin thanks a lot for the update and for your precious help.. @ruslan-bikkinin here are mine:\n```\npackage com.awesomeproject;\nimport com.facebook.react.ReactActivity;\nimport com.reactnativenavigation.controllers.SplashActivity;\npublic class MainActivity extends SplashActivity {\n}\n```\n```\npackage com.awesomeproject;\nimport android.app.Application;\nimport com.facebook.react.ReactApplication;\nimport com.facebook.react.ReactNativeHost;\nimport com.facebook.react.ReactPackage;\nimport com.facebook.react.shell.MainReactPackage;\nimport com.facebook.soloader.SoLoader;\nimport com.microsoft.codepush.react.CodePush;\nimport com.reactnativenavigation.NavigationApplication;\nimport java.util.Arrays;\nimport java.util.List;\npublic class MainApplication extends NavigationApplication {\n@Override\npublic boolean isDebug() {\n    // Make sure you are using BuildConfig from your own application\n    return BuildConfig.DEBUG;\n}\n\nprotected List<ReactPackage> getPackages() {\n    // Add additional packages you require here\n    // No need to add RnnPackage and MainReactPackage\n    return Arrays.<ReactPackage>asList(\n        new CodePush(\"deployment-key-here\", getApplicationContext(), BuildConfig.DEBUG)\n    );\n}\n\n@Override\npublic List<ReactPackage> createAdditionalReactPackages() {\n    return getPackages();\n}\n\n@Override\npublic String getJSBundleFile() {\n    return CodePush.getJSBundleFile();\n}\n\n\n@Override\npublic String getJSMainModuleName() {\n    return \"index\";\n}\n\n}\n``\n. @ruslan-bikkinin the only difference is the use ofReactInstanceHolder. Why should we use it ? Especially if we never callCodePush.setReactInstanceHolder... Everything (expect this tread issue) works fine without it.... @die20 just addimport com.facebook.react.ReactInstanceManager;` to other imports.\n. @ruslan-bikkinin thanks for the news. I understand your decision. I don't have any idea how to resolve that.... @SudoPlz You must NOT wait for AsyncStorage before registering screens.. ",
    "farwayer": "Ask for what? ref used internally only to make codePushStatusDidChange and codePushDownloadDidProgress functions work. With stateless components it is senselessly. . ",
    "booker-laputa": "@sergey-akhalkov Thanks, I have tried.\nThe ideal case for me is to retrieve the latest bundle targeting binary version on all devices.\nHowever, if I am on older binary version, I can only get the information of latest bundle targeting the the older version. \nExample:\na. Label v1 Targeting 1.0\nb. Label v2 Targeting 2.0\nIf I am on 1.0 device, when I checkForUpdate, it will return Label v1.\nI want to get the RemotePackage of update (b) no matter what binary version I am on. Thanks for your answer.\nI have to give up using CodePush for binary check.\nHowever, I think CodePush should have the method to show all current information, like binary version and bundle label.. @sergey-akhalkov Yes, I have tried react-native link method and the manually setup method.\nI have checked that forceios create a different pattern of react native project and it breaks the auto link.\nI have no idea how can I integrate CodePush with Salesforce SDK. @sergey-akhalkov Thanks! It's working now.\nI added the pod 'CodePush', :path=> '../node_modules/react-native-code-push', run pod install\nConfigure the project manually.\nHowever react-native link react-native-code-push will damage the project, I don't know why.\nThanks for your help again!. ",
    "oliviachang29": "Thanks for the workaround \ud83d\udc4d \nWorked in my app as well.. Sorry, I don't have time to look at this right now. . ",
    "tmaly1980": "@grigored That works for me, except I needed to add 'default' to the export since I had it in a separate file. I would LOVE to see this in the official docs.\nAlso, to get the @codePush decorator to work, I had to install \nhttps://github.com/skevy/babel-preset-react-native-stage-0\nThat required modifying .babelrc, calling watchman watch-del-all, and for my dev system (which doesn't use CodePush but still includes the code), restarting my packager (yarn stop; yarn start).. I have this implemented in one app where it defaults to the Production build, but for certain (super) users, they have an option in their drawer to switch to the Staging version of the app. I then have it trigger codePush.sync with the Staging key. The entire app is wrapped in a container that shows a loading screen that is tied to redux to process the switch. . @Li357 Did you ever figure this out? I'm wondering the same thing.... How to show the app content once the update is complete. I'm making a wild guess that the second time the app is loaded that it will trigger UP_TO_DATE, which can then close the loading screen?. I can actually confirm that it works. Seems my UP_TO_DATE case that closes my loading screen is good enough.. It's actually just two lines of code to fix:\nhttps://github.com/Microsoft/react-native-code-push/pull/1262. ",
    "ronitpattjoshi": "Can some one please help me to get through my issue?. Hi, \nThanks for replying.\nI followed your example and done, The update is happening but its just for first time and again when i am trying to update, The update is not happening. In the Application its saying its up to date.\n. Heh thanks for the reply.\nAfter running  code-push deployment history  \nI got only two version updated but other are saying NO install recorder.\nwhere do I got the target binary version and bundle binary version?\nThe deployment key will be same for every push right?\nCode push has initialize the same as of yours\n. ",
    "maximeaubaret": "I haven't been able to CodePush work on RN 0.45.1, even with ON_NEXT_RESTART. I tried using the HOC and calling sync directly with the same results.\nWhen I force quit the app to force the CodePush install, the app crashes. I've tested this on iOS.. ",
    "tonylkc": "I have tried the create a new project and put my code back to this new project. However, its still has the same error. . ",
    "huangkaiw3n": "@iageoghe Thanks for looking at this issue.\nRegarding your questions:\n1. I'm not 100% sure if this is even the case. Eg. When a user gets an automatic rollback presumably due to a crash on the first update attempt, whether he will be able to receive the next CodePush release. (So far, I've only encountered an automatic rollback perhaps once or twice on my staging CodePush releases. And when they happen, closing and reopening the app did not trigger another attempt to update. Reinstalling the app did trigger the CodePush update though)\n2. Yeah, this could be a way to combat the issue where the update is clean but the app crashed at the update attempt due to some arbitrary problem that could happen at the time of update. I was also wondering if my CodePush syncing code was generally the correct way to call sync or if there is any existing way to address this.\nDo you know if this is a first or were there any others experiencing lost updates due to an auto rollback at CodePush update attempt?. @jbcullis Hey I think we're facing the same issue. Could you share your react native version and react native code push version? Also how you are calling the sync in your react native code? This could help us find some clues.. To be fair, the rollback is useful if it is really rolling back for a case where the JS bundle has a problematic line that causes the app to crash.\nBUT that isn't working good and instead, good bundles are getting rolled back and these users lose that push for good until they reinstall. So yeah, @jeremyong's suggestion sounds good. A flag to disable rollbacks for a push would fix this issue.. @ruslan-bikkinin Thanks for the clarification. However, the issue here is that this mechanism of notifyApplicationReady apparently causes a handful of users hitting rollbacks on js bundles that were fine.\nI only started realising these 'false rollbacks' when users sent in feedback and follow-ups with them discovered that they were not on the latest code push version which should have fixed some bugs. Instructing them to reinstall allowed their app to download the actual latest version.\nAny arbitrary crash even when it's not due to a faulty js bundle, but due to the OS or certain conditions can potentially cause notifyApplicationReady to fail, resulting in a 'false rollback' on a good js bundle.\nAs mentioned by @iageoghe , even a try X times I believe will mitigate this problem, especially on production systems with large user base. Otherwise, a flag to disable rollbacks for a certain code push version will help as well.. @ruslan-bikkinin Yeah, there's no way to reproduce consistently as they're 'false roll-backs', presumably an arbitrary condition between update and notifyApplicationReady.\nEven perfectly good apps do crash very occasionally. When it does crash between the update and notifyApplicationReady, the code push is lost to the user till an install.\nI only encountered it when the users started to really go up, and it was from user feedback. Was able to further confirm my suspicions when I actually encountered it once or twice when testing on Staging.\nLow percentage, but strictly undesirable:\n\n. @ruslan-bikkinin Building in retries sound good and I believe should be built as a default behaviour. The whole issue of these false-positives though rare is that the user loses the update entirely. A retry mechanism perhaps like !latestVersion && minimumTimeSinceRollback should eliminate these entirely since they are rare.\nSo far this is the only nagging issue I have with using code-push for close to a year and rest of it has been smooth so thumbs up and a big thanks to the code-push team.. ",
    "Minishlink": "FYI, we seem to have this issue on an app using 2.1.0-beta, but not on another app that uses 2.0.3-beta, though this might be a coincidence.\nEDIT: issue's author is on 2.0.3-beta so it's definitely a coincidence.... ",
    "JasonHenson": "+1. Not really sure what the debate is. I would never want to have \"ghost\" rollbacks that happen without my knowledge and leave users stuck on an old version. If I don't initiate the rollback then I personally don't want it to happen. If an update fails, it should try it again the next time code push checks for an update. If for some reason the app starts to crash because of the latest version code pushed, users could put in a support ticket and we would look into the issue and just code push a fix or release a new binary as a last resort.\n. I think rolling back and retrying to update again would be best.\nI was thinking last night whether it is possible to check for rollbacks and then log them with sentry.io, so at least I would get an email when this happens.. ",
    "jeremyong": "We just want an option to disable it at this point. We have observed in vitro that the rollback is happening on its own accord without a crash happening. To be frank, this functionality is strictly undesirable and I don't know of any use case why you'd want to rollback to the bundled code ever. The most I would expect is a simple checksum to ensure that what was deployed is in fact what was shipped.\nNote that objections to this proposal would probably take the form of \"but what if the user is stuck and can't ever update.\" This is true regardless of if the rollback takes place or not as the developer is always potentially able to introduce a bug that prevents an update/sync from happening.. @ruslan-bikkinin exactly as @huangkaiw3n has said.\nAlso I've read the code and understand the general flow (and have commented out relevant sections locally). I still think that no rollback whatsoever is the best policy. Our code leverages sync as suggested and we are certain that notifyApplicationReady is called but the rollback occurs anyways sporadically and we have observed this first hand as well. I don't trust the usage of user preferences to store metadata about whether a bundle succeeded or failed.. @jbcullis I don't think this is a good idea. Based on statistics and logs I've collected. The rollbacks may be occurring to the same people even after a follow-on release is happening. Again, I'm not sure exactly what might be causing it, but with your approach, an affected user may continuously download and apply the update, only to roll it back on the next application start. I think it should be disabled until the root cause is determined.. ",
    "ghuh": "We've seen this issue when the user manually kills the app on Android, there was no crash involved.\nRN: 0.47.2\nCodepush: 5.0.0-beta\nAndroid: 7.0 (Galaxy S7). ",
    "monotkate": "@ruslan-bikkinin We've been trying to implement retries in our flow that uses the API commands instead of sync due to state issues, where we want to try a bad install again with a cleared user state but have been running into issues, particularly on ios.\nCan code-push handle rollback more than once from the same failed upload?  On ios I'm seeing issues where the pushed build never calls notifyAppReady, and yet still manages to get stuck on the failed build after the first rollback.. @ruslan-bikkinin Yeah, we came to that conclusion ourselves.  It would be awesome if, when you guys implement retry, we've got the ability to run code based on how many times it's retried.  That way we can try to do something like wipe state between retries in case it's causing failures.. ",
    "ryanvanderpol": "When rollbacks like this happen is there anyway to see a log somewhere?  We're using Sentry in our app but not seeing anything relevant in there and we're seeing really high rollback rates for our last five or six OTA updates.  I have no idea why they're rolling back and I can't seem to find logs anywhere.\n\n. I have a new data point to add to this after some more testing.  When the app first launches, it displays a push notification permission dialog (as seen in the below screenshot).  If you click one of the options and dismiss the dialog BEFORE the CodePush update is applied, it actually works fine.  However if you leave the permission dialog up, then when CodePush applies the update it crashes the app.\n\n. Hey @ruslan-bikkinin thanks for the info.  What are you basing your statement on?  I'm looking back through my repo history and I don't see any changes to the React version since the last time we submitted binaries to the App Store.  \nMy statement that you quoted above was not literal right now -- the binaries in the App Store right now are only about 1, maybe 2 weeks old, but it was built that way so that we could leave those binaries there for a long time and keep doing OTA updates (isn't that the whole idea behind CodePush? \ud83d\ude01). @ruslan-bikkinin I'm now very confident that the version of react-native has not changed between the App Store release (which is only 1 week old) and the latest CodePush OTA update.  The package.json is locked at react-native version 0.48.4.. Here is a video of the crash just so it's clear what's going on (sorry it's a little fast).  I've uninstalled the app, gone to the app store, downloaded the app fresh and tapped \"open\" immediately after downloading.  The app opens, prompts for notification permissions and in the background it is downloading a CP OTA update.  When it applies the update the app disappears/crashes (although strangely enough the permission dialog remains).  \n\nWhile making this video I found that it didn't happen 100% of the time.  Not sure what to make of that, but it definitely happens most of the time.. Interesting, yeah, seems plausible.  I'll also update Sentry and see what happens.  Good find, thanks!. You guys are missing the point and this is why I am leaving CodePush.  The attitude I consistently see around here is \"it's not our fault\".  I understand that you think CodePush is \"not intended to be a bug/crash tracker\" but if crashes happen while CodePush is applying an update I'd imagine the average person would want to know what's going on and have some sort of report that they could look at to investigate the problem.  I fully believe that is something CodePush should provide if you guys intend for this to be a polished, production-ready product.\nFor what it's worth, our production apps already use Sentry and nothing is being logged related to rollbacks.. Just wanted to leave this here as a data point for the CodePush team: we dropped CodePush about a month ago and are WAY happier now.  It has increased our apps' stability tremendously.  CodePush seemed like an awesome idea, but we continually had customers reporting crashes and would get tons of rollbacks with every CodePush update we sent out with no error logs available to look at.. @AgDude We went back to binary updates.  For Android, that's basically as easy as a CodePush update.  For Apple, we obviously have to wait for the review cycle, which has been about 24-48 hours for the last 10 updates we've done.\nThis is obviously a bit more overhead, but the improvement we've had in overall stability is well worth it.\nEDIT: and FWIW we find that 95% of our users adopt the updated binary within 5 days, which is even better than we were seeing with CodePush.. ",
    "jariwalabhavesh": "I was also face this issue. Now i am able to identify why it is happening in my case.\n1. I had codepush V2 already publish for android app\n2. Then i had release V3 and facing rollback in this version\nI found that by mistake i had commented below code block, which is causing rollback in V3, in V2 it is working fine without any rollback.\n// codePush.sync({\n//   updateDialog: true,\n//   installMode: codePush.InstallMode.IMMEDIATE\n// });\nMay this can help other to identify issue.. ",
    "hobzcalvin": "I was pointed to this issue via App Center support staff. Lots of React mentions but this is definitely an issue for us too in Cordova.\nThe worst part in our experience is new users who download our app for the first time: Let's say we've released a dozen CodePush releases since the app was released to the app store. All those releases worked fine (except maybe the latest) and target the given app-store version. The user downloads the app from the app store and it attempts to get the latest CodePush release, but (clearly very mysterious thing!) happens and the app rolls back. But instead of attempting to install the previous / perfectly-fine CodePush release, the CodePush plugin reverts to the version of the code that was packaged with the app, which is now very out of date.\nSo I would propose falling back to installing previous CodePush updates, in addition to retrying install of the latest one, instead of simply giving up.\nAs a quasi-workaround, we can manually roll back the latest release, which creates a new one, which the app will hopefully successfully install. Then we can try re-releasing the problematic update, etc. But this results in lots of release churn that interrupts users while they're in the app. Really not a solution.. Out of curiosity, has anyone tried using the notifyFailed handler in notifyApplicationReady to document when notifying the plugin fails? Obviously if there's such an error handler, there must be some theoretical way for notifyApplicationReady to fail, which almost guarantees a rollback.. Thanks for this update. Can delayInHours be set to 0 for immediate retry? Seems to me that waiting some number of hours doesn't help much, but retrying the same update several times should eliminate one-off update errors.\nMy company (where I no longer work) had to scrap CodePush after significant effort implementing it because of this bug. (If we couldn't rely on CodePush to release important new app features it was useless to us.) Sadly, this fix probably comes far too late to consider adopting it again. We had no idea why rollbacks could even happen; AFAICT reasons like \"closing an app during install, faulty cellular reception\" were never previously mentioned. It's helpful to know this now, at least.. Hi @pniko, February came and went. What's the timeline for seeing this resolved?\n(As I mentioned in #880 this is definitely a Cordova issue too; not sure why both of these are under the React Native project.). ",
    "yuri-kulikov": "Hello everybody!\nI'm glad to inform you that we've implemented the \"Re-try mechanism for CodePush Rollbacks\" feature. \nCodePush rollbacks can occur for several reasons including closing an app during install, faulty cellular reception, etc. When this occurred the app never re-tried to download this update which results in a customer being stuck on an old version of an app until the developer decides to push a new release or the user re-installs or clears the app (This is a bad experience). Users was essentially stuck running old versions.\nThis feature will allow users who have had some random rollback to eventually receive the last working update. We understand that this will not save people from rollbacks, as well as not fix the metrics (you\u2019ll still see random rollbacks as well as additional download + install(/rollback) for every re-try), but users will finally be able to install an update that were rolled-back accidentally.\nFor example, you could set options like this:\nsyncOptions: { \n  ...\n  rollbackRetryOptions: {\n    delayInHours: 12,\n    maxRetryAttempts: 1\n  }\n  ...\n}\nthen use this options App = CodePush(syncOptions)(App) or CodePush.sync(syncOptions),\nand in this case, if a rollback occurs, then the application will ignore this update for 12 hours after the rollback, and then it can try to install this update again (but only once, as we have set in maxRetryAttempts). You can read more about how to use this options here.\nWe appreciate your feedback about this.. Hi @hobzcalvin, @yaronlevi\nThanks for your feedback!\n\nCan delayInHours be set to 0 for immediate retry?\n\nYes, you can set it to 0 (or, for example, 1 / 60 if you want to wait 1 minute), but if you set delay to 0 and unintentionally release a broken update, then each user might get some additional crashes and that's also a bad experience. Developers will need some time to disable the broken update or release a fixed update.\n\nAFAICT reasons like \"closing an app during install, faulty cellular reception\" were never previously mentioned.\n\nIn fact, the reasons of this exceptional rollbacks can be quite unclear and we don't know each of them, it may be caused by some hardware issues, some unusual user actions or developer js-code issues, etc. Each case is quite individual and this feature can help users to mitigate these circumstances.\n\nSetting delayInHours=0 would cause an immediate retry?\n\nNot exactly, it will mean that during the next sync request with this options, the application will not ignore this package (until maxRetryAttempts is reached). For example, if you use it with CodePush.CheckFrequency.ON_APP_START(/ON_APP_RESUME) and a user got a rollback, then as soon as he launches the application, it will re-download the update right after the start and install it as usual.. We close the issue, but if you find something or have some questions, please let us know!. Hi @eggli,\nThanks for the workaround, we appreciate it!\nWe'll try to reproduce it as you recommended and try to create a workaround in our package until we find out why codepush.json can become empty.. @eggli, thanks for sharing this information with us. I tried to reproduce this bug but wasn't lucky enough.\nWork on a fix is in progress.. Hi everyone!\nWe've fixed the issue in the new version of react-native-code-push (5.6.0).\nI'll close the issue for now, but feel free to ask any questions or reopen this issue if needed!. Hi @ascherkus!\nYou did a really great job finding this particular commit! \ud83d\udc4d\nI wish we'd figured it out sooner and I hope it will be fixed soon.. Hi @GonzaloRecioG, @sercanov, @deehuey,\nI've created a simple app to reproduce the issue (only iOS side): simpleMap.zip\nAnd then I've tried to use one workaround from another similar issue, and it works!\nMy Steps to reproduce:\n\nUnzip the archive\ncd ./simpleMap\nyarn\ncd ios\npod install\ncode-push app add simpleMap-ios ios react-native\nCopy the Staging deployment key and paste it in /simpleMap/ios/simpleMap/Info.plist:\n   XML\n   <key>CodePushDeploymentKey</key>\n   <string>PUT_YOUR_DEPLOYMENT_KEY_HERE</string>\nOpen /simpleMap/ios/simpleMap.xcworkspace with Xcode\nGo to Edit Scheme..., change Build Configuration to Release\nGo to the project settings and set the Signing team in simpleMap and simpleMapTests targets\nRun the project\n   (Optional) If you have this problem:\n      Error: Cannot find module '@babel/runtime/helpers/builtin/interopRequireDefault'\n      you can fix it by this: \n      Shell\n      cd /simpleMap/\n      yarn add @babel/runtime\nIf everything is ok you'll see map with a marker (normal size) on it.\nMade a change in App.js\n<Text style={styles.welcome}>Simple Map v2</Text>\ncode-push release-react simpleMap-ios ios\nClick on the button Press to sync\nPress Install in dialog, app will be reloaded. Marker is huge now! \n\nSolution:\n\nGo to /simpleMap/node_modules/react-native/React/Base/RCTUtils.m\nReplace (line ~715):\n   Objective-C\n   image = [UIImage imageWithData:fileData];\n   with the following:\n   Objective-C\n   CGFloat scale = 1.0;\n   if ([[imageURL absoluteString] hasSuffix: @\"@3x.png\"]) {\n     scale = 3.0;\n   } else if ([[imageURL absoluteString] hasSuffix: @\"@2x.png\"]) {\n     scale = 2.0;\n   }\n   image = [UIImage imageWithData:fileData scale: scale];\n(It works only for .png)\nRun the app again\nMade a change in App.js\n<Text style={styles.welcome}>Simple Map v3</Text>\ncode-push release-react simpleMap-ios ios\nClick on the button Press to sync\nPress Install in dialog, app will be reloaded. \n   Marker is normal now!\n\nCan you guys try this solution and reply if it helped?. Hi @sercanov,\nSadly we couldn\u2019t find any similar issues in the react-native repo, and we are also unable to reproduce this bug without codepush in order to create an issue in their repo.. Hello, @iain-merrick-fanduel,\nI've done some investigation about this CODE_PUSH_APK_BUILD_TIME.\nI've found that it is used to decide whether the application should use a code-push bundle or the \"binary bundle\" from the fresh build. \nEvery bundle downloaded by code-push receives a property to associate this bundle with the current application build, so if you rebuild the application it wouldn't use the old code-push bundle and takes the fresher bundle from the build. [Code]\nSo that's why this timestamp needed.\nBut if we only use the bundles hash then we can't determine which bundle to use: the one from CodePush server or the bundle embedded in apk.. Hi @pehagg,\nIt's actually related to react-native, you can find the answer here.\nI hope it will help you. Otherwise feel free to ask any questions!. Hi @peacechen!\nI've tried to reproduce the issue, but everything works as intended.  \nreact-native 0.56.1\nreact-native-code-push 5.4.2\ngradlew 4.6\ngradle plugin 3.1.4  \nHere is a part of my react-native run-android log:\n```\n...\n\nTask :app:bundleDebugJsAndAssets\nScanning folders for symlinks in {project_path}/node_modules (12ms)\nScanning folders for symlinks in {project_path}/node_modules (24ms)\nwarning: the transform cache was reset.\nLoading dependency graph, done.\nbundle: Writing bundle output to: {project_path}/android/app/build/intermediates/assets/debug/index.android.bundle\nbundle: Done writing bundle output\nTask :app:generateBundledResourcesHashDebug\n1733b7f420d2355475737097662875c680040ddc9a7898a8b583a6eb2b0c0fa0\n...\n``\nSo whengenerateBundledResourcesHashDebugtask is performed, the/build/intermediates/assets/debug/already created.  \nBut in your case/build/intermediates/assets/debug/doesn't exist for some reason.  \nCan you share this part of yourreact-native run-android` log please?  \n\nAnd if can provide us with a simple reproducible demo it would be very helpful!. Hey @peacechen, you are right, :app:bundleDebugJsAndAssets should be skipped by default in debug. I've just missed this moment because I've used a specific app which is configured differently.  \nI've created a new react-native 0.56.1 (gradle plugin 3.1.4) app and that stage was also skipped: :app:bundleDebugJsAndAssets SKIPPED,\nbut the /build/intermediates/assets/debug/ folder was still created properly, so I guess it's now the reason.  \nThen I've tried gradle plugin 3.2.1 and finally reproduced the issue. (It's because Gradle Plugin 3.2 uses a new intermediates/merged_assets directory instead of intermediates/assets)\nSo if you are using gradle plugin 3.2+ it's also better to use react native 0.57.2+ for better compability.  \nThere is a workaround for this:\nIn {project_dir}/node_modules/react-native-code-push/android/codepush.gradle (~86-90) just add this three lines:\ndiff\ngenerateBundledResourcesHash = tasks.create(\n        name: \"generateBundledResourcesHash${targetName}\",\n        type: Exec) {\n+   doFirst {\n+       jsBundleDir.mkdirs()\n+   }\n    commandLine (*nodeExecutableAndArgs, \"${nodeModulesPath}/react-native-code-push/scripts/generateBundledResourcesHash.js\", resourcesDir, jsBundleFile, jsBundleDir, resourcesMapTempFileName)\n}\nCan you tell me what version of gradle plugin you are using?\nPlease let me know if it helps. We'll continue investigating.. Hey @peacechen!\n\nMy environment is using Gradle plugin 3.2.0, so it looks like you've found the culprit. We're not ready to upgrade to RN 0.57 due to some of its breaking changes.\n\nUnfortunately, the problem is that the react-native 0.56 (< 0.57.2) does not support Gradle 3.2, so if you try to run Release version of RN 0.56 (even without CodePush) it just will not work (bundle will not be packed in the application). So our workaround is kinda useless in this case.\nI see two solutions:\n\nYou can use gradle plugin 3.1.4. \n\nFrom react-native changelog [0.57.0]:\n\nAndroid tooling has been updated to match newer configuration requirements (SDK 27, gradle 4.4, and support library 27); building with Android plugin 3.2 doesn't work due to the gradle scripts, so please stay on Android Studio 3.1 for now\n2. Or you can implement this fix in react.gradle file.\n\nP.S. and for the rest of those who are also looking for a solution:\n\nYou can use react-native >= 0.57.2\nYou can set the output directory manually in your project_path/android/app/build.gradle:\nGroovy\nproject.ext.react = [\n    entryFile: \"index.js\",\n    jsBundleDirDebug: \"$buildDir/intermediates/merged_assets/debug/mergeDebugAssets/out\",\n    jsBundleDirRelease: \"$buildDir/intermediates/merged_assets/release/mergeReleaseAssets/out\"\n]. You're welcome\ud83c\udf7a I'm happy to help!\nThanks for using code-push!\nIf you have any other questions, please feel free to ask.. Hi @ferrannp,\nCan you specify which version of react-native you are using?\nAs far as I know this issue has been fixed in react-native 0.57.2\nAndroid specific changes\n...\nAdd workaround for Android Gradle Plugin 3.2 change to asset dir (a4fed6e by @edilaic)\n.... @ferrannp I hope it will help, please share the results with us!. Hi, @ferrannp\nI'll close this issue for now as it seems to be resolved.\nPlease feel free to reopen this issue or create a new one if you have any other question.. Hi @ferrannp,\nThanks for this question!\n\n\n\nIf you want code-push release-react to use not the app version but this library version you can specify --gradleFile <your_lib.build.gradle> and it will use the version from this file.\nOr do you mean that the app uses its version (not the library version) when requesting a codepush update?\nIt would also be great if you could provide us with a simple example of such a library for tests! Or we could create it ourselves but it will take some time.. @ferrannp That's great! \nIf you have any other questions, please feel free to ask.. Hi @ferrannp,\nYeah, I think it's possible, but we need some time to investigate this.\nAlso, if you can provide us with some sample application it would help us to find a solution faster.. Hi @gokhanamal!\nThis is a really good approach for naming versions.\nI've tested this scenario and found out that versions like 2018.10.10 works properly, but there is a problem when we try to use 2018.10.09, it's because of leading zero. It's just not valid semver version format for and as far we are using semver we need to fallow this standard.\nThere are still ways to use this approach:\n- 2018.10.9\n- 20181009. @gokhanamal Great, you are welcome!\nI'll close the issue for now, but if you have any other questions feel free to reopen this issue or open another.\nThank you for using code-push!. Hello @saranshagarwal,\nI've created some simple app to test:\n1. code-push app add Issue1442-android android react-native\n2. Copied Staging deployment key\n3. react-native init --version=\"0.56.0\" Issue1442\n4. yarn add react-native-code-push\n5. react-native link react-native-code-push, pasted Staging deployment key for android.\n6. Replaced App.js with your version of this file, fixed it a little bit.\n7. Added bundleInDebug: true in ./android/app/build.gradle (to test the app in debug mode without a bundler)\n8. Made codepush release with CodePush bundle! text (code-push release-react Issue1442-android android)\n9. Replaced this text with Built in bundle!\n10. react-native run-android\nResult\n\nYou can check this demo app [here] (there is a README).\nCan you test it and share the results with us?. Hi @saranshagarwal,\nI'm going to close this issue for now as I haven't heard from you in a while, unfortunately.\nPlease feel free to reopen it if you have any questions.. Hi @eladgel!\nThank you for your work, it's really great, but I'm afraid this will not help users to solve the problem completely.\nThe main reason behind this issue is that react-native < 0.57.2 can't work with gradle plugin >= 3.2 properly. So even if we create this folder, it will not help us make the release version of the application work.\nYou can read more about it here.\nPlease let me know if you have any questions!. Hi @shashankmeddo,\nThanks for reporting!\nI understand your disappointment, but we can't fix this in our repository, because it's basically react-native < 0.57.2 + gradle plugin >= 3.2 incompatibility (as explained in this comment which you mentioned).\nRegardless of what we do with our code, you still won't be able to build a release version of your application (even without codepush).\nThere are three solutions in this case:\n1. You can use gradle plugin 3.1.4.\n2. You can use react-native >= v0.57.2.\n3. (dirty one) Or you can implement this code in your /node_modules/react-native/react.gradle file yourself.\nUnfortunately, there's not much we can do about this, we can only warn users about this incompatibility.\nI hope my answer was helpful. Feel free to ask any questions if something remains unclear.. Now I understand. It's gonna take some time to research and then I'll let you know how to fix it.. Hi @shashankmeddo,\nI've found another solution and it's quite simple, you need to set the output directory manually in your project_path/android/app/build.gradle:\nGroovy\nproject.ext.react = [\n    entryFile: \"index.js\",\n    jsBundleDirDebug: \"$buildDir/intermediates/merged_assets/debug/mergeDebugAssets/out\",\n    jsBundleDirRelease: \"$buildDir/intermediates/merged_assets/release/mergeReleaseAssets/out\"\n]\nPlease try it and let me know if it helped.. That's great!\nThanks for using CodePush!. Hi @shashankmeddo,\nIt is actually an external (react-native) issue, and I'm not sure how react-native 0.53.3 gradle script works with gradle 3.2, maybe you could find something similar (or create an issue) in react-native repository.. Hi @andrewrt,\nThanks for reporting!\nI've tested it and in my case it works as it should (unzipped is a folder):\n\nI've also renamed SSZipArchive to SSZipArchive2 for clarity.\nIt would be very helpful if you could provide us with a simple reproducible demo because I cannot reproduce the issue.. @andrewrt, I don't use cocoapods in this project either.\nI'm using very simple project:\n- react-native init ...\n- yarn add react-native-code-push\n- react-native link react-native-code-push. That's great!\nThanks for using CodePush!. Hey @AndrewJack,\nThanks for this information!\nDon't worry about NickToropov, he moved to another project, and his unassignment by you is just a bug \ud83d\ude42 \nCan you share some details about this issue? Does this happens every time on these devices or occasionally. We just don't have any of these devices to test it.. Unfortunately, we haven\u2019t heard from you in a while, so I'll close the issue for now, but, please, feel free to reopen it if you have some additional details or questions.. Hello @dyfvicture,\nThanks for the question!\nI have to admit, your configuration is very unusual. We need time to investigate.\nIt would be great if you could provide us with a simple reproducible demo so we could find the answer faster.. Hi @dyfvicture,\nSorry for the delay.\nI was finally able to reproduce it! I will try to find a solution when I have enough time and hope it happens soon. I'll let you know as soon as I find something.\nThank you for your patience!. Hi @dyfvicture,\nSorry again for this huge delay!\nFinally I was able to make enough time for this question, the issue was quite complicated.\nAs you already know, <WebView> element cannot work with source = { require('./...html') }, and the only way to set source is to use { uri: \"file:///...\"}.\nI expected that I could set path to our CodePush file directly like this:\njs\n// Some example from my app\n{ uri: \"file:///data/user/0/com.updex_rn/files/CodePush/3b4d1ba9141098114d19ad0263b99a19c9c2cfa4a0dd1c241b574e0ac6d12b3a/assets/index.html\" }\nBut, unfortunately, the result was the same... I got this error:\njavascript\nW/ReactNativeJS: 'Encountered an error loading page'\n{\n    canGoForward: false,\n    code: -1,\n    canGoBack: false,\n    description: 'net::ERR_ACCESS_DENIED',\n    loading: false,\n    title: 'Webpage not available',\n    url: 'file:///data/user/0/com.updex_rn/files/CodePush/3b4d1ba9141098114d19ad0263b99a19c9c2cfa4a0dd1c241b574e0ac6d12b3a/assets/index.html',\n    target: 7 \n}\nAs with require('./pages/index.html').\nThis means we simply don't have access to the files directly, and as I understand, that's the reason why require(...) doesn't work on Android. WebView only has access to file:///android_asset/.... I also tried to grant my app a permission to Storage, but it also didn't help.\nUnfortunately, I don't see any other way to make it work.. @dyfvicture, it was the least I could do! I'll close the issue for now, but let me know if you have any questions.. Hi @floynn,\nThanks for reporting and sorry for the delay!\nThis is actually a pretty good idea, we need some time to investigate this question a bit more and I think we will fix it. I'll let you know about any changes.. @floynn, we discussed this issue with the team and decided to simplify the migration to AndroidX for our users and removed android.support dependency. Since PR is already merged I\u2019ll close the issue, but if you have any questions, feel free to ask.\nThanks again for the report and thanks for using CodePush!. Hi @DavideValdo,\nThanks for reporting!\n\u0421an you, please, clarify which version of gradle you are using?. @DavideValdo that's supposed to be a compatibility issue between react-native 0.57.1 and gradle-plugin v3.2+. Please check this message, I think that's the reason.\nPlease write to us if this has helped you in resolving the issue and feel free to ask if you have any further questions!. @DavideValdo glad to hear the problem is solved, but I will definitely investigate the issue with react-native 0.57.7, thanks for that information.\nI'll close the issue, but if you can add some details about your problem with rn 0.57.7, it would be very helpful!. Tested react-native 0.57.7 with gradle plugin 3.2.1, no compilation errors so far. Maybe it was something specific for your app. But now we know that such a problem can happen and we will be ready for it. Thanks again!. @DavideValdo, don't worry, I just thought it might be related to the CodePush, but it looks like it's a react-native issue, so I think that there is no need to investigate it here. Anyway, thanks for your responsiveness!. Hi @LzxHahaha,\nThanks for reporting!\nCould you please clarify which version of gradle you are using?\nAnd if you could provide us with a simple reproducible demo it would be very helpful!. @LzxHahaha thank you for that demo!\nI reproduced the issue and found how to fix it. \nYou don't need to use this:\nGroovy\nproject.ext.react = [\n    entryFile: \"index.js\",\n    jsBundleDirDebug: \"$buildDir/intermediates/merged_assets/debug/mergeDebugAssets/out\",\n    jsBundleDirStaging: \"$buildDir/intermediates/merged_assets/staging/mergeStagingAssets/out\",\n    jsBundleDirRelease: \"$buildDir/intermediates/merged_assets/release/mergeReleaseAssets/out\"\n]\nIt's a workaround for another issue (react-native < 0.57.2 + gradle plugin >= 3.2)\nYou need this (I've found a good example here):\nGroovy\nproject.ext.react = [\n    entryFile: \"index.js\",\n    bundleInStaging: true,\n    devDisabledInStaging: true,\n]\nPlease let me know if it helps you!. Great, glad to help!\nI'll close the issue for now, but if you have any questions, feel free to reopen it.\nThanks for using CodePush!. Hi @tmaly1980,\nThanks for contribution and your feedback about documentation.\nHowever I've investigated this question a bit more and came to the conclusion that this comment is not entirely true:\n- If we don't pass a callback for the status changes, the default callback (with a simple logging) will be used regardless of checkFrequency.\n- We don't provide a standard callback for download progress, but this is a designed behavior (regardless of checkFrequency).\nWe have some extended information about these callbacks in a few sections below and we believe this information should be enough.\nPlease let us know if we\u2019re missing something.. Hi @ytt123,\nThanks for reporting!\nCould you clarify some information:\n\nreact-native-code-push version:\nreact-native version:\ngradle version:\ngradle plugin version:. Hey!\nUnfortunately, we haven\u2019t heard from you in a while, so I'll close the issue for now. Please, feel free to reopen it if you still have some questions.. Hello @hyochan,\nThanks for contributing!\n\nI'm afraid we still can't merge it. We already had such PR but we decided to wait (while 'compile' works with the latest gradle) to keep backward compatibility as long as possible. Someone, for example, can still use react-native 0.56.1 with the old gradle and the last react-native-code-push version. . @hyochan you're right and we have plans to make it in the nearest future (probably at the beginning of next year). We'll just reopen and merge it when we are ready.. Hi @joaovpmamede,\nThat's great, thanks for keeping in touch!\nIs there anything else we can help you with? . I'll close the issue for now, but feel free to reopen it if you have any questions! :). Hi @eyalabadi98,\nThanks for reporting!\nCan you please make sure you are running version 1.75 of the app on your device? Yes, it's kinda obvious :) , but something could have happened, for example, some problems with updating the app or something else.. Hey @eyalabadi98,\nI think we need some additional logging to find out, maybe code-push sends the wrong app version in the update request.\nPlease, add this code:\njavascript\n  console.log('[CodePush] queryPackage: ' + queryPackage.appVersion);\n  console.log('[CodePush] update: ' + update.appVersion);\nin your /node_modules/react-native-code-push/CodePush.js after this line [54]:\njavascript\n  const update = await sdk.queryUpdateWithCurrentPackage(queryPackage);\nThen rebuild the app, try to sunc and it will allow us to see what happens.\n. @eyalabadi98 and if you change the version of the app and run the app using Xcode, do you get this log message?\n\n. Hi @eyalabadi98, unfortunately, we haven\u2019t heard from you in a while, so I'll close the issue for now, but please feel free to reopen it if you have any further questions or new details.. Hi @MrLoh,\nThanks for reporting!\nYes, we know about this issue and have plans to fix it in the nearest future. You can read more about it here.. Hi everyone, thanks for reporting!\nYes, we had problems with CodePush service, but now it works fine. I'll close the issue for now, but we will continue monitoring this. We really appreciate your feedback.. Hey @zcmgyu, @alokRamteke,\nThanks for reporting and sorry for the delay!\nAre you still experiencing this problem? Or how long did it last?\nI can't reproduce it at the moment.. Hi @s349856186,\nThanks for this question!\nUnfortunately, there is no simple answer to this question. There's a good explanation for how rollback works. There are some reasons why a rollback can occur, for example in some cases it can be caused by closing the app during the installation, but CodePush can't get that kind of information.\nWe've implemented a feature that allows users to reinstall a rolled-back package after some delay, it can't stop updates from rollback, but can help users to get the updates eventually.. Hi @s349856186,\n\nI am currently using 5.3.5, If I upgraded locally to 5.5.0 and then released the update containing \"rollbackRetryOptions\", those Rollback devices can be updated normally (because they are 5.3.5)?\n\nUsers with \"5.3.5 binary version\" will ignore 'rollbackRetryOptions' since this feature is implemented in a native code, so you need to release a new binary version of your app for this feature to work.. @s349856186 could please you describe the steps you have taken?. @s349856186, can you please specify some detailed information:\n react-native-code-push version: 5.3.5?\n react-native version: ?\n is it your first code-push release?\n can you reproduce a rollback on your device?. Hey @s349856186,\nSorry for the delay!\nI tried to reproduce the issue with the code you provided, but everything works fine. Maybe you could provide us with some simple demo project so we can check your code directly and maybe detect some problems?. Unfortunately, we haven\u2019t heard from you in a while, so I'll close the issue for now, but please feel free to reopen it if you have some additional details or questions.\n. \nHi @jamessawyer,\nThanks for your question!\nI noticed one mistake in your rollback command: code-push rollback my_app Production --targetRelease V1\nThe right way to set release label is v1.\nBut you can't do a rollback if target binary versions do not match (1.0.0 for v1 and 1.0.1 for v2).\nYou can use this command to fix it:\ncode-push patch my_app Production -l v1 --targetBinaryVersion \"<=1.0.1\"\ncode-push patch my_app Production -l v2 --targetBinaryVersion \"<=1.0.1\"\nand then this command should work:\ncode-push rollback my_app Production --targetRelease v1\nyou'll get a new release with label v3, and it will a copy of v1 (with target binary version <=1.0.1).\nAnd after that you can restore your target versions for your releases, if you want:\ncode-push patch my_app Production -l v1 --targetBinaryVersion \"1.0.0\"\ncode-push patch my_app Production -l v2 --targetBinaryVersion \"1.0.1\"\ncode-push patch my_app Production -l v3 --targetBinaryVersion \"1.0.1\". That's strange, I tested this with code-push cli 2.1.9 and it works. \nYou can also change target binary version via App Center portal\n\n. Sure, always glad to help! \ud83d\udc4d . Hello @maxschmeling,\nThanks for the contribution, we appreciate that!\nThere is one more use of DowloadProgressCallback in the same file in line 95, can you fix this in your PR too?. Hey @yogeshchoudhary147,\nThanks for reporting!\nIt's hard to say how react-native 0.55 will work with gradle 3.2 with this workaround. We need some time to check this configuration.\nMaybe you can provide us a simple reproducible demo so we could test it directly?. Hi @yogeshchoudhary147,\nSorry for the delay!\nI've created a project with react-native-code-push 5.3.5, RN 0.55.4 and Gradle 3.2.1 (with  project.ext.react workaround) and everything works fine. \nYou can check my demo project here: Issue1493H.zip\nSteps to run:\n\nUnzip the project\nnpm install\nSet your signingConfigs in /android/app/build.gradle file\nRun the app from Android Studio\n\nYou can check this demo and share the results with me.. Hi @itsandrewsmith,\nThanks for reporting!\nIt looks like there's some difference between your local and AppCenter versions of the app. Can you explain more detailed how you were able to get the AppCenter build to update with a new CodePush deployment?. Hi @itsandrewsmith,\nUnfortunately, we haven\u2019t heard from you in a while, so I'll close the issue for now, but please feel free to reopen it if you have some additional details or questions.\n. Hi @HighSoftWare96,\nThanks for reporting!\nYou're right, we already know about this problem, we have a similar open issue at the moment, so I'll close this issue, and start working on it in the nearest future!. Hi @gengjiawen,\nThanks for contributing!\nCould you explain what these changes are and why they are needed?. Hi @coolguy001tv,\nThanks for reporting!\nDid it occasionally happen on your device (not Huawei Mate20)? Did I understand you correctly?. Thanks, I understand now. I think this question might be related to app permissions and it's very strange, these Huawei devices may have an unusual memory configuration, but we can't test it without the actual device, so we can only assume the reasons.. Hey @coolguy001tv,\nSorry for the delay!\n\nBesides, I think the code here should have an if-not-null-test between line 74 & 75.\n\nI think you're right!\nHowever, it still won't solve the issue completely. These specific devices won't be crashed, but still won't be able to update via CodePush. And it's weird that file.isDirectory() returns true before the crash. We will try to investigate the issue in more detail.. Hi @iAladdin,\nThanks for reporting!\nIt looks like there are some problems during getting info from /files/CodePush/codepush.json (in CodePushUpdateManager.getCurrentPackageInfo).\nHow often does this happen? Is this a rare incident or something recurring?\nCan you also clarify how you use CodePush in your project?. Hi @iAladdin,\nSorry for the delay!\nWe have found that there's a similar unresolved issue #1149 and we will try to investigate it more deeply. Please let us know if you find out anything related to this issue, it would help us a lot!. Hey, @sridhard \nThanks for reporting!\n1) Can you please also clarify how you use CodePush?\n2) Can you reproduce this issue yourself?\nI tried to reproduce it, but unfortunately it did not work. If you can share any new details, we would really appreciate it!. @sridhard, thanks for the details! You can try to use workaround suggested here, until we fix this issue.. Hey @iAladdin, @sridhard \nWe've fixed the issue in the new version of react-native-code-push (5.6.0).\nI'll close the issue for now, but feel free to ask any questions or reopen this issue if needed!. Hi @isaaclem \nThanks for reporting!\nI've tried to reproduce the issue, but everything works as intended. I've recorded the process and you can check it here.\nIn a few words, appcenter codepush release-react command generates a \"bundle + assets\" package and if this package is the same as the previous CodePush release you will get this error:\nError: The uploaded package was not released because it is identical to the contents of the specified deployment's current release.\nBut since we changed our js code, the bundle will be different and we shouldn't get this error.\nPlease let me know if it was helpful for you and ask me if you have any questions!. Hey @isaaclem,\nSorry for the delay.\n\nWhether I execute the command appcenter codepush release-react -a / -d Production before deploying to appstore or after, does it make any changes?\n\nNo, it doesn't matter, the app will still try to download the latest version of CodePush update.. Glad to help, thanks for using CodePush!. Hey @lhjzzu,\nThanks for reporting!\nYou can disable this CodePush release and no one will be able to download this broken update, but it won't fix the problem for devices that have already downloaded the update. Also, you can release a new update with the fixed or old (if you still have the previous version of your code) js code to fix the app for those who downloaded your first release. \nThere is a way to roll back (on a particular device) to the local version without releasing a new CodePush update if you reinstall the app or delete the app data (after disabling the first CodePush release).\nPlease let me know if it was helpful for you and ask me if you have any questions!. Great, glad to help!\nI'll close the issue for now, but please feel free to reopen it if you have any further questions.. Hi @karlFrascari2 \nThanks for reporting and sorry for the delay!\nCould you confirm if the problem is still relevant to you?\nI tried to download a blob from https://codepushupdates.azureedge.net/storagev2/{some-valid-key} and it worked fine for me.. @karlFrascari2, can you try to download it from here:\nhttps://codepush.blob.core.windows.net/storagev2/{key}\nAnd where did you find the URL previously?. Hey, @karlFrascari2\nSorry for this unforgivably long delay!\nAre you still experiencing this problem?\nI tried to find information regarding this issue but unfortunately didn't find anything new.... Unfortunately, we haven\u2019t heard from you in a while, so I'll close the issue for now, but please feel free to reopen it if you have some additional details or questions.. Hi @nbwiller,\nThanks for reporting and sorry for the delay!\nWe tried to reproduce the issue, but appcenter codepush release works fine even with UWP applications. \nFor example:\n- I've created an app \nappcenter apps create -p React-Native -o Windows -d uwpApp.\n- then I've created a deployment\n   appcenter codepush deployment add -a yuri.kulikov/uwpApp Staging\n- and then released an update \n   appcenter codepush release -a yuri.kulikov/uwpApp -c ./windows/uwpApp -d Staging -t=\"*\"\nResult:\n\nCan you please clarify which AppCenter CLI version you are using (appcenter -v)?\nYou also can try the old CodePush CLI (code-push release command) or you can try appcenter codepush release-react -a [your_app_full_name] -d Staging -t=\"*\" command.\nPlease share the results and let us know if it helped!. @karlFrascari2, thanks for your feedback!\n\nAny chance you can update the App Center docs to include this info?\n\nSure, we'll fix the docs. Until then, we'll keep the issue open.. Hi @giantss,\nThanks for reporting!\nCould you please share the logs from Xcode (there should be some messages tagged with [CodePush])?\nAlso, is it a debug build?. Don't worry, thanks for keeping us in touch and thanks for using CodePush \ud83d\ude42 !. Hi @pie6k,\nThanks for reporting!\nYou're right! We are currently working on a fix and will release a new version soon.. Yeah, it's a typo and I'll rename it as you suggest.. When I use npm, I'm getting this (when I try to build the created app on android):\nFAILURE: Build failed with an exception.\n* What went wrong:\nCould not list contents of 'path_to_app/node_modules/fsevents/node_modules/.bin/node-pre-gyp'. Couldn't follow symbolic link.\nBut yarn solve this problem.\nI'll create a method then will check if yarn is installed.. I guess that it was my system specific issue and I can't reproduce it now, so I think it's better to just return this code.. 1. Yes, I can do this, it will be false by default.\n1. If reactNativeVersion isn't specified, then script will just use latest version:\nreactNativeVersion = args[1] || `react-native@${execSync('npm view react-native version')}`.trim();. Yes, it makes sense, I'll do this.. ",
    "maggialejandro": "Hi @sergey-akhalkov , I just did that but I get the same error.. . ",
    "jaseemabbas": "@sergey-akhalkov That was magic!\n. ",
    "dongbingbin77": "but the second started \uff0capp update. it is that a bug\uff1f. you mean I call the codePush.sync({  method again like this\n    componentWillMount(){\n        if (Platform.OS == 'android'){\n            codePush.sync({\n                updateDialog: false,\n                installMode: codePush.InstallMode.IMMEDIATE\n            });\n            codePush.sync({\n                updateDialog: false,\n                installMode: codePush.InstallMode.IMMEDIATE\n            });\n        }\n}. I tried it, still have to wait until the second start to see the update\ncomponentDidMount(){\n        if (Platform.OS == 'android'){\n            codePush.notifyAppReady();\n            codePush.sync({\n                updateDialog: false,\n                installMode: codePush.InstallMode.IMMEDIATE\n            });\n        }\n    }. I have found the problem, because I was on the home page to do the reasons for the cache, very grateful. \"incremental updates\"\uff0cIt should be: differential updates. From the codepush website to see this content: \"The CodePush client supports differential updates, so even though you are releasing your JS bundle and assets on every update, your end users will actually download the files they Need the call handles this automatically so that you can focus on creating awesome apps and we can worry about optimization end user downloads.\nAnd I would like to know how to use this function.. Meaning that this function is the default, but now there are bugs, need to repair it? If so, I would like to know when to fix this problem?. ok, thank you very much. thank you very much. ",
    "akki-ng": "Hi @sergey-akhalkov, \ncheckForUpdate will essentially do the same if the binary version of the update did not mismatch with the version of installed app. Below is the part of existing code of checkForUpdate function\n```javascript\nif (!update || update.updateAppVersion ||\n      localPackage && (update.packageHash === localPackage.packageHash) ||\n      (!localPackage || localPackage._isDebugOnly) && config.packageHash === update.packageHash) {\n    if (update && update.updateAppVersion) {\n      log(\"An update is available but it is not targeting the binary version of your app.\");\n    }\nreturn null;\n\n} else {\n    const remotePackage = { ...update, ...PackageMixins.remote(sdk.reportStatusDownload) };\n    remotePackage.failedInstall = await NativeCodePush.isFailedUpdate(remotePackage.packageHash);\n    remotePackage.deploymentKey = deploymentKey || nativeConfig.deploymentKey;\n    return remotePackage;\n  }\n```\nLets consider a use-case, where current installed binary version is 1.0.1 with label(codepush label) v1. And native code has changed in the dev cycle and binary version is changed to 1.0.2 in build.gradle. And code-push update has been triggered. The above existing code ignores any binary version mismatch, thinking the update was not targeted to the binary version of currently installed app. In our example, installed app(1.0.1) will ignore the update of 1.0.2. As codepush forces these updates to happen from respective store as native codes can not be pushed as an update via codepush. But with the fix we can provide a hook to handle such cases.\nAnd the code-push client in the app using decorator pattern \njavascript\n               App = codePush(codePushOptions)(ReactCustomUpdateComponent)\nDecorator pattern supports 2 function definition(existing)\n    1. codePushDownloadDidProgress\n    2. codePushStatusDidChange\n    3. codePushOnBinaryVersionMismatch[Pull request]\nThe api \"codePushOnBinaryVersionMismatch\" will provide a viable option for users to handle such updates in their own way (enterprise internal application) to download the latest \"APK\" file from hosted store(AWS S3). By this way new apk's can be distributed without going through the channel of PlayStore in some cases, for other cases PlayStore App can be opened up with the option to install the current app's latest binary.\nBelow is the sample code which I wrote for our internal audience.\n```javascript\nlet codePushOptions = { updateDialog: true, installMode: codePush.InstallMode.IMMEDIATE, checkFrequency: codePush.CheckFrequency.ON_APP_RESUME};\ncodePush.SyncStatus.DOWNLOADING_BIN_PACKAGE = -100\nclass App extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      codepushStatus: codePush.SyncStatus.CHECKING_FOR_UPDATE,\n      codepushStatusMessage: \"Checking for updates\",\n      progress: {\n        receivedBytes: 0,\n        totalBytes: 1\n      },\n      update: {\n        appVersion: // Current installed binary version\n      }\n    }\n  }\ncodePushStatusDidChange(status) {\n      var message = \"\"\n      switch(status) {\n          case codePush.SyncStatus.CHECKING_FOR_UPDATE:\n              console.log(\"Checking for updates\");\n              message = \"Checking for updates\"\n          case codePush.SyncStatus.DOWNLOADING_PACKAGE:\n              console.log(\"Downloading package.\");\n              message = \"Downloading package\"\n          case codePush.SyncStatus.INSTALLING_UPDATE:\n              console.log(\"Installing update.\");\n              message = \"Installing update\"\n          case codePush.SyncStatus.UP_TO_DATE:\n              console.log(\"Up-to-date.\");\n              message = \"Up-to-date\"\n          case codePush.SyncStatus.UPDATE_INSTALLED:\n              console.log(\"Update installed.\");\n              message = \"Update installed\"\n      }\n      if(this.state.codepushStatus != codePush.SyncStatus.DOWNLOADING_BIN_PACKAGE) {\n        this.setState({codepushStatus: status, codepushStatusMessage: message})\n      }\n  }\ncodePushDownloadDidProgress(progress) {\n      this.setState({codepushStatusMessage: \"Downloading updates\", progress: progress})\n  }\ncodePushOnBinaryVersionMismatch(update) {\n    if(update && update.updateAppVersion) {\n      alert(\"You are running on version \" + Config.VERSION_NAME + \"\\nApp has been updated to \" + update.appVersion + \" \\nDownload latest APP and install\")\n      this.setState({codepushStatus: codePush.SyncStatus.DOWNLOADING_BIN_PACKAGE, codepushStatusMessage: \"Download newer version of your \" + Config.BUILD_NAME + \" app\", update: update})\n    }\n  }\nrenderDownloadBin() {\n    if(\" is defined\") {\n      return(\n           Linking.openURL(\"\")}>\n            \nDownload Now\n\n\n        )\n    }else {\n      return (\n          \nPlease download the latest APK\n\n        )\n    }\n  }\nrender() {\n    if(((this.state.codepushStatus == codePush.SyncStatus.DOWNLOADING_BIN_PACKAGE) && this.state.update)) {\n      console.log(this.state.update)\n      return (\n        \nInstalled Version: {Config.VERSION_NAME}\nNew Version: {this.state.update.appVersion}\n          {this.renderDownloadBin()}\n        \n      )\n    }else {\n      return (\n          \n\n\n        )\n    }\n  }\n}\nif(Config.CODE_PUSH_ENABLE) {\n  App = codePush(codePushOptions)(App);\n}\n```\n\n\nWe could handle the changes in native code by forcing users to download the new apk by clicking \"Download Now\" button. It is convenient for end users as well because there is no need of sharing the link of updated binary and notifying users on a different channel about binary updates.\n. @sergey-akhalkov Yeah, You are absolutely right. We must update the readme to avoid such cases for iOS developers. As per codepush's concern I guess we are not violating any terms of android/iOS. Right?. sergey-akhalkov any idea about the timelines, when can we merge this PR?. Hey @max-mironov,\nI'm ok with the #920 PR. Thanks for the support. Do I need to sign any CLA for this?. @max-mironov I am seeing that PR #920 is already signed. But in this case how can I get the recognition for my contribution. Because my contribution takes a significant space in PR #920 .\n@disharmonized. @max-mironov Thanks for the update. I did not sign the CLA earlier as the label was CLA-Not-Required. But I appreciate your quick response. I have signed the CLA now and I got the signed PDF too. It will be really helpful if you guide me through further steps. Thanks.. @max-mironov Thanks for the info. I'm fine with this as long as I get the credit for being the original contributor related to 'https://github.com/Microsoft/react-native-code-push/pull/920/commits/aa6e98982f3fe5b91ee251f533118327ab663d01' . @max-mironov In that case let's roll it out then!. @TrustTheBoy Please look at the comment It explains how to use this. The only prerequisite is the URL where you will host the latest APK. It should be straight-forward, let me know if you need more details. This feature is available since V4.1.1 - beta.\n@max-mironov Can we add the above comment in README?. @TrustTheBoy I'm not able to reproduce this issue. Can you make sure that installed binary version in the device is less than \"1.0.2\", and that installed binary must have codepush version \"4.1.1 - beta or greater\" and is using \"codePushOnBinaryVersionMismatch\" callback handler.\nFor example, the version of binary apk installed on your device is 1.0.0 and is using \"codePushOnBinaryVersionMismatch\" to alert the user if a binary is updated (greater than 1.0.0). Later if you make a new build and host it somewhere and then release a codepush update with a binary version 1.0.2, at that point installed binary will notify of updated version.\nFor clarity can you send us the logs of codepush when app is trying to check update, along with the installed binary version and codepush release targetBinaryVersion. It will make it easier for us to reproduce the issue.. @TrustTheBoy If you check the code of codepush.js block . This piece of code triggeres \"codePushOnBinaryVersionMismatch\". I would suggest you to put some console in this block to check if its even being executed.\nIn your logs you must see if such binary updates are available\n\"An update is available but it is not targeting the binary version of your app.\"\nTry printing \"update\" object just before the if block.\n. @sergey-akhalkov Thanks for taking time out to build demo. I appreciate your efforts. Thanks!. ",
    "TrustTheBoy": "@max-mironov @akki-ng codePushOnBinaryVersionMismatch How to use? Do you have demo to see it? I don't have an updated version of this package. I'm using react, native, 0.48.4, RNCP, 5.1.1-beta. @akki-ng @max-mironov  Thanks very much for help, but I found that the codePushOnBinaryVersionMismatch function was not called elsewhere,\n>>> I have submitted a new question\n\nI tried to use the following method, but I still couldn't detect it,The hook function cannot be triggered\n\njavascript\nCodePushUpdata = () => {\n        CodePush.sync({\n            updateDialog: {\n                appendReleaseDescription: true,\n                descriptionPrefix:'\u66f4\u65b0\u5185\u5bb9\uff1a\\n',\n                title:'\u66f4\u65b0\u6807\u9898',\n                mandatoryUpdateMessage:'',\n                mandatoryContinueButtonLabel:'\u66f4\u65b0',\n            },\n            mandatoryInstallMode:CodePush.InstallMode.IMMEDIATE,\n            //deploymentKey: CODE_PUSH_PRODUCTION_KEY,\n            },\n            this.codePushStatusDidChange.bind(this),\n            (progress)=>{\n                this.codePushDownloadDidProgress.bind(this)\n            },\n            (binary)=> this.handleBinaryVersionMismatchCallback(binary)\n        );\n    }\nand\njavascript \nCodePush.checkForUpdate()\n        .then((update) => {\n            if (!update) {\n                Toast.loading('The application is up to date\uff01', 3, () => {\n                    console.log('Load complete !!!');\n                });\n            } else {\n                CodePush.disallowRestart();\n                Modal.alert('message', `New updates available ${JSON.stringify(update)}`, [\n                    { text: 'cancel' /* onPress: () => this.goBack() */ },\n                    { text: 'install', onPress: () => CodePushUpdate() },\n                ]);\n            }\n        })\n        .then((update) => {\n            Modal.alert('message', `There is a new version that can be used. Is it installed\uff1f${ update}`, [\n                { text: 'cancel' },\n                { text: 'install', onPress: () => Linking.openURL('http://xxx.xxx.xx.xx/path/android.apk') },\n            ]);\n        })\n        .catch((error) => {\n            Toast.loading(`error\uff1f${error}`, 3, () => {\n                console.log('Load complete !!!');\n            });\n        });. @sergey-akhalkov I tried to use your method, or not, and the hook function failed to execute. @akki-ng  Can you see that I have failed to perform the replication?>> Demo <<. @max-mironov \nI have this problem, too\n\nThis error occurred after the update and restart, and flashes back. After you open again, check the update. The prompt version is up to date, but the content has not been updated.\n\nSamsung  Galaxy Note3, android 5.0\n```java\nException in native call\n    java.lang.IndexOutOfBoundsException: index=1 count=0\n    at android.view.ViewGroup.addInArray(ViewGroup.java:4303)\n    at android.view.ViewGroup.addViewInner(ViewGroup.java:4234)\n    at android.view.ViewGroup.addView(ViewGroup.java:4065)\n    at android.view.ViewGroup.addView(ViewGroup.java:4010)\n    at com.facebook.react.uimanager.ViewGroupManager.addView(ViewGroupManager.java:47)\n    at com.facebook.react.uimanager.NativeViewHierarchyManager.manageChildren(NativeViewHierarchyManager.java:395)\n    at com.facebook.react.uimanager.UIViewOperationQueue$ManageChildrenOperation.execute(UIViewOperationQueue.java:179)\n    at com.facebook.react.uimanager.UIViewOperationQueue$1.run(UIViewOperationQueue.java:768)\n    at com.facebook.react.uimanager.UIViewOperationQueue.flushPendingBatches(UIViewOperationQueue.java:824)\n    at com.facebook.react.uimanager.UIViewOperationQueue.access$1600(UIViewOperationQueue.java:48)\n    at com.facebook.react.uimanager.UIViewOperationQueue$DispatchUIFrameCallback.doFrameGuarded(UIViewOperationQueue.java:870)\n    at com.facebook.react.uimanager.GuardedFrameCallback.doFrame(GuardedFrameCallback.java:31)\n    at com.facebook.react.modules.core.ReactChoreographer$ReactChoreographerDispatcher.doFrame(ReactChoreographer.java:136)\n    at com.facebook.react.modules.core.ChoreographerCompat$FrameCallback$1.doFrame(ChoreographerCompat.java:107)\n    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:775)\n    at android.view.Choreographer.doCallbacks(Choreographer.java:590)\n    at android.view.Choreographer.doFrame(Choreographer.java:559)\n    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:763)\n    at android.os.Handler.handleCallback(Handler.java:739)\n    at android.os.Handler.dispatchMessage(Handler.java:95)\n    at android.os.Looper.loop(Looper.java:145)\n    at android.app.ActivityThread.main(ActivityThread.java:5942)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at java.lang.reflect.Method.invoke(Method.java:372)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1400)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1195)\n09-27 19:46:38.957 28212-28212/com.mobilegovernment D/ReactNative: [CodePush] Update did not finish loading the last time, rolling back to a previous version.\n09-27 19:46:38.967 28212-31246/com.mobilegovernment W/unknown:React: The packager does not seem to be running as we got an IOException requesting its status: Unable to resolve host \"6\": No address associated with hostname\n09-27 19:46:39.037 28212-28212/com.mobilegovernment E/unknown:React: Tried to remove non-existent frame callback\n09-27 19:46:39.037 28212-28212/com.mobilegovernment W/unknown:React: Not flushing pending UI operations because of previously thrown Exception\n09-27 19:46:39.047 28212-28212/com.mobilegovernment W/unknown:React: Packager connection already open, nooping.\n09-27 19:46:39.047 28212-28212/com.mobilegovernment W/unknown:React: Inspector connection already open, nooping.\n09-27 19:46:39.057 28212-28272/com.mobilegovernment W/ContextImpl: Failed to ensure directory: /storage/extSdCard/Android/data/com.mobilegovernment/cache\n09-27 19:46:39.067 28212-31247/com.mobilegovernment D/React:  View manager getCommandsMap:\n09-27 19:46:39.077 28212-28212/com.mobilegovernment D/AbsListView: Get MotionRecognitionManager\n09-27 19:46:39.087 28212-28212/com.mobilegovernment V/BitmapFactory: DecodeImagePath(decodeResourceStream3) : res/drawable-xhdpi-v4/spinner_white_16.png\n09-27 19:46:39.087 28212-28273/com.mobilegovernment W/ContextImpl: Failed to ensure directory: /storage/extSdCard/Android/data/com.mobilegovernment/cache\n09-27 19:46:39.137 28212-31247/com.mobilegovernment E/unknown:React: Exception in native call\ncom.facebook.jni.CppException: facebook::react::Recoverable: Could not open file/data/data/com.mobilegovernment/files/CodePush/ff893de120cea6fe6f83aada868ff56a082fb71db07cb7c329df9a81d38e51e7/CodePush/index.android.bundle: No such file or directory\n    at com.facebook.react.cxxbridge.CatalystInstanceImpl.jniLoadScriptFromFile(Native Method)\n    at com.facebook.react.cxxbridge.CatalystInstanceImpl.loadScriptFromFile(CatalystInstanceImpl.java:203)\n    at com.facebook.react.cxxbridge.JSBundleLoader$2.loadScript(JSBundleLoader.java:53)\n    at com.facebook.react.cxxbridge.CatalystInstanceImpl.runJSBundle(CatalystInstanceImpl.java:216)\n    at com.facebook.react.ReactInstanceManager.createReactContext(ReactInstanceManager.java:994)\n    at com.facebook.react.ReactInstanceManager.access$600(ReactInstanceManager.java:109)\n    at com.facebook.react.ReactInstanceManager$4.run(ReactInstanceManager.java:746)\n    at java.lang.Thread.run(Thread.java:818)\n09-27 19:46:39.307 28212-28212/com.mobilegovernment I/Timeline: Timeline: Activity_idle id: android.os.BinderProxy@3aefb1ed time:181821499\n09-27 19:46:53.057 28212-28212/com.mobilegovernment D/ViewRootImpl: ViewPostImeInputStage ACTION_DOWN\n09-27 19:46:53.237 28212-28301/com.mobilegovernment E/unknown:React: Could not open stack frame\njava.net.UnknownHostException: Unable to resolve host \"6\": No address associated with hostname\n    at java.net.InetAddress.lookupHostByName(InetAddress.java:427)\n    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:252)\n    at java.net.InetAddress.getAllByName(InetAddress.java:215)\n    at okhttp3.Dns$1.lookup(Dns.java:39)\n    at okhttp3.internal.connection.RouteSelector.resetNextInetSocketAddress(RouteSelector.java:172)\n    at okhttp3.internal.connection.RouteSelector.nextProxy(RouteSelector.java:138)\n    at okhttp3.internal.connection.RouteSelector.next(RouteSelector.java:80)\n    at okhttp3.internal.connection.StreamAllocation.findConnection(StreamAllocation.java:178)\n    at okhttp3.internal.connection.StreamAllocation.findHealthyConnection(StreamAllocation.java:129)\n    at okhttp3.internal.connection.StreamAllocation.newStream(StreamAllocation.java:98)\n    at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.java:42)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:92)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:67)\n    at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.java:109)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:92)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:67)\n    at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.java:93)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:92)\n    at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.java:124)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:92)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:67)\n    at okhttp3.RealCall.getResponseWithInterceptorChain(RealCall.java:170)\n    at okhttp3.RealCall.execute(RealCall.java:60)\n    at com.facebook.react.devsupport.RedBoxDialog$OpenStackFrameTask.doInBackground(RedBoxDialog.java:214)\n    at com.facebook.react.devsupport.RedBoxDialog$OpenStackFrameTask.doInBackground(RedBoxDialog.java:191)\n    at android.os.AsyncTask$2.call(AsyncTask.java:288)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:237)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)\n    at java.lang.Thread.run(Thread.java:818)\n`. @max-mironov @sergey-akhalkov  help!!!. @max-mironov \nThank you so much for your assistance. No error has been encountered,but new problems have come up,When I download the update, the phone will not automatically restart the update, manual execution of codepush.syn, App will restart, how can I solve this problem?. @max-mironov Again, the 3.0.1 error occurred. @max-mironov Yes, not resolved. I have updated react/react-native to the corresponding version of RNCPjavascript\nimport CodePush from 'react-native-code-push';\nimport { Toast, WhiteSpace, WingBlank, Button, Icon } from 'antd-mobile';\nconst options = {\n    updateDialog: {\n        appendReleaseDescription: true,\n        descriptionPrefix: '\u66f4\u65b0\u5185\u5bb9\uff1a\\n',\n        title: '\u66f4\u65b0\u6807\u9898',\n        mandatoryUpdateMessage: '',\n        optionalUpdateMessage: '',\n        mandatoryContinueButtonLabel: '\u7acb\u5373\u66f4\u65b0',\n        optionalInstallButtonLabel: '\u7acb\u5373\u5b89\u88c5',\n        optionalIgnoreButtonLabel: '\u53d6\u6d88\u66f4\u65b0',\n    },\n    mandatoryInstallMode: CodePush.InstallMode.IMMEDIATE,\n};\nexport const CodePushUpdate = () => {\n    CodePush.allowRestart();\n    // CodePush.disallowRestart();\n    CodePush.sync(\n        options,\n        (syncStatus) => {\n            Toast.loading(syncStatusChangeCallback(syncStatus), 1, () => {\n                console.log('Load complete !!!');\n            });\n        },\n        progress => syncStatusChangeCallback(progress),\n        RemotePackage => alert('ppppppp'),\n    );\n};\nconst downloadProgressCallback = (progress) => {\n    console.log('downloadProgressCallback');\n    console.log(progress);\n};\nconst handleBinaryVersionMismatchCallback = (RemotePackage) => {\n    console.log('handleBinaryVersionMismatchCallback');\n    console.log(RemotePackage);\n};\nexport const syncStatusChangeCallback = (syncStatus) => {\n    let ToastMess = '';\n    switch (syncStatus) {\n    case CodePush.SyncStatus.CHECKING_FOR_UPDATE:\n        ToastMess = '\u6b63\u5728\u68c0\u67e5\u66f4\u65b0\u3002';\n        break;\n    case CodePush.SyncStatus.DOWNLOADING_PACKAGE:\n        ToastMess = '\u6b63\u5728\u4e0b\u8f7d\u66f4\u65b0\u5305';\n        break;\n    case CodePush.SyncStatus.AWAITING_USER_ACTION:\n        ToastMess = '\u7b49\u5f85\u7528\u6237\u64cd\u4f5c';\n        break;\n    case CodePush.SyncStatus.INSTALLING_UPDATE:\n        ToastMess = 'Installing update.';\n        break;\n    case CodePush.SyncStatus.UP_TO_DATE:\n        ToastMess = 'App \u5df2\u662f\u6700\u65b0\u7248\u672c';\n        break;\n    case CodePush.SyncStatus.UPDATE_IGNORED:\n        ToastMess = '\u7528\u6237\u53d6\u6d88\u66f4\u65b0.';\n        break;\n    case CodePush.SyncStatus.UPDATE_INSTALLED:\n        ToastMess = '\u66f4\u65b0\u5b89\u88c5\u5e76\u5c06\u7528\u4e8e\u91cd\u65b0\u542f\u52a8.';\n        break;\n    case CodePush.SyncStatus.UNKNOWN_ERROR:\n        ToastMess = '\u53d1\u751f\u672a\u77e5\u9519\u8bef,\u8bf7\u53ca\u65f6\u8054\u7cfb\u7ba1\u7406\u5458.';\n        break;\n    default:\n        ToastMess = 'default';\n    }\n    return ToastMess;\n};\n```\nand Update in time code\njavascript\ncomponentDidMount() {\n        this.onLoadingData();\n        CodePush.allowRestart();\n        AppState.addEventListener('change', (newState) => {\n            newState === 'active' && CodePushUpdate();\n        });\n    }. @max-mironov I tried 20 times, and this error caused App to start: \" no response\", followed by withdrawal, and the probability of error is 6/20;. @max-mironov \ndev:all android\n Updating the restart will cause OOM to appear, and the application is not responding\" \n```javascript\n09-27 21:22:07.978 2667-2685/com.mobilegovernment W/EGL_emulation: eglSurfaceAttrib not implemented\n09-27 21:22:07.978 2667-2685/com.mobilegovernment W/OpenGLRenderer: Failed to set EGL_SWAP_BEHAVIOR on surface 0xd1029660, error=EGL_SUCCESS\n09-27 21:22:14.020 2667-2685/com.mobilegovernment D/OpenGLRenderer: endAllStagingAnimators on 0xd5f08780 (RippleDrawable) with handle 0xd3904cb0\n09-27 21:22:15.422 2667-9509/com.mobilegovernment D/ReactNative: [CodePush] Loading JS bundle from \"/data/data/com.mobilegovernment/files/CodePush/0199781d7af639d5c9df34a1319634259bdf994d0b92f5a906facb77dc7833e9/CodePush/index.android.bundle\"\n09-27 21:22:15.485 2667-2682/com.mobilegovernment I/art: Clamp target GC heap from 108MB to 96MB\n09-27 21:22:15.525 2667-11579/com.mobilegovernment W/unknown:React: The packager does not seem to be running as we got an IOException requesting its status: Unable to resolve host \"0\": No address associated with hostname\n09-27 21:22:15.624 2667-2667/com.mobilegovernment W/unknown:React: Packager connection already open, nooping.\n09-27 21:22:15.625 2667-2667/com.mobilegovernment W/unknown:React: Inspector connection already open, nooping.\n09-27 21:22:15.646 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.art.ARTGroupViewManager\n09-27 21:22:15.646 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.art.ARTGroupShadowNode\n09-27 21:22:15.646 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.art.ARTShapeViewManager\n09-27 21:22:15.646 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.art.ARTShapeShadowNode\n09-27 21:22:15.647 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.art.ARTTextViewManager\n09-27 21:22:15.647 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.art.ARTTextShadowNode\n09-27 21:22:15.647 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.picker.ReactDialogPickerManager\n09-27 21:22:15.648 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.uimanager.LayoutShadowNode\n09-27 21:22:15.651 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.drawer.ReactDrawerLayoutManager\n09-27 21:22:15.652 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.picker.ReactDropdownPickerManager\n09-27 21:22:15.652 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.scroll.ReactHorizontalScrollViewManager\n09-27 21:22:15.655 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.progressbar.ReactProgressBarViewManager\n09-27 21:22:15.656 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.progressbar.ProgressBarShadowNode\n09-27 21:22:15.657 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.scroll.ReactScrollViewManager\n09-27 21:22:15.659 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.slider.ReactSliderManager\n09-27 21:22:15.659 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.slider.ReactSliderManager$ReactSliderShadowNode\n09-27 21:22:15.659 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.switchview.ReactSwitchManager\n09-27 21:22:15.660 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.switchview.ReactSwitchManager$ReactSwitchShadowNode\n09-27 21:22:15.660 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.toolbar.ReactToolbarManager\n09-27 21:22:15.661 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.webview.ReactWebViewManager\n09-27 21:22:15.662 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.swiperefresh.SwipeRefreshLayoutManager\n09-27 21:22:15.663 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.art.ARTSurfaceViewManager\n09-27 21:22:15.663 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.art.ARTSurfaceViewShadowNode\n09-27 21:22:15.663 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.text.frescosupport.FrescoBasedReactTextInlineImageViewManager\n09-27 21:22:15.663 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.text.frescosupport.FrescoBasedReactTextInlineImageShadowNode\n09-27 21:22:15.664 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.image.ReactImageManager\n09-27 21:22:15.668 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.modal.ReactModalHostManager\n09-27 21:22:15.668 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.modal.ModalHostShadowNode\n09-27 21:22:15.668 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.text.ReactRawTextManager\n09-27 21:22:15.669 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.text.ReactTextShadowNode\n09-27 21:22:15.670 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.textinput.ReactTextInputManager\n09-27 21:22:15.672 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.textinput.ReactTextInputShadowNode\n09-27 21:22:15.672 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.text.ReactTextViewManager\n09-27 21:22:15.672 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.view.ReactViewManager\n09-27 21:22:15.673 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.viewpager.ReactViewPagerManager\n09-27 21:22:15.673 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.text.ReactVirtualTextViewManager\n09-27 21:22:15.673 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.github.alinz.reactnativewebviewbridge.WebViewBridgeManager\n09-27 21:22:15.674 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class org.wonday.pdf.RCTPdfManager\n09-27 21:22:15.675 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.airbnb.android.react.lottie.LottieAnimationViewManager\n09-27 21:22:15.677 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.cmcewen.blurview.BlurViewManager\n09-27 21:22:15.679 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.react_native_signature.RCTSignatureManager\n09-27 21:22:15.680 2667-11580/com.mobilegovernment D/React:  View manager getCommandsMap:\n09-27 21:22:15.680 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.rssignaturecapture.RSSignatureCaptureViewManager\n09-27 21:22:15.681 2667-11580/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.lwansbrough.RCTCamera.RCTCameraViewManager\n09-27 21:22:16.155 2667-2667/com.mobilegovernment I/Choreographer: Skipped 30 frames!  The application may be doing too much work on its main thread.\n09-27 21:22:16.155 2667-2667/com.mobilegovernment W/unknown:React: Packager connection already open, nooping.\n09-27 21:22:16.155 2667-2667/com.mobilegovernment W/unknown:React: Inspector connection already open, nooping.\n09-27 21:22:16.329 2667-11585/com.mobilegovernment E/BluetoothAdapter: Bluetooth binder is null\n09-27 21:22:16.458 2667-2892/com.mobilegovernment I/art: Alloc sticky concurrent mark sweep GC freed 48826(2MB) AllocSpace objects, 5(80KB) LOS objects, 3% free, 92MB/96MB, paused 35.623ms total 56.250ms\n09-27 21:22:16.526 2667-2892/com.mobilegovernment I/art: Clamp target GC heap from 108MB to 96MB\n09-27 21:22:16.543 2667-2892/com.mobilegovernment I/art: Alloc partial concurrent mark sweep GC freed 9213(453KB) AllocSpace objects, 1(36KB) LOS objects, 3% free, 92MB/96MB, paused 5.108ms total 59.808ms\n09-27 21:22:16.608 2667-2677/com.mobilegovernment W/art: Suspending all threads took: 8.799ms\n09-27 21:22:16.610 2667-2892/com.mobilegovernment I/art: Clamp target GC heap from 108MB to 96MB\n09-27 21:22:16.611 2667-2892/com.mobilegovernment I/art: Alloc concurrent mark sweep GC freed 2859(132KB) AllocSpace objects, 0(0B) LOS objects, 3% free, 92MB/96MB, paused 1.636ms total 44.375ms\n09-27 21:22:16.613 2667-2892/com.mobilegovernment I/art: Forcing collection of SoftReferences for 10MB allocation\n09-27 21:22:16.640 2667-2892/com.mobilegovernment I/art: Clamp target GC heap from 108MB to 96MB\n09-27 21:22:16.640 2667-2892/com.mobilegovernment I/art: Alloc concurrent mark sweep GC freed 1815(91KB) AllocSpace objects, 0(0B) LOS objects, 4% free, 92MB/96MB, paused 690us total 26.874ms\n09-27 21:22:16.644 2667-2892/com.mobilegovernment E/art: Throwing OutOfMemoryError \"Failed to allocate a 10969356 byte allocation with 4037260 free bytes and 3MB until OOM\"\n09-27 21:22:16.663 2667-2892/com.mobilegovernment I/art: Clamp target GC heap from 106MB to 96MB\n09-27 21:22:16.663 2667-2892/com.mobilegovernment I/art: Alloc partial concurrent mark sweep GC freed 30446(1880KB) AllocSpace objects, 0(0B) LOS objects, 5% free, 90MB/96MB, paused 718us total 14.120ms\n09-27 21:22:16.679 2667-2892/com.mobilegovernment I/art: Clamp target GC heap from 106MB to 96MB\n09-27 21:22:16.679 2667-2892/com.mobilegovernment I/art: Alloc concurrent mark sweep GC freed 6(176B) AllocSpace objects, 0(0B) LOS objects, 5% free, 90MB/96MB, paused 780us total 14.543ms\n09-27 21:22:16.681 2667-2892/com.mobilegovernment I/art: Forcing collection of SoftReferences for 10MB allocation\n09-27 21:22:16.718 2667-2892/com.mobilegovernment I/art: Clamp target GC heap from 106MB to 96MB\n09-27 21:22:16.718 2667-2892/com.mobilegovernment I/art: Alloc concurrent mark sweep GC freed 6(112B) AllocSpace objects, 0(0B) LOS objects, 5% free, 90MB/96MB, paused 921us total 36.224ms\n09-27 21:22:16.733 2667-2892/com.mobilegovernment E/art: Throwing OutOfMemoryError \"Failed to allocate a 10969356 byte allocation with 5963028 free bytes and 5MB until OOM\"\n                                                     --------- beginning of crash\n\n09-27 21:22:17.068 2667-2892/com.mobilegovernment E/AndroidRuntime: FATAL EXCEPTION: Thread-338\n        Process: com.mobilegovernment, PID: 2667\n        java.lang.OutOfMemoryError: Failed to allocate a 10969356 byte allocation with 5963028 free bytes and 5MB until OOM\n        at dalvik.system.VMRuntime.newNonMovableArray(Native Method)\n        at android.graphics.Bitmap.nativeCreate(Native Method)\n        at android.graphics.Bitmap.createBitmap(Bitmap.java:812)\n        at android.graphics.Bitmap.createBitmap(Bitmap.java:789)\n        at android.graphics.Bitmap.createBitmap(Bitmap.java:756)\n        at com.facebook.imagepipeline.memory.BitmapPool.alloc(BitmapPool.java:55)\n        at com.facebook.imagepipeline.memory.BitmapPool.alloc(BitmapPool.java:30)\n        at com.facebook.imagepipeline.memory.BasePool.get(BasePool.java:259)\n        at com.facebook.imagepipeline.platform.ArtDecoder.decodeStaticImageFromStream(ArtDecoder.java:137)\n        at com.facebook.imagepipeline.platform.ArtDecoder.decodeFromEncodedImage(ArtDecoder.java:81)\n        at com.facebook.imagepipeline.decoder.DefaultImageDecoder.decodeStaticImage(DefaultImageDecoder.java:158)\n        at com.facebook.imagepipeline.decoder.DefaultImageDecoder$1.decode(DefaultImageDecoder.java:71)\n        at com.facebook.imagepipeline.decoder.DefaultImageDecoder.decode(DefaultImageDecoder.java:123)\n        at com.facebook.imagepipeline.producers.DecodeProducer$ProgressiveDecoder.doDecode(DecodeProducer.java:239)\n        at com.facebook.imagepipeline.producers.DecodeProducer$ProgressiveDecoder.access$200(DecodeProducer.java:111)\n        at com.facebook.imagepipeline.producers.DecodeProducer$ProgressiveDecoder$1.run(DecodeProducer.java:144)\n        at com.facebook.imagepipeline.producers.JobScheduler.doJob(JobScheduler.java:207)\n        at com.facebook.imagepipeline.producers.JobScheduler.access$000(JobScheduler.java:27)\n        at com.facebook.imagepipeline.producers.JobScheduler$1.run(JobScheduler.java:78)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)\n        at com.facebook.imagepipeline.core.PriorityThreadFactory$1.run(PriorityThreadFactory.java:43)\n        at java.lang.Thread.run(Thread.java:818)\n09-27 21:22:17.106 2667-11616/com.mobilegovernment W/unknown:ReconnectingWebSocket: Couldn't connect to \"ws://0/message?device=Samsung%20Galaxy%20S6%20-%205.1.0%20-%20API%2022%20-%201440x2560&app=com.mobilegovernment&clientid=DevSupportManagerImpl\", will silently retry\n09-27 21:22:17.110 2667-11617/com.mobilegovernment W/unknown:InspectorPackagerConnection: Couldn't connect to packager, will silently retry\n09-27 21:22:18.512 2667-11586/com.mobilegovernment W/unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.text.ReactVirtualTextShadowNode\n09-27 21:22:19.119 2667-2682/com.mobilegovernment W/art: Suspending all threads took: 9.534ms\n09-27 21:22:19.138 2667-2677/com.mobilegovernment W/art: Suspending all threads took: 15.702ms\n09-27 21:22:19.153 2667-2682/com.mobilegovernment I/art: Background sticky concurrent mark sweep GC freed 37466(1506KB) AllocSpace objects, 12(192KB) LOS objects, 1% free, 94MB/96MB, paused 10.660ms total 53.115ms\n09-27 21:22:20.055 2667-2682/com.mobilegovernment I/art: Clamp target GC heap from 107MB to 96MB\n```. @max-mironov  No errors have been encountered since refactoring. Thank you for your help. @akki-ng @max-mironov I try to build a new demo, cannot trigger the hook function. ",
    "brookemitchell": "Thanks @sergey-akhalkov your solution of editing build locations for project and pods worked for me. \nNow I wonder how to make those changes in ci \ud83d\ude22 . Yeah no luck changing the project settings on appcenter.ms if I setup a staging scheme.\nNot really your problem though, thanks for your help.. ",
    "rodperottoni": "Hi @jinxac, I'm trying to fix this bug on my app and can't seem to make it work. I'm using CocoaPods and my XCode workspace looks exactly like the demo, but whenever I build my project my files end up scattered across both Staging/Production build folders. I'm now trying to use the schemes-manager module like you said but still am having the same issues. Keen to hear how you got this to work with CocoaPods.\nThanks.. ",
    "janicduplessis": "@sergey-akhalkov Could this be merged soon? 0.47.0-rc is now released and this is needed for it to work.. ",
    "patw0929": "RN 0.47.0 was released today, please merge this PR.\nThank you :)\n. ",
    "maxkomarychev": "@sergey-akhalkov which version of react-native-code-push should we install to have this patch included?. thanks! do you have any ETA/roadmap on when those new SDKs will be available?. ",
    "bigsassy": "Thanks, Max.  I looked at the link, but I don't actually see where it says having an update prompt is a no-no.  Did I just miss it?. Ok, thanks \ud83d\udc4d . ",
    "tizzyapunkt": "I had the same problem, \nfor me, adding the following snippet to codepushs build.gradle fixed it.\nallprojects {\n    repositories {\n        mavenLocal()\n        jcenter()\n        maven {\n            // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm\n            url \"$rootDir/../node_modules/react-native/android\"\n        }\n    }\n}. ",
    "D1no": "Sorry, I was on vacation \ud83d\ude07\n@max-mironov yes, we we build the app continuously in our CI. Based on ENV variables, the CI system also run the code-push command. My question is simply, if its possible to simply point code-push to the generated js file from the normal CI run. (main.js?)\nPS: I can not re-open this issue.. ",
    "pinqy520": "@sergey-akhalkov thanks for reply~! this issue is not the same with #795 , #795 is because that the param directoryPath of function deleteDirectoryAtPath is null, and in this issue it is because of the function copyDirectoryContents. i don't know why the param sourceDirectoryPath is null. i can open a pr that simply check if sourceDirectoryPath is null, but i don't think it can fixes this problem.\nthe command line i release new Code Push update is \ncode-push promote faceparty-android Staging Production\nand it works fine in a 'Staging' deployment APK. i think it is nothing to do with this issue.\nactually, i really don't know how to reproduce this, because i don't know how the Code Push works. i \njust generated a APK and give it to users. i release a code push update, then all users opened the app after that are crashed. i have to rollback this update, and regenerating a new APK fixed that.\n. ok...\n\n\nand thank you for your great work very much~! @sergey-akhalkov . thx~!. @sergey-akhalkov hi, i just upgrade to 3.0.0-beta, and it still crash even though i regenerate a new apk and in the 'Staging'. seems it is similar to issue #910 . @max-mironov .Hi, it returns null, i just commented here. @sergey-akhalkov  i performed codePush.getCurrentPackage() method, and it returns null before the app crashes.\ncode:\ntypescript\n(codePush as any).getCurrentPackage().then((r: any) => {\n    fetch('http://faceparty.la/tt=' + JSON.stringify(r)) // send log to server\n})\ncodePush.sync()\n\n. ",
    "rj12info": "****Got this crash after putting \ncodePush.getCurrentPackage()\nand manifest\n\nand package.json\n\"react-native-code-push\": \"^3.0.0-beta\",****\nat java.lang.Thread.run(Thread.java:818)\nE/AndroidRuntime(20157): Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'char[] java.lang.String.toCharArray()' on a null object reference\nE/AndroidRuntime(20157):    at java.io.File.fixSlashes(File.java:185)\nE/AndroidRuntime(20157):    at java.io.File.(File.java:134)\nE/AndroidRuntime(20157):    at com.microsoft.codepush.react.FileUtils.copyDirectoryContents(FileUtils.java:19)\nE/AndroidRuntime(20157):    at com.microsoft.codepush.react.CodePushUpdateUtils.copyNecessaryFilesFromCurrentPackage(CodePushUpdateUtils.java:71)\nE/AndroidRuntime(20157):    at com.microsoft.codepush.react.CodePushUpdateManager.downloadPackage(CodePushUpdateManager.java:226)\nE/AndroidRuntime(20157):    at com.microsoft.codepush.react.CodePushNativeModule$3.doInBackground(CodePushNativeModule.java:230)\nE/AndroidRuntime(20157):    at com.microsoft.codepush.react.CodePushNativeModule$3.doInBackground(CodePushNativeModule.java:224)\nE/AndroidRuntime(20157):    at android.os.AsyncTask$2.call(AsyncTask.java:292)\nE/AndroidRuntime(20157):    at java.util.concurrent.FutureTask.run(FutureTask.java:237)\nE/AndroidRuntime(20157):    ... 3 more\n. ",
    "dhruvp": "As a heads up this same app works fine with codepush in iOS. It seems something specific to how I'm configuring it or using it with Android.\nThank you again!. Closing this - turns out I just had to resync my gradle build and it then somehow worked :). ",
    "kala888": "@sergey-akhalkov \nThanks for your tips, but i my this issue not in debug model,  i used  the following code before\n$ ./gradlew aR installRelease. Oh, my fault, \nadd codePush to root component, it works fine now.\nFor DVA App\nhttps://github.com/Microsoft/react-native-code-push#plugin-usage\n\n. \n. ",
    "andrepcg": "I found that it doesn't happen everytime. I've had this happen two times in two different builds but cannot find a pattern. ",
    "youanswer": "Having the similar issue on Android 6.0.1 device.\n```\njava.lang.RuntimeException An error occurred while executing doInBackground() \n    AsyncTask.java:309 android.os.AsyncTask$3.done\n    FutureTask.java:354 java.util.concurrent.FutureTask.finishCompletion\n    FutureTask.java:223 java.util.concurrent.FutureTask.setException\n    FutureTask.java:242 java.util.concurrent.FutureTask.run\n    ThreadPoolExecutor.java:1113 java.util.concurrent.ThreadPoolExecutor.runWorker\n    ThreadPoolExecutor.java:588 java.util.concurrent.ThreadPoolExecutor$Worker.run\n    Thread.java:818 java.lang.Thread.run\nCaused: java.lang.NullPointerException Attempt to invoke virtual method 'char[] java.lang.String.toCharArray()' on a null object reference \n    File.java:183 java.io.File.fixSlashes\n    File.java:130 java.io.File.\n    FileUtils.java:19 com.microsoft.codepush.react.FileUtils.copyDirectoryContents\n    CodePushUpdateUtils.java:71 com.microsoft.codepush.react.CodePushUpdateUtils.copyNecessaryFilesFromCurrentPackage\n    CodePushUpdateManager.java:226 com.microsoft.codepush.react.CodePushUpdateManager.downloadPackage\n    CodePushNativeModule.java:230 com.microsoft.codepush.react.CodePushNativeModule$3.doInBackground\n    CodePushNativeModule.java:224 com.microsoft.codepush.react.CodePushNativeModule$3.doInBackground\n    AsyncTask.java:295 android.os.AsyncTask$2.call\n    FutureTask.java:237 java.util.concurrent.FutureTask.run\n    ThreadPoolExecutor.java:1113 java.util.concurrent.ThreadPoolExecutor.runWorker\n    ThreadPoolExecutor.java:588 java.util.concurrent.ThreadPoolExecutor$Worker.run\n    Thread.java:818 java.lang.Thread.run\n```. ",
    "capozzid": "@sergey-akhalkov I can confirm you that your solution with if (Platform.OS === \"ios\" && config.packageHash) {worked fine for me.. ",
    "bgoyal2222": "Is there any way to code-push changes on this version because this version is in market place and is crashing on sending update via code-push. Ya it seems like its solved in 2.1.1-beta but is there any way that we can make this change in the existing app which is on the playstore with code-push version 2.1.0-beta.. other than releasing new build..\nThanks @max-mironov for help. ",
    "harsinyee": "hi @sergey-akhalkov, i installed code push manually last time following the guides provided.. since the app crash.. i tried to reinstall code push via cocoa pods then it is working fine now.. @@ \nAnyway,Thanks for your help~~. ",
    "diennguyentien": "hi @sergey-akhalkov: thanks you for your support. ",
    "disharmonized": "@akaiz thanks for reaching us. Error is quite self-explanatory - you need to use semantic versioning for your target binary builds. Your app version number is 1.70 which doesn't fit semver scheme. Please refer to http://semver.org/ for additional information about semantic versioning.. got it. fixed. ",
    "akaiz": "Thanks, @disharmonized for your reply.. ",
    "christophmegusta": "i think this ticket is not yet completely done as this doc still shows the old paragraph\nhttps://github.com/Microsoft/cordova-plugin-code-push#plugin-usage\nmaybe only the react native project got the change yet?. ",
    "damathryx": "Opps. Wrong place. i should move this issue to react-native-config. @max-mironov  still happens after updating to 5.0.0beta. @max-mironov after upgrading to 5.1.1-beta it still happens when I pushed another mandatory update. @max-mironov\n1.) yes I am using different deployment keys.\n2.) yes, heres my deployment history. after mandatory I the app crashes and other updates doesnt work\n\n. ",
    "blairvanderhoof": "My question is actually when archive my app for App Store release, it doesn't generate any new\nBundle, I have to push the bundle to the user via code push. Is this normal? Can I regenerate the bundle on release build?\n\nOn Jul 20, 2017, at 12:26 AM, Sergey Akhalkov notifications@github.com wrote:\nHi @blairvanderhoof, thanks for reaching us. Please note, that you should not test CodePush updates in debug mode. From official docs:\nNOTE: CodePush updates should be tested in modes other than Debug mode. In Debug mode, React Native app always downloads JS bundle generated by packager, so JS bundle downloaded by CodePush does not apply.\nIn case you still want to test CodePush updates in debug mode, please make sure that react native packager has been disabled and that myappRoot/android/app/build.gradle contains the following code:\nproject.ext.react = [\n    bundleInDebug: true\n]\nThen you need to perform .\\gradlew assembleDebug or .\\gradlew assembleRelease command in\nmyappRoot/android folder.\nPlease let me know if you have any questions or see any issues.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub, or mute the thread.\n. \n",
    "el-lsan": "@murmurwoodz Did you manage to solve it ?\nI'm facing the same issue.. @sergey-akhalkov Thanks for your hint. \nAfter changing targetBinaryVersion of all old releases, it worked as I was expecting. . ",
    "Antoine-C": "Did you try to use the correct tag for your RN version ?\nv0.43-v0.44 | v2.0+\u00a0(RN refactored uimanager dependencies)\nI had the same problem and then I downgrade RNCodePush to the V2.1.1 tag and everything is working fine.. ",
    "pankaj-ag": "Yes. I just tried and its working fine now. Thanks. ",
    "iamhardik08": "Hello,\nI am using  :\nRN - ^0.45.1 \nRNCodePush - ^5.0.0-beta\nI am getting this error \nD:\\upstream\\procurewise_mobile\\hybrid\\Procurewise\\node_modules\\react-native-code-push\\android\\app\\src\\main\\java\\com\\microsoft\\codepush\\react\\CodePushNativeModule.java:14: error: cannot find symbol\nimport com.facebook.react.bridge.JSBundleLoader;\n                                ^\n  symbol:   class JSBundleLoader\n  location: package com.facebook.react.bridge\nD:\\upstream\\procurewise_mobile\\hybrid\\Procurewise\\node_modules\\react-native-code-push\\android\\app\\src\\main\\java\\com\\microsoft\\codepush\\react\\CodePush.java:21: error: CodePush is not abstract and does not override abstract method createJSModules() in ReactPackage\npublic class CodePush implements ReactPackage {\n       ^\nD:\\upstream\\procurewise_mobile\\hybrid\\Procurewise\\node_modules\\react-native-code-push\\android\\app\\src\\main\\java\\com\\microsoft\\codepush\\react\\CodePushNativeModule.java:103: error: cannot find symbol\n            JSBundleLoader latestJSBundleLoader;\n            ^\n  symbol:   class JSBundleLoader\n  location: class CodePushNativeModule\nD:\\upstream\\procurewise_mobile\\hybrid\\Procurewise\\node_modules\\react-native-code-push\\android\\app\\src\\main\\java\\com\\microsoft\\codepush\\react\\CodePushNativeModule.java:105: error: cannot find symbol\n                latestJSBundleLoader = JSBundleLoader.createAssetLoader(getReactApplicationContext(), latestJSBundleFile, false);\n                                       ^\n  symbol:   variable JSBundleLoader\n  location: class CodePushNativeModule\nD:\\upstream\\procurewise_mobile\\hybrid\\Procurewise\\node_modules\\react-native-code-push\\android\\app\\src\\main\\java\\com\\microsoft\\codepush\\react\\CodePushNativeModule.java:107: error: cannot find symbol\n                latestJSBundleLoader = JSBundleLoader.createFileLoader(latestJSBundleFile);\n                                       ^\n  symbol:   variable JSBundleLoader\n  location: class CodePushNativeModule\nNote: D:\\upstream\\procurewise_mobile\\hybrid\\Procurewise\\node_modules\\react-native-code-push\\android\\app\\src\\main\\java\\com\\microsoft\\codepush\\react\\CodePushNativeModule.java uses unchecked or unsafe operations.\nNote: Recompile with -Xlint:unchecked for details.\n5 errors\n:react-native-code-push:compileReleaseJavaWithJavac FAILED\nWhat shall I do to make it work properly?\nWhat should be the exact react-native and react-native-code-push version to use for stable build.\n. ",
    "flyjennyetn": "@sergey-akhalkov   I according to this step\n https://github.com/Microsoft/react-native-code-push/blob/master/docs/setup-ios.md\nhttps://github.com/Microsoft/react-native-code-push/blob/master/README.md#multi-deployment-testing. @sergey-akhalkov  https://github.com/flyjennyetn/test/tree/master/codePushTest. @sergey-akhalkov  I'm sorry  \uff0c I uploaded the wrong project  \uff0cNow has been updated. @wuyunqiang   \u8fd8\u6ca1\u6709\u89e3\u51b3 \uff0cios\u90fd\u8986\u76d6\u4e0d\u4e86. ",
    "zhangyi5628": "@wuyunqiang  \u4f60\u4eec\u95ee\u9898\u6709\u89e3\u51b3\u5417\uff1f\u6211\u7684\u9879\u76ee\u4e5f\u662f\u5b89\u5353\u6210\u529f\uff0ciOS\u7b2c\u4e00\u4e2a\u70ed\u66f4\u65b0\u6210\u529f\uff0c\u540e\u8fb9\u7684\u90fd\u4f1a\u5931\u8d25\uff0c\u6211\u770bdownload\u8bf7\u6c42\u6210\u529f\u4e86. ",
    "danielbm": "Hi @max-mironov ! I followed your steps, and everything worked fine. I will try to think what I did differently on my code on the first time. Maybe something related to the order that I installed code-push versions (I installed version 4.0.0, called react native link, then installed 2.1.1, and finally 3.0.0).\nI will close the issue for now, and re-open if I am able to recreate the steps to reproduce.. ",
    "BalaKrishnaJ27": "@max-mironov  Thanks for the info. ",
    "wjm117": "@max-mironov After a few days of testing, I would like to show that this problem is not the reason for the plug-in. Thank you very much. Thank you for your answer @max-mironov \nit happened like this\uff1ahe run code-push collaborator add  to add my code-push to app,and then i run: code-push app ls,but nothing in list \n,so he suggest me to do step 2;\nbefore he run add collaborator,are there any other operations needed?\nor he run add collaborator ,Will I receive tips?.  Thanks very much for your help, @sergey-akhalkov @max-mironov , the problem is solved.Yesterday I asked my colleagues to follow your steps\uff0cthen i check my mailbox \uff0cno invitation mailbox found,but the email  was received an hour later\u3002I  check my mailbox again when I see your answer,then i found invitation mail\u3002everything is ok now ,thanks very much again. ",
    "pre10der89": "@rozele I agree 100%.  I believe that the need for ReactApplication/ReactNativeHost is evident and hopefully, we can work on getting that implemented and getting the code push module updated.   I believe there is also another short-coming with the code-push \"reload\" bundle requirement that could require steps beyond the ReactApplication implementation.. ",
    "larryranches": "nvm. @jaysig Make sure your connected to the internet . ",
    "jaysig": "How did you manage to get this resolved because I am having a similar issue @larryranches . I think this is related to #935 ; however, I do not quite understand how to fix it.. Okay thanks for the clarification, that fixed my issue.. Maybe it is something within my project, because it creates it at /Release-iphoneos/CodePush/libCodePush.a. I will keep playing around with it though, thanks. ",
    "gHashTag": "updateDialog: false\n... and Ready for sale. ",
    "luizParreira": "I stumbled upon it this problem, what worked for me was:\nhttps://stackoverflow.com/a/47412852/4320404. ",
    "foggy1": "@max-mironov Aha! I'm assuming since we're on 2.0.1 beta that the issue is there. I'll verify that tomorrow and probably end up closing this. Thanks for the response!. @max-mironov Yup, we're all set. It was just the version. Thanks again!. ",
    "awnali": "@sergey-akhalkov @max-mironov so the issue was my build version wasn't matching with my last installed app on device. May be this is very childish mistake but as i'm very new to this world, so we can close it. Thank you so much for your prompt reply though!\nJust wrote an ReadMe on github, so that others won't spend that much time on simple integration.\nhttps://github.com/awnali/CodePush-ReactNative-SampleApp. ",
    "xiaoyongchen": "The use of this code resulted in a burst. AppState.addEventListener(\"change\", (newState) => {\n    newState === \"active\" && CodePush.sync({\n        installMode: CodePush.InstallMode.ON_NEXT_RESUME,\n        minimumBackgroundDuration: 1 * 1\n    });\n});\nCodePush.sync({installMode: CodePush.InstallMode.ON_NEXT_RESUME, minimumBackgroundDuration: 1 * 1});\n. only one crash\n. hi@max-mironov and thanks for your answer.This is the production environment, the platform is Andriod\u3002It's just a problem caused by the upgrade \uff0creact-native@0.43.3 ->react-native@0.46.4.. \nExecute the code\uff0cAppState.addEventListener(\"change\", (newState) => {\nnewState === \"active\" && CodePush.sync({\ninstallMode: CodePush.InstallMode.ON_NEXT_RESUME,\nminimumBackgroundDuration: 1 * 1\n});\n});\nCodePush.sync({installMode: CodePush.InstallMode.ON_NEXT_RESUME, minimumBackgroundDuration: 1 * 1});\n. \"Launch the app without plugin to verify that the issue is not related to it\",is working.. but ,The original project has not changed\u3002\n. @max-mironov  hi\uff0cNothing much has changed\u3002\nCrash diary\uff1a'No dimension set for key window','Module AppRegistry is not a registered callable module ( calling runApplication)'\n. \ngraphics.PorterDuffColorFilter, android.content.res.ColorStateList, android.graphics.PorterDuff$Mode) would have incorrectly overridden the package-private method in android.graphics.drawable.Drawable\n--\n108-11 11:13:27.169 14289 14289 I MultiDex: VM with version 2.1.0 has multidex support\n208-11 11:13:27.169 14289 14289 I MultiDex: install\n308-11 11:13:27.169 14289 14289 I MultiDex: VM has multidex support, MultiDex support library is disabled.\n408-11 11:13:27.179 14179 14179 D com.umeng.message.proguard.l: appLaunchAt=1502421181373\n508-11 11:13:27.219 14289 14319 V xiaomi : [Thread:3861] JOB: prepare the mi push account.\n608-11 11:13:27.229 14179 14312 E UClient : org.json.JSONException: Value ok of type java.lang.String cannot be converted to JSONObject: [Caught Exception in decryptData()]\n708-11 11:13:27.229 14179 14312 E UClient : at  org.json.JSON.typeMismatch(JSON.java:111)\n808-11 11:13:27.229 14179 14312 E UClient : at  org.json.JSONObject.(JSONObject.java:160)\n908-11 11:13:27.229 14179 14312 E UClient : at  org.json.JSONObject.(JSONObject.java:173)\n1008-11 11:13:27.229 14179 14312 E UClient : at com.umeng.socialize.net.utils.UClient.decryptData(UClient.java:477)\n1108-11 11:13:27.229 14179 14312 E UClient : at com.umeng.socialize.net.utils.UClient.parseResult(UClient.java:410)\n1208-11 11:13:27.229 14179 14312 E UClient : at com.umeng.socialize.net.utils.UClient.httpGetRequest(UClient.java:213)\n1308-11 11:13:27.229 14179 14312 E UClient : at com.umeng.socialize.net.utils.UClient.execute(UClient.java:72)\n1408-11 11:13:27.229 14179 14312 E UClient : at com.umeng.socialize.net.base.SocializeClient.execute(SocializeClient.java:33)\n1508-11 11:13:27.229 14179 14312 E UClient : at com.umeng.socialize.net.stats.StatsAPIs.dauStats(StatsAPIs.java:124)\n1608-11 11:13:27.229 14179 14312 E UClient : at com.umeng.socialize.net.analytics.SocialAnalytics$8.run(SocialAnalytics.java:238)\n1708-11 11:13:27.229 14179 14312 E UClient : at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422)\n1808-11 11:13:27.229 14179 14312 E UClient : at java.util.concurrent.FutureTask.run(FutureTask.java:237)\n1908-11 11:13:27.229 14179 14312 E UClient : at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)\n2008-11 11:13:27.229 14179 14312 E UClient : at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)\n2108-11 11:13:27.229 14179 14312 E UClient : at java.lang.Thread.run(Thread.java:818)\n2208-11 11:13:27.229 14289 14289 V xiaomi : [Thread:1] XMPushService created pid = 14289\n2308-11 11:13:27.229 14289 14289 V xiaomi : [Thread:1] network changed, [type: WIFI[], state: CONNECTED/CONNECTED, reason: (unspecified), extra: \"zmlearn\", roaming: false, failover: false, isAvailable: true, isConnectedToProvisioningNetwork: false]\n2408-11 11:13:27.239 14289 14319 V xiaomi : [Thread:3861] JOB: do reconnect..\n2508-11 11:13:27.239 14289 14319 V xiaomi : [Thread:3861] update the connection status. disconnected -> connecting : ERROR_OK\n2608-11 11:13:27.249 14289 14319 V xiaomi : [Thread:3861] begin to connect to 203.100.92.12:5222\n2708-11 11:13:27.259 14179 14179 D PhoneWindow: DEBUG_SYSTEMUI:origin statusbar style\n2808-11 11:13:27.259 14179 14179 D PhoneWindow: DEBUG_SYSTEMUI:windowDrawsFlag set\n2908-11 11:13:27.259 14179 14179 D PhoneWindow: DEBUG_SYSTEMUI:IconColor=1\n3008-11 11:13:27.259 14179 14179 D PhoneWindow: DEBUG_SYSTEMUI:StatusBarColor final set ff757575\n3108-11 11:13:27.289 14179 14198 D [ui]AppForegroundWatcher: 1/app on foreground\n3208-11 11:13:27.289 14289 14319 V xiaomi : [Thread:3861] tcp connected\n3308-11 11:13:27.299 14289 14319 V xiaomi : [Thread:3861] load config failure: /data/data/com.zmlearn.course.am/files/XMCloudCfg: open failed: ENOENT (No such file or directory)\n3408-11 11:13:27.299 14289 14319 V xiaomi : [Thread:3861] [slim] open conn: andver=22 sdk=26 hash=N5hOnp4u_W2Rq0VI tz=8:0 Model=vivo X6S A os=eng.compiler.20170705.161444\n3508-11 11:13:27.299 14289 14319 V xiaomi : [Thread:3861] connected to 203.100.92.12:5222 in 45\n3608-11 11:13:27.299 14179 14227 I TDLog : onResume being called! pageName: login.WelcomeActivity, FromAPI: false\n3708-11 11:13:27.299 14179 14234 I TDLog : [Session] - Same session as before!\n3808-11 11:13:27.319 14179 14332 D SensorManager: open file /sys/networktype/networktype error\n3908-11 11:13:27.319 14179 14332 D SensorManager: isQQShake: package is = com.zmlearn.course.am\n4008-11 11:13:27.319 14179 14332 D Sensors : enableSensor handle 1 20000us 0us in\n4108-11 11:13:27.319 14179 14332 D Sensors : enableSensor handle 1 ont\n4208-11 11:13:27.319 14179 14179 I ViewRootImpl: CPU Rendering VSync enable = true\n4308-11 11:13:27.319 14179 14339 D OpenGLRenderer: Use EGL_SWAP_BEHAVIOR_PRESERVED: true\n4408-11 11:13:27.329 14179 14198 I [ui]main_conn: 1/onServiceConnected: binder#android.os.BinderProxy@3b831f8\n4508-11 11:13:27.329 14200 14220 I [push]remote: 3861/IPC duplex channel established\n4608-11 11:13:27.329 14179 14198 I [ui]aux_conn: 1/onServiceConnected: binder#android.os.BinderProxy@127706d1\n4708-11 11:13:27.329 14179 14198 I [ui]ui : 1/Push awake UI by Broadcast success, UI process run!\n4808-11 11:13:27.329 14179 14340 D com.umeng.message.UmengMessageCallbackHandlerService: processName=com.zmlearn.course.am\n4908-11 11:13:27.329 14179 14340 D com.umeng.message.UmengMessageCallbackHandlerService: enable(): register-->:AvJOt956fyWr9XA5FtMd2yI_EYNBq9FrjK79AThTaird,status:true\n5008-11 11:13:27.329 14179 14340 E PushProcess umeng push device_token:: com.zmlearn.course.am.application.ZMLearnCourseAmApplication$2::onSuccess@374>>>AvJOt956fyWr9XA5FtMd2yI_EYNBq9FrjK79AThTaird\n5108-11 11:13:27.339 14179 14198 I [ui]ui : 3853/set status from UNLOGIN to UNLOGIN\n5208-11 11:13:27.339 14179 14198 I [ui]InvocationMgr: 3853/on notify: Transaction: [id: 2, method: AuthServiceObserver/observeOnlineStatus]\n5308-11 11:13:27.339 14179 14198 I [ui]InvocationMgr: 3853/on notify: Transaction: [id: 3, method: AuthServiceObserver/observeOtherClients]\n5408-11 11:13:27.349 14289 14328 V xiaomi : [Thread:3869] setChallenge hash = 14b12023\n5508-11 11:13:27.349 14289 14328 V xiaomi : [Thread:3869] update the connection status. connecting -> connected : ERROR_OK\n5608-11 11:13:27.349 14179 14339 I Adreno : QUALCOMM build : 814500f, If3abccc389\n5708-11 11:13:27.349 14179 14339 I Adreno : Build Date : 03/15/17\n5808-11 11:13:27.349 14179 14339 I Adreno : OpenGL ES Shader Compiler Version: XE031.06.00.03\n5908-11 11:13:27.349 14179 14339 I Adreno : Local Branch :\n6008-11 11:13:27.349 14179 14339 I Adreno : Remote Branch : refs/tags/AU_LINUX_ANDROID_LA.BR.1.3.2.C2.05.01.01.199.103\n6108-11 11:13:27.349 14179 14339 I Adreno : Remote Branch : NONE\n6208-11 11:13:27.349 14179 14339 I Adreno : Reconstruct Branch : NOTHING\n6308-11 11:13:27.349 14179 14339 I OpenGLRenderer: Initialized EGL, version 1.4\n6408-11 11:13:27.349 14289 14319 V xiaomi : [Thread:3861] JOB: bind the client. 5\n6508-11 11:13:27.349 14289 14319 V xiaomi : [Thread:3861] update the client 5 status. unbind->binding unknown ERROR_OK null null\n6608-11 11:13:27.349 14289 14328 V xiaomi : [Thread:3869] [Slim] CONN: host = 4648\n6708-11 11:13:27.349 14289 14319 V xiaomi : [Thread:3861] [Slim]: bind id=7bnMD-1\n6808-11 11:13:27.349 14179 14179 V ResourcesManager: Skipping new config: curSeq=37, newSeq=37\n6908-11 11:13:27.359 14179 14339 D OpenGLRenderer: Enabling debug mode 0\n7008-11 11:13:27.359 14179 14345 I XiaoMiPushMsgReceiver: onCommandResult:command={register}, resultCode={0}, reason={null}, category={null}, commandArguments={[6Y69FJ538IGna9tEdSblE6XnRY4cY6miVk4V1Ri9UsA=]}\n7108-11 11:13:27.359 14179 14345 I XiaoMiPushMsgReceiver: onReceiveRegisterResult:command={register}, resultCode={0}, reason={null}, category={null}, commandArguments={[6Y69FJ538IGna9tEdSblE6XnRY4cY6miVk4V1Ri9UsA=]}\n7208-11 11:13:27.359 14179 14179 V ResourcesManager: Skipping new config: curSeq=37, newSeq=37\n7308-11 11:13:27.399 14179 14198 I [ui]NOS_LBS: 1/load cached nos upload server addresses from SP, ip count=1, default ip count=1\n7408-11 11:13:27.409 14289 14319 V xiaomi : [Thread:3861] SMACK: channel bind succeeded, chid=5\n7508-11 11:13:27.409 14289 14319 V xiaomi : [Thread:3861] update the client 5 status. binding->binded OPEN ERROR_OK null null\n7608-11 11:13:27.729 14179 14179 I Timeline: Timeline: Activity_idle id: android.os.BinderProxy@1a00ede5 time:143461659\n7708-11 11:13:28.339 14179 14229 I TDLog : Data submitting Succeed!\n7808-11 11:13:31.349 14179 14179 I Timeline: Timeline: Activity_launch_request id:com.zmlearn.course.am time:143465279\n7908-11 11:13:31.379 14179 14227 I TDLog : onPause being called! pageName: login.WelcomeActivity\n8008-11 11:13:31.389 14179 14179 V ActivityThread: Handle configuration changed: {1.0 ?mcc?mnc zh_CN ?layoutDir sw360dp w360dp h616dp 480dpi nrml long port finger -keyb/v/h -nav/h s.37 themeId=0, affectGlobal:true}\n8108-11 11:13:31.389 14179 14179 V ResourcesManager: Skipping new config: curSeq=37, newSeq=37\n8208-11 11:13:31.389 14179 14179 V ActivityThread: Launching activity com.zmlearn.course.am.framework.FrameActivity with config {1.0 ?mcc?mnc zh_CN ?layoutDir sw360dp w360dp h616dp 480dpi nrml long port finger -keyb/v/h -nav/h s.37 themeId=0, affectGlobal:true}\n8308-11 11:13:31.409 14179 14179 D com.umeng.message.proguard.l: appLaunchAt=1502421181373\n8408-11 11:13:31.439 14179 14179 D PhoneWindow: DEBUG_SYSTEMUI:origin statusbar style\n8508-11 11:13:31.439 14179 14179 D PhoneWindow: DEBUG_SYSTEMUI:windowDrawsFlag set\n8608-11 11:13:31.439 14179 14179 D PhoneWindow: DEBUG_SYSTEMUI:IconColor=1\n8708-11 11:13:31.439 14179 14179 D PhoneWindow: DEBUG_SYSTEMUI:StatusBarColor final set ff757575\n8808-11 11:13:31.439 14179 14179 E FrameActivity: com.zmlearn.course.am.framework.FrameActivity::onCreate@173>>>umeng push device_token:AvJOt956fyWr9XA5FtMd2yI_EYNBq9FrjK79AThTaird\n8908-11 11:13:31.459 14179 14179 D ReactNative: [CodePush] Loading JS bundle from \"/data/data/com.zmlearn.course.am/files/CodePush/0922746b93cd127042ea27c08146ee7d911b9b7fe873e413858ad2fab958e6b8/CodePush/index.android.bundle\"\n9008-11 11:13:31.459 14179 14179 D ReactNative: [CodePush] Loading JS bundle from \"/data/data/com.zmlearn.course.am/files/CodePush/0922746b93cd127042ea27c08146ee7d911b9b7fe873e413858ad2fab958e6b8/CodePush/index.android.bundle\"\n9108-11 11:13:31.589 14179 14179 D PhoneWindow: DEBUG_SYSTEMUI:origin statusbar style\n9208-11 11:13:31.589 14179 14179 D PhoneWindow: DEBUG_SYSTEMUI:IconColor=1\n9308-11 11:13:31.589 14179 14179 D PhoneWindow: DEBUG_SYSTEMUI:StatusBarColor final set ff757575\n9408-11 11:13:31.599 14179 14179 I ViewRootImpl: CPU Rendering VSync enable = true\n9508-11 11:13:31.679 14179 14227 I TDLog : onResume being called! pageName: framework.FrameActivity, FromAPI: false\n9608-11 11:13:31.699 14179 14234 I TDLog : [Session] - Same session as before!\n9708-11 11:13:31.709 14179 14179 I ViewRootImpl: CPU Rendering VSync enable = true\n9808-11 11:13:31.739 14179 14179 V ResourcesManager: Skipping new config: curSeq=37, newSeq=37\n9908-11 11:13:31.759 14179 14179 V ResourcesManager: Skipping new config: curSeq=37, newSeq=37\n10008-11 11:13:31.769 14179 14179 E TEST : onPageSelected\n10108-11 11:13:31.889 14179 14179 V ResourcesManager: Skipping new config: curSeq=37, newSeq=37\n10208-11 11:13:31.919 14179 14179 E TEST : onPageSelected\n10308-11 11:13:31.949 14179 14179 I Timeline: Timeline: Activity_idle id: android.os.BinderProxy@1fede475 time:143465871\n10408-11 11:13:33.229 14179 14179 I Timeline: Timeline: Activity_launch_request id:com.zmlearn.course.am time:143467155\n10508-11 11:13:33.249 14179 14227 I TDLog : onEvent being called! eventId: 1_lunbo1gengduo, eventLabel: , eventMap: mapSize: 1\n10608-11 11:13:33.259 14179 14227 I TDLog : onPause being called! pageName: framework.FrameActivity\n10708-11 11:13:33.279 14179 14179 V ActivityThread: Handle configuration changed: {1.0 ?mcc?mnc zh_CN ?layoutDir sw360dp w360dp h616dp 480dpi nrml long port finger -keyb/v/h -nav/h s.37 themeId=0, affectGlobal:true}\n10808-11 11:13:33.279 14179 14179 V ResourcesManager: Skipping new config: curSeq=37, newSeq=37\n10908-11 11:13:33.279 14179 14179 V ActivityThread: Launching activity com.zmlearn.course.am.react.view.ReactViewContainActivity with config {1.0 ?mcc?mnc zh_CN ?layoutDir sw360dp w360dp h616dp 480dpi nrml long port finger -keyb/v/h -nav/h s.37 themeId=0, affectGlobal:true}\n11008-11 11:13:33.299 14179 14179 I art : Thread[1,tid=14179,WaitingForJniOnLoad,Thread*=0xab677160,peer=0x74c18e40,\"main\"] recursive attempt to load library \"/data/app/com.zmlearn.course.am-1/lib/arm/libfb.so\"\n11108-11 11:13:33.309 14179 14179 D PhoneWindow: DEBUG_SYSTEMUI:origin statusbar style\n11208-11 11:13:33.309 14179 14179 D PhoneWindow: DEBUG_SYSTEMUI:windowDrawsFlag set\n11308-11 11:13:33.309 14179 14179 D PhoneWindow: DEBUG_SYSTEMUI:IconColor=1\n11408-11 11:13:33.309 14179 14179 D PhoneWindow: DEBUG_SYSTEMUI:StatusBarColor final set ff757575\n11508-11 11:13:33.319 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.art.ARTGroupViewManager\n11608-11 11:13:33.319 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.art.ARTGroupShadowNode\n11708-11 11:13:33.319 14179 14227 I TDLog : onResume being called! pageName: react.view.ReactViewContainActivity, FromAPI: false\n11808-11 11:13:33.319 14179 14179 I ViewRootImpl: CPU Rendering VSync enable = true\n11908-11 11:13:33.319 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.art.ARTShapeViewManager\n12008-11 11:13:33.329 14179 14234 I TDLog : [Session] - Same session as before!\n12108-11 11:13:33.329 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.art.ARTShapeShadowNode\n12208-11 11:13:33.329 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.art.ARTTextViewManager\n12308-11 11:13:33.329 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.art.ARTTextShadowNode\n12408-11 11:13:33.329 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.picker.ReactDialogPickerManager\n12508-11 11:13:33.329 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.uimanager.LayoutShadowNode\n12608-11 11:13:33.339 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.drawer.ReactDrawerLayoutManager\n12708-11 11:13:33.339 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.picker.ReactDropdownPickerManager\n12808-11 11:13:33.339 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.scroll.ReactHorizontalScrollViewManager\n12908-11 11:13:33.349 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.progressbar.ReactProgressBarViewManager\n13008-11 11:13:33.349 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.progressbar.ProgressBarShadowNode\n13108-11 11:13:33.349 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.scroll.ReactScrollViewManager\n13208-11 11:13:33.349 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.slider.ReactSliderManager\n13308-11 11:13:33.349 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.slider.ReactSliderManager$ReactSliderShadowNode\n13408-11 11:13:33.349 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.switchview.ReactSwitchManager\n13508-11 11:13:33.359 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.switchview.ReactSwitchManager$ReactSwitchShadowNode\n13608-11 11:13:33.359 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.toolbar.ReactToolbarManager\n13708-11 11:13:33.359 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.webview.ReactWebViewManager\n13808-11 11:13:33.359 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.swiperefresh.SwipeRefreshLayoutManager\n13908-11 11:13:33.359 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.art.ARTSurfaceViewManager\n14008-11 11:13:33.359 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.art.ARTSurfaceViewShadowNode\n14108-11 11:13:33.359 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.text.frescosupport.FrescoBasedReactTextInlineImageViewManager\n14208-11 11:13:33.359 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.text.frescosupport.FrescoBasedReactTextInlineImageShadowNode\n14308-11 11:13:33.359 14179 14179 V ResourcesManager: Skipping new config: curSeq=37, newSeq=37\n14408-11 11:13:33.369 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.image.ReactImageManager\n14508-11 11:13:33.369 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.modal.ReactModalHostManager\n14608-11 11:13:33.369 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.modal.ModalHostShadowNode\n14708-11 11:13:33.369 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.text.ReactRawTextManager\n14808-11 11:13:33.369 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.text.ReactTextShadowNode\n14908-11 11:13:33.369 14179 14179 V ResourcesManager: Skipping new config: curSeq=37, newSeq=37\n15008-11 11:13:33.379 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.textinput.ReactTextInputManager\n15108-11 11:13:33.379 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.textinput.ReactTextInputShadowNode\n15208-11 11:13:33.379 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.text.ReactTextViewManager\n15308-11 11:13:33.379 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.view.ReactViewManager\n15408-11 11:13:33.379 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.viewpager.ReactViewPagerManager\n15508-11 11:13:33.379 14179 14384 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.text.ReactVirtualTextViewManager\n15608-11 11:13:33.399 14179 14339 D OpenGLRenderer: endAllStagingAnimators on 0xabc62818 (RippleDrawable) with handle 0xabc4d830\n15708-11 11:13:33.409 14179 14179 I Timeline: Timeline: Activity_idle id: android.os.BinderProxy@264c6418 time:143467332\n15808-11 11:13:33.629 14179 14386 E ReactNativeJS: No dimension set for key window\n15908-11 11:13:33.639 14179 14386 E ReactNativeJS: Module AppRegistry is not a registered callable module (calling runApplication)\n. @max-mironov  \uff0cWhat's your e-mail address?\nSend you an e-mail\n. @max-mironov  Please check the mail\n. @max-mironov  There will still be a burst in the release environment\n. @max-mironov  hi\uff0c'No dimension set for key window','Module AppRegistry is not a registered callable module ( calling runApplication)'\nWhat causes this problem?. Kill the process, try several times. There will be a run down problem\n.  Needs to be done in the production environment. You need to kill in the production environment, kill the service, restart the project, and click the button several times\n. @max-mironov  Did you find the reason?\n. Hi\uff0c@max-mironov.\nThank you for answering my question.\nIn the production environment. Do as you say, the project is a success. But after I kill the program, repeat the steps above. The question that I speak shows. The program broke down. @sospedra  Can you work on your project?\nIs there a solution to this problem?\n. @carloscuesta  are you sure?. Can solve the problem\uff0cWhen I reinstall the codepush\n. ",
    "carloscuesta": "Hey @xiaoyongchen, a clean reinstall of react-native-code-push fixed the issue.\nThe steps we've followed: \n\nUnlink react-native-code-push making sure every native part of the code has been removed, on iOS and Android.\nInstall and link again CodePush.\n\nWe're using react-native@0.47.2 . I released an update of an app that uses CodePush last week and had no problems \ud83e\udd14. It could be sorted out easily, but I think the link functionality should handle this.\nbash\n$ echo | react-native link. Thanks @alexandergoncharov, taking a quick look at the code I think that's because \nAt the android/postlink.js script you're not checking if the codePushDeploymentKey is already provided or not.\nhttps://github.com/Microsoft/react-native-code-push/blob/aa3ae8e8e997891edb97a70587df6d0748da937f/scripts/postlink/android/postlink.js#L1-L95\nThen it's always asking for it. ",
    "mdanics": "If i've got a number of apps that have the same core, but have a few different files, like css - It would be good to be able to do a single code push to all of them, updating the core but ignoring the custom css files. \nThis is would be my use, there may be others who would need this feature too. ",
    "filiphosko": "@max-mironov My use case is that in my app I use values replaced from env variables. I have them set in Appcenter build config (using different build variants) and I replace the contents of one .js file with the values from these env vars during build time (different values for staging, production, ...). But after I do a codepush release, these values are overwritten (by the values I use for dev). I know that I could just write these env variables to a \"native\" file and then read it from RN, but that would require me to include a lib that could read files from disk - I don't want to do that. Or I could just create a new file during build time that won't be in the codepush release (since it wouldn't exist locally) and I guess it wouldn't just delete it(?). But these are only solutions because I need to get around something. In my opinion there should definitely be a possibility to have a .codepushignore file where you can exclude files from a codepush release, it just seems obvious.. @jdnichollsc You can try looking at this https://github.com/Microsoft/react-native-code-push/issues/426. ",
    "kirlen": "One potential solution my team is contemplating: Whenever we create a native/app-store release, e.g. 1.5.0, we'll simultaneously create a \"codepush-test-target\" release that is identical except for a version bump (e.g. 1.5.1), which we'll only ever push to TestFlight. We'll use that to test all CodePush releases that are meant to target 1.5.0 -- by creating those releases with a target binary version set initially to 1.5.1. When verified successful/approved in the TestFlight-only release we'll drop the target binary version to 1.5.0 to allow apps in the wild to begin receiving the update. Any thoughts on this approach, @sergey-akhalkov or others? Curious to know what you wound up doing, too.. @msadura we wound up simplifying the idea a bit further:\n\neach time you release a new native build (i.e. not a CodePush) to the app store (e.g. xyzApp v1.5.0), release a companion CodePush \"staging test\" build (e.g. xyzApp-cp-test v1.5.0) to TestFlight (or restricted Google Play distribution) that is identical to the app store build other than pointing to your Staging CodePush deployment key.\nnow, for as long as your CodePush'es target a given binary version (xyzApp v1.5.0) you can use the corresponding CodePush test build (xyzApp-cp-test v1.5.0) to test them before you promote from Staging to Production.\n\nThis has been working well!. ",
    "msadura": "@kirlen does that solution work for you as expected? I am about to do the same, but I am wondering iff there is a better approach. ",
    "shyaniv7": "@jaysig were you able to resolve this issue? We are seeing the same exact problem where it would randomly fail in the fastlane build app command. @sergey-akhalkov After playing with it a bit more i realized that my workaround only goes through a partial link, the .xcodeproj file was not moved from node_modules and the CodePush.h file was not linked which resulted in errors and forced me to go through a manual link which worked.\nI will attempt to fix the post link script and make a contribution.. Unfortunately I was not able to fix the post link script, The nested promises were over my head.\nFor now I suggest defaulting to the manual link. ",
    "lyahdav": "Found out the issue: the project had no assets used anywhere. When I added a React Native Image component that referenced a local .png file, and then sent an update via CodePush it worked correctly.\nWould be nice if CodePush handled this edgecase though.. ",
    "Kariko": "@max-mironov \n \"react-native\": \"0.46.0\",\n\"react-native-code-push\": \"^5.0.0-beta\",. @max-mironov\noh...thanks!I didn't pay attention to it ... . ",
    "lucianomlima": "I'm having the same issue with\nReact Native: 0.45.1\nReact Native Code Push: 5.0.0-beta\nMy Android app extends MultiDexApplication too but I put @Override for getJSBundleFile in MainApplication.java.\nMy error log below\n```\n/Users/luciano/apps/Luvbook/luvbook-app/node_modules/react-native-code-push/android/app/src/main/java/com/microsoft/codepush/react/CodePushNativeModule.java:14: error: cannot find symbol\nimport com.facebook.react.bridge.JSBundleLoader;\n                                ^\n  symbol:   class JSBundleLoader\n  location: package com.facebook.react.bridge\n/Users/luciano/apps/Luvbook/luvbook-app/node_modules/react-native-code-push/android/app/src/main/java/com/microsoft/codepush/react/CodePush.java:21: error: CodePush is not abstract and does not override abstract method createJSModules() in ReactPackage\npublic class CodePush implements ReactPackage {\n       ^\n/Users/luciano/apps/Luvbook/luvbook-app/node_modules/react-native-code-push/android/app/src/main/java/com/microsoft/codepush/react/CodePushNativeModule.java:103: error: cannot find symbol\n            JSBundleLoader latestJSBundleLoader;\n            ^\n  symbol:   class JSBundleLoader\n  location: class CodePushNativeModule\n/Users/luciano/apps/Luvbook/luvbook-app/node_modules/react-native-code-push/android/app/src/main/java/com/microsoft/codepush/react/CodePushNativeModule.java:105: error: cannot find symbol\n                latestJSBundleLoader = JSBundleLoader.createAssetLoader(getReactApplicationContext(), latestJSBundleFile, false);\n                                       ^\n  symbol:   variable JSBundleLoader\n  location: class CodePushNativeModule\n/Users/luciano/apps/Luvbook/luvbook-app/node_modules/react-native-code-push/android/app/src/main/java/com/microsoft/codepush/react/CodePushNativeModule.java:107: error: cannot find symbol\n                latestJSBundleLoader = JSBundleLoader.createFileLoader(latestJSBundleFile);\n                                       ^\n  symbol:   variable JSBundleLoader\n  location: class CodePushNativeModule\nNote: /Users/luciano/apps/Luvbook/luvbook-app/node_modules/react-native-code-push/android/app/src/main/java/com/microsoft/codepush/react/CodePushNativeModule.java uses unchecked or unsafe operations.\nNote: Recompile with -Xlint:unchecked for details.\n5 errors\n:react-native-code-push:compileReleaseJavaWithJavac FAILED\nFAILURE: Build failed with an exception.\n\n\nWhat went wrong:\nExecution failed for task ':react-native-code-push:compileReleaseJavaWithJavac'.\n\nCompilation failed; see the compiler error output for details.\n\n\n\nTry:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\n\nBUILD FAILED\nTotal time: 48.95 secs\nCould not install the app on the device, read the error above for details.\nMake sure you have an Android emulator running or a device connected and have\nset up your Android development environment:\nhttps://facebook.github.io/react-native/docs/android-setup.html\n``. For Android works! Thanks. But now on iOS (which build successfully with v5.0.0-beta) now fails with errorconfig.h file not found`\nLexical or Preprocessor Issue Group\n/Users/luciano/apps/Luvbook/luvbook-app/node_modules/react-native/third-party/glog-0.3.4/src/base/mutex.h:105:10: 'config.h' file not found\n/Users/luciano/apps/Luvbook/luvbook-app/node_modules/react-native/third-party/glog-0.3.4/src/signalhandler.cc:34:10: In file included from /Users/luciano/apps/Luvbook/luvbook-app/node_modules/react-native/third-party/glog-0.3.4/src/signalhandler.cc:34:\n/Users/luciano/apps/Luvbook/luvbook-app/node_modules/react-native/third-party/glog-0.3.4/src/utilities.h:73:10: In file included from /Users/luciano/apps/Luvbook/luvbook-app/node_modules/react-native/React/../third-party/glog-0.3.4/src/utilities.h:73:\nBuild error after downgrade to v3.0.1-beta. It's really weird. My app didn't have React Native update. Only CodePush downgrade. I'll see this issue. Thanks.. Thanks @max-mironov, after Xcode Clean, close Xcode, delete node_modules, yarn cache clean, yarn install, yarn start and open Xcode, build and run successfully.. @max-mironov Yes, i'm extending from MultiDexApplication and after downgrade to v3.0.1-beta works well.. @joshuapinter, I had to downgrade to v 3.0.1-beta, after that, remove node_modules, cache clean wires, install wires, in Xcode run a clean and finally  worked on both platforms.. @iTOYS Thanks, but this is a bit confuse.\nI open my app, then CodePush detects a new version and install it. Then I exit app with back button (Android) and open again... Instead of use downloaded version, still use previous version. It's needed to remove app from opened app list to finally use downloaded version.\nIn production this is totally unproductive for end users. If we do not explain that he needs to remove the application from the opened app list, he will never use the last downloaded version (except when it's a mandatory release).\nSo when the last downloaded version is finally applied, the user again needs to remove the application from the opened app list so that the isFirstRun is setted to false.\nI can not understand this.. Thanks.. ",
    "rushabhnagda11": "Hey @joshuapinter, I'm trying to do the exact same thing with my current android app and am going through a similar issue.\nIn my case, the codepush never detects that an android bundle is even present on the server. I have made my Application which extends MultiDexApplication implement ReactApplication and have overriden the methods in ReactNativeHost\nIn my ReactActivityClass, I'm using the builder pattern to create an instance of mReactInstanceManager where CodePush has been added as a package and the setJSBundleFile has also been added. I'm not sure where I'm going wrong, but it seems like the codepush server is bever hit or checked.\n```\npublic class MyReactActivity extends ReactActivity implements DefaultHardwareBackBtnHandler {\n    private ReactRootView mReactRootView;\n    private ReactInstanceManager mReactInstanceManager;\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n\n    super.onCreate(savedInstanceState);\n    mReactRootView = new ReactRootView(this);\n    mReactInstanceManager = ReactInstanceManager.builder()\n            .setApplication(getApplication())\n            //.setBundleAssetName(null)\n            .setJSMainModulePath(\"index\")\n            .addPackage(new MainReactPackage())\n            .addPackage(new ActivityStarterReactPackage())\n            .setUseDeveloperSupport(false)\n            .addPackage(new CodePush(\"65d05a1b-4fb6-4514-9cca-5fc6fef269e2\",getApplicationContext(),false))\n            .setInitialLifecycleState(LifecycleState.RESUMED)\n            .setJSBundleFile(CodePush.getJSBundleFile())\n            .build();\n    mReactRootView.startReactApplication(mReactInstanceManager, \"AwesomeProject\", null);\n\n    setContentView(mReactRootView);\n}\n\n```\nIs there something wrong in my onCreate here?. Hey Joshua, I managed to get it working, my issue was in the deployment keys I was using.\nThanks for the detailed steps in #970, without which I'd have been stuck here for a few more days.. Hey ruslan, I've already done this on my client side. My issue is exactly what is specified in 970\nCan you let me know what further info I can provide to help you out. Hey, I've managed to fix this issue using what was specified in #970 . ",
    "zhufree": "I had a similar problem, the codepush perform restartApp() but my activity do pause then destroy.\nI found the reason and way to fix it final.\nMy code is also set in activity not application. but the restartApp()  function need to get the ReactInstanceManager of the app:\n```\n@ReactMethod\n    public void restartApp(boolean onlyIfUpdateIsPending, Promise promise) {\n        // If this is an unconditional restart request, or there\n        // is current pending update, then reload the app.\n        if (!onlyIfUpdateIsPending || mSettingsManager.isPendingUpdate(null)) {\n            loadBundle();\n            ...\n            return;\n        }\n...\n    }\nprivate void loadBundle() {\n        clearLifecycleEventListener();\n        mCodePush.clearDebugCacheIfNeeded();\n        try {\n            // #1) Get the ReactInstanceManager instance, which is what includes the\n            //     logic to reload the current React context.\n            final ReactInstanceManager instanceManager = resolveInstanceManager();\n            if (instanceManager == null) {\n                return;\n            }\n        String latestJSBundleFile = mCodePush.getJSBundleFileInternal(mCodePush.getAssetsBundleFileName());\n\n        // #2) Update the locally stored JS bundle file path\n        setJSBundle(instanceManager, latestJSBundleFile);\n\n        // #3) Get the context creation method and fire it on the UI thread (which RN enforces)\n        new Handler(Looper.getMainLooper()).post(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    // We don't need to resetReactRootViews anymore \n                    // due the issue https://github.com/facebook/react-native/issues/14533\n                    // has been fixed in RN 0.46.0\n                    //resetReactRootViews(instanceManager);\n\n                    instanceManager.recreateReactContextInBackground();\n                    mCodePush.initializeUpdateAfterRestart();\n                } catch (Exception e) {\n                    // The recreation method threw an unknown exception\n                    // so just simply fallback to restarting the Activity (if it exists)\n                    loadBundleLegacy();\n                }\n            }\n        });\n\n    } catch (Exception e) {\n        // Our reflection logic failed somewhere\n        // so fall back to restarting the Activity (if it exists)\n        loadBundleLegacy();\n    }\n}\n\nmy old code dont set the instance for codepush, so it carshed and went to loadBundleLegacy();,finally exit activity.\nso I create a ReactInstanceHolder with ReactInstanceManager and set it to codepush:\nCodePush.setReactInstanceHolder(new ReactInstanceHolder() {\n                    @Override\n                    public ReactInstanceManager getReactInstanceManager() {\n                        return mReactInstanceManager;\n                    }\n                });\n```\nThat works!. ",
    "zheng-liu-seattle": "Thank you @max-mironov for the advise, we decided to not use UpdateDialog.. ",
    "atom-r": "@sergey-akhalkov That seems to have been my problem -- i.e., not setting the Archive scheme to 'Staging'.\nI suspect it will work if I can get a build to succeed. Currently troubleshooting getting a custom configuration to build successfully for a Cocoapods React-Native project, which is outside the scope of this issue.\nThank you for your help.. ",
    "sibelius": "@sergey-akhalkov tks for your help\nI think it's better to have a different scheme/target on xcode to be easy to build for Staging\nwhat do you think?. ",
    "lunarraid": "I believe the equivalent Java method is getCurrentPackageFolderPath. Thanks for the update. I agree, adding the path to the getUpdateMetadata method would be preferable, since that was actually one of the first places I looked for it. I'm currently working on another set of features for our project, so I doubt I'll be able to look into adding this any time soon, but I may have a bit more time in upcoming weeks.. ",
    "agersoncgps": "Did not use the sync method. I think I am pretty bare bones on my integration. The only three lines of CodePush code I have in my app are in my index.js:\n```\nconsole.ignoredYellowBox = [\"Warning: BackAndroid\", \"Remote debugger\", \"Setting a timer\"];\nimport React, { Component } from \"react\";\nimport { View, StatusBar } from \"react-native\";\nimport { MainNav } from \"./config/router\";\nimport { DrawerNavigator } from 'react-navigation';\nimport Icon from \"react-native-vector-icons/MaterialIcons\";\nimport { Client } from 'bugsnag-react-native';\nconst bugsnag = new Client();\nimport codePush from \"react-native-code-push\";\nlet codePushOptions = { checkFrequency: codePush.CheckFrequency.ON_APP_RESUME };\nclass App extends React.Component {\n  static navigationOptions = {\n   drawerLabel: 'Home',\n   drawerIcon: ({ tintColor }) => (\n     \n   ),\n };\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    return  ;\n  }\n}\nApp = codePush(codePushOptions)(App);\nexport default App;\n```. ",
    "davidvpe": "I've been an iOS Native Developer for more than 5 years already. What this framework does is super prohibited in the App Store guidelines, really. Apps that has this framework are lucky to still be in the Appstore. Apple care too much about the risk of an app with behavior or UI changing on the Appstore. Let's say that you upload a app that let's you tweet, super simple, and it gets approved on the App Store. The next day you just change the whole jsBundle cause you want to have a porn app, and now teenagers who downloaded your \"twitter app\" have a porn app in their phones... See what I mean? It's not about what you do, but what you're able to do. Check https://github.com/Microsoft/react-native-code-push#store-guideline-compliance. ",
    "Zakeelm": "@davidvpe I can assure you that CodePush is safe. @kelset is right! I highly recommend checking out the link above. \ud83d\ude0a. . It means that if you would like the application you're using CodePush with to target both iOS and Android, we recommend creating two \"different\" app instances for your app within CodePush. We say this because using the same app for both iOS and Android can cause installation exceptions. This is because CodePush's update packages for iOS and Android will contain different content. In order to create a CodePush app for each platform we recommend using the following commands:\ncode-push app add MyApp-Android android <platform>\ncode-push app add MyApp-iOS ios <platform>. We had a few internal changes that have caused a delay on the SDK work and a reprioritization of our team's backlog. While we don't have an ETA for this feature item at the moment, I can assure you this is one of the highest priority items we have on our roadmap. We're going to be investigating ways to implement this without the SDK rewrite, so that we can potentially get this to you sooner than later. . That was an error on our part, it should be working now! . Hey there! \nSorry for the delayed response. We've been doing some internal re-structuring in regard to how we handle support, so our response time has been a bit slower. Do you have any updates on this? I'm very curious as to if adding to your manifest solves the issue. . This is a very interesting feature idea. I can definitely see the use. I'm going to leave this open for now to see if this is something other users are interested in as well. If enough users are interested, we will further investigate this! . We've had some internal changes that have caused there to be some shifts in our proposed timeline. We're working on getting this straightened out and will updated the website with a new timeline as soon as possible! Going to close this for now. . Hey there! \nWe haven't forgotten about this issue. We have been doing some internal changes on the way we're executing github support. Are you still having this problem? . Thanks for this feature request. This is a really cool idea. I would love to hear some additional details regarding the use cases and how you envision this feature would improve the current CodePush release flow! . Ah, I see. That makes sense. I can definitely see how that would improve the deployment time. I'm going to keep this open for now to see if others are interested in this as well!. @AndrewJack @thevolcanomanishere We've updated our docs. CodePush will remain open sourced! At the moment, we have tentative plans to migrate the CodePush SDK into the App Center SDK, which is still open sourced. I'm not able to provide an ETA on this though. . @kelset At the moment, we don't have any updates to share on the roadmap. Our team has had a priority shift, so new feature work isn't happening as fast. We do recommend switching over to the App Center CLI whenever you find time though. There will not be in disruptions in your workflow when using the CodePush CLI though\n. @yaronlevi The plan is to move CodePush SDK into the App Center SDK. CodePush isn't going anywhere. . As @thevolcanomanishere mentioned, it's a bit hard to diagnose the issue with such little background. There can be plenty of potential reasons for this. If you're able to elaborate for us, we may be able to give you some insight on why this is happening. . This is true, unfortunately we don't offer this feature for React Native Windows. We don't have any current plans to do this feature, but this is something we can definitely look into. I will leave this open for now to gauge how many others are interested in this feature as well!  . Going to go ahead and close this for now. We've spoken via email regarding this. If you would like to take the steps regarding contribution for this item, please follow up in this thread and we can try to help steer you in the right direction. . Yes! You can use CodePush in a non root component, but you must also  use notifyAppReady() in the root component when doing so . WPF is supported. Thanks for pointing this out! Going to close this and update the documentation. . Hey @shawnXiao I'm going to close this for now, but this is something we will definitely keep an eye on going forward. As @alexandergoncharov mentioned, we don't seem to be on that list. Feel free to message back in this thread and we can re-open this accordingly! . @kissmypiss \nAs @NickToropov pointed out, we've never been aware of any issues where CodePush is the root cause of App Store rejection. We have several apps in the App Store using CodePush that have never had this issue. This is very interesting because CodePush use doesn't violate those guidelines. Can you give us some additional details on your app and how you're using CodePush? . Going to go ahead and close this as i've not heard from you @kissmypiss . No one else seems to be having this issue. Please follow up in this thread if this continues and we can re-open this. . @fzyzcjy As of now, we don't currently have any plans to do so. This is something we wan definitely look into though and investigate further though as we've had other requests. I'll run it by the rest of the team and see if this is something we can accomplish in the future. . Hey there!\n@lisong Awesome work on this PR. Text file diff would definitely be a wonderful addition to CodePush. Unfortunately, we\u2019re planning on completely re-writing our SDK and service logic in the near future so this is something we don\u2019t think we can commit to at the moment on our end. On the bright side, this is something we actually plan on implementing along with these updates. While I don\u2019t have an ETA on this, it is currently in our roadmap for the future of CodePush \ud83d\ude01\n. Going to close this. Please see https://github.com/Microsoft/react-native-code-push/pull/1393#issuecomment-420452169 . This is something we're definitely looking at implementing with our planned changes! . As of now, we don't have plans to support unbundle, but we can definitely see the value in it and why it could be a great addition to the CodePush feature set. Our backlog is pretty filled at the moment, but this is something the team is going to look into. I'm going to close this for now, but will revisit and update this after discussion/investigation with the team. . would change this back to original wording . I personally think the original flows a little better. Feels like more of a cohesive thought than with the two difference sentences. . This sentence is a little confusing, I would change \"After link\" to \"After linking\" and do a few more structural changes to this sentence. . Would keep as original. \"your end users\" and \"they\" are better words to describe the developer's users. \"You\" sounds more you're talking directly to the developer, which I don't think is the goal here . ",
    "afshin-hoseini": "Same Error. What you have done @aceisScope  ?. ",
    "RuanFluid": "Please see the logs from accepting/installing the download:\n\n. Hi Sergey,\nPlease see comments below:\n1: We have not updated to use separate apps (please not that this was not an issue before)\n2: We were not testing debug mode, but realised it was happening, more importantly this is happening on actual devices (Play Store Beta), so it would not be considered DEBUG mode.\n3: As per point 1, this was never an issue before, but below are the 2 lines we use to release updates:\ncode-push release-react Fluid-iOS ios --targetBinaryVersion \u201cx.x.x\u201d\ncode-push release-react Fluid-iOS android --targetBinaryVersion \u201cx.x.x\u201d\n. Hi Sergey,\nI understand that logic, my bigger concern really is that I have no codepush releases targeting a 3.0.0 binary (or any variation thereof), so why would it so why would it find that there is an update?\n. Hi Sergey, \nI had to zoom out a bit, you'll see above it shows back to v67, v86 was the last one on prod. Below you will see none for staging and up to v70 for prod, none ever target 3.0.0\n\n. Hi Sergey,\nPlease see screenshot below:\n\n. Hi @sergey-akhalkov, \nI tried to run the line you supplied and this was the response:\ncode-push patch Fluid-iOS Production -l v12 --disabled\n[Error]  Release not found for given label.\nPlease advise?\nP.S I will be looking at creating a separate CodePush app going forward.. :( Will have to do it I suppose. ",
    "sood03": "@AndrewJack , Even I am facing the same error with RN 0.45.1 and RNCP 3.0.0-beta.\nMy CodePush configuration is\n```js\nCodePush.sync(\n  { updateDialog: true, installMode: CodePush.InstallMode.IMMEDIATE },\n    status => {\n        switch (status) {\n          case CodePush.SyncStatus.DOWNLOADING_PACKAGE:\n            this.setState({ showDownloadingModal: true });\n            this._modal.open();\n            break;\n          case CodePush.SyncStatus.INSTALLING_UPDATE:\n            this.setState({ showInstalling: true });\n            break;\n          case CodePush.SyncStatus.UPDATE_INSTALLED:\n            this._modal.close();\n            this.setState({ showDownloadingModal: false });\n            break;\n          default:\n            break;\n        }\n      },\n      ({ receivedBytes, totalBytes }) => {\n        this.setState({ downloadProgress: receivedBytes / totalBytes * 100 });\n      }\n    );\n```\nWhat is the install mode you set which got your code push working?. Removing this piece of code from UPDATE_INSTALLED case made my code-push working\nthis._modal.close();\nthis.setState({ showDownloadingModal: false });\nSo my UPDATE_INSTALLED case is just empty.. @max-mironov Yes this can be constantly reproduced with the CodePush.sync() method defined as in #986 . Hi @max-mironov , I am on RN 0.45.1 and RNCP 3.0.0-beta. I tried on Android 7 (emulator) and on Android 6.0 on Redmi Note 3 facing the same error. The same settings work perfectly fine on iOS. I am also using react-native-modalbox to show the installation progress. \nThis is the render method in my js which handles CodePush\n```jsx\nimport Modal from 'react-native-modalbox';\nrender() {\n    if (this.state.showDownloadingModal) {\n    return (\n        \n\n {\n                    this._modal = c;\n                    }}\n                    swipeToClose={false}\n                >\n                    \n                    {this.state.showInstalling\n                    ? \n                    Installing update...\n                    \n                    : \n\n                        Downloading update...\n                        {\" \"}\n                        {${parseInt(this.state.downloadProgress, 10)} %}\n                        \n\n}\n                    \n\n\n\n);\n}\nreturn ;\n}\n```. Sorry for the formatting. Don't know why are the tabs not honored if I add it like a code snippet.. Hi @max-mironov , Sorry I couldn't get time to check this until now. I will try this today and get back to you soon.. Hi @max-mironov , thanks for your attached project. \nI replaced Modal to be used to from react-native instead of Modal from react-native-modalbox. \nAlso removing this piece of code from UPDATE_INSTALLED case made my code-push working\nthis._modal.close();\nthis.setState({ showDownloadingModal: false });\nSo my UPDATE_INSTALLED case is just empty. It seemed I was trying to set a state variable after app went for a restart. Taking this clue from @AndrewJack 's comment above.. Hi @max-mironov , Yes currently this issue is fixed for me but I will be keeping a close eye on my code push updates. You may close this for now. I will update in case I get any issues.\nThank you so much for your input :+1: . ",
    "vinaysmart": "Yup,I too face same issue it is not happening on debug mode it is happening on release apk only. After removing setState code under UPDATE_INSTALLED it is working fine. Guess it is accessing state which is not there. ",
    "Li357": "@sood03 How did you end up closing your modal then? I'm depending on state to know when codepush is finished installing the update. Only then do I actually render my App component. How would I know when codepush is finished?\n. ",
    "sridhard": "@tmaly1980 @vinaysmart @sergey-akhalkov In my app I have removed all setState in codepush notifications. We are not doing anything in codepush notifications except logging. Still we face this issue.\nAbout 2-3% of the users are facing this issue.\nIn our app we dont do anything in codepush notifications, so the app continues rendering the screens. Then the user will start using the app when the codepush download/install is in progress. If we dont have any logic in notifications then how to avoid user to stop using the app? since the user is using the app there will be some setState in the app, which may be causing this issue.\nAlso I have noticed then after the codepush gives UPDATE_INSTALLED notification, app is not restarting. I have tested by killing and opening the app. Codepush is downloading/installing the update, the changes are reflected in app but there is no restart(I have added logs in the constructor to verify this). @yuri-kulikov any update on this issue...approximately 5% of users face this issue. @eggli thanks for the workaround. We will try this solution. Hi\nAny update on this issue. Approximately 5% of our users are facing this issue. @yuri-kulikov \nI am not able to reproduce myself. We have integrated bugsnag in our app and many users face this issue. If you need any specific logs we can add in our app and collect the logs.\nBelow is our codepush code:\n const codePushOptions = {\n      installMode: CodePush.InstallMode.ON_NEXT_RESTART,\n      checkFrequency: CodePush.CheckFrequency.ON_APP_RESUME,\n      mandatoryInstallMode: CodePush.InstallMode.ON_NEXT_RESUME,\n    };\n    CodePush.sync(\n      codePushOptions,\n      this.codePushStatusDidChange.bind(this),\n      this.codePushDownloadDidProgress.bind(this),\n    );\ncodePushStatusDidChange(syncStatus) {\n    switch (syncStatus) {\n      case CodePush.SyncStatus.CHECKING_FOR_UPDATE:\n        console.log('codePushStatusDidChange', 'CodePush.SyncStatus.CHECKING_FOR_UPDATE');\n        break;\n      case CodePush.SyncStatus.DOWNLOADING_PACKAGE:\n        break;\n      case CodePush.SyncStatus.INSTALLING_UPDATE:\n        console.log('codePushStatusDidChange', 'CodePush.SyncStatus.INSTALLING_UPDATE');\n        break;\n      case CodePush.SyncStatus.UP_TO_DATE:\n        console.log('codePushStatusDidChange', 'CodePush.SyncStatus.UP_TO_DATE');\n        break;\n      case CodePush.SyncStatus.UPDATE_INSTALLED:\n        console.log('codePushStatusDidChange', 'CodePush.SyncStatus.UPDATE_INSTALLED');\n        break;\n      case CodePush.SyncStatus.SYNC_IN_PROGRESS:\n        console.log('codePushStatusDidChange', 'CodePush.SyncStatus.SYNC_IN_PROGRESS');\n        break;\n      case CodePush.SyncStatus.UNKNOWN_ERROR:\n        console.log('codePushStatusDidChange', 'CodePush.SyncStatus.unknown_error');\n        break;\n      case CodePush.SyncStatus.AWAITING_USER_ACTION:\n        console.log('codePushStatusDidChange', 'CodePush.SyncStatus.AWAITING_USER_ACTION');\n        break;\n      case CodePush.SyncStatus.UPDATE_IGNORED:\n        console.log('codePushStatusDidChange', 'CodePush.SyncStatus.UPDATE_IGNORED');\n        break;\n      default:\n        break;\n    }\n    CodePush.getUpdateMetadata().then((metadata) => {\n      global.codePushData = metadata ? { label: metadata.label, version: metadata.appVersion, description: metadata.description } : '';\n    });\n  }\ncodePushDownloadDidProgress(progress) {}. Below is the callstack information:\ncom.microsoft.codepush.react.CodePushMalformedDataException \u00b7 Unable to parse contents of /data/user/0/com.coursavy.test/files/CodePush/codepush.json, the file may be corrupted.\nCodePushUtils.java:198com.microsoft.codepush.react.CodePushUtils.getJsonObjectFromFile\nCodePushUpdateManager.java:55com.microsoft.codepush.react.CodePushUpdateManager.getCurrentPackageInfo \nCodePushUpdateManager.java:105com.microsoft.codepush.react.CodePushUpdateManager.getCurrentPackageHash\nCodePushNativeModule.java:525com.microsoft.codepush.react.CodePushNativeModule.isFirstRun \nMethod.java:-2java.lang.reflect.Method.invoke \nJavaMethodWrapper.java:372com.facebook.react.bridge.JavaMethodWrapper.invoke  \nJavaModuleWrapper.java:160com.facebook.react.bridge.JavaModuleWrapper.invoke  \nNativeRunnable.java:-2com.facebook.react.bridge.queue.NativeRunnable.run  \nHandler.java:739android.os.Handler.handleCallback \nHandler.java:95android.os.Handler.dispatchMessage \nMessageQueueThreadHandler.java:29com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage\nLooper.java:148android.os.Looper.loop \nMessageQueueThreadImpl.java:192com.facebook.react.bridge.queue.MessageQueueThreadImpl$3.run \nThread.java:818java.lang.Thread.run \nCaused By: org.json.JSONException \u00b7 End of input at character 0 of\nJSONTokener.java:449org.json.JSONTokener.syntaxError  \nJSONTokener.java:97org.json.JSONTokener.nextValue \nJSONObject.java:156org.json.JSONObject. \nJSONObject.java:173org.json.JSONObject. \nCodePushUtils.java:195com.microsoft.codepush.react.CodePushUtils.getJsonObjectFromFile\nCodePushUpdateManager.java:55com.microsoft.codepush.react.CodePushUpdateManager.getCurrentPackageInfo \nCodePushUpdateManager.java:105com.microsoft.codepush.react.CodePushUpdateManager.getCurrentPackageHash\nCodePushNativeModule.java:525com.microsoft.codepush.react.CodePushNativeModule.isFirstRun \nMethod.java:-2java.lang.reflect.Method.invoke \nJavaMethodWrapper.java:372com.facebook.react.bridge.JavaMethodWrapper.invoke  \nJavaModuleWrapper.java:160com.facebook.react.bridge.JavaModuleWrapper.invoke  \nNativeRunnable.java:-2com.facebook.react.bridge.queue.NativeRunnable.run  \nHandler.java:739android.os.Handler.handleCallback \nHandler.java:95android.os.Handler.dispatchMessage \nMessageQueueThreadHandler.java:29com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage\nLooper.java:148android.os.Looper.loop \nMessageQueueThreadImpl.java:192com.facebook.react.bridge.queue.MessageQueueThreadImpl$3.run \nThread.java:818java.lang.Thread.run. ",
    "kesiena115": "Thank you so much @max-mironov. I've not been able to figure out what's wrong with my app. But by following your steps, everything works as expected. I might just have to slowly add my app features unto a simple working version like yours until I figure out the problem. My original setup was based on native-starter-kit. I have two quick questions based on some observed differences:\n\n\nNeed for restart: With your example, I had to restart the emulator (so I guess users will have to restart their phones) for the update to be applied. Is this the recommended approach or is there a way to apply updates without restarting the device?\n\n\nStaging vs production key: By following the prompt in react-native link react-native-code-push, the deployment key ends up in android/app/src/main/res/values/strings.xml (which is different from my initial setup). In this case, how does one configure staging and production keys? Do you simply replace this key if you want to test the release in staging?. @joshuapinter yes my issue is resolved. I'll first explain the bug I had before showing some code changes I used for my case.\n\n\nMy bug\nIt was actually caused by react-navigation. I was using <classObject>.name to specify the name of my screens. That worked as expected in debug mode but not in release mode (still not sure why), hence my buttons were not navigating to the next screen in my release build. I fixed that by using normal string variables as my screen names instead of my previous fancy code.\nCode push\nI wish the original documentation was well laid out like the steps provided by @max-mironov. When I followed max's instructions to create a new app, I was able to get everything working as expected and the codepush updates work well. Now I need to update my original app because the codepush updating mechanism (based on native-starter-kit) isn't yet working as expected in my app. In order to implement max's suggestions about ON_NEXT_RESUME, I used this code to replace his sync():\n/** Update is downloaded after clicking the button and installed on next app resume after moving the app to the background */\n  sync() {\n    CodePush.sync(\n      { installMode: CodePush.InstallMode.ON_NEXT_RESUME },  // Note the lowercase i in installMode:\n      this.codePushStatusDidChange.bind(this),\n      null\n    );\n  }\nThat way, the app downloads updates when I click on the button added by Max in his example, but I'll only see the updates after re-opening the app from the background.. ",
    "benvium": "It seems there is an issue with RN 48.1 and codepush.\nI set up a brand-new blank project with RN 48.1 and the 5.0.0-beta version of code-push. I got it to successfully code-push an update once, and then it wouldn't update after that. I tried the codePush.sync function on a button and got the same behaviour (dialog appears, but clicking Install does nothing).\nDowngraded to RN 47.2 and everything is working as expected - updates appear swiftly via 'install silently in background' and also by pressing the codePush.sync button.\nPerhaps my test app is encountering a crash issue like yours on RN 48.1 and that's why the update isn't working?. Yep, you're right. I didn't see crash, just a failure to update.. ",
    "adambom": "I'm getting this error intermittently. I'm on react native version 0.47.1.. ",
    "belal-mazlom": "\nYes it was working before about 3 times push update success, and didn't see this screen before.\nLast update worked on debug and release locally, changes made for react native screens.\nVersion of react-native on locally and on prod is same.\nCan't reproduce the issue locally in Release mode \"Release schema\".\n\n. 1. Delete some images from assets/images that not used in screens.\nSome JS functions inside screens like:\n\nprepareOrderDetails(order) {\nlet subTotal = order.subtotal || order.total;\nlet details =  'Total: ' + order.total;\ndetails += '\\n SubTotal: ' + subTotal;\ndetails += '\\nItems:\\n';\norder.items && order.items.map((item) => {\n    details += item.titleAr + ' - ' + item.qty + 'item  - total ' + item.total + '\\n'\n});\nthis.popup.setMessage(details);\n}\n\n\nI tried to use \"react-native-code-push\": \"^3.0.0-beta\"\nbut return to 1.17.0-beta after crash discovered but without success. . @sergey-akhalkov \nI tried change function to this one\nprepareOrderDetails(order) {\nlet details =  'Total';\nthis.popup.setMessage(details);\n}\n\n\n\nAnd update to Prod but didn't work, still crashing . @sergey-akhalkov \nDo you think removing node_modules directory and run npm install cause this issue!\nI tried to retrieve package.json to same state when I uploaded app for production and working on same versions of modules but without success.\nI have only two option in mind for current issue:\n- Upload new one to production and wait all people to update app then push new updates, but worried if that will happen again.\n- Remove code-push for now until some updates on module or changes.. ",
    "temitope": "@afilp  @sergey-akhalkov  having the same issue, trying to see if lower versions work. nothing so far. #1225 Found a solution for me there. It had to do with changing react-native versions.. @vdlindenmark  happens for me only when I run the release. I am on React Native 0.51 and it only happens in ios. I had it in my Podfile and package.json files. I confirmed it by removing all references to the Codepush libs and everything worked.\nI was using  5.0+ but wll be testing on 4.0+\n. Success. I realized that I had upgraded my react-native to a new version since my last push of a release via CodePush (which was mandatory and possibly from a different version of react-native). This was causing the crash it seems.\nIt worked once I re-pushed the latest version of my code to CodePush servers (without the mandatory -m flag, and it worked. Makes sense kind of. I wish it would have simply failed more gracefully if possible. Double checking results now. Confirmed.\nThis perhaps explains why it was only happening on Release, rather than Debug. Pernicious bug that took me almost a week to find the culprit and now a few hours for the solution...Which had nothing to do with the actual code i wrote directly\ud83e\udd26\u200d\u2642\ufe0f. Note: I found that it also helped that I removed index.ios.js and index.android.js entirely from my root folder. I also removed Codepush from my Podfile and relegated it to package.json only.  Wishing anyon else ending up here look in closing the issue.. ",
    "kandiva": "I filled environment version above. \nIt was working fine before in RN 0.47.1. @max-mironov I don't see any valid information related to version 0.48 code push runtime errors. I tried getting latest but issue is not resolved yet. I am going to reopen this. . @max-mironov I did not cache clean... l am going to try now. I see it is working fine after delete and clean and reinstall npm modules. Thank you. . ",
    "EskelCz": "@esutton: I`m getting the same warning message. Why did you close this?. ",
    "omeraplak": "I'm getting the same error.. Hello @ruslan-bikkinin and thanks for your answer.\nI understand this case. Totally my mistake. i separated CI and development build pipeline and used  difference configs. I forgot this pipeline. I fix it. \nThanks,\n\u00d6mer. Hello @valinaga ,\nPlease verify if you are able to build main.jsbundle file using following command:\nreact-native bundle --platform ios --dev false --entry-file index.ios.js --bundle-output ios/main.jsbundle.\nIf so, could you please provide me with content of AppDelegate.m file?. ",
    "shopfue": "Hey , i still have this issue anyone able to fix it ?. ",
    "ethanyuwang": "I'm still seeing Could not determine correct xcode proj path to retrieve related plist file, there are multiple xcodeproj under the solution. After a reinstall. How should I fix it?. ",
    "garrottkai": "Same issue still occurs for me on v5.3.2. All I'm getting is:\n? What is your CodePush deployment key for Android (hit <ENTER> to ignore)\nRunning ios postlink script\n? What is your CodePush deployment key for iOS (hit <ENTER> to ignore) \nRunning android postlink script\nIt hangs there. ",
    "mouthzipper": "same issue here.\n\"CodePush.h\" header already imported.\n\"jsCodeLocation\" already pointing to \"[CodePush bundleURL]\".\n\"CodePushDeploymentKey\" already specified in the plist file.\nRunning android postlink script\n\"getJSBundleFile\" is already overridden\n\"codepush.gradle\" is already linked in the build definition\n--- hangs\nUpdate, working now after waiting for around 4mins.. +1. ",
    "antofa": "I had this issue too and resolved it by downgrading to node 9.7.0 from 10.9.0.. ",
    "mortezaalizadeh": "Got the same issue this morning after upgrading from 5.0.0-beta to 5.1.0-beta. :(. ",
    "ebaynaud": "Thanks @sergey-akhalkov for the time you take to help me.\n1. What is the binary version of your app running in prod now?\nv3.1.1\n2. Could you please share production deployment history with us?\nWhat kind of history? Let me try: I created v3.1.0 (staging) for iOS and Android and pushed them to HockeyApp. I created v3.1.1 (production) for iOS and Android and pushed them to stores. When I push an update to staging, update dialog is ok everywhere. When I promote this update to production, update dialog is ok on iOS but not on Android where nothing happens.\n3. Do I get it right if update dialog properly shows for staging version of your app?\nYes, as said upper ;)\n4. Could you please share with us the way you are initializing CodePush in java? ( i.e. new CodePush(...) )\nnew CodePush(BuildConfig.CODEPUSH_KEY, MainApplication.this, BuildConfig.DEBUG),. What I did after having edited local.properties with my sdk path:\ncd ~/Downloads/rncp1004/\nyarn\ncode-push app add 1004-android android react-native\nCopying keys in build.gradle, then:\ncd android/\n./gradlew assembleReleaseStaging\n./gradlew assembleRelease\nadb install app/build/outputs/apk/app-releaseStaging.apk\nI change versionName to 1.0.6 in build.gradle and then:\ncd ..\ncode-push release-react 1004-android android -d Staging -t ~1.0.0\ncode-push deployment history 1004-android Staging\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Label \u2502 Release Time \u2502 App Version \u2502 Mandatory \u2502 Description \u2502 Install Metrics      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v1    \u2502 a minute ago \u2502 ~1.0.0      \u2502 No        \u2502             \u2502 No installs recorded \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n=> update was not proposed\nI change versionName to 1.0.7 in build.gradle AND I do a JS modification and then:\ncode-push release-react 1004-android android -d Staging -t ~1.0.0\ncode-push deployment history 1004-android Staging\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Label \u2502 Release Time   \u2502 App Version \u2502 Mandatory \u2502 Description \u2502 Install Metrics       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v1    \u2502 19 minutes ago \u2502 ~1.0.0      \u2502 No        \u2502             \u2502 No installs recorded  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v2    \u2502 14 minutes ago \u2502 ~1.0.0      \u2502 No        \u2502             \u2502 Active: 100% (1 of 1) \u2502\n\u2502       \u2502                \u2502             \u2502           \u2502             \u2502 Total: 1              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n=> update was proposed\n=> From what I understand until here, first code-push release-react of 1.0.6 creates v1 even if no changes were made to the code because code-push has no reference version to compare to. However, as there is finally no difference, first update is not proposed. It's confirmed with another test where I perform a code update before pushing the v1 and there the updated was proposed directly.\n=> Hope I'm clear, I think there is something buggy or undocumented there as: either v1 creation should not be released if no change, either update should be proposed....\nNow, after deleting staging app from device:\ncd android\nadb install app/build/outputs/apk/app-release.apk\ncd ..\ncode-push promote 1004-android Staging Production\ncode-push deployment history 1004-android Production\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Label \u2502 Release Time                 \u2502 App Version \u2502 Mandatory \u2502 Description \u2502 Install Metrics       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v1    \u2502 a minute ago                 \u2502 ~1.0.0      \u2502 No        \u2502             \u2502 Active: 100% (1 of 1) \u2502\n\u2502       \u2502 (Promoted v2 from \"Staging\") \u2502             \u2502           \u2502             \u2502 Total: 1              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n=> update was proposed\nNot reproducing  my issue indeed... And I don't see any difference with my project.\nCould my issue be related to a previouscode-push deployment clear <appName> <deploymentName>\nNot sure to understand documentation about the consequences of this command. I know I tested this before, either on Staging and Production environments to erase previous tests.\nI think I'll start from scratch now removing my code-push apps then creating them again. I'll tell you whether my issue is solved after that now that I'm comfortable with code-push use.. Can you explain which key should be in android/app/src/main/res/values/strings.xml? When is it used?\nEDIT: My guess is nothing in multi-deployment setup because I can use the whole process without it.. I may have an explanation to what happened to me, that could reproduce what I did:\n- Change A to B in the code\n- code-push release to Staging (v1 staging)\n- Change B to A in the code\n- code-push release to Staging (v2 staging)\n- code-push promote to Production (v1 prod = v2 staging)\nNo changes because changes from v1 staging were reverted in v2 staging so v1 prod does not propose update... Possible?. ",
    "slickdev": "Thanks for the response, I will see when I can get a chance to try out previous versions. Until then I've had to remove it from my project due to the flickering images. Will try to get to it this week.. ",
    "wholcman": "Hi @max-mironov,\nI got a solution but I don't know if this is the optimized way.\nIndeed, each start of the app I check codePush.checkForUpdate(). \nIf there is an update, I force sync with codePush.InstallMode.IMMEDIATE\nIf not, I hide the splashscreen.\nBut, now I find the starting of the app slow due to the request.\n:(\n. ",
    "TheRohitSharma": "@max-mironov \nSorry, I meant to type 1.16.0-beta, not 1.6.0-beta. That is the code-push version I am using.\nI got past that issue, but my issue now is that when you open the app after installing a binary update, the app crashes on the codepush sync. I verified this by temporarily removing this:\n@Override\n    protected String getJSBundleFile() {\n      return CodePush.getJSBundleFile();\n    }\nHere is what happens:\nI install the update, either through the Play Store or by uploading the updated .apk to my phone, and then I open the app, and it immediately closes after flashing open for a second. The only thing the log shows at this point is: \n09-25 10:49:36.067 32650 32650 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.[removed for privacy]/files/CodePush/[removed for privacy]/CodePush/index.android.bundle\"\nThen, if I clear the app data/cache in settings and reopen the app, it works fine and is updated. \n\nSo you can see that the first line of the log is what shows when the app crashes in the beginning. Everything after that is when I reopen the app. The user shouldn't have to clear their app data or reopen the app after updating for it to work. What could the issue be? It's always trying to load the JS bundle from the same exact path: \n/data/user/0/com.[removed for privacy]/files/CodePush/[removed for privacy]/CodePush/index.android.bundle\nAny help would be greatly appreciated. I'm trying to make sure the user can smoothly update. How can I get it to quit fetching the incorrect JS bundle?\n. @max-mironov \nI always increment when I'm uploading an alpha, beta, or production release to the Play Store. Where does Code Push expect this to change? The version code in build.gradle and AndroidManifest? Or does it also expect it to change in package.json? Are we strictly referring to \"versionCode\" when we say \"app version\" or also \"versionName\"?. @max-mironov\nI haven't had any issues since I did this. I thought changing the version code was enough. Thanks for your help! . ",
    "iosdev-republicofapps": "Problem solved.  I'm adding this to help others in case they also have a problem.  See https://docs.microsoft.com/en-us/mobile-center/sdk/getting-started/react-native and do the following:\nbash> pod repo update\nbash> react-native link\nNow it finds the pod and builds and runs fine.\nClosing.. ",
    "HananeAlSamrout": "same issue, didn't work. hello @max-mironov , no i got com.facebook.react.uimanager.IllegalViewOperationException: Trying to remove a view index above child count 0 view tag: 1\n. okay @max-mironov  i'll send you the stack trace and the code so you can reproduce it \n. okay @max-mironov the solution was the same in #995, i was updating the state in 'UPDATE_INSTALLED', i removed that line and no more crashes, thank you . ",
    "balesz": "@sergey-akhalkov\nYes. Completely useless the TypeScript definition, because the wrong order of the names in the enum.\nhttp://www.typescriptlang.org/docs/handbook/enums.html. ",
    "smaradona": "That's exactly what was going on! The update was done with *, to any device configured to consume updates from your CodePush app. So, if I do now a new Codepush update targeted specifically to 4.3.0, if I then install 4.4.0 via TestFlight/TestFairy the app shouldn't use that Codepush update, right? Thanks a lot for your help!. Awesome! Thank you very much! \ud83d\udc4d . ",
    "amanthegreatone": "seeing similar behaviour \nhttps://stackoverflow.com/questions/46613103/codepush-updating-a-newly-installed-app\ndo i need to update the package.json version also so that new installs dont query code-push?. ",
    "akshetpandey": "Possibly fixed by #1018, but not sure if that is the right fix.. Yes that fixes it.. ",
    "Chenjh1992": "Also fail on 5.1.0 with dependency compile 'com.auth0:java-jwt:2.2.2' from #966 -> build.gradle\nWarning: com.auth0.jwt.internal.com.fasterxml.jackson.databind.ext.DOMSerializer: can't find referenced class org.w3c.dom.bootstrap.DOMImplementationRegistry\n...\n...\nNote: com.auth0.jwt.internal.com.fasterxml.jackson.databind.deser.BasicDeserializerFactory: can't find dynamically referenced class java.util.ConcurrentNavigableMap. ",
    "xinghuoliaoyuan45": "me too. @Victoriayangx  \u6211\u63a5\u6536\u4e86\u6211\u4eec\u7684\u9879\u76ee\uff0c\u7136\u540e\u8fd8\u662f\u8fd9\u4e2a\u95ee\u9898\u3002\u771f\u662f\u4e2a\u60b2\u4f24\u7684\u6545\u4e8b. @Victoriayangx  \u6211\u8bd5\u4e86\u8bd5 \u7528\u8fd9\u4e2a react-native-restart \u624b\u52a8\u91cd\u542f \uff0c\u80fd\u9000\u51fa\uff0c\u4e0d\u80fd\u518d\u8fdb\u4e86\uff0c\uff0c\u8fd9\u4e2a\u7b2c\u4e09\u65b9\u5e93\u5199\u5728\u5176\u4ed6\u7684\u662f\u80fd\u91cd\u542f\u7684\uff0c\u4e0d\u5f04\u4e86\u653e\u5f03\u4e86. I have this problem too   \"react-native\": \"0.56.0\", \"react-native-code-push\": \"^5.3.5\",. ",
    "Borisboky": "Hey, thanks for quick reply. \nBut I'm not sure that we understand each other.\nThis is my whole component:\n```\nexport default class CheckForUpdate extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            updateAvailable: false,\n            downloadingUpdate: null,\n            downloadProgress: null,\n            updateInstalled: false,\n            showSuccessMessage: true,\n            checkingForUpdate: true\n        }\n    }\ncomponentDidMount() {\n    this.checkForNewUpdate();\n}\n\ncheckForNewUpdate(){\n    let self = this;\n    codePush.checkForUpdate().then(update => {\n        if (!update) {\n            codePush.getUpdateMetadata(codePush.UpdateState.PENDING).then((data) => {\n                if (data) {\n                    self.setState({updateAvailable: true, checkingForUpdate: false})\n                }else{\n                    self.setState({updateAvailable: false, checkingForUpdate: false})\n                }\n            });\n        }else{\n            self.setState({updateAvailable: true, checkingForUpdate: false})\n        }\n    })\n}\n\nhandleUpdate() {\n    let self = this;\n\n    const checkUpdateStatus = (status) => {\n        switch (status) {\n            case codePush.SyncStatus.DOWNLOADING_PACKAGE:\n                self.setState({downloadingUpdate: true});\n                break;\n            case codePush.SyncStatus.INSTALLING_UPDATE:\n                self.setState({downloadingUpdate: false});\n                break;\n            case codePush.SyncStatus.UPDATE_INSTALLED:\n                self.setState({downloadingUpdate: false, updateInstalled: true});\n                break;\n        }\n    };\n\n    const downloadProgress = ({receivedBytes, totalBytes}) => {\n        self.setState({downloadProgress: Math.round((receivedBytes / totalBytes) * 100)})\n    };\n\n    codePush.getUpdateMetadata(codePush.UpdateState.PENDING).then((update) => {\n        if (update) {\n            self.setState({downloadingUpdate: false, updateInstalled: true});\n        }else{\n            codePush.sync({updateDialog: false, installMode: codePush.InstallMode.ON_NEXT_RESTART}, checkUpdateStatus, downloadProgress)\n        }\n    });\n}\n\nrenderUpdateNotification() {\n   if (this.state.downloadingUpdate) {\n        return (\n            <Modal animationType={\"none\"} transparent={true} visible={this.state.downloadingUpdate}>\n                <View style={{backgroundColor:'#000', opacity: .7, flex: 1, flexDirection: 'column', alignItems:'center', justifyContent:'center'}}>\n                    <View style={{backgroundColor:'transparent', opacity: 1}}>\n                        <Spinner isVisible={true} size={100} type={'ThreeBounce'} color={\"#ffffff\"}/>\n                    </View>\n                    <View>\n                        <Text style={{color: '#fff', marginTop: 30, fontSize:24}}>{gettext(\"Downloaded\")}: {this.state.downloadProgress} %</Text>\n                    </View>\n                </View>\n            </Modal>\n        )\n    }\n\n    if(!this.state.downloadingUpdate && this.state.updateInstalled){\n        return (\n            <Modal animationType={\"none\"} transparent={false} style={{ backgroundColor:'#000', opacity: 0.7 }} visible={!this.state.downloadingUpdate && this.state.updateInstalled}>\n                <View style={{flex: 1, flexDirection: 'column', alignItems:'center', justifyContent:'center', zIndex: 999}}>\n                    <View style={{ width: dw.width, height: dw.height / 5, alignItems:'center', justifyContent: 'center' }}>\n\n                        <View style={{ marginBottom: 20 }}>\n                            <Text style={{ padding: 10, fontSize: 22 }}>{gettext(\"Update installed successfully\")}</Text>\n                        </View>\n\n                        <TouchableHighlight style={styles.applyUpdateButton} underlayColor={\"transparent\"} onPress={() => codePush.restartApp()}>\n                            <Text style={[styles.updateButtonText, {color: \"#09c\"}]}>{gettext(\"Apply update.\")}</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n            </Modal>\n        )\n    }\n}\n\nrenderButton(){\n    if(this.state.checkingForUpdate){\n        return (\n            <View style={{paddingTop: 10, paddingBottom: 10, alignItems: 'center'}}>\n                <Text style={{color: s.success, fontSize: 12}}>{gettext(\"Checking for update...\")}</Text>\n            </View>\n        )\n    }\n\n    if (this.state.updateAvailable){\n        return (\n            <View style={{flexDirection: \"row\", alignItems: \"center\", justifyContent: \"center\", padding: 5, backgroundColor: s.success}}>\n                <Text style={styles.updateText}>{gettext(\"Update available\")}</Text>\n                <TouchableHighlight style={styles.updateButton} underlayColor={\"transparent\"} onPress={this.handleUpdate.bind(this)}>\n                    <Text style={styles.updateButtonText}>{gettext(\"Click to install\")}</Text>\n                </TouchableHighlight>\n            </View>\n        )\n    }\n}\n\nrender() {\n    return (\n        <View style={{ marginTop: 10, marginBottom: 10 }}>\n            {this.renderButton()}\n            {this.renderUpdateNotification()}\n        </View>\n    )\n}\n\n}\n```\nI specify that it checks for an update on app resume and that the update is installed on next resume if the app is in background for 5 minutes. But all that time until the next app resume the button will be shown that the user can also manually install the update clicking on it.\nThis is how I check if the update is available (and if this.state.updateAvailable is true the button is shown): \nlet self = this;\n        codePush.checkForUpdate().then(update => {\n            if (!update) {\n                codePush.getUpdateMetadata(codePush.UpdateState.PENDING).then((data) => {\n                    if (data) {\n                        self.setState({updateAvailable: true, checkingForUpdate: false})\n                    }else{\n                        self.setState({updateAvailable: false, checkingForUpdate: false})\n                    }\n                });\n            }else{\n                self.setState({updateAvailable: true, checkingForUpdate: false})\n            }\n        })\nIs there any way that I can in this piece of code check if the update is downloading?\nBecause, let's assume that it is a huge update and that my connection is  very slow and it will take about 4 minutes to download the update. Thus in my case the button Click to install will be shown and for 4 minutes if the user clicks on it, it wouldn't do nothing, until the update is downloaded.\nSorry for huge post.. How can I check if the update downloading process is not done. Thus, I know how to check if the update is finished downloading and it waits to be installed. But how can I check if the update is still downloading?\n. Can I for example in componentiDidMount do as follows:\ncomponenentDidMount(){\n       if(codePush.SyncStatus.DOWNLOADING_PACKAGE)\n              this.setState({downloadingUpdate: true});\n}. That is exactly what I do. See my initial question:\ncheckForNewUpdate(){\n        let self = this;\n        codePush.checkForUpdate().then(update => {\n            if (!update) {\n                codePush.getUpdateMetadata(codePush.UpdateState.PENDING).then((data) => {\n                    if (data) {\n                        self.setState({updateAvailable: true, checkingForUpdate: false})\n                    }else{\n                        self.setState({updateAvailable: false, checkingForUpdate: false})\n                    }\n                });\n            }else{\n                self.setState({updateAvailable: true, checkingForUpdate: false})\n            }\n        })\n    }\nBut that return true if the update has already been downloaded and installed, but it's waiting for to be applied, this is not what I want.\nI want to know if the downloading  is still in process. Thus if the update is downloading. And I want to check it in componentDidMount. It would be perfect if I can do as follows codePush.getUpdateMetadata(codePush.UpdateState.DOWNLOADING) instead of codePush.getUpdateMetadata(codePush.UpdateState.PENDING). Ok. Thanks. I'll try.. ",
    "FredyC": "Ok, I have figured it out and I feel somewhat stupid. The problem was that I copy pasted iOS deployment key to the Android build :)\nThe error message it kept giving me is rather misleading on this matter. Especially when I am rookie on all this stuff. It could be perhaps improved by logging contents of failing release or even giving a link for downloading that release to verify what might be wrong.. @sergey-akhalkov Thanks for a quick reply.\nTo me it was kinda obvious there need to be two apps, it's clear from the main site  step 3 where the platform is required argument. I am also using Mobile Center which corresponds to same apps so nothing surprising there.\nWhat misled me here was simply the log message stating there is a bundle missing from the deployment. It's not really super obvious it might be a deployment from another platform. As I said, it would help if I could see actual contents of deployment somewhere. Or at least extend the error message and give out hint to verify deployment key.. Ah, that's helpful, haven't noticed that. Thanks. Still, I think it's worth it to update error message to at least suggest checking that deployment key for a correct platform is used.. ",
    "gaykov": "@sergey-akhalkov thank you for your response! Yes, the error was fixed by upgrading react-native-code-push version to 5.1.2.. ",
    "matthiasleitner": "@sergey-akhalkov  I am seeing the same issue using 5.1.3 on an Android 4.4.2 device. Any suggestions?. @sergey-akhalkov sure here is my configuration\n```gradle\n    buildTypes {\n        debug {\n            buildConfigField \"String\", \"CODEPUSH_KEY\", '\"\"'\n            applicationIdSuffix \".debug\"\n        }\n        release {\n            minifyEnabled enableProguardInReleaseBuilds\n            proguardFiles getDefaultProguardFile(\"proguard-android.txt\"), \"proguard-rules.pro\"\n            signingConfig signingConfigs.release\n        }\n    releaseStaging {\n        applicationIdSuffix \".staging\"\n        minifyEnabled enableProguardInReleaseBuilds\n        proguardFiles getDefaultProguardFile(\"proguard-android.txt\"), \"proguard-rules.pro\"\n        signingConfig signingConfigs.release\n    }\n}\n// applicationVariants are e.g. debug, release\napplicationVariants.all { variant ->\n    variant.outputs.each { output ->\n        // For each separate APK per architecture, set a unique version code as described here:\n        // http://tools.android.com/tech-docs/new-build-system/user-guide/apk-splits\n        def versionCodes = [\"armeabi-v7a\":1, \"x86\":2]\n        def abi = output.getFilter(OutputFile.ABI)\n        if (abi != null) {  // null for the universal-debug, universal-release variants\n            output.versionCodeOverride =\n                    versionCodes.get(abi) * 1048576 + defaultConfig.versionCode\n        }\n    }\n\n    if (variant.getName() == \"defaultFlavourRelease\") {\n        variant.buildConfigField \"String\", \"CODEPUSH_KEY\", \"\\\"defaultRleaseKey\\\"\"\n    } else if (variant.getName() == \"defaultFlavourReleaseStaging\") {\n        variant.buildConfigField \"String\", \"CODEPUSH_KEY\", \"\\\"defaultStagingKey\\\"\"\n    } else if (variant.getName() == \"flavour1Release\") {\n        variant.buildConfigField \"String\", \"CODEPUSH_KEY\", \"\\\"flavourreleasekey\\\"\"\n    } else if (variant.getName() == \"flavour1ReleaseStaging\") {\n        variant.buildConfigField \"String\", \"CODEPUSH_KEY\", \"\\\"flavourstagingkey\\\"\"\n    }\n}\n\nproductFlavors {\n    defaultFlavour {\n        applicationIdSuffix \"\"\n        versionNameSuffix \"\"\n        manifestPlaceholders = [\n            appIcon: \"@mipmap/ic_launcher\",\n            urlSchema: \"defaultFlavour\"\n        ]\n    }\n    flavour1 {\n        applicationIdSuffix \".flavour1\"\n        versionNameSuffix \"-flavour1\"\n        manifestPlaceholders = [\n            appIcon: \"@mipmap/ic_launcher\",\n            urlSchema: \"flavour1\"\n        ]\n    }\n}\n\n```\nInit of CodePush In MainApplication.java\njava\nreturn Arrays.<ReactPackage>asList(\n          new MainReactPackage(),\n          new CodePush(BuildConfig.CODEPUSH_KEY, getApplicationContext(), BuildConfig.DEBUG). I\u2019ve logged the value of BuildConfig.CODEPUSH_Key from MainApplication and\nit has correct value for all flavours and build types\nSergey Akhalkov notifications@github.com schrieb am Fr. 27. Okt. 2017 um\n14:06:\n\n@matthiasleitner https://github.com/matthiasleitner, great, thanks.\nFrom the code you have provided I can see that you are using variant.buildConfigField\n\"String\", \"CODEPUSH_KEY\", \"\\\"flavourreleasekey\\\"\" approach to \"patch\"\nyour buildTypes, so could you please make sure if your\nBuildConfig.CODEPUSH_KEY has non-null/empty-sting value and it actually\nmatches with the productFlavors you have selected for build?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/1060#issuecomment-339953122,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AB8hiNa6PFsj4ZMYU2gogC3k0-dUjZ3uks5swcctgaJpZM4QGF_j\n.\n. @sergey-akhalkov  Thanks for checking back, I currently suspect that the issue might occur because of my versionNameSuffix on the flavour, will try to test this today.. @sergey-akhalkov I just removed the versionNameSuffix from my flavor and it works now. I don't really need the suffix at the moment. \n\nThanks for your help!\n. ",
    "YeshanJay": "I am getting the same issue on Android 4.1.2 and 4.4.2, but works fine on Android 8.1.0.\nUsed react-native-code-push@5.2.2\nThen I upgraded to react-native-code-push@5.3.2, and the issue still existed.\nAlso note that I have enabled multi-dex. Is that the reason? Because before enabling this, it used to work as i can remember.\nEnvironment\nOS - Android\nRN - 0.55.2\nbuildToolsVersion -  23.0.1\nminSdkVersion - 16\ntargetSdkVersion - 26\ncompileSdkVersion - 26\nmultiDexEnabled - true\ndexOptions - { javaMaxHeapSize \"4g\" }\n. I got it working.\nI think the problem came when I installed the plugin react-native-camera.\nAfter unlinking react-native-camera, the app worked fine.\nNeed to find a way to keep both plugins.. ",
    "feiyingx": "Got it thanks @sergey-akhalkov ! So sounds like other users have taken a similar approach to use some kind of timer. In that ticket, it says that the code push team is working on a fix and will be implemented within the next 30 days, would love to get a quick status update on whether that's still on target and it's something we can safely expect to be resolved soon. Thanks!. ",
    "joarwilk": "@max-mironov This answers my question. Thank you.. @max-mironov Sorry, forgot to reply. Yes that was most likely it, thanks!. ",
    "dkadlecek": "OK, looks like a false alarm. I've reinstalled, did a pod update, cleaned the XCode project and now it is working. Note sure what the exact cause was, but at least it is working now.. ok, thanks for looking into this. Note this is not a new project, but an update of an existing project. Also, mixing react-native link and cocoapods installs seems odd to me, unless link is not adding a project/library dependency to the ios project, which it typically does. Seems if one is using cocoapods, they should not use react-native link and setup code/config manually.\nIf you have your project exposed in a public repo, i'll review and see what the difference are from my project and post the problem/solution here if possible.. OK, I dug into this and thought about it a bit deeper today. The problem is that another framework, not included via CocoaPods (but via \u2018Link Frameworks and Libraries) is also including these dependencies, hence causing the duplicate symbol errors:\n'SSZipArchive'\n'JWT'\n'Base64'\nThe problem is that is is very difficult to isolate the framework that is already including these dependencies. If I can track it down, I can (hopefully) move into my Podfile, if that is supported.\nI\u2019ve seen some chatter about adding a feature to Cocoapods to remove/disable subspecs, but nothing is implemented yet.\nFor now, I am going to patch the podspec file. If you can think of a better solution I\u2019m all ears.\n\nOn Aug 16, 2018, at 8:33 AM, Nickolay Toropov notifications@github.com wrote:\nHi @dkadlecek https://github.com/dkadlecek! I've prepared a demo app\nIssue1378.zip https://github.com/Microsoft/react-native-code-push/files/2294206/Issue1378.zip. Take a look at it.\nTo setup do the following steps:\nunzip Issue1378.zip and go to unzipped folder\nexecute yarn\ngo to ios directory and execute pod install\nopen generated Issue1378.xcworkspace in XCode and built it\nNote:\nIf you have error The name of the given podspec 'GLog' doesn't match the expected one 'glog'\nfix the Glog spec name in:\n/Issue1378/node_modules/react-native/third-party-podspecs/GLog.podspec\nspec.name = 'glog'\nand in\n/Issue1378/node_modules/react-native/third-party-podspecs/Folly.podspec\nspec.dependency 'glog'\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub https://github.com/Microsoft/react-native-code-push/issues/1378#issuecomment-413587179, or mute the thread https://github.com/notifications/unsubscribe-auth/ABOp2299Ni_7EWkfzCX5-z75NXqlh5Utks5uRZDkgaJpZM4V7te3.\n\n\n. I think I have found the answer in the CodePush documentation (https://docs.microsoft.com/en-us/appcenter/distribution/codepush/react-native#plugin-installation-ios---cocoapods https://docs.microsoft.com/en-us/appcenter/distribution/codepush/react-native#plugin-installation-ios---cocoapods ):\nCodePush depends on an internal copy of the SSZipArchive library, so if your project already includes it (either directly or via a transitive dependency), then you can install a version of CodePush which excludes it by depending specifically on the Core subspec:\npod 'CodePush', :path => '../node_modules/react-native-code-push', :subspecs => ['Core']\nNote\nThe above paths needs to be relative to your app's Podfile, so adjust it as nec cessary.*\n\nOn Aug 20, 2018, at 6:18 AM, Nickolay Toropov notifications@github.com wrote:\nHey! How is your progress? Is the issue solved or do you have any other questions?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub https://github.com/Microsoft/react-native-code-push/issues/1378#issuecomment-414313230, or mute the thread https://github.com/notifications/unsubscribe-auth/ABOp2xobFt85fa_jFF6Zfc4LKvYU-dzTks5uSrcOgaJpZM4V7te3.\n\n\n. Strike my previous email. I get this error:\n[!] CocoaPods could not find compatible versions for pod \"CodePush/Core\":\n  In Podfile:\n    CodePush/Core (from ../node_modules/react-native-code-push)\nNone of your spec sources contain a spec satisfying the dependency: CodePush/Core (from../node_modules/react-native-code-push).\nYou have either:\n * mistyped the name or version.\n * not added the source repo that hosts the Podspec to your Podfile.\nPlease fix the podspec/Pod to support the documentation.\nd\n\nOn Aug 20, 2018, at 6:18 AM, Nickolay Toropov notifications@github.com wrote:\nHey! How is your progress? Is the issue solved or do you have any other questions?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub https://github.com/Microsoft/react-native-code-push/issues/1378#issuecomment-414313230, or mute the thread https://github.com/notifications/unsubscribe-auth/ABOp2xobFt85fa_jFF6Zfc4LKvYU-dzTks5uSrcOgaJpZM4V7te3.\n\n\n. ",
    "jgcmarins": "@max-mironov thanks!\nSolved upgrading React Native version \\o/. ",
    "wack17s": "@ruslan-bikkinin Yeap, simulator works fine. I suppose that this issue depends on device hardware, because iphone 7 works fine too. As i said, demo was made on iphone 5s.. @ruslan-bikkinin sry for delay, i just made video with logs from debug version, but in debug it overrides changes from RN server and doesn't reproduce this issue. Do i have to load this video or is any other way to take logs from release build or something else i can do?. ",
    "ViraRodionova": "No it isn't a duplicate, but it is related to each other.. We found the problem: just didn't set getting js bundle from codepush while manual linking, react-native link react-native-code-push fix this. ",
    "percyz": "Hi, @ruslan-bikkinin thanks for your reply.\nI tried what you suggested, and there was no error but nothing was getting changed, (exact problem as before) where it says there is an update and when I accept it - nothing changes. I was thinking the issue could be that It is not uploading correctly, Is there anyway for me to check what is being uploaded correctly?\n$ code-push debug android\nListening for android debug logs (Press CTRL+C to exit)\n[02:37:35] Reporting binary update (1.0)\n[02:37:35] An error has occurred : http://localhost:8081/index.android.bundle?platform=android&dev=true&hot=false&minify=false:88499:26\n[02:37:35] An error has occurred : http://localhost:8081/index.android.bundle?platform=android&dev=true&hot=false&minify=false:88505:26\n[02:37:35] Restarting app\n[02:37:35] Reporting CodePush update success (v16)\n```\n$ code-push deployment list \n\u2502 Name       \u2502 Update Metadata              \u2502 Install Metrics      \u2502\n\u2502 Production \u2502 No updates released          \u2502 No installs recorded \u2502\n\u2502 Staging    \u2502 Label: v16                   \u2502 Active: 50% (1 of 2) \u2502\n\u2502            \u2502 App Version: 1.0             \u2502 Total: 1             \u2502\n\u2502            \u2502 Mandatory: No                \u2502                      \u2502\n\u2502            \u2502 Release Time: 33 minutes ago \u2502                      \u2502\n\u2502            \u2502 Released By:    \u2502                      \u2502\n```. Hi @ruslan-bikkinin , many thanks for your help! As you said, it's not working for debug version, but it's working well for my release version.\nThank you again!. ",
    "jinghun1999": "buildTypes {\n        debug {\n            applicationIdSuffix \".debug\"\n            // Note: CodePush updates should not be tested in Debug mode as they are overriden by the RN packager. However, because CodePush checks for updates in all modes, we must supply a key.\n            buildConfigField \"String\", \"CODEPUSH_KEY\", '\"\"'\n        }\n        releaseStaging {\n            buildConfigField \"String\", \"CODEPUSH_KEY\", '\"Tav4hMqdxSed61fbdc-e98a-4455-aa57-e9c3d4d56d92\"'\n        }\n        release {\n            minifyEnabled enableProguardInReleaseBuilds\n            proguardFiles getDefaultProguardFile(\"proguard-android.txt\"), \"proguard-rules.pro\"\n            signingConfig signingConfigs.release\n            buildConfigField \"String\", \"CODEPUSH_KEY\", '\"w2LsMpJH721Rv8uyued61fbdc-e98a-4455-aa57-e9c3d4d56d92\"'\n        }\n    }\nas the same question, my release version works well,but how can i test the staging version, my staging version wasn't update for any device. i want to test the push code first ,but now i can't test it with any version. > buildTypes {\n        debug {\n            applicationIdSuffix \".debug\"\n            // Note: CodePush updates should not be tested in Debug mode as they are overriden by the RN packager. However, because CodePush checks for updates in all modes, we must supply a key.\n            buildConfigField \"String\", \"CODEPUSH_KEY\", '\"\"'\n        }\n        releaseStaging {\n            buildConfigField \"String\", \"CODEPUSH_KEY\", '\"-Tav4hMqdxSed61fbdc-e98a-4455-aa57-e9c3d4d56d92\"'\n        }\n        release {\n            minifyEnabled enableProguardInReleaseBuilds\n            proguardFiles getDefaultProguardFile(\"proguard-android.txt\"), \"proguard-rules.pro\"\n            signingConfig signingConfigs.release\n            buildConfigField \"String\", \"CODEPUSH_KEY\", '\"-e98a-4455-aa57-e9c3d4d56d92\"'\n        }\n    }. ",
    "brendan-rius": "Same problem here.\nApp crashes just after install (logged to Sentry), causing Code Push to roll back.\nI have not updated React Native in between updates :(\nreact-native: 0.48.3\nreact-native-code-push: 5.1.2-beta\nreact-native-sentry: 0.25.0\nHowever, I do not have a notifications modal so I do not think there is any link with that.\nHere is my code-push config: \n```js\nCodePush.getUpdateMetadata().then((update) => {\n    if (update) {\n        Sentry.setVersion(update.appVersion + '-codepush:' + update.label);\n    }\n});\nlet codePushOptions = {checkFrequency: CodePush.CheckFrequency.ON_APP_RESUME};\nexport default CodePush(codePushOptions)(App)\n```\nHere are the breadcrumbs from Sentry:\n\n. Also, interesting thing, here are my install metrics:\n\nAs you can see, there was 1 successful install. The successful install happened on the version I manually installed in my phone (via XCode), all the other (that failed) were from the App Store :(. @ruslan-bikkinin it could be.\nI have upgraded to react-native-sentry@0.28 where this bug should be fixed.\nWill update you if my app ever crashes again after this. Bug is fixed for me after updating to react-native-sentry 0.28.0. Ok after a more careful checking, what happens is that the displayed version number from CodePush is the wrong one.\nSo, in this case: \n\nThe version is 1.23.1, and there is actually no Code Push version applied (contrary to what is shown). The big problem though is that the app will not receive further CodePush updates!\nAlso, interesting discovery:\nThe problem only happens when you update the app from the app store. If you delete the app, and then install it from the app store, there is no such problem.\nThat makes me think that somehow CodePush keeps an archive of an old version of the code and:\n  1) reads version number from it (without executing the code)\n  2) disallows further updates\nI think this archive is deleted when the app is deleted. I am using ios. Will try to get the logs today. ",
    "iOSQiao": "No it isn't a duplicate.. App automatically exits, and the hot update is not successful.. here, \n\n. This is the wrong message.\n\n. I found out why, it turns out that's because of this. https://github.com/CRAlpha/react-native-wkwebview/issues/83.. ",
    "heart-bool": "Sorry, the configuration file does not have codePush.gradle referenced in build.gradle.\napply from: \"../../node_modules/react-native-code-push/android/codepush.gradle\". ",
    "RoboTeddy": "@ruslan-bikkinin Am I right in thinking that in order to take that approach without having checkForUpdate be called twice (once by me and once by syncInternal), it becomes necessary handle/maintain all the cases personally (such as failed installs and pending local updates)?\nThanks for responding earlier & I love code-push!. ",
    "valinaga": "@omeraplak \nThe issue appeared after a RN update to 0.47.2. Actually the Bundle React Native code and images phase vanished from XCode.\nI added this to XCode build phases and now it's ok.\nexport NODE_BINARY=node\n../node_modules/react-native/scripts/react-native-xcode.sh\nI reinstalled rn-code-push and it's ok now.\nthanks.\n. ",
    "adricl": "Can this please be merged now as react-native-windows version 0.50 has now been released! Thanks so much for your hard work.. #1051 This is the fix for this issue. . ",
    "sunweiyang": "I'm currently working around this issue by manually editing the android/app/build.gradle file and replacing 23.0.1 with 25.0.0:\nbuildToolsVersion \"25.0.0\". ",
    "srinuch1981": "Thanks, it's working in release mode .. ",
    "tkiefhaber": "not exactly the same error, but experiencing something simlar.\n```\nimport React from 'react';\n// import CodePush from 'react-native-code-push';\nimport Tabs from '../Tabs';\nimport Wrapper from './Wrapper.js';\nconst CodePush = require('react-native-code-push');\nconst codePushOptions = {\n  checkFrequency: CodePush.CheckFrequency.ON_APP_RESUME,\n  updateDialog: false,\n  installMode: CodePush.InstallMode.IMMEDIATE,\n};\nexport default class App extends React.Component {\ncomponentDidMount() {\n    CodePush.sync(codePushOptions);\n};\nrender() {\n    return (\n      \n\n\n    );\n  };\n}\n```\nhave also tried a different variation:\n```\nimport React from 'react';\nimport codePush from 'react-native-code-push';\nimport Tabs from '../Tabs';\nimport Wrapper from './Wrapper.js';\nconst codePushOptions = {\n  checkFrequency: codePush.CheckFrequency.ON_APP_RESUME\n};\nfunction App() {\n  return (\n    \n\n\n  );\n};\nexport default codePush(codePushOptions)(App);\n```\nboth end up with the same errors in Android and iOS.  Any guidance would be much appreciated! Thanks\n\n\n. ",
    "RobertTadevosyan": "_#    ###SOLUTION\nreact-native bundle --platform android --dev false --entry-file index.js --bundle-output android/app/src/main/assets/index.android.bundle --assets-dest android/app/src/main/res \nOUTPUT will be :\nc:\\Users\\lenger\\Desktop\\webrowser>react-native bundle --platform android --dev false --entry-file index.js --bundle-output android/app/src/main/assets/index.android.bundle --assets-dest android/app/src/main/res\nScanning folders for symlinks in c:\\Users\\lenger\\Desktop\\webrowser\\node_modules (43ms)\nScanning folders for symlinks in c:\\Users\\lenger\\Desktop\\webrowser\\node_modules (38ms)\nLoading dependency graph, done.\nbundle: start\nbundle: finish\nbundle: Writing bundle output to: android/app/src/main/assets/index.android.bundle\nbundle: Done writing bundle output\nand after \nRun react-native run-android again, you will find your modification work.\nfrom https://lengerrong.blogspot.am/2018/01/react-native-run-android-do-not.html\n . ",
    "esauter5": "I'm seeing the same errors with react-native-code-push 5.1.3-beta and react-native 0.49.0. I also see the same problem on 5.0.0-beta as well. I recently upgraded react-native to 0.49.0.. Found this via: https://github.com/wix/react-native-navigation/issues/314\nIn my react-native apps android/build.gradle, I changed\nmaven {\n  url \"$projectDir/../../node_modules/react-native/android\"\n}\nto\nmaven {\n  url \"$rootDir/../node_modules/react-native/android\"\n}\nand now things build fine. hope this helps!. ",
    "linjson": "i had same problem in androidstudio3.0,but I run \"./gradlew build\" is successful in Cammand,why?. i had resolved :\nit seem can't find 'node' path,I fix \"*nodeExecutableAndArgs\"->\"/usr/local/bin/node\" then it is work. @fhad-getmaple \nto find \"react-native-code-push/android/codepush.gradle\" this file. ",
    "fhadsheikh": "@linjson Hi, I'm getting the same errors...\nI don't understand what you mean by\n it seem can't find 'node' path,I fix \"*nodeExecutableAndArgs\"->\"/usr/local/bin/node\" then it is work\nCan you please explain how you fixed this issue? \nThank you,. ",
    "Biplab2014": "@linjson How did you resolve this issue?. ",
    "suxindao": "find \"react-native-code-push/android/codepush.gradle\" file,\nchange \ndef nodeExecutableAndArgs = config.nodeExecutableAndArgs ?: [\"node\"]\nto\ndef nodeExecutableAndArgs = config.nodeExecutableAndArgs ?: [\"/usr/local/bin/node\"]\nIt works for me!. ",
    "jebora": "Just for reference, there's a workaround that can be found here: https://github.com/facebook/react-native/issues/6875#issuecomment-293220175\nI got this issue when upgrading to Android Studio 3, using api 26. Similar issue to https://github.com/Microsoft/react-native-code-push/issues/1069. ",
    "stueynet": "Thanks @max-mironov. So just to be 100% clear. Setting the targetBinaryVersion will literally only install that particular codepush deployment on devices that have that exact binary version. Then when you push a subsequent build with no targetBinaryVersion set it will be installed on all devices.\nAgain I see the issue being that given we can't control exactly what binary a user happens to be on, pushing codepush releases that have a dependency on a particular core update might be hard to manage.. @max-mironov does info.plist/build.gradle get included with a codepush release though? I thought that would only come through with a full app store release. If not then this is not an issue at all.. Right so the issue remains that if you are pushing through codepush, once you push a codepush (js and images) release that has dependencies on a new binary, you have an ongoing issue. The issue being someone with an old build (that has not updated the app from the app store), will continue to get codepush updates that may in fact be dependant on a binary build update that they don't have.. For sure. The issue is that the app store updates are not guaranteed to be installed. So imagine a user that has binary 1.4.9 installed. Then we push a codepush deployment. As long as the codepush deployment has no binary dependencies no problem. However when we push a new release like 1.5.0 which has a new native module that corresponds to the js updates, we want to make sure that we have set the codepush release to require the 1.5.0 binary. So thats fine too. However what happens when we have the 1.5.1 codepush release? The people that still have 1.4.9 binary will not have the required files. So when we codepush 1.5.1, people who have not updated via the app store since 1.4.9 will break. See how you get stuck?. The only thing that is missing is that the above workflow requires you match a binary version with every codepush. Once you have a codepush release attached to a specific binary version, all future code push releases must always target a specific version. You can no longer just do codepush release because 1.4.9, 1.5.0, 1.5.1 would all get the new release that has the 1.5.1 minimum dependency. And all future releases will also have that dependency until you make a new binary change which will bump the dependency. \nThis is why we have an API check where we can actually set the minimum build number the app must have to enable codepush.sync().\nBut in generally I don't see a workflow where you can just push to code push without specifying a specific binary version number.. > So finally that's true - in general you cannot just produce new release without specific binary version especially if you have breaking changes. \nYeah we are on the same page for sure. You would always target a binary version and thats way more stable anyway. I just hadn't though much about it before but it does make perfect sense to me now. Thanks so much for all the help!. So one more question sorry... If we want to target the current latest release in the app store for a codepush update, we would target 1.5.1 (to hit current users of the latest version) but also have to target 1.5.2 at the same time?. Yeah that\u2019s perfect. If you have to hit fix a release that\u2019s already on devices, I don\u2019t see any other way because you\u2019ll want to apply it to the binary version that\u2019s already out there, plus the one that will be released when the App Store gets around to approving the hot fix release. . I am not re-opening this ticket but wanted to confirm the confusion now that I have a better understanding. It was unclear that when you do codepush release, it automatically associates that codepush deployment with the current binary version. I thought it would simply update the bundle, and any device would want to go and get it. However based on the above, all code push release only targets the binary version of the app, based on when you do the release.\nSo one final summary here:\n\nRelease 1.5.1 to the app store. Everyone has 1.5.1 binary and codepush for 1.5.1. \nFind a bug in 1.5.1\nUpdate the js code and codepush release BEFORE you version bump. So this will update all devices currently running version 1.5.1.\nVersion bump and release the full build to the app store. That will target devices only with 1.5.2.\n\nThe important thing is that you dont version bump when you release the hotfix that fixes 1.5.1. OR you add the targetBinaryVersion=1.5.1 when you codepush release the hotfix. \nSo key take way for me is that every codepush release is automatically tied to the binary version in the local codebase from where you push the codepush release.. Thanks @sergey-akhalkov. We actually changed out infrastructure a bit so that the codebase is the same no matter what and it looks at the environment to decide what config to use. This makes everything simpler.. What if we are not using it as props but using it within the Image style object? Same problem? Also would it not make sense to have the code-push build mimic the behaviour of a normal production build? Production builds work and look just fine with no errors whatsoever. . @itoys should we open this back up?. @iTOYS  or anyone from Microsoft can you open this back up please or let us know how we can deal with it? Editing React Native core files is not an option.. ",
    "kohei-takata": "The error was fixed.\nProcess is below.\n1. Create main.jsbundle file manually.\nI run react-native bundle --platform ios --dev false --entry-file index.ios.js --bundle-output iOS/main.jsbundle command.\n2. Reattach main.jsbundle file to Xcode.\nRemove reference of main.jsbundle from Xcode and add main.jsbundle to Xcode again. ",
    "TheCodeTalker": "Thanks For response after react-native link when i compiled I got an error in header #import  not found so i checked the header their i changed. #1067 i did solve by adding build phases link binary with library libz.tbd . its compiling. how about the simulator how to run their through run-ios . i am getting this error in simulator \n\n. ",
    "mistenkt": "Also getting this same error following pretty much the same steps as @TheCodeTalker did.\nCodepush version 5.3.2\nreact-native version 0.55.3\nNo other dependencies. fresh app created with react-native init appName. ",
    "mohitgoibibo": "Hi @ruslan-bikkinin , I executed the following steps:\n\nrm -rf node_modules\nnvm use 9.0.0\nnpm install\n\nOutput\n```\nnode_modules/react-native-code-push/android/app/src/main/java/com/microsoft/codepush/react/CodePushNativeModule.java uses unchecked or unsafe operations.\nNote: Recompile with -Xlint:unchecked for details.\n:react-native-code-push:transformClassesAndResourcesWithPrepareIntermediateJarsForDebug\n:mobile:recordFilesBeforeBundleCommandBuildDebug FAILED\nFAILURE: Build failed with an exception.\n\n\nWhat went wrong:\nExecution failed for task ':mobile:recordFilesBeforeBundleCommandBuildDebug'.\n\nA problem occurred starting process 'command 'node''\n\n\n\nTry:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\n\nGet more help at https://help.gradle.org\n\n\nBUILD FAILED in 1m 33s\n263 actionable tasks: 35 executed, 228 up-to-date\n```\nFYI: We have multiple flavours and build types. . @ruslan-bikkinin @sergey-akhalkov Is it in the roadmap to include support for Gradle 3 and BuildTools 26. @sergey-akhalkov Yes currently I have reverted to previous version of gradle and its working. \nAnd yes the issue is similar as referenced in the link.. ",
    "shibbyy": "+1. ",
    "deepaktwr": "For me nodeModulesPath was causing this issue..\n```\ninternal/modules/cjs/loader.js:596\n    throw err;\n    ^\nError: Cannot find module '/Users/deepaktiwari/drive/projects/node_modules/react-native-code-push/scripts/recordFilesBeforeBundleCommand.js'\n    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:594:15)\n    at Function.Module._load (internal/modules/cjs/loader.js:520:25)\n    at Function.Module.runMain (internal/modules/cjs/loader.js:744:10)\n    at startup (internal/bootstrap/node.js:238:19)\n    at bootstrapNodeJSCore (internal/bootstrap/node.js:572:3)\n:rb_android:recordFilesBeforeBundleCommandDebug FAILED\nFAILURE: Build failed with an exception.\n\nWhat went wrong:\nExecution failed for task ':rb_android:recordFilesBeforeBundleCommandDebug'.\nProcess 'command 'node'' finished with non-zero exit value 1\n```\n\n\n\nAs in codepush.gradle it takes \"../../node_modules\" because of that it was taking the path of node modules as parallel to the project structure instead of inside the project where my package.json was available.\nas package.json was inside the project I have added this in grade.properties\nnodeModulesPath=../node_modules\nwhich now takes the path from inside the project and it worked as this nodeModulesPath is used by codepush.gradle to find the recordFilesBeforeBundleCommand.js file.. ",
    "sandropoluan": "Thank you.. ",
    "ovaris": "I think I have the same problem, after migrating to appcenter (and moving app under new organization), last thing I see in iOS log is: \n[CodePush] Checking for update.\n2017-12-13 16:33:21.157 [info][tid:com.facebook.react.JavaScript] [CodePush] Awaiting user action.\n2017-12-13 16:33:21.160993+0200 xxx[95954:3612489] [CodePush] Awaiting user action.\n2017-12-13 16:33:27.463 [info][tid:com.facebook.react.JavaScript] [CodePush] Downloading package.\n2017-12-13 16:33:27.464112+0200 xxx[95954:3612489] [CodePush] Downloading package.\nUsing RN 51.0 and react-native-code-push: 5.2.1 . The issue was somehow fixed by itself for us, so latest code-push release using appcenter cli worked just fine.. ",
    "hwangjr": "i want to change the deployment key fetched from server, so maybe i just change the mDeploymentKey value in react-native-code-push/CodePush.java at master \u00b7 Microsoft/react-native-code-push. i just recreate the CodePush while i found the code push key has changed. . ",
    "toandk": "Solved by using: \nif (!__DEV__) {\n  TKNReactNative = codePush(TKNReactNative)\n}. ",
    "jqn": "@ruslan-bikkinin thanks for your quick answer. ",
    "aliceathens": "Thanks for your reply @ruslan-bikkinin see below my App component that is called by index.ios.js and index.android.js:\n```\n// @flow\nimport React, {Component} from 'react';\nimport codePush from \"react-native-code-push\";\nimport { StyleSheet, Text, View, Alert } from 'react-native';\nimport SplashScreen from 'react-native-smart-splash-screen';\nimport { StackNavigator, addNavigationHelpers }from 'react-navigation';\nimport { Login } from './scenes';\nimport Routes from \"./routes\";\nimport theme from './theme';\nimport { Provider, connect } from \"react-redux\";\nimport getStore from './redux/stores'\nimport createSagaMiddleware from 'redux-saga'\nimport rootSaga from './redux/sagas/'\nimport {\n  checkAuthorization,\n} from './lib/check-auth'\n// code push options here\nlet codePushOptions = { checkFrequency: codePush.CheckFrequency.ON_APP_START, updateDialog: true, installMode: codePush.InstallMode.IMMEDIATE };\nconst AppNavigator = Routes;\nconst navReducer = (state, action) => {\n  const nextState = AppNavigator.router.getStateForAction(action, state);\n// Simply return the original state if nextState is null or undefined.\n  return nextState || state;\n};\nclass Root extends Component {\n  render() {\n    console.log(this.props);\n    return (\n      \n    );\n  }\n}\nconst mapStateToProps = (state) => ({\n  nav: state.nav\n});\nconst AppWithNavigationState = connect(mapStateToProps)(Root);\nconst sagaMiddleware = createSagaMiddleware()\nconst store = getStore(navReducer, sagaMiddleware);\nsagaMiddleware.run(rootSaga);\nclass App extends React.Component {\ncomponentDidMount () {\n       SplashScreen.close({\n          animationType: SplashScreen.animationType.scale,\n          duration: 850,\n          delay: 500,\n       })\n  }\ncodePushStatusDidChange(status) {\n        switch(status) {\n            case codePush.SyncStatus.CHECKING_FOR_UPDATE:\n                console.log(\"Checking for updates.\");\n                break;\n            case codePush.SyncStatus.DOWNLOADING_PACKAGE:\n                console.log(\"Downloading package.\");\n                break;\n            case codePush.SyncStatus.INSTALLING_UPDATE:\n                console.log(\"Installing update.\");\n                break;\n            case codePush.SyncStatus.UP_TO_DATE:\n                console.log(\"Up-to-date.\");\n                break;\n            case codePush.SyncStatus.UPDATE_INSTALLED:\n                console.log(\"Update installed.\");\n                break;\n        }\n    }\ncodePushDownloadDidProgress(progress) {\n    console.log(progress.receivedBytes + \" of \" + progress.totalBytes + \" received.\");\n}\n\ncomponentWillMount(){\n    checkAuthorization(store);\n  }\nrender() {\n    return (\n      \n\n\n    )\n  }\n}\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n});\nexport default App = codePush(codePushOptions)(App);\n```\n. Hey @sergey-akhalkov @ruslan-bikkinin yes this fixed it! Strange how react navigation breaks this.. I was pulling my hair out for days wondering why it wasn't working. Thanks guys!!. Exact order of commands below:\ncode-push release-react <appName> <deploymentName> --entryFile index.js --targetBinaryVersion \"~1.0\" --dev false\ncode-push promote <appName> Staging Production\ncode-push release-react <appName> <deploymentName> --entryFile index.js --targetBinaryVersion \"2.0.0\" --dev false\ncode-push promote <appName> Staging Production\n```\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Label \u2502 Release Time                  \u2502 App Version \u2502 Mandatory \u2502 Description \u2502 Install Metrics          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v1    \u2502 Dec 5, 2017                   \u2502 ~1.0        \u2502 No        \u2502             \u2502 Active: 8.8% (19 of 215) \u2502\n\u2502       \u2502 (Promoted v1 from \"Staging\")  \u2502             \u2502           \u2502             \u2502 Total: 21                \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v2    \u2502 Dec 5, 2017                   \u2502 ~1.0        \u2502 No        \u2502             \u2502 Active: 5.6% (12 of 215) \u2502\n\u2502       \u2502 (Promoted v2 from \"Staging\")  \u2502             \u2502           \u2502             \u2502 Total: 13                \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v3    \u2502 Dec 6, 2017                   \u2502 ~1.0        \u2502 No        \u2502             \u2502 No installs recorded     \u2502\n\u2502       \u2502 (Promoted v3 from \"Staging\")  \u2502             \u2502           \u2502             \u2502                          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v4    \u2502 Dec 6, 2017                   \u2502 ~1.0        \u2502 No        \u2502             \u2502 Active: 0% (0 of 215)    \u2502\n\u2502       \u2502 (Promoted v5 from \"Staging\")  \u2502             \u2502           \u2502             \u2502 Total: 1                 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v5    \u2502 Dec 8, 2017                   \u2502 ~1.0        \u2502 No        \u2502             \u2502 Active: 0% (0 of 215)    \u2502\n\u2502       \u2502 (Promoted v6 from \"Staging\")  \u2502             \u2502           \u2502             \u2502 Total: 1                 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v6    \u2502 Dec 8, 2017                   \u2502 ~1.0        \u2502 No        \u2502             \u2502 No installs recorded     \u2502\n\u2502       \u2502 (Promoted v7 from \"Staging\")  \u2502             \u2502           \u2502             \u2502                          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v7    \u2502 Dec 8, 2017                   \u2502 ~1.0        \u2502 No        \u2502             \u2502 No installs recorded     \u2502\n\u2502       \u2502 (Promoted v8 from \"Staging\")  \u2502             \u2502           \u2502             \u2502                          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v8    \u2502 Dec 11, 2017                  \u2502 ~1.0        \u2502 No        \u2502             \u2502 Active: 9.3% (20 of 215) \u2502\n\u2502       \u2502 (Promoted v10 from \"Staging\") \u2502             \u2502           \u2502             \u2502 Total: 22                \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v9    \u2502 Dec 13, 2017                  \u2502 ~1.0        \u2502 No        \u2502             \u2502 Active: 2.8% (6 of 215)  \u2502\n\u2502       \u2502 (Promoted v12 from \"Staging\") \u2502             \u2502           \u2502             \u2502 Total: 9                 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v10   \u2502 a month ago                   \u2502 ~1.0        \u2502 No        \u2502             \u2502 Active: 0.47% (1 of 215) \u2502\n\u2502       \u2502 (Promoted v13 from \"Staging\") \u2502             \u2502           \u2502             \u2502 Total: 3                 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v11   \u2502 25 days ago                   \u2502 ~1.0        \u2502 No        \u2502             \u2502 Active: 1.4% (3 of 215)  \u2502\n\u2502       \u2502 (Promoted v16 from \"Staging\") \u2502             \u2502           \u2502             \u2502 Total: 3 (18 pending)    \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v12   \u2502 19 days ago                   \u2502 ~1.0        \u2502 No        \u2502             \u2502 Active: 7.9% (17 of 215) \u2502\n\u2502       \u2502 (Promoted v17 from \"Staging\") \u2502             \u2502           \u2502             \u2502 Total: 28 (32 pending)   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 v13   \u2502 5 days ago                    \u2502 2.0         \u2502 No        \u2502             \u2502 No installs recorded     \u2502\n\u2502       \u2502 (Promoted v19 from \"Staging\") \u2502             \u2502           \u2502             \u2502                          \u2502\n```. @iTOYS no I don't think they were successful - it's almost like the app isn't detecting that there is an updated bundle thats available but my APK version is 2.0.1 and its been promoted and released for 2.0.1? or its rejecting the install but nothing is in the application logs on the phone.. . [CodePush] logs from running the signed APK in the emulator with Android Studio:\n04-10 21:32:08.058 24689-24689/com.app D/ReactNative: [CodePush] Loading JS bundle from \"assets://index.android.bundle\"\n04-10 21:32:11.128 24689-24739/com.app I/ReactNativeJS: Checking for updates.\n04-10 21:32:11.256 24689-24739/com.app I/ReactNativeJS: [CodePush] Reporting binary update (2.0.1)\nThat's all I can see in Logcat entires for CodePush. FYI: The same code seems to work fine for iOS this has been live for a few months now with no deployment issues until I decided to add 'Code Signing' feature to my deployments. Never the less here are my options and setup:\n```\nlet codePushOptions = { checkFrequency: codePush.CheckFrequency.ON_APP_START, updateDialog: false, installMode: codePush.InstallMode.ON_NEXT_RESTART };\nclass App extends React.Component {\n....\n   codePushStatusDidChange(status) {\n        switch(status) {\n                case codePush.SyncStatus.CHECKING_FOR_UPDATE:\n                        console.log(\"Checking for updates.\");\n                        break;\n                case codePush.SyncStatus.DOWNLOADING_PACKAGE:\n                        console.log(\"Downloading package.\");\n                        break;\n                case codePush.SyncStatus.INSTALLING_UPDATE:\n                        console.log(\"Installing update.\");\n                        break;\n                case codePush.SyncStatus.UP_TO_DATE:\n                        console.log(\"Up-to-date.\");\n                        break;\n                case codePush.SyncStatus.UPDATE_INSTALLED:\n                        console.log(\"Update installed.\");\n                        break;\n        }\n    }\ncodePushDownloadDidProgress(progress) {\n    console.log(progress.receivedBytes + \" of \" + progress.totalBytes + \" received.\");\n}\n   ....\n\n   render() {\n    return (\n        <Provider store={store}>\n            <AppWithNavigationState />\n        </Provider>\n    )\n}\n\n}\nexport default App = codePush(codePushOptions)(App);\n```\n. ",
    "tk-pivotus": "Looks good to me.  Sorry, somehow I skimmed through the docs and didn't find that.  Closing.. ",
    "pcguru": "I created the public/private key pair on Windows using the commands from the guide. I used Git Bash as shell in windows. https://github.com/Microsoft/code-push/blob/master/cli/README.md#code-signing\nopenssl genrsa -out private.pem\nopenssl rsa -pubout -in private.pem -out public.pem\nI then copied the key files to the OSX machine and built a new binary. Started it in the simulator.\nThe plist file is FooBar.plist (I have many schemes/variants of the app):\n<plist version=\"1.0\">\n<dict>\n    <key>CodePushDeploymentKey</key>\n    <string>$(CODEPUSH_DEPLOYMENT_KEY)</string>\n    <key>CodePushPublicKey</key>\n    <string>$(CODEPUSH_PUBLIC_KEY)</string>\nThe variables are replaced at build by XCode as user defined variables. I pasted the public key from the public.pem (all of the text) into the text box for the CODEPUSH_PUBLIC_KEY variable in XCode.\nThis is the command I used to push the code, I used the same command on both the Windows and OSX machine:\n$ code-push release-react FooBar-iOS ios --targetBinaryVersion 3.5 --privateKeyPath buildConfig/code-push-keys/private.pem\nSo the same command, with the same private key file, works when run from OSX, but not from Windows.\nThe Android app accepts the signed code push from the Windows machine without problems. Haven't tried code push from OSX machine for the Android app.. My fault. Somehow XCode broke the public key, seems related to line endings in the public key. Thanks for the hint of the public key being at fault. I pasted the public key into the variable of the pbxproj file with an external editor instead. After that pushes work from any machine. Don't know why the push worked from the OSX machine before, perhaps an old release got through that had no public key. :(\nThe good news is Code Push works just as expected.. ",
    "seanadkinson": "@max-mironov It didn't use to perform this slowly (at least I never noticed it).  We've been using code-push for months, and it hasn't been an issue.  Possibly related to upgrading to High Sierra, since I did that about the time this issue appeared..  What's odd, of course, is that all the other libraries resolve quickly.  I'll try doing some more testing on my end, and ket you know if I find anything.  Thanks. Thanks @max-mironov, looks like that SO answer you provided did the trick!  Weird that it only affected react-native-code-push.  I appreciate your help.. ",
    "rizwanahmed19": "@Zakeelm Thanks a lot. @max-mironov Thanks a lot for clearing.. ",
    "felix-zg": "Same here \ud83d\udc4d . Hey @max-mironov,\nThank you for the fast response, I found the following change with code-push app ls.\nThe app name changed from \"AppName\" to \"Username/AppName\".\nChange of the app name solved the issue for me.. ",
    "aubreywahl": "I'm having the same problem as OP.\n@felix-zg this totally fixed the problem! Thank you :). ",
    "wangcheng714": "@max-mironov   i change the name form AppName to Username/AppName ,  @felix-zg   work for me! Thank you !. ",
    "southerneer": "@max-mironov I'm having this same problem, and I'm trying to understand how the PR you referenced would fix it. Does that PR only apply if you've used set-current for the default app? I've tried both ways (implicit app name with set-current and explicit app name with -a flag) with a non-owner account on both old and new CLIs (code-push release-react and appcenter codepush release-react) and I'm still having the problems described by OP.\nappcenter --version -> appcenter version 1.0.3\ncode-push --version -> 2.1.3-beta. ",
    "s-shiva1995": "I have checked the above issues and I think I have linked codePush.gradle file correctly. Here is my app/build.gradle\n`apply plugin: \"com.android.application\"\n//firebase performance monitoring plugins\napply plugin: \"com.android.application\"\napply plugin: \"com.google.firebase.firebase-perf\"\nimport com.android.build.OutputFile\n/\n * The react.gradle file registers a task for each build variant (e.g. bundleDebugJsAndAssets\n * and bundleReleaseJsAndAssets).\n * These basically call react-native bundle with the correct arguments during the Android build\n * cycle. By default, bundleDebugJsAndAssets is skipped, as in debug/dev mode we prefer to load the\n * bundle directly from the development server. Below you can see all the possible configurations\n * and their defaults. If you decide to add a configuration block, make sure to add it before the\n * apply from: \"../../node_modules/react-native/react.gradle\" line.\n * \n * apply from: \"../../node_modules/react-native/react.gradle\"\n * apply from: \"../../node_modules/react-native-code-push/android/codepush.gradle\"\n * project.ext.react = [\n *   // the name of the generated asset file containing your JS bundle\n *   bundleAssetName: \"index.android.bundle\",\n \n *   // the entry file for bundle generation\n *   entryFile: \"index.android.js\",\n \n *   // whether to bundle JS and assets in debug mode\n *   bundleInDebug: false,\n \n *   // whether to bundle JS and assets in release mode\n *   bundleInRelease: true,\n \n *   // whether to bundle JS and assets in another build variant (if configured).\n *   // See http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Build-Variants\n *   // The configuration property can be in the following formats\n *   //         'bundleIn${productFlavor}${buildType}'\n *   //         'bundleIn${buildType}'\n *   // bundleInFreeDebug: true,\n *   // bundleInPaidRelease: true,\n *   // bundleInBeta: true,\n \n *   // whether to disable dev mode in custom build variants (by default only disabled in release)\n *   // for example: to disable dev mode in the staging build type (if configured)\n *   devDisabledInStaging: true,\n *   // The configuration property can be in the following formats\n *   //         'devDisabledIn${productFlavor}${buildType}'\n *   //         'devDisabledIn${buildType}'\n \n *   // the root of your project, i.e. where \"package.json\" lives\n *   root: \"../../\",\n \n *   // where to put the JS bundle asset in debug mode\n *   jsBundleDirDebug: \"$buildDir/intermediates/assets/debug\",\n \n *   // where to put the JS bundle asset in release mode\n *   jsBundleDirRelease: \"$buildDir/intermediates/assets/release\",\n \n *   // where to put drawable resources / React Native assets, e.g. the ones you use via\n *   // require('./image.png')), in debug mode\n *   resourcesDirDebug: \"$buildDir/intermediates/res/merged/debug\",\n \n *   // where to put drawable resources / React Native assets, e.g. the ones you use via\n *   // require('./image.png')), in release mode\n *   resourcesDirRelease: \"$buildDir/intermediates/res/merged/release\",\n *\n *   // by default the gradle tasks are skipped if none of the JS files or assets change; this means\n *   // that we don't look at files in android/ or ios/ to determine whether the tasks are up to\n *   // date; if you have any other folders that you want to ignore for performance reasons (gradle\n *   // indexes the entire tree), add them here. Alternatively, if you have JS files in android/\n *   // for example, you might want to remove it from here.\n *   inputExcludes: [\"android/\", \"ios/\"],\n \n *   // override which node gets called and with what additional arguments\n *   nodeExecutableAndArgs: [\"node\"],\n \n *   // supply additional arguments to the packager\n *   extraPackagerArgs: []\n * ]\n */\nproject.ext.vectoricons = [\n    iconFontNames: [ 'MaterialIcons.ttf', 'FontAwesome.ttf'] // Name of the font files you want to copy\n]\napply from: \"../../node_modules/react-native/react.gradle\"\napply from: \"../../node_modules/react-native-vector-icons/fonts.gradle\"\n/*\n * Set this to true to create two separate APKs instead of one:\n *   - An APK that only works on ARM devices\n *   - An APK that only works on x86 devices\n * The advantage is the size of the APK is reduced by about 4MB.\n * Upload all the APKs to the Play Store and people will download\n * the correct one based on the CPU architecture of their device.\n /\ndef enableSeparateBuildPerCPUArchitecture = false\n/*\n * Run Proguard to shrink the Java bytecode in release builds.\n /\ndef enableProguardInReleaseBuilds = false\nandroid {\n    compileSdkVersion 25\n    buildToolsVersion '25.0.2'\ndefaultConfig {\n    applicationId \"com.askin.qoti\"\n    minSdkVersion 16\n    targetSdkVersion 22\n    versionCode 1\n    versionName \"1.1.0\"\n    //was used with firebase conflict \n    multiDexEnabled true\n    ndk {\n        abiFilters \"armeabi-v7a\", \"x86\"\n    }\n    //Used for increasing the heap size memory of java\n    dexOptions { javaMaxHeapSize \"4g\" }\n}\nsigningConfigs {\n    release {\n        if (project.hasProperty('MYAPP_RELEASE_STORE_FILE')) {\n        }\n    }\n}\nsplits {\n    abi {\n        reset()\n        enable enableSeparateBuildPerCPUArchitecture\n        universalApk false  // If true, also generate a universal APK\n        include \"armeabi-v7a\", \"x86\"\n    }\n}\nbuildTypes {\n    debug {\n        buildConfigField \"String\", \"CODEPUSH_KEY\", '\"\"'\n    }\n    releaseStaging {\n        buildConfigField \"String\", \"CODEPUSH_KEY\", '\"Staging Key\"'\n    }\n    release {\n        minifyEnabled enableProguardInReleaseBuilds\n        proguardFiles getDefaultProguardFile(\"proguard-android.txt\"), \"proguard-rules.pro\"\n        signingConfig signingConfigs.release\n        buildConfigField \"String\", \"CODEPUSH_KEY\", '\"Production Key\"'\n    }\n}\n// applicationVariants are e.g. debug, release\napplicationVariants.all { variant ->\n    variant.outputs.each { output ->\n        // For each separate APK per architecture, setplay-services-base a unique version code as described here:\n        // http://tools.android.com/tech-docs/new-build-system/user-guide/apk-splits\n        def versionCodes = [\"armeabi-v7a\":1, \"x86\":2]\n        def abi = output.getFilter(OutputFile.ABI)\n        if (abi != null) {  // null for the universal-debug, universal-release variants\n            output.versionCodeOverride =\n                    versionCodes.get(abi) * 1048576 + defaultConfig.versionCode\n        }\n    }\n}\n\n}\ndependencies {\n    compile project(':appcenter-crashes')\n    compile project(':appcenter-analytics')\n    compile project(':appcenter')\n    compile project(':react-native-fetch-blob')\n    compile fileTree(dir: \"libs\", include: [\"*.jar\"])\n    compile \"com.android.support:appcompat-v7:23.0.1\"\n    compile \"com.facebook.react:react-native:+\" \n//Mix Panel dependency\ncompile project(':react-native-mixpanel')\n\n//filesystem\ncompile project(':react-native-fs')\n\n//code push\ncompile project(':react-native-code-push')\n\n}\n// Run this once to be able to run the application with BUCK\n// puts all compile dependencies into folder libs for BUCK to use\ntask copyDownloadableDepsToLibs(type: Copy) {\n    from configurations.compile\n    into 'libs'\n}`\nIn issue 771 I am not getting any CODEPUSH_APK_BUILD_TIME key in app.debug but codePush.gradle has the same structure defined for the string.\nPlease correct me if I am doing something wrong.. Sorry wrong placement of codePush.gradle. ",
    "grahamyesfit": "@max-mironov Please update the instructions for Plugin Installation (Android - RNPM) to include the codepush.gradle step. I ran into the same issue, but I didn't even look at the Manual steps because I assumed react-native link did everything that was required, as the instructions indicate you do either one or the other.. ",
    "erlendfh": "At least in our case, this was related to our Podfile. If you're using cocoapods, react-native link now (https://github.com/facebook/react-native/pull/15460) looks for the line target '<project-name>' do, in the Podfile, to figure out where to add cocoapods dependencies, but we had added additional targets to this list, so it no longer matched.. @fungilation I would still urge you to investigate the new cocoapods related changes in RN and not look for changes in CodePush to explain this behavior (assuming you've upgraded to RN 0.50). Run react-native link in debug mode and attach a debugger: node --inspect-brk /path/to/react-native link, or add some console.log statements to node_modules/react-native/local-cli/link/pods/[registerNativeModule.js|findLineToAddPod.js|findPodTargetLine.js] \nLooking at the code, another option seems to be adding the line # Add new pods below this line at the right place in your Podfile.\n. @fungilation have you tried adding # Add new pods below this line to your pod file? I can't guarantee that Cannot read property 'match' of undefined is happening for the same reason in your code base as in ours, but it's the exact same error message I got when installing CodePush, and it was related to a problem with finding the right insertion point in the Podfile. If the problem is with your Podfile, no amount of adding and removing the code push dependency is going to resolve this.. @fungilation I'd put it above pod 'RNFirebase', :path => '../node_modules/react-native-firebase'. ",
    "LiuShuoyu": "If your iOS project is using CocoaPods (contains Podfile) and linked library has podspec file, then react-native link will link library using Podfile. To support non-trivial Podfiles add # Add new pods below this line comment to places where you expect pods to be added. ",
    "samermurad": "Hey, @max-mironov thanks for the quick response.\nI'm not quite sure if it's the path issue as in #977,  it might be, but I'm trying to understand if it is.\nIn my app I have a screen where I have WebView and bridge implementation between the react-native and the native JavaScript that runs inside the WebView browser.\nThe WebView loads an html file that uses couple of JS and CSS files, some contain the bridge implementation some contain other functionalities and of course the styling.\nTheses files cannot/shouldn't be bundled because they should not be available on the react native level, this is browser based code which will in some scenarios even break react-native if bundled.\nThe funny thing is, that the HTML files gets loaded correctly, but it just can't find the JS/CSS files.\nthe assets structure goes as follows:\n_ src\n assets\n img\n html\n_ myFile.html\n_ js\n_ [ALL JS FILES]\n css\n_____ [ALL CSS FILES]\nfrom within the html I reference the file relatively, maybe this has something to do with the issue.\nregarding the bundling, as I stated above, I have a script that copies the files to the build dirs of the apps because it doesn't happen with the bundling.. @max-mironov Exactly, when I debug the webview through safari, I see that the paths to the files are in the Application support dir, under CodePush/[CODE_PUSH_VERSION_HASH???]/, but if the app can load the html file it means that it indeed was copied wasn't it? so in this case, what happened to the js/css files? so I guess it's a combination of both problems isn't it? I mean if the js/css files were to be treated as assets, wouldn't they be available in the above mentioned code push folder as well?. @max-mironov \nrenderWebView = () => {\n        let isIOS = Platform.OS === 'ios';\n        return isIOS ? (\n            <WebView\n                bounces={false}\n                style={styles.webView}\n                ref={webview => this.webView = webview}\n                onMessage={this.invoke.listener}\n                source={require('./html/myHtmlFile.html')}\n            />\n        ):\n            (\n                <WebView\n                    style={styles.webView}\n                    ref={webview => this.webView = webview}\n                    onMessage={this.invoke.listener}\n                    source={{uri:'file:///android_asset/html/myHtmlFile.html'}}\n                />\n            );\n    };\nThis is my html load, again, the html is loaded successfully, the files aren't.\nI have around 10 different files, I have this problem on two different projects, having everything inline would be very messy.\nSo you are telling me that there is currently nothing that I can do about it? \nCan I some how copy the files I need to the code-push dir after the update in runtime? That could also work no? I don't know if I like this approach either, the best option would be to somehow treat these specific files as assets through an extra option in the cli maybe? . @sujitpk-perennial Hi, sorry for the delay, well actually both projects decided to drop code push for the moment, although I don't think they'll ever come back to implement it.\nLike I stated in the question, this actually only happens on iOS due to how assets are treated on the platforms, because assets in android apps must be under the assets folder, which is not the case in iOS.\nIf I would go about solving this, I probably consider one of the following options:\n\nThe easiest way to do that would without wasting any more time would be to upload the JS/CSS files to a remote repo/server (maybe even a github gist?) and load them from the url so wont have to have them locally (you would still have to manually copy the HTML file on build), the downside of this is that it's a drag for debugging, and if you JS solution is an offline solution, well then you always have a chance that these files wont load in some cases.\nIf having the files on the client side is a must for you, maybe you can download the files on the first app run and save them somewhere in the app's document folder, which wont be overwritten by code-push (you'll probably have a hard time debugging this)\nAnother option would be to write a script (maybe you can even use grunt) the will minify all your JS files and add them in a <script> tag in the HTML file, its probably a hustle, but I'm sure that once you are done with this script, it should be a breeze, you can probably depend the app builds on this script so you wont have to run it manually.\nit might be possible to have these files bundled on the native level, where they will be out of code-push's reach, using Xcode's folder reference instead of folder group.\nThe last option I would consider (this sounds like a real headache) is to try to move these files to the relevant code-push folder after the code-push update is done, just thinking about this makes my head hurt, the assets are moved to a some codePush folder, I don't remember the exact path, you'll have to debug to figure out, in general, I actually kinda hate all the solutions that involve playing with the file dirs on the app run rather than in compile time.\n\nLet me know if it helped, \nI'm actually interested to know how you'll solve it.\nGood luck!. ",
    "Arshiamidos": "hey guys\nfound the trick base on Image doesn't show after bundling into the apk. \nas you know require('index.html') work on simulator and emulator for both &driod and IOS\nbut problem will faced when you bundle and you want release your app \nfor android just follow this  enablejavascript  and copy you files in assets folder in YOUR_APP/app/src/main/assets and use just picture below.  \nand for ios just bundle package with \nreact-native bundle --entry-file index.ios.js --platform ios --dev false --bundle-output ios/main.jsbundle --assets-dest ios\nwhen bundle created you have main.bundle.js and asset folder \njust copy you files in  .xcworkspace like this image\n\nand set free all refrence in will be and unchanged just like mine. \n\ni hope this tutorial help you from confusing release app in RN . follow my answer\ni hope it help you\ni used RN 0.54 and i'm using ckeditor\nthis. @sujitpk-perennial  all assets and bundles are readonly so you can't change them if you want a config just save them in DOCEMUENT (NSHOMEDIRE i think)\nso you can't modify read only objects. ",
    "wd": "Ah, yes. That's should be the right status. I forget to check the source code. Thanks.\nBTW: I think maybe we should update the doc to catch up the code.. ",
    "die20": "@ruslan-bikkinin Is their anywhere I can go to find the correct MainApplication.java and MainActivity.java with CodePush and React Native Navigation? We had no problems with code push before integrating react-native-navigation, but after we are experiencing this same issue on android only - iOS has been working great!. @ruslan-bikkinin Thanks for that info! - I came across issue #1096 but when I add ReactInstanceManager I get this build error on android \nerror: cannot find symbol\n       public ReactInstanceManager getReactInstanceManager() {\n              ^\n  symbol:   class ReactInstanceManager\n  location: class MainApplication\n1 error\n:app:compileDebugJavaWithJavac FAILED\nI'm using \nreact-native 0.47.1 \nreact-native-navigation 1.1.295 \nreact-code-push 5.1.1-beta. Thanks @jay1337 that worked! . ",
    "gvillenave": "Unfortunately that doesn't do it for me, I'm still getting the crash after downloading an update even with ON_NEXT_RESTART install mode.. @SudoPlz Thanks for the tip, I'll try that. Do you also call startTabBasedApp (or startSingleScreenApp) before the code push update happens as well?. It does work after I move the call to codePush.sync after registerScreens and wait for the Promise to complete before calling startTabBasedApp. Thanks!. ",
    "henrycity": "I did what you suggested but navigation is not working for me. Here are the logs I get\n```\n06-07 10:30:51.359 9800-9862/? E/unknown:ReactNative: Invariant Violation: Minified React error #143; visit http://facebook.github.io/react/docs/error-decoder.html?invariant=143 for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\nThis error is located at:\n    in r\n    in t\n    in RCTView\n    in t\n    in Connect(t)\n    in RCTView\n    in t\n    in Connect(t)\n    in RCTView\n    in t\n    in Connect(t)\n    in r\n    in n\n    in s\n    in RCTView\n    in RCTView\n    in t, stack:\nonly@101:4233\nvalue@659:1338\nl@44:54398\nbeginWork@44:56240\nn@44:82237\ni@44:82566\no@44:82907\nC@44:87082\nb@44:86624\nm@44:85850\nd@44:85131\nf@44:84822\nt@44:50910\nupdateContainer@44:101734\nrender@44:69237\nexports@283:730\nrun@279:615\nrunApplication@279:2046\nvalue@21:3582\n<unknown>@21:1067\nvalue@21:3009\nvalue@21:1039\n\n06-07 10:30:51.359 9800-9861/? E/ReactNativeJS: 'Unhandled promise rejection', { [ReferenceError: Can't find variable: AsyncStorage]\n      line: 1199,\n      column: 895,\n      sourceURL: '/data/user/0/fi.taskuparkki.app/files/CodePush/a23158e284ff200eda3120985783f8bf574ee5ab2743218be6b2f32caeb5c7bc/CodePush/index.android.bundle' }\n06-07 10:30:51.361 9800-9861/? E/ReactNativeJS: 'Unhandled promise rejection', { [ReferenceError: Can't find variable: AsyncStorage]\n      line: 1199,\n      column: 895,\n      sourceURL: '/data/user/0/fi.taskuparkki.app/files/CodePush/a23158e284ff200eda3120985783f8bf574ee5ab2743218be6b2f32caeb5c7bc/CodePush/index.android.bundle' }\n06-07 10:30:51.362 9800-9862/? E/unknown:ReactNative: console.error: \"Unhandled promise rejection\", {\"line\":1199,\"column\":895,\"sourceURL\":\"/data/user/0/fi.taskuparkki.app/files/CodePush/a23158e284ff200eda3120985783f8bf574ee5ab2743218be6b2f32caeb5c7bc/CodePush/index.android.bundle\"}, stack:\n    @1078:1147\n    exports@1085:66\n    @1078:1018\n    @26:1779\n    u@26:513\n    c@26:877\n    callImmediates@26:3180\n    value@21:3183\n    @21:1516\n    value@21:3009\n    value@21:1486\n    value@21:1094\n06-07 10:30:51.363 9800-9862/? E/unknown:ReactNative: console.error: \"Unhandled promise rejection\", {\"line\":1199,\"column\":895,\"sourceURL\":\"/data/user/0/fi.taskuparkki.app/files/CodePush/a23158e284ff200eda3120985783f8bf574ee5ab2743218be6b2f32caeb5c7bc/CodePush/index.android.bundle\"}, stack:\n    @1078:1147\n    exports@1085:66\n    @1078:1018\n    @26:1779\n    u@26:513\n    c@26:877\n    callImmediates@26:3180\n    value@21:3183\n    @21:1516\n    value@21:3009\n    value@21:1486\n    value@21:1094\n06-07 10:30:51.558 9800-9800/? E/zygote: The String#value field is not present on Android versions >= 6.0\n06-07 10:30:51.878 9800-9861/? E/ReactNativeJS: 'Unhandled promise rejection', { [ReferenceError: Can't find variable: AsyncStorage]\n      line: 1199,\n      column: 895,\n      sourceURL: '/data/user/0/fi.taskuparkki.app/files/CodePush/a23158e284ff200eda3120985783f8bf574ee5ab2743218be6b2f32caeb5c7bc/CodePush/index.android.bundle' }\n06-07 10:30:51.880 9800-9861/? E/ReactNativeJS: 'Unhandled promise rejection', { [ReferenceError: Can't find variable: AsyncStorage]\n      line: 1199,\n      column: 895,\n      sourceURL: '/data/user/0/fi.taskuparkki.app/files/CodePush/a23158e284ff200eda3120985783f8bf574ee5ab2743218be6b2f32caeb5c7bc/CodePush/index.android.bundle' }\n06-07 10:30:51.881 9800-9862/? E/unknown:ReactNative: console.error: \"Unhandled promise rejection\", {\"line\":1199,\"column\":895,\"sourceURL\":\"/data/user/0/fi.taskuparkki.app/files/CodePush/a23158e284ff200eda3120985783f8bf574ee5ab2743218be6b2f32caeb5c7bc/CodePush/index.android.bundle\"}, stack:\n    @1078:1147\n    exports@1085:66\n    @1078:1018\n    @26:1779\n    u@26:513\n    c@26:877\n    callImmediates@26:3180\n    value@21:3183\n    @21:1516\n    value@21:3009\n    value@21:1486\n    value@21:1094\n06-07 10:30:51.882 9800-9862/? E/unknown:ReactNative: console.error: \"Unhandled promise rejection\", {\"line\":1199,\"column\":895,\"sourceURL\":\"/data/user/0/fi.taskuparkki.app/files/CodePush/a23158e284ff200eda3120985783f8bf574ee5ab2743218be6b2f32caeb5c7bc/CodePush/index.android.bundle\"}, stack:\n    @1078:1147\n    exports@1085:66\n    @1078:1018\n    @26:1779\n    u@26:513\n    c@26:877\n    callImmediates@26:3180\n    value@21:3183\n    @21:1516\n    value@21:3009\n    value@21:1486\n    value@21:1094\n. The app doesn't crash for me but navigation is broken. These are the logs I get\n06-07 10:30:51.359 9800-9862/? E/unknown:ReactNative: Invariant Violation: Minified React error #143; visit http://facebook.github.io/react/docs/error-decoder.html?invariant=143 for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\nThis error is located at:\n    in r\n    in t\n    in RCTView\n    in t\n    in Connect(t)\n    in RCTView\n    in t\n    in Connect(t)\n    in RCTView\n    in t\n    in Connect(t)\n    in r\n    in n\n    in s\n    in RCTView\n    in RCTView\n    in t, stack:\nonly@101:4233\nvalue@659:1338\nl@44:54398\nbeginWork@44:56240\nn@44:82237\ni@44:82566\no@44:82907\nC@44:87082\nb@44:86624\nm@44:85850\nd@44:85131\nf@44:84822\nt@44:50910\nupdateContainer@44:101734\nrender@44:69237\nexports@283:730\nrun@279:615\nrunApplication@279:2046\nvalue@21:3582\n<unknown>@21:1067\nvalue@21:3009\nvalue@21:1039\n\n06-07 10:30:51.359 9800-9861/? E/ReactNativeJS: 'Unhandled promise rejection', { [ReferenceError: Can't find variable: AsyncStorage]\n      line: 1199,\n      column: 895,\n      sourceURL: '/data/user/0/fi.taskuparkki.app/files/CodePush/a23158e284ff200eda3120985783f8bf574ee5ab2743218be6b2f32caeb5c7bc/CodePush/index.android.bundle' }\n06-07 10:30:51.361 9800-9861/? E/ReactNativeJS: 'Unhandled promise rejection', { [ReferenceError: Can't find variable: AsyncStorage]\n      line: 1199,\n      column: 895,\n      sourceURL: '/data/user/0/fi.taskuparkki.app/files/CodePush/a23158e284ff200eda3120985783f8bf574ee5ab2743218be6b2f32caeb5c7bc/CodePush/index.android.bundle' }\n06-07 10:30:51.362 9800-9862/? E/unknown:ReactNative: console.error: \"Unhandled promise rejection\", {\"line\":1199,\"column\":895,\"sourceURL\":\"/data/user/0/fi.taskuparkki.app/files/CodePush/a23158e284ff200eda3120985783f8bf574ee5ab2743218be6b2f32caeb5c7bc/CodePush/index.android.bundle\"}, stack:\n    @1078:1147\n    exports@1085:66\n    @1078:1018\n    @26:1779\n    u@26:513\n    c@26:877\n    callImmediates@26:3180\n    value@21:3183\n    @21:1516\n    value@21:3009\n    value@21:1486\n    value@21:1094\n06-07 10:30:51.363 9800-9862/? E/unknown:ReactNative: console.error: \"Unhandled promise rejection\", {\"line\":1199,\"column\":895,\"sourceURL\":\"/data/user/0/fi.taskuparkki.app/files/CodePush/a23158e284ff200eda3120985783f8bf574ee5ab2743218be6b2f32caeb5c7bc/CodePush/index.android.bundle\"}, stack:\n    @1078:1147\n    exports@1085:66\n    @1078:1018\n    @26:1779\n    u@26:513\n    c@26:877\n    callImmediates@26:3180\n    value@21:3183\n    @21:1516\n    value@21:3009\n    value@21:1486\n    value@21:1094\n06-07 10:30:51.558 9800-9800/? E/zygote: The String#value field is not present on Android versions >= 6.0\n06-07 10:30:51.878 9800-9861/? E/ReactNativeJS: 'Unhandled promise rejection', { [ReferenceError: Can't find variable: AsyncStorage]\n      line: 1199,\n      column: 895,\n      sourceURL: '/data/user/0/fi.taskuparkki.app/files/CodePush/a23158e284ff200eda3120985783f8bf574ee5ab2743218be6b2f32caeb5c7bc/CodePush/index.android.bundle' }\n06-07 10:30:51.880 9800-9861/? E/ReactNativeJS: 'Unhandled promise rejection', { [ReferenceError: Can't find variable: AsyncStorage]\n      line: 1199,\n      column: 895,\n      sourceURL: '/data/user/0/fi.taskuparkki.app/files/CodePush/a23158e284ff200eda3120985783f8bf574ee5ab2743218be6b2f32caeb5c7bc/CodePush/index.android.bundle' }\n06-07 10:30:51.881 9800-9862/? E/unknown:ReactNative: console.error: \"Unhandled promise rejection\", {\"line\":1199,\"column\":895,\"sourceURL\":\"/data/user/0/fi.taskuparkki.app/files/CodePush/a23158e284ff200eda3120985783f8bf574ee5ab2743218be6b2f32caeb5c7bc/CodePush/index.android.bundle\"}, stack:\n    @1078:1147\n    exports@1085:66\n    @1078:1018\n    @26:1779\n    u@26:513\n    c@26:877\n    callImmediates@26:3180\n    value@21:3183\n    @21:1516\n    value@21:3009\n    value@21:1486\n    value@21:1094\n06-07 10:30:51.882 9800-9862/? E/unknown:ReactNative: console.error: \"Unhandled promise rejection\", {\"line\":1199,\"column\":895,\"sourceURL\":\"/data/user/0/fi.taskuparkki.app/files/CodePush/a23158e284ff200eda3120985783f8bf574ee5ab2743218be6b2f32caeb5c7bc/CodePush/index.android.bundle\"}, stack:\n    @1078:1147\n    exports@1085:66\n    @1078:1018\n    @26:1779\n    u@26:513\n    c@26:877\n    callImmediates@26:3180\n    value@21:3183\n    @21:1516\n    value@21:3009\n    value@21:1486\n    value@21:1094\n```. ",
    "ranvirgorai": "Thanks it working as expected, I Think there is an issue with my code.. ",
    "xclidongbo": "@ruslan-bikkinin  Thanks a lot.  The problem has resolve.\nWithin Info.plist, CFBundleVersion is 3.0.0. . ",
    "Ehesp": "Hey thanks for the reply. Yeah that makes sense - I'll just have to be more careful with the updates which are pushed out!\nCheers. ",
    "Fuhrmann": "Okay, after a few tries I found the problem and a workaround but not a solution. Inside my application I have a backup service that runs in background on Android. I declare a new React Native package:\n```\npackage com.myapp.modules.BackupData;\nimport com.facebook.react.ReactPackage;\nimport com.facebook.react.bridge.NativeModule;\nimport com.facebook.react.bridge.ReactApplicationContext;\nimport com.facebook.react.uimanager.ViewManager;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\npublic class RNMyAppPackage implements ReactPackage {\n    @Override\n    public List createNativeModules(ReactApplicationContext reactContext) {\n        List modules = new ArrayList<>();\n        modules.add(new BackupDataModule(reactContext));\n        return modules;\n    }\n@Override\npublic List<ViewManager> createViewManagers(ReactApplicationContext reactContext) {\n    return Collections.emptyList();\n}\n\n}\n```\nAnd in my BackupModule I start the service:\n```\npackage com.myapp.modules.BackupData;\nimport com.facebook.react.bridge.ReactApplicationContext;\nimport com.facebook.react.bridge.ReactContextBaseJavaModule;\nimport com.facebook.react.bridge.ReactMethod;\npublic class BackupDataModule extends ReactContextBaseJavaModule {\n    public BackupDataModule(ReactApplicationContext reactContext) {\n        super(reactContext);\n    }\n@Override\npublic String getName() {\n    return \"BackupDataModule\";\n}\n\n@ReactMethod\npublic void startService() {\n    BackupDataService.scheduleAlarm(getReactApplicationContext());\n}\n\n}\n``` \nIn my BackupDataService I start a new Intent and set to run inexactRepeating using the AlarmManager in Android:\nIntent intent = new Intent(context, BackupDataReceiver.class);\nintent.setAction(\"com.myapp.backupdata\");\n...\n...\nAlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);\nalarmManager.setInexactRepeating(\n        AlarmManager.RTC_WAKEUP,\n        calendar.getTimeInMillis(),\n        AlarmManager.INTERVAL_HALF_DAY,\n        myIntent\nInside my application javascript code I import my module and start the service:\nimport BackupDataService from 'App/Services/BackupDataService';\n...\n...\n...\nBackupDataService.startService();\n...\n...\nAfter I removed the call to my background service, rebuild the apk, install on the emulator, open the application, restart the aplication, the update was applied correctly, as you can see in the logs:\n2-04 08:47:59.025 8857-8969/com.myapp I/ReactNativeJS: [CodePush] Checking for update.\n12-04 08:47:59.031 8857-8969/com.myapp I/ReactNativeJS: [CodePush] Reporting CodePush update success (v6)\n12-04 08:48:00.114 8857-8969/com.myapp I/ReactNativeJS: [CodePush] App is up to date.\nCould be this error related to the fact that I don't declare my the ReactInstanceHolder as the docs instruct to do so? The docs says:\nhis section is only necessary if you're explicitly launching a React Native instance without an Activity (for example, from within a native push notification receiver). For these situations, CodePush must be told how to find your React Native instance.\nBut using the react-native-navigation package, my MainApplication.java is extending NavigationApplication.java and I don't know how to declare the ReactInstanceHolder.. Hi! You are right. That was the problem. Thanks so much for the help, I'll close since we solved it.. ",
    "AgDude": "@ryanvanderpol are you using another similar solution, or did you go back to using binary updates?. ",
    "jun1st": "Guys, What\u2019s the status?\nI\u2019m facing serials rollbacks when testing code push.  And would like to know how is this going on?. ",
    "Albinzr": "Thanks @ruslan-bikkinin, Adding this to Documentation will be great.. ",
    "sercand": "@ruslan-bikkinin Thaks for the quick reply. We really need this using because app starting time decreases drastically when using unbundle command. It took 4 seconds to loading js with bundle command vs 1 second. . ",
    "alen252": "@sergey-akhalkov I execute \"npm config set strict-ssl false\". But this don't solve my problem.. @sergey-akhalkov Yes,I'm sure i don't set proxy.. @scottbommarito code-push version is 2.1.4 I don't have code-push-cli command. I try login via https://github.com/Microsoft/appcenter-cli. I login success.But code-push login still failed.. @sergey-akhalkov \nAfter 1-5, there is no change. The error still happen.. @sergey-akhalkov  I begin to user AppCenter CLI.But when i run \"appcenter codepush release-react\" command.I got a error:\n\nI feel it is hard to user code push in China.. ",
    "Titozzz": "Nevermind, this is true with https://github.com/wix/react-native-navigation but not original react-native. Hello, any ETA on this ?. I'll test it as soon as React-native releases a new version compatible with Gradle 3.X, it was merged a few days ago. ..Nvm gonna test it right now. It worked great when I tested it, but I rolledback RN, so I removed it too. This should get merged tho. I'm using 0.53 without any issues. ",
    "iyegoroff": "Hi @max-mironov. 1 - agreed about renaming, that was just a minimal patch. 2 - on Android everything works fine, I mentioned my iOS configuration only to provide additional info, didn't check on any other iOS devices.. Hi @sergey-akhalkov \n\neverything works fine w/o using the code-signing feature?\nyes\nhave you used the --output-dir parameter while making releases\nno\nCould you please also try to make an release using the old code-push-cli\nSo appcenter is not yet supported officially?. Don't have access to computer right now. Here are credentials for my dummy appcenter project s2382283@mvrht.net Qwertyui \nApp name is CodePushIos, deployment is Staging\nLatest bundle is signed and first one is not signed. \n",
    "imdadahad": "My mistake, I never defined the necessary dependencies in the Podfile.. ",
    "tirrorex": "Is there anything to do in order to overwritte this once the build is in production ?\nThe only solution i found was to clear the production build since we had no build to rollback to.. Will look into that, thanks for your time mate. ",
    "bhgames": "So theissue was I was using a deployment key of a deployment I must have deleted earlier. You can see details about this in the post above. Thanks for reading!. ",
    "kdong007": "btw, when I do pod install, it has this log Installing React (0.11.0), but Im using React 16.2?. @sergey-akhalkov  that fix works. Thanks.. ",
    "michaelmerrill": "I'm having this issue as well. I have the same environment as @kdong007 above.. Since we are using React 16.2, I wonder if this has anything to do with react removing Haste. https://reactjs.org/blog/2017/12/15/improving-the-repository-infrastructure.html#removing-the-custom-module-system. ",
    "tvhieuit": "\nthis issue still appear.\nBut I added \npod 'CodePush', :path => '../node_modules/react-native-code-push'\npod 'React', :path => '../node_modules/react-native'\nSo my issue resolved\n. ",
    "futurechallenger": "I solved this by removing all pod stuff and reinstall it. Here's my podfile:\nNOTE: \n1. Maybe you dont need the boost-for-react-native pod.\n2. GLog pod's name maybe capitalised maybe not, that's depends on react native doc here.\n```\ntarget 'MyApp' do\n# Your 'node_modules' directory is probably in the root of your project,\n  # but if not, adjust the :path accordingly\n  pod 'React', :path => '../node_modules/react-native', :subspecs => [\n  'Core',\n  'CxxBridge', # Include this for RN >= 0.47\n  'DevSupport', # Include this to enable In-App Devmenu if RN >= 0.43\n  'RCTText',\n  'RCTNetwork',\n  'RCTWebSocket', # needed for debugging\n  # Add any other subspecs you want to use in your project\n  ]\n  # Explicitly include Yoga if you are using RN >= 0.42.0\n  pod 'yoga', :path => '../node_modules/react-native/ReactCommon/yoga'\n# Third party deps podspec link\n  pod 'DoubleConversion', :podspec => '../node_modules/react-native/third-party-podspecs/DoubleConversion.podspec'\n  pod 'glog', :podspec => '../node_modules/react-native/third-party-podspecs/glog.podspec'\n  pod 'boost-for-react-native', :podspec => '../node_modules/react-native/third-party-podspecs/boost-for-react-native.podspec'\n  pod 'Folly', :podspec => '../node_modules/react-native/third-party-podspecs/Folly.podspec'\nCode Push\npod 'CodePush', :path => '../node_modules/react-native-code-push', :subspecs => ['Core', 'JWT', 'Base64', 'SSZipArchive']\nend\n```. ",
    "RobertPaul01": "Yeah I think adding logging would help here. I added a log in my PR. If there's anything additional you want me to log here, I can add it to my PR.. ",
    "wangbingqiong": "I fixed it by evaluating variable this._subscribableSubscriptions on line 33 on react native file project/node_modules/react-native/Libraries/Components/Subscribable.js\nChanging this:\nthis._subscribableSubscriptions.forEach(\nTo this:\nthis._subscribableSubscriptions && this._subscribableSubscriptions.forEach(. ",
    "quy1403": "@ruslan-bikkinin please help me, thanks. hi @ruslan-bikkinin \nthanks for you reply. \n1. (First of all, please make sure you have configured CodePush SDK on native side as described here: #1088 (comment).) -> I Did it correctly.\nmy JS Code\n*WHen the app starts\n ```\n startAppWithScreen(opts) {\n        if (this._iconsLoaded) {\n            this.startApp(opts)\n        } else {\n            iconsLoaded\n                .then(() => {\n                    if(!DEV)\n                        codePush.sync({\n                            installMode: codePush.InstallMode.ON_NEXT_RESTART\n                        }, this.codePushStatusDidChange.bind(this));\n                this._iconsLoaded = true;\n                this.startApp(opts);\n            }).catch(error => {\n            console.error(error)\n        })\n    }\n}\n\n```\n****my code push handle callback\ncodePushStatusDidChange(syncStatus) {\n        switch (syncStatus) {\n            case codePush.SyncStatus.CHECKING_FOR_UPDATE:\n                cc.log(\"Checking for update.\");\n                break;\n            case codePush.SyncStatus.DOWNLOADING_PACKAGE:\n                cc.log(\"Downloading package.\");\n                break;\n            case codePush.SyncStatus.AWAITING_USER_ACTION:\n                cc.log(\"Awaiting user action.\");\n                break;\n            case codePush.SyncStatus.INSTALLING_UPDATE:\n                cc.log(\"Installing update.\");\n                break;\n            case codePush.SyncStatus.UP_TO_DATE:\n                cc.log(\"App up to date.\");\n                break;\n            case codePush.SyncStatus.UPDATE_IGNORED:\n                cc.log(\"Update cancelled by user.\");\n                break;\n            case codePush.SyncStatus.UPDATE_INSTALLED:\n                cc.log(\"Update installed and will be applied on restart.\");\n                break;\n            case codePush.SyncStatus.UNKNOWN_ERROR:\n                cc.log(\"An unknown error occurred.\");\n                break;\n        }\n    }\nI build release apk and install it on xperia z5, and get logcat from android studio. LOG here\n_### _Checking for update.\n12-27 16:30:54.994 8296-8318/? I/ReactNativeJS: [CodePush] Reporting binary update (1.0)\n12-27 16:30:56.149 8296-8318/? I/ReactNativeJS: Downloading package.\n12-27 16:30:57.037 8296-8318/? I/ReactNativeJS: Installing update.\n12-27 16:30:57.068 8296-8318/? I/ReactNativeJS: [CodePush] An error has occurred : value@index.android.bundle:370:2498\n[native code]\ns@index.android.bundle:805:7018__\nI think codepush downloaded package successfully, but can not install update. If I kill my app and reopen it. The update was installed and every thing worked as I expect. \nNOTE: on IOS, codepush work perfectly\nthanks you. @geof90 @lostintangent @max-mironov...  please help me, thanks. ",
    "LiuYibin": "I import youor lib not via react-native-code-push, and no error any more.. \n\n\n\nas the pictures above, The error will disappear after I delete the code in your CodePush.podspec file and import the SSZipArchive lib dividually.\ns.subspec 'SSZipArchive' do |ss|\n    ss.source_files = 'ios/CodePush/SSZipArchive/*.{h,m}', 'ios/CodePush/SSZipArchive/aes/*.{h,c}', 'ios/CodePush/SSZipArchive/minizip/*.{h,c}'\n    ss.private_header_files = 'ios/CodePush/SSZipArchive/*.h', 'ios/CodePush/SSZipArchive/aes/*.h', 'ios/CodePush/SSZipArchive/minizip/*.h'\n  end. YES.  The other npm package I import into RN project depend on SSZipArchive, too. But before I import your package,  every thing is OK. I found the source code of SSZipArchive imported via your CodePush.podspec file is not the latest code comparing with  its official latest version. Thank you very much. My issues are resolved by the steps you told.. ",
    "prashantvv": "What I did here is I developed a react native app, git hub it & connect the repo to codepush than start the building that by following basic intructions. As react native uses node_modules as dependencies (which are not uploaded on github) & I think codepush download that dependencies during its build process. Now my question here is that I edit some of those dependencies inside node modules, some are deprecated or not suits my react native version while some are UI changes in those dependencies which are local to my pc. The code push build system downloads fresh dependencies  (as per the build logs) but I dont need those fresh ones, I need the local edited dependencies. How can I achieve this ?\nSecondly, if I put some node_modules on git and some not, will the code push build system will download only the missing modules or all of them that are in pacakge.json?\nTHANKS. hello, let me do some more testing on it & then we'll close the issue. ",
    "niros001": "Sorry for the big delay,\nFor example i have in my code config file with app version parameter with value of '1.0'.\nSteps to Reproduce:\n1. Change the value of app version to '1.1'.\n2. Update the app with code push.\n3. Change the value of app version to '1.2'.\n4. Update the app with code push.\nExpected Behaviour:\nApp version should change to '1.2'.\nExpected Behaviour:\nApp version is changed to '1.2', yet, after restarting the app it rolls back to '1.1'.\n. 1. \u2018updateApp(){\n    ToastAndroid.show('Checking for update.', ToastAndroid.SHORT);\n    codePush.sync({installMode: codePush.InstallMode.IMMEDIATE}).then((isUpdateAvailable)=> {\n        const msg = isUpdateAvailable ? \"updating...\" : \"App is up to date!\";\n        ToastAndroid.show(msg.toString(), ToastAndroid.SHORT);\n    });\n}\u2019\n2. Android\n3. Release\n4. Real device\n5. Any changes, for this case only string of app version (In app folder - not native). ",
    "showtan": "@sergey-akhalkov \nversion:\n\"react\": \"^16.0.0-alpha.12\",\n \"react-native\": \"^0.46.4\",\n\"react-native-code-push\": \"^5.1.3-beta\",\nMy settings:\nMainApplication.java:\nimport com.microsoft.codepush.react.CodePush;\n@Override\n    protected String getJSBundleFile() {\n      return CodePush.getJSBundleFile();\n    }\nnew CodePush(BuildConfig.CODEPUSH_KEY, MainApplication.this, BuildConfig.DEBUG),\nbuild.gradle:\nbuildTypes {\n        release {\n            signingConfig signingConfigs.release\n            minifyEnabled enableProguardInReleaseBuilds\n            proguardFiles getDefaultProguardFile(\"proguard-android.txt\"), \"proguard-rules.pro\"\n            buildConfigField \"String\", \"CODEPUSH_KEY\", '\"xxxxxxxxxxxxxxx\"'\n        }\n        releaseStaging {\n            signingConfig signingConfigs.release\n            buildConfigField \"String\", \"CODEPUSH_KEY\", '\"xxxxxxxxxxxxxxx\"'\n        }\n        debug {\n            buildConfigField \"String\", \"CODEPUSH_KEY\", '\"xxxxxxxxxxxxxxx\"'\n        }\n    }\ncompile project(':react-native-code-push')\nsettings.gradle:\ninclude ':react-native-code-push'\nproject(':react-native-code-push').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-code-push/android/app')\n\u4f60\u5e2e\u6211\u770b\u770b\uff0c\u5c11\u4e86\u4ec0\u4e48\nYou help me to see, what's less\uff1f thanks!. @sergey-akhalkov\nAlso\nbuild.gradle:\napply from: \"../../node_modules/react-native-code-push/android/codepush.gradle\". ",
    "EthanChouTW": "[CodePush] Sync already in progress.\n[CodePush] Checking for update.\n[CodePush] Awaiting user action.\n[CodePush] User cancelled the update.\n@ruslan-bikkinin \nlooks like it's really something on remote need to update, but the code base is the same\n. ",
    "GideonLiu": "Hi @sergey-akhalkov thanks for helping me to solve my problem.\nI can ensure the JS bundle's name is same. \nI'm using different app name for Android and iOS, so the deployments is different for releasing updates for Android and iOS.\nCodePush updated successfully when my app is first installed, but then I uninstall it and install it again , my app will update failed . It's happen only for iOS. Android does not has this problem.\n. @sergey-akhalkov , I downloaded blobUrl as zip and unziped it , the package contents have main.jsbundle file inside. But I download the sandbox from my iPhone ,and the package  contents don't have main.jsbundle file inside \n\n\n\n. Hi @sergey-akhalkov \nI have renamed your RN folder as CodePush,but it's doesn't work for me.\nI download the sandbox from my iPhone ,and the package contents don't have main.jsbundle file inside\n\n\n\n\n\n. @sergey-akhalkov \nI think it maybe \"incremental updating\"(\u589e\u91cf\u66f4\u65b0) make it error, because it never happened first install in iPhone,but will happened when I uninstall an reinstall the app many times later.\n\uff08\u5220\u9664app\u7136\u540e\u91cd\u65b0\u5b89\u88c5\u51e0\u6b21\u540e\uff0c\u4f1a\u53d1\u751f\u8fd9\u4e2a\u95ee\u9898\uff0c\u6240\u4ee5\u6211\u8ba4\u4e3a\u662f\u589e\u91cf\u66f4\u65b0\u51fa\u73b0\u4e86\u9519\u8bef\uff09. @sergey-akhalkov thanks a lot,if you solve this issue,please let me know.. I find the reason. I init the ReactNative page twice ,so it will download the .zip file twice.Now I init once ,it will not roll back.. ",
    "DaddyWarbucks": "Is there any update on this?\nI am receiving the same error. A codepush release works on the simulator, but causes the app on a device to crash and never be able to restart the app once a release is recognized.\nAfter investigating the installation I tried react-native link again and received this output\nScanning 762 folders for symlinks in ...\nrnpm-install info Android module react-native-code-push is already linked\nrnpm-install info iOS module react-native-code-push is already linked\nRunning ios postlink script\n\"CodePush.h\" header already imported.\n\"jsCodeLocation\" already pointing to \"[CodePush bundleURL]\".\nCould not determine correct xcode proj path to retrieve related plist file, there are multiple xcodeproj under the solution.\n\"CodePushDeploymentKey\" already specified in the plist file.\nRunning android postlink script\n\"getJSBundleFile\" is already overridden\n\"codepush.gradle\" is already linked in the build definition\nRN version: 0.44.1\nCodePush version: 5.2.1. ",
    "brunoti": "The problem in my case was that ios/Pods/Pods.xcodeproj was there after some tests that I made. After removing it, everything works. Maybe a workaround would be moving it temporarily to other place and them moving it back to the correct place. \n\nThat glob selection is not considering situations with CocoaPods.. ",
    "abrel": "Hi Sergey, Ruslan,\nActually it happens on my dev env where to be fair I do not set --targetBinaryVersion but I do not think it can be due to something like incompatible bundles or related to native code:\nBasically I deploy in dev using my CI. The process is quite straightforward:\n\nPass tests (code rules, unit, e2e)\nupdate code-push for dev env\nDeploy ios build through testflight\n\nThus, in my code push history (in dev) I always have a code push version up to date with what I release in dev (as I could not care less to what happen to my previous dev versions due to the code push update). So far so good.\nThen if i add a minor change and release it manually without going though the CI (Use case: I test the code push update in dev when I want to quickly patch a bug (JS only) in production to make sure nothing bad will happen). Then I get the update in dev and it starts messing with the tabBar icon styles\nI can confirm that both the original build (released from the CI) and the code push update (that comes from my mac) have been bundled with the same RN version i.e. 0.52\n. ",
    "mark-friedman": "Thanks, @ruslan-bikkinin.  The current react-native-code-push README claims that v5.1 will also work with React Native v0.46-v0.52, should I try that or is it really that only react-native-code-push v4.1 that will work with React Native v0.46.3?. ",
    "cq0702": "@di9it I have the same issue.Do you have resolved it?. Yes.I just used the related path to play the music.\nIn rootView.js\ncomponentDidMount() {\n//play background music\nplayer.then((bg_music) => {\n  bg_music.play()\n})\n//check update\ncodePush.checkForUpdate()\n            .then((update) => {\n                if (!update) {\n                    console.log(\"The app is up to date!\");\n                } else {\n                    codePush.sync(\n                        null,\n                        (status)=>{\n                            switch (status) {\n                                case codePush.SyncStatus.CHECKING_FOR_UPDATE:\n                                    console.log('codePush.SyncStatus.CHECKING_FOR_UPDATE');\n                                    break;\n                                case codePush.SyncStatus.AWAITING_USER_ACTION:\n                                    console.log('codePush.SyncStatus.AWAITING_USER_ACTION');\n                                    break;\n                                case codePush.SyncStatus.DOWNLOADING_PACKAGE:\n                                    console.log('codePush.SyncStatus.DOWNLOADING_PACKAGE');\n                                    break;\n                                case codePush.SyncStatus.INSTALLING_UPDATE:\n                                    console.log('codePush.SyncStatus.INSTALLING_UPDATE');\n                                    break;\n                                case codePush.SyncStatus.UP_TO_DATE:\n                                    console.log('codePush.SyncStatus.UP_TO_DATE');\n                                    break;\n                                case codePush.SyncStatus.UPDATE_IGNORED:\n                                    console.log('codePush.SyncStatus.UPDATE_IGNORED');\n                                    break;\n                                case codePush.SyncStatus.UPDATE_INSTALLED:\n                                    console.log('codePush.SyncStatus.UPDATE_INSTALLED');\n                                    break;\n                                case codePush.SyncStatus.SYNC_IN_PROGRESS:\n                                    console.log('codePush.SyncStatus.SYNC_IN_PROGRESS');\n                                    break;\n                                case codePush.SyncStatus.UNKNOWN_ERROR:\n                                    console.log('codePush.SyncStatus.UNKNOWN_ERROR');\n                                    break;\n                            }\n                        },\n                        (progress) => {\n                            console.log(progress.receivedBytes + \" of \" + progress.totalBytes + \" received.\");\n                        }\n                    );\n                }\n            });\n}\nand I use this commend:\ncode-push release-react xx-android android  --t 1.0.0 --dev false --d Production --des \"check test\" --m true. ",
    "HAMPLENI": "@max-mironov \nTried it with both my config and your config.  Still getting the error.\nAwesomeProject.zip. @max-mironov \nWhen I execute react-native run-android, the app red boxes with an error:\n\nI didn't make the changes to native code to setup CodePush for Android or iOS but I don't think it is necessary for this issue.. ",
    "bradleat": "@iTOYS with your suggestion we no longer get types, the typings files should not lie and say that there is a default export when, in fact, there is none in the CodePush.js file.. ",
    "wuyingtong": "Thank you for your answer, but can not help me solve the problem. Thank you very much. I used code-push to build my own service. I have a colleague computer to use. I should configure the environment. I'll check it again.\n. ",
    "marcmo": "what kind of clarifications can I provide?. thanks for responding @sergey-akhalkov , I checked and my setup is almost exactly the same, only the name I use for my getJSBundleFile is different:\n```\npublic class MainApplication extends NavigationApplication implements ReactInstanceHolder {\n@Override\npublic boolean isDebug() {\n    return BuildConfig.DEBUG;\n}\n\n@Nullable\n@Override\npublic List<ReactPackage> createAdditionalReactPackages() {\n    return getReactPackages();\n}\n\n@NonNull\nprotected List<ReactPackage> getReactPackages() {\n    return Arrays.<ReactPackage>asList(\n            new CodePush(getResources().getString(R.string.reactNativeCodePush_androidDeploymentKey), getApplicationContext(), BuildConfig.DEBUG)\n    );\n}\n\n@Override\npublic void onCreate() {\n    super.onCreate();\n    SoLoader.init(this, /* native exopackage */ false);\n}\n\n@Override\npublic String getJSBundleFile() {\n    return CodePush.getJSBundleFile();\n}\n\n@Override\npublic ReactInstanceManager getReactInstanceManager() {\n    return getReactNativeHost().getReactInstanceManager();\n}\n\n}\n``\nI had a lot of different issues and was able to resolve them but now what baffles me is that my setup works perfectly fine when running during development, but the error shows up in the installed release version.\n(this error: **Module AppRegistry is not a registered callable module (calling runApplication)**). are you sure about the call to CodePush? For me it seemsCodePush` is a function that takes an optional config as parameter and when called returns a function that takes the screen as parameter.\nthis is how I use codepush:\n```\n// module registration\nexport const CodePushConfig = {\n  checkFrequency: CodePush.CheckFrequency.ON_APP_RESUME,\n};\nexport const registerScreens = (store: Redux.Store, provider) => {\n  Navigation.registerComponent('xyz.IntroScreen', () => IntroScreen, store, provider);\n  ...\n  Navigation.registerComponent('xyz.DevOpts', () => CodePush(CodePushConfig)(DevOpts), store, provider);\n  ...\n};\n// in DevOpts:\ncomponentWillMount() {\n  CodePush.sync({\n  updateDialog: CodePush.DEFAULT_UPDATE_DIALOG,\n  installMode: CodePush.InstallMode.IMMEDIATE,\n  deploymentKey: Platform.select({\n    android: '',\n    ios: '',\n    }),\n  });\n}\nI have to admit I don't yet understand the RN app lifecycle implications on codepush. e.g. if it is possible/advisable to ask for a codepush sync like this:\nAppState.addEventListener('change', handleAppStateChange);\nconst handleAppStateChange = (nextAppState: AppStateStatus) => {\n  switch (nextAppState) {\n    case 'active':\n      CodePush.sync(AppConfig.codePushConfig);\n      break;\n    default:\n  }\n};\n```. @sergey-akhalkov I will try to prepare a minimal app version but that will take me some time...\nI was hoping you already experienced situations where code-push was working when running in development mode, but not in an release-build. That indicates to me that all my setup can actually work, my keys are correct and my configuration is OK.\nbut currently I'm really lost on this error:\nModule AppRegistry is not a registered callable module (calling runApplication)\nanyway...thanks for looking into this. I will try to setup a sharable example to demonstrate this behavior.. ok..I prepared a repository (android only) that can demonstrate this behavior:\nhttps://github.com/marcmo/code-push-minimal\nI would be grateful if you could take a look at this @sergey-akhalkov \nthe README has instructions on how to build and how to trigger codepush.\nI guess you will have no problems with the codepush keys...keystore with everything that is needed is also in the repository.. @ruslan-bikkinin let me know if you need anything else from my side...I'm really stuck on this one. thanks so much @ruslan-bikkinin and @sergey-akhalkov ! I just verified that using ON_NEXT_RESTART did the trick!\nfeel free to close the issue or leave it open until the IMMEDIATE option also works.. ",
    "ericketts": "fwiw I believe I've somewhat nailed down why this is a problem in wix/react-native-navigation#2331 and a hacky \"fix\", but I'm afraid I don't yet have a solid generalized solution figured out \u2639\ufe0f. fwiw the PR I submitted that's linked above seems to fix this bug for me... I'm a bit worried about potential race condition but so far I have yet to see one arise. \nAlso I doubt it will be merged since its for V1 and they've said they're not accepting V1 PRs any more, but I wanted to get it out there for others that are having this issue to fork & patch themselves without having to spend the time I did figuring out what was going wrong.. exciting news, despite the announcement that V1 is closed for PRs wix actually merged my fix PR, so @sergey-akhalkov (sorry if you're the wrong person to tag) you might be able to close this issue?\nedit: cc @ruslan-bikkinin . ",
    "thibautguedou3": "Hi @max-mironov yes I've just downgraded code-push and in fact the problem goes away. We had updated code push using yarn. No changes where needed in our source code normaly. Any thoughts on what could have happened?. ",
    "infostreams": "I'm just commenting to say that this issue is probably real. \nMy app (react-navigation with a tab navigator, code-push version 5.2.1) would take up to 10 seconds before it became interactive. Basically, I would start the app, have to wait about 10 seconds, and only then did anything respond to user input. My app was completely unresponsive for that period of time. After these 10 seconds, code-push (whatever it was doing) was done, and I could use the app normally at normal speeds. If I disabled/removed code-push the app would be interactive almost instantaneously. I am using codePush.CheckFrequency.ON_APP_RESUME, but the same happened with ON_APP_START.\nHowever, if I downgrade to 5.1.3-beta as @thibautguedou3 did, the issue disappears. My app becomes interactive almost instantaneously.\nMy environment is exactly identical to thibautguedou3's:\nreact-native-code-push version: 5.2.1\nreact-native version: 0.51.0\n(react-navigation: 1.0.0-beta.21)\niOS version: 11.2\nDoes this reproduce on a debug build or release build? No\nDoes this reproduce on a simulator, or only on a physical device? Only on physical device, not on simulator. Possibly related: react-native-code-push v5.1.3-beta depends on code-push 2.0.4, while the older one depends on code-push 1.11.2-beta. Perhaps there's a breaking change or other big change in behaviour between code-push 1.11.2 and 2.0? Just guessing.. ",
    "mdsaddam": "Thanks @max-mironov \nAbove mentioned example code is working good :+1: . @iTOYS \nYeah I did wrap App class with code push, same code working in iOS. Thanks @iTOYS \nIssue was due to Reactotron (https://github.com/infinitered/reactotron/blob/master/docs/quick-start-react-native.md) integration. It was a dev dependency, for now we've removed in our release, it's working fine now. . ",
    "leoskyrocker": "Thank you. I'm assuming that means this behavior (ability to use these methods standalone without wrapping it with the convenience HOC) is intended and will be kept in future updates.\nClosing since my question is answered. You guys are quick and awesome! :). ",
    "rodrigoalmeidaee": "We have this issue reported in our app too both in Sentry and Crashlytics, and likewise haven't been able to reproduce it ourselves.\nOur current 7-day metrics for this crash indicate that out of our about 2k weekly active users, 40 users see this crash every week (they're not the same week after week BTW), so roughly 2% of our userbase is affected. It is not a major issue for us, but it is also not rare enough that it doesn't produce some discomfort.\nWe don't know what the root cause is, but are considering working on a fix to at least prevent CodePush from crashing the app when this happens.. Hi @Zakeelm ,\nWe recently got our app rejected by Apple in a scenario similar to that of @kissmypiss (however I do want to state that we had about 15 previous releases, with code push enabled, approved by apple). Apple complained about 2.5.2 guideline and section 3.3.2 agreement. We replied to them and they responded to us pointing to codepush explicitly, here is the message exchange for reference:\nOur response:\n\nHello,\nThanks for contacting us, but we're unsure on how to proceed about making our app compliant with the guidelines, since we haven't included any major changes since our last approved release.\nRegarding the Guideline 2.5.2, our app is built using React Native (currently we're using v0.55) and we use CodePush to deploy small Javascript bug fixes (we haven't updated or changed anything regarding our CodePush usage in the latest release). Our only native code changes were adding a handle to the applicationDidReceiveMemoryWarning event and updating our Intercom SDK version (from 4 to 5). We also have removed an unused UXCam dependency. The third-party libraries (other than the React and React Native dependencies) we're using as of this latest release are:\nAmplitude Analytics\nCrashlytics\nMixpanel\nOneSignal\nSentry\nCodePush\nLottie\nRealm\nReact Native Permissions\nRN File System\nRN Intercom\nRN Image Resizer\nRN Version Check\nRN Linear Gradient\nRN Fetch Blob\nRN Vector Icons\nRN Image Picker\nRN Background Timer\nRN Splashscreen\nRN Zip Archive\nRN Document Picker\nRN Camera\nNone of these are new dependencies, however. And since our CodePush usage adheres to the guidelines for downloading interpreted code (the code is downloaded and run by the JavascriptCore, and is not used to enable new features or functionality) we're not sure how we're violating this guideline, and would be grateful if some more information could be provided to help us address this issue.\nThanks\n\nTheir follow up:\n\nHello,\nThank you for your attention to this matter. When reviewing your app, we found a CodePush based download of several megabytes of Javascript code. This included what appears to be major feature code paths. Even if these are currently identical to in-app-bundle content, the sheer breadth of capability is a concern. It would be appropriate to revise the app\u2019s mechanisms for any sort of dynamic code modification or replacement to fall more clearly within the lines you have stated. We look forward to reviewing your revised app.\nBest regards,\nApp Store Review\n\nWe are not sure if, as our app got bigger, it ended up triggering some automatic alarm over there, or if we got unlucky and our app was reviewed by someone less prone to allow code push to be used. We will remove codepush from our next release and see how it goes, and may try to reintroduce it in the future as well.\nOne particular thing that seems hard to deal with is they pointing out that the \"sheer breadth of capability is a concern\". It is actually true that we could basically wipe out the entire app and push something entirely different there if we wanted. Apple does actually have to trust us that we indeed use it only for bugfixes. There isn't a structured way to plug code push in that would, by design, ensure that only bugfixes and small changes can be shipped, right?\nFor now, just posting here in case others are having similar issues \ud83d\ude42 . Just FYI, Apple approved our app after we removed codepush. The total delay was of about 2 1/2 weeks (this includes the time they took to respond to us on why they rejected our app, since their initial assessment was quite vague, time to strip out codepush out of the app, and time for them to approve the revised version without codepush, which took much longer than usual due to the previous version having been rejected).\nWe still think the rejection was an isolated incident due to the large number of previous releases which had codepush on them and were approved, but we're not sure we will bring codepush back, since, if rejected again, it could introduce another significant delay in the release process as a whole.. ",
    "erandagan": "Seeing this on a production app as well. As suggested before, CodePush should probably fallback to the original bundle rather than crashing.. ",
    "jchirik": "Im getting this as well. please fix!. ",
    "Victorams": "Also happening here, however it seems to only occur in a specific device (Twist S520).\nPositivo Twist (S520), Android 6.0\njava.lang.RuntimeException: \n  at android.app.ActivityThread.performLaunchActivity (ActivityThread.java:2583)\n  at android.app.ActivityThread.handleLaunchActivity (ActivityThread.java:2665)\n  at android.app.ActivityThread.-wrap11 (ActivityThread.java)\n  at android.app.ActivityThread$H.handleMessage (ActivityThread.java:1499)\n  at android.os.Handler.dispatchMessage (Handler.java:111)\n  at android.os.Looper.loop (Looper.java:207)\n  at android.app.ActivityThread.main (ActivityThread.java:5765)\n  at java.lang.reflect.Method.invoke (Native Method)\n  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run (ZygoteInit.java:789)\n  at com.android.internal.os.ZygoteInit.main (ZygoteInit.java:679)\nCaused by: com.microsoft.codepush.react.CodePushMalformedDataException: \n  at com.microsoft.codepush.react.CodePushUtils.getJsonObjectFromFile (CodePushUtils.java:198)\n  at com.microsoft.codepush.react.CodePushUpdateManager.getCurrentPackageInfo (CodePushUpdateManager.java:55)\n  at com.microsoft.codepush.react.CodePushUpdateManager.getCurrentPackageHash (CodePushUpdateManager.java:105)\n  at com.microsoft.codepush.react.CodePushUpdateManager.getCurrentPackage (CodePushUpdateManager.java:115)\n  at com.microsoft.codepush.react.CodePush.initializeUpdateAfterRestart (CodePush.java:254)\n  at com.microsoft.codepush.react.CodePush.<init> (CodePush.java:82)\n  at com.educarebox.app.MainApplication$1.getPackages (MainApplication.java:47)\n  at com.facebook.react.ReactNativeHost.createReactInstanceManager (ReactNativeHost.java:81)\n  at com.facebook.react.ReactNativeHost.getReactInstanceManager (ReactNativeHost.java:45)\n  at com.facebook.react.ReactActivityDelegate.loadApp (ReactActivityDelegate.java:88)\n  at com.facebook.react.ReactActivityDelegate.onCreate (ReactActivityDelegate.java:77)\n  at com.facebook.react.ReactActivity.onCreate (ReactActivity.java:54)\n  at android.app.Activity.performCreate (Activity.java:6301)\n  at android.app.Instrumentation.callActivityOnCreate (Instrumentation.java:1113)\n  at android.app.ActivityThread.performLaunchActivity (ActivityThread.java:2530)\nCaused by: org.json.JSONException: \n  at org.json.JSONTokener.syntaxError (JSONTokener.java:449)\n  at org.json.JSONTokener.nextValue (JSONTokener.java:97)\n  at org.json.JSONObject.<init> (JSONObject.java:156)\n  at org.json.JSONObject.<init> (JSONObject.java:173)\n  at com.microsoft.codepush.react.CodePushUtils.getJsonObjectFromFile (CodePushUtils.java:195). ",
    "tbergq": "We also see this on Samsung Galaxy S9 and Sony Xperia X compact. ",
    "eggli": "This really bugs people here, which make CodePush is unusable on any production environment, yet the migration to AppCenter already took one year and we haven't seen any glance of a trace of CodePush being migrated, looks like CodePush has been overlooked for a while.\nAnyway, we've made a workaround for this unrecoverable fatal error here, the whole idea is to mimic the behavior of CodePush.clearUpdates() and remove all corrupted files so you can create a CodePush instance safely later.\nIn your MainApplication.java or whever you manage ReactNativeInstance, \n```java\n@Override\nprotected List getPackages() {\nCodePush codePush;\ntry {\n      codePush = new CodePush(BuildConfig.CODEPUSH_KEY, getApplicationContext(), BuildConfig.DEBUG);\n  } catch (Exception e) {\n      // Reset code push update files when update files corrupted.\n      // The following code is a mimic of CodePush.clearUpdates()\n      // Since we already has exception in CodePush constructor,\n      // we breakdown the constructor here and clear all code push\n      // related files step by step without read the corrupted file itself.\n      Context mContext = getApplicationContext();\n      CodePushUpdateManager mUpdateManager = new CodePushUpdateManager(mContext.getFilesDir().getAbsolutePath());\n      SettingsManager mSettingsManager = new SettingsManager(mContext);\n      mUpdateManager.clearUpdates();\n      mSettingsManager.removeFailedUpdates();\n      mSettingsManager.removePendingUpdate();\n      // After code push update files being removed, we can build a new code push instance safely\n      codePush = new CodePush(BuildConfig.CODEPUSH_KEY, getApplicationContext(), BuildConfig.DEBUG);    \n  }\n  return Arrays.asList(    \n    codePush\n    //...your other react native packages\n  );\n}\n```\nIf you are a careful person, you might need a way to reproduce this exception, the easiest way to do this is upload a 0 bytes codepush.json into /data/data/<your app package name>/files/CodePush via Android Studio or adb on a CodePushed device and you will see this crash when you launch that app, once you applied the workaround above, the corrupted file shall be removed after launch and the whole CodePush update flow will be triggered again since all file has been removed.. > Hi @eggli,\n\nThanks for the workaround, we appreciate it!\nWe'll try to reproduce it as you recommended and try to create a workaround in our package until we find out why codepush.json can become empty.\n\nI've checked codes that read/writes codepush.json, basically, I don't see anything wrong there, but in the world of Android, there're tons of hardware and OS pitfalls everywhere, in a summary, never trust your device, we are seeing this exception on some decent device like Samsung Galaxy S8+ aswell, it's very hard to figure out what's the root cause, yet we can make an assumption that users might kill the app during the writing process, it's a very common user behavior since people DO wrongly opened the app and killed it right away and the codepush.json might become empty.\nYet personally I've reproduced this empty file situation sometimes with this method, but it's not 100% reproducible.. ",
    "pyr0hu": "Hi @ruslan-bikkinin , thanks for the answer. Yes, this clear things up, I was just wondering if there was any way to change the config of the automatic syncing in run-time, but after checking out the source of the codePush decorator, I can tweak my setup for dynamic deployment :) (It's even easier than I tought :o ). ",
    "ghyzx": "\n. ",
    "annakocheshkova": "Hi @zhaohailog, thank you for reaching us. \nFirst of all, though this is unlikely, make sure that you have not been reinstalling the app on your device before releasing an update.\nThe common scenario is that you have released a wrong update. Could you please specify the command you used to release an update?\nCould you also provide your release history via code-push deployment history <appName> <deploymentName> and specify the version of the app you are trying to update? You can find it in Info.pslist on iOS and in build.gradle on android.\nhandleBinaryVersionMismatch you are speaking about can be used in a way that you specify a callback to be used when the mismatch has occurred, so that you can download the latest version of the app from the store or do something else you want.. Fixed.. Please use default naming structure here: \"Creates an instance of {@link ...} ...\". Do we really need this (<code>\"\"</code>) clarification?. Start parameter comment from lower case letter here and below.. Comment or no blank line.. @ruslan-bikkinin I think just \"empty string\" is enough for understanding. No need to clutter the comment here. Yes, this is required for gradle 2.2.3 not to throw a merge error.. @sergey-akhalkov, signature of the method has changed to take a String with package hash.. @sergey-akhalkov, have added the explanation.. @ruslan-bikkinin Didn't quite get the point. What do you mean by part of the Context?. @ruslan-bikkinin Well, Gson method does.. @ruslan-bikkinin Sure, this sounds good.. @ruslan-bikkinin Have replaced logAssert with error. Don't think this case is big enough for throwing an exception.. @ruslan-bikkinin Have added AppCenterLog.error(). Don't think this case is big enough for throwing an exception.. @ruslan-bikkinin Do you suggest passing not the Context, but shared preferences instance? This is not a good practice to do that, AFAIK.  Every settings manager I've seen is initialized that way.. @sergey-akhalkov This is just a note on interface use case. Removed.. @ruslan-bikkinin Because we are using it already in other project, look at the UpdateManager, for instance. @sergey-akhalkov This should happen in a callback. Didn't quite get why we should rename the method itself. I think this and below should be final constants, as done in other files.. I think it's better make javadocs as specific as possible, as in other test files. For example {@link CodePushUtils#getJsonObjectFromFile()} should throw a {@link CodePushMalformedDataException} if a {@link JsonException} is thrown during converting.\nPlease fix it there and below.. Please get rid of the variable names like fw - better name it fileWriter.. Can't we just use mock(InputStream.class) instead of the createGoodResource?. @ruslan-bikkinin My opinion is use mock where no real object needed. Instead it turns out that you are creating more complex logic than needed.. @ruslan-bikkinin Nope. The 62 line is already throwing an exception.. Can be. @sergey-akhalkov We have only one ReportStatusJob instead of 2.. @MatkovIvan In data contracts classes we do not use this convention as it is in AppCenter. So if you removed this constructor, where are mFileUtils assigned?. @ruslan-bikkinin now it throws an IOException. Why do we need mCurrentInstance? Is it used somewhere?. Rename parameter in method to appVersion. \"m\" is used only for private properties, not parameters.. Is there a reason for the comment to be multiline?. Please use default javadocs for exception where it's possible and reasonable (see pinned items in Slack).. Put abstract methods either on top or at the bottom of the class. I think strict order better be used.. Is there a reasons it is a List, not just one listener? Is it used somewhere?. Javadoc missing.. Is there a particular reason we use CodePushPackage here instead of CodePushLocalPackage?. As I have already said, can't be synchronous. Will be changed in my PR.. Why do we use CodePushPackage here instead of CodePushLocalPackage?. ",
    "zhaohailog": "@annakocheshkova \n\n. @max-mironov  What do you mean? I have resolved the problem  .   . ",
    "EvianZhow": "This is caused by using application id suffix, while the run-android command still executing the original one. \nCheck here: https://github.com/facebook/react-native/commit/d8f23f79c736812c6da2af5a637eb29bf62510e4\nSpecifying --appIdSuffix [string] when you doing the run-android thing fixes this. . Additional . assigned. --appIdSuffix debug should be just enough. . Might related to images' resizeMode: 'center' property. Encountered this issue and removed this style props work for me. . ",
    "birkir": "Yes, I have the import.\nFor clarification this works well for react native 0.51.x, once I upgraded react native to 0.52.x it won't compile.. Let me validate and get back to you. ",
    "fatfatson": "yes it still exist,  but now I'm using the builtin sync method to workaround it.. ",
    "svekl": "Hi @jerson,\nI tried to reproduce your issue, but had no luck, I created new RN Windows project, created 5 CodePush updates and it works fine for me.  Looks like I'm missing some detail. May I ask you to create some small example project to reproduce this issue?. ",
    "aurorasimran": "when i run npm cache clean ~/.npm\ni get this error\nnpm cache clean ~/.npm\nnpm ERR! npm cache clear does not accept arguments\nnpm ERR! A complete log of this run can be found in:. Still the same \n1. I ran \nnpm cache verify ~/.npm  =\nCache verified and compressed (~/.npm/_cacache):\nContent verified: 0 (0 bytes)\nIndex entries: 0\nFinished in 0.042s\n2. npm install -g code-push-cli\n/usr/local/bin/code-push -> /usr/local/lib/node_modules/code-push-cli/script/cli.js\n+ code-push-cli@2.1.6\nupdated 1 package in 40.038s\n3.  Again same error :- \ncode-push register\nmodule.js:472\n    throw err;\n    ^\nError: Cannot find module 'superagent'\n    at Function.Module._resolveFilename (module.js:470:15)\n    at Function.Module._load (module.js:418:25)\n    at Module.require (module.js:498:17)\n    at require (internal/module.js:20:19)\n    at Object. (/usr/local/lib/node_modules/code-push-cli/node_modules/code-push/script/management-sdk.js:6:18)\n    at Module._compile (module.js:571:32). still not working for me. After installing now, I am getting this error\ncode-push register\nmodule.js:472\n    throw err;\n    ^\nError: Cannot find module 'debug'\n    at Function.Module._resolveFilename (module.js:470:15)\n    at Function.Module._load (module.js:418:25)\n    at Module.require (module.js:498:17)\n    at require (internal/module.js:20:19)\n    at Object. (/usr/local/lib/node_modules/code-push-cli/node_modules/proxy-agent/index.js:11:13)\n    at Module._compile (module.js:571:32)\n    at Object.Module._extensions..js (module.js:580:10)\n    at Module.load (module.js:488:32)\n    at tryModuleLoad (module.js:447:12)\n    at Function.Module._load (module.js:439:3). It's 5.6.0. no still the same issue tried everything. now i am getting this weird error\n Cannot find module 'debug'\n    at Function.Module._resolveFilename (module.js:470:15)\n    at Function.Module._load (module.js:418:25)\n    at Module.require (module.js:498:17)\n    at require (internal/module.js:20:19)\n    at Object. (/usr/local/lib/node_modules/code-push-cli/node_modules/proxy-agent/index.js:11:13)\n    at Module._compile (module.js:571:32)\n    at Object.Module._extensions..js (module.js:580:10)\n    at Module.load (module.js:488:32)\n    at tryModuleLoad (module.js:447:12)\n    at Function.Module._load (module.js:439:3). finally worked after installing all the module that it was unable to find\nClosing the issue. ",
    "Mommabearoffive": "Ok. ",
    "linzziy": "+1. ",
    "Salakar": "@Zakeelm if you need anything from us (Invertase/RNFirebase) or if we can assist on this let us know \ud83d\udc4d \nFor reference this is where we store the initial link the app was opened with:\nhttps://github.com/invertase/react-native-firebase/blob/master/android/src/main/java/io/invertase/firebase/links/RNFirebaseLinks.java#L32\nMy guess is we need to move this somewhere where this can persist across reloads but not app restarts - open to suggestions. Similar on iOS as well.. ",
    "Chamode": "Heyy does anyone know the solution to this problem. I am facing it in iOS.. [CodePush] The CodePush module doesn't appear to be properly installed. Please double-check that everything is setup correctly. <<< on the chrome debugger\nI did react-native link react-native-code-push and then pod install . It works as expected on Android but not on iOS.\nI am getting build failed on xCode as there are two React folders in Pods > Target Support Files folder.. the issue was with my podfile, it is solved now. Thanks. ",
    "manjeetwadi": "@SudoPlz are you able to use fix provided by @iTOYS .. @SudoPlz any success resolving this issue, I am facing same in app with react-native-navigation. similar thing happened for us too. ",
    "Shinichi52": "@iTOYS thanks for responded. My example repository  https://github.com/Shinichi52/example-code-push and My codePushOptions\njavascript\ncodePushOptions = {\n    installMode: codePush.InstallMode.ON_NEXT_RESUME,\n    checkFrequency: codePush.CheckFrequency.ON_APP_RESUME\n}\njavascript\nor\ncodePushOptions = {\n    installMode: codePush.InstallMode.IMMEDIATE,\n    checkFrequency: codePush.CheckFrequency.MANUAL\n}. Thanks @iTOYS .\nI will check back and will report back to you. wishing you happy and healthy weekend. ",
    "xuan9230": "Hi @iTOYS , thanks for your solution, now the app prompts user to update on the first open.\nHowever, Apple doesn't allow this kind of dialog:\n\nWhile Apple's developer agreement fully allows performing over-the-air updates of JavaScript and assets (which is what enables CodePush!), it is against their policy for an app to display an update prompt. Because of this, we recommend that App Store-distributed apps don't enable the updateDialog option when calling sync, whereas Google Play and internally distributed apps (e.g. Enterprise, Fabric, HockeyApp) can choose to enable/customize it.\n\nThat being said, click on the button to update is preferred. Not sure should I change checkFrequency to MANUAL? I still want the auto-update on app restart work, just wanting to add an extra button as an additional manual option on top of the silent update process.\nNow the problem is, if I leave checkFrequency to be default (on-app-restart), the manual sync() will stuck only on the first time opening an app.. @iTOYS Yep, this solution does solve the problem, though jeopardizing user experience - the app will automatically update and restart, without the user knowing what's happening.\nAbove all, guess I'll have the dialog prompt for Android, and just let ios app update on the second time start, plus the manual solution. Thanks for help!. ",
    "adam-bratin": "pending fix in Microsoft/react-native-code-push#1209. ",
    "Grosskopf": "whoops how did i get to this repository?. i noticed, i searched the whole of github for errors with uwp xD well.. that was dumb, sorry. ",
    "Abby3017": "This doesn't fixed the issue. It will give this error\nProject with path ':ReactAndroid' could not be found in project ':react-native-code-push'.\nFor Rn- 0.52\nCode-push - 5.2.2. ",
    "OrangeFlavoredColdCoffee": "\nThis doesn't fixed the issue. It will give this error\nProject with path ':ReactAndroid' could not be found in project ':react-native-code-push'.\nFor Rn- 0.52\nCode-push - 5.2.2\n\nme too. ",
    "sujayjaju": "@iTOYS Thanks for getting back\nI have the below setting in android\\gradle.properties to allow bundling .svg files\nandroid.disableResourceValidation=true\nAnd I am using react-native-svg-uri to render the SVG file.\nI will setup a sample project.. ",
    "syq7970": "+1. ",
    "Ashwin-Mothilal": "Sorry, was busy in other projects. I am still facing this issue. @iTOYS It's not possible for me to create a example project for some days. The only difference I see in Code push code is, I am not doing it manually, its done by Default option which is OnAppResume I think. I have updated the screenshots and text also, feel free to ask questions!. I have changed the permissions for the images, you can check it now. Just have a look at it. I will try to give project after this week, working on other production issues.\n. Hi, I am attaching the sample project for you here \nPlease find the image after code push Update\n\n. ",
    "ex3ndr": "Same here. I have two separate issueses. \nFirst is a background image for a chat. It had transparency (by mistake) and for some reason it was resized incorrectly. It was zoomed and very low res. iOS had this bug, but android works well.\nSecond case is a simple png images with capInsets. It looks like it just ignores cap insets at all.\nUPD:\nI actually tried to dig deeper to investigate problem with capInsets and found that in binary build image is not resized before applying capInsets (as it should be), but in codepush version RCTImageView resizes an image for some reason.\nUPD2:\nAh, i found the source of issue. Image was loaded without respect to screen dencity (x3 on iPhone X) when is loaded from codepush. Loading from local bundle works just fine. Still trying to figure out work-around.... Ok, i figured out the root cause of the issue. When loading images from CodePush bundle it doesn't respect scale factor of the resource. It works well for built-in resources since UIImage can load with right scale factor automatically. \nUnfortunately, the only (and dirty) solution is to patch react-native implementation.\nIn react-native/React/Base/RTCUtils.m patch RCTImageFromLocalAssetURL:\nimage = [UIImage imageWithData:fileData];\nwith \nCGFloat scale = 1.0;\nif ([[imageURL absoluteString] hasSuffix: @\"@3x.png\"]) {\n  scale = 3.0;\n} else if ([[imageURL absoluteString] hasSuffix: @\"@2x.png\"]) {\n  scale = 2.0;\n}\nimage = [UIImage imageWithData:fileData scale: scale];\nThis will work only for png files.. For sure it should be opened back. Also after digging around image loading it turns out that there are no image caching at all for built-in images on iOS. For example, if app will show series of messages with bubble decorations then build with codepush will load each image again and again. That's really creepy for performance.. ",
    "makirby": "@ex3ndr you're a damn hero. @stueynet for now i am patching the RN package using the code from @ex3ndr, for me this is a good solution as all our images follow that exact convention. Though it may not work for you. \nhttps://gist.github.com/makirby/6f7a0b6ef2e8865751206b2b69e1abdc  . ",
    "bthuan": "@ex3ndr's solution works for me, thank you for digging into it. But I think it's pretty hacky. ",
    "wynch": "Hello,\nI just noticed the same problem trying to update my app with CodePush...\nIs this a react-native related bug ? if so, is there a pull request to change RCTImageFromLocalAssetURL ?. ",
    "Fsarmento": "Hi,\nI just bumped into this same problem today.\nI have a  background image with \"resizeMode: 'repeat'\". After updating the sentence in the middle of the screen using codepush, the image resizeMode or size changes (iPhone 6):\n\nThis project is available here: https://github.com/Fsarmento/codepushImageRepeate\n  . ",
    "emilioicai": "Modifying React Native's code is not a solution for any project using continuous integration so this issue prevents Code Push from being integrated in medium to large size apps.. ",
    "ascherkus": "I ran into this -- as far as I can tell it's a regression introduced in RN itself and I filed https://github.com/facebook/react-native/issues/22383\nMost of the images in our application are messed up and it's blocking our use of CodePush for our application :(. ",
    "HighSoftWare96": "Same problem here... I solved forcing the image to be with resizeMode stretch \ud83d\ude1e . ",
    "ScreamZ": "Hello @geof90 @lostintangent @max-mironov \nI'm facing the same issue, removing resizeMode: \"center\" fixed the problem, can you have a look at this please ?\nIt's really important I guess for many company that relies heavily on Codepush\u2026\nBest regards guys. Marvelous ! I made a workaround, i'll wait react native to update :) THanks. Not using center mode, i was not specially requiring it for my use case.. ",
    "MichielDeMey": "Hey guys, a fix has been merged into master in the React Native project.\n(cfr. https://github.com/facebook/react-native/issues/22383 & https://github.com/facebook/react-native/pull/23446)\nYou can create a patch file from the following diff: https://patch-diff.githubusercontent.com/raw/facebook/react-native/pull/23446.diff. Hey guys, a fix has been merged into master in the React Native project.\n(cfr. https://github.com/facebook/react-native/issues/22383 & https://github.com/facebook/react-native/pull/23446)\nYou can create a patch file from the following diff: https://patch-diff.githubusercontent.com/raw/facebook/react-native/pull/23446.diff. ",
    "holgersindbaek": "@ScreamZ What workaround did you do?. ",
    "GonzaloRecioG": "@temitope wow thanks! same problem happened to us but we didn't realise that was the issue until we read your comment \ud83e\udd26\u200d\u2642\ufe0f , thanks!!. Hi @alexandergoncharov ! thanks for answering.\nUnfortunately, we're not able to create a test project (configure react-native-maps + configure react-native-code-push with new keys etc) since it will take several hours and we don't that time right now.\nThe issue is related only with the prop image of the <MapView.Marker/>, since other local images on the project are not resizing. \nUntil is fixed, is there any way to 'ignore' assets or certain code to not be updated via code-push?  Because we can't use code-push since it makes Maps unusable and we really want to use it.\nThanks again @alexandergoncharov and team!. If it helps: we found that if we pass an <Image/> as a children of the Marker, code-push update doesn't change the size afterwards. The only problem is when using image prop on the marker.\nUnfortunately we can not use this since react-native-maps has a known bug that on Android if you pass an <Image/> as a children of the Marker, it doesn't render it, it only works with the image prop.\nSo we can only use the image prop for rendering marker custom images. Thanks!. ",
    "wilywork": "solved!\nthe key I was activating in the code-push was the AppCenter key.\nthe key code-push appears using this command:\n     code-push deployment ls APPNAME -k --format json\nI used the create-app.js script available in Examples, made some corrections and improvements, super easy to create your code-push StartKit now.\ncreate-app-code-push-startkit.zip\n. ",
    "gregwym": "Thank you for the timely fix!. ",
    "Hunter-Dolan": "\ud83c\udf89 . ",
    "thevolcanomanishere": "@AndrewJack Codepush is becoming closed source?. @aijason you are not going to get any answers to your question unless you give more details. Just because it is a 4G network, doesn't mean that is guarantees high speed. 4G is just the protocol. . ",
    "yogieputra8": "+1 Please support this feature \ud83d\ude42. ",
    "markmadlangbayan": "Same here, how do you properly add assets on iOS and Android?\n. @pietro909 we're following @iTOYS ' recommendation.. ",
    "pietro909": "@coderjonny @markmadlangbayan did anyone of you people solve the issue? We've just started experiencing it one week ago, on Android only (exactly the same codebase), whereas it used to work properly before.\n@iTOYS we are following the practices that you reported here.\nWhat else can be done?. hi @l1br3 the issue for us was solved in October after the latest RN update: we also upgraded all the other dependencies and apparently in our case was FastImage the problem.. ",
    "sijad": "we're facing same issue, with react-native-navigation, it was working alright before. we have similar issue with react-native 0.56.0 and react-native-code-push 5.4.0, code push was working alright before.. ",
    "AshokICreate": "same issue here images are getting blurred after code push update.\n\n. ",
    "octodriver": "It may be a clue that libCodePush.a lives both at root and inside of /Products folder in the Workspace:\n\n. Tail end of build output from my CI:\n...\n[04:04:36]: \u25b8 Building myapp/myapp [Release]\n[04:04:36]: \u25b8 Check Dependencies\n[04:04:36]: \u25b8 Running script '[CP] Check Pods Manifest.lock'\n[04:04:36]: \u25b8 Compiling AppDelegate.m\n[04:04:41]: \u25b8 Compiling main.m\n[04:04:41]: \u25b8 Compiling myapp_vers.c\n[04:04:41]: \u25b8 Compiling AppDelegate.m\n[04:04:41]: \u25b8 Compiling main.m\n[04:04:41]: \u25b8 Compiling myapp_vers.c\n[04:04:41]: \u25b8 Linking myapp\n[04:04:41]: \u25b8 \u274c  clang: error: no such file or directory: '/Users/vagrant/Library/Developer/Xcode/DerivedData/myapp-cwlqtrwaukfqxsfogpftqhdeqpjx/Build/Intermediates.noindex/ArchiveIntermediates/driverapp/BuildProductsPath/Release-iphoneos/libCodePush.a'\n[04:04:41]: \u25b8 Linking myapp\n[04:04:41]: \u25b8 \u274c  clang: error: no such file or directory: '/Users/vagrant/Library/Developer/Xcode/DerivedData/myapp-cwlqtrwaukfqxsfogpftqhdeqpjx/Build/Intermediates.noindex/ArchiveIntermediates/driverapp/BuildProductsPath/Release-iphoneos/libCodePush.a'\n[04:04:41]: \u25b8  ARCHIVE FAILED \n[04:04:41]: \u25b8 The following build commands failed:\n[04:04:41]: \u25b8 Ld /Users/vagrant/Library/Developer/Xcode/DerivedData/myapp-cwlqtrwaukfqxsfogpftqhdeqpjx/Build/Intermediates.noindex/ArchiveIntermediates/driverapp/IntermediateBuildFilesPath/driverapp.build/Release-iphoneos/driverapp.build/Objects-normal/armv7/driverapp normal armv7\n[04:04:41]: \u25b8 Ld /Users/vagrant/Library/Developer/Xcode/DerivedData/myapp-cwlqtrwaukfqxsfogpftqhdeqpjx/Build/Intermediates.noindex/ArchiveIntermediates/driverapp/IntermediateBuildFilesPath/driverapp.build/Release-iphoneos/driverapp.build/Objects-normal/arm64/driverapp normal arm64\n[04:04:41]: \u25b8 (2 failures). The issue seems to be caused by the way that react-native link connected the library. It resulted in a duplicate entry for file libCodePush.a. Manually removing this has settled the issue.. in the end, i still end up getting the duplicate inside the Libraries/CodePush.xcodeproj, that was not the issue.\nWhat ended up fixing my problem was:\n1. uninstall appcenter & codepush (remove entries from Podfile and then pod install)\n2. updating to the latest cocoapods (sudo gem install cocoapods)\n3. update pod cache (pod update)\n4. reinstall appcenter and codepush (add entries to Podfile and pod install)\nMy RN version = 0.55.2\nMy Podfile looks like this:\n```\ntarget 'myapp' do\n  platform :ios, '9.0'\nrn_path = '../node_modules/react-native'\npod 'yoga', path: \"#{rn_path}/ReactCommon/yoga/yoga.podspec\"\n  pod 'React', path: rn_path, subspecs: [\n    'Core',\n    'CxxBridge',\n    'DevSupport',\n    'RCTActionSheet',\n    'RCTAnimation',\n    'RCTGeolocation',\n    'RCTImage',\n    'RCTLinkingIOS',\n    'RCTNetwork',\n    'RCTSettings',\n    'RCTText',\n    'RCTVibration',\n    'RCTWebSocket',\n  ]\npod 'AppCenter/Crashes', '~> 1.5.0'\n  pod 'AppCenter/Analytics', '~> 1.5.0'\n  pod 'AppCenterReactNativeShared', '~> 1.4.0'\n  pod 'CodePush', :path => '../node_modules/react-native-code-push'\nend\n```\nImportant note: you have to have target = 9.0 as shown above\nalso, the latest React (55) has different pod entries from before:     'CxxBridge', 'DevSupport',. ",
    "anishone": "@octodriver  where did you remove the duplicate entry from? I'm stuck with the same error now. Thanks!. ",
    "danchokobo": "@octodriver we are waiting for you response. ",
    "sobiso": "I have the same problem, removed duplicates from file {projectname}.xcodeproj. ",
    "DavidNorena": "@sobiso thanks I removed duplicates and also worked !. ",
    "luskin": "Same here, had duplicate errors as well as missing libCodePush.a after clearing DerivedData.\nOur solution was similar to those above:\n1) Comment out codepush in podfile\ncd ios && pod install && cd ..\nreact-native unlink code-push-react-native\nreact-native link code-push-react-native\n(uncomment codepush line in podfile)\ncd ios && pod install && cd ..\nreact-native run-ios\nWorked like a charm for us.\n. ",
    "JJMoon": "I just remove tvOS in codepush project.. ",
    "datvong-wm": "Note the Performance section of https://developer.android.com/reference/java/net/HttpURLConnection.html\nBy default, this implementation of HttpURLConnection requests that servers use gzip compression and it automatically decompresses the data for callers of getInputStream(). The Content-Encoding and Content-Length response headers are cleared in this case.. ",
    "andresesfm": "Good catch @iTOYS I have updated the link. . I have fixed the review comment, please take a look. ",
    "krunalsshah": "@iTOYS thanks for reaching out. Yes the plugin builds with React-Native Project.\nAlthough react-native-code-pushis a library project that can be build independently, correct?\nOpening  the react-native-code-push project https://github.com/Microsoft/react-native-code-push/blob/master/android/build.gradle results in   Error:Unsupported method: BaseConfig.getApplicationIdSuffix(). \nError line : https://github.com/Microsoft/react-native-code-push/blob/master/android/build.gradle#L8\nAndroid Studio Version : 3.0.1\nLet's say if I were to make changes in the file https://github.com/Microsoft/react-native-code-push/blob/master/android/app/src/main/java/com/microsoft/codepush/react/CodePush.java ,I'd need to open the react-native-code-push project & get it to compile. \n@iTOYS If I am missing any point, please let me know , how can i set up development environment for react-native-code-push android native module. . @NickToropov please close the PR if it's not necessary to commit the documentation change. thanks.. @NickToropov thanks for writing back. \nreact-native-code-push version: 5.3.5\nreact-native version: 0.55.4\nDoes this reproduce on a debug build or release build? both\nDoes this reproduce on a simulator, or only on a physical device? simulator\nSubmitting the PR https://github.com/Microsoft/react-native-code-push/pull/1367\nThe idea is to check if the bundle file name exists in the unzippedFolderPath folder before copying content over to newUpdateFolderPath. @NickToropov yes you are correct, I pushed the update. before throwing exception we can delete the unzippedFolderPath folder silently. I believe it should be okay to delete newUpdateFolderPath if it exists due to execution of line, https://github.com/Microsoft/react-native-code-push/blob/master/android/app/src/main/java/com/microsoft/codepush/react/CodePushUpdateManager.java#L228. @NickToropov iOS implementation looks fine. I may not be a expert with Obj C, though it seems Android specific problem.. @NickToropov \nMy friend @ghostatron was going to look at the iOS implementation. I am not an expert at iOS :( \nIf he doesn't reply. please feel free to make the change.. @NickToropov Sorry for the delayed reply. I was on a vacation. w.r.t iOS change, I'd seek help from the core-team. I am constrained on time (due to catch up after vacation) :) Please let me know your thoughts.. @alexandergoncharov . @alexandergoncharov . I doubt if I can capture the logs for the same. It's in production build.\nAlthough positive, only of the app restarts the pending status gets to Total count. \nWe are using mandatory install mode. (IMMEDIATE). the only change is to fail first if the pre condition is not met. relativeBundlePath can be discovered from unzippedFolderPath before copying unzippedFolderPath to  newUpdateFolderPath. other change is formatting the code without else block that existed earlier.. @alexandergoncharov Please notice https://github.com/Microsoft/react-native-code-push/pull/1367/files/1378ed54ab5c73dafcd2a49d17974db26515b357#diff-4aa56c56a1afb536396acce24d2d2015R242 (CodePushInvalidUpdateException  will be thrown & by adding the line as in master would leave the copy of unzipped folder in the memory as the statement will not be executed, so the PR moves the delete operation before the exception is thrown) . In case of isDiffUpdate true , it may have been created. So the conditional to check if newUpdateFolderPath exists followed by delete may be necessary to make sure. Please let me know.\nhttps://github.com/Microsoft/react-native-code-push/pull/1367/files/1378ed54ab5c73dafcd2a49d17974db26515b357#diff-4aa56c56a1afb536396acce24d2d2015R227. @alexandergoncharov yes you are absolutely correct. I have pushed the commit.. ",
    "Catpants": "@iTOYS I apologise, my original code example was not accurate. I am indeed calling it like this:\n      codePush.sync(\n        { installMode: codePush.InstallMode.IMMEDIATE, deploymentKey: Config.CODEPUSH_KEY_IOS }\n      )\nI still have the issue where code push is rolling back and not syncing on demand with two different keys. I would like to know, is it even possible to do this?. ",
    "newyankeecodeshop": "I have noticed that calling sync to change deployment from Production to Staging will not install the staging build if CodePush determines that the current (production) bundle is up-to-date. We had to write native code which calls CodePush.clearUpdates() before calling sync so that the requested bundle would be downloaded. I have been meaning to spend more time to debug this situation to see exactly what is happening inside CodePush internals. I cannot confirm exactly what the issue is, but I have seen cases where using sync() to change from Production->Staging (and back) does not always work.. ",
    "AndreyMitsyk": "Workaround to not use codePush function inside tests:\nAdd initialization of CodePush into index.js instead of app.js.\n```\nimport { AppRegistry } from 'react-native';\nimport App from './App';\nimport codePush from \"react-native-code-push\";\nvar root = codePush(App);\nAppRegistry.registerComponent('NewTestApp', () => App);\n```\nOnly initialization (codePush(App)) should be added inside index.js. Other logic like codePush.sync can be added inside app.js.  This will help in some scenarios.. ",
    "anurag0022": "Facing the same issue. +1. ",
    "shashankwadi": "+1. ",
    "half-ogre": "Howdy folks, just a quick update that we're are still looking at this. We are trying to reproduce it and make sure we understand it and weighting the pros and cons of possible solutions. My hope is we have something sorted next week, but I can't make any promises. I am new to the project and have some catching up to do, so I apologize that this also is making things a little slower.. I generally favor the first approach. @max-mironov and @sergey-akhalkov, do you have any thoughts on this?. Even better. Let's move forward with that. Thanks!. Howdy @marc-whil, I just wanted to let you know this is still in the queue for us to look at. I recently joined the project and am ramping up on it, so things will move a bit slower. This is a pretty busy week (as as last week with the Build conference), so I probably won't be able to look at it until next week. Apologies!. @jeffreymendez1993 I'm sorry the error message wasn't better, but glad to see you worked it out.\n@keerthanakumar It would be nice for us to look at improving the error we show when the deployment key isn't valid.. ",
    "ikhilko": "Maybe see here: https://github.com/Microsoft/react-native-code-push/issues/880#issuecomment-342463583. @patniko Hi! Are anyone have some updates about this issue?. ",
    "xiaogaofudao": "when it will be supported?. ",
    "tarunkonda123": "Hi @alexandergoncharov Thanks for your valuable time\nresolved my issue the problem is about this path \napply from: \"../../node_modules/react-native/react.gradle\"\napply from: \"../../node_modules/react-native-code-push/android/codepush.gradle\"\n. ",
    "Adwich": "I tried again using :\n\"react\": \"16.3.1\",\n\"react-native\": \"0.55.2\",\n\"react-native-code-push\": \"5.3.2\"\nI found that the react-native link react-native-code-push command does not add the following line to the build.gradle file :\ndependencies {\n+    compile project(':react-native-code-push')\n     compile fileTree(dir: \"libs\", include: [\"*.jar\"])\nMaybe somehow could check why this line is not added with the react-native command. Hi @alexandergoncharov ,\nMy project was started with react-native init. All I did was :\nnpm i --save react-native-code-push\nreact-native link react-native-code-push\nI followed the doc all along. But it is working for me. It might not be a bug. Thank you for help. ",
    "marc-whil": "@NickToropov sure, here's an action that happens when our QA team wants to switch between staging/production code push bundles:\n```\nexport const updateCodePushKey = key => dispatch => {\n  // change code push actively\n  dispatch(setCodePushKey(key))\n// clear code push cache so we're guaranteed to download the package from code push\n  codePush.clearUpdates()\n// show update screen\n  dispatch(codePushMandatoryUpdateBegin())\n// fetch and apply bundle from code push\n  codePush\n    .checkForUpdate(key) // there will always be an update here because of clearUpdates above\n    .then(remotePackage => {\n      if (!remotePackage) {\n        // bail if there's no new package\n        dispatch(codePushMandatoryUpdateEnd())\n        console.log('bailed, theres no new package') // eslint-disable-line no-console\n        return\n      }\n  remotePackage\n    .download(progress => {\n      // download the package with progress updates\n      dispatch(codePushDownloadDidProgress(progress))\n    })\n    .then(localPackage => {\n      // install the package\n      console.log('installing local package') // eslint-disable-line no-console\n      const installMode = codePush.InstallMode.IMMEDIATE\n      localPackage.install(installMode)\n      console.log('local package installed') // eslint-disable-line no-console\n    })\n    .catch(() => {\n      console.log('there was an error') // eslint-disable-line no-console\n      // download failed\n      dispatch(codePushMandatoryUpdateEnd())\n      // restart app because this update was mandatory\n      codePush.restartApp()\n    })\n})\n.catch(err => {\n  console.log('CodePush error: ', err) // eslint-disable-line no-console\n  bugsnag.leaveBreadcrumb('CodePush error', err)\n})\n\n}\n```\nIf we tried to switch keys without clearUpdates, our QA team would not be able to switch keys reliably, as Code Push will not take a downgrade when switching keys.  It won't apply something later over something newer.  By clearing the Code Push cache, Code Push doesn't know that we're really doing a downgrade (in the sense that the switch may bring us to older code), so it applies the bundle from the key we want.. ",
    "christophermark": "Building off what @marc-whil said, we run into issues with metadata when we attempt to switch between environment deployments (staging/production).\nOften we have Staging and Production running the same build after we promote a successful release. They might share a hash but be on different version numbers. If a user were to switch between the stable and production release channels in-app, CodePush refuses to download a bundle with the same hash, even if it is coming from a different deployment (different deployment key).\nIn our app, we'll have switched channels from Staging to Production, but when we call CodePush.getUpdateMetadata(), it will return the metadata from the Staging release, rather than the production release.\nThe easiest solution to this would be exposing this clearUpdates method so we can clear any updates from a non-related release channel as we switch to a different deployment.. ",
    "larslockefeer": "Hi @iTOYS, thanks for merging.\nOne more thing I thought of: to fix it for the current release it might be an idea to create a tag v5.3.2-beta (even though that would not properly represent the semantics version number)?. ",
    "ppatel890": "Any Update with this? Dealing with the same issue. ",
    "gdancel": "+1. ",
    "g33ktony": "React Native 0.56\nreact-native-code-push 5.4.1\n. I have the same issue now on react-native-code-push v5.4.2 and react-native 0.57.3\nI think is related to the change of the app id that was com.innboard and now is cl.innboard\nDon't know if there is something we can do to reset this config in codepush cli when releasing an update to a deployment \n. @ujwal-setlur have you changed the app id before configuring code-push? I see the one you have is different from default. > Hi @wenkangzhou, @g33ktony , @ujwal-setlur ,\n\nI see that you all have the issue like that. Could you please provide logs, versions, reprosteps or dummy project with reproducing issue?\nThanks,\nAlexander\n\nreact-native: 0.57.3\nreact-native-code-push: ^5.4.2\n\n\n. I have updated to react-native-code-push: 5.5.0 and I still having the same issue. ",
    "nitrosalat": "Hi, i have the same issue\nReact Native 0.55.4\nreact-native-code-push 5.4.1. ",
    "Devlin556": "Hi @alexandergoncharov . I have the same issue in an Android app. It happens after handle installation code-push bundle and only on Dev version of the app.. ",
    "wenkangzhou": "I have the same issue in Android.\nI don't Enable Live Reload.\nIt happens after i press install button,and wait few minutes after the bundle download finish,it will show the error messge.\n\nReact Native 0.56.0\nreact-native-code-push 5.4.1. ",
    "yashojha19": "react-native 0.56.0\nreact-native-code-push 5.3.5 \nand also tested it with \nreact-native-code-push 5.4.2\ncode-push was working fine some days before, but recently I did one npm install and it messed up everything. Red screen shows and on \nreact-native log-android shows this\n11-15 17:40:46.009  4486  4506 D ReactNative: [CodePush] Applying full update.\n11-15 17:40:46.025  4486  4562 I ReactNativeJS: [CodePush] Installing update.\n11-15 17:40:46.052  4486  4563 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com<app_package_nam>e/files/CodePush/ed3cd25941b72c1fc8efc1ccc5b07f4535474e528fcf3250200510506981680c/index.android.bundle\"\n11-15 17:40:46.052  4486  4486 D ReactNative: ReactInstanceManager.recreateReactContextInBackgroundInner()\n11-15 17:40:46.054  4486  4562 I ReactNativeJS: [CodePush] Restarting app\n11-15 17:40:46.089  4486  4486 D ReactNative: ReactInstanceManager.onJSBundleLoadedFromServer()\n11-15 17:40:46.090  4486  4486 D ReactNative: ReactInstanceManager.recreateReactContextInBackground()\n11-15 17:40:46.090  4486  4486 D ReactNative: ReactInstanceManager.runCreateReactContextOnNewThread()\n11-15 17:40:46.090  4486  4486 D ReactNative: ReactInstanceManager.tearDownReactContext()\n11-15 17:40:46.096  4486  4486 D ReactNative: CatalystInstanceImpl.destroy() start\n11-15 17:40:46.102  4486  4759 D ReactNative: ReactInstanceManager.createReactContext()\n11-15 17:40:46.277  4486  4759 D ReactNative: Initializing React Xplat Bridge.\n11-15 17:40:46.287  4486  4759 D ReactNative: Initializing React Xplat Bridge before initializeBridge\n11-15 17:40:46.297  4486  4506 D ReactNative: CatalystInstanceImpl.destroy() end\n11-15 17:40:46.300  4486  4759 D ReactNative: Initializing React Xplat Bridge after initializeBridge\n11-15 17:40:46.300  4486  4759 D ReactNative: CatalystInstanceImpl.runJSBundle()\n\nand also it makes app crash in release version. . Got it working, after code-pushing the current code. Suggestion test staging one first. and note down the current version, so that you can roll-back to right version. working good, in release version also.\nI think the problem was, react-native-code-push pushing the older binaries  to updated code.\n . \n",
    "baicuhaha": "Sorry I have this problem too  RN:0.57.7   , \"react-native-code-push\": \"^5.5.0\",. I have updated it successfully and reported an error after restart \n\n\n. It's not that I actually had an error message on it. After I updated it, the app was restarted and then I couldn't find the path of the bundle. The version react-native 0.55 I used before can be upgraded to 0.57, and ios will have no problem after that, but android has been reporting an error. This is the specific error information of android under the release:\n\n. I have modified the node_modules file, modify the source code here, will the update fail? Please give me some advice. Thank you very much!. I have found the reason. Thank you. ",
    "darkfiredarkhalo": "react: 16.6.0-alpha.8af6728\nreact-native: 0.57.4\nreact-native-code-push:  5.5.1\nI have the same issue in Android. ",
    "vladpalkanov": "\"react\": \"16.6.3\"\n\"react-native\": \"0.58.4\"\n\"haul\": \"^1.0.0-rc.12\"\n\"react-native-code-push\": \"^5.5.2\"\nThe same issue using Android 9 emulator. ",
    "KasparasGud": "+1.\nThis issue along with the react-native-maps android bug makes code-push not usable for now with projects that use react-native-maps. \nAny workarounds warmly welcomed . ",
    "murugasarana": "We are facing same issue. . ",
    "PackZhang": "I have got into the same trouble\n- react-native-code-push: 5.3.2  (tested also on 5.3.3, 5.2.1)\n- react-native: 0.55.4\n\n. @NickToropov \nThanks for reporting!\nI've added  @2x and @3X images.  it's not helpful.. ",
    "phatlaunchdeck": "I confirm myself having the exact same problem when pushing to Production. \nAnd yes I do have the proper @2x and @3x image files.\nAny help would be very much appreciated :D. > Hi all! I've created a demo app - Issue1276.zip\nPlease try to play with it:\n@NickToropov Does this one work for iOS as well? Because I copied your code over my project and it still produce the same error on Production of iOS.. Hi @NickToropov , I tried the above solution with Image component you gave us. It did work on Android but only in Debug mode, not Release.. ",
    "keung7251": "+1. ",
    "deehuey": "Hey, just did a fresh reinstall of our application, and am getting this issue as well. \njson\n    \"react-native\": \"0.56.0-rc.3\",\n    \"react-native-maps\": \"0.21.0\",\n    \"react-native-code-push\": \"5.3.5\",\nThis is definitely a new bug as it did not happen before our rebuild. I have confirmed i have @2x and @3x respective resolutions of the marker images.. Okay, so in this thread I see a few people report they have issues with Android-production-only Image marker fix not working.\nNow first lemme say I don't like this solution, and hope that this isn't the accepted fix, but a solution that works for me:\nIn the production build, Android doesn't seem to know that the files are being referenced as source for the marker images when inside a marker component.\njavascript\n        <Image source={require('./icons/emptypin.png')} style={{ width: 0, height: 0 }} />\n        <Image source={require('./icons/greenpin.png')} style={{ width: 0, height: 0 }} />\n        <Image source={require('./icons/youarehere.png')} style={{ width: 0, height: 0 }} />\nPutting every marker we used as a regular ol' image in the app near our map view (anywhere really) gets the job done on Production Android build. \nThen on my marker components I was able to reference them as usual:\n```javascript\n  <Marker onPress={this.handlePress} coordinate={coordinate}>\n    <ImageBackground style={{ width: 30, height: 30 }} source={icons[active ? 'active' : 'inactive']}>\n      <Text style={styles.text} white={!active}>{children}</Text>\n    </ImageBackground>\n  </Marker>\n\n```\nBoth the ImageBackground component and the Image component seemed to work \ud83d\udc4c . So here is how I fixed it, pretty simple really though I don't know if this will cause any issues, I will report back if code-push isn't working properly:\nI just hopped in to your build.gradle in the node_modules and updated compileSdkVersion to 26, and build tools version to 27.0.3\nIf I may suggest a solution moving forward: many RN packages have been using the project's build tools / compile version by properties set in the root projects build.gradle.\nIt was a recommendation by react-native-background-geolocation-android and react-native-maps which helps ensure all sub projects are using the same versions.\nSolution\nTheir solution was in our projects android/build.gradle add:\next {\n    compileSdkVersion   = 26\n    targetSdkVersion    = 22\n    buildToolsVersion   = \"27.0.3\"\n    supportLibVersion   = \"26.1.0\"\n    playServicesVersion = \"15.0.0\"\n    firebaseVersion = \"15.0.2\"\n}\nbecause in their build.gradle of the geolocation and maps plugins, they reference the root projects versions with the following code:\n```\ndef DEFAULT_COMPILE_SDK_VERSION     = 26\ndef DEFAULT_BUILD_TOOLS_VERSION     = \"26.0.2\"\ndef DEFAULT_TARGET_SDK_VERSION      = 26\ndef DEFAULT_PLAY_SERVICES_VERSION   = \"11.8.0\"\nandroid {\n    compileSdkVersion project.hasProperty('compileSdkVersion') ? project.compileSdkVersion : DEFAULT_COMPILE_SDK_VERSION\n    buildToolsVersion project.hasProperty('buildToolsVersion') ? project.buildToolsVersion : DEFAULT_BUILD_TOOLS_VERSION\n```\nI'm not sure if this is risky or more bug prone to have in your project, since I have no clue how Android works, but this has my builds passing so =) . Feel free to close this issue =) . ",
    "sercanov": "I also having this problem with following usage;\n<MapView.Marker image={require('Assets/Images/pin.png')} />\n\"react-native-code-push\": \"^5.3.5\". Any development or workarounds ? \nI tried with bundling manually without assets and releasing update with --update-contents-path but that removed all images from app.. Hi @yuri-kulikov \nI tried the solution and it worked perfectly. Thanks. Is there any open PR or discussion on react-native side ?\nP.S. I also used patch-package to simplify the patching process. ",
    "ThomasGaubert": "Thanks for the feedback!\nI've addressed your first two comments and will follow back up after having completed additional testing.. After testing, I can verify that diff updates along with signed updates work as expected. No server side changes are required at this time. \nUpdates released with either code-push release-react and code-push release (CodePush and non-CodePush directories) also work as expected.. ",
    "ycman0307": "Thank you for your reply. \nIt is difficult for me to understand. Is there any tutorial for me to create codePush project step by step?\n. Thank you for your reply. \nI find that it should be internet connection. My proxy server seems that it don't allow codePush to have connection.\nHere is the log in chrome.\n[CodePush] Checking for update.\n[CodePush] Reporting binary update (1.0)\n[CodePush] Report status failed: {\"appVersion\":\"1.0\"}\n[CodePush] An unknown error occurred.\n[CodePush] Network request failed \nCan i set proxy config for using codePush in my company??\n. ",
    "gtjamesa": "If anyone from Google stumbles upon this and has run the commands above, and the keys are not being displayed, you need to append --displayKeys\nbash\nappcenter codepush deployment list -a {UserName}/{ProjectNameInAppCenter} --displayKeys. ",
    "prakas25": "code-push deployment list  -k. ",
    "felixus95": "Thank you @gtjamesa \n . ",
    "wkmcyz": "This problem is gone after I restarted my PC. I guess it is something about the cache of gradle. My device is MacBook Pro. ",
    "Borovensky": "Started facing pretty the same issue today...Successfully build Android like a few days ago, since those time didn't do any changes to package.json. Also trying to build the app on another PC, but still review the same issue. \n\nEnvironment\n\nreact-native-code-push version: 3.0.1-beta\nreact-native version: 0.45.1\n\nIf someone have any suggestion, please help.. Yeah, I also find the solution here: https://github.com/facebook/react-native/issues/19272 . @ben-snaize Thanks for update!. ",
    "ben-snaize": "@Borovensky I also get the same single @Override failure if I try newer RN + CP. . Cheers @Borovensky @ajwhite. Sorted with:\nsubprojects {\n    configurations.all {\n        resolutionStrategy {\n            force 'com.facebook.react:react-native:0.42.3'\n        }\n    }\n}. Update: you don't even need the above any more because of this fix from JCenter.. ",
    "ejc3": "We had this show up on a scan from www.securetheorem.com across Verizon Media's codebase. Looking through the code, it doesn't seem to prevent path traversal:\nhttps://github.com/Microsoft/react-native-code-push/blob/3144c916018fab077231e88d8718ad3a1cb0a7d8/android/app/src/main/java/com/microsoft/codepush/react/FileUtils.java#L126\nHere's the report:\n```\nDescription\nAndroid provides the java.util.zip package, which contains classes such as ZipInputStream that enable an App to read, create and modify ZIP archives. When using this API to unzip an archive, it does not protect against file names in the archive that trigger a path traversal (such as ../..). This allows a malicious archive to overwrite files within the App's container when the archive gets unzipped.\nThe Zipperdown exploit leverages this issue to potentially allow a remote attacker who has the ability to inject a malicious archive into the App (for example because of unencrypted connections initiated by the App) to overwrite files. Depending on the App's functionality and how the API is being used, it may allow the attacker to perform a remote code execution attack against the App, and thereby get full access to the App's data.\nSecurity concerns regarding the ZipInputStream API have been extensively discussed before, but the Zipperdown research team has released a search engine to expose Apps that are using the ZipInputStream API at https://zipperdown.appscan.io/.\nRecommendation\nWhen unzipping an archive, always validate the compressed files' paths and reject any path that has a path traversal (such as ../..). Simply looking for .. characters in the compressed file's path may not be enough to prevent path traversal issues, and a more robust approach is described in the \"Secure Code\" section below.\nSecure Code\nThe below code snippet shows how to validate an archive to ensure files will not be written outside of the output folder, when unzipping the archive.\nstatic final int BUFFER = 512;\nstatic final long TOOBIG = 0x6400000; // Max size of unzipped data, 100MB\nstatic final int TOOMANY = 1024;      // Max number of files\nprivate String validateFilename(String filename, String intendedDir)\n      throws java.io.IOException {\n  File f = new File(filename);\n  String canonicalPath = f.getCanonicalPath();\nFile iD = new File(intendedDir);\n  String canonicalID = iD.getCanonicalPath();\nif (canonicalPath.startsWith(canonicalID)) {\n    return canonicalPath;\n  } else {\n    throw new IllegalStateException(\"File is outside extraction target directory.\");\n  }\n}\npublic final void unzip(String filename) throws java.io.IOException {\n  FileInputStream fis = new FileInputStream(filename);\n  ZipInputStream zis = new ZipInputStream(new BufferedInputStream(fis));\n  ZipEntry entry;\n  int entries = 0;\n  long total = 0;\n  try {\n    while ((entry = zis.getNextEntry()) != null) {\n      Log.d(LOG_TAG, \"Extracting: \" + entry);\n      int count;\n      byte data[] = new byte[BUFFER];\n      // Write the files to the disk, but ensure that the filename is valid,\n      // and that the file is not insanely big\n      String name = validateFilename(entry.getName(), \".\");\n      if (entry.isDirectory()) {\n        Log.d(LOG_TAG, \"Creating directory \" + name);\n        new File(name).mkdir();\n        continue;\n      }\n      FileOutputStream fos = new FileOutputStream(name);\n      BufferedOutputStream dest = new BufferedOutputStream(fos, BUFFER);\n      while (total + BUFFER <= TOOBIG && (count = zis.read(data, 0, BUFFER)) != -1) {\n        dest.write(data, 0, count);\n        total += count;\n      }\n      dest.flush();\n      dest.close();\n      zis.closeEntry();\n      entries++;\n      if (entries > TOOMANY) {\n        throw new IllegalStateException(\"Too many files to unzip.\");\n      }\n      if (total + BUFFER > TOOBIG) {\n        throw new IllegalStateException(\"File being unzipped is too big.\");\n      }\n    }\n  } finally {\n    zis.close();\n  }\n}\nThis code snippet is referenced from the CERT Secure Coding Standards.\n```. ",
    "jdnichollsc": "And running the command with --debug option =>\nappcenter codepush release-react -m --description \"Publish last changes\" -d Production --debug\nOutput from terminal\n```\nUsing appcenter-cli version: 1.0.17\nlogFilter, request: {\n  \"rawResponse\": false,\n  \"queryString\": {},\n  \"url\": \"https://api.appcenter.ms/v0.1/apps/AppName/AppName-iOS/deployments/Production\",\n  \"method\": \"GET\",\n  \"headers\": {\n    \"Content-Type\": \"application/json; charset=utf-8\",\n    \"user-agent\": \"appcenterCli/1.0.17 NodeJS/v6.3.0 win32/10.0.16299\",\n    \"x-api-token\": \"....\",    \"internal-request-source\": \"cli\",    \"diagnostic-context\": \"046914b1-6522-40ba-95c5-f96281357ad8\",    \"cli-command-name\": \"codepush release-react\"\n  },\n  \"body\": null\n}\nResponse status code: 200\nBody: {\"name\":\"Production\",\"key\":\"....\",\"latest_release\":{\"target_binary_range\":\"1.0.9\",\"blob_url\":\"https://codepush.blob.core.windows.net/storagev2/34boekD07SmvRGcH3ZmGoYBlXiLNfecab3b1-de72-413a-82bf-69736ab347ce\",\"description\":\"Update resources to match with the last version\",\"is_disabled\":false,\"is_mandatory\":true,\"label\":\"v2\",\"package_hash\":\"cfa1b0d735745659a1654e60c4f166838fb63e425f3d141e153a8beaecdd9c7d\",\"released_by\":\"devs@...\",\"release_method\":\"Upload\",\"rollout\":100,\"size\":6062983,\"upload_time\":1519916122407,\"diff_package_map\":{\"1b77f313a2f7fd9400577da71f85003d811d9acaf42911eb9076af6b1dd1e1b9\":{\"size\":364070,\"url\":\"https://codepush.blob.core.windows.net/storagev2/Nmo86FCaqE_gMwKvtYujpwGVZsBbfecab3b1-de72-413a-82bf-69736ab347ce\"}}}}\n| Getting app info...logFilter, request: {\n  \"rawResponse\": false,\n  \"queryString\": {},\n  \"url\": \"https://api.appcenter.ms/v0.1/apps/AppName/AppName-iOS\",\n  \"method\": \"GET\",\n  \"headers\": {\n    \"Content-Type\": \"application/json; charset=utf-8\",\n    \"user-agent\": \"appcenterCli/1.0.17 NodeJS/v6.3.0 win32/10.0.16299\",\n    \"x-api-token\": \"...\",\n    \"internal-request-source\": \"cli\",\n    \"diagnostic-context\": \"046914b1-6522-40ba-95c5-f96281357ad8\",\n    \"cli-command-name\": \"codepush release-react\"\n  },\n  \"body\": null\n}\n- Getting app info...Response status code: 200\nBody: {\"id\":\"fd703977-28a7-499b-a128-179a511b1cef\",\"app_secret\":\"....\",\"description\":null,\"display_name\":\"AppName-iOS\",\"name\":\"AppName-iOS\",\"os\":\"iOS\",\"platform\":\"React-Native\",\"origin\":\"appcenter\",\"icon_url\":null,\"created_at\":\"2018-01-19T17:00:34.000Z\",\"updated_at\":\"2018-01-19T17:00:34.000Z\",\"owner\":{\"id\":\"....\",\"avatar_url\":null,\"display_name\":\"AppName\",\"email\":\"...\",\"name\":\"AppName\",\"type\":\"user\"},\"azure_subscription\":null,\"member_permissions\":[\"manager\"]}\nDetecting ios app version:\nUsing the target binary version value \"1.0.9\" from \"ios\\appName\\Info.plist\".\nRunning \"react-native bundle\" command:\nnode node_modules\\react-native\\local-cli\\cli.js bundle --assets-dest C:\\Users\\seven\\AppData\\Local\\Temp\\code-push118423-32612-ttdtky.lnwk0ara4i\\CodePush --bundle-output C:\\Users\\seven\\AppData\\Local\\Temp\\code-push118423-32612-ttdtky.lnwk0ara4i\\CodePush\\main.jsbundle --dev false --entry-file index.js --platform ios\nScanning folders for symlinks in C:\\dev\\newapppoc\\react-native\\node_modules (24ms)\nScanning folders for symlinks in C:\\dev\\newapppoc\\react-native\\node_modules (23ms)\nLoading dependency graph, done.\nbundle: start\nbundle: finish\nbundle: Writing bundle output to: C:\\Users\\seven\\AppData\\Local\\Temp\\code-push118423-32612-ttdtky.lnwk0ara4i\\CodePush\\main.jsbundle\nbundle: Done writing bundle output\nbundle: Copying 34 asset files\nbundle: Done copying assets\nReleasing update contents to CodePush:\nError: Failed to release a CodePush update.\n```. @ajwhite woww thanks for report that!. Hi @NickToropov, thanks for the quickly response!\nSame issue, check the output from Windows for Android in this case\n```\nDetecting android app version:\nUsing the target binary version value \"1.0\" from \"android\\app\\build.gradle\".\nRunning \"react-native bundle\" command:\nnode node_modules\\react-native\\local-cli\\cli.js bundle --assets-dest C:\\Users\\seven\\AppData\\Local\\Temp\\CodePush\\CodePush --bundle-output C:\\Users\\seven\\AppData\\Local\\Temp\\CodePush\\CodePush\\index.android.bundle --dev false --entry-file index.js --platform android\nScanning folders for symlinks in C:\\dev\\newapppoc\\react-native\\node_modules (19ms)\nScanning folders for symlinks in C:\\dev\\newapppoc\\react-native\\node_modules (52ms)\nLoading dependency graph, done.\nbundle: start\nbundle: finish\nbundle: Writing bundle output to: C:\\Users\\seven\\AppData\\Local\\Temp\\CodePush\\CodePush\\index.android.bundle\nbundle: Done writing bundle output\nbundle: Copying 36 asset files\nbundle: Done copying assets\nReleasing update contents to CodePush:\nUpload progress:[=============================                     ] 59% 3.9s[Error]  write ECONNRESET\n``. @NickToropov yes, the same result \"Healthy\". @NickToropov of course, I have executed the same command from a MacBook Pro (Touchbar) and from Windows, and the same output keeps coming. @NickToropov executing the same script from AppCenter using aappcenter-post-build.sh` works perfect, so I don't know what's the problem from Colombia...\nMy beautiful script appcenter-post-build.sh:\n```\n!/usr/bin/env bash\nExample: Install App Center CLI\nnpm install -g appcenter-cli\nENVIRONMENT=Develop\nAPP_NAME=CompanyName/AppName-iOS\nTOKEN=mytoken\nif [ \"$APPCENTER_BRANCH\" == \"master\" ];\nthen\n    ENVIRONMENT=Production\nfi\nif [[ -z \"$APPCENTER_XCODE_PROJECT\" ]]; then\n    APP_NAME=CompanyName/AppName-Android\nfi\necho \"** PUBLISH CHANGES WITH CODEPUSH ****\"\necho \"APP NAME               => $APP_NAME\"\necho \"CURRENT ENVIRONMENT    => $ENVIRONMENT\"\necho \"SELECTED RN PACKAGE    => $APPCENTER_REACTNATIVE_PACKAGE\"\necho \"SELECTED XCODE PROJECT => $APPCENTER_XCODE_PROJECT\"\necho \"ANDROID VARIANT        => $APPCENTER_ANDROID_VARIANT\"\nappcenter codepush release-react -a \"$APP_NAME\" -m --description \"Update app\" -d \"$ENVIRONMENT\" --token \"$TOKEN\"\n```\nThanks for the help, Nicholls. @NickToropov thanks for the response! I already made the following configuration https://github.com/Microsoft/react-native-code-push#multi-deployment-testing\nBut do you have any example to change the deployment name using appcenter-pre-build.sh? I want to use a new deployment called Develop instead of Staging for the development build.\nThanks in advance!. @NickToropov How can I change the build configuration to use Debug for my develop branch?\nExample:\nios-setBuildConfiguration { buildConfiguration: 'Debug' }\nThanks in advance, Nicholls. Ohh thanks @NickToropov, the example of the scheme is very important, we need that step from the documentation of Multi-Deployment Testing \ud83d\udc4d . @MikePodgorniy you need to create the schema from Xcode, publish the changes to the branch and later update the configuration of that branch from appcenter to use that schema :). @NickToropov sorry, what's the configuration for Staging? I can see the following issue from AppCenter:\n2018-08-24T00:19:09.6933720Z ld: library not found for -lPods-MyApp. thanks @filiphosko. I fixed my issues using this configuration: https://medium.com/@royprashenjeet25/solution-of-appcenter-codepush-multi-deployment-issue-ios-which-i-have-faced-c149813f84dd. ",
    "borkess": "Hi @alexandergoncharov I think I accidentally installed some stuff on my non-CodePush app. I rolled back the changes in my package.json file, deleted node_modules, and ran npm install. Now it' working OK. Thank you for your time.. ",
    "duckscorpion13": "\nthx\nI reset Exception Domains \nthen it's workng\n. ",
    "sangdesigner": "issue fixed. now i am facing update invalid metadata aborting. Hi I have fix this issue\nNow invalid update meta data aborting error comes\nOn Wed 30 May, 2018, 11:47 AM Alexander Goncharov, notifications@github.com\nwrote:\n\nHi @sangdesigner https://github.com/sangdesigner,\nUnfortunately, it is difficult to help with without your provided\nadditional info as in issue template.\nCould you please fill it and provide to us as much additional info as\npossible? Any logs, code example, repro steps would really help to\nunderstand your issue.\nThanks,\nAlexander\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/1293#issuecomment-393042974,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AlLA9wiDRS1ATiBWR_K_b_pIejRRBvd2ks5t3jlngaJpZM4ULrQ1\n.\n. Yes\n\nOn Wed 30 May, 2018, 12:20 PM Alexander Goncharov, notifications@github.com\nwrote:\n\n@sangdesigner https://github.com/sangdesigner , if I understand you\ncorrectly you have issue with updating metadata at now?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/1293#issuecomment-393049655,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AlLA96S5oe86pv9-NzsNrz_pQ2vi9aslks5t3kEsgaJpZM4ULrQ1\n.\n. im using reactnative auto updater plugin\n. \n\nEnvironment:\n  OS: Windows 7\n  Node: 8.11.1\n  Yarn: Not Found\n  npm: 3.10.9\n  Watchman: Not Found\n  Xcode: N/A\n  Android Studio: Version  3.1.0.0 AI-173.4720617\nPackages: (wanted => installed)\n  react: 16.3.1 => 16.3.1\n  react-native: 0.55.4 => 0.55.4\n. Using Reactnative auto updater 0.2.5 version\nWhen i running the app its checking update after invalid update meta data Aborting messages show. yes i refer this but i know how to fix the issue. im posting the issue there also but no reply. Hi Alexander\nI need some help to fix this following issue\n invalid update meta data Aborting messages show\nin reactnative auto updater . ",
    "jiaoxuebing2014": "@NickToropov Thank you very much. I solved the problem according to your prompt.. ",
    "yulianger": "@alexandergoncharov thanks for your reply.\nreact-native-code-push version:5.2.2\nreact-native version:0.44\niOS/Android/Windows version: ios\ndebug build and release build, simulator andphysical device both have this problem...\nI try to use react-native bundle and code-push release  command,I can see that If I have assets folder,it will have this problem.\nwithout assets folder the project works well.... @zhaoziliang I have delete .DS_Store files,still can not work..... @zhaoziliang You have solved this problem by finding hidden files?. @alexandergoncharov First time the app can updated from codepush, from second time, code push cannot update..\nI try to use code-push release-react  and  code-push release  commands, still not worked..  The same code and images assets under android version can work, just IOS Version cannot work. ",
    "yqz0203": "@yulianger \nHave you resolved it?\nMaybe you can look this\nI found that because of an unvisible special symbol was at the beginning of a file name. It makes the result of replacing filepath not correct, so that the packageHash check failed.. ",
    "kissmypiss": "Here is the reply from Apple @NickToropov and it mentioned code-push usage ... \n\nGuideline 2.5.2 - Performance - Software Requirements\nYour app, extension, or linked framework appears to contain code designed explicitly with the capability to change your app\u2019s behavior or functionality after App Review approval, which is not in compliance with App Store Review Guideline 2.5.2 and section 3.3.2 of the Apple Developer Program License Agreement.\nSpecifically, it would be appropriate to remove any and all code updating or feature change-capable features from this app before resubmitting for review including, but not limited to the following classes: CodePushDownloadHandler, CodePushPackage, CodePushUpdateUtils. We look forward to reviewing your revised submission.\nThis code, combined with a remote resource, can facilitate significant changes to your app\u2019s behavior compared to when it was initially reviewed for the App Store. While you may not be using this functionality currently, it has the potential to load private frameworks, private methods, and enable future feature changes. This includes any code which passes arbitrary parameters to dynamic methods such as dlopen(), dlsym(), respondsToSelector:, performSelector:, method_exchangeImplementations(), and running remote scripts in order to change app behavior and/or call SPI, based on the contents of the downloaded script. Even if the remote resource is not intentionally malicious, it could easily be hijacked via a Man In The Middle (MiTM) attack, which can pose a serious security vulnerability to users of your app.. \n",
    "jackmew": "I use codepush and receive this information..\n\n. ",
    "kira1928": "Hi @rodrigoalmeidaee ,\nThanks for your information!\nI think your reply is very important, but it's ignored because it's under a closed issue.\nCould you resend it in a new issue so that more users and code-push developers can notice it?. ",
    "sagark1510": "@NickToropov  thanks for reply. I have done that step. Still it's giving this issue.. Ok I'll share url very soon.. @NickToropov I could produce it on react-native-config itself... so didn't integrated code-push. If you can check the project and let me know what can be the issue it would be very helpful.\nbelow is the project which I am having issue with:\nhttps://github.com/sagark1510/multi-env-issue. @NickToropov I have added you as collaborator. Please check for the invitation.. @NickToropov thanks mate. checking right now, will update asap.. @NickToropov it's working. Thank you very much for helping it out. I tried with one of my project having codepush integrated. I think issue is that I was using react-native-schemes-maganer's shell script which is not needed in this case. \nThank you very much mate.. ",
    "jamessawyer": "@alexandergoncharov hey thanks for your help. I found I build my package in debug mode. I modified it as 'release' mode, i's ok now, thanks again. Thanks for your help @alexandergoncharov .I will try to provide a project later when I am free.. @yuri-kulikov I tried command code-push patch my_app Production -l v1 --targetBinaryVersion \"<=1.0.1\" ,but got an error:   '--targetBinaryVersion <=1.0.1' not support.. PS,I use code-push cli version 2.1.9, if it matters. Thanks so much for your help. Actually I use this library for my custom file hoisting. I thought it has no effect on code-push cli, so I didn't mension it at first. Now I think it maybe it does matter to codepush cli, I will make it clear first. I'll close it for moment. And reopen it if I still have doubts Later. Thanks again! @yuri-kulikov . ",
    "kevindavee": "Hi @alexandergoncharov thank you for responding.\nCan you please tell me more detail about the logs, where I can find it ?\nFor the CodePush configuration, here's the file:\n```\nclass App extends Component {\n  render () {\n    console.disableYellowBox = true\n    return (\n      \n\n\n    )\n  }\n}\nconst codePushOptions = {\n  checkFrequency: codePush.CheckFrequency.ON_APP_RESUME,\n  installMode: codePush.InstallMode.ON_NEXT_RESTART\n}\nexport default codePush(codePushOptions)(App)\n```\nThis issue happened in both Android and iOS. For the steps, I think it is as simple as I push my updates to code push, and then I open my app that is minimized (not closed). Then wait a few seconds, it will restart by it self. . But my debug app is not receiving updates. How can I log the result ?\nHow about my configuration ? Is it right ?. What version of react-native-code-push are you using ? Maybe I can try using that version @alexandergoncharov . Here's my log from XCode. I filtered using CodePush keyword. Hope it will help you to identify the problem\nin App (at CodePush.js:504)\n    in CodePushComponent (at renderApplication.js:35)\n    in App (at CodePush.js:504)\n    in CodePushComponent (at renderApplication.js:35)\n2018-05-31 15:43:16.092 [info][tid:com.facebook.react.JavaScript] [CodePush] Checking for update.\n2018-05-31 15:43:16.092683+0700 YumboxApp[12217:344785] [CodePush] Checking for update.\n2018-05-31 15:43:17.347 [info][tid:com.facebook.react.JavaScript] [CodePush] Downloading package.\n2018-05-31 15:43:17.347500+0700 YumboxApp[12217:344785] [CodePush] Downloading package.\n2018-05-31 15:43:18.668 [warn][tid:com.facebook.react.CodePushQueue][RCTEventEmitter.m:54] Sending `CodePushDownloadProgress` with no listeners registered.\n2018-05-31 15:43:18.668153+0700 YumboxApp[12217:344721] Sending `CodePushDownloadProgress` with no listeners registered.\n[CodePush] Applying diff update.\n[CodePush] Verifying hash for folder path: /Users/kevindave/Library/Developer/CoreSimulator/Devices/B0BBB5D3-4E3C-45ED-943B-06EFE0A3B7B4/data/Containers/Data/Application/6C5E7D2A-C6B6-48BC-8462-A855829B7D11/Library/Application Support/CodePush/8ecbd3982fafe83065f43a16caecfe2bb91207a6df01ae7bd52914947962d2bb\n[CodePush] Manifest string: (\n    \"CodePush/main.jsbundle.meta:e906ec0d44b4a1ad3dd8b6ca185d4c869f469fa5cf26d8ea90efde45db25f45b\",\n    \"CodePush/main.jsbundle:fce02edeb8ea4e12025103a5ef3c29e898abc0888f90541b1ee2c70dc9354340\",\n    \"CodePush/assets/App/Images/Icons/hamburger@2x.png:fc7dd76200cfb120b9716c5b7f5e7dae50b02d7a6ad31c62469cce1befa3169d\",\n    \"CodePush/assets/App/Images/Icons/chevron-right@2x.png:7ebb69c03ecb443cb4090e3a163e2e69d542bdd4868ba3585173b150f10b3d3f\",\n    \"CodePush/assets/App/Images/Icons/icon-home@2x.png:342f1ef4b16f4d8cb20d81c83dbdc63241e8f0d33bdccccde4a72ec189a840e7\",\n    \"CodePush/assets/App/Images/Icons/icon-usage-examples@2x.png:874b7abb6ac8b80afd6b1a676c4ff4ba41c700158c4c4e886758b4e28a7e6409\",\n    \"CodePush/assets/App/Images/Icons/faq-icon.png:afa33444f20f0640562c8adc89ec92e3eb083b380e0261d0295631b9fb123ab7\",\n    \"CodePush/assets/App/Images/Icons/icon-device-information@2x.png:ad1b8d0129fc161927d89895f9d84fbddb2510f6f68b5f2b82b24069480d6273\",\n    \"CodePush/assets/App/Images/Icons/ico\n[CodePush] Expected hash: 8ecbd3982fafe83065f43a16caecfe2bb91207a6df01ae7bd52914947962d2bb, actual hash: 8ecbd3982fafe83065f43a16caecfe2bb91207a6df01ae7bd52914947962d2bb\n[CodePush] The update contents succeeded the data integrity check.\n2018-05-31 15:43:19.343 [info][tid:com.facebook.react.JavaScript] [CodePush] Installing update.\n2018-05-31 15:43:19.343212+0700 YumboxApp[12217:344785] [CodePush] Installing update.\n2018-05-31 15:43:19.350 [info][tid:com.facebook.react.JavaScript] [CodePush] Restarting app\n2018-05-31 15:43:19.350319+0700 YumboxApp[12217:344785] [CodePush] Restarting app\n    in App (at CodePush.js:504)\n    in CodePushComponent (at renderApplication.js:35)\n    in App (at CodePush.js:504)\n    in CodePushComponent (at renderApplication.js:35)\n2018-05-31 15:43:20.815 [info][tid:com.facebook.react.JavaScript] [CodePush] Checking for update.\n2018-05-31 15:43:20.815533+0700 YumboxApp[12217:344940] [CodePush] Checking for update.\n2018-05-31 15:43:20.822 [info][tid:com.facebook.react.JavaScript] [CodePush] Reporting CodePush update success (v85)\n2018-05-31 15:43:20.821761+0700 YumboxApp[12217:344940] [CodePush] Reporting CodePush update success (v85)\n2018-05-31 15:43:22.914 [info][tid:com.facebook.react.JavaScript] [CodePush] App is up to date.\n2018-05-31 15:43:22.914113+0700 YumboxApp[12217:344940] [CodePush] App is up to date.\n    in App (at CodePush.js:504)\n    in CodePushComponent (at renderApplication.js:35)\n    in App (at CodePush.js:504)\n    in CodePushComponent (at renderApplication.js:35)\nBy the way, everytime I push my updates to CodePush, I use --mandatory. Is it affecting this issue ?. ",
    "piyush965": "@matthargett - Codepush integration on WPF app also require a UWP project solution which can be generated using react-native windows cmd. This info must be documented because in our case we only targeted to .NET46 and UWP project was not added to solution and had to spent lot of time to find such info.. @alexandergoncharov  Yes I went through this document. But it no where says what are the steps to setup code push support on RN WPF application. I had to read - https://github.com/Microsoft/react-native-code-push/pull/684 to follow some setup steps also along with that it requires UWP project as mentioned in my previous comment, this information is missing. \nIf all these steps are captured in document would be helpful for everyone. . @alexandergoncharov  Thanks for the update. \nIt would be helpful if the setup-windows.md doc also include code push setup steps for WPF platform. . ",
    "scottmas": "Also worth noting, is that weirdly enough, I only get the issue of the missing env variables on --platform ios. . Closing this for now, since I'm switching to react-native-config, which makes this issue go away. Not sure precisely what was happening. . ",
    "acomito": "@scottmas did you get react-native-config and react-native-code-push working together? I saw some people in the react-native-config raising issues but some are older.\nDo you need to do anything special? I'm a little weary of using the environment variables available via appcenter.\nUPDATE 1:\nfurther reading: https://blog.blazingedge.io/react-native-continuous-integration-and-deployment/. ",
    "tvand7093": "I just had this issue, and for me it was caused by the bundler caching stuff. So after poking around a bit I found the extra-bundler-option flag which can be used like this:\nbash\nappcenter codepush release-react -a your-org/your-app -d Staging \\\n--extra-bundler-option=\"--reset-cache\"\nThis effectively tells the bundler to \"start fresh\" when building the bundle to deploy to CodePush.\n. ",
    "jamesholcomb": "Thanks @tvand7093, ran into this as well.  Though it seems that --extra-bundler-option is only supported in appcenter CLI.\nWhy is --reset-cache not the default behaviour for the bundler?\n. ",
    "MikePodgorniy": "Hello there! \nI want to change \"Shared Scheme\" in my app in appcenter.ms\nBut appcenter show me schemes MCourses & MCourses-tvOS\nand I don't have any scheme from my workspace or project in the list on appcenter \"Build configuration\"\nHow to update this f#$X@ list?\nI tried to create new brunch, build project but list still including only 2 items:  MCourses & MCourses-tvOS\n@jdnichollsc  could you know how it works? \n\n. @jdnichollsc  you are right, it's easy :D\nproblem was in my \"gitlab to bitbucket\" solution\nthanks . ",
    "karm435": "Is there any way to have a shared variable among different configurations?. ",
    "zxccvvv": "Thanks for the response Nick,\nActually, I'm missed some word on docs, I'm just looking out some \"Sub header\" and find some code without read the information before,\nbecause I'm too lazy to read all \"normal\" words at Plugin Configuration so I'm looking for the code and seeking there's 3 method to edit a code at MainApplication, and those code makes me confused to choose which code is the right way to do\nAlso I'm not aware if the folder already cleaned after uploading bundle to the server, because the log itself doesn't give an information if the file is deleted after that,\nI'm sorry for this useless issues,. Hi alexander,\nThanks for the response,\nI'll wait some good news later. Hi @alexandergoncharov\nI close this issue because of duplicated issue https://github.com/Microsoft/react-native-code-push/issues/112\nThanks for the response,\nMy issue appears because i've used same version of the app (because of this apps still on development, that i think i dont need to use different version for internal testing). ",
    "eshwartm": "deploymentKey in the URL removed for obvious reasons.. rct_native.zip\nI have attached a sample project. You need to run npm install on the root folder, and maybe gem install and pod install in the iOS project folder inside the root folder.. When I comment out the line that says codePush(SimpleView) which is what links the component to Code Push, I don't get any errors.. will get back to you after checking. Need 10 minutes. - I run npm install on the root folder i.e., rct-native. \n- Then I cd into rct-native-test, run bundle install, and pod install.\n- If pod install fails, comment out the plugin cocoapods-fix-react-native line in the Podfile, and run pod install again.\n- And then uncomment the same line (plugin cocoapods-fix-react-native) and run pod install again.\n- At this point, I run npm start on the root folder (rct-native).\n- I clean the xcode project and build it anyway (inspite of the error message 'No such module React')\n. I suggest you try cleaning and running the project first, inspite of the error.. ",
    "jeffreymendez1993": "This error does nothing for me and is a pain to try to figure out.. wrong api key closing .. Yeah I couldn\u2019t figure it out and spent 4 hours or so on it. Figured that I was doing something stupid simple since I couldn\u2019t debug it. @half-orgre. ",
    "HsuWeiYu666": "\u6211\u7684\u554f\u984c\u89e3\u6c7a\u4e86!!\n\u6211\u672c\u4f86\u4f9d\u7167https://github.com/Microsoft/react-native-code-push/blob/master/docs/setup-android.md\n\u6b65\u9a5f\u53bb\u914d\u7f6e\u7d50\u679c\u5f97\u5230\u4e0a\u9762\u8aaa\u7684\u932f\u8aa4\u8a0a\u606f\n\u5f8c\u4f86\u6211\u628aandroid/app/build.gradle\u88e1\n...\napply from: \"../../node_modules/react-native/react.gradle\"\napply from: \"../../node_modules/react-native-code-push/android/codepush.gradle\"\n...\n\u9019\u5169\u884c\u62ff\u6389\u5c31\u53ef\u4ee5\u6b63\u78ba\u57f7\u884c\u4e86. ",
    "Y-JH": "@HsuWeiYu666  \u54b1\u4fe9\u7684\u9519\u8bef\u4e00\u6837\uff0c\u6211\u6ef4\u8fd9\u4e2a\u9519\u8bef\u7684\u539f\u56e0\u662f\nndroid/app/build.gradle\u4e2d\u7684\n'apply from: \"../../node_modules/react-native-code-push/android/codepush.gradle'\n\u91cd\u590d\u5f15\u5165\u5bfc\u81f4\uff0c\u5220\u6389\u91cd\u65b0\u7f16\u8bd1\u5c31\u597d\u4e86\u3002. ",
    "Symous": "Hi @NickToropov, I have try to re-install the code-push-cli. but still the same error.\ncode-push  version: 2.1.8\nnpm  version: 6.0.1\nnode version: 8.1.2. @NickToropov Hi, friend, I solved it by reinstall it just now:\nnpm uninstall -g code-push-cli\nnpm install -g code-push-cli. And before that reinstall it I also have try to install pesudomap and yallist globally:\nnpm install -g pesudemap \nnpm install -g yallist\nthat's works too.. Sorry,the cat press the Enter of my keyborad to submit this issue... :( I'm beating it now.... ",
    "brzonsea": "Hi @alexandergoncharov \nThank you for your reply. \nMy AndroidManifest.xml file contains the following permissions.\n<uses-permission android:name=\"android.permission.CAMERA\"/>\n    <uses-permission android:name=\"android.permission.INTERNET\" />\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\n    <uses-permission android:name=\"android.permission.SYSTEM_ALERT_WINDOW\"/>\n    <uses-permission android:name=\"android.permission.RECEIVE_BOOT_COMPLETED\" />\n    <uses-permission android:name=\"android.permission.VIBRATE\" />\nShouldn't these be sufficient for using CodePush? I believe WRITE_EXTERNAL_STORAGE and READ_EXTERNAL_STORAGE should be sufficient for CodePush?. I fixed the issue by reverting my React Native version back to 0.53.0\nIt seems the error was caused by some of the newly introduced React Native Blob features, which were introduced at version 0.54. \nAfter downgrading React Native, the error doesn't occur anymore. I guess code push and React Native's compatibility with the Blob features aren't so stable yet? \nAnyway thank you for the help. @alexandergoncharov . Yes, I will inform you when I have a reproducible demo at the ready. @alexandergoncharov . ",
    "marekchen": "It works. Thank you very much. ",
    "LuisRizo": "Thank you for your reply!\nJust to summarize, in theory I can have an app as developed and with as many features as for example Instagram, with code-push installed, and at any point in time I can just edit the index.js file to just do:\n```\nimport React from 'react'\nimport {AppRegistry} from 'react-native' \nAppRegistry.registerComponent('instagram', () => React.Fragment);\n``\nAnd also only leavereactandreact-nativeas dependencies in thepackage.jsonfile and acode-push` will work?. Hi @alexandergoncharov,\nThank you for your reply!\nMy goal is to use a code-push to deprecate v1 of our app and guide our users to update to v2 since we'll also deprecate the back-end hooked up to v1. My dependencies are just enough to render a simple screen saying to the users that they should update. That includes react, react-native and, of course, code-push. I did an npm install so that should take care of the peer dependencies of those packages.\nThe reason behind changing native code is that the dependencies are old and some of them have been deprecated and cause bugs that are not worth fixing. I am not using new native code, I just uninstalled it to get the app to run on ios and android without compilation errors.\nSo if deleting, and stopping using native code will not cause my code-push to be rolled back automatically, I think I'm all set!\nPlease let me know if something isn't clear, or not correct. Hello @alexandergoncharov,\nThank you again for your reply! This might help you understand my situation a bit more:\nLet me give a more visual example:\nI have an app, say v1.4.0 in the play store and apple store. This app works, but it's an old app. It has many native dependencies like:\n\nreact-native-firebase\nreact-native-vector-icons\nreact-native-branch\netc...\n\nThe repository that holds this app did not keep track of releases and kept doing commits and upgraded the version up to, say v1.5.0, but this was never pushed to the app store.\nSo now we want to deprecate this app, so we created a whole new react-native project to replace this old app and we will call it v2.0 It has the same idea but it's built totally different. For example, we are now using relay instead of redux.\nNow I need to make a code-push to the old app (v1.4.0) that our end-users have that would look like this:\n```js\n// file name: index.js\nimport React, { Component } from 'react';\nimport { AppRegistry, Image, Platform, Linking, StyleSheet, View, Text, TouchableOpacity } from 'react-native'\nimport codePush from \"react-native-code-push\";\nimport logoImage from './images/logo.png'\nimport pic from './images/pic.jpg'\nclass Deprecated extends Component {\n  openNewApp = () => {\n    const newAppURL = \"https://website.com\"\n    Linking.openURL(newAppURL)\n  }\n  render() {\n    return(\n      \n\n\n\n\n\n\n\n\nUpdate Required{'\\n'}\n            Update to our latest app to get the most out of this app!\n            {'\\n'}\n          \n\nUpdate\n\n\n\n    )\n  }\n}\nclass MainApp extends Component {\n}\nMainApp = codePush({ checkFrequency: codePush.CheckFrequency.MANUAL })(Deprecated);\nconst styles = StyleSheet.create({\n  ...\n})\nAppRegistry.registerComponent('oldapp', () => MainApp);\n```\nAs you can see, this removes access to any of the other screens we were previously using, as well as the native installations except for CodePush, leaving an app with a single screen with a link to open our website to download the v2.0 app.\nHowever, I could not find the code used to create version v1.4.0 due to the repository not keeping track of the versions. So my idea is to use the code in v1.5.0, change the version back to v1.4.0 and make the changes here and do a CodePush.\nHere is where the deletion of the native installations came in. All these packages installed even in v1.5.0 are old and they create compilation errors that are not worth for me to fix since I'm not going to use any of those packages. Therefore, I deleted all of those packages (like react-native-firebase), including in native code, and left only the necessary dependencies to get the code on the snippet above to run.\nAfter all this, my question is, will doing a CodePush like code-push release-react oldApp --targetBinaryVersion \"1.4.0\" work even though I am not using the same codebase that was used to create v1.4.0?\nAlso, releasing a new binary with the code above will more likely be rejected by the corresponding stores, so releasing a new binary is not an option.. Hello @alexandergoncharov,\nThank you for your time and your response!\nI appreciate you tested it locally! I'm really happy you found no issues. We're going to be doing this deployment soon so I will definitely let you know how it goes!\nThank you very much again for all.\nBest,\nLuis Rizo. UPDATE: we tried doing the code-push update with that snippet code above to our own test devices, and it worked out great!\nThe live version of the app had 1rn-splash-screen1 though, and I did forget to put the code to hide it. A simple npm install of the library using the same version as app v1.4.0 worked out beautifully as the native config for it was already in place.\nOne more thing that I noticed is that there is no way to actually rollback a release. Rollback just prevents future installations, I was hoping it would uninstall the last update on all the affected users. . ",
    "muyiyangyu": "Hi @alexandergoncharov ,Thank you very much for providing such excellent components to help us update the program more easily. I have solved this problem. I found that when running the program through the Yarn command, there is no need to manually set the Deployment key again. I think I have solved it.\nThank you!\nyangxiang. ",
    "iosfitness": "@alexandergoncharov Thanks for the reply \nI tried to build the archive via Xcode. @alexandergoncharov Please do let me know if any more information is needed from my end. ",
    "kaixiniOSTT": "\u4e3a\u4ec0\u4e48 \u9759\u9ed8\u66f4\u65b0 \u4e5f\u4f1a\u6709\u5f39\u7a97\u3002 \u53ea\u662f\u6ca1\u6709\u66f4\u65b0\u5185\u5bb9\u3002\ncodePush.sync({\n            updateDialog: false,\n            installMode:codePush.InstallMode.ON_NEXT_RESTART      \n }). code-push release-react codepushdemo  ios   --dev true --d Staging\nafter run the up code , it also pop-ups the default page, the show the normal page . reinstall the app to the phone ,then every thing is normal . just for the cache data is also running . ",
    "showtan001": "@kaixiniOSTT   \u4f60code-push\u7248\u672c\u662f\u591a\u5c11\uff1f\u4f60\u6709\u6ca1\u6709\u9047\u5230\u66f4\u65b0\u6210\u529f\u540e\u91cd\u65b0\u6ca1\u95ee\u9898\uff0c \u4f46\u662f IOS\u518d\u6b21\u91cd\u542fapp\u540e\u53c8\u6062\u590d\u5230\u4ee5\u524d\u7248\u672c   \u6211rn0.51.0  code-push 5.3.5  @alexandergoncharov . @iloveyumiforever    hi, what is your react native version?. Can you see your update code? @iloveyumiforever . ",
    "jkk": "Chiming in to say that we are experiencing a similar issue in production. Relatively rare, Samsung devices only, but causing difficulties deploying to an Enterprise user base where everyone is required to use the app. The only workaround is to delete and reinstall the app, forcing CodePush to try again (and hopefully succeed).. We are attempting to deploy a stopgap measure which tries to detect code-push errors and timeouts, then allows the user to restart the app. If anyone else has had success with workarounds, please share! I will report our findings after deploying and gathering data.. We've heard from three users that seem to have experienced this issue:\n\nSamsung S9, Android 8.0\nSamsung S8, unknown Android version\nSamsung J3, unknown Android version\n\nI haven't been able to reproduce it myself in an emulator or physical device.. We haven't been able to reliably reproduce this issue on our end on specific physical devices or emulators. It doesn't seem to happen every time, and our instrumentation is not the best, so it's hard to pin down. If/when we are able to gather more useful data, I'll be sure to share. Thanks for looking into it!. ",
    "goshashwat": "This is fixed in the below release.\nhttps://github.com/Microsoft/react-native-code-push/releases/tag/v5.3.4. ",
    "krystofbe": "\"fixed\" this by editing my build.gradle\nsubprojects {\n   afterEvaluate {\n     project -> if (project.hasProperty(\"android\")) {\n       android {\n            compileSdkVersion 26\n            buildToolsVersion \"26.0.3\"\n       }\n      }\n    }\n}. @alexandergoncharov Thanks! I've tested your changes and it works now!. ",
    "xaviraol": "Hi @alexandergoncharov\nWould it be possible to use the proposed approach here?. ",
    "JslinSir": "the same problem . ",
    "iloveyumiforever": "same problem + 1. After modify my AppDelegate.m to below, the problem is solved.\n#ifdef DEBUG\n    jsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index\" fallbackResource:nil];\n  #else\n    jsCodeLocation = [CodePush bundleURL];\n  #endif\n@JslinSir @showtan001  you guys may also check it\n@alexandergoncharov no problem for me now\nthanks^^. Environment:\n  OS: macOS High Sierra 10.13.4\n  Node: 9.6.1\n  Yarn: 1.7.0\n  npm: 6.1.0\n  Watchman: 4.9.0\n  Xcode: Xcode 9.4.1 Build version 9F2000\n  Android Studio: 3.1 AI-173.4819257\nPackages: (wanted => installed)\n  react: 16.3.1 => 16.3.1\n  react-native: 0.55.4 => 0.55.4. ",
    "shivawu": "@alexandergoncharov Thanks for investigating! That's my guess too based on looking at the code.\nConceptually, it should be possible. Maybe code-push-cli would need to add a command for uploading built binary release/its bundle and assets to codepush, with its version. Then when the client asks for a download, it needs to send its client version and the server would be able to find the right bundle to diff.\nI totally made things up above, looking forward to your investigation! :). Thanks for the investigation @alexandergoncharov! Just wondering why it isn't an option to adding an extra command to upload the binary bundle to codepush so that it could be diffed against?. ",
    "mavericksunny": "@alexandergoncharov Are you guys still working on this issue? I was having the same requirement, wanted to understand why we cant mix binary and code push bundles. ",
    "EdwardNickson": "Thanks @alexandergoncharov,\nThat's all I needed to know. ",
    "sankalpgoibibo": "Removed all earlier references of codepush in the app and then did a fresh install followed by npm link.\nThis lead to a modification in file MainApplication.java; though the changes were already there, but now the code is a little different from what it was earlier.\nThanks Alexander. . ",
    "452MJ": "+1\nrn:0.47.2 code-push:5.1.3-beta. ",
    "chocky335": "@alexandergoncharov It started happening after upgrade to RN 0.56 maybe smth with dependencies.\nThese are our android project configs:\n1) android/build.gradle\n```\nbuildscript {\n    repositories {\n        google()\n        jcenter()\n        maven {\n            url 'https://maven.google.com/'\n            name 'Google'\n        }\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.1.0'\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n        classpath 'com.google.gms:google-services:3.1.0'\n    }\n}\nallprojects {\n    repositories {\n        google()\n                // Add jitpack repository (added by react-native-spinkit)\n                maven { url \"https://jitpack.io\" }\n            maven { url 'https://zendesk.jfrog.io/zendesk/repo' }\n    mavenLocal()\n    jcenter()\n    maven {\n        // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm\n        url \"$rootDir/../node_modules/react-native/android\"\n    }\n    configurations.all {\n        resolutionStrategy {\n            force 'com.facebook.android:facebook-android-sdk:4.28.0'\n            force 'com.google.android.gms:play-services-gcm:11.8.0'\n        }\n    }\n    maven {\n        url 'https://maven.google.com/'\n        name 'Google'\n    }\n}\n\n2) android/app/build.gradle\nandroid {\n    compileSdkVersion 26\n    buildToolsVersion \"26.0.2\"\ndefaultConfig {\n    applicationId appId\n    minSdkVersion 16\n    targetSdkVersion 20\n    ...\n    multiDexEnabled true\n    ndk {\n        abiFilters \"armeabi-v7a\", \"x86\"\n    }\n}\n\n...\ndependencies {\n    implementation project(':react-native-firebase')\n// Firebase dependencies\nimplementation \"com.google.android.gms:play-services-base:11.8.0\"\nimplementation \"com.google.firebase:firebase-core:11.8.0\"\nimplementation 'com.google.firebase:firebase-messaging:11.8.0'\nimplementation 'me.leolin:ShortcutBadger:1.1.21@aar'\ncompile(project(':react-native-firebase')) {\n    transitive = false\n}\ncompile project(':react-native-fast-image')\ncompile project(':react-native-splash-screen')\ncompile project(':react-native-bottom-action-sheet')\ncompile project(':react-native-prompt-android')\ncompile project(':react-native-code-push')\ncompile project(':react-native-config')\ncompile project(':react-native-sentry')\ncompile project(':react-native-zendesk-support')\ncompile project(':react-native-device-info')\ncompile project(':react-native-branch')\ncompile project(':react-native-svg')\ncompile project(':react-native-fbsdk')\ncompile project(':react-native-image-picker')\ncompile project(':react-native-linear-gradient')\ncompile project(':react-native-vector-icons')\ncompile fileTree(include: ['*.jar'], dir: 'libs')\ncompile 'com.android.support:appcompat-v7:26.1.0'\ncompile 'com.android.support:design:26.0.2'\ncompile 'com.facebook.react:react-native:+'\n// From node_modules\ncompile 'com.zopim.android:sdk:1.3.5.1'\ncompile project(':react-native-zendesk-chat')\ncompile 'com.android.support:multidex:1.0.3'\n\n}\n.... app without codepush update: \n\napp with codepush update: \n\nour package.json dependencies:\n\"dependencies\": {\n    \"moment\": \"^2.18.1\",\n    \"pusher-js\": \"^4.2.2\",\n    \"react\": \"16.4.1\",\n    \"react-native\": \"^0.56.0\",\n    \"react-native-bottom-action-sheet\": \"^0.0.5\",\n    \"react-native-branch\": \"^2.2.4\",\n    \"react-native-code-push\": \"^5.4.0\",\n    \"react-native-config\": \"0.9.1\",\n    \"react-native-device-info\": \"^0.21.5\",\n    \"react-native-fast-image\": \"^4.0.0\",\n    \"react-native-fbsdk\": \"^0.7.0\",\n    \"react-native-firebase\": \"^4.1.0\",\n    \"react-native-image-picker\": \"^0.26.3\",\n    \"react-native-linear-gradient\": \"^2.0.0\",\n    \"react-native-notifications\": \"^1.1.17\",\n    \"react-native-prompt-android\": \"https://github.com/Noitidart/react-native-prompt-android#patch-1\",\n    \"react-native-radio-buttons\": \"^1.0.0\",\n    \"react-native-sentry\": \"^0.38.0\",\n    \"react-native-snap-carousel\": \"^2.1.4\",\n    \"react-native-splash-screen\": \"^3.0.6\",\n    \"react-native-svg\": \"^6.1.3\",\n    \"react-native-swipe-gestures\": \"^1.0.2\",\n    \"react-native-vector-icons\": \"^4.5.0\",\n    \"react-native-zendesk-chat\": \"^0.2.2\",\n    \"react-native-zendesk-support\": \"^1.0.9\",\n    \"react-navigation\": \"^2.3.1\",\n    \"tinycolor2\": \"^1.4.1\",\n    \"underscore\": \"^1.8.3\"\n  },\n  \"devDependencies\": {\n    \"babel-eslint\": \"^7.2.3\",\n    \"babel-jest\": \"20.0.3\",\n    \"babel-plugin-module-resolver\": \"^3.1.1\",\n    \"babel-preset-react-native\": \"^5.0.1\",\n    \"elm-format\": \"^0.6.1-alpha\",\n    \"eslint\": \"^4.10.0\",\n    \"eslint-config-airbnb\": \"^15.1.0\",\n    \"eslint-plugin-babel\": \"^4.1.2\",\n    \"eslint-plugin-flowtype\": \"^2.39.1\",\n    \"eslint-plugin-import\": \"^2.7.0\",\n    \"eslint-plugin-jest\": \"^20.0.3\",\n    \"eslint-plugin-jsx-a11y\": \"^5.1.1\",\n    \"eslint-plugin-react\": \"^7.4.0\",\n    \"eslint-plugin-react-native\": \"^3.1.0\",\n    \"flow-bin\": \"^0.74.0\",\n    \"flow-typed\": \"^2.1.2\",\n    \"husky\": \"^0.14.3\",\n    \"jest\": \"^21.1.0\",\n    \"jest-mock-now\": \"^1.1.1\",\n    \"lint-staged\": \"^4.3.0\",\n    \"react-native-schemes-manager\": \"^1.0.1\",\n    \"react-test-renderer\": \"16.0.0-alpha.12\",\n    \"xcode\": \"^0.9.3\"\n  }. ",
    "AlirezaAkbarix": "@alexandergoncharov, Thanks for attention, Beside the problem you mentioned, if user's connection is not stable and reachable (connected to wi-fi, but wi-fi hasn't internet), it stuck again.\nFor reproducing you can use emulator, turn your mac wi-fi off and then try to sync. In such a situation, your emulator has connection, but hasn't internet.. Hi @NickToropov \n\nAs a workaround you can manually check connection and then call sync method.\n\nI'm doing such a thing already, the problem occurs when device has connection, but the connection hasn't connection to the internet (I mentioned above).. ",
    "chengkaigithub": "in node_modules/react-native/local-cli/bundle/assetPathUtils:\n```\nconst drawableFileTypes = new Set([\n  'gif',\n  'jpeg',\n  'jpg',\n  'png',\n  'svg',\n  'webp',\n  'xml',\n]);\nfunction getAndroidResourceFolderName(asset: PackagerAsset, scale: number) {\n  // NOTE: When uploading updates, It is not empty.\n  // FIXME: When running on a mobile phone, There is a {} printed here.\n  console.log('code-push-res', drawableFileTypes);\n  if (!drawableFileTypes.has(asset.type)) {\n    return 'raw';\n  }\n  ......\n}\n```\nSo I wrote a method of traversing array and redefined a drawableFileTypesFix.\nModify the logic in the getAndroidResourceFolderName method.\n```\nconst drawableFileTypesFix = [\n    'gif',\n    'jpeg',\n    'jpg',\n    'png',\n    'svg',\n    'webp',\n    'xml',\n];\nconst isInArray = (arr, value) => {\n    for (var i = 0; i < arr.length; i++) {\n        if (value === arr[i]) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction getAndroidResourceFolderName(asset: PackagerAsset, scale: number) {\n    ......\n    if (!drawableFileTypes.has(asset.type) && !isInArray(drawableFileTypesFix, asset.type)) {\n        return 'raw';\n      }\n    ......\n}\n```\nI am not sure whether such a change is correct, but it works correctly.\nI've only tried Android.. Hello @alexandergoncharov ,\nThank you for your answer!\nI used the PNG picture.\nI output the asset.type\uff0cIt's png.\nThanks,\nChengKai. @alexandergoncharov Yes, the Android device can be updated normally. I'm going to try IOS today.. @alexandergoncharov  I just tested IOS, and there's no problem for updating.. @alexandergoncharov You can look at this project. I just deleted some sensitive information.\nhttps://github.com/chengkaigithub/TestPrimordialFuseRN.git. Hello @NickToropov \nYou need to execute the package script first before running the project.\nCommand is as follows(MAC):\n./offlinePackageRN.sh android. @alexandergoncharov \nThe first step:  npm install\nSecond steps:  react-native link\nThird steps:  ./offlinePackageRN.sh android\nFourth parts:  Open android projects with studio\nFifth steps:  \"./gradlew clean\" run in AndroidStudio Terminal\nSixth steps: Run app in AndroidStudio\nRecently, I was busy with a new project and I might not be able to respond promptly.. Hello @NickToropov !\nI personally tried it today, and there really is a little problem.\nPlease try again under my process.\nIn the TestPrimordialFuseRN directory.\nThe first step:\n npm install\nSecond steps:\n create Folder: TestPrimordialFuseRN/android/react-native-module/src/main/assets\nThird steps: \n/node_modules/react-native-scrollable-tab-view/SceneComponent.js \nModify this line of code for this file: const {shouldUpdated, ...props, } = Props;\nafter modification: const {shouldUpdated, ...props } = Props;\nFourth steps: \n./offlinePackageRN.sh android\nFifth parts: \nOpen android projects with studio.\nRun app in AndroidStudio\nCodePush deployment in the project requires you to create one yourself, and we do not allow it to be publicly available.\nCodePush deployment can be modified in this file: TestPrimordialFuseRN/android/react-native-module/src/main/java/com/suixingpay/reactNativeModule/RNEntryActivity.java\nAfter the app is launched, clicking on the HelloWorld text on the screen will load the RN interface.\nRecently in the development of web projects, I encountered a problem similar to the Set does not exist.\nReference: https://reactjs.org/docs/javascript-environment-requirements.html\nBut I don't have time to explore the feasibility of the reactjs link.\nI\u2019m too busy recently, replying late, sorry.. Hello @NickToropov !\nAppRegistry.registerComponent(appName, () => require('./app/Root').default);\nI tried it and could fix it.\nThank you very much.. Hi @NickToropov \nNo other questions! Thanks!. ",
    "ryanliszewski": "\nI can't create a test project because the code is sensitive but I can try to create a dummy project when I have time this week. \nI've tested this in debug and have not been able to reproduce the bug. The issue only appears in release. . Hey @NickToropov . I've been working on other projects and haven't had time. I will try to create a dummy project this weekend. . \n",
    "alexichristakis": "I'm having the same issue--appears in production build from TestFlight. If I quit and relaunch the application it works, but it rolls back to the previously installed build.\nedit: only appears in code push v5.4.0. ",
    "alchy58": "Hi,\nI'll try with the 5.3.0 version today.. Well, I downgraded to react-native-code-push v5.3.0 and still have the issue.\nUpgraded to RN 0.56 from 0.53, react-native-code-push v5.3.0 and v5.4.0 and still have the issue.\nOn Android, the app crashes one or two times after the installation but then, it runs correctly with the good Appcenter bundle.. Hi,\nI've managed to make the app working.\nI suppose that I lost myself between many documentation, trying to add Cocoapods for the first time, then manually, etc.\nIt's difficult to say what was wrong. I've finally manage to get it work with RNPM, but I needed to install it, react-native link didn't do the job which is weird because, as I understood, RNPM was merged into react-native link.. ",
    "nxz91": "Having the same issue with 5.4.0!. Same here! I'd written the bug myself :-) sorry for not getting back earlier. ",
    "buyuxing": "same problem\ni use codepush like this\n//in some file\nexport const appCheckUpdate = () =>{\n    CodePush.checkForUpdate().then((update) => {\n        if (!update) {\n            Alert.alert('\u63d0\u793a', '\u5df2\u7ecf\u662f\u6700\u65b0\u7248')\n        }\n        else {\n            CodePush.sync(\n                {\n                    installMode: CodePush.InstallMode.IMMEDIATE\n                },\n                (status) => {\n                    switch (status) {\n                        case CodePush.SyncStatus.DOWNLOADING_PACKAGE:\n                            // Show \"downloading\" modal\n                            Actions.reset('appUpdating')\n                            break;\n                        case CodePush.SyncStatus.INSTALLING_UPDATE:\n                            // Hide \"downloading\" modal\n                            break;\n                    }\n                },\n                ({ receivedBytes, totalBytes, }) => {\n                  / Update download modal progress /\n                }\n              );\n        }\n    }).catch(err => { \n        Alert.alert('\u63d0\u793a', '\u66f4\u65b0\u5931\u8d25.' + err)\n    })\n}\nand \n//index.js\nclass App extends Component {\n  componentDidMount(){\n    appCheckUpdate()\nrender() {\n    return (\n      .....\n    );\n  }\n }\nit works fine with iOS\nbut rollback with android. i add the follow code:\nlet codePushOptions = {checkFrequency: CodePush.CheckFrequency.MANUAL};\nApp = CodePush(codePushOptions)(App)\nexport default App\nit wouldn't rollback anymore. @NickToropov Thanks for help\nafter review the code of CodePush i realized that\nfunction codePushify(options = {}) {\n    ...\n    var decorator = (RootComponent) => {\n    const extended = class CodePushComponent extends React.Component {\n      componentDidMount() {\n        if (options.checkFrequency === CodePush.CheckFrequency.MANUAL) {\n          CodePush.notifyAppReady();\n        } else {\n        ...\n        }\nso add  CodePush(codePushOptions)(App) works\nbut i 'm comfusing why iOS don't need CodePush.notifyAppReady() to be called.\n. ",
    "mxc7609": "Released my update using 'code-push release-react MyApp-Android android'.\nIn my project, jsBundle pre-loaded in onCreate Method of MyApplication.\n@Override\n    public void onCreate() {\n        super.onCreate();\n        MyReactInstanceManager.getInstance().init(this);\nCode for MyReactInstanceManager:\n`\npublic static MyReactInstanceManager getInstance() {\n        if (mInstance == null) {\n            synchronized (MyReactInstanceManager.class) {\n                if (mInstance == null) {\n                    mInstance = new MyReactInstanceManager();\n                }\n            }\n        }\n        return mInstance;\n    }\n/**\n * @param context\n */\npublic void init(Context context) {\n    getReactInstanceManager(context);\n}\n\n/**\n * @param context\n * @return\n */\npublic ReactInstanceManager getReactInstanceManager(Context context) {\n    Application application = (Application) context.getApplicationContext();\n    if (mReactInstanceManager == null) {\n        ReactInstanceManagerBuilder builder = ReactInstanceManager.builder()\n                .setApplication(application)\n                .setJSMainModulePath(\"index\")\n                .addPackage(new MyReactPackage())\n                .addPackage(new MainReactPackage())\n                .addPackage(new RNCameraPackage())\n                .addPackage(new CodePush(BuildConfig.CODEPUSH_KEY,context.getApplicationContext(),BuildConfig.DEBUG))\n                .setUseDeveloperSupport(BuildConfig.DEBUG);\n        builder.setJSBundleFile(CodePush.getJSBundleFile());\n        builder.setInitialLifecycleState(LifecycleState.BEFORE_CREATE);\n        mReactInstanceManager = builder.build();\n\n//            CodePush.setReactInstanceHolder(new ReactInstanceHolder() {\n//                @Override\n//                public ReactInstanceManager getReactInstanceManager() {\n//                    return mReactInstanceManager;\n//                }\n//            });\n            mReactInstanceManager.createReactContextInBackground();\n        }\n        return mReactInstanceManager;\n    }\n`\nI tried build reactInstanceManager inside Activity, it works. But it leads to a blank screen for the first time react pages open. With pre-load, CodePush always rolled back.\nThanks for the help~. ",
    "imankitaman": "yeah, that issue was because of AppDelegate.m file only. Thanks, @NickToropov and @alexandergoncharov Its working fine now.. ",
    "keshk26": "Sorry for the trouble, this crash was occurring because my codepush version was not synced with the lastest code. Once I pushed up a new codepush version, it worked as expected.. Does the stack trace I shared above have any correlation to this?(https://github.com/Microsoft/react-native-code-push/issues/1272) Is that stacktrace coming from codepush? It has been tough to debug. Any guidance would be great bc users cannot login to my app right now.. Thanks for the help. This issue was actually an issue with my react-redux-firebase not signing in. A simple upgrade fixed the problem. . ",
    "BatDroid": "hi @NickToropov \nthanks for your response but what i had in mind is a scenario like this:\n1. i have added a featured and pushed it to codepush (Label=V1)\n2. i have added another feature and pushed it to codepush (Label=V2)\n3. another feature and push (Label=V3) and so on.\n4. and now in client (for any reason) i request the V1. the default mode is that i get the last one which is V3 (or anything else if it is pushed). ",
    "yeomann": "thanks @alexandergoncharov  I think it because React-native 0.56.0 uses node >= 8 and appcenter is still on v6 anyways I'll close for now.. ok thanks, I solved the issue via post-clone script. . ",
    "theashishranjan": "@yeomann You can solve this by adding a Post Clone script in your repo to install your desired node version. \nhttps://intercom.help/appcenter/build/react-native-builds-fail-with-the-engine-node-is-incompatible-with-this-module-expected-version-xxx-error-found-incompatible-module?\nYou can read about post clone script here: https://docs.microsoft.com/en-us/appcenter/build/custom/scripts/#post-clone. ",
    "n1ru4l": "@theashishranjan @yeomann You could also use the .yarnrc file.\n--install.ignore-engines true\nEdit: this does not work since the react-native cli uses node 8 features.\n. The requirements of the build machines list node 6 and 8 installed (https://docs.microsoft.com/en-us/appcenter/build/software).\nAny idea how to use the preinstalled version 8 ? . ",
    "freakyfriday": "@n1ru4l the only way to do it currently is to follow the instructions @theashishranjan described. Remember to do a \"re-save\" on the Build Configuration for App Center to pick it up again. I missed this step and couldn't work out why it was working.. ",
    "filbertteo": "@alexandergoncharov Thanks! I just wanted to clarify because the statement was kind of ambiguous, as I wasn't sure if the JS V8 engine used by RN is considered a virtual machine. And it sort of has unlimited access Android APIs via the bridge (although said functionality will require native code that accesses the underlying APIs to be present already). Thanks again for your clarification. I will close this issue.. ",
    "noellaby": "i add org.gradle.configureondemand=true in file gradle.properties , I resolve my problem. I do not know how to create another problem or not, but if a person has a better proposal I am interested.\nThank you. @noellaby this solution add org.gradle.configureondemand=true is file gradle.properties , impossible your run command react-natibe run-android ,  the server window closes after the build , impossible to work in mode  development. @geof90. i resolve this problem : \n remove line runBefore(\"bundle${targetName}JsAndAssets\", recordFilesBeforeBundleCommand) in file codePush.gradle. @alexandergoncharov , Yes I Fixed my Issue. ",
    "fzyzcjy": "@NickToropov Thank you for th reply! Is it possible that I create a server myself? :/. @NickToropov Thank you very much! Do you have any plan about deploying some servers/mirrors which are fast in China?. @Zakeelm OK Thank you very much!. ",
    "JesusTSeger": "Sounds good. Thank you.. ",
    "Jazk-Z": "@NickToropov Thanks, My repository does have this file missing because of .gitignore, but now Ios can't configure environment variables, so how should this problem be solved?. ",
    "iain-merrick-fanduel": "That sounds fine, I just wanted to make sure this is updated when/if \"compile\" is dropped in some future version of the Android Studio plugin.\nCould all those 'compile' instances be updated now? Or do we still need to support older versions of Gradle?. Would it be possible to use the timestamp of the most recent commit, maybe? That way it won't change arbitrarily across rebuilds, but it would still do the right thing in e.g. Jenkins builds.. Well, no, but it would still be good to find a solution that works correctly with incremental builds. This is important for reproducible (hermetic) builds too.. Hi Nick, here's another suggestion:\n- have a build task that calculates a hash of the files\n- store the hash in a file\n- use the timestamp of that file\nThis solves the incremental build case because nothing changes (including the timestamp) if there are no code changes. But if the code does change, the timestamp will always increase.. ",
    "tapz": "\"It will be removed at the end of 2018.\". ",
    "GregoryCollett": "Hi @alexandergoncharov,\nThank you for your response. This is definitely helpful.\nOut of curiosity are issue linked to pr's? I think this could be a helpful step - This should give me the ability to manually dig around to determine the changes.\nAgain, thanks for the response! Appreciated!\nGreg. I somehow missed that. \nThanks for your help!\n. ",
    "sidhusubhash": "after integrating code push in to my project, I am getting this error while building. . hi @alexandergoncharov \n\"react-native\": \"0.49.3\", \n\"react-native-code-push\": \"^5.3.5\",\nafter pod install,  build fails with linker error. thank you, anyways its  fixed. . ",
    "Balanced02": "@sidhusubhash Please can you share how you fixed it? I'm having same error here after adding react-native-code-push Thanks.. ",
    "Aleksion": "@abodalevsky - \nThis happened to me when I had to do a pod update for another dependency. Any ideas as to how to resolve this?. ",
    "keung7252": "still not working after Manual installation. still not working after Manual installation. ",
    "lhuazai": "Hi @NickToropov  I use xcode to bundle ios select follow scheme\n\nand I this is my load jsCodeLocation function\n\n. ",
    "Jeijie": "thanks. ",
    "gbachik": "@alexandergoncharov Thats my fault for including the master branch in the report.\nI was actually playing around with this last night to see if I could get codepush working and was able to by just following the manual install instructions (but that defeats the purpose of react-native link right!?)\nHere's what I found out:\nReact-native link will work properly for everything except for adding the libraries to xcode.\nWhen following the manual setup instructions I notice that link had correctly done everything from changing the app delegate to adding the right podfile info etc etc\nBut I had to manually add the codepush xcode project into mine and add libz etc etc\nNot sure why that would happen but that seems to be the same issue no matter how many times I setup a microsoft appcenter app with codepush as of now. . When I went through the exact steps you provided It all worked A-OK!\nJust to be sure I made two more apps using the app center website from scratch and ran the link command and everything wound up in xcode just fine! I'm not sure what I did to cause it not to link the first two apps a tested but it must have been some user error so I'll close this unless I discover anything else!\n-Thanks for your help!. ",
    "antonsivogrivov": "TurtleChat-staging.xcscheme.zip\n. @NickToropov, thanks, it helped :blush:. ",
    "hanford": "@alexandergoncharov when adding a multi target deploy for android (adding releaseStaging) I needed to add the fallback in order to build the apk\nI believe i found the fix via this post \ud83e\udd14\nI'm not certain why this came up, I have practically 0 experience with gradle / android studio, so this is most likely a developer error. \nThough, if common enough, it might be worth a little call out somewhere on the android multi deploy target page.\nI'd be happy to remove it from the main code snippet and make it a link at the bottom of the page if you think that is more appropriate, alternatively feel free to close the issue.. I'm using 4.4 @NickToropov \nHaven't tested below. I've sadly been really busy. Feel free to close this issue, if time permits I'll add the repro and we can jump start this convo again.. ",
    "adoniscoder": "Fixed. I was accidentally using both codePush.sync and codePush decorator in my component. ",
    "betsun2017": "@alexandergoncharov \nFor more information, please leave a message to me. . @NickToropov yes ,I have.\ndemo https://github.com/betsun2017/testpush\nmy ios version is 11.2.6. ",
    "shubhnik": "@alexandergoncharov CodePush does logs out that update is downloaded and will be installed during the next app session, but couldn't see the changes. Or are you looking for some specific logs?\n. @alexandergoncharov I solved the issue, actually there was a problem in native linking. Thanks for your help :+1: . ",
    "tlweiii6465": "i have saw some solution like change appcenter-cli and code-push file but i haven't install all of that component . Hi @alexandergoncharov,\nThank for reply!\ni'm using this command \"appcenter codepush release-react -a Project-ios -d Staging\". Hi @alexandergoncharov ,\nThank for reply \ni have try this command, the release is success but the error is still, and i have also try using this command \"code-push release-react Project-ios ios -d Staging -k ~/.ssh/private.pem\" but still can't. I have try to reopen a new deployment (with empty metadata) but it detected an update package so is that because the older update package is stopped the newest update package? Can i know how to clean all the code push update package?. @alexandergoncharov , Hi thank for reply,\nI tried these command and now after \"Checking for updates.\", the error is become \"[CodePush] 404: {}\"  Can i know how to fix this?. @hungvu193  Thank for help!\n@alexandergoncharov ,Hi sorry for delay and thank for help,\nI think i have solve this problem, This is my solution :\n1. clean xcode project with command + shift + K.\n2. upgrade ios folder with \"react-native upgrade\" to newest version.\n3. update react-native-code-push to newest version.\n4. link and setup react-native-code-push again.\n5. and now it just work fine in both OS and it can work fine with not generate private key.\nHope mine, @hungvu193 and @alexandergoncharov 's solution can help other who meet this problem too. i'll close this issue and feel free to reopen if need!. ",
    "hungvu193": "I got the same problem, i fixed it by generate private.pem and public.pem in root of project.\nAnd run command : codepush release-react -a Project -d Staging -k private.pem\nIt works. hi @alexandergoncharov \nI'm using code-push v5.3+  for my project, when using constructor , i saw that the CodePushPublicKey  will not be set in setPublicKey function. . ",
    "jannoteelem": "I also experienced the same issue. Workaround is to create the folder manually.. ",
    "pehagg": "We're experiencing this too. Got it after upgrading to Gradle 4.6. Updating code push to latest version didn't help. . @yuri-kulikov, thanks a bunch!. ",
    "TRIPTI-JAIN": "I change the follow bit of code in the /node_modules/xcode/lib/pbxProject.js\nif (searchPaths) {\n            var matches = searchPaths.filter(function(p) {\n                return p.indexOf(new_path) > -1;\n            });\n            matches.forEach(function(m) {\n                var idx = searchPaths.indexOf(m);\n                searchPaths.splice(idx, 1);\n            });\n        }\nto\nif (searchPaths) {\n            if(typeof searchPaths === 'string'){\n                searchPaths = [searchPaths]\n            }\n            var matches = searchPaths.filter(function(p) {\n                return p.indexOf(new_path) > -1;\n            });\n            matches.forEach(function(m) {\n                var idx = searchPaths.indexOf(m);\n                searchPaths.splice(idx, 1);\n            });\n        }\nand it seemed to have fixed the issue as well.. ",
    "ricoharisin": "@NickToropov @alexandergoncharov \nbasically on my project, i manually build react native bundle on separate step for several reason and put the bundle on assets folder\nSTR\n\nupgrade android gradle plugin to 3.2.0-rc02 and gradle to 4.6\nput index.android.bundle on assets\nskip bundleJsAndAssets task\nrun bundleRelease\nerror when running generateBundledResourcesHashLiveRelease task\n\nError: ENOENT: no such file or directory, open '/Users/xxx/workspace/customerapp/build/intermediates/assets/live/release/CodePushHash'. @NickTropov i think not because if you use android gradle plugin to below 3.2.x it will generate assets directory inside intermediates. But if you use 3.2.x, merged_assets will be generate  instead. ",
    "squirly": "To keep things complete, setting the following in app/build.gradle fixes everything across all react-native gradle functionality:\nproject.ext.react = [\n    ...\n    jsBundleDirDebug: \"${buildDir}/intermediates/merged_assets/debug/mergeDebugAssets/out\",\n    jsBundleDirRelease: \"${buildDir}/intermediates/merged_assets/release/mergeReleaseAssets/out\"\n]\nI am looking to get this incorporated as the default when using Android for Gradle 3.2 in react-native 0.58.. @alexandergoncharov I have updated this PR.. This is what I have seen in other react-native plugins but it seems that, per the linked document, api is the correct method to use.. ",
    "DavideValdo": "Seems like the docs on the Microsoft website are newer than those presented here.\nI needed to add installMode: codePush.InstallMode.IMMEDIATE\nexport default codePush({ checkFrequency: codePush.CheckFrequency.ON_APP_RESUME, installMode: codePush.InstallMode.IMMEDIATE })(EntryPoint)\n(Is code-push CLI still operational or should I use appcenter CLI as I'm doing?). I have configured the app as such, see https://github.com/Microsoft/react-native-code-push/blob/master/docs/setup-android.md#for-react-native--v029-background-react-instances\nBut it won't compile. The docs you link don't suit me. I need to launch React Native from push notification.\nI've tried to follow https://github.com/Microsoft/react-native-code-push/blob/master/docs/setup-android.md#for-react-native--v029-background-react-instances, but declaring the ReactInstanceHolder class within the main class for the sake of avoiding compiler errors.. I managed to make it compile with this code. I couldn't find any suggestions about ReactInstanceManager in the main docs.\n```\npublic class MainApplication extends Application implements ReactApplication {\nprivate final ReactNativeHost mReactNativeHost = new ReactNativeHost(this) {\n    private CallbackManager mCallbackManager = CallbackManager.Factory.create();\nprotected CallbackManager getCallbackManager() {\n    return mCallbackManager;\n}\n\n@Override\npublic boolean getUseDeveloperSupport() {\n  return BuildConfig.DEBUG;\n}\n\n@SuppressLint(\"MissingPermission\")\n@Override\nprotected List<ReactPackage> getPackages() {\n  return Arrays.asList(\n    new MainReactPackage(),\n    new FBSDKPackage(mCallbackManager),\n     ...\n    new MapsPackage(),\n    new CodePush(BuildConfig.CODEPUSH_KEY, MainApplication.this, BuildConfig.DEBUG, R.string.CodePushPublicKey)\n  );\n}\n\n@Override\nprotected String getJSMainModuleName() {\n  return \"index\";\n}\n\n@Override\nprotected String getJSBundleFile() {\n    return CodePush.getJSBundleFile();\n}\n\n};\n@Override\n  public ReactNativeHost getReactNativeHost() {\n    return mReactNativeHost;\n  }\nprivate ReactInstanceHolder instanceHolder = new ReactInstanceHolder() {\n    @Override\n    public ReactInstanceManager getReactInstanceManager() {\n      return mReactNativeHost.getReactInstanceManager();\n    }\n  };\n@Override\n  public void onCreate() {\n     CodePush.setReactInstanceHolder(instanceHolder);\n     super.onCreate();\n  }\n}\n```\n. I'm getting a RuntimeException as soon as I open the release build.\njava.lang.RuntimeException: Unable to load script from assets 'index.android.bundle'. Make sure your bundle is packaged correctly or you're running a packager server.\n at com.facebook.react.bridge.CatalystInstanceImpl.jniLoadScriptFromAssets(Native Method)\n at com.facebook.react.bridge.CatalystInstanceImpl.loadScriptFromAssets(CatalystInstanceImpl.java:216)\n at com.facebook.react.bridge.JSBundleLoader$1.loadScript(JSBundleLoader.java:32)\n at com.facebook.react.bridge.CatalystInstanceImpl.runJSBundle(CatalystInstanceImpl.java:243)\n at com.facebook.react.ReactInstanceManager.createReactContext(ReactInstanceManager.java:1114)\n at com.facebook.react.ReactInstanceManager.access$900(ReactInstanceManager.java:116)\n at com.facebook.react.ReactInstanceManager$5.run(ReactInstanceManager.java:913)\n at java.lang.Thread.run(Thread.java:760). distributionUrl=https\\://services.gradle.org/distributions/gradle-4.6-all.zip. I solved by upgrading react-native 0.57.1 to 0.57.2, with 0.57.7 I was getting compilation errors.. Sorry for being in a hurry and not taking the time to fully report logs, the error was exactly as described in https://github.com/facebook/react-native/issues/21150 but it complained about the full scheduler module. I can try reproducing the full error again if it can help.. ",
    "lithin": "\ud83d\udc4d for this, unbundling has significant performance increase on app load and this stops us from using code push on android at the moment. @NickToropov Unfortunately we never got it working, and from what I've gathered here and on Twitter, I . understood that it's not actually possible to do this at the moment. If you got it working though, it'd be great to see an example repo?. ",
    "axe-fb": "@Zakeelm, RAM bundles / unbundling was something that i worked on, just before I left. This is actually already possible in Code Push without much changes - I think we just need an \"official\" way for RAM bundles to be supported .. ",
    "kousun12": "seems like it is reporting that the build is bad. From the android logs:\n09-25 14:48:16.266 25881 25971 I ReactNativeJS: [CodePush] Checking for update.\n09-25 14:48:16.398 25881 25971 I ReactNativeJS: [CodePush] Reporting binary update (1.0)\n09-25 14:48:16.758 25881 25971 I ReactNativeJS: [CodePush] Report status failed: {\"appVersion\":\"1.0\"}\n09-25 14:48:16.771 25881 25971 I ReactNativeJS: [CodePush] An update is available, but it is being ignored due to having been previously rolled back.\n09-25 14:48:16.776 25881 25971 I ReactNativeJS: [CodePush] App is up to date.\n09-25 14:54:25.371 25881 25971 I ReactNativeJS: [CodePush] Reporting binary update (1.0)\n09-25 14:54:25.748 25881 25971 I ReactNativeJS: [CodePush] Report status failed: {\"appVersion\":\"1.0\"}\nI guess my suspicion around the notifyAppReady might stand?. ",
    "abdohossam5": "@NickToropov Would it be possible to pm you.. Thank you very much. sent.. @NickToropov Thank you for looking into this. You can close this issue as we've found that it is not related to code push.. @NickToropov It was caused by our own code that was trying to use getCurrentPackage in order to get the codepush version and pass it to an analytics tool that we are using.. ",
    "MatthieuLemoine": "My bad I was still on code-push 5.1.3-beta. ",
    "sundeepsingh12": "Hi @alexandergoncharov \nThanks for your timely reply!\nPlease find the link for demo project in which we are still facing the issue : \nhttps://github.com/sundeepsingh12/SampleCodePush.git\nAbout version we used : \nreact-native : 0.57.1\nreact-native-code-push : 5.4.2\nfor both creating as well as releasing code push.\nPlease have look at this and suggest what could we possibly do to resolve this problem.. @alexandergoncharov @NickToropov We are still facing the issue.\nThough it is different this time, the app get updated after the code push, but as soon as we destroy the app/clear from recents it agains revert back to older version.\nPlease suggest !\n. ",
    "ivanbtrujillo": "Hi @NickToropov, I've updated the proguard-rules.pro with your changes but It fails. Once the app detect the update and tries to refresh, it crash.\nMy config is quite simple (the default codepush config), and it was working before update to v0.57. \n. I've installed from master branch after your changes were merged but still doesn't work\nyarn add https://github.com/Microsoft/react-native-code-push.git\n. Hi @NickToropov I've used your demo and it works, but in my project not. The error I've received from logcat is the following:\n10-09 09:42:19.405 16857 16919 E AndroidRuntime: FATAL EXCEPTION: mqt_native_modules\n10-09 09:42:19.405 16857 16919 E AndroidRuntime: Process: com.blueskytechnologyeu.folloow, PID: 16857\n10-09 09:42:19.405 16857 16919 E AndroidRuntime: java.lang.IllegalArgumentException: Unable to find JSIModule for class interface com.facebook.react.bridge.UIManager\n10-09 09:42:19.405 16857 16919 E AndroidRuntime:        at com.facebook.react.bridge.JSIModuleRegistry.getModule(JSIModuleRegistry.java:17)\n10-09 09:42:19.405 16857 16919 E AndroidRuntime:        at com.facebook.react.bridge.CatalystInstanceImpl.getJSIModule(CatalystInstanceImpl.java:478)\n10-09 09:42:19.405 16857 16919 E AndroidRuntime:        at com.facebook.react.uimanager.UIManagerHelper.getUIManager(UIManagerHelper.java:30)\n10-09 09:42:19.405 16857 16919 E AndroidRuntime:        at com.facebook.react.uimanager.UIManagerModule.dispatchViewManagerCommand(UIManagerModule.java:600)\n10-09 09:42:19.405 16857 16919 E AndroidRuntime:        at java.lang.reflect.Method.invoke(Native Method)\n10-09 09:42:19.405 16857 16919 E AndroidRuntime:        at com.facebook.react.bridge.JavaMethodWrapper.invoke(JavaMethodWrapper.java:372)\n10-09 09:42:19.405 16857 16919 E AndroidRuntime:        at com.facebook.react.bridge.JavaModuleWrapper.invoke(JavaModuleWrapper.java:160)\n10-09 09:42:19.405 16857 16919 E AndroidRuntime:        at com.facebook.react.bridge.queue.NativeRunnable.run(Native Method)\n10-09 09:42:19.405 16857 16919 E AndroidRuntime:        at android.os.Handler.handleCallback(Handler.java:761)\n10-09 09:42:19.405 16857 16919 E AndroidRuntime:        at android.os.Handler.dispatchMessage(Handler.java:98)\n10-09 09:42:19.405 16857 16919 E AndroidRuntime:        at com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:29)\n10-09 09:42:19.405 16857 16919 E AndroidRuntime:        at android.os.Looper.loop(Looper.java:156)\n10-09 09:42:19.405 16857 16919 E AndroidRuntime:        at com.facebook.react.bridge.queue.MessageQueueThreadImpl$3.run(MessageQueueThreadImpl.java:192)\n10-09 09:42:19.405 16857 16919 E AndroidRuntime:        at java.lang.Thread.run(Thread.java:776)\nThere is another issue with the same problem:\nhttps://github.com/facebook/react-native/issues/20636#issuecomment-425248856\nMaybe the issue is because the current code I've on Codepush was compiled with an older version of react native. I'll check and investigate and let you know.\n. Yep that was the issue. It's working.. ",
    "Udbhav12": "@NickToropov - The changes you suggested is android specific. This problem occurs in iOS also. @NickToropov Please find the code-push debug logs for android when app is destroyed\nAs you can see from the logs that code push update is successfully applied initially, but as soon as the app is destroyed and then the app is reopened, the update applied by code push is rolled back.\nBtw (Unable to set JsBundle...) has been fixed by the change you suggested\n\n. ",
    "trubi": "Hey Nick, sorry I don't. I've been monitoring it, but since the last time, it looks it didn't happen again.. It's happening again and again, a lot of times, almost with every release.\nHere is listing of directory '${RNFS.LibraryDirectoryPath}/Application Support/CodePush' directly after downgrade:\nhttps://pastebin.com/fVCfqn0f\nIs there any log I can provide to be more helpful?. ",
    "schavaLogi": "More Information:\nAfter applying private key but in the application we didn't add sign public key to verify the behaviour\nActual behaviour:\nWarning! JWT signature exists in code push update but code integrity check couldn't be performed because there is no public key configured. Please ensure that the public key is properly configured within your application.\nExpected hash: 17dc01721699dffd7677ccb7401cbccb1ed5e3f7cb94fa86af0d6892fc45c429, actual hash: 17dc01721699dffd7677ccb7401cbccb1ed5e3f7cb94fa86af0d6892fc45c429\n[12:14:40] The update contents succeeded the data integrity check.\n[12:14:59] Loading JS bundle from \"/data/user/0/com.logi.pavarotti.inte/files/CodePush/17dc01721699dffd7677ccb7401cbccb1ed5e3f7cb94fa86af0d6892fc45c429/CodePush/index.android.bundle\"\n[12:15:03] Reporting CodePush update success (v89)\n. @alexandergoncharov sorry for the confusion. Added public key in strings.xml\nWill try to create a sample application and will share the link. @alexandergoncharov \nHi Attached sample code github https://github.com/srinuch1981/ReduxNavigation. @alexandergoncharov \nThanks for the details information. I made a simple mistake yet important not checked even after your reference.\nOne more point in case if i don't use public key in my application but server uses private key we are able to download and apply patch. is that expected behaviour?\nnew CodePush(getString(R.string.code_push_key),\n                getApplicationContext(),\n                BuildConfig.DEBUG)\nLogs:\nD/ReactNative: [CodePush] Applying full update.\nD/ReactNative: [CodePush] Warning! JWT signature exists in codepush update but code integrity check couldn't be performed because there is no public key configured. Please ensure that public key is properly configured within your application.\nD/ReactNative: [CodePush] Verifying hash for folder path: /data/user/0/xxxx/files/CodePush/5fae422719864f531e241766555f9f47ea767d05df10102092c6f7bb25cb8de6\nD/ReactNative: [CodePush] Expected hash: 5fae422719864f531e241766555f9f47ea767d05df10102092c6f7bb25cb8de6, actual hash: 5fae422719864f531e241766555f9f47ea767d05df10102092c6f7bb25cb8de6\nD/ReactNative: [CodePush] The update contents succeeded the data integrity check.\nI/ReactNativeJS: [CodePush] Reporting CodePush update success (v90)\n. @alexandergoncharov  Thanks for the clarification.. ",
    "ferrannp": "Hey @alexandergoncharov, manual set up when including it into an existing native app.. Oh I am using 0.57.0. Ok I need to check if the update fixes it. Thank you !. Using --gradle-file right? Thank you! That does the trick.. I am reopening the issue. --gradle-file works ok to check the version when deploying a new version. However, CodePush will check always the versionName of the app to decide if it needs to update something. Is that value/logic I would like to change, like saying where to look (say an ext with specific name). Is that possible? What to change?. That's perfect @NickToropov. overrideAppVersion is what I was looking for, in that way, even the consumer (app) can pass whatever value we want to the library to init the CodePush version.. @NickToropov I tried that but probably I do it too early because currentPackage is always null. . ",
    "clementinoux": "Hi @NickToropov, I'm having the same error after setting up Multi-Deployment Testing for Android.\nI followed the specified procedure : https://github.com/Microsoft/react-native-code-push/blob/master/docs/multi-deployment-testing-android.md.\nI can safely generate and use the build based on the Staging environment, launched with the command :react-native run-android --appIdSuffix debug \nHowever, when I want to test the release version with the react-native run-android --variant release command (same error for releaseStaging) or generate the APK release ./gradlew assembleRelease \n (same error for assembleReleaseStaging) this causes the error mentionned by @js1121302139 \nAny ideas ? . ",
    "bgold0": "I did a manual installation without Pods and it seems to work. \nI'm not longer experiencing this issue after doing a manual install but I know I had cleared DerivedData before hand however I never installed modifying the Podfile since I used react-link to install.. ",
    "RajeshBatth": "Hi @NickToropov, are there any plans to support this in future? \nThis is really important to me, currently my bundle is more that 5MB in size(1.5MB gzipped) and its growing, so it takes significant amount of time to download the updated bundle. \n. ",
    "iremlaya": "+1. ",
    "gokhanamal": "\n\n2018.10.9\n\n\nThanks! It works \ud83d\udcaf . ",
    "lnfnunes": "@alexandergoncharov \nsh\nadb logcat | grep codepush\n```\n10-23 17:07:52.702  3649  3740 I WindowManager: Destroying surface Surface(name=Splash Screen com.rncodepush) called by com.android.server.wm.WindowStateAnimator.destroySurface:2501 com.android.server.wm.WindowStateAnimator.destroySurfaceLocked:985 com.android.server.wm.WindowState.destroyOrSaveSurfaceUnchecked:3680 com.android.server.wm.WindowState.destroySurface:3628 com.android.server.wm.AppWindowToken.destroySurfaces:722 com.android.server.wm.AppWindowToken.destroySurfaces:706 com.android.server.wm.WindowState.onExitAnimationDone:5335 com.android.server.wm.WindowStateAnimator.stepAnimationLocked:550\n10-23 17:07:52.702  3199  3221 I SurfaceFlinger: id=37320 Removed Splash Screen com.rncodepush#0 (3/7)\n10-23 17:07:52.707  3649  3790 D MdnieScenarioControlService:  packageName : com.rncodepush    className : com.rncodepush.MainActivity\n10-23 17:07:52.707  3199  3333 I SurfaceFlinger: id=37320 Removed Splash Screen com.rncodepush#0 (-2/7)\n10-23 17:07:52.713  3199  3199 I Layer   : id=37320 onRemoved Splash Screen com.rncodepush#0\n10-23 17:07:53.120  3649  4634 D GameManagerService: identifyGamePackage. com.rncodepush\n10-23 17:07:53.120  3649  4634 D GamePkgDataHelper: getGamePkgData(). com.rncodepush\n10-23 17:07:58.107  3649  9280 D GameManagerService: identifyGamePackage. com.rncodepush\n10-23 17:07:58.107  3649  9280 D GamePkgDataHelper: getGamePkgData(). com.rncodepush\n10-23 17:11:00.803 20167 20167 I oneconnect[1.7.16-25_03]: Util.isQcTopProcess - false [package]com.samsung.android.oneconnect [topProcess]com.rncodepush\n10-23 17:11:15.779 20167 20167 I oneconnect[1.7.16-25_03]: Util.isQcTopProcess - false [package]com.samsung.android.oneconnect [topProcess]com.rncodepush\n// THE MOMENT WHEN I CLICK TO VERIFY NEW VERSION \\\n10-23 17:12:06.767  3649  4366 V WindowManager: Relayout Window{3732043 u0 com.rncodepush/com.rncodepush.MainActivity}: viewVisibility=0 req=1366x643 WM.LayoutParams{(0,0)(wrapxwrap) gr=#11 sim=#120 ty=2 fl=#1820002 fmt=-3 wanim=0x10302fe surfaceInsets=Rect(112, 112 - 112, 112) needsMenuKey=2 colorMode=0 naviIconColor=0}\n10-23 17:12:06.793  3199  3199 D SurfaceFlinger: duplicate layer name: changing com.rncodepush/com.rncodepush.MainActivity to com.rncodepush/com.rncodepush.MainActivity#1\n10-23 17:12:06.800  3199  3199 I SurfaceFlinger: id=37322 createSurf (1590x867),1 flag=4, com.rncodepush/com.rncodepush.MainActivity#1\n10-23 17:12:06.954  3649  3660 V WindowManager: finishDrawingLocked: mDrawState=COMMIT_DRAW_PENDING Window{3732043 u0 com.rncodepush/com.rncodepush.MainActivity} in Surface(name=com.rncodepush/com.rncodepush.MainActivity)\n10-23 17:12:07.074  3199  3199 D SurfaceFlinger:        HWC | 72b7a2da80 | 0000 | 0020 | 00 | 0100 | RGBA_8888   |    0.0,    0.0, 1440.0, 2560.0 |    0,    0, 1440, 2560 | com.rncodepush/com.rncodepush.MainActivity#0\n10-23 17:12:07.074  3199  3199 D SurfaceFlinger:        HWC | 72b7a2df00 | 0000 | 0000 | 00 | 0105 | RGBA_8888   |   75.0,    0.0, 1515.0,  867.0 |    0,  888, 1440, 1755 | com.rncodepush/com.rncodepush.MainActivity#1\n10-23 17:12:07.111  3199  3199 D SurfaceFlinger:        HWC | 72b7a2da80 | 0000 | 0020 | 00 | 0100 | RGBA_8888   |    0.0,    0.0, 1440.0, 2560.0 |    0,    0, 1440, 2560 | com.rncodepush/com.rncodepush.MainActivity#0\n10-23 17:12:07.111  3199  3199 D SurfaceFlinger:        HWC | 72b7a2df00 | 0000 | 0000 | 00 | 0105 | RGBA_8888   |   75.0,    0.0, 1515.0,  867.0 |    0,  888, 1440, 1755 | com.rncodepush/com.rncodepush.MainActivity#1\n10-23 17:12:10.569 27355 27391 D InputEventReceiver: channel '3732043 com.rncodepush/com.rncodepush.MainActivity (client)' ~ Disposing input event receiver.\n10-23 17:12:10.569 27355 27391 D InputEventReceiver: channel '3732043 com.rncodepush/com.rncodepush.MainActivity (client)' ~NativeInputEventReceiver.\n10-23 17:12:10.767  3199  3199 D SurfaceFlinger:        HWC | 72b3730c40 | 0000 | 0020 | 00 | 0100 | RGBA_8888   |    0.0,    0.0, 1440.0, 2560.0 |    0,    0, 1440, 2560 | com.rncodepush/com.rncodepush.MainActivity#0\n10-23 17:12:10.916  3649  3740 I WindowManager: Destroying surface Surface(name=com.rncodepush/com.rncodepush.MainActivity) called by com.android.server.wm.WindowStateAnimator.destroySurface:2501 com.android.server.wm.WindowStateAnimator.destroySurfaceLocked:985 com.android.server.wm.WindowState.destroyOrSaveSurfaceUnchecked:3680 com.android.server.wm.WindowState.destroySurface:3628 com.android.server.wm.AppWindowToken.destroySurfaces:722 com.android.server.wm.AppWindowToken.destroySurfaces:706 com.android.server.wm.WindowState.onExitAnimationDone:5335 com.android.server.wm.WindowStateAnimator.stepAnimationLocked:550\n10-23 17:12:10.916  3199  3221 I SurfaceFlinger: id=37322 Removed com.rncodepush/com.rncodepush.MainActivity#1 (4/7)\n10-23 17:12:10.929  3199  3199 I Layer   : id=37322 onRemoved com.rncodepush/com.rncodepush.MainActivity#1\n10-23 17:12:10.952  3199  3199 D SurfaceFlinger:        HWC | 72b3730c40 | 0000 | 0020 | 00 | 0100 | RGBA_8888   |    0.0,    0.0, 1440.0, 2560.0 |    0,    0, 1440, 2560 | com.rncodepush/com.rncodepush.MainActivity#0\n10-23 17:12:12.181 27355 29416 D ReactNative: [CodePush] Verifying hash for folder path: /data/user/0/com.rncodepush/files/CodePush/fcb785fa25bba4853d44668b2b3699d68dd1ffabb5611484e537d05c12dd8f32\n10-23 17:12:12.446 27355 27391 D ReactNative: [CodePush] Loading JS bundle from \"/data/user/0/com.rncodepush/files/CodePush/fcb785fa25bba4853d44668b2b3699d68dd1ffabb5611484e537d05c12dd8f32/CodePush/index.android.bundle\"\n10-23 17:12:12.549  3649  4227 V WindowManager: Relayout Window{7a5a665 u0 com.rncodepush/com.rncodepush.MainActivity}: viewVisibility=0 req=1440x2560 WM.LayoutParams{(0,0)(fillxfill) sim=#110 ty=1 fl=#80810100 pfl=0x20000 wanim=0x10302fd vsysui=0x600 needsMenuKey=2 colorMode=0 naviIconColor=0}\n```\nAfter clicked, CodePush verify and identifies the new mandatory version, but the message says it will be applyed only after the restart\n\nThis message comes from the event UPDATE_INSTALLED: \nhttps://github.com/Microsoft/react-native-code-push/blob/master/Examples/CodePushDemoApp/App.js#L41\n\n\nThis is the app after restarted!\n\nThis is the App.js I'm using in the tests!\nhttps://gist.github.com/lnfnunes/9569912f1be3d89bc11cc21abdd8f470\n. @alexandergoncharov Installing only after restart\nI clicked in the button \"Press for dialog-driven sync\" and accepted to update, CodePush could identify there\u00b4s a new version, downloaded it, my screen blinks like it has installed but instead of the new version I receive the version shown in the print \"Update installed and will be applyed after restart.\"\nI expected to see the new version immediately instead of having to restart the app.\n. Hi @alexandergoncharov ,\nI was travelling on vacation :P sorry for delay!\nUnfortunately the behavior hasn't changed in my testes!!!\nCheck this video (screen recorded)\nObserve the app only updates after I restart it.\nIf this can help in the investigation, I'm publishing the new version with this command\nappcenter codepush release-react -a katinguele/luavai -m\n. ",
    "maxweb4u": "Hi @NickToropov! Thank you for quick response. I have checked your app and it works well. But I think the problem in my app can be in other settings or modules, I need to check it again and debug. And sorry for took your time.\nAlso maybe you know why this mistake CUICatalog: Invalid asset name supplied: '(null) is appeared after getting updated from codepush? Or what is it ? Thank for help.. ",
    "deecewan": "hey @alexandergoncharov \nThe command is a part of codepush.gradle - it tries to generate some kind of hash using the files that have been added. This happens, as it seems, completely separate to actually pushing OTA updates.\nI imagine it's some kind of integrity check to make sure there is no new native code running when a release is pushed out?. ",
    "nitish1099": "Got it! There was an added space in my development key in the plist. Thanks!. ",
    "saranshagarwal": "This would take some time since now I am working on a different version of react-native for my other projects(shifting version was a pain). I am adding the basic files that would reproduce this code in an empty project with react native version .56.0.\nThis  url. contains two files. index.js and app,js Please check. Apologies for the inconvenience.If this causes trouble just let me know. Will create a project. \nThanks, \nSaransh Agarwal. I have used the link command but made sure everything matched with the manual instructions. ",
    "s349856186": "OK, Thanks. @NickToropov . @NickToropov Thanks you reply.\nBut the currently running version does not know what the next version will update, so I can only get the update instructions (--des) when I release the update. I don't understand what to do, I use the custom dialog and the sync method.  What should I do? Thanks. @alexandergoncharov Thanks. @yuri-kulikov Thank you for your reply\u3002\nif \"rollbackRetryOptions\" is not set, which Rollback devices will not be updated again? \nI am currently using 5.3.5,If I upgraded locally to 5.5.0 and then released the update containing \"rollbackRetryOptions\", those Rollback devices can be updated normally (because they are 5.3.5)?\n. @yuri-kulikov Thank you for your reply. @yuri-kulikov \nIOS:\n Active: 36% (183 of 507) \u2502\n Total: 183 (105 pending) \u2502\n Rollbacks: 51  \nAndroid:\n  Active: 41% (161 of 391) \u2502\n  Total: 161 (38 pending)  \u2502\n  Rollbacks: 57  \nI don't know why so much rollbacks, and what will cause the pending, and the pending will not be updated again?\n. @yuri-kulikov  Thank you for your reply\ncomponentWillMount(){\n      CodePush.disallowRestart();\n      CodePush.sync(\n          {\n               deploymentKey: CODE_PUSH_KEY,\n               updateDialog: false,\n               installMode: CodePush.InstallMode.ON_NEXT_SUSPEND,\n          },\n          this.codePushStatusDidChange.bind(this),`\n          this.codePushDownloadDidProgress.bind(this)\n      );\n}\ncomponentDidMount(){\nCodePush.allowRestart();\n\nCodePush.notifyAppReady();\n\n}. @yuri-kulikov sorry\nreact-native-code-push version: \"^5.3.5\",\nreact-native version:\"0.51.0\",\niOS/Android/Windows version: ios&&Android\nDoes this reproduce on a debug build or release build? release\nDoes this reproduce on a simulator, or only on a physical device?physical device\nis it your first code-push release? yes\uff0cit's first code-push \nMy cmd is : \ncode-push release-react myappAndroid android --d Production\ncode-push release-react myappIOS ios --d Production\ncan you reproduce a rollback on your device?\nI try many times yesterday, not reproduce\n. ",
    "vasanthk": "Yes @alexandergoncharov .. +1. ",
    "JofBigHealth": "@alexandergoncharov Is there a way we can keep tabs on the progress of this specific feature? I.e. whether it's under consideration, in progress, in testing etc? As with others this would be huge for us.. ",
    "AlMel3000": "\nPlease see here, the following seems to have worked!\ninvertase/react-native-firebase#1676\n\ntry to add\ncom.google.gms.googleservices.GoogleServicesPlugin.config.disableVersionCheck = true\nat the bottom of android/app/build.gradle. ",
    "doniwinata0309": "Hi @alexandergoncharov  any update on this issue ? i guess we have to use google service 4.2.0 on Android Gradle Plugin 3.3, or we will got runtime error (it happened on my project):\nhttps://stackoverflow.com/questions/52374463/googleservice-failed-to-initialize-status-10-missing-google-app-id-value-from/54200175#54200175\nWhile i still got this error when using google service 4.2.0.\nThanks !\n. ",
    "janakg": "Any resolution for this issue? I confirm the problem.. ",
    "melihberberolu": "Any solution ?. ",
    "zachgibb": "I think this may be due to an issue with the version checker itself: https://github.com/google/play-services-plugins/issues/30\nThe error is kind of confusing in the first place. It's saying the resolved version 2.3 isn't compatible with the version required [1.3.1,2.3]. The square bracket syntax is supposed to be an inclusive range meaning [from_version, to_version] - so having the version resolve to 2.3 should be supported, as the acceptable range is up to and including 2.3.\nHowever, the version checker at the moment is essentially saying\nif (there are square brackets) {\n  make sure the string within the brackets _exactly_ matches the resolved version\n} else {\n  any versions are compatible\n}\nWhich is a bit odd, since we'd only use those square brackets when we would have two versions to compare between - so any use of [from_version, to_version] would throw an error. Unless of course, you used the brackets to indicate only one version [version], which is completely unnecessary.\nGiven that the only instance that the version checker is actually doing its job is broken right now, I think it should be safe to disable the version check like @AlMel3000 said:\ncom.google.gms.googleservices.GoogleServicesPlugin.config.disableVersionCheck = true\nUntil a fix drops for https://github.com/google/play-services-plugins/issues/30, I'm not sure there's any other solution - or honestly any benefit to using that version checker in the first place.\n(disclaimer, this is only from recent research after digging into this error). ",
    "l3ender": "If the version checker has a bug, could a hotfix with it disabled be merged and released until the upstream fix is in place?. ",
    "LDty": "\nSorry, I didn't say it clearly @alexandergoncharov\nafter code push , The file path has changed like files/CodePush/hash/src_filename_name.mp3.There is no way to find a way to change CodePush to lowercase letters. i try setting babelrc like this \n\"env\": {\n    \"production\": {\n      \"plugins\": [\n        [\n          \"babel-plugin-root-import\",\n          {\n            \"rootPathSuffix\": \"src/music\",\n            \"rootPathPrefix\": \"#\"\n          }\n        ]\n      ]\n    }\nand use like this:\nnew Sound(require('#/000100010001.mp3'), (error, sound) => { });\nIf there is no mistake the way i use relative path instead of absolute path,it had no effect.\nmaybe i should download audio in another way\nthanks anyway\n. ",
    "SimonSimya": "@LDty did you solve this? I'm having the same problem.. ",
    "cgerikj": "Thank you! This sounds exactly like what I need, will try tomorrow! :)\nEdit: It works :) \ud83d\udc4d . ",
    "nighttiger1990": "@s349856186 set appendReleaseDescription to 'true' or using \nCodePush.getUpdateMetadata(CodePush.UpdateState.RUNNING)\n            .then(localPackage => {\n                console.log(\"CodePushLocalPackage\", localPackage)\n                this.setState({\n                    localPackage: localPackage\n                })\n            }). ",
    "yang24201": "I'm sorry, this is my problem! I set the serverUrl with an empty string. This issue should be closed.. ",
    "gabrielrolfsen": "Unfortunately I don't think I have further useful logs to share...\nI haven't setup a dummy project to test it yet, but I could test it on my device and I found out that it works, but only for the latest deployed version. When I make UI changes to a previous state of the master branch (an old commit), targeting an older version, it doesn't work.\nAny thoughts?. Yesterday I deployed to Production environment and tested and it was OK. Unfortunately I could not find a way to test my CodePushes on Staging environment.\nI will try to describe what happened in steps:\nLet's assume there's two versions: current (v2.0) and old (v1.0)\n\nCheckout an old branch, with an old version of the app (v1.0)\nCreated a new branch, added some UI changes and committed to this new branch.\nRan the appcenter codepush release-react --mandatory\n3.1 Checked Appcenter page, codepush was sent to server successfully\nCheckout again to the old branch (v1.0)\nBuild it and ran it (yarn start and build on xcode) on a simulator OR a device\nCheck logs\n6.1 Log shows the message: [CodePush] Reporting CodePush update success (v65)\nApp is restarted and, apparently patch was installed\n7.1 Checked Appcenter page, codepush version install and download counter was incremented\nCannot see any of the changes\n\n\nI guess what happens is that even though it downloads and installs the version it keeps sync with my local repository, which has the old version (v1.0). Am I right?\nThis hypothesis is due to the correct functionality being shown on the production environment, after promoting the codepush vesion without being able to test it (risky, but it was my last resort).. ",
    "shashankmeddo": "Hi\nAs mentioned earlier I couldn't found this code \nfrom jsBundleDir\n             into file(config.\"jsBundleDir${targetName}\" ?:\n                 \"$buildDir/intermediates/assets/${targetPath}\")\nhence could not replace with the correct one :(\n. Thank you so much, it worked.\nOn Wed, Nov 21, 2018 at 2:37 PM Yuri Kulikov notifications@github.com\nwrote:\n\nHi @shashankmeddo https://github.com/shashankmeddo,\nI've found another solution and it's quite simple, you need to set the\noutput directory manually in your project_path/android/app/build.gradle:\nproject.ext.react = [\n    entryFile: \"index.js\",\n    jsBundleDirDebug: \"$buildDir/intermediates/merged_assets/debug/mergeDebugAssets/out\",\n    jsBundleDirRelease: \"$buildDir/intermediates/merged_assets/release/mergeReleaseAssets/out\"\n]\nPlease try it and let me know if it helped.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/Microsoft/react-native-code-push/issues/1456#issuecomment-440589072,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ArHFdYxh1LDbagLeBnv0zg4x_k-UKomqks5uxRfugaJpZM4YrONE\n.\n. \n",
    "yogeshchoudhary147": "Hi @yuri-kulikov \nI was also facing the same. I did what you suggested in project.ext.react. Now debug build is working fine but release build is not showing local app images like icons.\nRN Version - 0.53.3\nGradle Version - 3.2.0\n. Hi @yuri-kulikov \nThanks for your reply. I missed to update here but the error has disappeared as of now.. ",
    "andrewrt": "(I've renamed SSZipArchive to SSZipArchive2 in order to avoid naming collision as I saw that CodePush appears to be rolling your own version of SSZipArchive - and I wanted to be sure to run CodePush as you had intended). \nIn the end - this made no difference tho. Thanks for the quick response @yuri-kulikov !\nAnd thanks for running a test. About the above test  - this is with CodePush manually installed instead of cocoapods?\nAs I have RN and a # of other libs directly linked (not with cocoapods), it's not all too easy for me to use the cocoapods method of linking for CodePush due it requiring RN to be linked from cocoapods as well (causing naming collisions / etc). \nI'll try re-installing codepush with the current code base, and also making a fresh project to see what I can get. @yuri-kulikov - \nIt appears that react-native link react-native-code-push will search for CocoaPods and if it finds something - it tries to link CodePush via cocoapods instead of using the non-cocoapods method...\nDo you know what specifically the react-native-code-push link script is looking for?\n(I have cocoapods for some external stuff - but don't want to use it for this as per the above). Looks like it was looking for the PodFile... and maybe a few other things. \nRemoving the podfile, pods, etc temporarily and then running link appears to be working. \nAdditionally - your tests as well were working. \nI must have missed something in the manual setup based on ^^^\nThanks again!. ",
    "qq326646683": "Attempt to get length of null array\ncom.microsoft.codepush.react.FileUtils.deleteFileOrFolderSilently(FileUtils.java:75). ",
    "yz1311": "same issues.It occurs in Huawei p20 & mate10.\nhttps://github.com/Microsoft/react-native-code-push/blob/3144c916018fab077231e88d8718ad3a1cb0a7d8/android/app/src/main/java/com/microsoft/codepush/react/FileUtils.java#L74-L75\nI find the package is downloaded to internal storage,so in theory,this issues is not related to the android Permission.\nhttps://github.com/Microsoft/react-native-code-push/blob/09883dd6f1507975e93aa674905109d60f9f57bf/android/app/src/main/java/com/microsoft/codepush/react/CodePush.java#L64. > Hi @qq326646683! Thanks for reporting it. Do you have detailed repro steps or demo project that I could try to reproduce your issue and help to solve it. Also please share logs from LogCat with this exception.\n\njava.lang.RuntimeException: An error occurred while executing doInBackground()\n    at android.os.AsyncTask$3.done(AsyncTask.java:365)\n    at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:383)\n    at java.util.concurrent.FutureTask.setException(FutureTask.java:252)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:271)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)\n    at java.lang.Thread.run(Thread.java:784)\nCaused by: java.lang.NullPointerException: Attempt to get length of null array\n    at com.microsoft.codepush.react.FileUtils.copyDirectoryContents(FileUtils.java:25)\n    at com.microsoft.codepush.react.FileUtils.copyDirectoryContents(FileUtils.java:27)\n    at com.microsoft.codepush.react.FileUtils.copyDirectoryContents(FileUtils.java:27)\n    at com.microsoft.codepush.react.CodePushUpdateUtils.copyNecessaryFilesFromCurrentPackage(CodePushUpdateUtils.java:100)\n    at com.microsoft.codepush.react.CodePushUpdateManager.downloadPackage(CodePushUpdateManager.java:227)\n    at com.microsoft.codepush.react.CodePushNativeModule$3.doInBackground(CodePushNativeModule.java:210)\n    at com.microsoft.codepush.react.CodePushNativeModule$3.doInBackground(CodePushNativeModule.java:204)\n    at android.os.AsyncTask$2.call(AsyncTask.java:345)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n\nand \n\njava.lang.RuntimeException: An error occurred while executing doInBackground()\n    at android.os.AsyncTask$3.done(AsyncTask.java:365)\n    at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:383)\n    at java.util.concurrent.FutureTask.setException(FutureTask.java:252)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:271)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)\n    at java.lang.Thread.run(Thread.java:784)\nCaused by: java.lang.NullPointerException: Attempt to get length of null array\n    at com.microsoft.codepush.react.FileUtils.deleteFileOrFolderSilently(FileUtils.java:75)\n    at com.microsoft.codepush.react.FileUtils.deleteFileOrFolderSilently(FileUtils.java:77)\n    at com.microsoft.codepush.react.FileUtils.deleteFileOrFolderSilently(FileUtils.java:77)\n    at com.microsoft.codepush.react.FileUtils.deleteDirectoryAtPath(FileUtils.java:64)\n    at com.microsoft.codepush.react.CodePushUpdateManager.downloadPackage(CodePushUpdateManager.java:151)\n    at com.microsoft.codepush.react.CodePushNativeModule$3.doInBackground(CodePushNativeModule.java:210)\n    at com.microsoft.codepush.react.CodePushNativeModule$3.doInBackground(CodePushNativeModule.java:204)\n    at android.os.AsyncTask$2.call(AsyncTask.java:345)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    ... 3 more\n\n. @NickToropov  no, can not reproduct it .\nThis error just occurred in Huawei p20 & p20 Pro & mate10,according to the statistics service.. ",
    "dyfvicture": "Hello @yuri-kulikov \nThanks for your reply.\nI have submited a demo, you could download and try to run on android.\nI put a built project in the pages folder(index.html and a image), want to use react-native to be a webview(to load the project and to generate android and iOS app) and support hot update(the index.html and all assets it reference), here are the commands i create bundle and push updates\n1. rm -rf ./android/app/src/main/assets/* && react-native bundle --platform android --dev false --entry-file index.js --bundle-output ./android/app/src/main/assets/index.android.bundle --assets-dest ./android/app/src/main/assets && cp -rf pages/* android/app/src/main/assets\n2. code-push release app-name android/app/src/main/assets 1.0.0\nYou could try the demo like this:\n - Install on a android device : react-native run-android\n - Modify the deployment key in MainApplication.java to yours, and the index.html in pages folder(may be Hello, xxx ),run npm run release-and to generate bundle and push updates\n -  Open your app and update to see whether it will update\nMy questions:\n - Whether the bundle contains all assets in pages folder\n - Is the uri way in webview support hot update ? source={uri: 'file:///android_asset/index.html' } . I have tried require('../pages/index.html') and do not copy resources to android/app/src/main/assets, but found the index.html could not load resources it referenced, so I changed require to uri\nThanks for your help!. Thank you @yuri-kulikov, I really appreciate for your time and effort !. @yuri-kulikov OK, thanks for your help !. ",
    "floynn": "@yuri-kulikov Thank you for the fixes!. ",
    "zhilianghuang": "@Spicely I also encountered the same problem.\n@alexandergoncharov The app can also be played before it is updated.\nCannot play after updating. \nthis is my code push server path. @Spicely thank, I will try. @Spicely assets/src/assets/music\nthis you files folder? Can take a picture to see it? \nTq. @Spicely \nTried you this way, the same does not play after the update is completed.\n\n. @Spicely\nThanks You method is ok \nSolution\n. ",
    "Spicely": "@zhilianghuang \nThe problem was that the file could not be found after the update and could not be played.\nSolution uses packaged static files\nBut this method is silent during debugging.\n. @zhilianghuang \nThis is my solution.\n. This can only be used in the official version.\n\u53d1\u81ea\u6211\u7684\u5c0f\u7c73\u624b\u673a\n\u5728 zhilianghuang notifications@github.com\uff0c2019\u5e742\u670812\u65e5 \u4e0b\u53489:07\u5199\u9053\uff1a\n@Spicelyhttps://github.com/Spicely\nTried you this way, the same does not play after the update is completed.\n[image]https://user-images.githubusercontent.com/17289763/52637410-1df0a780-2f0a-11e9-85f4-010d4c9c24a5.png\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://github.com/Microsoft/react-native-code-push/issues/1465#issuecomment-462751800, or mute the threadhttps://github.com/notifications/unsubscribe-auth/AJm95g8qKTHzzv5boKu75jI1pAP1so0sks5vMrx-gaJpZM4Y_wes.\n. ",
    "KasperOlesenMagnetix": "The only instances of anything related to 'X509' in my project is located in the file CodePushUpdateUtils.java, which can be found in react-native-code-push/android/app/src/main/java/com/microsoft/codepush/\nOther than the references in that file, I have no idea.. Hi @alexandergoncharov \nI've tried searching through the project and can't any uses of anything related to 'x509' outside of this library. However, I tried removing the code-push library completely and it is still rejected in the google play store, so I assume that the rejection has nothing to do with this library.. ",
    "tanmaybhatt": "I think this PR on react-native is the problem.\nSo after upgrading to react-native 0.57.8 and react-native link this happens in AppDelegate.m\n```objective-c\n  #ifdef DEBUG\n#ifdef DEBUG\n    jsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index\" fallbackResource:nil];\n#else\n    jsCodeLocation = [CodePush bundleURL];\n#endif\n\n#else\n    jsCodeLocation = [[NSBundle mainBundle] URLForResource:@\"main\" withExtension:@\"jsbundle\"];\n  #endif\n```\nAs far as I can see, this will never load the latest bundle. . ",
    "joaovpmamede": "It's happening to me but on 0.56.0, is it normal?. Sure.\nAppDelegate.m:\n```\n/\n * Copyright (c) 2015-present, Facebook, Inc.\n \n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n /\nimport \"AppDelegate.h\"\nimport \nimport \nimport \nimport \nimport \nif __has_include()\nimport  // This is used for versions of react >= 0.40\nelse\nimport \"RNSentry.h\" // This is used for versions of react < 0.40\nendif\n@implementation AppDelegate\n\n(BOOL)application:(UIApplication )application didFinishLaunchingWithOptions:(NSDictionary )launchOptions\n{\n  NSURL *jsCodeLocation;\n\n#ifdef DEBUG\n      jsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index\" fallbackResource:nil];\n  #else\n      jsCodeLocation = [CodePush bundleURL];\n  #endif\nRCTRootView *rootView = [[RCTRootView alloc] initWithBundleURL:jsCodeLocation\n                                                      moduleName:@\"revup\"\n                                               initialProperties:nil\n                                                   launchOptions:launchOptions];\n[RNSentry installWithRootView:rootView];\nrootView.backgroundColor = [[UIColor alloc] initWithRed:1.0f green:1.0f blue:1.0f alpha:1];\nself.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];\n  UIViewController *rootViewController = [UIViewController new];\n  rootViewController.view = rootView;\n  self.window.rootViewController = rootViewController;\n  [self.window makeKeyAndVisible];\nUIView* launchScreenView = [[[NSBundle mainBundle] loadNibNamed:@\"LaunchScreen\" owner:self options:nil] objectAtIndex:0];\n  launchScreenView.frame = self.window.bounds;\n  rootView.loadingView = launchScreenView;\nUNUserNotificationCenter *center = [UNUserNotificationCenter currentNotificationCenter];\n  center.delegate = self;\nreturn YES;\n}\n\n\n(BOOL)application:(UIApplication )application\n   openURL:(NSURL )url\n   options:(NSDictionary *)options\n{\n  return [RCTLinkingManager application:application openURL:url options:options];\n}\n\n\n(BOOL)application:(UIApplication )application continueUserActivity:(NSUserActivity )userActivity\n restorationHandler:(void (^)(NSArray * _Nullable))restorationHandler\n{\n return [RCTLinkingManager application:application\n                  continueUserActivity:userActivity\n                    restorationHandler:restorationHandler];\n}\n\n\n// Required to register for notifications\n- (void)application:(UIApplication )application didRegisterUserNotificationSettings:(UIUserNotificationSettings )notificationSettings\n{\n  [RCTPushNotificationManager didRegisterUserNotificationSettings:notificationSettings];\n}\n// Required for the register event.\n- (void)application:(UIApplication )application didRegisterForRemoteNotificationsWithDeviceToken:(NSData )deviceToken\n{\n  [RCTPushNotificationManager didRegisterForRemoteNotificationsWithDeviceToken:deviceToken];\n}\n// Required for the notification event. You must call the completion handler after handling the remote notification.\n- (void)application:(UIApplication )application didReceiveRemoteNotification:(NSDictionary )userInfo\nfetchCompletionHandler:(void (^)(UIBackgroundFetchResult))completionHandler\n{\n  NSMutableDictionary* userInfoCopy = [userInfo mutableCopy];\n  userInfoCopy[@\"userHasInteracted\"] = @YES;\n[RCTPushNotificationManager didReceiveRemoteNotification:[NSDictionary dictionaryWithDictionary:userInfoCopy] fetchCompletionHandler:^(UIBackgroundFetchResult result) {\n    if ([userInfoCopy[@\"userHasInteracted\"] boolValue] == YES) {\n      return;\n    }\n    completionHandler(result);\n  }];\n}\n// Required for the registrationError event.\n- (void)application:(UIApplication )application didFailToRegisterForRemoteNotificationsWithError:(NSError )error\n{\n  [RCTPushNotificationManager didFailToRegisterForRemoteNotificationsWithError:error];\n}\n// Required for the localNotification event.\n- (void)application:(UIApplication )application didReceiveLocalNotification:(UILocalNotification )notification\n{\n  [RCTPushNotificationManager didReceiveLocalNotification:notification];\n}\n@end\n```\nThe curious thing is that if I check the appcenter codepush deployment list I don't see any rollback for that particular app/env and it says that in fact I have it installed although it rolled back.. Yup, just give me some time so I can clone/recreate something, can't really share this one as it is.. Well, after some time I decided to run through the docs again, specifically the Multi deployment testing and after duplicating the release scheme I finally was able to get codepush to work as expected.\nAnyway what I had before was this:\n\nand I think it should always be: $(BUILD_DIR)/Release$(EFFECTIVE_PLATFORM_NAME) just like the docs say.\nI'm not really sure if this was the only thing different but for now it's working and I'll fix the rest of my schemes/versions.\nThanks @alexandergoncharov for reaching out.. ",
    "LzxHahaha": "fixed by this. Not working for staging\n```\nproject.ext.react = [\n    entryFile: \"index.js\",\n    jsBundleDirDebug: \"$buildDir/intermediates/merged_assets/debug/mergeDebugAssets/out\",\n    jsBundleDirStaging: \"$buildDir/intermediates/merged_assets/staging/mergeStagingAssets/out\",\n    jsBundleDirRelease: \"$buildDir/intermediates/merged_assets/release/mergeReleaseAssets/out\"\n]\n...\nstaging {\n        minifyEnabled enableProguardInReleaseBuilds\n        proguardFiles getDefaultProguardFile(\"proguard-android.txt\"), \"proguard-rules.pro\"\n        signingConfig signingConfigs.release\n        matchingFallbacks = ['debug', 'release']\n}\n```\nrun gradlew assembleStaging and no bundle has been generated\n. > Hi @LzxHahaha,\n\nThanks for reporting!\nCould you please clarify which version of gradle you are using?\nAnd if you could provide us with a simple reproducible demo it would be very helpful!\n\ngradle 3.2.1\ndemo\nthere are the generated files after run ./gradlew assembleStaging and ./gradlew assembleRelease\n. it work, thanks. ",
    "hardikmobileappsdev": "i'm getting same issue in signing release apk\nAndroidRuntime: FATAL EXCEPTION: Thread-6\n   Process: com.app.meatex, PID: 4542\n   java.lang.RuntimeException: Unable to load script from assets \u2018index.android.bundle\u2019. Make sure your bundle is packaged correctly or you\u2019re running a packager server.\n       at com.facebook.react.bridge.CatalystInstanceImpl.jniLoadScriptFromAssets(Native Method)\n       at com.facebook.react.bridge.CatalystInstanceImpl.loadScriptFromAssets(CatalystInstanceImpl.java:216)\n       at com.facebook.react.bridge.JSBundleLoader$1.loadScript(JSBundleLoader.java:31)\n       at com.facebook.react.bridge.CatalystInstanceImpl.runJSBundle(CatalystInstanceImpl.java:234)\n       at com.facebook.react.ReactInstanceManager.createReactContext(ReactInstanceManager.java:1114)\n       at com.facebook.react.ReactInstanceManager.access$900(ReactInstanceManager.java:113)\n       at com.facebook.react.ReactInstanceManager$5.run(ReactInstanceManager.java:911)\n       at java.lang.Thread.run(Thread.java:764)\n\n\"react-native\": \"0.55.4\",\n\n. ",
    "hyochan": "@yuri-kulikov Hi. I think it isn't a good idea because as framework updates, the packages need to update. If you are afraid it isn't backward-compatible, then the users have the choice not to upgrade react-native-code-push version (This could be posted in the readme). In my case, I always have to change this in the local environment because build fails because of this. It isn't forward-compatible  (Even when I re-install node_modules). I hoped this to be done for a long time, and I've just created PR because it hasn't been updated for a while.. Thank you.. ",
    "hammadzz": "@yuri-kulikov this is a bit painful that we are holding this in for a few who aren't updating they should need to update for bug fixes. It is now 2019 can we have this in asap?. ",
    "IceApriler": "\nHi @IceApriler,\nThanks for reporting!\nCould you please ensure that your app have plist.info in this path \"ios/operator-app/Info.plist\" or \"ios/Info.plist\"?\n\nYes, I have info.plist in the path ios/operator-app/Info.plist. > Hi @IceApriler,\n\nThanks for reporting!\nCould you please ensure that your app have plist.info in this path \"ios/operator-app/Info.plist\" or \"ios/Info.plist\"?\n@alexandergoncharov \nUh, it's my fault. Sorry, it's my path name that went wrong. I'm very sorry.!. \n",
    "gagangoku": "I got the same error when i try codepush for my release configuration. Here's the log:\n2018-12-29 10:54:27.822618+0530 customer_app_rn[38873:251839]  - <AppMeasurement>[I-ACS036002] Analytics screen reporting is enabled. Call +[FIRAnalytics setScreenName:setScreenClass:] to set the screen name or override the default screen class name. To disable screen reporting, set the flag FirebaseScreenReportingEnabled to NO (boolean) in the Info.plist\n2018-12-29 10:54:27.926542+0530 customer_app_rn[38873:251845] [branch.io] Branch.m(192) Log: Branch version 0.25.1 started at 2018-12-29 05:24:27 +0000.\n2018-12-29 10:54:27.939542+0530 customer_app_rn[38873:251845] [MC] System group container for systemgroup.com.apple.configurationprofiles path is /Users/gagandeepsingh/Library/Developer/CoreSimulator/Devices/4008E4F2-CD72-47AD-9E4B-C98D3A3E73C7/data/Containers/Shared/SystemGroup/systemgroup.com.apple.configurationprofiles\n2018-12-29 10:54:27.940577+0530 customer_app_rn[38873:251845] [MC] Reading from private effective user settings.\n2018-12-29 10:54:27.973216+0530 customer_app_rn[38873:251847] 5.9.0 - [Firebase/Analytics][I-ACS023007] Analytics v.50200000 started\n2018-12-29 10:54:27.973323+0530 customer_app_rn[38873:251847] 5.9.0 - [Firebase/Analytics][I-ACS023008] To enable debug logging set the following application argument: -FIRAnalyticsDebugEnabled (see http://goo.gl/RfcP7r)\n2018-12-29 10:54:27.999721+0530 customer_app_rn[38873:251864] Failed to create remote object proxy: Error Domain=NSCocoaErrorDomain Code=4099 \"The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.\" UserInfo={NSDebugDescription=The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.}\n2018-12-29 10:54:27.999812+0530 customer_app_rn[38873:251860] Failed to ping server after delegate was set\n2018-12-29 10:54:27.999877+0530 customer_app_rn[38873:251735] Failed to create synchronous remote object proxy: Error Domain=NSCocoaErrorDomain Code=4099 \"The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.\" UserInfo={NSDebugDescription=The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.}\n2018-12-29 10:54:27.999998+0530 customer_app_rn[38873:251735] [NetworkInfo] Descriptors query returned error: Error Domain=NSCocoaErrorDomain Code=4099 \"The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.\" UserInfo={NSDebugDescription=The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.}\n2018-12-29 10:54:28.000356+0530 customer_app_rn[38873:251735] Failed to create synchronous remote object proxy: Error Domain=NSCocoaErrorDomain Code=4099 \"The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.\" UserInfo={NSDebugDescription=The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.}\n2018-12-29 10:54:28.000448+0530 customer_app_rn[38873:251735] [NetworkInfo] Descriptors query returned error: Error Domain=NSCocoaErrorDomain Code=4099 \"The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.\" UserInfo={NSDebugDescription=The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.}\n2018-12-29 10:54:28.000909+0530 customer_app_rn[38873:251735] Failed to create synchronous remote object proxy: Error Domain=NSCocoaErrorDomain Code=4099 \"The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.\" UserInfo={NSDebugDescription=The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.}\n2018-12-29 10:54:28.000989+0530 customer_app_rn[38873:251735] [NetworkInfo] Descriptors query returned error: Error Domain=NSCocoaErrorDomain Code=4099 \"The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.\" UserInfo={NSDebugDescription=The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.}\n2018-12-29 10:54:28.017169+0530 customer_app_rn[38873:251839] 5.9.0 - [Firebase/Messaging][I-FCM001000] FIRMessaging Remote Notifications proxy enabled, will swizzle remote notification receiver handlers. If you'd prefer to manually integrate Firebase Messaging, add \"FirebaseAppDelegateProxyEnabled\" to your Info.plist, and set it to NO. Follow the instructions at:\n2018-12-29 10:54:28.018796+0530 customer_app_rn[38873:251735] [logging] misuse at line 153876 of [95fbac39ba]\n2018-12-29 10:54:28.029544+0530 customer_app_rn[38873:251735] [AppCenter] ERROR: -[MSAppCenter startService:withAppSecret:transmissionTargetToken:andSendLog:fromApplication:]/387 Cannot start service MSCrashes. App Center was started without app secret, but the service requires it.\n2018-12-29 10:54:28.030880+0530 customer_app_rn[38873:251735] Failed to create synchronous remote object proxy: Error Domain=NSCocoaErrorDomain Code=4099 \"The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.\" UserInfo={NSDebugDescription=The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.}\n2018-12-29 10:54:28.030917+0530 customer_app_rn[38873:251861] Failed to create remote object proxy: Error Domain=NSCocoaErrorDomain Code=4099 \"The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.\" UserInfo={NSDebugDescription=The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.}\n2018-12-29 10:54:28.030977+0530 customer_app_rn[38873:251735] [NetworkInfo] Descriptors query returned error: Error Domain=NSCocoaErrorDomain Code=4099 \"The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.\" UserInfo={NSDebugDescription=The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.}\n2018-12-29 10:54:28.030992+0530 customer_app_rn[38873:251874] Failed to ping server after delegate was set\n2018-12-29 10:54:28.039631+0530 customer_app_rn[38873:251735] Failed to create synchronous remote object proxy: Error Domain=NSCocoaErrorDomain Code=4099 \"The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.\" UserInfo={NSDebugDescription=The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.}\n2018-12-29 10:54:28.039722+0530 customer_app_rn[38873:251735] [NetworkInfo] Descriptors query returned error: Error Domain=NSCocoaErrorDomain Code=4099 \"The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.\" UserInfo={NSDebugDescription=The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.}\n2018-12-29 10:54:28.039957+0530 customer_app_rn[38873:251735] Failed to create synchronous remote object proxy: Error Domain=NSCocoaErrorDomain Code=4099 \"The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.\" UserInfo={NSDebugDescription=The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.}\n2018-12-29 10:54:28.040025+0530 customer_app_rn[38873:251735] [NetworkInfo] Descriptors query returned error: Error Domain=NSCocoaErrorDomain Code=4099 \"The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.\" UserInfo={NSDebugDescription=The connection to service named com.apple.commcenter.coretelephony.xpc was invalidated.}\n2018-12-29 10:54:28.044016+0530 customer_app_rn[38873:251735] \n[CodePush] Loading JS bundle from file:///Users/gagandeepsingh/Library/Developer/CoreSimulator/Devices/4008E4F2-CD72-47AD-9E4B-C98D3A3E73C7/data/Containers/Bundle/Application/60ED5C6C-07F5-4DE5-BCB8-1133BDED2D93/customer_app_rn.app/main.jsbundle\n2018-12-29 10:54:33.695317+0530 customer_app_rn[38873:251872] \n2018-12-29 10:54:33.699984+0530 customer_app_rn[38873:251735] \n2018-12-29 10:54:33.703382+0530 customer_app_rn[38873:251905] Task <46BA29E7-376F-46AB-8885-1E8230CAAAA6>.<4> load failed with error Error Domain=NSURLErrorDomain Code=-999 \"cancelled\" UserInfo={NSErrorFailingURLStringKey=https://codepush.azurewebsites.net/reportStatus/download, NSErrorFailingURLKey=https://codepush.azurewebsites.net/reportStatus/download, _NSURLErrorRelatedURLSessionTaskErrorKey=(\n2018-12-29 10:54:33.706624+0530 customer_app_rn[38873:251905] Task <46BA29E7-376F-46AB-8885-1E8230CAAAA6>.<4> finished with error - code: -999\n2018-12-29 10:54:33.897220+0530 customer_app_rn[38873:251735] [framework] CUICatalog: Invalid asset name supplied: '(null)'\n2018-12-29 10:54:33.897361+0530 customer_app_rn[38873:251735] [framework] CUICatalog: Invalid asset name supplied: '(null)'\n2018-12-29 10:54:33.897504+0530 customer_app_rn[38873:251735] [framework] CUICatalog: Invalid asset name supplied: '(null)'\n2018-12-29 10:54:33.897594+0530 customer_app_rn[38873:251735] [framework] CUICatalog: Invalid asset name supplied: '(null)'\n2018-12-29 10:54:36.390635+0530 customer_app_rn[38873:251735] [framework] CUICatalog: Invalid asset name supplied: '(null)'\n2018-12-29 10:54:36.390759+0530 customer_app_rn[38873:251735] [framework] CUICatalog: Invalid asset name supplied: '(null)'\n2018-12-29 10:54:36.390845+0530 customer_app_rn[38873:251735] [framework] CUICatalog: Invalid asset name supplied: '(null)'\n2018-12-29 10:54:36.390930+0530 customer_app_rn[38873:251735] [framework] CUICatalog: Invalid asset name supplied: '(null)'\n2018-12-29 10:54:36.392009+0530 customer_app_rn[38873:251735] [framework] CUICatalog: Invalid asset name supplied: '(null)'\n2018-12-29 10:54:36.392095+0530 customer_app_rn[38873:251735] [framework] CUICatalog: Invalid asset name supplied: '(null)'\n2018-12-29 10:54:36.392174+0530 customer_app_rn[38873:251735] [framework] CUICatalog: Invalid asset name supplied: '(null)'\n2018-12-29 10:54:36.392242+0530 customer_app_rn[38873:251735] [framework] CUICatalog: Invalid asset name supplied: '(null)'\n2018-12-29 10:56:28.490933+0530 customer_app_rn[38873:252891] [BoringSSL] nw_protocol_boringssl_get_output_frames(1301) [C1.1:2][0x7ff003418620] get output frames failed, state 8196\n2018-12-29 10:56:28.491062+0530 customer_app_rn[38873:252891] [BoringSSL] nw_protocol_boringssl_get_output_frames(1301) [C1.1:2][0x7ff003418620] get output frames failed, state 8196\n2018-12-29 10:56:28.491383+0530 customer_app_rn[38873:252891] TIC Read Status [1:0x0]: 1:57\n2018-12-29 10:56:28.491484+0530 customer_app_rn[38873:252891] TIC Read Status [1:0x0]: 1:57\n2018-12-29 10:56:29.401426+0530 customer_app_rn[38873:252891] [BoringSSL] nw_protocol_boringssl_get_output_frames(1301) [C6.1:2][0x7ff005a1ca20] get output frames failed, state 8196\n2018-12-29 10:56:29.401570+0530 customer_app_rn[38873:252891] [BoringSSL] nw_protocol_boringssl_get_output_frames(1301) [C6.1:2][0x7ff005a1ca20] get output frames failed, state 8196\n2018-12-29 10:56:29.401845+0530 customer_app_rn[38873:252891] TIC Read Status [6:0x0]: 1:57\n2018-12-29 10:56:29.401938+0530 customer_app_rn[38873:252891] TIC Read Status [6:0x0]: 1:57\n2018-12-29 10:56:43.196262+0530 customer_app_rn[38873:253181] [BoringSSL] nw_protocol_boringssl_get_output_frames(1301) [C12.1:2][0x7ff00371c300] get output frames failed, state 8196\n2018-12-29 10:56:43.196416+0530 customer_app_rn[38873:253181] [BoringSSL] nw_protocol_boringssl_get_output_frames(1301) [C12.1:2][0x7ff00371c300] get output frames failed, state 8196\n2018-12-29 10:56:43.196728+0530 customer_app_rn[38873:253181] TIC Read Status [12:0x0]: 1:57\n2018-12-29 10:56:43.196855+0530 customer_app_rn[38873:253181] TIC Read Status [12:0x0]: 1:57\nHere's my appDelegate.m:\n```\n/\n * Copyright (c) 2015-present, Facebook, Inc.\n \n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n /\nimport \"AppDelegate.h\"\nimport \nimport \nimport \nimport \nimport \nimport \nimport \nimport \nimport \nimport \n@implementation AppDelegate\n\n(BOOL)application:(UIApplication )application didFinishLaunchingWithOptions:(NSDictionary )launchOptions\n{\n  [RNBranch initSessionWithLaunchOptions:launchOptions isReferrable:YES];  // Initialize Branch\n  NSURL *jsCodeLocation;\n\n[FIRApp configure];   // Initialize firebase\n[AppCenterReactNative register];  // Initialize AppCenter \n[GMSServices provideAPIKey:@\"AIzaSyB_6Ly7ovRtYqb_p7QxxRSV3WnQh3b1e6Y\"]; // Google maps for IOS\n[AppCenterReactNativeCrashes registerWithAutomaticProcessing];  // Initialize AppCenter crashes\n[AppCenterReactNativeAnalytics registerWithInitiallyEnabled:true];  // Initialize AppCenter analytics\n[AppCenterReactNative register];  // Initialize AppCenter\n#ifdef DEBUG\n    jsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index\" fallbackResource:nil];\n#else\n    jsCodeLocation = [CodePush bundleURL];\n#endif\n\nRCTRootView *rootView = [[RCTRootView alloc] initWithBundleURL:jsCodeLocation\n                                                      moduleName:@\"customer_app_rn\"\n                                               initialProperties:nil\n                                                   launchOptions:launchOptions];\n  rootView.backgroundColor = [[UIColor alloc] initWithRed:1.0f green:1.0f blue:1.0f alpha:1];\nself.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];\n  UIViewController *rootViewController = [UIViewController new];\n  rootViewController.view = rootView;\n  self.window.rootViewController = rootViewController;\n  [self.window makeKeyAndVisible];\n  return YES;\n}\n\n(BOOL)application:(UIApplication )application\n   openURL:(NSURL )url\n   options:(NSDictionary *)options\n{\n  return [RCTLinkingManager application:application openURL:url options:options];\n}\n\n// The code below is crashing. TODO: Figure it out\n/\n// Add the openURL and continueUserActivity functions\n- (BOOL)application:(UIApplication )app openURL:(NSURL )url options:(NSDictionary *)options {\n    if (![RNBranch.branch application:app openURL:url options:options]) {\n        // do other deep link routing for the Facebook SDK, Pinterest SDK, etc\n    }\n    return YES;\n}\n\n(BOOL)application:(UIApplication )application continueUserActivity:(NSUserActivity )userActivity restorationHandler:(void (^)(NSArray restorableObjects))restorationHandler {\n    return [RNBranch continueUserActivity:userActivity];\n}\n/\n\n@end\n```\nand i have followed https://github.com/Microsoft/react-native-code-push/blob/master/docs/multi-deployment-testing-ios.md. Still getting this error.\nEnvironment\nreact-native-code-push version: 5.4.2\nreact-native version: 0.57.1\niOS/Android/Windows version: iOS\nDoes this reproduce on a debug build or release build? release. in debug mode, its picking from metro bundler\nDoes this reproduce on a simulator, or only on a physical device? only tested on simulator\n. ",
    "eyalabadi98": "Hey, thanks for the reply.\nBut yes, I uploaded by app through Xcode (and the app is on 1.75) so it\u2019s by default the latest version\nEyal Abadi\nOn Dec 24, 2018, at 6:52 AM, Yuri Kulikov notifications@github.com<mailto:notifications@github.com> wrote:\nHi @eyalabadi98https://github.com/eyalabadi98,\nThanks for reporting!\nCan you please make sure you are running version 1.75 of the app on your device? Yes, it's kinda obvious :) , but something could have happened, for example, some problems with updating the app or something else.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://github.com/Microsoft/react-native-code-push/issues/1485#issuecomment-449724769, or mute the threadhttps://github.com/notifications/unsubscribe-auth/ADX3Qum3FaDkoJY0jcfp4p1TeDG6L_JUks5u8MAKgaJpZM4ZfgkU.\n. Hello @yuri-kulikov.\nI am getting: \n[tid:com.facebook.react.JavaScript] [CodePush] queryPackage: 1.73\n2018-12-26 08:30:02.807 [info][tid:com.facebook.react.JavaScript] [CodePush] update: 1.76\nThe update version is correct, but not the queryPackage.\nHere is my Xcode\n\n. ",
    "Mikelulu": "+1. [Error]  Internal Server Error. \nNow, I can already use it.. ",
    "minhphung210": "same issue\n. ",
    "zhllucky": "same question, did you resolve\uff1f. ",
    "hxx1197411446": "me too. ",
    "zcmgyu": "Same here\n. ",
    "alokRamteke": "I am facing the same error.\n[Error] Internal Server Error. ",
    "maxschmeling": "@yuri-kulikov late night drive-by pull request... what were the odds that it'd be right the first time? \ud83e\udd23\nI fixed that one as well as the one in sync.. ",
    "vrgimael": "Hi @alexandergoncharov, thanks for getting back. \nWorking on a different project now, will test again and get back asap. ",
    "mikeygee": "Closing for now, not sure if this is actually an issue, need to test some more.. In case anyone else runs into this issue, when you are testing in a simulator environment and making tweaks to the native integration points, the binary bundle modified date gets updated on every compile even if you don't change anything, so you have to push another update to see it take effect since it thinks the binary bundle is newer.. ",
    "Ahao": "I encountered this problem, show download update, successful, restart the page, but the effect is the old version.The updated version has not been replaced.After restarting the application, it was successfully replaced with the new page.This problem has not been solved yet!. ",
    "itsandrewsmith": "Just an update on this -- I was able to get the Appcenter build to update with a new CodePush deployment, however after toggling foreground and background and closing/opening the app, it's reverted back to the old (unchanged) build. Weird, I'm wondering what I've done wrong.... ",
    "gengjiawen": "To make sure code build when collaborate.. So have you got experience with Jenkins or Travis or azcure devops ? . ",
    "coolguy001tv": "I just see it on some logs from server. It shows me there is a crash. I don't own this device. \nSo I just know it happened. Yet I think it's occasionally happened.\nI don't know if I make myself clear.. Thanks for the reply. I'll try to add the permission. \nBesides, I think the code here should have an if-not-null-test between line 74 & 75.\nhttps://github.com/Microsoft/react-native-code-push/blob/3144c916018fab077231e88d8718ad3a1cb0a7d8/android/app/src/main/java/com/microsoft/codepush/react/FileUtils.java#L74-L75\n. @yuri-kulikov \nHi~ When I have my colleague checked our app's uses-permission ( I am not familar with Android) , and the android.permission.READ_EXTERNAL_STORAGE is in the list. It can't be the read permission.\nBesides, our logs are created each time when app crashes. So if there is a read/write permission, the log can't be created and can't be uploaded to our server. But in fact we see the log in our server.. Thanks. If I get more info, I shall comment it here.\nI think I shall have left this issue open for now, at least until the if-not-null-test coded.. ",
    "ervivek40": "Sorry, Thanks \ud83d\udc4d . ",
    "iAladdin": "I checked issue https://github.com/Microsoft/react-native-code-push/issues/1257\nBut I think they are different issues. So I open this.. Hi @yuri-kulikov,\nHow often does this happen?\n12.5% of our users codepush update failed and rollback to last version. (data from appcenter portal)\nAnd I have 2 bug report from bugsnag in recently 2 days. I'll keep eyes on the report portal. \nIs this a rare incident or something recurring?\nI think roughly 1% user will face this problem. (data from appcenter analytics portal)\nCan you also clarify how you use CodePush in your project?\nsure.\nReact Native Code:\n```\n// under RootAppComponent\ncodePush.allowRestart();\nconst codePushOptions = {\n  checkFrequency: codePush.CheckFrequency.ON_APP_RESUME,\n  installMode: codePush.InstallMode.ON_NEXT_RESTART,\n  updateDialog: false,\n};\nlet CodePushApp;\nif (DEV) {\n  CodePushApp = App;\n} else {\n  CodePushApp = codePush(codePushOptions)(App);\n}\n``\nOther operation about codepush justnpm installandreact-native link`\n . @yuri-kulikov \nSure, I'll follow this issue too.\nIf I found anything I'll comment it here.\n. ",
    "isaaclem": "@yuri-kulikov : Thank you very much for your prompt reply. \nNot sure if it's related but has the sequence possibly made any difference?\nTake for example iOS:\nWhether I execute the command appcenter codepush release-react -a <owner>/<app> -d Production before deploying to appstore or after, does it make any changes?. It seems to be working fine. Thanks for your support @yuri-kulikov \nconst codePushOptions = {\n  checkFrequency: codePush.CheckFrequency.ON_APP_RESUME,\n  installMode: codePush.InstallMode.ON_NEXT_RESUME\n};\n. ",
    "lhjzzu": "I got it, thank you very much for your answer\u3002. ",
    "rnagella": "@alexandergoncharov One of the main reasons is issue with error tracking tool like Bugsnag, when uploaded source map we need to mention CodePush release number, so the errors are grouped approximately by version.\n\nsince not each version promoted from staging to beta to production, I don't have a single source of truth for my source map on bug tracking system.\n\nLet say, I have the following scenarios \nv1 released to staging -> Staging is on version v1 \nv2 released to staging -> Staging on version v2\nv2 is now promoted from staging to beta -> Beta is now on version v1\nv3 released to staging -> Staging is on v3\nv3 is now promoted from staging to beta -> Beta is on v2\nv2 Beta is now promoted to production -> Production version is version v1\nso, my source map now fails because Staging is on V3, Beta is on V2, Production is on V1. Where my uploaded source map on my bug tracking system is with v3.\n. Another reason, I have white label of apps and I would like the release to be numbered same across the apps. In addition, I want to see the release version to be the same across the platforms(iOS and Android)\nAllowing manual version which help me to\nSolve the above problems.\n. @alexandergoncharov thank you for your time, I haven't imagined the label version is for just CodePush.\nI agree with you that my problem can be solved having a global version in JavaScript code.\nIn my opinion CodePush should be able to provide a version consistency across the deployments, Identifying a release shouldn't be based on description, but a unique identifier. As more and more release we put out there, if we can't tell what version was promoted all the way to production by viewing on CodePush Dashboard.\n. @alexandergoncharov \"But if CodePush will keep promoting version it can break consistency.\" - can you elaborate on why promoting will break consistency ?  . ",
    "karlFrascari2": "Hi Yuri thanks for the answers! \nSo the problem is that  https://codepushupdates.azureedge.net/storagev2/ is intermittent, some times works sometimes I receive a timeout. \nThis is happening for a lot of users. Do I need to whitelist these URLs in react-native code somewhere?. @yuri-kulikov In this URL works.\nThis previously URL is inside downloadURL when there is a update:\nconst update = await codePush.checkForUpdate()\nconsole.log(update.downloadUrl)\nI am assuming that the service is using this update.downloadUrl to download and install the new bundle, since when this service is down, the user can't update his app!\n\nWhen there the service is unstable, the UNKONW_ERROR is triggered after 30 seconds.\n. ",
    "nbwiller": "Hey @yuri-kulikov, thanks for looking into this. So I tried the commands you gave and they did work. My mistake when attempting this from the command line was I did 'appcenter apps create -o Windows -p \"React Native\"' -d Name' which did not work because I used a space instead of a hyphen in the -p argument. This method of creating a React-Native app is not specified anywhere in the documentation for windows (it only mentions iOS and Android). In addition, the UI of App Center does not allow for this, as shown in the attached picture.\n\nAs an aside, I was able to get CodePush working for my UWP by ingesting it as an Android React-Native app. I doubt this is really an issue, but thought I'd mention it in case that was not intended to be possible. \nThanks for the response! Any chance you can update the App Center docs to include this info?. ",
    "iamolegga": "@yuri-kulikov hi! Could you please review this?. @alexandergoncharov hi, can you merge it?. ",
    "giantss": "Sorry. I forgot to annotate AppDelegate on the code below.\njsCodeLocation = [[NSBundle mainBundle] URLForResource:@\"main\" withExtension:@\"jsbundle\"];. ",
    "Cchumi": "Just solved my issue. \nI have two declaration of code push one in my podfile and one in my workspace Xcode file so it was called twice and that\u2019s why I got rollback. \nThanks a lot \nCchumi. ",
    "alisn72": "@alexandergoncharov Thanx for your reply.\nI was checked everything and finally, i turned my laptop off! it workes correctly after two days without any changes! maybe my problem caused by any server downtime or anything like this. \nanyway, Thanks for your great and useful library :-) . ",
    "ryanlntn": "@alexandergoncharov Sorry for the delayed response. From the documentation it appears --target-binary-version only takes android.defaultConfig.versionName for Android and CFBundleShortVersionString for iOS into account when determining the binary version. I find that it's common to work on multiple features for a single version in tandem and therefore in a CI context it would be much more useful to be able to be able to target android.defaultConfig.versionCode and CFBundleVersion for Android and iOS respectively.. ",
    "srishanbhattarai": "@alexandergoncharov \nHi, \nThat is correct. As explained in the example, if v9 fails and is rolled back to v8 then a new v10 release is not shown by the CLI and in appcenter.ms . This all for the Production deployment. If I push a new deployment to Staging, and promote it to Production, then it's all good. \nAlso, the reason v9 fails in the first place seems to be related to #1144, my app crashes when it tries to restart:\nEDIT: Clarification that I am NOT using react-native-navigation but #1144's OP is using it\n```\n[04:02:27] Applying full update.\n[04:02:28] Loading JS bundle from \"/data/user/0/com..dev/files/CodePush/3d5c2b4f7144a1f8dd8686791b650576d23dfe769c8a1dca4649ab9e616d98d6/CodePush/index.android.bundle\"\n[04:02:28] Restarting app\n<--- IT CRASHES AT THIS POINT, THEN I REOPEN THE APP --->\n[04:02:37] Update did not finish loading the last time, rolling back to a previous version.\n[04:02:38] Loading JS bundle from \"assets://index.android.bundle\"\n[04:02:41] Reporting CodePush update rollback (v13)\n[04:02:43] An update is available, but it is being ignored due to having been previously rolled back.\n``. Changing myinstallModeto useON_NEXT_RESTARTinstead ofIMMEDIATE` as suggested here seems to do the trick. My app does not crash anymore when applying the update (since it applies it on the next restart?) and if I release a new update it shows up as well.\nI also had to change the mandatoryInstallMode since I'm using the -m flag on the CLI.\ndiff\n /**\n * CodePush options for customized updates.\n */\n const options = {\n   updateDialog: true,\n-   installMode: codepush.InstallMode.IMMEDIATE,\n+   installMode: codepush.InstallMode.ON_NEXT_RESTART,\n+   mandatoryInstallMode: codepush.InstallMode.ON_NEXT_RESTART\n }. ",
    "boliveira": "@geof90 , can you give some help here please? I have a react native app that is being tested for security problems and the test team detected that codepush does not verify the public key of the server certificate when downloading the updates. I use code signing feature but should I worry about this??? Any input would help...... ping @alexandergoncharov . Hi alexandre, thanks for answering.\nI was not talking about code signing feature as I am already doing it, but instead of checking the server certificate public key when connecting to the update server to download the updates. In a mitm scenario, someone could pretend to be the server and respond with a certificate that is valid but is not the real one. Public key pinning is a way to prevent that. Is it possible to do here?. Hi alexander,\nI am talking about HTTP Public Key Pinning. Codepush makes https requests for the following sites:\nhttps://codepush.azurewebsites.net/\nhttps://codepush.blob.core.windows.net/\nBut it doesn't validate if the public key of the certificates of these two sites are the expected ones. This leaves it open to man-in-the-middle attack scenarios where someone malicious can send a valid certificate claiming that it is from these websites. With HPKP, you need to also check that the public key of the certificate you received is the one that corresponds to the current server certificate for these websites. One way to do this is to embed the public keys of these sites in the code and check against it when establishing the connection.\n. @alexandergoncharov , yes I know code signing handles this but the security team that is certificating my app didn't like that there wasn't a validation of the server certificate when checking and downloading the update, specially when the downloaded update was kept on the user's device even after the code sign validation failed. So HPKP wasn't implemented because of code signing already handling this scenario or was it an oversight? You can test this scenario using a proxy like Charles Webproxy.. Hi @alexandergoncharov ,\nOk, thanks for clarifying. But it should be implemented to avoid downloading an update and storing it on the user's device when it's not coming from codepush servers.. ",
    "TylerNRobertson": "Hey apologies but you can close this issue. Turns out it had to do with my migration from RN 0.57.8 to 0.58.5. No issues with the code push library :). ",
    "JonsonLius": "It's a problem with ios and android\n+1. \"react-navigation\": \"^2.17.0\"\n \"react-native-code-push\": \"^5.5.2\"\n \"react\": \"16.2.0\",\n  \"react-native\": \"0.55.4\"\nCodePush.sync(\n            { updateDialog: true},\n            (syncStatus) => {\n              Alert.alert(status: ${syncStatus})\n              switch (syncStatus) {\n                case codePush.SyncStatus.UP_TO_DATE:\n                  Alert.alert('UP_TO_DATE')\n                  break\n                case codePush.SyncStatus.UPDATE_INSTALLED:\n                  Alert.alert('UPDATE_INSTALLED')\n                  codePush.notifyAppReady()\n                  break\n                case codePush.SyncStatus.UPDATE_IGNORED:\n                  Alert.alert('UPDATE_IGNORED')\n                  break\n                case codePush.SyncStatus.UNKNOWN_ERROR:\n                  Alert.alert('UNKNOWN_ERROR')\n                  break\n                case codePush.SyncStatus.SYNC_IN_PROGRESS:\n                  Alert.alert('SYNC_IN_PROGRESS')\n                  break\n                case codePush.SyncStatus.CHECKING_FOR_UPDATE:\n                  Alert.alert('CHECKING_FOR_UPDATE')\n                  break\n                case codePush.SyncStatus.AWAITING_USER_ACTION:\n                  Alert.alert('AWAITING_USER_ACTION')\n                  break\n                case codePush.SyncStatus.DOWNLOADING_PACKAGE:\n                  Alert.alert('DOWNLOADING_PACKAGE')\n                  break\n                case codePush.SyncStatus.INSTALLING_UPDATE:\n                  Alert.alert('INSTALLING_UPDATE')\n                  break\n              }\n            },\n          )\n          CodePush.notifyAppReady(). > \u4f60\u7684\u95ee\u9898\u5e73\u53f0\u662f\u4ec0\u4e48\uff1f\uff08\u673a\u5668\u4eba/ IOS\uff09\nindex.js\nCodePush.sync();\nAppRegistry.registerComponent('screen', () => CodePush(codePushOptions)(screen));\nAppRegistry.registerComponent('EndData', () => CodePush(EndData));\nAppRegistry.registerComponent('Withdraw', () => CodePush(Withdraw));\nAppRegistry.registerComponent('Record', () => CodePush(Record));\nAppRegistry.registerComponent('Insurancequotes', () => CodePush(Insurancequotes));\nAppRegistry.registerComponent('Allow', () => CodePush(Allow));\nAppRegistry.registerComponent('ForgotPWD', () => CodePush(ForgotPWD));. ",
    "devyu": "\nAnd what is your issue platform? (Android/IOS)\n\n@alexandergoncharov This issue was discovered on iOS. > @devyu, unfortunately I can't reproduce it. Could you please provide some dummy project with reproducing issue and reprosteps? I would like to debug it.\nHi @alexandergoncharov . Sorry, it's too late to reply to you. I wrote a demo in there. This demo was build with Xcode9.3, you should replace CODEPUSH_KEY, and resigning app. thanks a lot! How can I fix this issue?. > @devyu , Thanks for demo project! I'll investigate it as soon as possible and let you know my results.\n@alexandergoncharov Thank u, I update the demo project and  recorded a video to find out the problem easily.. > > > @devyu , Thanks for demo project! I'll investigate it as soon as possible and let you know my results.\n\n\n@alexandergoncharov Thank u, I update the demo project and recorded a video to find out the problem easily.\n\nHas your problem been solved yet?\n\n@JonsonHI  Not yet. Do you have a better way?. @JonsonHI How to fix this issue?. @JonsonHI Could you provide some code in AppDelegate.m ?  The default code is:\nRCTRootView *rootView = [[RCTRootView alloc] initWithBundleURL:jsCodeLocation\n                                                        moduleName:@\"ModuleName\"\n                                                 initialProperties:nil\n                                                     launchOptions:launchOptions];\nMaybe you changed AppDelegate load behavior\uff1f. ",
    "JonsonHI": "\n\nAnd what is your issue platform? (Android/IOS)\n\n@alexandergoncharov This issue was discovered on iOS\n\nHave you repaired it plese ?. I'm looking forward to solving this problem. I can't create a demo and my demo will work. > > @devyu , Thanks for demo project! I'll investigate it as soon as possible and let you know my results.\n\n@alexandergoncharov Thank u, I update the demo project and recorded a video to find out the problem easily.\n\nHas your problem been solved yet?. > > > > @devyu\uff0c\u611f\u8c22\u60a8\u7684\u6f14\u793a\u9879\u76ee\uff01\u6211\u4f1a\u5c3d\u5feb\u8c03\u67e5\uff0c\u8ba9\u4f60\u77e5\u9053\u6211\u7684\u7ed3\u679c\u3002\n\n\n\n@alexandergoncharov\u8c22\u8c22\u4f60\uff0c\u6211\u66f4\u65b0\u4e86\u6f14\u793a\u9879\u76ee\u5e76\u5f55\u5236\u4e86\u4e00\u4e2a\u89c6\u9891\uff0c\u4ee5\u4fbf\u8f7b\u677e\u627e\u5230\u95ee\u9898\u6240\u5728\u3002\n\n\u4f60\u7684\u95ee\u9898\u5df2\u7ecf\u89e3\u51b3\u4e86\u5417\uff1f\n\n@JonsonHI \u8fd8\u6ca1\u6709\u3002\u4f60\u6709\u66f4\u597d\u7684\u65b9\u6cd5\u5417\uff1f\n\nHas your problem been solved yet?. What's the jsbundle path?\nmy main.jsbundle  path   ios/main.jsbundle\ncodepush   main.jsbundle   Can I replace it?. > Hi @JonsonHI,\n\nThanks for reporting!\nI just tested your case with your versions and successfully got update even after reload app.\nCould you please share your logs during update? There should be logs with [CodePush] tags.\n\nI have Shared the log\n2019-02-26 11:47:09.880 [info][tid:com.facebook.react.JavaScript] [CodePush] Sync already in progress.\n2019-02-26 11:47:09.880 [info][tid:com.facebook.react.JavaScript] [CodePush] Sync already in progress.\n2019-02-26 11:47:09.885 [info][tid:com.facebook.react.JavaScript] [CodePush] Checking for update.\n]2019-02-26 11:47:11.365 [info][tid:com.facebook.react.JavaScript] [CodePush] Downloading package.\n2019-02-26 11:47:12.770 [info][tid:com.facebook.react.JavaScript] [CodePush] Installing update.\n2019-02-26 11:47:12.777 [info][tid:com.facebook.react.JavaScript] [CodePush] Restarting app\n2019-02-26 11:47:13.190 [info][tid:com.facebook.react.JavaScript] [CodePush] Sync already in progress.\n2019-02-26 11:47:13.191 [info][tid:com.facebook.react.JavaScript] [CodePush] Sync already in progress.\n2019-02-26 11:47:13.195 [info][tid:com.facebook.react.JavaScript] [CodePush] Reporting CodePush update success (v93)\n2019-02-26 11:47:13.207 [info][tid:com.facebook.react.JavaScript] [CodePush] Checking for update.\n]2019-02-26 11:47:14.894 [info][tid:com.facebook.react.JavaScript] [CodePush] App is up to date.\n2019-02-26 11:47:19.823 [info][tid:com.facebook.react.JavaScript] [CodePush] Sync already in progress.\n2019-02-26 11:47:19.824 [info][tid:com.facebook.react.JavaScript] [CodePush] Checking for update.\n2019-02-26 11:47:20.050 [info][tid:com.facebook.react.JavaScript] [CodePush] App is up to date.\nAsking for help, I've been confused for days. > > codepush main.jsbundle Can I replace it?\n\nYeah, you can. You should just put the other path to your bundle for --bundle-output argument.\n\nCan the path to a jsbundle file be anywhere?\nConflict with codepush. > oh, yeah, sorry, missed logs. I don't see any issues. It looks like your update was installed but path to update was broken after reopen. It is strange.\n\nI'm not sure that path to your jsbundle can conflict with CodePush as release-react command make new own bundle and release it.\nIf you would like to release exactly your generated bundle you should use release command.\nCould you please provide some dummy project with reproducing issue and reprosteps? I would like to debug it.\n\nI created the project demo\ncodepus  is works\nI found the following log\n```\nLoading JS bundle from file:///Users/ms/Library/Developer/CoreSimulator/Devices/638C363A-8EDA-49C8-98A3-BC7788925732/data/Containers/Bundle/Application/4EE6A98D-E231-403C-8D66-F94D9A810053/codepush.app/main.jsbundle\n```\nBut my formal project doesn't have this log. > @JonsonHI How to fix this issue?\nI used initWithBridge to create the RCTRootview\nCodepush, however, can only be updated using initWithBundleURL.\nSo the problem is solved\n. > @JonsonHI so, was your issue #1530 fully fixed?\nYes, Has been resolved.\nCan I use it  \"initWithBridge\"    load  codepush. > @JonsonHI Could you provide some code in AppDelegate.m ? The default code is:\n\nRCTRootView *rootView = [[RCTRootView alloc] initWithBundleURL:jsCodeLocation\n                                                        moduleName:@\"ModuleName\"\n                                                 initialProperties:nil\n                                                     launchOptions:launchOptions];\nMaybe you changed AppDelegate load behavior\uff1f\n\nDoes not change the \"Appdelegate. M\" code\nuse\nRCTRootView *rootView = [[RCTRootView alloc] initWithBundleURL:jsCodeLocation\n                                                        moduleName:@\"ModuleName\"\n                                                 initialProperties:nil\n                                                     launchOptions:launchOptions];\nI used preloading to preload the jsbundle file into memory. [[RCTRootView alloc] `initWithBridge`:self.bridge\n                                                    moduleName:viewName\n                                             initialProperties:initialProperty];\nI used initWithbridge to create the loading of jsbundle so that the program can be optimized\nBut code-push is to get jsbundle package by means of initWithBundleURL\nSo there's no way to do that in my program\nI can only choose one from two. > Yeah, I see. But I think this code part is not from CodePush as this should be created by react-native project. Could you please share place where you got this code part?\n\nAlso, new react-native@0.59 version uses initWithBridge method in AppDelegate.m file.\n\nAppDelegate.m\n[[ReactRootViewManager manager]  preLoadRootViewWithName:@\"Screen\"];\n```\n@interface ReactRootViewManager ()\n// \u4ee5 viewName-rootView \u7684\u5f62\u5f0f\u4fdd\u5b58\u9700\u9884\u52a0\u8f7d\u7684RN\u754c\u9762\n@property (nonatomic, strong) NSMutableDictionary * rootViewMap;\n@end\n@implementation ReactRootViewManager\n\n\n(void)dealloc {\n    _rootViewMap = nil;\n    [_bridge invalidate];\n}\n\n\n(instancetype)manager {\n    static ReactRootViewManager * _rootViewManager = nil;\n    static dispatch_once_t onceToken;\n    dispatch_once(&onceToken, ^{\n        _rootViewManager = [[ReactRootViewManager alloc] init];\n    });\n    return _rootViewManager;\n}\n\n\n(instancetype)init {\n    if (self = [super init]) {\n        _rootViewMap = [NSMutableDictionary dictionaryWithCapacity:0];\n        _bridge = [[RCTBridge alloc] initWithDelegate:self launchOptions:nil];\n    }\n    return self;\n}\n\n\n(void)preLoadRootViewWithName:(NSString *)viewName {\n    [self preLoadRootViewWithName:viewName initialProperty:nil];\n}\n\n\n(void)preLoadRootViewWithName:(NSString )viewName initialProperty:(NSDictionary )initialProperty {\n    if (!viewName && [_rootViewMap objectForKey:viewName]) {\n        return;\n    }\n    // \u7531bridge\u521b\u5efarootView\n    RCTRootView * rnView = [[RCTRootView alloc] initWithBridge:self.bridge\n                                                    moduleName:viewName\n                                             initialProperties:initialProperty];\n    [_rootViewMap setObject:rnView forKey:viewName];\n}\n\n\n(RCTRootView )rootViewWithName:(NSString )viewName {\n    if (!viewName) {\n        return nil;\n    }\n    return [self.rootViewMap objectForKey:viewName];\n}\n\n\npragma mark - RCTBridgeDelegate\n\n(NSURL )sourceURLForBridge:(RCTBridge )bridge {\n    return [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index\" fallbackResource:nil];\n}\n\n@end\n```. ",
    "rvssvl": "@yasir-netlinks @alexandergoncharov I have the same problem. Previously I used single codepush app for distributing updates both for IOS and Android, however as I understood - one repo should be devoted only to one platofrm(IOS/Android), so that user of both platforms receive updates correctly and immediately. So I decided to create one more codepush App, and here comes the problem. I'm trying to change deployment keys without re-uploading binary to store, so my plan is to change deployment key string through codePushOptions variable, as {.. deploymentKey: Config.MY_ANDROID_STAGING_KEY ..}, HOWEVER when I build release apk and run my app on physical device, nothing happens after updates are pushed. HELP!!!. ",
    "yasir-netlinks": "I found out the target version was wrong. npm version in Store is 1.0.0 , the target version was 1.0.1\nonce I changed it to 1.0.0.  It seems that I miss-understood this, I thought the version will be updated, the initial version can't be changed . @alexandergoncharov  Yes , it seems to work fine now. So for clarification. the Live app now is in version '1.0.0' . And I make changes in and then apply npm version 1.0.1 , when I run code-push release-react <appname>-android android it automatically displays the App Version to what I have set (1.0.1) , do I have to explicitly add the --targetVersion ? \nor is it that when I applying npm version 1.0.1 , and it does bring changes in the native code, does that break CodePush. @alexandergoncharov  Does bringing changes in Version, like running npm version 1.0.+ , this is bring changes in build.gradle and info.plist , is it considered a native change! will it break the CodePush ?\n. this is the last question, sorry for taking you time. In Appcenter, is the Description here is what displayed as a message when the update message appear to the user (asking them to update)\n\n. Hi @alexandergoncharov  , I was wondering why changes in codePush.sync itself didn't reflect in the next update. Previously I did not set it up with much options(new to all this) \ncodePush.sync({\n  updateDialog: true,\n  installMode: codePush.InstallMode.IMMEDIATE\n})\nAnd now:\ncodePush.sync({\n      updateDialog: true,\n      installMode: codePush.InstallMode.IMMEDIATE,\n    }, (status) => {\n      switch (status) {\n        case codePush.SyncStatus.DOWNLOADING_PACKAGE:\n          this.setState({ showUpdateModal: true })\n          break;\n        case codePush.SyncStatus.INSTALLING_UPDATE:\n          this.setState({ showUpdateModal: false })\n          break;\n      }\n    },\n      ({ receivedBytes, totalBytes }) => {\n        const progress = (receivedBytes / totalBytes) * 100\n        this.setState({ updateProgress: Math.round(progress) })\n      }\n    )\nbut those new changes in the codePush.sync didn't appear and behaved as the previous setup when installing the update!. Hi @alexandergoncharov , sorry for the late reply. How to check if the change has been brought to the update! The code I have pushed does contain the new changes I added to codePush.sync. This is the only change that doesn't update, the rest of the changes I made are updated fine . ",
    "zhoujunwei": "Unlike other native projects, our project contains two projects, one is native, the other is react-native. The react-native project contains package. JSON file and nodel_module file, so the directory level changes when referenced from the native project. How should I configure it?. if i remove these lines\napply from: \"../../../shangpinrn/node_modules/react-native/react.gradle\"\napply from: \"../../../shangpinrn/node_modules/react-native-code-push/android/codepush.gradle\"\nit will works,so i am sure ,the problem is in react.gradle or codepush.grale. ",
    "rohit95kumar": "hi alexander,\ni tried your suggestion but it does not seems  to work. Also i need code-push so i cannot proceed without codepush if it had worked.  i cannot resolve this issue as i am unable to figure out where the issue is.. changing the port number under edit  run configuration  to 9090 seems to solve this issue. i simply did npm run build after  changing the port number and replicated the scenario. it worked.. ",
    "GioLogist": "Sure, i'll try and throw something up this weekend.. ",
    "fang0rnz": "Same problem here. ",
    "Jekiwijaya": "I fix by using this\n```diff\n{\nif DEBUG\nreturn [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index\" fallbackResource:nil];\nelse\n\nreturn [[NSBundle mainBundle] URLForResource:@\"main\" withExtension:@\"jsbundle\"];\nreturn [CodePush bundleURLForResource:@\"main\" withExtension:@\"jsbundle\"];\n\nendif\n}\n```. ",
    "cdriscol": "I fixed this a similar way to @Jekiwijaya , just dropped this line into the AppDelegate.m:\n```\n- (NSURL )sourceURLForBridge:(RCTBridge )bridge\n{\nif DEBUG\nreturn [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index\" fallbackResource:nil];\nelse\nreturn [CodePush bundleURL];\nendif\n}\n@end\n```. ",
    "zheldRnaskan": "Hi all, I update react-native-code-push latest version and also did solutions as mentioned above but still have a problem. I think local files in my app are not properly implemented on js file that code-push sent to my app.\nwhen I installed my fresh app and open webview(that is rendered from local static html file) it worked but, but after OTA updated via code-push, I got error \"Domain: kCFErrorDomainCFNetwork Error Code: 1\" on my webview.. ",
    "telmen": "Hi @alexandergoncharov, I'm closing this issue due to I wasn't using latest version of it. After upgrading to latest version, it works. (My bad for creating a unclear issue). ",
    "vance-liu": "working well\uff0cdelete 'disallowRestart' row\uff0cwhy?\n. ",
    "acollazomayer": "@alexandergoncharov I can not give you the dummy project. However, I had the last version of codepush installed in a 0.58.6 react native app. After I upgraded using this changelogs https://github.com/react-native-community/rn-diff-purge/compare/version/0.58.6...version/0.59.0\nWhen I build the project was not building anymore.. ",
    "bhansen77": "I am receiving this problem as well - no changes made, but this has started happening \n03-19 11:33:46.990: W/System.err(2201): javax.net.ssl.SSLHandshakeException: javax.net.ssl.SSLProtocolException: SSL handshake aborted: ssl=0x7c1502a8: Failure in SSL library, usually a protocol error\n03-19 11:33:46.990: W/System.err(2201): error:14077410:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert handshake failure (external/openssl/ssl/s23_clnt.c:741 0x735dfcf8:0x00000000)\n03-19 11:33:46.990: W/System.err(2201):     at com.android.org.conscrypt.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:448)\n03-19 11:33:46.990: W/System.err(2201):     at com.android.okhttp.Connection.upgradeToTls(Connection.java:146)\n03-19 11:33:46.990: W/System.err(2201):     at com.android.okhttp.Connection.connect(Connection.java:107)\n03-19 11:33:46.990: W/System.err(2201):     at com.android.okhttp.internal.http.HttpEngine.connect(HttpEngine.java:294)\n03-19 11:33:46.990: W/System.err(2201):     at com.android.okhttp.internal.http.HttpEngine.sendSocketRequest(HttpEngine.java:255)\n03-19 11:33:46.990: W/System.err(2201):     at com.android.okhttp.internal.http.HttpEngine.sendRequest(HttpEngine.java:206)\n03-19 11:33:46.990: W/System.err(2201):     at com.android.okhttp.internal.http.HttpURLConnectionImpl.execute(HttpURLConnectionImpl.java:345)\n03-19 11:33:46.990: W/System.err(2201):     at com.android.okhttp.internal.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:296)\n03-19 11:33:46.990: W/System.err(2201):     at com.android.okhttp.internal.http.HttpURLConnectionImpl.getHeaderField(HttpURLConnectionImpl.java:143)\n03-19 11:33:46.990: W/System.err(2201):     at java.net.URLConnection.getHeaderFieldInt(URLConnection.java:544)\n03-19 11:33:46.990: W/System.err(2201):     at java.net.URLConnection.getContentLength(URLConnection.java:316)\n03-19 11:33:46.990: W/System.err(2201):     at com.android.okhttp.internal.http.HttpsURLConnectionImpl.getContentLength(HttpsURLConnectionImpl.java:182)\n03-19 11:33:46.990: W/System.err(2201):     at com.microsoft.codepush.react.CodePushUpdateManager.downloadPackage(CodePushUpdateManager.java:166)\n03-19 11:33:46.990: W/System.err(2201):     at com.microsoft.codepush.react.CodePushNativeModule$3.doInBackground(CodePushNativeModule.java:234)\n03-19 11:33:46.990: W/System.err(2201):     at com.microsoft.codepush.react.CodePushNativeModule$3.doInBackground(CodePushNativeModule.java:228)\n03-19 11:33:46.990: W/System.err(2201):     at android.os.AsyncTask$2.call(AsyncTask.java:288)\n03-19 11:33:46.990: W/System.err(2201):     at java.util.concurrent.FutureTask.run(FutureTask.java:237)\n03-19 11:33:46.990: W/System.err(2201):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)\n03-19 11:33:46.990: W/System.err(2201):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)\n03-19 11:33:47.000: W/System.err(2201):     at java.lang.Thread.run(Thread.java:841)\n03-19 11:33:47.000: W/System.err(2201): Caused by: javax.net.ssl.SSLProtocolException: SSL handshake aborted: ssl=0x7c1502a8: Failure in SSL library, usually a protocol error\n03-19 11:33:47.000: W/System.err(2201): error:14077410:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert handshake failure (external/openssl/ssl/s23_clnt.c:741 0x735dfcf8:0x00000000)\n03-19 11:33:47.000: W/System.err(2201):     at com.android.org.conscrypt.NativeCrypto.SSL_do_handshake(Native Method)\n03-19 11:33:47.000: W/System.err(2201):     at com.android.org.conscrypt.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:405)\n03-19 11:33:47.000: W/System.err(2201):     ... 19 more\n03-19 11:33:47.010: I/ReactNativeJS(2201): [CodePush] An unknown error occurred.\n03-19 11:33:47.010: I/ReactNativeJS(2201): [CodePush] javax.net.ssl.SSLProtocolException: SSL handshake aborted: ssl=0x7c1502a8: Failure in SSL library, usually a protocol error\n03-19 11:33:47.010: I/ReactNativeJS(2201): error:14077410:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert handshake failure (external/openssl/ssl/s23_clnt.c:741 0x735dfcf8:0x00000000). The devices attempting to connect are indeed android 4.x. Based on the above comment I tested a 5.x device and found that it worked.\nThis only started happening recently, previous to that android 4.x worked fine. The devices that I have using this are all 4.x and cannot be upgraded. Can support for 4.x be restored?\n. ",
    "zt5": "android 4.x same error reason https://developer.android.com/about/versions/android-5.0-changes#ssl\nsolve  https://blog.csdn.net/yanzhenjie1003/article/details/80202476. ",
    "yinxh2016": "only 1.0.0 can use ,other can not use. ",
    "triage": "thank you @lostintangent ... I've updated this to append '-beta' to the tag. now the tags will be maintained but the version that shows up in the Info.plist will be in the proper format.\n. ",
    "ymmuse": "Actually, when got a 400 code, the code\nobjective-c\n+        if (statusCode >= 400) {\n +            [self.outputFileStream close];\n +            [connection cancel];\n +\nconnection will be canceled and connectionDidFinishLoading does not be called.\n. Sent when a connection has finished loading successfully.\nI have tested, it did.\n. ",
    "kevinvangelder": "@silhouettes Updated. (Alex is offline for a few hours). ",
    "mauron85": "Hi guys. I'm just solving probably the issue with ordering, like you did here. Can you please explain why ordering in if ... else statement is important? Just don't get it, but seems to be causing duplicate imports. Many thanks.. > I could hypothesize that both \"RCTConvert.h\" and  exist in 0.40\nactually that is what i thought too, but find node_modules/ -name RCTBridge* finds only occurrence. Also even if there were two of them, I though that #if / #else is safe enough to not allow importing file more than once.\nI saw this commit, where you're changing order and I though, you had same issue with duplicate imports, but if it's just cosmetic, then it remains mystery for me.\nAnyway thank you for time and answer. . ",
    "MatkovIvan": "There is default API for that. See TextUtils.isEmpty. mResult (to match style with other classes). "
}