{
    "brunoramalho": "Do you have something in mind or can I think in some solution?\n. Please @cnasikas, share with us the folder structure on your wordpress instalation.\n. Ok, I'll try to reproduce your setup in my Window and Mac environments, and try to identify the problem. \nHow do you use the yeoman is easier to reproduce the environment, if you can give me only the configuration file yeoman for the settings remain identical, would help a lot.\n. How is the status of this task, I have some ideas and would like to propose, layout and functionality. \nI think it would be interesting to have a functionality of collapse entries in repeat-group and drag-n-drop reordering. \nWhat do you think about?\n. Hi @senicar, My suggestion is just an enhancement to your proposal, I sent the question here because I wanted to know if you had already done so I can work with what I thought.\n. Hi @jtsternberg, I would like to do the things I said above, but while that is not integrated @senicar made \u200b\u200bcan not. \nThe PullRequest it is ok?\n. Thanks to reply.\n. Yes indeed, more particularly think the calendar display that sent far more visually interesting. \nBut it is still a great option too, just think weird in older browsers with jquery ui calendar look better than in modern browsers.\nI want to propose applying thema administration of wordpress in the CMB2 calendar, using this http://x-team.github.io/wp-jquery-ui-datepicker-skins/.\nThis would...\n\n. The calendar did not like the team you?\n. Ok @coreymcollins, more in relation to proposed new layout? \nIf you liked it, I can select the back and give it a custom to which he is better suited to the proposal, or leave as default and not include a parameter that can be enabled and disabled when creating the field. \nThe think about it?\n. Ok, but if you update the jquery-ui things I will remove again, even so will I do here.\n. @jtsternberg,\nI believe that solved the problem.\n. I've removed the jqueryui styles and did commit.\nBruno Ramalho\nWebdesigner and FrontEnd Developer\n+55 85 8674.9017/ +55 85 8778.3031\nEm 22/12/2014 13:21, \"Justin Sternberg\" notifications@github.com escreveu:\n\n@brunoramalho https://github.com/brunoramalho Do you want to try and\nget your PR up to date?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/pull/46#issuecomment-67856088.\n. @jtsternberg I updated my fork project and re-sent the pull request\n. Yes I can...\n\nAtt.\nBruno Ramalho\n\u200b\u200b\n2015-04-06 11:58 GMT-03:00 Justin Sternberg notifications@github.com:\n\nCan you check the most recent version and see if this PR is still\nnecessary?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/pull/46#issuecomment-90090857.\n. This has already been implemented? I believe so to have the old version, which would be the best way to use this feature?\n. I Removed parameter to remove selects the month and year of the calendar header. \n\nOver the correct location would be here https://github.com/WebDevStudios/CMB2/blob/master/includes/CMB2_hookup.php#L153-154 \nI will correct and send the PR again.\n. Yes, make sense, below before/after\n\n. Hi guys,\nI fixed this issue.\n. @coreymcollins @jtsternberg @gregrickaby ?\n. ",
    "jtsternberg": "Sure, take a stab at it and submit a PR.\n. definitely :+1: \n. Right now grouped fields are strictly for repeatable groups, but we ought to make it more generic, making repeatable an option as well as tabs being an option: https://github.com/WebDevStudios/CMB2/blob/master/example-functions.php#L310-L314\nI know @pmgarman already had it in the works to make field groups work w/o having to be repeatable.\n. @scottopolis used this approach for tabs. @billerickson is that what you had in mind?\nhttp://jsfiddle.net/syahrasi/Us8uc/\n. @marcusbattle is working on #93 which will eventually directly benefit this (future) feature. Hopefully we'll get this in in the next few weeks.\n. We have not, though I don't think it would be too difficult. As @robneu said, it would just mean outputting multiple CMB2 instances in a single metabox and using jquery tabs.\n. ha ha this is super old. I think it's good (for now). It was to switch it from all pre-CMB2 language and such.\n. Sorry, I cannot accept any requests for support as issues. Please open an issue in the original repo (as issues are already off-topic). You'll be more likely to receive help: https://github.com/WebDevStudios/Custom-Metaboxes-and-Fields-for-WordPress/issues\n. Thank you Mr. Rickaby. I fixed a parse error, but other than that, looks good!\n. No better man for the job! Hate to ask, but is this all tested?\n. Also, what is the update_submodules task/grunt plugin for? We don't have any submodules in CMB.\n. Maybe it does? I don't know. :)\n. Yah, that's pretty much what I mean. BUT CMB can be used in the post metaboxes, as a settings page, as user fields, and not to mention the front-end. so If we're going to make big changes to the css, we need to at least look at CMB in all those contexts, as well as viewing each field type. Does that make sense?\n. :boom: Thanks @gregrickaby \n\n. @nlemoine I'm not familiar with Composer. If you care to submit a (tested) PR, I'd be happy to include it.\n. Have you tested this change?\n. Based on my testing, it looks like select values are reset when duplicating a group. Can you update to the latest version and check if this PR is still applicable to you?\n. This looks good to me, though I have no idea if it would work correctly. We're discussing internally what the support link should be, but as soon as we sort that out, i'll merge this in and update it. Leaving open for now.\n. Please post your question on stackoverflow. \nhttps://github.com/WebDevStudios/CMB2/blob/master/CONTRIBUTING.md\n. I think what you guys are saying makes sense, and I'll try to get to that.\n. Markup converted. https://github.com/WebDevStudios/CMB2/commit/be026f79f57424cc36306114fed9bce4d761410f\n. To be noted, before, after, before_row, and after_row are all parameters that can either take a string value or a callback. So if you want to determine if you should output some markup based on the field (or any other conditional), you can do that. if assigning a callback, that callback will receive the field arguments array as the first parameter and the field object as the second.\nYou can see the unit test as an example:\nField setup: https://github.com/WebDevStudios/CMB2/blob/master/tests/test-cmb-core.php#L20-L23\nCallbacks: https://github.com/WebDevStudios/CMB2/blob/master/tests/test-cmb-core.php#L190-L196\nOutput: https://github.com/WebDevStudios/CMB2/blob/master/tests/test-cmb-core.php#L165, https://github.com/WebDevStudios/CMB2/blob/master/tests/test-cmb-core.php#L171, https://github.com/WebDevStudios/CMB2/blob/master/tests/test-cmb-core.php#L174, \nhttps://github.com/WebDevStudios/CMB2/blob/master/tests/test-cmb-core.php#L177\n. Currently not supported, but is on the list for improvements.\n. Related #264\n. CMB2 is not always in the plugins directory. It can be bundled w/ other plugins, themes, or placed in mu-plugins. Are you using the most recent version (on github)?\n. tagging @pmgarman, as he's hopefully going to do some extensive testing in windows environments.\n. @ravensorb it will likely always be an issue if using a non-standard WP installation, but that is the purpose for the 'cmb2_meta_box_url' filter: https://github.com/WebDevStudios/CMB2/wiki/Troubleshooting#cmb2-urls-issues\n. @ravensorb I've pushed an update to the trunk branch that checks if CMB2 is in the plugins or mu-plugins dir, and uses plugins_url by default if so. That should address some of the issues in this thread, but please test and let me know. thank you.\n. This issue should be solved for almost all use-cases now (without need to filter). If any of you are able to test with the trunk branch, please do so.\n. > I'm using custom WP folder structure \nPlease post a new issue, listing exact duplication instructions, and possibly others on windows systems can create a PR to address the situation. As it is now, you're commenting on a closed issue and not providing much for others to test with.. oh, that's no good. checking out.\n. Ok, example code has been updated, but please use the 'before_field' param instead of the 'before', and that should take care of the issue.\n. Please explain to me why I would use your PR vs the one provided in #19?\n. I merged in #19. Please submit any proposed changes to a new PR. Thank you!\n. I use the function all the time and am not able to duplicate the issue. Maybe others have the issue. Either way, as per the contributing doc, I would like to close this issue and request you move your support request to the wordpress.org support forums. You're more likely to receive assistance from others using your setup. If during that process we determine there is an issue with the library, we can reopen here.\n. This is no longer necessary as all li's have been converted to divs.\n. Absolutely will love a pull request. I'm opposed to the full-width button example though. Everything else sounds good. \nMy standard disclaimer:\nCMB2 can be used in many contexts including the post metaboxes, as a settings page, as user fields, and not to mention the front-end. so If we're going to make big changes to the css, we need to at least look at CMB in all those contexts, as well as viewing each field type. Does that make sense?\n. Also major props for actually reading the contributing.md doc. :D\n. that should work.\n. Paging @gregrickaby @coreymcollins. Can you guys checkout his branch and verify all is good?\n. @senicar re: last-child selector, maybe we could change it to use last-of-type? Can you test w/ that?\n. A few tweaks here and there. Reverted the 'button-primary' classes on the add-new buttons (I don't think repeatable field 'add new' buttons are primary buttons, and when adding several fields, you have a gratuitous number of primary buttons); made the large-text 100% width specific to repeatable fields, and a few other tweaks. Thank you for your contribution @senicar!\n. I can't fathom why that would occur and am not able to reproduce. \n. We can close. . This should be good in trunk. Huge thanks for @yivi's work. Please test.\n. Might look at this plugin by @jazzsequence: https://github.com/WebDevStudios/WDS-Simple-Page-Builder\n. Thanks!\n. @gregrickaby care to check out this branch and verify it all looks good?\n. You can make a field required using the 'attributes' array. https://github.com/WebDevStudios/Custom-Metaboxes-and-Fields-for-WordPress/wiki/Field-Types#attributes\n. As far as a general 'required' parameter for fields, I don't think it would be too difficult to add some JS to accommodate that. And re: the title of the post, If the JS existed for CMB, I guess it probably wouldn't be a bad idea to make it generic enough that you could use it for other WP fields.\n. @BrunoRamalho gladly accept a PR to update it. :) If you submit a PR, please ping @gregrickaby to take a look at it as well. Thank you.\n. Incidentally, it appears modern browsers are beginning to adequately accommodate the date 'type' parameter for inputs: http://b.ustin.co/1dqwa\nWe should look to see if there's a JS lib to determine if the jQuery UI feature is needed or should default to default browser behavior.\n. If you remove the original datepicker UI styles from the _jquery_ui.scss file, I'll merge this in.\n. Hey, can you update your branch w/ master? If so, I should be able to pull this in.\n. @brunoramalho Do you want to try and get your PR up to date?\n. @brunoramalho Yes, but your PR can not be merged as-is because master has changed quite a bit since you submitted. So I'm requesting that you get your PR up-to-date w/ master and make sure it still works as expected for you.\n. Can you check the most recent version and see if this PR is still necessary?\n. CMB2 date/time-pickers have undergone significant changes since this PR. Hopefully this issue is addressed, but if not, feel free to open a new PR against the trunk branch (as per contribution guidelines).\n. Thanks Phil, and nice catch! After we get out of beta, we'll switch to master/trunk, but for now, it's all on master.\n. I actually had to roll this change back as it was causing the unit tests to fail. Can you provide the scenarios which your patch is meant to fix? In other words, describe what is broken, and how your PR fixes it.\n. Ok, makes sense. There was a bit more work involved with fixing this default behavior, but it should be good to go now.\n. Done. https://packagist.org/packages/webdevstudios/cmb2\nThanks for the heads up!\n. I'm not sure this issue isn't a wp_editor issue (vs a cmb one). Can you verify if you have the same issues adding wp_editor instances manually? \n. Care to submit a PR? Or even let me know where you want that to happen? I've never actually used Packagist (other than adding this repo to it).\n. Tagged. https://github.com/WebDevStudios/CMB2/releases/tag/v2.0.0.8\n. @benoitchantre the simplest way to determine what to ignore would be to compare against what we distribute in the wordpress.org package (svn:ignore): https://plugins.trac.wordpress.org/browser/cmb2/trunk\n. Sounds like an awesome plan.\n. nice catch. Thanks!\n. @cluke009 sorry, trunk is not (yet) relevant, so a PR against master is fine. We'll be developing on master until we're out of beta. Re: collapsible groups: I've accomplished that w/ something like this: https://gist.github.com/jtsternberg/bc59ef4eda8cc5c4cc3c\n. This is done.\n. This is a cool concept, but looks like it could still use some tweaking. When I add a new group, the new group(s) is/are not collapsible, so that JS that triggers the collapsible stuff needs to be applied to each new group that is added. Also, I would prefer if we stuck w/ the class-based selectors and gave the h3 the cmb-group-title class.\n. Also, there needs to be some styling accommodations for repeatable groups in the sidebar: http://b.ustin.co/1fHSy\n. @cluke009 You're saying this is good to go, or still needs work? If wo, what work needs to be done?\n. @cluke009 Do you think you could update your PR after merging from master again? Some things have changed to repeatable groups, so your PR will break things as-is.\n. Thank you and nice addition! I updated a couple styling things, and added a 'remove' icon/button to the group title bar.\n. Re: \"other issues I would like to tackle\", you can always create a new branch off of this repo's master and do a pull request w/ that branch. Then you could work on more than one thing simultaneously.\n. This is using the WordPress core colorpicker. We won't be switching to another library. You may want to make your html5 suggestion upstream: https://github.com/Automattic/Iris\nAnd documentation is here: http://automattic.github.io/Iris/\nIt's likely it will already let you specify that format via the defaults override which you can do via the cmb2_localized_data filter: https://github.com/WebDevStudios/CMB2/blob/master/includes/CMB2_hookup.php#L143\n. Ugh, WordPress harcodes the mode. That's not cool.\n. So I've submitted a patch. We'll see how that goes. \n. FYI, My patch to WordPress core was just committed, so by the time WordPress 4.1 rolls around, you'll be able to set the color picker mode.\n. @cluke009 4.1 was just released, so you should be able to set the mode now.\n. yah you could use a field 'sanitization_cb' parameter to set a callback to convert the values to rgb. Here's a hex->rgb method in javascript: https://plugins.trac.wordpress.org/browser/storyftw/trunk/assets/js/storyftw.js#L118\n. In this WordPress Shortcode Button lib, I did ajax validation for the form fields before outputting the shortcode params. So basically, when the form is submitted, serialize the form data, send it via ajax, validate via the sanitization_cb/sanitization class then send the a response back.\nadd ajax handler: https://github.com/jtsternberg/Shortcode_Button/blob/master/shortcode-button.php#L65\nprocess form fields: https://github.com/jtsternberg/Shortcode_Button/blob/master/shortcode-button.php#L280-L359\nResponse handling: https://github.com/jtsternberg/Shortcode_Button/blob/master/js/shortcode-quicktag-button.js#L93-L100\n. @AlchemyUnited you have good intentions, but the code you're pointing to is extremely hard to read, and in no way is something we could use in its current form. Maybe if you were willing to create a much simpler proof of concept w/o relying on all the other ezclass things you have, we can evaluate and take a look.\n. Was resolved with #66.\n. This was resolved when #65 was resolved.\n. Thanks @sc0ttkclark. I added some additional documentation, as well as some additional filters in e2d931bfa3079426debce80e80a1e5a3be4087c7.\n. Merged: https://github.com/WebDevStudios/CMB2/commit/5b8f51148346bef32925c0a5f5093389149f30d0. Thanks @sc0ttkclark!\n. There is a filter for the field row classes, cmb2_row_classes. I think that would probably be sufficient for adding the column classes for a proof of concept, right? I'd consider adding this feature, but we'd need to figure out which contexts it would make sense to apply the column styling. I don't think it would be a good fit for a user profile page, for instance. Bottom line, it's not as simple as it may seem, and would need some major testing.\n. I've added a row_classes parameter, and you can see it/use it in trunk. changelog\n. If you guys can build a solid proof of concept for making this work w/ columns, then we can get closer to getting into core.\n. @DevinWalker if you're referring to the unwieldy nature of the metabox config arrays, one of the goals for a future update is to convert that array to using at least a few helper functions. No matter what though, config can get large/crazy depending on what you're trying to do.\n. @JiveDig yah, proof of concept like make a library (something like https://github.com/WebDevStudios/cmb2-attached-posts) that allows others to do the same, then test it in other scenarios like user profile pages, admin settings pages, front-end forms, etc. Make sense? Or a pull request, but that's harder to get a lot of people using/testing. Basically a workflow similar to WordPress' features-as-plugins concept.\n. @DevinWalker ah, makes sense! I bet you and @JiveDig could come up w/ a killer proof of concept. ;)\n. @JiveDig that's correct. It's in core now (in trunk) and will be rolled into the next release.\n. basically goes like this:\n``` php\n<?php \n$value_to_add = 'my new value to add to the array of data';\n// Get the original data so as not to overwrite it\n$values = get_post_meta( $post_id, $meta_key, 1 );\n// If data is already an array, add to it.\nif ( is_array( $values ) ) {\n    $values[] = $value_to_add;\n} else {\n    // If it's not an array, it should be\n    $values = array( $value_to_add );\n}\n// Now replace meta w/ new updated value array\nupdate_post_meta( $post_id, $meta_key, $values );\n```\n. Good catch. Thanks!\n. I just pushed an update to .org, but didn't bump the version yet (as we're still technically beta). You can get the update by downloading the plugin from .org and re-uploading.\n. The file uploader uses WordPress' default media uploader. Have you experienced the same flaws (404s or whatever) when adding a file like that to the media library?\n. @andrejm I'll be closing this issue if you aren't able to provide more information. Trying to keep issues clean.\n. Better yet, please create a new issue if you're not able to duplicate the issue by trying to add those files directly to the media library (and determined that the problem is specific to CMB2).\n. Thanks for reporting. This should be good now.\n. Also kudos for a super-thorough bug report!\n. The field can pass a date_format and time_format to handle this. Does this solve the issue you're asking about?\n. The parameters mentioned above, along w/ modifying the 'cmb2_localized_data' filter should do the trick:\nphp\n<?php\nadd_filter( 'cmb2_localized_data', 'issue_73_l10' );\nfunction issue_73_l10( $l10n ) {\n    $l10n['defaults']['date_picker']['dateFormat'] = 'dd-mm-yy';\n    return $l10n;\n}\n. Thank you for reporting\n. the 'file_list' field saves an array with the array keys being the attachment ID, and the array value being the file url. Github issues is now where we handle support. Please visit the wordpress.org support forum.\n. I don't understand this question. CMB2 doesn't add any urls to the postmeta table.\n. Github issues is now where we handle support. Please visit the wordpress.org support forum.\n. No, it is not possible to position metaboxes there via the metabox parameters. You would have to do it manually.\n. Can you describe the exact process to duplicate this issue?\n. the image_id_from_url method is a fall-through and is only there for fail-cases. There should always be an attachment ID that gets added (to a hidden input) via the media modal. If you're hitting that method, there are some other issues going on.\n. I'd like to test it, but can you tell me how I can duplicate the issue? Basically same filename uploaded in two different month folders? would that do it?\n. Yah, I think the culprit is actually in the sanitizing method. Can you test that as well? Because you said when the modal adds the attachment to the input, it's adding the id to the hidden input, correct?\n. thanks for digging. I think I found the culprit, and am looking into it.\n. Please pull the update and let me know if the issue has been addressed on your end.\n. Awesome, thanks for reporting.\n. yes, it is possible to bundle it. You just need to include init.php from your plugin.\n. That is (very) incorrect. Please follow the example in example-functions.php.\n. OH, I understand, you are referencing the method inside init.php. \n. Again, that method won't get called if you don't include init.php in your plugin ala example-functions.php.\n. You need to follow the example in example-functions.php. Meaning, do not use class_exists, do not put the include to init.php inside a function or hooked to init, etc. Please follow the example.\n. That is actually documented in the reademe.md on the project homepage (Change 3).\n. That is not correct. It is supposed to use the $saved_terms variable as that is the ACTUAL taxonomy terms added. The $this->field->value is irrelevant when dealing w/ the taxonomy fields because the values come from the taxonomy terms.\n. Please describe how I can duplicate your issue, and I'll test it out.\n. If you're using this for an options page, you will want to make a custom field. The taxonomy fields were not intended to provide an arbitrary list of terms to pick from, but are intended to be a replacement for the default taxonomy metaboxes. I.e. they are meant to set the taxonomy terms on an object. Any other use of these types will be hacky and/or buggy as you've demonstrated.\n. There is a way, and it's even in example-functions.php. ;)\n. yah, that comment is misleading. Sorry about that. It applies everywhere. Keep in mind that if you set that to false for one metabox, but not another (on the same page), the styles will still be enqueued.\n. Have you tried adding the 'repeatable' parameter to the oembed field? It allows you to add unlimited videos. https://github.com/WebDevStudios/CMB2#field-types\n. Thank you for reporting! should be good now.\n. The first parameter is the field object, and is not an array. The second is the escaped value. It might be helpful if you read the inline docs for that hook: https://github.com/WebDevStudios/CMB2/blob/master/includes/CMB2_Types.php#L41-L57\nThe wiki is definitely in need of some repair, and is a work in progress.\n. For starters, you don't want to have that javascript code block in your field method, because it could be output to the page many times. You should use the cmb2_after hook for that.\nSecond, you should use the $field object methods to output the id and name parameter. You can follow the example used in the main input method.\n. Yessir. https://github.com/jtsternberg/Taxonomy_MetaData/blob/master/README.md#to-use-taxonomy_metadata-with-cmb2\n. nice catch!\n. You're probably looking for cmb2_get_field_value.\n. Oh, I see. the issue is that the CMB2_Option class has no knowledge of the cmb2 metabox/fields array. It would be an undertaking to make that happen.\n. Typically that would be defined by a meta box, wouldn't it? There's not currently a way to do a non-repeatable group, but I guess I'm not sure what that would look like. \n. Closed by https://github.com/WebDevStudios/CMB2/commit/c8b904de3a84a7323bfecdc188f5234da51f74ed\nWill be in the next release.\n. Hey @jaxgeller, I just released 2.0.7, but for future reference, you can find/download the trunk branch here: https://github.com/WebDevStudios/CMB2/tree/trunk\n. This would be cool, but a pretty large undertaking. I think it would better be suited to an extension than increasing the bloat of this library.\n. You could use the cmb2_localized_data filter to add a color palette.\nphp\nadd_filter( 'cmb2_localized_data', 'cmb2_update_color_picker_palette' );\nfunction cmb2_update_color_picker_palette( $l10n ) {\n    $l10n['defaults']['color_picker'] = array(\n        'palettes' => array( '#ff00ee', '#00ff00', '#00bbff' ),\n    );\n    return $l10n;\n}\n. if implemented, would look like:\nphp\narray(\n    'type' => 'colorpicker',\n    'options' => array(\n        'palette' => array( '#ff00ee', '#00ff00', '#00bbff' ),\n    ),\n)\nSince the options param can hold any number of options and is by nature, an array of options. Maybe we'll be able to get a PR submitted for this.\n. thank you @benjaminmueller!\n. All CMB2 fields work the same way as the original. You shouldn't lose anything by switching. As this is a support request, I'm closing this, but feel free to open a new support request on the forums if you run into anything else. \n. :boom: Thanks @marcusbattle!\n. This looks like a nice addition. Can you please get your branch up-to-date w/ master so I can check it out? Also, would be great if you could give a list of scenarios/field-types you tested this with.\n. @asknaskan I've checked out your branch. You did not run grunt watch while editing the JS file, so there are quite a lot of things to be fixed. Please run grunt and fix all the jshint issues, as well as update your code to match the rest of the files coding style/standards (i.e. use single quotes, inline comments go on a sep. line ABOVE the line to be commented, etc). There are also a few things that won't 'break', but should be updated anyway, like using 'jQuery' where the '$' shorthand is used in the rest of the file.\nAs it is now, this PR will need a lot of work before I can even begin testing it. If you can update these things, I'll try to start testing.\n. Still some issues going on. \n\n. You can add as many attribues to a field input as you want using the 'attributes' parameters: https://github.com/WebDevStudios/CMB2/wiki/Field-Types#common-field-parameters#user-content-attributes\nAgree about the confusion of the label/id, etc. I think minimum, we should probably switch 'name' to 'label'.\n. Also, since you're able to add any attributes you want, there's no reason you can't add 'required' attributes, etc (like in the example listed in the link I posted).\n. There are several ways to accomplish server-side validation, though technically at that point, it is sanitization, not validation:\nsanitization_cb field parameter, last item here: https://github.com/WebDevStudios/CMB2/wiki/Field-Types#common-field-parameters\ncmb2_sanitize_{field-type}: https://github.com/WebDevStudios/CMB2/wiki/Adding-your-own-field-types#step-2-cmb2_validate_field-type\n. Yep, that's a decent solution, then you could use the cmb2_before_field_row or cmb2_after_field_row hooks to output any found errors.. The saving is irrelevant, as WordPress handles the term-setting/getting part. The value that gets saved should really be filtered out (no value) for that particular meta-key.\n. This PR is messed up, so I won't be able to merge or even look at it in its current state.\n. Josh, hmm these are good thoughts, and that does sound like a good trac ticket to open, though one may exist already. Let me know what you find!\n. And thanks for the PR!\n. The function name has changed. You can review the example here: https://github.com/WebDevStudios/CMB2/wiki/Using-CMB-to-create-an-Admin-Theme-Options-Page\n. @Ramblurr I've been asked that a couple times, but CMB2 simply uses post-meta. http://wp-api.org/#posts_retrieve-meta-for-a-post I don't think CMB2 needs any additional support.\n. @Ramblurr that's a good question. WP-API doesn't support options (it appears). I'm assuming that is for security reasons since there is a lot of sensitive data stored in the options table. I'm checking in w/ the WP-API team to see if they have plans and why/why not.\n. I totally get the use-case, but considering the security implications, making all CMB2 option data available all the time via the API, is a bad idea. It sounds like an awesome extension idea though.\n. Ideally, the extension would create an api endpoint, and could look for a 'api-availability' property on the $cmb object, which could take 'all' (which would expose all the $cmb->fields options), or 'selective' (which would require you to add 'api-availability' => true to your field config).\n. Re: WP-API options support: https://github.com/WP-API/WP-API/issues/816\n. Work has begun! Still working on the update part. Also, we may want a custom cmb2 endpoint or filter, for just getting the cmb2 data? or even retrieving a single cmb2 field?\n. > This format would be easier to use\n\n\"cmb2\":\n       {\n          \"rest_demo_metabox\" {\n              \"rest_demo\": {\n                 \"rendered\": \"this is to test rest data\"\n              }\n            }\n       },```\n\nAgreed, we'll use that.\n\nwp-json/cmb2/v1/metaboxes // gets all registered show_in_rest metaboxes inlcuding fields\n\nI'm trying to avoid the term metabox as much as possible these days as CMB2 is beyond metaboxes. I'm thinking wp-json/cmb2/v1/boxes would probably be my preferred endpoint.\n\nwp-json/cmb2/v1/fields // gets all register show_in_rest fields\n\nI don't think there is value in mashing the fields together without the cmb2 object contextual data.\n\nwp-json/cmb2/v1/metaboxes/<metabox_slug> // gets single meta box and its fields\n\nwp-json/cmb2/v1/boxes/<box_slug>\n\nwp-json/cmb2/v1/fields/<field_slug> // gets a single field. \n\nField slugs are only unique within a single box. Will need to be: wp-json/cmb2/v1/boxes/<box_slug>/fields/<field_slug>\n\n?filter=<post_type> // filters registered show_in_rest metaboxes inlcuding fields for specified post type.\n\nAgree, and probably can add an object-type filter, i.e.:\n?filter=<object_type> // filters registered show_in_rest metaboxes inlcuding fields for specified object type (i.e. post, user, comment, term, options-page)\n(and maybe others, like filtering by field-type)\n. Ryan, thanks for your work on this! I merged in what you had (minus some composer autoloader stuff?) and made a ton of updates: https://github.com/WebDevStudios/CMB2/commits/cmb2-rest-api\nThere's still some work to do (see the TODOs), but it's getting there!\n. ## TODOS\nAdd to the post endpoint: (#621)\n\n[x] Add to the post endpoint\n[x] Make fields readable\n[x] Make fields honor show_in_rest property\n\n\n[x] Make fields writeable\n[x] Make fields honor show_in_rest property\n\n\n\nAdd custom CMB2 namespace and endpoints for reading (#622)\n\n[x] Add boxes endpoint\n[x] Make boxes honor show_in_rest property (#612)\n[x] Handle callable properties (#613)\n[x] Add boxes/{cmb_id} endpoint\n[x] Add boxes/{cmb_id}/fields endpoint\n[x] Add boxes/{cmb_id}/fields/{field_id} endpoint\n[x] Make fields honor show_in_rest property (#614)\n[x] Handle callable properties\n\nAdd endpoints for writing: (#623)\n\n[x] boxes/{cmb_id} endpoint\n[x] boxes/{cmb_id}/fields/{field_id} endpoint\n\nMisc\n\n[x] Research proper schema (#615)\n[x] Properly document code (#616)\n[x] Unit tests (#617)\n[ ] Documentation\n[ ] Examples (#618)\n[x] Research adding _links the proper way\n[x] Use request objects helpers for getting $_GET parameters (#619)\n[x] Split REST API classes to sub-directory, and update autoloader. (#620)\n. @modemlooper best bet is to re-fork the cmb2-rest-api branch rather than continue to work on yours.\n. Calling this done. Only thing left is documenting in the wiki (#618).\n. awesome! Thank you @onnimonni!\n. You can also override the form format via the $args parameter on cmb2_metabox_form/cmb2_get_metabox_form/cmb2_print_metabox_form: https://github.com/WebDevStudios/CMB2/blob/master/includes/helper-functions.php#L225\n. There's definitely ways to do it. Have you reviewed the (somewhat out-of-date) wiki page on front-end forms? https://github.com/WebDevStudios/CMB2/wiki/Bringing-Metaboxes-to-the-Front-end\n. Looks like a good addition. Care to attempt a unit test to accompany this new function and complement the existing test?\n. I updated the function to remove $resave, so we're good to go. Thank you for your submission and for taking the time to add unit tests!\n. I have not worked w/ Bower, but from my understanding, it is a package manager for javascript libraries. It doesn't sound applicable to this library/plugin.\n. If you remove the wp_normalize_path function inside the cmb2_dir function, does it work properly?\nThat would make it look like:\n\nphp\nfunction cmb2_dir( $path = '' ) {\n    return trailingslashit( dirname( __FILE__ ) ) . $path;\n}\n. Can you do me a favor?\nCan you test it like this:\nphp\nfunction cmb2_dir( $path = '' ) {\n    return trailingslashit( str_replace( '\\\\', '/', dirname( __FILE__ ) ) ) . $path;\n}\nIt looks like you're on windows, so I would like to get this nailed down for other windows users if possible. Thank you!\n. Ok, thank you. I've removed wp_normalize_path from the library for now, so if you update your CMB2 it should be good to go: \n. I think this issue has been resolved. Can you please update your copy of CMB2 and verify?\n. Yah, if you're looking to do complex things like that, it means you're going to have to handle 1) your own display (you have that part), 2) your own sanitizing (CMB2's will break), and 3) your own escaping (CMB2's will break).\nThe quick and dirty solution is to use 'escape_cb' => false and 'sanitization_cb' => false on your field registration.\nOR, handle sanitization/escaping properly:\n``` php\nadd_filter( 'cmb2_sanitize_address', 'cmb2_sanitize_address_field', 10, 5 );\nfunction cmb2_sanitize_address_field( $check, $meta_value, $object_id, $field_args, $sanitize_object ) {\n    if ( is_array( $meta_value ) && $field_args['repeatable'] ) {\n        foreach ( $meta_value as $key => $val ) {\n            if ( isset( $val['state'] ) && 'AL' == $val['state'] ) {\n                unset( $val['state'] );\n                $val = array_filter( $val );\n                if ( empty( $val ) ) {\n                    unset( $meta_value[ $key ] );\n                    continue;\n                } else {\n                    $val['state'] = 'AL';\n                }\n            }\n            $meta_value[ $key ] = array_map( 'sanitize_text_field', $val );\n        }\n    return $meta_value;\n}\nreturn $check;\n\n}\nadd_filter( 'cmb2_types_esc_address', 'cmb2_types_esc_address_field', 10, 4 );\nfunction cmb2_types_esc_address_field( $check, $meta_value, $field_args, $field_object ) {\n    if ( is_array( $meta_value ) && $field_args['repeatable'] ) {\n        foreach ( $meta_value as $key => $val ) {\n            $meta_value[ $key ] = array_map( 'esc_attr', $val );\n        }\n    return $meta_value;\n}\nreturn $check;\n\n}\n```\nAs you can tell, it's not simple when you're talking about repeatable things.\n. I've added a full-example of the address field in the Snippets Library: address-field-type.php\n. Here is an another example similar to how the address field used to be: https://github.com/CMB2/CMB2-Snippet-Library/blob/master/custom-field-types/form-field-field-type.php. 518e2a3 should address this. Let me know if not.\n. Sounds like you're on windows, and this condition is not being met:\nhttps://github.com/WebDevStudios/CMB2/blob/master/includes/CMB2_Utils.php#L106\nCan you do me a favor and place this at the top of your functions.php and let me know what it gives you?\nphp\nwp_die( '<xmp>PHP_OS: '. print_r( PHP_OS, true ) .'</xmp>' );\n. There are examples for doing that in the snippet library.\n. @AlchemyUnited We accept pull requests. ;) RE: recreated over/over.. No because it's hooked into the after_metabox action. \n. > \u00a0I've PR'd before. I fixed the Select2. Somebody had to it.\nI'm specifically referring to a pull request for the snippet library, though we accept pull requests here as well. It's much harder to get a pull request through here for a lot of reasons. One of these days I need to write a blog post to document the process/philosophy.\n\nLet me explain...\n\nYep, that makes perfect sense. That snippet is meant to be a working concept (as are most of the snippets). I don't recommend using any of them without modifying them to best suite your individual use-case. As a proof of concept, it's simpler to add some hard-coded JS than to build a fully fleshed-out plugin. That being said, if you want to create a third party plugin/extension that builds off of this concept and does it the right way, I'd be happy to take a look and provide feedback/help or whatever. It's a feature that's received more than a few requests, so I'd be happy to link to it when others are asking.\n\nAlso, as it looks to me, as it is now, if you have multiple group repeaters that js is gonna be created for each one, correct? Again, maybe there's a better way.\n\nNo, again, because it's hooked into the after_metabox action (not hooked to the field). So this code would only be repeated if you could fire the same metabox twice (which you can't without doing some really weird/wrong stuff).\n. Thanks for your PR. I actually tackled this the other day without realizing you had done most of the work already. I gave you props, as you submitted a PR that is close to what I ended up with, and after I found your PR, I was able to improve a couple things in mine. Thanks again!\n. You will need to provide your code for further assistance. \n. Not sure if this is a bug report, feature request, or future pull request? I'll close, but feel free to open another if more focused.\n. ### The issues section is for bug reports and feature requests only.\nSupport is not offered for this library. If you need help, please use\u00a0stackoverflow, or the\u00a0wordpress.org plugin forums.\n. Thanks!\n. That's a good call. Feel free to submit a PR>\n. Hey, let's just use dirname( __FILE__ ) and not __DIR__ at all. That will save on confusion for what is supposed to be just an example file.\n. I'm sure, but thank you for your consideration. This is meant to be an example file to demo CMB2. The confusion for some of the low-level users is not worth the micro-savings. By all means, use __DIR__ in your own projects. \n. Thanks!\n. For just the text:\nphp\ncmb2_metabox_form( $meta_box, $object_id, array(\n    'save_button' => __( 'Save Settings', 'give' ),\n) );\nFor the form format:\nphp\ncmb2_metabox_form( $meta_box, $object_id, array(\n    'form_format' => '<form class=\"cmb-form\" method=\"post\" id=\"%1$s\" enctype=\"multipart/form-data\" encoding=\"multipart/form-data\"><input type=\"hidden\" name=\"object_id\" value=\"%2$s\">%3$s<div class=\"submit-wrap\"><input type=\"submit\" name=\"submit-cmb\" value=\"' . __( 'Save Settings', 'give' ) . '\" class=\"button-primary\"></div></form>',\n) );\nOr you can use the filter like you have it, but keep in mind, that will affect the form format for all uses of the cmb2_metabox_form, cmb2_print_metabox_form, and cmb2_get_metabox_form functions, so you should make sure you're looking at the right form. If you're using the example, you'd do it like this:\n``` php\n/\n * Modify CMB2 Default Form Output\n \n * @param  string  $form_format Form output format\n * @param  string  $object_id   In the case of an options page, this will be the option key\n * @param  object  $cmb         CMB2 object. Can use $cmb->cmb_id to retrieve the metabox ID\n \n * @return string               Possibly modified form output\n */\nfunction myprefix_options_modify_cmb2_metabox_form_format( $form_format, $object_id, $cmb ) {\nif ( 'myprefix_options' == $object_id && 'option_metabox' == $cmb->cmb_id ) {\n\n    return '<form class=\"cmb-form\" method=\"post\" id=\"%1$s\" enctype=\"multipart/form-data\" encoding=\"multipart/form-data\"><input type=\"hidden\" name=\"object_id\" value=\"%2$s\">%3$s<div class=\"submit-wrap\"><input type=\"submit\" name=\"submit-cmb\" value=\"' . __( 'Save Settings', 'give' ) . '\" class=\"button-primary\"></div></form>';\n}\n\nreturn $form_format;\n\n}\nadd_filter( 'cmb2_get_metabox_form_format', 'myprefix_options_modify_cmb2_metabox_form_format', 10, 3 );\n```\n. For those who may be lurking on this issue, the snippets from https://github.com/WebDevStudios/CMB2/issues/130#issuecomment-68160722 are now in the snippet library.\n. Did you look at the documentation?\n. ### The issues section is for bug reports and feature requests only.\nSupport is not offered for this library. If you need help, please use\u00a0stackoverflow, or the\u00a0wordpress.org plugin forums.\n. @pooyaa a) the issues section is not a support forum. The support forum is the support forum. b) It is not OK to spam my personal contact form. c) There is more than enough information in the cmb2_output_file_list sample function to get you what you need.\nphp\necho '<div class=\"file-list-image\">';\necho wp_get_attachment_image( $attachment_id, $img_size );\necho '</div>';\nto\nphp\necho '<div class=\"file-list-image\"><a href=\"'. $attachment_url .'\">';\necho wp_get_attachment_image( $attachment_id, $img_size );\necho '</a></div>';\nFor future basic php/wordpress questions, you need to please use\u00a0stackoverflow, or the\u00a0wordpress.org plugin forums.\n. The 'taxonomy_select' field is not a repeatable field. It is meant to set one term to a post. \n. Unfortunately that example is out of date so won't work as expected & definitely wouldn't work in a repeatable group. I'll try to update the example today. \n. Why wouldn't you use the 'file' field type?\n. There are ways around it, but I've updated the library to accept non-null values. An empty field (\"\") is still going to be considered null and will then trigger the default, but 0 should now work.\n. Yes, don't edit the core files, or you'll break it for other plugins/themes that are depending on the library. Are you sure you mean line 221? https://github.com/WebDevStudios/CMB2/blob/master/includes/helper-functions.php#L221\nAlso, can you be more specific about which scripts are loaded? I agree, this should not happen unless the field types you add need them.\n. I just added a simple text field to the front-end, and yah, I got the whole WordPress media setup enqueued. Definitely a bug. But again, please do not edit the core files. It is a bad idea for many reasons. I've included a filter for the JS and the CSS enqueueing so you can at least block them that way.\n``` php\nfunction maybe_not_enqueue_cmb_js( $do_enqueue ) {\n/**\n * Make sure to set a limited scope for your condition so you don't\n * disable JS for every plugin/theme that may use this feature.\n */\n$my_conditions_are_matched = ( ! is_admin() && 'custom-post-type' == get_post_type() );\n\nif ( $my_conditions_are_matched ) {\n    // Ok, then, don't enqueue the JS\n    return false;\n}\n\nreturn $do_enqueue;\n\n}\ncmb2_enqueue_cmb_jsadd_filter( 'cmb2_enqueue_js', 'maybe_not_enqueue_cmb_js' );\n```\nWe'll need to work on making these script enqueues more conditional in the future.\n. If you want the id to be saved correctly, you need to click the button to attach the media from the media library. It automatically gets the ID for you. Otherwise it's trying to extrapolate the ID from the url and as you have witnessed, can sometimes fail.\n. I can't imagine a scenario where that would occur. Is your media library in good shape? Or are you working on local/dev environment with a cloned database? Also, when you select a file from the media modal, the attachment ID gets added to a hidden field (screenshot: http://b.ustin.co/1d7u7 ). Does it add the attachment ID for you? and if so, is it the correct ID?\n. Nice catch, thanks!\n. Just a heads up, I have a tutorial blog post on this very topic queued up which should be coming up in the next week or two.\n. @kidesigner you are absolutely abusing issues, and spamming every channel. (see #168, #184, #174, https://github.com/WebDevStudios/CMB2-Snippet-Library/issues/1, and this issue, #139)\nPlease stop. I would love to write the tutorial and WILL will write the tutorial as soon as I have a time, and unfortunately that time is not this moment. I'm going to close all the other issues you're commenting on and leave this one open.\n. The tutorial is almost complete, just waiting on a publish slot on the WebDevStudios blog. For now, there is a working example in the snippet library. It requires 2.0.3. The tutorial will basically cover how that snippet works. Hopefully it's enough to get you started.\n@kidesigner You do not take a hint, or a straight up request to stop spamming, but I'm asking you again, please do not continue spamming github with tutorial requests. \n. Tutorial is published: Use CMB2 to Create a New Post Submission Form\n. I think that could make a nice extension. I'm trying to clean up issues, so I'll be closing this. If you find an actual issue, feel free to open another. Thanks.\n. Thank you @EyesX!\n. There are many many filters and callbacks to do just about anything you want. Could you be more specific?\n. Ah yes, documentation is painfully behind. So much more you can do that is not documented there. One of my goals is to get that fleshed out and document all the actions/filters/callbacks. It will be quite an undertaking. \n. To create a custom field with multiple inputs, a good place to start is with this tutorial: https://github.com/WebDevStudios/CMB2/wiki/Adding-your-own-field-types#example-4-multiple-inputs-one-field-lets-create-an-address-field\n. @bigevent please do not hijack another person's issue. The issues section is for bug reports and feature requests only. If you need help, please use stackoverflow, or the wordpress.org plugin forums.\n. @underscorefunk best bet is to look at the methods in CMB2_Types that accomplish the types of inputs you are looking to duplicate. Not super helpful, but my best recommendation right now.\n. Can you be more explicit? or better, explain what it's doing now vs what you want it to do?\n. Have you seen the data-iterator attribute on the repeatable fields? That is the unique ID for the field on normal repeat fields. Are you trying to build a similar combined filed like the screenshots? You might look at the text_datetime_timestamp or text_datetime_timestamp_timezone field types, as they both combine several field types into one type.\n. Ah yes, that's correct if you're using repeat groups (you must be if you're shifting rows). But you're correct, the ordering of groups is still \"beta\" and I'd like to get some time to completely refactor it.\n. Hmm.. actually, before_field can be a callback as well. I think some additional logic is needed there. Nice catch though. Going to make some modifications.\n. Good catch. Alternatively you could (and maybe should?) use the cmb2_get_metabox_form function to get a metabox object. Thank you for your submission!\n. @jamiechong This was broken during a previous update (7e521ed8368672090b9fac28ab4f6da19c74f91b). Let me know if you have any problems at this point.\n. @victorpetryk @buniden are you having this issue with a repeatable text field within in repeatable group? \n. I fixed a few bugs, which I think will help you guys out. Please update and let me know.\n. nice catch, thanks!\n. Should be good in the trunk branch. please test.\n. I think this issue has been resolved. Can you please update your copy of CMB2 and verify?\n. I think the simple solution would be to not use the value 0 as your option value, but use a string instead, like 'no'.  Then in your output, if you really need the 0 value, you can check for 'no' and translate it to 0. \nI'll leave this issue open though as this is a bug. \n. related #341 #246\n. Hey @jamiechong, thank you so much for contributing. You're best bet for having your pull requests seriously considered would be to read and follow our contributing guidelines. Please make your pull requests off of the trunk branch.\n. If you have CMB2 installed as a plugin, then you do not need to manually include the init.php file.. WordPress does that for you. You only need to include the file manually if you are bundling CMB2 with your theme or plugin. \nYes, the code from example-functions.php can go in your functions.php. You can also create a new php file in your theme and include it from your functions.php.. That part is up to you.\nThe get_post_meta part will not work until you have saved some values to your page via the metaboxes.\n. That is in the plans for sure, but we're planning on first refactoring the JS. I think once that is complete, adding drag/drop should be pretty straightforward.\n. This is a duplicate of #5. There is not currently a built-in way.\n. Last update should fix that. Please let me know.\n. Still an issue?\n. Yah, verified. Checking into it\n. Should be good now if you update.\n. @jeffryevans please open a new issue if this isn't related to 'Using CMB2 for Options Page'. And when you do so, you'll nee to provide much more info. Please see the CONTRIBUTING.md.\n. @GregLancaster71 last update should fix that. Please let me know.\n. CMB2 is not 100% back-compatible with CMB1 (which is why they are different libraries). I can't recall how 1.2 did repeat fields vs how they are now, but it's possible you may need a script to convert the previous values to the new structure.\n. @marcusbattle can you merge master into your branch as it's pretty far out of date. \n. Finally got this feature merged. I made a few updates/tweaks (things like @pmgarman mentioned). You can see all the changes here: https://github.com/WebDevStudios/CMB2/compare/0d3f70617e71e7a878afefab46a1931a4ea9b9be...6350d5ec41692cc21acea34327e6e5491ea4f65b\n. Can you please be more specific? Are you referring to the fields using the 'sanitization_cb' parameter? if so, you'll need to post your code for the callback function pw_select2_sanitise, as well. Also, keep in mind, this is not validation, but sanitization. It will not keep the form from submitting, but clean the values after the form is submitted.\n. Using your code (slightly modified) works for me. screenshot: http://b.ustin.co/13MHH\nI doubt it is the issue, but please also update CMB2 as I pushed out an update this morning.\nmy code:\n``` php\n<?php\nadd_filter( 'cmb2_meta_boxes', 'cmb2_user_metabox_test' );\nfunction cmb2_user_metabox_test( array $meta_boxes ) {\n$args2 = array(\n    'post_type' => 'post',\n    'posts_per_page' => 5,\n);\n$loop = get_posts( $args2 );\n\n$depot = array();\nforeach ( $loop as $_post ) {\n    $depot[ $_post->ID ] = $_post->post_title;\n}\n\n// Start with an underscore to hide fields from custom fields list\n$prefix = '_eko_';\n\n/**\n * Sample metabox to demonstrate each field type included\n */\n$meta_boxes['user_metabox'] = array(\n        'id' => 'user_edit',\n        'title' => __( 'User Profile Metabox', 'cmb2' ),\n        'object_types'     => array( 'user' ), // Tells CMB to use user_meta vs post_meta\n        'show_names'       => true,\n        'new_user_section' => 'add-new-user', // where form will show on new user page. 'add-existing-user' is only other valid option.\n        'fields'           => array(\n            array(\n                'name' => 'Adler and Allan Company Information',\n                'desc' => 'Please enter your information below',\n                'type' => 'title',\n                'id'   => $prefix . 'adler_information'\n            ),\n            array(\n                'name'    => 'Unique Employee Number',\n                'desc'    => '',\n                'default' => '',\n                'id'      => $prefix . 'employee_number',\n                'type'    => 'text'\n            ),\n            array(\n                'name'    => 'GMEE Record ID',\n                'desc'    => '',\n                'default' => '',\n                'id'      => $prefix . 'gmee_number',\n                'type'    => 'text'\n            ),\n            array(\n                'name'    => 'Depot',\n                'desc'    => '',\n                'default' => '',\n                'id'      => $prefix . 'depot',\n                'type' => 'select',\n                'options' => $depot,\n            ),\n            array(\n                'name'    => 'Divison',\n                'desc'    => '',\n                'default' => '',\n                'id'      => $prefix . 'divison',\n                'type'    => 'text'\n            ),\n            array(\n                'name'    => 'Group Email',\n                'desc'    => '',\n                'default' => '',\n                'id'      => $prefix . 'group_email',\n                'type'    => 'text_email'\n            ),\n\n        ),\n);\n\n// Add other metaboxes as needed\n\nreturn $meta_boxes;\n\n}\n``\n. Can you post your entire code? I'm using the latest release of WordPress, but that shouldn't matter.\n. This is a great question. I dug into git history, and it turns out, that hook was used from [day one, the first commit](https://github.com/WebDevStudios/CMB2/commit/cfd80fc75784f1fe2fd53220f3a9b9507e696567#diff-e9fa0d13b445ed0246ee0003db4374d6R82). My guess is that the'add_meta_boxes'` hook was not very well-known at that point. I'll update in trunk to use this correct hook, and (if it doesn't break anything), will be in the next release.\n. The thing that concerns me with deep changes like this is the unintended side-effects for existing users. Can you think of any reasons why/how this would cause problems?\n. Also, if we implement this, it most likely should go in the CMB2_Sanitize constructor.\n. Thanks @clifgriffin!\n. I think that would be better suited for JS, right? Either way, I'd be open to a PR.\n. It's only the post ID if using post objects. CMB2 also works w/ users, comments, and options. Which documentation are you referring to? I'm working on updating docs, so want to make sure it's clear.\n. Anything we can do here?\n. Check the documentation. It will not display automatically since it simply saves as a url. You need to make sure the oembed filters are applied to it. \n. I apologize for misunderstanding. I added more to the documentation. Keep in mind, the documentation is a wiki, so if you feel certain parts are not clear, you may feel free to edit them.\n. @jcamomile ha, I totally understand. But hey, keep in mind that this software is OUR software. Open source FTW ;)\n. https://github.com/WebDevStudios/CMB2/wiki/Tips-&-Tricks#setting-a-default-value-for-a-checkbox\n(short version, it's not that straightforward for checkboxes)\n. Nice! Please follow the CONTRIBUTING.md when submitting PRs.\n. Can you explain why you think:\nphp\narray(\n    'name'        => 'Test Select',\n    'id'          => $prefix . 'test_select',\n    'type'        => 'select',\n    'option_none' => __( 'None', 'cmb' ),\n    'options'     => array(\n        'standard' => __( 'Option One', 'cmb' ),\n        'custom'   => __( 'Option Two', 'cmb' ),\n        'none'     => __( 'Option Three', 'cmb' ),\n    ),\n),\nis better than:\nphp\narray(\n    'name'    => 'Test Select',\n    'id'      => $prefix . 'test_select',\n    'type'    => 'select',\n    'options' => array(\n        '' => __( 'None', 'cmb' ),\n        'standard' => __( 'Option One', 'cmb' ),\n        'custom'   => __( 'Option Two', 'cmb' ),\n        'none'     => __( 'Option Three', 'cmb' ),\n    ),\n),\n?\n. If you fix the parse error from the missing closing parenthesis in the function_exists conditional, i'll merge this in. :)\n. Yes, the test that is failing:\n\n1) CMB2_Utils_Test::test_image_id_from_url\nFailed asserting that 148 matches expected null.\n\nThe test only fails on WP installations 4.0.0 or later (i.e. versions which have the attachment_url_to_postid function). This means the functions probably doesn't do what you think it does, or that it's not a direct replacement.\n. With the 2.0.2 release, clicking the thumbnail will re-open the modal, and there should be an edit image link in there.\n. when you say make changes, do you mean in the code, or saving/updating field values? When you say 'menu on my site', do you mean a WordPress menu (wp-admin/nav-menus.php)?\nEither way, I've never experienced that. Can you verify it still occurs with all other plugins deactivated?\n. yah, that is super weird. Thanks for investigating.\n. I tried to duplicate your issue by adding number field, and saving the value 10, and as you said, it saves/displays as 10.00. But when I save the field again, it retains the 10.00 value. I have not seen it go to 1.000.00. Can you please be more specific with your steps to reproduce the issue?\n. Still can't duplicate your issues. Entering the different values you've suggested all give me what I would expect. I wonder if it's a PHP version issue? Or possibly a WordPress localization issue? The only field paramater I can't duplicate locally is the show_on_cb parameter because I don't have the code for the show_fee_field callback, but that really shouldn't affect this.\n. If anyone can provide exact duplication instructions, I can try to test. (I've never actually changed the WP locale \ud83d\ude0a )\n. What is the whole notice? And you should have a line number given which will tell you where the notice happens.\n. Are you using this snippet exactly? https://github.com/WebDevStudios/CMB2-Snippet-Library/blob/master/front-end/output-file-list.php\n. There happens to be tip/trick just for you: https://github.com/WebDevStudios/CMB2/wiki/Tips-&-Tricks#a-dropdown-for-taxonomy-terms-which-does-not-set-the-term-on-the-post\n. The only solution that will work while maintaining the mechanism we have in place to ensure only the newest version of CMB2 is loaded is your 2nd bullet. I think we could pretty easily add a CMB2_LOADED constant in the init class's constructor that you could check. Also, a good hook to use (in place of the init hook) if you want to hook after CMB2 is loaded, is the cmb2_init hook.\n. To be clear, I agree, it IS a bit backwards, and it comes down to the issue that dependency management in WordPress is broken. For now, this is the best we got. I'd be open to further discussion, but keep in mind, CMB2 can be installed as a plugin, or bundled in a plugin/theme or placed in mu-plugins. It needs to be intelligent enough to handle all those scenarios without failing, and still load the most recent version installed in the system.\n. @mAAdhaTTah having it be installable as a plugin is the least of our concerns as far as this dependency management issue goes. But to answer your questions, we've made CMB2 available as a plugin for several reasons:\n- Easy 'installation' (simply activate the plugin)\n- Free support forum to funnel people to (instead of cluttering issues w/ support requests)\n- More visibility and less barrier to entry\n- Why NOT have it installable as a plugin? It works the same no matter where you put it.\n@maxchirkov Nah, I completely agree with you. I love to hate CMB2. It's the nature of a software maintainer.\n. @mAAdhaTTah the issue comes when CMB2 is loaded/included from more than one source (plugin or theme or mu-plugins, or wp plugin). The mechanisms in place are to ensure that CMB2 being included from more than one place will not break/white-screen. Again, dependency management is hard. :(\n. This was added in #262.\n. The wiki has pretty in-depth examples/documentation as well. https://github.com/WebDevStudios/CMB2/wiki/Adding-your-own-field-types\n. @JohEngstrom would love a submission to the snippet library if you get that range slider input done. :) https://github.com/WebDevStudios/CMB2-Snippet-Library\n. This is fixed in trunk and will be in the next release, thanks to @jamiechong!\n. Per @JayWood, need some sort of hook to be able to remove boxes/fields.\n. Can you test with trunk and see if that solves the issue?\n. @mchiron What @mAAdhaTTah said. Thank you for submitting though.\n. @qmatt I submitted a pull request to your repo for that custom field type. If you're willing to merge that in, I'll be happy to include a link to the repo on the readme. \n. the file field saves the attachment id as well, so as long as you're doing a database import/export as well as migrating all the files, you should be able to use that w/ no issues. See the documentation: https://github.com/WebDevStudios/CMB2/wiki/Field-Types#file\nBUT to answer your question, there is not CMB2 setting to change this. It's probably best to replace those urls in your database as they will also be the localhost urls for any images you've used in the post-content as well.\n. I have a hunch I have an idea what this is, and would love it if you could investigate for me. If you replace your install w/ the 2.0.1 version, does it work as expected?\n. A wysiwyg field is not a normal input/textarea/etc field, so the attributes array does not apply. You'll need to use Javascript to accomplish what you're trying to do.\n. Thanks, I've incorporated your change. For the future, please submit your pull requests against the trunk branch. See the CONTRIBUTING.md.\n. IANAL, but I'm not sure the license is compatible w/ GPL. \n. It's in trunk, and will be in the next release. \n. @tw2113 yep!\n. I think I'm board, though I'd prefer to extract it as an add-on if someone used it/liked it. But yah, the feature is a little presumptuous.\n. This looks like a really nice addition. Can you be sure to pull/merge from our trunk branch so yours is up-to-date?\n. There's a ton of file-mode changes that got committed. To clean up, I can either manually merge your stuff in (you'd be removed from the git history), or if you want to try and submit another PR w/ only the relevant files changes (no file-mode changes), I'll take a look at merging again.\n. Is this still needed?\n. @conatus what do you recommend for your 2nd point?\n. Does it work with something like: \"phpunit/phpunit\": \">=3.8\"?\nThe way it's setup currently is the way it is recommended: https://phpunit.de/manual/current/en/installation.html#installation.composer\nhttps://coderwall.com/p/mklvdw/install-phpunit-with-composer\n. Glad you got it sorted, and that looks like a cool tool you're building!\n. There are a lot of decisions that date back to the beginning of this library, that being one of them. I believe the idea is that with smaller inputs, it's more aesthetically pleasing to have the description next to the input rather than under it. If you prefer that's not the case, you can easily add some css:\ncss\n.cmb-type-text-medium .cmb2-metabox-description { display: block; }\nor even\ncss\nspan.cmb2-metabox-description { display: block; }\n. yah, that example needs to be updated to more closely resemble the built-in examples: https://github.com/WebDevStudios/CMB2/blob/master/includes/CMB2_Show_Filters.php\nBut please, feel free to edit, as that is a community wiki. :)\n. Hmmm.. tests failed on 7. https://travis-ci.org/WebDevStudios/CMB2/builds/52170940 because msyql_connect is removed in 7: http://stackoverflow.com/a/12860046\nHmmm sounds like a WP patch is needed.\n. @tw2113 fair, want to update your PR?\n. Hmm, I'm not convinced this is necessary, since you can just add a 'attributes' => array( 'type' => 'number' ) to a 'text_medium' field registration. Thoughts?\n. TOTALLY agree about small/medium, but they are left from legacy. I'd probably not add them at this point. :) At this point, I don't really want to add more field types (without MAJOR consideration and justification), as it is more that core needs to support. I think additional field types are a great thing for custom extensions and/or additions to the snippet library. I hope my perspective makes sense.\n. CMB2::add_field() takes $position as a third argument, and is demoed in this example in the snippet library.\n. Hmm.. based on the failures (0 tests are run, because they fail instantly), it appears that we gain nothing from testing in PHP 7 until WP core updates its dependency on mysql_connect.\n. cc: @gregrickaby @coreymcollins, My CSS partners in crime. \n. Sorry, this is definitely not the right way to handle this problem. Your best solution is to use Javascript, since the whole repeat-group feature is heavily-dependent on JS, and like you said, your edits will not work on the repeated groups anyway.\n. A good proof-of-concept for this is in the snippet library, but I would like to eventually get this in core.\n. Related #683, #706 \n. @Ramblurr can you give me a broader/more fleshed out explanation of what you're trying to accomplish. Preferably w/ code that interacts w/ this?\n. This is already implemented with the 'classes' and 'classes_cb' field parameters.\n. Is this still the case? I'm not sure if you mean around the individual fields in the group or on the actual group itself.\n. For confirmation, are you testing on the most recent updated version of trunk?\n. @JohnyGoerend I think this is (probably) a good idea. It was removed to make quicker dev. progress in repeat groups and repeat fields, and having sep. meta rows is something that very few people use or even know about.\nAre you familiar/comfortable with unit testing? Because we're pretty busy around these parts, if you include unit tests with your code, it  moves the timeline for inclusion up quite a bit.\n. Hey @JohnyGoerend, as per the contributing guidelines, can you please checkout trunk (the development branch) and make your changes and submit your PR against that branch? Thank you kindly.\n. Would either of you care to open a PR? Sounds like you have a decent handle on the issue.\n. Please test https://github.com/WebDevStudios/CMB2/pull/708\n. I'd suggest this addon: https://github.com/WebDevStudios/cmb2-attached-posts\n. An interesting use-case. It might be doable but definitely not supported out of the box.\n. I'd look at https://github.com/jtsternberg/Taxonomy_MetaData\n. Sorry, no that will not happen. Our team is sass-only, and there would be very little motivation to maintain a LESS version adjacent to the SASS version. If you want to contribute, feel free to edit the css directly. If it's a PR we want to merge in, we can then talk about getting it back over to the SASS files.\n. This is fixed (removed) in 3d85f3bfdc386930242d77f523ec75b3d25a20f1. That method is no longer needed since file/file_list use the WP media modal.\n. I like it. Added to trunk. The callback passes in an array of all the field arguments as the first argument, and the field object as the second argument. (which means you can get the post id using $field->object_id)\n. Thank you for reporting. It's fixed in trunk.\n. The code @mattkrupnik has is how you add to the media page.\nThere is a demo in example-functions.php for adding taxonomy/term metaboxes: https://github.com/WebDevStudios/CMB2/blob/master/example-functions.php#L535-L541\n. Which version of WordPress are you on?\n. Hey @hasinhayder, as per the contributing guidelines, can you please checkout trunk (the development branch) and make your changes and submit your PR against that branch? Thank you kindly.\n. For all field ids in a specific metabox:\nphp\n$field_ids = wp_list_pluck( cmb2_get_metabox( 'my_metabox_id' )->prop( 'fields' ), 'id' );\nYou can get an array of all field ids by post_type with something like this:\nphp\n$field_ids = array();\nforeach ( CMB2_Boxes::get_all() as $cmb ) {\n    $type = $cmb->mb_object_type();\n    $field_ids[ $type ] = is_array( $field_ids[ $type ] ) ? $field_ids[ $type ] : array();\n    $field_ids[ $type ] += wp_list_pluck( $cmb->prop( 'fields' ), 'id' );\n}\n. Short answer is that it was just never added. I'd be happy to take a look at a PR if you're up for one. If it's not super clean, I may leave it as being better suited for an add-on.\n. @gareth-gillman I think you neglected to mention you were trying to get the data from a taxonomy_multicheck which is definitely different than getting data from a standard multicheck.\n. Hey @GregLancaster71, as per the contributing guidelines, can you please checkout trunk (the development branch) and make your changes and submit your PR against that branch? Thank you kindly.\n. Thanks @dustyf, this is great, and thank you for catching it.\nI merged this. It was simple to merge to trunk because the edits were almost all in one file, but for future reference, please submit the pull requests to trunk, the in-development branch.\n. This update is a continuation of #162 which added the strip_slashes, but we (incorrectly) were't doing anything with that modified value.\n. Looks like you got it, so closing.\n. @Mte90 good news, it's merged. :) Will be in the next release. Thanks for your PR @GregLancaster71!\n. you also have a space in your post_type name, 'ojiva-portfolio ' should probably be 'ojiva-portfolio'.\n. It happens. ;)\n. related #341\n. Should be good in the trunk branch. please test.\n. Yah, you'll want to use the 'show_on_cb' field parameter that lets you specify a callback to determine if a field should show.\n``` php\nfunction show_if_rsg_cleaverreach_api_key() {\n    return rsg_get_option( 'rsg_cleaverreach_api_key' );  \n}\n... \n$cmb->add_field( array(\n    'name' => ( 'CleverReach API', 'text' ),\n    'desc' => ( 'some desc', 'myprefix' ),\n    'id'   => 'rsg_cleaverreach_api_key',\n    'type' => 'text',\n) );\n$cmb->add_field( array(\n    'name'       => 'Gruppe',\n    'desc'       => 'In welche Gruppe kommen die neu registrierten Benutzer?',\n    'id'         => 'rsg_cleverreach_group',\n    'type'       => 'select',\n    'show_on_cb' => 'show_if_rsg_cleaverreach_api_key',\n    'options'    => read_cleverreach_groups()\n) );\n``\n. Unfortunately, we can't support every person's specific or custom implementations for CMB2. Github issues are reserved for confirmed bug reports and occasional feature requests. Please review the [CONTRIBUTING.md](https://github.com/WebDevStudios/CMB2/blob/master/CONTRIBUTING.md) for support suggestions. Please also review the additional resources listed at the bottom of that document, as the solution you're looking for may already be present.\n. I made some recent changes to the JS. Can you please test with the Trunk branch?\n. This should be good on trunk. Feel free to test.\n. @heddesheimer I shoot for monthly releases more or less, and we had a release this/last week.\n. CMB2 is made to save and display values. If you want a submission form, your best bet would be to [read this tutorial](http://webdevstudios.com/2015/03/30/use-cmb2-to-create-a-new-post-submission-form/).\n. Hey guys, sorry for the issues. 2.0.5 should resolve them for you. Please let me know.\n. :+1: \n. Hey @AF4Q, best bet would be to follow the examples in [example-functions.php](https://github.com/WebDevStudios/CMB2/blob/master/example-functions.php) and have a look at the\u00a0[basic usage instructions](https://github.com/WebDevStudios/CMB2/wiki/Basic-Usage). If you need more assistance, please open a new ticket at the\u00a0[wordpress.org plugin forums](http://wordpress.org/support/plugin/cmb2).\n. @shivgre CMB2 is made to save and display values. If you want a submission form, your best bet would be to [read this tutorial](http://webdevstudios.com/2015/03/30/use-cmb2-to-create-a-new-post-submission-form/).\n. Hey guys, I can confirm this issue on my end. I'm digging into it.\n. Sorry for the issue. Should fix it for you.\n. There are several reasons, yes. Please provide an example of what you're trying to do. It's likely there's a filter, action or callback available to accomplish it.\n. **1)** [Added in 2.0.3](https://github.com/WebDevStudios/CMB2/releases/tag/v2.0.3),'default'` now accepts a callback as well as an actual value. example:\nfield config:\nphp\n$cmb->add_field( array(\n    'name'    => __( 'Test', 'cmb2' ),\n    'id'      => $prefix . 'test',\n    'type'    => 'text',\n    'default' => 'prefix_set_test_default',\n) );\ncallback:\nphp\nfunction prefix_set_test_default( $field_args, $field ) {\n    return 'Post ID: '. $field->object_id\n}\n2) Can be accomplished by hooking in earlier in the field process and modify the field 'attributes' array dynamically. example:\nfield config:\nphp\n$cmb->add_field( array(\n    'name'   => __( 'Test', 'cmb2' ),\n    'id'     => $prefix . 'test',\n    'type'   => 'text',\n    'before' => 'prefix_set_field_data_attr',\n) );\ncallback:\nphp\nfunction prefix_set_field_data_attr( $args, $field ) {\n    $field->args['attributes']['data-postid'] = $field->object_id;\n}\n. Updated the wiki as well.\n. @austinjreilly Please try converting your metabox registration to using the new API, demonstrated in example-functions.php and the wiki and let me know if you still see issues.\n. @austinjreilly the get_note_author callback will not work for repeatable groups the way you expect. There is nothing in the JS to update that content on the fly, so if that's an integral feature for you, you'll need to create your own javascript handler. Is that the only issue you are experiencing?\n. @austinjreilly it is super-odd that .val('') is not properly clearing out the values, and, for me, seemed to only occur when the 'sortable' attribute was left off (or false). I have included a fix and it should be good.\n. It's definitely there. It's possible the update was corrupt? Very little changed between 2.0.4 and 2.0.5, and nothing change in either the CMB2_Field.php file or the CMB2_Utils.php file. If you're really talking about 2.0.0.4 and not 2.0.4, then it's possible some things have changed and you may be using deprecated methods. Best to read through the changelog.\n. Ok thanks for updating.\n. It is not supported. Please see the documentation for field types. \n. It's never been supported. It's on our wish-list.\n. related: #264\n. Can you create a new ticket in the support forums? https://wordpress.org/support/plugin/cmb2\nAlso, when you do, please provide the entire code you're using to add your metabox.\n. @JohnyGoerend @mweimerskirch @natebeaty If you all test this patch and confirm it works with and without the multiple option, I'll be able to get this merged much quicker.\n. @natebeaty no, we haven't merged to master yet. I expect to soon.\n. Do you have a screenshot and/or code? Help us help you. :)\n. Should be good in the trunk branch. please test.\n. We haven't given up and we/I get asked very frequently. It's just a matter of getting the time. CMB2 is a (heavily used) side project for us, so we work on it when we can, and repeatable wysiwyg is at the top of the feature list roadmap.\n. Related: #26, #356\n. You all might try testing this branch: https://github.com/WebDevStudios/CMB2/tree/repeat-wysiwyg\nwysiwyg is working in repeat groups, but only when adding groups. Removing groups is not working yet.\n. @synthview WYSIWYG in repeatable groups is not supported. That's why this thread exists. Or are you referring to a different branch?\n. I've got a new PR that could use testing, but should make wysiwyg in repeatable groups work as expected. For all interested, please review/test!\n. @slaFFik yes, it is now part of the trunk branch.\n. I'm working on finalizing some bits for the REST API, so once that's good to go, I'll be pushing an update. \n. Thank you all for your input and contributions. wywiwyg field-types should now work correctly in repeatable groups. \nFrom the changelog:\n- Make wysiwyg editors work in the repeatable groups context. A standard repeatable (non-group) wysiwyg field is not supported (but will possibly be included in a future update). Props @johnsonpaul1014\u00a0(#26,\u00a0#99,\u00a0#260,\u00a0#264,\u00a0#356,\u00a0#431,\u00a0#462,\u00a0#657,\u00a0#693).\n. @carasmo I would suggest adding your own 'sanitization_cb' (and possibly  'escape_cb').\n. @cooms13 your dilemma is exactly why it took so long for me to implement this feature. But we had a generous PR come in, so we got it in. I think if you're looking to do something like you are, unfortunately your best bet is going to be something custom-made until we have a better solution in core. You can also look through the available resources to see if there is anything that could help.. @cooms13 @tw2113 is right. I meant, I didn't want to necessarily tackle the problem by throwing a ton of editor instances on the page, but the solution that came in is better than not being able to use wysiwyg fields in groups at all, so this is what we have for now.\nOne possible solution, we switch to a single editor instance when over X number of groups, and have an edit button next to the textarea which opens the content in a modal w/ that editor instance.. The only reason wp_insert_post would return early based on the conditions you listed (when post type is 'page' and 'page_template' is set), is if the page has a page-template set that is not actually in your theme. This could happen if you had one theme installed, saved the page template, then switched themes. The error returned is:\nphp\nreturn new WP_Error('invalid_page_template', __('The page template is invalid.'));\nSo this is definitely not a CMB2 issue (I just tested a page with a page template set, and it worked as expected), but rather an issue with your particular setup.\n. @yivi You might try first taking this to the forums. \n. Definitely. Only requirement to use new CMB2_Types is to pass a CMB2_Field object to the constructor.\n. Hey\u00a0@mayeenulislam this sounds like a good question for wordpress.stackexchange.com, as it's a very specific implementation question.\nWe try to leave the issues tracker here for confirmed bugs or enhancement requests, and the support forums for implementation questions.\nThank you :)\n. @andreacanton thanks for reporting, It's fixed! The wiki is a public wiki, so feel free to make any future corrections if you see them.\n. :thumbsup:\n. Thank you for your contribution. Could you please review the CONTRIBUTING.md for details on contributing? If you find that your Pull Request is still needed, we'd be happy to accept a pull request to the trunk branch. Thank you!\n. hmm it's actually wrong on master as well. Your patch is right though. Thank you.\n. If you look at this w/ white-space removed: https://github.com/WebDevStudios/CMB2/pull/277/files?w=1\nThere's only a few things where WPCS likes to remove a line after if blocks (no idea why).. Not sure this is necessary. It's really hard to tell what it's trying to do. Change indentation levels?\n. Trunk, foo! (Brad told me to make fun of him...)\n. The title type is literally just a title. There is no associated input. You're probably looking for the textfield type.\n. No worries. May have to add some custom css if you want further control over how they are displayed.\n. I added a snippet to the snippet library to demo that: https://github.com/WebDevStudios/CMB2-Snippet-Library/blob/master/filters-and-actions/custom-css-for-specific-metabox.php\n. So I understand correctly, you're looking for a field parameter like save_field => false? I think that could be a useful parameter if you understand how to do the saving part yourself.\n. @rossb Can you please confirm that your issue is fixed by checking out the trunk branch and testing?\n. This should be good in trunk. Huge thanks for @yivi's work. Please test.\n. Front-end forms are not supported out of the box.. we can't provide support for it, as there are a ton of things to keep in mind. With that said, if you want to add a file uploader on the front-end for non-manage_options users, that is definitely on you. :) Would be happy to take a pull request if you want to submit a snippet to the snippet library. You also might want to look for or submit a question on wordpress.stackexchange.\n. Won't that allow your subscriber to then edit the existing media? Like delete media, rename media, etc?\n. nice! That probably would make a nice snippet.\n. I got it added to the snippet library. I'd still like to do some testing for security concerns.\n. You closes this, did you get it figured out? \n. w/ file field, you would only be able to set the default of the url field, not the attachment ID. You'd have to get creative with that.\n. No, CMB2 does not currently support nested groups.\n. It's planned, yes, but will require a large effort, so we don't have a definite timeline. Duplicate #565.. Unfortunately, we can't support every person's specific or custom implementations for CMB2. Github issues are reserved for confirmed bug reports and occasional feature requests. Please review the CONTRIBUTING.md for support suggestions. Please also review the additional resources listed at the bottom of that document, as the solution you're looking for may already be present.\n. I think you're overstating things a bit by saying it's the most important type, as you are only the 2nd to make the request. Creating a dropdown to save term ids as post-meta is simple enough, and creating a generic html field is as simple as using the title field type with no 'name' attribute. You can then use any of these field params to output your generic html:\n'before_field'\n'before_row'\n'before'\n'after'\n'after_row'\n'after_field' \n. Understood, and thank you for your feedback. I'll consider for the future.\n. Thank you for your contribution. Could you please review the CONTRIBUTING.md for details on contributing? If you find that your Pull Request is still needed, we'd be happy to accept a pull request to the trunk branch. Thank you!\n. Downside to using the the_content filter is that it's typically used to output things like social sharing icons, and other things that plugins add. Can be a pain.\nThe wiki actually has an example function for doing this type of thing: https://github.com/WebDevStudios/CMB2/wiki/Field-Types#wysiwyg\n. Awesome, thank you sir!\n. Definitely, though not out of the box. You'll want to override the setting and getting of the value. You'll need to use the trunk branch (until the next release) as some of those filters have changed a bit to accommodate that type of thing better.\n. The taxonomy fields are not intended to provide an arbitrary list of terms to pick from, but are intended to be a replacement for the default taxonomy metaboxes. I.e. they are meant to set the taxonomy terms on an object. Any other use of these types will be hacky and/or buggy. I suggest looking at building a custom field type for this: https://github.com/WebDevStudios/CMB2/wiki/Tips-&-Tricks#a-dropdown-for-taxonomy-terms-which-does-not-set-the-term-on-the-post\n. This should be good on trunk. Feel free to test.\n. Unfortunately, we can't support every person's specific or custom implementations for CMB2. Github issues are reserved for confirmed bug reports and occasional feature requests. Please review the CONTRIBUTING.md for support suggestions. Please also review the additional resources listed at the bottom of that document, as the solution you're looking for may already be present.\n. Unfortunately, we can't support every person's specific or custom implementations for CMB2. Github issues are reserved for confirmed bug reports and occasional feature requests. Please review the CONTRIBUTING.md for support suggestions. Please also review the additional resources listed at the bottom of that document, as the solution you're looking for may already be present.\n. Unfortunately, we can't support every person's specific custom use-case for CMB2. I suggest looking at building a custom field type for this: https://github.com/WebDevStudios/CMB2/wiki/Tips-&-Tricks#a-dropdown-for-taxonomy-terms-which-does-not-set-the-term-on-the-post\n. @mateusneves what @yivi said. If you want to test his version, that can only help the project. Thanks for the PR @yivi. I'll try to look at it as soon as I can.\n. @yivi yah, unfortunately time is not on my side. I try to test every PR thoroughly before merging, and as you can imagine, that takes some time. I'll leave some comments on your PR.\n. #446 has been merged. Please test trunk to verify these issues are good. thanks.\n. @onnimonni Yes, we'll be releasing very soon. For best results, tune in to @webdevstudios on twitter.\n. You can see a commented-out example of setting to a submenu in the example-functions.php file: https://github.com/CMB2/CMB2/blob/6fce2e7ba8f41345a23bc2064e30433bdb11c16c/example-functions.php#L665\nI've also added a couple examples to the snippet library: https://github.com/CMB2/CMB2-Snippet-Library/blob/master/options-and-settings-pages/submenu-options-pages.php. Also possibly helpful, snippet to show how to register a main options page with multiple submenu option pages: https://github.com/CMB2/CMB2-Snippet-Library/blob/master/options-and-settings-pages/options-pages-with-submenus.php\nOr, similar snippet but with added tabbed navigation among those menu pages: Doing submenu pages with tabbed navigation snippet can be found here: https://github.com/CMB2/CMB2-Snippet-Library/blob/master/options-and-settings-pages/options-pages-with-tabs-and-submenus.php. Only checking for null will definitely break things. It would be much better to check $this->args( 'on_front' ).\n. Should be good in the trunk branch. please test.\n. Unfortunately, we can't support every person's specific or custom implementations for CMB2. Github issues are reserved for confirmed bug reports and occasional feature requests. Please review the CONTRIBUTING.md for support suggestions. Please also review the additional resources listed at the bottom of that document, as the solution you're looking for may already be present.\n. Unfortunately, we can't support every person's specific or custom implementations for CMB2. Github issues are reserved for confirmed bug reports and occasional feature requests. Please review the CONTRIBUTING.md for support suggestions. Please also review the additional resources listed at the bottom of that document, as the solution you're looking for may already be present.\n. I'm sorry you feel that way. As I mentioned, this is not the place for support. There are several other channels you can try, but Github issues has a specific purpose, and support is not it.\n. I think it's pretty clearly documented in the CONTRIBUTING.md which shows at the top of the issue-submission form: \n\nIf you feel it would be better documented elsewhere, let me know.\n. Specifically this section: \nNOTE: The issues section is for bug reports and feature requests only.\nSupport is not offered for this library, and the likelihood that the maintainers will respond is very low. If you need help, please use stackoverflow, or the wordpress.org plugin forums.\n. It looks like you found the support forums.\n. Thank you for your contribution. Could you please review the CONTRIBUTING.md for details on contributing? If you find that your Pull Request is still needed, we'd be happy to accept a pull request to the trunk branch. Thank you!\n. Definitely not on purpose (definitely an error), and will be fixed in the next version. \n. Thank you!\n. This was definitely a bug and is now fixed in trunk. Please test.\n. @jajouka79 it is in the trunk branch and will be in master when we release the next version. You can download trunk or checkout the trunk branch from the repo.\nhttps://github.com/WebDevStudios/CMB2/tree/trunk\n. If you delete all the fields, there is no way to add your data. If you want to reset, I suggest adding an empty field, and deleting all others.\n. Closing for now.\n. Hmm, that's an interesting situation. Re: your first question, how do you envision it working? the space being empty w/ only an 'add' button after they remove the last item? Or that the last items field values get removed? I guess I'm not positive I understand what you're looking for. From a UX standpoint, I feel like removing all the fields is not intuitive either (I agree that adding to remove is also not intuitive).\nRe: second question, you'd probably have to do some jQuery on submit magic to check if it's a blank group and if so, remove the 'required' attribute.\n. @nosegraze I don't think that's a bad solution, though there may be some issues that arise from that as well. For instance, If you have a radio input with 3 values, then hide the container, that value will still get set in the DB, and the user will not understand why. When the UI is visible, it's clear what happened.\n. Ok, I've made some improvements. For reasons mentioned above, I'm not a fan of hiding the group/row without a better UX for it, but now when you click \"remove\" on the last item, it resets it to blank values.. Thanks for reporting and good catch. I've updated all the examples to have an actual prefix (_wiki_test_) vs using a $prefix variable as I think it is less ambiguous.\nThe wiki is a public wiki, so feel free to make any future corrections if you see them.\n. Unfortunately, we can't support every person's specific or custom implementations for CMB2. Github issues are reserved for confirmed bug reports and occasional feature requests. Please review the CONTRIBUTING.md for support suggestions. Please also review the additional resources listed at the bottom of that document, as the solution you're looking for may already be present.\n. This is a duplicate of #310.\n. the 'row_classes' parameter can already accept a callback, but using the $field_group->row_classes() method for a group definitely makes sense. Additionally. the postbox and cmb-repeatable-grouping classes should be added in the $conditional_classes array.\nPlease revise your PR.\n. Closing, as this functionality is now included via a group field's 'classes_cb' and 'classes' parameters.\n. Yep, in https://github.com/WebDevStudios/CMB2/releases/tag/v2.2.2\n. Just updated the docs as well: https://github.com/WebDevStudios/CMB2/wiki/Field-Parameters#classes\n. Unfortunately, we can't support every person's specific or custom implementations for CMB2. Github issues are reserved for confirmed bug reports and occasional feature requests. Please review the CONTRIBUTING.md for support suggestions. Please also review the additional resources listed at the bottom of that document, as the solution you're looking for may already be present.\n. Thanks a ton for putting time in to work on this issue. To help me better review your PR, I have a few requests:\n- Remove all edits/changes that are not related to this bug-fix/issue\n- Remove all white-space changes (same as above). This includes doc-block edits.\n- Try to keep your PR as focused on solving a single problem as possible\nI like the edits you made (better doc-blocks, etc), but these things should be separate PRs. It's much easier to merge a PR that is simply doc-block edits than one that is changing functionality, or worse, both.\nCan you submit separate PRs to split these concerns and make it easier to review/merge? Thank you.\n. Ok thanks again! I really do like the formatting cleanup, so feel free to submit another separate PR if you're up for it. \n. Thank you for cleaning it up, that helps a ton. Now that I can see what's going on, I see you are using DateTime::createFromFormat which unfortunately is a PHP 5.3 feature. We have to support the same versions of PHP that WordPress does, which is 5.2.4. Maybe you can check if that feature exists and use it and if not, create a fallback solution?\n. @yivi Why didn't you update the text_datetime_timestamp field type w/ your changes? I'm concerned that the changes you've made are not taking all the field types and/or scenarios into account.\n. Nice work so far. I've merged your branch into trunk and created a new branch. let's collaborate on this branch instead of trunk until it's ready to go: https://github.com/WebDevStudios/CMB2/tree/yivi-date-time-picker-fixes\n. This is almost good to go. Just need to make sure that all the date type fields are accounted for in this change.\n. @yivi will you be able to add support for ALL the date type fields?\n. Also, how does this differ from #446?\n. @bobbiejwilson can you provide your code?\n. We discussed off-channel. @bobbiejwilson feel free to re-open if you encounter another issue!\n. Something like:\nphp\n$args = array( 'public' => true );\n$public_post_types = get_post_types( $args );\n$cmb_demo = new_cmb2_box( array(\n    'id'            => $prefix . 'metabox',\n    'title'         => __( 'Test Metabox', 'cmb2' ),\n    'object_types'  => $public_post_types,\n) );\nhttps://codex.wordpress.org/Function_Reference/get_post_types\n. There's a new parameter in the most recent version, show_on_cb, which allows you to conditionally display a cmb metabox/form via a callback. See the first point in the release notes: https://github.com/WebDevStudios/CMB2/releases/tag/v2.0.6\nIn that callback, you can check as many things as you want.. just return true to show the box, or false.\n. @gyrus can you provide pseduo-code to demo what you're trying to do? I think you'll be able to do anything you want in the 'cmb2_show_on' callback... it's a function callback which gets called right before the metabox is registered, so you can check as many conditions at that point as you want. Also, the parameters are not stripped. You can access them via the CMB2 prop method ($custom_arg_val = $cmb->prop( 'custom-argument' )).  Using the callback is preferable for several reasons, but the main reason is that if you try and do any logic in the cmb2_init hook (like figuring out users or whatever), those queries and that logic is going to happen on every page-load for every user. When using the callback, those queries and that logic will only happen in wp-admin on a post-edit (or user or whatever) screen.\n``` php\n/*\n * Sample metabox\n /\n$cmb_demo = new_cmb2_box( array(\n    'id'              => 'cmb_demo_metabox',\n    'title'           => __( 'Test Metabox', 'cmb2' ),\n    'object_types'    => array( 'page', ), // Post type\n    'show_on_cb'      => 'my_cmb_conditional_show_callback', // function should return a bool value\n    'custom-argument' => 'A custom value',\n) );\n... \nfunction my_cmb_conditional_show_callback( $cmb ) {\n    $show_it = true;\n    $val = $cmb->prop( 'custom-argument' );\nif ( 'test' !== $val ) {\n    $show_it = false;\n}\n\nreturn $show_it;\n\n}\n``\n. Yah, that looks like a great solution. The'show_on'parameter is somewhat-legacy and supported mostly for simple uses and legacy support. I agree it is a weird syntax. The 'show_on_cb'is the way forward.\n.'cmb2_init'is correct. if you're using the'cmb2_meta_boxes'` hook (and it works), then you're using the old registration API (a bunch of arrays passed back at the end), and not the new one. You can see the new registration API in that same doc or in example-functions.php\n. @curtismchale Not sure I understand fully, but the older api will be maintained for backwards-compatibility. But using it will cause you to miss out on some newer functionality.\n. hmmm is that the entire code? What happens if you change 'product' to 'post'? Does it show on the post-edit page? Also, please at least return whatever is passed into that filter. If you don't, you could break others' legacy use-cases because their metaboxes are no longer registered.\n. Changing 'product' to 'page' in my local setup and using the following code:\n``` php\nadd_action( 'cmb2_init', 'cmb2_sample_metaboxes' );\n/*\n * Define the metabox and field configurations.\n /\nfunction cmb2_sample_metaboxes() {\n// Start with an underscore to hide fields from custom fields list\n$prefix = '_woo_product_vis_';\n\n/**\n* Initiate the metabox\n*/\n$cmb = new_cmb2_box( array(\n    'id'            => 'woo_product_vis',\n    'title'         => __( 'Product Visibility', 'cmb2' ),\n    'object_types'  => array( 'page', ), // Post type\n    'context'       => 'side',\n    'priority'      => 'high',\n    'show_names'    => true, // Show field names on the left\n    // 'cmb_styles' => false, // false to disable the CMB stylesheet\n    // 'closed'     => true, // Keep the metabox closed by default\n) );\n\n// Regular text field\n$cmb->add_field( array(\n    'name'       => __( 'Restricted Product to Purchasers of:', 'cmb2' ),\n    'desc'       => __( 'This product will only show to users that have purchased the product specified above', 'cmb2' ),\n    'id'         => $prefix . 'text',\n    'type'       => 'text',\n    // 'sanitization_cb' => 'my_custom_sanitization', // custom sanitization callback parameter\n    // 'escape_cb'       => 'my_custom_escaping',  // custom escaping callback parameter\n    // 'on_front'        => false, // Optionally designate a field to wp-admin only\n    // 'repeatable'      => true,\n) );\n\n}\n```\nResults in a metabox at the top of my sidebar: http://b.ustin.co/zsuY\n. you simply need to specify the 'before_field' parameter to whatever currency you need. There is no reason to add the filter. if you set the 'before_field' parameter, it uses that instead of the '$'.\n. Unfortunately not.. The problem is, if you change it globally and the user has another plugin w/ CMB2 bundled and it expects/needs $ values, your filter could mess with that and cause their data to look/be incorrect. Make sense? \n. > I do not see a conflict with other plugins\nThe expected default is $. If you change that via a filter, you will break the expected behavior. If I had fields registered in my plugin like:\n``` php\n$cmb_demo->add_field( array(\n    'name' => __( 'Amount in U.S.', 'cmb2' ),\n    'id'   => $prefix . 'us_amount',\n    'type' => 'text_money',\n) );\n$cmb_demo->add_field( array(\n    'name' => __( 'Amount in G.B.', 'cmb2' ),\n    'id'   => $prefix . 'gb_amount',\n    'type' => 'text_money',\n    'before_field' => '\u00a3', // override '$' symbol if needed\n) );\n```\nAnd you filtered it to be \u20ac or something, then the us_amount field would display a \u20ac instead of $.\n\nwe should also consider that we are not talking about overriding all the text_money fields\n\nThat's exactly what your proposed cmb2_text_money_before_field_filter filter would do.\n. > I would expect that a developer pass the currency symbol also for the default (by that time) currency \nWhy would they pass it if the default is what they expect and want?\n\nbecause I can not be sure when the library will change.\n\nCMB2 holds the same backwards-compatibility standards as WordPress. A user SHOULD be sure the library will not break his code in future versions. That is why CMB2 has a built-in handler to be sure only the newest version is loaded. it CAN do that because new features should not break existing functionality.\n. Based on the back-compatibility concerns with the suggested filter, I'm closing this issue.\n. Closing PR (as per contribution guidelines), and based on discussion in #326.\n. This should be good in trunk. Please test.\n. I suggest looking into a tool like the serialized search & replace tool by interconnect/it. Exporting/importing sorta falls out of the scope of what CMB2 is all about, thought I can see a scenario where imports/exports could be a nice addon plugin.\n. Thanks @carasmo for a good suggestion here: https://github.com/WebDevStudios/CMB2/issues/631#issuecomment-212097539\n. Please don't ever edit CMB2 core, for some of the same reasons you would not edit WordPress core. If you modify something to 'fix' it for yourself, there is no guarantee that you are not then breaking it for somebody else who is using the library. CMB2 only ever loads one instance of itself, so if your (edited) version is the one that gets loaded, all other plugins/themes/etc depending on CMB2 will now be using your (edited) version.\n. The only reason that would happen is if this condition: (typeof jQuery.wp === 'object' && typeof jQuery.wp.wpColorPicker === 'function') is false. This means the colorpicker is not enqueued or some other script is causing that script to not work. There is nothing in CMB2 that would cause this to occur.\n. If you're replacing default WordPress scripts, there's not much I can do to help.\n. Thanks for reporting. The issue should be addressed in https://github.com/WebDevStudios/CMB2/commit/244d39fc3c27cfc195e495ecb331fac73e51399a\n. The dependency issue is addressed in https://github.com/WebDevStudios/CMB2/commit/244d39fc3c27cfc195e495ecb331fac73e51399a\n. Sorry, I haven't gotten into a good system w/ pulling/pushing using Transifex. I will be sure to update with the next release.\n. Not as simple as it sounds because of the translations provided via github PRs. See relevant discussion: https://twitter.com/fxbenard/status/605752066980626432 :)\n. Your translation should now be in trunk (see: https://github.com/WebDevStudios/CMB2/commit/39a2042ee69cefdf4d7adadb20f72a3ceaa61226)\n. Which file are you looking for specifically?\n. Please, tell me the file explicitly. I have no idea which file is the Italian language. Once you tell me, I can generate the mo file and get it into trunk.\n. Please review the trunk branch: https://github.com/WebDevStudios/CMB2/tree/trunk/languages\n. First, the 'cmb2_meta_boxes' is deprecated, and you should be using the new metabox/field registration API. Second, to do your logic, you should use the 'show_on_cb' callback parameter on the metabox registration array to do any kind of logic for displaying your metabox. This off-loads the logic to the last opportunity it can.\n. Unfortunately there are some limits to how late we can initiate the CMB2 objects. I agree with you that ideally they would load as late as possible, but it's just not feasible at this juncture to load them earlier.\n. You should be using the CMB2_Types::text_time method directly vs CMB2_Types::input.\nphp\n?>\n<div class=\"alignleft\">\n<p><label for=\"<?php echo $field_type->_id( '_stime' ); ?>'\">Start Time</label></p>\n    <?php echo $field_type->text_time( array(\n    'name'  => $field_type->_name( '[stime]' ),\n    'id'    => $field_type->_id( '_stime' ),\n    'value' => $field->get_timestamp_format( 'time_format', $value['stime'] ),\n    'desc'  => '',\n    ) ); ?>\n</div>\n<div class=\"alignleft\">\n<p><label for=\"<?php echo $field_type->_id( '_etime' ); ?>'\">End Time</label></p>\n    <?php echo $field_type->text_time( array(\n        'name'  => $field_type->_name( '[etime]' ),\n        'id'    => $field_type->_id( '_etime' ),\n        'value' => $field->get_timestamp_format( 'time_format', $value['etime'] ),\n        'desc'  => '',\n    ) ); ?>\n</div>\n<br class=\"clear\">\n<?php\necho $field_type->_desc( true );\n. Sorry, I fixed my snippet: https://github.com/WebDevStudios/CMB2/issues/340#issuecomment-107946498\nPlease try with that.\n. You'll need a custom cmb2_sanitize_{field-type} filter and a cmb2_types_esc_{field-type} filter. See this Address field type for an example.\n. sanitize_text_field is fine (and is the sanitization that the text_time field gets as well). It's just a time string.\n. @vajrasar you'll need to do some debugging. ;) I've provided plenty of ideas/help. I'm sorry, but I just don't have time to dig in and find your problem and fix it. Maybe others will be willing to jump in and help.\n. I think using (string) in that way is preferred. If you care to open a PR, I'll merge that in.\n. @vajrasar Yah, I would. You can delete your whole fork if you want.\n. either way, strtotime returns an int, so the doc block is correct.\n. Should be good in the trunk branch. please test.\n. 1. Correct, sanitized by default.\n2. Incorrect, that case falls through to the next instance of break;: https://github.com/WebDevStudios/CMB2/blob/master/includes/CMB2_Sanitize.php#L89\n3. Correct, you can always add your own sanitization_cb to override cmb's\n4. That is correct.\n5. That is also correct unless using the CMB2 field value APIs, but generally I recommend NOT using those, as front-end output will always be tailored to the individual use-case. Using them on the front-end is not documented, though I would like to get to it eventually. And one other point.. escaping should happen at the last instance possible (https://vip.wordpress.com/2014/06/20/the-importance-of-escaping-all-the-things/), so using the CMB2 output API would be cheating that a bit. :)\n. :thumbsup:\n. If you remove the 'date_format' parameter, does it work properly? \n. Yowzaz! Thanks a lot @fxbenard!\n. Merged! https://github.com/WebDevStudios/CMB2/commit/39a2042ee69cefdf4d7adadb20f72a3ceaa61226 \n. When I try using grunt tx-push, I get:\n```\nPushing translations for resource cmb2.cmb2:\n\n\nYou don't seem to have a proper source file mapping for resource cmb2.cmb2. Try without the --source option or set a source file first and then try again.\n```\n\n\nAny thoughts @fxbenard?\n. I did have the .tx folder, but maybe something got messed up. Just updated it w/ your version and is working now.\n. Awesome! You guys are on it!\n. Ha that's awesome! I have no idea how you pull it off, and at no cost, but just want you to know that we really appreciate it!\n. Some good thoughts here. As an alternative, you can set the 'default'attribute to the value of the field (saved elsewhere/different meta key). Then that value will always display even though it doesn't get saved. the 'default' field attribute can also take a callback, so you can fetch that value at the last minute.\n. readonly and disabled attributes are used for specific and varied purposes, and I'm not sure there is a good \"standard\" solution that should be applied here, but I am open to ideas.\n@modemlooper hidden fields could work, but you could also possibly remove the disabled attribute via JS when saving. That may do it. You could also use a filter like @kynetiv.\nUnless you guys have a specific idea as to how this be handled by default (different than it is), I think we should close this issue.\n. If anyone is up for submitting a PR to introduce a field property 'save_field', that could be a decent solution. (see more)\n. #674. Would you be willing to update the translation? You can do so with http://wp-translations.org/cmb2\n. @superdummy thank you sir!\n. wow, nice suggestion @sc0ttkclark. Also wow guys.. 100 groups! shudders\n. Ha ha @sc0ttkclark, those are stories you'll be able to pass on to the next generation. \nThat being said, your experience in that area will be invaluable. \n. If this is a bug with Taxonomy_Metadata_CMB2, can you open an issue there instead? CMB2_Options is used for a lot of other things that are not related to that project, so we shouldn't modify it for the sake of that one project, but rather determine the best way to fix it there.\n. Unfortunately, we can't support every person's specific or custom implementations for CMB2. Github issues are reserved for confirmed bug reports and occasional feature requests. Please review the CONTRIBUTING.md for support suggestions. Please also review the additional resources listed at the bottom of that document, as the solution you're looking for may already be present.\n. We're certainly open to a pull request. For now, you can add the required attribute to the field to have the browser validate it instead. You can do that with the 'attributes' property:\nphp\n$cmb->add_field( array(\n    ...\n    'attributes' => array(\n        'required' => 'required',\n    ),\n));\n. ah, that makes sense w/ the wysiwyg type. If using JS, I would want to make sure we use a common validation UI (maybe bootstrap?) or ensure the UI make sense. I'm definitely open to it. I'm closing because there are already several relevant tickets.\nRelated:\nhttps://github.com/WebDevStudios/CMB2/issues/100\nhttps://github.com/WebDevStudios/CMB2/issues/62\nhttps://github.com/WebDevStudios/CMB2/issues/61\n. We're always open to snippets. You could submit a pull request to the snippet library: https://github.com/WebDevStudios/CMB2-Snippet-Library\nSeveral have also created their own custom field types which we feature: https://github.com/WebDevStudios/CMB2#custom-field-types\n. related: #366\n. It takes a callback. try 'default' => 'jivedig_get_the_title' where jivedig_get_the_title is:\nphp\nfunction jivedig_get_the_title( $args, $field ) {\n    return get_the_title( $field->object_id );\n}\n. Well.. it's not really obvious. It takes a value OR a callback. Glad it works for you though.\n. Currently not supported, but is on the list for improvements.\n. Thanks! I opted to include a separate string for multiple, and am sticking with the 'use' language as it is technically more accurate since you are not inserting the files to the post-content.\n. Unfortunately, we can't support every person's specific or custom implementations for CMB2. Github issues are reserved for confirmed bug reports and occasional feature requests. Please review the CONTRIBUTING.md for support suggestions. Please also review the additional resources listed at the bottom of that document, as the solution you're looking for may already be present.\n. Awesome, glad to hear it!\n. Closing, but feel free to open another if you encounter a better solution. Also, please open any new PRs against the trunk branch (as per contribution guidelines).\n. We actually removed that compatibility layer a couple versions ago as CMB2 is not really meant to be compatible w/ the original, and it requires more upkeep.\n. try using the 'cmb2_after_init' hook. There is no guarantee all the fields are registered yet when you use 'cmb2_init'.\n. thanks!\n. updated\n. To change the field markup would be an insane amount of work. (trust me I know, we've done it already to convert from tables). I'd be much more interested in styling the existing markup to look that way.\n. nice! :thumbsup:\n. That looks nice! That's a good reminder.. though you turned the css on the front-end, CMB2 fields can be used in a variety of places (which you can see by the partials in the sass folder), and any custom styling needs to work in all contexts.\n. yah, that's nice. I'm not sure there is 'proper etiquette', but if you upload images here, they are more likely to be around as long as this issue/repo is (vs hot-linking and links expiring).\n. @alessandrotesoro I've been editing your comments to do so, but can you try to include your images inline so we can preview them here on github? To see how to do it, just edit one of the ones above to see how it's done.\n. @alessandrotesoro @coreymcollins the placement of the description is a hold-over from CMB1, even before I got to it. I think it's ok if we change that in core if we think it's better UI.\n. The main purpose of 'show_names' being set to false if if you want to add a metabox w/ a single field and the metabox name is self-explanatory. An option to show the labels as block instead of table would be cool, but will not be something I'll be personally be adding. So if you're interested, feel free to create a proto-type or pull request.\n. @alessandrotesoro I really don't like the two gray colors in the repeatable group example. They look like they have different bases. Can we modify one of those? Maybe even make them the same color? But overall, I am liking the direction\n. @alessandrotesoro @JiveDig brings up a good point, your styles should definitely take into account being used in the sidebar column. @JiveDig I'm not a fan of adding another metabox parameter to re-enable existing (and expected) behavior, and that would definitely break back-compat, unless it defaulted to true. I guess I'm open to the idea, but to me, the more flexible we make the display/css, the more it will break on edge-cases, like user profile fields, and options pages, sidebars, front-end, etc.\n. @alessandrotesoro your screenshots disappeared. Any way to get those back?\n@lmartins totally understand. ACF is def. pretty. I want CMB2 to have a GREAT UI, but it's also super important to me that CMB2 looks native to WordPress.\n. @bnecreative does it have to be on the postbox? Putting it on the cmb2-wrap makes it more flexible for CMB2 uses NOT in a metabox.\n. As of this commit, it's there. In trunk now.\n. Some more thoughts.. it would be great if there was a way to toggle a metabox/group/field from using default cmb2 styles. The way I envision this occurring is that each level (metabox, group, field) would have a specific classname which all others would descend from. \n- Removing the field-specific class from a field (the field row) would cause the cmb2-specific styling for that row to be disabled.\n- Removing the group-specific class from a group field would cause the cmb2-specific group styling to be removed (though the individual field styling would remain).\n- Removing the metabox-specific class from a metabox (or form) would cause the cmb2-specific styling for that metabox/form to be disabled (and all fields/groups/rows within it).\nFor you front-end masters, does this sound like a good first step?\n. Bumping... @alessandrotesoro your screenshots disappeared. Any way to get those back?. For all those following along and interested, I have created a milestone for beginning the work of improving the CSS/UI/markup: https://github.com/CMB2/CMB2/milestone/3. There actually IS a hidden field type, but it wasn't documented (I just rectified that: https://github.com/WebDevStudios/CMB2/wiki/Field-Types#hidden). Also of note is that @JPry just fixed a bug where the hidden field type was not honoring the 'show_on_cb', so you will need to use the trunk branch until the next release.\n. Closing as duplicate of #354\n. Good catch, and thank you!\n. does that same iframe work for you in the post-content field?\n. You probably need to disable (with caution) the sanitization for this field:\nphp\n$cmb_demo->add_field( array(\n    'name'            => __( 'Test wysiwyg', 'cmb2' ),\n    'desc'            => __( 'field description (optional)', 'cmb2' ),\n    'id'              => $prefix . 'wysiwyg',\n    'type'            => 'wysiwyg',\n    'options'         => array( 'textarea_rows' => 5, ),\n    'sanitization_cb' => false,\n) );\n. You could use wp_kses() and specify which tags/attributes you want to allow: https://developer.wordpress.org/reference/functions/wp_kses/. A possible implementation/helper function to pull that data out:\n``` php\npublic function display_aattch_group_data( $post_id ) {    \n$groups = get_post_meta( $post_id, '_fileatch_repeat_group', 1 );\n\nif ( $groups ) {\n    echo '<ul class=\"groups\">';\n    foreach ( $groups as $group_value ) {\n        $group_name = isset( $group_value['name'] ) ? $group_value['name'] : '';\n        $group_files = isset( $group_value['file_list_diag'] ) ? $group_value['file_list_diag'] : false;\n\n        echo '<li>';\n        echo '<p>Name: '. $group_name . '</p>';\n        if ( $group_files ) {\n            echo '<ul class=\"group-images\">';\n            foreach ( (array) $group_files as $attachment_id => $attachement_url ) {\n                echo '<li>';\n                echo wp_get_attachment_image( $attachment_id, 'large' );\n                echo '</li>';\n            }\n            echo '</ul>';\n        }\n        echo '</li>';\n    }\n    echo '</ul>';\n}\n\n}\n```\nIf you need further help, I recommend you use the wordpress.org support forums.\n. Hello @edvind, thank you for your contribution. We're handling all translation through http://wp-translations.org/cmb2, can you submit the update there?\n. Thanks! I've pulled down that translation and updated the bundled version.. Can you duplicate the issue when using the address field snippet example?\n. Do you have WP_DEBUG in your wp-config.php? That should tell you the error you're getting. https://codex.wordpress.org/Debugging_in_WordPress\n. I believe this is similar: https://github.com/WebDevStudios/CMB2/pull/318\n. You need to put your code for displaying within the foreach loop.\nUnfortunately, we can't support every person's specific or custom implementations for CMB2. Github issues are reserved for confirmed bug reports and occasional feature requests. Please review the CONTRIBUTING.md for support suggestions. Please also review the additional resources listed at the bottom of that document, as the solution you're looking for may already be present.\n. Hello @superfreund, thank you for your contribution. We're handling all translation through http://wp-translations.org/cmb2, can you submit the update there?\n. @augustuswm sounds like you have a good handle on a possible solution. Would you be willing to submit a PR?\n. Wow, that's embarrassing.. just realized this IS a PR. ha ha.. I think I have it sorted though.\n. These commits should take care of the issue: https://github.com/WebDevStudios/CMB2/compare/6db15bdd147d2c041bf5ffcb5333e2702d1f7456...730ef08 (note: I gave you props since you reported and submitted a fix)\n. This has been addressed in the trunk branch in will be in the next release: https://github.com/WebDevStudios/CMB2/commit/aab8a3f661e244f952945f6ad1db1aa278d35204\n. The earliest you can use the cmb2 helper functions is during or after the 'cmb2_init' hook (which happens late on the 'init' hook).\n. :thumbsup:\n. Thank you!\n. Oops, I just realized I merged your PR to the master branch which is our release branch. In the future, can you please submit PRs to the trunk branch?\n. Unfortunately, we can't support every person's specific or custom implementations for CMB2. Github issues are reserved for confirmed bug reports and occasional feature requests. Please review the CONTRIBUTING.md for support suggestions. Please also review the additional resources listed at the bottom of that document, as the solution you're looking for may already be present.\n. Thank you!\n. Now possible (https://github.com/WebDevStudios/CMB2/blob/9d691b17c3a53d8f369b322a82aeeafc753183c3/example-functions.php#L416). You'll need to use the trunk branch.\n. I would look at the example in example-functions.php: https://github.com/WebDevStudios/CMB2/blob/master/example-functions.php#L31-L37\nUnfortunately, we can't support every person's specific or custom implementations for CMB2. Github issues are reserved for confirmed bug reports and occasional feature requests. Please review the CONTRIBUTING.md for support suggestions. Please also review the additional resources listed at the bottom of that document, as the solution you're looking for may already be present.\n. What's your whole code? Because, you'll have to remove this if you're using the current version.\n. :thumbsup:\n. Where are you getting $post_id from? Because it's likely it's not available when the saving happens.\n. You might try:\n``` php\n$cmb = new_cmb2_box(array(\n    'id'            => 'num_slides_box',\n    'title'         => __( 'Enter number of slides', 'cmb2'),\n    'object_types'  => array('post'), //post type\n    'context'       => 'normal',\n    'priority'      => 'high',\n    'show_names'    => 'true',//show the field names on the left\n) );\nif ( $post_id = $cmb->object_id() ) {\n    if ( $slideNum = get_post_meta( $post_id, 'num_slides', true ) ) {\n        for ( $i = 0; $i < $slideNum; $i++ ) { \n            $cmb->add_field(  array(\n                'id'      => 'slider_group_'.$i,\n                'name'    => 'Slide',\n                'desc'    => 'Side contents'.$i,\n                'type'    => 'wysiwyg',\n            ) );\n        }\n    }\n}\n``\n. right, there are no$_GET` query variables during the save_post hook.\n. This should work:\n``` php\n$cmb = new_cmb2_box(array(\n    'id'            => 'num_slides_box',\n    'title'         => __( 'Enter number of slides', 'cmb2'),\n    'object_types'  => array('post'), //post type\n    'context'       => 'normal',\n    'priority'      => 'high',\n    'show_names'    => 'true',//show the field names on the left\n) );\n$post_id = 0;\nif ( isset( $_REQUEST['post'] ) ) {\n    $post_id = $cmb_demo->object_id( absint( $_REQUEST['post'] ) );\n} elseif ( isset( $_REQUEST['post_ID'] ) ) {\n    $post_id = $cmb_demo->object_id( absint( $_REQUEST['post_ID'] ) );\n}\nif ( $post_id ) {\n    if ( $slideNum = get_post_meta( $post_id, 'num_slides', true ) ) {\n        for ( $i = 0; $i < $slideNum; $i++ ) { \n            $cmb->add_field(  array(\n                'id'      => 'slider_group_'.$i,\n                'name'    => 'Slide',\n                'desc'    => 'Side contents'.$i,\n                'type'    => 'wysiwyg',\n            ) );\n        }\n    }\n}\n``\n. The filter is deprecated, and you should use the first example. Can you point me to the examples which use the'cmb2_meta_boxes'filter?\n. Ok thank you, I will put in a request for them to update their code. :)\n. Related: #384 \n. Would love that.\n. Because load_plugin_textdomain && load_muplugin_textdomain both expect a relative path, and apparently load_theme_textdomain expects an absolute path. Good catch!\n. This should probably useget_stylesheet_directoryto account for child-theme usage.\n. Thank you!\n. It was only easy after staring at CMB2 code for years. :D\n. Yes, this is normal. This is WordPress caching the results of oembed lookups in order to avoid API calls every page load.\n. ha, thanks man!\n. Take a look at the address field example as it uses a description as well. It might point you in the right direction. https://github.com/WebDevStudios/CMB2-Snippet-Library/blob/master/custom-field-types/address-field-type.php#L72-L136\n. @jaxgeller are you using a persistent cache? What do you see in the admin when you update the value in the DB? And I assume you're inserting a serialized string?\n. Can you test/confirm if this is an issue in the trunk branch?\n. \ud83d\ude3f  Ok, I'll try to look into this soon.\n. Nah, this is definitely a bug.\n. This is working for me. I believe it was fixed recently. Please review your test case, and feel free to reopen this issue if you find it's still broken for you (on the develop branch).. [wp_kses_post](https://codex.wordpress.org/Function_Reference/wp_kses_post) is the default sanitization for [wysiwyg and textarea field types](https://github.com/WebDevStudios/CMB2/blob/master/includes/CMB2_Sanitize.php#L288-L294) and is a wrapper for [wp_kses](https://codex.wordpress.org/Function_Reference/wp_kses) with the$allowed_htmland$allowed_protocolsdefined. You could define your ownwp_ksessanitization callback and define those$allowed_htmland$allowed_protocolsyourself, or just let CMB2 handle it with it's built-in sanitization. :)\n. awesome, you're welcome!\n. This is a pretty big bug, so I'm not waiting for a PR, but will give you props. I'll need to release the next version asap to address it. Thank you for reporting.\n. https://github.com/WebDevStudios/CMB2/releases/tag/v2.1.0\n. You can use the ['show_on_cb'` field parameter](https://github.com/WebDevStudios/CMB2/wiki/Field-Types#user-content-show_on_cb).\nDemoed in example-functions.php:\nhttps://github.com/WebDevStudios/CMB2/blob/master/example-functions.php#L97\nhttps://github.com/WebDevStudios/CMB2/blob/master/example-functions.php#L39-L52 \n. that's correct. the related issue: #417\n. The performance hog would be this line: https://github.com/WebDevStudios/CMB2/blob/master/js/cmb2.js#L556-L557\nYou've certainly uncovered some of the faults in the repeatable fields/repeatable groups JS from another angle. I've been trying to carve out some time to refactor that Javascript for some time (there are more than a few nagging bugs), but I know it will be more than a small undertaking. I'd love to have some help and would love to review a PR or a collaborate on a branch or fork to get it right.\nIt would be much simpler if CMB2 wasn't primarily a WP/PHP tool, as we could rebuild using JS templating system, but unfortunately we have to account for whatever comes out of the field callbacks and try to duplicate those in repeatable scenarios. So that is definitely something to keep in mind.\nYou also mention JS tests which is admittedly an area I am weak in, so getting tests built/implemented would be a HUGE win.\n. How about this one: https://github.com/WebDevStudios/CMB2/issues/363#issuecomment-126817617\n. How about this one: https://github.com/mustardBees/cmb-field-select2\n. @slaFFik I'd prefer the latter, a field parameter, but we already use multiple as a field parameter to determine if it should be repeatable. So let's just go ahead and make it a new field type. That helps with back-compat concerns as well.. This has been addressed in the trunk branch, thank you for reporting! Please please please don't modify CMB2 core as there may be other plugins depending on your copy of CMB2 (because of the way CMB2 loading works) and while your edits may work for your use-case, it's alway possible that they could break somebody else's.\n. Understood. Did you happen to test trunk? It should be good (it worked for me), but want to verify.\n. The attachment id gets added to the _id hidden input via JS when you select the attachment from the media modal. In my testing, everything is working normally.\n. Thank you @jamiechong! merged.\n. I'm not sure I understand the value of reversing this to use array keys?\n. I was familiar w/ the fact that isset is faster than in_array, but having a hard time believing the value gained from using array keys (for the number of items that would live in this array), is worth developer confusion w/ using this filter with array keys. \nConvince me. ;)\n. Color me convinced. Thank you for thinking this through.\n. Probably, thought it needs to be closed anyway because it is against master. Hopefully this issue is fixed in trunk, but if not, feel free to open a new PR against the trunk branch (as per contribution guidelines).\n. Please don't hack the plugin as you could break it for other plugins/themes depending on it. There is documentation for updating that url if it is not working properly: https://github.com/WebDevStudios/CMB2/wiki/Troubleshooting\nTL;DR: there is a filter in place so hacking the plugin is not necessary.\n. Because CMB2 can be loaded as a plugin, from a plugin, from mu-plugins, from a theme, etc. \nI would like to solve this a bit better though. Can you provide more insight into your file structure and where CMB2 is loaded?\n. @MickeyKay Yep, just need to filter that URL. https://github.com/WebDevStudios/CMB2/wiki/Troubleshooting#cmb2-urls-issues (like mentioned above).\nphp\nfunction update_cmb2_meta_box_url( $url ) {\n    return site_url( '/vendor/webdevstudios/cmb2' );\n}\nadd_filter( 'cmb2_meta_box_url', 'update_cmb2_meta_box_url' );\n. This issue should be solved for almost all use-cases now (without need to filter). If any of you are able to test with the trunk branch, please do so.\n. @justnorris yes, the filter is there for the scenarios where CMB2 is not smart enough to figure it out. I've updated the documentation though, as there are some caveats to consider when using the filter (namely, try not to break CMB2 for other implementors): https://github.com/WebDevStudios/CMB2/wiki/Troubleshooting#cmb2-urls-issues\nCan you provide me the broken URL vs the correct URL for your install? I want to see if there's ways to smarten CMB2's logic a bit more.\n. > Honestly, URLs for these types of resources should probably utilize the appropriate functions to get browser friendly URLs, and not server path versions.\nThis is not possible since CMB2 can be bundled/included in many places. Believe me, it's been discussed/hashed out before, including the rest of this thread.\n. The trick (as identified in the docs for that filter) is to do a string_replace on the url to only replace the bad bits with good bits, vs explicitly setting the URL to our local version. In my example on the wiki page, it's removing the incorrect bits of the symlink path, but this will not break things if CMB2 is loaded from another plugin/theme/etc. Hopefully that makes sense.. You'll notice in the documentation that the field is not using the 'taxonomy_multicheck' type, but is using a generic 'select'. In your case could probably be swapped out for 'multicheck'. But either way, you do not want any of the taxonomy_* field types if your intention is not to set the taxonomy terms for the page/post you are editing.\n. @DevinWalker That's a good thought. The 744968d is a step, but ideally we would have more WordPress style hooks in there. I've been mulling it around in my head, and haven't quite determined what the best option is.\n. Wouldn't this accomplish the same thing a little more elegantly?\nphp\n$cmb_demo->add_field( array(\n    'name' => __( 'Test Text Area', 'cmb2' ),\n    'id'   => $prefix . 'textarea',\n    'type' => 'textarea',\n    'label_cb' => 'render_custom_callback',\n    'options' => array(\n        'tooltip-class' => 'fa-info-circle',\n        'tooltip'       => 'This is info about this setting or field',\n    ),\n) );\nWith a callback like:\n``` php\nfunction render_custom_callback( $field_args, $field ) {\n    // Get default label\n    if ( $label = $field->label() && $field->option( 'tooltip' ) ) {\n        // If label and tooltip exists, add it\n        $label .= sprintf( '%s', $field->option( 'tooltip-class' ), $field->option( 'tooltip' ) );\n    }\nreturn $label;\n\n}\n``\n. Keep in mind, the'label_cb'` only exists in trunk at the moment, but will be in the next release.\n. @pgroot91 you are right, I had some bugs in my sample code. I have updated to work properly in the example in the wiki: https://github.com/CMB2/CMB2/wiki/Tips-&-Tricks#modify-field-label-output. thanks!\n. I haven't used it, but you might try this library: https://github.com/jcchavezs/cmb2-conditionals\nThere is no conditional field-display via JS built-in, but you can do conditional field display with the 'show_on_cb' field parameter: https://github.com/WebDevStudios/CMB2/wiki/Field-Types#user-content-show_on_cb\n. @khromov It is a top priority. Unfortunately, our development resources (time) are limited. We are not in competition with ACF, and have differing fundamental values. If you prefer ACF, we encourage you to use it.\n. This could be done with some custom javascript, but is not part of CMB2. That's a very specific implementation and it's unlikely it would be added any time soon.\n. The problem is that it's not a simple php callback or something like that because it will also have be generated on the JS side when adding, and removed when removing, and replacing when sorting, etc. There isn't a simple solution and with all the other bugs/feature requests, I remain unconvinced that this should somehow take priority. Also, the repeatable group JS is in need of a major refactor and I'm reluctant to bolt any more functionality onto it. Like I said, for custom use-cases, this could be done somewhat trivially with JS, but IMO there's not a simple, straight-forward and flexible way to add it to core.\n. Thanks for reporting. This is now fixed in the trunk branch.\n. Unfortunately, we can't support every person's specific or custom implementations for CMB2. Github issues are reserved for confirmed bug reports and occasional feature requests. Please review the CONTRIBUTING.md for support suggestions. Please also review the additional resources listed at the bottom of that document, as the solution you're looking for may already be present.\n. I recommend viewing the documentation for extending by creating your own field types: https://github.com/WebDevStudios/CMB2/wiki/Adding-your-own-field-types\n. Not sure about the save_post thing. it looks a little questionable. You might instead try making 'post_title' the 'id' of your title field to see if WP will handle doing the post-title saving for you.\n. Also, CMB2 does it's save_post stuff on the same hook and priority. If you're hook is running first, then the post-meta would be empty until the next save (but would always be the old value before CMB2 saves it to post-meta).\n. Change:\nphp\n    $cmb->add_field( array(\n        'name'       => __( 'Name', 'cmb2' ),\n        'desc'       => __( '', 'cmb2' ),\n        'id'         => $prefix . 'name',\n        'type'       => 'text'\n    ) );\nto:\nphp\n    $cmb->add_field( array(\n        'name'       => __( 'Name', 'cmb2' ),\n        'desc'       => __( '', 'cmb2' ),\n        'id'         => 'post_title',\n        'type'       => 'text'\n    ) );\nAnd remove your save_post hook/function\n. Yes, but if you use $_POST, you definitely should be sanitizing it first.\n. I recommend looking at this addon by @jcchavezs: https://github.com/jcchavezs/cmb2-conditionals\n. @JayWood's suggestion is not what I would recommend for the built-in field types (it's intended use is for handling sanitization for custom field types, like in the docs Jay linked to), because now you're modifying the sanitization for all CMB2 'text' field types. Keep in mind, just like modifying WordPress filters, your modifications could have unintended consequences for plugins/themes depending on those things to be in place, and that your project may not be the only thing depending on CMB2.\nThe best way to accomplish what you are trying to do is to use the 'sanitization_cb' field parameter on a field-by-field basis. This will ensure you are only modifying the sanitization for your specific field(s).\nphp\n$cmb->add_field( array(\n    'name'            => __( 'Test Text', 'cmb' ),\n    'id'              => 'wiki_test_text',\n    'type'            => 'text',\n    'sanitization_cb' => 'prefix_sanitize_text_callback', // function should return a sanitized value\n) );\nThe sanitization callback:\n``` php\nfunction prefix_sanitize_text_callback( $value, $field_args, $field ) {\n/*\n * Do your custom sanitization. \n * strip_tags can allow whitelisted tags\n * http://php.net/manual/en/function.strip-tags.php\n */\n$value = strip_tags( $value, '<p><a><br><br/>' );\n\nreturn $value;\n\n}\n```\n. Thanks for all your hard work here. I've merged it in and have made some changes to reign the scope in a bit. It seems to work well in my testing, but please test on your end to verify.\n\nusers wont be able to use escape characters in their format strings. (E.g.: 'd \\d\\e m \\d\\e Y', or any other combinations).\nEither that should be reflected in the docs, or that particular stripslashes should go... :P\n\nWhat is the use-case where that is necessary?\n\nBut I guess we should also put there the acceptable characters for the format string (d, j, z, m, n, y, and Y, instead of the whole date() range).\n\nGood idea, I updated the trunk branch of the wiki and will merge it to master when the next version of CMB2 is released with this update/change.\n`\n\nAs an aside... for date/time combo (no timezone) we are saving an array with 'date' and 'time' as keys, while just saving a timestamp should be sufficient (and maybe cleaner?)\n\nI saw that in your branch, but that is not part of how CMB2 currently works. I've removed it and it's using the timestamp as it should.\n. I LOVE pull-requests for better testing!\n. awesome, thanks!\n. Can you provide some sample code for what you are doing?\n. I suggest using the filters in place to set the value: https://github.com/WebDevStudios/CMB2/blob/master/includes/CMB2_Field.php#L226\n. No, you would would want to apply your filter/callback before calling cmb2_get_field.\n. This looks good. The image_id_from_url method is actually a backup method in case the image ID didn't get properly saved to the hidden field. Are you seeing it fall back to this method often?\n. Had to fix my broken tests before I could merge your changes in, but got them in. This is merged into trunk: https://github.com/WebDevStudios/CMB2/commits/trunk\n. Good catch, thank you.\n. Example in the wiki: https://github.com/WebDevStudios/CMB2/wiki/Tips-&-Tricks#setting-a-default-value-for-a-checkbox\n. Yep, you might look at these snippets: https://github.com/WebDevStudios/CMB2-Snippet-Library/blob/master/misc/outputting-forms-outside-metaboxes.php\n. Thank you for your contribution. This has already been addressed in 2.1.1 \n. Closing as duplicate: #264\n. There is nothing in CMB2 core which supports termmeta, so no changes are necessary. Once termmeta is officially in core, we can begin considering adding CMB2 core support.\n. hmm.. you could use the 'sanitization_cb' to strip the value if it's incorrect (and add a description stating that will happen).\n. This is a lot to review and as such, will take some time. Just giving a heads up.\n. @BenRacicot please don't modify CMB2 core code as it could break for others. You should definitely be using the 'show_on_cb' argument, and there is actually a really good example for how to do that in the example-functions.php file: https://github.com/WebDevStudios/CMB2/blob/master/example-functions.php#L84 and https://github.com/WebDevStudios/CMB2/blob/master/example-functions.php#L24-L37\nThe 'show_on_cb' should simply return true or false (whether to show or not). You can do all your checks in that callback, and $cmb->object_id in that example is the post ID you will want to use to do your checks.\n. Thanks for reporting. Released 2.1.2 to address, but please update your CMB2 configuration to use the new metabox and field registration API as demonstrated in the example-functions.php file. Using nested arrays is deprecated.\n. Requested a cleaned up, documented version\n. Made a few small tweaks and added unit tests.\n. Please open this pull request against the trunk branch. (and please review the CONTRIBUTING.md)\n. That's because it's not built in. :) Happy to take a PR.\n. the snippet library\n. JS logging only occurs if you have the SCRIPT_DEBUG constant enabled. \n. If you're using the options page snippet from the CMB2 Snippet Library, you're best bet is to open an issue there.\n. Are we good here?\n. :thumbsup: If you see more issues w/ the options page, please open an issue on the snippets repo. Thanks.\n. Can you document the steps to replicate your issue? Also, closing as this is branched off of master. CONTRIBUTING.md\n. I cannot duplicate the issue with your exact code.\n. Merged/closed: https://github.com/WebDevStudios/CMB2/commit/6fd935f26ae9bc75dee7b46fdd0e933b7a083e38\nThanks @danielbachhuber \n. Yes, you can definitely use 'object_types' => array( 'attachment' ), but as you've observed, there is no integration to the media modal (yet!). Those views are all driven by javascript and not something we can simply hook in and add.\n. field_id is what is used in nearly every CMB2_Field filter, the field type can be retrieved from the callback via $field->type(), and the (proper and filtered) new value can be be retrieved from the callback via $field->value (I just ensured $field->value would be up-to-date when these actions are called: https://github.com/WebDevStudios/CMB2/commit/1958844f4b055ad134e6a7dadacc54b3a1b86e55).\n. @wpsmith $type is not really a thing, but I'm assuming you're referring to the $object_type, which is exactly that, the type of object for the current instance. 'post' is 90% of what people use CMB for, but other object types include 'user', 'comment', 'options-page', and eventually 'term'. If you're referring to the post type, that can be retrieved in most cases by calling get_post_type on the $object_id.\n. Try the helper function here: https://github.com/WebDevStudios/CMB2/wiki/Field-Types#wysiwyg\nUnfortunately, we can't support every person's specific or custom implementations for CMB2. Github issues are reserved for confirmed bug reports and occasional feature requests. Please review the CONTRIBUTING.md for support suggestions. Please also review the additional resources listed at the bottom of that document, as the solution you're looking for may already be present.\n. Thanks, fixed! https://github.com/WebDevStudios/CMB2/commit/2d4dc6ceb56a954423e7b20315964994d5b29435\n. Why do you believe your PR is a better option than @yivi's #318? What do you consider to be \"unrelated changes\"?\n. @yivi we're so close. Thanks for your efforts. Let me know which (#318 or #446) I should be testing against. For now, i've merged trunk into the WebDevStudios:yivi-date-time-picker-fixes branch so it is up-to-date.\n. This should be good in trunk. Huge thanks for @yivi's work. Please test.\n. Sorry @jamesgol, I'm with @jrfnl in that I don't think it's safe to make those assumptions as readonly and disabled attributes are used for specific and varied purposes.\n. That being said, I could see using a field attribute, 'save_field', (which mirrors the CMB2 property) which, when set to false, would keep the field from saving.\n. There are several filters which could be leveraged to accomplish this already.\n. @jamesgol oops, I just pushed an update to include this, but please submit your PR and I will merge it in for the unit tests, etc, and will give you props.\n. @tw2113 yah, that might be a good idea, though I can't recall if that method is flexible enough to handle both use-cases (my hunch is no).\n. The wiki example (https://github.com/WebDevStudios/CMB2/wiki/Bringing-Metaboxes-to-the-Front-end) requires you to use a shortcode and pass it a metabox ID, like [cmb-form id=\"test_metabox\"]. The example does NOT explain how to register that 'test_metabox' metabox and and its fields. \n. Yes, absolutely.\n. I have seen that happen one other time (and had the same irritating debugging session). While I agree w/ your idea, the problem is making that change will break backwards compatibility. A workaround would be to specify the default callback and return the value (that happens to be callable).\n. Again, I totally get it. But that is not worse than me changing it and having working code break. It's a catch 22.\n. I added a wiki entry to the troubleshooting page: https://github.com/WebDevStudios/CMB2/wiki/Troubleshooting#callable-field-parameters\n. More helpful context: https://github.com/CMB2/CMB2/issues/894#issuecomment-288737330. Also related: #826 and #1094.. The _cb equivalents have been created, and the non _cb callback usage has been deprecated, so this issue can be closed. Will need to determine the proper time to remove the non _cb callback usage completely.. First, you should be using the CMB2:add_field method to add your fields: https://github.com/WebDevStudios/CMB2/blob/master/example-functions.php#L112-L118\nSecond, you can override the default input classes via the attributes parameter: https://github.com/WebDevStudios/CMB2/wiki/Field-Types#user-content-attributes\n. 'fields'\u00a0arg on new_cmb2_box is deprecated. and the 'attributes' field property is for directly adding/modifying the input attributes.\n. Hey @devinsays, did we get any traction testing this? If not, we may want to just roll it in, and get feedback organically.\n. @wesamly You can download/test the trunk branch.\n. It is merged (it's in the trunk branch), I just need to take the time to put out a proper release.\n. Try updating your compel_get_option function to something like this:\n``` php\nfunction compel_get_option( $field_id = '', $default = false ) {\n    if ( function_exists( 'cmb2_get_option' ) ) {\n        $value = cmb2_get_option( compel_admin()->key, $field_id, $default );\n    } else {\n    $opts = get_option( compel_admin()->key );\n    $value = $default;\n\n    if ( 'all' == $field_id ) {\n        $value = $opts;\n    } elseif ( array_key_exists( $field_id, $opts ) ) {\n        $value = false !== $opts[ $field_id ] ? $opts[ $field_id ] : $default;\n    }\n}\n\nreturn $value;\n\n}\n``\n. What happens if you remove yourif( checked(` condition? does the file load?\n. If you do:\nphp\nprint_r( file_exists( COMPEL_PLUGIN_PATH . 'post-types/staff.php' ) );\nAnd you get a truthy value in both scenarios (in and out of the function), then it's likely a load order issue. What is in that file?\n. I meant, what is in post-types/staff.php? And did you do the test?\n. Yah, lots of issues with your code. For one, you can't hook into init from inside a function that hooks to cmb2_admin_init. Just do the conditional loading stuff outside the function and you should be fine. Also, don't do if( checked(. Just do if ( $checked_value ) {. \n. Where do you see the docs being incorrect? It's correct here and here.\n. I definitely like this idea. We would need to move the inline JS to the JS file, but this appears to be a good start.\n. @joshuadavidnelson good question/point. It should be an option for the radio type.\n. There are so many checks in place by the time that require is called, that there should never be a conflict. Including init.php is the correct way to do it.\n. @DevinWalker first time I've seen this being reported for CMB2, as it's been explicitly built to handle those scenarios. Would love more details for how I can reproduce the issue. We use CMB2 all day every day at WDS, with it being bundled in a variety of our plugins, etc, and have yet to run into this.\n. Looking into this.\n. This should be fixed with 2.2.1, please update wherever possible.\n. @DevinWalker It definitely was only an issue with 2.2.0, and I wish I would have caught it before the release, but thank you for calling it out earlier.\n. You should register a callback for 'show_on_cb' and perform your logic there. https://github.com/WebDevStudios/CMB2/wiki/Adding-your-own-show_on-filters#how-does-it-work\n. @lucascdsilva does the solution in this PR work for you?\n. @Steviant I don't believe this accounts for non-input repeatable fields (like <select>, etc).\n. Ah good point, I admit, I did not see the :. I would love it if you could test this against non-input form elements (though several of the non-input field types can't be made repeatable). Thank you.\n. Closing as duplicate of #95\n. @johnjamesjacoby Can you test this branch to see if the conflict is resolved? https://github.com/WebDevStudios/CMB2/tree/bug/narrow-datepicker-styles\n. Just did some testing with a vanilla datepicker instantiation, and the aforementioned branch solves the issue.\n. Justin downloaded/activated 3.0.4 and seems to be working fine. Do you have the most recent version of Yoast?\n. Yoast 3.0.4 update is specifically to address this issue: https://wordpress.org/plugins/wordpress-seo/changelog/\n. As recommended by the docs on the wiki page, I would use the 'show_on_cb' callback parameter instead as it is a bit more intuitive and you can do any kind of checks you need to there. Just return true or false to display the metabox.\n. I've added an example to the wiki which should be what you need (or close): https://github.com/WebDevStudios/CMB2/wiki/Adding-your-own-show_on-filters#example-using-the-show_on_cb-to-limit-the-display-of-a-metabox-unless-metadata-exists\n. Hopefully this issue is fixed in trunk, but if not, feel free to open a new PR against the trunk branch (as per contribution guidelines).\n. Why would this be needed? What scenario did you have that would cause that error to be thrown?\n. The taxonomy fields are not intended to provide an arbitrary list of terms to pick from, but are intended to be a replacement for the default taxonomy metaboxes. I.e. they are meant to set the taxonomy terms on an object. Any other use of these types will be hacky and/or buggy. I suggest looking at building a custom field type for this: https://github.com/WebDevStudios/CMB2/wiki/Tips-&-Tricks#a-dropdown-for-taxonomy-terms-which-does-not-set-the-term-on-the-post\n. are you using the front-end form to save an existing post, or create new? If saving an existing post, there's no reason you should be using get_sanitized_values. You should be using something similar to this: https://github.com/WebDevStudios/CMB2-Snippet-Library/blob/master/front-end/cmb2-metabox-shortcode.php\n. Again, the taxonomy fields are not intended to be used the way you are using them. I suggest: https://github.com/WebDevStudios/CMB2/wiki/Tips-&-Tricks#a-dropdown-for-taxonomy-terms-which-does-not-set-the-term-on-the-post\n. As a follow-up, since Jon reminded me of this thread today :), basically, the tax fields use the same field name structure that WP admin expects for the built-in tax-term UI, so WP saves them for us for free (CMB2 doesn't handle the term-setting/saving bit). If you use those tax fields outside of the post edit screen, WP won\u2019t do the work for you, so you're on your own. You\u2019re right in that it should likely have a fallback saving mechanism in scenarios where  the fields are not being used in the post-edit screen (or at least document this limitation in the wiki until it can be addressed).. @JPry esc_url_raw( 'http://' . $value ) should just be esc_url_raw( $value ).\n. Could you please test the trunk branch as there have been a lot of date issues addressed there.\n. :+1: \n. This has been merged to trunk. Documentation still needs to be added (#618)\n. It's working for me. \n. You're right, it does not work after saving. We'll need to look into this.\n. It doesn't resolve all cases since CMB2 can be included in a plugin, as a plugin, as an mu-plugin, or in a theme. \n. Related: https://github.com/WebDevStudios/CMB2/issues/27#issuecomment-64664892\n. wysiwyg fields have special handling. It's likely it wasn't handled correctly in the custom field type.\n. That is pretty simple to accomplish w/ the first filter you listed:\n``` php\nfunction cmb2_override_meta_value_for_type( $val, $object_id, $args ) {\n    if ( 'your-type' === $args['type'] ) {\n        // do your modification here\n    }\nreturn $val;\n\n}\nadd_filter( 'cmb2_override_meta_value', 'cmb2_override_meta_value_for_type', 10, 3 );\n```\n. Term meta will be in the next CMB2 release and is available in the trunk branch. I suggest using that instead of a 3rd party lib. \n. This field is the closest thing: https://github.com/WebDevStudios/CMB2-Post-Search-field\n. Core link picker is notoriously hard to use outside of it's intended use-case (tinymce plugin). If you can get it, that would be awesome.\n. Also, this now exists: https://wordpress.org/plugins/link-picker-for-cmb2/. I suggest using the 'title' field type to output titles (and the description attribute on that title field to output a description). It works the same way for user meta as well.\n. Yes, I understood. As i mentioned, that is how it has always been when using CMB2 anywhere but in an actual metabox. User/Term meta fields do not live in a metabox, but are standalone fields. If you want to create that separation, use the 'title' field type.\n. What, specifically, is the issue that you are seeing? \n. The form markup for CMB2 a) intentionally avoids tables for markup, and b) intentionally matches the default WordPress fields for continuity: \n\n. This should be fixed in trunk.\n. Hopefully this issue is fixed in trunk, but if not, feel free to open a new PR against the trunk branch (as per contribution guidelines).\n. Yah, default doesn't work the same way with checkboxes. Check out this snippet for workaround: https://github.com/WebDevStudios/CMB2/wiki/Tips-&-Tricks#setting-a-default-value-for-a-checkbox\n. No worries!\n. file_list saves an array of attachment ids and attachment urls, neither of which will be the same on a separate server. Solving for that is outside the scope of this plugin.\n. Great solution here: https://github.com/WebDevStudios/CMB2/issues/631#issuecomment-212097539\n. As of version 2.2.0 (to be released shortly), and in trunk, you can do this this way: https://github.com/WebDevStudios/CMB2/wiki/Tips-&-Tricks#change-the-year-range-for-the-date-field-types.\n. Please review #805. . For dynamic field/box display, you're almost always better off using the 'show_on_cb' box and field parameter: https://github.com/CMB2/CMB2/wiki/Box-Properties#show_on_cb & https://github.com/CMB2/CMB2/wiki/Field-Parameters#show_on_cb. Another similar issue: #395.. Ok, \ud83d\udc4d . Following the contribution guidelines, can you please submit your PR against the trunk branch?\n. Thank you sir!\n. Just saw this. Thanks!\n. The cmb2-rest-api branch is still in-progress, and as such, documentation is sparse. The fields showing in the REST API is an opt-in feature, not opt-out, so you wouldn't see anything by default. Just search for 'show_in_rest' in the example-functions.php file of that branch. Also, the rest api branch is up-to-date with trunk now.\n. There are definitely some things to like about this concept, but as it is now, it could break backwards compatibility, and it does not account for dynamically built/modified options arrays which would result from using the options_cb paramater. \n. Nice catch, thank you!\n. I'm inclined to move the CMB2_Types::concat_attrs() method to CMB2_Utils, and use that generate the string of attributes, and have the filter take an array. BUT..  this filter feels a bit arbitrary to me. Is there any reason to do this instead of doing things in JS, which is likely where you'll be wanting to use the extra attributes anyway?\n. Thanks @jrfnl! Hopefully that helps w/ the CMB2 Conditionals plugin. I've updated the filter to use concat_attrs, which means the filter sends an array and requires one back. See the change here: https://github.com/WebDevStudios/CMB2/commit/337c24317f8de88a456f9f3691ace635a2f8dcc5\n. If you use the version from wordpress.org, you will not get any of the tests or other dev resources. \n. Agree about using WP_Screen object. But, the enqueueing for the term/user pages is handled here: https://github.com/WebDevStudios/CMB2/blob/master/includes/CMB2_hookup.php#L260-L265\nIn my testing, the js/css is loaded in all the expected places, term pages, user profile, comment pages, post pages, etc.\n. Let's do a new PR to keep the commit history a bit cleaner (unless you feel like scrubbing your branch history).\n. Yah, basically the two contexts where add_meta_box is used, posts and comments. Need to be sure it works on new and edit pages.\n. parent_base is empty for me, so scripts/css are not enqueued on a normal post/page w/ your PR.\n. Yah, that's odd. I think it probably has something to do w/ the serializing of the func args and the $this in the callback being unique. Anyway, I think it would be good to fix the once issue.. possibly w/ something like a has_filter proxy method. I'd be happy to see what you come up with.\n. :thumbsup:\n. @emwebber yes, there is an example for doing that in the example-functions.php file.. This is in trunk, the in-development branch. Is that what you are using?\n. IMO, this processing should happen during the field registration process. For your radio example:\n``` php\n    $fields[] = array(\n        'name'             => ( 'Test Radio inline', 'cmb2' ),\n        'desc'             => ( 'field description (optional)', 'cmb2' ),\n        'id'               => $prefix . 'radio_inline',\n        'type'             => 'radio_inline',\n        'show_option_none' => 'No Selection',\n        'options'          => array(\n            'standard' => ( 'Option One', 'cmb2' ),\n            'custom'   => ( 'Option Two', 'cmb2' ),\n            'none'     => __( 'Option Three', 'cmb2' ),\n        ),\n    ) );\n$fields[] = array(\n    'name'    => __( 'Test Radio', 'cmb2' ),\n    'desc'    => __( 'field description (optional)', 'cmb2' ),\n    'id'      => $prefix . 'radio',\n    'type'    => 'radio',\n    'options' => array(\n        'option1' => __( 'Option One', 'cmb2' ),\n        'option2' => __( 'Option Two', 'cmb2' ),\n        'option3' => __( 'Option Three', 'cmb2' ),\n    ),\n) );\n\nforeach ( $fields as $field ) {\n    switch ( $field['type'] ) {\n        case 'radio':\n            $field['options'] = 'my_radio_options_callback';\n            break;\n    }\n\n    $cmb_demo->add_field( $field );\n}\n\n```\nThe only filter that makes sense to me is the last filter, cmb2_field_arguments, but I think it should pass $this as the 2nd argument to allow full access to the field object.\n. Let's yank the cmb2_field_arguments_raw filter, and we'll call it good. I can't imagine a scenario where it would be needed over the cmb2_field_arguments filter.\n. @widoz I can't imagine a scenario where you would want the textarea_name to be different than the 'id' attribute, considering that the field would only show/save to the 'id' attribute.\n. It does work w/ custom fields.\nphp\nfunction cmb2_render_custom_field( $field, $value, $object_id, $object_type, $cmb2_type ) {\n    echo $cmb2_type->wysiwyg( array(\n        'id'      => $cmb2_type->_id( 'desc' ),\n        'value'   => stripslashes( $value['desc'] ),\n        'desc'    => '',\n        'options' => array(\n            'textarea_rows' => 3,\n            'textarea_name'  => $cmb2_type->_name( '[desc]' ),\n        ),\n    ) );\n}\nadd_filter( 'cmb2_render_custom_field', 'cmb2_render_custom_field', 10, 5 );\n. Not super sure what you mean. Do you think you can provide screenshots for before/after?\n. Refreshed and merged: https://github.com/WebDevStudios/CMB2/commit/6ee7222812bef1229a8b2e10d4c0259c0fda615b\nThanks @c3mdigital!\n. I would look at the wiki examples: https://github.com/WebDevStudios/CMB2/wiki/Adding-your-own-show_on-filters#example-using-the-show_on_cb-to-limit-the-display-of-a-metabox-unless-metadata-exists and https://github.com/WebDevStudios/CMB2/wiki/Field-Types#user-content-show_on_cb.\n. Post types or post formats? You're using different terms.\n. > I'm wondering if there is documentation anywhere about how to use the render_row_cb callback.\nThe only documentation for it is at the bottom, here: https://github.com/WebDevStudios/CMB2/wiki/Field-Types#render_row_cb\n\nWhat arguments are passed to it?\n\nIt's called here, and gets passed $field_args and the $fieldobject.\n\nAnd what should it be returning?\n\nBasically, it needs to replace the functionality of the CMB2_Field::render_field_callback method.\nIf you're render_row_cb looked like the following snippet, it would (in theory) be a direct replacement:\nphp\nfunction override_render_field_callback( $field_args, $field ) {\n    // If field is requesting to not be shown on the front-end\n    if ( ! is_admin() && ! $field->args( 'on_front' ) ) {\n        return;\n    }\n    // If field is requesting to be conditionally shown\n    if ( ! $field->should_show() ) {\n        return;\n    }\n    $field->peform_param_callback( 'before_row' );\n    printf( \"<div class=\\\"cmb-row %s\\\">\\n\", $field->row_classes() );\n    if ( ! $field->args( 'show_names' ) ) {\n        echo \"\\n\\t<div class=\\\"cmb-td\\\">\\n\";\n        $field->peform_param_callback( 'label_cb' );\n    } else {\n        if ( $field->get_param_callback_result( 'label_cb', false ) ) {\n            echo '<div class=\"cmb-th\">', $field->peform_param_callback( 'label_cb' ), '</div>';\n        }\n        echo \"\\n\\t<div class=\\\"cmb-td\\\">\\n\";\n    }\n    $field->peform_param_callback( 'before' );\n    $field_type = new CMB2_Types( $field );\n    $field_type->render();\n    $field->peform_param_callback( 'after' );\n    echo \"\\n\\t</div>\\n</div>\";\n    $field->peform_param_callback( 'after_row' );\n    // For chaining\n    return $field;\n}\n. That'd be awesome! The Tips & Tricks page would probably be a good place for it: https://github.com/WebDevStudios/CMB2/wiki/Tips-&-Tricks\n. @JasonHoffmann that's pretty awesome, thank you! \n. Yes, I need to update the Travis config.\n. Fair enough. Though I'd make one change: cmb2_ajax() should simply return CMB2_Ajax::get_instance();.\n. Ok, thanks!\n. Please provide your sample code.\n. This looks great! So does it save actual tags, or just arbitrary text entries?\n. I have no idea what you are referring to. Please post your code, or a link for context.\n. Are you using the latest version (2.2.1) of CMB2 (or the master branch)?\nI am using the latest version, pasted the file in my theme exactly as it's posted, and it works exactly as it should.\n. Closing this in favor of https://github.com/WebDevStudios/CMB2-Snippet-Library/issues/29.\n. See #198, https://github.com/WebDevStudios/CMB2/commit/e863b18ca838f2e5ef280e0883f597c99f44f97a, and https://github.com/WebDevStudios/CMB2/commit/e4d03897689a16d0231c2a344fc15b0439e2155f.\nThank you for your contribution, but for future contributions, can you please review the CONTRIBUTING doc before submitting? Thank you.\n. Done.\n. Done.\n. Done.\n. Done, though It could definitely be improved in the future.\n. Calling this good.\n. Done.\n. Done for now. https://github.com/WebDevStudios/CMB2/wiki/REST-API\n. Done.\n.  Think the best bet for plugins in the repo is to use TGM. \n. You can specify any size preview you want: https://github.com/WebDevStudios/CMB2/wiki/Field-Types#custom-field-attributes-5\nThis parameter can also take a named thumbnail size, so you can use any image size you have registered with add_image_size().\nAs for the 2nd request, \"the best format would be a square or the support of the parameter 'preview_size' also for non-image-files\", I'm not entirely sure how you expect that to work. There is no way for CMB2 to know what file types you have allowed on your site, and/or how to display them as a preview with a specific size.\n. Ah, that makes a ton of sense, and thank you for the screenshots. I don't think that will be difficult to pull off.\n. Set the 'priority' param on the metabox array sent to new_cmb2_box to something lower (maybe 5?)\n. #301 is Somewhat related, and this snippet in particular: https://github.com/CMB2/CMB2-Snippet-Library/blob/master/options-and-settings-pages/options-pages-with-submenus.php. Doing submenu pages with tabbed navigation snippet can be found here: https://github.com/CMB2/CMB2-Snippet-Library/blob/master/options-and-settings-pages/options-pages-with-tabs-and-submenus.php\n. Thanks for reporting this issue! It should be fixed in the trunk branch, and will be in the next release.\n. Yep, that was definitely a bug. The text overrides should not be mashed up w/ the option values, so I've created a 'text'/'text_cb' parameter which is used exclusively for text strings. It will fall back to the options value only for back-compatibility. This will be in the next release, but you can use the trunk branch for testing.\n. @goncalomarques I didn't 'decide' to store serialized, that is the default way WordPress meta apis work with non-scalar values. Even if we changed it for CMB2, you would still have migration issues w/ other plugins/meta/widgets/etc. I suggest using @carasmo's solution.\n. Yes, look at the taxonomy metabox example: https://github.com/WebDevStudios/CMB2/blob/master/example-functions.php#L525-L565\n. That's pretty sweet. Have you considered/attempted a pull request to the original?\nAlso, a nice option would be one-click button to create a full example using example-functions.php. \nedit: it helps if I would read..\n\nI've opened a pull request on the original but haven't heard back in months. \n. Thanks. I changed it because tests were inexplicably breaking. It appears they are working fine now.\n. You'll either need to use a lot of css/wrappers, or create a custom field type akin to the 'address' field type: https://github.com/WebDevStudios/CMB2/wiki/Adding-your-own-field-types#example-4-multiple-inputs-one-field-lets-create-an-address-field\n. Yep, thanks @eriktelepovsky. I've move your solution to core: https://github.com/CMB2/CMB2/commit/519e809427ca18313db79aa238bddd1113ffd77a. @eklingen88 No good reason. I have added them to the wiki.. Complete, https://github.com/WebDevStudios/CMB2/blob/cmb2-rest-api/tests/test-cmb-rest-controllers.php, https://github.com/WebDevStudios/CMB2/blob/cmb2-rest-api/tests/test-cmb-rest-registered-fields.php, and https://github.com/WebDevStudios/CMB2/blob/cmb2-rest-api/tests/test-cmb-rest.php\n. There is no reason that should happen, and it's working as expected for me. I would need to know more. Is this a fresh install? Have you tried deactivating other plugins?\n. @tw2113 I don't think so.\n. php\n$PREFIX_staff_cmb->add_field( array(\n    'name'    => __( 'Membership', 'maier2-admin' ),\n    'id'      => $prefix . 'membership',\n    'type'    => 'wysiwyg',\n    'default' => ! isset( $_GET['post'] ) ? '<ul><li>Membership Bullet List Item 1</li></ul>' : ''  ,\n    'options' => array(\n        'media_buttons' => false,\n        'teeny'         => true,\n        'tinymce'       => true,\n        'textarea_rows' => 3,\n  ),\n) );\n. \ud83d\udc4d\n. Ha good catch! Thanks!\n. the field used for media uploads in the tutorial is a standard text field, modified to be a input of type=\"file\". It is NOT a CMB2 'file' (WP media modal) field as getting that properly implemented on the front-end is an entirely different beast. A standard type=\"file\" field requires no JS/jQuery.\n. Possibly related/helpful: custom-field-types/default-category-field.php, custom-field-types/default-tags-field.php, or https://github.com/jtsternberg/cmb2-term-select.\n. Ugh, that change is pretty annoying, as it requires every thing ever that's using get_terms to write a compatibility shim for older versions of WP. :(\n. @Ipstenu can you test on trunk?\n. \ud83d\udc4d \n. Thanks for reporting @Ipstenu. For those following this convo, @boonebgorges is on it: https://core.trac.wordpress.org/ticket/35381#comment:22\n. On the front or backend? For the field file preview size, you can use the preview_size parameter: https://github.com/WebDevStudios/CMB2/wiki/Field-Types#custom-field-attributes-5\n\nphp\n'preview_size' => array( 100, 100 ),\n. Well, the wiki also has documentation for how to get it on the front-end: https://github.com/WebDevStudios/CMB2/wiki/Field-Types#css-field-class-28 \n. Can you provide the code you're using please? Also what version of WP/CMB2? CMB2 strips slashes when it stores values by default, so if that's not happening for you, there's either another reason why, or we missed something.\n. Nice catch. Remove the $args passed into the method, and I'll merge it in. It's not needed, because the $args are passed to it from the CMB2_Types object.\n. Thanks. Still a no-go. You don't need to pass the $this->args args as they are assumed: https://github.com/WebDevStudios/CMB2/blob/trunk/includes/types/CMB2_Type_Base.php#L86\n. A bit of cleanup and this is merged: https://github.com/WebDevStudios/CMB2/commit/c1718129c5cbf8e4ec6f0f3fac69b6434e3346ea\nThank you!\n. It's not clear to me what you are trying to accomplish with this PR, but I'm not in favor of using a post frame as it adds a bunch of irrelevant UI to the modal.\n\n. Using CMB2 as-is, when I upload a new file via the file modal, it automatically associates that attachment with the post. I'm not sure how yours differs. \n. Sure, I would be interested. As long as the UI is similar (or better) for our use-case.\n. Going to close. Feel free to open a new PR if you are able to make those changes.. The answers to most of your questions can be found in either the project readme, the project wiki, or the provided example-functions.php file. \n\nWhat would be the equivalent filter for CMB2?\n\nBest bet would be to follow the example in example-functions.php and use the box/field registration methods, but 'cmb2_meta_boxes' filter exists for back-compatibility purposes. Generally speaking, any 'cmb_*' filters will now be named 'cmb2_*'.\n\nIf your software cannot be used without adding the plugin from WordPress.org, please let me know...\n\nI would review the wiki documentation.\n. 1. Lines 163-167 of your snippet should be outside of any hook. 'init' is too late. \n2. If you don't plan on using the updated box/field registration API (i.e new_cmb2_box function to create your metabox object, and then create the fields with add_field), then you should not be using the 'cmb2_admin_init' hook, but the 'cmb2_meta_boxes' filter instead.\n3. 'pages'\u00a0=>\u00a0array('page'), should be 'object_types'\u00a0=>\u00a0array('page'),\n. Feel free to use the old version if you're happy with it. Blog post on the change.\n. We have a semi-working example in the snippet library: https://github.com/WebDevStudios/CMB2-Snippet-Library/blob/master/widgets/widget-example.php\n. See response here: https://wordpress.org/support/topic/field-type-taxonomy-select?replies=3#post-8527781\n. Please see this response: https://wordpress.org/support/topic/field-type-taxonomy-select?replies=3#post-8527781\n. I don't think this is still an issue. Can you check the most recent version?\n. This should be fixed with https://github.com/WebDevStudios/CMB2/commit/b7f68222245aee925d556129db88b50707e574dc and https://github.com/WebDevStudios/CMB2/commit/9d9b07851253e178a95f3322ecc272d6b1bc1d6f, but would appreciate confirmation.\n. @janw-oostendorp you tested the diff, or you tested trunk? @tw2113 was mistaken in that that diff was not the complete solution.\n. > Is it not possible to have a date field that actually saves the formatted date to the DB rather than the time stamp anymore\nThat is correct. A timestamp is far more versatile.\nYou can convert a timestamp to any format using date().\nOr alternatively using CMB2 methods:\nphp\n$formatted_date = cmb2_get_field( $cmb_id, $field_id, $object_id )->get_timestamp_format();\nI've updated the wiki. I don't think there's a reason to have a separate line for each since they are the same.\n. Apologies, I have a bad habit of updating the wiki with the changes that are in trunk (not yet released). I plan on pushing the next release tonight, so the wiki will be correct shortly.\n. I pushed the release today, and it's also on wordpress.org.\n. That's correct. If you want group fields to display in the admin column, you'll have to define your own ['display_cb'](https://github.com/WebDevStudios/CMB2/wiki/Field-Parameters#display_cb). It would be impossible to normalize the display of a grouped field in a small post column, so you're on your own if you decide that is necessary.\n. Thank you!\n. Thank you!\n. Hmm, why did you add array|int| to the return comment? $updated will only ever be a boolean, unless I'm missing something.\n. @jamesgol nah, no need, I didn't dig that deep in to update_metadata to verify, but sounds like you're on it. Thanks!\n. I'll take any doc updates you want to send. :)\n. Thank you! In the future, please submit PRs to the trunk branch. More info in the CONTRIBUTING.md.\n. Yah, it's all good though: https://travis-ci.org/WebDevStudios/CMB2/builds/141121919\n. Not until I put out a new release. You'll have to map to trunk directly for now.\n. \ud83d\udc4d\n. The wysiwyg field uses wp_editor and passes the options array along to that function. 'editor_css' is an option for wp_editor. \n. I think it's safe to say that the *_id value is a bug, but the url being saved to the file field is not. (the 'url' => false is a UI thing, not intended to change the way the field works/stores data)\n. Awesome! If I recall, you're pretty good about it, but please do keep the CONTRIBUTING.md in mind when submitting PRs. Thank you!\n. The problem is that doesn't cover the JS side of things, so when you add/remove/sort the groups, that's not going to work out so well. I'd instead suggest doing something like this: https://github.com/WebDevStudios/CMB2-Snippet-Library/blob/master/javascript/group-field-id-match-input-value.php\n. Totally, I definitely see the benefit. My argument was that doing it in PHP-only was kind of a non-starter for me, as it requires a save before anything happens. BUT, i'll check it out w/ your provided example.\n. Hey, just played with this a bit. The replaced titles still 'stick' when the groups are sorted. I think the best bet is to get something like this in core. \n. Hey @BraadMartin, I'm not trying to be a stick in the mud, but I don't see a purpose in adding a filter which is half-broken out of the box. It's nearly ok, but the fact that the titles stay in place when the groups are sorted make this a no-go for me.\n\nIf you're looking for a working solution, I linked to one above.\n. Closing for now, but #706 is open for the feature request.\n. Check out CMB2 Conditionals.\n. If it's a sanitization issue, I'd use the 'sanitization_cb', and if it's an escaping issue, the 'escape_cb'. This seems like enough of an edge case that handling the escaping/sanitization on your side is the right way to go. \n. Interesting. What are you using the hidden field for?\n. I suggest you use adapt this snippet for yourself: https://github.com/WebDevStudios/CMB2-Snippet-Library/blob/master/javascript/dynamically-change-group-field-title-from-subfield.php\n. You might try checking out this extension: https://github.com/jcchavezs/cmb2-conditionals\n. Ok, then you will need to open an issue on that repository, as that is not ours.\n. Not ignoring, just busy. We'll be reviewing soon.\n. Hmm, you don't actually ever enqueue the wysiwyg.js. Is there a reason for that?\n. I see, you've concatenated it, but their is no solution if SCRIPT_DEBUG is enabled. I'm reviewing now, so please don't make any updates.\n. @johnsonpaul1014 Thanks a ton for getting the ball rolling. I've merged your branch in and used it as a (great) starting point. I had to re-think things to make it a bit more performant (there was no reason to destroy/reinit all instances when shifting rows), and fix a few bugs (removing a group high up in the stack resulted in a bad initiation when new rows were added). I also updated the script-loader to properly enqueue the file separately if SCRIPT_DEBUG is enabled. Let me know if you have any questions, and I would love it if you (and anyone listening) would test the new PR before I merge it in to trunk.\n. This is now in trunk and will be in the next release.\n. This looks great, but unfortunately we only accept PRs to the trunk branch. Please review the CONTRIBUTING doc for more info. Also, for the translator notes, lets instead use the _x() functions so we can send the translator notes to the .pot file. \n. The taxonomy fields are not intended to provide an arbitrary list of terms to pick from, but are intended to be a replacement for the default taxonomy metaboxes. I.e. they are meant to set the taxonomy terms on an object. Any other use of these types will be hacky and/or buggy. I suggest looking at building a custom field type for this: https://github.com/WebDevStudios/CMB2/wiki/Tips-&-Tricks#a-dropdown-for-taxonomy-terms-which-does-not-set-the-term-on-the-post\n. Oh wow, well thank you very much for educating me! Looks like I've been using those functions improperly. I'll review this a bit more thoroughly when I get back to my computer, but should be good. Thanks again!\n. Thanks for you contribution @ramiy!\n. I'm afraid you're reporting too soon. is_taxonomy is not in use. You should only open issues for bugs that exist outside of trunk, since trunk is fast-moving.\n. As soon as I can duplicate this issue, it's something I can look into. Right now, it would appear to be an environment specific issue. You may want to try the standard \"deactivate all other plugins and switch to default theme\" to see if that helps narrow down the issue.\n. Related: https://wordpress.org/support/topic/term-meta-is-saved-but-it-doesnt-appear-in-term-edit-screen-later/\n@rogercoathup and @taunoha if you use this PR, does it solve it for you?\n. This should not be occurring. Which version are you using, and please provide your cmb/field registration code (or the bare minimum to reproduce).\n. Rather than doing that, commit it to the trunk branch of the wiki. I maintain that branch w/ pending changes.\n. if you're using the text_small field, use the 'desc' field. (if you don't want styled like a description, @vitaly-safonov is right, you can do 'after_field' => 'minutes',)\n. Hey Mark,\nIt's my intention to make this core functionality eventually, but until then, we have a POC in the snippet library which you can implement: https://github.com/WebDevStudios/CMB2-Snippet-Library/blob/master/javascript/dynamically-change-group-field-title-from-subfield.php\n. Related #219, #683 \n. Thank you so much for your PR. As per our contributing guidelines, can you please create pull requests from the trunk branch? \n. @alvarogois thank you for asking/clarifying. Yes, that's right. The trunk branch is the development branch, and is always ahead of the master branch. For that reason, we don't accept PRs against master, as that branch is generally outdated.\nWhen you fork the repo, you'll have access to all the branches, so you would just create a new branch off of trunk, make your changes, commit, then submit that branch as the Pull Request. Hopefully that helps clarify.\n. I have to admit, I'm pretty ignorant when it comes to translation and transifex vs core translation guidelines. @fxbenard helped me get setup with transifex/wp-translations. Maybe he will have some valuable insight.\n. In the case of this translation, I believe I can merge this (well this being the new PR against trunk), then do a push to transifex so the translation gets saved there as well.\n. @alvarogois That's helpful and useful information. I would love to spend more time looking into the proper way to do this, but will have to wait a bit. In the mean-time, what is your recommended solution? Only accept PRs here? Is there a way to pull translations from translate.wordpress.org?\n. Ok, so based on info here: https://translate.wordpress.org/projects/wp-plugins/cmb2/language-packs\nLooks like we can remove the translations which already exist there? Is that what this PR is, from there?\n. Thanks to @JustinSainton for pointing me to this post: https://make.wordpress.org/plugins/2015/09/01/plugin-translations-on-wordpress-org/\n. I'll be removing the languages for which there are already language packs, so a PR is probably unnecessary. I learned a lot from this, so thanks for all of your input.\n. Ah, that's probably right. Do you think you'd be able to test/confirm that theory?\n. Ok, then sounds like we're back to the recommended solution above, which is to periodically update the translations in the repo with what is in translate.wordpress.org, and only pull changes from transifex for languages that are not on .org. Ugh.. doesn't sound fun.\n. Setting a default value for the oembed field whether it's in a group or not works for me as expected (e.g. it displays the embed when the page loads). It's likely we'll need more information.\n. Thank you for reporting. It's because of the '0' value, but should be fixed in trunk (will be in the next release). In the future, it would be super helpful to us as maintainers if before opening an issue, you were able to test and confirm the issue in the trunk (development) branch. You can see the related issue here: #668\n. Closing, as I believe this to be fixed, but if you're still able to reproduce on trunk, please let us know.\n. Thank you for reporting. Would you care to submit a PR?\n. I use CMB2 everywhere else: https://github.com/WebDevStudios/CMB2/blob/trunk/includes/CMB2_Base.php#L6\n. You can always open a new PR, but i've updated that: https://github.com/WebDevStudios/CMB2/commit/d10688076e979f73a2caf6ab0d2268639bc81541\n. Thank you sir!\n. @tw2113 is right, the taxonomy fields are not intended to provide an arbitrary list of terms to pick from, but are intended to be a replacement for the default taxonomy metaboxes. I.e. they are meant to set the taxonomy terms on an object. Any other use of these types will be hacky and/or buggy. I suggest looking at building a custom field type for this: https://github.com/WebDevStudios/CMB2/wiki/Tips-&-Tricks#a-dropdown-for-taxonomy-terms-which-does-not-set-the-term-on-the-post\n. You might want to see if that's supported by https://github.com/jcchavezs/cmb2-conditionals\n. I'm all for naming conventions. Thank you.\n. Merged. I've added a back-compat shim if anyone is using the string method: https://github.com/WebDevStudios/CMB2/commit/b0792279b658531816e7afb98d7aabe89cd1f78f\n. Thank you, sir.\n. Thank you for reporting!\nAre you saying this is a regression? (and worked with 2.2.1?)\n. The only way I'd be willing to merge this in is if the back-compatibility concerns are addressed. The only way I see that happening is to use a variable filter name with the cmb_id being part of the hook (example: https://github.com/WebDevStudios/CMB2/blob/trunk/includes/CMB2.php#L140). And cmb_id is not guaranteed in this specific method context, so this would likely be better off happening in the add_field method: https://github.com/WebDevStudios/CMB2/blob/trunk/includes/CMB2.php#L1071-L1096.\n. thank you!\n. As @tw2113 said, this is definitely an issue with the core wp_editor() function, and not something to do with CMB2. Also, based on your screenshot and the time associated w/ each of those calls, I don't think that's the source of the slowness, though there is no doubt in my mind that each wp_editor instance will add some loading latency, as there is a LOT going on.\n. Thank you for this submission, and thank you @alvarogois for #709. Now that I understand a bit more about the nuances of translations from wp.org, it will be my goal not to override translations provided through that process. Are the translations provided here, the same as those on wp.org? Because I cannot guarantee that the translations here will not be stomped from the translations on wp.org.\n. Thank you for your awesomely detailed bug report. It should be fixed in trunk, but please re-open if not.\n. I'm not able to replicate this issue. Have you tested on the trunk branch?\n. Ok, interesting. Well, as I stated, I'm not able to replicate. Not sure what I else I can do to test.\n. This should be good. Please test the trunk branch. Unfortunately I just pushed a release today, so will be a bit before this is released (unless I get a lot of reports of this issue). But you should be safe to use trunk as the only difference from master is this change.\n. Thank you!\n. @JayWood you don't want the props on this one?\n. it doesn't run unless SCRIPT_DEBUG is enabled. That's the purpose of the cmb.log method.\n. I agree. I'll remove.\n. There's not a lot of overhead to registering boxes. You should register them, then use the show_on_cb to determine where they should show (get_current_screen should be available in the callback).\n. Use the 'show_on_cb' to conditionally load the meta box execution. \n. Examples: https://github.com/WebDevStudios/CMB2/wiki/Adding-your-own-show_on-filters#example-using-the-show_on_cb-to-limit-the-display-of-a-metabox-unless-metadata-exists\n. If you're still having issues with the latest version, please open a new issue.\n. Closed as duplicate of #198. Please see the relevant discussion there (and the linked commit).\n. Closed as duplicate of #198. Please see the relevant discussion there (and the linked commit).\n. Try using the 'escape_cb' field parameter to determine the value that is returned/displayed. \n. If you want to re-channle the saving, use the 'sanitization_cb' parameter, or one of the filters.\n. I don't think @jquimera is asking about options pages, but instead post meta/fields. If you want a simpler function, you can simply make your own helper function:\nphp\nfunction yourprefix_get_meta( $key ) {\n    return get_post_meta( get_the_ID(), $key, 1 );\n}\n. Yes, this is an unfortunate side-effect of allowing the 'default' field parameter to also be a callback. That functionality is now deprecated in favor of using the 'default' field parameter, and my intention is to remove that functionality from the 'default' field parameter in a few releases, but need to give the deprecation enough time, since we try to be backwards compatible.\nThat being said, I'd suggest using a callback to define your default so that you can bypass the bug:\n``` php\nadd_action( 'cmb2_init', 'yourprefix_register_demo_metabox' );\nfunction yourprefix_register_demo_metabox() {\n$cmb = new_cmb2_box( array(\n    'id'    => 'box_id',\n    'title' => 'Title',\n) );\n\n$cmb->add_field( array(\n    'name'       => 'field_one',\n    'id'         => 'field_one',\n    'type'       => 'text',\n    'default_cb' => 'yourprefix_set_default_to_max',\n) );\n$cmb->add_field( array(\n    'name'       => 'field_two',\n    'id'         => 'field_two',\n    'type'       => 'hidden',\n    'default_cb' => 'yourprefix_set_default_to_max',\n) );\n\n}\nfunction yourprefix_set_default_to_max() {\n    return 'max';\n}\n``\n. This sounds like a compatibility problem. The fields work as expected. Are you getting javascript errors in your console?\n. We cannot use get_current_screen as the context where these methods are used is not always going to be in the admin, or when that function is available.\n. Can you state your justification for making the change?\n. Thank you for updating. Unfortunately, https://github.com/CMB2/CMB2/pull/755#issuecomment-250936318 is still applicable and unresolved. Also, when cleaning up the merge conflicts, you removed some important elements (like the calls towp_unslash()).. And you're saying you're having this issue on the trunk branch?\n. No, I mean the trunk (development) branch here on GitHub. NOT the master branch or the plugin from .org. Please test with trunk. Thank you. \n. Many have reported this as fixing issues with term meta not saving, so merging. Thank you for submitting.. You can provide your own values for a group field by using the\"cmb2_override_{$field_id}_meta_value\"` filter. To demonstrate, I've added a snippet to the snippet library.\nAlso, if you don't want a metabox to save (but want to handle the processing yourself), you can set the metabox config param 'save_fields' to false. You can then use this helper function to sanitize the submitted data, then do whatever you want with that data (save to JSON, etc).\n. The 'cmb2_override_meta_value' is fine, but like other powerful filters in WordPress, make sure you're limiting to only the context you need before making changes, as you don't want to break other plugins's usage of CMB2.\n. It's not clear to me why you would want to check on field type? If you only check based on type, you could hijack other plugin/code that uses CMB2 to generate repeatable groups. Can you explain that a bit more?\n. Groups are not handled the exact same way (as you've witnessed), so you need to do some additional checks:\n``` php\nfunction cppg_override_meta_value( $value, $object_id, $args, $field ) {\n    static $defaults = null;\n// Only set the default if the original value has not been overridden\nif ( 'cmb2_field_no_override_val' !== $value ) {\n    return $value;\n}\n\n\nif ( $field->group || 'group' === $field->type() ) {\n\n    // Get the default values from JSON\n    if ( null === $defaults ) {\n        // Get your JSON blob.. hard-coded for demo.\n        $json = '[{\"description\":\"This is a <strong>description<\\/strong>\",\"image\":\"\\/wp-content\\/uploads\\/2016\\/10\\/default-image-1.jpg\",\"image_id\":663},{\"title\":\"2nd Title\",\"description\":\"This is a second <strong>description<\\/strong>\",\"image\":\"\\/wp-content\\/uploads\\/2016\\/10\\/default-image-2.jpg\",\"image_id\":655,\"image_caption\":\"This is an image caption.\"}]';\n\n        $defaults = json_decode( $json, 1 );\n    }\n\n    $value = $defaults;\n}\n\nreturn $value;\n\n}\nadd_filter( 'cmb2_override_meta_value', 'cppg_override_meta_value', 10, 4 );\n```\nBut again, I definitely question why you would want to do this based on field type (unless you have created a custom field type). How will you guarantee not to mess up other plugin's/code group fields?\n. > it's a complete mystery as to why in my example I was getting into the\u00a0if\u00a0loop, but it wasn't setting the values. If it's an easy explanation I'd appreciate understanding more, but don't want to impose any more on your time if it's complicated.\nIt's because whenever a CMB2_Field object is initiated, it requests that field's value. But in the case of a CMB2_Field object of the type 'group', the value is not used for display, but instead is fetched again by the sub-fields (and the sub-field checks if it's in a group and then parses out the right value for itself, which you can see here, just below those filters).\nBut, you still need to set the value for the 'group' field so that it creates the right number of groups for display. (which is why the condition needs to be ( $field->group || 'group' === $field->type() ).\nLet me know if that demystifies it a bit. :)\nRe: checking for field type vs field ID, another way to limit context is to only add_filter when you know you're in the right context. Sounds like that may be what you are doing.\n. Can you who can duplicate this issue test after adding this rule?\ncss\n.cmb2-element .ui-datepicker select.ui-datepicker-year option {\n  color: #333;\n}\nI'm not sure if specifying a color value on an <option> will work, but please test.\n. After testing with browserstack, I was able to confirm that the above rule fixes the issue. Please test with trunk and report back if you are still seeing the issue.\n. After testing with browserstack, I was able to confirm that the above rule fixes the issue. Please test with trunk and report back if you are still seeing the issue.\n. Yes\n. This has been a problem (and annoyed me) for a while. Thanks for reporting, and we should be good to go here now.\n. That is a good question.\n. It's entirely possible your data is exceeding your php.ini's post_max_size. You might try increasing that to see if it solves it.\n. then I'm not sure. Feel free to post your boxes/fields so we can review. . Thank you sir.\n. I like it. Please do submit a PR. \n. The rest_no_route error will be seen if no boxes are registered with the 'show_in_rest' param. This is the case for you as you are using the cmb2_admin_init hook to register your box/fields. To use the REST API with a box, it must be hooked to the cmb2_init hook instead.\nI'll update the REST API docs to document this fact.\n. I've updated the docs, so please let me know if it is more clear.\n. And I've also updated the example-functions.php file to reflect this fact.\n. You need to update 2 fields:\nphp\nupdate_post_meta( $post_id, 'employ_cv', $file_url );\nupdate_post_meta( $post_id, 'employ_cv_id', $file_id );\n. CMB2 groups are stored as one big array in one meta row. You need to build the whole group array and then use update_post_meta, not add_post_meta.\n. thank you!\n. Yep, as @tw2113 mentioned, this is likely resolved in trunk. Please test and let us know. Thank you.\n. I'm going to release a quick bug-fix update today.\n. Closing, as this has been fixed, and a release pushed out.\n. Yah, the example on \"Adding your own\" should really be removed and a link to the \"Display Options\" be placed there instead. Good catch and good call. Would love it if you'd be willing to update. Thanks.\n. This would be a pretty great custom field type, but it's not something we would include in CMB2 core. If you end up developing a custom field type, let us know.\n. Fixed in https://github.com/WebDevStudios/CMB2/commit/f8e7291fd99dd010c90003a13398957b088db5b0. Thank you for reporting!\n. @deeptiboddapati This should be fixed. Feel free to test the trunk branch.. Yes, this is because the wysiwyg output is handled by the native WordPress wp_editor function, and we are not building the element as we are the others. If you're looking to modify the field output, you can use the native WP filter, 'the_editor'.\n. Thank you sir!. Ah interesting. Nice catch, and thank you!. Thanks for reporting. I've actually changed it to span if there is no 'name' field param. It's still needed as the title field is intended to provide an anchorable section of the metabox (so, needs an ID).. It's here: https://github.com/WebDevStudios/CMB2-Snippet-Library/tree/master/custom-field-types/address-field-type\nBut he's saying the issue should be posted here: https://github.com/WebDevStudios/CMB2-Snippet-Library/issues. You could do something like this: \nphp\nadd_action( 'admin_footer', function() {\n    ?>\n    <script type=\"text/javascript\">\n        jQuery( '#YOUR_METABOX_ID input:required' ).each( function() {\n            jQuery( this ).after( '<span style=\"color:red;padding-left:5px\">*</span>' );\n        } );\n    </script>\n    <?php\n} );. That's because during save_post there is no $_GET['post']. You need to check for the post ID in $_POST, and it's a different key.. If I recall, it might be $_POST['ID'].. So you'll need to check for both.\n. Right, again, that's because when it goes through the save/update routine, your $post_id is empty, and so is your $post_meta, so your dynamic fields are not registered at the time of saving.\n. This is a true statement. The SVN repo is somewhat neglected in its structure. To be honest, I'm not sure I'll ever get around to fixing the tags. I would instead recommend you use the official composer package, https://packagist.org/packages/webdevstudios/cmb2.. No, the only thing stored in the database is the field value.. This is documented in the wiki: https://github.com/WebDevStudios/CMB2/wiki/Tips-&-Tricks#setting-a-default-value-for-a-checkbox. Looks awesome, nice work!. Sure, thanks for the resource.. Hey @anhskohbo, thank you for submitting. I'm slammed for the next month or two. I'll ping @gregrickaby or @coreymcollins to see if they might have an opportunity to review this PR.. I like it @anhskohbo, nice work. We'll see what kind of feedback we get when people update CMB2. :). Hmm works as expected for me and have used it for several different projects. You may need to test after deactivating all other plugins to see if it's a plugin conflict.. No, that wouldn't matter at all.. hmm, the way this PR is structured with the massive white-space changes, it will be extremely hard to review. Can you make the scope of this PR very narrow, and open additional ones for the white-space changes, etc? JS hint globals definitions are not needed as they are handled in the gruntfile.. That is a known issue, unfortunately, but the workaround is documented here: https://github.com/WebDevStudios/CMB2/wiki/Troubleshooting#callable-field-parameters. You can set the preview size using the aptly named preview_size field parameter: https://github.com/WebDevStudios/CMB2/wiki/Field-Types#custom-field-attributes-5. preview_size does work on file type, it's just not documented unfortunately.\n\nAnd that doesn't actually guarantee that a Wordpress generated thumbnail is utilized.\n\nWhen you upload/select an image from the media library, it pulls in the full image size, yes, but when you save/reload, it uses the requested size. So you're page-load should not be affected.. > fetch from media library after it is uploaded?\nWhat is the purpose? Not sure I understand.\n\nAlso, could there be any chance of using the Blog Settings for image thumbnails by default?\n\nYou can simply specify 'post-thumbnail' as the preview size: 'preview_size' => 'post-thumbnail'\n. Thanks for submitting. Can you explain to me the scenario that makes this necessary? Not sure I understand the li tag wrapper thing.. This update should fix the issue. I've introduced a shared class that it targets instead of the li element.. You'll probably need readonly instead of disabled. . It's not built in but something I'd like to eventually add, especially for certain field types which make sense to do so (date fields, checkboxes, text fields, etc). . @villeristi yes, i have thoughts, they are in the review. Please see above.\nedit: I just realized the review was left as \"pending\" so you weren't able to see it. whoops!. Thank you for submitting. We already have a select2 field type highlighted on the readme:\n\nI wouldn't mind adding yours if you can outline any differences from the other one.. It does, but unfortunately it's not an ajax solution. Does yours work with ajax-search?. \ud83d\udca5  thank you Mr. @norcross!. CMB2 does not do any client-side validation. To do that, you might want to look into hooking something up: https://www.sitepoint.com/10-jquery-form-validation-plugins/. Use get_term_meta instead of get_post_meta.\n. This is great, and the bug report, steps for reproducing, etc were all very clear, and the PR is focused. This makes for an easy merge. Thank you!. I added an example to the wiki for specifying file types for a file (or file_list) field: https://github.com/WebDevStudios/CMB2/wiki/Field-Types#file. This is likely similar to #768. Please review that issue.. Pretty sure this is a duplicate of #721, which was addressed in https://github.com/WebDevStudios/CMB2/commit/2bf2b7063bf6f3a63911c57ba148e800f1b8c59e. Are you sure you tested with the trunk branch?\nThat is why the issue template contains the text, \"I have confirmed I can reproduce this issue on the trunk branch\". But if you ARE able to reproduce on the trunk branch, let us know. . Awesome, thanks for the quick turnaround. I won't get a chance to test this till next week, but feel free to keep bumping this thread if I don't get around to it. I'd like to get this in the next release. No worries about the compiled assets. I can take care of those. . Reviewing/testing this now. Please don't push any more changes as I'm starting to clean up, etc. If you have other changes to propose, let me know, and i'll push up the new branch to collaborate on.. Thanks a ton for your work @Cai333. This has been merged to trunk, and will be in the next release which I'll try to get out soon.. @tw2113 is right, something like:\n'escape_cb' => array( $this, 'my_escape_callback_method ). Fixed with https://github.com/WebDevStudios/CMB2/commit/5870a5acab64166b1f4ca848bc42c59ed5a96ed1. > I think it's trying to act on the <select> among others, instead of the the <option> properties.\nThanks for digging in @tw2113. This is correct. I needed to target the child elements as well. Should be good now.. Glad you've found it helpful. No credit is required but if you feel inclined, any of the ways you mentioned sound reasonable. . Only the most recent version that exists in the system will be loaded. For more info, I've abstracted the loader into it's own library, and the readme should explain it well (but let me know if not!): http://jtsternberg.github.io/wp-lib-loader/. For your first question, just like with WordPress core, or any other plugin you download/use, you should never edit the core files of CMB2 (unless you're in a development version working a patch). As you outlined, it is not a reliable practice, and you risk breaking CMB2 for other things depending on it, or having your patch be ignored when a new version of CMB2 is released.\nAs for the second, we take Pull Requests all the time, and would be happy to look at one that addresses any of these issues. If you want to see if anyone has begun work on them, feel free to look through the pending pull requests.. To do that, you'll likely need to create your own custom field type, https://github.com/WebDevStudios/CMB2/wiki/Adding-your-own-field-types. Hey @JayWood, i'll probably need more info about the context you are using this. The taxonomy fields all depend on the default WordPress hooks to store the terms (wp_set_object_terms()). This is accomplished by using the same field names as the default WP term fields. Any context outside of the post new/edit screens, they will likely fail to be associated.\nThe conditional you pointed to is simply whether the sanitized values are returned, a do not reflect anything being saved.\nI could see the need to update the taxonomy fields to be able to set the object terms when the default saving mechanisms are not possible, but will need to introduce some hairy logic to determine if/when it's needed.\n^ None of that is true. My memory failed me.. To be clear, CMB uses the tax_input $_POST namespace so that WP will takeover in edit_post(): https://github.com/WordPress/WordPress/blob/master/wp-admin/includes/post.php#L328-L372\n^ Also not true.. huh, I think I need to re-review how this works, and test trunk. You bring up some good points, and i'm trying to remember how it all works.. > It seems the conditional here is just backwards.\nThat was it. I'm a dummy. Thank you for reporting and being so thorough!. Ha, sometimes a little too much!. The featured image is simply a post meta field which stores an attachment ID. If you simply want to replace the default featured image field with a CMB2 field, but continue using the frontend thumbnail functions (has_post_thumbnail(), get_post_thumbnail_id(), the_post_thumbnail(), etc), you can do so by using _thumbnail as your field id, and the _thumbnail_id key (the featured image meta key) will automatically be populated with the attachment ID.. The input you are showing is not a CMB2 input, and CMB2 does not use type=\"date\". Looks like you'll need to take your support request to the developer of your theme.. You might look at this addon plugin by @jcchavezs: https://github.com/jcchavezs/cmb2-conditionals. It's actually better to do this at the field level (which you can do with data attributes) than with filter, as the filter will alter ALL fields using CMB2, and may affect other plugins, etc. To do the same at the field-level:\nphp\n$meta->add_field( array(\n    'id'          => $prefix . 'duracion',\n    'name'        => 'Duraci\u00f3n',\n    'type'        => 'text_time',\n    'time_format' => 'H:i:s'\n    'attributes' => array(\n        'data-timepicker' => json_encode( array(\n            'stepMinute' => 1,\n        ) ),\n    ),\n) );. Just FYI, Any of the \"pickers\" (date, time, color) can override the JS parameters in this way.. Ah, that's interesting, I thought it would merge the 2, but appears to not be the case.. This is working for me. I believe it was fixed recently. Please review your test case, and feel free to reopen PR if you find it's still broken for you (on the develop branch).. It works, thanks!. Travis is telling me that this fails some unit tests, so there's likely more to investigate here. . 2.2.4 has just been released.. Is there a particular field configuration that causes this for you?. @timothyjensen since you have the optimal testing scenario, can you test by changing those lines to this:\nphp\nif ( is_numeric( $value ) ) {\n    $value = is_float( $value ) ? floatval( $value ) : intval( $value );\n}. Can you please test #1013?. I added some leading zero unit tests as well: https://github.com/CMB2/CMB2/commit/c2c4d4757f3f1657f493d2ef9e860ea5291975ca\nThanks for testing, i'll merge it in now.. That's actually exactly what the sanitization_cb and escape_cb field parameters are for. To handle sanitizing your field, and saving/splitting off other values, etc. Keep in mind, if you use these, CMB2 won't handle the sanitization/escaping at all, so you will need to do that.. Do you see the issue occurring for the other locations above the editor? \u00a0form_top,\u00a0or before_permalink?. hmm, that DOES look like a missing closing tag. Ok, i'll look into it.. This has been fixed (in trunk).. Very cool resources!. Thanks for the report. Will be in the next version. Feel free to test the trunk branch.. There needs to be another way to determine this. Currently, this PR causes images to be processed as files: http://b.ustin.co/lg5j. Played with this a bit. I think it would be more ideal to use the svg as an image and output the preview (and workaround the \"size\" checks). . Please test this branch as I've attempted to fix the svg image display: https://github.com/WebDevStudios/CMB2/tree/fix-svg-display. I don't like to include things that are just re-hashes of an existing plugin. Can you explain more why I would include yours, or better yet, why you wouldn't just pull request against the existing plugin that you forked?. Thanks!. This is a duplicate of #871. It is a confirmed bug, and we'll be addressing soon.. Nice work, and thank you!. Thank you for the detailed description of the issue. Should be good in trunk.. Thanks for the heads up. It is actually documented in the Field Types page (here and here), but should also be added to the Field Parameters page.\nAs it is a wiki, please feel free to contribute/update that documentation.. You can already modify the term name by overloading the $term-name property using the get_terms filter. It will be a bit more work, but since it's already possible, at this point, i'm not inclined to add another filter. There are also more in-depth ways to modify this behavior for your own use-case by specifying your own 'render_class' (described here: releases/tag/v2.2.4).\nAnd finally, it's not a good idea to modify the core of the plugin, for normal reasons, but also because there is no guarantee YOUR version is the one that will be loaded (for more details on that).. The field's 'attributes' property will be transferred as input attributes, so there's no reason you couldn't create a range field.\nphp\n$cmb_demo->add_field( array(\n    'name' => __( 'My Range Field', 'theme-domain' ),\n    'id'   => $prefix . 'range',\n    'type' => 'text',\n    'attributes' => array(\n        'type' => 'range',\n        'min' => '0',\n        'max' => '100',\n        'step' => '10',\n    ),\n) );. Possibly consider this custom field type: https://github.com/mattkrupnik/cmb2-field-slider. Also, something like this works:\nphp\n$cmb_demo->add_field( array(\n    'name' => __( 'range_type', 'cmb2' ),\n    'id'   => 'range_type',\n    'type' => 'text',\n    'attributes' => array(\n        'type' => 'range',\n        'min' => '0',\n        'max' => '100',\n        'onchange' => 'document.getElementById( \\'range_type_value\\' ).value = this.value;',\n    ),\n    'after' => function( $args, $field ) {\n        $value = $field->value ? absint( $field->value ) : 50;\n        echo ' <input type=\"text\" disabled readonly style=\"background: #fff; color: #32373c; width: 3em;\" id=\"range_type_value\" value=\"' . $value . '\" />';\n    },\n) );. hmm, maybe try setting the 'escape_cb' to false? https://github.com/WebDevStudios/CMB2/wiki/Field-Parameters#escape_cb. I just added a textarea_code to my test site w/ the site options, and it works perfectly (saved it many times). Maybe there's something else going on on your end.\n. contact_page_metabox is the id of your metabox, not your field. Where is the ->add_field bit? The 'id' in THAT array is what you need in your get_post_meta call.\nAs always, please provide your entire box/field config when opening an issue.. You tried this? Because your snippet above still shows get_post_meta( get_the_ID(), 'contact_page_metabox', true ).\n```php\n<?php \n    $address = get_post_meta( get_the_ID(), '_heelas_contact_addresses', true );\n    print_r($address);\nforeach((array) $address as $key => $entry ){ \n$title = $phone = $email = $physical = $gmaps = ''; //Set all the variables\n\n?>\n```. This needs a bit more explanation. (You can read more in the wiki's troubleshooting section)\nThat deprecation notice is called when the value of 'default' is a php callable function. Since next() is callable, CMB2 thinks you are trying to use the 'default' param as a callback (because that was previously supported, but is no deprecated).\nThe fact that CMB2 would mistake standard text for callable functions is exactly why we deprecated that method, and the 'default_cb' is the required parameter for setting a default value via a callback.\nThat being said, I can't remove that functionality (allowing a callback for the 'default' parameter) for a few releases because it will break backwards-compatibility, and I need to let the deprecation soak for a while, hopefully causing developers to update their code.\nAfter a few releases, I will remove the functionality that allows 'default' to work with a callback, and you will no longer have issues like this.\nBut until then, as a workaround, you can set your default with a callback:\n```php\n$cmb_demo->add_field( array(\n    'name'       => esc_html__( 'Test Text', 'cmb2' ),\n    'id'         => $prefix . 'text',\n    'default_cb' => 'yourprefix_return_next', // function should return a bool value\n) );\n...\nfunction yourprefix_return_next() {\n    return 'Next';\n}\n```. Since you have the attachment ID at that point, you could make a request back to the attachment endpoint to get that information, I assume. It's a good idea, and something I'd like to implement, but probably won't be a huge priority.\nAlternatively, you could use the cmb2_rest_prepare filter to prepare the data.. Hoping wp phpcs exceptions this... we'll see if any movement.. might as well.. use 'show_on_cb': https://github.com/WebDevStudios/CMB2/wiki/Field-Parameters#show_on_cb\nFeel free to reopen if you encounter other issues.. \ud83d\udc4d . thanks!. > ... wrong hooks order that needs to be solved at CMB2.php\nThis is an excellent point. Would appreciate a separate PR to resolve that order, if you are up for it. If so, please also add a changelog entry, similar to this: https://github.com/CMB2/CMB2/commit/a03b471441172a7ba74811f45792872682bf967b (since it is a backwards-compatibility concern).. RE: this PR, i'm not super sure this is the way to handle this. Ideally, we could do something with CMB2_Field:peform_param_callback().. Reviewing too. Let's move kses_args() to CMB2_Base, so it's accessible to CMB2_Field, etc.. Thank you!. This looks like a possible fix, but I will need to test for side-effects. Are you familiar with unit tests? It would be good to write a unit test that verifies this functionality is broken until this patch is applied.. Thanks for this @desrosj.. This is a neat concept, but since there is no JS equivalent, it is half-broken from the start. Once you make any changes to the ordering or add groups, this starts to get wonky.. If you're simply looking for something custom, you could adapt this snippet to update the group titles to whatever you want: https://github.com/CMB2/CMB2-Snippet-Library/blob/master/javascript/dynamically-change-group-field-title-from-subfield.php. That would be awesome! The main thing to look out for is how CMB2 fields can be used in many many different contexts, so it's important to test all of them. For example:\n\nMetaboxes\nMetaboxes in the sidebar\nUser fields\nTerm fields\nOptions pages\nOn the frontend (no admin styles)\nEtc?. Agree with @tw2113. Please issue a clean PR against trunk.. To be clear, this is not a specific issue with CMB2, and can be reproduced by simply calling update_post_meta with your value:\n\n```php\n$meta_val = '[{\"content\":\"This is a \\\"some\\\" content\"}]';\nupdate_post_meta( get_the_ID(), 'some_meta_key', $meta_val );\n$meta = get_post_meta( get_the_ID(), 'some_meta_key', true );\necho '$meta: '. print_r( $meta, true ) .'';\n// Prints: [{\"content\":\"This is a \"some\" content\"}]\n```\nThis is because WordPress itself calls wp_unslash inside of update_meta_data: https://github.com/WordPress/WordPress/blob/master/wp-includes/meta.php#L167 \nSo I'm a bit hesitant to make this change across the board, as I am not positive of what unintended consequences there may be. Any thoughts on that?. Also, I understand this is a question/issue/bug report regarding CMB2 core, but if you are looking to correct this for a single field, you can do so with the 'sanitization_cb' field parameter: \nphp\n$cmb->add_field( array(\n    'name'            => __( 'Test Text', 'cmb2' ),\n    'id'              => '_yourprefix_demo_text',\n    'type'            => 'text',\n    'sanitization_cb' => 'sanitize_text_field',\n) );\nWhich means it's bypassing the CMB2_Sanitize stuff. So yah, it might make sense to move the stripslashes_deep from CMB2_Sanitize::__construct() to CMB2_Options::set() instead so that it only applies to non-meta data.. Ok, can you test trunk?. Looking at the commit history, @clifgriffin introduced this in 337874f46dd70dd43e7b29a9d8faa10501e0f48f to address something with magic quotes, it looks like? Clif, do you recall what the issue was? . @clifgriffin i think we got the slash puzzle worked out. I mainly pulled you in as your commit message referenced magic quotes, not slashes. So I am hoping that rings a bell for you and maybe you recall something specific to that. . @leewillis77 the most important example: \u00af\\_(\u30c4)_/\u00af\n@clifgriffin see https://github.com/CMB2/CMB2/issues/981#issuecomment-307113546 and https://github.com/CMB2/CMB2/commit/c325d63aee8c36095c66564d56d24c40f96ccd99\nAlso, we have a ton of unit tests, and they all pass with both solutions (which means I should create a test that fails using the old method...), but I guess we'll have to wait and see if anyone runs into a magic quotes issue.. In chrome, I am not seeing that issue. If I do the following, it sets the object property on both variables, media.frames[ media.field ] and modal as they are both simply references to the object.\njs\njQuery( function( $ ) {\n    $( document ).on( 'cmb_media_modal_init', function( evt, media, cmb ) {\n        media.frames[ media.field ].test = 'testing';\n    } );\n});\nI suppose it's possible it may work differently in different browsers?\nBut if you're looking to pre-init a frame instance, you can already do that manually via something like this:\n```js\njQuery( function( $ ) {\n    $( document ).on( 'cmb_init', function( evt, cmb ) {\n        var fieldId   = '_yourprefix_demo_image'; // The ID of the field whose frame you want to modify.\n        var fieldData = $( '#' + fieldId ).data();\n        var isList    = true; // true if 'file_list', false if 'file'\n    // Pre-init our specific frame\n    cmb.media.frames[ fieldId ] = wp.media( {\n        title: cmb.metabox().find('label[for=\"' + fieldId + '\"]').text(),\n        library : fieldData.queryargs || {},\n        button: {\n            text: window.cmb2_l10.strings[ isList ? 'upload_files' : 'upload_file' ]\n        },\n        multiple: isList ? 'add' : false\n    } );\n} );\n\n});\n``\n. The 2nd solution I posted is the only way you'll be able to modify theframeattribute, because that attribute is used within thewp.media` function to determine which type of frame object to create. You could also just stomp out the existing object with your own created frame.. Ok, after playing with this even more, it became apparent what you were saying/asking for. As of 229213a241a1c049c5ba1c47aa176823ea6a9b21, this should be good.. Reading the docs to this method should be helpful: https://github.com/CMB2/CMB2/blob/trunk/includes/CMB2_Utils.php#L440-L488\nTo be clear, the date format you should provide to the 'date_format' field parameter is the php date formats, not JS date formats. That method does the php->js translation work.. Well, the changelog entry is accurate, as that feature was introduced pre-cmb2, and so those hook/event names were accurate. See https://github.com/CMB2/CMB2/commit/f6e320f.\nIdeally, we need a wiki page about interacting w/ the JS stuff, and the available events.. Closing though, as issue is not actually an issue.. It's a start!\nhttps://github.com/CMB2/CMB2/wiki/Javascript-API. You will need to write unit tests to prove/test your scenario.. I just ran the tests you wrote with and without the changes you made in includes/CMB2_Options.php, and they all pass either way. To properly test your changes, at least 1 of your assertions should fail without your patch. Otherwise, there is no reason to make the change. Make sense?. Thank you for your PR. I have actually merged it to get your unit tests (and given you props), but I reverted the Cast variable changes, as they are actually causing incorrect results. I have written another unit test (and moved them all to tests/test-cmb-options.php) that asserts that an empty option value is still cast to an array (as it should be). When I apply your patch, those tests break, so I'm not sure what the intention of your patch, but it breaks the way CMB2_Options should work.. Ah, now I understand! ed2e58f should address that specific issue. Thank you for providing more info/clarification.. You can already override the render callback: https://github.com/CMB2/CMB2/blob/develop/example-functions.php#L200\nClosing unless a compelling argument can be made for needing this filter instead of using the available field parameter, render_row_cb.. Works for me. thanks!. In the future, please submit pull requests to the trunk branch.\n. Thank you for reporting @allysonsouza. Fixed in trunk and will be in the next release.. Wow, this looks really great! I'll give it a test run.. Thanks a ton! This is going to be great!. Thanks for putting in this awesome effort. I noticed @import \"partials/sidebar_placements\"; was removed, so I did a test by moving a test metabox to the side. It definitely seems like there are some unintentional regressions with this update, namely that the fields are very compressed without a clear line of delineation between them. \nBefore this update:\n\nAfter:\n\nCan you compare these and explain the rationale for the changes, or fix it?\nObviously, keep in mind that not everything looked great even before, I'm most concerned about anything that would be considered a regression.. Hey @anhskohbo, just a friendly nudge. Would love to get some of this cleanup in, as well as continue work on #1055. I'm sure you're a busy guy, so no rush of course.. Yes, it\u2019s time. \ud83d\ude42. Thank you for reporting. Should be fixed in 2.2.5.2.. @tw2113 is right, you should be using the options_cb parameter: https://github.com/CMB2/CMB2/wiki/Field-Parameters#options_cb. Nice, thanks!. This has been merged. (via merge --squash). Can you provide your box/field config which causes this issue for you?. Specifically wondering which object type this is registered for.. Nevermind, got it sorted, and tests added. Thank you for the PR.. @ocean90 done.. Would you be able to add a test to supplement the existing slashes test? . Thank you sir.. Thanks!. The timepicker addon only handles the timepicker. It is an addon to the jQuery datepicker and has nothing to do with the month view (including the first day of the week). There is almost no chance we will be changing the datepicker. Also, you can definitely change the start day. You can modify the datepicker attributes as documented here.\nYou would use the firstDay option:\nphp\n$cmb_demo->add_field( array(\n    'name' => __( 'Test Date Picker', 'cmb2' ),\n    'id'   => '_yourprefix_demo_textdate',\n    'type' => 'text_date',\n    'attributes' => array(\n        'data-datepicker' => json_encode( array(\n            'firstDay' => 1,\n        ) ),\n    ),\n) );. Most of that class is from the old theme-options snippet. With the last update, you can now replace most of that by registering the cmb2 box with a 'options-page' object type, and declaring the option key. An example can be seen here.. Thank you @rogerlos, I'm excited to check this out and I can see you put in a ton of work. I have a lot going on right now, so I won't be able to get to this yet, but plan on it soon!\nI do notice that there are conflicts with trunk. Can you please pull in the trunk branch to make sure you have the most recent updates?. Sorry for the delay in review. This is a pretty huge change, and I'm not sure I can digest it all in one go. Is there any possible way to split this into a few PRs to incrementally change things? I know you already put in a ton of work and I'm asking for even more. I sincerely apologize, but again, asking a project maintainer to swallow a chunk this big is... asking a lot. :) I appreciate your offer to maintain the additional code, that is significant. \nif you haven't yet, can you join our slack where we can discuss further? https://cmb2.slack.com. > When the repeatable group field is empty (all groups are removed) a null value is sent\nWhen you remove the last group, it empties it, so there is always at least one group with empty fields, and the resulting value looks something like this:\n$saved[ $field_group->index ]: Array\n(\n    [title] =>\n)\nCan you provide your box configuration you used which caused this issue? I can't imagine a scenario where null would be the value at that point in the execution.. Also, the tests are failing (missing a closing ): https://travis-ci.org/CMB2/CMB2/jobs/275383447), and the PR changes are not following the WordPress/CMB2 code standards.. For the manual setting of the timepicker to 11:59, you can override the default CMB2 'stepMinute' value (which is 5), by doing something like this:\nphp\n$cmb_demo->add_field( array(\n    'name' => __( 'Test Time', 'cmb2' ),\n    'desc' => __( 'field description (optional)', 'cmb2' ),\n    'id'   => '_yourprefix_demo_time',\n    'type' => 'text_time',\n    'attributes' => array(\n        'data-timepicker' => json_encode( array(\n            'stepMinute' => 1,\n        ) ),\n    ),\n) );. Ok with https://github.com/CMB2/CMB2/commit/0b010a0a69777d94df310f0e02a348c8fac07c95, clicking \"done\" now will set the field to the default value.. > can you please include this feature in the (primary) plugin itself\nI'm not sure the issue, but this is fairly trivial to do. E.g.\nphp\n$cmb_demo->add_field( array(\n    'name'    => __( 'Image Radio', 'cmb2' ),\n    'desc'    => __( 'Use images for the radio button labels', 'cmb2' ),\n    'id'      => '_yourprefix_demo_radio_images',\n    'type'    => 'radio_inline',\n    'options' => array(\n        'img1' => '<img src=\"http://via.placeholder.com/350x150/E8117F/ffffff?text=Image%201\" alt=\"Image 1\" title=\"Image 1\">',\n        'img2' => '<img src=\"http://via.placeholder.com/350x150/f9a82f/ffffff?text=Image%202\" alt=\"Image 2\" title=\"Image 2\">',\n        'img3' => '<img src=\"http://via.placeholder.com/350x150/49aed7/ffffff?text=Image%203\" alt=\"Image 3\" title=\"Image 3\">',\n    ),\n) );. @tw2113 wysiwyg field types will not work with the repeatable flag, but they should work fine in a repeatable group. . @mclblock are you trying to use on a post-type that does not have editor in the supports array? It's possible that is the cause of the problem.. I'm still not able to replicate the issue. Can you test after disabling other plugins?. I lied (it helps when you \"save\" after you toggle the Disable the visual editor setting). Pushing up a fix shortly.. I copy/pasted your code, and I see 1 as the default value:\n. Sorry that is a custom/display/implementation question, and is not suited for a Github issue. I suggest going to Stackoverflow or WordPress stack exchange.. Thanks. Closing as this should be fixed in the most recent release.. The reason the value is not populating is because the object_id and object_type query parameters are incorrect.\nThey should be:\n?object_type=options-page&object_id=myprefix_options\nnot\n?object_type=page&object_id=name_hotel\n. The phpunit tests are failing on this. Can you investigate? . Instructions for getting tests running: https://github.com/CMB2/CMB2/blob/develop/CONTRIBUTING.md#creatingrunning-tests. You will need to open an issue on that repo.. Yes, if you take this line and add it this group field here, it will work as expected.. It was not possible, but just pushed an update to enable this feature. I'd encourage you to proceed with caution when using the callback. Unless you keep it close to the original callback, you're likely to break something with the repeatable/sortable functionality.. If you don't want to sanitize out unsafe tags (scripts/styles), you can set the sanitization_cb to false, but for hopefully obvious reasons, it's usually not recommended unless you trust those who will be updating that content.\nphp\n$cmb_options->add_field( array(\n    'name' => __( 'Edit Subscriber Widget', 'swt' ),\n    'id'   => 'sub_widget_text',\n    'type'    => 'wysiwyg',\n    'options' => array('wpautop' => false,),\n    'sanitization_cb' => false,\n) );. Welp, it's probably time we start a Gutenberg Compatibility label. Thanks for reporting!. @uicestone care to submit your updated .mo and .po files as a pull request?. Nice, thanks!. Yes, this is the oembed that youtube itself provides to WordPress. CMB2 does not generate this.. Good catch. I have noticed this too, but haven't had the time to dig in. Your suggestion looks like a good one. I'll dig into it.. Yes, that is now possible! See the example functions file for a demonstration: https://github.com/CMB2/CMB2/blob/trunk/example-functions.php#L687-L720. The add_theme_page bit is not helpful. That is specific to themes, but CMB2 can be used for many kinds of projects, and options pages be added to any menu item.\nThe translations are all strings that live in WordPress, and therefore, we are depending on the WordPress translation files to kick in instead of requiring our much more limited set of translation files to be used.\nIf Theme Check has a repo, you may want to open an issue there with these details.. If we limit CMB2 to only use add_theme_page, then it will severely limit the usefulness of the tool. Again, this probably should be brought up with themeforest or the theme checker.\nRe: translations, I completely understand. Perhaps reviewing this stackoverflow answer will help explain. The strings in question are all strings that are used in WordPress core. I am very intentionally NOT adding the 'cmb' text-domain, because I do not want it to use CMB2 plugin translations, but the WordPress core translations instead.\nRe: esc_html__() and esc_attr__, I will be happy to look at a pull request if you are up for it.. @tw2113 I assume you mean in the codebase, via documentation? If so, I'd be happy to look at a pull request if you're up for it.. This is currently possible using the before form hooks:\n```php\n$cmb_options = new_cmb2_box( array(\n    'id'           => 'groupsboxid',\n    'title'        => 'Groups',\n    'description'  => 'Option to customize your groups',\n    'object_types' => array( 'options-page' ),\n    'option_key'   => '_yourprefix_theme_options', // The option key and admin menu page slug.\n) );\nadd_action( \"cmb2_before_options-page_form_{$cmb_options->cmb_id}\", function( $object_id, $cmb ) {\n    if ( $cmb->prop( 'description' ) ) : ?>\n        <?php echo wp_kses_post( $cmb->prop( 'description' ) ); ?>\n    <?php endif;\n}, 10, 2 );\n``\nNot sure there's any justification for adding this inline.. If the output location is important (or anything about the markup), you can use the'display_cb'` parameter to override the default form output. https://github.com/CMB2/CMB2-Snippet-Library/blob/master/options-and-settings-pages/custom-display-callback.php#L28-L45\nThe main point being that this can be accomplished multiple ways, and I'd rather not add another parameter that is applicable only to options page boxes. . Would you be up to converting this to make the properties accessible via __get instead? It reduces the chances of breaking things as the key won\u2019t be inadvertently stomped or changed. . E.g. https://github.com/CMB2/CMB2/blob/trunk/includes/CMB2_Base.php#L477. You can define custom 'show_on_cb' parameters for your fields: https://github.com/CMB2/CMB2/wiki/Field-Parameters#show_on_cb\nTo modify the example in the docs, it would be something like this:\n```php\n$cmb->add_field( array(\n    'name'       => 'Test Text',\n    'id'         => 'wiki_test_text',\n    'type'       => 'text',\n    'show_on_cb' => 'cmb_only_show_field_for_posts', // function should return a bool value\n) );\n...\n/*\n * Only display a field if the current user is 1\n * @param  object $field Current field object\n * @return bool          True if current user's ID is 1\n /\nfunction cmb_only_show_field_for_posts( $field ) {\n    return 'post' === get_post_type( $field->object_id );\n}\n```. Just pushed the release. You should see 2.2.6.1 available in your WP dashboard.. Copying @daggerhart who is interested in helping. You bring up a good point. I will create a new branch and stub out the merge, then you can have something to build off. I should have done that yesterday. :). OK, so new branch is up and I quickly stubbed out what a merge would look like, though I haven't tested it at all: https://github.com/CMB2/CMB2/tree/associated-objects-field\nPlease do your PRs against that branch.\n@daggerhart would LOVE some help with you with testing and getting it to work initially and any of the todos you want to tackle: https://github.com/CMB2/CMB2/blob/d632d759a655057403cf51da2070ac10ce6e753b/includes/types/CMB2_Type_Associated_Object.php#L5-L10\n@anhskohbo Until it's actually working, as @daggerhart mentioned, it's probably best to work in the plugin first: https://github.com/CMB2/cmb2-attached-posts, and we can get the updates folded in.. Ok, did a bit more work.\n- [X] Started a PR (#1056) for more visible tracking of changes\n- [X] Updated the css selectors to properly style the field. @anhskohbo this means you can probably start playing w/ cleaning up the UI on this branch rather than the plugin (if you haven't started)\n- [X] Updated the field type. The type is associated_objects.\nAlong with checklist in issue description, still need to:\n- [x] Fix the JS -- currently not working. Not opening the search modal\nTo test, you can use the example config: https://github.com/CMB2/cmb2-attached-posts/blob/master/example-field-setup.php#L20-L56\nJust replace instances of custom_attached_posts with associated_objects. Ok, got the JS enqueued and semi-working, though the search button isn't popping up the search modal.. Woot! testing now.. No worries about the single commit. I'm not super worried about having a perfect git history. If you don't believe me, just trawl through the history a bit. \ud83d\ude02\nThis is awesome, let me know if you'll get a chance to address some of the things in the review. If you won't be able to, that's fine too.. Awesome, thank you! Will review later. And no worries about blowing up email. . I have begun making headway on updating the Ajax response for other object types (starting with users): https://github.com/CMB2/CMB2/blob/associated-objects-field/includes/CMB2_Associated_Objects_Search.php. @anhskohbo Curious if you've had any time to look at this?. Looking to get this going again. @daggerhart were you able to look further into the issue you were talking about here: https://github.com/CMB2/CMB2/issues/1055#issuecomment-349745840?. I apologize for neglecting this. It looks quite compelling. Can you submit an updated PR against the develop branch, cleaning up the merge conflicts that exist now?. Thank you very much @GaryJones for your inciteful thoughts. Your comment about an \u201cunderlying effort\u201d to follow Semver is exactly right. I am on board with doing this to follow Semver more accurately. How would you propose moving forward? Based on your suggestions, are you saying to retroactively apply the updated versioning? I\u2019m not a fan of that idea for a few reasons, but would like to hear your thoughts either way. As always, I appreciate your feedback. . Cool, I dig it. However, next release, if bug-fix only, will be 2.2.6.2, for arbitrary reasons that make sense to me (namely that it'd be weird to make the change when there is already a d level hotfix for this release). Next version which has enhancements will be 2.3.0 and I will include a note in the changelog about switching to semver. . Thanks for reporting. Already tracking here: #706. Please note, in that issue there is a documented snippet for accomplishing this.. If I understand correctly from your screenshot, you are looking to do nested repeatable groups? That is not currently possible (see #565), however you can build a custom-field that contains multiple fields/inputs within it, and put that in a repeatable group. See the address field type for an example: https://github.com/CMB2/CMB2-Snippet-Library/tree/master/custom-field-types/address-field-type. Ok, closing as a duplicate.. Please clarify what you're asking. Have you looked at the wiki? https://github.com/CMB2/CMB2/wiki/Field-Types#taxonomy_radio. Examples for registering fields for each type of data can be found here: https://github.com/CMB2/CMB2/wiki/Examples\nFor terms (taxonomies), specifically here: https://github.com/CMB2/CMB2/blob/b1a7e8fb9f0634337b390a098f0a1f70f0f64085/example-functions.php#L601-L641. I don't understand the question. That is a taxonomy field type. To define the post-type, you have to do it at the metabox registration.. Would appreciate any help you can provide. \n\nthere are updates on localization in different locales.\n\nWhat does that mean?. To be clear, I know embarrassingly little about language packs, and such, and pretty much exclusively depend on pull requests here to update the language packs.. When I pull these down, there are a lot of false positives (e.g. the line numbers of have changed in the .po files, and that's it). If you see a specific language has received a good update, I can pull that one down and take a look.. @Mte90 ok, which file is that? e.g. languages/cmb2-<lang>.po. As @tw2113 said, this will take some manual work to review the changes to see which ones are relevant.. To do that, you could probably use the escape_cb, and the sanitization_cb parameters. Something like:\n```php\nfunction my_sanitization_cb( $value, $field_args, $field ) {\n    if ( 'whatever_default_value' === $value ) {\n        $value = '';\n    }\n// Be sure to sanitize the data, since we're bypassing the default sanitization.\n$value = sanitize_text_field( $value );\n\nreturn $value;\n\n}\nfunction my_escape_cb( $value, $field_args, $field ) {\n    if ( empty( $value ) ) {\n        $value = 'whatever_default_value';\n    }\n// Be sure to escape the data, since we're bypassing the default escaping.\n$value = esc_attr( $value );\n\nreturn $value;\n\n}\n``. You can use this filter on save: \nhttps://github.com/CMB2/CMB2/blob/trunk/includes/CMB2_Field.php#L495\nAnd this filter on display: \nhttps://github.com/CMB2/CMB2/blob/trunk/includes/CMB2_Field.php#L716. Just a heads up, 2.3.0 has been released and contains the php 7.2 compatibility fix.. Unless the wp real estate plugin bundled CMB2 incorrectly, you should be able to install the [CMB2 plugin](https://wordpress.org/plugins/cmb2/) separately to override their bundled version and fix the issue.. Added a section to the troubleshooting wiki: https://github.com/CMB2/CMB2/wiki/Troubleshooting#fatal-error-declaration-of-cmb2_type_colorpickerrender-or-similar. That'date_format'cannot be parsed by php'sstrtotime()`. See this answer on stackoverflow: https://stackoverflow.com/a/2891949\nBasically, you can use either 'm/d/Y' or 'd-m-Y', but not 'd/m/Y'. If you do want to keep this format, you'll have to do some re-converting magic with the 'sanitization_cb' parameter.. This is because you have updated php to 7.2, and it is fixed in the trunk branch. See #1070. This is why we put the \"(I have confirmed I can reproduce this issue on the trunk branch)\" in the issue description, because it may often solve your problem before you need to report it.. Closing as duplicate. https://github.com/CMB2/CMB2/issues/1070. A couple things:\n1) He is not talking about conditionally showing a box, but a field, in which case, he has the right parameter, though the argument passed in to the field's show_on_cb is the CMB2_Field ($field) object, not the CMB2 object.\n2) He is talking about conditionally showing based on another field's value. @sandrodz if you're looking at changing based on the field's dynamic value (e.g. detecting when another field changes via Javascript), you'll probably want to try the CMB2 Conditionals extension, unless you're comfortable writing some custom JS.. Thanks, added a todo to #1055.. WordPress does not have the infrastructure to associate two taxonomies, so I have updated CMB2 to store the associated taxonomy term id to term meta. If you need this functionality right now, your best bet would be to update your CMB2 to the trunk branch and use that.. This is already in place which makes me believe there might be something odd going on w/ the box registration. Basically, that hook is added when the field is added ($cmb->add_field(...)), so if you're adding your field later than the cmb2_init or cmb2_admin_init, this could cause problems. If that's not the case, please provide your box/field registration code for us to be able to replicate and test.. I do have some ideas, mostly around keeping the CMB2 registration API, but updating the render API to be JS-based. My hunch is we may want to fork for this, rather than maintain the back-compatibility. Unfortunately my time has been quite limited lately, so I have not been able to put as much time/thought into it as I'd like.. As far as hooking into Gutenberg, my thoughts are to make the field API very flexible to be able to be used for custom blocks, or for the extra meta drawers. . I have not had the opportunity to start work on this, and would love some community contribution. I really like the path ACF has taken with configurable blocks, and would love to do that with CMB2, using the existing box/field registration API.. I haven't had time in the last several months to really start throwing something together. If anyone is interested, getting a proof-of-concept PR together would be a huge first step.. @tw2113\n1. It IS a Box property. https://github.com/CMB2/CMB2/wiki/Box-Properties#show_on_cb\n2. The callback provides the CMB2 instance, not field instance or array or anything else.\n@Sebaortiz \nYou might be better off checking against a capability. So you could do something like this:\nphp\nfunction cmb_show_meta_to_chosen_roles( $cmb ) {\n    return current_user_can( 'delete_others_posts' );\n}\nIf you wanted to stick with your current setup, it would be like this:\n```php\nfunction yourprefix_register_user_profile_metabox() {\n    $prefix = 'yourprefix_user_';\n    /*\n     * Metabox for the user profile screen\n     /\n    $cmb_user = new_cmb2_box( array(\n        'id'               => $prefix . 'edit',\n        'title'            => ( 'User Profile Metabox', 'cmb2' ), // Doesn't output for user boxes\n        'object_types'     => array( 'user' ), // Tells CMB2 to use user_meta vs post_meta\n        'show_names'       => true,\n        'new_user_section' => 'add-new-user', // where form will show on new user page. 'add-existing-user' is only other valid option.\n        'show_on_cb' => 'cmb_show_meta_to_chosen_roles',\n        'show_on_roles' => array( 'editor' ),\n    ) );\n    $cmb_user->add_field( array(\n        'name' => ( 'User Field', 'cmb2' ),\n        'desc' => __( 'field description (optional)', 'cmb2' ),\n        'id'   => $prefix . 'user_text_field',\n        'type' => 'text',\n    ) );\n}\nfunction cmb_show_meta_to_chosen_roles( $cmb ) {\n    $roles = $cmb->prop( 'show_on_roles', array() );\n// Do not limit the box display unless the roles are defined.\nif ( empty( $roles ) ) {\n    return true;\n}\n\n\n$user = wp_get_current_user();\n\n// No user found, return\nif ( empty( $user ) ) {\n    return false;\n}\n\n$has_role = array_intersect( (array) $roles, $user->roles );\n\n// Will show the box if user has one of the defined roles.\nreturn ! empty( $has_role );\n\n}\n``. I'm trying to understand why you would need this? Can you please provide example code as to how/why this would be important to you? Is the main reason so that you are able to gain access to the$page_hookvariable?. Going to close for now. I don't see a compelling reason to have this included. You can already hook in to this same spot in various ways. If you can provide a compelling use-case, I will reconsider. thank you.. We'll need to look into this to see how the resources for the post editor are enqueued and if we can/should enqueue them when thewysiwyg` field is used.. That works, thanks. . Thank you very much!. Added a filter, and parameter on options-page boxes toggles the filter. Please test: https://github.com/CMB2/CMB2/compare/options-autoload-feature. @slaFFik can you provide your code that you tested with?. Also, you are right. It will not switch the autoload value in the DB after the first time it is inserted. If you want to test switching, you will need to actually delete the option from the database first.. Ok, good feedback, thank you. Updated. Please test again?. Yah, unfortunately that is a known issue (see #508), but the workaround is documented here: https://github.com/WebDevStudios/CMB2/wiki/Troubleshooting#callable-field-parameters\nThe ability to specify callbacks w/ non *_cb parameters is officially deprecated, and while what you did will \"work\" (e.g. be called), it should throw a deprecation notice  in your debug.log if WP_DEBUG/WP_DEBUG_LOG are enabled.. How do you propose that? is_callable( 'Next' ) and function_exists( 'Next' ) both are truthy, even though the function is next().. I think the fact that function are case-insensitive necessarily precludes the ability to do case-sensitive checks.. This is a great idea.. This should probably replace the default behavior for the textarea_code field type, with an options opt-out, e.g. 'options' => array( 'formatted' => false ).. Thank you!. I like it. Added.\n. I'm not seeing the sidebar issue: \n. I think storing in UTC would definitely have been ideal, but at this point, it's not something I would be able change without having some serious back-compatibility consequences.. I would definitely be open to that.. I'm not sure I understand the implication that all CMB2 postbox elements should have IDs in order to compensate for a client theme js file?. I've merged this (the new working branch is develop). Thank you for your work here. . Do you have a textarea_code field type on this page?. What is the full url to the css_editor.js file? It looks like Revolution slider is likely using an old version of CodeMirror. WordPress now bundles CodeMirror in core, so they should update their plugin to work with that version.. 2.4.2 addresses this issue and only enqueues WP's code editor functionality if a textarea_code field is found on the page.. That being said, like Michael said, this conflict only partially mitigates the issue.. The version of code mirror in core is the one that all plugins need to be using to avoid conflicts. Please spread the word to those other plugins.. Thanks for reporting. That snippet definitley needs work before it can be considered \"supported\" (see description), and I also don't usually accept issues for the snippet library in this repo. The snippet library is meant to be a community dropbox for CMB2 code, with no support/warranties, and likely will need tweaking to make work for each person's' setup.\nIf you'd like, please feel free to submit a PR to that repo for any suggested improvements.. It\u2019s very possibly the \u2019default\u2019 value. Might try using the \u2018default_cb\u2019 instead. Read more: https://github.com/CMB2/CMB2/wiki/Troubleshooting#callable-field-parameters. @Mik0101 did you try my suggestion?. The 2nd parameter passed to that hook is the $updated array. that will contain an array of all the field ids that were actually updated, so you can compare against that.. @felipeelia I like your proposed solutions. Would you be able to provide a pull request addressing these issues?. The problem is that the translations still need to be included for those not using CMB2 as a plugin in the plugin directory.. Closing for now until the discussion on #1118 is resolved.. That is an excellent question. What do you think could be some potential negative implications?. Ok, develop has been created, and will be used from now on. PRs to trunk we'll leave as-is and can merge into develop if we get them merged.. Thanks!. In the new-issue-template, we request that you include your CMB2 Field Registration Code. Without this, it's pretty difficult to try and duplicate your issue.\nThe main development environment I use when developing CMB2 is a multisite environment, and I have never had this issue. The only reason I can see that you might run into it is if you are doing odd things with switch_to_blog(), or potentially forgetting to restore_current_blog().. https://github.com/CMB2/CMB2/issues/1125#issuecomment-385259957 Is still applicable here. . This would take some work for me to test right now. Rather, I would encourage you to do some investigation to see what is calling that switch_to_blog in the first place. \nTo debug, you could do some error logging to your debug.log file just before the stack is adjusted (e.g. put some logging here: https://github.com/WordPress/WordPress/blob/master/wp-includes/ms-blogs.php#L497)\nYou could add something like this to get some detailed info, including a call trace to see what called it:\nphp\n$e = new Exception();\nerror_log( __FUNCTION__ . ':' . __LINE__ .') : '. print_r( array(\n    '$new_blog'          => $new_blog,\n    '$blog_id'           => $blog_id,\n    'switching to same?' => $new_blog == $blog_id,\n    'trace'              => $e->getTraceAsString(),\n), true ) );\n. @MattPurland that's awesome news. Keep that logging/exception tracing snippet around. It's a huge time-saver for debugging issues like this. :). Oh, also, a good alternative (based on my quick view of the Intuitive Custom Post Order plugin page) for that plugin is this one from 10up: https://wordpress.org/plugins/simple-page-ordering/. Can you paste the before/after code or open a PR, or link to the related lines in github? The lines you are referencing do not make sense.\nhttps://github.com/CMB2/CMB2/blob/trunk/js/cmb2.js#L77 \nhttps://github.com/CMB2/CMB2/blob/trunk/js/cmb2.js#L169. I think it should be good now. Please test the trunk branch.. Hello, thank you for taking the time to contribute, and I appreciate your effort. For this particular change, I think it would be better-suited as a separate page in the wiki, as that is where the docs live: https://github.com/CMB2/CMB2/wiki\nWould you be willing to add a Composer page to the wiki with this information?. Thank you!. Yes, there are filters to override the getting, setting, and deleting, so you can send/get your data to/from anywhere.. Fixed in 2.4.1. Thank you for the helpful bug report.. @JiveDig as always, can you pretty please provide your configuration code so we can test w/ the same thing?. Ha, I hear that. It should be fixed with 2.4.2. Please let me know.. As @tw2113 said, this is not a CMB2 issue. However, looking at the WordPress core code, it was easy enough to swipe it and replace with a CMB2 wysiwyg field id. I'll get something in the snippet library shortly.. Snippet added: https://github.com/CMB2/CMB2-Snippet-Library/blob/master/misc/adding-wordcount-to-cmb2-wysiwyg-field.php. Hey guys, wanted to jump in and let you know I\u2019m excited to test these out and hopefully get them merged, but it may be a bit before I get to. Thank you so much for putting the effort in to contribute. \nIf you haven\u2019t yet, please be sure to check out the contributing doc as that will make the review process smoother: https://github.com/CMB2/CMB2/blob/trunk/CONTRIBUTING.md\nThanks again!\n. Tested and works well! Thank you!. Here's a screenshot of the issues I'm seeing. http://b.ustin.co/iD9YvU I have some ideas for how to correct this, but can't get to it right now. . @adriantoll you have to set the first 2 (group 1 and 2), then save, then do the move/new group, save.. Looks like this PR got some other commits into it (to readme, etc). Please fix merge conflicts and clean up commits/files and I'll try to reproduce the issues again.. Nice catch, nice fix. Thank you!. The order, when json_encoded, is definitely wrong, but I'm a bit stuck on what to do to fix it. If I \"fix it\", I will have to change the format of the value (where the index is no longer the field ID), and it will break backwards-compatibility for any users who are using it as-is currently. Open to suggestions.. thanks!. Try this:\nphp\n$cmb->add_field( array(\n    'id'         => 'lc-save-date',\n    'type'       => 'hidden',\n    'default_cb' => 'time',\n));. Hmm, definitely works for me: \n. It's set to the old value. That's the way the default_cb works... it will only use the default if there is no value saved in the DB. Once that default is saved to the DB, it no longer uses the default_cb.\nIf you don't want it to save at all, you can add 'save_field' => false,.\nI definitely recommend checking out the field parameters wiki docs: https://github.com/CMB2/CMB2/wiki/Field-Parameters. Ah, pardon me for being dense. In the case of many fields, you should be able to override/define the value statically by overriding the value attribute. I think this one will accomplish what you're looking to do, if what you are trying to do is to save the current timestamp whenever the cmb data is updated:\nphp\n$cmb->add_field( array(\n    'id'         => 'lc-save-date',\n    'type'       => 'hidden',\n    'attributes' => array(\n        'value' => time(),\n    ),\n));. FWIW, I have found it will save if you use the text tab/view or if you toggle to/from the text view before saving. It looks like for some reason it's not always updating the hidden <textarea> field when editing.. Thanks @staurand, fixed!. This can already be accomplished with the 'query_args' field parameter: https://github.com/CMB2/CMB2/wiki/Field-Parameters#query_args. e.g. \nphp\n$cmb_demo->add_field( array(\n    'name'     => esc_html__( 'Test Taxonomy Multi Checkbox', 'cmb2' ),\n    'desc'     => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'       => $prefix . 'multitaxonomy',\n    'type'     => 'taxonomy_multicheck',\n    'taxonomy' => 'post_tag', // Taxonomy Slug\n    'query_args' => array(\n        // Field(s) to order terms by. Accepts term fields ('name', 'slug', 'term_group', 'term_id', 'id', 'description', 'parent'),\n        'orderby' => 'slug',\n    ),\n) );. Glad that helps! The wiki is publicly editable, so if you feel something is lacking we always appreciate community contribution to the wiki. . If you're using the the textarea_code in its new default codemirror mode, you can tell it to be readonly via the following config:\nphp\n$main_options->add_field(\n    array(\n        'name'    => 'Some Text',\n        'id'      => 'textarea_code',\n        'type'    => 'textarea_code',\n        'default' => '<p>Hello</p>',\n        'attributes' => [\n            'disabled' => true,\n            'data-codeeditor' => json_encode( [\n                'codemirror' => [\n                    'readOnly' => 'nocursor',\n                ],\n            ] ),\n        ],\n    )\n);\nYou can also disable codemirror if you prefer. I've added instructions for doing so in the wiki: https://github.com/CMB2/CMB2/wiki/Field-Types#textarea_code (then the disabled attribute will work as you're expecting). Since 4.6 isn't that long ago, I think I'd prefer to fix the issue. I'm thinking it might be as simple as including the right files before calling that function, but obviously will need testing. . Thanks again for your contribution. We very much appreciate it!. @manzoorwanijk The main reason I would prefer to keep it as-is, is because it very loosely creates a requirement that 3rd-party developers should use their own prefixes, so as not to confuse the core-projects from them. Obviously, it's not possible to strictly enforce this, but I'm not keen to change the autloader to make it even easier to do.. @scottsawyer these look to be pretty helpful, but the readmes are pretty sparse. I'd prefer them to have a bit more instruction and possibly screenshots before linking to them from our readme as we don't want people to end up on a dead-end as they aren't sure what to do. Hope that makes sense.. Looks good, added. Thanks!. Hmm I don't have that issue. What version of php are you using, and can you provide your configuration where you are setting the display_cb?. Makes sense. I merged it and updated another instance as well. Thanks for the PR!. From what I can tell, packagist doesn't allow changing that.. This is the bummer solution: https://github.com/composer/packagist/issues/47. I setup https://packagist.org/packages/cmb2/cmb2, which should be the new final source.. Since we can't keep download stats, I'll keep a screenshot of them here for posterity. \n\n|   |  |\n| ------------- | ------------- |\n| Installs | 74,823 |\n| Dependents | 8 17 |\n| Suggesters | 0 |\n| Stars | 2,113 |\n| Watchers | 175 |\n| Forks | 488 |\n| Open Issues | 199 |\n| Type | wordpress-plugin|. This is an oft-repeated request: \nhttps://github.com/CMB2/CMB2/search?q=composer+autoload&type=Issues\nAs composer isn\u2019t my strongest suite, I\u2019d encourage you to read through all those previous discussions before +1-ing here. . That's a cool idea/use-case. Would you mind providing your render_row_cb and box/field registration code so we can test? I'm curious to see how you're handling it.. Works great, thanks!. Codemirror issue is separate. Tracking in #119.. Since you have to write a callback in javascript anyway, there's no reason to define the callback in php. However, there wasn't previously a good javascript event to hook onto for initiating arguments for colorpickers when added via a repeatable group, so I have pushed up an update (to add cmb_init_pickers event). This will allow you to define custom javascript arguments for the pickers just before the pickers are initiated for the field.  Example for color-pickers inside a repeatable group:\n```html\n\n    $(document).on( 'cmb_init_pickers', function(evt, pickers, cmb) {\n        var box = document.getElementById('<GROUP_METABOX_ID>');\n        pickers.color.each( function() {\n            if ( jQuery.contains( box, this ) ) {\n                var $picker = $(this);\n                var changeCallback = function(event, obj) {\n                    console.log('picker changed to:', obj.color.toString());\n                };\n                var args = $picker.data('colorpicker');\n                if ( args ) {\n                    args.change = args.change || changeCallback;\n                } else {\n                    args = {\n                        change: changeCallback\n                    }\n                }\n                $picker.data('colorpicker', args);</p>\n<pre><code>        }\n    })\n});\n</code></pre>\n<p>\n. And you're dealing with a color-picker that is NOT in a group or repeatable, you can just do this:html\n\n    $(document).on( 'cmb_pre_init', function(evt, cmb) {\n        var $picker = $('#<FIELD_ID>');\n        var changeCallback = function(event, obj) {\n            console.log('picker changed to:', obj.color.toString());\n        };\n        var args = $picker.data('colorpicker');\n        if ( args ) {\n            args.change = args.change || changeCallback;\n        } else {\n            args = {\n                change: changeCallback\n            }\n        }\n        $picker.data('colorpicker', args);\n    });\n\n``. Yah let\u2019s close. . This is awesome, thank you for contributing. I will revert the extra file things, and simply put this in the main cmb js file, but this provides exactly what we need, so by merging, you get the props/contribution credit. Thank you!!. \ud83d\udc4d I like it. Example here: https://github.com/CMB2/CMB2/blob/26bef81034ff4b04310c82fb3eb1555220ef4dd7/example-functions.php#L128-L146. This should have been fixed with #1190. Did you test on the trunk branch?. \ud83e\udd51 . Thank you!. Will need to de-init/re-init the code editors when ordering. For now, you can get around the issue by disable codemirror on the textarea_code fields within the group:'options' => array( 'disable_codemirror' => true )`\nhttps://github.com/CMB2/CMB2/wiki/Field-Types#textarea_code. That is super weird. Can you provide your box/field registration and any other relevant details to replicate this? \nI just tested was not able to replicate.. Ok, tested w/ a field w/ the same setup as yours, but I am still not able to replicate. I did notice the first field you mentioned, lezshows_episodes isn't the same as the 2nd $prefix . 'plots' -- is there anything different between those 2?. Thank you. We\u2019ll get a fix out today. . No, please don't include CMB2 on a hook, and please don't do a class_exists check. CMB2 handles all of that for you, and you're only causing compatibility issues (as you've witnessed) by doing that. \nPlease review the wiki, as it explains this in detail: https://github.com/CMB2/CMB2/wiki/Basic-Usage#caveats-for-bundling-and-including-cmb2. You can also see how it should be done in the example-functions.php file: https://github.com/CMB2/CMB2/blob/630d305c9f251631e92d2ec1e480bb0692daaf67/example-functions.php#L14-L22. > Themeforest does not support these ways.\nThat doesn't make sense. Do you have a link you can provide? If it's the theme reviewers, please point them to this thread.\n\nHow to check cmb2 plugin exits.\n\nyou can do this:\nphp\n$cmb2_exists = defined( 'CMB2_LOADED' );. Well, I can't tell from your code... is the dirname(__FILE__) . '/metabox/init.php' file YOUR file, or is it the CMB2 init.php file? Do you have a link to repo we can review?. If all you are doing is checking if CMB2 exists before loading your own metabox code, then you can ignore what I was saying here, and just do this:\nif ( defined( 'CMB2_LOADED' ) ) {\n    require_once dirname(__FILE__) . '/my-cmb2-config-file.php'\n}. No, I meant a link to your code. Do you have your theme up on github or somewhere so I can see what you are trying to do.. I would like to deprecate the show_on property in favor of the show_on_cb property, so I don't think I'll make this change.  Added an example for doing this in the wiki: https://github.com/CMB2/CMB2/wiki/Box-Properties#show_on_cb. \ud83d\udc4d . Another support thread: https://wordpress.org/support/topic/gutenburg-cursor-returns-to-start-on-autosave/. I just updated the docs.. Yes, that seems like a good idea.. Maybe the core version prevents the jumping with autosave (#1202).. Ha, nice catch. This was definitely a typo.. Coincidentally, would appreciate if you are willing to add docs for rest_value_cb in the wiki.. Awesome, thank you!. Unfortunately, It will probably be problematic for back-compatibility to change that now, but you should be able to hook in and make it happen on your own w/ something like this:\nphp\nadd_action( 'cmb2_save_field', function( $field_id, $updated, $action, $field ) {\n    if ( $updated && 'removed' === $action && 'wswp_options' === $field->cmb_id ) {\n        $field->get_cmb()->updated[] = $field_id;\n    }\n}, 10, 4 );\nCan you try that and see if that gets what you're looking for?. In this case, the $updated variable passed into these hooks is the result of the call to CMB2_Field::remove_data(), which then returns the result of delete_metadata or CMB2_Option::remove(). If you were using normal metadata, delete_metadata only returns truthy if the value has changed (if I recall correctly). But since you're using options, you're right, you'll have to do a bit more magic to compare the new value w/ the old one to see if changed.. Perfect. thanks.. Would you be able to get this updated w/ the develop branch?. Thank you!. ok, will try. Still no luck.. It's hard to say, as everything we add to CMB2, we'll have to support over the long run. Do you want to submit the PR and we can review?. @slaFFik I like it, let's do it.\n@spacedmonkey thanks! I haven't looked into it at all, but that would be awesome. We'll let you know. Thanks!. @spacedmonkey Also, it probably goes w/o saying, but we'd certainly welcome pull requests, if you're interested.. I\u2019d like to switch this as you mention and instead exclude the lock file. If you\u2019re able to add that, great. If not, I can when I get to this. . Thanks!. Thanks!. Tried to follow along your logic, but the link for your [3] is the sames as your [4]. Is that supposed to be?. Don't bother using cmb2_get_option. It's only there for convenience, but when you need to run code as early as you are (before init), then you can't depend on the CMB2 functions. You can simply do something like this:\n```php\nadd_filter( 'rest_url_prefix', 'yourprefix_api_slug' );\nfunction yourprefix_api_slug( $slug ) {\n    $options = get_option( 'wp_secondary_options', [] );\n    if ( ! empty( $options['wp_rest_textmedium'] ) ) {\n        $slug = $options['wp_rest_textmedium'];\n    }\nreturn $slug;\n\n}\n``. I'm closing this as it's not a CMB2 issue, though you can continue to comment if needed. Next time, please do not disregard the Issue template questions, as it provides us with a lot of helpful context as to how we can help you.. This is not a bug, but rather the documented way that the WP editor works. You can see the notes in the documentation for this field type: https://github.com/CMB2/CMB2/wiki/Field-Types#wysiwyg. Whenever you seeobject_typein the context of CMB2, it refers to the type of object you are dealing with, e.g.post,user,term,comment, oroptions-page. Since you're dealing with a post object, yourobject_typewould still bepost`. \nobject_type should not be confused with post_type.. @wpsmith Why should this be merged, but not #198, or #610? I'm open to it, but I need compelling reasons why the previously stated arguments against autoloading should be disregarded. I see you found #1185. Did you get a chance to read the background on that?. Thanks for the PR! Just a general word of recommendation regarding your PR summary. It is much more likely the maintainers will be able to review and test if you provide more robust testing instructions. E.g. if you could provide the CPT setup you are using, the CMB box configuration, and the exact routes where you would see X or Y, that will go a long way towards us being able to quickly review and test.. > The CMB example code is in the ticket that show the issue :-)\nI think maybe you're misunderstanding. I am not saying we won't be able to figure out how to test this. Of course we can figure out how to test it.\nI'm saying the neater/nicer package you can give in your PR (even if you have to copy/paste from another issue) will go a long way towards getting the PR reviewed. I'm sure you're a busy guy too, and I very much appreciate the contribution, but when I see a PR with a description like this (where the description assumes context, where testing instructions are basically \"do X\", where the \"Checklist\" items are completely ignored/unchecked), it moves this PR to the bottom of my todo list, as I know it'll require extra hunting, and based on the PR description, that I won't get much help from the provider of the code, who does not appear to care much about the health of the project as much as caring that their piece of code gets added to deal with their one-off problem.\nMaybe that's not you, but when a PR is submitted in this way, this is what it indicates.\nAs this project (and many others I maintain) are used and contributed to quite often, the more help I can get from the contributor, the more the workload is evened out among the many instead of the few.\n. I can look at/fix the tests when I test this. Do me a favor and update the PR description to note that the tests will need to be fixed, so I don't forget. :). To change what? the fields that show?. Ah! you mean change the cmb2 prefix. That makes sense, but it's also problematic as it could break other plugins or theme which is depending on the response looking that way. This would need some thought.. Yes, that could definitely work. We could use the foreach loop to group all the boxes into their defined rest slug. It will take a bit of work to change the logic here, but could definitely be done.. I'm going to leave this PR open, as it's described a prototype, but I won't merge as-is. The reason is that I don't want someone using the rest_slug_group group to inadvertently change the namespace for everyone else using CMB2. Instead we will need to put only the fields within that specific box in that new namespace, so will require a bit of structure change (https://github.com/CMB2/CMB2/issues/1239#issuecomment-472024661).. I appreciate the effort here. Will look into testing this as soon as I can. . I'd be open to a PR. Please consider the contribution guidelines if/when submitting. Thanks!.. There's an example using a normal file field type in the front-end submit example in the snippet library: https://github.com/CMB2/CMB2-Snippet-Library/blob/master/front-end/cmb2-front-end-submit.php#L38-L46\nThat example will get you pretty far. Look at the file-handling section too: https://github.com/CMB2/CMB2-Snippet-Library/blob/master/front-end/cmb2-front-end-submit.php#L260-L287. It's not necessarily an idea I'm opposed to (feel free to submit a PR if interested), but it is possible to output your own markup before/after the fields using the existing hooks. You can see a demo of that in the snippet library: https://github.com/CMB2/CMB2-Snippet-Library/blob/master/filters-and-actions/cmb2_before_form-and-cmb2_after_form-hooks.php. This is not ok. The defaults still need to be applied. And actually, that should be date_picker.  See defaults here: https://github.com/WebDevStudios/CMB2/blob/master/includes/CMB2_hookup.php#L152\n. I updated it to be date_picker to match what's in wp_locaize_script: https://github.com/WebDevStudios/CMB2/commit/0572902c90cc2a9da6f96ee7fda1fd70e806e0c2\nBut yes, please modify your PR to put those defaults back. If you want them removed, it needs to happen here: https://github.com/WebDevStudios/CMB2/blob/master/includes/CMB2_hookup.php#L152 and you'll need to provide a good explanation of why you think they should be removed.\n. Even better if you can provide a screenshot of what it looks like BEFORE you remove the parameters, and a screenshot AFTER you remove them so we can see what it is you're trying to accomplish. Make sense?\n. @gregrickaby @coreymcollins do you guys think that's a better UI solution? I, personally, think the month/year dropdowns to be nice features, but may be overkill for > 90% of use-cases.\nI like the style updates though. Much nicer.\n. This should probably keep w/ the WP convention of using null: https://github.com/WordPress/WordPress/blob/master/wp-includes/meta.php#L466\n. since you are using the set method, there is no reason to take in the $resave argument to this helper function (because using set, it will save it to the DB). I would remove it from the cmb2_update_option function and set it to 'false'  for cmb2_options()->update.\n. No need to rename this\n. Should comment this out by default since that is not the default behavior and is how optional arguments are noted in this file.\n. I'll look into the repeatable field issues (hopefully tomorrow).\n. why is there an extra forward slash before %3$s?\n. When you want to leave comments for translators, the _x() family of functions should be used. e.g.\n``` php\nesc_html_x( 'Enter a youtube, twitter, or instagram URL. Supports services listed at %s.', '%s is a link to codex.wordpress.org/Embeds', 'cmb2' ),\n``\n. As mentioned above, please useesc_html_x()here.\n. Please remove these white space deletions. They are needed for the markdown file to represent a line break. . Unless you have a specific reason, I think i'll nix the postbox class.. I think we'll probably need to check if the we're looking at the right post-type before we output the form. See the post-type loop inCMB2_hookup::add_metaboxes().. @norcross makes sense. I think I was seeing it cached, so it looked a little wonky. <strike>What do you think about outputting the entire metabox markup, allowing \"metaboxes\" in those other locations?</strike> (let's not worry about that for now). Thepostbox-containerclass was being used to style the field rows, but I refactored it a bit so that it's not needed. You can see those changes in [Update context metabox output to handle no-title or no-wrap better](https://github.com/WebDevStudios/CMB2/pull/838/commits/c86b8bc0ba7c2cd020015c809fce5c76f5a1288d). \ud83d\udc4d . This is problematic for back-compatibility. This can't really change.. i'd move this inside theif ( is_array( $size ) ) {condition since it's not needed otherwise.. Couldn't this be'[%d,%d]'?. We should _probably_ abandon the inlines styles here.. It's tough to know the best place for these things, but I feel like this static method would be better suited forCMB2_Type_File_Base`.. And to hook it in, I'd probably do something similar to the other field-specific stuff, like oembed ajax hooks:\nphp\nif ( in_array( $field['type'], array( 'file', 'file_list' ) ) ) {\n    // Initiate attachment JS hooks\n    add_filter( 'wp_prepare_attachment_for_js', 'CMB2_Type_File_Base::prepare_image_sizes_for_js', 10, 3 );\n}. We should probably abandon the inlines styles here.. We should probably abandon the inlines styles here.. Looks like you're changing this default as well (from 50 to 15), which again, is problematic for back-compatibility.. use 'yoda' conditions (here and in the rest of your code). This is not correct (and is broken). $value is already escaped, as it's taken from $field->escaped_value(). esc_html is not needed on a  call to $field->escaped_value() . This is certainly an example of something that could/would break back-compat, specifically those using the cmb2_group_wrap_attributes filter.. the 'desc'/'description' params are another area that are occasionally used to output arbitrary script/style blocks. Not saying it's a good idea, but that it happens.. This seems like an odd method to add. What is the purpose?\n$this->is_repeatable( $field_group );\n$field_group->args( 'repeatable' );. This seems like an odd micro-optimization. Is there a reason for this method?\n$this->is_repeatable( $field_group );\nvs\n$field_group->args( 'repeatable' );. the only way this feels better to me is if this is moved to CMB2_Field, and even then, I could see creating an CMB2_Field::is( $param ) method that allows checking boolean field parameters (so $field_group->args( 'repeatable' ); would become $field_group->is( 'repeatable' );).. Yes, extensive unit tests should def. be written for this, though i'm not sure I 100% follow what you're saying as far as what should be tested. Let me write some tests for how it can/should work now, and we can go from there.. line in the sand (and tests) created: https://github.com/CMB2/CMB2/commit/fec5acbe8890afd3f4567897a9bf596c6cbe573e. I think that makes sense. good call.. > It's a couple less characters to type.\nbut... it's not. :)\n\n. The name field param is what is generally stuffed in the <label>, but in the group field's case, it's output above the group (and yikes, looks like some css needs to be fixed for it), but yah, as @jazzsequence mentioned, the 'name' params should probably allow some html\n. Why this change?. This isn't needed. All the types have access to the field via this magic __get: https://github.com/CMB2/CMB2/blob/trunk/includes/types/CMB2_Type_Base.php#L146-L147\nProbably is not the best practice, but either way, I don't want to change how it's done for just the one field type.. Same as above.. It's silly, but let's be sure to keep the WP standards (e.g. implode( '/'...). Also, it seems that the implode() part should maybe happen inside the get_all_object_type_labels method?. Same as above.. This is called 3 times. Is that necessary? Or can we just do $this->query = $this->get_query(... and use that throughout?. This class name is clean, but would maybe prefer a pattern that was a bit more concise. e.g. CMB2_Type_Associated_Posts_Query, leaving the base as CMB2_Type_Associated_Objects_Query.. Once the other things are cleaned up, i'll move these to their own files, and probably rename them. Just a heads up.. WP standards w/ () spacing.. Our coding style is lowercase on keywords.. Please change to \u201cthis plugin adds\u201d and \u201cfield type\u201d and title case \u201cFont Awesome\u201d. Thank you!. Let's use if ( ! CMB2_Utils::wp_at_least( '4.7' ) && ! function_exists( 'register_setting' ) ) {, but this looks good.. Please go back to the separate var statements-per-line as that is the code style of this lib. (reasons and more). Nah, we don't need to sanitize this. The reason is that CMB2 config is meant to be coded (not added via user input/db), so if we needed to sanitize this, we would need to sanitize a bunch of other stuff in CMB2 that we don't (like field names/ids, etc).. Also, you can't use a an evaluated expression in empty in earlier versions of PHP. E.g. the value inside empty() needs to be a variable.. ",
    "billerickson": "Yep, looks good to me!\n. ",
    "robneu": "+1 for tab implementation. Also, IMO tabs should only be a UI construct. Grouping elements into tabs shouldn't necessarily change the way the data is saved. There's already jQuery UI tabs built into core so the JS part is pretty straight forward.\nI was able to hack this into place, but it required making modifications to CMB, which I'd really like to avoid if possible.\n. +1 to this. I don't see any reason to use <li> elements here. All it does is make the markup more difficult to work with because it forces everything to be wrapped in a <ul>.\nIf you use something more generic like <div> or even <p> tags, the markup will be a lot more flexible.\n. I'd be happy to work on a PR if it would be helpful.\n. Nice! :+1: \n. IMO the best solution for this is to use grunt-wp-i18n in your custom plugin and replace the CMB textdomain on build.\n. ",
    "rogerlos": "On the old CMB, I was able to make tabbed admin option pages, though I had to hack my way around a bit. Essentially, I made every individual meta box a wordpress admin tab. Ran into some issues with repeatable fields....but as my only use of CMB on that project was a single options page with tabs, I hacked stuff around a bit to make it work.\nMy rather crude approach, don't know if this is helpful, again, this was using the old CMB:\nphp\n/**\n* Adds a wrapper div for the WP tabs to work with\n *\n* @param $meta_box\n*/\npublic function before_cmb_table( $meta_box ) {\n    // check to see if there is an active tab, or set it to the default\n    $active_tab = isset( $_GET[ 'tab' ] ) ? $_GET[ 'tab' ] : self::$default_tab;\n    // add a class to show the tab if it's active\n    $active_class = ($active_tab == 'cmb-tab-' . $meta_box['id'] ) ? 'cmb-tab-active' : '';\n    // div wraps the table\n    echo '<div id=\"cmb-tab-' . $meta_box['id'] . '\" class=\"cmb-tab ' . $active_class . '\">';\n}\n/**\n* Closes the wrapper div\n*/\npublic function after_cmb_table() {\n    echo '</div>';\n}\n/**\n* Tabbed options page using CMB boxes\n*\n* @param      $meta_boxes\n* @param      $object_id\n* @param bool $echo\n*\n* @return string\n*/\npublic function cmb_tabbed_admin_form( $meta_boxes, $object_id, $echo = true ) {\n    // discover if there is an active tab...\n    $active_tab = isset( $_GET[ 'tab' ] ) ? $_GET[ 'tab' ] :  self::$default_tab;\n    $save_flag = false;\n    foreach( $meta_boxes as $key => $mb ) {\n        // set the defaults\n        $mb = cmb_Meta_Box::set_mb_defaults( $mb );\n        // Make sure this meta box should be shown\n        if ( ! apply_filters( 'cmb_show_on', true, $mb ) ) {\n            unset( $meta_boxes[$key] );\n            continue;\n        }\n        // if the default tab has not been set, make it this box (ie, the first box)\n        if ( self::$default_tab === null ) {\n            self::$default_tab = 'cmb-tab-' . $mb['id'];\n            if ( $active_tab === null ) $active_tab = self::$default_tab;\n        }\n        // Make sure that our object type is explicitly set by the metabox config\n        cmb_Meta_Box::set_object_type( cmb_Meta_Box::set_mb_type( $mb ) );\n        // this is a little inelegant for multiple boxes all in the same form, but there you have it...\n        if (\n            // check nonce\n            isset( $_POST['submit-cmb'], $_POST['object_id'], $_POST['wp_meta_box_nonce'] )\n            && wp_verify_nonce( $_POST['wp_meta_box_nonce'], cmb_Meta_Box::nonce() )\n            && $_POST['object_id'] == $object_id\n        ) {\n            cmb_save_metabox_fields( $mb, $object_id );\n            $save_flag = true;\n        }\n    }\n    if ( $save_flag === true ) {\n        self::$myfunction->set_options( stripslashes_deep( get_option( self::$key ) ) );\n        echo '<div class=\"updated\"><p>Your settings were updated.</p></div>';\n    }\n    // make sure the above checking did not empty the metaboxes array\n    if ( ! empty ( $meta_boxes ) ) {\n        // start tab navigation from scratch\n        $tabs = '';\n        // output the metaboxes as a form\n        ob_start();\n        foreach ( (array) $meta_boxes as $meta_box ) {\n            // the content tab's ID\n            $this_tab = 'cmb-tab-' . $meta_box['id'];\n            // check to see if the current tab is active\n            $active_flag = ( $active_tab == $this_tab ) ? 'nav-tab-active' : '';\n            // build tab navigation; we use the \"data-tab\" attribute as a shortcut for JS\n            $tabs .= '<a href=\"?page=' . $_GET[ 'page' ] . '&amp;tab=' . $this_tab . \n                '\" class=\"nav-tab ' . $active_flag . '\" data-tab=\"' . $this_tab . '\">' . $meta_box['title'] . '</a>';\n            cmb_print_metabox( $meta_box, $object_id );\n        }\n        $form = ob_get_contents();\n        ob_end_clean();\n        // removed the filter, if you add it back, be sure to work-around its individual metabox id!\n        $form_format = '<h2 class=\"nav-tab-wrapper\">%s</h2>' .\n            '<form class=\"cmb-form\" method=\"post\" id=\"%s\" enctype=\"multipart/form-data\" encoding=\"multipart/form-data\">' .\n            '<input type=\"hidden\" name=\"object_id\" value=\"%s\">%s<hr>' .\n            '<p><input type=\"submit\" name=\"submit-cmb\" value=\"%s\" class=\"button-primary\"></p></form>';\n        $form = sprintf( $form_format, $tabs, $object_id, $object_id, $form, __( 'Save' ) );\n        if ( $echo )\n            echo $form;\n        return $form;\n    }\n    // if the meta_box array was empty\n    return '';\n}\nAs I recall, I had to change some of the sanitization functions which were not expecting fields as strings or as arrays, or some such. Been awhile!\n. https://github.com/rogerlos/cmb2-metatabs-options\nI wrote the above class, which allows you to have:\n- \"Settings\" pages with multiple meta boxes\n- Optionally have tabs on that page; individual tabs can have multiple meta boxes, too\nFairly configurable and not too heavyweight. It's setup as a wordpress plugin, but wp.org rejected it \"we don't want any more developer only plugins\". (Shrug)\nYou can use it as a class within your project. Has a wiki...\n. I have a small jQuery plugin which allows drag and drop sorting of repeatable fields. Not thoroughly tested just yet, but seems to work OK in my local build:\nhttps://github.com/rogerlos/cmb-daggable-repeater\nIt does need to be invoked from another script:\nJavaScript\n$( '.cmb-repeat' ).cmbDraggableRepeater();\n. I have run into a similar problem with trying to include a \"file\" field. In the case of a file field, you cannot pass it any arguments and have it work. If you try to call a file field like this:\nphp\n$field_type->input( $arguments );\nWhere 'type' => 'file' is one of your arguments, the field will not render properly in a multi-field context. If you call it like this:\nphp\n$field_type->file( $arguments );\nThe arguments are ignored. Trying to include a file field results in all other values being negated as it takes on the name and id of the \"master\" field.\nIn the case of a wysiwyg field, a call directly to $field_type->wysiwyg( $arguments ), the function specifically does not allow the name argument to be passed. So it looks as though multiple field types are limited to relatively simple input types (?), or at least those which can accept the \"name\" argument. I was able to get a radio field to work in a multi-field context, but, counter-intuitively I had to manually prepare the radio options which removed much of the value of being able to call radio.\nI bailed on this approach and if I try it again in the future, I think I am going to fiddle with using group and using JS to remove the tools allowing people to add/remove items.\n. If you dynamically add non-wysiwyg fields, do they get saved?\n. I would add this would all be backwards-compatible, of course, options pages set up for current users would act as they do now.. I have mostly completed this...my take above is somewhat laughable in retrospect, but what's new. \nHope to have a pull request for review in a couple of days, after writing test coverage. . @tw2113, I'll take a peek at the two links you sent. I'm not a github wizard, so while I thought I had \"rebased\" the fork a few days ago, not sure if that's actually true or not. I did my initial pull from trunk about three weeks ago.. ### Box Properties\nMore information on the box properties, what they do, and their state to successfully display a box on an options page.\nadmin_menu_hook\n'admin_menu' | string | optional\nCan also be 'network_admin_menu' to add network-level options page(s). I am not certain what happens if you change this to something other than the two choices here, probably just a missing menu.\noption_key\n'' | string | required\nKey fields are saved to in wp_options table. Also used as menu slug if menu_slug is not set. Note that two boxes sharing the same option_key but different menu_slug values will be separate pages.\nparent_slug\n'' | string | optional\nIf set, page will be a sub-page of the page whose menu_slug matches this value. Can also be the filename of a standard WP admin page.\nmenu_slug\n'' | string | optional, but recommended\nValue is used as the identifier in the WordPress admin menu. This also is used as the identifier for the page itself. Will be set to option_key if left blank. Note that CMB2 uses this value to determine which page your box appears on.\nhookup_class\n'' | string, CMB2_Page | optional\nA child instance of CMB2_Page, or the class name of same, can be passed. CMB2 will use this instead of the built-in CMB2_Page. Must extend CMB2_Page; if string, class must be able to be found by PHP.\ncapability\n'manage_options' | string | optional\nWordPress capability required to view the page. \ndisplay_cb\nfalse | bool, callable | optional\n Override the options-page output. Function can echo or return a string of HTML. It will be passed the CMB2_Page instance as an argument.\nhide_menu\nfalse | bool | optional\nIf set to true, page will be created and will be accessible at wp-admin/admin.php?page={menu_slug} but will not appear in the admin menu.\nicon_url\n'' | string | optional\nIf this is a top-level page (i.e., parent_slug is empty), full URL to icon.\nmenu_title\npage_title | string | optional\nSets menu title, defaults to page_title. Can also be changed via filter.\nmenu_first_sub\nnull | string | optional\nAllows you to change the menu title for the first sub-menu item, when adding a top-level page with children. WordPress automatically adds and uses the same text as the top menu label by default. (WordPress themselves use this to alter their menus: see \"Posts\", where \"All Posts\" is the first item, rather than \"Posts\".)\npage_columns\n'auto' |  'auto', 1, 2 | optional\nOnly used when page_format is 'post'. \"Auto\" checks page for side context boxes and if any are found, makes page 2 columns, otherwise 1 column.\npage_format\n'simple' | simple, post | optional\n\"Simple\" is the current CMB2 options page format. Additional boxes will seamlessly be added, page appears as a single form. \"Post\" uses a layout like the regular WordPress post editor, with draggable metaboxes, possible use of the sidebar, etc.\npage_title\nCMB2->prop( 'title' ) | string | optional\nSets the page title separate from menu label (or box title on simple page). Can also be altered via filter.\nposition\nnull | null,int | optional\nIf page is added to top-level menu, its position. See add_admin_menu for default positions.\nreset_action\n'default' |'default', 'remove' | optional\nIf a reset button is added, what happens to field values when clicked. \"Default\" returns them to the default values defined in the field objects; \"remove\" sets them to an empty string. [Note, this might be a bit sketchy, in that certain field types may not be expecting an empty string, will investigate]\nreset_button\n'' | string | optional\nIf left empty, no reset button is added; if set, this text will appear on button. \nsave_button\n'Save' | string, bool false | optional\nText for save button. False hides button, useful if adding a button via new \"submit\" field type.\n. ## Filters\nFinding CMB2 Boxes Within Arguments\nFilters will include the object they were sent from (CMB2_Page_Display, CMB2_Options_Hookup, etc.) as an additional argument. Essentially, the objects are nested, and it's just a matter of steering your function to the arguments you want.\n```php\nadd_filter( 'cmb2_options_page_before', 'find_example', 10, 2 );\nfunction find_example( $string_to_modify, $Display ) {\n// CMB2_Page_xxxx classes have the 'CMB2_Page' instance in 'page' property\n\n$Page = $Display->page;\n\n// CMB2_Page has the individual 'CMB2_Options_Hookup' instances for each box\n// in the 'hookups' property, an array keyed by 'cmb_id' of the box they contain\n\n$Hookups_all = $Page->hookups;\n$Hookup_box123 = empty( $Hookups_all['box123'] ) ? null : $Hookups_all['box123'];\n\n// Those hookups have their 'CMB2' instance in the 'cmb' property\n\n$box123 = empty( $Hookup_box123 ) ? null : $Hookup_box123->cmb;\n\n// These can be chained, though some older versions of PHP \n// may balk at trying to directly access the array key.\n\n$box123 = empty( $Display->page->hookups['box123'] ) ?\n    null : $Display->page->hookups['box123']->cmb;\n\nif ( $box123 !== null ) {\n    $string_to_modify .= '<p>Something significant to ' \n                             . $box123->prop( 'title' ) . '.</p>';\n}\n\nreturn $string_to_modify;\n\n}\n```\nString Filters\ncmb2_options_page_before\ncmb2_options_page_after\nArguments: (string) $html, (CMB2_Page_Display) $display\nExpected return: string (HTML)\nInsert HTML before or after the form containing your metaboxes on both \"simple\" and \"post\" pages. The first argument (content to modify) will usually be an empty string, but your function should check, as another call to this filter may have already placed HTML. The \"before\" filter's return is placed below the page title. CMB2 does not parse, nor wrap, returned string.\ncmb2_options_form_top\ncmb2_options_form_bottom\nArguments: (string) $html, (CMB2_Page_Display) $display\nExpected return: string (HTML)\nInsert HTML just after the opening <form> tag or just before the closing </form> tag on both \"simple\" and \"post\" pages. The same caveats from the previous filter apply here as well.\ncmb2_options_form_id\nArguments: (string) $form_id, (CMB2_Page_Display) $display\nExpected return: string\nThe value of the <form> id attribute. \ncmb2_options_page_save_html\nArguments: (string) $html, (array) $pieces, (string) $page_id\nExpected return: string (HTML)\nThe first argument will contain the HTML for the form save and reset buttons and their wrapper, if included and appropriate. \nphp\n$pieces = array(\n    'button_wrap'  => '<p class=\"cmb-submit-wrap clear\">%s%s</p>',\n    'reset_button' => '' // HTML from get_submit_button(),\n    'save_button'  => '' // HTML from get_submit_button(),\n);\nIf wrap is disabled, button_wrap will be '%s%s'. ($html is created via sprintf with the array elements as arguments.) $page_id is included for sorting purposes. CMB2 will expect the submit button to have a name attribute set to \"submit-cmb\" and the reset button should be \"reset-cmb\". CMB2 does not parse, nor wrap, returned string.\ncmb2_options_page_title\ncmb2_options_menu_title\nArguments: (string) $string, (CMB2_Page_Shared) $shared\nExpected return: string\nYou can alter the page title, which is displayed above the form, and the menu title, which is how the page is displayed in the admin menu, with these filters. You can theoretically include some HTML in these strings, but results are not guaranteed. This is forced to (string) by CMB2.\nArray Filters\nThese filers allow you to directly manipulate values CMB2 applies at specific points while setting up the page. All of these are fairly thoroughly checked when the arrays are passed back, including type-checking, ensuring expected keys are present, etc. In the case of menu and shared parameters, the defaults will be used if the returned array is not kosher. Returned hooks arrays cannot be completely empty!\ncmb2_options_hookup_hooks\nArguments: (array) $hooks, (CMB2_Options_Hookup) $hookup\nExpected return: array \n$hooks is an array of 'hook configuration' arrays. A hook configuration array looks like this:\nphp\n$new_hook = array(\n    'id' => 'hook_id',   // internal reference\n    'hook' => 'hook_name', // hook name\n    'call' => 'callable_function', // or callable array\n    'type' => 'action', // can also be 'filter'\n    'priority' => 10, // WP priority\n    'args' => 1, // Number of arguments\n    'only_if' => true, // See below\n);\nMost of these are self-explanatory, but the only_if argument allows you to specify a statement to be evaluated when configuring hooks programmatically:\nphp\n$my_hook = array(\n    ....\n    'only_if' => $this_value === $that_value,\n);\nYour hook will not be added if:\n\nThere is no ID\nThere is no hook\ncall is not callable\nonly_if is not true\n\nThe array passed will include the hooks CMB2 by default uses to add metabox-specific hooks. \"Page\" hooks are handled separately. Removing standard CMB2 hooks may lead to tears. If you mess this up enough that CMB2 cannot parse any hooks the default hooks will be used!\ncmb2_options_pagehooks \nArguments: (array) $hooks, (CMB2_Page_Hooks) $Hooks\nExpected return: array\nThis is exactly like the previous filter, except it deals with hooks specific to adding a page. It is called twice, once before the menu is dealt with, and once after, to allow for hooks which need the WordPress page_hook value. You can determine which call this is by examining the page property's internal page_hook property:\nphp\n$can_i_add_page_hook_dependent_hooks = ! empty( $hooks->page->page_hook );\ncmb2_options_page_menu_params\nArguments: (array) $menu_params, (CMB2_Page_Menu) $Menu\nExpected return: array\nThe passed array contains the usual WordPress menu arguments, plus a couple of conditional arguments which CMB2 uses to add features (shown are the default values):\nphp\n$defaults = array(\n    'action'         => array( $this->page, 'render' ),\n    'capability'     => 'manage_options',\n    'hide_menu'      => false,\n    'icon_url'       => '',\n    'menu_first_sub' => null,\n    'menu_slug'      => '', // option_key if 'menu_slug' was not passed on box(es)\n    'menu_title'     => '', // same as title, if not passed on box(es)\n    'parent_slug'    => '',\n    'position'       => null,\n    'title'          => '', // title of LAST box if page_title not passed on box(es)\n);\nChanging action here is similar to using the display_cb box parameter, but this will supersede it. Not recommended. Special parameters:\n\nhide_menu, if true, will add page, but hide it from menu. Note that all other menu params must be present and \"normal\". \nmenu_first_sub if set to a string and this is a top-level page (i.e., no parent_slug), setting this will change the label on the first sub-menu item to this string. (WordPress normally just repeats the top-level menu string.)\n\ncmb2_options_shared_properties\nArguments: (array) $shared, (CMB2_Page_Shared) $Shared\nExpected return: array\nThis array contains the CMB2 box parameters which can be set on any box, and is available for filtering just after CMB2 determines their values. Note these are type-checked, and errant keys will be removed, so you cannot pass arbitrary properties here. The defaults, if none of these properties are included on any boxes, are:\nphp\n$defaults = array(\n    'capability'     => 'manage_options',\n    'cmb_styles'     => TRUE,\n    'display_cb'     => FALSE,\n    'enqueue_js'     => TRUE,\n    'hide_menu'      => FALSE,\n    'icon_url'       => '',\n    'menu_title'     => '',\n    'menu_first_sub' => NULL,\n    'parent_slug'    => '',\n    'page_columns'   => 'auto',\n    'page_format'    => 'simple',\n    'position'       => NULL,\n    'reset_button'   => '',\n    'reset_action'   => 'default',\n    'save_button'    => 'Save',\n    'title'          => '', // will be the CMB2 box 'title' on LAST box to have it set\n);\nAllowed variable types for these keys are:\n\ncapability: string,\ncmb_styles: bool\ndisplay_cb: object, bool\nenqueue_js: bool\nhide_menu: bool\nicon_url: string\nmenu_title: string\nmenu_first_sub: null, string\nparent_slug: null, string\npage_columns: numeric\npage_format: string\nposition: null, numeric\nreset_button: string\nreset_action: string\nsave_button: string, bool\ntitle: string\n\nNote to myself: I need to check if display_cb is allowing any callable as it should.. Wanted to add that I would be happy to help maintain the new files if this is merged, if that's something that helps.. I believe, though cannot be absolutely certain, that my branch and trunk should be merged properly.\nMain addition which affected my code was addition of the 'disable_settings_errors' box property; this is now accounted for. The method used to check it lives within its logical home in CMB2_Page_Display. Updated tests to reflect changes, all green from my local box.. ",
    "teamcrisis": "Has any progress been made with this? Preferably something like this:\n\n. ",
    "ashawkat": "@jtsternberg If you guys have implemented the tabbed version of metaboxes ? \n. ",
    "jashwant": "@ashawkat , I am including bootstrap tabs.js separately and that's how I am creating my markup.\n``` php\nfunction my_page_metabox() {\n  $prefix = 'myprefix_';\n$cmb_demo = new_cmb2_box( array(\n    'id'            => $prefix . 'metabox',\n    'title'         => __( 'Page Options', 'cmb2' ),\n    'object_types'  => array( 'page', ), // Post type\n    'context'       => 'normal',\n    'priority'      => 'high',\n    'show_names'    => true,\n  ));\n$cmb_demo->add_field( array(\n    'name'       => __( '', 'cmb2' ),\n    'id'         => $prefix . 'opts',\n    'type'       => 'page'\n  ));\n}\nadd_action('cmb2_init', 'my_page_metabox');\nfunction jt_cmb2_render_page_field_callback( $field, $value, $object_id, $object_type, $field_type_object ) {\n$value = wp_parse_args($value, array(\n    'header_layout' => '',\n    'footer_layout' => ''\n  ));\n  ?>\n  \n\n\n<?php _e('Header', 'myprefix'); ?>\n\n\n<?php _e('Footer', 'myprefix'); ?>\n\n\n\n\n\n\nEnter Header Layout\n\n\n          <?php \n            echo $field_type_object->input( array(\n              'name'  => $field_type_object->_name( '[header_layout]' ),\n              'id'    => $field_type_object->_id( '-header_layout' ),\n              'value' => $value['header_layout'],\n              'desc' => ''\n            )); \n          ?>\n        \n\n\n\n\nEnter Header Layout\n\n\n          <?php \n            echo $field_type_object->input( array(\n              'name'  => $field_type_object->_name( '[footer_layout]' ),\n              'id'    => $field_type_object->_id( '-footer_layout' ),\n              'value' => $value['footer_layout'],\n            )); \n          ?>\n        \n\n\n\n<?php\n}\nadd_filter( 'cmb2_render_page', 'jt_cmb2_render_page_field_callback', 10, 5 );\n```\n@jtsternberg , Is there any side effect with this approach. Although, I've to write a lot of my own, but it's very flexible. Do I need to escape / sanitize the basic fields ( like textbox, select etc ), with this approach ?\n. @jtsternberg , may you please look into my solution ( given above ) and answer the question regarding  escaping / sanitization ?\n. @marcusbattle , can you look at my solution above and confirm that I can use it, till your work is live ?\n. ",
    "ghost": "This feature would be VERY helpful for us, as we currently have to make several metaboxes that would make so much more sense if they were grouped together. Having the option to group all these settings together using tabs, will greatly enhance the user experience IMHO.\nI'm definitely keeping my eye on this thread :+1:\n. Yes, I am on wndows. And already fixed my issue.\nYour code returns this output: \nPHP_OS: WINNT\nThanks\n. @teslima Have you had any luck with this? We are running into the same issue.\n. @teslima I understand what you mean. \nIf you do decide to jump back to CMB2 we came across this https://github.com/WebDevStudios/CMB2-Snippet-Library/issues/21\nWhich helped us get back on track. Apparently the latest options page snippet was based on the trunk version of CMB2. \nUsing https://github.com/WebDevStudios/CMB2/tree/trunk we managed to make the options page work for us. \n. I believe so. \n. ",
    "StaggerLeee": "I vote for this too. Very important.\n. +1\n. ",
    "vasikgreif": "Another +1 here! That would make settings pages WAY more user friendly...\n. Hi everybody, any news on this? What I basically need is to replace the Options Framework that I currently use with CMB2 options page. So, just being able to put fields in a metabox under separate tabs would work great for me!!!\n. Same issue here... Any fix coming for this?\n. Thanks, I saw that post and I'm actually using it to submit new posts on frontend. \nIn this particular case however I need to save all the fields, except of the post content field...\n. For anyone who comes across this, I solved this by adding capability for users on specific pages only:\nphp\n/**\n * Allow the media uploader work on specific pages\n */\nadd_action('init', 'nevestam_allow_contributor_uploads');\nfunction nevestam_allow_contributor_uploads() {\n    $path=$_SERVER['REQUEST_URI'];\n   if ( $path == '/page-slug'\n        || strpos($path,str_replace(site_url(),'',bp_core_get_user_domain( get_current_user_id())) !== false )\n        || $path == '/another-page-slug/'\n    ) {\n        $subscriber = get_role('subscriber');\n        $subscriber->add_cap('manage_options');\n    }\n}\nNot sure if this is a good snippet for the library..:)\n. I also added a filter, which displays only user's media:\n``` php\n/*\n * Display only user-uploaded files to each user\n /\nadd_action('pre_get_posts','ml_restrict_media_library');\nfunction ml_restrict_media_library( $wp_query_obj ) {\n    global $current_user, $pagenow;\n    if( !is_a( $current_user, 'WP_User') )\n        return;\n    if( 'admin-ajax.php' != $pagenow || $_REQUEST['action'] != 'query-attachments' )\n        return;\n    if( !current_user_can('manage_media_library') )\n        $wp_query_obj->set('author', $current_user->ID );\n    return;\n}\n``\n. I don't have an idea how to do the pull requests here, feel free to add it to the snippet library if you like this...:) Thanks\n. Glad this found some use...:)\n. Than I guess this is a feature request...:)\n. Thanks for help, this hook worked!\n. Very cool, thanks!\n. Thanks... Time to learn how thatgrunt` works..:D\n. The CMB2 generator outputs the filter way: http://hasinhayder.github.io/cmb2-metabox-generator/\nAlso, CMB2 Taxonomy (which I'm currently using in my project) probably uses the filter way, at least for field definition: https://github.com/jcchavezs/cmb2-taxonomy\n. Very cool, thanks!\n. Thanks, but the value will still be saved as post meta, won't it? \n. Basically I have a meta box with a dropdown \n```\n        $prefix = 'mw';\n    /**\n     * Initiate the metabox\n     */\n    $cmb = new_cmb2_box( array(\n        'id'            => 'opportunity_details',\n        'title'         => __( 'Opportunity details', 'mw' ),\n        'object_types'  => array( 'mw-crm-opportunity', ), // Post type\n        'context'       => 'normal',\n        'priority'      => 'high',\n        'show_names'    => true, // Show field names on the left\n\n    ) );\n\n    $cmb->add_field( array(\n        'name'       => __( 'Contact', 'mw' ),\n        'id'         => $prefix . 'contact',\n        'type'       => 'select',\n        'options'   => mw_post_type_dropdown_args('mw-crm-contact')\n    ) );\n\n```\nThe dropdown options are just array of posts ID's and name\n```\nfunction mw_post_type_dropdown_args($post_type) {\n    $args = array(\n        'post_type' => $post_type,\n        'posts_per_page' => -1\n        );\n    $query = new WP_Query($args);\n    $posts = $query->get_posts();\n    wp_reset_query();\nreturn wp_list_pluck($posts,'post_title','ID');\n\n}\n```\nWhen I save the post, I need to set the selected dropdown value as the post_parent, when I reload page, I need to get the value again (like $post->post_parent). \nI would like to avoid saving the value as postmeta altogether, as that is not needed for my application.\nHope this makes more clear what I'm trying to achieve.\n. Exactly\n. That doesn't help, still the same problem.. Sorry, it works, my fault. Thanks!. ",
    "themarcusbattle": "@billerickson and everyone else here. Wanted to let you know that this is still on our radar and in progress. We made great progress today at WDS to get this going. So listen out for updates for this functionality in the very near future.\n\n. Sure thing!\nOn Tue, Jan 27, 2015 at 4:11 PM, Justin Sternberg notifications@github.com\nwrote:\n\n@marcusbattle https://github.com/marcusbattle can you merge master into\nyour branch as it's pretty far out of date.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/pull/159#issuecomment-71728743.\n. Hey Justin, my branch has been updated. Let me know if you need anything else.\n. \n",
    "willthemoor": "It requires some shenanigans but you can make tabs out of a single metabox. I did it using title fields.\n1) Make sure jQuery UI is enqueued (or roll your own... tabs are pretty simple). This needs to be hooked to cmb2_after_form to work.\nphp\n    add_action( 'cmb2_after_form', 'your_prefix_admin_scripts' , 10, 4 );\n    function your_prefix_admin_scripts () {\n         wp_enqueue_script('jquery-ui-tabs');\n             // and the jQuery bit in 2) below either inline or called\n    }\n2) Some JS to build the tabs from title fields\n``` js\n    jQuery(document).ready(function($){\n        'use strict';\n    function setUpOptionsTabs () {\n\n        var $container = $('#your-outer-box-div');\n\n        $container.prepend('<ul id=\"tab-nav\"></ul>');\n\n        // create the tabs from title fields\n        $('.cmb2-metabox-title').each(function(i, item){\n            var ret = '<li><a class=\"nav-tab\" href=\"#tab-'+(i+1)+'\">'+ $(this).text() +'</a></li>';\n            $('#tab-nav').append(ret);\n        });\n\n        $container.tabs();\n    }\n\n    setUpOptionsTabs();\n});\n\n```\n3) Within your CMB fields, make use of before_row to insert the markup you'll need for the tab containers. The first title field only get's an opening div:\nphp\n        $cmb->add_field( array(\n            'name' => 'my name',\n            'id'   => 'my-id',\n            'type' => 'title',\n            'before_row' => '<div id=\"tab-1\">'\n        ) );\nSubsequent title fields need to close that one and start a new one.\nphp\n        $cmb->add_field( array(\n            'name' => 'my name',\n            'id'   => 'my-id',\n            'type' => 'title',\n            'before_row' => '</div><div id=\"tab-2\">'\n        ) );\n... and so on.\nYou're last field on the page needs the after_row to close it all up.\nphp\n        $cmb->add_field( array(\n            'name'    => 'The Last Field',\n            'id'      => 'last-id',\n            'type'    => 'text',\n            'after_row' => '</div>', //close final tab\n        ) );\nSidebar: Would be great if new_cmb2_box supported the full set of before and after field methods so that we could skip the first/last thing here. Indeed, with a known set of tabs anyway, we could skip the JS as well by stuffing the entire <ul class=\"tab-nav\"> into the before_row on the meta-box itself.\n4) The tabs themselves will be stacked text links unless you also load the jQuery UI CSS. And then it will still be ugly because... Jquery UI. :) WordPress does have default tab styles but they don't come with the JS for free. Here's some CSS based on the wysiwyg tabs (Visual/Text) that should at least get you started.\n``` css\n        .nav-tab {\n            background: #ebebeb none repeat scroll 0 0;\n            border: 1px solid #e5e5e5;\n            box-sizing: content-box;\n            color: #777777;\n            cursor: pointer;\n            float: left;\n            font: 13px/19px \"Open Sans\",sans-serif;\n            height: 20px;\n            margin: 5px 0 0 5px;\n            padding: 3px 8px 4px;\n            position: relative;\n            top: 1px;\n        }\n        .ui-tabs-active .nav-tab {\n            background-color: #333;\n            color: #fff;\n        }\nHope this helps until tabs land in CMB2 core.\n```\n. Seems to me this ticket should be broken apart. Think the first concern for the CMB2 project itself is to ensure that it's easy to theme. Once that's set, the core library can opt to change it's UI based on contributions and/or users will have an easy way to change it themselves (perhaps via manual CSS include, perhaps via plugin).\nI'm not exactly sure what all it would take to get CMB2 into that space but a monster \"Let's update the UI ticket\" seems like it'll do exactly what this one has done (stay open forever).\nJust thinking out loud here (and admittedly under-informed), there's probably a fairly fixed set of form layouts required, most of which can likely be parsed from the contributions in this thread. Identifying those layouts would be a good first step. Adding the ability to pass a layout as a param to a row (or fieldset) would be a good second step! Then, with that param just turning into a wrapping class, it should be easy to adjust the layout with the existing markup via magic flexbox incantations.\nSeparate from layouts there are type styles and form element styles. Again, if the main metabox container on the page allowed for classes to be passed to it, it would be easy (at least in theory) to apply those types of style adjustments as needed.\nI love the \"looks native to Wordpress\" priority. As long as CMB2 ships with styles having super low specificity, that should be possible while also allowing users an easy way to override them when needed. \n. > As of this commit, it's there. In trunk now.\nSweet! Thank you.\n. 'course you can. Like this:\nphp\n$cmb->add_field( array(\n    'name'    => 'The Field',\n    'id'      => $prefix . 'the-field',\n    'type' => 'textarea_small',\n    'options' => array(\n        'add_row_text' => __( 'Add Another Recommendation', 'odfw' ),\n    ),\n    'repeatable' => true\n) );\nSee here: https://github.com/WebDevStudios/CMB2/wiki/Tips-&-Tricks#override-text-strings-in-field\nBless you lovely people.\n. Thanks. Think the next thing I'd like to add is some HTML boilerplate output a user can stuff into a WP template in order to get the fields printed to the screen quickly. \n. ",
    "hsleonis": "Any update on this?\n@marcusbattle \n. Nice work @rogerlos \n. Hi @darkoromanov, they meant plugins which can only be used by the developers, like frameworks, framework extensions etc. I've uploaded one recently and got the same message :)\n. Ha ha ha\n. ",
    "DevinWalker": "Yeah nice work @rogerlos \n. Great addition. Some field sets can just get too long....\n. @jtsternberg no I'm referring to the ability to add columns like the screenshot. I'm fine with the long arrays in the code.\n. Pretty cool work @pablo-pacheco - combine that with the ability to add tabs then it's really taking it to the next level. \n. @asknaskan nice pull request. I'm looking forward to this merge also. \n. You know what? After looking into the code more closely I notice you have already set this up for us! Filter: cmb2_get_metabox_form_format = BINGO\n```\n/\n * Modify CMB2 Default Form Output\n \n * @param string @args\n * @since 1.0\n /\nadd_filter( 'cmb2_get_metabox_form_format', 'give_modify_cmb2_form_output' );\nfunction give_modify_cmb2_form_output( $args ) {\nreturn '<form class=\"cmb-form\" method=\"post\" id=\"%1$s\" enctype=\"multipart/form-data\" encoding=\"multipart/form-data\"><input type=\"hidden\" name=\"object_id\" value=\"%2$s\">%3$s<div class=\"submit-wrap\"><input type=\"submit\" name=\"submit-cmb\" value=\"' . __( 'Save Settings', 'give' ) . '\" class=\"button-primary\"></div></form>';\n\n}\n```\nI'm assuming this is the proper way to modify the submit button text and wrap...\n. Thanks for the detailed response. I'm outputting my settings via tabs (modified version of example) and the $object_id param is outputting as null. Any idea as to why that would be? I can provide gist of file if you'd like to check it out.\n. Welp, once again I post and then find out the answer. I simply needed to add the supported args to my filter like so:\nadd_filter( 'cmb2_get_metabox_form_format', 'give_modify_cmb2_form_output', 10, 3 );\n. Sure. The best way to explain would be to point you to how EDD does it. I am basically trying to recreate the same functionality. The \"Download Prices\" metabox has a repeater field with an ID attached to each row (see screenshot). \n\nWhen you reorder the rows the ID stays the same. This is important because EDD uses this ID to log purchase information. We want to utilize the ID field similarly and need to make sure the increments are reliable and once set the ID for the field stays.\n\n. From what I see the data-iterator doesn't shift with the rows. I'll take a look at those fields. I was hoping for a quick fix but doesn't look like anything exists right now in CMB2 for this functionality\n. Interesting implementation there.... I got the incremental IDs working also but needed some JS to it working how I wanted.\n. Thanks @jtsternberg - glad you approve\n. I see what you are saying. I guess it's mainly a convenience play. You could do some validation on this field type to ensure that it's in fact an number. Also, you have text_medium / text_small which are pretty much just class changes, so the same argument could be made for those. \n. That's cool. No problem. I get what you're saying.\n. I guess we can use array_splice to insert fields at a certain position, but it's not very evergreen as the plugin author could easily switch around the fields and there's no guarantee that we're hooking in exactly after a certain field.\n. This is great. Thanks for taking the time to answer my questions.\n. I'd love to see this implemented +1\n. +1 here\n. Looks like this specific function is throwing the error: https://github.com/WebDevStudios/CMB2/blob/master/init.php#L163\nWhich is a core WP function... still investigating \n. Got it... adding the full path to the to the function fixes the error we're experiencing in IIS:\n$loaded = load_theme_textdomain( 'cmb2', get_template_directory() . '/languages/' );\nAll the examples on the Codex use get_template_directory as well: https://codex.wordpress.org/Function_Reference/load_theme_textdomain \nI'm not sure why CMB2 omitted it. PR coming in a sec\n. Good point... \n. Good to go now\n. @mathetos that's the exact functionality I could use.\n. @jtsternberg would you be interested in a PR adding this functionality?\n. @jtsternberg tip of the hat to you sir. That looks very clean. \n. I feel a LOT of users could find this type of functionality useful. Adding a more description toggle for repeatable groups sounds like it should be CMB2 core. Otherwise, everyone will be left with generic labels and increments. :(\n. I understand your apprehension there and having worked closely with the repeater JS know where you're coming from. Let me just cast my vote for this in the future once the repeater is stabilized. \n. Oh we're back in business! :+1: \n. I'm also seeing that +1\n. PR on core or rather the snippet? https://github.com/WebDevStudios/CMB2-Snippet-Library/tree/master/options-and-settings-pages\n. So you can get around this by slighly modifying the bootstrap include like so:\nif ( file_exists( WP_PLUGIN_DIR . '/cmb2/init.php' ) && !defined( 'CMB2_LOADED') ) {\n    require_once WP_PLUGIN_DIR . '/cmb2/init.php';\n} elseif ( file_exists( GMB_PLUGIN_PATH . '/includes/libraries/metabox/init.php' )&& !defined( 'CMB2_LOADED') ) {\n    require_once GMB_PLUGIN_PATH . '/includes/libraries/metabox/init.php';\n} elseif ( file_exists( GMB_PLUGIN_PATH . '/includes/libraries/CMB2/init.php' ) && !defined( 'CMB2_LOADED') ) {\n    require_once GMB_PLUGIN_PATH . '/includes/libraries/CMB2/init.php';\n}\nThe issue with this is not every plugin and theme author will include CMB2 like this... so, we run into the conflict with these helper functions. I still propose that these are wrapped in function_exist conditionals. Would like to hear your thoughts... \n. Hey @JPry they are using init.php like the include in my comment above\n. @jtsternberg there are indeed a couple checks in place, but as we see there are still conflicts reported. I suggest just keeping an eye out in the future for this in case it's reported more frequently. Closing for now.\n. @jtsternberg the best way to reproduce it is to download and install Give https://wordpress.org/plugins/give and Maps Builder https://wordpress.org/plugins/google-maps-builder/ from the repo. Give includes CMB like:\nif ( file_exists( WP_PLUGIN_DIR . '/cmb2/init.php' ) ) {\n    require_once WP_PLUGIN_DIR . '/cmb2/init.php';\n} elseif ( file_exists( GIVE_PLUGIN_DIR . '/includes/libraries/cmb2/init.php' ) ) {\n    require_once GIVE_PLUGIN_DIR . '/includes/libraries/cmb2/init.php';\n} elseif ( file_exists( GIVE_PLUGIN_DIR . '/includes/libraries/CMB2/init.php' ) ) {\n    require_once GIVE_PLUGIN_DIR . '/includes/libraries/CMB2/init.php';\n}\nNote: I have added an additional check for && ! defined( 'CMB2_LOADED' ) into the conditionals above as seen here: https://github.com/WordImpress/Give/blob/master/includes/admin/register-settings.php#L1116\nMaps Builder was a bit different. I had just included it like so: \nrequire_once GMB_PLUGIN_PATH . 'includes/libraries/metabox/init.php';\nhttps://github.com/WordImpress/Google-Maps-Builder/blob/d90a1f2a786be4257fdb1d0baa1717167bfc6aae/google-maps-builder.php#L219\n... but now I've changed it to be like the new Give implementation if you look at the master branch. It appears to have resolved the issue but if you want to reproduce it install both repo version since this hasn't been pushed yet. \nThe main issue comes from people simply copying the include method from Getting Started: https://github.com/WebDevStudios/CMB2/wiki/Basic-Usage which doesn't actually check if CMB2 has been loaded already. \nLet me know if you have any questions ;) \n. No problem, glad it's addressed \n. Thanks for the trust \ud83d\udc4d \nIf I get the time I'll submit a PR with the fix to address it \ud83c\udf89 \n. ",
    "darkoromanov": "Hey @rogerlos thank you very much, your code is what in Italian is called \"fat that runs\" :)\nJust out of curiosity, do you have any idea about what wp.org meant by saying \"we don't want any more developer only plugins\"?? I have 3 plugins there and I'm writing the forth, so I'm quite interested :-\\\n. Oh I see! I was reading it like it was: \"we don't want any more developers, we only want plugins\" :) \n. ",
    "andreasupftw": "@rogerlos @themarcusbattle \nMaybe a PR?\n. ",
    "websumon": "@rogerlos How it's possible to display pages or posts ??\n. I have created it by 'type'    => 'textarea_code', is it correct way ? has it another better way ?\n$cmb->add_field( array(\n    'name'    => __( 'Custom Style CSS', 'prefix' ),\n    'desc'    => __( 'Add Your Custom CSS Styles', 'prefix' ),\n    'id'      => 'my_custom_editor',\n    'type'    => 'textarea_code',\n) );\n. ",
    "kuzmenko1256": "Quite recently, our team has created an extension that solves the problem https://github.com/LeadSoftInc/cmb2-tabs\n. ",
    "WhereBeTheDan": "I altered @willthemoor method to be a pure javascript solution. This assumes you want to create tabs within a single metabox:\n\n\nEnqueue jQueryUI:\nadd_action( 'cmb2_after_form', 'your_prefix_admin_scripts' , 10, 4 );\n    function your_prefix_admin_scripts () {\n         wp_enqueue_script('jquery-ui-tabs');\n    }\n\n\nAdd this to your admin scripts:\n```\n$('.cmb2-metabox').each( function(index, el) {\n    var tabs = $(this).find('.cmb-type-title');\nif (tabs.length > 1) {\n    var metabox = $(this),\n    nav = $('');\ntabs.each( function(index, el) {\n    nav.append('<li><a class=\"nav-tab\" href=\"#' + metabox.attr('id') + '-tab-' + index + '\">' + $(this).find('.cmb2-metabox-title').text() + '</a></li>');\n\n    $(this).nextUntil('.cmb-type-title').addBack().wrapAll('<div id=\"' + metabox.attr('id') + '-tab-' + index + '\" class=\"tab\" />');\n\n});\n$(this).prepend(nav);\n$(this).tabs();\n}\n});\n```\n\n\nAdd any number of the default cmb2 title field type to your metabox. All other fields until the next title field will be grouped as a tab.. \n\n",
    "stabilimenta": "Here is some code that will create tabs for dynamically created repeating sections, in case it might be useful to someone. It doesn't rely on ID like jquery-ui tabs, and instead works with class.\nThis is my CMB2 code. My code is using the before_row, after_row attributes to get most of the html in place:\n$content_sections->add_group_field( $group_field_id, array(\n    'id'      => 'section-content',\n    'type'    => 'wysiwyg',\n    'options' => array( 'textarea_rows' => 5, ),\n    'before_row'   => '\n        <div class=\"cmb2-tabs\">\n            <ul class=\"tabs-nav\">\n                <li class=\"current\"><a href=\"#tab-content-1\">Content</a></li>\n                <li><a href=\"#tab-content-2\">Content Styling</a></li>\n            </ul>\n            <div class=\"tab-content tab-content-1 current\">\n    ',\n    'after_row'    => '</div>',\n) );\n\n$content_sections->add_group_field( $group_field_id, array(\n    'name' => esc_html__( 'Inner CSS classes', 'cmb2' ),\n    'id'   => 'section-css-classes',\n    'type' => 'text_medium',\n    'default' => 'page-width',\n    'row_classes'    => 'half',\n    'before_row'   => '<div class=\"tab-content tab-content-2\"><div class=\"row\">',\n) );\n\n$content_sections->add_group_field( $group_field_id, array(\n    'name' => esc_html__( 'Section ID', 'cmb2' ),\n    'id'   => 'section-ID',\n    'type' => 'text_medium',\n    'row_classes'    => 'half',\n    'after_row'   => '</div>',\n) );\n\n$content_sections->add_group_field( $group_field_id, array(\n    'name' => esc_html__( 'Outer CSS classes', 'cmb2' ),\n    'id'   => 'section-css-classes-2',\n    'type' => 'text_medium',\n    'row_classes'    => 'half',\n    'before_row'   => '<div class=\"row\">',\n) );\n\n$content_sections->add_group_field( $group_field_id, array(\n    'name'    => esc_html__( 'Background Color', 'cmb2' ),\n    'id'   => 'section-background-color',\n    'type' => 'colorpicker',\n    'default'  => '',\n    'desc'    => esc_html__( 'Background color for section', 'cmb2' ),\n    'row_classes'    => 'half',\n    'after_row'   => '</div>',\n) );\n\n$content_sections->add_group_field( $group_field_id, array(\n    'name' => esc_html__( 'Background Image', 'cmb2' ),\n    'id'   => 'section-image',\n    'type' => 'file',\n    'options' => array(\n        'url' => false, // Hide the text input for the url\n    ),\n    'desc'    => esc_html__( '&#8776;1400px x 915px', 'cmb2' ),\n) );\n\n$content_sections->add_group_field( $group_field_id, array(\n    'name'             => esc_html__( 'Parallax Background', 'cmb2' ),\n    'desc'             => esc_html__( 'Does not work on mobiles.', 'cmb2' ),\n    'id'               => 'section-parallax',\n    'type'             => 'radio_inline',\n    'default' => 'true',\n    'options'          => array(\n        'false' => esc_html__( 'Off', 'cmb2' ),\n        'true'   => esc_html__( 'On', 'cmb2' ),\n    ),\n    'after_row'    => '\n            </div><!-- /.tab-content -->\n        </div><!-- /.cmb2-tabs -->\n    ',\n) );\n\nThen I included this javascript file in the admin:\njQuery(document).ready(function($) {\n    $('.tab-content:not(.current)').css('display', 'none');\n    $('body').on('click', '.tabs-nav a', function(event) {\n        event.preventDefault();\n        $(this).parent().addClass(\"current\");\n        $(this).parent().siblings().removeClass(\"current\");\n        var tab = $(this).attr(\"href\");\n        tab = tab.replace(\"#\", \".\"); // change anchor tag # (id ref) to . (class ref) so it works with repeating sections\n        // alert(tab);\n        $(this).closest('.cmb2-tabs').children('.tab-content').not(tab).css('display', 'none');\n        $(this).closest('.cmb2-tabs').children(tab).fadeIn();\n    });\n});\n\nAnd included a css file in the admin:\n.no-js .cmb2-tabs { display: none; }\n\n.cmb2-tabs .tabs-nav\n{\n    margin: 6px 0 0 10px;\n    clear: both;\n    overflow: hidden;\n}\n\n.cmb2-tabs .tabs-nav li {\n    list-style: none;\n    float: left;\n    position: relative;\n    top: 0;\n    margin: 1px .2em 0 0;\n    padding: 0;\n    white-space: nowrap;\n    border: 1px #CCC solid;\n    background-color: #EEE;\n}\n\n.cmb2-tabs .tabs-nav li a {\n    display: block;\n    text-decoration: none;\n    font-size: 14px;\n    line-height: 18px;\n    padding: 10px 20px;\n}\n\n.cmb2-tabs .tabs-nav li.current {\n     background-color: #FFF;\n     border-bottom: 1px #FFF solid;\n }\n\n.cmb2-tabs ul li a:focus {\n    -webkit-box-shadow: none;\n    box-shadow: none\n}\n\n.cmb2-tabs .tab-content\n{\n    padding: 10px 20px;\n    border: 1px #CCC solid;\n    border-bottom: 1px #CCC solid;\n    margin-top: -1px;\n    background-color: #FFF;\n}\n\n. I understand how I could use 'before_row' and 'after_row' to add wrappers and then use a lot of css, but I am hoping there is a better way. I'm trying to get a Dimensions section which will have separate fields for \"width\", \"height\" & \"depth\", all in single row.\n. OK. I got it set up using css and a combination of before/after and row_classes. Thanks!\n. Yes, a text_field is what I reverted to. It used to be that text_number was a custom field. However, it seems to be rolled into the core now. See this: https://github.com/WebDevStudios/CMB2/pull/214\nI used to have a custom function, but when I updated CMB2 it started appearing twice on my WP admin pages, so I removed my function, and then it appeared once, so it seems to be part of the core. However, there isn't any documentation of it, and it seems very buggy. (No decimals). \nBTW, I also tried using the text_money field, but found I couldn't get it to sort by that in my WP_Query, as it adds non-numeric things to the string.\nThe regular text field works, as long as the end user doesn't put in stupid stuff like $. Hopeing for the best. Thanks!. 'query_args' => array( 'type' => 'application/pdf', ),\nworks for limiting a selection from the library, but it doesn't limit a selection when uploading a file.\nIs there another method to restrict what can be uploaded to the library?. ```\nfunction evcd_register_page_metaboxes() {\n    global $theme_prefix;\n$extra_content_sections = new_cmb2_box( array(\n    'id'            => $theme_prefix . 'page-sections',\n    'title'         => esc_html__( 'Extra Content Sections', 'evcd_textdomain' ),\n    'object_types'  => array( 'page', ), // Post type\n    'show_on'      => array( 'key' => 'page-template', 'value' => 'page-full-width.php' ),\n    'priority'     => 'high',\n    'closed'       => false,\n) );\n\n$group_field_id = $extra_content_sections->add_field( array(\n    'id'          => $theme_prefix . 'content-group',\n    'type'        => 'group',\n    // 'repeatable'  => false, // use false if you want non-repeatable group\n    'options'     => array(\n        'group_title'   => esc_html__( 'Content Section {#}', 'evcd_textdomain' ), // since version 1.1.4, {#} gets replaced by row number\n        'add_button'    => esc_html__( 'Add Another Content Section', 'evcd_textdomain' ),\n        'remove_button' => esc_html__( 'Remove Content Section', 'evcd_textdomain' ),\n        'sortable'      => true, // beta\n        // 'closed'     => true, // true to have the groups closed by default\n    ),\n) );\n\n// Id's for group's fields only need to be unique for the group. Prefix is not needed.\n\n$extra_content_sections->add_group_field( $group_field_id, array(\n    'name'    => esc_html__( 'Content Heading', 'evcd_textdomain' ),\n    'id'      => 'section-heading',\n    'type'    => 'text',\n    'before_row'   => '\n        <div class=\"cmb2-tabs\">\n            <ul class=\"tabs-nav\">\n                <li class=\"current\"><a href=\"#tab-content-1\">Content</a></li>\n                <li><a href=\"#tab-content-2\">Styling + Options</a></li>\n            </ul>\n            <div class=\"tab-content tab-content-1 current\">\n                <div class=\"row\">\n    ',\n    'after_row'   => '\n            </div><!-- ./row -->\n    ',\n) );\n\n$extra_content_sections->add_group_field( $group_field_id, array(\n    'name'    => esc_html__( 'Content', 'evcd_textdomain' ),\n    'id'      => 'section-content',\n    'type'    => 'wysiwyg',\n    'options' => array( 'textarea_rows' => 20, ),\n    'before_row'   => '\n        <div class=\"row\">\n    ',\n    'after_row'   => '\n            </div><!-- ./row -->\n    ',\n) );\n\n$extra_content_sections->add_group_field( $group_field_id, array(\n    'name' => esc_html__( 'Content CSS classes', 'evcd_textdomain' ),\n    // 'desc' => esc_html__( 'Applies css class to inner content wrapper', 'evcd_textdomain' ),\n    'id'   => 'content-classes',\n    'type' => 'text',\n    'desc'             => esc_html__( 'Class names: full, twothirds, half, third, quarter, dark, light, right, left, center, padded, two-cols, three-cols, four-cols', 'evcd_textdomain' ),\n    'before_row'   => '\n        <div class=\"row\">\n    ',\n    'after_row'    => '\n                </div><!-- ./row -->\n            </div><!-- /.tab-content -->\n    ',\n) );\n\n$extra_content_sections->add_group_field( $group_field_id, array(\n    'name' => esc_html__( 'Section ID', 'evcd_textdomain' ),\n    // 'desc' => esc_html__( 'CSS ID for this section', 'evcd_textdomain' ),\n    'id'   => 'section-ID',\n    'type' => 'text_medium',\n    'desc' => esc_html__( 'Used for menu linking. For example, if ID is \"my-section\" menu link is \"#my-section\".', 'evcd_textdomain' ),\n    'row_classes'   => 'half',\n    'before_row'   => '\n        <div class=\"tab-content tab-content-2\">\n            <div class=\"row\">\n    ',\n) );\n\n$extra_content_sections->add_group_field( $group_field_id, array(\n    'name' => esc_html__( 'Section Wrapper CSS classes', 'evcd_textdomain' ),\n    // 'desc' => esc_html__( 'Applies css class to inner content wrapper', 'evcd_textdomain' ),\n    'id'   => 'section-css-classes',\n    'type' => 'text_medium',\n    'desc'    => esc_html__( 'page-width class will make it same width as page.', 'evcd_textdomain' ),\n    'row_classes'   => 'half',\n    'after_row' => '\n            </div><!-- ./row -->\n    ',\n) );\n\n$extra_content_sections->add_group_field( $group_field_id, array(\n    'name'    => esc_html__( 'Background Color', 'evcd_textdomain' ),\n    'id'   => 'section-background-color',\n    'type' => 'colorpicker',\n    'options' => array(\n        'alpha' => true, // Make this a rgba color picker.\n    ),\n    'before_row'   => '<div class=\"row\">',\n    'after_row'   => '</div><!-- ./row -->',\n) );\n\n$extra_content_sections->add_group_field( $group_field_id, array(\n    'name' => esc_html__( 'Background Image', 'evcd_textdomain' ),\n    'id'   => 'section-image',\n    'type' => 'file',\n    'options' => array(\n        'url' => false, // Hide the text input for the url\n    ),\n    'before_row'   => '<div class=\"row\">',\n    'after_row'   => '</div><!-- ./row -->',\n) );\n\n$extra_content_sections->add_group_field( $group_field_id, array(\n    'name'             => esc_html__( 'Parallax Background', 'evcd_textdomain' ),\n    'desc'             => esc_html__( 'Does not work on mobiles.', 'evcd_textdomain' ),\n    'id'               => 'section-parallax',\n    'type'             => 'radio_inline',\n    'default' => 'false',\n    'options'          => array(\n        'false' => esc_html__( 'Off', 'evcd_textdomain' ),\n        'true'   => esc_html__( 'On', 'evcd_textdomain' ),\n    ),\n    'before_row'   => '<div class=\"row\">',\n    'after_row'    => '\n                </div><!-- ./row -->\n            </div><!-- /.tab-content -->\n        </div><!-- /.cmb2-tabs -->\n    ',\n) );\n\n}\n```. I am using 2.2.4.. I will update!. Yes, I can confirm the update fixed it. Sorry I didn't think about that before posting. Thank you for your help.. ",
    "polupraneeth": "I have made a simple CMB2 Tabs extension that solves the problem.\nCMB2 Tabs\nhttps://github.com/stackadroit/cmb2-extensions. Hi, @tw2113 sorry I am not to good in English, unable to understand your comment. Should i have to make some changes ?  . Done, moved the  ob_start() to line 825 :). ",
    "manzoorwanijk": "Do I still need my own tweaking/extension or there is something in the core to create tabs?. @nsrosenqvist would be waiting for an update from you :) Thanks. @tw2113 yes, adding one more for specific $page_hook would be a good option. Going to add and push that :). @jtsternberg You may read the documentation of \"load-{page_hook}\" here. It is explained how this hook can be used.\nLet me give you an example. I'm a developing a plugin in which I need to make use of WP_List_Table and thus I need to provide some Screen Options. I would prefer to hook into the option page specific hook for add_screen_option instead of admin_init which is fired for every screen that I don't need to care about. Like this\nphp\nadd_action( \"load-{$page_hook}\", 'add_custom_screen_option' );\nfunction 'add_custom_screen_option() {\n    $option = 'per_page';\n    $args = [\n        'label'   => 'Players',\n        'default' => 5,\n        'option'  => 'players_per_page'\n    ];\n    add_screen_option( $option, $args );\n}. CMB2 already makes use of one such hook, see here. So it is better to have more control over the page customizations.. @tw2113 I tried this snippet in functions.php of the child theme as well as in the plugin file, but the result is the same.\nregister_setting() is in /wp-admin/includes/plugin.php in WP 3.8 and in WP 4.9, it's in /wp-includes/option.php. I fear that it could be the same with WP 4.6 because of this. I'll test it with that version as well and let you know.. Yes! My fear came out to be true! It's the same in WP 4.6 and works perfectly in WP >= 4.7\n\n. @taunoha, that looks close enough but I wanted all the tab fields in single option key. The tab navigation should be JavaScript based without page reload.\nI have now myself built something cool on those lines, just finishing it up :). @taunoha for example if there is a theme/plugin which has too many options to customise, it makes the page too long. It can easily be divided (visually into tabs). Creating separate menus and thus different option keys doesn't make sense in such case.. @tw2113 remove_submenu_page will result in that page not being created at all, thus showing, \"Sorry, you are not allowed to access this page.\"\nRegaining the menu highlight can be easily done by using parent_file filter. . I mean the value for the default parameter of the group field.\nYes, jQuery can be used for that. Thanks. I need it for options_page. I tried to look for an appropriate hook to use for setting the defaults for a group field but couldn't find one.. I finally decided to use \"cmb2_override_{$a['field_id']}_meta_value\" hook this way:\n```php\nadd_filter( 'cmb2_override_my_group_meta_value', function ( $data, $object_id, $args, $cmb ) {\n// If there is no value for the field\nif ( empty( cmb2_options( $args['id'] )->get( $args['field_id'] ) ) ) {\n\n    $my_field1 = get_my_field1();\n    $my_field2 = get_my_field2();\n\n    $data = array( compact( 'my_field1', 'my_field2' ) );\n}\nreturn $data;\n\n}, 10, 4 );. It's for the options-page. The data of the repeatable group is obviously stored like this\n```\nArray\n(\n    [0] => Array\n        (\n            [field_1] => some value like value_0_1\n            [field_2] => some value like value_0_2\n        )\n[1] => Array\n    (\n        [field_1] => some value like value_1_1\n        [field_2] => some value like value_1_2\n    )\n\n[2] => Array\n    (\n        [field_1] => some value like value_2_1\n        [field_2] => some value like value_2_2\n    )\n\n)\n``\nInside the callback, how do I know which entry is being rendered, 0, 1 or 2? I just need to know the index of the group entry that is currently being rendered, so that I can fetch the correct value from the saved data.. There is$indexas theCMB2_Field` attribute, which reads \"Grouped Field's current numeric index during the save process\"\nI can do something like this\n```php\nfunction render_after_field_2( $field_args, $field ) {\n// get the group index\n$index = $field->group->index;\n\n// fetch the saved group value\n$group_val = $field->group->value();\n\n// get the field_1 value\n$field_1 = $group_val[ $index ]['field_1'];\n\n// use the value\n\n}\n```\nIt does the job, but I want to make sure this is the right way to do it.. Closing this in favor of #1166 . No, the issue is not like that. Let me explain.\nIf I create a custom field type and use autoloader. If my class names start with CMB2, then cmb2_autoload_classes is also called and that initial check is passed and thus a file which doesn't belong to CMB2 is included, thus giving a warning.\nYou can check by activating my custom field type select_plus.. Yes, I can change the class name(s), but that check makes it to be safer and there should be no issues with that check.. @jtsternberg I understand the concern. Thanks :). @tw2113 I already did that. I named my class as CMB2_Type_Select_Plus, which passes that check by autoloader and thus causes the error.. > Hmm I don't have that issue. What version of php are you using, and can you provide your configuration where you are setting the display_cb?\nI was testing my plugin on PHP 5.2 (still supported by WordPress) and faced that issue. I use a custom callback to display the settings page which has UI tabs as mentioned in #1139 . The issue is caused by if ( empty( $this->options )... in get_options() here\nA possible solution would be to\n - Set $options to NULL here\n - Replace if ( empty( $this->options )... above with if ( is_null( $this->options ).... Before merging it, we need to make sure that the initial null value is not returned where an array may be expected, just not to break the existing code. For example see the return statement here. May be we should test such cases.. > CMB2_Option::delete_option() isn't used anywhere in the entire CMB2 codebase.\nMay be some plugin/theme uses it?. yes, that's off course better :). Yes, I tested it for all: WP < 4.7, = 4.7 > 4.7.. ",
    "tw2113": "Still need to do your own thing last I knew. I haven't seen any changes made/released with CMB2 core that would indicate otherwise.. What all ideas did you have for this one Justin, if you can recall. Better organization? More details in the sections? Increased gif usage?\n. I'd do some inspecting with your browser's developer tools to check for any issues in the console and network tabs. It's really hard for us to say at all what's going on without any other information.. The only logos I'm seeing on the left are the skype logo with the first one shown. With dev tools, I noticed that there is a  but it's not showing anything. It also appears to be missing the generic \"fa\" class. Is this what's supposed to show something for the second post?\nNot really seeing anything wrong regarding paths here, but I may be wrong. Network tab for my browser dev tools isn't showing anything for 404 errors or similar, so everything trying to be loaded, is succeeding.. I am still curious what you're seeing with your browser dev tools and what may or may not be getting held up with the requests to the browser. This is something that can be checked on and screenshot without setting up any sort of team viewer session.\nProviding the code you're using on all parts may present something as well. Also anything in error logs that look suspicious or related would also help.. Pretty much what the filter is for, to help aid for alternative locations or simply when CMB2 itself can't accurately locate the proper place.. @infurno did you ever figure this one out? If you want to start a thread over at https://wordpress.org/support/plugin/cmb2. I can give it a crack to figure out and see if I can reproduce at all, or perhaps see what's happening in your install specifically.\n. hey @jtsternberg do we still want to keep this one around? Does anyone really use Backbone any more, outside of the media library?. Hi Jahur, if you would be so kind, could you go start a forum thread over at https://wordpress.org/support/plugin/cmb2 and we'll get your support questions taken care of there. We're leaving GitHub for confirmed issues or enhancement requests. Thanks.\n. Hi @brunoramalho  \nIf you would be so kind, could you please open up a support thread over at https://wordpress.org/support/plugin/cmb2. We are trying to keep support on the official plugin page. We'll get you taken care of there, and if we confirm that you have found a bug, we will bring the findings over to GitHub for issue tracking and patching.\n. Hi @bearded-avenger  \nIf you would be so kind, could you please open up a support thread over at https://wordpress.org/support/plugin/cmb2. We are trying to keep support on the official plugin page. We'll get you taken care of there, and if we confirm that you have found a bug, we will bring the findings over to GitHub for issue tracking and patching.\n. Hi @websygen  \nIf you would be so kind, could you please open up a support thread over at https://wordpress.org/support/plugin/cmb2. We are trying to keep support on the official plugin page. We'll get you taken care of there, and if we confirm that you have found a bug, we will bring the findings over to GitHub for issue tracking and patching.\n. @sb-lc could you post what you're using for your custom field type? Would like to see what could possibly be done to help get that fixed appropriately.\n. Hi @GregLancaster71  \nIf you would be so kind, could you please open up a support thread over at https://wordpress.org/support/plugin/cmb2 and we'll get you taken care of there for this specific topic. If we confirm that you have found a bug, we will bring the findings over to GitHub for issue tracking and patching.\n. Justin will be better off with the javascript bug in this case then.\n. Hi @jimmyphong \nIf you would be so kind, could you please open up a support thread over at https://wordpress.org/support/plugin/cmb2. We are trying to keep support on the official plugin page. We'll get you taken care of there, and if we confirm that you have found a bug, we will bring the findings over to GitHub for issue tracking and patching.\n. Out of curiosity, have you checked some of the other existing field types and seen how they were done? Just an idea to nudge you in the right direction.\n. Let's move this over to the CMB2 support forum please, and we'll see what we can come up from there. It's definitely more support question than an actual confirmed bug. https://wordpress.org/support/plugin/cmb2\nJust start a new thread there with the same information.\n. I'm going to close due to perceived lack of interest since originally opening many years ago.\nIf someone wants to take this one on, we very happily accept PRs and contributions.. Any issues still lingering here @GregLancaster71 ?\n. Can someone re-test with the latest version of trunk, please?\n. @dreiacht if you could provide your configuration code, we can look into it and try to see what may be going on.. Can you link to the repo that provides the contents of class-cmb2-render-address-field.php or simply provide that file itself, so we can reproduce as close as possible.. Ah, fair enough, it's from the snippet library :D . So I put a breakpoint on the sanitize method in the address field class, and filled in 3 different addresses in one group. I then hit submit and waited for the breakpoint to catch. The meta values I saw come in was an array of 3 indexes. In each index was the keys specified, address 1, address 2, etc. However the 3rd index had an array empty of values. 'address_1' => '' and so on. Towards the end, the plugin does an array_filter, which is going to clear out any resulting empty items. Thus why we're losing items past a certain amount.\nThe question turns to why is there an empty version being submitted? I moved my focus to the repeater and how you can dynamically fill in new groups for a new address.\nFirst one, for an abbreviated example, has ID attributes of  _school_guideline_sections_0_cmb_address_address_1_0 and _school_guideline_sections_0_cmb_address_address_2_0 for the first grouping. Add a new one, and we get _school_guideline_sections_0_cmb_address_address_1_1 and _school_guideline_sections_0_cmb_address_address_2_1 First number at the end is for which address we're dealing with, and then the last part is which index in the metabox.\nHere's where it gets interesting, on the 3rd grouping, we get _school_guideline_sections_0_cmb_address_address_2_1 and then _school_guideline_sections_0_cmb_address_address_2_2\nOn the forth, I'm seeing _school_guideline_sections_0_cmb_address_address_2_2 and _school_guideline_sections_0_cmb_address_address_2_2\nFor whatever reason, the incrementer/iterator for the repeatable aspect is getting confused and not assigning attributes properly. Looks like it's doing it for the rest of them as well. the city field is getting stuck at 2 for example.\nSoooooo, my hunch is something's up with the javascript in this case, and how it's handling repeating the fields in this custom field type.. Thoughts on this @jtsternberg ?. @alanef see https://github.com/WebDevStudios/CMB2/wiki/Troubleshooting#cmb2-urls-issues. @jamiechong any chance to have tested this one yet?\n. No worries, thanks for responding. Going to close for the time being. If someone else comes back with similar issues, we can revisit.\n. Are the parts for CMB2 Conditional in this code snippet already? or is that being added/toggled elsewhere? Just wanting to make sure we have everything we need, other than CMB2 Conditional active, to recreate what you're experiencing.. @jtsternberg is the cmb.cleanRow() js method supposed to clear out checked/selected states when doing a clone appending? That's what I'm getting when I check the JS, but definitely not what @TheNewGuy16 is wanting. Not sure if there's going to be way to override this.. Also curious if you could add your own snippet of js that checks after the ajax is done adding. Just throwing the thought out there, I lack an actual working solution for that one.. Closing along the same lines as #557 and https://github.com/WebDevStudios/CMB2/pull/557#issuecomment-236802807\n. Please use the reaction feature for showing support for this being touched on. Adding comments with \"+1\" and that's it muddles the issue and details about actual implementation.. Nothing I've heard of. Given Justin's comment above, help getting the javascript refactored would be the best first step to help get this more of a reality.. From my end, I'd love to get various people testing this to make sure it's not getting any js console errors or issues with saving data at the end, before it gets merge in at all.. Closing in favor of @jcchavezs' plugin above.\n. Hi @ogdsgn if you would be so kind, could you start a thread over at https://wordpress.org/support/plugin/cmb2 and we'll get your questions answered there.\n. No worries.\n. I'm going to close due to the age, some slight lack of detail for exactly which code snippet was used at the time, and the hope that it's been resolved since, or there are maybe other open issues with more detail/discussion going on that better highlight everything.\nWe can also always re-visit later with more detail if needed.. Assuming \"ftg_gallery\" is the ID given to the file list, I'm not seeing anything that would cause this, and I'm using a copy/paste from the wiki page itself. It output the file list fine.\nI think this is minor enough we could close. If it comes up again, we'll address at that time.\n. @Gaffen did you ever get the chance to re-test this one?\n. @elbsurfer You're going to want to find a technique for migrating domain URLs that takes serialized data into account. Straight SQL statements likely aren't going to.\nThis looks like a solid tutorial for a better migration process http://www.codeforest.net/how-to-migrate-wordpress-site. @jtsternberg you mention this being in trunk, did it for sure get out as part of an official release since?\n. Justin, I've been pointed to https://buddypress.trac.wordpress.org/changeset/8392/trunk/.travis.yml for my BuddyPress patch of the same nature, may be worth doing ourselves here.\n. Yeah, will do soon, probably at the same time I update my BP patch later.\n. Closing due to no recent activity, and likelihood of issue being moved on from since. If OP returns, please start a support thread over at https://wordpress.org/support/plugin/cmb2 and we'll get things taken care of there.\n. Can confirm as well. Here's my saved meta when I did some debugging for a forum thread.\nBEFORE trying to reorder, after initial save:\na:2:{\n    i:0;\n    a:2:{\n        s:23:\"_omni_grupo_anexo_title\";\n        s:4:\"1234\";\n        s:31:\"_omni_portfolio_attachment_list\";\n        a:1:{\n            i:10897;\n            s:78:\"http://wds.dev/wp-content/uploads/2015/08/4dffa40bbefa68fd45af84442d4de867.gif\";\n        }\n    }\n    i:1;\n    a:2:{\n        s:23:\"_omni_grupo_anexo_title\";\n        s:4:\"5678\";\n        s:31:\"_omni_portfolio_attachment_list\";\n        a:1:{\n            i:10884;\n            s:78:\"http://wds.dev/wp-content/uploads/2015/08/046c93773389381773f7eb241df44632.gif\";\n        }\n    }\n}\nAFTER reordering and second save:\na:2:{\n    i:0;\n    a:2:{\n        s:23:\"_omni_grupo_anexo_title\";\n        s:4:\"5678\";\n        s:31:\"_omni_portfolio_attachment_list\";\n        a:1:{\n            i:10897;\n            s:78:\"http://wds.dev/wp-content/uploads/2015/08/4dffa40bbefa68fd45af84442d4de867.gif\";\n        }\n    }\n    i:1;\n    a:1:{\n        s:23:\"_omni_grupo_anexo_title\";\n        s:4:\"1234\";\n    }\n}\nImage value switched the index they are in, and the second value is lost.\n. I was using the latest available from .org\n. If needed, I can test the same bits from a site running trunk a bit later or this weekend.\n. Confirmed this is working fine in CMB2 Trunk.\n. @hasinhayder I realize it's been awhile, but can you confirm whether this is still an issue in current versions of CMB2?\n. As is, I can't recreate this, based on what information we have available. Until someone can provide steps to successfully recreate, I'm going to close.. Closing as confirmed fixed.\n. Just use trunk as is and carry on :)\n. I believe the PR was already merged, and composed what we have now. However, that means that your usecase is still a bit on the heavy side for the topic.. Hey @vasikgreif could you please start a thread over at http://www.wordpress.org/support/plugin/cmb2 and we'll get your questions answered the best we can there?\nWe try to leave the issues tracker here for confirmed bugs or enhancement ideas, an the support forums for implementation questions.\nThank you :)\n. Closing as not an issue. People can still comment on closed issues if they so choose to :)\nThanks everyone who's donated thus far.\n. Hi @leetee4000 \nA couple things to note.\nWe're no longer doing any development for https://github.com/WebDevStudios/Custom-Metaboxes-and-Fields-for-WordPress/ which is what you're presently using. We recommend moving up to https://github.com/WebDevStudios/CMB2/ which is the next evolution in the library. Because of that, we're also not doing very much support for the old version.\nIs there any reason why you're choosing the old one over the new? \n. I wager the template being used for the page you're embedding all of this on has the_post_thumbnail() called in it, and thus once you get a featured thumbnail attached to that page/post/whathaveyou, it starts displaying. That'd make it not something directly related to CMB itself.\n. I do believe capability manipulation happens once, and is stored in the database. However, depending on how things are done by the user, the manipulation/saving could be running regularly. Say if done on the init hook. I believe most recommend having this specific detail run on activation/deactivation hooks instead.\n. Is it possible to use the sanitization function conditionally based on the format chosen? Or is that F j Y version not saving regardless of the sanitization function used?. Compiling the issue is the fact that javascript and php don't follow the same formats/letters/etc. As the saying goes \"dates are hard\".. Closing as it is said to be covered already in trunk, and probably release versions now.\n. Trunk would have all the latest features and such. Master is more akin to the \"release version\".. Regarding the open ui items bit, if you could create a new enhancement issue for that, we'd appreciate it. It'll get lost being tacked on to this issue here.. Is there any way we could add in fetching the date_format option from the user's General Settings as a default format value as well?\n. Closing as won't fix, despite some tinkering by myself late last week. The reason being is that it's already possible with current field arguments. See the following links. \nhttps://github.com/CMB2/CMB2/wiki/Field-Parameters#query_args\nExample usage: https://github.com/CMB2/CMB2/wiki/Field-Types#taxonomy_select\n. @jtsternberg have you looked into this one at all? Original reporter is still having issues and wondering if there's possible chance for some sort of fix for it.\n. Something is definitely getting mangled up during the save/serialize process, but I'm not sure what, and I have to wonder if its in part because of the javascript involved to repeater fields.\nAs an alternative, in case you're willing to consider it, perhaps try out setting a cap at amount of custom rate details can be added, and provide a field for each. Say 5 total. Just a thought.. There is definitely differences in some of the text_* fields @jtsternberg \n\nSpecifically text_url and text_email get forced down to a new line instead of being inline after the input. Not sure if this can be changed without breaking some amount of backcompat, but it's worth considering.\nLooks like neither get $this->_desc() run on them in CMB2_Types.php\n. @cbergen I realize it's been a year, but by chance can you recall an example usecase for this and what it helps take care of?\n. Confirmed, but I can't determine why the data isn't reaching a point of being able to be saved.\n. With my testing, as dirty as it was, I was just grabbing the ID from $_GET['post'] in the editor screen. By the time everything was getting to processing methods, the fields from the for loop weren't populated.\n. Just tested this myself and it worked. Thanks Justin.\n@chrishandy9 not sure if you're still paying attention here, but give it a go when you got the time, if still needed.\n. I know it's been awhile, but bear with me.\nTrying to make sense of the issue, or issues going on here.\nWhich fields are being the problematic ones, with regards to show_option_none being set to false?\nAlso possible things got fixed since as well, for what it's worth. \n. I know it was working fine with taxonomy_select last night, but I ran out of time to check the rest of them. Given that it's been a year, it's possible that the latest version fixes the issue(s).\n. \n```\nadd_action( 'cmb2_admin_init', 'yourprefix_register_theme_options_metabox' );\n/*\n * Hook in and register a metabox to handle a theme options page\n /\nfunction yourprefix_register_theme_options_metabox() {\n$prefix = 'yourprefix_theme_options_';\n\n$cmb_demo = new_cmb2_box( array(\n    'id'           => 'num_slides_box',\n    'title'        => __( 'Enter number of slides', 'cmb2' ),\n    'object_types' => array( 'page' ), //post type\n    'context'      => 'normal',\n    'priority'     => 'high',\n    'show_names'   => 'true',//show the field names on the left\n) );\n\n$cmb_demo->add_field( array(\n    'name'     => __( 'Test Taxonomy Radio', 'cmb2' ),\n    'desc'     => __( 'field description (optional)', 'cmb2' ),\n    'id'       => $prefix . 'text_taxonomy_radio',\n    'type'     => 'taxonomy_radio',\n    'taxonomy' => 'category', // Taxonomy Slug\n\n) );\n\n$cmb_demo->add_field( array(\n    'name'     => __( 'Test Taxonomy Radio No None', 'cmb2' ),\n    'desc'     => __( 'field description (optional)', 'cmb2' ),\n    'id'       => $prefix . 'text_taxonomy_radio_none',\n    'type'     => 'taxonomy_radio',\n    'taxonomy' => 'category', // Taxonomy Slug\n    'show_option_none' => false\n) );\n\n$cmb_demo->add_field( array(\n    'name'     => __( 'Test Taxonomy Radio', 'cmb2' ),\n    'desc'     => __( 'field description (optional)', 'cmb2' ),\n    'id'       => $prefix . 'text_taxonomy_radio_inline',\n    'type'     => 'taxonomy_radio_inline',\n    'taxonomy' => 'category', // Taxonomy Slug\n\n) );\n\n$cmb_demo->add_field( array(\n    'name'     => __( 'Test Taxonomy Radio No None', 'cmb2' ),\n    'desc'     => __( 'field description (optional)', 'cmb2' ),\n    'id'       => $prefix . 'text_taxonomy_radio_inline_none',\n    'type'     => 'taxonomy_radio_inline',\n    'taxonomy' => 'category', // Taxonomy Slug\n    'show_option_none' => false\n) );\n\n$cmb_demo->add_field( array(\n    'name'     => __( 'Test Taxonomy Select', 'cmb2' ),\n    'desc'     => __( 'field description (optional)', 'cmb2' ),\n    'id'       => $prefix . 'taxonomy_select',\n    'type'     => 'taxonomy_select',\n    'taxonomy' => 'category', // Taxonomy Slug\n) );\n\n$cmb_demo->add_field( array(\n    'name'     => __( 'Test Taxonomy Select No None', 'cmb2' ),\n    'desc'     => __( 'field description (optional)', 'cmb2' ),\n    'id'       => $prefix . 'taxonomy_select_none',\n    'type'     => 'taxonomy_select',\n    'taxonomy' => 'category', // Taxonomy Slug\n    'show_option_none' => false\n) );\n\n$cmb_demo->add_field( array(\n    'name'     => __( 'Test Taxonomy Multi Checkbox', 'cmb2' ),\n    'desc'     => __( 'field description (optional)', 'cmb2' ),\n    'id'       => $prefix . 'multitaxonomy',\n    'type'     => 'taxonomy_multicheck',\n    'taxonomy' => 'category', // Taxonomy Slug\n    'show_option_none' => false\n) );\n\n$cmb_demo->add_field( array(\n    'name'     => __( 'Test Taxonomy Multi Checkbox No None', 'cmb2' ),\n    'desc'     => __( 'field description (optional)', 'cmb2' ),\n    'id'       => $prefix . 'multitaxonomy_none',\n    'type'     => 'taxonomy_multicheck_none',\n    'taxonomy' => 'category', // Taxonomy Slug\n    'show_option_none' => true\n) );\n\n$cmb_demo->add_field( array(\n    'name'     => __( 'Test Taxonomy Multi Checkbox Inline', 'cmb2' ),\n    'desc'     => __( 'field description (optional)', 'cmb2' ),\n    'id'       => $prefix . 'multitaxonomy_inline',\n    'type'     => 'taxonomy_multicheck_inline',\n    'taxonomy' => 'category', // Taxonomy Slug\n    'show_option_none' => false\n) );\n\n$cmb_demo->add_field( array(\n    'name'     => __( 'Test Taxonomy Multi Checkbox Inline No None', 'cmb2' ),\n    'desc'     => __( 'field description (optional)', 'cmb2' ),\n    'id'       => $prefix . 'multitaxonomy_inline_none',\n    'type'     => 'taxonomy_multicheck_inline',\n    'taxonomy' => 'category', // Taxonomy Slug\n    'show_option_none' => true\n) );\n\n}\n```\nNot perfect, mostly at the end, but for the majority of the field types, the parameter work.\n. Doesn't look like a fix has been found yet.\n. The sortable arrows are working, though not until after a save of the post. I can't guarantee this was the logic, but I wager part of that decision is because when first entering the data, you can get them entered in the intended order right away, negating need to reorder them already.\nRegarding the echoing repeatable fields, they're stored as an array, so you need to do a foreach loop of the fetched post meta so that you get access to the individual fields on each iteration.\nClosing as there doesn't appear to be a bug here.\n. 3 years later, but I have a feeling that this may end up being more a custom field type or at least a CSS customization topic more than a specific change to CMB2 core.\nI'm open to being convinced otherwise, but for now I am going to close it.. Closing in favor of the plugin from @Mte90 found at https://github.com/WebDevStudios/CMB2/issues/363#issuecomment-126817617\n. See Justin's reply at https://wordpress.org/support/topic/issue-after-rendering-a-field-using-cmb2_get_field/#post-9168601. @jtsternberg looks like this one could be closed, as per 4b8bd17 ?\n. Honestly, URLs for these types of resources should probably utilize the appropriate functions to get browser friendly URLs, and not server path versions.\nIn the meatime, @justnorris could use https://github.com/WebDevStudios/CMB2/wiki/Troubleshooting#cmb2-urls-issues\nand have it return the following, if I'm seeing things correctly.\nreturn str_replace( '/Users/N/Projects/Colormelon/Plugins/', '/wp-content/plugins/', $url );\n. fair enough.\n. Logically, it would, but at the same time, the file you're referring to with the filter would still exist and load. At that point, the primary potential errors would be js selectors not finding things like expected, or some styles mismatching.. Perhaps conditionally add the filter? Limit the scope of where it gets added.. Given that those two lines are more or less essential to CMB2 running as a whole, it's definitely not a solution by any means.. It's still going to be best to use https://github.com/WebDevStudios/CMB2/wiki/Field-Types#multicheck-and-multicheck_inline instead of the taxonomy_multicheck, because the taxonomy one isn't going to return data about the terms selected once it's done associating the term(s) to the post object. I'd recommend checking out the example code below that I worked up a couple days back for someone else. It'll save the selected value(s) to post meta in this case, making it query-able from wherever needed.\n$prefix = 'myprefix_'\n$cmb->add_field( array(\n    'name'    => __( 'Downloads Categorys', 'cmb2' ),\n    'desc'    => __( 'Select the downloads category.', 'cmb2' ),\n    'id'      => $prefix . 'something',\n    'type'    => 'multicheck',\n    'options_cb' => 'something_get_all_terms',\n) );\n```\nfunction something_get_all_terms() {\n    $args = array(\n        'taxonomy' => 'some_taxonomy',\n        'hide_empty' => false\n    );\n$terms = get_terms( $args );\n\nforeach( $terms as $term ) {\n    $select_items[ $term->slug ] = $term->name;\n}\n\nreturn $select_items;\n\n}\n```\n. @pgroot91 are you referring to the code in this comment? https://github.com/CMB2/CMB2/issues/435#issuecomment-135174595. I'm going to close as tenatively fixed or limited in scope. We can revisit in the future, as needed.\nIt would/should be possible to provide a custom sanitization callback for the field as well, and roll your own version of money formatting, if really needed. All instances of \"Add or Upload File\" that I can grep from the source have __() around them and a text domain.\nIf you, or anyone else, can provide a concrete list of strings that appear to be missing translation-ability, we can check them out.\n. I wager the original show_on issue is because for the \"Settings > Reading > Front Page\" field doesn't store metadata that gets checked for here.\n. Makes sense.\n. Never presently addressed from what I can see or have heard, so it's still an open topic.. This would be related to https://secure.php.net/manual/en/functions.variable-functions.php\nI guess my biggest question is what specific reasons is this ThemeCheck website complaining about. Security issue? XSS? general bad PHP practice?\nThat said, I cant' find either of the original instances in trunk at the moment, so I'm curious if in the 3 years since the issue was created, we actually addressed it.\nClosing for the time being.. https://github.com/CMB2/CMB2/wiki/Troubleshooting#cmb2-urls-issues. Going to close as \"worksforme\". If you can reproduce with an uptodate version of trunk, we can re-investigate.\nThanks.\n. Hey @14850842 if this is still presenting an issue, can you start a thread at https://wordpress.org/support/plugin/cmb2 and we'll get it looked at. Please provide all relevant code with the thread, so that we can attempt to recreate on a local install.\nThanks\n. I'm curious if support for SVG as a whole for the WordPress install would take care of whatever conflicts you're encountering. I know CMB2 tries to use native functionality as much as possible. Have you made sure your install supports SVG as a whole already?. @webberwang can you open a new enhancement issue for this request, so that we can get it tracked as a possible option. It's not directly related to the issue being commented on here.. @jtsternberg is there any reason something like clean_stale_options_page_oembeds() shouldn't run on posts types as well? Best I can see, it only runs for when dealing with a theme options page, and it's causing multiple _oembed_sdfqwr2345wegrr and _oembed_time_233254354345235rfsdq3 keys in the post meta table.\n. The method, as is, probably not. If I recall right, when I tried to add it to a post-hook similar to the options page hook, I was getting a post ID instead of the piece needed to find a valid option key.\nThings would need to be wired up enough to match, or for post versions, set up a different option key naming scheme with the oembed field type.\n. Years later, I'm going to mark this as a closed issue. The reason being is that at the time of this posting, there is a label_cb parameter that is under-documented that can be used in replacement of the name  parameter. This allows for setting a function callback that can be used for conditional return values.\nExample code below:\n$cmb->add_field( array(\n    'label_cb' => 'example_label_callback',\n    'desc'      => esc_html__( 'Upload an image or enter a URL.', 'cmb2' ),\n    'id'           => 'image',\n    'type'       => 'file',\n) );\n```\nfunction example_label_callback() {\n        // If we're adding new, just return a default\n    if ( empty( $_GET['post'] ) ) {\n        return 'Create';\n    }\n// Otherwise we're going to have an ID in the URL.\n$post_id = absint( $_GET['post'] );\n\n$saved_value = get_post_meta( $post_id, 'image', true );\n\nif ( empty( $saved_value ) ) {\n    return 'Create';\n}\n\nreturn 'Update';\n\n}\n```\nThis would allow for customizing the label based off of current meta data status, as per the original request. Beyond that, it's pretty much ready to be customizable in however one sees fit ways.. For this one, I believe we'd need provide some way to custom specify values for the array passed into cmb2_ajax()->get_oembed() at the moment. I'll leave this open for further discussion/ideas, but not sure we have a way to do so right now.\n. Should be able to drop their files in a folder in the theme and manually load their files as necessary, very much like how CMB2 does it itself as a library vs as a plugin found on WordPress.org\n. @johnnypea do you have any example field setups that you can recall that was producing these results?\n. @nriddhi what specifically are you wanting to call, here?. @watson-77 \nWhat errors are you seeing?. Is the data serialized, by chance? Curious if it's dropped a bit because of that issue and different string lengths for domain names.\n. The best place for initial support inquiries is at https://wordpress.org/support/plugin/cmb2.\nRegarding the taxonomy_* fields, they're meant to be used in place of the default category/tag/taxonomy metaboxes that WordPress generates. They don't save to post meta, they instead associate the terms to the post.\n. Not presently managing to recreate in master branch. @christiespeich if you get the chance, could you try without the jQuery hotfix and see if it works as expected now, with the current release from WordPress.org?\n. @jondcampbell Is this still presenting an issue for you? Perhaps it has since been resolved  by the fields working as expected finally, or by some sort of hotfix/change in what you're using for the frontend?\nJustin from the looks of things, he was using the field types properly, wanting to set terms for the post objects, as opposed to saving term information to post meta. The data wasn't getting past the sanitization functions though.\n. No worries, thanks Jon.\nLeaving open for further investigation\n. @Mte90 why not pull a copy of trunk and try things out now? Beta test it and report bugs as you try to use it.\n. Dunno on that part, if I were to guess, it'd just be made available automagically, but I haven't paid much attention to the REST API topic in a long time. My hopes would be that the data comes with post request responses out of box with a REST API-ready copy of CMB2.\n. Related #77 \n. Related #490 Closing in favor of it as well.\n. I feel like this one could be better handled just by not using empty strings and string '0' for the option names. Save many headaches with that one.\n. Closing then. If we find it's not, we can start a new ticket regarding it.\n. Just to be certain, are you for sure using CMB2? the filters and functions above indicate more that you're using the legacy CMB1 library.\n. Redacting my previous question about CMB1 since Justin retained backcompat ability with the array version.\nAt this point, I recommend checking out https://github.com/WebDevStudios/CMB2/wiki/Using-CMB-to-create-an-Admin-Theme-Options-Page and if you're still running into issues, please start a forum thread at https://wordpress.org/support/plugin/cmb2 and we'll get your issues looked at there.\n. Is this still presenting any sort of issue?\nIf yes, could you please start a support thread over at https://wordpress.org/support/plugin/cmb2 for this issue? We use the WordPress.org forums for initial support and try to leave the GitHub issues area for confirmed bugs.\nThanks\n. hey @mgyura \nCan you confirm whether or not this is still an issue with the updated plugin from the WordPress.org repo, or however you installed the library?\nIf it's still presenting issues, could you please start a support thread over at https://wordpress.org/support/plugin/cmb2? We use the WordPress.org forums for initial support and try to leave the GitHub issues area for confirmed bugs.\nThanks\n. @nonsensecreativity I realize it's been awhile, but can you provide some more information on this one? Is it fixing a currently-open bug/issue?\n. Hey @ruturaaj  \nCould you please start a support thread over at https://wordpress.org/support/plugin/cmb2 for this issue? We use the WordPress.org forums for initial support and try to leave the GitHub issues area for confirmed bugs.\nThanks\n. FWIW, numeral zero very easily could get interpreted as false/falsey in PHP. Same thing with '0' with quotes. That still evaluates to true if checking for empty values. Very frustrating.\n. Nothing I've heard of, I imagine this ticket will be updated as appropriate at the time.. None I'm personally aware of. When in doubt, feel free to create your own branch.. Easiest one to pinpoint for me would be the JavaScript needed to make it happen, and making sure it all saves accurately. I know max_input_vars PHP configuration settings can start presenting issues as well, especially as suddenly large groups start duplicating regularly. Things to consider. I don't personally have answers for this, as I'm primarily frontline support, and not really in the guts of development here :) \n@jtsternberg perhaps you can shed some light on all of this?. Nothing I've heard of or been involved with. . Ever find a workaround or solution for this @gyrus ?\n. Not always the case, so I wanted to check regardless :)\n. Any updates or progress made on this @wilrevehl ?\n. Closing early as Justin's commit above states it fixes this issue.\n. Hey @sagive \nCould you please start a support thread over at https://wordpress.org/support/plugin/cmb2 for this issue? We use the WordPress.org forums for initial support and try to leave the GitHub issues area for confirmed bugs.\nThanks\n. Hey @qimzu  \nCould you please start a support thread over at https://wordpress.org/support/plugin/cmb2 for this issue if it's still presenting an issue? We use the WordPress.org forums for initial support and try to leave the GitHub issues area for confirmed bugs.\nThanks\n. Hey @webdziner  \nCould you please start a support thread over at https://wordpress.org/support/plugin/cmb2 for this issue if it's still presenting an issue? We use the WordPress.org forums for initial support and try to leave the GitHub issues area for confirmed bugs.\nThanks\n. @jrfnl may not be a bad idea to put a space before the $more_attributes variable to prevent running attributes together. Not quite sure how browsers would handle it, but perhaps better safe than sorry? We should also add attribute escaping for security purposes.\nI am curious about the use-cases that you see with this.\n@jtsternberg Since this one defaults to an empty string, and is just html attributes, i don't see a huge amount of breakage potential.\n. What's the status of this one @jrfnl ? Seeing any issues with it in your own dealings?\n. Is there any lingering issues here? or is everyone good?\n. We try not to leave people hanging, but sometimes things slip through cracks for awhile.\n. Could you copy/paste the php file contents into a comment via github.com for this issue? We didn't see any sort of attachment come through since it was posted straight to https://github.com/CMB2/CMB2/issues/585. Still not seeing anything. Replying via email for this type of thing is tricky. So, please either go to https://github.com/CMB2/CMB2/issues/585 and use the comment form there, or perhaps instead create a gist and paste us the link to that. Either way should work and get us the actual code being used.. Ah, if it's there, I'll look it over and probably respond there as well. I have a tab open to that one already, as it were\nThanks Elise :). @weare2ndfloor can you confirm that your issue(s) are cleared up with the released version from wordpress.org? If not, can you please start a new thread over at https://wordpress.org/support/plugin/cmb2 for lingering issue(s)?\nThanks\n. Hey @azexo \nCould you please start a support thread over at https://wordpress.org/support/plugin/cmb2 for this issue? We use the WordPress.org forums for initial support and try to leave the GitHub issues area for confirmed bugs.\nIf you could provide all the code you're using for trying to take care of this, when you create the thread, that'd be awesome and help us answer questions more quickly.\nThanks\n. Is this still presenting a problem for you? or did you find some sort of workaround?\n. Hey @widoz \nCould you please start a support thread over at https://wordpress.org/support/plugin/cmb2 for this issue? We use the WordPress.org forums for initial support and try to leave the GitHub issues area for confirmed bugs.\nAlso for that, could you share the code you're using for both the metabox setup as well as the processing after the user hits submit?\nThanks\n. Has a typo in the 2nd remove_meta_box() for non-hierarchical taxonomies, before it should be merged in.\n@jtsternberg basically with this one, it allows for adding 'remove_default' => true to the field declaration and have CMB2 hide the default category/tag metaboxes in favor of the CMB2-provided metabox.\n$cmb_demo->add_field( array(\n    'name'     => __( 'Test Taxonomy Multi Checkbox', 'cmb2' ),\n    'desc'     => __( 'field description (optional)', 'cmb2' ),\n    'id'       => $prefix . 'multitaxonomy',\n    'type'     => 'taxonomy_multicheck',\n    'taxonomy' => 'post_tag',\n    'remove_default' => true,\n) );\n. TravisCI failed cause PHP5.2 isn't installed or something, understandably so.\n. Just copy/pasted that snippet above from @webdziner and it's working just fine. Doesn't show the new metabox automagically the moment you select \"External\" from the dropdown, but once you save the page with \"External\" selected, the 2nd metabox shows up. No fancy ajax or anything like that here, just needs a page update first.\n. Ended up seeing this via a different CMB2 issue: https://github.com/jcchavezs/cmb2-conditionals. Think it may suit you better than the show_on_cb at this point. Using its provided examples, you could check on the current state of the select input and show/hide the 2nd input, all without having to update the post/page AND without ajax, so fewer http requests.\n. Is there anything stopping you from testing the branch at the moment?\n. @jtsternberg From the best I can determine, the biggest issue here is that text based fields are still providing an array of empty string indexes for the $_POST global, while a lack of a checkbox is providing nothing in $_POST.\nBecause of this, the isset check below, in save_group_field() within CMB2.php is returning early and prevents meta removal.\nif ( ! isset( $this->data_to_save[ $base_id ] ) ) {\n    return;\n}\nWhen you add some other sort of field, you get beyond the if statement above, and it's able to remove the data. From the looks of it, it overwrites the meta value completely with whatever was present in $_POST at the time of save.\nNot sure the best course to take with this, but it is confirmed in both Master and Trunk branches\n. For that, you provide the function name you want to pass the value to, and then in the function declaration, you would sanitize however you see fit and return the result.\nAlso for future support requests, could you please start a support thread over at https://wordpress.org/support/plugin/cmb2? We use the WordPress.org forums for initial support and try to leave the GitHub issues area for confirmed bugs.\nThanks\n. Are you familiar at all with unit testing and writing them? Having some for this would definitely help get it merged in.\nWe'd also need to get the conflicts resolved, of course\n. I'm going to have to echo what Travis said. If you're having any other trouble, could you please start a support thread over at https://wordpress.org/support/plugin/cmb2 and we can attempt to tackle the issue(s) there before elevating to GitHub here.\n. Hey @niklasp \nCould you please start a support thread over at https://wordpress.org/support/plugin/cmb2 for this issue? We use the WordPress.org forums for initial support and try to leave the GitHub issues area for confirmed bugs.\nThanks\n. Hey @Kerruba do you think you could start a forum thread over at https://wordpress.org/support/plugin/cmb2 for this and we can see about getting it solved there? Thanks.\n. Any update with this one @gorirrajoe ?\n. @vucumbra I'd look over the tutorial provided at https://github.com/CMB2/CMB2/issues/627#issuecomment-208409965. Not easily finding an \"Example 3\" from the wiki page history either, sadly.. Any success with this one @brandondove so we could confirm it and close the issue?\n. Cool, thanks for the feedback.\n. I have to believe it would be, but at this point it'd all be a custom solution still. Nothing out of box for it.\n. Possibly related: #404 \n. Honestly not sure there's any great way to handle this, whether by CMB2 core itself, or a user specifically for their own site.\nWe rely on the get_terms() function, which doesn't really offer much for that type of preservation. It would be technically possible to use the get_terms filter to intercept, but you'd need to make sure you're affecting only the intended query, figure out how to re-order the total results to include the hierarchy, and then also amend the label to indent however you intend.\nRisks getting messy pretty quickly.\nThat said, I do have to wonder how the default category metabox handles things. That's something I hadn't checked on tonight, as it's getting late. Will have to another time :D \n. Hey @gorirrajoe do you think you could start a thread over at https://wordpress.org/support/plugin/cmb2 for this issue? If you could also provide the code you're using for this, that would help expedite the debugging process. Thanks.\n. Hey @fredericgalline do you think you could start a forum thread over at https://wordpress.org/support/plugin/cmb2 for this, and we'll get it looked at there first? Thanks\n. @jtsternberg didn't you already do some things with dates and grabbing install's default settings?\n. Not managing to recreate the issue with the featured image upload spot from the snippet library/original post.\nIf someone can manage to recreate, let us know and we'll investigate at that time. Otherwise, closing for the time being.\n. Trying to figure out where the lines 110-111 are coming from, and how you're getting that for a meta key. The biggest question would be what does the key look like in the actual meta table for some example values you're trying to fetch prices for. With some more information, we can better answer the question.\n. Should be handled the same way, if I'm not mistaken, which is at the point of setting up the field.. What aspect isn't working? The resulting image sizes? Is this a new image size that you just added? Are you using freshly uploaded images or are you trying with images that already existed in your library? It's possible that an image at the intended size doesn't exist yet and thumbnail regeneration may be needed.\nAlso if you could provide all the code you're using to set things up, we can try things out on our end, as necessary.. Welcome, and glad you got things figured out.. I don't know offhand of any potential way to limit the dimensions of the upload, but if you have a 100x100 image size registered, you can use the attachment ID that gets saved as part of the post meta to make sure to force-display that image size once you hit the frontend with your display code. @johnsonpaul1014 are we good to close this one, if you've issued a fresh pull request with updated details?\n. Closing unless we have some detail that's actionable for inclusion in CMB2 core.\n. @rockerzz just in case you didn't see it, did you look at https://github.com/WebDevStudios/CMB2-Snippet-Library/blob/master/widgets/widget-example.php ?\nOther than that, chances are nothing has been done on this since August. Hard to call a bug because it's not something we state is supported, things just don't necessarily have the support built into core and ready for at this point.\n. I don't personally have an answer as I've never implemented CMB2 in widgets.. @jazzsequence Pinging you for this one as it's your name on the .org repo for https://wordpress.org/plugins/wds-simple-page-builder/\nAny thoughts on @ingageco's thoughts/request?\n. @jtsternberg I can confirm this is still in place with the master branch.\nThe issue ends up being the numeral zero above. \nif ( $value == $opt_value ) {} // Evaluates to true. $value is \"no_item\", $opt_value is integer 0.\nhttps://blog.josephscott.org/2012/03/12/why-php-strings-equal-zero/\nHonestly the best approach here would probably not use numeral 0 for values, but strict type checking on this would also help mitigate edge case issues:\nif ( $value === $opt_value ) {\nEdit: the line in question is in the concat_items method in CMB2_Type_Multi_Base\n. This alone should be the solver https://github.com/WebDevStudios/CMB2/commit/b7f68222245aee925d556129db88b50707e574dc#diff-987cba9503bafd086dc24438f136a7bdR93\nHowever, would love for @janw-oostendorp to confirm for his usage.\n. Not quite sure why this would be failing for you suddenly, since the diff spot I pointed out is the exact same solution you suggested at the end of the initial issue description.\nAlso read https://blog.josephscott.org/2012/03/12/why-php-strings-equal-zero/ for why it was evaluating to true in the first place. Thanks PHP.\n. Yay\n. Marking closed, since we have multiple confirmations.\n. Can confirm this happens, can't confirm where it's failing to grab the meta and insert into input.\n. These two links describe the issue better than I ever could. The biggest issue is that the css gets rendered outside of the iframe, but needs to be inside. It is definitely an active one for CMB2 as well.\nhttps://wordpress.stackexchange.com/questions/120831/how-to-add-custom-css-theme-option-to-tinymce/\nhttps://wordpress.org/support/topic/customdynamic-css-in-tinymce\n. hey @sorchiapone could you start a forum thread over at https://wordpress.org/support/plugin/cmb2 for this one? I'm not managing to recreate the issue at all, but would love to try and see if I can with your metabox code instead of whatever I happen to have handy with my testing of things. Thanks\n. Early status update. The metadata is saving fine, the rendering of the field afterwards appears to be the issue. More coming soon.\n. Value being passed through esc_attr().\n@brandondove Biggest thing I can see, using your code above is the following:\nawe&#39;some   // Your provided test value\nawe&#039;some  // Returned value from esc_attr() with 'awe\\'some'\nOnce I added the 0 to my metabox declaration values, it saved fine and showed as the selected dropdown item.\nWhile it definitely has not been a frequent issue to come up, Brandon is the first one I can recall doing so, not sure what's the best route to take for this.\nEasiest that I can think of and have tested is having the user use esc_attr() on their keys when passing into the options param.\n'options' => array( esc_attr('co\\'ol') => 'cool', esc_attr('awe&#039;some') => 'awesome' )\nIf we want to handle it internally, perhaps check for strpos() and escape before processing in the render methods?\n. Any feedback from the cmb2-conditionals devs @thirumani02 ?\n. Hi @capscoll, if this is still proving to be an issue for you, can you please start a thread over at https://wordpress.org/support/plugin/cmb2, including all relevant code for the metaboxes you're setting up? It'd be greatly appreciated and we can see if we can work through what's going on.\n. Can you start a thread over at https://wordpress.org/support/plugin/cmb2 with the applicable code and we'll see if we can recreate/debug there. If confirmed, we'll return here with relevant information for how to potentially fix.\n. Can you please start a thread for this over at https://wordpress.org/support/plugin/cmb2 and we'll get thing looked into there? If it indeed is a bug/issue with CMB2 core, we'll get a ticket started for it with greater detail. Thanks.\n. Closing this since we are working on the same one over on the CMB2 forums.\n. For what it's worth Justin, we had that thread covered pretty well last month, and it's not really a new issue being brought up, just a cross reference.\n. If I accidentally accepted the merge, my apologies. I was trying to cleanup the code comments. May have clicked the wrong button @jtsternberg \n. @jtsternberg Apparently we need to re-review this one, from Tim's comment above.\n. Derp, it existed in my copy from my testing of #593, which wasn't pulled in exactly as is. My bad. :)\n. Hey @taunoha can you start a thread for this over at https://wordpress.org/support/plugin/cmb2 and we'll get you taken care of there. If we find it is indeed a bug in CMB2 itself, we'll move the new details back here.\nThanks.\n. @rogercoathup for what it's worth, myself, and I believe Justin, aren't sure that it's anything to do with the CMB2 configuration, but some conflict coming from away from CMB2. \nAlternative possibility, perhaps a different version of CMB2 bundled with a different plugin getting loaded first? or even the theme could be doing something like this.\n. No rush on the PR testing, we understand people have busy schedules.\nNoted on the other part, and sounds very much like the setup I was using for https://wordpress.org/support/topic/term-meta-is-saved-but-it-doesnt-appear-in-term-edit-screen-later/page/2/#post-8444411 and the results I outlined there.\nTo aid in things, I'd be willing to take a copy of the plugin you're using for this, and try to recreate similar to how I was in that wordpress.org reply. If I don't succeed then, would you be willing to do a step by step for what you're doing? For example \"upload and set an image\", \"fill in a value for 2nd field\", \"hit save\", \"Click edit term link\". Very nitpicky detailed steps to ensure recreateabilty for every step.\n. michael @ webdevstudios.com will reach me.\n. @jtsternberg I'm reopening, and from what I'm understanding, the #763 PR is working with no ill effects thus far, from tester feedback.. Can confirm empty array being saved, both with the provided code above and via the newer new_cmb2_box() method.\n. Git Bisect determined this commit to be the offender: dba5776ea47b3bebda36f848e6a470dfe49a46c3\n. ```\n1st iteration:\n$saved[ $field_group->index ][ $sub_id ] = $new_val;\n    index = 0, sub_id = \"url\", new_val = false\n$saved[ $field_group->index ] = cmb2_utils()->filter_empty( $saved[ $field_group->index ] ); // returns empty array\n\n2nd iteration:\n$saved[ $field_group->index ][ $sub_id ] = $new_val;\n    index = 0, sub_id = \"title\", new_val = \"\"\n$saved[ $field_group->index ] = cmb2_utils()->filter_empty( $saved[ $field_group->index ] ); // returns empty array\n\nAfter all items, before update_data():\n    $saved = cmb2_utils()->filter_empty( $saved ); // returns array with single index of an empty array value.\n```\n. On wiki, with note that it's pending being released, as of the time of this comment.\n. I was not aware that GH wiki had their own git repos. Will revert and re-add in trunk.\n. giving me authentication errors. May not be able to push to it? I have it locally, regardless, at the moment.\n. Nevermind, switched to git@github.com:WebDevStudios/CMB2.wiki.git for a remote and it worked.\n. Re-affirming issue is still present.\nhttps://wordpress.org/support/topic/repeatable-group-wrong-index-adding-removing-rows/. Also curious about any changes with this one @devanonyme \n. At least for me, it was reaching that last load_textdomain( 'cmb2', $mofile ); line, but it was also finding a mo file that matched and loaded it.\nI got this error for a bug I had recently been debugging:\nConfiguration de Metabox requise pour l'obtention d'un param\u00e8tre ID`\nOne thing about the .po/.mo files is that majority of the content in there is for the example code. It'd get used when copy/pasting as is. At the exact same time, providing the translated string at the time of your own use of the field would also translate it, so the .po/.mo version isn't as important at that point. There definitely are areas that wouldn't be immediately translated by the dev, and those are more in the dropdown options for things like date/time etc.\n. any changes with this one on your end @devanonyme ?\n. Noted, thanks.\nI'm having a hard time calling this a bug, or at least if it is, it was one I wasn't managing to recreate. My hunches lean towards it being something specific the site originally tried on. However, I'll leave it open for the meantime, in case someone else comes in with more information.\n. Noted, nonetheless, we'll leave open for a bit longer.\n. Can you provide your metabox configuration for this please?\nIt'd be everything with $something = new cmb2_meta_box() and the $something->add_field() bits.\nWanting to see if I can recreate the issue.\n. Haven't forgotten this one.\n. @jtsternberg as far as I can tell, this is a legitimate issue going on. The fields \"disappear\" as you move them up, but they also come back as you move them back down.\nAlso seeing these errors show up in the console.\n\n. Nothing I've seen or heard of.. @eriktelepovsky Biggest question I have first is if you're intending these repeated group values to be stored in post meta to be queried for later on, or something else. The reason I ask is because the taxonomy_* functions are meant for assigning terms to the post itself that the metabox is associated with. Essentially an alternative/replacement for the default metaboxes that WordPress Core provides.\nIf you're looking more for the meta version that you use somehow elsewherre, we recommend the standard select/radio/etc and programmatically providing the terms to display.\nHowever, before I go to far in either direction, I want confirmation from you on your intents here.\n. Looks like you have to define the function yourself, as does the example, and then use it as the value for the options_cb so that it'd get the field object passed to it like in the example\n. I'd say it's best to link to the tips n tricks function when appropriate and per-user. The reason being is that everyone's needs for the field may be different or they will want to implement it slightly differently than someone else. Providing it in one version in CMB2 would work for some, but others who need a different version are back to implementing their own. It's also a chance to get them reading a bit more about the topic via some level of docs.\nI'd need to dig through the code to confirm, but my hunch is no provided options_cb value would just do all the terms in the provided taxonomy.\n. That's also the purpose of the taxonomy_* field types. It's meant to associate the terms to the post, not be saved as meta to be used elsewhere. The field example that Justin linked to is a regular \"select\" field type\n. Gotcha, makes sense on that front, and I can provide more info.\nThe issue I opened there, is a copy/paste from the support forums on wordpress.org, and the issue being outlined is not related to the field type. The original user for that one would need to amend there, long term.\n. Closing as we've clarified purposes, despite different examples in other filed issues.\n. Some thoughts.\n1. I believe it would work as well with saved drafts, since I believe it'd work based on saved meta about the post.\n2. You'd probably want to raise the issue with that plugin author more, since it's not one that WebDevStudios did up ourselves, unless that's just an example of a similar thing and you're using CMB2 core only at the moment.\n. Any changes on your end @VladNov ?\n. Looks good to me, for the most part. Ran ack on the code and you covered any cases of using the \"string()\" method, however others who may be using that method will need to update as well. Only real blocker I can find.\nUp to Justin to approve though.\n. No solutions that I'm aware of at the moment.\n. Did you ever make any headway with this one @phh ?\n. A git bisect could provide a definitive answer for what commit caused the breakage.. Ick, anything revolving around '0' is an instant headache :). That one I'm going to have to defer to @jtsternberg . Opting to close this PR. If someone wants to bring the topic up again, please make sure you address all of Justin's posted backwards compatibility concerns as well with your PR.. Odd that it has to be in a specific order. I'm going to open this back up for further investigation, because the order, unless I'm mistaken somehow, shouldn't matter.\n. Quick notes:\nSetting it to \"off\" with code above deletes the post meta being set if you save it in on position initially.\n. @mathetos Not sure I want to consider this a bug, but more just an edge case of sorts. The fact that you didn't provide a value for off makes sense in the observed behavior. For anything but \"on\" there would be no value to save, and also not something to check against for a default value, outside of ones with values provided.\n. Going to mark as closed again, due to previous finding, and belief that it's pretty edge case.\n. Just off the top of my head, I have to wonder if it's a case of simply calling wp_editor() multiple times. We don't do any sort of special font loading or anything like that for WYSIWYG fields, we simply use wp_editor() and WP core handles the rest.\nWould you be willing to share your CMB2 config code so I can try and recreate on my own test site?\n. Interesting note found in the phpdoc for wp_editor:\n* NOTE: Once initialized the TinyMCE editor cannot be safely moved in the DOM. For that reason\n * running wp_editor() inside of a meta box is not a good idea unless only Quicktags is used.\n * On the post edit screen several actions can be used to include additional editors\n * containing TinyMCE: 'edit_page_form', 'edit_form_advanced' and 'dbx_post_sidebar'.\n * See https://core.trac.wordpress.org/ticket/19173 for more information.\n. perhaps a basic unset( $values['value'] ); would work. Null, while it doesn't seem like it would be, is considered a value, if I recall right\n. Good to hear you got it worked out. :)\n. I'd compare the value passed into the override method and return to match, personally.\n. Any luck or changes with this one @luxdeluks ?\n. @slaFFik can you reproduce with SCRIPT_DEBUG set to true? That'll use the unminified version of CMB2's js.\nRelated, as I was trying to recreate, I did run into these issues below with the console:\nTypeError: $table.find(...).data(...) is undefined cmb2.js:120:46\ncmb.resetTitlesAndIterator/</< /js/cmb2.js:120:46\n.each /wp-includes/js/jquery/jquery.js:2:2879\nn.prototype.each /wp-includes/js/jquery/jquery.js:2:844\ncmb.resetTitlesAndIterator/< /js/cmb2.js:115:4\n.each /wp-includes/js/jquery/jquery.js:2:2879\nn.prototype.each /wp-includes/js/jquery/jquery.js:2:844\ncmb.resetTitlesAndIterator /js/cmb2.js:112:3\nn.event.dispatch /wp-includes/js/jquery/jquery.js:3:12392\nn.event.add/r.handle /wp-includes/js/jquery/jquery.js:3:9156\nn.event.trigger /wp-includes/js/jquery/jquery.js:3:11571\njQuery.event.trigger /wp-includes/js/jquery/jquery-migrate.js:633:9\n.trigger/< /wp-includes/js/jquery/jquery.js:3:18983\n.each /wp-includes/js/jquery/jquery.js:2:2879\nn.prototype.each /wp-includes/js/jquery/jquery.js:2:844\n.trigger /wp-includes/js/jquery/jquery.js:3:18962\ncmb.removeAjaxRow /js/cmb2.js:606:4\nn.event.dispatch /wp-includes/js/jquery/jquery.js:3:12392\nn.event.add/r.handle /wp-includes/js/jquery/jquery.js:3:9156\n. As a followup, both of our errors originated from the same line, but we received different errors :D \n. @decapoda you should be able to just do wp_enqueue_script( 'tiny_mce' ); from the looks of the wp_enqueue_script developer page.\nhttps://developer.wordpress.org/reference/functions/wp_enqueue_script/\n@jtsternberg perhaps we need to add tiny_mce as a conditional dependency?\n. Awesome to hear.\n. No issue with this from me.\n. From the looks of it, that line has been in there for awhile. I agree we should make sure that we're using the proper capitalization, and also remove that error suppressor.\n. Did you try outside of the options array? perhaps on the line above that one?\n. I'll use this as a quick example: https://github.com/WebDevStudios/CMB2/wiki/Field-Types#taxonomy_multicheck\nIf you pass it in this way, it looks like it works:\n'text' => array(\n    'add_row_text'     => __( 'add platform', 'textdomain' ),\n),\n. I think it'd be fine to keep for the unminified version, but it should be removed from the minified copy. It's more a dev notif of sorts, and prod shouldn't be running the unminified\n. @funkolector Did you figure out the issue with this one? If yes, would you be willing to provide the solution you found, in case someone else stumbles onto this.\n. I'd dare say it could be a lot worse, and if it works, it works. Maybe turn it into a function with a post type parameter\n. Not that I'm aware of. Guess I haven't seen many usecases that need to grab the metaboxes in that way, but I definitely don't have my head in active CMB2 usage frequently.\n. That was the only other idea I had, thanks to a recent blog post I came across about ditching foreach loops, but at the same time it's a little bit borderline micro-optimization.\n. Closest way I can think of, while using CMB2, is using the WYSIWYG field type. This is assuming Visual Composer knows how to detect when that's in use away from the main editor, and override it.\n. Perhaps you could do something with https://codex.wordpress.org/Function_Reference/get_current_screen and return early in the methods if not in the intended place for the rest of the method.\nI can't think of any hooks for specific screens that would for sure still work.\n. in your callback hook where you set up your metaboxes, fetch the current screen yourself and return early if it's not where you want.\nIf you're talking about things like the 'option' param, I believe the case is use 'option_cb' => 'my_function' instead of 'option' => my_function() to prevent functions from running on every page.\n. From the get_current_screen() codex page, this may be the issue:\n\"The function returns null if called from the admin_init hook. It should be OK to use in a later hook such as current_screen.\"\n. XDebug and execution pausing is also an awesome way to inspect what's passed in and the state of the pageload at that point in time.\n. Curious what you can do with the following filters.\nFor this first one, you'd need to save the data yourself to the meta field of choice, on the post ID of choice:\nhttps://github.com/WebDevStudios/CMB2/blob/trunk/includes/CMB2_Field.php#L224-L260\nSecond filter would probably be best as you could run it ONLY on the field you intend, saves on having to conditionally ignore.\nFor this second one, you'd need to fetch the appropriate data from the appropriate post, and return it.\nhttps://github.com/WebDevStudios/CMB2/blob/trunk/includes/CMB2_Field.php#L224-L260\nSame thing regarding the second filter, it'd be specific to only the field you intend, and removes need for conditional checks.\nWorth tinkering and trying out, at least.\n. Oops, you are correct. The 2 I originally linked are for the second spot with regards to returned value\nCorrect link for the first one, regarding saving: \nhttps://github.com/WebDevStudios/CMB2/blob/trunk/includes/CMB2_Field.php#L290-L324\n. Awesome, sounds like you got a version to work for this.\n. To aid in this, https://github.com/WebDevStudios/CMB2/commit/e4d03897689a16d0231c2a344fc15b0439e2155f#all_commit_comments\n. Honestly, I think you're going to want to nudge https://github.com/satwinderrathore/CMB2-radio-image about that, as that's not an addon that WebDevStudios maintains at all. We're not going to be super familiar with it.\nChances are you will need to fill in the same required fields somehow, if you're not already doing so.\n. Personally, I'd probably end up looking more at breaking up that my_get_sidebar_layouts function to be a bit more modular, but that's just me. I'm curious what could be done with wp_list_pluck() and some minor refactoring of the my_get_sidebar_layouts() function \nThere is https://github.com/WebDevStudios/CMB2/wiki/Adding-your-own-field-types available for a tutorial of sorts from our wiki, may prove useful.\n. I don't have an answer for that part, all I had was some suggestions to explore.\nGoing to close this as an open issue, as it's not a bug with CMB2, but comments aren't disabled because of that, for what it's worth.\n. No worries, by any means.\n. I'm not managing to recreate this.\nI have attached some screenshots to show the wp_postmeta row as well as the resulting metabox after saving.\n\n\nIs this a development site at the moment? Curious if some other conflict is coming in from either the current theme or some of the plugins.\n. Welcome\n. @vasikgreif perhaps a better idea of what you're trying to achieve here would help us out and point to the best option.\n. If I'm following correctly, you're essentially making your own \"Select post parent\" field. The mw_post_type_dropdown_args() function will provide the potential parents. Once one is selected, and the post is published/saved, the selected ID needs to be set as the parent of the post being edited. The selected value also needs to be used to select the \"selected\" item in the dropdown afterwards. All of this, without actually saving anything to the meta field.\nDoes it sound like I have a good grasp of what you're aiming for?\n. For the setting of the parent ID, I believe this filter will be useful for you: https://github.com/WebDevStudios/CMB2/blob/trunk/includes/CMB2_Field.php#L290-L324\nThis should provide a good start, though you'll want to find a way to do this conditionally based on field ID.\n```\nfunction my_cmb2_set_post_parent( $override, $args, $field_args, $object ) {\n    // Grab the provided meta value\n    $tobeparent = (int) $args['value'];\n    // Grab the post being edited.\n    $futurechild = $args['id'];\n// Returning this, and not $override will make the update_data() method leave early and not process saving meta at all.\n// Since we're not saving anything here, meta-wise, nothing should be saved.\nreturn wp_update_post( array( 'ID' => $futurechild, 'post_parent' => $tobeparent ) );\n\n}\nadd_filter( 'cmb2_override_meta_save', 'my_cmb2_set_post_parent', 10, 4 );\n```\nAlternatively, you could use this for the filter: cmb2_override_{$a['field_id']}_meta_save but you'd need to fill in the field ID portion yourself based on your settings. Likely cmb2_override__mw_contact_meta_save if I'm not mistaken.\nRegarding the fetching for the dropdown, I'd recommend these filters. https://github.com/WebDevStudios/CMB2/blob/trunk/includes/CMB2_Field.php#L224-L260 The arguments are going to be very similar to the hooks above. However, it's going to need to return a value that matches the structure that mw_post_type_dropdown_args() returns. Essentially you'd need to fetch a post object for the current post, pick out the post_parent property from it, and return that value in the format that matches.\nHope that helps provide some guidance. I'm not handling all of it, but enough to get you started.\n. Closing as not a bug/enhancement idea, and more general usage support.\n. Can you provide the other part of the registration that you're using? the part that adds the fields in question. Above looks like just the filter/callback to alter their output, away from the default CMB2 uses.\n. Any updates on this one @WebDevLan4You ?\n. Easiest way I can think of, as I can't find a ready-made helper function at the moment, would be to use the metabox to save a value, and then check your wp_options table in the database to see what option_name got used for that value. Once you have that, you can utilize get_option() with it.\n. there's also https://github.com/WebDevStudios/CMB2/blob/trunk/includes/helper-functions.php#L118-L128 now that i remember it, but you'd still need to know the parts for the parameters.\n. Well, if it's a theme options page, then it's still going to be saving to the wp_options table. Using the code you outlined above, you'd just need to know the key/id of the field you're trying to fetch.\nIf you would be willing to provide all your code for this, I can look it over+trial&error and help figure out the parts you need to provide to fetch the right data/content.\n. Sorry for the misunderstanding on my part.\n. Are you updating the character count for the serialized data when you update the domain?\ns:25:\"http://devsite.domain.com\";\nto\ns:21:\"http://www.domain.com\";\nNotice the difference in numbers at the start. It's a count of the string characters in that portion of the serialized data.\n. Not quite sure why, but it seems like in this case, \"max\" is turning into the default callback, aka default_cb in the args array deep in CMB2, instead of the default value.\nI know that max is a PHP core function, and I was able to recreate similar issues with other PHP core functions.\nThat said, changing it to \"Maximum\" worked fine for me.\nOverall feels like a real edge case, and some odd behavior truth be told.\n. @bignall is this still needed? or have the latest versions of CMB2 provided what you need for this type of thing?. Closing as I believe a very similar option was added in 2.2.5 https://github.com/CMB2/CMB2/releases/tag/v2.2.5\nNew field types, 'taxonomy_radio_hierarchical', and 'taxonomy_multicheck_hierarchical', for displaying taxonomy options in a hierarchial layout. Props to eriktelepovsky for the working code.\nIf those field types aren't quite what was proposed here and the issue remains, let us know.. I trust you enough to assume right away that this is, for sure, a legit bug that could use addressing.\n. Haven't seen anything for new movement for this issue specifically. New features available to everyone can be read about in the changelogs found at https://github.com/CMB2/CMB2/releases. If someone could provide their CMB2 configuration code, we can look into it better.\n. https://github.com/WebDevStudios/CMB2/wiki/Troubleshooting#cmb2-urls-issues\n. Based on what I'm seeing, this should work, perhaps with some needed minor tweaks for the spaces in \"My Web Sites\" and \"WordPress Sandbox\". Both varieties shown below.\nfunction update_cmb2_meta_box_url( $url ) {\n    return str_replace( 'C:/Users/Marc/Documents/My%20Web%20Sites/WordPress%20Sandbox', '', $url );\n}\nadd_filter( 'cmb2_meta_box_url', 'update_cmb2_meta_box_url' );\nfunction update_cmb2_meta_box_url( $url ) {\n    return str_replace( 'C:/Users/Marc/Documents/My Web Sites/WordPress Sandbox', '', $url );\n}\nadd_filter( 'cmb2_meta_box_url', 'update_cmb2_meta_box_url' );\n. @fazleerabby is your issue similar to the one @mw247 was experiencing, and thus perhaps solved the same way?\n. @ramiy Do these account at all for people using CMB2 for frontend forms? That's part of Justin's original objections. The screen checking is very much an admin-area function, but CMB2 doesn't restrict to just there.. I'd give https://github.com/WebDevStudios/CMB2/blob/trunk/example-functions.php#L109 a lookover and compare what you have with what the example metaboxes have.\nBiggest thing I can see right off the bat is that you don't provide any specific object type, and I don't believe there's a default value for that one.\n. Took me a few minutes to spot this, but it's plural object_types, not singular object_type\n```\nfunction cmb2_hide_if_no_cats( $field ) {\n    if ( ! has_tag( 'cats', $field->object_id ) ) {\n        return false;\n    }\nreturn true;\n\n}\nadd_action( 'cmb2_init', 'cmb2_add_metabox' );\nfunction cmb2_add_metabox() {\n    $prefix = 'cmb2';\n    $cmb    = new_cmb2_box( array(\n        'id'       => $prefix . 'title2',\n        'title'    => ( 'title2', 'cmb2' ),\n        'context'  => 'normal',\n        'priority' => 'default',\n        'object_types' => array( 'movie' )\n    ) );\n    $cmb->add_field( array(\n        'name'    => ( 'title2', 'cmb2' ),\n        'id'      => $prefix . 'title2',\n        'type'    => 'text',\n        'default' => 'title',\n    ) );\n}\n```\n\nObviously change the \"movie\" post type I used for my dev site to \"review\".\nYour paste above has an extra }, just so you know. Copy/paste mine here and you should be covered on that topic.\n. The last }, right before the closing ?> should probably go above your first function declaration. Declaring the functions isn't going to break anything if that file doesn't exist.\nUse the post type slugs, not their plural labels.\nEverything else looks fine at the moment other than those two points.\n. Awesome to hear you have made progress and is on the way to making some awesome metaboxes.\nGoing to close this as a non-issue.\n. Based on https://github.com/WebDevStudios/CMB2/blob/trunk/includes/types/CMB2_Type_Textarea_Code.php, it'd be the latter, and wrap the output in <pre></pre> tags.\n. I'm struggling to think how CMB2 would be having anything to do with this, since it has nothing to do with permalinks and rewrite rules. Can you confirm whether or not the same 404 occurs with CMB2 disabled?\nBased on my experiences/general knowhow with custom post types, chances are the url has nothing to query for posts with anymore, thus the 404 error.\n. You keep declaring the same function 3 times, which is going to error because functions must have unique names.\nInstead I'd do the 3 $cmb    = new_cmb2_box( ... ) calls all in the same function. Each call to new_cmb2_box() doesn't need it's own hook callback. Try the following, which condenses them all into one:\n```\n<?php\nif ( file_exists( '/home/bookston/booksbytheton.xyz/wp/wp-content/plugins/cmb2/init.php' ) ) { require_once '/home/bookston/booksbytheton.xyz/wp/wp-content/plugins/cmb2/init.php'; }\nfunction cmb2_hide_if_no_cats( $field ) {\n    if ( ! has_tag( 'cats', $field->object_id ) ) {\n        return false;\n    }\nreturn true;\n\n}\nadd_action( 'cmb2_init', 'cmb2_add_metabox' );\nfunction cmb2_add_metabox() {\n    $prefix = 'cmb2_';\n// FIRST METABOX INSTANCE\n\n$cmb    = new_cmb2_box ( array (\n    'id'       => $prefix . 'reviews',\n    'title'    => __( 'Review Details', 'cmb2' ),\n    'context'  => 'normal',\n    'priority' => 'default',\n    'object_types' => array ( 'reviews' )\n) );\n$cmb->add_field ( array (\n    'name'             => esc_html__( 'Stars', 'cmb2' ),\n    'desc'             => esc_html__( '', 'cmb2' ),\n    'id'               => $prefix . 'stars',\n    'type'             => 'select',\n    'show_option_none' => false,\n    'options'          => array (\n        '1' => esc_html__( '1', 'cmb2' ),\n        '15' => esc_html__( '15', 'cmb2' ),\n        '2' => esc_html__( '2', 'cmb2' ),\n        '25' => esc_html__( '25', 'cmb2' ),\n        '3' => esc_html__( '3', 'cmb2' ),\n        '35' => esc_html__( '35', 'cmb2' ),\n        '4' => esc_html__( '4', 'cmb2' ),\n        '45' => esc_html__( '45', 'cmb2' ),\n        '5' => esc_html__( '5', 'cmb2' ),\n    ),\n) );\n$cmb->add_field ( array (\n    'name'    => __( 'Title', 'cmb2' ),\n    'id'      => $prefix . 'title2',\n    'type'    => 'text',\n    'default' => 'title',\n) );\n$cmb->add_field ( array (\n    'name'    => __( 'Release Month', 'cmb2' ),\n    'id'      => $prefix . 'month',\n    'type'    => 'text',\n    'default' => 'month',\n) );\n$cmb->add_field ( array (\n    'name'    => __( 'Release Day', 'cmb2' ),\n    'id'      => $prefix . 'day',\n    'type'    => 'text',\n    'default' => 'day',\n) );\n$cmb->add_field ( array (\n    'name'    => __( 'Release Year', 'cmb2' ),\n    'id'      => $prefix . 'year',\n    'type'    => 'text',\n    'default' => 'year',\n) );\n$cmb->add_field ( array (\n    'name'    => __( 'Amazon', 'cmb2' ),\n    'id'      => $prefix . 'amazon2',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb->add_field ( array (\n    'name'    => __( 'B&N', 'cmb2' ),\n    'id'      => $prefix . 'bn',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb->add_field ( array (\n    'name'    => __( 'Goodreads', 'cmb2' ),\n    'id'      => $prefix . 'goodreads2',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb->add_field ( array (\n    'name'    => __( 'Google', 'cmb2' ),\n    'id'      => $prefix . 'google',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb->add_field ( array (\n    'name'    => __( 'iTunes', 'cmb2' ),\n    'id'      => $prefix . 'itunes',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb->add_field ( array (\n    'name'    => __( 'Kobo', 'cmb2' ),\n    'id'      => $prefix . 'kobo',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb->add_field ( array (\n    'name'    => __( 'LibraryThing', 'cmb2' ),\n    'id'      => $prefix . 'librarything',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb->add_field ( array (\n    'name' => esc_html__( 'Blurb', 'cmb2' ),\n    'desc' => esc_html__( '', 'cmb2' ),\n    'id'   => $prefix . 'blurb',\n    'type' => 'textarea_small',\n) );\n$cmb->add_field ( array (\n    'name' => esc_html__( 'Review', 'cmb2' ),\n    'desc' => esc_html__( '', 'cmb2' ),\n    'id'   => $prefix . 'review',\n    'type' => 'textarea_small',\n) );\n\n// SECOND METABOX INSTANCE\n\n$cmb_second    = new_cmb2_box ( array (\n    'id'       => $prefix . 'reviews',\n    'title'    => __( 'Blog Tour Details', 'cmb2' ),\n    'context'  => 'normal',\n    'priority' => 'default',\n    'object_types' => array ( 'blogtours' )\n) );\n$cmb_second->add_field ( array (\n    'name'             => esc_html__( 'Stars', 'cmb2' ),\n    'desc'             => esc_html__( '', 'cmb2' ),\n    'id'               => $prefix . 'stars',\n    'type'             => 'select',\n    'show_option_none' => false,\n    'options'          => array (\n        '1' => esc_html__( '1', 'cmb2' ),\n        '15' => esc_html__( '15', 'cmb2' ),\n        '2' => esc_html__( '2', 'cmb2' ),\n        '25' => esc_html__( '25', 'cmb2' ),\n        '3' => esc_html__( '3', 'cmb2' ),\n        '35' => esc_html__( '35', 'cmb2' ),\n        '4' => esc_html__( '4', 'cmb2' ),\n        '45' => esc_html__( '45', 'cmb2' ),\n        '5' => esc_html__( '5', 'cmb2' ),\n    ),\n) );\n$cmb_second->add_field ( array (\n    'name'    => __( 'Title', 'cmb2' ),\n    'id'      => $prefix . 'title2',\n    'type'    => 'text',\n    'default' => 'title',\n) );\n$cmb_second->add_field ( array (\n    'name'    => __( 'Release Month', 'cmb2' ),\n    'id'      => $prefix . 'month',\n    'type'    => 'text',\n    'default' => 'month',\n) );\n$cmb_second->add_field ( array (\n    'name'    => __( 'Release Day', 'cmb2' ),\n    'id'      => $prefix . 'day',\n    'type'    => 'text',\n    'default' => 'day',\n) );\n$cmb_second->add_field ( array (\n    'name'    => __( 'Release Year', 'cmb2' ),\n    'id'      => $prefix . 'year',\n    'type'    => 'text',\n    'default' => 'year',\n) );\n$cmb_second->add_field ( array (\n    'name'    => __( 'Amazon', 'cmb2' ),\n    'id'      => $prefix . 'amazon2',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb_second->add_field ( array (\n    'name'    => __( 'B&N', 'cmb2' ),\n    'id'      => $prefix . 'bn',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb_second->add_field ( array (\n    'name'    => __( 'Goodreads', 'cmb2' ),\n    'id'      => $prefix . 'goodreads2',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb_second->add_field ( array (\n    'name'    => __( 'Google', 'cmb2' ),\n    'id'      => $prefix . 'google',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb_second->add_field ( array (\n    'name'    => __( 'iTunes', 'cmb2' ),\n    'id'      => $prefix . 'itunes',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb_second->add_field ( array (\n    'name'    => __( 'Kobo', 'cmb2' ),\n    'id'      => $prefix . 'kobo',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb_second->add_field ( array (\n    'name'    => __( 'LibraryThing', 'cmb2' ),\n    'id'      => $prefix . 'librarything',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb_second->add_field ( array (\n    'name'    => __( 'Promo #1', 'cmb2' ),\n    'id'      => $prefix . 'promo1',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb_second->add_field ( array (\n    'name'    => __( 'Promo #2', 'cmb2' ),\n    'id'      => $prefix . 'promo2',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb_second->add_field ( array (\n    'name'    => __( 'Interview', 'cmb2' ),\n    'id'      => $prefix . 'interview1',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb_second->add_field ( array (\n    'name' => esc_html__( 'Bio', 'cmb2' ),\n    'desc' => esc_html__( '', 'cmb2' ),\n    'id'   => $prefix . 'bio',\n    'type' => 'textarea_small',\n) );\n$cmb_second->add_field ( array (\n    'name' => esc_html__( 'Extra', 'cmb2' ),\n    'desc' => esc_html__( '', 'cmb2' ),\n    'id'   => $prefix . 'extra',\n    'type' => 'textarea',\n) );\n\n// THIRD METABOX INSTANCE\n\n$cmb_third    = new_cmb2_box ( array (\n    'id'       => $prefix . 'reviews',\n    'title'    => __( 'Interview Details', 'cmb2' ),\n    'context'  => 'normal',\n    'priority' => 'default',\n    'object_types' => array ( 'extra' )\n) );\n$cmb_third->add_field ( array (\n    'name'             => esc_html__( 'Stars', 'cmb2' ),\n    'desc'             => esc_html__( '', 'cmb2' ),\n    'id'               => $prefix . 'stars',\n    'type'             => 'select',\n    'show_option_none' => false,\n    'options'          => array (\n        '1' => esc_html__( '1', 'cmb2' ),\n        '15' => esc_html__( '15', 'cmb2' ),\n        '2' => esc_html__( '2', 'cmb2' ),\n        '25' => esc_html__( '25', 'cmb2' ),\n        '3' => esc_html__( '3', 'cmb2' ),\n        '35' => esc_html__( '35', 'cmb2' ),\n        '4' => esc_html__( '4', 'cmb2' ),\n        '45' => esc_html__( '45', 'cmb2' ),\n        '5' => esc_html__( '5', 'cmb2' ),\n    ),\n) );\n$cmb_third->add_field ( array (\n    'name'    => __( 'Title', 'cmb2' ),\n    'id'      => $prefix . 'title2',\n    'type'    => 'text',\n    'default' => 'title',\n) );\n$cmb_third->add_field ( array (\n    'name'    => __( 'Release Month', 'cmb2' ),\n    'id'      => $prefix . 'month',\n    'type'    => 'text',\n    'default' => 'month',\n) );\n$cmb_third->add_field ( array (\n    'name'    => __( 'Release Day', 'cmb2' ),\n    'id'      => $prefix . 'day',\n    'type'    => 'text',\n    'default' => 'day',\n) );\n$cmb_third->add_field ( array (\n    'name'    => __( 'Release Year', 'cmb2' ),\n    'id'      => $prefix . 'year',\n    'type'    => 'text',\n    'default' => 'year',\n) );\n$cmb_third->add_field ( array (\n    'name'    => __( 'Amazon', 'cmb2' ),\n    'id'      => $prefix . 'amazon2',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb_third->add_field ( array (\n    'name'    => __( 'B&N', 'cmb2' ),\n    'id'      => $prefix . 'bn',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb_third->add_field ( array (\n    'name'    => __( 'Goodreads', 'cmb2' ),\n    'id'      => $prefix . 'goodreads2',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb_third->add_field ( array (\n    'name'    => __( 'Google', 'cmb2' ),\n    'id'      => $prefix . 'google',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb_third->add_field ( array (\n    'name'    => __( 'iTunes', 'cmb2' ),\n    'id'      => $prefix . 'itunes',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb_third->add_field ( array (\n    'name'    => __( 'Kobo', 'cmb2' ),\n    'id'      => $prefix . 'kobo',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb_third->add_field ( array (\n    'name'    => __( 'LibraryThing', 'cmb2' ),\n    'id'      => $prefix . 'librarything',\n    'type'    => 'text',\n    'default' => '',\n) );\n$cmb_third->add_field ( array (\n    'name' => esc_html__( 'Bio', 'cmb2' ),\n    'desc' => esc_html__( '', 'cmb2' ),\n    'id'   => $prefix . 'bio',\n    'type' => 'textarea_small',\n) );\n$cmb_third->add_field ( array (\n    'name' => esc_html__( 'Interview', 'cmb2' ),\n    'desc' => esc_html__( '', 'cmb2' ),\n    'id'   => $prefix . 'interview2',\n    'type' => 'textarea',\n) );\n\n}\n```\n. Couple things.\n1. This isn't a CMB2 issue by any means, so really not the best place to ask for support with this question.\n2. The GitHub issues for CMB2 aren't the preferred location for general support questions like this. For those, please use the forum located at https://wordpress.org/support/plugin/cmb2. You'll still get to see and work with me still. The issues area here is for confirmed bugs and enhancement ideas.\nIf you could start a thread at that forum, I'll give it a go with answering, despite bullet point 1. Just in case it is a help, I have this that I typed up for our CPTUI users, but it'd apply here. http://docs.pluginize.com/article/81-cleanly-done-pagination-with-custom-wpquery-objects\nThat said, I am going to close this issue at the moment. Thanks\n. Correct me if I'm wrong here, just trying to make sure I follow correctly. You originally set a field to be a standard text input field, and then you switched it to a select field, and now it's erroring on you? All without changing the saved value to the meta field? If that's the case, do the errors occur with a new post where there's not metadata already saved?\n. This part has me curious: \\wp-content\\plugins\\rue\\includes\\cmb2-drag-drop-group-type.php\nIs this being done via a custom plugin, or in conjunction with a 3rd party plugin?\n. Would you be willing to zip up the whole plugin for me, I'll see what I can do to try and figure things out, or verify things are amiss on our end? I'm curious if a value is getting passed incorrectly at some point, and having all the relevant code would help me.\n. I've kicked this around and traced my way through with XDebug and all that fancy stuff, and in the end it feels like too much is being passed into the 'options_cb' field.\nAs per https://github.com/WebDevStudios/CMB2/wiki/Field-Types#select, the field is passed a basic array of key/value pairing, all of which are strings. What is occurring at the moment is that the values for this are ending up being arrays.\nTo add to that, my experience with check_min_bug_fields() is showing $field->value as being false on line 225 of select-bug.php. Both parts of the if statement in that area are also set to likely return nested arrays instead of the key/value string pairs highlighted above in the example link.\nAt least from what I can determine, it's less a bug in CMB2, and more issue in the implementation of the options callback.\nLeaving the issue open a bit longer for further help debugging/discussion, but that's what I've found thus far.\n. @jtsternberg you have any thoughts for this one? I've never done much for extending CMB2 in this way.\n. Responded at https://wordpress.org/support/topic/codes-not-working-correctly/\nNot a CMB2 bug, by any means, just an issue with how to use some WordPress functions to display term data. We'll use the support forum link above to finish things out.\n. Confirming that I'm seeing the same thing, both in master and trunk.\nOn top of that, when I save the page I'm adding it to, the field isn't retaining the value, but it is saving in the database as post meta.\n. My hunch is that some of the js involved is causing it to not appear right in the input after the page loads, but that's unconfirmed.\n. Could someone enlighten me on some usecases for this type of thing? I won't say I'm going to close and outright reject the idea, but I could use some more context.\nIt has me wondering if maybe an options page would work for the storing of the values, and then simply providing some documentation on how to potentially hook into the navigation menu system.. Definitely a more composer-focused version.\nNot immediately sure where those CMB2 namespaces are coming from, unless I'm missing information/details.\nHowever, if it works, more power to it all.. @slaFFik Can you confirm whether or not that display: block is from a CMB2 stylesheet? Your red square kind of covers the selector and the right side is cut off.\n. @jtsternberg looks like something like .cmb2-checkbox-list label { display: inline-block; } would work here. Possible that we want to prefix even further with a body class.\n. I can't say for sure, but last I knew, the repeatable group settings were stored as an array of group items. I'm curious if the way you're doing things, you're storing just one individual value each time, and every time you're overwriting the value.\nTo help confirm how things needed stored, I'd just do up a quick version, save, and then look at how the values are saved. Then you can match up your programmatic setting of defaults to equal.\n. If the JSON uploaded is going to be consistent, then you could process the JSON and iterate over each JSON item and push it into an array. Then once all is processed, save the one array value into the appropriate field.\n. How is the JSON being provided? Is it a one time thing? or is it something that gets submitted some other time and in some other location on the site?\nMy original idea above basically had the JSON being submitted and saved to the meta field right away, essentially a default value saved to the database. However, I'm now kind of getting the picture that you just need the values read and provided in the inputs, but without actually saving to the database.\n. Gotcha. CMB2 is being used as a UI of sorts for editing JSON data. Upload the original, make some changes via dropdowns/options, save the form and provide updated JSON in a file.\nOne of the biggest issues I'm seeing is finding a way to process/parse upon upload, and then still have the data available at the point of rendering the field. Just spitballing here, but using Justin's recommendation and adding that it would check for $_POST data containing the uploaded JSON and return the parsed results. Biggest drawback would be if nothing was uploaded yet, it wouldn't be a consistently filled in field so a default empty version would be needed as well, or the field never shown yet.\nThen it's back to formatting the parsed data into the structure that CMB2 needs, but that's generally covered earlier in the issue here.\n. You could give https://github.com/jcchavezs/cmb2-conditionals a go.\nRepeater fields are still an array of arrays, just need to piece together correctly.\n. I think either filter should be fine, just a matter of the one that has a field ID in the middle of the hook is good if you want to do less if checks, since all the fields would run through the first one.\nThe data passed through should be the same regardless.\n. Can you provide your CMB2 configuration so that we can look it over and see what's happening for this specific case?\n. Would still appreciate the config you're using for some testing purposes.\nGood to know we have a strong lead on the source though\nOn Friday, October 14, 2016, Peter Benoit notifications@github.com wrote:\n\nIt appears this is related to the description field, which we were not\nproviding. Not setting this field and/or leaving an empty value for this\nfield leaves us with the same empty label. Any way to keep the label from\nrendering?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/769#issuecomment-253874473,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAdi64Q0TfCkJDFpygWqJW0nKmudEyCuks5qz8JzgaJpZM4KW-AG\n.\n\n\n~Michael\nhttp://michaelbox.net\n. Any changes or updates to this one @peterbenoit ?\n. Noted.\nProviding me the configuration code you used would expedite the process, while you're on backlog, I can be kicking the proverbial tires and perhaps find a solution before then. For what it's worth.\n. That would be what I am referencing. Sorry for the confusion there.\nThe code set up that is similar to what you see here: https://github.com/WebDevStudios/CMB2/blob/trunk/example-functions.php#L109-L140 and so on below line 140.\n. @jtsternberg I'm going to confirm this one. While it may seem nice that both sets of text here toggle the checkbox, it probably is in violation of Section 508.\n\nWe should probably decide which one is preferable to be the label associated, hopefully one that's consistent with the other fields. We'd then want to work out how to not output the label html for the one that isn't.\nCurious if we have this issue with any other field types, or just the checkbox here.\n. Which admin color scheme are you using? From the looks of it, those spots should be inheriting from that.\n\n\n. You should be getting a background color to contrast the white. One of my\nscreenshots was the default scheme as well\nOn Friday, October 14, 2016, Slava Abakumov notifications@github.com\nwrote:\n\n[image: image]\nhttps://cloud.githubusercontent.com/assets/282234/19395366/f204e284-9245-11e6-9a73-4c81a6370c28.png\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/770#issuecomment-253854279,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAdi6zhYKoYZcOV_mfi__xUtNBMX67KPks5qz7BSgaJpZM4KXLL4\n.\n\n\n~Michael\nhttp://michaelbox.net\n. What selector/css stylesheet is setting it to transparent? That's the\nbiggest question, where is it apparently getting overridden or unset.\nOn Friday, October 14, 2016, Slava Abakumov notifications@github.com\nwrote:\n\nBut I don't have it. Background is defined as transparent, color is white\n- that's why I have this issue.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/770#issuecomment-253855291,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAdi69fOSGsGEfqtLanx9q6wnQgsYR5Pks5qz7FNgaJpZM4KXLL4\n.\n\n\n~Michael\nhttp://michaelbox.net\n. Can confirm i'm seeing a selector like that in the scss file, but I'm not managing to recreate on my own. What browser are you using? Both Firefox Developer Edition and Chrome stable had no issues with the field. I made sure to be using the midnight color scheme as well.\nNot saying your wrong and it's not a bug, just possibly a bit of a found edge case.\n. Hey, edge cases still need fixes ;)\nMissed seeing the browser/OS earlier, sorry about that. I don't have a windows machine available until tonight at the earliest, and even then that's only Win 7.\nIn case it somehow helps, here's a newly-updated-to-Chrome 54 on OSX.\n\n. At this point, i think it's a Win10 case.\nOn Friday, October 14, 2016, Slava Abakumov notifications@github.com\nwrote:\n\nJust updated to Chrome 54 on Windows - the same.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/770#issuecomment-253917708,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAdi6ykkU5hG0fWsrZnXOO005TiP0JnPks5qz-0agaJpZM4KXLL4\n.\n\n\n~Michael\nhttp://michaelbox.net\n. Hacky CSS is hacky, but it would work. Use the admin_head hook to add your own overriding CSS and !important as necessary. You'd want to try and target browser/platform specific classes as much as possible. https://codex.wordpress.org/Global_Variables\nTechnically the white font isn't the issue, the background color isn't being applied to the dropdown, for whatever browser inconsistency reasons there are. Changing the font would be the easier answer, for an immediate effect.\n. @jtsternberg did we check the same css edit above in the browsers that were working fine with a white font color?\n. Looks like it'd be bfa76894fb1dd5d0cdadfd1c37ffb0d0eb705e30\nI'll let Justin close the issue when he sees fit though :D . I'm sure there must be a way somehow, but that's more of a question for Revolution Slider support, rather than our support. Not sure if they populate their own dropdown menus at all, or if they just have each be a post type, for example, but those would be good places to start.\n. Closing as not a bug/enhancement idea.\n. Related: #749 \n. sounds like there's a folder named \"cmb2\" already, but the folder is empty. Probably have to log in via FTP and either remove the folder and re-install via WP admin, or just upload it manually while still connected via FTP.\nClosing the issue aspect since it's not an issue with the code itself, but you can still comment afterwards, as necessary. Also note that our support area for questions like this is at http://wordpress.org/support/plugin/cmb2 which we actively monitor.\n. For the time being, probably best to not use anonymous functions here, instead defining the function elsewhere.\n. I say be bold and daring, try out trunk right now ;)\n. I'm sure there'd be a limit eventually, due to things like memory and input vars for PHP, but the question is when is that.\nHow many metaboxes are you trying to save at one time?\n. Not quite sure what this is supposed to fix, to be honest. The original version in the line changed would return a value right away. All you're ending up doing is assigning that to a variable, inside an if statement. Never been a fan of variable assignment inside if statements myself.\nIs this fixing an open issue at all? or just casual looking over of the code?\n. Gotcha.\n. Let's leave the issue open until any merge has occurred.. Standard textarea sounds like a solid option to me.\n. I think textarea_code includes some <pre> tags, which may not be what you want, since you're not intending for this to be displayed to a user.\n. Closing as not a bug/enhancement idea for CMB2. You can still comment afterwards if necessary.\n. Can you provide your metabox configuration as well?\n. Aha, I either didn't refresh recently enough, or was simply temporarily blind :)\n. Can you provide a sample CSV file to use for this?\nMy general thoughts at the moment are that the ID is somewhere in the passed values to things, just a matter of identifying where and when.\n. I guess one thing i'm confused about is which ID you're referring to. Do you mean the post ID? The ID that this would construct? 'id' => $prefix . 'section_group',\nBsed on what I've seen on my own in a dev install, you can get the following from the associated property on the passed in $field object:\ncpts_section_group from $field->cmb_id\ncpts_section_group_video from $fields->args['_id']\ncpts_section_group_id[0][cpts_section_group_video] from $fields->args['_name']\ncpts_section_group_id_0_cpts_section_group_video from $fields->args['id']\n. I have to believe there would be, but it would take setting up custom overrides for settings rendering. As is, we stick with what WordPress core does for its markup for settings/options pages. That way the pages look as native to WordPress core as can be.\n. The only reason why it wouldn't match up properly, that I'm aware of, is if the meta keys aren't matching. With CMB2, that's often provided by the id field in a meta field configuration. If you're setting a $prefix of 'cmb2' for example in the metabox configuration, you'd need to make sure that's being appended in the code above, specifically these two lines:\n$title_meta = $meta_group . 'video_' . $key . '_title';\n$url_meta = $meta_group . 'video_' . $key . '_url';\n. The meta key to use would be whatever id value you pass for the file field in question. The $object_id value would be the numeral ID to use for the meta. In this case, post ID.\n. @wiejakp were your issues solved with my last replies for this issue and #786 ?\n. no immediate thoughts.\n. Curious if #730 is related to your case. Perhaps pull a copy of Trunk and re-try with that?\n. hey @eduplessis \nJust gave it a quick test run and I had a couple thoughts. Both presently revolve around the if_fields method. First up is that it tries to type hint against string. I have no issue with that as a whole, but it will be important to note that the plugin you have requires PHP7 or higher. That way the scalar type hints will be available.\nSecond up is that I'm not sure about the logic inside if_fields because I was only specifying a couple items from the available list, and they're still all showing up. This tells me the if statement at https://github.com/eduplessis/cmb2-typography/blob/master/class-cmb2-render-typography-field.php#L77 is always returning true.\nBeyond that though, it definitely looks like it has potential to be a good item to add to the 3rd party resources.. Ah, defaults to all, and to have any removed, set those to false. Gotcha. Perhaps some notes about that in the readme, to help avoid confusion.\nNice job otherwise.. @stabilimenta is this a custom field type you've created? We don't have a text_number field type as far as I'm aware https://github.com/WebDevStudios/CMB2/wiki/Field-Types#types\nI managed to get \"1000,9444.00\" to save, as is, with a standard text field.\n. Looks like that PR was never actually merged in, and I can't find any text_number field types in either master or trunk.\nYou could add your own sanitization callback to strip out things like dollar sign if you need to.. You could also likely make use of https://github.com/WebDevStudios/CMB2/wiki/Field-Parameters#before-after-before_row-after_row-before_field-after_field if you don't want to rely on javascript.. I have to believe this is probably intended behavior, since you're essentially attaching a metabox to a taxonomy/term, and not a post type/post. Not sure, without some code digging, how WooCommerce sets things up to display/interact/process with product_cat term data on the their product editor screen, but they do. You'd need to attach this to the \"product\" post type that they set up instead, for it to go to post meta.\nAlternately, you could take the route of using get_term_meta(), but you'd need to get the term ID from the product cat for the product. . Sounds like you're on a good foot forward. Thanks Keith.. Hi @wiejakp.\nAs far as I know, it's fine to use add_action() inside function calls, the question turns to how early are those add_action calls being called. With your example above, the function would need to be run before the code has passed the cmb2_admin_init hook or else it won't know it needs to invoke your callbacks there.. So everything's good here now? :dancing_men: . Excellent.. Thanks for keeping this updated with your findings @wiejakp :). Well, the biggest question is where are those field attributes being saved/stored in the database? Once you know that, you'll know the best way to start using the WP functions/API to fetch wherever you need the data.. What's your cmb2 config for this?. Ah, I see what you mean now. Those parts are more for the field output used to render the metabox, not something that's actually saved. Your bit above would provide something like <input type=\"url\" data-title=\"something\" data-unique=\"token value\" /> in the admin.. Very likely a case of boolean false evaluating to empty, prompting CMB2 to simply delete the meta key, thus falling back to the default, which is boolean true.\nBetter to stick with string values, like \"on\" and \"off\" or whatever your preference is to differentiate, but still provide a value for both. I believe Justin does that a lot with the examples he provides.. Not quite sure i'm following the intended end result here. You want to have file field, that I assume would be used to upload something...but not save the value in any way? More context would be helpful here.. Guess I'm still not seeing the bigger picture here, as I have to believe the default media manager would cover everything needed. Even the lack of attachment to a post. Just don't trigger the media model from within the post editor, and add new items directly from that part of the admin.\nCreating the field in the post editor, would attach it, I believe, and would also save as post meta. However, you don't need either of those. So you're just trying to get an image uploaded so you could paste the url into the primary post content editor?. I'm a little confused. Are you trying to intercept and modify the data before it gets saved? or intercept and override the returned value?\nFor intercepting and overriding the to-be saved value, I'd recommend checking out these filters: https://github.com/WebDevStudios/CMB2/blob/trunk/includes/CMB2_Field.php#L292-L326\nFor intercepting and overriding the returned value, I'd recommend checking out these filters: https://github.com/WebDevStudios/CMB2/blob/trunk/includes/CMB2_Field.php#L226-L262. Can you provide the whole class, instead of just some of the methods? Would make it easier to copy/paste into a local install. Had to amend briefly because I don't have all the classes being used in the pastes, but I'm struggling to recreate.\nI fill in a field on the page post type, in my testing, hit update, and the anonymous function is called, and I end up at /wp-admin/post.php with a white page except \"here\" in the browser. So I'm not quite sure what may be going on for you on your end. It was done using the full class provided above.\nOne thing I'd recommend doing is making it as such:\n```\nfunction($check, $args, $field_args, $field){\n                echo \"here\"; exit();\n                $id = str_replace(Adm()->get_Id(), '', $args['id']);\n                $field = $this->meta_fields()[$id];\n            $validator = $field[1];\n            if($validator === 'integer' && !preg_match('#^[0-9]+$#', $value)){\n                $_SESSION[Adm()->get_Id('admin_field_errors')][] = __($field[2] . ' is not a valid number');\n                return true;\n            }\n            return null;\n        }, 10, 4\n\n``\nThat way you get all four values passed into the callback. As is, you're only accepting$check` and trying to use the other ones.. Yeah, I use CMB2 as the version that is install-able like a standalone plugin, not as a library.\nRegarding how I was testing, I pasted what you provided in as a MU-plugin file, and instantiated the class right in that file.\n```\n<?php\n$zoom = new Aircraft_Post();\nclass Aircraft_Post {\npublic function __construct() {\n\n    if ( is_admin() ) {\n        //add_action('add_meta_boxes', [$this, 'add_metabox']);\n        //add_action('cmb2_init', function(){}, 1, 2 );\n        add_action( 'cmb2_admin_init', [ $this, 'render_metabox' ] );\n    }\n}\n\npublic function meta_fields() {\n    return [\n        'cruise_speed' => [ 'text_small', 'integer', 'Cruise Speed', 'Cruise Speed' ],\n        'range'        => [ 'text_small', 'integer', 'Range', 'Range' ],\n        'payload'      => [ 'text_small', 'integer', 'Playload', 'Payload' ],\n        'hold_width'   => [ 'text_small', 'integer', 'Hold Width', 'Hold Width' ],\n        'hold_height'  => [ 'text_small', 'integer', 'Hold Height', 'Hold Height' ],\n        'hold_length'  => [ 'text_small', 'integer', 'Hold Length', 'Hold Length' ],\n        'door_width'   => [ 'text_small', 'integer', 'Door Width', 'Door Width' ],\n        'door_height'  => [ 'text_small', 'integer', 'Door Height', 'Door Height' ],\n        'load_volume'  => [ 'text_small', 'integer', 'Load Volume', 'Load Volume' ],\n        'max_range'    => [ 'text_small', 'integer', 'Max Range', 'Max Range' ],\n        'layout'       => [ 'text_small', 'integer', 'Layout', 'Layout' ],\n        'passengers'   => [ 'text_small', 'integer', 'Passengers', 'Passengers' ]\n    ];\n}\n\npublic function render_metabox() {\n\n    $cmb = new_cmb2_box( [\n        'id'           => 'specification_metabox',\n        'title'        => __( 'Aircraft Specification' ),\n        'object_types' => [ 'page' ], // Post type\n        'context'      => 'normal',\n        'priority'     => 'high',\n        'show_names'   => true, // Show field names on the left\n    ] );\n\n    foreach ( $this->meta_fields() as $k => $v ) {\n        $val = get_post_meta( $post->ID, $k, true );\n        $cmb->add_field( array(\n            'name' => __( $v[2] ),\n            'desc' => __( $v[3] ),\n            'id'   => $k,\n            'type' => $v[0],\n        ) );\n    }\n\n    add_filter(\n        'cmb2_override_meta_save',\n        function ( $check, $args, $field_args, $field ) {\n            echo \"here\";\n            exit();\n            $id    = str_replace( Adm()->get_Id(), '', $args['id'] );\n            $field = $this->meta_fields()[ $id ];\n\n            $validator = $field[1];\n            if ( $validator === 'integer' && ! preg_match( '#^[0-9]+$#', $value ) ) {\n                $_SESSION[ Adm()->get_Id( 'admin_field_errors' ) ][] = __( $field[2] . ' is not a valid number' );\n\n                return true;\n            }\n\n            return null;\n        }\n    );\n}\n\n}\n```. Should work any time the post saves, but other than that, sounds like you got it figured out.\nNo time wasted, sometimes it just takes an extra set of eyes.. Not sure if in CMB2 or in WP core, but somewhere if the meta doesn't change, I believe it returns early to prevent unneeded processing.. Personally, I think I'd end up going the route of providing a way to store a URL to an external JS file, and then in a callback on wp_enqueue_scripts, fetch that url and do a standard enqueue at that point. Instead of trying to deal with html character encoding issues and the like.\nThis would allow you to load the js files only when on the intended page.. i'd say inconsistent more than broken, but semantics :D . Can you provide the CMB2 configuration you're using?\nCan you confirm whether or not the items are showing up in the database and wp_postmeta table? It's possible that they're saving, but something is preventing the reading of the saved values into the metaboxes after the fact.. Biggest thing I can see that I'd look into first is the fact that your post type slug is trying to use capital letters.\nhttps://codex.wordpress.org/Function_Reference/register_post_type#Parameters\nI am curious if that's part of the problem. Same thing with the callback name for it, and the extremely high priority used. \nIn regards to the copy/paste nature of it, it's often better to start out with just a couple fields, and test there, confirm things save correctly, etc. Then start adding what you need from there. Easier to debug than having everything, even stuff you're not using like user-based meta data.. Welcome. Glad things are working now.. Looks like that PR needs to have some things addressed and updated before it's ready for merge.. My one concern with this one is that I think it could easily be solved by using the attributes arguments instead of creating a brand new field type to manage.\nhttps://github.com/CMB2/CMB2/wiki/Field-Parameters#attributes\nDue to that, I'm going to close this one unless someone can provide a strong enough argument for inclusion.\nWe appreciate the contributions and feedback.. May be best to leave the single title field as a separate meta key/value instead of trying to lump it in with the repeatable field groups. Hopefully I'm understanding what you're aiming for here.. Did you figure it out? Since you closed the issue yourself?. Word, thanks Julien. @wpsmith any chance that you could provide a refresh of this one, seeing that the js/cmb2.js is finding conflicts.\n@jtsternberg for what it's worth, GitHub offers the ability to ignore whitespace changes in the \"diff settings\" button, right next to the \"review changes\" button.. Hey @medlemark if you could, please open a support thread at https://wordpress.org/support/plugin/cmb2 for this question.\nWe try to keep GitHub issues for possible/confirmed bugs, or enhancement ideas. This here is more along the lines of helping use it and customization of your website.\nThanks.. As an alternative, I believe the plugin may use the attachment ID as the array key for the stored value, which could be used to fetch alternative sizes as requested.\nNot going to close this outright, because it is still valid feedback, worth considering.. If the \"CMB2 page\" you refer to is a custom post type editor screen, then having it registered with featured image support would be the way to go there. Not something specific to CMB2. If it's an options page, then you'd just need to use one of the file field types to set up something similar to that functionality.. Closing the issue as it's not a bug report, but you can still comment on it afterwards.. I have to imagine it would be, but not necessarily through CMB2 itself. It'd be more akin to tutorials that have multiple parts. One part would be getting it added to the column list, the next part being making it sortable. CMB2 looks like it has the firs part covered, but not the second.. Don't believe there's been any traction on this one yet.. Fine with me if it's fine with @jtsternberg as well. Touched up fresh. Still gave props.\nSee: ba02322. Hey @m-pokrovskii can you please start a support thread over at https://wordpress.org/support/plugin/cmb2 for this issue? Also, when you do, could you provide the CMB2 configuration and any other related PHP code you're using, so I can potentially set things up on my localhost for testing purposes?\nWe try to keep the GitHub issues for confirmed bugs or enhancements. If we confirm it is indeed a bug, we will return things here with the new findings.\nThanks.. Closing for the time being. If the proposed field type becomes different enough from the one we already have listed to justify, we'll re-evaluate at that time.\nThanks.. I wonder if this is related at all, which coincidentally came up in internal chat this morning: https://core.trac.wordpress.org/ticket/18408. There's a fair amount that goes on in https://github.com/WebDevStudios/CMB2/blob/trunk/includes/CMB2_Sanitize.php including figuring out default sanitization callbacks. You can also provide your own sanitization callbacks at the time of declaring your fields types. https://github.com/WebDevStudios/CMB2/wiki/Field-Parameters#sanitization_cb. I think this may help you out, but note it is a 3rd party solution: https://github.com/jcchavezs/cmb2-conditionals. Not sure that's something that would be easy to code up, especially as a possible parameter for a field.\nThis does offer some interesting points about the overall details on such a problem https://stackoverflow.com/questions/4328947/limit-file-format-when-using-input-type-file\nIt'd be interesting to see how to possibly do any sort of server-side validation before processing the upload and saving a value.. @franmip if you mean that your field is storing a url, and you simply want to make it used as a link, simply echo the field out as the href value.\n<a href=\"<?php esc_attr( $myurl ); ?>\">link text</a>\nEscaping on the link for added security :). @Areha11Fz did you figure out a solution to this? or realized you set something up wrong and it was working like it should?. Will tinker a bit later and see if I can come up with anything. @jtsternberg I think this one is boiling down to the js/clone functionality.. May be best left to the wiki for the moment, CMB2 still has a required version down at 3.8. Using it in the plugin itself would necessitate bumping that up quite a lot. Not to say people shouldn't be updating their sites :D \nI'll let Justin chime in as well. Curious if this is related to #845 in some way. Both are very similar.. So, I believe this comes down to the fact that at the point of creation, the metaboxes are populated enough that meta data is able to be saved, even on publish. Possible that the autosave contributes as well. What gets saved is the structure used to store a group of fields. The moment I hit \"update\" on an existing page, the a:1:{i:0;a:1:{s:6:\"img_id\";i:0;}} value did get saved.\nSo, it's essentially a case of \"invisible\" content in place to be saved as meta.\nRegarding the last part with an if check, $entries isn't technically empty, or an empty string. It's an array with a single index holding an array of \"img_id\" for the key, and int 0 for the value, until you save anything. The \"img_id\" looks to be the attachment ID, 0 by default. Once you save an image, it'll use that image's attachment ID.\nFor display in these types of cases, something like the following should work, with a bit of customization for display:\n```\n$entries = get_post_meta( $page_id, 'sideimages', true );\nif ( is_array( $entries ) ) {\n    foreach ( $entries as $entry ) {\n        if ( is_array( $entry ) ) {\n            foreach( $entry as $item ) {\n                printf( '%s', $item['img'], $item['caption'] );\n            }\n        }\n    }\n}\n```. Just as an offshoot chance, perhaps pass in an array with the class and then method, similar to how you apply them to hooks. Worth a shot in my mind. Also, hello quick reply ;). Can you set SCRIPT_DEBUG to true in your wp-config.php file so that the WP admin will use the unminified/unconcatenated versions of js files? It'll help better track down the source of the issue. May or may not be directly related to CMB2, but we'll need to check.\nThanks.. Hmm, nothing obvious sticking out to me, but I don't have the backbone chops to really know for sure. @jtsternberg Do you have any idea on this one?. It'd still be useful for us on the support side to have a gist or so of exactly what you're using. I know you provided a link to the wiki, but that doesn't help me enough to know which snippets from the page you used.. I appreciate the screenshots and whatnot, but the code you're using to create these metaboxes and repeaters are still valuable, so that I can try things out on a local install using the exact same configuration that is being troublesome.. The code similar to what you see here: https://github.com/WebDevStudios/CMB2/blob/trunk/example-functions.php#L109-L153 where you added your desired fields/configurations for the fields.\n. Copy/pasted the code above into a mu-plugin to get things going for this setup, and I'm not managing to recreate at the moment.\nScreenshot of my metabox area with a couple groups populated with different text values:\n\nEntire PHP file I'm using to set up the post type, metabox, etc: https://gist.github.com/tw2113/b5f2abe23cf46bc1d5c10d0b381daa0d\nWhat has me curious is the fact that the metabox layout is different compared to your screenshot @guramsutidze, which has me curious if the code used to show the screenshot is different from the code provided to me. Either that, or it's from a different version of CMB2. I am using the master branch here from GitHub, which corresponds to the current version available on wordpress.org.\n. Noted regarding the styling differences.\nMy server side isn't recreating the bug, and I'm using the code you provided. With all due respect, until someone else can recreate with a bare install, it's hard to consider it a bug. I am not aware of anyone else having the same issue.\nI have the group set up, it has 2 fields. 1 that is a text field, 1 that is a custom made one that echos out some text, and does a var_dump on an escaped value. If I'm understanding correctly, it's presumed to be the value from the first field. That's not what I'm seeing. Each time the var_dump is returning empty strings.\nIs it possible that you were using the meta key previously for something else, and there's meta data lingering in the database that may be getting pulled in?. The custom field is NOT also a text input, based on the code you provided in https://github.com/WebDevStudios/CMB2/issues/853#issuecomment-279943761\n```\nadd_action('cmb2_init', function() {\nadd_action('cmb2_render_tw2113', function($field, $escaped_value, $object_id, $object_type, $field_type)\n{\n\n    echo 'New item takes value from previous one <br />';\n    echo '----- ----- ---';\n    var_dump($escaped_value);\n\n}, 10, 5);\n\n});\n```\nIt is 2 lines of echoing debugging details, and a var_dump. This is not matching what you're using/seeing in your screenshots, styles/appearance disregarded due to using a different theme.\nJust on the hunch that it may be playing a part, the IDs for individual fields should NOT match, as that property is what gets used for meta keys/option keys when saving, and could logically be causing things to pull in from previous fields.. Sorry for the delay in response here, it's been an interesting week.\nI'm just not able to recreate with a regular install and the official release of the plugin.\nSteps I'm trying.\n\nAdd new test post\nFill in first field and second field. Click publish.\nNote that first field saved, custom field type did not.\nNote that var_dump still shows empty string.\nRe-fill in custom field type, and also add a 2nd group, filling in both. Click save.\nNote that the state seen in steps 3-4 are the same, except with 2 groups now.\n\nDo you have any other CMB2-based plugins installed activated? Perhaps plugins in general that could also be using CMB2? Any other configurations like the above that are creating metaboxes for other post types/options pages?\nSomething in your current setup is contributing, is the best I have at the moment. It's something that is not occurring in my own testing. Note I'm not saying \"no, it's not a bug\", it's just that we need to figure out the source of it all. Is it possible for you to disable all plugins but CMB2 and see if it still occurs? If it does not at that point, then we'd want to slowly re-activate plugins until it returns. At that point, we'd have the likely source and can dive in further there.. Has been seen by me, trying to find a moment of time to carve out to test with your code snippet.. Agreeing that it is happening with the select input, but not the regular text. I wonder if the js that duplicates is cloning in the selected value.\nI'm curious if this line of javascript isn't finding what it needs due to the nested/grouped nature.\n$elements.filter(':selected').prop( 'selected', false );\nUsing a browser breakpoint, I found this when I did `$elements.filter(':selected'); in the console:\nObject { selector: \"\", length: 0, prevObject: Object, context: <div#group_repeat.cmb-nested.cmb-field-list.cmb-repeatable-group.non-sortable.repeatable> }\nI think it's trying to act on the <select> among others, instead of the the <option> properties.\nI know you get this from me a lot @jtsternberg but, thoughts?. Forgot this screenshot\n\n. Welcome. :). Hmmm.\nThere shouldn't be any \"taking over\" since CMB2 would be hooking into the same actions, and that just does in order received. No overriding involved unless something is doing a remove_action somewhere.\nTo change the order, you'd need to find where your code is being executed and lower the priority. Looking at CMB2, we run ours on default 10. add_action( 'save_post', array( $this, 'save_post' ), 10, 2 );\nYou'd want to do 11 or higher to make it run later.. Aweoms to see you managed to work out a solution for this. Thanks for the followup. :). @JayWood trunk on GH is the development version. master GH = .org trunk, which is the stable release.. Can you provide some screenshots of what it's looking like when you try to use the date picker? Also if you're familiar with your browser developer tools, any errors appearing in he javascript console would be awesome if you could provide those as well.. Likely not quite the answer you were thinking here, I confess. Perhaps a simple text field that you could use in association. Alternatively, create a repeating group that each holds a single file with that field type, and then a text field for that one, and you repeat for each image.\nDisplaying these shouldn't end up being that much different either.\nNot going to close this issue outright, as it's a valid idea, but I'm not sure how readily and easily it'd be able to be implemented at the exact moment, thus why I provided an alternative method initially.. the admin_enqueue_scripts hook would be a good option for injecting custom scripts to your admin editor screen. Just like wp_enqueue_scripts, but works only in the admin areas.. Just for my understanding, are you using this for storing code that is intended to be executed? or just for display? I have a feeling this field type is meant more for display only.. Sorry for the delay in response here @1cgonza . Can you please provide the CMB2 configuration that you're using here, for maximum reproducability in this case?. Looks like we set 5 to be the step increment by default for the timepicker. That said, we do have a filter on this for use and changing. You can see the filter in place at https://github.com/WebDevStudios/CMB2/blob/v2.2.3.1/includes/CMB2_JS.php#L161\nThe stepMinute spot is set at https://github.com/WebDevStudios/CMB2/blob/v2.2.3.1/includes/CMB2_JS.php#L147\nThe quick filter/callback below should help get that changed to showing every minute.\n```\nfunction cgonza_alter_cmb2_timepicker( $l10n ) {\n    $l10n['defaults']['time_picker']['stepMinute'] = 1;\nreturn $l10n;\n\n}\nadd_filter( 'cmb2_localized_data', 'cgonza_alter_cmb2_timepicker' );\n``. Welcome :). Very interesting and good to know, @jtsternberg Definitely makes sense to change this per-field instead of globally.. The order you declare/add them is the order they're rendered, generally. Field types with \"sortable\" make it so that the user can arrange them at the time of populating, but that is going to be different than a text field being provided first, followed by a radio button, in regards to UI rendering.. Not seeing the changes in the PR in the current copy of trunk, so it is presently unresolved.. I'm not convinced at the moment that this is resolved with these changes. I do believe a lot of the example formats, specifically withS` for the English ordinals, is still a primary issue, as I can not find that available for javascript specifically.. If I'm understanding correctly, you want to basically intercept the saved City value, and use that to save geolocation coordinates for it, off to the side in their own meta field, perhaps some not exposed to the UI.\nI'm thinking this filter would be a good start https://github.com/WebDevStudios/CMB2/blob/trunk/includes/CMB2_Field.php#L334-L343\nThe actual filter name you attach things to would be cmb2_override_city_meta_save.\nWith this, you'd be passed the value being saved to the City value, and you could pass that through your \ngeolocalize() method, and do what you need with that part. I would then return null from the callback, so that CMB2 will continue to save the city value like expected. That way the user doesn't need to re-save each time the page loads.\n. Whatever works for you, in the end. :). Can you test with a copy of the trunk branch from here on GitHub? If it's already been addressed , then it's going to be in that branch. Otherwise, a fix is still in the works.. Noted, it's still an open issue pending fixed then. :) Keep an eye on this ticket for fixes that you could apply yourself when the time comes.. Is this for when creating/setting up the fields for the post editor screen? or for something when displaying the saved metabox fields on the frontend?\nCurious how much https://github.com/jcchavezs/cmb2-conditionals would help here as well.. <?php if ( ! empty( 'projects' ) ) {\n    echo get_post_meta(get_the_ID(), 'projects', true);\n} else {\n    echo __( \"<h2>input your text from admin panel</h2>\", \"casanova\" );\n}\n?>\nBased on the code above, which is what you have, outside of some touchups around spacing and opening/closing php tags, the code would never reach the else portion. This part: ( ! empty( 'projects' ) ) is always going to return true, because you're passing in a set string each time. It feels like you want to be checking a variable that may or may not have a value set yet.\nPerhaps something like the following:\n<?php\n$projects = get_post_meta(get_the_ID(), 'projects', true);\nif ( ! empty( $projects ) ) { // May have a value to echo, may just be an empty string that would trigger the else.\n    echo $projects;\n} else {\n    echo __( \"<h2>input your text from admin panel</h2>\", \"casanova\" );\n}\n?>. Just out of curiosity, have you tried providing some of these, in case they're applied to custom field types by users?\nhttps://github.com/WebDevStudios/CMB2/wiki/Field-Parameters\nI can't say for certain if they're always included regardless of source, but worth a try. Alternative thought would be to check the default field types and see how they implement these parts.. Unless I'm mistaken, that would be covered in https://github.com/WebDevStudios/CMB2/wiki/Field-Parameters#before-after-before_row-after_row-before_field-after_field and before_row, after_row. Is the field(s) being declared in its own plugin? Perhaps you could do an apply_filters in those parameter spots so that things can be added from the other plugin. Just throwing a quick idea out there. Otherwise I think your needs would need to be addressed in a future version.. Yeah, not seeing anything in the core code for php hooks that you could use or a way to provide custom field parameters like that, so until told otherwise, I think you may be out of luck with it at the current version.. I definitely encourage PRs for enhancements, but I don't have the final say for what will or won't get accepted. That's pretty much up to @jtsternberg here as he's the lead developer of CMB2 still.. Can you confirm that get_the_ID() is returning values as expected and also that they're returning the expected IDs? It's possible that in some cases the returned ID is for a page that doesn't have a saved value and thus returning empty strings.. I'd start checking the return values of get_the_ID() then, to make sure it's querying for the right post. I realize that part. What exactly does get_the_ID() return in both places? Are they matching, have you checked the post editor in question for each ID to make sure there's a value set?\necho get_the_ID();\nCheck the value in each template.. That's going to be the issue then. Whatever post has the ID of 25, doesn't have a value set for this CMB2 field, while the post with the ID of 62 does. You're dealing with separate posts here.. Sounds good.. Can confirm, at least with given basic parameters. looks to be a mix of float and width issues.\n\n. No way that I personally know of, but others may have a better idea.. Should be able to pass a custom date format via the date_format parameter seen at https://github.com/WebDevStudios/CMB2/wiki/Field-Types#text_date. It'll use the format characters seen at https://secure.php.net/manual/en/function.date.php if I'm not mistaken.\nFor example, you will want either j F Y if you want no leading zeros on the days, like \"7\" or d F Y if you want \"07\". Trying to make sure I understand.\nYou want to have some sort of parameter that you can set that dictates the order in which they should be rendered in, regardless of the order displayed when typing out the code?\nWhile not quite what I am inferring above, it is possible to re-order the metaboxes on screen, at least in the post editor screens, and have that re-ordering persist between refreshes of the page.. Valid, for the frontend it'd make no difference regarding re-ordering via the drag-n-drop.. Not that I'm aware of. There would need to be some sort of order saving mechanism if trying to implement drag-n-drop reordering on the frontend. My mind was originally thinking specifying the order via a parameter on the field, but that's just a different way to hardcode.\nI marked the issue here as an enhancement in case someone wants to take a crack at it.. @jtsternberg similar changes worked well for CPTUI, so I can confirm that it's working as a whole here.. Are you wanting the whole objects? or just specific items from the metabox? I'm curious if the code examples at https://github.com/WebDevStudios/CMB2/wiki/Bringing-Metaboxes-to-the-Front-end would help. If anything, it'd return items that you could possibly poke through to get what you need.. Sounds good.. I would recommend checking out https://github.com/WebDevStudios/CMB2/wiki/Display-Options#limit-to-specific-page-templates and utilize the existing parameter available by default.\nLet us know if you have any issues with this method.. Welcome :) Glad we could help get the metaboxes conditionally showing.. You will want to keep the \"page-template\" portion of this:\n'show_on'      => array( 'key' => 'page-template', 'value' => 'template-contact.php' ),\nFor your case specifically, you'll want it to read:\n'show_on_cb'   => array( 'key' => 'page-template', 'value' => 'archive-path.php' ),\nOnce that change is made, it should start working like expected.. Good catch regarding the \"_cb\" suffix as well. That version is meant for providing a callback function/method to use, while we're just passing in a value directly.. Not sure personally.\nThis plugin may help with that request @munkhbayaryo  https://github.com/jcchavezs/cmb2-conditionals. Not quite following what you're asking @K15Lmk98 . All I was seeking was more explanation for what you're looking for, so I can help better. :). I don't believe CMB2 has much support for the <output> tag, but all the rest of those solutions look like they're standard javascript based, and wouldn't necessarily rely on anything from CMB2 itself.. Investigating. Basically what Justin said above.\nI did the get_post_meta() call that he shows in his snippet, and ran it through var_dump which produced the following, from my 2 meta entries in the group:\narray (size=2)\n  0 => \n    array (size=5)\n      'address_name' => string 'one' (length=3)\n      'address_phone' => string 'two' (length=3)\n      'address_email' => string 'three' (length=5)\n      'address_physical_location' => string 'four' (length=4)\n      'address_map' => string 'five' (length=4)\n  1 => \n    array (size=5)\n      'address_name' => string 'six' (length=3)\n      'address_phone' => string 'seven' (length=5)\n      'address_email' => string 'eight' (length=5)\n      'address_physical_location' => string 'nine' (length=4)\n      'address_map' => string 'ten' (length=3)\nHis foreach loop would result in referencing values like such: $entry['address_name'], $entry['address_map'] etc.. Long story short, you missed the $prefix value for when referencing the meta key/saved data on the frontend.. if you're explicitly passing in a value that you're typing in as \"default\", change it to be \"default_cb\"\nBasic example code:\nUse\nnew CMB2_field( array( 'default_cb' => 'next' ) );\ninstead of \nnew CMB2_field( array( 'default' => 'next' ) );. I wonder what all you'd accomplish if you amend to fetch your post meta value, and then pass it through the get_the_excerpt filter. \nFrom inside the end of  get_the_excerpt() function: return apply_filters( 'get_the_excerpt', $post->post_excerpt, $post );\nYou'd wan to pass the meta value instead. Worth a quick shot.. Doesn't look like there's a \"get_the_content\" filter, so that's not likely to do much at this point.\nLooking at the excerpt_word_block() function, I'm not seeing anywhere where you're passing in the $excerpt_cmb_custom_editor variable, so right off the bat my hunch says that's a null value. What's your first preg_replace meant to do? Initial thought is handle shortcodes, but then you do that right away afterwards on the next line.. Which one, specifically isn't showing up, to help us narrow down possible contributing factors.. nevermind, figured which one out. Once I renamed it away from \"test_metabox\" it suddenly showed up. Looks like you have two trying to use that ID. The test one that you were just working with, and the metabox for \"Incubation & Pre-Incubation\" Once you get those no longer matching, you should be golden.. There's no \"start_video_title\" which is why that attempt isn't working.\nI'm thinking something like this should work fine:\nIt will provide a dummy $prefix since you don't provide yours.\n$title = get_post_meta( get_the_ID(), '_my_prefix_start_video_title', true );\necho do_shortcode( $title );\nInstead of trying to use the do_shortcode filter, we'll just pass the entire fetched content through the do_shortcode function.. So you want to have the shortcode parsed and the result output into the text/textarea?\nIf you're just wanting to store the shortcode, unparsed, until ready to use on the frontend of the site, then go with my last comment. If my question at the top of this reply is accurate, then I'm not quite sure how to go about that. Never tried to output shortcode results into html attributes.. Looks like the configuration methods from https://github.com/WebDevStudios/Custom-Metaboxes-and-Fields-for-WordPress/ to be honest. Possible you're still using that plugin specifically as well.\nSince that's no longer updated or supported, and if you're for sure using CMB2 specifically, I recommend looking over https://github.com/WebDevStudios/CMB2/blob/trunk/example-functions.php and recreating your parts above using the examples from there. Possible that the issue you're facing fixes itself with this change, but if not, we can proceed to troubleshoot from there with the new code.. I'd look over https://github.com/WebDevStudios/CMB2/wiki in general, but https://github.com/WebDevStudios/CMB2/wiki/Notable-Changes-in-CMB2 would be a good one specifically.\n. Welcome. For any other issues that arise, feel free to start a thread over at https://wordpress.org/support/plugin/cmb2 where we try to do all our end user/initial support. I keep my eye on that area as well, so you'll still get me responding :). Looking at that plugin, and the FAQ tab, you could pass your content through their functions before echo'ing.\nOtherwise, CMB2 doesn't do anything for this topic out of box and automatically.\nClosing as it's not an issue on the code itself, but we can still discuss if necessary afterwards.. No word that I've seen, but I also missed seeing this one.\n@RubenMartins are you also do your own custom field type like the issue opener is?. git bisect shows that this commit is what broke the code above in the original posting: 410cee446e65830c5f79c3cdc69dd5db2e2dfba9. Based on further testing, the __call() method is hit twice, and houses this line https://github.com/CMB2/CMB2/commit/410cee446e65830c5f79c3cdc69dd5db2e2dfba9#diff-32fc356ab519c81b4a672288be3a1e46R61\nFor the first hit, $object returns null, and doesn't execute render. However the second one does, with the $object be of type CMB2_Type_Textarea\n@jtsternberg Any light on this one? You're more aware of the change involved than I am.. Nothing I've personally seen. @jtsternberg Re-pinging you for some possible feedback.. PR mentioned: https://github.com/CMB2/CMB2/pull/969. From the looks of it, the cmb_field_map addon linked to earlier is a fancy latitude/longitude storage field. As dowen121 pointed out, at that point you'd need to fetch the values and plot them on an instantiated map, which CMB2 isn't going to have much helpers for.\nClosing as not an issue with CMB2 itself. Feel free to continue discussion as necessary though.. @rohitwebguru have you looked at https://github.com/CMB2/CMB2/wiki/Adding-your-own-field-types at all? It'll help with the steps needed to make your own field type.\nAlso, after reading through that, if you have some more questions, can you start your own dedicated issue just to keep things straight and clear with the issues you're having specifically. Thanks. What's the CMB2 configuration code you're using, as well as any code used to try and display the saved content?. Not managing to have any issues.\nFrontend: https://cloudup.com/czs3oqjTAlk\nBackend: https://cloudup.com/ch9TkwrHgDf\nI am on 4.7.3 as well. Curious if it's a momentary issue only.. I was too when I posted my last reply.. I'm curious about any possible console errors that were occurring at the time, and if it was just a temporary issue or if it was consistent. I think the functionality as a whole is just fine at this point, so that sort of leaves it isolated at the environment it was struggling in, and what external factors may be playing a part.. Correct, show_on is for the metabox, not so much individual fields.\nOverall, I'd look https://github.com/WebDevStudios/CMB2/wiki/Adding-your-own-show_on-filters over as it could lead you to some ideas on how to approach some things.\nRegarding 2 boxes, you can invoke new_cmb2_box(...) multiple times, even from inside the same callback. say $cmb1 = new_cmb2_box(...); and $cmb2 = new_cmb2_box(...) and add different fields to each, both with their own unique show_on conditions.. Hi @baikaresandeep,\nCan you please start a thread for this over at https://wordpress.org/support/plugin/cmb2 ? We're really trying to leave initial support for questions/issues there, and when we confirm bugs, we'll move things here to the issues list.\nI am not aware of any sort of updates that were released in the pas few days, but any updates that you applied to your install may be playing a part. So any information you can add there for what was recently updated, could help out.\nThanks.. Would you be willing to post the solution you found, in case someone stumbles across this GH issue with the same problem?. gotcha, thanks :). Going to close. We can still read/review the original PR and break out as necessary then.. Hi @Lekinio,\nCan you please start a thread for this over at https://wordpress.org/support/plugin/cmb2 ? We're really trying to leave initial support for questions/issues there, and when we confirm bugs, we'll move things here to the issues list.\nWith the thread you make, can you provide your CMB2 configuration code as well, and we'll proceed from there.. @contactashish13 can you please start a thread over at https://wordpress.org/support/plugin/cmb2 and we'll get you taken care of there for initial support. We are striving to leave GitHub issues for confirmed bugs or enhancement ideas, while using the WordPress.org forums for initial support and general questions.\nWhen you start the thread, please provide the entirety of the CMB2 config setup you're using, as well as all the code used elsewhere for this specific functionality. It'll help make sure we have all the information.\nThanks.. Hey @raptor235 would you be willing to start a support thread for this over at https://wordpress.org/support/plugin/cmb2 ? We're trying to keep GitHub issues for confirmed bugs and enhancement ideas, while using the support forum area for the general support and questions.\nThat said, I am curious about the use of wp_get_post_terms() which is for taxonomy terms, while the rest of the code looks like it'd be saving to post meta. Perhaps part of what would be running issue here?. @rubengc I realize it's been awhile. Our apologies there.\nWhat is the difference between these and the options available with https://github.com/CMB2/CMB2/wiki/Field-Parameters#before-after-before_row-after_row-before_field-after_field ? All of those receive the field args and field object which very closely matches what you're doing with your PR.. Self resolved, see 7b9850a. Valid question(s) here, and one that I think merits staying on GitHub here, as an overall potential enhancement.\nAny time things are being stored in the options table, internationalizing the values are always a challenge. I am going through the same with \"Custom Post Type UI\" with WebDevStudios. Different plugin, but still ends up storing strings in the options table that would potentially need internationalized for admin area visitors.. I'd check out this portion of the wiki https://github.com/CMB2/CMB2/wiki/Box-Properties#context Should cover what you're looking for.. You can find it here: https://github.com/CMB2/CMB2-Snippet-Library/blob/master/front-end/cmb2-front-end-submit.php#L234-L267 right at the very end.\nHope you're enjoying using CMB2.. Hey @vucumbra could you start a support thread over at https://wordpress.org/support/plugin/cmb2 for this. We strive to use that forum for the general support/questions and leave GitHub here for confirmed bugs and enhancements.\nThanks.. Same thing as I mentioned at https://github.com/CMB2/CMB2/issues/961#issuecomment-298263910, if you could start a support thread, we'll get you taken care of there.. Responding at https://wordpress.org/support/topic/form-in-frontend-and-modal-bootstrap-little-bug/\nWill re-open if any confirmed bugs show up.. Curious if all the term IDs are being submitted, and we need to loop/iterate over them.. @mikedance can you provide your CMB2 configuration for debugging/testing purposes?. @macway can you elaborate more as well as provide your own CMB2 configuration so that we can try to debug/recreate.. @macway \nRe-reading through this. One thing to note, and I know the wiki makes note of it as well, is that the taxonomy_* field types are in fact meant to replace the default taxonomy metaboxes. They also don't store their information as post meta, they update the terms for the post. That's why you're losing the default metabox, regardless of post type.\nThat said, the multiple=true part would still apply and doesn't look like it has been addressed at all. Honestly a challenge that is faced by anyone setting up this type of thing, CMB2-powered or not. Best solution I can think of, that isn't specific to CMB2, is some sort of language switch that renders the page for that specific language, and saves the value to an array or something else, keyed by the current language code. However, this is just a stream of ideas, and I don't have any code at all for it.. Hi @justnorris \nMy biggest question is which part are you trying to solve? Ensuring that CMB2 is translated to the proper language? Or trying to make sure that its strings aren't lumped together with yours?\nAlso a link to the actual glotpress listing would help us visualize what you're seeing.. Throwing some thoughts out there, I'm betting glotpress gathers ALL of the textdomains it can find, and goes from there, regardless of any match status. Not something we're going to be able to amend.\nOn the other hand, you could use something like http://tgmpluginactivation.com/ to decouple CMB2 from your plugin directly, and instead make it a required 2nd plugin, being installed from its own repo on wordpress.org. As long as you're wrapping the spots that use it in proper actions/callbacks, it shouldn't whitescreen the sites if they don't have it installed yet. It would remove the strings from your plugin's glotpress list. I do understand the fact that it would be a bit of unexpected work on the plugin user's side because they suddenly need to install this 2nd thing that used to come with it already. Really depends on how you decide to handle things.. Looks like that repo houses its own plugin, so download a copy of it and drop it into your plugins folder. Then it'll be activateable like every other plugin. As mentioned in https://github.com/CMB2/CMB2/issues/627#issuecomment-300169494, see the reply at https://github.com/CMB2/CMB2/issues/627#issuecomment-208409965. Hey @rubengc, can you start a support thread over at https://wordpress.org/support/plugin/cmb2 for this while we do initial testing/debugging? If we confirm it as a bug, we'll post a report here with as much info as we can manage at that time.\nAlso, when you start the thread, can you provide the configuration code you're using, so that we can try with matching code.\nThanks.. Hey @Lekinio can you please start a support thread over at https://wordpress.org/support/plugin/cmb2 ? We are trying to keep GitHub issues for confirmed bugs or enhancements, and use the support forum there for the general inquiries.\nThanks.. Nothing that I've seen.. Some thoughts:\nChanges should be PR'd against trunk, not master.\nIf the PR still ends up being notably big even against the correct branch, it will be easier to PR in chunks instead of one huge one that is harder to review.. Quick followup, this may be the only real change? https://github.com/CMB2/CMB2/pull/979/commits/1ba8779de696b3ed4db19c6a2c18cbcca9d93b5e. Please review this and let us know if it helps resolve your issue: \nhttps://github.com/CMB2/CMB2/wiki/Troubleshooting#cmb2-urls-issues. Nature of the beast with it being able to be from potentially many different sources. Glad this will work well enough for your though. Thanks Lee.. Are you sure $value['caratula-top'] is a string? If it's a multicheck, it may be an array. If so, the img src attribute will probably look like <img src=\"Array\"> here. In those cases, it'd take either referencing the specific index, or another foreach loop.. Hi @ yeahsmaggy.\nMy biggest question here is if you're expecting the field type to save the taxonomy information as if it was meta data for the post. Looking things over, that almost feels like the case. The taxonomy_* field types are meant to be replacements for the WordPress default meta boxes for categories/tags/taxonomies. Thus, I'm wondering if that's playing a part in expected return vs actual.\nAlso, just in case needing to dig in more, can you please provide all the code you're using for this? I know and realize you said \"use the code from our frontend submission\" post, but you also added more after that, that I'd want to have that part exactly as is for you where it's not returning as expected.. Sounds good. For what it's worth, for initial feeling things out and such, let's use https://www.wordpress.org/support/plugin/cmb2. I monitor that area as well, and offer support the best I can. We try to keep GitHub for confirmed bugs or new enhancement ideas.\nThanks.. @jtsternberg thoughts on this one? Given that it's 3 years old at this point?. Hey @all2aller can you please start a support thread for this over at https://wordpress.org/support/plugin/cmb2 and we'll get things looked at there?\nAlso if you could provide all relevant config and template code that you're using, that'll help out a lot more.\nWe strive to leave the GitHub issues area for confirmed bugs or enhancement ideas, and use the support forum for initial support.. I see no major issue with passing the extra parameter. @jtsternberg any issue from you?. I'd argue it'd be best to turn on the output buffering after the potential early returns. Would be curious to see how turning that on, and then returning early, affected things, if at all.. Basically move line 814, the ob_start();, to line 825. Hey @harabidi can you please start a forum thread over at http://wordpress.org/support/plugin/cmb2 with this same information? We strive to leave Github for confirmed bugs and enhancements, while using WordPress.org for the initial support questions.\nThanks.. Minor enough that I trust Justin won't mind me merging. :D Thanks Daniel. This may more of a server configuration limitation issue than a CMB2 issue.\nhttp://diywpblog.com/how-to-increase-max-input-vars/. Closing as a GH issue, since a support thread was opened at https://wordpress.org/support/topic/how-to-display-data-from-cmb2-option-page/. We'll get things taken care of there.. Not seeing anything wrong with this code, and as you say, it had been running fine for 8 months. I'm assuming nothing changed here.\nHave you enabled WP_DEBUG to see PHP errors ? Possibly something unrelated to CMB2 is going on and causing the blank screens. I haven't seen any issues with WP 4.8 as a whole with the rest of our users.. Can you provide the config code you're using for this, so we can confirm it's a legitimate bug or possibly something from the config only or the site in question. Thanks.. Can confirm this in trunk, it's not in the release version of the plugin yet.. @claytoncollie are you setting this up like this?\n'options_cb' => get_some_posts(),\nor like this?\n'options_cb' => 'get_some_posts',\nIf closer to the first one, try passing the function like shown in the second example. If it's a class method, make the 2nd parameter array( $this, 'get_some_posts' ),. Should reduce query load and only run when needed.. If tha's from your wp_postmeta table, using the standard get_post_meta() function should return you an array you can use instead of the serialized data shown above. From what I can tell, should get an array of 4 items.. Hi @bitstarr \nInteresting, and definitely something worth considering. One thing I noticed when I clicked your alternative lib is that it's looking for a maintainer. Theoretically it could put us in a similar situation that we're in now, where the chosen library isn't getting much for updates any more.\nHowever, I'm definitely willing to leave the idea open and available for discussion before any sort of decision is made.. Possible that other CSS being added by other sources are affecting this. You'd need to check your browser developer tools and inspector tab to hunt down the exact source.. Can you provide your CMB2 configuration for this? Also what version of CMB2 you're running. Noted, but the actual code you're using for your fields is much more important, so that we can recreate as close as possible. None of the files at that link have youtube examples in them, for instance.. Not trying to be difficult, just trying to get everything covered. Can you provide the entire class including the parts where the actions and filters are being added. Just the methods isn't quite enough.. So I managed to finally get around to this again this evening, and I think it's less that anything lost margins, it's more that the lack of margin in the first place is more pronounced.\n\nOn the left is the newest release, v2.2.5.2, on the right is v2.2.4, released in February.\nThe lack of background color gave the illusion of some spacing. However, not the case.\n. As a followup, using the new options page object type produces a result as follows, using the exact same fields:\n\nGoing to say we should close it as a won't fix, because of the evolution towards the options-page object type, which already has this topic covered.\n@jtsternberg anything lingering that you want to add?. Only a partial answer at the moment, but can you provide the value saved to the postmeta field for your test post(s) ?\nFor example, I ended up with the following for saved metadata using the code above:\na:1:{i:0;a:3:{s:4:\"date\";s:10:\"08/15/2017\";s:9:\"starttime\";s:8:\"04:00 PM\";s:7:\"endtime\";s:8:\"07:00 PM\";}}\nIt matches what I saw with https://cloudup.com/cV7p0lxc4Rb. Same thing @jtsternberg Any thoughts from you would be appreciated. I'm not sure what's going on personally. You have more experience with the custom field types than I do.. Can you provide all of the CMB2 config for the field setup, not what creates the timetable custom field type. Everything from the new_cmb2_box( ... ) part to the $cmb->add_group_field(...) portion. I feel like my version of parts is interfering with recreating what you're experiencing/seeing.. Also, this may just be from the previous comment and not seen in your actual code, but the extra ) is providing a parse error in this line, when copy/pasted: 'name'              =>  'Name' ),. I don't have an answer personally, but it seems that this function is getting passed an array instead of a string for all subsequent calls:\nhttps://github.com/CMB2/CMB2/blob/trunk/includes/CMB2_Field.php#L760-L779\nRelevant portion of call stack:\nCMB2_Utils::is_valid_time_stamp()\nwp-content/plugins/CMB2/includes/CMB2_Utils.php:261\nCMB2_Utils::make_valid_time_stamp()\nwp-content/plugins/CMB2/includes/CMB2_Field.php:770\nCMB2_Field->get_timestamp_format()\nwp-content/plugins/CMB2/includes/types/CMB2_Type_Text_Date.php:18\nCMB2_Type_Text_Date->render()\nwp-content/plugins/CMB2/includes/CMB2_Types.php:568\nCMB2_Types->text_date()\nwp-content/mu-plugins/cmb2debugging.php:14\n@jtsternberg any input from you would be appreciated as well.. Can you re-provide the error from your console when you have SCRIPT_DEBUG set to true in your wp-config file? That'll make WP use the un-minified version of things and provide better reference to js files/lines. What version of CMB2 are you presently running?. Not managing to recreate at the moment. Neither with 2.2.5.2 or the newer 2.2.5.3 that is available for update. That leads me to believe the source of the issue may be elsewhere in your install. At least until we can find more proof that it's for sure emanating from CMB2 itself. . Possibly related: #1100 . Can you confirm what version of CMB2 you are working with here, so that we can match the best we can.. Am able to see the behavior with version 2.2.5.2, for what it's worth.\nThe issue does go away with removing the repeatable, and I'm betting the behavior for repeatable fields, where it adds the UI for the next one for you, is causing the extra value to end up getting saved.\nPossible, though understandably not ideal solution would be to move to a group of fields and the group is repeatable.. Good information @bnecreative, thanks for chiming in.. Closing as logically expected behavior.. Things to keep in mind: we have used .button-secondary in our own CSS files, but a big question if we're relying on those to be overriding WP core usage, or have we really created our own version?. Biggest concern from my end is how compatible it will be with https://github.com/CMB2/CMB2/releases/tag/v2.2.5 and the first listed enhancement, as well as examples at https://github.com/CMB2/CMB2-Snippet-Library/tree/master/options-and-settings-pages\nNot sure when you started working on all and if these recent released changes were factored in. If they were, then even better.. Noted. If the fork was after the 7th, then you'd have the enhancement code in place and available at least.. No dimwits here in this thread @Sharsie. You're definitely not one, and i challenge anyone to change my mind. \nWe appreciate the contributions here and hope to see continued contributions in the future :). Not quite sure if this is going to be on the jQuery Datepicker side or the CMB2/PHP side, but both the hour and the minute options for \"12\" and \"00\" have values of string \"0\". Curious if it's getting evaluated to boolean false as a result.. Alternatively, if you select anything else first, and then re-select the 12:00 combination, it works the 2nd time.. Closing for the time being until someone can provide some better context for this issue/support request.. Not familiar with a \"radio_image\" field type. Is it coming from some CMB2 extension you have installed? If yes, the GitHub/Support page for that extension would be the best place to go to. The only two radio field types that come with CMB2 core, are \"radio\" and \"radio_inline\". You'll want to open up an issue over at https://github.com/satwinderrathore/CMB2-radio-image/issues or perhaps have @satwinderrathore step in here.\nClosing this issue as it's not directly related to CMB2 core, but feel free for potential discussion beyond that.. I imagine you could, that type of effect is heavily CSS.. Just wanted to step in and say...it doesn't look like you have the Radio Image plugin installed at all. I just see CMB2 core. See the screenshot at https://github.com/CMB2/CMB2/issues/1029#issuecomment-331754577. Let's not delve into the topic of what plugins should do what and where sources.\n@fastmarketo the biggest issue I saw, after looking things over a bit closer last night is that while CMB2 core plugin is installed and active, the Radio Images plugin is not. Until both are installed and active, you're not going to have a populated metabox. I copy/pasted your CMB2 code for the radio image box into a local install and images were showing for me, selectable, and everything. So the plugin pair is working, at least when properly paired up.\nOnce you get that detail taken care of and tested, we can work from there.. If it's coming through as an array, then you'll want to do a foreach loop on that variable and output that way, instead of just trying to echo the variable holding the data.. I see nothing wrong with the method above, as long as the images are in that location and the generated url is complete and accurate. i stand corrected :D but @Zaanmedia doesn't quite have it right either.\nTry below:\n$cmb->add_field( array(\n    'name'    => __( 'Image Radio', 'text_domain' ),\n    'desc'    => __( 'Use images for the radio button labels', 'text_domain' ),\n    'id'      => '_yourprefix_demo_radio_images',\n    'type'    => 'radio_inline',\n    'options' => array(\n        'img1' => '<img src=\"' . get_template_directory_uri() . '/inc/admin/images/layout_one.png\" alt=\"Image 1\" title=\"Image 1\">',\n        'img2' => '<img src=\"' . get_template_directory_uri() . '/inc/admin/images/layout_one.png\" alt=\"Image 2\" title=\"Image 2\">',\n        'img3' => '<img src=\"' . get_template_directory_uri() . '/inc/admin/images/layout_one.png\" alt=\"Image 3\" title=\"Image 3\">',\n        'img1' => '<img src=\"' . get_template_directory_uri() . '/inc/admin/images/layout_one.png\" alt=\"Image 1\" title=\"Image 1\">',\n        'img2' => '<img src=\"' . get_template_directory_uri() . '/inc/admin/images/layout_one.png\" alt=\"Image 2\" title=\"Image 2\">',\n        'img3' => '<img src=\"' . get_template_directory_uri() . '/inc/admin/images/layout_one.png\" alt=\"Image 3\" title=\"Image 3\">',\n        'img1' => '<img src=\"' . get_template_directory_uri() . '/inc/admin/images/layout_one.png\" alt=\"Image 1\" title=\"Image 1\">',\n        'img2' => '<img src=\"' . get_template_directory_uri() . '/inc/admin/images/layout_one.png\" alt=\"Image 2\" title=\"Image 2\">',\n        'img3' => '<img src=\"' . get_template_directory_uri() . '/inc/admin/images/layout_one.png\" alt=\"Image 3\" title=\"Image 3\">',\n    ),\n) );\n. Don't know personally, that'd be a question more for @satwinderrathore at the moment. if you're rendering your own radio buttons and whatnot, you could see about using something like the WP selected function.\nIf you're using the radio field type, try setting a default like shown at https://github.com/CMB2/CMB2/wiki/Field-Types#radio_inline. That looks like it'd be good for conditionally showing classes for CSS purposes, but it doesn't do anything for filling in the form to be saved for the post saving process and resulting post meta data.. You need to make sure you're actually be saving a value for what they chose too.\nFrom the looks of things, some sort of value should be getting saved to a meta key of _yourprefix_demo_radio_images\nYou can use get_post_meta() in your code, using the current post ID and that meta key knowledge to fetch what you currently have saved if anything, and determine which to highlight based on that returned value. Chances are high that what's going to get returned is the html for the selected image, based on what I'm seeing in previous code snippets.. One thing I want to point out is that WYSIWYG field types are denoted as not available as repeatable fields, as shown at https://github.com/CMB2/CMB2/wiki/Field-Types. Likely for reasons like this.. Noted on the clarification, thanks Justin . \"0\" and \"1\" are hard values to use for this type of thing because they can tend to be used in conjunction with boolean true/false. Just a quick thought for the moment.. When/how are you calculating the ratios and dimensions? At the template level or in the metaboxes? If you change things around to just store the image URL or perhaps an attachment ID in the meta, the rest should all be accomplishable from the template level. I know at least some of the file field types will store the attachment ID as an array index for the url stored as the index value.. If I recall right, CMB2 will visually provide at least 1 field, though it won't, or at least shouldn't, save anything with it visually shown. Only once items start getting filled in would anything save.. @jtsternberg You have any ideas here?. Hey @bitstarr Can you provide the exact code you're using for your attempts? I know you point to example snippets, but I am hoping to debug what you've actually used thus far.\nNot having any issues yet for an options page and repeatable fields:\nhttps://cloudup.com/cl0o4PB5gRS. How you're using CMB2 the library isn't a huge deal, all that matters is that your configuration is loaded at some point, and the rest will be taken care of. I've often set up my config in a mu-plugin file, but it can also be run from your theme's functions.php file or a standard activate-able plugin.\nAs you say above, you saved the example file and loaded it. All that would be left is marking what fields you want to be, as being repeatable. The styling is default with the latest release of CMB2.. Welcome, and have a good rest of your day.. Just on a hunch, can you see if it still occurs without the PHP namespacing?. Not sure why that error started springing up unless something at that level got changed.\nNot managing to recreate myself, with both the original namespaced version, as well as the non-namespaced one in the last reply. Has to be something in regards to your current install, at this point.. Others can correct me if I'm wrong, but it feels like that endpoint is meant to get the box configuration and default values, and not necessary the saved options used when saving the options page.. What risks are present here with backwards compatibility? Are we going to risk breaking existing installs that use this field with the changes above?. I always leave things up to @jtsternberg and his final say.. Safe to assume that if it's not merged in, it's not part of the official release or pending release yet. Apply to your own copy as necessary, helping confirm the issue being fixed with the proposed changes does help the likelihood of merging.. Am not able to test myself quite yet, but I have to wonder if this is WordPress core doing the stripping, and not something CMB2 necessarily can control.. Looks like a number of places where for whatever reason, it's trying to refer to a bunch of undefined javascript variables. This one may bubble its way from jQuery UI more than CMB2 specifically, but I won't claim that as for sure fact.. Not finding any place in CMB2's code that sets frameborder. The only instance I can find is in the unit tests, which is going to end up specifying to match incoming values. My hunch is that it's coming from WordPress core and the oEmbed functionality, and is out of our control.. Justin, i know it may be a little bit of visual noise, but perhaps in spots where we purposely don't provide the text domain, we can add a note regarding why.. Yeah, just some inline comments for the spots.. You could likely work up a solution for each specific field using https://github.com/CMB2/CMB2/wiki/Display-Options and checking the post type. Otherwise, you're going to need to go the route of duplication and set up CMB2 configs for each, and duplicate the fields you want for both.. That's because you typed cmb3, not cmb2.\n$whatever = new_cmb2_box( $args );\nYou can create a 2nd one, in the same callback, by doing something like\n$also_whatever = new cmb2_box( $other_args );\nYou would have 2 instances to add different boxes to.. Have you checked your browser's developer console for possible js errors going on that may be playing a part in this issue?\nCan you provide your CMB2 configuration so we can test things out on our end and possible help track down the issue, if we manage to recreate.. @domlavd looks like Justin has pushed up some tweaks in regards to this. If you want to help confirm the fix, you test your instance with a copy of CMB2 trunk branch.. Someone needs to go through all the .po files and update them from the source code. This would ge things re-matched up, translation lines pointed to the right spots, new text added, obsolete text removed, and the binary .mo files updated as well once saved.\nI always use Poedit for this with products that still ship their own translation files.. Assuming you mean the sidebar of the admin editor screen, you would want to check out https://github.com/CMB2/CMB2/wiki/Box-Properties#context\nClosing the issue as a whole as it's not a bug/feature request, but you can still respond afterwards as necessary.\nWe also request that for general support requests, users post those questions over at https://wordpress.org/support/plugin/cmb2 and we'll get them answered there.. So just to help with this.\nCMB2_Type_File_List extends CMB2_Type_File_Base\nCMB2_Type_File_Base extends CMB2_Type_Text\nCMB2_Type_Text has a render() method with a signature of public function render( $args = array() ) {\nCMB2_Type_File_Base does not implement its own render method, but CMB2_Type_File_List does but it does not pass a default $args of empty array.\nChanging that should clear up the original error reported. Apparently it's also going to cause fatal errors, so we should get this taken care of soon, as PHP7.2 is officially released and will begin getting updated to with more frequency.\n. @salientroot can you confirm if you're already using CMB2 version 2.3.0 or are your errors coming up with that version already updated to?. Sounds like they've bundled CMB2 in with their plugin, and will need to get that updated as part of an overall update for their plugin.. Yes, you may have the latest version of WP Real Estate, but that version doesn't have the latest version of CMB2 with the PHP 7.2 compatibility fixes. Their devs need to update the copy of CMB2 that ships with their plugin and release an update that includes that.\nDo you have a link to where one can download a copy of WP Real Estate? or is it a premium plugin?. technically, but ideally whatever is bundling CMB2 should get upgraded to 2.3.x to address the compatibility issues. As more and more trickle up to PHP7.2, it's going to become more apparent that the bundlers need to act. . So you're updating some CMB2 fields for a post, and the changes aren't reflected on the frontend? Have you verified the values are updated in the database?. Only issues I'm seeing with this is that you list \"categoryx\" instead of \"category\", and \"post_Tag\" instead of \"post_tag\". The extra letter and the capitalization both matter in matching with the taxonomies in question.. Can you please provide your CMB2 configuration?. Have you looked over https://github.com/CMB2/CMB2/wiki/Adding-your-own-show_on-filters much? This may help you as it documents what type of things are passed to each callback for the show_on_cb field.\nSpecifically each callback receive, in order:\n    $display - either true or false, default is true\n    $metabox - array of metabox parameters\n    $cmb - The CMB object for the current metabox\nRight now, your $cmb parameter is the $display variable above. . So you're needing to get taxonomy information for some taxonomy associated with terms stored as term meta on a different taxonomy term?\nJust as a hunch, have you looked at get_term_by() to get term info for the items in that foreach loop?. get_term_by will return WP_Term objects that include term IDs.\nhttps://codex.wordpress.org/Function_Reference/get_term_by. Planning to try and recreate the best I can so that I can see what exactly may be getting saved and where, to provide a more concrete answer for you.. Alright, Justin has some fixes regarding this :D . @jtsternberg have you been looking into this at all?. Some thoughts.\n\nThe show_on_cb parameter isn't appearing to be one of the valid parameters for the new_cmb2_box() function, but is available on the individual fields. So you're trying to use it too soon.\nI think the callback itself is only going to be passed the current field, not two like in your example. I'm wondering if you're thinking the first parameter is an already existing one that's set to either true or false, when that's not actually the case. It's not a WordPress filter, in this sense. This detail may actually make for a bit less work for you to do, as you just need to get the current displayed user, and check their current role. I could also see some minor hickups, in cases where a site admin is presently editing someone else's user profile.\n\nSome mental food to chew on, that hopefully gets you on your way a bit more with implementing awesome things.. You're going to want to leave it as \"show_on_cb\", but adding it to the specific field is a step in the right direction. Next I would do some quick testing in the callback itself by simply returning either true or false, and see the results. After that, the rest is making sure your callback is determining the right conditions.. No issue in my mind with merging this in. One thought I do have is perhaps add a second hook like so:\ndo_action( 'cmb2_options_page_hook_' . $page_hook, $this->cmb );\nThat way, the action hook itself would be specific to the $page_hook value, and no need for conditional checking. I know we do this elsewhere in CMB2. Provide a generic one for all, and provide dynamic ones as well, specific to the field type being run.. See my reply here: https://wordpress.org/support/topic/2018-date-sorting-not-working/#post-9857365 which deals very much with the same type of problem.\nFor what it's worth, this isn't a fault with CMB2 by any means, it's a fault with dealing with dates in general and at least to some degree, WordPress core.. Not managing to recreate myself at the moment. Both fields keep showing the previews no matter how many times I hit save.\nWhat version of CMB2 are you on?. Ah, interesting. Not sure how best to help handle that part, but it definitely sounds like not something we can address with the plugin itself.. @manzoorwanijk can you provide an exact copy of the code you're trying to use? My hunches are that you have stuff being run before parts of WP core are loaded, however I can't prove that quite yet. . Will need to create a dev site that has 3.8 installed on it to really debug what may be going on, so it may be a little bit for me to circle back. I will do what I can to help though.. Does definitely feel like the loading order has changed since 3.8.x and the example is catered towards the new order.\nThat said, I have to say it's extremely hard for us to consider supporting such an old version of WordPress, especially one that was released at the end of 2013. We do say that we support 3.8 still, and as an overall case, we probably do, with this options page setup being an edge case. This lends itself to be a case of bumping the minimum requirement more than anything.\n@jtsternberg what are your thoughts on this and possibly bumping the minimum version number now that we have an example that for sure is breaking with 3.8?. I'm not as worried about 4.6 or higher, because I have to believe the snippets wouldn't have been committed and pushed if was failing. Regardless, let us know what you experience and we can do what we can with those newer versions.. Some extra thoughts on this, I just noticed this comment at the top of the original snippet linked to: https://github.com/CMB2/CMB2-Snippet-Library/blob/master/options-and-settings-pages/theme-options-cmb.php#L2-L8\nThis lends to my belief that this was still not something tested on 4.6 or earlier. It may be worth noting in the snippet that WP requirement to avoid headaches for others. I'm curious how well the version shown at https://github.com/CMB2/CMB2-Snippet-Library/blob/59166b81693f4ab8651868e70cb29702576bd055/options-and-settings-pages/theme-options-cmb.php will do for you, as it's the version right before it got updated. Unless I'm mistaken, you could grab your entry, _premtb_repeat_group from the looks of it, via get_post_meta() and then append indexes into it, matching the structure that the UI saves to.\nJust eyeballing this but:\n$group = get_post_meta( get_the_ID(), '_premtb_repeat_group', true );\n$group[] = array( 'pln_title' => 'new value' );\nupdate_post_meta( get_the_ID(), '_premtb_repeat_group', $group );\nThis would grab what you already have saved, insert a new index at the end of the array, and then re-save back into the meta. I may or may no have the structure 100% right, so you'd need to double check that spot.. You would need to find a way to locate it in the data that is being saved, for which we don't, to my knowledge, have a built in way to do. Really depends on exactly how the content is saved.. Yeah, there's not really much for unique ID being saved for each repeated field in there. the field (id) items are likely going to be incremental and not unique to each item. That more than likely is just the array index.\nPerhaps a good question is going to be what exactly are you trying to work out how to do, where you're encountering the need to update in this way?. Noted. That said, have you looked over the wiki and the frontend posting topics? It's possible to display CMB2 fields on the frontend, and that would take care of the need to dynamically update things yourself.\nhttps://github.com/CMB2/CMB2/wiki/Bringing-Metaboxes-to-the-Front-end\nhttps://webdevstudios.com/2015/03/30/use-cmb2-to-create-a-new-post-submission-form/\nhttps://github.com/CMB2/CMB2-Snippet-Library/tree/master/front-end. The arrays have indexes though, not named keys, at least in terms of each item in the group. The individual items have their own arrays that have named keys that you can target a bit easier with, but from what I've seen with the data above, there's no real way to tell if that's a Facbebook item, an Instagram item, or what have you. Thus the issue with updating individual items the way aimed for.\nIf they're going to have a consistent order each time, no matter who's saving the data, then you may be able to get by with things like I believe I'm reading with your snippet above. With that said, I could see $entries[2] being possible to use to target the 3rd item.\nif ( isset( $entry[2]['pln_title_en'] ) ) {\n    $pln_title_en = esc_html( $entry[2]['pln_title_en'] );\n}\nand so on.. Welcome.. Presently working for me, using provided code as is, except for a renamed function/callback.\nIs the code in your 2nd reply above what you're using exactly? or is it just a quick example? Asking because of the public keyword outside the context of a class.. Can you please provide the exact code you're using for your case, so that we can better make sure we're debugging/reviewing under matching conditions?\nThe PHP version I was using earlier with my tests and the reference code above was PHP 5.3.x as well, and no issue.\nSomething else must be up.. https://cloudup.com/c74_1JuMuYY\nStill not presently having any issue getting things to save and show afterwards. This is the code I'm using:\nhttps://gist.github.com/tw2113/68daffdb1dc2e8652d62271f16e98300\nTried as both a mu-plugin as well as in twentyseventeen's functions.php file.\nTo clarify, I'm not saying you're not having a problem with this as a whole, but thus far, it's feeling like something related to your current website, rather than CMB2 itself.. Best I can offer at that point then is deactivating plugins one by one until it starts working like expected. At that point, you likely have your conflicting culprit and can further debug from there with a stronger lead.. Keep us updated, I'm getting kind of curious what the conflict is.. @byananta did you ever get this figured out? At least if you recall?. I'm going to call it an anomaly then and close the issue for the time being. If it crops up again by yourself or someone else, we can re-investigate.. Just in case it's playing a factor somehow, and somewhere in the code being used here for your usage @danielck, if you're using PHP's time(), that doesn't take timezones into account from you WP settings. What you should use is WP's current_time( 'timestamp' ) which does. I ran across this topic recently with some client work and found this to be rather helpful.. I am inclined to agree with Justin here, and am wondering what's available for the theme to use that could more accurately find just what it's intending, or do some better checks for a found value before trying to do more.. Glad you got things figured out, John.. @pareshsojitra can you confirm questions asked by justin in https://github.com/CMB2/CMB2/issues/1110#issuecomment-374925395 ?. I realize i'm going to come off pointing fingers, but unless CMB2 is somehow using this function wrong, or storing the return results wrong, then it's more an issue coming from these other plugins. They need to also be made aware of the errors coming up from someone potentially using a core WordPress function in these various screens. Specifically wp_enqueue_code_editor.\nI'm willing to be wrong though, don't get me wrong, but the found \"solution\" is just removing a newly added feature for CMB2.. Logically, limiting where possible makes total sense, but the question ends up being how to do that successfully, when CMB2 can be added to both post editor screens as well as term editor screens. All of which may have these other libraries/plugins included as well.\nWe could check, if not done already, if there's a field type that uses this codemirror lib before adding, however once there is, the same conflict is potentially going to show up. There still needs to be compatibility resolution from these other items as well.. Not sure exactly the workflow logic intended, but It'd probably be best to use one or the other. At least that's what I'd end up doing. The \"show on\" for template value is just grabbing the meta key/value pair for the template selected, so you could easily do that in the callback you create.. Not managing to recreate the issue with fields not displaying at the moment.\nhttps://cloudup.com/cgyAHqUdvlH\nOnly things I changed from the code used above is setting the post type to be a submenu of, and removing the PREFIX usage, as it was throwing PHP notices. Even with those in place though, values were persisting for me.\nThat's not to say you're not experiencing issues with it still, just indicating it may be a detail coming from other parts of the current site.. Welcome.\nNope, sadly I don't know what conflict may be coming from that bundle that could be causing conflict here. It'd be something that'd need investigation.. I want to point out the note that's right after the \"taxonomy_radio_inline\" item in the list at https://github.com/CMB2/CMB2/wiki/Field-Types#types\n* Default Category/Tag/Taxonomy metaboxes replacement.\nBasically this field type does not save anything as post meta, it instead is meant to replace the default metabox that gets rendered for the given taxonomy type.\nIf you want a metabox section that saves term information as post meta, I recommend checking out and adapting https://github.com/CMB2/CMB2/wiki/Tips-&-Tricks#a-dropdown-for-taxonomy-terms-which-does-not-set-the-term-on-the-post to fit your needs.. Any sort of browser developer tool console errors? I don't have a copy of WPML available to attempt recreation with.. Not a valid email address there, and one through my personal site rather than through my employer. I checked around and found that WebDevStudios does have an account with WPML so I can get copy that way.\nI'll try to see if I can recreate something with this soon, but can't make promises on how quick.\nSteps you're using to recreate as well as as much information about your setup as you can provide would be a big help as well.. Can you provide a screenshot or two of the popup in question? I've installed WPML, done pretty basic configuration with defaults and the french language.\nI've gone in and edited a page that has a CMB2 metabox in it, and am not seeing any sort of popup yet.. Traced my way through some javascript and such, and based on everything I can see, that popup should only show up if this spot changes:\nhttps://cloudup.com/cNKrsua5W1b\nPossible that somehow your pages/areas are triggering the change event?. Still not managing to recreate the issue without actually changing that dropdown myself. Nothing is causing it to popup automatically.. The taxonomy_* field types are meant as replacements for the default taxonomy metaboxes, and set post terms, not post meta.\nSee the notes at the end of the lines: \nhttps://cloudup.com/czv7t_TP-Xo\nfrom https://github.com/CMB2/CMB2/wiki/Field-Types\nFor a field type that uses taxonomy terms and DOES save as post meta, please see our example over at https://github.com/CMB2/CMB2/wiki/Tips-&-Tricks#a-dropdown-for-taxonomy-terms-which-does-not-set-the-term-on-the-post and adapt as necessary for your own needs.\nHope this helps and clears up some confusion. Feel free to ask further questions if needed, but I am closing as it's not a bug or an enhancement.. I could see this one going both ways. Yes, letting .org handle the translations and everything as a whole is a good idea. However at the same time, that removes them from being available if someone intently and actively grabs all of its updates directly from GitHub instead of just going through wordpress.org.\nWith CMB2 being a library first and foremost, that happened to get allowed* to be wrapped up as a plugin, it may be best to leave the translations here.\n\nWithin the past year or two, WordPress.org has made policy changes regarding libraries with plugins. I'd need to try and hunt down the original post, i can't find it at the exact moment.. Creating a field group should save all the items under 1 key.\n\nhttps://github.com/CMB2/CMB2/wiki/Field-Types#group\nClosing as not an issue with the library, but you can still comment after closing :). Best answer i have for all those \"why's\" question is probably because no one has extended in that way thus far, that ended up merged into CMB2 core. They may have their own implementations that are elsewhere.\nRegarding alternative ways to save data, it is possible to intercept during the save process and store it however which way you may want. I can't recall the hooks offhand but can track them down if needed. I haven't personally.\nWhich part are you intending to translate in this case? The generated UI or the data entered and saved when editing the post?. Any changes to any part of the website since it was last working? Any updates applied?. Welcome, glad you got this figured out :D . To add at least a little context, the line 512 is this:\n// Sanitization via 'CMB2_Sanitize'\nreturn $sanitizer->{$field_type}();\nWith $field_type being set earlier in the code via $field_type = $this->type();\nThat said, as Justin mentioned, providing your CMB2 configuration code will help us out a lot more, because it looks like something may not be getting set correctly with what you're using.. For what it's worth, this is the core function for ms_is_switched\nfunction ms_is_switched() {\n    return ! empty( $GLOBALS['_wp_switched_stack'] );\n}\nThe hack above simply inserts an empty array into the global and short circuits it since an empty array is a value. One that will return false on empty() checks, last I checked.. @MattPurland So you're good again?. As far as I'm aware, this is going to end up being a custom solution. I am familiar with any field types that do this.\nAlso, I must note that the taxonomy_* field types aren't going to save the values to post meta. They're going to assign as taxonomy terms. The types are meant to act as replacements for the default taxonomy metaboxes.. I haven't personally created my own field types, so best i can offer is reading https://github.com/CMB2/CMB2/wiki. Closing as not a core bug, until proven otherwise.. Hard to say for sure where the data you're wanting is stored without seeing your CMB2 config code. However, if it's for sure saving as term meta, then you're not using the correct functions in your loop to get the data.\nYou're going to need to get the IDs for the terms associated with the post, and use those term IDs with get_term_meta(), not get_post_meta().. Closing for the time being. If @ashkankiani or someone else comes back with more information, we can address at that time.. Just to make sure, are you simply echo'ing out the meta field when you're displaying? or are you running it through the the_content filter? or at least wpautop ? We don't do that automagically in some way, so it's up to the user to.. Try \n<div class=\"column list\">\n    <h3 class=\"red\"> What you will learn ?</h3>\n    <?php\n    echo apply_filters(\n        'the_content',\n        get_post_meta(\n            get_the_ID(),\n            'workshop_data_youlearn',\n            true\n        )\n    ); ?>\n</div>\nAdjusted formatting to confirm no syntax errors.. Because get_post_meta() doesn't act the same way as the_content() the function does. get_post_meta() returns what could be considered the \"raw\" version while the_content() applies various filters to process the \"raw\" version into the \"pretty version\".\nBasically  if it's \"wysiwyg\" based fields, best to probably use the the_content filter like my last example.. I do not believe this type of feature/support has been added since that issue was originally closed, so very likely still not something available out of the box.. Probably just not enqueuing them like needed, especially since those resources may be more an admin-side resource that WordPress uses. You would need to determine their resource handles and enqueue them manually alongside the rest of your code above.\nFor what it's worth, we don't have any sort of flags or ways to know where these items are being loaded, so we don't have any way to predict when they should be loaded for you.. Closing as not an issue with CMB2 core itself, but feel free to continue commenting as needed.. I would look over the areas at https://codex.wordpress.org/Class_Reference/WP_Query#Order_.26_Orderby_Parameters a bit more regarding date options, especially in the meta_value section.\nPossible that you may also want to try timestamp-based saving for a more UTC based value that you can format as needed and perhaps a bit easier for sorting.\nClosing as not an issue with the core plugin itself, but more using the content saved afterwards. You can still comment as needed on the Github issue itself.. did you try out anything with the timestamp suggestion I made yesterday?\nPerhaps some of the args demo'd here will help? https://stackoverflow.com/questions/42366758/wordpress-sort-posts-by-custom-meta-value-date. Only thing I really see that I'd change, is using https://codex.wordpress.org/Function_Reference/current_time instead of time(). Due to the fact that you're working with a workshop time/date, current_time() would be good as it takes your timezone settings into account and would provide a more accurate representation.. Realizing we never answered this. Have you seen any new developments or issues with this topic? I know CMB2 has a composer file and is technically on packagist at https://packagist.org/packages/webdevstudios/cmb2 though some parts need updated (#1180). no way that i'm aware of, given how tied to WP core tables everything is. You're dealing with more than just potentially wp_postmeta, you also have wp_termmeta and wp_options tables as well, depending on how you register the metaboxes.. I'll defer to @jtsternberg for if he wants to add/include that type of functionality.\nThat said now that I remember it, it is possible to intercept the save process, and you could take the submitted data and save it wherever you want, including custom tables.. There's also hooks to dictate where you fetch from too.\nCheck the filters/inline docs inside CMB2_Field->get_data(), CMB2_Field->update_data(), and CMB2_Field->remove_data(). Using the same option key makes sense in my head at least, since it's still all one set of options, it's just visually separated out and organized via some tab sections.. At least in regards to the submenu items getting added, I have whipped up this quick snippet which will feel really straightforward.\nfunction wpcodex_adjust_the_wp_menu() {\n    remove_submenu_page( 'MY-MENU-SLUG', 'MY-SUBMENU-SLUG' );\n}\nadd_action( 'admin_menu', 'wpcodex_adjust_the_wp_menu', 999 );\nOnly downside thus far is that the Options page i'm doing this for loses menu highlight on the secondary tabs.. Perhaps a show_submenu parameter could be added for options_page_menu_hooks(). I hadn't delved into it last night, but my mind was thinking see if there's some way to fake it with some admin css and jquery or so. Will need exploring there.. At least from my testing/tinkering last night, it was still showing the fields/tab content and saving it. It's the secondary tabs that i'm hiding, not the primary one, which gets specified as the parent.\nI won't say this is a for-sure solution cause I still need to keep tinkering, but I presently feel it'll work for my needs in the long term.. Not quite sure I'm following. Is this all stuff you're doing on the frontend, based on the 2 fields you have in your screen?. what code are you using now for the spot to be displayed in? Something like an if ( ! empty( $value ) ) { ... } should help. However, need to make sure you're not checking for a value of like a URL that should be embedded, vs the result of trying to embed. You would likely always have a URL to embed, but that doesn't mean it returned successful content.. From what I can see, you have 2 different fields, and you're only checking for the value of one of them. You need to do something with the \"oEmbed\" post meta you've set up, likely a URL, depending on the value of this $image_or_video.\nPerhaps the [embed] shortcode briefly demo'd at the top of https://codex.wordpress.org/Embeds ?\nI think also applying the the_content filter to the meta value would work as well, but it potentially could add other bits from the site that may not be desired.\nLast Idea I have would be https://codex.wordpress.org/Function_Reference/wp_oembed_get\nNonetheless, you have part of things done, but not everything needed, given 2 different meta fields for this setup.. No, not quite what you're wanting, if I've followed correctly,  you want to act depending on if the url provides a preview or oembed data right? That comes after checking if you have a URL at all.\nSo it'd be more a case of this:\n<?php\n$embed_code = wp_oembed_get( $url );\nif ( false === $embed_code ) {\n    // Do something else here\n} else {\n    // We received data back, so we have something to work with.\n    echo $embed_code;\n}. At least based on https://wordpress.stackexchange.com/questions/196101/embed-and-word-count-not-working-for-wp-editor-instance it may not be a feature made available outside of the primary editor for the editor screen. Given that we'd be working with post meta for this, it wouldn't work.. Can you provide your used field type settings for this? I want to try recreating myself and see what's going on as well, while still trusting what you're seeing.. What version of CMB2 are you running for this site? I'm not managing to recreate for 2.4.2. I did reduce things down to just the colorpicker field for easier viewing.\nhttps://cloudup.com/cJ5QwmhJ3w2\nIn the screenshot you can see that I have an alpha value set, and the <button> has an inline position:relative css property.. Lots of good stuff, from what I recall, in the newer versions, definitely worth upgrading. If we confirm the issue is resolved post-update, we'll close this.. Welcome, glad it was an easy fix, all things considered.. The issue is that usage of esc_html. It's what's causing the html to render as is, instead of parse out and show the bold and the emphasis and the actual image.\nWhile I believe CMB2 handles that topic already, if you want to add an extra layer of output security, I'd consider using something like https://codex.wordpress.org/Function_Reference/wp_kses_post instead of esc_html. Whenever you see \"Array\" when you echo a value, that means you're receiving an array back, instead of a string. In those cases, you'll need to do something like a foreach loop on the variable to actually echo out the contents in each array index. I can't recall off the top of my head what the overall structure is for this field type, but I think the array indexes are the attachment ID, and the values stored are either a full <img> tag or at least the image URL that you can drop into an <img src=\"\"> setup to echo that much out.. Closing as not an issue with the plugin itself. We can still discuss as needed in the issue despite the closed status.. That snippet is meant to be used inside the loop. Notice the use of get_the_ID() in there. the $file_list_meta_key is going to need to be \"writing_gallery\" from your screenshot above. If you're not already in the loop, then you would need to amend the functions to accept an ID.\nHowever, based on everything shown, you'd just need to do the following and you should get something Make sure to specify the size you want for the image:\njt_cmb2_file_list_images( 'writing_gallery', 'full' );. all the while also providing a good learning experience to expand your skills and grow as a developer ;). @lipemat should I ignore the stuff at https://github.com/CMB2/CMB2/pull/1145/files/2a52d5806018940256da0151b4c65b9ad1534465..eaa9805ceccd2ccb9c4a5979368084bff64df192 at the moment?. As a whole, I don't see anything drastically wrong with this. I am curious if the new add_action line would be better a few lines up in the switch statement section for the default case. The only other place I think it would be potentially needed is alongside add_action( 'add_meta_boxes_comment', array( $this, 'add_metaboxes' ) ); but hard to say for sure.\nThoughts @lipemat ?. The mentions being the different possible positions within the post editor screen alone, or post editor vs options page vs taxonomy term edit screen vs user profile? Just making sure I am comprehending correctly.. Just making sure.. Just in case, have you tested this all out with a copy of the trunk branch?\nOtherwise, it looks to mostly be a JS topic and trying to keep track of the so-called randomness of adding/removing.\nNumbering seems to correct itself after hitting save and letting the page refresh.\nAs a whole I'm seeing it occur, so I'm not going to close the issue, but I don't have answers for how to fix it.. I don't have an answer for how to handle that, as I've never seen it come up in other support requests thus far. One question I have is are they in order when viewing in the database directly, before doing a get_post_meta() ?\nDo you have your CMB2 config handy that you could share for this?. Not managing to recreate at the moment.\nI have this saved as a meta value, exactly: \na:2:{i:50;s:9:\"url_here1\";i:13;s:9:\"url_here2\";}\nWhen doing this:\nvar_dump( get_post_meta( 180, 'thing', true ) );\nI am getting these results:\narray (size=2)\n  50 => string 'url_here1' (length=9)\n  13 => string 'url_here2' (length=9)\nSo I'm not seeing any sort of automated ordering, at least not with my local setup.. Welcome.. Couple things.\n\n\nIt looks like you're using the old style for adding metaboxes. You should really update what you're trying with to use `new_cmb2_box(). Check the wiki for current examples.\n\n\nYou're going to want to define some arguments to use for get_users() and create a key/value array to be used for the select options, instead of just trying to pass in the results. Perhaps store the user ID as the array key, and the array value being the display name.. Any news or followup with this one @Msantanna10 ?. Can you clarify what you mean by \"Repeater field should stay sync with the current ui\" ?. Can you also provide the entirety of your CMB2 config, instead of just the one $cmb_for_worker_job->add_field( ... ) ?. Definitely managing to recreate it at the moment, using the full code, and mixing in the previously listed out states, instead of using get_german_states()\n\n\nRegarding the hidden row part, I believe that's how CMB2 handles the repeatable aspect and adding a new field row. I would need to confirm with @jtsternberg though.\nRegarding the incrementing on save part, I believe it's purposely adding thr new row visually, in prep for the user adding more. However, due to not having an empty value that would prevent adding a new selection to the list during save, it ends up saving the first one listed. This repeats. Once I added 'show_option_none' => true, to the field, it has thus far stopped repeating itself.\nUltimately, my suggestion is to use the show_option_none or provide an empty value in your states listing, and see if that solves all your issues.. I would look over the information over at https://github.com/CMB2/CMB2/wiki/Field-Parameters and see what you can come up with.\nFeel free to ask any questions you encounter while reading there, and I'll answer the best I can. Closing the issue as it's not an issue with CMB2 itself, but we can still discuss here for a bit.. @jtsternberg I can confirm saving issues with the Visual tab. Curious if there are errors between Gutenberg's React code and CMB2.\nAlso something that could trickle its way in to WordPress core since we're using WP api functions for the secondary WYSIWYG sections.. @helena-reshift it's not released yet to say wordpress.org or so yet. You'd need to download and test with a copy of the develop branch for CMB2 here on GitHub.. There definitely are as GitHub here holds all the build tools that are used to compile the final results that you see released on wordpress.org\nShould still be able to drop the overall checkout of the repo into a folder into the plugins folder and activate. At least last I checked.. Just for my clarity sake, you mean default values set in this?\n$cmb_group = new_cmb2_box( array(\n    'id'           => $prefix . 'metabox',\n    'title'        => esc_html__( 'Repeating Field Group', 'cmb2' ),\n    'object_types' => array( 'page' ),\n) );\nFor that last part, I know I work on a project that prevents deletion of a field by simply hiding the remove button via js/css. Simply uses jQuery.hide() on it with the specific field group's selector.. Ah\nWhile I haven't tested anything, I wonder if you could wire up a way to save some post meta upon post creation. It'd be a case, in my mind, of using CMB2 to create an entry the way you want it to be default, then grab the meta value stored for that, and use it for the auto-creation at the start. Biggest challenge I can see with this idea though, is making sure it's shown and available once the page loads. Just throwing some ideas out there, as I don't believe there's anything for that out of box with CMB2.. That would definitely be one way to achieve this, yep. Glad to hear something was figured out. :D . Isn't this type of field a \"super textarea\" similar to how like the post editor is? Curious if that's playing a part in everything here.\nMaybe an alternative solution would be conditional display of the field, using other extensions from CMB2, for the time being.. How are these, thus far, being stored in the database? I assume $id is the post id that you could use to query data with?. Fun, an array of arrays. Don't have an immediate answer for you, but you'll need to find a way to either do array searching for values you want to compare against, or find a way to specify the accurate array key for the outer array.. I have a feeling there's no one \"right\" answer here, as is typical with PHP as a whole. The biggest thing is 1) making it work. 2) Making it work better if possible. That said, I think you're on the right foot forward with this above, for what it's worth, without diving in myself with actual working code in front of me.. Definitely more often a bug than a feature request.\nThat said, have you checked out the \"Default\" option parameters for the field types you're using? May be the best/easiest way to achieve what you need.. Thoughts on this one @jtsternberg ?. To a certain degree, yes. It wouldn't be dependent on metabox ID though, more post numeral IDs.\nOverride where you grab data from:\nhttps://github.com/CMB2/CMB2/blob/trunk/includes/CMB2_Field.php#L251-L287\nOverride where you save data to:\nhttps://github.com/CMB2/CMB2/blob/trunk/includes/CMB2_Field.php#L320-L354\nYou'll need to make one of your pages the primary one, and the other one dependent on that page.\nI've used these filters personally to set up a metabox on post types that actually fetch and save data to the wp_options table, and then also a settings page that also saves to the same location. That way updating either spot reflected the same data appropriately.. Closing since this isn't an issue with CMB2 itself. However, you can still comment and discuss, as needed.. just out of curiosity, are you creating your fields and such within a callback on one of the cmb2 hooks, like cmb2_init. Curious if it'd be possible that you need to run your code a bit later than it is now, and those warnings would end up not happening.. Gotcha. I'm looking at the code and I do see the autoloading checks for \"CMB2\" in any part of the classname, so it isn't going to be a case of changing a small detail in your classname like I was first thinking.\n@jtsternberg I see no issue with this check, and if you don't either, I propose we merge it in.. @manzoorwanijk can you try something for me, just for my own confirmation. Momentarily prefix your classes with something besides \"CMB2_\" and see if the issue remains. I believe the core autoloader may actually just be checking the first part of the name, which is not what I was thinking earlier.. Thanks.. Just throwing some thoughts out there regarding this, not necessarily as a direct reply to you @brice-lucas \nI'm curious if the CMB2_Type classes are instantiated all the time, or just when being used.\nAs is, I wager it's being run too soon as opposed to too late.\nLooks like we already do some enqueue/dequeue work for color pickers in CMB2.php line 1459 (as of the time of this post). Would need testing, but enqueuing alongside what's already there would probably be a good route to go.\nBrice, if you're willing to test to ensure no functionality breaking, and make the edits, we'll happily accept the PR contributions. Just to be certain, are you requesting that these get linked in the resources section of the readme?. I think the biggest issue is the fact that WPML does the multiple attachment versions, creating the multiple attachment IDs. Meanwhile CMB2 will often save the specific attachment IDs as part of the meta value. Thus the need for things like what you have above.\nI can't say that what you have is either right or wrong, it's mostly a case of does it do what it needs to.. Honestly, I think the thing you're needing most is just a filter/way to intercept the data being saved, and less the detail about providing your own sanitization callback. You'd still be responsible for your sanitization if you go that route\nI think https://github.com/CMB2/CMB2/blob/trunk/includes/CMB2_Field.php#L251-L287 and https://github.com/CMB2/CMB2/blob/trunk/includes/CMB2_Field.php#L320-L354 may be better options.. Sounds right to me, really.\nThe key part is this spot of the comment: Returning a non-null value will effectively short-circuit the function.\nIf you look at https://github.com/CMB2/CMB2/blob/trunk/includes/CMB2_Field.php#L357 we do a strict type check where the returned value MUST be null for it to continue. You returning true is not null, so it will return that instead, on line 358, and not continue on.\nI am thinking you did what you needed.. If this is something you'd have complete control of: both the theme/theme settings as well the configuration settings for the CMB2 usage, you could just hook up an update_option call with the intended settings, on the theme activation hook. Then those settings, if mapped properly, would then fill in the CMB2 fields afterwards.. Confirmed we're still on 5.2+ for CMB2 core.. Added in 38a1f22. Alternative method, create a new user account and do the routine over again?. This is likely going to be the best source for some sort of related issue/sort of answer for you: https://github.com/CMB2/CMB2/issues/1073 It has a stackoverflow link as well for longer explanation of challenges.\nOne of the biggest challenges, as highlighted below, is dealing with date formats between PHP and JavaScript, as they aren't the most compatible. \nOverall list of various date-based open issues:\nhttps://github.com/CMB2/CMB2/issues/1073\nhttps://github.com/CMB2/CMB2/issues/1019\nhttps://github.com/CMB2/CMB2/issues/986\nhttps://github.com/CMB2/CMB2/issues/765\nhttps://github.com/CMB2/CMB2/issues/678\nhttps://github.com/CMB2/CMB2/issues/646\nhttps://github.com/CMB2/CMB2/issues/518\nhttps://github.com/CMB2/CMB2/issues/378\nhttps://github.com/CMB2/CMB2/issues/343\nhttps://github.com/CMB2/CMB2/issues/300\nhttps://github.com/CMB2/CMB2/issues/378. Can you provide your CMB2 code so that we can see if we can replicate the issue or point out other issues you may have with your configuration?. Looks like similar issues to https://github.com/CMB2/CMB2/issues/1181 in which I reference https://github.com/CMB2/CMB2/issues/1073 which all circles back to the date formatting in the form of \"d/m/Y\". This trickles all the way down to the PHP level of things. See https://stackoverflow.com/questions/2891937/strtotime-doesnt-work-with-dd-mm-yyyy-format/2891949#2891949\nSo, while it may not be the most ideal, I did have no issue with setting the format to be \"d-m-Y\" without the forward slashes as separators. Others have found success with just storing the resulting date as a UTC timestamp.. Welcome. Last I was aware or had seen, we don't have any official, tested, support for adding fields to the registration form. We do have user profile support but that's after they have already been registered and set up.\nTo be certain, the registration page you're referring to is the one seen at wp-login.php with some extra $_GET arguments to indicate they're signing up for a new user, correct? Or perhaps some custom registration page that a different plugin created like BuddyPress or WooCommerce?\nExtra thoughts: when in doubt, you can always enqueue your own js/css files, just a matter of finding the correct hook to do it on. Frontend is wp_enqueue_scripts, admin is admin_enqueue_scripts, and wp-login.php based pages are login_enqueue_scripts.\nIf it was a custom registration page, like the BuddyPress or WooCommerce one, I believe things would generally just work, or potentially would, as opposed to wp-login.php version. This would be because the scripts and hooks are already set to be run.. Welcome.. Not managing to recreate on my own at least with what has been provided above Dave,\nCan you provide the whole class you're using for this? It's possible it's something else going on.\nAttached is a screenshot of what I got and what code I'm using for it. Note I did comment out the display_cb as I don't know what you had in place for that.\n\nadd_action( 'cmb2_admin_init', 'abcmyfunc' );\nfunction abcmyfunc() {\n    $cmb = new_cmb2_box( array(\n        'id'           => 'mybox',\n        'title'        => 'My Title',\n        'object_types' => array( 'options-page' ),\n        'option_key'   => 'something-else', // This doesn't work.\n        'parent_slug'  => 'options-general.php',\n        'capability'   => 'manage_options',\n        #'display_cb'   => array( $this, 'options_page_content' ),\n    ) );\n    $cmb->add_field( array(\n        'name'    => esc_html__( 'Hero Image', 'cmb2' ),\n        'desc'    => esc_html__( 'Upload an image.', 'cmb2' ),\n        'id'      => 'heroimg',\n        'type'    => 'text',\n        'options' => array(\n            'url' => false, // Hide the text input for the url\n        ),\n    ) );\n}. Aha! Good to lesson to note for anyone coming around to this in the future.. We watch both places, so this may be the better spot to address in the end, for both field types.\nSupport thread in question: https://wordpress.org/support/topic/reorder-of-repeating-group-doesnt-apply-to-textarea_code/. I'm not married to any specific solution, as js isn't my strongest area of knowledge, so the topic is most definitely open to discussion and best solution wins.. Is this one good to be closed now? or do we want to leave it open a bit longer for visibility and testing purposes?. @JiveDig Yes I believe that's the issue that was related to other GB conflicts. Worth trying Justin's changes to help test/confirm. . Yeah, Justin is like that at times, and it's all good changes to be made. :D . Do you know what version of CMB2 is coming with this theme? I'm asking because the code above is using the old way of initiating metaboxes and not the new way outlined in the example functions file in the current uptodate copy of CMB2. Thanks.\nWill try to get to this soon. So I added your CMB2 code to my local install. Set a custom page to be my \"posts\" page. Edited that page and filled in the fields. I went in the order as specified above, these are my saved values:\nMain column:\nhide\nsome image url\nhide\nwide\nSidebar metabox:\nLeft\nHitting save on the post, is saving the meta to the appropriate post in the meta table.\nHave I missed any details?. This raises a good question, is the issue on the frontend or on the backend with saving?\nIf it's on the frontend and in the template being used for the \"posts page\" display, then you're going to need to hardcode the page ID with all your meta fetching, because things like get_the_ID() are going to be based on the various posts being listed. For example, if you were wanting to use the \"posts page\" to store some bits of data that is displayed at the top of the output, with the rest of the view being the posts.. Any news on this front? Any confusion we can try to help clear up?. @AshekurRahman Are you referring to WordPress 5.0.x or CMB2 2.5.x ?\nAlso could you clarify what you mean by \"not showing\" ? Like the metaboxes themselves are no longer showing up in your editor screen?. still not quite sure what part and aspect is not showing or working, so that I can drop this code into my own local and check things out. Also the WordPress version you're on is going to matter because of all the editor screen changes that came in with Gutenberg/5.0.. I realize that part. I'm asking HOW it's not working now, so I can be on the lookout for that behavior.\nIs it not rendering anything? Is it not fetching and showing content on the frontend where you're trying to display the saved data? Is it not saving data any more?\nWhat is going on with it?. Is your metabox for the \"post\" post type showing up as expected?\nI've copy/pasted everything you have in to a development site I use, and am not having any issues with the \"Page Options\" metabox or the one for Portfolio, but I am not seeing the \"Additional Fields\" for the posts.. very much like that line does, but it seems whatever is running this may be running before it's actually loaded.\nPerhaps change this:\nadd_action( 'plugins_loaded', appark_plugins_loaded' );\nto\nadd_action( 'plugins_loaded', appark_plugins_loaded', 11 );\nto have this spot run a bit later and perhaps after CMB2 itself has has been loaded.\nOtherwise, if this is a theme you downloaded/purchased that bundles CMB2 with its files, perhaps contact the support team for it.\nIf you updated the library yourself by chance, then you'd want that 242 to match the current version number, which is 251 last I checked.. We can definitely consider adding some extra checks and everything here, but for the meantime, it may just be best to provide your own show_on_cb that should easily provide everything you're needing for this case. That way, you could return true on the empty string check and have it show in those cases.. Worth reading through https://github.com/CMB2/CMB2/wiki/Basic-Usage and the wiki in general here on the github repo.. Best explanation I can offer for that detail would be order of loading of everything, and needing to be mindful of the detail. Definitely not disagreeing that it's perhaps unexpected behavior, but I'm also curious about the use-case for leaving empty entries in the meta fields for your object types/options.. Definitely something to consider.. Until told otherwise, I think this is a detail that needs added as an enhancement for the field type above, if not overall. As is, we just may not have things set to display a preview of sorts, and I don't know offhand how to possibly achieve it as well.. Possibly related? https://github.com/CMB2/CMB2/pull/874. hey @rubengc this is looking good. If you could issue a pull request on the develop branch, that would be awesome and we can get that merged in.. Can you provide the config callback you're using to set up your fields?. Before trying to use it, what all is stored in your wp_secondary_options.\nWhats your entire CMB2 config so we can potentially set up in our local install and attempt to recreate?. Is there any specific reason you're using the cmb2_init hook to add your callback? It's generally been my experience that for some reason, init, which cmb2_init is tied to, runs a handful of times, which would explain why you get 3 echos of your value. If there's a different hook that you can use, may be better to use that one.. Instead of wrapping the add filter in a different action callback, I'd just use this below directly, right in your functions.php file. I copy/pasted exactly, I trust you'll clean up the api_slug function to best fit needs in the end.\nfunction api_slug( $slug ) {\n    $wp_rest_url = cmb2_get_option('wp_secondary_options', 'wp_rest_textmedium');\n    echo $wp_rest_url;\n    // if (!empty($wp_rest_url)) { \n    // return $wp_rest_url;\n    // }\n}\nadd_filter( 'rest_url_prefix', 'api_slug');. where are you defining that one? plugin? theme files?\nmay need to go back to the wrapping of the line above, but perhaps use plugins_loaded or after_setup_theme hooks instead of init. Alternatively, you could deconstruct what is in cmb2_get_option() and just see how exactly it's fetching specific values from the overall saved option serialized data. cmb2_get_option() is just a fancy helper function, really.. Brings me back to my question of where' you're putting your copy of cmb2_get_option() to be defined.. Apologies, I was thinking you were using something like https://github.com/CMB2/CMB2-Snippet-Library/blob/master/options-and-settings-pages/theme-options-cmb.php#L63-L88 which isn't actually the case. This is also why i was talking about where you're defining things and \"checking out the internal of it\".\nThat said, maybe dropping in your own copy of that function would help out in your case. It'll check if the function exists and if so, utilize it, otherwise it'll pluck things out of the database with WP standard get_option().\nSome extra notes to keep track of things. cmb2_get_option() is defined in the helper-functions.php file, and that one is not run until the init hook. So that part is making sense. There also may be promise in cmb2_after_init hook, but I can't say for certain in this case.. Because init gets fired a number of times. Pretty sure the AJAX stuff triggers it as well as just a simple pageload.\nLet's go with the snippet I pointed out in my last reply, and run with that for your needs. . Not trying to be combative here, but just trying to narrow things down and figure things out with you.\n\nI don't think testing echo'd output on these hooks is very indicative of anything. What are we trying to test with it?\nI still have the rest_url_prefix hook parts in place in my local. I put a breakpoint in it, and the breakpoint caught 3-4 times, this is because, as I found, the function that filters the prefix value is called that many times for a pageload.\nI added an echo statement outside of that callback for rest_url_prefix, but still inside the cmb2_init callback, and it only echo'd once.\nI added an echo statement for a callback on just init, and that only output once.\n\nSo, the amount of times things are echo'd isn't really telling us anything other than the filter is used many times in the pageload.\nNow. I have the following snippet in a file in a mu-plugin folder, and I'm not managing to get any errors from it. mu-plugins run pretty early in the loading chain, so the filters global array is getting populated early. I do have the standalone CMB2 plugin active, it's not part of a theme or bundled with a different plugin. Not sure where your copy is at in your site.\n```\nadd_action( 'cmb2_init', 'wp_api_slug' );\nfunction wp_api_slug() {\n    add_filter( 'rest_url_prefix', 'api_slug' );\n}\nfunction api_slug( $slug ) {\n    $wp_rest_url = cmb2_get_option( 'wp_secondary_options', 'wp_rest_textmedium' );\n    return $wp_rest_url;\n}\n```\nMy saved value for that option is \"avc\". Attached is a screenshot of the 3 times that it is showing up for me\n\nSo, either, somehow your code is running too early before cmb2_get_option is loaded, or something else is going on. In terms of the fatal errors, I'm not experiencing any with the intended goal.\n. I could see needing to flush permalinks, but that all is going to be more a WP core issue than a CMB2 one at this point. So many details. Question regarding this. When you try to save with a required field unfilled, and the group is closed, do the error indicators/popups show once you toggle it open again? Or does it just show as if nothing is wrong until you try to save again with the group opened?. For reference https://github.com/CMB2/CMB2/pull/1235. Some initial feedback.\nNitpick on the indent needing one more tab to get aligned.\nThe rest is that while I can appreciate using vanilla javascript for it all, we do have jQuery available to use in the entire spot, and have already cached the document in $document as an example.\nI think we may process the js etc before final releases, so that may not be needing to be done.\nLastly, since we do have the minified versions as well that get processed and made, there's room to use more meaningful variable names than x in the developer copy. Helps make developing understand the code a bit better.\nAll in all, it looks like it's valid and working code, so i think it'll be good to merge in in the end, pending the feedback above and any discussion needed there.. I know we have https://github.com/CMB2/CMB2-Snippet-Library/blob/master/misc/adding-wordcount-to-cmb2-wysiwyg-field.php which talks about this topic and has a working solution, or at least was working last I knew :D . To add to Justin's feedback, it hasn't traditionally been a large requested feature, which is why it was left as a snippet thus far.. I think you need to drop the nodeName into the closing part still.. ",
    "JiveDig": "This was rolled into 2.4.x right? I think this issue can be closed.\nExample: https://github.com/CMB2/CMB2-Snippet-Library/blob/master/options-and-settings-pages/options-pages-with-tabs-and-submenus.php. WOOT!\n. Okay, really weird.  Maybe I only 'thought' i tested without any autop setting.  When i just deleted the line (even commenting it out caused issues) then it defaulted to wpautop => false.  And it worked.\nI'm having weird rendering issues with the row height though too.\nThe 'textarea_rows' => 8, setting works on only the first WYSIWYG, but only the first few lines are clickable.. and when you do click it, it automatically shrinks the height of the editor down and doesn't keep the row setting.\nOn the other WYSIWYG editors the textarea_rows setting doesn't work at all. No matter what I put, it has style=\"width: 100%; height: 67px; display: block;\" on the iframe.  The row setting doesn't change the height.\n. Quick update, as posted in Skype group... this is what i'm seeing: https://www.dropbox.com/s/nf803p9lmp77oy4/cmb2-multiple-wysywig-weirdness.mp4?dl=0\n. A lot has changed since then. I don't think I can confirm it's still an issue. It may have been a thing with 4.0 or whenever the editor/scroll stuff was added to core.  You can probably close this for now, or until someone else can confirm it's actually happening. I think i'm all set.\n. Since CMB is so dev friendly... would it make more sense to just and a field attribute for class? Then we can add whatever class we want to whatever field we want.  More flexible and less room for error?\nSimilar to what ACF just added to Pro.\n\n. Btw.. here's an example of what we are doing in our soon-to-be-released recipe plugin that uses CMB2. Without columns, the layout would get out of control.\n\n. This is awesome! Extremely useful IMO. Thanks!\n. @jtsternberg proof of concept more then my recipe plugin screenshot? I'm going to convert our row wraps to this method this week... but it will look the same\n. Okay, just to clarify... the row_classes parameter making it into core, right? Just nothing to do with columns at the moment?\n. Since i've been playing with the API for a bit lately, I finally get why this is awesome... so, yeah... awesome. Looking forward to it. Thanks guys!\n. +1. Just hopping in here.. i've been using the save_fields parameter on front end forms for posting.. but would also like to see a save_field parameter... not for the whole form, but per field. That would be a powerful addition IMO.\n. facepalm... that was obvious. Didn't even think about callback. I was thinking that was only for show_on. Thank you!\n. Callback allows me to only set a default value if i'm editing a post, not creating a new post... somehow.\n. Jumping in here as i've recently done 'mock' tables via CSS in CMB2.\n\nI turned off styling on that front-end form and did some custom CSS.\n. On mobile it goes to...\n\nbtw.. is proper etiquette to link to images? Or just upload them here?\n. That looks great. Would love to see something like this get fully tested and merged.\nWhat happens if 'show_names' => false vs 'show_names' => true? \n. +1 on descriptions underneath on all fields.\n. I'm curious about times when we don't want a table based layout though. I thought that's what the show_names option was actually.. to show names on the left or on top. It'd be nice to have the option to display labels and fields as block instead of table.\n. Hmmm.. the table vs block thing could be one new parameter when registering the metabox. Something like 'display_table' => true, and it could just add a new class to the metabox, 'cmb-table' or something. Then all the table based CSS can be based off that.\nAnybody have thoughts on that idea?  I like the table layout for many applications, but sometimes it just doesn't make sense... like metaboxes with minimal fields, or in the sidebar, etc...\n. @jtsternberg I agree. I don't think the table layout should be default. I think it should default to it's current way... just the fields as block. The new parameter would add table styling (CSS, not td)\n. I'm liking the direction too... what if the parameter was 'display_layout', and it defaulted to block, but could be set to table as well.. then it would leave room for more options later. Thinking out loud, that could certainly be overkill\n. Is anyone willing/able to start breaking this down int osmaller and more easily managed parts? I'd love to see form styling/layout get leveled up. I know CMB uses WP core styling for the most part, but WP fields, particularly user and post field groups are terribly ugly. I'd love to help, but not sure where to start, besides some of my examples above. \n. Great!\n. Wow... yeah my code was taken right from that. Perfect now. Thanks!\n. Just hit this issue with a (locally symlinked) plugin that bundles CMB2. Just thinking about it... if I run the filter in my plugin, but another plugin bundling CMB2 gets loaded first, won't my filter still run and screw things up?. Interesting note, it only fails on my term metabox. Not on my post/page metabox. The filter fixed it, though i'm leery to use it.. We use CMB2 in our theme/plugin and have customers complaining about this as well. I'm also in the camp of \"never knew it didn't work\" until people started mentioning it.\n. I'd like to re-open this issue, as I'm seeing the same behavior.\nCMB2 v2.2.4\nThis is a lone-file in mu-plugins:\n```\nadd_action( 'cmb2_init', function() {\n$cmb = new_cmb2_box([\n    'id'           => 'test',\n    'title'        => 'Test',\n    'object_types' => array( 'post' ),\n    'context'      => 'normal',\n    'priority'     => 'default'\n]);\n\n$group_field_id = $cmb->add_field( array(\n    'id'   => 'group',\n    'type' => 'group',\n));\n\n$cmb->add_group_field( $group_field_id, array(\n    'name' => 'Text Test',\n    'id'   => 'text_test',\n    'type' => 'text',\n));\n\n$cmb->add_group_field( $group_field_id, array(\n    'name'              => 'Select Test',\n    'id'                => 'select_test',\n    'type'              => 'select',\n    'default'           => '',\n    'select_all_button' => false,\n    'options'           => array(\n        ''    => 'Empty',\n        'one' => 'One',\n        'two' => 'Two',\n    ),\n) );\n\n}, 20, 2 );\n```\nSteps to reproduce potential bug:\n\nCreate a new post\nAdd a post title to ensure the post saves correctly later\nAdd data to the text field and choose \"One\" or \"Two\" as the select field value\nSave/Publish the post\nClick \"Add Group\"\n\nThe select field of the new row uses whatever the saved value is from the previous row. I'm only seeing this with select fields, though I haven't tested others yet. The text field is clear, but the select value (using multiple select fields does the same thing) seems to be the issue.. FWIW, just confirmed this bug/behavior on a totally separate install.. Note: I tested with Checkbox, Radio, and Multicheck, and it only seems to happen with Select fields.. A related issue seems to have resurfaced after the last update. Using 2.2.5.3 when i add a new row, the select fields do not take the default value as set in the field, they just use the first item in the options array.\nIf this is considered a separate issue, I can open a new issue here.. In my case my code has defaults set but 2nd and beyond rows don't respect the defaults, they just use the first option.. @AlchemyUnited I see how that could be a workaround. I haven't looked at the fundamentals of how the rows duplicate, but it seems like an issue that CMB core should handle correctly IMO. Maybe @tw2113 can take a look again and re-open this issue?. Wiki would be great. I was doing all custom JS then thought maybe I should see if CMB has any events built in, and sure enough there is! The only way I found was a search that returned the changelog. Either way, those events are super helpful \ud83d\udc4d . @jtsternberg I'm testing 2.4.1 now and still getting false in a repeatable WYSIWYG field. Tested on 2 different installs.  If I add 'default' => '', to the WYSIWYG field, then it's fine.. Sorry @jtsternberg, I think i was too excited for \ud83c\udf7a on Memorial Day weekend ;P\n```\nadd_action('cmb2_init', function() {\n$cmb = new_cmb2_box([\n    'id'           => 'test',\n    'title'        => 'Test',\n    'object_types' => ['post'],\n    'context'      => 'normal',\n    'priority'     => 'default'\n]);\n\n$group_field_id = $cmb -> add_field([\n    'id'   => 'group',\n    'type' => 'group'\n\n]);\n\n$cmb->add_group_field( $group_field_id, array(\n    'name' => __( 'Content', 'textdomain' ),\n    'id'   => 'content',\n    'type' => 'wysiwyg',\n) );\n\n}, 20, 2 );\n```. Yessir, works in 2.4.2 thanks!. I'm looking to do the same thing. Using the same option key, but breaking up the fields into tabs would be a great addition. I'll need to roll something up myself as well I think.. Yes exactly that. I have an ads/content plugin that has 10-20 fields to put in ad code. They are all in 1 key so it's only 1 option/row, but I'd like to break them up in tabs for \"Global\", \"Posts\", \"Pages\", \"Sidebar\", etc.. Not sure where to post this note... but we're currently experience issues where things blow up (the entire metabox doesn't load) if you are using a WYSIWYG (TinyMCE) field. See https://github.com/WordPress/gutenberg/issues/7176 for reference.. Sorry for hijacking... just realize this may have been dealt with here? https://github.com/CMB2/CMB2/issues/1156. ",
    "John112": "Hi,\nRendering a taxonomy_radio field doesn't work properly for me (WP 3.9x + CMB2 beta). \nInstead of the saved term radio box, an additional option is automatically added to the terms list and checked - \"None\"\nThis comes with 2 PHP Notice messages :\n- \"Undefined offset: 0\"\n- \"Trying to get property of a non-object\".\nThey both point to CMB2_Types.php L.659\nPHP\n$saved_term = is_wp_error( $names ) || empty( $names ) ? $this->field->args( 'default' ) : $names[0]->slug;\nIndeed, instead of [0], the array offset is the term ID.\nHere are my metabox args: \nPHP\narray(\n'name' => __('Types Action', 'text_dom' ),\n'desc' => __('blablabla', 'text_dom' ),\n'id' => $prefix . 'types_action_radio',\n'taxonomy' => 'types_action',\n'type' => 'taxonomy_radio',\n),\nHere is the structure of $names, as I'm getting it when printed just before L.659 in CMB2_Types:\n```\nArray\n(\n    [37] => stdClass Object\n        (\n            [term_id] => 37\n            [name] => Conference\n            [slug] => conference\n            [term_group] => 0\n            [term_taxonomy_id] => 40\n            [taxonomy] => types_action\n            [description] => \n            [parent] => 0\n            [count] => 1\n            [object_id] => 689\n            [filter] => raw\n        )\n)\n```\nTo fix the problem, I simply replaced $names[0]->slug; by reset($names)->slug;, which returns the value of the first array element.\nHowever I'm not familiar with the class code and couldn't find where the term ID is defined as the array offset. Wouldn't it be better to fix it there? Is $names array always containing only one element?\n. ",
    "riyazmohammad": "i also posted this issue on original repo\nhttps://github.com/WebDevStudios/Custom-Metaboxes-and-Fields-for-WordPress/issues/676\n. ",
    "gregrickaby": "Great. I'll work on the other files too!\n. Ah, that's my bad on the submodules. I thought that kept NODE MODULES updated... I'll remove it.\n. If by tested you mean, do the styles look the same as CMB2/master? Then the answer is yes. \nI tried to keep the CSS identical to what you had. However, I did make some minor color tweaks to keep things consistent (was there really a need for 2 or 3 different \"light yellows\")?\nAnd it looks like it does keep GIT submodules current, not Node modules. https://github.com/jaubourg/grunt-update-submodules \n. @jtsternberg Everything looks good here. \n@senicar Great work! Looks like you need to update CMB2_Types.php before we can merge this in...\n. Looks good. :+1: \n. Love it. My only suggestion is to make the website field wider. You have a super wide field for oEmbed, but a medium width for regular 'ol URLs...\n. Thanks for all your hard work @alessandrotesoro! Will check it out...\n. @jtsternberg From our conversation yesterday, you know that I'm in the middle of trying to create inline repeatable groups for a client. I'd like to get involved here. \nI can start breaking out the Sass into proper partials, add Gulp support, then start decoupling global styles/markup as you propose. Would love to see apply_filters around any/all markup. Then, down the road, devs might be able to \"theme\" CMB2 without getting hacky.\nI was setting up some Sass scaffolding this morning, and wanted to show how deep the rabbit hole goes:\n\nIt's quite the \"flying v\"! \ud83d\ude2e  \nLike @willthemoor said, this process needs to be broken out and will take some time.\n. ",
    "ejoubaud": "+1\n. When this is merged, the config for people looking to include this to their project through Composer should look like that:\n\"repositories\": [\n        {\n            \"type\": \"vcs\",\n            \"url\": \"https://github.com/WebDevStudios/CMB2\"\n        }\n    ],\n    \"require\": {\n        \"webdevstudios/cmb2\": \"dev-trunk\"\n    }\nUntil then, as a temporary workaround people can use this config aimed at my fork for this PR:\n\"repositories\": [\n        {\n            \"type\": \"vcs\",\n            \"url\": \"https://github.com/ejoubaud/CMB2\"\n        }\n    ],\n    \"require\": {\n        \"webdevstudios/cmb2\": \"dev-add-composer\"\n    }\nIdeally, if you submit the package and use semver-compliant tags, it will eventually look like that:\n\"require\": {\n        \"webdevstudios/cmb2\": \"1.0.*\"\n    }\n. ",
    "nlemoine": "Yes, I tested it and it works fine when the options array contains an empty value like: \n<option value=\"\">Please select a value</option>\nBut it's not the default behavior and I didn't think of all use cases: with a default value, etc.\nI'll try figure out a better way to achieve this and add some commits to this PR. \n. ",
    "tnorthcutt": "Added the number field to the wiki\n. Closing as this looks resolved; @jtsternberg please reverse if I'm wrong \ud83d\ude04\n. @modemlooper I closed it based on @jtsternberg's comments above, but I'm I'll reopen now for further discussion :smile: \n. @cmlowe can you confirm if this is still an issue? If not, can you please close this? Thanks!\n. I'm closing this issue as it's quite old with no response from the original reporter. If this is still a concern, please feel free to re-open with more details or new information as relevant. Thanks!\n. Closing as this is over a year old.\n. Closing as this is over a year old.\n. Closing as this is over a year old.\n. Closing as this is over a year old.\n. I'm closing this issue as it's quite old with no response from the original reporter. If this is still a concern, please feel free to re-open with more details or new information as relevant. Thanks!\n. @Gaffen Do you know if this is still an issue?\n. Unfortunately, we can't support every person's specific or custom implementations for CMB2. Github issues are reserved for confirmed bug reports and occasional feature requests. Please review CONTRIBUTING.md for support suggestions. Please also review the additional resources listed at the bottom of that document, as the solution you're looking for may already be present.\n. Closing as it looks like this is closed by https://github.com/WebDevStudios/CMB2/issues/226#issuecomment-78278448\n. @vpratfr the problem with that would be that if there were a post type called any-cpt you'd have quite a mess :smile: \n. +1, experiencing this bug as well.\n@austinjreilly are you running into this as well? Any ideas?\n@jtsternberg I'm not familiar enough with CMB2 to know where to start debugging this, but if you can point me in the right direction, I'd be delighted to try and put together a PR to fix this.\n. Unfortunately, we can't support every person's specific or custom implementations for CMB2. Github issues are reserved for confirmed bug reports and occasional feature requests. Please review CONTRIBUTING.md for support suggestions. Please also review the additional resources listed at the bottom of that document, as the solution you're looking for may already be present.\n. @bbmatt is this still a issue? If not, would you mind closing, or if it is, could you update with any new info available? Thanks!\n. Unfortunately, we can't support every person's specific or custom implementations for CMB2. Github issues are reserved for confirmed bug reports and occasional feature requests. Please review CONTRIBUTING.md for support suggestions. Please also review the additional resources listed at the bottom of that document, as the solution you're looking for may already be present.\n. @saqwild Great question, but to be frank this isn't really a code issue per se, so this isn't the right place for the question :smile:. I'd suggest asking somewhere like WordPress Stackexchange or similar.\n. @michaelkk that does indeed sound like an issue with file permissions, but unfortunately, we can't support every person's specific or custom implementations for CMB2. Github issues are reserved for confirmed bug reports and occasional feature requests. Please review CONTRIBUTING.md for support suggestions. Please also review the additional resources listed at the bottom of that document, as the solution you're looking for may already be present.\n. @BenRacicot not sure if this is up to date, but I think it should make for a good starting point: https://github.com/WebDevStudios/CMB2/wiki/Adding-your-own-show_on-filters#example-taxonomy-show_on-filter\nIf that works, please close this issue :smile: \n. Unfortunately, we can't support every person's specific or custom implementations for CMB2. Github issues are reserved for confirmed bug reports and occasional feature requests. Please review CONTRIBUTING.md for support suggestions. Please also review the additional resources listed at the bottom of that document, as the solution you're looking for may already be present.\n. Unfortunately, we can't support every person's specific or custom implementations for CMB2. Github issues are reserved for confirmed bug reports and occasional feature requests. Please review CONTRIBUTING.md for support suggestions. Please also review the additional resources listed at the bottom of that document, as the solution you're looking for may already be present.\n. @jerturowetz is this still a issue? If not, would you mind closing, or if it is, could you update with any new info available? Thanks!\n. I'm closing this issue as it's quite old and seems to be resolved. If it's not, feel free to re-open \ud83d\ude04 \n. @VdeVatman is this still a issue? If not, would you mind closing, or if it is, could you update with any new info available? Thanks!\n. I'm closing this issue as it's quite old with no response from the original reporter. If this is still a concern, please feel free to re-open with more details or new information as relevant. Thanks!\n. Closing this as it seems to be resolved; @cggit if it's not feel free to reopen.\n. Closing for now.\n. Everyone who sees this and is tempted to add a +1 comment: please, please, please do not. That needlessly pings people who are subscribed to issues on this repo. Just go hit the thumbs up on the OP above to show your support for this feature request, please.. @greyearlgrey85 including a link to an example would go a long way toward making this possible to debug.\n. @greyearlgrey85 I'm closing this issue now; if it's still a problem please feel free to show an example and reopen.\n. > Thoughts ideas? Step by step code samples I can play with?\nUnfortunately, we can't support every person's specific or custom implementations for CMB2. Github issues are reserved for confirmed bug reports and occasional feature requests. Please review the CONTRIBUTING.md for support suggestions. Please also review the additional resources listed at the bottom of that document, as the solution you're looking for may already be present.\n. @himelkazi have you tried the file field type?\n. You would need to use the cmb2_localized_data filter to change that text.\n. Closing since this isn't on the roadmap to implement in core for now \ud83d\ude04 \n. Seems to be resolved \u2013 checks are passing on that PR now. @jrfnl if I'm misunderstanding the situation, please re-open \ud83d\ude04 .\n. @patrickcameron pinging this in case you didn't see the request for your code so we can figure this out. Thanks \ud83d\ude04\n. Closing as duplicate of https://github.com/WebDevStudios/CMB2/issues/155\n. ",
    "ronnyandre": ":+1: This is a highly requested feature from my clients as well\n. ",
    "jgclifton": "I believe this is a limitation of the TinyMCE plugin rather than a limitation of this class.\n. Glad to know that I'm not the only one. Looks like it may be a bug.\n. This is a known issue:\n\"Metabox containing WYSIWYG editor cannot be moved or used in a repeatable way at this time (this is a TinyMCE issue).\"\n. ",
    "dmott": "+1 to this!\n. ",
    "bonny": "It may be a bit cumbersome to do with TinyMCE, but it's absolutely possible. Other plugins manage to make TinyMCE repeatable/drag and drop/order changeable (I did it in my own plugin Simple Fields).\n. This happens for us too. Re-order = images get lost.\n. Ok, I just made a fix that you can see above. Was going to create a pull request when I saw that this probably was fixed in https://github.com/WebDevStudios/CMB2/pull/153 already (but not merged yet - let's hope it will be soon because we can't release our client website until this is fixed)\n. ",
    "cnasikas": "Hi\nFirst of all I want to say that on my host environment everything is working fine. Only localhost I have this problem. I guess due to different OS ?\nMy folder structure:\nRoot(C:\\xampp\\htdocs\\ai) ->\n-cms -> (all wordpress folders and files of a typical installation including wp-content)\n-content->\n      - plugins\n      - themes (my theme is here with CBM2 inside)\n      - upgrade\n      - uploads\nHaven't install CMB2 as plugin but I load it with require_once 'cmb2/init.php';\nIf you need anything else or my description is not enough please tell me.\nThanks!\n. I use this generator https://github.com/wesleytodd/YeoPress\n.yeopress file:\n{\n    \"wpVer\": \"4.0\",\n    \"url\": \"http://localhost/ai\",\n    \"tablePrefix\": \"wp_\",\n    \"dbHost\": \"localhost\",\n    \"dbName\": \"ai\",\n    \"dbUser\": \"ai\",\n    \"dbPass\": \"ai\",\n    \"git\": false,\n    \"customDirs\": true,\n    \"wpDir\": \"cms\",\n    \"contentDir\": \"content\",\n    \"installTheme\": false,\n    \"saltKeys\": \"\"\n}\nI removed the saltKeys value because it was too long for the editor\nThanks!\n. Thanks! Working great.\nI just want to inform that the same problem occurs in CBM1.\nThanks again for this great framework.\n. ",
    "cfoellmann": "I have the same problem.\nRunning my dev env on VVV with wp-config.php:\ndefine( 'WP_CONTENT_DIR', dirname( __FILE__ ) . '/../wp-content' );\nplus the corresponding change to the vhost to grap the files from the correct directory.\nAsset urls resolve as https://site8.wpmu-trunk.dev/srv/www/wp-content/plugins/cmb2/css/cmb2.css?ver=4.1-alpha-20141015 while srv/www/ is part of the path and has nothing to do with the url.\nI described the same issue here https://github.com/ReduxFramework/redux-framework/issues/1566 in some more detail.\n. ",
    "zabatonni": "same here, on windows localhost im getting wrong url for css and js files\n. for now i'm using filter hook like this\nadd_filter('cmb2_meta_box_url','zaba_filter_cmb2_url');\nfunction zaba_filter_cmb2_url() {\n    return plugins_url('CMB2/');\n}\nbtw you should consider using plugins_url, it works on all platforms...\n. thats true, i never thought about it that way..\nyup, using most recent version from github\n. @ravensorb just read above\n. take a look at this filter: wp_handle_upload_prefilter\ni had similar issues, so just use some sanitization on upload names.\n. remove_accents is not enough... there are other languages like russian, chinese, etc...\nyou should use sanitize_title and then replace '%' with '-'\nOr you could use some translation table...\n. take a look at function image_id_from_url() in CMB2_utils.php\nit only grabs basename of a file and search for guid like that name, no matter in which folder it is.\nso if you had 2 same filenames in different folders this function would take id of one of them no matter if it is same file i really chose for using in that field.\nurl will be correct but attachment_id or whatever its called may not be correct one.\nthat function should be something like:\n1. take wp_upload_dir();\n2. compare it with url user picked in media library\n3. subtract it so it leaves just YYYY/MM/filename.ext\n4. make wpdb query and look for guid like the filename including folder\n. well.. its getting there correctly. When i hit \"use this file\" button id in hidden input is correct. But when i save post it goes to the wrong one.\n. yup, i am now testing it with just CMB2 plugin activated to make sure its not related to some other plugin.\n. found out that $_id_value in file CMB2_types.php on line 841 is always 0 even after saving the wrong id so when it comes to line 844 it always do fallback function\n. i have tried all combinations of settings in 'allow'=>array('url','attachment') or even without it...\n. i dont think its there, i dumped $id_val right before return $field->update_data() and in that moment it was ok.\n. like a charm, i knew it has something to do with does variables but didnt know exact names. really thanks for solving this.\n. maybe you could use regular radio for that with squares with bg color using css\n. ",
    "wesdekoninck": "I am having a similar problem on my local hosted version of sites (Windows 7 + XAMPP).  I was able to resolve the issue by modifying the cmb2_dir() function in the CMB2.php directory.  It appears there is an issue with the wp_normalize_path() function that is messing with the localhost file locations.  When I remove this function for the return call of cmb2_dir() the issue is resolved and all necessary files load as expected.\nHere is the modified function:\n\nfunction cmb2_dir( $path = '' ) {\n    return trailingslashit( dirname( __FILE__ ) ) . $path ;\n}\n\nNot sure if that helps at all, but it worked for me.\n. @jtsternberg ,\nThanks for this update and the snippet, works like a charm!  I wanted to make a note that the snippet you have selects the repeatable group based on the ID of the group field, so you would need to create multiple functions (one for each unique group you wanted to apply this code to).  I found that replacing id selection with a class selection on line 63 (https://github.com/CMB2/CMB2-Snippet-Library/blob/master/javascript/dynamically-change-group-field-title-from-subfield.php#L63) allows this snippet to work on multiple different pages and custom post types without having to duplicate the function call.\nvar $box = $( document.getElementsByClassName( 'cmb-repeatable-group' ) );\nNot sure if this the right way to go about it, but I found it to work well.  Thanks again for everything you do!\n. ",
    "johnenriquez": "zabatonni's filter worked perfectly for me. thank you so much! pmgarman, please keep us updated on the status of this - your hard work is appreciated!\n. ",
    "ravensorb": "Has this issue been resolved?\n. Have you considered using something like the plugin_urls() method?\nhttps://codex.wordpress.org/Function_Reference/plugins_url\n. Ok, I missed the one post on using the plugins_url.  It still might be worth using that as the default and then maybe providing a way to override it so that other packages to set a \"root path\" or \"path prefix\" if needed.\n. ",
    "karwanmino": "i use a metabox to pick fontawesome Icon into post types - it works perfectly in local host with all plugins - WP 4.7.5 but when i run on my Host it freezes and dont respond the functionality with WP 4.7.4 with all the same plugins.  . Please any help ? what should be the main cause ? for more info i used different Tiny MCE and CMB2 plugins in the same theme ..\nany help will be appreciated ..\n<3. look at the left side of any post in my /blog page here http://zax.themecompiler.com/blog/ there we have a logo that logo can be added or no in my dashboard post editor with my integrated metabox section , but that not active to work on this server right now that logo added as default but in my local host it works perfectly with all the same installations. \nis it clear now ?. i have same reviews ,\nmy case is i have a metabox on dashboard's post editor - on localhost its\nokay but when i turn my files into online host and server my meta box is\nfreezing not working if i click on Set the icon it saves skype logo by\ndefault and directly the post editor saves the post same like share button\n- i can not choose another icon from my metabox icon picker ..\ncan you test my screen with team viewer in background with me ?\nbest regards ,\nthemecompiler.com\nOn Sun, May 28, 2017 at 9:59 AM, Michael Beckwith notifications@github.com\nwrote:\n\nThe only logos I'm seeing on the left are the skype logo with the first\none shown. With dev tools, I noticed that there is a but it's not showing\nanything. It also appears to be missing the generic \"fa\" class. Is this\nwhat's supposed to show something for the second post?\nNot really seeing anything wrong regarding paths here, but I may be wrong.\nNetwork tab for my browser dev tools isn't showing anything for 404 errors\nor similar, so everything trying to be loaded, is succeeding.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/CMB2/CMB2/issues/27#issuecomment-304526850, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AMUQlZ6p5h30xHC0eBZ8MNmZT3DJ8qNcks5r-afygaJpZM4CfR3v\n.\n. \n",
    "zdenekhatak": "I'm using the latest stable version and still facing this issue. I'm using custom WP folder structure (different WP_CONTENT_DIR). \nUsing the cmb2_meta_box_url filter helps though. I'm using this code to fix this - just defining a constant in wp-config and using it.\n```\nfunction update_cmb2_meta_box_url( $url ) {\n    if (defined('TCH_CMB_URL_PREFIX')) {\n        return str_replace(TCH_CMB_URL_PREFIX, '', $url);\n    } \nreturn $url;\n\n}\n// fix cmb2 assets error due to custom wp folder structure\nadd_filter( 'cmb2_meta_box_url', 'update_cmb2_meta_box_url' );```\n. ",
    "anuragrath": "guessed it as dirname not working in Windows and giving file path with backward slash. Corrected it using str_replace. But still no luck.\nAnyone has any clue of whats wrong here?\n. ",
    "pasqualevitiello": "OK, I've found the solution by myself: call_user_func( $field->args('type'), $field->args(), $meta );\nHope it helps ;)\n. ",
    "senicar": "That makes perfect sense.\nFor the front-end I modified the old example by replacing filter/action hooks and by using cmb2_print_metabox_form instead of short_form and it seems to work. Is there anything else you recommend changing?\n//$form = show_form( $meta_boxes[ $metabox_id ], $post_id, $echo );\n$form = cmb2_print_metabox_form( $meta_boxes[ $metabox_id ], $post_id, array('echo'=>false) );\n. @BrunoRamalho hi, first, thanks for the bump, I forgot to commit and push the changes, received a lot of work lately and was a bit busy.\nI personally like your suggestions. However this issue is more about fixing and improving existing look and feel, also I'm just a contributor so others might give you a more appropriate response.\nAbout the pull-request and changes\nI've tested on user profiles, postboxes and front-end and it seems to work fine. The border on groups should look a bit better as well. Regular text field (not small or medium) is 100% only when in postboxes. In other places it should be in normal size as before.\nI've noticed there are hidden rows that are cloned for repeatable fields, maybe we could use <template> outside of flow, since it interferes with :last-child selector or maybe we should change it to :first-child ... just thinking out loud :)\n. @jtsternberg I've replaced it with last-of-type and also replaced first-child with first-of-type, from the looks of it, it doesn't break anything.\n. @gregrickaby, @jtsternberg thanks\n. ",
    "mattjcj": "If anyone is still searching for a workaround :\nInputs are cleared in function cmb.elReplacements.\nSo replacing\n// Clear out old values\nif ( undefined !== typeof( oldVal ) && oldVal || checkable ) {\n    attrs.value = checkable ? checkable : '';\n}\nby\n// Clear out old values\nif ( undefined !== typeof( oldVal ) && oldVal || checkable ) {\n    var val = ($newInput.attr('data-default') == undefined ) ? '' : $newInput.attr('data-default');\n    attrs.value = checkable ? checkable : val;\n}\nand adding the attribute data-default with your default value to your field in your metabox should do the trick\n$cmb->add_field( array(\n    'name'    => 'Test Text',\n    'desc'    => 'field description (optional)',\n    'default' => 'my default value',\n    'attributes' => array(  'data-default' => 'my default value' ),\n    'id'      => 'wiki_test_text',\n    'type'    => 'text',\n) );\nCheers. ",
    "danielmilner": "It appears that text_date honors the date_format, but only when you edit and re-save the record. It may be that the date picker is not honoring the date_format.\n. ",
    "yivi": "I can confirm that something goes weird regarding 'date_format'.\nThis code:\n$main->add_field(\n        [\n            'name'        => __( 'Fecha', 'ojiva-plugin' ),\n            'id'          => $prefix . 'fecha_realizacion',\n            'type'        => 'text_date',\n            'date_format' => 'd-m-Y'\n        ]\n    );\nProduces this:\n\n. @tacone, I have working fix in #446.\nYou can checkout my fork at https://github.com/yivi/CMB2, which fixes all these problems. If you can test it out to confirm things are working as expected, it would be nice.\nHopefully at some point we can finish integrating my PR into the main project.\nRegards.\n. In action:\nhttp://cl.ly/0L3p1R0f1y40\n. Wow. I'm really sorry... A typical case of being a moron. \nMany thanks for spotting that space for me... :P\n. I'm seeing the same.\nThe right values are saved in the DB (for new rows), but when rendering them it repeats the same group over and over. \nMaybe it's unrelated, but I was trying to see if I found what was going on and saw this:\nCMB2.php:277\nforeach ( $group_val as $iterator => $field_id ) {\n                $this->render_group_row( $field_group, $remove_disabled );\n            }\nWhich seemed weird to me. You are initializing $iterator and $ field_id, but not using them in the foreach loop at all. Is there something I'm missing?\nFor me it was actually broken before 2.0.4. I see now that I wasn't imagining things... (see #252).\n. Am I the only one having trouble with date_format options and with date pickers in diferent locales? :(\n. Sorry, wp forums are horrible and hard to search/use, thought this was the proper place to report bugs and contribute back... Isn't it?\nAnyway, I found what the problem is. There is a mistranslation in cm2-es_ES.po, line 362.\nmm/dd/yy to dd / mm / aa, which doesn't make a lot of sense (aa isn't a valid formatDate format), that probably happened because in CMB2_hookup.php it does:\n'dateFormat'      => __( 'mm/dd/yy', 'cmb2' ),\nWhere it could probably do better by doing \n'dateFormat'      => _x( 'mm/dd/yy', 'Valid formatDate string for jquery-ui datepicker','cmb2' ),\nI also saw there were a couple Spanish translations missing. I'll just make a PR with these fixes and additions.\nRegards.\n. Ditto that. Can't get 'time_format\" to work either.\n. Thanks @austinjreilly, I can see how you could shortcircuit it that way, but it still doesn't solve the underlaying problem (apparently time_format is ignored, and CMB2 will just use the default values). As far as I can see, you'll just be replacing one default for another, right?\nOn top of that, the wiki is wrong about the format. It shouldn't use the date format from php, but a time format as documented here. (Not that it matters, since time_format is ignored anyway).\nAnd for my language (Spanish) the translation file is wrong, so it'll give me times with AM/PM, instead of 24hs as we use in Europe. I'll try to submit a corrected po/mo pair for that at least.\nRegards!\n. Fixing the translation strings helps, but doesn't solve the problem either. Not it works, and the timepicker would let me choose the time in 24hs format, but after saving I get this:\n\nThe time is correct (I chose 19:20 before hitting save), but not it displays it in 12hs format, and the time picker wont default to the selected time... But I guess data is saved correctly at least.\nA bit confusing... \n. Confirmed: Date is saved as \"19:20\" postmeta, displayed as \"7:20 PM\" in the metabox (but only after loading the data from the DB), and the timepicker wont choose the correct default value when reading 12hs format from the field and displaying a 24hs format picker...\n. Both datepicker and timepicker are messed up in international versions. \ndate_format and time_format are ignored, and instead the defaults for the translation strings are used.\nAnd later on, as you said, validation is made against American date format, no matter what. So you choose May 12th and after save you see December 5th; or if you choose any day after the 12th it just wont save.  (pt_BR, or es_ES; or most other locales for that matter).\nConfirming bug.\n. I guess #282 and this one are related in some ways.\nPickers work well on first use, but on subsequent save/display, they are broken for international users.\nI choose these values:\n\n(May 15th, May 8th, 8:35 PM)\nAnd I get these values after saving:\n\nDiscarded the first value, saved the wrong value for the second (its 1438732800 in the DB, which is August 5th instead of May 8th), and messed up the display of the time picker (although the value saved is the right one...)\n. Problem lays at the sanitation method text_date_timestamp, in CMB2_Sanitize.php.\nIt just puts the incoming value through strtotime, which is too naive to handle international dates, and there not even an attempt to respect date_format.\nI replaced that line with a call to DateTime::createFromFormat; now I'll try to see that the date picker respects date_format as well, read the contributing docs more throughly, and try to submit a PR ot fix this.\nRegards\n. @mateusneves, I made the fix in a pull request, but it still need to be reviewed and accepted by the project owners, and then it would need to get integrated into a proper release.\nYou are of course free to pull a copy from my fork at https://github.com/yivi/CMB2/tree/trunk and test the changes for yourself. I'm using them and havent found problems yet, but more people checking would always be welcome.\n. @Lindorie, sorry for taking so long, I was in the middle of a very convoluted project and couldn't make time to come around here.\nThere are a few more changes. It would be easier if you just checked out my fork. It's updated to 2.08 and working (I'm using it at the moment). I'm going to take another look to see if there is anything else I'm missing out.\nHopefully at some point @jtsternberg will have time to review my PR and see if its merge-worthy... :)\nRegards!\n. Glad you found it useful @fabianpimminger.\nStill waiting for word from the project owners about accepting my PR. I'm willing to do more work on it if it's not up to scratch, but I guess there wasn't enough time to properly review it.\nRegards!\n. Hi there @Lindorie,\nCould you please elaborate on what problems you had using my fork? Did you checkout the \"yivi-date-time-picker-fixes\" branch, which is up-to-date one?\nThanks and regards.\n. Thanks Carine. Let me know, please. Regards!\u00a0\n\u2014\nSent from Mailbox\nOn Fri, Oct 23, 2015 at 3:06 PM, Carine Pic notifications@github.com\nwrote:\n\n@yivi,\nI have tried with the fork I found in this comment. But apparently you made some changes? (The link is now broken)\nI didn't notice that you had a specific branch for the date-time-picker, sorry.\nI'm going to test it and I'll tell you.\nReply to this email directly or view it on GitHub:\nhttps://github.com/WebDevStudios/CMB2/issues/300#issuecomment-150565613\n. Glad to hear it @Lindorie .\n\nLet me know if you find any issues.\nRegards!\n. Hi there. Will do!\u00a0\nSorry about those side tracked changes. Code style happened because I had my ide to auto format to wp guidelines on save and didn't realize, and the docblocks was probably me going over the code inspection notices and warnings before committing.\u00a0\nI'll make this changes on Monday eve. Regards and have a nice weekend!\u00a0\n\u2014\nSent from Mailbox\nOn Thu, Jul 9, 2015 at 9:07 PM, Justin Sternberg notifications@github.com\nwrote:\n\nThanks a ton for putting time in to work on this issue. To help me better review your PR, I have a few requests:\n- Remove all edits/changes that are not related to this bug-fix/issue\n- Remove all white-space changes (same as above). This includes doc-block edits.\n- Try to keep your PR as focused on solving a single problem as possible\n  I like the edits you made (better doc-blocks, etc), but these things should be separate PRs. It's much easier to merge a PR that is simply doc-block edits than one that is changing functionality, or worse, both.\n  Can you submit separate PRs to split these concerns and make it easier to review/merge? Thank you.\n\nReply to this email directly or view it on GitHub:\n  https://github.com/WebDevStudios/CMB2/pull/318#issuecomment-120110698\n. I think I removed all formatting changes from the PR.\nLet me know if you see something you think it would benefit from a bit more work.\n\nRegards!\n. 5.2... I hope WP Core gets up to speed at some point; 5.2 has been eol for more than 4 years now... and 7 is around the corner. :P\nPushed a new version that checks if create_date_from_format exists, and defines it if not.\nThanks and regards!\n. Sorry for the late reply. I was out on holidays on a cycling trip, very\nmuch away from the keyboard.\nI'll resume work this week. I'll take a look a at what's left, hopefully we\ncan have everything wrapped up soon enough.\nRegards!\n2015-07-29 18:44 GMT+02:00 Justin Sternberg notifications@github.com:\n\nNice work so far. I've merged your branch into trunk and created a new\nbranch. let's collaborate on this branch instead of trunk until it's ready\nto go:\nhttps://github.com/WebDevStudios/CMB2/tree/yivi-date-time-picker-fixes\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/pull/318#issuecomment-126013917.\n. Justin,\n\nI've tried my fixes with all these date/time fields, and they are working:\n- text_date_timestamp\n  https://github.com/WebDevStudios/CMB2/wiki/Field-Types#text_date_timestamp\n  Date Picker (UNIX timestamp)\n- text_datetime_timestamp\n  https://github.com/WebDevStudios/CMB2/wiki/Field-Types#text_datetime_timestamp\n  Text Date/Time Picker Combo (UNIX timestamp)\n- text_datetime_timestamp_timezone\n  https://github.com/WebDevStudios/CMB2/wiki/Field-Types#text_datetime_timestamp_timezone\n  Text Date/Time Picker/Time zone Combo\n- text_time\n  https://github.com/WebDevStudios/CMB2/wiki/Field-Types#text_time Time\n  picker\n  #446 relates to text_datetime_timestamp_timezone, which is covered, right?\nRegards\n2015-10-07 17:57 GMT+02:00 Justin Sternberg notifications@github.com:\n\nAlso, how does this differ from #446\nhttps://github.com/WebDevStudios/CMB2/pull/446?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/pull/318#issuecomment-146243011.\n. Just merged current trunk and tested it on a couple of working sites.\n\nThings look good.\n2015-10-08 20:39 GMT+02:00 Yivi nardus@gmail.com:\n\nJustin,\nI've tried my fixes with all these date/time fields, and they are working:\n- text_date_timestamp\n  https://github.com/WebDevStudios/CMB2/wiki/Field-Types#text_date_timestamp\n  Date Picker (UNIX timestamp)\n- text_datetime_timestamp\n  https://github.com/WebDevStudios/CMB2/wiki/Field-Types#text_datetime_timestamp\n  Text Date/Time Picker Combo (UNIX timestamp)\n- text_datetime_timestamp_timezone\n  https://github.com/WebDevStudios/CMB2/wiki/Field-Types#text_datetime_timestamp_timezone\n  Text Date/Time Picker/Time zone Combo\n- text_time\n  https://github.com/WebDevStudios/CMB2/wiki/Field-Types#text_time Time\n  picker\n  #446 relates to text_datetime_timestamp_timezone, which is covered, right?\nRegards\n2015-10-07 17:57 GMT+02:00 Justin Sternberg notifications@github.com:\n\nAlso, how does this differ from #446\nhttps://github.com/WebDevStudios/CMB2/pull/446?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/pull/318#issuecomment-146243011.\n. Work continued in #446 \n. Timezone combo done as well.\nAs an aside... for date/time combo (no timezone) we are saving an array with 'date' and 'time' as keys, while just saving a timestamp should be sufficient (and maybe cleaner?)\n\n\nRegards, hope this helps.\n. @jtsternberg, this PR has current trunk merged in, and I have tested it and have it working for all date/time types I'm aware of.\n. yivi here.\nI see that in your version you are are back to using DateTime::createFromFormat, whereas we had a workaround for PHP versions < 5.3.\nAlso, my work continued in #446, on a different branch that @jtsternberg created to carry on this work. I updated it a couple weeks ago, and it does have support for time_picker as well...\nI think I messed up with the PRs, by opening a new one instead of continuing work in #318, but I can merge trunk into #446 again to see if everything keeps working as intended.\nRegards. \n. @jtsternberg , #446 is the current one.\nI'll update it to trunk this afternoon.\n. ",
    "tacone": "That's precisely what happens to me, the format is applied to the textbox, but not to the datepicker.\n. My current workaround:\njs\n$('.cmb2-datepicker').focus(function () {\n        var val = $(this).val();\n        $(this).datepicker(\"option\", \"dateFormat\", \"dd/mm/yy\");\n        $(this).val(val);\n});\n. I can't test right now, as I'm a under a tight deadline, will surely do in the next project.\nThank you for now.\n. ",
    "theKhorshed": "It would be really useful. :)\n. Thanks @jtsternberg, will check it. :)\n. I am also facing the import issue for group fields. I've total 8 group fields and 2 of them isn't importing properly. Rest others are working fine.\nTrying to figure out the the issue.\n. ",
    "GregLancaster71": "I am not sure if that is supported, but it would be great if it was added.\n. I saw that but it says its for the front end, and only functions for the front end. \n. Yep, that works.  I was thinking something so the file_list field and oembed could use the same gallery area for thumbnails and such.  but this works as well.\n. Hey @tw2113 - This is a bug. I just saw your reply though, so apologies for not replying sooner.  The bug lies in the JS.  When a repeatable field is in a group, and a new group is added- the DIV ID of the input does not properly iterate the INT.  \nFor example, say the input ID of a repeatable field within a group is \"_sr_prod_specs_0_table_rowrr_td_attrs_0\".  Now, say I click Add Group.  The new groups [repeatable] inputs retain the exact ID - the int is not incremented.  \n<input type=\"text\" class=\"regular-text\" name=\"_sr_prod_specs[0][table_rowrr][1][td_attrs]\" id=\"_sr_prod_specs_0_table_rowrr_td_attrs_1\" data-iterator=\"1\" value=\"\">\nAfter clicking update the PHP takes over and regenerates the fields with properly incremented ID Ints.  But before a save, clicking add in any group will add the new input to the first group.  How would I go about reporting this as a proven bug?\n. @jtsternberg Tagging Justin to help in resolving the issue - lest this bug get buried. \n. Actually, I was more requesting the ability to get an entire options array\n(for option pages) and where the option is not set, the default value will\nbe replaced.\nThis function is for individual field ids.\nOn Tuesday, November 18, 2014, Justin Sternberg notifications@github.com\nwrote:\n\nYou're probably looking for cmb2_get_field_value\nhttps://github.com/WebDevStudios/CMB2/blob/master/includes/helper-functions.php#L123-L135\n.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/92#issuecomment-63547771.\n. I did, but because I am saving two text inputs in one field, I cannot seem to get the field to properly display the remove button.  If I use a foreach loop to iterate over each inputs value (array key is needed in the value to return the right one) then it only shows one remove button, and the add button treats all fields as though they were one block.\n\nIts a difficult thing to explain in words.  But another issue, is the default sanitization returns \"array\" rather than an actual array.  So I specified a custom sanitization callback and serialized the array.  But, then how do I iterate over that array so each [two inputs] is treated as a single repeatable row?\n. Just an update for reference, I realize I can filter the result myself.  I am using the following code for the time being.  \nadd_filter('cmb2_get_metabox_form_format', 'change_front_end_comment_form');\nfunction change_front_end_comment_form($args) {\n    $action = 'action=\"'.get_option(\"siteurl\").'/wp-comments-post.php\"';\n    return str_replace('id=', $action.' id=', $args);\n}\nHowever, it would be nice if a more concise solution was coded in. \n. Is there anyway to prevent CMB2 from pre-populating front end forms?  Using CMB2 for front end forms, generally speaking, you do not want the form to be pre-populated with anything that was entered previously.  (Comments, or Personal Info). \n. Edit: For now I wrapped line 221 in helper-functions.php with if ( is_admin() ) {}.  Now before I upload this to a live site, is there any reason this would break anything?\n. My Mistake - Its this line : CMB2_hookup::enqueue_cmb_js();. \nAdditionally: Thank you making this guys.  I love it, and it makes my life so much easier. \n. Im not sure if there is an official way, but I am verifying the nonce like so:\n$nonce = sanitize_html_class( 'nonce_CMB2php'. $this->meta_box['id'] );\nif ( wp_verify_nonce( $_POST[$nonce], $nonce ) ) {}\n. It appears so.  I tested it with fresh code, and all I added to the example above was the following fields;\narray(\n                'name'       => __( 'Icon Set', 'sr' ),\n                'desc'       => __( 'Check out <a href=\"http://fortawesome.github.io/Font-Awesome/cheatsheet/\" target=\"_blank\">FontAwesome</a> Cheatsheet. ', 'sr' ),\n                'id'         => 'icon_select',\n                'type'       => 'text',\n                'default'    => 'f005',\n                'attributes' => array(\n                    'placeholder' => 'f005',\n                    'required'    => 'required',\n                ),\n            ),\n            array(\n                'name'       => __( 'Rating Color', 'sr' ),\n                'desc'       => __( 'Set the color of your choice for rating icons.', 'sr' ),\n                'id'         => 'icon_color',\n                'type'       => 'colorpicker',\n                'default'    => '#FCA602',\n                'attributes' => array(\n                    'required'    => 'required',\n                ),\n            ),\nThe default field values do not show.  Sorry for the delayed reply, I wanted to test it again to be sure, and as far as I can tell it is in-fact an issue.  \nEDIT: You can copy and paste the tutorial and just add the default option.  I dont know why I shared the code above, just for the sake of specificity I suppose.\n. @jtsternberg Could you / anyone verify this is a bug?\n. Cant you just make use of the wysiwyg editor and insert a spreadsheet?  There are plugins that give tintMCE this functionality.  I imagine the spreadsheet data would need to be saved the same way anyway.\n. Excellent! Thank you! \n. Sorry about the multiple notifications guys, I had to change accounts on my local network and re-fork CMB2.\n. Yes, but I should share that the tutorial listed needs array_filter() added to prevent infinite empty inputs from being added with each save.  I created a pull request over there: https://github.com/WebDevStudios/CMB2-Snippet-Library/pull/8\n. ",
    "mustardBees": "I've read the contributing document now... I can resubmit to trunk if the fix is suitable?\n. See the example below, with 'show_names' => false, I would expect the field headings to be hidden.\nExample metabox\nphp\n/**\n * Metabox to store listing information\n */\n$meta_boxes['listing_information_meta_box'] = array(\n    'id' => 'listing_information_meta_box',\n    'title' => 'Listing Information',\n    'object_types' => array( 'listing' ), // post type\n    'context' => 'side',\n    'priority' => 'low',\n    'show_names' => false, // Show field names on the left\n    'fields' => array(\n        array(\n            'name' => 'Address',\n            'id' => $prefix . 'address',\n            'type' => 'textarea_small',\n        ),\n        array(\n            'name' => 'Telephone',\n            'id' => $prefix . 'telephone',\n            'type' => 'text',\n        ),\n    ),\n);\nResult\n\nThe patch simply swaps the logic around so that field headings are hidden unless the field type is title.\n. Thanks and keep up the good work!\n. @jtsternberg Unfortunately, time does not currently permit. Hence the open issues.\nI\u2019d love to see a map field included as a default field type within CMB2.. ",
    "JoshKoberstein": "Awesome, thanks!\n. ",
    "JayWood": "Hey @JiveDig I'm unable to replicate this issue on my local machine with two WYSIWYG fields.  Granted, I do not have a tabulated setup like you do.  Can you confirm this still exists?\n. @mayeenulislam I created a snippet that should help you, if you have any questions just let me know. https://github.com/JayWood/cmb2-ajaxified-dropdown-snippet\n. @regidias2006 have a look at this simple script, should get you pointed in the right direction.\nhttps://github.com/JayWood/cmb2-ajaxified-dropdown-snippet\nAlso, have a look at an article I wrote for working with AJAX requests: \nhttp://webdevstudios.com/2015/02/12/handling-ajax-in-wordpress/\nHope it helps!\n. You'll want to filter that field yourself.  By default iirc the value is ran through sanitize_text_field()\nSee about sanitization here: cmb2_sanitize_{field-type}\n. @jtsternberg added a nifty call back parameter on a per-field basis, check out sanitization_cb\n``` php\n$cmb->add_field( array(\n    'name'       => __( 'Test Text', 'cmb' ),\n    'id'         => 'wiki_test_text',\n    'type'       => 'text',\n   'sanitization_cb' => 'my_sanitization_func',\n) );\n// In another file somewhere\nfunction my_sanitization_func( $original_value, $args, $cmb2_field ) {\n    return $original_value; // Unsanitized value.\n}\n```\nYou can see it in action here: https://github.com/WebDevStudios/CMB2/blob/b3b78a569f63560d2f8a039c4c1ff412a28f0156/includes/CMB2_Field.php#L402\n. @BenRacicot don't feel bad, I didn't even know it existed until @jtsternberg told me a few weeks ago :smile: \n. You should check out CMB2 Post Search Field  If i'm not mistaken it stores the selected post ID, and you can handle that accordingly on the front-end or where ever you're getting the meta.\nYou can also do tons more, I'm sure there's filters in there somewhere.\n. @jtsternberg haha I found it in passing, probably put in a PR later today, just logged it so I knew it was there.\n. @jtsternberg Yo, was going to fix this today, but I'm unsure of the relationship between trunk here, and the .ORG trunk - mind getting me up to speed, is there one person who handles that, etc...\nYou also have me on the NC slack if PM's are required, just hit me up.\n. Thanks @tw2113 . @jtsternberg The only context I have at this point is that the taxonomy_select field is now ( with the latest updates on trunk ) not saving.\nIt seems at this point that I need to look deeper into the taxonomy_select as a whole I guess.\nLooking at the docblock for the 2.2.4 tag it states:\n\nSets the object terms to the object (if not options-page) and optionally returns the sanitized term values.\n\nBut the related conditional is contrary to that ( line 124 ):\nif ( 'options-page' !== $this->field->object_type ) {\n                $return_values = true;\n            } else {\n                wp_set_object_terms( $this->field->object_id, $this->value, $this->field->args( 'taxonomy' ) );\n                $return_values = false;\n            }\nwp_set_object_terms() is ran in the else, which means if it IS an options page. Where else in CMB ( I can look obviously ) are we running this? Again, maybe I need to look deeper into the taxonomy_select field type?. I'll do some digging on our side as well - will update this accordingly.. @jtsternberg good to know you're still human \u2764\ufe0f . I shall go ahead and get this fixed then :D thanks for clarifying!. LOL nvm, speed demon! Thanks again @jtsternberg \n. ",
    "mAAdhaTTah": "All you have to do is tag it in git. Packagist uses that for its tags.\n. Are you bumping the version number when you push to trunk on WP.org? If you add a tag on master when you do that, it'll update in Packagist as well, and I can lock the composer file in my project to a specific version of CMB2.\n. @jtsternberg Bump, saw you just pushed to .org. If you tag the commit on git as well, I can pull from that tag from Packagist.\n. Woot! Thanks.\n. Will do that when I get home. You prefer a squashed commit or two commits?\nEdit: Nevermind, I broke up the one unit test into 3, as you're testing 3 different functions. Hope that's ok!\n. No prob, happy to help.\n. > CMB2 can be installed as a plugin, or bundled in a plugin/theme or placed in mu-plugins.\nWhile maybe it's not possible to retrofit CMB2, I've always wondered whether it really makes sense for these options libraries to support all of these options. CMB2 in particular has no front-end display if you don't code it up yourself, so it never really made sense to me why an options library would support being installed as a plugin, other than convention. Was this an active decision or just conforming to standard practice?\n. > Why NOT have it installable as a plugin? It works the same no matter where you put it.\nMostly related to this pt, as supporting all these methods can conflict. But if that has nothing to do with this issue, then nvm.\n. This was actually removed previously. See this convo for why this doesn't work as a solution:\nhttps://github.com/WebDevStudios/CMB2/commit/e4d03897689a16d0231c2a344fc15b0439e2155f\n. This is what I use to install CMB2 with composer. The reason it's set up this way is related to the discussion here.\n. I think he means bump it to 4.*\n. ",
    "michaelbeil": ":+1: \n. ",
    "benoitchantre": "@jtsternberg I can make a PR for that. My opinion is that we should exclude what is not part of the folder you get with a plugin installation from wordpress.org. Do you agree with that?\n. @jtsternberg Thanks for the link!\n. @jtsternberg same issue for me. I have a custom theme that includes CMB2 with the init file.\nphp\nif ( file_exists(  __DIR__ . '/inc/cmb2/init.php' ) ) {\n    require_once  __DIR__ . '/inc/cmb2/init.php';\n}\nThe CMB2 plugin was also installed to ease the updates of the library before an update of the theme is available.\nAfter the update of the CMB2 plugin to the latest version, I have the following error:\nFatal error: Cannot redeclare cmb2_dir() (previously declared in /home/clients/b9bea0796c13d5f0e5012c76b5730384/web/_wp/wp-content/plugins/cmb2/includes/helper-functions.php:18) in /home/clients/b9bea0796c13d5f0e5012c76b5730384/web/_wp/wp-content/themes/tropiquarium/inc/cmb2/includes/helper-functions.php on line 20\nWhen I change the test in the theme to load CMB2 as suggested by @DevinWalker, there's no more fatal error.\nphp\nif ( file_exists(  __DIR__ . '/inc/cmb2/init.php' )  && !defined( 'CMB2_LOADED') ) {\n    require_once  __DIR__ . '/inc/cmb2/init.php';\n}\n. Sorry, I haven't read the contributing instructions.\nHere's a new PR against the trunk branch. See #575 \n. Happy to contribute to this project.\n. ",
    "sc0ttkclark": "Not needed, at least not until #55 is more feasible.\n. Convinced there's not an easy / efficient way to do this with the current meta box args array and handling for CMB2_hookup, too many places it needs an object prior to usage on a page, also getting object_type out of the boxes / handling meta box ID lookups is a big wall I'd rather not climb at the moment.\n. Going to say the remaining things aren't as important as the initial ones, I'll let this one sit for a bit before I come back to it.\n. It makes the form field required in the DOM, but does not validate this on the validation / saving side.\n. Related: #61 which this could extend / further enhance.\n. Sounds like that's much more of a hackaround, too much for feasible implementation for my purposes. Will figure out next steps on a PR.\n. Could this be reaching the internal $_POST limit in PHP for how many input_vars it will process?\n. Relevant PHP config vars are max_input_vars / max_input_nesting_level\n. @jtsternberg once you give people an admin UI to do all this, things get crazy, I've seen actual sites using Pods with hundreds of content types (post types, taxonomies, advanced content types, etc), with 50-150 fields each, it's just dang crazy what people do with what we make. We ran into this very issue ourselves. Our solution was actually to take each 'row' of fields and json encode them before the form save kicks off.\nThe problem stemmed from the Pods Admin area, where we let you edit a Pod and all of it's fields from one screen. Each field expanded to allow you to edit a few main fields, but there were tabs with other field options available too. All total, maybe 20-40 inputs per field would be on the page to POST. Add 20-30 fields, and that really starts adding up. We found this when testing Pods 2.0 and had to resolve it through our json hack-around. In our AJAX action handler for saving the Pod, we had to loop through all of the fields passed in, then json_decode the data: https://github.com/pods-framework/pods/blob/master/classes/PodsAdmin.php#L2315\nYep, it was fun times. We broke PHP, we broke much of the world. But I share that knowledge with you, for I see that we'll be having much more fun with CMB2 group fields in Pods too :)\n. Yeah, someone did their homework!\n. The Flexible Repeatable Fields isn't available inside of CMB2 natively yet, I'm not sure if someone has built something for it. There's no JS conditionals either, but I could be wrong there.\nIt does have loop fields / repeatable fields though, and lets you repeat groups of fields. I'm looking into improving \"group\" fields so they can handle groups inside of groups, multi-level.\n. I wasn't able to see this exact functionality available from CMB2 -- http://www.advancedcustomfields.com/resources/flexible-content/ -- there aren't Layouts or context-specific groups of fields in that way. You could add multiple groups of fields though, and us JS conditionals manually.\n. Rebasing off of trunk and will reopen a new PR\n. Work to be continued\n. @ronalfy is working on his prototype of the functionality right now at:\nhttps://github.com/WebDevStudios/CMB2/compare/customizer...ronalfy:customizer\nExamples of the Customizer CMB2 implementation can be found here:\nhttps://gist.github.com/ronalfy/a2fc8649139c7bf4188d\n. Other things to keep in mind is we'll want the final PR to be based from trunk and not the customizer branch, which is identical to master (stable) right now.\n. OH you mean it's not going to be a quick 5 minute glance? :)\n. I think we can merge this into the CMB2 branch, and then have @wpscholar add his PR for the backbone tweaks on that same branch, then we can work out the merge into master or trunk branches.\n. Everything except for wysiwyg and group are covered right now. Need to skip repeatable fields too, currently it doesn't check those.\n. I think this is in a good place and ready for merge, needs @jtsternberg to review and approve\n. Which controls? I thought it was a great first pass at initial integration\n. +1\n. And done :)\n. ",
    "egamipeaks": "The Fieldmanager plugin allows doing this by having separate hooks for different contexts in admin, so that the only code that gets run is that relevant to the page currently loaded.\nCheck out the code here that handles it: \nhttps://github.com/alleyinteractive/wordpress-fieldmanager/blob/master/fieldmanager.php#L237-L447\nPotentially, CMB2 could have hooks like \"cmb_post_{post_type}\" that allow conditional loading of meta box code.\n. ",
    "cluke009": "Collapsing the groups doesn't work with ajax right now. Any idea what js function needs to be called to refresh this?\nI can add the classes back in. I think I removed them originally because of some funky styling that was being applied. I didn't really want to get into writing more css with this. It seems like we should be able to get away with writing very little css if we are smart about our usage of the built in classes/ids.\nGood call on the sidebar I never bothered trying this in the sidebar just with some custom code and the example functions.\nWhat kind of behavior would be preferable when new fields are added? Default to collapsed or accordion style where the other groups are collapsed something else? I am open to suggestion here. I tried to keep this patch pretty minimal and get some feedback before going to far with changes. I don't want to be stuck maintaining my own fork.\n. Fixed the ajax toggles and everything gets rebinded correctly. \nThere is the side effect of the drag and drop appearing to work but not actually saving the box order. It also isn't bound to the parent container so you can drag and drop outside of the containing metabox.\nThis might be a separate issue or we can just try to get all the wonkyness of this change ironed out under the one issue.\n. Haven't really had any time to dig into the plugin recently but I did find out that removing the \"hndle\" class from the h3 disables the drag and drop functionality.\nCould we get this merged in once the drag and drop is removed? The collapsing is really a live saver on large repeatable groups.\n. Should be good to go. Pretty sure I addressed all the issues raised. If there is anything I missed just let me know.\n. Took a bit to fix the conflicts but everything is working again. Hopefully we can get this in soon as there are some other issues I would like to tackle.\n. Had no idea wordpress had a color picker in core. I will look into this thanks.\n. had some time to look at this and it seems colorpicker() is set up to process hex color only. I might be missing something here but it seems the core colorpicker won't send rgb colors to the input field even though it uses them in the css.\nThis doesn't seem to do anything. I tried other options and they worked so its not the code.\nphp\nadd_filter( 'cmb2_localized_data', 'my_color_picker' );\nfunction my_color_picker( $data ) {\n    $data['defaults']['color_picker']['mode'] = 'rgb';\n    return $data;\n}\nI think the different modes only change the way the control panel works. If this really isn't something even supported by core color picker then screw it. The mode setting is just really misleading I guess.\n. Sadly what I need is to send RGB to my database so this doesn't seem to fix anything as the data is still passed as HEX. I think the mode only has to do with the color picker display. For now i am just converting things on the backend. I started some work on this here https://github.com/Automattic/Iris/issues/13 as I actually need the alpha as well.\n. ",
    "cliffordp": "Isn't this possible via \"attributes\"?\nhttps://github.com/WebDevStudios/CMB2/wiki/Field-Types#common-field-parameters\n. Like Google Calendar settings:\n- choose your country\n- select from that country's timezones\n- allow manual override if user insists (i.e. doesn't want to change country to get to that TZ)\n\n. ",
    "AlchemyUnited": "I'm still working on the finer points of this but it's at least a solid proof of concept / alpha.\nhttps://github.com/WPezClasses/class-wp-ezclasses-admin-save-post-validation-1\nBasically, it's designed to work on ANY metabox fields. That is, define what fields (by name) you want validated and how (i.e., predefined validaation rules) and it more or less does the rest. \nNote: The one (admitted) pseudo-oddity - in a The WordPress Way sorta way - is it allows invalid things to be saved, just not publish. That is, given how WP thinks it seemed acceptable to allow the save, just prevent the publish. Perhaps not uber-ideal but in the world of WordPress it was the only way to get this done (without excessive hacks and such).\nThis is an example of the validation helpers. The main class allows for the use of multiple validation helper classes. \nhttps://github.com/WPezClasses/class-wp-ezclasses-admin-save-post-validation-helpers-1\n. @jtsternberg \n\"hard to read?\" Oh my. \nIt think it would be easier if I knew what was so confusing / hard to follow. Then I'd  be happy to add some comments and such. That said, the intention of the above link was not to say \"add this to CMB2\". It's not designed to be locked up like that :) I was simply wanting to share /  note the existence of a universal (currently) server-side (only) validation tool - which to be the best of my knowledge does not exist ANYWHERE in the WP universe. Perhaps that's the confusing part? It's #BadAss next level shit. hehe. In any case, it can work for CMB2, WP SEO and any other metabox w/ fields. It's not a plugin. It's for bespoke dev. Maybe that context helps? \nAs far as anything simpler, it's already fairly distilled / abstracted. I'm not trying to be a jerk but I really can't image what simpler looks like. That is, anything less wouldn't be as magical :) So much like CMB2, you define an array or args and the class does the rest. \nOh. btw...\nhttps://github.com/WPezClasses/class-wp-ezclasses-admin-cmb2-setup-1\nWhat remains is a method to pull out the validation stuff for the validation class. The point is, fields defs are tied to validation and vice versa :)\nAgain, I'd be glad to help communicate the details and even discuss (via voice) if that helps. But \"hard to read\" isn't enough for me to react to. Cool? \n. Yeah. That makes sense. Thanks. I think I was just not thinking the way CMB2 thinks. \n. And to be clear, there's no hook or anything to accommodate server side validation. To be honest, I'm not exactly sure what that looks like in a CMB2 world. I just kinda sorta spider-sense there might be room for something, somewhere. \nThanks again. Nice stuff.\n. @praditha - Mind if I jump in? Off the top of my head (so forgive me if I'm mistaken)...\nWhen you do the sanitization_cb, write the current value, as well as the new value to another meta row (e.g., my_cmb2_validation_errors). When displaying check that my_cmb2_validation_errors to see if you need to do anything error-oriented. For example, use the original value in my_cmb2_validation_errors not what's coming from that DB. my_cmb2_validation_errors can also be used to decide if you need to display an error message. \nSomething like that? ;). @jtsternberg Decent? I guess I'll take that as a compliment ;). I'm having the same issue. Yes, Win 7. ServerPress 3.6.5. Looks like cmb2_utils()->url is busted. I think I upgraded CMB2 and WP around the same notice before noticing this. That is, I'm not sure if it's WP core or some new update to CMB2. \np.s. I'm curious, what does cmb2_utils() do that WP doesn't already offer?  I presume it somehow detects how CMB2 is being used / where it's installed, correct?\n. I'm new to CMB2 as well so don't believe everything I say ;) \nTo me this feels like it can be pulled off with a few lines of js. Now that I think about it, what would be plus is the ability to add data attributes to the metabox, and then just lean on a handful or so of common js functions. \nI believe you can add data attributes to the fields, but I haven't seen anything - yet? - about the metaboxes. \n. Looks like each row in a group has this: data-iterator=\"0\".\nThat's probably going to help, at least to get something quick and dirty in place. \n. Hey Harry. \nAs part of a universal Admin (form) validation** process / class I've also come up with this:\nhttps://github.com/WPezClasses/class-wp-ezclasses-admin-cmb2-setup-1\nPerhaps there's a way to add the group-limit arg and some js, etc. I'm sure there is a way, I'd just have to think about it. Let me know what you come up with and I'll see about integrating that into the broader picture I'm designing. \n** For example:\n- Excerpt is required\n- Title length < X\n- CMB2 field Z is required. \nNot sanitize, server side validation! \np.s. Once i have server side tight, I'll then have a look at client-size. But given the choice I think server-side is more important of the two. \n. @harryfinn  - fyi it looks like the data-iterator=\"...\" doesn't get updated when a row is deleted. that is, 1, 2, 3 and 4 once 3 is deleted becomes 1, 2, 4. and not 1, 2, 3. Not fatal, just not useful for these purposes. \n. Shouldn't this\nfieldGroupId     = '_cmb2_repeat_group';\nbe something like\nfieldGroupId     =$group_id->prop('id');\nor do I need to spend more time reading this code? :)\n. Why not just add a data attribute or two (or three) and get any values that way? This inline js isn't gonna cache. And it's just going to get recreated over and over, yes? Wouldn't it be better to get values  not hardcode them in? \n. @jtsternberg  - I've PR'd before. I fixed the Select2. Somebody had to it. \nBut this is - for me - a philosophy / architecture (if you will) issue. If you're okay with using more (js) data attributes then I can have a look at a refactor. But if that's doesn't feel right to you / CMB2 then it doesn't make sense for me to bother, eh. I don't know. Maybe there's something in the CMB2 DNA that such an idea doesn't fit well. I don't know the history, code base, and vision well as everyone else. \nGlad to help. Just looking a wink and a nod ;)\n. re: recreated\nLet me explain... \nThat chunk of code IS recreated over and over and over again because the values are injected / \"hardcoded\" on the fly. For that same reason (as far as I know), that js will NEVER be cached. As opposed to having the js in a file and then it only has to slide down the pipe once. After that it would be - until cleared - in the browers cache. \nMy suggesting the js be \"decoupled\" (so to speak) from the PHP; and also that the js become more generic / universal in that it uses data attributes to get the info / values it needs and NOT have those passed in a js vars \"hardcoded\" in the js. \nAlso, as it looks to me, as it is now, if you have multiple group repeaters that js is gonna be created for each one, correct? Again, maybe there's a better way. \nIn general I would pref to collab a bit then just do the usual WP (cliche?) and run off as another solo mission on something that could benefit from 2+ heads are better than one. LMK what you think. Thanks brother. \n. Whoa. I musta missed this the first time\n@jtsternberg  said \" That being said, if you want to create a third party plugin/extension that builds off of this concept and does it the right way, I'd be happy to take a look and provide feedback/help or whatever. It's a feature that's received more than a few requests, so I'd be happy to link to it when others are asking.\"\nI hear ya, But what's you position on this setting / arg being part oof the CMB2 definition array? That's where is makes the most sense. \n. I'm new to CMB2 so don't hold me to any of what I'm suggesting.\n1) There is a way - via filters - to manipulate plugin load order. I'm sure if you ask The Google you'll find something.\n2) Make sure your metaboxes have unique keys. That is, since CMB2 builds it's input array with a filter, it's possible that your second definition is overwriting the first (or maybe it's the other way around?). In any case, I spent 30 - 60s of WTF'ing :) only to realize my metabox keys were not unique across the two different CPT I was defining for. \n. I hear ya. But frankly. I'm not sure either. I mean if you don't know, then I don't know :)\nLet me explain...\nAs it is, the jquery UI sortable drag & drop interaction wasn't / doesn't work with CMB2 - at least not for me. . Is it supposed to? If yes, then the bug is at that step (for me). If not, then for some reason using the Select2 field type plugin seems to enable D&D. Mind you that's not really a bug per se, but just feels kind odd / unexpected, yes?\nAgain, I can't tell where the problem is because I'm not really sure what the functionality is supposed to be (or not). I'm simply trying to point out what feels to me as unexpected results and perhaps an overview of why / when that's happening (or not). \nKnow what I mean? :)\nLet me know if / how I can help. \n. re: \"I can't us file type because that's documented as not repeatable\" \nI read that as well, but then when I sent to find it again. it wasn't there. In any case, I just put file in a group and best I can tell it's okay. \nThere was another issue in Dec about someone asking for a limit on repeating rows in a group. I'm not sure what happened with that. The gist seemed to be you could pull it off with a bit of js. \n. https://github.com/WebDevStudios/CMB2/issues/119\n. @jtsternberg - I can make a go at this if you can prehaps fill me in with where to start, where to look, etc. That said, while I understand it's gonna create a larger file, can't all the js just be jammed together? swallow that once and then not have to worry about it? I was just reading someone's article and basically it came down to: splitting hairs didn't beat just one larger payload one time. Unless of course we're talking about something massive. \nThat said...\nIs there anywhere that maps form component to js files required for that component? that would make sense (I think). Then it's just a matter of saying \"what's on this page\" and \"okay then, enqueue these (and not these).\" at least that's how I think I would want to approach it. \nfwiw, I do my enqueing with arrays. That is, I have all the details for each script or CSS in an array, and then I run that thought a method that does the actual enqueueing. The point is, that kinda makes manipulation of that easier since the enqueue'ing is done programatically and not hardcoded. One of the properties / fields in my array is active. It's a simple bool switch for turning stuff on and off. Yeah, I've run into this kinda thing before ;)\nLMK\nThx\nmfs\n. Yes. 2.0.0.4 (not 2.0.4) but shouldn't an update via the admin CP more or less just give me a fresh copy, etc?\n. I'm not using any of the CMB2 methods myself so best I can tell its the plugin calling the plugin, yes? \n. Ok. Sorry. I needed to commit my updates in Pantheon. Sorry. Thanks for you help. \n. @tw2113 - By validation I presume (and I could be wrong) @liuzhiqiang means things like required, or a value in a range, etc.  And then - again, I presume - the ability to display error messages, etc. \nI had at one point hacked together a proof of concept (that worked) but didn't get a chance to finishing it to the point I would share it. Let me see if I can dig it up, kick the rust off it, and then see if others here want to help. . @tw2113 + @jtsternberg \nOk. Thank you. . Slightly off topic but none the less related...If the group fields have default values, what happens? Do those only happen for the first row? And every row after is sans the default values? . @JiveDig - I ran into this a couple+ year ago (not with CMB2 but doing some js for a similar need. Much like you (for me at the time) the problem after the first row was the repeater had to be an \"empty\" (read:  no default values) of the first row. (I also think I ran into the same muck with the select.)\nIn any case, what I ended up doing - and again, this was quite some time ago (so please don't shoot me) - was to establish the default row, but hide it. So when I added a new row I used that hidden default row, instead of an empty version of the previous row. I suppose you could also use a data attribute in some way but that's going to take more work than a simple - what comes down to - copy & paste. \nYou can see it here, if you're interested.\nhttps://github.com/ezWebDevTools/ezDynamicList\nThink about it again, I'd probably try to handle the three possible new rows. That is: blank, dupe the previous, or new w/ defaults. \nAgain, this is something I did so long ago I had forgotten about it til now. Certainly since then, better solutions may have come along. But at the time, the only way to have a new row with defaults was to do something like I did. At least I think so :)\np.s. I'm considering dusting it off updating it. Let me know if there's any interested. . @JiveDig  - Yeah agreed.\nI actually have my own much more lite weigh version of CMB2 (called WPezMeta). It doesn't have groups, as that felt outside my initial scope of KISS. That said, I've been considering it, if only for the challenge. Now that I remembered I have some js, it's now mostly a matter of deciding how to save the data (as I think CMB2 and ACF each do it a different way - neither of which works with custom WP_Query).\nWe'll see :). ",
    "mathetos": "This was one of the reasons I switched to Human Made's fork before CMB2 rolled around. Would love to see this implemented. I'd assume though that it would apply exclusively to \"Grouped\" fields since without a groups such columns could produce strange results.\nThat's a nice idea for a workaround though. Will be testing that out a bit.\n. Nice. That will already be a big benefit, and I agree with @JiveDig, the whole tool is targeted toward developers, if we break stuff while building we'll figure it out, this addition just gives us more flexibility to build better. Thanks!\n. Shoot, not sure how I left that out. That project is at home, will update tonight.\n. The easiest (for us users of CMB2) would be to add after_label and before_label strings to the array, like so:\n$cmb->add_field( array(\n        'name'       => __( 'Test Text', 'cmb2' ),\n        'desc'       => __( 'field description (optional)', 'cmb2' ),\n        'id'         => $prefix . 'text',\n        'type'       => 'text',\n        'after_label'  => '<span class=\"tip\"><i class=\"fa fa-info-circle\"></i>This is info about this setting or field</span>',\n    ) );\n. Woot! Nice to see this added. Thanks!\n. Apologies, I believe the issue is that the 'default' has to appear AFTER the 'options' array. \nI updated the radio_inline part of the Wiki to clarify that:\nhttps://github.com/WebDevStudios/CMB2/wiki/Field-Types#radio_inline\n. Awesome, that rocks. Thanks!. ",
    "pablo-sg-pacheco": "I've made a CMB2 plugin for that:\nhttps://github.com/origgami/CMB2-grid\nCMB2 Grid - A grid system for Wordpress CMB2 library that allows the creation of columns for a better layout in the admin\nI hope you guys enjoy it and give me a feedback\n. Thank you :)\nIt's a good idea\n. I need this too\n. ",
    "paaljoachim": "I happen to come across this thread. What about integrating CMB2 grid directly into the CMB2 core?\n(Since this thread is a bit old right now perhaps CMB2 already has something very similar integrated.)\n. Thanks for the feedback Justin!\n. ",
    "bentalgad": "I think this one is a must!\n. I think this is really a \"must\"! it's so inconvenient to have useless empty fields and to have to add one to delete one.. Thanks, great. but i still think it should be completely empty. having just the \"add\" button. also when programmatically add group field i think right now it would add another one and not replace the empty one.. ",
    "Mte90": "I am using cmb2-grid but integrated will be the best solution!. we waiting that support soon :-)\n. any news for this pr?\n. :smiley:\n. Is easy download alla the file with the command line client http://docs.transifex.com/client/pull\n. thanks!\n. Uhm i see that in the languages folder there are the file po for many languages but not the file mo...\n. For the italian language, but as i can see exist all the files po but not for the files mo\nhttps://github.com/WebDevStudios/CMB2/tree/master/languages\n. The file is cmb2-it_IT.po but CMB2 with all this languages supported but not enabled (compiled in mo) is unuseful for everyone, so i think that is better compile all the file in the languages folder.\n. this trunk is perfect :-D\n. Is missing also https://wordpress.org/plugins/cmb-field-type-sorter/\n. There is a new field, this time by me https://github.com/Mte90/CMB2-User-Search-field :-D\n. As example for taxonomy i want that the user can choice only a taxonomy, i don't want the none option.\n. i don't remember what i've done to fix that but i think that i abandoned the idea to use that feature and write one ad hoc.\nI didn't check on the last version on cmb if fixed.\n. Seems work so ticket closed!\n. it was so easy to fix?\ni've tried to do myself but the code is not simple XD\n. @jtsternberg commented on 28 lug 2015 23:10 CEST:\n\nIt was only easy after staring at CMB2 code for years. :D\n\nahahah you win :-D\n. When an array is saved in wordpress the value are serialized, you need to serialize the value after the changing in the db http://php.net/manual/en/function.serialize.php\nFor this reason is better working on the values on wordpress.\n. any news?\n. As I can see the 4.6 will improve the support on rest api for meta https://make.wordpress.org/core/2016/07/08/enhancing-register_meta-in-4-6/\n. Sorry for the comment but I am waiting like a kid under the Christmas tree for this feature.\nThere is any date for the official integration?\n. Any suggestion for try it? to enable the support maybe is required a flag? any hint to try it?\n. I added to a field shot_in_rest => true but there are no result on the rest api, maybe I am missing something.\n. I want to try the cmb2 branch with the support for rest api but travis report that problem...\n. any news for that pr?. On readme there is a reference to wp-translations (with dead links) but on Transifex there is the plugin in any case with a lot of locales https://www.transifex.com/wp-translations/cmb2/dashboard/. Uhm because I complete translated the Italian as example few months ago but the last update is 8 months ago. it_IT :-). Well we need a little bit of backward compatibility or it will be an another framework.\nMaybe add a parameter like gutenberg on true that enable it on the gutenberg editor can be a workaround and for the old document how to update them to support the gutenberg by field type.. Just a ping to see if someone worked on something.\nMaybe we can ask to the community to add the support and do promotion?. I tested CMB with Gutenberg on my plugins and seems that everything is working but I didn't tested all the fields.\nAs plugin developer for me and I guess for many others is important to know if this project support the new UI with the default fields at 100%.\nThere is someone that can confirm that?\nBecause I think that if we have a gutenberg supported this ticket can be closed.\n. Yes I know that actually is heavily based on WordPress but maybe there is a way with hook to do the magic and do custom queries.\nLooking also other framework works usually they do this kind of magic for CRUD and I think that CMB has all the features that we want but add the support for custom database can be interesting.. Is required also something about retrive this data inside CMB to update the backend.\nI think that this feature can improve the awareness of devs to avoid bad dev approach.. I can confirm this issue, I am working for a project to redo all the endpoint to avoid this problem.. Seems that https://github.com/CMB2/CMB2/blob/develop/includes/rest-api/CMB2_REST.php#L404 rest_box include the right metabox but read_fields return all the fiedls also of other metabox. And I did a pr with the bugfix https://github.com/CMB2/CMB2/pull/1238 :-). Seems that the bug in tests is that on https://github.com/CMB2/CMB2/blob/develop/tests/test-cmb-rest.php#L227 is creating a new REst_request that is not a string as suggesting by the comments in the code. The CMB example code is in the ticket that show the issue :-). Yes, sorry I was having connectivity issues and studying the tests issue while pushing that patch on a job project -.-'\nI improved a bit the description and stuff in the ticket.\nCan you help me on understanding the problem with the tests?\n. \nAs you can see here cmb2 groups all the fields in that group but for a public endpoint is not beautiful and clear what means.\nIf it is possible to change will be better :-). I see that is not easy to do that change because the group name is used to check in the rest of that class to show the values.\nProbably add that feature means rewrite all this class to add support for a big astraction (and avoid conflicts with other plugins).\nMaybe we can add a value in the metabox that is used to define the group and change the flow of the various methods.. I am starting to experimenting with https://github.com/Mte90/CMB2/commit/e664f73ce780a8069c02632473a80bff139b36a9\nIt is not perfect because should ignore the metabox of other post types anyway and is not rewriting the flow.. With this other commit https://github.com/Mte90/CMB2/commit/125848c0e562620ebf5add566faf7170b030493b seems that now is altro backward compatible and don't conflicts with other post type or metabox.\nI did that without rewrite everything as suggested so I am not sure if it is the case to do a pr for it.\nHow works:\n\nLoad the metabox\nCheck for a parameter in the metabox that is the slug for the api\nOwerwrite for that metabox instance the slug\n\nIn this way don't create conflicts and we don't need to refactor the class.. Yes it is only a prototype that works and not create issues with other metabox as it is right now.\nI prefered to do a pr just in case someone need an implementation or to have something to start discussing.\nI can work on improve the code style anyway, it is not a big problem :-). Well CMB2 is very important for my job since years so I am happy to contribute to it as much I can :-). I saw that in case of multiple metabox where the parameter is not defined without that line, in other rest pages where should be the default value was replaced.\nWith forcing a reset the code was working and keeping backward compatibility.. ",
    "carl-alberto": "+1 in seeing the cmb2-grid integrated!. ",
    "jimboobrien": "Thank you so much for posting this! Really helped me out a lot!\n\nJim . \n",
    "trelvox": "any chances to see this in 2.0.0 final on wordpress.org ? \n. ",
    "andrejm": "Hi,\nand sorry for long delay.\nIt is indeed problem of WordPress itself, not just CMB2: https://core.trac.wordpress.org/ticket/22363\nI used this code to sanitize filenames (thx @zabatonni ;):\nfunction custom_upload_filter( $file ){\n    $file['name'] = remove_accents($file['name']);\n    return $file;\n}\nadd_filter('wp_handle_upload_prefilter', 'custom_upload_filter' );\n. ",
    "jhit": "Why not use the jQuery default translation mechanism here?\nAdd a language dependent JS file and set the datepicker.regional = 'de'\nsee http://api.jqueryui.com/datepicker/#option-dateFormat\nAs far as I understand the jQuery documentation it should be enough to include the regional JS file and set to regional property on the datepicker JS object.\nYou would still need the filter for the dateFormat, but setting all the translation strings could be skipped from the cmb2 filter.\n. ",
    "ajuliano": "Hi,\nI had a similiar problem when language was set to Swedish. The month of september was set as undefined. I used the following to solve the problem:\n```\nfunction ajuliano_custom_cmb2_date_format( $data ) {\n    $data['defaults']['date_picker']['monthNamesShort'] = array( 'Jan', 'Feb', 'Mar', 'Apr', 'Maj', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dec' );\nreturn $data;\n\n}\nadd_filter( 'cmb2_localized_data', 'ajuliano_custom_cmb2_date_format' );\n```\n. I'm looking for the same functionality. ACF does it like this https://github.com/elliotcondon/acf/blob/e8fef3a78248cff2b61b419964652177311325cb/acf.php#L201 and you could write your own template tag to get autosave-values like ACF does.. ",
    "sb-lc": "thanks, i  have done this but this function is not being called:\n```\n    public function include_cmb() {\n    write_log(\"include_cmb\");\n\n    if ( ! class_exists( 'CMB2', false ) ) {\n        if ( ! defined( 'CMB2_VERSION' ) ) {\n            define( 'CMB2_VERSION', self::VERSION );\n        }\n        $this->l10ni18n();\n        require_once 'CMB2.php';\n    }\n}\n\n```\ntherefore CMB2.php is not being called\nbtw init.php is being called succesfully , thanks\n. i dont understand what you are refering to, what is incorrect?\n. yes init is being called successfully :+1: \nadd_action( 'init', 'wpb_initialize_cmb_meta_boxes', 9999 );\nfunction wpb_initialize_cmb_meta_boxes(){\n    if ( ! class_exists( 'cmb_Meta_Box' ) ):\n        write_log(\"wpb_initialize_cmb_meta_boxes -- ! class_exists( 'cmb_Meta_Box' )\");\n        require_once(plugin_dir_path( FILE ) . 'init.php');\n        require_once(plugin_dir_path( FILE ) . 'fields/cmb-field-select2-master/cmb-field-select2.php');\n        require_once(plugin_dir_path( FILE ) . 'fields/cmb-attached-posts-master/attached-posts-field.php');\n        #require_once(plugin_dir_path( FILE ) . 'fields/cmb-field-gallery-master/cmb-field-gallery.php');\n        require_once(plugin_dir_path( FILE ) . 'fields/cmb_field_map-master/cmb-field-map.php');\n    endif;\n}\n. I have not used cmb2 folder inside my main plugin folder though\n. thanks for your help, I got there in the end !\nIt may be of use to some people here that are moving over from the previous version of cmb that in the array there is a name change\n'pages' => array('event', 'ubs_event'), \nhas now become ....\n'object_types' => array('event', 'ubs_event'), \n. great that fixed it, now when you search your issues for text_time the answer is there for everyone,  thanks\n. i see,\n$field->object_id has sorted it out\nthanks very much\n. I have isolated the problem but not fixed it. when using a field (type' => 'text') then repeated fields are given a number after the id, for id=\"my_field_0\",  id=\"my_field_1\",  id=\"my_field_2\" etc. however I have created a custom field type 'type' => 'video_code', when rendered has an input box and the container for the youtube thumbnail.\nthe id is added like so id=\"'.$field->args['id'].'\". so there is no index added when adding a new row. is there an easy way to achieve this?\nthanks\n. sorry for the mess, but here it is so far.........\n``` php\n    add_filter( 'cmb2_render_video_code', 'cmb2_render_video_code_field', 10, 2 );\n    function cmb2_render_video_code_field( $field, $meta ) {\n        write_log(\"cmb2_render_video_code_field\");\n    #write_log($meta);\n    #write_log($field);\n\n    echo '<p><label for=\"'.$field->args['id'].'\">'.$field->args['desc'].'</label></p>';\n    echo '<p id=\"video_code_error\" style=\"color:red\"></p>';\n    echo '<div><input type=\"text\" class=\"regular-text\" name=\"'.$field->args['id'].'\" id=\"'.$field->args['id'].'\" value= \"' , sanitize_text_field($meta) , '\" /></div>';\n\n    global $post;\n\n    $video_code_field = $field->args['id'];        \n    $video_type_field = $field->args['video_type_field'];\n\n    $video_code=get_post_meta($post->ID, $video_code_field, true);\n\n    write_log (\"video_code-\".$video_code);\n\n    ?>\n\n    <a id=\"refresh\" href=\"#\" onclick=\"get_video_type();\">refresh</a>\n\n    <?php echo \"<script>window.video_code='\".$video_code.\"'</script>\"; ?>\n    <?php echo \"<script>window.video_code_field='\".$video_code_field.\"'</script>\"; ?>\n    <?php echo \"<script>window.video_type_field='\".$video_type_field.\"'</script>\"; ?>\n\n    <script type=\"text/javascript\">\n\n        function youtubeDataCallback(data) {\n            console.log(\"youtubeDataCallback\");\n            console.log(data);\n\n            //var video_code=window.video_code;\n            var video_code=jQuery(\"#_cmb_showcase_options_youtube_video_code\").val();\n            console.log(\"video_code:\");\n            console.log(video_code);\n\n            var s = '';\n\n            if(data.entry.media$group.media$thumbnail[0].url){\n                s += '<img src=\"' + data.entry.media$group.media$thumbnail[0].url + '\" width=\"' + data.entry.media$group.media$thumbnail[0].width + '\" height=\"' + data.entry.media$group.media$thumbnail[0].height + '\" alt=\"' + data.entry.media$group.media$thumbnail[0].yt$name + '\" align=\"left\" />';\n            }\n\n            s += '<b>Title:</b> ' + data.entry.title.$t + '<br/>';\n            s += '<b>Author:</b> ' + data.entry.author[0].name.$t + '<br/>';\n            s += '<b>Published:</b> ' + new Date(data.entry.published.$t).toLocaleDateString() + '<br/>';\n            s += '<b>Duration:</b> ' + Math.floor(data.entry.media$group.yt$duration.seconds / 60) + ':' + (data.entry.media$group.yt$duration.seconds % 60) + ' (' + data.entry.media$group.yt$duration.seconds + ' seconds)<br/>';\n            if (data.entry.gd$rating) {\n              s += '<b>Rating:</b> ' + data.entry.gd$rating.average.toFixed(1) + ' out of ' + data.entry.gd$rating.max + ' (' + data.entry.gd$rating.numRaters + ' ratings)<br/>';\n            }\n            s += '<b>Statistics:</b> ' + data.entry.yt$statistics.favoriteCount + ' favorite(s); ' + data.entry.yt$statistics.viewCount + ' view(s)<br/>';\n            //s += '<br/>' + data.entry.media$group.media$description.$t.replace(/\\n/g, '<br/>') + '<br/>';\n            //s += '<br/><a href=\"' + data.entry.media$group.media$player.url + '\" target=\"_blank\">Watch on YouTube</a>';\n\n            jQuery(\"#videoDataOutput\").html(s);\n        }\n\n        function vimeoDataCallback(data) {\n            console.log(\"vimeoDataCallback\");\n            var thumbnail_src = data[0].thumbnail_large;\n            $('#videoDataOutput').append('<img src=\"' + thumbnail_src + '\"/>');\n        }\n\n        function youtube_get_data(){\n            //console.log(\"youtube_get_data\");\n            //console.log(\"get_video_type\");\n            //console.log(\"video_code_field- \"+video_code_field);\n            //console.log(\"video_type_field- \"+video_type_field);\n\n            var video_code=jQuery(\"#\"+video_code_field).val();\n\n            //console.log(\"video_code:\"+video_code);\n\n            jQuery.post('#', { youtubeVideoId: video_code }, function(result){\n\n                var m;\n                if (m = video_code.match(/^http:\\/\\/www\\.youtube\\.com\\/.*[?&]v=([^&]+)/i) || video_code.match(/^http:\\/\\/youtu\\.be\\/([^?]+)/i)) {\n                  video_code = m[1];\n                }\n\n                if (!video_code.match(/^[a-z0-9_-]{11}$/i)) {\n                  //alert('Unable to parse Video ID/URL.');\n                  jQuery(\"#video_code_error\").html('Unable to parse Youtbe video code.');\n                  jQuery(\"#videoDataOutput\").html('');\n                  return;\n                }\n\n                else{\n                    jQuery(\"#video_code_error\").html('');\n                }\n\n                jQuery.getScript('http://gdata.youtube.com/feeds/api/videos/' + encodeURIComponent(video_code) + '?v=2&alt=json-in-script&callback=youtubeDataCallback');\n            });\n        }\n\n\n        function vimeo_get_data(){\n            console.log(\"vimeo_get_data\");\n            var video_code=jQuery(\"#_videos_video_code\").val();\n\n            console.log(\"video_code:\"+video_code);\n\n            var request = jQuery.ajax({\n                type:'GET',\n                url: 'http://vimeo.com/api/v2/video/' + video_code + '.json',\n                jsonp: 'callback',\n                dataType: 'json',\n                success: function(data){\n                    console.log(\"data:\");\n                    console.log(data);\n                    var title = data[0].title;\n                    var thumbnail_src = data[0].thumbnail_small;\n                    var user_name = data[0].user_name;\n                    var upload_date = data[0].upload_date;\n                    var duration = data[0].duration;\n                    var stats_number_of_likes = data[0].stats_number_of_likes;\n                    var stats_number_of_plays = data[0].stats_number_of_plays;\n                    jQuery('#videoDataOutput').append(\n                        '<img src=\"' + thumbnail_src + '\"  width=\"120\" height=\"90\" alt=\"default\" align=\"left\" />'\n                        +'<b>Title:</b>' + title + '<br>'\n                        +'<b>Author:</b>' + user_name + '<br>'\n                        +'<b>Published:</b>' + upload_date + '<br>'\n                        +'<b>Duration:</b>' + duration + '<br>'\n                        +'<b>Likes:</b>' + stats_number_of_likes + '<br>'\n                        +'<b>Plays:</b>' + stats_number_of_plays + '<br>'\n                    );\n                    jQuery(\"#video_code_error\").html('');\n\n                }\n\n            }).done(function(data) {\n\n            }).fail(function() {\n                jQuery(\"#video_code_error\").html('Unable to parse Vimeo video code.');\n\n            })\n        }\n\n        function get_video_type(){\n\n            //console.log(jQuery(\"#\"+video_type_field).name);\n\n            var type_obj=jQuery(\"#\"+video_type_field).val();\n\n            //console.log(\"type_obj:\");\n            //console.log(type_obj);\n\n            var videoid = window.video_code;\n\n            if(type_obj==\"youtube\"){\n                //console.log('type_obj==\"youtube\"');\n                youtube_get_data();\n            }\n\n            if(type_obj==\"vimeo\"){\n                //console.log('type_obj==\"vimeo\"');\n                vimeo_get_data();\n            }\n\n            jQuery(\"#videoDataOutput\").html('');\n        }\n\n        jQuery(document).ready(function($) {\n\n            jQuery(\"#\"+video_code_field).change(function () {\n                jQuery(\"#video_code_error\").html('');\n                get_video_type();\n             });\n\n            get_video_type();\n        });\n\n    </script>\n    <div id=\"videoDataOutput\"></div>\n\nphp\n\n<pre}\n\n```\n. sorry if its a silly question but is this in a released version or just the dev trunk?\n. ",
    "amitrahav": "so how come the $saved_terms returns array with all slugs, no matter what has been saved.\nthe $this->field->value return array with the only saved ones...\nhow can i make it works with $saved_terms?\n. I'm trying to make a theme option page that will display all tags and the user can select which tag to display in some page...\nhere is the code for the admin page:\n``` php\nclass myprefix_Admin {\n    private $key = 'myprefix_options';\n    protected $option_metabox = array();\n    protected $title = '';\n    protected $options_page = '';\n    public function construct() {\n        $this->title = ( 'Site Options', 'myprefix' );\n    }\n    public function hooks() {\n        add_action( 'admin_init', array( $this, 'init' ) );\n        add_action( 'admin_menu', array( $this, 'add_options_page' ) );\n    }\n    public function init() {\n        register_setting( $this->key, $this->key );\n    }\n    public function add_options_page() {\n        $this->options_page = add_menu_page( $this->title, $this->title, 'manage_options', $this->key, array( $this, 'admin_page_display' ) );\n        add_action( 'admin_head-' . $this->options_page, array( $this, 'admin_head' ) );\n    }\n    public function admin_head() {\n    ?>\n        \n            .cmb-th, .cmb-th+.cmb-td{\n                float: right!important; <br />\n            }\n        \n    <?php  \n    }\n    public function admin_page_display() {\n        ?>\n        <?php echo esc_html( get_admin_page_title() ); ?>\n            <?php cmb2_metabox_form( self::option_fields(), $this->key ); ?>\n        \n        <?php\n    }\n    public function option_fields() {\n        if ( ! empty( $this->option_metabox ) ) {\n            return $this->option_metabox;\n        }\n        $this->fields = array(\n                    array(\n                        'name' => ( 'subjects', 'myprefix' ),\n                        'desc' => ( 'subjects', 'myprefix' ),\n                        'id'   => 'subjects',\n                        'taxonomy' => 'post_tag',\n                        'type' => 'taxonomy_multicheck',\n                    )\n                );\n        $this->option_metabox = array(\n            'id'         => 'option_metabox',\n            'show_on'    => array( 'key' => 'options-page', 'value' => array( $this->key, ), ),\n            'show_names' => true,\n            'fields'     => $this->fields,\n        );\n        return $this->option_metabox;\n    }\n    public function __get( $field ) {\n        if ( in_array( $field, array( 'key', 'fields', 'title', 'options_page' ), true ) ) {\n            return $this->{$field};\n        }\n        if ( 'option_metabox' === $field ) {\n            return $this->option_fields();\n        }\n        throw new Exception( 'Invalid property: ' . $field );\n    }\n}\n$myprefix_Admin = new myprefix_Admin();\n$myprefix_Admin->hooks();\nfunction myprefix_get_option( $key = '' ) {\n    global $myprefix_Admin;\n    return cmb_get_option( $myprefix_Admin->key, $key );\n}\n```\nafter every save all tags returns true and all the checkboxes are checked,\nbut the results in the front side are correct...\n. ",
    "suhiminain": "Thanks @jtsternberg for your explanation.\n@amitrahav, may be your can try this trick. https://github.com/WebDevStudios/CMB2/wiki/Tips-&-Tricks#a-dropdown-for-taxonomy-terms-which-does-not-set-the-term-on-the-post\n. ",
    "lmartins": "Is the wp-large-options still recommended to add category metaboxes?\n. Cool, thanks.\n. Hi Justin, I've meant changes in the PHP where i had CMB2 config.\nI'll close this for now and let you know if I can replicate the issue in the circumstances you suggest.\n. I also love to see this improved in CMB2, as futile as it might sound, is one my main concerns preventing me from start replacing ACF with CMB2. \nSo I would also be happy to help with the CSS if any help needed. \n. ",
    "josephndenton": "This bug goes a bit deeper than the described issue. If you manually edit the data-selector attribute of the \"Add Row\" button and the id of the div that it targets to the correct integer via inspector:\n<button data-selector=\"_prefix_group-id_1_field-id_repeat\" class=\"cmb-add-row-button button\">\n  Add Row\n</button>\nto\n<button data-selector=\"_prefix_group-id_x_field-id_repeat\" class=\"cmb-add-row-button button\">\n  Add Row\n</button>\nand\n<div id=\"_prefix_group-id_1_field-id_repeat\" class=\"cmb-repeat-table cmb-nested\">\nto\n<div id=\"_prefix_group-id_x_field-id_repeat\" class=\"cmb-repeat-table cmb-nested\">\nThe repeatable fields get added to the correct group, but the data-iterator attribute and their names/ids are incorrect: This causes havoc when trying to save / update these fields.\nI think this secondary issue lies in the fact that both the addGroupRow and addAjaxRow JS functions use the same cleanRow function to setup cloned rows for insertion. The logic used doesn't seem to handle both situations well.\nI have a local branch with the first fix patched in, but am still working on getting the second issue resolved.\n. ",
    "bluerid": "Is there a way to reset the group to it's initial state, by a javascript click? Maybe, a trigger or something? I need a reset. That means all the fields will be deleted leaving an initial blank field. Is this achievable with some sort of jQuery?\n. ",
    "jaxgeller": "Sorry to reopen, but @jtsternberg when is the next release due/ how can i use this feature right now? Clone master or another branch?  All i can seem to find is this https://github.com/WebDevStudios/CMB2/tree/c8b904de3a84a7323bfecdc188f5234da51f74ed, but no branch info. Thanks!\n. This might be slightly off-topic, but I think I'm running into a post limit as well, but with creating more than 99 repeating groups. Any time I create a 100th group and save, the 100th group does not get saved. There seems to be hard limit on 99 repeating groups.\n. @mikemcalister it worked (.htaccess). Thank you!\n. Ive tried running queries like (with escaping single and double quotes)\nUPDATE `wp_options` SET `option_value`=\u2018\u2026'  WHERE `option_name` = 'NG_members_options'\nStill not updating values. And by that i mean no changes are reflected in the wp-admin pages.\n. @Mte90 The situation im in is a little tricky, i had over 90 repeating metaboxes with lots of content. Since then, i have a backup of the serialized database entry, but have since lost all the data. Im trying to drop-replace the db entry so i dont have to go in and re-add all of the metabox entries. \n@jtsternberg Here's the string ive been running with the query above with some data omitted.\na:1:{s:16:\\\"NG_members_group\\\";a:100:{i:0;a:10:{s:4:\\\"name\\\";s:11:\\\"Susan Tynan\\\";s:4:\\\"work\\\";s:11:\\\"Framebridge\\\";s:5:\\\"title\\\";s:3:\\\"CEO\\\";s:11:\\\"headshot_id\\\";s:2:\\\"99\\\";s:8:\\\"headshot\\\";s:27:\\\"http://placehold.it/200x200\\\";s:8:\\\"location\\\";s:1:\\\"0\\\";s:4:\\\"desc\\\";s:492:\\\"Susan Tynan is ....\\\";s:7:\\\"twitter\\\";s:31:\\\"https://twitter.com/...\\\";s:8:\\\"linkedin\\\";s:38:\\\"https://www.linkedin.com/in/...\\\";s:6:\\\"sector\\\";s:1:\\\"4\\\";}i:1;\nAnd heres a video of me detailing whats going on (no audio) just to make sure i'm not missing any steps.\nhttps://www.youtube.com/watch?v=zHbzOwq5_Tk\n. There was a cache that comes with wpengine by default, it has been purged and disabled at the time of the video\n. Just going to re-input the data\n. ",
    "piya23300": "I found the same this issue.\nI follow code form this example https://github.com/WebDevStudios/CMB2-Snippet-Library/blob/master/options-and-settings-pages/theme-options-cmb.php\nI found a solution from this https://wordpress.org/support/topic/calling-cmb2_get_option-in-init\n. I open PR https://github.com/WebDevStudios/CMB2/pull/291\nbecause It collects hidden fields and then render last of metabox\nbut I would like to render inside the group.\nIt will render hidden fields inside the group.\n. ",
    "jajouka79": "has this been implemented by anyone yet? i really need to add cmb2 fields in the quick-edit and bulk edit options, thanks\n. http://wpdreamer.com/2012/03/manage-wordpress-posts-using-bulk-edit-and-quick-edit/#add_to_bulk_quick_edit\nthis article contains the info to do it without cmb2 but for an installation that depends on cmb2 none of this will work\n. can someone please tell me if this fix has been included in the github repo, I'm not sure what 'trunk' is refering to. thanks\n. ok, thanks justin\nOn 11/05/15 18:28, Justin Sternberg wrote:\n\n@jajouka79 https://github.com/jajouka79 it is in the trunk branch \nand will be in master when we release the next version. You can \ndownload trunk or checkout the trunk branch from the repo.\nhttps://github.com/WebDevStudios/CMB2/tree/trunk\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/WebDevStudios/CMB2/issues/310#issuecomment-100985604.\n. did you ever figure this out? I need to customise the quick edit and bulk edit options adding cmb2 fields, anyone know how to do this?\n. http://wpdreamer.com/2012/03/manage-wordpress-posts-using-bulk-edit-and-quick-edit/#add_to_bulk_quick_edit\n\nthis article contains the info to do it without cmb2 but for an installation that depends on cmb2 none of this will work\n. ",
    "angelorocha": "\"quickedit\" => true,\nIs possible? . +1 \ud83d\udc4d . Wow!!!! Great Job!. ",
    "jamiechong": "Yes, that would work if I only wanted to allow 1 of N colors. But if I want to let the admin choose any color (with the standard colorpicker), but also give them the convenience of picking from a default palette of suggested colors, then this feature would provide a cleaner UI. \n. One thing I just discovered is that when you Add another row/group, the radio button value isn't set. \nThis is a radio button from a group that saved properly:\n<input type=\"radio\" value=\"template2\" id=\"_mm_lb_pages_0__mm_lb_page_template2\" name=\"_mm_lb_pages[0][_mm_lb_page_template]\" class=\"cmb2-option\">\nThis is a radio button from the new group:\n<input type=\"radio\" value=\"\" id=\"_mm_lb_pages_1__mm_lb_page_template2\" name=\"_mm_lb_pages[1][_mm_lb_page_template]\" class=\"cmb2-option\" data-iterator=\"1\">\nThe differences is that the newly added fields don't have a value attribute set but they include a data-iterator=\"1\" attribute (probably unrelated?). \n. I believe I've found the problem and figured out a solution for this. It would be great if you could release this fix so any of your new updates of the plugin don't overwrite the changes I've hacked into a production site. \nThe problem is that after you clone a row, you empty all the values of the input items. This makes sense except for radio and checkbox fields. \nSo in cmb2.js I modified the following:\nLine 351:\n``` javascript\n            $newInput\n                .removeClass( 'hasDatepicker' )\n                .attr( attrs );//.val('');\n        if ($newInput.attr('type')!='radio' && $newInput.attr('type')!='checkbox') {\n            $newInput.val('');\n        }\n\n```\nLine 473 in the emptyValue function:\njavascript\n        $('input:not([type=\"button\"],[type=\"radio\"],[type=\"checkbox\"]), textarea', row).val('');\n. @tw2113 I can't say for sure. I'm no longer active on the project I was using this for. I think I switched to using the production CMB2, which means I was happy with the changes being merged in. It's been so long - can't honestly remember. \n. @jtsternberg  maybe you'll now merge PR #265 ? \n. Hey Guys, I was wondering if you could seriously consider this pull request. It address two issues that I have on a production site. The bugs were hard to figure out, and I'm sure it's affecting other users (they just don't know it). It seems like there are merge conflicts (but I can't see them). Let me know if you need any more info - issues #150, #152 and #187  give more insight. Thanks!\n. I'm not sure what the \"Failed\" check is, but this pull request is legit. It's the same PR as #153 but you wanted me to apply changes to trunk. Hopefully you can get this into a near-future release! At least look at the changes - maybe you want to implement the fixes in another way. Thanks!\n. trashing this PR. \n. I have a feeling this fix could probably be refactored a bit to also solve #348.\n. @jtsternberg  what do you think? Good enough to merge into trunk? Or should I investigate 348 and create a PR for both? \n. ",
    "efoula": "Hello,\nHow to create a custom colour palette without showing up all the colours of the colour picker, I just want to show up a specified number of colours for the admin !!!??\n. Thank you so much, appreciated.\nOn Sat, Jul 30, 2016, 05:10 Justin Sternberg notifications@github.com\nwrote:\n\nClosed #96 https://github.com/WebDevStudios/CMB2/issues/96.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/96#event-739908952, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AChlwQXIueQuCPMcIXSZavDu6J-MBopdks5qasC6gaJpZM4C-x_Z\n.\n. Your solution makes sense (I can add group entries dynamically, perfect).\nBut I still don't know how to change/edit a \"specific\" entry of the group? Is each entry in the same group has an id?. Sounds good. Let us say I will provide an ID for each entry, then how to update the entry content by its ID? . For example, if I have 2 entries:\n\nGroup (_premtb_repeat_group)\nEntry(1)\nfield (id) = 1\nfield (title) = Apple\nEntry(2)\nfield (id) = 2\nfield (title) = Orange\n--\nHow could I update Entry(1)-> title?\n. This is what I found when I inspect the fields on the backend\n<input type=\"text\" class=\"regular-text\" name=\"_premtb_repeat_group[1][pln_title_en]\" id=\"_premtb_repeat_group_1_pln_title_en\" value=\"1 Month\">\n(1) is the key of the entry.\nAnd this is how it is saved in the DB meta value:\ni:1;a:8:{s:12:\\\"pln_title_en\\\";s:7:\\\"1 Month\\\"\n. Actually, I have a website more like \"linkedin\", and what am trying to do is to allow the users to add their work experiences \"Company name, position, date, etc.\", and I give the users the ability to add/edit/delete any work experience. So, coz I used to use cmb2 which I found very easy to use, I was thinking of using a group cmb to add these user's work experiences, and that's it.. Thank you for your response, appreciate it.\nI still have the same problem, coz I want to edit/update the group entries separately, and I cannot reach that result by using the frontend forms, and also I am using AJAX to submit the forms.\nI hope anyone can help on this issue, the group entry already has a key, so why not I couldn't update it dynamically by using \"update_post_meta\"?. Look, I made a workaround by using find and replace in an array, I hope this could help anyone who is facing the same problem.\n$entries = get_post_meta(19993, '_premtb_repeat_group', true);\n$array   = $entries;\n$count = 0;\nforeach ((array) $entries as $key => $entry) {\n    $count++;\n    if ($count == 2) {\n        if (isset($entry['pln_title_en'])) {\n            $pln_title_en = esc_html($entry['pln_title_en']);\n        }\n        if (isset($entry['pln_price_en'])) {\n            $pln_price_en = esc_html($entry['pln_price_en']);\n        }\n        if (isset($entry['pln_feats_en'])) {\n            $pln_feats_en = esc_html($entry['pln_feats_en']);\n        }\n        $search  = array($pln_title_en, $pln_price_en, $pln_feats_en);\n        $replace = array('Replace Title', 'Replace Price', 'Replace Features');\n    }\n}\narray_walk($array,\n    function (&$v) use ($search, $replace) {\n        $v = str_replace($search, $replace, $v);\n    }\n);\nupdate_post_meta(19993, '_premtb_repeat_group', $array);. Your solution rocksss. Thank you so much :)\n$entries = get_post_meta(get_the_id(), '_premtb_repeat_group', true);\n$entries[$key]['pln_title_en'] = 'Replace Title';\nupdate_post_meta(get_the_id(), '_premtb_repeat_group', $entries);\n. I found a solution provided by tw2113.\nif ( is_array( $entries ) ) {\n}. ",
    "benjaminmueller": "This feature has since been released and you can now modify the colorpicker's default options. I have updated the documentation for the colorpicker field and added a code example as well.\nYou can find that information here https://github.com/WebDevStudios/CMB2/wiki/Field-Types#colorpicker\n. ",
    "asknaskan": "Merge done. I will try to test all in the couple of next days (if you are not faster than me :D).\n. @jtsternberg The issues are fixed (without one) - sorry; you're right of course; in speed of my project i just forget to use grunt and just try to fix the JS.\nI can't successfully fix the Issue of QTags function at the time (cause it can't init with 'new' operator, it don't return something; more: https://core.trac.wordpress.org/ticket/25947). I will try that when im home.\n. At the moment I can't reproduce that at our live system. But I will try it again.\nBut I just see some new bugs (also cause the new features were integrated) by delete an row and add a new again. The editor will not init again. (TinyMce have to know when an editor have to be destroyed) - I just fix it, if I get some free time.\n. @ptt-homme\nI think there will be no way for this week. Im in Holiday's.\nNext year I will do the last steps.\n. Merged to current upstream. \nKnown Bugs last in CMB2 I see:\n- Deleting the last Group and create an new again will cause an javascript crash\n- Deleting an group is not last will destroy the next new created group\n- (there should be an way to unload preloaded tinymce editors in code for deleting things)\nI will see the next couple of days.\n. Thanks for the feedback.\nIm currently thinking about how to prevent order errors by deleting groups that not at end of row. I will try the next couple of days to find a workable solution (and some time).\n@Blindmikey \nFor issue 148 - I don't know at the moment, I'd never test this szenario, but I think so.\n. Everything \"silent merged\" as needed.\n. ",
    "ptt-homme": "Hi @asknaskan,\nAny chance to see this PR pushed by the end of the week?\nI really need WYSIWYG with groups :(\nMaybe I can help, just let me know how?\n. ",
    "Blindmikey": "Looking forward to this merge, sounds like it could fix https://github.com/WebDevStudios/CMB2/issues/148\n. Looks to be a mirror of: \nhttps://github.com/WebDevStudios/CMB2/issues/116\n. However, these are not custom fields. Not sure if I'm going about this wrong, some eyes would still be appreciated, so I'm opening this.\n. Thanks for the updates!\nI'm still having an issue with an extra select field showing upon save however.\nMy tasks to recreate:\n1. create repeatable group\n2. within that group create a repeatable select dropdown\n3. fill out repeatable form w/repeatable select dropdown in wp-admin & save post\n4. you'll find an additional select dropdown that you hadn't created\n. ",
    "praditha": "Hi @jtsternberg ,\nThanks for point me out to the sanitization_cb, I just used it but if the value is invalid (regarding the validation rule) then the value on the form will be wiped out.\nBut how can I show the error message to the user rather then put a small information under the input field.\nFor example:\nI have a reference code field which should be unique for every post.\nIf user put the code which already used by another post, I need to alert user that the code is already used.\nThanks.\n. ",
    "joshlevinson": "I did some poking around because this behavior felt unnatural to me\u2014that get_the_terms can return two different types of results depending on whether or not the results are present in the object cache. It's definitely a requirement to keep the associative array style based on how wp_cache_add works ($key, $data, $group - $key being the term_id).\nHowever, I feel like the behavior should still be consistent. This leaves the only option being to change wp_get_object_terms so it returns an associative array instead of the current indexed one.\nI compared the taxonomy functions with how metadata is retrieved to determine whether they currently behave similarly (in which case I would think wp_get_object_terms should be left alone).\nget_metadata pulls from either wp_cache_get or update_meta_cache, which will both yield an associative array with the meta_id being the key. Taxonomies are different in that they're arrays of objects, so they have identifiers without using an array key. I still feel that taxonomies could benefit from a similar pattern though.\nDoes this sound like a good first trac ticket for me to take on?\n. ",
    "heddesheimer": "Thank you.\n. OK, here is what I found.\nIn the file cmb2.js the var $formfield is set while declaring this function:\ncmb._handleMedia = function( formfield, isList ) {\nwithin this function, another function is declared:\ncmb.mediaHandlers.single = function( selection ) {\nFor some reason, the $formfield variable is not identical when the .single function is called, this leads to the wrong field, when replacing the thumbnail. A quick fix would be to add another assignment for $formfield within this .single function (and probably also for cmb.mediaHandlers.list), to set $formfield to the correct value:\n$formfield = $id( cmb.formfield );\nI don't have too much experience with javaScript and jQuery to find out why the $formfield variable does not get the correct value. Maybe it's something related with variable scope when declaring functions within functions. From my first tests, it seems to fix the problem when I assign $formfield to the initial value again.\nIt would be nice if you could verify that I have nailed down the problem correctly and if you could check if you can implement it in the next update when I haven't missed anything here.\nThanks\nMarian\n. I checked it and it's still having the same bug. Did you read what I wrote about the $formfield variable? I don't see that you changed anything regarding to this in your cmb2.js.\n. Any chance that you get this fixed? I just updated to 2.0.8 and it seems it still has the same problem. It's really disappointing, as I provided a possible solution already and nobody seems to care. Is it really that much trouble to implement a simple change like that, or am I the only one having this problem? It happens not only with image lists, but also if I have more than one image in a metabox.\n. Hi Justin,\ntrunk version works fine. When do you think it's rolled out to the official\nplugin? Do you have a donation button somewhere. I'd be happy to donate\nsome money when this bug fix is rolled out finally.\nThanks\nMarian\nOn Thu, Aug 6, 2015 at 4:02 AM, Justin Sternberg notifications@github.com\nwrote:\n\nThis should be good on trunk. Feel free to test.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/250#issuecomment-128211086.\n. OK, thank you. Then I'll wait. I'm glad you got it fixed eventually.\n\nOn Thu, Aug 6, 2015 at 6:47 PM, Justin Sternberg notifications@github.com\nwrote:\n\n@heddesheimer https://github.com/heddesheimer I shoot for monthly\nreleases more or less, and we had a release this/last week.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/250#issuecomment-128437643.\n. \n",
    "modemlooper": "Actually this might not be needed as CMB saves as normal meta.\n. ^ yes yes with field config, we can do this now, don't need wp-api 2.0\n. why was this closed? is api support not on the map?\n. I'm going to add WP-API support, was just waiting until the API was close to inclusion. Have option when creating fields 'show_in_rest' and it will plop that meta field to the API response. By default WP-API doesn't handle meta but we can make it easy for CMB to be added. \n. placing this here as this is the method for adding the CMB data http://v2.wp-api.org/extending/modifying/\nAdding meta this way will allow updating of fields externally :dancers: \n. Ok, so first half of WP-API is in core and the endpoints will be there soon enough. let's get show_in_rest args added to CBM fields.\nBasically how it would work is when you create a CMB field there should be an arg 'show_in_rest' => true and then we can create a method to get the fields with this arg and add to API using register_api_field()\n. An endpoint to send back all registered cmb fields would be nice. \n. working on the endpoints, the schema for post meta json is something that hasn't been set in stone. There is a meta endpoint for single post but what gets added to posts repsonse is not been determined.  The cool things about API is the data could be returned in any form but this is backwords for how people perceive WP. get_post_meta returns the same thing for everyone. I feel like the rest API should do the same. This is sorta topic for WP-API community but putting it here so we get the schema right before release. \nDo we really want every single plugin to add another key in the json, that's what endpoints are for. Does it need to be specified its a CMB fields or merely post meta? \n\"cmb2:rest_demo_metabox\":\n    {\n    \"rest_demo_text\": \"this is to test rest data\"\n    },\nor \n\"post_meta\":\n    {\n    \"rest_demo\": {\n        \"renderd\": \"this is to test rest data\"\n        }\n    },\n. This format would be easier to use    \n\"cmb2\":\n    {\n       \"rest_demo_metabox\" {\n           \"rest_demo\": {\n              \"rendered\": \"this is to test rest data\"\n           }\n         }\n    },\n. Possible endpoints:\nThese are endpoints to get info about boxes and fields. Not the values.\n```\nwp-json/cmb2/v1/metaboxes // gets all registered show_in_rest metaboxes inlcuding fields\nwp-json/cmb2/v1/fields // gets all register show_in_rest fields\nwp-json/cmb2/v1/metaboxes/ // gets single meta box and its fields\nwp-json/cmb2/v1/fields/  // gets a single field. \n?filter=post_type // filters registered show_in_rest metaboxes inlcuding fields for specified post type. \n```\n. got the class up, just need to figure out the exact endpoints we want\nhttps://github.com/modemlooper/CMB2/commit/d9f6e99e34a68341aa6febbe77a766529e2f47e0\n. some test data in https://github.com/modemlooper/CMB2/commit/dbbc62a53d8493f66b750acdce99608889231519\n\n. Awesome! I have no idea where the composer stuff came from. I'll finish this up over the weekend. \n. K\n. https://buddypress.trac.wordpress.org/browser/trunk/src/bp-xprofile/bp-xprofile-admin.php\nBuddyPress has admin page to handle profile field groups and fields. Might be worth looking through\n. I'm having this issue on repeatable group fields. I have a group of fields and if they choose a specific option from the select js disables other fields. The fields have default values but they get wiped out on save. \nI think i might have to resort to hidden fields so the value can't be changed\n. Example of description under title\n\n. ok, didn't realize there was a hook. However, it would be easier to add as arg.  Your method adds it into the form. Not sure what kind of issues that could cause.. ",
    "Ramblurr": "Any update on whether CMB supports WP-API?\nI'm evaluating various custom fields plugins, and working support for WP-API is a must.\n. Thanks @jtsternberg  what about options on custom admin options pages?\n. Thanks @jtsternberg \nA use case for you: A user has a WordPress site and an Android app. They want to be able to update various things in the Android app from their WordPress admin page. My plan is to create a custom admin page, expose the data with WP-API, then consume the JSON in the Android app.\n. @modemlooper care to elaborate?\n. Since I need this feature sooner rather than later, and I really like CMB, I've gone ahead and mashed up the WP-API and CMB2 APIs.\nCreating a custom endpoint for CMB2 data is pretty simple. Just follow the Extending AP-API with custom endpoints sample and in the register_routes function return the data you want from CMB2!\n. +1 from me, this would be great.\n. Super!\n. Super, thanks @coreymcollins, thanks exactly what I was looking for.\n. Woops, didn't see you're running unit tests. I'll work one up and add the commit.\n. @jtsternberg Absolutely. \nThe goal was to automatically render the group boxes closed. Since adding the closed class is sufficient to due this, I added added this attribute in a generic fashion.\nI can see that adding the ability to set any 'ol class isn't really necessary, perhaps it could just be a boolean option that adds the closed class conditionally?\nThe overriding goal between this and #219 was to produce a compact series of group fields, where (1) existing fields default to the closed state and (2) reading the group_title gives sufficient information about the group's contents. \nLike this:\n\nHere's a snippet where I use the option. It includes the group_title callback in #219, which I understand you won't merge, no worries.\nphp\n        $group_field = array (\n            'type' => 'group',\n            'options' => array(\n                'html_class' => 'closed',\n                'group_title' => 'New Program',\n                'group_title_callback' => array($this, 'format_group_title'),\n....\n. ",
    "JPry": "I've broken out the remaining items from this comment above into separate issues, all under the REST API milestone.\n. @jtsternberg \n\nI'm not sure I understand the value of reversing this to use array keys?\n\nHere's a StackOverflow answer that should explain it.\n. @jtsternberg It's true that any single instance of this method being called won't produce any significant performance increase, and it may add some confusion. However, this method is called every single time an instance of CMB2_Field is created. There are 5 calls currently in CMB2, and a single call each in CMB2_Sanitize and CMB2_Types.\nTaking into account multiple fields and multiple metaboxes, this very quickly increases by a significant factor. Thus, the performance improvement can add up and be worth the slight confusion developers may have.\n. Hey Devin,\nAre your plugins requiring the CMB2 bootstrap.php file, or the init.php file?\n. Merged in d772c276abf3dc3354e62f037625e41f73893b7e\n. Here's a site that describes RESTful naming of routes and resources: http://www.restapitutorial.com/lessons/restfulresourcenaming.html. \n. ",
    "bradp": "Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here and this is more support-related. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Looks like this is now fixed. Going to close this one. Feel free to re-open if there are future issues.. Also, please update this PR to match the WordPress Coding Standards.. Mostly just one return after a block versus two. \n```\n$cmb = cmb2_get_metabox( $this->metabox_array );\n        $this->assertEquals( $this->cmb, $cmb );\n    // Test successful creation of new MB\n    $cmb1 = cmb2_get_metabox( $this->metabox_array2 );\n    $cmb2 = new CMB2( $this->metabox_array2 );\n\n```\nvs\n```\n$cmb = cmb2_get_metabox( $this->metabox_array );\n        $this->assertEquals( $this->cmb, $cmb );\n    // Test successful creation of new MB\n    $cmb1 = cmb2_get_metabox( $this->metabox_array2 );\n    $cmb2 = new CMB2( $this->metabox_array2 );\n\n```\n. Closing due to no movement here. Feel free to re-open if needed.. closed for #372 \n. Ran everything through imageoptim / testing travis notifications\n. Not worth it - we lose more space in git history than the actual image sizes\n. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing this. @colincsd if you want to reopen this, please see these 100,000 other repos first, as they have the same \"issue\". \nhttps://github.com/search?o=desc&q=%22data%3Aimage%2Fpng%3Bbase64%22&ref=searchresults&s=indexed&type=Code&utf8=%E2%9C%93\n. Do tests fail if you run them locally?\n. Closing due to no movement here, and is better suited for an issue over on Simple Page Builder. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. This issue seems to be specific to https://github.com/WebDevStudios/CMB2-Snippet-Library/blob/master/custom-field-types/address-field-type.php, an issue there would be preferrable. Closing this one.. I can't seem to re-produce this locally, going to close this. Feel free to re-open if needed.. Looks like this is solved, closing.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if needed.. Closing due to no movement here. Feel free to re-open if applicable.. Closing due to no movement here. Feel free to re-open if applicable.. I'm not seeing CMB2-specific issues here, going to close. \nPlease re-open if this is CMB2-specific.. I'm not following the issue here 100%, but using your code locally, everything appears to be working as expected, which makes me think this is due to another conflict you have. \nGoing to close this, feel free to re-open or make a PR with a fix if you do find an issue in CMB2.\nThank you.. Looks to be resolved here, going to close. Feel free to re-open if needed.. Looks to be resolved here, going to close. Feel free to re-open if needed.. No response here, going to close. Feel free to re-open if needed.. Looks to be fixed, going to close. Feel free to re-open if needed.. Feel free to open a PR @rubengc, thanks.. @rubengc Needing refresh as in an update to cleanly merge, as right now it conflicts. . https://github.com/CMB2/CMB2/pull/878/conflicts. See https://github.com/WebDevStudios/CMB2/wiki/Box-Properties#cmb_styles for options / parameters for boxes and styles.. Not a bug, closing.. Not a bug, closing. . Seems to be resolved here, going to close this. \nIf this comes up again as a bug, feel free to re-open.. There were only a handful of these, so not a huge issue if they don't. . Without whitespace changes: https://github.com/WebDevStudios/CMB2/pull/907/files?diff=unified&w=1. ",
    "gilbarbara": "This will never work with bower, it is for JS/CSS libraries. Maybe composer..\nI'm using it as git submodule.\n. :+1: \n. me too!\n. ",
    "kaelaRoy": "Yes it does! I did the following:\nfunction cmb2_dir( $path = '' ) {\n//  return wp_normalize_path( trailingslashit( dirname( __FILE__ ) ) . $path );\n    return trailingslashit( dirname( __FILE__ ) ) . $path;\n}\nI tested it with adding, removing, uploading, and reorganizing the images, all works fine now. Thanks for the quick response :)\n. That one did not work, same 403 error.\nOn Wed, Dec 10, 2014 at 1:34 PM, Justin Sternberg notifications@github.com\nwrote:\n\nCan you do me a favor?\nCan you test it like this:\nfunction cmb2_dir( $path = '' ) {    return trailingslashit( str_replace( '\\', '/', dirname( FILE ) ) ) . $path;}\nIt looks like you're on windows, so I would like to get this nailed down\nfor other windows users if possible. Thank you!\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/112#issuecomment-66499567.\n. \n",
    "underscorefunk": "I'm having the same problem, even without \"show_on\" being enabled/filtered.\n. Thanks for the speedy response. What I'm looking for is an easy way to create alternate layouts of metabox forms. I think perhaps I posted too soon. I'm starting to dig into the source and helper functions and see that there is a lot in here--well documented too! Chalk this up to a work in progress wiki perhaps?\nBtw, for example (a nice repeater row of event options for an event's agenda):\n[start time] [end time][event name][event options] \n. Oh, no doubt. What you've done already is such a huge undertaking and I'm exceptionally appreciative of the hard work. I hadn't thought of making the field set a single custom 'field' but that might be a really elegant solution. Sort of like a metaset within a metabox. Thanks!\n. I looked into the CMB2_Types class to find the $field_type_object->input used in your example. I noticed that there is only a method for input and textarea. Is there a recommended away to do the \"multiple fields in one\" with checkboxes, radio buttons, etc? \n. Thanks @jtsternberg. I was looking there already and I noticed that a lot of the methods don't exist or those that do don't currently accept args for configuration. Now that I look more closely it looks like the ones available through this class in this context are fields available as repeater/group fields. I think maybe my request to do this is just a little too early in the dev cycle.\n. ",
    "inspiraaz": "I'm having the same problem, is there any solution for this ?\nWordPress 4.1\nCMB2 v2.0.0.9\n. CMB 2.0.1\nWordpress 4.1\nIt works now, value '0' is saved.\nBut there is stil a problem with selected attribute applied to both value '0' and empty value.\nmetabox example:\narray(\n    'name' => 'My Field',\n    'id'   => 'my_field',\n    'type' => 'select',\n    'options' => array(\n        ''   => 'Select',\n        '0'  => 'No',\n        '1'  => 'Yes'\n    )\n)\nIf i select option with value '0' or value '', then the html output looks like this\n<select>\n    <option value=\"\" selected='selected'>Select</option>\n    <option value=\"0\" selected='selected'>No</option>\n    <option value=\"1\" >Yes</option>\n</select>\n. Since this question makes no sense let me explain the issue i have.\nI have a custom metabox ( not cmb2 ) that is initialized with add_meta_boxes hook.\nAnd i want page elements to appear in this order...\ncontent editor\nmy metabox\ncmb2 metabox\nother stuff ( author... )\nI tried to change metabox priority and just can't set this order.\nIf cmb2 used the same hook ( add_meta_boxes ) i could set this order with hook priority.\n. ",
    "adamcapriola": "Very late response ... but I am still having this issue. 0 is selected by default and I can't save the no value option.\n. Oh wow, thanks! That actually doesn't look that bad; I was expecting this to be way more complicated than simply needing to apply sanitization and escaping. Cheers! Is there any way I can chip in a few bucks towards further development of this plugin?\n. Oops! My bad.\n. ",
    "olya-fb": "To those who wants to get in on the address-field-type links to the Snippet Library, it is now here: https://github.com/WebDevStudios/CMB2-Snippet-Library/tree/master/custom-field-types/address-field-type. ",
    "dreiacht": "Hey everyone,\nfirst of all thanks for this great solution! Unfortunately I'm running into the following issue:\nWhen adding 3 or more addresses at once, the last one will not be saved. So when I add 3 addresses only 2 will save, when adding 4 only 3 will save, etc. \nAny idea why that could be?. @tw2113 Thanks!\nSo, everything is in my cmb2.php file.\nAt first I include the address snippet / plugin.\nphp\nfunction cmb2_init_address_field() {\n    require_once dirname( __FILE__ ) . '/cmb2/plugins/class-cmb2-render-address-field.php';\n    CMB2_Render_Address_Field::init();\n}\nadd_action( 'cmb2_init', 'cmb2_init_address_field' );\nAnd then I have a group field in which I place the repeatable address field:\n```php\n$guideline_group_field = $cmb_guidelines->add_field( array(\n            'id'           => $prefix . 'guideline_sections',\n            'type'       => 'group',\n            'options'  => array(\n                'group_title'   => esc_html__( 'Section {#}', 'bonestheme' ), // {#} gets replaced by row number\n                'add_button'  => esc_html__( 'Add Another Section', 'bonestheme' ),\n                'remove_button' => esc_html__( 'Remove Section', 'bonestheme' ),\n                'sortable'      => true, // beta\n                // 'closed'     => true, // true to have the groups closed by default\n            ),\n        ) );\n$cmb_guidelines->add_group_field( $guideline_group_field, array(\n                'name'          => esc_html__( 'Address', 'bonestheme' ),\n                'id'                => 'cmb_address',\n                'classes'       => 'cmb-section-address cmb-subsection',\n                'type'      => 'address',\n                'repeatable'    => 'true',\n                'text'      => array(\n                    'add_row_text'       => 'Add Address',\n                    'remove_row_text' => 'Remove Address',\n                ),\n            ) );\n```. Here you go: https://github.com/WebDevStudios/CMB2-Snippet-Library/blob/master/custom-field-types/address-field-type/class-cmb2-render-address-field.php. ",
    "valentin-debris": "I investigated this error and I found a solution.\nThe problem is in cmb2, when you click on the \"Add row\", the js function (in cmb2.js) \"cmb.addAjaxRow\" retrieves the data in the attribute \"data-iterator\" to determine the next value. This attribute is add to the label and the input. The prob is the fonction that retrieves the \"data-iterator\" always takes the first elem, the one in the label. Or the label stop incrementing after the second rows, while the data-interator on the input continues.\nSo they are 2 solutions :\n-Remove all the labels in the class \"class-cmb2-render-address-field\"\n-in cmb2.js (~ line 562, and cmb2.min.js), just add \".last()\" in \"cmb.addAjaxRow\" function when calculating prevNum, between the find() and data() :\n```\ncmb.addAjaxRow = function( evt ) {\n    evt.preventDefault();\nvar $this         = $( this );\nvar $table        = $id( $this.data('selector') );\nvar $emptyrow     = $table.find('.empty-row');\nvar prevNum       = parseInt( $emptyrow.find('[data-iterator]').last().data('iterator'), 10 );\n\n...\n}\n```. ",
    "ahm-3d": "i am getting the same issue but when i use it in a created Theme Options page which calls the function below:\n```\nfunction theme_options_metabox($metabox_id, $key) {\n$prefix = 'theme';\n$cmb_options = new_cmb2_box( array(\n    'id'      => $metabox_id,\n    'title'   => 'Theme Options',\n    'hookup'  => false,\n    'show_on' => array(\n        'key'   => 'options-page',\n        'value' => array( $key )\n    )\n) );\n$group_field_id = $cmb_options->add_field( array(\n    'id'          => $prefix . 'demo',\n    'type'        => 'group',\n    'description' => ( 'Generates reusable form entries', 'cmb2' ),\n    'options'     => array(\n        'group_title'   => ( 'Entry {#}', 'cmb2' ),\n        'add_button'    => ( 'Add Another Entry', 'cmb2' ),\n        'remove_button' => ( 'Remove Entry', 'cmb2' ),\n        'sortable'      => true,\n    ),\n) );\n$cmb_options->add_group_field( $group_field_id, array(\n    'name'       => __( 'Entry Title', 'cmb2' ),\n    'id'         => 'title',\n    'type'       => 'text',\n) );\n}\n```\nwordpress version: 4.2.2\nCMB2 version: 2.0.6\n. ",
    "pmgarman": "Testing in IIS7.5 everything is working as expected. Going to test further with Apache on Windows to see if that breaks it somehow.\n. I think this could be simplified further looking at it (also just ran into needing a non repeatable group). Passing $repeatable into render_group_row() shouldn't be needed since $field_group is already being passed and the value can be accessed with $field_group->args( 'repeatable' )\n. ",
    "alanef": "I get this issue developing on XAMPP -  PHP_OS: WINNT\nAble to fix it on dev using \nadd_filter( 'cmb2_meta_box_url', 'filter_cmb2_meta_box_url', 10, 2 ); \nfunction filter_cmb2_meta_box_url( $cmb2_url, $cmb2_version ) { \n        return \"/wp-content/plugins/my-plugin-name/admin/CMB2/\";\n}\n\nBut would be nice not to. Thank - the str_replace is a good idea.  Its a Windows mklink that caused the issue. Which is fine but measn as I use sym links on my dev PC I have different code between syaging and dev.\nI have worked around this by having a 'dev tools' plugin to sort it out only on dev sites\n. The problem is slightly worse than explained, as any options page will show double notices, not just CMB2  as the if statement catches them all.   I'm running my code in two of my plugins - so far so good.. If I'm reading the new code correctly, the updated message now can be overridden by a callback? If so that is neat, as I was trying hard to achieve that too, as often a setting change performs a function ( like clearing data ) on update / save.. ",
    "harryfinn": "Thanks for your comments - Yeah I'd had a look and thought that I could probably add in a limiter with some JS based on the data attribute you've also highlighted, just wondered if there was already a way to do it! :smiley: \nI'll post up my working JS later in case anyone else wants a similar thing and/or for the dev's to take a look at if they get a chance :smile: \n. ",
    "sr4136": "I could benefit, and see others benefit to having a repeatable limit, where for example (as below) 'limit' => 4 would let the user add up to 4 sets.\n$group_field_id = $cmb->add_field( array(\n    'id'          => $prefix . 'repeat_group',\n    'type'        => 'group',\n    'description' => __( 'Generates reusable form entries', 'cmb' ),\n    'options'     => array(\n        'group_title'   => __( 'Entry {#}', 'cmb' ), // since version 1.1.4, {#} gets replaced by row number\n        'add_button'    => __( 'Add Another Entry', 'cmb' ),\n        'remove_button' => __( 'Remove Entry', 'cmb' ),\n        'sortable'      => true, // beta\n        'limit'         => 4\n    ),\n) );\n. ",
    "kabala": "Thank you very much for the solutions. You're great man :D\n. ",
    "Benoti": "That right, but I have already verify these points, but every definitions and names are differents.  I will do it again soon to be sure...\nAnyway, Thx for your idea.\n. I just post two gits, it's just a part of the code of the the plugin. \nhttps://gist.github.com/9f95369194f68bc04b49.git\nhttps://gist.github.com/72f7ce5c302863a0bc83.git\nYou'll able to identify the good and the bad.\nMy first method was with cmb2 in my plugin, as it didn't work, now it use the cmb2 plugin (that I update yesterday).\n. Hi. But this code must be load in a script style tag in your code as it's a css proprety. \n. ",
    "DannyOutlaw": "I think Im getting closer. STill not sure what is missing.  The code below hides the logo even when the checkbox is not checked\nPHP\n<?php if($wpex_hide_logo = get_post_meta( get_the_ID(), 'wpex_text', true )) {echo \"#logo {display:none !important;}\";} ?>\n. ",
    "bryceadams": "@jtsternberg you sure? I did it like this because __DIR__ is meant to be faster as it's evaluated at compile-time rather than execution-time (like dirname( __FILE__ )). ref: http://stackoverflow.com/questions/2749416/is-there-any-difference-between-dir-and-dirname-file-in-php\n. OK sure no prob :-) will fix up first thing in the morning. Thanks for your great work on it!\nBest,Bryce\nOn Mon, Dec 22, 2014 at 10:24 PM, Justin Sternberg\nnotifications@github.com wrote:\n\nI'm sure, but thank you for your consideration. This is meant to be an example file to demo CMB2. The confusion for some of the low-level users is not worth the micro-savings. By all means, use __DIR__ in your own projects.\nReply to this email directly or view it on GitHub:\nhttps://github.com/WebDevStudios/CMB2/pull/129#issuecomment-67848783\n. @jtsternberg there you go :)\n. \n",
    "pooyaa": "yes i use  Sample function for getting and outputting file_list images\ni want use this for image slider\nthis code generator \n<img src=\"IMAGE URL\" class=\"attachment-small\" alt=\"example\">\nbut i want to generate \n<a href=\"IMAGE URL\"><img src=\"http://localhost/\" class=\"attachment-small\" alt=\"example\"></a>\nis it possible?\n. woooooow\nso thanks a lot\nbest and hot regards\nveeeery goooooooood\nyou are BEST\n. ",
    "wearesupa": "Silly me, many thanks.\nI guess I could use https://github.com/WebDevStudios/CMB2/wiki/Adding-your-own-field-types#example-2-taxonomy-dropdown-store-term_id and produce the desired results with the above markup?\nThanks again\nMichael\n. ",
    "mrtwebdesign": "I didn't detail what when wrong when I tried file in a repeatable group. It was ignoring 'allow' => array( 'attachment' ),.  Some of my clients are very intelligent and sophisticated. Some will break anything that isn't nailed donw. Having an editable url after they attach an image is just asking for trouble.\nI didn't file a bug report on that since the documentation noted that file in a group is \"* Not available as a repeatable field\".  Now that I re-read that, it doesn't say it's not usable inside a repeatable group. But what about the allow parameter? I was still getting the url form field and no ID was stored. I wasn't even trying to get it to display right away. I was using print_r to show me the entire object that the group was building. It was just storing the url and no attachment id.\n$entries = get_post_meta( get_the_ID(), '_apcorp_home-slides', true );\nprint_r($entries);\n. I think I may be having this issue. I'm using this to allow a client to set a portrait featured image so I want the preview to reinforce that it really needs to be a tall image.\nOn initial file selection, the image is tall and matches the preview size set. After the post is updated, the image is actually loading the full-size original image. I've tried both the image name as well as the array of dimensions. They both worked after selection but not after update.\nAfter image selection:\nhttps://www.dropbox.com/s/bdh4hah17ncb3ph/Screenshot%202018-01-17%2022.03.40.png?dl=0\nAfter post update:\nhttps://www.dropbox.com/s/x51a9fkymuynehr/Screenshot%202018-01-17%2022.04.04.png?dl=0\ncode that defines the metabox:\n```\nadd_action( 'cmb2_admin_init', 'ine_register_portrait_metabox' );\nfunction ine_register_portrait_metabox() {\n$prefix = 'ine_portrait_';\n\n$cmb_portrait_featured = new_cmb2_box( array(\n    'id'            => $prefix . 'image-side',\n    'title'         => esc_html__( 'Portrait featured Image', 'cmb2' ),\n    'object_types'  => array( 'projects' ), // Post type\n    'context'    => 'side',\n    'priority'   => 'low',\n) );\n\n$cmb_portrait_featured->add_field( array(\n    'name'       => esc_html__( 'Tall image for vertical panels', 'cmb2' ),\n    'id'         => $prefix . 'portrait_featured',\n    'type'       => 'file',\n    'options' => array(\n        'url' => false,\n    ),\n    'text'    => array(\n        'add_upload_file_text' => 'Add File'\n    ),\n    'query_args' => array( 'type' => 'image' ),\n    //'preview_size' => array( 150, 225 ),\n    'preview_size' => 'tall_portrait_cropped_150',\n) );\n\n}\n```\nAnd just to be complete.. the image size I used. I did verify the specific image size file was built and available\nadd_image_size('tall_portrait_cropped_150', 150, 225, true );. This is also happening with textarea_code. reordering repeater groups does not reorder the contained textarea_code fields. I reported it in CMB2 plugin support. . ",
    "andy-tschiersch": "Sorry I've forgotten this detail in my description above, but i used the button and select the image from the media library. After is used the button, the preview shows the correct image. When i save the post, it shows the wrong image.\n. ",
    "BenRacicot": "@wpbean hey! Is there any way you could show me how you managed creating a front end post? I can't find anything on the subject anywhere.\n. Yeah I spent about an hour with that. Can't seem to get a grip on this project. Thanks for replying.\n. Woot woot JS. Can't wait, roll deep.\n. @jtsternberg I wrote mine from scratch and propagate CMB2 fields with data from raw url fields on the front end that I've validated myself. However if you ever do have the time to show me the basics I would be willing to write a seriously awesome tutorial for this with screencast etc... I'm getting some decent recognition for tutorials and plugins lately and would love to be the one to help you guys and the community out.\n. Hey @tnorthcutt thanks for helping out.\nSo I spent some serious time working through this code. I've added the recommended function to line 45 of CMB2_Show_filters.php directly under the public static get_show_on_key function. Then in my meta boxes:\n```\nadd_action( 'cmb2_init', 'function_register_leadership_metas' );\nfunction function_register_leadership_metas() {\n$prefix = '_function_leaders_';\n\n$cmb_leadership = new_cmb2_box( array(\n    'id'            => $prefix . 'metabox',\n    'title'         => __( 'Leader Information', 'cmb2' ),\n    'object_types'  => array( 'leaders', ), // Post type\n    **'show_on'     => array( 'key' => 'taxonomy', 'value' => array( 'leaders_cat' => 'leader') ),**\n    'context'    => 'normal',\n    'priority'   => 'high',\n    'show_names' => true,\n) );\n    $cmb_leadership->add_field( array(\n        'name' => __( 'Slider Thumbnail Image', 'cmb2' ),\n        'desc' => __( 'These are small images that once clicked move the slider to this leader\\'s slide.', 'cmb2' ),\n        'id'   => $prefix . 'thumb_image',\n        'type' => 'file',\n    ) );\n    // slide number for query's orderby\n    $cmb_leadership->add_field( array(\n        'name' => __( 'Slide Order', 'cmb2' ),\n        'desc' => __( 'Which slide number is this?', 'cmb2' ),\n        'id'   => $prefix . 'slide_order',\n        'type' => 'text_small',\n    ) );\n\n}\n```\nHowever the meta boxes are displayed on all posts of the specified post type leaders in any category.\nthe code example: taxonomy show_on filter sets  $post_id = 0;. Does that make sense? If not how do I grab the current post ID from the post.php edit screen? It seems this was a popular discussion around the original CMB. Any help would be amazing!\n. So sorry I missed that example! But thank you VERY much for commenting on this.\nThanks to you, the following worked perfectly to toggle metaboxes display based on if the current custom post was in a custom taxonomy:\njavascript\nfunction hide_if_not_leader( $cmb ) {\n    if ( !has_term( 'leader', 'leaders_cat', $cmb->object_id ) ) {\n        return false;\n    }\n    return true;\n}\nAnd using 'show_on_cb' to call it.\n. @JayWood for the in! Thanks, couldn't find this anywhere.\n. ",
    "wpbean": "@BenRacicot Check CMB wiki. There is a nice documentation for that. But I am not sure about the CMB2 yet.\nhttps://github.com/WebDevStudios/Custom-Metaboxes-and-Fields-for-WordPress/wiki/Create-New-Posts-Post-Type-Entries-Using-A-Front-End-Form\nThanks \n. ",
    "kidesigner": "Need help submit post using A Front End Form (with wordpress default title, featured image)\n. Thank you so much.\n. @BenRacicot can you help me? I very very need it now :( \n. @sinanisler thank my friend so much!! I think your way is so good. But, seem you don't use CMB2 shortcode to generate form or some CMB2 hook action?\n. @jtsternberg : When you publish tutorial Front-end submit? Please tell me because I have important project used CMB2 plugin. Please help me my friend.\n. Great, i feel i can't wait anymore.\n. @Strap1 : Thank you for your reply. I can wait, but I want to see his plan I was determined to get time to complete my project.\n. It' working! Thank @jtsternberg \n. I also have same problem. \n. you've solved the problem yet? Please teach me, thank you so much!\n. I think it's will working with your way, but seem this isn't right way. Thank you so much. How i can contact to you with skype? I want ask you something\n. Added\n. ",
    "sinanisler": "hey kidesigner whats up ! :smile: \nHere working form  with image support. \nYes it has so many features I dont have time to clear that up for you take this and make it for your own use. It is not making featured but it is ataching on post so you can do whatever you want. \nForm: \n``` html\n            \n            <textarea class=\"i2\" name=\"yorumunuz\" placeholder=\"comment\"></textarea>\n            <input type=\"text\" name=\"title\" class=\"i1\" placeholder=\"Title\">\n\n            <label class=\"i4\">\n            Resim <input type=\"file\" name=\"resim\" placeholder=\"Resim Se\u00e7\">\n            </label>\n\n            <input type=\"submit\" value=\"G\u00f6nder\"   class=\"i3\">\n        </form>\n\n```\nPHP\n``` php\n        <?php if ( is_user_logged_in() ) { ?>\n        <?php if (! empty($_POST)){ ?>\n            \n    if(isset($_POST['yorumunuz'])){\n        $yorumekle = array(\n          'post_title'    => strip_tags($_POST['title']),\n          'post_content'  => strip_tags($_POST['yorumunuz']),\n          'post_status'   => 'publish',\n          'post_author'   => $girisyapankullanici->ID,\n          'post_type'     => 'yorum'\n        );\n\n        $yorumPOSTid = wp_insert_post( $yorumekle );\n\n\n\n        if($_FILES[\"resim\"][\"type\"] ==\"image/gif\" or $_FILES[\"resim\"][\"type\"] ==\"image/png\" or  $_FILES[\"resim\"][\"type\"] ==\"image/jpeg\" ) {\n\n            if(!empty($_FILES[\"resim\"])) {\n                $uploads = wp_upload_dir();\n                $fileName    = $_FILES[\"resim\"][\"name\"]; \n                $fileTmpLoc  = $_FILES[\"resim\"][\"tmp_name\"];\n                $uzanti = pathinfo($fileName, PATHINFO_EXTENSION);\n                $remove_these = array(' ','`','\"','\\'','\\\\','/');\n                $fileName = str_replace($remove_these,'', $_FILES['resim']['name']);\n                $newname = time().'-hepyorum.'.$uzanti;\n                $pathAndName = $uploads['path'].'/'.$newname;\n\n                $moveResult  = move_uploaded_file($fileTmpLoc, $pathAndName);\n\n                if ($moveResult == true) {\n                    // echo \"File has been moved from \" . $fileTmpLoc . \" to \" . $pathAndName;\n                    $resimadresi = 'http://www.hepyorum.com/'.substr($pathAndName, 27);\n                    // add_post_meta($yorumPOSTid, 'resim' , $resimadresi, true );\n\n                    $filename = $pathAndName;\n\n                    $parent_post_id = $yorumPOSTid;\n\n                    $filetype = wp_check_filetype( basename( $filename ), null );\n\n                    $wp_upload_dir = wp_upload_dir();\n\n                    $attachment = array(\n                        'guid'           => $wp_upload_dir['url'] . '/' . basename( $filename ), \n                        'post_mime_type' => $filetype['type'],\n                        'post_title'     => preg_replace( '/\\.[^.]+$/', '', basename( $filename ) ),\n                        'post_content'   => '',\n                        'post_status'    => 'inherit'\n                    );\n\n                    $attach_id = wp_insert_attachment( $attachment, $filename, $parent_post_id );\n                    require_once( ABSPATH . 'wp-admin/includes/image.php' );\n\n                    $attach_data = wp_generate_attachment_metadata( $attach_id, $filename );\n                    wp_update_attachment_metadata( $attach_id, $attach_data );\n\n                    $resimadresi = wp_get_attachment_url( $attach_id );\n\n\n                } else {\n                    // echo \"ERROR\";\n                }\n\n\n            }\n\n        }\n\n\n\n    }\n\n    ?>\n\n```\n. ",
    "bigevent": "I am sorry but I have no idea about this code. Is it because I forked the\ncode? I did it by accident. I am having problem on using CMB2 for creating\nfront end form with wordpress. Please let me know if you are familiar with\nthe front end form with the CMB2.\nThank you.\nJo Daekyung\nOn Sun, Jan 11, 2015 at 4:42 PM, John Funk notifications@github.com wrote:\n\nI looked into the CMB2_Types class to find the $field_type_object->input\nused in your example. I noticed that there is only a method for input and\ntextarea. Is there a recommended away to do the \"multiple fields in one\"\nwith checkboxes, radio buttons, etc?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/142#issuecomment-69512954.\n. \n",
    "joshuadavidnelson": "I just did something similar to this for a sortable group field, because I'm connecting the group fields to other post types/meta and need something to reference other than the index. My solution was to create a hidden field with a unique id that is set once, and place this as a field in my group. You'll have to add some css to hide the input on the admin side, but here's the custom field:\n``` php\nadd_filter( 'cmb2_render_unique_id', 'cmb2_render_unique_id', 10, 5 );\nadd_filter( 'cmb2_sanitize_unique_id', 'cmb2_sanitize_unique_id', 10, 3 );\n// render unique id\nfunction cmb2_render_unique_id( $field_args, $escaped_value, $object_id, $object_type, $field_type_object ) {\n    echo $field_type_object->input( array( 'class' => 'cmb2_unique_id', 'type' => 'hidden' ) );\n}\n// sanitize the field\nfunction cmb2_sanitize_unique_id( $override, $new, $object_id ) {\n    // Set unique id if it's not already set\n    if( empty( $new ) ) {\n        $value = uniqid( $object_id, false );\n    } else {\n        $value = $new;\n    }\n    return $value;\n}\n``\n. I've also seen this happen using the admin options page. I just tried with trunk and it's still slashing. I wasn't able to get the'escape_cb' => 'stripslashes_deep'solution to work for me.\n. I was able to get [this solution](https://github.com/WebDevStudios/Custom-Metaboxes-and-Fields-for-WordPress/issues/518#issuecomment-42781594) to work for wysiwyg (changing the filter prefix, of course, tocmb2_`), but textarea's not so much\n. I'm seeing this issue with text fields as well now, though applying that same filter seems to fix it.\n. I'd love to see this as an option on all serialized meta, to allow for querying posts based on a meta values (even serialized meta within a repeatable group). That probably sounds crazy, but it would drastically simplify the querying of meta values.\n. Be careful: http://www.wikiwand.com/en/Year_2038_problem\n. No, either way, if you save a timestamp value great than 2147483647 (Jan 19, 2038) it could result in issues later when you try to retrieve it. So, if you're adding years to the date range I'd limit it to 2037.\n. \ud83d\udc4d I'll try it out later tonight!\n. Awesome stuff, thanks!\n. Data from a multicheck (or select, group, etc) is stored as a serialized array in the meta value. So, to use it you need to put it in a foreach and use the data. Something like this:\nphp\n$array= get_post_meta( $post_id, 'prefix_meta_key', true );\nif( $array ) {\n    foreach( $array as $key => $value ) {\n        echo 'This is the value: ' . $value . ' for this key: ' . $key; // or whatever else you want to do with the data\n    }\n}\n. This looks to be working now, thanks!\n. Looking through the code I'm guessing I'll need to handle this via a WordPress filter/hook for the uploads, instead of on the CMB2 side.\n. http://wordpress.stackexchange.com/questions/35657/how-to-add-more-upload-directories/35715#35715\n. Does it need to be a different field type or could it just be an option on the typical radio type?\n. I'm spit-balling here, but it looks like this is set by the $wp_locale class settings, see the text_money CMB callback function. So, this might be as simple as changing your Site Language in Settings > General. However, it looks like CMB2 currently removes the thousands separator and forces the decimal point in the same function. You might have to filter the value displayed and perform a similar str_replace - or create your own field and perform a similar method of sanitization for the thousand mark and decimal point.\n. Perhaps it's an odd one. I was updating a branch of a project that was missing CMB2_Taxonomy yet it was being called somewhere else (perhaps from an update in another part of the branch) and, in debug mode, it threw an error. I saw the error, this fixed it [hulk smash]. Totally fine to ignore if you think it's overkill :bowtie:\n. You're looking to add fields to a taxonomy (category/tag), right? Check out CMB2_Taxonomy (be sure to use the current github repo directly, the current/previous official releases are missing a critical function_exists check that breaks in WP 4.4, since term meta is now in core). \n. :+1:\n. @rob-ot-dot-be see: https://github.com/WebDevStudios/CMB2/blob/trunk/example-functions.php#L525\n. Is there only one category with posts in it? By default get_terms hides empty terms.\n. You should be able to grab the image id from the file list (see the wiki), from there set the size of the image you want.\nIf you're hoping to have a image resized on upload, you can do that with the WP built-in add_image_size.\n. I was having the same issue on a custom taxonomy, the field wouldn't populate (though it appeared to save the data to the database). PR #763 fixed the issue.. ",
    "Mamaduka": "@jtsternberg yeah was thinking about the same case.\nWe have two option here:\n- Use only one type value for 'before_field'.\n- Add check to text_money using CMB2_Field::maybe_callback() method and prefix input based on use case.\n. ",
    "victorpetryk": "Same Issue. I have created repeatable Text field, and when Post is updated, it generated one text field with \"Array\" value. And so the circle, at each update Post generated another field.\n. ",
    "buniden": "I'm having this problem as well.  Is this a bug or a set up issue?  \n. That fixed the issue for me.  I'm using a repeatable text field in an options page with a custom sanitization_cb to remove the backslashes.\n. Hi, does any one have any idea about this?\n. ",
    "TheNewGuy16": "So I am still having a problem with radio buttons in group fields.  I have a repeatable group field that assigns a layout with a radio button and all i want is for the radio buttons default to be checked so that the conditional statement would be true and the second wysiwyg field wont be showing.  I am using cmb2 conditional for that part.  So basically when you click the add new entry button in the group field the radio button is blank and the second wysiwyg field is showing but if click update page the radio buttons default gets check and the second wysiwyg field goes away. and then if you choose two columns it appears and again disappears if you select one column radio button so the conditionals are working but how do i get it to be set when add a new entry is clicked?\nhere is my code for the group field \n```\n$group_field_id = $cmb->add_field( array(\n        'id'          => $prefix .'_section_content',\n        'type'        => 'group',\n        'description' => esc_html__( 'Add some sections', 'cmb2' ),\n        'repeatable'  => true, \n        'options'     => array(\n            'group_title'   => esc_html__( 'Section Entry {#}', 'cmb2' ), \n            'add_button'    => esc_html__( 'Add Another Entry', 'cmb2' ),\n            'remove_button' => esc_html__( 'Remove Entry', 'cmb2' ),\n            'sortable'      => true,\n            'closed'     => true,\n        ),\n    ) );\n    $cmb->add_group_field( $group_field_id, array(\n        'name'         => esc_html__( 'Section Layout', 'cmb2' ),\n        'desc'         => esc_html__( 'choose whether this section will be full width or 2 columns', 'cmb2' ),\n        'id'           =>'_width',\n        'type'         => 'radio',\n        'options'          => array(\n            'col-xs-12' => esc_html__( 'Full Width', 'cmb2' ),\n            'col-xs-12 col-sm-5'   => esc_html__( 'Two Columns', 'cmb2' ),\n        ),\n        'default' => 'col-xs-12',\n    ) );\n$cmb->add_group_field( $group_field_id,  array(\n    'name'         => esc_html__( 'Text Content for column one', 'cmb2' ),\n    'desc'         => esc_html__( 'add text content', 'cmb2' ),\n    'id'           => '_text_one',\n    'type'         => 'wysiwyg',\n) );\n\n$cmb->add_group_field( $group_field_id,  array(\n    'name'         => esc_html__( 'Text Content for column two', 'cmb2' ),\n    'desc'         => esc_html__( 'add text content', 'cmb2' ),\n    'id'           => '_text_two',\n    'type'         => 'wysiwyg',\n    'after_field' => \"<input name='second_column' type='hidden' id='columns'\n                      data-conditional-id='\".wp_json_encode( array( $group_field_id, '_width' ) ).\"'\n                      data-conditional-value='col-xs-12 col-sm-5'>\",\n    'attributes' => array(\n        'required'               => false, // Will be required only if visible.\n        'data-conditional-id'    => wp_json_encode( array( $group_field_id, '_width' ) ),\n        'data-conditional-value' => 'col-xs-12 col-sm-5',\n    ),\n) );\n\n```\nAny help would be great.\nThanks. yeah they are the conditional-id and the conditional-value fields in the\ncmb2 markup.  and for the wysigwyg editor i found that you have to add a\nafter_field markup as well to get it to hide and show it.. I mean if there isn't a way to override its fine.  Since when you are\nfilling out a section the user should check one or the other  radio buttons\nfor columns which in turn would hide or display the wsiwyg editor.   I was\njust looking for a solution so that i could set a default in case the user\ndidnt check the radio button. but even if the default radio button stayed\nchecked i am not sure it would hide the wsiwyg editor untill the page was\nsave anyway....So maybe a better option would be to hook into the update\npage button when the add new row button was clicked that would select the\ndefault radio button and hide the wsiwyg editor.. So what would be best practice here would you make a special sanitation callback to only allow the tags you wanted?  Like i just want to allow  tags.. yeah its working very well there are some buggy stuff but found work arounds for all of them. ",
    "kynetiv": "+1 this fixes the radio swapping issue for me. Hopeful this can get merged in.\n. Well, need to figure out how these tests are working so it can pass, but also found that there is a bug to fix when there are multiple radio options on the second subsequent new row. Will update this in a bit.\n. ",
    "LOL2011": "Thats great, thanks for clarifying.  I have it working now.\n. CMB2 wasn't ready when I started this project.  I have tried to switch to CMB2 but had difficulties and due to limited time on this project I decided to stick with the previous version as it all works fine apart from this weird image issue.  Have you any idea what it could be or have any tips on how to prevent this from showing?  Im desperate to get this project finished and would be really grateful for any help. \n. Ok, Thanks for your help.\n. I have the exact same issue with a front end form.  @vasikgreif that is exactly what I was looking for thanks :)\n. No problem, thanks for pointing me in the right direction.\n. This is so frustrating.   I just need a point in the right direction.  You have a blog post that provides instructions on how to create a front end form which i have followed. I have invested a lot of time and effort in getting it all working and now feel totally abandoned.  By closing this so soon you have ensured no one else can help me either.\n. Ok I understand.  It may be useful to document the other channels for support.  Many Thanks.\n. You mentioned, \"There are several other channels you can try\".  Exactly what are these channels?     I have tried all links you have supplied on the contributing page and none are of any use to my query.  Where are people to go to for support and to share their issues?  The contributing page does not list this. I have now posted my query on http://wordpress.stackexchange.com/ so fingers crossed someone can help.  Thanks.\n. Yes thanks. Sorry for missing those links earlier.\n. This function works fine when I assign $title = 'Test title'; so it sounds like it is the hook and priority issue you mentioned.  Can you elaborate on the solution for this, how exactly would I make the post_title equals the ID of the field?  What would be the syntax?  Thanks\n. ahhh, never thought of that, thanks for your help.\nwp_update_post( array( 'ID'=>$post_id, 'post_title'=>$_POST['_cmb2_name']) );  also works..\n. ",
    "keepyourreceipt": "+1\n. ",
    "carasmo": "+1\n. +1\n. Will this be added in the latest CMB2 plugin? It's making a blank line if you're in visual mode.\n. This works smoothly but any pre code disappears in the CMB2 wysiwyg editor. In the visual editor, I add the html with > etc., and put a pre around it, just like in the regular visual editor and save then it's gone. If I do the same in just the text editor, it is fine as long as I don't switch back. Very odd.\n. +1\ncontact@webdevstudios.com \n\n. I sent you want I would have spent on ACF for a single site I'm working on, my own. I also bought ACF and Elliot is really nice, but I really want something that I can use without a commercial plugin, the file_list is GREAT as a gallery and the hybrid group is awesome for repeating fields. Wish there was drag and drop and the tiny_mce thing with the repeater would work better, but still it's an amazing library. Thank you deeply.\n. Serialized search & replace tool by interconnect/it saved my tushy last week, it's very good and easy to use.\n. +1\n. Okay, the last attempt was totally messed up. I just tested this one. https://gist.github.com/carasmo/8c7aa4c6d94517fc4c7d. This was for a page-test.php file, adjust as needed.\n. I figured out another way by assigning the image to a category in the media library then using a regular ole loop of the posts.\n. I use:\nhttps://christinacreativedesign.com/fast-and-free-wordpress-database-migration-without-losing-serialized-data/\nhttps://interconnectit.com/products/search-and-replace-for-wordpress-databases/\nVery easy. Takes a few min. \n. ",
    "aroscoe82": "+1\n. ",
    "widoz": "+1\n. @arippberger you can simply add 'sanitization_cb' as argument, the following parameters will be passed to the callback : $meta_value, $this->args() ( the field arguments ) and $this ( the field object ), so you can get whatever you need.\n. Hi,\nThanks for the respond. The user content attributes doesn't suggest a use of the \"class\" directly to the input. \nWhat about the fields arg on new_cmb2_box call? It's work and use add_fields method.\n. Thank you so much.\n. Fatal error: Call to undefined function cmb2_get_option()..... on line 189.\nProbably you haven't hooked your code within init or cmb2_init / cmb2_admin_init. The cmb2_get_option is available during the init action.\n. Uhm, honestly I don't know, I should view the code.\n. Follow.\n. I think there is no way to have a different value for the name attribute without encountering issues using a custom field type. The attribute name defined within the 'attributes' argument will overwrite the field '_name' property. \nSo I cannot have the id with scores and name with underscores or within a sub array element.\n. Hello @tw2113, \nNo workarounds right now, I need a moment or two to study the plugin better. \nI guess accomplishing that means rewrite part of the _name and _id properties and I'm not sure will be convenient. Mine was to get my css selectors the same ( using bem for example ) of classes, but keep the names of the input with underscore 'cause them are used as array keys.\nps. sorry for the english. \n. @jtsternberg for custom fields yes, sorry me I missed to tell you that I'm currently using cmb2 only for form fields and not for post meta, so I have my own sanitize/validation classes and generally works with the name attributes with underscore 'cause them are keys of an array.\nBy the way, I think to change it take a lots of work and would mean redefine how the classes and fields works.\nJust a question if it were possible.\n. Thanks, but I'll must override every field to achieve that with all fields?\n. Hi, thank you for support on this, after some research I realized that since the id's are more useful in javascript I'll keep the underscore.\nThanks again for this great plugin.\n. @Kudratullah The gist is a 404.\n. ",
    "EldonYoder": "+1\n. ",
    "antonkor": "+1\n. ",
    "kish2011": "+1\n. ",
    "andymb": "+1\nAny news on this? Thanks.. ",
    "adriantoll": "Hi @tw2113 - is there a rough ETA for this? We could really use this feature and are thinking about hacking something together in the interim, but only want to do that if it's not something you guys are actively working on.. @tw2113 OK, thanks. It was because Justin's comment was 2.5 years old that I thought progress may have been made on that side of things - we'll see what we can do.. Hello @lipemat - just trying this out, but my main use case is repeatable group fields. I've tried this and it doesn't seem to work for groups. Looking at the code that seems to make sense because cmb.makeRepeatableSortable() only references .cmb-field-list and .cmb-repeat-row. Great that you're working on this, so this isn't a criticism at all, but just wanted to make sure that what I've said is correct?. OK - thanks for the clarification. I didn't realise fields weren't sortable at all because I've always done it with groups...\n\nOn 7 Jun 2018, at 16:26, Mat Lipe notifications@github.com wrote:\nHi @adriantoll https://github.com/adriantoll\nBecause repeatable groups already have support for ordering I have not done any work on making them drag sort-able.\nSounds like that would be a nice enhancement. Probably deserves it's own pull.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub https://github.com/CMB2/CMB2/pull/1142#issuecomment-395462455, or mute the thread https://github.com/notifications/unsubscribe-auth/ABYnOdybRLZOKV2OAfSsymlzNHPEhEt6ks5t6UZBgaJpZM4UWn3f.\n\n\n. @lipemat I've tested this on a local copy of a live site and it's working beautifully with no console errors. Nice one!. I can't replicate that on my local installation. I don't have something like Dropplr to share my screen, but I'm using a simpler group than @jtsternberg with just a single dropdown in each group. Replicated the exact order - start with two items (1,2), move group 2 to the top (2,1), add third group (2,1,3), save page - and it stayed as it was before saving (2,1,3).. @jtsternberg I didn't explain myself well - that's what I'm doing. Here's a video: https://www.dropbox.com/s/j9cw761dtndw60z/cmb2draggable.mov?dl=0. ",
    "lipemat": "I submitted a pull request just now which adds this support. ^\n. Closed due to realizing forked repo no longer exists. Created a new pull from the new repo.. Hi @adriantoll \nBecause repeatable groups already have support for ordering I have not done any work on making them drag sort-able. \nSounds like that would be a nice enhancement. Probably deserves it's own pull. \n. Hey @adriantoll ,\nI decided I liked your suggestion very much so I created a pull request to make groups drag sortable.\n1145\nTogether these features make the UI pretty slick. \n. I took another run at this and have so far been unable to recreate the issue. Every combination of fields, sorting, adding, sorting that I have tried has saved and ordered properly. \nThere must be some variation that I'm not finding. Maybe a particular field type or argument?. I spent a couple more hours trying to recreate the issue to no avail. I have also been using this drag sorting on a couple projects without any reported issues.\nPerhaps, if someone could provide the configuration they are using to register the fields I could input the exact configuration to recreate? . @tw2113 Yes. Sorry about that :) I was testing against another branch and must have pushed. I have now cleaned up this feature branch. . > Fixed with #1142, so should be closed?\n1142 Was just for single fields. This branch ads support for groups as well.\n@jtsternberg Not sure how I missed your comment :(. This branch has was cleaned up last fall is ready for you to take another pass at. . If we move it up into the switch, it won't work for any of the alternate contexts. Letting it run outside the switch ensures that it will run no matter which context is selected and in cases where there is only an alternate context used. \ud83d\ude04 . The different possible positions of the post editing screen. For instance if you add some fields to 'after_title' and want to remove the default taxonomy meta box (because you added a new field which contains a more appropriate way to set a term for your use case). I found some time to flatten this even further to make it easier to test against :)\nThis is a drop-in which will register a group and add an image and caption as a repeatable table row.\n```php\nfunction render_table_row_callback( $field_args, \\CMB2_Field $field_group ) {\n    $cmb = CMB2_Boxes::get( $field_group->cmb_id );\n    $group_val = (array) $field_group->value();\n    echo '';\n?>\n<tr class=\"cmb-row\">\n    <th>&nbsp;</th>\n    <?php\n    foreach ( $field_group->args( 'fields' ) as $_field ) {\n        echo '<th>' . esc_html( $_field['name'] ) . '</th>';\n    }\n    ?>\n    <th>&nbsp;</th>\n</tr>\n<?php\n\nif ( ! empty( $group_val ) ) {\n    foreach ( $group_val as $group_key => $field_id ) {\n        render_group_table_row( $field_group );\n        $field_group->index ++;\n    }\n} else {\n    render_group_table_row( $field_group );\n}\n\necho '</table>';\n\nif ( $field_group->args( 'repeatable' ) ) {\n    echo '<div class=\"cmb-row\"><div class=\"cmb-td\"><p class=\"cmb-add-row\"><button type=\"button\" data-selector=\"' . esc_attr( $field_group->id() ) . '_repeat\" data-grouptitle=\"{#}\" class=\"cmb-add-group-row button-secondary\">' . esc_html( $field_group->options( 'add_button' ) ) . '</button></p></div></div>';\n}\n\necho '</div></div></div>';\n?>\n<style>\n    .cmb-group-table th,.cmb-group-table.cmb-group-display-row .cmb-table{border-top:#DFDFDF solid 1px}.cmb-group-table table{width:100%}.cmb-group-table td:last-child,.cmb-group-table th:last-child{border-right:#DFDFDF solid 1px}.cmb-group-table td,.cmb-group-table th{border-left:#DFDFDF solid 1px;border-bottom:#DFDFDF solid 1px;padding:8px!important;vertical-align:top;text-align:left}.cmb-group-table.cmb-group-display-row td{padding-bottom:0!important}.cmb-group-table-control{width:16px;padding:0!important;vertical-align:middle!important;text-align:center!important;background:#f4f4f4;text-shadow:#fff 0 1px 0}.cmb-group-table .cmb-group-table-control a{float:none!important;display:block!important;margin:5px 0!important;text-align:center!important}.cmb-group-table-control a,.cmb-group-table-control h3{color:#aaa!important}.cmb-group-table-control a:hover,.cmb-group-table-control:hover h3{color:#23282d!important}.cmb-group-table .cmb-group-table-control .cmb-remove-group-row{color:#F55E4F!important;margin-top:12px!important}.cmb-repeatable-group.sortable .cmb-group-table-control:first-child{cursor:move}.cmb-group-table .cmb-group-title{position:relative;background:0 0;margin:0!important;padding:0!important}.cmb-group-table th{width:auto}.cmb-group-table .cmb-repeat-group-field{padding:0!important}\n</style>\n<?php\n\nreturn $field_group;\n\n}\nfunction render_group_table_row( \\CMB2_Field $field_group ) {\n    $cmb = CMB2_Boxes::get( $field_group->cmb_id );\n    ?>\n    \n\n<?= esc_html( $field_group->replace_hash( '{#}' ) ); ?>\n\n\n            <?php\n        }\n    foreach ( array_values( $field_group->args( 'fields' ) ) as $field_args ) {\n        ?>\n        <td class=\"inside cmb-nested cmb-field-list\">\n            <?php\n            if ( 'hidden' === $field_args['type'] ) {\n                // Save rendering for after the metabox.\n                $cmb->add_hidden_field( $field_args, $field_group );\n            } else {\n                $field_args['show_names'] = false;\n                $cmb->get_field( $field_args, $field_group )->render_field();\n            }\n            ?>\n        </td>\n        <?php\n    }\n\n    if ( $field_group->args( 'repeatable' ) ) {\n        ?>\n        <td class=\"cmb-remove-field-row cmb-group-table-control\">\n            <div class=\"cmb-remove-row\">\n                <a href=\"javascript:void(0)\" type=\"button\"\n                   data-selector=\"<?= esc_attr( $field_group->id() ); ?>_repeat\"\n                   class=\"cmb-remove-group-row cmb-remove-group-row-button button-secondary cmb-shift-rows\"\n                   title=\"<?= esc_attr( $field_group->options( 'remove_button' ) ); ?>\">\n                    <span class=\"dashicons dashicons-no-alt\"/>\n                </a>\n            </div>\n        </td>\n        <?php\n    }\n    ?>\n</tr>\n<?php\n\n}\nadd_action( 'cmb2_init', function () {\n    $cmb = new_cmb2_box( [\n        'id'           => 'example',\n        'context'      => 'normal',\n        'object_types' => [ 'page' ],\n        'title'        => 'Example Box',\n        'priority'     => 'high',\n    ] );\n$cmb->add_field( [\n    'name'          => 'Table Group',\n    'id'            => 'wiki_test_repeat_group',\n    'type'          => 'group',\n    'desc'          => '',\n    'options'       =>\n        [\n            'sortable'      => true,\n            'closed'        => false,\n            'group_title'   => 'ITEM {#}',\n            'add_button'    => 'Add One',\n            'remove_button' => 'Remove One',\n        ],\n    'position'      => 5,\n    'render_row_cb' => 'render_table_row_callback',\n] );\n\n$cmb->add_group_field( 'wiki_test_repeat_group', [\n    'name'         => 'IMG',\n    'id'           => 'featured_image',\n    'type'         => 'file',\n    'desc'         => '',\n    'options'      => [\n        'url' => false,\n    ],\n    'position'     => 0,\n    'preview_size' => 'thumbnail',\n    'text'         => [\n        'add_upload_file_text' => 'Add image',\n    ],\n    'query_args'   => [\n        'type' => 'image',\n    ],\n] );\n\n$cmb->add_group_field( 'wiki_test_repeat_group', [\n    'name'     => 'Caption',\n    'id'       => 'caption',\n    'type'     => 'text',\n    'desc'     => '',\n    'position' => 1,\n] );\n\n} );\n```. Documentation completed for both Field Parameters and Rest Api . jQuery does a pretty good job of translating the closing bracket, but I'm not opposed to having it explicitly set :)\nI have now added the nodeName within closing. . ",
    "jeffryevans": "In my install, even though I have programmed the default values, when I click to create a new user, it defaults the fields to same selections as my account, instead of the defaults I programmed. I removed one of the values from my account, then clicked to create a new account, and the default value I programmed showed up. Please help.\n. I'm sorry but we are in production, and its a medium to large company, I don't want to risk a downgrade. If you can help I would really appreciate it, if not its okay. I appreciate your timely response!\n. ",
    "fpswebmaster": "I'm experiencing this issue as well (using the newest release 2.02) when upgrading from CMB 1.2.0 to 2.0.2 All Repeater Fields [text] are filled with the term \"Array\" and the error \"Array to String Conversion on...\".\nThis only happens if the field is empty, almost as if the initiation of the meta field on the given post is being stored as an array.\n. Understood, after a simple SQL script I was able to clean it out. And to be honest because it was just injecting \"array()\" into the blank fields, it wasn't effecting the functionality of the website since thats considered blank (for all of my IF (empty($VAR)) statement)\nThank you for the quick reply\n. ",
    "katielacy": "I am referring to the sanitisation the fields are not updating when clicking update user. I am using your fields not my own. I have tried this without the select2 type along with removing the loop above. \nI have also tried just using a text box and still no luck. \n. Thank you very much for your quick reply! I am sorry to be a pain but still no luck.... \nWhich version of Wordpress are you using?\n. Good Morning, \nI used the above code for my other CMB metaboxes loops and it fixed the problem! \nThanks so much for your help sorry to be such a nunsense :+1: \n. ",
    "clifgriffin": "@jtsternberg I think this is a safe change because we're only dealing with input.  Everyone who has input that is already badly escaped will have to fix it manually anyway. \nAs far as putting it in CMB2_Sanitize, I agree and have moved it thusly. \n. @jtsternberg I don't remember the specifics, but essentially WordPress core forces magic slashes for all form data. This is to provide consistency. \nSo stripping slashes universally should be safe.\nHowever, if the data is pre-slashed I could see an issue. This is obviously a non-standard use case. \nPerhaps we just need a filter that lets people override this behavior for specific scenarios?. @leewillis77 It appeared you were entering pre-slashed serialized data into a text field. That's what seems non-standard.\nYour note on the _metadata() functions is really interesting. It makes me wonder why this change was necessary in my implementation as it was certainly being stored in post meta or the like. \n(I wish my memory of two years ago was better). @jtsternberg How did you fix it out of curiosity?\nSounds like we need some unit tests. NOT IT. . ",
    "KienTrong": "+1,\nWould like a required condition like this: Display field base on user input, maybe dome via some JS:\nHere is what I'm using in ReduxFramework :\n\n array(\n    'id'       => 'custom_title',\n    'type'     => 'text',\n    'title'    => __('Custom Title', 'wpcharming'),\n    'subtitle' => '',\n    'desc'     => \"\",\n    'default'  => \"Get In Touch\",\n    'required' => array('show_custom_title','=',true, ),\n),\n\n@jtsternberg Thanks\n. ",
    "jcchavezs": "Hi @GregLancaster71, @KienTrong and @jtsternberg,\nI just published a plugin based on CMB2 which allows you to relate fields in the way you describe above: https://github.com/jcchavezs/cmb2-conditionals.\nAll feedback is welcome!\n. So no way to set it up globaly like date format?\n. I would expect to have a global currency for money. I do not see a conflict with other plugins and we should also consider that we are not talking about overriding all the text_money fields, we are talking about the default symbol in the backend which is not something relevant for the frontend as in the end you will format the value in the front end in the way you want (when it comes to decimals, currency and etc.)\nI hope you reconsider this issue.\n. > And you filtered it to be \u20ac or something, then the us_amount field would display a \u20ac instead of $.\nI would expect that a developer pass the currency symbol also for the default (by that time) currency because I can not be sure when the library will change. It is like not using get_the_date function because my date format is the same as the system's default or not using __ or _e if I expect my site to be in English.\n\nThat's exactly what your proposed cmb2_text_money_before_field_filter filter would do.\n\nYes, I was just remarking that.\n. Strange that the Travis CI build fails because of a youtube URL:\nExpected:     \"http|--->>://www.youtube.com/embed/EOfy5LDpEHo?feature=oembed\" frameborder=\"0\" allowf\n  Actual:   \"http|--->>s://www.youtube.com/embed/EOfy5LDpEHo?feature=oembed\" frameborder=\"0\" allow\n. Hi @jtsternberg,\nIs someone working on this issue? I would like to work on it.\n. ",
    "ryanhellyer": "Sorry. I have no idea what this documentation was referring to. It's too long ago now.\n. ",
    "jrfnl": "Hiya, I just ran into the same issue trying to get a field using one of the helper functions. I though the object id was the CMB2 object id or something along those lines.\nThe inline function documentation of the helper functions is what misled me. Hope that helps.\n. +1\n. I would advise against this change as disabled and/or readonly field attributes are often the initial state of a field, with the attribute(s) being removed via javascript if certain conditions apply.\n. I haven't looked at the CMB2 implementation of dealing with floats, but yes, the decimal point is defined by the locale used. This is not just a WP feature, but build into PHP like that.\nThis can be problematic when saving floats using one locale and retrieving them using another locale.\nFor display formatting, you're best off using the PHP number_format() function, the Intl extension NumberFormatter  class, the money_format() function or in the case of WP, you could consider using number_format_i18n().\nFor getting information on the settings for your locale, have a look at the localeconv() function.\nOh and for that matter - never use the normal calculation operators on floats, use the BCMath extension instead. For convenience you can use a wrapper function.\nAdditional ref: http://php.net/manual/en/language.types.float.php\n. Did you test with this branch or with the trunk / master  branch ? This PR (unfortunately) has not been merged in yet.\n. I've not worked with the cmb2-rest-api branch myself yet. Maybe @jtsternberg would be the better person to ask in this case.\nThe only thing I can say about it, is that by the looks of it the rest-api branch is a little behind the trunk branch (which now has is fix) and trunk would need to be merged in for the rest-api branch to also benefit from this fix.\n. > There are definitely some things to like about this concept, but as it is now, it could break backwards compatibility.\nCould you give me some examples of why this would break backward compatibility ? For radio and select fields, the options are 'fixed', so any option not in the options list would potentially be a XSS.\nAll I can think of is options dynamically added or removed via js which I believe would be rare. All the same, I've added a filter now to allow modifying the options array as used for validation.\nI'll gladly try and work round any other situations you can think of.\n\nit does not account for dynamically built/modified options arrays which would result from using the options_cb paramater. \n\nGood point. Fixed.\n. > Is there any reason to do this instead of doing things in JS, which is likely where you'll be wanting to use the extra attributes anyway?\n@jtsternberg This is for the CMB2 Conditionals plugin to allow for conditional groups. The attributes determining the conditions would need to be added for the js to be able to pick up on it.\n. Ah, there we go. It did feel very much like I was missing something, so good.\nLet me just change over this PR to using WP_Screen in that case, or would you rather receive a new PR for that ?\n. I'll just rebase & squash, no worries.\n. So this should only check for the edit comments and post pages ? Not term edit or user pages. Correct ? (where post is any post type)\n. No worries, in WP_Screen they are not very different, new items just have the add action.\nPR refreshed.\n. @jtsternberg That's weird, it shouldn't be.\nHmm.. just looked into it deeper. Looks like WP does not have all information for WP_Screen setup on the admin_enqueue_scripts hook, which is weird as the current_screen action has already run by that time.\nLet me play round with this a bit more to see which other info is available and usable for this situation.\n. Another weird thing I'm running into - looks like the do_scripts function - in my test set up - is actually being called 8 times, even though it looks like you've tried to prevent that by having the once method. So I guess there's a bug in the once method or is this not what you were trying to accomplish there ?\nIf you like, I can fix that too - just a simple matter of wrapping the add_filter within once within a has_filter call.\n. Ok, will do that in a separate PR.\nFor now, I've refreshed this PR with some code which should work on the admin_enqueue_script hook.\nThe scripts will load on add/edit pages, but not on the overview pages with the current code.\n. > I think it probably has something to do w/ the serializing of the func args and the $this in the callback being unique. Anyway, I think it would be good to fix the once issue.. possibly w/ something like a has_filter proxy method.\nYou're right, it does have to do with the $this being different objects.\nThe oembed handler actions are fine as they use the same object via the cmb2_ajax() function and the register_scripts method is fine too with it being a static method.\nIt's just the calls from post_hooks() and comment_hooks() which pass the object which are troublesome.\n. Sorry haven't had a chance to work on this lately. Will get back to it at some point though ;-)\n. > IMO, this processing should happen during the field registration process.\n@jtsternberg I know how it can be done during registration, that's not the point.\nThese filters are useful for CMB2-add-on plugins as well as making large changes quickly.\nSay, you've got ten metaboxes set up with some 150 fields. Instead of having to edit all the fields to make a change to a particular field type, you could now just filter them.\nI've currently got my setup organized so it will filter all arguments from all metaboxes before passing them to CMB2, but it makes a lot more sense to have such a filter in CMB2 instead of in each implementation.\n. Rebased, added filter documentation and changed the last argument as per suggestion.\n. If you insist, I'll take it out, but the reason I put it in was to be able to globally change some field arguments without having to duplicate the logic contained in the rest of the function.\nIf one changes it using the cmb_field_arguments filter at the end, the logic within the function would often still need to be duplicated.\n. @Taolou AFAIK the 'show_on' is supposed to work exactly like that, it is intended more to show certain metaboxes (or fields) on specific pages and not on others.\nI believe what you are looking for is the CMB2 Conditionals add-on which works with in-page conditions, though more on a field by field basis, i.e. show field B if field A has value x, though it could probably be made to work with metaboxes too.\n. Just thinking out loud:\nWhat about leaving the hidden fields empty/set to the last editing user/date, then adding the current user/date as data-attributes to the notes field and adding a js onchange event listener which will update the value of the hidden fields on change ?\n. > Would that work for new fields as well as existing ones?\nI believe it could - you'd need some logic somewhere to make sure the hidden fields are empty for new fields and contain the last editing user/date for existing fields.\n\nI'm also wondering if I can take advantage of the new cmb2_save_field hook.\n\nI haven't looked at that in detail, but I think that would only work if you would define it as a group field.\nYou need access to the old and new notes data to do a compare as well as access to the hidden fields to make the change if needed. AFAICS the cmb2_save_field hook runs on individual fields, so you wouldn't have access to all the necessary data if they are non-group fields.\n. Ok, done.\n. @stanleyjs I've been working on something similar. The select box is easy enough to implement with the taxonomy_select field type. The 'Add new' field can be implemented in a variety of ways and I'm still deciding which one to use.\nWill be happy to share the code I end up using or to discuss with you and decide how to go about it together ?\n. I'd wager a guess it has to do with the change in 4.5 mentioned here: https://developer.wordpress.org/reference/functions/get_terms/\nWhile this could of course be solved in CMB2, I believe this should be solved in core as this is a big backwards compatibility break..\nIt looks like they are trying to detect legacy arguments and correct them with incorrect results. So my tentative conclusion would be that the change in the arguments for get_terms() is not properly accounted for in WP core.\n. And you're right about that - that changeset changes something in how the deprecated argument is being handled, so could well be the culprit.\n. Looks like the fix has been committed to core: https://core.trac.wordpress.org/changeset/37599\n. Pro-tip:. Use wp_unslash() rather than stripslashes().\nAnd yes, @chrisgherbert is right, WP adds slashes, but it also removes those again for the fields in which it expects them, like post_meta, which is why this is not a problem there.\nFor options, they are not automatically removed as those are often updated programmatically.\nA simple and rather elegant way to solve this would be to add code along the lines of the below (replace {$option} with the name of your problem option):\nphp\nif ( isset( $_POST[ {$option} ] ) ) {\n    add_filter( \"sanitize_option_{$option}\", 'wp_unslash' );\n}\nThat way slashes will be stripped if the option is updated based on a form submit, but slashes won't be (double-)stripped when the option is updated programmatically.\nAs a side-note: you may want to add more comprehensive sanization of the received value(s), but that's up to you.\n. Yeah, I looked into that, but still haven't been able to figure out why it's not working. If anyone has some working example code, it would be awesome if it could be added to the wiki.\nOh and just in case nobody does: for now, I've resorted to using add_editor_style() with a custom stylesheet (which does work).\n. Thanks @tw2113 I'll have a read.\n. Ok, thanks for replying. I should have some time over the next few weeks, so will see if I can fix it (and some of the other open issues).\n. Oh - if anyone is interested, as a quick fix until this is fixed in CMB2 itself, this code will prevent the file *_id field being saved if no file was selected/uploaded:\n``` php\n// Note: this would be ignored if you would add your own sanitize cb in the field settings, so beware!\nadd_filter( 'cmb2_sanitize_file', array( $this, 'prefix_dont_save_default' ), 10, 5 );\n/\n * Filter the meta value before it is saved to prevent the default value being saved.\n \n * @param bool|mixed $override_value Sanitization/Validation override value to return. Defaults to null.\n * @param mixed      $value          The value to be saved to this field.\n * @param int        $object_id      The ID of the object where the value will be saved.\n * @param array      $field_args     The current field's arguments.\n * @param object     $sanitizer      This CMB2_Sanitize object.\n \n * @return null|string Null if the value should not be overridden, otherwise string.\n */\nfunction prefix_dont_save_default( $override_value, $value, $object_id, $field_args, $sanitizer ) {\n    if ( $field_args['id'] !== '_myprefix_my_file_field_id' ) {\n        return $override_value;\n    }\nif ( '0' === trim( $value ) ) {\n    return $override_value;\n}\n\n// Value is the same as the default, overrule the saving.\nreturn '';\n\n}\n```\n. > If I recall, you're pretty good about it, but please do keep the CONTRIBUTING.md in mind when submitting PRs. Thank you!\nThanks :blush:  Will re-read them - if I recall correctly I still have some half finished PRs locally too due to lack of time, so would be good to get all that finished and out of the way.\n. ",
    "ogdsgn": "Will do, sorry about that, new to this whole thing.\n. Hello All,\nI've run into this bug and haven't been able to resolve it using the PHP config vars.\nI have a Repeatable group which contains a repeatable text field. If I create one group everything works fine, however, when I make a second group with another 5 text fields - the data gets messed up on save.\n\nHere is the result after making a second group of the same # of text fields and saving.\nTo replicate:\n\nFirst group field - add 5 repeating text fields\nClick \"add group\" - add 5 repeating text fields\npublish the post\n\nWhen you refresh the page:\n- The second group only has 2 fields, \n- A 3rd, 4th, and 5th group is created with one text field each.\n- And there is a 6th empty group\n\nHere's the sample code:\n$group_rates_id = $cmb_shelter_rates->add_field( array(\n    'id'          => $prefix . 'rates',\n    'type'        => 'group',\n    'options'     => array(\n        'group_title'   => esc_html__( 'Rate {#}', 'cmb2' ), \n        'add_button'    => esc_html__( 'Add Another Rate', 'cmb2' ),\n        'remove_button' => esc_html__( 'Remove Rate', 'cmb2' ),\n    ),\n) );\n\n$cmb_shelter_rates->add_group_field( $group_rates_id, array(\n    'name'       => esc_html__( 'Custom Rate Details', 'cmb2' ),\n    'id'         => 'rate_details',\n    'repeatable' => true,\n    'type'       => 'text',\n) );\n\nThanks in advance!\n. Yeah, that was my fallback, just wanted to see if the repeater would be useable first.\ncheers!. I'm just guessing here, but upon some reading it looks like the post data I'm seeing is oEmbed cached postmeta records????\n. ",
    "jcamomile": "Hi Justin,\nThe reference you sent was for the oembed field. What I am saying is that\nwhen the iframe or share address is placed in the wysiwyg, it is expected\nthat they work the same as if they were in the_content, Or that there\nshould be some documentation saying that it should not be expected. I added\nseveral custom meta boxes to a client site and they had this expectation.\nMaybe it would suffice to a line to the documentation for the wysiwyg field\n(next to the line about applying wpautop) saying that to make video embeds\nwork, run your content through another filter. I could not find one that\napplies wp_oembed_get to content in the middle of a string so I tried\npassing it through the \"the_content\" filter. That had other problems,\nactually broke the site at WPengine. I made a function to do what I need\nbut would love to find a better one. Let me know if you have any\nsuggestions.\nThanks!\nJim\nOn Sat, Jan 31, 2015 at 8:44 AM, Justin Sternberg notifications@github.com\nwrote:\n\nCheck the documentation\nhttps://github.com/WebDevStudios/CMB2/wiki/Field-Types#oembed. It will\nnot display automatically since it simply saves as a url. You need to make\nsure the oembed filters are applied to it.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/166#issuecomment-72320369.\n\n\nJim Camomile\nLead Developer\nCastle Media Group, LLC\n512.914.8458\nwww.authormedia.com\n. Hi Justin,\nI will do that in the future. I am still a bit baffled at the wiki concept\nof editing docs for someone else's software, but I can get over that.\nThanks for the support on this. CMB2 is truly awesome.\nJim\nOn Mon, Feb 2, 2015 at 9:38 AM, Justin Sternberg notifications@github.com\nwrote:\n\nI apologize for misunderstanding. I added more to the documentation\nhttps://github.com/WebDevStudios/CMB2/wiki/Field-Types#wysiwyg. Keep in\nmind, the documentation is a wiki, so if you feel certain parts are not\nclear, you may feel free to edit them.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/166#issuecomment-72477511.\n\n\nJim Camomile\nLead Developer\nCastle Media Group, LLC\n512.914.8458\nwww.authormedia.com\n. Thanks for the extra documentation! This is really great!\n. ",
    "GoGross": "am Glad jtsternberg\n. ",
    "phh": "Was just a way to add a callback to another function pulling posts out without having to add your own empty value.\n. Updated. But seems like its still failing a test?\n. Awesomeness! Thank you very much :)\n. Seems like the first input field of the group is gone. Label is just shown with an empty cmb-td div.\nUsing version 2.0.2 works.\n. Mine seems fixed. Yay :)\n. Priority works for metaboxes registered on {$taxonomy}_edit_form but older plugins would have used the {$taxonomy}_edit_form_fields hook. I didn't know there was a difference until now but using the _edit_form seems like a way better idea.\nThank you.\n. Correct. Worked with 2.2.1. Updated to 2.2.2.1 and it \"broke\". After we updated the client kept getting empty boxes (due for us checking for ! empty meta) and everytime they updated a post the empty boxes appeared on the post.\nTested on 2.2.2 and @dev and the same problem appears. So currently rolled back to 2.2.1.\n. I will go through the commits the upcoming week one by one and report on which commit this bug appears. If it's simple enough I will suggest a pull request.\n. @tw2113 Not yet :( Will test if the new update solves this problem or not.\n. As of 2.2.3.1 the issue is still occurring.. Found it. Seems like the last time it was working was after https://github.com/WebDevStudios/CMB2/commit/e0c7a19bb8e7fc797d76d15634deb9b68110e720. In https://github.com/WebDevStudios/CMB2/commit/69bf9baf706de87249e27514b54e00e1cb4bcb9b it seems to break but I have no idea why.. Finally! Seems like https://github.com/WebDevStudios/CMB2/commit/dba5776ea47b3bebda36f848e6a470dfe49a46c3 broke it.. True. Is there a reason for the file type to always have a value of '0'? How is normal file types saved? I guess these also have this '0' value?. Thanks!. I there an update here or any new features to use instead?. You the man \ud83d\ude04 . ",
    "YourMark": "I've added the field like this:\nphp\n$meta_boxes['gig_details'] = array(\n    'id'            => 'gig_details',\n    'title'         => __( 'Gig details', 'hdln' ),\n    'object_types'  => array( 'gigs', ), // Post type\n    'context'       => 'normal',\n    'priority'      => 'default',\n    'show_names'    => true, // Show field names on the left\n    // 'cmb_styles' => false, // false to disable the CMB stylesheet\n    // 'closed'     => true, // Keep the metabox closed by default\n    'fields'        => array(\n        array(\n            'name'    => __( 'Entrance', 'hdln' ),\n            'id'      => $prefix . 'entrance',\n            'type'    => 'radio_inline',\n            'options' => $this->entrance,\n        ),\n        array(\n            'name' => __( 'Fee', 'hdln' ),\n            'id' => $prefix . 'gig_fee',\n            'type' => 'text_money',\n            'before_field' => '&euro;',\n            'show_on_cb' => array( $this, 'show_fee_field' ),\n        ),\n    ),\n);\nIf I create a new post, the field contains 0.00 as value.\n\nIf I fill in 10 and save the post, the value becomes 10.00\n\nIf I save the post again, it becomes 1.000.00\n\nAlso, if I try to input a value with decimals, such as 10,50 it saves as 10.00 and 10.50 saves as 1.050.00.\n. Hm, that's weird.\nA localization issue could be the problem. If I check $wp_locale my thousandseparator and decimalseparator are both a . (point). I think (pretty sure) for nl_NL that should be a . and a , (point and comma). Locale is set to nl_NL. (checked).\nIf I disable show_on_cb this problem still occurs and I checked this with my custom theme, but also with twentyfifteen.\nIf I check the function 'text_money' in CMB2_Sanitize.php on line 173  and I output $value on line 185 first and then on 187, so just before and just after the number formatting, I get the following:\nstring '10.00' (length=5)\nstring '1.000.00' (length=8)\nWhat happens is that in 10.00 the . is removed by the search and replace and then 10.00 becomes 1000. So ten becomes a thousand. I'm guessing this is where it goes wrong.\nI'm not sure, but isn't it better to save the number as a float and let the localization take place at the output?\n. ",
    "JvanderHeide": "+1 :+1: \n. ",
    "nelero": "same here !\nwhen locale is not english (French for example), problem with comma and point occurs when resaving text_money value\n. instead, you'd better use localconv to find wich symbol to sanitize and return\nwith localeconv http://php.net/manual/en/function.localeconv.php , you can get an associative array with all the details about the current locale.\nKeys you need to focus : \ndecimal_point\nthousands_sep\nand/or\ncurrency_symbol\nmon_decimal_point\nmon_thousands_sep\nwith this (instead of \"point\" and \"comma\" hard coded) you should sanitize successfully a number and fix this bug ...\n. also interested in a fix for this.\nUsers can't watch their new file image in preview mode before updating a post/page.\nSo test is made in \"live\".\n. ",
    "codot91": "same problem, my problem is how to get url from image.....\n\n. ",
    "maxchirkov": "Thanks for the prompt response.\nA global constant sounds good to me. As far as cmb2_init hook goes, it kinda makes things backwards - a library fires up an application bootstrap and not the other way around. In my case, I have different controllers that have their own init hooks, which will never get executed if plugin loads on cmb2_init.\nThanks again!\n. Don't get me wrong, I'm not criticizing :) I'm grateful you made this available to the rest of us.\n. Thank you very much!\n. ",
    "apintocr": "Just to leave my opinion :)\nI believe plugins and libraries should be ALWAYS installed as a plugin (or mu-plugin).\nThis avoids duplication of data in case 2 plugins (or themes) want the same resource.\nAlso, I believe it is the correct workflow.\nFor better WordPress dependency management, try composer, it is amazing (wp-packagist :+1: )\n. ",
    "JohEngstrom": "I worked it out from reading through the source code a bit closer.\nInstead of $field_args['maxlength'] I now use $field_type_object->field->args( 'maxlength' ) ).\nfunction cmb2_render_callback_for_text_maxlength( $field, $escaped_value, $object_id, $object_type, $field_type_object ) {\n    echo $field_type_object->input( array( 'class' => 'cmb_text', 'maxlength' => $field_type_object->field->args( 'maxlength' ) ) );\n}\nadd_action( 'cmb2_render_text_maxlength', 'cmb2_render_callback_for_text_maxlength', 10, 5 );\n. I read that bit first but couldn't work out how to access a fields argument.\nI've worked on my solution a bit further and I think I can replace $field_type_object->field->args( 'maxlength' ) ) with $field->args( 'maxlength' ) ) to make it shorter.\nThanks for all your work on this library. It's great!\nThe only thing I'm missing is a range slider input but I'll add that as as a custom field.\n. I can't get this to work in trunk either. I set date_format on my text_datetime_timestamp field to d/m/Y for UK date format but if in the picker I select a day greater than 12 it doesn't save the value and returns a blank field.\nEven if the day in the picker is 12 or less it only saves the correct format every other post update which I found very odd.\nThe time field now works perfectly though in trunk. I could never set it to 24h format but that works now.\nI really hope this can be fixed very soon. In the project I'm working on now I use date/time fields quite heavily but I'm completely stuck now with this issue.\nJust a quick edit to this. I can get it to work if I change the separator from / to - like @JasonD33 said above. It allows me to work around the issue for now at least. Thanks @JasonD33 !\n. ",
    "Gaffen": "I'll check on this over the weekend and get back to you.\n. ",
    "jawittdesigns": "Found the solution from a old CMB issue.\nBy added custom escape 'escape_cb' => 'stripslashes_deep' fixed the issue.\n. Hey, great! I'll look into these filters.\nThanks\n. No, I was never able to figure it out. It would be cool if there was documentation for this.\n. ",
    "colinsanford": "@jawittdesigns @joshuadavidnelson This issue was fixed in 2.0.3 (thought you might want to know).\n. ",
    "elbsurfer": "@jtsternberg \nI have the same issue - I moved the site from development to production and the URLs in the postmeta table have the old baseurl. I can not do a sql to change all URLs in postmeta, because the array structure which is like this s:16:\"_fys_gb_gallerie\";a:1:{i:839;s:82:\"http://wp10... has information included how long the URL is -> s:82. When I change the URL now with a SQL statement the information about the array length is wrong and will possibly break, right? Is there no function to re-index the contents?\nIs your suggestion then to use always the image id in the file list meta box and not the absolute URL?. Found it:\nhttps://github.com/WebDevStudios/CMB2/wiki/Adding-your-own-field-types\nExample 3.\n. @fakeartist I checked several projects that I did at that time, but I can not find the project where I used it. Sorry.. ",
    "360Zen": "Hi there, I think I'm having this same issue. Here's my post on wordpress.org about the problem.\nEDIT: Okay, you know what. Updating the CMB2 code to the newest version (I was on 2.0.5) seems to have solved my issue. @jeffryevans, might be worth a shot...\n. ",
    "JonMasterson": "Should be, it's MIT. https://kovshenin.com/2012/the-mit-license-is-compatible-with-the-gpl/\n. Screenshots with a couple admin color schemes...\n\n\n\n\n. Done. Let me know if you need anything else. Thanks!\n. ",
    "conatus": "Tying the dependency for PHPUnit to a specific version which is known to work fine on composer install.\n. Turns out the problem was in my own library or more specifically installation of Composer - solved by https://github.com/phpspec/prophecy/issues/149. \nThis library alone installed without error on my machine. My bad! \nIf you are interested in how I am using this: https://github.com/recordsonribs/thorax\n. ",
    "chuckreynolds": "yeah I already did that. That's interesting tho. When you have 5-8 inputs in a row and one has the text on the right and a different size... it's odd lol.  But anyways. thanks for the clarification. Cheers\n. ",
    "mandiwise": "An update...\nChecking isset on the $meta_box['show_on']['key'] appears to fix the problem. So the first line of the front page show filter would change from this:\nif ( 'front-page' !== $meta_box['show_on']['key'] )\nTo this:\nif ( ! isset( $meta_box['show_on']['key'] ) || 'front-page' !== $meta_box['show_on']['key'] )\n. I can confirm that I am experiencing the same problem. I had to write a really dirty JS patch to clear the Array() value out of the field on page load so it wouldn't save there.\n. Thanks for your speedy response!\n. ",
    "mattkrupnik": "Get from DB users.\n``` php\nfunction cmb2_get_user_options( $query_args ) {\n$args = wp_parse_args( $query_args, array(\n\n    'fields' => array( 'user_login' ),\n\n) );\n\n$users = get_users(  );\n\n$user_options = array();\nif ( $users ) {\n    foreach ( $users as $user ) {\n      $user_options[ $user->ID ] = $user->user_login;\n    }\n}\n\nreturn $user_options;\n\n}\n```\nUse above function as options.\nphp\narray(\n    'name'    => __( 'Select Users', 'cmb2' ),\n    'desc'    => __( 'field description (optional)', 'cmb2' ),\n    'id'      => $prefix . 'user_multicheckbox',\n    'type'    => 'multicheck',\n    'options' => cmb2_get_user_options( array( 'fields' => array( 'user_login' ) ) ),\n),\nSource: https://github.com/WebDevStudios/CMB2/wiki/Adding-your-own-field-types\n. Thanks, all works fine.\n. This one should help https://github.com/WebDevStudios/CMB2/issues/212 but get_posts what do You want.\nMatt\n. Try set instead  \nphp\n'object_types' => [ 'ojiva-portfolio ' ]\nthis one \nphp\n'object_types' => 'ojiva-portfolio '\nor \nphp\n'object_types' => array( 'ojiva-portfolio ')\nIn array You can put more CPT.\nCheers!\nMatt\n. Ok, I thought that this one you selected does not allow searching posts - I missed that information that it is possible - https://gist.github.com/mustardBees/f970b89dc45876524c8e\nMy bad ;(. ",
    "coreymcollins": "Hey @Ramblurr - I just updated the docs to list the class for each field type beneath their example usage: https://github.com/WebDevStudios/CMB2/wiki/Field-Types\nThe class displayed is the class added by CMB2 to the parent div of the field itself, so you now have an easy reference for each field type when needing to add additional styles or functionality to the WP Dashboard.\n. Really digging this as well.  I love separating the field names with a background color like this.  I agree with Greg's comment on the website field.\nI do prefer a lighter and italic description personally, but that's just me.  I feel like the description text stands out almost as much as the field in these mockups, whereas currently the text is a fainter gray in italics which doesn't stand out quite as much.\n. I think the show_names => false updates look good with just a couple of notes.\nSometimes you've got the description to the side of the field while other fields have the description sitting below.  You can see an example of both in your second link.  I'd personally say, for consistency's sake, the description should fall in the same spot for every field regardless of input length.  I think it makes most sense to have the description fall beneath the content.\nI'm also wondering if we should add some default padding to before_row/after_row?  In both your first screenshots as well as in the show_names => false screenshots, the text bumps right into the edge.  This may be how CMB2 has this setup by default but is something which could potentially be improved upon.\n. I think I prefer the before version.  The altered version visually is nicer - just having the month name at the top instead of a dropdown is visually more appealing, but my concern is that average users won't realize that you can key in a date manually into the input and will page back or forward for minutes trying to get to the month & year they're looking for.\nSince the calendar pops up once you click inside the field, I think the average user would think that you NEED to use the calendar to select the date rather than typing it and it could be frustrating if they think they need to spend time clicking the back arrow to get to October of 2010, for example.\n. ",
    "Strap1": "I have no idea when the tutorial will be published, but I suggest you wait patiently. You can see that this project is actively maintained, enjoyed by many, and most importantly, is free! I suspect you are not the only one who would like this tutorial, but banging at the door this way will likely not make it come any sooner! (Sorry for off-topic post).\n. ",
    "JohnyGoerend": "At our company, we use the meta query quite often to filter results based on data we get from metaboxes. The code was also included in the old metabox code, but was removed. I just re-activated and changed it to work with the new code. Because the default behaviour doesn't change, existing installations won't be affected in any negative way.\nAs war as I see, there are no unit tests for this, so this change can't break any existing test.\nBut to answer your question: no, I won't be able to write unit testing for it, sorry.\n. @jtsternberg Fixed.\nI've already used it on a website which is online since last week.\n. ",
    "austinjreilly": "I accomplished this by filtering the $l10n array. It looks like I have access to all of the settings for the jQuery UI Datepicker widget.\n``` php\nfunction update_date_picker_defaults( $l10n ) {\n$l10n['defaults']['date_picker']['yearRange'] = '1975:+0';\n\nreturn $l10n;\n\n}\nadd_filter( 'cmb2_localized_data', 'update_date_picker_defaults' );\n``\n. @joshuadavidnelson Is there something specific that I'm doing in the code snippet I included above that makes me more susceptible to that problem than anyone else using the jQuery UI Datepicker widget?\n. @quexxon I was/am using [2.0.5](https://github.com/WebDevStudios/CMB2/releases/tag/v2.0.5), along with WordPress 4.1.1. I should have made that clear in my original post. I'll look into #255 and 8ffbea4 to see if I can gain further insight into what's going on.\n. That commit was correcting some problems with the PHP. All of the PHP related functionality seems to be working. From what I can tell, the problem is that (for me at least, for some reason) calling.val` on line 366 of cmb2.js isn't actually removing the content from the input that it's supposed to be.\n. @jtsternberg I'm still seeing the same issue. My new metabox registration code is below. Thanks for looking into this!\n``` php\npublic function notes_metabox() {\n    $prefix = 'journal_notes';\n$journal_notes_metabox = new_cmb2_box(array(\n    'id' => $prefix . 'metabox',\n    'title' => 'Notes',\n    'object_types' => array('journal'),\n    'context' => 'side',\n    'priority' => 'default',\n    'show_names' => false,\n    'sortable' => false,\n    //'closed' => true,\n));\n\n$journal_notes_group = $journal_notes_metabox->add_field(array(\n    'id' => $prefix . 'repeat_group',\n    'type' => 'group',\n    'options' => array(\n                    'group_title' => 'Note #{#}',\n                    'add_button' => 'Add a note',\n                    'remove_button' => 'Remove this note',\n                 ),\n));\n\n$journal_notes_metabox->add_group_field($journal_notes_group, array(\n    'name' => 'Note',\n    'desc' => '',\n    'id' => 'content',\n    'before_row' => array($this,'get_note_author'),\n    'type' => 'textarea_small',\n));\n\n$journal_notes_metabox->add_group_field($journal_notes_group, array(\n    'name' => 'Note Author',\n    'desc' => '',\n    'id' => 'author',\n    'type' => 'note_author',\n    'default' => ''\n));\n\n}\n``\n. @jtsternberg Thanks for looking into this.  I've upgraded to trunk. Here's what I can report: \n- Values for text areas are cleared, so I believe that's fixed.\n- Values for radio buttons are repeated, but are not saved. To be more clear, radio buttons (and probably all non-text area content) gets repeated when new rows are added once a repeater field has been saved, although the values themselves are not saved. There is no issue when first loading a repeater field on a post which has never been saved. Does that make sense? I can sign in to Gitter if that would help.\n- I'm getting the following warnings when I turn ondefine('SCRIPT_DEBUG', true)`:\njs\nJQMIGRATE: jQuery.fn.attr('value') no longer gets properties\nconsole.trace()\nmigrateWarn @ jquery-migrate.js?ver=1.2.1:43\njQuery.attrHooks.value.get @ jquery-migrate.js?ver=1.2.1:170\nm.extend.attr @ jquery.js?ver=1.11.2:4\njQuery.attr @ jquery-migrate.js?ver=1.2.1:159\nm.access @ jquery.js?ver=1.11.2:3\nm.fn.extend.attr @ jquery.js?ver=1.11.2:4(anonymous function) @ cmb2.js?ver=2.0.6:347\nm.extend.each @ jquery.js?ver=1.11.2:2m.fn.m.each @ jquery.js?ver=1.11.2:2\nwindow.CMB2.cmb.cleanRow @ cmb2.js?ver=2.0.6:343\nwindow.CMB2.cmb.addGroupRow @ cmb2.js?ver=2.0.6:506\nm.event.dispatch @ jquery.js?ver=1.11.2:3\nm.event.add.r.handle @ jquery.js?ver=1.11.2:3\nand\njs\nJQMIGRATE: jQuery.fn.attr('value', val) no longer sets properties\njquery-migrate.js?ver=1.2.1:43\nconsole.trace()\nmigrateWarn @ jquery-migrate.js?ver=1.2.1:43\njQuery.attrHooks.value.set @ jquery-migrate.js?ver=1.2.1:182\nm.extend.attr @ jquery.js?ver=1.11.2:4jQuery.attr @ jquery-migrate.js?ver=1.2.1:159\nm.access @ jquery.js?ver=1.11.2:3\nm.access @ jquery.js?ver=1.11.2:3\nm.fn.extend.attr @ jquery.js?ver=1.11.2:4(anonymous function) @ cmb2.js?ver=2.0.6:382\nm.extend.each @ jquery.js?ver=1.11.2:2\nm.fn.m.each @ jquery.js?ver=1.11.2:2\nwindow.CMB2.cmb.cleanRow @ cmb2.js?ver=2.0.6:343\nwindow.CMB2.cmb.addGroupRow @ cmb2.js?ver=2.0.6:506\nm.event.dispatch @ jquery.js?ver=1.11.2:3\nm.event.add.r.handle @ jquery.js?ver=1.11.2:3\nHere is the code for my repeater field:\n``` php\nadd_filter('cmb2_init', 'research_question_metabox');\nfunction research_question_metabox() {\n$prefix = '_article_research_questions_';\n\n$research_questions_metabox = new_cmb2_box(array(\n    'id' => $prefix . 'metabox',\n    'title' => 'Research Questions',\n    'object_types' => array('article'),\n    'context' => 'normal',\n    'priority' => 'default',\n    'show_names' => true,\n    'sortable' => false,\n));\n\n$research_question_group = $research_questions_metabox->add_field(array(\n    'id' => $prefix . 'research_question_group',\n    'type' => 'group',\n    'options' => array(\n        'group_title' => 'Research Question #{#}',\n        'add_button' => 'Add a Research Question',\n        'remove_button' => 'Remove this Research Question',\n    ),\n));\n\n$research_questions_metabox->add_group_field($research_question_group, array(\n    'name' => 'Is this research question explicit from the manuscript?',\n    'desc' => '',\n    'id' => 'explicit',\n    'type' => 'radio_inline',\n    'options' => array('yes' => 'Yes',\n        'no' => 'No',\n        'combination' => 'Combination',\n    ),\n));\n\n$research_questions_metabox->add_group_field($research_question_group, array(\n    'name' => 'Research Question',\n    'desc' => '',\n    'id' => 'research_question',\n    'type' => 'textarea_small',\n));\n\n}\n``\n. I think you can just add asave_fields => falseargument when you are setting up your front end metabox, as outlined in [this blog post](http://webdevstudios.com/2015/03/30/use-cmb2-to-create-a-new-post-submission-form/). Take a look at the first step.\n. This might help, although I'm not sure that it will: https://github.com/WebDevStudios/CMB2/issues/226#issuecomment-78278448\n. My issue (#257 [which itself contains references to #263 and #304]) may also be related to this.\n. I'm not sure when this changed, but I think you're supposed to usecmb2_initas your hook, notcmb2_meta_boxes` (see https://github.com/WebDevStudios/CMB2/wiki/Basic-Usage#create-a-metabox). Does that address your issue at all?\n. I think that this is somewhat related to #257. Specifically, see this comment.\n. @tnorthcutt Last time I checked this was still problematic. I know that #257 was closed, but the problems I outlined in the second bullet of my comment still stand. I don't have time at the moment to work out exactly what's going on, but the errors also included in that comment might be a good place to start.\n. ",
    "joeljoeljoel": "I'm also experiencing this issue.  If I enter a date/time as March 17, 10PM in New York and save the post, the date time is March 17, 9pm.  Every time I save the post, the time falls back by one hour.\nI believe the issue is the timezone offset is being miscalculated in areas that observe Daylight Savings Time.  For example, in the Eastern timezone the offset today (March 10) is 5 hours but next Thursday (March 17) the offset will be 4 hours.\nI think the source of the issue is here:\nhttps://github.com/WebDevStudios/CMB2/blob/c1bd09f9fdf1b4ca5ef5d10a31bcfc74db9a3e06/includes/CMB2_Utils.php#L88\nThe current date is being used to calculate the offset but the date that's being entered in the input should probably be used instead.\n. @jtsternberg The fix looks good to me.\nI tested dates before March 13 (the start of DST), after November 6 (the end of DST) and dates in between and the time was unaffected.\n. ",
    "jazbek": "I just ran into this problem as well, that line is definitely the problem. \nThe date being saved to the database needs to be specifically passed to date_create(), or else it uses now. Now might not be during daylight savings, but the date being displayed is, in which case the offset returned today would not be correct.\n. ",
    "jrobertblack": "This feature would also be nice... like a select box to choose mega menu choice or attach image choice...\n. ",
    "superdummy": "ok tracked it down further: \n1.) func_get_args() seems to be not debuggable with eclipse, alwas returns false. var_dump() results in a different result: \n2.) func_get_args() indeed gets the complet Metabox object instance that is passed in as parameter in the $hook variable (first value of the hook array).  And this is of course different each time, as it is a complete different instance/metabox. \nSo this method has a bug, as it always compares object identity. But here we also require a mode that only compares  if a method independent of the object identity has been added. \nOne solution would be to add a further parameter \"$none_identity_check\" and if this is set, it will not consider the object identity that is passed in the $hook parameter but only the second array parameter, namely the function call/function name itself (that here is add_post_enctype). And of couse $this->once( 'admin_head', array( $this, 'add_post_enctype' ) ) would then also have to be changed to pass in the new flag to not check the object identity. \nAnd most likely there are other places where this method is called in the same way but rather should only do a non object instance comparision like above. \nBut problem is now clear...\n. thanks!\nwith this \"hack\" using the title field the problem is sovled. (but this solution is not obvious for someone who is not deeply into cmb2)\nTo make it easier for others (and google to find the solution above):  CMB2 HTML Type, CMB Generic HTML Type\nJust to explain \"most important\": I think for every framework a very easy \"build your own xyz/integrate any legacy code\" is the most important feature... and for me an generic HTML Type would have been that. But with your fix, feature is more or less existant.\n. Thanks for your advice and help!\nThe Filter/Action seems to be have changed in the last 9month. The filter  cmb2_meta_boxes I used, was base on a 6-9 old version of the example provided at that time.\nYes it seems, what I wanted to do can be acomplished with the show_on_cb callback. \nAfter changing the filter/action to  cmb2_init I did a retest, and it did not work either. Just as a thought: I personally would think it adds a lot of \"bonus points\" when the cmb2_init would be triggered extremely late, the latest as possible (so one must not necessarily depend on callbacks which add in my opinion some overhead and are not that intuitive as doing this directly in the code).But yes, using the callback is an alternative and works. \nThanks for your help and adivce.\n. yes of course. \nI was not aware, that the translations are on transifex, i know transifex but never used it. \nI have translated it , should be ok now. \n. ",
    "manwithpowers": "Thanks for the quick fix!\n. ",
    "monecchi": "I've been trying to achieve the same thing. What about setting up a field for a custom taxonomy which belongs to a custom post_type? \n'object_types' => array('portfolio_categories') // this is the custom taxonomy\n'taxonomy' => 'portfolio_categories', // also no effects if I set this\nThanks in advance.\nAdriano Monecchi\n. @jtsternberg Thanks for pointing out the example function. I've just updated CMB2 to its latest version (2.2.0) and I've just copied the example function for adding taxonomy/term metaboxes. I modified it a bit to match my theme's setup with the right prefix and so on, however, I just can't get it to work.\nMy theme uses a custom post_type registered as \"food_menu\",  as also two custom taxonomies that act like categories and tags, \"food_menu_categories\" and \"food_tags\", both work as intended with my custom post_type, but when I try to set up the metabox, nothing shows under the taxonomy edit page...\nHere's how I've set it up:\n'object_types'     => array( 'term' ), // Tells CMB2 to use term_meta vs post_meta`\n'taxonomies'       => array( 'food_menu_categories', food_tags' ), // Tells CMB2 which taxonomies should have these fields`\nAm I missing something here?\nMy theme uses a great number of custom metaboxes, all those are working fine, except the taxonomy/term metabox.\nThanks in advance\nAdriano\n. My WordPress install is 4.5 - I've just updated it, but before it I was\nrunning the 4.4.2 version with a long the CMB2 trunk.\nI've also updated CMB2 to its latest version, and the issue is all other\ntype of metaboxes my theme uses are working, even some more complex ones\nsuch as repeating groups. Anyway, the term metabox simply doesn't show up\nwhen editing my custom taxonomy under WP Admin.\nThanks for checking it though.\nAdriano Monecchi\nEm sexta-feira, 22 de abril de 2016, Justin Sternberg \nnotifications@github.com escreveu:\n\nWhich version of WordPress are you on?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly or view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/235#issuecomment-213627239\n. @jtsternberg Thanks for your reply. Anyway I think I didn't get it. In fact my intention is to simply pass the taxonomy_multicheck values as an array () of another tax_query array, so here's the only thing I need to accomplish within my theme's wp_query construction:\n\nWhere * $page_food_categories* is the taxonomy_multicheck, so how to output the selected checkboxes values as an array() populated with the checked categories ids?\n    ...\n    $query_args['tax_query'] = array(\n          array(\n          'taxonomy' => 'food_menu_categories',\n          'field' => 'term_id',\n          'terms' => $page_food_categories, // Must be an array of ids or slugs e.g.: array => (43, 44, 38),\n          'operator' => 'NOT IN'\n            )\n    );\n    ...\nThe way that wp_query is set up works out of the box if I manually place the array of ids such as 'terms' => array => (43, 44, 38), It then displays all posts from the 'taxonomy' => 'food_menu_categories', except those within the 'terms' => array()\nThis is my first attempt using CMB2, and it seems great for a large of use cases, it is easier for me to output a field value within a php template, but it has been a pain to accomplish this task, I've searched through all the web and couldn't find nothing about how to do what seems to be a simple thing. Really sad here :(\n. @jtsternberg Thanks for pointing out the importance of custom sanitization on a per field basis.. This issue seems not to be solved yet for the cmb2-rest-api branch, I'm still getting money field being saved even if it is empty causing it to have a '0.00' value.\n. Hey, @jrfnl. I did actually tested with this branch, which by the way seems not to expose CMB2 custom fields to the WP Rest API either. Maybe I am misunderstanding the way the CMB2 branches work. I've forked the cmb2-rest-api branch and updated my custom post type and cmb2 fields in order to expose it to the WP Rest API v2, as long as I thought it would have all the goods from the master branch + the WP API support.\n. @jrfnl oh, I got it, thanks for the input. So I think it's a matter of waiting for those branches to get merged. \nThe fact is the cmb2-rest-api branch is not working as it should yet, it does not expose my fields to the WP API, so I'm thinking about going back to the master or the trunk branch for the meantime.\nIf at least I could get the API functionality at my disposal, then the saved '0.00' value for the empty text_money field is a thing I could live with. \n. Hey @Jsternberg. Thanks for pointing out the file, I've already followed all the necessary steps to make it work but no success. I'll try the trunk branch to see if it keeps up with all my cmb2 plugins while solves the WP Rest API not exposing the fields issue. \n. Hey there. I've just came about such a requirement. I've got a CMB2 group with fields for my CPT and I'm totally lost on how to put the callback function together in order to update those fields...  Any help with code examples (approach) appreciated.. ",
    "gareth-gillman": "Cheers Josh\n. Unfortunately your code didn't work Josh but trial and lots of searching did, and used:\nget_the_term_list( $post->ID, 'taxonomy', '', ', ' );\n. thought so, just gonna do the check before I display the input on the frontend so not to make some annoying UX\nthanks, for your input\n. Brilliant, the documentation was definitely lacking for this feature, makes my task easier.. ",
    "cannap": "found a solution\n```\nfunction rsg_custom_upload_dir( $param ) {\n$current_page = $_SERVER['HTTP_REFERER'];\n$id          = $_REQUEST['post_id'];\n$parent      = get_post( $id )->post_parent;\n\n//\"rsg_download\" == get_post_type( $id ) || \"rsg_download\" == get_post_type( $parent ) )\n\nif ( \"rsg_download\" == get_post_type( $id ) || \"rsg_download\" == get_post_type( $parent ) ) {\n    $mydir         = '/rsg_uploads';\n    $param['path'] = $param['basedir'] . $mydir;\n    $param['url']  = $param['baseurl'] . $mydir;\n\n} elseif ( strpos( $current_page, 'rsg_download' ) ) {\n    $mydir         = '/rsg_uploads';\n    $param['path'] = $param['basedir'] . $mydir;\n    $param['url']  = $param['baseurl'] . $mydir;\n\n}\n\nreturn $param;\n\n}\n```\n. thx :+1: \n. also when i have 2 Fields and i Press save after the reload i got 3 Rows then i save again 4 again 5 i made a video . Sure: \n```php\nadd_action( 'cmb2_admin_init', function () {\n    $prefix_personal         = 'worker_personal_';\n    $prefix_job              = 'worker_job_';\n    $cmb_for_worker_personal = new_cmb2_box( array(\n        'id'           => 'worker_metabox_personal',\n        'title'        => 'Wohnsitz',\n        'object_types' => array( 'mitarbeiter' )\n    ) );\n$cmb_for_worker_personal->add_field( array(\n    'name'   => esc_html__( 'Vollst\u00e4ndiger Name', 'cmb2' ),\n    'id'     => $prefix_personal . 'name',\n    'type'   => 'text',\n    'column' => array(\n        'position' => 2,\n        'name'     => 'Name',\n    ),\n\n) );\n\n$cmb_for_worker_personal->add_field( array(\n    'name' => esc_html__( 'Adresse', 'cmb2' ),\n    'id'   => $prefix_personal . 'location',\n    'type' => 'geolocation',\n\n) );\n$cmb_for_worker_personal->add_field( array(\n    'name' => esc_html__( 'Telefon', 'cmb2' ),\n    'id'   => $prefix_personal . 'phone',\n    'type' => 'text',\n\n) );\n\n$cmb_for_worker_personal->add_field( array(\n    'name'   => esc_html__( 'Email', 'cmb2' ),\n    'id'     => $prefix_personal . 'email',\n    'type'   => 'text_email',\n    'column' => array(\n        'position' => 3,\n        'name'     => 'Email',\n    ),\n) );\n\n\n$cmb_for_worker_job = new_cmb2_box( [\n    'id'           => 'worker_metabox_job',\n    'title'        => 'Job',\n    'object_types' => array( 'mitarbeiter' )\n] );\n$cmb_for_worker_job->add_field( [\n    'name'        => 'Verf\u00fcgbar ab',\n    'id'          => $prefix_job . 'available',\n    'type'        => 'text_date',\n    'date_format' => get_option( 'date_format' )\n] );\n\n$cmb_for_worker_job->add_field( [\n    'name'            => 'Umkreis',\n    'id'              => $prefix_job . 'perimeter',\n    'type'            => 'text',\n    'default'         => 0,\n    'sanitization_cb' => function ( $value, $field_args, $field ) {\n        return filter_var( $value, FILTER_SANITIZE_NUMBER_INT );\n    },\n    'desc'            => 'in KM. <br> Wenn der Umkreis egal ist 0 eintragen'\n] );\n\n$cmb_for_worker_job->add_field( [\n    'name'            => 'Bundesl\u00e4nder',\n    'id'              => $prefix_job . 'states',\n    'repeatable'      => true,\n    'type'            => 'select',\n    'default'         => '',\n    'sanitization_cb' => function ( $value ) {\n        return array_unique( $value );\n    },\n    'options'         => get_german_states()\n] );\n\n$cmb_for_worker_job->add_field( [\n    'id'         => $prefix_job . 'current',\n    'name'       => 'Momentaner Arbeitsort',\n    'limit'      => 1,\n    'type'       => 'post_search_ajax',\n    'query_args' => array(\n        'post_type'      => array( 'job' ),\n        'post_status'    => array( 'publish' ),\n        'posts_per_page' => - 1\n    )\n] );\n\n} );\n```\nthx for helping. ",
    "augustuswm": "I am running in to this same issue. I does look to be caused by having multiple file inputs on a single page. Each time a file input is clicked for the first time, the cmb.mediaHandlers.list, cmb.mediaHandlers.single, etc. functions are being redefined. These handlers have a closure to the variable $formfield, and therefore the \"last\" file input to be clicked by the user will have its handler be used for all other file inputs. You do not have this behavior with cmb.formfield because each redefinition of the mediaHandlers have a closure to the cmb variable. The other variables local to cmb._handleMedia have the same issue.\nI'm working on fixing this on our local installation.\nSame issue as: https://github.com/WebDevStudios/CMB2/issues/296\n. Following up to see if there is anything I can do to assist in getting either this fix added or implementing a fix for the issues in another way.\n. ",
    "maciekkus": "I've noticed that issue today too. For me saving (for the first time only) seems to be working OK. The problem is after refreshing edit post page. Every field group is the same (as first one) or there is only one. Saving again brokes data.\n. ",
    "shivgre": "@kidesigner I found the issues cause: no matter if you provide the post id in the short codes to display frontend form or not, its taking the page_id by default on which the form is displayed and then it saves that data in that page_id in database as postmeta which then displays it on frontend form on reload.\nShould be an option to add frontend form for custom post types which is not dependent on post_id(page_id).\n. @kidesigner I found a workaround to clear the form values using jquery.\nI have given a custom class(reset_frontend_form_feilds) to all the fields in form which I wanted to clear on reload. Also file_list fields I cleared the li inside the ul for that file_list field(you should inspect your file_list field html for the ul idafter you attach a file and then use it in the below jQuery code to reset).\njQuery(document).ready(function($){\n//        $('form#formId').clearForm();\n        $('form#formId').find('.reset_frontend_form_feilds').val('');\n//        // RESET THE FILE LIST FIELD\n        $('ul#tormId_uploads-status').empty();\n  });\nAlso can you report this issue and request this as a feature or whatever is better way to CMB2 main developers.\n. @kidesigner send me you skype Id I will add you.\n. ",
    "cw789": "Fast like a rocket. Thanks.\n. ",
    "PeterKnight": "So far I had two situations where it would have been convenient to get $post access: \n1 Setting a dynamic value for a default value of a field, i.e. based on another field.\n2 Setting dynamic data-attributes that may use post data, like the post ID. I was trying to set a nonce in a data attribute for use in some custom js ( example: wp_create_nonce( \"my_action_{$post_id}\" ) . There were workarounds for my scenario (using $_GET['post'] for the post id or using wp_localize_script to register custom vars later on).\n. Perfect! I needs to update. Thank you for the examples.\n. ",
    "uzzaldey": "Hi, Is there any way to crate different custom meta box with different name (as if i create a custom meta box for a page it shows all the pages)for different page like contact, about or any other pages? Please help me . Thanks in advance.\n. ",
    "christiespeich": "Oooh, I'm having this problem too! I searched and searched but couldn't find anyone else reporting this, so I assumed it was something I had done. I haven't had a chances to really dig into the code to see what the problem might be.\n. Hmm...I don't know about the original poster, but it appears I am using version 2.0.0.7 ... so a bug introduced in 2.0.3 shouldn't affect me. But upgrading to the latest release might not be a bad idea anyway....\n. Was just coming to see if this was going to be added in the future, and it already is! Awesome. Thanks guys!\n. It's not immediately clear in the wiki because the Note is only posted after one of the taxonomy field types, not all of them (so if you don't scroll down, you won't see it), but here's why it's not working the way you're expecting it to:\n\nTo retrieve the values from the taxonomy fields, use get_the_terms, not get_post_meta, etc. The\ntaxonomy fields are not intended to provide an arbitrary list of terms to pick from, but are intended \nto be a replacement for the default taxonomy meta-boxes. I.e. they are meant to set the taxonomy \nterms on an object, and will not save as a meta value. Any other use of these types will be hacky\nand/or buggy. Suggest looking at building a custom field type instead - Example.\n. correction: I am able to hide the button via jQuery as a workaround:\n\njavacript\njQuery('.cmb2-id-mbdbif-images-to-fix .button').css('display', 'none');\n. ",
    "quexxon": "I believe that your problem is fixed in the latest release (2.0.5). There was an issue with subsequent repeating groups all being populated with values from the first group.\n. ",
    "sbouafif": "What happened to the wysiwyg support in groups? It seems to work well a few days ago.\nCan we help in any way?\n. Ok. Thank you :)\n. ",
    "mweimerskirch": ":+1: \n. Works perfectly for me as well, just as it used to with CMB1.\n. I downloaded the patch file for #318 directly from GitHub because I didn't want to pull in 23 individual commits and there were hundreds of whitespace changes as well as changes in a translation file: https://github.com/WebDevStudios/CMB2/pull/318.patch\nBut just now after reading your message I noticed that those changes are not visible when viewing the diff online. Seems to be a bug on GitHub, so I take the part about the \"unrelated changes\" back.\n. @yivi Could you squash the commits for the current pull request? That way I could test it as well and let you know if any of my use cases fail.\n. ",
    "natebeaty": "Just dug around trying to figure out why this wasn't working after upgrading from CMB. +1 for merging this from someone that uses this functionality on a few sites.\n. I can confirm it as working for me. \nI've applied the patch and when I add 'multiple' => true it stores the array of meta values as separate entries properly in the database, and when I comment it out, it goes back to the single entry method (e.g. a:2:{i:0;s:3:\"378\";i:1;s:2:\"25\";}).\n. Just curious, should this fix be showing up in 2.0.5 if using WPackagist? I'm including it via Composer in a Bedrock/Sage project, and the multiple code in question is commented out. I also tried using \"wpackagist-plugin/cmb2\": \"dev-trunk\" and same thing, the code is commented out.\nI can move to including it locally in the theme to get this fix, but I liked having CMB2 easily updatable as a plugin controlled via Composer.\n. @jtsternberg ok, thanks for the quick reply. I'll just move CMB2 into my theme for now.\n. @adchsm does your new editor instantiate ok when you add it? I get a blank ckeditor tinyMCE (dur) area when clicking Add another Editor, like this:\n\nIf I save the post and refresh it works fine, however. But ideally the tinyMCE instance would work immediately after duplicating.\n(Edit: I see it does work fine if you are in Text mode instead of Visual.)\n. @adchsm Interesting. I wonder if it has to do with using Bedrock/Sage and/or using CMB2 as a plugin? \nIt works fine if I'm editing in Text mode, but if it's set to Visual, the freshly-added editor is always broken.\n. @adchsm yeah, I have CMB2 in mu-plugins using Bedrock's composer.json so I can easily keep it updated. \nWell, as long as I know it works for you duplicating editors in Visual mode, then it's something I need to track down on my own install. Thanks for the feedback.\n. Fwiw, I downloaded a fresh Wordpress 4.1.1 install, copied CMB2 into the twentyfifteen theme directory, and just added this to functions.php:\n```\nrequire get_template_directory() . '/lib/CMB2/init.php';\nfunction register_metabox() {\n        $prefix = 'repeatable_editor';\n    $cmb_showcase = new_cmb2_box( array(\n        'id'            => $prefix . 'metabox',\n        'title'         => __( 'Repeatable Editor', 'cmb2' ),\n        'object_types'  => array( 'page' ), // Post type\n        'context'       => 'normal',\n        'priority'      => 'high',\n        'show_names'    => true, // Show field names on the left\n        //'cmb_styles'    => false, // false to disable the CMB stylesheet\n    ) );\n\n    // Repeatable group\n    $group_showcase = $cmb_showcase->add_field( array(\n        'id'          => $prefix . 'sections',\n        'type'        => 'group',\n        'options'     => array(\n            'group_title'   => __( 'Editor', 'cmb2' ) . ' {#}', // {#} gets replaced by row number\n            'add_button'    => __( 'Add another Editor', 'cmb2' ),\n            'remove_button' => __( 'Remove Editor', 'cmb2' ),\n            'sortable'      => true, // beta\n        ),\n    ) );\n\n    // Main editor\n    $cmb_showcase->add_group_field( $group_showcase, array(\n        'name'    => __( 'Content', 'cmb2' ),\n        'id'      => 'content',\n        'type'    => 'wysiwyg',\n        'options' => array( 'textarea_rows' => 8, ),\n    ) );\n}\n\nadd_action( 'cmb2_init', 'register_metabox' );\n\n```\n...and it still behaves the same. I also realized that the Text mode isn't actually working, it was just showing the textarea, but the quickbar buttons don't work.\n\n. I wasn't able to get it fully working. Right now you have to add a new block with some content (either switching to Text and typing in the wysiwyg area, or adding some content to another field in the new repeatable block) and save, then you can edit with the fully instantiated tinymce area in the new block.\nI also ran into a problem with the move-up and move-down buttons, as they don't support swapping wysiwyg areas.\n. @sandys I am using default code. You can do basic repeatable wysiwyg fields, but the post just has to be saved before tinymce inits properly for editing in Visual mode. \nI looked into adjusting cmb.js to support the up/down arrows w/ wysiwyg areas, but my quick fixes didn't work and I don't have much time to work on this right now.\n. @jtsternberg just tried your https://github.com/WebDevStudios/CMB2/tree/repeat-wysiwyg branch and it does initialize TinyMCE fields when adding a new block, but it acts strangely if there are more than one wysiwyg field in the block. It saves the content of the last wysiwyg block as the content for the first one, and the rest of them are left blank. (Along similar lines, it won't save the new block at all unless the last wysiwyg area has content.)\n\n. @jtsternberg I switched to the branch from this pull request and it worked for me, resolving the issues I mention above: https://github.com/WebDevStudios/CMB2/pull/431\nAlthough you still can't reorder blocks with wysiwyg fields unless you switch to Text mode, it at least fixes the issue of adding new blocks.\n. @synthview I noticed that also: https://github.com/WebDevStudios/CMB2/issues/264#issuecomment-107667612 ... just told client to switch to text mode before sorting, but that's obviously not a great solution.\n. Had the same issue and ended up using this:\nforeach ( $meta_value as $key => $val ) {\n        if ( empty( implode( '', $val ) ) ) {\n            unset( $meta_value[$key] );\n        } else {\n            $meta_value[ $key ] = array_map( 'sanitize_text_field', $val );\n        }\n    }\n    return $meta_value;\nThanks for the pointer, @davekellam.\n. This worked for me! Thanks so much.\n. ",
    "pieroit": "Hi guys,\nI need this feature and was happy to see it was already addressed. My problem is that I can't get  the option multiple to work with the option repeatable.\nThe meta has two values, sotred into the DB as two different records.\n\nIf I set multiple => true and repeatable => true, only the first value is shown in an <input> box and below there is the \"Add Row\" button to insert more. The second one disappear (despite being present in the DB).\n\nIf I set multiple => false and repeatable => true, same as above.\nIf I set multiple => true and repeatable => false, both values get passed to the field but they are printed together into one <input>, in which I read Array. (see Notice)\n\nWhat do you think? I asked for help before diving into the code because I already have in place a functioning metabox system, and the switch may require too much time. Hope to fix this soon to join the community :)\nThanks,\nPiero\n. Found a way to send the meta values correctly to the repeated field.\nThis line\nhttps://github.com/WebDevStudios/CMB2/blob/master/includes/CMB2_Field.php#L232\nin the following block:\n// If no override, get value normally\n        if ( 'cmb2_field_no_override_val' === $data ) {\n            $data = 'options-page' === $a['type']\n                ? cmb2_options( $a['id'] )->get( $a['field_id'] )\n                : get_metadata( $a['type'], $a['id'], $a['field_id'], ( $a['single'] || $a['repeat'] ) );\n        }\ncalls get_metadata with final parameter set to $a['single'] || $a['repeat'].\nThis causes the metabox to load only one value even when you explicitly asked for repeated in combination with multiple. The problem is fixed by changing to this:\n: get_metadata( $a['type'], $a['id'], $a['field_id'], ( $a['single'] || !$a['repeat'] ) );\nBut I don't know if I broke something in this way. Also, the values are still serialized when inserted into the DB. Can anybody help?\nThank you,\nPiero\n. ",
    "f-o-n": "Yes sure, here are some snippets that I tested in a fresh WordPress install.\nI have a Post Type to create Slideshows. I created a checkbox so the user can easily switch between Images and Videos so he doesn't has both options. The code works if I press save once after creating the repeatable groups and the input gets an value assigned. \nBefore saving the post:\n\nAfter saving the post:\n\nHere is my MetaBox code:\n``` php\nfunction my_gallery_group_metabox() {\n    $prefix = 'my_gallery';\n$cmb_group = new_cmb2_box( array(\n    'id'           => $prefix . 'group_metabox',\n    'title'        => __( 'Gallery Slides', 'my-gallery' ),\n    'object_types' => array('gallery'),\n) );\n\n$group_field_id = $cmb_group->add_field( array(\n    'id'          => $prefix . 'group',\n    'type'        => 'group',\n    'options'     => array(\n        'group_title'   => __( 'Slide {#}', 'my-gallery' ),\n        'add_button'    => __( 'Add Slide', 'my-gallery' ),\n        'remove_button' => __( 'Remove Slide', 'my-gallery' ),\n        'sortable'      => true,\n    ),\n) );\n\n$cmb_group->add_group_field( $group_field_id, array(\n    'name' => __( 'Slide Title', 'my-gallery' ),\n    'id'   => 'title',\n    'type' => 'text_medium',\n));\n\n$cmb_group->add_group_field( $group_field_id, array(\n    'name'    => __( 'Slide Type', 'my-gallery' ),\n    'id'      => 'type',\n    'type'    => 'radio_inline',\n    'options' => array(\n        'image' => __( 'Image', 'my-gallery' ),\n        'video'   => __( 'Video', 'my-gallery' ),\n    ),\n    'row_classes' => 'radio_parent radio_type',\n    'default' => 'image',\n));\n\n$cmb_group->add_group_field( $group_field_id, array(\n    'name' => __( 'Image', 'my-gallery' ),\n    'id'   => 'image',\n    'type' => 'file',\n    'row_classes' => 'radio_type_child radio_child_image',\n));\n\n$cmb_group->add_group_field( $group_field_id, array(\n    'name' => 'Video',\n    'desc' => __( 'Enter a Vimeo URL.', 'my-gallery' ),\n    'id'   => 'video',\n    'type' => 'oembed',\n    'row_classes' => 'radio_type_child radio_child_video',\n));\n\n}\nadd_action( 'cmb2_init', 'my_gallery_group_metabox' );\n```\nThe JS code I use:\n``` javascript\nvar parents = ['.radio_type'];\n//Trigger all Group Boxes\nfunction initVisibilityAll() {\n    $('.cmb-repeatable-grouping').each(function(i, e) {\n        var group = $(e);\n        $.each( parents, function( key, value ) {\n            group.find(value + 'child').hide(); //.radio_type_child\n            var active = group.find(value + ' input:radio.cmb2-option:checked').val(); //image\n            group.find('.radio_child' + active).show(); //.radio_child_image\n        });\n    });\n}\n$(document).on('change', '.radio_parent input:radio.cmb2-option', function() {\n    initVisibilityAll();\n});\n$(document).on('click', 'button.cmb-add-group-row, .button.cmb-shift-rows', function() {\n    initVisibilityAll();\n});\ninitVisibilityAll();\n```\nBut the JS code is not needed. If you inspect newly created elements, you see that they don't have any value assigned as shown in the screenshots above. This example also shows two more bugs already mentioned in other tickets (https://github.com/WebDevStudios/CMB2/issues/246 and https://github.com/WebDevStudios/CMB2/issues/257)\n. Yes it works now, thank you\n. ",
    "spwebguy": "Thanks a lot for taking the time to answer! \n. I've seen this feature work in other frameworks (but they weren't as good as CMB2).\nI hope CMB2 will be maintained in the future (I'm going to poke the author again and he's going to think that I'm a really annoying person, sorry for that).\n@jtsternberg we need you.\n. @nonsensecreativity Well, that's interesting. What does it do with something like 5 instances? Does it crash?\n. \nSame here. Thank you for everything. Repeatable TinyMCE/ drag and drop and anything you can come up with to make CMB2 even more awesome than what it is already would be wonderful.\n. Hi Justin!\nJust when you answer me I found this function... I should have looked for it more before asking. I'll let CMB2 do that for me in most cases but will still have custom sanitization in a few others.\nThank you for the speedy answer, and thank you for working on CMB2. I'm glad you're still maintaining it, it's a very important tool for many of us. \nAlso THANKS for adding the fix for the issue that happens when deleting an item from a repeatable group (when it left a \"ghost\" item), it's very useful. \nGood luck!\n. Hi both,\nThat's what I did. It's cleaner, easier, lighter and the users are getting the CMB2 updates as you release them. My plugins are up to date so there's no risk of compatibility issue or anything.\nThank you! Keep up the great work.\n. Hi both,\nThank you for the quick response, it's very much appreciated. I will test it with the version in trunk but I'm using your CMB2 WordPress plugin as a dependency for my own plugin, and the last version is throwing this error. \nWhat I mean is even if trunk works, my users will always have the latest version you've uploaded on WordPress.org. And I don't really want to integrated/embed (sorry for the shitty English...) your entire code here in my plugin.\nI hope this makes sense, let me know if I'm missing something... and thank you for reacting that fast.\nGia \u2014\n. Hi all,\nIf I was creating a plugin now I would definitely use trunk but I have thousands of active users that were prompted to install CMB2 as a dependency, if I use the trunk code in my plugin now, the CMB2 WordPress plugin will take over and throw this error (because they already have it installed).\nThe solution I have now is to add the trunk's code in my plugin and ask my users to delete the CMB2 WordPress plugin, but I'd rather keep it as dependency. Is there any way you could quickly patch the WP plugin (sorry if this doesn't make sense...)?\nHope it's clear :) Keep me posted!\nGIa \u2014\n. Wow! I don't know what to say I wasn't expecting this.\nThank you very much, you're the best.\nGia \u2014\n. Thank you for the quick answer, very much appreciated.\nHere's the new log:\n\n. ",
    "adchsm": "Just in case this helps, I have a repeatable group with a WYSIWYG editor as a field within that group and it works perfectly.\n```\nfunction register_metabox() {\n        $prefix = 'repeatable_editor';\n    $cmb_showcase = new_cmb2_box( array(\n        'id'            => $prefix . 'metabox',\n        'title'         => __( 'Repeatable Editor', 'cmb2' ),\n        'object_types'  => array( 'page' ), // Post type\n        'context'       => 'normal',\n        'priority'      => 'high',\n        'show_names'    => true, // Show field names on the left\n        //'cmb_styles'    => false, // false to disable the CMB stylesheet\n    ) );\n\n    // Repeatable group\n    $group_showcase = $cmb_showcase->add_field( array(\n        'id'          => $prefix . 'sections',\n        'type'        => 'group',\n        'options'     => array(\n            'group_title'   => __( 'Editor', 'cmb2' ) . ' {#}', // {#} gets replaced by row number\n            'add_button'    => __( 'Add another Editor', 'cmb2' ),\n            'remove_button' => __( 'Remove Editor', 'cmb2' ),\n            'sortable'      => true, // beta\n        ),\n    ) );\n\n    // Main editor\n    $cmb_showcase->add_group_field( $group_showcase, array(\n        'name'    => __( 'Content', 'cmb2' ),\n        'id'      => 'content',\n        'type'    => 'wysiwyg',\n        'options' => array( 'textarea_rows' => 8, ),\n    ) );\n}\n\nadd_action( 'cmb2_init', 'register_metabox' );\n\n```\n. Yeah it works all ok for me. I can add multiple editors without the need to save/update. This is on WordPress 4.0 + 4.1\n. Are you using it as a plugin? I've built it into the theme.\n. ",
    "sandys": "@adchsm @natebeaty - did you manage to get anything working. I wonder if there is a way to get this to work (or any other plugin with repeatable wysiwyg)\n. @natebeaty do you have a patch or code for your fixes ? what you have sounds much better than anything else.\n. ",
    "starise": "+1 for this feature, it would be very useful.\n. ",
    "chetanchauhan": "\nI wonder if there is a way to get this to work (or any other plugin with repeatable wysiwyg)\n\n@sandys You can take a look at C7 Form Builder. Being able to repeat any field (including editor and group field) is one of the features available.\nAnd, if anyone willing to implement repeatable editor fields in CMB, feel free to borrow code from my plugin. \n. ",
    "wilrevehl": "I started to debug this but ran out of time. The issue seems to reside in cmb2.js. Here's what I determined:\n1. Something causes the cmb.neweditor_id object values 'id' and 'old' to remain IDENTICAL. This means when cmb.afterRowInsert tries to init TinyMCE, it's pointing to the old one. But this alone doesn't resolve the \"canvas undefined\", which seems to be related to quicktags. \n2. Then when I also add:\n   quicktags( tinyMCEPreInit.qtInit[ id ] );\n   QTags._buttonsInit();\n   The \"canvas undefined\" goes away, but the wysiwyg is still not initialized. \n3. But then, if you toggle the tabs (Visual | Text), they both initialize. But the Text view, where QuickTags binds, is duplicated. \nSo this seems very fixable. Wish I could keep at it. Cheers and long live CMB2! Thanks a lot.\n. Update: I noticed the ternary condition for $saved_term favors the $names failover because the result of $names is almost always going to return the terms the field is set to use. It's therefore nearly impossible a default setting would ever work for this, unless you added something like:\n$saved_term = is_wp_error( $names ) || empty( $names ) || $this->field->args( 'default' ) ? $this->field->args( 'default' ) : $names[key( $names )]->slug;\n. Oh, I never made a fork contribution since I never heard back and the issue was small. I'm not really a GIT user as it is. Nothing has changed in CMB2 taxonomy_select. $names is still the sole ruler of the conditional.\n. Right on - maybe WordPress resolved it on their end. I had seen the problem\nacross several similar implementations. Thanks - sounds like good news to\nme!\n. Thanks Justin - I did have your CMB2 file field working on the front-end\nfor logged in visitors with a certain role/permissions. It was fine until a\nWP update. I was able to circumvent the issue by downgrading the version of\njQuery to 1.11.3 like mentioned in the stackexchange thread referenced. I\nhaven't revisited it on the newest of new anything. My guess is something\nto do with a bind/targeting approach of an element has changed in jQuery.\n. ",
    "dnsJunior": "I needed to hove a reapeatable group with a wisiwig field too, and all my custom field were already managed by cmb2 so I coulnd't change to something else without changing everything, so I manage something (not really clean i agree) with an other jquery plugin for wisiwig textarea. I post it here so maybe it can help until the feature exist in cmb2.\nThe pluggin is trumbowygeditor, it's a really simple jquery pluggin for wisiwig.\nSo I change my wisiwig fields in cmb2 for textareas.\nI create a js file that i load in my admin as well as the js and css files of trumbowygeditor.\nI initialize trumbowygeditor for all the textareas in the repeatables blocks (you can easily find the appropriate selector looking for the classes in the code).\nHere there will be 2 problems, when you sort the groups, as well as with tinymce, the wisiwig fields will stay in place, so it's why I chose this pluggin, it has a function that can close the wisiwig, so i target the click event on the \"move up\" and \"move down\" arrows, to close all the trumbowygeditors during the order switch, the with a setTimeout, I re-initialise them.\nThe second problem is when you add a new Group, it will simply duplicate the html of the previous group, so it won't initialise trumbowygeditors on the new field.\nSo I target the click event on the cmb-add-group-row, then I clone the textarea, I empty the cell with all the non-working html, and I initialise again the trumbowygeditor pluggin on this field.\nI tell you, it's more a temporary tricky hack than a real solution, but it do the job until we find better.\nIf someone is interesting in it, I can give him the code.\nHope it'll help someone\n. ",
    "hugominas": "@dnsJunior cool workaround, I was looking to fix this for a while now, would it be possible to have a look at your code.\nThanks,\nHugo\n. Thanks for the amazing plugin @jtsternberg but in the meantime it would be great for me to implement @dnsJunior temporary fix.\nThanks in advance.\n. ",
    "0Neji": "I've been having a look at this today to see if I can manage to at least get the editors working in groups.\nI implemented the steps that @wilrevehl talked about and fixed the tinymce.init call. The settings were being passed through to the 'id' element but I think that's incorrect (I'm by no means a TinyMCE expert though - so correct me if I'm wrong).\nAnyway, this has got me as far as the TinyMCE area now initialising but for some reason it is hidden so it looks as though it hasn't initialised even though that isn't the case. If you run this code, you'll notice that the element with a class of mce-tinymce mce-container mce-panel has a display: none; inline which is causing it to be hidden.\nThis change has also caused the tabs from letting you switch editors.\nI forked the repository and you can find the changes I made at: https://github.com/0Neji/CMB2/commit/0ad6616786ebbb8ed1206a413b02c5b16e1de7a4\nObviously, still miles away from an actual fix but I thought it might be a good idea to post it to see if it gives anyone else more ideas etc.\nI'll try to find more time to look again but hopefully this helps someone!\n. Ah, interesting - I'll check that out. Thanks!\n. ",
    "chrishowardau": "Well! After a couple of days trying to get various methods to work with minimal fuss and hacking (for sorting and adding steps) and that works with existing textarea fields, I have implemented a button activated popup dialog for wysiwyg editing of textareas (using Trumbowyg that @dnsJunior recommended, but you could use any).\nIt has only two steps.\nFirst add an after_field setting containing the button html, to any textarea fields it is required on. e.g.\nphp\n  array(\n      'id'   => 'field-step-description',\n      'name' => __('Step Description', 'pizazzwp-code'),\n      'type' => 'textarea',\n      'after_field' => '<p><div class=\"button wysiwyg-editor\">wysiwyg</div></p>',\n  ),\nAnd secondly, the javascript:\n``` javascript\n(function ( $ )\n{\n  \"use strict\";\n  jQuery( function ()\n  {\njQuery('.cmb2-wrap'  ).on( 'click', '.button.wysiwyg-editor',function ()\n{\n  popEditor(this);\n  //  return false; // Need this if your button is a <button>\n} );\n\nfunction popEditor( t )\n{\n  var theSource = jQuery( t ).closest( '.cmb-td' ).find( '.cmb2_textarea' );\n  var title = jQuery( t ).closest( '.postbox.cmb-row' ).find( 'h3.cmb-group-title' ).text();\n  jQuery( '<div id=\"editor\"></div>' ).dialog( {\n    modal: true,\n    width: 500,\n    title: title + ' description',\n    open: function ( event, ui )\n    {\n      jQuery( '#editor' ).html( '<textarea class=\"theeditor\">' + jQuery( theSource ).val() + '</textarea>' );\n      jQuery( '.theeditor' ).trumbowyg( {\n        semantic: true,\n        fullscreenable: false\n      } );\n    },\n    close: function ( event, ui )\n    {\n      var theEditor = jQuery( '.theeditor' );\n      jQuery( theSource ).val( theEditor.val() );\n      theEditor.trumbowyg( 'destroy' );\n      jQuery( '#editor' ).dialog( 'destroy' );\n    }\n  } );\n}\n\n} );\n}( jQuery ));\n```\n(yes, for readability, I prefer to explicitly write jQuery, not $ )\nAnd some screenshots:\n\n\nIf anyone can improve on this code or the implementation, please do!\n. ",
    "yeahsmaggy": "@natebeaty I also switched to the branch from the pull request and it also resolves the issues for me.\n. Yeah, this is still a problem for me. I often need to have wysiwyg in repeatable group field, but I don't want to limit cmb2 to the branch mentioned in this thread. I would definitely vote to have it as a feature.\n. @johnsonpaul1014  thanks.\n. I had to wrap the outputted content with do_shortcode.\n. $joya_air_page_meta['writers_text'] = do_shortcode(get_post_meta ( $post->ID, '_jo_air_page_writers_text', true ));\n. @tw2113 thanks for the reply and thanks for the awesome code and hard work. Yes you are absolutely correct in terms of what I was expecting it to do and what it is more designed for which is actually documented and I did eventually pick up on it.\nAt first I was thinking I need a select with taxonomy terms loaded into it and then the choice is saved as meta but saving as a taxonomy term on the user object makes more sense because then I can do things with categorising users, which I was planning on doing. \nThe only difference is that I am using the code for an edit profile page. I'll clean it up and post it somewhere. . Absolutely mate will do. . ",
    "nonsensecreativity": "Not really sure whether this feature is really needed. Multiple instance of TinyMCE will be a burden to the browser performance. Before saving the Repeatable Group with WYSIWYG field, no matter how may instance of TinyMCE, firefox reserved up to 150mb physical memory, after saving the field, and reload the page with 5 TinyMCE instance, my firefox memory used up to 2gb of memory :((\n. @spwebguy it didn't crash, just turn really slow and lagging. all of the 5 instances only containing 1 paragraph of lorem ipsum text. Not sure it's firefox issue or not, haven't tested on other browser yet.\n. Same issue here, @danielswallace thanks for this solutions, it works great :). the cmb.cleanRow is indeed the main issue here. This should also fix the one in here https://github.com/WebDevStudios/CMB2/issues/348\n. I've modified @danielswallace solution a little bit to work with multicheck, or any other input that accept multiple values here https://github.com/nonsensecreativity/CMB2/commit/a15bf588171d5f26de71af088b6f594da9f84679\n. Sorry for late response. You can closed this issue, since this commit was created to fix one of the issue in repeatable group field by fixing it's cloned element id and name, because some of the element failed to generated a correct name index. This issue already fixed\n. @jancbeck Do you handle your own form save field in the front end? if you don't need a form, you can use this example\n``` php\nfunction cmb2_get_metaboxes( Array $metabox_ids, $object_id = 0, $echo = true ) {\nglobal $post;\n\nif( ! $object_id && isset( $post->ID ) ) {\n    $object_id = $post->ID;\n}\n$cmbs = array();\n\nforeach( $metabox_ids as $metabox_id ) {\n    $cmbs[] = $cmb = cmb2_get_metabox( $metabox_id, $object_id );\n    if( $echo ) {\n        $cmb->show_form( 0, $cmb->mb_object_type() );\n    }\n}\n\nif( !$echo ) {\n    return $cmbs;\n}\n\n}\nadd_filter( 'the_content', 'cmb2_output_metabox_on_the_content' );\nfunction cmb2_output_metabox_on_the_content( $content ) {\n    cmb2_get_metaboxes( array( '_yourprefix_demo_metabox', '_yourprefix_about_metabox' ) );\n}\n```\nin the codes above it will output the field without any <form> tag so you can put the code just inside your form.\nhope this can help you\n. @nsrosenqvist Do you have any luck? I am also curious about this, I've tried rendering CMB2 field on the widget, but still no success. I only need the CMB2 field to be able to render on the Widget areas without any post processing.\n. @jtsternberg Cool!, Missed that one :D\n. ",
    "johnsonpaul1014": "I have submitted a pull request that fixes this issue.\n. This bug is caused by a call to array_filter in CMB2.php (line 596 in the current code base).  I have commented it out for now, but this was obviously put in for a reason, and I'm hoping the CMB2 folks can answer why or if it is still needed.\n. That's strange.  I have some custom buttons I have added to our editor on the site I needed to implement this change for, and they are added as new editors are added to the group.  Are you using multiple editors in the same group row?\n. I did some investigation into this, and it looks like the plugin you are referring to uses the edButtons JavaScript array to add the buttons.  It would probably be possible to clone this somehow for the new editors, but I think that should be left to someone else as I don't need that feature for my current project.  The change is still a huge step forward, because at least you get a real editor and not a broken one when you add a group row.\n. Thanks.  I agree; this is definitely the place to mention it.  Hopefully someone else can grab the baton from here.\n. I forked off master instead of trunk, so that was also an issue.  I am going to make a new pull request off trunk to see if that works this morning.\nPaul\nDate: Sun, 17 Jul 2016 19:17:33 -0700\nFrom: notifications@github.com\nTo: CMB2@noreply.github.com\nCC: johnsonpaul1@msn.com; mention@noreply.github.com\nSubject: Re: [WebDevStudios/CMB2] Fix for #264, repeatable groups with a WYSIWYG editor (#657)\n@johnsonpaul1014 would love to use your branch for a time-sensitive project but the build appears to be broken. Is the plugin still working on your end?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub, or mute the thread.\n. I have submitted the new pull request.\nPaul\nDate: Sun, 17 Jul 2016 19:17:33 -0700\nFrom: notifications@github.com\nTo: CMB2@noreply.github.com\nCC: johnsonpaul1@msn.com; mention@noreply.github.com\nSubject: Re: [WebDevStudios/CMB2] Fix for #264, repeatable groups with a WYSIWYG editor (#657)\n@johnsonpaul1014 would love to use your branch for a time-sensitive project but the build appears to be broken. Is the plugin still working on your end?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub, or mute the thread.\n. Yes.\n. Thanks for the reply.\nI was able to get the default Grunt task to run once I changed the time zone test.  However the Ajax tests failed in the continuous integration build.  I don't think my code should have affected either of these things, so I wanted to make sure I'm not missing something.  The code I wrote only applies to the WYSIWYG editors created for groups.\nPaul\nSent from my iPhone\n\nOn Jun 7, 2016, at 10:51 AM, Brad Parbs notifications@github.com wrote:\nDo tests fail if you run them locally?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub, or mute the thread.\n. This was not in issue when I did a pull request against trunk like I was supposed to.\n. That's a good point.  It probably makes more sense to enqueue it with the main script having a dependency on it, so a local wysiwyg variable could be used instead of window.wysiwyg.  I was just trying to eliminate the extra server request.\n. I am using the trunk version with the WYSIWYG pull request, version 2.2.3.beta.  I do not see it in another site of ours running 2.1.2.  I made a base install of WordPress along with CMB2 and the attached plugin, and when I save the post without putting anything in the group, I get\n\n|       5 |       1 | _cmb2_test_external_link_group | a:1:{i:0;a:0:{}} |\nin the database.\ncmb2-test.php.zip\n. ",
    "synthview": "Hi, not sure it\u2019s the best to write here or open a new ticket\u2026\nI\u2019ve noticed a bug when comboing WYSIWYG and the action of sorting (moving up or down a sortable item). When textarea \u203aWYSISYG is set as \u201cvisual\u201d sorting does not work on this field. It sorts all other fields but not the WYSIWYGged one (= big mess). As I switch to \u201ctext\u201d, it sorts correctly.\nRunning WP 4.5.2 and CMB2 plugin 2.2.1.\nThanks\n. well, in my case it seems to almost work, just I have to create a new group & save the (custom) post to make it load. BTW I\u2019ve disabled the main content (the_content) form my posts\n. ",
    "madebymartin": "Just found this patched version of the included .js which worked perfectly for me:\nhttp://dev201.nl/cmb2-new-repeatable-wysiwyg-fields-not-initializing/\n. ",
    "vitaly-safonov": "@madebymartin Thanks, working perfectly for me, too.\n. @natashaallsopp Of course you do this. \nMore about this you can see here\nAnd if you watch to text_money field you see the parameter\n\n'before_field' => '\u00a3', // Replaces default '$'\nThis parametr you can add to all fields.\n. \n",
    "slaFFik": "@madebymartin Thanks, it works, but only for init and saving. Sorting doesn't work.\n@jtsternberg Do I correctly understand, that to test your PR I need to use trunk branch?\n. @jtsternberg Tested, seems to be working fine.\nSorting, adding new group, editing, saving - no problem.\nAre there any estimates when it may become available for general public?\n. Excited!\n\n. Already changed in composer.json version to dev-trunk :)\nBut this is possible only during hard development, not when the product is released. \n. My bad :) \nWill redo for trunk branch.\n. I see it's already fixed in trunk. So I believe this issue can be closed.\n. @vlaellayug Not sure I follow your report.\nCould you please provide a snippet when it does NOT work?\nAlso, which version of CMB2 are you using? v2.6.0 released recently.. @jtsternberg \nWhat do you think, should it be a new separate field type select_multiple, or \"just\" add support to a current select as requested in #995?. Here is with SCRIPT_DEBUG:\nUncaught TypeError: Cannot read property 'replace' of undefined\n.../app/plugins/cmb2/js/cmb2.js?ver=2.2.2.1 line 120\n. Yes, you are right (I didn't dive that deep until now). Thanks for clearing this thing for me!\nPersonally I would gladly remove this log anyway. Anyway it's easily accessible on-demand in console via window.cmb2_l10 - so why print it separately? When SCREEN_DEBUG is true - that means heavy development, with lots of js involved, so the less distracting things in console - the better.\nWhat do you think?\n. Just for the reference - this answer on SO helps to hide that annoying error.\n. CMB2 styles are included on a page, but this issue is by the default WordPress styles, see screenshot below. So it's some collide of your styles and default styles.\n\n. I'm using default Midnight. But I have this issue in all admin area colour-schemes.\nChrome 53, Windows 10, WordPress 4.6.1, CMB2 2.2.2.1.\n. \n. But I don't have it. Background is defined as transparent, color is white - that's why I have this issue.\n. Here it is, default one:\n\nI have only 1 own custom plugin activated, which doesn't modify styles for select at all (and doesn't register any 3rd-party css files).\n. I appreciate, that the issue is not closed right away after \"can't replicate\" answer :)\nAs I wrote earlier, I'm using Chrome 53 (current stable). I've also removed all css rules (even those that are clearly unrelated to the problem). The issue is still here.\n. Just copied the example-functions.php file from cmb2 to a new /plugins/test/ folder, made it as a plugin. Included release version on CMB2, deactivated own plugin - so now only your examples and your cmb2 (single version) is activated.\nThe issue is still there. \nSo now I can confidently say - the issue is not in my code.\n. Just updated to Chrome 54 on Windows - the same.\n. I have an access to a paid browserstack.com account, so did some testing...\n\nMacOS Sierra with Chrome 53/Safari 10 - ok.\niPad Pro 9.7 on iOS 10 - ok.\nWin10 with Chrome 53 and 55/IE11/Edge - all fail.\nWin7 with Chrome 53 - fail.\n\nSo yeah, issue on Windows only. There is no Linux in browserstack, so can't test it right now.\n. This issue is referred in changelog of a plugin as fixed:\n\nFix datepicker month/year dropdown text color. On windows, the option text was showing as white (invisible). Fixes #770.\n\nBut the task itself is not marked as fixed and no related commit.. Might be fixed in #780\n. @anhskohbo\nWill there be any other commits?. There is https://github.com/origgami/CMB2-grid, which give ability to do something similar.\n. Hm, well, you are technically right. But I will not edit the description to preserve the conversation to be still valid :). In this particular case I was able to define like this (thanks to @NowellVanHoesen for the idea):\nphp\n// Create a date in UTC, so default usage will preserve the zeros for time.\n$default_date = new \\DateTime( 'midnight', new \\DateTimeZone( 'UTC' ) );\n// Now change the timezone to the site's current - to display it properly preselected.\n$default_date->setTimezone( new \\DateTimeZone( get_option( 'timezone_string' ) ) );\nand pass 'default' => $default_date,.. CMB2 used as a library.\nStacktrace from #1100:\n\n\n```\nUncaught TypeError: Cannot read property 'replace' of undefined\n    at Function.m.template (http://example.com/wp-includes/js/underscore.min.js?ver=1.8.3:5:14723)\n    at n.template (http://example.com/wp-includes/js/wp-util.js?ver=4.9.4:35:29)\n    at n.render (http://example.com/wp-includes/js/wp-backbone.js?ver=4.9.4:378:25)\n    at n.selectionStatusToolbar (http://example.com/wp-includes/js/media-views.js?ver=4.9.4:3660:6)\n    at n.mainInsertToolbar (http://example.com/wp-includes/js/media-views.js?ver=4.9.4:3669:8)\n    at _ (http://example.com/wp-includes/js/backbone.min.js?ver=1.2.3:1:3926)\n    at m (http://example.com/wp-includes/js/backbone.min.js?ver=1.2.3:1:3712)\n    at f (http://example.com/wp-includes/js/backbone.min.js?ver=1.2.3:1:1565)\n    at e.Collection.u.trigger (http://example.com/wp-includes/js/backbone.min.js?ver=1.2.3:1:3592)\n    at n.StateMachine.(anonymous function) [as trigger] (http://example.com/wp-includes/js/media-views.js?ver=4.9.4:538:25)\n```\n\n\nCMB2 Field Registration Code:\n\n\n```php\nadd_action( 'cmb2_admin_init', 'yourprefix_register_demo_metabox' );\nfunction yourprefix_register_demo_metabox() {\n\n    $main_options = new_cmb2_box(\n        array(\n            'id'           => 'test_settings_general',\n            'title'        => 'Main Options',\n            'object_types' => array( 'options-page' ),\n            'option_key'   => 'test_main_options',\n            'tab_group'    => 'test_main_options',\n            'tab_title'    => 'Main',\n            'display_cb'   => 'test_options_display_with_tabs',\n            'autoload'     => true,\n        )\n    );\n    $group_field_id = $main_options->add_field(\n        array(\n            'id'          => 'wiki_test_repeat_group',\n            'type'        => 'group',\n            'description' => __( 'Generates reusable form entries', 'cmb2' ),\n            'repeatable'  => true, // use false if you want non-repeatable group\n            'options'     => array(\n                'group_title'   => __( 'Entry {#}', 'cmb2' ), // since version 1.1.4, {#} gets replaced by row number\n                'add_button'    => __( 'Add Another Entry', 'cmb2' ),\n                'remove_button' => __( 'Remove Entry', 'cmb2' ),\n                'sortable'      => true, // beta\n                // 'closed'     => true, // true to have the groups closed by default\n            ),\n        )\n    );\n\n    // Id's for group's fields only need to be unique for the group. Prefix is not needed.\n    $main_options->add_group_field( $group_field_id, array(\n        'name'       => 'Entry Title',\n        'id'         => 'title',\n        'type'       => 'wysiwyg',\n        'repeatable' => true, // Repeatable fields are supported w/in repeatable groups (for most types)\n    ) );\n}\n```\n\n\n. Note: attached_posts library has an issue (generated warnings/notices in error_log) when \"Search\" ajax request is sent (popup is opened), and when the field is inside the group.\nThis should be fixed inside \\WDS_CMB2_Attached_Posts_Field::maybe_callback in the lib (haven't checked the branch and its code, will do that this week).. Custom endpoint OR add your own data using filters to a default endpoint, but processing the unserialization manually. I would go with a second row for easy solitions or with the 1st one if you expect heavy customizations in the future.. In CMB2_Options::set() we have this:\nphp\n// If no override, update the option\nreturn update_option( $this->key, $this->options );\nEither a filter there (the easiest path), that will allow to add a 3rd param to update_option() call, or a param that is passed to new_cmb2_box() call and should be passed down to the set() method.. @jtsternberg I've tested the PR.\nSwitching from yes to no via both filter and param work.\nSwithcing back from no to yes doesn't work, it always stays the same no.. Default code from https://github.com/CMB2/CMB2-Snippet-Library/blob/master/options-and-settings-pages/options-pages-with-tabs-and-submenus.php snippet (100% the same) + \nphp\nadd_filter( 'cmb2_should_autoload_test_main_options', '__return_true' ); //_false\nor \n'autoload'     => true, // false. Using this\nphp\nupdate_option( 'test_test', time(), true ); // false\nactually udpates autoload no to yes. So you don't need to remove option and update it again to change this value.. Just remember, that update_option() doesn't fire $wpdb->update() to save data if old/new values are the same. \nSo the bug in the commit is that you default to null, which in case of already saved no uses null as default that later omits the $update_args['autoload'] (which is redefined only if not $autoload !== null) completely and don't pass the updated value to ->update() (that's why current code can't swtich from no to yes). \nIn short, you need to always pass the boolean no matter what, instead of a null.. Looks good, tests for both filter and param for all scenarios passed fine when true/false is used. \nThere will be a problem with 'no' string, but I'm not sure something should be done here, at your discretion. Core is explicitly check 'no' and false, but we (as developers) want strict types :)\nThank you for this feature!. @jtsternberg \nWhat about making a case-sensitive check, when the \"default\" is a string (not an array like [ $this, 'omgpizza']?\nThat would actually fix #894 too (in case default was set as \"Next\", which is not next(), obviously).. I actually didn't know that function calls are case insensitive 0_o. It seems to be one of the ridiculous legacy of PHP.\nI'm reading about is_callable() 2nd and 3rd params, and can't get my head around that. That requires testing, that I can't dedicate my time to at this moment.\nPS it seems 2nd param with help only in certain scenarios, but the \"next\" vs \"Next\" case will still be valid.. Duplicate of #1021.. Current PRs against trunk may need a branch change. I don't know whether GitHub provides UI for that.\nDocs and .github templates should be updated.. @jtsternberg \nAre there any plans to actually do that?\nPackagist doesn't support trunk branch name, you can see that there is no dev-trunk branch here https://packagist.org/packages/cmb2/cmb2 in sidebar.. Works for me, thank you for a detailed answer and wiki update!. I believe, this issue could be closed?. Yes, Justin, good threads over there, thank you. I will think about this.. Aslo, add checks against PHP 7.3.. @jtsternberg Could you please clarify the need of various things inside travis.yml?\nExamples:\n- php: 7.1\n      env:\n        - WP_VERSION=latest\n        - CC_TEST_REPORTER_ID=62ea428024560852130fdce61b1b1f8753028c8c6c6a3ef71a3c8deb77ba887f\n        - GIT_COMMITTED_AT=$(if [ \"$TRAVIS_PULL_REQUEST\" == \"false\" ]; then git log -1 --pretty=format:%ct; else git log -1 --skip 1 --pretty=format:%ct; fi)\nWhat does that thing even mean?\nAs the project is aiming for BC, I think testing against PHP 5.2, 5.6, 7.3 and minimum and the latest version of WordPress should be enough, 6 test runs in total.\nSome plugins, like BuddyPress, test only PHP 5.6 and one or two PHP 7.x.. @jtsternberg Those changes were implemented.\nI'm not sure what is a procedure in this project in this case (should I dismiss your initial review, or wait till you check your GH notifications for new commits etc) - so I'm just pinging you, just in case.. @jtsternberg Tests are failing because of #1209.. @staurand Unfortunately, no.\nYou should most likely use a wp_localize_script() function to print WP version in a JS varibale.. This is because 'jquery-ui-sortable' is not added to dependencies in \\CMB2_JS::enqueue() method when enqueueing cmb2.js. ~Most likely it should be added via cmb2_script_dependencies filter at the top of the method.~. Seems broken because of this: 6205b805777f431928f1fb0f15d41f7027231ca9. Seems broken because of 420cca9f4cecb00c51dfb2a279745b004da18360\nWorks on posts/pages inside groups.\nDoesn't work on separate options pages.. Should be tested on a page without sortable library enqueued by default (like on post editing page). Guilty that I forgot to run tests locally before pushing.\nThere was 1 failure:\n1) Test_CMB2_Types::test_js_dependencies\nFailed asserting that two arrays are equal.\n--- Expected\n+++ Actual\n@@ @@\n+    'jquery-ui-sortable' => 'jquery-ui-sortable'\n/home/travis/build/CMB2/CMB2/tests/test-cmb-types.php:1039. Might be a good idea to create a milestone v2.8.0 for that :)\nv2.7.0 won't have it, most likely.. @rubengc That's a good suggestion.\nWe would be happy if you could provide a PR for that :)\nThere is also a somewhat related #1223.\nAnd there is also a list of other \"preview\"-related issues here on GH.. composer.lock was added recently to the repo, and not added to .gitattributes to preserve it after git archive - that's why it's there, and composer.json is not.. Are you talking about those inside a metabox?\nLike this: https://github.com/rubengc/cmb2-tabs. @jtsternberg \nHere should be not null but explicit true.. Older articles, but I see the point. Will update, thanks for the links!. @Mte90 What's the point of this line (127) when we have a predefined value on line 81?. @Mte90 Please improve code style - there should be a space after !: ! empty().. @Mte90 Please don't mix tabs and spaces on the same line. Please switch to WordPress Coding Standards - using tabs only in PHP.. Also, I'm not sure that the prop method sanitizes the value. Please check that and if not - would be nice to have something like sanitize_key() here.. ",
    "cooms13": "Hi, all. While the functionality of a repeating group with a WYSIWYG field works, has anybody solved the problem with it becoming very laggy when there are numerous editors in the page? Some people reported that it's laggy when you have 5 editors. Our team can have upwards of 15 or 20 or more groups, which causes there to be that many editors in the page. I've been trying to figure out a way to get the editors to lazy load, but haven't had a lot of success. Any ideas on how to solve the lagginess issue?. @jtsternberg Thanks for your response. Are you saying that the PR that you integrated solves the problem of the page getting laggy when there are lots of editors? . ",
    "mayeenulislam": "@JayWood thanks a lot for your patch. Hope someone surely gonna get help with this. I loved CMB2, but just switched from it to my core. :(\n. @regidias2006 I switched from CMB2 for that case, and implemented my own framework.\n. @regidias2006 I, and the CMB2 based WP Dev. community would love to have such tutorials or code snippets. We will be thankful to you if you provide so. Thanks in advance. :)\n. ",
    "regidias2006": "Hello,\n@Mayeenulislam, i have your problem in my code you see  a light for this question ? \n. @mayeenulislam I could bring a metabox with ajax and dropdown selector using cmb2 to my website if you want I can provide here or soon ride a tutorial and post the link here, but still thank you for your attention.\n. @JayWood Thanks my friend i look your code, i go to study your code, when i finish my work i will show for all this code, i'm great so happy by you help me thanks.\n. hello, @JayWood thanks I studied your code and completely understand how it works, I could not call the metabox to my front end editor post because I got no way to call get_post_meta because it uses variables while I call the id and meta, you can help me?\n. ",
    "andreacanton": "Sorry, didn't noticed the \"Edit\" button :D\nThanks!\n. ",
    "leogopal": "+1\n. ",
    "BoweFrankema": "+1\n. Awesome, that should work! Thank you! . ",
    "richardtape": ":+1: Justin, WDS team; where do we send money to ensure this is specifically for CMB2. It's invaluable.\n. \nI'm liking the $25 idea. Have a few cold ones on me, folks.\n. ",
    "jfrux": "LOL omg sorry for this.\nI guess I was looking for a full span width text input field and I saw \u2018title\u2019 so I went for it! :p\nWhen I use \u201ctext\u201d it just goes about half way.\nThanks for all you do!\n\nOn Apr 9, 2015, at 1:04 PM, Justin Sternberg notifications@github.com wrote:\ntextfield\n. Maybe off-topic but any tips on where best place is to add said CSS?\nOn Apr 9, 2015, at 1:09 PM, Justin Sternberg notifications@github.com wrote:\nNo worries. May have to add some custom css if you want further control over how they are displayed.\n\u2014\nReply to this email directly or view it on GitHub https://github.com/WebDevStudios/CMB2/issues/278#issuecomment-91294173.\n. \n",
    "rossb": "@jtsternberg will do at my first chance, thanks for the update! :)\n. ",
    "Beee4life": "I think this is what I am looking for as well @vasikgreif BUT I have 1 question... (just for verification).\nIt seems to me the extra capability is added only on this specific page but it remains added. Correct ?\nWhy do I ask ? Yesterday I came to the same conclusion independently and added the manage options role to my desired user role and then extended all my current_user_can statements with specific user roles.\n. My idea as well... but I have added it with user role editor, which gets the same result.\n. ",
    "andrey-filippov": "You can get the id this way:\npublic function your_callback_function ( $url ) {\n    $id = cmb2_utils()->image_id_from_url( $url );\n}\n. ",
    "vandigroup": "Same question here....\n. ",
    "scottsawyer": "Is there any plan to support nested groups in the future?. related #565 . I see #278 was opened 3 years ago.  Is there any progress being made towards nested groups?  This would be a killer feature, and I need it badly for a project.\nI would love to help, is there a branch that I can look at that is being worked on?. Do you know where the primary pain point is?  Like, what is main reason it's not easy?. From what I am seeing when I attempt to create a nested group, it will not render the child group at all.  I don't think JavaScript even comes into play in the initial field rendering, or am I wrong about that?\nI feel like the problem is more related to add_group_field in includes/CMB2.php.  Specifically lines 1524 - 1528:\n```\n        $this->_add_field_to_array(\n            $field,\n            $this->meta_box['fields'][ $parent_field_id ]['fields'],\n            $position\n        );\n```\nIt appears that it doesn't support arbitrary number of parents.  I think what it might need to do is get the array first, determine the nesting order of the parent, then append.\nI think one of two changes might need to happen to get past this step:\n\nFirst do a recursive search in the meta_box['fields'] array for the $parent_field_id to determine exactly where the child field should be appended.  This would require that child field IDs be unique ( currently they are not ). Or,\nChange the add_group_field to accept another parameter that dictates the child field position.  The parameter could be optional to avoid any breaking change, falling back to the current behavior if the parameter is omitted.\n\nI think either option would have pros / cons.  The first option is probably cleaner, but could mean name collisions unless people were pretty careful.  \nThe second option, I am not quite sure what that would look like yet.  public function add_group_field( $parent_field_id, array $field, $position = 0, $depth = 0 )  perhaps?  I think an additional check would need to be made to determine if the $parent_field_id exists at $depth - 1.   Or maybe $depth should be $parent_field_depth. \nAnyway, that is the first hurdle I see, not sure if that would at least get the child group fields to render.\nThoughts?\n. @tw2113  has there been any further discussion around this topic?  I just ran into it again with a project that I would love to use CMB with but this is a major blocker and I don't know exactly where to start.  I'd love to start working on a patch ( won't solve my immediate problem, but seems like a much needed feature ).. I think this would be a fantastic step toward modernizing CMB2 and using it for managing flexible structured data.  One of the recurring issues ( #565 , #543 , #1065 , and probably others ) is the topic of nested groups / repeaters.    \nI think an interesting addition that the changes you are proposing would be adding a selectable group type of control.  In the Drupal space, the Paragraphs project ( https://www.drupal.org/project/paragraphs ), you can set up \"container\" paragraphs ( something like Groups / Box concept ) which contain fields.  If multiple paragraphs are configured, the editor can select between any number of paragraphs.\nLet's say we have 2 groups:\nGroup 1 ( 2 Columns, each with 2 fields ):\n- Group 1.1\n  - Field 1 ( Title )\n  - Field 2 ( Text )\n- Group 1.2\n  - Field 1 ( Image )\n  - Field 2 ( Text )\nColumn 1 | Column 2\n-----------------|--------------------------------\n Title                  |    Image              \n Text                  |    Text                   \nGroup 2 ( 3 Columns, each with 2 fields ):\n- Group 2.1\n  - Field 1 ( Title )\n  - Field 2 ( Text )\n- Group 2.2\n  - Field 1 ( Image )\n  - Field 2 ( Text )\n- Group 2.3\n  - Field 1 ( Image )\n  - Field 2 ( Text )\nColumn 1 | Column 2 | Column 3\n-------|---------------|---------------\n Title                  |    Image                |  Image             \n Text                  |    Text                   |  Text                   \n( I realize I am displaying more of an implementation detail, but using CMB2 for layout control is a realistic use-case )\nThen an Add Group button would allow you to select one of the group \"types\" configured for that post type, and you can add as many as you want of that type.  It would actually be a metabox field of Groups, a reference to a Group configuration.\nThis would allow for creating complex data structures in a manageable way.  I am kind of sad to see this issue hasn't received much attention in the last year.. I just want them to be available to anyone who could use them, adding to the resources section of the readme / wiki would be cool.  I search the issues frequently, so I thought posting here would be good for discovery.. @jtsternberg yep, you are totally right.  I will try to update the readmes this weekend.. @jtsternberg I updated the readme files, would you mind taking a look and seeing if they are informative enough for now?. ",
    "jalberts": "Were you not filtering your meta data with the_content? That would probably be your better option:\nphp\n$wysiwyg = apply_filters( 'the_content', get_post_meta( get_the_id(), $prefix . 'wysiwyg_meta_name', true ) );\nArbitrarily picked variable and meta data names. But something like that instead. Note that my example uses a $prefix variable, instead of how the wiki example does it.\n. Right, I gotcha. I'm just suggesting that you'll probably want to filter a wysiwyg field through the_content instead of using do_shortcode.\nYou'll still get your shortcodes resolved, but you'll also get all the normal defaults you'd expect from the standard TinyMCE (wysiwyg) editor.\n. Good point, and excellent example snippet there!\n. ",
    "pareshsojitra": "I've done this using following code : \n$wysiwyg = apply_filters( 'the_content', get_post_meta( get_the_id(), $prefix . 'wysiwyg_meta_name', true ) );. Its working fine, Thanks.. Hi,\nI'm also getting the same issue, is there any suggestion on where is the problem ? Either Revolution or CMB2 Need to fix the problem ?\nThank you.. - I think the problem is : codemirror library is getting loaded in all pages in WP admin and because of that its affecting other plugin pages/features like WP import, Revolution Slider etc.\n\nTo avoid conflict it should be load in CMB Page/Features only.. Thank you so much for your fixes. \n",
    "nvminhtu": "Thanks @yeahsmaggy , the code run well.\n. ",
    "mahmud-sajib": "@jalberts got the best solution\nThank You!. ",
    "oterox": "@jawittdesigns did you get it to work with a custom table? if so, how?\n. ",
    "stuberm": "``` php\nadd_filter('cmb2_override_meta_value', 'get_custom_data', 10, 4);\nadd_filter('cmb2_override_meta_save', 'save_custom_data', 10, 2);\nfunction get_custom_data($data, $id, $arguments, $field)\n{\n    // Load data from database ...\nreturn 44;\n\n}\nfunction save_custom_data($data, $values)\n{\n    // Print values for debugging purposes\n    echo \"\";\n    print_r($values);\n    echo \"\";\n// Write data into database ...\n\nreturn true;\n\n}\n```\nThe dump will look like:\nArray\n(\n    [type] => post\n    [id] => 1\n    [field_id] => id_of_test_field\n    [repeat] => \n    [single] => 1\n    [value] => 44\n)\n. ",
    "jerry966": "Thank you for the reply and explanation.\n. ",
    "mateusneves": "Thanks, for your answer.\nThis bugfix is native now in the CMB2, or I need to make this change in my files?\nRegards\n. Thanks, @yivi  and @jtsternberg \nThis project is the best. Congratulations for all involved.\n. Already has provision for the solution ?\nAnd tanks for this fantastic project.\n. ",
    "Lindorie": "Hello @yivi,\nI have the same problem with French language and date format 'd/m/Y'.\nI tried to replace the code into the text_date_timestamp function (in CMB2_Sanitize.php) with your correction but it seems not working. Have you made another code modification related to this issue I could have missed?\nphp\n array(\n                'name' => __('Date de fin (si applicable)', 'carine'),\n                'id' => $prefix.'date_fin',\n                'type' => 'text_date',\n                'date_format' => 'd/m/Y'\n            ),\nphp\npublic function text_date_timestamp( $value ) {\n        //return is_array( $value ) ? array_map( 'strtotime', $value ) : strtotime( $value );\n        if ( is_array( $this->value ) ) {\n            $returnee = array();\n            foreach ( $this->value as $value ) {\n                $date_object = DateTime::createFromFormat( $this->field->args['date_format'], $value );\n                $returnee[]  = $date_object ? $date_object->setTime( 0, 0, 0 )->getTimeStamp() : '';\n            }\n        } else {\n            $date_object = DateTime::createFromFormat( $this->field->args['date_format'], $this->value );\n            $returnee    = $date_object ? $date_object->setTime( 0, 0, 0 )->getTimeStamp() : '';\n        }\n        return $returnee;\n    }\nThanks for helping me!\n. Hi there,\nI've created another fork to fix temporarily the issue with non-US dates. \nI tried to use the yivi's fork but it couldn't work and I needed to quickly fix the problem.\nIf you are interested, see: https://github.com/Lindorie/CMB2\nI've edited the readme file for the usage and configuration. \nThe fix is only for the text_date_timestamp field but I think you can use the concept for all the dates fields.\nPlease note that my solution is not the best, but it works and until a fix on the original project it's better than nothing, I guess. :)\n. @yivi,\nI have tried with the fork I found in this comment. But apparently you made some changes? (The link is now broken)\nI didn't notice that you had a specific branch for the date-time-picker, sorry.\nI'm going to test it and I'll tell you.\n. @yivi \nYour fork is working on my project ;-)\n. ",
    "leolweb": "You have to update .po and .mo files to reflect _x( 'mm/dd/yy', 'Valid formatDate string for jquery-ui datepicker', 'cmb2' ); instead the previous __( 'mm/dd/yy', 'cmb2' );\n. ",
    "fabianpimminger": "Thanks @yivi. Your fork really helped me to get the thing working in german. I hope this will be integrated into the main branch! \n. ",
    "dantewebmaster": "any fix for this issue yet?\n. ",
    "Jason-Murray": "Just a little more input on this, we worked around this issue today by using hyphens instead of slashes as the notes on strtotime state that it disambiguates US and EU format dates by the separator used: hyphen for EU, slash for US.  So as long as date_format used - as the separator it worked.\nFor our use case this swap was acceptable, I'm not sure if this make it easier to solve for you CMB devs.\n. ",
    "onnimonni": "I had problems with this using the latest tagged version as of now: 2.1.2.\nWhen I tried to use trunk it worked like a charm!\n@jtsternberg could you release new version? I would love to use tagged version in my composer.json.\n. ",
    "Metroslim": "Hi,\nFor fr_FR the bug is still there.\nI've been able to use the workaround propose by @JasonD33 \nI'm using the 'date_format': 'd-m-Y' on the field and I've changed the CMB2_JS.php file so that the default date format of the datepicker from jquery-ui use the same format.\nThanks @JasonD33 \nAnd thanks CMB devs for the good work.\n. ",
    "ddanielbee": "This is still happening for German month names. Whenever the short month form doesn't comply to default english form, the date isn't saved. Any help here ?\n. ",
    "nreck": "Can still confirm that the bug is still there in the newst release of CMB2.. ",
    "wpalchemist": "This bug appears to still be happening.  :(  I have built a sanitization function to replace slashes with slashes in numerical date formats, but if you have a date format such as F j Y where the month is spelled out, the date will not save.. The problem isn't just the date format - the problem is date format and language.  So F j Y works just fine in English, but not in any other language.  So in theory, I could have my sanitization function check whether we are in English, and if not, then replace any full-text words with numbers instead, but that defeats the purpose of letting users select their own date format.. I am also seeing this issue: I am trying to use MM j, yy and I get MayMay 05, 1717.. I can confirm that I am also having this issue.  If I put in a date_format parameter, the data disappears when I update the post.. Confirming that I am running into this issue as well.. ",
    "joneslloyd": "I've actually figured out how to create a CMB2-only submenu page, so I'll close this.\nThanks!\n. ",
    "brice-lucas": "@joneslloyd care to share how you figured this out?  You cluttered google with your question, but there's no solution.  Boo.. Hiya!  Just going to chime in and say that this feature would be quite useful to me as well.  By enabling this, you can easily create configurable content blocks.  Most of my clients ask for this type of thing, would gladly pay to see it added.. Okay, I pushed further on this and... actually, the issue was adding thickbox support via the built in method:\nadd_thickbox();\nThis is core functionality, so I am surprised that it is the culprit.  add_thickbox only enqueues a script and a style, but wp isn't following their own rules.  I fixed it by wrapping it in a method and firing against the proper hook:\nfunction fnctn_add_thickbox () {\n    add_thickbox();\n}\nadd_action ( 'wp_enqueue_scripts','fnctn_add_thickbox' );\nAnyways, I apologize for the red herring.  Just wanted to let you know.. ",
    "chrisburgin95": "This problem is very similar to the one I am having, with a gallery I am only able to remove images if they have been moved to the bottom of the list first. Has anyone found a better solution for this problem?\n. ",
    "michaeljpowell": "\n1, have the same issue after just upgrading to 2.0.6 today.\n  I have CMB2 included directly into my theme.\n. Thank you! It's working well for me now :)\n. I get this same error when I'm on a custom options page (specifically with the file upload field). When it's within a page it appears to be working fine.\n\nI am using the WP plugin version.\n. ",
    "ashleykolodziej": "You should be able to add a group field back in if you need it again, though, right? When you first open up a page, you don't have a repeatable field by default - you have to add it. It makes sense that if you delete all fields, this is the state you go back to. From a client standpoint, it's unintuitive to have to add to delete. That's something I can explain to them, though.\nThe only problem I'm having with this - if I mark a field as required in the attributes, I can't save the page without filling that field out - so I can't save the page with an empty callout. I could just check if certain things are empty when I display my callout, but I'd prefer to use the required attribute so it's really clear to the user if something I need is missing.\nThis is how I have the fields set up - Footer Callout is my repeatable group that I'd like to be able to delete. When I go to save it, the callout title field is required, so I can't save the page with this blank callout to reset. Any ideas?\n\n. Wow - I was convinced you started out with no fields to fill in, but you're right, there is at least one repeatable field from the start, even when you make a new page. My bad. :)\nI'd imagine it being empty with an \"add\" button, like below - for the way I'm using it, it makes sense to me to be able to add/delete everything, since I'm using them to control chunks of optional content on a page. On the one hand, I like that you see what information you need right away, from the beginning - but I guess it threw me off to be able to delete everything without a problem and then hit a wall with the last one. That makes me think that there needs to be at least one callout, which isn't the case with the content type I'm building with this - I know there are situations in my site where no footer callouts are needed at all. Maybe there could be an option to allow an empty state? I think if it starts as empty, you add callouts, you delete all of them, and it goes back to being empty, that makes sense for content that is completely optional - and it's reassuring to me that I know it won't show up on my page if I save it, because it's not there.\nEither way, I'll look into the jQuery on submit magic. Thanks for your help!\n\n. ",
    "nosegraze": "This is something I'd like to see too. Maybe a nice solution would be:\nIf they try to remove the last item, simply empty all fields so they have no values and then hide the container. So it's technically still there, but just hidden to the user?\n. ",
    "fu-raz": "Wow this looks like a really old issue, but was revived recently?\nIs there an official version where this feature is added? Or do I have to pull master for this? Also I was wondering if there's a way to define the number of items that get added to the UI.\nSomething like:\n$cmb->add_field([\n'name' => 'The group',\n'id' => 'prefix_group_id',\n'type' => 'group',\n'options' => [\n'group_title' => __('Title'),\n'add_button' => __('Add item'),\n'remove_button' => __('Remove item'),\n'sortable' => true,\n'closed' => false,\n'open_ui_items' => 3\n]\n]);\nBut with a better name than 'open_ui_items' and also 0 being an option (getting on topic again).. ",
    "stlouisweb": "It's not a very custom implementation, I'm simply trying to embed the plugin within another plugin (that isn't doing anything else yet), as described in the installation instructions in the README.md file. That sounds like a bug to me, or perhaps the documentation is lacking or out of date?\n. Got it working but the process is a little cumbersome, I must be doing something wrong or there is something amiss with my environment. stackoverflow\n. ",
    "miklb": "@jtsternberg is this documented yet? is the classess param the same as for the form?\n. ",
    "tonezzz": "No problem, so I assume it's not possible.  I'll have to find my own way then.\nAnyway, thanks for your hard working to make this great library.\nHave a nice day.\nCheers,\nTony.\n. Thank you very much davekellam, your work around has just saved my life.  I've been researching on this exact issue since yesterday.\n. ",
    "vpratfr": "Could be a nice addition to have a shortcut to do that.\nSomething like 'object_types'  => 'any-cpt' where args would be show_ui => true by default.\n. ",
    "gyrus": "Thanks - but that seems a bit inflexible.\nIf I want to be able to limit display according to a user's capability, I'd need to create a separate function for each capability I want to deal with (unless there's a way of passing args?). If I happen to have another kind of limitation, I'd have to create functions for every combination of the two limitations - and straight away it's impractical.\nAgain, this could be made more flexible if we could pass custom arguments as well, for the function to check against, but these seem to be stripped out.\n. Allowing show_on to pass an array of arrays, any number of which could be custom, dealt with by the cmb2_show_on hook, would be infinitely scalable.\n. Great, I think I've got it:\n``` php\n$cmb = new_cmb2_box( array(\n    'id'                => 'slideshow_config_box',\n    'title'             => __( 'Slideshow configuration' ),\n    'object_types'      => array( 'page' ),\n    'show_on'           => array(\n        'key'       => 'id',\n        'value'     => array( 2 )\n    ),\n    'show_on_cb'        => 'pilau_cmb2_show_on_custom',\n    'show_on_custom'    => array(\n        'user_can'          => 'publish_pages',\n    ),\n));\nfunction pilau_cmb2_show_on_custom( $cmb ) {\n    $show = true;\n    $show_on_custom = $cmb->prop( 'show_on_custom' );\nif ( ! empty( $show_on_custom ) ) {\n\n    // Loop through restrictions\n    foreach ( $show_on_custom as $show_on_type => $show_on_condition ) {\n\n        switch ( $show_on_type ) {\n            case 'user_can': {\n                // Check user capability\n                $show = current_user_can( $show_on_condition );\n                break;\n            }\n        }\n\n        // If a condition has failed, break out\n        if ( ! $show ) {\n            break;\n        }\n\n    }\n\n}\n\nreturn $show;\n\n}\n```\nThe show_on_custom arg should then be infinitely extendable. It currently has an implicit AND relationship between multiple conditions. I guess the syntax could be changed to work like WP_Query meta queries, with an array of arrays for show_on_custom, and you can 'relation' => 'OR' to change the test. However, I can't think of instances where I'd need to use an OR relationship between multiple conditions.\nIs there a reason the default show_on uses:\nshow_on => array( 'key' => 'id', 'value' => array( 2 )\nInstead of:\nshow_on => array( 'id' => array( 2 ) )\n?\n. OK, so it seems hooking to admin_init doesn't work at all - it needs to be cmb2_init.\nBut, I think I've solved the problem using a callback to populate options.\n. Bingo! Many thanks.\n. I also need a multiple select box. I have cmb-field-select2 installed, which is great for some purposes, but for this field I need a normal select so I can include a tree-like list of the site's pages. The hierarchy needs to be visible. For the same reason, checkboxes won't work. I can add 'multiple' to the attributes, so the interface is good, but there doesn't seem to be an option to make sure every selected option is saved.\n. Hi, any idea about this? It's actually pretty crucial for a project I'm working on. I'm sure someone familiar with the plugin could tweak things quickly. If that's not going to happen, I'll have to look into it myself, or use another plugin (seems a bit much to switch such a crucial aspect of a project for something that should be standard). At least, could you point me in the right direction to make this change and submit a pull request? Cheers.\n. More of a bugfix I'd say - why would a multiple select not store all the values selected? Anyway, any idea of how long this might take? Would be great if someone who knows the code could hit the proverbial right nail, but if it'll take a while I'll roll my sleeves up and have a go so we can be on course with our project.\n. I'm having the issue with CMB2 symlinked locally in my dev environment. My workaround:\nadd_filter( 'cmb2_meta_box_url', 'pilau_cmb2_meta_box_url' );\nfunction pilau_cmb2_meta_box_url( $url ) {\n    if ( defined( 'WP_LOCAL_DEV' ) && WP_LOCAL_DEV ) {\n        $url = plugins_url( 'cmb2/' );\n    }\n    return $url;\n}\nI wonder why plugins_url() isn't used in the first place?\n. Ah, yes, forgot it could be packaged with a theme.\nI have all my own plugins, and any I may contribute to, in a local folder outside the web root, /www-projects/, cloned from GitHub. I then just symlink those plugins locally. I can see there's a problem if you have to cater for the different locations CMB2 may be in - and maybe the filter is the best or only option? That's working for me for now, so no urgency, but interested if you find a solution that covers all bases.\n. I didn't realise this had happened, I guess I only started symlinking plugins after 3.9. But maybe of use:\nhttps://make.wordpress.org/core/2014/04/14/symlinked-plugins-in-wordpress-3-9/\n. I've just tried a WYSIWYG in a repeatable group, and my experience (in Chrome) is that the editor displays OK when you add a group, but the editor space doesn't accept the cursor. If you save the post, then things are OK. I'm guessing there's a bit of TinyMCE initialisation which needs to be done dynamically by the group repeat function?\n. Thanks @daveromsey, will have a look if I get a chance. For now I'm just putting a notice in to warn users to save after adding a new instance of the group.\n. Of course! Thanks.\n. I think I would have posted if I did, so I guess not!\n. This is the field definition:\n$month_options = array( '00' => '[No month]' );\nfor ( $m = 1; $m <= 12; $m++ ) {\n    $month_options[ str_pad( $m, 2, '0', STR_PAD_LEFT ) ] = date(\"F\", mktime(0, 0, 0, $m, 10));\n}\n$cmb->add_field( array(\n    'name'              => __( 'Written - month' ),\n    'id'                =>  '_pilau_written-month',\n    'type'              => 'select',\n    'options'           => $month_options,\n    'on_front'          => false,\n) );\n\n. Thanks - so you'd prefer this stuff kept as snippets, rather than as part of the plugin?. Thanks, I'll have a crack at a PR.. Excellent, many thanks!. ",
    "curtismchale": "So I've likely got to dig through a bunch of other plugins and figure out which one has me pinned to the older API.\n. So copy/paste from the docs page shows me absolutely nothing on a fresh release (2.0.6) using the default hook cmb2_init.\nIf I only change the hook to cmb_meta_boxes but don't return an array it works.\n``` php\nadd_action( 'cmb2_meta_boxes', array( $this, 'cmb2_sample_metaboxes' ) );\n    /*\n     * Define the metabox and field configurations.\n     /\n    function cmb2_sample_metaboxes() {\n    // Start with an underscore to hide fields from custom fields list\n    $prefix = '_woo_product_vis_';\n\n    /**\n     * Initiate the metabox\n     */\n    $cmb = new_cmb2_box( array(\n        'id'            => 'woo_product_vis',\n        'title'         => __( 'Product Visibility', 'cmb2' ),\n        'object_types'  => array( 'product', ), // Post type\n        'context'       => 'side',\n        'priority'      => 'high',\n        'show_names'    => true, // Show field names on the left\n        // 'cmb_styles' => false, // false to disable the CMB stylesheet\n        // 'closed'     => true, // Keep the metabox closed by default\n    ) );\n\n    // Regular text field\n    $cmb->add_field( array(\n        'name'       => __( 'Restricted Product to Purchasers of:', 'cmb2' ),\n        'desc'       => __( 'This product will only show to users that have purchased the product specified above', 'cmb2' ),\n        'id'         => $prefix . 'text',\n        'type'       => 'text',\n        // 'sanitization_cb' => 'my_custom_sanitization', // custom sanitization callback parameter\n        // 'escape_cb'       => 'my_custom_escaping',  // custom escaping callback parameter\n        // 'on_front'        => false, // Optionally designate a field to wp-admin only\n        // 'repeatable'      => true,\n    ) );\n\n```\nObviously this is inside a class.\nIf I make the action:\nphp\n        add_action( 'cmb2_init', array( $this, 'cmb2_sample_metaboxes' ) );\nNo metaboxes show up at all in my product.\n. yeah I tried all the page/post stuff to get it working as well. I also tried it out of the class.\nAll I can figure is a bug with an older version then.\n. ",
    "szepeviktor": "It could be that your browser does not support the required attribute on that field.\n. ",
    "turegjorup": "I can confirm I'm seeing the same issue. WP 4.4 beta4, CMB2 2.1.2 on both Firefox and Chrome. I'm also only seeing it with a repeatable datetime field. \nLooking through #446 there are some changes to the code taht fails, but I still don't think they properly account for repeating datetime fields.\n. Just tested with WP 4.4-beta4-35734, repeatable datetime fields now works as expected. Thank you for fixing it.\n. Does this account for repeating datetime fields? \nI'm seeing this issue mentioned in #330 as well. I was looking through the code and believe I have narrowed it down to the deleted line 215 failing to account for repeatable fields. However I havnt had the time to try to fix it.\n. ",
    "BobaWebDev": "It gets corrupted. If you get the value from the export and try to unserialize it won't work. Not sure what and why, looking into it.\nUpdate: Seems to be because of quotes, the serialization does't get handled properly.\n. It seems the value itself is somehow corrupted, not just related to export/import, I went into phpMyAdmin, took the value, did unserialize on it and got \"error at offset...\"\nBut when I use get_post_meta() it gets unserialized properly.\nHowever it does get completely broken if I reapply the exact same value to the same field via phpMyAdmin. \nWeird stuff.\n. ",
    "jedrzejchalubek": "But on version CMB2 2.0.6 this error not appears. I replacing worpdress jquery with cdn, need to test this out. Thanks.\n. ",
    "EvanHerman": "I too was getting the same error using the version up here on GitHub and the version found in the WordPress plugin repo. Whenever I included a color picker field I was getting the same error as the OP.\nThis was on a fresh TwentyFifteen install with no other plugins installed/active.\nAdding the following, just below colorpicker field definition, did the trick for me:\nphp\nwp_enqueue_style( 'wp-color-picker' );\nwp_enqueue_script( 'wp-color-picker' );\nExample in the example-functions.php file:\n``` php\n/\n Options fields ids only need\n to be unique within this option group.\n Prefix is not needed.\n/\n$cmb_options->add_field( array(\n    'name'    => ( 'Site Background Color', 'cmb2' ),\n    'desc'    => ( 'field description (optional)', 'cmb2' ),\n    'id'      => 'bg_color',\n    'type'    => 'colorpicker',\n    'default' => '#ffffff',\n) );\nwp_enqueue_style( 'wp-color-picker' );\nwp_enqueue_script( 'wp-color-picker' );\n```\nIt seems to only be the color picker field that's causing this issue.\nEvan\n. Great, thanks for addressing the issue.\nEvan\n. ",
    "richjenks": "When adding a metabox set the context to side.\n. ",
    "vajrasar": "@jtsternberg Thanks for reply. I tried that and am getting error - \nFatal error: Using $this when not in object context in value args.\nCode used -\n```\nfunction cmb2_render_twotime_field_callback( $field, $value, $object_id, $object_type, $field_type ) {\n// make sure we specify each part of the value we need.\n$value = wp_parse_args( $value, array(\n    'stime'     => '',\n    'etime'       => '',\n) );\n\n?>\n<div class=\"alignleft\">\n    <p><label for=\"<?php echo $field_type->_id( '_stime' ); ?>'\">Start Time</label></p>\n        <?php echo $field_type->text_time( array(\n        'name'  => $field_type->_name( '[stime]' ),\n        'id'    => $field_type->_id( '_stime' ),\n        'value' => $this->field->get_timestamp_format( 'time_format', $value['stime'] ),\n        'desc'  => '',\n        ) ); ?>\n</div>\n<div class=\"alignleft\">\n    <p><label for=\"<?php echo $field_type->_id( '_etime' ); ?>'\">End Time</label></p>\n        <?php echo $field_type->text_time( array(\n            'name'  => $field_type->_name( '[etime]' ),\n            'id'    => $field_type->_id( '_etime' ),\n            'value' => $this->field->get_timestamp_format( 'time_format', $value['etime'] ),\n            'desc'  => '',\n        ) ); ?>\n</div>\n<br class=\"clear\">\n<?php\necho $field_type->_desc( true );\n\n}\nadd_filter( 'cmb2_render_twotime', 'cmb2_render_twotime_field_callback', 10, 5 );\nadd_action( 'cmb2_init', 'vg_event_metabox' );\nfunction vg_event_metabox() {\n    $prefix = 'cmb2_';\n$cmb_obj = new_cmb2_box( array(\n        'id'            => 'event_metabox',\n        'title'         => 'Additional Event Details',\n        'object_types'  => array( 'event', ),\n        'context'       => 'normal',\n        'priority'      => 'high',\n        'show_names'    => true,\n    ) );\n\n    $cmb_obj->add_field( array(\n        'name'       => 'Event Start Date',\n        'desc'       => 'Specify when Event Starts from',\n        'id'         => $prefix . 'sdate',\n        'type'       => 'text_date',\n    ) );\n    $cmb_obj->add_field( array(\n        'name'       => 'Event End Date',\n        'desc'       => 'Specify when Event ends',\n        'id'         => $prefix . 'edate',\n        'type'       => 'text_date',\n    ) );\n/* $cmb_obj->add_field( array(\n        'name'       => 'Event End Time',\n        'desc'       => 'Specify at what Time does event ends',\n        'id'         => $prefix . 'etime',\n        'type'       => 'text_time',\n    ) ); */\n    $cmb_obj->add_field( array(\n        'name' => 'Event Timing',\n        'desc' => 'Provide Start/End time of Exhibition',\n        'id'   => $prefix . 'timing',\n        'type' => 'twotime',\n    ) );\n    $cmb_obj->add_field( array(\n        'name'    => 'Do you want to show this event at ',\n        'desc'    => 'select the pages where you want to show this event',\n        'id'      => $prefix . 'showevent',\n        'type'    => 'multicheck',\n        'options' => array(\n            'check1' => 'Main Page',\n            'check2' => 'Visitors',\n            'check3' => 'Exhibitors',\n        ),\n    ) );\n\n}\n```\n. Thanks @jtsternberg I will update that and reply asap.\n. @jtsternberg I implemented your edited version of code and everything works fine until I try to save some time in stime and etime fields. It throws the error ->\nWarning: strtotime() expects parameter 1 to be string, array given in \\CMB2_Utils.php on line 113\nCode am using is -\n``` php\nfunction cmb2_render_twotime_field_callback( $field, $value, $object_id, $object_type, $field_type ) {\n// make sure we specify each part of the value we need.\n$value = wp_parse_args( $value, array(\n    'stime'     => '',\n    'etime'       => '',\n) );\n\n?>\n<div class=\"alignleft\">\n<p><label for=\"<?php echo $field_type->_id( '_stime' ); ?>'\">Start Time</label></p>\n    <?php echo $field_type->text_time( array(\n    'name'  => $field_type->_name( '[stime]' ),\n    'id'    => $field_type->_id( '_stime' ),\n    'value' => $field->get_timestamp_format( 'time_format', $value['stime'] ),\n    'desc'  => '',\n    ) ); ?>\n</div>\n<div class=\"alignleft\">\n<p><label for=\"<?php echo $field_type->_id( '_etime' ); ?>'\">End Time</label></p>\n    <?php echo $field_type->text_time( array(\n        'name'  => $field_type->_name( '[etime]' ),\n        'id'    => $field_type->_id( '_etime' ),\n        'value' => $field->get_timestamp_format( 'time_format', $value['etime'] ),\n        'desc'  => '',\n    ) ); ?>\n</div>\n<br class=\"clear\">\n<?php\necho $field_type->_desc( true );\n\n}\nadd_filter( 'cmb2_render_twotime', 'cmb2_render_twotime_field_callback', 10, 5 );\nadd_action( 'cmb2_init', 'vg_event_metabox' );\nfunction vg_event_metabox() {\n    $prefix = 'cmb2_event_';\n$cmb_obj = new_cmb2_box( array(\n        'id'            => 'event_metabox',\n        'title'         => 'Additional Event Details',\n        'object_types'  => array( 'event', ),\n        'context'       => 'normal',\n        'priority'      => 'high',\n        'show_names'    => true,\n    ) );\n\n    $cmb_obj->add_field( array(\n        'name'       => 'City',\n        'desc'       => 'Specify City where Event is scheduled',\n        'id'         => $prefix . 'city',\n        'type'       => 'text',\n    ) );\n    $cmb_obj->add_field( array(\n        'name'       => 'Event Venue',\n        'desc'       => 'Specify Venue of the Event',\n        'id'         => $prefix . 'venue',\n        'type'       => 'text',\n    ) );\n    $cmb_obj->add_field( array(\n        'name'       => 'Event Map',\n        'desc'       => 'Specify URL of Event Venue Map (If available)',\n        'id'         => $prefix . 'map',\n        'type'       => 'text',\n    ) );\n    $cmb_obj->add_field( array(\n        'name'       => 'Event Start Date',\n        'desc'       => 'Specify when Event Starts from',\n        'id'         => $prefix . 'sdate',\n        'type'       => 'text_date',\n    ) );\n    $cmb_obj->add_field( array(\n        'name'       => 'Event End Date',\n        'desc'       => 'Specify when Event ends',\n        'id'         => $prefix . 'edate',\n        'type'       => 'text_date',\n    ) );\n    $cmb_obj->add_field( array(\n        'name' => 'Event Timing',\n        'desc' => 'Provide Start/End time of Exhibition',\n        'id'   => $prefix . 'timing',\n        'type' => 'twotime',\n    ) );\n    $cmb_obj->add_field( array(\n        'name'    => 'Do you want to show this event at ',\n        'desc'    => 'Select locations where you want to show this event',\n        'id'      => $prefix . 'showevent',\n        'type'    => 'multicheck',\n        'options' => array(\n            'check1' => 'Main Page',\n            'check2' => 'Visitors',\n            'check3' => 'Exhibitors',\n        ),\n    ) );\n\n}\n```\n. So, you mean I need this -> \n``` php\nfunction cmb2_sanitize_twotime_field( $check, $meta_value, $object_id, $field_args, $sanitize_object ) {\nif ( ! is_array( $meta_value ) || ! $field_args['repeatable'] ) {\n    return $check;\n}\nforeach ( $meta_value as $key => $val ) {\n    $meta_value[ $key ] = array_map( 'sanitize_text_field', $val );\n}\nreturn $meta_value;\n\n}\nadd_filter( 'cmb2_sanitize_twotime', 'cmb2_sanitize_twotime_field', 10, 5 );\nfunction cmb2_types_esc_twotime_field( $check, $meta_value, $field_args, $field_object ) {\nif ( ! is_array( $meta_value ) || ! $field_args['repeatable'] ) {\n    return $check;\n}\nforeach ( $meta_value as $key => $val ) {\n    $meta_value[ $key ] = array_map( 'esc_attr', $val );\n}\nreturn $meta_value;\n\n}\nadd_filter( 'cmb2_types_esc_twotime', 'cmb2_types_esc_twotime_field', 10, 4 );\n```\nDo I need to change sanitize_text_field to something else?\n. But it still shows the same warning msg if I use the above mentioned code.\n. @jtsternberg Thanks for all your help so far.\nFinally, after debugging for a while with a fellow dev I ended up using (string) in line 113 of CMB2_Utils and it worked. So, the line is now - return $this->is_valid_time_stamp( $string ) ? (int) $string : strtotime(  (string) $string  );\nand the whole function is -\n```\n/*\n     * Returns a timestamp, first checking if value already is a timestamp.\n     * @since  2.0.0\n     * @param  string|int $string Possible timestamp string\n     * @return int                  Time stamp\n     /\n    public function make_valid_time_stamp( $string ) {\n        if ( ! $string ) {\n            return 0;\n        }\n    return $this->is_valid_time_stamp( $string )\n        ? (int) $string :\n        strtotime( (string) $string );\n}\n\n```\nI just want to ask your opinion on whether you can propose a use-case/scenario where using (string) can cause issues?\nAlso, I digged into db and found that the values are stored as this -\n\n. @jtsternberg Done - https://github.com/WebDevStudios/CMB2/pull/389\n. Just because this is my first PR hence the question - do I need to delete the branch now, as you have merged the PR?\n. @jtsternberg Thanks. Though, I see that the description of the function also needs a fix as @return int   | string \nShould you be doing that or I should repeat the same PR process?\n. ",
    "fredclaymeyer": "Bumping with video:\nhttps://www.youtube.com/watch?v=3oyPrcLEzQk\nAs the video shows:\n- The first radio element in the repeater field works just fine.\n- It takes several \"tries\" to get new elements to save. It seems hard to predict what saves: sometimes neither the element nor its value, sometimes just the element but not its value, and sometimes (after either two or three tries) both.\nAlso, subsequent elements do seem to take on the previous element's value by default, as #257 seems to describe.\n. ",
    "kshengelia": "+1, same bug with me \nHere are screenshots, just in case:\n\n\n\n. \nSo this is a screenshot. A repeater field with my field (code is also shown on screenshot).\nSo the third item is added by \"Add New\" button after page reload (so the other two was already there when I opened this page).\nThis third item took all the values and arguments of CMB field from the second item. $field, $escaped_value and all others are taken from second item.\nYou can see that 41 is an ID of \"Basketball\" post and it is copied to third item as well.\n. Sorry, I don't understand, could you rephrase?. ",
    "hexagongirl": "Ah, ok - got it! (didn't twig the lack of break and it following through to next case).  So it's using wp_kses_post for wysiwyg.\nThanks so much for the quick reply.\n. @tw2113 - thanks! On save, the values are stored in an array:  \n```\n[12-Oct-2016 14:55:31 UTC] Array\n(\n    [0] => Array\n        (\n            [title] => sdfsdfsfs\n            [description] => sdflsjdlfa fa\n        )\n[1] => Array\n        (\n            [title] => sdfgsgfds\n            [description] => afjaljf aljf dklajf lajs dfljal \n        )\n)\n```\nBut I can't see any way to load a set of default values like this when the form is first loaded? Sorry if I'm being dense!\nI can only set a single default for each sub-field in the wiki_test_repeat_group (i.e. [0] in my array above). From the $cmb object:\n```\n                [wiki_test_repeat_group] => Array\n                    (\n                        [id] => wiki_test_repeat_group\n                        [type] => group\n                        [description] => Testing\n                        [options] => Array\n                            (\n                                [group_title] => Entry {#}\n                                [add_button] => Add Another Entry\n                                [remove_button] => Remove Entry\n                                [sortable] => 1\n                            )\n                    [fields] => Array\n                        (\n                            [title] => Array\n                                (\n                                    [name] =>Title\n                                    [id] => title\n                                    [type] => text\n                                    [default] => Testing title default\n                                )\n\n                            [description] => Array\n                                (\n                                    [name] => Description\n                                    [id] => description\n                                    [type] => textarea_small\n                                    [default] => Testing description default\n                                )\n\n                        )\n\n                )\n\n```\n. Thanks, that's kind of what I was thinking... But I need to get those\nvalues into the repeater field in the front end form for the user to edit -\ni.e. before the form is submitted/anything is saved\nIs there a way to pre-populate the values into the repeater field (from my\nJSON array), before anything is saved?\nAppreciate your help on this.\nOn 13 Oct 2016 18:45, \"Michael Beckwith\" notifications@github.com wrote:\n\nIf the JSON uploaded is going to be consistent, then you could process the\nJSON and iterate over each JSON item and push it into an array. Then once\nall is processed, save the one array value into the appropriate field.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/768#issuecomment-253585463,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AIGM-Hhov7bqRLa3lGTWfuMeBp73zrQ8ks5qzm4ZgaJpZM4KU_B2\n.\n. The JSON will be uploaded by the user on the site, immediately prior to rendering the CMB2 form.\n\nYep - you're spot on as regards the second point. We don't need the values saved, rather just read and provided in the inputs for the user to adjust as necessary.\nTo give some context - the JSON represents a document, which we need to allow the user to upload, edit some of the fields via a user interface (i.e. CMB2 form) and then re-save to JSON. We don't actually need to create anything in the WP DB at all (& it would be far easier/cleaner if we didn't).\nSorry, this has probably turned into something more appropriate for a support forum, let me know if you'd prefer me to post it there instead.\n. Thanks so much both - that is really helpful! Working on pulling something together now, will keep you posted how I get on.\n. It worked! I've got a proof of concept up and running (at least for the first part - populating the fields via JSON). Need to work on saving the data back to JSON, but am hoping that'll be fairly straightforward.\nThere is one section in the JSON where we've potentially got (in the context of CMB2) a repeating group within a repeating group. Looking at the docs, I don't think this is feasible with CMB2? (& would probably be pretty nasty from a UX perspective anyhow).\nMy thinking is I'll create a 3rd form on the fly (1st form - JSON upload, 2nd - main config, with JSON values as default). This form would have X repeating fields based on the submission from 2nd form. I'll store the data from form 2 as JSON in a hidden field, so we can persist and then finally save to JSON after submission of 3rd form. Does that sound reasonably sensible?\nAm sure CMB2 wasn't intended for use quite like this \ud83d\ude04 but interesting nonetheless!!! Thanks for all your help @tw2113 and @jtsternberg. Can I make a donation anywhere?\n. Scrap that 3rd paragraph, not sure that's going to work too well.\nAm I right in thinking it's not possible to add fields on the fly with JS?\nRegardless, presumably it's possible to show/hide fields based on other field values - using vanilla js/jQuery? It's not ideal, but we could create X individual repeating groups, hide them by default then show one by one, based on how many repeating rows have been used. Might be a workaround if we can't work it any other way...\n. Thanks - am working around it another way for now, but good to know that's there.\n@jtsternberg - is there any reason why your cmb2_override_{$field_id}_meta_value-filter.php snippet shouldn't work with the standard cmb2_override_meta_value filter?\nIf I stick in a conditional to check for an ID, it works fine; if I stick in a conditional to check for field type (or even a custom data attribute), I get into the 'IF', i.e. the type is as expected, but the group value is not set (or it's set then overwritten).\nAt one point I thought this was because the group children would subsequently run through this filter too. But $field_id is the same for the children as for the group, yet when I use the ID as the conditional, it works beautifully.\nStumped!\n``` php\nfunction cppg_override_meta_value( $value, $object_id, $args, $field ) {\n// Only set the default if the original value has not been overridden\nif ( 'cmb2_field_no_override_val' !== $value ) {\n    return $value;\n}\n\n$field_id = $args['field_id'];\n$field_type = $field->args('type');\n\n// This DOES work\nif( 'myFieldID' === $field_id ) {\n    write_log( $field_id );\n    $json = '[{\"category\":\"1st category\",\"description\":\"This is a <strong>description<\\/strong>\"}]';\n    $defaults = json_decode( $json, 1 );\n    $value = $defaults;\n}\n\n// This DOESN't work - I get into IF statement, but value not set\nif( 'group' === $field_type ) {\n    write_log( $field_type ); // this works fine\n    $json = '[{\"category\":\"1st category\",\"description\":\"This is a <strong>description<\\/strong>\"}]';\n    $defaults = json_decode( $json, 1 );\n    $value = $defaults;\n}\n\nreturn $value;\n\n}\nadd_filter( 'cmb2_override_meta_value', 'cppg_override_meta_value', 10, 4 );\n```\n. Thanks both... will add in some more checks re. context.\nBut any ideas why checking for field type rather than field ID (as per above code) doesn't then allow me to set the group field value correctly? Have tried this with a minimal test case and the behaviour seems the same - both conditionals works as expected, but the value only gets set if I test for ID.\n. Thanks @jtsternberg, that works! - i.e. using $field->group in the conditional rather than what I had.\nI confess I still have no idea why this is - it's a complete mystery as to why in my example I was getting into the if loop, but it wasn't setting the values. If it's an easy explanation I'd appreciate understanding more, but don't want to impose any more on your time if it's complicated.\n. @jtsternberg - to answer your question re. checking for field type - this is so we can handle the population of group field data differently to standard fields. We've got a relatively complex JSON document being uploaded by the user; the aim is to allow them to edit this via a form and save a new version to JSON. We're using a 2nd (static) JSON file as a 'mapping' - allowing us to a) create the CMB2 fields on the fly, and b) specify which of the uploaded JSON keys map to which form fields (so we can then set the defaults from the uploaded JSON). I'm using this 2nd 'mapping' JSON to prevent having to hard code everything directly in PHP.\nNot sure whether that will make sense or not?! - but regardless, I've added an early check for the $object_id (always set to a false temporary value as we're not touching posts) so we're not in danger of affecting anything else. Thanks for pointing this out.\n. Got it - it took a while, but got there eventually :)\n$field->group is checking whether this is a subfield that's part of a group; 'group' === $field->type() is checking for the parent group field.\nWe need to return the whole array of group values for both the parent group and subfields (i.e. not just the individual subfield value in the case of subfields) - as it expects the whole array for parsing & will return false if doesn't get it.\nHope that's about right - thanks again!\n. @cssjockey It's a while now since I've touched this, but I seem to remember struggling to get group fields to populate. I think Justin's comment above was what helped me nail it eventually: https://github.com/CMB2/CMB2/issues/768#issuecomment-256774261\nI've pasted below the filter function I ended up with. In my case, I was taking the data from JSON and pre-populating fields, so there's some bits in there that will be irrelevant.\nHope that helps somewhat?\n```\nfunction cppg_override_meta_value( $value, $object_id, $args, $field ) {\nstatic $defaults = null;\n\n    // Only set the default if the original value has not been overridden\nif ( '_edit_json_form_' !== $object_id  || 'cmb2_field_no_override_val' !== $value ) {\n    return $value;\n}\n\n$field_attributes = $field->args('attributes');\n$field_id = $args['field_id'];\n\n// get uploaded JSON data; bail if not set\nif( ! $json_data = cppg_frontend_file_upload() ) {\n    return $value;\n}\n\n// bail if json mapping data attribute not set\nif( !isset( $field_attributes['data-json-mapping'] ) ) {\n    return $value;\n}\n\n// convert JSON to an array\n$mapping = $field_attributes['data-json-mapping'];\n$mapping = htmlspecialchars_decode( $mapping );\n$mapping_array = json_decode( $mapping, true );\n\n// check if repeatable field (which isn't also a group field)\n$repeatable = $field->repeatable();\n$group = $field->type() === 'group' ? true : false;\nif( $repeatable && !$group ) {\n    $repeatable_key = array_pop( $mapping_array );\n}\n\n// loop through mapping array and pull out data from uploaded JSON to override form fields\n$value = cppg_array_path( $json_data, $mapping_array );\n\n...\n\n// if it's a non-group repeatable, we need to process value (if it's an array - i.e. not empty)\nif( $repeatable && !$group && is_array( $value ) ) {\n    $repeatable_value = array();\n    foreach( $value as $array_item ) {\n        $repeatable_value[] = $array_item[$repeatable_key];\n    }\n    $value = $repeatable_value;\n}\n\n\n// decode quotes (\") and backslashes (\\) - not permitted in JSON\nif( 'string' === $type || 'array' === $type ) {\n    $search = array( '&quot;', '&bsol;' );\n    $replace = array( '\"', '\\\\' );\n    $value = cppg_str_replace_recursive( $search, $replace, $value );\n}\n\nreturn $value;\n\n}\nadd_filter( 'cmb2_override_meta_value', 'cppg_override_meta_value', 10, 4 );\n```. Just to confirm I also had the same issue (in a front end form) as above/#730.\nUsing trunk fixed it - thanks! Will use this rather than plugin for now...\n. ",
    "noquierouser": "I second this issue. To replicate, just set a date_format different from m/d/Y on a text_date.\nProbably there are issues parsing the date format before save and retrieving from database.\n. I had the same issue as yours, and I did this to solve your use case:\nFirst, I used a multicheck field:\n$cmb2->add_field(array(\n    'name'       => 'Custom Taxonomy Multicheck Selector',\n    'id'         => 'custom_tax_multicheck',\n    'type'       => 'multicheck',\n    'options_cb' => 'get_custom_taxonomy_list'\n));\nAnd then, outside the function defining the CMBs, I made this function:\n```\nfunction get_custom_taxonomy_list() {\n  $taxonomy_list = array();\n$taxonomy_query = get_terms(array(\n    'taxonomy'   => 'my_custom_taxonomy',\n    'hide_empty' => false //you can change this if you need, chech get_terms() documentation\n  ));\nforeach ($taxonomy_query as $taxonomy_term) {\n    // creates an array of 'term-slug' => 'Term Name'\n    $taxonomy_list[$taxonomy_term->slug] = $taxonomy_term->name;\n  }\nreturn $taxonomy_list;\n}\n```\nAnd that's it. ;)\n. @jtsternberg I'm sorry I wasn't too clear about it, but that field parameter is only valid for file_list and not for file. And that doesn't actually guarantee that a Wordpress generated thumbnail is utilized.. @jtsternberg Interesting, I wasn't aware of that. Then is there any chance it could fetch from media library after it is uploaded?\nAlso, could there be any chance of using the Blog Settings for image thumbnails by default?. > When you upload/select an image from the media library, it pulls in the full image size\nAfter uploading a new image, and while it loads the full image in the preview, if the full image is too large/heavy, scrolling the page can get too CPU consuming, slowing the scrolling to a crawl. And it gets worse when you upload a whole gallery using file_list.\nNow, as you said, the plugin actually uses WP generated thumbs after a save/reload, but I think it should use WP generated thumbs right after uploading.. ",
    "fxbenard": "\nJust tested it here, working perfectly. Do you have the .tx folder in your local project. \nIt's .git ignored. I guess you never created it.\nCheck it out here: https://github.com/WP-Translations/grunt-transifex-wordpress. Just replace everything with cmb2\n. Lovely, problem solved - French is 100% ready on TX\n. Yes we're and stay tuned we might at some point be even more than on it but \"before it\". We'll keep in touch #teasing\n. As far as I know I never ask Transifex translators to move over wp.org. It took a lot of time to build this community. TX is so much better than GP. We're an alternative community. Pulling from wp.org to TX can be done with a simple grunt task as well ;)\n. ",
    "jamesgol": "I submitted that PR last year that covers the situation.\n. Related to #346\n. Perhaps adding a filter that is checked instead would be a reasonable option?  It's been a bit since I worked on the project needing this and I had to change my process completely because there wasn't any way to correct this flaw.\n. It has been so long I don't remember the specifics on the use case there, but those filters all happened much to late.  It was related to a security issue where the original coder assumed that marking a field as read-only was really read-only and not just set in HTML.\nAdding an additional setting is a reasonable solution, if nobody else gets to it first I'll submit a PR for it.\n. I'm ok with working around it, but I could see people having future issues.  One day a user sets it up and it works, then later they install some plugin, theme, etc. that defines a new function and suddenly it's broken.\n. I absolutely wouldn't expect any major changes that break backwards compatibility.  I just wonder if for a distant major upgrade something could be baked in.\nWhen I get a chance I'll put together a PR for one way to deal with it.  My thought is to add a field option that defaults to false (in my PoC I called it 'callback_names_require_cb'), but if it is set to true then maybe_callback returns false quickly if the $cb doesn't have a '_cb' suffix.\nThat's just a hack though, the real fix requires more extensive changes that would check for a '_cb' on any arg and if so do the callback otherwise return the actual value.\nEventually the default could be set to true so this would be new default behavior.  This is more of a long term thing I just wanted to document so someone else who runs into this issue might find it in a search instead of having to fire up their debugger to see the issue.\n. shoot wrong branch\n. When I was debugging it returns the value of update_metadata which can be false, the meta ID of the object, and in some weird case it was actually an array.  I'll have to trace back when I have a chance to see why it would be an array\n. The 'test_get_oembed_delete_with_expired_ttl' test gets a return of an array.  Looks like the remove_data() function is returning an array, that doc probably needs updated too\n. ",
    "davekellam": "I was running into the same problem with repeating fields inside a repeater. Also had seemingly random data loss, couldn't discern any sort of pattern.\n. Yes. When the address is set to repeatable, after the initial save, it will save an empty entry each time.\n\n. Revisited the problem this afternoon, and figured out that it's a problem with the sample code (at least I think so, there could be some larger change needed).\nI was able to prevent the saving by doing an empty check against one of the fields in the sanitize function: \n``` php\n    foreach ( $meta_value as $key => $val ) {\n        if ( '' == $val['title'] ) {\n            unset( $meta_value[$key] );\n        } else {\n            $meta_value[ $key ] = array_map( 'sanitize_text_field', $val );\n        }\n    }\nreturn $meta_value;\n\n```\nImagine can be closed, and the discussion moved to the sample code repo. Don't know if there's a way to do a more generic check, this relies on one of the fields being title;\n. ",
    "mikemcalister": "Hey folks, I'm also seeing random data loss when using repeatable fields inside a repeat group. We've also noticed that the sorting function may also be responsible for data loss in the same instance.\nHere's a gist of my code for reference. https://gist.github.com/mikemcalister/be840ff5cb9243c63bfd\n. I was able to solve my issue of data loss by increasing the max_input_vars as @sc0ttkclark had suggested. Thanks, Scott!\nYou can increase that limit a few different ways. If you have access to your php.ini file, you can change it there. Otherwise you can add it via your .htaccess file by adding this:\nphp_value max_input_vars 5000\n. No problem! I stress tested it with many, many inputs with no issues. Feel free to push that number up if you need to.\n. ",
    "bearded-avenger": "beautiful!!!\n. ",
    "MuhammadRehman": "Woow!! Really amazing and helpful!..\n. ",
    "nisan92": "I am running into same problem as @ogdsgn asked, and this problem is still unsolved. . ",
    "unnamedfeeling": "This issue persists - when user creates multiple group elements width multiple repeating fields inside they get sorted inside these group elements. This one is a really annoying bug serialization/save bug(((. ",
    "daggerhart": "I did a bit of debugging on this issue today and believe I've identified the issue, but unfortunately didn't get a working patch.\nThe problem seems to be coming from the cmb.elReplacements function in cmb2.js. This function is handling the replacement of field names and IDs when both a new row, and new group is created.\nThe regex in this function is replacing the first instance of the previous index with the next index. The problem here is that when you have a repeatable field inside of a repeatable group, there are multiple indices that need to be taken into account.\nFor example, assume you have these fields:\n```\n$group_field_id = $cmb->add_field( array(\n    'id'          => 'my_group',\n    'type'        => 'group',\n) );\n$cmb->add_group_field( $group_field_id, array(\n    'name' => 'Repeating field',\n    'id'   => 'my_field',\n    'type' => 'text',\n    'repeatable' => true,\n) );\n```\nThe name for the first field in the first group will be: my_group[0][my_field][0].\nFollowing these steps, and you'll get the following field name results:\n\nAdd new field: my_group[0][my_field][1]\nAdd new field: my_group[0][my_field][2]\nAdd new Group: my_group[1][my_field][0]  - So far so good, but here is where it starts breaking.\nAdd new field in the new Group: my_group[1][my_field][3] - Suddenly field 3\nAdd new field in the new Group: my_group[2][my_field][3] - Suddenly group 2\nAdd new field in the new Group: my_group[3][my_field][3] - etc...\n\nWhat appears to be happening is that the data-iterator is being correctly reset to 1 for a new group, but when that happens the regex used to handle the newName and newId starts replacing the group's index instead of the field's, because the group's index of [1] is the first match found during oldName.replace( '['+ prevNum +']', '['+ cmb.idNumber +']' ).\nIf you continue adding new Groups, each with three or four fields in it, you'll notice that the field names get further and further off from being correct. It's because this regex keeps replacing the first match it finds, regardless of that match being the group's index or the field's index.\nI believe the best way to fix this is to separate this into two functions, one for creating a new group and another for creating a new field. This way, we can tell the \"new group\" regex to only replace the first match found starting at the beginning of the string, and we can tell the \"new field\" regex to replace the first match found starting at the end of the string.\nIn my attempts today, I was trying to do something quick and dirty to determine if a field or group was being created, and adjust the regex accordingly, but I didn't have much luck with that approach.\nRegardless. To clarify, I am 99% sure this is a javascript bug and not a php serialization bug because the problem is very apparent when inspecting the fields as they are created.. Found a related issue with a patch: #1035 \n. I have a morning full or errands to run, and then plan to work on it this afternoon (~ 4 hours from now). \n@anhskohbo, maybe wait for me to get a simple version into CMB2, then work from my fork? Alternatively, you could start working on the UI by forking cmb2-attached-post plugin, then copy your changes into my fork at a later time?\nThose are just some random ideas. I'm open to anything.. Completed a first-pass of making the field type handle different query types.\nCurrently working (in simple tests):\n\nPosts\nUsers\nTerms\n\nI did this by creating a new set of classes that handle the query and object details work.\n\nabstract CMB2_Type_Associated_Objects_Query - Defines what is expected and required by other classes\nCMB2_Type_Associated_Objects_Query_Posts - Handles post objects.\nCMB2_Type_Associated_Objects_Query_Users - Handles user objects.\nCMB2_Type_Associated_Objects_Query_Terms - Handles term objects.\n\nI'd like to do a bit more work here cleaning things up, but wanted to show progress.\nExample usage:\nphp\n$cmb = new_cmb2_box( array(\n    'id' => 'my_metabox',\n    'title' => esc_html__( 'CMB2 Contrib' ),\n    'object_types'  => array( 'post' )\n) );\n$cmb->add_field([\n    'id' => 'my_posts',\n    'type' => 'associated_objects',\n    'title' => 'Associated Posts',\n    'options' => array(\n        'query_args' => array(\n            'posts_per_page' => 10,\n            'post_type' => ['page','post'],\n        ),\n    ),\n]);\n$cmb->add_field([\n    'id' => 'my_users',\n    'type' => 'associated_objects',\n    'title' => 'Associated Users',\n    'options' => array(\n        'query_object_type' => 'user',\n        'query_args' => array(),\n    ),\n]);\n$cmb->add_field([\n    'id' => 'my_terms',\n    'type' => 'associated_objects',\n    'title' => 'Associated Terms',\n    'options' => array(\n        'query_object_type' => 'term',\n        'query_args' => array(\n            'taxonomy' => array( 'category', 'post_tag' ),\n        ),\n    ),\n]);\n. Sorry, I missed one fairly important line of code, and now I'm doing that thing where i struggle with git trying to making 1 clean commit for 20 minutes. . Back on track, should be a single commit now.. Not sure if I should have replied to each item as I worked through them, didn't want to accidentally blow up your email. \nI've pushed an update to the PR (rebaseing again as 1 commit) with the following changes. Heck, I took the time to re-figure out how to rebase, so i ran with it :D\n\nFixed the various coding standards issues.\nRenamed the classes\nRemoved local $field property\nMade the $query a property on the field type object. No more passing it around, or calling for it 3 times.\n\nFor the Object Post Labels, I think it makes more sense for the query handler objects to return then as raw data and let the render() method format them how it wants. As of the current PR the only two methods in all these classes that deal with HTML are render() and get_list_item().\n\nRemoved output buffer according to @TODO item\nRefactored the get_retrieved() and get_attached() methods to return rendered list items instead of echoing the rendered list items.\n\nI'm sure there will be more to do once the search ajax gets going, but this should be a pretty good head start. I can see easily allowing for Comments, Blogs, Links (is that still a thing?) and and other object types by just expanding on the query handler classes.. Just a heads up while I'm thinking about it. Last place I stopped I found a bug with multiple associated objects fields on the same form.\nWhen adding a new item to a field, it always gets added to the last field on the form and not necessarily the field you're working with.\nI think the issue is around here, but i'm not positive.\nhttps://github.com/CMB2/CMB2/blob/associated-objects-field/js/cmb2-associated-objects.js#L202\nThings are starting to get holidays-crazy around here, but I'll try to jump back into the issue within the next week or so and do push some more things forward.. I tested the issue from my comment above, and I couldn't replicate the problem any more.\nIt may have been resolved with some update to CMB2_Type_Associated_Objects.php, but I didn't spend too much time trying to figure out the exact moment it was fixed. Instead, I spent some time debugging cmb2-associated-objects.js.\nEverything I saw looked good.  As long as the field wrapper has the associated-objects-wrap css class, and none of the wrapper's parents have the same class, then the problem shouldn't show up anymore.. ",
    "erikdrums": "Yes thanks! I'm aware but this, it does not appear to be working for type='wysiwyg' though (the required attribute isn't set one the textarea element), also it seems a javascript solution might be better for displaying multiple errors.\n. Alright. Thanks!\n. ",
    "contactashish13": "Any idea when this will be solved? Or maybe a work around?\n. oops, closed it accidentally. reopening.\n. ",
    "wpgaijin": "Oh, you know what. I totally forgot to update this. I originally followed a tutorial on the blog for adding front end fields, and that was causing the issues. Once I used the example in the snippets it worked fine.\n. ",
    "cbergen": "It's been awhile. And looking at this again I don't think my PR is the best solution.\nThe use case is explained in issue #137. The image_id_from_url() function uses a LIKE select query to find the attachment ID. This is error-prone as it is common for there to be images with similar names.  \nMy change uses the postmeta key: _wp_attached_file. This is the same database location get_attached_file() uses.\nBut my solution assumes that the url value in _wp_attached_file is always relative and judging from the implementation of get_attached_file() it's not.\n. ",
    "daveromsey": "Thanks for the suggestion @jtsternberg, but the warning remains even when firing super late on cmb2_after_init:\nadd_action( 'cmb2_after_init', 'cmbdude_remove_group_field_test', 99999 );\nWhile debugging, I've noticed that $this->fields is just an empty array where as $this->meta_box is populated with the expected data (and this is the case before anything is done with $this->fields inside of the remove_field method).\nEdit: I stumbled upon this link from the CMB2 snippet library and adapted it for the repeating group demo in example-functions.php, but still get the warning.\nphp\nfunction cmbdude_remove_group_field_test( $cmb ) {\n    $prefix = '_yourprefix_group_';\n    $cmb->remove_field( 'description', $prefix . 'demo' );\n}\nadd_action( 'cmb2_init__yourprefix_group_metabox', 'cmbdude_remove_group_field_test' );\nEdit 2: I'm almost convinced that the warning is not a result of timing. I confirmed that removing a standard field works without a hitch. Here, the textsmall field is removed which was added by CMB2's example-functions.php file.\n``` php\nfunction cmbdude_remove_field_test() {\n    $prefix = 'yourprefix_demo';\n$cmb = cmb2_get_metabox( $prefix . 'metabox' );\n\n$cmb->remove_field( $prefix . 'textsmall' );\n\n}\nadd_action( 'cmb2_after_init', 'cmbdude_remove_field_test' );\n```\nI can't determine when a CMB2 instance's $fields property is ever populated. It's always an empty array even when I inspect it during the admin_head action (absurd, yes). That's why line 891 of CMB2.php is throwing the warning. Removing line 891 doesn't seem to affect removing single or group fields:\nphp\nunset( $this->fields[ $field_id ]->args['fields'][ $sub_field_id ] );\nand line 892 takes care of the desired functionality for group fields.\nphp\nunset( $this->meta_box['fields'][ $field_id ]['fields'][ $sub_field_id ] );\n(line 887 seems to be where the non group fields are handled.)\nphp\nunset( $this->meta_box['fields'][ $field_id ] );\nSorry for all of that jibber-jabber, but ya know, warnings. :-)\n. This is a known issue:Metabox containing WYSIWYG editor cannot be moved or used in a repeatable way at this time (this is a TinyMCE issue).\nSee WP Trac ticket #19173 for more information.\n. @gyrus Sounds like that is the case. This comment by azaozz might be helpful but I have not attempted it.\n. This is a confirmed bug, #362. Sorry, but I don't know of a fix.\n. ",
    "alessandrotesoro": "Thanks for the quick reply, i understand. \nI'll start trying adjusting the css and see if i can make it look like that :+1: i'll update here once i've got something.\n. Ok so, i've been playing with css for a bit, and so far i've achieved this \n\n\n\nI still need to work on the repeatable groups layout.\nWhat do you guys think about it, any feedbacks?\nIf interested in merging the style into the \"core\", what kind of tests should i run to make sure the layout looks good ? \n. I've tested it with 'show_names' => false\nAnd it looked bit bad, so instead of adding more css to adjust that kind of display, i've added a function to the CMB2 php class that adds 2 classes to the metabox container. 1 of the classes is triggered only when 'show_names' is set to false. You can see the change here. Doing it this way allowed me to add css specific to that scenario. \nFurthermore i've also restored the color of the descriptions of the fields to the original one. \n@gregrickaby I haven't modified the website field or any of the fields themselves. The length of that field is the one that comes by default with CMB2, what i've modified is just the \"wrappers\" of the fields and labels. If needed i can change that to fullwidth.\nHere's how it looks with show_names => false. \n\n\n\n\nAny opinions/feedbacks :D ?\n. @coreymcollins \nI agree with you to put the description beneath the content. However by checking the markup of the description i've noticed a difference between the \"inline\" description and the ones that fall beneath the field. The inline ones have a \"span\" tag applied, the other descriptions instead have a \"paragraph\" tag applied. This leads me to believe that this choice was made with the specific intent of placing certain descriptions inline only. \nI'll do some more tests this evening and provide few more screens here later :)\n. I've set the description fields to display underneath the fields\n\n\nThe before_row/after_row haven't been modified since that markup is injected through the hooks.\nI've also done a few changes to the repeatable group field - still needs polishing, there's some borders/padding adjustments needed and I need to fix an issue with the opening and closing of the group together with the color of the \"X\" icon. \n\nLet me know your thoughts on this.\n. As of now this layout i'm working on is only triggered if an additional css class is added to the metaboxes created via CMB2, meaning that the layout is only triggered into post objects pages and nowhere else (not even on frontend). As explained into one of my previous messages, i've accomplished this by adding a little modification to the CMB2 php class, you can see this modification into my commit here https://github.com/alessandrotesoro/CMB2/commit/8d6d622119fd75713b3b84fae68af72d449f500b . This also means that the current CMB2 layout is not affected, i've made no modifications to it. See screenshot here - the cmb2_metabox class is added to the metabox container. \n\nI think a new metabox parameter like \"show_table\" or \"show_as_table\" could possibly be set to false by default. I can then modify my function here https://github.com/alessandrotesoro/CMB2/commit/8d6d622119fd75713b3b84fae68af72d449f500b  to only trigger the css class when that same parameter is set to true. Thoughts on this? \nI've done some more tests on the layout of the repeatable group and made 3 different colors tests, what do you guys think about this ?\n\n\n\nRegarding the layout when the metabox is displayed into the sidebar, i will check that once the repeatable group is finished. Possibly, I can see this working the same way as I've explained it above, for example, i could disable the tabled layout when the metabox is in the sidebar, in this way it will use the default cmb2 layout.\nLet me know your thoughts :+1: \n. Hi guys,\nSince i didn't receive any feedback on which repeatable group layout to use, I went ahead and decided to keep the third variation displayed into my previous post. I've also checked the layout within sidebars and made sure it looks good in both scenario, when a metabox is dragged into the sidebar and when a metabox is set to appear into the sidebar by default.\nFurthermore i've also added a new parameter to the metabox args that triggers the table layout when set to true. The parameter is called \"table_layout\". Set it to true to enable the table layout.\nIf anybody would be kind enough to test it, you can download it here https://github.com/alessandrotesoro/CMB2/archive/master.zip\nLet me know your thoughts ;)\n. Ok found the answer myself :D\nI'm using the cmb2_override_meta_remove filter to prevent the data from being removed.\n. ",
    "simonwebdesign": "Looks nice.\n. ",
    "bnecreative": "I'll add that having an easy to set a classname from   that would attached to the postbox div would be great. Currently what I've done is filter a custom class using the postbox_classes_{page}_{id} filter. Then I can style the meta box a certain way. I attached a screenshot of my styling as an example.\n\nfunction bne_cmb_add_metabox_classes( $classes ) {\n\n    // Add our classname.\n    array_push( $classes, 'bne-cmb-wrapper' );\n\n    return $classes;\n}\nadd_filter( 'postbox_classes_page_bne_theme_meta_box_featured_area', 'bne_cmb_add_metabox_classes' );\n\n\n. @jtsternberg, no definitely not. Having it on cmb2-wrap would be perfect  as that would also work on a settings page and front end. I only referenced postbox as thats where the filer I was using throws it at. \n. Awesome. Thanks!\n. @bbmtt. Did you find a solution to this? I ran into it last night. I figured out that is has to do with the file field  appending \"_id\" to the individual field ID name. As a result all fields afterwards get that as well in the group. None can be retrieved in the array as they do not use the original id specified when creating the field in the setup. \n. Hi @jtsternberg,\nJust tried truck and same issue occurs. I've attached a picture of what is happening to the other fields after the file field when grouped together in a custom type.\n\nHere is my code for reference. It's based on the Address Field Type found in the Snippet Library.\n\n    $cmb_banner->add_field( array(\n        'name'              =>  __( 'Background Styles', 'bne' ),\n        'desc'              =>  __( 'And main content section for this page.', 'bne' ),\n        'id'                =>  $prefix.'featured_area_bg_styles',\n        'type'              =>  'background',\n        'row_classes'       =>  'featured-bg-option',\n    ) );\n\nAnd the the field build.\n\nfunction bne_cmb_background_field_callback( $field, $value, $object_id, $object_type, $field_type_object ) {\n    $background_repeat = array(\n        'no-repeat'     =>  __( 'Background Repeat: No Repeat', 'bne' ),\n        'repeat-x'      =>  __( 'Background Repeat: Repeat Horizontally', 'bne' ),\n        'repeat-y'      =>  __( 'Background Repeat: Repeat Vertically', 'bne' ),\n        'repeat'        =>  __( 'Background Repeat: Repeat All', 'bne' )\n    );\n    $background_attachment = array(\n        'scroll'        =>  __( 'Background Scrolling: Normal', 'bne' ),\n        'fixed'         =>  __( 'Background Scrolling: Fixed in Place', 'bne' )\n    );\n    $background_position = array(\n        'left top'          =>  __( 'Background Position: Left Top', 'bne' ),\n        'left center'       =>  __( 'Background Position: Left Center', 'bne' ),\n        'left bottom'       =>  __( 'Background Position: Left Bottom', 'bne' ),\n        'right top'         =>  __( 'Background Position: Right Top', 'bne' ),\n        'right center'      =>  __( 'Background Position: Right Center', 'bne' ),\n        'right bottom'      =>  __( 'Background Position: Right Bottom', 'bne' ),\n        'center top'        =>  __( 'Background Position: Center Top', 'bne' ),\n        'center center'     =>  __( 'Background Position: Center Center', 'bne' ),\n        'center bottom'     =>  __( 'Background Position: Center Bottom', 'bne' ),\n    );\n    $background_size = array(\n        'auto'              =>  __( 'Background Size: Auto', 'bne' ),\n        'cover'             =>  __( 'Background Size: Cover', 'bne' ),\n        'contain'           =>  __( 'Background Size: Contain', 'bne' ),\n        '100% 100%'         =>  __( 'Background Size: 100% x 100%', 'bne' ),\n        '100% auto'         =>  __( 'Background Size: Fit Horizontally', 'bne' ),\n        'auto 100%'         =>  __( 'Background Size: Fit Vertically', 'bne' )\n    );\n    // Make sure we specify each part of the value we need.\n    $value = wp_parse_args( $value, array(\n        'background_color'      =>  '',\n        'background_file'       =>  '',\n        'background_repeat'     =>  '',\n        'background_attachment' =>  '',\n        'background_position'   =>  '',\n        'background_size'       =>  '',\n    ) );\n    // Colorpicker Options\n    echo $field_type_object->colorpicker( array(\n        'name'      =>  $field_type_object->_name( '[background_color]' ),\n        'id'        =>  $field_type_object->_id( '_background_color' ),\n        'desc'      =>  '',\n        'value'     =>  $value['background_color'],\n    ), '#' );\n    // File Options\n    echo $field_type_object->file( array(\n        'name'      =>  $field_type_object->_name( '[background-file]' ),\n        'id'        =>  $field_type_object->_id( '_background_file' ),\n        'desc'      =>  '',\n        'value'     =>  $value['background_file'],\n\n    ) );\n    // Repeat Options\n    $background_repeat_options = '';\n    foreach ( $background_repeat as $repeat_value => $repeat_name ) {\n        $background_repeat_options .= ''. $repeat_name .'';\n    }\n    echo $field_type_object->select( array(\n        'name'      =>  $field_type_object->_name( '[background_repeat]' ),\n        'id'        =>  $field_type_object->_id( '_background_repeat' ),\n        'options'   =>  $background_repeat_options,\n        'desc'      =>  '',\n        'value'     =>  $value['background_repeat'],\n    ) );\n    // Attachment Options\n    $background_attachment_options = '';\n    foreach ( $background_attachment as $attachment_value => $attachment_name ) {\n        $background_attachment_options .= ''. $attachment_name .'';\n    }\n    echo $field_type_object->select( array(\n        'name'      =>  $field_type_object->_name( '[background_attachment]' ),\n        'id'        =>  $field_type_object->_id( '_background_attachment' ),\n        'options'   =>  $background_attachment_options,\n        'desc'      =>  '',\n        'value'     =>  $value['background_attachment'],\n    ) );\n\n    // Position Options\n    $background_position_options = '';\n    foreach ( $background_position as $position_value => $position_name ) {\n        $background_position_options .= ''. $position_name .'';\n    }\n    echo $field_type_object->select( array(\n        'name'    => $field_type_object->_name( '[background_position]' ),\n        'id'      => $field_type_object->_id( '_background_position' ),\n        'options' => $background_position_options,\n        'desc'    => '',\n        'value'     =>  $value['background_position'],\n    ) );\n    // Size Options\n    $background_size_options = '';\n    foreach ( $background_size as $size_value => $size_name ) {\n        $background_size_options .= ''. $size_name .'';\n    }\n    echo $field_type_object->select( array(\n        'name'    => $field_type_object->_name( '[background_size]' ),\n        'id'      => $field_type_object->_id( '_background_size' ),\n        'options' => $background_size_options,\n        'desc'    => '',\n        'value'     =>  $value['background_size'],\n    ) );\n\n    // Field Description\n    echo $field_type_object->_desc();\n}\nadd_filter( 'cmb2_render_background', 'bne_cmb_background_field_callback', 10, 5 );\n\n. @desrosj add_filter was used in the initial wiki example of making an address field which is why I used it; regardless, both works. This PR, changing the return to false, does works on my end using trunk. I'm not sure if there is a side effect to that change for other scenarios.. I've run into this before too. Because the nature of repeatable, there is always an additional set in the DOM. Since the select field is set to a default value and has the argument of show_option_none set to false, therefore the additional \"hidden\" set will have a value when saving the post. If you set show_option_none to true and remove the default, the first option in the select will then be an empty value thereby not being saved when the field is saved. . Hi, hope you don't mind me chiming in. I actually use cmb2 within my theme and also the radio image extension that @tw2113 referenced.\n@fastmarketo, if CMB2 is a requirement of your theme, then you could just include it as a core file then add the extension on top of it like I have done. Or if you pref to have CMB2 be installed with TMG, you could instead include only the extension in your core theme and have it check if CMB2 exist before being used.. ",
    "Bardown26": "are you talking about the standard WP content editor, yes it does\n. that worked, thank you for the quick response, much appreciated. I will have to read more into the sanitization_cb to ensure no further issues.\n. ",
    "sunbbon": "thank you.. ",
    "edvind": "Long time no see, I've updated (added September in the Swedish translation) the translation at https://translate.wordpress.org/projects/wp-plugins/cmb2 . ",
    "Steviant": "@davekellam I've found that workaround to be problematic, preventing some non-empty fields from saving. Does that happen with your implementation too?\n. It should do, the jQuery spec describes :input as Selects all input, textarea, select and button elements. That said, I haven't tested it and the code I wrote this fix for was in a project I'm no longer involved in, so I can't check against it. I'll try to put something together later today to test against.\n. ",
    "esaunders5": "That helped. Thanks a bunch!\n. ",
    "artuze": "Perfect! Hadn't checked that branch.\nThanks!\n. ",
    "yuks": "Sorry. Next time, will submit to the trunk branch.\n. ",
    "vlaellayug": "Not working if there's no group field type that is file.. ",
    "mw247": "Just a heads up that the example uses \"has_tags\". Use \"has_category\" to target categories.\n. Same proble on WP 4.5.4\n. Looks like the js wasn't being loaded correctly. The \"cmb2_utils()->url was returning a path to my local files (in includes/CMB2_JS.php file)...\nsrc='http://localhost:57912C:/Users/Marc/Documents/My%20Web%20Sites/WordPress%20Sandbox/wp-content/themes/foundation/cmb2/js/cmb2.min.js'\nI just loaded the script with a direct path for now.\n\"/wp-content/themes/foundation/cmb2/js/cmb2{$min}.js\"\n. Thanks! Will do.\n. Give the URL filter a try with no luck. Still adds a system path to the URL...\nhttp://localhost:57912C:/Users/Marc/Documents/My%20Web%20Sites/WordPress%20Sandbox/...\nIf it matters, I am not using the plugin version.\n. Awesome, thanks!\nw/ spaces worked...\nreturn str_replace( 'C:/Users/Marc/Documents/My Web Sites/WordPress Sandbox', '', $url );\n. ",
    "hyyan": "I'll start working on that\n. ",
    "nabileisa": "I use CMB2 in most of many projects  and as they are mostly in Arabic i would really appreciate RTL support for it , so i will be patiently waiting.\n. ",
    "devinsays": "There's a great grunt task that auto-generates these RTL stylesheets (cssjanus). Let me know if you need a hand @hyyan.\n. I took a first pass at this. Stylesheets are now generated. Haven't had a chance to test if they're all loading correctly and look correct yet.\n. This morning I tested in Hebrew with the example-functions.php loaded. The RTL stylesheets loaded correctly and the all the metaboxes appeared to be loading properly RTL.\nFor anyone else who wishes to test this, go to \"Settings > General\" and select an RTL language like Arabic or Hebrew under the \"Site Language\" drop down.\nAlthough I normally use the the \"RTL Tester\" plugin for front end testing, this wasn't working for me properly today. Perhaps has something to do with load order of plugins.\nIt would be great to have some actual Arabic/Hebrew (or RTL language) readers test this out with their projects before we merge.\n. I had one person offer to do testing, but they needed me to set up a public dev environment for them so they could look. Just haven't had a chance to do that yet.\nA number of people requested this feature. It would be great if @hyyan, @moonman22, @safiro or @adilelsaeed could jump in and test.\nhttps://github.com/WebDevStudios/CMB2/issues/399\nHowever, I think it would be fine to roll and test organically. Any bugs would likely be minor display issues and probably still an upgrade from the current display in RTL languages.\n. I think this is fine to merge assuming you're fine with the implementation. We've had at least a few RTL readers sign off on how it works.\nI can't reproduce the the declaration issues, and don't see anything in the changeset that would cause a problem like that.\n@jtsternberg Let me know if there's anything else you would like me to test, or if a unit test could/should be added here.\n. ",
    "safiro": "It'll be awesome.\n. I need this too.\n. 1- I'm using a Select with id \"select_style\" with options\n 'options'=>array(\n        'first_style'=>'First Style',\n        'second_style'=>'Second Style',\n        'third_style'=>'Third Style',\n)\nand I want when I select First Style, a text field with id \"add_title\" displayed, when I select Second Style, the text field disappeared and colorpicker with id \"article_bg\" displayed and so on....\n-- Can I get the complete code please.\n2- I'm using another framework for global options \"Redux\".\nHow Can I display or hide CMB2 field based on what Redux returns?\nif $redux['settings']['layout_one'] display cmb2 text , if $redux['settings']['layout_two'] display cmb2 file_list and so on....\nThanks.\n. Thank for your help.\nIt's working.. ",
    "adilelsaeed": "@hyyan any progress?\n. Thanks\nThat's really fast ^^\n. ",
    "tld1990": "Why on earth are you using load_theme_textdomain(); in your plugin? Doesn't that go completely against the logic of internationalization? Certainly messes up translation plugins such as xili-language.\n. ",
    "baljindersingh88": "The sheet looks informative.\nOn Sun, Jul 26, 2015 at 9:01 PM, Ionut Staicu notifications@github.com\nwrote:\n\nHi guys. I found this plugin a while back, but until now I didn't tried. This\ncomparison\nhttps://docs.google.com/spreadsheet/ccc?key=0AoY8IFUX301qdFhBaERLUEUwa3U0YjFYTnBmaU1mbmc&usp=drive_web#gid=3\ntable though made me to give it a try.\nBecause I'm coming from ACF world, I'm looking for two functionalities\nthat I'm not sure if they are included or not.\nThe first is this: Flexible Repeatable Fields (like Loop, but can choose\nto add different defined sets of fields per row) (copied from the\ndocument above, which is marked as an existing feature).\nLong story short, this looks like a repeatable field, but when you hit\n\u201eAdd another entry\u201d you can pick various entry types.\nThe second feature I'm looking for is JS conditionals. That is\nshowing/hiding various stuff based on various states (e.g. hide datepicker\nif a checkbox is checked, show map if a field is filled and so on).\nThat's all :)\nThanks!\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/403.\n. Let me know if i can be of any help\n\nOn Sun, Jul 26, 2015 at 11:09 PM, Scott Kingsley Clark \nnotifications@github.com wrote:\n\nYeah, someone did their homework!\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/403#issuecomment-125098498.\n. Flexible Repeatable Fields are available but not sure about JS conditions.That will be a good contribution.\n. I think you are correct.This exact functionality is not available in CMB2.\n\nOn Sun, Jul 26, 2015 at 11:21 PM, Scott Kingsley Clark \nnotifications@github.com wrote:\n\nI wasn't able to see this exact functionality available from CMB2 --\nhttp://www.advancedcustomfields.com/resources/flexible-content/ -- there\naren't Layouts or context-specific groups of fields in that way. You could\nadd multiple groups of fields though, and us JS conditionals manually.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/403#issuecomment-125100244.\n. Yes this can he helpful.It's not flexible as ACf but still will be helpfull.\nScott talk to you later.Have to work on some functionality.The deadline is\napprocahing.It's 12:00 PM  here in my office.\nBye\n\nOn Sun, Jul 26, 2015 at 11:42 PM, Ionut Staicu notifications@github.com\nwrote:\n\nMeanwhile i found this:\nhttps://github.com/WebDevStudios/WDS-Simple-Page-Builder\nAlthough it does some parts that i also need on current project, it\ndoesn't play nice as a flexible content replacement :(\nOh well...\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/403#issuecomment-125104930.\n. https://codex.wordpress.org/Function_Reference/get_post_thumbnail_id\nI think it will fetch attachment id based on post id\n\nOn Wed, Aug 12, 2015 at 9:27 PM, Stefan Malic notifications@github.com\nwrote:\n\nYes, but how can I fetch the attachment ID based on the post id? Nothing\nconventional has worked for me so far. I looked in the database, and I\ncouldn't find the connection between the post and the attachment :/\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/428#issuecomment-130354565.\n. Can you please share your code\n\nOn 29-Sep-2016 12:07 PM, \"djapra\" notifications@github.com wrote:\n\nim using yoast 3.6 and cmb 2.2.2.1 it adds whitespace to my xml file when\ni init a cmb2 metabox, any idea how to fix this?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/530#issuecomment-250382732,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAqg80f_K1LEvDSSeC5-6Cf_Q843ShiXks5qu1ySgaJpZM4GnngP\n.\n. Thanks for saving my time :)\n\nOn 29-Sep-2016 12:12 PM, \"djapra\" notifications@github.com wrote:\n\nMy bad guys, i accidentally have whitespace on my function file :)\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/530#issuecomment-250383584,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAqg8xHcbyFuVNSgrDyYR8Y97o4OIKrmks5qu13YgaJpZM4GnngP\n.\n. \n",
    "iamntz": "Meanwhile i found this: https://github.com/WebDevStudios/WDS-Simple-Page-Builder\nAlthough it does some parts that i also need on current project, it doesn't play nice as a flexible content replacement :(\nOh well...\n. ",
    "bbmatt": "Sure, I've been following that - works great. \nI can hardcode in a description within the render callback:\nphp\n<div class=\"alignleft\"><p><label for=\"<?php echo $field_type_object->_id( '_person_name' ); ?>'\"><?php echo esc_html( $field_type_object->_text( 'person_person_name_text', 'Persons name' ) ); ?></label></p>\n    <?php echo $field_type_object->input( array(\n      'name'  => $field_type_object->_name( '[person-name]' ),\n      'id'    => $field_type_object->_id( '_person_name' ),\n      'value' => $value['person-name'],\n    ) ); ?>\n    <p class=\"cmb2-metabox-description\">A description</p>\n  </div>\nHowever, that doesn't detract from the fact, that unless you set a custom field to repeatable, the cmb2 metabox description will repeat for each field.\nincludes/CMB2_Types.php is checking for repeatable and descriptions in repeat groups (public function _desc), but it's not doing that for non-repeatable fields in repeat groups. \n. Here's the address type exhibiting the issue:\n\nThat's a direct implementation of the address type.\nphp\n$feature_group->add_group_field($feature_group_field_id, array(\n    'name' => __('Address', 'cmb2'),\n    'description' => __('This will repeat for each field', 'cmb2'),\n    'id'   => 'address',\n    'type' => 'address'\n  ));\n. I haven't checked - found another workaround some time ago, but as nobody else has posted a related issue, I'll close it.\n. Just wondering if anyone else has had this issue - and if it's potentially a bug?\n. It doesn't look like there's a fix for this specific issue, but the workaround in my case (which was some time ago), was to simply have multiple standard fields that do the same thing & put them in a new cmb2_box so they appear as a form section. In other words, I didn't define a custom field. \nReferring to the documentation, one caveat is not all fields work in a repeatable section, but workarounds can always be found. If you are worried about keeping your code DRY - which is one of the reasons for simple custom fields, like my example above, I guess you could create a PHP function with required parameters, containing standard cmb2 field types and pass the parameters you need when you call the function. This could even work for more complex options.\nThis is usually the way I handle issues like this with CMB2 - there's always a way ;)\nEDIT: For the record, out of curiosity, I just tried my custom field above again, to see if I could assist in fixing this bug. It works fine now. Tried bnecreative's field and it doesn't work - the file upload won't persist when saving.. That's good to hear - I was getting the same error when messing around with repeatable, good info there! - I wish I had the time to explore the inner workings of cmb2 more, but hey, the reason I use it is because it saves me time - kudos to justin, it's one of my must have wp plugins :)\n. ",
    "royscheeren": "I ran into the exact same issue. \n. ",
    "tanatip": "I have recently created my own custom field (background image) same as above and got the same problem. Not sure if it has already been fixed?\n. ",
    "bomsn": "I have the seem problem, is there a solution to this?. Thanks @bbmatt for the response, I just copied your exact code to run a test, it didn't work at first, but I tried downloading a fresh cmb2 version and it worked, but when I add\n'repeatable' => true\nI get an error: \nWarning: Illegal string offset 'person-name' in C:\\xxxxxxxxxxxxxxxxxxx-metaboxes.php on line 116\nWhat I'm trying to do exactly is creating a custom field for under products metabox with (image, name, price), it need to be repeatable field to insert different sub products, and user can add also as many products as he want so the metabox need to be repeatable as well. So creating a box with those field won't work as needed.. Repeatable field seem to be working now, I changed sanitization and escape functions with these from address custom field plugin:\n`add_filter( 'cmb2_sanitize_person', 'sanitize', 10, 5 );\nfunction sanitize( $check, $meta_value, $object_id, $field_args, $sanitize_object ) {\n    // if not repeatable, bail out.\n    if ( ! is_array( $meta_value ) || ! $field_args['repeatable'] ) {\n        return $check;\n    }\n    foreach ( $meta_value as $key => $val ) {\n        $meta_value[ $key ] = array_filter( array_map( 'sanitize_text_field', $val ) );\n    }\n    return array_filter($meta_value);\n}`\n\n`add_filter('cmb2_types_esc_person', 'escape', 10, 4);\nfunction escape( $check, $meta_value, $field_args, $field_object ) {\n    // if not repeatable, bail out.\n    if ( ! is_array( $meta_value ) || ! $field_args['repeatable'] ) {\n        return $check;\n    }\n    print_r($meta_value);\n    foreach ( $meta_value as $key => $val ) {\n        $meta_value[ $key ] = array_filter( array_map( 'esc_attr', $val ) );\n    }\n    return array_filter($meta_value);\n}`. I have the same issue, have you come across a solution @Steviant . Here you go, `$unserialized` variable should be the result of your get_post_meta() function, use that foreach loop on to sort prices in one array and then use `array_sum()` to get the sum total of all these prices.\n\n```\n$serialized = 'a:4:{i:0;a:2:{s:14:\"zahlung_betrag\";s:5:\"50,00\";s:13:\"zahlung_datum\";i:1502323200;}i:1;a:2:{s:14:\"zahlung_betrag\";s:5:\"50,00\";s:13:\"zahlung_datum\";i:1502409600;}i:2;a:2:{s:14:\"zahlung_betrag\";s:5:\"20,00\";s:13:\"zahlung_datum\";i:1502496000;}i:3;a:2:{s:14:\"zahlung_betrag\";s:5:\"20,00\";s:13:\"zahlung_datum\";i:1502668800;}}';\n$unserialized =unserialize($serialized);\nforeach($unserialized as $array){\n    $arr_result[] = $array['zahlung_betrag'];        \n}\n\necho '';\nprint_r(array_sum($arr_result));\necho '';\n```. When I removed HTML from the custom fields it will save the first group correctly, but when adding new group and creating 3 new fields in this second group, it will push the third field into a new group after updating the post (I updated the gist with the change)\nhttps://gist.github.com/bomsn/36174de42bfbaa74abcd5bce1bfc432d\nI thought it worth mentioning that when looking at inputs IDs and the html for the fields in general, the js is giving wrong group IDs/Names  , I'm not pretty sure, but I guess the issue goes with the 'cmb.elReplacements' function in cmb2.js \nI also noticed if you click the \"remove field\" button on the an empty field (the only field in a group) it will create an empty field in the previous group.\n\nthe exact same issue happens with 'Text_Datetime_Timestamp_Timezone';. I was able to solve this by doing some changes in cmb.elReplacements function in the js file.\nnot sure if this is the most usable solution, but at least is solves my problem.\nhttps://github.com/CMB2/CMB2/compare/trunk...bomsn:patch-1\n\nThe solution was based on another fork by @nonsensecreativity https://github.com/nonsensecreativity/CMB2/commit/a15bf588171d5f26de71af088b6f594da9f84679\nThere is another issue tough, when trying to remove a field from empty group, it will create new empty field in previous group.\nhope you can tackle these in the next release.. @tw2113 That is correct, I probably didn't explain this clearly. The issue I had is that the JS was not giving IDs/Names correctly which was causing issues when saving the post, similar issues were posted before:\nhttps://github.com/CMB2/CMB2/issues/116\nhttps://github.com/CMB2/CMB2/issues/521\nI solved this, but I found another issue with cmb.removeAjaxRow function, when we have 3 groups for example, say first group have 3 field and second group have 2, and the 3rd is still empty (will have an empty field), say you clicked 'remove button' on the empty field inside the third group, this will trigger cmb.resetRow, and this function will trigger a click on remove row button and add row button at the same time, remove row trigger seem to be working correctly, however, add row button is not triggered within the third group only, but all other group, which will create additional field in all groups.\nI tried changing parents to parentand closest in this variable:\nvar $parent = $this.parents('.cmb-row');\nbut this will always trigger infinite loop and cause Maximum call stack size exceeded error\nSo I ended up changing thisreturn cmb.resetRow( $parent.find( '.cmb-add-row-button' ), $this ); to this return cmb.resetAjaxRow( $parent.find( '.cmb-add-row-button' ), $this ); and added new function to match the change.\n```\n    cmb.resetAjaxRow = function( $addNewBtn, $removeBtn ) {\n        // Click the \"add new\" button followed by the \"remove this\" button\n        // in order to reset the repeat row to empty values.\n        var addnew = $removeBtn.closest('.cmb-repeat-group-field').find( '.cmb-add-row-button' );\n    addnew.trigger( 'click' );\n    $removeBtn.trigger( 'click' );\n\n};\n\n```. @Mr2P Make sure to use the patch on the trunk version.  If it still doesn't work please share the code for rendering you custom field. Also does it work correctly on the 3 first groups, or you get the same issue on all groups?. @Mr2P Happy it helped.. @jtsternberg I did, I'm only asking here if there is a way to render group fields manually which is related to this repo.. sorry I meant I want it work with the group type itself, not group fields\n$group_repeat = $cmb_repeat->add_field( array(\n        'id'          => $prefix . 'group',\n        'type'        => 'group',\n        'options'     => array(\n            'group_title'   => __( 'Product', 'cmb' ) . ' {#}', // {#} gets replaced by row number\n            'add_button'    => __( 'Add Product', 'cmb' ),\n            'remove_button' => __( 'Remove Product', 'cmb' ),\n            // 'sortable'      => true, // beta\n        ),\n        'tab'  => 'products',\n        'render_row_cb' => array( 'CMB2_Tabs', 'tabs_render_row_cb' ),\n    ) );. ",
    "maxisot": "Also what is the proper way to echo repeatable fields?\nThanks\n. ",
    "achavez": "No problem! Thanks for the quick response and for pushing a commit so quickly.\n. ",
    "davidshq": "Did you upgrade to the latest version that was released today? It patched a bug with saving for user fields I believe.\n. ",
    "avoinicu": "You can use get_user_meta() function. It works the same way get_post_meta() does.\nAlso make sure you are using the latest release.\n. I've managed to solve this problem by updating the IF statement at line 228 in CMB2_Field.php with the following:\nphp\n// If no override, get value normally\nif ( 'cmb2_field_no_override_val' === $data ) {\n    switch (true) {\n        case ($a['type'] === 'options-page'):\n            $data = cmb2_options( $a['id'] )->get( $a['field_id'] );\n            break;\n        case ($a['type'] === 'user' && get_current_screen()->action === 'add'):\n            $data = cmb2_options( $a['id'] )->get( $a['field_id'] );\n            break;\n        default:\n            $data = get_metadata( $a['type'], $a['id'], $a['field_id'], ( $a['single'] || $a['repeat'] ) );\n    }\n}\n. Thank you for the quick reply!\nThe only reason I posted my solution is because I need a temporary fix until a new version of CMB2 is released and I thought this might help somebody else, but you are right.\nThank you again for the great work you do!\n. Yes, it worked as expected.\n. ",
    "ronalfy": "Assuming you have an array of URLs, you can use something like this to spit out FontAwesome implementations.\nhttps://gist.github.com/ronalfy/24dc28b1ecb2b918cbca\n. The more I look at this, the more I think it's not ready. There are so many controls that do not work that should. May need a re-think. \n. Yes, this is a good first pass, but the time controls for example do not work. I've I've gotten text_time to work, for example, but none of the fancier ones like select_timezone, which have their own values. \n. I've been meaning to go through each control and verify yay or nay on working. I've just not had the time.\n. I was able to go through and determine which ones aren't working.\nNot working:\ntest_title Produces Input box\ntext_email No validation but working\ntext_url No validation but working\ntextarea_code Not working\ntext_time Not working\nselect_timezone Not working\ntext_date_timestamp Not working\ntext_datetime_timestamp Not working\ntext_datetime_timestamp_timezone Not working\nhidden Not working\ntaxonomy_multicheck Not working\nwysiwyg Not working\nfile_list Not working\noembed Not working\n. ",
    "surajprgupta": "I am getting an issue not similar but related perhaps,\nI am rendering a field using cmb2_get_field (date picker in this case)\nI think the related js for the date picker isn\u2019t added and when I am clicking on the field, then the date picker isn\u2019t appearing.\nHere's the code I am using - \nadd_action('cmb2_admin_init', array($this, 'add_options_page_metabox'));\n```\npublic function add_options_page_metabox()\n    {\n        // Add our CMB2 metabox.\n        $cmb = new_cmb2_box(array(\n            'id' => $this->metabox_id,\n            'hookup' => false,\n            'save_fields' => false,\n            'cmb_styles' => false,\n        ));\n    // Add your fields here.\n    $cmb->add_field(array(\n        'name' => __('Fetch Events and Groups From Date', 'liquid-outreach'),\n        'desc' => __('All events created or modified since the date will be synced',\n            'liquid-outreach'),\n        'id' => 'modified_since', // No prefix needed.\n        'type' => 'text_date',\n        'default' => !empty($_POST['modified_since']) ? $_POST['modified_since'] : '',\n        'attributes' => [\n            'required' => 'required'\n        ]\n    ));\n\n    $cmb_box_sync_post_form = new_cmb2_box(array(\n        'id' => 'ccb_event_sync_to_post_metabox',\n        'hookup' => false,\n        'save_fields' => false,\n        'cmb_styles' => false,\n    ));\n    $cmb_box_sync_post_form->add_field(array(\n        'name' => __('Fetch Events Start Date', 'liquid-outreach'),\n        'desc' => __('',\n            'liquid-outreach'),\n        'id' => 'start_date', // No prefix needed.\n        'type' => 'text_date',\n        'default' => !empty($_POST['start_date']) ? $_POST['start_date'] : '',\n        'attributes' => [\n            'required' => 'required'\n        ]\n    ));\n    $cmb_box_sync_post_form->add_field(array(\n        'name' => __('Fetch Events End Date', 'liquid-outreach'),\n        'desc' => __('',\n            'liquid-outreach'),\n        'id' => 'end_date', // No prefix needed.\n        'type' => 'text_date',\n        'default' => !empty($_POST['end_date']) ? $_POST['end_date'] : '',\n        'attributes' => [\n            'required' => 'required'\n        ]\n    ));\n\n}\n\n```\n```\npublic function admin_page_display()\n    {\n        ?>\n        \n            .hide-obj {\n                display: none !important;\n            }\n        \n    <div class=\"wrap cmb2-options-page <?php echo esc_attr($this->key); ?>\">\n        <h2><?php echo esc_html(get_admin_page_title()); ?></h2>\n        <?php\n        cmb2_metabox_form($this->metabox_id, $this->key);\n        ?>\n    </div>\n<?php\n    $this->show_sync_details();\n}\n\n```\nprotected function show_sync_details()\n     {\n            $cmb_field_start_date = cmb2_get_field('ccb_event_sync_to_post_metabox', 'start_date');\n            $cmb_field_start_date->render_field();\n      }\nthere's no error in the console.. ",
    "usernamethatsnottaken": "Yes, but how can I fetch the attachment ID based on the post id? Nothing conventional has worked for me so far. I looked in the database, and I couldn't find the connection between the post and the attachment :/\nEDIT: The problem is somehow in the backend. I have CMB2 running on a theme I developed and there it works. But the problem appears on the plugin I'm working on. The ID does get added into the hidden input field, but it's not passed to postmeta table.\n. I found the problem. This was my code:\n$cmb_demo->add_field( array(\n        'name'       => __( 'Contestant Photo', 'cmb2' ),\n        'id'                => $prefix . 'contphoto',\n        'type'          => 'file',\n        'escape_cb'     => false,\n        'sanitization_cb'   => false\n        ) );\nOnce I removed escape_cb and sanitization_cb, the ID value was being passed again.\nThanks everyone for your help.\n. ",
    "MickeyKay": "Similar issue here. We're including a bunch of composer dependencies in our WP root, and when I require init.php from our theme's functions.php file with something like this:\nrequire( ABSPATH . '/vendor/webdevstudios/cmb2/init.php' );\n. . . I end up with a console error with CMB2 attempting to pull in the following file (notice the bogus path):\n{our_root_url}/srv/{our_root_path}/vendor/webdevstudios/cmb2/js/cmb2.min.js?ver=2.2.0\nI know CMB2 is meant to be used as a standalone library, however it seems like it is required to live within wp-content for any of this to work, which ends up not working so well for the use case I'm describing.\nAny ideas on this one?\n. Right, I saw that however it doesn't include some of the core link-picker functionality such as the ability to:\n- Manually specify a URL.\n- Open the link in a new window\n- Add title text\nI'd love to develop this one when the time allows!\n. Sorry, should've been clearer here. I was racing along to get things done and didn't leave you much to work with. Keep in mind this is referring to the cmb2-rest-api branch specifically. What I'm referring to are the title and description args passed to the new_cmb2_box() call. Here's my code:\n```\npublic function register_category_related_content_metabox() {\n// Start with an underscore to hide fields from custom fields list\n$prefix = \"_{$this->plugin_slug}_\";\n\n$metabox = new_cmb2_box( array(\n    'id'           => $prefix . 'related-content-group',\n    'title'        => __( 'TITLE', 'my-slug' ),\n    'description'        => __( 'DESCRIPTION', 'my-slug' ),\n    'object_types' => array( 'term' ),\n    'taxonomies'   => array( 'category', 'post_tag' ),\n) );\n\n$metabox->add_field( array(\n    'name'             => __( 'Related Content Group', 'my-slug' ),\n    'id'               => $prefix . 'related-content-group',\n    'type'             => 'select_related_content_group',\n    'options_cb'       => array( $this, 'get_related_content_type_groups' ),\n    'show_option_none' => __( '- None -', 'my-slug' ),\n) );\n\n}\n```\nAnd here's what outputs on taxonomy term pages:\n\nAs you can see, the metabox title and description are not outputting at all.\n. Got it. Thanks.\n. When working with the cmb2-rest-api branch, metaboxes that are output on taxonomy term pages in the admin don't match the default metabox styling on those pages, because the markup doesn't match the default metabox markup:\nCMB2 Metabox\n(No border, padding, title is different size, etc)\n\nDefault metabox\n\n. Accidental changes, going to try again.\n. Hmm, this quick PR messes up the styling on non-taxonomy-term pages. Looks like the markup needs to change in these two different scenarios, so this fix doesn't really work. I'll leave it for someone with a bit more time :)\n. ",
    "justnorris": "Tried trunk, doesn't help on my local development environment when bundling CMB2 with a symlinked plugin. \nThat filter works though - is it production safe ?\n. @jtsternberg Missed the github notification, sorry for the late response.\nI'm running a local MAMP, with an actual domain, pointing to 10.0.0.10 ( my local IP assigned to my computer by the router ).\nSo I get 404 that looks like this:\nhttp://bird.localbox.in/Users/N/Projects/Colormelon/Plugins/portfolio-plugin/vendor/webdevstudios/cmb2/css/cmb2.css?ver=4.6.1 Failed to load resource: the server responded with a status of 404 (Not Found)\nAnd it should be something like this:\nhttp://bird.localbox.in/wp-content/plugins/portfolio-plugin/vendor/webdevstudios/cmb2/css/cmb2.css?ver=4.6.1 Failed to load resource: the server responded with a status of 404 (Not Found)\n. This works perfectly for me:\n```\nif ( defined( \"WP_DEBUG\" ) && WP_DEBUG ) {\n    function cm_update_cmb2_meta_box_url( $url ) {\n    return plugin_dir_url( __FILE__ ) . '/vendor/webdevstudios/cmb2';\n}\n\nadd_filter( 'cmb2_meta_box_url', 'cm_update_cmb2_meta_box_url' );\n\n}\n```\nSo I'm not really looking for a solution anymore, but thanks anyway \ud83d\udc4d . I'll probably remove that function when building for production.\n. Hi @tw2113 \nThe plugin I'm talking about is Easy Photography portfolio.\nPhotography Portfolio: https://wordpress.org/plugins/photography-portfolio/\nTranslation page: https://translate.wordpress.org/projects/wp-plugins/photography-portfolio\nYes to both your questions.\nIt kind of defeats the purpose of translations, if only photography-portfolio part is translated. I think that's a no-brainer.\nWhat I'm trying to achieve is - when people ask me that they want to translate the plugin - I could send them to Wordpress translation project, and they'd have to only translate those few strings that my plugin has, instead of having to dig through 15 pages of strings to find the photography portfolio lines.. > Throwing some thoughts out there, I'm betting glotpress gathers ALL of the textdomains it can find, and goes from there, regardless of any match status. \nYeah, unfortunately they do that. I wish there was a way to tell glotpress only to use a certain textdomain for a plugin.\n\nyou could use something like http://tgmpluginactivation.com/ to decouple CMB2 \n\nI had the same thought, but that's just not going to look right for the user. I guess I'll have to endure the pile of translation strings in the glotpress repo, in hopes that someday they decide to update it a little more. Or maybe one day my plugin matures enough for me to build my own dashboard that doesn't rely on CMB2.. ",
    "taimurahmad971": "problem solved by just commenting these lines in init.php\n                      // Kick the whole thing off.\n            //require_once( cmb2_dir( 'bootstrap.php' ) );\n            //cmb2_bootstrap();\n. ",
    "pgroot91": "The example provided doesn't seem to work anymore. Tried using the example on a options page. . @tw2113 @jtsternberg thanks guys for the clarification and the provided update/fix. \ud83d\udc4d . > I see nothing wrong with the method above, as long as the images are in that location and the generated url is complete and accurate.\n'img1' => '<img src=\"<?php echo get_template_directory_uri(); ?>/inc/admin/images/layout_one.png\" alt=\"Image 1\" title=\"Image 1\">',\nShouldn't it be something like this? \n'img1' => '<img src=\"' . echo get_template_directory_uri(); . '/inc/admin/images/layout_one.png\" alt=\"Image 1\" title=\"Image 1\">',. @tw2113 was pretty close... \ud83d\ude02 but that looks more like it!. @tw2113 came also up with the same solution. I didn't came up with a solution to keep the main menu item highlighted/active when navigation to the other pages.\nAh my case was little different. I used it in an existing menu for a plugin...\n- submenu(Settings) submenu-item should be always active\n- submenu(Secondary)  removed menu item\n- submenu(Tertiary) removed menu item\nloosing the highlighed/active in the first submenu item(Settings) when you click another tab. ",
    "khromov": "Conditional logic should be a top priority and preferably in the core, coming off of ACF which has excellent conditional logic it feels like going back 10 years to use CMB2 unfortunately. \n. I apologize if my earlier comment came off as dismissive. CMB2 is uniquely positioned as the only easily-embeddable, fully-GPL fields framework. \n. ",
    "jerturowetz": "Very interested in being able to use a variable entry instead of a variable number (like a group field value.)  I'm thinking this probably could be done in the same way 'show_on' works - where it only goes in to effect AFTER the post(whatever) is saved.\nBear in mind I'm thinking of this only in an aesthetic sense - where we're not actually replacing keys or anything - just flipping out {#} for some other value.\nCan you advise where I can find the bits of code which deal with group numbering?  Maybe I can dive in and take some load off yer back.\n. I'll take a look at the bug.  Could you provide an answer on the question of using 'object_types' => array( 'attachment' ) ?\n. i guess this is more a feature request than a bug then.  Gotchya mah man - thanks for the reply!\n. ",
    "dport512": "Why not just refactor replace_hash into something more substantial? (either with an option or a CB to set/alter the output)\nThe CMB2_Field class is where you can handle  the index. This is where you deal with the title specifically (or just change that part specifically so that replace_hash is the default action and a CB/option is an alternate so it doesn't break anything)\nThis isn't meant to be a real world example, but I just replaced the contents of the replace_hash function with:\nreturn $this->value[$this->index][\"shortcode_title\"];\nWhere \"shortcode_title\" is the name of my property I want to replace the title with. It worked just fine. As mentioned earlier, updating the title before you hit \"update\" to save the page is trivial with Javascript. \nI haven't touched sorting at all. (because I have no idea if it's even active/how it works tbh) \n. ",
    "pvmishra": "Than you, for your quick answer. I was curious to make a table field like the group fiend hence i raised the query. i wish that new cmb version should have the table support. its my feature request.\n. ",
    "fujianto": "+1 for this...\n. ",
    "apokyro": "Thanks @JayWood . It works!!\nFor anyone who want to use this method:\nphp\nfunction cmb2_sanitize_text_callback( $override_value, $value ) {\n    //convert square brackets to angle brackets\n    $value = str_replace('[', '<', $value);\n    $value = str_replace(']', '>', $value);\n    return $value;\n}\nadd_filter( 'cmb2_sanitize_text', 'cmb2_sanitize_text_callback', 10, 2 );\nIn other words if you type [br] inside a text field, it will output <br>.\n. ",
    "yeasin62": "Thats works. Thank you so much.. ",
    "ingageco": "Justin - we're just rendering a field as so: \n$obj = cmb2_get_field($box, $field);\n$obj->render_field();\nThis provides us with the HTML output of the field to display. Is there anywhere within this that we can specify a value for the field before showing it? Or is there a different approach that would accomplish showing the field with a supplied value?\n. OK - and I should apply in between cmb2_get_field() and the render call?\n. Great - i'll work with it and ask another question if needed. Thanks Justin! \n. I'd also like to bring up this issue. I have a large amount of boxes (6-7) with varying types and amounts of fields within each. i'm currently experiencing an issue where the LAST box - whichever one you drag down to the bottom - will not display the data. If you do a before on it, the data is right in the database - but the field will not display the data. If I delete one of our metaboxes - any one - the data saves & displays fine. \nI think it has to do with the large amount of data being displayed / updated. Any ideas @jtsternberg ? . Thanks for the reply - but like I said, it's saving to the database fine. The CMB field / group just doesn't have the values set it looks like. I tried setting it manually but it still wouldn't show. . @jtsternberg I'm going to open up a new issue since it persisted with some of the fields removed.. I've confirmed this in a fresh install. I replaced the WP_Query with get_results($sql) and it works as expected. . Great find @tw2113 ! Certainly could be it. . ",
    "wpscholar": "@jtsternberg I was actually just perusing the code and noticed this.  Knowing that the guid isn't the most reliable way, I figured I would throw in my two cents.\n. ",
    "BeFiveINFO": "I also have the same question.\nI have a suspicion that 'default' field for multicheck / multicheck_inline does not exist or is not taken into account even if the 'default' is set.. ",
    "CarlosRios": "@jtsternberg I should've closed this. I ended up figuring it out earlier this year :)\n. ",
    "atrivisano": "Hey there, I know this is kind of grave digging but if someone comes across this looking for answers, I had the same problem 'show_on' => array( 'key' => 'page-template', 'value' => 'front-page.php' )  wasn't showing then I decided to try 'show_on' => array( 'key' => 'page-template', 'value' => 'template_dir/front-page.php' ) and it worked.\nBasically if you are organising your template files in a directory you have to specify the directory like above.\n. ",
    "LC43": "In case you're not using a template for the homepage, you can do like this:\n```\n$front_page_ID = get_option('page_on_front');\n[...]\n'show_on'     => array( 'id' => array( $front_page_ID, ) ),\n```. glad you found it useful @hazelveek! . hi!\nmeanwhile, i found this other issue https://github.com/CMB2/CMB2/issues/1112 that led to this problem. Later on, i'll try to see if the sanitization is being overwritten somewhere.. thanks everyone for this!. ",
    "hazelveek": "Thanks @LC43,\nJust what I needed. ",
    "quasel": "Did a bit of research seems Jetpack uses WP_DEVELOP_DIR this way - many other seem to use WP_TESTS_DIR without looking at WP_DEVELOP_DIR or like pods just adding . '/tests/phpunit'\nMakes the most sense to me at least from reading the Words ;) develop dir ... \nProblem is this might break some testing setups - maybe \n. Another one using pods approach WP-API \nhttps://github.com/WP-API/WP-API/blob/develop/tests/bootstrap.php#L21\n. ",
    "nielsvr": "Ah, my bad. Confused by the mention of CMB2 in that post.\n. ",
    "surgeonsadvisor": "i think this could be the cause of the issue, the cmb2.min.js file can't find the proper ID for files in repeteable groups that are already on the post, but if i create a a new group and added a file there, now the js can find the ID.\n\n. ",
    "matteodesanti": "+1\n. ",
    "wpsmith": "Moved to #474\n. See #475 \n. @wpscholar is correct here.. ",
    "arippberger": "@jawittdesigns did you find some documentation on this?\n. :tada: thank you\n. ",
    "erikberger": "I'm interested in this as well.\nCould fields have an argument for something like:\npreviewable => TRUE // defaults to false\n. ",
    "willwatson": "I'm also interested in a fix for this please!!\n. ",
    "danwebb13": "I agree, would be great if this was a possibility.\n. ",
    "designspin": "I am now also needing this feature, any solution?\n. ",
    "poopsplat": "+1\nWas this feature ever addressed? I've been working with CMB2 for a while and somehow never noticed that the fields don't appear in post preview for published posts.. ",
    "teslimni": "@humidca not at all. I have given up on CMB2 since and try to roll out my own options page. Talk of re-inventing the wheel. But when the available wheel is not serving you, you got to move ahead creating your own. Thanks to the codex and Google, O managed to roll one out. Though still refactoring it.\n. @humidca Thanks so much. I definitely will come back to it with what you showed me. I am proud to be a web developer because of this kind behaviour you just showed me. The spirit of sharing tips and solutions among developers make me believe in the kindness of humanity. Thanks sooo much. \nI am currently working on creating a simple theme framework with sass, compass, susy and the theme hook alliance idea of theme hook. I will be relying heavily on third party systems to make this happen. Sure, CMB2 will be part of it. \n. ",
    "SpoddyCoder": "+1 here - symlinks are pretty useful way to setup servers - so while not common, I wouldn't go as far to say as it's obscure, so would be good to get resolved. I may attempt a PR for this, as looks like a low priority issue.. ",
    "whitesunset": "First try here https://github.com/WebDevStudios/CMB2/pull/485\n. ",
    "14850842": "?\n. ",
    "webberwang": "Do you guys plan to add support for SVG files? The preview doesn't work for SVG's.. Wordpress core doesn't support SVG natively. So I'm using an SVG plugin that helps with SVG rendering for thumbnails in the media section. \nCMB2 is using it's own function to output the thumbnails, I took a quick peek at the source & it was missing the SVG file extension.. ",
    "katojune": "I am seeing this issue occur as well with using repeating address-type field as well as my own multi-input field.\n. ",
    "wayheming": "@JayWood thank you. +1 http://prntscr.com/jnhy4y\n@MyLoVeSunITy works for me in plugins/cmb2/includes/CMB2_JS.php\nremove if ( function_exists( 'wp_enqueue_code_editor' ) ) {\n            $l10n['defaults']['code_editor'] = wp_enqueue_code_editor( array(\n                'type' => 'text/html',\n            ) );\n        }\nhttp://prntscr.com/jnhil1. @jtsternberg Thank you!. ",
    "VdeVatman": "@jtsternberg The metabox exists and is shown within /wp-admin, and I used the shortcoded as expected.\n. ",
    "elruinnou": "@jtsternberg hi big thanks for the commits, and I'm sorry for not very clear on my questions.\nSo basically, I've achieved what I wanted to, but with a little copy this and that from the core.\nHere's my page template:\n``` php\n<?php\n$GLOBALS['getfront_cmb']  = wds_frontend_cmb2_get(); // get the object array\nCMB2_hookup::enqueue_cmb_css(); //for the wyswyg, I have to do this manually\nCMB2_hookup::enqueue_cmb_js(); //for the wyswyg, I have to do this manually\nfunction getcmb_atts($id, $atts){ // to get only a specific attribute\n    $that_field = $GLOBALS['getfront_cmb']->meta_box['fields'][$id][$atts];\n    return $that_field;\n  }\n  function getcmb_field($id){ // THIS is the RENDER method, that I copied from the plugin\n    $that_field = $GLOBALS['getfront_cmb']->meta_box['fields'][$id];\n    $field = $GLOBALS['getfront_cmb']->get_field( $that_field )->render_field();\n    return $field;\n  }\n?>\n the form \n\n .... whatever bootstrap or foundation or those grids html tags ... \nphp getcmb_field(\"submitted_post_content\"); //this is for the wyswyg field ?\n .... whatever bootstrap or foundation or those grids html tags ... \n .... whatever bootstrap or foundation or those grids html tags ... \nphp getcmb_field(\"submitted_post_title\"); // text field ?\n .... whatever bootstrap or foundation or those grids html tags ... \n this is the magic of the first function, let's say we want to render a text field (you have to acknowledge the rendered field should be look like first) \n\n finally the closing form \n\n\n      <button type=\"submit\" name=\"submit-cmb\" id=\"submit-cmb\" title=\"Publish\" class=\"hr-btn light-grey\">Publish</button>\n\n\n```\nIs my code above a bad practice or a pretty good one?\nPlease let me know, I'm afraid it will break the template once there's CMB2 updates in the future.\nHope this helps someone!\nThanks!\n. ",
    "wesamly": "@devinsays How can download the version contains your updates? I started working with CMB2, and I need RTL for Arabic.\n. @jtsternberg Thank you, i'll test and be back with results.\n. RTL is working great. I tested with Arabic. It will be great if added to master branch. Thank you @jtsternberg  @devinsays \n\n. Hello,\nI noticed that when I used this branch, I get the following error in some pages:\nFatal error: Cannot redeclare cmb2_dir() (previously declared in /Applications/MAMP/htdocs/lab/wptest/wp-content/themes/cpt_theme/cpt_base/library/CMB2/includes/helper-functions.php:18) in /Applications/MAMP/htdocs/lab/wptest/wp-content/plugins/ls_slider/CMB2/includes/helper-functions.php on line 20\nBut when I use the official branch, it doesn't appear.\nI've a plugin that embed CMB2, and I also embed it in a theme.\n. ",
    "yogasukma": "ah sorry, i got it. i think i have modified $prefix by my own functions. but it wasn't so they have same id and that is my problems. \n. ",
    "nriddhi": "how to call it from index page?. thanks, problem solved. when displaying the saved metabox fields on the frontend, >> when i will input anything it will show there in front otherwise will show else condition text. ow, thank you very much. how should i adjust cmb_field_map with CMB2. Like This\n```\nfunction clava_metabox_post() {\n$cmb = new_cmb2_box( array(\n    'id'            =>  'metabox1',\n    'title'         => __( 'Post Metabox', 'cmb2' ),\n    'object_types'  => array( 'post')\n) );\n\n$cmb ->add_field( array(\n    'name'       => __( 'Enter Your Video URL here', 'cmb2' ),\n    'desc'       => __( 'Your Video URL here', 'cmb2' ),\n    'id'         => 'clava_post_video',\n    'type'       => 'oembed',\n) );\n\n}\nadd_action( 'cmb2_admin_init', 'clava_metabox_post' );\n```\ni have tried with default value of CMB2 , but it don't working in wordpress latest version. I am using localhost server. but what can be the problem, now i am using wordpress older version. it was consistent error, now i am using wordpress older version 4.6. ",
    "dwruck": "I was trying to keep that in mind and I tried to follow this instructions here: https://github.com/WebDevStudios/CMB2/wiki/Tips-&-Tricks#using-cmb2-helper-functions-and-cmb2_init but somehow I was not able to put it all together right.\n. Thank you so much!!! I added that code and feel like I almost have this working but I cannot seem to get the code right to call the required file. I am trying to learn as fast as I can, but I am way behind where I need to be and I am afraid I am in over my head. I am not trying to take the lazy way out by asking for help. I did spend about 3 hours trying to get this right but I am stuck. Can you tell what is wrong with my code?\n\nfunction cmb2_init_check_field_value() {\ndefine('COMPEL_PLUGIN_PATH', plugin_dir_path(__FILE__)); \n$checked_value = compel_get_option( 'compel_checkbox', true );\n    if( checked( $checked_value, 1, false ) ) {\n        require_once COMPEL_PLUGIN_PATH . 'post-types/staff.php';\n    }\n}\nadd_action( 'cmb2_init', 'cmb2_init_check_field_value' );   \n\n. Good thought....I tried removing the If checked function and the file did not load.\n\nfunction cmb2_init_check_field_value() {\ndefine('COMPEL_PLUGIN_PATH', plugin_dir_path(__FILE__)); \n//This is important, otherwise we'll get the path of a subdirectory\n// Include any required files\n$checked_value = compel_get_option( 'compel_checkbox', true );\n        require_once COMPEL_PLUGIN_PATH . 'post-types/staff.php';\n}\nadd_action( 'cmb2_init', 'cmb2_init_check_field_value' );\n\nHowever when outside the function completely, the file did load.\n\ndefine('COMPEL_PLUGIN_PATH', plugin_dir_path(__FILE__)); \nrequire_once COMPEL_PLUGIN_PATH . 'post-types/staff.php';\n\n. The code I have is almost working now. I was able to put an echo inside the if checked function and it works perfectly. The problem now is getting any kind of include/require function to work inside of this function.\n\nfunction cmb2_init_check_field_value() {\n$checked_value = compel_get_option( 'compel_checkbox', true );\n    if ( 0 == $checked_value ) {\n    require_once plugin_dir_path( __FILE__ ) . '/post-types/staff.php';\n    }\n}\nadd_action( 'cmb2_init', 'cmb2_init_check_field_value' );\n\nThis code below works perfectly outside of the function, but inside it will not work. Could it be how or when the cmb2_init is loaded?\n. This is the whole file:\n\n   Plugin Name: Compel Church Content\n   Description: A plugin to manage church content in WordPress\n   Version: 1.1\n   Author: Doug Wruck\n   Author URI: http://dougwruck.com\n   License: GPL2\n   */\n// Exit if accessed directly\nif ( ! defined( 'ABSPATH' ) ) {\n    exit;\n}\nif ( ! class_exists( 'Compel_Plugin' ) ) {\n    class Compel_Plugin {\n        /**\n         * Construct function to get things started.\n         */\n\n        public function __construct() {\n            // Setup some base variables for the plugin\n            $this->basename       = plugin_basename( __FILE__ );\n            $this->directory_path = plugin_dir_path( __FILE__ );\n            $this->directory_url  = plugins_url( dirname( $this->basename ) );\n            // Include any required files\n            require_once( $this->directory_path . '/admin/admin.php' );\n            require_once( $this->directory_path . '/assets/shortcodes.php' );\n            require_once( $this->directory_path . '/includes/taxonomies.php' );\n\n            // include CMB2 if it doesn't already exist\n            if ( ! defined( 'CMB2_LOADED' ) ) {\n                require_once( $this->directory_path . '/includes/cmb2/init.php' );\n            }\n            // Make sure we have our requirements, and disable the plugin if we do not have them.\n            add_action( 'admin_notices', array( $this, 'maybe_disable_plugin' ) );\n\n        }\n        /**\n         * Check that all plugin requirements are met\n         *\n         * @return boolean\n         */\n        public static function meets_requirements() {\n            // Make sure we have CMB so we can use it\n            if ( ! defined( 'CMB2_LOADED' ) ) {\n                return false;\n            }\n            // We have met all requirements\n            return true;\n        }\n        /**\n         * Check if the plugin meets requirements and\n         * disable it if they are not present.\n         */\n        public function maybe_disable_plugin() {\n            if ( ! $this->meets_requirements() ) {\n                // Display our error\n                echo '';\n                echo '' . sprintf( esc_html__( 'Compel Plugin requires CMB2 but could not find it. The plugin has been deactivated. Please make sure all requirements are available.', 'compel_plugin' ), admin_url( 'plugins.php' ) ) . '';\n                echo '';\n                // Deactivate our plugin\n                deactivate_plugins( $this->basename );\n            }\n        }\n    }\n    $_GLOBALS['Compel_Plugin'] = new Compel_Plugin;\n}\n/**\n * Public wrapper function\n */\nfunction compel_plugin() {\n    return new Compel_Plugin;\n}\nfunction cmb2_init_check_field_value() {\n$checked_value = compel_get_option( 'compel_checkbox', true );\n    if ( 0 == $checked_value ) {\n    require_once plugin_dir_path( __FILE__ ) . '/post-types/staff.php';\n    }\n}\nadd_action( 'cmb2_admin_init', 'cmb2_init_check_field_value' );\n\n. Oh, sorry :)  I did do the test and it output the value of \"1\", inside and outside the function. \nThe staff.php file just creates a custom post type. Code below \n\n\n// No direct access\nif ( ! defined( 'ABSPATH' ) ) exit;\n/**********************************\n * STAFF\n **********************************/\nfunction compel_register_post_type_staff() {\n  $labels = array(  \n    'name'                  => _x( 'Staff', 'post type general name', 'compel-content' ),\n    'singular_name'         => _x( 'Staff', 'post type singular name', 'compel-content' ),\n    'add_new'               => _x( 'Add New', 'staff', 'compel-content' ),\n    'add_new_item'          => __( 'Add Staff Member', 'compel-content' ),\n    'edit_item'             => __( 'Edit Staff Member', 'compel-content' ),\n    'new_item'              => __( 'New Staff Member', 'compel-content' ),\n    'all_items'             => __( 'All Staff Members', 'compel-content' ),\n    'view_item'             => __( 'View Staff Member', 'compel-content' ),\n    'search_items'          => __( 'Search Staff Members', 'compel-content' ),\n    'not_found'             => __( 'No staff members found', 'compel-content' ),\n    'not_found_in_trash'    => __( 'No staff members found in Trash', 'compel-content' )\n   );  \n\n $args = array(  \n    'labels' => $labels,  \n    'public' => true,  \n    'publicly_queryable' => true,  \n    'show_ui' => true,  \n    'show_in_menu' => true,  \n    'show_in_nav_menus'   => true,\n    'query_var' => true,  \n    'capability_type' => 'post',  \n    'menu_position'       => 5,\n    'has_archive' => true,  \n    'hierarchical' => false,  \n    'menu_icon'     => 'dashicons-admin-users',\n    'supports' => array('title', 'page-attributes' )  \n  );  \n  // The following is the main step where we register the post.  \n  register_post_type('compel_staff',$args);  \n}\nadd_action( 'init', 'compel_register_post_type_staff' ); // register post type \nadd_filter('post_updated_messages', 'compel_staff_updated_messages');  \n\nfunction compel_staff_updated_messages( $messages ) {  \n  global $post, $post_ID;  \n\n  $messages['compel_staff'] = array(  \n    0 => '', // Unused. Messages start at index 1.  \n    1 => sprintf( __('Staff updated. View staff'), esc_url( get_permalink($post_ID) ) ),  \n    2 => __('Custom field updated.'),  \n    3 => __('Custom field deleted.'),  \n    4 => __('Staff updated.'),  \n    /* translators: %s: date and time of the revision */  \n    5 => isset($_GET['revision']) ? sprintf( __('Staff restored to revision from %s'), wp_post_revision_title( (int) $_GET['revision'], false ) ) : false,  \n    6 => sprintf( __('Staff published. View Staff'), esc_url( get_permalink($post_ID) ) ),  \n    7 => __('Staff saved.'),  \n    8 => sprintf( __('Staff submitted. Preview staff'), esc_url( add_query_arg( 'preview', 'true', get_permalink($post_ID) ) ) ),  \n    9 => sprintf( __('Staff scheduled for: %1$s. Preview Staff'),  \n      // translators: Publish box date format, see http://php.net/date  \n      date_i18n( __( 'M j, Y @ G:i' ), strtotime( $post->post_date ) ), esc_url( get_permalink($post_ID) ) ),  \n    10 => sprintf( __('Staff draft updated. Preview Staff'), esc_url( add_query_arg( 'preview', 'true', get_permalink($post_ID) ) ) ),  \n  );  \n\n  return $messages;  \n}  \nfunction change_compel_staff_title( $title ){\n     $screen = get_current_screen();\n\n     if  ( 'compel_staff' == $screen->post_type ) {\n          $title = 'Staff Name';\n     }\n\n     return $title;\n}\n\nadd_filter( 'enter_title_here', 'change_compel_staff_title' );\nif ( function_exists( 'add_image_size' ) ) { \n    add_image_size( 'staff_pic', 450, 235, true ); //(cropped)\n}\n\n\nadd_action( 'cmb2_init', 'cmb2_compel_staff_metaboxes' );\n/**\n * Define the metabox and field configurations.\n */\nfunction cmb2_compel_staff_metaboxes() {\n    // Start with an underscore to hide fields from custom fields list\n    $prefix = '_compel_staff_';\n    /**\n     * Initiate the metabox\n     */\n    $cmb = new_cmb2_box( array(\n        'id'            => 'staff_information',\n        'title'         => __( 'Staff Information', 'cmb2' ),\n        'object_types'  => array( 'compel_staff', ), // Post type\n        'context'       => 'normal',\n        'priority'      => 'high',\n        'show_names'    => true, // Show field names on the left\n        // 'cmb_styles' => false, // false to disable the CMB stylesheet\n        // 'closed'     => true, // Keep the metabox closed by default\n    ) );\n            $cmb->add_field( array(\n                'name' => 'Staff Description',\n                'desc' => 'This is a small description of each staff member. Should be between 20-30 words.',\n                'id'   => $prefix . 'bioexcerpt',\n                'type' => 'wysiwyg',\n                'options' => array( 'textarea_rows' => 5, ),\n            ) );\n\n            $cmb->add_field( array(\n                'name' => 'Full Staff Bio',\n                'desc' => 'This is for lengthy bios that will require a read more button. Any text entered in the box will produce a read more button.',\n                'id'   => $prefix . 'bio',\n                'type' => 'wysiwyg',\n                'options' => array( 'textarea_rows' => 10, ),\n            ) );\n\n            $cmb->add_field( array(\n                'name' => 'Church Staff Title',\n                'desc' => 'Please enter the title or position of the staff member. This will be used on the school pages.',\n                'id'   => $prefix . 'position',\n                'type' => 'text_medium',\n            ) );\n\n            $cmb->add_field( array(\n                'name' => 'Alternative Ministry Title',\n                'desc' => 'Please enter the title or position of the staff member. This will be used on the school pages.',\n                'id'   => $prefix . 'alt_position',\n                'type' => 'text_medium',\n            ) );\n            $cmb->add_field( array(\n                'name' => 'Calendar Link',\n                'desc' => 'This is the url for speaking engagement calendar. Include full link including \"http://\"',\n                'id'   => $prefix . 'calendar_link',\n                'type' => 'text_medium',\n            ) );\n\n            $cmb->add_field( array(\n                'name' => __( 'Staff Picture' ),\n                'desc' => __( 'Upload an image or enter a URL.' ),\n                'id'   => $prefix . 'staff_image',\n                'type' => 'file',\n                'save_id' => true,\n            ) );\n\n            $cmb->add_field( array(\n                'name' => __( 'Family Picture' ),\n                'desc' => __( 'Upload an image or enter a URL.' ),\n                'id'   => $prefix . 'family_image',\n                'type' => 'file',\n                'save_id' => true,\n            ) );\n\n            $cmb->add_field( array(\n                'name' => 'Staff Email',\n                'desc' => 'This is an optional email link for each staff member.',\n                'id'   => $prefix . 'email',\n                'type' => 'text_medium',\n            ) );\n            $cmb->add_field( array(\n                'name' => 'Staff Twitter',\n                'desc' => 'This is an optional Twitter link for each staff member. Include full link including \"http://\"',\n                'id'   => $prefix . 'twitter',\n                'type' => 'text_medium',\n            ) );\n\n            $cmb->add_field( array(\n                'name' => 'Staff Facebook',\n                'desc' => 'This is an optional Facebook link for each staff member. Include full link including \"http://\"',\n                'id'   => $prefix . 'facebook',\n                'type' => 'text_medium',\n            ) );\n\n            $cmb->add_field( array(\n                'name' => 'Staff LinkedIn',\n                'desc' => 'This is an optional LinkedIn link for each staff member. Include full link including \"http://\"',\n                'id'   => $prefix . 'linkedin',\n                'type' => 'text_medium',\n            ) );\n}\n\n. That worked. Thanks!\n. ",
    "wesleycole": "Very nice! No idea that that existed. I will definitely give it a shot to see if it covers what I need. Looks like it will. \nThanks!\n. Sorry for the delayed response! Appreciate your help on this and providing the solution. \n. ",
    "tatemz": "Anyone seen this? :'-(\n. Yay! Finally someone saw this.\nI think it should be an option for radio type, but having a radio_other at least gets us an MVP\n. ",
    "mungurs": "You can set format just using text_time (time_format) setting . \nphp\n$cmb->add_field( array(\n    'name' => esc_html__( 'Test Date/Time Picker Combo (UNIX timestamp)', 'cmb2' ),\n    'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'datetime_timestamp',\n    'type' => 'text_datetime_timestamp',\n    'time_format' => 'H:i',\n) );\n. ",
    "janw-me": "I fould a way to make a lot of field types translatable in qtranslate:\n```\nadd_filter('cmb2_input_attributes', 'cmb2_qtranlate_values', 10, 3);\nadd_filter('cmb2_textarea_attributes', 'cmb2_qtranlate_values', 10, 3);\n/*\n * @param array $passed_args\n * @param array $defaults_args\n * @param CMB2_Field $field\n /\nfunction cmb2_qtranlate_values($passed_args, $defaults_args, $field)\n{\n    if ( ! in_array($field->type(), array(\n        'text',\n        'text_small',\n        'text_code',\n        'text_medium',\n        'text_url',\n        'textarea',\n        'textarea_small',\n        'textarea_code'\n    ))\n    ) {\n        return $passed_args;\n    }\nif (isset($passed_args['class']) &&  !empty($passed_args['class']) ) {\n    $passed_args['class'] .= ' i18n-multilingual';\n} else {\n    $passed_args['class'] = $defaults_args['class'] . ' i18n-multilingual';\n}\nreturn $passed_args;\n\n}\n``\n. Nope still here. The problem moved toplugins/cmb2/includes/types/CMB2_Type_Multi_Base.php:67`\n. @tw2113 \nI tested the diff it doesn't work :(\nThe $value (which comes from the database) is a string. But the field values are integers.\n. I had a up to date CMB2 in WordPress and manually applied the DIFF.\nI'll test trunk.\n. Trunk works.\nYaay :)\n. ",
    "watson-77": "CMB2 - v2.2.6, v2.4.2 - multiple plugin with cmb2 not working. ",
    "jdcauley": "Related to Repeatable fields:\nA tinymce in repeater won't focus or receive input\n. ",
    "lucascdsilva": "Hello, I resolved that problem that way, #532 , what do you think?! sorry, I do not know very well use the github yet!\n. @jtsternberg I did not understand ! I have not found the solution to this problem\n. ",
    "kiarashi": "@jajouka79: I'm sorry for the late reply. \nI'm afraid I wasn't able to make this work either. :(\n. ",
    "ClicGraham": "It's also conflicting with repeatable fields. :-(\n. I've gone back to previous version of Yoast for now to give this some time to settle, then I'll do some tests and check all is fine.\n. ",
    "johndnixon": "Downloaded 3.0.4 and all works.\n. ",
    "djapra": "im using yoast 3.6 and cmb 2.2.2.1 it adds whitespace to my  xml file when i init a cmb2 metabox, any idea  how to fix this?\n. My bad guys, i accidentally have whitespace on my function file :)\n. ",
    "cggit": "The issue is\n```\nif ( isset( $_GET['post'] ) ) {\n    $post_id = $_GET['post'];\n} elseif ( isset( $_POST['post_ID'] ) ) {\n    $post_id = $_POST['post_ID'];\n}\nif ( ! $post_id ) {\n     return $display;\n }\n```\nas new posts do not have a post_id yet.\n. There is also a typo in the docs. They suggest using 'meta'\n$meta_boxes['show_on'] = array( 'meta' => [enter-meta-key], 'meta_value' => [enter-meta-value], );\nbut the function references 'meta_key'\n$meta_box['show_on']['meta_key']\ncould be confusing for some.\n. ah this helps thanks! I saw 'show_on_cb' but wasn't sure of the best way to reference other fields. \n. ```\nadd_action( 'cmb2_admin_init', 'metaboxes' );\nfunction metaboxes() {\n$prefix = '_Oo_';\n\n$cmb = new_cmb2_box( array(\n    'id'            => $prefix . 'news_item_options',\n    'title'         => __( 'Article Options', 'cmb2' ),\n    'object_types'  => array( 'post' ), // Post type\n    'context'       => 'side',\n) );\n\n$group_field_id = $cmb->add_field( array(\n    'id'          => $prefix . 'feature_options_group',\n    'type'        => 'group',\n    'description' => __( 'Feature Options', 'cmb2' ),\n    'repeatable'  => false, // use false if you want non-repeatable group\n// 'closed'     => true, // true to have the groups closed by default\n\n) );\n\n$cmb->add_group_field( $group_field_id, array(\n    'name'       => __( 'Featured Image width', 'cmb2' ),\n    'desc'       => __( 'First image in text is full width', 'cmb2' ),\n    'id'         => 'post_feature_width', \n    'type'       => 'checkbox', \n    //'default'   => cmb2_set_checkbox_default_for_new_post( true ),\n) );\n\n}\nfunction cmb2_set_checkbox_default_for_new_post( $default ) {\n    return isset( $_GET['post'] ) ? '' : ( $default ? (string) $default : '' );\n}\n```\nAt first I thought it was the default state function causing the issue but I have the same issue without using it.\n. After some more testing I can say the bug only seems to show itself when a group is made up of only checkboxes. After adding a text field to the group all the checkboxes can be turned off as expected.\nAgain, having one or more checkboxes (only checkboxes) will result in at least one checkbox always being on (after its been turned on). eg. If you have 3 checkboxes turned on, you will not be able to turn them all off at once. You can turn 2 of them off but the last one will always stay on.\n. Great. That works too and is most slick! I updated my comment just so I know how to properly reference next time. ",
    "apeximum": "@cggit can you tell me the way you did it...bcoz i have the same problem...thank you in advance \n. i am facing the same problem too...given example is not working..does it the all or anything else we have to do to work this code\n. ```\n<?php \nadd_action( 'cmb2_admin_init', 'page_title_bg_metabox' );\nfunction page_title_bg_metabox() {\n$cmb = new_cmb2_box( array(\n    'id'           => 'page_title',\n    'title'        => 'Page Title',\n    'object_types' => array( 'page', ), // Post type\n) );\n\n$cmb->add_field( array(\n    'name'    => 'Style',\n    'id'      => 'page_title_style',\n    'type'    => 'select',\n    'options' => array(\n        '01' => 'Style 01',\n        '02' => 'Style 02',\n    ),\n) );\n\n$cmb = new_cmb2_box( array(\n    'id'            => 'page_title_background',\n    'title'         => 'Title Background',\n    'object_types'  => array( 'page', ), // Post type\n    'show_on_cb'    => 'cmb_page_title_background', // function should return a bool value\n) );\n\n$cmb->add_field(array(\n    'id'        => 'page_title_background_upload',\n    'type'      => 'file',\n    'name'      => __( 'Background Image', 'equator' ),\n    'options'   => array(\n            'url'                   => false,\n            'add_upload_file_text'  => 'Add or Upload images'\n        ),\n    )\n);\n\n}\nfunction cmb_page_title_background( $cmb ) {\n$style = get_post_meta( $cmb->object_id(), 'page_title_style', 1 );\n\nreturn '02' === $style;\n\n}\n```\n. ",
    "ruturaaj": "Here is the code for my Metabox Field:\n$news_mb->add_field(array(\n            'type' => 'taxonomy_select',\n            'id' => $prefix . 'news-group',\n            'name' => 'News Category',\n            'taxonomy' => 'category',\n        ));\nThe $prefix is \"_home_\".\nHere is the code I'm trying in my theme's page.php ...\n<?php echo get_post_meta(get_the_ID(), '_home_news-group', true); ?>\nNothing is printed.\n. Which is the best place to get help for CMB2? Is this forum accessed by authors regularly? Not sure where to post my queries...\n. Look for cmb2-conditionals plugin. It should solve your issue. \nhttps://github.com/jcchavezs/cmb2-conditionals\nIt offers data-conditional-id which is nothing but the ID of the dependent field. The data-conditional-value is an optional attribute where you can specify the value-condition, good for checking against a particular value of select field. \nRefer example-functions.php for the usage guideline.\n. Just found this:\nhttps://github.com/WebDevStudios/CMB2/blob/master/example-functions.php#L525-L565\nI am going to try this tonight; will revert back if I face any errors or difficulties while implementing this solution.\n. Are you looking to implement something like \"Tags\" in WordPress? If so, it's related to your Custom Taxonomy args. Don't make your Custom Taxonomy hierarchical and WordPress will treat it like Tags. You don't need CMB2 for this.\n\"Previously used Term\" ... as my information goes, there is no history of recently used terms maintained by WordPress. Max what you can do is... implement Select2 with all terms listed, let the User type in first few characters and the list will get filtered automatically as User goes on typing. \nAs far as the link to add new term goes, I suppose you will need to make your own custom field type.\n. on both front as well as backend. Thanks so much for your quick reply. I will try it out right now...\n. YES! It worked. :+1:  I thought it's only applicable for file_list. \n. ",
    "jondcampbell": "I am using the taxonomy_multicheck fields for my custom taxonomies to set the taxonomy terms on my custom post. I am trying to accomplish a frontend implementation of what the default taxonomy metaboxes do on the backend, but when the values are sanitized the taxonomy terms that were selected using the field are gone.\n. I am creating a new resource.\nFor testing I am dumping the $_POST and then dumping the $_POST after it has been sanitized.\nThe title and content survive sanitization but the taxonomy_multicheck fields do not.\n. I am having trouble understanding how the taxonomy_multicheck field is supposed to be used, if it isn't for setting the taxonomy terms for my post.\n. Sorry Justin,\nI am not trying to be a jerk I am just hitting a frustrating level of not understanding why this doesn't work.\nLets break it down like this\nA. Is it wrong to use a taxonomy_multicheck field to select some taxonomy terms that I want a post to be associated with?\nIn this case I have a bunch of ministry resources and we have custom taxonomies for the resource type, resource season, and resource age group. Each of those is a taxonomy and I want them to be able to have our resources be properly taxonomized under those terms.\nB. Should I expect taxonomy_multicheck values to survive get_sanitized_values()?\nC. I am currently assuming that as I process the frontend form I have to implement code that will save the values for my taxonomy_multicheck fields, CMB2 is not going to save values for me automatically, which is why I was thinking it should go through the sanitization and then I will save the terms for the post.\n. Hey @tw2113 ,\nEnded up switching to ACF for this project so this Issue doesn't really matter to me anymore.\n. ",
    "brunocantuaria": "Ok, it's working with the trunk ;)\n. ",
    "jmarceli": "Is it trunk branch? Mine doesn't work so nice.\nPlease check also if it works after initial save. I get this bug when I change existing oEmbed video.\n. I've done it already :)\nHere is my workaround (it's just  workaround I don't know why it works, but it does) https://github.com/jmarceli/CMB2/commit/acf4559d2b76a91226e556d71ecb85bfba13ee31\nIt's fine but doesn't display preview after pasting URL (with Ajax) only after saving. The Ajax call (probably) doesn't hit the correct CMB2 method.\n. ",
    "satwinderrathore": "Thanks @jmarceli , \nIt's worked for me, \n. Please make sure you are using the proper template tag for path.. Your code is okay, Please make sure images exists in the folder and you are using the main theme(parent theme). ",
    "eric-gagnon": "Hello CMB2 users and dev! new user here.\nI have encountered a problem that seem to be related, maybe not worth opening a new bug for now so I will comment here.\nI am evaluating CMB2 as a form solution to be used outside of the dashboard and support a post / edit worflow.\nI have assigned a default value while calling add_group_fieldand then object is not instanciated completely (I dont see the visual, but it's get updated after a cut and paste).\n$cmb->add_group_field( $group_field_oembed,  array(\n        'name' => 'Lien externe',\n        'desc' => 'Enter a youtube, twitter, or instagram URL. Supports services listed at <a href=\"http://codex.wordpress.org/Embeds\">http://codex.wordpress.org/Embeds</a>.',\n        'id'   => 'wiki_test_embed',\n        'type' => 'oembed',\n        'default' => '*** some url from youtube ***'\n    ) );\nAs a temporary workaround, I have patched init with something like this:\nvar oEmbedList = $('.cmb2-oembed');\n                oEmbedList.each(function(index) {\n                    cmb.doAjax($( this ));\n                });\nAnd then commented out this code (assume that the object is in focus (true when updating after a url paste, but not in this case), I guess there could be a extra parameter to differentiate the use case.\n/*\n                    if ( $( '.cmb2-oembed:focus' ).val() !== oembed_url ) {\n            return;\n        }\n                */\nThe visual refresh (cm.maybeOembed in javascript file) seem to be binded on focusout, keyup and paste only.\nMy first question would surely be : is it a intended behavior?\n. Sorry, no. I had to put that aside as we are on a agressive delivery timeline.\nI was considering CMB2 for our project but being new to wordpress and also the organisation I missed leverage to \"sell\" it. We met a few expert that we all about ACF and the Wordpress expert that we hired tought it was simpler to reimplement from scratch considering the constraint that we had (by ex. responsive and also accessibility support, free licence so we can freely distribute our project).\nI would personnaly have prefered creating new fields in cmb2 and even managed a custom fork to that have more control on the html output than a whole new developpement (I still think there will be alot of plumbing to do /redo)!\nExcept for that bug, CMB2 was looking usable so I know I could still be reverting to this solution if things are not going as expected.\n. Yes I understand, there should be more details / context, I would probably close is as \"not able to reproduce\" if I had to deal wich such bug! :)\nI was using 4.5.3 + 'responsive' theme on a dev setup using varying vagrant (on Windows 7) and \"fr_ca\" as lang config in wordpress, so nothing really fancy.\nI noticed the files where not loading because the form had some field element displaying text in english and this where I started to debug it to see where the translation where loaded.\n. ",
    "RubenMartins": "Any updates on this?\n. Any updates on this?. Hi, do you have update on this feature? Thanks. Any update on this?\nI'm also experiencing this with 4 custom fields and only the 4th is added to a new line of repeatable field.. @tw2113 yes I created an custom field with cmb2_render_ function witch is repeatable. And prior to the version 2.2.4 this works fine but with this version this bug appeared.. Any update on this @jtsternberg  ?. Any updates on this?. I've done more research and found that serialized fields dosen't work on the WP REST API because have security problems (remote code execution vulnerabilities in particular).\nI just need to update this serialized field to add new data to the repeatable group.\nWith this should I create a custom endpoint to work with serialized on this field? Or what do you suggest here?. Thank you @slaFFik in meantime I have created an custom endpoint to deal with this.\nBut probably this can be addressed in the future as mentioned as a bug by @jtsternberg \nLet me know if I can help somehow.. ",
    "anupamgovind1981": "Any updates on this issue. Please share if you guys found any alternative.. ",
    "rob-ot-dot-be": "perfecto mundo !\n. double perfecto mundo !\n. ",
    "IgorCode": "@tw2113\nIt sure is easier to avoid empty values, but I don't see how can it be better? :/\nAnyway, this code has been in production environment for almost a year. I'm currently on some non WordPress project so I don't have time to move to trunk (which, I believe, didn't exist back when I made this commit) and re-test again, if anyone wants to try to move to trunk by salvaging some of my code it's fine by me :)\n. ",
    "mgyura": "Looking good on my end.  Thank you.\nSincerely, \nMichael Gyura\n(888) 442-8731 ext 101\nhttp://pokayoke.design\n@pokayokedesign\nOn Mar 14, 2016, at 12:59 PM, Michael Beckwith notifications@github.com wrote:\nhey @mgyura https://github.com/mgyura \nCan you confirm whether or not this is still an issue with the updated plugin from the WordPress.org repo, or however you installed the library?\nIf it's still presenting issues, could you please start a support thread over at https://wordpress.org/support/plugin/cmb2 https://wordpress.org/support/plugin/cmb2? We use the WordPress.org forums for initial support and try to leave the GitHub issues area for confirmed bugs.\nThanks\n\u2014\nReply to this email directly or view it on GitHub https://github.com/WebDevStudios/CMB2/issues/560#issuecomment-196442801.\n. ",
    "mauricenaef": "Would love to know if this is possible as well? To Set it as a child field value would be great?\nThanks,\nMarcel\n. ",
    "jancbeck": "This helps me a lot, thanks @nonsensecreativity. I didn't consider saving the fields myself, but looking at your code and the one in https://github.com/WebDevStudios/CMB2/blob/b3b78a569f63560d2f8a039c4c1ff412a28f0156/includes/helper-functions.php#L238 makes it look pretty straightforward.\nStill, I think it might be worth refactoring cmb2_print_metabox_form to accept multiple metaboxes. Expect a PR if I get to figure this out.\n. I ended up using this very simple code:\n``` php\necho '\n';\n$args = array( 'form_format' => '%3$s' );\nforeach( get_meta_boxes() as $metabox ) { // loop over config array\n    cmb2_metabox_form( $metabox['id'], $object_id, $args );\n}\necho '';\n```\nUsing cmb2_metabox_form gives me fields saving and enqueueing of styles and scripts but the form_format argument removes the forms around the metaboxes. The two echo statements wrap that form around the boxes. That was easier than I thought.\n. ",
    "vegasgeek": "You, sir, are awesome. Sorry I missed that in my research prior to posting a ticket.\n. ",
    "anhskohbo": "I found a another way. It's hook in cmb2_sanitize_checkbox and return 0 instead of false (or null).\nThis will avoid CMB2_Utils::isempty() and CMB that will save value in database. When get value to give in to the condition, not change much.\n``` php\n<?php\nadd_filter( 'cmb2_sanitize_toggle', 'sanitize_checkbox', 20, 2 );\n/\n * Fixed checkbox issue with default is true.\n \n * @param  mixed $override_value Sanitization/Validation override value to return.\n * @param  mixed $value          The value to be saved to this field.\n * @return mixed\n /\nfunction sanitize_checkbox( $override_value, $value ) {\n    // Return 0 instead of false if null value given. This hack for\n    // checkbox or checkbox-like can be setting true as default value.\n    return is_null( $value ) ? 0 : $value;\n}\n```\n. Great, I can't wait for next version of CMB2 release.\n. I have a solution for this, see: https://gist.github.com/anhskohbo/75ddb64b5f3294f192ec5ac602fb5df3\nNot testing so much but I have try and working well in almost case.. You can look $page_type never declared before.\n. You're welcome :)\n. @slaFFik Yes, it's still some bugs, but I'm so busy with my current work. I will finish this ASAP.. I created a new pull request https://github.com/WebDevStudios/CMB2/pull/819. An another solution for this: https://github.com/WebDevStudios/CMB2/issues/564#issuecomment-261328088. ping @jtsternberg . Anyone review this?. I just refresh the code. Any update for this 6 months pull-request? :). Thanks!. My english is not good, so pls see this gif below :)\n\n. Thanks!. Thanks!. Yes, you can do that by pass query_args option:\nphp\n$cmb->add_field( array(\n    'name' => 'Test File List',\n    'id'   => 'wiki_test_file_list',\n    'type' => 'file_list',\n        'query_args' => array( 'type' => 'image' )\n) );\n. I read the source code and found that, actually query_args is passed on wp.media object in js: https://github.com/CMB2/CMB2/blob/trunk/js/cmb2.js#L207\nI thinks it's should be list at here: https://github.com/CMB2/CMB2/wiki/Field-Types#file_list\nAnd pls close the topic.. Added unit tests. I miss forgot line in last commit:\n```php\npublic function setUp() {\n    ...\nadd_option( 'cmb_empty_option', '' );\n\n}\n```\nSee the unit tests failures:\n\nThe bug is because this CMB2_Option::get_options:\n```php\n$this->options = get_option( $this->key, $default );\n...\nreturn (array) $this->options;\n```\nand on CMB2_Option::update() or CMB2_Option::remove() method:\n```php\npublic function remove( $field_id, $resave = false ) {\n$this->get_options();\n\nif ( isset( $this->options[ $field_id ] ) ) {\n    unset( $this->options[ $field_id ] );\n}\n\n```\nIf some reasons, I have a option with empty string (or nothing value). And call CMB2_Option::remove() will be given error Illegal string offset ....\nBecause you only cast when return options. Actually $this->options still is a string.\n. Thanks for report.\nThis still continue, Some code I was removed need rollback, etc...\nI'll do a compare changes, what I do after finish.. Now is 2019, should we use flexbox?. So, where's we can start the work?. OK, I'll wait for your fork. @jtsternberg I busy in last few days. This will be done in next few days.. @jtsternberg Could you check this pull request can be merge into the trunk https://github.com/CMB2/CMB2/pull/1007? \nI almost done with that (need to improve the group field and rollback some class was deleted).\nSo I can focus that PR first, then with this.. @jtsternberg interesting with this feature?. https://github.com/CMB2/CMB2/pull/1217. Update with the latest commit. Still have a test failed. in https://github.com/CMB2/CMB2/blob/develop/tests/bin/run-wp-unit-tests.sh#L29 you need to remove exit 1, some PHP warning can through that.. ",
    "alexwcoleman": "follow.\n. ",
    "laurent-d": "Follow too\n. ",
    "wpsoul": "Follow\n. ",
    "talentedaamer": "please add nested group fields\n. ",
    "aunruh": "would be cool\n. ",
    "webdados": "+1\n. ",
    "amandagiles": "This would be amazing and super useful.\n. ",
    "wiejakp": "Any good news?. \ud83d\udc4d I second that, @tnorthcutt.. Yes, I've added them.\n. No, I've added them after you mention them :)\n. It's simple table\ntitle           |   url                     |   description\nexample title   |   http://www.google.com   |   sample desciption\nI'm not using the description $array[2] field at all.\n. They are matching, I'm off with the Video Index, but I don't think that's the issue.\nI'm pretty sure I need to modify the cpts_section_group_id meta as well. Is there something in CMB2 that would do that for me?\nThis is how I insert data by GUI:\ncpts_section_group_id_0_cpts_section_group_video_1_title\ncpts_section_group_id_0_cpts_section_group_video_1_url\nAnd this is through add_post_meta:\ncpts_section_group_id_1_cpts_section_group_video_5_title\ncpts_section_group_id_1_cpts_section_group_video_5_url\n. Where is it stored? Which entries do I have to modify?\nI assume I have to change $_POST table? And then change the individual post meta?\n. No, I'm going different route from here. I'm regenerating the object array and field data manually, but I've noticed that after the validation my group meta is being over written, field  cpts_section_group_id_0_cpts_section_group_video_1_title meta is in database correctly, but the cpts_section_group_id field is reset. \nAny thoughts on this? \n. Ah, ok. I was running my function within cmb2_admin_init. I'm experimenting as so, because I though my fields are not initialized because on save there is no post meta for generated fields. Not sure why this is happening. My static fields (group name) does get saved, sop let's step back and focus on this, because this is ultimate prioblem that I am having.\nI have a custom type with title and select box. Select box references another content type which stores 'locations' and 'sections' (both in this content type) and on select change, I want to generate different quantity/content of fields. I get to generate those fields, but when I get to 'save post' or 'update post' there are no meta referencing to my fields.\n```\nfunction groups_metabox_setup()\n{\n    $post_id = filter_input(INPUT_GET, 'post', FILTER_SANITIZE_ENCODED);\n    $post_meta = get_post_meta($post_id);\n$default_name = '';\n$default_selected = '';\n$group_name = filter_input(INPUT_POST, 'group_name', FILTER_SANITIZE_ENCODED);\n$section_id = filter_input(INPUT_POST, 'section_id', FILTER_SANITIZE_ENCODED);\n$section_name = filter_input(INPUT_POST, 'section_name', FILTER_SANITIZE_ENCODED);\n\n// assuring we are changing the Section Year on redirect\nif (isset($section_id) && !empty($section_id)) {\n    $default_selected = $section_id;\n    $default_name = $group_name;\n}\n\n$prefix = 'groups_';\n\n$info = new_cmb2_box(array(\n    'id' => $prefix . 'info',\n    'title' => esc_html__('Group Information', 'cmb2'),\n    'object_types' => array('group'),\n));\n\n$info->add_field(array(\n    'name' => esc_html__('Group Name', 'cmb2'),\n    'id' => $prefix . 'title',\n    'type' => 'text',\n    'default' => $default_name,\n    'attributes' => array(\n        'required' => 'required',\n        'type' => 'text',\n    ),\n));\n\n$info->add_field(array(\n    'name' => 'Section Year',\n    'id' => $prefix . 'year',\n    'type' => 'select',\n    'default' => $default_selected,\n    'options' => section_years(),\n    'attributes' => array(\n        'required' => 'required',\n    ),\n));\n\n$year_id = $post_meta['groups_year'][0];\n\nif (isset($year_id) && !empty($year_id)) {\n    $locations = get_section_meta($year_id, 'sections_location');\n    $sections = get_section_meta($year_id, 'sections_location');\n\n    foreach ($locations as $location) {\n        $location_name = $location['sections_location_name'];\n        $location_abbr = $location['sections_location_abbr'];\n        $location_prefix = $prefix . strtolower($location_abbr) . '_';\n\n        $field = new_cmb2_box(array(\n            'id' => $location_prefix . 'locations',\n            'title' => esc_html__($location_name, 'cmb2'),\n            'object_types' => array('group'),\n        ));\n\n        $field->add_field(array(\n            'name' => 'test',\n            'type' => 'text',\n            'id' => $location_prefix . 'text',\n        ));\n    }\n}\n\n}\n```. Sorry, I meant save post/update post i meant when I click the button after creating or editing new post type. I do not modify my save_post or update_post wordpress methods.\nSo the problem is that when I save, the static fields are saved but dynamic ones aren't. . I owe you a couple of beers now. It worked, thanks!. Correct. Thank you guys.. left out 'repeatable' => false, didn't know it's default behavior. Closing.. This is my question. I don't see that the attributes are stored in post meta data at all. As we initialize fields and set it's preferences we are creating only temporary attributes like default values or default selections etc. My question is, besides the setting attributes sitting in 'cmb2_admin_init' callback function, does the CMB2 store extra attribute option information elsewhere by default?. This for example. 'data-title' and 'data-unique'. Do those values get stored in database?\nNot in meta:\na:1:{i:0;a:1:{s:34:\"groups_cah_section_adm_group_video\";a:1:{i:0;s:13:\"http://dfgdfg\";}}}\nExample field setup:\n${$location_prefix}->add_group_field($section_group, array(\n                    'name' => esc_html__('Video', 'cmb2'),\n                    'id' => $section_prefix . '_group_video',\n                    'type' => 'text_url',\n                    'repeatable' => true,\n                    'attributes' => array(\n                        'data-title' => $section_name,\n                        'data-unique' => $token,\n                    ),. Well, this would be a fantastic addition! For now, I think i got my answer and I'm going to close this.\nThank you guys for being patient with me! :). I would like to generate esthetic upload file button with ability to choose already existing uploaded file.\nSo I don't have to create and style my file upload functionality from scratch.\nNot sure if CMB2 can do it or not.. ",
    "Julianoe": "+1. Hi ! Thanks for the answer.\nI understand what you mean but what i want to achieve is multiple \"sections\" built like this : \nMy single Section Title\nLabel field : content field\nLabel field : content field (repeatable)\nLabel field : content field\nMy single Section Title 2\nLabel field : content field\nLabel field : content field (repeatable)\nLabel field : content field\nThe number of repeatable groups (and fields inside those groups) could vary... I'm not sure i'm clear ^^\nDo you think there is a way to do this ?. Hello @tw2113 : i've tried the following ; \n```php\nadd_action( 'cmb2_admin_init', 'repeatable_group_field_metabox' );\nfunction repeatable_group_field_metabox() {\n    $prefix = 'myprefix_';\n    /*\n     * Repeatable Field Groups\n     /\n    $cmb_presentation_fields = new_cmb2_box( array(\n        'id'           => $prefix . 'metabox',\n        'title'        => __( 'Custom Contents', 'cmb2' ),\n        'object_types' => array( 'myposttype' ),\n    ) );\n$my_repeatable_group = $cmb_presentation_fields->add_field( array(\n    'id'          => $prefix . 'custom_entries',\n    'type'        => 'group',\n    'description' => __( 'Generates reusable form entries', 'cmb2' ),\n    'options'     => array(\n        'group_title'   => __( 'Bloc {#}', 'cmb2' ),\n        'add_button'    => __( 'Add Another Entry', 'cmb2' ),\n        'remove_button' => __( 'Remove Entry', 'cmb2' ),\n        'sortable'      => true,\n        'closed'     => true\n    ),\n) );\n\n$cmb_presentation_fields->add_group_field( $my_repeatable_group, array(\n    'name'       => __( 'Title', 'cmb2' ),\n    'id'         => 'title',\n    'type'       => 'text',\n) );\n\n$cmb_presentation_fields->add_group_field( $my_repeatable_group, array(\n        'name'       => __( 'Text Entry', 'cmb2' ),\n        'id'         => 'text_content',\n        'type'       => 'textarea_small',\n    'repeatable' => true // i've made this one repeatable\n    ) );\n}\n```\nIt's a repeatable group of two fields (title and content). Title with allow to enter the \"My single Section Title\" from above and all the content goes in the text_content field.\nNow i did try to display this content but i'm obviously missing something because my template page stays empty... :S\n```php\n$entries_group_field = get_post_meta( $theID, 'group_repeatable_custom_entries', true );\nforeach ( (array) $entries_group_field as $key => $entry ){\n  $title = $content = '';\nif( isset( $entry['title'] ) ) {\n    $title = ''.esc_html( $entry['title'] ).'';\n  }\nif( isset( $entry['text_content'] ) ) {\n    $content = wpautop( $entry['text_content'] );\n  }\necho $title;\n  echo $content;\n}\n```\nedit : obviously i missed a foreach. Here is the working result :+1: \n```php\nforeach ( (array) $entries_group_field as $key => $entry ){\n  $title = $content = $output = '';\nif( isset( $entry['title'] ) ) {\n    $title = ''.esc_html( $entry['title'] ).'';\n  }\nif( isset( $entry['text_content'] ) ) {\n    $content = $entry['text_content'];\n  }\necho $title;\n  foreach( $content as $text){\n    $output .= wpautop( $text );\n  }\n  echo $output;\n}\n```\n. I edited the previous message ;). Some details :\nI'm really searching this matter everywhere (wpml forums, stackexanche, reddit...) but can't find real discussions on this. I mean the end-user/not technical user of a website (e.g.marketing person) whose job is only to fill the content, create products or posts etc... could have to provide information in a options page (or anywhere that uses the wp-options database table).\nIn this type of use case the user has usually a clean interface and easy to use buttons for translating a post/product. Why should they go to a complex \"string translation\" page just to translate a field containing a basic text... ? :/. ",
    "carpogoryanin": "+1. ",
    "henrytriplette": "+1. ",
    "s1dekick223": "would be awesome!. ",
    "Vhornets": "+1\nI've always missed this feature. ",
    "davetgreen": "\ud83d\udc4d . @tw2113 Likewise, added some dummy data earlier and noticed the value not being retained in the field.\n. ",
    "thememakerbd": "Really need it. Any body can help?. ",
    "ColinMitchell": "+1. ",
    "achavazza": "+1. ",
    "jaredatch": "\ud83d\udc4d  Good point, @tnorthcutt . ",
    "JustinSainton": "\ud83d\udc4d @tnorthcutt. ",
    "marsjaninzmarsa": "Add info in docs, at least.... Fixed with #1142, so should be closed?. ",
    "dewaadiperdana": "Hey, did the file_list type support dragable object?\n. ",
    "nclslbrn": "Same bugg occurs on checkbox field type, I try to generate metaboxes with an array of properties and a foreach loop, metaboxes are rendered well on the edit post page, values of these checkbox is on the global $_POST variable but nothing is stored in the database.\n```\nfunction init_product() {\nregister_post_type('product',\n    array(\n        'labels' => array(\n            'name' => __('Produits', 'lcdm'),\n            'singular_name' => __('produit', 'lcdm'),\n            'menu_name' => __('Produits', 'lcdm'),\n            'name_admin_bar' => __('produits', 'lcdm'),\n            'add_new' => __('Nouveau produit', 'lcdm'),\n            'add_new_item' => __('Nouveau produit', 'lcdm'),\n            'edit' => __('Editer le produit', 'lcdm'),\n            'edit_item' => __('Editer le produit', 'lcdm'),\n            'view' => __('Voir le produit', 'lcdm'),\n            'view_item' => __('Voir le produit', 'lcdm'),\n            'search_items' => __('Chercher le produit', 'lcdm'),\n            'parent_item_colon' => __('Produit parent', 'lcdm'),\n            'not_found' => __('Produit non trouv\u00e9', 'lcdm'),\n            'not_found_in_trash' => __('Pas de produit dans la corbeille', 'lcdm'),\n         ),\n    'can_export' => true,\n    'public' => true,\n    'exclude_from_search' => false,\n    'query_var' => true,\n    'publicly_queryable' => true,\n    '_builtin' => false,\n    'capability_type' => 'post',\n    'rewrite' => array('slug' => 'produit','with_front' => false),\n    'has_archive' => true,\n    'hierarchical' => false,\n    'menu_position' => 5,\n    'menu_icon' => 'dashicons-feedback',\n    'show_in_menu' => true,\n    'supports' => array('title', 'editor', 'revisions', 'thumbnail', 'product_metabox' ),\n    'taxonomies' => array( 'category','post_tag')\n)\n);\n\n}\nadd_action( 'init', 'init_product' );\n// Define formula for product\nfunction get_formula() {\n$formula = array();\n$formula['type'] = array(\n    array('id' => 'publicLiability', 'name' => 'Responsabilit\u00e9 civile'),\n    array('id' => 'theft', 'name' => 'Vol'),\n    array('id' => 'allRisks', 'name' => 'Tous risques')\n  );\n  $formula['features'] = array(\n    array('id' => 'save', 'name' => 'SAVE et Jurimotard'),\n    array('id' => 'respCivil', 'name' => 'Responsabilit\u00e9 civile'),\n    array('id' => 'rightProtect', 'name' => 'Protection et D\u00e9fense de vos droits'),\n    array('id' => 'driverProtect', 'name' => 'Protection Conducteur Solidaire (jusqu\\'\u00e0 80 000\u20ac)'),\n    array('id' => 'equipment', 'name' => 'Equipement Conducteur Casque et V\u00eatements jusqu\\'\u00e0 1000\u20ac'),\n    array('id' => 'help0km', 'name' => 'Assistance 0km aux personnes et au v\u00e9hicule'),\n    array('id' => 'theftFire', 'name' => 'Vol / Incendie'),\n    array('id' => 'ice_break', 'name' => 'Bris de glace sans franchise'),\n    array('id' => 'natural_disaster', 'name' => 'Catastrophes naturelles, Forces de la nature, Catastrophes technologiques'),\n    array('id' => 'allAccident', 'name' => 'Dommages tous accidents')\n   );\n  $formula['options'] = array(\n    array('id' => 'driverProtect1', 'name' => 'Protection Conducteur Renforc\u00e9e (jusqu\\'\u00e0 200 000\u20ac)'),\n    array('id' => 'driverProtect2', 'name' => 'Protection Conducteur Optimale (jusqu\\'\u00e0 500 000\u20ac)'),\n    array('id' => 'equipment1', 'name' => '\u00c9quipement Conducteur Optimal (jusqu\\'\u00e0 2 000\u20ac)'),\n    array('id' => 'help1', 'name' => 'Assistance optimale (avec v\u00e9hicule de remplacement 2-roues)'),\n    array('id' => 'accesories', 'name' => 'Accessoires v\u00e9hicule (top-case, bulle, car\u00e9nage\u2026)'),\n    array('id' => 'carryedObject', 'name' => 'Objets transport\u00e9s')\n  );\n  return $formula;\n}\n// Init Custom meta box\nadd_action( 'cmb2_admin_init', 'lcdm_product_metaboxes' );\n//Create product meta\nfunction lcdm_product_metaboxes() {\n$prefix = 'product_metabox';\n$formula_box = new_cmb2_box( array(\n        'id'            => 'formula',\n        'title'         => __( 'Formule', 'cmb2' ),\n        'object_types'  => array( 'product', ),\n        'context'       => 'normal',\n        'priority'      => 'high',\n        'show_names'    => true,\n        'cmb_styles'    => false,\n    // 'closed'     => true\n) );\n\n$formula = get_formula();\n//Loop through formula type (ie: publicLiability, theft, allRisks)\n\nforeach( $formula['type'] as $type ) {\n$formula_box->add_field( array(\n    'name'                  => $type['name'] . ': les essentielles',\n    'type'                  => 'title',\n    'id'                    => 'formula_features_'. $type['id'],\n        'column'            => false,\n        'render_row_cb' => 'product_formula_column'\n) );\n\n    // LOOP through formula features\n\nforeach ( $formula['features'] as $f) {\n\n  $formula_box->add_field( array(\n    'name'       => $f['name'],\n    'id'         => $prefix . $type['id'] . '_' . $f['id'],\n    'desc'       => 'oui',\n    'type'       => 'checkbox',\n            'default'        => true,\n            'column'     => false,\n            'render_row_cb' => 'product_formula_td'\n  ));\n}\n\n$formula_box->add_field( array(\n    'name'                  => $type['name'] . ': options propos\u00e9es',\n    'type'                  => 'title',\n    'id'                    => 'formula_options_'. $type['id'],\n        'column'            => false,\n        'render_row_cb' => 'product_formula_th'\n) );\n\n    // LOOP through formula options\n\nforeach ( $formula['options'] as $f) {\n\n  $formula_box->add_field( array(\n    'name'              => $f['name'],\n    'id'                => $prefix . $type['id'] . '_' . $f['id'],\n    'desc'              => 'oui',\n    'type'              => 'checkbox',\n            'column'            => false,\n            'render_row_cb' => 'product_formula_td'\n  ));\n}\n    $formula_box->add_field( array(\n        'name'              => $f['name'] .'_close_column',\n        'type'                  => 'title',\n    'id'                    => 'formula_features_'. $type['id'].'_close',\n        'default'               => true,\n        'column'            => false,\n        'render_row_cb' => 'close_product_formula_column'\n    ));\n\n}\n}\nfunction product_formula_column( $field_args, $field ) {\n    $id          = $field->args( 'id' );\n    $label       = $field->args( 'name' );\n    $name        = $field->args( '_name' );\n    $description = $field->args( 'description' );\n    ?>\n<div class=\"col-4\">\n    <h3 id=\"<?php echo $id; ?>\"><?php echo $label; ?></h3>\n    <p class=\"description\"><?php echo $description; ?></p>\n\n<?php\n\n}\nfunction close_product_formula_column( $field_args, $field ) {\n    ?>\n      .col-4 \n    <?php\n}\nfunction product_formula_th( $field_args, $field ) {\n    $id          = $field->args( 'id' );\n    $label       = $field->args( 'name' );\n    $name        = $field->args( '_name' );\n    $description = $field->args( 'description' );\n    ?>\n    <h3 id=\"<?php echo $id; ?>\"><?php echo $label; ?></h3>\n    <p class=\"description\"><?php echo $description; ?></p>\n\n<?php\n\n}\nfunction product_formula_td( $field_args, $field ) {\n  $id          = $field->args( 'id' );\n  $label       = $field->args( 'name' );\n  $name        = $field->args( '_name' );\n  $value       = $field->escaped_value();\n  $description = $field->args( 'description' );\n  ?>\n<p><label for=\"<?php echo $id; ?>\"><?php echo $label; ?></label>\n<input id=\"<?php echo $id; ?>\" type=\"checkbox\" name=\"<?php echo $name; ?>\" value=\"<?php echo $value; ?>\"/>\n<small class=\"description\"><?php echo $description; ?></small></p>\n\n<?php\n}\n```. Thank you, I will read this. It seems that this bugg was caused by the function product_formula_td() (called by the 'render_row_cb' option) with deactivating it, the metabox values are stored in the database.\nThank you again. ",
    "pluginBeginner": "$cmb = new_cmb2_box( array(\n        'id'            => 'test_metabox',\n        'title'         => 'Test Metabox',\n        'object_types'  => array( 'post', )\n. ",
    "jsternberg": "@jtsternberg I think the above message was meant for you.\n. ",
    "emwebber": "Nope. Not yet anyway...\nThe example that Christina sent has been very helpful. I want to note,\nhowever, that the follow up was unexpected, but much appreciated!\nIs there any lingering issues here? or is everyone good?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/585#issuecomment-196434335.\n. Hi again,\ni know some time has passed since the last communication but your team was\nso helpful then that i'm hoping you'll be able to help again. i've been\nstruggling trying to add an \"image upload\" field to a custom taxonomy for a\ncustom post type. that way, on the front end, each taxonomy entry can have\nan image assigned to it.\nis there any chance you have an example of how to do that?\nthanks in advance!\nelise\nOn Mon, Mar 14, 2016 at 7:47 PM, Michael Beckwith notifications@github.com\nwrote:\n\nWe try not to leave people hanging, but sometimes things slip through\ncracks for awhile.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/585#issuecomment-196573641.\n\n\n--\n*www.elisewebber.com http://www.elisewebber.com/ *\n. yeah, i figured you guys were prepared for something like that. thank you\nfor pointing me in the right direction.\ni've got an 'add image' metabox in my admin now. so, thanks to your team,\nmy \"products\" custom-post-type now has a custom-taxonomy called\n\"department\" that an image can be added to.\ni can't seem to display it on the front-end though. it should be on this\npage: http://staging10.thestudio-patrick.com/products/\nif it helps, i've attached my php file for that particular page, and the\nmetabox-funtions file so you guys can see what i did there.\nhoping you guys can help again\nthanks so much!!\nOn Thu, Jun 1, 2017 at 11:35 AM, Justin Sternberg notifications@github.com\nwrote:\n\n@emwebber https://github.com/emwebber yes, there is an example for\ndoing that in the example-functions.php file\nhttps://github.com/CMB2/CMB2/blob/trunk/example-functions.php#L598-L638.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/CMB2/CMB2/issues/585#issuecomment-305531574, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AGdownbZm7ctteC61Puft833FkqpmI8Xks5r_topgaJpZM4HVsgT\n.\n\n\n--\n*www.elisewebber.com http://www.elisewebber.com/ *\n. Happily! Thanks Michael!!\nOn Jun 1, 2017 3:10 PM, \"Michael Beckwith\" notifications@github.com wrote:\n\nCould you copy/paste the php file contents into a comment via github.com\nfor this issue? We didn't see any sort of attachment come through since it\nwas posted straight to #585 https://github.com/CMB2/CMB2/issues/585\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/CMB2/CMB2/issues/585#issuecomment-305591203, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AGdowh1HOh2qbtSkjkqec0g8OKX7xE5lks5r_wyPgaJpZM4HVsgT\n.\n. Oh i'm sorry, i posted it here:\nhttps://wordpress.org/support/topic/custom-taxonomy-image-on-front-end/\n\nthought the github instructions said to post there first then an\nadministrator would move it to github...sorry about that\nlet me know if you want me to move it\nOn Fri, Jun 2, 2017 at 9:13 AM, Michael Beckwith notifications@github.com\nwrote:\n\nStill not seeing anything. Replying via email for this type of thing is\ntricky. So, please either go to #585\nhttps://github.com/CMB2/CMB2/issues/585 and use the comment form there,\nor perhaps instead create a gist and paste us the link to that. Either way\nshould work and get us the actual code being used.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/CMB2/CMB2/issues/585#issuecomment-305783413, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AGdowvbp5fLb_-xowf9MmA7X0MOX3i0Oks5sAApxgaJpZM4HVsgT\n.\n\n\n--\n*www.elisewebber.com http://www.elisewebber.com/ *\n. Right on, thanks so much Michael!!\nOn Jun 2, 2017 9:26 AM, \"Michael Beckwith\" notifications@github.com wrote:\nAh, if it's there, I'll look it over and probably respond there as well. I\nhave a tab open to that one already, as it were\nThanks Elise :)\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/CMB2/CMB2/issues/585#issuecomment-305786417, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AGdowsF-Wl_53QXcrRJ1jERTcELyXBs0ks5sAA2MgaJpZM4HVsgT\n.\n. Thanks for the quick reply! Is there a CMB to CMB2 migration section somewhere that I'm just not seeing or is there no documentation for such a move?. I've switched out CMB with CMB2 and things initially seem to be working fine. Thanks for the help!. ",
    "cdwharton": "I'm running the WP Plugin of CMB2\n. Right ok, so trunk has it but master doesn't - meaning the WP repo doesn't have it.\nSorry for the confusion, I was working off of the version numbers which match the WP repo on trunk as well as master.\nGreat plugin by the way, it saves me loads of time :)\nIs there a release date for the new master/WP repo version including the taxonomy terms addition?\n. ",
    "azexo": "same situation for file sanitization\n. ",
    "Taolou": "Thanks for your fast answer, i'll give it a try.\nI'll close the ticket and come back if I still have a prob.\nHave a nice day\n. ",
    "webdziner": "Hi, i tried same given example but its not working its that something which i am missing?\n. Hi, lets make it simple, we are trying to test your given sample code to run but its not working in same condition.\nhttps://github.com/WebDevStudios/CMB2/wiki/Adding-your-own-show_on-filters#example-using-the-show_on_cb-to-limit-the-display-of-a-metabox-unless-metadata-exists\nI just try to quick check with this code how it will work, but sample not giving anything.\n``` php\nadd_action( 'cmb2_admin_init', 'cmb2_register_conditional_metabox' );\n/\n * Hook in and add a demo metabox. Can only happen on the 'cmb2_admin_init' or 'cmb2_init' hook.\n */\nfunction cmb2_register_conditional_metabox() {\n    /\n     * Metabox to save the 'status' where 'Internal' is the default.\n     */\n    $cmb = new_cmb2_box( array(\n        'id'           => 'wiki_status_metabox',\n        'title'        => 'Status Metabox',\n        'object_types' => array( 'page', ), // Post type\n    ) );\n$cmb->add_field( array(\n    'name'    => 'Status',\n    'id'      => 'wiki_status',\n    'type'    => 'select',\n    'default' => 'internal',\n    'options' => array(\n        'internal' => 'Internal',\n        'external' => 'External',\n    ),\n) );\n\n/**\n * Metabox to conditionally display if the 'status' is set to 'External'.\n */\n$cmb = new_cmb2_box( array(\n    'id'           => 'wiki_conditonal_metabox',\n    'title'        => 'Contact Info',\n    'object_types' => array( 'page', ), // Post type\n    'show_on_cb' => 'cmb_only_show_for_external', // function should return a bool value\n) );\n\n$cmb->add_field( array(\n    'name'       => 'Email',\n    'id'         => 'wiki_email',\n    'type'       => 'text_email',\n) );\n\n}\n/*\n * Only display a metabox if the page's 'status' is 'external'\n * @param  object $cmb CMB2 object\n * @return bool        True/false whether to show the metabox\n /\nfunction cmb_only_show_for_external( $cmb ) {\n    $status = get_post_meta( $cmb->object_id(), 'wiki_status', 1 );\n// Only show if status is 'external'\nreturn 'external' === $status;\n\n}\n```\n. @tw2113 ok got but it should be ajax or juqery to change when i select, because how user know that anything going show when i change the option?\n. ",
    "JasonHoffmann": "Thanks! Managed to follow the thread and figure it out. I might be able to write somethings up about it for docs. Do you think there's a good place for it?\n. Finally had a chance to add this bit of documentation. For those looking for it here's the link: https://github.com/WebDevStudios/CMB2/wiki/Tips-&-Tricks#modify-field-row-output-and-markup. \nI'm going to close this ticket now too, thanks for pointing me in the right direction!\n. Would the goal be to take fields registered via the field API and dynamically generate JS for registerBlockType, sort of like what's done with the customizer? . I've been thinking about this a bit as Gutenberg starts entering its final stages.\nOne of the things that you may want to do is create a separate, modular (most likely an NPM module) JS library that replicates all of the CMB2 field types as very, very customizable Gutenberg blocks. Basic blocks like a single text one, a color picker, etc.\nThen, you can use the current CMB2 registrations to create a big JS object (Or a an even better abstracted data structure as suggested here: https://github.com/CMB2/CMB2/issues/1030) that automatically gets converted into meta blocks, using that separate NPM library to create all the blocks. The bonus is that library could also be used by standalone by other developers to import those customizable blocks and use them elsewhere on their projects. \nI know the Gutenberg team is still figuring out a few things, like nested blocks and advanced block templates, so it may be possible to actually use default core blocks for some of the CMB2 field types. In my head, this gathers a lot of inspiration from https://github.com/youknowriad/gcf and would work in a similar way except blocks would be registered automatically.\nI do have a few concerns though.\n- Should registered CMB2 blocks automatically be converted to Gutenberg blocks? Or should it be opt-in\n- How can we make sure that meta Gutenberg blocks always render in the editor on existing content (Block templates only work for new posts)\n- Really not sure how to handle groups\n- Basically every current hook and callback would be rendered useless since it will all move to JS\n- There are a lot of custom field types that we would not be able to register properly.\nI'm sure there's more. Ultimately, I'm not exactly sure how to do this and maintain backwards compatibility fully. But I figured I could at least kick off a discussion.. ",
    "chrisgherbert": "Hey jrfnl - thanks for the suggestion.  Would that work for new fields as well as existing ones?\nI'm also wondering if I can take advantage of the new cmb2_save_field hook.\n. WordPress adds slashes to $_POST, $_GET, $_REQUEST, and $_COOKIE.  I don't know if there's any way around having to run it through stripslashes() to fix it.\n. ",
    "florianbeck": "The entrys are saved as one single text string - actually in a textarea - separated with semicolons. If you disable javascript you will see that textarea. Just like the Wordpress Tags metabox does. The rest is just some javascript magic.\n. ",
    "andrew-ok7": "adding this to my theme to create option page:\nhttps://github.com/WebDevStudios/CMB2-Snippet-Library/blob/master/options-and-settings-pages/theme-options-cmb.php\nadds a link in the dashboard, but nothing on the page.\n``` php\n/\n * Include and setup custom metaboxes and fields. (make sure you copy this file to outside the CMB2 directory)\n \n * Be sure to replace all instances of 'yourprefix_' with your project's prefix.\n * http://nacin.com/2010/05/11/in-wordpress-prefix-everything/\n \n * @category YourThemeOrPlugin\n * @package  Demo_CMB2\n * @license  http://www.opensource.org/licenses/gpl-license.php GPL v2.0 (or later)\n * @link     https://github.com/WebDevStudios/CMB2\n */\n/*\n * Get the bootstrap! If using the plugin from wordpress.org, REMOVE THIS!\n /\nif ( file_exists( dirname( FILE ) . '/cmb2/init.php' ) ) {\n    require_once dirname( FILE ) . '/cmb2/init.php';\n} elseif ( file_exists( dirname( FILE ) . '/CMB2/init.php' ) ) {\n    require_once dirname( FILE ) . '/CMB2/init.php';\n}\nadd_action( 'cmb2_admin_init', 'ajtok7_register_theme_options_metabox' );\n/*\n * Hook in and register a metabox to handle a theme options page\n /\nfunction ajtok7_register_theme_options_metabox() {\n$option_key = 'ajtok7_theme_options';\n\n/**\n * Metabox for an options page. Will not be added automatically, but needs to be called with\n * the `cmb2_metabox_form` helper function. See wiki for more info.\n */\n$cmb_options = new_cmb2_box( array(\n    'id'      => $option_key . 'page',\n    'title'   => __( 'Theme Options Metabox', 'cmb2' ),\n    'hookup'  => false, // Do not need the normal user/post hookup\n    'show_on' => array(\n        // These are important, don't remove\n        'key'   => 'options-page',\n        'value' => array( $option_key )\n    ),\n) );\n\n/**\n * Options fields ids only need\n * to be unique within this option group.\n * Prefix is not needed.\n */\n$cmb_options->add_field( array(\n    'name'    => __( 'Site Background Color', 'cmb2' ),\n    'desc'    => __( 'field description (optional)', 'cmb2' ),\n    'id'      => 'bg_color',\n    'type'    => 'colorpicker',\n    'default' => '#ffffff',\n) );\n\n}\n```\n. same problem referenced here: \nhttps://github.com/WebDevStudios/CMB2-Snippet-Library/issues/21\nand here:\nhttps://github.com/WebDevStudios/CMB2/issues/484\nand here:\nhttps://github.com/WebDevStudios/CMB2-Snippet-Library/issues/29\n. I am using version 2.2.1\n. ",
    "IronGhost63": "I'd prefer to use TGM over bundle CMB into my plugin\n. ",
    "arkonisus": "It wold be essential if you try to add different file-types e.g. images, pdf, zip. Per default you will see an image next to a filename and so on ... \nI agree to @fakeartist - the best format wuld be a square or the support of the parameter 'preview_size' also for non-image-files.\n. @jtsternberg Yes, for images the size-attribute is ok, but if you try to attach images and e.g. PDFs to the file_list you are not able to sort the items because of the different size. \nIf the items would look similar to the standard media-view as you can see in the screenshot the sorting is not a problem. As a workaround it is possible to style the list-tags in the admin screen, but it would be much better if the default view of the file_list could handle it in a better way.\nYou can also take a look at the second attachment. This is the file_list feature of pods.io. There you can see the same icons as you see in the media-view. So i think there must be a solution ... :)\n\n\n. +1 Thank you very much, i will take look!. ",
    "fakeartist": "The default size of the preview images should be 50x50 (cropped). In my case, if I add portrait and landscape images, look what happens in the attachment. Seems like a bug to me.\n\n. Hi @elbsurfer, I want to do the exact same thing, but the example 3 you mention, seems to be missing from the page. Could you please tell me how you did it? Thanks. Ok, just found a solution! First, download and install the select2 plugin. Then, you can use this code:\n$single_post_metaboxes->add_field(array(\n    'name' => __('Select products', 'cmb2'),\n    'id' => $prefix . 'products',\n    'type' => 'pw_multiselect',\n    'options' => get_products(array('post_type' => 'product')),\n));`\n\nfunction get_products($query_args = array()) {\n    $defaults = array(\n        'posts_per_page' => -1\n    );\n    $query = new WP_Query(array_replace_recursive($defaults, $query_args));\n    return wp_list_pluck($query->get_posts(), 'post_title', 'ID');\n}. +1. Excellent answers! Thank you! Would be perfect, if this feature could be added in the core. . Hi! I found #737 and it works. Thanks for the feedback! .\n",
    "rianbotha": "This might be what you're looking for http://arushad.org/how-to-create-a-tabbed-options-page-for-your-wordpress-theme-using-cmb/\n. The tabs are listed as submenu items in the admin menu too. If that is what you want then removing the tabs and only retaining the menu items should be fairly simple.\n. It does that. See screenshot attached.\n\nIt follows the normal Wordpress convention. Flyout menu until you are in the section and then it expands as in example.\nThe tabbed part is separate and you can eliminate that without losing the menu part.\n. You would just need to remove line 101 to prevent the tab links from being created.\n. Thanks. I will use Trunk in future.\nYou can probably remove the known issue with paths on Windows / Xampp now. It works for us using that setup.\nI see the build failed for some reason?\n. Great. Will Composer get updated automatically? I see it is still behind.\n. OK. I've already done that.\nThanks for all the work you put into CMB2.\n. ",
    "gorirrajoe": "not quite. i'm looking for submenus, not tabs.\n. i wanted it more like this:\nhttps://cloudup.com/c7ihI7yUO1q\nindependent pages so i can break menus up into years\n. oh interesting -- i'll look into this and close after i test!\nthanks!!\n. boom -- yea that's exactly what i was looking for. thanks!\n. ",
    "vucumbra": "how..... get a subbage and subsection??. Ah! Perfect\nHave you a document where can i find the list with all query_args?\nthx for your work This FRAMEWORK IS AMAZING!. thx. but this is general support.....i can't customize the field in frontend, but just put in shortcode.....please can u help me? exist some way for do this?. sorry i have find close. ",
    "brandondove": ":+1: I'll give that a try. \n. @tw2113 Just tested this and it looks good.\n. Actually, I think sorting works out better if you don't use numbered groups because it doesn't matter what order they're in.\nIn the example below, new groups added with javascript would get \"unsaved\" in the title. Once you save, the meta box title gets the proper title. This would allow better visibility to what's inside of a closed group meta box instead of having to open and close 50 numbered boxes to find what you're seeking.\n```\nadd_filter( 'cmb2_group_title_hash_replacement', 'add_subfield_to_title', 10, 3 );\nfunction add_subfield_to_title( $default, $field, $index ) {\n    if ( $field->args['id'] == 'example-group' ) {\n        if ( ! empty( $field->value[$index]['title'] ) ) {\n            return '(' . esc_html( $field->value[$index]['title'] ) . ')';\n        } else {\n            return '(unsaved)';\n        }\n    }\n    return $default;\n}\n```\n. @jtsternberg you're right, this definitely needs more work. I went ahead and implemented the javascript you recommended and it works perfectly.\n. ",
    "eriktelepovsky": "I am using my own implementation of hierarchical multicheck taxonomy field. Maybe it will help you.\nUse taxonomy_multicheck_hierarchy as a type of your field.\n```\n<?php\n/\n * Class Inventor_Field_Types_Taxonomy_Multicheck_Hierarchy\n */\nclass Inventor_Field_Types_Taxonomy_Multicheck_Hierarchy {\n    /\n     * Initialize the plugin by hooking into CMB2\n     */\n    public function __construct() {\n        add_filter( 'cmb2_render_taxonomy_multicheck_hierarchy', array( $this, 'render' ), 10, 5 );\n        add_filter( 'cmb2_sanitize_taxonomy_multicheck_hierarchy', array( $this, 'sanitize' ), 10, 5 );\n    }\n/**\n * Render field\n *\n * @access public\n * @param $field\n * @param $field_escaped_value\n * @param $field_object_id\n * @param $field_object_type\n * @param $field_type_object\n * @return string\n */\npublic function render( $field, $field_escaped_value, $field_object_id, $field_object_type, $field_type_object ) {\n    $real_field_type_object = class_exists( 'CMB2_Type_Taxonomy_Multicheck' ) ? new CMB2_Type_Taxonomy_Multicheck( $field_type_object ) : $field_type_object;\n\n    $names       = $real_field_type_object->get_object_terms();\n    $saved_terms = is_wp_error( $names ) || empty( $names )\n        ? $field_type_object->field->get_default()\n        : wp_list_pluck( $names, 'slug' );\n\n    $terms_query_args = array(\n        'hide_empty'    => false,\n        'parent'        => 0,\n    );\n\n    $post_type = empty( $field->args['post_type'] ) ? null : $field->args['post_type'];\n\n    if ( ! empty( $post_type ) ) {\n        $terms_query_args['meta_query'] = array(\n            'relation' => 'OR',\n            array(\n                'key' => INVENTOR_LISTING_CATEGORY_PREFIX . 'listing_types',\n                'compare' => 'NOT EXISTS',\n            ),\n            array(\n                'key'       => INVENTOR_LISTING_CATEGORY_PREFIX . 'listing_types',\n                'value'     => serialize( strval( $post_type ) ),\n                'compare'   => 'LIKE'\n            )\n        );\n    }\n\n    $terms       = get_terms( $field_type_object->field->args( 'taxonomy' ), $terms_query_args );\n\n    $name        = $field_type_object->_name() . '[]';\n    $options     = ''; $i = 1;\n\n    if ( ! $terms ) {\n        $options .= sprintf( '<li><label>%s</label></li>', esc_html($field_type_object->_text( 'no_terms_text', __( 'No terms', 'cmb2' ) ) ) );\n    } else {\n        foreach ( $terms as $term ) {\n            $args = array(\n                'type'  => 'checkbox',\n                'class' => 'cmb2_option',\n                'id'    => $term->term_id,\n                'value' => $term->slug,\n                'label' => $term->name,\n                'name'  => $name,\n            );\n\n            if ( is_array( $saved_terms ) && in_array( $term->slug, $saved_terms ) ) {\n                $args['checked'] = 'checked';\n            }\n\n            $options .= $real_field_type_object->list_input( $args, $i );\n            $children = $this->build_children( $real_field_type_object, $term, $saved_terms );\n\n            if ( ! empty( $children ) ) {\n                $options .= $children;\n            }\n\n            $i++;\n        }\n    }\n    $classes = false === $field_type_object->field->args( 'select_all_button' )\n        ? 'cmb2-checkbox-list no-select-all cmb2-list'\n        : 'cmb2-checkbox-list cmb2-list';\n\n    echo sprintf( '<ul class=\"%s\">%s</ul>', $classes, $options );\n}\n\n/**\n * Save proper values\n *\n * @access public\n * @param $override_value\n * @param $value\n * @param $object_id\n * @param $field_args\n * @return void\n */\npublic function sanitize( $override_value, $value, $object_id, $field_args ) {\n    wp_set_object_terms( $object_id, $value, $field_args['taxonomy'] );\n}\n\n/**\n * Build children hierarchy\n *\n * @access public\n * @param $object\n * @param $parent_term\n * @param $saved_terms\n * @return null|string\n */\npublic function build_children( $object, $parent_term, $saved_terms ) {\n    $output = null;\n\n    $terms = get_terms( $object->field->args( 'taxonomy' ), array(\n        'hide_empty'    => false,\n        'parent'        => $parent_term->term_id,\n    ) );\n\n    if ( ! empty( $terms ) && is_array( $terms ) ) {\n        $output = '<li style=\"padding-left: 24px;\"><ul>';\n\n        foreach( $terms as $term ) {\n            $args = array(\n                'type'  => 'checkbox',\n                'id'    => $term->term_id,\n                'name'  => $object->_name() . '[]',\n                'value' => $term->slug,\n                'label' => $term->name,\n            );\n\n            if ( is_array( $saved_terms ) && in_array( $term->slug, $saved_terms ) ) {\n                $args['checked'] = 'checked';\n            }\n\n            $output .= $object->list_input( $args, $term->term_id );\n            $children = $this->build_children( $object, $term, $saved_terms );\n\n            if ( ! empty( $children ) ) {\n                $output .= $children;\n            }\n        }\n\n        $output .= '</ul></li>';\n    }\n\n    return $output;\n}\n\n}\nnew Inventor_Field_Types_Taxonomy_Multicheck_Hierarchy();\n``\n. Great idea. +1\n. Hi, thank you for your answers. I understand the post/taxonomy metabox saving functionality. I just thought it is already handled somehow for the repeatable groups as well. I will use the standard select field type with taxonomy options provided in solution posted by @jtsternberg instead. Just one more question, is thecmb2_get_term_options`function already included in the CMB2 or do I have to insert it into my code?\n. All right. Maybe it would be useful to put it into library, or not?\nBtw. in the issue #707 created by you @tw2113 is used a group field of taxonomy_radio type without any options_cb callback. Does it work for you? Am I missing something?\n$cmb_demo->add_group_field( $group_field_id, array(\n        'name'     => __( 'Test Taxonomy Radio', 'cmb2' ),\n        'desc'     => __( 'field description (optional)', 'cmb2' ),\n        'id'       => $prefix . 'text_taxonomy_radio',\n        'type'     => 'taxonomy_radio',\n        'taxonomy' => 'category', // Taxonomy Slug\n        'default'  => 'dogs'\n        // 'inline'  => true, // Toggles display to inline\n    ) );\n. Check it out. The field options will be rendered fine, but the values won't be saved correctly for each group as taxonomy is mapped to the post, not to repeatable group.\n. Yes I understand, that's the reason why I don't get it why you used it in the repeatable group field in the issue #707 \n. I just wanted to know if there isn't implemented a helper for this functionality in the CMB2 library already. So I guess it isn't?\n. Do you think this is more optimal solution?\nphp\n$result = array_filter( CMB2_Boxes::get_all(), function( $meta_box ) use( $post_type ) {\n    return in_array( $post_type, $meta_box->meta_box['object_types'] );\n});\n. My final solution:\n``` php\nfunction get_metaboxes_by_post_type( $post_type ) {\n    if ( version_compare ( phpversion(), '5.3.0', '>=' ) ) {\n        return array_filter( CMB2_Boxes::get_all(), function( $meta_box ) use( $post_type ) {\n            return in_array( $post_type, $meta_box->meta_box['object_types'] );\n        } );\n    } else {\n        $result = array();\n    foreach ( CMB2_Boxes::get_all() as $meta_box ) {\n        if ( in_array( $post_type, $meta_box->meta_box['object_types'] ) ) {\n            $result[] = $meta_box;\n        }\n    }\n\n     return $result;\n}\n\n}\n```\n. Hi @Pilskalns, can you share your workaround please? I have same issue here.. The link you posted returns 404.. ",
    "izuro": "@eriktelepovsky works wonderfully, many thanks! This should be added to the snippet library\n. ",
    "bhwebworks": "@eriktelepovsky Great solution - thank you!. ",
    "eklingen88": "Absolutely stoked to find out that this was in the core.  Great work @jtsternberg and @eriktelepovsky.\nI was using a nasty replication of the normal taxonomy select found in posts, but it's much easier to manage with CMB2.\nAny reason this isn't document in the field types?. @jtsternberg Fantastic!  Hats off to you, sir, for both the super fast response time and all of your work on this mu-plugin!!. ",
    "Kudratullah": "@widoz sorry i updated that. here is new link https://gist.github.com/Kudratullah/75c6aeac28b3c5b03478fbf908a617c4\n. thanks for your reply. changing add_action priority fixes this for me.\n. ",
    "dariodev": "F j, Y will return (F 6, 2016)\nMM j, Y will return (AprApr 6, 2016)\nOn date pick both formats will show correct full month name, but on post save format is messed.\n. ",
    "carlgordon": "I'm having the same problem as dariodev\n\nF j, Y will return (F 6, 2016)\nMM j, Y will return (AprApr 6, 2016). \n",
    "wjdennen": "Great, thanks @jtsternberg! I appreciate your quick reply.\n. ",
    "williamsba": "The base64 you see is actually just an image encoded into a data-uri, which is totally safe and saves keeping an image on the filesystem. The image encoded is this one:\nhttps://www.dropbox.com/s/fi4r0lx2uuyko1b/Screenshot%202016-05-19%2013.57.19.png?dl=0\nHere's a good article by Otto (who maintains the WP.org website) on why this is a good method http://ottopress.com/2011/a-good-use-for-base-64-encoding-data-uris/ \nIt's possible you have a security scanner on your website that shows this as a security warning, because they look for anything using base64, but in this case it's completely safe and a recommended solution.\nThanks for reporting regardless. We absolutely want to make sure any code we release is solid from a security standpoint. \n. ",
    "Ipstenu": "FWIW, nothing is broken in 4.5 which is why I pointed at 4.6 (and in fact, everything was fine in 4.6 until May 26th, which is why that changeset caught my eye). \n. I'm not sure if it's an accident on core's part and needs a poke by people who actually understand what the heck happened (it also broke StudioPress' Genesis theme and I'm sure a hundred little plugins).\nWP Core - 4.6-alpha-37590)\nCMB2 - Trunk\nIt works without any errors.\n. Yaaaay \ud83d\ude10. FYI this is related to \nhttps://github.com/WordPress/gutenberg/issues/6912. It's a metabox with wysiwyg - the whole file is ... well\nhttps://github.com/LezWatch/lwtv-plugin/blob/master/cpts/shows/cmb2-metaboxes.php#L118\nIt appears to be because of wysiwyg and teenyMCE. When I turned OFF teeny, it was back to empty again. o.O\n$field_timeline = $cmb_showdetails->add_field( array(\n            'name'       => 'Queer Timeline',\n            'id'         => $prefix . 'plots',\n            'type'       => 'wysiwyg',\n            'options'    => array(\n                'textarea_rows' => 10,\n                'teeny'         => true,\n                'media_buttons' => false,\n            ),\n            'attributes' => array(\n                'placeholder' => 'A broad overview of the queerest seasons.',\n            ),. No, it's the same code.\nhttps://github.com/LezWatch/lwtv-plugin/blob/master/cpts/shows/cmb2-metaboxes.php#L178\n// Field: Notable Episodes\n        $field_episodes = $cmb_showdetails->add_field( array(\n            'name'       => 'Notable Episodes',\n            'id'         => $prefix . 'episodes',\n            'type'       => 'wysiwyg',\n            'options'    => array(\n                'textarea_rows' => 10,\n                'media_buttons' => false,\n                'teeny'         => true,\n            ),\n            'attributes' => array(\n                'placeholder' => 'List the best episodes.',\n            ),\n        ) );. ",
    "noim015": "Would you please tell me how to add the image size for front end ?\nIt worked on back end very much well but i can not fix the front end .\nThanks. I used 'preview_size' => array(100,100), for back end but I want to fix the size of front end side.\nBut it is not working.\nIf you know how to fix it then please let me know .\nThank in advance.. Thank You for your reply.\nI fixed it couple hours of ago .\nAfter all thank you.. ",
    "pawel-kieryk": "Hi, I need to require to upload only 100x100 images, but I don't know where I can require image size. Can you help me?. ",
    "vladolaru": "I have removed the $args and the slash. Keep up the good work.\n. Damn. Ok. Removed it for good now.\n. You are right about those, but I think we could find a way to \"deactivate\" those. What I am after is to attach the uploaded file to the current post. Will investigate further.\n. The fact that it is working for your is just a side effect fo the fact that you are using them on a post type that supports the 'editor'. I am using it on a CPT with just title. I think it would be best if things could be a little more encapsulated.\n. But my solution didn't solve everything. I've ended up extending the Select MediaFrame to it to use a single state with a certain set of parameters. Would you be interested in using such an approach or should I make it as separate code for my own project?\n. Ok. I am also very very keen on keeping the UI as clean as possible. That\nis why I am going to such lengths to improve things but without loosing\nease of use.\nOn Fri, 10 Jun 2016 at 17:12, Justin Sternberg notifications@github.com\nwrote:\n\nSure, I would be interested. As long as the UI is similar (or better) for\nour use-case.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/pull/658#issuecomment-225192767,\nor mute the thread\nhttps://github.com/notifications/unsubscribe/AIa-S2H5KPQ29uqwpDLqG_6i8deqWlL5ks5qKXDVgaJpZM4ItzE2\n.\n. Because I am not careful :)\n. \n",
    "alexmansfield": "It looks like custom WYSIWYG buttons (such as the one Gravity Forms adds) don't get attached after the first WYSIWYG field.\n. I'm not sure if it happens for buttons that are added directly to the TinyMCE editor. I was noticing it for buttons that get added above the editor (next to the \"Add Media\" button). For example, the Column Shortcodes plugin attaches a button there (other plugins do as well, but that was the first free example I could think of).\n. Right, I wasn't trying to put down your improvements at all. Your patch is a huge step forward. I just noticed the missing buttons when testing it out and figured this was probably the place to mention it. I'm sorry if this was the wrong place to mention it. Thanks for the effort you put into this, and keep up the good work!\n. ",
    "webakimbo": "@johnsonpaul1014 would love to use your branch for a time-sensitive project but the build appears to be broken. Is the plugin still working on your end?\n. Thanks! Will keep an eye out for activity.\n. ",
    "marjwyatt": "I had reviewed example-functions.php, the project readme an the project wiki, as well as the wiki documentation before posting my inquiry.\nSimply put, I won't be installing the plugin from WordPress.org.  \nThis is the code that works perfectly with the old version, albeit revised to call CMB2 from it's location in the wp-content folder for my starter theme.\nhttp://pastebin.com/advhBvgC\nThe metaboxes just don't show up with the new code and the whole reason I place this in mu-plugins is to avoid muddying the theme functions.php with code and allow for custom fields and metaboxes to continue to work properly when the theme is switched.\n. Here are screenshots showing custom metaboxes with old code\npage metaboxes\nhttp://screencast.com/t/ZKcXcrR1\npost metaboxes\nhttp://screencast.com/t/7kOYCUHBPEt\n. Sorry to take so long getting back to you.\nThank you for your response.\nThe problem I'm having, comparing the old example-functions.php to the one in this version is that your examples-functions.php doesn't make it clear, to me, how combine metaboxes into groups for custom post types or taxonomies.  Is there a reason for this?  What are the benefits to using CMB2?\nI don't mean to sound like a whiner but the original code is working with the latest version of WordPress.  I've tried everything you've suggested above and the result is a complete fail.\nI'm tired.  It's been a long couple of weeks.  I'll try it again with fresh eyes over the weekend but if you could at least summarize what the benefits you folks had in mind before completely rewriting the plugin, I'd be interested to hear that.\n. ",
    "MartinSotirov": "Never mind. Apparently it's fixed in the trunk branch.\n. ",
    "K15Lmk98": "Hello,\nI settled with:\n'Context' => 'side',\n. Hi,\nThis is an automatic translation\nHow is the value displayed while dragging the slider - 'type' => 'range' -?\nThanks, Claudio_. thanks anyway tw2113.\nClaudio. I understood your intentions. Thanks :)\nUnfortunately I do not speak English.\n I'm trying to explain.\nIn Html5, the slider input type works to render the slider, but not to show dragging values.\nTherefore, when you move the cursor, you do not know what the value is.\nSee here:\nhttps://stackoverflow.com/questions/10004723/html5-input-type-range-show-range-value\nor\nhttps://stackoverflow.com/questions/10004723/html5-input-type-range-show-range-value\nThanks, Claudio\n. Yes you are right.\nWe hope CMB2 will support the type slider natively.\nGood night :) Thanks again.\nClaudio_. Thanks jtsternberg, I did not know him.. Fantastic jtsternberg.\nThank you :). ... sorry, that stupid. I solved.\nphp\n$cmb_cr_header_opacity->add_field( array(\n    'name' => esc_html__( '', 'genesis-theme-cr' ),\n    'desc' => esc_html__( 'Immetti un numero', 'genesis-theme-cr' ),\n    'id'   => $prefix . 'header_img_opacity_number',\n    'type' => 'text_small',\n    'attributes' => array(\n            'type' => 'number',\n            'min' => '0',\n            'max' => '1',\n            'step' => '0.1',\n    ),\n) );\nClaudio_. ",
    "rockerzz": "Was this issue fixed? Because I still cannot use widget example in widget area. Widget with form was rendering but colorpicker and image chooser was not work.\n. ",
    "alexanderdejong": "@tw2113 Any suggestions on how I can get the fields saved by the widget? Widget-example.php doesn't return any fields. I'm not sure how to fetch the fields. Are they saved as an option? Any help much appreciated :). ",
    "nsrosenqvist": "I have a working implementation now which is quite clean. It just needs to reinitialize CMB2 on the widget after values have been saved, which is easily done with wordpress events, but that's the only thing on client side. I can probably publish it later. Busy with work at the moment.. @applesapples1 I've made a MIT licensed package that I'll probably publish within the next month, that way it's easy to integrate and you can basically do whatever you want with it. Will post a link to it when I do . @manzoorwanijk @rockerzz @applesapples1 @alexanderdejong Ok, here we go. Sorry for the delay. It's quite hacky but it works well enough for my use case. If you can improve it then I gladly accept your contributions.\nThe widget class extends the normal WP_Widget class and has the fields defined in the $fields property. Implement your own widget function, the fields you define should be provided in the $instance variable.\nhttps://github.com/nsrosenqvist/cmb2-widget\nI install it via Composer and load it into a custom framework, but I also provided a regular file for normal Wordpress plugin installation. I haven't tried if it works enabling it as a regular plugin but I'm pretty sure it should work. I also managed to integrate CMB2 into navigation menus. You can find the package for that here:\nhttps://github.com/nsrosenqvist/cmb2-nav-menus. ",
    "applesapples1": "Has anyone managed to get this working, and if so would you consider sharing your secrets? Thank you! @nsrosenqvist hi there, any chance you can share your work? Thanks in advance!. ",
    "ingozoell": "I found a solution in (Wiki):\nhttps://github.com/WebDevStudios/CMB2/wiki/Field-Types#group\n. Yes, returning empty strings in page-start.php. <?php \n    echo wp_get_attachment_image( get_post_meta( get_the_ID(), '_iz_produkt_img_one_id', 1 ), 'iz_pvorteile_721_452' );\n?>\nIn page-produkt.php => works\nIn page-start.php => empty string\n. I get different values:\nIn page-produkt.php => 62\nIn page-start.php => 25. I got it\nIn page-start.php\n```\n$start_pv_img_one = wp_get_attachment_image( get_post_meta( 62, '_iz_produkt_img_one_id', 1 ), 'iz_pvorteile_721_452' );\necho $start_pv_img_one;\n```\nThanks so much. I can re-order the metaboxes in my backend and save this. But this change nothing in in my frontend, too.. Is there a way to do this? Or can I re-order just the fields?. Ok, thanks. Thanks for your answer.\nI'd like to get a custom excerpt from my custom editor without using any default WP excerpt.\nI'd like to do this:\n...\n<php echo excerpt_word_block(20); ?> // show 20 words of my custom editor\nI try this, too:\n$excerpt_cmb_custom_editor = apply_filters( 'get_the_content', get_post_meta( get_the_id(), '_cmb_custom_editor', true ) );\nfunction excerpt_word_block($limit){\n    $excerpt = $excerpt_cmb_custom_editor; // instead of get_the_content(); // See above\n    $excerpt = preg_replace(\" (\\[.*?\\])\",'',$excerpt);\n    $excerpt = strip_shortcodes($excerpt);\n    $excerpt = strip_tags($excerpt);\n    $excerpt = substr($excerpt, 0, $limit );\n    $excerpt = substr($excerpt, 0, strripos($excerpt, \" \"));\n    $excerpt = trim(preg_replace( '/\\s+/', ' ', $excerpt));\n    $excerpt = '<p>' . $excerpt . '</p><p class=\"more\"><span><a href=\"' . get_the_permalink() . '\"> '. __( \"Read more\", \"my_theme\" ) . '</a></span></p>';  \n    return $excerpt;\n}\nDoesn't work.\nThis (excerpt_word_block();) works just for me, when I use it with the default WP editor the_content();\n. Sorry, I prefixed it.\nWhat I'd like is:\nTo output the shortcode here:\n\n. > So you want to have the shortcode parsed and the result output into the text/textarea?\nYes. Never done?. The WP Title the_title(); supports shortcodes. Is just a input field.. I found This: https://wordpress.stackexchange.com/questions/195707/shortcode-not-working-inside-html-input\nBut works not for me. I found a solution without the need of shortcodes: https://stackoverflow.com/questions/772510/wordpress-filter-to-modify-final-html-output. I got it:\nCMB2 Wiki\nTemplate\n```\n<?php // START FOREACH      \n$entries = get_post_meta( get_the_ID(), '_iz_project_detail_rpf', true );   \nforeach ( (array) $entries as $key => $entry ) {\n\n    $project_img = '';\n    if ( !empty( $entry['_iz_projekt_img_id'] ) ) { // IMPORTANT!!! _iz_projekt_img**_id**\n        $projekt_img = wp_get_attachment_image_src( $entry['_iz_projekt_img_id'], 'full'); // IMPORTANT!!! _iz_projekt_img**_id**\n        $projekt_img_ratio = $projekt_img_src[2] / $projekt_img_src[1] * 100;\n    }\n\n?>\n\n<img src=\"<?php echo $project_img[0]; ?>\" \n    style=\"padding-bottom:<?php echo round($projekt_img_src_ratio, 5); ?>%\" \n    class=\"src\" \n    width=\"<?php echo $projekt_img_src[1] ?>\" \n    height=\"<?php echo $projekt_img_src[2] ?>\" \n/>\n\nphp /* END FOREACH */ } ? \n```.",
    "twoelevenjay": "I found a similar issue with taxonomy_multicheck and no_terms_text:\n$cmb->add_field( array(\n    'name'      => 'Test Taxonomy Multicheck',\n    'desc'      => 'Description Goes Here',\n    'id'        => 'wiki_test_taxonomy_multicheck',\n    'taxonomy'  => '', //Enter Taxonomy Slug\n    'type'      => 'taxonomy_multicheck',\n    // Optional :\n    'text'      => array(\n        'no_terms_text' => 'Sorry, no terms could be found.' // Change default text. Default: \"No terms\"\n    ),\n) );\nDoes not work and:\n$cmb->add_field( array(\n    'name'      => 'Test Taxonomy Multicheck',\n    'desc'      => 'Description Goes Here',\n    'id'        => 'wiki_test_taxonomy_multicheck',\n    'taxonomy'  => '', //Enter Taxonomy Slug\n    'type'      => 'taxonomy_multicheck',\n    // Optional :\n    'options'      => array(\n        'no_terms_text' => 'Sorry, no terms could be found.' // Change default text. Default: \"No terms\"\n    ),\n) );\ndoes work.\n. @jtsternberg thanks, no need to apologize :-)\nYeah after finding the master method in:\nhttps://github.com/WebDevStudios/CMB2/wiki/Tips-&-Tricks#override-text-strings-in-field\nI realized that trunk and master may have a good amount of differences. I have been working on the Admin Extension, and that I test with the CMB2 WP plugin. Will tonights release be pushed to the wordpress.org repo too?\nI read your post about the whole \"libraries in the plugin repo\", and I am not too thrilled about that either :-( My first and only wordpress.org plugin is built around the CMB2 library being available in the repo!\n. Ok, thank you. I will update CMB2 Admin Extension to work with the new plugin and have some BC.\n. ",
    "PavelK27": "Possible duplicate of #765. $this->field->get_timestamp_format() \nis calling \nCMB2_Utils::make_valid_time_stamp()\nwhich uses strtotime() function. And in case of the custom date format we're passing there a non-valid date format, e.g. 7th October 2016 so strtotime returns false and field value can't be rendered correctly. What I purpose here for a fix is to use CMB2_Utils::get_timestamp_from_value() method when we have a custom date_format set for timestamp return. \n\nThis helps to fix the issue with saving and custom formats, though I also noticed that we can not use date formats like this:\nl jS \\of F Y\nor\njS F Y\nas they're not supported by jQuery UI Datepicker\nwith my fix we can save that format into database, but the field value still won't be displayed correctly, so we also need to correct documentation for that.. https://github.com/WebDevStudios/CMB2/pull/867. The update was corrected. Should be fixed now, Justin. Please take a look when you have a moment.. ",
    "BraadMartin": "I just ran into this same issue today. I understand your concerns about the group titles only updating after save @jtsternberg, but this fits my use case just fine, and I believe it's as simple as either adding the filter that @brandondove added here or adding a set method on the CMB2_Field class that would allow us to affect the options property from https://github.com/WebDevStudios/CMB2/blob/65f4831a08df1e4ded0c786f0c377b47aface75f/includes/CMB2.php#L407\nI realize that a JS solution would be the ultimate, but can you think of any harm in providing a way to do it with just PHP also? This would be really helpful for my use case.\nThanks for your excellent work on CMB2 btw! I use it on every project, and it has become an essential tool for me and the company I work for.\n. @jtsternberg Thanks for the reply, and I totally understand. I'll use the JS solution you suggested. :)\n. ",
    "TruongTuyen": "Thank you!\n. ",
    "thirumani02": "Yes, I'm asking for this extension. This extension is not working on repeatable fields, i can give you a live link and login credentials(privately- thirumani02@gmail.com) if necessary. \nThank you \n. I think, its may be because of the wrong ID representation by CMB2. They're trying to target the field based on the repeatable group ID. But CMB2 update the ID(on the particular element) only after saving the page.\nBtw: thanks for your time. I will raise the ticket on that repository too. \n. @tw2113 I just found a thread with same issue https://github.com/jcchavezs/cmb2-conditionals/issues/2 and they labeled as an enhancement. \n. ",
    "ShariqKhan2012": "I am facing the same problem. Does anyone has an idea how to solve this?. Many thanks. Yes, I appreciate the hard work that you guys and many contributors have put in this tool and and giving credits is the least I can do as a token of my appreciation.\nI will add the credits in one of the ways when I release it.\nRight now doing some testing :). Quick question: I read in one of the comments that CMB2 loads only one instance. So if there are multiple plugins (say P1, P2 and P3) that use CMB2, then only one  instance will be loaded for all of them.\nDoes this also mean that if one of the plugins (P1) is not using the latest version of CMB2, then it could cause problem for other plugins (P2 and P3) too if the instance of CMB2 is loaded from the not-up-to-date library coming from P1?. That looks super helpful!. However, I have some lingering doubts.\nLet's say while working with CMB2, I've encountered some issues with repeatable-groups that have not been fixed in the trunk. However, I have managed to patch those issues with some custom code. BUT it is just that- a patch. It fixes the issues bugging my project, but do not do anything for the other known issues. More so, it may even break other functions for some other projects using CMB2.\nBut since it works well for my project, I decide to anyway go ahead with it and knowlingly assign a higher version to the library, so that my CMB2 library project is being used.\nNow there can be 2 things:\n\nMy version of CMB2 contains fixed just relevant for my project, and so it may break some other plugin\nSomebody else thinks the same way and has already assigned his version of CMB2 a version number higher than mine. So it would be his version of CMB2 that would be used, thus making my plugin error prone.\n\nCould this happen?\nAs a side note, there are many issues with repeatable groups that have been in opened state for quite a long time. Most of these are related to incorrect assigning of index to group/row elements after some elements have been added/removed.\nI totally understand that it is quite difficult for you to invest time in a project that demands much in terms of coding and testing efforts. And on top of which the project is open-source and is not a source of revenue for you. And that is exactly why I so much appreciate your efforts and contribution towards making this plugin accessible to all. \nThe thing is that those issues need to be fixed to make this already awesome library even more awesome. So, understanding that you might be busy in some other projects or that this be not on the radar right now, I would like to try to fix some of those issues. \nBut if you could please let me know whether there's already some work-in-progress for fixing those issues, that would be great. because my JavaScript skills are not that great and I would have to spend sometime updating my skills and understanding the code.\nSo if there's already some work going on, I dont see the point of me doing that because there are already brighter minds working on it.\nBut f no work is on for it , then I would be more than happy to contribute by trying to fix it and/or testing.\nYour thoughts? \n. ",
    "matgargano": ":+1: getting this in would be awesome\n. ",
    "ramiy": "@jtsternberg, I created a new PR on the trunk branch.\nhttps://github.com/WebDevStudios/CMB2/pull/696\n. @jtsternberg \nActually, you are wrong.\nYou should never use context _x() function to describe placeholders. You should use only translator comments /* translators: %s: placeholder description */. The translator comment will appear on the sidebar:\n\nAs for the _x(), in WordPress core, we use context functions when a string is used in many places, but we want one of those strings to have a different meaning. When we add the context function, this string will appear as a separate string in translate.wordpress.org.\n\nWhen using context function, It creates a new line in translate.wordpress.org, and allows you to provide a different meaning for this particular string.\n. Ok, lets use get_current_screen() on the back-end and $pagenow global on the front-end.\n. Using globals is a bad practice.\nWordPress core is replacing its globals (see https://core.trac.wordpress.org/ticket/37699). See changeset 38459 and 38383 for examples.\n. @bradp PR refreshed. Conflicts solved.. @jtsternberg Fixed.. ",
    "DannyCooper": "For reference I believe this is the relevant thread: https://wordpress.org/support/topic/cmb2-taxonomy-select-not-saving-in-database-1/\n. ",
    "jazzsequence": "@jtsternberg the best example of proper use of _x would be:\n_x( 'Buffalo', 'textdomain', 'A city in New York.' );\n_x( 'Buffalo', 'textdomain', 'A large animal that lives in North America' );\n. So the nonce checks were pulled out in https://github.com/CMB2/CMB2/pull/949/commits/4e7723ab060f41899a69c4bb410ca15f607c4976 and those will fail sniff tests, too, but it's not as if we aren't checking nonces or making sure the data we're getting from superglobals isn't sane, so \u00af_(\u30c4)_/\u00af.. >In general, I'd much prefer if all the stylistic, non-functional changes were in a separate PR. Will make it much easier to review both PRs, and to communicate about functional changes w/o cruft of the other stuff.\nGood point. I was working through the results of the sniff tests and wasn't 100% sure where it would take me. It makes sense to break stylistic stuff out into its own thing though. I will leave this open for now (just because there's discussion and to refer back to later), but I can ultimately create separate PRs for each and then close this PR.. Is it possible to unit test that sort of back-compat stuff? I'd rather have extensive -- even overkill -- unit tests that can tell us verifiably what is likely to break than have to stare at things and hypothesize or run tests manually against really old versions of CMB2 and I'm guessing that would state our case better than \"we can't not sanitize this because it could break backwards compatibility\" when presenting it to VIP.. For things like this, though, where there's an obvious usage (it's a description, so describe things) and a fairly obvious mis use (injecting arbitrary scripts), doesn't it make sense to draw a line in the sand and say \"yeah, that's not a good idea\"? If anyone wonders why the 200 lines of javascript they added to their description is getting stripped out, it should be fairly obvious. And a solution would be to build their own field type where they can put as much arbitrary javascript in there as they want.. $this->is_repeatable( $field_group ) is there for a couple reasons, and I'm happy to pull it out.\n\nScrutinizer was complaining about the repetition of $field_group->args( 'repeatable' ) and it was done in an attempt to \"leave the code better than you found it.\"\nTo Scrutinizer's point, it's done a whole bunch of times, and anything that's done more than once can be split into it's own function (admittedly, the function is just a single line that spits out the same output, so the value is questionable except...)\nIt's a couple less characters to type.\n\nIdeally, the way I originally conceived it, it would be more global like is_repeatable() instead of being a class method that requires a parameter, but that gets hairy, too.\nI like the CMB2_Field::is( $param ) and being able to use it as $field_group->is( 'repeatable' ) idea, though. It seems like an obvious evolution of the same idea.. Basically, I'd rather know I can rely on the unit tests to tell me if something is going to break backwards compatibility than stare at it and guess (or test it manually myself). \nI know that it's a lot of assumptions, like maybe someone decides to throw javascript in somewhere where it doesn't belong or whatever, but if that's a legitimate concern, let's test against it, so the tests can fail, we can figure out a sanitization solution that works and then move on. And for some things I do think that a line in the sand needs to be drawn where the data makes sense.\nThat way, if VIP or whoever's reviewing the code comes back and says \"why did you do this\" we can point at the tests and say \"well, we were testing against someone maybe throwing some javascript in there, so we needed to protect that functionality.\". uggggghhhh\nWell it looks like fewer characters, okay?\nI stand corrected :). It's mostly to shut the sniff up and I don't know how VIP would feel about adding whitelisting comments to things if they found them... (guessing not very good).. I can see a situation where someone might do something like \n <h2 class=\"cmb-group-name\">Something <em>really</em> important</h2>\n\nIn which case you'd want to make sure the HTML was okay.. Ditto above.. Partially because I see this function expanding to various wp_kses arguments for different things we need to sanitize throughout the code, so ideally there would be one place for all the things.. Re: paring down the list, we could do that -- heading tags, for example, probably shouldn't be inside a heading tag -- but I think wp_kses_post is a quick and dirty solution that we can implement sooner and then refine it via kses_args later.. ",
    "timburden": "After updating to the latest trunk I get errors on what was working code. I \"think\" it's related to this PR.\nHere's the code, with a bunch of group fields left out:\n``` php\n        $module_placements = $cmb->add_field( array(\n            'id'          => 'module_placements',\n            'type'        => 'group',\n            'description' => ( 'Module Placements', 'cmb' ),\n            'repeatable' => true,\n            'options'     => array(\n                'group_title'   => ( 'Module Placement {#}', 'cmb' ),\n                'add_button'    => ( 'Add Another Placement', 'cmb2' ),\n                'remove_button' => ( 'Remove Placement', 'cmb2' ),\n                'sortable'      => false,\n                'closed'     => true,\n            ),\n            'after_group' => array( $this, 'change_group_titles' ),\n        ) );\n    $cmb->add_group_field( $module_placements, array(\n        'name'             => __( 'Label', 'cmb2' ),\n        'id'               => 'label',\n        'type'             => 'text',\n    ) );\n\n....\n       $cmb->add_group_field( $module_placements, array(\n            'name' => 'Default Modules',\n            'description' => 'Enter default modules for this placement here',\n            'id'   => 'default_shortcodes',\n            'type' => 'wysiwyg',\n            'options' => array(\n                'wpautop' => false,\n                'media_buttons' => false,\n                'tinymce' => array(\n                    'toolbar1' => 'sjmcm_editor_button',\n                ),\n                'quicktags' => false,\n            ),\n        ) );\n```\nThe wysiwyg field in the first group is working fine, subsequent groups are broken; and after I add a new group the wysiwyg inside that is broken.\nIn JS console the error is \"Uncaught TypeError: window.quicktags is not a function\" in cmb2.min.js\nPreviously, the wysiwygs were working fine, except that when adding a new group that wysiwyg would be broken until the options page was saved. I am trying the latest to hopefully fix that exact problem.\nNOTE: I am also using JS to change the title on the group depending on the label field, almost exactly per this snippet.\n. This is still not fixed, and has been released I believe. Should I make it an issue?\n. ",
    "rogercoathup": "We are seeing the same problem -- group fields don't display in term meta after saving\n. @jtsternberg -- if you'd like; to help you duplicate -- I can send you our plugin that creates the meta fields (CMB2 is added via composer)... you can activate and hopefully see the same problem.\n[Edit: I've tested with 2016, and no other plugins activated, and it still fails]\n. @tw2113 -- I've not had chance to try Justin's PR yet.  I'll try to make time later today.\nPlease see my edit above though -- I've tried with just our plugin that creates the meta, no other plugins active and the 2016 theme (so just the one instance of CMB2), and the repeatable group still fails in that case on a term page (the repeatable group works fine on a post type page, and other types of meta field work on term page ok).\n. Thanks @tw2113 -- is there an email address I can send it to you on?  I don't want to share in public as it has the client name / details in the code\n. @jtsternberg -- yes, that PR fixes the problem for me.\n. Using the following branch: webdevstudios/cmb2  dev-trunk 17500e9 CMB2 \n. ",
    "natashawylie": "Thank you for your help, that's worked perfectly.\n. ",
    "alvarogois": "Thanks @jtsternberg. Just to get it straight: I should have forked the trunk branch instead of the master, before commiting the files and making the pull request, right?\n. Good question @pedro-mendonca. Thanks.\n. @jtsternberg, Transifex doesn't follow a community approval system, therefore does not apply the locale guidelines for WordPress core translation. It's very demotivating to be contributing to the translation on a platform where these rules are not followed, and therefore where there is no consolidation of terms and a permanent and continued work of a very involved community, which is what happens in translate.wordpress.org. Transifex was important when there was no open platform for collaborative translation of themes and plugins. Right now, for me, it only makes sense if the theme or plugin is not in the repo.\n. CMB2 has a plugin version in translate.wordpress.org, if the .pot is the same, the translation should be handled there and pulled to the library git repo. As to a way to pull translations from translate.wordpress.org, I'm not aware. Maybe @pedro-mendonca can add to this. He's a Portuguese pt_PT GTE, like me, and he was ahead of the plugin's pt_PT translation.\n. Not exactly. @pedro-mendonca translated the plugin, I used CMB2 as a library for a project and was not sure if the two versions had the same strings. I translated it independently from his version, but they're very similar, we work together as WordPress Portuguese pt_PT translators and GTEs. If the language files are the same, the one there should indeed take precedence: https://downloads.wordpress.org/translation/plugin/cmb2/2.2.2.1/pt_PT.zip\nMy goal was to overwrite the Transifex version, which was the one here in the library, and has a lot of errors.\n. But, if you remove the language files from this library, it won't be translated if anyone includes it in a theme or plugin, right @jtsternberg?\n. Tested. If I remove the language files from the CMB2 library on my plugin, CMB2 UI isn't translated anymore.\n\n. I just realised the library has a LOT of locales. You should probably move all the language files to translate.wordpress.org. Do you have a way to reach current translators in Transifex? They could be contributing to the plugin's translation in wp.org and it would be easier for you to pull the files from one place only. Maybe reaching other GTEs you can get some help, since CMB2 isn't exactly an uknown plugin/library: https://make.wordpress.org/polyglots/?resolved=unresolved\n@pedro-mendonca I'm not sure if WordPress will fetch the translation files form translate.wordpress.org if CMB2 is used as a library inside a plugin or theme. What do you think?\n. Not my experience @fxbenard. The platform may be good, but the fact that translations get override by users that don't comply with standards and guidelines of the local community ruins it. Besides, IMHO it makes no sense to have duplicated translation flows.\n. I'm having the same issues. A new empty group is created upon saving the post. If I delete the empty group and hit save again, the empty group is in fact deleted.\nAs to the sortable group, same error: if the number of repeatable fields is different inside each group, the number of fields stays fixed despite sorting the content, just as @manmar described. So, if the first group has 2 fields and the second has 3 fields, when sorting only the first 2 fields of the second group are shown in their new position as first group fields. Also, if I add another line/field to this group, the content of the missing field is automatically inserted in this new created field.\n. ",
    "pedro-mendonca": "Hi @alvarogois and @jtsternberg ,\nIf you don't mind, I suggest you to use a new branch for localization, rebased on top of trunkbranch. That leaves trunk free for string debugging and other parallel PRs.\nAnother doubt on this:\nI do keep my localization branch for cmb2, but I see that if I push it to your repo it will become overlaped by Transifex pulls, so the translations contributed directly here go to trash. In this case, as some others, the translations from Transifex don't comply with the core translation teams guidelines and terms, and that's why @alvarogois is making this translation. What happens next? Will this be kept or overlaped by Transifex contributions?\n. Hi @alvarogois and @jtsternberg,\nThere are several issues here.\nOne is the Transifex situation, as @alvarogois mentioned above, was important before the existence of translate.wordpress.org, but now the plugins should migrate if want to have translations kept by the same community that maintains local WordPress translations. I would keep the work done but migrate it to wp.org system.\nAnother issue is the actual state of the plugin in the wordpress.org site. As you can see here CMB2 don't have an active column for Stable translation. That is why @alvaro isn't receiving automatically any translation from the repo, because it already existis, partially, as you can see in the Developmentcolumn. I don't know now what is missing to allow it, but as soon as you unblock this, the translations will be available, you can import them from your current .po files, or rely on local translation teams to maintain them for you. I would ping the ones on Transifex team, if they are of trust or connected to local translation teams.\nIf you want, or trust anyone in particularly, maybe you can keep the translation files here as a backup, but from 4.6 beyond, the priority is the translations that come from the wp.org repo. If a language is 95%+ complete in the repo, every user will receive it's language pack, despite having or not a .po file with that language in the /languages folder.\n. Good point. I can't test it as there are no translations on Stable repo branch.\nStill, the translations can always be pulled from wp.org repo, better than from transifex, for consistency with core translations and maintenance purposes.\n. I do support some plugins translations both in wp.org and github. Some authors moved completely over wp.org and removed completely the .po files. Still in these cases I keep my own branch for future reference. For those who also keep the .po/.mo files in GitHub I keep contributing, but since wp.org I also import it there, it's redundant, but it's dev/author's call. I just try to keep pt_PT as good as I can and check it with language team (@alvarogois :p ).\nSo for now I would check how to move everything to the correct repo, and maybe later decide wether or not keep local files, as in 4.6 they are overlapped by repo language packs. If you can get the same good translation support on wp.org as you've had so far, and if cmb2 have any issues loading languages packs while being used as a library, maybe you can pull/update them once in a while from wp.org. Specially because not every good translator is comfortable using github :)\nRegards\nHope I've helped a bit\n. Hi @jtsternberg \nThe stable version of the strings of CMB2 isn't still available at the wp.org repository.\nThe translation we've pushed here will be exactly the same that will be at wp.org as soon as it's available. When I find an error or add new strings, I usually update it on both wp.org and github (if they exist on both). \nFor now, it's synced only with Development branch.\nAs this CMB2 case it's a bit different from other cases, as @alvarogois mentioned, the situation of having it bundled as a module, it's probably a good practice to keep the .po files also in github.\nIf you'll make the Stable translation set available on wp.org, you'll probably have to think on a way to sync it all, but you'll need translation editors on every language that CMB2 is translated.\nIt currently gets a little messy with 3 platforms, GitHub, wp.org and Transifex. It's a pain to choose wich one gets priority, or even per language.\n. ",
    "manmar": "Sorry for the wait, here is the configuration:\n```\nadd_action( 'cmb2_admin_init', 'mm_newsletter_archive' );\nfunction mm_newsletter_archive() {\n$prefix = '_nla_';\n\n$nla = new_cmb2_box( array(\n    'id' => $prefix . 'pdf',\n    'title' => __( 'Newsletter Archive', 'cmb2' ),\n    'object_types' => array( 'page' ),\n    'context' => 'normal',\n    'priority' => 'high',\n    'show_on' => array( 'key' => 'page-template', 'value' => 'page-newsletter-archive.php' ),\n) );\n\n\n$nla_group = $nla->add_field( array(\n    'id' => $prefix . 'group',\n    'type' => 'group',\n    'description' => __( 'Create a list of newsletters', 'cmb2' ),\n    'options' => array(\n        'group_title' => __( 'Newsletter {#}', 'cmb2' ),\n        'add_button' => __( 'Add Another Newsleter', 'cmb2' ),\n        'remove_button' => __( 'Remove Newsletter', 'cmb2' ),\n        'sortable' => true,\n    ),\n) );\n\n\n$nla->add_group_field( $nla_group, array(\n    'name' => __( 'Newsletter Title', 'cmb2' ),\n    'id' => 'title',\n    'type' => 'text',\n) );\n\n\n$nla->add_group_field( $nla_group, array(\n    'name' => __( 'Newsletter URL', 'cmb2' ),\n    'desc' => __( 'Upload a file or enter an URL.', 'cmb2' ),\n    'id' => 'file',\n    'type' => 'file',\n    'preview_size' => array( 100, 100 ),\n) );\n\n\n$nla->add_group_field( $nla_group, array(\n    'name' => __( 'Newsletter Contents', 'cmb2' ),\n    'id' => 'contents',\n    'type' => 'text',\n    'repeatable' => true, \n) );\n\n}\n```\n. ",
    "kajdzo": "Thank you guys for your help. The post that you pointed me to helped me. Sorry for not checking previous posts.\n. ",
    "bobbingwide": "OK. What's the @package?\n. Realised I could have changed a couple of the else if's to elseif while I had the chance.\n. ",
    "ryanshoover": "Thanks @jtsternberg and @tw2113!\n. ",
    "skrichten": "I'm having the same issue here.  Does anyone have a workaround instead of having to roll back?\n. ",
    "ReidTC": "Anything new on this? I am finding that it is still an issue. Making some things look unseemly on a project I'm working on.. ",
    "leolondon": "Hi tw2113,\nI use Wordpress 4.6, and CMB2 2.2.2.1 installed as plugin\nThen I have this:\n```\nadd_action( 'cmb2_init', 'cmb2_rdm_metaboxes' );\nfunction cmb2_rdm_metaboxes() {\n$prefix = '_cmb_';\n\n$cmb = new_cmb2_box( array(\n    'id'         => 'homepage_details_metabox',\n    'title'      => 'Details:',\n    'object_types'      => array( 'page' ), // Post type\n    'context'    => 'normal',\n    'priority'   => 'high',\n    'show_names' => true,\n    'show_on'    => array( 'key' => 'id', 'value' => array( 6 ), ),\n) );\n\nfor ($i = 1; $i <= 15; $i++) {\n\n    $cmb->add_field( array(\n        'name'     => esc_html__( 'Edito' . $i , 'cmb2' ),\n        'desc'     => esc_html__( 'Entrez ici le text pour l\\'\u00e9dito pour la page d\\'accueil', 'cmb2' ),\n        'id'       => $prefix . 'edito' . $i ,\n        'type'     => 'wysiwyg'\n    ) );\n\n}\n\n}\n```\nAs shown on the attached jpeg,\nthe font is loaded again and again,\neven if it loads from cache and sayx timing is 0ms,\nit actually double the page load time (eg: the gap between 2500ms and 4500ms)\nonce the page has images and other elements, the whole page loads in 10sec...\n\nThanks for your help!\n:-)\n. Hi jtsternberg, \nThanks for your reply,\nI understand and agree this is probably a wp_editor issue,\nmaybe it's not designed to load more than one tinymce per page ?\nThere should be an option in wp_editor \nto tell (this is not the first wysiwyg, please do not reload everything)\nI don't dont know if you guys has any idea on how to achieve this?\nPerformancewise: Yes this duplicate font thing is definitely causing slowness,\nThe page is blank,\nAs soon as I load wysiwigs, it is slow,\nand gets back to \"fast\" once wysiwygs removed\nThanks again for your reply!\n. Interesting! Thanks!\nI finally used textarea instead.\n:-)\n. Exact! sorry! I've made a fresh install,\nI can now set the date to 01.01.1000\nthe field doesn't save 21.12.128 but accept 21.12.0128\nsince my client has wide needs...like BC dates, or far in the future,\nit would result in an endless scroll list even if I manage to fix formatting...\nSo I swapped to regular text for the time being, \nand just explain about date formatting in the description.\nSorry for the false alarm \nand thanks so much for your help \nand of course for awesome CMB2  !!!\nLionel\n. ",
    "luxdeluks": "Actually I figured it out. turns out I forgot to also include the remove filter that also calls the function for save:\nadd_filter('cmb2_override_meta_save', 'save_custom_data', 10, 2);\nadd_filter('cmb2_override_meta_remove', 'save_custom_data', 10, 2);\nnow if we do this \nif (!array_key_exists('value', $values)) {\n        $values['value'] = null;\n    }\nthe value is null :)\n. Yes, sorry for not writing anything earlier. It is in fact an array. So with this call\nget_custom_data($data, $id, $arguments, $field)\nwe need to grab $arguments. It's basically a multidimensional array with 2 levels with a repeatable group.\nThe first inner array represents the number of repeats. So if we have\narray => \n[0] => array\n[1] => array\n[2] => array\nArrays 0, 1, 2 means we have 3 repeats. In order to grab field values for each of those we need to do another lookup inside the inner  array of those. So something like:\n$array[0]['field-name']\nI'm writing all this from my head so hopefully I didn't forget something. In any case I got it working fine so if anyone stumbles or notices I wrote something wrong feel free to comment off course :)\n. In case of using additional queries for populating metaboxes it can become a potential bottleneck since it fires on all admin pages.\nAny ideas on a solution to bind metabox creation to specific edit screens only?\n. I can't seem to grab the current screen with cmb_admin_init to perform checks.\nHowever using option_cb does seems to work. So thanks for that! Gonna go test the field object it passes to a function to see if it all works.\n. cb_options worked great and thanks again for that. For those in need:\nfunction my_function ( $field ) { \necho $field->args['name'];\n}\nif we would call this function like so:\n'options_cb' => 'my_function ',\nwe would get the name value of the field. Off course you'd need to return the value inside the function etc.\nFor those interested in other values I suggest simply using print_r($field) inside your function to see all the object values.\n. ",
    "dskurth": "THANK YOU!!!!. I tried this and did not get any results. Do you still have the full code?. ",
    "decapoda": "Had similar thing on pages with custom post types that didn't have any tinyMCE fields. When trying to remove a repeatable item had that:\nUncaught ReferenceError: tinyMCE is not defined - cmb2.min.js?ver=2.2.3:1\nHighlighted spot:\nfunction(id){var editor=tinyMCE.get(id);...\nI assume, the problem is inside line 298 in cmb2-wysiwyg.js, which is shipped in cmb2.min.js. \nFixed with loading tinymce (for those custom posts post.php, edit.php and post-new.php admin pages):\nwp_enqueue_script('tinymce_js', includes_url('js/tinymce/') . 'tinymce.min.js');\n. @tw2113 Yep, tried it both ways (as wp_enqueue_script( 'tiny_mce' ); and as a dependency to my other script for my custom posts admin pages), didn't work\n. Yep, it's all good with the trunk version, thanks @jtsternberg \n. ",
    "MapSteps": "Hey @tw2113,\nyes, didn't work.\n. oh, thank you @tw2113!\nI've missed that. Works! :)\n. Hey @tw2113,\nany news here? :)\nBest,\nDavid. That looks great, thanks @taunoha!\nBest,\nDavid. ",
    "MrUzu": "Hi @tw2113!\nYes I closed the issue right away when I better looked at my code...\nI found this \"trouble\" was due to an obvious, but unexpected :), mistake of mine: I had left another form wrapping the cmb_form... which caused the problem...\nIt was actually the first time I had a trouble with CMB2, and this confirmed the quality of your framework.\nThanks again, it is a real pleasure to use and a real productivity tool for my projects.\nHope the best to you and the team.\n. ",
    "kampiamodikuesto": "WYSIWYG field type doesn't recognize visual composer. No switch buttons. is there a way to enable this?. ",
    "yehiasalam": "I tried the current_screen hook, but looks like it's executed after cmb2_admin_init since i cant see any metaboxes added now in the admin screen\n. ",
    "andrewatduckpin": "@tw2113 The two options appear to both be links to the first option. Could you update the second filter link to point to the relevant filter? Thanks for your suggestion\n. @tw2113 thanks for the help\nIn case anyone visits looking for same filter solution... These two filters together will\n1) Save metadata for the specified fields (in the $fields var) to post ID 1 (you can change this if you want) regardless of what the current post ID is.\n2) Show metadata from post ID 1 in the specified fields (in the $fields var), regardless of what the current post ID is.\nEdited to utilize CMB2s built-in add_metadata and update_metadata functions\n```\nfunction override_meta_save( $empty, $a, $args, $object ) {\n    $fields = array(\"field_one\",\"field_two\",\"field_three\");\n    if(in_array($a['field_id'], $fields)){\n        if ( ! $a['single'] ) {\n            return add_metadata( $a['type'], 1, $a['field_id'], $a['value'], false );\n        }\n        return update_metadata( $a['type'], 1, $a['field_id'], $a['value'] );\n    }\n    return true;\n}\nadd_filter( 'cmb2_override_meta_save', 'override_meta_save', 10, 4 );\nfunction override_meta_show( $default, $objectid, $a, $object ) {\n    $fields = array(\"field_one\",\"field_two\",\"field_three\");\n    if(in_array($a['field_id'], $fields)){\n        return get_post_meta( 1, $a['field_id'], true );\n    }else{\n        return $default;\n    }\n}\nadd_filter( 'cmb2_override_meta_value', 'override_meta_show', 10, 4 );\n```\n. ",
    "jquimera": "@tw2113 Thanks for answering. Yes, I'm already using CMB2-radio-image. I just wish I could use it with arrays within a function, not need to put everything again. If I could extract the arrays within that function and place in the fields, would be great. But I can not do that, would have to make a kind of loop with the values extracted into the CMB2 fields. Discover the CMB2 a few days ago and it really blew my mind ...;)\n. @tw2113 Is there a tutorial which teaches to create my own fields? I would try it. I believe in creating a field radio native image, similar to redux that extracts the function of arrays with title and image.\n. @tw2113 Thank you! Your way, how do you build this my get_sidebar _layouts?\n. @tw2113 I appreciate your answers. They are helping me a lot. I was just being abused, looking for an easy way to do this with my last question. I apologize. Thank you.\n. @tw2113 I'm trying to do this using the example of theme CMB2. As we already know, it uses the CMB2 to create a panel of options, and this method I'm wanting to use already exists in this theme. The problem is that I am not able to do the same thing for metaboxes on pages and posts.\n. @tw2113 From what I could see, the code below is what makes the whole thing work, one must also work with the metaboxes post_type, page / post.\n```\nfunction cmb2_example_theme_get_option( $key = '' ) {\n    global $cmb2_example_theme_options;\nif( function_exists( 'cmb2_get_option' ) ) {\n    return cmb2_get_option( $cmb2_example_theme_options->key, $key );\n} else {\n    $options = get_option( $cmb2_example_theme_options->key );\n    return isset( $options[ $key ] ) ? $options[ $key ] : false;\n}\n\n}\n```\n. @tw2113 I am building my whole project using as example-functions.php base without changing anything vital, I'm just copying the fields and changing ID's.\nhttps://github.com/WebDevStudios/CMB2/blob/trunk/example-functions.php\nThis file is what I'm using.\n. @jtsternberg Yes Yes! this is exactly what I needed. Everything is perfect now. I am very happy. I am grateful to you and @tw2113 for helping me.\n. @tw2113 No, I do apologize. I'm still learning English and still have the google translator ... maybe I have not expressed myself well. I thank you.\n. ",
    "infobuster": "Ahh that makes sense thanks for your help \n. ",
    "SKFazleeRabby": "I don't know much about compatibility. But I'm using latest version of WordPress, I'll let you know if there is any JavaScript errors in console. Thanks for the concern.\n. ",
    "needtakehave": "For object_type, I add in; 'object_types'  => array( 'page', ), // Post type\nCould I change 'page' to a custom post_type? like 'review' for example and if so, does it need to be the custom post type name or slug (I've tried both, and so far, neither has worked thus far yet).\nAlso, when I try this code, I am always getting a unexpected => error, which I've googled and they say a) it's because of an array returning empty or b) because I have forgotten a ) ) ; etc but I haven't that I can for b so it must be a but I'm not sure what?\nHere is all of the code.\n```\nif ( file_exists(  DIR . '/cmb2/init.php' ) ) {\n  require_once  DIR . '/cmb2/init.php';\nfunction cmb2_hide_if_no_cats ( $field ) { if ( ! has_tag ( 'cats', $field->object_id ) ) { return false; } return true; }\nadd_action ( 'cmb2_init', 'cmb2_add_metabox' );\nfunction cmb2_add_metabox() {\n    $prefix = 'cmb2';\n    $cmb = new_cmb2_box ( array (\n        'id'           => $prefix . 'title2',\n        'title'        => ('title2', 'cmb2'),\n        'context'      => 'normal',\n        'priority'     => 'default', ));\n    $cmb->add_field ( array (\n        'name' => ('title2', 'cmb2'),\n        'id' => $prefix . 'title2',\n        'type' => 'text',\n        'default' => 'title', )); }}\n```\n. I still don't understand :( This is what I have in my functions file, with little else except a little bit in my header.\n```\nif ( file_exists(  DIR . '/cmb2/init.php' ) ) {\n  require_once  DIR . '/cmb2/init.php';\nfunction cmb2_hide_if_no_cats( $field ) {\n    if ( ! has_tag( 'cats', $field->object_id ) ) {\n        return false;\n    }\nreturn true;\n\n}\nadd_action( 'cmb2_init', 'cmb2_add_metabox' );\nfunction cmb2_add_metabox() {\n    $prefix = 'cmb2';\n    $cmb    = new_cmb2_box( array(\n        'id'       => $prefix . 'title2',\n        'title'    => ( 'title2', 'cmb2' ),\n        'context'  => 'normal',\n        'priority' => 'default',\n        'object_types' => array( 'Blog Tours', 'Reviews' )\n    ) );\n    $cmb->add_field( array(\n        'name'    => ( 'title2', 'cmb2' ),\n        'id'      => $prefix . 'title2',\n        'type'    => 'text',\n        'default' => 'title',\n    ) );\n}\n} ?>\n```\nand it's still not showing up :(\nThe custom post type slug is called reviews and the name is Reviews. I've tried it both ways and neither worked. I've tried it without the Blog Tours added on too and that didn't work either. I just don't get it.\n. Ah ha! Apparently I needed the entire directory instead of just \"DIR \" -- I don't think it was picking it up for some reason. That worked when I substituted that for the actual directory path.\n. Thanks!\n. That worked, thanks so much!\n. ",
    "Pilskalns": "@tw2113 No, it's not because of saved data. I tried clearing it in db etc. I said that just to prove, that adding field to field thing was working for me - I have spen't enough hours digging CMB2 source code, I understand why error is, but I can't figure how to fix it proper way.\nError happens because sprintf function receives array instead of string. On CMB2_Type_Multi_Base class, there's a loop inside concat_items function, which sends already array (here should be already string) to select_option:\n``` php\n$options = array();\nif ( $option_none = $field->args( 'show_option_none' ) ) {\n    $options[ '' ] = $option_none;\n}\n$options = $options + (array) $field->options();\nforeach ( $options as $opt_value => $opt_label ) {\n// Clone args & modify for just this item\n$a = $args;\n$a['value'] = $opt_value;\n$a['label'] = $opt_label;\n// Check if this option is the value of the input\nif ( $value == $opt_value ) {\n    $a['checked'] = 'checked';\n}\n$concatenated_items .= $this->$method( $a, $i++ );\n}\n```\nIn pasted excerpt, options comes from THIS line, I can sanitize it manually, but I can't figure out, how it should work, if it is regular use of Select, not Select inside other field.\nP.S. It's an plugin options page, created from samples in Snippets Library\n. @jtsternberg If term trunk branch means main / master branch, then yes. I use CMB2 as WP plugin. Checked versions already before and they match with latest release here on GitHub - v2.2.2.1\n. @jtsternberg  Ok, now understand meaning.\nYes, here's  the same error (some line numbers are +/- up down as previously I had shifted them when dumping variables for debug):\n``` php\nFatal error:  Uncaught ErrorException: Array to string conversion in ...\\wp-content\\plugins\\cmb2\\includes\\types\\CMB2_Type_Multi_Base.php:22\nStack trace:\n0 [internal function]: exceptions_error_handler(8, 'Array to string...', 'C:\\nginx\\html\\s...', 22, Array)\n1 ...\\wp-content\\plugins\\cmb2\\includes\\types\\CMB2_Type_Multi_Base.php(22): sprintf('\\t<option value=...', 0, ' selected='sele...', Array)\n2 ...\\wp-content\\plugins\\cmb2\\includes\\types\\CMB2_Type_Multi_Base.php(97): CMB2_Type_Multi_Base->select_option(Array, 1)\n3 ...\\wp-content\\plugins\\cmb2\\includes\\types\\CMB2_Type_Select.php(21): CMB2_Type_Multi_Base->concat_items()\n4 ...\\wp-content\\plugins\\cmb2\\includes\\CMB2_Types.php(447): CMB2_Type_Select->render()\n5 ...\\wp-content\\plugins\\rue\\includes\\cmb2-drag-drop-group-type.php(96): CMB2_Types->select(Array)\n6 ...\\wp-includes\\plugin.php(524): cmb2_render_rue_drag_drop_f in ...\\wp-content\\plugins\\cmb2\\includes\\types\\CMB2_Type_Multi_Base.php on line 22\n```\n. @tw2113 yes, I am trying to create my plugin, so functionality becomes theme independent.\nThat line points to this:\nphp\n$drag_table .= '<td class=\"column-type\">' . $field_type_object->select( array(\n    'name'    => $field_type_object->_name( \"[$fid][type]\" ),\n    'id'      => $field_type_object->_id( '_'.$fid.'_type' ),\n    'desc'    => '',\n) ) . '</td>';\nI tried, of course, pass to this function option/s, select_option/s, but unsuccessful.\nAnd here's the array what is passed to select_option\n``` php\nArray\n(\n    [value] => 0\n    [label] => Array\n        (\n            [name] => surname\n            [nicename] => Hard Surname\n            [pattern] => 11\n            [type] => 12\n            [read] => 5\n            [write] => 2\n        )\n)\n```\n. @tw2113 Even better. Stripped out everything else, isolating only this corner case.\nThere will be Rich User Editor page under Users\nselect-bug.zip\n. Function check_min_bug_fields() is showing $field->value because at that state DB is empty/ wiped. It just adds minimal required fields to be shown there.\nThe check_min_bug_fields() is called for whole select_bug field, which is called with $cmb->add_field( array(...)); on select-bug.php:153\nHow to add such callback to individual field $field_type_object->select( array(...) ); on cmb2-drag-drop-group-type.php:31?\n. Hi, just letting know, that I made workaround that still works as CMB2 html field & returns legit value on save.\n\nThanks for great tool. With this I create small community site where I belong to, and hiring external coders are not efficient or too pricey for quality I wan't. This saves a lot of effort and lets focus on things I wan't create to, not rather how to do basic security or even reinvent. It feels also really efficient piece of code as I filled DB with full-scale test data (~800 legacy member data with bunch of meta)  which results in dynamically generated (available to user) fields and it doesn't add any noticeable drag. Thanks again!\n. @eriktelepovsky sorry for delay. Didn't notice this notification in email.\nIn ideal case, process would return just string with HTML. As I look code what wrote back then, main idea is to create select html element manually. First, a bit of concept, what's happening.\nHere's loop that processes multi dimension array row by row, but structure is predictable and known:\nphp\n$fid = 0;\nforeach ( $field->options() as $row ) { // This is data we want to display as table\n    $row['fid'] = $fid++; // Adding whch row it is\n    $drag_table .= self::render_row($row, $field_type_object);\n    $fid++; // Field ID (actually ROW ID) is just growing number so HTML table when submitted as form fields, would be possible to parse into rows.\n}\nSo as I know how table should be formed in HTML and normally it is put together bit by bit from $field_type_object, but in this case it doesn't work that way, so I wrap it manually:\nphp\npublic static function render_row($row, $field_type_object){\n/* ... Other fields (columns) in regular way ... */\n    $return .= '<td class=\"column-type\"><select '.\n        'name=\"'. $field_type_object->_name( \"[$fid][type]\") . '\" '.\n        'id=\"'  . $field_type_object->_id( '_'.$fid.'_type' ). '\">';\n        foreach($field_types as $key => $value){ // $field_types possible entries defined elsewhere.\n            $return .= \"<option value='$key' \".($row['type']==$key?\"selected\":\"\").\">$value</option>\";\n        };\n    $return .= '</select></td>';\n/* ... Other fields (columns) ... */\n}. ",
    "lassemt": "@tw2113 It's a 2 year old feature request so I'm trying to recall why I created this feature request. I believe it was to have the ability to a add icon-picker to navigation items.\nOther usecases it could be for creating a better user experience for creating navigations where users can customize colors, add extra text, etc. to navigation items without having to know which specific css classes to add in the existing \"CSS-classes\" field. \nLooking at the existing navigation builder I can see it would 2 places where custom fields could be added. Custom fields to navigation items and new fields to the navigation settings.\nWith that said I don't think I've needed this functionality since I created this feature request, and by looking at others interest in this I think it's safe to say it's not something developers need to solve very often.. @tw2113 Funny enough I was in the same situation today. So I started looking into how I could implement custom fields into navigation menus based on this blog post.. While researching I found someone have already made an implementation using CMB2 in navigation items.. Out of the box I had problems with using this as a plugin, but after loading it into my theme using a PSR-4 autoloader I got it to work (the plugin is probably meant to be loaded with composer).\n@marsjaninzmarsa I see you have liked my proposal, you will probably find this interesting. . ",
    "cssjockey": "@hexagongirl I am trying to populate the group fields from a predefined PHP array and I've been trying really hard for last three days to populate these fields.\nI have a meta box with a group field, I can repeat and save the info in my database. The problem is I am not able to render the number of subfields based on the saved data, it only renders the first set.\nI'd appreciate if you can please share how you got this working.\nThanks.. ",
    "peterbenoit": "It appears this is related to the description field, which we were not providing. Not setting this field and/or leaving an empty value for this field leaves us with the same empty label. Any way to keep the label from rendering?\n. We've added it to our backlog to fix in a later sprint, but for now it's\nstill an issue.\nOn Oct 31, 2016 12:20 PM, \"Michael Beckwith\" notifications@github.com\nwrote:\n\nAny changes or updates to this one @peterbenoit\nhttps://github.com/peterbenoit ?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/769#issuecomment-257341006,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAeB4CXZbFYtddVXUvuzBK7XMmPJfyAiks5q5hVMgaJpZM4KW-AG\n.\n. I've asked the other developers in the group, and nobody really knows what\nthe config is. The best I can offer is some code to show you how were\ninitializing the controls\n\nOn Oct 31, 2016 12:29 PM, \"Michael Beckwith\" notifications@github.com\nwrote:\n\nNoted.\nProviding me the configuration code you used would expedite the process,\nwhile you're on backlog, I can be kicking the proverbial tires and perhaps\nfind a solution before then. For what it's worth.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/WebDevStudios/CMB2/issues/769#issuecomment-257343457,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAeB4FHOuR-YKw4w-vicigAfJN0_Q0O4ks5q5hdRgaJpZM4KW-AG\n.\n. Here's one place where we initialize a new CMB2 box, and add a checkbox field.\n\n```\n    $metabox_display_options = new_cmb2_box( array(\n        'id'           => $this->post_type_name . '_display_options',\n        'title'        => __( 'Display Options', 'cdc' ),\n        'object_types' => array( $this->post_type_name ),\n        'context'      => 'normal',\n        'priority'     => 'default',\n    ) );\n$metabox_display_options->add_field( array(\n    'name' => __( 'Show Expand/Collapse Options', 'cdc' ),\n    'id'   => $this->metadata_prefix . 'enable_expand_collapse',\n    'type' => 'checkbox',\n) );\n\n```\nThe rendered HTML contains two labels, identifying the same input\n<label for=\"cdc_enable_expand_collapse_all\">Show Expand/Collapse Options</label>\n<input type=\"checkbox\" class=\"cmb2-option cmb2-list\" name=\"cdc_enable_expand_collapse_all\" id=\"cdc_enable_expand_collapse_all\" value=\"on\"> \n<label for=\"cdc_enable_expand_collapse_all\"></label>\nI've tried several ways to hide the description so the second label doesn't render, without luck.\n. ",
    "proweb": "confirm.\nHave same issue about week\n\nis where any \"hotfix\"? can't work normal with clients site.\n. wow. thanks man, that UI what I was looking. Same issue.\nWith textarea field after_title\n```\nfunction islam_speakers_metaboxes() {\n$prefix = '_kfuislam_';\n\n\n$cmb_demo = new_cmb2_box( array(\n    'id'           => $prefix . 'metabox',\n    'title'        => esc_html__( '\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043f\u043e \u0434\u043e\u043a\u043b\u0430\u0434\u0447\u0438\u043a\u0443', 'cmb2' ),\n    'object_types' => array( 'speakers', ), // Post type\n    'context'       => 'after_title',\n    'priority'      => 'high',\n    'show_names'    => true, // Show field names on the left\n) );\n\n$cmb_demo->add_field( array(\n    'name'       => esc_html__( '\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c', 'cmb2' ),\n    'id'         => $prefix . 'text',\n    'type' => 'textarea',\n\n) );\n\n}\n```\n\n. @tw2113 downloaded trunk branch - bug still present \nhttps://www.useloom.com/share/fe990195610a4eabbf3387ac7e6988e8\n. ",
    "themevan": "Try the following codes\nif ( class_exists( 'RevSlider' ) ) {\n    $rev_slider = new RevSlider();\n    $sliders = $rev_slider->getAllSliderAliases();\n} else {\n    $sliders = array();\n}. ",
    "madvik": "Today, mobile should be a priority. ",
    "cichairs": "Thanks, all sorted now. \n. ",
    "djob195": "@jtsternberg  Thanks.\n. ",
    "DevWael": "thank you,\nit worked.\nkindly\nplease update the documentation with these data.\n. ",
    "rhyswynne": "Hi Justin,\nThanks for it. I've made the change. Let me know if you want it rewording.. ",
    "eduplessis": "I've made a custom field for typography ... you can check it \ncmb2-typography. @tw2113 for the if_fields  it's removing the field only if you put it at false... and it's true by default\nSo if you don't specify fields you gonna have all the fields.\nAnd for the \"type hint against string\" i've removed it... :). Nice thanks. ",
    "deeptiboddapati": "I just ran into this issue using CMB2 at work. What priority is this for y'all?. ",
    "pea": "Got it. I ended up just wrapping the input with 'before' and 'after':\nphp\n$cmb->add_group_field($maincontentId, [\n    'name' => 'Text',\n    'id'   => $this->prefix . 'text_text',\n    'type' => 'wysiwyg',\n    'before' => '<div data-content-type=\"text\">',\n    'after' => '</div>'\n]);\n. ",
    "daveredfern": "@jtsternberg great, thanks for the fast turn around and keep up the good work!. ",
    "ehrig": "You can use the text field type and manually set type to number using the attributes property. See this Gist: https://gist.github.com/jtsternberg/c09f5deb7d818d0d170b. ",
    "keithpickett": "Hi Michael,\nThanks for the response.  I actually ended up using get_term_meta() as an interim solution in case this was some sort of bug.  Your point makes sense.  I'm sure it's tied to the fact that it is a term taxonomy item, therefore the _termmeta table.  For anyone encountering this, here is what I am currently using as my solution (scammed from a Stack Overflow solution):\n```php\n    $cate = get_queried_object();\n    $cateID = $cate->term_id;\n    //echo $cateID;\n// Grab the metadata from the database\n    $prefix = '_cmb2_prod_style_image';\n$text = get_term_meta( $cateID, $prefix, true );\nesc_html( $text );  \n```\n. ",
    "iiandrade": "Maybe it's cool to deploy to the CMB2 core, so it might be a bit less complicated.\nThanks for the answers.... ",
    "alexis-magina": "I'm glad you like it.\nIf someone is interested, I just forked a plugin from harryfinn which allow fields to be analysed by YoastSEO WP Plugin. \nYou can find it here yoast-cmb2-field-analysis\nIt is basic for now and surely requests enhancements, but it works for text inputs and textareas. \nFeel free to contribute :-). ",
    "Sammaye": "Sure, here is the whole thing:\n```php\nclass Aircraft_Post{\npublic function __construct(){\n    register_post_type(\n        Adm()->get_Id('aircraft_post'),\n        [\n            'labels' => [\n                'name' => __('Aircraft'),\n                'singular_name' => __('Aircraft'),\n            ],\n            'public' => true,\n            'has_archive' => true,\n            'rewrite' => ['slug' => 'aircraft'], // my custom slug\n        ]\n    );\n    if(is_admin()){\n        //add_action('add_meta_boxes', [$this, 'add_metabox']);\n        //add_action('cmb2_init', function(){}, 1, 2 );\n        add_action('cmb2_admin_init', [$this, 'render_metabox']);\n    }\n}\n\npublic function meta_fields(){\n    return [\n        'cruise_speed' => ['text_small', 'integer', 'Cruise Speed', 'Cruise Speed'],\n        'range' => ['text_small', 'integer', 'Range', 'Range'],\n        'payload' => ['text_small', 'integer', 'Playload', 'Payload'],\n        'hold_width' => ['text_small', 'integer', 'Hold Width', 'Hold Width'],\n        'hold_height' => ['text_small', 'integer', 'Hold Height', 'Hold Height'],\n        'hold_length' => ['text_small', 'integer', 'Hold Length', 'Hold Length'],\n        'door_width' => ['text_small', 'integer', 'Door Width', 'Door Width'],\n        'door_height' => ['text_small', 'integer', 'Door Height', 'Door Height'],\n        'load_volume' => ['text_small', 'integer', 'Load Volume', 'Load Volume'],\n        'max_range' => ['text_small', 'integer', 'Max Range', 'Max Range'],\n        'layout' => ['text_small', 'integer', 'Layout', 'Layout'],\n        'passengers' => ['text_small', 'integer', 'Passengers', 'Passengers']\n    ];\n}\n\npublic function render_metabox(){\n\n    $cmb = new_cmb2_box([\n        'id' => Adm()->get_Id('specification_metabox'),\n        'title' => __('Aircraft Specification'),\n        'object_types' => [Adm()->get_Id('aircraft_post')], // Post type\n        'context' => 'normal',\n        'priority' => 'high',\n        'show_names' => true, // Show field names on the left\n    ]);\n\n    foreach($this->meta_fields() as $k => $v){\n        $val = get_post_meta($post->ID, $k, true);\n        $cmb->add_field( array(\n            'name' => __($v[2]),\n            'desc' => __($v[3]),\n            'id' => Adm()->get_Id($k),\n            'type' => $v[0],\n        ));\n    }\n\n    add_filter(\n        'cmb2_override_meta_save', \n        function($check, $args, $field_args, $field){\n            echo \"here\"; exit();\n            $id = str_replace(Adm()->get_Id(), '', $args['id']);\n            $field = $this->meta_fields()[$id];\n\n            $validator = $field[1];\n            if($validator === 'integer' && !preg_match('#^[0-9]+$#', $value)){\n                $_SESSION[Adm()->get_Id('admin_field_errors')][] = __($field[2] . ' is not a valid number');\n                return true;\n            }\n            return null;\n        }\n    );\n}\n\n}\n```. I moved add_filter there since from my understanding it should still work there. Fascinating, it works for you. Have you got CMB2 installed as a separate plugin?. There is one base class that just calls the constructor of this class, so apart from the get_Id you had pretty much the entire plugin. Aha, hang on I just see it, this hook works on create but not update... Ah, I have been a dumbass this whole time. Of course it wouldn't run, there was no detected change.\nIt runs now lol, sorry for wasting your time. Ah, interesting, maybe some unknown functionality? It definitely works if I change the incoming data, but doesn't if I don't. Ah yeah, it does make sense :) thanks. ",
    "brothman01": "First, in the theme functions.php file:\n```\n// CMB2 START\n/\n * Include and setup custom metaboxes and fields. (make sure you copy this file to outside the CMB2 directory)\n \n * Be sure to replace all instances of 'yourprefix_' with your project's prefix.\n * http://nacin.com/2010/05/11/in-wordpress-prefix-everything/\n \n * @category YourThemeOrPlugin\n * @package  Demo_CMB2\n * @license  http://www.opensource.org/licenses/gpl-license.php GPL v2.0 (or later)\n * @link     https://github.com/WebDevStudios/CMB2\n */\n/*\n * Get the bootstrap! If using the plugin from wordpress.org, REMOVE THIS!\n /\nif ( file_exists( dirname( FILE ) . '/cmb2/init.php' ) ) {\n    require_once dirname( FILE ) . '/cmb2/init.php';\n} elseif ( file_exists( dirname( FILE ) . '/CMB2/init.php' ) ) {\n    require_once dirname( FILE ) . '/CMB2/init.php';\n}\n/\n * Conditionally displays a metabox when used as a callback in the 'show_on_cb' cmb2_box parameter\n \n * @param  CMB2 object $cmb CMB2 object\n \n * @return bool             True if metabox should show\n */\nfunction yourprefix_show_if_front_page( $cmb ) {\n    // Don't show this metabox if it's not the front page template\n    if ( $cmb->object_id !== get_option( 'page_on_front' ) ) {\n        return false;\n    }\n    return true;\n}\n/\n * Conditionally displays a field when used as a callback in the 'show_on_cb' field parameter\n \n * @param  CMB2_Field object $field Field object\n \n * @return bool                     True if metabox should show\n */\nfunction yourprefix_hide_if_no_cats( $field ) {\n    // Don't show this field if not in the cats category\n    if ( ! has_tag( 'cats', $field->object_id ) ) {\n        return false;\n    }\n    return true;\n}\n/\n * Manually render a field.\n \n * @param  array      $field_args Array of field arguments.\n * @param  CMB2_Field $field      The field object\n /\nfunction yourprefix_render_row_cb( $field_args, $field ) {\n    $classes     = $field->row_classes();\n    $id          = $field->args( 'id' );\n    $label       = $field->args( 'name' );\n    $name        = $field->args( '_name' );\n    $value       = $field->escaped_value();\n    $description = $field->args( 'description' );\n    ?>\n    \n\n<?php echo $description; ?>\n\n    <?php\n}\n/\n * Manually render a field column display.\n \n * @param  array      $field_args Array of field arguments.\n * @param  CMB2_Field $field      The field object\n /\nfunction yourprefix_display_text_small_column( $field_args, $field ) {\n    ?>\n    <?php echo $field->escaped_value(); ?>\n<?php echo $field->args( 'description' ); ?>\n\n    <?php\n}\n/\n * Conditionally displays a message if the $post_id is 2\n \n * @param  array             $field_args Array of field parameters\n * @param  CMB2_Field object $field      Field object\n /\nfunction yourprefix_before_row_if_2( $field_args, $field ) {\n    if ( 2 == $field->object_id ) {\n        echo 'Testing \"before_row\" parameter (on $post_id 2)';\n    } else {\n        echo 'Testing \"before_row\" parameter (NOT on $post_id 2)';\n    }\n}\n// CMB2 END\n/ REGISTER CUSTOM POST TYPE FEATURED BLOG /\nrequire_once('post-types/featured_blog.php');\n```\nand, in the 'post-types/featured_blog.php' file: \n```\n<?php\nfunction custom_post_type() {\n$labels = array(\n    'name'                  => _x( 'Featured Blog ', 'Post Type General Name', 'text_domain' ),\n    'singular_name'         => _x( 'Featured Blog', 'Post Type Singular Name', 'text_domain' ),\n    'menu_name'             => __( 'Featured Blog', 'text_domain' ),\n    'name_admin_bar'        => __( 'Featured Blog', 'text_domain' ),\n    'archives'              => __( 'Featured Blog Archives', 'text_domain' ),\n    'parent_item_colon'     => __( 'Parent Item:', 'text_domain' ),\n    'all_items'             => __( 'All Posts', 'text_domain' ),\n    'add_new_item'          => __( 'Add New', 'text_domain' ),\n    'add_new'               => __( 'Add New', 'text_domain' ),\n    'new_item'              => __( 'New Featured Blog', 'text_domain' ),\n    'edit_item'             => __( 'Edit Featured Blog', 'text_domain' ),\n    'update_item'           => __( 'Update Featured Blog', 'text_domain' ),\n    'view_item'             => __( 'View Featured Blog', 'text_domain' ),\n    'search_items'          => __( 'Search Featured Blogs', 'text_domain' ),\n    'not_found'             => __( 'Not found', 'text_domain' ),\n    'not_found_in_trash'    => __( 'Not found in Trash', 'text_domain' ),\n    'featured_image'        => __( 'Featured Image', 'text_domain' ),\n    'set_featured_image'    => __( 'Set featured image', 'text_domain' ),\n    'remove_featured_image' => __( 'Remove featured image', 'text_domain' ),\n    'use_featured_image'    => __( 'Use as featured image', 'text_domain' ),\n    'insert_into_item'      => __( 'Insert into item', 'text_domain' ),\n    'uploaded_to_this_item' => __( 'Uploaded to this item', 'text_domain' ),\n    'items_list'            => __( 'Items list', 'text_domain' ),\n    'items_list_navigation' => __( 'Items list navigation', 'text_domain' ),\n    'filter_items_list'     => __( 'Filter items list', 'text_domain' ),\n);\n$args = array(\n    'label'                 => __( 'Post Type', 'text_domain' ),\n    'description'           => __( 'Post Type Description', 'text_domain' ),\n    'labels'                => $labels,\n    'supports'              => array( ),\n    'taxonomies'            => array( 'category', 'post_tag' ),\n    'hierarchical'          => false,\n    'public'                => true,\n    'show_ui'               => true,\n    'show_in_menu'          => true,\n    'menu_position'         => 5,\n    'show_in_admin_bar'     => true,\n    'show_in_nav_menus'     => true,\n    'can_export'            => true,\n    'has_archive'           => true,\n    'exclude_from_search'   => false,\n    'publicly_queryable'    => true,\n    'capability_type'       => 'page',\n    'menu_icon'             => 'dashicons-welcome-view-site',\n);\nregister_post_type( 'FeaturedBlog', $args );\n\n}\nadd_action( 'init', 'custom_post_type', 0 );\n// CMB2\nadd_action( 'cmb2_admin_init', 'yourprefix_register_demo_metabox' );\n/*\n * Hook in and add a demo metabox. Can only happen on the 'cmb2_admin_init' or 'cmb2_init' hook.\n /\nfunction yourprefix_register_demo_metabox() {\n    $prefix = 'yourprefix_demo_';\n/**\n * Sample metabox to demonstrate each field type included\n */\n$cmb_demo = new_cmb2_box( array(\n    'id'            => $prefix . 'metabox',\n    'title'         => esc_html__( 'Test Metabox', 'cmb2' ),\n    'object_types'  => array( 'FeaturedBlog', ), // Post type\n    // 'show_on_cb' => 'yourprefix_show_if_front_page', // function should return a bool value\n    // 'context'    => 'normal',\n    // 'priority'   => 'high',\n    // 'show_names' => true, // Show field names on the left\n    // 'cmb_styles' => false, // false to disable the CMB stylesheet\n    // 'closed'     => true, // true to keep the metabox closed by default\n    // 'classes'    => 'extra-class', // Extra cmb2-wrap classes\n    // 'classes_cb' => 'yourprefix_add_some_classes', // Add classes through a callback.\n) );\n\n$cmb_demo->add_field( array(\n    'name'       => esc_html__( 'Test Text', 'cmb2' ),\n    'desc'       => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'         => $prefix . 'text',\n    'type'       => 'text',\n    'show_on_cb' => 'yourprefix_hide_if_no_cats', // function should return a bool value\n    // 'sanitization_cb' => 'my_custom_sanitization', // custom sanitization callback parameter\n    // 'escape_cb'       => 'my_custom_escaping',  // custom escaping callback parameter\n    // 'on_front'        => false, // Optionally designate a field to wp-admin only\n    // 'repeatable'      => true,\n    // 'column'          => true, // Display field value in the admin post-listing columns\n) );\n\n$cmb_demo->add_field( array(\n    'name' => esc_html__( 'Test Text Small', 'cmb2' ),\n    'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'textsmall',\n    'type' => 'text_small',\n    // 'repeatable' => true,\n    // 'column' => array(\n    //  'name'     => esc_html__( 'Column Title', 'cmb2' ), // Set the admin column title\n    //  'position' => 2, // Set as the second column.\n    // );\n    // 'display_cb' => 'yourprefix_display_text_small_column', // Output the display of the column values through a callback.\n) );\n\n$cmb_demo->add_field( array(\n    'name' => esc_html__( 'Test Text Medium', 'cmb2' ),\n    'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'textmedium',\n    'type' => 'text_medium',\n) );\n\n$cmb_demo->add_field( array(\n    'name'       => esc_html__( 'Read-only Disabled Field', 'cmb2' ),\n    'desc'       => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'         => $prefix . 'readonly',\n    'type'       => 'text_medium',\n    'default'    => esc_attr__( 'Hey there, I\\'m a read-only field', 'cmb2' ),\n    'save_field' => false, // Disables the saving of this field.\n    'attributes' => array(\n        'disabled' => 'disabled',\n        'readonly' => 'readonly',\n    ),\n) );\n\n$cmb_demo->add_field( array(\n    'name' => esc_html__( 'Custom Rendered Field', 'cmb2' ),\n    'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'render_row_cb',\n    'type' => 'text',\n    'render_row_cb' => 'yourprefix_render_row_cb',\n) );\n\n$cmb_demo->add_field( array(\n    'name' => esc_html__( 'Website URL', 'cmb2' ),\n    'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'url',\n    'type' => 'text_url',\n    // 'protocols' => array('http', 'https', 'ftp', 'ftps', 'mailto', 'news', 'irc', 'gopher', 'nntp', 'feed', 'telnet'), // Array of allowed protocols\n    // 'repeatable' => true,\n) );\n\n$cmb_demo->add_field( array(\n    'name' => esc_html__( 'Test Text Email', 'cmb2' ),\n    'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'email',\n    'type' => 'text_email',\n    // 'repeatable' => true,\n) );\n\n$cmb_demo->add_field( array(\n    'name' => esc_html__( 'Test Time', 'cmb2' ),\n    'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'time',\n    'type' => 'text_time',\n    // 'time_format' => 'H:i', // Set to 24hr format\n) );\n\n$cmb_demo->add_field( array(\n    'name' => esc_html__( 'Time zone', 'cmb2' ),\n    'desc' => esc_html__( 'Time zone', 'cmb2' ),\n    'id'   => $prefix . 'timezone',\n    'type' => 'select_timezone',\n) );\n\n$cmb_demo->add_field( array(\n    'name' => esc_html__( 'Test Date Picker', 'cmb2' ),\n    'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'textdate',\n    'type' => 'text_date',\n    // 'date_format' => 'Y-m-d',\n) );\n\n$cmb_demo->add_field( array(\n    'name' => esc_html__( 'Test Date Picker (UNIX timestamp)', 'cmb2' ),\n    'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'textdate_timestamp',\n    'type' => 'text_date_timestamp',\n    // 'timezone_meta_key' => $prefix . 'timezone', // Optionally make this field honor the timezone selected in the select_timezone specified above\n) );\n\n$cmb_demo->add_field( array(\n    'name' => esc_html__( 'Test Date/Time Picker Combo (UNIX timestamp)', 'cmb2' ),\n    'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'datetime_timestamp',\n    'type' => 'text_datetime_timestamp',\n) );\n\n// This text_datetime_timestamp_timezone field type\n// is only compatible with PHP versions 5.3 or above.\n// Feel free to uncomment and use if your server meets the requirement\n// $cmb_demo->add_field( array(\n//  'name' => esc_html__( 'Test Date/Time Picker/Time zone Combo (serialized DateTime object)', 'cmb2' ),\n//  'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n//  'id'   => $prefix . 'datetime_timestamp_timezone',\n//  'type' => 'text_datetime_timestamp_timezone',\n// ) );\n\n$cmb_demo->add_field( array(\n    'name' => esc_html__( 'Test Money', 'cmb2' ),\n    'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'textmoney',\n    'type' => 'text_money',\n    // 'before_field' => '\u00a3', // override '$' symbol if needed\n    // 'repeatable' => true,\n) );\n\n$cmb_demo->add_field( array(\n    'name'    => esc_html__( 'Test Color Picker', 'cmb2' ),\n    'desc'    => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'      => $prefix . 'colorpicker',\n    'type'    => 'colorpicker',\n    'default' => '#ffffff',\n    // 'attributes' => array(\n    //  'data-colorpicker' => json_encode( array(\n    //      'palettes' => array( '#3dd0cc', '#ff834c', '#4fa2c0', '#0bc991', ),\n    //  ) ),\n    // ),\n) );\n\n$cmb_demo->add_field( array(\n    'name' => esc_html__( 'Test Text Area', 'cmb2' ),\n    'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'textarea',\n    'type' => 'textarea',\n) );\n\n$cmb_demo->add_field( array(\n    'name' => esc_html__( 'Test Text Area Small', 'cmb2' ),\n    'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'textareasmall',\n    'type' => 'textarea_small',\n) );\n\n$cmb_demo->add_field( array(\n    'name' => esc_html__( 'Test Text Area for Code', 'cmb2' ),\n    'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'textarea_code',\n    'type' => 'textarea_code',\n) );\n\n$cmb_demo->add_field( array(\n    'name' => esc_html__( 'Test Title Weeeee', 'cmb2' ),\n    'desc' => esc_html__( 'This is a title description', 'cmb2' ),\n    'id'   => $prefix . 'title',\n    'type' => 'title',\n) );\n\n$cmb_demo->add_field( array(\n    'name'             => esc_html__( 'Test Select', 'cmb2' ),\n    'desc'             => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'               => $prefix . 'select',\n    'type'             => 'select',\n    'show_option_none' => true,\n    'options'          => array(\n        'standard' => esc_html__( 'Option One', 'cmb2' ),\n        'custom'   => esc_html__( 'Option Two', 'cmb2' ),\n        'none'     => esc_html__( 'Option Three', 'cmb2' ),\n    ),\n) );\n\n$cmb_demo->add_field( array(\n    'name'             => esc_html__( 'Test Radio inline', 'cmb2' ),\n    'desc'             => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'               => $prefix . 'radio_inline',\n    'type'             => 'radio_inline',\n    'show_option_none' => 'No Selection',\n    'options'          => array(\n        'standard' => esc_html__( 'Option One', 'cmb2' ),\n        'custom'   => esc_html__( 'Option Two', 'cmb2' ),\n        'none'     => esc_html__( 'Option Three', 'cmb2' ),\n    ),\n) );\n\n$cmb_demo->add_field( array(\n    'name'    => esc_html__( 'Test Radio', 'cmb2' ),\n    'desc'    => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'      => $prefix . 'radio',\n    'type'    => 'radio',\n    'options' => array(\n        'option1' => esc_html__( 'Option One', 'cmb2' ),\n        'option2' => esc_html__( 'Option Two', 'cmb2' ),\n        'option3' => esc_html__( 'Option Three', 'cmb2' ),\n    ),\n) );\n\n$cmb_demo->add_field( array(\n    'name'     => esc_html__( 'Test Taxonomy Radio', 'cmb2' ),\n    'desc'     => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'       => $prefix . 'text_taxonomy_radio',\n    'type'     => 'taxonomy_radio',\n    'taxonomy' => 'category', // Taxonomy Slug\n    // 'inline'  => true, // Toggles display to inline\n) );\n\n$cmb_demo->add_field( array(\n    'name'     => esc_html__( 'Test Taxonomy Select', 'cmb2' ),\n    'desc'     => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'       => $prefix . 'taxonomy_select',\n    'type'     => 'taxonomy_select',\n    'taxonomy' => 'category', // Taxonomy Slug\n) );\n\n$cmb_demo->add_field( array(\n    'name'     => esc_html__( 'Test Taxonomy Multi Checkbox', 'cmb2' ),\n    'desc'     => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'       => $prefix . 'multitaxonomy',\n    'type'     => 'taxonomy_multicheck',\n    'taxonomy' => 'post_tag', // Taxonomy Slug\n    // 'inline'  => true, // Toggles display to inline\n) );\n\n$cmb_demo->add_field( array(\n    'name' => esc_html__( 'Test Checkbox', 'cmb2' ),\n    'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'checkbox',\n    'type' => 'checkbox',\n) );\n\n$cmb_demo->add_field( array(\n    'name'    => esc_html__( 'Test Multi Checkbox', 'cmb2' ),\n    'desc'    => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'      => $prefix . 'multicheckbox',\n    'type'    => 'multicheck',\n    // 'multiple' => true, // Store values in individual rows\n    'options' => array(\n        'check1' => esc_html__( 'Check One', 'cmb2' ),\n        'check2' => esc_html__( 'Check Two', 'cmb2' ),\n        'check3' => esc_html__( 'Check Three', 'cmb2' ),\n    ),\n    // 'inline'  => true, // Toggles display to inline\n) );\n\n$cmb_demo->add_field( array(\n    'name'    => esc_html__( 'Test wysiwyg', 'cmb2' ),\n    'desc'    => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'      => $prefix . 'wysiwyg',\n    'type'    => 'wysiwyg',\n    'options' => array( 'textarea_rows' => 5, ),\n) );\n\n$cmb_demo->add_field( array(\n    'name' => esc_html__( 'Test Image', 'cmb2' ),\n    'desc' => esc_html__( 'Upload an image or enter a URL.', 'cmb2' ),\n    'id'   => $prefix . 'image',\n    'type' => 'file',\n) );\n\n$cmb_demo->add_field( array(\n    'name'         => esc_html__( 'Multiple Files', 'cmb2' ),\n    'desc'         => esc_html__( 'Upload or add multiple images/attachments.', 'cmb2' ),\n    'id'           => $prefix . 'file_list',\n    'type'         => 'file_list',\n    'preview_size' => array( 100, 100 ), // Default: array( 50, 50 )\n) );\n\n$cmb_demo->add_field( array(\n    'name' => esc_html__( 'oEmbed', 'cmb2' ),\n    'desc' => sprintf(\n        /* translators: %s: link to codex.wordpress.org/Embeds */\n        esc_html__( 'Enter a youtube, twitter, or instagram URL. Supports services listed at %s.', 'cmb2' ),\n        '<a href=\"https://codex.wordpress.org/Embeds\">codex.wordpress.org/Embeds</a>'\n    ),\n    'id'   => $prefix . 'embed',\n    'type' => 'oembed',\n) );\n\n$cmb_demo->add_field( array(\n    'name'         => 'Testing Field Parameters',\n    'id'           => $prefix . 'parameters',\n    'type'         => 'text',\n    'before_row'   => 'yourprefix_before_row_if_2', // callback\n    'before'       => '<p>Testing <b>\"before\"</b> parameter</p>',\n    'before_field' => '<p>Testing <b>\"before_field\"</b> parameter</p>',\n    'after_field'  => '<p>Testing <b>\"after_field\"</b> parameter</p>',\n    'after'        => '<p>Testing <b>\"after\"</b> parameter</p>',\n    'after_row'    => '<p>Testing <b>\"after_row\"</b> parameter</p>',\n) );\n\n}\nadd_action( 'cmb2_admin_init', 'yourprefix_register_about_page_metabox' );\n/*\n * Hook in and add a metabox that only appears on the 'About' page\n /\nfunction yourprefix_register_about_page_metabox() {\n    $prefix = 'yourprefix_about_';\n/**\n * Metabox to be displayed on a single page ID\n */\n$cmb_about_page = new_cmb2_box( array(\n    'id'           => $prefix . 'metabox',\n    'title'        => esc_html__( 'About Page Metabox', 'cmb2' ),\n    'object_types' => array( 'page', ), // Post type\n    'context'      => 'normal',\n    'priority'     => 'high',\n    'show_names'   => true, // Show field names on the left\n    'show_on'      => array( 'id' => array( 2, ) ), // Specific post IDs to display this metabox\n) );\n\n$cmb_about_page->add_field( array(\n    'name' => esc_html__( 'Test Text', 'cmb2' ),\n    'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'text',\n    'type' => 'text',\n) );\n\n}\nadd_action( 'cmb2_admin_init', 'yourprefix_register_repeatable_group_field_metabox' );\n/*\n * Hook in and add a metabox to demonstrate repeatable grouped fields\n /\nfunction yourprefix_register_repeatable_group_field_metabox() {\n    $prefix = 'yourprefix_group_';\n/**\n * Repeatable Field Groups\n */\n$cmb_group = new_cmb2_box( array(\n    'id'           => $prefix . 'metabox',\n    'title'        => esc_html__( 'Repeating Field Group', 'cmb2' ),\n    'object_types' => array( 'page', ),\n) );\n\n// $group_field_id is the field id string, so in this case: $prefix . 'demo'\n$group_field_id = $cmb_group->add_field( array(\n    'id'          => $prefix . 'demo',\n    'type'        => 'group',\n    'description' => esc_html__( 'Generates reusable form entries', 'cmb2' ),\n    'options'     => array(\n        'group_title'   => esc_html__( 'Entry {#}', 'cmb2' ), // {#} gets replaced by row number\n        'add_button'    => esc_html__( 'Add Another Entry', 'cmb2' ),\n        'remove_button' => esc_html__( 'Remove Entry', 'cmb2' ),\n        'sortable'      => true, // beta\n        // 'closed'     => true, // true to have the groups closed by default\n    ),\n) );\n\n/**\n * Group fields works the same, except ids only need\n * to be unique to the group. Prefix is not needed.\n *\n * The parent field's id needs to be passed as the first argument.\n */\n$cmb_group->add_group_field( $group_field_id, array(\n    'name'       => esc_html__( 'Entry Title', 'cmb2' ),\n    'id'         => 'title',\n    'type'       => 'text',\n    // 'repeatable' => true, // Repeatable fields are supported w/in repeatable groups (for most types)\n) );\n\n$cmb_group->add_group_field( $group_field_id, array(\n    'name'        => esc_html__( 'Description', 'cmb2' ),\n    'description' => esc_html__( 'Write a short description for this entry', 'cmb2' ),\n    'id'          => 'description',\n    'type'        => 'textarea_small',\n) );\n\n$cmb_group->add_group_field( $group_field_id, array(\n    'name' => esc_html__( 'Entry Image', 'cmb2' ),\n    'id'   => 'image',\n    'type' => 'file',\n) );\n\n$cmb_group->add_group_field( $group_field_id, array(\n    'name' => esc_html__( 'Image Caption', 'cmb2' ),\n    'id'   => 'image_caption',\n    'type' => 'text',\n) );\n\n}\nadd_action( 'cmb2_admin_init', 'yourprefix_register_user_profile_metabox' );\n/*\n * Hook in and add a metabox to add fields to the user profile pages\n /\nfunction yourprefix_register_user_profile_metabox() {\n    $prefix = 'yourprefix_user_';\n/**\n * Metabox for the user profile screen\n */\n$cmb_user = new_cmb2_box( array(\n    'id'               => $prefix . 'edit',\n    'title'            => esc_html__( 'User Profile Metabox', 'cmb2' ), // Doesn't output for user boxes\n    'object_types'     => array( 'user' ), // Tells CMB2 to use user_meta vs post_meta\n    'show_names'       => true,\n    'new_user_section' => 'add-new-user', // where form will show on new user page. 'add-existing-user' is only other valid option.\n) );\n\n$cmb_user->add_field( array(\n    'name'     => esc_html__( 'Extra Info', 'cmb2' ),\n    'desc'     => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'       => $prefix . 'extra_info',\n    'type'     => 'title',\n    'on_front' => false,\n) );\n\n$cmb_user->add_field( array(\n    'name'    => esc_html__( 'Avatar', 'cmb2' ),\n    'desc'    => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'      => $prefix . 'avatar',\n    'type'    => 'file',\n) );\n\n$cmb_user->add_field( array(\n    'name' => esc_html__( 'Facebook URL', 'cmb2' ),\n    'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'facebookurl',\n    'type' => 'text_url',\n) );\n\n$cmb_user->add_field( array(\n    'name' => esc_html__( 'Twitter URL', 'cmb2' ),\n    'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'twitterurl',\n    'type' => 'text_url',\n) );\n\n$cmb_user->add_field( array(\n    'name' => esc_html__( 'Google+ URL', 'cmb2' ),\n    'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'googleplusurl',\n    'type' => 'text_url',\n) );\n\n$cmb_user->add_field( array(\n    'name' => esc_html__( 'Linkedin URL', 'cmb2' ),\n    'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'linkedinurl',\n    'type' => 'text_url',\n) );\n\n$cmb_user->add_field( array(\n    'name' => esc_html__( 'User Field', 'cmb2' ),\n    'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'user_text_field',\n    'type' => 'text',\n) );\n\n}\nadd_action( 'cmb2_admin_init', 'yourprefix_register_taxonomy_metabox' );\n/*\n * Hook in and add a metabox to add fields to taxonomy terms\n /\nfunction yourprefix_register_taxonomy_metabox() {\n    $prefix = 'yourprefix_term_';\n/**\n * Metabox to add fields to categories and tags\n */\n$cmb_term = new_cmb2_box( array(\n    'id'               => $prefix . 'edit',\n    'title'            => esc_html__( 'Category Metabox', 'cmb2' ), // Doesn't output for term boxes\n    'object_types'     => array( 'term' ), // Tells CMB2 to use term_meta vs post_meta\n    'taxonomies'       => array( 'category', 'post_tag' ), // Tells CMB2 which taxonomies should have these fields\n    // 'new_term_section' => true, // Will display in the \"Add New Category\" section\n) );\n\n$cmb_term->add_field( array(\n    'name'     => esc_html__( 'Extra Info', 'cmb2' ),\n    'desc'     => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'       => $prefix . 'extra_info',\n    'type'     => 'title',\n    'on_front' => false,\n) );\n\n$cmb_term->add_field( array(\n    'name' => esc_html__( 'Term Image', 'cmb2' ),\n    'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'avatar',\n    'type' => 'file',\n) );\n\n$cmb_term->add_field( array(\n    'name' => esc_html__( 'Arbitrary Term Field', 'cmb2' ),\n    'desc' => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'term_text_field',\n    'type' => 'text',\n) );\n\n}\nadd_action( 'cmb2_admin_init', 'yourprefix_register_theme_options_metabox' );\n/*\n * Hook in and register a metabox to handle a theme options page\n /\nfunction yourprefix_register_theme_options_metabox() {\n$option_key = 'yourprefix_theme_options';\n\n/**\n * Metabox for an options page. Will not be added automatically, but needs to be called with\n * the `cmb2_metabox_form` helper function. See https://github.com/WebDevStudios/CMB2/wiki for more info.\n */\n$cmb_options = new_cmb2_box( array(\n    'id'      => $option_key . 'page',\n    'title'   => esc_html__( 'Theme Options Metabox', 'cmb2' ),\n    'hookup'  => false, // Do not need the normal user/post hookup\n    'show_on' => array(\n        // These are important, don't remove\n        'key'   => 'options-page',\n        'value' => array( $option_key )\n    ),\n) );\n\n/**\n * Options fields ids only need\n * to be unique within this option group.\n * Prefix is not needed.\n */\n$cmb_options->add_field( array(\n    'name'    => esc_html__( 'Site Background Color', 'cmb2' ),\n    'desc'    => esc_html__( 'field description (optional)', 'cmb2' ),\n    'id'      => 'bg_color',\n    'type'    => 'colorpicker',\n    'default' => '#ffffff',\n) );\n\n}\n/\n * Only show this box in the CMB2 REST API if the user is logged in.\n \n * @param  bool                 $is_allowed     Whether this box and its fields are allowed to be viewed.\n * @param  CMB2_REST_Controller $cmb_controller The controller object.\n *                                              CMB2 object available via $cmb_controller->rest_box->cmb.\n \n * @return bool                 Whether this box and its fields are allowed to be viewed.\n */\nfunction yourprefix_limit_rest_view_to_logged_in_users( $is_allowed, $cmb_controller ) {\n    if ( ! is_user_logged_in() ) {\n        $is_allowed = false;\n    }\nreturn $is_allowed;\n\n}\nadd_action( 'cmb2_init', 'yourprefix_register_rest_api_box' );\n/*\n * Hook in and add a box to be available in the CMB2 REST API. Can only happen on the 'cmb2_init' hook.\n * More info: https://github.com/WebDevStudios/CMB2/wiki/REST-API\n /\nfunction yourprefix_register_rest_api_box() {\n    $prefix = 'yourprefix_rest_';\n$cmb_rest = new_cmb2_box( array(\n    'id'            => $prefix . 'metabox',\n    'title'         => esc_html__( 'REST Test Box', 'cmb2' ),\n    'object_types'  => array( 'page', ), // Post type\n    'show_in_rest' => WP_REST_Server::ALLMETHODS, // WP_REST_Server::READABLE|WP_REST_Server::EDITABLE, // Determines which HTTP methods the box is visible in.\n    // Optional callback to limit box visibility.\n    // See: https://github.com/WebDevStudios/CMB2/wiki/REST-API#permissions\n    // 'get_box_permissions_check_cb' => 'yourprefix_limit_rest_view_to_logged_in_users',\n) );\n\n$cmb_rest->add_field( array(\n    'name'       => esc_html__( 'REST Test Text', 'cmb2' ),\n    'desc'       => esc_html__( 'Will show in the REST API for this box and for pages.', 'cmb2' ),\n    'id'         => $prefix . 'text',\n    'type'       => 'text',\n) );\n\n$cmb_rest->add_field( array(\n    'name'       => esc_html__( 'REST Editable Test Text', 'cmb2' ),\n    'desc'       => esc_html__( 'Will show in REST API \"editable\" contexts only (`POST` requests).', 'cmb2' ),\n    'id'         => $prefix . 'editable_text',\n    'type'       => 'text',\n    'show_in_rest' => WP_REST_Server::EDITABLE// WP_REST_Server::ALLMETHODS|WP_REST_Server::READABLE, // Determines which HTTP methods the field is visible in. Will override the cmb2_box 'show_in_rest' param.\n) );\n\n}\n```\nI know I have a ton of extra fields in my CPT, but I was going to cut out the extras after I got the CMB2 to work, but I never got that far.  To clarfy, the fields are showing up, but any values entered are not saving.\nit does not look like the values are present in the postmeta table.\n. hmm, I changed the post type from 'FeaturedBlog' to 'featured-blog' and it partly worked...\nthe boxes in the featured-blog post type save there values on update, but when I press the update button after entering/changing a value, my browser tries to load 'http://www.benrothman.org/wp-admin/post.php' but the page doesnt actually load and the browser says 'The www.benrothman.org page isn\u2019t working'. actually its working now.  All I did was take out the extra fields and now it works.  It was the previous solution you gave, thanks!. Yes, thank you. ",
    "ManUtopiK": "I got the same problem.\nHere is my code:\nphp\n$cmb->add_field( array(\n        'name' => __('Date et heure', 'ED'),\n        'id'   => 'custom_event_timestamp',\n        'type' => 'text_datetime_timestamp',\n        'date_format' => 'd/m/Y',\n        'time_format' => 'H:i'\n    ) );\nIt's works for time_format but not when date_format is set. Values disappears when I update post.\nWhen I comment the line date_format, everything works well.. I didn't see that seems fixed with #598 . ",
    "ahmedsheko": "hai. ",
    "ADC07": "Sorry, I think I forgot to mention one key aspect, namely that I was using CMB2 as a WP plugin and not directly including it in mine. Perhaps this is what differs?. Hmm... then it must be something else. I've just re-checked and apparently I do not have any enabled plugins in my WP installation.. ",
    "Cai333": "@noquierouser  #848 Should hopefully fix this. Changing the default size isn't going to happen for back-compatibility reasons (I did suggest it though).. I'm currently testing a fix for this which works for the default named sizes ('thumbnail', 'medium', 'large', 'full-size'), but doesn't work for custom defined sizes (with add_image_size( 'custom-size' ... );) although behaviour with custom sizes would be the same as the current.. Thanks for the review @jtsternberg \nCompletely agree on all points; I've now moved all the repeating logic to utility methods. Your suggestion on hooking the filter makes much more sense too. Also reverted the changes to the defaults. Think I've addressed all your initial points, it's late though!\nI moved the inline styles to the CSS file but  my compiled CSS is totally different, uses spaces instead of tabs etc (the diff basically shows every line as replaced) so I just committed the sass file for now.. @jtsternberg did you get a chance to test this at all?\nI've been a bit snowed under myself but I'm going to try and do a bit more thorough testing on it in the next few days (I want to get this in a project I'm working on now).. No problem at all @jtsternberg . The file field stores the attachment ID (in the form of $id . '_id') so you can use that to get any size you need (the image is still uploaded with your custom sizes as any image is). You can do something like the example in the wiki:\n$image = wp_get_attachment_image( get_post_meta( get_the_ID(), 'wiki_test_image_id', 1 ), 'your-custom-size' );\n\nDoes that not give you what you need? Alternatively, can't you just use the built-in WP featured image on your custom post type as you do with posts?\n. Honestly, it was a struggle trying to decide where to hook this in, this sounds better!. The 'auto' height is needed to stop the images being squashed if they're over the max-height that's set in the css, adding it here is probably just lazy though. I'll look at just adding it to the existing css.. ",
    "psaikali": "Awesome, it's working.\nThanks a lot !!. ",
    "villeristi": "@jtsternberg @tw2113 any thoughts?. ",
    "liuzhiqiang": "I think javascript validation is not safe,  any hook for php validation?. ",
    "cfxd": "I'm using CMB2 on a new project and it's a bit frustrating that the query_args on this field can be very easily circumvented while uploading, unless there's another argument I'm not seeing or a usage strategy I'm misunderstanding.\nEven with query_args set, a user can still upload a restricted file type and then immediately click \"Use this file\" in the Media Uploader, which disregards any restrictions.\nJust for comparison, this is something ACF handles quite well.\nEdit\nAfter some quick searching, it seems some validation of uploads may be possible using the wp_handle_upload_prefilter filter.. ",
    "franmip": "Hi, how can i get the url file to display it into an anchor tag (Text\nThanks!. @tw2113 thanks so much!!. ",
    "Areha11Fz": "Yes, i'm trying to find a solution as to why on the next row the default value doesn't come out automatically. ok sorry, i got error with my ModSec. it's fixed now :). ",
    "kraftner": "Yeah, that is what I thought too. I mainly wanted to achieve two things here:\n\nDiscuss if that generally is a safe (in the sense of a security-focused) approach to go with and what the advantages and disadvantages would be.\nI already noticed that sanitize_textarea_field()has the advantage of leaving special chars like & as they are, while wp_kses_postshines in the handling of HTML (not stripping allowed html tags out completely, keeping the content of disallowed tags).\nIf and how this should be covered in the Wiki.. \n",
    "markduwe": "Could be. \nThis is along the lines of an empty field saving on page update, so that \nphp\nif($entries != '') {\n// do something\n} else {\n// something else \n}\nNever fires the 'something else' part. . ",
    "guramsutidze": "My coworker has been trying to explain to you for several days that the CMB2 group type field has bug while using an individual field.\nWhen does the bug occur?   How to provoke it?\nthis requires:\n1) To register a new post type \n2) To create individual field by using CMB2 \n3) To create other fields where there would be a text and the second field created by us in the group type of the field. \n4) Click on Add Group \nThe code is given below and the bug is shown on the screenshot.\n\n1. Post Type\n```\nadd_action('init', function() {\n$args = [\n    'labels'                 => [\n       'name'                 => 'Test',\n       'singular_name'  => 'Test',\n       'menu_name'      => 'Test'\n       ],\n           'description'              => 'Description',\n    'public'                     => true,\n    'publicly_queryable' => true,\n    'show_ui'                  => true,\n    'show_in_menu'       => true,\n    'query_var'               => true,\n    'has_archive'            => true,\n    'hierarchical'             => false,\n    'menu_position'        => null,\n    'supports'                  => ['title', 'editor']\n];\n\nregister_post_type('test', $args);\n\n});\n```\n2. Custom Field\n```\nadd_action('cmb2_init', function() {\nadd_action('cmb2_render_tw2113', function($field, $escaped_value, $object_id, $object_type, $field_type)\n{\n\n    echo 'New item takes value from previous one <br />';\n    echo '----- ----- ---';\n    var_dump($escaped_value);\n\n}, 10, 5);\n\n});\n```\n3. CMB2 Fields\n```\nadd_action('cmb2_init', function() {\n$cmb = new_cmb2_box([\n    'id'           => 'test',\n    'title'        => 'Test',\n    'object_types' => ['test'],\n    'context'      => 'normal',\n    'priority'     => 'default'\n]);\n\n$group_field_id = $cmb -> add_field([\n    'id'   => 'group',\n    'type' => 'group'\n\n]);\n\n$cmb -> add_group_field($group_field_id, [\n\n    'id'   => 'text',\n    'name' => 'Text Field',\n    'type' => 'text'\n\n]);\n\n$cmb -> add_group_field($group_field_id, [\n\n    'id'   => 'tw2113',\n    'name' => 'Custom Field',\n    'type' => 'tw2113'\n\n]);\n\n}, 20, 2);\n```\nAs you  see, while adding the new Repeater Item, the field tw2113 has recieved  the meaning of the upper tw2113 field, $field, $escaped_value, $object_id, $object_type, $field_type in variables, from which i typed $escaped_value where it is obvious that it has recieved the meaning of upper item which is input in a tw2113 field.\nIs everything clear now?. @tw2113 Layouts are different because i have default styles of CMB2 turned off and in order to improve repeater and visual i am using my own  css and javascript. There is nothing to do with layout, the bug is on the server side. PHP bugs it, not css/js. if you are not competent about it, just let other developers of WebDevStudio to help me here and fix this bug in the next release of CMB2.. let's just repeat what i say step by step...\n1.there is the repeater created  with the code  i gave you, with field and with custom field which is aslo text input\n2. enter  the values into both fields,  your name in the first field and your surname in the second field and then click on the post update. \n3. click on the Add Group of the repeater in order to add a new item and observe to the typed value. surname field (custom field) will take the meaning from the previous item. \nP.S. after filling the first item, post must be saved and then be added a new item.\n. While trying to simplify the perception of the code for you, i've accidentlly missed the part of carrying out input field. it is logical that you would not be able to cause the bug without this. please, replace that part of that code with this....\n\nFill this custom input field and then click on save post\nPress Add Group and you will see BUG\n\n```\nadd_action('cmb2_init', function() {\nadd_action('cmb2_render_tw2113', function($field, $escaped_value, $object_id, $object_type, $field_type)\n{\n\n    echo 'New item takes value from previous one <br />';\n    echo '----- ----- ---';\n    var_dump($escaped_value);\n\n    echo $field_type -> input([\n\n        'type'        => 'text',\n        'name'        => $field -> args('id'),\n        'class'       => 'regular-text'\n\n    ]);\n\n}, 10, 5);\n\n});\n```. If the custom field could not be saved after filling and then saving the first item, it is logical that while adding the second item var_dump would be still empty. I have no idea why the value is not saved in your case, but if i were you, i would think about the couse.. ",
    "kidatart": "@tw2113 After much head scratching I dived into the CMB2 class and found the following event.\ncmb2_{$this->object_type()}_process_fields_{$this->cmb_id}\ncmb2_[post]_process_fields_[metabox id]\nI just run my function with this event. seems to be doing the job so far, it also allows me to check current post meta with incoming meta - really useful.\nThanks for looking into my ticket.\nJ. ",
    "chomomahesh": "\n\n\ni think issue is firefox not support html 5, is there way to change cmb2 . Thank you jtsternberg. . ",
    "Kaleidosko": "Hi,\nthank you for your response. Indeed this is an interesting idea. Currently I'm thinking to write a small jquery script. Is there an easy way to insert snippets (like a text-box or a label-box)? If I succeed, I will share that script here also :)\nGreetings\nedit: I'll try to append a script with after_field :). Here we go as promised. This Snippet adds to both types (image and file) an \"Insert\" Button. \nI use the MutationObserver to monitor the addition and deletion of files. \nWhen a change is registered, the \"Insert\" Button is added to the new element(s). \nAlso I prevent opening the file-select dialog when clicking on the Insert Button with two lines.\nWhen the Insert Button is clicked, the URL is added to the editor.\nevent.stopPropagation();   <- prevent the parent click function (open file dialog)\nevent.preventDefault(); <- prevent jumping to the top of the page\nHere comes the code:\n```\n$custom_button_string = '\nvar id_from_file_list = \"cmb2_downloadliste\";\nvar observer = new MutationObserver(function(e) {\n    // Images with preview\n    jQuery(\"#\"+id_from_file_list+\"-status&gt;li.img-status&gt;p\").each(function(){\n        if(jQuery(this).find(\".insert_to_editor\").length == 0) {\n            jQuery(this).append(\"<a href=\\\"#\\\" class=\\\"insert_to_editor\\\" data-type=\\\"image\\\">Insert</a>\");\n        }\n    });\n    // Other files\n    jQuery(\"#\"+id_from_file_list+\"-status&gt;li.file-status&gt;a\").last().each(function(){\n        if(jQuery(this).parent().find(\".insert_to_editor\").length == 0) {\n            jQuery(this).after(\" / <a href=\\\"#\\\" class=\\\"insert_to_editor\\\" data-type=\\\"other\\\">Insert</a>\");\n        }\n    });\n});\nobserver.observe(jQuery(\"#\"+id_from_file_list+\"-status\")[0], { childList: true });\njQuery(\"#\"+id_from_file_list+\"-status\").on(\"click\", \".insert_to_editor\", function(event){\n    event.stopPropagation();\n    event.preventDefault();</p>\n<pre><code>// Find URL of the element\nvar getUrl = \"\";\nif(jQuery(this).data(\"type\")==\"image\") {\n    getUrl = jQuery(this).closest(\"li\").find(\"img\").attr(\"src\");\n} else {\n    getUrl = jQuery(this).closest(\"li\").find(\"a\").first().attr(\"href\");\n}\n\n// Insert in SimpleMDE Editor\npos = simplemde.codemirror.getCursor();\nsimplemde.codemirror.setSelection(pos, pos);\nsimplemde.codemirror.replaceSelection(getUrl);\n</code></pre>\n<p>});\n';\n$cmb->add_field(array(\n        'name' => 'Download',\n        'desc' => '....',\n        'id' => 'cmb2_downloadlist',\n        'type' => 'file_list',\n    'after_field' => $custom_button_string\n ));\n```\nBecause I use SimpleMDE you have to discover how the standard Editor inserts text at cursor position. The standard MCE (?) should do it this way (no guarantee):\ntinymce.activeEditor.execCommand('mceInsertContent', false, myText);\nSimpleMDE / CodeMirror does it this way:\npos = simplemde.codemirror.getCursor();\nsimplemde.codemirror.setSelection(pos, pos);\nsimplemde.codemirror.replaceSelection(\"TEST\");\nGreetings\nKal\n. ",
    "1cgonza": "@tw2113 I've edited the comment to include the CMB2 configuration. Thanks in advance!. @tw2113 Yes! that works, thanks for all the details and clear solution. . @jtsternberg I really appreciate your answer. \nOne thing I noticed is that once I set the attributes in this way, the ones that should be set by CMB2 seem to get overwritten. Instead of getting an input with the attribute data-timepicker=\"{\"stepMinute\":1,\"timeFormat\":\"HH:mm:ss\"}\" I get data-timepicker=\"{\"stepMinute\":1}\".\nSo in my case, I was not able to see the seconds field anymore. What ended up working for me was to set the timeFormat again as an attribute, since the option 'time_format' => 'H:i:s' was not applied anymore in the attributes.\nI like this way of solving the issue since I don't have to set a global filter, but it is unfortunate that I have to set the time format twice:\nphp\n$meta->add_field( array(\n    'id'          => $prefix . 'duracion',\n    'name'        => 'Duraci\u00f3n',\n    'type'        => 'text_time',\n    'time_format' => 'H:i:s', // I still need this so it gets properly formated in the input\n    'attributes' => array(\n      'data-timepicker' => json_encode( array(\n            'stepMinute' => 1,\n            'timeFormat' => 'HH:mm:ss'\n      ) ),\n    ),\n) );. ",
    "deenison": "waiting forward for this \ud83d\ude04 . ",
    "upstreamplugin": "@deenison Do we know if this was ever resolved?. ",
    "timothyjensen": "I am having a related issue with the code that @gyrus referred to: https://github.com/CMB2/CMB2/blob/trunk/includes/types/CMB2_Type_Multi_Base.php#L81-L83.\nMy issue is that I'm dynamically populating the select options with Gravity Forms field IDs, so sometimes the value is a float, such as 1.3 (for example, the first-name field in a Gravity Form).  However, the code above converts the value from, say 1.3 to 1.  ~CMB2 already does a good job of escaping the data before this point, so perhaps it's safe to remove the intval() function call on line 82.~ Commenting out those lines fixes the issue but, but it breaks all other option values that are numeric.. @jtsternberg Thanks for addressing this.  Unfortunately the code you suggested doesn't quite fix the issue.  I should have been more accurate in my previous description; the option value is saved as a string in the database. Because of that is_float( $value ) returns false when retrieving the meta value.  Here's a screenshot of what I'm talking about: http://cloud.timj.us/0Q1r152U0u2d.. Works perfectly!. Also tested #1013 with a leading zero value like @gyrus originally reported, and that issue is now resolved as well.. ",
    "guiluxdj": "i ve tested with\n```\nadd_action( 'save_post', array($this, 'geo_wal'), 10, 2 );\nfunction geo_wal ( $post_id, $post ) {\n\n    update_post_meta( $post_id, 'city', 'mycity' );  //not work, no change in DB\n     update_post_meta( $post_id, 'meta_test', 'value meta'); // work Change ok in DB\n}\n\n```\nMeta_test is not a CMB2 field, city is a CMB2 field\nI don't understand... it's the same syntax. Thanks for your answer michael & justin.\nYes, I would like when I press update,\n1) retrieve the field 'city'\n2) pass the value to my geolocation function\n3) Retrieve this value and store it in a meta_key \"coordinated\" wich is not on UI\nlike this\n$city= sanitize_text_field($_POST['city']);\n$encode = $this->geolocalize( $city );\nupdate_post_meta($post_id,'coordonate',$encode);\ni will try to test cmb2_override_city_meta_save, sanitization_cb and escape_cb\n```\nadd_filter( 'cmb2_override_city_meta_save',  'savegeo' );\nfunction savegeo( $value, $args, $field_args, $field ) {\n       update_post_meta( $post_id, 'coordonate', 'test' );\n       return null;\n}\n```\nI do not know if I do it properly but the meta_key \"coordinate\" is not saved, city is saved\n\n. \nI did not succeed using your functions but with save_post it works, just change the priority.\nIt did not work because the value was overwritten by the \"save_post\" of CMB2 I suppose\nThanks for your help. ",
    "wpfan1000": "With form_top (no issue):\n\nWith before_permalink - exact same behaviour as after_title\n. I am a complete amateur compared to you guys but as a possibility I have noticed this happening to me sometimes when I have an incomplete html closing tag eg  is missing) when modifying templates....... I just realized - regarding before_permalink - I had not saved the post and so no permalink field had yet been displayed - so it may look a little different then - sorry but at the moment I don't have the time to test.....\nHowever without saving, it looks exactly like after_title, so I imagine it is still an issue with before_permalink. ",
    "rubengc": "Thanks! \ud83d\ude04 . I got this done using before/after parameters but I want to build a plugin where you get the html needed from a single parameter. I see CMB2 has the actions cmb2_before_form and cmb2_after_form, exists the posibility to add similar actions for each field row? (cmb2_before_field_row and cmb2_after_field_row). Yes, I know this parameters but I want to access this from a plugin and output html when user specifies a parameter in this fields, something like:\n```php\n// Field definition by an user that has my plugin and want to use on this field\n$cmb->add_field( array(\n    'name' => __( 'Field name', 'cmb2' ),\n    'id'   => '_testing_a_plugin',\n    'type' => 'text',\n    'parameter_from_a_plugin' => true,\n) );\n// My plugin\nadd_action( 'cmb2_before_field_row', 'before_row', 10, 2 );\nfunction before_row( $field_args, $field ) {\n    if( isset( $field_args['parameter_from_a_plugin'] ) && (bool) $field_args['parameter_from_a_plugin'] ) {\n        // Output html from plugin before row output\n    }\n}\nadd_action( 'cmb2_after_field_row', 'after_row', 10, 2 );\nfunction after_row( $field_args, $field ) {\n    if( isset( $field_args['parameter_from_a_plugin'] ) && (bool) $field_args['parameter_from_a_plugin'] ) {\n        // Output html from plugin after row output\n    }\n}\n```. Check the plugin here: https://github.com/rubengc/cmb2-field-js-controls\nI want to output this plugin content if user define js_controls parameter as bool true or as array not using before_row and after_row like in plugin example\nIs possible to do this in current version of CMB2?. Oh, so, Is posible to add this filters? If you are ok with this hooks I can PR the changes. Nice! I will PR this changes this afternoon. I opened some issues without reponse and the author have not activity from december of 2016\nI based mine on his one, but I make a lot of changes (fixes and improvements) that turns the field into a new one. @bradp this PR only has 6 changes at readme.md \nIt needs refresh?. Ok, I will publish a new field (jQuery UI position) s\nShould I add this new field in this PR or pull a new one?. Conflicts solved (I think). \ud83d\udc4d . Well, I fixed it using \"Next:\" for default parameter value\nAnyway I followed docs recommendations on use default for values and default_cb for callbacks, so I does not expect that default will trigger any notice/error (error comes from next() call)\nI hope default could be turned into a not function caller in the future to avoid this\nThanks for your help and if you are want then close it. IMPORTANT!\nWriting this PR I noticed a wrong hooks order that needs to be solved at CMB2.php\nHooks are called in this order:\ncmb2_before_form\ncmb2_before_{$object_type}_form_{$cmb_id}\ncmb2_after_form\ncmb2_after_{$object_type}_form_{$cmb_id}\nAnd they should be called at this order:\ncmb2_before_form\ncmb2_before_{$object_type}_form_{$cmb_id}\ncmb2_after_{$object_type}_form_{$cmb_id}\ncmb2_after_form\nWhy? Because this means call this hooks is really dangerous because you could break your html if you expect a relative order, for example, if two plugins using this hooks to print something, the most common workflow is use same relative callbacks (cmb2_before_form and cmb2_after_form) or (cmb2_before_{$object_type}_form_{$cmb_id} and cmb2_after_{$object_type}_form_{$cmb_id}) \nA visual example with two plugins (Plugin 1 and Plugin 2):\nCurrent order:\ncmb2_before_form Plugin 1 opens a div\ncmb2_before_{$object_type}_form_{$cmb_id} Plugin 2 prints a p\ncmb2_after_form  Plugin 1 closes the div\ncmb2_after_{$object_type}_form_{$cmb_id} Plugin 2 closes the p\nResult:\nhtml\n<div>\n<p>\n</div>\n</p>\nNew order:\ncmb2_before_form Plugin 1 opens a div\ncmb2_before_{$object_type}_form_{$cmb_id} Plugin 2 prints a p\ncmb2_after_{$object_type}_form_{$cmb_id} Plugin 2 closes the p\ncmb2_after_form  Plugin 1 closes the div\nResult:\nhtml\n<div>\n<p>\n</p>\n</div>\nI keep the same order as before/after form to this PR because I do not know if this is the desired order, anyway if you confirm that you want to change this order, I will update this PR too. New hooks order to match coming CMB2 PR:\ncmb2_before_field_row\ncmb2_before_{$field_type}field_row\ncmb2_after{$field_type}_field_row\ncmb2_after_field_row\nOk @jtsternberg I will PR it in a separate PR with changelog notes. Dat github desktop :/\nWhat do you mean @jtsternberg ?. I am not able to open a new PR without this field row hooks and the amount of reverts generated from github desktop app, so on get this pulled (or declined) I will folk again CMB2 repo. No news about this?. ping @jtsternberg . About this PR, I just did a plugin for cmb2 to add tabs that uses this hooks to output div open/close tags\nhttps://github.com/rubengc/cmb2-tabs\n. Note: The rule should be to .cmb-th +.cmb-td to avoid errors if metabox has defined show_names as false. Ping to @jtsternberg. Digging on CMB2 internals I found there is an javascript event to override the media frame\nA new issue appears with a wrong asignment of the javascript variables \nI am trying to change a specific field modal with the parameter frame: 'post' to enable the option \"Insert from URL\" but modal var is not well assigned and makes the first time the media modal is opened with the default paratemers instead with my own (the second time, modal has been updated successfully)\nExplanation:\nAt cmb2.js, in _handleMedia function there is where the problem comes:\n```javascript\n    cmb._handleMedia = function( formfield, isList ) {\n                // code code code ...\n    // Create the media frame.\n    media.frames[ media.field ] = modal = wp.media( {\n        title: cmb.metabox().find('label[for=\"' + media.field + '\"]').text(),\n        library : media.fieldData.queryargs || {},\n        button: {\n            text: l10n.strings[ isList ? 'upload_files' : 'upload_file' ]\n        },\n        multiple: isList ? 'add' : false\n    } );\n\n    cmb.trigger( 'cmb_media_modal_init', media );\n\n    // code code code ...\n\n    // Finally, open the modal\n    modal.open();\n};\n\n```\nIn cmb_media_modal_init event I am able to modify media variable, but not modal\nA way to fix it and keep backward compatibility is:\n```javascript\n    cmb._handleMedia = function( formfield, isList ) {\n                // code code code ...\n    // Create the media frame.\n    media.frames[ media.field ] = wp.media( {\n        title: cmb.metabox().find('label[for=\"' + media.field + '\"]').text(),\n        library : media.fieldData.queryargs || {},\n        button: {\n            text: l10n.strings[ isList ? 'upload_files' : 'upload_file' ]\n        },\n        multiple: isList ? 'add' : false\n    } );\n\n    cmb.trigger( 'cmb_media_modal_init', media );\n\n            // Assign modal after trigger cmb_media_modal_init event\n    modal = media.frames[ media.field ];\n\n    // code code code ...\n\n    // Finally, open the modal\n    modal.open();\n};\n\n```. Thanks @jtsternberg you rocks. Oh Also I found exactly what happens:\n1 - I set my group name as my-widget[1][group] (the [1] is autogenerated from wordpress widget class)\n2 - On add a groups I should receive this names:\nmy-widget[1][group][0][field]\nmy-widget[1][group][1][field]\nmy-widget[1][group][2][field]\n3 - But the replace function do this:\nmy-widget[1][group][0][field]\nmy-widget[1][group][1][field]\nmy-widget[2][group][1][field] ('['+ prevNum +']' here is [1] so matches with the group name). Just a posible fix\n```javascript\ncmb.replaceLast = function( str, search, replacement ) {\n    var n = str.lastIndexOf(search);\n    return str.slice(0, n) + str.slice(n).replace(search, replacement);\n};\n//...\nvar newName = oldName ? cmb.replaceLast( oldName, '['+ prevNum +']', '['+ cmb.idNumber +']' ) : '';.\n```. Same issue as #422 (I just found this one). For tabs, I developed a custom tabs logic for a plugin that adds tabs on wp edit screen because I wasn't able to set up all the html required for tabs\nBasically the idea was add to each tab a selector with all metaboxes this tab should show/hide\nI applied the same logic for CMB2 Tabs\nSo, is easy add tabs just with the tabs nav html. Nice work @rogerlos\nHope this PR get merged soon. Ok no problem, anyway, do you know why this issue happens? or how editor tabs are instanced?. It looks that issue comes from how CMB2 renders wysiwyg field\nThe textarea has an id like: {widget_prefix}[{widget_instance}][{field_id}]\nand switchEditor from WordPress editor.js will try to get the editor textarea by his id attribute with a selector like: $('#'+id)\nand how textarea has as id the characters [ and ] it causes an selector error on jQuery\nProbably thats why editor tabs isn't rendered. Ha! Get it working, wp_editor() id args requires sanitization, just adding this changes on class CMB2_Type_Wysiwyg line 57 get it working!\nCurrent code:\nwp_editor( $args['value'], $args['id'], $args['options'] );\nChange that fix the issue:\nwp_editor( $args['value'], sanitize_html_class( $args['id'] ), $args['options'] );\nEdit: Ah, not works at all, text edited in visual mode don't get updated :/. Hi @slaFFik \nI remember that for an old project I built a custom field with this functionality\nI will check if I can recover it as help to build it as CMB2 built-in feature. Hi @slaFFik \nI just submitted it as a new repo, hope the code can help:\nhttps://github.com/rubengc/cmb2-field-advanced-file-list. ",
    "kuchenundkakao": "yeah sorry, i thought i could use the wp global methods. Replaced it with a check for the svg extension for now.. Yep, Works ;). ",
    "allysonsouza": "Oh, sorry, it's a known bug, closing.. Thanks @jtsternberg,\nI didn't considered the use of WordPress own filters, I'll try it.\nI know it's not good to change the core of plugins or WordPress, but being me an \"old monkey\" (how we say in Brazil - means experienced person), I was making it for my own risk for a hotfix only.\nAnd thanks for the amazing job with CMB2.. Ok, I've found how to set a text field to be a number only input, but for range this don't work.\nhttps://github.com/WebDevStudios/CMB2/wiki/Tips-&-Tricks#limit-text-field-to-numbers-only. You are right, sorry for the inconvenient issue, it was an error in my code.. I'm having the same problem, CMB2 version 2.2.5.3. Correcting: text_date_timestamp still not solving the problem.. ",
    "alzearafat": "@tw2113 wow, thanks my friend! :+1: . ",
    "desrosj": "It might be worth adding a comment around these lines, or opening a separate issue linking to the Ticket on Trac for PHPUnit 6 support so that this is revisited when that gets closed. This can be removed then. . I am also encountering this. A custom field added in the same manner described (cmb2_render_{$field_type}) is not properly adding a new row.. @bnecreative I noticed in the code that you provided, you have three filters. I believe that your cmb2_render_bne_people_details_repeater hook should be an action, not a filter.\nI have opened a pull request that fixes the issue as I saw it happening. Any testing is appreciated!. @bnecreative Gotcha! Was worth double checking. I am somewhat new to CMB2, so some older code examples may not stand out as such to me.\nThanks for confirming that the PR fixes the issue for you. I am going to work on some unit tests for the pull request to prove it does what it's supposed to without any ill effects and hopefully we can get this fixed.. I am. I will try to write some this week. Good suggestion. \ud83d\udc4d . ",
    "fliespl": "That works. Thank you for prompt reponse :). ",
    "udezekene": "Thanks @tw2113 I had just spotted this method in the Wiki. \nIt works perfectly!. @jtsternberg Thanks for your response. I just updated the issue to reflect the whole definition.\nI assumed the id of the group is the identifier that will be used to assess the array with the fields defined. Prior to updating this, I exchanged the id in the get_post_meta call with one from the ->add_field definition and I'm still getting blanks.. Oh I see my errors now :man_facepalming: I was trying to access the group via the metabox id as opposed to the group id. \ud83d\ude06 \nThanks for your help @jtsternberg @tw2113 \ud83d\ude4c . Oh wow! Thanks @tw2113. I've been pulling my hair on this. ",
    "Akrasnovskis": "Hello Guys,\nI need advice, I looked for hours but still I tried all variations but still do not work.\nI have two pages templates, one is Default template and another is Template 2.\nWhat I trying to achieve is when is default template in backend there is only Title field and content field. Which don't need to be changed. But as soon as you choose 'Template 2' in back end there will be displayed extra meta boxes and fields underneath. I tried to display by page ID and all of that nothing works, it's because whichever template you choose, it displaying all the meta boxes in back end with any page template. \nBecause in terms of website, If I choose specific template it displays correctly, on front end. But all I need hide and display on back end too, and cannot achieve that, unless I do something wrong?\nSee code below I use which is was taken from https://github.com/CMB2/CMB2/wiki/Display-Options#limit-to-specific-page-templates\n$cmb = new_cmb2_box( array(\n        'id'           => 'pathway',\n        'title'        => 'About Pathway',\n        'object_types' => array( 'page' ), // post type\n        'show_on_cb'   => array( 'key' => 'archive-path', 'value' => 'archive-path.php' ),\n        'context'      => 'normal', //  'normal', 'advanced', or 'side'\n        'priority'     => 'high',  //  'high', 'core', 'default' or 'low'\n        'show_names'   => true, // Show field names on the left\n    ) );. That's absolute worked, thank you very much \nshould be only 'show_on' => array( 'key' => 'page-template', 'value' => 'archive-path.php' ),\nwithout cb and all worked perfectly well! thanks . ",
    "munkhbayaryo": "Hi, @tw2113 \nIs it possible to just select to show metabox? Not click to update \ud83d\ude03 . ",
    "tanmoybiswas87": "'show_on'      => array( 'key' => 'id', 'value' => array( 143,155 ) ),. ",
    "mahbubkhan88": "I've got a big solution. Thanks @tw2113 . ",
    "PTiCA1": "Do anyone have a finished solution?. ",
    "sakutasanen": "I also encountered this bug. I would appreciate if this would be fixed soon.. ",
    "dowen121": "https://github.com/mustardBees/cmb_field_map. So you can use get_post_meta() to return the data entered into the CMS. This will return lat/long coordinates which you can then pass into javascript and use like so;\nvar latitude = $('#map-lat').val();\nvar longtitude = $('#map-long').val();\n\n// When the window has finished loading create our google map below\ngoogle.maps.event.addDomListener(window, 'load', init);\n\nfunction init() {\n    // Basic options for a simple Google Map\n    // For more options see: https://developers.google.com/maps/documentation/javascript/reference#MapOptions\n    var mapOptions = {\n        // How zoomed in you want the map to start at (always required)\n        zoom: 15,\n\n        // The latitude and longitude to center the map (always required)\n        center: new google.maps.LatLng(latitude, longtitude),\n\n        disableDefaultUI: true,\n        scrollwheel: false,\n\n    };\n\n    // Get the HTML DOM element that will contain your map \n    // We are using a div with id=\"map\" seen below in the <body>\n    var mapElement = document.getElementById('map');\n\n    // Create the Google Map using our element and options defined above\n    var map = new google.maps.Map(mapElement, mapOptions);\n\n    // Let's also add a marker while we're at it\n    var marker = new google.maps.Marker({\n        position: new google.maps.LatLng(latitude, longtitude),\n        map: map,\n        title: 'Map'\n    });\n}\n\nYou will need a \"Google Maps JavaScript API\" key from the google developer console.\nA simple guide on setting up a google map via the API can be found on snazzy maps and then following their example -> link to download https://snazzymaps.com/download-example/1. A quick glance suggests like the  element should have\nunique ID foreach of the the items.\ne.g.\n\n\n\nand then the JS code updated to reflect this;\nvar mapElement = document.getElementById('map');\n\nOn Mon, Mar 26, 2018 at 8:24 AM, Rezaul1300 notifications@github.com\nwrote:\n\nkindly see this link please: - 1. http://prntscr.com/iwelp5 2.\nhttp://prntscr.com/iwem5z 3. http://prntscr.com/iwemub\ufeff\nIn my first post are showing the map. but the next post not showing the\nmap. please help me\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/CMB2/CMB2/issues/902#issuecomment-376070578, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AEWP1zZJijKINbSRQXS3CZq-sZs831Ggks5tiJfLgaJpZM4MuB_i\n.\n. \n",
    "Rezaul1300": "kindly see this link please: - 1.  http://prntscr.com/iwelp5      2.  http://prntscr.com/iwem5z      3.   http://prntscr.com/iwemub\ufeff \nIn my first post are showing the map. but the next post not showing the map. please help me. ",
    "rohitwebguru": "Hello All, \nI am trying to add google map field with cmb2, But it is not getting appeared at all. AM i making any mistake there? \n\n. Hello All, \nI am trying to add google map field to one of the custom post type.  But after adding the code my map is not getting displayed at all.  Following is the code for same. Please guide me If I am doing something wrong in it. \n\n. ",
    "iantbarker": "I just realized that 'show_on' is for boxes, not fields. Is that correct?\nSo I guess my question would be, how do I create 2 boxes on a page or post?. @tw2113 Ahhhh... I figured out how to invoke a new box. I had tried that but didn't change a prefix. This is super helpful. Thanks so much!. ",
    "baikaresandeep": "Thanks @tw2113 for reply. I have fixed this issue.. I was using the both format for date and time, I think that was issue. But when I removed 'time_format' => 'H:i', it works for me.\nI think both the format is not working with this field.\n. ",
    "raptor235": "Sure I'll move it over, that call is specifically looking at what the taxonomy is set for that product when it gets loaded. So it wouldn't have anything to do with disappearance of meta data.. ",
    "taunoha": "You may try this plugin: https://github.com/taunoha/cmb-theme-options-tabs\nThis plugin is WPML compatible. Every language has its own tab in options page. If WPML is missing, it will display one tab called \"Global\".. Maybe this plugin is helpfull: https://github.com/taunoha/cmb-theme-options-tabs. Have you tried this https://github.com/taunoha/cmb2-theme-options-with-tabs ?\n(https://github.com/taunoha/cmb2-theme-options-with-tabs/issues/1). Could you please explain why you need to use the same option key? What is the use case? . ",
    "macway": "I'm having the same problem with taxonomy_select field,\nalso if the taxonomy_select field is enabled for a custom taxonomy, it blocks the WordPress default custom taxonomy metabox from updating the terms.. Clean installation\nWordPress Version 4.9.2 \nTwenty Seventeen Version 1.4\nCMB2 Version 2.3.0\nInclude only this at the bottom of functions.php\n```\nadd_action( 'cmb2_init', 'test_register_document_metabox' );\nfunction test_register_document_metabox() {\n    $prefix = 'test';\n$cmb_doc = new_cmb2_box( array(\n    'id'              => 'test_edit_document',\n    'title'           => esc_html__( 'Test metabox', 'test' ),\n    'object_types'    => array( 'post' ),\n    'show_names'      => true,\n    'remove_box_wrap' => false,\n    'context'         => 'normal',\n) );\n\n$cmb_doc->add_field( array(\n    'name'    => esc_html__( 'Tags', 'test' ),\n    'id'      => $prefix . 'tags',\n    'type'    => 'taxonomy_select',\n    'taxonomy'=> 'post_tag',\n    'remove_default'    => false,\n    'attributes'        => array(\n        'multiple'    => true,\n        'placeholder' => 'None',\n    ),\n) );\n\n}\n```\n@tw2113  I can leave it a few days till you check it. ",
    "sandrodz": "I've got it working with polylang strings. Its not perfect, but works.\n\n\nI looked at polylang wpseo integration and took example from there.\n. I realized this was due to composer installers, fix was simple\n\n. It is a fresh WP install, there is nothing else configured.. default WP button css has no margin.\n\nIn that case wrap should have margin-bottom, so cmb2 issue.\n. I'm using this: https://github.com/CMB2/CMB2-Snippet-Library/tree/master/options-and-settings-pages. ```\n        /\n         * Register our setting to WP\n         \n         * @since  0.1.0\n         /\n        public function init_options() {\n                register_setting( $this->options_key, $this->options_key );\n        }\n    /* Add menu options page\n     *\n     * @since 0.1.0\n     */\n    public function add_options_page() {\n            $this->options_page = add_menu_page( $this->options_page_title, $this->options_page_title, 'manage_options', $this->options_key, [ $this, 'admin_page_display' ] );\n            add_action( \"admin_print_styles-{$this->options_page}\", array( 'CMB2_hookup', 'enqueue_cmb_css' ) );\n    }\n\n     /**\n     * Admin page markup. Mostly handled by CMB2\n     *\n     * @since  0.1.0\n     */\n    public function admin_page_display() {\n            ?>\n            <div class=\"wrap cmb2-options-page <?php echo $this->options_key; ?>\">\n                    <h2><?php echo esc_html( get_admin_page_title() ); ?></h2>\n                    <?php cmb2_metabox_form( $this->options_metabox_id, $this->options_key ); ?>\n            </div>\n            <?php\n    }\n\n    /**\n     * Add the options metabox to the array of metaboxes\n     *\n     * @since  0.1.0\n     */\n    function add_options_page_metabox() {\n\n            $cmb = new_cmb2_box( [\n                    'id'         => $this->options_metabox_id,\n                    'hookup'     => false,\n                    'cmb_styles' => false,\n                    'show_on'    => [\n                            'key'   => 'options-page',\n                            'value' => [ $this->options_key, ]\n                    ],\n            ] );\n\n            $cmb->add_field( [\n                    'name' => __( 'Youtube API key', 'ultimate-scraper' ),\n                    'id'   => 'youtube_key',\n                    'type' => 'text',\n            ] );\n\n            $cmb->add_field( [\n                    'name' => __( 'Youtube max results', 'ultimate-scraper' ),\n                    'id'   => 'youtube_max_results',\n                    'type' => 'text',\n                    'attributes' => [\n                            'type'    => 'number',\n                            'pattern' => '\\d*',\n                    ],\n                    'sanitization_cb' => 'absint',\n                    'escape_cb'       => 'absint',\n            ] );\n\n    }\n\n    /**\n     * Register settings notices for display\n     *\n     * @since  0.1.0\n     * @param  int   $object_id Option key\n     * @param  array $updated   Array of updated fields\n     * @return void\n     */\n    public function settings_notices( $object_id, $updated ) {\n\n            if ( $object_id !== $this->options_key || empty( $updated ) ) {\n                    return;\n            }\n            add_settings_error( $this->options_key . '-notices', '', __( 'Settings updated.', 'ultimate-scraper' ), 'updated' );\n            settings_errors( $this->options_key . '-notices' );\n\n    }\n\n```. Its a big class, but actions are here:\n$this->loader->add_action( 'admin_init', $plugin_admin, 'init_options' );\n                $this->loader->add_action( 'admin_menu', $plugin_admin, 'add_options_page' );\n                $this->loader->add_action( 'cmb2_admin_init', $plugin_admin, 'add_options_page_metabox' );\n                $this->loader->add_action( \"cmb2_save_options-page_fields_{$plugin_admin->__get('options_metabox_id')}\", $plugin_admin, 'settings_notices', 10, 2 );\n. amazing, I hope this gets in soon.. Hi, thanks for looking in! I had to scratch the use of cmb2 because of this bug: https://github.com/CMB2/cmb2-attached-posts/issues/51\nUnfortunately I'm short on time to experiment and debug this issues, but I will look into it more closely later on. I've looked at issues on https://github.com/jcchavezs/cmb2-conditionals and it seems that plugin has trouble with groups, which is my use case.. I had trouble with groups, but going through miltilang files I've found wpm_each - solution is detailed in this issue: https://github.com/VaLeXaR/wp-multilang/issues/48. ",
    "schrapel": "Thanks for taking a look. JS does seem like a better solution here.. ",
    "mcsmithers": "I would love to help out in this.  It's my first time contributing to a project like this, so your feedback would be valuable :). ",
    "codespacing": "It seems that this issue still exist. \nMy working solution is to use the attribute \"sanitization_cb\" to check if the value is array and that it contains an option. Here's an example:\n$cmb->add_field( array(\n    'name' => 'My multicheck field',\n    'id' => 'my_multicheck_field',\n    'type' => 'multicheck',\n    'default' => array(''),\n    'options' => array(\n        'option1' => 'Option 1',\n        'option2' => 'Option 2',\n    ),\n    'sanitization_cb' => function($value, $field_args, $field){\n        if(is_array($value) && count($value) > 0)\n            return $value;\n        else return $field_args['default'];\n    }\n) );\nI hope this can help.. ",
    "smarchal": "I am experiencing this issue as well, with both theme options and network options on a multisite install. This is with the latest version of CMB2 which at this time is 2.4.2.\nThe sanitation_cb solution above didn't work for me, however what seems to work in all my use cases is to simply add a hidden field at the end of each set of fields, with a default value:\n$cmb->add_field( array(\n        'id'   => 'dummy_field',\n        'type' => 'hidden',\n        'default' => 'Dummy field.',\n) );\nHopefully this can help others too.. ",
    "leewillis77": "Hi; \nYes, I can fix it with a filter. I only raised it to see if it was something that could be fixed \"properly\" without people having to override the behaviour in a filter. From the history (sorry those issues never came up for my search!) it looks like it's been agreed that there's no way CMB2 can always get this right. \nHappy to close & thanks for the quick reply!. I looked at #655 before I raised this which seems related - although opposite :). The issue seems to be that CMB2_Sanitize strips slashes from the data - https://github.com/CMB2/CMB2/blob/trunk/includes/CMB2_Sanitize.php#L40\nHowever, when fields are saved the (already stripped) value is passed to update_metadata which expects slashed, not unslashed data:\nRef:\nhttps://github.com/CMB2/CMB2/blob/trunk/includes/CMB2_Field.php#L368\nhttps://core.trac.wordpress.org/browser/tags/4.7.3/src/wp-includes/meta.php#L163 \nPresumably (from the comments on #655) there's a difference between fields which are going into options (which expects raw data), and those which are going into metadata (which expects slashed data). \nCalling wp_slash() on the value before calling add/update_metadata in CMB2_Field::update_data() resolves the issue for me but I don't know the codebase well enough to determine if that's a better approach that not unslashing it in the first place until we know where it's going?. To clarify - here's the changes I'm running locally which \"WorkForMe\"[tm]\nhttps://gist.github.com/leewillis77/55ac1e12b53b367f1009a0f38a0071ad. Hi Justin; \nI'm afraid it is a CMB2 issue.\nYour example is flawed since you're manually assigning an unslashed value to $meta_val. Essentially reproducing the fault with what CMB2 is doing. If you pulled the data from $_POST then it would be slashed, e.g.\n[{\\\"content\\\":\\\"This is a \\\\\\\"some\\\\\\\" content\\\"}]\nnot\n[{\"content\":\"This is a \\\"some\\\" content\"}]\nAs an example, if I manually create a metabox with the following code then it works as expected.\n```\n<?php\nclass Test {\npublic function run() {\n    add_action( 'add_meta_boxes', array( $this, 'add_meta_boxes' ) );\n    add_action( 'save_post', array( $this, 'save_info' ) );\n}\n\npublic function add_meta_boxes() {\n    add_meta_box(\n        'input-test',\n        'Input test',\n        array( $this, 'input_test' ),\n        'post',\n        'side',\n        'low',\n        null\n    );\n}\n\npublic function input_test( $post ) {\n    if ( ! empty( $post->ID ) ) {\n        $cur = get_post_meta( $post->ID, 'my-input-test', true );\n    } else {\n        $cur = '';\n    }\n    ?>\n    <input type=\"text\" name=\"my-input-test\" value=\"<?php echo esc_attr( $cur ); ?>\">\n    <?php\n}\n\npublic function save_info( $post_id ) {\n    if ( empty( $_POST['my-input-test'] ) ) {\n        return;\n    }\n    update_metadata( 'post', $post_id, 'my-input-test', $_POST['my-input-test'] );\n}\n\n}\n```\nI understand the hesitancy to make these sort of changes, however I do think they're necessary. The changes I gave in https://gist.github.com/leewillis77/55ac1e12b53b367f1009a0f38a0071ad work for me - although it seems inefficient to unslash everything, and then re-slash it if it's going to a _metadata() call. It may be the least impactful fix though.. Hey Justin; \nTrunk WorksForMe[tm] after your change. Note - I'm only dealing with postmeta values here, I can't verify it works properly for other items.. > So stripping slashes universally should be safe.\nThat's the point. It's not. The _metadata() functions expect to receive slashed data from a FORM, not unslashed data. So if your form data is going to end up in one of the _metadata() functions you either need to not unslash it yourself, or re-slash it before calling those functions. \n\nHowever, if the data is pre-slashed I could see an issue. This is obviously a non-standard use case.\n\nI'm not sure how it's non-standard?\n. Aha. I get you.\nIt's actually JSON-encoded rather than slashed, so I guess that is a bit unique-to-me, but the bug could affect anything where slashes were important (struggling to think of an example!!)  . ",
    "mclaurent": "Hi\nSorry to bring this one back but I'm struggling to get this to work. When I try to overwrite media.frames[media.field].frame to 'post' it doesn't change the view of the modal as media.frames[media.field] was already instantiated to an object with a call to wp.media. \nIn my case running the suggested code won't enable the 'Import from URL' feature.\nHere's my JS:\njQuery(function ($) {\n    $(document).on('cmb_media_modal_init', function (evt, media, cmb) {\n        media.frames[media.field].frame = 'post';\n    });\n});\nAny pointers would be greatly appreciated.\nThanks\n. Thanks @tw2113 and @jtsternberg  for the information. Just confirming that I am using wysiwyg in a repeatable group and that I'm not using the repeatable flag. It looks like the \"Disable the visual editor when writing\" option (WP-Admin > Users > Your Profile) was enabled which in turn caused an error in the tinyMCE initialisation.  I've re-enabled the visual editor and this has brought back the WYSIWYG in the repeatable group.\nIs there a way to avoid the JS error so that other scripts can execute correctly?. Sure!\nNot sure why but of all of a sudden I am getting a PHP error:\nFatal error: Declaration of CMB2_Type_Wysiwyg::render() must be compatible with CMB2_Type_Textarea::render($args = Array) in D:\\sandboxes\\sites\\mc-bridge-corporate\\public_html\\wp-content\\plugins\\cmb2\\includes\\types\\CMB2_Type_Wysiwyg.php on line 16\nI've tried downgrading CMB2 to 2.2.4 but that didn't do anything so probably isn't something that has changed recently. Must be something really obvious that I'm missing...\nThis is the code I am now using (I'm attaching a wysiwyg to a regular post without namespacing in my theme.\n```php\nadd_action('cmb2_admin_init', 'register_test_metabox');\nfunction register_test_metabox()\n{\n    $prefix = 'mc_test_';\n$cmb = new_cmb2_box(array(\n    'id' => $prefix . 'description_metabox',\n    'title' => esc_html__('Test info', 'cmb2'),\n    'object_types' => array('post'), // Post type\n));\n$cmb->add_field( array(\n    'name'    => 'Test wysiwyg',\n    'desc'    => 'field description (optional)',\n    'id'      => 'wiki_test_wysiwyg',\n    'type'    => 'wysiwyg',\n    'options' => array(),\n) );\n\n}\n```. ",
    "maxyudin": "The lower case d gives the day of the month, 2 digits with leading zeros: 01 to 31. Use lower case j instead.. ",
    "Riemi001": "tried another Server all ok. ",
    "mamunur105": "// things to do slider \nadd_action( 'cmb2_admin_init', 'slider_metabox' );\nfunction slider_metabox(){\n$cmb = new_cmb2_box( array(\n    'id'           => 'thingsto-do',\n    'title'        => 'Menual Slider',\n    'object_types' => array( 'page' ), // post type\n    'show_on_cb' => 'show_templeate_slider',\n    'context'      => 'normal', //  'normal', 'advanced', or 'side'\n    'priority'     => 'high',  //  'high', 'core', 'default' or 'low'\n    'show_names'   => true, // Show field names on the left\n) );\n\n$group_field_id = $cmb->add_field( array(\n    'id'          => 'cat_slider_group_field',\n    'type'        => 'group',\n    'description' => __( 'Menual Page Slider', 'cmb2' ),\n\n    'options'     => array(\n        'group_title'   => __( 'Entry {#}', 'cmb2' ), \n        'add_button'    => __( 'Add Another Entry', 'cmb2' ),\n        'remove_button' => __( 'Remove Entry', 'cmb2' ),\n        'sortable'      => true, // beta\n\n    ),\n) );\n\n// Id's for group's fields only need to be unique for the group. Prefix is not needed.\n\n$cmb->add_group_field( $group_field_id, array(\n    'name'    => 'Slider Image',\n    'desc'    => 'Upload an image or enter an URL.',\n    'id'      => 'things_slider__image',\n    'type'    => 'file',\n    'options' => array(\n        'url' => false, // Hide the text input for the url\n    ),\n    'text'    => array(\n        'add_upload_file_text' => 'Upload/Select Slider Image' // Change upload button text. Default: \"Add or Upload File\"\n    ),\n    // query_args are passed to wp.media's library query.\n    'query_args' => array(\n        // 'type' => 'application/pdf', // Make library only display PDFs.\n        // Or only allow gif, jpg, or png images\n        'type' => array(\n            'image/gif',\n            'image/jpeg',\n            'image/png',\n        ),\n    ),\n    'preview_size' => 'large', // Image size to use when previewing in the admin.\n) );\n\n$cmb->add_group_field( $group_field_id, array(\n    'name' => 'Title ',\n    'id'   => 'slider_section_title',\n    'type' => 'text',\n) );\n\n$cmb->add_group_field( $group_field_id, array(\n    'name' => 'Slider Url ',\n    'id'   => 'slider_url',\n    'type' => 'text',\n) );\n\n$cmb->add_group_field( $group_field_id, array(\n    'name' => 'Description',\n    'description' => 'Write a short description for this entry',\n    'id'   => 'slider_description',\n    'type' => 'textarea_small',\n) );\n\n}\n// cb \nfunction show_templeate_slider($cmb2) {\n    $template = get_post_meta( $cmb2->object_id(), '_wp_page_template', true );\n    if ( 'page-templates/things-to-do.php' === $template || 'page-templates/weekend.php' === $template ) {\n        return true;\n    }\n    return false;\n}\n. ",
    "Aqsathemes": "Thank you tw2113, i think you are right. . ",
    "mostafasoufi": "I think is better use the library instead wordpress-plugin for composer type.. ",
    "arkytn": "Real simple \n$cmb->add_field( array(\n    'name'     => $taxonomy->label,\n    'id'       => \"submitted_{$taxonomy->name}\",\n    'type'     => $taxonomy->hierarchical ? 'taxonomy_multicheck' : 'taxonomy_select' ,\n    'select_all_button' => false,\n    'taxonomy' => $taxonomy->name, // Taxonomy Slug\n) );\nDoesn't turn off the select all button.\nIf you look at the code  at line 67 of cmb2\\includes\\types\\CMB2_Type_Taxonomy_Multicheck.php:\nprotected function get_wrapper_classes() {\n    $classes = 'cmb2-checkbox-list cmb2-list';\n    if ( false === $this->field->args( 'select_all_button' ) ) {\n        $classes .= 'no-select-all';\n    }\n    return $classes;\n}\nYou are concating 'cmb2-checkbox-list cmb2-list' with  'no-select-all' resulting in\n'cmb2-checkbox-list cmb2-listno-select-all' \nwhich kills the meaning of both 'cmb2-list' and 'no-select-all'\nYou need to add the space so you get\n'cmb2-checkbox-list cmb2-list no-select-all' \nwhich works properly.\nNothing to do with setting or sites.\n. Thank you. ",
    "claytoncollie": "This would seriously help me with a plugin I am developing right now.  I am populating a select field with an array built with get_posts.  But it is a large query and I only want to run it on that specific options page where the select fields live.  Right now, the query is run on every admin page load due to the options page loading on the cmb2_admin_init hook.  Would be nice to have access to the load-{} action hook that your extension provides.  Thanks for the work on this.. related - https://github.com/CMB2/CMB2/issues/978. ",
    "garrett-eclipse": "No problem. ",
    "ocean90": "@jtsternberg Any chance for another hotfix release, 2.2.5.3?. Thanks for the test. \ud83d\udc4d . ",
    "bitstarr": "@tw2113 I didn't notice the maintainer search, but yes this situation would be the same.\n@jtsternberg Indeed I have mistaken the time picker script the date picker integration. After taking a deeper look I can understand not to change the date picker, because it uses the WP build in Jquery UI which is comfortable.\nI wasn't awaiting a data-datepicker attribute because there is date_format. Now I know better.\nNonetheless thanks for your help and the great work you do with this helpful plugin!. Hi @tw2113, here you go:\n````\nTypeError: n is undefined underscore.min.js:5:14721\nm.template\nhttp://event.local/wp-includes/js/underscore.min.js:5:14721\nwp.template<\nhttp://event.local/wp-includes/js/wp-util.js:33:27\nrender\nhttp://event.local/wp-includes/js/wp-backbone.js:373:20\nselectionStatusToolbar\nhttp://event.local/wp-includes/js/media-views.js:5565:26\nmainInsertToolbar\nhttp://event.local/wp-includes/js/media-views.js:5584:3\n_\nhttp://event.local/wp-includes/js/backbone.min.js:1:3909\nm\nhttp://event.local/wp-includes/js/backbone.min.js:1:3712\nf\nhttp://event.local/wp-includes/js/backbone.min.js:1:1565\nu.trigger\nhttp://event.local/wp-includes/js/backbone.min.js:1:3592\n[16]</</StateMachine.prototype[method]\nhttp://event.local/wp-includes/js/media-views.js:1854:3\ntrigger\nhttp://event.local/wp-includes/js/media-views.js:1569:3\nrender\nhttp://event.local/wp-includes/js/media-views.js:1515:3\nmode\nhttp://event.local/wp-includes/js/media-views.js:1462:3\nrender\nhttp://event.local/wp-includes/js/media-views.js:1490:11\n<anonym\nhttp://event.local/wp-includes/js/media-views.js:2095:4\npostActivate\nhttp://event.local/wp-includes/js/media-views.js:1962:3\n\nhttp://event.local/wp-includes/js/backbone.min.js:1:3853\nm\nhttp://event.local/wp-includes/js/backbone.min.js:1:3712\nf\nhttp://event.local/wp-includes/js/backbone.min.js:1:1565\nu.trigger\nhttp://event.local/wp-includes/js/backbone.min.js:1:3592\nsetState\nhttp://event.local/wp-includes/js/media-views.js:1821:3\nadd\nhttp://event.local/wp-includes/js/media-editor.js:911:4\nopen\nhttp://event.local/wp-includes/js/media-editor.js:1068:16\nopen self-hosted:949:17 init/<\nhttp://event.local/wp-includes/js/media-editor.js:1100:6\ndispatch\nhttp://event.local/wp-includes/js/jquery/jquery.js:3:12392\nadd/r.handle\nhttp://event.local/wp-includes/js/jquery/jquery.js:3:9156\n````. It's 2.2.5.2, used as plugin. @tw2113 I'm using CMB2 as plugin. Also there is no theme framework or something else.\nI simply added https://github.com/CMB2/CMB2-Snippet-Library/blob/master/options-and-settings-pages/theme-options-cmb.php to my theme and required it. What else do I have to do?\nBTW nice styling in the screenshot.. Now it works. Maybe i forgot acivating CMB2 or something last time. I was in a hurry when trying the first time :(\nThanks for your kind help and patience!. ",
    "sebask": "The behaviour you describe is correct (see my snippets below). However the issue is with formatting, which I like to change. For example d-m-Y instead of the default m/d/Y. Those parts do not seem to work.\nThe saved value I get is the following:\na:1:{i:0;a:3:{s:4:\"date\";s:10:\"01/31/2017\";s:9:\"starttime\";s:8:\"09:50 AM\";s:7:\"endtime\";s:8:\"09:55 AM\";}}\nThis actually matches the values I saved (so that's good):\n\nAny additional attributes added to code, which is used to create the field, just gets parsed into the field itself. Meaning date_format isn't used to change the formatting but is rendered as date_format=\"d-m-Y\", instead of being parsed in to data-datepicker=\"{&quot;dateFormat&quot;:&quot;dd'\\/'mm'\\/'yy&quot;}\". The latter is used by the picker to change the formatting.\nphp\necho $field_type->text_date( array(\n  'name'              =>  $field_type->_name( '[date]' ),\n  'desc'              => '',\n  'id'                => $field_type->_id( 'date' ),\n  'value'             => $field->get_timestamp_format( 'date_format', $value['date'] ),\n  'date_format'       => 'd-m-Y',\n) );\nhtml\n<input type=\"text\" class=\"cmb2-text-small cmb2-datepicker hasDatepicker\" name=\"faq_timetable[0][date]\" id=\"faq_timetabledate_0\" data-iterator=\"0\" value=\"\" date_format=\"d-m-Y\" data-datepicker=\"{&quot;dateFormat&quot;:&quot;mm'\\/'dd'\\/'yy&quot;}\">\nOne additional side effect is the text_date_timestamp doesn't seem to work.  . And I forgot to mention, trying to overwrite data-datepicker=\"{&quot;dateFormat&quot;:&quot;dd'\\/'mm'\\/'yy&quot;}\" with the code below doesn't work either.\nphp\n...\necho $field_type->text_date( array(\n  'name'              =>  $field_type->_name( '[date]' ),\n  'desc'              => '',\n  'id'                => $field_type->_id( 'date' ),\n  'value'             => $field->get_timestamp_format( 'date_format', $value['date'] ),\n  // 'date_format'       => 'd-m-Y',\n  'data-datepicker'   => json_encode( array(\n    'dateFormat'        => 'dd/mm/yy',\n    'yearRange'         => '-100:+0',\n  ) ),\n) );\n.... Thanks for noticing. The parse error, caused by name' => 'Name' ),, was not in my actual code. This happend while writing this issue(s). Also I removed the group, and updated the snippet above. Sorry for the confusion! :)\nBelow is the complete piece used to create the meta box:\n```php\n/\n * Register the Custom Fields\n \n * Create and add fields to the post type 'faq' when the 'cmb2_admin_init'\n * action is fired.\n \n * @since 3.0.0-beta\n * @version 3.0.0-beta\n */\nfunction add_custom_fields_faq() {\n/\n   * Prefix all fields with the post type in order to improve structure and\n   * legibility. Starting the prefix with an underscore will hide it from the\n   * native custom fields.\n   /\n  $prefix = 'faq_';\n/\n   * Details\n   \n   * @since 3.0.0-beta\n   * @version 3.0.0-beta\n   /\n  $cmb = new_cmb2_box( array(\n    'id'                => $prefix . 'details',\n    'title'             => __( 'Details', 'zuidema' ),\n    'object_types'      => array( 'faq' ),\n    'context'           => 'normal',\n    'priority'          => 'default',\n    'show_names'        => true,\n    // 'classes'           => 'additional-class'\n    // 'show_on'           => array( 'id' => 1 ),\n    // 'cmb_styles'        => false,\n    // 'enqueue_js'        => true,\n    // 'closed'            => true,\n    // 'show_in_rest'      => WP_REST_Server::ALLMETHODS,\n    // 'remove_box_wrap'   => false,\n  ) );\n$cmb->add_field( array(\n    'name'              =>  'Name',\n    'desc'              =>  'Description',\n    'id'                =>  $prefix . 'timetable',\n    'type'              =>  'timetable',\n    'attributes'        => array(\n      // 'required'          => 'required',\n      // 'oninvalid'         => \"setCustomValidity('\"Required\"')\",\n      // 'oninput'           => \"setCustomValidity('')\",\n      // 'novalidate'        => 'novalidate',\n      // 'disabled'          => true,\n    ),\n    'repeatable'        =>  true,\n    'text'              =>  array(\n      'add_row_text'      =>  'Add'\n    ),\n  ) );\n}\nadd_action( 'cmb2_admin_init', 'add_custom_fields_faq' );\n```. I looked around in those functions, but couldn't make much of it yet. It's all quite new for me.\nThis one is also used for time_format https://github.com/CMB2/CMB2/blob/trunk/includes/CMB2_Field.php#L748-L758.. ",
    "sabbiseaan": "@sebask do you fix this problem? (Array to string conversion).if yes, can you share the solution with us . ",
    "jbrowncfa": "@sebask I also have the solution if you are still having issues.\n. ",
    "wester97": "I have this same problem!. ",
    "oduludo": "I am using version 2.2.5.2.. Thanks @bnecreative, that did the job for me!. ",
    "Sharsie": "@jtsternberg My appologies for not replying, I completely missed your answers back in 2017 and now I look like a complete dimwit I am :\\\nThank you for the fix however.. ",
    "fastmarketo": "I have simple CMB2 plugin installed. I used this \u2192 https://github.com/satwinderrathore/CMB2-radio-image\n\n. thanks. do you think that w/o using any extension we can achieve what I am trying to achieve? It is not easy to trust new extensions. I hope I am not spamming the post.. sir, I have a humble request I hope you do not feel offended. As a plugin maker can you please include this feature in the (primary) plugin itself. I am distributing your plugin in a  commercial theme; that way it will look more professional if everything(all meta's) is coming via one plugin.. this is the theme setup \u2192 https://www.screencast.com/t/A4iy5GYPZo and this the code \u2192  Can you identify if I am going wrong anywhere\u2192 https://www.screencast.com/t/wGdWbdCkfPdE?. this is the image \u2192 \n\n. I think everything is in place \u2192 https://www.screencast.com/t/kvXj3snq that's what is astonishing me a lot why things are not working; the only image is not appearing. https://www.screencast.com/t/k80OIpegC. Actually, the template selection through images is quite a common thing in today's premium theme. This feature should be included in the plugin in its entirety, including the CSS because as soon as we dive too much into customizing a plugin than the purpose of using a plugin is defied. Secondly, it will look just unprofessional in a premium/commercial theme to add extensions of a plugin, which itself is bundled with TMG. The sole idea of the discussion is to convey that this should be a useful feature already built-in the main plugin w/o requiring any CSS writing as in the case of the example suggested by you.  I tried the code suggested by you it needs CSS tweaks.. I am now using this, but this is not simple HTML, but coming through code and dynamic array \u2192\nhttps://github.com/CMB2/CMB2/issues/1029#issuecomment-331876878\nThe solution to make it image selective lies here \u2192\nhttps://codepen.io/paulobrien/pen/xbJjs?editors=1010\nBut how to implement this in terms of CSS and specially structured HTML to render this all.. can you show me how with a sample sir?. $cmb->add_field( array(\n    'name'    => __( 'Image Radio', 'text_domain' ),\n    'desc'    => __( 'Use images for the radio button labels', 'text_domain' ),\n    'id'      => '_yourprefix_demo_radio_images',\n    'type'    => 'radio_inline',\n    'options' => array(\n        'img1' => '<img src=\"<?php echo get_template_directory_uri(); ?>/inc/admin/images/layout_one.png\" alt=\"Image 1\" title=\"Image 1\">',\n        'img2' => '<img src=\"<?php echo get_template_directory_uri(); ?>/inc/admin/images/layout_one.png\" alt=\"Image 2\" title=\"Image 2\">',\n        'img3' => '<img src=\"<?php echo get_template_directory_uri(); ?>/inc/admin/images/layout_one.png\" alt=\"Image 3\" title=\"Image 3\">',\n        'img1' => '<img src=\"<?php echo get_template_directory_uri(); ?>/inc/admin/images/layout_one.png\" alt=\"Image 1\" title=\"Image 1\">',\n        'img2' => '<img src=\"<?php echo get_template_directory_uri(); ?>/inc/admin/images/layout_one.png\" alt=\"Image 2\" title=\"Image 2\">',\n        'img3' => '<img src=\"<?php echo get_template_directory_uri(); ?>/inc/admin/images/layout_one.png\" alt=\"Image 3\" title=\"Image 3\">',\n        'img1' => '<img src=\"<?php echo get_template_directory_uri(); ?>/inc/admin/images/layout_one.png\" alt=\"Image 1\" title=\"Image 1\">',\n        'img2' => '<img src=\"<?php echo get_template_directory_uri(); ?>/inc/admin/images/layout_one.png\" alt=\"Image 2\" title=\"Image 2\">',\n        'img3' => '<img src=\"<?php echo get_template_directory_uri(); ?>/inc/admin/images/layout_one.png\" alt=\"Image 3\" title=\"Image 3\">',\n    ),\n) );\nphp echo get_template_directory_uri(); ?/inc/admin/images/layout_one.png \u2192 Is this not the correct method to include images in the post backend page meta?. Thanks.. How to make one among these as the default layout?. I am not using his plugin I have styled it myself with the basis of CSS. I think it is a basic question related to meta.. I am using this for selecting the layout. How should I pick the condition?\n\nI mean \u2192\nIf certain condition {echo class1;}. I dont know what you are saying, but all these images are created and loaded in teh post meta. the user can select the post layout based on the image selected, but I need correct If condition for that.. If we add this CSS then radio_inline option can be used for images also \u2192\n```\ninput.cmb2-option[type=radio]{\n  position:absolute;\n  left :-999em\n}\ninput.cmb2-option[type=radio] + label img{\n  border:2px solid transparent;\n}\ninput.cmb2-option[type=radio]:checked + label img{\n  border:2px solid #000000;\n}\n```\nI think you can add this CSS into the plugin.. Is there a method to restrict fields \u2192 $cmb->add_field to particular custom post types only?\nI tried to create a function like this \u2192\n$cmb = new_cmb3_box( array()); it said undefined function.\nSecondly,\n$cmb- \u2192 Is this a Keyword, and only this can be used?\n. Yes, based on the meta I have to display something on the front end.\nI short how to check the condition that oembed (meta information) is filled or not filled?. It is WP meta \u2192 It is used in a Loop \u2192\nhttps://www.screencast.com/t/mWBSQNge3rW\nThe issue is although the post has Video as O-Embed, in the drop-down if it is not selected to be shown on the front end, instead, an image is chosen to be shown than although the Oembed has  Video URL, it treats as if it has no video and the post is skipped.\nPlease seee the image attached in the first post.. Suppose I have this \u2192\n<?php $url = esc_url( get_post_meta( get_the_ID(), 'video_oembed', true ) ); ?>\nNow how should I check if the $url is empty or it has a valid video URL? Some PHP stuff right. Please help me to get this done.\n(It will be empty if no video URL has been fed in the post meta). . ",
    "chrisdrake": "Hmm, strange.\nI should add that I'm using CMB2 for an options page, as described at https://github.com/CMB2/CMB2-Snippet-Library/blob/master/options-and-settings-pages/theme-options-cmb.php. I have found my problem. It's my own fault. I have an escape_cb filter which was causing the issue.\nThanks, and sorry for wasting your time.. ",
    "Mr2P": "Thank @bomsn, I got the same issue. Your patch worked for me. \nAnyway,  the group index is correct but the field index is still not correct. In my case, when creating a new group (the fourth group), the ID of the first row of the repeatable field is: group_name[3][field_name][0][nested_field_name], the next row is group_name[3][field_name][1][nested_field_name] but the third row gets the ID is group_name[3][field_name][4][nested_field_name]. @bomsn Your patch solved my issue. I only needed the group index is correct for my hotfix.. ",
    "tivnet": "class CMB2_Type_Wysiwyg extends CMB2_Type_Textarea {\n\n/**\n * Handles outputting a 'wysiwyg' element\n * @since  1.1.0\n * @return string Form wysiwyg element\n */\npublic function render() {\n\nshould be written as\npublic function render( $args = array() ) {\nto match the parent class' method declaration.. (already fixed in https://github.com/CMB2/CMB2/commit/66b56ffba01ace1da1d649157619147777d43a99). +1. A very important task. . ",
    "jrmd": "@tw2113 Hmm, it could be; but as of now, the DateTime object isn't correct and does not match the epoch time like it should.\nWithin the current version of the plugin, when it creates the DateTime object it doesn't set the timezone until after the object creation which automatically works out the time difference. \nExample:\nI set a date and time of 26/10/2017 12:00pm, timezone New York.\nWithin the database it is stored like so: \ns:128:\"O:8:\"DateTime\":3:{s:4:\"date\";s:26:\"2017-10-26 08:00:00.000000\";s:13:\"timezone_type\";i:3;s:8:\"timezone\";s:16:\"America/New_York\";}\";\nWhich when unserialized has the incorrect time. Although, the utc variant is the correct value when stored: \n1509033600\nSince the timestamp should never change regardless of the timezone you shouldn't have to work out an offset. As the timestamp is just the epoch timestamp.\n\nBy introducing my fix, users will start to seeing accurate date and time in the panel to what is stored and if users resorted to using the UTC field instead it will not affect anything. This issue was apparently fixed in #227 but it doesn't seem to work anymore.. @tw2113 Is there any update on this, I feel like this is quite a big issue with this field :). @tw2113 Ahh okay thank you :). ",
    "jonathanstegall": "I'm curious if this is still pending, or if it should have been resolved by something else? I seem to be having this issue as well.. ",
    "mtbluedog": "Ah, that's it; thanks! Works fine now with html and ",
    "EyesX": "The same issue occurs when using Swedish. Setting the language to English renders the date picker correctly. \nCMB2 2.2.6.1 and WP 4.9\n\n . ",
    "uicestone": "For the Chinese language, I believe it's the cmb2/languages/cmb2-zh_CN.po contains Chinese comma \"\uff0c\" rather than ', '\nfor example the '\u4e00\u6708\uff0c\u4e8c\u6708\uff0c\u4e09\u6708\uff0c\u56db\u6708\uff0c\u4e94\u6708\uff0c\u516d\u6708\uff0c\u4e03\u6708\uff0c\u516b\u6708\uff0c\u4e5d\u6708\uff0c\u5341\u6708\uff0c\u5341\u4e00\u6708\uff0c\u5341\u4e8c\u6708'\nshould be: '\u4e00\u6708, \u4e8c\u6708, \u4e09\u6708, \u56db\u6708, \u4e94\u6708, \u516d\u6708, \u4e03\u6708, \u516b\u6708, \u4e5d\u6708, \u5341\u6708, \u5341\u4e00\u6708, \u5341\u4e8c\u6708'.\nI fixed this by replacing all \"\uff0c\" in the .po file to ', ' and compile to .mo using Poedit.. ",
    "andrejarh": "Hi, \nThanks for reply,\nthemecheck plugin is used by wordpress.org reviewers and themeforest reviewers. It is not mine. I think https://profiles.wordpress.org/otto42/ is behind its development.\n1st point: add_theme_page\nThis issue might violate the wordpress.org and also themeforest coding guidlines, if included in themes, ThemeForest themes won't be able to use your wonderful project, because they might be rejected by the ThemeForest reviewers. They seem to be very strict on this.\n2st point: translations\nI think you misunderstand the issue here. Function  is used for translations. All examples in reported issue are from your codebase.  For example, the first one:\nWARNING: Found a translation function that is missing a text-domain. Function , with the arguments 'Toggle panel: %s'\nThis is from your CMB2_hookup class in /includes/CMB2_hookup.php file, line 458. It reads:\necho '<span class=\"screen-reader-text\">' . sprintf( __( 'Toggle panel: %s' ), $title ) . '</span>';\nThe proper way to use __ function is:\n__( 'Toggle panel: %s', 'cmb2' ); (just add your textdomain as second argument and it'll be fine).\nHere is the codex page: https://codex.wordpress.org/I18n_for_WordPress_Developers.\nI also want to warn you against abusing translation files to execute malicious code. Use esc_html__  or esc_attr__ instead of __ wherever possible. More info on escaping here:\nhttps://codex.wordpress.org/Data_Validation#Text_Nodes\nI am sorry to be a bugger, I really like CMB2 project. You've done a wonderful job on it. I only reported this to help.\nCheers!. Hi, you are probably right. They are using their own version of CodeMirror ( ver. 2.35 ) packed with their plugin. I haven't seen the textarea_code field on this site though. \n\nthis is the whole path of their css_editor.js:\n\nIt is loaded from the revslider plugin.... ",
    "domlavd": "I don't have any js errors\nCustom field type :\nclass CMB2_Render_CentreInfo_Field extends CMB2_Type_Base {\n    public static function init() {\n        add_filter( 'cmb2_render_class_centreinfo', array( CLASS, 'class_name' ) );\n        add_filter( 'cmb2_sanitize_centreinfo', array( CLASS, 'maybe_save_split_values' ), 12, 4 );\n        add_filter( 'cmb2_sanitize_centreinfo', array( CLASS, 'sanitize' ), 10, 5 );\n        add_filter( 'cmb2_types_esc_centreinfo', array( CLASS, 'escape' ), 10, 4 );\n    }\n    public static function class_name() { return CLASS; }\npublic function render() {\n    $value = wp_parse_args( $this->field->escaped_value(), array(\n        'type'          => 'centreinfo',\n        'centre-name'   => '',\n        'phone'         => '',\n        'email'         => '',\n    ) );\n\n    ob_start();\n    ?>\n    <div class=\"alignleft\"><p><label for=\"<?php echo $this->_id( '_centre_name' ); ?>\"><?php echo esc_html( $this->_text( '_centre_name_text', 'Nom du centre' ) ); ?></label></p>\n        <?php echo $this->types->input( array(\n            'name'  => $this->_name( '[centre-name]' ),\n            'id'    => $this->_id( '_centre_name' ),\n            'value' => $value['centre-name'],\n            'desc'  => '',\n        ) ); ?>\n    </div>\n    <div class=\"alignleft\"><p><label for=\"<?php echo $this->_id( '_phone' ); ?>'\"><?php echo esc_html( $this->_text( '_phone_text', 'T\u00e9l\u00e9p\u0125one' ) ); ?></label></p>\n        <?php echo $this->types->input( array(\n            'name'  => $this->_name( '[phone]' ),\n            'class' => 'cmb_text_small',\n            'id'    => $this->_id( '_phone' ),\n            'value' => $value['phone'],\n            'desc'  => '',\n        ) ); ?>\n    </div>\n    <div class=\"alignleft\"><p><label for=\"<?php echo $this->_id( '_email' ); ?>'\"><?php echo esc_html( $this->_text( '_email_text', 'Email' ) ); ?></label></p>\n        <?php echo $this->types->input( array(\n            'name'  => $this->_name( '[email]' ),\n            'class' => 'cmb_text_small',\n            'id'    => $this->_id( '_email' ),\n            'value' => $value['email'],\n            'desc'  => '',\n        ) ); ?>\n    </div>\n    <p class=\"clear\">\n        <?php echo $this->_desc();?>\n    </p>\n    <?php\n    return $this->rendered( ob_get_clean() );\n}\n\npublic static function maybe_save_split_values( $override_value, $value, $object_id, $field_args ) {\n    if ( ! isset( $field_args['split_values'] ) || ! $field_args['split_values'] ) {\n        return $override_value;\n    }\n    $centreinfo_keys = array( 'centre-name', 'phone', 'email' );\n    foreach ( $centreinfo_keys as $key ) {\n        if ( ! empty( $value[ $key ] ) ) {\n            update_post_meta( $object_id, $field_args['id'] . 'centinfo_'. $key, sanitize_text_field( $value[ $key ] ) );\n        }\n    }\n    remove_filter( 'cmb2_sanitize_address', array( __CLASS__, 'sanitize' ), 10, 5 );\n\n    return true;\n}\npublic static function sanitize( $check, $meta_value, $object_id, $field_args, $sanitize_object ) {\n    if ( ! is_array( $meta_value ) || ! $field_args['repeatable'] ) {\n        return $check;\n    }\n    foreach ( $meta_value as $key => $val ) {\n        $meta_value[ $key ] = array_filter( array_map( 'sanitize_text_field', $val ) );\n    }\n    return array_filter($meta_value);\n}\npublic static function escape( $check, $meta_value, $field_args, $field_object ) {\n    if ( ! is_array( $meta_value ) || ! $field_args['repeatable'] ) {\n        return $check;\n    }\n    foreach ( $meta_value as $key => $val ) {\n        $meta_value[ $key ] = array_filter( array_map( 'esc_attr', $val ) );\n    }\n    return array_filter($meta_value);\n}\n\n}\nfunction cmb2_init_centreinfo_field() {\n    CMB2_Render_CentreInfo_Field::init();\n}\nadd_action( 'cmb2_init', 'cmb2_init_centreinfo_field' );\n}\nPost type :\nfunction post_type_region() {\n$labels = array(\n    'name'                  => _x( 'R\u00e9gion', 'Post Type General Name', 'text_domain' ),\n    'singular_name'         => _x( 'R\u00e9gion', 'Post Type Singular Name', 'text_domain' ),\n    'menu_name'             => __( 'R\u00e9gion', 'text_domain' ),\n    'name_admin_bar'        => __( 'Post Type', 'text_domain' ),\n    'archives'              => __( 'Item Archives', 'text_domain' ),\n    'attributes'            => __( 'Item Attributes', 'text_domain' ),\n    'parent_item_colon'     => __( 'Parent Item:', 'text_domain' ),\n    'all_items'             => __( 'Toutes les r\u00e9gions', 'text_domain' ),\n    'add_new_item'          => __( 'Ajouter une r\u00e9gion', 'text_domain' ),\n    'add_new'               => __( 'Ajouter une r\u00e9gion', 'text_domain' ),\n    'new_item'              => __( 'New Item', 'text_domain' ),\n    'edit_item'             => __( 'Edit Item', 'text_domain' ),\n    'update_item'           => __( 'Update Item', 'text_domain' ),\n    'view_item'             => __( 'View Item', 'text_domain' ),\n    'view_items'            => __( 'View Items', 'text_domain' ),\n    'search_items'          => __( 'Search Item', 'text_domain' ),\n    'not_found'             => __( 'Not found', 'text_domain' ),\n    'not_found_in_trash'    => __( 'Not found in Trash', 'text_domain' ),\n    'featured_image'        => __( 'Featured Image', 'text_domain' ),\n    'set_featured_image'    => __( 'Set featured image', 'text_domain' ),\n    'remove_featured_image' => __( 'Remove featured image', 'text_domain' ),\n    'use_featured_image'    => __( 'Use as featured image', 'text_domain' ),\n    'insert_into_item'      => __( 'Insert into item', 'text_domain' ),\n    'uploaded_to_this_item' => __( 'Uploaded to this item', 'text_domain' ),\n    'items_list'            => __( 'Items list', 'text_domain' ),\n    'items_list_navigation' => __( 'Items list navigation', 'text_domain' ),\n    'filter_items_list'     => __( 'Filter items list', 'text_domain' ),\n);\n$args = array(\n    'labels'                => $labels,\n    'label'                 => __( 'R\u00e9gion', 'text_domain' ),\n    'description'           => __( 'R\u00e9gion', 'text_domain' ),\n    'public'                => true,\n    //'rewrite'             => array( 'slug' => 'cours', 'with_front' => true ),\n    'has_archive'           => true,\n    'publicly_queryable'    => true,\n    'query_var'             => true,\n    'supports'              => array( 'title', 'editor', 'thumbnail', 'excerpt' ),\n    'hierarchical'          => false,\n    'menu_position'         => 2,\n    'exclude_from_search'   => false,\n    'show_ui'               => true,\n    'show_in_menu'          => true,\n    'menu_icon'             => 'dashicons-location-alt',\n    'show_in_admin_bar'     => true,\n    'show_in_nav_menus'     => true,\n    'capability_type'       => 'post',\n);\nregister_post_type( 'region', $args );\n\n}\nadd_action( 'init', 'post_type_region', 0 );\n}\nfunction cmb2_region() {\n$cmb = new_cmb2_box( array(\n    'id'           => $prefix . 'centres_informations_provinciaux',\n    'title'        => esc_html__( 'Centres d\\'informations provinciaux', 'cmb2' ),\n    'object_types' => array( 'region', ),\n) );\n$cmb->add_field( array(\n    'id'          => 'centres_informations_provinciaux_location',\n    'type'        => 'centreinfo',\n    'repeatable' => true,\n    'text' => array(\n        'add_row_text' => 'Ajouter un autre centre d\\'information',\n    ),\n) );\n\n}\nadd_action( 'cmb2_admin_init', 'cmb2_region' );. It's working now.\nThank you!. ",
    "GaryJones": "\nare you saying to retroactively apply the updated versioning? I\u2019m not a fan of that idea for a few reasons, but would like to hear your thoughts either way.\n\nNo, definitely not. Can you imagine the support burden and confusion that would have when two different releases were tagged with the same version number?!\nThe latest release is 2.2.6.1. Let that, and everything before it stay as is. \nThe next version is decided, at release time, based on what's being included. If it's a bug-fix only release, it will be 2.2.7. If you also add some enhancements (whether or not it includes bug fixes or not), then use 2.3.0.\nThe extra advantage of doing this is the following scenario:\nLet's say 2.2.7 has a security issue, but 2.3.0 and 2.3.1 have already been released. No problem - take the 2.2.7 releases, and hotfix into a 2.2.8 release. Take the 2.3.1 release and hotfix it into 2.3.2.\nThat's pretty much what WP has done since auto-updating has come in. Now, since these are not considered \"major\" releases like WP does, you may want to only support to a limited number of x.y releases back, or maybe none, but with semver, the option is there. Those who have CMB2 active as a plugin will just get the latest version that's pushed to the .org repo, but those using it via Composer dependency, or as a manual include, can pick whether they just want to be hotfixed, or take a deeper look at the next minor branch.. ",
    "breth84": "Yes, thanks. ",
    "johndiego": "I would like to create custom fields in a taxonomy and not in a post_type.,\nSorry my english!!\nThanks for repply @jtsternberg \n. one more question..\nhow i can tel CMB2 this is posty_type multicheck in my code?\nphp\n            $cmb->add_field( array(\n                'name'     => esc_html__( 'Grades canais', 'cmb2' ),\n                'desc'     => esc_html__( 'myfield', 'cmb2' ),\n                'id'       => $prefix . 'grade',\n                'type'     => 'taxonomy_multicheck',??? // how i can say here  post_type???\n                'taxonomy' => 'grade', \n                'inline'  => true, \n                'select_all_button' => false,\n            ) );\nveryyyyyy thanks , save my live  :+1: . I solved my problems , Thanks @GitaStreet  @jtsternberg !!\nI wiill search how i can display custom fields in my vew!\nthanks!!. How can I save the selected taxonomies and retrieve the IDS?. \nthis dont save my field!!\nHow i can save selected with ids?\n. @jtsternberg  Thanks!!!!. BUG query_posts function. Thanks! @tw2113  work for -me!!. ",
    "GitaStreet": "If I understand correctly, probably wanting to use Custom Post Type powered WordPress taxonomies. Like this plugin:\nhttps://wordpress.org/plugins/cpt-onomies/. ",
    "remkus": "Why use Transifex/WP Translations.org at all? Since CMB2 lives as a plugin in the WordPress plugin repo, we can rely solely on the translation projects here. If you need help sorting this out and making it work natively, just let me know!. ",
    "pacifier007": "Thanks for pointing these out. I did come across them while reading the documentation,  unfortunately they seem to be usable on one-field basis. I would like to have that behavior globally - for all fields. Upon saving, for all fields, I wish to check if the value is the default value and prevent saving it. Is there a global \"pre-save\" filter somewhere?. ",
    "vlib": "Hello\nIve tried a quick test too on new php 7.2 to update a personal project. A lot of Types works well but text_datetime_timestamp is problematic (doesnt work at all with php 7.2, until 7.1 branch) .. ",
    "radd2004": "Any update on this, pretty the only blocker to rolling 7.2 on our sites as cmb2 is pretty much used on every wp site. Happy to buy someone a beer to pull in a pull request if that is not already underway. . ",
    "salientroot": "Hi, I got the same issue now.\nPlease help me as soon as possible.. sorry, I am using the wp real estate plugin now and got the issue. yeah, i think so, but the plugin is just the latest version.. hmm, I think it's not good way. ok, anyway this is not your problem. thanks for your help :). ",
    "droidmanspace": "Does downgrade of php fix it?. ",
    "ancilkanto": "\n$tenders_meta->add_field( array(\n        'name' => esc_html__( 'Closing Date', 'notion' ),\n        'desc' => esc_html__( 'Specify the closing date.', 'notion' ),\n        'id'   => $prefix . 'tender_closing_date',\n        'type' => 'text_date',\n        'date_format' => 'd/m/Y',\n\n    ) );\n\n. ",
    "stuartshields": "@ancilkanto Just use text_date_timestamp and when you need to output it use date_i18n. ",
    "danielbachhuber": "\nWould the goal be to take fields registered via the field API and dynamically generate JS for registerBlockType\n\nAs it makes sense to, I think. Some fields could remain in meta boxes, while others would make sense to move to blocks.\n. ",
    "broros": "keeping backward compatibility is a bad idea, just fork it and rename CMB3 for Gutenberg release.. @jtsternberg The meta box API isn\u2019t being deprecated but there\u2019s also no clear path forward for how Gutenberg will support \u201clegacy\u201d PHP meta boxes. \nwe need to use blocks api  https://wordpress.org/gutenberg/handbook/block-api/. its just an options page with a text field\n```\n$secondary_options = new_cmb2_box( array(\n        'id'           => 'wp_secondary_options_page',\n        'title'        => esc_html__( 'Options', 'cmb2' ),\n        'object_types' => array( 'options-page' ),\n        'option_key'   => 'wp_secondary_options',\n        'parent_slug'  => 'wp_main_options',\n    ) );\n$secondary_options->add_field( array(\n        'name'    => 'Text option ',\n        'desc'    => 'description',\n        'default' => '1152043086',\n        'id'      => 'wp_rest_textmedium',\n        'type'    => 'text_medium',\n    ) );\n```. all I want to do is change the rest api url prefix, Which hook should I use?. If I do that I get\nFatal error: Uncaught Error: Call to undefined function cmb2_get_option() in ...\ncmb2_get_option() Does not work if its not called inside a cmb2_init hook. I tried it in both theme and plugin with same results. the problem is that cmb2_get_option() cannot be called outside of the cmp2 loop.... cmb2_get_option() ONLY works inside -> add_action( 'cmb2_init'). cmb2_after_init  is the same as cmb2_init,  I'm still getting three values printed on the page\nthis will print out one value:\nadd_action( 'cmb2_init', 'wp_api_slug' );   \nfunction wp_api_slug(){\n    $wp_rest_url = cmb2_get_option('wp_secondary_options', 'wp_rest_textmedium');\n    echo $wp_rest_url;\n}\nand what I have at the first comment above will print three values, Do you know why this is happening?. its not the init,\nmy conclusion is that there is something wrong with CMB2, the code below should work perfectly fine except that it gives me three values instead of one.\nIt has something to do with rest_url_prefix\nadd_action( 'admin_init', function() {\n  add_filter( 'rest_url_prefix', function($slug) {\n   $wp_rest_url = cmb2_get_option('wp_secondary_options', 'wp_rest_textmedium');\n    echo $wp_rest_url;\n  } );\n} );. I understand what you are saying, it will only change in the source code but not in the url ( you have to update your permalinks )\nif you try \" /avc/wp/v2  \" you will get an error. I only get the first link generated but not 2nd and 3rd\n<link rel=\"https://api.w.org/\" href=\"http://localhost:8888/wordpress/298735786/\">. ",
    "juanpablogdl": "Using the same approach as ACF did is a great idea, I want to be part of this . ",
    "Sebaortiz": "I have changed the show_on_cb parameter  for   'show_on' => 'cmb_show_meta_to_chosen_roles' and I have added it directly in the field. but it still doesn't work. ",
    "MWDavidH": "Hi, thanks for your answer ! Sorry it's a local configuration problem. My CMB2 version is 2.3.0 and wordpress 4.9.2.\nAfter inspecting with F12, I found the problem. The image is here but I can't see it because the upload path is wrong. I am working with \"browserSync\" so my local url is \"//localhost:3000/my-project/, when I press save the path changes to src=\"//localhost:3000:3000/my-project/wp-content/uploads/. The path shoud be //localhost:3000/my-project/wp-content/uploads/.. ",
    "serkanalgur": "You are welcome :+1: . Changed :+1: . ",
    "jeni1616": "@RubenMartins   Could you provide code which you used for custom endpoint to deal with this ? I am trying to learn it :)\nThanks.. ",
    "grappler": "That is strange as register_setting() was introduced in WP 2.7. https://developer.wordpress.org/reference/functions/register_setting/. ",
    "webcodist": "+1. ",
    "byananta": "```php\nadd_action('cmb2_admin_init', 'testing'  ); \n public function testing() {\n    /\n     * Registers options page menu item and form.\n     /\n    $cmb = new_cmb2_box( array(\n        'id'           => 'ap_option_metabox',\n        'title'        => esc_html__( 'Site Options', 'myprefix' ),\n        'object_types' => array( 'options-page' ),\n        /\n         * The following parameters are specific to the options-page box\n         * Several of these parameters are passed along to add_menu_page()/add_submenu_page().\n         */\n        'option_key'      => 'ap_options',\n        'menu_title'      => esc_html__( 'Options', 'myprefix' ),\n        'parent_slug'     => 'edit.php',\n        //'capability'      => 'manage_options',\n    ) );\n$cmb->add_field( array(\n    'name' => 'Image Caption',\n    'id'   => 'image_caption',\n    'type' => 'text',\n ) );\n //var_dump(get_option('ap_options'));\n}\n```. Hi, thanks for your reply. Above code is just a reference.. I have found the problem when the option page under a submenu like edit.php or under any custom post type at that time the value is not poputating after save the data. But its working in xampp but not in my remote hosting. Xampp php version 7.1.4 and hosting php version is 5.3.33. But i am getting the option but not in the field value... When i am using the parent_slug then the problem if i remove that then its working.. This code is working for me. When i am trying to make it under another menu or post type then the value is not populating after saving the data. This is the code which i am using.\nadd_action('cmb2_admin_init', array($this, 'testing' ) ); \n public function testing(){\n    $cmb_options = new_cmb2_box( array(\n        'id'           => 'ap_option_metabox',\n        'title'        => esc_html__( 'Site Options', 'myprefix' ),\n        'object_types' => array( 'options-page' ),\n        /\n         * The following parameters are specific to the options-page box\n         * Several of these parameters are passed along to add_menu_page()/add_submenu_page().\n         /\n        'option_key'      => 'ap_options', // The option key and admin menu page slug.\n        // 'icon_url'        => 'dashicons-palmtree', // Menu icon. Only applicable if 'parent_slug' is left empty.\n        // 'menu_title'      => esc_html__( 'Options', 'myprefix' ), // Falls back to 'title' (above).\n        // 'parent_slug'     => 'themes.php', // Make options page a submenu item of the themes menu.\n        // 'capability'      => 'manage_options', // Cap required to view options-page.\n        // 'position'        => 1, // Menu position. Only applicable if 'parent_slug' is left empty.\n        // 'admin_menu_hook' => 'network_admin_menu', // 'network_admin_menu' to add network-level options page.\n        // 'display_cb'      => false, // Override the options-page form output (CMB2_Hookup::options_page_output()).\n        // 'save_button'     => esc_html__( 'Save Theme Options', 'myprefix' ), // The text for the options-page save button. Defaults to 'Save'.\n    ) );\n    /\n     * Options fields ids only need\n     * to be unique within this box.\n     * Prefix is not needed.\n     /\n    $cmb_options->add_field( array(\n        'name' => ( 'Test Text', 'myprefix' ),\n        'desc' => ( 'field description (optional)', 'myprefix' ),\n        'id'   => 'test_text',\n        'type' => 'text',\n        'default' => 'Default Text',\n    ) );\n    $cmb_options->add_field( array(\n        'name'    => ( 'Test Color Picker', 'myprefix' ),\n        'desc'    => ( 'field description (optional)', 'myprefix' ),\n        'id'      => 'test_colorpicker',\n        'type'    => 'colorpicker',\n        'default' => '#bada55',\n    ) );\n  }. This is not working. setting updated but the value is not showing. Because i have added this line 'parent_slug'     => 'edit.php',\n\nWithout parent_slug it is working..\n\n. This is happening with my site because i have tested this with another hosting. It is working there. But this is localhost where i am testing.. Actually i am using cmb2 in my plugin. When i am installing this plugin in another wordpress then it is working fine.. i have also removed all the other plugins but same problem. I am trying to findout which code is creating the problem... I did not find exact cause. But same code was working in another wordpress\nsetup.\nThanks,\nAnanta\nOn Sat 20 Oct, 2018, 11:19 AM Michael Beckwith, notifications@github.com\nwrote:\n\n@byananta https://github.com/byananta did you ever get this figured\nout? At least if you recall?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/CMB2/CMB2/issues/1102#issuecomment-431551941, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/Af7_shcM32Hi0XsSWO6S4IeSO-xpDONbks5umrl_gaJpZM4Sekih\n.\n. Hi, Many many thanks for your prompt reply. I have found the problem. The problem was max_input_vars problem. Now it is working fine. Thanks again. \n",
    "vollyimnetz": "hi, thank you for your quick response. You are right. The problem is caused by the plugin \"SiteOrigin Widgets Bundle\" (which i do not even use on this page).\nI will create a ticket on there issue page.\n\nBut, you may want to think about the feature request (auto grow of the wysiwyg-field).\nissue can be closed.. ",
    "danielck": "Unfortunately the current behaviour makes it incompatible with any other unix timestamp out there. If it\u2019s too late to fix the default behaviour, maybe there could at least be an option that could be set when registering the field?. This is worse than I thought. I assumed based on the documentation that I could override the timezone with 'timezone' or 'timezone_meta_key' set to 'Europe/Helsinki' (which is UTC+2), but what happens now is every subsequent save increments the value by 2 hours. So it seems that when the value is read from the DB, it is treated as UTC, but on save the value is just saved as a unix timestamp instead of first changing the date/time to UTC.. ",
    "pjohanneson": "Thanks, @tw2113, that solved the problem I was having.. ",
    "amans2k": "I completely agree with you guys \nThemes should do proper checking before calling functions.\nI have already given a patch code to the theme developers https://i.imgur.com/pTtIKIg.png\nIn WordPress, 'postbox' class is usually added to meta box wrapper https://i.imgur.com/TtFfaqe.png, and every meta box has 'id' attribute\nAnd it is used in CMB2 group field as well without the 'id' attribute\nThis is a theme js conflict with CMB2 plugin. And there is a significant audience for both.\nIt's a small change in cmb2 that can prevent js error on their client sites.. ",
    "MyLoVeSunITy": "+1 for this problem. what should happen to you to eliminate this problem?. ",
    "Moultrex": "It causes trouble also with Wp Export and Wp All import plugins from www.wpallimport.com\nIf you comment out this code \n/wp-content/plugins/cmb2/includes/CMB2_JS.php\nline: 234\nEverything works again.. ",
    "dameer": "After long long run, I finally spotted troublemaker. Believe it or not it's SiteOrigin Page Builder plugin. I still can't figure out how come and why so I guess there's another long run ahead of me.\nThanks for a hint buddy, I appreciate your efforts!\nEDIT:\nMore precisely, it's SiteOrigin Widgets Bundle causing the problems. Any ideas?. Holy guacamole! Sorry for being such a lame ass, I forgot the trunk branch. Thanks for everything!!!. ",
    "Mik0101": "No, the developer tool doesn't show any error.\nI sent you a copy of WPML at info@michaelbox.net\nThe pop up appears if I use the function new_cmb2_box to create a new meta box.\nThank you.\n. Thank you. I used CMB2 bundled in a wordpress theme.\nThen I installed WPML and I got that pop up.\nThe pop up appears whenever you try to create/edit a post or page.\nI tried commenting several parts of code and I found that the problem is caused by a conflict between WPML and CMB2.\nIt doesn't matter which kind of meta fields you use. Even a CMB2 box with no fields will trigger that popup from WPML.\nThanks for your patience.. I'm sorry, I don't know, this is the code that triggers the error.\nIf I delete this code the pop up disappears:\n```php\nadd_action( 'cmb2_init', 'register_hotelbooking_metabox', 999, 0 );\nfunction register_hotelbooking_metabox() {\n$prefix = 'hotelbooking_cf_';\n\n$cmb_page = new_cmb2_box( array(\n    'id'            => $prefix . 'metabox_page',\n    'title'         => __( 'Page Options', \"hotelbooking-toolkit\" ),\n    'object_types'  => array( 'page', 'post' ), // Post type\n    'context'       => 'normal',\n    'priority'      => 'high',\n    'show_names'    => true, // Show field names on the left\n) );\n\n$cmb_page->add_field( array(\n    'name'             => 'Content Area Padding',\n    'desc'             => 'If your content section need to have just after header area without space, please select an option Off',\n    'id'               => $prefix . 'content_padding',\n    'type'             => 'select',\n    'default'          => 'on',\n    'options'          => array(\n        'on' => __( 'On', \"hotelbooking-toolkit\" ),\n        'off'   => __( 'Off', \"hotelbooking-toolkit\" ),\n    ),\n) );\n\n}\n```. I'm sorry, maybe It's something in my theme. Thanks anyway.\n2018-04-16 4:12 GMT+02:00 Michael Beckwith notifications@github.com:\n\nStill not managing to recreate the issue without actually changing that\ndropdown myself. Nothing is causing it to popup automatically.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/CMB2/CMB2/issues/1115#issuecomment-381460660, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AkkgchIctI_GSSAtsVzesxBSomIVUoyAks5to_4bgaJpZM4TTEYu\n.\n. Yes i did bit i still have the same problem.\n. \n",
    "felipeelia": "Hi @tw2113, thanks for the quick reply!\nThe WP Translations.org link is broken, IDK if it's still up and running. What I mean here is that we should at least update those links.\nI agree that we should think about people using it as a library, but letting it go both ways can end up being an extremely messed up strategy, with two different versions of the same thing (and IMHO the version here in GitHub will always be very outdated). A suggestion would be (1) a textual info in README.md remembering people who intend to use it as a library to pick the desired .mo/.po files from GlotPress, OR (2) have a automatic way to pull those files from GlotPress to this repo. What do you think?. Yeah, I've made a comment about the current scenario here.. ",
    "shakeeb-mts": "@tw2113 but the UI will not look cools and also I want to categorize data in tabs, how to achieve this. Why don't we have such feature in core where we can set how to save data in exploded way (every field in separate meta) or under one key.. ",
    "TekAddict": "I'm having this exact issue at the moment and need to find how to fix it urgently. I'm waiting to send the site live for the customer and this is the last fix I need. Please help. ",
    "xdosil": "Same issue... any solution?. ",
    "thomasstr": "Any fix on this? We are also having this problem on multisite. The current error we are getting is;\nFatal error: Uncaught Error: Method name must be a string in /public_html/nwmulti/wp-content/plugins/insight-core/libs/cmb2/includes/CMB2_Field.php:512 Stack trace: #0 /public_html/nwmulti/wp-content/plugins/insight-core/libs/cmb2/includes/CMB2_Field.php(543): CMB2_Field->sanitization_cb(NULL) #1 /public_html/nwmulti/wp-content/plugins/insight-core/libs/cmb2/includes/CMB2_Field.php(529): CMB2_Field->save_field(NULL) #2 /public_html/nwmulti/wp-content/plugins/insight-core/libs/cmb2/includes/CMB2.php(777): CMB2_Field->save_field_from_data(Array) #3 /public_html/nwmulti/wp-content/plugins/insight-core/libs/cmb2/includes/CMB2.php(745): CMB2->process_field(Array) #4 /public_html/nwmulti/wp-content/plugins/insight-core/libs/cmb2/includes/CMB2.php(717): CMB2->process_fields() #5 /public_html/nwmulti/wp-content/plugins/insight-core/libs/cmb2-tabs/inc/cmb2-tabs.class.php(130): CMB2->save_fields() #6 /public_html/nwmulti/wp-includes/clas in /public_html/nwmulti/wp-content/plugins/insight-core/libs/cmb2/includes/CMB2_Field.php on line 512. ",
    "MattPurland": "I've found we have this issue with sites cloned using NS Cloner:\nhttps://en-gb.wordpress.org/plugins/ns-cloner-site-copier/\nEverything except the saving of meta fields is working, though saving meta on Options pages is working.\nAs mentioned by @rubengc this seems to be down to ms_is_switched() returning true. Dumping the contents of  $GLOBALS['_wp_switched_stack'] shows some switching has been made - but it's not by our theme (it's completely custom written by us, and I've checked) and neither plugins (they're all disabled).\nI'm struggling to find what's breaking the chain of resetting the switched blogs - any insight would be appreciated.\nAs per the new-issue-template:\nExpected Behavior:\nFields should save\nActual Behavior:\nFields aren't saving due to ms_is_switched() returning true as part of the CMB2_hookup->can_save() function\nPossible Solution\nNot sure, as I believe it's due to how the site was cloned - not that I'd expect the creator of CMB2 to provide a fix, but possibly a nudge in the right direction as to WHY this is happening\nPossible Solution's Risk Level\nN/A\nSteps to reproduce\n\nUse NS Cloner to clone the main site in the network\nAttempt to modify a CMB2 field in any post/page\n\nCMB2 Field Registration Code:\n```php\n// Video\n    $video = new_cmb2_box([\n        'id'           => 'video',\n        'title'        => 'Video',\n        'object_types' => ['media', 'product', 'knowledge', 'page'],\n        'context'      => 'normal',\n        'priority'     => 'high',\n        'show_names'   => false\n    ]);\n$video->add_field([\n    'name'    => 'Video',\n    'id'      => s_.'video',\n    'type'    => 'text_url',\n    'desc'    => 'Url for YouTube, Vimeo etc.'\n]);\n\n```\nYour Environment\nEnvironment doesn't matter, this happens locally (MAMP with PHP 7.1) or on our staging server (Cloudways via Digital Ocean, Nginx proxy to Apache with PHP 7.1)\nScreenshots (if appropriate)\nN/A\nHack to fix\nIn order to get around this issue I've implemented the following, though I've no idea of any consequences:\n```php\nadd_action('pre_post_update', 'sp_pre_post_update');\nfunction sp_pre_post_update($post_id) {\n    $GLOBALS['_wp_switched_stack'] = [];\n}\n```. @jtsternberg with the logging I was able to find the issue pretty quickly. I managed to forget that disabling a network plugin doesn't disable it within the sites themselves - it was a plugin causing the switching (https://en-gb.wordpress.org/plugins/intuitive-custom-post-order) where the plugin is switching back to the current blog by using switch_to_blog( $curr_blog ) instead of restore_current_blog.\nWon't be using that one again.. @tw2113 Yup!\n@jtsternberg definitely, never though of doing that before.\nUnfortunately I need a plugin that can order posts and taxonomy terms - what I was using did exactly what I needed. I'm sure there's something else out there.\nThanks all for your help!\nEdit: found one https://wordpress.org/plugins/simple-custom-post-order/. ",
    "AntonioBodean": "Already create the categories and personalized input from metabox.\n\nHow is it now in public on the intranet:\n\nNow I need to post the type of absence ... Can you explain me as a personalized solution?\nThanks for answering!. ",
    "StanSkrivanek": "Thanks, Im echoing meta thru custom WP_Query\nphp\n<div class=\"column list\">\n    <h3 class=\"red\"> What you will learn ?</h3>\n    <?php echo get_post_meta( get_the_ID(), 'workshop_data_youlearn', true ); ?>\n</div>\nAll is working fine it just doesn't keep text columns separation . . Thank you, that's working and columns are now displayed (separated) as expected. If I can ask, can you point me to any article(s) where I can get explanation why I should do it this way? I would like to understand why my code didn't work and avoid my mistake in future. Thanks again.. Thanks\n. Thanks for fast response, I will look on recommended source.. Spending all day reading similar cases trying different codes and nothing is working for me :( this is my lats attempt. What IM doing wrong? Can some one help? What should be meta_value ?\nphp\n  $args = array(\n                        'post_type'      => 'workshops',\n                        'posts_per_page' => 10,\n                        'meta_query' => array(\n                                'key' => 'workshop_data_event_date',\n                                'value' => date('d-m-Y'),\n                                'type' => 'text_date' // I had also \"DATE\" and is not work either :(\n                        ),\n                        'orderby'        => 'meta_value',\n                        'order'          => 'DESC'\n                    );`. I don't know why but it works,  finally :) . I had to use timestamp as you suggest. \n```php\n$args = array(\n    'post_type' => 'workshops',\n    'meta_query' => array(\n        array(\n            'key' => 'workshop_data_event_date',\n            'value' => time(),\n            'compare' => '>'\n        )\n    ),\n    'meta_type' => 'text_date_timestamp',\n    'orderby'   => 'meta_value_num',\n    'order'     => 'DESC'\n);\n``\nI have stored date inforeachloop tovar`.\nphp\n $datum = get_post_meta( $article->ID, 'workshop_data_event_date', true );\nthis give me UNIX Time for each workshop and I'm converting UNIX to date by date();\nphp\ndate('d-m-Y', $datum)\nAny opinion to improve it? BTW thanks to be patient.. Thanks for it\nEDIT: Now I have 'value' => current_time('timestamp'),. I have just add my API Key into core code of cmb-field-map.php. Not elegant but it solved my problem. Only problem is that text field (map search) doesn't keep text after saving (updating) CPT. . ",
    "cehojac": "Yes, i do!. ",
    "lumpysimon": "Thanks @jtsternberg for the quick fix on this, all working great again now.. ",
    "ljsherlock": "Hi guys and @lipemat thanks for the great work. Maybe I'm being really stupid, but I can't get this working. \nIs the option: \"sortable: true\" all that should be required?\nThanks!. > Hi guys and @lipemat thanks for the great work. Maybe I'm being really stupid, but I can't get this working.\n\nIs the option: \"sortable: true\" all that should be required?\nThanks!\n\nPlease ignore. I didn't realise that repeatable groups was a separate (open) pull: #1145 . . I was able to recreate the issue with repeatable groups. \nIs this fork still being actively worked on? I would really like this functionality.. ",
    "chr0s": "Hero, thank you. That fixed the wysiwyg, although the file list gallery is still just showing the word \"array\". I've removed all instances of esc_html - do you know what could be affecting the gallery?. Thank you! I found this page - if I replace file_list_meta_key with my file_list id, will that be on the right track? . Lovely, I've got it working now. Thanks a lot for your help - bit off a little bit more than I could chew I think! . Absolutely!. ",
    "chrisvanpatten": "Really excited for this to land!\nI also did some testing with a fairly complex repeatable group and was able to add, reorder, add, delete, etc. and various combinations of the above without issues. The indexes all seemed correct, even after saves and reloads.\nIf there's any further testing I can help with, let me know!. ",
    "Rcreators": "I have solved issue for text fields that instead of using default value, i used placeholder. But there is still issue with Dropdown. Whether i select or not, it saves dropdown value by default with first option in dropdown. . ",
    "canonex": "No, I did not tested in the trunk branch: if it is necessary I can do it like on wednesday.\n\nOtherwise, it looks to mostly be a JS topic and trying to keep track of the so-called randomness of adding/removing.\n\nSome thought: it's obvious that no cmb2 functionality relies on ids, otherwise it wouldn't work. \nCan't be easier that id and all the related stuff don't get updated when a section is removed nor created?\nIf I create seven section, the last will be ...group_7_ins... .\nIf I remove the the fourth, the last one (the sixth) still maintain the same id ...group_7_ins... (that mean the seventh created id this editing session).\nOr, on the total opposite, count again from the start?\nI'm doing a custom backend and I care of this bug more because the id is duplicated that is \"wrong\".\nThank you,\nRickyx\n. ",
    "DardanMu": "@tw2113 Thanks for your quick reply. Yes they are in order when viewing it in the DB directly. \nI did a little more digging, the issue seems to be that they are saved in the db like this:\na:2:{i:50;s:107:\"url_here1\";i:13;s:56:\"url_here2\";}\narray( (image_id => url) )\nwhere image_id is an int. I think when you call get_post_meta() it unserializes the array but thinks the int keys are actually the index in simple array? which is why they may be returned in a ordered fashion like that.\nHowever if you loop over the result like this: foreach ($id => $value in get_post_meta()) {}, it seems to work fine, with every iteration being in the correct order...\nso maybe an easy fix would be to store the id's as a string?. @tw2113 hmm you are right. get_post_meta() returns the data in the correct order as saved in the DB. To test this I was using a WP rest endpoint so the data I was seeing was first going through a json_encode() function <- and that is where the problem lies.\nSending an array with int keys through a JSON serialiser will change the order just because of how javascript works. Relevant: https://stackoverflow.com/questions/20912492/json-encode-not-preserving-order\nI apologize since this is not an issue related to this plugin. But currently requesting cmb2 file_list data through the WP rest api will not have the correct order. As a work around i've created my own custom endpoint to get the results in the right order. A little annoying but it works.\nThanks again for looking into it so soon. . ",
    "cupcakedream": "Unfortunately that didn't work - this is the initialization if it helps:\n$cmb = new_cmb2_box( array(\n        'id'           => 'lc-notices',\n        'title'        => 'Notices',\n        'object_types' => array( 'options-page' ),\n        'option_key'      => 'lc-notices',\n        'parent_slug'     => 'edit.php?post_type=page',\n    ) );. What about after you save it to the DB - is the value set to the old value or the new value?. Thanks for responding - I understand all of that. What i'm looking for is to statically set the field value - even if there is a value saved in the DB - the value would still be the static value.. Perfect - i'll give this a try - thanks!. This worked - thanks again!. ",
    "helena-reshift": "I have the same problem, Is there any soluton yet?. > Thanks @staurand, fixed!\nSorry for the stupid question but how can i get the solution working on my site? I've updated CMB2 plugin to 2.4.2 version - still didn't fix it.. > @helena-reshift it's not released yet to say wordpress.org or so yet. You'd need to download and test with a copy of the develop branch for CMB2 here on GitHub.\ni see! thanks!\nMy only small concern is that looks like here on github there is more files than in the plugin. Is there a manual or some tips on how to use dev copy from github? Sorry, i should probably know this but i'm a bit lost.. ",
    "shoelaced": "Same!. ",
    "geekyposh": "Also running into this problem.. ",
    "AndreaBarghigiani": "Same here, anyone have found a better solution that hit the text tab? I can't doploy this to a client site \ud83d\ude1e . ",
    "staurand": "From what I can see, the Tinymce editor updates the hidden <textarea> when the parent form is submitted.\nHowever the metabox form is not submitted with Gutenberg.\nThe code below (pasted in the console) fix the problem.\n(update Tinymce editors when the post is saved)\njavascript\nwp.data.subscribe(function () {\n   if (wp.data.select( 'core/editor' ).isSavingPost()) {\n     if (window.tinymce && window.tinymce.editors) {\n    for (var i = 0; i < tinymce.editors.length; i++) {\n      tinymce.editors[i].save();\n    }\n    }\n  }\n});\nNot sure where it should go in CMB2 code or if it should be in CMB2 at all...\nThe source of the problem is already identified in Gutenberg doc:\nhttps://wordpress.org/gutenberg/handbook/extensibility/meta-box/#common-compatibility-issues\n\"Here are some common reasons why meta boxes might not work as expected in Gutenberg: [...]  Plugins making updates to their DOM on \u201csubmit\u201d or on \u201csave\u201d.\"\n. @tw2113 I think it feels odd to try to evaluate the change property (could be as you said an anonymous function or a global function but also a function from a global object: MyGlobal.myfunction...)\nMaybe we should filter out the color picker change attribute and move it to a script.\nPseudo code:\n$('#color-picker-id').on('irischange', <?php echo $attributes['color-picker']['change']); ?>);. Is there an \"official\" way to retrieve WP version number in JS?. @slaFFik ok thanks.. ",
    "benny-ben": "Thank you so much @tw2113 for the feedback.\nA clarification: I read that using the parameter 'sanitization_cb' bypass the CMB sanitization, but I checked in CMB2_Sanitize.php and it doesn't seem that file_list is treated. Using the sanitization function posted above, do I compromise security some way?. Thank you so much @tw2113  for the advice. I didn't know anything about this CMB2 feature, I tried with override saving of meta value in a file_list ($field_id = 'photo') field in a repeatable group like this:\n```\nfunction benny_cmb_override_saving_photo( $check, $a, $field_args, $field ) {\nif ( ! function_exists( 'icl_object_id' ) )\n    return $check = true;\n\nif ( empty( $a[ 0 ] ) )\n    return $check = true;\n\n$main_lang = apply_filters( 'wpml_default_language', NULL );\n\n$post_id = $a[ 2 ];\n\n$post_lang = apply_filters( 'wpml_post_language_details', NULL, $post_id );\n$post_lang = $post_lang[ 'language_code' ];\n\nif ( $post_lang == $main_lang )\n    return $check = true;\n\n// $value pu\u00f2 essere trovato anche in $field->value assicurarsi di inserire\n// il cast to (array) nel foreach se lo si usa\n$photo = $a[ 0 ];\n\n$trad_photo = array();\n\nforeach ( $photo as $id => $url ) {\n\n    $photo_lang = apply_filters( 'wpml_post_language_details', NULL, $id );\n    $photo_lang = $photo_lang[ 'language_code' ];\n\n    $post_type = get_post_type( $id );\n\n    if ( $photo_lang !== $post_lang ) {\n\n        $trad_id = apply_filters( 'wpml_object_id', $id, $post_type, FALSE, $post_lang );\n\n        if ( ! empty( $trad_id ) ) {\n\n            $trad_photo[ $trad_id ] = $url;\n\n        }\n    }\n}\n\nif ( ! empty( $trad_photo ) ) {\n\n    $a[ 0 ] = $trad_photo;\n\n    return $check = true;\n\n}\n\nreturn $check = true;\n\n}\nadd_filter( 'cmb2_override_photo_meta_save', 'benny_cmb_override_saving_photo', 10, 4 );\n```\nand everything seems to work great. Did you mean that I should have made it this way? Is it correct to perform the return with $check = true?\nThank you so much again for the tips. Thanks a bunch @tw2113 for your precious advice. ",
    "rasmustaarnby": "I'm currently looking into this myself, so I might be able to provide some clarity sooner or later but I just wanted to put this up here. . Ha! It almost took more time to compose this ticket than to debug, or I was just lucky. It seems to be related a synchronization feature in Polylang, so I guess this issue can be closed. \nThere is however still a \"bug\" or at least some inconsistent behavior, because the synchronization of meta fields from Polylang is only applied when the post meta field is registered trough CMB2, not when using \"vanilla\" WP. . ",
    "llllmlllda": "So this does work. Does or doesnt? Sorry. ",
    "congthien": "@tw2113 \nI changed to text_date_timestamp and it works well.\nThank you!. ",
    "harpreet43": "Thanks for replying. Plz find  it.\nfunction yourprefix_register_user_profile_metabox() {\n    $prefix = 'yourprefix_user_';\n/**\n * Metabox for the user profile screen\n */\n$cmb_user = new_cmb2_box( array(\n    'id'               => $prefix . 'edit',\n    'title'            => __( 'User Profile Metabox', 'cmb2' ), // Doesn't output for user boxes\n    'object_types'     => array( 'user' ), // Tells CMB2 to use user_meta vs post_meta\n    'show_names'       => true,\n    'new_user_section' => 'add-new-user', // where form will show on new user page. 'add-existing-user' is only other valid option.\n) );\n\n$cmb_user->add_field( array(\n    'name'     => __( 'Extra Info', 'cmb2' ),\n    'desc'     => __( 'field description (optional)', 'cmb2' ),\n    'id'       => $prefix . 'extra_info',\n    'type'     => 'title',\n    'on_front' => false,\n) );\n\n$cmb_user->add_field( array(\n    'name' => __( 'Qualification', 'cmb2' ),\n    //'desc' => __( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'qualification',\n    'type' => 'text',\n) );\n\n$cmb_user->add_field( array(\n'name' => 'Date of Joining',\n'id'   => 'dateofjoin',\n'type' => 'text_date',\n// 'timezone_meta_key' => 'wiki_test_timezone',\n'date_format' => 'd/m/Y',\n'attributes' => array(\n    // CMB2 checks for datepicker override data here:\n    'data-datepicker' => json_encode( array(\n        // dayNames: http://api.jqueryui.com/datepicker/#option-dayNames\n        //'dayNames' => array( 'Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi' ),\n        // monthNamesShort: http://api.jqueryui.com/datepicker/#option-monthNamesShort\n        //'monthNamesShort' => explode( ',', 'En,Feb,Mar,Abr,May,Jun,Jul,Ago,Sep,Oct,Nov,Dic' ),\n        // yearRange: http://api.jqueryui.com/datepicker/#option-yearRange\n        // and http://stackoverflow.com/a/13865256/1883421\n        //'yearRange' => '-100:+0',\n        // Get 1990 through 10 years from now.\n         'yearRange' => '1950:'. ( date( 'Y' ) + 10 ),\n    ) ),\n),\n) );\n\n$cmb_user->add_field( array(\n'name' => 'Date of Birth',\n'id'   => 'dateofbirth',\n'type' => 'text_date',\n// 'timezone_meta_key' => 'wiki_test_timezone',\n'date_format' => 'd/m/Y',\n'attributes' => array(\n    // CMB2 checks for datepicker override data here:\n    'data-datepicker' => json_encode( array(\n        // dayNames: http://api.jqueryui.com/datepicker/#option-dayNames\n        //'dayNames' => array( 'Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi' ),\n        // monthNamesShort: http://api.jqueryui.com/datepicker/#option-monthNamesShort\n        //'monthNamesShort' => explode( ',', 'En,Feb,Mar,Abr,May,Jun,Jul,Ago,Sep,Oct,Nov,Dic' ),\n        // yearRange: http://api.jqueryui.com/datepicker/#option-yearRange\n        // and http://stackoverflow.com/a/13865256/1883421\n        //'yearRange' => '-100:+0',\n        // Get 1990 through 10 years from now.\n         'yearRange' => '1950:'. ( date( 'Y' ) + 10 ),\n    ) ),\n),\n) );\n\n$cmb_user->add_field( array(\n    'name' => __( 'Desk Phone', 'cmb2' ),\n    'desc' => __( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'desk-phone',\n    'type' => 'text',\n) );\n\n$cmb_user->add_field( array(\n    'name' => __( 'Residence Phone No.', 'cmb2' ),\n    'desc' => __( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'res-phone',\n    'type' => 'text',\n) );\n\n$cmb_user->add_field( array(\n    'name' => __( 'Mobile', 'cmb2' ),\n    'desc' => __( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'mobile',\n    'type' => 'text',\n) );\n\n$cmb_user->add_field( array(\n    'name' => __( 'Department', 'cmb2' ),\n    'desc' => __( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'dept',\n    'type' => 'text',\n) );\n\n$cmb_user->add_field( array(\n    'name' => __( 'Designation', 'cmb2' ),\n    'desc' => __( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'desig',\n    'type' => 'text',\n) );\n\n$cmb_user->add_field( array(\n    'name' => __( 'Office Address', 'cmb2' ),\n    'desc' => __( 'field description', 'cmb2' ),\n    'id'   => $prefix . 'ofc-address',\n    'type' => 'textarea_small',\n) );\n\n$cmb_user->add_field( array(\n    'name' => __( 'Residential Address', 'cmb2' ),\n    'desc' => __( 'field description', 'cmb2' ),\n    'id'   => $prefix . 'res-address',\n    'type' => 'textarea_small',\n) );\n\n$cmb_user->add_field( array(\n    'name' => 'Anniversary',\n    'id'   => 'anniversary',\n    'type' => 'text_date',\n    // 'timezone_meta_key' => 'wiki_test_timezone',\n    'date_format' => 'd/m/Y',\n    'attributes' => array(\n        // CMB2 checks for datepicker override data here:\n        'data-datepicker' => json_encode( array(\n            // dayNames: http://api.jqueryui.com/datepicker/#option-dayNames\n            //'dayNames' => array( 'Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi' ),\n            // monthNamesShort: http://api.jqueryui.com/datepicker/#option-monthNamesShort\n            //'monthNamesShort' => explode( ',', 'En,Feb,Mar,Abr,May,Jun,Jul,Ago,Sep,Oct,Nov,Dic' ),\n            // yearRange: http://api.jqueryui.com/datepicker/#option-yearRange\n            // and http://stackoverflow.com/a/13865256/1883421\n            //'yearRange' => '-100:+0',\n            // Get 1990 through 10 years from now.\n             'yearRange' => '1950:'. ( date( 'Y' ) + 10 ),\n        ) ),\n    ),\n) );\n\n$cmb_user->add_field( array(\n    'name' => __( 'Spouse\\'s Name', 'cmb2' ),\n    'desc' => __( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'spouse-name',\n    'type' => 'text',\n) );\n\n$cmb_user->add_field( array(\n    'name' => 'Spouse\\'s Date of Birth',\n    'id'   => 'spouse-dob',\n    'type' => 'text_date',\n    // 'timezone_meta_key' => 'wiki_test_timezone',\n    'date_format' => 'd/m/Y',\n    'attributes' => array(\n        // CMB2 checks for datepicker override data here:\n        'data-datepicker' => json_encode( array(\n            // dayNames: http://api.jqueryui.com/datepicker/#option-dayNames\n            //'dayNames' => array( 'Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi' ),\n            // monthNamesShort: http://api.jqueryui.com/datepicker/#option-monthNamesShort\n            //'monthNamesShort' => explode( ',', 'En,Feb,Mar,Abr,May,Jun,Jul,Ago,Sep,Oct,Nov,Dic' ),\n            // yearRange: http://api.jqueryui.com/datepicker/#option-yearRange\n            // and http://stackoverflow.com/a/13865256/1883421\n            //'yearRange' => '-100:+0',\n            // Get 1990 through 10 years from now.\n             'yearRange' => '1950:'. ( date( 'Y' ) + 10 ),\n        ) ),\n    ),\n) );\n\n//First Child\n\n$cmb_user->add_field( array(\n    'name' => __( 'Child Name', 'cmb2' ),\n    'desc' => __( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'child1-name',\n    'type' => 'text',\n) );\n\n$cmb_user->add_field( array(\n    'name'             => 'Child',\n    'id'               => 'rdb_child1',\n    'type'             => 'radio',\n    'show_option_none' => true,\n    'options'          => array(\n        'Son' => __( 'Son', 'cmb2' ),\n        'Daughter'   => __( 'Daughter', 'cmb2' )\n    ),\n) );\n\n$cmb_user->add_field( array(\n    'name' => 'Date of Birth',\n    'id'   => 'child1-dob',\n    'type' => 'text_date',\n    // 'timezone_meta_key' => 'wiki_test_timezone',\n    'date_format' => 'd/m/Y',\n    'attributes' => array(\n        // CMB2 checks for datepicker override data here:\n        'data-datepicker' => json_encode( array(\n            // dayNames: http://api.jqueryui.com/datepicker/#option-dayNames\n            //'dayNames' => array( 'Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi' ),\n            // monthNamesShort: http://api.jqueryui.com/datepicker/#option-monthNamesShort\n            //'monthNamesShort' => explode( ',', 'En,Feb,Mar,Abr,May,Jun,Jul,Ago,Sep,Oct,Nov,Dic' ),\n            // yearRange: http://api.jqueryui.com/datepicker/#option-yearRange\n            // and http://stackoverflow.com/a/13865256/1883421\n            //'yearRange' => '-100:+0',\n            // Get 1990 through 10 years from now.\n             'yearRange' => '1950:'. ( date( 'Y' ) + 10 ),\n        ) ),\n    ),\n) );\n\n\n$cmb_user->add_field( array(\n    'name' => __( 'Child Name', 'cmb2' ),\n    'desc' => __( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'child2-name',\n    'type' => 'text',\n) );\n\n$cmb_user->add_field( array(\n    'name'             => 'Child',\n    'id'               => 'rdb_child2',\n    'type'             => 'radio',\n    'show_option_none' => true,\n    'options'          => array(\n        'Son' => __( 'Son', 'cmb2' ),\n        'Daughter'   => __( 'Daughter', 'cmb2' )\n    ),\n) );\n\n$cmb_user->add_field( array(\n    'name' => 'Date of Birth',\n    'id'   => 'child2-dob',\n    'type' => 'text_date',\n    // 'timezone_meta_key' => 'wiki_test_timezone',\n    'date_format' => 'd/m/Y',\n    'attributes' => array(\n        // CMB2 checks for datepicker override data here:\n        'data-datepicker' => json_encode( array(\n            // dayNames: http://api.jqueryui.com/datepicker/#option-dayNames\n            //'dayNames' => array( 'Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi' ),\n            // monthNamesShort: http://api.jqueryui.com/datepicker/#option-monthNamesShort\n            //'monthNamesShort' => explode( ',', 'En,Feb,Mar,Abr,May,Jun,Jul,Ago,Sep,Oct,Nov,Dic' ),\n            // yearRange: http://api.jqueryui.com/datepicker/#option-yearRange\n            // and http://stackoverflow.com/a/13865256/1883421\n            //'yearRange' => '-100:+0',\n            // Get 1990 through 10 years from now.\n             'yearRange' => '1950:'. ( date( 'Y' ) + 10 ),\n        ) ),\n    ),\n) );\n\n\n$cmb_user->add_field( array(\n    'name' => __( 'Child Name', 'cmb2' ),\n    'desc' => __( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'child3-name',\n    'type' => 'text',\n) );\n\n$cmb_user->add_field( array(\n    'name'             => 'Child',\n    'id'               => 'rdb_child3',\n    'type'             => 'radio',\n    'show_option_none' => true,\n    'options'          => array(\n        'Son' => __( 'Son', 'cmb2' ),\n        'Daughter'   => __( 'Daughter', 'cmb2' )\n    ),\n) );\n\n$cmb_user->add_field( array(\n    'name' => 'Date of Birth',\n    'id'   => 'child3-dob',\n    'type' => 'text_date',\n    // 'timezone_meta_key' => 'wiki_test_timezone',\n    'date_format' => 'd/m/Y',\n    'attributes' => array(\n        // CMB2 checks for datepicker override data here:\n        'data-datepicker' => json_encode( array(\n            // dayNames: http://api.jqueryui.com/datepicker/#option-dayNames\n            //'dayNames' => array( 'Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi' ),\n            // monthNamesShort: http://api.jqueryui.com/datepicker/#option-monthNamesShort\n            //'monthNamesShort' => explode( ',', 'En,Feb,Mar,Abr,May,Jun,Jul,Ago,Sep,Oct,Nov,Dic' ),\n            // yearRange: http://api.jqueryui.com/datepicker/#option-yearRange\n            // and http://stackoverflow.com/a/13865256/1883421\n            //'yearRange' => '-100:+0',\n            // Get 1990 through 10 years from now.\n             'yearRange' => '1950:'. ( date( 'Y' ) + 10 ),\n        ) ),\n    ),\n) );\n\n\n$cmb_user->add_field( array(\n    'name' => __( 'Child Name', 'cmb2' ),\n    'desc' => __( 'field description (optional)', 'cmb2' ),\n    'id'   => $prefix . 'child4-name',\n    'type' => 'text',\n) );\n\n$cmb_user->add_field( array(\n    'name'             => 'Child',\n    'id'               => 'rdb_child4',\n    'type'             => 'radio',\n    'show_option_none' => true,\n    'options'          => array(\n        'Son' => __( 'Son', 'cmb2' ),\n        'Daughter'   => __( 'Daughter', 'cmb2' )\n    ),\n) );\n\n$cmb_user->add_field( array(\n    'name' => 'Date of Birth',\n    'id'   => 'child4-dob',\n    'type' => 'text_date',\n    // 'timezone_meta_key' => 'wiki_test_timezone',\n    'date_format' => 'd/m/Y',\n    'attributes' => array(\n        // CMB2 checks for datepicker override data here:\n        'data-datepicker' => json_encode( array(\n            // dayNames: http://api.jqueryui.com/datepicker/#option-dayNames\n            //'dayNames' => array( 'Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi' ),\n            // monthNamesShort: http://api.jqueryui.com/datepicker/#option-monthNamesShort\n            //'monthNamesShort' => explode( ',', 'En,Feb,Mar,Abr,May,Jun,Jul,Ago,Sep,Oct,Nov,Dic' ),\n            // yearRange: http://api.jqueryui.com/datepicker/#option-yearRange\n            // and http://stackoverflow.com/a/13865256/1883421\n            //'yearRange' => '-100:+0',\n            // Get 1990 through 10 years from now.\n             'yearRange' => '1950:'. ( date( 'Y' ) + 10 ),\n        ) ),\n    ),\n) );\n\n}. Thanks. By making date format 'Y-m-d'. It solved my issue.. ",
    "developerpaddy": "Hey thanks bro,\nI was tried login_enqueue_script and and enqueued some script but yes you are right, rather than playing around wp-login.php we can develop custom login and registration flow and custom pages for the same.\nI will try by this route.\nthanks for your reply, and god bless you guys you are doing great work.. ",
    "davebonds": "Michael, after playing around with this a little more, I determined it was my fault. In the display_cb callback, I'm using the cmb2_metabox_form function to output the form and was incorrectly passing in options-page as a param which then overrides the option_key param of new_cmb2_box. Closing this for now.. ",
    "JasonTheAdams": "@jtsternberg Wow, that was the fastest issue close I've ever seen! Thanks! \ud83d\ude04 . Digging a bit deeper, it looks like the issue may be here: https://github.com/CMB2/CMB2/blob/develop/includes/CMB2_Field.php#L568\nIt seems like the CMB2_Field::save_field method assumes that if the new data is empty its \"removed\". Seems like it should check if the value has changed and go from there. Something like this:\nphp\n        } elseif ( $new_value !== $this->get_data() ) {\n            if ( ! CMB2_Utils::isempty( $new_value ) ) {\n                $updated = $this->update_data( $new_value );\n                $action  = 'updated';\n            } else {\n                $this->remove_data();\n                $updated = true;\n                $action = 'removed';\n            }. @tw2113 In this case I have a license key field. When the user enters a key and saves this hook is used to activate with the license API. When the user clears the field and saves the license will be deactivated using the API. Presently, both this hook and the cmb2_save_field hook have $upgrade as true in the former scenario, and false in the latter. In my mind, updated data is when the data changes from one value to another \u2014 simple as that.. I understand, thanks @jtsternberg. The only issue with your code, at a glance, is that it would include the field as updated every time its cleared \u2014\u00a0even if it was already empty. It would need to include a check for the previous value to the current value. Maybe this?\nphp\nadd_action( 'cmb2_save_field', function( $field_id, $updated, $action, $field ) {\n    if ( $updated && 'removed' === $action && 'wswp_options' === $field->cmb_id && $field->value ) {\n        $field->get_cmb()->updated[] = $field_id;\n    }\n}, 10, 4 );. @manzoorwanijk Just checked that and it worked! I'll make a PR for it.. @jtsternberg Ah, nope. I corrected [4].\nStill, what @manzoorwanijk proposed as a solution works just fine, as I tested out in #1231. Ultimately, it comes down to the fact that during the options-page removal process, the first field clears itself out from the options array, but then the second field retrieves the options again in order to remove itself from the options array \u2014 in retrieving the options again the prior removed values are restored, leaving only the last field actually removed and all prior fields restored.. Good call, @manzoorwanijk. Here's what I've found.\nCMB2_Option::delete_option() isn't used anywhere in the entire CMB2 codebase.\nCMB2_Options::remove() is used when removing field values and it appears to work properly when a null value is returned. It's ultimately stored in $updated here. That may changed the following condition where $updated is checked, but this seems more accurate and I haven't experienced any bugs.\nThis is being tested in the current unit tests, most of which passed on Travis (the nightly and one of the PHP 7.1 runs failed, but it doesn't look like it was the actual unit test but was something else).. That's entirely possible, of course, but CMB2 can't really control whether other plugins/themes assume that the returned value is always an array. Fortunately, I believe in most instances that a delete method is being called, the return value is most often ignored. I'm open to push-back on this, though.. ",
    "rianrietveld": "Wow, that is fast! Thanks!. ",
    "stylethemes": "Version:      2.2.5.3. hey so i did update cmb to the latest version\n * Version:      2.4.2\nand here is my code\n```php\n<?php\n/\n * Include and setup custom metaboxes and fields. (make sure you copy this file to outside the CMB directory)\n \n * @category Nanum\n * @package  Metaboxes\n * @license  http://www.opensource.org/licenses/gpl-license.php GPL v2.0 (or later)\n * @link     https://github.com/webdevstudios/Custom-Metaboxes-and-Fields-for-WordPress\n /\n/\n * Conditionally displays a field when used as a callback in the 'show_on_cb' field parameter\n \n * @param  CMB2_Field object $field Field object\n \n * @return bool                     True if metabox should show\n */\nfunction cmb2_hide_if_no_cats( $field ) {\n    // Don't show this field if not in the cats category\n    if ( ! has_tag( 'cats', $field->object_id ) ) {\n        return false;\n    }\nreturn true;\n\n}\nadd_action( 'cmb2_admin_init', 'pixe_metaboxes' );\n/*\n * Hook in and add a demo metabox. Can only happen on the 'cmb2_admin_init' or 'cmb2_init' hook.\n /\nfunction pixe_metaboxes() {\n// Start with an underscore to hide fields from custom fields list\n$prefix = 'pixe_';\n\n$pixe_page_cmb = new_cmb2_box( array(\n    'id'            => $prefix . 'page_metabox',\n    'title'         => esc_html__( 'Page Settings', 'nanum' ),\n    'object_types'  => array( 'page' ), // Post type\n    'context'    => 'normal',\n    'priority'   => 'high',\n    'show_names' => true, // Show field names on the left\n    // 'cmb_styles' => false, // false to disable the CMB stylesheet\n    // 'closed'     => true, // true to keep the metabox closed by default\n    // 'classes'    => 'extra-class', // Extra cmb2-wrap classes\n) );\n\n/**\n * Page Post Type Metaboxes\n */\n\n$pixe_page_cmb->add_field( array(\n    'name'       => esc_html__( 'Section Title', 'nanum' ),\n    'desc'       => esc_html__( 'Show / Hide The Section Title', 'nanum' ),\n    'id'         => $prefix . 'section_title',\n    'type'       => 'select',\n    'options'    => array(\n        'default' => esc_html__( 'Default', 'nanum' ),\n        'enable'  => esc_html__( 'Show', 'nanum' ),\n        'disable' => esc_html__( 'Hide', 'nanum' ),\n    ),\n) );\n\n$pixe_page_cmb->add_field( array(\n    'name'       => esc_html__( 'Section Title Background', 'nanum' ),\n    'desc'       => esc_html__( 'Upload an image or enter a URL for Section Title', 'nanum' ),\n    'id'         => $prefix . 'section_title_img',\n    'type'       => 'file',\n) );\n\n$pixe_page_cmb->add_field( array(\n    'name'       => esc_html__( 'Breadcrumbs', 'nanum' ),\n    'desc'       => esc_html__( 'show / Hide The the Breadcrumbs on this page', 'nanum' ),\n    'id'         => $prefix . 'breadcrumbs_show',\n    'type'       => 'select',\n    'options'    => array(\n        'default' => esc_html__( 'Default', 'nanum' ),\n        'enable'  => esc_html__( 'Show', 'nanum' ),\n        'disable' => esc_html__( 'Hide', 'nanum' ),\n    ),\n) );\n\n$pixe_page_cmb->add_field( array(\n    'name'       => esc_html__( 'Page Layout', 'nanum' ),\n    'desc'       => esc_html__( 'Choose a Layout for Your Page', 'nanum' ),\n    'id'         => $prefix . 'page_layout',\n    'type'       => 'select',\n    'options'    => array(\n        'default' => esc_html__( 'Default', 'nanum' ),\n        'boxed' => esc_html__( 'boxed', 'nanum' ),\n        'wide' => esc_html__( 'wide', 'nanum' ),\n    ),\n) );\n\n$pixe_page_cmb_side = new_cmb2_box( array(\n    'id'            => $prefix . 'page_side_metabox',\n    'title'         => esc_html__( 'Sidebar on Default template Pages', 'nanum' ),\n    'object_types'  => array( 'page' ), // Post type\n    'context'    => 'side',\n    'priority'   => 'low',\n    'show_names' => true,\n) );\n\n$pixe_page_cmb_side->add_field( array(\n    'name'       => esc_html__( 'Page Layout', 'nanum' ),\n    'desc'       => esc_html__( 'Choose a Layout for Your Page', 'nanum' ),\n    'id'         => $prefix . 'default_page_layout',\n    'type'       => 'radio',\n    'options'    => array(\n        'full' => esc_html__( 'Fullwidth', 'nanum' ),\n        'left' => esc_html__( 'Left', 'nanum' ),\n        'right' => esc_html__( 'Right', 'nanum' ),\n    ),\n) );\n\n}\n```. I'm still having the same problem meta boxes work in all the pages except if a page is set to display posts\nany help will be appreciated thanks in advance . Yeah That's it so everything is working works fine for you? cuz I'm still facing the same issue \nhow can i test if cmb2 is saving the meta to the appropriate post in the meta table.\n. and just to give you the full scope here is the code of how im using the meta\n```php\n<?php\n    $pixe_section_title_img = get_post_meta( get_the_ID(), \"pixe_section_title_img\", true );\n    if($pixe_section_title_img =='')\n    $pixe_section_title_img = get_theme_mod( 'heading_img','');\n    $text_alignment = get_theme_mod( 'aling_titles', 'center' );\n    $pixe_section_title = get_post_meta( get_the_ID(), \"pixe_section_title\", true );\n    if ( ( get_theme_mod( 'show_section_title', '1' ) || $pixe_section_title === 'enable') && $pixe_section_title != 'disable' && !is_single()) {\n?>\n \n        <?php\n            $pixe_breadcrumbs = get_post_meta( get_the_ID(), \"pixe_breadcrumbs_show\", true );\n            if ( ( get_theme_mod( 'show_breadcrumbs', '1' ) || $pixe_breadcrumbs === 'enable') && $pixe_breadcrumbs != 'disable') {\n            get_template_part( 'components/navigation/breadcrumbs');\n        }\n    ?>\n    <h1 class=\"entry-title\"><?php echo wp_kses_post( pixe_title() ); ?></h1>\n\n</div>\n\n\n<?php } ?>\n```\n. so I did this small test to see what's the problem I did echo out the value of the meta box and in all the other pages I see the appropriate value but in the posts page it returns an empty string\n<span><?php echo esc_html($pixe_section_title); ?></span>. Yeah the Problem is on the frontend as there's no problem in the backend ok I will try to hardcode it and see. ",
    "itrekkings": "To follow because I have the same problem. ",
    "xsonic": "Just ran into the same issue:\nQuick fix would be to simply add a if-condition on cmb2.js line 126:\n        if (wp.data.select('core/editor')) {\n            if (wp.data.select('core/editor').isSavingPost() && window.tinyMCE.editors.length) {\n                for (var i = 0; i < window.tinyMCE.editors.length; i++) {\n                    window.tinyMCE.editors[i].save();\n                }\n            }\n        }\n\nWorks for me, don't know if it's the right solution. Currently no time to dig in further (ol\u00e8 gutenberg, sigh).. ",
    "AshekurRahman": "CMB2 (v2.4.2) is working good. But when I'm updating CMB2 than it's not working.\nOn Thu, Dec 13, 2018, 9:38 PM Michael Beckwith <notifications@github.com\nwrote:\n\n@AshekurRahman https://github.com/AshekurRahman Are you referring to\nWordPress 5.0.x or CMB2 2.5.x ?\nAlso could you clarify what you mean by \"not showing\" ? Like the metaboxes\nthemselves are no longer showing up in your editor screen?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/CMB2/CMB2/issues/1198#issuecomment-447013055, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/Aed10hMDrzhpOulbEhfDs2bII_ZtDpy7ks5u4nSSgaJpZM4ZR2lZ\n.\n. The previous version is working good.. Before Update: http://prntscr.com/luk86l\n\nAfter Update: https://prnt.sc/luk58u. Would you please check my theme file?. It's a very big problem for me.. I got it. Problem is here: http://prntscr.com/luqtjb. How to check cmb2 plugin exits.. Themeforest does not support these ways.. They had suggested to use function_exists or class_exists function.\nhttp://prntscr.com/lurb3x\nCan I use the file_exists function?. Thank you for your good advice.. Which link? . Themeforest Requirements.\nhttps://help.author.envato.com/hc/en-us/articles/360000481223-WordPress-Theme-Plugin-Requirements. Thank you.. Sorry, don't have the link.. Thank you. I will fix it.. ",
    "hchouhan": "\nWorth reading through https://github.com/CMB2/CMB2/wiki/Basic-Usage and the wiki in general here on the github repo.\n\nI did actually read it. I was able to get it to work using the method suggested but it meant, I had to put the code outside the main class of my plugin. Please check https://github.com/webtions/wp-for-my-clients/blob/master/wordpress-for-my-clients.php. . ",
    "colinmcdermott": "Just tested with the updated version 2.6.0 and can confirm there is no longer an issue with auto-saving, great work.. ",
    "spacedmonkey": "I am one of the developers who worked on the core patch for site meta. If you need any support and have any questions, let me know. . ",
    "bilalmalkoc": "@tw2113 it requires to edit js file. But i am using with plugin. It must be fixed with new update.. ",
    "aurmer": "I just tested. I closed the group, tried to publish (no UI response to my click), then opened the group.\nThe \"Please fill out this field\" prompt was not shown.\nOnce I click Publish with the group open, the message pops up and the vertical scroll moves so the field is in the viewport.\nEDIT: v2.6.0. I dug further, and decided to do more than just complain.\nI submitted a pull request which I believe takes a step in the right direction. It completely fixed the issue I was having.\nMy commit adds a feature which adds a event listener to the \"id=publish\" button.\n-FOR EACH postbox created by CMB\n-IF this postbox contains a required field\n-THEN remove the \"closed\" class from the postbox allowing the UI to focus the offending field and notify the user that it needs to be completed before submitting the form.. ",
    "brunoameba": "Thanks!! That worked!. ",
    "norcross": "the postbox class ensures it looks like the other metaboxes. I can create a conditional if you'd prefer.. \ud83d\udc4d. why did you add the postbox-container class as well?. if you're not going to use the $cmb variable passed in the function, can be removed from here. ",
    "mikeselander": "esc_attr() would be more appropriate here. \nAnd, actually not sure this is really needed. If we want to quiet a sniff this is fine I suppose, but we're setting this string so there's pretty much no way to put something nefarious in here.. I think this should be absint( wp_unslash( 'stuff' ) ) not the other way around since absint would convert a non-int character to 0.. Also, lines 902 and 903 should now be unnecessary as absint will return a 0 if the int is invalid.. Why run this tiny amount of data through wp_kses? If we know we're ONLY checking for one single attribute we can print the field out in the statement instead of parsing it here.. Do you think we should allow any HTML in here? One could easily break proper HTML structure since this is within a span but not sure how people actually use this.. @jtsternberg should someone ever be putting HTMl into this title? Looks like this is just the name attribute so no need for HTML.. Good point \ud83d\udc4d \nShould we at least pair down the list of available options to ones that are valid within a <h2> tag?. Well, that would trigger a manual review of this line. Explanatory comments are fine but we should probably keep this list short for anyone looking. No real problem with running it through esc_attr I suppose.. "
}