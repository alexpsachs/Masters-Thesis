{
    "raid5": "Merged in :dependent => :destroy commit. (SHA: 5087cb29395f686afd9f565e1a4d3e50526540b3)\n. Wouldn't this make more sense to track the number of views in a single View entry per user with a count column?\n. Seems like good reasoning to me if this has been your experience :) It is very little data, I wasn't really too worried about that...was just throwing out another idea.\n. ",
    "radar": "This is intentional. Forem will only work with refinery and Rails 3.1 at the moment. It should be considered an experimental release until 3.1 is out:\n. This seems like to me that every time a user views a topic that it would insert a record into the database, leaving open the possibility for abuse for a user if they were to discover that's what we're doing. I would much rather it stored just one row for a user and a topic and the created_at timestamp served as kind of a \"last viewed at\" timestamp. This would be the best of all worlds, I think, as we would have a clear representation of how many unique (user) views we've received for a given topic and we would be able to work out very easily if a topic has received more posts since the user last visited it with a very simple query.\nWhat do you think?\np.s. View tracking is a hard problem to solve.\n. I would just have this code in an update_view method for TopicsController, called from show:\nif current_user\n   view = View.find_or_initialize_by_user_id_and_topic_id(current_user.id, topic.id)\n   view.update_attribute(:updated_at => Time.now)\nend\nThe update_attribute method is being used rather than touch because I think touch tries to do too much, AND update_attribute skips validations, where touch doesn't.\nThis will then create / update the view record for this user on this topic and allow us to display an icon if they haven't viewed the latest post on a topic.\nAs for anonymous users: don't bother.\n. Email notifications are easy enough to implement, with the emails being sent out by the forum system using the mail configuration of the main application. How precisely we configure the configure to send out these emails I don't know yet, probably some option in an admin backend somewhere. Users should be able to opt-out of receiving these emails too.\n\"v2\" of this feature would allow users to opt-out of the emails on a per-forum basis. Or you could incorporate that into v1, if you wish.\nLatest posts link This would only be useful if you could show the latest posts on that forum since the person last looked at that page. I can see how it would be useful though.\nThread status icons This is generally how I know if activity has been happening on a forum, but I haven't been on any super-heavy forums yet. The styling of the system is something I have not considered yet, but it should be easy enough to do with the asset pipelining stuff in Rails 3.1, having gems to provide different themes.\nWho's viewing forum I can see how this would be useful, yes. Doesn't have to be names, just \"5 users currently viewing this forum\".\nWho's online This could be useful too, but I don't think it should be a high priority. It's not a function of a forum system that I used a lot. It was more of a \"nice to have\" thing.\nWho visited  today Similar to the previous one, but even less of a priority.\nThanks for your feedback, a couple of good places to start!\n. I absolutely agree. Would you be able to work on a patch to make this happen? While I have the time to do it now (flying) my laptop is sans battery power. I'm also attending a conference this weekend and as such won't be much good until Tuesday afternoon Australian time.\nThe way I think it should work is that anybody who creates a topic should be subscribed to that topic. Then anybody who posts to that topic should also be subscribed. They then can opt in or out by clicking a \"Subscribe to this topic\" link near the reply link.\nThis would require a new table tracking what users are subscribed to what topics. I would call this model something simple like Subscriber and it would contain two fields for each record: user_id and topic_id. \nI think we should also take care to automatically delete subscriptions for a user if their user record is deleted, otherwise we will run into troubles.\nThis functionality would also require adding an \"notifier email address\" configuration option to forem, which people would then set in config/initializers/forem.rb. The mail configuration is dealt with in the application and is absolutely none of our business.\nIn addition to this functionality, (and if you want me to buy you beer) there will need to be a wiki page set up explaining how to configure forem to send these notification emails and possibly a quick demonstration of how you can override the existing templates, which is just done by basic view overriding.\nI think that's all that's needed for now. What do you think?\nOn 04/11/2011, at 3:04, Gabrielreply@reply.github.com wrote:\n\nEmail notifications would be awesome to have :)\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/12#issuecomment-2626072\n\nOn 04/11/2011, at 3:04, Gabrielreply@reply.github.com wrote:\n\nEmail notifications would be awesome to have :)\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/12#issuecomment-2626072\n.  No worries. If I get a spare moment over the weekend I may do the email notifications myself, since it's one of those features a couple of people want. \n\nOn Tuesday, 8 November 2011 at 11:05 PM, Gabriel wrote:\n\nIt sounds good to me so far, I'm not sure if I will have the time. But i did finish the categories support feature :)\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/12#issuecomment-2666729\n. Clearly I didn't get a spare moment :) Would someone else care to tackle this?\n. @jgadbois: I've merged the awesome changes that Aston's worked hard on into master now. Is there anything you can see to improve?\n. Yup that's correct, Aston was going to work on that next. I think he may be doing that now in his branch. You're also right about there not be a front-end for it. Perhaps you two could work on this together?\n. Which pull request? I don't see one. I see your issue #78, but nothing else.\n. Closing this one now.\n\nThe reasoning is thus:\n- Nobody else has requested the other features, and so they're currently \"YAGNI\".\n- We'll deal with feature requests like Rails and Spree do, meaning that if a 'large' number of people request them then we'll do work on them. If they have code attached then we will seriously consider merging it in provided we get consensus from a majority.\nOk?\n. I believe this is fixed. \n. I believe GitHub hotlinks them and so if it's good enough for GitHub it's good enough for us. \n. Ship it squirrel says:\n\nShip it!\n. Could you show me your Gemfile please? It looks to me like you've specified it twice. Just looking to confirm.\nOh, and it's my mum's wedding + Railscamp today / this weekend so I may be sporadically available.\n. The problem could be that forem theme base points to a gem version or something like that? I am at railscamp and can't check that out at the moment but seems like a likely cause\nOn 11/06/2011, at 16:22, StevenMcDreply@reply.github.com wrote:\n\nHere are the contents of the GemFile:\nsource \"http://rubygems.org\"\ngem 'rails', :git => \"git://github.com/rails/rails.git\"\ngem 'arel', :git => \"git://github.com/rails/arel.git\"\ngem 'rack', :git => \"git://github.com/rack/rack.git\"\ngem 'sprockets', :git => \"git://github.com/sstephenson/sprockets\"\ngem 'forem', :git => \"git://github.com/radar/forem.git\"\ngem 'forem-theme-base', :git => \"git://github.com/radar/forem-theme-base\"\ngemspec\nI have not altered the forem.gemspec file at all, so that's the same as in your repository. Enjoy the wedding and RailsCamp :)\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/16#issuecomment-1346601\n. Would you be able to submit a patch that fixes this issue please?\n. I don't know how you would attach code to an issue, but thanks :)\n. The steps I use are similar to Phil's except I need to run the db:test:prepare task instead:\n\nbundle exec rake -f spec/dummy/Rakefile db:drop db:create db:migrate db:test:prepare\nThis is a one time run thing, and once that's done then I run bundle exec rspec spec or bin/rspec spec or just ber spec (that's my alias) to run the tests.\n. Are you able to update the README to tell people that they have to define this method now?\n. How does this teach it to be more liberal? Sorry, I am just not sure what this change is doing.\n. Wow, thanks so much for the detailed bug report! I will look into this right away.\n. Looks to be an issue with refinerycms edge, I'll let @parndt know and we'll sort it out. Thanks again :)\n. I think this will be overcome by the release of Rails 3.1, which is supposed to be next week. I wouldn't go changing it now when that release is so close. If people have trouble with it they can contact any one of us and we'll show them the way.\nThanks for reporting it though!\n. Is this all fixed now lads?\n. Sorry, could you explain what problem that monkey patch is solving? You don't go into much detail about how it's broken, so I just don't understand how that's the case. Interested to learn so that we can fix it.\n. Ah sorry, that's from Refinery. Right then. I will need to consult with them and figure out why that is necessary.\n. About the kaminari message: You will have to speak to the kaminari maintainer for that. https://github.com/amatsuda/kaminari\n. Forem now no longer includes Kaminari. The application must include one or the other. \nWould this fix get around this issue?\n. forem.heroku.com could be exhibiting this error as it hasn't been deployed to in a while. I believe we have tests that are now covering this issue and since all the tests are passing I don't believe that this is an issue. If you can create a test case that reproduces this issue then I'd be happy to review again.\n. Hello,\nDo you not have a gem such as Devise or Authlogic that provides the current_user method to instances of subclasses of ApplicationController?\n. Yes it is necessary as it needs to know what user is logged in to provide certain features such as the admin area. As long as there is a current_user variable made available to ApplicationController and the views then it will also be available in the engine.\nWe can talk about this on IRC if you'd prefer? I'm on irc.freenode.net right now as Radar.\n. I reckon I've got all of these now. Thanks for opening the issue for it :)\n. Thanks guys! :)\n. Yes very much so :) Just send a pull request through when you're done.\n. The command in the instructions will pull down the latest master. Could you explain to me what the difference is between these two downloads?\n. gem unpack will read from RubyGems as far as I am aware, which is why you're getting the 0.0.1 version which is the version on RubyGems. We would recommend installing it from GitHub exclusively and not placing it in vendor/gems unless absolutely necessary.\n. The layouts used by the controllers in forem is just your own layouts/application.html.erb. For the actual templates for the actions, you will need to override the files in your application's app/views directory. At the moment, this is just a matter of straight copying.\nHowever, it would probably be good to have a rake forem:views Rake task to copy these over. Patches welcome :)\n. Could you explain what problem that is fixing? I am not sure...\n. I removed that in 8e932aa. I would recommend you manually put the directive in your own CSS files to include them or alternatively specify the theme's CSS files in your layout. Either way will require the asset pipeline to be enabled.\n. To clarify: I removed it because I was encountering this issue on the demo app (http://forem.heroku.com) too. I figured it's much easier to use the features already provided by Sprockets to just implement it... rather than coding another helper ourselves.\n. Could you provide the stacktrace for this error please? This should be provided by the Kaminari gem. I would think if per were failing then page would fail too.\n. @frankel: and to confirm, bundle list contains the kaminari gem?\n. Ah, that's quite the fun one :) It's happening because will_paginate 3.0 (a dependency of Refinery) now defines its own page method, and so it's calling that one, rather than the Kaminari one which Forem asks for. I can take a further look at this tonight. Sorry for not catching it earlier.\n. Well, if I had updated the forem Heroku demo version like I have as a TODO on The Wall at home on the weekend like I had planned to, instead of going OUTSIDE, then yes, I would have caught it then :) See kiddos, this is why you shouldn't go away from the computer!\n. What happens when you include Kaminari::ActiveRecordExtension into the Post model? Does that fix this? It's a bit of a hack :\\\n. Alright then. I can look again tonight after work. Stupid will_paginate.\n. I attempted to fix this at the end of my lunch break to no avail. I will look again further tonight. I suspect it may require patches to will_paginate.\n. I tried this without luck:\nif defined?(WillPaginate) && defined?(Kaminari)\n  class Forem::Post < ActiveRecord::Base\n    include Kaminari::ActiveRecordRelationMethods\n    include Kaminari::PageScopeMethods\n  end\nend\n. OK, I reckon I've got this nutted out now. When you call the page method, WillPaginate creates a new scope using rel.scoped (i.e. Model.scoped) and then extends that like this: https://github.com/mislav/will_paginate/blob/master/lib/will_paginate/active_record.rb#L136. This module is defined at the top of the file: https://github.com/mislav/will_paginate/blob/master/lib/will_paginate/active_record.rb#L20-28.\nIt contains a method called per_page when the Kaminari alternative is called page. So it's a simple fix for this issue, alias the method per to per_page if WillPaginate is defined.\nNext, we use num_pages in Forem to determine how many topics there are. If there is more than one page of topics then we display a pagination limit. The num_pages method is again from Kaminari and so when WillPaginate is defined we need to define total_pages for this also.\nBoth of these methods we add to the WillPaginate::ActiveRecord::RelationMethods module so it's compatible.\nThe final thing to do is to use the will_paginate method if WillPaginate is defined, or use paginate which is provided by Kaminari as the \"fallback\". As such, I've defined a forem_paginate method that does this. Since the API for the two methods are basically the same (at least they are for our purposes), I don't see any problem with this solution.\nPlease review my commit a066a5b and provide feedback. \nThank you.\n. Also 46ea7d2, but that's trivial really.\n. It would be super nice if these two gems had identical APIs, but unfortunately they both have divergent ideas of what the API for pagination should be. If these two libraries had the same API then what would be the point of having two libraries besides possible performance improvements?\nCurrently, we don't use anything too intense in forem and so the \"hacks\" in my commits earlier today I think are fine. \n. Thanks Luigi!\n. On what page are you hiding the topic? I'm sure there are tests for hiding and unhiding topics.\n. My mistake: there are tests for hiding topics but no tests for unhiding topics. Would you be able to write a patch for this issue in order to fix that admins cannot access hidden topics and in the process fixing that topics can be made visible again by admins. Tests would be much appreciated also!\nThank you.\n. This is fixed in the commit above.\nThank you for reporting it!\n. I don't understand what's going wrong here. I've got it working for me on my application. Can you add some steps to reproduce this?\n. At current there is no support for MongoDB built into forem. The main thing is that the models that we use are built only for ActiveRecord at the moment rather than MongoDB. \nI think that it would be possible to patch this to load AR models when AR is loaded, and to load MongoDB models when MongoDB is loaded. However, you must be careful to not duplicate the methods across the two modules as any new additional methods for the models would need to be added twice.\nSo to answer your question shorter: no, but I think it's possible with some patching.\n. What database-dependent pieces do you mean?\n. Alright. I look forward to seeing what you can contribute back :)\n. Wouldn't you be able to use something like orm_adapter to provide support for both ORMs? I haven't looked into it yet. Just an idea.\nOn 30/08/2012, at 18:49, Juan Felipe Rinc\u00f3n notifications@github.com wrote:\n\nI haven't dug into the code for a bit, and there have been \nnon-insignificant changes in the main branch that may make what I'm writing \ninaccurate, but our experience getting forem to work with \nActiveModel/Mongoid pointed to the fact that at the very least, all of the \nmodules needed to be touched in some way to establish the kinds of \nrelationships Mongoid supports, and there was some minor amount of \nmodification to finder/criteria language to make it work reliably. \nThe ideal approach would be going through all of the finders/criteria \nlanguage in the main branch, identifying those that would require a rewrite \nto support mongoid, and determine if there is a way of writing them so that \nthey are ORM-independent. \nOn Thu, Aug 30, 2012 at 12:12 PM, Josh Adams notifications@github.comwrote: \n\nWould it not be possible to build this as a plugin or overlay on forem \nthat, when required, made it support mongo rather than activerecord? If \nnot, we could consider a more high level strategy for abstracting out the \npersistence layer. I'm of the opinion that leads to better code anyway \nand I have some experience doing this with plutus (though we've not yet \ngotten my company's work on that point merged). \n\u2014 \nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/issues/47#issuecomment-8164723. \n\u2014\nReply to this email directly or view it on GitHub.\n. The answer is still no.\n\nOn 9 Jan 2015, at 15:34, Ronak notifications@github.com wrote:\nDo we have a Mongoid Patch or fork available? for forum to work ?\n\u2014\nReply to this email directly or view it on GitHub.\n. John, I am not sure what you are trying to do. I've added the forem:views generator which you can run using rails g forem:views in your application (after you bundle update forem) and that will copy over forem's views into your application.\n\nIs that what you want?\n. This is because in the layout for your application you're using blogs_path, when you should be using main_app.blogs_path. The engine will attempt to look up blogs_path in its own routes (because its isolated), not find it and bomb out with that error. That is even though your application has it defined!\nYou must do this now if you are using engines, as this will enable your application and engine to remain isolated (which allows them to have identically named routes and not conflict) but still have some kind of inter-connectivity between them. To access forem routes within your application you must use forem.root_path and the like.\nThanks for using Forem!\n. Hey, cool suggestion :)\nI think the easiest way would be to create a patch that would move the textarea for Forem's posts out into its own partial. This partial then could be overriden in the application to provide whatever functionality you wished. As for the markdown processing, you could potentially do the same thing here: move the post text processing out into a partial which could then again be overriden in the application.\nWhat do you think?\n. I've discussed this further on #55. Please see my responses there also.\n. Perfect, thank you :)\n. That's fine if it deletes it. Thanks for the patch, you're right :)\n. I was talking with someone today about this and realised that we could probably pull it off with just CanCan now. i.e. do what Rails does and choose one default authorization system for us and make people conform to it. If other people want to use other permissions systems they can, they'll just need to submit a pull request implementing it before hand.\nThe permissions system is very simple. You can see the beginnings of it here: https://github.com/radar/forem/commit/8ebefd09c334b9593c40404883727c4a139ac47c.\nWhat happens is that we will provide a DefaultPermissions module which needs to be included into the User class. You can then override the methods of this module in your class as you see fit. So far the only method that is implemented is can_read_forums? which defaults to true.\nBy overriding the method, you would then put in your own code that would tell the application what criteria is necessary to perform that action. The calculation for permission is entirely up to the application itself, as different applications are going to have different criteria.\nThe whole point of this idea is to make it flexible enough that Forem has a basic permissions system so that you can do things like hide some forums from certain people and show them to others. You know the drill. Permissions systems in forums is nothing revolutionary.\nIs this a worthwhile way of doing it? Does anyone foresee any problems with this? I think it's clean enough that we could pull it off.\n. I've done more work on the permissions branch today. I've written up all that a user needs to know about the Authorization System here: https://github.com/radar/forem/wiki/Authorization-System\nI think other permissions we need to have are very few:\n- Viewing categories\n- Creating topics\n- Creating posts\n- Editing own posts\nCan anyone think of any others?\n. Editing their own post would be another one. I'll add that to the list.\nA moderator option would require some way of flagging certain users as moderators in the system. This is not something Forem currently supports.\nMoving topics is something only an admin can do right now. If there are moderators I think that they too should be able to move topics to different forums, but only if they are a moderator of both forums. Just food for thought.\n. I've merged this branch to master now, the permissions are live. \nIf you have any problems with them please open a new issue.\n. Thank you!\n. This is a very similar problem to #50, where the users would like to use WYSIWYG formatting. I suggested there that they split the part of the post partial that renders the text using the forem_markdown helper out into its own partial, which could then be over-written in the application (by simply having a partial called the same) which would allow you to format it using Textile.\nBut I think this solution may be a bit hacky. Do you have any other ideas on how you would do this?\n. The adapter idea is a pretty good idea. \nThe forem_markdown helper should be renamed to forem_format, which would simply call Forem::Post#format. This method then should be defined as just returning the post text, i.e. a no-op.\nThe markdown / textile / wysiwyg functionality then would be provided by a gem that has a module which is included into Forem::Post which would override this method, causing the text to be formatted correctly. As for the form, you could probably also override that in the engine, but I am not confident that would work as well as having it in the application.\nPlease do investigate :)\n. I think deprecating it would be a much better alternative. Could you submit a patch for this?\n. Hi @bambielli,\nYou can set that by overriding the forem_admin? method in Forem::ApplicationController:\napp/decorators/forem/application_controller_decorator.rb\nruby\nForem::ApplicationController.class_eval do\n  def forem_admin?\n    session[:admin]\n  end\nend\n. @jtdavis247 Yes, that's right.\n. @jtdavis247 What do you mean it \"doesn't like\"? Show us the output exactly please.\n. Can you please show us the migration from your app which adds the forem_admin column? I suspect it's only adding it to the users table\nOn Thu, Nov 14, 2013 at 4:59 PM, Jeffery Davis notifications@github.com\nwrote:\n\nwhen I type:\n1.9.3-p448 :016 > admin = Admin.create! do |u|\n1.9.3-p448 :017 >     u.email = 'sampleemail@gmail.com'\n1.9.3-p448 :018?>   u.password = 'password'\n1.9.3-p448 :019?>   u.password_confirmation = 'password'\n1.9.3-p448 :020?>   u.forem_admin = true\n1.9.3-p448 :021?>   end\nI get this error \nNoMethodError: undefined method forem_admin=' for #<Admin:0x007f9f3ae20ac8>\n  from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activemodel-3.2.14/lib/active_model/attribute_methods.rb:407:inmethod_missing'\n  from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-3.2.14/lib/active_record/attribute_methods.rb:149:in method_missing'\n  from (irb):20:inblock in irb_binding'\n  from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-3.2.14/lib/active_record/validations.rb:40:in create!'\n  from (irb):16\n  from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/railties-3.2.14/lib/rails/commands/console.rb:47:instart'\n  from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/railties-3.2.14/lib/rails/commands/console.rb:8:in start'\n  from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/railties-3.2.14/lib/rails/commands.rb:41:in'\n  from script/rails:6:in require'\n  from script/rails:6:in'\nI have been trying to get access to the admin panel for days not but i can't get forem to recognize my admin i created in the DB as an admin. I am not sure what I am missing. \nadmin model:\nclass Admin < ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n  # Setup accessible (or protected) attributes for your model\n  attr_accessible :email, :password, :password_confirmation, :remember_me\n  # attr_accessible :title, :body\nend\nuser model:\nclass User < ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n  # Setup accessible (or protected) attributes for your model\n  attr_accessible :email, :password, :password_confirmation, :remember_me,\n                     :first_name, :last_name, :profile_name\n  # attr_accessible :title, :body\n  validates :first_name, presence: true\n  validates :last_name , presence: true\n  validates :profile_name, presence: true,\n              uniqueness: true, format: { with: /^[a-zA-Z0-9_-]+$/, \n                                          message: 'Must be formatted without spaces.'\n                                        }\nvalidates :email , presence: true, \n              uniqueness: true\n  validates :password , presence: true\n  has_many :statuses\n  has_many :topics\ndef full_name\n      first_name + \" \" + last_name\nend\n   def gravatar_url\n      stripped_email = email.strip\n      downcased_email = stripped_email.downcase\n      hash = Digest::MD5.hexdigest(downcased_email)\n      \"http://gravatar.com/avatar/#{hash}\"\n   end\nend\napplication controller:\nclass ApplicationController < ActionController::Base\n  def forem_user\n    current_user\n  end\n  helper_method :forem_user\n  protect_from_forgery\nend\napplication_controller_decorator.rb:\nForem::ApplicationController.class_eval do\n  def forem_admin?\n    session[:admin]\n  end\nend\nI have not changed any of my controllers that came with devise.\nwhen i try to access the admin pages after logging in through admins/sign_in path  it says access denied. not sure what to do if you knew what was going on I would be eternally greatful! Thanks so much for your time!\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/pull/56#issuecomment-28461582\n. Please remember to format code using 4 space indentation or wrapping it in triple backticks so it's neater.\n\nThis migration is quite clearly adding the field to only your users table. You will need to create another migration to add this field to your admins table.\n. @jtdavis247 I don't know what could be going wrong then at this stage. It would appear everything is working as it should Can you please share the application with me so I can take a look at it?\nThanks.\n. @jtdavis247 I suspect this is because you're using two classes to represent users within your application: User and Admin. Why are you doing this? What is wrong with having one class to represent everybody?\n. @jtdavis247 I would just stay with the one User model (because that's all Forem is designed to work with) and implement your roles using a join table from users to another table called roles. \n. Thanks for taking the time to do this!\n. I thought by doing session[:return_to] then Devise would return to that location? Maybe they've changed things since the last time I've looked.\n. Does simple_form attempt to reference translations by default automatically? If not, then that is probably the problem. Could you submit a pull request that makes these fields use the translations?\nThanks!\n. I believe this has been implemented now. Please open another issue if there's a problem / feature request for that.\n. Thanks for submitting a fix for this!\n. If you submit a pull request with code that does this then it would :)\n. @gabrielbaez: Have you had a go at this yet? I think it would be good to have this feature in Forem and I'd be happy to provide feedback / guidance on any code you write for it.\n. Ok, that all seems fine... what's the issue with rake routes? Can you proceed without it?\n. I can confirm that this issue exists. Are you able to submit a patch that fixes it?\n. I was attempting this just then and I realised it may be a little more complicated than it seems. Due to how we're stubbing out the user stuff in the engine this makes it really difficult. \nI think we should bite the bullet and make Devise provide the user functionality for the dummy application inside the engine. That's something that we (the forem team) will do. Then testing this functionality will be easier and we won't have this issue.\n. #30 is absolutely related. Good patch there but needs a little bit more (as I commented). We should also have a test for this behaviour to ensure no accidental regressions.\n. It's 5:40pm here currently, so excuse the mess buuutt... I pushed a devise branch up which has the beginnings of the Devise changeover to Forem. I am currently stuck on why it can't find the Devise::SessionsController when I run bundle exec rspec spec/integration/posts_spec.rb and so another pair of eyes or two would be good to have.\nI'm off for the rest of the night. Let me know if you find anything.\n. I lied about being off for the rest of the night, sorry!\nOnce #69's fixed then you will be able to easily write tests for this feature. If you'd like to help with that it would be much appreciated.\nThanks!\n. Alright, #69's done. Please submit a patch based off current master to fix this post issue. It is now definitely much easier to test this kind of thing.\n. I had some time spare on the train tonight and I've fixed this in 65a894f. Thanks for pointing out the issue!\n. This is done now as of d7c83e83863b4bf2dd9cb1dab050b08f8fd46146.\n. Could you show us how you're referencing this partial in your layout? Could be that you need to give it a more absolute path.\n. Rightio, glad you got this solved :)\nThanks for the super kind words!\n. Confirm. It should not be wrapping them in pre tags.\n. Fixed in @dabb3b62d7b4f648d8799499992b605f7e5cf6d5\n. To visit the forem routes in your tests you will need to define a forem proxy object or follow a link. To define the proxy object, create a new file in your app at spec/support/url_helpers.rb and put this content in it:\n``` ruby\nmodule UrlHelpers\n  def forem\n    Forem::Engine.routes.url_helpers\n   end\nend\nRSpec.configure do |c|\n  c.include UrlHelpers, :type => :request\nend\n```\nThat will define a new forem method which will be available in any test located in spec/integration or spec/requests.\n. Awesome work!!! Thanks guys :)\n. Did you try using bundle exec for this like it recommends? Did it give the same error?\nOn 08/11/2011, at 16:36, shimmsreply@reply.github.com wrote:\n\n\nYou have already activated rake 0.9.3.beta.1, but your Gemfile requires rake 0.9.2.2. Using bundle exec may solve this.\n\nRaverting to 1.9.2-p290 resolves:\n\nrvm use 1.9.2-p290 --default\nbundle install\nrake forem:install:migrations \n\nCreates migrations as expected.\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/75\n. Could you add a test for this please?\n. That will give you the dummy application's routes, but not the engines. I've just added rake forem:routes in @dabb3b62d7b4f648d8799499992b605f7e5cf6d5 that will give you forem's routes.\n. Great, thanks for your work!\n. Thanks!\n. Done!\n. Ok, perhaps we should be running the formatter and then running that output through a HTML sanitizer. Any experience with this @parndt?\n. Alright, I'll run through it tonight when I'm home from work.\n. No sorry I've not had the time, yesterday's work took longer than I thought and I also spent the morning + evening biking 50km.  \n\nI am in Adelaide this weekend (until the 27th) visiting my family. I will try to find some time to look into it this weekend. \nOn Saturday, 17 December 2011 at 2:32 AM, John Gadbois wrote:\n\n@radar - sorry to bug you. Had a chance to check this out yet?\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/pull/79#issuecomment-3178507\n. There's a binary file in this called \"core\". What is that?\n. This seems to not work... when I click \"Quote\" on a post it gives me the <blockquote> wrapping for the text, but when the post is created this tag vanishes.\n. I've made a new commit to forem-rdiscount here which seems to fix this error.\n. Great! Thank you :)\n. Looks clean, thanks for the work on this!\n. it's alright, I'll do the test myself. Thanks for the pull request browning!\n. Would you be able to submit a patch that added this to Forem? It's a fairly regularly requested feature.\n. Then perhaps we should do it ourselves.\n. I can see where you're coming from @danneu. How would you go about cleanly implementing this?\n. @AntoineGrondin What do you need the messaging system to do?\n. @Papipo Already mentioned earlier in the thread by @regedarek, who said he would implement it and hasn't yet.\n. No pull request yet :(\n. @MOZGIII What does that even mean?\n\nAlso: please qualify your reasonings for thinking that this should be a separate project from Forem. You can't just state your opinion without backing it up with reasons, man.\n. The queries for groups are there due to checks for permissions on forums. I don't think there are queries that run when they shouldn't. If there are, then Phil has already correctly suggested that we would love your help in eliminating these excessive queries.  \nAlso, please explain what you mean by internal messaging. Maybe we can work something out.  \n\nRyan Bigg\nOn Monday, 20 August 2012 at 0:17, Philip Arndt wrote:\n\nWhat about adding support for / fixing the things you mention before going and rolling your own? We would really appreciate the help.  \n\u2014\nReply to this email directly or view it on GitHub (https://github.com/radar/forem/issues/84#issuecomment-7856403).\n. It's working on the demo site: http://forem.heroku.com/forums/1. Is there anything that you've changed?\n. Can you share the stacktrace for this error?\n. What does the full trace show? I gather that you can see this error on the screen?\n. I'm not seeing the method missing error. I see \"uninitialized constant Forem::Generators::InstallGenerator::User \" though. I'll see what I can do to fix this now.\n. Alright I think I've fixed this one. Please give it another go and open another issue if it's still causing problems.\n. Oh bother. That's because the User class is reloaded every request in dev environment.\n\nYou can get around this bug by putting this inside your User model:\ninclude Forem::DefaultPermissions\nI will fix this in the morning to be inside a config.to_prepare hook on the engine.\nThanks for reporting!\nOn 29/11/2011, at 22:23, Paul Kochreply@reply.github.com wrote:\n\nRunning webrick for development I keep getting this nasty error:\nShowing /home/kulpae/.rvm/gems/ruby-1.9.2-p180/bundler/gems/forem-76d997679209/app/views/forem/categories/_category.html.erb where line #1 raised:\nundefined method `can_read_forem_forums?' for #User:0x000000050f3020\nI've an initializer config/initializers/forem.rb with \nForem.user_class = User\nObservations:\n- After the server is started, the first request works, the following requests don't.\n- Overriding the can_* methods in the User model fixes the error, but I don't think it's how it supposed to be...\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/88\n. I fixed this in @056de4c and forgot to mention it in the commit message.  Thanks again for letting us know of this one.\n. Wow, that's very weird. It totally didn't expect that. Looking into it.\n. Ok, I'm stupid. It happens sometimes. Was hardcoding it to User in forem/ability.rb (fix is in @10083b3), which believe it or not is actually different to Forem.user_class due to the wonders of class reloading. Joy of joys.\n\nBut hey! We got it fixed :)\n. Could you show me what your forem/ability.rb look slik eplease?\n. Ok, that's exactly what I have and with my local version I can make multiple requests and not have it error out. What page are you doing this on? Maybe that has something to do with it?\n. Super weird! I don't know, sorry.\n. You don't need to run rails g forem:install after bundle update if you've already run it once. It's designed to a one-time only thing: https://github.com/radar/forem/blob/master/lib/generators/forem/install_generator.rb.\n. Thanks for your interest in using Forem :)\n. This issue is still happening!\nI think it's due to a class caching issue. Whatever's responsible for specifying the class for current_user is doing it wrong. I think it's using an old version of the User class or something like that, because the current_user object that's being passed to the initialize method inside forem/ability.rb doesn't have the permission methods on it.\nAs much as I hate to, I've done a bandaid fix in @6d84403 to work around this issue. Hopefully very temporarily.\n. I think I understand why it's happening now, at least. In dev environment when you set user_class you're setting it to a class object, which I suspect is the original User class. This is why it works on the first request but not on the second.\nWhat I think we need to do is make people set this to a string so that when we go to reference it we call it like this:\nForem.user_class.constantize\nWhat that'll do is that it'll grab the currently available User class, which will not be the old one but the one that's been most recently loaded by Rails.\nFor my next trick, I'm going to need to work out how to deprecate this neatly.\n. Pretty damn confident in the above explanation. Deprecating user_class= taking a Class argument now after the 20th January. I think that one month is long enough now.\n. Hey Ben,\nYou did set this up as Forem.user_class yes? \nIf you happen to have two User classes, then you would need to manually include the Forem::DefaultPermissions module into Spree::User class as a to_prepare hook in your application. That's the module that'll define the can_read_forem_forums? method.\n. There's now also #102 which is caused by problems with the way that this is being tested. Perhaps fakefs should be looked into as a possible alternative to this.\n. This is fixed by #149.\n. Yes that's indeed the problem, but the code that is supposed to be doing this is just not. The output says \"Defining forem_user method inside ApplicationController...\" just like it's supposed to and the test passes, I just don't understand right now why this is failing.\n89 was opened describing this same problem and a way that we could fix it.\n. I think I've fixed this issue now, was weird that inject_into_class wasn't doing what I wanted, but insert_into_file (which is what inject_into_class uses) works. Please try again!\nThanks!\n. I thought this was automatically added by forem during the installation process?\nOn Wed, May 22, 2013 at 6:48 PM, StephenZepp notifications@github.com\nwrote:\n\nAnswer my own question--if you get this error, manually put this in your application_controller:\n  def forem_user\n    current_user\n  end\nhelper_method :forem_user\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/90#issuecomment-18313266\n. @StephenZepp Having a way to reproduce this issue on my own machine would be a great step towards being able to solve this.\n. Hey, thanks for the terrific patch!\n\nThere's a comment https://github.com/radar/forem/issues/53 that asks if we could have permissions determining if users could edit posts. Do you reckon you could write a little more into this patch to support that?\nThat'd be awesome! :)\n. Neat work! Hooray for awesome contributors!\nI just made a small change in @01c3a39 to allow people to customise where users can edit posts, so that some users can edit posts in some forums but not others if they feel like it.\n. Have you seen the Authorization System page in the Wiki? Can you adapt your system to this?\n. Could you show me a proof of concept for this please? I'm interested in how people want to set up the authorization system.\n. Any updates yet?\n. Closing.\n. My concern with this is that, if this is done incorrectly, future modifications to the models would need to be done across the different adapters. While I'm all for the change, I just don't see a clean way to do it right now.\nMaybe you're seeing something I'm not. I look forward to seeing your code :)\n. Thank you!\n. The label is used in the tests to know what field to fill out. To fix these tests you would need to change \"Text\" to \"post_text\" in them.\nI don't think removing the label is a good idea, but I could probably be convinced.\n. Not so legless today.\nBy running bundle exec rake -f spec/dummy/Rakefile forem:install:migrations it would have copied over the migration for the subscriptions table to the spec/dummy/db/migrate folder. This then should have been added to Git, rather than the migrations in dummy being removed. The reason for this is because there's more than the Forem migrations in dummy: There's also migrations that set up stuff for the dummy application's users table which we most definitely don't want to delete.\n. To restore the migrations I ran this little command. Was a good exercise in learning more about Git.\ngit checkout <sha that deleted commits>^ -- spec/dummy/db/migrate/20110625220405_create_forem_forums.rb\nspec/dummy/db/migrate/20110625220406_create_forem_topics.rb spec/dummy/db/migrate/20110625220407_create_forem_posts.rb spec/dummy/db/migrate/20110625220408_add_reply_to_to_forem_posts.rb spec/dummy/db/migrate/20110625220409_add_locked_to_forem_topics.rb spec/dummy/db/migrate/20110625220410_add_pinned_to_forem_topics.rb spec/dummy/db/migrate/20110625220411_add_forem_views.rb spec/dummy/db/migrate/20110625220412_add_updated_at_and_count_to_forem_views.rb spec/dummy/db/migrate/20110708030915_add_email_to_users.rb spec/dummy/db/migrate/20110625220412_add_updated_at_and_count_to_forem_views.rb spec/dummy/db/migrate/20110828132917_add_hidden_to_forem_topics.rb spec/dummy/db/migrate/20111026062441_add_devise_to_users.rb spec/dummy/db/migrate/20111026132103_add_login_back_to_users.rb spec/dummy/db/migrate/20111026132225_add_forem_admin_to_users.rb spec/dummy/db/migrate/20111108032747_add_indexes_to_topics_posts_views.rb spec/dummy/db/migrate/20111108032748_create_forem_categories.rb spec/dummy/db/migrate/20111108032749_add_category_id_to_forums.rb\n. Added in @1edab8d0a1386bab8ea604a98e823183a695a057 and @f341b3b961c989b44d1883c136477ef08852511c.\nThanks Aston!\n. Added on master as @6a53aff544b6c4de3415dbe78366fd92a22d5258 and @cda7ea265367470483985ab11a1c5ed3185bf2b6. Don't know where I got the other two refs from :\\\n. I would strongly advise against using the hash syntax for routes like this, as it leads to problems like this. If you must do this, then do it this way:\nform_tag main_app.url_for(:controller => user_sessions, :action => :change_persona), :method => :post\nThe main_app is the gold here, as that's what's going to tell Forem to go looking for the route in your application rather than inside forem itself, which is what I think is happening here.\nIf you go down the path of using a routing helper for this, it becomes cleaner:\nform_tag main_app.change_persona_path, :method => :post\nHope this helps!\n. And thank you for at least trying out Forem!\nOn 16/12/2011, at 11:42, WhiteFire-Sondergaardreply@reply.github.com wrote:\n\nThank you for your quick and educational response! Much appreciated.\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/98#issuecomment-3171676\n.  There's quite a large number of commits on this pull request. Shouldn't there only be one? What happened?\n\nPlease re-submit as a pull request that only has a few commits. \nOn Saturday, 17 December 2011 at 3:50 AM, Gabriel Baez wrote:\n\nI had to remove the \"only\" option from the load authorize resource it was preventing me from viewing the forum\nindex.\nIt was triggering the following error.\nCanCan::AuthorizationNotPerformed in Forem::ForumsController#index\nThis action failed the check_authorization because it does not authorize_resource. Add skip_authorization_check to bypass this check.\nYou can merge this Pull Request by running:\ngit pull https://github.com/gabrielbaez/forem master\nOr you can view, comment on it, or merge it online at:\nhttps://github.com/radar/forem/pull/99\n-- Commit Summary --\n- Encoding: UTF-8 was added in my db/schema.rb\n- All formatters should use the Forem.formatter API\n- Delete whitespace in forem/application_controller\n- Make 'rake routes' work\n- You can now get forem routes with 'rake forem:routes'\n- Fix spacing in base/index.html.erb\n- Remove cellspacing in admin/forums/index\n- Wrap 'Admin Area' link in a footer tag\n- Refactor categories / forums display + add ability to view just a single categories forums\n- Merge branch 'master' of https://github.com/gabrielbaez/forem\n- Merge branch 'master' of https://github.com/radar/forem\n- Merge branch 'master' of https://github.com/radar/forem\n- Merge branch 'master' of https://github.com/radar/forem\n- Was receiving the following error on index page \"This action failed the check_authorization because it does not authorize_resource. Add skip_authorization_check to bypass this check.\"\n-- File Changes --\nM app/controllers/forem/forums_controller.rb (2)\n-- Patch Links --\nhttps://github.com/radar/forem/pull/99.patch\nhttps://github.com/radar/forem/pull/99.diff\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/pull/99\n. Could you please provide some information as to how to duplicate this error? I am unable to do it on my local install.\n. Right... but I still don't know how exactly I would reproduce this error... How would I go about doing that if I had a blank Rails application?\n. I can verify this issue. Let me look into a fix for it now.\n. It's real delete at the moment. I've not seen a feature request for paranoid deletion yet.\n. @mahzilla: Thanks for reporting this issue. It's now been fixed!\n. Finished afaik.\n. What command are you using to run them?\n. rake just runs rake spec, so I don't see how that could be doing it...\n. It's the install generator spec. We should probably use fakefs or something like that for this.\n. Yes, good point this should be closed now.\n. What effect is this having on the engine at the moment?\n. Rightio, that's fixed now.\n. Thank you! Happy holidays!\n. This commit seems to break the build: http://travis-ci.org/#!/radar/forem/jobs/444963. Would it be possible for you (@greenodg) to look into this to see what it is breaking on? I'd figure you'd know more about that Russian translation file than I would.\n\nThanks!\n. \u0421\u043f\u0430\u0441\u0438\u0431\u043e! :)\n. Could you explain how the link_to_latest_post method is broken? This will use whatever value the User#to_s method outputs as its output. Just define a to_s method in your model using the method you want (which in this case is probably username)\n. No, like this:\ndef to_s\n  username\nend\nThis is because you want to define an instance method and not a class method. No need for the to_s call inside the method as it's already going to be a string.\n. Why are there SO MANY commits on this pull request? What happened, mate?\n. Actually I think I may know what happened. You forked from master before I did the force push. If you pull origin/master to a new branch called email_subscriptions for example, and then cherry-pick your commits across onto this new branch and then submit a new pull request it should only have the right commits.\n. Could you please also update the README to contain mention of Persian in the languages section? Thanks.\n. Merged, thank you!\n. I can agree with this. Personally I like Markdown, but some other people may prefer something like BBCode, which is something Forem doesn't support at the moment. I wonder if @parndt or @knewter have any thoughts on this one?\n. Hi friends,\nI've thought about how we could do this.  Mainly because I've been working on forem-redcarpet today, which I think should be the default because it supports code-highlighting and nothing else does.\nWe could have the default formatter be a strict dependency of Forem, meaning that it would be installed when the Forem gem is used. When the application starts, it will load the Formatter along with Forem and have it basically seamless. \nIf you want to override the formatter, you just need to specify another formatter gem in your Gemfile which should be enough to override the Forem.formatter setting and alter it.\nGood?\n. Ugh, this breaks Rubinius's build. FAIL.\n. Yes, rubypython doesn't work on rubinius.\n. I dunno... it seemingly needs a constant from within FFI. There be dragons.\n. Besides my super-pedantic syntax comments above, I can't fault this implementation. It's a pretty good effort for a first patch and I'd be happy to accept it in.\n. Soft please, 2 spaces.\n. Merged, thank you!\n. Oops sorry, yes I did. Removed mine.\n. :heart: :beer: :+1: :rainbow:\n. Done, thanks!\n. How is Devise creating this route? Do you know?\n. You need to specify :as => \"sign_in\" for that route for it to generate the right path helper:\nOn 07/01/2012, at 5:12, Akram-Khanreply@reply.github.com wrote:\n\nHi,\nI installed forem today and was trying to get it working but am stuck at this issue. \nThis problem does not occur if I login and then try to go to localhost:3000/forums. I am using devise for authentication.\nI checked the demo app which is deployed on Heroku and replaced \"signup_path\" with \"'/users/sign_up'\" and did the same thing with the login path and the app works.\nThis causes more trouble if I am using a custom authentication method and try to call the form from multiple places.\nHere are my devise routes :- \ndevise_for :users do\n   get \"/signup\" => \"devise/registrations#new\"\n   get \"/login\" => \"devise/sessions#new\"\n   get \"/logout\" => \"devise/sessions#destroy\"\n end\nHere is the details from the log file :-\nActionView::Template::Error (undefined local variable or method signup_path' for #<#<Class:0xb8f0d94>:0xb8ea548>):\n   4:            =link_to logo, root_url\n   5:        .three.columns\n   6:            -if current_user.blank?\n   7:                =link_to \"Sign Up\",signup_path, :class=> \"small radius nice green button\"\n   8:                =link_to \"Login\",login_path, :class=> \"small radius nice blue button\"\n   9:        .three.columns\n   10:            =form_tag \"/search\", :method =>\"get\" do\n app/views/layouts/_above_header.html.haml:7:in_app_views_layouts__above_header_html_haml98275521482209660'\n app/views/layouts/application.html.erb:12:in `_app_views_layouts_application_html_erb889993777_968552\nThanks,\nAkram\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/118\n. Sorry, you need to put :as => \"signup\" on the signup route so that it defines a signup_path method.\n. Because you were defining routes without defining the routing helpers for it. The :as option does that.\n\nOn 07/01/2012, at 7:45, Akram-Khanreply@reply.github.com wrote:\n\nCould you please provide the details of as to why this problem was coming? \nThanks,\nAkram\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/118#issuecomment-3390506\n. That's right :)\n\nOn 07/01/2012, at 8:07, Akram-Khanreply@reply.github.com wrote:\n\nThanks Ryan, so for my login I could do it :as => \"sign_in\" and it should work for the similar error which I am getting for the login_path?\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/118#issuecomment-3390801\n. So is this fixed now?\n. I like @rizzah's idea of having a completely separate table to implement permissions. I don't think that this needs to be in Forem, however.\n. Merged, thank you! :)\n. What was the exact command you used to run this?\n. What version of factory_girl_rails do you have installed? Mine's at 1.2.0.\n. Ok, looks like this could be because of the factory girl bump. I'll investigate a little later today.\n\nOn 09/01/2012, at 9:33, regedarekreply@reply.github.com wrote:\n\nok I removed factory_girl 2.3.2 and factory_girl_rails 1.4.0 and 130 examples pass. :)\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/123#issuecomment-3405248\n. If you go to /forem in your browser when accessing the application you should be able to see the forums there. This is because of how the engine is mounted inside the dummy app. \n\nSee spec/dummy/config/routes.rb.\nOn 09/01/2012, at 10:01, regedarekreply@reply.github.com wrote:\n\nI`m new with engines.\nIf i would like to see what i changed in my forked engine, the only way is push changes to my github repository and add to external application Gemfile something like this:\nruby\ngem 'forem',  :git => \"git@github.com:regedarek/forem.git\"\nor write tests. Is this correct?\nBecause when I`m starting server I see only Dummy App.\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/124\n. It's setup inside spec/dummy's migrations.\n. You know, you could probably get the installer to insert it itself. http://rubydoc.info/github/wycats/thor/master/Thor/Actions#insert_into_file-instance_method\n. Sorry, was up a mountain (with @parndt and ~60 other nerds).\n\nYou can't make it available through the forem method, as that's only supposed to be used as a routing proxy. Instead, just define it as forem_atom_auto_discovery_link_tag and use it where appropriate.\n. I don't know :( Perhaps @parndt knows? Maybe he's done it with Refinery?\n. +1 @parndt is crazy.\n. You would need to override all the views (use rails g forem:views to copy them over) and then replace what you'd like manually.\n. This is because the Forem::PostsController has a before_filter in it for find_topic. If you don't want it to find the topic, you will need to put this line inside your PostsController:\nruby\nskip_before_filter :find_topic\n. Do you have an application somewhere that we can take a look at to diagnose these problems? Right now we are completely in the dark as to how you have customized your Devise views.\nOn 12/01/2012, at 20:03, Akram-Khanreply@reply.github.com wrote:\n\nI have customized divise views to get it in a partial. The code works fine. However as soon as I install forem and try to signup I am neither able to signin nor able to signup.\nI have already added main_app to signin and signup.\nP.S:- Do we have a google group for forem? I am really struggling with forem implementation what should have been an easy task has already taken me three days.\nThanks,\nAkram\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/130\n. Your app/views/devise/shared/_links.erb should look like this:\n\n``` erb\n<%- if devise_mapping.recoverable? && controller_name != 'passwords' %>\n  <%= link_to \"Forgot your password?\", main_app.new_user_password_path %>\n<% end -%>\n<%- if devise_mapping.confirmable? && controller_name != 'confirmations' %>\n  <%= link_to \"Didn't receive confirmation instructions?\", main_app.new_user_confirmation_path %>\n<% end -%>\n\n<%- if devise_mapping.lockable? && resource_class.unlock_strategy_enabled?(:email) && controller_name != 'unlocks' %>\n  <%= link_to \"Didn't receive unlock instructions?\", main_app.new_user_unlock_path %>\n<% end -%>\n\n<%- if devise_mapping.omniauthable? %>\n  <%- resource_class.omniauth_providers.each do |provider| %>\n    <%= link_to \"Sign in with #{provider.to_s.titleize}\", main_app.omniauth_user_authorize_path(provider) %>\n  <% end -%>\n<% end -%>\n```\n\nYou were originally missing the main_app. prefixes on the routes. There's also an issue where routes such as password_path don't work, and so you need to use user_password_path instead.\nThe error for POST /user.sign_in is because you've overriden Devise's signup_path helper by defining one inside your routes file. Inside app/views/devise/registrations/_new.html.haml change where it has signup_path to not pass an argument to this method so it uses the correct route.\n. The problem seems to be with your heavy customization of Devise, more than anything to do with Forem.\n. Thanks Matt!\n. Without looking at the code I can confirm this is an issue (seriously). Would you be able to submit a patch to fix this? It should be in app/views/forem/forums/_forum.html.erb. It just needs to change to forum.topics.visible.count or something like that. Oh, and the posts will also need to be changed.\n. To do that you could add a new scope to both the Forem::Post and the Forem::View model also called visible that did something like this for Forem::Post:\nruby\ndef self.visible\n  joins(:topic).where(\"topics.hidden\" => false)\nend\nAnd a small change for Forem::View\nruby\ndef self.visible\n  joins(:post => :topic).where(\"topics.hidden\" => false)\nend\nWith those two scopes you could implement the same thing as you've just done for the topics count.\n. I believe this issue to be fixed now.\n. Couldn't you do this already by calling this inside an initializer of your application:\nForem::Admin::BaseController.layout \"admin\"\nThat would set the base controller's layout and the other controllers will inherit from that.\nOn 20/01/2012, at 4:51, Gleb Mazovetskiyreply@reply.github.com wrote:\n\nMost websites already have an admin site. \nIt would be real nice to be able to specify a different layout for Forem::Admin controllers\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/133\n. Oh, my mistake. That will probably work only on the first request in dev mode. You should wrap it in a to_prepare block like this:\n\nRails.application.config.to_prepare do\n  Forem::Admin::BaseController.layout \"admin\"\nend\nThat way, it will always set the layout rather than just doing it once, as initializers are loaded only once, where to_prepare callbacks are triggered on every request in development but only once in production!\n. Great to hear :) If you have any other questions we'd be happy to help.\n. Picked + amended to be @b8da9a6 (with closes message)\nThanks for taking the time to investigate+patch this!\n. @parndt I find that hard to believe given that 4.0 is supposed to be released in mid-2013. I wouldn't be surprised if they did a 3.3.\n. You're right in it needing both. Could you submit a patch for this?\n. Nope, Forem doesn't support Rails 3.0 due to the inability to mount an engine easily inside an application. In 3.0, you basically need to extend the application's routes, which is just a Bad Idea.\nI would recommend upgrading your application to Rails 3.1 (which really isn't all that big of an upgrade, really!) and then trying Forem again.\n. Thanks for pointing this out. I've now fixed this in @8838be9. You can fix your application by editing config/initializers/forem.rb manually and changing the Forem.user_class configuration to be a string instead of a class object.\n. No worries :)\n. Please Do Investigate\n. This is fixed in #149.\n. Confirm :( Perhaps we shouldn't make forem-redcarpet a solid dependency and just have no formatting by default?\n. As part of the 1.0 release \"things to do\", we're going to change this syntax highlighting over to syntax.js, and still keep forem-redcarpet as a dependency, but remove the syntax highlighting from it.\n. Uh yes. Some highlighting library in JavaScript would be good :)\n. Probably not. Python is a light dependency and there's really no better library out there that I've seen written in JavaScript.\n. We're currently tracking people's \"viewing habits\" in forem_views. We could use the information in that table to create a page where they could see all posts to a forum since their last topic view.\nI think seeing topics updated in the last day / week is obvious enough from the forums screen at the moment.\n. Sure, that'll work too.\n. Walk me through how people would use that feature. I think they'd want to see all newest posts for a forum. Indicating which forums have new posts seems overkill to me. \n. Ah, I see now. That makes total sense, thank you for taking the time to explain it.\nYou're right with describing the problem of hitting the back button on the forum. Here's what we can do:\n1. Change forem_views to track forums and topics by using a viewable polymorphic association.\n2. Create a new record in forem_views when a user views a forum.\n3. During the user viewing the forum, we select the first view that was performed greater than 15 minutes ago and get all topics posted after that. This would allow topics to remain showing as \"new\" for 15 minutes.\nWith this solution, If I viewed a forum yesterday and came back to it today, I would see all the new topics for 15 minutes no matter how many times I refreshed the page. \nSound good?\n. Yes, that's right.\n. What is the exact file path there? If you had it at app/models/concerns/viewable.rb, the module would need to be called Concerns::Viewable for it to be autoloadable by Rails. If you don't want to do that, you could always put it at app/concerns and that way it would only need to be called Viewable and placed as app/concerns/viewable.rb.\n. Right, that won't work because when you reference Forem::Viewable it checks the autoload paths for the application and checks for something in them at forem/viewable. app/models is in those autoload paths, and so Rails will look for a file at app/models/forem/viewable.rb when you reference this constant.\nIf it's where you're saying it is, the constant needs to be  Forem::Concerns::Viewable. You shouldn't need to alter autoload_paths to do this.\n. Ah, truth that is a problem. And yes, it was to keep the size of the table down. I wonder if this would be a problem on a large install if we did it that way.\n. How about switching topics + posts to have a views_count field on them that is then incremented every time somebody views a forum or a topic?\nI think we would need to have two fields in the views table then, one to track when was the last time they came to visit (past_viewed_at) and another to track the current time (current_viewed_at). If the current time field is within 15 minutes, we do nothing and then once past the 15 minute mark we set that value to past_viewed_at.\nWe can then query past_viewed_at to get all forums+topics that the user hasn't seen since > 15 minutes ago.\nThis would reduce the complexity of the views system, keep the forem_views table down to just one record p.er user and topic/forum pairing and allow us to show topics/forums that have new posts since a last visit.\n. Well, I don't think it should be a counter cache. It should just be a field that is incremented when people view. A counter cache would require a series of forem_views records to work, and we're not going to be doing that.\n. Thank you! Super appreciated!\n. Please extract changes pertinent to this pull request into another branch and re-submit a pull request. There are far too many commits in here with too many changes for my liking.\nFor instance, you have a commit that removes subscriber functionality and lib/forem.rb removes the forem_autocomplete attribute.\n. I think we should call a method at the top of each relevant view that sets a variable that the layout can reference as the title. Something like this:\nforem_title(\"#{@forum.title} - Forums\")\nRather than having an if statement with many possible directions.\n. It should be set as a string, not a class.\nOn 14/02/2012, at 15:51, railsnoob9reply@reply.github.com wrote:\n\nHow do we fix this? (sorry, we're forem/rails noobs)\nforem.rb currently has:\nForem.user_class = User \nwhat should this be changed to? (or does something somewhere else need to be changed?)\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/147\n. This is wrong:\n\nruby\nForem.user_class = User\nThis is right:\nruby\nForem.user_class = \"User\"\n. So you guys reckon this is cool to merge then?\n. ICE COLD.\n. Yes.\n. I've been looking at using the dummier gem for things like this. I think we should switch over to using that. It provides its own Rake task for generating the dummy application as well as some very useful hooks.\n. Merged, thank you :)\n. The joins is returning multiple topics. There should be a DISTINCT(topics.id) clause in there, I reckon.\n. Thanks for your work on this one :)\n. Why would this require a rake task or migration for existing installations?\n. Rightio, well use Forem::Topic.find_each inside that migration to fix it then. Gogo ;)\n. I reckon an extension (like how Spree does it) would be the best for this. You could use thinking-sphinx, which offers great full-text support. There's also elastic search which has been getting a lot of praise recently.\n. Yes, something like spree-solr-search.\nIndeed, that would require some configuration. If users want basic search then you could provide that through another extension that uses a gem like Ransack.\n. They can choose to assign no moderator groups to a forum meaning that nobody (bar the admins) will have moderator rights on that forum.\n. I usually am, but at this current point in time I am in DC (Bethesda) working out of the Spree offices. I'll be in Americaland until the end of April most probably.\n. Do you have an example application that reproduces this issue that we could look at?\n. More descriptive ticket titles please. (I updated it just then)\n. Huge success!\n. I think this is related to @jgadbois's fix in #150. He did mention it in #152, but I hadn't attended to that issue before seeing this one crop up.\nBy using includes, it will perform a LEFT OUTER JOIN and so we don't need to distinct on the selected fields.\n. Fair enough, I will look at implementing #154 maybe tomorrow or Monday.\n. Sure that would be really helpful. I'll be working on Forem until Wednesday next week, as we are going to be using it for Spree's forums.\nOn 25/02/2012, at 19:51, John Gadboisreply@reply.github.com wrote:\n\nThanks,  I can put some more time into it on Monday if you see anything that could be improved\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/159#issuecomment-4177703\n. What NameError? Please explain your problem better. If this is a problem because of the social_stream views you will need to raise an issue on that project. There's absolutely nothing we can do about it here.\n. Right, so you will need to ask the social_steam project to fix their views or fork it and fix it yourself. There's nothing we (the Forem team) can do here.\n. Why are you setting the updated_at field? I am not sure I understand that part.\n. What effect does setting it have though other to indicate when the topic was approved at? Afaik we don't use it anywhere in forem.\n\nOn 28/02/2012, at 21:46, Philip Arndtreply@reply.github.com wrote:\n\nI'm guessing because the hook that normally would is being bypassed?\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/pull/162#issuecomment-4230714\n. Update all is definitely a more sensible choice. Thanks :) \n. Yup, seems good. @parndt, go for it!\n. Please try again.\n. Unfortunately it's not as simple as removing the require statement.  The dummy app would need to require it in order for the tests to not break.\n. Yup, Bundler.require would do it automatically. Weeeeee.\n\nSo what would happen if we were to remove it as a dependency of Forem entirely?\n. It's specified as a gemspec dependency. I wasn't aware that you were able to do :require => false with that.\n. Ah I see what you're saying, maybe. You could do this in your Gemfile:\nruby\ngem 'kaminari', :require => false\ngem 'will_paginate'\nThat would at least tell Bundler to not require kaminari. It's a slight hack though.\n. :rageface:\nSorry, I don't know how to fix this problem right now.\n. Now that I've had a couple (read: eleven) hours to think about this, I reckon your idea is a pretty good one. Let's do it.\n. We came to the conclusion that this feature is better offered through an extension, similar to how Spree does it. See our discussion in #155.\n. If the tests are all green, then that commit is a known stable commit. \nPlease show us how we can duplicate the errors that you're seeing so that we can go about seeing if it is indeed a bug in Forem that we should fix.\nThanks.\n. Further information: we are looking at providing a strictly stable branch in the future. We are aware that master can sometimes be unstable. We're just looking to nail down some features before creating this branch.\n. I agree with Phil, this does make the code more defensive. Is it that all people can post without using an account? If so, why not override Forem::Topic to return a User.new object all the time, rather than nil?\n. I still don't understand this. Forem doesn't interfere with the User Interface in any other way besides adding a necessary Forem::DefaultPermissions to the user class configured with the Forem.user_class.\nWhat specific issue are you encountering?\n. Please let us know if you have a question that isn't answered on the wiki page: https://github.com/radar/forem/wiki/Theming.\n. Conflicting how? This helper should not conflict with anything.\n. Thank you!\n. Yeah, you never know what those Travis guys are up to...\n. I like this fix. Please submit a patch and we'll merge it!\n. Excellent, thank you!\n. It's now totally fixed by @049057a8e94e59610365b6764c733eb7876c8351.\n. \"wow!\" as in \"wow! why didn't we think of this before?\" :P Solutions are simple given enough time. Was just because that particular file from AS wasn't being automatically included.\nI think both REE and 1.8.7 are reaching EOL. I would still keep testing on them for now, while the Rails version that we support supports these versions. When Rails 4 comes out, Forem will also no longer support Ruby 1.8.7 variaties, mainly because it'll be impossible.\n. What happens if you fork forem and get that controller to point to Forem::ApplicationController rather than just ApplicationController? Both should work in identical ways, it's just that the way it is now should try loading the Forem::ApplicationController constant before it would try loading the actual ApplicationController constant.\nIf it doesn't break when you reference Forem::ApplicationController then that means it's probably referencing the actual application's ApplicationController and that's a Bad Thing(tm).\n. Alright, fairly easy fix then. One moment.\n. Looks like it was just that controller, and so I've fixed it up in faeacc8b8ea66ff1bab03b6f98d35a7f1a545797. Thanks for taking the time to confirm that for me. You totally nailed it :)\n. Thank you!\n. Define the to_s method on your User model to return username. \nAs for the anonymous permissions thing, I'm not sure what's going on there. \n\nRyan Bigg\nOn Friday, 6 April 2012 at 6:57, Vizakenjack wrote:\n\nI use rails 3.2.3 and ruby 1.93. \nI have User model as default, but the links to users shows as #User:0xae09660. How can I fix it? I want to display it as @user.username, not just @user\nAnother question - how can I give access to read all forums and topics to non-logged users? I have tried to add this to User model:\ncan_read_forem_forums?\ntrue\nend\ncan_read_forem_topic?(forum)\ntrue\nend\ncan_read_forem_category?(category)\ntrue\nend\ncan_read_forem_forum?(forum)\ntrue\nend\nBut it didnt help too -(\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/188\n. There's probably going to be more than just this one place where it's broken... will have to take a look at it a little later. If you'd like to help out, you could run the tests and fix the mass assignable issues as they crop up and submit those fixes as a pull request.\n. This should be dealt with in a better manner than commenting out some code. I would recommend fixing the category one and then run the test suite to find out what else is going wrong and go from there.\n. +1 for friendly_id\n. This will indeed fix just the Category model, but there's other issues as well.\n. Not at this stage, but if you brew up a patch and submit it to the project I can review it and pull it in.\n. First: I appreciate the amount of work that has gone into this patch.\n\nSecond: I strongly disagree with the changes in this patch. The large number of them makes it very hard to review just one group of changes at a time. Please consider splitting these different groups into separate pull requests so that they're easier to manage for us.\nThird: I would rather the views for the admin section, or for that fact, any section of Forem were not converted into haml. I am personally much more comfortable with ERB.\nEvery other change there I would be fine with, just as long as they're in entirely different patches.\n. Thanks @jasonnoble, fixed.\n. No concerns with it, do it.\n. Please submit a pull request for this.\n. Agreed.\n. How is this being stomped on by Forem? Could you please explain?\nOn 18/04/2012, at 10:27 PM, Andyreply@reply.github.com wrote:\n\nI have the following route helper in my application layout:\n<%= link_to t('menu.profile'), current_user %>\nIs there a simple way to convert this so that it isn't stomped on by Forem? I've converted all the other route helpers successfully by prepending main_app.\nI'm using Devise with Rails 3.2\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/199\n. Oh I see. Silly github sending new issue notificiations but not comments!\n. Your database.yml file in your application specified sqlite3. Thats why.\n\nOn 19/04/2012, at 8:03 AM, Nelson Kelemreply@reply.github.com wrote:\n\nsafarista$ rails g forem:install\n/Users/safarista/.rvm/gems/ruby-1.9.2-p136@global/gems/bundler-1.0.14/lib/bundler/rubygems_integration.rb:143:in block in replace_gem': Please install the sqlite3 adapter:gem install activerecord-sqlite3-adapter(sqlite3 is not part of the bundle. Add it to Gemfile.) (LoadError)\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/activerecord-3.2.3/lib/active_record/connection_adapters/sqlite3_adapter.rb:3:in'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in require'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:inblock in require'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in load_dependency'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:inrequire'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:48:in resolve_hash_connection'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:39:inresolve_string_connection'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:23:in spec'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:127:inestablish_connection'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/activerecord-3.2.3/lib/active_record/railtie.rb:76:in block (2 levels) in <class:Railtie>'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:36:ininstance_eval'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:36:in execute_hook'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:26:inblock in on_load'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:25:in each'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:25:inon_load'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/activerecord-3.2.3/lib/active_record/railtie.rb:74:in block in <class:Railtie>'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/railties-3.2.3/lib/rails/initializable.rb:30:ininstance_exec'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/railties-3.2.3/lib/rails/initializable.rb:30:in run'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/railties-3.2.3/lib/rails/initializable.rb:55:inblock in run_initializers'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/railties-3.2.3/lib/rails/initializable.rb:54:in each'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/railties-3.2.3/lib/rails/initializable.rb:54:inrun_initializers'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/railties-3.2.3/lib/rails/application.rb:136:in initialize!'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:inmethod_missing'\n   from /Users/safarista/github/esth/config/environment.rb:5:in <top (required)>'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:inrequire'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in block in require'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:inload_dependency'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in require'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/railties-3.2.3/lib/rails/application.rb:103:inrequire_environment!'\n   from /Users/safarista/.rvm/gems/ruby-1.9.2-p136@railspre/gems/railties-3.2.3/lib/rails/commands.rb:25:in <top (required)>'\n   from script/rails:6:inrequire'\n   from script/rails:6:in `'\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/200\n. Don't specify sqlite3 in either your database.yml or your Gemfile. Remove all reference to it.\n. You can't reference main_app inside an initializer.  \n\n\nRyan Bigg\nOn Friday, 10 August 2012 at 1:32, mbhnyc wrote:\n\nOdd, i'm getting an \"undefined local variable or method `main_app'\" error when assigning a custom sign_in_path in the initializer \u2014 anyone else seeing this?\nMy init line looks like:\nForem.sign_in_path = main_app.new_provider_session_path  \n\u2014\nReply to this email directly or view it on GitHub (https://github.com/radar/forem/issues/202#issuecomment-7617442).\n. @mbhnyc: Please provide us with an application that reproduces the issue that you're seeing.\n. Hm, I wonder why that problem hasn't come up sooner than this. I will look at crafting a patch to make this work now.\n. It is checking the login state correctly... that's not the problem. The problem is that it's attempting to go to a sign_in_path route for your application which is not defined. But you're using Devise, and since that's the de facto auth system these days and it provides its own routes, we should at least attempt to see if we can guess Devise's routes before erroring out. \n\nAnd then when we error out we should do so in a much more informative manner.\n. Check out @01a6623 and see if that helps you.\n. Urrite\nOn 24/04/2012, at 3:33 PM, Josh Adamsreply@reply.github.com wrote:\n\n+1 on \"we need a more generic settings system\"\nTo use rails properly, this is ideal here: http://api.rubyonrails.org/classes/ActiveRecord/Store.html\nAmirite?\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/pull/203#issuecomment-5316811\n. I wasn't aware that routes would work in an asset file.\n. It looks to me like you could be missing the jquery_ujs include from your application.js file, which should be included into your application's layout.\n. Yup, that's it. Thanks!\n. Fixed with @8a90a6f. Thanks again.\n. Sorry, that's commit @515839e73bccbcb2f228e23082538bc86e7114fc actually.\n. Thanks buddy!\n. You could simply place a blank file in your application at the same path: vendor/assets/javascripts/jquery.autocomplete.js. That would cause the asset pipeline to include the empty void inside that file, rather than all that JavaScript.\n. Not sure what @anguyen-elc is trying to do here. What's the the use case?\n. Closing this issue as the user has not replied in over a month.\n. No, there is no configuration option to miss. If you truly have the views inside your application and have committed them to Git and pushed them to Heroku then they will be overridden.\n. This is not the way to fix the problem. Do you have the application somewhere that we can investigate?\n. I believe this is fixed now. Please let us know if there's any more trouble with it.\n. Is it necessary to create a different view for the reply post? Why can't you just use the post partial that already exists?\n. Ok, in that case then having a second template is probably a better idea.\n. Other than that one note, this pull request looks good to me. Fix that up and I'll merge it in.\n. Looks good, thanks.\n. DENIED.\n. No, this feature is currently not supported. What I would recommend to do is to add a decorator for the Forem::Post model that would send out notifications every time a post has been created. \n. There's nowhere that we're routing to this action, other than in the form to create a new topic, which is only visible if you're signed in. Unless I'm missing something?\n. Yeah, unless it can be reliably reproduced by something other than a hearsay report.\n. @murtazajafferji Please provide exact steps to reproduce this. This is a very commonly tested scenario by our test suite, which is currently passing.\n. > exact steps\n\nI need to know what buttons precisely you pressed so that I can reproduce the issue myself.\n. You removed the filter from where?\n. Thanks for taking the time to submit a pull request!\n. You didn't test this, did you?\n. No worries, easy fix.\n. Thanks, merged :)\n. This issue has now been fixed. Thanks for letting us know about it.\n. You would need to create a decorator for the Forem::Forum class to add attr_accessible to this.\nPut this code inside your application class inside config/application.rb:\nruby\nconfig.to_prepare do\n  Dir.glob(File.join(File.dirname(__FILE__), \"../app/**/*_decorator*.rb\")) do |c|\n    Rails.configuration.cache_classes ? require(c) : load(c)\n  end\nend\nAnd then inside app/models/forem/forum_decorator.rb, put this code:\nruby\nForem::Forum.class_eval do\n  attr_accessible :admin_only\nend\nThat will then add admin_only to the list of accessible attributes, while still preserving the initial attributes.\n. I believe this to be fixed now with @179c875. Please let us know if you have any more trouble.\n. Yes please \n\nRyan Bigg\nOn Tuesday, 10 July 2012 at 7:17, Eric Tjossem wrote:\n\nI can move this to a separate issue if you like, seeing as you already fixed (1) and (3).\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/242#issuecomment-6859953\n. This is now fixed with your commits. Thanks!\n. Just FYI: Your fix introduced a bug (see #255). This was entirely my fault because I wrote the last_post_at test poorly. If I didn't do that then the test would've failed and you would've seen the mistake. \n\nI've now fixed this with @ad618f98b3fc2de86b500c56aca4be1ac99dae9e.\n. Merged, thanks!\n. I believe this is because of your client_side_validations extension. The final line of the stacktrace is this one, and therefore I suspect it is the cause. Please investigate.\n. This issue is now fixed with @7e26a786a70968975d29b63d086120f1c76bf3bb. Thanks!\n. Please fix the failure caused by this pull request.\n. What happens if you upgrade will_paginate to 3.0.3?\n. Frown face.\nWill investigate after this short stint of writing.\n. I've not been able to reproduce this issue... Do you have a test application that I could try?\n. I have verified today that this issue happens only when running will_paginate 3.0.0. If you are running an up-to-date version, i.e. 3.0.3, this issue does not occur. Your console output still claims to be using 3.0.0.\nPlease upgrade to will_paginate 3.0.3.\n. Please share some code examples. Can't debug without a way to reproduce the problem;\nOn 22/06/2012, at 9:44 PM, jasonlfunkreply@reply.github.com wrote:\n\nI installed Forem and it looks great. The only issue that I am having is that none of my normal routes seem to exist inside of the Forem section of the site. I was unable to use my shared navigation bar because it said the routes didn't exist.\nIs there anyway around this?\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/252\n. Can someone please provide a stacktrace for this issue? I'd be interested to know why this was broken.\n. Forem will now enforce CanCan 1.6.7 because 1.6.8 is broken. Will revise when necessary.\n. Namespaced controllers may not mean namespaced resources, such as in the case of Admin::ForumsController. I don't mind this CanCan change. \n\nIf we need to upgrade to a later version of CanCan we can make the change as @alexnesbitt suggests.\n. Thank you!\n. I've not deployed to forem.herokuapp.com in a while. Let me see if a new deploy fixes it.\n. HEROKUUUUUUUUUUUU!!!! :angry:\n. Heroku still being a bitch. Will look at this later. Have paid work to be doing.\n. Do you have a reliable way to reproduce this error locally? Just trying to get a grasp of it.\n. And right after I make an idiot of myself by asking if you can provide steps, I find out how it happens. \nTake two topics: Topic A and Topic B. I first create Topic A and then create Topic B. Topic B is then correctly the latest post. If I reply to Topic A, then Topic B is incorrectly still the latest post.\nLooking into it.\n. There is already a test for this inside of post_spec.rb \"sets topic last_post_at value\" but the test is too fast, and so incorrectly passes. The test needs for at least a second to pass between the first post creation and the second post creation.\nThe bug you're seeing was introduced as a fix for #245 with the commit @46345c4. It's not setting last_post_at because there's a check in the Post model that means that last_post_at will only be set if it's nil. This is clear now when I look at the commit that introduced this change. Sorry, I should've spotted it sooner.\nJust fixing up the test now and will commit in a sec.\n. This is now fixed with @ad618f98b3fc2de86b500c56aca4be1ac99dae9e. If you have topics incorrectly sorted in your database, you will need to write a script to correctly assign the last_post_at field to their last post's created_at date. Sorry that this happened.\n. You can override the can_read_forem_category? method inside your User model to then query an ActiveRecord model to determine if the user can/can't access that category.\nIs that what you mean?\n. I am unable to reproduce this issue. The spec here should be enough to replicate this issue. You can see that the radio buttons are not output on the page  by putting a page! anywhere after the click_button \"Reply\" call.\nPerhaps the user is a moderator?\n. Probably Radar. \n. What version of Forem are you using @etjossem? I still can't reproduce the bug this morning.\n\n. What does it say in Gemfile.lock? \n\nRyan Bigg\nOn Friday, 13 July 2012 at 0:19, Eric Tjossem wrote:\n\ngem 'forem', :git => \"git://github.com/radar/forem.git\", :branch => \"master\"\nUsing forem (1.0.0.beta1) from git://github.com/radar/forem.git (at master)\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/259#issuecomment-6936260\n. You're using an older version of Forem, one that was \"released\" on July 6th. Have you tried replicating this problem with the latest commits? \n\nOn Saturday, 14 July 2012 at 1:38 AM, Eric Tjossem wrote:\n\nIn views:\n<% if post.pending_review? %>\n<div class='moderation'>\n<%= t(\".pending_review\") %>\n<% if local_assigns[:mass_moderation] %>\n<%= render \"forem/posts/moderation_tools\", :post => post %>\n<% else %>\n<%= form_tag forum_moderate_posts_path(post.topic.forum), :method => :put do %>\n<%= render \"forem/posts/moderation_tools\", :post => post %>\n<% end %>\n<% end %>\n</div>\n<% end %>\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/259#issuecomment-6966418\n. Alright, great to hear. Thanks!\n. With Spree we have decorators inside their relative directories. I can see where @parndt is coming from and agree with it, but only if the structure is like this:\n\napp/decorators\n  |-> models\n        |-> post_decorator.rb\n  |-> controllers\n        |-> posts_controller_decorator.rb\n. That's what @kunalchaudhari's initial patch does, but I would rather all the decorators not be mixed in with real controllers/models/whatever.\n. The guide should be patched to contain correct namespacing of the overrides as well, i.e.\napp/decorators/controllers/forem/posts_controller_decorator.rb\nRather than:\napp/decorators/posts_controller_decorator.rb\n. :metal:\n. That's right. Exactly as I've explained above.\n. How would it work with legacy links? I would assume it would work fine, right? \n. PDI @juozasg.\n. Is there a stack trace for that error?\nOn 19/07/2012, at 1:22 AM, Eric Tjossemreply@reply.github.com wrote:\n\n```\n10:09:29 web.1        | Started GET \"/hub/forums/1\" for 127.0.0.1 at 2012-07-18 10:09:29 -0500\nThe following fatal error occurs when viewing the forum page for any forum which contains posts.\n...\n10:09:31 web.1        | [2012-07-18 10:09:31] INFO  ActionController::Base :   Rendered forem/forums/show.html.erb within layouts/forem (212.5ms)\n10:09:31 web.1        | [2012-07-18 10:09:31] INFO  ActionController::Base : Completed 500 Internal Server Error in 519ms\n10:09:31 web.1        | [2012-07-18 10:09:31] FATAL Rails : \n10:09:31 web.1        | ActionView::Template::Error (undefined method `posts' for #):\n10:09:31 web.1        |     17:     <%= t \"started_by\" %><%= topic.posts.by_created_at.first.user %>\n10:09:31 web.1        |     18:   \n10:09:31 web.1        |     19:   \n10:09:31 web.1        |     20:     <%= link_to_latest_post(topic.posts.by_created_at.last) %>\n10:09:31 web.1        |     21:   \n10:09:31 web.1        |     22:   <%= topic.posts.count %>\n10:09:31 web.1        |     23:   <%= topic.views.sum(:count) %>\n```\nRolling back to June 30th's commit using gem 'forem', :git => \"git://github.com/radar/forem.git\", :branch => \"master\", :ref => \"af58288\" fixes the issue, so I suspect a recent commit. Possibly the changes in 1da2fd8?\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/263\n. @funkdified Thanks for debugging that :)\n\nMaybe we should add gasp type-checking to that method to ensure it's always passed a Topic?\n. [votes to rewrite Forem in Haskell]\n. Not right now, but we could probably add something like the register_ability method that Spree has.\nThat way we could then register \"foreign\" abilities with Forem's Ability class.\n. Ok then, please write a patch to add this feature into Forem if you'd like it. \nOn Tuesday, 24 July 2012 at 4:18 AM, hk6500 wrote:\n\nsounds great for me!\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/265#issuecomment-7186282\n. Please open a new pull request when you have the code for this fix done.\n. The code is wrong.\n. Fixed with @0fc9bae. Thanks for playing!\n. That should be before_filter :setup_application_variables. You're missing the colon.\nOn 21 Jul 2015, at 07:34, Jonathan Lee notifications@github.com wrote:\nHello, I seem to be having the same problem. But I can't even get the server to run.\nHere's what I have:\n`\nForem::ApplicationController.class_eval do\ndef setup_application_variables\n@section = Node.find_by_un(:networking_section)\n@node = @section.children.first.child(:page, \"discussion_forum\")\nend\nbefore_filter setup_application_variables\nend\n`\nIt's throwing an error saying:\nundefined local variable or methodsetup_application_variables' for Forem::ApplicationController:Class (NameError)`\nI placed this in app/decorators/controllers/forem/application_controller_decorator.rb, along with a base_controller_decorator.rb that contains nearly identical code except namespaced to \"Forem::Admin::BaseController.\" I apologize if I'm missing something obvious here.\nI'm using rails 4.1.8, with ruby 2.1.2\n\u2014\nReply to this email directly or view it on GitHub.\n. In future, please file new issues instead of resurrecting old ones.\nOn 21 Jul 2015, at 07:34, Jonathan Lee notifications@github.com wrote:\nHello, I seem to be having the same problem. But I can't even get the server to run.\nHere's what I have:\n`\nForem::ApplicationController.class_eval do\ndef setup_application_variables\n@section = Node.find_by_un(:networking_section)\n@node = @section.children.first.child(:page, \"discussion_forum\")\nend\nbefore_filter setup_application_variables\nend\n`\nIt's throwing an error saying:\nundefined local variable or methodsetup_application_variables' for Forem::ApplicationController:Class (NameError)`\nI placed this in app/decorators/controllers/forem/application_controller_decorator.rb, along with a base_controller_decorator.rb that contains nearly identical code except namespaced to \"Forem::Admin::BaseController.\" I apologize if I'm missing something obvious here.\nI'm using rails 4.1.8, with ruby 2.1.2\n\u2014\nReply to this email directly or view it on GitHub.\n. Would you please provide an example of how you've been attempting to access the models? Thank you.\n. The models within Forem are namespaced to be inside the Forem module. Therefore you will need to reference them with a fully-qualified name: Forem::Topic.\n\nThey may be referenced as simply Topic inside the engine itself because the references to them are already inside the Forem module.\n. It was failing beforehand. Sorry about that.\n. Thanks! :)\n. Could you provide a stack trace for the error?\n. Ok, so why is friendly_id getting involved in that model when it shouldn't be? Perhaps @parndt would know.\n. I like the idea behind this, but am afraid of technical debt that this would bring on.\n. Could you write a regression test for this issue please?\n. Thank you @kunalchaudhari for reporting the issue and fixing it :)\n. You should be using forem.forums_path. The engine's name is forem.\nSee the Engines Guide\n. Calling the helpers inside Spree will be fine as long as you use the prefix. If you don't use the prefix then you will be having this problem. \nIf you can duplicate the error in a brand new Rails app I can take a look at it once I am out of this traffic. \n\nRyan Bigg\nOn Wednesday, 1 August 2012 at 14:45, murtazajafferji wrote:\n\nDo you think it has something to do with the fact that I am calling the url helpers inside of the Spree engine?\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/274#issuecomment-7418544\n. Where in this application are you seeing the error? \n\nOn Wednesday, 1 August 2012 at 4:12 PM, murtazajafferji wrote:\n\nok great. I just created a new app with Spree and Forem and I reproduced the issue:\nhttps://github.com/murtazajafferji/forem_url_helpers_demo\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/274#issuecomment-7419537\n. The application is broken because sign_in_path is not defined.\n. Please provide an application that can reproduce this error quickly. As much as I enjoy hearing about people using Forem and actually using it, I do not have the time to come up with example applications on my own. Please help us, help you.\n. Ok, now I see the problem. It's because we weren't prefixing all URLs inside of Forem with forem. as we should have been doing. I've now fixed this with @dd993982f2470317f9adc14b6eb27a24d2f95fbf. Please try out that commit and see how you go.\n. Whoops, just need to fix some conflicts and then I can push. one moment.\n. Ok, dd993982f2470317f9adc14b6eb27a24d2f95fbf is the commit. Please try it out. Thanks for taking the time to provide that application. It really helped!\n. Because our tests are isolated and we're not including any partial into the main app of our test suite. Someone should really write a test for that. \n\nOn Wednesday, 1 August 2012 at 5:10 PM, Philip Arndt wrote:\n\nWow how did our tests not notice?\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/274#issuecomment-7420542\n. You are right, this should be root_path and not forums_path. I've fixed this with the above commit.\n. Please explain this better and show examples of where this is happening  \n\n\nRyan Bigg\nAselOn Friday, 10 August 2012 at 2:04, mbhnyc wrote:\n\nOn a related note, is there a way to avoid the double-forums-route on viewing a particular forum? Like a catch-all route that checks for a forum and displays?\n\u2014\nReply to this email directly or view it on GitHub (https://github.com/radar/forem/issues/276#issuecomment-7618436).\n. Right.\n\nThe way to fix that would be to define a catch-all route at the bottom of forem's routes file that re-defines forum_path to point to that. The problem with that is that you'd need to be careful that the forum's permalink doesn't clash with any other route in forem.\n. You're right, it's checking for the wrong column. Could you please submit a patch to fix that? \nOn Friday, 3 August 2012 at 12:09 PM, alexnesbitt wrote:\n\nIs this migration supposed to check for the existance of forem_admin or for forem_auto_subscribe?\nhttps://github.com/radar/forem/blob/master/db/migrate/20120616193448_add_forem_auto_subscribe.rb\nclass AddForemAutoSubscribe < ActiveRecord::Migration\ndef change\nunless column_exists?(user_class, :forem_admin)\nadd_column user_class, :forem_auto_subscribe, :boolean, :default => false\nend\nend\ndef user_class\nForem.user_class.table_name.downcase.to_sym\nend\nend\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/278\n. Thanks! \n\n\nRyan Bigg\nOn Friday, 3 August 2012 at 14:30, Kunal Chaudhari wrote:\n\nall routes / form builders were prefixed with forem routes proxy in fix of #274. so one form builder is _post.html.erb file missed that change. updated that one.\nYou can merge this Pull Request by running:\ngit pull https://github.com/kunalchaudhari/forem forem-routes-proxy\nOr you can view, comment on it, or merge it online at:\nhttps://github.com/radar/forem/pull/279\n-- Commit Summary --\n- add forem proxy in form builder missed in change of #274\n-- File Changes --\nM app/views/forem/posts/_post.html.erb (2)\n-- Patch Links --\nhttps://github.com/radar/forem/pull/279.patch\nhttps://github.com/radar/forem/pull/279.diff\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/pull/279\n. I believe this is now fixed on the latest Forem.\n. Sorry about that, my fault. I've fixed this now with @2dbb3881d2ede4c4e7fc922875058f0f21281e02.\n. You can set config.i18n.default_locale = :fr in your config/application.rb to default the locale for your entire app to French.\n\nThere isn't a way to do this just for the Forem engine at the moment.\n. This pull request appears to have a lot of other unrelated commits in it for the autocomplete stuff...\n. I would love to make it a configurable option but I don't have the time to do that right now.\n. Done. Finally.\nSet Forem.moderate_first_post = false if you don't want the moderation.\n. Could you give us a case where it should be doing this precisely?\n. Closing it as nobody has responded in over 2 months.\n. I'd gladly accept a patch for this. Would you be able to submit it?\n. You should be using named routes instead. Hash arguments are the ancient way.\nUse main_app.items_path. I assume here you have resources :items in your routes.\nOn 29/08/2012, at 21:54, Povilas Skrebutenas notifications@github.com wrote:\n\nHello,\nhaving trouble with layouts. In current app I'm using links like: \n<%= link_to(\"My Items\", :controller => 'items', :action => 'list') %> \netc.\nAnd these links are available in layouts (menu bar for example).\nSo, as Forem is using isolated namespaces these links does not work. Any chances them to get work without adjusting Forem gem?\n\u2014\nReply to this email directly or view it on GitHub.\n. I like the cut of your jib!\n. I don't mind this change. I'll merge.\n. Thanks for doing this!\n. What benefits would that provide?\n. Do you have some examples of this?\n. @parndt wdyt?\n. Ok, I can see that point in the argument. Makes sense to not include another dependency.\n. You need to use main_app prefix:\n\nruby\nmain_app.books_path\nPlease read the Engines Guide to find out more information.\n. The instructions aren't meant to be taken so literally. Sorry for any confusion there. What we mean is that in the CSS you should do this:\n= require \"forem/base/style\"\nAnd then in the layout, this:\nerb\n<%= stylesheet_link_tag \"forem/base/style\" %>\n. @3kingsdev: again: need a much better problem description than just what you've tried \n. Please show us the steps you used to attempt to pull in the theme. We cannot debug a problem without seeing how you got there in the first place!\nOn 16/02/2013, at 8:34, trestles notifications@github.com wrote:\n\nany update on this issue ^^ The theme doesn't seem to be pulled in. Probably an issue with how I'm doing it. Maybe docs need to be more explicit about how to do this.\n\u2014\nReply to this email directly or view it on GitHub.\n. @chrismeier You just need to add the forem-bootstrap gem as a dependency and then include the CSS file it provides. There should be nothing else to do after that.\n. Define a to_s method on your Account model that returns this value.\n. @kultus: I am extremely disappointed that you didn't offer a description for this issue. Please be clearer about your intentions in the future.\n. \n\nAnd by \"like\" I mean \"let's please keep this on track\". Maybe @kultus has a very good reason for wanting delayed_job as part of his app. Perhaps it was for the email notifications sent out by Forem?\nIn that case: I would be hesitant to add a feature, since Rails 4 will have a queuing feature which will accomplish this task. Why would we add a feature that would be Very Soon Now(tm) deprecated by a future release of Rails? Seems like a lot of work to cover only a very short period of time.\n. Besides a cleaner syntax, haml doesn't offer anything over using just plain ERB. Going along with what @parndt said here:\n\nI am in favour of not introducing more dependencies if it is just syntactic sugar.  If we need to do something that [gem] can do and [default] can't then it is a different story but I don't think this is the case.\n\nSo no, sorry.\n. @prasadrails Please show us what you've tried so far. Resque has great documentation which should be pretty self-explanatory in how it works.\n. These are now fixed. Please let me know if you find anything else that is broken.\n. Just a blank decorator does this?\n. I think I fixed the locations that didn't use the fully-qualified names with the above commit. If you find any others, please let us know in the form of a pull request.\nRegarding the threading scheme, it could be interesting :)\n. I am a little excited about the prospect of having these within forem.\n. :heart: so much  \nOn Wednesday, 3 October 2012 at 11:49 AM, Josh Adams wrote:\n\n--($:~/rails/forem)(master)ruby-1.9.3-p125@forem--\n$ git checkout -b gemoji\nSwitched to a new branch 'gemoji'  \n\u2014\nReply to this email directly or view it on GitHub (https://github.com/radar/forem/issues/313#issuecomment-9093350).\n. :tada:\n. Needs to be supported also in:\n- Forum titles\n- Forum descriptions\n- Topic subjects\n. Is good now.\n. I would say this is the problem:\n\nWARNING: Can't verify CSRF token authenticity\ncan you show me the HTML around the delete link please?\nOn 04/10/2012, at 7:53, Matt notifications@github.com wrote:\n\nWARNING: Can't verify CSRF token authenticity\n. Are you able to reproduce this issue in a brand new rails app and put it on GitHub for us to inspect?\n\nOn 07/10/2012, at 3:51, Matt notifications@github.com wrote:\n\nStill haven't figured this out :(\n\u2014\nReply to this email directly or view it on GitHub.\n. @mattwd7 Still waiting... Please don't flag issues as \"serious\" if you're not going to reply within a day.\n. No worries.\n\nYour initial post said it was \"urgent\" and so I took that at face value.\nVery happy to help you when you can provide me with some code that I can\npoke+prod at myself.\nThanks for using Forem!\nOn 9 October 2012 15:49, Matt notifications@github.com wrote:\n\nSorry, I dont know how to unflagging the urgency of this. I've had to\npostpone launching the site and have not been at my computer for a few\ndays. I will try reproducing the issue with a new app as per your suggestion\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/issues/316#issuecomment-9248880.\n. I have verified on http://forem.herokuapp.com that I am able to delete both posts and topics.\n. This issue does not have enough useful information for us to do anything about. Please provide a list of steps to reproduce this issue. Imagine if a person completely new to Forem wanted to reproduce it.\n. It'd be @forum if anything. You can probably access that in your layout, but beware that it's not always set. This is what it's called inside Forem::ForumsController and Forem::TopicsController. On Forem::PostsController actions, you will need to check for @topic.forum.\n\nI think having a current_forum helper could be useful for situations like this. We could use it in places where we're doing @topic.forum inside Forem.\n. Please see #289.\n. I thought we had a warning on the mount line that said something like \"pretty please don't use :as\", or maybe I am confusing that with spree.\n. @llexa313: That problem looks like something to do with your database setup. initialize_on_precompile should be false if you're using Heroku.\n. @ac360: Is it possible for you to give me (radarlistener@gmail.com) access to your Heroku application so that I can attempt to deploy it and see these errors for myself? That would really help me to be able to debug it. If you're not able/willing to do that, then attempt to reproduce this issue in a brand new app with the same Gemfile. If you're able to reproduce it there, then please share with us that Gemfile and I'll attempt to reproduce it myself.\nThanks!\n. You should be using main_app.home_sites_path when referencing that helper. This is because its being referenced from inside the engine and the engine has no concept of home_sites_path.\nOn 19/10/2012, at 4:49, Kadoudal notifications@github.com wrote:\n\nI mounted the Forem::Engine in my app\nMyApp::Application.routes.draw do\nscope \"/:locale\" do\n...\nresources :sites, :only => [:none] do\nget 'home', :on => :collection\nget 'events', :on => :collection\nend\n..\nmount Forem::Engine, :at => \"/forums\", :as => :forums, constraints: lambda { |r| r.subdomain.present? && r.subdomain != 'www' } , :defaults => { :locale => I18n.locale }\n...\nend\nwhen I display the home page of the subdomain, http://bingo.lvh.me:3000/ I don't have any problem with the navbar links in the header\nin which I have :\n= link_to t(:home), home_sites_path(:locale => I18n.locale)\n= link_to t(:forums), forums_path(:locale => I18n.locale)\nUpon clicking on 'forums' item ( generated url: bingo.lvh.me:3000/en/forums ) , I am redirected correctly to the engine Forem::forums#index, the rendering raises an error with the home link ...\nundefined method `home_sites_path' for #<#Class:0x007fdd936ce5f8:0x007fdd96db7e70>\nit seems that my app routing is lost\ndespite the fact that I get the route in my routes.rb, but maybe 'forums_path' is not the right\nwhat could be wrong ? thanks for feedback\n\u2014\nReply to this email directly or view it on GitHub.\n. Hi Monika,\n\nPlease show us the stack trace for this issue\nOn 23/10/2012, at 1:43, Monika Szalas notifications@github.com wrote:\n\nI've installed forem to my new app. I'm using devise for authentication, so my user class and current_user helper are default. Generator forem:install was finished successfully, but when I try access to /forems route I have a error (I've restart the ruby server):\nActionView::Template::Error (undefined local variable or method `forum' for #<#Class:0x10b5430d8:0x10b53c620>):\n1:\n2:\n<%= link_to t('forem.forum.forums'), forem.root_path %> \u00bb <%= link_to forem_emojify(forum.category), [forem, forum.category] %> \u00bb <%= link_to forem_emojify(forum.title), [forem, forum] %>\n3: <%= forum.description %>\n4: \n5: <% unless @topic.try(:new_record?) %>\n\u2014\nReply to this email directly or view it on GitHub.\n. No worries, thanks for letting us know.\n. @eostrom The point of the installer is to set up Forem for your application. It is not designed to be run more than once over the course of the entire application's lifestyle.\n\nIf anyone is still seeing this issue with the most recent versions of Forem, can you please show me a Gemfile which reproduces this problem?\nThanks!\n. @eostrom Yes, seed data can be run once on every developer's database. I am not sure quite what you're suggesting other than moving the seed data out of rails g forem:install? Maybe that's all you're suggesting. To move it out of that and make it runnable with rake db:seed.\n. Closing as \"won't fix\"\n. How about adding a decorator for Forem::ApplicationController that calls your authenticate_user! before filter? Would that work?\nApologies for not replying sooner. I must've missed the email for this issue.\n. Ok. Thanks.\n. We have no intention of adding voting support to Forem at this time.\n. Confirm. Please define a to_s method in your model.\nOn 07/11/2012, at 5:49, indieambassador notifications@github.com wrote:\n\nI think it might be better to overwrite to_s in the user model with something that will output what you want..\nin your user model...\ndef to_s\n     \"#{fullname}\"\n   end\n\u2014\nReply to this email directly or view it on GitHub.\n. Thank you for the patch.\n\nI've modified it (3a2c4c1) so that we are using Object.const_get(@@user_class) to get the constant from the top-level, like we should. This means that I've undone some of your changes, but I have also kept the others such as the model spec which test that this behaviour is not broken.\n. I've gone with something similar to your original situation in order to fix this problem. I really wish there was an easier way to get the relative-to-toplevel path for a constant, but I couldn't find one.\n. Agree. It's the best that we can come up with for now, unfortunately.\n. Hi @kot-begemot and @RamakrishnanK, could you please try using the fix-329 branch and let me know if that fixes your problems please?\n. Actually, this is customizable. You need to define a translation for forem.topic.received_reply within a locale file inside your application, for example config/locales/en.yml\nyml\nforem:\n  topic:\n    received_reply: \"You've received a reply!\"\n. That's so weird. I've seen the emojis working within Forem with my own eyes! I've applied a fix for this now. Thanks for bringing it to our attention :)\n. Ugh, I got confused. Sorry. Gemoji is broken. I will submit a patch there.\n. I agree with @knewter. Forem doesn't need to support this. It's your application that should support this.\n. Seems legit. :+1:\n. There is no integration planned for mongoid or any other ORMs at this stage. It could possibly be supported using the orm_adapter gem. If you would like this implemented, please do it yourself.\n. +1 looks good\n. That was just a travis build artifact, nothing to be too concerned about.\nI added a test for this patch and merged it with the above commit. Thank you!\n. What's the URL that it's attempting to look up the emojis under?\n. Cheers for the fast response. Do you have an example app that reproduces this problem?\n. As I said in IRC, I think this is just because you're not resetting the column information before db seed runs. That's all.\n. +1 for this also. Please submit a patch.\n. I had time tonight to write a patch for this.\n. @parndt This is my PR and I think the only PR on this.\n. It wouldn't be a radar patch if it didn't break anything.\nOn 04/12/2012, at 9:06, Philip Arndt notifications@github.com wrote:\n\nUnfortunately it completely bombs CI\n\u2014\nReply to this email directly or view it on GitHub.\n. I get all tests passing locally. I don't know why Travis is choking on it.\n. makes shifty eyes\n\nMay have forgotten the migration.\n. This issue does not provide enough information in order to accurately reproduce it. Please provide steps to reproduce this issue.\n. @giedriusr: Thank you. I will take a look at this issue when I have time later.\n. Hi will,\nCould you please look into this issue for us? I am sure it's something simple that we've messed up. Shouldn't take up too much of your time.\nThanks!\nOn 05/12/2012, at 18:52, Will Cosgrove notifications@github.com wrote:\n\nI'm in the same boat, having the same problem. User model with Devise, running on Postgres. Exact same error.\n\u2014\nReply to this email directly or view it on GitHub.\n. Define to_s on your User model to fix this problem.\n. Looks good. Merged, thanks!\n. I don't think it's needed if you can just check topic.posts.first as @parndt said.\n. You need to define the to_s method on your User model\n\nOn 02/12/2012, at 21:42, stanl3y notifications@github.com wrote:\n\nMy forum is not displaying correctly, any ideas why?\nLast Post: Second topic by #User:0x007f22702a5050 7 minutes ago\n\u2014\nReply to this email directly or view it on GitHub.\n. BUILD IS BROKEN.\n\nOh no it's just Travis nm.\n. @parndt Review kthx.\n. <3\n. Jared: please show us your Gemfile.lock file. The tests for this feature\nare definitely working. The only ways I can think that it wouldn't be\nworking is if you didn't include the forem-redcarpet gem or didn't update\nforem.\nOn 11 December 2012 06:41, Jared Volpe notifications@github.com wrote:\n\nhmmm... i thought this was working but no dice. anyone else?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/pull/352#issuecomment-11213801.\n. Looks like you're on an older version of forem: https://github.com/radar/forem/commit/79ac5972.\n\nPlease run bundle update forem.\n. ^ That commit has fixed it on the show template and the admin backend. Thank you again.\n. Looks simple and the tests pass. Thank you!\n. My bad, I should've linked #373 here. There's work in progress on the members-select2 branch to fix this problem.\n. I think I've fixed this up with 03725d78827c235574b0186350316821c880a7e9 now. Could you please run bundle update forem and try again?\n. I've bumped both the redcarpet and pygments dependencies of forem-redcarpet. Please try this again.\n. @shivanibhanwal Just to confirm: you're seeing this on a new forem installation when you attempt to quote a post?\n. Hi @shivanibhanwal. I've taken a look at this issue today and made some tweaks to how we're doing sanitization of HTML in the post text. We are now using the sanitize gem to sanitize the input and show the right HTML tags. \nAs far as I can tell, this has fixed the issue you reported. Please run bundle update forem and let me know if you run into any more problems.\nThanks for using Forem :)\n. @bodrovis Please provide exact steps to reproduce that issue within a new Forem application.\n. Hi @bodrovis, I think the best course of action is to remove the usage of simple_format completely and rely on the formatters for Markdown + Textile to render the paragraph tags themselves. I've added a commit to master and rails4 which has this change in it now.\nCan you please check and see if that is looking any better?\nThanks!\n. Wow, that's some post you have there :) \n1. Good, so it looks fine on something.\n2. This is just a styling issue. The time element needs to have display: block set on it and everything is fine.\n3. Issue with the formatter, which I've now created a PR. No idea if they're going to merge it. Might have to use my fork for the time being if you want to use this one.\n4. I don't get this problem with my forem-rdiscount gem.\n5. Please file an issue on the forem-kramdown project. Probably similar to 3.\n6. I don't know how to fix those styling problems.\n. I've fixed (4) in your list today. I will need to find more time to look at the others.\n. Patch looks good to me. I've merged it today.\n. Rather than re-opening this issue, can we please just open a new issue per single bug? This issue is INCREDIBLY VAGUE and it's about an INCREDIBLY COMPLEX part of Forem. \nOne issue per bug, thanks.\n. This issue is a duplicate of the one in #343. Let's keep the discussion going on there.\n. Did you only run the installer after starting the rails server? If so, you will need to restart the server.\nOn 27/12/2012, at 4:38, notontilt09 notifications@github.com wrote:\n\nVery new to rails, trying to install Forem engine. However, when I add the line\nmount Forem::Engine, :at => \"/\"\nI'm getting a:\nNameError\nuninitialized constant Forem\nI've run through the installation multiple times, so it should not have a problem recognizing \"Forem\", but it does.\nAny ideas? Likely a very basic solution, but I'm about 1 week into rails, and have 0 experience.\n\u2014\nReply to this email directly or view it on GitHub.\n. I'd prefer if we could stick with the traditional emoji font set, rather than having something that's completely different. How does GitHub get away with using the emoji that they use?\n. This is a great idea guys. Thanks for taking the initiative.\n\nOn 23 January 2013 06:57, Philip Arndt notifications@github.com wrote:\n\nNothing more restrictive than an MIT license please (aka no GPL)\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/pull/362#issuecomment-12562998.\n. Congratulations @Kagetsuki! :metal:\n. Not right now.\n\nYou can add a reply_to_id field to posts and then use something like awesome_nested_set to load the different threads.\n. I agree with this patch, but our tests do not. Could you please investigate and submit a fix for it? Maybe just add it as a development dependency instead. \n. +1 parndt. Separate out the changes into a different branch so we can pick-and-choose if we please. This PR is for removing forem-redcarpet only.\n. Do the opposite of the install script.\n. There is no rails g forem:uninstall. And rails destroy forem:install won't do everything correctly. For instance, it won't delete the tables in the database.\nTo elaborate:\nRead this first: https://github.com/radar/forem/blob/master/lib/generators/forem/install_generator.rb\n1. Remove all migrations from db/migrate that have \"forem\" in their names.\n2. Remove config/initializers/forem.rb\n3. Remove the mounting line from config/routes.rb\n4. Remove the line in your Gemfile.\n5. Delete the forem_* tables in your application's database.\n. Did you also run rake db:migrate?\nOn Monday, January 7, 2013, Adinda Praditya wrote:\n\nHi, I'm trying to upgrade from 515839ehttps://github.com/radar/forem/commit/515839e73bto HEAD (\n03725d7 https://github.com/radar/forem/commit/03725d7882). After\nrestarting the rails app, noticed there's a change in database structure,\nso I run rake forem:install:migrations and added some new migration\nfiles. The problem comes when I ran migration. I get this error:\nAn error has occurred, all later migrations canceled:\nundefined method name' for #<Forem::Forum:0x007fe0ca316520>\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@juntobox1.9.3/gems/activemodel-3.2.10/lib/active_model/attribute_methods.rb:407:inmethod_missing'\nDid I miss something? Thanks for the great work!\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/issues/366.\n. Can you run rake db:migrate --trace and show us the output please?\n. @sheam: That seems like a completely different error, like the decorators that add that method to the User class aren't being loaded. Could you please open a new issue with some steps to reproduce it within a new app?\n. @parndt That only fixes @sheam's \"tangent\" issue.\n\nThe migration issue is still aproblem I reckon.\n. @sheam How are you getting that error? Do you have an app we could use to reproduce it?\n. @funkdified We are actually keen to help out on this problem.\nThe issue is that if we can't reproduce it on our machines, then we can't verify that it's actually fixed. So if you can give us some easy steps to reproduce a problem accurately on our machines, we can identify the problem and then fix it.\nThank you.\n. Could you please show us your whole Gemfile?\nOn 18/01/2013, at 7:26, Jean-Fran\u00e7ois Dumas notifications@github.com wrote:\n\nAfter adding this line to my gemfile:\ngem 'forem', :git => \"git://github.com/radar/forem.git\"\nand running bundle install. I get the following bundle error:\nBundler could not find compatible versions for gem \"railties\":\nIn Gemfile:\nforem (>= 0) ruby depends on\nrailties (>= 3.2.11) ruby\nrails (= 3.1.10) ruby depends on\nrailties (3.1.10)\nI check the gemspec and couldn't see any railties dependency to Rails 3.2.x  Am I missing something?\n\u2014\nReply to this email directly or view it on GitHub.\n. The Rails version specified in it, and any gems that themselves may have\ndependencies on older versions of Rails.\n\nOn 18 January 2013 08:35, Jean-Fran\u00e7ois Dumas notifications@github.comwrote:\n\nI'm not comfortable to share the gemfile in plain sight.\nIs there something specific that you are searching for !?\nOn 2013-01-17, at 4:09 PM, Ryan Bigg wrote:\n\nCould you please show us your whole Gemfile?\nOn 18/01/2013, at 7:26, Jean-Fran\u00e7ois Dumas notifications@github.com\nwrote:\n\nAfter adding this line to my gemfile:\ngem 'forem', :git => \"git://github.com/radar/forem.git\"\nand running bundle install. I get the following bundle error:\nBundler could not find compatible versions for gem \"railties\":\nIn Gemfile:\nforem (>= 0) ruby depends on\nrailties (>= 3.2.11) ruby\nrails (= 3.1.10) ruby depends on\nrailties (3.1.10)\nI check the gemspec and couldn't see any railties dependency to Rails\n3.2.x Am I missing something?\n\u2014\nReply to this email directly or view it on GitHub.\n\u2014\nReply to this email directly or view it on GitHub.\n\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/issues/369#issuecomment-12392942.\n. Rails version needs to be bumped to 3.2.11 to be compatible with Forem.\n\nOn 18/01/2013, at 9:38, Jean-Fran\u00e7ois Dumas notifications@github.com wrote:\n\nRails version is 3.1.10 \nFor each dependency I'll have a look a bit later as I'm on something else right now. \nI'll get back to you. \nOn 2013-01-17, at 5:02 PM, Ryan Bigg wrote: \n\nThe Rails version specified in it, and any gems that themselves may have \ndependencies on older versions of Rails. \nOn 18 January 2013 08:35, Jean-Fran\u00e7ois Dumas notifications@github.comwrote: \n\nI'm not comfortable to share the gemfile in plain sight. \nIs there something specific that you are searching for !? \nOn 2013-01-17, at 4:09 PM, Ryan Bigg wrote: \n\nCould you please show us your whole Gemfile? \nOn 18/01/2013, at 7:26, Jean-Fran\u00e7ois Dumas notifications@github.com \nwrote: \n\nAfter adding this line to my gemfile: \ngem 'forem', :git => \"git://github.com/radar/forem.git\" \nand running bundle install. I get the following bundle error: \nBundler could not find compatible versions for gem \"railties\":\nIn Gemfile: \nforem (>= 0) ruby depends on\nrailties (>= 3.2.11) ruby \nrails (= 3.1.10) ruby depends on \nrailties (3.1.10) \nI check the gemspec and couldn't see any railties dependency to Rails \n3.2.x Am I missing something? \n\u2014 \nReply to this email directly or view it on GitHub. \n\u2014 \nReply to this email directly or view it on GitHub. \n\n\n\u2014 \nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/issues/369#issuecomment-12392942. \n\u2014 \nReply to this email directly or view it on GitHub. \n\n\u2014\nReply to this email directly or view it on GitHub.\n. I'm guessing it's one of our dependencies. I don't know which one. Doesn't hurt to be on the latest Rails.\n. Is this issue now solved @jhonovich?\n. I can't really offer anything more than @knewter has already offered. If you link an article to an automatically generated topic on the forum, it should Just Work(tm). Let us know if there's anything that could be improved around that.\n. Not an actual issue.\n. No, I can't foresee any issues with this patch.\n\n\nI think that we should go the way that Spree's solving this problem: defining a top-level Spree JavaScript variable and then defining routes underneath that. That way, we wouldn't need this ugly Journey hack in place.\n. I've got a branch called members-select2 which is implementing this. It currently doesn't allow you to actually add a member, which is problematic. To be looked at later.\n. @knewter: Yes, a top-level variable would be best. I don't think there's an open issue for fixing that other than #301.\n. @bodrovis Yes, it should definitely be mentioned in the docs. Please submit a patch to fix that.\n. I don't think there's a reason to leave it untranslated. Could you please submit a PR to fix it?\n. Thanks!\n. I've just forked the forem-textile_formatter project and merged that one PR it had open. As for the markdown one, we've already got forem-redcarpet which is our Markdown formatter. \nCould you please just point both projects to their respective counterparts now in their READMEs? Thanks!\n. Could you please show the error that you're seeing?\n. I wasn't able to reproduce this issue on my machine tonight. Sorry! Here's what I tried:\n1) Generated a new Rails app\n2) Added latest Devise and Kaminari to Gemfile\n3) Ran rails g devise:install, rails g devise user to set up a User model\n4) Added Forem to gemfile\n5) Ran rails g forem:install. Everything went to plan.\nAre you still able to do it with the latest Forem @widexposure?\n. I don't understand why you would override such a critical method to begin with. Seems like you really shot yourself in the foot on this one :\\\n. Patch looks great. Thank you :+1:!\nCould you look into why the specs are failing on PostgreSQL and MySQL please? If you fix these the I would be happy to merge in these changes.\n. I don't understand this problem at all :\\ Was it because it was using the /categories route and you had a similar route defined within your app too? If you don't want the routes to clash, then there's nothing we can do other than advise you not to mount at root.\n. I suspect you're including these lines into your application stylesheets, rather than stylesheets specifically for Forem.\n. We'll be providing a gem which provides some views and a default CSS template as part of the work on the gem release as discussed in #666\n. Please show us the layout file from your app, as well as application.js. I suspect jquery_ujs isn't being included.\n. Thank you @vikhyat :) Looking forward to seeing a patch from you for this.\n. I suspect this night be a ruby 2.0 bug. Have you tried on 1.9.3 as well?\nOn 03/03/2013, at 5:01, Ivan notifications@github.com wrote:\n\nHello, what I am doing wrong? Please help :)\n[root@OceanBreeze ProjectX]# rails g forem:install\nCopying over Forem migrations...\nrake aborted!\nDon't know how to build task 'forem:install:migrations'\n(See full trace by running task with --trace)\nWhat is your user class called? [User] [User]\nWhat is the current_user helper called in your app? [current_user] [users_heler]\nDefining forem_user method inside ApplicationController...\ninsert app/controllers/application_controller.rb\nSkipping config/initializers/forem.rb creation, as file already exists!\nRunning rake db:migrate\nCreating default forum and topic\n/usr/local/rvm/gems/ruby-2.0.0-p0/bundler/gems/forem-80f44dc62d77/lib/generators/forem/install_generator.rb:67:in seed_database': uninitialized constant Forem::Engine (NameError)\nfrom /usr/local/rvm/gems/ruby-2.0.0-p0/gems/thor-0.17.0/lib/thor/task.rb:27:inrun'\nfrom /usr/local/rvm/gems/ruby-2.0.0-p0/gems/thor-0.17.0/lib/thor/invocation.rb:120:in invoke_task'\nfrom /usr/local/rvm/gems/ruby-2.0.0-p0/gems/thor-0.17.0/lib/thor/invocation.rb:126:inblock in invoke_all'\nfrom /usr/local/rvm/gems/ruby-2.0.0-p0/gems/thor-0.17.0/lib/thor/invocation.rb:126:in each'\nfrom /usr/local/rvm/gems/ruby-2.0.0-p0/gems/thor-0.17.0/lib/thor/invocation.rb:126:inmap'\nfrom /usr/local/rvm/gems/ruby-2.0.0-p0/gems/thor-0.17.0/lib/thor/invocation.rb:126:in invoke_all'\nfrom /usr/local/rvm/gems/ruby-2.0.0-p0/gems/thor-0.17.0/lib/thor/group.rb:238:indispatch'\nfrom /usr/local/rvm/gems/ruby-2.0.0-p0/gems/thor-0.17.0/lib/thor/base.rb:434:in start'\nfrom /usr/local/rvm/gems/ruby-2.0.0-p0/gems/railties-3.2.12/lib/rails/generators.rb:171:ininvoke'\nfrom /usr/local/rvm/gems/ruby-2.0.0-p0/gems/railties-3.2.12/lib/rails/commands/generate.rb:12:in '\nfrom /usr/local/rvm/gems/ruby-2.0.0-p0/gems/railties-3.2.12/lib/rails/commands.rb:29:in'\nfrom script/rails:6:in require'\nfrom script/rails:6:in'\n\u2014\nReply to this email directly or view it on GitHub.\n. Howdy @oceanbreeze. I wasn't able to reproduce this issue on my computer tonight.\n\nDo you have a list of steps you could use to reproduce it?\n. This is because you've not defined the to_s method in your User model. Please do this, like so:\nruby\ndef to_s\n  name\nend\n. Yay. High fives all round.\n. Hey Joe.\nI think this full error should be this:\n\"Forem could not determine the sign in path for your application. Please do one of these things:\n1) Define sign_in_path in the config/routes.rb of your application like this:\nor; 2) Set Forem.sign_in_path to a String value that represents the location of your sign in form, such as '/users/sign_in'.\"\nWhat this means is that Forem is expecting a sign_in_path method to be available or Forem.sign_in_path to be \nset in config/initializers/forem.rb. You can do either of these to tell Forem where to find the sign in route. Forem needs this to redirect people who aren't authenticated, so that they can sign in and then be able to create the topic. \nYou've called yours signin_path. So you could rename this, or set Forem.sign_in_path = :signin_path in that initializer if you absolutely need it to be signin_path.\nThanks for using Forem :)\n. Glad to see you got it sovled Joe :)\n. @kumardev \"It throws error\" is a pretty terrible description of your problem. Please put effort into explaining your problems and we will put as much effort into helping you out. Thanks.\n. @mhauserr Do you have an application I can look at which reproduces this issue please?\n. Hi @mhauserr, sorry for the delay in replying. I have had a busy couple of weeks. I think what you could do to solve this problem is to get rid of Forem.sign_in_path from config/initializers/forem.rb and define the sign in route in config/routes.rb like this:\nruby\nget '/signin',  to: 'sessions#new', :as => :new_user_session\nThat way, Forem would automatically know about that route -- since it's opinionated enough to guess that you may be using Devise, and so tries that route first -- and I think that should solve your problem. I just tried doing this very quickly on my machine and it seems to have worked for me.\nPlease let me know if you encounter any more problems. I should be able to reply a lot quicker now that things are starting to calm down in the run up to Christmas.\n. Great to hear @mhauserr :)\n. Sorry, we do not currently support JRuby.\n. There isn't a file upload feature built into Forem to do that.\nWhat you would typically do is upload the image to some other site and then link from there.\nIf you would like file upload functionality built into Forem, please write a pull request for this.\nThanks!\n. Yes. Both the textile and markdown formatters support images.\n. I am in favour of this change and will look into it when I am more awake and alert.\nOn 26/03/2013, at 7:12, Cyril LEPAGNOT notifications@github.com wrote:\n\nI think it's free for open source projets.\nOnly github repo owner can init the project on localeapp.\n\u2014\nReply to this email directly or view it on GitHub.\n. I've added Forem to LocaleApp now:\n\nhttp://www.localeapp.com/projects/4021\nI just arrived on the train in town on peak hour, so the internet\nconnection's a bit too shit to upload yaml files. Will try again tomorrow\nmorning.\n. I've added all the existing translations via the import feature.\nCould you now please do the PR @cyrill62?\n. I've updated the English locales with the correct translations.\n. Sure can. Just set their forem_state attribute to spam. They'll be able to view the topics and posts, but will not be able to create new topics or posts.\n. Displaying more prominent categories up front. For instance, railsforum.com has 'News and Rules' first: http://railsforum.com/\n. Please use Rails 3.2.13, as that is the most secure version of rails released.\n. 1-0-stable lags significantly behind master. Please use master branch and a proper version of Rails.\n. It was originally going to be a stable branch while we dev'd on master, but since master IS stable, we should delete it.\n. Controller names have nothing to do at all with the titles which are displayed on the page.\n. Could you please show the code that you tried within config/routes.rb please? I need to know the whole context, so just showing the whole file would be a good idea.\n. See also: http://stackoverflow.com/questions/5997527/overriding-named-routes-provided-by-rails-3-engines/14967741#14967741\n. You can change the mount point of forem within config/routes.rb\n. @ascendbruce I'm fine with having the dependency on localeapp, just as long as we document somewhere that people need to generate an API key locally before they can run Forem.\nReckon you could update this patch to include that?\n. On second thought, maybe not a good idea. Just read up some more on their documentation. Maybe we should have it set polling_environments and sending_environments to [] by default, and only have it set if an env variable like TRANSLATING is set.\n. I don't know either. Maybe because it doesn't apply cleanly any more.\nHey @ascendbruce: could you please tidy up this PR so that it applies cleanly?\n. That's alright. We are patient :)\n. @ascendbruce Any updates on this?\n. @ascendbruce No worries. Just let me know when you're done :)\n. Thanks for your work on this Hiro :)\n. In what situation is that partial rendering when the page number is not correct? Not sure I understand how that could happen.\nCould you please provide some exact steps to reproduce this problem?\nOn Sat, Apr 13, 2013 at 2:11 PM, Abram Bailey notifications@github.com\nwrote:\n\nHi, \nJust having an issue with _post.html.erb\nruby\n <% if post.reply_to %>\n      <span class='in_reply_to'>\n        <%= link_to \"#{t(\"forem.post.in_reply_to\")} #{post.reply_to.user}\", \"#post-#{post.reply_to.id}\" %>\n      </span>\n    <% end %>\nUnfortunately this appends something like \"#post-29\" to the end of the current address.. so you may end up with something like \"some-topic?page=2#post-29\" when in fact post 29 is on page 1. Obviously the link is broken all together if you're on the wrong page. \nIs anyone else having this issue or have I broken something in my views. \nThanks\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/408\n. Oh it's the reply to link! Right then. I think that you've stumbled across a legit bug in Forem. Could you please submit a PR to fix this?\n\nOn Sat, Apr 13, 2013 at 3:14 PM, Abram Bailey notifications@github.com\nwrote:\n\nIn the meantime I have modified a few things to make it work:\nruby\nForem::TopicsController.class_eval do\n  def post_count(topic)\n    a=topic.posts.flatten.collect{|p| p.id}.each_with_index.to_a\n    a=a.map{|a| {:id=>a[0], :position=>a[1]+1}}\n    return a\n  end\nend\nThe in topics/show.html.erb:\nruby\n<% @post_count = Forem::TopicsController.new.post_count(@topic) %>\nThen in posts/_post.html.erb:\nruby\n    <% if post.reply_to %>\n      <% position = @post_count.select{|p| p[:id].equal? post.reply_to.id}.first[:position] %>\n      <% page = Integer(Float(position-1)/Float(Forem.per_page)+1) %>\n      <%= link_to \"in reply to #{post.reply_to.user}\", \"?page=#{page}#post-#{post.reply_to.id}\" %>\n    <% end %>\nI'm sure there's a better way, but that was my solution.\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/408#issuecomment-16327814\n. Not sure how I feel about all these calculations going on. I would rather the calculation be done once, i.e. when the post is saved, rather than every time the post is viewed. After all, it's unlikely that the post's page number is going to change. Agree?\n. Agreed on the points @parndt and @knewter make.\n\n@funkdified: Could you please move the calculation code into a helper and add some specs around it too? That'd be great.\n. This issue is missing basic debugging information: https://github.com/radar/forem/blob/master/CONTRIBUTING.md#filing-an-issue. Please provide the points we ask for.\n. Hey mate, thanks for these. The first line in that file should be the locale symbol, probably \"vi\" rather than \"en\"\nOn Wed, Apr 24, 2013 at 11:38 PM, Trung L\u00ea notifications@github.com\nwrote:\n\nYou can merge this Pull Request by running:\n  git pull https://github.com/joneslee85/forem i-love-vietnam\nOr you can view, comment on it, or merge it online at:\n  https://github.com/radar/forem/pull/411\n-- Commit Summary --\n- Add Vietnames translation\n  -- File Changes --\n  A config/locales/vi.yml (199)\n  -- Patch Links --\n  https://github.com/radar/forem/pull/411.patch\n  https://github.com/radar/forem/pull/411.diff\n. Thanks Trung!\n. No need for another pull request. Please just revert to using hashrocket syntax and force-push a fixed commit to your branch. That will update this pull request.\n. @nazrulcse Please provide your Gemfile so that we can attempt to reproduce this problem locally.\n. Any particular hotspots that you have in mind?\n. Enabling this is as easy as setting the settings to whatever values you want in a new initializer?\n. LGTM.\n. @namiheike No, not yet. But:\nThere are plans to support it - want to help?\n. @namiheike Sure! The best thing to do would be to create a new branch, upgrade the rails version to Rails 4, run the tests and fix what breaks.\n. @achru Are you still having these difficulties?\n. Looking into this now. Will create a rails4 branch when I'm done :)\n. There is now a rails4 branch for Forem. Please try this out.\n. Can you please include your Gemfile? That issue should not be happening in Rails 4.\n. Good to hear, @achru. Thank you for replying.\n. What is this supposed to fix?\n. Seems fine to me\n. A++ would merge again.\n. Other than completely redefining the routes for forem, by doing something like this:\n\nForem::Engine.routes.draw do\n\u00a0 resources :foro, controller: \"forums\" ...\nend\nNo, there isn't a way to do it right now. I wonder if we could at all use i18n to do this. It's a pretty commonly requested feature. I think i18n is loaded before routes, so it should be possible.\nOn Tue, May 21, 2013 at 12:03 PM, Geoff Tidey notifications@github.com\nwrote:\n\nWould like to have the ability to redefine the URLs so that they are specific to the language of the site.\ne..g/  We have a Spanish site.\nRather than \n/forums/coche/topics/recomendados\nwe would like\n/foro/coche/mensaje/recomendados\nIs this possible already?  If not, what would be the best approach to update the code?\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/426\n. Happy to accept a PR which does this in a neat fashion. \n. Soft deletion also gets my vote.\n\nOn Tue, May 21, 2013 at 5:05 PM, Andy notifications@github.com wrote:\n\nLooking through the documentation I can't seem to find anything about how to handle deleted users. Currently, forem throws an exception when trying to display the link and avatar for a user that no longer exists.\nHow are other users handling this? Is it best practice to delete all associated posts/topics. It seems as though removing entire topics created by deleted users is unnecessary but the fact that the Forem engine seems to think that should be the default is making us wonder.\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/427\n. I wouldn't mind that, either. The issue is to get it to upload it somewhere and include the correct syntax for displaying the image. That last part could be solved by removing formatter support from Forem and only supporting Markdown.\n. Happy to accept a PR which adds this feature.\n. There are currently no email notifications for this. I agree that it would be a good idea to email admins regarding these events.\n. Thank you @rrouse!\n. I've snuck in another change here which was required to fix some of the tests for the nil user.\n\nIt updates Forem to use Workflow 1.0.0 and switches some update_attribute calls to update_column calls so that the callbacks aren't triggered all the damn time. Workflow also provides the ability to define event methods which allows us to avoid using typical ActiveRecord callbacks for our state machine events.\n. Added to master and rails4. If anyone has any ideas on how to make the view less complicated, patches are welcome :)\n. Could you please provide exact steps to reproduce this problem including your Gemfile + Gemfile.lock? Thanks!\nOn Sat, Jun 1, 2013 at 5:23 AM, nikue notifications@github.com wrote:\n\nI'm using Devise and I've got Forem in an iframe. The forum views seem to be able to access session information, but controllers can't, so anytime forem_user is accessed from a controller (e.g. destroy action), I get thrown out to the sign out page. Is there a devise helper I should be including in Forem's application controller?\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/432\n. Closing as this appears to no longer be an issue.\n. I've merged this code into the moderation-queue branch. There's still work to be done, so I will open a new PR with a checklist of what needs doing and then we can go from there.\n. New PR is #434. Thank you for all your work on this @createthis!\n. Looking good!\n. I'd rather people be explicit about where routes they're calling are defined.\n. I agree that highlighting it is a good idea. I've added it to the installation instructions in the README now, and hopefully people won't miss it there.\n. Hey @ac360, I take it this is the same issue as you stated on #320?\n. Yes please give me access and I will try to fix it. My email is radarlistener@gmail.com\n. @MisterOptimist I am unable to access that application on Heroku. I don't see it in my list of applications when I am signed in to Heroku, and I am unable to push to that Git repo. Could you please double check that I have permission to access that?\n\nThank you.\n. I have removed that bullshit hackery to do with the member autocomplete and have improved UI in the admin backend very slightly. You should no longer have to set initialize_on_precompile to false. Please remove that setting from config/environments/production.rb and let me know how a deploy without it goes.\nThanks!\n. @MisterOptimist All good :) The code I have deployed is available at https://github.com/radar/forem.heroku.com for future reference.\n. This sounds like a good usecase for the Deface gem.\nIn order to do this you would need to replace the .user element in app/views/forem/posts/_post.html.erb (virtual path for Deface purposes == \"forem/posts/_post\") with one that displays the badge for a user. I'd recommend reading the Deface docs to work out how to do that. If you can't understand it from the docs, then I can probably help further.\nYou can do the same thing with the .byline started-by element in app/views/forem/topics/_topic.html.erb for the topics view.\n. Closing due to age.\n. No.\nJust no.\nI don't want to be tasked with maintaining more than one way to do things. Markdown is the one true way.\nOn Fri, Jul 19, 2013 at 6:44 PM, daniely notifications@github.com wrote:\n\nI'm thinking Forem shouldn't limit the users to markdown. Some users might want forums to support bbcode for example or even straight html shudder. Thoughts?\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/443#issuecomment-21238252\n. Yes. A user should only be able to reply to a topic if they have read permission on the forum. Please do submit a PR for that today.\n. Thank you @daniely. I really appreciate you taking the time to make this contribution.\n\nI've made a small modification to your patch to use controller.current_user.stub rather than any_instance and that seems to work.\n. @jugyo Thank you for pointing this out. Could you please submit a patch to fix this problem? That would be awesome.\n. Forums are the container that contain topics, not categories. Deleting categories should not delete topics.\n. Forums can be reassigned to categories, so no they won't be deleted when a category is deleted.\n. Thank you.\n. Please be more specific when posting issues.\n. @mauriciopasquier That's one way to do it. I am in favour of using forem_name and forem_email when we want to reference a user's name or email address. Can you please submit a patch that switches Forem to do that?\n. @mauriciopasquier Any updates?\n. No particular hurry. I was just going through the issues the other day and saw that this one was still open. I'll check back in 2 weeks unless you ping this thread before then.\n. :cry: RIP `.\n. Hi @Rishi91991. Can you please put this application on GitHub so that I can investigate this problem?\nThank you.\n. @link-er As I asked @Rishi91991 to do, can you please put an example application on GitHub so I can take a look at it? Thanks.\n. I think all the problem here is that you're not including Forem's assets in your application.js file:\njs\n//= require forem\n. @daniely I would tackle that test using a controller spec, not a request spec. You can fake a POST request to a controller that way.\n. Goodo. Thanks for your work on this.\nOn Mon, Aug 26, 2013 at 10:16 AM, daniely notifications@github.com\nwrote:\n\n@radar yep, due to the routing problem i was having i ended up converting it back to a controller spec. the build was fixed by not using the warden sign_in helper in controllers.\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/456#issuecomment-23238557\n. I agree. Moving to localeapp was ridiculous (I feel the same way about Spree doing it, too). We should remove this feature from Forem and just go back to managing the locale files ourselves.\n. Other than forking Forem, I don't think there is a way to do this. This is pretty commonly requested. Maybe we could use I18n for this? Could you please investigate a patch to allow us to do this?\n. Hi @tomkrus,\n\nthe :as option changes the name of the routing helper, i.e. category_path would be kategorien_path now. I think that's not what you want.\nWhat you want instead is the path option:\nruby\nresources :categories, :path => \"/kategorien\"\n. There are no email settings for this yet. It would be a good feature to have in place I think.\n. I think the guide might be incorrect. The correct line is this:\n*= require \"forem-bootstrap\"\n. You will need to be signed in as an admin user or a moderator of the group and then approve these posts. Posts by users are by default hidden from other users. If you want this setting disabled, then you should change the moderate_first_post setting to false:\nForem.moderate_first_post = false\n. Busy having weekends and holidays, yes. We will look at this when we have time. Thanks for submitting this PR.\nOn Sat, Aug 24, 2013 at 5:17 PM, daniely notifications@github.com wrote:\n\nguess you guys are busy. alrighty\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/pull/464#issuecomment-23204420\n. Why are we even supporting JRuby?\n. Thank you!\n. I agree!\n. Added to rails4 and master. Sorry for the delay, @bodrovis.\n. The friendly_id bug should be fixed in all branches. Please let me know if it's not fixed in either master or rails4.\n\nAs for the forem_moderate_posts? issue that @bobbdelsol reported, it is not related to this issue.\n. Looks good to me. Thank you :)\n. Hi @tigercat.\nPlease remember to format code with triple backticks. This makes it easier for me to see what's code and what's text. I've edited your original post here and you can see what I mean by clicking \"Edit\" again.\n. Yes, the moderation view was supposed to contain topics. This has obviously been overlooked. Would you please be able to submit a patch that adds a list of topics to this view please?\n. @tigercat any updates on this?\n. Fixed by #545.\n. Added to master and rails4. Thank you.\n. Removed localeapp from master and rails4 branches. @marionzumbado: Please run bundle update forem and try again. Sorry for the difficulties.\n. I'd recommend trying main_app.my_account_path. This may be breaking because the template is being rendered within the context of the engine, and the engine does not have a my_account_path. Use main_app when you want to reference routes from the application and forem when you want to reference routes from Forem.\n. Woot! Glad I could help :)\n. Have you set up ActionMailer::Base settings yet?\n. Hi @amaximia, thanks for pointing this out. I've fixed this up in some new commits to the rails4 branch this morning. Please run bundle update forem and try again.\n. Looks fine to me!\n. Thanks! Added to rails4 and master.\n. @yanismydj Please include the information asked for in the Contrib Guide.\n. @yanismydj Glad that you were able to fix this :)\n. Thanks!\n. This patch has already been made to the rails4 branch.\n. Maybe we should look at making the default something like /<mountpoint>/:forum_id/topics/:topic_id? WDYT, @parndt and @knewter?\n. @parndt Do you think we should change the default routes to accommodate this?\n. If you don't like then mount it at '/forums' or whatever instead. I think having Forem draw the routes at the root is the best of both worlds.\n. @Aselox If there were any updates, you can be sure that they would be posted here. Please keep in mind that we all have day jobs and lives outside of Forem and that we only work on Forem in our spare time. This means that sometimes we take a long time to get around to doing things.\nWe appreciate your patience from this moment forward.\n. @Aselox This is now fixed in master and rails4. Thank you for your patience.\n. Sounds like you didn't run this command:\nbundle exec rake forem:dummy_app\n. Thanks!\n. Hi @philiprhoades,\nYou probably need to reference it like main_app.edit_user_regsitration_path. If the view/partial/template/whatever is being rendered within the context of the engine, then the engine isn't going to know about the application's routes (and vice versa). You need to be explicit about where that route can be found.\n. Hi @philiprhoades,\nCould you please show me the complete output from rails g forem:install? I don't see the prompts in the message you posted and I'm interested to see what values you put in for that.\nThanks!\n. Interesting... Do you have this application on GitHub somewhere that I can access it?\n. I don't understand what's causing this undefined method forem_moderate_posts?...\nDoes somebody have a Gemfile for an app that I can use to reproduce this issue?\n. Thanks @joelhooks!\n. This is not necessary because in Rails 4 land we are using strong_parameters instead. Please remove the protected-attributes gem from your Gemfile, which is causing this problem.\n. Thanks!\n. Hi @bodrovis, can you please remove the russian translation changes from this PR?\n. Can you please show me the Gemfile that you're using? According to the error message, you don't have the sqlite3 adapter installed. This is peculiar.\n. I don't know how this could be happening :( I would need a way to reproduce this exactly on my computer if I was going to debug it.\n. I don't think #507 fixes this. Please provide me with an exact way I can reproduce it. Does it only happen on Windows computers? I guess I could try running the stuff there.\n. That's better. Thanks @bodrovis.\n. Patch looks good to me. Thanks @bodrovis.\n. I would really like to see some tests for this too.\n. Thanks @mauriciopasquier. I've added this to master + rails4.\n. Patch looks good to me.\n. Thanks @zzak!\n. Test looks good to me @bodrovis. Thank you :) Added to master and rails4.\n. I am sure the commits are merged.\n. Thank you @moh-alsheikh. I've added this to master + rails4 now.\n. Can you please show us the full stacktrace for this issue?\nOn Sat, Dec 7, 2013 at 8:50 PM, Harry notifications@github.com wrote:\n\nI've been setting up my Forem installation with devise, I first had the forem_user error, then I got some error with forem_group_ids. But when I went to report that error; this one came up instead.\nShowing /var/www/athena/app/views/forem/categories/_category.html.erb where line #1 raised:\nundefined methodnew' for nil:NilClass`\nI have tried this with Rails server and normal Apache, both throw the error.\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/510\n. Your stacktrace is pointing directly here\n\nI would guess by your error that you do not have Forem.user_class set in config/initializers/forem.rb. Please set it.\n. @bodrovis I don't understand what problem is happening here. Please explain this better :\\\n. @bodrovis No, the sanitization should not be happening twice. Could you please submit a patch to forem-gfm_formatter for that, and a patch to wherever it is that we're recommending to use @Miniand's gfm_formatter, since clearly that is no longer being maintained.\nThank you.\n. @bodrovis Please provide steps to reproduce this issue.\n. forem-redcarpet is the least worse formatter out there. I would rather we did not stop using it.\n. This has been added to rails4.\n. @avitus @reply_to_post is nil? That would only happen if reply_to_id was passed in and that ID wasn't a post for that topic... still, it shouldn't 500 in that case.\nCan you please:\n1. Show us some steps to reproduce this issue and,\n2. Submit a patch to fix it?\nThanks!\n. Fixed #518.\n. Hi @bobbdelsol,\nThat sounds like a cool idea. Forem does not support that by default, and so you would need to probably fork this gem and add it in yourself.\n. Thanks @mauriciopasquier! I've added this to master + rails4.\n. @alexcwatt Thanks! The patch looks good to me. \nI've been on holidays for a couple of weeks and have been playing email catch up end of last and this week, which is why I hadn't replied to it yet. Back now though!\n. Added to rails4 and master. Thanks @alexcwatt.\n. Please submit a patch to add this to forem if you would like this feature.\nOn Sun, Dec 29, 2013 at 10:41 AM, Eric Coulthard notifications@github.com\nwrote:\n\nIt would be nice to be able to subscribe to receive notifications for new topics in a forum.\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/519\n. @ecoulthard Any updates on this yet?\n. @ecoulthard That's alright. Hopefully Future-You or someone else can take up the reins on this one.\n. @lyneux I would love a PR to add this in. If you're not (as) busy any more, I would love it if you would do that.\n. I will add this to the possible feature list for the gem release (discussed in #666)\n. @pickhardt If you override the translation within your application's translations files, I believe it would use that:\n\nyml\nen:\n  forem:\n    post:\n      edit: \"Edit\"\n. Thanks @alexcwatt! I can confirm this breakage and that the PR fixes it. Excellent work.\n. Thank you very much @KL-7! I've added this to master and rails4 now.\n. @torasakura Please submit a patch to fix this. unsubscribe should work with either a POST or a GET.\n. Thanks @ascendbruce. I've added this to master and rails4 now.\n. These particular tests aren't failing for me on either master or rails4, so I suspect they've been fixed recently. I'm seeing 3 other failures on master, which I will attend to later on.\n. This is most likely happening because you're calling the routing helper like set_user_language_path and not main_app.set_user_language_path. The view is being rendered in the context of the Forem engine, and since the Forem engine's routes do not define the helper that you want, it's giving you this error.\nFor more information please read the engines guide: http://guides.rubyonrails.org/engines.html\n. Hey @mauriciopasquier, sorry that I've not reviewed this sooner. I tried applying this to master today and ran into a couple of conflicts. Could you please review these and amend the PR?\n. @mauriciopasquier My bad. I had deprecated that method over the weekend (in favour for what is now mentioned on the \"Theming\" wiki page). I hadn't removed it from my forem-theme-base repo yet, but I have done that now.\nPlease try again.\n. Thanks @mauriciopasquier, the code looks good to me. I've added this to master and rails4.\n. @mauriciopasquier I think having a default set of views is worthwhile. Overriding of those views can be done within the application, and so it's no particular big deal.\nI don't have the time at the moment to go through all of Forem and correct the Bootstrap stylings. Does anyone else want to take this on?\n. Ah, my bad. It is super early in the morning and I have not remembered that I should read everything within a thread before posting :)\nThanks for beginning the work @yanismydj. Could you open a PR for this anyway? We can have a branch for these changes based off the PR and then I can make some commits to that branch. Anyone else who wants to submit fixes for it would then be able to submit PRs for that new branch.\nMake sense?\n. @yanismydj I've got some fixes up on rails4 and master now. Can you please check these and let me know if they look OK?\nA screenshot of any other problems would be great, thanks :)\n. No worries :)\n. @yanismydj I couldn't merge this PR today so I added some fixes on master and rails-4 myself. Why are you mixing and matching sm and lg and md styles? I thought these styles were for different screen sizes, and so it doesn't make sense to me to be using all of sm md and lg at the same time.\n. Hi @Domenoth. Does order(:name) do this correctly? Can you please submit a patch for this?\n. Hi @cseydel, sorry to hear you're having problems.\nDo you have an application that I can use to try and reproduce this problem?\n. I've added @bodrovis's fix to master and rails4. Please upgrade to the latest on either of those branches and let us know if it fixes the problem.\nThanks for reporting the bug in the first place :)\n. This is due to changes in Bootstrap 3. Please see #527.\n. Thank you @Domenoth! I've added this to the rails4 branch today.\n. My bad, I tagged the wrong issue in a commit.\n. @yas375 I am extremely disappointed that nobody has been left in charge of the cancan project. It seems that pundit is winning favour in the community and therefore we should switch to that.\nCan you please cook up a PR that accomplishes this?\n. Pundit has the backing of @jnicklas (and elabs), and I like what they've done with Capybara. Please do work on switching to Pundit.\n. @yas375 How goes the work on Pundit?\n. @yas375 That's ok, I was just checking. If you can do it this weekend then that would be fantastic.\n. If there was news it would probably be posted here.\nIf you would like Forem to use Pundit instead of CanCan then I would be happy to review a PR from you.\nThanks!\nOn Tue, Jun 17, 2014 at 12:21 PM, Alex notifications@github.com wrote:\n\nAny news on this issue? I would love to see Forem use Pundit instead of Cancan, too.\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/533#issuecomment-46260740\n. Closing due to age. I like pundit better than cancan, but since Forem is using CanCanCan with no obvious detriment, it's going to stay that way until someone does something about it.\n. I am not sure why we should include in the README what should be common knowledge when working with engines? Especially when it's mentioned in the engines guide that @bodrovis already linked to.\n. @HollowerMan Do you have a description of the bug that you were seeing? Having a regression test that would demonstrate this bug would be really great.\n. @HollowerMan I think this was already tested within spec/features/forums_spec.rb, and I've seen that test failing. I pulled in your PR and it has seemingly fixed that test, so thanks. This patch looks great :)\n. Excellent, thanks @bricker :)\n. Typically a Rake task that reads from your old database, translates the data into a new form, and inserts it into the new database is the right way to go about this. \n\nIt's not something in particular that we can \"fix\" on Forem so I'm going to go ahead and close this now.\n. @hardywu If it's fixed within Rails, wouldn't the logical \"work around\" for this problem be to use a more modern version of Rails which contains the fix?\n. @hardywu There's no magical silver bullet that would fix this problem without you having to put in some hard work. Forking is your only option.\n. Thanks @bodrovis :) Added this to master and rails4.\n. Yes, it is because you're using protected_attributes. Please remove this gem.\n. Hi @yanismydj, I believe you can support this by telling Forem to use your own custom formatter within config/initializers/forem.rb:\nruby\nForem.formatter = YourCustomFormatter\nThis class will need to implement the methods used within Forem::FormattingHelper.\n. @bodrovis Please try the latest updates to the rails3 branch.\n. @bodrovis I've updated the rails3 branch to bring it in line with the (now-defunct) master branch. Could you please try that out and let me know if it has the same problem?\n. > Should the admin see all the unapproved posts and topics?\nYes the admin should see all of them.\n. Added to rails3 and rails4. Thanks!\n. Added to rails4 and rails3.\n. @mbhnyc We've not tested Forem against Rails 4.1 yet. Here Be Dragons.\n. @mbhnyc https://github.com/radar/forem/blob/rails4/CONTRIBUTING.md please :)\n. Not really waiting on anything to do a proper gem release. It's just easier having people use the latest from GitHub. For now, anyway.\nFor posterity's sake we should probably just update that gem.\nOn Thu, Mar 20, 2014 at 4:46 PM, mbhnyc notifications@github.com wrote:\n\nEeeyup didn't follow instructions.  Didn't know the github reference in the Gemfile was actually required.  Are you waiting for a final release to update the version on rubygems.org?\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/547#issuecomment-38137088\n. @sabrams86 This all depends on the context which is rendering the request. If Forem is rendering the request but the routes are for the main application, then the routes referenced in the controllers & views of that request will need to be written like main_app.home_path. If it's being rendered within the context of your application but the routes point to forem, then they'll need to be forem.root_path and the like.\n\nFor more information, please read the Engines guide.\n. That is not an error message, it is only a warning and can be safely ignored.\n. @sabrams86 Please use Rails 3.2.17. There have been four rails releases since 3.2.13 and you really have no excuse to not be using the latest.\n. That could be a deployment error on your server. Since we can't see the error nor what is causing it, I would suggest you hire someone who can help you debug it.\n. The assets will remain in app/assets as much as possible because that way it's easier to roll out updates to those assets. All the assets in an application's vendor/assets should be responsible for is requiring those files and any extra things people want for their forem install.\nRequires for the Forem assets do not belong in the application assets because they may conflict with styles for the application. For instance, someone may want their application and forem to be styled slightly different. Conflicting styles are no fun at all to debug, thus this decision.\n. I have no idea what causes that. A quick google turns up this, which may contain a possible solution: http://stackoverflow.com/questions/22276991/heroku-error-encountered-while-saving-cache \n. I don't understand how that's possible, given that they both use Forem.layout. Can you please provide us with an application that reproduces this issue, @dsdewhir?\n. If there was any progress I would write about it here...\nAs it has been, I have been busy on Spree, preparing for my wedding in  a month, sleeping and many other things.\nPatience is appreciated.\nOn Wed, Apr 23, 2014 at 11:43 PM, bodrovis notifications@github.com\nwrote:\n\nAny luck with this?\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/552#issuecomment-41161913\n. @bodrovis Is it possible to still deploy that app to Heroku and see the breakage?\n. @djones Thanks. Isn't that what OP says? Can you still navigate to /admin and have it use the application layout correctly?\n. Thanks @alfss :)\n. Hey @alexcwatt,\n\nI think having either a show action that shows the post (maybe even within the context of the topic) and provides the moderator the ability to approve the post or mark it as spam is a good idea. \nCould you please submit a PR which implements this feature?\n. Looks like this was solved with #576.\n. Thanks @Apercu!\n. Hi @fabiode,\nYou're right that there's no way to do this. If you would like this feature in Forem, the best way to get it there would be to write the code yourself. The code for Forem is very simple and clean and I reckon you'll be able to work it out fairly easy.\nThanks!\n. @GGuidice I fail to see at all how this relates to Forem. Did you mean to file this on another project?\n. @bodrovis: is this still an issue?\n. Which part of #596? It is quite a large PR and I'm considering closing it and asking it to be split out into multiple PRs. Is it the emoji config inside Forem::Engine which needs doing for this?\n. @alexcwatt Rebase on the rails4 branch of forem: git rebase rails4. Then force-push your branch to GitHub.\n. @alexcwatt: Make sure that you're up-to-date with the latest rails4 branch, then git rebase and force push again. I am not sure what is causing these other commits to appear.\n. It has one subscription notification. The main reason it doesn't have this feature is because:\n1. I have a full-time job and in what little spare time I have I'm writing a book and spending my time on many, many other things. Thus a complete lack of any time to devote to Forem.\n2. I'm running this project as a little experiment and trying to encourage people to contribute back to it vs. doing all the work myself. \nIf you would like email notifications to be a \"thing\" within Forem, please submit a patch to add them in.\n. @ncri: If you're going to set all posts to approve like that, why not run it once in a console command and have Forem.moderate_first_post set to false so that new topics/posts are not marked as needing review?\n. Yes it will turn off the need for approving posts. It doesn't alter the email notifications. \nWhat would be the point of setting all posts to open when Forem.moderate_first_post is false more than once? There'd be no posts after that fact to be set to open.\n. This is the \"it\":\nForem.Post.update_all('state', 'approved')\nForem.Topic.update_all('state', 'approved')\nAll posts and all topics will move from 'pending_review' to 'approved'.\n. How can I reproduce this issue on my machine?\n. Thanks @bodrovis! I think it would be good to have a link to this on the wiki page here: https://github.com/radar/forem/wiki/Installing---Upgrading\n. No, sorry. Forem does not allow you to use more than one User class. If you would like this feature, please build a PR that adds it.\nThanks.\n. @vcavallo First thought is that jquery_ujs isn't loaded, which is typically what makes those delete links work. Are you able to reproduce this issue in a new app with that Gemfile?\n. Can someone please provide me with exact details on how to reproduce this for a brand new Forem app?\n. Hi @RostDetal and @bodrovis, I'm still waiting for some exact steps to reproduce this in a new app. Please provide these.\n. Thanks @jgadbois!\n. Hi @defaye, looks like that is there by accident. Thanks for noticing it. I've fixed this up on the rails4 branch now.\n. Thanks @alexcwatt. Looks good to me :)\n. Yes, just use db/seeds.rb to create what you need, just like in a normal Rails app.\nruby\nForem::Category.create(:name => \"Blah\")\n. Hi @bennettl, you can do this by disabling the moderate_first_post feature:\n(in config/initializers/forem.rb):\nForem.moderate_first_post = false\n. This will only affect posts that appear after this change. If you want to move all posts to the proper state:\nForem::Post.update_all('state', 'approved')\n. @bennettl Yes.\n. Thank you @tomhanlon \n. Thanks @tomhanlon. I've bumped this version in rails4 now.\n. Yes and no.\nThe models are currently backed by AR.\n. Hey @johndavid400, I remember you from SpreeConf :)\nI agree. Forem should definitely have its own classes and not rely on Bootstrap. I think that this is definitely the way forward. I do not have any spare time right now to fix this within Forem, but I do have enough time to review a PR. If you want to go ahead and patch this up, that'd be great.\nThe reason I did that in the first place is mainly due to laziness (I don't know enough about CSS, clearly) and therefore I wanted to be \"opinionated\" about what CSS framework that was chosen. Therefore I stuck Bootstrap everywhere with the idea that people could just customize the Bootstrap theme. Obviously this isn't going to work if someone wants to use something else.\nThanks!\n. the community will address this as part of the work on the new gem release (discussion in #666)\n. Thanks @alexcwatt!\n. @alexcwatt Please provide steps to reproduce a bug that you were seeing.\n. Thanks @alexcwatt. Would you be able to write a regression spec for this as well? I think it should be easy enough to do.\n. @coalwater Which missing folders are you talking about?\nTravis runs:\nbundle install\nbundle exec rake forem:dummy_app --trace\nbundle exec rspec spec\nAnd it seems to be able to run the tests OK. What problems are you having?\n. Thanks @alexcwatt, I have verified today that this is an issue. I'll merge your PR now.\n. Why can't you change Rails versions?\n. Your boss is wrong.\nOlder versions of Rails may have security bugs and so by staying on those old versions you're leaving yourself vulnerable.\nUpgrade.\n. Hi @joomalungma, what is the exact error message? You've shown the error header and the stacktrace (which is great btw :D), but I don't know what the error message is. If I knew that, then I would know why adding topics_helper to the admin directory would help.\nPlease let me know that.\n. Thanks @joomalungma. Could you please create a PR that applies this change that you mention, and also has a regression test for it? That would be great.\n. Hi @MacFarlaneBro, as @bodrovis suggests, please look in heroku logs. This should show an error. Please let us know what that error is.\n. Great :) I think Forem should probably raise a better exception here. A patch for that would be great :)\n. Hi @bennettl,\nYou can use decorators for this. \napp/decorators/controllers/forem/application_controller_decorator.rb\nruby\nForem::ApplicationController.class_eval do\n  before_filter :restrict_to_members_only\nend\n. Thanks @Fodoj!\n. @WeremyJalters https://github.com/radar/forem-bootstrap is the theme that @bodrovis is talking about. All the code for the default Forem theme is there. I would recommend you look at that code and fix the classes used for the \"byline\" of the post.\n. Thank you @montanalow!\n. Hi @louiecaulfield, thanks for the PR! Looks like I will need to set aside some time soon to go through and look this over. Would you mind rebasing it on master for me? Thanks.\n. Aha :) Glad you were able to figure this one out for yourself @fchampreux :+1:\n. Hi @Jake0oo0, apologies for the late merge. This looks pretty useful. I'll add it!\n. Actually, please give these parameters a different name than \"order\", as that's a reserved word in most SQL engines.\n. Thank you :)\n\nOn 12 Oct 2014, at 00:18, Jake notifications@github.com wrote:\nAlright, will do so when I get a chance!\n\u2014\nReply to this email directly or view it on GitHub.\n. acts_as_list uses \"position\", so I would just go with that.\n. Thank you @Loremaster :)\n. Hi @pierallard, thanks for that. Could you please submit a patch to fix this issue?\n. No worries @pierallard :) I'll investigate that problem when I get a chance.\n. Thanks @pierallard!\n. @lyneux It's hard for us to debug this without access to the production server. Sorry!. Closing due to age and that there hasn't been a reproducible example provided.\n. I think this was fixed by #602. Can you please try upgrading and see if that fixes your issue?\n. @pavankat you are currently 3 commits behindrails4` HEAD.\n\n38ff418 Bump devise dependency to 3.3.0\n69b6b7a Merge pull request #602 from pierallard/rails4\n4c7c407 Remove deprecation warning for emoji\nThe first two (the bottom two) commits in that range are the two commits that will fix the issue that you're seeing. Please run bundle update forem.\n. Is that code from within Forem or your own code?\n. Thank you @knewter and @frankie-loves-jesus.\n. Glad to see you got a solution @pavankat.\n. @RostDetal Please submit a patch to fix this issue.\n. Related to #607.\n. @RostDetal Could you please also write a regression test for this issue?\n. Ping @RostDetal.\n. Closing as @alexcwatt says #584 fixed this.\n. Thanks for the work @Jake0oo0. Just those two small changes and I think we're good to go (if Travis says so!)\n. Thanks @Jake0oo0!\n. Yup, whenever you update your bundle you'll need to copy across any new forem migrations and run them. \n\nOn 12 Nov 2014, at 04:40, bgadoury notifications@github.com wrote:\nPlease excuse me while I flaunt my Gemfile/bundler ignorance, but I ran into a \"NoMethodError - undefined method `position'...\" error when I re-installed my bundle and pulled this newer commit.\nEventually, I tracked it down to new migrations that I didn't know about. Running them fixed the errors, of course. Should I have run rake forem:install:migrations \"just in case\" after I re-built my bundle? Or, in other words, is that the \"right way\" for me to update my bundle? Thanks!\n\u2014\nReply to this email directly or view it on GitHub.\n. Ping @Jake0oo0.\n. Probably an oversight. The topics/show page doubles as the index page for the posts. Could you please submit a PR that removes this route?\n. Fixed by #615.\n. Yup, it definitely needs some work. I am too busy working on updating Rails 4 in Action in my (tiny amounts of) spare time, so someone will need to take the lead on this.\n. Thanks @yahor!\n. Thanks @joom!\n. Not that I am aware of. If you'd like this feature in Forem then a PR would be the best way to get it there. Please submit one when you're done and I'll take a look.\n. Hi @hieuk09, how do I reproduce this problem on my machine?\n. Sorry about the delay. I've been busy writing. \n\nThis patch does work for me. Thanks very much :+1:\n. Hi @yan-hoose, thanks for the patch.\nCould you please add a regression test for the Admin::ForumsController?\n. Thanks @yan-hoose! This has been merged.\n. Thanks very much @h3xed :) :tada: :beers:\n. I've never heard of someone trying to do this before. I'm surprised that Forem::Membership doesn't have a helper method to find records for a specific group or member... It wouldn't be used anywhere in Forem atm, but it could be good for convenience's sake in the future.\nI think the way that you've done it now is good enough :)\n. Forem does not have a subscriptions table. It creates a table called forem_subscriptions as seen here.\nThe subscriptions table has likely come from your application.\nIf you can reproduce this within a new application, I would like to hear about it. For now, I am closing this issue as I believe it is caused by user error.\n. Seems good to me :) Can you please write a test for this so that we can ensure this behaviour sticks around?\n. Thanks @sungwoncho. LGTM.\n. Is this issue ok to close now? \n. Hey @annemarie35!\nYou're using GitHub exactly the right way.\nIf you could work up a pull request to fix the missing French translations then that would be most appreciated.\nThanks to you, and thanks to @yaf for using Forem as a project to learn from :)\n. Was this fixed by https://github.com/radar/forem/pull/633? /cc @jlerpscher \n. Closing this issue as its now stale.\nIf the translation is still missing, please submit a pull request to fix it.\n. Thank you very much @yan-hoose :)\n. Thanks @derikson!\n. Not easily unfortunately. The only thing I can recommend doing is forking forem and removing it, and then replacing it with stringex.\n\nOn 7 Jan 2015, at 20:58, ryush00 notifications@github.com wrote:\nMy country using unicode language in title (such as Korean).\nWhen I write the post, link seems unfriendly.\nSo, I want to disable this friendly_id. Is it possible?\n\u2014\nReply to this email directly or view it on GitHub.\n. If you want to change it to a number then just fork Forem and remove friendlyid.\n. If you want to change it to a number then just fork Forem and remove friendlyid.\n. Hi @gasova, thanks for the code :) \n\nCould you please submit this as a PR?\n. Added in #663.\n. Thanks @jlerpscher!\n. Thanks for these too @jlerpscher!\n. Looks good to me. Thanks @yan-hoose!\n. You should be describing Forem::Post, not PostDecorator. The class that you're wanting to test is Forem::Post.\n. Thanks @martinrozkos. Could you add Czech to the list in the README too please?\n. Thanks!\n. I don't understand. Why can't you install Forem into this application?\n. If all it is is the simple_form dependency in the gemspec, why not submit a patch to change it to something more like:\nruby\ns.add_dependency 'simple_form', '~> 3.0'\nI think that would seem pretty reasonable.\n. Done already I believe.\n. Thanks @infoget!\n. Could you please make this a ~> 3.0 dependency instead?\n. Thanks!\n. Hi yan-hoose,\nIf you'd like to see it updated then the best way to get that to happen would be to submit a PR which did the updating.\nCould you please work on that? I will review it when you're done.\nThanks \n\nOn 16 Feb 2015, at 00:19, yan-hoose notifications@github.com wrote:\nHi,\nI'd like to see Forem updated to support Rails 4.2. I took a look at it and at first glance there does not seem to be very much needed to do. There are a ton of deprecation warnings when running specs but most of them are repetitive. However, there are a few strange issues.\nBTW, currently Travis CI is running Forem tests in Rails 4.2 mode, so you can see the warnings easily yourself. In Rails 4.2 mode because in the gemspec there is currently\ns.add_dependency 'rails', '~> 4.0', '<= 4.2'\ninstead of\ns.add_dependency 'rails', '~> 4.0', '< 4.2'.\nAnyway, when running tests, there is one failing test and three main sources of warnings:\ndeprecated use_route in forem/spec/support/controller_hacks.rb:27\nusing #deliver instead of #deliver_now or #deliver_later in forem/app/models/forem/subscription.rb:12\ncolumn_for_attribute change warnings from Simple Form: forem/app/views/forem/admin/forums/_form.html.erb:8. This warning will be resolved if the gem dependency is changed from '~> 3.0.1' to '~> 3.0'.\nI'm not sure if in addition to fixing the use_route deprecation warning, RSpec gem dependency should be raised from '~> 2.14.0' to '~> 3.1.0' (since 3.1 is the one with official Rails 4.2 support). Somebody with more experience in RSpec might know the answer to this.\nThere is also a question about how to support both #deliver and #deliver_later depending on the Rails version.\nAbout the failing test:\nrspec ./spec/models/topic_spec.rb:87 # Forem::Topic helper methods #register_view_by increments the overall topic view count\nIt seems that this code in forem/models/forem/concerns/viewable.rb\nview = views.find_or_create_by(user_id: user.id)\nview.increment!('count')\nincrement!(:views_count)\nis incrementing topic.views_count by 2 instead of 1 - first increment in views.find_or_create_by (I'm not sure why) and the second one in increment!(:views_count).\nHas anybody else taken a look at 4.2 support and knows the answers/solutions to these issues already? Unfortunately I don't have too much time to spend on this.\n\u2014\nReply to this email directly or view it on GitHub.\n. Yay! Thanks :)\nOn 18 Feb 2015, at 06:58, yan-hoose notifications@github.com wrote:\nI have taken this on and it's about half done.\n\u2014\nReply to this email directly or view it on GitHub.\n. Wat? Can you reproduce this issue in a new app? Counter caches are not mentioned in the 4.2 changelog and so for this to change seems unnatural.\n. Made it more obvious in the issue title and OP.\n. This issue will need to be addressed before a proper gem release (as we talked about in #666)\n. Rails 4.2.4 has been released. Let's get this version bumped! Please submit a PR for that.\n. Radar: asks for pull requests\nCommunity: asks if anything got fixed magically\n\nAnd so the cycle continues...\n\nOn 26 Aug 2015, at 22:06, sintro notifications@github.com wrote:\nSo, did anything get fixed?\n\u2014\nReply to this email directly or view it on GitHub.\n. @yan-hoose How goes this PR?\n. Merged, thanks!\nOn 28 Aug 2015, at 16:51, yan-hoose notifications@github.com wrote:\nIt's already done a few days ago: #668\nAll tests pass and no deprecation warnings with the new Rails version.\n\u2014\nReply to this email directly or view it on GitHub.\n. @daao87 Please provide steps to reproduce this problem in a new application.\n. No steps have been provided, so I am now closing this issue.\n. I don't know how we are supposed to fix this. It's a problem with generating a sitemap and nothing about forem.\n\nPerhaps try Forem::Engine.routes.url_helpers instead of just forem?\n\nOn 24 Feb 2015, at 17:51, Pavan Katepalli notifications@github.com wrote:\nI'm using the sitemap_generator gem and am running into an issue getting forem routes to work inside the sitemap.rb file.\nThese are the gems I'm using\ngem 'forem', :git => 'git://github.com/radar/forem.git', :ref => '8b4999af3c702603414f6ba9efc1848a0cdb6dbe'\ngem 'sitemap_generator', '~> 5.0.5'\nSitemapGenerator::Sitemap.default_host = 'http://domain.com'\nSitemapGenerator::Sitemap.create do\n  add root_path, :changefreq => 'weekly', :priority => 0.9\nadd new_contact_path, :changefreq => 'monthly'\nadd about_path, :changefreq => 'weekly'\nadd terms_conditions_path, :changefreq => 'weekly'\nadd privacy_policy_path, :changefreq => 'weekly' \nadd press_path, :changefreq => 'weekly' \nadd faq_path, :changefreq => 'weekly' \nadd articles_path, :changefreq => 'weekly'\nForem::Forum.find_each do |f|\n    add forem.forum_path(f), :changefreq => 'weekly'\n  end\nend\n\u2014\nReply to this email directly or view it on GitHub.\n. Glad to see the solution was a simple one :)\nOn 24 Feb 2015, at 18:05, Pavan Katepalli notifications@github.com wrote:\nBut it would be good to note for anyone else in this situation that this solved it:\nforem = Forem::Engine.routes.url_helpers\nThanks @radar\n\u2014\nReply to this email directly or view it on GitHub.\n. Thanks for using Forem!\n. @Buildzzz Do you have a way to reproduce this problem in a new app? Positions of forums are managed in the admin backend.\n. It's on the forum form in the admin backend. Make sure you have upgraded to the latest forem.\nOn 6 Mar 2015, at 04:07, Buildzzz notifications@github.com wrote:\n@radar When I go the admin area of the forem gem, there are three links:\nManage Forums\nManage Forum Categories\nManage Groups\nGoing into Manage Forums and Manage Forum Categories, I see that I can edit the name and description, but do not see where I state the order of the forums.\nAm I going to the right location?\n\u2014\nReply to this email directly or view it on GitHub.\n. Sure, it'd be great on your site. You're free to take forem and modify it to add this feature if you wish. This forem repo won't be getting that feature because not enough people have requested it.\n\nAnd even if a ton of people requested it, it wouldn't be added until there was a PR that everyone was happy with. That's how this project works.\nThanks for your ideas.\n. This is just because I've been really lazy and haven't set up any SMTP settings on the app. I'll fix that up this week since it's an easy fix.\n\nOn 18 Mar 2015, at 05:22, \u6977\u541b Kai Hsieh notifications@github.com wrote:\nWhen trying out the 'reply' function at (forem.herokuapp.com), keep getting error message:\nWe're sorry, but something went wrong.\nIf you are the application owner check the logs for more information.\n\u2014\nReply to this email directly or view it on GitHub.\n. All good now.\n. Thank you!\n. Thanks. Sorry for that :(\n. Hi @comp615,\n\nIt sure sounds like you know what the problem is and how to fix it. Could you please submit a PR that fixes this? Personally I would not put the check in the SubscriptionMailer, but on the method that calls the mailer.\n. Similar or the same?\n\nOn 11 Apr 2015, at 05:11, Lawrence Krubner notifications@github.com wrote:\nI have a similar problem.\n\u2014\nReply to this email directly or view it on GitHub.\n. Please provide steps to reproduce this issue.\n. @gitpenguin Forem doesn't use Stripe. It could be an issue with bundler in your case.\n\nEither way, I am closing this issue as nobody has provided accurate steps to reproduce a problem.\n. @jdurand Do you have an app that reproduces this issue that I could take a look at?\n. I agree with Yan-hoose. \n. Ping. Please update this PR.\n. Stack trace for the issue please\n\nOn 10 Apr 2015, at 21:52, Mrinal Kuchhal notifications@github.com wrote:\nI am working on an RoR-based online classroom product and for handling user - course registrations and progress we use an association 'course_enrollment'. \nWe use the Statesman gem for tracking the various states of enrollments.\nRails version is 4.0.0\nI installed the forem gem using instructions from the wiki and the forums worked fine, however I could not create new enrollments.\nOn running this code:\nenrl = @user.course_enrollments.create(course_id: @course.id)\nthe error is\nNoMethodError (undefined method `workflow_spec' for ActiveRecord::Base:Class)\nOn removing forem from the app this error was not found.\nAny help in solving this will be appreciated.\n\u2014\nReply to this email directly or view it on GitHub.\n. Can you provide an app which reproduces this issue?\n. ruby\nadd_column :forem_forums, :created_at, :datetime, null: false\nadd_column :forem_forums, :updated_at, :datetime, null: false\n\nWe don't have a need for them in forums (or categories for that matter). So when I created the forums table I probably removed them from there, but didn't do it when I created the categories table.\n. That sounds like a good idea. Please submit a patch to add these keys.\n. How are you trying to create this new topic? Please provide some steps to reproduce the issue on a new app. \n\nOn 25 Apr 2015, at 03:02, edmondchui notifications@github.com wrote:\nBranch: rails4\nWhen I tried to create a new topic, I got the error\nundefined method user=' for nil:NilClass/Users/echui/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/bundler/gems/forem-c3b763b5fb28/app/models/forem/topic.rb:143:inset_first_post_user'\nThe root cause is that the filter before_save :set_first_post_user is expecting a post\nhttps://github.com/radar/forem/blob/rails4/app/models/forem/topic.rb#L141-L144\ndef set_first_post_user\n  post = posts.first\n  post.user = user\nend\nIs this a bug or a design issue?\n\u2014\nReply to this email directly or view it on GitHub.\n. What Yan-Hoose said. \n. Delete the duplicate forums.\n. I am not fine with having Forem support a version of Rails with a known regression. Therefore I won't be accepting this PR until Rails 4.2.2 is released.\n. Does 4.2.2 contain the specified patch or is it just security releases?\nOn 19 Jun 2015, at 19:43, Vitaliy Senich notifications@github.com wrote:\nhey @radar Rails 4.2.2 is already released, can you accept PR?\n\u2014\nReply to this email directly or view it on GitHub.\n. I'm fine with leaving the dependency as it is now. If people complain about the counter cache issue, we can point them to this issue.\n. Forem.moderate_first_post = false in config/initializers/forem.rb.\n. Ah, I understand now. Yes you can override it like that to accomplish what you want.\n. Hi @pdcoutinho. Thanks for submitting this issue. Could you please submit a patch to fix it? That would be great. Changing the route to be a GET route should fix it.\n. Rather than an authenticity token, could we instead have a unique hash on the topic + subscription that is generated + then is passed through in this request? The route will change to a GET request, and the token will make it so that nobody would be able to CSRF-attack a way for people to unsubscribe.\n\nI'm thinking something such as SecureRandom.hex(24) should be fine for this.\n. Patches welcome to fix this :) I do not have time myself.\n. Turns out I do have time to fix this.\nPlease review #669 and let me know if it's suitable for you.\n. Thank you @yan-hoose!\n. For about a year now I've thought that Forem would be much better if it was just a JSON API without a frontend at all. A lot of people just customise the frontend or ditch it entirely. Most people don't use what we supply. I had a similar set of thoughts when I worked at Spree too.\nI haven't had the time to invest in doing the work because I've been too busy with my full-time job and writing books.\nI think it sounds like a step in the right direction. We should not use Rabl for this as I've had issues with it ; in my experience with building a Rabl-backed API for Spree. Grape is not that great either. I'm fine with it being straight jbuilder views in Rails. \nI think it should comply with the JSON API specification. It should be versioned and access should be granted with user-based API keys (i.e. each user can have an API key generated to access Forem). \nPlease do it :)\n. I think if a topic has been retrieved directly (i.e a request like /forums/blah/topics/foo) then that should count as a view. Having a separate endpoint for this doesn't make much sense imo.\nWhat's you're reasoning for having a separate endpoint?\n. Hi Viktor,\nThanks for thinking that Forem is ready for production use. I think differently from that. At best, this project is a great example of what a lightweight production-ready forum system COULD act like.\nThe short version is that I think Forem needs a rewrite. For starters. it's a silly idea to provide views when most people are just going to override them anyway. We could also stand to use better tooling like Sidekiq to process the moderation queue.\nimo, Forem should ONLY provide a well documented JSON API and perhaps some equivalent of Apple's Human Interface Guidelines. The web is moving to JS front ends more and more and I would like Forem to follow that trend. Discourse does it very well imo.\nI would like to release a gem to RubyGems, but before that Forem needs to undergo a major transition :)\n\nOn 5 Jul 2015, at 05:54, Viktor Fonic notifications@github.com wrote:\nHi Ryan,\nGreat work!\nI've noticed you've released forem v0.0.1 as a gem on RubyGems long time ago.\nWhy aren't you using that platform to release other versions? It would allow people to build other gems on top of this one (think of forem plugins), and would give more confidence that gem is production ready as it would be easier to lock on certain gem version (I see there are some issues opened related to people upgrading and then having forem not working properly).\nThanks!\n\u2014\nReply to this email directly or view it on GitHub.\n. > I'm a little bit confused. Isn't that point of the views, to provide a nice and simple foundation with which to override? \n\nYes. I've seen it go bad and I want to prevent that from happening in the future. I concede that it makes more sense to keep the views in the project than to leave them out. The Rails views could be the standard interface for Forem, and then we could have a JSON API that people can use to build a JS version of those \"views\" themselves.\n\nI want Forem to be improved upon by people who care about having a decent forum system in Rails. I'm happy to participate in that discussion (as self-appointed BDFL), but I don't have time to do much of the coding myself. It seems like just in this issue we have enough people who care about Forem to make it better.\nSo please, if you find something that you want to improve with Forem, be it adding a JSON API (#665), fixing the failing builds on Travis (finally!), removing the deprecation warnings during the test runs, or improving the layout: please don't be afraid to dig in and help out there.\n. > I agree with @yan-hoose that this could be released as v1.0 (or v0.1 if you want) and then the rewrite will be the new major version. This would work for both cases, when someone wants to use the gem and for rewrite.\nI guess the whole point of doing this would be to have a version of Forem that is fixed in time? Is that all this will be solving? If so, I'm happy to do a v0.1 release once I get clarification.\n. Happy to do a v1.0 gem release once the issues in the v1.0 milestone have been addressed.\nGet to it :)\n. Yup, that's fixed now. 1.0 milestone still has issues open. As I said before, once those are fixed then I will do a 1.0 release.\n. Did you figure it out?\n. The gem doesn't come with a premade solution for querying multiple forums. If you could come up with one and share it with us, that would be appreciated :)\n. Regarding that bug: can you please file a new issue with steps to reproduce so I can look at it?\nThat would be awesome :)\n\nOn 15 Jul 2015, at 09:50, Buildzzz notifications@github.com wrote:\nActually, we need to return the topic id as well so we can use it in the\nlink_to.\nAnyway, let me know if you want to try it out and how you would like me to\nintegrate to the gem.\nBest,\nTim Zhu\nOn Tue, Jul 14, 2015 at 4:46 PM, Zhu, Tim novemberzhu@gmail.com wrote:\n\nHi Ryan,\nAfter beating my head against the wall, I figured out a solution. Not\nsure where/how you would like for me to integrate it into the gem but\nhere's the method:\ndef lastpostforforums(array_of_forum_ids)\nforumids = array_of_forum_ids\nlastposts = Forem::Post.joins(:topic).where(topic_id:\nForem::Topic.where(forum_id: forumids, hidden: [false,\nnil])).group(\"forem_topics.forum_id\").maximum(\"forem_posts.created_at\")\nlastpostdetails = Forem::Post.joins(:topic, :forem_user).where(created_at:\nlastposts.values).pluck(\"forem_topics.forum_id\", \"forem_topics.subject\",\n\"forem_posts.created_at\", \"users.name\")\nend\nFYI, the current lastpost method had a bug where it returns hidden topics.\nBest,\nTim Zhu\nOn Sat, Jul 11, 2015 at 5:37 PM, Ryan Bigg notifications@github.com\nwrote:\n\nThe gem doesn't come with a premade solution for querying multiple\nforums. If you could come up with one and share it with us, that would be\nappreciated :)\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/radar/forem/issues/667#issuecomment-120674265.\n\n\u2014\nReply to this email directly or view it on GitHub.\n. :shipit:\n\nOn 26 Aug 2015, at 05:28, yan-hoose notifications@github.com wrote:\nWell, everything is green!\n\u2014\nReply to this email directly or view it on GitHub.\n. I think I will rather wait for Rails 4.2.4 to be released. Thank you for investigating however!\n. heroku run rails console\nForem::Category.count\nForem::Forum.count\n\nYou don't have any data.\n\nOn 20 Jul 2015, at 18:15, spvkavitha notifications@github.com wrote:\nI followed the tutorial and it is all working fine in localhost. When I push the app to heroku: https://freeskies.herokuapp.com/forums/ the forums page only shows the FORUMS title and nothing else. \nI can upload Heroku logs if that provide needed information.\n\u2014\nReply to this email directly or view it on GitHub.\n. Did you run heroku run rake db:seed?\nOn 22 Jul 2015, at 00:44, spvkavitha notifications@github.com wrote:\n@Jake0oo0 I have added the seeds.rb but still it shows do data.\n-- Still getting\nRunning rails console attached to terminal... up, run.3491\nLoading production environment (Rails 4.1.5)\nirb(main):001:0> Forem::Category.count\n=> 0\nirb(main):002:0> Forem::Forum.count\n=> 0\nirb(main):003:0>\nHeroku logs for https://freeskies.herokuapp.com/forums/\n]: \n2015-07-21T14:38:20.681391+00:00 app[web.1]: Processing by Forem::ForumsController#show as HTML\n2015-07-21T14:38:20.681481+00:00 app[web.1]: Parameters: {\"id\"=>\"default\"}\n2015-07-21T14:38:20.696868+00:00 app[web.1]: Completed 404 Not Found in 15ms\n2015-07-21T14:42:02.174087+00:00 app[web.1]: Started GET \"/forums/\" for 98.207.85.125 at 2015-07-21 14:42:02 +0000\n2015-07-21T14:42:02.198301+00:00 app[web.1]: Rendered collection (0.0ms)\n2015-07-21T14:42:02.201171+00:00 app[web.1]: Rendered layouts/_navigation_links.html.erb (0.0ms)\n2015-07-21T14:42:02.214177+00:00 app[web.1]: Rendered layouts/_messages.html.erb (0.1ms)\n2015-07-21T14:42:02.215051+00:00 app[web.1]: Completed 200 OK in 29ms (Views: 17.8ms | ActiveRecord: 10.2ms)\n2015-07-21T14:42:02.199539+00:00 app[web.1]: Rendered forem/forums/index.html.erb within layouts/application (12.2ms)\n2015-07-21T14:42:02.182157+00:00 app[web.1]: Processing by Forem::ForumsController#index as HTML\n2015-07-21T14:42:02.206699+00:00 app[web.1]: Rendered layouts/_navigation.html.erb (5.9ms)\n2015-07-21T14:42:02.214487+00:00 app[web.1]: Rendered layouts/_footer.html.erb (0.0ms)\n2015-07-21T14:42:02.231009+00:00 heroku[router]: at=info method=GET path=\"/forums/\" host=freeskies.herokuapp.com request_id=cf617d4a-e426-49a7-ae44-48bb0f984ce8 fwd=\"98.207.85.125\" dyno=web.1 connect=1ms service=63ms status=304 bytes=738\n2015-07-21T14:42:04.520761+00:00 app[web.1]: Started GET \"/users/sign_in\" for 98.207.85.125 at 2015-07-21 14:42:04 +0000\n2015-07-21T14:42:04.540200+00:00 app[web.1]: Rendered users/sessions/new.html.erb within layouts/application (12.8ms)\n2015-07-21T14:42:04.540151+00:00 app[web.1]: Rendered devise/shared/_links.html.erb (0.5ms)\n2015-07-21T14:42:04.541126+00:00 app[web.1]: Rendered layouts/_navigation_links.html.erb (0.0ms)\n2015-07-21T14:42:04.542080+00:00 app[web.1]: Rendered layouts/_messages.html.erb (0.0ms)\n2015-07-21T14:42:04.542246+00:00 app[web.1]: Rendered layouts/_footer.html.erb (0.0ms)\n2015-07-21T14:42:04.542523+00:00 app[web.1]: Completed 200 OK in 18ms (Views: 15.4ms | ActiveRecord: 0.0ms)\n2015-07-21T14:42:04.524133+00:00 app[web.1]: Processing by Users::SessionsController#new as HTML\n2015-07-21T14:42:04.541940+00:00 app[web.1]: Rendered layouts/_navigation.html.erb (1.1ms)\n2015-07-21T14:42:04.545009+00:00 heroku[router]: at=info method=GET path=\"/users/sign_in\" host=freeskies.herokuapp.com request_id=b1abf19b-a23b-4509-b9e2-34d3c75d5135 fwd=\"98.207.85.125\" dyno=web.1 connect=2ms service=26ms status=304 bytes=738\n2015-07-21T14:42:05.790281+00:00 heroku[router]: at=info method=GET path=\"/\" host=freeskies.herokuapp.com request_id=ba7dbe85-c709-4d3b-b4ff-a135f9981bc2 fwd=\"98.207.85.125\" dyno=web.1 connect=2ms service=93ms status=304 bytes=738\n2015-07-21T14:42:05.706215+00:00 app[web.1]: Started GET \"/\" for 98.207.85.125 at 2015-07-21 14:42:05 +0000\n2015-07-21T14:42:05.780385+00:00 app[web.1]: Rendered layouts/_navigation.html.erb (5.9ms)\n2015-07-21T14:42:05.773224+00:00 app[web.1]: Rendered visitors/index.html.erb within layouts/application (62.1ms)\n2015-07-21T14:42:05.786131+00:00 app[web.1]: Rendered layouts/_footer.html.erb (0.0ms)\n2015-07-21T14:42:05.709672+00:00 app[web.1]: Processing by VisitorsController#index as HTML\n2015-07-21T14:42:05.774762+00:00 app[web.1]: Rendered layouts/_navigation_links.html.erb (0.0ms)\n2015-07-21T14:42:05.786444+00:00 app[web.1]: Completed 200 OK in 77ms (Views: 75.6ms | ActiveRecord: 0.0ms)\n2015-07-21T14:42:05.785865+00:00 app[web.1]: Rendered layouts/_messages.html.erb (0.1ms)\n2015-07-21T14:42:07.282942+00:00 heroku[router]: at=info method=GET path=\"/forums/\" host=freeskies.herokuapp.com request_id=eb542c84-089f-4bce-ba84-c08de0ab584d fwd=\"98.207.85.125\" dyno=web.1 connect=2ms service=41ms status=304 bytes=738\n2015-07-21T14:42:07.240783+00:00 app[web.1]: Started GET \"/forums/\" for 98.207.85.125 at 2015-07-21 14:42:07 +0000\n2015-07-21T14:42:07.253252+00:00 app[web.1]: Rendered collection (0.0ms)\n2015-07-21T14:42:07.255722+00:00 app[web.1]: Rendered layouts/_navigation_links.html.erb (0.0ms)\n2015-07-21T14:42:07.262241+00:00 app[web.1]: Rendered layouts/_messages.html.erb (0.1ms)\n2015-07-21T14:42:07.262730+00:00 app[web.1]: Completed 200 OK in 13ms (Views: 10.3ms | ActiveRecord: 2.3ms)\n2015-07-21T14:42:07.249094+00:00 app[web.1]: Processing by Forem::ForumsController#index as HTML\n2015-07-21T14:42:07.254344+00:00 app[web.1]: Rendered forem/forums/index.html.erb within layouts/application (3.9ms)\n2015-07-21T14:42:07.258454+00:00 app[web.1]: Rendered layouts/_navigation.html.erb (3.1ms)\n2015-07-21T14:42:07.262404+00:00 app[web.1]: Rendered layouts/_footer.html.erb (0.0ms)\nHere is heroku logs: While trying to manually access https://freeskies.herokuapp.com/forums/default\nRendered layouts/_footer.html.erb (0.1ms)\n2015-07-21T14:37:14.372322+00:00 app[web.1]: Started GET \"/forums/categories/general\" for 98.207.85.125 at 2015-07-21 14:37:14 +0000\n2015-07-21T14:37:14.381177+00:00 app[web.1]: Processing by Forem::CategoriesController#show as HTML\n2015-07-21T14:37:14.381253+00:00 app[web.1]: Parameters: {\"id\"=>\"general\"}\n2015-07-21T14:37:15.105187+00:00 heroku[router]: at=info method=GET path=\"/forums/categories/general\" host=freeskies.herokuapp.com request_id=2fc5f6a4-e647-47af-9d8d-7b12bf77408e fwd=\"98.207.85.125\" dyno=web.1 connect=1ms service=732ms status=404 bytes=1829\n2015-07-21T14:37:15.089366+00:00 app[web.1]: Completed 404 Not Found in 708ms\n2015-07-21T14:37:15.091273+00:00 app[web.1]: \n2015-07-21T14:37:15.091275+00:00 app[web.1]: ActiveRecord::RecordNotFound (ActiveRecord::RecordNotFound):\n2015-07-21T14:37:15.091278+00:00 app[web.1]: vendor/bundle/ruby/2.0.0/gems/activerecord-4.1.5/lib/active_record/querying.rb:3:in find'\n2015-07-21T14:37:15.091277+00:00 app[web.1]: vendor/bundle/ruby/2.0.0/gems/friendly_id-5.0.5/lib/friendly_id/finder_methods.rb:23:infind'\n2015-07-21T14:37:15.091280+00:00 app[web.1]: vendor/bundle/ruby/2.0.0/gems/cancancan-1.12.0/lib/cancan/model_adapters/abstract_adapter.rb:20:in find'\n2015-07-21T14:37:15.091281+00:00 app[web.1]: vendor/bundle/ruby/2.0.0/gems/cancancan-1.12.0/lib/cancan/controller_resource.rb:111:infind_resource'\n2015-07-21T14:37:15.091284+00:00 app[web.1]: vendor/bundle/ruby/2.0.0/gems/cancancan-1.12.0/lib/cancan/controller_resource.rb:63:in load_resource_instance'\n2015-07-21T14:37:15.091285+00:00 app[web.1]: vendor/bundle/ruby/2.0.0/gems/cancancan-1.12.0/lib/cancan/controller_resource.rb:32:inload_resource'\n2015-07-21T14:37:15.091286+00:00 app[web.1]: vendor/bundle/ruby/2.0.0/gems/cancancan-1.12.0/lib/cancan/controller_resource.rb:25:in load_and_authorize_resource'\n2015-07-21T14:37:15.091304+00:00 app[web.1]: vendor/bundle/ruby/2.0.0/gems/cancancan-1.12.0/lib/cancan/controller_resource.rb:10:inblock in add_before_filter'\n2015-07-21T14:37:15.091306+00:00 app[web.1]: vendor/bundle/ruby/2.0.0/gems/activesupport-4.1.5/lib/active_support/callbacks.rb:440:in block in make_lambda'\n2015-07-21T14:37:15.091305+00:00 app[web.1]: vendor/bundle/ruby/2.0.0/gems/activesupport-4.1.5/lib/active_support/callbacks.rb:440:ininstance_exec'\n2015-07-21T14:37:15.091307+00:00 app[web.1]: vendor/bundle/ruby/2.0.0/gems/activesupport-4.1.5/lib/active_support/callbacks.rb:160:in call'\n2015-07-21T14:37:15.091309+00:00 app[web.1]: vendor/bundle/ruby/2.0.0/gems/activesupport-4.1.5/lib/active_support/callbacks.rb:160:inblock in halting'\n2015-07-21T14:37:15.091310+00:00 app[web.1]: vendor/bundle/ruby/2.0.0/gems/activesupport-4.1.5/lib/active_support/callbacks.rb:229:in call'\n2015-07-21T14:37:15.091311+00:00 app[web.1]: vendor/bundle/ruby/2.0.0/gems/activesupport-4.1.5/lib/active_support/callbacks.rb:229:inblock in halting'\n2015-07-21T14:37:15.091312+00:00 app[web.1]: vendor/bundle/ruby/2.0.0/gems/activesupport-4.1.5/lib/active_support/callbacks.rb:166:in `call'\n\u2014\nReply to this email directly or view it on GitHub.\n. Please see #640. We're waiting on 4.2.4 to be released.\n. Thank you @yoodaa!\n. Please show me your Gemfile.\n. Any particular reason why you're stuck on 4.1.1 and can't upgrade to 4.2.4?\n. You're commenting on an issue that says it has a problem with 4.1.1. You said you have the same issue.\n\nI didn't see that your Gemfile contained 4.2.4.\n\nOn 31 Aug 2015, at 11:04, Christopher J. Bottaro notifications@github.com wrote:\nI'm not sure what you mean. The Gemfile that I posted shows 4.2.4. In fact, I had to upgrade to 4.2.4 (from 4.2.3) just to get it to work (due to dependencies specified in the gemspec).\n\u2014\nReply to this email directly or view it on GitHub.\n. Could someone please share with me a basic application which reproduces this issue? I'm having a hard time reproducing it myself.\n. This is fixed now by #679.\n. Why open a new issue for it when #675 was already opened?\n. Patches welcome to fix this oversight. \nOn 1 Sep 2015, at 15:36, Erik Ostrom notifications@github.com wrote:\nNo. By default, no one can edit any post. By adding methods on your user\nclass, you can enable some users to edit some posts. But you can't easily\nmake that decision for individual posts, only for forums.\nIt's a good setup for admin and moderator policies, just not for what we\nhave in mind.\nOn Tue, Sep 1, 2015, 12:04 AM sintro notifications@github.com wrote:\n\nStrange default policy... Really, every user can edit and delete every\npost in forem?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/radar/forem/issues/678#issuecomment-136587598.\n\u2014\nReply to this email directly or view it on GitHub.\n.  Haha this is great! I was just warning another developer about doing this kind of thing in a model and then it's pointed out that I've done it myself!!\n\n\nThe require call is only ran once, and so on the second request when it reloads the model it won't run it again. The solution is to do as you've done, or to require them with require_dependency which uses load or require depending on a config setting I forget the name of right now.\nThanks very much for the patch! Travis has run the tests and according to it the tests are fine.\nI'll merge now!\n. Use 4.2.4.\n\nOn 1 Sep 2015, at 18:30, Micha\u0142 Zaj\u0105c notifications@github.com wrote:\nHi,\n640 is apparently fixed but I can't install forem in my project:\nBundler could not find compatible versions for gem \"rails\":\n  In Gemfile:\n    forem (>= 0) ruby depends on\n      rails (!= 4.2.0, != 4.2.1, != 4.2.2, != 4.2.3, ~> 4.0) ruby\nrails (4.2.3)\nMy Gemfile:\nsource 'https://rubygems.org'\nruby '2.1.5'\ngem 'rails', '4.2.3'\ngem 'rails-i18n', '4.0.4'\ngem 'sqlite3', '1.3.10'\ngem 'sass-rails', '5.0.3'\ngem 'bootstrap-sass', '3.3.3'\ngem 'font-awesome-sass', '4.3.0'\ngem 'uglifier', '2.7.1'\ngem 'coffee-rails', '4.1.0'\ngem 'jquery-rails', '4.0.4'\ngem 'turbolinks', '2.5.3'\ngem 'jbuilder', '2.3.1'\ngem 'bcrypt', '3.1.10'\ngem 'unicorn', '4.9.0'\ngem 'migrant', '1.5.0'\ngem 'haml-rails', '0.9.0'\ngem 'simple_form', '3.1.0'\ngem 'nested_form', '0.3.2'\ngem 'strip_params', '0.0.1'\ngem 'paperclip', '4.3.0'\ngem 'cancancan', '1.12.0'\ngem 'will_paginate-bootstrap', '1.0.1' # Includes 'will_paginate' gem.\ngem 'will-paginate-i18n', '0.1.15'\ngem 'faker', '1.5.0'\ngem 'factory_girl_rails', '4.5.0'\ngem 'actionview-encoded_mail_to', '1.0.7'\ngem 'twitter', '5.14'\ngem 'rinku', '1.7.3', require: 'rails_rinku'\ngem 'forem', :github => \"radar/forem\", :branch => \"rails4\"\ngem 'sdoc', '0.4.1', group: :doc\ngem 'annotate', '2.6.10'\ngem 'therubyracer', platforms: :ruby\ngem 'activeadmin', github: 'activeadmin'\ngem 'ckeditor', github: 'galetahub/ckeditor'\ngem 'angularjs-rails', '1.3.10'\ngem 'devise', '3.5.2'\ngem 'devise-i18n', '0.12.1'\ngem 'omniauth', '1.2.2'\ngem 'omniauth-facebook', '2.0.1'\ngem 'omniauth-twitter', '1.2.1'\ngem 'omniauth-linkedin', '0.2.0'\nDebugging.\ngem 'exception_notification', '4.1.1'\ngem 'exception_notification-rake', '0.2.1'\ngem 'raygun4ruby', '1.1.6'\nLocations\ngem 'geocoder'\nFollowing objects\ngem 'acts_as_follower'\nUsers activity\ngem 'public_activity'\ngroup :development do\n  gem 'thin', '1.6.3'\ngem 'capistrano', '3.4.0'\n  gem 'capistrano-rvm', '0.1.2'\n  gem 'capistrano-bundler', '1.1.4'\n  gem 'capistrano-rails', '1.1.3'\ngem 'railroady', '1.3.1'\nend\ngroup :development, :test do\n  gem 'pry-byebug'\n  gem 'web-console', '~> 2.0'\n  gem 'spring'\ngem 'rspec-rails', '~> 3.0'\ngem 'capybara', '2.4.4'\n  gem 'capybara-webkit', '1.4.0'\n  gem 'database_cleaner', '1.4.0'\n  gem 'webmock', '1.7.10', require: false\n  gem 'selenium-webdriver', '2.44.0', require: false\n  gem 'chromedriver-helper', '0.0.8'\n  gem 'formulaic', github: 'thoughtbot/formulaic'\n# To testing Geocoder\n  gem 'fakeweb'\ngem 'rubocop', require: false\n  gem 'haml_lint', require: false\n  gem 'scss_lint', require: false\n  gem 'ruby-lint', require: false\n  gem 'coffeelint', require: false\nend\n\u2014\nReply to this email directly or view it on GitHub.\n. I really should be more specific: the versions that are \"banned\" in the gem spec have a bug in them which prevents view counts from being correct. 4.2.4 fixed this issue and so this version is the only one permitted so far in the 4.2 series.\n. Why do you ignore the comment I wrote above?\n. Patches welcome to fix this and any other issues like it.\nOn 1 Sep 2015, at 19:46, sintro notifications@github.com wrote:\nJust began to work with this gem, and noticed the warning form Bullet gem\nN+1 Query detected\nForem::Category => [:forums]\nAdd to your finder: :includes => [:forums]\nN+1 Query method call stack\nThis warning was right on categories index (main page of forem), and I am not sure on other actions there will not be same warnings. As forum is not main feature of my project, I am leaving my investigations on this problem for later, but still post this issue here. Did anybody face this problem, or it is just Bullet`s paranoia?\n\u2014\nReply to this email directly or view it on GitHub.\n. > Patches welcome to fix this and any other issues like it.\n. Thank you!\n. No description and failing build and it doesn't merge cleanly. Assuming PR opened in error.\n. Thank you :)\n. I wrote a book about this! \n\nhttps://leanpub.com/multi-tenancy-rails-2\nYou would just need to override Forem's controllers.\n\nOn 28 Oct 2015, at 20:41, George Good notifications@github.com wrote:\nHey \nI wondered if forem support or plans to support multiple forums ina single rails app, scoped by current_user.\nCheers.\n\u2014\nReply to this email directly or view it on GitHub.\n. Good find. Thanks for doing this work, @zakak!\n. How about this instead?\n\nif Forem.formatter && Forem.formatter.respond_to?(:blockquote)\nThat would mean that you wouldn't break existing formatters and future formatters wouldn't need to implement a blockquote method.\n. I agree, probably better.\n. This uses the Ruby 1.9 hash syntax, which will not be compatible with Ruby 1.8. Please use the Ruby 1.8 syntax.\n. Argument listings for methods should be wrapped in circle brackets:\ndef topic_reply(post_id, subscriber_id)\nJust to make it consistent to where this method is called and with other method calls.\n. Hash key-values pairs need spaces between the keys, arrows and values:\n:to => @user.email, :subject => \"...\"\n. You accidentally a :branch here.\n. Need spaces here for key-value again.\n. Need wrappings for the argument here too.\n. Argument wrapping here.\n. Argument wrapping here.\n. Argument wrapping here please.\n. Inconsistent key-value spacing.\n. Inconsistent key-value spacing.\n. Key-value spacing here please.\n. Spacing on this line is a bit weird.\n. Why do you have spacing here?\n. Spacing here needs fixing.\n. Spacing here needs fixing.\n. No semi-colons please.\n. Spacing here is inconsistent.\n. Maybe include an unsubscribe link too? This could be v2 ;)\n. Being super picky I know, but this could be subscriber? that takes an argument. Reads as \"is this user a topic subscriber?\"\n. Don't need the self here. The self call is implicit when you call this method.\n. Don't need the self call here either.\n. I think this should be in a new option, Forem.email or something like that.\n. This should not be en, but rather fa.\n. I think a get will do just fine :)\n. Forem.user_class should be a string, rather than a class. You will need to call constantize here.\n. Is there always a category created during the install?\n. Ah, you're right.\n. Please use count here as it will do an SQL count, where size will load all posts objects into memory and then do size on that array.\n. spec/dummy is re-generated with a call to rake forem:dummy_app, and so this migration would be nuked by that call. Recommended to move it into the dummy generator.\n. !locked? is better imo\n. Yes please.\n. Strongly strongly strongly disagree.\n. Disagree with turning this option on. If you turn this option on there's no way to know for certain that we have all attributes mass-assignable as required.\nI'm about to head out to lunch but will look at this again when I come back.\n. I've now removed this with @35bd6fa. All the tests still pass. Nice work!\n. This file should not exist. Please remove it.\n. This file should not exist. Please remove it.\n. Please remove these modifications to the Gemfile.lock also.\n. Not sure I like the use of hard-coded HTML here. Would a content_tag not be better?\n. I don't agree with .idea being added to .gitignore. Rather, you should be careful with what you add to your commit, adding changes using preferably the -p option during git add, so that changes like debug statements or IDE pollutant directories don't get added. \n\nRyan Bigg\nOn Tuesday, 12 June 2012 at 20:09, Philip Arndt wrote:\n\n\n@@ -10,3 +10,4 @@ tmp\n.sw\nspec/dummy\n*.rbc\n+.idea\n\nDo you add it to every project you work on?\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/pull/238/files#r965946\n. Also, if any pull request submitted an .idea directory with the contents normally found in one, I would reject it outright. \n\nWith an explanation, of course. \n\nRyan Bigg\nOn Tuesday, 12 June 2012 at 20:09, Philip Arndt wrote:\n\n\n@@ -10,3 +10,4 @@ tmp\n.sw\nspec/dummy\n*.rbc\n+.idea\n\nDo you add it to every project you work on?\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/pull/238/files#r965946\n. There are no disadvantages about adding to it... It's just I would prefer it kept short and clean.  \n\nThanks for removing that .idea directory! \n\nRyan Bigg\nOn Tuesday, 12 June 2012 at 20:22, joxxoxo wrote:\n\n\n@@ -10,3 +10,4 @@ tmp\n.sw\nspec/dummy\n*.rbc\n+.idea\n\nok, i've removed it already. \nand yes, it was usually added to project's .gitignore automaticaly(for example by refinerycms generator), by me or by other collaborators. \nthanks for sharing your point of view.\nmay be you can name any disadvantages of adding this to project's .gitignore?\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/pull/238/files#r965988\n. Legacy from Spree. I think you're right. We could probably get away with using require_dependency here?\n. Extra space here.\n. Why?\n. Why don't you just check the URL rather than the entire body?\n. response.url.should include(forum_topic_path(topic.forum, topic), I think.\n. Agree, a 404 is best.\n. There's no conventions guideline for the project. The code is the guideline.\n\nwrt to I18n, I think matching the translations up to their dot-prefix equivalents is the right thing to do. i.e. <%= t(\".forum\") %> should look up the correct translation relative to that view.\n. I think using the exists method here would be better than using where.\n. hardcore\n. This is necessary to trigger the approve method callbacks.\n. This should additionally email all the moderators for the topic's forum: topic.forum.moderators. Both the moderators and the admins are able to approve posts. A topic's owner cannot approve.\n. I suggest moving this into its own method.\n. ruby\ndef admin_users\n  Forem.user_class.find_all_by_forem_admin(true)\nend\nThe reason being is that it's referenced in both the new_topic and new_post method. I'll do this when I merge it, one moment.\n. Use > for quotes, not backticks.\n\nYou can add users to groups in the admin backend. The groups can then be added to a forum as moderators. This functionality needs another look at, I think. It's a bit rough around the edges.\n. :heart:\n. Why are you passing @topic here? In what situation would it be available?\n. Are there going to be tests for this presenter?\n. Are there going to be tests for this presenter?\n. Rather than loading the groups and then iterating through and getting the id, I think pluck would be more suitable here:\nuser.forem_groups.pluck(:id)\n. pluck would also be useful here.\n. Please wrap filenames with backticks so that they're formatted differently from the plain text.\n. This means that these gems will only be installed on Windows. This is bad.\n. This should be \"js\" because it's within a JS file.\n. This should be \"css because it's within a CSS file.\n. Oh I see, you're combining the platforms so that allows for all of them. I use Macs exclusively for development, but I do have a Windows PC that I occasionally use for gaming that also has Ruby installed, so I could check there.\n. I would probably call this cannot_quote_deleted_post.\n. I don't understand the includes here. Why is that necessary if all the forums have the same category? Shouldn't it just be includes(:forums)?\n. I don't think the category should be here in the includes, either.\n. Why does forum need to be included here?\n. Why does topic need to be included here?\n. I don't understand why this button has been removed.\n. @bodrovis can you show me a screenshot of what this used to look like?\n. Since this is for a topic, perhaps we could name the key forem.topic.newly_created. WDYT?\n. Great, could you please update this PR for that?\n. This migration file is called add_order_to_categories, but the class defined within is AddPositionToCategories. You should rename the migration file to the correct name, because this is currently breaking the tests on Travis.\n. You will need to rename this migration also.\n. What does this attribute do?\n. This is missing some indentation... just a small nitpick.\nI like that you've removed the duplication in the _reply_to_post partial.\n. I'm always wary of default_scope usage... could we make this a scope instead and say Forem::Category.by_position instead? Sorry to be a pain.\n. You can just do a force push to this branch and the PR will be updated automatically.\n. I'm considering dropping support for earlier versions of Rails so that we won't have this method at all. It will always be deliver_later, and then ActiveJob can handle it.\n. Thanks for bringing this up to scratch on RSpec 3 :)\n. I don't think we should include this by default. SimpleForm already defaults to its own default configuration if one isn't specified. Why do we need to specify it ourselves?\n. I thought that this kind of request format setting could be done at the routes level but I can't find a solution that works. I tried coming up with my own and googling for one. Nothing that I tried works.\nInstead, putting respond_to :json at the top of the controller works, but this requires the use of the responders gem (which is alright imo). I think this is a better method than forcing the request format this way.\n. I would personally lock the jbuilder version here, just in case of a major version bump that changes things in a breaking way.\n. My concern would be that if simple_form changed their defaults, then these \"defaults\" that we have here would be out of date, and therefore incorrect.\n. Does that still use the default conf?\n\nOn 14 Jul 2015, at 21:45, yan-hoose notifications@github.com wrote:\nIn spec/lib/generators/forem/dummy/templates/config/initializers/simple_form.rb:\n\n@@ -0,0 +1,166 @@\n+# Use this setup block to configure all options available in SimpleForm.\n+SimpleForm.setup do |config|\nI did some testing and it seems when we specify an absolute minimum config block like this:\n\nSimpleForm.setup do |config|\nend\n... then simple_form does not complain about missing config. Sounds good, should I make the changes?\n\u2014\nReply to this email directly or view it on GitHub.\n. Wonderful!\n. And what if people want to use deliver_later instead?\n. \n",
    "parndt": "Hopefully RefineryCMS will have 3.1 support sometime soon so that we can relax the requirement. Unfortunately we've been bitten by even Rails' minor point releases in the past so we're being careful.\n. Did you want your second commit merged, too? (Add link to create new topic)\nP.S. I agree with the whitespace thing.\n. Fair enough\nGitHub automatically adds new commits to the branch to any open pull request\nfrom that branch\n. I used my git learnings to merge just the commit you were wanting to merge (85785c4)\n. I just pushed a commit which ignores the logs from the dummy project, it was affecting me.\n. @knewter status?\n. Specs or it didn't happen\n. @radar Should we store the avatar or just hotlink gravatar each time?\n. I have this setup on the http://refinerycms.com/blog already so I can whip the code in. :)\n. Wait - you cloned the forem repository and edited the forem Gemfile ? Or you added those entries to your Rails application's Gemfile?\n. Ah - the instructions are for integrating Forem into a Rails project so the Gemfile entries should go into your Rails project :-)\n. \"This pull request can not be automatically merged.\"\n. Solved by pull request #21.\n. I have trouble getting testing to work out of the box too!\n. It seems the steps are:\nbash\nbundle exec rake -f spec/dummy/Rakefile db:drop db:create db:migrate\nbundle exec rspec spec\nTaken from the travis config.\nIt would be nice if running rake from the project did this for us or maybe this information could go in the README better. Would appreciate any and all patches that did this!! :-)\n. (Pretty please)\n. @knewter once you update the readme I'll click merge!\n. <3 <3\n. Could you add / change a migration to add the default instead please? Thanks!\n. Can you edit the patch (on github select the patch-1 branch and edit the file) to remove the !! then I'll merge this too?\n. Thank you! :)\n. (with my refinerycms hat on) we are officially very interested in forem and will be taking great pains to ensure the next version of Refinery CMS has perfect compatibility. Having said that, it's hard to make the edge easy to install. :-) (this is pretty much what @knewter has already said, but wanted to reiterate it).\n. ::Refinery::User\n.  By the time the next version of RefineryCMS that supports forem is released there will be. \nRight now I have too many things in my todo list to write one :(\n. I'm about to completely removed the will_paginate_monkeypatch from Refinery.\n. No idea, do you know?\n. Maybe @ugisozols knows\n. I put a patch into spreefinery in an initializer https://github.com/parndt/spreefinery that handles Kaminari plus Will Paginate\n. Is there a default scope that sets order by created at DESC? I ask because I find it strange that it'd be like this otherwise :)\n. @radar ?\n. I believe this is necessary and now you have me thinking about other project like refinerycms!\nThanks!\n. Thanks @filiptepper !\n. That doesn't seem right, we shouldn't be including our application helper that magically.\nPerhaps the instructions should tell us to do this manually.. for example:\nruby\nmodule ApplicationHelper\n  include ::Forem::ApplicationHelper\nend\n.  +1 - that's why we retired refinerycms-theming .. it was too hard to maintain.\nUsing built-ins is so much better.\n. Seems to do with pagination, specifically kaminari which is a runtime dependency of forem.\n. Like you could have caught it earlier!\n. You can see better with square eyes anyway, right?\n. Yea, it really would.\n. Thanks for fixing my fail :+1:\n. @frankel still happening?\n. Thanks for your help!\n. That is correct, forem files are kept inside the forem gem.\n. cc @Radar\n. Well, Refinery uses a heavily customised version, but yes.\n. I'm going to close this in favour of #55 because they're too similar :-)\n. # => true\n. So we'd want to use something like redirect_back_or_default(root_path)\n. Patches gladly accepted! :-)\n. @apocalyptiq Was this fixed by #65?\n. Ready to merge?\n. Which version of bundler are you using?\n. That's due to Rails' view inheritance.. it does make it interesting..\n. So the issue is that it's wrapping plain text with an HMTL pre tag?\n. Um is there any chance you can reword your commits to tell us what they did? It's pretty hard to debug later is the reason.\n. Weird, it seems like now there's two commits for everything... \n. I think that we can deal with the two commits issue when merging locally using rebase so will evaluate the change and get back to you..\n. No this one will do just fine :-)\n. Almost all the tests fail, I think because Category is now required and the factories have not been updated\n. Good question. \nI think it's something like:\nbundle exec rake -f spec/dummy/Rakefile db:drop db:create db:migrate RAILS_ENV=test && bundle exec rspec spec\n@radar?\n. Great work!\n. use bundle exec like it suggests. So instead of running rake forem:install:migrations run bundle exec rake forem:install:migrations\n. Can we please have tests for this functionality?\nThanks!\n. What do you think @radar ?\n. @radar none\n. Yay!!\n. Or you can just push more commits to your fork to the same branch\nwhich automatically updates the pull request\n. @radar should we get a test for this too?\n. @danneu can you help @regedarek please?\n. What about adding support for / fixing the things you mention before going and rolling your own? We would really appreciate the help.\n. I personally would love to see Forem as a robust base for many extensions that provide extra functionality that shouldn't go in the core. :+1:\n. That actually sounds a lot like http://refinerycms.com\n. The idea is that modules be 100% independent and use API style hooks\nfor communication.\n. Oh I get what you mean - every extension requires the 'refinerycms-core' module. Technically everything relies on refinerycms-core unless the extension needs pages, images, resources etc.\n. @nwmcsween Are you happy to work on this?\n. Can we look at orm_adapter\n. Please open a pull request if you want to tackle this!\n. Thank you :-)\n. Was it intentional to delete most of spec/dummy's migrations ?\n. Maybe when @radar wakes up he can comment :-)\n. Should this be a real delete or a paranoid delete (using some deleted_at column)?\n. \u0421 \u0420\u043e\u0436\u0434\u0435\u0441\u0442\u0432\u043e\u043c\n. Do you mean this bbaa8f57e267f6b00d7a5ce4af7b36ab38a65cbb breaks the build?\n. Can we make it work?\n. FYI @brixen \n. Allegedly, @knewter \n. Sounds like you had it under control. If you want to contribute a similar feature back to core please open a pull request :) Thanks!\n. @knewter @rizzah are you still interested in this? Did you end up implementing anything?\n. I'm not sure Atom is a technology that is useful in a Forum.\nJust kidding! This sounds great to me, with one caveat. It needs something in the readme that explains that it's there and that you can place an auto discovery tag in your <head> to make it magic.\n. Yes, a helper sounds perfect to me!\n. We should surely be able to have something like: \nforem.atom_auto_discovery_link_tag\n@radar @knewter what is your feeling on a \"forem\" helper?\n. Seems crazy to override the real method name Rails provides..\n. Inserting it seems relatively brittle, how do we ensure we get the right layout?\n. I'd merge this request if you were to please add a helper named: forem.atom_auto_discovery_link_tag and document its usage in the readme.\nThanks, you're wonderful :)\n. Or, if you (or Monique) think that name is dumb then you could rename the helper to something clearer :)\n. You have to add the helper to the application's helper.. here's how Refinery does it:\nhttps://github.com/resolve/refinerycms/blob/master/core/lib/refinery/core/engine.rb#L28\n. ```\nFailures:\n1) topics viewing a topic should have an autodiscover link tag\n     Failure/Error: assert page.has_selector?(\"link[title='ATOM']\")\n     MiniTest::Assertion:\n       Failed assertion, no message given.\n     # (eval):2:in assert'\n     # ./spec/requests/topics_spec.rb:153:inblock (3 levels) in '\nFinished in 10.92 seconds\n132 examples, 1 failure\nFailed examples:\nrspec ./spec/requests/topics_spec.rb:151 # topics viewing a topic should have an autodiscover link tag\n```\n. I'm running Ruby 1.9.3, what are you running?\n. +1 I'm crazy\n. Thanks :-)\n. @suciuvlad  it's still open but I have no idea if it's still an issue... @radar ?\n. I made this very hard to merge with my recent change 326327a9b4e6c76a783f5df22c6972d6ccedb836 sorry. \n. This makes forem unusable on anything less than 3.2.0. Could the dependency specify >= 3.1, < 3.3 ?\n. I do believe that'd work as apparently 3.2 is the last version before 4.0\n. If you do what the error message says and put this: \nForem.user_class = 'User'\n^ note the quotes.. then it should work. \nDid you create the forem.rb initializer or did we?\nThanks!\n. Ah, it was our fault. Thanks, Ryan.\n. How do you feel about writing a spec that ensures your expected behaviour remains and fails without your patch? :)\n. Very odd, I would have thought that this would lead to an improper route without the @forum attribute. Maybe we're not testing this page properly? Maybe both routes work? Weird!\n. Thanks for fixing this @jgadbois. :)\n. Agree, I think we should refactor it out and make it a task instead.\n. Oh no he didn't\n. Do we still intend to fix this with JS? :)\n. Odd, it's saying there are merge conflicts with this pull request. Can you please rebase against master?\nThanks!\n. Yeah, it now is clean.\n. Or was, sorry.\n. A helper would be better than introducing this conditional logic in the view :) I'm not sure how that allows customisation though. @knewter any thoughts?\nBesides Google, I'm pretty sure ordinary internet uses like titles to differ too.\n. @knewter this is Forem not Refinery ;-)\n. Yep..\n. Totally not implemented in the linked pull request unfortunately due to it overriding most of Forem... still looking to fix this issue. \n@glebm I tried to look at the specific commit you were mentioning but it's gone :'( did you mean https://github.com/glebm/forem/commit/e0d3262c0915a3973566f537742366ca6cb1fdde ?\n. Thanks.. Any interest in documenting it? :)\n. @JakeAustwick any luck?\n. Looks good to me! @radar? @knewter?\n. @knewter nice spelling ;) What do we need about Refinery?\n. @knewter :trollface:\n. Can't we use the built in uniq function for this?\n. Oh right we still support old :-)\n. In my opinion always nest like this :-) thanks!\n. So we have to manage updated_at manually? I suppose that makes sense.\n@radar?\n. I'm guessing because the hook that normally would is being bypassed?\n. Did it live\n. Merged in cd49c29 thank you!\n. I'm sorry but I don't understand. Those are files rails generates if you use MRI Ruby 1.9.x\n. No problem :-) thanks!\n. I don't always close  but when I do I DOUBLE CLOSE! ;-)\nThanks for fixing!\n. So wait.. nobody has tried this out?\n. @glebm did you end up looking at all the javascripts?\n. @glebm are you happy to take ownership of this issue?\nI think that all except backbone would see instant merges. Backbone is more of an overhaul change ;-)\n. I'm not certain how much I am a fan of this concept.. it makes the code quite defensive.\n. Thanks man :-)\n. Merge it like it's hot!\n@radar we gotta test that our CI is working every now and then, huh?\n. Solution seems good to me. @radar ? @knewter you agree?\n. As an aside, is there any particular reason you're using 1.8.7 over something much newer like 1.9.3? :-)\n@radar might know about the singleton_class issue based on: https://gist.github.com/1879321\n. I'm not sure if it's 1.8.7 specific :-)\n. It should totally be fixed\n. @radar wow! btw, isn't REE pretty much end of life? Shouldn't we test on 1.8.7 instead?\n. @radar as in, I did not even think that we needed to extend the kernel ;-)\nI'm all in favour of testing 1.8.7 in some way so +1\n. We made things attr_accessible a while back so should no longer be an issue.\n. Thanks!\n. Plus 25b2dacd83394c058001623449b6cde8a92edcd9 and 5dcbfbe66c3b1971c553d31aeacd735fd361b9c9 and 465eb99f59437de4f2ced907dfb572c2ad9c4d29\n. Couldn't we just use friendly_id for this?\n. It only overrides on the models where you want it to by specifying (for example): \nclass MyModel < ActiveRecord::Base\n  extend FriendlyId\nfriendly_id :title, :use => :slugged\nend\nI've been using it for years and it works well from my perspective. Of course I've been added as a collaborator to it to declare my bias ;-)\n. @glebm thanks :-)\n. I agree with @radar \n. An API like set_forem_page_title is not a premature abstraction from a technical debt perspective; it allows us to refactor the internals at any point while maintaining a consistent interface.\n. Here is what I did:\ngit pull --rebase origin master\ngit fetch jeremyong\ngit checkout jeremyong/user_subscription_preferences\ngit rebase -i HEAD~6\nI used HEAD~6 because there were 6 commits :-)\nThen I changed all 'pick' entries to 'squash' except the first one and updated the commit message to the following:\n```\nAdded user subscription preferences for auto subscribe.\nChanges:\n Added validation to ensure that a post has an associated user before checking for auto-subscription property.\n Added column to user table: forem_auto_subscribe.\n  - DEFAULT: false.\n  - Set true if user replies should automatically subscribe users.\n```\nNow, I have a single commit e482122af8a1baf93007223b576a4e35f3c90228 and so I went back to master and cherry-picked it.\ngit checkout master\ngit cherry-pick e482122af8a1baf93007223b576a4e35f3c90228\nThen, I set the dummy app up again (mine was out of date):\nbundle\ncd spec/dummy\nrake db:drop RAILS_ENV=test\ncd ../../\nrm -rf spec/dummy\nNow, I ran the tests and got 100% passing so I pushed:\nbundle exec rake forem:dummy_app --trace; bundle exec rspec spec\ngit push origin master\nHope that helps and demonstrates why maintainers should help with squashes ;-)\nFixed by e482122af8a1baf93007223b576a4e35f3c90228\n. No problem - really the only problem was when a few commits were added that didn't really do much or have descriptive commit messages :-)\nThanks for your contribution!\n. Not exactly. Clear both does not fix in all browsers\n. @avitus does prepending main_app. not work in this case?\n. Oh right.... current_user isn't actually a route but a resource. Would it be something like this:\nerb\n<%= link_to t('menu.profile'), main_app.user_path(current_user) %>\n. @radar issue resolved I believe\n. I know! What's up with that?\n. Looks good to me cc @radar @knewter \n. What about ActiveSupport::Concern\n. Wait - what sort of user are you talking about? I think of users like developers sometimes which I think is wrong in this case? ;-)\n. Are you able to help us to come to a solution? Thanks :)\n. Absolutely but we don't always have time to fix them straight away :(\n. The bottom of the page is where javascript is places on many, many websites so that the page loads before the scripts are evaluated -- it's supposed to make it more responsive for the users.\n@jgadbois do you have a good workaround that we could implement since you reported the issue? \n. Still an issue?\n. Seems ok but I skimmed it\n. Weird that we don't just use named routes \n. Yeah we could consider .js.erb cc @radar @knewter\n. The installer no longer generates migrations.. thanks!\n. I think the generator is out of date. Cc @ugisozols\nNote: refinery/generators doesn't exist anymore\n. @radar @knewter  what do you think about this feature?\n. Thank you. Any chance of a spec that fails before this change and passes after it?\n. Sure\n. The reason I ask for specs is so that the functionality does not get broken in future :-)\n. Is the output not HTML safe?\n. cc @radar \n. No it shouldn't be happening.\n. I think the logic sounds exactly backwards.\n. Correct, the way you just explained it sounds perfect.\n. @funkdified sounds like a bug in the logged out case. cc @radar @knewter \n. Ah, so we're both working on our Saturdays :-) Shame on us! ;)\n. Haha - at least it's overcast here.\n. Oh, bootstrap couldn't be implemented using forem's theming?\n. Please open a pull request if you wish to contribute this feature :) thanks!\n. Merged into 77fef19 thank you!\n. Thanks! Did you mean to target 1-0-stable branch for this?\n. wrong way around :D hehe\n. You're asking us to merge commits from your 1-0-stable into our master - is that correct?\nAt the top it says:\njuozasg wants someone to merge 10 commits into radar:master from juozasg:1-0-stable\n. thanks :-)\n. +1\n. I don't think 1-0-stable should include any new features just bugfixes.\n. Please use the second approach of incrementing 1-0-stable with patches from master :-) thanks\n. Thanks! How would you like to make screenshots of this so that we can see what's changing?\n. Merged into 020eb27 thank you!\n. If the action doesn't exist we shouldn't route to it cc @radar \n. Thanks for doing the PDI :-) Seems like a non issue then?\n. Merged into d3bf48a821877eb6b0cee3fe87c658cccd7a5b2f thank you!\n. @radar you broke the build with 505f10c\n. Wow, I'll disregard my fully written reply ;-) Thanks @radar \nI do wish Rails would add first class support for decorators.\n. Seems legit; thanks!\n. That's bizarre - Rails should be preventing that. Is the generator using rake railties:install:migrations (or the specific one for Forem) ?\n. Oh; I had assumed Forem was doing it intelligently like https://github.com/resolve/refinerycms/blob/master/core/lib/generators/refinery/cms/cms_generator.rb#L197-L202\nI guess not ;-)\n. @GeekOnCoffee I believe this is no longer an issue since the changes by the wondeful @jzahnd \n. Thanks!\nDo you think you could squash it down to one commit?\n. Legend!\n. @jzahnd  thanks very much!! I've merged your pull request into 6a46e7e3949b4694d6ba6728972ed1ab210106c7 and added f44662c to handle the superfluous comments.\nAppreciate your input :) thanks again.\n. Prepend your routes with main_app.\n. Often gems are released with backward incompatible changes in patch releases. We call these regressions and they're usually fixed once we let the author know of the problem who in this case is @ryanb :-)\nUnless, of course, a bug was fixed in CanCan that we were relying on?\n. Seems like the change should be reverted as this makes CanCan harder to use?\n. Thanks for this! Do you think you could squash this into a single commit please?\n. Thank you!\n. Yes the radio buttons do seem unnecessary. Are you able to pull-request them away please? :-)\n. I don't agree. I think we should have app/decorators instead\n. My reasoning:\n- Models live under app/models \n- Controllers live under app/controllers\n- Views live under app/views\n- Decorators live under app/decorators\n- Presenters live under app/presenters\n@radar I think Spree uses the conventions suggested by Kunal -- was this always the case?\nRefinery has been using app/decorators for a while.. I guess we didn't get the memo to synchronise.\n. Yes that is exactly how we do it in Refinery.\n. We can get around this entire debate if we load app/*_/__decorator.rb but I'm not sure about that.\n. Right you are -- that is what it does.. I'm mainly referring to the guide that comes with the patch.\n. 100% agree.\n. Correct so decorators live under app/decorators/\n. Thank you very much -- I've merged this into 646c3e0 :-)\n. Yes that would be wonderful @juozasg \n@radar yes legacy links still work fine - it just allows slugs to work too. You can simultaneously find things by id or by slug with FriendlyId.  Why yes I do help to maintain it.\n. It seems strange to me that topic.posts is complaining that posts is not a method on Forem::Post .. shouldn't it be complaining about a Forem::Topic ?\n. Type checking is a code smell ;-)\n. Hey any chance you can implement the changes please? Thanks!\nOh I see, you did! They were just buried :-) thanks!\n. Just to confirm - are you using the absolutely latest up to date code that has decorators support? It was only added in the last few days.\n. Support was added in #260 so maybe it's not perfect. cc @kunalchaudhari @radar\n. Yes the code itself looks fine to me.\n. I meant the code in this ticket :p\n. Does this work:\nrake railties:install:migrations\nrake db:migrate\n. Ah we have new migrations but of course existing users would get stung!\nHere is the new version of that file:\nhttps://github.com/radar/forem/blob/master/db/migrate/20111103210835_create_forem_categories.rb\nIf you replace the contents of the one you have under db/migrate/ with\nthat one I linked your problem should be solved\nThis is why seeding in migrations is so bad @radar\n. Can you elaborate further on why you would want anonymous users creating topics? Thanks!\n. I'm curious:\n- How would you link posts / topics to particular people? \n- How would you know who is posting?\n- Is this a functionality that you would actually implement and use?\n. @radar @knewter  would love your opinions\n. Try forem.forums_path\n. Yeah that line is 100% essential for any forem routes to work.\n. Wow how did our tests not notice?\n. Someone should.\n. Please file this issue at forem-redcarpet\n. On the face of it, this is because you have forem mounted at /forums\n@radar should this behave any differently?\n. Currently it is based off the title parameterized\nHello World\nhello-world\n. Thanks @ch000 !\n. Fixed by merging your patch into 707e9519419b3c405c849e7c16f406acb1dd659b - thanks!\n. Closing due to this PR having too many commits and being stale - please open a new one if you wish - thanks!\n. How would you feel about tackling this implementation too?\n. Sure to set it to approved by default simply:\nrails generate migration change_default_value_for_forem_status_to_approved\nedit the migration and put\nruby\nchange_column :forem_posts, :forem_status, :string, :default => 'approved', :null => false\n..or very similar..\n. Merged into f5d5bb48008a03637e35311e9c257f233821555c and 6500c94 thanks!\n. I for one would like to see Jasmine tests in place for complete JS\nchanges like this..\n. What is wrong with being explicit?\n. I am in favour of not introducing more dependencies if it is just\nsyntactic sugar.  If we need to do something that squeel can do and\narel can't then it is a different story but I don't think this is the\ncase.\n. thanks :)\n. What do you mean?\n. k, let's no more\n. Sweet statement I wrote!\n. @giedriusr thanks - can you point to examples? Every single string should be inside YML so that it can be localised. That's the goal :-)\n. Thanks - I've merged this into 5673627 :-)\n. You have a syntax error.. You can't pass an argument to a symbol as it\nis not a method. You need to reference another method e.g. one that\ncalls unsubscribe_user(self.id) that you write instead.\n. @alepore thanks.. so to confirm, I should be able to reproduce this with a brand new Rails application using a Refinery edge template installation rails new test_app -m http://refinerycms.com/t/edge and by adding gem 'forem', github: 'radar/forem' to its Gemfile?\n. Basically remove any overridden files until the error goes away, then\nyou can identify what exactly is broken.\n. @radar is this because both Forem and Refinery are decorating? We need a common solution!\n. Ideally Forem would not get in the way of compiling on Heroku when using:\nruby\nconfig.assets.initialize_on_precompile = true\nThere is a lot of misinformation around about \"Heroku requiring this setting\" which is not strictly true.. Heroku only requires this when you're using an application that incorrectly accesses the database before the application is initialized. It's good to avoid this on any Rails application.\nDo assets fail to precompile on a default Rails application with Forem included or is this coming from something else in your Gemfile?\nThanks!\n. Does it work when set to true? (The default)\n. We should have it, if we don't!\n. Yep please initialise the environment on precompile.\n. @radar It doesn't have to be false; some applications actually require you set this to true (I thought we did?). That's why Heroku have:\nheroku labs:enable user-env-compile\n. Please try removing the :as option\n. The relevant section was placed inside the issue comment, are you having this issue @cwise ?\n. So previously it wouldn't work if you specified Forem.user_class = \"::Admin\" ?\n. I've discussed this with @radar and we wonder about using:\nruby\nObject.const_get(Forem.user_class)\nTo get around the issue without having to introduce all this code. @radar is investigating further.\n. @radar @kot-begemot I stlll think some of the tests are valuable.\n. Great stuff :-)\n. Can we please use pull requests for changes to master as your last commit broke the tests?\n. @radar This code still has issues with namespaced constants as is the case with #335\nSee http://stackoverflow.com/questions/4455676/how-do-i-refer-to-a-submodules-full-path-in-ruby#comment7410257_4457315\nA constant like Refinery::User will never work, will it? \nIt appears to work better when I specify Refinery.const_get(\"User\") though.\n. Looks like in the emojify gem this folder is /assets/emojis/smile.png @radar @knewter c/d?\n. That commit is likely the problem!\nHow do we get gemoji in the assets group?\n. What happens if you place Refinery after Forem in the Gemfile and what happens if it's before?\n. Thanks - just reviewed it and added a couple pieces of feedback.\n. @shhhhh If you can upload a sample application that exhibits the problem I'm more than happy to take a further look for you, free of charge :-)\n. Sure, thanks, feel free to make things more consistent for us :)\n. @radar does it replace this PR?\n. Wow you took control of the PR?\nIt shows me that @shhhhh opened this PR 5 days ago.\nOh I see you converted an issue to a PR.\nNicely confusing!\n. Unfortunately it completely bombs CI\n. Did you update things and forget to change templates? Forget migrations? Dunno.\n. Good work!!!1\n. Maybe some caching is killing things?\n. I'm confused - can you explain what you're after? \n. Duplicate of #344\n. Hi can you please rebase against our branch? Too many commits. Thanks!\n. @radar given this should we stick with gemoji?\n. To me this seems like a step backward on Gemoji's part\n. Not sure how I feel about the project given how closed off it is and given the commit messages don't make things any easier to understand what has changed.\n. Okay after going through the changes it seems pretty reasonable and these are the things we can do:\n- document the rake gemoji take\n- add the Emoji to the assets paths like so:\nruby\nconfig.assets.paths << Emoji.images_path\nThen have them compiled to public on deploy.\nconfig.assets.precompile << \"emoji/*.png\"\nThe last option is my favourite. It means this pull request will have to completely change though.\nWe will have to figure out what config.assets.precompile means for Forem. Probably we just have to create an initializer or something.\n. So what should we do?\n. What about:\nself == topic.posts.first\n. I'm not sure if it's needed. WDYT @radar @knewter\n. Seems legit :+1: \n. Wow we must have great test coverage.\n. /me jumps on the opportunity to close an issue\n. Perfect thank you!\n. It is a different database. Did you create any data on production?\n. Can you show us a screenshot with what you mean, please?\n. Do you have forem in your Gemfile?\n. So to be clear this isn't emoji at all?\n. I'd also like to know the answer to this question of how @github are using it.\n. @josh @juliamae sorry to rope you in but we have to ask; how is GitHub\nusing the Emoji font legally in Gemoji? Thanks!\n. Nothing more restrictive than an MIT license please (aka no GPL)\n. CC without attribution, right?\n. Wow, this is a huge changeset.\n. Could you move all un-related changes to a separate branch please? This is too hard to review :(\n. There are a lot of commits.. and merge conflicts.. can the commits be squashed and merge conflicts resolved by rebasing against our master please?\n. Why did factories move from spec/support/factories to spec/factories?\n. @phlipper the tests still fail..\n. Hi, the tests have been failing on this one for a while and it's not clean to merge due to further changes in the master branch sorry. Hope you're able to fix it up because these changes are great.. I'd love to support jruby and rbx!\n. Merged via rebase - thanks.\n. As it's a rails generator just run:\nrails destroy forem:install\nIt'll do the opposite of everything.\n. @sheam thanks for the confirmation. Hopefully one of us will be able to reproduce this soon :) in the mean time if you find any workaround please let us know as it helps with debugging the issue. Thanks!\n. Can you double check that you're running friendly_id version 4.0.9?\n. The latest should show as 1.0.0.beta1. \nWe don't really use the version in Forem. :)\n. I'm reproducing this issue with can_read_forem_forums?.. I'll see if I can fix it.\n. Please try bundle update forem, your problems should be solved.\n. OK Confirm. This was caused by friendly_id not being version 4.0.9.. see my successful reproduce:\n```\n12:03:20: [master\u00b1|1.9.3p327] ~/sandbox/apptest1_forem$ rake forem:install:migrations\nNOTE: Migration 20120616193446_add_forem_admin.rb from forem has been skipped. Migration with the same name already exists.\nNOTE: Migration 20120616193447_add_forem_state.rb from forem has been skipped. Migration with the same name already exists.\nCopied migration 20130115230338_add_forem_auto_subscribe.forem.rb from forem\nCopied migration 20130115230339_add_friendly_id_slugs.forem.rb from forem\nCopied migration 20130115230340_rename_title_to_name_on_forem_forums.forem.rb from forem\n12:03:38: [master\u00b1|1.9.3p327] ~/sandbox/apptest1_forem$ rake db:migrate\n==  AddForemAutoSubscribe: migrating ==========================================\n-- column_exists?(:users, :forem_auto_subscribe)\n   -> 0.0006s\n==  AddForemAutoSubscribe: migrated (0.0092s) =================================\n==  AddFriendlyIdSlugs: migrating =============================================\n-- add_column(:forem_forums, :slug, :string)\n   -> 0.0005s\n-- add_index(:forem_forums, :slug, {:unique=>true})\n   -> 0.0005s\n-- add_column(:forem_categories, :slug, :string)\n   -> 0.0003s\n-- add_index(:forem_categories, :slug, {:unique=>true})\n   -> 0.0003s\n-- add_column(:forem_topics, :slug, :string)\n   -> 0.0004s\n-- add_index(:forem_topics, :slug, {:unique=>true})\n   -> 0.0042s\n==  AddFriendlyIdSlugs: migrated (0.2223s) ====================================\n==  RenameTitleToNameOnForemForums: migrating =================================\n-- rename_column(:forem_forums, :title, :name)\n   -> 0.0051s\n==  RenameTitleToNameOnForemForums: migrated (0.0051s) ========================\n12:03:44: [master\u00b1|1.9.3p327] ~/sandbox/apptest1_forem$ cat Gemfile.lock  | grep friendly_id\n      friendly_id (~> 4.0)\n    friendly_id (4.0.9)\n``\n. Hmm okay. I think best for you is just to manually change forem_forums to have name and not title thus solving this issue for you. I don't think that others will get this, personally. :-)\n. Your model shouldn't be able to cause this due to our namespacing.. unless your model was calledForem::Category`.\nCan you please give us a full trace of rake db:migrate --trace?\n. What about: \nrake forem:install:migrations\n. Right\u2026 because the installer failed and it doesn't know what is your Forem.user_class  \nSo unless we can get the installer to run I'm not being very helpful sorry.\nAre you able to take your application back to before you included Forem and try again or give us steps to reproduce this?\n. Why is that? The gemspec says ~> 3.1\n. @djee problem solved.. please use bundle update\n. Excuse me?\n. @radar @knewter @robyurkowski can you forsee any issues with this patch?\n. Plus then we'd have support for any sub URI cleanly and with only exposing specific routes.\n. Thanks!\n. Thanks a lot @mauriciopasquier :+1: \n. Thanks a lot :)\n. @fracek that's correct, en.yml contains all the strings. It's the only one that all the maintainers speak unfortunately.\n. Thanks for this solution.\nYour code has not been merged! \nWait.. I think I meant \"Your code has been merged\" ;-) hehe..\n. If you'd like to transfer the gems to us you can do so. For example, for me:\nshell\ngem owner:add gemname --email parndt@gmail.com\nI can handle it from there :smile: \n. Thanks!\n. Notes: Seems like a problem with a decorator at first glance\n. Something here\nhttps://github.com/radar/forem/blob/master/app/decorators/lib/forem/user_class_decorator.rb#L7\n. Not currently but I can try to reproduce tomorrow or the next day. I\ndon't have a computer at the moment :)\n. @widexposure please update your ruby to the latest patch level. I seem to remember lots of segfaults with p362\n. Grazie!\n. Thank you :)\n. The specs seem happy in sqlite but no other DB.\n. ac59874f696be83080df744a9f57dcb830dd2af2 broke compatibility\n. @phlipper any chance you could rebase this against the current master (some of the functionality has been refactored already) and fix the DB incompatibilities please?\nNote to future maintainer/@parndt: close this if another few weeks goes by without it being rebased and having passing tests\n. Thanks - restarting rails when working with engines fixes many issues.\n. How?\n. The Wiki is editable by everyone.. would you like to make it better for us pretty please? :-)\n. Can you add it?\n. So to clarify do you want an empty forem.css file to always be included? I am not sure about doing that. It adds overhead to every request.\n. Would you like to tackle this feature please? :heart:\n. Hmm.. can you write a failing test for this please that reproduces this in Forem's default codebase?\n. Or\nalias_attribute :to_s, :name\n. What would this involve? Does it cost? If not, can you open a pull\nrequest that does this please?\n. English is only 93% translated. We should reconcile that before proceeding.\n. I have tweeted for help :-)\n. What's the purpose (use case) of reordering categories?\n. Agreed, use the master branch and run ensure in your Gemfile you have:\nruby\ngem rails, '~> 3.2.13'\nThen run:\nshell\nbundle update rails\n@radar @knewter should we even keep 1-0-stable around? What's it for?\n. It has been thusly deleted.\n. This doesn't strike me as an issue with Forem but a Rails routing\nquestion. I think you will get a better answer if you should ask this\nquestion on Stackoverflow :-)\n. No that's the controller named forums under the mounted engine of the same name\n. @radar so when we merge this what happens to the localeapp stuff? How is that kept syncronised currently?\n. @radar @knewter I have no idea why we didn't merge this one\n. Extremely unlikely. The only situation is where someone deleted a post you'd need to renumber each one.. or when you changed how many posts per page.\n. @knewter yeah, you're right.. the per_page should be able to be configurable which means that any pre-calculation of it is not appropriate. Is there any way that we can just provide a routing helper that does all of this?\n. Good morning Vietnam!\n. Does this have to happen in the view template?\n. Has it ever worked before?\n. What changed? Can you please give a little more information to aid in debugging?\n. Okay, I can reproduce using my own means.\n. I fixed the issue, please run bundle update --source forem and the problem should be gone.\n. This is confusing - is there a way that we can access your application (like, can you open source it) to aid us in reproducing this error?\n. @oleander thanks for this. Do you think the following solution might work?\ndiff\ndiff --git a/lib/generators/forem/install_generator.rb b/lib/generators/forem/install_generator.rb\nindex 69296a9..49e2d96 100644\n--- a/lib/generators/forem/install_generator.rb\n+++ b/lib/generators/forem/install_generator.rb\n@@ -50,6 +50,7 @@ module Forem\n         else\n           puts \"Adding forem initializer (config/initializers/forem.rb)...\"\n           template \"initializer.rb\", path\n+          require path # Load the configuration per issue #415\n         end\n       end\n. The installer still works fine with the line in there so I think we should give it a go!\n. @oleander I pushed 7447c7e which is that diff. If you can still reproduce the issue could you bundle update --source forem and give it a go please? You may have to delete config/initializers/forem.rb or something.\n. Seems related to localeapp integration to me\n. Note the double / in the following API call. This looks like the project id is not included in the URL properly:\n** [Localeapp] API CALL: get https://api.localeapp.com/v1/projects//translations.yml?updated_at=1367360407\n. No, it should just work from your perspective. I'm just providing debug information :)\n. Forem is depending on localeapp, so in your project you are using it. If I could help immediately then I would have. :)\n. @nazrulcse the nature of an issue means that if people can help to provide workarounds they will help.. you don't need to request it. We're not ignoring you, we just don't yet know the answer.\n. I can at least reproduce this now. The downside is it's blocking me from working so I guess I'll look into it. :)\n. Nah you probably just don't have a JS runtime installed on that machine. See ExecJS docs.\n. I think I caused this in f797f289b1e578c0c0163285aa8dc76a88ae26ac\n. @boatmon0 @nazrulcse please run bundle update --source forem\n. Anything with logic ;-) it's hard to reuse parts of Forem without reimplementing things. Presenter objects etc would make for a more fun time. I am addressing things such as this with my latest PRs and there is much more to come. :-)\nOn Tuesday, 28 May at 3:26 PM Ryan Bigg wrote:\n\nAny particular hotspots that you have in mind?\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/417#issuecomment-18496167\n. Yes you can now. In my application I put config/initializers/localeapp.rb with:\n\nruby\nLocaleapp.configure do |config|\n  config.polling_environments = ['development']\n  config.reloading_environments = ['development']\n  config.sending_environments = ['dvelopment']\nend\nAnd the 406 error from #416 came back.\n. There are plans to support it - want to help?\n. Only one way to get experienced :) Thanks!\n. :heart: :heart: :heart: :+1: \n. The sync of localeapp\n. @radar thoughts, comments?\n. Localeapp is dead, long live Forem without Localeapp!\n. @knewter Ryan's probably busy and has inbox 5000 so it's up to you :)\n. Interesting. Probably our users would have to be soft deleted through something like paranoia. What do you think, everyone else? @knewter @radar \n. How would you like this to operate?\n. I woud like the rich text editor solution which allows you to put a picture anywhere. This may be best achieved with an extension to Forem. I would like to avoid using paperclip in favour of something more dynamic like Dragonfly.\nThoughts?\n. We'd welcome a pull request with open arms. The logic in skip_pending_review could probably be extended to handle the notification case too.\nhttps://github.com/radar/forem/blob/master/app/models/forem/post.rb#L113-L115\n. In general seems good. \nOn Tuesday, 28 May at 3:19 PM Ryan Bigg wrote:\n\nPotential fix for #427.\nI think this is a good way to deal with deleted users. @knewter, @parndt, OK?\nYou can merge this Pull Request by running:\ngit pull https://github.com/radar/forem niluser-pattern\nOr you can view, comment on it, or merge it online at:\nhttps://github.com/radar/forem/pull/431\n-- Commit Summary --\n- Implement 'Nil User' pattern to deal with deleted users\n-- File Changes --\nA app/models/forem/concerns/nil_user.rb (13)\nA app/models/forem/nil_user.rb (11)\nM app/models/forem/post.rb (3)\nM app/models/forem/topic.rb (3)\nM spec/requests/posts_spec.rb (11)\nM spec/requests/topic_listing_spec.rb (20)\n-- Patch Links --\nhttps://github.com/radar/forem/pull/431.patch\nhttps://github.com/radar/forem/pull/431.diff\n. My only gripe was the view complication.\n. Can you wrap the call to the mailer and its predicate inside methods? \n\ne.g.\n``` ruby\nprotected\ndef create_successful\n  deliver_moderation_notification if deliver_moderation_notifications_for_user?(@post.topic.user)\n  # what is currently in the create_successful method\nend\ndef deliver_moderation_notification\n  ModerationQueueMailer.new_post(@post).deliver\nend\ndef deliver_moderation_notifications_for_user?(user)\n  user.forem_moderate_posts?\nend\n``\n. This has made me think further around moderation.. is the only moderator really the@post.topic.user? Does this user want to be emailed? Should we have a list of moderators?\n. cc @radar @knewter \n. That's great that you're comfortable forking everything.. but not everyone wants to do this as it is far easier/safer/maintainable to just decorate the class and override one method than to have to modify unrelated functionality. The ultimate would be to extract the entire thing into a single responsibility class likeNotifiesModerators` or similar which took in the post and handled the entire process as this is a responsibility that doesn't ultimately belong in the controller. \nYou may have to take my word for it that making the software more maintainable makes our lives a lot easier.. chalk it up to lessons learned over 6+ years of open source programming if you like. :smile:\n. So if we're simply deciding whether to moderate the current user's posts we really can just pass forem_user instead of @post.topic.user is that correct?\nruby\ndef create_successful\n  deliver_moderation_notification if deliver_moderation_notifications_for_user?(forem_user)\n  # what is currently in the create_successful method\nend\n. By the way I should mention that I love the feature (which is why I'm paying so much attention to it) I'm just trying to reduce future headaches for us. :heart:\n. Improved!\n. This is an obvious place where we can maybe DRY up the entire moderation email process, given that both controllers are doing remarkably similar things.  But we can do that later.\n. Over to you again @radar \n. Is that the entire stack trace? Have you done anything custom? Is initialize_on_precompile set to true?\n. Set initialize_on_precompile to true \n. And then enable user-env-compile\n. OK so CI randomly fails since maybe b44bd73744413602759a817e48ca78fecce97b4b\n. Merged it.\n. @knewter it's a lot huh.\n. Yeah, I did a few more commits..\n. Could this be achieved by overriding this method in your user's class? https://github.com/radar/forem/blob/master/lib/forem/default_permissions.rb#L32-L36\nruby\ndef can_reply_to_forem_topic?(topic)\n  can_read_forem_forum?(topic.forum) && true # or some condition in place of true\nend\n. What alternative are you proposing?\n. Can you send this as a pull request please?\n. @radar confirm?\n. Instead of using \nerb\n<%= @user %>\nWe should use \nerb\n<%= @user.name %>\n. The problem we're trying to solve is that we're using your user model and decorating it with particular methods but we don't know if you even have a name field on your user. So, we'd need to have a method particular to Forem that gets us something meaningful to display in place of a user. We decided on to_s but is there a better option that we could adopt instead?\n. @radar this wouldn't have happend with HAML :trollface: \n. Thanks @jugyo :thumbsup: :sunglasses: \n. @knewter Ryan would never go for it :wink: \n. Indeed.\n. If you could all sign my petition to bring backtick I'd really appreciate it.\n:laughing: \n. I think this is fine without a test; thanks!\n. Legend!\n. @daniely what about like the one we have?\n. As far as I'm aware rspec deprecated request specs in favour of feature specs.. is that inaccurate?\n. Honestly I tend to agree. Localeapp hasn't been that helpful and it isn't the smoothest integration.\n. Yes please. However, we did get some improved translations out of it so hopefully we can export those or whatever.\n. We did this in Refinery but with a setting but we only had one route /refinery.. I think i18n would be the best way for this stuff.\n. pong\n. I think that either more commits or force push is fine. \u00a0I guess more commits would preserve the discussion until a final rebase + force push when everything is signed off but keeping it clean also allows us to merge whenever it\u2019s ready, so it\u2019s up to you.\n. Because it\u2019s a major implementation of Ruby? Why are we even supporting MRI?\n. @yas375 done, 05b186c\n. Likely bugs.. the error about not being able to find with id=default is likely FriendlyId's API change.\n. So to confirm we're not supplying an icon?\n. @radar how can we get rid of LocaleApp?\n. Thank you!\n. Thanks for this, could you please squash your commits into a single commit so that the git log can be a little clearer regarding this feature? :heart:\n. Dankesch\u00f6n..  @radar @knewter wdyt?\n. Stack trace not showing for me.\nAre you running threadsafe?\n. In your config/routes.rb file just put (before your main routes):\nruby\nForem::Engine.routes.draw do\n  # your route here\nend\n. I don't love it because if you mount it at the root then you're site.com/1/topics/5\n. @radar OK then\n. @Aselox what exactly does it say?\n. Full stack trace, please\n. c\u1ea3m \u01a1n b\u1ea1n :+1: \n. Ah, you may have issues with Refinery. Nobody's taken the time to upgrade that yet to not use attr_accessible. cc @ugisozols\n. Sure, can you please rebase this into a single commit?\n. this should be pl not en :D\n. Could you instead do this like:\nruby\ntext = \"#{time_ago_in_words(post.created_at)} #{t(\"ago_by\")} #{post.user}\"\n. Can you please use scope for these (and any others like it)?\nerb\n<%= t('edit', :scope => 'forem.admin.forums') %>\n<%= t('delete', :scope => 'forem.admin.forums') %>\n<%= t('forum', :scope => 'forem.admin.forums') %>\n<%= t('topics', :scope => 'forem.admin.forums') %>\n<%= t('posts', :scope => 'forem.admin.forums') %>\n. Same as https://github.com/radar/forem/pull/45/files#r120751 because the way you have it there will be no space between the two processed strings.\n. Same as https://github.com/radar/forem/pull/45/files#r120752\n. Same as https://github.com/radar/forem/pull/45/files#r120752\n. Same as https://github.com/radar/forem/pull/45/files#r120752\n. Same as https://github.com/radar/forem/pull/45/files#r120752\n. Same as https://github.com/radar/forem/pull/45/files#r120752\n. Same as https://github.com/radar/forem/pull/45/files#r120752\n. Did you forget to translate this:\nruby\n:confirm => \"Are you sure you want to delete this forum?\"\n. No problem, glad you're doing this!!! :-)\n. This should be de\n. This should be pt-BR\n. can you avoid hardcoding the table names e.g. \"forem_forums\" ?  For example you could use \"#{Forem::Forum.quoted_table_name}.*, #{Forem::Category.quoted_table_name}.name AS cat_name, #{Forem::Category.quoted_table_name}.id AS cat_id\"\n. This whitespace doesn't appear necessary?\n. indentation seems off for these items\n. I don't get why this is necessary to use SQL. Perhaps:\nruby\nForem::Category.reset_column_information\nForem::Category.create(:name => 'General')\nThough it should really be in a seed.\n. Why does it matter if there are any or not? :-)\n. The category that you've seeded may not be id 1, maybe try:\nruby\nForem::Forum.update_all :category_id => Category.first.id\nor:\nruby\nForem::Forum.all.each do |forum|\n  forum.category = Category.first\n  forum.save\nend\n. Awesome, glad to be able to show you :-)\n. Yes but my point is that regardless of whether forums exist at this step the next command won't change so it doesn't need to be inside an 'if' statement. It's pretty minor :)\n. You're missing .name i.e. #{Forem::Category.quoted_table_name}.name as cat_name\n. Can you please remove the extra two spaces? (it helps keep everything consistent)\n. In Ruby, we have the unless keyword instead of \"if not\"\nAnd actually for this case you'd be better off with:\nlink_to_if Forem.enable_user_profile_links, post.user, [main_app, post.user]\n. Could the setting be called user_profile_links (aka without \"enable\")? I find it reads better.\n. Can we use this here instead?\nruby\nredirect_to [@topic.forum, @topic], :notice => t('edited', :scope => 'forem.post')\nThat sorta redirect code is built into Rails now\n. We should probably use a helper here, for each line.\n. Can you please change this to a method like by_created_at now is since 326327a9b4e6c76a783f5df22c6972d6ccedb836? :)\n. Can you please change this to a method per 326327a9b4e6c76a783f5df22c6972d6ccedb836?\n. this should be fr:\n. which I'm guessing you just noticed at the same time!\n. can simply be:\nruby\nself.user.update_attribute(:forem_state, 'approved') if self.user && self.user.forem_state != 'approved'\n. You're changing the precedence by using and (note we don't use or we use ||)\nruby\n@topic.user && @topic.user == forem_user\n. if avatar_user_method just returned :email by default then you wouldn't need the conditional logic here at all :-)\n. By this, I mean that avatar_url would need to be modified to handle all cases automatically.\n. why?\n. why?\n. There's a lot of commits, can we squash?\n. Absolutely we can do that on our end.\n. why ree? It's considered end of life and is compatible with 1.8.7\n. I guess this probably came from master, I've just removed that in 9e15e572fba5afb0f7e4e011025aab1e9da863c5\n. what is this?\n. 3 before methods for 1 test? What's going on here?\n. should be in your ~/.gitignore\n. this could probably be refactored with @radar's blessing to:\nruby\nif moderation[:moderation_option] && post = Post.find_by_id(post_id)\n. Do you add it to every project you work on?\n. This shouldn't be present..  :-)\n. Please make this app/decorators/models/forem/post_decorator.rb\n. Please make this app/decorators/controllers/forem/posts_controller_decorator.rb\n. You can use find_each here instead of all.each\n. Can you please move this require to each model that uses it instead?\n. I'm :+1: on this change. No records should be added to the database in a migration.\n. Thanks a lot :-)\n. This will break support for deployment to sub URI\n. Please don't do this :-)\n. Why don't we respond with 404 then? :-)\n. Yep a 404 seems reasonable to me -- @radar @knewter ?\n. You should disable that ;-)\n. I moved this -- note my rename above:\nlib/forem/user_class_extensions.rb \u2192 app/decorators/lib/forem/user_class_decorator.rb\n. Can you please use Ruby 1.8 hashes here? Thanks.\n. Can you please use Ruby 1.8 hashes here? Thanks.\n. CI=true is already set by Travis :)\n. This should be jruby-18mode\n. For things like this we should just be able to specify with a leading period:\nerb\n<h2><%= t('.new') %></h2>\nI18n should figure out the rest of the namespace based on the view path forem/admin/categories/ -> forem.admin.categories\nI'm not sure why it's under category in the first place and not categories. This breaks conventions. If I did it, sorry.\n. OK, I'm keen to have this fixed before we merge this though as people do use the master branch as a reliable source (has worked so far!)\n. Makes sense to me.\n. This and the position calculation don't belong in the view. :)\n. this is specified in spec_helper\n. :+1: \n. Thanks for documenting this :+1: \n. Are these really necessary? We can see you creating the associations above. What are they for?\n. Normally a NilUser would make the view less complicated ;-)\n. This should go in create_successful so that people can easily override this part..\n. This should go in create_successful so that people can easily override this part..\n. Yeah, I know. Otherwise it's:\nruby\nif (!topic || topic.persisted?) && can?(:create_topic, forum)\n. I wonder if this could be:\nruby\ncontext.image_tag \"emoji/#{$1}.png\", :alt => $1, :style => 'vertical-align: middle', :size => '20x20'\n. Believe it or not, I got failing specs\n. The logic still does my head in either way. If you want to investigate why this could be called without a topic I'm interested.\n. I'm trying really hard to get rid of our dependence on ivars, especially in partials where they specifically don't belong.\n. Yes; ran out of time and the feature specs covered it. I'd like to move as many as possible to the faster presenter specs though.\nHelp appreciated!\n. This means we don't need the .all anymore\n. This belongs in your ~/.gitignore\n. Can you please use two spaces for indentation?\n. ",
    "knewter": "So I just pushed that second commit, I didn't intend it to be merged in this pull request by any means.  I don't know why that was added.  I suppose I should make feature branches and then that wouldn't happen, rather than a pull request just from master somewhere?  I meant the pull request to just reference the one commit.\n. I'm going to close this pull request just because I'm sick of stuff I didn't want on it being on it....le sigh, I'll try better next time.\n. Also added classes - 'locked' and 'unlocked'\n. Maybe.  I'd also want to keep track of when the views happened, because in a forum there's a lot of value in 'highlight posts since my last visit' etc.\nWe've sort of tended to prefer inserts over updates based solely on experience.  I'm not terribly concerned about the size of this table (it's a tiny bit of data).  I do need to add in timestamps I realized just now, can't believe I left those out.  Pushed that commit.\nAnyway, this gives more data.  I'd be fine with a refactor, but I always prefer more data over less, and massive numbers of simultaneous updates to a table in a very large project we work on led to random and hard to track down row/table locks in the database.  Inserts never cause this.\nAnyway, thus went my reasoning at least.\n. No prob at all.  You can also then do nice little rollup graphs (which forums, topics get the most traffic between 2AM-4AM on the weekends?)  But yeah, glad to have someone commenting on my code.  Discussion is fun.  Do you have any interest in hopping in FreeNode#forem ever?\n. So I need to mess with this some more, will re-open the request.  Some specs are failing - don't believe they were before, but it might be an intermittent sort of thing.  Researching.\n. Fixed the tests (bug was introduced by an innocuous-seeming change that I did not test afterwards, which should teach me a lesson but likely won't).  Also added a test to verify that it actually creates a view record.\n. I guess I need to refactor it to do the view counting in a single row per user....but it sort of doesn't make full sense to me yet.  For my use case, we also want to track views by not-logged-in users - would I just have a single row then without a user id and update that like I would a user's view row?  Seems the best I could do - don't know that it's a terrible idea.  Thoughts?\n. Meh, there's some non-view stuff in here but I wish you'd just merge it :)  This stuff works now as described.  I need some help on the spec because sqlite's being a dick with nested transactions, so there's one pending spec (that works but I can't show it for some reason) and I turned off transactional fixtures, so that might upset you :)  PLZ help with the tests?\n. OK, I did it.  Sorry it took so long :)\n. Oh hey you merged it.  I thought scary conflicts kept that from happening :)  Awesome.\n. simon,\nit probably won't be a really painless integration until refinery 1.1 comes out because of the issues in refinery edge gemspecs currently.  I can tell you, I've got 3 sites deployed that integrate a refinerycms membership engine (not quite the default one) and forem, and it does work after fiddling.  But yeah, it's not yet quite drop-in easy :)  We're working on it, and thanks for the detailed bug report.\n. @pommesgabel: You can find a gist here for a working refinery master / forem integration.  It's got stuff in it you don't need, I've tried to delete them in the most recent edit of the gist: https://gist.github.com/1116121\nI think the biggest hurdle atm is refinerycms-generators and seo_meta, which should be fixed with this Gemfile.\nAnyway, just so you know it's not a very tough setup right now, it's just not the sort of thing I'd want to document, rather than just waiting for refinerycms 1.1 to come out :)  If you're interested in playing with the bleeding edge, this should get you on your way :)\n. @parndt what's the rory story on this issue these days?\n. I do not.  We run pretty specific versions of both projects in production at present :-\\\n. refinery master's using will_paginate again?  I didn't realize.  Anyway, nice to have forem work with apps using will_paginate I guess :)  I would think that there'd be some value in one or both of those gems doing something like this to resolve conflicts right?\n. Would it not be possible to build this as a plugin or overlay on forem\nthat, when required, made it support mongo rather than activerecord?  If\nnot, we could consider a more high level strategy for abstracting out the\npersistence layer.  I'm of the opinion that leads to better code anyway\nand I have some experience doing this with plutus (though we've not yet\ngotten my company's work on that point merged).\n. In general, I prefer to write code these days that is\npersistence-mechanism-agnostic.  It's not 'idiomatic' rails and it's a bit\nmore verbose, but I feel that the resulting code ends up just being\nbetter.  My $0.02\nOn Thu, Aug 30, 2012 at 1:22 PM, Ryan Bigg notifications@github.com wrote:\n\nWouldn't you be able to use something like orm_adapter to provide support\nfor both ORMs? I haven't looked into it yet. Just an idea.\nOn 30/08/2012, at 18:49, Juan Felipe Rinc\u00f3n notifications@github.com\nwrote:\n\nI haven't dug into the code for a bit, and there have been\nnon-insignificant changes in the main branch that may make what I'm\nwriting\ninaccurate, but our experience getting forem to work with\nActiveModel/Mongoid pointed to the fact that at the very least, all of\nthe\nmodules needed to be touched in some way to establish the kinds of\nrelationships Mongoid supports, and there was some minor amount of\nmodification to finder/criteria language to make it work reliably.\nThe ideal approach would be going through all of the finders/criteria\nlanguage in the main branch, identifying those that would require a\nrewrite\nto support mongoid, and determine if there is a way of writing them so\nthat\nthey are ORM-independent.\nOn Thu, Aug 30, 2012 at 12:12 PM, Josh Adams notifications@github.comwrote:\n\nWould it not be possible to build this as a plugin or overlay on forem\nthat, when required, made it support mongo rather than activerecord?\nIf\nnot, we could consider a more high level strategy for abstracting out\nthe\npersistence layer. I'm of the opinion that leads to better code\nanyway\nand I have some experience doing this with plutus (though we've not\nyet\ngotten my company's work on that point merged).\n\u2014\nReply to this email directly or view it on GitHub<\nhttps://github.com/radar/forem/issues/47#issuecomment-8164723>.\n\u2014\nReply to this email directly or view it on GitHub.\n\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/issues/47#issuecomment-8169218.\n\n\nJosh Adams\nCTO | isotope|eleven http://www.isotope11.com\ncell 215-3957\nwork 476-8671 x201\n. Nice code.  Merges cleanly into master atm.  Works as advertised.  Is test-covered.\n. This code looks fine and the tests pass just dandy\n. @radar @parndt someone want to close this issue?\n. Would it be too dirty to implement PMs as a special forum, with each new (non-reply) PM opening a new thread in the forum with special permissions to that only the participants can view it?  Then you could conceivably expand it later so that you could invite more people into your private thread.  You would just need to add logic to hide the special forum from index views and modify the ACL bits.\nIs this too 'hacky'?  It's definitely the sort of thing I would do regularly in this situation if it's just for me/a client.\n. @radar think this one's closed now as well\n. Any progress on this?  It's been floating with no updates for 5 months, so unless someone's willing to push it forward I'm considering closing it until someone is actively requesting the feature and offering to maintain the adapters for a limited period at least.\n. @jgadbois what's the situation with this one now.  I saw you closed the old pull request, but did you ever open a new one?\n. @radar don't see that this one's an issue anymore, as (a) there's no longer an application.css, and (b) you totally rewrote the styles I had in there :)  Also, meow\n. I do not believe this occurs any longer, and it's been 3 months since my previous comment with no one disputing.  Closing the issue.\n. I like it.  I think you'd want to just provide a block that is passed the content of the forum post, and by default that would be Forem.default_formatter = lambda{ |content| Redcloth.new(content).to_html }\nSomething like that?  That seems the most flexible and simple\n. lol entirely missed that you'd already added the formatter bits in there :)  At any rate, I prefer markdown which is what you'd asked I think :)\n. sounds good to me\n. @jeremyong I don't see why you would dislike the zero config approach tbh.  This just provides a default - you can override it easily, and I would expect there to be new formatter gems created/released as people need them.\nThis will result in more configurability, not less, imo.\n. Why is this still open?   bbaa8f57e267f6b00d7a5ce4af7b36ab38a65cbb was merged and that took care of this, yes?\n. @robyurkowski if this is still an issue for you, reopen?  (a) I think this is solved, and (b) the goal is to also include highlight.js for syntax highlighting so there's more work to be done on this front anyway\n. @rizzah so I don't particularly like to use serialized fields for the most part.  Can you think through a way to do this that doesn't use serialize?  It's not my favorite thing at all.\nI like the feature though.\n. @rizzah and I can totally get behind this, and think it's a good feature.  At the same time, I've not looked into the existing cancan stuff and so I am not an authority on how well this fits into the vision that @radar had with it.  Thoughts, @radar?\n. @jgadbois my only concern in general is it'd be nice if there was a test to go along with it / verify we don't break this feature down the road.  Can you put one of those together?\n. Yeah, and it can be super simple as far as I care.  Just 'hey here's a forum/topic/post, and they totally show up in the rss feed when I hit the url.'\n. +1, I tested it and it both passes and merges cleanly.  @radar @parndt merge?  Thanks, you're great @jgadbois \n. So I would suggest you just make the helper named auto_discovery_link_tag.  Then, if the main app mounts forem at /forem, they can call that helper method with forem.auto_discovery_link_tag\n. hilariously I forgot about that.  Ignore the crazy person, move along :)\n. @radar @parndt I don't know the answer to this.  Le help?  So close on this one...\n. tests pass for me as well...\n. alright, tests pass for me on 2 different boxes.  Also, @parndt is crazy because why is minitest in his error.  Merging :)\n. @mahzilla the code looks legit, but I'd love to see a new test related to it.  If you add a test, I'll gladly +1 this as it's needed.\n. @mahzilla I should also say, thanks for the contribution.  It's awesome that you pushed this :)\n. My guess is because spec/dummy/db/migrate shouldn't be in the repo in the first place.  I have other engines where I've pushed them up, and it's always been a mistake then.\n. you mean highlight.js now, right?\n. @jgadbois do you want to turn that into a pull request?  Does it reflect the discussion that occurred here?\n. Okie doke, closing.\n. +1 thanks :)\n. So yeah, the traditional way we've handled this is with a helper....so our application layout tends to have:\n%title= render_title\nWhere there's a \n```\ndef render_title\n  [@title, @site_name].compact.join(\" | \")\nend\ndef title=(title)\n  @title = title\nend\n```\nThen in our views or controllers, we'll just use title= to set the title.  Does that make sense?\n. Right, so I'm at SpreeConf and completely not in-context  :)  I think using refinery for i18n page titles where they come from refinery, and locale files for pages that don't fall under that purview, makes plenty of sense...\n. doesn't matter... :-\\  I should've stopped when I said I wasn't in-context obviously :)\nThe proposal @glebm made is sensible.  Why don't we do it that way?\nAlso, graceful bow-out before I make an ass of myself again :)\n. README needs updating...\nalso blah blah something about refinery, amirite @pardnt\n. I was mocking me-on-other-ticket getting confused about which project I was talking about :)  whoosh\n. Thanks tons, I merged it.  Was clearly a typo :)\n. So I can't help but notice there was a global in there before you updated this :)  I haven't tried out this code yet to verify it works - anyone else want to comment on it before a merge?\n. I'll wait to merge until someone has verified that it works then :)\n. @gabrielbaez ever come to the BOSS meetup?  I run a local ruby/rails consultancy here in town, we host it (Isotope11).  @everyoneelse - lol sorry this is apparently now our personal instant message suck it\n. maybe you should email me at josh at isotope11 dot com :)  And Isotope11's smack in the middle of homewood / valley ave.\n. Re: your link problems - sounds like you just need to define a to_s on your User model\n. This seems like a desirable feature.  @radar, @parndt, any concerns with it?  Digging into code now...\n. Alright, I see two test failures on this pull request (you can ignore the third - it's fixed in master as of an hour ago but I didn't merge that in before running these tests)\n```\n--(jadams@viggyviggy)-(93/pts/6)-(1547/22-Apr-12)--\n--($:~/rails/forem)(user_subscription_preferences)ruby-1.9.3-p125@forem-- \n$ bundle exec rspec spec\n/home/jadams/.rvm/gems/ruby-1.9.3-p125@forem/gems/ffi-1.0.9/lib/ffi/platform.rb:27: Use RbConfig instead of obsolete and deprecated Config.\n.......................................................................................................................F............F....F...............................\nFailures:\n1) Forem::Topic approving switches pending review status\n     Failure/Error: let(:topic) { Factory(:topic, :user => stub_model(User)) }\n     NoMethodError:\n       undefined method forem_auto_subscribe?' for nil:NilClass\n     # ./app/models/forem/post.rb:32:inblock in '\n     # ./spec/models/topic_spec.rb:45:in block (3 levels) in <top (required)>'\n     # ./spec/models/topic_spec.rb:49:inblock (3 levels) in '\n2) Forem::Post after creation doesn't subscribe the current poster if forem_auto_subscribe is set to false\n     Failure/Error: @topic.subscriptions.last.subscriber.should_not == @post.user_not_autosubscribed\n     NoMethodError:\n       undefined method user_not_autosubscribed' for #<Forem::Post:0x00000005e46268>\n     # ./spec/models/post_spec.rb:32:inblock (3 levels) in '\n3) Forem::Post after creation sets topics last_post_at value\n     Failure/Error: topic.last_post_at.should == post1.created_at\n       expected: Sun, 22 Apr 2012 20:48:35 UTC +00:00\n            got: Sun, 22 Apr 2012 20:48:35 UTC +00:00 (using ==)\n       Diff:\n     # ./spec/models/post_spec.rb:68:in `block (3 levels) in '\n```\n. Care to submit those 2 changes to your branch so they come into this pull request?\n. How could we do it on our end and have it still fall in this pull request, @parndt?  I'm going to defer to you here - I'm signing off on the merge, but looking to you to squash 'em :)\n. Awesome.  I don't ever squash commits so this is a bit of git-fu I just lack generally :-\\  Good to see a nice workflow I suppose.\n. Also, inline styles are yucky.  I typically put a .clear{} rule in the stylesheet and apply it to a div in the view.\n. Looks great, all tests passed.  Merged.\n. It's also conceivable that we would want to make this path configurable and just default it to sign_in_path or new_user_session_path - either way, it needs to be documented that we expect the main_app to have that route defined.\n. This is now configurable per the above merged commit, so closing the issue.\n. +1 on \"we need a more generic settings system\"\nTo use rails properly, this is ideal here: http://api.rubyonrails.org/classes/ActiveRecord/Store.html\nAmirite?\n. Yeah, I saw it all failing yesterday so I made sure my Gemfile was looked to rails 3.2.1 since I didn't have time to fix it yesterday\n. in my defense, I'm presently hospitalized.  (yeah, I went there)\n. This was fixed with the above pull request, closing.\n. Merged this and pushed.  Pushed some tweaks of my own that fixed issues that cropped up with Gemfile.lock update\n. we need a test case that shows this.  Sorry.  Anyone else seeing it?  @jgadbois?\n. tests pass for me, merging.\n. @jgadbois thanks tons for the contribution btw\n. Tests pass.  Merging and updating wiki.\n. @radar, @parndt,, @kamarcum - does the change I made to the wiki re: this setting seem sufficient / actually tell the truth?\nhttps://github.com/radar/forem/wiki/Configuration\n. @kamarcum by the way, thanks tons for the contribution!\n. Holy crap, I was actually on those forums yesterday and didn't recognize that it was forem.  I saw a post on HN about the device running puppy linux and another post elsewhere re: ubuntu, so I checked it out.  Coincidences are crazy.\nDone...\n. No movement on this in 2 months and no stack trace.  @etjossem are you still having an issue?  Have a production forem install on latest master and no errors of this sort showing up, and I know others are using it.  Just wanting to triage if I should..\n. Sweet, thanks :)\n. is there a plan for what we want to do here?  I really do feel that this is the sort of thing that should be offered in engine configuration, rather than just a 'oh yeah, set default value in your migrations...'\n. Righto, just wanted to provoke minimal documentation on the hivemind/collective agreement on whether this was or wasn't a feature that forem needed to add.  Having 9 solid minutes to think about it, it occurs to me that with configurability 'thur be dragons' as edge cases asplode exponentially...\n. @heath get on this k guy :) :) :)\n. On the one hand - I think this looks nicer and is easier to read.  I think it's likely worth merging, but I know we have some uses of Arel idioms in here where it is actually needed to get performant queries (this likely not being one because omg)\n+1\n. +1 :)\n. Hot damn that was a fun email to receive :)\n. --($:~/rails/forem)(master)ruby-1.9.3-p125@forem-- \n$ git checkout -b gemoji\nSwitched to a new branch 'gemoji'\n. I suck at github so I https://github.com/radar/forem/pull/314\n. http://imgur.com/3Tj0J,hy7gC\n. deployed to production for @isotope11 using emoji now, happy?\n. I'm merging this since no one else gave it love.  I'm using it in production, it works :)\n. One of the points of the way forem's built is to make it dead simple to plug in your own user class, etc.  It is an engine, after all.  Consequently, I don't feel like forem itself needs to support this (though a wiki entry would be nice probably).\nFor an example where I'm using Devise+omniauth to support SSO, you can see code at https://github.com/isotope11/isotope-forums/blob/master/config/initializers/xrono.rb\nIt's really dead-simple to do this already.  Took me 10 minutes to roll that project.  Thoughts?\n. I think that sounds awesome, and I'd be super happy if such a thing made\nits way into the world.  Let me know when the kickstarter's up and I'll\nshare it on le twitter\nOn Tue, Jan 22, 2013 at 11:06 AM, \u5f71\u6708 \u96f6 notifications@github.com wrote:\n\nSince we're not getting any response here me and Tohyama have decided to\nprogress with the kickstarter idea. We'll be putting up a campaign for a\nfree set of emoji that includes all the standard and extended currently\nbeing provided by Apple and hopefully a few more. If anyone has suggestions\nfor licenses they'd want etc. I'd love to hear them and why. In the end\nwe'll probably do something like\nhttp://fortawesome.github.com/Font-Awesome/ and we'll provide an initial\nset with a forked-and-modified gemoji.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/pull/362#issuecomment-12554515.\n\n\nJosh Adams\nCTO | isotope|eleven http://www.isotope11.com\ncell 215-3957\nwork 476-8671 x201\n. This is clearly the superior technical solution. I had not considered oy at\nall. Thanks. If you made such a gem it would be a no bassinet for most\nprojects to use it i think\nOn Feb 5, 2013 5:39 AM, \"sfcgeorge\" notifications@github.com wrote:\n\nA fried suggested something to me that seems so obvious now. Clearly\nApples emoji are not free for the picking, however Android is open source\nand has emoji! So after quite a bit of digging I found the\nAndroidEmoji.ttf http://cl.ly/MLa4 with licence \"Licensed under the\nApache License, Version 2.0\". It is not a color font like Apples but a\ntraditional vector font. On the plus side this means it is small enough to\nbe included entirely on a web page, though it's not as pretty.\nWith this font, one option would be to embed the font in the page as a\nwebont. Then, a gem on Forem's side would convert the :lengthy_emoji_name:into the actual UTF8 character code. Here's the genius part: If a user\nalready has emoji built into their device, they can use their emoji\nkeyboard directly to type the emoji without having to remember\n:ridiculously_long_codes:. Moreover, if a user has an Apple device, when\nthey view a forem post with the UTF8 emoji codes in they will be displayed\nin the native Apple font - this is legal as it is simply using the font\nright on the device as intended. A Windows 8 user will see the emojis\nrendered in the Win8 emoji font, etc. Then, if a user doesn't have an emoji\nfont built into their OS (maybe they're using BeOS or something) then the\nCSS will cascade and fall back to the included Android font. So:\n- Users with an emoji keyboard can type emojis directly, as they are\n  used to\n- Users without an emoji keyboard can type an :emoji_code:\n- Users with an emoji font built into their OS will see emoji rendered\n  in that\n- Users without an emoji font built into their OS will see emoji\n  rendered in the AndroidEmoji.ttf\nWhat do you guys think of this idea? If I was to make a gem to do this do\nyou think that would be an acceptable solution?\n@Kagetsuki https://github.com/Kagetsuki you could still go ahead with\nthe Kickstarter if you specifically want color emojis - I think this could\nbe a good thing. It's rare for really good design to be open source so it\ncould be interesting.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/pull/362#issuecomment-13125479.\n. I backed it. Awesome guys\nOn Feb 23, 2013 6:43 PM, \"sfcgeorge\" notifications@github.com wrote:\nThanks for your hard work, it's looking great so far. I of course backed,\nhopefully enough others do that this can become the best set for\nintegration into open source forums, blogs, comment systems, etc.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/pull/362#issuecomment-14001182.\n. So for clarification, the kickstarter for Phantom Open Emoji was successfully backed, and consequently the plan is to ultimately use a gem that uses those emoji.  Having said that, I propose (a) closing this PR unmerged, and (b) congratulating @Kagetsuki et al.  I'll cover both of those now.  Congrats @Kagetsuki!\n. We did this on alabamaintel.com\n\nEach article automatically created a forum thread with the first post\nlinked to the article. We then embedded that thread, sans the first post,\nunder the article. Added inline posting form and done.\nOn Jan 19, 2013 5:41 PM, \"John Honovich\" notifications@github.com wrote:\n\nWe recently added Forem for our discussion group and are very happy with\nit.\nRight now, we use disqus for commenting on our articles but want to get\nrid of it.\nIs there any way or best practices of using Forem to comment on articles\n(i.e., other content outside of forem_topics)? Basically associate a\nforem_topic/posts with /underneath each article.\nI am aware of Rails commenting gems but it seems that it would be less\nrepetition if we could reuse/adapt forem for our articles.\nAny advice would be appreciated.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/issues/370.\n. The post that started the thread has a link to the article. That way people\nbrowsing that thread had a link to the article that caused it.\n\nI don't recall problems with email links but that was long ago\nOn Jan 20, 2013 3:10 AM, \"John Honovich\" notifications@github.com wrote:\n\nThanks Josh!\nCan you explain what you mean by 'first post linked to that article'?\nAlso, did you have any issues with the referenced URLs in the email\nnotification?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/issues/370#issuecomment-12467918.\n. +1\nOn Jan 30, 2013 5:59 PM, \"Philip Arndt\" notifications@github.com wrote:\nPlus then we'd have support for any sub URI cleanly and with only exposing\nspecific routes.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/pull/373#issuecomment-12919906.\n. @radar @parndt So is the strategy to close this PR and await the top level js variable?  Is there an issue open for doing that?\n. @phlipper Any ideas what the problem might be on the other databases?  I'd love to see this merged...\n. Where is forem mounted in your app?\n\nOn Wed, Feb 27, 2013 at 12:40 PM, Jeff Pickhardt\nnotifications@github.comwrote:\n\nI just installed Forem and mounted the engine from my routes.rb file.\nHowever, I get the following error trying to access /forums (while both\nsigned in and signed out):\nNo route matches [GET] \"/forums\"\nWhy could this be? \"rake routes\" suggests it's mounting correctly...\n$ rake routes\nroot / static#index\n...\nsignup /signup(.:format) users#new\nsignin /signin(.:format) sessions#new\nsignout /signout(.:format) sessions#destroy\nforem /forums Forem::Engine\nRoutes for Forem::Engine:\nroot / forem/forums#index\nsubscribe_forum_topic GET /forums/:forum_id/topics/:id/subscribe(.:format)\nforem/topics#subscribe\nunsubscribe_forum_topic GET\n/forums/:forum_id/topics/:id/unsubscribe(.:format) forem/topics#unsubscribe\nforum_topics GET /forums/:forum_id/topics(.:format) forem/topics#index\nPOST /forums/:forum_id/topics(.:format) forem/topics#create\nnew_forum_topic GET /forums/:forum_id/topics/new(.:format) forem/topics#new\nedit_forum_topic GET /forums/:forum_id/topics/:id/edit(.:format)\nforem/topics#edit\nforum_topic GET /forums/:forum_id/topics/:id(.:format) forem/topics#show\nPUT /forums/:forum_id/topics/:id(.:format) forem/topics#update\nDELETE /forums/:forum_id/topics/:id(.:format) forem/topics#destroy\nforums GET /forums(.:format) forem/forums#index\nforum GET /forums/:id(.:format) forem/forums#show\ntopic_posts GET /topics/:topic_id/posts(.:format) forem/posts#index\nPOST /topics/:topic_id/posts(.:format) forem/posts#create\nnew_topic_post GET /topics/:topic_id/posts/new(.:format) forem/posts#new\nedit_topic_post GET /topics/:topic_id/posts/:id/edit(.:format)\nforem/posts#edit\ntopic_post GET /topics/:topic_id/posts/:id(.:format) forem/posts#show\nPUT /topics/:topic_id/posts/:id(.:format) forem/posts#update\nDELETE /topics/:topic_id/posts/:id(.:format) forem/posts#destroy\ntopics GET /topics(.:format) forem/topics#index\nPOST /topics(.:format) forem/topics#create\nnew_topic GET /topics/new(.:format) forem/topics#new\ntopic GET /topics/:id(.:format) forem/topics#show\nDELETE /topics/:id(.:format) forem/topics#destroy\nforum_moderator_tools GET /forums/:forum_id/moderation(.:format)\nforem/moderation#index\nforum_moderate_posts PUT /forums/:forum_id/moderate/posts(.:format)\nforem/moderation#posts\nmoderate_forum_topic PUT\n/forums/:forum_id/topics/:topic_id/moderate(.:format) forem/moderation#topic\ncategories GET /categories(.:format) forem/categories#index\ncategory GET /categories/:id(.:format) forem/categories#show\nadmin_root /admin(.:format) forem/admin/base#index\nadmin_group_members GET /admin/groups/:group_id/members(.:format)\nforem/admin/members#index\nPOST /admin/groups/:group_id/members(.:format) forem/admin/members#create\nnew_admin_group_member GET /admin/groups/:group_id/members/new(.:format)\nforem/admin/members#new\nedit_admin_group_member GET\n/admin/groups/:group_id/members/:id/edit(.:format) forem/admin/members#edit\nadmin_group_member GET /admin/groups/:group_id/members/:id(.:format)\nforem/admin/members#show\nPUT /admin/groups/:group_id/members/:id(.:format)\nforem/admin/members#update\nDELETE /admin/groups/:group_id/members/:id(.:format)\nforem/admin/members#destroy\nadmin_groups GET /admin/groups(.:format) forem/admin/groups#index\nPOST /admin/groups(.:format) forem/admin/groups#create\nnew_admin_group GET /admin/groups/new(.:format) forem/admin/groups#new\nedit_admin_group GET /admin/groups/:id/edit(.:format)\nforem/admin/groups#edit\nadmin_group GET /admin/groups/:id(.:format) forem/admin/groups#show\nPUT /admin/groups/:id(.:format) forem/admin/groups#update\nDELETE /admin/groups/:id(.:format) forem/admin/groups#destroy\nadmin_forum_moderators GET /admin/forums/:forum_id/moderators(.:format)\nforem/admin/moderators#index\nPOST /admin/forums/:forum_id/moderators(.:format)\nforem/admin/moderators#create\nnew_admin_forum_moderator GET\n/admin/forums/:forum_id/moderators/new(.:format) forem/admin/moderators#new\nedit_admin_forum_moderator GET\n/admin/forums/:forum_id/moderators/:id/edit(.:format)\nforem/admin/moderators#edit\nadmin_forum_moderator GET /admin/forums/:forum_id/moderators/:id(.:format)\nforem/admin/moderators#show\nPUT /admin/forums/:forum_id/moderators/:id(.:format)\nforem/admin/moderators#update\nDELETE /admin/forums/:forum_id/moderators/:id(.:format)\nforem/admin/moderators#destroy\nadmin_forums GET /admin/forums(.:format) forem/admin/forums#index\nPOST /admin/forums(.:format) forem/admin/forums#create\nnew_admin_forum GET /admin/forums/new(.:format) forem/admin/forums#new\nedit_admin_forum GET /admin/forums/:id/edit(.:format)\nforem/admin/forums#edit\nadmin_forum GET /admin/forums/:id(.:format) forem/admin/forums#show\nPUT /admin/forums/:id(.:format) forem/admin/forums#update\nDELETE /admin/forums/:id(.:format) forem/admin/forums#destroy\nadmin_categories GET /admin/categories(.:format)\nforem/admin/categories#index\nPOST /admin/categories(.:format) forem/admin/categories#create\nnew_admin_category GET /admin/categories/new(.:format)\nforem/admin/categories#new\nedit_admin_category GET /admin/categories/:id/edit(.:format)\nforem/admin/categories#edit\nadmin_category GET /admin/categories/:id(.:format)\nforem/admin/categories#show\nPUT /admin/categories/:id(.:format) forem/admin/categories#update\nDELETE /admin/categories/:id(.:format) forem/admin/categories#destroy\ntoggle_hide_admin_topic PUT /admin/topics/:id/toggle_hide(.:format)\nforem/admin/topics#toggle_hide\ntoggle_lock_admin_topic PUT /admin/topics/:id/toggle_lock(.:format)\nforem/admin/topics#toggle_lock\ntoggle_pin_admin_topic PUT /admin/topics/:id/toggle_pin(.:format)\nforem/admin/topics#toggle_pin\nadmin_topics GET /admin/topics(.:format) forem/admin/topics#index\nPOST /admin/topics(.:format) forem/admin/topics#create\nnew_admin_topic GET /admin/topics/new(.:format) forem/admin/topics#new\nedit_admin_topic GET /admin/topics/:id/edit(.:format)\nforem/admin/topics#edit\nadmin_topic GET /admin/topics/:id(.:format) forem/admin/topics#show\nPUT /admin/topics/:id(.:format) forem/admin/topics#update\nDELETE /admin/topics/:id(.:format) forem/admin/topics#destroy\nadmin_users_autocomplete GET /admin/users/autocomplete(.:format)\nforem/admin/users#autocomplete\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/issues/388\n.\n\n\nJosh Adams\nCTO | isotope|eleven http://www.isotope11.com\ncell 215-3957\nwork 476-8671 x201\n. @radar @parndt I've been out of the loop, but I've seen some movement in the translations area lately.  Anything that should keep me from clicking the big green 'merge' button? :+1:\n. So I would expect the page number to change because I'm used to 'per page' being configurable for the end user.  Unless it's actually slow I'd be fine with it, if the actual calculations were pulled out into a helper (logic in views is scary)\n. I wholeheartedly approve this change.  Thanks!\n. Thank you for your contribution have a nice day :dancers: \n. Was in the air all day so I missed my chance\nOn May 19, 2013 6:20 PM, \"Philip Arndt\" notifications@github.com wrote:\n\n@knewter https://github.com/knewter Ryan's probably busy and has inbox\n5000 so it's up to you :)\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/pull/423#issuecomment-18126755\n.\n. I would suggest soft deletion\nOn May 21, 2013 6:12 PM, \"Philip Arndt\" notifications@github.com wrote:\nInteresting. Probably our users would have to be soft deleted through\nsomething like paranoia. What do you think, everyone else? @knewterhttps://github.com/knewter\n@radar https://github.com/radar\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/issues/427#issuecomment-18247766\n.\n. Good god, I'm trying to read through this while watching ghost in the shell for the first time.  Sorry...\n. really enjoyed your boy @saturnflyer's talk today too btw :)\n. With http://github.com/isotope11/wacky I do side by side realtime updates, but this strikes me as Not Very Non Techie Friendly.  Still thought I'd bring it up.\n. Poorly :)\n. The way I do it is to use a javascript markdown formatter, which is substantially faster and 'mostly-right'.  That way you can do it in realtime and not by clicking preview.\n\nObviously, if a 'preview' tab is used then that's the way to go so it matches perfectly how the server will render.  I opted for the quicker feedback, and it's extremely rare to find an edge case where the two disagree for my uses (but for instance, with emoji, etc. I would expect that gap to widen)\n. Not even joking, this is my argument for an HTML preprocessor. Thanks.\n. I have to say that this is absolutely not an issue with forem.  I'm fine with this being a place to discuss amongst yourselves, but having this show up in @radar's inbox as an issue is...pretty awful.  Closing it :)\n. Yeah, you can see this failure happening in forem's travis here: http://travis-ci.org/#!/radar/forem/jobs/1121406\n+1 for this change\n. should be p.user, not p.  If you'll commit that update I'll go ahead and merge.  Thanks for this btw\n. yeah, 404 on recordnotfound is standard and without argument against can't imagine having an issue with it :) :)\n. What was this doing and how did adding decorators allow us to remove it?  Or were those orthogonal?\n. I totally skipped over that line, gotcha\n. I've never liked try\n. :heart:\n. :+1: \n. Where/why do we call this with no topic?\n. I believe it, but seems like we shouldn't do that...\n. ",
    "paxer": "none asked me, but I would agree with Ryan, it does not make sense to add this level of complexity for this task. So - \"just one row\" is better solution IMHO. \n. ",
    "AstonJ": "Sounds good - get the nuts and bolts sorted first the bells n whistles can come later :)\n. Oops - didn't meant to close (silly place to put a close button!)\n. I started on it @jgadbois (under direction from @radar) I got as far as this: https://github.com/AstonJ/forem/tree/adding-subscriptions I can submit a pull request and you take it from there if you like?\n. I'm not sure how to do that so have added it here: https://github.com/radar/forem/pull/97 \n. I did start on it: https://github.com/AstonJ/forem/tree/email-notifications but I'm sure I screwed something up as SQLite keeps giving me a BusyException now. \nThe email-notifications branch was just my rough attempt tbh, so I really don't mind if you scrap it and go ahead and redo it from scratch @jgadbois. \nI don't mind helping out but just bear in mind I'm very new to this (and so I won't be offended if you'd rather do it yourself - I can always help out on sommin else if need be - I'm sure Ryan will be able to find something else for me to work on, lol).\n. Hi guys I've got this far: https://github.com/AstonJ/forem/tree/email-notifications \nIn Ryan's book he uses an Observer:\nclass CommentObserver < ActiveRecord::Observer\n  def after_create(comment)\n   (comment.ticket.watchers - [comment.user]).each do |user|\n      Notifier.comment_updated(comment, user).deliver\nend end\nBut I've used an after_create instead. I think my association is wrong - can you give me some pointers please?\n. Sounds good Ryan!\n. No Philip, I was having trouble running migrations so Ryan told me to run:\nbundle exec rake -f spec/dummy/Rakefile forem:install:migrations\nThen:\nbundle exec rake -f spec/dummy/Rakefile db:drop db:create db:migrate db:test:prepare\nPerhaps that's what deleted them? \n(Ryan did actually check this - but he hasn't mentioned anything about the dummy/migrations :/)\n. We might be waiting a while... last I heard of him he was legless lol\n. ",
    "gabrielbaez": "Email notifications would be awesome to have :) \n. It sounds good to me so far,  I'm not sure if I will have the time. But i did finish the categories support feature :) \n. Thanks man didn't know that,  that fixed it!\n. You could modify one of the  views  and use something like ckeditor. \n. What about allowing users to edit their own post and admin to edit user post  and a moderator option to allow them to edit post and move them to a different  forum. \n. sorry, I haven't had time been busy.\n. @radar I started to give this a crack  using fluxbb as a guide,  I have it working,  but I do not have the piece for  creating the category for the admin panel,  I can't seem to get  rake routes to  work.    here is a screen shot of the forum.\nhttp://dl.dropbox.com/u/875374/forem/category.png\n. It was throwing me off at first, since I'm used to using  that command to get the list of routes whenever I'm working on something,  but it did not stop me from making the categories admin section. \n. Feature has been implemented. \n. I'm new to git,  can that be done through github ?\n. found a document,  I'll see what I can do. \n. okay, I think that did the trick,  please let me know how it looks. \n. Made the chances as suggested I'm not sure why github is showing the same commit multiple times but they have the same id. \n. do I need to make a new pull request? or will the changes get pulled  on this one ?\n. Alright thanks for taking the time to provide feedback, I appreciate it  :) \n. ok,  I updated the file I think that should do it.\n. I'm not familiar with the factories stuff, but I can give it a crack. How do you run the forem unit tests ? \n. Thanks that does run the test. \n. @parndt  I updated the Factories to support categories  let me know how the changes look.  Thanks :) \n. I can, but it is a bit difficult since rake routes  does not  work  to get the list of  paths\nam I running this wrong ?\ngabriel@railsdev:~/forem$ rake routes\nrake aborted!\nDon't know how to build task 'routes'\n(See full trace by running task with --trace)\n. Thanks for the help,  added the test let me know how it looks it passed on my end. \n. @radar  added the check,  thanks. \n. that gem does not seem to be maintained anymore,  https://github.com/fajrif/has_mailbox/issues/2\n. They are not mine, all I did was  a pull to my  fork to sync up the latest forem changes.  If you look at the diff I  only changed one file. \n. I ran into this error since my website makes use of cancan. \n. The same error is also triggered on the admin section,  but on the rest of the forum it seems to be working fine so far. \n. When you setup a new rails up that uses cancan and you enable  check authorization in applications controller.  it reproduces the error when viewing the forem index, if you go directly to the show action the error is not triggered. \ncheck_authorization :unless => :devise_controller?\n  rescue_from CanCan::AccessDenied do |exception|\n    flash[:alert] = exception.message\n    redirect_to root_url\n  end\n. What if the website admin does not wish to moderate all posts or only wants this feature for a specific   forum (ie support) and not all?  Can this be turned  on/off ?\n. ah ok thanks,  I'm surprise you are awake! I though you were on the other side of the world! \n. sorry about that,  I'm now trying the latest version of REE to see if it fixes the problem.   I ran into this problem with ruby-enterprise-1.8.7-2011.03 now trying ruby-enterprise-1.8.7-2012.02\n. Upgrading to the latest REE seems to fix the problem. \n. knewter!  nice to see another github user from the  birmingham,AL  area :) \n. I have not been there, but I think I have heard of it from an old co-worker that has been there \"Clay\"  is it close to the Inverness area? \n. nope!\n. I think my editor did that when I hit format code. \n. Will do thanks for the tip. \n. I'm  new to ruby and rails,  I  did not know you could do it the way you suggested  it,  I'll  make the  change thanks. \n. You are right,   I'll try  that and see. \n. With the changes I made to the forum index page, if the forums are not set to a category  they wont get displayed. \n. didn't notice that thanks I'll fix it. \n. sorry about that,  added  it. \n. I had to specify the label here  because without it, it was outputting \"Title,  description\"  text. \n. ",
    "jgadbois": "I'm needing email notifications too - I can tackle this if no one else is.  @radar, let me know if you want me to do it.\n. sure as long as @radar is cool with that.  Would you add the pull request to my fork?\n. When I looked the other day the subscriptions got set up, but emails weren't actually getting set out to subscribers.  I'd like to hook all that up.  I don't think any of the front end for subscribing was there yet either.\n. I'm happy to take a look, but if you want I can work on the front end subscription stuff if you want to keep working on the emails.\n@radar - could you take a look at my other pull request and hopefully get it merged as I screwed up and committed some of that work into master on my fork.\n. https://github.com/radar/forem/pull/79\n. Could you maybe add a blockquote method to the formatter API and format it via a helper?  I'd be happy to help if you like that approach.\n. I think this can be closed with the blockquote pull request you added\n. Started on some specs which brought up a problem - all the formatters run the raw markdown through ERB::Util.h which escapes the markdown blockquote formatting (start the line with greater than).\nThe current commit in the pull request gets around this by wrapping the post in raw() but that's probably not smart and causes an existing spec to fail.\nI'm pretty sure the blockquote tag gets escaped using the current functionality too.\nAny suggestions?  I was thinking there might be some markdown sanitizer we could use instead of h()?\n. I removed the escaping from the RDiscount gem and added a call to sanitize before outputting the forem post.  Specs (my new ones and existing ones) are passing.\n. Sorry some of these pull request commits are on my master in addition to my formatted-quotes branch, so I'll have to have this pull request merged before I can fork off another branch to start working on the email subscriptions.  I'm pretty new to pull requests so sorry for messing that up.\n. It should - I'm sanitizing before running through markdown.\n. @radar - sorry to bug you.  Had a chance to check this out yet?\n. Thanks for committing this - I'll get started on email notices.\n. What if you had the belong_to for Post be a polymorphic association that applied to Conversation and Topic?\n. I'm not seeing this in master (or a branch for that matter).  Once this gets merged I'll start on the front end.\n. I implemented the subscribe/unsubscribe link with specs - should I open a pull request even though I am not done so you can comment on the code as I work on it?  I used a Subscriptions controller for subscribing/unsubscribing.  Actions on the topics controller might be cleaner although less RESTful.\n. I think the one that seems to delete them is just running rake at the top level of the repo.  I also use bundle exec rspec to run specific specs.\n. None directly but my subscription branch has some POST and DELETE links that won't work without rails-ujs\n. Ahh...I was confused about that too.\nI'll try that.\n. Resubmitted - that should be a lot cleaner.  Still a work in progress but looking for early feedback.\n. Thanks - sorry about the indent editors - I worked on two different computers with slightly different vimrc files.  As an aside - do you want soft or hard tabs?\n. Refactored subscribe/unsubscribe stuff.  Required a new permission.  Emails now have unsubscribe link in footer.\n. @radar Did you add a duplicate can_read_forum_topic?  method?  I see two in default permissions now.\n. Icon is from here: http://www.mozilla.org/foundation/feed-icon-guidelines/\n. Any thoughts on this?  Happy to change it if you have some concerns before pulling\n. Just an integration test I'm guessing?\n. Ok, done\n. Haha - had me nervous there!  Let me know if there are any other features you'd like help on.  I'll update the readme.\n. Hmm...actually.  How would this work - the atom feed is per forum, so it's only valid on a forum page.  Is the auto_discovery_link_tag method smart enough to know this or would there need to be some conditional logic in the head?  \nIf the second, maybe we should add a helper method?\n. It looks like since the engine has an isolated namespace , then helpers aren't available to the main application unless the helper is manually included in the app ApplicationController.  Is there a better solution, or should that just be part of the setup instructions?\n. Ok, I was just working on a helper method called forem_auto_discovery_link_tag that outputted the auto discovery tag when on forums#show \n. What if we just instructed them to put a yield(:forem_head) in their layout and then we did a content_for with the auto discover tag in the appropriate views.\n. I agree, it would be hard to find the correct files.  This approach might still be easier than opening up a helper to the main app.\n. How do I go about adding that method?  I can add a method to a helper, but I'm not sure how to make it accessible via forem.atom_auto_discovery_link_tag\n. @radar - sounds like fun!  What is the best way to do make this method available as the engine's namespace is isolated (thus helpers aren't available to the main app) ?\n. I added the forem auto discovery helper method.\n. Strange the spec passed for me\n. Same.  I'm afk, but I'll double check tonight. I don't think I used minitest though.\n. @parndt This is passing for me\n```\njohn@ubuntu:~/projects/github/forem$ bundle exec rspec spec/requests/\n/home/john/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/ffi-1.0.9/lib/ffi/platform.rb:27: Use RbConfig instead of obsolete and deprecated Config.\n.............................................................................\nFinished in 13.73 seconds\n77 examples, 0 failures\njohn@ubuntu:~/projects/github/forem$ ruby -v\nruby 1.9.3p0 (2011-10-30 revision 33570) [i686-linux]\njohn@ubuntu:~/projects/github/forem$ git branch\n* atom_feed\n  ignore_dummy\n  issue_137\n  issue_150\n  issue_153\n  master\n```\n. haha, thanks for merging this guys.\n. I think getting rid of the .0 after 3.1 should work.\nFrom the bundler site:\n\n~> 2.1 is identical to >= 2.1 and < 3.0\n. It's a nested path though, which needs both. \n. Looks like your right - passes specs and the test app works.  In my production environment it didn't work for some reason and I had to alter the links.\n. For some reason the specs and test app work even without this change, so I'm not sure how to go about doing that.  There's an integration test that I added previously that tests these links.\n. It didn't work for me in my production environment, but I manually tested on the test app in addition to my spec and it worked. \n. How about just a little \"New\" superscript text? If it's been created since their last topic view?\n. Hmm, actually - I was thinking a New superscript would look good for new topics since last view, but looks like only last view of topics is tracked, not last view of a forum so that isn't really feasible.\n\nFor topics, it looks like a \"new\" icon is already displayed if new posts have been added since last view of that topic (when viewing a forum).\nMaybe none of this is necessary?  If you think it would be a good idea, we could make the views have a polymorphic association with topics and forums and track both maybe.\nThoughts?\n. Currently it works like follows:\n- User visits a forum \n- User looks at the list of topics\n- Topics that have been previously visited and have new posts added to them have a \"new posts\" icon.\nI'm proposing:\n- User visits a forum\n- User looks at list of topics\n- New topics since last visit to the forum are marked as \"new\"\nMaybe it is overkill, but seems useful for a moderator or user to visually see which topics are new.  Of course once you visited a topic in the forum and then hit the back button they are no longer new if the cache is busted so maybe it's not useful anyway.\nI'm fine with doing a separate page too if you think that is more useful, but maybe that's not all that useful either.\n. Makes sense - once a topic is actually viewed, then we should not show that one as new though. So new topics are all topics posted more than 15 minutes ago and not actually viewed, right?\n. Probably a dumb question, but I added a concerns directory (app/model/concerns) with a Viewable module for some shared logic between topic and forum.  How do I tell the Rails Engine to autoload that directory?\n. Currently it's at\napp/models/forem/concerns/viewable.rb and it's called Forem::Viewable\nI just tried adding config.autoload_paths << \"#{Forem::Engine.root}/app/models/forem/concerns\" to engine.rb, but I'm still getting the following error:\nuninitialized constant Forem::Viewable (NameError)\nI'm trying to include it like this:\nmodule Forem\n  class Topic < ActiveRecord::Base\n    include Forem::Viewable\nSuggestions?\n. That worked - thanks.  Also turns out that Form::Engine.root only gets me to the lib directory - not sure if that's the desired behaviour or not.\n. > 1. During the user viewing the forum, we select the first view that was performed greater than 15 minutes ago and get all topics posted after that. This would allow topics to remain showing as \"new\" for 15 minutes.\nThis is a problem - views are currently stored in one row per user (so we only know the last time the forum was viewed).  Should be simple to change logic to log a row per view if you think that is best.  Not sure what the reason for the one row was originally except maybe to keep the size of the table down.\n. Seems like it could definitely get huge pretty quick since it tracks forums and topics.  You could always have a rake task to prune, but that's more setup for the user. \nMight also be able to handle it with a session or cookie that expires in 15 minutes and knows the old value.\n. Any preference (or alternative idea)? A cookie would work and keep the table size down, but doesn't seem very clean.  Possible performance issues down the road from logging every view in it's own row.\n. I think that makes sense.  So views_count is just a counter_cache for the overall topic and post, am I understanding that correctly?  I think forem_views already has the count column for the individual user.\n. Ok yeah, I see what your saying, it's the sum of the view counts for each user.  Ok, I'll go that route.\n. This can be closed I believe.  I think it was merged as part of https://github.com/radar/forem/pull/163\n. Will this actually work with will_paginate?  A couple controllers call the per method which I believe is Kaminari only\n. Never mind, just saw the will_paginate monkey patch\n. How do I regenerate the dummy app for development purposes?\n. yeah sorry, just saw the updated readme\n. Should spec/dummy/ be added to the .gitignore file?\n. Ok, sorry I must not have been looking at the correct branch - my .gitignore didn't have it and git was prompting me to readd the dummy files.  I see that it was added in the initial commit.\n. I was also able to reproduce this on my dev server.  The pagination is taking topic posts into account when paginating.  Switching to a join() instead of include() in topic.by_pinned_or_most_recent_post seems to fix the problem\n. This causes one spec to fail I just noticed (might result in some duplicate topics showing).  Investigating now.\n. Yup just added it...pushing now\n. Uniq behaves differently in Rails 3.1 and Rails 3.2....rails 3.2 acts on the query, 3.1 is post query which wouldn't play well with pagination I don't think.\n. I think that uniq() would still have the problem I found in #153.  I implemented it differently in #154 (sorry just realized that pull requests automatically create new issues) that avoids the post table entirely.\n. Because in existing installations topic updated_at will be the same as topic created_at, causing the topics to be ordered by creation instead of by topics with the most recent posts.  Once another post was added it would move up to the top correctly.\n. @radar - added migration\n. Is this the extension you are referring to? https://github.com/romul/spree-solr-search\nFull text search seems like the best way, but would that require extra config for users just looking for basic search functionality?\n. Sounds good I'll look into it.\n. This will cause #150 to reappear which is also a big problem.  I think something along the lines of #154 should fix both issues\n. Thanks,  I can put some more time into it on Monday if you see anything that could be improved\n. Still need some specs for overall view tracking of forums and topics.  Also specs for register_view_by(user) to make sure that is only updating timestamps when appropriate.\n. @radar - Added specs - think this is good to go.  Please let me know what you think.\n. Thanks guys!\n. I was also wondering if setting up a store for this (and future?) user settings would make sense so every new setting doesn't need another column.\n. I was thinking of using ActiveRecord::Store which serializes to json I believe.\n. Where would we use ActiveSupport::Concern?  If we wanted to add settings to multiple models?\n. Sorry, I was talking about forem end-users.  I could see them having more options in the future (and potentially a front-end to edit these options) in addition to this \"auto-subscribe\" option.\n. Let's wait and see what the forem team thinks.  Not a huge deal, just trying to cut down on the number of migrations needed going forward\n. @safarista - are you going to be able to work on this soon?  If not, I can look at it today.\n. I didn't see it - maybe your User model just doesn't have the new forem_auto_subscribe field.  \nYou will potentially need to add it with your own migration because the migration to add it is dynamically generated during install, but not if you just copy over new migrations for upgrade.\n. lib/generators/forem/install/templates/forem_auto_subscribe_migration.rb\n. Yeah unless your Forem user class isn't 'User'.  If it is something else then you will need to change :users.\n. @knewter You're welcome - I enjoy working on this project\n. @parndt I just removed the javascript_include_tag from the view and added it to my manifest.  You have to copy the views over to do that though, so not sure it's a great workaround for everyone.\n. @parndt I'm not sure - my workaround is still working for me.\n. In the js file?\n. If you can that would work fine for the autocomplete path, but not for the groups path.\n. That works, thanks.\n. Yeah, I like that - committed\n. Currently you need to use the DELETE method to unsubscribe which won't work in the email link.  We could get rid of the subscriptions controller and make topic#subscribe and topic#unsubscribe controller actions that work via GET.  Less RESTful, but would work for vanilla links.  I can do that before you pull if you like the approach.\n. Suggestions?  You disagree with approach or turning whitelist_attributes on? \n. K, I was just turning it on so that things actually break when running the specs.  Otherwise everything can be mass assigned no problem (unless attr_accessible is called).\n. ",
    "StevenMcD": "Here are the contents of the GemFile:\nsource \"http://rubygems.org\"\ngem 'rails', :git => \"git://github.com/rails/rails.git\"\ngem 'arel', :git => \"git://github.com/rails/arel.git\"\ngem 'rack', :git => \"git://github.com/rack/rack.git\"\ngem 'sprockets', :git => \"git://github.com/sstephenson/sprockets\"\ngem 'forem', :git => \"git://github.com/radar/forem.git\"\ngem 'forem-theme-base', :git => \"git://github.com/radar/forem-theme-base\"\ngemspec\nI have not altered the forem.gemspec file at all, so that's the same as in your repository. Enjoy the wedding and RailsCamp :)\n. I added the entries to the GemFile in the root of the forem project. Like I said above, I am a complete beginner so if I have made a monumental mistake, feel free to slap me down and laugh at me ;)\n. omg I am so stupid. I thought that was to setup the project so that I could actually work on the forem project itself. Thanks so much. Everything is working fine now.\n. ",
    "jamescook": "Yes, I will\n. ",
    "grigio": "me too\n. ",
    "cobalamin": "Sure, guys, I hope it's working soon! I really love RefineryCMS the way it is and would also love to easily integrate a forum, so I don't mind helping you :)\n@knewter: Has your work anything to do with your fork of refinerycms which contains two versions of refinerycms 3-1 branches? I think I have tried with those, too, but it didn't bring me much further... D:\n. Oh, sorry, clicked on \"close\" accidentally.\n. Just a small comment on the guide given how to set up forem: \nI'm not using refinery at the moment, and well, the Gemfile modifications as given won't work, but you can easily fix it by using this:\ngem 'rails', :git => \"git://github.com/rails/rails.git\", :branch => \"3-1-stable\"\ngem 'arel', :git => \"git://github.com/rails/arel.git\"\ngem 'rack', :git => \"git://github.com/rack/rack.git\", :branch => \"rack-1.3\"\ngem 'sprockets', :git => \"git://github.com/sstephenson/sprockets\"\ngem 'forem', :git => \"git://github.com/radar/forem.git\"\nso, as you see, using branches two times. the rails gem's branch because the current edge version there is already 3.2.x, and this had brought up other issues for me...\nand the rack gem's branch because rails 3.1.x requires a rack 1.3.x version, apparently.\nJust sayin', it really confused me at first, and I guess it's gonna change soon anyways, when a rails 3.1 rc will get the \"c\" removed and be the next release.\n. You'll need to implement that forem_admin? function in some helper and include that helper file in all cases you use it. In my very own application, I included SessionsHelper in ApplicationHelper, so it will be available from everywhere. Then define the function returning some boolean value of whether the current user is an admin or not. IDK if this applies fully to RefineryCMS, haven't used it lately...\ne.g. this would be my basic implementation:\n  def signed_in?\n    !current_user.nil?\n  end\ndef admin?\n    signed_in? && current_user.admin?\n  end\n. Ah, doing this will \"fix\" the issue:\ndef forem_admin?\n    #current_user && current_user.forem_admin?\n    true\n  end\ninside application_controller.rb of the gem's controllers. I know this is not an actual fix. :D\n. Is this needed? I'm actually using my own authentication system, will it work if there will be a current_user variable that's available in controllers and views? Or do I have to do weird linking (I don't know much about mounting engines etc.)\n. Sorry, were and am unavailable to chat on IRC, thanks for the offer though :)\nI'll have a look if it works when I have integrated this into my application, and then post here again. Thank you for now!\n. Okay, just to make things clear, implementing that stuff fixed the issue for me. Thanks a lot! :)\nabitOT,maybeifyoudidntknow?: I just thought I'd be having another issue, I had those ugly object representation strings everywhere instead of my username, and I fixed it by implementing a to_s function that will return self.username. :)\n. What about defining a \"page\" method as a helper for that controller that will call the Kaminari page method? IDK if this makes any sense at the moment...\n. def last_post\n  posts.last\nend\nin forem / app / models / forem / forum.rb\nShould be changed, I suppose.\n. ",
    "frankel": "Finally Rails 3.1 is released!\nIf I integrate forem to RefineryCMS, what should I set to \"Forem.user_class\"?  \"User\" doesn't work.\n. Thanks parndt!\nBut I am still stuck by setting \"forem_admin\". Don't know where to configure this value. \nWish one day there would be a more detailed guide for RefineryCMS integration.\n. After check this issue https://github.com/radar/forem/issues/31 , I still cannot prevent error of \"undefined method `forem_admin?'\" \nparndt, help!\n. Thanks pommesgabel.\nFinally, it needs to add forem_user field to Refinery::User model, and it works.\n. @radar. Here is the stacktrace: \nactiverecord (3.1.0) lib/active_record/relation.rb:459:in method_missing'\n/home/frankel/.rvm/gems/ruby-1.9.2-p180/bundler/gems/forem-9e311b2fe76c/app/controllers/forem/forums_controller.rb:11:inshow'\nactionpack (3.1.0) lib/action_controller/metal/implicit_render.rb:4:in send_action'\nactionpack (3.1.0) lib/abstract_controller/base.rb:167:inprocess_action'\nactionpack (3.1.0) lib/action_controller/metal/rendering.rb:10:in process_action'\nactionpack (3.1.0) lib/abstract_controller/callbacks.rb:18:inblock in process_action'\nactivesupport (3.1.0) lib/active_support/callbacks.rb:434:in _run__2876209848409916127__process_action__3573239026572013727__callbacks'\nactivesupport (3.1.0) lib/active_support/callbacks.rb:386:in_run_process_action_callbacks'\nactivesupport (3.1.0) lib/active_support/callbacks.rb:81:in run_callbacks'\nactionpack (3.1.0) lib/abstract_controller/callbacks.rb:17:inprocess_action'\nactionpack (3.1.0) lib/action_controller/metal/rescue.rb:17:in process_action'\nactionpack (3.1.0) lib/action_controller/metal/instrumentation.rb:30:inblock in process_action'\nactivesupport (3.1.0) lib/active_support/notifications.rb:53:in block in instrument'\nactivesupport (3.1.0) lib/active_support/notifications/instrumenter.rb:21:ininstrument'\nactivesupport (3.1.0) lib/active_support/notifications.rb:53:in instrument'\nactionpack (3.1.0) lib/action_controller/metal/instrumentation.rb:29:inprocess_action'\nactionpack (3.1.0) lib/action_controller/metal/params_wrapper.rb:201:in process_action'\nactiverecord (3.1.0) lib/active_record/railties/controller_runtime.rb:18:inprocess_action'\nactionpack (3.1.0) lib/abstract_controller/base.rb:121:in process'\nactionpack (3.1.0) lib/abstract_controller/rendering.rb:45:inprocess'\nactionpack (3.1.0) lib/action_controller/metal.rb:193:in dispatch'\nactionpack (3.1.0) lib/action_controller/metal/rack_delegation.rb:14:indispatch'\nactionpack (3.1.0) lib/action_controller/metal.rb:236:in block in action'\nactionpack (3.1.0) lib/action_dispatch/routing/route_set.rb:65:incall'\nactionpack (3.1.0) lib/action_dispatch/routing/route_set.rb:65:in dispatch'\nactionpack (3.1.0) lib/action_dispatch/routing/route_set.rb:29:incall'\nrack-mount (0.8.3) lib/rack/mount/route_set.rb:152:in block in call'\nrack-mount (0.8.3) lib/rack/mount/code_generation.rb:96:inblock in recognize'\nrack-mount (0.8.3) lib/rack/mount/code_generation.rb:103:in optimized_each'\nrack-mount (0.8.3) lib/rack/mount/code_generation.rb:95:inrecognize'\nrack-mount (0.8.3) lib/rack/mount/route_set.rb:141:in call'\nactionpack (3.1.0) lib/action_dispatch/routing/route_set.rb:531:incall'\nrailties (3.1.0) lib/rails/engine.rb:455:in call'\nrailties (3.1.0) lib/rails/railtie/configurable.rb:30:inmethod_missing'\nrack-mount (0.8.3) lib/rack/mount/prefix.rb:26:in call'\nrack-mount (0.8.3) lib/rack/mount/route_set.rb:152:inblock in call'\nrack-mount (0.8.3) lib/rack/mount/code_generation.rb:96:in block in recognize'\nrack-mount (0.8.3) lib/rack/mount/code_generation.rb:75:inoptimized_each'\nrack-mount (0.8.3) lib/rack/mount/code_generation.rb:95:in recognize'\nrack-mount (0.8.3) lib/rack/mount/route_set.rb:141:incall'\nactionpack (3.1.0) lib/action_dispatch/routing/route_set.rb:531:in call'\nwarden (1.0.5) lib/warden/manager.rb:35:inblock in call'\nwarden (1.0.5) lib/warden/manager.rb:34:in catch'\nwarden (1.0.5) lib/warden/manager.rb:34:incall'\nactionpack (3.1.0) lib/action_dispatch/middleware/best_standards_support.rb:17:in call'\nrack (1.3.2) lib/rack/etag.rb:23:incall'\nrack (1.3.2) lib/rack/conditionalget.rb:25:in call'\nactionpack (3.1.0) lib/action_dispatch/middleware/head.rb:14:incall'\nactionpack (3.1.0) lib/action_dispatch/middleware/params_parser.rb:21:in call'\nactionpack (3.1.0) lib/action_dispatch/middleware/flash.rb:243:incall'\nrack (1.3.2) lib/rack/session/abstract/id.rb:195:in context'\nrack (1.3.2) lib/rack/session/abstract/id.rb:190:incall'\nactionpack (3.1.0) lib/action_dispatch/middleware/cookies.rb:326:in call'\nactiverecord (3.1.0) lib/active_record/query_cache.rb:62:incall'\nactiverecord (3.1.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:477:in call'\nactionpack (3.1.0) lib/action_dispatch/middleware/callbacks.rb:29:inblock in call'\nactivesupport (3.1.0) lib/active_support/callbacks.rb:392:in _run_call_callbacks'\nactivesupport (3.1.0) lib/active_support/callbacks.rb:81:inrun_callbacks'\nactionpack (3.1.0) lib/action_dispatch/middleware/callbacks.rb:28:in call'\nactionpack (3.1.0) lib/action_dispatch/middleware/reloader.rb:68:incall'\nrack (1.3.2) lib/rack/sendfile.rb:101:in call'\nactionpack (3.1.0) lib/action_dispatch/middleware/remote_ip.rb:48:incall'\nactionpack (3.1.0) lib/action_dispatch/middleware/show_exceptions.rb:47:in call'\nrailties (3.1.0) lib/rails/rack/logger.rb:13:incall'\nrack (1.3.2) lib/rack/methodoverride.rb:24:in call'\nrack (1.3.2) lib/rack/runtime.rb:17:incall'\ndragonfly (0.9.5) lib/dragonfly/middleware.rb:13:in call'\nrack-cache (1.0.3) lib/rack/cache/context.rb:132:inforward'\nrack-cache (1.0.3) lib/rack/cache/context.rb:243:in fetch'\nrack-cache (1.0.3) lib/rack/cache/context.rb:181:inlookup'\nrack-cache (1.0.3) lib/rack/cache/context.rb:65:in call!'\nrack-cache (1.0.3) lib/rack/cache/context.rb:50:incall'\ndragonfly (0.9.5) lib/dragonfly/middleware.rb:13:in call'\nrack-cache (1.0.3) lib/rack/cache/context.rb:132:inforward'\nrack-cache (1.0.3) lib/rack/cache/context.rb:243:in fetch'\nrack-cache (1.0.3) lib/rack/cache/context.rb:181:inlookup'\nrack-cache (1.0.3) lib/rack/cache/context.rb:65:in call!'\nrack-cache (1.0.3) lib/rack/cache/context.rb:50:incall'\nrack (1.3.2) lib/rack/lock.rb:15:in call'\nactionpack (3.1.0) lib/action_dispatch/middleware/static.rb:53:incall'\ndragonfly (0.9.5) lib/dragonfly/cookie_monster.rb:9:in call'\nrailties (3.1.0) lib/rails/engine.rb:455:incall'\nrailties (3.1.0) lib/rails/rack/content_length.rb:16:in call'\nrailties (3.1.0) lib/rails/rack/log_tailer.rb:14:incall'\nrack (1.3.2) lib/rack/handler/webrick.rb:59:in service'\n/home/frankel/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/webrick/httpserver.rb:111:inservice'\n/home/frankel/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/webrick/httpserver.rb:70:in run'\n/home/frankel/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/webrick/server.rb:183:inblock in start_thread'\n. @radar, yeah, with kaminari (0.12.4)\n. btw, my gemfile is:\nsource 'http://rubygems.org'\ngem 'rails', '3.1.0'\ngem 'sqlite3'\ngem 'refinerycms', :git => 'https://github.com/resolve/refinerycms.git'\ngem 'arel', :git => \"git://github.com/rails/arel.git\"\ngem 'sprockets', :git => \"git://github.com/sstephenson/sprockets.git\"\ngem 'forem', :git => \"git://github.com/radar/forem.git\"\ngem 'forem-theme-base', :git => \"git://github.com/radar/forem-theme-base\"\ngroup :assets do\n  gem 'sass-rails', \"  ~> 3.1.0\"\n  gem 'coffee-rails', \"~> 3.1.0\"\n  gem 'uglifier'\nend\ngem 'jquery-rails'\ngem 'ruby-debug19', :require => 'ruby-debug'\ngroup :test do\n  # Pretty printed test output\n  gem 'turn', :require => false\nend\n. Thanks radar and parndt. Waiting for your update:)\n. Tried, and still not work...\n. I applied the initialize code in kaminari (railtie.rb) to forem initializing if will_paginate is found, but it failed again.\n. It works fine! Thanks @radar!\n. I set up a stand alone rails project with forem but without RefineryCMS, this bug disappears. But with the latest RefineryCMS gem, it occurs. Although I think it is totally a Kaminari bug which is fixed in Kaminari's master branch. But when I included Kaminari's master branch as gem, it still doesn't work. So I have no idea what to do next.\n. @parndt Haven't tested yet, but i found a solution to fix the conflict between Kaminari and will_paginate, https://github.com/sferik/rails_admin/issues/816\n. Please verify, thanks.\n. I use has_mailbox gem for private message\n. opps, sorry\n. ",
    "juozasg": "I had a some trouble getting the two of them to work together. The first issue was constant log warnings by kaminari (new pagination gem) about it overriding .page methods with it's own scope. I couldn't find any way at all of preventing them (might be possible by adjusting load order of things) so I ended up creating my own fork of forem that only uses will_paginate\nA more serious problem was that pagination in forem was broken using will_paginate view helper (which you must use if you use Refinery anyway since that's Refinery's default and only pagination). The problem was only visible after 20 topics have been created. I had to add the following snippet to a new initializer file in my own code to overwrite refinerycms/core/config/initializers/will_paginate_monkeypath.rb. The commented out near the bottom is what I changed.\n``` ruby\nfrom refinerycms/core/config/initializers/will_paginate_monkeypath.rb\nmodule WillPaginate\n  module ActionView\n    class LinkRenderer < ViewHelpers::LinkRenderer\n      def url(page)\n        @base_url_params ||= begin\n          url_params = merge_get_params(default_url_params)\n          merge_optional_params(url_params)\n        end\n    url_params = @base_url_params.dup\n\n    add_current_page_param(url_params, page)\n    url_params.delete(:page) if url_params[:page] == 1\n\n    # @template.main_app.url_for(url_params)\n    @template.url_for(url_params)\n  end\nend\n\nend\nend \n```\nIt all seems to work after this.\n. I have no idea why Refinery has the monkey patch there. I just took their patch and changed one line so it uses all routes for url_for including engines instead of just main app routes.\nAlso, url_params.delete is my own hack to not have ?page=1 param anywhere.\n. Thanks for removing kaminari dependency. I'm not seeing new issues with the versions of forem and refinery I'm using. I've got a brief question related to this: what are your plans for including these changes in 1-0-stable branch or when do you plan updating 1-0-stable? Just curious cause I need to customize forem more and would like to know what branch to base my work on.\n. That makes sense. I'll try and see if I can figure out how to patch Forem to do this. The forum looks very nice, but I need this feature.\n. +1 on this feature and AntoineGrodnin's requirements! except banning/blocking particular users should be a must have imo and as far as search goes, it should be part of the larger search feature i think.\nno comment on implementation\n. view/forem/forums/_forum also has the same issue with t('.last_post') so maybe absolute translation keys would be better?\n. This commit fixes it (feel free to cherry pick if it works) https://github.com/juozasg/forem/commit/6ead83ba68f8f6f29bef095d1caf18cf99725b28\n. Note: this is a request to merge int your 1-0-stable, not your master like github heading says\n. yes, i did :)\n. just cherry picked this one for 1-0-stable also:\n83e86b6 Extend will_paginate only when ActiveRecord::Base is loaded\nit's needed to work with latest rails\n. Hey parndt,\nI assume since this is closed you are not interested in including these changes in radar/1-0-stable? If that's the case can you include few of these in master (ones that are not already there)? When are you planning to update 1-0-stable btw? \n. Sorry, this is an incorrect pull request. Here's the corrected one: https://github.com/radar/forem/pull/226. I've added few more small commits from master and update the pull request description.\n. i've also learned that some moderation stuff is little broken in 1-0-stable. This moderation fix commit should be included in radar/1-0-stable 5915732423747c36027af26671ccada0eec91b5a It doesn't cherry-pick cleanly, so there might be some other changes in between. I'm going to look at it\n. Looking at this, there are tons of moderation fixes and tweaks that go on top of radar/1-0-stable so I'm not sure what the roadmap for 1.0 is? If 1.0 should include moderation it might make more sense just to stabilize master instead of incrementing 1-0-stable with patches from master? Lemme know what you think.\n. This also requires updating the twist theme: https://github.com/radar/forem-theme-twist/pull/1\n. When you go and view a topic, each post has a reply button on it. When you click the reply button on a post that has body content of \"reply no. 15\" this is what you get: http://img69.imageshack.us/img69/2975/foremshowreplytopostscr.png\n. I've considered both and created a new one, because using the existing one would require adding more parameters to the partials (for example a variable to disable actions). The post partial is pretty complex already imo so I didn't want to add to it. Alternatively, I could factor out some parts of the post partial (like actions, moderation stuff, etc.) into other partials - then if I added a 'preview' or 'reply_to_post' parameter to the post partial the logic would still be less complex. Let me know what you prefer.\n. Fails on ruby 1.8.7 with \n/home/vagrant/.rvm/gems/ruby-1.8.7-p358/gems/rubypython-0.5.3/lib/rubypython/pyobject.rb:14: uninitialized constant RubyPython::PyObject::FFI (NameError)\nNot if this is related to this commit in any way.\n. This also requires updating the twist theme: https://github.com/radar/forem-theme-twist/pull/1\n. updated with new commit to use content_tag helper\n. Also created a new formatter for raw HTML. If you merge this commit into master, you might also want to update the wiki page listing formatters to include this one: https://github.com/juozasg/forem-html_formatter\n. I've seen https://github.com/radar/forem/pull/192 also, but that's 3 months ago.\n. Ok, here's the pull request. Specs pass and it seems to work fine with my own app. https://github.com/radar/forem/pull/264\n. Updated with changes except moving creating \"General\" Category to seeds.rb\n. yep, just came from master\n. oi, this should have not been checked in. lemme fix this\n. forced update since this really shouldn't be in the history\n. just following the format above that uses several before statements for one test. i will fix this\n. Moved this to seeds.rb for two reasons. First, including FriendlyId in Forem::Category will add a callback before_save which will look for slug column to update with correct slug. But at this point forem_category table does not have the slug column yet (that comes with the newest migration) so it's impossible to do things on Forem::Category (or Forem::Forum or Forem::Topic) before all migrations have been run.\nSecond reason is that this belongs to seed.rb anyway since it's seed data.\n. Certainly\n. will do\n. ",
    "ugisozols": "We still need that monkeypatch for will_paginate to work with refinery's url scope. There's an open PR in will_paginate repo which would allow us to remove that monkeypatch but as you can see it's still not merged in.\nTbh I haven't investigated this issue well enough and maybe there's more easy way to fix this.\n. I was too lazy to read through all this thread but is this still an issue?\n. Please see #149.\n. I'm sorry but what's the problem?\n. :+1: @benatkin. I agree with you that dummy_app rake task should be only available when developing forem. Thanks!\n. Specs pass - what's cooler than that? :)\n. bundle exec rake forem:dummy_app\n. Yes, the generator is way out of date and there's no actual use case for it.\n. Since Forem and Refinery are both separate engines you can use both of them in your app by just mounting them at different paths:\n``` ruby\nin routes.rb\nRails.application.routes.draw do\n  mount Refinery::Core::Engine, :at => \"/\"\n  mount Forem::Engine, :at => \"/forum\"\nend\n```\n. ",
    "STRd6": "Not sure, looking at the posts association in the Topic model it seemed like it should be the other way but they end up swapped in the view. Take a look at http://forem.heroku.com/, it exhibits the error.\n. See #30, may be related.\n. ",
    "filiptepper": "Awesome, thanks Philip!\n. See #35.\n. Geez\u2026 ;-)\n. Fixed!\n. ",
    "supairish": "Hmm maybe it's something else then, using; gem 'forem', :git => \"git://github.com/radar/forem.git\" in my Gemfile with bundle install gives me\nUsing simple_form (1.4.2) \nUsing forem (0.1) from git://github.com/radar/forem.git (at master)\nSo that looks good, but when I unpack the gem, I get\nirish-macbookpro:~/Projects/mww/vendor/gems(master)$ gem unpack forem\nUnpacked gem: '/Users/cirish/Projects/mww/vendor/gems/forem-0.0.1'\nNotice the 0.0.1 now, upon inspecting this it's the code from the 0.0.1 tag not master.  Not sure how it's 0.0.1 now as I don't even have forem installed locally.\nirish-macbookpro:~/Projects/mww/vendor/gems(master)$ gem list forem\n* LOCAL GEMS *\nirish-macbookpro:~/Projects/mww/vendor/gems(master)$ \nSo does unpacking a remotely referenced gem pull the last tag, instead of master?  That's the only thing I can think of that's happening and confusing me\n. Gotcha, well the only reason I was unpacking it was because I couldn't figure out how to override the layouts used by the controllers in the Forem Engine.  Is there an easy way to do that?\n. Understood, but I'm trying to get the forem controllers to use a layout file other than layouts/application.html.erb from my app, i.e. layouts/forem.html.erb\nAlso, in a side note, I wasn't able to get the forem helper \"forem_theme_tag\" to work in my application layout, without changing the forem engine.rb file to have an initializer block like so:\n``` ruby\nmodule ::Forem\n  class Engine < Rails::Engine\n    isolate_namespace Forem\nclass << self\n  attr_accessor :root\n  def root\n    @root ||= Pathname.new(File.expand_path('../../', __FILE__))\n  end\nend\n\ninitializer 'engine.helper' do |app|\n  ActionView::Base.send :include, Forem::ApplicationHelper\nend\n\nend\nend\n```\nNot sure if Engines are suppose to do this including auto-magically, but I needed it in my app.  I'll look into a patch for that rake task.\n. If you try using the forem_theme_tag helper in a layout defined in your main app, it's not available.  Either of the tricks above make it available.  Perhaps there's a better way to do that but I'm not very familiar with the internal workings of Rails 3 Engines.  I'm guessing the assumption with forem was that you wouldn't embed it's views in a layout defined in the main app?\n. Gotcha, thanks for the clarification\n. Well just stumbled across this project https://github.com/radar/forem-theme-base  I guess that answers my question, my bad, thanks.\n. ",
    "wakeless": "The main problem seems to be caused by the fact that the Kaminari loads itself into ActiveRecord WHEN you call page\nhttps://github.com/amatsuda/kaminari/blob/master/lib/kaminari/models/active_record_model_extension.rb#L12\nI suspect if you include \n     include Kaminari::ActiveRecordRelationMethods\n     include Kaminari::PageScopeMethods\ninto the relation it might work\n. If they had exactly the same API they'd conflict even worse. The problem is\nwhere the API overlap.\nOn Sat, Sep 10, 2011 at 6:05 PM, Ryan Bigg \nreply@reply.github.comwrote:\n\nIt would be super nice if these two gems had identical APIs, but\nunfortunately they both have divergent ideas of what the API for pagination\nshould be. If these two libraries had the same API then what would be the\npoint of having two libraries besides possible performance improvements?\nCurrently, we don't use anything too intense in forem and so the \"hacks\"\nin my commits earlier today I think are fine.\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/38#issuecomment-2058413\n\n\nCheckout my new website: http://myachinghead.net\nhttp://wakeless.net\n. ",
    "ToadJamb": "I'm hiding it on the topic page. Unhiding does work - as long as you do one of two things:\n1. Do not navigate away from the topic page for the hidden topic.\n2. Remember the id of the hidden topic so that you can \"hack\" the url thereby allowing you to click the \"Show This Topic\" link.\nI'm saying there is no UI support to unhide a topic once you navigate away from the hidden topic's page. It appears that not even admin's have a way to see a list of hidden topics.\n. ",
    "impact11": "Hi Ryan,\nWe have been able to make Forem work nicely Mongoid without too much monkey patching; however, we did have to take some parts of the controllers and SQL-like things out of it.\nWe'd love to contribute this back, but am trying to figure out possible ways of merging it in so that it's part of the core rather than some kind of external add-on.\nAny thoughts as to how we might be able to abstract some of the database-dependent pieces?\n. Perhaps not \"database-dependent\", but rather \"database-technology-dependent\" (i.e. SQL in code) .\nMostly, it's inside the models. We hadn't looked at the main branch code in a few months, and there were SQL calls in there in a number of places. But now I see that a lot of the SQL syntax that we had stripped out is actually no longer in the main branch - we see there's been a lot of de-sqlification.\nThere are some Mongoid-specific aspects as well, related to how one has to build embedded documents, or how sorting and selector clauses are defined, when you build the host document which cause some of the controllers to require one or two calls.\nPerhaps the key thing to do is just make sure that users who want to use Mongo/Mongoid have a separate set of API-compatible Modules that are transparent to the controllers... which I think the main branch is already close to it, and we're close to it too in our build.\nLet me go back to the main branch, do some finessing of our \"just make it work code\" and see if I can't propose something workable. \n. Hey there,\nYup, we have it working. We have some app-specific code that we need to\nyank out before we publish, and it's forked from an old version (the\nupstream merge will be epic) but it's smooth.\nI'll see if I can get it cleaned up over the next week to give you a good\nstarting point.\nOn Jul 19, 2012 5:53 PM, \"jbredeche\" \nreply@reply.github.com\nwrote:\n\nHi @impact11, I'm also trying to get Forem to work with Mongoid/Mongo.\n Did you succeed in doing so?  Would love to see what you came up with.\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/47#issuecomment-7116468\n. We're trying to get our site out into Beta over the next few weeks, so our cycles are a bit tied up, but one of the first things we need to do is take the current implementation of forem-mongoid and update it to the current version of Forem -- we're about 9 months behind. On the plus side, it's not a difficult implementation. I'm hopeful we can make a push out by around October.\n. I haven't dug into the code for a bit, and there have been\nnon-insignificant changes in the main branch that may make what I'm writing\ninaccurate, but our experience getting forem to work with\nActiveModel/Mongoid pointed to the fact that at the very least, all of the\nmodules needed to be touched in some way to establish the kinds of\nrelationships Mongoid supports, and there was some minor amount of\nmodification to finder/criteria language to make it work reliably.\n\nThe ideal approach would be going through all of the finders/criteria\nlanguage in the main branch, identifying those that would require a rewrite\nto support mongoid, and determine if there is a way of writing them so that\nthey are ORM-independent.\nOn Thu, Aug 30, 2012 at 12:12 PM, Josh Adams notifications@github.comwrote:\n\nWould it not be possible to build this as a plugin or overlay on forem\nthat, when required, made it support mongo rather than activerecord? If\nnot, we could consider a more high level strategy for abstracting out the\npersistence layer. I'm of the opinion that leads to better code anyway\nand I have some experience doing this with plutus (though we've not yet\ngotten my company's work on that point merged).\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/issues/47#issuecomment-8164723.\n. I have something better -- I have the cause.\n\nTurns out that for some reason, inside forem/config/routes.rb I had a call to mount the Forem engine...  so it was just loading the engine over and over and over again.\nForem::Engine.routes.draw do\n    mount Forem::Engine, :at => \"/forums\"     # Don't ever do this!\nI think this got in there when I was installing Forem and trying to get it set up working with my site.\nI'll close it on my end.\n. ",
    "jbredeche": "Hi @impact11, I'm also trying to get Forem to work with Mongoid/Mongo.  Did you succeed in doing so?  Would love to see what you came up with. \n. Thanks, very nice of you!\n. ",
    "ronakjain90": "Do we have a Mongoid Patch or fork available? for forum to work ?\n. ",
    "skipperguy12": "Hi, I know this is a bit old but to anyone who was asking for a mongoid version of forem, I've been working on a separate engine modeled after forem for mongoid. Keep in mind, this isn't forem or a fork of forem (although it does borrow a lot of it's code):\nhttps://github.com/NJayDevelopment/mongoid_forums/\nIt's not 100% complete (I'm open to PRs), but I think that if you were looking for a forum system for mongoid that was similar to forem, this would be fairly good. Here is a demo app (note: this is not the one in test/dummy) if you were curious to see how far along the project is. Feel free to make an account:\nhttp://mongoid-forums.herokuapp.com\n. ",
    "johnbpetersen": "Ok. So when go to local host and then go to /forem the only thing that appears is the Forums header and then the table headers forum, topics, posts, and views. How do I make it functional?\n. Sorry if it is not making any sense. Here is the github for what I've tried to build today -- https://github.com/johnbpetersen/forum_sample\nOnly been at this for a few weeks now. Any help is greatly appreciated.\n. Ok. Thanks man. I just forked the forem.heroku.com and am going to work with that. That's what I was trying to do in the first place.\n. ",
    "szymon-przybyl": "This one seems also nice: http://www.wymeditor.org/\nFor example Refinery, Rails CMS, is using this editor.\n. No problem, thanks for you for making Forem! :-)\n. I've digged up that Forem actually stores return_to url: https://github.com/radar/forem/blob/master/app/controllers/forem/application_controller.rb , in session[:return_to], so, as for Devise, it is enough to overwrite stored_location_for(resource) in ApplicationController like this:\nprivate\ndef stored_location_for(resource)\n  session.delete(:return_to) || super(resource)\nend\n. For now i've just created wiki page with that information: https://github.com/radar/forem/wiki/Redirect-to-return_to-path-after-signing-in-with-Devise\n. Ok, i've find out how simple_form is looking for attributes names and I've added polish translations to them in this pull request: https://github.com/radar/forem/pull/65\nBut there is still one problem - on the new and edit forms of topic there is a text on a button which uses name of model (Create Topic and Update Topic). I've find out so far that this is not forem thing, but simple_form, and it is using default rails-i18n paths for it: helpers.submit.create and helpers.submit.update.\nI've finally just added translations of these buttons for each model: helpers.submit.model.action, but still I don't know how to translate models names which are used in these buttons, even when I add activerecord.models.model translation, it still is loading english name of model to these buttons, I don't know why, maybe because forem models are in Forem module?\n. Yes, all is alright now.\n. Ok, i've found out how to solve that problem with models names - just overwrite whole label of button for each model :) like this: helpers.submit.model.[create|update] , but I still don't know how to achive that only translating models names, but I think that solution is ok.\n. @parndt yes\n. ",
    "browning": "I would like it if we had a wysiwyg editor by default instead of markdown.\nHaven't tried it yet, but ckeditor looks good , there is also a gem that would set us up nicely with file uploads: https://github.com/galetahub/ckeditor\nI realize that wysiwyg v markdown is somewhat of a religious topic haha, but is there support for wysiyg here?\nWe could possibly provide support for both via configuration, but it would be pretty messy I think.\n. Thanks a lot for the advice, going to close this pull request and do a new one with these changes\n. Yep, I will take a look at adding permissions tonight\n. Alright, I think this is good to go now\n. actually sorry, hold on, removing this label breaks some of the tests\nLooking into fixing the tests now\n. Yea I will close for now. \nWith it removed the new topic page looks worse, but the reply page looks better IMO.\nWill try to come up with a better solution if I have some free time later.\n. Are you logged in as a user with the forem_admin flag set?\nIf you are, you should see a link to the admin area where you can create forums.\nYou can set the forem_admin flag in the users table in the database\n. Hey, sorry I just did  pull request #126 to fix this bug.\nThe installation couldn't see the user_class because forem.rb wasn't loaded after it was installed in the generator.\nIt now handles this. \n. Yes , as long as migrations are run, the general category gets created in the create_forem_categories migration.\nNote that the seeds only run in the installer if the migrations are also run.\n. the constantize gets called automatically when you use user_class in lib/forem.rb right now\n. ",
    "nruth": "Sounds cool.\nI think it'd be convenient to have blacklist and whitelist defaults available for default permissions.\nFor anonymous access, what about a non-persisted object to represent anonymous visitors? \nIt could have permissions set in the class def.\n. That's a good point. We've already used the generate views stuff so I'll look at this as a quick-fix.\nI was thinking of the adapter pattern, having a (forum) post processing adapter, which we could plug in and out as wanted.\nThe interface seems pretty simple, one method which takes the post text and returns HTML.\nThis would probably allow someone to extend markup to be a user preference, if the controller and user model were made smart enough. This isn't something I need right now but it could be attractive.\nA residual problem would be the default gem dependency for markdown. This doesn't bother me much, but it does give me another idea. If no formatting was the default, then markdown, textile, or whatever, could be installed by adding a gem, like for loading themes.\n. I've made the initial core changes, and put together a gem for RedCloth/Textile formatting. It's also possible to just override the helper in the app which is loading forem.\nhttps://github.com/nruth/forem/commit/486c1e54e834c8f2622ccdba255a9c4918aa5381\nI'm not sure returning plain text is a good idea though; people will expect (safe) html to come back, which they can just insert into their template. Do you think it's sensible to make the default behaviour to wrap plain text in a pre tag? \nOr a p tag? More than that gets into re-implementing markdown territory.\n. Also, anyone who's used the forem view generator will get a method missing template error after this change.\nIt may be better to add a deprecation message to forem_markdown rather than simply removing it?\n. I think this is a sensible update. We're also using a virtual attribute rather than a boolean in the db.\n. Great, thanks!\n. Will do both. Thanks.\n. ",
    "tanraya": "I develop an engine that similar to forem and I need authorization system too. I think we need a special gem that can give us convenient way to organize authorization in mountable engines.\n. This is because this form is closer to natural language\n. I had the situation that well described here http://blog.tddium.com/2011/08/07/rails-time-comparisons-devil-details-etc/\nIf I remove to_s from test then I get:\n```\nFailures:\n1) Forem::Post after creation sets topics last_post_at value\n     Failure/Error: topic.last_post_at.should == post1.created_at\n       expected: Fri, 20 Apr 2012 05:16:39 UTC +00:00\n            got: Fri, 20 Apr 2012 05:16:39 UTC +00:00 (using ==)\n       Diff:\n     # ./spec/models/post_spec.rb:58:in `block (3 levels) in '\nFinished in 25.52 seconds\n168 examples, 1 failure\nFailed examples:\nrspec ./spec/models/post_spec.rb:54 # Forem::Post after creation sets topics last_post_at value\n```\n. Should I bring it back?\n. Done\n. ",
    "bambielli": "Question: how do we set that? I'm assuming it is in the forem controller, which we don't have access to? \nOur log-in system for our app isn't using devise...we are just setting a session variable when users log in that is set to their profile id. We are also setting a session[:admin] = true if the admin is logged in.\nWe would like it if we could just substitute forem_admin with session[:admin]. \n. ",
    "jtdavis247": "how do you create a forem_admin? would i do it in the cole like this...\nToddirb(main):011:0> admin = Admin.create! do |u|\nirb(main):012:1* u.email = 'jj@gmail.com'\nirb(main):013:1> u.password = 'lakers34'\nirb(main):014:1> u.password_confirmation = 'lakers34'\nirb(main):015:1> u.profile_name = 'lakers34'\nirb(main):016:1> u.forem_admin = true\nirb(main):017:1> end\n. I wonder why its still saying access denied when i try to view admin controls even though i am logged in as the admin i created.... \n. it says it doesnt like the line u.forem_admin = true in the console\n. when I type:\n1.9.3-p448 :016 > admin = Admin.create! do |u|\n1.9.3-p448 :017 >     u.email = 'sampleemail@gmail.com'\n1.9.3-p448 :018?>   u.password = 'password'\n1.9.3-p448 :019?>   u.password_confirmation = 'password'\n1.9.3-p448 :020?>   u.forem_admin = true\n1.9.3-p448 :021?>   end\nI get this error \nNoMethodError: undefined method forem_admin=' for #<Admin:0x007f9f3ae20ac8>\n    from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activemodel-3.2.14/lib/active_model/attribute_methods.rb:407:inmethod_missing'\n    from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-3.2.14/lib/active_record/attribute_methods.rb:149:in method_missing'\n    from (irb):20:inblock in irb_binding'\n    from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-3.2.14/lib/active_record/validations.rb:40:in create!'\n    from (irb):16\n    from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/railties-3.2.14/lib/rails/commands/console.rb:47:instart'\n    from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/railties-3.2.14/lib/rails/commands/console.rb:8:in start'\n    from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/railties-3.2.14/lib/rails/commands.rb:41:in'\n    from script/rails:6:in require'\n    from script/rails:6:in'\nI have been trying to get access to the admin panel for days not but i can't get forem to recognize my admin i created in the DB as an admin. I am not sure what I am missing. \nadmin model:\nclass Admin < ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n# Setup accessible (or protected) attributes for your model\n  attr_accessible :email, :password, :password_confirmation, :remember_me\n  # attr_accessible :title, :body\nend\nuser model:\nclass User < ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n# Setup accessible (or protected) attributes for your model\n  attr_accessible :email, :password, :password_confirmation, :remember_me,\n                   :first_name, :last_name, :profile_name\n  # attr_accessible :title, :body\nvalidates :first_name, presence: true\nvalidates :last_name , presence: true\n  validates :profile_name, presence: true,\n            uniqueness: true, format: { with: /^[a-zA-Z0-9_-]+$/, \n                                        message: 'Must be formatted without spaces.'\n                                      }\nvalidates :email , presence: true, \n            uniqueness: true\nvalidates :password , presence: true\nhas_many :statuses\n  has_many :topics\ndef full_name\n    first_name + \" \" + last_name\nend\ndef gravatar_url\n    stripped_email = email.strip\n    downcased_email = stripped_email.downcase\n    hash = Digest::MD5.hexdigest(downcased_email)\n\"http://gravatar.com/avatar/#{hash}\"\nend\nend\napplication controller:\nclass ApplicationController < ActionController::Base\ndef forem_user\n    current_user\n  end\n  helper_method :forem_user\nprotect_from_forgery\nend\napplication_controller_decorator.rb:\nForem::ApplicationController.class_eval do\n  def forem_admin?\n    session[:admin]\n  end\nend\nI have not changed any of my controllers that came with devise.\nwhen i try to access the admin pages after logging in through admins/sign_in path  it says access denied. not sure what to do if you knew what was going on I would be eternally greatful! Thanks so much for your time!\n. there are two migrations you could be speaking of \nfirst:\nclass AddAdminToUsers < ActiveRecord::Migration\n  def self.up\n    add_column :users, :admin, :boolean, :default => true\n  end\ndef self.down\n    remove_column :users, :admin\n  end\nSecond:\nThis migration comes from forem (originally 20120616193446)\nclass AddForemAdmin < ActiveRecord::Migration\n  def change\n    unless column_exists?(user_class, :forem_admin)\n      add_column user_class, :forem_admin, :boolean, :default => true\n    end\n  end\ndef user_class\n    Forem.user_class.table_name.downcase.to_sym\n  end\nend\n. k I just created a migration and here is what it looks like. \n```\nclass AddAdminForemToAdmin < ActiveRecord::Migration\ndef self.up\nadd_column :admins, :forem_admin, :boolean, :default => true\nend\ndef self.down\nremove_column :admins, :forem_admin\nend\nend\n```\nI then when in and made sure I created an admin by doing this in my console\n1.9.3-p448 :016 > admin = Admin.create! do |u|\n1.9.3-p448 :017 > u.email = 'sampleemail@gmail.com'\n1.9.3-p448 :018?> u.password = 'password'\n1.9.3-p448 :019?> u.password_confirmation = 'password'\n1.9.3-p448 :020?> u.forem_admin = true\n1.9.3-p448 :021?> end\nand it worked great it appeared.\nThen I went in to access the admin pages again and I am still getting access denied. So sorry about the hassle and thank you very much for your help.\n. my app can be found at https://github.com/jtdavis247/game/commits/master. Thank you @radar!!\n. @radar I just followed https://github.com/plataformatec/devise/wiki/How-To:-Add-an-Admin-role which describes how to generate an admin with devise. If thats not a good approach I destroyed that with rails destroy devise admin. is that all that would need to be done ?\n. Never mind! Got it man! Thank you! thank you Thank you!@radar == Lifesaver\n. ",
    "caffo": "Fixed.\n. ",
    "idearise": "Thanks! Sorry, a bit busy to do this yesterday.\n. bundler (1.0.21)\n. ",
    "docunext": "Aha - indeed I am using inherited views. Good catch, something I'll have to be mindful of in the future as I plan to leverage engines all over the place.\n. Ah - yeah, that will also work. It was just:\n= render :partial => 'head'\nbut it should have been application/head.\nThanks, great project by the way!!\n. ",
    "shimms": "Yeah that fixed it - thanks for the quick reply.\n. ",
    "lsrojas74": "I follow instructions from http://stackoverflow.com/questions/6665949/how-do-you-activate-or-set-the-default-rake\nso I make:\nvim /usr/local/rvm/gems/ruby-1.9.3-p0/bin/rake\nand you see:\n!/usr/local/rvm/rubies/ruby-1.9.3-p0/bin/ruby\n\nThis file was generated by RubyGems.\n\nThe application 'rake' is installed as part of a gem, and\nthis file is here to facilitate running it.\n\nrequire 'rubygems'\nversion = \">= 0\"\nif ARGV.first =~ /^(.*)$/ and Gem::Version.correct? $1 then\n  version = $1\n  ARGV.shift\nend\ngem 'rake', version   CHANGE THIS LINE TO:\ngem 'rake', '0.9.2.2'\nload Gem.bin_path('rake', 'rake', version)\nsave the changes and from console execute: rake -V\nand this must be the output: rake, version 0.9.2.2\n(I 'm using this version with rails 3.2.3)\nIf you are using RubyMine go to file + invalidate caches, close project (if any => file + close project) and close the ide and open again. If you are starting a total new project delete the folder and start again\n. ",
    "reset": "@gabrielbaez when working with an engine that uses a dummy for testing you have to access the Rake tasks under the app namespace\nrake app:routes\nStill, you might not get the output you are expecting since Forem is a fully isolated engine.\n. Weird that theres no built in way to get an output of an Engines routes in Rails yet\n. ",
    "dapz": "I can look into it in a couple of weeks. Assuming that nobody gets to\nit before then.\nOn Sun, Nov 27, 2011 at 12:25 AM, Ryan Bigg\nreply@reply.github.com\nwrote:\n\nWould you be able to submit a patch that added this to Forem?\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/84#issuecomment-2886600\n. This seems to be a good bet: https://github.com/LTe/acts-as-messageable\n. See this:\nhttp://stackoverflow.com/questions/5172321/help-using-devise-with-the-built-in-omniauth-support\n\nDevise defines the route here:\nhttps://github.com/plataformatec/devise/blob/master/lib/devise/omniauth/url_helpers.rb\n. ",
    "chooh": "+1 for has_mailbox\n. ",
    "danneu": "Private messages are conversations. Forem already has a threaded posts system in place. Aren't private conversations no different than a more private implementation of what the forum already uses to facilitate communication?\nIn that acts-as-messageable gem, you're just sending messages to models. \n@me.send_message(@you, \"Hello\").\nThere's no chain of replies to follow. It's like email before our software decided to thread our emails into conversations, or texting on my non-smartphone. As soon as you add reply_to_id, you're literally just reimplementing something Forem already has polished.\n. If the crude way would be to write conversation/message models that replicate topic/posts and repeat a bunch of logic, I guess the clean way would be to put that logic into a module that you'd mixin to topics/posts and conversations/messages. Sort of like what the above gems do. That's gotta be a lot of refactoring, though. \nOn the other hand, if the choice is between using an above gem or manually copy and pasting topic/post logic into a PM system, neither one seems any DRYer than the other if they're just similar implementations of a similar concept. Even copy and pasting \nI'm no Rails wizard and I've never mixed in a module in my life, but that's what comes to mind.\n. @safarista: I might have confused the discussion, but I was just pointing out that private messages are, in essence, just conversations that follow the same Topic/Post paradigm (the machinery already in place). But elegantly reusing code is not something I'm well-versed in.\n. @regedarek Looks good to me. I didn't mean to ostensibly stagnate this issue when I made the observation that private message conversations are conceptually just Topics that only recipients can see and participate in.\nLead the way.\n. ",
    "ghost": "+1 for adding this feature. \n. Thanks a lot for your answer. Indeed, the application js was not included for some reason. It works perfect now.\n. The railties worked:\nCopied migration 20120726235302_add_friendly_id_slugs.forem.rb\nAs promising as that message looked, I'm still getting the error when I run db:migrate, though.\n. ```\n==  CreateForemCategories: migrating ==========================================\n-- create_table(:forem_categories)\n   -> 0.0800s\nrake aborted!\nAn error has occurred, all later migrations canceled:\nundefined method slug' for #<Forem::Category:0x3887f88>\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activemodel-3.2.5/lib/activ\ne_model/attribute_methods.rb:407:inmethod_missing'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/attribute_methods.rb:149:in method_missing'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/friendly_id-4.0.7/lib/frien\ndly_id/slugged.rb:254:inshould_generate_new_friendly_id?'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/friendly_id-4.0.7/lib/frien\ndly_id/slugged.rb:273:in set_slug'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.5/lib/act\nive_support/callbacks.rb:407:in_run__267392298__validation__1000058309__callba\ncks'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.5/lib/act\nive_support/callbacks.rb:405:in __run_callback'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.5/lib/act\nive_support/callbacks.rb:385:in_run_validation_callbacks'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.5/lib/act\nive_support/callbacks.rb:81:in run_callbacks'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activemodel-3.2.5/lib/activ\ne_model/validations/callbacks.rb:53:inrun_validations!'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activemodel-3.2.5/lib/activ\ne_model/validations.rb:193:in valid?'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/validations.rb:69:invalid?'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/validations.rb:77:in perform_validations'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/validations.rb:50:insave'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/attribute_methods/dirty.rb:22:in save'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/transactions.rb:241:inblock (2 levels) in save'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/transactions.rb:295:in block in with_transaction_returning_status'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/connection_adapters/abstract/database_statements.rb:192:intransactio\nn'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/transactions.rb:208:in transaction'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/transactions.rb:293:inwith_transaction_returning_status'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/transactions.rb:241:in block in save'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/transactions.rb:252:inrollback_active_record_state!'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/transactions.rb:240:in save'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/persistence.rb:45:increate'\nC:/Sites/shelflives/db/migrate/20120726003066_create_forem_categories.forem.rb:9\n:in change'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/migration.rb:407:inblock (2 levels) in migrate'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/benchmark.rb:280:in measure'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/migration.rb:407:inblock in migrate'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/connection_adapters/abstract/connection_pool.rb:123:in with_connectio\nn'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/migration.rb:389:inmigrate'\nC:in migrate'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/migration.rb:720:inblock (2 levels) in migrate'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/migration.rb:777:in call'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/migration.rb:777:inddl_transaction'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/migration.rb:719:in block in migrate'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/migration.rb:700:ineach'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/migration.rb:700:in migrate'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/migration.rb:570:inup'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/migration.rb:551:in migrate'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.5/lib/acti\nve_record/railties/databases.rake:153:inblock (2 levels) in '\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.\nrb:205:in call'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.\nrb:205:inblock in execute'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.\nrb:200:in each'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.\nrb:200:inexecute'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.\nrb:158:in block in invoke_with_call_chain'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/monitor.rb:211:inmon_synchronize'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.\nrb:151:in invoke_with_call_chain'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.\nrb:144:ininvoke'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli\ncation.rb:116:in invoke_task'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli\ncation.rb:94:inblock (2 levels) in top_level'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli\ncation.rb:94:in each'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli\ncation.rb:94:inblock in top_level'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli\ncation.rb:133:in standard_exception_handling'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli\ncation.rb:88:intop_level'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli\ncation.rb:66:in block in run'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli\ncation.rb:133:instandard_exception_handling'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli\ncation.rb:63:in run'\nC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in'\nC:/RailsInstaller/Ruby1.9.3/bin/rake:19:in load'\nC:/RailsInstaller/Ruby1.9.3/bin/rake:19:in'\nTasks: TOP => db:migrate\n```\n. @parndt That did the trick. Thanks!\n. I'd just like to +1 this issue and add a bit of my own experience, (not sure if this will help or just muddle the issue, but...):\nI'm using Forem on two different apps, both are running Rails 3.2.13.  I was having the same issue described by everyone else, but was able to solve it in one of the apps by including the initialize_on_precompile = true directive in application.rb.  I duplicated the fix on my other app -- and no joy. It seems bizarre that two apps running on the same version of rails would react differently, but that's my situation.  If it helps:\nbundle list for the 'working' app:\n- actionmailer (3.2.13)\n- actionpack (3.2.13)\n- activemodel (3.2.13)\n- activerecord (3.2.13)\n- activeresource (3.2.13)\n- activesupport (3.2.13)\n- addressable (2.3.4)\n- arel (3.0.2)\n- better_errors (0.9.0)\n- binding_of_caller (0.7.1)\n- browser (0.1.6)\n- builder (3.0.4)\n- bundler (1.3.5)\n- cancan (1.6.10)\n- capistrano (2.15.4)\n- capybara (2.1.0)\n- carrierwave (0.8.0)\n- chunky_png (1.2.8)\n- coderay (1.0.9)\n- coffee-rails (3.2.2)\n- coffee-script (2.2.0)\n- coffee-script-source (1.6.2)\n- compass (0.12.2)\n- compass-rails (1.0.3)\n- daemons (1.1.9)\n- dalli (2.6.4)\n- database_cleaner (1.0.1)\n- debug_inspector (0.0.2)\n- decorators (1.0.3)\n- delayed_job (3.0.5)\n- delayed_job_active_record (0.4.4)\n- diff-lcs (1.2.4)\n- erubis (2.7.0)\n- eventmachine (1.0.3)\n- execjs (1.4.0)\n- factory_girl (4.2.0)\n- ffaker (1.16.1)\n- forem (1.0.0.beta1)\n- friendly_id (4.0.9)\n- fssm (0.2.10)\n- gemoji (1.1.2)\n- gli (2.5.6)\n- globalize3 (0.3.0)\n- haml (4.0.3)\n- haml-rails (0.4)\n- highline (1.6.19)\n- hike (1.2.3)\n- httparty (0.11.0)\n- i18n (0.6.1)\n- i18n-active_record (0.0.2)\n- infinity_game_content (0.12.0)\n- journey (1.0.4)\n- jquery-rails (3.0.0)\n- json (1.8.0)\n- kaminari (0.14.1)\n- launchy (2.3.0)\n- localeapp (0.6.9)\n- mail (2.5.4)\n- method_source (0.8.1)\n- mime-types (1.23)\n- mini_magick (3.6.0)\n- mini_portile (0.5.0)\n- multi_json (1.7.6)\n- multi_xml (0.5.4)\n- mysql2 (0.3.11)\n- net-scp (1.1.1)\n- net-sftp (2.1.2)\n- net-ssh (2.6.7)\n- net-ssh-gateway (1.2.0)\n- nokogiri (1.6.0)\n- paper_trail (2.7.2)\n- polyglot (0.3.3)\n- pry (0.9.12.2)\n- quiet_assets (1.0.2)\n- rack (1.4.5)\n- rack-cache (1.2)\n- rack-ssl (1.3.3)\n- rack-test (0.6.2)\n- rails (3.2.13)\n- railties (3.2.13)\n- rake (10.0.4)\n- rdoc (3.12.2)\n- rest-client (1.6.7)\n- rspec-core (2.13.1)\n- rspec-expectations (2.13.0)\n- rspec-mocks (2.13.1)\n- rspec-rails (2.13.2)\n- sass (3.2.9)\n- sass-rails (3.2.6)\n- simple_form (2.1.0)\n- slim (2.0.0)\n- slim-rails (2.0.1)\n- slop (3.4.5)\n- sprockets (2.2.2)\n- subexec (0.2.3)\n- temple (0.6.5)\n- thin (1.5.1)\n- thor (0.18.1)\n- tilt (1.4.1)\n- timecop (0.6.1)\n- treetop (1.4.14)\n- tzinfo (0.3.37)\n- uglifier (2.1.1)\n- vcr (2.5.0)\n- workflow (0.8.0)\n- xpath (2.0.0)\n- ya2yaml (0.31)\n- yajl-ruby (1.1.0)\nbundle list for the 'broken' app:\n- actionmailer (3.2.13)\n- actionpack (3.2.13)\n- activemodel (3.2.13)\n- activerecord (3.2.13)\n- activeresource (3.2.13)\n- activesupport (3.2.13)\n- acts_as_list (0.2.0)\n- arel (3.0.2)\n- awesome_nested_set (2.1.6)\n- bcrypt-ruby (3.0.1)\n- best_in_place (2.1.0)\n- builder (3.0.4)\n- bundler (1.3.5)\n- cancan (1.6.10)\n- carrierwave (0.8.0)\n- coderay (1.0.9)\n- coffee-rails (3.2.2)\n- coffee-script (2.2.0)\n- coffee-script-source (1.6.2)\n- daemons (1.1.9)\n- dalli (2.6.4)\n- dbi (0.4.5)\n- decorators (1.0.3)\n- delayed_job (3.0.5)\n- delayed_job_active_record (0.4.4)\n- deprecated (2.0.1)\n- diff-lcs (1.2.4)\n- erubis (2.7.0)\n- eventmachine (1.0.3)\n- execjs (1.4.0)\n- filter_it (0.0.1)\n- forem (1.0.0.beta1)\n- friendly_id (4.0.9)\n- gemoji (1.1.2)\n- gli (2.5.6)\n- haml (4.0.3)\n- hike (1.2.3)\n- hpricot (0.8.6)\n- httparty (0.11.0)\n- i18n (0.6.1)\n- journey (1.0.4)\n- jquery-datatables-rails (1.11.2)\n- jquery-rails (3.0.1)\n- jquery-ui-rails (4.0.3)\n- json (1.8.0)\n- localeapp (0.6.9)\n- mail (2.5.4)\n- method_source (0.8.1)\n- mime-types (1.23)\n- mini_magick (3.6.0)\n- mini_portile (0.5.0)\n- multi_json (1.7.7)\n- multi_xml (0.5.4)\n- mysql2 (0.3.11)\n- net-sftp (2.1.2)\n- net-ssh (2.6.7)\n- nokogiri (1.6.0)\n- polyglot (0.3.3)\n- pry (0.9.12.2)\n- quiet_assets (1.0.2)\n- rack (1.4.5)\n- rack-cache (1.2)\n- rack-ssl (1.3.3)\n- rack-test (0.6.2)\n- rails (3.2.13)\n- railties (3.2.13)\n- rake (10.0.4)\n- rdoc (3.12.2)\n- repeated_auto_complete (0.1.3)\n- rest-client (1.6.7)\n- rspec (2.13.0)\n- rspec-core (2.13.1)\n- rspec-expectations (2.13.0)\n- rspec-mocks (2.13.1)\n- rspec-rails (2.13.2)\n- sanitize (2.0.4)\n- sass (3.2.9)\n- sass-rails (3.2.6)\n- shoulda-matchers (2.2.0)\n- simple_form (2.1.0)\n- slim (2.0.0)\n- slop (3.4.5)\n- spork (0.9.2)\n- sprockets (2.2.2)\n- subexec (0.2.3)\n- temple (0.6.5)\n- thin (1.5.1)\n- thor (0.18.1)\n- tilt (1.4.1)\n- treetop (1.4.14)\n- tzinfo (0.3.37)\n- uglifier (2.1.1)\n- uuidtools (2.1.4)\n- will_paginate (3.0.4)\n- workflow (0.8.0)\n- ya2yaml (0.31)\nAgain -- not sure this helps resolve the problem -- one other thing to note is that I am not using heroku\n. thanks a lot\n. Hi, fortunately I've figured out my problem. But I'll try explain it briefly, because it was a little tricky.\nIn my project I also use the 'html5-rails' gem. This gem creates default application.html.erb layout, where includes partial named 'head' (located in views/application folder): \n= render \"head\"\nSo when I installed forem and tried access to Forem::ForumsController#index, the index view was rendered in default  application layout as well. The problem is the forem has partial named the same way - 'head' (in views/forem/forums), and app was rendering this 'head' partial instead 'head' of 'html5-rails' (because of relative path). Consequently I've got the error: undefined local variable or method `forum'.\nThe solution is change paths in layouts from relative to absolute, f.e.:\n= render \"/application/head\"\nSorry for bother. The issue could be closed.\n. Turned out the error came from changing title to name in https://github.com/radar/forem/blob/master/db/migrate/20110214221555_create_forem_forums.rb#L4 - I didn't know the new alias didn't reach that far.\n. (aka: masterweily ;)\nhi,\nthanks for all the help so far, but after struggling with it for a while i still facing the same problem, and i really don't know what is so special about my configurations that it seems to happen only to me (did not dig much into the code of the gem itself).\nif anyone can reproduce it or give me any hint about what is going on here i will be grateful\nbash\n$ ruby -v \nruby 1.9.3p362 (2012-12-25 revision 38607) [x86_64-linux]\nGemfile\n``` ruby\nsource 'https://rubygems.org'\ngem 'rails', '3.2.11'\nBundle edge Rails instead:\ngem 'rails', :git => 'git://github.com/rails/rails.git'\ngem 'mysql2'\ngem 'rmagick'                                       # image manipulations, (self || minimagic) required by 'carrierwave' gem\ngem 'carrierwave'                               # image atachment to models\ngem 'easy_roles'                            # users roles\ngem 'forem', :git => \"git://github.com/radar/forem.git\"  # forum plugin\ngem 'kaminari'                  # support pagination ( self || will_paginate ) required by forem\nGems used only for assets and not required\nin production environments by default.\ngroup :assets do\n  gem 'sass-rails',   '~> 3.2.3'\n  gem 'coffee-rails', '~> 3.2.1'\n# See https://github.com/sstephenson/execjs#readme for more supported runtimes\n  gem 'therubyracer', :platforms => :ruby\ngem 'uglifier', '>= 1.0.3'\nend\ngem 'jquery-rails'\ngroup :development do\n  gem 'faker'             #  fake some data, good for stubs, testing, and prototyping\n  gem 'binding_of_caller' #  NOT IN PRODUCTION !!!\n  gem 'better_errors'     #  NOT IN PRODUCTION !!!\n  gem 'sextant'           #  NOT IN PRODUCTION !!! show routes in localhost:3000/rails/routes\nend\n```\np.s \ntried that in two different machines, both running linux\n. thanks, \ni will try with latest ruby, so far i tried with p362 and p385 (in two different machines) and both gave me the same error.\n@radar the error is as shown in the original post by masterweily, sorry about the confusion, i use both usernames \n. Ok, followed @radar steps and it worked well for a new application.  must say it is pretty awesome staff.\nmy goal now is to include forem into an existing project without devise.  I guess something is wrong with my User model.  As much as i understood forem doesn't care about my auth method, as long there are User model and current_user helper, both implemented in the project.  is there anything else that i'm missing?\nthanks for the help so far\n. solved!\nsomething was really wrong with my User model, and it had nothing to do with forem.\ni have defined method User.hash, that overridden Object.hash, and caused User.has_many to fail.\nshould have seen it right from the start, thanks a lot :-)\n. Thanks, but I'm not so sure I want to proceed with live streaming after all. Got this feedback from this friend just now:\n\nI got slightly farther than Aaron Patterson's article, but I was so annoyed by the multithreading and how it worked and didn't that I mostly stopped there.\nI had to turn on Rails thread-safe mode to get it to work, but in Rails 4 that requires turning on class caching, which is a pain.\nI then moved on to trying to do similar things using websockets or Faye -- both are also annoying, and require multithreading or EventMachine or Celluloid :-(\njQuery polling is massively easier. I was just emailing a guy yesterday that had a worst-case situation -- doing every-5-second AJAX polling on his Rails server with big HTML tables that bogged down and took forever to render.\nAnd you know what? All he has to do is semi-sane caching and it'll be pretty reasonable. ETags or last-modified headers plus Rails view caching and he's fine. The 304-unmodified responses are small enough that they're not a big deal at any reasonable number of users. There's a variation on that where you write cache files and tell NGinX to respond according to its last-modified date that's even faster.\n\nThe alternative is http://railscasts.com/episodes/229-polling-for-changes-revised -- thoughts anybody?\n. ",
    "safarista": "Am kinda confused here. Are we talking Private Messaging like Facebook or Private Forums? If the former I would just use a lib like The one I curate gem private_messages\n. Cant edit the aboabove from my ipad. gem simple-private-messages\n. So basically forem would only have forums, posts and threads. And require\nauthAuth to be defined ie, authorisation and authentication somehow. I like\nthis.\nOn 21 Aug 2012 20:06, \"Rodrigo Alvarez\" notifications@github.com wrote:\n\nI would start by moving the groups stuff to its own engine. Forem might be\naware of the features it adds and hook up if needed on initialization. In\nthe end all what is needed for moderation is CanCan, which you can of\ncourse spice up with groups, but that's another story.\nThe same goes for notifications and messaging. It would be nice to have a\nnotification engine based on mailboxer, which forem could take advantage of\nif needed, and any other future engine as well.\nRemember that people like me don't need groups, which are some overhead\nand you want the system to be as modular as possible anyway.\nAnd I have my own admin where I would like to add stuff to handle forem\ndata. Having two different admin points makes no sense.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/issues/84#issuecomment-7912299.\n. Yeah it really screws things up a bit @radar I will check the progress on this. Good idea to lighten up the formatting.\n. Its not the Authentication. Its the Interface. I should probably read the theme-ing process properly. But the features are kind of hidden. I'll do the digging myself. Disregard my issue.\n. I added another engine on my app, broke the routes generation. The main_app.* helper is conflicting and complicating my routes. So is my concern above making any sense?\n. why is this happening?\n. coolio :/ thanks\n. I have been digging into this and can't understand it. @radar Why is this a problem especially when deploying on heroku Cedar? \n\nAnd how can one fix  it since I don't know what my heroku production db configs are? Except that its running a pg deployment and won't install sqlite3 for toffee.\n. I've forked it. I'll do pull request when I have something to show. Thanks\nthough.\nOn 24 Apr 2012 02:38, \"Philip Arndt\" \nreply@reply.github.com\nwrote:\n\nAre you able to help us to come to a solution? Thanks :)\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/204#issuecomment-5295907\n. Doesn't that mean you are carrying holes?\nOn 24 Apr 2012 09:02, \"Josh Adams\" \nreply@reply.github.com\nwrote:\nYeah, I saw it all failing yesterday so I made sure my Gemfile was looked\nto rails 3.2.1 since I didn't have time to fix it yesterday\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/204#issuecomment-5299428\n. Sorry double post just in case.\n\nJust had a look and this comes up. This pull seams to break \nURL: http://localhost:3000/forums/forums/1/topics/new \nERROR undefined method forem_auto_subscribe?' for #<User:0x000001285548e8>\nruby\n{\"utf8\"=>\"\u2713\",\n \"authenticity_token\"=>\"3tTj+Kj3qZi4jhISeEG7aaT7QOlb/1CgX1Q9n3LrnyQ=\",\n \"topic\"=>{\"subject\"=>\"wasa\",\n \"posts_attributes\"=>{\"0\"=>{\"text\"=>\"mamamama\"}}},\n \"commit\"=>\"Create Topic\",\n \"forum_id\"=>\"4\"}\nWill have a dig but if anyone has time before tomorrow go ahead and dig. Thanks\n. Just had a look and this comes up. This pull seams to break undefined method forem_auto_subscribe?' for #<User:0x000001285548e8>\nruby\n{\"utf8\"=>\"\u2713\",\n \"authenticity_token\"=>\"3tTj+Kj3qZi4jhISeEG7aaT7QOlb/1CgX1Q9n3LrnyQ=\",\n \"topic\"=>{\"subject\"=>\"wasa\",\n \"posts_attributes\"=>{\"0\"=>{\"text\"=>\"mamamama\"}}},\n \"commit\"=>\"Create Topic\",\n \"forum_id\"=>\"4\"}\nWill have a dig but if anyone has time before tomorrow go ahead and dig. Thanks\n. ah good eye. its true in my users table there is no such field. \nI'll do a migration now.\n. @jgadbois where is the migration generator for this i want to have a look. \n. @jgadbois thanks, That fixed it. \nFor those like me on a steep learning curve.\nadd_column :users, :forem_auto_subscribe, :boolean, default: false\n. Could this error be caused by including JavaScript at the bottom of the page?\nActionView::Template::Error (forem/admin/members.js isn't precompiled)\n. That's the reason I dislike the idea if using engines. Heavy blot that can\nbe simplified using gems in a strict  simple sense. Example is the sorcery\ngem.\nOn 29 Jun 2012 18:10, \"John Gadbois\" \nreply@reply.github.com\nwrote:\n\n@parndt I just removed the javascript_include_tag from the view and added\nit to my manifest.  You have to copy the views over to do that though, so\nnot sure it's a great workaround for everyone.\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/207#issuecomment-6669300\n. Actually this is more of a typo if you ask me. I did not run a test but the logic in the loop will tell you. I forgot to push a fix a while ago when i discovered it. I would just do a merge @parndt \n. I just use markdown straight forward. Had problems with python dependency.\n. Fair enough, but most people host on heroku. Forem really needs/is undergoing a major redesign. Would you care to contribute a pull request?\n. \n",
    "regedarek": "So, I would like to help with that issue, but i think it will be too dificult with mixin in forem modules, i`ll try add https://github.com/LTe/acts-as-messageable.\nOr you could explain me more clearly danneu idea :)\nhttps://github.com/radar/forem/issues/84#issuecomment-3404744\n. ok, I will take care of this from monday... using mailboxer gem\n. I started implementing this. I think i push sample pull request on Sunday.\n. Ok, but how to define to_s method in user.rb\nruby\ndef self.to_s\n  self.username.to_s\nend\nSomething like this?\n. Thanks Radar\n. Wow ;) Milestone for me :P\n. bundle exec rake -f spec/dummy/Rakefile db:drop db:create db:migrate db:test:prepare \nand bundle exec rspec spec\nsorry I re-paste it from https://github.com/radar/forem/issues/24\n. gem list gives me\nruby\nfactory_girl (2.3.2, 2.1.0)\nfactory_girl_rails (1.4.0, 1.2.0)\n. ok I removed factory_girl 2.3.2 and factory_girl_rails 1.4.0 and 130 examples pass. :)\n. ok but i dont have users table how you deal with it? I should write migration? \n. ",
    "aybabtme": "+1 I'd also like to see that.  I'm looking around for a forum app where to port a small community (out of php-world) and I'd like to use this app, but my people will not accept to switch to a PM-less forum...\nI don't have the background to implement this myself, but I'll keep an eye on the project.\n. The following, in my view, are 'must have'.\n- Formatting as in usual posts.\n- Forward/CC and BCC.\n- Save copy of sent/received posts.\n- Registered users only.\nWhile those are 'nice to have'.\n- Send e-mail to user when she receives a PM.\n- 'Quote-to-PM' another user's post directly from the forums, to start a new PM with regard to that post.\n- Searchable archives, by word, user, message-age.\n- Ability to export archives.\n- Ban PM from specific users.\n. ",
    "Papipo": "What about https://github.com/ging/mailboxer\n. Actually I don't like the groups and admin stuff in forem at all. I rather use my own admin panel (activeadmin), and for authorization I am using cancan, so there is no point in having duplicate stuff.\nAny big feature in forem which is not really tied to the forum itself should be in a separate engine. That way you might even use those engines but not forem, forem alone, or a combination of those.\nExtracting the groups to a new engine would be a great step.\n. Sorry I don't have such thing because I'm not using forem groups. What I meant is that if I wanted to use any kind of groups, I would use my own solution or something like https://github.com/kristianmandrup/cantango, and I would manage them probably with activeadmin, which is my preferred admin panel, and I don't want to have two separate admin points.\n. In fact I was going to use forem, but I think I will roll my own solution. I see many queries in the logs about forem groups which shouldn't be there, and I don't like that the subscription sends emails instead of letting me hook something else, like internal notifications/messages.\n. I would start by moving the groups stuff to its own engine. Forem might be aware of the features it adds and hook up if needed on initialization. In the end all what is needed for moderation is CanCan, which you can of course spice up with groups, but that's another story.\nThe same goes for notifications and messaging. It would be nice to have a notification engine based on mailboxer, which forem could take advantage of if needed, and any other future engine as well.\nRemember that people like me don't need groups, which are some overhead and you want the system to be as modular as possible anyway.\nAnd I have my own admin where I would like to add stuff to handle forem data. Having two different admin points makes no sense.\n. In fact I have never used django, but I really like their apps concept. They are like rails' mountable engines, but they have lots of them which are quite mature. Imagine that you grab a new app, throw in an authentication engine, forem, a search engine (no pun intended), etc and voil\u00e0.\nSomehow it seems weird to me that nobody started something like this but for rails: http://www.djangopackages.com/categories/apps/\nAnd please, don't tell me what people always says: \"Rails makes it very easy to roll your own stuff\". Yeah, I know, but I would like to reuse something else than devise and inherited_resources. \n. How independent are the modules from each other in refinery?\n. So I can use, let's say, the site search or calendar modules alone? (or together, but without the cms itself nor any other module)\n. Try with \"bundle update\" instead of \"bundle install\"\n. ",
    "MOZGIII": "Please do not add this at forem. Create a separate project for this. This should be aside of forum.\n. By the way, it would be possible (I mean not just possible... logical? acceptable?) if you make the system modular, like omniauth, so we can add gems to get a feature.\n. @radar I just want to have a choice of what pm system to use with forem, I do not need built in system for that (but I support creating a separate project for this functional). If you want t implement PM,please do it the way forem and PM system to not depend on each other in any way.\nBTW, I am using my own implementation of messaging system, so I think I won't use other implementation and therefore do not want this functional to be built in this particular project. Just make another one for that.\n. @Papipo +1, can you share your activeadmin stuff?\n. ",
    "hauleth": "I think, that PM is not a part of forum engine. It rather should be externally like @Papipo said.\n. ",
    "yfaway": "No, not really. My application was in rails 3.0. Since forem requires 3.1, I upgraded it, then install forem. I follow the previous instructions to migrate the db (before you have the script rails g forem:install).\n. All I get is this error in the log. Not very helpful. I am going to create a brand new rail app and try to integrate forem there to see if everything is alright.\n2011-11-27 20:23:18] log_subscriber:110 in info -> Completed 500 Internal Server Error in 1571ms\n2011-11-27 20:23:18] show_exceptions:133 in log_error ->\nameError (uninitialized constant Forum):\n2011-11-27 20:23:18] log_subscriber:110 in info -> Rendered c:/programs/jruby-1.6.5/lib/ruby/gems/1.8/gems/actionpack-3\n1.3/lib/action_dispatch/middleware/templates/rescues/_trace.erb (9.0ms)\n2011-11-27 20:23:18] log_subscriber:110 in info -> Rendered c:/programs/jruby-1.6.5/lib/ruby/gems/1.8/gems/actionpack-3\n1.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (3.0ms)\n2011-11-27 20:23:18] log_subscriber:110 in info -> Rendered c:/programs/jruby-1.6.5/lib/ruby/gems/1.8/gems/actionpack-3\n1.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (38.0ms)\n. Radar, the screen shows the same thing. I tried again with a blank app, and I didn't get the same error. So there must be something wrong with that app. I will close this issue now.\nThanks,\n. ",
    "kulpae": "weird, the bug is still there.. In case I've messed up s.th. in my app or some gem is interfering, I created a new rails 3.1.1 app with devise and forem only, still the same error.\nObservations:\n- to_prepare is being called before the error occurs as expected\n- After replacing Forem.user_class.send :include, Forem::DefaultPermissions with User.send :include, Forem::DefaultPermissions the error disappears\n- puts Forem.user_class before Forem.user_class.send :include, Forem::DefaultPermissions outputs User as supposed (Forem.user_class.class => Class)\n. :) I think it's still not fixed ^^\nThe same error message again...\nIf I put user.class.send :include, Forem::DefaultPermissions in ability.rb, it works, so for some reason the value of Forem.user_class in engine.rb's to_prepare and in ability.rb differ.\n. https://gist.github.com/1407965\n. amazing.. I just went to localhost:3000/forem/ with firefox, and it works, refreshing, still works... with chromium it throws this error... on the same server.. so tried clearing the cookies.. here we go, works now... so for some reason some cookie caused it? (also on a new rails app, but yeah the domain is still the same, d'oh)\n---- oh forget to login... after login the same error...\n. Whats interesting is, it worked yesterday on dev and it still works on production, so not a big deal...\nI know I bundle updated and rerun rails g forem:install since. \n. Thank you for your time ;)\n. works now ;) thank you very much\n. ",
    "wiseleyb": "Any tips for getting this working along side Spree?  I'm getting:\nundefined method `can_read_forem_forums?' for #Spree::User:0x007f90ea45a3f8\nI think the easiest thing would be to use something other than User in the app and leave User to spree (1.0.0) but thought I'd check first.\n. ",
    "mickfeech": "Looking through some things, it appears the install generator isn't inserting anything into the application_controller\n. I have.  It'd be an expansion on that system, because you would have to store the ACL in the schema.\n. Sure I'll update this when I have something.\n. Sorry its been crazy with the holidays, I dont have access to reopen, but here's what I have modified.\nI added a column to the categories table\nadd_column :forem_categories, :groups_view, :string, :default => nil\nI then added something like this, which points to the ACL, in the model for forem_categories\nserialize :groups_view\n    has_and_belongs_to_many :roles\nI then store in the categories table an array of group ids that relate back to roles model and add the following in the users model...\ndef can_read_forem_category?(category)\n    role_id = \"#{self.role_id}\"\n    if category.groups_view.nil?\n      true\n    elsif role_id.nil? or role_id.blank?\n      false\n    elsif category.groups_view.include?(role_id)\n      true\n    else\n      false\n    end\n  end\nNot the most elegant, but effective to control categories read access. I'm in the process of doing something similar for the other authorization methods you have outlined in the wiki\n. ",
    "StephenZepp": "This still does not work properly. Failed today. Can you comment as to what we need to do to fix it?\n. Answer my own question--if you get this error, manually put this in your application_controller:\ndef forem_user\n    current_user\n  end\n  helper_method :forem_user\n. It didn't automatically inject for me (although it reported that it did).\nAnother small observation is that the documentation doesn't mention minimum rails version, but won't allow anything below rails 2.3.11 (from memory). I was hard coded to 3.2.3, but after upgrading rails I made it past that step.\nHeroku still doesn't like the default installation either--it fails on asset precompilation, and even setting the flag mentioned in other issues does not resolve the issue for what is a relatively basic heroku app. Heroku does \"recover\" by enabling run-time asset compilation, but that's not particularly optimal.\nAll that being said, once I made it past those steps, it installed pretty seamlessly and I was able to start figuring out how to fit it in to my game, and now we're working pretty smoothly!\n. Completely understood--there's nothing worse than a \"CND\" :(\nBest I can do for now is to give you info on my dev environment at the time of my initial forem add:\nWindows 7 64 bit\nWelcome to Git (version 1.7.6-preview20110708) (gitBash)\nRails 3.2.3\nruby 1.9.3p392 (2013-02-22) [i386-mingw32]\nUser is model, but has no \"name\" field.\nGemfile:\n``` ruby\nsource 'https://rubygems.org'\ngem \"rails\", \"3.2.3\"\ngem 'pg'\ngem 'devise'\ngem 'newrelic_rpm'\ngem 'omniauth'\ngem 'omniauth-facebook'\ngem 'bootstrap-sass', '~> 2.3.1.0'\ngem \"gmaps4rails\", \"~> 1.5.6\"\ngem 'annotate', \">=2.5.0\"\ngem 'ancestry'\ngem 'geocoder'\ngem 'geokit-rails3', :path => 'vendor/plugins/geokit-rails3'\ngem 'will_paginate'\n```\nSteps I followed:\n1) Initial gemfile\ngem 'forem', :git => \"git://github.com/radar/forem.git\" (from the readme)\nbundle install\n--got error about compatibility issues with my rails version, dug in to the Installation wiki page. Noted that the gem line was different, changed the following two lines:\nruby\ngem \"rails\", \"~> 3.2.3\"\ngem 'forem', :github => 'radar/forem'\nbundle install, worked this time.\n2) copy views\nrails g forem:views (ran fine)\n3) Forem Install\nran rails g forem:install\ninitial run failed on a migration --I just can't remember what it was, but it was relatively minor. Possibly not having a name field, although I'm pulling that out of my nether regions.\nIn any case, fixed the problem, re-ran install, reported that it worked this time.\n4)  Navigated to the stock forem view. Tracked down the manual add to ApplicationController.rb (I actually saw it in the repository in the tests section), added it in to ApplicationController.rb, and it worked.\n. ",
    "nwmcsween": "yes for datamapper, it looks relatively simple.\n. I'll give this a shot on the weekend, and I don't see any other way of becoming orm neutral without having seperate models\n. ",
    "WhiteFire-Sondergaard": "Thank you for your quick and educational response! Much appreciated. \n. ",
    "crysfel": "Thanks for the tip\n. ",
    "benatkin": "Can this be closed now? While I haven't seen this issue occur, it seems likely that #149 affected it.\n. I found one problem with this pull request. If I create a new rails app and add this to the Gemfile:\nruby\ngem 'forem', :git => 'https://github.com/ugisozols/forem.git', :branch => 'dummy_app'\nWhen I run bundle install and then rails g -h I get this:\nForem:\n  forem:dummy\n  forem:install\n  forem:views\n. It adds an extra generator, forem:dummy, which isn't relevant for rails apps that use forem. It's for forem development only. Refinery puts it in a separate folder, testing/lib/generators.\n. I made a pull request to your branch , @ugisozols, with changes to hide forem:dummy from rails g -h inside of an app that uses forem. I moved it to spec/lib instead of spec/support because rspec automatically pulls in everything in spec/support including templates and that caused the specs to fail.\n. ",
    "greendog": "\n\n\u0421 \u0420\u043e\u0436\u0434\u0435\u0441\u0442\u0432\u043e\u043c\n\n\nAh-ha-ha :)\nExcellent guys! \nAnd you too, Merry Christmas! == \u0418 \u0432\u0430\u0441 \u0442\u043e\u0436\u0435 \u0441 \u0420\u043e\u0436\u0434\u0435\u0441\u0442\u0432\u043e\u043c! (in Russian)\n. Hmmm..\nI immediately check it.\n. Fixed https://github.com/radar/forem/pull/105\n. ",
    "robyurkowski": "BBCode and 'the best forum system out there' are anathematic statements. :P\n. Makes sense.\n. Awesome.\n. ",
    "jeremyong": "Does everybody like the zero configuration approach? I'm not sure I agree.\nIf people wanted something that worked completely out of the box, they'd go with vBulletin or something. Personally, I think it's a lot easier to let people install whatever markup gem they want, and configure the views as they like. This is very easy and would just require minor documentation on our part.\nNot everybody wants or needs code highlighting, for example. Others need to cater to an audience who is used to bbcode. In my case, for example, I may be migrating users from an older forum system where bbcode was used a lot.\n. Sorry this is a bad commit. Ignore this pull request please.\n. Yea thanks. I personally found it annoying that the current system continuously re-subscribes you to a thread after each reply so you'd have to keep mashing the \"unsubscribe\" button.\n. OK so the second failure is a Derp typo on my part. Notice that I call\n@post.user_not_autosubscribed\nOf course, this should be @post.user\nUpon the change locally on this end, the test turns to passing.\nI'm not sure what is happening in the first failure. It looks like the spec makes a topic without actually associating a user to it in the stub factory. Changing line 32 in post.rb to\nafter_create :subscribe_replier, :if => Proc.new { |p| p.user && p.user.forem_auto_subscribe? }\nchanges the test to passing.\n. Done, I see those tests as passing on this end. Feel free to verify it on yours.\n. Great thanks for documenting that parndt. I'm fairly new to the whole open source contribution thing (love it so far) and will be sure to incorporate better practices in future contributions.\nCheers\n. Ah good catch. How would you suggest storing forem user settings? As a JSON blob?\n. ActiveRecord::Store looks good. Should we do it immediately or wait for people to figure out what other sorts of settings users might need?\nAnother setting I thought of is an email setting (do you want to receive emails from administrators? etc)\n. Wow that's the last time I user the github editor for anything that isn't a readme. By all means we can squash. Can we pull it do it on your end? I don't have access to my work computer atm.\n. ",
    "railsnoob9": "nvm figured it out--all had to do with the admin flag (which was in the wiki) ((my bad))\n. how? (sorry--i know it's a bad question)\n. that solved it--thanks lol\n. ",
    "Akram-Khan": "I tried including :as => \"sign_in\" but I am still getting the same error\n. Could you please provide the details of as to why this problem was coming? \nThanks,\nAkram\n. Thanks Ryan, so for my login I could do it :as => \"sign_in\" and it should work for the similar error which I am getting for the login_path?\n. sorry to bother you again Ryan but that error still persists and I am still getting the same error in the logs which I have mentioned  above. This time I have done both :as => \"signup\" and :as => \"sign_in\"\nOk was able to fix it for devise :)\n. Ya was able to use it with devise.\n. Thank you so much for your reply Ryan, I have pushed the code on github, here is the link https://github.com/Akram-Khan/Forem-on-Devise\nIt would be great if you could have a look at it.\nThanks,\nAkram\n. Thanks for looking into the issue. The password_path issue is solved by adding main_app.user_password_path. \nHowever even after I remove the arguments of signup_path I start getting routing error for signup \"ActionController::RoutingError (No route matches [POST] \"/signup\"):\"\nIn case of Sign In when I remove the arguments from sign_in_path I get this error\n\"ActionController::RoutingError (No route matches [GET] \"/assets/null\"):\"\nI will look into it and will post the solution if I get it. I guess it should not have been so difficult to implement it I must be doing something really stupid here\n. ",
    "rizzah": "@knewter I don't necessarily like serialized fields either; it was an easy quick and dirty solution to suit my immediate need at the time.  The better solution would be to have a whole separate table to house the ACLs.  This table would have colums like\ngroup_id\ncategory_id\nrole_id\nAnd do manipulation to gather all the role_ids and group_ids for the given category_id\n. ",
    "abhijeetmisra": "Thanks, I logged in as admin, and now i can see and manage the forums :)\n. ",
    "mahzilla": "It was pretty easy to change the statistics in the view for topic count by adding forem_admin? ? forum.topics.count : forum.topics.visible.count, but I'm not quite sure how to change the models for posts or views to exclude the count for hidden parent topics.\n. ",
    "suciuvlad": "is this still open ?\n. ",
    "glebm": "This does not work (likely related to isolate_namespace?). \nWhat works, however, is creating a file under app/layouts/forem/admin/base.html.haml with:\n= render template: 'layouts/admin'\nThis feels like a hack though.\n. Thanks, worked!\n. @knewter However, forem controllers do not set @title \nThe idea I'm proposing is to have titles come from I18n interpolations. E.g., if forem does something like this (and exposes it somehow, e.g. forem.page_title):\nI18n.t('forem.topic.title', topic: @topic.subject, forum: @topic.forum.title)\nThen you gain sensible default titles and the ability to customize them.\nNow, this is just the first idea, I am sure we can come with a better one.\nPS\nView vs helper is not the point here (that code was just an example)\nEveryone has different techniques for this kind of thing. \nFor example, We use \n%title= content_for?(:page_title) ? yield(:page_title) : site_name\nAnd then in the view\n- content_for :page_title, \"My Account - #{site_name}\"\n. Implemented here: https://github.com/radar/forem/pull/195\nhttps://github.com/glebm/forem/commit/e0d3262c0915a3973566f537742366ca6cb1fdde\n. Update: Yes, it's that commit. Should be easy to integrate\nI've been using it on production for about 3 months now\n. To whoever is willing to follow up on this:\nPage numbers should be included in titles (e.g. as %{page_number} in I18n string)\nThis is to avoid duplicate page titles on the site\n. Oh, typo, meant it to be #146\n. @parndt Yes, but of course we don't want that hook here (because the existing sort order on updated at would break?)\n@radar Updated!\n. Just tried, removing require didn't help, my guess is that it is being automatically required because of the gemspec\n. If it is removed entirely, then we would need to specify in the documentation that kaminari/wp should be added to the application Gemfile, which is not ideal\nThere might be a workaround though:\ngem 'kaminari', :require => false\n. I don't know if you can, will check bundler source now\n. Just tried, Bundler still requires it\n. How about\nif !defined?(Kaminari) && !defined?(WillPaginate)\n   raise \"Please add gem 'kaminari' or gem 'will_paginate' to your gemfile?\"\nend\n. I haven't tried it out either!\nLater this week I'm going to take a look at all the javascripts\n. I looked at them, but I didn't have time to change anything.\nA few issues I identified:\n- Needs to be modularized (Backbone.js anyone?)\n- Leaks global variables a lot (using CoffeeScript would fix this)\n- Does not use JavaScript naming conventions (i.e camelCase)\n- Is included in head, which causes issues when a custom template is being used. A better practice would be to include it in a custom yield block, e.g. \"content_for :forem_js do\"\n. Sure. I will only be able to start working on it in May though\n. Actually, I had some time today :) \nSee new pull request, closing this one\n. Nice, didn't know about friendly_id. Looks great!\nAlthough I am always a bit suspicious towards gems that override ActiveRecord::Base.find\n. OK then, I'll implement friendly_id :)\n. I agree, but rebase is scary!\n\nIt is considered bad practice to rebase commits which you have already pushed to a remote repo. Doing so may invoke the wrath of the git gods... you have been warned.\n\nSo I do hope they let this one slide\n. Thanks! \n\u0421\u043f\u0430\u0441\u0438\u0431\u043e, \u0437\u0430\u0432\u0442\u0440\u0430 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u044e :)\n. OK, done!\n. I've recently released a gem with tasks to find missing and unused translations, should be a perfect fit for forem: https://github.com/glebm/i18n-tasks\n. @c2169000 Just want to point out that Thredded provides a migration that copies all the data over from Forem so switching might easier than you thought:\nhttps://github.com/thredded/thredded/wiki/Migrate-from-Forem\n. Oops, RubyMine autoformat \n. How?\n. If you guys are OK with it, I can make a separate pull request\nI am not sure why it's there in the first place\n. ",
    "marshallshen": "I think <%= link_to t(\".subscribe\", subscribe_forum_topic_path(@topic) %> is right since in the method code it specifies what forum the topic object belongs to and it redirects to that forum:\nredirect_to forum_topic_url(@topic.forum, @topic)\nAlso the Topic model the one_to_many relationship is specified.\n. ",
    "mohamagdy": "Yup, thanks @radar =)\n. ",
    "atavistock": "Yeah, I would go with either no formatter or very minimal formatter, and document how to add redcarpet or other formaters.\n. Actually I would even say any default formatter is fine, as long it doesn't increase the dependency chain to much.\n. ",
    "codev": "Any better?\n. Merged it with all the moderation fixes\n. parndt said \"if avatar_user_method just returned :email by default then you wouldn't need the conditional logic here at all :-) By this, I mean that avatar_url would need to be modified to handle all cases automatically.\"\nThat is true but then the conditional logic would have to go into avatar_url to decide if the string is an email address or url and call gravatar or return the url. That might involve adding another setting. I'm happy to change the avatar_url to put the logic in there if you want.\n. ",
    "JakeAustwick": "I'll try document this later this week.\n. Not sure what the above commits are about, don't seem relevant to this issue.\nI also just edited the wiki directly. I've never edited documentation before and presumed it would have created something similar to a pull request, for the wiki page. It seems it went straight through.\nAnyway, There wasn't really must to write about so I just added a small section to the bottom of this page, feel free to improve / edit as necessary.\n. ",
    "stas": "I was looking for something like this and came up with a different solution, thought you might be interested to check it:\n``` ruby\nrequire 'rails/generators'\nrequire 'rails/generators/rails/plugin_new/plugin_new_generator'\nmodule MyEngine\n  class DummyGenerator < Rails::Generators::PluginNewGenerator\ndef self.default_source_root\n  Rails::Generators::PluginNewGenerator.default_source_root\nend\n\ndef do_nothing\nend\n\nalias :create_root :do_nothing\nalias :create_root_files :do_nothing\nalias :create_app_files :do_nothing\nalias :create_config_files :do_nothing\nalias :create_lib_files :do_nothing\nalias :create_public_stylesheets_files :do_nothing\nalias :create_javascript_files :do_nothing\nalias :create_script_files :do_nothing\nalias :update_gemfile :do_nothing\nalias :create_test_files :do_nothing\nalias :finish_template :do_nothing\n\nend\nend\n```\nWhere in Rakefile I just call the generator:\n``` rake\ntask :setup do\n  require 'rails'\n  require 'myengine'\n  require 'myengine/generators/dummy_generator'\nMyEngine::DummyGenerator.start(\n    %w(. --quiet --force --skip-bundle --old-style-hash --dummy-path=spec/dummy)\n  )\nend\n```\nThanks\n. Thanks for dummier, it seems nice.\nStill It looks pretty tied to Test::Unit, so it will likely have to be patched first.\n. ",
    "ivoreis": "hi @rader, \nI installed the social_stream gem as my base app and then installed the forem engine. \nwhen i try to access the route of the forem in /forums i got the error NameError in Forem/forums#index undefined local variable or method `search_url' for class....  This method search_url is a method of the main app social_stream and is called in  social_stream/base/app/views/layouts/_search.html.erb  file. \n. Ok, thank you\n. ",
    "dlepage": "fixed ! Sorry\n. You bet ! :)\n. ",
    "shadowbrush": "OK, sorry, I'm new to this. I had to make above changes to get it to run. I'll close the issue. Thanks!\n. ",
    "eivindhagen": "Hmm... I seem to be having this problem only on my local development machine (Mac OSX). When I deploy my app to an Ubuntu Linux host these problems do not occur. I will have to debug my local machine now.\nThanks for the Travis link, now I know how to tell if a commit is stable.\n. I decided to make users, forem_topics and forem_posts be approved by default, by adding this migration to my project:\n```\nclass TopicsAndPostsNowApprovedByDefault < ActiveRecord::Migration\n  def up\n    change_column_default(:forem_topics, :state, 'approved')\n    change_column_default(:forem_posts, :state, 'approved')\n    change_column_default(:users, :forem_state, 'approved')\n  end\ndef down\n    change_column_default(:forem_topics, :state, 'pending_review')\n    change_column_default(:forem_posts, :state, 'pending_review')\n    change_column_default(:users, :forem_state, 'pending_review')\n  end\nend\n```\n. Problem solved, Issue closed.\n. ",
    "abrambailey": "Thanks!\n. I did have the forem views inside my app, edited.. but it definitely did not work. I was able to fix the problem by forking the project.. changing the views.. and pointing to my fork.\n. If I put <%= forem_format(post.text).html_safe %> I still see <b> HI </b> in the output =(\n. Hey I just fixed it with <%= RedCloth.new(post.text).html_safe %> For some reason I'd used .to_html before in my RedCloth call. \n. When I log in the unmoderated posts disappear. I don't get it.\n. Well, the unmoderated posts disappear when they should.. \nIf user A is moderater, user B is the poster, and user C is browsing the forum.. only user A and B can see the unmoderated post. User C would not see it... So this seems like normal behavior. \n. What I don't get is why everything is working normally except logged out browsers seeing unmoderated posts.\n. By the way, Hello Christchurch. Auckland here.\n. Double shame on me: http://www.sitecam.co.nz/auckland_webcam/\n. By the way, I have forked the forem gem and modded to fit in with a twitter bootstrap styling. Feel free to use. git@github.com:funkdified/forem.git\n. Cool thanks anyway, I'll wait for @radar to have a look at the issue.\n. Well, I personally like the look better with my mods.\n. Hey Philip, and idea how to make forem approve posts by default?\n. Hi, the problem was this line below from topics/_topic.html.erb:\nruby\n<%= link_to_latest_post(topic.posts.by_created_at.last) -%>\nThe problem was that topic should have been fed into the method... not topic.posts (see my debugging below)...\n`` ruby\n[1] pry(#<#<Class:0x000000054821f0>>)> link_to_latest_post(topic.posts.by_created_at.last)\nNoMethodError: undefined methodposts' for #\nfrom /home/funkdified/.rvm/gems/ruby-1.9.3-p392@goodsounds/gems/activemodel-3.2.13.rc2/lib/active_model/attribute_methods.rb:407:in `method_missing'\n[2] pry(#<#>)> topic.posts.by_created_at.last\n=> #\n[3] pry(#<#>)> show-method link_to_latest_post\nFrom: /home/funkdified/.rvm/gems/ruby-1.9.3-p392@goodsounds/bundler/gems/forem-80f44dc62d77/app/helpers/forem/topics_helper.rb @ line 3:\nOwner: Forem::TopicsHelper\nVisibility: public\nNumber of lines: 5\ndef link_to_latest_post(topic)\n  post = relevant_posts(topic).last\n  text = \"#{time_ago_in_words(post.created_at)} #{t(\"ago_by\")} #{post.user}\"\n  link_to text, forem.forum_topic_path(post.topic.forum, post.topic, :anchor => \"post-#{post.id}\", :page => topic.last_page)\nend\n```\n. I am experiencing this issue as well. Upgrading Forem gem. I tried deleting the initializer, just in case, but still a no-go. Rails 3.2.11 and 3.2.13.rc1 were both tested producing the following errors:\n```\nfunkdified@vizio ~/rails_projects/goodsounds $ rails g forem:install\nThe method 'YAML.enable_arbitrary_object_deserialization!' is deprecated and will be removed in the next release of SafeYAML -- set the SafeYAML::OPTIONS[:default_mode] to either :safe or :unsafe.\nCopying over Forem migrations...\nThe method 'YAML.enable_arbitrary_object_deserialization!' is deprecated and will be removed in the next release of SafeYAML -- set the SafeYAML::OPTIONS[:default_mode] to either :safe or :unsafe.\nWhat is your user class called? [User] \nWhat is the current_user helper called in your app? [current_user] \nDefining forem_user method inside ApplicationController...\n      insert  app/controllers/application_controller.rb\nAdding forem initializer (config/initializers/forem.rb)...\n      create  config/initializers/forem.rb\nRunning rake db:migrate\nThe method 'YAML.enable_arbitrary_object_deserialization!' is deprecated and will be removed in the next release of SafeYAML -- set the SafeYAML::OPTIONS[:default_mode] to either :safe or :unsafe.\nrake aborted!\nAn error has occurred, this and all later migrations canceled:\nundefined method name' for #<Forem::Forum:0x0000000643b6a0>\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activemodel-3.2.13.rc1/lib/active_model/attribute_methods.rb:407:inmethod_missing'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/attribute_methods.rb:149:in method_missing'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/friendly_id-4.0.9/lib/friendly_id/slugged.rb:253:inshould_generate_new_friendly_id?'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/friendly_id-4.0.9/lib/friendly_id/slugged.rb:273:in set_slug'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activesupport-3.2.13.rc1/lib/active_support/callbacks.rb:407:in_run__563395518242889671__validation__284587739523264369__callbacks'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activesupport-3.2.13.rc1/lib/active_support/callbacks.rb:405:in __run_callback'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activesupport-3.2.13.rc1/lib/active_support/callbacks.rb:385:in_run_validation_callbacks'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activesupport-3.2.13.rc1/lib/active_support/callbacks.rb:81:in run_callbacks'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activemodel-3.2.13.rc1/lib/active_model/validations/callbacks.rb:53:inrun_validations!'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activemodel-3.2.13.rc1/lib/active_model/validations.rb:195:in valid?'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/validations.rb:69:invalid?'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/validations.rb:77:in perform_validations'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/validations.rb:56:insave!'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/attribute_methods/dirty.rb:33:in save!'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/transactions.rb:264:inblock in save!'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/transactions.rb:313:in block in with_transaction_returning_status'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/connection_adapters/abstract/database_statements.rb:192:intransaction'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/transactions.rb:208:in transaction'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/transactions.rb:311:inwith_transaction_returning_status'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/transactions.rb:264:in save!'\n/home/funkdified/rails_projects/goodsounds/db/migrate/20130304095539_add_friendly_id_slugs.forem.rb:7:inblock in change'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/relation/batches.rb:21:in block (2 levels) in find_each'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/relation/batches.rb:21:ineach'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/relation/batches.rb:21:in block in find_each'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/relation/batches.rb:72:infind_in_batches'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/relation/batches.rb:20:in find_each'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/querying.rb:8:infind_each'\n/home/funkdified/rails_projects/goodsounds/db/migrate/20130304095539_add_friendly_id_slugs.forem.rb:7:in change'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:407:inblock (2 levels) in migrate'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:407:in block in migrate'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/connection_adapters/abstract/connection_pool.rb:129:inwith_connection'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:389:in migrate'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:528:inmigrate'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:720:in block (2 levels) in migrate'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:775:incall'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:775:in block in ddl_transaction'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/connection_adapters/abstract/database_statements.rb:192:intransaction'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/transactions.rb:208:in transaction'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:775:inddl_transaction'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:719:in block in migrate'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:700:ineach'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:700:in migrate'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:570:inup'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:551:in migrate'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/railties/databases.rake:193:inblock (2 levels) in '\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/bin/ruby_noexec_wrapper:14:in eval'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/bin/ruby_noexec_wrapper:14:in'\nTasks: TOP => db:migrate\n(See full trace by running task with --trace)\nCreating default forum and topic\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activemodel-3.2.13.rc1/lib/active_model/attribute_methods.rb:407:in method_missing': undefined methodslug' for # (NoMethodError)\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/attribute_methods.rb:149:in method_missing'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/friendly_id-4.0.9/lib/friendly_id/slugged.rb:254:inshould_generate_new_friendly_id?'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/friendly_id-4.0.9/lib/friendly_id/slugged.rb:273:in set_slug'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activesupport-3.2.13.rc1/lib/active_support/callbacks.rb:407:in_run__890784409947547824__validation__472458083015239509__callbacks'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activesupport-3.2.13.rc1/lib/active_support/callbacks.rb:405:in __run_callback'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activesupport-3.2.13.rc1/lib/active_support/callbacks.rb:385:in_run_validation_callbacks'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activesupport-3.2.13.rc1/lib/active_support/callbacks.rb:81:in run_callbacks'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activemodel-3.2.13.rc1/lib/active_model/validations/callbacks.rb:53:inrun_validations!'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activemodel-3.2.13.rc1/lib/active_model/validations.rb:195:in valid?'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/validations.rb:69:invalid?'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/validations.rb:77:in perform_validations'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/validations.rb:50:insave'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/attribute_methods/dirty.rb:22:in save'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/transactions.rb:259:inblock (2 levels) in save'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/transactions.rb:313:in block in with_transaction_returning_status'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/connection_adapters/abstract/database_statements.rb:192:intransaction'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/transactions.rb:208:in transaction'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/transactions.rb:311:inwith_transaction_returning_status'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/transactions.rb:259:in block in save'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/transactions.rb:270:inrollback_active_record_state!'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/transactions.rb:258:in save'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/persistence.rb:45:increate'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/bundler/gems/forem-80f44dc62d77/db/seeds.rb:1:in <top (required)>'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activesupport-3.2.13.rc1/lib/active_support/dependencies.rb:245:inload'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activesupport-3.2.13.rc1/lib/active_support/dependencies.rb:245:in block in load'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activesupport-3.2.13.rc1/lib/active_support/dependencies.rb:236:inload_dependency'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activesupport-3.2.13.rc1/lib/active_support/dependencies.rb:245:in load'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/railties-3.2.13.rc1/lib/rails/engine.rb:520:inload_seed'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/railties-3.2.13.rc1/lib/rails/railtie/configurable.rb:30:in method_missing'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/bundler/gems/forem-80f44dc62d77/lib/generators/forem/install_generator.rb:67:inseed_database'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/thor-0.17.0/lib/thor/task.rb:27:in run'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/thor-0.17.0/lib/thor/invocation.rb:120:ininvoke_task'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/thor-0.17.0/lib/thor/invocation.rb:126:in block in invoke_all'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/thor-0.17.0/lib/thor/invocation.rb:126:ineach'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/thor-0.17.0/lib/thor/invocation.rb:126:in map'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/thor-0.17.0/lib/thor/invocation.rb:126:ininvoke_all'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/thor-0.17.0/lib/thor/group.rb:238:in dispatch'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/thor-0.17.0/lib/thor/base.rb:434:instart'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/railties-3.2.13.rc1/lib/rails/generators.rb:171:in invoke'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/railties-3.2.13.rc1/lib/rails/commands/generate.rb:12:in'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activesupport-3.2.13.rc1/lib/active_support/dependencies.rb:251:in require'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activesupport-3.2.13.rc1/lib/active_support/dependencies.rb:251:inblock in require'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activesupport-3.2.13.rc1/lib/active_support/dependencies.rb:236:in load_dependency'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activesupport-3.2.13.rc1/lib/active_support/dependencies.rb:251:inrequire'\n    from /home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/railties-3.2.13.rc1/lib/rails/commands.rb:29:in <top (required)>'\n    from script/rails:6:inrequire'\n    from script/rails:6:in `'\n```\n```\nfunkdified@vizio ~/rails_projects/goodsounds $ rake db:migrate --trace\nThe method 'YAML.enable_arbitrary_object_deserialization!' is deprecated and will be removed in the next release of SafeYAML -- set the SafeYAML::OPTIONS[:default_mode] to either :safe or :unsafe.\n Invoke db:migrate (first_time)\n Invoke environment (first_time)\n Invoke rails_admin:disable_initializer (first_time)\n Execute rails_admin:disable_initializer\n[RailsAdmin] RailsAdmin initialization disabled by default. Pass SKIP_RAILS_ADMIN_INITIALIZER=false if you need it.\n Execute environment\n Invoke db:load_config (first_time)\n Execute db:load_config\n Execute db:migrate\n==  AddFriendlyIdSlugs: migrating =============================================\n-- add_column(:forem_forums, :slug, :string)\n   -> 0.0017s\n-- add_index(:forem_forums, :slug, {:unique=>true})\n   -> 0.0145s\nrake aborted!\nAn error has occurred, this and all later migrations canceled:\nundefined method name' for #<Forem::Forum:0x00000006a9b338>\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activemodel-3.2.13.rc1/lib/active_model/attribute_methods.rb:407:inmethod_missing'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/attribute_methods.rb:149:in method_missing'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/friendly_id-4.0.9/lib/friendly_id/slugged.rb:253:inshould_generate_new_friendly_id?'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/friendly_id-4.0.9/lib/friendly_id/slugged.rb:273:in set_slug'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activesupport-3.2.13.rc1/lib/active_support/callbacks.rb:407:in_run__1158354388849815308__validation__4093704708519925776__callbacks'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activesupport-3.2.13.rc1/lib/active_support/callbacks.rb:405:in __run_callback'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activesupport-3.2.13.rc1/lib/active_support/callbacks.rb:385:in_run_validation_callbacks'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activesupport-3.2.13.rc1/lib/active_support/callbacks.rb:81:in run_callbacks'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activemodel-3.2.13.rc1/lib/active_model/validations/callbacks.rb:53:inrun_validations!'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activemodel-3.2.13.rc1/lib/active_model/validations.rb:195:in valid?'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/validations.rb:69:invalid?'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/validations.rb:77:in perform_validations'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/validations.rb:56:insave!'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/attribute_methods/dirty.rb:33:in save!'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/transactions.rb:264:inblock in save!'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/transactions.rb:313:in block in with_transaction_returning_status'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/connection_adapters/abstract/database_statements.rb:192:intransaction'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/transactions.rb:208:in transaction'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/transactions.rb:311:inwith_transaction_returning_status'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/transactions.rb:264:in save!'\n/home/funkdified/rails_projects/goodsounds/db/migrate/20130304095539_add_friendly_id_slugs.forem.rb:7:inblock in change'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/relation/batches.rb:21:in block (2 levels) in find_each'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/relation/batches.rb:21:ineach'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/relation/batches.rb:21:in block in find_each'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/relation/batches.rb:72:infind_in_batches'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/relation/batches.rb:20:in find_each'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/querying.rb:8:infind_each'\n/home/funkdified/rails_projects/goodsounds/db/migrate/20130304095539_add_friendly_id_slugs.forem.rb:7:in change'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:407:inblock (2 levels) in migrate'\n/home/funkdified/.rvm/rubies/ruby-1.9.3-p385/lib/ruby/1.9.1/benchmark.rb:280:in measure'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:407:inblock in migrate'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/connection_adapters/abstract/connection_pool.rb:129:in with_connection'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:389:inmigrate'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:528:in migrate'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:720:inblock (2 levels) in migrate'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:775:in call'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:775:inblock in ddl_transaction'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in transaction'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/transactions.rb:208:intransaction'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:775:in ddl_transaction'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:719:inblock in migrate'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:700:in each'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:700:inmigrate'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:570:in up'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/migration.rb:551:inmigrate'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/gems/activerecord-3.2.13.rc1/lib/active_record/railties/databases.rake:193:in block (2 levels) in <top (required)>'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/task.rb:228:incall'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/task.rb:228:in block in execute'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/task.rb:223:ineach'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/task.rb:223:in execute'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/task.rb:166:inblock in invoke_with_call_chain'\n/home/funkdified/.rvm/rubies/ruby-1.9.3-p385/lib/ruby/1.9.1/monitor.rb:211:in mon_synchronize'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/task.rb:159:ininvoke_with_call_chain'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/task.rb:152:in invoke'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/application.rb:143:ininvoke_task'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/application.rb:101:in block (2 levels) in top_level'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/application.rb:101:ineach'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/application.rb:101:in block in top_level'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/application.rb:110:inrun_with_threads'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/application.rb:95:in top_level'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/application.rb:73:inblock in run'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/application.rb:160:in standard_exception_handling'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/application.rb:70:inrun'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/bin/rake:33:in <top (required)>'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@global/bin/rake:19:inload'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@global/bin/rake:19:in <main>'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/bin/ruby_noexec_wrapper:14:ineval'\n/home/funkdified/.rvm/gems/ruby-1.9.3-p385@goodsounds/bin/ruby_noexec_wrapper:14:in `'\nTasks: TOP => db:migrate\nfunkdified@vizio ~/rails_projects/goodsounds $ \n```\nPlease help\n. Hi, seems no one is keen to help with this.. \nI figured out this issue, and would suggest that you fix the project...\nThe rename_column :forem_forums, :title, :name migration was being run in the wrong order... and needed to be placed earlier in the migration queue.. I had to manually run the migration and then re-generate the new upgrade migrations using rails g forem:install\nEverything is working fine now.\n. @radar Oops, sorry to sound so negative, just saw your response and realized I sounded bad!   I think I was just frustrated. Anyway, hope what I said was helpful.\n. Well, when I was on page 2 of comments, but the reply to link should be pointing at a comment on page 1... I am still seeing the link rendered with the current page number (page 2), rather than page 1. Does that make sense?\n. In the meantime I have modified a few things to make it work:\nruby\nForem::TopicsController.class_eval do\n  def post_count(topic)\n    a=topic.posts.flatten.collect{|p| p.id}.each_with_index.to_a\n    a=a.map{|a| {:id=>a[0], :position=>a[1]+1}}\n    return a\n  end\nend\nThe in topics/show.html.erb:\nruby\n<% @post_count = Forem::TopicsController.new.post_count(@topic) %>\nThen in posts/_post.html.erb:\nruby\n    <% if post.reply_to %>\n      <% position = @post_count.select{|p| p[:id].equal? post.reply_to.id}.first[:position] %>\n      <% page = Integer(Float(position-1)/Float(Forem.per_page)+1) %>\n      <%= link_to \"in reply to #{post.reply_to.user}\", \"?page=#{page}#post-#{post.reply_to.id}\" %>\n    <% end %>\nI'm sure there's a better way, but that was my solution.\n. Sure thing. Give me a few to modify a fork.\n. @radar Please check that it works properly on your end... I've moved stuff around and haven't checked it works on my end. It should in theory. Thanks\n. I suppose you could also store the small numbering array in the Rails cache with topic_id in the name and delete and re-create the cache item given any of the above situations ... Rather than update the db records.. not sure if this is an alternative or not.\n. Hi, just noticed this comment thread again... Sorry been slammed at work. I will have a look at this during the week.\n. ",
    "murtazajafferji": "I am using Spree. I think it is also interfering with my routes.\n. After creating a topic, I got this same error.\n. I was not signed in, I tried to create a topic, I was redirected to the sign_in_path, I signed in, I was redirected to the index page and got this error:\nThe action 'index' could not be found for Forem::TopicsController\n. 1. I was not signed in.\n2. I filled in the fields of the form for forem/topics/form\n3. I clicked on the submit button called \"Create topic\" from forem/topics/form\n4. I was redirected to sign_in_path\n5. I signed in.\n6. I was redirected to the index page.\nNote that I removed before_filter :authenticate_forem_user\n. Normally, you'd be creating a topic from forem/topics/new and the before_filter :authenticate_forem_user would happen before the new action. However, I moved forem/topics/form outside of the Forem engine and I did not include the filter.\n. The reason why I thought forums.forums_path would work is because of this line in routes.rb:\nmount Forem::Engine, :at => \"/forums\"\nAnyways, I got this error when trying forem.forums_path:\nundefined method `forums_path' for #<#Class:0x007fa1890db268:0x007fa187a7e830>\nExtracted source (around line #2):\n2:   <%= link_to t('forem.forum.forums'), forem.forums_path %> \u00bb <%= link_to forum.category, forum.category %> \u00bb <%= link_to forum.title, forum %>\n. In my last comment, I provided the error that occurs when I use forem.forums_path. Is there something else I should be doing?\n. Do you think it has something to do with the fact that I am calling the url helpers inside of the Spree engine?\n. ok great. I just created a new app with Spree and Forem and I reproduced the issue:\nhttps://github.com/murtazajafferji/forem_url_helpers_demo\n. home#test. I set it up as the root.\n. I added you as a collaborator. Do you mind pushing your fix up?\nAlso, in that test app, I did not include this line that is in my original app:\nmount Forem::Engine, :at => \"/forums\"\nIs this line necessary?\n. I just pushed up the application with mount Forem::Engine, :at => \"/forums\" added to routes.rb.\nThis error will come up when you start the app because of the line where I have the path forem.forums_path:\nNo route matches {:controller=>\"spree/home\", :action=>\"test\"}\n. Thanks guys! It works!!!\n. ",
    "elcostas": "You are welcome\n. ",
    "ericraio": "I am current dealing with this issue in my project right now. :(\n. ",
    "redgetan": "Sorry, my statement was a bit inaccurate, it does not depend on loading of active_record, but rather ActiveRecord::Base.\n. ",
    "nebiros": "I also have the same issue, I just add gem \"forem\", :git => \"git://github.com/radar/forem.git\" to my Gemfile (http://pastie.org/private/hhxbkn4pagwdbfoeeu5rw), and I got the same error: \n/Users/nebiros/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/forem-fe18d8d320b7/config/initializers/will_paginate.rb:6:in `alias_method': undefined method `per_page' for module `WillPaginate::ActiveRecord::RelationMethods' (NameError)\nHere's the error log: http://pastie.org/private/wcrvxm5nrq4cmweixkeyw.\n. @radar Ouch, sorry :)\n. ",
    "yan-hoose": "@parndt I started using Ruby Enterprise Edition 1.8.7 in my production environment a few years ago to get more performance and reduce the memory footprint (1.9.2 was not released yet). I just have not felt the need to upgrade but now as I'm reading some benchmarks, it seems that upgrading makes sense. \nIf this exception is a 1.8.7-only issue, it might not be reasonable to try to fix it and I'll just upgrade Ruby.\n. I installed RVM and 1.9.3 and everything works! \nSo, what should be done with this issue - is it something that should be fixed or is it insignificant?\n. I've managed this by just setting the forem_status in DB to \"approved\" by default. Works nicely.\n. How about \"sort_order\"?\n. Hi. Test added!\n. Replaced the default scope with a by_position scope.\n. Hi @gasova. Are you still planning to submit a pull request with Turkish translations? \nI'm asking because recently a need for Turkish translation appeared in one of my apps and I would like to see this translation merged in Forem.\nIf you are not interested in submitting this pull request then I'd be happy to do it myself.\n. Ping @gasova :smile: \n. Hey @gasova. Since I need the translation ASAP, I did create a pull request myself: https://github.com/radar/forem/pull/663\nI hope you are fine with that!\n. I have taken this on and it's about half done.\n. About the one failing test. It seems that Rails 4.2 thinks that the views_count column in both topics and forums tables is a counter cache column and that is why it is incrementing it here when creating a new view row and resulting in double incrementation:\n``` ruby\napp/models/forem/concerns/viewable.rb:19\nview = views.find_or_create_by(user_id: user.id)\n```\nThat did not happen in Rails 4.1 and lower. Setting the :counter_cache => false option does not work since Rails just looks if views_count column is present and if it is considers it as a counter cache.\nI'm not sure if this is intended or not but probably the easiest solution would be to just rename the column to something like view_count. It is probably a good practice to not name columns like counter cache columns when in reality they aren't. What do you think?\nBesides this one thing everything else is done.\n. I'll try in the morning.\n. I can reproduce it with the following test.\n``` ruby\nActivate the gem you are reporting the issue against.\ngem 'activerecord', '4.1.9'\ngem 'activerecord', '4.2.0'\nrequire 'active_record'\nrequire 'minitest/autorun'\nrequire 'logger'\nEnsure backward compatibility with Minitest 4\nMinitest::Test = MiniTest::Unit::TestCase unless defined?(Minitest::Test)\nThis connection will do for database-independent bug reports.\nActiveRecord::Base.establish_connection(adapter: 'sqlite3', database: ':memory:')\nActiveRecord::Base.logger = Logger.new(STDOUT)\nActiveRecord::Schema.define do\n  create_table :posts, force: true do |t|\n    t.integer :comments_count, default: 0\n  end\ncreate_table :comments, force: true do |t|\n    t.integer :post_id\n  end\nend\nclass Post < ActiveRecord::Base\n  has_many :comments\nend\nclass Comment < ActiveRecord::Base\n  belongs_to :post\nend\nclass BugTest < Minitest::Test\n  def test_association_stuff\n    post = Post.create!\n    assert_equal 0, post.comments_count\npost.comments << Comment.create!\nassert_equal 1, post.comments.count\nassert_equal 0, post.comments_count\n\nend\nend\n```\nWith 4.1.9 it works as expected and with 4.2.0 it fails on the last assertion. I took a look at the 4.2 release notes again and indeed, the only mention of counter caches was about deprecating broken automatic detection when using has_many :through associations, so it seems like a Rails bug.\nLet me know if you get the same result with this test.\n. https://github.com/rails/rails/issues/19042\nThe bug is marked with the milestone 4.2.2, so we'll have to wait until Rails 4.2.2 to have Forem support for 4.2.x.\n. Unfortunately Rails 4.2.2 does not include a fix for this issue, so we'll have to wait for 4.2.3.\n. Nope, the Rails bug has not been fixed yet and is marked with the milestone 4.2.4. The bug that you are talking about is not the same bug we ran into with Forem (has_many :through vs simple has_many and belongs_to association).\n. I went ahead and created the PR so you can start reviewing it when you have time: https://github.com/radar/forem/pull/668\n. Nice, I'll do it in the evening today!\n. It's already done a few days ago: https://github.com/radar/forem/pull/668\nAll tests pass and no deprecation warnings with the new Rails version.\n. I ran into the same issue. Here is a small app that reproduces this: https://github.com/yan-hoose/forem-locale-issue\nBasically since the URL inside Forem becomes something like http://localhost:3000/de/forums/categories/general?locale=de and this makes changing the locale while looking at Forem views difficult since it only changes the last locale param.\nIt seems that this is caused by the locale scope not broadening on to engine routes. If you look at the output of bin/rake routes, you'll see that Forem does not have the locale scope.\n. Hey, I just noticed that there is \"en\" as the locale as the first line in the ko.yml file.\n. You are not including post text with create and since there is no post text, there will be no post and you'll get the exception. This works:\nruby\ntopic = Forem::Topic.create(subject: 'New Topic', forum_id: forum.id, user_id: u.id, posts_attributes: {'0' => {text: 'Post Text'}})\n. You're welcome!\nBut I'm not sure if a topic with only a subject and without content is useful. A topic should have something in it or it would be meaningless. That is what Forem assumes, that you have a topic with a first post as the topic text.\n. Since there is a bug in Rails 4.2 that causes Forem to double-increment views, I don't recommend to use Forem with Rails 4.2 until that bug is fixed (https://github.com/radar/forem/issues/640).\nIf you are fine with that, go ahead! :smile: \n. Actually counter caches are broken in all of Rails 4.2 versions. Forem Rails dependency should be\nruby\ns.add_dependency 'rails', '~> 4.0', '< 4.2'\ninstead of\nruby\ns.add_dependency 'rails', '~> 4.0', '<= 4.2'\n. If you are talking about the Travis CI test failures then all of them are currently caused by Forem specifying\nruby\ns.add_dependency 'rails', '~> 4.0', '<= 4.2'\nin the gemspec even though there is no Rails 4.2 support right now. This means that the tests are run in the context of a Rails 4.2 app and results in a lot of errors. Rails 4.2 support and all the errors have been fixed but not yet pushed to Forem since there is a bug in Rails 4.2 that prevents the push. More details here: https://github.com/radar/forem/issues/640\n. I agree that the views are useful as a base which you can override, so you don't have to create them from scratch which would take a lot more time. And I like the idea of the views being as simple as possible (plain HTML, no CSS or JS) so you could just copy them to your site and modify with your own HTML/CSS/JS.\nWhy not release the gem as Forem 1.0 and have the rewrite (if you decide to do it) be 2.0? I guess the rewrite would not happen any time soon anyway, so releasing the current code as 1.0 seems like a decent idea.\n. Well, everything is green!\n. Sure, why not, I'll make the changes. Should I start from scratch and create a new pull request for that?\n. I added it because it was outputting warnings about missing config (and the fact that simple_form will use its defaults) when running the specs.\n. I did some testing and it seems when we specify an absolute minimum config block like this:\nruby\nSimpleForm.setup do |config|\nend\n... then simple_form does not complain about missing config. Sounds good, should I make the changes?\n. Yes, this empty block gives me the same config as without any config block at all.\n. ",
    "klenga": "thanks for the quick reply!  I tried what you suggested and it works now... I'm kind of a rails novice so I want to make sure I'm doing this correctly:\n-forked forem to klenga/forem\n-updated the CategoriesController\n-changed my gemfile to gem 'forem', :git => \"git://github.com/klenga/forem.git\"\n-ran bundle install\n...the categories page now displays correctly.  If I switch back to radar/forem in the gemfile and bundle install, the error reappears.  Actually I get this error: \n\nRouting Error\nundefined local variable or method `load_and_authorize_resource' for Forem::CategoriesController:Class\n\ninitially, then it changes to the 'uninitialized constant' error if I navigate to a forum page then back to the category page.\n. awesome, thanks!\n. ",
    "jeremyongplaymesh": "Just noting here that I'm encountering an isomorphic issue.\n==  CreateForemCategories: migrating ==========================================\n-- create_table(:forem_categories)\n   -> 0.0014s\nrake aborted!\nAn error has occurred, this and all later migrations canceled:\nCan't mass-assign protected attributes: name\n. Ok so an easy temporary workaround is to comment out\n    config.active_record.whitelist_attributes = true\nin the application.rb file.\nThe issue is the rake db:migrate uses mass assignment internally which is banned by default in rails 3.2. See https://github.com/rails/rails/pull/4900\nYou may want to update the documentation to suggest this change prior to running the initial forem install.\nCheers.\n. ",
    "bearded": "@glebm, rebase is better than revert ;-)\n. Rebase is not so hard thing, and you can always do it while your branch is not merged into master in original repo.\nOne more problem that I can see, it is that you merged original repo in stuff branch, instead of merging it into your master and then merging master into stuff branch.\nYou can make next:\n```\n$ git checkout master\n$ git remote add radar git://github.com/radar/forem.git\n$ git fetch radar\n$ git merge radar/master\n$ git status\nOn branch master\nYour branch is ahead of 'origin/master' by 73 commits.\n\nnothing to commit (working directory clean)\n$ git push\n```\nthen you can rebase your brand:\n```\n$ git checkout stuff\n$ git rebase master stuff\nFirst, rewinding head to replay your work on top of it...\nApplying: RubyMine in .gitignore\nApplying: CoffeeScript, JS packages (forem_admin, forem_admin_vendor)\nApplying: lil js fixes\nApplying: Refs #148 Page Titles in content_for :forem_page_title, I18n\nApplying: Admin members create -- response fix\nApplying: Revert \"RubyMine in .gitignore\"\n$ git status\nOn branch stuff-old\nYour branch and 'origin/stuff' have diverged,\nand have 6 and 7 different commits each, respectively.\n\nnothing to commit (working directory clean)\n```\nand git log will be much cleaner :)\n```\n$ git log\ncommit abdfb0f3246b81123bc1dfb2b0d8f4d63b47d78c\nAuthor: Gleb Mazovetskiy glex.spb@gmail.com\nDate:   Sat Apr 14 11:25:40 2012 +0200\nRevert \"RubyMine in .gitignore\"\n\nThis reverts commit 44e79a33b0a83a6a9989fbe5f5ddc3550de47638.\n\ncommit 741cd11c8ccf1cd5ec8bab05130f389a9cd5f717\nAuthor: Gleb Mazovetskiy glex.spb@gmail.com\nDate:   Sat Apr 14 11:18:50 2012 +0200\nAdmin members create -- response fix\n\ncommit 72f35c5ba4ab7babb765d8ab3bbe22593cabe84a\nAuthor: Gleb Mazovetskiy glex.spb@gmail.com\nDate:   Sat Apr 14 11:09:17 2012 +0200\nRefs #148 Page Titles in content_for :forem_page_title, I18n\n\ncommit dda99778bb2dec0c5d39ca55c024728ea9ff171e\nAuthor: Gleb Mazovetskiy glex.spb@gmail.com\nDate:   Sat Apr 14 10:44:12 2012 +0200\nlil js fixes\n\ncommit 8e8896e5e59c4a7afea9ba7bbf150248d2d83906\nAuthor: Gleb Mazovetskiy glex.spb@gmail.com\nDate:   Sat Apr 14 10:37:36 2012 +0200\nCoffeeScript, JS packages (forem_admin, forem_admin_vendor)\nAdmin views converted to HAML\nBugs fixed:\n  * forums admin correctly groups by categories\n  * concerns/viewable doesn't blow up if current_viewed_at is nil\n  * members autocomplete now works and does not leak variables\n\ncommit 6cf43c785dbbd60e6a6d3e619d12eb2a27a4f588\nAuthor: Gleb Mazovetskiy glex.spb@gmail.com\nDate:   Tue Mar 20 19:53:58 2012 +0100\nRubyMine in .gitignore\n\ncommit 3c3e61c7af7282c3c5f4b1d100a81d55fe2f108b\nAuthor: Ryan Bigg radarlistener@gmail.com\nDate:   Fri Apr 13 12:18:53 2012 -0400\nFix mistake in add_forem_view_fields migration as pointed out here: https://github.com/radar/forem/commit/19856a987ee36d77ed6e137fcc89cefe61974074#commitcomment-1207715\n\n```\nthen you can make one more rebase to remove RubyMine commits like this:\n$ git rebase -i 3c3e61c7af7282c3c5f4b1d100a81d55fe2f108b\ncomment needless commits in editor like here:\n```\npick 6cf43c7 RubyMine in .gitignore\npick 8e8896e CoffeeScript, JS packages (forem_admin, forem_admin_vendor) Admin views converted to HAML Bugs fixed:   * forums admin correctly groups by categories   * concerns/viewable doesn't blow up if current_viewed_at is nil   * members autocomplete now works and does not leak variables\npick dda9977 lil js fixes\npick 72f35c5 Refs #148 Page Titles in content_for :forem_page_title, I18n\npick 741cd11 Admin members create -- response fix\npick abdfb0f Revert \"RubyMine in .gitignore\"\nRebase 3c3e61c..abdfb0f onto 3c3e61c\n\nCommands:\np, pick = use commit\nr, reword = use commit, but edit the commit message\ne, edit = use commit, but stop for amending\ns, squash = use commit, but meld into previous commit\nf, fixup = like \"squash\", but discard this commit's log message\nx, exec = run command (the rest of the line) using shell\n\nIf you remove a line here THAT COMMIT WILL BE LOST.\nHowever, if you remove everything, the rebase will be aborted.\n\n```\nsave these changes\n```\n$ git status\nOn branch stuff\nYour branch and 'origin/stuff' have diverged,\nand have 4 and 7 different commits each, respectively.\n\nnothing to commit (working directory clean)\n$ git log\ncommit d8b0240cc1eb5d00c32b6f397fc3cd1f18de3a79\nAuthor: Gleb Mazovetskiy glex.spb@gmail.com\nDate:   Sat Apr 14 11:18:50 2012 +0200\nAdmin members create -- response fix\n\ncommit bcce90cb0222bda40cccd27db7ce16f941ba98b5\nAuthor: Gleb Mazovetskiy glex.spb@gmail.com\nDate:   Sat Apr 14 11:09:17 2012 +0200\nRefs #148 Page Titles in content_for :forem_page_title, I18n\n\ncommit cace06f6f64cbf2b4606296b2916e439f701f396\nAuthor: Gleb Mazovetskiy glex.spb@gmail.com\nDate:   Sat Apr 14 10:44:12 2012 +0200\nlil js fixes\n\ncommit 72624eaa3d61090f710ece8fff211f8e7c3994fa\nAuthor: Gleb Mazovetskiy glex.spb@gmail.com\nDate:   Sat Apr 14 10:37:36 2012 +0200\nCoffeeScript, JS packages (forem_admin, forem_admin_vendor)\nAdmin views converted to HAML\nBugs fixed:\n  * forums admin correctly groups by categories\n  * concerns/viewable doesn't blow up if current_viewed_at is nil\n  * members autocomplete now works and does not leak variables\n\ncommit 3c3e61c7af7282c3c5f4b1d100a81d55fe2f108b\nAuthor: Ryan Bigg radarlistener@gmail.com\nDate:   Fri Apr 13 12:18:53 2012 -0400\nFix mistake in add_forem_view_fields migration as pointed out here: https://github.com/radar/forem/commit/19856a987ee36d77ed6e137fcc89cefe61974074#commitcomment-1207715\n\n```\nthen make force push and pull request will be much cleaner :)\n```\n$ git checkout master\n$ git push origin stuff --force\n```\n. not at all :)\n. Well done, from now rebase should not scare you ;-)\n. ",
    "jasonnoble": "@radar I think you meant \"any section of Forem were not converted into haml\"...\n. ",
    "avitus": "This will be very useful. It was the first request from our users.\n. No. It doesn't seem to unless I'm missing something obvious. \n. This is the error message I see:\nundefined method `current_user' for #ActionDispatch::Routing::RoutesProxy:0xd401ed0\nThis is the only route helper that has a problem. All the others transitioned over smoothly and I have everything up an running very smoothly. Looks like a really great engine but this one has me a bit stumped.\n. I could have sworn I tried that but ... yes, that's it! \nThanks for the help ... Forem is exactly what I was looking for!\n. We're also getting this error. Appears be related to posts that haven't been moderated (?)\n. Ok. It is keeping us motivated to get posts moderated quickly. \n. Would be great if this could be merged.\n. @bodrovis Thanks for the tip. I used the Textile one and that seems to have fixed the problem. I had assumed that using a Formatter was optional but extracting the functionality makes sense.\nMaybe the installation part of the Readme should call that out if that's the way forward.\n. I haven't yet been able to recreate it in my development environment. It happens fairly rarely in my production environment (about once a week) over 1000's of posts.\n. ",
    "mbhnyc": "Odd, i'm getting an \"undefined local variable or method `main_app'\" error when assigning a custom sign_in_path in the initializer \u2014 anyone else seeing this?\nMy init line looks like:\nForem.sign_in_path = main_app.new_provider_session_path\n. So I tried both ways, and now have done a little more testing.\nWhen i'm logged in, I can visit the Create Topic page, works great.\nWhen i'm logged OUT, visiting the Create Topic page gives me the exception, which makes sense as you must be logged in to create a topic, having looked at the controller, I see authentication should be occurring, but it seems to be getting confused somehow...it shouldn't even get to the rendering step.\nHere's the full error:\nNoMethodError in Forem::TopicsController#new\nundefined method `sign_in_path' for #<ActionDispatch::Routing::RoutesProxy:0x007fd8e3f4e6d8>\nIs the authorize! method not picking up that my user model is renamed?  Hrm.. will have to look more closely..\n. Here you go:\nhttps://github.com/mbhnyc/forem_test\nSteps to re-create (kind of a pain, trying to keep it basic!):\n1) go to /providers/sign_up, create account\n2) make account an admin in console\n3) go to /forums and create a test forum\n4) open http://0.0.0.0:3000/forums/forums/test, you should correctly see a \"New Topic\" link\n5) open another browser and open page from 4, you should NOT see a \"New Topic\" link as you're logged out.\n6) There's a New Topic link there anyway, clicking it will give the error above.\n. Curious about the solution, as the controller looks to be checking login state correctly at first read.  yay fixing things!\n. On a related note, is there a way to avoid the double-forums-route on viewing a particular forum?  Like a catch-all route that checks for a forum and displays?\nIt would be great to avoid this:\nhttp://0.0.0.0:3000/forums/forums/default\nFar better would be :\nhttp://0.0.0.0:3000/forums/default\nOn a side note, on the first path above is where i'm getting a current_user undefined local variable error, on this line:\n<div class='started-by'><%= t \"started_by\" %><%= relevant_posts(topic).first.user %></div>\nchanging user to provider (my custom class, set in the initializer) has no effect.\n. Created a new \"issue\" so as not to clutter this one :)\n@radar : Could we adjust the permalink slug to minimize the collision chance? Like a wordpress-esque permalink that includes the post date or some such?  I can take a shot at a patch if we can agree on a format :)  I've barely research this so far, what's the current permalink format?\n. Heh indeed, to be complete I tried this on 4.0.3 as well, and the same \"generator not found\" issue is occurring. Could this be something with my local environment?  Seems very odd.\n. Eeeyup didn't follow instructions.  Didn't know the github reference in the Gemfile was actually required.  Are you waiting for a final release to update the version on rubygems.org?\n. Yeah, at least so far as the instructions work out of the box, maybe just tag a recent milestone commit as 0.9?\n. ",
    "PendragonDevelopment": "Did you ever get this working? Should be fixed in #213.\n. Apparently someone else created an issue regarding this (#212). Didn't realize it when I created the pull request.\n. Got that same error initially. Made this change and it seems to work. Give it a shot?\nEdit: Also added Devise just for authorization and model reasons\n. Yeah, I'm not sure what the issue is. I just ran it again with no errors.\nNew Rails app ->\nAdded Devise, Forem, and Will Paginate to gemfile, bundle install\nrails g devise:install\nrails g Model User name:string (just for the model)\nrails g forem:install\nInstalled with no issues. Is it a new application, or building into an existing one?\n. Sorry about that, wasn't thinking when I committed that. Did that get it all?\n. It took me a few commits (still not used to the diff view), but I think I got it restored to the original.\n. I wondered if this was the issue. I'm still a beginner with Ruby/Rails, but I tried making changes akin to one of the issues that Refinery-Inquiries had with the generators, but I don't think I did it correctly.\n. So what's the best way to move forward? Should I look at other extensions\nand hack around a bit, then get some reviews here?\nOn Apr 30, 2012 1:34 AM, \"U\u0123is Ozols\" \nreply@reply.github.com\nwrote:\n\nYes, the generator is way out of date and there's no actual use case for\nit.\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/214#issuecomment-5412103\n. Okay, cool. I'll give that a try later and see if I run into any issues.\nThanks!\nOn Apr 30, 2012 6:51 AM, \"U\u0123is Ozols\" \nreply@reply.github.com\nwrote:\nSince Forem and Refinery are both separate engines you can use both of\nthem in your app by just mounting them at different paths:\n``` ruby\nin routes.rb\nRails.application.routes.draw do\n mount Refinery::Core::Engine, :at => \"/\"\n mount Forem::Engine, :at => \"/forum\"\nend\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/radar/forem/issues/214#issuecomment-5415165\n```\n. \n",
    "ingus-t": "Yes. Closing the issue.\n. /usr/local/rvm/gems/ruby-1.9.3-p125@org/gems/activemodel-3.2.3/lib/active_model/attribute_methods.rb:407:in method_missing': undefined methodforem_auto_subscribe?' for #User:0x90747d0 (NoMethodError)\nThis is what I get when trying to install your fork. I have also forked forem and tried to change the faulty line from lib/generators/forem/install_generator.rb to _add_forem_autosubscribe, _add_forem_autosubscribe_to_user, _add_forem_auto_subscribe_to_user . None seem to work for me.\nHave you checked if your forked version of forem installs correctly?\n. This is weird. I understand that the small change you did should fix forem and it should install without a problem. And I have tried specifying\ngem ''forem', :git=>\"git://github.com/PendragonDevelopment/forem.git\"\nin my gemfile, running bundle install and then running rails g forem:install.\nInstallation resulted in error - undefined method forem_auto_subscribe?\n. Existing one. Will try again tomorrow. Thanks for the help.\n. ",
    "tonybruess": "I've done zip with specs, so, I wouldn't be of any help on that ;(\n. ",
    "artem-mindrov": "There's one more thing about this: if someone has just started a topic and the opening post is awaiting approval, the topic still shows on the forums page having the most recent post. When a user navigates to this topic, however, she gets a 'topic you're looking for could not be found'. Moreover, when the post is approved, this behavior doesn't change because even though the post is now in an approved state, its associated topic is still pending approval.\n. Yeah sorry, I was in a haste. Early morning :(\n. I'm also wondering if the add_forem_view_fields migration should set the timestamps and add a non-null constraint on them?\n. ",
    "travisbot": "This pull request passes (merged 7ea63058 into 33558a5b).\n. This pull request passes (merged 1985a216 into 9e15e572).\n. This pull request fails (merged 69199ee9 into 9e15e572).\n. This pull request passes (merged a1d6f583 into 9e15e572).\n. This pull request fails (merged a1d6f583 into 9e15e572).\n. This pull request fails (merged 4e06549d into 47142d8b).\n. This pull request fails (merged 381ea40a into 47142d8b).\n. This pull request passes (merged bd07e52f into f48b0fda).\n. This pull request passes (merged a8e0bc7a into f48b0fda).\n. This pull request passes (merged 268971da into f48b0fda).\n. This pull request fails (merged 663dffc2 into f48b0fda).\n. This pull request fails (merged 402428b6 into 8f86128d).\n. This pull request passes (merged b26f33bd into 33558a5b).\n. This pull request passes (merged f68e642f into 5a8d9f27).\n. This pull request passes (merged 334d5c45 into 5a8d9f27).\n. This pull request passes (merged a8ce4646 into 5a8d9f27).\n. This pull request passes (merged 39c9010d into d3bf48a8).\n. This pull request fails (merged 374ba654 into 3dda6a2e).\n. This pull request passes (merged dc3078e9 into 3dda6a2e).\n. This pull request passes (merged 0b56bc1c into 3dda6a2e).\n. This pull request passes (merged 9ed2d822 into 3dda6a2e).\n. This pull request passes (merged b9a97313 into fe18d8d3).\n. This pull request fails (merged f6bd5cbf into fe18d8d3).\n. This pull request passes (merged 46345c46 into fe18d8d3).\n. This pull request fails (merged 7e26a786 into 978deb59).\n. This pull request passes (merged 0dcac05a into fe18d8d3).\n. This pull request fails (merged 89ac4edc into a2adee4d).\n. This pull request fails (merged 0db32a4b into a2adee4d).\n. This pull request fails (merged 85138e2a into a2adee4d).\n. This pull request passes (merged 2521fcf3 into af58288b).\n. This pull request passes (merged 48d5acc1 into af58288b).\n. This pull request passes (merged 9166b40a into af58288b).\n. This pull request fails (merged 0e8bbb68 into e8fc464a).\n. This pull request passes (merged 98c664ce into e8fc464a).\n. This pull request passes (merged 47cabe2f into e8fc464a).\n. This pull request fails (merged b87038a1 into 43a64108).\n. This pull request fails (merged b8eec506 into 43a64108).\n. This pull request fails (merged 36676560 into 0fc9bae6).\n. This pull request fails (merged 87bd2912 into 0fc9bae6).\n. This pull request fails (merged 4c0c9ae5 into 0fc9bae6).\n. This pull request fails (merged a06517c4 into a1b24830).\n. This pull request fails (merged 65031b0d into a1b24830).\n. This pull request fails (merged 3d5fe740 into be8c9768).\n. This pull request fails (merged 1058f5d0 into 65487f01).\n. This pull request fails (merged a4677c20 into bf930cd7).\n. This pull request passes (merged 13634150 into ceb55031).\n. This pull request passes (merged f9c0f4d4 into 01a66235).\n. This pull request fails (merged fba1601a into 01a66235).\n. This pull request passes (merged d68c718f into 01a66235).\n. This pull request passes (merged c9c391f5 into 01a66235).\n. This pull request passes (merged 28e3b183 into 6500c94b).\n. This pull request passes (merged d846d92c into 77173328).\n. This pull request fails (merged 464641b3 into 5fee59aa).\n. This pull request passes (merged aa1ed93e into 5fee59aa).\n. This pull request passes (merged 574e8bd3 into fec1e570).\n. This pull request passes (merged 4cd4d10c into fec1e570).\n. ",
    "GeekOnCoffee": "Travis is passing, this issue should be closed. \n. @etjossem the issue is that the migration files are actually getting created a second time\n. https://github.com/radar/forem/blob/master/lib/generators/forem/install_generator.rb#L39\nIt doesn't appear to be doing any checks on whether it exists...\n. ",
    "etjossem": "Thanks so much, @radar. Worked like a charm.\n. This may be helpful.\n. 2) is still an issue. Users can see the radio buttons on their own unapproved posts, even if they are not an admin, as follows. User \"Bob-O Smith-O\" is not an admin.\n\nIdeally, he should only see a \"pending approval\" message.\n. I can move this to a separate issue if you like, seeing as you already fixed (1) and (3).\n. Same error from rake db:migrate.\n. Thanks much. This does seem to be very relevant to 3dcc66224334684ee9cf12dcae8c2fcf417a50c8. Let me know if there's anything I can do as far as information goes.\n. I might - would have to ask about doing that. At the very least, here's the console output of running the following commands in sequence:\nbundle exec rake db:migrate\nbundle update forem\nbundle exec rake db:migrate --trace\n. Thanks! Will see if that works.\n. That doesn't seem right. Bob-O can't actually approve his own post (meaning he's not a mod), and I didn't change anything in his permissions from default. Is it just me or is it just radar?\n. Gemfile: gem 'forem', :git => \"git://github.com/radar/forem.git\", :branch => \"master\"\nBundle install output: \"Using forem (1.0.0.beta1) from git://github.com/radar/forem.git (at master)\"\n. Wups, should have checked there first.\nGIT\n  remote: git://github.com/radar/forem.git\n  revision: 93728d5d33938a095e4453196bb5cb9992727b2a\n  specs:\n    forem (1.0.0.beta1)\n      cancan (= 1.6.7)\n      forem-redcarpet (= 1.0.0)\n      rails (~> 3.1)\n      simple_form\n      workflow (= 0.8.0)\n. In the post view:\n<% if post.pending_review? %>\n      <div class='moderation'>\n        <%= t(\".pending_review\") %>\n        <% if local_assigns[:mass_moderation] %>\n          <%= render \"forem/posts/moderation_tools\", :post => post %>\n        <% else %>\n          <%= form_tag forum_moderate_posts_path(post.topic.forum), :method => :put do %>\n            <%= render \"forem/posts/moderation_tools\", :post => post %>\n          <% end %>\n        <% end %>\n      </div>\n    <% end %>\n. Looks like a change since 93728d5d addresses this issue. Thanks.\n. Forums have a \"latest post\" link for each thread which depends on that method, so I believe it has the potential to complain about either.\n. I didn't copy it when the error was happening, no. Sorry.\n. Appears to be fixed.\n. ",
    "beefsack": "Done!\n. Interestingly enough, the issue is occurring on our forem install, which happens to be on Heroku too!  Perhaps an issue with using PostgreSQL and forem?\nAn example on our forums: https://www.miniand.com/forums/forums/2\n. Hi radar, it's all good, I just got up and didn't expect it to be fixed so quickly :) thanks for the fix!\nI will share my fix script here once I've written it.\n. Hi, sorry for the slow update.  I updated the forums and they look all good now :) https://www.miniand.com/forums/forums/1\nThe command I ran in rails console to fix the last post for each topic was Forem::Topic.all.each {|t| t.last_post_at = t.posts.maximum('created_at'); t.save }.\n. ",
    "jasonlfunk": "Never mind. I figured it out. Thanks :)\n. @agarie He meant that cancan updated to version 1.6.8 which broke Forem. If you force it to use 1.6.7, it works.\n. ",
    "hazg": "cancan updated... \ngem 'cancan', '1.6.7' # can help you\n. ",
    "agarie": "Using cancan 1.6.7 worked for me. Why is that? Could you explain? Thanks :)\n. @jasonlfunk Yes, it worked for me. Just wanted to know why it broke Forem. Thanks anyway!\n. ",
    "mmcc": "+1 to both the issue and the solution.\n. ",
    "alexnesbitt": "changing forums_controller.rb from\n-load_and_authorize_resource  :only => :show\n+load_and_authorize_resource :class => 'Forem::Forum', :only => :show\nseems to fix this for cancan 1.6.8\nI think this was the change from 1.6.7\nhttps://github.com/ryanb/cancan/commit/d5baed6281b4628071f8737090eaaec5168eacbf\n. That is correct.  I think it also means that if I had forem mounted at / the views would link to /forums instead of /. \n. I'm not sure about the second part of the question, but here's a link to a page that shows the double-forums route: http://bit.ly/NbRhHM\n. I submitted a pull request with the change to the file. Hope I did it right.\n. ",
    "kunalchaudhari": "I just followed convention.  For example model lives under app/models so is it's decorator. I think this will be easy to follow.\n. @radar missed the namespace in readme. actually had followed that in my project. Sorry for that. so we are going with spree like decorator and all decorators are namespaced? \n. Prev was worked for me as I forgot to remove the to_prepare block from my app. My mistake :P\n. thanks @bdensmore playing with it and @radar for fixing. cool.\n. This can be thought as a open forum where anyone can post without sign up. So user dont need to register to create topic/post. How is this sounds?\n. Recently i came across one such requirement. So i think people use this kind of open forum thing\n. - In our app we can create an anonymous user on the fly whenever anonymous user create post/topic. user will be created with generated token (token@example.com). \n- posts/topics can be displayed as posted by anonymous user. all user fields will be generated by app as mentioned above.\n- yeah i have such requirement from client. you can see it here also http://4chan.org\n. at this moment i have done it in bit ugly way. i have modified the forem_user method like this. So if user is not logged in than anonymous user can created and signed in. So this user will be linked to post/topic while creating. For this to work new and create action of topics_controller are removed from authentication check (that is from before_filter). This is still in work but looks ugly. \nruby\n  def forem_user\n    user = current_user\n    user ||= User.anonymous!\n    unless user_signed_in?\n      sign_in(user)\n    end\n    user\n  end\nUser.anonymous! create a user by generating token. Taken from Spree::User.rb(auth/app/models/user.rb)\n. here is my implementation in app. https://gist.github.com/3205867\n. @radar yeah i agree. I am having hard time doing this for my client but i have to done it some way :). But i think this kind open forum has place as people try to discuss on some open topics. I am not expert rails but would ready to work on it though with mentoring.\n. @avitus yeah. that happens because relevant_posts(topic) returns [] if topic has not been moderated yet. but if user who has started this post is logged in than topic should be displayed. And for other it won't show up as topic was not approved. \n. @avitus you can try out patch in my above commit.\n. @gabriel-dehan can you have look at issue #271? its something like open forums. Invert of private forums i guess but not exactly. \n. ",
    "atd": "FYI: I packaged this functionality as a gem, so it can be used by other engines. I also mentioned you as authors.\nhttps://github.com/atd/rails_engine_decorators\n. ",
    "hk6500": "I started the install generators again and everything seems fine now.\n. sounds great for me!\n. ",
    "bdensmore": "My Gem file is pointed at gem 'forem', :git => \"git://github.com/radar/forem.git\" and 1.0.0.beta1 is what is displayed if I do a bundle update. I believe I am using latest.\n. But I am extending the controller the correct way, right? \nI was questioning me more than I was questioning the code in the gem. I understand this is still a beta so things may not work as intended. I just wanted to make sure I wasn't trying to implement this incorrectly. But if it is indeed a bug, hopefully this helps a little bit.\n. ",
    "jvvlee": "Hello, I seem to be having the same problem. But I can't even get the server to run.\nHere's what I have:\n```\nForem::ApplicationController.class_eval do\n    def setup_application_variables\n        @section = Node.find_by_un(:networking_section)\n        @node = @section.children.first.child(:page, \"discussion_forum\")\n    end\nbefore_filter setup_application_variables\n\nend\n```\nIt's throwing an error saying:\nundefined local variable or methodsetup_application_variables' for Forem::ApplicationController:Class (NameError)`\nI placed this in app/decorators/controllers/forem/application_controller_decorator.rb, along with a base_controller_decorator.rb that contains nearly identical code except namespaced to \"Forem::Admin::BaseController.\" I apologize if I'm missing something obvious here.\nI'm using rails 4.1.8, with ruby 2.1.2\n. ",
    "mattwd7": "I have this controller that makes creates an instance variable containing all of the forum topics here:\n\nclass NavigationController < ApplicationController\ndef newest_topics   \n@topics = Topic.all\n\nrespond_to do |format|\nformat.html\nend\nend\n\nand the view that spits out a list of the topic subjects is this basic code: \n\n<% @topics.each do |t| %>\n<%= t.subject %></br>\n<% end %>\n\nBefore I get to the view, this error craps out:\nwhich indicates to me that \"Topic\" is not recognized by my controller as a model.\nI am pretty new at this with only ~150 hours experience so any advice is warmly welcomed :)\n. Hell yes, it's working!  That's super intuitive too.  Thanks, Radar!\n. gooooot it.  thanks!\n. The html? It hasn't changed from the default views I brought in, but here it is:\n_post.html.erb\n\n\n      <% if forem_user %>\n        <% if can?(:reply, post.topic) %>\n          <% if post.topic.can_be_replied_to? %>\n            <%= link_to t('reply', :scope => 'forem.topic'), new_topic_post_path(post.topic, :reply_to_id => post.id) %>\n          <% end %>\n          <% if post.topic.can_be_replied_to? %>\n            <%= link_to t('quote', :scope => 'forem.topic'), new_topic_post_path(post.topic, :reply_to_id => post.id, :quote => true) %>\n          <% end %>\n        <% end %>\n        <% if post.owner_or_admin?(forem_user) %>\n          <% if can?(:edit_post, post.topic.forum) %>\n            <%= link_to t('edit', :scope => 'forem.post'), edit_topic_post_path(post.topic, post) %>\n          <% end %>\n      <%= link_to t('delete', :scope => 'forem.topic'), topic_post_path(post.topic, post), :method => :delete, :confirm => t(\"are_you_sure\") %>\n        <% end %>\n      <% end %>\n    \nand for forums in forums/index.html.erb\n<% forums.each do |forum| %>\n        \">\n          <%= link_to t('edit', :scope => 'forem.admin.forums'), edit_admin_forum_path(forum) %>\n<%= link_to t('delete', :scope => 'forem.admin.forums'), admin_forum_path(forum), :method => :delete, :confirm => t(\"delete_confirm\", :scope => \"forem.admin.forums\") %>\n. correction: the second bit of pasted code is from forem/admin/forums/index.html.erb\n. It may be important to mention I have decorators for the Posts and Topics controllers to allow for anonymous posting.  Here I've listed those as well.  Both decorators work perfectly in development.\n\n/decorators/controllers/forem/posts_controller_decorator.rb\nForem::PostsController.class_eval do\n    def create\n      authorize! :reply, @topic\n      if @topic.locked?\n        flash.alert = t(\"forem.post.not_created_topic_locked\")\n        redirect_to [@topic.forum, @topic] and return\n      end\n      @post = @topic.posts.build(params[:post])\n      if params[:anonymous_post]\n        @post.user = User.where(:username => \"Anonymous\").first\n      else\n        @post.user = forem_user\n      end\n      if @post.save\n        flash[:notice] = t(\"forem.post.created\")\n        redirect_to forum_topic_url(@topic.forum, @topic, :page => last_page)\n      else\n        params[:reply_to_id] = params[:post][:reply_to_id]\n        flash.now.alert = t(\"forem.post.not_created\")\n        render :action => \"new\"\n      end\n    end\ndef last_page\n  (@topic.posts.count.to_f / Forem.per_page.to_f).ceil\nend\nend\n/decorators/controllers/forem//topics_controller_decorator.rb\nForem::TopicsController.class_eval do\ndef create\n  authorize! :create_topic, @forum\n  @topic = @forum.topics.build(params[:topic])\n  if params[:anonymous_post]\n    @topic.user = User.where(:username => \"Anonymous\").first\n  else\n    @topic.user = forem_user\n  end\n  if @topic.save\n    flash[:notice] = t(\"forem.topic.created\")\n    redirect_to [@forum, @topic]\n  else\n    flash.now.alert = t(\"forem.topic.not_created\")\n    render :action => \"new\"\n  end\nend\nend\n. Still haven't figured this out :(\n. Sorry, I dont know how to unflagging the urgency of this. I've had to postpone launching the site and have not been at my computer for a few days. I will try reproducing the issue with a new app as per your suggestion\n. ",
    "victormartins": "I don't understand why this is failing :/\n. ",
    "gillesmathurin": "Apparently i solved my issue by commenting out the gem \"capybara\" mention i had in my :development and :test group, then by doing a \"bundle update\". As a consequence ffi passed from version 1.1.4 to version 1.0.11 (which is not a very good move i guess). I changed the cancan gem version in forem.gemspec to the latest version (1.6.8) by the way. All this has been done on a fork of this project\n. thanks for your answer. Yes as a matter of fact, i eliminate Forem as a probable source of the localization issue i have. I just have localization issue in general in production environment\n. ",
    "gabriel-dehan": "Oh damn I had not noticed (yaah, it's late), my bad, I'll clean that up and submit a clean pull request ;)\nThanks.\n. ",
    "naps62": "Yeah, though i mentioned that in the post, seems i forgot. sorry for that\ni'll try to look into it, and see if i can get it done properly. But since my time right now is not really that much i might just need to skip that and simply disable the post approval for my app\nbut of course, i'll see what i can do in the next few of days\n. The approach i tried was to add a before_save filter to both Post and Topic\nmodel's, to mark the post as valid automatically upon creation. I also\nadded a flag to an initializer file, so that it would at least be\nconfigurable somehow.\nIn practise it works, but it made a lot of the tests fail, mostly due to\nthe fact that those tests were made assuming that every new post will be\npending validation. So it was more of an issue of the tests making wrong\nassumptions, rather than the tests failing due to any kind of application\nerror\nBut if you don't mind about the tests failing (or you have the patience to\nrefactor them) it's a viable option\nLater, if i find it useful for my project, i'm thinking of using something\nlike rails-settings-cachedhttps://github.com/huacnlee/rails-settings-cached\nto make this and other behaviours configurable in the admin interface\nOn Thu, Sep 6, 2012 at 3:07 AM, Philip Arndt notifications@github.comwrote:\n\nSure to set it to approved by default simply:\nrails generate migration change_default_value_for_forem_status_to_approved\nedit the migration and put\nchange_column :forem_posts, :forem_status, :string, :default => 'approved', :null => false\n..or very similar..\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/issues/289#issuecomment-8320164.\n\n\nCumprimentos\nMiguel Palhas\n. ",
    "sheam": "Is is possible to just alter the DB so that the default value for forem_status is 'approved'? I also need the ability to turn off this feature.\n.  I am experiencing this as well.\n. I just confirmed that the issue does not occur with rails 3.2.3, but it does occur with 3.2.11. The issue occurs during rake db:seed, on the following lines of my seeds.db file:\nforem_forums = Forem::Forum.create([\n      { category_id: 1, title: \"Feature Requests\", description: \"Features that would make your life easier.\" },\n  ])\nPerhaps there is a better way to seed the DB?\n. yep.\n[497]$ bundle show friendly_id\n/Users/sheam/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/friendly_id-4.0.9\n. I notice the forem version is (1.0.0.beta1) from git://github.com/radar/forem.git (at master) , should I try a different version?\n. Ignoring the seed error (as I am just creating forums), if I start the app, and try to go to the forums index I get the dreaded:\nNoMethodError in Forem/forums#index\nShowing /Users/sheam/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/forem-9b9c15ecbbbb/app/views/forem/categories/_category.html.erb where line #1 raised:\nundefined method `can_read_forem_forums?' for #User:0x007f915b79ace0\nThis does not happen with rails 3.2.3 either.\nThis is preventing a deployment because of the security vulnerabilities in rails < 3.2.11.\n. Now I get no such column: name. I am guessing this is because 'title' go renamed to 'name'. I have to run, but will a migration which renames the 'title' column to 'name' fix this? Or do I have to run rails g forem:install again to regenerate my forem models. If I have to run form:install again, are there files I should delete beforehand?\n. I get the error during the seeding of the DB. In my schema.rb, the form_forums table has a title, and not name. I think you guys have renamed title column to name a few month ago.  \nI do not want my code public at this point, but if I can zip up my working directory and send it to you I will. Or if you have a place to upload it to... I don't think you would reproduce the error by getting a fresh copy of my code from bit bucket, as the problem now seems to have to do with the upgrade. But I can also send you a fresh copy.\n. class RenameTitleToNameInForemForums < ActiveRecord::Migration\n  def change\n    rename_column :forem_forums, :title, :name\n  end\nend\nThis fixed the migration issue.\nI am bug free, going to try and deploy to heroku now. Thanks for the amazing response time guys.\n. ",
    "nashby": "Actually, nothing. But it's like a common practice to avoid self where not required, e.g this style guide https://github.com/bbatsov/ruby-style-guide\nOn Sep 1, 2012, at 1:10 PM, Philip Arndt notifications@github.com wrote:\n\nWhat is wrong with being explicit?\n\u2014\nReply to this email directly or view it on GitHub.\n. @radar no problem! :) \nBTW, what do you think about using https://github.com/ernie/squeel/ instead of using Arel directly? I can work on it if it sound OK to you.\n. Much more cleaner syntax.\n. ruby\nwhere(\"forem_topics.state = ? OR \" +\n      \"(forem_topics.state = ? AND forem_topics.user_id = ?)\",\n       'approved', 'pending_review', user.id)\n\nbecomes \nruby\nwhere { (forem_topics.state = 'approved') | ((forem_topics.state = 'pending_review' ) & (forem_topics.user_id = my { user.id })) }\nor something like this.\n. Ok, I see.\n. ",
    "3kingsdev": "not working on my side.. just add the \napplication.css\n= require \"forem/base/style\"\napplication layout\n<%= stylesheet_link_tag \"forem/base/style\" %>\n. i try to install \ngem 'forem-theme-twist', :git => \"git://github.com/radar/forem-theme-twist.git\"\ni did is i put it on gemfile and bundle install \nthen add \napplication.css\n= require \"forem/base/style\"\napplication layout\n<%= stylesheet_link_tag \"forem/base/style\" %>\nnot change thanks for the help.. sorry for bad english also\n. ",
    "trestles": "any update on this issue ^^ The theme doesn't seem to be pulled in. Probably an issue with how I'm doing it. Maybe docs need to be more explicit about how to do this.\n. Sure, thx in advance - I know this is probably a user (me!) error.\nok - so I followed the directions for main forem and that is working fine. Went to wiki page https://github.com/radar/forem/wiki/Theming.  To add a theme:\n1.  I added to gemfile:\ngem 'forem-theme-orange', :git => \"git://github.com/radar/forem-theme-orange.git\"\n1. ran bundle install\n2. restarted server, opened up http://localhost:3001/forums/; no css changes, checked in Chrome debugger\nI suspect that there is a step here I need to do\nResult:\n\n. ",
    "pickhardt": "I suspect you have to add these lines to your application.css file:\n= require \"forem/base/style\"\n = require \"forem/base/iphone\"\nUnfortunately, I also added these lines to my CSS file and am getting the error: couldn't find file 'forem/base/style'\nWhen I used the \"twist\" theme it worked, however it also took over my existing site's style (changed my header to blue, for example), so I want to use the most basic \"base\" theme and then modify it on my own.\n. @LightbulbProductions did you do all of these:\n1. Remove all migrations from db/migrate that have \"forem\" in their names.\n2. Remove config/initializers/forem.rb\n3. Remove the mounting line from config/routes.rb\n4. Remove the line in your Gemfile.\n5. Delete the forem_* tables in your application's database.\nI would actually do it in this order:\n1. Remove forem from your Gemfile\n2. Remove forem files from your config/initializers\n3. Add new migrations to drop the forem_ tables\n4. Run bundle install and rake db:migrate\n5. If for some reason it doesn't load or doesn't run, follow the exception to the line something is still using Forem, and fix that line.\nIf you did all that, post the exception that's occurring and we'll have a look.\n. It was the default:  mount Forem::Engine, :at => '/forums'\nI'm closing this ticket, however, because after restarting rails, it works.  Usually you don't have to restart, don't know why that was necessary in this case, but whatever.\n. The theme modified the body css (color, font, etc).  I'd prefer if every style were put inside some namespace. How you do that is up to you, but probably the easiest is to put all the HTML inside a div#forem, and then make every style in SCSS only apply to elements under the forem id.\n. I just followed the instructions here: https://github.com/radar/forem/wiki/Theming\nIt says to apply the theme styles to your css file, so naturally I added them to application.css.  It's pretty common for add ons to namespace themselves and limit interference with the main site, so I assumed that wouldn't happen.\nYou guys should add a warning to the instructions or try to limit how the theme interferes with a site's style.\n. Done\n. You can always take one of these:\nhttps://github.com/radar/forem-theme-twist/blob/master/app/assets/stylesheets/forem/twist/style.css.scss\nThis should be added to the \"theming\" instructions.\n. No, not an empty forem.css file  What I mean to say is that, as a new user implementing forem, I expected there to be some default style file that I could take and modify to suit my style.  As it is, I dug around and found the one I linked to above, then included it in my own /assets and application.css file.\nThe \"theming forem\" page should include some instructions for \"creating your own style based off of a default skeleton\" and then link to a base css file.\n. Yes, that was the problem.  A list of dependencies should be added to the instructions... I didn't know that jquery_ujs was needed. \n. ",
    "chrismeier": "@pickhardt, I had the same issue as you. I solved it by creating a file in /app/assets/stylesheets called forem.css.scss (make the file extension(s) constant with the other files). You then can add the lines you initially put into the application.css file into that file. So it should look like:\njs\n/*\n *= require \"forem/base/style\"\n */\n@radar if I want to use the forem-bootstrap theme, how would I change my application.css file and the line for the engine? Forem.theme = :base\n@trestles I don't know if you did this but you need to follow the rest of the instructions in setting up the theme like a rails engine. I did this by making a file called forem-theme.rb within /config. I then added the lines suggested in the instructions:\nruby\nrequire 'forem'\nmodule Forem\n  module Theme\n    module Base\n      class Engine < Rails::Engine\n        Forem.theme = :base\n      end\n    end\n  end\nend\n. ",
    "giedriusr": ":+1: I am facing with exactly the same issue and didn't get any feedback so far :/\n. Anyone? Or it happened just to me?\n. I've noticed that in the admin panel. I will point to it with some screenshots, later on today.\n. http://s10.postimage.org/ol2obx59h/admin_groups.png\nhttp://s10.postimage.org/9dmorkdet/new_admin_group.png\nhttp://s10.postimage.org/yxoyxzysl/new_category.png\nhttp://s10.postimage.org/jq8zdn6xx/new_forum.png\nHere are the screenshots. Maybe I am missing something, but some parts are still in English.\n. Great. Thanks\n. Please close the issue if it was fixed\n. Well, another topic was created. Closing this one.\n. Hi @radar,\nI just got the same error. Will try to be more descriptive.\nEnvironment\nRails: 3.2.9\nRuby: 1.9.3-p194\nI already have User model (using Devise). Just ran the command:\nrails g forem:install\nI am using PostgreSQL for DB. If you need extra information, please let me know. I'd like to help solve this issue. Maybe I am the only one experiencing this.\nbash\n$ rails g forem:install\nCopying over Forem migrations...\nWhat is your user class called? [User] \nWhat is the current_user helper called in your app? [current_user] \nDefining forem_user method inside ApplicationController...\n      insert  app/controllers/application_controller.rb\nAdding forem initializer (config/initializers/forem.rb)...\n      create  config/initializers/forem.rb\nRunning rake db:migrate\nNOTICE:  CREATE TABLE will create implicit sequence \"forem_forums_id_seq\" for serial column \"forem_forums.id\"\nNOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index \"forem_forums_pkey\" for table \"forem_forums\"\nNOTICE:  CREATE TABLE will create implicit sequence \"forem_topics_id_seq\" for serial column \"forem_topics.id\"\nNOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index \"forem_topics_pkey\" for table \"forem_topics\"\nNOTICE:  CREATE TABLE will create implicit sequence \"forem_posts_id_seq\" for serial column \"forem_posts.id\"\nNOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index \"forem_posts_pkey\" for table \"forem_posts\"\nNOTICE:  CREATE TABLE will create implicit sequence \"forem_views_id_seq\" for serial column \"forem_views.id\"\nNOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index \"forem_views_pkey\" for table \"forem_views\"\nNOTICE:  CREATE TABLE will create implicit sequence \"forem_categories_id_seq\" for serial column \"forem_categories.id\"\nNOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index \"forem_categories_pkey\" for table \"forem_categories\"\nNOTICE:  CREATE TABLE will create implicit sequence \"forem_subscriptions_id_seq\" for serial column \"forem_subscriptions.id\"\nNOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index \"forem_subscriptions_pkey\" for table \"forem_subscriptions\"\nNOTICE:  CREATE TABLE will create implicit sequence \"forem_groups_id_seq\" for serial column \"forem_groups.id\"\nNOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index \"forem_groups_pkey\" for table \"forem_groups\"\nNOTICE:  CREATE TABLE will create implicit sequence \"forem_memberships_id_seq\" for serial column \"forem_memberships.id\"\nNOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index \"forem_memberships_pkey\" for table \"forem_memberships\"\nNOTICE:  CREATE TABLE will create implicit sequence \"forem_moderator_groups_id_seq\" for serial column \"forem_moderator_groups.id\"\nNOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index \"forem_moderator_groups_pkey\" for table \"forem_moderator_groups\"\nCreating default forum and topic\n/Users/giedrius/.rvm/gems/ruby-1.9.3-p194/gems/activemodel-3.2.9/lib/active_model/attribute_methods.rb:407:in `method_missing': undefined method `forem_needs_moderation?' for #<User:0x007fcc5b600fc0> (NoMethodError)\n. Ok, thank you very much! :)\n. ",
    "bodrovis": "Seems to be fixed: https://github.com/radar/forem/pull/373\n. I face exactly the same problem with a brand new application.\n. Of course. I find any post on the forum and click Quote button near it. Then i see the form with the content shown on the first screenshot (i just put \"my reply\" there). Then i click Submit and see that the blockquote tag is shown in raw format (second screenshot). Moreover, when i quote post with multiple lines, every line is being wrapped in a \"p\" tag (like it is shown on the third screenshot). I guess something is wrong with formatter. In the formatting_helper.rb i changed the line \nruby\n\"<blockquote>#{(h(text))}</blockquote>\\n\\n\".html_safe\nand removed the blockquote tag, replacing it with just the \"Quote\" word, but this is not quite beafutiful  :) \nI just noticed that on the demo forum everything is OK with quoting and in the form while quoting not the \"blockquote\" tag, but the \"> >\" symbols are being shown. \n\n\n\n. I can approve that adding\nruby\ngem 'forem-gfm_formatter'\nto the Gemfile fixes the problem. Thanks a lot!\nClosing the issue.\n. After I updated forem on my site I got problems with quoting again. Now when I click on \"Quote\" link I see this in the textarea:\n```\n\nOriginal message\n```\n\nWhen I click submit I see the following:\n```\n> Original message\nMy message\n```\nSo basically the > symbol is being encoded for html. You can see this issue here: http://www.la-theatre.ru/forum/forums/chetvyortyy-festival/topics/dlya-teatrov?page=1\n. Oh well, i removed gem 'forem-gfm_formatter', run bundle update, restarted the server and this issue is gone. Thanks!\n. Though i am not sure why the empty p tag appears just before the blockquote (see the image below).\n\n. @radar I have just created a new rails app with the following Gemfile:\n``` ruby\nsource 'https://rubygems.org'\ngem 'rails', '3.2.15'\ngem 'sqlite3'\ngem 'forem', :github => \"radar/forem\"\ngem 'will_paginate', '3.0.4'\ngem 'devise'\ngroup :assets do\n  gem 'sass-rails',   '~> 3.2.3'\n  gem 'coffee-rails', '~> 3.2.1'\n  gem 'uglifier', '>= 1.0.3'\nend\ngem 'jquery-rails'\n```\nThen I followed instructions here: https://github.com/radar/forem#installation and here https://github.com/plataformatec/devise#getting-started to set up Devise. \nAfter that I created new forum and a new theme, added post and then replied to it. Here is the output (with no styling):\n\nAnd with some styling:\n\nThe empty p tag before blockquote persists. Not sure if this is an expected behavior. Please let me know if there is any other information required.\n. This happens because simple_format wraps text with p tag, so this input simple_format('<blockquote>Test</blockquote>') produces this output: <p><blockquote>Test</blockquote></p>. And after Forem::Sanitizer.sanitize removes this wrapping and puts it at the beginning of the line, so this construction Forem::Sanitizer.sanitize(simple_format('Test')) provides this output: <p></p><blockquote>Test</blockquote>.\nUPDATED: As far as I understand blockquote tag cannot be placed inside of the p, so this happens.\n. The source code of simple_format:\nruby\n      def simple_format(text, html_options={}, options={})\n        text = '' if text.nil?\n        text = text.dup\n        start_tag = tag('p', html_options, true)\n        text = sanitize(text) unless options[:sanitize] == false\n        text = text.to_str\n        text.gsub!(/\\r\\n?/, \"\\n\")                    # \\r\\n and \\r -> \\n\n        text.gsub!(/\\n\\n+/, \"</p>\\n\\n#{start_tag}\")  # 2+ newline  -> paragraph\n        text.gsub!(/([^\\n]\\n)(?=[^\\n])/, '\\1<br />') # 1 newline   -> br\n        text.insert 0, start_tag\n        text.html_safe.safe_concat(\"</p>\")\n      end\nProbably it can be tweaked like this:\nruby\n  def simple_format_tweaked(text)\n    text = '' if text.nil?\n    text = text.dup\n    text = text.to_str\n    text.gsub!(/\\r\\n?/, \"\\n\")                    # \\r\\n and \\r -> \\n\n    # text.gsub!(/\\n\\n+/, \"</p>\\n\\n\")  # 2+ newline  -> paragraph ???\n    # text.gsub!(/\\n\\n+/, \"<br /><br />\") # just replace couple of new lines with 2 br?\n    text.gsub!(/([^\\n]\\n)(?=[^\\n])/, '\\1<br />') # 1 newline   -> br\n    text.html_safe\n  end\nBut I am not sure what to do with \\n being replaced with new paragraphs. What do you think about this?\n. Another option is to use Rails4-style simple_format, which provides a way to specify wrapper tag. I thought that div could be used for wrapping instead of p, because blockquote can be placed inside div, but Sanitize strips it when using Sanitize::Config::BASIC.\n``` ruby\n  def simple_format_tweaked(text, html_options = {}, options = {})\n    wrapper_tag = options.fetch(:wrapper_tag, :p)\n# text = sanitize(text) if options.fetch(:sanitize, true)  not needed?\nparagraphs = split_paragraphs(text)\n\nif paragraphs.empty?\n  content_tag(wrapper_tag, nil, html_options)\nelse\n  paragraphs.map! { |paragraph|\n    content_tag(wrapper_tag, paragraph, html_options, false)\n  }.join(\"\\n\\n\").html_safe\nend\n\nend\nprivate \ndef split_paragraphs(text)\n    return [] if text.blank?\ntext.to_str.gsub(/\\r\\n?/, \"\\n\").split(/\\n\\n+/).map! do |t|\n  t.gsub!(/([^\\n]\\n)(?=[^\\n])/, '\\1<br />') || t\nend\n\nend\n``\n. @radar Understood. Here are the results of my experiments (the whole app was pushed here https://github.com/bodrovis/tesforem ): \n1. Quoting without any formatter and with no styling (only with normalize.css) is okay:\n   ![nostyling](https://f.cloud.github.com/assets/646942/1572497/253232c2-511e-11e3-9d52-04b6cc6fa56d.png)\n2. Quoting with no formatter and with styling (I used Twist theme) makes main text of the post float theblockquote(blockquotehasfloat: left) and it looks pretty strange.\n   ![withstyling](https://f.cloud.github.com/assets/646942/1572512/6373129a-511e-11e3-8bf9-544a1e9b5d24.png)\n   I think that the main text (after theblockquote) should be wrapped inpto avoid this. Maybe the whole post withblockquoteand text should also be wrapped indivwith some styling applied, because as you can see the text in the first post is displayed inline with the time.\n3. I also faced problems with formatters. Firstly I addedgem 'forem-gfm_formatter'to my Gemfile and usedbundle update. It gave me the following result:\n   ![gfm](https://f.cloud.github.com/assets/646942/1572522/88118fe6-511e-11e3-9b92-b13ffe4bdb0a.png)\n   So basically the>symbol was just encoded for html as>. \n4. Then I replaced gfm withgem 'forem-rdiscount'and got the following:\n   ![rdiscount](https://f.cloud.github.com/assets/646942/1572538/d8544c1e-511e-11e3-8caf-5f6bc20d7853.png)\n   Soblockquotewas sanitized and wrapped withp. I got the same result withgem 'forem-textile_formatter'.\n5. Lastly I usedgem 'forem-kramdown'.>symbol was not encoded for html, but it was shown as is and was wrapped withp. By occasion I have noticed that replacing>withblockquotemakes the post look absolutely right (as it is supposed to look, as I think) - note the difference between the two posts at the screenshot.\n   ![kramdown](https://f.cloud.github.com/assets/646942/1572561/4e2ccff6-511f-11e3-8c26-c416cb0bd01b.png)\n6. Still when using kramdown and forcing theblockquotethere are some problems with styling because of float:\n   ![kramdownstyled](https://f.cloud.github.com/assets/646942/1572589/027a6e1e-5120-11e3-8bb8-168b8aa2fc76.png)\n   But that is the least problem :)\n. It seems like sanitization was the problem, at least when usinggem 'forem-kramdown'. I rewrote the methodas_formatted_html(https://github.com/radar/forem/blob/9633409b8557b35fa37d101125b6c0cfb0193978/app/helpers/forem/formatting_helper.rb#L4) like this (removedas_sanitized_text`):\nruby\n    def as_formatted_html(text)\n      if Forem.formatter\n        Forem.formatter.format(text)\n      else\n        Forem::Sanitizer.sanitize(text).html_safe\n      end\n    end\nand quoting was formatted nicely:\n\nRewriting the method as: \nruby\ndef as_formatted_html(text)\n      if Forem.formatter\n        as_sanitized_text(Forem.formatter.format(text)).html_safe\n      else\n        Forem::Sanitizer.sanitize(text).html_safe\n      end\n    end\ndoes the trick for kramdown, but other formatters does not work :(\n. @radar Okay, I understood what is going on; things appeared to be quite messed. The main problem seems to be sanitization. By points:\n1. Yeah\n2. time should also not have float attribute; there are more changes to styling to be done but it can be managed\n3. Okay! By the way, do we have to sanitize text in the format method here: https://github.com/radar/forem-gfm_formatter/commit/81e0390336d50c07eceb653a271950ce10a62923 if we already have this line in as_formatted_html: Forem.formatter.format(as_sanitized_text(text))? It seems like double sanitization (and also there are problems with sanitization which I will point out next).\n4. The forem-rdiscount gem seems to be outdated. I included it into my Gemfile like this: gem 'forem-rdiscount' and noticed that when clicking \"Quote\" the original text in textarea was wrapped with blockquote however judging by the gem's code it should be prepended with > symbol, which in turn should be transformed into blockquote. I then launched console and running Forem.formatter.respond_to?(:blockquote) gave false, however there is a method blockquote defined. After it I changed my Gemfile like this: gem 'forem-rdiscount', git: 'https://github.com/radar/forem-rdiscount.git' and things started to work as expected, but > was displayed as raw text (just like in point 5 when I used kramdown):\n   \n   So after all my guess is that forem-rdiscount gem should be updated on the rubygems.org.\n   The code for forem-textile_formatter is outdated: it uses ERB::Util.h(text) just like forem-gfm_formatter and has no blockquote method: https://github.com/radar/forem-textile_formatter/blob/master/lib/forem/formatters/redcloth.rb. I submitted a pull request: https://github.com/radar/forem-textile_formatter/pull/1\n5. It appears that this is not related to point 3. I tried to apply a fix described previously and rewrited method as_formatted_html like this for sanitization applied after the formatter does its job, not before:\nruby\ndef as_formatted_html(text)\n      if Forem.formatter\n        as_sanitized_text(Forem.formatter.format(text)).html_safe\n      else\n        Forem::Sanitizer.sanitize(text).html_safe\n      end\nend\nAs I mentioned, it did the trick for kramdown. After fixing the problem with RDiscount I found out that this fix works for this formatter as well. I presume that after fixing issues with the two other formatters it should work fine with all of them. \n6. I had to make action buttons absolutely positioned. My solution can be seen here: http://www.la-theatre.ru/forum/forums/chetvyortyy-festival/topics/dlya-teatrov.\nSo after all something has to be done with sanitization. Don't know if my suggested fix is okay, but at least we managed to resolve problems with formatters.\n. @radar Okay! I am sorry, what about pull request https://github.com/radar/forem-textile_formatter/pull/1 in point 4? Is it okay or should i change something?\n. I am not sure, but probably this issue should be reopened. There is a lot going on here and new users will have problems with quoting due to sanitization.\n. @radar It is done!\n. I am sorry, but was that ever fixed? I got the following error when visiting \"Add a new member page\": TypeError: $(...).select2 is not a function (I have created a brand new application with the latest Forem). Adding gem \"select2-rails\" directly to my Gemfile, //= require select2 to application.js and @import 'select2.css.scss'; to application.css.scss actually fixes this and everything works fine.\n. Oh, I just added //= require forem to application.js and @import 'forem/base.css'; to application.css.scss. This should be mentioned somewhere in the docs probably?\n. @radar Done: https://github.com/radar/forem/pull/502\n. @mhauserr You can take a look at my demo Forem app which I created couple of weeks ago (I used it to demostrate some other concept, but it works fine): https://github.com/bodrovis/tesforem You do not need Forem.sign_in_path, just entry for sign in routes.rb (in my example I use Devise but thats no matter).\n. Seems like this is not an issue anymore\n. @parndt @yas375 The tests are still failing for both branches. I think this PR was not related to these tests (moreover I did not get those errors a month ago).\nI've found out why the Ambiguous match, found 2 elements matching css \"#posts .post .user\" shows up:\n\n. @yas375 Yeah, this is happening because the user is being rendered twice. I'll fix this in a moment\n. https://github.com/radar/forem/pull/535\n. Not sure why the build is failing, but it would be nice to update translations, because i have missing translations in some pages of the forum (groups and forums management).\n. Could you please merge it? Or did i do something wrong?\n. @radar Thank you!\n. I was not able to reproduce this using rails3 branch. I have two users: an administrator and a ordinary user with forem_state set to pending_review. I add a post as an ordinary user, then login as an admin, open moderation tools and do see this topic and can approve it. Am I missing something or was it fixed somewhere else? \n. Oops sorry I still see \"no posts\" message. \n. undefined local variable or method 'name'  raises because Devise creates User model with no name column. I got the same problem and just added this column to User model. I think that forem documentation should be slightly changed to mention this fact. Of course, users should be given an option to enter their name during registration and after they sign in.\n. @radar Done!\n. I am sorry, will replace this pull request with anoter one https://github.com/radar/forem/pull/503 because I really messed with Git here and it became cluttered.\n. ``` ruby\nsource \"https://rubygems.org\"\ngem 'forem-theme-base', :git => \"git://github.com/radar/forem-theme-base\", :branch => \"master\"\ngemspec\ngem 'pry-rails'\ngem 'pry-nav'\nplatforms :jruby do\n  gem \"activerecord-jdbc-adapter\", :require => false\nend\ngroup :test do\n  platforms :ruby do\n    gem \"forem-redcarpet\", :github => \"radar/forem-redcarpet\", :branch => \"master\"\n    gem \"mysql2\"\n    gem \"pg\"\n    gem \"sqlite3\"\n  end\nplatforms :jruby do\n    gem \"activerecord-jdbcmysql-adapter\", :require => false\n    gem \"activerecord-jdbcpostgresql-adapter\", :require => false\n    gem \"activerecord-jdbcsqlite3-adapter\", :require => false\n    gem \"forem-kramdown\", :github => \"phlipper/forem-kramdown\", :branch => \"master\"\n  end\nend\nif RUBY_VERSION < '1.9.2'\n  gem 'nokogiri', '~> 1.5.9'\nend\n```\nMaybe I know what is causing this problem. It is because we have platforms :ruby do where sqlite3 is present, but I am currently on Windows and so gems from this group are not being loaded.\n. I changed that line to platforms :ruby, :mswin do, but now when trying to run tests I keep getting \ngit://github.com/radar/forem-redcarpet.git (at master) is not checked out. Please run bundle install\nRunning bundle install or bundle install --no-deployment does not help :(\nUpdated:\nbundle pack\nbundle install --path vendor/cache\ndidn't help either.\n. @radar Wouldn't cloning the repo to your PC and modifying the line to platforms :ruby, :mswin do do the trick? I will try to research more today on this issue.\n. @radar I managed to fix it at last. Will submit a pull request.\n. PR: https://github.com/radar/forem/pull/507\n. @radar I will do that in the evening, but for now i will put the following link: http://bundler.io/v1.2/man/gemfile.5.html\nPlease scroll to the middle of the file, section PLATFORMS (:platforms):\n- ruby - C Ruby (MRI) or Rubinius, but NOT Windows\n- mingw - Windows 'mingw32' platform (aka RubyInstaller)\nMy PR (https://github.com/radar/forem/pull/507) fixes this issue for me on Windows and I managed to run tests. I do not know if this happens anywhere else, because currently i do not have any other platforms. platforms :ruby, :mingw do means that following gems will be installed on all 'ruby' platforms (Linux, Mac and friends) AND on Windows. Specifying only platforms :ruby means that these gems will NOT be installed on Windows and indeed any DB adapters will not be loaded. For example, in one my project i specify this:\nruby\ngem 'therubyracer', :platform => :ruby\ngem 'execjs'\nbecause on the production server i should use gem 'therubyracer' (there is a Linux OS), but on my development machine with Windows this gem does not install as it is not supported by this OS, so instead i should specify gem 'execjs'.\n. @radar To reproduce it simply clone Forem from the master branch on Windows machine and run:\nbundle exec rake forem:dummy_app\nbundle exec rspec spec\nAfter that you could try my fix in the Gemfile: platforms :ruby, :mingw do, run bundle install and those commands again.\n. I will close this issue as my PR was merged and tests are running fine now.\n. Backticks are added.\n. @radar I've fixed language references. I specified ruby just mechanically.:)\n. @radar Yes, I will try to add tests after we solve this one https://github.com/radar/forem/issues/500 :) \n. @radar Cool, i will close this! But i'm not sure why GitHub says there are unmerged commits... Could you please check?\n. Sorry @radar I was in a hurry when writing it and it was a bad idea... On the second thought this issue is not related to Forem directly, but to gfm itself, so I will rather open an issue in your fork rather then here. Closing this one.\n. But I will not be able to open an issue in your fork basically because it is a fork and there is no such option. :(\nOkay. So basically I wanted to say that we should probably instruct users to reference your forked version of forem-gfm_formatter (https://github.com/radar/forem-gfm_formatter) rather than this https://github.com/Miniand/forem-gfm_formatter because this PR https://github.com/Miniand/forem-gfm_formatter/pull/1 still wasn't merged.\nHowever I don't understand why sanitization is used inside formatter (https://github.com/radar/forem-gfm_formatter/commit/81e0390336d50c07eceb653a271950ce10a62923#diff-3274363927d6044e057e125e9d1595e0R10) if it is already being used inside Forem engine (https://github.com/radar/forem/blob/9633409b8557b35fa37d101125b6c0cfb0193978/app/helpers/forem/formatting_helper.rb#L6)? Should it be used twice? For example, inside forem-textfile_formatter there is no sanitization: https://github.com/radar/forem-textile_formatter/blob/master/lib/forem/formatters/redcloth.rb#L7\n. https://github.com/radar/forem-gfm_formatter/pull/1 Done!\n. @radar Sure thing. I have created a repo with a new app that uses the latest version of Forem: https://github.com/bodrovis/forem_quoting You can clone it, run all migrations and stuff, then create a new topic and try to quote uncommenting lines here one by one: https://github.com/bodrovis/forem_quoting/blob/master/Gemfile#L13\nObserve the results. I was NOT able to make quoting work with forem-kramdown:\n\nand forem-rdiscount:\n\nOther formatters work nice (I did not try to use gfm formatter because there is unmerged pull request).\nSo this seems like sanitization being applied and > displayed as raw symbol and not being formatted as blockquote.\n. I have also tried to implement the workaround described earlier and it does work for all formatters present in my Gemfile.\n. By the way shouldn't we stick with one formatter? And stop using forem-redcarpet as it requires Python (as it is described here https://github.com/radar/forem/wiki/1.0-Roadmap)?\n. @radar But it relies on pygments.rb which requires Python to be installed and as far as I remember we had a small discussion that this is no good. And as I see the mention about this fact is gone from the roadmap. So you do not think that switching to a JavaScript-based code highlighter is a good idea?\n. @radar Btw what about https://github.com/rubychan/coderay ? What do you think about that https://github.com/radar/forem-redcarpet/pull/6 ?\n. Seems so. You could also take a look here https://github.com/radar/forem/issues/512 and here https://github.com/radar/forem/issues/359\n. You could try to use some formatter for the text (https://github.com/radar/forem/wiki/Formatters), for example https://github.com/phlipper/forem-kramdown/. At least I launched console in my test Forem app and tried to format your text with kramdown and paragraphs appeared. However an issue with sanitization could rise which is described here https://github.com/radar/forem/issues/512. I've bumped into it a couple of weeks ago and had to make a temporal fix: https://github.com/bodrovis/forem/commit/72d592f3b420958163da0b3a5958935d97a30a99\n. @avitus It was optional until simple_format was removed :) I will make a pull request to clarify this issue in readme\n. I got the same error when deploying. This is happening because https://github.com/radar/forem/blob/rails4/app/assets/stylesheets/forem/base.css here select2 is being required (which in turn is used when adding user to a group inside Admin section. I ended up hooking up select2 directly, without base.css and select2-rails gem. \nBut this error seems to be fixed in a new version of select2-rails so I will submit a PR to bump it.\n. I do not see any errors on this screenshot. Everything shows up nice, you just have to apply styling and maybe tweak the views.\n. Not sure that this should be specified in Readme because this info is provided in the guides http://guides.rubyonrails.org/engines.html\n. @yas375 Yes, all these commits were messed up, my bad - I was constantly disturbed and was forgetting to remove .idea. Rebased, now everything seems to be okay. Thanks for the help!\n. @parndt Done!\n. P.S. The rails3 branch seems to be heavy out of date comparing to rails4.\n. @radar The issue with rails3 is gone; I've submitted a new PR: https://github.com/radar/forem/pull/545, closing this one\n. @yas375 Oh, my bad. Of course it should. Will fix in a moment.\n. Could you merge this plz? :)\n. Full stack trace for this error would be helpful.\n. At this point it is hard to say what causes this problem, but just in case wanted to remind that all your routes inside the app should be written like this:\nruby\nlink_to main_app.posts_url\nprovided that in your routes.rb you have \nruby\nresources :posts\nand Forem's routes should be specified like\nlink_to forem.root_path\n. @sabrams86 Take a look at my previous post, I think that was the cause. Try to add this route (or something link this):\nruby\nget '/home', to: 'home#index', as: 'home'\nand modify this Home link as follows:\nruby\n<li><%= link_to 'Home', main_app.home_path, class: 'active' %></li>\n. @sabrams86 Yes, it is so as soon as those links will be rendered at Forem's pages. You can read more about that here: http://guides.rubyonrails.org/engines.html#routes As far as Forem is an engine, it has its own routes, so we have to tell Rails which routes to use: Forem's or main_app's. \n. That is strange. What did contents did you have there prior to that?\n. I think that inside forem.css.scss (in vendor directory) we should add:\n@import 'forem/base';\nand inside forem.js.coffee:\n```\n= require forem.js.erb\n```\n(Btw why does this file has .erb extension?)\nOr probably it would be even better to remove these files from the app/assets and place their contents inside vendor.\nAlso maybe we have to remind users to remove #= require jquery from forem.js.coffee if jQuery was required in some other place.\nAlso I think that it would be better to instruct user here https://github.com/radar/forem/wiki/Theming not to add these lines:\n<%= stylesheet_link_tag \"forem\" %>\n<%= javascript_include_tag \"forem\" %>\nbut to add \n@import 'forem.css.scss';\nto their application.css.scss\nand \n//= require forem\nto the application.js. Otherwise when deploying to Heroku (and maybe not only to Heroku) I get this error: \n2014-03-26T11:29:28.337498+00:00 app[web.1]: ActionView::Template::Error (forem.\ncss isn't precompiled):\nWhich means that I have to manually specify it to be precompiled inside application.rb.\nWhat do you think about that?\n. Okay. \nI again tried to create a brand new app with Forem. I made absolutely no modifications to the config file, launched the server and opened /forums. I got this error:\nSprockets::Rails::Helper::AssetFilteredError in Forem::Forums#index \nAsset filtered out and will not be served: add `Rails.application.config.assets.precompile += %w( forem.css )` to `config/initializers/assets.rb` and restart your server\nAlso the same error appears stating that forem.js should also be added like this: %w( forem.js ). Adding this line fixes the problem.\nUsing Rails 4.1.1 and Devise, server was started in development environment.\n. @defaye Well, actually that was the demo app for my article on Sitepoint http://www.sitepoint.com/forem-rails-forum-engine/ that explains how to set up Forem (you might want to read that - maybe this well help) and its source code can be found here https://github.com/bodrovis/sitepoint-forem\n. Well actually this happens in development. I guess that is not big problem so I will close this issue for now.\n. @radar You can use this brand new app https://github.com/bodrovis/SitePointForem to reproduce it, but for me it only happens on heroku. I've added you as a collaborator for that Heroku app, check your email. :)\n. Any luck with this?\n. @radar Sorry, I did not mean to rush and all the stuff. Of course, you have a lot of thigs to do. Just let me know if there is any other info I can provide or help with.\n. @radar I can confirm that Forem.layout = \"application\" does fix this problem.\n. @radar Of course you can clone that app from heroku (I've added you to collaborators) and change the Forem.layout = \"application\" back to the Forem::ApplicationController.layout \"application\"\n. Could it be because now forem uses its own layout as default? See this wiki page https://github.com/radar/forem/wiki/Theming and this issue https://github.com/radar/forem/issues/552\n. @Astr0surf3r Don't you experience the same issue as described here https://github.com/radar/forem/issues/552 in production?\n. Unauthorized can read topics without having to log in https://github.com/radar/forem/blob/rails4/app/controllers/forem/topics_controller.rb#L4\n. https://github.com/radar/forem/pull/554\n. I believe this won't be an issue when the 596 will be merged. I will have to test this however because I hadn't used Forem for a while.\n. It seems that the default Forem's layout does not include jquery_ujs: https://github.com/radar/forem/blob/rails4/app/assets/javascripts/forem.js.erb \nTherefore when you specify own layout (eg, application) it gets loaded and everything works fine.\n. @RostDetal Yeah, seems that's the case. \n. @radar Don't ask me :)) I was not getting this error but judging by the details it seems that ujs is the cause. Not sure though\n. I'm also getting this but managed to fix that https://github.com/radar/forem/issues/550#issuecomment-42991605\n. @defaye Okay, cool!\n. This is definetely related to the app and heroku logs should return some kind of an error...\n. @MacFarlaneBro https://stackoverflow.com/questions/11446094/heroku-errnoeconnrefused-connection-refused-connect2\n. https://stackoverflow.com/questions/20635438/post-and-errnoeconnrefused-connection-refused-connect2\nHeroku does not allow you to send emails using the internal SMTP. You need to use one of the Heroku add-on.\nI am not sure if this is still true though.\n. @WeremyJalters The Bootrstrap theme is partially broken so you either can tweak it for yourself or fix it and send pull request here.\n. @louiecaulfield There is a long story behing formatters: https://github.com/radar/forem/issues/512 and https://github.com/radar/forem/issues/359 \nI have found that forem-redcarpet is the best choise for now.\n. @pavankat Some time ago I've written a tutorial to setup Forem, maybe it will help you: http://www.sitepoint.com/forem-rails-forum-engine/\n. @pavankat Please note that to use route helpers from your app inside Forem you have to use main_app, therefore your method probably be main_app.teacher_path. Forem's route should be used with forem, like forem.forums_path.\n. @lyneux Do you see any errors in the logs?\n. @Byronlee You have to prefix your existing routes helper with main_app. To fix the second issue you have to tweak initializers/forem.rb like this:\nruby\nRails.application.config.to_prepare do\n  Forem.layout = \"application\"\nend\nI've written a guide on how to setup Forem: http://www.sitepoint.com/forem-rails-forum-engine/\n. @Byronlee Not sure about the first one. The second one is a bug that is yet not fixed. It is supposed to be like said in the wiki but it does not work, so I've found this workaround.\n. Idk, it should be tested, but this used to be broken and we had to use Forem.layout = \"application\"\n. @annemarie35 Indeed you can. Seems like those translations weren't updated since 2012.\n. Some years ago I implemented a bunch of updates and fixes but some of them are still not merged because the owners are having too much other things to do. And to be honest the gem (and the themes) have a handful of problems that needs to be taken care of.  . @frankie-loves-jesus Not sure, probably not now, moreover Ryan did not propose me anything. I was using Forem on one of my sites about 4 years ago but now I don't, so no real need for me to work on this gem. Though if someone else wishes to support the project then I might step in.. Sorry, it's just RubyMine config files. Makes me sick removing it every time :). Still removed .idea from gitignore.\n. Done, forgot about it.\n. Why so? It means that these will be installed on Windows AND on other platforms as per this document: http://bundler.io/v1.2/man/gemfile.5.html. I've put more info on this comment: https://github.com/radar/forem/issues/500#issuecomment-29050211\n. Could you please check it on your PC (i presume, you are not working on Windows)?\n. Yes, it does, I will modify it right away\n. Done. Is it okay? My IDE set indentation to 4 spaces by default... :)\n. Post is being rendered with its own submit button, so for 2 posts I see 3 buttons which is strange\n. Here you go. I have 1 unapproved post but still 2 buttons: one from this view and one from the partial with the post and its moderation tools:\n\n. I too think that making this a scope would be better\n. ",
    "Spaceghost": "I just met you, and this is crazy, here's my issue, solve it maybe?\n. You could put it on the view object itself if you like.\n. ",
    "levibuzolic": "\n. ",
    "oliverriechert": "I live in a different time zones ^^\n@radar \nYes for the email notifications.\nBut you're right with Rails 4\nI will wait with the developers still.\n. ",
    "prasadrails": "Hi friends, I have seen \"subscription_mailer.rb \" here one comment is there i.e \"# only pass id to make it easier to send emails using resque\" , can any one explain , how to using \"rescue\" in forem . What parameters I have to send .\nThanks in Advance,\nPrasad.\n. Ok Thank you very much.\n. ",
    "alepore": "oh no, brand new setup works, so it's my app.. strange because i'm not doing any core refinery modification.\nFull trace here if anyone can help:\nhttps://gist.github.com/3780504\np.s: first refinery installation was not performed with edge template, i started with stable refinery and then update to edge\nthanks!\n.  i solved removing app/decorators/controllers/refinery/pages/pages_controller_decorator.rb. this makes sense?\n. steps to reproduce:\n- create a refinery test app as parndt said\n- add forem gem\n- create a refinery controller decorator (ex. app/decorators/controllers/refinery/pages/pages_controller_decorator.rb) like:\nruby\nRefinery::PagesController.class_eval do\nend\nrefinery pages will not work anymore\nsame thing happen with engine's controller decorator.\n. putting forem after refinerycms in Gemfile seems to work, thanks!\nmaybe this 'workaround' can be added to the README until a final solution is found.\n. ",
    "eostrom": "I had a similar problem on Refinery 2.0.8, without introducing any decorators. (In my case, refinery_user? is the method that's undefined.) I was able to resolve it by putting forem after refinerycms in the Gemfile. I'm posting this comment here in case that makes a difference in the 2.1.0.dev/decorator case.\n. I'm seeing this error and I'm not using :as. Is the resolution here that Forem is incompatible with initialize_on_precompile = false?\n. OK. I added a wiki page recommending user-env-compile or local asset compilation. [Update: This project's wiki, not Wikipedia!]\n. Thinking further on this: It seems like the installer does a bunch of stuff that needs to be done by a single developer (creating the initializer, adding migrations, all of which will be added to git and checked out by others) and a couple of things that need to be done on each dev/test/production database (actually running the migrations) and that you might not even want on all of them (creating default topics and categories).\nMaybe it would be better to keep the latter out of the generator, and instead provide a rake task that can be run to add seed data to each database that wants it?\n. Right, but creating seed data is something you want to do more than once (e.g., on multiple developer databases). I think that's why I suggested adding a rake task to do that outside of the generator context.\nAnyway, it's not really relevant to the PR, just a thought I had.\n. Yeah, me either! That was a while ago! But moving the seed data out of\nrails g forem:install sounds about right.\nOn Tue, Jan 14, 2014 at 12:26 AM, Ryan Bigg notifications@github.comwrote:\n\n@eostrom https://github.com/eostrom Yes, seed data can be run once on\nevery developer's database. I am not sure quite what you're suggesting\nother than moving the seed data out of rails g forem:install?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/issues/325#issuecomment-32241677\n.\n. That does work. I'll add a note to the Authorization System wiki page.\n. What are your thoughts on view counts? In an API-based app, there isn't necessarily a one-to-one correspondence between a browser requesting data for a topic and a user viewing that topic. Should we bother having an explicit \"views\" API where a client can let the server know what the user's been looking at?\n. I forget. I mean, I can imagine building an app in various ways that request a forum endpoint with included topic data, or that request topics and don't necessarily render them. But I'm not currently doing that, so maybe I was just overthinking it.\n. Thanks, I'll make those changes next.\n\nI've just pushed four new commits that contain tentative answers to questions I ran into:\n- Can an API user create a Topic without a Post?\n- How do we keep /api/ routes from colliding with a forum about APIs?\n- How closely should API controllers be integrated with HTML UI controllers?\n- How should we represent errors in API responses?\nI'm pressing ahead with these tentative answers, but let me know if you have thoughts on them.\n. I love the idea of being able to build JS apps on Forem (I'm depending on making it happen for my current project!) but I don't think Forem should lose the HTML UI entirely. Sometimes you just want to make a Rails app, and Forem was a great way to make that happen on a previous project I worked on.\nI've imagined splitting the project into a forem-core gem, a forem-web gem that provides the HTML UI, and a forem-api gem that provides the JSON API. That said, my current thinking is that the API will share some of its controller implementation with the HTML UI, so there may not be enough difference to make it worth splitting into separate gems.\nIn the near term, I support a 0.1 release to have a version that's fixed in time, to allow security fixes as @vfonic said, and because it's a little faster and more comfortable to integrate gems into a project than GitHub repos. The current gem situation makes Forem look like a Rails 3 project that got abandoned. It may not be 1.0-ready, but it's more stable and useful than that.\nAlso, releasing a Rails-4-compatible gem might encourage more contributors to help improve it. Speaking of which, thanks, Viktor, for looking into the build problems.\n. No. By default, no one can edit any post. By adding methods on your user\nclass, you can enable some users to edit some posts. But you can't easily\nmake that decision for individual posts, only for forums.\nIt's a good setup for admin and moderator policies, just not for what we\nhave in mind.\nOn Tue, Sep 1, 2015, 12:04 AM sintro notifications@github.com wrote:\n\nStrange default policy... Really, every user can edit and delete every\npost in forem?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/radar/forem/issues/678#issuecomment-136587598.\n. Thanks, @sintro, I hadn't noticed that. So my desired policy is actually the default, once I enable post editing. I'll close this issue; if someone else wants more flexible permissions, they can do it.\n. respond_to doesn't seem to address the problem I was trying to solve. The problem is that I'm using a custom MIME type (application/vnd.forem+json), as recommended in any number of blog posts, but because of that, Rails looks for a view named show.application/vnd.forem+json.jbuilder. I just wanted to call it show.json.jbuilder.\n\nI tried Mime::Type.register 'application/vnd.forem+json', :json, which works, but I get a warning about initializing Mime::JSON twice. There doesn't seem to be a way to say \"Just treat this MIME type as JSON, too.\" (register_alias doesn't do it.)\nIt looks like a solution is to register the MIME type as :forem and then rename the views to show.forem.jbuilder. But it seems like there should be a way to use .json.\n. ",
    "focused": "I have the same issue.\nHeroku requires this setting in config/application.rb:\nruby\nconfig.assets.initialize_on_precompile = false\nWith this setting this file will not be compiled. To solve this problem you can try different compilation options like runtime compiling (I did not try), other is to patch this file. Any help is highly appreciated.\n. Yes, default Rails application with Forem fails to precompile the asset app/assets/javascripts/forem.js.erb with this setting set to false. Any suggestions?\n. Yes, it is.\n. You can just override and hardcode this, thats how we solve this for Heroku then.\n. ",
    "oeoeaio": "I resolved this issue by using the experimental user-env-compile feature of Heroku Labs.\nSee here for usage instructions:\nhttps://devcenter.heroku.com/articles/labs-user-env-compile\nIt is also possible to run bundle exec rake assets:precompile locally, commit public/assets/ and push to Heroku, but I find this annoying.\nNeither of these options require config.assets.initialize_on_precompile = false\n. ",
    "willcosgrove": "I had a similar problem but none of the above solutions worked for me.  It ended up being because I set a different engine name with the mount 'as' option.  Which was making this line: https://github.com/radar/forem/blob/master/app/assets/javascripts/forem.js.erb#L4 fetch something that didn't exist.\nJust something to be aware of.  If you run into this problem, remove the 'as' option on the mount call in the routes file.\n. You might, but I'm the same guy that the forem:install failed for, so I didn't get any messages :(\n. I'm in the same boat, having the same problem.  User model with Devise, running on Postgres.  Exact same error.\n. It looks like it's happening in the Forem::Engine.load_seed call.  Nothing is sticking out to me as blatantly wrong in the seeds.rb file.  After I got this error, I was able to just fire up a rails console and run Forem::Engine.load_seed just fine.  So my naive guess would be to say that maybe something wasn't completely loaded, like maybe from the forem initializer.  But I may be way off.\nI'll try taking another look tomorrow when I'm less tired.\n. ",
    "llexa313": "I don't use :as, but user-env-compile and initialize_on_precompile = true didn't help for me:\nPreparing app for Rails asset pipeline\nRunning: rake assets:precompile\nrake aborted!\ncould not connect to server: Connection refused\nIs the server running on host \"127.0.0.1\" and accepting\nTCP/IP connections on port 5432?\nI wrote little monkey patch in application.rb and it work for me.\nconfig.assets.initialize_on_precompile = false\n...\nroutes.named_routes[:forem] ||= Journey::Route.new(nil, nil, Journey::Path::Pattern.new(\"\\forums\"), {})\nMaybe it will help someone else\n. ",
    "pwalker": "I can't get my assets to precompile anywhere, local or heroku, with or without user-env-compile, and with initialize_on_precompile set to both true and false. I'm still erroring out at the mentioned line, any ideas or how to debug this?  There are a lot of partial solutions here, and wiki page was rather short on the subject.\n. @radar I followed funkdified's suggestion about the migrations, and it solved this issue for me.  When I ran rake forem:install:migrations it gave me these 3 files:\n20130424162426_add_forem_auto_subscribe.forem.rb\n20130424162427_add_friendly_id_slugs.forem.rb\n20130424162428_rename_title_to_name_on_forem_forums.forem.rb\nbut this would error out (I think the auto_subscribe migration had already succeeded, and is not a part of the problem):\n```\n==  AddFriendlyIdSlugs: migrating =============================================\n-- add_column(:forem_forums, :slug, :string)\n   -> 0.0974s\n-- add_index(:forem_forums, :slug, {:unique=>true})\n   -> 0.2143s\nrake aborted!\nAn error has occurred, this and all later migrations canceled:\nundefined method name' for #<Forem::Forum:0x00000005932f10>/app/vendor/bundle/ruby/1.9.1/gems/activemodel-3.2.13/lib/active_model/attribute_methods.rb:407:inmethod_missing'\n```\nI changed the timestamp in the rename_title migration to end in a 5, thus placing it before the others, and then my rake db:migrate succeeded.\nPerhaps when I upgraded forem, I upgraded too many versions at once? thus the rake forem:install:migrations task inserted too many migrations and in the wrong order?  I think that the add_friendly_id migration needs to happen after the rename_title.\nHope this helps reproduce the bug.\n. ",
    "ac360": "Just getting started with Forem and I am running into this same issue.  I've tried all of the solutions above, but this gem will not allow me to deploy to Heroku.  How else has everyone been working around this?\n. ",
    "javiercr": "This same error happens when installing forem with Spree (using the Spree::User class). Any workaround?\n. The wiki page for \"Integration with Refinery::CMS\" gives a workaround:\n\nIf you get an error under Creating default forum and topic, it means #325 hasn't been fixed yet. You'll need to manually add this to config/routes.rb, before Refinery::Core::Engine:\nmount Forem::Engine, :at => \"/forums\"\n. \n",
    "cwise": "That page in the wiki is blank.\n. I found the solution just now and am past it. Thanks though! Really looking forward to having them live in harmony.\n. ",
    "indieambassador": "I think it might be better to overwrite to_s in the user model with something that will output what you want..\n```\nin your user model...\n  def to_s\n     \"#{fullname}\"\n   end\n\n```\n. ",
    "kot-begemot": "No... i tried both \"::Admin\" and \"Object::Admin\".\nPoint why it was not working:\nInternally, user_class constantizd string, so it returned Admin constant in all cases \"Admin\", \"::Admin\" and \"Object::Admin\". After that it used to call to_s method on constant, so it was \"Admin\" in any case. \nSince Admin module is defined inside Forem module, it was be the first match....\n. But that will not solve the problem still.\nHere is why:\nObject.const_get(Forem.user_class)\n # => Admin(...)\nAdmin is correct constant - true, but, later (in case Forem::Topic class)\nmodule Forem\n  class Topic < ActiveRecord::Base\n    ...\n    belongs_to :user, :class_name => Forem.user_class.to_s\n    ...\n  end\nend\nSo what will happen again, is the same thing,\nAdmin.to_s => \"Admin\"\nAnd since the code is inside Forem module, and Admin module exsist in it as well, it will be the first option to pick up.\nSo, belongs to will pick up Forem::Admin, instead ::Admin....\n. I also do not like this way, it look hackish to me.\n. Note sure what you mean?\n. There is still problem presented there while generation task is executed. Here are more details:\n```\n~/projects$ rails g forem:install\nThe method 'YAML.enable_arbitrary_object_deserialization!' is deprecated and will be removed in the next release of SafeYAML -- set the SafeYAML::OPTIONS[:default_mode] to either :safe or :unsafe.\nCopying over Forem migrations...\nThe method 'YAML.enable_arbitrary_object_deserialization!' is deprecated and will be removed in the next release of SafeYAML -- set the SafeYAML::OPTIONS[:default_mode] to either :safe or :unsafe.\nWhat is your user class called? [User] Admin\nWhat is the current_user helper called in your app? [current_user] current_admin\nDefining forem_user method inside ApplicationController...\n      insert  app/controllers/application_controller.rb\nSkipping config/initializers/forem.rb creation, as file already exists!\nRunning rake db:migrate\nThe method 'YAML.enable_arbitrary_object_deserialization!' is deprecated and will be removed in the next release of SafeYAML -- set the SafeYAML::OPTIONS[:default_mode] to either :safe or :unsafe.\nCreating default forum and topic\n/home/.../gems/forem/app/models/forem/topic.rb:143\npost.user = user\n(rdb:1) list\n[138, 147] in /home/.../gems/forem/app/models/forem/topic.rb\n   138\n   139      protected\n   140      def set_first_post_user\n   141        post = posts.first\n   142        require \"ruby-debug\"; debugger \n=> 143        post.user = user\n   144      end\n   145\n   146      def skip_pending_review\n   147        if user.try(:forem_needs_moderation?)\n(rdb:1) p user\n\n(rdb:1) c\n/home/.../gems/forem/app/models/forem/topic.rb:143\npost.user = user\n(rdb:1) p user\nNoMethodError Exception: undefined method scoped' for Forem::Admin:Module\n(rdb:1) c\n/home/.../gems/activerecord-3.2.12/lib/active_record/associations/association.rb:123:intarget_scope': undefined method scoped' for Forem::Admin:Module (NoMethodError)\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/associations/association.rb:87:inscoped'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/associations/singular_association.rb:42:in find_target'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/associations/association.rb:145:inload_target'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/associations/association.rb:55:in reload'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/associations/singular_association.rb:9:inreader'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/associations/builder/association.rb:44:in block in define_readers'\n    from /home/.../gems/forem/app/models/forem/topic.rb:143:inset_first_post_user'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/callbacks.rb:451:in _run__746503847__save__590235719__callbacks'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in__run_callback'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in _run_save_callbacks'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:inrun_callbacks'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/callbacks.rb:264:in create_or_update'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/persistence.rb:84:insave'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/validations.rb:50:in save'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/attribute_methods/dirty.rb:22:insave'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/transactions.rb:259:in block (2 levels) in save'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/transactions.rb:313:inblock in with_transaction_returning_status'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in transaction'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/transactions.rb:208:intransaction'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/transactions.rb:311:in with_transaction_returning_status'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/transactions.rb:259:inblock in save'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/transactions.rb:270:in rollback_active_record_state!'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/transactions.rb:258:insave'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/persistence.rb:181:in update_attribute'\n    from /home/.../gems/forem/app/models/forem/post.rb:112:inset_topic_last_post_at'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/callbacks.rb:409:in _run__751752568__create__590235719__callbacks'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in__run_callback'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in _run_create_callbacks'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:inrun_callbacks'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/callbacks.rb:268:in create'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/persistence.rb:348:increate_or_update'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/callbacks.rb:264:in block in create_or_update'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/callbacks.rb:447:in_run__751752568__save__590235719__callbacks'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in __run_callback'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in_run_save_callbacks'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in run_callbacks'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/callbacks.rb:264:increate_or_update'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/persistence.rb:84:in save'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/validations.rb:50:insave'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/attribute_methods/dirty.rb:22:in save'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/transactions.rb:259:inblock (2 levels) in save'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/transactions.rb:313:in block in with_transaction_returning_status'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/database_statements.rb:192:intransaction'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/transactions.rb:208:in transaction'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/transactions.rb:311:inwith_transaction_returning_status'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/transactions.rb:259:in block in save'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/transactions.rb:270:inrollback_active_record_state!'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/transactions.rb:258:in save'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/associations/has_many_association.rb:16:ininsert_record'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/autosave_association.rb:346:in block in save_collection_association'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/autosave_association.rb:337:ineach'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/autosave_association.rb:337:in save_collection_association'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/autosave_association.rb:191:inblock in add_autosave_association_callbacks'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/autosave_association.rb:161:in instance_eval'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/autosave_association.rb:161:inblock in define_non_cyclic_method'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/callbacks.rb:413:in _run__746503847__create__590235719__callbacks'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in__run_callback'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in _run_create_callbacks'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:inrun_callbacks'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/callbacks.rb:268:in create'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/persistence.rb:348:increate_or_update'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/callbacks.rb:264:in block in create_or_update'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/callbacks.rb:458:in_run__746503847__save__590235719__callbacks'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in __run_callback'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in_run_save_callbacks'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in run_callbacks'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/callbacks.rb:264:increate_or_update'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/persistence.rb:104:in save!'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/validations.rb:56:insave!'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/attribute_methods/dirty.rb:33:in save!'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/transactions.rb:264:inblock in save!'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/transactions.rb:313:in block in with_transaction_returning_status'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/database_statements.rb:192:intransaction'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/transactions.rb:208:in transaction'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/transactions.rb:311:inwith_transaction_returning_status'\n    from /home/.../gems/activerecord-3.2.12/lib/active_record/transactions.rb:264:in save!'\n    from /home/.../gems/forem/db/seeds.rb:18:in'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/dependencies.rb:245:in load'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/dependencies.rb:245:inblock in load'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/dependencies.rb:236:in load_dependency'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/dependencies.rb:245:inload'\n    from /home/.../gems/railties-3.2.12/lib/rails/engine.rb:520:in load_seed'\n    from /home/.../gems/railties-3.2.12/lib/rails/railtie/configurable.rb:30:inmethod_missing'\n    from /home/.../gems/forem/lib/generators/forem/install_generator.rb:67:in seed_database'\n    from /home/.../gems/thor-0.17.0/lib/thor/task.rb:27:inrun'\n    from /home/.../gems/thor-0.17.0/lib/thor/invocation.rb:120:in invoke_task'\n    from /home/.../gems/thor-0.17.0/lib/thor/invocation.rb:126:inblock in invoke_all'\n    from /home/.../gems/thor-0.17.0/lib/thor/invocation.rb:126:in each'\n    from /home/.../gems/thor-0.17.0/lib/thor/invocation.rb:126:inmap'\n    from /home/.../gems/thor-0.17.0/lib/thor/invocation.rb:126:in invoke_all'\n    from /home/.../gems/thor-0.17.0/lib/thor/group.rb:238:indispatch'\n    from /home/.../gems/thor-0.17.0/lib/thor/base.rb:434:in start'\n    from /home/.../gems/railties-3.2.12/lib/rails/generators.rb:171:ininvoke'\n    from /home/.../gems/railties-3.2.12/lib/rails/commands/generate.rb:12:in <top (required)>'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/dependencies.rb:251:inrequire'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/dependencies.rb:251:in block in require'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/dependencies.rb:236:inload_dependency'\n    from /home/.../gems/activesupport-3.2.12/lib/active_support/dependencies.rb:251:in require'\n    from /home/.../gems/railties-3.2.12/lib/rails/commands.rb:29:in'\n    from script/rails:6:in require'\n    from script/rails:6:in'\n```\n. ",
    "RamakrishnanK": "I have also same problem please tell how to rectify\n. ",
    "andypike": "Yeah I checked that out and I can see the images in the gem. But they are not being served up for some reason. I've probably done something odd as I expect this should just work.\n. Err, not sure that fixes it. I haven't pulled in the code but just changed the url to match your change and it still fails. BTW, aren't you using the gemoji-1.1.3 gem rather than emojify? Sorry to be a pain. In the gemoji gem the files are here\n. Does this recent commit explain it? https://github.com/github/gemoji/commit/91a5a025ca3ae519f946a68638de66e8f1933dc1\n. Thx :smile: \n. ",
    "Kardans": "Same here! \n. So what should I put instead of \"Refinery::User\" now? \n. ",
    "sfcgeorge": "Sadly exactly the same error either way. I created the Refinery app fresh rather than adding to an existing Rails app if that helps. I also tried deleting the app and starting fresh but no change. Using the latest versions of every gem, tried refinery 2.0.8 and 2.0.9 with the same results. I've also tried \"User\", \"::User\", \"::Refinery::User\" with varying errors. Also tried with and without the line added to the gemfile with no change.\n. If it helps your debugging I've also pushed the app to Github:  https://github.com/sfcgeorge/QLAQ\nAny help welcome\n. Thank you very much, everything working as expected now. Perfect :smile: \n. Do a bundle update then it should work fine. It is still \"Refinery::User\" for class and current_refinery_user for current_user method.\n. It's only a tiny change, but I checked and tests are still passing. I haven't written a new test for this change as I'm not sure if it's needed.\n. Travis CI emailed me to say I broke it. I'm not sure how one line of code broke it but apparently I managed it. I can't find where the error is in Travis, something on \"DB=postgres  Ruby=1.8.7\". Noob apology?\n. /assets/emoji/wink.png  which looks reasonable to me, but I just get the standard Rails 404 page.\nI also tried  /assets/emojis/wink.png  as I saw the plural version mentioned somewhere, but no luck.\n(the url does include the site's domain name properly, I just removed it here for succinctness)\n. Sorry for the delay, I was just doing a bundle update and pushing to GitHub. Sample app is Forem + Refinery based.  https://github.com/sfcgeorge/QLAQ\n. Ah sorry, it did look a bit messy. I'm slowly getting the hang of git, liberal rebase and --force seem to have got it under control, hopefully this is now mergeable?\n. Rebased for cleaner commit history.\nThe tone of the Gemoji project seems quite closed off, as suggested by disabled issues and a code comment saying pull requests to do with this change would be ignored without comment. The Readme also doesn't make it entirely clear the direction they are trying to go in. I did look for alternative Emoji libraries but couldn't find anything as active, otherwise changing library might be an appealing option. As an aside, most of the Emoji are screenshots of Apple's Emoji font - thus copyright Apple - do we know if it is legal to do that? I doubt Apple has given away its Emoji font with an OS license, though I'm no lawyer.\n. Phantom Open Emoji got funded , so soon we will have an open source legal alternative to Gemoji that we can use. The way we use it is still up for debate, but it's the way forward.\n. If all you want to do is style the first post differently, you can do it in pure css:\n```\nposts > div:first-of-type {\nbackground: red;\n}\n```\nThis wont work in IE8 but will in most other browsers. I think this is acceptable as a progressive enhancement. \n. Doh! You are right, but I've found an even easier way, can't believe I missed this before:\n```\npost_1 {\nbackground: red;\n\n}\n```\nHopefully this will work for you :smile: \n. Sorry, I should have tested. Right, I have tested the below CSS and it does work - only the first post on the first page is highlighted. There is an <a> tag before every post <div> with a unique name attribute corresponding to the post ID - which is how the browser scrolls to a specific post. The CSS below selects the <div class=\"post\"> after the <a name=\"post-1\"> in order to style it. These are CSS 2.1 selectors so should work in almost all browsers. \n```\nposts a[name=post-1] + div.post {\nbackground: red;\n}\n```\n. Drat, yes that makes sense. As a single table with all of the posts then the ID's must be continuous. In my local dev environment I happened to be testing this CSS in the first thread posted so it happened to work. Looks like your solution of using a helper is the only way then. Oh well, I had fun trying those CSS selectors I've almost never used before - it's remarkably powerful, though in this case you have shown the extra metadata is needed.\n. Correct. I kept thinking about the best way to make Gemoji work, and the problems with it, then thought, do we really want emoji? Now maybe the answer is yes (they are kinda cool), in which case ignore this pull request ;)\nTo me the massive size of the Gemoji gem is overkill, and nobody will remember all the codes. Which brings me to another problem, I talked to members of my forum and they didn't like having to use those codes like :stuck_out_tongue:, they'd rather just type :P like they do on Skype or other forums. \nThe new emoticon_fontify gem might be a little lacking, but the font it is based on accepts pull requests so it could be expanded. Alternatively the gem could switch to a fuller emoticon font if one was found and suggestd, perhaps even having a config option for which emoticon set to use. But for now, I think it's not a bad start.\nThe thing that concerns me the most is the legality of using Apple's emoji glyphs. See, the Unicode standard has been updated to include code points for emoji, just like there are code points for letter, numbers, etc. So, just like you might type the letter a (U+0061), or an interrobang \u203d (U+203D) it is perfectly fine to type an emoji like FACE WITHOUT MOUTH (U+1F636). However, when we type out a foobar.rb document and upload it to GitHub, we are not also including and uploading the Courier font, or Times, or Comic Sans, we are simply uploading a file full of unicode codes. But the Gemoji gem isn't just a list of all the unicode emoji codes that it converts the typed emoji names into. The gem converts the typed emoji names into png images, and those images aren't anything to do with the unicode standard, they are ripped right from Apple's emoji font (it might not be initially obvious that emoji are displayed from a font, but they are, and the font is called \"Apple Color Emoji\"). In effect, the Gemoji maintainers have converted Apple's emoji font to a bunch of .pngs and redistributed it. If you did that with Helvetica you'd get a strongly worded letter from Linotype's lawyers. As far as I'm aware the Apple Color Emoji font is not freely available, nor is it licenced out, it's property of Apple and to be distributed solely with Apple hardware. GitHub should really be more clued up on licensing. Perhaps GitHub did get a licence from Apple to use their font, but we can't ask them as they have issues turned off. I think a final nail in the coffin is that Windows 8 has emoji, however they don't use the Apple Color Emoji font, instead they use Microsoft's own font that is black and white (like a regular font) and quite different to Apples. If Microsoft can't steal Apple's font, I'm not comfortable with Gemoji doing so. Sorry for the long rant ;)\nSo to sum up, this gem is smaller, simpler, better fits user expectations, and uses only properly licensed open source materials.\n. @Kagetsuki Yes I agree emoji are commonly used in Japan and Apple created their own implementation, as have other handset manufacturers, OS vendors, and carriers. We are totally free to use the concept of emoji as defined by Unicode, just not Apple's implementation, or Microsoft's, or anyone else's that doesn't have an open source compatible licence. You're absolutely right, it would be more constructive to provide better licensed replacements, feel free to create the 800 or so images and submit a pull request. I spent a lot of time searching and couldn't find a comprehensive and suitably licensed alternative. I like emoji myself, I'm not against them or anything, I just think there are some big problems with the current Gemoji method of including them that need addressing.\nI quite like your suggestion of making this feature optional, or abstracting it. That might be the perfect solution so people are free to use whatever emoticon/emoji set they like best, just as IM apps like Adium offer several different emoticon packs. Forem already allows the use of an external text formatter such as one of the great Markdown ones, I wonder if this idea could be extended. Perhaps there could be a new text formatter that adds emoji and wraps whichever other text formatter someone wants to use. At this point I wonder if @radar has any thoughts and wants to weigh in as I'm not seeing a perfect solution.\n. It's not a traditional emoji font set, it's Apple's emjoi font. I'd ask GitHub directly how they get away with it but they have issues off so can't. I'd guess they don't understand who owns those emoji glyphs (perhaps they mistakenly think the actual graphics are included in the unicode spec). Or maybe they looked somewhere I didn't and found that Apple Color Emoji is free to use by all (I doubt that, Apple open sources some core code components, not design and features that help to sell products). Most likely they simply haven't thought about it, or think ripping images from a font is ok and somehow different from ripping a movie from a DVD and redistributing it. It could have been a GitHub employee's pet project (I believe they are encouraged to experiment for a few hours a week) that their boss thought looked cool so it got pushed throughout the site without being a properly looked at. \nI'd really like to be proven wrong, if someone could find a CC licence for the glyphs from Apple then great (or any other suitable explanation). There's a good chance I am wrong, I have no legal experience and limited background experience in open source. But unless anyone can prove I am wrong, then I don't think using and redistributing commercial graphics is a good idea \u2014 I'm sure Apple's lawyers wouldn't see ignorance as an excuse.\n. @Kagetsuki Awesome, thank you for finding this. Looking in the Font Book / Show Font Info panel reveals the font is embeddable. Screenshot here: http://cl.ly/M9ne\nNow, I'm not 100% sure what embeddable means.I assume it means, say you make a poster and save it as a PDF with the fonts embedded so that the print company doesn't have to have those fonts. This kind of embedding seems quite different to redistributing. \nAn open source emoji font/glyph set is a very interesting idea. Unicode defines all the emojis and both Apple and Microsoft have produced implementations so the framework and inspiration is there already. Doing it via Kickstarter seems sensible since creating hundreds of emoji glyphs for free in spare time seems unreasonable / it would take many spare evenings. I'd be interested to see if you explore this idea further, good luck!\n. A fried suggested something to me that seems so obvious now. Clearly Apples emoji are not free for the picking, however Android is open source and has emoji! So after quite a bit of digging I found the AndroidEmoji.ttf with licence \"Licensed under the Apache License, Version 2.0\". It is not a color font like Apples but a traditional vector font. On the plus side this means it is small enough to be included entirely on a web page, though it's not as pretty.\nWith this font, one option would be to embed the font in the page as a webont. Then, a gem on Forem's side would convert the :lengthy_emoji_name: into the actual UTF8 character code. Here's the genius part: If a user already has emoji built into their device, they can use their emoji keyboard directly to type the emoji without having to remember :ridiculously_long_codes:. Moreover, if a user has an Apple device, when they view a forem post with the UTF8 emoji codes in they will be displayed in the native Apple font - this is legal as it is simply using the font right on the device as intended. A Windows 8 user will see the emojis rendered in the Win8 emoji font, etc. Then, if a user doesn't have an emoji font built into their OS (maybe they're using BeOS or something) then the CSS will cascade and fall back to the included Android font. So:\n- Users with an emoji keyboard can type emojis directly, as they are used to\n- Users without an emoji keyboard can type an :emoji_code:\n- Users with an emoji font built into their OS will see emoji rendered in that\n- Users without an emoji font built into their OS will see emoji rendered in the AndroidEmoji.ttf\nWhat do you guys think of this idea? If I was to make a gem to do this do you think that would be an acceptable solution?\n@Kagetsuki you could still go ahead with the Kickstarter if you specifically want color emojis - I think this could be a good thing. It's rare for really good design to be open source so it could be interesting.\n. @knewter Thanks for the thumbs up. I can use the codes from gemoji as a basis and some of the work from emoticon_fontify too. Hopefully I'll have time to start work on it soon. So initially the gem would include AndroidEmoji.ttf as the fallback but it could be updated in the future to include any new emoji font created.\n. @Kagetsuki I think the best thing you could do is create plain image glyphs, so 800 replacement .pngs. These should be large-ish so they can be used for a variety of uses, maybe 128px ish? Those images can then be used in any way later; bundled into a font, or included gemoji style. I wouldn't worry about the implementation for your kickstarter as that can come later provided flexible enough source files. I'm not sure if other OSes even support full color bitmap fonts actually or if it's just Apple OSes, that could be an issue. Also since 800 is a lot, you could start with the 'core' faces, then build up. \nI'm not sure how much use I'd be teaming up with you on a kickstarter, you'd probably want just 1 designer for consistency, and I have personal projects, client work and uni work keeping me busy. But feel free to email me if you want and I'll see how I can help out. Address: simon @ (github username) .co.uk\n. Thanks for your hard work, it's looking great so far. I of course backed, hopefully enough others do that this can become the best set for integration into open source forums, blogs, comment systems, etc.\n. Ah yes of course. Is there a Rails helper to return the public images path? I searched without much luck, images_path was suggested years ago but that now returns /assets.\n. ",
    "JasonTolliver": "I had this same issue.  I wasn't able, like @willcosgrove, to simply call Forem::Engine.load_seed from the console. After a bit of investigation, I realized that [gem-location]/lib/forem/user_class_extensions.rb hadn't been properly loaded.  Once I loaded that path, user.forem_needs_moderation? ran just fine.\nIn any case, not sure if this is the fix for the gem itself, but I hope it'll point you in the right direction.  I'm just going to manually run the install generator code piece by piece from here.\n. ",
    "jayshepherd": "Just ran into this myself, running twice as per #360 also worked for me.\n. ",
    "bvsatyaram": "Yes, makes sense. I was trying to optimize too much :P\nSo, shall I submit a patch for this?\n. @sfcgeorge Thanks for the suggestion. I considered that. However, that would style first post in every page differently. So, I wanted to touch the backend.\n. The problem still is the same. The first post in page 2 also has #post_1.\nThe only way is to mark the first post of a topic with a special class/id. For that I just wrote a helper to check if the post is the first post of the topic.\n. @sfcgeorge I truly appreciate your effort. The anchor tag has name attribute \"post-x\" where x is the 'id' of the post in db. And the div has id \"post_y\" where y is the position of the post in the page from the top.\nWhile y is 1 for first page even in second page of a topic, x can be 1 for only one post in the db of all the posts. So, the CSS you provided does work in most of the browsers, but only if the id of the post is 1 in db.\nTry creating another topic if it doesn't exist yet; x in that page won't be 1.\n. Yeah, true. I appreciate it! :-)\n. ",
    "stanl3y": "Thank you.\n. I did now. Thank you.\n. ",
    "plainspace": "thanks!\n. hmmm... i thought this was working but no dice.  anyone else?\n. I updated forem with the line of code you committed to app/views/forem/forums/_forum.html.erb.\nGIT\n  remote: git://github.com/Miniand/forem-gfm_formatter.git\n  revision: 07efc0382784c762c995fe17dea41f94ececdd38\n  specs:\n    forem-gfm_formatter (1.0.0)\n      forem\n      redcarpet (~> 2.0.1)\nGIT\n  remote: git://github.com/radar/forem.git\n  revision: 79ac5972a915b5de24ed382b0cf2d4740e64f186\n  specs:\n    forem (1.0.0.beta1)\n      cancan (= 1.6.7)\n      forem-redcarpet (= 1.0.0)\n      friendly_id (~> 4.0)\n      gemoji (~> 1.1.1)\n      rails (~> 3.1)\n      simple_form\n      workflow (= 0.8.0)\nforem-redcarpet (1.0.0)\n      pygments.rb (= 0.2.4)\n      redcarpet (= 2.0.1)\nredcarpet (2.0.1)\nredcarpet\n. ok... updated forem. working now. thanks!  this is working in the the main forums view (forem/_forum.html.erb) but not in the forem/forums/show.html.erb\n. Thanks mates!\n. ",
    "vjt": "Great - thanks :smile: \n. ",
    "glsignal": "Come across this one myself. At a quick glance it's the Forem base path echoed into forem.js.erb omitting a leading slash, making it a relative path rather than an absolute one (correct me if I'm wrong - I did notice that it is deliberately stripped).\nAdding the slash back in does fix this particular issue, but I'll leave it up to the contributors to decide on the best solution.\n. Awesome, thanks.\nThis probably doesn't need to stay open anymore then, if it's being more actively discussed elsewhere.\n. ",
    "aghull": "Same. Using the default formatter it mis-handles replies. Adding the gem 'forem-gfm_formatter' makes it act like the demo site.\n. ",
    "shivanibhanwal": "We have run into this same issue. Its right if we use the 'forem-gfm_formatter'gems then we do not run into this issue.\nHowever by default it always has same issue. Looks like missing piece here is the redcarpet gem and conversion of the block_quote's as per the redcarpet.\nWhereas as per the forem documentaion redcarpet is the default formatter so \nideally it should convert the blockquote but it is not happening.\n. @radar Yes I am using the latest forem.\n. ",
    "notontilt09": "restarting rails server did the trick.  Thanks!\n. ",
    "Kagetsuki": "@sfcgeorge You realize those glyphs that Apple implemented were just to replicate commonly used emoji from Japan. If you have a problem with using those glyphs I think it would be more constructive to provide better licensed replacements. Personally I want emoji so a patch like this is not something I would want. Of course if others would not want emoji making it optional (like detecting if gemoji is in the bundle and using it if it is, otherwise not using it) or making it so you can specify your emoji/emoticon engine would probably be better.\n. Wait are you claiming the implementation was taken from Apple or just some of the images were used? If it's the implementation I'm not sure how to think of the whole situation, particularly since Apple just replicated the common emoji system found between carriers like DoCoMo and AU.\nI absolutely agree with you on it being a bit scary using Apple copyrighted stuff. There could be a solution like running an kickstarter to create a free or CC set (I've got a good artist who would jump on the opportunity to create 800+ good looking emoji). I do sort of wonder if someone hasn't already though.\nMaking it optional would be the quickest fix, then after that add something in so you could choose a different engine or maybe even setting up a pipeline of multiple engines could be possible. Let's get some feedback from @radar before we debate any further.\n. It was rather hard to find but, from the OSX license:\n\nF. Fonts. Subject to the terms and conditions of this License, you may use the fonts included with the Apple Software to display and print content\nwhile running the Apple Software; however, you may only embed fonts in content if that is permitted by the embedding restrictions\naccompanying the font in question. These embedding restrictions can be found in the Font Book/Preview/Show Font Info panel.\n\nSo my guess is we're all breaking the law but Apple is either passively ignoring [likely?] it or they don't realize it [unlikely?].  I'm discussing putting up a kickstarter to create an Open Source friendly (I'm thinking CC licensed) replacement set with the Genshin artists net.kamui and se.noize.\n. @parndt Good idea asking the authors. Why didn't we think of that :frowning:\n. @sfcgeorge Embeddable means you can use the font in a PDF or other data file that is being distributed AS LONG AS that data is being authored on a machine that has a proper license to the font (iOS/OSX) and you are absolutely correct - gemoji is redistributing not embedding.\nI'm talking net.kamui into the idea right now. He's the lead artist on our currently failing kickstarter here: http://www.kickstarter.com/projects/374397522/scroll-ninja-revised?ref=home_location We'll be re-launching but before that he'll have some down time while the lead dev catches up. This could be the perfect time-filler, and sticker sheets/cheat sheets on other goods with the newly created emoji could be nice rewards.\n. Since we're not getting any response here me and Tohyama have decided to progress with the kickstarter idea anyway. We'll be putting up a campaign for a free set of emoji that includes all the standard and extended currently being provided by Apple and hopefully a few more. If anyone has suggestions for licenses they'd want etc. I'd love to hear them and why. In the end we'll probably do something like http://fortawesome.github.com/Font-Awesome/ and we'll provide an initial set with a forked-and-modified gemoji.\n. @parndt I think we'll use the same license set as FontAwesome, SIL for the font we generate, MIT for code and CC for the images themselves. That way anyone can use it anyway any time and not need to worry about doing anything in particular.\n. @parndt yup, no attribution required. I mean credit would be nice but that kind of defeats the point. http://fortawesome.github.com/Font-Awesome/#license has a description of the combo and links.\n. We'll be putting up the kickstarter soon. I'll contact everyone once it's up - getting the word out will be much appreciated. We even made some initial samples and we'll at least release those for free regardless of success of the campaign. \n. @sfcgeorge we've started working on modifying gemoji and created some samples for the project. We'd have the kickstarter up by now but I've been swamped. Tohyama made some excellent samples for most of the faces, much nicer than the Apple ones if you ask me. How about we team up, convert gemoji to the Android set and add in the face samples, then we'll throw up the kickstarter to complete the set in full color vectors etc. That way we'll have a valid license right away so we don't need to worry about Apple and we'll have a future path with a full color rich set. What do you say?\n. @sfcgeorge Re-reading your comment I really like your idea better than just overriding the defaults in gemoji. How about we team up on the kickstarter so we can get you paid for your work too? If you're interested let's lay out a plan.\n. @scfgeorge It's actually going to be easier working out of gemoji than not - this way we'll have a full implementation right away and we can drop in new images when we make them. I also want to be able to build a font file from a rake command so in the future if there are updates we can just build the font or other developers can do it themselves. The sample set we created we've output to PNG of the same size as gemoji but the raws are all vector so we may distribute a set of SVG as well.\nAs for the actual image/glyph creation I'd like Tohyama to be doing that. I just really like your gem idea and think that would be a very nice implementation to serve the created assets on. Also I'm constantly bogged down with work and a little understudied on how these fonts work whereas you seem to have done your homework and are rearing to go - so it seems to me having you do the coding [to an advanced implementation] would be better for everyone. We'll continue with the current plan for now but perhaps funding your efforts would be good to put down as a reach goal? I'll e-mail you in a little bit with the kickstarter preview project and an archive of the samples Tohyama has produced so far.\n. Just an update everyone, we've finally got the kickstarter campaign up http://www.kickstarter.com/projects/374397522/phantom-open-emoji . Please pass it around, Tohyama will start making images as soon as the initial goal is hit.\nI'll have a repo up with the assets and some scripts as soon as we see some interest from the kickstarter project.\n. ",
    "ipvideomarketinfo": "Thanks!\n. Thanks Josh!\nCan you explain what you mean by 'first post linked to that article'? Also, did you have any issues with the referenced URLs in the email notification?\n. We are going to try this. Ryan, do you have any suggestions or see any concerns of using Forem for commenting on articles?\n. Thanks!\n. Thanks!\n. ",
    "phlipper": "@radar I got a little sucked in and made some more updates. I've annotated the more \"interesting\" changes. \nI'm not sure why this is failing some, but not all, Travis builds at the moment. All 3 environments are passing on my machine. I need break for now but I will continue to investigate later.\n. Ok, it looks like the last few failures with the segfaults were due to an issue with the Travis workers and have since been resolved. \nThe tests now run clean on MRI 1.8/1.9 and JRuby 1.8/1.9.\nThoughts?\n. Hi guys, \nI apologize for not getting back to this sooner, I've been wrapped up with a few things. @parndt / @radar, the changes that you indicate are too noisy are there to ensure the current test suite passes as-is. I didn't change any of the existing Forem tests, figuring that would be important. What you are asking requires tests to be removed from Forem, and ideally added to @radar's formatting gem (forem-kramdown already has test coverage). \nTo confirm, are you asking me to remove the formatting tests from Forem so we can drop the \"native platform knowledge\" from Forem? Let me know and I will clean this up. Thanks. \n. @parndt I have rebased and squashed some commits. Let me know how this works for you.\n. @parndt I have updated the 1.8-style hash rockets. Slip of habit.\n. @parndt I will look in to why some of the test runs pass on Travis and some do not.\n. These changes are for Ruby 1.8 / Capybara 2.0 issues with .should_not matchers. I haven't tracked down the cause yet, but capybara just recently made the move to require 1.9+, and these specs were passing on MRI 1.9.3 and JRuby, so I expect we can change these back once Forem requires 1.9+ as well.\n. These are due to a difference between MRI returning \"\" and JRuby returning nil. I'm not sure why, but the spirit of the test remains the same.\n. These updates are due to a behavioral change in Capybara 2.0:\n\nAmbiguous Matches\nThe find method, as well as most actions like click_on, fill_in, etc., now raise an error if more than one element is found. While in Capybara 1.1.2, it would simply select the first matching element, now the matches have to be unambiguous.\n. This example was moved to the controller spec.\n. This example was moved to a controller spec.\n. \n",
    "anguyen-elc": "I have been using this pull in my fork to make it run in JRuby and it's working fine. Please merge this! Thank you.\n. ",
    "ctilley83": "rails g forem:uninstall did not work\n. ok\n. ",
    "LightbulbProductions": "Hi, I am having this issue and have followed everything to try to delete this from my app. Is there anyone that has successfully taken it out? I have to reinstall other gems and this one is not allowing them...plus, I really just need it gone. \n. ",
    "apraditya": "The error is the output of rake db:migrate\n. Here you go:\n```\n(in /Users/apraditya/Projects/MyProject/myapp)\n Invoke db:migrate (first_time)\n Invoke environment (first_time)\n Execute environment\n Invoke db:load_config (first_time)\n Execute db:load_config\n Execute db:migrate\n==  AddFriendlyIdSlugs: migrating =============================================\n-- add_column(:forem_forums, :slug, :string)\n   -> 0.0201s\n-- add_index(:forem_forums, :slug, {:unique=>true})\n   -> 0.0175s\nrake aborted!\nAn error has occurred, all later migrations canceled:\nundefined method name' for #<Forem::Forum:0x007fc24262e6c8>\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activemodel-3.2.10/lib/active_model/attribute_methods.rb:407:inmethod_missing'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/attribute_methods.rb:149:in method_missing'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/friendly_id-4.0.9/lib/friendly_id/slugged.rb:253:inshould_generate_new_friendly_id?'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/friendly_id-4.0.9/lib/friendly_id/slugged.rb:273:in set_slug'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activesupport-3.2.10/lib/active_support/callbacks.rb:407:in_run__1243096130026340265__validation__2316942611818741036__callbacks'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activesupport-3.2.10/lib/active_support/callbacks.rb:405:in __run_callback'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activesupport-3.2.10/lib/active_support/callbacks.rb:385:in_run_validation_callbacks'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activesupport-3.2.10/lib/active_support/callbacks.rb:81:in run_callbacks'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activemodel-3.2.10/lib/active_model/validations/callbacks.rb:53:inrun_validations!'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activemodel-3.2.10/lib/active_model/validations.rb:195:in valid?'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/validations.rb:69:invalid?'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/validations.rb:77:in perform_validations'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/validations.rb:56:insave!'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/attribute_methods/dirty.rb:33:in save!'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/transactions.rb:264:inblock in save!'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/transactions.rb:313:in block in with_transaction_returning_status'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/connection_adapters/abstract/database_statements.rb:192:intransaction'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/transactions.rb:208:in transaction'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/transactions.rb:311:inwith_transaction_returning_status'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/transactions.rb:264:in save!'\n/Users/apraditya/Projects/MyProject/myapp/db/migrate/20130108023047_add_friendly_id_slugs.forem.rb:7:inblock in change'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/relation/batches.rb:21:in block (2 levels) in find_each'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/relation/batches.rb:21:ineach'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/relation/batches.rb:21:in block in find_each'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/relation/batches.rb:72:infind_in_batches'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/relation/batches.rb:20:in find_each'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/querying.rb:8:infind_each'\n/Users/apraditya/Projects/MyProject/myapp/db/migrate/20130108023047_add_friendly_id_slugs.forem.rb:7:in change'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/migration.rb:407:inblock (2 levels) in migrate'\n/Users/apraditya/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/benchmark.rb:280:in measure'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/migration.rb:407:inblock in migrate'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/connection_adapters/abstract/connection_pool.rb:129:in with_connection'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/migration.rb:389:inmigrate'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/migration.rb:528:in migrate'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/migration.rb:720:inblock (2 levels) in migrate'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/migration.rb:777:in call'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/migration.rb:777:inddl_transaction'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/migration.rb:719:in block in migrate'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/migration.rb:700:ineach'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/migration.rb:700:in migrate'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/migration.rb:570:inup'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/migration.rb:551:in migrate'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/activerecord-3.2.10/lib/active_record/railties/databases.rake:179:inblock (2 levels) in '\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/rake-10.0.3/lib/rake/task.rb:228:in call'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/rake-10.0.3/lib/rake/task.rb:228:inblock in execute'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/rake-10.0.3/lib/rake/task.rb:223:in each'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/rake-10.0.3/lib/rake/task.rb:223:inexecute'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/rake-10.0.3/lib/rake/task.rb:166:in block in invoke_with_call_chain'\n/Users/apraditya/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:inmon_synchronize'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/rake-10.0.3/lib/rake/task.rb:159:in invoke_with_call_chain'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/rake-10.0.3/lib/rake/task.rb:152:ininvoke'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/rake-10.0.3/lib/rake/application.rb:143:in invoke_task'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/rake-10.0.3/lib/rake/application.rb:101:inblock (2 levels) in top_level'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/rake-10.0.3/lib/rake/application.rb:101:in each'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/rake-10.0.3/lib/rake/application.rb:101:inblock in top_level'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/rake-10.0.3/lib/rake/application.rb:110:in run_with_threads'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/rake-10.0.3/lib/rake/application.rb:95:intop_level'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/rake-10.0.3/lib/rake/application.rb:73:in block in run'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/rake-10.0.3/lib/rake/application.rb:160:instandard_exception_handling'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/rake-10.0.3/lib/rake/application.rb:70:in run'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/gems/rake-10.0.3/bin/rake:33:in'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/bin/rake:19:in load'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/bin/rake:19:in'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/bin/ruby_noexec_wrapper:14:in eval'\n/Users/apraditya/.rvm/gems/ruby-1.9.3-p194@myapp1.9.3/bin/ruby_noexec_wrapper:14:in'\nTasks: TOP => db:migrate\n```\n. ",
    "acarr468": "I just had this issue as well for Rails 4, and the above solution fixed it.\n. The above fix works for me as well with rails 4.1\n. ",
    "kashiftufail": "I can't tell about  rake db:migrate --trace , Because no migration is copied when i give this command\nrails g forem:install\nSo how i can figure out error?\nIn rake db:migrate --trace just my migration of app simply will be run.\nThanks\n. Now migration copied successfully and \nrake db:migrate --trace    give me this error\n==  AddForemAdmin: migrating ==================================================\nrake aborted!\nAn error has occurred, this and all later migrations canceled:\nundefined method table_name' for nil:NilClass\n/home/kashif/rails/alisa/metnet_exp/metnet_before_forum/db/migrate/20130116022438_add_forem_admin.forem.rb:10:inuser_class'\n/home/kashif/rails/alisa/metnet_exp/metnet_before_forum/db/migrate/20130116022438_add_forem_admin.forem.rb:4:in change'\n/home/kashif/.rvm/gems/ruby-1.9.3-p327@metnet/gems/activerecord-3.2.11/lib/active_record/migration.rb:407:inblock (2 levels) in migrate'\n/home/kashif/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/benchmark.rb:280:in measure'\n/home/kashif/.rvm/gems/ruby-1.9.3-p327@metnet/gems/activerecord-3.2.11/lib/active_record/migration.rb:407:inblock in migrate'\n/home/kashif/.rvm/gems/ruby-1.9.3-p327@metnet/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:129:in `with_connection'\n. ",
    "UsmanJ": "@kashiftufail Did you manage to solve this issue? I think I am having a similar issue. I am getting the following error when I try to migrate db to heroku:\n```\n\u279c  martial_nation_forem git:(master) heroku run rake db:migrate\nRunning rake db:migrate on martialnationforum... up, run.2185\n== 20160109142235 AddForemAdmin: migrating ====================================\n-- column_exists?(:users, :forem_admin)\nrake aborted!\nStandardError: An error has occurred, this and all later migrations canceled:\nPG::UndefinedTable: ERROR:  relation \"users\" does not exist\nLINE 5:                WHERE a.attrelid = '\"users\"'::regclass\n                                          ^\n:               SELECT a.attname, format_type(a.atttypid, a.atttypmod),\n                     pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod\n                FROM pg_attribute a LEFT JOIN pg_attrdef d\n                  ON a.attrelid = d.adrelid AND a.attnum = d.adnum\n               WHERE a.attrelid = '\"users\"'::regclass\n                 AND a.attnum > 0 AND NOT a.attisdropped\n               ORDER BY a.attnum\n``\n. @Yorkshireman It is indeed rails. There is noforum_idpresent. I believe that I am missing something which comes after theforem.new_forum_topic_path`. I'm just not sure what it is that I am missing.\n. @Yorkshireman The file is 'show.html.haml' for the categories.\nI have a failing test for it. It is displaying the following error:\n```\n     Failure/Error: = link_to \"Create Topic\", forem.new_forum_topic_path, [forem, @category]\n ActionView::Template::Error:\n   No route matches {:action=>\"new\", :controller=>\"forem/topics\", :id=>\"general\"} missing required keys: [:forum_id]\n\n```\n. @Yorkshireman That is odd. \n\u279c  martial_nation_forem git:(master) \u2717 rails s\n=> Booting WEBrick\n=> Rails 4.2.4 application starting in development on http://localhost:3000\n=> Run `rails server -h` for more startup options\n=> Ctrl-C to shutdown server\n[2016-01-16 13:49:26] INFO  WEBrick 1.3.1\n[2016-01-16 13:49:26] INFO  ruby 2.2.3 (2015-08-18) [x86_64-darwin14]\n[2016-01-16 13:49:26] INFO  WEBrick::HTTPServer#start: pid=97352 port=3000\nHave you migrated the db's?\nI think I am a step closer. Now I have changed the code to:\n.category\n  %h2\n    = link_to t('forem.forum.forums'), forem.forums_path\n    \u00bb #{link_to forem_emojify(@category), [forem, @category]}\n    = link_to \"Create Topic\", forem.new_forum_topic_path(forem, @topic)\n  = render @category\nBut I'm getting the following error:\nActiveRecord::RecordNotFound:\n       ActiveRecord::RecordNotFound\nI believe the error is occuring at the end of line 5.\n. I figured it out. I was trying to create a post within a category. The category needed a forum within it first. And then I had to create a post within that forum!\nThanks for your help @Yorkshireman! \n. ",
    "djee": "I'm not comfortable to share the gemfile in plain sight.\nIs there something specific that you are searching for !?\nOn 2013-01-17, at 4:09 PM, Ryan Bigg wrote:\n\nCould you please show us your whole Gemfile? \nOn 18/01/2013, at 7:26, Jean-Fran\u00e7ois Dumas notifications@github.com wrote: \n\nAfter adding this line to my gemfile: \ngem 'forem', :git => \"git://github.com/radar/forem.git\" \nand running bundle install. I get the following bundle error: \nBundler could not find compatible versions for gem \"railties\": \nIn Gemfile: \nforem (>= 0) ruby depends on \nrailties (>= 3.2.11) ruby \nrails (= 3.1.10) ruby depends on \nrailties (3.1.10) \nI check the gemspec and couldn't see any railties dependency to Rails 3.2.x Am I missing something? \n\u2014 \nReply to this email directly or view it on GitHub. \n\u2014\nReply to this email directly or view it on GitHub.\n. Rails version is 3.1.10\n\n\nFor each dependency I'll have a look a bit later as I'm on something else right now.\nI'll get back to you.\nOn 2013-01-17, at 5:02 PM, Ryan Bigg wrote:\n\nThe Rails version specified in it, and any gems that themselves may have \ndependencies on older versions of Rails. \nOn 18 January 2013 08:35, Jean-Fran\u00e7ois Dumas notifications@github.comwrote: \n\nI'm not comfortable to share the gemfile in plain sight. \nIs there something specific that you are searching for !? \nOn 2013-01-17, at 4:09 PM, Ryan Bigg wrote: \n\nCould you please show us your whole Gemfile? \nOn 18/01/2013, at 7:26, Jean-Fran\u00e7ois Dumas notifications@github.com \nwrote: \n\nAfter adding this line to my gemfile: \ngem 'forem', :git => \"git://github.com/radar/forem.git\" \nand running bundle install. I get the following bundle error: \nBundler could not find compatible versions for gem \"railties\": \nIn Gemfile: \nforem (>= 0) ruby depends on \nrailties (>= 3.2.11) ruby \nrails (= 3.1.10) ruby depends on \nrailties (3.1.10) \nI check the gemspec and couldn't see any railties dependency to Rails \n3.2.x Am I missing something? \n\u2014 \nReply to this email directly or view it on GitHub. \n\u2014 \nReply to this email directly or view it on GitHub. \n\n\n\u2014 \nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/issues/369#issuecomment-12392942. \n\u2014\nReply to this email directly or view it on GitHub.\n. Damn! Thanks for the quick help!\n. @parndt Fix the problem I had installing the gem!  Thanks a lot for that!\n. \n\n",
    "mlambie": "Come at me bro.\n. \n. ",
    "sevenseacat": "A+ would read again\n. It's listed in the README here: https://github.com/rubysherpas/forem#set-up-helper-methods-in-your-user-model\n. ",
    "epochwolf": "Classy. \n. ",
    "ddd": "Oooo, slug fest! Lets get it on!\n. @whitmanc quit it man, you're better than this and you're needlessly burning bridges you don't need to. Take a few days off from the computer. Get your mind right and come back. All will be forgiven if you can the crap right now, don't go pushing and doing things you can't come back from. You're better than this!\n. ",
    "gerard-leijdekkers": "You should not write code in migrations. It always breaks because in the end you are trying to run code in a migration while newer migrations still have to run. And the code will not work unless all migration have ran (at least the ones that add or remove columns)\n. ",
    "daniely": "the link to defining routes by @radar is gone. i believe this is the correct link\n. i plan on tackling this over the weekend. if there's any reason i should not please let me know\n. i tried to repro with forem and devise 2.1.2 but don't have any problems adding forem to an iframe. my iframe code\n<iframe src=\"<%= forem.root_path %>\"></iframe>\nscreenshot showing after a new topic was added.\n\n. what's the best way to do this? like how github does it with a \"write\" tab and  \"preview\" tab?\n. that's a neat idea. just curious, how do you deal with malformed content? like when adding blockquotes and the end tag isn't there yet?\n. lol. well, stackoverflow does realtime preview but stacked vertically. so not a bad idea.\ni do think github's write/preview tab is easy to understand for non-technies and would be much easier to implement though\n. I'm thinking Forem shouldn't limit the users to markdown. Some users might want forums to support bbcode for example or even straight html shudder. Thoughts?\n. That settles that :) \n. Yes. But what I was wondering is, should this be the default behavior in forem? \n. https://github.com/radar/forem/blob/master/app/models/forem/ability.rb#L44\nchange from\nruby\nuser.can_reply_to_forem_topic?(topic)\nto this\nruby\ncan?(:read, topic.forum) && user.can_reply_to_forem_topic?(topic)\nthen it would be similar to the permissions for creating topics\n. yes of course, just wanted to first make sure it was something you guys wanted :)\ni'll write and test and submit after work today.\n. @radar welcome! and thanks for showing me a better way to do that stub.\n. close?\n. close?\n. FYI, I tested this locally to make sure it works.\n. failing ruby 2.0 and 1.9.3 builds are in controller tests that use Warden::Test::Helpers. according to stackoverflow this isn't even supported.\n\nWarden is a Rack middleware, but RSpec controller specs don't even include Rack, as these types of specs are not meant to run your full application stack, but only your controller code.\n\nalthough it works in some environments it looks like a happy accident. while there are workarounds IMHO the correct solution is to move these tests into request/integration tests. i'd be happy to work on it (making it a priority over adding cache_counters)\nas for jruby builds i'm guessing it's something to do with moderator_ids but i'm not 100% sure on that. will look into it after fixing those controller tests.\n. @parndt any ideas on how to write a request spec to create a post reply to a topic?\ni asked on stackoverflow because i've been stuck on this for hours.\n. @parndt i consider that a feature spec. i'm using the definition of request vs feature spec found here\none case i'm testing is disallowing a user from constructing a POST request (say via curl) to reply to a topic in a forum they are not allowed to access. this was possible before one of my PRs which had a small permissions fix.\nat this point i don't think it's worth all the effort but and maybe something like a cancan test or feature spec will suffice. but i'm still curious about how to get a working request spec.\n. @parndt i don't think it's deprecated since there's rspec 2.14 documentation for it and it's mentioned in rspec-rails readme\n. @radar yep, due to the routing problem i was having i ended up converting it back to a controller spec. the build was fixed by not using the warden sign_in helper in controllers.\n. upgrading rspec didn't work\n. whoot!\n\n. i was in a bit of a rush to get the builds fixed. i'd like to go back and refactor the spec/support/sign_in_helpers.rb to something like\n```\nmodule ControllerSignInHelper\n  def sign_in\n  end\nend\nmodule SignInHelper\n  def sign_in\n  end\nend\nRSpec.configure do |config|\n  config.include ControllerSignInHelper, :type => :controller\n  config.include SignInHelper, :type => [:request, :feature]\nend\n```\nyou guys ok with this?\n. i tried the above and it works locally but it caused some of the travis builds to break. back to the ugly controller.stub :current_user => user\n. ping.\n. guess you guys are busy. alrighty\n. @radar hope you don't mind but i did a push --force to use pluck (thanks for the advice on that). if you prefer more commits vs --force please let me know.\n. @radar it seems using pluck breaks the builds in jruby. reverting back to using map\n. @radar i'm assuming you're not asking me. but incase you are i was just trying to get the travis builds to pass.\n. didn't work\n. works. closing this and cherry-picking into an existing PR\n. ",
    "CvX": "Duplicate of #364\n. ",
    "mauriciopasquier": "thanks for the software :)\n. Working on it\n. I did some general proofreading also, is it ok to commit it there or do you want a separate PR?\n. Well, I ended up doing PR #378 for this issue only. When it's merged I'll send another with the rest of the changes.\n(triple post!)\n. I don't know what could be needed, and I have little to none experience with engines, but yeah, why not? :P \n. What about using a forem specific method, like it is done in decorate_user_class! with other methods?\n```\ndef forem_name\n  to_s\nend\ndef forem_email\n  email\nend\n```\nIn this way they can be overridden, and you keep backwards compatibility using to_s and email by default. Or maybe configured like avatar_user_method. I could tackle a PR with these changes if this approach is welcome and there isn't any problem I'm not seeing :P \n. ok, working on it :)\n. No, sorry, I really couldn't find the time! But I'll do it this week (promise) if no one else does\n. thanks :)\n. thanks!\n. No problem! I'll take a look at it this weekend\n. Ok, I rebased but can't run tests because of this:\nrake aborted!\nundefined method `theme=' for Forem:Module\n<path>/bundler/gems/forem-theme-base-3efec35538c3/lib/forem-theme-base.rb:6:in `<class:Engine>'\nShould I point the Gemfile to another repo/branch/theme, or what? Commenting that line seems to work but then I got a lot of unrelated (I hope) Capybara errors..\n. Awesome, everything's green now! Just rebased, updated the readme and forcepushed :)\n. \\o/\n. About this and other view related issues: I've been using forem for a while now, and I think it would be better if the Forem gem didn't depend or include any views by default. I know it sounds extreme, but.. it causes a lot of complications like\n- kaminari vs will_paginate\n- unused dependencies (I rewrote the views in my site's style without using simple_form, for example)\n- bootstrap 2 vs bootstrap 3 :P \nForem could focus on making the forum infrastructure even better, and the view gems could be developed independently. I know there are independent view gems, but I think this view coupling slows forem development a little (I want a gem 'forem', '1.0.0' in my Gemfile :) )\nSorry if it seems too off-topic, or if it's something already discarded for reasons I don't know!\n. ",
    "johanb": "I had no reason for not translating it. \n. ",
    "masterweily": "tnx, any idea what can i do about it? \n. ",
    "fracek": "On a more serious note, I stick with the phpBB translation even where I didn't agree with.\n. Sorry I thought forem was ruby 1.9+.\nDo you want me to change to use the hashrocket and make another pull request? To maintain a clean history.\n. I think it's where it makes more sense, if you think it's better doing it another way I will change it.\n. ",
    "kevinelliott": "This only occurs when mounting to /, and is understandable. Closing this issue.\n. ",
    "vikhyat": "I'd love to implement this one. \nFor the second one I think adding a method to the user class similar to the authorization methods would be the way to go.\nI'm not so sure about where the email subjects should be made configurable -- is it a good idea to do it in config/initializers/forem.rb?\n. On second thought the email subjects can be customized in the locale file, so that isn't really necessary. I'll be working on the email opt-out real soon.\n. ",
    "oceanbreeze": "Hey, thank you, sadly I haven't tried this with Ruby 1.9.3, since I don't have it installed on my main development PC right now (switched to 2.0 since official release).\nMaybe this is 'kaminari' gem bug? Will try with will-paginate a bit later.\n. ",
    "gmrubin": "Thanks Ryan! The to_s method did fix this.\nOn Sun, Mar 3, 2013 at 11:48 PM, Ryan Bigg notifications@github.com wrote:\n\nThis is because you've not defined the to_s method in your User model.\nPlease do this, like so:\ndef to_s\n  nameend\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/issues/394#issuecomment-14363866\n.\n. \n",
    "JoeGH": "Sorry to be a pain.\nI've tried all types of fixes to no avail.\nNow I get this error.\nundefined method `user_path' for #<#Class:0x9ceadd4:0x9ce94c0>\nExtracted source (around line #16):\n13:                 Account <b class=\"caret\"></b>\n14:                 </a>\n15.                 <ul class=\"dropdown-menu\">\n16:                 <li><%= link_to \"Profile\", current_user %></li>\n17:                 <li><%= link_to \"Settings\", main_app.edit_user_path(current_user) %></li>\n18:                 <li class=\"divider\"></li>\n19:                 <li>\nShouldn't \"resources :users\" in the routes.rb create the user_path method?\nAppreciate your help.\nThanks.\n. I figured it out. Cool.\nIt should be on line 16.\n<%= link_to \"Profile\", main_app.user_path(current_user) %>\n. It worked!\nThank you mpurham.\nIs this a best practice? I'm not so sure, but it does work.\n. Using some other formatter than the default?\n. Thanks. :+1: \n. ",
    "kumardev": "I did set the path and it was working a few days back  ,but now it throws error . Should i change the gemfile to point from master to a stable version or something ? I am pretty much confused why it isn't working now :(\n. ",
    "mijoharas": "Ok, so I need to do exactly this. following the wiki here by adding\nForem.sign_in_path = main_app.signin_path\nthrows an error main_app is undefined (in the initialiser).\nFair enough so I find this thread and try\nForem.sign_in_path = :signin_path\nas is suggested above but this throws the error \nundefined method `signin_path_url' for #<Forem::TopicsController:0x00000005eaa060>\nAny suggestions?\n. sure, just created a minimum working example that produces \nundefined method `signin_path_url' for #<Forem::TopicsController:0x007f46740b7068>\nwith the Forem.sign_in_path = :signin_path present in the Forem initializer, see here\nlet me know if there's any explanation you want (if you run rake db:seed you can sign in as a user with example@example.com and foobar as password)\n. also apologies for the quick and dirty example, it has what it needs :)\n. ok, it looks like both of these solutions are functionally equivalent to what I've done. In each case a new route is added that goes to the correct controller and action. My original solution was to include \nmatch '/signin',  to: 'sessions#new',         via: 'get'\n  match '/sign_in',  to: 'sessions#new',         via: 'get'\nas the second one would be picked up by Forem. The first one is needed as I have a lot of headers and footers etc. that have main_app.signin_path (these could all obviously be changed). As you pointed out I could change the second line to \nget '/signin',  to: 'sessions#new', :as => :new_user_session\nbut both still need to be included. No problem for me as either way a new path needs to be created (either new_user_session_path or sign_in_path) but I'm still curious as to why Forem.sign_in_path = :sign_in_path doesn't work, as this should solve the problem without the need for an extra path.\nEither way, my problem is solved anyway so there's no issue, thanks for the advice @radar and @bodrovis .\n. I had a similar issue: \n``\n\u279c rails g forem:install\nCopying over Forem migrations...\nWhat is your user class called? [User] User\nWhat is the current_user helper called in your app? [current_user] current_user\nDefining forem_user method inside ApplicationController...\n      insert  app/controllers/application_controller.rb\nAdding forem initializer (config/initializers/forem.rb)...\n      create  config/initializers/forem.rb\nRunning rake db:migrate\nCreating default forum and topic\n/home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activemodel-4.0.1/lib/active_model/attribute_methods.rb:439:inmethod_missing': undefined method forem_moderate_posts?' for #<User:0x000000069c9c20> (NoMethodError)\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/attribute_methods.rb:155:inmethod_missing'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/bundler/gems/forem-2ef06ad0521d/app/models/forem/post.rb:112:in skip_pending_review'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.1/lib/active_support/callbacks.rb:387:in_run__3413286596083778058__create__callbacks'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.1/lib/active_support/callbacks.rb:80:in run_callbacks'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/callbacks.rb:306:increate_record'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/timestamp.rb:57:in create_record'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/persistence.rb:477:increate_or_update'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/callbacks.rb:302:in block in create_or_update'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.1/lib/active_support/callbacks.rb:413:in_run__3413286596083778058__save__callbacks'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.1/lib/active_support/callbacks.rb:80:in run_callbacks'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/callbacks.rb:302:increate_or_update'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/persistence.rb:106:in save'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/validations.rb:51:insave'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/attribute_methods/dirty.rb:32:in save'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/transactions.rb:270:inblock (2 levels) in save'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/transactions.rb:326:in block in with_transaction_returning_status'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/connection_adapters/abstract/database_statements.rb:200:intransaction'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/transactions.rb:209:in transaction'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/transactions.rb:323:inwith_transaction_returning_status'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/transactions.rb:270:in block in save'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/transactions.rb:281:inrollback_active_record_state!'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/transactions.rb:269:in save'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/associations/has_many_association.rb:40:ininsert_record'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/autosave_association.rb:352:in block in save_collection_association'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/autosave_association.rb:345:ineach'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/autosave_association.rb:345:in save_collection_association'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/autosave_association.rb:183:inblock in add_autosave_association_callbacks'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/autosave_association.rb:153:in instance_eval'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/autosave_association.rb:153:inblock in define_non_cyclic_method'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.1/lib/active_support/callbacks.rb:383:in _run__1380524507118476183__create__callbacks'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.1/lib/active_support/callbacks.rb:80:inrun_callbacks'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/callbacks.rb:306:in create_record'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/timestamp.rb:57:increate_record'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/persistence.rb:477:in create_or_update'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/callbacks.rb:302:inblock in create_or_update'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.1/lib/active_support/callbacks.rb:413:in _run__1380524507118476183__save__callbacks'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.1/lib/active_support/callbacks.rb:80:inrun_callbacks'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/callbacks.rb:302:in create_or_update'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/persistence.rb:128:insave!'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/validations.rb:57:in save!'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/attribute_methods/dirty.rb:41:insave!'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/transactions.rb:275:in block in save!'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/transactions.rb:326:inblock in with_transaction_returning_status'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/connection_adapters/abstract/database_statements.rb:202:in block in transaction'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/connection_adapters/abstract/database_statements.rb:210:inwithin_new_transaction'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/connection_adapters/abstract/database_statements.rb:202:in transaction'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/transactions.rb:209:intransaction'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/transactions.rb:323:in with_transaction_returning_status'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activerecord-4.0.1/lib/active_record/transactions.rb:275:insave!'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/bundler/gems/forem-2ef06ad0521d/db/seeds.rb:17:in <top (required)>'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.1/lib/active_support/dependencies.rb:223:inload'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.1/lib/active_support/dependencies.rb:223:in block in load'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.1/lib/active_support/dependencies.rb:214:inload_dependency'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.1/lib/active_support/dependencies.rb:223:in load'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/railties-4.0.1/lib/rails/engine.rb:540:inload_seed'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/railties-4.0.1/lib/rails/railtie/configurable.rb:30:in method_missing'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/bundler/gems/forem-2ef06ad0521d/lib/generators/forem/install_generator.rb:68:inseed_database'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/thor-0.18.1/lib/thor/command.rb:27:in run'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/thor-0.18.1/lib/thor/invocation.rb:120:ininvoke_command'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/thor-0.18.1/lib/thor/invocation.rb:127:in block in invoke_all'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/thor-0.18.1/lib/thor/invocation.rb:127:ineach'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/thor-0.18.1/lib/thor/invocation.rb:127:in map'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/thor-0.18.1/lib/thor/invocation.rb:127:ininvoke_all'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/thor-0.18.1/lib/thor/group.rb:233:in dispatch'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/thor-0.18.1/lib/thor/base.rb:439:instart'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/railties-4.0.1/lib/rails/generators.rb:156:in invoke'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/railties-4.0.1/lib/rails/commands/generate.rb:11:in'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.1/lib/active_support/dependencies.rb:229:in require'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.1/lib/active_support/dependencies.rb:229:inblock in require'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.1/lib/active_support/dependencies.rb:214:in load_dependency'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.1/lib/active_support/dependencies.rb:229:inrequire'\n    from /home/michael/.rvm/gems/ruby-2.0.0-p247/gems/railties-4.0.1/lib/rails/commands.rb:48:in <top (required)>'\n    from bin/rails:4:inrequire'\n    from bin/rails:4:in `'\n\u279c  rails g forem:install\nCopying over Forem migrations...\nWhat is your user class called? [User] User\nWhat is the current_user helper called in your app? [current_user] current_user\nDefining forem_user method inside ApplicationController...\n      insert  app/controllers/application_controller.rb\nSkipping config/initializers/forem.rb creation, as file already exists!\nRunning rake db:migrate\nCreating default forum and topic\nMounting Forem::Engine at \"/forums\" in config/routes.rb...\n      insert  config/routes.rb\n\nDone! Forem has been successfully installed. Yaaaaay!\nHere's what happened:\n1) Forem's migrations were copied over into db/migrate.\n2) We created a new migration called AddForemAdminToTable.\n   This creates a new field called \"forem_admin\" on your User model's table.\n3) A new method called forem_user was inserted into your ApplicationController.\n   This lets Forem know what the current user of your application is.\n4) A new file was created at config/initializers/forem.rb\n   This is where you put Forem's configuration settings.\n5) rake db:migrate was run, running all the migrations against your database.\n6) Seed forum and topic were loaded into your database.\n7) The engine was mounted in your config/routes.rb file using this line:\nmount Forem::Engine, :at => \"/forums\"\nIf you want to change where the forums are located, just change the \"/forums\" path at the end of this line to whatever you want.\nAnd finally:\n8) We told you that Forem has been successfully installed and walked you through the steps.\nWe have detected you're not using Devise (which is OK with us, really!), so there's one extra step you'll need to do.\nYou'll need to define a \"sign_in_path\" method for Forem to use that points to the sign in path for your application. You can set Forem.sign_in_path to a String inside config/initializers/forem.rb to do this, or you can define it in your config/routes.rb file with a line like this:\n      get '/users/sign_in', :to => \"users#sign_in\"\n\nEither way, Forem needs one of these two things in order to work properly. Please define them!\nIf you have any questions, comments or issues, please post them on our issues page: http://github.com/radar/forem/issues.\nThanks for using Forem!\n``\n. nevermind, just realised that attr_accessible is missing on most of the models on rails4 branch, they appear to be there on the master branch, I if we pull those commits in then this should allow the installation viarails g forem:install` on this branch.\n. added the rest of them.\n. Ahhh, thanks, I was wondering about the atypical behaviour, hadn't noticed that I'd included the protected-attributes when I'd installed refinery. Thanks.\n. ok, I may dive into that and clean up what needs cleaning up in refinery soon if there are many problems, (I'll submit a pull request with the fix if I make it). In the meantime I've got a branch with the changes in forem that allow me to use the protected-attributes gem if needed. Thanks.\n. ",
    "mpurham": "Try using the !important rule in css to override any rule. For example with the code above try the code below and it should override any changes.\n```\nposts .post .contents {\n  min-height: 125px !important;\n}\nposts .post .contents .actions {\ntop: 0px !important;\n}\n```\n. Yes by using the !important rule you're telling you're css file to override for that specific argument which is considered best practice. Happy coding!\n. ",
    "cyrill62": "I think it's free for open source projets.\nOnly github repo owner can init the project on localeapp.\n. Just change my status on this projet from \"translator\" to \"developper\" and I can import existing locales from yaml files.\nThen make a pull request with new locales files.\n. ",
    "osman-masood": "@radar  Yep, exactly.\n. ",
    "forsberg1": "Did find a solution if any others out here have the same problems:\nin gem file:\nruby\ngem 'kaminari'\ngem 'forem', :git => \"https://github.com/radar/forem.git\", :branch => \"1-0-stable\"\nnow working for me.\n. ",
    "s26mehta": "It might actually be a forem issue because if you change the header from 'Forums' to 'Topics' it should automatically change in the url. I mean isn't that the reason we see /forums/forums/id when we click on any specific forum.\n. do u guys know how i can customize the url? Could it possibly be linked with namespace.\n. Do u know how i can avoid the double /forums/forums in the url?\n. ",
    "ascendbruce": "In commit fcdf4c9, I updated most similar cases. The rests are a little more complicated. I'd like to leave it for a big refactoring.\n. in localeapp's document: (with gem configured)\n\nBy default, your Ruby on Rails application will only send newly created translation keys when running in the development environment. When a page is refreshed locally, any unpopulated keys are sent to the app's corresponding localeapp.com project.\n\nor manually way: Import & Export Translations Files\nNote that in commit fcdf4c9, I only updated en translation file. I am not familiar with localeapp.com workflow. But I guess it will be good to sync it before or short after merged.\nps. I prefer manually way, ~~to avoid receiving keys from everywhere. (and I don't know what will happen if I18n::MissingTranslation is not raised from forem code.)~~ Seems that it requires API_KEY to connect to localeapp project. So it won't happen.\n. As i understand, the API key is only available to localeapp project owner and developers. So most contributors can't generate it.\nI created an app to try out localeapp.com. But I'm still facing some problems such as It doesn't send any unpopulated keys, even when config.sending_environments = [:development] is set explicitly\n. Yes but it may take days :sweat_smile:\n. Hi! @radar \nSorry I've been busy these days. Still working on it but not yet complete :disappointed:\n. Hi! It is already in wiki > Configuration > User class:\n\nThe user class's instances should respond to 'to_s' for the user's name, and 'email' for use by Gravatar.\n\nMaybe it's a good idea to highlight it? (I missed it too, on my first time setup)\n. I will fix it later.\nI plan to change only en.yml file. And after updating translation keys in locateapp.com, than update Chinese translation. Is that ok?\n. I found that most of lookups for title didn't use lazy lookup. eg. admin/admin/topics/edit, admin/forums/new and topics/new.\nTo fit the same style in those files above. Maybe forem.category.new is the right answer. If so, we should add translation key for it.\nIs there a conventions guidelines for this project?\n. I'd like to change the translation key to: forem.admin.categories.new.create_category\nthan in app/views/forem/admin/categories/new.html.erb:\nerb\n<h2><%= t('.create_category') %></h2>\n<!-- translation is: \"Creating a new Forum Category\" -->\nAnd update all similar cases. (topics/new, admin/topics/edit, admin/forums/new, etc...)\n. ",
    "joneslee85": "@radar re-submit new one now\n. kh\u00f4ng c\u00f3 chi (you are welcome)\n. ",
    "nazrulcse": "yes\n. I have a rails project on rails 3.0.9 and i try to add forem but i see that forem is depends on rails 3.1 or 3.2 so i have upgrade my project int rails 3.2.13 and try to add forem.\nMy Gemfile\nruby\ngem 'mysql2'\ngem 'mongo_mapper'\ngem 'activerecord'\ngem 'haml'\ngem 'haml-rails'\ngem 'kaminari', '0.13.0'\ngem 'carrierwave'\ngem 'mini_magick'\ngem 'fog'\ngem 'htmlentities'\ngem \"bson_ext\"\ngem \"activeadmin\"\ngem 'forem', :github => 'https://github.com/radar/forem.git'\nError\n`` shell\nC:\\Users\\Nazrul\\ugl>rails g forem:install\nC:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:inrequire': cannot load such fil\ne -- localeapp/rails (LoadError)\n        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `block in require'\n    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:236:in `load_dependency'\n    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'\n    from C:/Ruby193/lib/ruby/gems/1.9.1/bundler/gems/forem-704f88ccbd7b/lib/forem/engine.rb:24:in `block in <class:Engine>'\n    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `instance_exec'\n    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `run'\n    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:55:in `block in run_initializers'\n    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `each'\n    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `run_initializers'\n    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/application.rb:136:in `initialize!'\n    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/railtie/configurable.rb:30:in `method_missing'\n    from C:/Users/Nazrul/ugl/config/environment.rb:5:in `<top (required)>'\n    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'\n    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `block in require'\n\n    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:236:in `load_dependency'\n    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'\n    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/application.rb:103:in `require_environment!'\n    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/commands.rb:25:in `<top (required)>'\n    from script/rails:6:in `require'\n    from script/rails:6:in `<main>'\n\n```\n. I don't understand can you please expand it to me. \n. Thank you\nThis problem is solved.\n. Hello parndt\nCan you please suggest me about localeapp and why our project it is not integrate it's request url, forem gem/engine depends on localeapp but in our project we are not using it. can you please help?\nthanks\n. can you please help how can i skip/disabled this pulling request for localeapp?\n. ",
    "oleander": "I get the same error.\nI'm using 7434b1d778b4350e1ad24acf78a5051155576637 with rails 3.2.11 and ruby 1.9.3.\nrails g forem:install                                                                                                                            [linus-oleander.lan][18:12:15]\nCopying over Forem migrations...\nWhat is your user class called? [User]\nWhat is the current_user helper called in your app? [current_user]\nDefining forem_user method inside ApplicationController...\n      insert  app/controllers/application_controller.rb\nAdding forem initializer (config/initializers/forem.rb)...\n      create  config/initializers/forem.rb\nRunning rake db:migrate\nNOTICE:  CREATE TABLE will create implicit sequence \"forem_forums_id_seq\" for serial column \"forem_forums.id\"\nNOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index \"forem_forums_pkey\" for table \"forem_forums\"\nNOTICE:  CREATE TABLE will create implicit sequence \"forem_topics_id_seq\" for serial column \"forem_topics.id\"\nNOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index \"forem_topics_pkey\" for table \"forem_topics\"\nNOTICE:  CREATE TABLE will create implicit sequence \"forem_posts_id_seq\" for serial column \"forem_posts.id\"\nNOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index \"forem_posts_pkey\" for table \"forem_posts\"\nNOTICE:  CREATE TABLE will create implicit sequence \"forem_views_id_seq\" for serial column \"forem_views.id\"\nNOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index \"forem_views_pkey\" for table \"forem_views\"\nNOTICE:  CREATE TABLE will create implicit sequence \"forem_categories_id_seq\" for serial column \"forem_categories.id\"\nNOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index \"forem_categories_pkey\" for table \"forem_categories\"\nNOTICE:  CREATE TABLE will create implicit sequence \"forem_subscriptions_id_seq\" for serial column \"forem_subscriptions.id\"\nNOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index \"forem_subscriptions_pkey\" for table \"forem_subscriptions\"\nNOTICE:  CREATE TABLE will create implicit sequence \"forem_groups_id_seq\" for serial column \"forem_groups.id\"\nNOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index \"forem_groups_pkey\" for table \"forem_groups\"\nNOTICE:  CREATE TABLE will create implicit sequence \"forem_memberships_id_seq\" for serial column \"forem_memberships.id\"\nNOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index \"forem_memberships_pkey\" for table \"forem_memberships\"\nNOTICE:  CREATE TABLE will create implicit sequence \"forem_moderator_groups_id_seq\" for serial column \"forem_moderator_groups.id\"\nNOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index \"forem_moderator_groups_pkey\" for table \"forem_moderator_groups\"\nCreating default forum and topic\n/Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activemodel-3.2.11/lib/active_model/attribute_methods.rb:407:in `method_missing': undefined method `forem_needs_moderation?' for #<User:0x007ffe08faea70> (NoMethodError)\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/attribute_methods.rb:149:in `method_missing'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/core_ext/object/try.rb:36:in `try'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/bundler/gems/forem-7434b1d778b4/app/models/forem/post.rb:116:in `skip_pending_review'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:417:in `_run__3755572121445268244__create__3984414227987606957__callbacks'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `__run_callback'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:385:in `_run_create_callbacks'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:81:in `run_callbacks'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/callbacks.rb:268:in `create'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/persistence.rb:348:in `create_or_update'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/callbacks.rb:264:in `block in create_or_update'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:447:in `_run__3755572121445268244__save__3984414227987606957__callbacks'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `__run_callback'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:81:in `run_callbacks'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/callbacks.rb:264:in `create_or_update'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/persistence.rb:84:in `save'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/validations.rb:50:in `save'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/attribute_methods/dirty.rb:22:in `save'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/transactions.rb:259:in `block (2 levels) in save'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/transactions.rb:208:in `transaction'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/newrelic_rpm-3.5.6.55/lib/new_relic/agent/method_tracer.rb:491:in `block in transaction_with_trace_ActiveRecord_self_name_transaction'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/newrelic_rpm-3.5.6.55/lib/new_relic/agent/method_tracer.rb:240:in `trace_execution_scoped'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/newrelic_rpm-3.5.6.55/lib/new_relic/agent/method_tracer.rb:486:in `transaction_with_trace_ActiveRecord_self_name_transaction'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/transactions.rb:259:in `block in save'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/transactions.rb:258:in `save'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/associations/has_many_association.rb:16:in `insert_record'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/autosave_association.rb:346:in `block in save_collection_association'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/autosave_association.rb:337:in `each'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/autosave_association.rb:337:in `save_collection_association'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/autosave_association.rb:191:in `block in add_autosave_association_callbacks'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/autosave_association.rb:161:in `instance_eval'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/autosave_association.rb:161:in `block in define_non_cyclic_method'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:413:in `_run__1824031267506073167__create__3984414227987606957__callbacks'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `__run_callback'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:385:in `_run_create_callbacks'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:81:in `run_callbacks'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/callbacks.rb:268:in `create'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/persistence.rb:348:in `create_or_update'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/callbacks.rb:264:in `block in create_or_update'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:458:in `_run__1824031267506073167__save__3984414227987606957__callbacks'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `__run_callback'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:81:in `run_callbacks'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/callbacks.rb:264:in `create_or_update'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/persistence.rb:104:in `save!'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/validations.rb:56:in `save!'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/attribute_methods/dirty.rb:33:in `save!'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/transactions.rb:264:in `block in save!'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/transactions.rb:208:in `transaction'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/newrelic_rpm-3.5.6.55/lib/new_relic/agent/method_tracer.rb:491:in `block in transaction_with_trace_ActiveRecord_self_name_transaction'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/newrelic_rpm-3.5.6.55/lib/new_relic/agent/method_tracer.rb:240:in `trace_execution_scoped'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/newrelic_rpm-3.5.6.55/lib/new_relic/agent/method_tracer.rb:486:in `transaction_with_trace_ActiveRecord_self_name_transaction'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.11/lib/active_record/transactions.rb:264:in `save!'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/bundler/gems/forem-7434b1d778b4/db/seeds.rb:17:in `<top (required)>'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/zeus-0.13.3/lib/zeus/load_tracking.rb:50:in `load'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/zeus-0.13.3/lib/zeus/load_tracking.rb:50:in `load'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/zeus-0.13.3/lib/zeus/load_tracking.rb:43:in `load'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `block in load'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `load'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.11/lib/rails/engine.rb:520:in `load_seed'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/bundler/gems/forem-7434b1d778b4/lib/generators/forem/install_generator.rb:67:in `seed_database'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/thor-0.17.0/lib/thor/task.rb:27:in `run'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/thor-0.17.0/lib/thor/invocation.rb:120:in `invoke_task'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/thor-0.17.0/lib/thor/invocation.rb:126:in `block in invoke_all'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/thor-0.17.0/lib/thor/invocation.rb:126:in `each'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/thor-0.17.0/lib/thor/invocation.rb:126:in `map'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/thor-0.17.0/lib/thor/invocation.rb:126:in `invoke_all'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/thor-0.17.0/lib/thor/group.rb:238:in `dispatch'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/thor-0.17.0/lib/thor/base.rb:434:in `start'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.11/lib/rails/generators.rb:171:in `invoke'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.11/lib/rails/commands/generate.rb:12:in `<top (required)>'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `block in require'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'\n  from /Users/linus/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.11/lib/rails/commands.rb:29:in `<top (required)>'\n  from script/rails:6:in `require'\n  from script/rails:6:in `<main>'\nrails g forem:install  51,02s user 9,53s system 52% cpu 1:54,67 total\n. I did some research on the subject and I think I solved it.\nWhen running rails g forem:install a init file is created, but not loaded (which is the core problem). In this init file Forem.user_class is being set. Later in installation Post#skip_pending_review is being called which runs the following line user.try(:forem_needs_moderation?). The problem is that the User class has not been infected/injected using Forem.user_class.class_eval so the User class doesn't respond to forem_needs_moderation? . This means that  the error above will be raised. \ntl;dr The solution is to run the rails g forem:install twice.\n. Yes, that should solve the problem. I haven't tried it, but it looks like it should work.\n. ",
    "boatmon0": "I have the same error, might have something to do with rails 3.2.13 and ruby 1.9.3p392.  \nTrace:\nrest-client (1.6.7) lib/restclient/abstract_response.rb:48:in `return!'\nrest-client (1.6.7) lib/restclient/request.rb:230:in `process_result'\nrest-client (1.6.7) lib/restclient/request.rb:178:in `block in transmit'\n/home/eugene/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/net/http.rb:745:in `start'\nrest-client (1.6.7) lib/restclient/request.rb:172:in `transmit'\nrest-client (1.6.7) lib/restclient/request.rb:64:in `execute'\nrest-client (1.6.7) lib/restclient/request.rb:33:in `execute'\nlocaleapp (0.6.9) lib/localeapp/api_caller.rb:67:in `make_call'\nlocaleapp (0.6.9) lib/localeapp/api_caller.rb:28:in `call'\nlocaleapp (0.6.9) lib/localeapp/api_call.rb:6:in `api_call'\nlocaleapp (0.6.9) lib/localeapp/poller.rb:43:in `poll!'\nlocaleapp (0.6.9) lib/localeapp/rails/controller.rb:14:in `handle_translation_updates'\nactivesupport (3.2.13) lib/active_support/callbacks.rb:418:in `_run__324363186__process_action__350408264__callbacks'\nactivesupport (3.2.13) lib/active_support/callbacks.rb:405:in `__run_callback'\nactivesupport (3.2.13) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'\nactivesupport (3.2.13) lib/active_support/callbacks.rb:81:in `run_callbacks'\nactionpack (3.2.13) lib/abstract_controller/callbacks.rb:17:in `process_action'\nactionpack (3.2.13) lib/action_controller/metal/rescue.rb:29:in `process_action'\nactionpack (3.2.13) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'\nactivesupport (3.2.13) lib/active_support/notifications.rb:123:in `block in instrument'\nactivesupport (3.2.13) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\nactivesupport (3.2.13) lib/active_support/notifications.rb:123:in `instrument'\nactionpack (3.2.13) lib/action_controller/metal/instrumentation.rb:29:in `process_action'\nactionpack (3.2.13) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'\nactiverecord (3.2.13) lib/active_record/railties/controller_runtime.rb:18:in `process_action'\nactionpack (3.2.13) lib/abstract_controller/base.rb:121:in `process'\nactionpack (3.2.13) lib/abstract_controller/rendering.rb:45:in `process'\nactionpack (3.2.13) lib/action_controller/metal.rb:203:in `dispatch'\nactionpack (3.2.13) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'\nactionpack (3.2.13) lib/action_controller/metal.rb:246:in `block in action'\nactionpack (3.2.13) lib/action_dispatch/routing/route_set.rb:73:in `call'\nactionpack (3.2.13) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'\nactionpack (3.2.13) lib/action_dispatch/routing/route_set.rb:36:in `call'\njourney (1.0.4) lib/journey/router.rb:68:in `block in call'\njourney (1.0.4) lib/journey/router.rb:56:in `each'\njourney (1.0.4) lib/journey/router.rb:56:in `call'\nactionpack (3.2.13) lib/action_dispatch/routing/route_set.rb:612:in `call'\nactionpack (3.2.13) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'\nrack (1.4.5) lib/rack/etag.rb:23:in `call'\nrack (1.4.5) lib/rack/conditionalget.rb:25:in `call'\nactionpack (3.2.13) lib/action_dispatch/middleware/head.rb:14:in `call'\nactionpack (3.2.13) lib/action_dispatch/middleware/params_parser.rb:21:in `call'\nactionpack (3.2.13) lib/action_dispatch/middleware/flash.rb:242:in `call'\nrack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'\nrack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'\nactionpack (3.2.13) lib/action_dispatch/middleware/cookies.rb:341:in `call'\nactiverecord (3.2.13) lib/active_record/query_cache.rb:64:in `call'\nactiverecord (3.2.13) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'\nactionpack (3.2.13) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'\nactivesupport (3.2.13) lib/active_support/callbacks.rb:405:in `_run__332767350__call__828226316__callbacks'\nactivesupport (3.2.13) lib/active_support/callbacks.rb:405:in `__run_callback'\nactivesupport (3.2.13) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'\nactivesupport (3.2.13) lib/active_support/callbacks.rb:81:in `run_callbacks'\nactionpack (3.2.13) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\nactionpack (3.2.13) lib/action_dispatch/middleware/reloader.rb:65:in `call'\nactionpack (3.2.13) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'\nactionpack (3.2.13) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'\nactionpack (3.2.13) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'\nrailties (3.2.13) lib/rails/rack/logger.rb:32:in `call_app'\nrailties (3.2.13) lib/rails/rack/logger.rb:16:in `block in call'\nactivesupport (3.2.13) lib/active_support/tagged_logging.rb:22:in `tagged'\nrailties (3.2.13) lib/rails/rack/logger.rb:16:in `call'\nactionpack (3.2.13) lib/action_dispatch/middleware/request_id.rb:22:in `call'\nrack (1.4.5) lib/rack/methodoverride.rb:21:in `call'\nrack (1.4.5) lib/rack/runtime.rb:17:in `call'\nactivesupport (3.2.13) lib/active_support/cache/strategy/local_cache.rb:72:in `call'\nrack (1.4.5) lib/rack/lock.rb:15:in `call'\nactionpack (3.2.13) lib/action_dispatch/middleware/static.rb:63:in `call'\nrailties (3.2.13) lib/rails/engine.rb:479:in `call'\nrailties (3.2.13) lib/rails/application.rb:223:in `call'\nrack (1.4.5) lib/rack/content_length.rb:14:in `call'\nrailties (3.2.13) lib/rails/rack/log_tailer.rb:17:in `call'\nrack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'\n/home/eugene/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'\n/home/eugene/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'\n/home/eugene/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'\n. Thanks parndt, not ever used localeapp myself, got any suggestions?\n. Here is my Gemfile, perhaps it will help.\n``` ruby\nsource 'https://rubygems.org'\ngem 'rails', '3.2.13'\ngem 'mysql2'\ngem 'cocaine'\ngem 'spreadsheet'\ngem 'paperclip'\ngem 'mail'\ngem \"acts_as_list\"\ngem 'recaptcha', :require => 'recaptcha/rails'\ngem \"googlecharts\", \"~> 1.6.8\"\ngem 'sass-rails', '~> 3.2.3'\ngem 'coffee-rails', '~> 3.2.1'\n  gem 'compass-rails'\n  gem 'jquery-ui-rails'\nGems used only for assets and not required\nin production environments by default.\ngroup :assets do\ngem 'sass-rails',   '~> 3.2.3'\ngem 'sass-rails', git: 'https://github.com/rails/sass-rails.git', branch: '3-2-stable'\n  gem 'coffee-rails', '~> 3.2.1'\n# See https://github.com/sstephenson/execjs#readme for more supported runtimes\n  # gem 'therubyracer', :platforms => :ruby\ngem 'uglifier', '>= 1.0.3'\nend\ngem 'fancy-buttons'\ngem 'jquery-rails'\ngem 'forem', :git => \"git://github.com/radar/forem.git\"\ngem 'kaminari'\n```\n. When testing on another machine running rails \"g forem:install\" it complains of a problem with the javascript engine.  Might be related, and then again might be a coincidence. \n. All is very good!  Thank you so much.\n. ",
    "namiwang": "Since I'm currently using rails 4 rc1, is there any way I can integrate forem into my app now?\n. @radar \nAlways. Anything I can do?\n. ",
    "achru": "hi, \ni am working on upgrading it to rails 4 on this fork:\nhttps://github.com/achru/forem ,\n7 tests to go right now\n. i am pretty new to the stuff, solution is mostly hacky, becouse of friendly_id changes for rails4,\ni have these errors if somebody can take a look:\n```\nFailures:\n  1) Forem::Topic helper methods #register_view_by doesn't update the view time if less than 15 minutes ago\n     Failure/Error: topic.view_for(view_user).current_viewed_at.to_i.should eq(frozen_time.to_i)\n   expected: 1373399996\n        got: 1373400056\n\n   (compared using ==)\n # ./spec/models/topic_spec.rb:103:in `block (4 levels) in <top (required)>'\n\n2) Forem::Topic helper methods #register_view_by increments the users view count for the topic\n     Failure/Error: }.to change { topic.view_for(view_user).count }.from(1).to(2)\n     NoMethodError:\n       undefined method count' for nil:NilClass\n     # ./spec/models/topic_spec.rb:92:inblock (5 levels) in '\n     # ./spec/models/topic_spec.rb:90:in `block (4 levels) in '\n3) Forem::TopicsController attempting to subscribe to a hidden topic \n     Failure/Error: get :subscribe, :forum_id => 1, :id => 1\n     ActiveRecord::RecordNotFound:\n       Couldn't find Forem::Forum with id=1\n     # ./app/controllers/forem/topics_controller.rb:90:in find_forum'\n     # ./spec/support/controller_hacks.rb:27:inprocess_forem_action'\n     # ./spec/support/controller_hacks.rb:5:in get'\n     # ./spec/controllers/topics_controller_spec.rb:20:inblock (3 levels) in '\n4) topics viewing a topic should have an autodiscover link tag\n     Failure/Error: page.should have_selector(\"link[title='ATOM']\")\n     Capybara::ExpectationNotMet:\n       expected to find css \"link[title='ATOM']\" but there were no matches. Also found \"\", which matched the selector but not all filters.\n     # ./spec/features/topics_spec.rb:163:in `block (3 levels) in '\n```\nalso, generator does not inject method to  application controller and routes.\n. @radar  yep, any hints ?:)\n. hi, its working fine, thank you,\nthe problem was of course protected_attributes in gemfile :)\n. ",
    "GeoffTidey": "Thanks @radar.  I've been trying to get https://github.com/enriclluelles/route_translator to work with forem, but I've had to go with your initial suggestion for now.  Which is here: https://github.com/GeoffTidey/forem/commit/71f94e3ab6ef54c58adc58e00a1305c294b5f457\n. ",
    "createthis": "Hey Parndt. I mostly meant this as a place holder for discussion, so thanks for the interest. I hadn't put much thought into it, but I think it should operate like most other forum software.\nTwo types come to mind:\n1.) When the forum has a rich text editor built in, there is often an \"Add Image\" icon. Some forums only allow adding links to other sites, but many allow upload from localhost via this dialog. The image is usually inline, but depending on the rich text editor it might be resizable and moveable. The example I'm thinking of is vBulletin based systems.\n2.) Sometimes there is an \"add attachment\" button. It presents the ubiquitous \"Browse\" multi-part form upload button and often a text field for entering a description of the image. This type of system can be separate from a formal rich text editor. Often the \"add attachment\" button is at the bottom of the forum post text box, instead of the top. The image shows at the bottom of the post unless a fancy \"inline photo\" tag is added. An example of this would be phpBB systems.\nOf the two, I think phpBB would be the easiest to implement, and vBulletin is the more intuitive. I personally prefer the rich text editor solution, but that adds dependencies. Either way, paperclip can handle the image resizing and processing on the backend.\nWhat do you think?\n. Well, I'm an INTJ, so I have a certain way I go about doing things.\nYou'd have to sell me on Dragonfly before I'd stop reaching for Paperclip (my initial look didn't do a great job convincing me I needed it). Paperclip has always worked well for me in the past. I tend not to change something unless I have a reason to.\nAlso, I already have extensions for my extensions. I'm using spree as a shopping cart and forem as a forum for spree. I have seven other extensions installed. I'm starting to think the whole Engine idea is some kind of revolt against what makes Rails so beautiful in the first place, \"convention over configuration\". I think it's all getting a little out of hand. I'd much rather just see a rich text editor as the default and everyone who doesn't like it can go fork themselves. <--- see what I did there?\nAnyway, I think our methods might differ, but we're basically on the same page as far as the end result. I think the guy writing the code will ultimately make the decisions. I haven't yet had a need for images in my forums, so in the foreseeable future it won't be me. Of course, that could change anytime.\n. Yeah, I've already had a few days slip by while I had messages in the queue unawares. I think this needs to happen. Seems like it would be a really easy feature to implement too. If you can point me to the most likely trigger point real quick, I can probably scratch my own itch and give you a pull request.\n. Well, that was certainly a starting point, but after another hour of digging, I think what I was looking for was Forem::TopicsController#create using @topic.user.forem_moderate_posts? as a filter. I'll see what I can do.\n. One problem I'm seeing is the lack of a clear way to iterate moderators. There is a has_many :moderators in the Forem::Forum model that may be intended to fill this need, but I'm not sure it is working or complete. Instead, I decided to build a list of administrators.\n. Scratch that pull request. The post code is firing on update as well as create. I'll have to move it.\n. Alright. I apparently don't have a clue how these pull requests work. I added a commit to fix the code on my end, and it seems to have automatically updated the pull request. Fancy. We should be good to go now.\n. Um, no, the moderator is defined by:\nruby\n@admin_users = Forem.user_class.find_all_by_forem_admin(true)\nI don't see the value in the other suggestions. If I need to override something, I fork the code and make my own changes. I don't see why we need to wrap everything in method calls. It just gets confusing.\n. I haven't bought into the whole decorator class system yet. I admittedly use decorators from time to time, but I'm concerned they make things MORE difficult to maintain long term, not easier. They encourage \"spaghetti code\", which is something I thought we got rid of in the previous decade. For example, I just spent hours debugging something caused by a decorator I wrote. It took that long just to figure out where the problem was being introduced. I think they cause more problems than they solve. Use them cautiously.\n13+ years as a professional software developer has taught me to only take things as far as the immediate requirements dictate. Over-engineering for future issues that may never exist is a trap. It's particularly a trap for intuitive dominant engineers, like you and me. Sensors rarely think so far ahead. Sometimes I think software should be a Sensor dominated field because of this. We intuitives need to take lessons from them.\nFinally, I'm convinced this code belongs in the controller. It's fine there. I think it's a good idea to put the bulk of logic into a model, but notifications like this definitely belong in the controller. You can even think of them as an alternative view if it helps. An email view.\nLook, you're clearly more invested in this project than I am. I just scratched my itch. You're welcome to run with it at this point. I've got other projects to work on. Good luck!\n. Seems like you could write a JSON web service to format your preview markdown, then shove the output into a DIV via jQuery.get(). Clicking \"Preview\" runs the callback.\n. For what it's worth, I agree with Radar. That's the right decision.\n. I made a comment about this earlier:\n\nOne problem I'm seeing is the lack of a clear way to iterate moderators. There is a has_many :moderators in the Forem::Forum model that may be intended to fill this need, but I'm not sure it is working or complete. Instead, I decided to build a list of administrators.\n\nI couldn't find any documentation on the moderators functionality. There's the moderator group table... but I couldn't get it working. Do you have any insight to offer?\n. How do you mean?\n. ",
    "dongxf": "I would suggest to operate in the exact way same as commenting this issue on github.com: \n\nI'm seriously considering adding an image attachment feature in my Forem.\n. ",
    "nikue": "Steps to create the problem:\n1. Install devise and forem\n2. Place forem in an iframe with a separate layout from main application\n3. Try to perform an action that requires calling forem_user or current_user from a controller (e.g. destroy a topic)\nThis results in being send to the sign in page in the iframe, even when logged in through the main application. The same behaviour does not take place in views, only in controllers.\nGemfile:\n``` ruby\nsource 'https://rubygems.org'\nplatforms :ruby do # linux\n  gem 'unicorn', '4.4.0'\nend\ngem 'rails', '3.2.13'\ngem 'bootstrap-sass', '2.3.1.0'\ngem 'execjs', '1.2.4'\ngem 'bcrypt-ruby', '3.0.1'\ngem 'will_paginate', '3.0.3'\ngem 'bootstrap-will_paginate', '0.0.6'\ngem 'rack-canonical-host', '0.0.8'\ngem 'devise', '2.2.3'\ngem 'omniauth', '1.1.3'\ngem 'omniauth-facebook', '1.4.1'\ngem 'omniauth-yahoo', '0.0.4'\ngem 'omniauth-google-oauth2', '0.1.13'\ngem 'mailjet', '0.0.3'\ngem 'asset_sync', '0.5.4'\ngem 'sprockets-image_compressor', '0.2.0'\ngem 'newrelic_rpm', '3.5.5.38'\ngem 'pg', '0.14.1'\ngem 'jquery-rails', '2.2.1'\ngem 'filepicker-rails', '0.0.2'\ngem 'ranked-model', '0.2.0'\ngem 'activemerchant', '1.31.1'\ngem \"workless\", \"~> 1.1.1\"\ngem 'delayed_job_active_record', '0.3.2'\ngem 'mobylette', '3.3.2'\ngem 'ancestry', '1.3.0'\ngem 'aws-s3', '0.6.3'\ngem 'exception_notification', '3.0.1'\ngem 'pdfkit', '0.5.3'\ngem 'rubyzip', '0.9.9'\ngem 'friendly_id', '4.0.9'\ngem 'mailboxer', '0.10.2'\ngem 'amoeba', '2.0.0'\ngem 'sitemap_generator', '4.0.1'\ngem 'carrierwave', '0.6.2'\ngem 'forem', :git => \"git://github.com/radar/forem.git\"\ngem 'rack-iframe'\ngem \"recaptcha\", '0.3.5', :require => \"recaptcha/rails\"\ngroup :development do\n  gem 'thin', '1.5.1'\nend\nGems used only for assets and not required\nin production environments by default.\ngroup :assets do\n  gem 'sass-rails',   '3.2.5'\n  gem 'coffee-rails', '3.2.2'\n  gem 'uglifier', '1.2.3'\n  gem 'yui-compressor', '0.9.6'\nend\ngroup :production do\nend\n```\nGemfile.lock:\n```\nGIT\n  remote: git://github.com/radar/forem.git\n  revision: 2b3199e333820280a683be72d4e5d28019167ff9\n  specs:\n    forem (1.0.0.beta1)\n      cancan (= 1.6.10)\n      decorators (~> 1.0.2)\n      forem-redcarpet (= 1.0.0)\n      friendly_id (~> 4.0, >= 4.0.9)\n      gemoji (= 1.1.2)\n      localeapp\n      rails (>= 3.1.10, < 3.3, != 3.2.9, != 3.2.8, != 3.2.7, != 3.2.6, != 3.2.5, != 3.2.4, != 3.2.3, != 3.2.2, != 3.2.10, != 3.2.1, != 3.2.0)\n      simple_form\n      workflow (= 0.8.0)\nGEM\n  remote: https://rubygems.org/\n  specs:\n    POpen4 (0.1.4)\n      Platform (>= 0.4.0)\n      open4\n    Platform (0.4.0)\n    actionmailer (3.2.13)\n      actionpack (= 3.2.13)\n      mail (~> 2.5.3)\n    actionpack (3.2.13)\n      activemodel (= 3.2.13)\n      activesupport (= 3.2.13)\n      builder (~> 3.0.0)\n      erubis (~> 2.7.0)\n      journey (~> 1.0.4)\n      rack (~> 1.4.5)\n      rack-cache (~> 1.2)\n      rack-test (~> 0.6.1)\n      sprockets (~> 2.2.1)\n    active_utils (1.0.5)\n      activesupport (>= 2.3.11)\n      i18n\n    activemerchant (1.31.1)\n      active_utils (>= 1.0.2)\n      activesupport (>= 2.3.14)\n      builder (>= 2.0.0)\n      i18n\n      json (>= 1.5.1)\n      money\n      nokogiri\n    activemodel (3.2.13)\n      activesupport (= 3.2.13)\n      builder (~> 3.0.0)\n    activerecord (3.2.13)\n      activemodel (= 3.2.13)\n      activesupport (= 3.2.13)\n      arel (~> 3.0.2)\n      tzinfo (~> 0.3.29)\n    activeresource (3.2.13)\n      activemodel (= 3.2.13)\n      activesupport (= 3.2.13)\n    activesupport (3.2.13)\n      i18n (= 0.6.1)\n      multi_json (~> 1.0)\n    addressable (2.3.4)\n    amoeba (2.0.0)\n      activerecord (>= 3.0)\n    ancestry (1.3.0)\n      activerecord (>= 2.3.14)\n    arel (3.0.2)\n    asset_sync (0.5.4)\n      activemodel\n      fog\n    aws-s3 (0.6.3)\n      builder\n      mime-types\n      xml-simple\n    bcrypt-ruby (3.0.1)\n    bcrypt-ruby (3.0.1-x86-mingw32)\n    blankslate (3.1.2)\n    bootstrap-sass (2.3.1.0)\n      sass (~> 3.2)\n    bootstrap-will_paginate (0.0.6)\n      will_paginate\n    builder (3.0.4)\n    cancan (1.6.10)\n    carrierwave (0.6.2)\n      activemodel (>= 3.2.0)\n      activesupport (>= 3.2.0)\n    coffee-rails (3.2.2)\n      coffee-script (>= 2.2.0)\n      railties (~> 3.2.0)\n    coffee-script (2.2.0)\n      coffee-script-source\n      execjs\n    coffee-script-source (1.6.2)\n    daemons (1.1.9)\n    decorators (1.0.3)\n      railties (>= 3.0.19, != 3.2.9, != 3.2.8, != 3.2.7, != 3.2.6, != 3.2.5, != 3.2.4, != 3.2.3, != 3.2.2, != 3.2.10, != 3.2.1, != 3.2.0, != 3.1.9, != 3.1.8, != 3.1.7, != 3.1.6, != 3.1.5, != 3.1.4, != 3.1.3, != 3.1.2, != 3.1.1, != 3.1.0)\n    delayed_job (3.0.5)\n      activesupport (~> 3.0)\n    delayed_job_active_record (0.3.2)\n      activerecord (> 2.1.0)\n      delayed_job (~> 3.0.0)\n    devise (2.2.3)\n      bcrypt-ruby (~> 3.0)\n      orm_adapter (~> 0.1)\n      railties (~> 3.1)\n      warden (~> 1.2.1)\n    erubis (2.7.0)\n    eventmachine (1.0.3)\n    eventmachine (1.0.3-x86-mingw32)\n    exception_notification (3.0.1)\n      actionmailer (>= 3.0.4)\n    excon (0.22.1)\n    execjs (1.2.4)\n      multi_json (~> 1.0)\n    faraday (0.8.7)\n      multipart-post (~> 1.1)\n    fattr (2.2.1)\n    ffi (1.0.11)\n    filepicker-rails (0.0.2)\n      railties (>= 3.1.0, < 5.0)\n    fog (1.11.1)\n      builder\n      excon (~> 0.20)\n      formatador (~> 0.2.0)\n      json (~> 1.7)\n      mime-types\n      net-scp (~> 1.1)\n      net-ssh (>= 2.1.3)\n      nokogiri (~> 1.5.0)\n      ruby-hmac\n    foreigner (1.4.1)\n      activerecord (>= 3.0.0)\n    forem-redcarpet (1.0.0)\n      pygments.rb (= 0.2.4)\n      redcarpet (= 2.0.1)\n    formatador (0.2.4)\n    friendly_id (4.0.9)\n    gemoji (1.1.2)\n    gli (2.5.6)\n    hashie (1.2.0)\n    heroku-api (0.3.11)\n      excon (~> 0.22.1)\n    hike (1.2.2)\n    httpauth (0.2.0)\n    i18n (0.6.1)\n    journey (1.0.4)\n    jquery-rails (2.2.1)\n      railties (>= 3.0, < 5.0)\n      thor (>= 0.14, < 2.0)\n    json (1.8.0)\n    jwt (0.1.8)\n      multi_json (>= 1.5)\n    localeapp (0.6.9)\n      gli\n      i18n\n      json\n      rest-client\n      ya2yaml\n    mail (2.5.4)\n      mime-types (~> 1.16)\n      treetop (~> 1.4.8)\n    mailboxer (0.10.2)\n      carrierwave (>= 0.5.8)\n      foreigner (>= 0.9.1)\n      rails (> 3.0.0)\n    mailjet (0.0.3)\n      activesupport (>= 3.1.0)\n    mime-types (1.23)\n    mobylette (3.3.2)\n      actionpack (>= 3.0)\n    money (5.1.1)\n      i18n (~> 0.6.0)\n    multi_json (1.7.4)\n    multipart-post (1.2.0)\n    net-scp (1.1.1)\n      net-ssh (>= 2.6.5)\n    net-ssh (2.6.7)\n    newrelic_rpm (3.5.5.38)\n    nokogiri (1.5.9)\n    nokogiri (1.5.9-x86-mingw32)\n    oauth (0.4.7)\n    oauth2 (0.8.1)\n      faraday (~> 0.8)\n      httpauth (~> 0.1)\n      jwt (~> 0.1.4)\n      multi_json (~> 1.0)\n      rack (~> 1.2)\n    omniauth (1.1.3)\n      hashie (~> 1.2)\n      rack\n    omniauth-facebook (1.4.1)\n      omniauth-oauth2 (~> 1.1.0)\n    omniauth-google-oauth2 (0.1.13)\n      omniauth (~> 1.0)\n      omniauth-oauth2\n    omniauth-oauth (1.0.1)\n      oauth\n      omniauth (~> 1.0)\n    omniauth-oauth2 (1.1.1)\n      oauth2 (~> 0.8.0)\n      omniauth (~> 1.0)\n    omniauth-yahoo (0.0.4)\n      omniauth-oauth (~> 1.0)\n    open4 (1.3.0)\n    orm_adapter (0.4.0)\n    pdfkit (0.5.3)\n    pg (0.14.1)\n    pg (0.14.1-x86-mingw32)\n    polyglot (0.3.3)\n    pygments.rb (0.2.4)\n      rubypython (~> 0.5.3)\n    rack (1.4.5)\n    rack-cache (1.2)\n      rack (>= 0.4)\n    rack-canonical-host (0.0.8)\n      addressable\n      rack (~> 1.0)\n    rack-iframe (0.0.3)\n      rack\n    rack-ssl (1.3.3)\n      rack\n    rack-test (0.6.2)\n      rack (>= 1.0)\n    rails (3.2.13)\n      actionmailer (= 3.2.13)\n      actionpack (= 3.2.13)\n      activerecord (= 3.2.13)\n      activeresource (= 3.2.13)\n      activesupport (= 3.2.13)\n      bundler (~> 1.0)\n      railties (= 3.2.13)\n    railties (3.2.13)\n      actionpack (= 3.2.13)\n      activesupport (= 3.2.13)\n      rack-ssl (~> 1.3.2)\n      rake (>= 0.8.7)\n      rdoc (~> 3.4)\n      thor (>= 0.14.6, < 2.0)\n    rake (10.0.4)\n    ranked-model (0.2.0)\n      activerecord (>= 3.0.3)\n    rdoc (3.12.2)\n      json (~> 1.4)\n    recaptcha (0.3.5)\n    redcarpet (2.0.1)\n    rest-client (1.6.7)\n      mime-types (>= 1.16)\n    ruby-hmac (0.4.0)\n    rubypython (0.5.3)\n      blankslate (>= 2.1.2.3)\n      ffi (~> 1.0.7)\n    rubyzip (0.9.9)\n    rush (0.6.8)\n      session\n    sass (3.2.9)\n    sass-rails (3.2.5)\n      railties (~> 3.2.0)\n      sass (>= 3.1.10)\n      tilt (~> 1.3)\n    session (3.1.0)\n      fattr\n    simple_form (2.1.0)\n      actionpack (~> 3.0)\n      activemodel (~> 3.0)\n    sitemap_generator (4.0.1)\n      builder\n    sprockets (2.2.2)\n      hike (~> 1.2)\n      multi_json (~> 1.0)\n      rack (~> 1.0)\n      tilt (~> 1.1, != 1.3.0)\n    sprockets-image_compressor (0.2.0)\n      sprockets\n    thin (1.5.1)\n      daemons (>= 1.0.9)\n      eventmachine (>= 0.12.6)\n      rack (>= 1.0.0)\n    thor (0.18.1)\n    tilt (1.4.1)\n    treetop (1.4.12)\n      polyglot\n      polyglot (>= 0.3.1)\n    tzinfo (0.3.37)\n    uglifier (1.2.3)\n      execjs (>= 0.3.0)\n      multi_json (>= 1.0.2)\n    warden (1.2.1)\n      rack (>= 1.0)\n    will_paginate (3.0.3)\n    workflow (0.8.0)\n    workless (1.1.2)\n      delayed_job (>= 2.0.7)\n      heroku-api\n      rails\n      rush\n    xml-simple (1.1.2)\n    ya2yaml (0.31)\n    yui-compressor (0.9.6)\n      POpen4 (>= 0.1.4)\nPLATFORMS\n  x86-mingw32\nDEPENDENCIES\n  activemerchant (= 1.31.1)\n  amoeba (= 2.0.0)\n  ancestry (= 1.3.0)\n  asset_sync (= 0.5.4)\n  aws-s3 (= 0.6.3)\n  bcrypt-ruby (= 3.0.1)\n  bootstrap-sass (= 2.3.1.0)\n  bootstrap-will_paginate (= 0.0.6)\n  carrierwave (= 0.6.2)\n  coffee-rails (= 3.2.2)\n  delayed_job_active_record (= 0.3.2)\n  devise (= 2.2.3)\n  exception_notification (= 3.0.1)\n  execjs (= 1.2.4)\n  filepicker-rails (= 0.0.2)\n  forem!\n  friendly_id (= 4.0.9)\n  jquery-rails (= 2.2.1)\n  mailboxer (= 0.10.2)\n  mailjet (= 0.0.3)\n  mobylette (= 3.3.2)\n  newrelic_rpm (= 3.5.5.38)\n  omniauth (= 1.1.3)\n  omniauth-facebook (= 1.4.1)\n  omniauth-google-oauth2 (= 0.1.13)\n  omniauth-yahoo (= 0.0.4)\n  pdfkit (= 0.5.3)\n  pg (= 0.14.1)\n  rack-canonical-host (= 0.0.8)\n  rack-iframe\n  rails (= 3.2.13)\n  ranked-model (= 0.2.0)\n  recaptcha (= 0.3.5)\n  rubyzip (= 0.9.9)\n  sass-rails (= 3.2.5)\n  sitemap_generator (= 4.0.1)\n  sprockets-image_compressor (= 0.2.0)\n  thin (= 1.5.1)\n  uglifier (= 1.2.3)\n  unicorn (= 4.4.0)\n  will_paginate (= 3.0.3)\n  workless (~> 1.1.1)\n  yui-compressor (= 0.9.6)\n```\n. ",
    "jayroh": "Just noticed this: https://github.com/radar/forem/wiki/Installing---Upgrading#application-route-helpers\nCurious as to whether you guys think this could be mitigated with the approach above.\n. Ah-ha! I suspected as much!  Thank you @ascendbruce \nI feel like that's something a little more important to be tucked away in the wiki. For someone who knows ruby well enough it's not a big deal but for a relative novice it might not be as obvious.\n. ",
    "caseydierking": "Is this still on the radar? I have been running into this issue all day long today and I can't figure it out. No matter what I do, I get\nundefined method `path' for nil:NilClass\n       (in /tmp/build_2tohubvkc1ofw/vendor/bundle/ruby/2.0.0/bundler/gems/forem-dd93de69b820/app/assets/javascripts/forem.js.erb)\nwhenever trying to deploy to heroku.\n. Radar, I gave you access on heroku. Also, here is the github for the site. https://github.com/MisterOptimist/timesheet_app\nI have\nruby\nconfig.assets.initialize_on_precompile = false\nin my /application.rb file.\nthe full stack trace is this.\n-----> Preparing app for Rails asset pipeline\n       Running: rake assets:precompile\n       rake aborted!\n       undefined method `path' for nil:NilClass\n       (in /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/bundler/gems/forem-dd93de69b820/app/assets/javascripts/forem.js.erb)\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/bundler/gems/forem-dd93de69b820/lib/forem.rb:22:in `base_path'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/bundler/gems/forem-dd93de69b820/app/assets/javascripts/forem.js.erb:4:in `block in singleton class'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/bundler/gems/forem-dd93de69b820/app/assets/javascripts/forem.js.erb:-5:in `instance_eval'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/bundler/gems/forem-dd93de69b820/app/assets/javascripts/forem.js.erb:-5:in `singleton class'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/bundler/gems/forem-dd93de69b820/app/assets/javascripts/forem.js.erb:-7:in `__tilt_70253086580360'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/tilt-1.4.1/lib/tilt/template.rb:170:in `call'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/tilt-1.4.1/lib/tilt/template.rb:170:in `evaluate'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/tilt-1.4.1/lib/tilt/template.rb:103:in `render'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/context.rb:193:in `block in evaluate'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/context.rb:190:in `each'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/context.rb:190:in `evaluate'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/processed_asset.rb:12:in `initialize'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/base.rb:249:in `new'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/base.rb:249:in `block in build_asset'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/base.rb:270:in `circular_call_protection'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/base.rb:248:in `build_asset'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/index.rb:93:in `block in build_asset'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/caching.rb:19:in `cache_asset'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/index.rb:92:in `build_asset'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/base.rb:169:in `find_asset'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/index.rb:60:in `find_asset'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/processed_asset.rb:111:in `block in resolve_dependencies'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/processed_asset.rb:105:in `each'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/processed_asset.rb:105:in `resolve_dependencies'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/processed_asset.rb:97:in `build_required_assets'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/processed_asset.rb:16:in `initialize'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/base.rb:249:in `new'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/base.rb:249:in `block in build_asset'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/base.rb:270:in `circular_call_protection'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/base.rb:248:in `build_asset'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/index.rb:93:in `block in build_asset'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/caching.rb:19:in `cache_asset'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/index.rb:92:in `build_asset'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/base.rb:169:in `find_asset'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/index.rb:60:in `find_asset'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/bundled_asset.rb:16:in `initialize'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/base.rb:252:in `new'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/base.rb:252:in `build_asset'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/index.rb:93:in `block in build_asset'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/caching.rb:19:in `cache_asset'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/index.rb:92:in `build_asset'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/base.rb:169:in `find_asset'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/index.rb:60:in `find_asset'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/actionpack-3.2.13/lib/sprockets/static_compiler.rb:19:in `block in compile'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/base.rb:219:in `block in each_logical_path'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/base.rb:206:in `block (2 levels) in each_file'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/base.rb:196:in `each'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/base.rb:196:in `each_entry'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/base.rb:204:in `block in each_file'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/base.rb:203:in `each'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/base.rb:203:in `each_file'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/sprockets-2.2.2/lib/sprockets/base.rb:217:in `each_logical_path'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/actionpack-3.2.13/lib/sprockets/static_compiler.rb:18:in `compile'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/actionpack-3.2.13/lib/sprockets/assets.rake:56:in `internal_precompile'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/actionpack-3.2.13/lib/sprockets/assets.rake:70:in `block (3 levels) in <top (required)>'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/actionpack-3.2.13/lib/sprockets/assets.rake:60:in `block (3 levels) in <top (required)>'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/actionpack-3.2.13/lib/sprockets/assets.rake:23:in `invoke_or_reboot_rake_task'\n       /tmp/build_1pltvxkbuvdq9/vendor/bundle/ruby/2.0.0/gems/actionpack-3.2.13/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'\n       Tasks: TOP => assets:precompile:primary\n. I did what @parndt recommended and it seems to be working. It kinda feels like a hack though to me. I wish I didn't have to precompile it everytime I sent it up to heroku.\nHowever, I just checked and you do have access. Feel free to upload the code you have. I wouldn't mind seeing how you fixed it. Thanks Radar!\n. That, and my javascript datepicker doesn't work now with the precompile.\nbut thats not a forem issue. :)\nOnce again thank you guys for your help. I'm still learning rails.\nOn Mon, Jul 22, 2013 at 6:27 AM, Ryan Bigg notifications@github.com wrote:\n\n@MisterOptimist https://github.com/MisterOptimist I am unable to access\nthat application on Heroku. I don't see it in my list of applications when\nI am signed in to Heroku, and I am unable to push to that Git repo. Could\nyou please double check that I have permission to access that?\nThank you.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/issues/437#issuecomment-21319210\n.\n. Could you push the code you deployed to heroku to github for me? I'm having issues with getting mine to work.\n\nI think I might have borked something in the midst of trying to get it to deploy correctly before.\nEDIT: Scratch that Radar. Don't do this. I fixed the issue. Thanks for your help!\n. I thought I'd leave a little more detailed way I installed it.\nFirst, I included this in my gemfile.\ngem 'forem', :github => \"radar/forem\"\ngem 'forem-bootstrap', :github => \"radar/forem-bootstrap\"\nI then ran bundle install.\nI included this in my CSS file. *= require \"forem/bootstrap/style\"\nAnd I get no styling. The functionality works, but the styling doesn't. \n. I answered my own question. Apparantly I grabbed everything right before you updated it today. I updated it and it all works great :).\n. I could be wrong in this, but have you tried not requiring *= require \"forem/bootstrap/style\", updating the forem gem, and then trying again?\nIf memory serves me right, I think thats all I had to end up doing. Forem should come with bootstrap theme already if I'm not mistaken.\n. ",
    "kiranfractal": "@NathanTheBook, what is that status of badge implementation ?\n. ",
    "AustinLMayes": "@kiranfractal I created this for a private about a year ago. Since the code is private I am afraid I can't post here, I can give the steps I took if someone else wants to implement.\nI gave each group a  priority, badge color, and badge background field\nI added a method to group to sort by priority\nI added a method to user to get all groups by priority\nI looped through each in a partial extracting the text and background color and using the group's name for the text.\nIf someone wants to implement, make a new issue.\n. ",
    "jugyo": "BTW, Is it OK that we can delete category which still have topic?\n. Sorry, I meant forum, not topic.\n. That makes sense. Thanks.\n. LGTM, thanks!\n. Exactly, thanks.\n. I think using name field directly is not bad as well as you expect user model has the email field.\nAnyway it seems trivial so feel free to ignore this opinion.\n. I like HAML :sunglasses:. Thank you for merging very quickly :+1: \n. I'm sorry for your ` :P\n. thanks :smile: \n. ",
    "AndorChen": ":+1: \n. ",
    "x3qt": "Upvote for keep using to_s\n. @radar :+1: \n. :+1: \n. ",
    "link-er": "Have the same problem with select2\nI see in source files, that it's required in application.js of forem app, but I don't see that it's loaded when my app is running\n. https://github.com/link-er/check_project\nHere are you\n. adding  :find_by => :slug in load_and_authorize_resource :class => 'Forem::Forum', :only => :show\n in controller cures the problem (the same in categories controller)\nshall I make pull request or you can help?\n. Error on install seems to be happened because nothing was wrote to my User model\nAs I can see in lib/forem.rb file, there is a method for decorating model, but... smth went wrong\nP.S. can you please tell me what else has to be done on generator install, maybe there is anything else missing\n. ",
    "Rishi91991": "Hi All,\nSorry for the delay. Well I am released from that project so I don't have code-base access. I solved that problem by including all JS files and CSS files of forem gem in my app's app/assets.\nThanks.\n. ",
    "tomkrus": "In this point I tried add some my name to the categories:\nresources :categories, :as => \"/kategorien\", :only => [:index, :show]\nResult:\nundefined methodcategory_path' for #`\n<%= link_to forem_emojify(category.name), [forem, category] %>\n(rails4)\nAny tips?\n. ",
    "yas375": "@radar @parndt any updates on this? I'd like to work on #533, but tests are failing to me :(\nsh\ngit clone git@github.com:radar/forem.git\ncd forem\nchruby ruby-2.0.0-p353\nbundle\nrake forem:dummy_app\nrspec spec\nTest run output:\n```\n\u279c  forem git:(rails4) rspec spec\nDEPRECATION WARNING: Calling after_create is deprecated; use the syntax after(:create) {}. (called from block (3 levels) in  at /Users/yas/code/forem/lib/forem/testing_support/factories/topics.rb:9)\n[deprecated] I18n.enforce_available_locales will default to true in the future. If you really want to skip validation of your locale you can set I18n.enforce_available_locales = false to avoid this message.\n...........................................................................F......................................................................................................................F.........................\nFailures:\n1) Forem::Forum is scoped by default\n     Failure/Error: Forem::Forum.all.to_sql.should =~ /ORDER BY name ASC/\n       expected: /ORDER BY name ASC/\n            got: \"SELECT \\\"forem_forums\\\". FROM \\\"forem_forums\\\"   ORDER BY \\\"forem_forums\\\".name ASC\" (using =~)\n       Diff:\n       @@ -1,2 +1,2 @@\n       -/ORDER BY name ASC/\n       +\"SELECT \\\"forem_forums\\\". FROM \\\"forem_forums\\\"   ORDER BY \\\"forem_forums\\\".name ASC\"\n # ./spec/models/forum_spec.rb:11:in `block (2 levels) in <top (required)>'\n\n2) topics signed in creating a topic is valid with subject and post text\n     Failure/Error: assert_seen(\"forem_user\", :within => :post_user)\n     Capybara::Ambiguous:\n       Ambiguous match, found 2 elements matching css \"#posts .post .user\"\n     # ./spec/support/capybara_ext.rb:16:in assert_seen'\n     # ./spec/features/topics_spec.rb:33:inblock (4 levels) in '\nFinished in 15.17 seconds\n220 examples, 2 failures\nFailed examples:\nrspec ./spec/models/forum_spec.rb:10 # Forem::Forum is scoped by default\nrspec ./spec/features/topics_spec.rb:25 # topics signed in creating a topic is valid with subject and post text\nRandomized with seed 48531\n\u279c  forem git:(rails4)\n```\nAlso I've tried first using ruby 2.1, but got the same.\nIf this PR fixes failing tests it would be great if it can be merged in soon so I can work on #533. Thanks in advance!\n. @parndt thanks! But I'm a little confused what branch should I use... Looks like rails4 branch is set as default branch on Github and I was using it. But you've merged the commit into master only. And I see there is a lot of differences between master and rails4. Could you please explain me how do you work with different branches and what features are going into each of them? Thanks in advance.\nI'm interested in Rails 4.\n. According to Travis CI report one of the failures I was is fixed, but another one is not. \n1) topics signed in creating a topic is valid with subject and post text\n     Failure/Error: assert_seen(\"forem_user\", :within => :post_user)\n     Capybara::Ambiguous:\n       Ambiguous match, found 2 elements matching css \"#posts .post .user\"\n     # ./spec/support/capybara_ext.rb:16:in `assert_seen'\n     # ./spec/features/topics_spec.rb:33:in `block (4 levels) in <top (required)>'\nI've investigated the problem a little (did the same in web browser to see the HTML output) and here is what I get:\n\nThe error is that the user is shown twice.\n. @bodrovis just saw your comment. Yep, you are right :)\n. @bodrovis thanks a lot!\n. @radar would be happy to :)\n. @radar I've just started working on this (don't have a lot progress yet), but have noticed ryanb/cancan#994 issue opened less than a day ago. Looks like cancancan comes for the rescue. At least that issues says it. So before I went deeply in switching Forem from cancan to pundit, I'd like to confirm if we still prefer this direction. \nPersonally my opinion - let's switch to pundit. I like its api more.\n. @radar ok :)\n. @radar I'm sorry. Don't have a lot of progress (I need this for my project which is not my primary job). Last time I've tried to work on this again tests were failing again in different places so I've started looking into those issues, but didn't spent a lot of time on this.\nIf you don't mind about the time I would be glad to keep this assigned on me and hope to get to this on next weekend. Thanks and sorry for the delay.\n. @bodrovis thanks for the fixes!\nWould be nice to squash 4 last commits into one before merging in. No need to have in git history adding and removing of .idea/ folder ;)\nsh\ngit rebase origin/rails4 -i # squash and/or remove unnecessary commits\ngit push --force\nPlease let me know if you need further help with the cleanup. I'd be happy to help.\n. @bodrovis no worries. thank you! :)\n. :+1: only jruby tests are failing, but they are failing because of some other error. :shipit: \n. @cnaize you could define model classes for your vBulleting objects and theirs relationships. Probably you will need to define foreign keys and other fields which you don't usually need to specify in rails because of rails' conventions. For example in rails you probably have user_id field to store id of the user, but in other systems (i.e. vBulletin) it might be called uid or something else.\nWhen you have all needed models defined you could write a rake task which will connect tot vBulletin's database and read all objects and create appropriate objects in your rails application.\nAlternatively you could make sql requests to vBulletin's database instead of defining models. But I prefer to manipulate objects instead of plain data.\n. Maybe let's use /ORDER BY .forem_forums.\\.name ASC/?\nSome builds on travis ci reported as broken and looks like it's because of to_sql uses different for different database drivers:\n``\n 1) Forem::Forum is scoped by default\n     Failure/Error: Forem::Forum.all.to_sql.should =~ /ORDER BY \\\"forem_forums\\\"\\.name ASC/\n       expected: /ORDER BY \\\"forem_forums\\\"\\.name ASC/\n            got: \"SELECTforem_forums.* FROMforem_forumsORDER BYforem_forums.name ASC\" (using =~)\n       Diff:\n       @@ -1,2 +1,2 @@\n       -/ORDER BY \\\"forem_forums\\\"\\.name ASC/\n       +\"SELECTforem_forums.* FROMforem_forumsORDER BYforem_forums`.name ASC\"\n # ./spec/models/forum_spec.rb:11:in `block (2 levels) in <top (required)>'\n\n```\n. It's for mysql for ruby 2.0 and 1.9. I have no idea why builds with jruby fail.\n. @bodrovis tests on TravisCI with mysql are still fail: https://travis-ci.org/radar/forem/jobs/19029378\nThe use of /ORDER BY .forem_forums.\\.name ASC/ should fix the error because dot is matches as any character. So it would be ok with \" (postgres, sqlite) and \"\" (mysql). Does make sense?\n. Should it be[\u0443\u0434\u0430\u043b\u0435\u043d\u043e]`?\n. ",
    "kekiefer": "Regarding the id=default bug here, you should use nukturnal/cancan, which fixes the friendly_id 5 issue as @parndt mentioned. You could also fix the issue by modifying the forem model finders (https://github.com/kekiefer/forem/commit/c7717ffab3bb6a8a654c27adfc4f8bb22bea24d7).\n. Sorry, all, I missed the root cause here fixed through nukturnal/cancan, specifically https://github.com/nukturnal/cancan/commit/a606378912e75d6b62f8257ffa5b4c5f2023760b\nIf for some reason you don't want to use nukturnal/cancan (and you don't use friendly_id in your project for other stuff), this commit will work around the issue.\n. ",
    "Senjai": "Following Ryan's multitenancy book, I also get this error message trying to follow his book.\n\u279c  hosted_forums git:(master) rails g forem:install\nCopying over Forem migrations...\nWhat is your user class called? [User] Subscribem::User\nWhat is the current_user helper called in your app? [current_user] \nDefining forem_user method inside ApplicationController...\n      insert  app/controllers/application_controller.rb\nAdding forem initializer (config/initializers/forem.rb)...\n      create  config/initializers/forem.rb\nRunning rake db:migrate\nCreating default forum and topic\n/home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activemodel-4.0.0/lib/active_model/attribute_methods.rb:436:in `method_missing': undefined method `forem_moderate_posts?' for #<Subscribem::User:0x000000043ec070> (NoMethodError)\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/attribute_methods.rb:131:in `method_missing'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/bundler/gems/forem-f34fb3d65583/app/models/forem/post.rb:112:in `skip_pending_review'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:387:in `_run__4601936645212624803__create__callbacks'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/callbacks.rb:303:in `create_record'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/timestamp.rb:57:in `create_record'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/persistence.rb:466:in `create_or_update'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/callbacks.rb:299:in `block in create_or_update'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:413:in `_run__4601936645212624803__save__callbacks'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/callbacks.rb:299:in `create_or_update'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/persistence.rb:106:in `save'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/validations.rb:51:in `save'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/attribute_methods/dirty.rb:32:in `save'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/transactions.rb:270:in `block (2 levels) in save'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/transactions.rb:326:in `block in with_transaction_returning_status'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/connection_adapters/abstract/database_statements.rb:200:in `transaction'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/transactions.rb:209:in `transaction'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/transactions.rb:323:in `with_transaction_returning_status'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/transactions.rb:270:in `block in save'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/transactions.rb:281:in `rollback_active_record_state!'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/transactions.rb:269:in `save'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/associations/has_many_association.rb:39:in `insert_record'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/autosave_association.rb:348:in `block in save_collection_association'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/autosave_association.rb:339:in `each'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/autosave_association.rb:339:in `save_collection_association'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/autosave_association.rb:183:in `block in add_autosave_association_callbacks'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/autosave_association.rb:153:in `instance_eval'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/autosave_association.rb:153:in `block in define_non_cyclic_method'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:383:in `_run__934894413692714415__create__callbacks'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/callbacks.rb:303:in `create_record'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/timestamp.rb:57:in `create_record'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/persistence.rb:466:in `create_or_update'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/callbacks.rb:299:in `block in create_or_update'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:413:in `_run__934894413692714415__save__callbacks'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/callbacks.rb:299:in `create_or_update'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/persistence.rb:128:in `save!'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/validations.rb:57:in `save!'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/attribute_methods/dirty.rb:41:in `save!'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/transactions.rb:275:in `block in save!'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/transactions.rb:326:in `block in with_transaction_returning_status'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/connection_adapters/abstract/database_statements.rb:202:in `block in transaction'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/connection_adapters/abstract/database_statements.rb:210:in `within_new_transaction'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/connection_adapters/abstract/database_statements.rb:202:in `transaction'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/transactions.rb:209:in `transaction'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/transactions.rb:323:in `with_transaction_returning_status'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activerecord-4.0.0/lib/active_record/transactions.rb:275:in `save!'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/bundler/gems/forem-f34fb3d65583/db/seeds.rb:17:in `<top (required)>'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activesupport-4.0.0/lib/active_support/dependencies.rb:222:in `load'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activesupport-4.0.0/lib/active_support/dependencies.rb:222:in `block in load'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activesupport-4.0.0/lib/active_support/dependencies.rb:213:in `load_dependency'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activesupport-4.0.0/lib/active_support/dependencies.rb:222:in `load'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/railties-4.0.0/lib/rails/engine.rb:540:in `load_seed'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/railties-4.0.0/lib/rails/railtie/configurable.rb:30:in `method_missing'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/bundler/gems/forem-f34fb3d65583/lib/generators/forem/install_generator.rb:68:in `seed_database'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/thor-0.18.1/lib/thor/command.rb:27:in `run'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/thor-0.18.1/lib/thor/invocation.rb:120:in `invoke_command'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/thor-0.18.1/lib/thor/invocation.rb:127:in `block in invoke_all'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/thor-0.18.1/lib/thor/invocation.rb:127:in `each'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/thor-0.18.1/lib/thor/invocation.rb:127:in `map'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/thor-0.18.1/lib/thor/invocation.rb:127:in `invoke_all'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/thor-0.18.1/lib/thor/group.rb:233:in `dispatch'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/thor-0.18.1/lib/thor/base.rb:439:in `start'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/railties-4.0.0/lib/rails/generators.rb:156:in `invoke'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/railties-4.0.0/lib/rails/commands/generate.rb:11:in `<top (required)>'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activesupport-4.0.0/lib/active_support/dependencies.rb:228:in `require'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activesupport-4.0.0/lib/active_support/dependencies.rb:228:in `block in require'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activesupport-4.0.0/lib/active_support/dependencies.rb:213:in `load_dependency'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/activesupport-4.0.0/lib/active_support/dependencies.rb:228:in `require'\n        from /home/richard/.rvm/gems/ruby-2.0.0-p247@rails4/gems/railties-4.0.0/lib/rails/commands.rb:49:in `<top (required)>'\n        from bin/rails:4:in `require'\n        from bin/rails:4:in `<main>'\n. ",
    "bobbdelsol": "I also got the forem_moderate_posts? method not defined error\n/Users/bobby/.gem/ruby/2.0.0/gems/activemodel-4.0.2/lib/active_model/attribute_methods.rb:439:in method_missing': undefined methodforem_moderate_posts?' for #User:0x007f96e654eed8 (NoMethodError)\nSecond run no-problem,  Things seem to work, so I'm betting an ordering problem in the original migrations set.\n. I don't see a moderator attribute in User\n. ",
    "tigercat": "As far as I know, there are no icons of this type included with the \nforem gem (and the current version provides classes for icons for locked \nand pinned topics - see _topic.html.erb).  For this reason, I didn't try \nto supply a \"hidden\" icon.  These sort of icons currently come with \ntheme gems (see forem-theme-base), so that would be the the place to add \na \"hidden\" icon.\nOn 9/12/13 9:46 PM, Philip Arndt wrote:\n\nSo to confirm we're not supplying an icon?\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/radar/forem/pull/473#issuecomment-24368262.\n. Sorry about the formatting.  Will do it in the future.\n\nI'll look into enhancing the view for topics.\n. Changes are what I want, but want to clean up extraneous files in commit list (should only be 2, not 7).  Will resubmit when I straighten list out.\n. Squashing is done.\n. ",
    "yanismydj": "@radar That was exactly it -- thanks so much dude :+1:  :beer: \n. Sure thing guys.  Sorry, should have been more verbose the first time around.\nForem version: *dba2e783d48e03e7ded04c0653e4b2a6842807de\nRails version: 4.0.0\nRuby version: 2.0.0p195\nSteps to repro\n1. Installed forem gem (added to gemfile, bundle install)\n2. Ran forem installer (rails g forem:install)\n3. gave my user admin access(set the forum_admin boolean to 1/true)\n4. opened /forums\n5. clicked on 'admin area'\n6. clicked 'manage forums'\nBig stack:\n``\nStarted GET \"/admin/forums\" for 127.0.0.1 at 2013-10-03 22:04:47 -0700\nProcessing by Forem::Admin::ForumsController#index as HTML\n  User Load (0.5ms)  SELECTusers.* FROMusersWHEREusers.id= 1 ORDER BYusers.id` ASC LIMIT 1\n  Rendered /Users/ylhert/.rvm/gems/ruby-2.0.0-p195/bundler/gems/forem-dba2e783d48e/app/views/forem/admin/forums/index.html.erb within layouts/application (5.9ms)\nCompleted 500 Internal Server Error in 25ms\nNoMethodError - undefined method synchronize' for nil:NilClass:\n  activerecord (4.0.0) lib/active_record/relation/delegation.rb:48:indelegate'\n  activerecord (4.0.0) lib/active_record/relation/delegation.rb:62:in method_missing'\n   () Users/ylhert/.rvm/gems/ruby-2.0.0-p195/bundler/gems/forem-dba2e783d48e/app/views/forem/admin/forums/index.html.erb:6:insersylhertrvm_gems_ruby_p_bundlergems_forem_dba_e_d__e_app_views_forem_admin_forums_index_html_erb__187340844747023858_70173587889200'\n  actionpack (4.0.0) lib/action_view/template.rb:143:in block in render'\n  activesupport (4.0.0) lib/active_support/notifications.rb:161:ininstrument'\n  actionpack (4.0.0) lib/action_view/template.rb:141:in render'\n  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:inblock (2 levels) in render_template'\n  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in block in instrument'\n  activesupport (4.0.0) lib/active_support/notifications.rb:159:inblock in instrument'\n  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in instrument'\n  activesupport (4.0.0) lib/active_support/notifications.rb:159:ininstrument'\n  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in instrument'\n  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:inblock in render_template'\n  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in render_with_layout'\n  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:inrender_template'\n  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in render'\n  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:inrender_template'\n  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in render'\n  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in_render_template'\n  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in _render_template'\n  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:inrender_to_body'\n  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in render_to_body'\n  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:inrender_to_body'\n  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in render'\n  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:inrender'\n  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in block (2 levels) in render'\n  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:inblock in ms'\n  /Users/ylhert/.rvm/rubies/ruby-2.0.0-p195/lib/ruby/2.0.0/benchmark.rb:296:in realtime'\n  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:inms'\n  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in block in render'\n  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:incleanup_view_runtime'\n  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in cleanup_view_runtime'\n  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:inrender'\n  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in default_render'\n  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:insend_action'\n  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in process_action'\n  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:inprocess_action'\n  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in block in process_action'\n  activesupport (4.0.0) lib/active_support/callbacks.rb:403:in_run__525537953473143050__process_action__callbacks'\n  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in run_callbacks'\n  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:inprocess_action'\n  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in process_action'\n  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:inblock in process_action'\n  activesupport (4.0.0) lib/active_support/notifications.rb:159:in block in instrument'\n  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:ininstrument'\n  activesupport (4.0.0) lib/active_support/notifications.rb:159:in instrument'\n  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:inprocess_action'\n  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in process_action'\n  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:inprocess_action'\n  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in process'\n  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:inprocess'\n  actionpack (4.0.0) lib/action_controller/metal.rb:195:in dispatch'\n  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:indispatch'\n  actionpack (4.0.0) lib/action_controller/metal.rb:231:in block in action'\n  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:indispatch'\n  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in call'\n  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:inblock in call'\n  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in call'\n  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:incall'\n  railties (4.0.0) lib/rails/engine.rb:511:in call'\n  railties (4.0.0) lib/rails/railtie/configurable.rb:30:inmethod_missing'\n  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in block in call'\n  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:incall'\n  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in call'\n  warden (1.2.3) lib/warden/manager.rb:35:inblock in call'\n  warden (1.2.3) lib/warden/manager.rb:34:in call'\n  rack (1.5.2) lib/rack/etag.rb:23:incall'\n  rack (1.5.2) lib/rack/conditionalget.rb:25:in call'\n  rack (1.5.2) lib/rack/head.rb:11:incall'\n  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in call'\n  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:incall'\n  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in context'\n  rack (1.5.2) lib/rack/session/abstract/id.rb:220:incall'\n  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in call'\n  activerecord (4.0.0) lib/active_record/query_cache.rb:36:incall'\n  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in call'\n  activerecord (4.0.0) lib/active_record/migration.rb:369:incall'\n  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in block in call'\n  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in_run__2044880767011409222__call__callbacks'\n  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in run_callbacks'\n  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:incall'\n  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in call'\n  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:incall'\n  better_errors (1.0.1) lib/better_errors/middleware.rb:84:in protected_app_call'\n  better_errors (1.0.1) lib/better_errors/middleware.rb:79:inbetter_errors_call'\n  better_errors (1.0.1) lib/better_errors/middleware.rb:56:in call'\n  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:incall'\n  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in call'\n  railties (4.0.0) lib/rails/rack/logger.rb:38:incall_app'\n  railties (4.0.0) lib/rails/rack/logger.rb:21:in block in call'\n  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:inblock in tagged'\n  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in tagged'\n  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:intagged'\n  railties (4.0.0) lib/rails/rack/logger.rb:21:in call'\n  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:incall'\n  rack (1.5.2) lib/rack/methodoverride.rb:21:in call'\n  rack (1.5.2) lib/rack/runtime.rb:17:incall'\n  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in call'\n  rack (1.5.2) lib/rack/lock.rb:17:incall'\n  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in call'\n  railties (4.0.0) lib/rails/engine.rb:511:incall'\n  railties (4.0.0) lib/rails/application.rb:97:in call'\n  rack (1.5.2) lib/rack/lock.rb:17:incall'\n  rack (1.5.2) lib/rack/content_length.rb:14:in call'\n  rack (1.5.2) lib/rack/handler/webrick.rb:60:inservice'\n  /Users/ylhert/.rvm/rubies/ruby-2.0.0-p195/lib/ruby/2.0.0/webrick/httpserver.rb:138:in service'\n  /Users/ylhert/.rvm/rubies/ruby-2.0.0-p195/lib/ruby/2.0.0/webrick/httpserver.rb:94:inrun'\n  /Users/ylhert/.rvm/rubies/ruby-2.0.0-p195/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'\n```\nSo the actual nil occurs on \"@delegation_mutex.synchronize\", where @delegation_mutex is nil\nhttps://github.com/rails/rails/blob/4-0-stable/activerecord/lib/active_record/relation/delegation.rb#L48\nHowever ultimately the last place Forem code triggers this seems to be here:\nhttps://github.com/radar/forem/blob/master/app/views/forem/admin/forums/index.html.erb#L6\nHope this is more helpful. :beers:\n. This was something weird with my rails install.  I spent a while cleaning up my gemfile, and updating gems, and can no longer reproduce this.  Thanks again for everyones help!\n. I realized this is already addressed in the instructions (\"For Rails 4, you will also need to manually specify these dependencies:\ngem 'friendly_id', github: \"FriendlyId/friendly_id\"\ngem 'cancan', git: \"https://github.com/nukturnal/cancan.git\"\")\n. @mauriciopasquier sure, but I think for the time being, the bootstrap 3 issue needs some lovin\n. @radar hey dude, don't know if you saw it in my original message, but I actually got a head start on this.  It still needs more work but it's at least usable.  I may spend more time on polishing it when I've got more free time.  If someone else wants to pick up where I left off, that would be sweet too!\nyanismydj@cc6bb16\n. No worries amigo!\nI'll send a PR when I'm back at my computer \u263a\nOn Feb 5, 2014 11:09 PM, \"Ryan Bigg\" notifications@github.com wrote:\n\nAh, my bad. It is super early in the morning and I have not remembered\nthat I should read everything within a thread before posting :)\nThanks for beginning the work @yanismydj https://github.com/yanismydj.\nCould you open a PR for this anyway? We can have a branch for these changes\nbased off the PR and then I can make some commits to that branch. Anyone\nelse who wants to submit fixes for it would then be able to submit PRs for\nthat new branch.\nMake sense?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/issues/527#issuecomment-34297905\n.\n. @radar looking good my man, I'm closing this out for now.  Sorry about the hacky fixes earlier, I was just throwing stuff together quickly to try and get past some of the bigger issues I was having.\n. These were hackey fixes just to get started.  I'm closing this because you've made the fixes that work with Bootstrap 3.  Thanks, @radar !\n. \n",
    "dlip": "Ah yes that was it. Even though I had this in the config:\nconfig.action_mailer.raise_delivery_errors = false\nI still needed this\nconfig.action_mailer.default_url_options = { :host => \"example.com\" }\nThanks!\n. ",
    "borisdamato": "@radar Any update? Is there a way I can do this even if you decide not to make it the default route?\nThank you.\n. @parndt It says there are duplicated routes. Could you be more specific please?\nThank you :)\n. @parndt \n/Users/Aselox/.rvm/gems/ruby-2.0.0-p247/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:409:in `add_route': Invalid route name, already in use: 'root'  (ArgumentError)\nAnd it says this with every forem's route I try to change\n. @parndt Here it is: http://pastebin.com/UVwzLy07\n. Any update?\n. ",
    "philiprhoades": "radar,\nI just used the defaults:\n[DEVISE] Devise.use_salt_as_remember_token is deprecated and has no effect. Please remove it.\nCopying over Forem migrations...\nWhat is your user class called? [User] What is the current_user helper called in your app? [current_user] Defining forem_user method inside ApplicationController...\n\u001b[1m\u001b[32m      insert\u001b[0m  app/controllers/application_controller.rb\nAdding forem initializer (config/initializers/forem.rb)...\n\u001b[1m\u001b[32m      create\u001b[0m  config/initializers/forem.rb\nRunning rake db:migrate\n/home/phil/.gem/ruby/gems/activemodel-4.0.0/lib/active_model/attribute_methods.rb:436:in `method_missing': undefined method `forem_moderate_posts?' for #<User:0x00000004e6d698> (NoMethodError)\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/attribute_methods.rb:131:in `method_missing'\n    from /home/phil/.gem/ruby/bundler/gems/forem-f34fb3d65583/app/models/forem/post.rb:112:in `skip_pending_review'\n    from /home/phil/.gem/ruby/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:387:in `_run__4084960174987532839__create__callbacks'\n    from /home/phil/.gem/ruby/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/callbacks.rb:303:in `create_record'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/timestamp.rb:57:in `create_record'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/persistence.rb:466:in `create_or_update'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/callbacks.rb:299:in `block in create_or_update'\n    from /home/phil/.gem/ruby/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:413:in `_run__4084960174987532839__save__callbacks'\n    from /home/phil/.gem/ruby/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/callbacks.rb:299:in `create_or_update'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/persistence.rb:106:in `save'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/validations.rb:51:in `save'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/attribute_methods/dirty.rb:32:in `save'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/transactions.rb:270:in `block (2 levels) in save'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/transactions.rb:326:in `block in with_transaction_returning_status'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/connection_adapters/abstract/database_statements.rb:200:in `transaction'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/transactions.rb:209:in `transaction'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/transactions.rb:323:in `with_transaction_returning_status'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/transactions.rb:270:in `block in save'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/transactions.rb:281:in `rollback_active_record_state!'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/transactions.rb:269:in `save'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/associations/has_many_association.rb:39:in `insert_record'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/autosave_association.rb:348:in `block in save_collection_association'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/autosave_association.rb:339:in `each'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/autosave_association.rb:339:in `save_collection_association'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/autosave_association.rb:183:in `block in add_autosave_association_callbacks'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/autosave_association.rb:153:in `instance_eval'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/autosave_association.rb:153:in `block in define_non_cyclic_method'\n    from /home/phil/.gem/ruby/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:383:in `_run__1987470903435521851__create__callbacks'\n    from /home/phil/.gem/ruby/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/callbacks.rb:303:in `create_record'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/timestamp.rb:57:in `create_record'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/persistence.rb:466:in `create_or_update'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/callbacks.rb:299:in `block in create_or_update'\n    from /home/phil/.gem/ruby/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:413:in `_run__1987470903435521851__save__callbacks'\n    from /home/phil/.gem/ruby/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/callbacks.rb:299:in `create_or_update'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/persistence.rb:128:in `save!'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/validations.rb:57:in `save!'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/attribute_methods/dirty.rb:41:in `save!'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/transactions.rb:275:in `block in save!'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/transactions.rb:326:in `block in with_transaction_returning_status'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/connection_adapters/abstract/database_statements.rb:202:in `block in transaction'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/connection_adapters/abstract/database_statements.rb:210:in `within_new_transaction'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/connection_adapters/abstract/database_statements.rb:202:in `transaction'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/transactions.rb:209:in `transaction'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/transactions.rb:323:in `with_transaction_returning_status'\n    from /home/phil/.gem/ruby/gems/activerecord-4.0.0/lib/active_record/transactions.rb:275:in `save!'\n    from /home/phil/.gem/ruby/bundler/gems/forem-f34fb3d65583/db/seeds.rb:17:in `<top (required)>'\n    from /home/phil/.gem/ruby/gems/activesupport-4.0.0/lib/active_support/dependencies.rb:222:in `load'\n    from /home/phil/.gem/ruby/gems/activesupport-4.0.0/lib/active_support/dependencies.rb:222:in `block in load'\n    from /home/phil/.gem/ruby/gems/activesupport-4.0.0/lib/active_support/dependencies.rb:213:in `load_dependency'\n    from /home/phil/.gem/ruby/gems/activesupport-4.0.0/lib/active_support/dependencies.rb:222:in `load'\n    from /home/phil/.gem/ruby/gems/railties-4.0.0/lib/rails/engine.rb:540:in `load_seed'\n    from /home/phil/.gem/ruby/gems/railties-4.0.0/lib/rails/railtie/configurable.rb:30:in `method_missing'\n    from /home/phil/.gem/ruby/bundler/gems/forem-f34fb3d65583/lib/generators/forem/install_generator.rb:68:in `seed_database'\n    from /home/phil/.gem/ruby/gems/thor-0.18.1/lib/thor/command.rb:27:in `run'\n    from /home/phil/.gem/ruby/gems/thor-0.18.1/lib/thor/invocation.rb:120:in `invoke_command'\n    from /home/phil/.gem/ruby/gems/thor-0.18.1/lib/thor/invocation.rb:127:in `block in invoke_all'\n    from /home/phil/.gem/ruby/gems/thor-0.18.1/lib/thor/invocation.rb:127:in `each'\n    from /home/phil/.gem/ruby/gems/thor-0.18.1/lib/thor/invocation.rb:127:in `map'\n    from /home/phil/.gem/ruby/gems/thor-0.18.1/lib/thor/invocation.rb:127:in `invoke_all'\n    from /home/phil/.gem/ruby/gems/thor-0.18.1/lib/thor/group.rb:233:in `dispatch'\n    from /home/phil/.gem/ruby/gems/thor-0.18.1/lib/thor/base.rb:439:in `start'\n    from /home/phil/.gem/ruby/gems/railties-4.0.0/lib/rails/generators.rb:156:in `invoke'\n    from /home/phil/.gem/ruby/gems/railties-4.0.0/lib/rails/commands/generate.rb:11:in `<top (required)>'\n    from /home/phil/.gem/ruby/gems/activesupport-4.0.0/lib/active_support/dependencies.rb:228:in `require'\n    from /home/phil/.gem/ruby/gems/activesupport-4.0.0/lib/active_support/dependencies.rb:228:in `block in require'\n    from /home/phil/.gem/ruby/gems/activesupport-4.0.0/lib/active_support/dependencies.rb:213:in `load_dependency'\n    from /home/phil/.gem/ruby/gems/activesupport-4.0.0/lib/active_support/dependencies.rb:228:in `require'\n    from /home/phil/.gem/ruby/gems/railties-4.0.0/lib/rails/commands.rb:49:in `<top (required)>'\n    from bin/rails:4:in `require'\n    from bin/rails:4:in `<main>'\nCreating default forum and topic\nThanks!\nPhil.\n. No, just on my laptop - should I put it on GitHub or tgz it and put it somewhere?\nThanks,\nPhil.\n. ",
    "joelhooks": "I'm just adding this here because it shows up when you search for this error. In my case, I have a User, but the name is first_name. To solve for this, I simply used:\nalias_attribute :name, :first_name\non the User.\n. ",
    "adamumc": "Here is a gemfile that reproduces the problem:\nsource 'https://rubygems.org'\ngem 'rails', '4.0.2'\ngem 'mysql2'\ngem 'sass-rails', '~> 4.0.0'\ngem 'uglifier', '>= 1.3.0'\ngem 'coffee-rails', '~> 4.0.0'\ngem 'jquery-rails'\ngem 'turbolinks'\ngem 'jbuilder', '~> 1.2'\ngroup :doc do\n gem 'sdoc', require: false\nend\ngem 'forem', :github => \"radar/forem\", :branch => \"rails4\"\ngem 'forem-bootstrap', :github => \"radar/forem-bootstrap\", :branch => \"master\"\ngem 'devise', '~> 3.2.2'\ngem 'kaminari', '~> 0.15.1'\ngem 'friendly_id', github: \"FriendlyId/friendly_id\"\ngem 'cancan', git: \"https://github.com/nukturnal/cancan.git\"\nStill experiencing this issue as of today's state of things.  Using ruby 2.1, but experienced with 2.0 as well.  This occurs even with the to_s method defined and name defined.\nI am also getting this warning while bundling:\nforem at /home/deploy/.rvm/gems/ruby-2.1.0/bundler/gems/forem-de96cc8b9e17 did not have a valid gemspec.\nThis prevents bundler from installing bins or native extensions, but that may not affect its functionality.\nThe validation message from Rubygems was:\n  duplicate dependency on rails (~> 4.0.0), (= 4.0.0) use:\n    add_runtime_dependency 'rails', '~> 4.0.0', '= 4.0.0'\nI am not very experienced with Ruby yet, but I managed to narrow it down to occurring when forum.rb is not present only.  \nHope this helps find/debug the problem.\n. ",
    "slavajacobson": "Same problem....\nHere's my gem file\nsource 'https://rubygems.org'\ngem 'rails', '4.0.0'\ngem 'sqlite3', group: [:development, :test]\ngem 'pg', group: [:production]\ngem 'sass-rails', '~> 4.0.0'\ngem 'uglifier', '>= 1.3.0'\ngem 'coffee-rails', '~> 4.0.0'\ngem 'jquery-rails'\ngem 'turbolinks'\ngem 'jbuilder', '~> 1.2'\ngroup :doc do\ngem 'sdoc', require: false\nend\ngem 'unicorn'\ngem 'capistrano', group: :development\ngem 'debugger', group: [:development, :test]\ngem 'rvm-capistrano'\ngem 'devise'\ngem 'foundation-rails'\ngem 'figaro'\ngem 'whenever', :require => false\ngem 'fancybox2-rails', '~> 0.2.4'\ngroup :development, :test do\n    gem 'railroady'\nend\ngem \"font-awesome-rails\"\ngem \"jquery-validation-rails\"\ngem \"browser\"\ngem 'forem', :github => \"radar/forem\", :branch => \"rails4\"\ngem 'kaminari', '0.15.1'\n. @bricker thank you. that worked. except that I also had to do rake db:drop / rake db:migrate berore running forem install\n. ",
    "bricker": "@radar @slavajacobson reproducible app, (long-winded) explanation, and temporary work-around for this error is here: https://github.com/bricker/forem-generator-error . Pull request imminent.\n. Heh, thanks @bodrovis \n. ",
    "zzak": "@radar welcome! :heart: \n. ",
    "hfoxy": "@radar: Here you go http://pastebin.com/rsXnEM1W\n. Oh and I forgot to mention, I am running this on Rails 4 from the rails4 branch\n. ",
    "alexcwatt": "I believe that the users are clicking to quote the post, but by the time they click it has already been deleted. #518 should fix.\n. Thanks @bodrovis -- just updated it.\n. @radar Is there anything else I should do with this? Thanks for all your work on forem.\n. You're welcome! Hoping that the Travis builds can be all green again soon...\n. Sure @radar. It may be a while, but it's on the list.\n. @radar I'm not sure how to get rid of all the extra commits... Any tips would be appreciated. Should I just delete my fork and start over?\n. @radar OK, it looks like it mostly worked. Do I need to also find a way to remove the commits that came after mine?\nI really do appreciate the help here, as I'm trying to figure out how to properly use Git and GitHub.\n. @radar Should be ready for merge. I noticed earlier today that the spec I had included had a mistake and was failing. It is fixed now, though some of the jobs in the Travis build still failed for other reasons.\n. @radar Sure, I should have done that.\n1. Create a new topic.\n2. Destroy the user who created the topic.\n3. Attempt to load the topic page. You should see an exception because Topic#set_first_post_user expects Forem.user_class (e.g., User in many applications), not Forem::NilUser.\n. @radar I have (at last) added a regression spec; please let me know if it's what you're looking for. I was not able to reproduce it in exactly the same way, but I think the test captures the issue at a more fundamental level anyway.\n. @hcarver I'm pretty sure #584, which has been merged, should fix this. Please let me know.\n. Good idea. Just updated with c7c5a501f82ac86bb13b2d2ca02ff57624b1289c.\n. ",
    "ecoulthard": "I might have time in a few weeks. I'll give it a try. Thanks.\n. Unfortunately no. I haven't even been able to start. It doesn't look like I\nwill be able to in the near future either. I had been upgrading my website\nto rails 4 before submitting this request. Sunpsot solr somehow broke\ncompletely during the upgrade and nothing I have found will fix it. I have\nseen other people with similar issues on stackoverflow but all of their\nsolutions don't work. It has been very frustrating and has actually put me\noff further developing my site for now. I can comment out all the sunspot\ncode but then I wont have search functionality. I can try thinking sphinx\nbut I don't really want to go to all the trouble I already went through\ngetting solr to work.\nSorry.\nEric Coulthard\nOn Sun, Jan 19, 2014 at 10:14 PM, Ryan Bigg notifications@github.comwrote:\n\n@ecoulthard https://github.com/ecoulthard Any updates on this yet?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/radar/forem/issues/519#issuecomment-32734638\n.\n. \n",
    "lyneux": "Another vote for this functionality.\nIdeally, this would also be implemented site-wide so that a post in any forum would trigger an email notification to subscribers.\nI'm busy integrating Forem into my app (a sports club website). We've a few more high priority things to look at (like getting Forem looking nice with Bootstrap 3) before looking at this.\nGuy\n. Also, I have in my production.rb:\nconfig.action_mailer.raise_delivery_errors = true\nI think this rules out a problem with the mailer?\n. No, nothing. The PostsController redirects straight back to the topic:\nStarted POST \"/forums/announcements/topics/2014-calendars/posts\" for 127.5.98.1 at 2014-09-25 09:15:50 -0400\nProcessing by Forem::PostsController#create as HTML\nParameters: {\"utf8\"=>\"\u2713\", \"authenticity_token\"=>\"ZXCJvo+WxlnZxrEprCX8FFq2SCjxBeB7Qpb8G8Ks6XY=\", \"post\"=>{\"text\"=>\"test8\", \"reply_to_id\"=>\"36125\"}, \"commit\"=>\"Post Reply\", \"forum_id\"=>\"announcements\", \"topic_id\"=>\"2014-calendars\"}\nRedirected to http://membership-lmc.rhcloud.com/forums/announcements/topics/2014-calendars?page=1\n. Bump - anyone any ideas on how to proceed with debugging this? I am running production on Redhat Openshift.\n. ",
    "torasakura": "that's nice, but the unsubscribe link in topic reply email is not working. i get a No route matches [GET] error for unsubscribe url.\n. ",
    "cseydel": "Addition:\nit seems not only this one controller path is broken, all my paths, except for root_path seems to be not recognized anymore.\n. ",
    "Domenoth": "order(:name) seems to work fine (I've confirmed it in Rails 4).\npull request: https://github.com/radar/forem/pull/532\n. Glad to help.\n. ",
    "emacca": "We've got the same problem... https://github.com/lukemesiti/autismconnect\nWe can't currently deploy to heroku because of this.\nI've grepped across the project and can find no instance of image_path anywhere in the code.\nIt's not in our codebase. It doesn't appear to be in forem's codebase either so it's pretty confusing.\n. ",
    "michielboekhoff": "Any news on this issue? I would love to see Forem use Pundit instead of Cancan, too. \n. ",
    "HollowerMan": "@radar First, the bug.\nMy pinned topics are simply not displayed on top of the other topics in my app forum. They are just ordered by date like the others.\nThen, I tried to add a regression test, but there is a behavior I cannot explain.\nMy patched Forem::Topic.by_pinned_or_most_recent_post is defined to:\nForem::Topic.order('forem_topics.pinned DESC').order('forem_topics.last_post_at DESC').order('forem_topics.id')\nSo when I do:\nForem::Topic.by_pinned_or_most_recent_post.order_values\nI expect the following output:\n[\"forem_topics.pinned DESC\", \"forem_topics.last_post_at DESC\", \"forem_topics.id\"]\nThis is working in my application console using the patch I provided here.\nBut this very test fails with bundle exec rspec spec:\nForem::Topic.by_pinned_or_most_recent_post should show topics by pinned then by most recent post\n    Failure/Error: ordering.should == [\"forem_topics.pinned DESC\", \"forem_topics.last_post_at DESC\", \"forem_topics.id\"]\n      expected: [\"forem_topics.pinned DESC\", \"forem_topics.last_post_at DESC\", \"forem_topics.id\"]\n        got: [\"forem_topics.id\", \"forem_topics.last_post_at DESC\", \"forem_topics.pinned DESC\"] (using ==)\n    # ./spec/models/topic_spec.rb:53:in `block (3 levels) in <top (required)>'\nPlease let me know if I can provide more details about those issues.\n. ",
    "hardywu": "@radar that means one has to fork a new clone and reconfig the Gemfile and .gemspec to support new version of Rails, which seems not a safe way to go. All forem variable in the view files would have to be changed to city_forem.\n. ",
    "sabrams86": "Something else I've noticed is that my administrator link still works and I can access the Forem admin menu, but I can't access the actual forums.\n. This is the error listed in the log file:\n`` ruby\nActionController::RoutingError (No route matches {:controller=>\"forem/home\", :class=>\"active\"}):\n  app/views/layouts/application.html.erb:23:in_app_views_layouts_application_html_erb___66823223_31344312'\nRendered c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layou\nt (1.0ms)\n```\nIt mentions line 23 in my application layout, which is:\nruby\n<li><%= link_to 'Home', controller: 'home', action: 'index', class: 'active' %></li>\nIt's just the home link on my navbar.\n. That seems to have solved that problem, but all of my menu links are set up that way, so it just throws the same error on the next link, I'm fairly new to rails, and this is the first gem I'm trying to integrate into my app.  Is the way I have all of my links set up considered incorrect form then?\n. Fantastic, that did the trick.  One more problem now.  My layout is present for the main forums page, as well as when I enter a forum.  However, when I click on a topic, or go to make a new topic, it reverts to the default away from my layout.\n. Never mind, I changed the forem.rb file to just have the single line:\nForem.layout = 'application'\nI'm not sure what the difference is between this and what I have listed above but it worked.\n. I've changed my RVM to 1.9.3 and it has no effect.  When I was getting this error on my development computer, all I had to do was upgrade to rails 3.2.13 from 3.2.1.  I've checked the version, and it's now running 3.2.13.  What else could be causing this error?\n. my gemfile looks like this:\n``` ruby\nsource 'https://rubygems.org'\ngem 'rails', '3.2.13'\nBundle edge Rails instead:\ngem 'rails', :git => 'git://github.com/rails/rails.git'\ngem 'sqlite3'\nGems used only for assets and not required\nin production environments by default.\ngroup :assets do\n  gem 'sass-rails',   '~> 3.2.3'\n  gem 'coffee-rails', '~> 3.2.1'\n# See https://github.com/sstephenson/execjs#readme for more supported runtimes\n  # gem 'therubyracer'\ngem 'uglifier', '>= 1.0.3'\nend\ngem 'jquery-rails'\nTo use ActiveModel has_secure_password\ngem 'bcrypt-ruby', '~> 3.0.0'\nTo use Jbuilder templates for JSON\ngem 'jbuilder'\nUse unicorn as the web server\ngem 'unicorn'\nDeploy with Capistrano\ngem 'capistrano'\nTo use debugger\ngem 'ruby-debug19', :require => 'ruby-debug'\ngem 'delayed_job_active_record'\ngem 'handles_sortable_columns'\ngem 'will_paginate', '~> 3.0.5'\ngem 'forem', :github => \"radar/forem\", :branch => \"rails3\"\ngem 'forem-bootstrap', :github => \"radar/forem-bootstrap\"\n```\n. Isee it is just an error, however the app is just showing the passenger error page suggesting that I run bundle install to fix any issues, and the forem gem is the only gem that is actually different.\n. ",
    "defaye": "Yeah I'm using Devise as well. But adding the line didn't do it for me. Can you show me your config/initializers/assets.rb ?\n. @bodrovis many thanks, I'll check it out :)\n. @bodrovis it is possible that this line in my config/initializers/assets.rb: Rails.application.config.assets.version = '1.0' was preventing my assets being refreshed though I'm not sure. In any case, I removed that line and added Rails.application.config.assets.precompile += %w( forem.css forem.js ) and all is well.\n. ",
    "dsdewhir": "This same issue happens to me locally... the initializer makes the /forum views use my application layout, but once down into /forum/admin it reverts to the forem layout. Thin server and Rails 4.0.3:\nStarted GET \"/forums/admin\" for 127.0.0.1 at 2014-04-03 13:01:08 -0400\nProcessing by Forem::Admin::BaseController#index as HTML\n  \u2190[1m\u2190[36mUser Load (1.0ms)\u2190[0m  \u2190[1mSELECT \"users\".* FROM \"users\" WHERE \"users\n\".\"id\" = 7 ORDER BY \"users\".\"id\" ASC LIMIT 1\u2190[0m\n  Rendered forem/admin/base/index.html.erb within layouts/forem/default (1.0ms)\nCompleted 200 OK in 65ms (Views: 61.0ms | ActiveRecord: 1.0ms)\n. No, I'm overriding the /forums views to use my application layout, which does work.... but that is not being picked up once I get down to /forums/admin.\n. ",
    "steveny": "Removing\ndef layout\n  @@layout || \"forem/default\"\nend\nfrom lib/forem.rb seems to fix it for me.  I didn't dig in any further than that.\n. OK, so the admin base_controller.rb is wrapped in the module and picks up the above method.  application_controller.rb is not.  In any event, I was able to get it to work by:\nRails.application.config.to_prepare do\n   Forem::ApplicationController.layout \"application\"\n   Forem::Admin::BaseController.layout \"application\"\nend\nor\nForem.layout = \"application\"\n. ",
    "djones": "Ensuring config/initializers/forem.rb is setup like this\nruby\nRails.application.config.to_prepare do\n  Forem.layout = \"application\"\nend\nFixed the issue for me.\n. ",
    "Astr0surf3r": "yeah! it seems work now! thanks!\n. ",
    "humbroll": "That's good thing. \nI retrieved Topic directly and make custom view. \nThanks. \n. ",
    "ncri": "Ah, so this doesn't have email notifications? Surprising, as it's a basic forum feature.\nWe are looking into using forem, but without notifications we probably won't. Unless there is an easy way of adding them? \n. Reply notifications are the most important notifications, I assumed forem doesn't have any notifications. So I think we'll give it a try. ;-) And thx for the book link, looks interesting! \n. I just tested and it didn't work, but it might be my apps email setup, i will check\n. Hm, i am subscribed now and still don't get notified for replies. Also as the post author i would expect to be auto subscribed.\n. Ah, i see now why! Notifications are sent when a post is approved. But I don't use post approval, i set the state of new posts to \"approved\" by default. @radar is there another way of not having to approve posts then setting database defaults?\n. I tried adding an after create filter to the post model to notify users, but it doesn't get called:\nForem::Post.class_eval do\n  after_create :email_topic_subscribers\nend\nAny idea why? Adding a method and calling it from a post instance works.\n. Trying to debug this. Quite strange, when I do:\nForem::Post.class_eval do\n  after_save do\n    raise 'test'\n  end\nend\nThe error is correctly raised in the console when saving a post, but not when creating/saving one via the web interface.\n. Okay, the issue is, that the callback is only added for the first request for some reason, when using rails server. I got it working by doing:\nRails.application.config.to_prepare do\n  Forem::Post.class_eval do\n    after_create :email_topic_subscribers\n  end\nend\n. I did it via a migration that sets the state to approved by default, for various models. It was mentioned in another issue:\n```\ndef up\n  change_column_default(:forem_topics, :state, 'approved')\n  change_column_default(:forem_posts, :state, 'approved')\n  change_column_default(:users, :forem_state, 'approved')\nend\ndef down\n  change_column_default(:forem_topics, :state, 'pending_review')\n  change_column_default(:forem_posts, :state, 'pending_review')\n  change_column_default(:users, :forem_state, 'pending_review')\nend\n```\nBut you can also try to do it like this for posts:\nRails.application.config.to_prepare do\n  Forem::Post.class_eval do\n    after_create :approve\n  end\nend\nUntested. More elegant and you can avoid having to call email_topic_subscribers separately. You will still have to handle topic and user approval then.\n. Ah, setting Forem.moderate_first_post to false completely switches off the need for approving posts? Will email notifications still be triggered? And what do you mean I should do in a rake task only once?\n. Yeah, I'm just confused about what you mean with \"it\" in \"why not run it once in a console command\". As far as I understand you I just have to set Forem.moderate_first_post to false? Currently in my app the post's state is set to approved by default at database level. That will then not be necessary anymore and actually will prevent notifications. So I will have to change the default back to pending_review?\n. okay, thx, got it.\n. ",
    "hopewise": "Reply notifications is working, but new post is not sending email to admin, how would I add this feature? what controller / action shall I over ride? \nAlso, how would I make posts auto approved rather than getting moderated?\nThanks for Forem!\n. make sure that you are subscribed\nOn Aug 10, 2014 6:42 PM, \"Nico Ritsche\" notifications@github.com wrote:\n\nI just tested and it didn't work, but it might be my apps email setup, i\nwill check\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/radar/forem/issues/566#issuecomment-51718337.\n. so, if I just added the code above as an initialization code in Rails, it\nwill work?\ndid you figure how to set a new post automatically approved? currently it\nwill ask for moderation first ..\n\nOn Wed, Aug 13, 2014 at 4:21 PM, Nico Ritsche notifications@github.com\nwrote:\n\nOkay, the issue is, that the callback is only added for the first request\nfor some reason, when using rails server. I got it working by doing:\nRails.application.config.to_prepare do\n  Forem::Post.class_eval do\n    after_create :email_topic_subscribers\n  end\nend\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/radar/forem/issues/566#issuecomment-52046598.\n\n\n\nKind Regards,\nSamir Sabri\nSoftware Architect& Developer\nwww.dcaclab.com\nJordan-Middle East\n. Thanks Nico for your contribution\nOn Wed, Aug 13, 2014 at 4:32 PM, Nico Ritsche notifications@github.com\nwrote:\n\nI did it via a migration that sets the state to approved by default, for\nvarious models. It was mentioned in another issue:\ndef up\n  change_column_default(:forem_topics, :state, 'approved')\n  change_column_default(:forem_posts, :state, 'approved')\n  change_column_default(:users, :forem_state, 'approved')\nend\ndef down\n  change_column_default(:forem_topics, :state, 'pending_review')\n  change_column_default(:forem_posts, :state, 'pending_review')\n  change_column_default(:users, :forem_state, 'pending_review')\nend\nBut you can also try to do it like this for posts:\nRails.application.config.to_prepare do\n  Forem::Post.class_eval do\n    after_create :approve\n  end\nend\nUntested. More elegant and you can avoid having to call\nemail_topic_subscribers separately. You will still have to handle topic and\nuser approval then.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/radar/forem/issues/566#issuecomment-52047842.\n\n\n\nKind Regards,\nSamir Sabri\nSoftware Architect& Developer\nwww.dcaclab.com\nJordan-Middle East\n. ",
    "kchsieh": "Just realize the error msg is saying 'git: command not found', which telling me to install git package on the EC2 server first.  Closing this issue. \n. ",
    "louiecaulfield": "I noticed the problem myself as well and tried out your changes which make sense to me. I commited your fix in my fork. Not that I want to take credit for it.\nd96d63eddfc48e10bbeb5d7596a8e36f9b45833a\nI changed the order clauses of the other calls in the file as well, though they shouldn't really make any difference.\n. I believe I fixed this in 5c45167433077755880f804de3159ca1ce8a9031\n. After some digging into the code, I have concluded the same. \nI do think it would make forem quite a bit more adoptable if installing the redcarpet gem formatter was part of the setup procedure in the docs, a recommendation from the developer goes a long way. Besides that, it's the last one in the list of formatters. I don't think it would be bad to put it at the top of the list and tag it as recommended.\nThat all is of course if radar feels like recommending this formatter.\n. I rebase/merged my rails4 branch on yours and isolated my CSS requirements in a different branch. Should merge fine now.\n. It's a foundation-zurb thing. I didn't intend this to end up in the pull request. I'll rebase on your master and move site-specific change into a separate branch.\n. But since you're asking, what it does is it hides the topics count columns on small screens so the forum overview is somewhat functional. Try https://www.lab-nation.com/forum and resize your browser window really narrow.\n. ",
    "cs3b": "It was more then one year ago. Sorry but I do not remember more details (what was the project and the rails version).\nIf nobody complain about it since then, I would consider closing it ...\n. ",
    "eoogbe": "@radar I had the same problem. Made a new app that shows the error.\n. Changing the links to buttons (link_to -> button_to) also works. More semantic too.\n. ",
    "NelsonBrandao": "@radar In the config/initializers/forem.rb file add:\nRails.application.config.to_prepare do\n  Forem.layout = \"application\"\nend\nThat should fix it\n. ",
    "RostDetal": "Also has same proble, and also changed forum layout\n. Approved below:\n//-------------------------------------\n@radar In the config/initializers/forem.rb file add:\nRails.application.config.to_prepare do\nForem.layout = \"application\"\nend\nThat should fix it\n. I've forked forem last friday, and merged it into spree application. After, i need to render forum inside spree application. I change layout in forem.rb to spree layout. After that i tried to delete one of created forums from admin panel, and saw error described above\n. my forem config/initializers/forem.rb\nForem.user_class = \"Spree::User\"\nRails.application.config.to_prepare do\n        Forem.layout = Spree::Config.layout\n        Forem.email_from_address = \"please-change-me@example.com\"\n        Forem.per_page = 20\nend\n. 1. Install clean rails APP\n2. install forem\n3. In APP initializer try to change layout for forem like a Forem.....layout = \"application\" outside \n   Rails.application.config.to_prepare do ... end\n. Ok i'll try. Yes of course. \n. Hah! i made it too)) where were your fixes before))\n. \u041e\u043a, will do it. \n. ",
    "bennettl": "Will this only affect first posts or also any subsequent replies as well? I don't want any posts/replies/threads to be moderated.\n. Does Forem.moderate_first_post = false apply to replies to threads as well?\n. ",
    "frankie-loves-jesus": "@johndavid400 if you're going to be doing this - ideally all UI-related thingies should be moved to a separate Rails engine. I see a lot of people like doing their own UIs from scratch using their own favorite libs, so it makes little sense for them having to include stuff like Bootstrap, Select2 etc.\n\nI was wondering how you would feel about making the bootstrap classes (ie. btn, col-md-12 etc..)\n\nI disagree that Forem's views should be gridded up though. I mean I love grids, but only when it comes to graphic design and architecture. Why some people see the need to transfer them programatically onto their HTML and CSS to achieve things that regular CSS will do just fine, is beyond me. If it is alignment you're after, http://hashgrid.com/ might be able to help.\n. @mib32 could you please update it to 4.2.0 beta so we can speed things up with Adequate Record as well?\nhttp://weblog.rubyonrails.org/2014/8/20/Rails-4-2-beta1/\n. Sure, go ahead.\nThis isn't really an issue though, so would you mind closing it?\n. The problem is https://github.com/radar/forem/blob/rails4/lib/forem/engine.rb#L26. I think that and L27 shouldn't be there.\n. Sounds like you need to copy Forem's views into your own app (rails g forem:views) and then customize them.\n. @pavankat simple_form should work fine. Are you able to reproduce the issue at http://runnable.com/U9Qwd84r1EkCqrKA/basic-forem-demo? Sounds like you got something else HTML escaping your forms.\n. Anybody willing to upgrade forem to rails5?. it doesnt have to be. Would you be willing to become the new repo owner @bodrovis? :). ",
    "coalwater": "This does fix #609, I would try to write the tests but I'm unable to run rspec due to missing folders that were deleted in a previous commit.\n. @radar, Ok i figured out what I was doing wrong, i have 2 folders, 1 for the gem itself and one for a dummy project that uses the gem, I was running the spec on the gem it dummy project, I tested it in the gem folder and I got it working, sorry for the confusion\n. ",
    "qazwsx9006": "because my boss :((\n. ",
    "joomalungma": "Hello, sorry my fault. The error is \nShowing /app/views/forem/posts/_post.html.erb where line #33 raised:\nundefined method `post_time_tag' for #<#Class:0x0000010355b988:0x000001031013b0>\nruby\n<div class='contents col-md-7'>\n           <a href='#post-<%= post.id %>'>\n             <%= post_time_tag(post) %>\n           </a>\n           <%= forem_format(post.text) %>\n. Hello @radar \nI can't confirm this problem in the 'dummy_app' to create test. I'm a new in ruby. Could you please suggest anything?  )\n. See here - Error in moderation page #607\n. ",
    "MacFarlaneBro": "But I'm even getting the same error when I try to respond to someone elses post on the sample app at:\nhttp://forem.herokuapp.com\nIt could well just be me being stupid though, I was wondering if anyone else was having success replying to other users?\n. Started POST \"/forums/general-54e784f9-239e-4b76-aa47-ea553477d52a/topics/this-is-a-new-topic/posts\" for 82.69.203.230 at 2014-08-19 08:15:12 +0000\nProcessing by Forem::PostsController#create as HTML\nProcessing by Forem::PostsController#create as HTML\nParameters: {\"utf8\"=>\"\u2713\", \"authenticity_token\"=>\"93r3JX+sGlJwwScLL52DP1Eel1ZB2GjWjQ7+ObqUOso=\", \"post\"=>{\"text\"=>\"THis is bogus\", \"reply_to_id\"=>\"12\"}, \"commit\"=>\"Post Reply\", \"forum_id\"=>\"general-54e784f9-239e-4b76-aa47-ea553477d52a\", \"topic_id\"=>\"this-is-a-new-topic\"}\nParameters: {\"utf8\"=>\"\u2713\", \"authenticity_token\"=>\"93r3JX+sGlJwwScLL52DP1Eel1ZB2GjWjQ7+ObqUOso=\", \"post\"=>{\"text\"=>\"THis is bogus\", \"reply_to_id\"=>\"12\"}, \"commit\"=>\"Post Reply\", \"forum_id\"=>\"general-54e784f9-239e-4b76-aa47-ea553477d52a\", \"topic_id\"=>\"this-is-a-new-topic\"}\nRendered forem/subscription_mailer/topic_reply.text.erb (6.8ms)\nSent mail to charliembrodie@gmail.com (7.4ms)\nRendered forem/subscription_mailer/topic_reply.text.erb (6.8ms)\nCompleted 500 Internal Server Error in 59ms\nSent mail to charliembrodie@gmail.com (7.4ms)\nCompleted 500 Internal Server Error in 59ms\nErrno::ECONNREFUSED (Connection refused - connect(2)):\nThis is the output of the logs (minus the stack trace obviously), please let me know if you need any more information.\nI'm not having this issue on my local server, just on heroku and as I said before I get the same \"We're sorry, but something went wrong\" message when trying to post a reply to another user on your sample forem application as well.\nThanks for the help!\n. That's solved it! Thanks so much, not sure how I missed that error message.\nIf anyone else is having the same problem it's because Heroku does not provide an outgoing mail service by default, therefore when a user tries to reply to another user an email is sent to the user being replied to alerting them, without a default outgoing mail service the app has no way to handle this so just crashes.\nHowever Heroku does allow the use of an external SMTP server, for example I used the free sendgrid addon, installed using the following command: $ heroku addons:add sendgrid:starter \nMore information on configuring the sendgrid addon on heroku can be found here: https://devcenter.heroku.com/articles/sendgrid .\n. ",
    "mib32": "i added pull request here https://github.com/radar/forem/pull/591\n. @frankie-loves-jesus sorry, but i can't test it with 4.2.0 beta since i don't have one\n. this should be closed since https://github.com/radar/forem/pull/591 is closed\n. ",
    "WeremyJalters": "I'm relatively new to rails and tweaking themes, but I'll give it a try. If anyone else solves the issue or has any guidance, please comment here..\n. ",
    "fchampreux": "Actually, the file assets/stylesheets/application.css should be renamed to application.css.scss to be processed by Bootstrap.\nNewbie error, sorry for disturbing !\nBest regards, and thanks for this useful engine !\nBest regards,\nFred\n. ",
    "jengel3": "Alright, will do so when I get a chance!\n. Any idea what to name it instead @radar? I'm having trouble finding a word to replace it...\n. #611 \n. Can you provide your source?\n. Damn,  I saw the test failed but couldn't figure out why. Will fix in a few.\n. Should be good @radar, waiting for Travis to finish.\n. Fixed a broken test...\n. Woot looks good @radar, failing tests are unrelated to the PR.\n. The bootstrap site is pretty broken right now, needs some work I suppose.\n. I think that this is better as a separate plugin or gem, but I think forem should remain as the simple parts to a forum. \n. Going to be hard to help without the source :)\n. @spvkavitha You can update your user's forem_admin attribute to true so that you can access the forem control panel from the forem root, or you can manually create categories and forums similarly to how it is done here.\n. That would probably be best, considering there could be a different translation for a feminine/masculine word, depending on the language.\n. ",
    "pierallard": "Hi @radar \nI try to to do a patch for it (first time).\nI have issues for running tests\n$ bundle exec rake forem:dummy_app\n... some table creations ...\nundefined method table_name' for nil:NilClass/HOME/forem/spec/dummy/db/migrate/20140922080648_add_forem_admin.forem.rb:10:inuser_class'\nThe issue can be resolved with a simple replacement in lib/forem/engine.rb\n-require 'emoji/railtie'\n+require 'emoji'\nThen everything works fine.\n. ",
    "pavankat": "@bodrovis I did this:\nRails.application.config.to_prepare do\n  Forem.layout = \"application\"\nend\nAnd then the page throws errors whenever I try to render links going to certain paths. \nundefined local variable or method `teacher_path' for #<#Class:...\n. @Jake0oo0 it's in a private repository so it's tough to provide it all. Thanks for reaching out though.\n. @bodrovis thank you!!!\nAnd I figured it out. There are no forums made in production. Doh!\n. @lyneux What are you using for your email notifications? Mandrill? You can set your rails app to production mode and put a binding.pry right after the email gets sent in the controller.\n. @radar I have the latest version I think. And it's still not working.\nremote: git://github.com/radar/forem.git\n  revision: 1a776b8d847701eceb88ddaa27a176ba238fbae9\n  branch: rails4\n  specs:\n    forem (1.0.0.beta1)\n      cancancan (~> 1.7)\n      decorators (~> 1.0.2)\n      friendly_id (~> 5.0.0)\n      gemoji (= 2.1.0)\n      rails (>= 4.0.3, <= 4.1.6)\n      sanitize (= 2.0.6)\n      select2-rails (~> 3.5.4)\n      simple_form (~> 3.0.1)\n      workflow (= 1.0.0)\n. thank you @radar!\n. @radar the code that works is from Forem. The code that doesn't work is my own code. \nI'm trying to not use simple form so I can style it the way I'd like. Any help would be incredible.\n. @frankie-loves-jesus I did. I ran \nrails g forem:views\nand it made \nf.simple_fields_for :posts do |post|\n\u2002render :partial => \"forem/posts/form\", :locals => { :f => post }\nend\nI don't want to use simple_form \nI want to use form_for. But when I use form_for it generates html that's different than simple_fields_for and the form doesn't work.\nHow do I change my code up\n<%= fields_for :posts do |post| %>\n\u2002<%= render :partial => \"forem/posts/form\", :locals => { :f => post } %>\n\u2002<% end %>\n. Hey my friend got it to work. I'll post the ruby that properly converts it when I get home.\n. @frankie-loves-jesus \n<%= f.simple_fields_for :posts do |post|  %>\n<%= render :partial => \"forem/posts/form\", :locals => { :f => post } %>\n<% end %>\nworked fine in the end. Thanks everyone for your help.\n. That's a good point Ryan. I'm closing this right now since it doesn't have to do with Forem. Thanks for the help.\n. But it would be good to note for anyone else in this situation that this solved it:\nforem = Forem::Engine.routes.url_helpers\nThanks @radar \n. ",
    "dt1973": "Could also set up a live test case via http://runnable.com/.\n. @yan-hoose please find the time to do this!\n. > For starters. it's a silly idea to provide views when most people are just going to override them anyway.\nI'm a little bit confused. Isn't that point of the views, to provide a nice and simple foundation with which to override? Unlike Spree's Deface for instance where you have to monkey patch them.\nI love the idea of a JSON API, but can't we also provide the views (http://motherfuckingwebsite.com/ style) and possibly ditch the JS / CSS?\n\nThe web is moving to JS front ends more and more and I would like Forem to follow that trend. Discourse does it very well imo.\n\nI just started using Discourse and I must say, compared to Forem, it's mess. Way too much stuff, way too many monkey patches, way too difficult to change the layout as you have to relate to both the views and the JS templates.\nPlus, it doesn't work as a standalone Rails app (unless you spend days commenting out a lot of stuff). Users are forced to install it via Docker, and if they don't, they don't qualify for help by the Discourse community.\nHaving said that, Discourse is a GREAT example of things we can copy / paste back into our Forem apps during UI customization.\n. ",
    "bgadoury": "Please excuse me while I flaunt my Gemfile/bundler ignorance, but I ran into a \"NoMethodError - undefined method `position'...\" error when I re-installed my bundle and pulled this newer commit.\nEventually, I tracked it down to new migrations that I didn't know about. Running them fixed the errors, of course. Should I have run rake forem:install:migrations \"just in case\" after I re-built my bundle? Or, in other words, is that the \"right way\" for me to update my bundle? Thanks!\n. ",
    "yahor": "https://github.com/radar/forem/pull/615\n. ",
    "hieuk09": "Hi @radar \n- It seems that the first one is already fixed in rails4 branch. It hasn't been fixed on rails 3 yet. I'll remove that change.\n- You can reproduce (2) by following these steps:\n  - Run rake forem:dummy_app\n  - Go to spec/dummy\n  - run rake db:rollback STEP=8 RAILS_ENV=test\n  - run rake db:migrate\n. ",
    "dalvallana": "I made it work by adding a before_filter :ensure_moderator_or_admin to my posts_controller.rb, and defining the method:\ndef ensure_moderator_or_admin\n  unless current_user.admin_or_moderator?\n    redirect_to root_path, notice: \"Access denied.\"\n  end\nend\nAnd, in my User model, defining the method:\ndef admin_or_moderator?\n  self.forem_admin? || (Forem::Membership.where(\"group_id = ? AND member_id = ?\", certain_group, self.id)).any?\nend\nI'm aware this is inelegant and not the Rails way. But I'm new in this world, and I just don't know how to do it right.\nI'm not gonna close this thread in case anyone can enlighten me with the right solution.\nThank you, guys!\n. Thank you, Ryan!\n. ",
    "sungwoncho": "Hi @radar. I finally got around writing specs for this. Let me know what you think.\n. ping @radar \n. Good job investigating this issue. It is very strange that setting counter_cache to false does not turn off this behavior.\n. Oops.. Good catch.\n. Thanks for this!\n. ",
    "SemperEadem": "Ok, I fixed it by replacing : \nForem.layout = \"application\"\nby\nForem::ApplicationController.layout \"application\"\n Forem::Admin::BaseController.layout \"application\"\nin my forem.rb initializer.\nSeems to be related to #552 somehow.\n. ",
    "Byronlee": "thx, yes , you right, \nthe first issue, i try , touch a file :\n```\n/#{Rails.root}/app/decorators/controllers/application_controller_decorator.rb\nApplicationController.class_eval do\n  helper Forem::Engine.helpers\n  helper Rails.application.routes.url_helper\nend\n```\nand i can user the man_app route helper ,but , i have a route helper like wikis_path, in the forem view ,it translate it to \"/forem/wikis\", but i don't neet the forem prefix. what shoult i do?\nthe second issue ,i have fix it by add Forem.layout = \"application\" in file initializers/forem.rb\n but in the initializers/forem.rb  document shows:  Forem::ApplicationController.layout \"application\" . it not work. Give me a misleading. so you should update the document .\n. ",
    "ryush00": "Hmmm.... It seems very hardly...\nThen, How to change it to number id (like \"1\",\"2\",\"3\")?\n. http://stackoverflow.com/a/33636770/2474164\n. \u314c\n. ",
    "gasova": "\ntr:\n  forem:\n    general:\n      forum: Forum\n      topics: Konular\n      topic: Konu\n      posts: Mesajlar\n      posts_count:\n        zero: Mesaj yok\n        one: 1 mesaj\n        other: \"%{count} mesaj\"\n      flagged_for_spam: Hesab\u0131n\u0131z spam olarak bildirildi.\n      cannot_create_topic: \u015eu anda yeni konu yaratamazs\u0131n\u0131z.\n      cannot_create_post: \u015eu anda yeni mesaj ekleyemezsiniz.\n    access_denied: \"Bu i\u015flem i\u00e7in yetkiniz yok.\"\n    admin:\n      area: Y\u00f6netim sayfas\u0131\n      welcome: \"Y\u00f6netim paneline ho\u015fgeldiniz.\"\n      forum:\n        index: Forumlar\u0131 y\u00f6netin\n        new: Yeni forum a\u00e7\u0131n\n        new_link: Yeni forum\n        deleted: Se\u00e7ti\u011finiz forum silinmi\u015ftir.\n        created: Bu forum yarat\u0131ld\u0131.\n        not_created: Bu forum yarat\u0131lamad\u0131.\n        updated: Bu forum g\u00fcncellendi.\n        not_updated: Bu forum g\u00fcncellenemedi.\n      forums:\n        edit: De\u011fi\u015ftir\n        delete: Sil\n        category: Kategori\n        delete_confirm: Silmek istedi\u011finizden eminmisiniz ? \n        index:\n          last_post: Son mesaj\n          none: Yok\n      group:\n        index: Gruplar\u0131 y\u00f6net\n        created: Grup ba\u015far\u0131yla yarat\u0131ld\u0131.\n        not_created: Grup yarat\u0131lamad\u0131.\n        deleted: Se\u00e7ilen grup silindi.\n      groups:\n        show:\n          add_member: Ekle\n      category:\n        index: Forum kategorilerini y\u00f6net\n        new: Yeni forum kategorisi yarat\n        new_link: Yeni forum kategorisi\n        deleted: Forum kategorisi silinmi\u015ftir.\n        created: Bu forum kategorisi eklenmi\u015ftir.\n        not_created: Bu forum kategorisini eklenemedi.\n        updated: Bu forum kategorisi g\u00fcncellendi.\n        not_updated: Bu forum kategorisi g\u00fcncellenemedi.\n      categories:\n        edit: G\u00fcncelle\n        delete: Sil\n        category: Kategori\n        delete_confirm: Bu kategoriyi silmek istyedi\u011finizden eminmisiniz ?\n    common:\n      pages: Sayfalar\n    errors:\n      not_signed_in: Giri\u015f yapmal\u0131s\u0131n\u0131z.\n      access_denied: Yetkiniz bulunmad\u0131.\n    forum:\n      header: \"%{title}'i a\u00e7\"\n      forums: Forumlar\n      new: Yeni forum a\u00e7\n      edit: \"%{title} forum'u g\u00fcncelle\"\n      topics_count:\n        zero: 0 konu\n        one: 1 konu\n        other: \"%{count} konu\"\n      posts_count:\n        zero: 0 mesaj\n        one: 1 mesaj\n        other: \"%{count} mesaj\"\n      moderator_tools: \"Moderasyon se\u00e7enekleri\"\n    forums:\n      index:\n        title: Forum\n        forum: Forum\n        views: G\u00f6r\u00fcnt\u00fcleme\n        last_post: 'Son mesaj :'\n        none: Yok\n    topic:\n      headings:\n        topic: Konu\n        latest: Sonuncu\n        posts: Mesaj\n        views: G\u00f6r\u00fcnt\u00fcleme\n      moderation:\n        success: Bu yaz\u0131 moderat\u00f6r taraf\u0131ndan de\u011fi\u015ftirildi.\n      reply: Cevapla\n      quote: Al\u0131nt\u0131 yap\n      delete: Sil\n      created: Bu konu eklendi...\n      new: Yeni konu yarat\n      edit: Konu g\u00fcncelle\n      not_created: Konu eklenemedi.\n      deleted: Konu silindi.\n      cannot_delete: Sizin olmayan bir konuyu silemezsiniz.\n      updated: Konu g\u00fcncellendi.\n      not_updated: Konu g\u00fcncellenemedi.\n      subscribed: Bu konuya abone oldunuz.\n      unsubscribed: Bu konuya aboneli\u011finizi sonland\u0131rd\u0131n\u0131z.\n      none: Bu forumda hi\u00e7 bir konu bulunamad\u0131.\n      links:\n        new: Yeni konu\n        back_to_topics: Konulara geri d\u00f6n\n        edit: Konuyu de\u011fi\u015ftir\n      not_found: Aranan konu bulunamad\u0131.\n      hidden:\n        'true': Bu konu gizlendi.\n        'false': Bu konu g\u00f6r\u00fcnt\u00fclenebilinir.\n      locked:\n        'true': Bu konu kapat\u0131ld\u0131.\n        'false': Bu konu a\u00e7\u0131k.\n      pinned:\n        'true': Bu konu i\u011fnelendi.\n        'false': \"Bu konunun i\u011fnesi kald\u0131r\u0131ld\u0131.\"\n    topics:\n      show:\n        reply: Cevapla\n        delete: Sil\n        subscribe: \"Abone ol\"\n        unsubscribe: Abonelikten \u00e7\u0131k\n        reply_to_topic: Konuya cevap yaz\n        pending_review: Bu konu revize edilmektedir, yaln\u0131z sahibi ve moderat\u00f6rler g\u00f6r\u00fcnt\u00fcleyebilir.\n        hide:\n          'true': Konuyu g\u00f6r\u00fcnt\u00fcle\n          'false': Konuyu gizle\n        lock:\n          'true': Konuyu kapat\n          'false': Konuyu a\u00e7\n        pin:\n          'true': Konuyu i\u011fnele\n          'false': Konuyu kald\u0131r\n    post:\n      buttons:\n        reply: Cevapla\n        edit: De\u011fi\u015ftir\n      created: Konunuz kaydetdildi.\n      new: Cevap yaz\n      edit: De\u011fi\u015ftir\n      not_created: Konunuz kaydedilemedi.\n      not_created_topic_locked: Kapal\u0131 konulara cevap yazamazs\u0131n\u0131z.\n      edited: Mesaj\u0131n\u0131z g\u00fcncellendi.\n      not_edited: Mesaj\u0131n\u0131z g\u00fcncellenemedi.\n      deleted: Mesaj\u0131n\u0131z silindi.\n      deleted_with_topic: KOnu ve mesajlar silindi.\n      cannot_delete: sahibi olmad\u0131\u011f\u0131n\u0131z bir mesaj\u0131 silemezsiniz.\n      in_reply_to: %{author} a cevaben\n    posts:\n      moderation:\n        moderate: Moderasyon\n        approve: Onayla\n        success: se\u00e7ili mesajlar moderat\u00f6r taraf\u0131ndan revize edildi.\n      post:\n        pending_review: Bu mesaj revize edilmektedir. Yaln\u0131z sahibi ve moderat\u00f6reler g\u00f6r\u00fcnt\u00fcleyebilir.\n    moderation:\n      title: \"%{forum} i\u00e7in moderasyon se\u00e7enekleri.\"\n  helpers:\n    submit:\n      forum:\n        create: Forum a\u00e7\n        update: Forum g\u00fcncelle\n      topic:\n        create: Konu a\u00e7\n        update: Konu g\u00fcncelle\n  simple_form:\n    labels:\n      forum:\n        title: Ba\u015fl\u0131k\n        description: Tan\u0131m\n      topic:\n        subject: Konu\n        locked: Kapal\u0131\n        pinned: \u0130\u011fneli\n        hidden: Gizli\n        posts:\n          text: Metin\n      post:\n        text: Metin\n  # General stuff\n  time_ago_in_words: \" %{time} var\"\n  ago: \" \u00f6nce\"\n  ago_by: \"ago_by \"\n  by: \"by \"\n  started_by: \"started by \"\n  are_you_sure: \"Edminmisiniz ?\"\n\n. Sure I will do so.\nKind regards.\nSent from my iPhone\n\nOn 16 Jan 2015, at 02:26, Ryan Bigg notifications@github.com wrote:\nHi @gasova, thanks for the code :)\nCould you please submit this as a PR?\n\u2014\nReply to this email directly or view it on GitHub.\n. H\u0130, \n\nSorry for the delay, I will submit\u2019it by the end of the week-end, I've totally forgotten\u2026\nKind Regards.\n\nOn 09 May 2015, at 13:22, yan-hoose notifications@github.com wrote:\nHi @gasova https://github.com/gasova. Are you still planning to submit a pull request with Turkish translations?\nI'm asking because recently a need for Turkish translation appeared in one of my apps and I would like to see this translation merged in Forem.\nIf you are not interested in submitting this pull request then I'd be happy to do it myself.\n\u2014\nReply to this email directly or view it on GitHub https://github.com/radar/forem/issues/631#issuecomment-100461157.\n. \n",
    "martinrozkos": "Info about Czech translation added into README.\n. ",
    "tomg65": "bundler stops while showing a conflict message in combination with the other gem, which is dependent on simple_form 3.1\nOK - changed the dependency in your gemspec. and made a pull request #639 \nWith this adaption bundle install works.\n. OK - made ~> 3.0\n:) \n. ",
    "sintro": "So, 4.2.2 is here, and looks like the problem with counter_cache is fixed:\n\"Deprecate automatic counter caches on has_many :through. The behavior was broken and inconsistent.\"\nCan anyone confirm the Forem is working fine now?\n. So, did anything get fixed?\n. > The counter issue is fixed in Rails 4.2.4. Could you please update the dependency to Rails 4.2.4, 4.2.5, and above? Thanks.\nIs not it already updated?\n. Sometimes after refreshing the page with error, it changes to another error\nUnable to autoload constant Forem::Concerns::Viewable, expected [...]/gems/forem-b47e8ea42d3f/app/models/forem/concerns/viewable.rb to define it\n. Strange default policy... Really, every user can edit and delete every post in forem?\nUPDATE\nWait, there are lines in update and destroy actions in PostController: \nif @post.owner_or_admin?(forem_user) && @post.update_attributes(post_params)\n        update_successful\nSo, even if user will send POST through cURL or something else, he will not be able to edit or destroy others posts. I guess, in views there are similar check for @post.owner_or_admin? to show \"Edit\" button.\n. Just quick-checked how the main forum page rendered, and looks like Bullet is absolutely right here. What I noticed is calling \"render category.forums\" there, while the view got from controller only @categories collection without included associations. So for every category it will make additional query to get its' forums (and may be then some additional queries for every forum to render something associated with them, didn't check that). It can be fixed by adding something like .includes(:forums) to controller's actions, like here (not sure that it will be exactly this way) @categories = Forem::Category.by_position.includes(:forums)\nI don't have time now to make all checking and fixing, may be someone who has working forum and who has wish to fix this eager loading problem will do it? We need to check all controllers and queries for N+1 query, it can be done with https://github.com/flyerhzm/bullet gem or manually, then we need to fix ActiveRecord queries with correct methods (.includes() or .joins())\n. Yep. Sad, but this gem is dying (or already dead). Probably, this gem https://github.com/thredded/thredded is better (did not use it yet), so, it is not problem.. I am talking about Forem gem. Read bold text in README of this repo.. ",
    "Buildzzz": "@radar When I go the admin area of the forem gem, there are three links:\n- Manage Forums\n- Manage Forum Categories\n- Manage Groups\nGoing into Manage Forums and Manage Forum Categories, I see that I can edit the name and description, but do not see where I state the order of the forums.  \nAm I going to the right location? \n. Hi @radar ,\nSeems that my views were not updated when I updated the Gem.  Thanks for the help!\n. Hi Ryan,\nNo, I was going to take a crack at creating my own method to solve the\nissue.  I wasn't sure if the gem already came with a premade solution?\nBest,\nTim Zhu\nOn Fri, Jul 10, 2015 at 11:52 PM, Ryan Bigg notifications@github.com\nwrote:\n\nDid you figure it out?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/radar/forem/issues/667#issuecomment-120588096.\n. Hi Ryan,\n\nI would be happy to once I get it working on my end.\nBest,\nTim Zhu\nOn Sat, Jul 11, 2015 at 5:37 PM, Ryan Bigg notifications@github.com wrote:\n\nThe gem doesn't come with a premade solution for querying multiple forums.\nIf you could come up with one and share it with us, that would be\nappreciated :)\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/radar/forem/issues/667#issuecomment-120674265.\n. Hmm...\n\nlastposts = Forem::Post.joins('INNER JOIN \"forem_topics\" ON\n\"forem_posts\".\"topic_id\" = \"forem_topics\".\"id\" WHERE\n\"forem_topics\".\"forum_id\" IN ' + array_of_forum_ids + ' ORDER BY\nforem_posts.created_at DESC').group(:forum_id, :id).select(:id,\n:created_at, :topic_id, :user_id)\nGets us almost there.  The issue is that it returns all the posts from the\nforums in that 'array_of_forum_ids'.  I'm struggling with how to only\nreturn one Post for each of the forums in the 'array_of_forum_ids'.\nBest,\nTim Zhu\nOn Sun, Jul 12, 2015 at 9:46 AM, Zhu, Tim novemberzhu@gmail.com wrote:\n\nHi Ryan,\nI would be happy to once I get it working on my end.\nBest,\nTim Zhu\nOn Sat, Jul 11, 2015 at 5:37 PM, Ryan Bigg notifications@github.com\nwrote:\n\nThe gem doesn't come with a premade solution for querying multiple\nforums. If you could come up with one and share it with us, that would be\nappreciated :)\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/radar/forem/issues/667#issuecomment-120674265.\n. Hi Ryan,\n\n\nAfter beating my head against the wall, I figured out a solution.  Not sure\nwhere/how you would like for me to integrate it into the gem but here's the\nmethod:\ndef lastpostforforums(array_of_forum_ids)\nforumids = array_of_forum_ids\nlastposts = Forem::Post.joins(:topic).where(topic_id:\nForem::Topic.where(forum_id: forumids, hidden: [false,\nnil])).group(\"forem_topics.forum_id\").maximum(\"forem_posts.created_at\")\nlastpostdetails = Forem::Post.joins(:topic, :forem_user).where(created_at:\nlastposts.values).pluck(\"forem_topics.forum_id\", \"forem_topics.subject\",\n\"forem_posts.created_at\", \"users.name\")\nend\nFYI, the current lastpost method had a bug where it returns hidden topics.\nBest,\nTim Zhu\nOn Sat, Jul 11, 2015 at 5:37 PM, Ryan Bigg notifications@github.com wrote:\n\nThe gem doesn't come with a premade solution for querying multiple forums.\nIf you could come up with one and share it with us, that would be\nappreciated :)\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/radar/forem/issues/667#issuecomment-120674265.\n. Actually, we need to return the topic id as well so we can use it in the\nlink_to.\n\nAnyway, let me know if you want to try it out and how you would like me to\nintegrate to the gem.\nBest,\nTim Zhu\nOn Tue, Jul 14, 2015 at 4:46 PM, Zhu, Tim novemberzhu@gmail.com wrote:\n\nHi Ryan,\nAfter beating my head against the wall, I figured out a solution.  Not\nsure where/how you would like for me to integrate it into the gem but\nhere's the method:\ndef lastpostforforums(array_of_forum_ids)\nforumids = array_of_forum_ids\nlastposts = Forem::Post.joins(:topic).where(topic_id:\nForem::Topic.where(forum_id: forumids, hidden: [false,\nnil])).group(\"forem_topics.forum_id\").maximum(\"forem_posts.created_at\")\nlastpostdetails = Forem::Post.joins(:topic, :forem_user).where(created_at:\nlastposts.values).pluck(\"forem_topics.forum_id\", \"forem_topics.subject\",\n\"forem_posts.created_at\", \"users.name\")\nend\nFYI, the current lastpost method had a bug where it returns hidden topics.\nBest,\nTim Zhu\nOn Sat, Jul 11, 2015 at 5:37 PM, Ryan Bigg notifications@github.com\nwrote:\n\nThe gem doesn't come with a premade solution for querying multiple\nforums. If you could come up with one and share it with us, that would be\nappreciated :)\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/radar/forem/issues/667#issuecomment-120674265.\n. \n\n",
    "comp615": "Yeah that was my plan, this is sort of a marker for me as well :-P I'll\ntake a stab at it when I have a chance\nOn Mon, Mar 30, 2015 at 1:33 PM, Ryan Bigg notifications@github.com wrote:\n\nHi @comp615 https://github.com/comp615,\nIt sure sounds like you know what the problem is and how to fix it. Could\nyou please submit a PR that fixes this? Personally I would not put the\ncheck in the SubscriptionMailer, but on the method that calls the mailer.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/radar/forem/issues/650#issuecomment-87824186.\n. \n",
    "krainboltgreene": "@comp615 Any progress on this?\n. @mkuchhal Need a reproduction of this to really act.\n. I agree significantly with @radar here. I'll start janitoring with this issue in mind.\n. Hey @sintro I'll be looking into this when I can. Is there any chance that you'll want to work on this or pair on this together?\nAlso, editing your comment for clarity.\n. Awesome!\nOn Nov 16, 2015 3:34 PM, \"phillyslick\" notifications@github.com wrote:\n\n@krainboltgreene https://github.com/krainboltgreene I can help out. I\ndid some preliminary fixes, but much much more to do.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/rubysherpas/forem/issues/681#issuecomment-157209186.\n. \n",
    "lkrubner": "I have a similar problem.\n. ",
    "hugobyrne": "Identical issue for me too. Like shomari above I cloned the Forem repo to local drive updated the Gemfile to point to it and then got this error:-\nCopying over Forem migrations...\n/usr/local/rvm/gems/ruby-2.2.0@rails4.2/gems/bundler-1.7.10/lib/bundler/source/git.rb:188:in rescue in load_spec_files': https://github.com/stripe/stripe-ruby (at master) is not yet checked out. Runbundle install` first. (Bundler::GitError)\nSo now the Forem install task was giving me the same error except this time referencing the Stripe gem (which was also pointed to Github).\nI commented out the Stripe gem reference in my Gemfile and then the install ran fine.\n. ",
    "jdurand": "I had the same problem as @gitpenguin; running the forem install script on an existing app raised a Bundler::GitError : \n/Users/jdurand/.rvm/gems/ruby-2.2.2@global/gems/bundler-1.9.4/lib/bundler/source/git.rb:192:in `rescue in load_spec_files': git://github.com/radar/forem.git (at rails4) is not yet checked out. Run `bundle install` first. (Bundler::GitError)\nI managed to install forem by creating a patch from the result of the install on a fresh rails app and applying it to my existing app.\n. ",
    "mkuchhal": "``\nactiverecord (4.0.0) lib/active_record/dynamic_matchers.rb:22:inmethod_missing'\nworkflow (1.0.0) lib/workflow.rb:243:in spec'\nworkflow (1.0.0) lib/workflow.rb:171:incurrent_state'\nworkflow (1.0.0) lib/workflow.rb:363:in write_initial_state'\nactivesupport (4.0.0) lib/active_support/callbacks.rb:387:in_run__837347483__validation__callbacks'\nactivesupport (4.0.0) lib/active_support/callbacks.rb:80:in run_callbacks'\nactivemodel (4.0.0) lib/active_model/validations/callbacks.rb:106:inrun_validations!'\nactivemodel (4.0.0) lib/active_model/validations.rb:314:in valid?'\nactiverecord (4.0.0) lib/active_record/validations.rb:70:invalid?'\nactiverecord (4.0.0) lib/active_record/validations.rb:77:in perform_validations'\nactiverecord (4.0.0) lib/active_record/validations.rb:51:insave'\nactiverecord (4.0.0) lib/active_record/attribute_methods/dirty.rb:32:in save'\nactiverecord (4.0.0) lib/active_record/transactions.rb:270:inblock (2 levels) in save'\nactiverecord (4.0.0) lib/active_record/transactions.rb:326:in block in with_transaction_returning_status'\nactiverecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:200:intransaction'\nactiverecord (4.0.0) lib/active_record/transactions.rb:209:in transaction'\nactiverecord (4.0.0) lib/active_record/transactions.rb:323:inwith_transaction_returning_status'\nactiverecord (4.0.0) lib/active_record/transactions.rb:270:in block in save'\nactiverecord (4.0.0) lib/active_record/transactions.rb:281:inrollback_active_record_state!'\nactiverecord (4.0.0) lib/active_record/transactions.rb:269:in save'\nactiverecord (4.0.0) lib/active_record/associations/has_many_association.rb:39:ininsert_record'\nactiverecord (4.0.0) lib/active_record/associations/collection_association.rb:463:in block (2 levels) in create_record'\nactiverecord (4.0.0) lib/active_record/associations/collection_association.rb:367:inadd_to_target'\nactiverecord (4.0.0) lib/active_record/associations/collection_association.rb:461:in block in create_record'\nactiverecord (4.0.0) lib/active_record/associations/collection_association.rb:152:inblock in transaction'\nactiverecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:202:in block in transaction'\nactiverecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:210:inwithin_new_transaction'\nactiverecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:202:in transaction'\nactiverecord (4.0.0) lib/active_record/transactions.rb:209:intransaction'\nactiverecord (4.0.0) lib/active_record/associations/collection_association.rb:151:in transaction'\nactiverecord (4.0.0) lib/active_record/associations/collection_association.rb:460:increate_record'\nactiverecord (4.0.0) lib/active_record/associations/collection_association.rb:121:in create'\nactiverecord (4.0.0) lib/active_record/associations/collection_proxy.rb:260:increate'\napp/services/course_enroller.rb:17:in enroll'\napp/controllers/checkout_controller.rb:60:inblock in payment_response'\napp/controllers/checkout_controller.rb:59:in each'\napp/controllers/checkout_controller.rb:59:inpayment_response'\nactionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in send_action'\nactionpack (4.0.0) lib/abstract_controller/base.rb:189:inprocess_action'\nactionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in process_action'\nactionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:inblock in process_action'\nactivesupport (4.0.0) lib/active_support/callbacks.rb:483:in _run__475416425__process_action__callbacks'\nactivesupport (4.0.0) lib/active_support/callbacks.rb:80:inrun_callbacks'\nactionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in process_action'\nactionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:inprocess_action'\nactionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in block in process_action'\nactivesupport (4.0.0) lib/active_support/notifications.rb:159:inblock in instrument'\nactivesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in instrument'\nactivesupport (4.0.0) lib/active_support/notifications.rb:159:ininstrument'\nactionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in process_action'\nactionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:inprocess_action'\nactiverecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in process_action'\nactionpack (4.0.0) lib/abstract_controller/base.rb:136:inprocess'\nactionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in process'\nactionpack (4.0.0) lib/action_controller/metal.rb:195:indispatch'\nactionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in dispatch'\nactionpack (4.0.0) lib/action_controller/metal.rb:231:inblock in action'\nactionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in call'\nactionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:indispatch'\nactionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in call'\nactionpack (4.0.0) lib/action_dispatch/routing/mapper.rb:44:incall'\nactionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in block in call'\nactionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:ineach'\nactionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in call'\nactionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:incall'\ndragonfly (1.0.5) lib/dragonfly/middleware.rb:14:in call'\nrequest_store (1.0.5) lib/request_store/middleware.rb:9:incall'\nwarden (1.2.3) lib/warden/manager.rb:35:in block in call'\nwarden (1.2.3) lib/warden/manager.rb:34:incatch'\nwarden (1.2.3) lib/warden/manager.rb:34:in call'\nrack (1.5.2) lib/rack/etag.rb:23:incall'\nrack (1.5.2) lib/rack/conditionalget.rb:35:in call'\nrack (1.5.2) lib/rack/head.rb:11:incall'\nactionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in call'\nactionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:incall'\nrack (1.5.2) lib/rack/session/abstract/id.rb:225:in context'\nrack (1.5.2) lib/rack/session/abstract/id.rb:220:incall'\nactionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in call'\nactiverecord (4.0.0) lib/active_record/query_cache.rb:36:incall'\nactiverecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in call'\nactiverecord (4.0.0) lib/active_record/migration.rb:369:incall'\nactionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in block in call'\nactivesupport (4.0.0) lib/active_support/callbacks.rb:373:in_run__197113876__call__callbacks'\nactivesupport (4.0.0) lib/active_support/callbacks.rb:80:in run_callbacks'\nactionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:incall'\nactionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in call'\nactionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:incall'\nactionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in call'\nactionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:incall'\nlograge (0.3.0) lib/lograge/rails_ext/rack/logger.rb:15:in call_app'\nrailties (4.0.0) lib/rails/rack/logger.rb:21:inblock in call'\nactivesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in block in tagged'\nactivesupport (4.0.0) lib/active_support/tagged_logging.rb:25:intagged'\nactivesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in tagged'\nrailties (4.0.0) lib/rails/rack/logger.rb:21:incall'\nactionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in call'\nrack (1.5.2) lib/rack/methodoverride.rb:21:incall'\nrack (1.5.2) lib/rack/runtime.rb:17:in call'\ndragonfly (1.0.5) lib/dragonfly/cookie_monster.rb:9:incall'\nactivesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in call'\nrack (1.5.2) lib/rack/lock.rb:17:incall'\nactionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in call'\nrailties (4.0.0) lib/rails/engine.rb:511:incall'\nrailties (4.0.0) lib/rails/application.rb:97:in call'\nrack (1.5.2) lib/rack/content_length.rb:14:incall'\npuma (2.8.1) lib/puma/server.rb:490:in handle_request'\npuma (2.8.1) lib/puma/server.rb:361:inprocess_client'\npuma (2.8.1) lib/puma/server.rb:254:in block in run'\npuma (2.8.1) lib/puma/thread_pool.rb:92:incall'\npuma (2.8.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'\n```\nThe above quoted line of code is at line 17 of course_enroller.rb\n. Sorry for the late response. I have stopped working for the firm for which I was using this library. Also we used a different implementation pattern due to which I can no longer reproduce this bug.\n. ",
    "edmondchui": "A possible use case for forem_forums to have timestamp could be when we use key-based caching (with updated_at being part of the cache key).\nIf there is any new or updated posts, we can touch the belonging topic and in turns the belonging forum. We can then use the timestamp-based cache key to check against the cache.\n. Here is how I create a topic\n``` ruby\ncreates a valid Forem::User\nuser = User.create!\nforum = Forem.create!\ntopic = Forem::Topic.create(subject: \"New Topic\", forum_id: forum.id, user_id: user.id, state: :approved)\n```\n. Thanks @yan-hoose.\nMy intention is to create an empty topic to start with. That's why I didn't provide a post text. Is that a valid use case?\n. The counter issue is fixed in Rails 4.2.4. Could you please update the dependency to Rails 4.2.4, 4.2.5, and above? Thanks.\n. ",
    "cjbottaro": "+1 on the key based caching.  I recently looked at the source and none of the associations have touch: true on them... so need another PR for that.\n. +1\nSame issue here.  For me, every time it's uninitialized constant Forem::StateWorkflow.  I have to restart my server almost every time I make a change.  Development is extremely painful now.\nGemfile:  https://gist.github.com/cjbottaro/4373517f4a8efcb6e3e1\n. I'm not sure what you mean.  The Gemfile that I posted shows 4.2.4.  In fact, I had to upgrade to 4.2.4 (from 4.2.3) just to get it to work (due to dependencies specified in the gemspec).\n. Whoops, sorry about that.  I meant to say I'm also experiencing this with Rails 4.2.4.\n. Exact same issue here.  Subscribing.\n. Fixes issue #675 for me.\n. ",
    "kaleb4eg": "hey @radar Rails 4.2.2 is already released, can you accept PR?\nCurrently I cannot use Forem without this fix because I use 4.2.1 version of Rails...\n. @radar it seems not... \nSorry, I missed that counter is working in 4.2 version and is not working in 4.2.1.\n. ",
    "TekuConcept": "My bad, I stumbled upon the 'CONTRIBUTING.md' file several hours after creating this pull request. I am currently in the process of fixing those errors presented in the 'rspec spec' tests.\n. Good to know; I will push my updates based on the contribution standards.\n. ",
    "vkoves": "This doesn't work. After testing, it just disables all moderation, which is the opposite of what I want. This is also what you said here when someone was trying to prevent moderation.\nSo is there any way I can prevent users from being \"approved\" and force every single post to be moderated?\n. After digging through the code, this override let me do it:\n# We don't want forem auto moderating stuff, so let's do this\n  Forem::Post.class_eval do\n    def skip_pending_review\n        approve! unless user && true #user.forem_moderate_posts?\n    end\n  end\nIs there an official way that I am missing (didn't see one in the documentation)?\nThanks again, forem's been a real treat.\n. ",
    "Nateowami": "@radar This was to protect from a CSRF attack. See #522. Perhaps the authenticity_token can be added as a parameter in the URL.\n. ",
    "vfonic": "Could it be an optional url parameter for such cases when you want to preload some forums/topics?\nFor example: /forums/blah/topics/foo?bump_view_counter=false\n. Great answers! Thanks, Ryan for taking time to reply.\nI agree the gem shouldn't be too HTML/CSS/JS heavy. However, I'd still provide basic front-end, something similar to what Forem offers right now (or Devise or other, non really front-end gems).\nI agree with @yan-hoose that this could be released as v1.0 (or v0.1 if you want) and then the rewrite will be the new major version. This would work for both cases, when someone wants to use the gem and for rewrite.\n. Exactly. Have a version that we can refer to and if you use pessimistic\nversion constraint, you can get any security fixes that get released for\nthe gem.\nI'll have a look this week into the Travis build and see if I can get it to\npass.\nOn Sun, Jul 12, 2015 at 2:59 AM, Ryan Bigg notifications@github.com wrote:\n\nI agree with @yan-hoose https://github.com/yan-hoose that this could be\nreleased as v1.0 (or v0.1 if you want) and then the rewrite will be the new\nmajor version. This would work for both cases, when someone wants to use\nthe gem and for rewrite.\nI guess the whole point of doing this would be to have a version of Forem\nthat is fixed in time? Is that all this will be solving? If so, I'm happy\nto do a v0.1 release once I get clarification.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/radar/forem/issues/666#issuecomment-120674873.\n. Agree with Erik! I was thinking in the same direction. Let's make\nforem-core and, if I get time (really can't promise anything here), I'd\nlove to make forem-angular as showcase on how to integrate and use API in\nyour app.\n\nSorry for brevity. Sent from my phone.\nOn Monday, July 13, 2015, Erik Ostrom notifications@github.com wrote:\n\nI love the idea of being able to build JS apps on Forem (I'm depending on\nmaking it happen for my current project!) but I don't think Forem should\nlose the HTML UI entirely. Sometimes you just want to make a Rails app, and\nForem was a great way to make that happen on a previous project I worked on.\nI've imagined splitting the project into a forem-core gem, a forem-web\ngem that provides the HTML UI, and a forem-api gem that provides the JSON\nAPI. That said, my current thinking is that the API will share some of its\ncontroller implementation with the HTML UI, so there may not be enough\ndifference to make it worth splitting into separate gems.\nIn the near term, I support a 0.1 release to have a version that's fixed\nin time, to allow security fixes as @vfonic https://github.com/vfonic\nsaid, and because it's a little faster and more comfortable to integrate\ngems into a project than GitHub repos. The current gem situation makes\nForem look like a Rails 3 project that got abandoned. It may not be\n1.0-ready, but it's more stable and useful than that.\nAlso, releasing a Rails-4-compatible gem might encourage more contributors\nto help improve it. Speaking of which, thanks, Viktor, for looking into the\nbuild problems.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/radar/forem/issues/666#issuecomment-120993871.\n. Just noticed this is an issue #666 :smiling_imp:\n\nI cloned the repo (finally) and did a checkout of last passing commit. I have some issues getting the dummy data.\nspec_helper.rb:3:in `require': cannot load such file -- forem/spec/dummy/config/environment.rb (LoadError)`\n@radar Is there some better way for contacting you? Can you provide some dummy data or I missed it somewhere? Should I just try and guess what the data should look like?\nThe more I dig into this gem, the more I see how much work and time has been put into it. It would really be a shame not to have it released/rewritten as a stable version. Also, the more I dig into it, the more I feel like a lot of parts could be extracted to separate gems like: themes, translations, post formatters, maybe db adapters, etc...\n. Found the rake task for generating dummy app. # rookie mistake\n. I've created a PR with passing specs: #670 \nIt's a hack, but it allows us to get to v1.0. Perhaps there are better ways to go around this?\nThinking about releasing v1.0.0 on RubyGems, all other gem dependencies can not be Github dependencies, but should also be released as gems (forem-kramdown, forem-theme-base).\n. Looks like rails 4.2.4 is out and the issue with counter cache has been fixed. https://github.com/rails/rails/issues/19042\n. ",
    "spvkavitha": "Radar: Thanks for your note. I run the command you suggested and there is no data as you mentioned. \nHow can I add data? In local host, I can see new topic button and added a post but not sure what to do Heroku server. Sorry, if it is too basic question. \nJake0oo0 : I pushed my code at Bitbucket so not sure how I can share the source code. \n\nRunning rails console attached to terminal... up, run.6813\nLoading production environment (Rails 4.1.5)\nirb(main):001:0> Forem::Category.count\n=> 0\nirb(main):002:0> Forem::Forum.count \n=> 0\nirb(main):003:0>\n. @Jake0oo0 I have added the seeds.rb but still it shows do data.\n-- Still getting\nRunning rails console attached to terminal... up, run.3491\nLoading production environment (Rails 4.1.5)\nirb(main):001:0> Forem::Category.count\n=> 0\nirb(main):002:0> Forem::Forum.count\n=> 0\nirb(main):003:0> \nHeroku logs for https://freeskies.herokuapp.com/forums/\n\n]: \n2015-07-21T14:38:20.681391+00:00 app[web.1]: Processing by Forem::ForumsController#show as HTML\n2015-07-21T14:38:20.681481+00:00 app[web.1]:   Parameters: {\"id\"=>\"default\"}\n2015-07-21T14:38:20.696868+00:00 app[web.1]: Completed 404 Not Found in 15ms\n2015-07-21T14:42:02.174087+00:00 app[web.1]: Started GET \"/forums/\" for 98.207.85.125 at 2015-07-21 14:42:02 +0000\n2015-07-21T14:42:02.198301+00:00 app[web.1]:   Rendered collection (0.0ms)\n2015-07-21T14:42:02.201171+00:00 app[web.1]:   Rendered layouts/_navigation_links.html.erb (0.0ms)\n2015-07-21T14:42:02.214177+00:00 app[web.1]:   Rendered layouts/_messages.html.erb (0.1ms)\n2015-07-21T14:42:02.215051+00:00 app[web.1]: Completed 200 OK in 29ms (Views: 17.8ms | ActiveRecord: 10.2ms)\n2015-07-21T14:42:02.199539+00:00 app[web.1]:   Rendered forem/forums/index.html.erb within layouts/application (12.2ms)\n2015-07-21T14:42:02.182157+00:00 app[web.1]: Processing by Forem::ForumsController#index as HTML\n2015-07-21T14:42:02.206699+00:00 app[web.1]:   Rendered layouts/_navigation.html.erb (5.9ms)\n2015-07-21T14:42:02.214487+00:00 app[web.1]:   Rendered layouts/_footer.html.erb (0.0ms)\n2015-07-21T14:42:02.231009+00:00 heroku[router]: at=info method=GET path=\"/forums/\" host=freeskies.herokuapp.com request_id=cf617d4a-e426-49a7-ae44-48bb0f984ce8 fwd=\"98.207.85.125\" dyno=web.1 connect=1ms service=63ms status=304 bytes=738\n2015-07-21T14:42:04.520761+00:00 app[web.1]: Started GET \"/users/sign_in\" for 98.207.85.125 at 2015-07-21 14:42:04 +0000\n2015-07-21T14:42:04.540200+00:00 app[web.1]:   Rendered users/sessions/new.html.erb within layouts/application (12.8ms)\n2015-07-21T14:42:04.540151+00:00 app[web.1]:   Rendered devise/shared/_links.html.erb (0.5ms)\n2015-07-21T14:42:04.541126+00:00 app[web.1]:   Rendered layouts/_navigation_links.html.erb (0.0ms)\n2015-07-21T14:42:04.542080+00:00 app[web.1]:   Rendered layouts/_messages.html.erb (0.0ms)\n2015-07-21T14:42:04.542246+00:00 app[web.1]:   Rendered layouts/_footer.html.erb (0.0ms)\n2015-07-21T14:42:04.542523+00:00 app[web.1]: Completed 200 OK in 18ms (Views: 15.4ms | ActiveRecord: 0.0ms)\n2015-07-21T14:42:04.524133+00:00 app[web.1]: Processing by Users::SessionsController#new as HTML\n2015-07-21T14:42:04.541940+00:00 app[web.1]:   Rendered layouts/_navigation.html.erb (1.1ms)\n2015-07-21T14:42:04.545009+00:00 heroku[router]: at=info method=GET path=\"/users/sign_in\" host=freeskies.herokuapp.com request_id=b1abf19b-a23b-4509-b9e2-34d3c75d5135 fwd=\"98.207.85.125\" dyno=web.1 connect=2ms service=26ms status=304 bytes=738\n2015-07-21T14:42:05.790281+00:00 heroku[router]: at=info method=GET path=\"/\" host=freeskies.herokuapp.com request_id=ba7dbe85-c709-4d3b-b4ff-a135f9981bc2 fwd=\"98.207.85.125\" dyno=web.1 connect=2ms service=93ms status=304 bytes=738\n2015-07-21T14:42:05.706215+00:00 app[web.1]: Started GET \"/\" for 98.207.85.125 at 2015-07-21 14:42:05 +0000\n2015-07-21T14:42:05.780385+00:00 app[web.1]:   Rendered layouts/_navigation.html.erb (5.9ms)\n2015-07-21T14:42:05.773224+00:00 app[web.1]:   Rendered visitors/index.html.erb within layouts/application (62.1ms)\n2015-07-21T14:42:05.786131+00:00 app[web.1]:   Rendered layouts/_footer.html.erb (0.0ms)\n2015-07-21T14:42:05.709672+00:00 app[web.1]: Processing by VisitorsController#index as HTML\n2015-07-21T14:42:05.774762+00:00 app[web.1]:   Rendered layouts/_navigation_links.html.erb (0.0ms)\n2015-07-21T14:42:05.786444+00:00 app[web.1]: Completed 200 OK in 77ms (Views: 75.6ms | ActiveRecord: 0.0ms)\n2015-07-21T14:42:05.785865+00:00 app[web.1]:   Rendered layouts/_messages.html.erb (0.1ms)\n2015-07-21T14:42:07.282942+00:00 heroku[router]: at=info method=GET path=\"/forums/\" host=freeskies.herokuapp.com request_id=eb542c84-089f-4bce-ba84-c08de0ab584d fwd=\"98.207.85.125\" dyno=web.1 connect=2ms service=41ms status=304 bytes=738\n2015-07-21T14:42:07.240783+00:00 app[web.1]: Started GET \"/forums/\" for 98.207.85.125 at 2015-07-21 14:42:07 +0000\n2015-07-21T14:42:07.253252+00:00 app[web.1]:   Rendered collection (0.0ms)\n2015-07-21T14:42:07.255722+00:00 app[web.1]:   Rendered layouts/_navigation_links.html.erb (0.0ms)\n2015-07-21T14:42:07.262241+00:00 app[web.1]:   Rendered layouts/_messages.html.erb (0.1ms)\n2015-07-21T14:42:07.262730+00:00 app[web.1]: Completed 200 OK in 13ms (Views: 10.3ms | ActiveRecord: 2.3ms)\n2015-07-21T14:42:07.249094+00:00 app[web.1]: Processing by Forem::ForumsController#index as HTML\n2015-07-21T14:42:07.254344+00:00 app[web.1]:   Rendered forem/forums/index.html.erb within layouts/application (3.9ms)\n2015-07-21T14:42:07.258454+00:00 app[web.1]:   Rendered layouts/_navigation.html.erb (3.1ms)\n2015-07-21T14:42:07.262404+00:00 app[web.1]:   Rendered layouts/_footer.html.erb (0.0ms)\nHere is heroku logs: While trying to manually access https://freeskies.herokuapp.com/forums/default\nRendered layouts/_footer.html.erb (0.1ms)\n2015-07-21T14:37:14.372322+00:00 app[web.1]: Started GET \"/forums/categories/general\" for 98.207.85.125 at 2015-07-21 14:37:14 +0000\n2015-07-21T14:37:14.381177+00:00 app[web.1]: Processing by Forem::CategoriesController#show as HTML\n2015-07-21T14:37:14.381253+00:00 app[web.1]:   Parameters: {\"id\"=>\"general\"}\n2015-07-21T14:37:15.105187+00:00 heroku[router]: at=info method=GET path=\"/forums/categories/general\" host=freeskies.herokuapp.com request_id=2fc5f6a4-e647-47af-9d8d-7b12bf77408e fwd=\"98.207.85.125\" dyno=web.1 connect=1ms service=732ms status=404 bytes=1829\n2015-07-21T14:37:15.089366+00:00 app[web.1]: Completed 404 Not Found in 708ms\n2015-07-21T14:37:15.091273+00:00 app[web.1]: \n2015-07-21T14:37:15.091275+00:00 app[web.1]: ActiveRecord::RecordNotFound (ActiveRecord::RecordNotFound):\n2015-07-21T14:37:15.091278+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activerecord-4.1.5/lib/active_record/querying.rb:3:in find'\n2015-07-21T14:37:15.091277+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/friendly_id-5.0.5/lib/friendly_id/finder_methods.rb:23:infind'\n2015-07-21T14:37:15.091280+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/cancancan-1.12.0/lib/cancan/model_adapters/abstract_adapter.rb:20:in find'\n2015-07-21T14:37:15.091281+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/cancancan-1.12.0/lib/cancan/controller_resource.rb:111:infind_resource'\n2015-07-21T14:37:15.091284+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/cancancan-1.12.0/lib/cancan/controller_resource.rb:63:in load_resource_instance'\n2015-07-21T14:37:15.091285+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/cancancan-1.12.0/lib/cancan/controller_resource.rb:32:inload_resource'\n2015-07-21T14:37:15.091286+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/cancancan-1.12.0/lib/cancan/controller_resource.rb:25:in load_and_authorize_resource'\n2015-07-21T14:37:15.091304+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/cancancan-1.12.0/lib/cancan/controller_resource.rb:10:inblock in add_before_filter'\n2015-07-21T14:37:15.091306+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.1.5/lib/active_support/callbacks.rb:440:in block in make_lambda'\n2015-07-21T14:37:15.091305+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.1.5/lib/active_support/callbacks.rb:440:ininstance_exec'\n2015-07-21T14:37:15.091307+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.1.5/lib/active_support/callbacks.rb:160:in call'\n2015-07-21T14:37:15.091309+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.1.5/lib/active_support/callbacks.rb:160:inblock in halting'\n2015-07-21T14:37:15.091310+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.1.5/lib/active_support/callbacks.rb:229:in call'\n2015-07-21T14:37:15.091311+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.1.5/lib/active_support/callbacks.rb:229:inblock in halting'\n2015-07-21T14:37:15.091312+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.1.5/lib/active_support/callbacks.rb:166:in `call'\n. I did forgot to run that.  It is working now. \n@radar Thanks for your help, this is awesome :)\n. ",
    "neocanable": "+1\nwe got same things\n. ",
    "UksonCode": "Problem solved - to use the class outside the module have to be type class prefix \"::\", so there should be\nbelongs_to :group, class_name: '::Group'\n. ",
    "xuliaP": "On heroku writes:\nBundler could not find compatible versions for gem \"rails\":\n       In Gemfile:\n       forem (>= 0) ruby depends on\n       rails (!= 4.2.0, != 4.2.1, != 4.2.2, != 4.2.3, ~> 4.0) ruby\n       rails (= 4.2.0) ruby\n !\n !     Failed to install gems via Bundler.\n !\n !     Push rejected, failed to compile Ruby app\n. ",
    "phillyslick": "@krainboltgreene I can help out.  I did some preliminary fixes, but much much more to do.\n. Looks like a possible conflict between Draper and Decorators:\nhttps://github.com/parndt/decorators/issues/1\n. ",
    "c2169000": "How's this looking? And, could it be related to https://github.com/rubysherpas/forem/issues/697?\n. Or better, set up a reduced test case (https://css-tricks.com/reduced-test-cases/) with http://code.runnable.com/. Also, use Forem's README.md instead of that article.\n. Incase it's not been mentioned before, I used this:\nhttp://stackoverflow.com/questions/3059704/rails-3-ideal-way-to-set-title-of-pages\n. > we have a good size project that has been using the gem for years.\n@benjaminwood same here. I don't want to switch to Thredded.\nAssuming you've found a solution, could you explain a bit to us younger folks why and how you're doing fragment caching in Forem, and how it has improved your app's performance?\n. ",
    "george-good": "Ace thank you! :)\n. ",
    "zakak": "mysql jobs passed, but the tests are failing with a particular seed. Reproducible with any DB so I created a separate issue #687.\n. Commenting this line or skipping the enclosing test passes the other tests.\nspec/generators/install_generator_spec.rb#62\nruby\nObject.send :remove_const, :User\nbundle exec rspec --seed 49750 spec/generators/install_generator_spec.rb spec/models/topic_spec.rb fails at spec/models/topic_spec.rb#95\n``` ruby\nfails\nexpect(topic.subscriptions.last.subscriber).to eq(subscription_user)\npasses\nexpect(topic.subscriptions.last.subscriber.attributes).to eq(subscription_user.attributes)\nfails\nexpect(topic.subscriptions.last.subscriber.class).to eq(subscription_user.class)\n```\n. ",
    "amandasposito": "it seems to be a problem with the rails version , which one are you using ? Take a look https://github.com/rubysherpas/forem/issues/680\n. ",
    "gchiaren": "You might have to prefix your Rails route helpers like so: main_app.your_path. \nFrom the wiki: https://github.com/rubysherpas/forem/wiki/Installing---Upgrading#application-route-helpers\n. ",
    "wemmick": "Ah, I see according to http://www.sitepoint.com/forem-rails-forum-engine/ that you need to add this to the user model:\ndef forem_name\n  email\nend\nI didn't see this mentioned in the installation guide, so y'all might want to update it.\n. ",
    "jack-mcgrath": "What do you mean they can't be used? Could you post a screenshot of the homepage of your forem installation? \n. ",
    "Yorkshireman": "use the inspector in your view and see if the forum_id is present in the html. If it's not, there's something wrong with what you've written above.\nI assume it's Rails? Have you tried using Rails' form helpers?\n. What file is that? And have you got a failing test for this?\n. I've forked it down and trying to run rails server but I'm getting Error: Command not recognized\nUsage: rails COMMAND [ARGS]\nAny advice?\n. ",
    "hakkiplaten": "\nI know the gem isn't really maintained at the moment\n\nA lot of important sites use this gem. I think the main reason it isn't maintained as frequently as before is because there's just not much more left to do.\n. ",
    "benjaminwood": "@hakkiplaten indeed, we have a good size project that has been using the gem for years. I only mentioned that because of the message in the readme:\n\nI am currently looking for a new maintainer for this gem. I am no longer doing any more work on this myself. Please contact me@ryanbigg.com if you'd like to take over this project.\n. Btw, @hakkiplaten, what are your thoughts on topics getting touched on every show action?\n. Hey @c2169000 basically just implementing what DHH describes here: https://signalvnoise.com/posts/3113-how-key-based-cache-expiration-works\n\nCaching has made all the difference for us. Forem was becoming quite slow before we did the caching work. Literally 10+ seconds to load some topics. Now pretty much everything loads in milliseconds to 1.5 seconds for larger topics/forums.\n. ",
    "RubeVi": "@sintro So i replace that gem fro thredded ?. ooohhh, so bad to hear that. @frankie-loves-jesus tought this is dead. ",
    "joxxoxo": "do you mean i should remove this from here? what is the harm of its presence?\n. great idea, thanks\n. ok, i've removed it already. \nand yes, it was usually added to project's .gitignore automaticaly(for example by refinerycms generator), by me or by other collaborators. \nthanks for sharing your point of view.\nmay be you can name any disadvantages of adding this to project's .gitignore?\n. thanks for explanation!\n. ",
    "neerajdotname": "Just curious . Any particular reason why this require vs load is being handled manually. Is Rails not equipped to unload these constants ?\n. "
}