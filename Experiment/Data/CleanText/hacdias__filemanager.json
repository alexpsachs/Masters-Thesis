{
    "hacdias": "Everything here is done.\n. Thanks for reporting that strange bug. I'll see.\n. Another bug: the things are just saving at the second \"Save\". In the first one they're not saving. Is this happening there too?\nEdit: fixed this, and I already saw that this is one of your problems ;)\n. @mholt Hmmm... But that's strange. Why the characters \"??\"?\n. Apparently, when saving, it sends \"{\"content\":\"??\\r\\n\"}\" to the server, so the problem might be there! No? \n. Fixed, thanks @adzeitor and @mholt!!! In 24hrs it will be available on caddyserver.com\n. Caddyfile should be placed where the Hugo files are placed. The root is the content served and content is what's probably causing the main problem. This directive is used to know which folder contains the main content, the markdown files. It will only affect the links, nothing else.\n. It's not that clear in the docs, sorry. I'll change it as soon as I can. Let me know if this was the misunderstanding or if it's something else.\n. Oh... I see. What do you want is to have a a directive where you put the path of the \"static-generator-content-things\" and it runs there, isn't it? I could (or even you!) create that, it could be optional. You do you think?\n. @adzeitor it can't be root because those are the served files. What do you suggest?\n. Oh... I figured out that content is always the same as root. So, I can remove content variable and add workdir or something like that.\n. So:\nroot [path/to/public/folder]\ncms [path/to/execute/things] {\n    styles  file\n    command cmd\n    args    args...\n}\nI'm thinking about merging command and args too. What do you think?\n. I'm making the changes and I found out that there's a mistake here. content =/= public. Content is the folder where are the content files like pages and posts. Public is the generated HTML. So the content directive should be used.\n. I'll update the docs to make that clearer.\n. Try executing from source to see if is good!\n. It will be resolved when #27 come true.\n. Hi @adprof \nI can't really understand what's wrong. But there's a trick: see the developer console! It might help! Then send me the error so we can analyse it.\nYes, I'm opened to all suggestions!\nHave a nice day,\n. Eheh thanks.\nI've been using Chrome and IE and I haven't had those problems. 404... that's very strange because it only occurs with Safari and I can't test. I don't have any OS X machine I can use.\n. @mholt yup. I'll see when I've them. In the weekend probably.\nI saw this and I think I've some improvements to do. I'm assuming that in all object-like-things there is a string-name to identify the content. Eg:\njson\n{\n  \"obj1\": {\n    \"string1\": something,\n    \"string2\": something\n  }\n}\nWhere \"string1\" and \"string2\" are the \"identifiers\". May I create something like this:\njson\n{\n  \"obj1\": {\n    1: something,\n    2: something\n  }\n}\nor even like this:\njson\n{\n  \"obj1\": {\n    something,\n    something\n  }\n}\n?\n. @mholt @adprof I think it's returning 404 here. And it shouldn't be 404, it should be 400 bad request. I've to change that,\n. @adprof may you build it from source? If so and if you keep getting 404, we will know that it is this 404.\n. Sure, I'm going to sleep now. (GMT+1 very similar ahah)\n. Please take all a look here.\n. @mholt \n. @adprof Hi! It's been a while. Do you still receive those errors?\n. @adprof the fix was deployed and it's now available for download! Try it out and let me know if you still receive the error!\n. Hi @adprof \nRelatively to the first error, I have to see that. I know what the problem is. The problem is that, right now, the plugin only supports dates in \"2006-01-02 15:04:05-07:00\" so it can schedule posts.\nSecond error: please send me your json/toml/whatever-your-frontmatter-is so I can see where the problem is. If your frontmatter is valid, I have to check where I have the error.\nFor the third error we need to call @mholt!\nI'll not be home this weekend so I'm not going to do anything in the next three days but I'll wait for your answer.\nHave a nice day!\n. @adprof Hi. Do you still receive any errors?\n. So I can do that. I think it's better too. When I've time, I will change it to \"caddy-hugo\" again and make the changes on csddyserver.com repo and in the registry. I'll wait for your answer @mholt!\nSure it will keeo being modular as it is @adprof!\n. @mholt yes. Why waiting? =P I think it wouldn't be a great problem.\n. TODO: change the directive and repository name.\n. Hi @adprof \n~~I liked your (very extensive :P) opinion and created a simple roadmap. I don't have too much to say, just that the plugin currently has a toml/yaml/json editor. I hope this weekend I can do more things.~~\nEdit 6 feb 2016: I think issues is a good place to have the plans for new features. I don't think we need a full featured roadmap.\n. Is it being used already? cc @mholt \n. @mholt let me know when should the directive be changed! :)\n. Thanks ;) I'll change it.\n. Thank you!\n. @derekperkins I will add the screenshots soon. Thanks for the suggestion. I have new ideas to add to this plugin :)\n@mholt maybe.\n. I can't reproduce the error as well and as you said, you still receive the panic without hugo and search, so the problem can't be generated in caddy-hugo, right? O.o\n. Thanks @mholt!\n. Hi @matthewp!\nThanks for reporting this, but this is strange. The binary available at caddyserver.com gives that error, but running from source, I get no errors. So I can't reproduce the error.\n@mholt, what do you think about it?\n. @matthewp @mholt I checked and the problem is NOT in buildsrv, neither in caddy-hugo. I builded caddy + hugo locally using caddydev and buildsrv and I get no errors with both of them. But I get those same errors when downloading from caddyserver.com.\n. Hi @jdaivaliotis \nThanks for telling us your workaround. Here, I just can\u00b4t reproduce the error. The difference between Run and RunE is that the last one returns an error. Can you change it to err := commands.HugoCmd.RunE(nil, nil) and check if there is an error?.\n. This is getting even more strange. Now I also get the error with caddydev. -_- And using RunE I don't get any error.\nI think @spf13 should take a look on this.\n. @jdaivaliotis OMFG. That's the problem. But they used to have!!! So... I think the problem is solved. Thank you, a lot!\n@mholt I hope you can update the repo's as soon as possible.\n. Eheh\n. Hmmm... What's the content of your config.toml? That's the easier way to see what's wrong and I think I know what it is.\n. Try replacing [[menu.main]] with [menu.main]. That's why it is throwing an error. Later I'll check if I can make it work with that syntax.\n. I'll close the issue, but I think I should have a look at it.\n. Thanks for reporting. I'll have a look at it.\n. I think it's fixed. Now the content you've works. Note: this issue's cause is not related to #35.\n. I would like something that allowed me to have more than one user.\n. That's great. Do you know if those issues are being worked?\n. I'll close this for now due its inactivity.\n. Merge with #38\n. Done, but it can be improved.\n. I see (more or less). But right now we can only support one user. How would this be useful?\nP.S.: I don't know if you're using the version on this repository or the version that can be downloaded at caddyserver.com. I recommend you to build it from source to try out the new version which is very less buggy.\n. I'll leave this issue open because it can be something to try in the future. If you want to do so, go on and try. :+1: \nRight now I think there is a new auth plugin for caddy in the kiln so I'll wait for that. But you can test it!\n. The problem is that I don't even know how to try it. I would have to investigate the code of Leaps and then see how could it be integrated with caddy-hugo. Anyway, I recommend you to read this article which may help you :D You'll get it!\n. You're welcome!\n. The main contente text areas are the ones with name=\"content\" like here and here. \nJust for reference, you've to know that those text areas are not visible, they're hidden. What is shown is the Ace Editor (see here).\nGo on and try it! :D\n. Execute first cd /root/caddy-hugo & go generate.\n. @faddat I will close this issue for now because I think caddy-hugo doesn't need this heavy app right now. But I'll leave a reference to #39. Maybe in the future :)\n. After some research, the but might be on Hugo. The static files are copied correctly, but the path for rendering is not correct.\nFound out that to fix this bug, I've to make a change on Hugo source.\n. Maybe. We've to choose a very simple one. There is a website with some Hugo themes.\n. Hey @jlsjonas,\nThanks for your suggestion. It seems to be a very good choice indeed. That what I'll probably do. Now I'm   a little busy with school exams but later this month I'll do that. \n\nI've also another idea: create a \"section\" in the interface where you can download themes and install them into your website. Do you like it?\n. Moved to #77.\n. Note: https://github.com/spf13/hugo/blob/master/create/content.go#L35\n. Ahah... I just commented that so I can remember what to see later. It's a note for myself. Don't worry :)\n. Of course! =D\n. Yes, but due to the Hugo architecture the watch option won't work on multi site installations (there's no way to create an Hugo instance). \n. No, you can simply go to the admin interface, open something like config or\na post and click \"Publish\". I'll add a Build button to the interface.\nOn Feb 19, 2016 10:53 PM, \"Benjamin Hagels\" notifications@github.com\nwrote:\n\ndamn :-/ that is a little bit anoying so I have to restart caddy-hugo each\ntime I update or add content?!\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/hacdias/caddy-hugo/issues/47#issuecomment-186440731.\n. This will not affect the new version anymore.\n. Hello @bzerangue! Like to hear that someone is using (or trying to use) caddy-hugo! Hope you enjoy and hope @faddat can help! Thanks for helping @faddat :)\n. You're welcome :D\n. I've never done that so I can't help you with that :(\n. I'll close this issue right now because of the lack of the activity on it. If you want to reopen it, just tell me. :+1: \n. Hello @liz-miller, if you really need it, I could do it in the weekend probably, but tell me: what have you already done and where is it failing? \ud83d\ude42 . To use caddy-hugo you'll need to have it set up on your own server but it seems you're using Github Pages. Anyway, if you can send me the Caddyfile I can check if it has got any error related to hugo \ud83d\ude04 . You can host a Hugo website using Github Pages but you can't use Caddy + this plugin with github pages.. I'm not sure how does AWS work (never used it). But if it's like a VPS it will work for sure. . Hey @faddat \n\nI think that some more examples could be added to the documentation, but only the ones which use caddy-hugo.\n. I'll close this issue due to its inactivity. If you want to continue this issue, I'll be available to answer :+1: \n. ? Is that a correction or a question? :+1: confused. Sorry :|\n. Hello!\nThat \"error\" is normal. That's why you have to execute go generate then. It can be skipped, or is it preventing you to continue?\nExplanation\nThat error happens because there's no .go file in assets when you clone the repository. When you execute go generate the following commands are executed:\nbash\ngo get github.com/jteeuwen/go-bindata\ngo install github.com/jteeuwen/go-bindata/go-bindata\ngo-bindata -pkg assets -o assets/assets.go templates/ assets/css/ assets/js/ assets/fonts/\nThe last one will build an assets.go file in assets. After that, you should not receive that error anymore.\nA question\nWhy are you using \"FROM abiosoft/caddy\" if \"mholt/caddy\" is the actual repository and \"abiosoft/caddy\" is just a fork?\n. Thank you too! I'll close this issue for now. When you publish the Docker file, let we know! :)\nHave a nice day!\n. Hello @ludovicc \nAs I understood, you are running caddy-hugo from source, so there are some differences from the documentation. I've implemented a new idea that's already on master but not detailed in the docs.\nInstead of:\nhugo /srv {\n   cmd \"--buildDrafts --watch --baseURL=http://localhost:2015/ --bind 0.0.0.0 --port 2015\"\n}\nTry:\nhugo /srv {\n   buildDrafts\n   watch \n   baseURL http://localhost:2015/ \n   bind 0.0.0.0 \n   port 2015\n}\nHope it helps!\n. Hey,\nThat's everything you have on your caddyfile?\nIt should be something like this:\n```\n0.0.0.0:2015\nroot /srv/public\nhugo /srv {\n   buildDrafts\n   watch \n   baseURL http://localhost:2015/ \n}\n```\nTry that pls :D\n. @ludovicc any news?\n. Hmm... Nope. Try to update the repository and if that doesn't work, let's see what @mholt knows.\n. Even /admin?\n. Strange... So that's not a problem of caddy-hugo I think. What's your configuration? And your Caddyfile?\n. Try this Caddyfile:\n```\n0.0.0.0:7011\ntls off\nroot      /srv/public\nhugo /srv {\n   buildDrafts\n   watch\n   baseURL http://localhost:7011/\n}\n```\nRun /home/go/bin/caddydev --source /home/go/src/github.com/hacdias/caddy-hugo and go to http://localhost:7011/ and http://localhost:7011/admin to try it out, please. \nHope it helps!\n. I've made some changes in the way caddy-hugo uses Hugo and now it installs Hugo in a different folder. I'll see if I can fix that bug and then you test it.\nIt's strange that your OS is not using Caddyfile. Are you running caddy in the same folder as caddyfile? That's really strange. \nAnyway, the second way you run is doing what's expected. There's just a bug I need to fix. What's your OS?\n. One more thing: I started using Bintray with Travis so the people who don't want to download the source code and compile it from source can still use and test the latest versions of caddy-hugo. If you're only using this plugin, you can download the build from here: https://dl.bintray.com/hacdias/generic/caddy-hugo/ . Always open the last folder, which is the one that has a bigger number. And download the version for your OS.\nI'm really sorry for this situation :(\n. Try using the latest version on Bintray, please.\n. Hello!\nTry with the version of caddyserver.com please. It's the latest version of\ncaddy-hugo like on Bintray, but it has the other plugins and stuff more\nupdated.\nIf that error persists, you should contact @mholt.\nThanks :)\nOn Apr 6, 2016 12:47 AM, \"Ludovic Claude\" notifications@github.com wrote:\n\nHello, sorry for the long delay. I'm trying with the version on Bintray,\nbut it doesn't seem to support disabling tls and Letsencrypt certificate\ngeneration.\n/usr/local/bin/caddy -port 2015 -log /var/log/caddy.log\nActivating privacy features...2016/04/05 23:44:10 [tls] failed to get\ncertificate: acme: Error 400 - urn:acme:error:malformed - Error creating\nnew authz :: DNS name does not have enough labels\nCaddyfile:\ndisable HTTPS to run the server on localhost\ntls off\nthe folder where Hugo generates the website\nroot /srv/public\nenable the admin panel\nhugo /srv {\n   buildDrafts\n   watch\n   baseURL http://localhost:/\n}\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly or view it on GitHub\nhttps://github.com/hacdias/caddy-hugo/issues/53#issuecomment-206038519\n. You're welcome! :) I hope you enjoy the plugin. If you have some suggestions to make it better, don't forget to tell me!\n. Hello! Is your caddyfile in the same folder as your hugo website?\n. Try this Caddyfile:\n\n```\nlocalhost:2020\ngzip\nlog ./access.log\nerrors ./errors.log\nroot ./public\nhugo \n```\nAnd what's your OS?\n. One thing: I never tried Hugo with gzip. If the error persists, remove the gzip directive to see if it works. \n. Hey!\nThose are good news. And thanks for reporting that it was an access error.\nI'll fix that when I can.\nBr\nOn Feb 25, 2016 11:51 AM, \"tonka\" notifications@github.com wrote:\n\nClosed #54 https://github.com/hacdias/caddy-hugo/issues/54.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/hacdias/caddy-hugo/issues/54#event-565458066.\n. When this PR is merges (https://github.com/caddyserver/caddyserver.com/pull/32) it will be updated too!\n. Moved to #77.\n. When you say out of the box you mean you downloaded it from http://caddyserver.com, right?\n. Strange. No one had that problem until now. Are you sure your js is enabled? If so, please check the console on developer tools (normally F12) on the browser and check if there are any errors. If so, paste them here pls.\n. Also, please check the source of those pages and check if the buttons have the data-type attribute defined somehow like they are in this file: https://github.com/hacdias/caddy-hugo/blob/master/templates/editor.tmpl#L49 .\n. No, the source of /admin/edit/content/home.md PLS. \n. Why are you using browse directive? Try removing it please. \n. Please give me the source-code of http://localhost:2020/admin/edit/content/home.md so I can check if Go vars are being evaluated, pls.\n\nAnd please check the console of developer tools of your browser to see if there is any error there or some valuable information.\n\n. Hmm... I've only tested it on Chrome and Edge. Later today I'll test it on other browsers.\nI didn't want the source code of \"home.md\"! I want the source of the page when editing the file. Open the URL, right click on the page, and there should be a button which says \" View Source\". But if it works on Chrome, the problem is not in there. It might be in JavaScript. \nSo, can you please check the console of developer tools on Firefox. The console, not the headers of the response.\n\n. Just for reference: it works on Firefox for Android.\n. Hey @bronzehedwick! I just tested with Firefox and it works here. But do the following, please:\n1. Open the page in firefox\n2. Open the developer console tools and go to Network tab\n3. Save the file.\n4. Click in the latest POST request it shows.\n5. In the right side, click in Headers.\n6. Copy the Request headers and paste them here.\nThey should be something like this:\nHost: henriquedias.com\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:44.0) Gecko/20100101 Firefox/44.0\nAccept: application/json, text/javascript, */*; q=0.01\nAccept-Language: en-US,en;q=0.5\nAccept-Encoding: gzip, deflate, br\nContent-Type: application/json; charset=utf-8\nX-Regenerate: false\nX-Content-Type: content-only\nX-Requested-With: XMLHttpRequest\nReferer: https://henriquedias.com/admin/edit/content/teste.markdown\nContent-Length: 17\nCookie: __cfduid=------------------------------------------\nAuthorization: ------------------------------------------\nConnection: keep-alive\n. P.S.: I know caddy-hugo is adding a new line in the beginning of the file. It will be fixed in the next version.\n. Hello!\nThe problem is with X-Content-Type header indeed. If you're only using Hugo plugin, please download the newest version from here. Those executables use the version from this repository.\nIf the error persists, open http://localhost:2020/admin/edit/content/home.md, right click on the page, and then click View Source (or something like that). Then, copy and paste what you see here, pls.\n. @bronzehedwick any news?\n. Sure \n. Try out a newer one please: https://bintray.com/hacdias/generic/caddy-hugo/1457192002/view\n. Hey @justrjlewis!\nFor the configuration can you please open an issue and paste there your  config file?\nYou are using the latest version from caddyserver.com or from Bintray?\nCan you please check the log? Or execute caddy with -log stderr flag to see what the error is, please?\nThanks \n. You should have a config.toml in the folder you have your Hugo website.\nHave you run Caddy with the flag I mentioned before?\n. @justrjlewis open a new issue, please.\n. I'll try to solve this this weekend!\n. Hello @bronzehedwick \nPlease try out this build and check if it works now!\n. ~~What the....?? Just one more thing: the Publish button regenerates the website?~~\nThe error persists, but in a different way! But now I think I know what to do! OMG I did so many changes and the error was always on JavaScript.\n. Hey @bronzehedwick \nTry this build please! I think it will work! :D\n. Awesome! Thank you too :D \n. Hello @amsoell!\nI'm really sorry to hear about that :(. It is probably the same thing as #58. Try executing caddy with -log stderr as a flag, then try to save the file and paste the error here (that is shown in the console).\n. > The XHR request (which goes to https://mettle.works/admin/edit/content/about.md) comes back with the following:\nWhen you say that, you are telling that when you click the button \"Save\" that is what the response is, or that is just the source code of that page?\n. Hello @amsoell!\nPlease check out this build and see if it works now, please!\nEdit: new build link.\n. I'll close this issue because it was related to #58, which is already closed.\n. Hey @klingtnet \nWhat's the version of Hugo that's installed on your computer? Was it downloaded when you first executed Caddy with caddy-hugo plugin?\nEdit:\nIf your Caddy configuration file is:\nlocalhost:80\nroot /tmp/hugo\nhugo\nAnd your are running on /tmp, you mean: the static files will be on /tmp/hugo and Hugo website will be created/or is on /tmp. I think you wanted to mean something like this:\nlocalhost:80\nroot /tmp/hugo/public\nhugo /tmp/hugo\nTry it, please.\n. > The version from there seems to be fairly old.\nWhat? From where? The latest stable version is 0.15!\n\nAs you can see here, the plugin checks if Hugo is in the Path. If so, it will return its path and use that version of Hugo. If it doesn't, he will check if it's on $HOME/.caddy/bin. If it doesn't, it will be downloaded from GitHub releases (the same that are available at gohugo.io) to that location and return the path of the executable.\n\nRemove everything from $HOME/.caddy/bin and remove all the Hugo executables you have on your computer.\nThe error you are receiving doesn't make any sense because the command that is being executed is hugo new site /tmp/hugo --force. Unless you have a very old version on your computer that doesn't support --force flag, I can't understand what's going on.\n\nDownload Caddy + Caddy-Hugo from this repository because caddyserver.com still doesn't have the latest updates of caddy-hugo. CC: @mholt\n. Hey @klingtnet \nDownload caddy + caddy-hugo from here. Download from the last folder. The version on caddyserver.com has that bug. I'm waiting for @mholt to update it whenever he can.\nThe link above only has caddy-hugo plugin. It's automatically built every time this repository is updated. I fixed that yesterday, so the executables in that link should work.\nAnd thanks! I'll add a \"p\".\n. Why those double dots? The link should be https://dl.bintray.com/hacdias/generic/caddy-hugo/1457123545/caddy_linux_amd64.tar.gz and not https://dl.bintray.com/hacdias/generic/caddy-hugo/1457123545/:caddy_linux_amd64.tar.gz. I can open it here.\n. O.o I see. Don't know why they use the colon on download page. \nSure :)\n. Thanks. I'll change that here. :)\n. After this build is finished, the new binaries will be available on the same link as the others.\nI hope you enjoy the admin interface! And help building it, if you want to =D\n. New v. already available! :D\n. > You forget to set the executable of ~/.caddy/bin/hugo after downloading it. After setting the flag, everything works fine!\nI'm not unedrstanding. Forget what? The chmod stuff?\n. Oh... I'll add that :D Thanks. I think I can close the issue now. Enjoy it!\n. You're welcome!\n. Hello @justrjlewis \n- Are you using caddy-hugo with an existent website or creating a new one?\n- If you already have an existent website, please show me your Caddyfile.\n- Paste here the result of ls command on the root of your Hugo website.\nThe error you're getting is very strange. What's the URL of the page you are trying to access?\n. Anything new?\n. This issue will be closed due to its inactivity. If the error persists, just comment.\n. Sure!\n. Hey @faddat!\nThis is not the right place to say that (ahah), but congratulations and thanks at the same time. If you want to say something else, send me an email or open a new issue, ok?\nHave a nice day!\n. I am closing this issue for now because of its inactivity and the fact that this plugin would be useless without the admin interface. We can discuss how it couldn't be in the future.\n. I hate the first error. It means that that function was unexported bu the Hugo team. I've opened an issue. \n@mholt how should I fix the second part? With the removal of \"Root\" what should I do to set the path where the Browse middleware must act?\n. Thanks @mholt. Now we've to wait for Hugo team.\n. Have you updated caddy-hugo? I already changed the field root to config \"section\". o.O\n. What should I do @mholt? Do I have to create an http.FileSystem for the root path? Before I just had to set the root path in browse! :P \n. Check it now please ;)\np.s.: don't update Hugo repository because its latest version unexported a function I need.\n. You're welcome. Now we just have to wait for Hugo guys to unexport the function. I think I'm going to make a PR.\n. Hey @Bitti09 \nThey already exported the needed function. Please update the repositories and try again ;)\nLet me know if it works! \n. Don't worry about that error. You must run that command after cloning/updating the repository. It's in the readme.\nI'll close the issue then ;) I hope you like the web interface for Hugo! If you have some suggestions, tell me!\n. Thanks ;)\n. Moved to #77.\n. Moved to #77.\n. Hey! Can you post your config.toml file here, pls?\n. You downloaded from Caddyserver.com or built it from source?\n. I guess the problem (with caddy-hugo) might be in this kind of \"[params.postAmount]\". Right now, I've some school exams, but I'll try to resolve this then. Hope you don't mind :(\n. Thanks ;)\n. Thanks for reporting this ;) I'll change it ASAP.\n. Fixed.\n. Hey @brasilikum \nI agree with you on one thing: I think generally iframes are an ugly thing. Even in this case. The most similar thing I think that would work would be the temp directory regenerating himself after those 2 seconds of not-typing and showing up a kind of a popup asking to go to temp dir. \nI don't really know what is the best approach here. Do you have any other idea besides the iframe?\n. Yup, I agree with you in the auto recompile thing. I just don't like the\niframe. But we'll find a way! :D\n. Hey @fedelibre! Sorry, but the functionality is unavailable for now. This issue was referring an older version. I'll update this. Although, I'll create a preview mode soon for the whole website.. Thank you. \n. Thanks ;)\n. Hey @chesedo!\nThanks for reporting this. I had already noticed this problem and it will be fixed ASAP. I'm working in a major update for caddy-hugo and this will be fixed then ;)\nI hope when the version 0.9 of Caddy is officially released, the new version of this plugin will also be released.\nThanks again. I'll leave this issue open until I have the confirmation that it is fixed! \n. Sure, I'll be waiting for them ;)\n. I've checked and it's fixed. ;)\n. Yup. \n. Hello! Thanks for that. Can you move this issue to caddy-filemanager? Hugo will be built on top of File Manager and file manager will be on charge of editing files.\n. @mholt and @abiosoft: what do you think?\n. I need to ask you one thing: is go generate executed before each build, or after the server starts?\n. And is it executed after setting GOOS and GOARCH or before? @mholt \n. I would like you to take a look at this and this files when you have some time. :D\n. Done! Done! And done! :D Let's see what's going to happen. I ask you @mholt to check if everything on build/main.go can be executed on the build server (I think it can).\n. Gonna close this because from now on, the user must install hugo for themselves.\n. Apparently I have already done this \ud83d\ude2e . Hello @icyleaf!\nThat was already fixed and in the meanwhile I've also changed how caddy-hugo installs hugo. The problem is that the version on caddyserver.com is not up to date with this repository yet.\nWhat you can do right now is build it from source OR download the hugo binary to $HOME/.caddy/bin/hugo. \nThanks :)\n. I'm not sure if this would work, but try basicauth /admin/content user pass. I think it will conflict with the the \"super admin\" but try anyway.\n. So, I don't know any way to do this right now. How is the auth plugin @mholt? I've read that there was someone doing it.\n. I'm making huge updates to File Manager to support a bit of Access Permissions. Check out the closed recent closed issues. I'll update this plugin in some time to work with those permissions.\n. Check out #87. It seems to be working fine :P\n. Hey @anxiousmodernman! Sorry, I've fixed this bug some weeks ago, but the new version is not still available for download at caddyserver.com.\nJust pinging @mholt\n. Awesome :smile: \n. Hi @brasilikum! Thanks! I'm really happy to hear that from you. It's always enjoyable to know that someone is using what we've done and that it is really helping somehow. I hope you use it for long! Do you have any suggestions? :smile: \n. Good idea, but I ask you to move this question to File Manager issues :)\n. Strange... Have you received any error in the Developer Console? \n. Hey @brasilikum! On browser, right click in the page and select \"Inspect\". It will open the Dev Tools. Then open the Console and check if there are any errors there, please :) Like this:\n\n. Hey Georg! I think that I only return 403 when the error is related to the\npermissions. Do caddy has permissions over the files?\nAnyway, I will check that out later when I have my laptop. :)\nOn Wed, 7 Sep 2016, 09:26 Georg Hartmann, notifications@github.com wrote:\n\nok, so this is not so easy to track. It works some times, however as there\nis no output, I simply thought it had not worked. I will suggest a visual\nfeedback on success in another issue. However the second time I got 403,\nbut also no visual feedback. Why would that be?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/caddy-hugo/issues/92#issuecomment-245210938,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFMdsNDEtaOymjgckTBYjO95743swJ67ks5qnnVGgaJpZM4JypWk\n.\n. Okay, check it out and let me know :)\n\nOn Wed, 7 Sep 2016, 09:49 Georg Hartmann, notifications@github.com wrote:\n\nok, the permissions might be the problem.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/caddy-hugo/issues/92#issuecomment-245216479,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFMdsBd3KkOSZT3P2xrMEsP5AO2GT0ulks5qnnqPgaJpZM4JypWk\n.\n. I'm going to close this due to its inactivity. If there are any updates, tell me!\n. Sorry!!!! I've updated the syntax in the last version but the docs weren't updated. Try flag watch.\n\nPinging @mholt\n. Yup. Glad it worked :smiley: \n. Hello @eternaltyro!\nThere is a little different new syntax. Check it out. I changed it because it now can wrap the File Manager options. Read it! I think you'll like it :smiley: Any other doubt, tell me!\n. Hey @eternaltyro, everything is working here with the newest version (0.17). And what you sent is valid, yes.\n. Glad to know that you figured that out \ud83d\ude04 \n. Hey @Jamesits! I just searched about it and it does not seem a problem with Hugo, nor Caddy, nor Go. Please check this issue on docker to see if it helps please.. I knew you weren't using Docker. I just sent you that issue because I thought the answers could help.\nBy the way, when does that happen? When it supposedly runs the hugo binary?. Okay @Jamesits, but let me know if it happens again.. Hello @mdaguete!\nThanks for coming up with this! I forgot some things here when making some changes on File Manager. I just committed a possible fix. Can you build it from source and try it please?. Hey @mdaguete! Sorry about that. Check it out now \ud83d\ude04 . You're welcome! It's my duty \ud83d\ude04 . @valentinvieriu hey! Sorry, but this fix is not yet available on caddyserver.com. You have to build Caddy from source with the plugin.\nPinging @mholt. I can built it from you if you want. Just tell me the plugins, the OS and the architecture and I'll send you the binary file. @valentinvieriu . @valentinvieriu Unfortunately I can't. Only @mholt knows. Let's wait for his answer.. There was a new release of Caddy. The plugins weren't updated I think. Sorry for that. I think @mholt will make some changes in the build server soon related to the plugins and then I can deploy the fixed immediately.\nIf you want, you can tell me your OS and Architecture and the plugins you want and I'll build the binary for you with the newest things.. Hello! You just have to click on the button in the bottom right corner of the screen \ud83d\ude04 hope it helps!. Hey @vanlong441: don't you receive any error in the console, or in the Developer Tools?. That is the same error as #97. I already fixed that but it's not currently available on caddyserver.com . Could you build Caddy from source with this plugin to check if everything runs as expected?. Closing due to inactivity.. Hey @ndarilek! That's a really good idea, to create some hooks before and after some actions. What if:\nbefore_save\nafter_save\nbefore_publish\nafter_publish\nWhat do you think?. Yes, the options I mentioned are meant to be general, not only for Sandstorm. But, are you using caddy-hugo publish button? If not, you could just use filemanager instead.. The only differences between hugo and filemanager is that the first can run the hugo commands, create files based on the archetypes, schedule and publish. filemanager doesn't have those options.\nAnyway, I'll probably create this options on filemanager:\nbefore_save\nafter_save\nAnd these will be specific to hugo plugin:\nbefore_publish\nafter_publish\nAfter each of those directives/options you'll be able to put a command. And I'm thinking about creating a variable (probably $file) that we'll be replaced with the file path. It can be useful for some cases.\nWhat do you think?. You're welcome! I'll mark this as a todo. I'll do it when I can \ud83d\ude04 . I just made a few changes. Can you build it from source and try, please? \ud83d\ude04 . Closing since it's already done.. It isn't available yet on caddyserver.com but I'll ping you as soon as it is. \nPinging @mholt. Updated @ndarilek on the server!. Hello @fghhfg! Do you still need help?. Yup :) hope you enjoy it!\nOn Fri, 13 Jan 2017 at 14:46, fghhfg notifications@github.com wrote:\n\nNo, thx. If someone has same problem, check link\nhttps://gohugo.io/overview/quickstart/\nAnyone who wants to use this program needs to know some Hugo knowledge.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/caddy-hugo/issues/101#issuecomment-272459567,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFMdsJvUrvdVKUcUdOy0qHFtLuFKypFxks5rR444gaJpZM4Lign5\n.\n. Hello @AstonDavies,\n\nCan you try replacing /www/site/public for \"/www/site/public\". Anyway, I'll try to reproduce this as soon as I can.. Hey @AstonDavies!\nThanks for your insight! \ud83d\ude04 It's fixed.. Solved on #97. Will be available on next version or building from source \ud83d\ude04 Sorry for that.. Sorry but I don't receive any error here @AstonDavies :/ Can you show me your config.toml so I can try to reproduce the error?. Hey @AstonDavies, I'll solve it as soon as I can. In the meanwhile, can you transfer this issue to https://github.com/hacdias/caddy-filemanager/issues? This issue is related with File Manager code. \ud83d\udc4d . Thanks for reporting this. I'll have a look! \ud83d\ude04 Though, this is related with FileManager code eheh. Don't need to move though.. Done @AstonDavies!. Hello! Yes, I made it to make sure that if some page is deleted that it wouldn't be available. What are the downsides of this? \ud83d\ude04 But I can do that soon \ud83d\ude03.\nP.S.: Sorry for the delay answering.. Just added an option clean_public which defaults to true but you will be able to use it to prevent the removal of public folder before each generation \ud83d\ude04 . Thanks for the suggestion @nevf! I'll check this as soon as I can \ud83d\ude04 . Hey @nevf, I've just added a Screenshots section in the README. Do you think it's good? \ud83d\ude04 . Screenshots are available on the README and I'm planning on writing a Medium article soon :). Right now, it can't. But it would be an interesting feature to support other Static Website Generators.. I'll close this now @Fastidious! It will be available soon to download on Caddyserver.com if you're still interested!. Yes, there will be a plugin called 'jekyll' as soon as the next caddy release is out \ud83d\ude04 . I'll ping you when it's out \ud83d\ude04 . Publish @Fastidious! :smile:. You can see more here: https://henriquedias.com/filemanager/caddy/\nI'd do this:\n```\nquark.business {\n        root /var/www/html\n         jekyll /var/local/jekyll/quark.business/\n    log /var/log/caddy/quark.business.log {\n            rotate_size 1\n            rotate_age  7\n            rotate_keep 1\n    }\n    header / {\n            Strict-Transport-Security \"max-age=31536000\"\n            X-XSS-Protection \"1; mode=block\"\n            X-Content-Type-Options \"nosniff\"\n            X-Frame-Options \"DENY\"\n            -Server\n    }\n    tls {\n            key_type rsa4096\n            protocols tls1.2\n            must_staple\n    }\n\n}\n```. The default credentials are:\nUsername: admin\nPassword: admin\nYou can change them on Settings.. Sure!\nIf you open a file you'll see some buttons on the top bar to publish and everything.. before_publish and after_publish are only run when you publish a new post from the interface and not when the website is generated during the startup of Caddy.. Thanks \ud83d\ude04 . Hello, thanks for pointing this out @benmarte  \ud83d\ude04 . I'm making some improvements and this will probably be available in the next release. Thanks for suggesting \ud83d\ude04 . Hey @chouzar,\nSorry for not answering. I think that you can do an workaround like this:\nafter_publish bash -c 'git add . && git commit -m \"modified content\"'\nCould you try, please?. I don't know what may be causing that error, but maybe something to do with the single quotes and double quotes, not sure. I think I'll have this improved in the next version, so it will be easier for you to set multiple commands \ud83d\ude04 . @chouzar, the new version allows you to set multiple commands (on the global settings page) and they will be executed by order \ud83d\ude04 . From @joeblew99 on June 27, 2016 12:40\ni think so..  \nBleve is great for the job. I used it now on two projects and it was impressive.\nhttp://www.blevesearch.com/\nCaddy uses Bleve already btw \nhttp://www.blevesearch.com/docs/Applications-using-bleve/\n. Thanks ;) I'll see that.\n. From @nwgat on November 1, 2016 13:48\nsearch will be useful\n. Hello @nwgat: I'll just implement a basic search by file name. If someone wants a more powerful search, they can use the plugin built specially for it. BTW, it's already working \ud83d\ude04 \n. From @pwFoo on July 4, 2016 9:29\nIs multiple file / recursive directory upload possible or planned?\n. Hey @pwFoo! Right now you can upload multiple files. I'm not 100% sure about uploading directories.\n. From @Timmmm on September 16, 2016 10:27\nIn addition to uploading by dragging files onto a directory icon it should be possible to drop files on the page background to upload them to the current directory.\n. I know. It's \"dead\" because the new version of Caddy wasn't released yet. It should be released in a few weeks/days and then the link will be available. Thanks anyway :)\nEdit: I added a parenthesis to the project description. \n. From @MSF-Jarvis on July 19, 2016 13:16\nIt's up, might wanna change it now\n. From @k0nsl on July 19, 2016 14:6\nThat's great news. I am really excited to test it out :)\n. From @MSF-Jarvis on July 19, 2016 14:37\nDon't, it's addictive.\nOn Jul 19, 2016 7:36 PM, \"k0nsl\" notifications@github.com wrote:\n\nThat's great news. I am really excited to test it out :)\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/caddy-filemanager/issues/9#issuecomment-233643636,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AMuuGhQPT_BhDEsdT3pk3RiUsrehpAsZks5qXNnggaJpZM4JIdtc\n.\n. Hello!\n\nTry:\nfilemanager {\n  show        folder_you_want_to_browse\n  on            /manage\n}\n. And... it is supposed to show the root set on Caddyfile if you don't set the \"show\" option.\n. From @MSF-Jarvis on July 19, 2016 14:45\nI am using exactly that, but I feel it should be defaulting to the root\nspecified rather than the Caddyfile location\nOn Jul 19, 2016 8:11 PM, \"Henrique Dias\" notifications@github.com wrote:\n\nHello!\nTry:\nfilemanager {\n  show        folder_you_want_to_browse\n  on            /manage\n}\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/caddy-filemanager/issues/10#issuecomment-233654581,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AMuuGrKDAiz8XtSeAkl44XlTCfkKNRwJks5qXOI1gaJpZM4JPuMy\n.\n. From @MSF-Jarvis on July 19, 2016 15:12\n\nI did do a simple \nroot /var/www/roms\nfilemanager {\n  on            /manage\n}\nTo end up looking at my /root dir, I'll try to run a couple of tests and get back to you so closing it for now.\n. Hello!\nTry:\nfilemanager {\n  show        folder_you_want_to_browse\n  on            /manage\n}\n. And... it is supposed to show the root set on Caddyfile if you don't set the \"show\" option.\n. From @MSF-Jarvis on July 19, 2016 14:45\nI am using exactly that, but I feel it should be defaulting to the root\nspecified rather than the Caddyfile location\nOn Jul 19, 2016 8:11 PM, \"Henrique Dias\" notifications@github.com wrote:\n\nHello!\nTry:\nfilemanager {\n  show        folder_you_want_to_browse\n  on            /manage\n}\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/caddy-filemanager/issues/10#issuecomment-233654581,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AMuuGrKDAiz8XtSeAkl44XlTCfkKNRwJks5qXOI1gaJpZM4JPuMy\n.\n. From @MSF-Jarvis on July 19, 2016 15:12\n\nI did do a simple \nroot /var/www/roms\nfilemanager {\n  on            /manage\n}\nTo end up looking at my /root dir, I'll try to run a couple of tests and get back to you so closing it for now.\n. This issue was moved to hacdias/filemanager#121. Hello @pbeckmann!\nThanks for reporting this. I have a question, when you do that, is there any error on browser's developer console (on dev tools)?\nIt was supposed to work...\nThanks!\n. From @pbeckmann on July 28, 2016 19:46\nHello,\nhm, i just started the pc to look this up, but now it works :+1: \n:curious:\nSorry for the disturbance.\nGreetings & Thanks\n. No problem. :) I will always hear. Hope you enjoy it.\nBy the way, 403 is a forbidden error. Probably was something preventing caddy to access your files or changing its permissions.\n. Hello! Thanks for using the plugin and reporting this. I'll check it out tomorrow morning. :)\n. Hello! Is that path relative to Caddyfile? Or to root?\nIf it is relative to root, try changing it to ./public/assets/css/filemanager.css.\n. From @bronzehedwick on August 2, 2016 13:25\nThanks for the reply!\nThe path was relative to the Caddyfile, but the assets directory is used for SASS, and other things to compile from, so not directly available from the webserver.\nI moved the file into static, so it would sync to public on a Hugo build; the file path is public/css/filemanager.css with the corresponding url at localhost:2020/css/filemanager.css.\nI thought that might fix it, but sadly no dice.\n. Hey!\nWhat is the error you get?\n. From @bronzehedwick on August 2, 2016 18:28\nI actually don't get an error; my custom styles just aren't loaded when I view the page.\n. Can you check a thing? Open any page of file manager and view its source. Check if there is a <styles></styles> tag in the head. \n. From @bronzehedwick on August 3, 2016 13:39\nNo <link> tag matching my file, I'm afraid. Here's a screenshot.\n\n. Hello!\nLook at lines 11 to 13. I already know what the problem is :D Thanks.\n. I just pushed a fix. If you can run this from source, please try it to check if it works now please. :D\n. From @bronzehedwick on August 3, 2016 14:53\nWill do, thanks!\n. From @bronzehedwick on August 3, 2016 15:41\nNew to go, so perhaps I have a different problem with my environment, but after cloning this repo, and doing go get github.com/mholt/caddy/caddy and go get github.com/hacdias/caddy-filemanager then run go build inside the repo, I get this error:\n```\ngithub.com/hacdias/caddy-filemanager/assets\n../../gowork/src/github.com/hacdias/caddy-filemanager/assets/assets.go:19: undefined: Asset\n``\n. Beforego buildexecutego generate` please.\n. From @bronzehedwick on August 3, 2016 17:20\nStill get the same error. Should I not have done go get github.com/hacdias/caddy-filemanager?\n. Oops.. I forgot to mention one thing. You have to run go generate in the folder where caddy-filemanager is located! Sorry :/\n. I added the file to the repository to avoid this problem in the future. But it is always recommended to execute go generate before building the package.\n. From @bronzehedwick on August 4, 2016 19:13\nI apologize, I can't seem to figure out how to compile a custom binary of caddy with the updated caddy-filemanager code... does go build output a binary somewhere in my go path?\n. Hey @bronzehedwick! To build a custom caddy, you can use caddydev.\n. From @bronzehedwick on August 4, 2016 20:26\nAh ha, thank you! Appreciate the n00b help.\nI used the new code (I know I'm using the new filemanager code, because I can see titles from my recent PR), but I'm still seeing that same string in the <style> tag:\n\n. :( I'll check it again Sorry\n. From @bronzehedwick on August 4, 2016 20:44\nNo problem! Thanks for looking into it.\n. I promise you it will work now :D\n. From @bronzehedwick on August 5, 2016 15:9\nThanks! This works.\n. From @bronzehedwick on August 5, 2016 15:51\n@hacdias What's the process / timeline for these updates to be able to be included in a regular caddy build from https://caddyserver.com/download?\nThanks again!\n. I don't really know. We've to wait for @mholt.\n. From @mholt on August 5, 2016 16:34\nWaiting for Go 1.7 to be released before I update the build server. Clearing the cache imposes a significant load on the lil' 1-CPU machine. So I do the updates in bulk now.\n. From @bronzehedwick on August 5, 2016 16:59\nOK thanks\n. Thank you!\n. The JSON output should be available in which pages? Browse only? Or do you want the content of a file too?\n. From @dustinromey on August 10, 2016 20:43\nIn my case its browse only.  \nMy specific use case is the following: I have some files I want to sync to a mobile app. So the plan is to grab json showing the folders and files on the page, and then run through the json to grab the files that it does not currently have (or have been updated, etc.) In an ideal case, it could grab the entire directory tree in one http request. But having to step through folders is okay.\nIts something I've been able to do with nginx with a couple of lines in nginx.conf. I'd like to do it in Caddy, and seems like it could be useful somewhat frequently. I'm assuming since it made it into the browse plugin, someone else found it useful too.\n. Hey @dustinromey! I just pushed with a probable \"fix\" for this. Try it and tell me if you think that the JSON should be formatted in other way. :D You've to build it from source.\n. From @dustinromey on August 18, 2016 20:21\nSorry it took so long. Had to figure out how to build with a plugin, so it took me a bit to get back to it.\nThe only thing I notice that seems strange is there's a number appended to the end of the json.  For example, on a very simple test directory I got the following:\n[\n  {\n    \"IsDir\": true,\n    \"Name\": \"test\",\n    \"Size\": 170,\n    \"URL\": \"./test/\",\n    \"Path\": \"\",\n    \"RootPath\": \"\",\n    \"ModTime\": \"2016-08-18T20:17:25Z\",\n    \"Mode\": 2147484141,\n    \"Mimetype\": \"\",\n    \"Content\": \"\",\n    \"Raw\": null,\n    \"Type\": \"\"\n  },\n  {\n    \"IsDir\": false,\n    \"Name\": \"hello.txt\",\n    \"Size\": 20,\n    \"URL\": \"./hello.txt\",\n    \"Path\": \"\",\n    \"RootPath\": \"\",\n    \"ModTime\": \"2016-08-18T20:16:31Z\",\n    \"Mode\": 420,\n    \"Mimetype\": \"\",\n    \"Content\": \"\",\n    \"Raw\": null,\n    \"Type\": \"\"\n  }\n]544\nNote the 544 at the end.  What is that?\nOtherwise looks great!\n. Thanks for moving this. :)\n. @brasilikum, do you still find this useful?. Tell me what would you change! \ud83d\ude03 \n. Pinging @nwgat \n. By the way, you can incorporate styles if you want @nwgat using the option styles.\n. Slideshow/(next/prev) buttons on #146. Hello @Flameborn! You're right. Unfortunately, I can't to this right now because I'll be some time away from home. But if you have got some spare time, you could make a Pull Request if you want \ud83d\ude04 . Just reviewed the whole HTML code and added the roles and ARIA markup wherever I thought it was needed. I'll close this. If you find something that should be improved, just file an issue or make a PR \ud83d\ude04 . Hello @messyidea!\nI'm doing a complete rework on this plugin and the new version will be out soon and I'll leave the instructions afterwards.\nBut if this is a urgent thing, I can write them today.. From @messyidea on July 10, 2017 14:18\nHi,\nIt's not very urgent to me now. \nJust finish your own work first :)\nThank you ~. I'll leave more information afterwards, but try building 465b10a the way you did before. It should work.. @messyidea, I just wrote some instructions and I hope they can help you, but I'll try to improve them soon.. Hello!\nThanks for pointing this out @AsakuraFuuko! A new version is coming and I promise I'll fix this \ud83d\ude04 (already working on it!).\nIt will certainly be available in the next release. And sorry for the troubles it may have causes \ud83d\ude1e . I'll leave here a checklist because there are more things not working right now:\n\n[x] Rename\n[x] Delete (when file's opened)\n[x] Move\n. I think this is already fixed so when the next version is released, I'll ping you \ud83d\ude04 . Fixed @asakurafuuko \ud83d\ude04 . Hello @aallouche,\n\nTry changing to:\nfilemanager key/ {\n    show ./files/\n    webdav /\n}\nWebDav path is relative to filemanager's own path \ud83d\ude04 \nTell me if it works, please.. From @aallouche on June 21, 2017 8:10\nHi @hacdias \nThank you for your reply.\nI tried multiple combinations without success.\nUsing your config (with webdav / directive, filemanager GUI is stil accessible on /key\nWebdav is not activated on /key but falls back to /key/webdav.\nIf you have any further idea... Maybe the documented feature is not actually implemented (I didn't check the source code, though). Hello @aallouche!\nSorry for this. I'll have an exam this Friday and I won't be able to solve this for now. Although, I tell you that there is a complete rewriting of this plugin and I'll fixe this then!\nIt sound ok? \ud83d\ude04 . From @aallouche on June 22, 2017 15:55\nNo worries @hacdias \nI'll fall back to the default behaviour and redirect the filemanager path to \"hide it\" manually\n. Thanks @aallouche! I'll start working on the new version next week and I'll try to fix as many issues as possible while rewriting it \ud83d\ude04 This will, of course, be fixed.. Hello @aallouche!\nI'm thinking about removing the WebDAV from File Manager plugin and eventually I could create a plugin dedicated only to WebDAV. What do you think?. From @aallouche on July 3, 2017 9:55\nHi @hacdias \nWell it makes perfect sense to me to have a dedicated module, though I don't know how much Caddy users rely on this feature.\nWebDAV is still very nice to have besides a plain filemanager.. Hello @aallouche!\nI'm thinking about doing this:\n\nHaving a WebDav plugin for those who only want to use webdav.\nAnd have a remote option on File Manager using WebDAV.\n\nI think that'd be the best. What are your thoughts?. From @aallouche on July 3, 2017 10:31\nThat would be just great!\nhttp://www.xcg-consulting.fr\nAlexandre Allouche\nHead of Innovation\n59 rue Meslay, 75003 Paris\n [image: Afficher l'image d'origine] +33 1 83 62 72 86\n [image: Afficher l'image d'origine] +33 6 58 36 27 55\n2017-07-03 12:22 GMT+02:00 Henrique Dias notifications@github.com:\n\nHello @aallouche https://github.com/aallouche!\nI'm thinking about doing this:\n\nHaving a WebDav plugin for those who only want to use webdav.\nAnd have a remote option on File Manager using WebDAV.\n\nI think that'd be the best. What's your thoughts?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/filemanager/issues/96#issuecomment-312608611,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AHaBg-fqXUBq-LBknTRfDjjIGEA4OVQ-ks5sKMDOgaJpZM4N_mCm\n.\n. This plugin no longer supports WebDAV, @aallouche. Please try caddy-webdav.. Hello! Sorry for hearing that. Which error do you get? Could you please show me if there are any errors on the Developers Console on your browser?. @xxfaxy do you still have this issue?. Closing due to inactivity.. Sorry, I didn't quite understand what you said :/. From @isdamir on May 19, 2017 6:2\n\nThe problem is no problem after I have changed the path.befor i use home path.There may be a special file name may also be possible.. This plugin no longer supports WebDAV, @isdamir. Please try caddy-webdav.. Thanks for reporting this. I'll check this out as soon as I can \ud83d\ude04 and sorry for the problems this can bring to you.. Not sure if this is a bug with FileManager itself or with Golang's Webdav library.. From @Flameborn on April 12, 2017 20:38\nThank you very much. WebDav is a very nice implementation and a much needed feature for Caddy-FM. I'm glad to help.\nCould we test this against GoLang's WebDav library? If it is indeed a bug there, I'd be happy to let them know.. Just like you, I'm receiving the message appended to the XML file. This is my sample:\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<D:multistatus xmlns:D=\"DAV:\">\n    <D:response>\n        <D:href>/webdav</D:href>\n        <D:propstat>\n            <D:prop>\n                <D:resourcetype>\n                    <D:collection xmlns:D=\"DAV:\"/>\n                </D:resourcetype>\n                <D:displayname></D:displayname>\n                <D:getlastmodified>Wed, 12 Apr 2017 21:29:14 GMT</D:getlastmodified>\n                <D:supportedlock>\n                    <D:lockentry xmlns:D=\"DAV:\">\n                        <D:lockscope>\n                            <D:exclusive/>\n                        </D:lockscope>\n                        <D:locktype>\n                            <D:write/>\n                        </D:locktype>\n                    </D:lockentry>\n                </D:supportedlock>\n            </D:prop>\n            <D:status>HTTP/1.1 200 OK</D:status>\n        </D:propstat>\n    </D:response>\n    <D:response>\n        <D:href>/webdav/Caddyfile</D:href>\n        <D:propstat>\n            <D:prop>\n                <D:resourcetype></D:resourcetype>\n                <D:displayname>Caddyfile</D:displayname>\n                <D:getlastmodified>Wed, 12 Apr 2017 21:29:14 GMT</D:getlastmodified>\n                <D:supportedlock>\n                    <D:lockentry xmlns:D=\"DAV:\">\n                        <D:lockscope>\n                            <D:exclusive/>\n                        </D:lockscope>\n                        <D:locktype>\n                            <D:write/>\n                        </D:locktype>\n                    </D:lockentry>\n                </D:supportedlock>\n                <D:getcontentlength>27</D:getcontentlength>\n                <D:getcontenttype>text/plain; charset=utf-8</D:getcontenttype>\n                <D:getetag>\"14b4c06dd9ac175c1b\"</D:getetag>\n            </D:prop>\n            <D:status>HTTP/1.1 200 OK</D:status>\n        </D:propstat>\n    </D:response>\n</D:multistatus>Internal Server Error\nI'm going to try to figure out if this is a problem of FM.. I just wrapped the Response Writer to catch the \"WriteHeader\" calls from the official WebDav lib and they call it twice! One for 207 code and the other for 500 error. So, I think it is a problem of them \ud83d\ude1e \nSimilarly for issue #85, I can wrap the response writer to handle only the first call to WriteHeader and Write functions while the bug isn't solved.. From @Flameborn on April 12, 2017 20:58\nThis would be great, thank you! I'm going to create an issue for both of these and update #84 and #85 accordingly, once they are fixed in the library.. Thanks \ud83d\ude04 I'll create the wrapper Saturday hopefully (not home the next few days).. Thanks for reporting this. I'll check this out as soon as I can \ud83d\ude04 and sorry for the problems this can bring to you.. Not sure if this is a bug with FileManager itself or with Golang's Webdav library.. From @Flameborn on April 12, 2017 20:38\nThank you very much. WebDav is a very nice implementation and a much needed feature for Caddy-FM. I'm glad to help.\nCould we test this against GoLang's WebDav library? If it is indeed a bug there, I'd be happy to let them know.. Just like you, I'm receiving the message appended to the XML file. This is my sample:\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<D:multistatus xmlns:D=\"DAV:\">\n    <D:response>\n        <D:href>/webdav</D:href>\n        <D:propstat>\n            <D:prop>\n                <D:resourcetype>\n                    <D:collection xmlns:D=\"DAV:\"/>\n                </D:resourcetype>\n                <D:displayname></D:displayname>\n                <D:getlastmodified>Wed, 12 Apr 2017 21:29:14 GMT</D:getlastmodified>\n                <D:supportedlock>\n                    <D:lockentry xmlns:D=\"DAV:\">\n                        <D:lockscope>\n                            <D:exclusive/>\n                        </D:lockscope>\n                        <D:locktype>\n                            <D:write/>\n                        </D:locktype>\n                    </D:lockentry>\n                </D:supportedlock>\n            </D:prop>\n            <D:status>HTTP/1.1 200 OK</D:status>\n        </D:propstat>\n    </D:response>\n    <D:response>\n        <D:href>/webdav/Caddyfile</D:href>\n        <D:propstat>\n            <D:prop>\n                <D:resourcetype></D:resourcetype>\n                <D:displayname>Caddyfile</D:displayname>\n                <D:getlastmodified>Wed, 12 Apr 2017 21:29:14 GMT</D:getlastmodified>\n                <D:supportedlock>\n                    <D:lockentry xmlns:D=\"DAV:\">\n                        <D:lockscope>\n                            <D:exclusive/>\n                        </D:lockscope>\n                        <D:locktype>\n                            <D:write/>\n                        </D:locktype>\n                    </D:lockentry>\n                </D:supportedlock>\n                <D:getcontentlength>27</D:getcontentlength>\n                <D:getcontenttype>text/plain; charset=utf-8</D:getcontenttype>\n                <D:getetag>\"14b4c06dd9ac175c1b\"</D:getetag>\n            </D:prop>\n            <D:status>HTTP/1.1 200 OK</D:status>\n        </D:propstat>\n    </D:response>\n</D:multistatus>Internal Server Error\nI'm going to try to figure out if this is a problem of FM.. I just wrapped the Response Writer to catch the \"WriteHeader\" calls from the official WebDav lib and they call it twice! One for 207 code and the other for 500 error. So, I think it is a problem of them \ud83d\ude1e \nSimilarly for issue #85, I can wrap the response writer to handle only the first call to WriteHeader and Write functions while the bug isn't solved.. From @Flameborn on April 12, 2017 20:58\nThis would be great, thank you! I'm going to create an issue for both of these and update #84 and #85 accordingly, once they are fixed in the library.. Thanks \ud83d\ude04 I'll create the wrapper Saturday hopefully (not home the next few days).. From what I understood, once the code encounters an error (this case Forbidden), it will stop searching the other directories. I just tested it and it works like that. So, after founding a file it hasn't permission to go into, it will just return an error. \nThus, I don't know if it is worth it to create this handler because it would create false expectations and false information: you would receive a 200 OK even if there was an error before; you would receive a 200 OK with part of the information of the directory, and that would be wrong because there was an error.\nWhat is your opinion?. From @Flameborn on April 16, 2017 10:46\nYou are right, that would not be the correct way to solve this. What should happen is that if there is an internal server error, it should not return an XML response at all, as WebDav clients see it as invalid XML at the moment.\n\nOn 2017. Apr 16., at 10:18, Henrique Dias notifications@github.com wrote:\nFrom what I understood, once the code encounters an error (this case Forbidden), it will stop searching the other directories. I just tested it and it works like that. So, after founding a file it hasn't permission to go into, it will just return an error.\nThus, I don't know if it is worth it to create this handler because it would create false expectations and false information: you would receive a 200 OK even if there was an error before; you would receive a 200 OK with part of the information of the directory, and that would be wrong because there was an error.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub https://github.com/hacdias/caddy-filemanager/issues/84#issuecomment-294339844, or mute the thread https://github.com/notifications/unsubscribe-auth/AA6x8Oa3ZzNX6lx4q5ZCND4R_WogHDDBks5rwc66gaJpZM4M75qY.\n\n\n. The best bet, in my opinion, is to open an issue/contact the Golang team. What do you think?. From @Flameborn on April 16, 2017 11:7\nIt is certainly something that needs fixing on their end, even if it may take a while. It might be a good idea to mention this limitation in Caddy-FM\u2019s README.md, until it is fixed.\nThank you very much for looking into this!\n\nOn 2017. Apr 16., at 12:59, Henrique Dias notifications@github.com wrote:\nThe best bet, in my opinion, is to open an issue/contact the Golang team. What do you think?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub https://github.com/hacdias/caddy-filemanager/issues/84#issuecomment-294345810, or mute the thread https://github.com/notifications/unsubscribe-auth/AA6x8LLd_zp4PvUImPvJn-gKMge22Phlks5rwfSMgaJpZM4M75qY.\n\n\n. This plugin no longer supports WebDAV, @Flameborn. Please try caddy-webdav.. From @isdamir on May 17, 2017 9:54\ni found some link:\nhttps://github.com/mholt/caddy/issues/1310\nhttps://github.com/mholt/caddy/pull/1314/commits/8048e9c3bc35572a296ad86fd556787bd0dab617\nbut not work in caddy-filemanager. Hello @isdamir! Right now I'm using Golang's official webdav package so I can't do much about it. Although, I'm not sure if it's related to webdav package or Caddy itself. Do you know anything about this @mholt?. From @mholt on May 17, 2017 14:5\nNo clue. Some profiling would be needed to figure out why it's using a lot of memory.. From @isdamir on May 19, 2017 5:59\nOK, I try to debug, have more information and then feedback.. This plugin no longer supports WebDAV. Please try caddy-webdav.. Oops! I'm really sorry for this. I'll push a fix very soon and deploy it to the build server. When the working version is ready, I'll ping you.. No problem! The plugin was already deployed. Please try again and check if it is working \ud83d\ude04 . Thank you \ud83d\ude04 . Sorry! I've already had that bug but I forgot that completely. I just launched a new version yesterday and it probably has got some bugs. Yes, we should be able to change the username. I'll fix that. BRB \ud83d\ude04 . Going to deploy to the Caddy server.. I'll deploy this to the web server as soon as possible \ud83d\ude04 But it is already fixed.. If it is 403 (forbidden), the problem should be on the permissions side. Could you tell me if there is any error on the Developers Tools (F12)?\nI can't reproduce.. You sure the file has the right permissions? Can you delete ir or rename it? Or you can't just preview?. Could you try logging out and logging in again to see if it works again?. I think there isn't any problem with the token since you can delete (which needs the token to be sent too, but sends it in the HEADER instead of sending it in the URL).\nThe back-end is only looking for the Auth in the URL or the Header, but I think I should remove the URL and make it check the Cookie instead. It's better.\nAnyway, to make sure if the problem is the token in the URL: please try downloading a TEXT file that you can edit. When you click the download button, it will also generate a URL that has the token in it and ping me \ud83d\ude04 \nSorry for all of this. Hmm... Indeed it must be the token in the URL, but I don't have that problem here \ud83d\ude2d Which is the browser you're using? FF?. I just tried on FF too and I don't have that problem \ud83d\ude2d I'll remove this URL thing anyway and make it check the cookie though. Let's see what happens.. This is where the token is extracted from the request: auth.go.. I'm going to deploy this to the server now and I'll ping you when it is done so you can try again \ud83d\ude04 . @princemaple, the newest build is already available to be downloaded from caddyserver.com \ud83d\ude04 Please tell me if it works. I really can't see any problem with your Caddyfile. The strangest thing is that it you receive a 403 error when previewing, but you can download, delete and rename the file, right?\nAnd can you search and execute any commands?. The thing is that this only happens with requests that don't send the token via Authorization header. Since I'm not being able to replicate this, I presume this is some problem with the system you're using.\nIf you're using Docker, could you just try running Caddy with File Manager outside of Docker, pointing to the same files and check if it works? Or try another folder with image files to see if it works, please.\nThis is so strange. I have to leave home right now, but I'll try to help you later and keep this issue in mind.. The most obvious problem would be permission issues, but since you can delete and rename, that must not be the problem. If the issue is really related to filemanager's source code, it must be related to the auth.. > Actually, I think I know why. For the requests that do FAIL, they are sending a basic token instead of a bearer token. Ring a bell?\nThe token is the same. But for the requests that FAIL it is sent via Cookie. The others send it via a specific HTTP header.. Although, you had the same problem before, when I was passing it through the URL.. I haven't understood which basic token is that yet.\nI'm not storing the password in the JWT but I'm storing some user\ninformation on it so the front end knows what to show to the user.\nOn Wed, 19 Jul 2017 at 09:29, Po Chen notifications@github.com wrote:\n\nAre you storing username and password in the jwt? If so, this is the wrong\napproach to use JWT.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/filemanager/issues/143#issuecomment-316312388,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFMdsPLC5BxQFh8BmfIxzX6qoRRnzMemks5sPb5dgaJpZM4OcTOk\n.\n. Is that basic token something related to basic auth? : \ud83d\ude15. The thing I don't understand is why is your request sending a basic token since it was supposed to be sending the JWT one. Could you please check the value of \"auth\" cookie for that page?. No problem :) I'm glad it is solved \ud83d\ude00\nOn Wed, 19 Jul 2017 at 10:09, Po Chen notifications@github.com wrote:\nMy sincere apologies!\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/filemanager/issues/143#issuecomment-316322421,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFMdsKwPoFrCV17q15S45tL2VyhDfWr9ks5sPcfLgaJpZM4OcTOk\n.\n. Commit 503cc797582d5d66ff6ce004e1a2fc13b75b7af1 will prevent cases like this ;). Thanks @princemaple! I have already found that bug but I didn't really know where the problem was \ud83d\ude05 Thanks!. I've done the back-end for this, but didn't create a button on the front-end \ud83d\ude02 I'll try to do this today.. Thanks for the advice! \ud83d\ude04 . @princemaple already available to download with this feature.. Yes, you can delete a user even if it is the last one (you just need to reload Caddy to create the admin again).\n\nI just pushed a new version to the server. Could you check if the bug is solved, please? \ud83d\ude04 . Which browser are you using? I don't have this bug. Hello Po Chen! It does have the type='button' as you can see here:\nhttps://github.com/hacdias/filemanager/blob/master/assets/src/components/User.vue#L62\nI'd suggest you to try to clean the cache since it might be caching the old\nJavaScript file.\nWhen I get to the computer, I'll try on Firefox though.\nOn Tue, Jul 25, 2017, 1:08 AM Po Chen notifications@github.com wrote:\n\nFirefox. Indeed doesn't happen on Chrome. However, the bug is caused by\nthe \"delete prompt\" modal being inside the user form, and the cancel\nbutton is lacking a type=\"button\" attribute. The behavior on Firefox is\ncorrect. According to standard, buttons without a type attribute defaults\nto submit. And the cancel button being inside the form and having default\nsubmit effect cause the form to be submitted, hence the bug.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/filemanager/issues/145#issuecomment-317590202,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFMdsDQMeXo5oQPije0svUGDq5uLrRucks5sRTINgaJpZM4OcUdi\n.\n. Oh, sorry. Gonna change that \ud83d\ude05 . The best to do is to put the delete prompt outside of the form. . I'll release it on Caddyserver.com and I'll ping you then.. Done @princemaple \ud83d\ude04 . Hey @Florian95! Thanks for the suggestion! I'll add that to the list (with Ctrl+c and Ctrl+v included)!. @codingtony, for pictures only, or for any kind of file that opens in that preview window? What would be more useful?. Thank you \ud83d\ude04 This change will be available after deploying it to the caddyserver. It may take some time.. Hello @torch2424! Thank you for the edits \ud83d\ude04 . You're welcome eheh \ud83d\ude04 I'm the one who should thank!. Hello @torch2424! Thanks for the report. I'll try to solve this ASAP.. Thank you! I'll solve this as soon as I can!. Thank you @moshee . Hello @mofirouz! You are, indeed, right. I didn't thought much about it. What about 8080? Since it's the most well known alternative port.\n\nEdit: I'll set it to 8080 by default.. I'll check if Golang can found a non-used port by default then.. @arteta22000 do you think it should have \"pages\" or infinite scrolling would be better?. @arteta22000 sorry for this... let me produce a test build with infinite scrolling just to make sure it works. WHich OS and arch do you use?. Here's the file: https://www.dropbox.com/s/8ltfl8l4h9st9ev/filebrowser?dl=0\nI tried it on a dir with more than 1500 files and it seemed fast. Initially it will only show 50 items and when you scroll down, 50 more will be added.. (it has a bug when you select the file, but I'll solve it. just to make sure the pagination is good). Uh, the pagination was just for files and not search results, but I can add that.. Here https://www.dropbox.com/s/8ltfl8l4h9st9ev/filebrowser?dl=0\nAnd I made search case insensitive by default.. @arteta22000 1.9.0 coming soon!. @ToyoDAdoubi I've got some more stuff for you to translate:\nsearch:\n  images: Images\n  music: Music\n  pdf: PDF\n  types: Types\n  video: Video\nThank you \ud83d\ude04 . Hello @llitfkitfk! I really appreciate what you did here, and I thank you for that. The checks are failing but it is my fault, so don't worry about it. I've this things to ask/comment:\n\nI always assure that the files rice-box.go are always up to date so I don't think that the npm run build and the rice commands are needed. It would only be a problem if I forgot, but I have a pre-push git hook to build it for me so I don't forget, ever. What do you think?\nIs godep really needed? Couldn't we just go get ./...? What are the advantages? Disadvantages?\n\nI'll look forward for you answer. \ud83d\ude04 I'm really excited to merge this!!. So, okay, I'll leave GoDep \ud83d\ude0b \nAbout rice, I think that if:\nFROM node:alpine\nWORKDIR /src/app\nCOPY . /src/app\nRUN yarn install && rm -rf assets/dist && npm run build\nand\nrice embed-go && cd ./caddy/hugo && rice embed-go \nWere removed, there won't be any problems, since it is on the repository already. I think those are extra unnecessary steps. Could you try it, please?. Hey! Thanks.\nOne more thing: I'll ask you to remove the godep please. Right now, file\nmanager is also a Caddy plugin and its build server doesn't support godep\n(it go gets all dependencies). Since I'm using Travis I believe I can keep\nfilemanager keep up to date with the dependencies now. Do you mind?\nI appreciate your effort on this, though. But I don't feel it's needed now.\nAfter this change I'll merge the PR. :)\nOn Thu, 27 Jul 2017 at 09:57, \u7530\u6d69 notifications@github.com wrote:\n\ndone\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/filemanager/pull/157#issuecomment-318302200,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFMdsPiKhl-fXXcRbJbwFomSTfigXrHoks5sSFEMgaJpZM4Okt1D\n.\n. Thanks. The dockerfile still calls some godep commands. \n\n. Thank you :) when I arrive home I'll publish it to docker hub and ping you here. . @llitfkitfk,\n~So, I made some small updates (ef315082edf5fb7d28731f80d7e961468d69d6e7) in order to be supported on Docker Hub. And here it is: hacdias/filemanager.~\n~I was thinking about changing ENTRYPOINT to:~\nENTRYPOINT [\"/go/src/github.com/hacdias/filemanager/cmd/filemanager/filemanager\", \"--port\", \"80\"]\n~So the user only needed to add -p somebeautifulport:80 when running since it was already attributed to 80. I don't think there's any problem since it is running inside a Docker image. What do you think?~\n~Edit: after all, I think that changing the default CMD to [\"--port\", \"80\"] would be better than having it to display the help but this should be done in a more automated way.~\n~The scope should be a VOLUME.~\n~The database should be an external file too, right?~\n~The config should also be an external file. How do we get it?~\nI'm a bit new to docker \ud83d\ude05 \n~I'm trying some stuff here, but I won't push it now because you were the one who had the idea and I'd like your opinion on this.~\nEdit: got a better idea. I'll post it as soon as I can \ud83d\ude04 . ```Dockerfile\nFROM golang:alpine\nCOPY . /go/src/github.com/hacdias/filemanager\nWORKDIR /go/src/github.com/hacdias/filemanager\nRUN apk add --no-cache git\nRUN go get ./...\nWORKDIR /go/src/github.com/hacdias/filemanager/cmd/filemanager\nRUN go install\nVOLUME /srv\nEXPOSE 80\nCOPY Docker.json /etc/config.json\nENTRYPOINT [\"/go/bin/filemanager\"]\nCMD [\"--config\", \"/etc/config.json\"]\n```\nPaths in the container\n\nConfig: /etc/config.json\nDatabase: /etc/database.db\nBase scope: /srv\n\nDefault config.json\njson\n{\n  \"port\": 80,\n  \"address\": \"\",\n  \"database\": \"/etc/database.db\",\n  \"scope\": \"/srv\",\n  \"allowCommands\": true,\n  \"allowEdit\": true,\n  \"allowNew\": true,\n  \"commands\": []\n}\nUsage\nIf the user wants to use the config.json file:\nshell\ndocker run \\\n    -v /path/to/sites/root:/srv \\\n    -v /path/to/config.json:/etc/config.json \\\n    -v /path/to/database.db:/etc/database.db \\\n    -p 80:80 \\\n    hacdias/filemanager\nIf the user doesn't use the config.json file:\nshell\ndocker run \\\n    -v /path/to/sites/root:/srv \\\n    -v /path/to/database.db:/etc/database.db \\\n    -p 80:80 \\\n    hacdias/filemanager\n    --port 80\n    --database /etc/database.db\n    --scope /srv\n    --other-flag other-value\nDoes this make sense to you, @llitfkitfk?. Check out this commit (02c9890) \ud83d\ude04 . I just set it to built with Docker Cloud using the Edge channel and the build was successful (using multi stage 8117eb98d87d5676cde6938d7553fea1fed4f6e0). As you can see here, the compressed size is now 8 MB. \ud83d\ude04 Try it out. Thanks \ud83d\ude04 . Hello @bartlomieju \ud83d\ude04 \n\nStart running npm run dev\nThen, go build/go install github.com/hacdias/filemanager/cmd/filemanager\n\nI have to update the docs to make them more clear!\nTell me if that's what you're doing and if you're still receiving the old files.. Strange... did you try cleaning the cache?. No problem! I'll look forward for your PRs \ud83d\ude04. Hello @AstonDavies!\nSorry for this. This is the exactly same mistake I did with filemanager plugin, but I haven't updated the Hugo one to fix it \ud83d\ude1e I'll fix this now. I'll deploy this fix to the build server and ping you when it finishes the build. If the other issues persist, you then tell me \ud83d\ude04 . Deployed! @AstonDavies . Thank you \ud83d\ude04. Thanks for the report! I'll check this out. Could you please check the value of Root on /cms/settings/global, please?. Btw, I already fixed the bug that was preventing to execute other commands other than the first one in the list, if you noticed. I haven't deployed to the build server though.. Oh! One question: the file you were editing when you clicked the publish button was content/_index.md?. Thanks! I think I already know what the error might be. . I think that the push I made will fix this, but I haven't deployed it to the Caddy server yet. I'll ping you when I do.. Deployed @AstonDavies! Please check if the error persists, please \ud83d\ude04 . Hello! What's the problem? Blocking Command is meant to indicate that the command is running in a synced way. Or it doesn't work?. Could you try setting the path of the files on the Hugo command and see if you still get the error?. The commands from after_save, before_save and so on are executed with no specific working directory. That's why the command was failing and you needed to specify the directory.\nI don't know if I should set the working directory for the default scope or the user's scope. Why? Because each user can have its own different scope so the commands which depend on a working directory would fail.\nWhat are your thoughts on this?. I'll close this issue. I decided not to change the working directory of the command - so you will need to specify the source - because this would not be very correct from the File Manager's point. If someone wants to execute the command in a specific path, he just needs to do something like:\nbash -c \"cd /path/to/files && mycommand\"\nHope there's no problem with this.. That's a pretty nice script! I'll make you a challenge: if you make an installer script like this, I may get it published on hacdias.github.io/filemanager/get.sh or something. Accept the idea? \ud83d\ude04 (Don't depend on Python though). Awesome dude!\nI'm working on a simple, small, website and this will absolutely be there \ud83d\ude04 . Check This \ud83d\ude04 \nThe website isn't finished yet, btw. If you have any suggestions, just ping me.. I mentioned this: https://github.com/hacdias/filemanager/issues/161#issuecomment-318354035 \ud83d\ude04 . NP!. Oh, I guess it would happen when building Hugo and FileManager together. I'll try to find out why. . I just downloaded from Caddyserver a file with both Hugo and File Manager and I haven't got any errors. Did you build it manually?. I'm not being able to reproduce this \ud83d\ude1e . Can you show me your imports, please?. Replace my section, from:\n_ \"github.com/hacdias/caddy-hugo\"\n_ \"github.com/hacdias/caddy-minify\"\n_ \"github.com/hacdias/caddy-webdav\"\n_ \"github.com/hacdias/filemanager\"\nto\n_ \"github.com/hacdias/caddy-minify\"\n_ \"github.com/hacdias/caddy-webdav\"\n_ \"github.com/hacdias/filemanager/caddy/filemanager\"\n_ \"github.com/hacdias/filemanager/caddy/hugo\"\nAnd try again. The repositories have changed. That's probably it.. No problem \ud83d\ude04 . Please run build.sh and commit again.. Thank you.. Why did you change archiver's user to your own fork? I thank the changes to the README, but I won't merge it until it is mholt's archiver back, please.. No problem :) your commits won't affect only after merging\nOn Fri, 28 Jul 2017 at 13:46, thomasyxy notifications@github.com wrote:\n\nI'm so sorry, I don't know commit after create a pull requests will take\neffect.\nSorry about the inconvenience.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/filemanager/pull/167#issuecomment-318642572,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFMdsAMH8asLuBzbuE8us2n302tOHdfWks5sSdgrgaJpZM4OmgKE\n.\n. Thanks \ud83d\ude04 . You mean the interface in other languages?. I'll see what I can do, but then I will need people to do the translations.. I'll work on this \ud83d\ude04 . I'm implementing this on i18n branch. As soon as I have a translation file ready to be translated in other languages, I'll let you know.. @ToyoDAdoubi see this file for example. You only will need to create another for your language with the translations.\n\nI'll also create a Portuguese translation since... hmm... I'm Portuguese \ud83d\ude06 . Thank you \ud83d\ude04 I just merged it. Although, it will not be available for download right now. It will probably be out when 1.0.3 is released. There are still some corners to polish.. The translation file is not complete yet. I'll add some more phrases and will tell you afterwards to  add the, okay?. Just made some additions: https://github.com/hacdias/filemanager/commit/bb8f7d0958f3316226c08661ac987edc4fff33c3#diff-fe6ccd8f0bf41f00b9ff5d61b8e0e3e9. Hello @ToyoDAdoubi \ud83d\ude04 How's everything?\nI just made some changes to the language file. I removed and added some new things to translate. The removed ones were also removed from the Chinese file!. I think those are the only ones, yes. :)\nOn Wed, Aug 2, 2017, 11:09 AM Toyo notifications@github.com wrote:\n\n@hacdias https://github.com/hacdias After comparison found that only a\nfew of the new content, there is no missing what?\nlanguage: Language\n settingsUpdated: Settings updated!\nlanguages:\n  en: English\n  pt: Portuguese\n  zhCN: Chinese (Simplified)\n185 https://github.com/hacdias/filemanager/pull/185\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/filemanager/issues/168#issuecomment-319629579,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFMdsJytIyRE8gG1v7vkKj8NKY1MxPqdks5sUEragaJpZM4OmhAN\n.\n. So, you can already download the newest version (1.1.0) from Caddy or from the releases page and it will come with the language option \ud83d\ude04 . I really thank all of your work translating this \ud83d\ude03 . Thank you \ud83d\ude04 \nYou can download it here. I'll ping you when the new website is ready. The instructions will be there! \ud83d\ude04 . I'll try to reproduce this.. Which is the version of FF? I'm not getting that error here.. I'm also using FF 54.0 but I don't receive any error at all. Could you try on another computer with FF, please? Or eventually try to clear the cache (although I don't think it would solve, but we never know).. Yes, please. . Strange... I get the same error on FF here. But when I download from caddyserver.com I don't get it. Have you built it manually or downloaded it?. Oh, wait. I think I know what the problem might be: the characters in the password!. @AstonDavies, could you please try disabling the GZIP and see if it works?. It seems FF isn't decompressing the server's response body.... Don't worry. I just fixed it \ud83d\ude04 I'll ping you when this is deployed to the server.. I don't think so. I forgot to add the Content-Type to the header of the response. Although, the other browsers decompress it anyway. I'll push the fix and ping you when deployed. Will try to let the new version out today.. Deployed to the caddyserver. Please check if the issues is fixed, please. . Sorry \ud83d\ude1e . I just downloaded from caddyserver.com and didn't get any error :(\n\nEdit: I don't get this. On Windows no error, On Linux error.. Deploying... when it finishes it should be fixed. I'll ping you then.. Done!. Not your fault. It was mine. Try again pls. Awesome!. Hello @casio! Thanks \ud83d\ude04 The easiest way to fix this, for me, is adding the button in the other pages. Does it sound good to you?. Only when we the server gets a change event. You can also run it by adding the 'hugo' command to your user. That way you can run any hugo command anytime, anywhere \ud83d\ude04 . Hello! I know there are some users using Hugo with watch option in the background. Although, I don't think l it's a good idea because unless you want to update the site at every change, the site is already updated when you hit the publish button. . This update is already available on Caddyserver.com. I'll close this issue since its main topic is closed. We can finish the conversation about the os proccess here though.. Thank you! \ud83d\ude04 . Thank you! \ud83d\ude04 . Hello @hsluoyz\nI thank for the suggestion, but how could it be useful in for File Manager's use case?. Sure! Sorry for that.. Done! Sorry for that.. Hey @aaboyd, could you try downloading it again, please? I had that problem some days ago and I fixed it in the meanwhile.. Yeah, I deployed a version with that bug for like 1 hour and then I changed it. Hopefully no more people downloaded it in that time! \ud83d\ude0c . I'll think about creating an option for that. Right now it is not possible in any way. . Hello @martinbaillie! Now available on caddyserver.com. Just add the option no_auth to the Caddyfile \ud83d\ude04 . NP \ud83d\ude04 I'm the one who should thank you.. I'll merge this but I'd like to ask you not to do this kind of changes:\n\n\nIt is removing the correct number of whitespaces for the indenting. I don't know whether or not this is a problem with or editor or if it's you changing it manually.\nI'll merge this. Thank you \ud83d\ude04  . @ToyoDAdoubi, I've got some new stuff for you (https://github.com/hacdias/filemanager/commit/da4fd84002f4cac1d4e04f65c96237a553203d83#diff-fe6ccd8f0bf41f00b9ff5d61b8e0e3e9) \ud83d\ude04 Thank you!\np.s.: the 'hugoNew' thing is related to this: http://gohugo.io/. Hello, Hugo New will only show up when the user activated the Hugo module (a static website generator). Hugo New is a command of Hugo CLI so I think that the best option is to leave it as it is. \nPost is not the verb, but the name (equivalent to article). . Thanks \ud83d\ude04 . Thanks!. Hey @ToyoDAdoubi,\nI'll implement this when I can. \nAbout the language files, I added this to the files section:\nsortByName: Sort by name\nsortBySize: Sort by size\nsortByLastModified: Sort by last modified. Just added some stuff to the translations file: https://github.com/hacdias/filemanager/commit/6ee846ef0eab0f3b91ff3557877cd2eb63acb505#diff-fe6ccd8f0bf41f00b9ff5d61b8e0e3e9\nI already fixed this issue and it will be available on the next release \ud83d\ude04 . Thanks!. Folders are created with 0666 permissions... you can see the source here. I can't see where the problem is now... I'll try to reproduce this.. I have 0666 for the default permissions now. What do you think I should change it for? 0766?. I pushed a fix for this (changed to 0776) and it will be out when 1.2.0 is released (today or tomorrow).. Thanks!. Thanks for the idea \ud83d\ude04 It's a really good one. Added to the roadmap.. This will be available as soon as 1.2.0 is released (which will be soon!) \ud83d\ude04 . Hey @ToyoDAdoubi! Sorry for being always pinging you! I've got some new stuff: https://github.com/hacdias/filemanager/commit/868434360592aa0280e0d631840750d53a564cd3#diff-fe6ccd8f0bf41f00b9ff5d61b8e0e3e9 Thanks :smile: . Thanks \ud83d\ude04 . Which method are you using to upload? Using drag'n'drop or the upload button?. Oh, thanks. Gonna fix it.. The Docker image will build now and the fix will be available in some minutes.. Thanks!. It's the correct behavior. File Manager isn't supposed to create a folder for you when you set the user's scope. The user's scope should be an already existent folder.\nI'll think about this. I don't whether or not implementing this is a great idea though.. This will be out in the next release \ud83d\ude04 . Thanks \ud83d\ude04 . Hello @aiastia! I really want to help you, but I didn't quite understand what you said. \ud83d\ude1e Could you try to be a bit more clear, please?. This is weird... I don't have this problem here, but the value \"E:\\bt\" is only used for new users. The initial user was created with the initial value.\nOn http://localhost:8888 go to: Settings \u2192 Global Settings \u2192 User Management \u2192 Click the button to edit your user \u2192 Change the scope \u2192 Save.\nHope it helps!. No problem! \ud83d\ude04 . This will be available on the next release \ud83d\ude04 . Hello! Thanks a lot for this, I'll merge it and release it ASAP \ud83d\ude04 . Hey @Equim-chan,\nbuttons.next and buttons.prev refer to the files: next file and previous file. You can see them when you open a preview of a file (like an image) and there will be two buttons: on at the left side of the page, and another at the right end of the page.\n\nThe files.body and files.metadata is this text:\n\nAlthough I'm thinking about removing those titles... what do you think?. Thank you @Equim-chan \ud83d\ude04 You're awesome!. Hello @Equim-chan! Just pinging you since I added a new line to the translations file: https://github.com/hacdias/filemanager/commit/889871ec0a1fac26dee1b3152d0f87e2a7af2c65#diff-fe6ccd8f0bf41f00b9ff5d61b8e0e3e9 \ud83d\ude03 . Hey, I'll fix this ASAP. It only happens when not using Hugo or Jekyll. This was a very stupid mistake I made.. v1.2.3 on the way.. I'll add this soon. \ud83d\ude04 . I'm deploying to the Caddy server right now. Check the docs!.. It already includes the update!. You can create the users after starting Caddy. The users will be saved to the database and persist across reboots and such. I recommend you to set the 'database' option to a specific path.. > Is it possible to use Caddy's authentication middleware in conjunction with Filemanager?\nYes, it is.\n\nIn addition, if I click the Cancel button in the Cady login dialog (Basicauth) the Filemanager login screen appears.\n\nThis is strange since we're using no_auth. It shouldn't happen. I'll investigate.. Fixed with 1.2.6 \ud83d\ude04 You can download the new version from caddyserver.com!. Yes, I can make it an interface instead \ud83d\ude04 . Hey @olihey! There is a problem with this though: the User.FileSystem must be able to be Marshalled and Unmarshalled as a string to JSON and I'm not seeing a way of doing this using an interface. What do you think?. Hey @olihey!\nYeah, making \"everything\" an interface would be an hassle right now but it could be done. It just depends on how to make the changes. \nPlease take a look at this file I wrote before: https://github.com/bruhs/shopy/blob/master/user.go Take a look at the whole package if you want and tell me if that scheme would be of your interest!\nInitially I thought about doing like that. Although, in that time, I didn't really need to.. It would help in the way that you could fetch the user from your own source. And with the right changes, you could also use your own File System.. Pinging @olihey . Hmm... I don't have any docs for that but it is possible to use just the front-end. Did you see the link I sent you? I'm willing to make some changes for this to work if you think that that code design works \ud83d\ude04 . I'll work on that then.. Done! @olihey \nTake a look at the code \ud83d\ude04 \nhttps://github.com/hacdias/filemanager/blob/master/cmd/filemanager/main.go#L172. Hello @berglh! Thanks for the feedback! The shift thing was something I though of implementing before but I didn't. It will be out in the next version.\nI will also add the Copy/Move buttons to the current files' view.\nI'm just quite reluctant relatively to the space bar thing. I would prefer to have thumbnails but that's something I have to think about yet. Do you have any idea of how to implement it?\n\n[ ] Move/copy current file to a folder\n[x] SHIFT to select a range of files. Closing this as frozen in time. If someone else is interested on it, please ping.. You are not supposed to use two websites with only one database. The database doesn't allow multiple connections because it locks the file.\n\nI'll try to see if I can do something about this but I can't promise anything.. It will be available on the next release \ud83d\ude04 . I don't know if someone had made a dark theme. However, if you're willing to, you can build your own theme and add the CSS on Settings.. The new version will support global styles set by the admin via custom CSS files and you will also be able to replace the logo. If someone makes a good dark theme, please open a PR/issue on filebrowser/frontend.. Hey @maxux! Thanks for pointing this out. I'll check if I have the latest versions of everything (node, npm, webpack, ...) and see if I can reproduce this \ud83d\ude04 Today I wasn't home so I'll probably only solve this tomorrow.. Hopefully it's fixed \ud83d\ude04 . NP!. I'll check this out.. Thanks! I'll try to solve it ASAP. Right now I'm making an upgrade on this which will take one day or two but then I'll solve this. Sorry for the delay!. This is my output:\n```\nPS D:\\site> caddy -validate\n[WARNING] A database is going to be created for your File Manager instace at C:\\Users\\henri.caddy\\filemanager\\186f83e3c4a947cde85e22d48d5e3cee.db. It is highly recommended that you set the 'database' option to '186f83e3c4a947cde85e22d48d5e3cee.db'\nCaddyfile is valid\n```. I just tested it now without changes (on master and didn't receive any error). I'll try the downloaded version.. I don't receive any error on my computer using the latest version from caddyserver.com. I haven't made any changes there since this issue was opened.\nDo you have any instance of Caddy running with that database? If so, the file is locked and then it can't be validated. I'll try to change to readonly though when the validate flag is active.. Hmm... I'll change it then when the flag validate is active.. But when the validation logic is invoked, is the server still running? I mean, is the database connection still active?. Closing this as frozen in time. If someone else is interested on it, please ping.. Thanks a lot @coco-perso \ud83d\ude04 . Hello @coco-perso! Just pinging you since I added a new line to the translations file: https://github.com/hacdias/filemanager/commit/889871ec0a1fac26dee1b3152d0f87e2a7af2c65#diff-fe6ccd8f0bf41f00b9ff5d61b8e0e3e9 \ud83d\ude03 . Hey! Sorry for this. I'll fix it tomorrow hopefully. . It will be out with 1.2.5. Sorry, will investigate this tommorow. . Related to #204. Fixed with 1.2.6 \ud83d\ude04 You can download the new version from caddyserver.com!. Hello @amenolo!\nFirst of all, thank you for your feedback! \ud83d\ude04 I like your suggestions and I think that 1 and 4 can be easily implemented and they may be useful for many users. I'll think about the others and I'll keep this issue updated!\nYes, you can translate it to Italian and I'll surely include it in the next build! \ud83d\udcaf \nThanks!. I'm not sure if I can use reCAPTCHA. It asks me the domains I'll use with it and that's something I can't really tell. I can ask for the API Key though.. I'm thinking about using Noty for success and error messages. What do you think?\np.s.: I'll be stroking the items from your post as they are implemented.. Hello @amenolo! Thanks! But it won't be gold for the next 4/5 days since I won't be home nor with a computer \ud83d\ude1e \nI'll see the recaptcha thing when I return. \ud83d\ude04  . Hey @amenolo!\n\nGoing to implement it now!\nGo doesn't provide a function to get the size of a directory so I would have to walk through every path inside a directory and sum the sizes of each file. That's not complicated, but it's not desirable - image that a user has thousand of sub folders: we would have to walk through all of them and see the size of each file. I'll leave this to do if someone else wants it too.. ReCaptcha implemented! I'll add the docs soon.\n\nEdit: Docs: https://henriquedias.com/filemanager/configuration/. Thanks for noticing this \ud83d\ude04 . Hello @elico!\nYes, I haven't documented that because I thought it wouldn't be needed. But File Manager supports those methods:\nAuthentication:\n- Path: /api/auth/get\n- Method: POST\n- Payload: { \"username\": \"username\", \"password\": \"password\" }\n- It answers with a JWT token.\nREST:\n- Required HTTP Header: Authorization: Bearer {token}\n- GET/api/resource{path} - Get file or path listing\n- DELETE /api/resource{path} - Delete file or directory\n- POST /api/resource{path} - Create file (content is the request body) or directory\n- PUT /api/resource{path} - Update file (content is the request body)\n- PATCH /api/resource{path} - Move/copy file. \n    - Destination header with the new path.\n    - Action header with either \"copy\" or \"move\".\nIf you need more info, tell me \ud83d\ude04 \nI may put a better version of this in the docs in the future!. I'll close this then \ud83d\ude03 Anything else, just file another issue or reopen this one.. I'll investigate this! Thanks \ud83d\ude04 . Hello @arisxama! I'm not being able to reproduce this error. However, I'm on Windows so I'll probably install a Linux VM to try it out.. Closed by #281.. Thanks for the updated :smiley:. Thanks @rigon! I'll think about it and it is, indeed, easier to navigate that way \ud83d\ude04 . Thanks for the suggestions! I'll probably do them \ud83d\ude04 . That's a good idea! \ud83d\ude04 . I'd like to implement this, but I've been a bit busy. Would you like to try to start this @MarvBob @ferronrsmith? \ud83d\ude04 . I'll see if I have the problem here.. Hello @ferronrsmith! The performance on my computer is similar on both Chrome and Firefox. Have you tried another computer?. I'll check this out tomorrow to see if I can do something. What I find\nstrange is that I don't have that issue on my ff. But if you can help, I'll\nappreciate \ud83d\ude01\nOn Thu, Sep 7, 2017, 12:40 PM Ferron H notifications@github.com wrote:\n\nGot the same issue with FF 57.0a1 (2017-09-06) (64-bit) on my mac. I'm\nsure it has something to do with XMLHttpRequest. FF default mime-type is\ntext. Which might be the issue. If I have some time this weekend I'll\nsubmit a PR\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/filemanager/issues/223#issuecomment-327774772,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFMdsBBg4BkFq6LP7fZuXM6YxzXYDVP0ks5sf9ZIgaJpZM4PIex7\n.\n. Do you still have this problem @ferronrsmith ?. That's the default for new users. Try going to Settings \u2192 User Management \u2192 Edit your user and change the scope please.. \ud83d\ude04  No problem! . ~Running using Caddy or command line?~\n\nI've to create a new flag for this. I'll add it ASAP.. Yes, I'll do something like that. Although I'm not going to be home for the\nnext 3 days so I don't know if I can publish that change until Monday.\nOn Fri, Sep 1, 2017, 3:01 AM dstreet26 notifications@github.com wrote:\n\nJust to be clear and helpful, I would want to enter something like this:\nfilemanager -p 8080 --staticgen hugo --baseurl \"/admin\"\nOr something like that.\nAlternatively, in the config file:\n{\n  \"port\": 8080,\n  \"noAuth\": false,\n  \"address\": \"127.0.0.1\",\n  \"baseurl\": \"/admin\"\n}\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/filemanager/issues/226#issuecomment-326467490,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFMdsHFqUwYZ8tOZggIuwpTp8vVcC23Wks5sd2VZgaJpZM4PJG-_\n.\n. Available on 1.2.7. The flag's --baseurl.. I know what the problem is. I have a BaseURL and a PrefixURL, which are different things. PrefixURL is the part of the URL which is stripped from the request before it comes to File Manager and this is what you want because the program is running behind a proxy. I'll add the new flag now \ud83d\ude04 And then you don't need to use caddy if you don't want to.. Just pushed v1.2.8. It will build and the binaries will be available soon. I'll ask you to try running filemanager --prefixurl=/admin \ud83d\ude04 Sorry for the troubles.. Sorry \ud83d\ude1e V1.2.9 on its way. I'm so sorry..  \ud83d\ude04 . Thanks for reporting \ud83d\ude09 . Hmm... The custom style is user scoped, I mean, it's a setting for each user. Technically, the login page is not supposed to get customized since the user hasn't logged in yet.\nIf you log out after having logged in, because of the SPA architecture, the login page is then styled afterwards \ud83d\ude06\n\nI can fix this though.\n\nWhat would you suggest since the custom CSS is per-user?. That's probably a good idea. I'll think of it \ud83d\ude04 . I'll will be available with 1.3.2!. Hello @Sharkkkk! Thanks for the feedback and the suggestions.\n\nRAR is a proprietary archive format and thus it can only be created using WinRAR or other tools from their company. That way, I can't add a RAR compression.\nWhat is Axel?\n\n\ud83d\ude04  . There is no Go library to compress or decompress 7zip files either. Sorry for that. But we have a lot of formats available!\nAxel is this, right? If so, it's a command line utility. I can't really use Axel on the browser.. I could create custom button such as it was suggested in #127 but the interface would get a bit cluttered if you added too many custom buttons.\nYou can also create an alias on Linux for that command and you'd only need to run one command. Did you try it? \ud83d\ude04 . You could create a script such as mycommand:\n```\n!/bin/bash\nunar -p xxx 123.rar\n```\nThen run chmod +x mycommand and add the file to the $PATH. Then, you could run the command mycommand from anywhere you wanted.\nmycommand would be a shortcut to unar -p xxx 123.rar.. Tell me if it worked so I can close the issue, please.. File Manager wasn't made to be a terminal on web. It's just a file manager. The addition of some commands is just a way to let users run some tools such as unrar.\nI thank you for the suggestion of using sshWebConsole but I will not implement it. If you need ssh, you can use ssh with your terminal. A Web Console could be a security hole and once again, File Manager wasn't made for it.\nSorry for this, but the best is to run the command for every different file.\n. No, it is not possible to configure File Manager to use Nginx nor Apache to serve static files. The static files are served by Go standard library with ServeFile function.\nWhat do you mean by video preload=medata?. Oh! I presume you downloaded via Caddy. I forgot to release the newest release there. It will probably be fixed in ~20 mins.. Thanks for the suggestion and you're absolutely right.\n. Thanks \ud83d\ude04 . @rigon I'm not being able to reproduce this. The files are downloading with the full name here.\n\n. I'll try with the FF version I've installed.\nEdit: found an answer: https://stackoverflow.com/questions/21442903/firefox-has-problems-when-downloading-with-a-space-in-filename. Hey! Currently I'm using this library and I can't do that now with it so I'll close this for now. If more people ask for this, I'll consider it. \nAlthough, if you really want this, you could try to do it and make a PR \ud83d\ude03 . Lol \ud83d\ude02 . Hello @kairen! Thanks for the updates \ud83d\ude04 . Thanks!. Hey @maxux! I really like what you did here! I'm just asking myself: what if you added before_ handlers for those actions? Do you think they would be useful?. Thanks! \ud83d\ude04 . \n. Hey @rigon! That's quite an interesting story. Gladly you managed to make it work! Hope you have been enjoying it! I'll mark this as help since it might be useful for more people in the future \ud83d\ude04 . Cool! Might be useful for some people \ud83d\ude04 . Hey @jivank! Thanks for the suggestion. I think that the command's feature should be redesigned in a more deep manner. Any suggestions? Do you think it should be separated from the Search?. Thanks for reporting this \ud83d\ude04 . Hello @v-garcia! No, there is no way to serve File Manager through SSL connection without a web server. File Manager wasn't made to be a server itself. You should use another web server and proxy it to file manager or use Caddy.. Hello @sisqi! Probably no. Most of the shared hosting hosts don't allow the user to run binaries but you can contact your host and ask them if they do.\nHope it was helpful!. Replace _ \"github.com/hacdias/filemanager\" by _ \"github.com/hacdias/filemanager/caddy/filemanager\" please \ud83d\ude04 It should work. I will! Thanks. Thanks for reporting. We'll take care ASAP. Started uni some weeks ago and I'm still getting used to everything. Sorry \ud83d\ude1e . I'm not sure whether or not this is a good idea. Currently, File Manager saves it's configuration to a .db file. If we were going to do put the event commands on the config file, the configuration would be too much split around many files. What do you think? What is your use case?. Hello! Will be available on v2.0! I'm closing this to remove the clutter in the meanwhile. For more info, check #574 and #575!. SSL is not on the plan because File Manager itself is meant to be used behind a proxy or something that acts like a server and not to be a server itself.. Thanks for reporting. We'll take care ASAP. Started uni some weeks ago and I'm still getting used to everything. Sorry \ud83d\ude1e . There is any error on the Developer Tools' Console?. This is a weird uri for the websocket: ws://()/app/command. What is the configuration you're using with filemanger?. Could you please try changing baseURL: '' to baseURL: '/'?. Try adding this option to your config:\nprefixUrl: 'FQDN/'. This is really weird. I'll try to reproduce this on my computer.. @manyang901, could you please check my last reply with code on #278? I hope it helps. Sorry for being so late \ud83d\ude1e . The 403 Forbidden errors can be safely ignored (at least if they only appear before logging in or if you try to make some action to some directory/file you don't have access to).\nI'll close this since https://github.com/hacdias/filemanager/issues/278#issuecomment-344525960 seems to be working.\nIf you have any other problems, just reopen this issue.. Thanks!\n. Isn't that going to replace the user's settings? This is a good idea if the user doesn't set its own language.. Thank you \ud83d\ude04 . Good idea! Thanks for this \ud83d\ude04 . Thank you \ud83d\ude03 . Sorry \ud83d\ude1e what is a \"2.x angled application\"?. @GlauberF what is your use case? I'm not seeing any reason to use this with Angular.\n@rigon I just wanted to try something new and I thought Vue would fit this project too.. Sorry, but this File Manager is using Vue.js and it's all packed together. What you are trying to do is to use the same back-end as this one with a Angular.js front-end?. Can't you use File Manager's own front end? \ud83d\ude1e I can't help you much with this since I haven't written docs for the API (see #285 and put a thumbs up there :smile:). I would recommend you to read the code and try to do the same but with Angular.. Closing due to inactivity.. Hey @jzaefferer!\nYes, I like the idea and would like to implement it. Unfortunately, I haven't had much time for this. If you'd like to give a hand, you could check this files:\n\nFlags\nWhere the default pass is set\n\nIf you need anything, just ping me and I'll try to answer ASAP.. Hello! Will be available on v2.0! I'm closing this to remove the clutter in the meanwhile. For more info, check #574 and #575!. You just need to double click on it like any other file \ud83d\ude04 . Hello!\nThat way, you're configuring Hugo's/Filemanager's own auth system as well as basicauth and they're colliding which will make neither of them work!\nYou could try the following:\nnelson.pavlosky.net {\n  root /srv/pavlosky.net/nelson/public  # the folder where Hugo generates the website\n  hugo /srv/pavlosky.net/nelson /admin {\n     no_auth\n  }\n  basicauth /admin username password\n  expires {\n    match .png$ 1y # expires png files after one year\n    match .jpg$ 1y # expires jpg files after one year\n    match .html$ 5i30s # expires html files after 5 minutes 30 seconds\n    match .css  1y # expires css files\n  }\n  gzip\n  errors {\n    404 404.html # Not Found\n  }\n}\nHope it works! \ud83d\ude04 \n. Hey @skyfaller! By default the credentials are admin/admin. If you want to create a new user, or change your current password/username, just to go the Settings. I know you'll find how to do the rest there \ud83d\ude04 . I will just close this issue since it's main subject is solved. I need a bit of time to clean every issue up and solve every problem \ud83d\ude1e . Hey! Could you please check if the developer console shows any error, please? . File Manager is aimed to be used with the latest browsers. It works well on Chrome, Firefox, Safari (both on Mac and Mobile) and Chrome mobile.. @magikstm, I don't think I should support IE on File Manager. It would increase the final binary since I would have to inject many features. It doesn't even support 'startsWith' for strings.. Done!. When you don't select a folder, you are telling FIle Manager to copy it to the \"Currently navigating on\" path. In that case, you're trying to move it to where it is right now, so it will generate an error.. Copy/Move greyed out!. Duplicate of #265: same cause.. Hello! This plugin doesn't provide WebDAV anymore. You might be referring to caddy-webdav plugin. That plugin is designed to give Caddy WebDav features so there is no reason why it should be used without Caddy.\nIf you want to use WebDAV without Caddy, you might try to search for webdav servers. There are quite a few! \nHope it helps!. Hey! That doesn't seem a scope path issue. It seems like you're just inserting the wrong credentials. I'll try creating a directory with Chinese characters to check the behavior.. ~I tried with those characters and it is working here. Are you 100% sure the password is correct?~ Actually I just found the bug.. Duplicate of #128. Please vote there with a reaction or a comment, please \ud83d\ude04 . Please vote on #285, please. I hope I can do this until the end of the year.. @TUNER88 that's a nice app you've got there! Just as a follow up: we are making some changes and moving the name from File Manager to File Browser \ud83d\ude04 . Done! 1.5.0 has the new name already \ud83d\ude04 . Thank you!. Duplicate of #257. Just pushed a fix. Could you please try again?. It will be fixed in the next release \ud83d\ude04 . Thanks! \ud83d\ude04 . Hello @spawnia! You must set the path to the site root and to the database in your file system (outside of Docker)! Like this:\ndocker run \\\n    -v /path/to/sites/root:/srv \\\n    -v /path/to/database.db:/database.db \\\n    -p 80:80 \\\n    hacdias/filemanager\n    --port 80\n    --database /database.db\n    --scope /srv\n    --other-flag other-value\nYou can find more info here.. Hey @xizirumeng! Do you want to have multiple URLs pointing to the same File Manager instance?. I haven't used nginx, but something like this could work:\n```\nlocation /file1/ {\n    proxy_pass 127.0.0.1:5000;\n}\nlocation /file2/ {\n    proxy_pass 127.0.0.1:5001;\n}\n```\nWhere :5000 and :5001 are the different ports for each File Manager instance.. If there are two different File Manager instances. One for /file1/ and another for /file2/.\nFor /file1/ you could have:\nconfig.yaml\nport: 5000\nbaseURL: /file1\naddress: 127.0.0.1\ndatabase: \"/path/to/database1.db\"\nscope: \"/path/to/your/files\"\nFor /file2/ you could have:\nconfig.yaml\nport: 5000\nbaseURL: /file2\naddress: 127.0.0.1\ndatabase: \"/path/to/database1.db\"\nscope: \"/path/to/your/files\"\nOn nginx\n```\nlocation /file1/ {\n    proxy_pass 127.0.0.1:5000;\n}\nlocation /file2/ {\n    proxy_pass 127.0.0.1:5001;\n}\n```\nHope this helps.. Sorry, please try the following config:\nport: 5000\nprefixURL: /file1\naddress: 127.0.0.1\ndatabase: \"/path/to/database1.db\"\nscope: \"/path/to/your/files\". This configuration is working with me:\nnginx.conf\n```\nhttp {\n    server {\n        location /file1/ {\n            proxy_pass http://127.0.0.1:5000;\n        }\n    location /file2/ {\n        proxy_pass http://127.0.0.1:5001;\n    }\n}\n\n}\nevents {}\n```\nFile Manager 1:\nport: 5000\nbaseURL: /file1\naddress: 127.0.0.1\ndatabase: \"/database2.db\"\nscope: \".\"\nFile Manager 2:\nport: 5001\nbaseURL: /file2\naddress: 127.0.0.1\ndatabase: \"/database1.db\"\nscope: \".\"\nYou just need to update the ports and the addresses accordingly.. Sorry for not being helpful as needed but I'm glad you found out how to make it work \ud83d\ude04 . Duplicated of #275. Hello @oopsmonk! Thanks for this \ud83d\ude03 . Sorry, deploying \ud83d\ude04 . Duplicate of #128. Please vote there with a reaction or a comment, please \ud83d\ude04. OMG. Didn't see. Thanks @francislavoie . I think this would be a very nice feature to have! Thanks for suggesting. I'll probably only be able to start this in three or four weeks when I start to have more time to give to this project. In the meanwhile, if you have time and are interested in this, you could fork the project and start implementing this \ud83d\ude04 I'd give my help if you needed.. Hello! Try this command: GOOS=linux GOARCH=mipsle go build.. Hello @perryclarke! Thanks for this! Could you open an issue on gohugo/hugo, please?. Fixed! \ud83d\ude04 It will be available on the next release.. SOrrry!!!! Try go get github.com/hacdias/filemanager/cmd/filemanager. I should update that! Thanks for noticing. Can you reproduce this issue? If so, in which environment? I'm not being able to reproduce it.. Closing due to inactivity.. Thank you! . Did you log in?. Oh, but this is expected. I did try to remove those erros but I don't think it's possible since it is XmlHTTPRequest who does that,. You used docker so I think the problem might be the same as this one:\nhttps://github.com/hacdias/filemanager/issues/277#issuecomment-346124183. Try changing\nfilemanager:\n    image: hacdias/filemanager:latest\n    volumes:\n      - ./data:/srv\n      - ./filemanager/config.json:/config.json\n      - ./filemanager/database.db:/database.db\nto\nfilemanager:\n    image: hacdias/filemanager:latest\n    volumes:\n      - ./data:/srv\n      - ./filemanager/config.json:/config.json\n      - ./filemanager/database.db:/etc/database.db\nTo set the database.db path to the specified on config.json.. You still get redirected?. The thing is: I'm not being able to reproduce this error. That's why I'm not being able to help. I'll try again as soon as I can and leave an update here.. @MarvBob can you check if you have any errors on the developer console? . No, the browser's developer console. :) Check if you have any errors beyond\nFordbidden on /auth/renew.\nOn Thu, 4 Jan 2018 at 08:57, Marc notifications@github.com wrote:\n\nI don't know how to access the dev console within the docker container ?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/filemanager/issues/293#issuecomment-355230091,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFMdsDYFgKSKpTsx-0dDuGyFg_TzAyImks5tHJJ8gaJpZM4Q5WrW\n.\n. Did you check Console tab?\n\n\n. Oh... that error is interesting (the TypeError). I never saw it before and it might be related. I'll investigate.. @MarvBob I think I found the error and it's not Docker specific.. Pushing a fix and releasing a new version right now.\nThe problem was that Go was turning an empty array into null when transforming to JSON.. @MarvBob now you just need to wait until the Docker build finishes building.. Sorry for the troubles. :)\nOn Thu, 4 Jan 2018 at 13:01, Marc notifications@github.com wrote:\n\nGreat, no TypeError anymore, and I am finally able to update the admin\nlogin!\nThanks a lot!\n\u2014\nYou are receiving this because you modified the open/close state.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/filemanager/issues/293#issuecomment-355276483,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFMdsJNG8cQvnd4TEbY4FdrZXG-Feag2ks5tHMuKgaJpZM4Q5WrW\n.\n. Please check the user settings to see if the commands are enabled and if you have 'ls' there. I can't reproduce that behaviour :(. Probably. File Manager doesn't even return 400 (Bad Request) in the commands handler. Does AWS Load Balancer and HA Proxy let you use web sockets?. Could you check #294 to see if there is anything related, please?. Could you show me if there is any error on the Developer Tools' Console?. That's strange. Are you using File Manager behind a proxy or something?. So:\n\n\nThe proxy is somehow blocking the websocket connections.\nI don't think the problem with the wildcard is related to File Manager, but I admit it is strange. Can you run it successfully on the directory via terminal?. I'll try to discover what the problem is. But I can't guarantee it to be this week \ud83d\ude1e . Hello @hdstar2009 \ud83d\ude04 \n\nThe flag -s only tells File Manager which will be the default scope for new users. If your user was created in a previous run when you didn't use that flag, it will have the old scope.\nYou can update it on Settings -> User Management. \nhope it helps!. Hey @llovvoll!\nI'm not sure if it works. But try to set the scope to the path as you'd normally do in File Explorer.. Sorry, I can't understand you said \ud83d\ude1e . File Manager doesn't set up HTTPS by itself. You can use a web server and proxy File Manager through it. You could check Caddy, which has automatic HTTPS \ud83d\ude04 . Sorry, I didn't quite understand. Do you want to create directories, but the user which is running filemanager isn't allowed to?. That's strange. I have set it to create directories with 776 (source). Are you sure the user that runs filemanager has the correct permissions?. @Equim-chan thanks for searching about that. What about setting umask with 0755?. My question about os.Chmod is that if you don't have access to the file due to the permissions, how can you change them?. Yeah, I think you're right. Go for it then. Create a new branch and open a PR with a fix \ud83d\ude04 . Let's start by trying using chmod to make sure it works. If not, we can then change to umask.. Hello @1138-4EB!\n\nA single command line argument overrides all the defaults\n\nI have to check this to see what's going on. Not sure if it's caused by Viper or something I've done wrong but I don't remember having any issues with that.\n\nCommands: requirements\n\nYes, Hugo (or any other static website generator) must be installed separately. This way we reduce the File Manager binary size and give the users more flexibility about the version they want to use.\nI'll add it to the docs.\n\nCommands: response for non-existing commands\n\nIt's strange that you receive an empty object. I'll check that and show a better message.\n\nCommands: parser\n\nA prefix sounds good and makes sense.\n\nCommands: quick access list\n\nIt would be interesting. Wouldn't you like to develop it?\n\nEdit files without extension\n\nWhat if we try to open a binary file without extension?\n\nTabs\n\nThis would be interesting indeed.\n\nxterm.js\n\nPersonally, I really like this idea. Although, I think it is outside of the scope of File Manager. I only let some commands to be executed to give the user some flexibility.\nIf someone wants to have full access to a server, they can use SSH.\n\nTiling\n\nHmm... Interesting idea, but maybe trying to develop File Manager too much.\n\nIn a nutshell: I like your ideas, but I find that some are a bit outside of the scope of this project. I'll check the errors and the problems you had and try to figure out the solutions.. Probably the problem is exactly what you're saying (the RAM). I'll try to find a way to download it in chunks. THanks for reporting \ud83d\ude04 . Hopefully this was fixed in #303. We're now streaming the file using io.Copy instead of using http.ServeFile which was, I think, putting it all in memory and then serving it to the user. I'm publishing the new version (1.3.12) and I ask you to test it and reopen this issue if the error persists (I hope it doesn't \ud83d\ude2e). I'm being able to deploy the new version to Caddyserver. You can always download it through releases and proxy it through Caddy. As soon as it is deployed into caddyserver.com I'll ping you. /cc @mholt. Deployed! You can now download it with the fix \ud83d\ude04 . I just downloaded a 2GB file from a VM with 1GB RAM without any issue. Are you using any other plugin (like Minify) with File Manager?\nIf you're using Minify on the same URL as File Manager, try disabling it.. I'll open an issue on caddy-minify (which was also created by me. That's why I knew it may be causing this problem...). Sorry!. @maryjeck unfortunately I'm aware of this and I couldn't yet figure out why is this happening. \nI'll close this since it's a duplicated of #269. I'm not able to reproduce this.\nAre you sure you put the right scope? Try using an absolute path.. @Adagior @Alsan I can't reproduce this as I've said before. But I'll leave some question that might help me:\n\nAre you running this directly in your machine? If not, are you running this inside some kind of container?\nWhat's your configuration/the command you used to run?\nDid you check opening Settings -> Users and check the Scope?\n\n@Alsan: what is the .virtualenvs?\n  . @Alsan did you check if the process that runs filemanager has write/read permissions over the scope? \n@Adagior  Does the user has really that scope defined on its settings? When you set scope in the configuration, you are only setting the default scope for new users. After a user is created, you'll need to log in and change it on settings.\nThe links were changed.. @Adagior could you check if you have any errors on the Developers Console (F12 -> Console)?. When the error occurs, could you take a screenshot of Settings -> User Management -> Click edit on your user.?. Do the user running filemanager has access to /root? THe strange thing about this is the error being Gone.. Can you navigate to \n\nAnd see what it says?\n. Not that, open the URL directly please. It says it is from 'Disk cache'. Could you try to clean the cache?. Probably some error while saving to the database but I can't reproduce this error. Since I can't reproduce it, I won't be able to fix it \ud83d\ude1e . Have you tried on another machine/OS? Is it happening with the standalone or with Caddy?. So, not working on Vultr. On your local machine the same happens?. The error seems to be triggered here, which then directs me to this functions. The error 410 is, in really, a Not Found error but for a file we knew that existed but doesn't exist anymore. I have never had that error. . I'll close this then. But that's really weird cause version 1.4.4 only has a typo fixed. Maybe some build bug?. Are you suggesting something like #358? Could you both check if it serves your needs?. Hello! Will be available on v2.0! I'm closing this to remove the clutter in the meanwhile. For more info, check #574 and #575!. Is it any of this versions:\nmips, mipsle (32-bit MIPS big- and little-endian)\n    Supports Linux binaries. New in 1.8 and not as well exercised as other ports.\nmips64, mips64le (64-bit MIPS big- and little-endian)\n    Supports Linux binaries. New in 1.6 and not as well exercised as other ports.\n?. @ryubaisan here you've got the binaries for mips and mipsle of version 1.3.12\nhttps://we.tl/lc4coMfzmZ. From now on it will be available: https://github.com/hacdias/filemanager/releases/tag/v1.4.0. The -s flag is for the default scope for new users. So, if you had already run that command without the -s flag, the user was already created.\nPlease try doing the following:\n\nSettings\nUser Managements/Users\nEdit your user\nChange the Scope\nSave. Hello, what's the state of this? Can this issue be closed?. Hello @mrunc. I use a 15\" laptop and I don't experience any issues with the interface. Could you send me a screenshot?. You can set, for example, body { zoom: 0.9 }. Try it out! \ud83d\ude04 . When you run go get github.com/hacdias/filemanager/cmd/filemanager it will automatically download all of the dependencies.. I'm just trying to update some build stuff with Travis. Then I'll update Caddy \ud83d\ude04 . Updated.. @ryubaisan on user settings, you can find a section called 'Rules' where you can allow/disallow the access to files and folders. \ud83d\ude04 . Oops, sorry. Try: disallow regex [\\\\\\/]\\..+ to hide dotfiles.. Currently, you can't do that without using auth. Could you open an issue for that?. Hey @arteta22000!\n\nYup, that's a good point. There is already an issue opened for that (#155) but since no one mentioned it in a while, it didn't go forward.\nWe should keep the conversation on that issue.. Thanks for noticing that!. Hey @joshk132 can you show me your configuration? Did you set the 'baseurl'?. Did you check your server settings? I'm not aware of any problems of this kind.. Did you check if your nginx server doesn't have a maximum upload size? I never return 413 in File Manager, so it probably is something else returning that.. Thank you @Equim-chan! \ud83d\ude04 . Sure! Thank you @Equim-chan! \ud83d\ude04 It just must not put everything on RAM as I did before \ud83d\ude05 . Thank you @Equim-chan. I run this with top and downloaded a 2GB files and it didn't seem to use more than 1MB RAM so I think it's good!!. Hello @Equim-chan! Would you like to implement that? \ud83d\ude04 Just don't forget that there are some pages that really use the Cookie instead of the Authorization header such as download.. Nice! Good luck for them \ud83d\ude04 . The problem is: the front-end uses the user from the token to get all of the information about the user such as their permissions, name, commands and such.. Hmm... that's not what I read:\n\nInformation Exchange: JSON Web Tokens are a good way of securely transmitting information between parties. Because JWTs can be signed\u2014for example, using public/private key pairs\u2014you can be sure the senders are who they say they are. Additionally, as the signature is calculated using the header and the payload, you can also verify that the content hasn't been tampered with.\n\nSource. Thank you @Equim-chan!. That's weird and it doesn't happen here. Is there a way you can debug the page to get more info? It seems your icons are not showing.. Thanks!. Does coinhive captcha mines crypto??. I personally don't think it is a good idea. Perhaps you can find another alternative to reCaptcha which does not eat the CPU/GPU of your users.. Thanks! I'm going to merge this and release a new version. \ud83d\ude04 \ud83d\udc4d \n\nRender with ReCaptchaSecret!? Are you serious? Isn't it \"secret\"? \ud83d\ude04\n\nOh, well... Never noticed that. No one would see it unless they changed the templates too so.... Thanks!. Yeah, for me, go for it \ud83d\ude04 Thanks for all the PRs you've been making!!. Hello @Equim-chan, so: you can keep doing your changes and this will be moved later. There are still things to settle such as CI flow and such because I'm thinking about splitting this main package into some smaller ones \ud83d\ude04 \nAlso, we'd have to choose a name for the organisation since filemanager is not available.. Any suggestion for the name?. I vote on file-manager or filebrowser. Don't vote for gophiles because the front-end could be easily (I think) reused to other back-ends (like IPFS, which is one of my goals).. Vote here, please #343. Ping @Equim-chan @arteta22000 . Done @Equim-chan! I'm closing this issue. Name: File Browser\nSlug: filebrowser. @Equim-chan yeah, it's 7am here and I'm going to catch a train, but I will start the process of moving today hopefully. Although I won't be in Portugal in the next couple of days so I'm not sure if I can finish this.\nWe also have to define how are we going to split everything because this is not that simple as just moving a repository. Yes, initially, and I can do that just now, we will be moving a repository. Although, the goal is to split the front-end from the back-end and even split it in some more packages \ud83d\ude04 \nI'll get back to this later today \ud83d\ude04 \n. Are you using the latest Go version?. Hello! Will be available on v2.0! I'm closing this to remove the clutter in the meanwhile. For more info, check #574 and #575!. Hello @SebastianTs! That's really cool, thank you \ud83d\ude04 Could you please move this PR to this repo? There were some changes here today and now the translations and every front-end assets are on frontend repo! I'll merge it then!. Ref.: #356\nThanks for reporting this. V1.5.3 is on the way and it will fix this \ud83d\ude04 . v1.5.3 released \ud83c\udf89!. Why would we hide the hidden files? Aren't they hidden yet?. I'll close this then since it seems to be a duplicate of #349.. Sometimes it can happen if filebrowser doesn't have permission to access a folder within /. Does it work with other paths?. I'll dig more into it. I think that there is some action File Browser is doing on root directory that it can't. . A follow up: the same happens here.. This problem is happening when trying to follow certain Symbolic Links on the Root Path.\nhttps://github.com/filebrowser/filebrowser/blob/22327703fdf8c52287a42b5b2262193615230aef/file.go#L136-L144\nTo fix this, the code was updated to:\nhttps://github.com/filebrowser/filebrowser/blob/df453ca6349166af3bc3c3a65e9d176e30605319/file.go#L136-L143\nThis way, instead of just failing, we stick with the link information instead of the target information.. v1.5.3 released \ud83c\udf89!. Close in favour of #575. It doesn't happen on v1.5.2? The difference between this two versions is not related to switch view mechanism. \ud83d\ude15 I can check that when I get back to the computer. ~Maybe a bug with Go 1.10? @Equim-chan do you also receive an error like this:~\nAfter investigating, I learnt that this was working because of a bug on Reflect library that was fixed on Go 1.10. Just pushed a fix and will release a new version soon \ud83d\ude04 . Will update it now. Sorry guys \ud83d\ude1e . Since we use JWT you cannot do that. You'd need to exchange your username and password with the server to obtain a JWT token and then use it to authenticate any other requests.\nWhat you can do is use the share feature to obtain a permalink for a certain resource. Then you can just wget/curl it.\nI'll close this issue as we already answered the question.. Fixed with v1.5.5 \ud83d\ude04 . Thanks @Equim-chan \ud83d\ude04 . Thanks for this @Equim-chan \ud83d\ude04 This is awesome eheh. @Equim-chan I know I've just merged this, but I'd like to ask you to change the option 'alternative_recaptcha' to 'recaptcha_host' so it is more direct. And do the same on https://github.com/filebrowser/filebrowser.github.io/pull/2 \ud83d\ude3a \n. Oh okay. I thought there would be more alternatives. Nice, let's go for it. Thanks \ud83d\ude04 . Yeah, I really want to do this. Thanks for opening the issue.\nRight now, the database contains:\n- The users\n- The configuration\n- Share links\nThe good thing about having a database with BoltDB is that everything is really flawless and really easy to use. We could move users and configuration to the config file, but despite that being a good idea, it could also bring some problems:\n\nMultiple processes trying to edit the file\nIf the user wanted to set the password via the config file they would need to encrypt it with the right algorithm (we won't store them in plain text!)\nWere would we put the share links?\n\nSo, my tl;dr is: I agree we have to change the mechanics of the configuration+database, but we need to define really well how are we going to do this \ud83d\ude04 \n/cc @Equim-chan?. ### About the Users & Passwords\nWhat if we store the user information in the config file and the password in the database? Then, if a user was in the database and it didn't have a password, it would ask to set one on the first time. This way, there wouldn't be default passwords at all and it would be set at login time \ud83d\ude04 What do you think?\nExample config file:\n```yaml\nport: 80\naddress: 127.0.0.1\nbaseURL: /admin\nprefixURL: ''\nnoAuth: false\ndatabase: /path/to/database.db\nlog: stdout\nplugin: ''\nalternativeReCaptcha: false\nreCaptchaKey: ''\nreCaptchaSecret: ''\nusers:\n  default:\n    scope: /path/to/my/files\n    allowCommands: true\n    allowEdit: true\n    allowNew: true\n    commands:\n      - git\n      - svn\n  admin:\n    scope: /path/to/my/files\n    allowCommands: true\n    allowEdit: true\n    allowNew: true\n    commands:\n      - git\n      - svn\n```\nWe could also add sort mode to the options (see #326).\nThe only problem I can find here is: what to do with the custom CSS?\nAdd Event Handlers to Config file\nSee #246.. Hello! Will be done on v2.0! I'm closing this to remove the clutter in the meanwhile. For more info, check #574 and #575!. Could you share your config @UnAfraid ?. Does it work for you now @razaborg?. Duplicate of #244. Could you up vote it there please @wenerme? \ud83d\ude04 . Thanks! Fixed. Hello @maran and @Equim-chan,\nHere are my two cents: I think we have too much command line flags. When I say this, I mean: we don't have all of the possible features withing command line flags and we don't have all the possible configuration in a configuration file.\nI think we should invest on creating a better configuration file. See #371.. Hello! Will be available on v2.0! I'm closing this to remove the clutter in the meanwhile. For more info, check #574 and #575!. We're not using SW anymore on v2. It will be released soon. Could you just fill the form above, please?. Since I'm not an avid unix user, I'm unsure what the default permissions should be. This can be easily changed though. @1138-4EB thoughts?. @Equim-chan related issues, yes! We can update the code to use other file permissions. What do you think it's best?. @1138-4EB yes, let's do that!. Take a look at the page @Equim-chan mentioned above. \ud83d\ude04 I'll close this. On 2.0 perms are more extensive and this can be customized. Will close this!. Or your operating system MIME Types don't set 'avi' to be a video file.. This is only related to your browser not supporting the codec. I'm closing this due to the lack of activity.. You can learn how to use File Browser here.. @hustarbor I can't reproduce this bug in any way. It's downloading fine here. Probably you have got some issues with your file permissions.\n. Thank you @1138-4EB \ud83d\ude04 . Try putting it in your PATH instead of using the full path.. @1138-4EB how do you find this simpler/easier? .sh scripts don't run natively on Windows, for example.. > How are you supposed to edit something in the frontend and have it rebuilt along with the backend?\nThere is npm link/yarn link for this kind of cases.\n\nI think it's a good idea, although I'd like to get some feedback from someone else. @Equim-chan what do you think about this?. I'm starting to think that moving this project to its own organisation (#342) was not that a good idea. Since everything is now on different repositories, the development slowed down and it is actually harder to do.\nI didn't want to take back that decision, but I'm asking your opinion @1138-4EB and @Equim-chan. If we moved it back, I'd still leave the same people with Pull Access but we could also call it File Manager again, which was the original and better name.\nI'm just dropping some thoughts here. I'll wait for your opinion.. Sorry for this delay. Now I finally have some time to dedicate to this project!\nYes, you could add me permission for that Docker Hub thing, but you can stay there too, of course. \ud83d\ude04 \n\nIs goreleaser affected by any of these changes?\n\nI don't believe there are any issues with it.\n\nHow is publish.sh affected by these changes?\n\nI think it can remain the same.\n\nShould we modify build_img.sh in order to programmatically produce two copies of dockerfiles/filebrowser? One based on scratch and another one based on alpine. Only the first line (FROM) needs to be changed with sed.\n\nHmm, why would we?\n\nShould we provide ARM variants of the images? This can be applied to filebrowser/filebrowser and/or to filebrowser/dev.\n\nYes, but sometimes there are some problems compiling for some combinations of PLATFORM+ARM.\n\nRight now, the latest versions of node_modules, vendor and dep are got. I don't know if this is desirable, or if it'd be better to use fixed/tagged versions and manually decide when to update dependencies.\n\nThe node_modules are set on the package.json so they are fixed. For Go, we have Gopkg.. > There are some use cases where having a shell in the container is desirable. See #441 (comment) and #441 (comment). I would go with the last option: provide a single scratch image and document how to create others. But I am open to any discussion about it.\nI think the instructions are enough.\n\nFor node_modules, I was considering to add yarn.lock to the frontend repo. Just as we do with Gopkg.lock for the backend.\n\nSure. We just have to decide between yarn or npm.. @1138-4EB just noticed you ignored rice-box. That is something I really wanted to do. Although, what is holding me back is Caddy: it can't build the dependencies on the fly on the build server.\nBefore merging this PR, we should create a repository which holds the content of caddy folder and on each release, it must contain the most update rice-box possible.\nAltough I'm not sure if that's possible since rice-box was supposed to be part of the filebrowser package and not the caddy one.. @1138-4EB caddy build server only go gets the repo so we have to work with that unfortunately. That's why I've been keeping rice-box on version control.\n\nIndeed, this problem affects not only rice-box, but filebrowser as a whole.\n\nIf we have rice-box already compiled, we don't need the frontend on caddy build server.. From https://github.com/filebrowser/filebrowser/issues/420#issuecomment-403294003: I don't have any idea for the Caddy build server issue unless we keep \u00b4rice-box\u00b4 on the version control.. @1138-4EB did you check if it works adding the \u00b4rice-box\u00b4 to filemanager/caddy only?. @1138-4EB I'm not sure if Caddy server supports vendor folders either. Let us ask @mholt \ud83d\ude04 . @1138-4EB Awesome!\nI think the first solution is the best: a commit to a branch and create a Pull Request automatically. We'd just need to approve it. We just need to make sure that key isn't able to commit to master to prevent someone to change Travis.yml and make a change on a pull request.. That for Filemanager plugin. WHat about Hugo and Jekyll? Would we need to replicate the file on three directories?. What if we create a user, like, FilebrowserBot, which has read and write access except to master?. The other plugins are basically the same as filemanager's but with other functionalities enabled so they also need the assets to run.. > However, we need an e-mail account in order to register the bot both in GitHub and in Docker. @hacdias can you please handle it?\nWill do.\n\nNote that, even though it might work, it is not a desirable solution, because we cannot push to mholt/caddy. It is just a test to verify that it doesn't really matter in which package we add the rice-box. It is only required for it to be compiled once into the binary.\n\nWe can do a \"dot\" import or \"_\" import (not sure which one it is) of the package containing the assets so it isn't repeated twice.. @1138-4EB created the user. Created two teams on the repo (maintainers and ci) and maintainers have write access everywhere and ci only to caddy repo and conditionally:\n\nThere must be a way to create a pull request from the CI. Many bots do that. Take a look at this.. @1138-4EB I'm merging this on chore/build and then I'll open a new PR with this as a reference. That way we an work directly on this repo with Travis and everything else correct, okay?. Hello! Will be available on v2.0! I'm closing this to remove the clutter in the meanwhile. For more info, check #574 and #575!. I'm a little bit confused. File Browser is not a WebDAV server.. @paul-hammant, yes, it is a server on localhost. You can choose in which port to listen to and which addresses (check the config).. You can, you then need to proxy Nginx or Apache to File Browser.. Thanks! \ud83d\ude04 . @1138-4EB did you keep the LF line endings? It seems to have changed the whole file.. Thank you @1138-4EB! \ud83d\ude04 . Hello @changdapu,\nI used the translator so I can understand what you said. I hope I an give you the right answers:\n\nDidn't understand correctly. You can upload the files in one tab and work on another to avoid errors while uploading.\nDo you want to display the available space in disk?\nYou can use rules to allow/disallow the access to certain directories. Or you can set a more restricted scope. I'd go for the last.\nHow so? Like the right click on Windows?\nCould you try to explain it in another way?\nWe can add some more documentation about how to customize the theme.. Thanks! Updated.. @wmjan I'll close this in favour of #244. @andyhuai there aren't any templates. The custom CSS you write is added to the default CSS. That way you can override or just add some rules you want.. @andyhuai here. It's split into many files.. Can't reproduce it.\n\n\nCould you try again? Might have been a temporary error. Glad it worked \ud83d\ude04 . From @Idesousa (on https://github.com/filebrowser/filebrowser/issues/521):\n\nDescription\nFilebrowser shows symbolic links to folders as files.\nExpected behaviour\nSymbolic links to folders showing as folders.\nWhat is happening instead?\nSymbolic links shown as files\nAdditional context\nIs this a glitch? Or is it made on purpose?\nHow to reproduce?\nCreate a symbolic link in the scope.. Tested and fixed on 2.0. Will be available as soon as it's released. Thanks @timonss. I really like the one from the left, but I'm a bit unsure about the colors. What do you think @Equim-chan? . I really love this one!. @timonss I'd like to suggest something though and I want your feedback of course: use the light blue on the circle for the diskette and change the inner circle color to white. Could you try that?. \n\nSorry:\n\nWhite\nThe blue from 1. Yeah, what do you think?. Yeah, sure @timonss! Thanks \ud83d\ude03 . Is it possible to get it in SVG?. One thing that I forgot to ask @timonss that is very important: under which license is the Logo?. Yes, I have to take care of #420!\n\n@1138-4EB yup, I created that repo to centralize our logo assets there instead of leaving them in this repo and with time we can create the versions for each purpose.. Status update: after checking out the code and seeing what we need to change, this will actually be more complicated than I thought it would be initially and will require some changes here and on the frontend repository.. Starting this on https://github.com/filebrowser/filebrowser/pull/456.. This is not as easy as it seems since we would need to be passing files from the server-side and dump them into index.html. It would be easier to have instructions telling people how to build a custom build with custom Branding but that would also require the user to maintain it's own build system (we could create a script to simplify).\nWhat do you think @1138-4EB @cashflys?. Hello! Will be available on v2.0! I'm closing this to remove the clutter in the meanwhile. For more info, check #574 and #575!. We added the IPs on the newer version. Will be available when 2.0 is out. What do you mean?. Could you activate logging so we can take a look at the error that might be happening? Probably you just need to activate Caddy logging (for stdout for example), and you can see what's happening.. Yeah, but we can easily support raw and let the browser decide what to do with the file. If it's previewable, it is rendered, otherwise, it is downloaded.. @ncresswell actually, this is feature is kind of implemented: instead of raw, try the following: ?dl=1&inline=true. If it solves the issue, could you close it please?. There isn't, but here's what you can do on sharing pages:\n\ndl:\n0 or not present - displays the button to download.\n1 - automatically downloads.\n\n\n\nThe other options come from download API:\n\ninline - if true, let's the browser decide what to do with the file instead of directly downloading it.\nformat - can be zip, tar, targz, tarbz2 or tarxz. Only works for directories.. You can append ?dl=1&inline=true to the URL so the PDF is directly previewed on the browser.. To use SSL with File Browser, it would be better to proxy to it via a web server like Caddy or Nginx. That way it is simpler.\n\nI would advise you to use Caddy since it gives you automatically generated and free SSL certificates (through Let's Encrypt) and has an extension just for File Browser.. Hello @FJHC, I need more details to know what might be wrong in order to solve this problem.. Could you activate the log option so we can check out which errors might be happening?. Hello @timonss!\nThanks for this. Could you just change the name of \"Logotype primary.png\" to something shorter and without spaces like \"logo.png\"?\nAnd center the image on the README \ud83d\ude04 \nI'll then merge this :D. @timonss which is the license of the logo? Is any of the CC?. Hello! Will be available on v2.0! I'm closing this to remove the clutter in the meanwhile. For more info, check #574 and #575!. Hello! Will be available on v2.0! I'm closing this to remove the clutter in the meanwhile. For more info, check #574 and #575!. Thanks @tokvv . I'll release a new minor/patch version of File Browser today with the latest bug fixes.. Added the screenshots. Would you like to make the GIF? \ud83d\ude04 . Hey @DeAlexPesh! That's very nice. Could you make a PR with the Russian translation on frontend?. @DeAlexPesh what do you mean with \"splash screen\"?. Hey @ifengchao! I haven't added mips and misple versions to automatic releases because I've had some compiling issues in the past in the most recent versions. You can take a look at Go's docs to see how to cross compile. Basically you just have to set the env variable for the platform and architecture and then compile as you'd normally do..  @1138-4EB I dropped Travis because it was a lot slower than Circle and in that time it was easier to get the different phases on Circle: \n\nBut I see now Travis is moving to GitHub Apps. We could try what you suggest and if it works, go for it. But we have to be careful about Caddy build server.. It sounds good to me. Thanks for all your work here \ud83d\ude03 It's being amazing!. @GRiverone when using Caddy, we add this rules by default to the default user (Settings -> User Management -> Edit your user):\ndisallow regex \\/\\..+\nSo the dotfiles are blocked by default, inaccessible and you can't create or upload them. \nI don't really remember why I had this decision before, but I'm removing this default option because it doesn't make much sense. If the user wants to block them, they just need to add that rule (which is one of the examples so the user doesn't even need to think about how to do it).. See #455.. Thanks! \ud83d\ude04 . Done @DeyV! Thanks!. On 2.0 (which is yet to be released) this will be fixed. Only readable text files will be opened and the threshold will be 10MB.. On Settings you should just add a one word command. But it is also unclear if @chinglinwen is using hooks (after save hook) or typing the command after saving.. @1138-4EB instead of using filepath.Glob, we could do something like this:\nexec.Command(\"/bin/sh\", \"-c\", \"mv ./source_dir/* ./dest_dir\")\nThat way, we're invoking the shell and then it will take care of globs and everything else. Although, we need to know in which platform we are to do so. We can check if there is an sh path or bash and on Windows PowerShell or just keep it running directly. . Since you can now choose to use a shell for your commands, I'm closing this. Change that option on:\nSettings -> Global Settings -> Execute on Shell\nIt will allow the commands to be run on your preferred shell, which should handle the expansion.. Thanks! Will release a new version soon then \ud83d\ude04 . Right now it's not possible to add custom functions. If you want to create a form to upload to File Browser, you should exchange your auth data  with /api/login to retrieve a JWT token and then use it to POST to /api/files/Your/path with the files on the request body.\nI'd suggest you to use File Browser directly.\nI'm also closing this since it didn't get feedback in the last months.. @maweck I'm making some changes to the internals and have got a question for you: is it possible for SSO to login via a proxy and then let the 'Authorization' header pass around with the jwt token?\nI'm creating an interface for authenticators, they receive an http.Request and return an user and an error. The internals of each authenticator don't care for the request itself: it can be via a proxy, or via json, or just bypassing (with authorization none). And then, after the user is authenticated, I plan to keep the jwt token so the app knows the user is still logged in. Is it possible on your system?. Hello @yurividal - that option already exists. Altough you need to set it for each individual user. If you go to a user's settings, there will be an \"allow/disallow/rules\" section. There's an example in there showing how to hide . files.. This is cool @DeyV! Thanks for it. Could you just do this PR based on master and not on develop?. Uh, thanks \ud83d\ude04 . Yes, I'll merge this and I can do that later. Thanks @maweck \ud83d\ude04 . @1138-4EB I think we shall close this with 2.0. @1138-4EB I reviewed the items and checked the ones that are complete and removed some that I thought are not related or are invalid in the new version.\nThings missing:\n\nLDAP & Active Directory (AD) Sync\n\nWe now have the support to add more kinds of Authentication. If someone wants to implement this, we're happy to receive a PR, but I don't believe it should be part of this issue, nor a blocker to launch v2.0.\n\nAdd users from the config file to the database without removing existing ones. If conflict:\n\n~Clean up users import to do what it says here.~ Done!\n\nAdd user group features to set some permissions\n\nI added support to yaml, but I believe that in the future we could actually introduce user groups. But for that I'm creating a new issue and moving it out of here since it's not a blocker for 2.0.\nEdit: opened issue #614.\n\nAdd option to enabe/disable watching-and-re-reading-config-files.\n\n~Is this a good idea in the context of a server configuration?~ Moved to #617.. Will close this issue, as the remainders were split in issues.. Awesome!. \ud83d\ude80\ud83d\ude80 \ud83d\udc4f \ud83d\udc4f \ud83d\udc4f \ud83d\udc4f \ud83d\udc4f \ud83d\udc4f \ud83d\udc4f \ud83d\udc4f \ud83d\udc4f \ud83d\udc4f \ud83d\udc4f \ud83d\udc4f \ud83d\ude80\ud83d\ude80\nHuge thanks! \ud83d\ude04 . @1138-4EB could you just take a look at why it failed deploying? https://travis-ci.com/filebrowser/filebrowser/jobs/138442868#L584. @1138-4EB could you take a look at this?. Oops, sorry @chinglin! It was to @chinglinwen \ud83d\ude04 . @chinglinwen @1138-4EB now I wonder if we should merge this because:\n\nThe behaviour inside a shell might be different.\nThe user could just allow to run bash or sh.\n\nOr:\nWe could add an option to run the commands inside the shell they want. Eg: to run inside bash, the user would give us the template /usr/bin/bash -c \"{{ .Command }}\". @1138-4EB yeah, that's a great idea. I'll think about the best way to do this \ud83d\ude04 Liked the option on the interface to pick. Well, I was thinking, and the shell option in the interface would probably give more confusion. I think in the interface we should leave Search and Run/Execute.\nThere would be a global setting telling if it should be run inside a shell or just executed. I doubt that anyone would like to run commands specifically without being in a shell..\nWHat do you think?. @1138-4EB actually I think we should separate search and execution. I have an idea. Will show you when it's better done. That way they can be improved on their own and separately and not depending on each other.. \n. Closing this in favour of #575 \ud83d\ude04 . @1138-4EB woah. That's great. Will take a look tomorrow, but yes \ud83d\ude04 . @1138-4EB although it seemed a good idea at start, since our use case is really simple it seems it will need too much configuration for very little reason. Since we won't have it directly connected to a terminal, we would need to parse keys (backspace, arrows, line feeds, carriage returns... etc) ourselves, which would be a lot lot of code. What do you think?\nLook at this echo example https://github.com/wavesoft/local-echo. Hmm... but then we need to have stylings for the default shell or for the other commands.. The thing is: if we're not connecting directly to the terminal, I mean, if we're not running a shell proccess that's running behind (we're just doing shell -c yourCommand), what's the advantage of xterm?. @1138-4EB hmmm... What if we leave that for 2.1 or soemthing? It seems to actually require some work. You could even open an issue. No, it doesn't have chat/messaging. Why don't we just use IRC, Slack or gitter.im? I'm just not sure which. I'm on IRC and Slack. I used gitter.im previously, but not anymore.. Just created a channel on freenode: https://www.irccloud.com/irc/freenode/channel/filebrowser. Uh, this seems interesting. Since @1138-4EB is taking care of #492, I believe it is better to be him talking to you about this \ud83d\ude04 . Wait for #492. Yes @1138-4EB, please do the honors \ud83d\ude04 . @Equim-chan no, the DB wasn't changed at all \ud83d\ude04 just the CLI options and the config file. @1138-4EB yes, it's ok for me to close this in favor of #506 \ud83d\ude04 and using BindPFlags as long as it works. Here it is: https://github.com/filebrowser/docker-dev. Nope, it is supposed to work. Could you try again?. I will merge this in the meanwhile. If you still can't access Travis, please email me the data and I'll add the env vars and then we can check why you can't access it. Hello! Will be available on v2.0! I'm closing this to remove the clutter in the meanwhile. For more info, check #574 and #575!. Updated the README! Thanks @yaskor . @1138-4EB on travisstatus.com it says \u00abPartially Degraded Service\u00bb. It might be because of that.. What's the state of this PR? Ready for review?. Somewhat related to #502 - one more option to add: allowStyling.. We should wait for #506 before doing this because of the commands compatibility.. Hello! Will be available on v2.0! I'm closing this to remove the clutter in the meanwhile. For more info, check #574 and #575!. Thanks @hugomassing. Could you just rebase, as @1138-4EB said?. @1138-4EB I have as a rule of thumb not to force push to master and I believe it's a best practice so we shouldn't rebase it.\nHow would we do the first one?. Duplicate of #416. I updated the title of 416 because it wasn't very clear. Let's have this discussion there!. As we'll remove staticgen feature on 2.0, I'm closing this.. V2.0 won't support Hugo and Jekyll directly. User's can have their own root paths, yes.. @minhohihi I can't open that website. It gives connection timeout.. @dtwilliams10 you can work on that here or on a PR. The descriptions for Docker Hub you write them here and we can update them \ud83d\ude04 . You can open how many session you want. File Browser doesn't set any limit and it works with the same user on many browsers at the same time. Please make sure you used the right instance of File Browser and that the credentials were correct.\nInternet Explorer is not officially supported. The errors might be due to the old age of the browser and its incompatibilities with newer technologies.. @yurividal \ud83d\ude1e. @rhjmoore both. All help is welcome \ud83d\ude04 . @ericvolp12 awesome that you want to contribute! You can start by looking at the issues and creating PRs. We'll only give push access to someone who has a history on this repository. You can start building one right now! \ud83d\ude03 . @dtwilliams10 hello! Thanks \ud83d\ude04 hope you contribute. There's no special order. Just bugs >>>> features.. @IanDuncanT cool! Thank you \ud83d\ude04 . The current master is stable. Probably new features won't be added by myself. Only fixes if I have time. I'd like to welcome everyone to contribute to this project.. Thanks @1138-4EB \ud83d\ude04 . @alx 2.0 introduced many changes. Please take a look at\n\nhttps://docs.filebrowser.xyz/configuration/authentication-method\nhttps://docs.filebrowser.xyz/cli/filebrowser\n\nYour filebrowser.json contains some not-used options. Try replacing it by:\njson\n{\n  \"port\": 8888,\n  \"baseURL\":\"/filebrowser\",\n  \"address\": \"\",\n  \"database\": \"/etc/database.db\",\n  \"root\": \"/srv/data\",\n  \"noauth\": true\n}. @alx please remove database.db, clean the cache and try again. Your logs show calls to endpoints from the previous version which leads me to conclude that your browser has the previous version cached. The options root and noauth on your configuration file are only used the first time (when there is no database created). Further changed to those parameters won't affect anything.. Fix on newer version since we don't load the files data. Although I find it strange anyway to have that error.. You still have this issue? . We have no reason to block the embedding of FIle Browser through iframes. I have removed that HTTP header to allow so. WIll be available on 2.0. I think that what you're saying is that when you go to a directory, it downloads all the text files. Yes, it isn't supposed to happen and this fix (28b326ab1df32f41234c0d48f3555f1a18e2ffeb) will be available when 2.0 is out.. JDownloader can't obtain the size data due to #323. I'm closing this as the latest version provides better direct links.\nThe file will only be compressed if it is a folder. A file is downloaded directly.. Hello! I actually suggest blurring the line between front-matter and content and leave it in the same editor. That way we can stop depending on Hugo.\nThe archiver thing I'll open a PR soon, but we also need to define if we're removing Hugo as a dependency or not.. I'm working on a rewrite/revamp/cleanup for File Browser #574. It won't be available until the end of the month certainly. I don't like to give precise values but I believe that in the middle of January it will be ready.\nPlease use an older build (tagged) for now. Sorry. As we'll remove staticgen feature on 2.0, I'm closing this.. [WIP] not working yet. @1138-4EB not working because of archiver. The resultant archives are empty and I still don't know why. Yes, it would be better to separate this into two different PRs. Also, using a vendoring system ASAP would be good.\nDoes Caddy build server support go.mod @mholt?. Closing in favour of #575. Unfortunately, aria2 is out of the scope of this project so I'm closing this.. - Also, make filebrowser mainly a binary and move main.go to the root of the repo.\n- That would also block FileBrowser from being used as a middleware.\n- Use github.com/spf13/afero as a FS layer instead of our own.\n- Add an interactive first run experience through the command line to configure the stuff on the database and get rid of almost all flags.\n    - This would still let users create instances through scripts, they would just need to provide the stuff in the same order as it is asked.\n    - Also add commands to interact with the DB programatically.. Hey! When I said rewrite, it's not a complete rewrite from scratch. A lot of code will be reused. I started yesterday doing it (haven't pushed it yet) and the code is looking much better ... and smaller! There's a lot of stuff with the Go counterpart that can be improved. That's what I'm working on.  \nWhy rewrite the front end? Again, lot of code that ... Well... Doesn't need to be there. A lot of old dependencies and updating them will be an hassle. The ideia is to revamp it and then install greenkeeper to maintain the dependencies up to date. \nThe codebase is not that big and could be smaller.  I can assure you I will have time for this \ud83d\ude04I don't have classes in January nor in the first half of February. Just two or three exams. I'll push the branch today. @helloray :) sorry, what's wrong with https? Oh... adding the certificates? If that's it, yes, it can be added. Doesn't seem much hassle. I'll leave this issue opened. As soon as I'm finished with cleaning the old code, I'll take a look at some feature requests and implement them just to give FB a new look!. @laoshaw thanks! I'm adding that to the list of fixes (#575). The only feature that will certainly be removed is the direct integration with Caddy.\nAfter this, I hope I can tackle more issues, but this will take a bit.. @Equim-chan awesome then. That way I can reuse all the bolt db code \ud83d\ude04 I saw there's a fork with some fixes and such and even they recommend us to use it. . @vitaliy-kuzmich I saw your fork and I thought it would be nice to ping you here. Look at what's done in #575.. @vitaliy-kuzmich np. About the DB management: I'm sticking with bolt DB (it's just... simple and it doesn't have string limits nor anything else) and I've already implemented all the needed CLI commands.\nDon't forget that there are lots of people that want to deploy \"on demand\" and I don't believe it should be their work to be generating a DB with the required structure.\nIf they use the commands from File Browser itself, they'll always make sure they have the correct DB structure. And lots of users have requested it already.\nHaving a shared folder would be interesting. Yes, symlinks works on Windows but I didn't quite understand what you want to do. I'm developing on Windows btw \ud83d\ude04 . @vitaliy-kuzmich gotcha. It's an interesting feature that may well be worth it to implement. > I agree with:\n\n\n@helloray\nAt the moment, the most important thing is to introduce vendor management for go. Without that, the project can not be compiled if any go lib changing their APIs. Other contributors can gain benefits from it too.\n\nThe most important and urgent issue is to add go mod support to either v1.10.0 or to the current master branch. That will allow users to use the old Filebrowser in a stable state. To do this, we need to decide:\n\nStabilize v1.10.0 as v1.10.1 and jump directly to v2.0.0 in february.\nStabilize the current master branch as v2.0.0 and jump to v3.0.0 in february.\nStabilize the current master branch as v1.11.0 (although it might not be fully semver compilant) and jump to v2.0.0 in february.\n\n\nOkay, so let's introduce go.mod on master and release minor version then.\n\nAbout rewriting the frontend with React, I quite agree with:\n\n@helloray\nI don't know how much difference between VUE and React. If VUE works well, why spending so much time to rewrite it? Those frontend frameworks are almost changing everyday. The most popular framework can be die at any time. I suggest you keep working on features and bug fix. Do not rewrite it.\n\nAt the same time, @hacdias is young and this is a project he is doing in his spare time. Thus, I understand that he might want to try new technologies and frameworks to make the process more exciting for him, as learning new things is fun.\nOverall, the frontend is relatively simple, so if he thinks that rewriting it is worth, I'm ok with it.\n\n\ud83d\udc4d \n\nHowever, I think that we need to make the change clean. Should we keep the vue frontend in a new branch in filebrowser/frontend? Or, should be rename filebrowser/frontend to filebrowser/vue and create a new filebrowser/react?\n\nYes, I'm working on the new one and I can create a new repo for it and leave the current where it is. When we move to v2.0 we can then rename the old to 'vue' and mark it as an archived repo.\n\nAbout getting rid of CLI flags, the JSON configuration file and environment variables to replace all of them with subcommands, I don't think it is a good idea. I definitely want to see some subcommands that allow to initialize the DB. That's cool and very useful. But I think that a configuration file should also be supported.\nThis is because it is easier to deploy a file (say JSON) that deploying a script that must be executed. On the one hand, a third-party service might allow users to create filebrowser instances by providing the config file only, without letting them execute arbitrary code. On the other hand, writing an interactive process and suggesting to fake the interactivity with a script is not a clean solution.\nPlease, let me know if I misunderstood anything.\n\nI should've updated this!! I've been working on this branch. With that setup it will be impossible just to run filebrowser and expect it to work.\nYou'll always need to execute fb config init on the first time to generate the database and then fb users new to add the first user. They all use flags, none is interactive. Sorry for not updating this. Please try to run just to see the available commands.\nWe can add support to load the config from a file instead of just flags, but keep in mind that what's on the DB is what counts in the end. It's a way to centralize the config. We had it too split.\nfb command will only take 4 flags: address, port, log and db path.\n\nI think it is useful to explicitly separate the core (lib) from CLI sources, as the core can be imported from third party projects, even though they don't use the CLI entrypoints.\nWhy do we need to break this setup? Did you have any compilation problem with the previous structure?\nAbout Caddy, I don't really know which are the implications of removing the integration. I have never used it. I have just tinkered with the build procedure.\n\nI can answer both of this questions in one answer. For the first part, take a look at the structure of the branch I mentioned before. The things are exported and everyone is free to use them. They just need to have a database initialized, ready and working.\nThe plugin for Caddy has always created some constrains. We actually have lots of downloads on the Caddy page but not anymore since the build is broken...\nCaddy can be used with v2.0 File Browser as a proxy, it just won't be only one binary. I can make a guide on how to use it.\n\nPlease take a look at the branch I'm working on: I'm doing first the Go part and then move to the frontend. The GO part is almost done. Really, almost. The codebase is not that big and I made some useful improvements.. @1138-4EB @laoshaw I think it would be better to keep using Code Mirror. Monaco doesn't work on mobile and they don't even have plans to do so.\nCode Mirror, right now, supports mobile and they're working on a new version and they're sponsored by some major companies. It will keep supporting mobile too so I think it's the best bet right now.. Although I'll try adding monaco in and see how it works on my phone to see if it's that bad. I don't believe many people will be writing huge files on their phones.\nWill also try ace. We're sticking with Ace right now!. @1138-4EB ready to release 2.0? \ud83d\ude04 . Actually I thought about that yesterday! We can do that, yes! I'm just updating some commands description. Can I ping you after I finish so you can roll that release? \ud83d\ude04 . @1138-4EB let's release it!\nI've also removed branch v1. If we need it, we can just run git checkout -b v1 v1.11.0.. @princemaple Caddy plugin will be available upon the next release of Caddy which can take a while yet. \n@helloray you must set both the certificate and the key for HTTPS to work. \nAbout search: it was working on my end two days ago and I don't remember changing anything about it. Hmm... I'll take a look just to make sure . @helloray just tested and items seem to open on click. You can click and there is an error or you can't even click?\nAlthough I found some other issues (not related to clickability): #625. @princemaple the caddy plugin is not yet finished. It will be finished at most next week. If you look at the repo (filebrowser/caddy) you'll see a lot of code commented and unfinished. . ~@1138-4EB I think we should release v2.0.0 now. Any bugs or fixes can go in the next patch releases.~\nReleasing v2.0.0-rc.2 now.. Closing this as officially released \ud83d\ude04 . Update: decided to reuse the current Front end in Vue and update the dependencies. More here: https://github.com/filebrowser/frontend/pull/46. @1138-4EB @Equim-chan this only has a database and no configuration file. My suggestion for automated installations is to use a script or something like that to create the users and change the configuration. Most of the config options will now be accessible through the web interface too.\nIf anyone wants a config file back, we can think about it later, but this is a major release, so shouldn't mind about breaking changes because there are many.\nI'll create command to import an old config into the newer database format. Any other suggestion?. Also, decided to keep http.filemanager plugin for Caddy. Only http.hugo and http.jekyll will be removed.. @1138-4EB hope you liked the merge of the scripts into one! Although there seems that for some reason it can't find wizard.sh but dos2unix works... . ~@1138-4EB it was because I changed from sh to bash to make sure getopts existed and didn't differ in behaviour. I fixed it by adding bash to filebrowser/dev.~\nActually getopts is POSIX-compliant so it must be present on all POSIX-compliant systems. Reverted the changes to filebrowser/dev and replaces all == by =. Now there seems to be a permissions issue (?).\nThanks! Have a nice New Year's Eve!. @1138-4EB I believe the error might be along these lines:\nhttps://github.com/filebrowser/filebrowser/blob/8d334046a98a59b60ba3de401ffcb7c620a6b681/wizard.sh#L202-L204\nI just don't understand why we didn't have the errors before. Another question: why are we copying the files? Since we mounted the volume, wouldn't the files persist?\nEdit: for what I just analyzed we just need the filebrowser and rice-box.go files. I see you did this cp thingy to avoid the permissions issue caused by the commands inside of Docker running as root. But there must be another way of doing this.. @1138-4EB I merged your fix here but I wonder if this will have any repercussions over dockerPushLatest since the files were created as root user. Probably there won't be an issue because it just copies the files and they have read permission and the user inside the Docker image is root.. @1138-4EB we can work out the filebrowser/dev image so the user inside is not sudo. I just read this.\nIt's 9:30am here and I'll only work on File Browser after midday. If you want to, you could try creating an user on filebrowser/dev with the least required permissions to run everything. If you don't have time, I can try doing so after lunch. What do you think? \nEdit: change of plans: I'm working a bit on this now. I'll solve some other issues not related to this comment. Waiting for your feedback.. @1138-4EB hmm... wouldn't docker fail if the host user id doesn't exist inside the docker image? it might happen. @1138-4EB there are already a few things left. I think it would be nice to merge this as soon the share page is rebuilt. That way we can work on master. This PR is getting too big for a PR.\nWe won't release 2.0 soon. Also, if people use the latest docker image and complain for breaking changes we just need to remind them that latest means master and master might be incompatible with previous versions. We should always recommend to use the latest version and not the latest tag in production.\nMerging this will also help me re-build the Caddy plugin. It will be really small I think \ud83d\ude04 so I'm also happy for it.\nWe could also try out the docker image and the \ud83e\uddd9\u200d\u2642\ufe0f!\nWhat do you think?. @1138-4EB release it! Thanks! I merged the frontend already so make sure not to update it on master eheh.\nIt's more wait to see if the Docker image works well and if the wizard builds it correctly \ud83d\ude04 . @1138-4EB thanks! I kept v1 and merged v2 into master. Although I don't feel comfortable in keeping the version 1 in a branch. It makes me feel like Python where two versions keep growing separately for no reason. We can keep it this way and eventually remove it in the future. We always will have the tags and I doubt there are any reasons to keep on v1.. Soon will have a v2 released!. Thanks. Don't worry about Caddy for now. Our plugins can't be downloaded right now. I set them as hidden on Caddy website until we have a workable version with 2.0. Caddy doesn't let us use dependency management with go mod so I was thinking about vendoring or something like that in the plugin. It will need a bit more thought though.. Yes, please do that! Also check if import command works as expected (ref https://docs.filebrowser.xyz/upgrade-from-1.x). @1138-4EB let's continue on https://github.com/filebrowser/filebrowser/issues/600. Yes, we can add that. Hello! Will be available on v2.0! I'm closing this to remove the clutter in the meanwhile. For more info, check #574 and #575!. @ptman hey! Not having the direct integration, you would lost the preview feature and would have to run the hugo/jekyll command by yourself (or via a custom button if we built that feature). Honestly, it doesn't seem worth it for me, but if many users use it, I'll keep the feature.\nAfter the rewriting/revamping I could release a beta version so people could test and see if they need some feature back.\n\n@sinni800 yes, basically it's just a wrapper to let you run some commands directly via the interface and it also works without the Caddy integration (via some CLI flags). My suggestion is just to remove this and add custom buttons (#91).. @sinni800 not file preview, but website preview. A static website generator is something like Hugo which takes your files and then generates a website from them. Right now we support previewing instead of publishing. Although it doesn't work well, so I don't believe many people use it.\nFile previews will be kept!\n@torch2424 \ud83d\udc4f \n@1138-4EB I think the sensible option is to split: we can leave a guide explaining how to configure the hooks and custom buttons for a better experience.. We're removing the integration with Hugo and Jekyll on the next version. \n@vitaliy-kuzmich, this is not about image preview. And File Browser is meant to be used as a replacement for nextcloud.\nAlso, File Browser is not a static website generator and it never was. . Will close this! We will remove this feature on 2.0. This is fixed and will be available on 2.0!. Hello! We're working on a new version that will all of that in account. Sorry for the trouble.\n@1138-4EB or @Equim-chan would you like to take a stab at this and add dep management on master already?. It seems that some packages are not imported correctly. Can you go build this PR on your OS? Does it work? If so, I'd say to ignore the error for now or even remove gometalinter for now until we finish #574 . Images updated. We do not recommend the use of \"latest\" on production environments since it is bond to master branch, which, atm, contains the code for the next major release which contains many breaking changes. Please try out the image v1.11.0. Once we release V2, we'll have docs explaining how to transition \ud83d\ude04 sorry for any troubles  . Yeah. That's a bug we have fixed for 2.0. For some stupid reason we were sending the content of the files on directories (well... I don't know why). It will be available soon. \nAh oh, when you said image I thought about docker. That's why I said \"images updated\". Sorry for the misunderstanding. I think we can try it now on #575. We could add golangci to our docker-dev image and keep the gometalinter until #575 is merged.. @the-eric-kwok no, it should be the absolute path. Thanks for reporting this! WIll be fixed on 2.0. When #575 is merged and released, this will be available!. @belimo can reproduce! Will be fixed on the next version. Closing this. This fix will be available when 2.0 is released \ud83d\ude04 . But that value is inside the container (/database.db). THat's the path you need to mount something to.\nAlso, as part of the refactoring the ENV vars were removed. We're trying to leave the configuration as simple as possible. But I'm interested in hearing use cases.. Yes and they can do all of that via flags. In which situations wouldn't flags be possible but env vars would? That's just what I don't understand. @XavierBouvard \n\nit is a good idea to naturally fallback to 80 if none specified in any kind of configuration.\n\nMaybe that's the best: set the port default as 8080. Not 80 because of #152 \n\nThis is especially true when the application is not running in a container.\n\nThey can already. It was always an option. The Dockerfile only refers to the container. The user can always set it with the flag.\n\nWould it be possible to have a dedicated folder for datas ?\n\nDidn't understand.\n\nThat being said, it is often hard to balance between config file, flags and environment variables.\n\nYes, that's the issue.. Maybe remove the values from the flags from the root command (which starts the HTTP server) from the database.\nAddress, Cert, Key, Log, Port and Root Scope depend on the environment. This ones should be able to be set through flags, env variables and a config file and not persisted to the database. All the rest in the DB. Maybe that's the best.\n-a, --address string    address to listen on (default comes from database)\n  -c, --cert string       tls certificate (default comes from database)\n  -d, --database string   path to the database (default \"./filebrowser.db\")\n  -h, --help              help for filebrowser\n  -k, --key string        tls key (default comes from database)\n  -l, --log string        log output (default comes from database)\n  -p, --port int          port to listen on (default comes from database)\n  -s, --scope string      scope for users\nTo:\n-a, --address string    address to listen on (default all)\n  -c, --cert string       tls certificate\n  -d, --database string   path to the database (default \"./filebrowser.db\")\n  -h, --help              help for filebrowser\n  -k, --key string        tls key\n  -l, --log string        log output\n  -p, --port int          port to listen on (default 80)\n  -s, --scope string      scope for users (default \".\")\nThis would solve some issues such as the DB precedence on this kind of configuration and viper.IsSet on #603 . @XavierBouvard gotcha, but I don't know if that would benefit only you or more people. Let's see what @1138-4EB says.\nAbout the default scope: right now it is \".\" and that's what it should be. It allows fast deployment.\nThere will be two scopes on this version: take a look at #604 to understand better. I'll update the docs soon too.. @1138-4EB could you try out the Dockerfile on master and make any changes if needed?. I don't know. It was added by you \ud83d\ude1b . I just left it there because... well... I didn't want to break anything.. But I think we should remove it. It doesn't make sense to me.. > filebrowser creates the database in /database.db, as set in .filebrowser.json. It is created with quickSetup, so the auth is set to JSONAuth.\nThere's no way of starting it automatically with no-auth. Please use config init for that or change using config set.\n\nI cannot docker exec into the container, because there is no shell in it.\n\nI didn't change the existence or non-existence of shells on the Dockerfile. But please change that so there is \ud83d\ude04 \n\nI cannot change the setting from the GUI. Although this might be a possible solution.\n\nOnly non-server and non-auth related settings are available from the UI.. quickSetup is actually what the name says: a quick setup.. > It seems to be because of #274. Are sure that filebrowser does not need it anymore? If so, we can safely remove it.\n\ud83d\ude31 it was me! I believe it doesn't. It was related to the previous version of archiver. I don't think we need it anymore. Can you try removing it and then download a file?\n\nI think this is a very valuable feature. Certainly, most of the time I use filebrowser I start it in noauth mode.\n\nWe could add a flag for noauth that would only be used if in quick setup mode just as username and password. Not sure if we should add all auth params though. They all require a lot of configuration for their own so I think it's better to keep it in config commands.\nWe could add noauth just as a shortcut and let it be an exception. But just for quick setup mode. What do you think?-. And then, you had to add all recaptcha settings which are tied to JSON auth. Not obligatory but they are JSON auth options. And (like a snowball), someone creates a new Auther and then we get new options :P\nWe're already omitting the possibility to add Recaptcha through quick setup. If we add sth, IMO, it should only be --noauth or something similar.. I will add that flag then!. Will close this as the new Dockerfile is merged. The thing with this is:\n\ndocker run filebrowser/filebrowser == filebrowser -d=/database.db -p=80 -s=/srv\ndocker run filebrowser/filebrowser --port 80 == filebrowser -d=/database.db -s=/srv\n\nAlso, note that scope flag is only required to create a database. After that it will be simply ignored. This is why I recommend using config init so everything is clear to the user and there are no unnecessary flags.. @1138-4EB there was never a root scope, not in v1.11.0, neither here. The scope flag only exists for quick setup. After that it is considered the default scope for new users. You can set it on their settings.\nWe can, though, add a root scope to the global settings that will be prepended to users' scope on runtime. And that can be overwritten by the flags.\n\nAbout the command, yes, you're right eheh. My bad.\n\nI feel this: https://github.com/filebrowser/filebrowser/compare/dockerfile...feat-viper is overcomplicating. I agree we can use Viper to get the base command vars either from flags, config file and env vars, but isn't there a simpler way?\nAnd I see Viper has that bug that can't know if some setting was really set or not.. @1138-4EB I merged your changes into this branch. Just to make sure: we're only adding Viper to root command right?. Also @1138-4EB:\n\ndatabase has highest priority, if undefined in DB use config params\n\nHow can you tell that a number is undefined for example? We have the PORT to run on. If the user sets it to zero themselves we cannot assume that it is undefined. Unless we could set it to a negative number.\n\nI'll let you work on this PR. I'll make a PR for scopes being relative if a global scope is set and document it well.. @1138-4EB I don't agree we should add Viper to other commands than root. This is the only one that has stuff that can change and that needs to be persisted across multiple runs.\nConfig and user commands are meant as one time runs to do a specific task.\nImport is to import config from 1.x only.. Yes, for config init I agree. If you could work on that, it would be awesome. But only for config init eheh.. @docgonzo2015 we recommend you to use the tag of the latest stable version available, which is 1.11.0. Latest tag is the same as master here which may contain breaking changes. We're working on a new major version, so until we release it, just use v1.11.0. \nYou can always use latest and help us find bugs \ud83d\ude01\nSee #600. @1138-4EB made some changes and merged master into this branch. I like the idea and how it works but there is something that annoys me:\nPS D:\\root\\Code\\filebrowser\\fb> go run .\\main.go  users ls\n2019/01/06 13:45:19 No config file provided\nID  Username  Scope  Locale  V. Mode  Admin  Execute  Create  Rename  Modify  Delete  Share  Download  Pwd Lock\n1   admin     .      en      mosaic   true   true     true    true    true    true    true   true      false\nI find it annoying to print that info on other commands.\nBtw, if you think it's a good idea, we can remove the init command and do a quick setup on initConfig if the database doesn't exist. Although I think it would be better to ask for user input if the command is not root.\nImagine someone is trying to list the users but has a mistake on their DB file: they don't want to generate a new database file. It was just a mistake.. @1138-4EB updated the help entry of the main command. I think you'll like it.. @1138-4EB I've commented the info about the current config file right now and will merge this. Although I hope to remove those TODOs and find a prettier solution. Will wait for your feedback!. Agreed with everything! Will keep waiting for more feedback on the TODOs and printing.\nActually, the config file makes always sense because it can contain the database path. I think we have two options:\n\nOnly use the config file on root (by calling initConfig on rootCmd handler)\nAlways use the config file and have a nicer way to print if we're using a config file. Or have yet another flag to print the database path. Not the config path. If the database path is wrong and the user is using a config file, it is clear that the config path is wrong.. @1138-4EB oh, I can change that then. Although how's the user supposed to hash the password previously? I know it's possible but we should also give the resources to hash the password. I'll create a simple subcommand to hash a password.. init is an alias for config init. It uses the flags to get all possible options. Quick setup is just used when you try to start File Browser without having a db first.. Sure yes! \ud83d\udc4d. @1138-4EB had an idea that might work for the following precendence: Viper then DB without needing the force flag and the function \u00b4IsSet\u00b4. Do you mind if I make some updates to the code if it works?. @1138-4EB exactly! And we won't need it! If my idea works... of course. Otherwise, we'll need force.. @1138-4EB please don't make any changed yet. :/ This will conflict with the changes I'm doing. @1138-4EB the idea I had doesn't work unfortunately. You know what you feel after making a lot of changes and in the end it doesn't work as expected \ud83d\ude2d \n\nOne last thing about this PR: I think we should only use viper for the root command. The others don't make sense to make use of it.\nYes, we should allow users to import config and users. So I believe we should create the following two commands:\n\nconfig import <file>\nusers import <file>\n\nSame applies for export.\nAnd just read the files. Maybe see if viper exports their parser (or see which parser they use) because it's canse insensitive and it would be helpful for users. And only use Viper with the root command.\nFor root command: find a better alternative than force. Can you create an issue about Viper and force before getting into it?\nAwaiting for feedback.. Yes, sure. Not working here anymore. But I'd recommend you to read my comment. Please check #613. @1138-4EB please read my last comment and check #613. @1138-4EB still I don't think we need Viper for config. If we use config import there's no need for viper on config set/init. config import is capable of initing or replacing a database depending on its existence.. So I came with an alternative that doesn't need force: #616. No, it was more of a Cobra, Viper and... a Python thingy \ud83d\ude06 The \ud83d\udc0d emoji didn't work.. @1138-4EB I think this one is ready for review!. Yes, a different struct. But let's wait for 2.0 to be released and polished. This would be an excellent feature, but let's focus on the current work now.\nThis would need a completely restructure of how we see users. All users would need to have groups, but one of the groups could be special in the way that it doesn't define anything so the user is defined by itself. That would simplify code (in my head).. Also, I think this should be the last feature PR before 2.0. The PRs from now on should be cleaning up code and fixing bugs only if we found any.. @1138-4EB I'm merging this now but I still ask you to take a look at the code afterwards to see if you spot anything wrong. In the meanwhile, this will close #611. If you had something in there that isn't covered by this, please make a new PR with the changes.. Yes, that was what I was thinking but I'm not sure if it's worth it. Sure! We can add it! Let me take a look!. Just added it! On the next PR we'll check if it's working.. Please go to you OAuth Settings here on GitHub and make sure that Code Climate has access to File Browser. If not, request access please. It's not limited to owners. According to their docs, I should be able to add you. I'm trying to figure out how. @1138-4EB could you try now?. Blocked? How so?. Please squash and merge it!. @1138-4EB did you test it? If it works, go ahead and merge it. (I tested and It seems to work). Yes, I' m okay with them.. @ytzelf it seems that docker isn't running the command you typed but just the entrypoint. Probably we should replace Entrypoint by CMD. /cc @1138-4EB . Could you try that, please, @ytzelf?. @alpetric oh! You're awesome! That's exactly it: the database can't be modified while being used and you mustn't try to do it!\nIf that's the issue @ytzelf and @efrecon were having, we can see if there's a good way to circumvent this.. As far as I can see, this is a limitation of BoltDB. What i can do is change the error to something more informative. You can only either be serving File Browser or execute commands. You can't change the database while its running.. @1138-4EB yeah, the IPC idea is a good idea. We can't modify the lock, it's just a file created by BoltDB. But that would be a great idea.\n@luckman212 i can't reproduce that in any way. Could you check if there is a filebrowser.db.lock? If so, could you try to remove it, please?. @1138-4EB maybe we should add a little info to the DB telling if it's initialized or not. Maybe adding a \"version\" info. That way, when there are structural updates, we can upgrade the DB without user intervention. I can take care of that \ud83d\ude04 . @1138-4EB we can say invalid database file for the last case.. @1138-4EB ah! You didn't need to. I said i was going to fix it \ud83d\udc45 . Hello @huming2207! Please check your user settings, please. If you're using the same installation with the exact same user, please tell me if you see anything odd in the Developers Console (F12) or in the server logs.. oh, well... that's weird. The only difference between that button and the others is just the icon and the text. Maybe the 'share' keyword triggers AdBlock Plus, which is, in my opinion, a bit stupid. But I don't believe I can do anything about it. It's still the best word and icon.\nWhat do you think?\n. @huming2207 I think it's probably the social icons blocking. This icon is called 'share' or something like that (the actual button on the icons font). So it may be getting blocked because of that. Unfortunately, I can't do anything to prevent the ad-blocker not to block the icon.\nI'm closing this, and updating the title if someone in the future runs in the same issue. I'm also setting this as 'Out of scope' because the resolution of this issue is out of our scope.\nIcon reference: https://material.io/tools/icons/?search=share&icon=share&style=baseline\nIf you find a way to solve this without needing to change the button, nor its text, a PR would be really welcome on filebrowser/frontend.. Hello @fazo96! Which platform and File Browser version are you using?. Oh, please check v2.0 and see if the issue persists.\nhttps://docs.filebrowser.xyz/upgrade-from-1.x. Yes, what @helloray said is true. Also, we shouldn't be showing directories size:\n\nIs it in the informations modal? If so, it might have been a mistake because we aren't suppose to be showing directories size.. I'm closing this since it is not really an issue. Although I have hidden the size field when only one folder is selected.. Hello @dbeniamine!\nFirst of all, did you follow the instructions to upgrade your DB? It may be useful if you have more than one user and want to migrate everything.\nMost of the options on that config file are deprecated and were from the previous version. Please replace it by:\njson\n{\n  \"port\": 80,\n  \"baseURL\": \"/files\",\n  \"address\": \"\",\n  \"log\": \"stdout\",\n  \"database\": \"/database.db\",\n  \"root\": \"/srv\"\n}\nYou also need to mount the database path as in the previous version.\nlet me know if this helped \ud83d\ude04 . @efrecon the --noauth flag is supported for quick setup mode only. If you have an existing database, that flag will be ignored.\n@dbeniamine is there any possibility your proxy is removing the headers from the response request? Could you please open the Dev Tools (F12 usually), go over to Network tab and refresh the tab, then take a screenshot at the details of the 401 request please. @karlicoss and they should be always added. noauth is just a shortcut for automatic login with the user with ID 1.\nAre you using any different authorization that is not part of File Browser?. @karlicoss the token contains some info about the current user. Even though you don't need to log in, there's still a user that is logged in. That token keeps the information and makes sure the info is still valid.. Let's also not deviate from this issue. @dbeniamine @efrecon are you also using another auth method? Like basic auth?. @liranbg the issue of not using the default authentication header is that proxies and browsers might not know how to treat it. By using Authentication, we can ensure that external proxies know how to deal with this more sensitive header.\nImplementing what you said or just use a custom header is an option.\nAnother option is to implement basic auth.. @dbeniamine basic auth won't work until this is fixed.\n\nSo, right now we have two options:\n\nImplement Basic Auth.\nJust change the Header name to something else and add a note to the documentation to keep that header when proxying (some proxies might try to remove the header)\n\nI'm implementing the second since is the fastest and easiest and might not cause warm.\n/cc @1138-4EB. @1138-4EB the issue was that basic auth was rewriting our HTTP header so File Browser didn't work.. @Ajef it looks like the same issue as #634, right? Both of you are using another web server and a proxy. I wonder if that's the cause. What's the base url?. @Ajef yes, authentication is handled by File Browser itself. The download button goes for a direct link so your browser could use basic auth (or whatever you had set up with Apache). The other APIs are called via fetch and we're injecting the authorization header. That may override whatever authentication you set up with Apache, breaking it.. Oh, branding/files is not relative to root/scope. It's an absolute directory for a dir in your computer. Sorry for that. Please update all the favicons. Your browser generally uses the one with more quality/bigger so that might be the issue.. @wcone could you try cleaning up the cache and cookies please?. @wcone oh, it shouldn't happen though. I'll reopen this.. @princemaple hey! This seems more like an issue on Bolt DB than with File Browser itself. It seems that the internal next-value-id from Storm isn't updated when saving with a ID that didn't exist but was set. It seems to only update when leaving the ID empty, hence creating this issue. I'll dig a bit more into this.. @princemaple could you take a look at #645?. @princemaple oh, okay. That's a good idea: to have a Docker image to build a specific commit. I'm merging this and as soon as it finished building, it will be available as the latest on Docker Hub so you can try.\nIf it works well for you, please close #639. Otherwise let me know!. @blingblingyoyo can't reproduce on the latest version on Windows 10 Chrome. Are you using 2.0.1?. Could you also show the Dev Tools console please (F12)?. @laoshaw,\n\nIn general 1.x is much easier to get set up\n\nfilebrowser does a quick setup.\n\nit has default admin/admin to login and you then change settings via web interface\n\nDidn't change.\n\nin 2.x I have to read quite a bit to get familiar with the command line before I can do anything.\n\nThe quick config docs didn't change much: https://docs.filebrowser.xyz/installation#quick-setup\n\nThese days it's better to have a quick install, everything work out of the box, and you then configure everything via web(e.g. gittea, most php web applications,etc). Command line should only be left for power users and as a last resort.\n\nYes! https://docs.filebrowser.xyz/installation#quick-setup\n\nAre you using any other type of auth like basic auth?. Closing due to lack of response.. Seems good!. I don't think it makes sense to create another command. There's config init for those who want to play more with the configuration. We removed basically nothing from the previous version.\nThe docs are here: https://docs.filebrowser.xyz/cli/filebrowser. @1138-4EB there are no custom parameters for no auth mode. It's the only Auth Method that has no other option. Please give me an example. The quick setup isn't supposed to do everything for you, and that's why there's an interface to change the settings and more commands.. @442hz it would be nice if you could create a PR into this repository with that feature \ud83d\ude04 . This is an interesting idea. What do you think @1138-4EB?. Closing as they were slip.. Thanks!. @wozuishuai13768 a flag is not a toggler. When you don't set it's value, it's default is true unless otherwise specified. You should run --perm.create=false if you want to set it to false.. This is actually a known-bug. Just a note for myself: see StrictSlash.. Please fill the form on the issue. Otherwise we can't help much.. @ikwyl6 as @blingblingyoyo said, you must run go get first. Also, please ensure you're using the latest Go version. If you're using the latest Go version, please clone it outside of GOPATH.. @evgeny127 sorry, it's -r. Will update the docs!. @nambrosch I didn't try it, but what you describe makes sense for me taking in account the code we have.. Just released v2.0.3. Could you try it out to make sure it works?. Sure, thanks. When you have a config template, can you open an issue on https://github.com/filebrowser/docs please?. Please also add support for this option on config related commands and users new.. Which Go version are you using? It seems it is not linking go.etcd.io/bbolt to bolt.. Try pulling now. Please check if the file has bolt \"go.etcd.io/bbolt\" on the imports. I can't reproduce the error, nor the CI.. So you don't have the latest version from master. Git pull please. . The HTTP API exists to be used with the File Browser instance via GUI. We don't support officially other use cases. Although, I can tell you the endpoint is POST at /api/resources/${PATH}.. @mholt that'll be more complicated but not really complicated. We currently use Afero FS so we just need an SFTP FS compatible with that interface.\nIt still raises some concerns: we are saving the locations on users on the database so we'd need to have an 'SFTP' mode that solely relied on the SFTP server information for users and such.. @1138-4EB I think we shouldn't rely on mimetypes since they might not be available on all devices and might not consistent across devices. That's what we did before and we also had a lot of issues and even an array with allowed file names or extensions because a lot didn't work. DetectContentType always returns a value and it returns application/octet-stream if it couldn't detect any file type (https://golang.org/src/net/http/sniff.go?s=646:688#L11). Looking at the algorithm it doesn't seem to rely on any external mime types but its own. Perhaps it was MimeFromExtension which needed a 3rd party value.\nAlthough, the current function for testing if a file contains text doesn't seem wrong and I'd really like to know the contents of the file that are causing this troubles.. Yes, @1138-4EB is right. As soon as you stop the .exe, File Browser stops running.. @minos197 it does work without access to an Internet connection. Perhaps it is some of your networking configuration that is causing some kind of conflict. The only networking thing we do is to open a port and listen on it. Nothing else and it isn't influenced by Internet connection.\nThe error 'the resource does not exist' seems more related to a non-existing user in a database. Although it doesn't make sense because it shouldn't be tied with a 500 error. I can't reproduce this.\nAny ideas @1138-4EB?. Perhaps. I can't reproduce this. It just works without Internet connection. It doesn't actually make sense to have a non-internal IP when you don't have an internet connection.. @minos197 thanks! It's a BoltDB database. There is a good cli to navigate its contents.. Hello @shyal! I'm sorry from knowing that you feel that way.\n\nconfig flags that change across versions\n\nThat's why we released a major version. Anything can change on those. Please see https://semver.org/.\n\na json file to configure, too (...) a command line interface (not sure how it can be used with docker)\n\nWe mainly kept/created those for automatic setups.\n\na database\n\nIt's where we store the configurations. You don't need to touch it. It always existed.\n\ndespite the documentation, it's still horribly hard getting filebrowser up & running, and working which is actually pretty bonkers.\n\nJust run filebrowser -r ..\n\nAlso, as @maxlaverse (thanks!) said, if you want to contribute, you're free to do so. Please also read #532.\nI'm also reopening #532.. This is really nice! Thanks! Could you please just change it to go build please? We don't need the ldflags anymore \ud83d\ude04 . Sorry for being picky, I'll just ask to remove this, please. @1138-4EB just a bit confused: what's this?. > Therefore, you should be the one that does it, or you should temporally give write permissions in this repo to me.\nYou have write permissions to all repositories on this organisation \ud83d\ude04\n\nHowever, this repo still is active in travis-ci.org. I suggest to change this before creating the new hashes.\n\nJust disabled it on the .org website. Although, on .com, it still says it is active on .org. Maybe we need to wait.. yeah, maybe, but I can't see where. Let's keep it!. I wonder why all of these imports moved here. \nBy the way, @1138-4EB just found out CircleCI had the option to build forked PRs disabled. I just enabled it, but I believe we'll need changes on this PR to trigger it.. It should be everything on dist, even the checksums and *.zip.. I don't know how I feel about the dot in the flag honestly. Probably replace it by - for consistency. @maweck why did you choose to use .?. Looking at that tools they also seem to use camelCase. It would not be a bad idea. There are some of the other options which should be also grouped.\nCould you add them with dots and camelCase please? I'll make another PR to update the other ones because it actually makes sense.. Could you also rework it in a way to include noAuth on auth object? Maybe could be renamed auth.disable. Ref.: #497. I think we could, but we'd need to do it for every flag. If you're at it, you can update this PR itself \ud83d\ude04 . Yeah, we could just use if it's available.. Thank you @mholt \ud83d\ude04 . @1138-4EB you're right! Will revert those two lines \ud83d\ude04 . We can also test if is a ci using the CI env var. Otherwise we just do nothing on that function. WHat do you think?. CHanged that, please take a look @1138-4EB . Isn't CGO disabled by default though? We can absolutely add it anyway eheh. Added!. @1138-4EB maybe if it's not CI, we shouldn't do docker login and docker logout and just bypass those steps. Probably the user is logged in already. Agree?. That's what we did like 3/4 commits before. I removed it to avoid scattering a lot of information. If we have a config file, why would we need to access those fields? scope and baseurl are special cases since we need them inside the http handler. What do you think?. Aren't there issues by not closing the DB?. If you defer it here, it will execute before returning. Hence, the storage returned by this function won't have access to the DB. That's the reason I was copying the code over.. Like, I don't mind of readding it. But I personally don't like the idea of the --force flag very much. Why would someone want to provide values and forcefully use the ones from the database?. @1138-4EB it could, but then we wouldn't be able to use File Browser as a middleware since the installation would be bound to viper.\nMaybe I got it wrong: is the force flag to use the db or the flags? I'd prefer to have the following priority without needing to use a force flag:\n\nFlags/env/config via viper\nIf not set fallback to database. We could actually send the values to the HTTP handler without being in the Settings struct though.. I'll revert this. Take a look at getStorage code and you'll see why it can't be used on config init specifically. Wait for a commit here soon \ud83d\udee9 . Well... This mustn't be removed because Settings.Key is not TLS Key. Settings.Key is the secret for JWT tokens. I'm making an update or two on master to help with this PR.. Please see #615. It will help this PR and a struct is better than an arbitrary map.. Found a way not to use force and still use the server settings from DB merged with provided. Please remove this blank line.. Please remove the blank line.. \ud83d\udc4d . \n",
    "mholt": "^ looks like a JSONP issue. (that jQuery21403.... looks like a JSONP callback function. your handler is probably getting JSONP back but expecting it to be body text or something)\n. No, that makes sense. If the site is at /home/toor/www, the hugo commands probably need to be run from that directory (or somewhere around there).\n. Also considering enabling error logging and see if anything shows up there related to that 500 error. (If not, then the add-on's handler is not properly reporting errors)\n. That's weird. I wonder if there's a bug in Safari.\nBut that 500 Internal Server Error - do you get that in Chrome too, @adprof? Can you do it again in Safari but enable error logging first?\nerrors error.log\nor\nerrors {\n    404 404.html\n    log error.log\n}\n. Also I want to see the contents of the access.log file which should hint at those 404s.\n. Thanks for the logs!\nFor the 404s, looks like Safari is turning the GETs into POSTs when you hit the back button? O.o Am I reading that right?\n@hacdias I think you'll find these logs useful, especially the panic shown in the error log. (I think there might also be a bug in a Printf somewhere that's causing %!c(MISSING) to appear in the URL - maybe in Caddy core, maybe in this plugin; will need to look into that.)\n. I suspect the caddydev errors are because of handling file paths in Windows... will look into it soon -- sorry, been swamped with a few other things.\n. @adprof Can you be sure to pull the latest caddydev and its dependencies?\nThen cd to the caddy-hugo repository folder and run caddydev hugo - that should be all you need to do to try it.\n. I vote to keep it focused - I'd rather have a plugin just for hugo. It'll be easier to maintain and use.\n. Sounds good to me... make the directive hugo again as well, instead of cms? Since the directive is changing, maybe wait to push it to master until a new Caddy version comes out so users aren't totally surprised. Don't forget to update the docs too. (You can push to another branch other than master in the mean time.)\n. In the beta release, yes\n. You can update your repo at any time. When Caddy 0.8 lands (beta period is over), I'll update the build server and all the dependencies and plugins at that time.\n. :100:\n. Perhaps a brief tutorial or example could be added to caddyserver/examples too.\n. Yeah, this looks like something in Caddy or Go itself. I actually suspect a bug in the standard library.\n. Let's continue this over in mholt/caddy#374 - I just updated my comments there.\n. K, we'll look at this today, Henrique, when both you and I are online and the download page isn't very busy. :smile: \n. ^ True. Auth should be generalized so that it's just another Caddy middleware (there is an issue for it already). But since there is demand for a better auth system, feel free :smile:\n. Cool. I think https://github.com/mholt/caddy/issues/246 and https://github.com/mholt/caddy/issues/109 would be of interest. If that gets implemented, then your add-on wouldn't have to roll its own login.\nI don't want you to stretch yourself too thin but if you feel like implementing a login system anyway, maybe you could consider writing a general-purpose middleware for it so any Caddy users could take advantage of it. Just an idea.\n. I doubt it; I haven't heard anything in months.\n. If you do this, then drop \"true\", since if the term appears, we assume that means \"turn it on\"\n. Perhaps optionally. I wouldn't want these extra resources consuming my production environment, for example.\n. You need Go 1.6 installed.\n. ... but not without a way to be useful without an interface :wink: This is not something you need to consider in the short-term, I think, unless there is demand for it from others...\n. @hacdias It moved to here: https://github.com/mholt/caddy/blob/6f5cff539367acfb58d6d9edf5dede10b63fa753/middleware/browse/browse.go#L33\n. Users cannot download Caddy with the hugo add-on right now:\n---- # github.com/hacdias/caddy-hugo/browse\n---- /home/caddy/go/src/github.com/hacdias/caddy-hugo/browse/get.go:32: unknown browse.Browse field 'Root' in struct literal\n---- /home/caddy/go/src/github.com/hacdias/caddy-hugo/browse/get.go:43: not enough arguments to return\n----\nIt's currently on:\ncommit f530e901c81cb30dcd55cd0eec67fa58e9d1a8f4\nDate:   Mon Apr 25 08:56:40 2016 +0100\n    fix a part of #67\n. Yes, notice that it's at commit f530e901c81cb30dcd55cd0eec67fa58e9d1a8f4 which right now is the current HEAD.\n. Sorry, now we've got:\n---- # github.com/hacdias/caddy-hugo/routes/browse\n---- /home/caddy/go/src/github.com/hacdias/caddy-hugo/routes/browse/get.go:35: cannot use conf.Path (type string) as type http.FileSystem in field value:\n----    string does not implement http.FileSystem (missing Open method)\n---- /home/caddy/go/src/github.com/hacdias/caddy-hugo/routes/browse/get.go:43: not enough arguments to return\nNot sure why the error was \"outdated\" from last time. But this looks like an issue. You need to use http.Dir, not a string.\nPlease double-check by compiling the code before pushing, and I'll be happy to update it. ;)\n. Yeah, we fixed that, you now have to use http.Dir().\n. Aye, that did it. Thanks!\n. That's a lot of logic. If you do implement it, I hope it works well. :)\n. On the build server? go generate is run on each build - it does not set GOOS or GOARCH variables when running that command.\n. That was @captncraig but he's been pretty busy lately.\n. Should be updated now.\n. @mikeifomin How recently? I updated it only about 12 minutes ago.\n. Cool. Yeah, the hugo plugin now requires installing the hugo binary yourself. (It's better this way.)\n. Sorry, docs will be updated before too long. :sweat:\n. >  I'm not sure if Caddy server supports vendor folders either. Let us ask @mholt \ud83d\ude04\nIt sort of does, but with some caveats -- you have to be very careful that none of the vendored packages are vendored by Caddy itself or other plugins it is built with, and also make sure that the vendored packages don't export any types used by Caddy.\nKind of hoping/wondering if Go modules (vgo) will help solve the problem a little bit.. All Caddy plugins are completely embedded into Caddy, rather than distributed separately. (If that helps to clarify.). > Does Caddy build server support go.mod @mholt?\nNo, but you can technically vendor some dependencies you need... just make sure they don't conflict with any others that are vendored.... @hacdias I just updated the issue to clarify more. I realized we need more than just authentication via SFTP: we also need the file operations to be derived through SFTP; in other words, an SFTP <--> HTTPS bridge.\nWhat do you think about that?. I recommend using archiver.DefaultZip (or if you use more than one, probably archiver.NewZip()) -- it sets some sane defaults. Probably especially important for TarGz, which has a default compression level of 0 without sane defaults :wink:. ",
    "adzeitor": "@mholt :+1: \nhttp://bugs.jquery.com/ticket/12326\n. But root directive sets current dir for serving content, not for running external apps... Maybe @mholt give us a hint.\n. Currently there is no way to have more than one cms with one caddy file, because users from each cms can modify files of other:\n``` yaml\n0.0.0.0:8001 {\n  root ./blog1/public\n  cms {\n   content blog1/public\n   command hugo\n   args -s blog1/\n  }\n}\n0.0.0.0:8002 {\n  root ./blog2/public\n  cms {\n   content blog2/public\n   command hugo\n   args -s blog2/\n  }\n}\n```\n. > Oh... I see. What do you want is to have a a directive where you put the path of the \"static-generator-content-things\" and it runs there, isn't it?\nmaybe, but this makes things complicated: root, workdir, content (not very useful) ...\nsearch plugin use search [directory] endpoint { ... }\n\ndirectory is a path within the site (can be a regular expression) that should be indexed. Default is site root.\n\ngit plugin also use similar thing. Anyway current dir for executing could be root or user defined, but not a caddy running directory.\n. It can be root with rewrite :smile: \nI think it is better root than caddy workdir (if root is defined).\n\nWhat do you suggest?\n\nThis syntax inspired by git and search plugin for consistency:\nyaml\nroot /home/toor/blog1/public\ncms /home/toor/blog1/ {\n  command ...\n}\n. I like it.\n\nmerging command and args too\n\nGood because it works in the same way as startup directive.\n. ",
    "adprof": "Hi,\nAn hour ago I tested in Chrome browser too. I'm quite surprised because is working properly! ;)\n\"something-went-wrongs\" shows only in Safari (9.0/ OS X 10.11). Server responds 404.\n\nRegards,\n.  By the way. Notifications are quiet extraordinary :+1: \n. I suspect that 500 may be due to an error in a front-matter. I'll give a try with another hugo theme.\nHere you have logs (first Safari, then after 404s - Chrome).\naccess.log\n::1 - [12/Oct/2015:22:30:04 +0200] \"GET / HTTP/1.1\" 200 1024\n::1 - [12/Oct/2015:22:30:04 +0200] \"GET / HTTP/1.1\" 200 1024\n::1 - [12/Oct/2015:22:30:11 +0200] \"GET / HTTP/1.1\" 304 0\n::1 - [12/Oct/2015:22:30:11 +0200] \"GET /admin/browse/content/post/ HTTP/1.1\" 401 41\n::1 - [12/Oct/2015:22:30:12 +0200] \"GET /admin/browse/content/post/ HTTP/1.1\" 401 41\n::1 - [12/Oct/2015:22:30:12 +0200] \"GET /admin/browse/content/post/ HTTP/1.1\" 401 41\n::1 - [12/Oct/2015:22:30:12 +0200] \"GET /admin/browse/content/post/ HTTP/1.1\" 401 41\n::1 - [12/Oct/2015:22:30:12 +0200] \"GET /admin HTTP/1.1\" 401 41\n::1 - [12/Oct/2015:22:30:13 +0200] \"GET /admin HTTP/1.1\" 307 67\n::1 - [12/Oct/2015:22:30:13 +0200] \"GET /admin/ HTTP/1.1\" 307 82\n::1 - [12/Oct/2015:22:30:13 +0200] \"GET /content/ HTTP/1.1\" 200 1091\n::1 - [12/Oct/2015:22:30:13 +0200] \"GET /admin/assets/js/app.min.js HTTP/1.1\" 200 2919\n::1 - [12/Oct/2015:22:30:13 +0200] \"GET /admin/assets/css/main.min.css HTTP/1.1\" 200 10620\n::1 - [12/Oct/2015:22:30:13 +0200] \"GET /admin/assets/js/plugins.min.js HTTP/1.1\" 200 118784\n::1 - [12/Oct/2015:22:30:13 +0200] \"GET /admin/assets/fonts/fontawesome-webfont.woff?v=4.4.0 HTTP/1.1\" 200 81284\n::1 - [12/Oct/2015:22:30:15 +0200] \"GET /content/post/?_pjax=%23content HTTP/1.1\" 200 845\n::1 - [12/Oct/2015:22:30:17 +0200] \"GET /admin/edit/content/post/creating-a-new-theme.md?_pjax=%23content HTTP/1.1\" 500 50\n::1 - [12/Oct/2015:22:30:17 +0200] \"GET /admin/edit/content/post/creating-a-new-theme.md HTTP/1.1\" 500 50\n::1 - [12/Oct/2015:22:30:22 +0200] \"GET /content/post/ HTTP/1.1\" 200 1275\n::1 - [12/Oct/2015:22:30:23 +0200] \"GET /admin/edit/content/post/creating-a-new-theme.md?_pjax=%23content HTTP/1.1\" 500 50\n::1 - [12/Oct/2015:22:30:23 +0200] \"GET /admin/edit/content/post/creating-a-new-theme.md HTTP/1.1\" 500 50\n::1 - [12/Oct/2015:22:30:26 +0200] \"GET /admin/edit/content/post/goisforlovers.md?_pjax=%23content HTTP/1.1\" 200 4660\n::1 - [12/Oct/2015:22:30:33 +0200] \"POST /admin/edit/content/post/goisforlovers.md HTTP/1.1\" 404 910\n::1 - [12/Oct/2015:22:30:48 +0200] \"POST /admin/edit/content/post/goisforlovers.md HTTP/1.1\" 404 910\n::1 - [12/Oct/2015:22:30:54 +0200] \"POST /admin/edit/content/post/goisforlovers.md HTTP/1.1\" 404 910\n::1 - [12/Oct/2015:22:31:22 +0200] \"GET /admin/edit/content/post/goisforlovers.md HTTP/1.1\" 401 41\n::1 - [12/Oct/2015:22:31:22 +0200] \"GET / HTTP/1.1\" 200 1024\n::1 - [12/Oct/2015:22:31:24 +0200] \"GET /css/highlight.css HTTP/1.1\" 200 629\n::1 - [12/Oct/2015:22:31:24 +0200] \"GET /css/style.css HTTP/1.1\" 200 3406\n::1 - [12/Oct/2015:22:31:27 +0200] \"GET /images/avatar.png HTTP/1.1\" 200 4977\n::1 - [12/Oct/2015:22:31:27 +0200] \"GET /js/main.js HTTP/1.1\" 200 406\n::1 - [12/Oct/2015:22:31:27 +0200] \"GET /js/highlight.js HTTP/1.1\" 200 23415\n::1 - [12/Oct/2015:22:31:39 +0200] \"GET /admin/edit/content/post/goisforlovers.md HTTP/1.1\" 200 5118\n::1 - [12/Oct/2015:22:31:55 +0200] \"GET /admin/ HTTP/1.1\" 401 41\n::1 - [12/Oct/2015:22:31:55 +0200] \"GET /admin/ HTTP/1.1\" 307 82\n::1 - [12/Oct/2015:22:31:55 +0200] \"GET /content/ HTTP/1.1\" 200 1091\n::1 - [12/Oct/2015:22:31:55 +0200] \"GET /admin/assets/js/app.min.js HTTP/1.1\" 200 2919\n::1 - [12/Oct/2015:22:31:55 +0200] \"GET /admin/assets/css/main.min.css HTTP/1.1\" 200 10620\n::1 - [12/Oct/2015:22:31:55 +0200] \"GET /admin/assets/js/plugins.min.js HTTP/1.1\" 200 118784\n::1 - [12/Oct/2015:22:31:55 +0200] \"GET /admin/assets/fonts/fontawesome-webfont.woff2?v=4.4.0 HTTP/1.1\" 200 64464\n::1 - [12/Oct/2015:22:31:56 +0200] \"GET /favicon.ico HTTP/1.1\" 404 2733\n::1 - [12/Oct/2015:22:31:57 +0200] \"GET /content/post/?_pjax=%23content HTTP/1.1\" 200 845\n::1 - [12/Oct/2015:22:31:58 +0200] \"GET /admin/edit/content/post/creating-a-new-theme.md?_pjax=%23content HTTP/1.1\" 500 50\n::1 - [12/Oct/2015:22:31:58 +0200] \"GET /admin/edit/content/post/creating-a-new-theme.md HTTP/1.1\" 500 50\n::1 - [12/Oct/2015:22:32:01 +0200] \"GET /content/post/ HTTP/1.1\" 200 1275\n::1 - [12/Oct/2015:22:32:02 +0200] \"GET /admin/edit/content/post/goisforlovers.md?_pjax=%23content HTTP/1.1\" 200 4660\n::1 - [12/Oct/2015:22:32:12 +0200] \"GET /content/?_pjax=%23content HTTP/1.1\" 200 668\n::1 - [12/Oct/2015:22:32:15 +0200] \"GET /content/post/?_pjax=%23content HTTP/1.1\" 200 845\n::1 - [12/Oct/2015:22:32:16 +0200] \"GET /admin/edit/content/post/creating-a-new-theme.md?_pjax=%23content HTTP/1.1\" 500 50\n::1 - [12/Oct/2015:22:32:16 +0200] \"GET /admin/edit/content/post/creating-a-new-theme.md HTTP/1.1\" 500 50\n::1 - [12/Oct/2015:22:32:20 +0200] \"GET /admin/edit/content/post/new-post4.md?_pjax=%23content HTTP/1.1\" 200 535\n::1 - [12/Oct/2015:22:32:22 +0200] \"POST /admin/edit/content/post/new-post4.md HTTP/1.1\" 200 26\nerror.log\n12/Oct/2015:22:30:17 +0200 [PANIC /admin/edit/content/post/creating-a-new-theme.md?_pjax=%!c(MISSING)ontent] go/src/github.com/hacdias/caddy-cms/frontmatter/frontmatter.go:55 - interface conversion: interface is map[interface {}]interface {}, not map[string]interface {}\n12/Oct/2015:22:30:17 +0200 [PANIC /admin/edit/content/post/creating-a-new-theme.md] go/src/github.com/hacdias/caddy-cms/frontmatter/frontmatter.go:55 - interface conversion: interface is map[interface {}]interface {}, not map[string]interface {}\n12/Oct/2015:22:30:23 +0200 [PANIC /admin/edit/content/post/creating-a-new-theme.md?_pjax=%!c(MISSING)ontent] go/src/github.com/hacdias/caddy-cms/frontmatter/frontmatter.go:55 - interface conversion: interface is map[interface {}]interface {}, not map[string]interface {}\n12/Oct/2015:22:30:23 +0200 [PANIC /admin/edit/content/post/creating-a-new-theme.md] go/src/github.com/hacdias/caddy-cms/frontmatter/frontmatter.go:55 - interface conversion: interface is map[interface {}]interface {}, not map[string]interface {}\n12/Oct/2015:22:31:58 +0200 [PANIC /admin/edit/content/post/creating-a-new-theme.md?_pjax=%!c(MISSING)ontent] go/src/github.com/hacdias/caddy-cms/frontmatter/frontmatter.go:55 - interface conversion: interface is map[interface {}]interface {}, not map[string]interface {}\n12/Oct/2015:22:31:58 +0200 [PANIC /admin/edit/content/post/creating-a-new-theme.md] go/src/github.com/hacdias/caddy-cms/frontmatter/frontmatter.go:55 - interface conversion: interface is map[interface {}]interface {}, not map[string]interface {}\n12/Oct/2015:22:32:16 +0200 [PANIC /admin/edit/content/post/creating-a-new-theme.md?_pjax=%!c(MISSING)ontent] go/src/github.com/hacdias/caddy-cms/frontmatter/frontmatter.go:55 - interface conversion: interface is map[interface {}]interface {}, not map[string]interface {}\n12/Oct/2015:22:32:16 +0200 [PANIC /admin/edit/content/post/creating-a-new-theme.md] go/src/github.com/hacdias/caddy-cms/frontmatter/frontmatter.go:55 - interface conversion: interface is map[interface {}]interface {}, not map[string]interface {}\n. No problem, 404s shows after \"save\" and \"publish\". I didn't hit back button.\n. \n. Of course, I'll do it tommorow (GMT+2) ;)\n. Hi guys, \nI tried few times but still have some bugs. First I had problems with freshly updated OS X (homebrew issues). Then I followed docs, installed whole stuff and generated assets.go. But I cannot run caddydev with --source option. I cannot point properly source directory, because I got \"Invalid source directory\" or files are fetched from github and there is no assets.go. Are you sure that cli options functions are working properly?\nHow exactly should I run caddydev assuming that my clone directory is $HOME/Documents/Workshop/caddy-cms  ?\nMaybe much easier to do some tests with this topic bug is to cross-compile caddy with an addon in your environement (darwin 64) so I could use it and do some tests?\nprocess killed: go get took too long\nCOMMAND: go get -d caddyaddon\n---- package github.com/hacdias/caddy-cms/assets: no buildable Go source files in /var/folders/t4/f0t0jt6s6bz6b2phjzprfslm0000gn/T/caddydev117150603/src/github.com/hacdias/caddy-cms/assets\nRMac:newsite marcinrakiewicz$\nRegards,\n. @hacdias Hi, I still have caddydev issue, a precompiled version is only working so I cannot check patched version.\n. Hi, I downloaded build from page. Build is quiet old (exec in my filesystem is from year 1979 ;)\nI did quick check and:\n1 . 500 errror as before, but logged\n[ERROR 500 /admin/edit/content/post/goisforlovers.md] parsing time \"2014-04-02\" as \"2006-01-02 15:04:05-07:00\": cannot parse \"\" as \"15\"\n2\n27/Oct/2015:21:43:15 +0100 [PANIC /admin/edit/content/post/migrate-from-jekyll.md] go/src/github.com/hacdias/caddy-hugo/frontmatter/frontmatter.go:56 - interface conversion: interface is map[interface {}]interface {}, not map[string]interface {}\n27/Oct/2015:21:45:24 +0100 [PANIC /admin/edit/content/post/creating-a-new-theme.md?_pjax=%!c(MISSING)ontent] go/src/github.com/hacdias/caddy-hugo/frontmatter/frontmatter.go:56 - interface conversion: interface is map[interface {}]interface {}, not map[string]interface {}\n27/Oct/2015:21:45:24 +0100 [PANIC /admin/edit/content/post/creating-a-new-theme.md] go/src/github.com/hacdias/caddy-hugo/frontmatter/frontmatter.go:56 - interface conversion: interface is map[interface {}]interface {}, not map[string]interface {}\n27/Oct/2015:21:45:28 +0100 [PANIC /admin/edit/content/post/creating-a-new-theme.md?_pjax=%!c(MISSING)ontent] go/src/github.com/hacdias/caddy-hugo/frontmatter/frontmatter.go:56 - interface conversion: interface is map[interface {}]interface {}, not map[string]interface {}\n3 .\nI tried also with source\ncaddydev --source /Users/mr/go/src/github.com/hacdias/caddy-hugo hugo\ncannot place 'hugo' after '': directive '' not found\nI have no time to test thoroughly today. I'll try in few days.\nRegards,\n. I'm all for it. But keep code modular to leave room for contributors and their forks in the future.\nThere are no other generators besides Hugo ;)\n. Will be nice but this is some funcionality. Maybe it's time to have some kind of roadmap?\nHere are some of my thoughts about the CMS in general. Forgive me if I'm writing nonsense :)\nUsually it is that the web interface is needed for people other than those who built the website. In my opinion, generally does not make sense to expand the functionalities to replace typing something in a text file by Admin. Hugo grows and it will be difficult to keep up with changes.\nI mean, potential visual construction of layotuts for different content types, assignment of field types to front-matter params in the GUI etc.\nAssuming that the goal is to facilitate the use of the Hugo by people who simply edit the page, I propose to implement user roles.\nTo leave webinterface as is - URL / admin and add another one but a little bit simpler at the URL / redactor. Redactor can only edit content of choosen type and allowed parts of front matter (configurable).\nAuthentication and security are issues to consider but in my opinion is not necessary to do anything with this in GUI.\nI think that the main use case in every cms looks like this:\n1. User is signed in 2. User chooses content type 3. User inputs some data (text, images, links) 4. Preview 5. Save, Publish\nSo these things should be top priority. Going forward:\n- focus at first on .md files (one format of content files)\n- to make in GUI some field to choosing existing content types ex. post, project, article etc. (layouts, templates, front matter already made earlier by admin). \n- to help redactors construct markdown content, by adding some typical editor features - small buttons on the top (image button, link button, header button etc.) For now they can put only placeholder into text. Next stage - some simple forms in the modals or hidden divs?\n- maybe fields you have proposed above, but somewhere you have to configure it (for example keywords - should have input field or text-area field in GUI?) Some Hugo sites doesn\u2019t have content at all, everything goes from toml/yaml values.\n. Well, I promised to share ideas :smile: \n. ",
    "moorereason": "I can't get to the termbin site.  The stack trace for goroutine 1 is the one that's causing the panic.  Everything after that will change depending on what other goroutines are active at the time of the panic.  Ignore the other stuff.\nI downloaded Caddy+hugo+search from the Caddy download page and was unable to make it panic with the Caddyfile you posted on the original Hugo issue.  I added a hugo /path/to/a/hugo/site directive to the config, and the Hugo integration works fine.  I can see my Hugo site and get to the admin panel.\n. ",
    "jungle-boogie": "Hi @moorereason,\nAre you using inetd for caddy? I am.\nWithout search and/or hugo, I get a panic on plain caddy:\nhttp://jungleboogie.me:2022/\nHere's the report for plain caddy: https://github.com/mholt/caddy/issues/374\n. @hacdias,\nRight, the error occurs without hugo or search.\nhugo & search: http://jungleboogie.me:2021/\njust caddy .76: http://jungleboogie.me:2022/\nThanks!\nHi @mholt,\nWill you file the report upstream to go?\n. ",
    "jdaiv": "Hi there! I ran from source using caddydev and received the same error. As a workaround I changed line 179 of utils/utils.go from:\ncommands.HugoCmd.Run(commands.HugoCmd, make([]string, 0))\nto\ncommands.HugoCmd.RunE(commands.HugoCmd, make([]string, 0))\nI'm not sure how to test this change properly, but I can edit pages and publish changes now!\n. commands.HugoCmd.RunE(nil, nil) runs with no error! \nAs far as I can see in the actual hugo source, it doesn't look like HugoCmd.Run is implemented?\nEdit: I found a commit that lines up with the start of this issue: https://github.com/spf13/hugo/commit/3f0f7eed68f44486c1e053bbce25c46c1d52a12f\nRun was replaced with RunE at this point!\n. @hacdias no problems! It was fun to dig through and fix.\n. Here's the config.toml:\n```\nbaseurl = \"//rooffixingsupplies.com.au\"\nlanguageCode = \"en-us\"\ntitle = \"Roof Fixing Supplies\"\n[[menu.main]]\n    name = \"Home\"\n    weight = -100\n    identifier = \"home\"\n    url = \"/\"\n```\nI assume it's valid since hugo itself never complained about it! And with workaround it parses fine too.\n. Yeah, that fixed it. Only using that syntax since it's pretty much a straight rip from the Hugo docs.\n. ",
    "captncraig": "Perhaps best to let caddy-native facilities handle logins. Basicauth is availible now. If you make something better I would like to see it availible for any app running under caddy.\n. ",
    "faddat": "I, too see this potentially becoming \"the way you put things on the web\".......\n. Gotcha.  If it helps, I think that leaps has user management of some sorts.  I haven't gotten pro-level with its config file yet, however...\n. Do you mind letting me know how to try?  Sorry, I keep taking baby steps towards golang but am not quite there yet.  I learned today from someone else it is very easy to integrate golang applications, but..... knowledge peters out here\n. It was a really great article, by the way-- thank you!\n. Okay, so: leaps uses JavaScript text areas to serve collaborative editing sessions.  The code for making one is quite simple.  Can you point out where caddy-hugo has its text areas?   \nI will give this a shot myself now.  If it works,I will send a pr your way.\n. I'm hitting some difficulty in what I think are the last steps.  \n```\nroot@fuzzbox:~/hugo-semantic-homepage-starter# caddydev --source /root/caddy-hugo hugo\nCaddy source not found. Fetching... done.\nprocess killed: go get took too long\n---- COMMAND: go get -d caddyaddon\n---- package github.com/hacdias/caddy-hugo/assets: no buildable Go source files in /tmp/caddydev744094139/src/github.com/hacdias/caddy-hugo/assets\n```\n. I think I had, but let me try that.  I think I fillowed your directions for developers exactly.  But maybe I didn't ;).\n. The basic sample content is a really great idea, it provides users with a framework when they get started.  Making that obvious helps tremendously in usability.  That way, the user can tinker and see the results of changes progressively.  \nI'm really digging this theme:\nhttps://github.com/SenjinDarashiva/hugo-uno/\nMaybe that's a decent default?  :)\n. @hacdias, I very much like the theming concept.\nOn Wed, Jun 1, 2016, 14:18 Henrique Dias notifications@github.com wrote:\n\nHey @jlsjonas https://github.com/jlsjonas,\nThanks for your suggestion. It seems to be a very good choice indeed. That\nwhat I'll probably do. Now I'm a little busy with school exams but later\nthis month I'll do that.\nI've also another idea: create a \"section\" in the interface where you can\ndownload themes and install them into your website. Do you like it?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/caddy-hugo/issues/44#issuecomment-222903092,\nor mute the thread\nhttps://github.com/notifications/unsubscribe/AGz6iYIqd9ii6QzmJbo_jSlmkrmIH3Y4ks5qHSQVgaJpZM4Hcg6O\n.\n. I'd love to trade the CPU usage for the watching.  Just my $.02.\n. Sure thing.  I'll try and have one up by wednesday.  Here's what I consider the most important things: \n\n1) Get caddy with hugo extension from caddy's web site.  Move the \"caddy\" binary to /usr/bion\ntar xvf caddy.tar.gz\nmv caddy /usr/bin\n2) Make a Caddyfile in the folder you want to serve content from and edit content with caddy-hugo.  This was tough for me.  Here's mine:  \n```\ncat Caddyfile\nsharebitstalk.io www.sharebitstalk.io technologistguild.com www.technologistguild.com {\ngzip                                                            # tells caddy to compress traffic\nproxy /         192.168.191.206:80                              # / tells caddy that it should proxy to the folder / and 192.168.191.206:80 Tells Caddy what URL to proxy at /\ntls             email=jake@klouds.org                           # Tells let's encrypt your e-mail address\n}\nchat.sharebitstalk.io {\ngzip\nproxy /         192.168.191.206:8065\ntls             email=jake@klouds.org\n}\nklouds.org www.klouds.org {\ngzip\ntls             email=jake@klouds.org\nroot            /root/hugo-semantic-homepage-starter/dist       # Tells CADDY which folder to serve as the root\nbasicauth       /admin faddat *                         # protect the admin area using HTTP basic auth\nhugo            /root/hugo-semantic-homepage-starter            # Tells HUGO which folder to execute in\n}\n```\n3)   Save your Caddyfile and run caddy with the command, executed in the same folder as the Caddyfile.  \ncaddy\n. Sure thing!  Thinks for the awesome tool, @hacdias!\n. Screencast coming some time this hour :). \n. @ozzadar has been making awesome videos on windows lately-- anyone know a great video editor for Linux?  Goal:  \"out-class Corel Video\"\n. Maybe one hour from now.... work.....\nOn Feb 25, 2016 9:03 AM, \"Brian Zerangue\" notifications@github.com wrote:\n\nAwesome!\nOn Wed, Feb 24, 2016 at 8:02 PM, Jacob Gadikian notifications@github.com\nwrote:\nScreencast coming some time this hour :).\n\u2014\nReply to this email directly or view it on GitHub\n[https://github.com/hacdias/caddy-hugo/issues/50#issuecomment-188560293]\n.[\nhttps://github.com/notifications/beacon/AABqG8-OdBfjgAO2CsPvrwebhPwKF2Jcks5pnlg7gaJpZM4HfPgT.gif]\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/hacdias/caddy-hugo/issues/50#issuecomment-188560399.\n. Does anyone have a good guide for doing screencasts?  I've made this one twice now but it takes an hour to show what shouldn't be longer than 15 minutes....\n. Howdy\n\n\"Only the ones that use Hugo?\"\nOn Jun 19, 2016 8:41 PM, \"Henrique Dias\" notifications@github.com wrote:\n\nI'll close this issue due to its inactivity.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/caddy-hugo/issues/51#issuecomment-226997940,\nor mute the thread\nhttps://github.com/notifications/unsubscribe/AGz6icbhciT9aGU17LIKDgyBUEGYxbqeks5qNUcAgaJpZM4HfmbU\n.\n. That explains it!\n\nAnd about the Docker-- @abiosoft  has been doing incredible things with caddy and docker, so I imagine that is the reason.... \n. @hacdias \nSo, I finally have my implementation up and running.  I'd love to get your thoughts on my thoughts:  some of my posts are directly about caddy-hugo.  It's pretty likely that I will make caddy-hugo my testing place for learning how to write API stuff in golang.  \nThank you so much for your hard work on this plugin.  It ROCKS!\njacobgadikian.com\nPs:  I just realized I have no idea why I put this in this issue-thread.  Oh, well-- I'm not sure how it would fit into any of the others, either ;).\n. ",
    "klingtnet": "I would argument against this. Users should explicitly state the style they want to use. Boostrap is also fairly large, if so we should use something minimal like skeleton.\n. Hi @hacdias\nHugo was downloaded: /home/MYUSERNAME/.go/bin/hugo.\nI've changed the paths in my config file like you proposed to do, but the problem is still the same.\n``` sh\n/tmp: caddy -conf /tmp/caddy.conf\nActivating privacy features... done.\nUsage:\n  hugo new site [path] [flags]\nFlags:\n  -f, --format=\"toml\": config & frontmatter format\nGlobal Flags:\n  -b, --baseURL=\"\": hostname (and path) to the root, e.g. http://spf13.com/\n  -D, --buildDrafts[=false]: include content marked as draft\n  -F, --buildFuture[=false]: include content with publishdate in the future\n      --cacheDir=\"\": filesystem path to cache directory. Defaults: $TMPDIR/hugo_cache/\n      --config=\"\": config file (default is path/config.yaml|json|toml)\n  -d, --destination=\"\": filesystem path to write files to\n      --disableRSS[=false]: Do not build RSS files\n      --disableSitemap[=false]: Do not build Sitemap file\n      --editor=\"\": edit new content with this editor, if provided\n      --ignoreCache[=false]: Ignores the cache directory for reading but still writes to it\n      --log[=false]: Enable Logging\n      --logFile=\"\": Log File path (if set, logging enabled automatically)\n      --pluralizeListTitles[=true]: Pluralize titles in lists using inflect\n      --preserveTaxonomyNames[=false]: Preserve taxonomy names as written (\"G\u00e9rard Depardieu\" vs \"gerard-depardieu\")\n  -s, --source=\"\": filesystem path to read files relative from\n      --stepAnalysis[=false]: display memory and timing of different steps of the program\n  -t, --theme=\"\": theme to use (located in /themes/THEMENAME/)\n      --uglyURLs[=false]: if true, use /filename.html instead of /filename/\n  -v, --verbose[=false]: verbose output\n      --verboseLog[=false]: verbose logging\nError: unknown flag: --force\nCRITICAL: 2016/03/05 unknown flag: --force\npanic: exit status 255\ngoroutine 1 [running]:\npanic(0xb02140, 0xc820150d70)\n    /usr/local/go/src/runtime/panic.go:464 +0x3e6\nlog.Panic(0xc8201014f0, 0x1, 0x1)\n    /usr/local/go/src/log/log.go:320 +0xc1\ngithub.com/hacdias/caddy-hugo.Setup(0xc820088680, 0xc8200f7f30, 0x0, 0x0)\n    /home/caddy/go/src/github.com/hacdias/caddy-hugo/hugo.go:50 +0x3ff\ngithub.com/mholt/caddy/caddy.loadConfigs(0x7ffd056d452b, 0xa, 0x7f10fe2d64e0, 0xc8200f7d10, 0x0, 0x0, 0x0, 0x0, 0x0)\n    /tmp/custombuild_1212_768707807/src/github.com/mholt/caddy/caddy/config.go:166 +0xa15\ngithub.com/mholt/caddy/caddy.Start(0x7f10fe2d6bc8, 0xc8200f7ce0, 0x0, 0x0)\n    /tmp/custombuild_1212_768707807/src/github.com/mholt/caddy/caddy/caddy.go:140 +0x2aa\nmain.main()\n    /tmp/custombuild_1212_768707807/src/github.com/mholt/caddy/main.go:103 +0x61f\n. sh\nhugo version\nHugo Static Site Generator v0.15-DEV BuildDate: 2015-09-22T16:36:41+02:00\n```\n. Running hugo help:\n``` sh\n /tmp: hugo --version\nUsage:\n  hugo [flags]\n  hugo [command]\nAvailable Commands:\n  server          Hugo runs its own webserver to render the files\n  version         Print the version number of Hugo\n  config          Print the site configuration\n  check           Check content in the source directory\n  benchmark       Benchmark hugo by building a site a number of times.\n  convert         Convert your content to different formats\n  new             Create new content for your site\n  list            Listing out various types of content\n  undraft         Undraft changes the content's draft status from 'True' to 'False'\n  genautocomplete Generate shell autocompletion script for Hugo\n  gendoc          Generate Markdown documentation for the Hugo CLI.\nFlags:\n  -b, --baseURL=\"\": hostname (and path) to the root, e.g. http://spf13.com/\n  -D, --buildDrafts[=false]: include content marked as draft\n  -F, --buildFuture[=false]: include content with publishdate in the future\n      --cacheDir=\"\": filesystem path to cache directory. Defaults: $TMPDIR/hugo_cache/\n      --config=\"\": config file (default is path/config.yaml|json|toml)\n  -d, --destination=\"\": filesystem path to write files to\n      --disableRSS[=false]: Do not build RSS files\n      --disableSitemap[=false]: Do not build Sitemap file\n      --editor=\"\": edit new content with this editor, if provided\n      --ignoreCache[=false]: Ignores the cache directory for reading but still writes to it\n      --log[=false]: Enable Logging\n      --logFile=\"\": Log File path (if set, logging enabled automatically)\n      --noTimes[=false]: Don't sync modification time of files\n      --pluralizeListTitles[=true]: Pluralize titles in lists using inflect\n      --preserveTaxonomyNames[=false]: Preserve taxonomy names as written (\"G\u00e9rard Depardieu\" vs \"gerard-depardieu\")\n  -s, --source=\"\": filesystem path to read files relative from\n      --stepAnalysis[=false]: display memory and timing of different steps of the program\n  -t, --theme=\"\": theme to use (located in /themes/THEMENAME/)\n      --uglyURLs[=false]: if true, use /filename.html instead of /filename/\n  -v, --verbose[=false]: verbose output\n      --verboseLog[=false]: verbose logging\n  -w, --watch[=false]: watch filesystem for changes and recreate as needed\nUse \"hugo [command] --help\" for more information about a command.\nError: unknown flag: --version\nCRITICAL: 2016/03/05 unknown flag: --version\n``\n. I'm suppose that you're downloadinghugowithgo get -don the first run ofcaddy-hugo`?\nThe version from there seems to be fairly old.\nUPDATE: There is no alias:\nsh\n$ command -v hugo\n/home/MYUSERNAME/.go/bin/hugo\n. @hacdias \nYou're right, I had installed hugo sometime ago. I removed all previous hugo installations (to be clear, it was only one :smile: ) but the automatic installation of hugo fails:\n``` sh\n/tmp: caddy -conf /tmp/caddy.conf\nActivating privacy features... done.\nUnable to find Hugo on your computer.\nDownloading Hugo from GitHub releases... downloaded.\nChecking SHA256...checked!\nUnziping... open /tmp/caddy-hugo127013417: is a directory\n/tmp: ll caddy-hugo127013417 \ntotal 4,4M\n-rwxrwxr-- 1 MYUSERNAME users 4,4M  5. M\u00e4r 15:43 hugo_0.15_linux_amd64.tar.gz\n```\nPS: There is a missing p in Unziping.\n. The tarball is broken:\n``` sh\n/tmp: curl -Lsf 'https://dl.bintray.com/hacdias/generic/caddy-hugo/1457123545/:caddy_linux_amd64.tar.gz' | tar -C ~/bin -xvzf - -- hugo\ngzip: stdin: unexpected end of file\ntar: Child returned status 1\ntar: Error is not recoverable: exiting now\n```\n. I copied the link directly from the site.\n. The fixed link works:\nsh\n/tmp: curl -Lsf 'https://dl.bintray.com/hacdias/generic/caddy-hugo/1457123545/caddy_linux_amd64.tar.gz' | tar -C ~/bin -xvzf - -- caddy \ncaddy\nBe patient, I will try to run this caddy version.\n. Running from tmp won't work because you're trying to create a hard link that crosses device boundaries:\nsh\n/tmp: caddy -conf /tmp/caddy.conf\nActivating privacy features... done.\nUnable to find Hugo on your computer.\nDownloading Hugo from GitHub releases... downloaded.\nChecking SHA256...checked!\nUnziping... done.\nrename /tmp/caddy-hugo156319884/hugo_0.15_linux_amd64/hugo_0.15_linux_amd64 /home/MYUSERNAME/.caddy/bin/hugo: invalid cross-device link\nRunning from a different folder (inside my userhome) won't work as well, because you're downloading to /tmp which is usually a tmpfs.\nsh\n~/tmp/caddy-hugo: caddy -conf ./caddy.conf\nActivating privacy features... done.\nUnable to find Hugo on your computer.\nDownloading Hugo from GitHub releases... downloaded.\nChecking SHA256...checked!\nUnziping... done.\nrename /tmp/caddy-hugo000115982/hugo_0.15_linux_amd64/hugo_0.15_linux_amd64 /home/MYUSERNAME/.caddy/bin/hugo: invalid cross-device link\n. Proposed solution: Copy the binary and remove the /tmp directory.\n. You're welcome. Can't wait to try out the hugo admin panel because this is basically what I wanted to develop myself before I discovered caddy.\n. I've a lot of other work to do at the moment, but I will try to contribute when I got some spare time.\n. Yeah, I already noticed :+1: \nYou forget to set the executable bit of ~/.caddy/bin/hugo after downloading it. After setting the bit, everything works fine!\nInstallation steps (for anyone else):\nsh\ncurl -Lsf 'https://dl.bintray.com/hacdias/generic/caddy-hugo/1457193456/caddy_linux_amd64.tar.gz' | tar -C ~/bin -xvzf - -- caddy\ncaddy -conf ./caddy.conf\nchmod +x ~/.caddy/bin/hugo\ncaddy -conf ./caddy.conf\n. Yeah, correctly.\n. Ok, thanks for your work!\n. ",
    "justrjlewis": "If anything...some basic sample content with a simple theme Cocoa, or maybe Type, or Pure Hugo.\n. I am also getting this error.\nHere's the output from the console: http://cl.ly/432g3O1G3V3y\nThis was Safari Version 9.0.3 (11601.4.4)\nI did load the latest version.\nAlso, I'm not sure if it's related, but I cannot load the settings tab.  I get a 500 error that resolves to this in the log: \n07/Mar/2016:18:58:58 -0600 [PANIC /admin/edit/config.toml] go/src/github.com/hacdias/caddy-hugo/frontmatter/frontmatter.go:59 - interface conversion: interface is []map[string]interface {}, not map[string]interface {}\n. Hi Henrique(@hacdias)!\nI don't have an admin/edit/config.toml file.  Should I have created one?\nAlso I started with the one from caddyserver.com and then loaded the one from Bintray after I read this thread.\n. ```\nbaseurl = \"http://co97.justrjlewis.com\"\nlanguageCode = \"en-us\"\ntitle = \"Millwood High School Class of 97\"\nthemesdir = \"themes\"\ntheme = \"hugo-future-imperfect\"\npreserveTaxonomyNames = true\npaginate = 3\ndisqusShortname = \"mhs97\"\ngoogleAnalytics = \"\"\n[permalinks]\n  post = \"/:year/:month/:title/\"\n[params]\n    # Sets the meta tag description, usually reserved for the main page\n    description          = \"The Millwood High School class of 1997 planning website. Design: HTML5 UP [http://html5up.net]. Ported by Julio Pescador[//github.com/jpescador]\"\n    # This will appear on the top left of the navigation bar\n    navbarTitle          = \"Millwood HIgh School Class of 1997\"\n    # Social media buttons that appear on the sidebar\n    socialAppearAtTop    = true\n    socialAppearAtBottom = true\n    # set this to the section name if section is not post\n    viewMorePostLink     = \"/blog/\"\nOptional Params\ncategoriesByCount    = true\nincludeReadingTime   = true\n# The set of favicons used are based on the write-up from this link:\n# https://github.com/audreyr/favicon-cheat-sheet\n# Please see the favicon partial template for more information\nloadFavicon          = false\nfaviconVersion       = \"\"\n\n# Load custom CSS or JavaScript files. This replaces the deprecated params\n# minifiedFilesCSS and minifiedFilesJS. The variable is an array so that you\n# can load multiple files if necessary. You can also load the standard theme\n# files by adding the value, \"default\".\ncustomCSS            = [\"default\", \"/css/main.css\"]\ncustomJS             = [\"default\", \"/js/main.js\"]\n\n# Loading min files for exampleSite\n# customCSS            = [\"/css/main.css\"]\n# customJS             = [\"/js/main.js\"]\n\nparms.intro will appear on the sidebar\nThis is optional, but it's suggested to use\n[params.intro]\n    header    = \"Millwood High School Class of 1997\"\nparagraph = \"This website was created for Millwood graduates class of 1997 to begin the process of planning our 20th class reunion.\"\n\nabout     = \"The 20 year reunion planning committee is hard at work. Classmates can use this website to get the latest updates and keep up with the activities/events and fundraisers!\"\n\nThis will also appear on the sidebar.\nA width of less than 100px is recommended\nThis is optional\n[params.intro.pic]\n    src       = \"/img/main/logo.png\"\n    # modify your picture in the shape of a circle or\n    # future imperfect's hexagonal shape\n    circle    = false\n    imperfect = false\n    width     = \"\"\n    alt       = \"MHS Falcon\"\nAdjust the amount of recent posts on the sidebar.\nThis is optional. The default value 5 will be used\n[params.postAmount]\n    sidebar = 2\nSet up your menu items in the navigation bar\nYou can use identifier to prepend a font awesome icon to your text\n[[menu.main]]\n    name = \"Other News\"\n    url = \"/blog\"\n    identifier = \"fa fa-newspaper-o\"\n    weight = 1\n[[menu.main]]\n    name = \"Categories\"\n    url = \"/categories\"\n    weight = 2\n[[menu.main]]\n    name = \"About\"\n    url = \"/about\"\n    weight = 3\nInsert your username and the icon will apear on the page as long as\nsocialAppearAtTop or socialAppearAtBottom is set to true in the params area\nThe social media icons will appear on the sidebar\n[social]\n    github          = \"\"\n    bitbucket       = \"\"\n    jsfiddle        = \"\"\n    codepen         = \"\"\n    foursquare      = \"\"\n    dribbble        = \"\"\n    deviantart      = \"\"\n    behance         = \"\"\n    flickr          = \"\"\n    instagram       = \"\"\n    youtube         = \"\"\n    vimeo           = \"\"\n    vine            = \"\"\n    medium          = \"\"\n    wordpress       = \"\"\n    tumblr          = \"\"\n    xing            = \"\"\n    linkedin        = \"\"\n    slideshare      = \"\"\n    stackoverflow   = \"\"\n    reddit          = \"\"\n    pinterest       = \"\"\n    googleplus      = \"\"\n    facebook        = \"groups/839187706172143/\"\n    facebook_admin  = \"\"\n    twitter_domain  = \"\"\n    twitter         = \"\"\n    email           = \"millwoodclassof1997@gmail.com\"\n```\n. I downloaded from caddyserver.com.  Oh-okay.  No worries.  I actually edit it either in iterm, or sublime, but I wanted you to know about the error. :-)  Good luck with your exams!\n. It didn't work. It does conflict with the primary admin. Shucks.\n. @hacdias I saw that! \ud83d\ude08 \n. ",
    "jlsjonas": "I would've also preferred a bootstrap/skeleton as default; also (or as a start) an (empty) 'theme' options in the config would help hinting where the theme should go (and indicate that a theme is required) for newer users; especially since theme's tend to suggest the hugo -t command-line parameter\n. ",
    "k1ngf15h3r": "okay I understand just a little bit of it ... mostly I programm in windows c# and powershell ;)\n. okay ;) then I will wait what you will be building =)\n. But isn't it already a feature in Hugo to add watch to true to recognize changes and render them live?\n. damn :-/ that is a little bit anoying so I have to restart caddy-hugo each time I update or add content?!\n. ",
    "ludovicc": "With Docker, it's easy. Go to the folder containing the Hugo project, then\ndocker run -d -v $(pwd):/srv -p 2015:2015 ludovicc/caddy-hugo\n. I can deal with that, it's less scary than it looks. I will publish the\nDocker file later.\nThanks\nLe 22 f\u00e9vr. 2016 20:05, \"Henrique Dias\" notifications@github.com a \u00e9crit :\n\nHello!\nThat \"error\" is normal. That's why you have to execute go generate then.\nIt can be skipped, or is it preventing you to continue?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/hacdias/caddy-hugo/issues/52#issuecomment-187322447.\n. I have published my Dockerfile here: https://github.com/ludovicc/caddy-hugo. It should appear also in hub.docker.com as ludovicc/caddy-hugo.\n. Hello,\n\nI tried, but it doesn't seem to work, the Caddy server runs but does not\neven listen on port 2015.\nLudovic\n2016-02-23 19:25 GMT+01:00 Henrique Dias notifications@github.com:\n\nHello @ludovicc https://github.com/ludovicc\nAs I understood, you are running caddy-hugo from source, so there are some\ndifferences from the documentation. I've implemented a new idea that's\nalready on master but not detailed in the docs.\nInstead of:\nhugo /srv {\n   cmd \"--buildDrafts --watch --baseURL=http://localhost:2015/ --bind 0.0.0.0 --port 2015\"\n}\nTry:\nhugo /srv {\n   buildDrafts\n   watch\n   baseURL http://localhost:2015/\n   bind 0.0.0.0\n   port 2015\n}\nHope it helps!\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/hacdias/caddy-hugo/issues/53#issuecomment-187829775.\n. Hello,\n\ncaddydev fails with this error, do you have any idea?\nWatcher enabled, watching for file changes.\nBuilding...\n2016/02/27 21:50:18 exit status 2\n---- COMMAND: go build -o /tmp/caddydev888063144\n---- \n---- # github.com/mholt/caddy/caddy/https\n---- caddy/https/setup.go:271: undefined: tls.TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\n---- caddy/https/setup.go:272: undefined: tls.TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384\n---- caddy/https/setup.go:292: undefined: tls.TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384\n---- caddy/https/setup.go:293: undefined: tls.TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\n---- caddy/https/setup.go:308: undefined: tls.TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384\n---- caddy/https/setup.go:309: undefined: tls.TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\n. @mholt thanks, I've made progress.\n@hacdias I'm getting something that's almost working, at least Caddy is starting and listens on the right port, but most requests fail with 404.\nTry this:\ndocker pull ludovicc/caddy-hugo\ndocker run -d --name caddy-hugo -v $(pwd):/srv -p 7011:7011 -e PORT=7011 ludovicc/caddy-hugo\nStrangely, http://localhost:7011/srv/public/ serves some content, everything else returns 404. Any idea?\n. Yes, /admin included\n2016-03-03 20:09 GMT+01:00 Henrique Dias notifications@github.com:\n\nEven /admin?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/hacdias/caddy-hugo/issues/53#issuecomment-191918280.\n. Caddy was launched with this command:\n\n/home/go/bin/caddydev --source /home/go/src/github.com/hacdias/caddy-hugo\nhugo -port 7011\n/etc/Caddyfile contains the configuration, /srv the Hugo project to serve.\nThis is my Caddyfile:\ndisable HTTPS to run the server on localhost\ntls off\nthe folder where Hugo generates the website\nroot      /srv/public\nenable the admin panel\nhugo /srv {\n   buildDrafts\n   watch\n   baseURL http://localhost:7011/\n}\n2016-03-03 20:18 GMT+01:00 Henrique Dias notifications@github.com:\n\nStrange... So that's not a problem of caddy-hugo I think. What's your\nconfiguration? And your Caddyfile?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/hacdias/caddy-hugo/issues/53#issuecomment-191923001.\n. Hello,\n\nI tried to run this with your Caddyfile in the current directory:\nsudo docker run -d -v $(pwd):/srv -p 7011:7011 -e PORT=7011 ludovicc/caddy-hugo\ncd /\n/home/go/bin/caddydev --source /home/go/src/github.com/hacdias/caddy-hugo hugo -port 7011\nit says:\nWatcher enabled, watching for file changes.\nBuilding...\nStarting Caddy...\nActivating privacy features... done.\n:7011\nBut I still get the 404 errors. Note that I need to force the use of port 7011 on the command line of caddydev, otherwise it uses port 2015. Actually, it looks like the Caddyfile is never used, but I do not know why.\nIf I do this:\ndocker run -v $(pwd):/srv -p 7011:7011 -e PORT=7011 --entrypoint /bin/sh -i -t --rm ludovicc/caddy-hugo\ncd /srv\n/home/go/bin/caddydev --source /home/go/src/github.com/hacdias/caddy-hugo hugo\nthen it says:\nWatcher enabled, watching for file changes.\nBuilding...\nStarting Caddy...\nActivating privacy features... done.\nUnable to find Hugo on your computer.\nDownloading Hugo from GitHub releases... downloaded.\nChecking SHA256...checked!\nUnziping... open /tmp/caddy-hugo526225374: is a directory\nand the server doesn't run.\nYou can check how the Docker image was built here: https://hub.docker.com/r/ludovicc/caddy-hugo/~/dockerfile/\n. Hello, sorry for the long delay. I'm trying with the version on Bintray, but it doesn't seem to support disabling tls and Letsencrypt certificate generation.\n/usr/local/bin/caddy -port 2015 -log /var/log/caddy.log\nActivating privacy features...2016/04/05 23:44:10 [tls] failed to get certificate: acme: Error 400 - urn:acme:error:malformed - Error creating new authz :: DNS name does not have enough labels\nCaddyfile:\n```\ndisable HTTPS to run the server on localhost\ntls off\nthe folder where Hugo generates the website\nroot /srv/public\nenable the admin panel\nhugo /srv {\n   buildDrafts\n   watch\n   baseURL http://localhost:/\n}\n```\n. @hacdias thanks, the build of caddy with the hugo plugin included works like a charm!\n. ",
    "bzerangue": "Awesome!\nOn Wed, Feb 24, 2016 at 8:02 PM, Jacob Gadikian notifications@github.com\nwrote:\nScreencast coming some time this hour :).\n\u2014\nReply to this email directly or view it on GitHub\n[https://github.com/hacdias/caddy-hugo/issues/50#issuecomment-188560293] .[https://github.com/notifications/beacon/AABqG8-OdBfjgAO2CsPvrwebhPwKF2Jcks5pnlg7gaJpZM4HfPgT.gif]\n. ",
    "liz-miller": "I know this is 8 mos old, but I'd like to see this screencast. I've been reading through the issues and documentations, etc and I am still having some trouble getting caddy + hugo  hosted on github to work properly :( \n. I've completed the following:\n- installed Hugo \n- created a Hugo site & content\n- created a GitHub repo to host using gitpages \n- configured my domain to point to the GitHub pages URL\n- made my site live (www.queenflex.com)\nNow what I want to do is add caddy-Hugo for the ability to blog anywhere. \nI've done the following for caddy:\n- downloaded caddy with Hugo extension\n- added caddy to the path\n- attempted at a caddy file, but it's failed --> I'm suck here\nI'm not at my computer now, but I will send you the caddyfile and output errors later on. \nIt's probably something simple I'm missing...\n\nOn Feb 7, 2017, at 14:41, Henrique Dias notifications@github.com wrote:\nHello @liz-miller, if you really need it, I could do it in the weekend probably, but tell me: what have you already done and where is it failing? \ud83d\ude42\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub, or mute the thread.\n. I see. Well that could be the reason for my problems. I didn't realize I couldn't host using github -_-\nOn Feb 7, 2017, at 14:54, Henrique Dias notifications@github.com wrote:\nTo use caddy-hugo you'll need to have it set up on your own server but it seems you're using Github Pages. Anyway, if you can send me the Caddyfile I can check if it has got any error related to hugo \ud83d\ude04\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub, or mute the thread.\n. will Caddy + Caddy-Hugo work with hosting on AWS?. \n",
    "tonka3000": "Yes, it's in the same directory.\n. I'm using it on windows 7 x64 SP1.\nI moved my hugo site to a different location on my harddisk and give it all rights, and now it works - with gzip => so it seems to be a access problem, but i don't know why i got 404 instead of 403.\nThe only thing which does not work at the moment are the css-stuff.\nMy final Caddyfile is\n```\nlocalhost:2020\ngzip\nroot ./public\nhugo {\n}\n```\nThanks for your help.\n. :+1: \n. ",
    "tboerger": "Do you know how long it takes to get it integrated into the caddy builds from the website?\n. ",
    "bronzehedwick": "Yes, the Mac version.\n. Javascript is enabled. When i try to save I get a 400 Bad Request error:\nHTTP/1.1 400 Bad Request\nContent-Encoding: gzip\nContent-Type: text/plain; charset=utf-8\nServer: Caddy\nVary: Accept-Encoding\nx-content-type-options: nosniff\nDate: Sun, 28 Feb 2016 17:00:45 GMT\nContent-Length: 40\n. Source of my test home.md page is super simple:\n``` md\nHome\nyep\n```\n. Maybe this is where I'm doing something wrong; I'm not sure where that path is.\nMy directory structure looks like this:\n.\n\u251c\u2500\u2500 Caddyfile\n\u251c\u2500\u2500 LICENSE\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 access.log\n\u251c\u2500\u2500 archetypes\n\u251c\u2500\u2500 config.toml\n\u251c\u2500\u2500 content\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 home.md\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 post\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 first.md\n\u251c\u2500\u2500 data\n\u251c\u2500\u2500 error.log\n\u251c\u2500\u2500 layouts\n\u251c\u2500\u2500 public\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 404.html\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 apple-touch-icon-144-precomposed.png\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 css\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 hyde.css\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 poole.css\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 syntax.css\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 favicon.png\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 home\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 index.html\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 index.html\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 index.xml\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 post\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 first\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 index.html\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 index.html\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 index.xml\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 robots.txt\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 sitemap.xml\n\u251c\u2500\u2500 static\n\u2514\u2500\u2500 themes\n    \u251c\u2500\u2500 LICENSE\n    \u251c\u2500\u2500 README.md\n    \u251c\u2500\u2500 hyde\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 LICENSE.md\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 README.md\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 archetypes\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 default.md\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 images\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 screenshot.png\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 tn.png\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 layouts\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 404.html\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 _default\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 list.html\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 single.html\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 index.html\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 partials\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 disqus.html\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 head.html\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 sidebar.html\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 static\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 apple-touch-icon-144-precomposed.png\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 css\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 hyde.css\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 poole.css\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 syntax.css\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 favicon.png\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 theme.toml\nIn case this is useful, my Caddyfile is:\nlocalhost:2020\ngzip\nlog ./access.log\nbrowse\nroot public\nhugo\nerrors ./error.log\n. Removed browse, same error.\n. config.toml is:\nbaseurl = \"http://localhost:2020\"\nlanguageCode = \"en-us\"\ntitle = \"Test Hugo\"\ntheme = \"hyde\"\n. The source of http://localhost:2020/admin/edit/content/home.md is the source I already posted:\n``` md\nHome\nyep\n```\nI actually narrowed down the issue: it only works in Chrome. I was using Firefox initially, and tested in Safari, and both have the same issue. Is the admin Chrome only?\n. Ah sorry, got confused. Here's a screenshot of the Firefox console, directly after clicking save.\n\n. Hey @hacdias, thanks for taking the time to look into this.\nHere are the request headers from that page.\nHost: localhost:2020\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:46.0) Gecko/20100101 Firefox/46.0\nAccept: application/json, text/javascript, */*; q=0.01\nAccept-Language: en-US,en;q=0.5\nAccept-Encoding: gzip, deflate\nReferer: http://localhost:2020/admin/edit/content/home.md\nContent-Type: application/json; charset=utf-8\nX-Requested-With: XMLHttpRequest\nContent-Length: 31\nCookie: stickynoties=true; stickynoties=true; sort=name; order=asc\nConnection: keep-alive\nPragma: no-cache\nCache-Control: no-cache\n. @hacdias sorry I haven't had a chance to test but will soon\n. Hm, I must be doing something else wrong.  Using the caddy_darwin_amd64.zip archive from this page: https://bintray.com/hacdias/generic/caddy-hugo/view#files/caddy-hugo/1457035347, I get the following error:\nActivating privacy features... done.\nuser: Current not implemented on darwin/amd64\nThe command I'm using is /path/to/caddy -conf=\"./Caddyfile\" from my caddy root directory.\n. @hacdias sadly same error in the GUI. Got this in the error log:\n10/Mar/2016:21:51:05 -0500 [PANIC /admin/edit/content/home.md] /home/travis/.gimme/versions/go/src/log/log.go:320 - X-Content-Type header not defined\n10/Mar/2016:21:51:07 -0500 [PANIC /admin/edit/content/home.md] /home/travis/.gimme/versions/go/src/log/log.go:320 - X-Content-Type header not defined\n. @hacdias thanks so much! Please let me know if I can help in any way.\n. @hacdias yes, that works, in both Firefox and Safari for me. Minor point, but the success message is blank in those browsers (it still displays fine in Chrome).\n\n. Yes, that works! Thanks so much.\n. ",
    "Bitti09": ":+1:\n. Tested it  now:\nwithout doing a  go generate . in \nsrc/github.com/hacdias/caddy-hugo\nthe  error\nsrc/github.com/hacdias/caddy-hugo/hugo.go:18:2: no buildable Go source files in /root/caddy-src/src/github.com/hacdias/caddy-hugo/routes/assets\nstill exists\nafter doing that no error  is shown and  the expected\nnew caddy build: /root/caddy-src/build2/customCaddy message\nis displayed :smile: \n. note: i've tested it on a freshl downloaded caddy with filemanager as a plugin today  and got the error.\nMe too doesn't sees the reason why the caddy filemanager plugin uses 644 as permission. Does caddy download link automatically include the update or do I have to\nwait for next release version?\nOn Mon, Aug 14, 2017, 19:37 Henrique Dias notifications@github.com wrote:\n\nI'm deploying to the Caddy server right now. Check the docs!\nhttps://henriquedias.com/filemanager/caddy/.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/filemanager/issues/203#issuecomment-322256460,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AALapVBvkmVud_2r60bU73CX6I6tT3f9ks5sYIXdgaJpZM4O1oda\n.\n. Thanks for the update \ud83d\udc4d\ud83d\udc4d\ud83d\udc4d\n\nOn Mon, Aug 14, 2017, 19:50 Henrique Dias notifications@github.com wrote:\n\nIt already includes the update!\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/filemanager/issues/203#issuecomment-322259935,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AALapdSBNPZuzRGawCwL2_YfwwUmLplgks5sYIjrgaJpZM4O1oda\n.\n. \n",
    "brasilikum": "Thoughts on the Preview:\nI think generally iframes are an an ugly thing, but maybe an iframe would provide a \"real time preview\" next to the editor, where the content would be regenerated on 2 seconds of not-typing. What do you think?\n. Maybe just tell users to open temp in a separate window and put it on the right from the editor. \nAuto recompile should still be a thing in my opinion. \nAm 22. Juni 2016 23:01:51 MESZ, schrieb Henrique Dias notifications@github.com:\n\nHey @brasilikum \nI agree with you on one thing: I think generally iframes are an ugly\nthing. Even in this case. The most similar thing I think that would\nwork would be the temp directory regenerating himself after those\n2 seconds of not-typing and showing up a kind of a popup asking to go\nto temp dir. \nI don't really know what is the best approach here. Do you have any\nother idea besides the iframe?\n\nYou are receiving this because you were mentioned.\nReply to this email directly or view it on GitHub:\nhttps://github.com/hacdias/caddy-hugo/issues/77#issuecomment-227875380\n\n\nDiese Nachricht wurde von meinem Android-Mobiltelefon mit K-9 Mail gesendet.\n. I do, see the other issues \ud83d\ude09\n. No. Do I have to run caddy other than just 'caddy'?\n. ok, so this is not so easy to track. It works some times, however as there is no output, I simply thought it had not worked. I will suggest a visual feedback on success in another issue. However the second time I got 403, but also no visual feedback. Why would that be?\n. ok, the permissions might be the problem.\n. Ok, that worked. Hot reloading seems to be a whole different topic so I might still have to rely on 'hugo serve' for some time.\n. ",
    "fghhfg": "add a drop-n-drag feature on image. https://gohugo.io/overview/quickstart/. No, thx. If someone has same problem, check link    https://gohugo.io/overview/quickstart/\nAnyone who wants to use this program needs to know some Hugo knowledge.. ",
    "F0rth": "A wysiwyg button to switch between raw mardown or wysiwyg editor like Pen http://sofish.github.io/pen/ .. A theme chooser / picker to download / apply / update new themes.. ",
    "fedelibre": "I read:\n\nThis page preview mode would replace the current \"preview\" button that exists on the Edit screen.\n\nI cannot find any \"preview\" button on the Edit screen.\nThe edit screen is the page where I can edit a markdown file?\nI'm using Caddy 0.10.6\n. ",
    "jmcclelland": "Thanks for the amazing project! I'm interested in using the software to help users edit their hugo sites after I build them. Toward that goal, I'm mostly interested in features targeting non-technical users. \nIn particular - having buttons along the top of the editor page on markdown pages for bold, italics, links, image, etc. would be particularly useful for people who don't remember markdown syntax. No need for WYSIWYG - just buttons that will insert the right markdown characters.\nIs that consistent with your vision of the project?. Are you using the latest version? I see output when I run a command\n\n. ",
    "YLaido": "Thanks for the great project :) But I am a little bit confused: the preview of a .mkv file appears to be soundless. Is that normal? BTW is it possible for me to customize the html5 player? . ",
    "chesedo": "@hacdias great :smiley: .\nI will be using caddy-hugo quite a bit in the next few days so will also create some others bugs (that you will probably know about)\n. Awesome, I take it that the fix is in the upcoming new release (for Caddy v0.9)?\n. @hacdias I created an issue there - https://github.com/hacdias/caddy-filemanager/issues/4\n. ",
    "icyleaf": "That's great, thanks :)\n. ",
    "anxiousmodernman": "I will try with a new build once the new code is on the build server. :)\n. @mholt I just did a test from the build server, and it worked. Thank you! I myself opted to build from source last night, and that was simple enough. But I downloaded from the website and it worked.\n. @mikeifomin   How recently? It seems the build server was updated 10 minutes ago :)\n. ",
    "mikeifomin": "Hello I have the same crash but on Linux. \nI recently downloaded the binary form url\nhttps://caddyserver.com/download/build?os=linux&arch=amd64&features=cors%2Cfilemanager%2Chugo\nI run binary under docker.\ngoroutine 1 [running]:\npanic(0x9c7d00, 0xc420010060)\n        /usr/local/go/src/runtime/panic.go:500 +0x1a1\ngithub.com/hacdias/caddy-hugo.checkVersion(0xc42018ac20, 0x15, 0x11d6000)\n        /home/caddy/go/src/github.com/hacdias/caddy-hugo/installer.go:95 +0x15b\ngithub.com/hacdias/caddy-hugo.getPath(0xa285a0, 0xc4200f7dc0)\n        /home/caddy/go/src/github.com/hacdias/caddy-hugo/installer.go:50 +0x67c\ngithub.com/hacdias/caddy-hugo.parse(0xc420066360, 0xc4201464d0, 0xc, 0x0, 0xc420195728, 0x40efee)\n        /home/caddy/go/src/github.com/hacdias/caddy-hugo/setup.go:144 +0x13a\ngithub.com/hacdias/caddy-hugo.setup(0xc420066360, 0x4, 0xa60663)\n        /home/caddy/go/src/github.com/hacdias/caddy-hugo/setup.go:36 +0xb7\ngithub.com/mholt/caddy.executeDirectives(0xc4200f5860, 0x7ffd634bbf77, 0xe, 0x1223d80, 0x26, 0x26, 0xc4200ed780, 0x1, 0x1, 0x0, ...)\n        /tmp/custombuild_8822_359321299/src/github.com/mholt/caddy/caddy.go:557 +0x597\ngithub.com/mholt/caddy.startWithListenerFds(0x11d18e0, 0xc42003ad80, 0xc4200f5860, 0x0, 0x64, 0x0)\n        /tmp/custombuild_8822_359321299/src/github.com/mholt/caddy/caddy.go:455 +0x39a\ngithub.com/mholt/caddy.Start(0x11d18e0, 0xc42003ad80, 0x11d18e0, 0xc42003ad80, 0x0)\n        /tmp/custombuild_8822_359321299/src/github.com/mholt/caddy/caddy.go:423 +0xff\ngithub.com/mholt/caddy/caddy/caddymain.Run()\n        /tmp/custombuild_8822_359321299/src/github.com/mholt/caddy/caddy/caddymain/run.go:104 +0x26b\nmain.main()\n        /tmp/custombuild_8822_359321299/src/github.com/mholt/caddy/caddy/main.go:13 +0x1b\n. Not so fast. about 1 hour ago! I'll try right now)\n. Yes the crash is done. Now i have logs like this\nIt seems that you don't have 'hugo' on your PATH.\n2016/08/29 16:41:06 It seems that you don't have 'hugo' on your PATH.\nI think my case issue is solved\n. @mholt sure.\nP.S. big respect for such a fancy server like Caddy! \n. ",
    "eternaltyro": "Is flag a literal? Is the following a valid config?\ndomain.tld {\n  root /usr/local/www/domain/public\n  hugo /usr/local/www/domain {\n    flag buildDrafts\n    flag watch\n    flag theme paperback\n  }\n  ...\n}\n. This doesn't work. I don't see caddy running hugo at all. Usually, in the older version, I could see hugo running under watch mode when I do ps aux. What am I doing wrong? \n. It works \"only\" if I add the flags to config.toml under /usr/local/www/domain AND uncomment the hugo block for caddy. The working Caddyfile snippet is:\ndomain.tld {\n  root /usr/local/www/domain/public\n  hugo /usr/local/www/domain \n  ...\n}\n. ",
    "tristan-k": "Never mind! I had to use localhost in the .htaccess ReWriteRule not 127.0.0.1.\n. ",
    "Jamesits": "@hacdias I am not running Caddy inside Docker, though there is Docker service on my machine. As far as I'm concerned this is because caddy has reached some system resource limit, but which limit exactly is not sure. I've checked anything I know but in vain. . This happens randomly. Haven't tried hugo, since it is a production server, usually I just reboot and the problem is gone (temporary). Will try next time. It haven't happened for several days.. For anyone who have a similar problem: try raise max process number from systemd, since systemd ignores other limits (ulimit, sysctl, etc.)\n```ini\n[Service]\n...\nLimitNPROC=256\n...\n```. ",
    "mdaguete": "Hi @hacdias,\nNow it crash on https://github.com/hacdias/caddy-hugo/blob/2e111eab9fef3d4b342a2077b527bf402aa70dd2/assets/public/js/application.js#L118\nRegards.. No problem @hacdias, now it works like a charm!!!\nThanks. Regards.. ",
    "valentinvieriu": "@mdaguete I've just downloaded latest cody now with plugin enabled, and still getting this error. \nCan you tell us when will this fix be a part of the build?. Bummer! This is a little bit bad, because right now the admin interface is quite pointless. You need to restart caddy to see the changes.\nI've tried with the watch option from HUGO, but that didn't worked out. The files are not picked up by hugo.. @hacdias I have found an older build, that didn't had this bug in.\nCan you please give an estimation when you think this will be added to the build?. @hacdias there was a new release and the fix it's not in. ( or at least the bug it's still happening )\n. @hacdias no problem. I'm still playing with the setup of the system. The ability to save and rebuild the website it's not crucial right now, but will be in 1 month. I'll wait for the official release I just wanted to report the situation. Would be great to have quicker updates when comes to plugins.\nThank you . ",
    "vanlong441": "@hacdias thank you but it keeps spinning and not actually creates any file.\nWhat I did:\n\nSuccessfully run caddy with the example Caddyfile.\nSuccessfully open the admin interface. I can see the Add button there but:\na. I can only create a new file in the root folder (where I open up the terminal and run caddy)\nb. When I navigate to the 'content/post' folder, I click the button and fill in my-new-post.md. After that it keeps spinning and no file is created.\nc. I can create a new file in 'content/post' if I type in 'content/post/my-new-post.md' using the button in root folder. But the file does not include any archtypes that go with the theme I clone. . @hacdias no it just outputs the same th\u00edng that running hugo alone does. \n\nConsole in Developer Tools gives this:\napplication.js:43 Uncaught ReferenceError: token is not defined(\u2026)document.getElementById.addEventListener.event @ application.js:43. ",
    "ndarilek": "Thanks, sounds great! The only point I'd make is that there likely won't \nbe a Publish option for Sandstorm since the site is published on save, \nso as long as I can disable the Publish button/functionality then we're \ngood.\n. Oh, I guess I could do that, I wasn't sure if this plugin offered any \nfunctionality in addition to that. Perhaps I should file this issue \nagainst the filemanager?\n. Sounds good. Thanks!\n. Thanks, my apologies, finally getting a look at this after the holidays.\nShould this appear in the filemanager plugin as downloaded from the Caddy customizable download page? If so, then I'll try to integrate it into my Sandstorm package.. ",
    "AstonDavies": "Hi @hacdias \nI have tried with quotes and also with extra parameters after the path. All results are the same.\nI have had a look in the source and it's may be because line 130 should check >= rather than just >\n```\n            case \"flag\":\n                if !c.NextArg() {\n                    return cfg, &filemanager.FileManager{}, c.ArgErr()\n                }\n            values := strings.Split(c.Val(), \" \")\n\n            if len(values) == 0 {\n                return cfg, fm, errors.New(\"Not enough arguments for 'flag' option.\")\n            }\n\n            value := \"true\"\n\n            if len(values) > 1 {\n                value = values[1]\n            }\n\n            cfg.Args = append(cfg.Args, \"--\"+values[0]+\"=\"+value)\n\n```\nI'm not sure as I don't have it setup to compile from source, but I could get organised and try it if that would help.\nThanks\n. Here it is:\n```\nSectionPagesMenu = \"main\"\nbaseurl = \"http://dev.astondavies.co.uk/simonchurch/\"\ncontent = \"\"\nlanguageCode = \"en-gb\"\npublishDir = \"/www/mmfc/public\"\ntitle = \"Simon Church Electrical Contractors, Wiltshire and the South West\"\n[menu]\n[[menu.main]]\n    identifier = \"partp\"\n    name = \"Part P\"\n    url = \"/partp/\"\n    weight = 80.0\n[[menu.main]]\n    identifier = \"buildingprojects\"\n    name = \"Building Projects\"\n    url = \"/buildingprojects/\"\n    weight = 70.0\n```. I ran it locally and got this from Caddy:\n14/Jan/2017:14:25:51 +0000 [PANIC /admin/webdav/config.toml] /home/jeremy/Source/gocode/src/github.com/pelletier/go-toml/tomltree_conversions.go:90 - unsupported value type map[string]interface {}: map[weight:80 identifier:partp name:Part P url:/partp/]\nThis is when trying to save the config.toml file. Ok @hacdias I will close this here and create a new issue in filemanager.. Hi\nNo worries. I have a few other issues with publishing but this may all be related to the paths here so I will await an update and see if they go away. Unless, of course, you would like to know about them now.. The global settings are:\n\n. Yes _index.md in the content folder. Hi @hacdias, yes that has fixed the issues. Many thanks.\nOn 28 July 2017 at 10:31, Henrique Dias notifications@github.com wrote:\n\nDeployed @AstonDavies https://github.com/astondavies! Please check if\nthe error persists, please \ud83d\ude04\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/filemanager/issues/161#issuecomment-318606905,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AXK9H2j_gwCAs7zXFAeAK8sYfD7PqMW4ks5sSaqGgaJpZM4OlMNN\n.\n\n\n-- \nJeremy Davies\n+44(0)7957 743 743 | jeremy@astondavies.co.uk | www.astondavies.co.uk |\nlinkedin https://uk.linkedin.com/in/jeremyricharddavies\nAston Davies Limited\nAston Cottage, 33 High Street\nGreat Cheverell\nDevizes\nSN10 5TH\nRegistered in England No. 09408731\n. Ah I see, the command is not blocked it is a blocking command!\nIt does not work though. I get:\n\nI assume that is a hugo exit code.\nIf I run that command on the server it works:\ndeploy@aston:/hugo/simonchurch$ hugo -D -E -F -d /hugo/simonchurch/preview -b https://simonchurch.preview.astondavies.co.uk --canonifyURLs --cleanDestinationDir\nStarted building sites ...\nBuilt site for language en:\n0 draft content\n0 future content\n0 expired content\n0 regular pages created\n14 other pages created\n0 non-page files copied\n0 paginator pages created\n0 tags created\n0 categories created\ntotal in 17 ms. Do you mean the contentDir (-c, --contentDir string) ?. \nWith -c specified as /hugo/simonchurch/content it works:\ndeploy@aston:/hugo/simonchurch$ hugo -c /hugo/simonchurch/content -D -E -F -d /hugo/simonchurch/preview -b https://simonchurch.preview.astondavies.co.uk --canonifyURLs --cleanDestinationDir\nStarted building sites ...\nBuilt site for language en:\n0 draft content\n0 future content\n0 expired content\n0 regular pages created\n14 other pages created\n0 non-page files copied\n0 paginator pages created\n0 tags created\n0 categories created\ntotal in 17 ms\nMissing the leading slash makes it fail:\ndeploy@aston:/hugo/simonchurch$ hugo -c hugo/simonchurch/content -D -E -F -d /hugo/simonchurch/preview -b https://simonchurch.preview.astondavies.co.uk --canonifyURLs --cleanDestinationDir\nStarted building sites ...\nError: Error building site: No source directory found, expecting to find it at /hugo/simonchurch/hugo/simonchurch/content. It all works if I specify the source (-s , --source) as /hugo/simonchurch, I can then use relative paths in the command:\nhugo -s /hugo/simonchurch -D -E -F -d preview -b https://simonchurch.preview.astondavies.co.uk --canonifyURLs --cleanDestinationDir\nI think setting a working directory as the Hugo root would be a good convention. Using command options you could then override this for specific users or even have a parameter (like the file variable) that is the current users scope which could be substituted as required.\nThanks for all your great efforts. I really like the new interface and user login features.. DOH! apologies\nOn 27 Jul 2017 16:47, \"Henrique Dias\" notifications@github.com wrote:\n\nI mentioned this: #161 (comment)\nhttps://github.com/hacdias/filemanager/issues/161#issuecomment-318354035\n\ud83d\ude04\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/filemanager/issues/164#issuecomment-318402785,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AXK9H2ld8aJsqF36MNIY7Ls9IeZg3ZrTks5sSLEMgaJpZM4OleDE\n.\n. It's version 54.0\n\nBuild identifier: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:54.0)\nGecko/20100101 Firefox/54.0\nJeremy Davies\n+44(0)7957 743 743 | jeremy@astondavies.co.uk | www.astondavies.co.uk |\nlinkedin https://uk.linkedin.com/in/jeremyricharddavies\nAston Davies Limited\nAston Cottage, 33 High Street\nGreat Cheverell\nDevizes\nSN10 5TH\nRegistered in England No. 09408731\nOn 28 July 2017 at 18:54, Henrique Dias notifications@github.com wrote:\n\nWhich is the version of FF? I'm not getting that error here.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/filemanager/issues/170#issuecomment-318721099,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AXK9H1QtnF16sUZMkr73OMag6KsYwsunks5sSiBsgaJpZM4OmxS_\n.\n. I have tried another computer (my laptop with FF and linux mint) and I get\nthe same error.\n\nI can create a user on my server for you to test if you like? I will send\nyou the credentials directly to your e-mail.\nJeremy Davies\n+44(0)7957 743 743 | jeremy@astondavies.co.uk | www.astondavies.co.uk |\nlinkedin https://uk.linkedin.com/in/jeremyricharddavies\nAston Davies Limited\nAston Cottage, 33 High Street\nGreat Cheverell\nDevizes\nSN10 5TH\nRegistered in England No. 09408731\nOn 29 July 2017 at 11:44, Henrique Dias notifications@github.com wrote:\n\nI'm also using FF 54.0 but I don't receive any error at all. Could you try\non another computer with FF, please? Or eventually try to clear the cache\n(although I don't think it would solve, but we never know).\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/filemanager/issues/170#issuecomment-318820272,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AXK9H4DBRKISx14zovnfoaQLm9vZX3hOks5sSw0hgaJpZM4OmxS_\n.\n. I downloaded it yesterday\n\nJeremy Davies\n+44(0)7957 743 743 | jeremy@astondavies.co.uk | www.astondavies.co.uk |\nlinkedin https://uk.linkedin.com/in/jeremyricharddavies\nAston Davies Limited\nAston Cottage, 33 High Street\nGreat Cheverell\nDevizes\nSN10 5TH\nRegistered in England No. 09408731\nOn 29 July 2017 at 13:42, Henrique Dias notifications@github.com wrote:\n\nStrange... I get the same error on FF here. But when I download from\ncaddyserver.com I don't get it. Have you built it manually or downloaded\nit?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/filemanager/issues/170#issuecomment-318828629,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AXK9H6pudLuPZnXOdnGxorCewKWmESVAks5sSyingaJpZM4OmxS_\n.\n. Yes, without gzip it works. Is that a FF issue?\n\nJeremy Davies\n+44(0)7957 743 743 | jeremy@astondavies.co.uk | www.astondavies.co.uk |\nlinkedin https://uk.linkedin.com/in/jeremyricharddavies\nAston Davies Limited\nAston Cottage, 33 High Street\nGreat Cheverell\nDevizes\nSN10 5TH\nRegistered in England No. 09408731\nOn 29 July 2017 at 13:56, Henrique Dias notifications@github.com wrote:\n\n@AstonDavies https://github.com/astondavies, could you please try\ndisabling the GZIP and see if it works?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/filemanager/issues/170#issuecomment-318829420,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AXK9H9Bud_2z1-c6iYGIB11xONPgNOb4ks5sSyv0gaJpZM4OmxS_\n.\n. Slight issue when installing:\n\n```text\ncurl https://getcaddy.com | bash -s http.hugo\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100  4812  100  4812    0     0   7517      0 --:--:-- --:--:-- --:--:--  7518\nDownloading Caddy for linux/amd64...\nhttps://caddyserver.com/download/linux/amd64?plugins=http.hugo\nExtracting...\ntar: caddy: time stamp 2017-07-29 17:38:15 is 53.083252226 s in the future\nBacking up /usr/local/bin/caddy to /usr/local/bin/caddy_old\n(Password may be required.)\nPutting caddy in /usr/local/bin (may require password)\npanic: could not locate box \"./assets/\"\ngoroutine 1 [running]:\ngithub.com/GeertJohan/go%2erice.MustFindBox(0xd02f5e, 0x9, 0xc4200f14f0)\n    /gopath/src/github.com/GeertJohan/go.rice/box.go:110 +0x94\ngithub.com/hacdias/filemanager/plugins.init.1()\n    src/github.com/hacdias/filemanager/plugins/hugo.go:21 +0x48\ngithub.com/hacdias/filemanager/plugins.init()\n    src/github.com/hacdias/filemanager/plugins/utils.go:20 +0xfd\ngithub.com/hacdias/filemanager/caddy/hugo.init()\n    src/github.com/hacdias/filemanager/caddy/hugo/setup.go:169 +0x70\ngithub.com/mholt/caddy/caddy/caddymain.init()\n    src/github.com/mholt/caddy/caddy/caddymain/run.go:237 +0x7a\nmain.init()\n    src/github.com/mholt/caddy/caddy/main.go:15 +0x44\nAborted, error 2 in command: $caddy_bin --version\n```. I just downloaded it from caddyserver.com, extracted from the zip and ran it in my local home:\n```text\njeremy@zoostorm ~ $ ls -la caddy \n-rwxr-xr-x 1 jeremy jeremy 27258339 Jul 29 17:38 caddy\njeremy@zoostorm ~ $ ./caddy --version\npanic: could not locate box \"./assets/\"\ngoroutine 1 [running]:\ngithub.com/GeertJohan/go%2erice.MustFindBox(0xd02f5e, 0x9, 0xc420137220)\n    /gopath/src/github.com/GeertJohan/go.rice/box.go:110 +0x94\ngithub.com/hacdias/filemanager/plugins.init.1()\n    src/github.com/hacdias/filemanager/plugins/hugo.go:21 +0x48\ngithub.com/hacdias/filemanager/plugins.init()\n    src/github.com/hacdias/filemanager/plugins/utils.go:20 +0xfd\ngithub.com/hacdias/filemanager/caddy/hugo.init()\n    src/github.com/hacdias/filemanager/caddy/hugo/setup.go:169 +0x70\ngithub.com/mholt/caddy/caddy/caddymain.init()\n    src/github.com/mholt/caddy/caddy/caddymain/run.go:237 +0x7a\nmain.init()\n    src/github.com/mholt/caddy/caddy/main.go:15 +0x44\njeremy@zoostorm ~ $ \n```. Sorry. Caddy won't start now...\n```text\ncaddy\nActivating privacy features... done.\npanic: hugo plugin is already registred\ngoroutine 1 [running]:\ngithub.com/hacdias/filemanager.RegisterPlugin(0xcfe00b, 0x4, 0xd7ecde, 0x1a80, 0xc420390180, 0x2, 0x2, 0xc4203901c0, 0x1, 0x1, ...)\n    src/github.com/hacdias/filemanager/filemanager.go:195 +0x1ae\ngithub.com/hacdias/filemanager/plugins.RegisterHugo()\n    src/github.com/hacdias/filemanager/plugins/hugo.go:35 +0x20e\ngithub.com/hacdias/filemanager/caddy/hugo.setup(0xc42042ee10, 0x4, 0xcfe00b)\n    src/github.com/hacdias/filemanager/caddy/hugo/setup.go:21 +0x29\ngithub.com/mholt/caddy.executeDirectives(0xc420248c30, 0xd030bd, 0x9, 0x16c1bc0, 0x3c, 0x3c, 0xc4200e3800, 0xe, 0x10, 0x0, ...)\n    src/github.com/mholt/caddy/caddy.go:583 +0x570\ngithub.com/mholt/caddy.ValidateAndExecuteDirectives(0x1654520, 0xc42028e000, 0xc420248c30, 0x0, 0x1654520, 0xc42028e000)\n    src/github.com/mholt/caddy/caddy.go:533 +0x3bf\ngithub.com/mholt/caddy.startWithListenerFds(0x1654520, 0xc42028e000, 0xc420248c30, 0x0, 0x0, 0x0)\n    src/github.com/mholt/caddy/caddy.go:437 +0x6b\ngithub.com/mholt/caddy.Start(0x1654520, 0xc42028e000, 0x1654520, 0xc42028e000, 0x0)\n    src/github.com/mholt/caddy/caddy.go:429 +0xe0\ngithub.com/mholt/caddy/caddy/caddymain.Run()\n    src/github.com/mholt/caddy/caddy/caddymain/run.go:117 +0x3b7\nmain.main()\n    src/github.com/mholt/caddy/caddy/main.go:13 +0x27\n```. :smile: All working now. FF can login with gzip enabled. :thumbsup:. ",
    "nevf": "@hacdias Thanks, they look good and certainly help to get a better idea of caddy-hugo's capabilities. You should think about writing a article all about it and publish that on Medium. Good exposure.. ",
    "Fastidious": "@hacdias available as in, possible with Jekyll?!. @hacdias could you expand on the basic usage? If I have:\n```\nquark.business {\n        root /var/www/html\n    log /var/log/caddy/quark.business.log {\n            rotate_size 1\n            rotate_age  7\n            rotate_keep 1\n    }\n    header / {\n            Strict-Transport-Security \"max-age=31536000\"\n            X-XSS-Protection \"1; mode=block\"\n            X-Content-Type-Options \"nosniff\"\n            X-Frame-Options \"DENY\"\n            -Server\n    }\n    tls {\n            key_type rsa4096\n            protocols tls1.2\n            must_staple\n    }\n\n}\n```\nAnd my jekyll site is at /var/local/jekyll/quark.business/, how would I go to incorporate it?. @hacdias did that. I can go to https://quark.business/admin and see a login screen. Now what? Sorry, totally lost. :-). I am going to be posting on the Caddy plugin community (https://caddy.community/) about getting this to run. I can login, but I can\u2019t see a way to publish the site, etc. More on https://caddy.community/c/plugins later today. :-). ",
    "chouzar": "Got it, will find a workaround probably with an extra tool :)\nBut just being curious, Is there a specific intended purpose for the before/after publish commands? It seems that just one command might be limiting. Probably a build script would be more suitable for these parameters?. Thanks @hacdias for the tip!\nUsing on my caddy file:\nafter_publish bash -c 'git add . && git commit -m \"generic comment\"'\nWhen building my terminal spits:\nerror: pathspec 'content' did not match any file(s) known to git.\nBut with no spaces in in comments the git command works just fine:\nafter_publish bash -c 'git add . && git commit -m \"generic-comment\"'\nFor what I wanted to do this will do just fine :)\nFor a more involved workflow I will try to find a more generic solution, as necessity arrives.\nNote that other functions have no issues with white space, for example:\nafter_publish bash -c 'echo \"spit out some text\"' No error here. ",
    "berglh": "Picture thumbnails would be ace :+1: :100: . These guys seem to have had a similar problem, looks like they've found the least worst approaching using cgo for packaging https://github.com/livepeer/lpms/issues/47. ",
    "atecey": "\ud83d\udc4dwould like to see this feature too. ",
    "arteta22000": "very practical, that would be great.. The easiest (or lightest) for you ?\n\"infinite scrolling\" is probably more modern ;). If someone could work on that :thumbsup: . it becomes unusable with a lot of files. I'll need to change tool :(  without this option, it's unusable.. Debian 8, amd64.. Ok, thanks, I'll check at lunch ;)\nCan you control that the pagination is ok when we do a search?. Everything is working smoothly for now, much faster ;)\nI ping you, if we report bugs. Thanks !!\nYou're pushing this in release ?. I vote for filebrowser . Name: filebrowser\nSlug: filebrowser. ",
    "palitu": "Yep - i would love picture thumbnails.  Even better if they would be cached.. Also , resize the image prior to displaying it in screen.\nhell - whilst i am at it, i stumbled upon filebrowser whilst looking for a way to display my photos over the net, with the system just publishing them as they sit on the filesystem.... ",
    "max3163": "Any milestone for this great feature ? . ",
    "Equim-chan": "ffmpeg is good at this stuff, but of course it requires ffmpeg to be installed in the host. Maybe we can integrate this feature if ffmpeg is detected on run time. Any idea?. +1\nIn my case (linux x64, standalone filemanager built via go get at 7ee721a), new created folder gets drw-rw-r--(664).\nWithout rwx permission, the folder is not actually \"writable\", and can't even be accessed by cd.\n\nRef: https://unix.stackexchange.com/questions/21251/execute-vs-read-bit-how-do-directory-permissions-in-linux-work\nHopefully it helps.. Hmm, the default permissions set for folders created by mkdir on my machine is 776. This should be fine.. Use E:\\\\a instead of E:\\a.. \u8bf7\u95ee\u4f60\u7528\u7684\u662f\u4ec0\u4e48\u7248\u672c\u7684 Caddy\uff1f\u540e\u7eed\u7684 filemanager \u7248\u672c\u628a\u8bbe\u7f6e\u7684\u7b7e\u540d\u6539\u4e86\u3002\u4f60\u8fd9\u4e2a\u914d\u7f6e\u7684\u662f\u65e7\u5f0f\u7684\u3002\n\u5efa\u8bae\u53c2\u8003\u4e00\u4e0b\u6700\u65b0\u7684\u6587\u6863 https://caddyserver.com/docs/http.filemanager. try this\n:8888 {\n    root E:\\\\bt\n    timeouts none\n    gzip\n    filemanager / E:\\\\bt {\n        database C:\\\\Users\\\\lenovo.caddy\\\\filemanager\\\\7dfe9c406b4ce2c91c8b2f43828dac72.db\n    }\n}. Run caddy -validate to check the syntax of your config file.. Please ensure that caddy is in your $PATH, whilest Caddyfile under your cwd.\nPlus, this is not actually an issue of the current project. Move along to https://caddy.community/. Just a few more questions.\nbuttons.next and buttons.prev: do they mean \"next page\" & \"prev page\"?\nfiles.body: what is it?. I would like to do some edit.\n```diff\ndiff --git a/a b/b\nindex f25b97b..f02931f 100644\n--- a/a\n+++ b/b\n@@ -57,7 +57,8 @@ select,\n#search.active #input>.action i,\n #search.active input,\n-#search.active #input {\n+#search.active #input,\n+#login input[type=password], #login input[type=text] {\n   background-color: #303030;\n   color: rgba(255, 255, 255, 0.7);\n }\n@@ -67,11 +68,15 @@ select,\n   color: rgba(255, 255, 255, 0.7);\n }\n-#search #result .boxes {\n+#search #result .boxes,\n+.card {\n   background-color: #424242;\n   padding: 0 15px 15px 15px;\n }\n-#search #result .boxes h3 {\n+#search #result .boxes h3,\n+.card h2,\n+.card h3,\n+.card p {\n   color: rgba(255, 255, 255, 0.7);\n-}\n\\ No newline at end of file\n+}\n``. It should work that way, asvalue.localeis beforenavigator.language`.\nhttps://github.com/Equim-chan/filemanager/blob/0271b914a422dd6dbf7cbc843a05f0f45ec585ca/assets/src/store/mutations.js#L30\nI also tested. After the user set his own language, the auto detection will be overrided.\nThe problem is the code isn't so DRY. The same switch case repeated twice in the code.\n~~switch (true) style comes from go~~. @Platway Good point. I think we may try something like http://outdatedbrowser.com.. @hacdias I've done some investigation and realized that it is exactly how mkdir expects to work under *nix systems. A bare mkdir call is limited by umask. With a umask value of 0022, new directories will be created with permissions 0755 at most. New files will have permissions 0644 at most. \nThere are several ways to fix it\n Call syscall.Umask on init, and change all mkdir's permission into 0777. The downside is that if filebrowser is running as a plugin then it may cause something bad to the host.\n Call os.Chmod immediately after calling os.Mkdir.\nPlus, I think it should be an option for users to choose desired fmask and dmask value.\nRef: https://github.com/golang/go/issues/15210. I think the option should leave to the users, while 0755 can be a default value (for dmask). \nI myself have met a scene to customize the permission. Since the user/group running filebrowser is different from my own user/group, I add my personal user to the group, expecting files/directories created by filebrowser to be writable from the group.\nAlso it's better to separate fmask and dmask. The default fmask value can be 0644.\nPlus, os.Chmod is better than syscall.Umask since the latter one is platform specific and is likely to cause more problems.. If I am able to touch a new file, I must at least have -wx permission on the current dir, then I can of course chmod the file. Am I wrong?. Hmm, I think the change should be made in github.com/hacdias/fileutils instead.\nAlso should we really prefer umask over chmod or?. Okay I'll try, but just a bit busy at the moment.. I think now that there are so many ways to do the authorization, maybe we can make an interface for this:\ngo\ntype Auther interface {\n    Auth(http.Header) (authorizedUser *User, err error)\n}\nSo others can write plugins very easily as well.. Is your server behind Cloudflare? Cloudflare has a maximum upload size limit.. What is your nginx config?. By the way, I'm improving the download handler at the moment. Another PR may drop soon.. Haha, actually that fix is exactly what makes a new problem.. I'm trying to adopt 6 bytes (8 in base64) version of share link, while keeping forward compatibility.\nCurrent version of 64 bytes hex string is indeed too long (even YouTube only uses 11 bytes base64-like string).. Sure, but I may try that after I finish my exams, just a few days to go.. https://github.com/hacdias/filemanager/blob/1f946bd94e807679575812206e62425905434036/http/auth.go#L120-L133\nCan we just put the ID field to the token and drop other fields of u here? Since when the token is validated we only used the ID to retrieve.\nhttps://github.com/hacdias/filemanager/blob/1f946bd94e807679575812206e62425905434036/http/auth.go#L192\nNow I just wonder if the frontend has used the token to retrieve user data. (I'm not familiar with the frontend code). Well, that's a bit of an anti-pattern though, since tokens are meant to be used for authorization only.. I can't reproduce this under Chrome for Android 63.0.3239.111. Maybe it's just fine to update your browser?. Yes, that's way it works.. Okay.. You're welcome! It's exactly because this tool is so cool that I just want to make it cooler. :smile:. Wow! I was just about to propose this!! Yeah just now when I opened the issue page! :smile:\nI'm making more changes at the moment, but I can hold on until the organisation is possibly established.\nThere will be a few things to do if an organisation is to be established:\n [ ] Change import paths in Go source files\n [ ] Update documents for all go get cases\n [ ] Migrate the project's main page to its new home\n [ ] Re-submit Caddy plugin. Most of my changes are trivial, so I don't prefer them to be in one single PR, nor merged into one single commit. So I think I'd wait.. I'm also thinking of it at the moment.... If we adopt a good organisation name, do we need to change the project title as well?. * file-manager? simply adding a bar\n filemand? file manager daemon, sounds classic\n easyfile? clear but not somewhat off-topic\n efile? short but not clear\n teamfile? a bit random\n fileer? almost meaningless, but short\n filebrowser? this matches the original name more\n gophiles? gopher and files, I like it\n gophila? a more proper name for an organisation, go with phila (love)\n* gofile? neat and clear name too\nI'm not really good at giving names though. :smile:. May I ask for access permissions on the repos? I should be able to assign some issues.. @malikpiara the name firefly and cloudify are already occupied.. @hacdias Let's move on?. I see the changes are on going right now. Just a suggestion that can we change the title of https://github.com/filebrowser/vue? Maybe filebrowser/frontend or something.. Open devtools, switch to network and find any failed ones?. Sorry, but you might have to build it on your own. linux-arm-filebrowser.tar.gz is targeted to armv6.. Golang supports cross compile, so you don't have to compile it on the target machine.\n\nDownload and install Go.\n$ go get -d github.com/filebrowser/filebrowser/cmd/filebrowser\n$ cd $GOPATH/src/github.com/filebrowser/filebrowser/cmd/filebrowser\n$ env GOOS=linux GOARCH=arm GOARM=5 go build. /cc @hacdias . Confirmed, and requests to changing password also trigger the same bug.. This should have been fixed in 1.5.4, duplicate with https://github.com/filebrowser/filebrowser/issues/359. Please check out the latest version.. /cc @hacdias . filebrowser is using jwt instead of basicauth by default. If you intend to download and authorize with basicauth, try to set noauth in filebrowser and set corresponding basicauth middleware on the downstream.\n\nAccepting jwt and basicauth at the same time may be tricky on the current implementation.. @la0wei Path is /api/download/{related file path to scope}. For example, with scope /srv, to download a file /srv/test/100M.bin, GET /api/download/test/100M.bin.. Hold on, there are some extra works to be done (build, docker, CI).. Done, ready for review.. Do you have proper permission on /var?. I guess it's because of some special files in /var.. The simplest way is go get github.com/filebrowser/filebrowser/cmd/filebrowser (it may take a long time), and then you will have the binary under $GOPATH/bin.. In addition, if progress visualization is implemented, I think pause-able upload can also be implemented passingly.\n/cc @hacdias . Done, and proven to be working.\n\n. Just a bit off-topic though, I don't know whether I should feel happy or sad that we, and many other fellows, have to make so many extra efforts for those who are not yet able to embrace the freedom that they deserve.. I don't really agree. --recaptcha_host recaptcha.net is longer than --alternative-captcha, and requires more parsing that is likely to fail if the user passes an invalid recaptcha host. The possible valid values are only www.google.com and recaptcha.net, so we can just use a boolean. recaptcha.net is also not very known.. ping @hacdias, I think it's ready to release a new version now.. Let's discuss it in https://github.com/filebrowser/filebrowser/issues/365.. ### Using only one variable file\n\nHaving a single \"entry point\" to configure filebrowser would be handier.\n\nThe db file is more than just configs (as hacdias mentioned, the share links don't belong to config). I don't really agree that we should merge the db into config file or vice versa. Plus, config file is not always writable (e.g. when used in Caddy as a plugin).\nUsing two (current status) but they can be merged\nThough I don't really agree that db should be handled by the user by hand, we can still make an extra feature to dump/merge the db. \n\nMultiple processes trying to edit the file\n\nThe instance locks the db file, so it's unlikely that we can achieve writing online from external side. If we need to do that online, this feature should be embed in the application itself.\n\nIf the user wanted to set the password via the config file they would need to encrypt it with the right algorithm (we won't store them in plain text!)\n\nIt's not allowed by design. Force overriding the password is a fault responsible to the user.\n\nWhere would we put the share links?\n\nSame as above.\nNotes\nThe current design of the config file is a bit confusing. Basically like --allow-commands, they are meant for the default value for new users but the words doesn't really tell and it looks like it applies globally.. > When Filebrowser would start for the first time, you could interactively prompt the administrator to enter the different \"key\" parameters (baseURL, port, address...)\nI think it's a good idea, pretty similar to the installation of MediaWiki, PHPBB, Jenkins, gogs, etc..\nWe can make an import/export feature that helps batch works.. \u8fd9\u4e2a\u8bbe\u8ba1\u5df2\u7ecf\u5b58\u5728\u4e8e\u4ee3\u7801\u4e2d\u4e86\uff0c\u7136\u800c\u597d\u50cf\u540e\u7aef\u6ca1\u6709\u51c6\u786e\u5730\u8bc6\u522b\u597d\u6587\u4ef6\u7c7b\u578b\uff0c\u6211\u68c0\u67e5\u4e00\u4e0b\u539f\u56e0\uff0c\u611f\u8c22\u53cd\u9988\u3002\uff08\u4e0b\u6b21\u8bf7\u5199\u82f1\u6587\u8fd9\u6837\u66f4\u591a\u7684\u4eba\u80fd\u770b\u61c2\uff09. \u5df2\u67e5\u660e\u539f\u56e0\uff0c\u4e0d\u662f\u6211\u4eec\u8fd9\u7684\u95ee\u9898\uff0c\u800c\u662f\u8fd0\u884c\u5b83\u7684\u7cfb\u7edf\u7f3a\u5c11\u4e00\u4e2a\u6bd4\u8f83\u5168\u7684 MIME \u8868(\u89c1mime.TypeByExtension)\uff0c\u5b89\u88c5 mailcap \u5e94\u8be5\u80fd\u89e3\u51b3\u95ee\u9898\u3002. For Ubuntu install mime-support instead.. LGTM. Try adding proxy_set_header Host $host;?. For a further goal, I think a full featured HTTP API can be implemented to help.. This shouldn't happen, since we already specified a special constraint in Gopkg.toml.\nhttps://github.com/filebrowser/filebrowser/blob/281339337d007dc884c49e4f877e2f53e09dffd7/Gopkg.toml#L29-L34\nWhat's your final Gopkg.toml for Caddy?. Try changing\n[[constraint]]\n  name = \"github.com/mholt/archiver\"\n  version = \"2.0.0\"\ninto the revision one I've shown above?. #300?. -d is for CLI. You need to specify that path in Caddyfile.. > You need to specify that path in Caddyfile.\nYou should read https://filebrowser.github.io/caddy/ instead.. Everyone can make share links. However it's not possible to limit who cannot make share links at the moment.. Thanks.. It's mainly about your client (browser). filebrowser just embed the video in a <video> HTML tag, and does nothing with video decode.. While I do agree the use of yarn is a great idea, I have several concerns about it.\n\nMay the new Dockerfile breaks the automatic build?\n\nIs it a better idea to make frontend as a git submodule? Like, in this repo we make the frontend as a submodule locked on some release tag, and when developing we pull the submodule to its HEAD? When we are going to tag a release, we also tag the frontend and pull the submodule to the tag.\n. I can translate. @hacdias \n\n\nCan we add a list of transmissions? Because if the page is refresh, the progress of uploading of some large files will be interrupted.\n\nCan we add a display of disk quota?\nCan we make a filter applied for the files/folders to list? This is to prevent too many system files/folders to be shown and possible misoperation of delete/modify.\nCan we add an option that allows open a folder with just one click?\nIf it supports unzip or view MS office files online, it can be more perfect.\nCustom themes feature looks great, but I don't know how to use. I think there should be some instructions.. You can try setting the custom CSS.. Yes, it's welcome!. I prefer the right one, but I think the blue can be a bit brighter maybe? (not really good at visual design). nohup(1). This is a good idea, though not all types of files are renderable.. Duplicate with #261. It's a new tool and already embedded into go1.11 toolchain. It can parse Gopkg.lock (and it's how this commit comes from). The biggest benefit, in my opinion, is that you don't need to put it under GOPATH any more. I've seen there are too many newcomers stumbled on GOPATH when they try to build something in Go.\n. Might need a db mitigation, since the structure has been changed?. > In other news, the BoltDB DB is no longer active and I thought we could move to something more straightforward, with more background and with more tooling available such as SQLite.\n\nBoltDB is fine. It's not active because it's stable enough for now.\n. oh, my bad. Can we make some deprecated flags? For example when user tries to use the old --allow-new flag, we give a hint that --allow-new is deprecated, use --defaults.allowNew instead.. ",
    "YasserDRIF": "Any updates on the feature? . Any idea or tuto on how to do that ... can you also open a pull request so that it gets added to the main code . What i'm asking about is how to make everything into an executable file to use on windows ... just like the releases published earlier\n@hacdias  any suggestions ?. a workaround to get this working is to make two instance of the filebrowser.exe with different config files running on different ports... one with AUTH and edit enabled (your admin dashboard) and the other disabled (guest mode). ",
    "vitaliy-kuzmich": "here it is : https://github.com/vitaliy-kuzmich/filebrowser , just need to integrate with windows.... See readme, it is modified. Just install 3 dependencies that mentioned, all the other steps as described in original filebrowser tutor. Basically I just call sh script(it is the fastest way to generate thumbnails, other wrappers for golang are very slow) from program, its okay if that dependencies would be missed, there will be bash errors that deps would not be found. Also put '-v' path to the previews, make sure it is not in the same folder as user scope. Also it will not work in windows at the moment, because of bash script call. IN order to support windows, there should be bat file,  with same logic(see convert.sh), and need to modify backend during script call, in order to replace /bin/sh to the windows shell(I do not know how to do that). @CircuitCoder  hmm, I think it is related to the github subproject issue, as you can see when you enter my fork(https://github.com/vitaliy-kuzmich/filebrowser), frontend aim to the https://github.com/vitaliy-kuzmich/frontend/tree/3ae9e518a30ec59e307f60f0225b8eb04433be08 but should : https://github.com/vitaliy-kuzmich/frontend I do not know how to fix it :( If issue on your side different, please provide any error messages. Maybe try to cut existing frontend, and pull directly from my fork ? When I setup working environment, I used original filebrowser repos, after I replaced remote origin to my fork URL, maybe I did it in wrong way ? Thank you.. @CircuitCoder  git pull origin master\n```\nFrom https://github.com/vitaliy-kuzmich/frontend\n * branch            master     -> FETCH_HEAD\nAlready up to date.\n```. @CircuitCoder  issue with github tree solved. Please try to pull.... @CircuitCoder https://github.com/filebrowser/frontend/pull/42#issuecomment-442281169 is it possible to do it in VUE ? Because I know it is possible in angular. Would it impact on performance ? Thanks.. @CircuitCoder  got it, thanks. I'd like to notice, that you do not need database at all. Why not just keep it simple ? Because I tried nextcloud and had horrible experience. So all that is needed is just filebrowser, why not to use srandard unix/linux users and theirs home folders ?. > I use local vendor directory solve this issue.\n\ncd $GOPATH/src/github.com/filebrowser/filebrowser\nmkdir -p vendor/github.com/gohugoio\ncd vendor/github.com/gohugoio\ngit clone https://github.com/gohugoio/hugo -b release-0.49.2\nAfter that, everything is OK. Maybe the better way is to use dep for dependency management.\n\n/lib/http/download.go:54:17: type archiver.Zip is not an expression\n../lib/http/download.go:56:17: type archiver.Tar is not an expression\n../lib/http/download.go:58:17: type archiver.TarGz is not an expression\n../lib/http/download.go:60:17: type archiver.TarBz2 is not an expression\n../lib/http/download.go:62:30: undefined: archiver.TarXZ\n../lib/http/download.go:75:11: ar.Write undefined (type archiver.Archiver has no field or method Write)\n. https://github.com/filebrowser/filebrowser/issues/554. done in my fork.. huh?. @hacdias Thanks for ping.\nDoes it costs to do so much effort into DB management(example mysql workbench) from console ? Are there workbenches for bolt DB ? Maybe replace with SQLlite and use some UI ? Here it is for bolt: https://github.com/evnix/boltdbweb but I did not test it...\nJust thinking to implement file sharing, and put it as separate menu item, next to files listing. Idea is to share files for all/selected users by using some access matrix in order to view it like usual files, but not only download. I am not sure, but I plan to use symbolic links, just create shared folder. In that folder each user would have own folder that named by user's name. After just symlink files to the user's folder, and anyone would see it, also deny/forbid modify access for anyone in that folder. Do you think would it works in windows ? I mean there is users, but why do you need to support windows then ? When filebrowser should works on server side, basically its a cloud. Fix me if I am wrong. Or do you want to make cloud and win support at the same time ?. @hacdias I see now. Well, as I know, at this moment of time, it is not possible to view shared resource in the browser, but only download it. So I want to make 'view' feature of the shared resource, in addition to download. But it will be separated from shared link, because it is different, shared links are outside from DMZ(authenticated/authorized user), but shared folder inside. So then in case links access, you can use VPN for internal access, and bypass links URL through nginx(for example) directly to the public access. Matrix access that I mentioned, are about authorized users, so they could give/deny access from the specific user(groups later, maybe) to the specific folder, basically it is implemented in linux/win/osx, but I thinks it is better to have it in DB.. > I think most users don't even know about the source here, which is a problem... I have no actual opinion on this, but I think the preview is something people probably don't want to lose!\nhey, I tried, and image preview did not work, what kind of preview are you talking about ? \nUPD: got it, you are talking about view, because preview, is something that has cut version of original file, or not full file view.. > Well, I think this thing is called \"filebrowser\", not \"static site generator\". So... I didn't even know filebrowser can do that - and as far as I read the comments in this ticket, the feature also seems a bit hacky, so I guess it's best to just drop it.\noh thats the problem, I also noticed that, there is no focus on which way  filebrowser are going, it looks like a cloud tool, but at the same time it is not. And if considering it as a non cloud, there is no need to have image previews generator, nor user's database, no database at all... And in case cloud, there should be users, also roles, and it should work like a cloud, otherwise it loses point. Look, I did fork( https://github.com/vitaliy-kuzmich/filebrowser), and I am going to modify the source, in order to be cloud analog like nextcloud/owncloud. In all other cases, I use ssh, ftp. There are clients on android as well in order to send/receive files.. ",
    "CircuitCoder": "@vitaliy-kuzmich I've tried our your fork, the thumbnails got generated successfully for images, and I'm still debugging with videos. But the thumbnails doesn't show up in the frontend. Is that expected, or is there something wrong with my setup?\nI also saw that you need a maintainer for the Vue frontend implementation. I would really love to help with that.. @vitaliy-kuzmich Oh so I just have to update the submodule. Trying that out.\nI just update the submodule with:\ncd frontend\ngit pull origin master\ncd ..\ngit add .\ngit commit\nThen it points to the latest commit in the upstream repo (210fef).. @vitaliy-kuzmich OK I got it working. Thanks a lot!. @vitaliy-kuzmich I'm not sure. Having a look at the code. But I'm quite sure it's possible.\nPerformance shouldn't be a problem either. I will open a PR when I get it done in your repo and we may have further discussions there.. ",
    "Flameborn": "Thank you very much!\n\nOn 2017. Aug 4., at 17:37, Henrique Dias notifications@github.com wrote:\nJust reviewed the whole HTML code and added the roles and ARIA markup wherever I thought it was needed. I'll close this. If you find something that should be improved, just file an issue or make a PR \ud83d\ude04\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub https://github.com/hacdias/filemanager/issues/131#issuecomment-320280863, or mute the thread https://github.com/notifications/unsubscribe-auth/AA6x8FgQjat2zLIR75FAy_DJD4M-XJI5ks5sUzqugaJpZM4Obak_.\n\n\n. Yes, I cloned the latest version of Caddy from the master branch, imported every middleware in 'run.go' and I get the panic after 'go build'.. Here are the steps I\u2019ve done:\n\n\nClone Caddy from Github.\n\n\nadd all the imports from \u2018plugin.go\u2019 in \u2018run.go\u2019\n\n\nRun go build in the Caddy directory, where build.bash is.\n\n\nHere are my imports, below the comment (// This is where other plugins get plugged in (imported)):\n_ \"blitznote.com/src/caddy.upload\"\n\n_ \"github.com/BTBurke/caddy-jwt\"\n\n_ \"github.com/SchumacherFM/mailout\"\n\n_ \"github.com/Xumeiquer/nobots\"\n\n_ \"github.com/abiosoft/caddy-git\"\n\n_ \"github.com/captncraig/caddy-realip\"\n\n_ \"github.com/captncraig/cors/caddy\"\n\n_ \"github.com/casbin/caddy-authz\"\n\n_ \"github.com/coopernurse/caddy-awslambda\"\n\n_ \"github.com/echocat/caddy-filter\"\n\n_ \"github.com/epicagency/caddy-expires\"\n\n_ \"github.com/freman/caddy-reauth\"\n\n_ \"github.com/hacdias/caddy-hugo\"\n\n_ \"github.com/hacdias/caddy-minify\"\n\n_ \"github.com/hacdias/caddy-webdav\"\n\n_ \"github.com/hacdias/filemanager\"\n\n_ \"github.com/jung-kurt/caddy-cgi\"\n\n_ \"github.com/mastercactapus/caddy-proxyprotocol\"\n\n_ \"github.com/miekg/caddy-prometheus\"\n\n_ \"github.com/namsral/multipass/caddy\"\n\n_ \"github.com/nicolasazrak/caddy-cache\"\n\n_ \"github.com/payintech/caddy-datadog\"\n\n_ \"github.com/pedronasser/caddy-search\"\n\n_ \"github.com/pieterlouw/caddy-grpc\"\n\n_ \"github.com/pschlump/caddy-jsonp\"\n\n_ \"github.com/pyed/ipfilter\"\n\n_ \"github.com/restic/caddy\"\n\n_ \"github.com/simia-tech/caddy-locale\"\n\n_ \"github.com/tarent/loginsrv/caddy\"\n\n_ \"github.com/xuqingfeng/caddy-rate-limit\"\n\n_ \"github.com/zikes/gopkg\"\n\n\nOn 2017. Jul 28., at 11:30, Henrique Dias notifications@github.com wrote:\nI'm not being able to reproduce this \ud83d\ude1e\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub https://github.com/hacdias/filemanager/issues/165#issuecomment-318606694, or mute the thread https://github.com/notifications/unsubscribe-auth/AA6x8G2qYU5EgAalznDVGYAnsJmxtnZdks5sSapMgaJpZM4Ol44f.\n\n\n. This did the trick, thank you! \ud83d\ude0c Hopefully this will be updated in the Caddy source for the next release.\nI'm sorry for the inconvenience!. ",
    "messyidea": "Hi,\nWith your build script, I can build it by myself now. This issue can be closed. Thank you~. ",
    "princemaple": "Update: actually, it's more serious than that... it fails to match path. When I go to /saved it also gets hijacked by filemanager.. Thanks for the quick response!. Hi, it's working as expected now. I found something else, I'll open an new issue.. An irrelevant minor bug, the download url /api/download//my_img.jpg?token=... has double slashes in it.\nRemoving which does not help. Just an FYI.. console shows regular 403 error. no js error logged.. Just tried: can delete with no problem. Also, search gives 403 as well. There might be something wrong with the token sent in the js, or the parsing on the server side.. > Could you try logging out and logging in again to see if it works again?\nStill the same :(. All failing (403) requests have the token in their params. That's why I made the deduction.\n\nThere might be something wrong with the token sent in the js, or the parsing on the server side.. which isn't needed, because it's auth in the cookie anyway. > Sorry for all of this\n\ndon't! that's a great plugin, and you are responding so fast!\n\nAnyway, to make sure if the problem is the token in the URL: please try downloading a TEXT file that you can edit. When you click the download button, it will also generate a URL that has the token in it and ping me\n\n403 (great advice!). Yes FF :) proudly. I don't know much go but I couldn't find many occurrences of token in go code. Could you point me to where this logic is actually handled? Just for learning purpose :). Ok I thought it was an upstream bug, but I traced all the way back to http.Request (I assume is from go stdlib?) and couldn't see anything wrong, I don't know this language well enough. Well, that's all the effort I'm going to put into this.. I can see that the token is gone. However, I'm still getting 403s. Can you see anything wrong with my caddyfile in this issue?. BTW username update is fixed, thanks!. no I cannot download. delete and rename do work.. and no I cannot search or execute commands, I tried git version, getting 403 as well.. Actually, I think I know why. For the requests that do FAIL, they are sending a basic token instead of a bearer token. Ring a bell?. Aha I'm correct\nI edited the request to change the token from the basic token to the bearer token I got from another request, I successfully get the image back!\n\n. Though I have no idea sending basic token instead would fail with a 403. Anyway, there's no need to save username and password locally if we have a jwt :) this should be made more secure.. Are you storing username and password in the jwt? If so, this is the wrong approach to use JWT.\nEDIT: I see you are not storing the password in it, great :). yeah if you use basic token you are doing basic auth not jwt. no it's not related to the basicauth config in my caddyfile though. I see. My /manage route was under basicauth previously, I then took it out because now that it comes with its own auth system. However, the browser cached my basicauth token when I previously logged in, and is using it in requests that are not setting an Authorization header. I'm very sorry about this, wasting so much time of yours!. This happens nowadays that people don't really restart browsers \ud83d\ude09 I tried a private session (which doesn't have records of my current session) and everything works as expected.. My sincere apologies!. before\n\nafter\n\n. It's exciting having created a popular project, don't burn yourself out though! :wink:. @hacdias nice!\nThe feature works.\nquestion: does it allow deleting the last user? I'm little afraid to test that (too lazy to reset)\nbug: click delete, click cancel, it shows user updated dialog\n\n. @hacdias it seems that it's still there.... Firefox. Indeed doesn't happen on Chrome. However, the bug is caused by the \"delete prompt\" modal being inside the user form, and the cancel button is lacking a type=\"button\" attribute. The behavior on Firefox is correct. According to standard, buttons without a type attribute defaults to submit. And the cancel button being inside the form and having default submit effect cause the form to be submitted, hence the bug.. I meant this cancel button https://github.com/hacdias/filemanager/blob/master/assets/src/components/User.vue#L57. Yep, that's why I left the comment instead of sending a PR. I don't know much about Vue. So you could choose to add the attribute or move the dialog.. Yeah confirm fixed. Does it integrate with caddy yet?. I build caddy from source. I should have asked \"does it compile with caddy\" rather. I just tried, it compiles.\n```\n/srv # caddy -plugins \nServer types: \n  http\nCaddyfile loaders:\n  short\n  flag\n  default\nOther plugins:\n  http.basicauth\n  http.bind\n  http.browse\n  http.cache\n  http.cors\n  http.errors\n  http.expvar\n  http.ext\n  http.fastcgi\n  http.filebrowser  # <--\n  http.gzip\n  http.header\n  http.index\n  http.internal\n  http.limits\n  http.log\n  http.markdown\n  http.mime\n  http.pprof\n  http.proxy\n  http.push\n  http.redir\n  http.request_id\n  http.rewrite\n  http.root\n  http.status\n  http.templates\n  http.timeouts\n  http.websocket\n  on\n  tls\n  tls.storage.file\n```\nHowever I can't get filemanager/filebrowser to work.\nWhen I used filemanager, I got:\n2019/01/09 10:41:53 no action found for directive 'filemanager' with server type 'http' (missing a plugin?)\n\nfilebrowser I got:\n2019/01/09 10:41:37 /etc/Caddyfile:3 - Error during parsing: Unknown directive 'filebrowser'\n\nSo I assume there is more work to be done and I will have to wait a little bit?. Oh I see, I am currently building against caddy v0.11.1 which hasn't got this commit yet.. Ah thanks for the information. +1 having the defaults defined in the code and merging all possible configs into it.. UPDATE:\nI thought if I exported the users, created a new db and imported the users, the ID would be correct.\nNO - still wrong. It still starts from 1, still overwrites my existing users.\nFunny thing is, if I import the users again, they are rejected because of existing id. . Worked it around by modifying all the ids in the exported json to some large number.\nThe downside is that the users newly created now are displayed at the top instead of at the bottom of the user list.. @hacdias @1138-4EB ^ Please take a look. \"Fixed\" it by changing all the ids to 0 in the json file. Recreated db and imported again. Now the new users are created with the correct ids.. Yes I realized that this is more Bolt than FB, but this could be quite significant for FB users.\nI think one easy \"fix\" is, when migrating, sort users by ID but don't copy the IDs over. This would keep the order of display and not run into the bug. Also when exporting users, sort and leave out the ID, too.. Verified with latest docker image, exporting and importing now has the correct auto increment id.. Hey @hacdias , unfortunately I'm not a Go developer. I don't have a Go setup to test this. I thought I'd be able to compile a new one with the Dockerfile, then the Dockerfile doesn't really contain how to build it either. The code looks good though. (Go is quite easy to read, :) would be great if there was a dockerfile that actually builds FB binary.. sure thing. OK turns out baseurl requires a trailing / to work. so I had to go to /files/. Feel free to close, or \"fix\" it.\nFYI I just do redir /fs /fs/ in Caddy as a workaround. Changed from files to fs because I noticed filebrowser frontend uses /files route as well, just avoiding weird duplication in paths.. ",
    "Florian95": "Hello,\nMaybe a Copy Folder function ? Could be very convenient.\nRegards,. ",
    "codingtony": "Adding Next/Previous using arrow keys when looking at pictures would be a great addition!\n. I guess any kind of files that allow previews. That would make sense.\nOn Jul 25, 2017 12:42, \"Henrique Dias\" notifications@github.com wrote:\n\n@codingtony https://github.com/codingtony, for pictures only, or for\nany kind of file that opens in that preview window? What would be more\nuseful?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/filemanager/issues/146#issuecomment-317796003,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AA6E3nYcfXzyiIOSZLgGPbnejzNMWdDZks5sRhrzgaJpZM4OcVzy\n.\n. \n",
    "torch2424": "Hello!\nYou are welcome! Took me 30 seconds to do this. Thanks for building the awesome plugging! Been looking for something like this for a while.\nThis, plus Caddy is a dream! \ud83d\ude04 . Super rad you are reaching out to the community to make this decision! \ud83d\ude04 \nI don't know what static gen is, so I guess not? haha!. ",
    "mofirouz": "Thanks for the quick turnaround - I would suggest a different / random port because the chances are there are other programs using port 8080. This time it's about the ergonomics - totally up to you.\nFWIW, I'm running it on port 55532. ",
    "ghost": "complete! https://github.com/hacdias/filemanager/pull/194. @hacdias Yes.. @hacdias I believe that as long as you can provide a language file help documentation and examples, there will naturally be some people making language files.\nMulti-language support, will make more people fall in love with filemanager! :>. OK! Hope language translation document production process is very simple~. @hacdias \nI made a simplified Chinese language file [zh_cn.yaml].\nBecause I am not professional, while some options do not know the specific role, so part of the translation content may not be standard, the future will gradually improve ~\nBut I'm new to Github, I do not know how to add files to your project ...\n(https://github.com/ToyoDAdoubi/filemanager/blob/i18n/assets/src/i18n/zh_cn.yaml)\n\u2014\u2014\u2014\u2014\u2014\u2014\nIn my here, already 2:10 am, I went to the rest ~ ~. @hacdias https://github.com/hacdias/filemanager/pull/182\nHas been updated to the latest language file~. @hacdias After comparison found that only a few of the new content, there is no missing what?\nlanguage: Language\n settingsUpdated: Settings updated!\nlanguages:\n  en: English\n  pt: Portuguese\n  zhCN: Chinese (Simplified)\nhttps://github.com/hacdias/filemanager/pull/185. @hacdias I also want filemanager better, more people like to use it! :rofl: :. @hacdias \nAlso, why is there \"post\"?\nFunctional misunderstanding can cause translation barriers.. @hacdias complete!\nBefore specific function is not clear, it may be not accurate enough.\nhttps://github.com/hacdias/filemanager/pull/196. By the way, if you later add the language file content, remember to inform me. :rofl: . @hacdias complete! https://github.com/hacdias/filemanager/pull/189. @hacdias complete! https://github.com/hacdias/filemanager/pull/191. @jivank complete! https://github.com/hacdias/filemanager/pull/198\nDo not need to apologize, this is what i like to do.. Also, whether the site title can be customized, for example: DOUBI - Files, DOUBI - Profile Settings, DOUBI - Video.\nSome interesting little details suggestion ~. Ok, already can be used normally!. Oops, fixed it with \"--address 127.0.0.1\" option. it's not an issue I just think that the interface would look better if everything were a little smaller\nI was looking if it can be done with custom css\n\n. Addition 1:\nAnd the option to manually set the preview path e.g.\nhttps://filemanagerhomeurl.com/username/preview/\nAddition 2:\nThe option to turn off Preview on a per-user basis. I do understand that running separate instances also solves this problem, but it would be nice to just have to run and monitor one instance.\nI did find a bug however:\nrunning instance for example.com\ninstance is started at hugo website root.\ncreate extra user with scope ./content\nif user does hugo new - the file gets created, but file browser automatically tries\nto navigate to /content/newfile.md - which isn't possible for the new user as content\nis their scope. \nI reckon a 'if scope includes ./content then directly open the file'  or go to sub directory within ./content and open file - should be added.. Hi @1138-4EB, - thank you for your reply, much appreciated.\nI will look into contributing although it will require me to pick up Go as a language (until now I have done most of my developing in C and C++), but I agree this project deserves more manpower.\nAs for the first issue - I did not mean using Hugo as the server, but using File Browser as a service for multiple users to work on multiple Hugo sites. At the moment one instance of File Browser can only define one Hugo website root - meaning all users can only work on the same site. My request was if a configuration option could be added where an administrator can specify a website root for each user individually - that can't be much of a problem I'm sure. So there aren't any configuration files, errors etc to supply in this case as its default behaviour of File Browser as it stands at the moment, not an error.\nThe second issue is about how File Browser handles opening a new document after it is created by Hugo; for example:\nAdministrator adds a 2nd user - with scope ./content within the website root.\nWhen the 2nd user then clicks \"Hugo New\" (make a new entry / post) the default behaviour of File Browser is then to automatically open the file - which it does by opening /websiteroot/content/newfile.\nAs the 2nd user however is limited to content in the first place, from his / her session it would be \n/content/newfile. Thus the file doesn't open and results in an error. The user can then of course navigate back to their home directory and open the file anyway, but said error would create confusion and / frustration for users limited to the content section. In other words, limiting the scope of secondary users to the content section (so they can't accidentally edit / delete other files crucial to the Hugo project) means that creating new documents will always lead to an error first before they can manually navigate to the file and open it for editing. \nThus I suggested that an \"if content is included in the scope of users session then remove website root from the file path prior to opening the file\".\nPerhaps I should indeed open a new issue for the second point.. Hi @1138-4EB - Thanks for all the information, I'll look into Go for sure, perhaps it will come in handy for some other projects as well as contributing to this one. As for Vue.js - I'm a total noob when it comes to working with JavaScript frameworks (only do some minimal vanilla javascript from time to time), so that will probably take me more time to pick up.\nPasted the 2nd problem into a new issue. . ",
    "llitfkitfk": "rice\nI think rice-box.go need to be removed if we use docker build, \nOR just leave it alone for Github releases?\ndep\npros: \n * specify dependency version \n * simple?  dep init & dep ensure\n * more in dep & video\ncons: \n * . will try it. done. OK\nInstruction for docker setup and Options (Volume) for Dockerfile  will update in the future.\nAlso need a dockerhub organization account for automate build(currently not support Multistage build). will fix. Great!. docker image size  is still large.\nAfter Docker Hub supported, need modify Dockerfile use Multistage build\nOr manually build in pwd using multistage build and push to docker hub.. Great!. Now Docker Hub  support multistage-build.. ",
    "bartlomieju": "Yes. I'm going like:\n1. yarn run dev\n2. go install github.com/hacdias/filemanager/cmd/filemanager\n3. go run cmd/filemanager/main.go --port 9100\nBut no luck :(. I've managed to get it working - I cloned the repo instead of go get :(\nSorry for inconvenience, I'll try to make up by adding some PR concerning front-end app. Cheers!. ",
    "kylefrost": "Check out #169 :smile: . ",
    "thomasyxy": "I'm so sorry, I don't know commit after create a pull requests will take effect.\nSorry about the inconvenience.. ",
    "casio": "Hello @hacdias - thanks for getting back so quickly! : )\nYep, that sounds great already! And will help my 'editor is editing data/media/...' usecase right away - would be awesome.\nThinking some more about it: consider the case that some other os process is updating a relevant file - would still be cool, if the site would get re-generated.\nDidnt get to read your code too deeply - do you run off hugo once you got a change event and/or can we start hugo in server and, thus, watch mode as well?. Ha, works like a charm. Cool, thanks a lot, editor usecase solved! : D\nHowever, what do you think about the 'os process doing the change' usecase?\nIs it reasonable to have hugo run in the background with a flag?\nWill be some days on vacation now, but would be willing to contribute\nHenrique Dias notifications@github.com schrieb am Fr., 28. Juli 2017 um\n22:41 Uhr:\n\nOnly when we the server gets a change event. You can also run it by adding\nthe 'hugo' command to your user. That way you can run any hugo command\nanytime, anywhere \ud83d\ude04\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/filemanager/issues/171#issuecomment-318756935,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAB0WP4ho3RO4fZC0SmXexUYjnks_IUWks5sSkeDgaJpZM4Om2dG\n.\n. \n",
    "hsluoyz": "Hi @hacdias ,\n\n\nCasbin can replace the Rule and Regexp structs.  Casbin will manage and store the rules for you. You can use the built-in regexMatch() function to implement the regex match. See the RESTful example here: https://github.com/casbin/casbin#examples\n\n\nAllowNew, AllowEdit, AllowCommands boolean values in User can also be expressed by Casbin rules as action. There are a lot of checkings like this:\n\n\n```go\nif !c.User.AllowNew && r.Method == http.MethodPost {\n    return http.StatusForbidden, nil\n}\nif !c.User.AllowEdit && r.Method == http.MethodPut {\n    return http.StatusForbidden, nil\n}\n```\nWith Casbin, you don't need to write this kind of checkings in every function. Just need to put Casbin into a filter that filters all requests (Casbin's middelware for web frameworks all work like this). Then pass in user, URL path and r.Method into casbin.Enforcer.enforce(). Casbin will determine whether to allow the access. So you don't need to write security checks in such many places.\n\nI don't know why the above regex rule and AllowXXX permission are diverged in filemanager, but in Casbin, they can be in the same form of Casbin policy rules. For example, you can use a Casbin model like this:\n\n```ini\n[request_definition]\nr = user, path, action\n[policy_definition]\np = user, path, action\n[policy_effect]\ne = some(where (p.eft == allow))\n[matchers]\nm = r.user == p.user && regexMatch(r.path, p.path) && regexMatch(r.action, p.action)\n```\nThe path is the original regex rule matching. And the action is the permission strings like AllowNew, AllowEdit, AllowCommands. We also use regexMatch() here so you can use a grammar like (AllowNew|AllowEdit) to express multiple permissions. I think it's better than Permissions   map[string]bool.\n\nCasbin not only simplify things. It also supports a powerful policy storage and provides a full-fledged policy management API. So you will benefit from these features when using Casbin.\n. \n",
    "aaboyd": "@hacdias all is good now.  Sorry for the false alarm, my version must have been a bit stale.  Thanks for the quick response.. ",
    "martinbaillie": "Works perfectly @hacdias. Appreciate your quick turnaround on this and thanks for the great plugin!\ud83d\udc4d . ",
    "ip75": "v1.10.0  anyway unable to share files for users with readonly permissions. Yes. You are right. Unable to share files when user has read only access. It is very uncomfortable. Please explain where i can change code in sources to enable it.. ",
    "vothanhkiet": "I used both drag'n'drop and upload button. This issue happen when the folder is empty only, I create a empty file and it works.. ",
    "chinglinwen": "\nIt's the correct behavior.\n\nWe may have different scenery for the situation of creating user, I think it's inconvenient for the extra step to create the scope at the terminal.\nGood to know you'll thought about this.. Good to hear that !   :+1: . Really wanted this, ( say edit a Dockerfile, or any text file )\nI also found it can't edit new create file ( from the ui and console, named a.go ),  I've seen some real go code file can be open and editing, don't know why this (say b.go ) can't ( echo aa > b.go ). @1138-4EB I tried by typing command on the searchbox, it doesn't work, though this also not my expectation way of format the go file. ( expect just click, and it automatic format it )\n```\n$gofmt -w /home/wen/tt/wen/svc-check/.go\nstat wen/svc-check/.go: no such file or directory\n$gofmt -w /home/wen/tt/wen/svc-check/.go\nstat /home/wen/tt/wen/svc-check/.go: no such file or directory\n```\n@hacdias I just click save, with after save setting to gofmt -w *.go, you said it should be one word in the setting of after save, I tried quote it, it's not working ( internal server error )\nI also encounter some strange problem, why the two go file behaviors different, one can edit, and another can not ( just show download picture )\n[wen@pcmaster t]$ stat ../exec/timer.go\n  File: \u2018../exec/timer.go\u2019\n  Size: 1296        Blocks: 8          IO Block: 4096   regular file\nDevice: fd02h/64770d    Inode: 15213753    Links: 1\nAccess: (0664/-rw-rw-r--)  Uid: ( 1000/     wen)   Gid: ( 1000/     wen)\nAccess: 2018-07-27 15:33:55.068443590 +0800\nModify: 2018-05-09 18:35:15.259821755 +0800\nChange: 2018-05-09 18:35:15.299821975 +0800\n Birth: -\n[wen@pcmaster wen]$ stat hello/main.go\n  File: \u2018hello/main.go\u2019\n  Size: 74          Blocks: 8          IO Block: 4096   regular file\nDevice: fd02h/64770d    Inode: 16483834    Links: 1\nAccess: (0664/-rw-rw-r--)  Uid: ( 1000/     wen)   Gid: ( 1000/     wen)\nAccess: 2018-07-27 15:36:15.631005375 +0800\nModify: 2018-07-27 15:36:12.611993311 +0800\nChange: 2018-07-27 15:36:12.611993311 +0800\n Birth: -\n[wen@pcmaster wen]\n\nmain.go is newly created by vim on the system.. Sorry for the late, I build with this branch\n\nNo error box shows, with setting ( after save command )\nSince I can't edit  go suffix file, I can't test it\nI try the searchbox to execute \"gofmt -w main.go\", it seems doesn't work, only show a file found, content doens't change.\n@hacdias \n. It shows This is a not supported command. for both commands provided above. @1138-4EB . Also my primary concern is automatic format on save. not execute command to format on search box manually. ( hope this helps to understand the issue #466  )\n@1138-4EB @hacdias . ",
    "aiastia": "\n\n\n \u2026\u2026 . 2017\u200e.\u200e8\u200e.6\u200e.\uff0c\u200f\u200e11:27:26 \ncaddy_v0.10.6_windows_amd64_custom.zip\nHow should i configure? Can you help me? This is the version I use. :8888 {\n root E:\\bt\n timeouts none\n gzip\n filemanager /  {\n show E:\\bt\n  database C:\\Users\\lenovo.caddy\\filemanager\\7dfe9c406b4ce2c91c8b2f43828dac72.db\n }\n}. Seems to be unable to use\nCaddy can not allow, how should i provide error log, I do not know win10.  /e/caddy\n$ caddy -validate\nbash: caddy: command not found\n$ ls\ncaddy.exe*  Caddyfile  init/\n. $ ./caddy.exe\nActivating privacy features... done.\nhttp://:8888\nHas been able to run, but still the same as before\nIt is still showing the directory caddy.exe ... ... \nE:/caddy \nI just want to show E: // bt\nThis is the configuration file\n````\n:8888 {\n    root E:\\bt\n    timeouts none\n    gzip\n    filemanager / E:\\bt {\n        database patch\n    }\n}. Yes yes, has been successful. Thank you very much, there are friends before\n\n. ",
    "abnerjacobsen": "@hacdias In my case this method does not work. My users exist in a central database and I get the list of them - user, password and permissions - via an API call and with this information I create a Caddyfile on demand.\nI did another test with the following configuration in Caddyfile:\ntest2.sites.daspanel.site:443 {\n    errors stdout\n    log / stdout \"[DASPANEL-HTTP-ACCESSLOG] {>Referer} {remote} {when} {method} {uri} {proto} {status} {size} {>User-Agent} {latency} {request}\" \n    root /opt/daspanel/data/civmw76wg000001p2dwqxpvet/content/cj62tq3ti00005rnrilfs850o/v/2017-08-08-000431-062486\n    gzip\n    tls self_signed\n    header / {\n        X-Frame-Options        SAMEORIGIN\n        X-Content-Type-Options nosniff\n        X-XSS-Protection       \"1; mode=block\"\n        Referrer-Policy        no-referrer-when-downgrade\n        Strict-Transport-Security \"max-age=31536000; includeSubdomains; preload\"\n    }\n   basicauth /_das/fm admin@daspanel.site aI81REN4a1H2gy3b\n   filemanager /_das/fm /opt/daspanel/data/civmw76wg000001p2dwqxpvet/content/cj62tq3ti00005rnrilfs850o/v/2017-08-08-000431-062486 {\n        no_auth\n        allow_commands true\n        allow_edit true\n        allow_new true\n        allow_publish true\n        commands git\n    }\n}\nAs expected, Caddy asks for authentication but after informing it correctly, the login dialog reappears again and again, no matter how many times I enter the login data. In addition, if I click the Cancel button in the Cady login dialog (Basicauth) the Filemanager login screen appears.\nIs it possible to use Caddy's authentication middleware in conjunction with Filemanager?\nWhat's wrong with the above example of Caddy setup?\nThanks. Thanks. It's worked fine.. ",
    "olihey": "Hehe, that would have probably been my second issue, the User should be an interface as well.\nI am not sure if embedding is something you are going after at all but as the code looks today it's not really useful for our case, for example we have our own user database and the filesystem is a virtual one that merges several data sources.\nI still really like the project and if your are thinking about making it easier for embedded use, let me know I might help out a bit.\n. \ud83d\ude04 Sorry, I think you can close the issue. I tried to change the User.Filesystem into an interface but there are quite a lot of place where it's expected to be a string. So, I gave up for now. Not highest priority in our project at the moment, unfortunately. I think you should close the issue if you don't plan to do anything about it yet.\nBTW: Someone from our team suggested if we could just implement the API for the frontend. Is there some kind of documentation on this?. \ud83d\ude2e Sorry, I didn't get this. Yep, the example looks great. That would be bloody awesome.. Awesome, will have a look as soon as I get time.\nThanks!. Found time to look at it and now ran into a problem \ud83d\ude09 \nhttps://github.com/hacdias/filemanager/blob/9301966eb7b539ec871d19e760372224498a973c/filemanager.go#L446\nThe FileSystem is now an interface but OpenFile returns a *os.File struct. This should be changed into an interface as well, probabaly a merge of these interfaces:\n- io.Reader\n- io.ReaderAt\n- io.Writer\n- io.Seeker\n- io.Closer. ",
    "francislavoie": "Thanks! I tested the new build and it works great!. I ended up tossing together a dark theme. Here's an example:\n\n```css\nbody, #login {\n  background-color: #303030;\n}\nheader {\n  background-color: #1b1b1b;\n}\n.action,\nbreadcrumbs,\nbreadcrumbs span,\n.dashboard #nav,\nlisting.mosaic h2,\nlogin h1 {\ncolor: rgba(255, 255, 255, 0.7);\n}\nlisting.list .item.header {\ncolor: rgba(255, 255, 255, 0.7);\n  background: #616161;\n}\nlisting.list .item,\nlisting.mosaic .item {\nbackground-color: #424242;\n  color: rgba(255, 255, 255, 0.7);\n}\n.dashboard {\n  background: #424242;\n  color: rgba(255, 255, 255, 1.0);\n}\nselect,\ntextarea,\ninput,\n.dashboard textarea,\n.dashboard #locale,\n.dashboard input[type=password],\n.dashboard input[type=text] {\n  background: #212121;\n  color: rgba(255, 255, 255, 0.9);\n  border-color: #303030;\n}\nselect,\n.dashboard input[type=password],\n.dashboard input[type=text],\n.dashboard select {\n  padding: 8px;\n}\nsearch #input {\nbackground-color: #424242;\n  color: rgba(255, 255, 255, 0.7);\n}\nsearch.active #input>.action i,\nsearch.active input,\nsearch.active #input,\nlogin input[type=password], #login input[type=text] {\nbackground-color: #303030;\n  color: rgba(255, 255, 255, 0.7);\n}\nsearch #result {\nbackground-color: #212121;\n  color: rgba(255, 255, 255, 0.7);\n}\nsearch #result .boxes,\n.card {\n  background-color: #424242;\n  padding: 0 15px 15px 15px;\n}\nsearch #result .boxes h3,\n.card h2,\n.card h3,\n.card p,\n.card-content {\n  color: rgba(255, 255, 255, 0.7);\n}\nnav li {\npadding-top: 1em !important;\n}\nnav.active, #dropdown.active {\n    background-color: rgb(51, 51, 51);\n}\nfile-selection {\nbackground: #303030;\n\n}\n```\n@hacdias if you look at the spots I added padding, I'd suggest considering using those in your base theme, to give a few of the elements a bit more room to breathe. The rest is just color changes.. Thanks @Equim-chan, I hadn't updated to the latest version of the plugin. I made your fixes, plus added another at the bottom to fix a weird thing with the nav on the settings page. Updated my above comment.. Thanks! Updated my above comment.. I just came to write this exact same issue \ud83d\ude06\n+1 from me. Oh - I was under the impression that was global CSS.\nWell, how about allowing admins to set global CSS? \ud83d\ude1b . Awesome. I'm excited to try it! :smile: . Duplicate of https://github.com/hacdias/filemanager/issues/224 probably \ud83d\ude1b . This doesn't sound like an issue with this project. You'll just need to configure your apache to forward the Connection and Upgrade headers so that websocket connection can properly upgrade.. ",
    "TheChiefMeat": "I would like to add a small addition to the Dark Theme, specifically the following code that fixes the popout menus for mobile devices; before they were entirely white, but now it follows the same colour scheme.\nnav.active, #dropdown.active {\n    background-color: rgb(51, 51, 51);\n}. No worries, have another small update for you; This fixes the white box on mobile when selecting an image. Before you were unable to see any of the buttons to share etc.\n```\nfile-selection {\nbackground: #303030;\n}\n```. Even when I do:\ncaddy filemanager --database /root/6666cd76f96956469e7be39d750cc7d9.db\nlike the https://filebrowser.github.io/configuration/ suggests, I still get the same error though.. ",
    "maxux": "Yes ! Thanks :). Thanks :) Actually, good point, I'll add this !. Yeah ! Looks perfect !. ",
    "sanderhahn": "The validation logic might try to open the BoltDB database and that is where the timeout happens. Bolt uses an exclusive write lock on the database file so it cannot be shared by multiple processes. Maybe its possible to pass along a &bolt.Options{ReadOnly: true} if the validate flag is active.. No hurries, was just looking into it :) Thank you!. The problem is only there when the server is already running. The validate logic is also invoked when you send caddy a SIGUSR1 to reload the configuration. At the moment a full shutdown is required to update the configuration. Maybe it is not such a big problem, but it is unexpected :). The validate flag is not present on a SIGUSR1 signal. So checking for a flag might fix the validate use case, but the reload config on a running caddy might still fail.. The restart logic that Caddy uses is here: https://github.com/mholt/caddy/blob/master/caddy.go#L144 To perform a graceful restart without dropping incoming requests it will start a new instance and then shutdown the existing instance. Not sure how to solve this using BoltDB. Maybe Badger is a solution: https://godoc.org/github.com/dgraph-io/badger It doesn't seem to lock the database file, however it also doesn't provide transactions so its functionality is at a lower level.. ",
    "hijak": "hi\ni am experiencing this when using caddy in a swarm scenario using global replicas. The replicas wont start due to the timeout error. I remove filemanager and they work fine. ",
    "amenolo": "Your responsiveness is gold, pal! \ud83d\udc4d\nAbout Recaptcha: maybe I misunderstood your words, but, based on using other Recaptcha-enabled script, domain and API key are simply mandatory end user related parameters, I don't really see how they could give trouble in integrating the feature itself, sorry...anyway do not go crazy on it...\nAbout Noty: I didn't know of it, seems straightful nice, thumbs up!. ",
    "elico": "@hacdias thanks!\nI will need to see how I am managing with this but it seems like a pretty straight forward and simple API.\nThanks!. ",
    "91wangmeng": "how can i upload a video ? can you provide detailed parameter specification. ",
    "weirdbricks": "in case someone comes across this thread, here's how I got a token with curl and use that token to upload a file:\n```\nget the token - in this example I'm using the default username \"admin\" and password \"admin\"\nand the token is stored in the \"TOKEN\" variable\nTOKEN=$(curl -X POST http://127.0.0.1:3000/api/auth/get -d '{ \"username\": \"admin\", \"password\": \"admin\" }')\nupload a file and present the token we got earlier\ncurl --header \"Authorization: Bearer $TOKEN\" --progress-bar --upload-file test.log.gz http://127.0.0.1:3000/api/resource/\n```\nhope it helps!. ",
    "guyskk": "https://github.com/guyskk/filebrowser-upload solve the problem!. ",
    "ThibautMarty": "Apparently the symlink issue had been solved, but what about the mounted folder issue?\nThe mount point appears to be empty in filebrowser while it does contain some files.\nI'm using latest docker image.\nRegards,\nThibaut. Never mind, I guess it is a problem with the docker volume + mount. It should work with the shared volume options.. ",
    "1138-4EB": "@ThibautMarty does it work if you start filebrowser in the host, instead of using the docker image?. @DeyV, installing additional dependencies in the host (be it the 'real' host or the docker image/container) is an option, which can be used right now as in your example. However, I think that this issue is focused on integrating this feature in the code base, so that filebrowser can be still used as a standalone single binary app. E.g., https://github.com/mholt/archiver can be used to provide such functionality.. We'll use this issue to track ideas, suggestions and enhancements related to the 'Search' feature:\n\n\n336. External search commands.\n\n\n415. Fuzzy search.. portainer/portainer is a partially open source web app where the backend is written in golang (although the frontend is based on Angular, instead of Vue.js). Having a look at their codebase might be interesting for anyone trying to implement this. See http://portainer.readthedocs.io/en/stable/configuration.html#admin-password. @ncresswell, indeed, I got to know this project when you mentioned it in portainer/portainer#1380 in november. Do you think if the know-how you have in portainer about this issue can be somehow ported here?. @ncresswell it is saved in the database, but the default values are hardcoded. See comments https://github.com/filebrowser/filebrowser/issues/257#issuecomment-353321710 and https://github.com/filebrowser/filebrowser/issues/257#issuecomment-396936650 above.\n\n\nSource at https://github.com/filebrowser/filebrowser/blob/master/filebrowser.go#L193-L196\nIn order to add a flag: https://github.com/filebrowser/filebrowser/blob/master/cmd/filebrowser/main.go#L27-L117\nThis implementation, referred by @jzaefferer, uses environment variables: https://github.com/var2dan/filemanager/commit/351dd8ee1244e231eb77b6efec57cb95dc2ab07b. Just tested it in a golang-alpine container and it works as expected:\nbash\n$ mkdir tmp-build && cd tmp-build\n$ docker run --rm -itv $(pwd):/srv -w /go/src/github.com/filebrowser golang:alpine sh -c \"\\\n  apk update && \\\n  apk add git && \\\n  git clone --recurse-submodules https://github.com/filebrowser/filebrowser/ && \\\n  cd filebrowser/cmd/filebrowser && \\\n  go get ./... && \\\n  GOOS=linux GOARCH=mipsle go build -v -o /srv/filebrowser\"\n$ file filebrowser\nfilebrowser: ELF 32-bit LSB executable, MIPS, MIPS32 version 1 (SYSV), statically linked, with debug_info, not stripped\n$ cd ..\n$ rm -rf tmp-build\n``` bash\n```\n@ryubaisan, please let us know if it works for you now.. Closing this in favour of #466 and #486.. Hi @maweck! IMHO user management and interactions with the database require a rework. See #489. The flows need to be clarified, in order to allow further extensions.\nIt would be rather straightforward to rely on an LDAP for authentication, as you did with the proxy. However, I don't think that the database can be replaced, because it contains more info than just usernames and passwords. Disabling the addition of new users might be an option; but parameters for existing users should still be editable. Therefore, a mechanism would be required to decide what to do when:\n\nA user exists in the DB but not in LDAP.\nA user exists in LDAP but not in the DB. I.e. automatic addition of users should be optional (not default).\nA user exists in both the DB and LDAP, and some parameters need to be updated in the DB.\n(Potentially) Some users are set up in the config file and are also found in LDAP.\n\nFurthermore, I think that it should be possible for LDAP and non-LDAP users to coexists in the DB. So LDAP would be an (optional) authentication option and password would be another (optional) authentication method. Indeed, this could be extended to the proxy 'authentication'. So, there would be a precedence order:\n- If noauth is enabled; go in.\n- Else if the proxy header is present:\n  - If the user has proxy access enabled; go in.\n  - else error or jump to next option (if available).\n- Else if LDAP authentication is enabled for the user:\n  - If it exists in the LDAP service\n    - If it is properly logged in; go in.\n    - else error (not allowed) and/or jump to next option (if available).\n  - else error or jump to next option (if available).\n- Else if password access is enabled for the user:\n  - If password is correct; go in.\n  - else error.\n- Else access not allowed.\nAs you can foresee, this is a not so easy task, because it requires diving into the codebase. I have not done it myself (yet), so I cannot help pointing the places where changes should be made. @hacdias, who is the creator, might provide a clearer view.. I split the first six bugs/enhancement proposals to separate issues, in order to track them better. I think we agree that all of them fit in the scope of this project.\nHowever, I stopped with Tabs, xterm.js and Tiling. As you point out, having all of these combined might be out of the scope of this project. Therefore, I'll like to discuss whether it'd be possible to have two main variants selectable at build time. The 'lightweight' one with a single tab, no tiling and no terminal. The 'full featured' with all of them enabled.\nIndeed, related to the option proposed in #310, I think it'd be interesting to have a list of checkboxes to select which features to build. Note that I am not expecting you to actually implement all of these features. Nor do I want to push you to accept any. Yet, I'd like to know how close/far do you think the codebase is from allowing such an approach.\n\nIf someone wants to have full access to a server, they can use SSH.\n\nThe main objective is not to have full access to a server, but to i) have colorized output and ii) execute interactive (not batch) commands. I am not thinking about running it natively, but inside a container.\nSee #315 where I explain a use cases that would benefit from minimal interactivity. Note that for this specific use case a single button that kills the process would suffice. No need for xterm.js at all.\nWhy do I want to execute filemanager or any other app inside the container? Because, how do I test the binary out of the container? I can use docker cp or the frontend to take it out of the container. Yet, my host must have all the runtime dependencies, and it might be a different os (say Windows or macOS). Therefore, I might need to crosscompile. In this context, the docker container does not help much. Hence, the proposed \"inception\".\n\nI think that adding SSH makes filemanager's user and access control redundant and introduces a possible source of conflict. Users are required to handle two separate credentials in order to use the same service.\nMoreover, this is directly related to the cmd: label I proposed in #312. Allowing arbitrary values, either absolute or relative, makes filemanager behave as some kind of SSH. However, it is difficult to filter allowed and not allowed resources.\nNote that I am ok with removing access control from filemanager when used in a container (--no-auth is used in the example above), and letting admins know that they should use an additional layer. Indeed, in container mode I think that the most 'elegant' approach would be:\n\nSplit user access and database handlers to a 'entrypoint' package.\nHave a single or a set of alpine-based containers (lightweight, full-featured, custom).\nLet admins create derived images:\nCreate system users with fine-grained access control.\nAdd complementary tools/dependencies.\nMake the filemanager entrypoint support 2-3 types of setups for each user:\nSingle directory access with a highly filtered command list in a shared container (equivalent to the current behaviour).\nAccess to a shared or exclusive container with the privileges of a user which is already defined in the image (might or might not be root). Note that in this case filemanager can retrieve credentials from the images, so the login of a user can be just forwarded.\n\nOnce again I'd like to know how close/far is the architecture of the program from allowing such a scheme. Of course, the first approach would be minor refactorization in order to support a single image and only a shared container with a highly filtered command list. Indeed, I think that any further additions should be developed as a wrapper around filemanager, so that filemanager itself does not change much from the features and UX point of view. In the end this is an enhancement to the UAC, not to the program itself.. @hacdias, I found the bug. Not easy to spot, but straightforward to be fixed. There is absolutely nothing wrong with the golang codebase, and viper works just as expected. The point is that the name of the config file included in the Dockerfile does not match the default config name in setupViper:\n\nhttps://github.com/filebrowser/filebrowser/blob/master/cmd/filebrowser/main.go#L115\nhttps://github.com/filebrowser/filebrowser/blob/master/Dockerfile#L25\n\nBecause the config in the Dockerfile is set with CMD, if docker run is executed with any argument after the image name, the CMD is overwritten. As a result, without a -c flag, filebrowser defaults to filebrowser.json, which does not exist inside the container.. >hacdias\n\nYes, Hugo (or any other static website generator) must be installed separately. This way we reduce the File Manager binary size and give the users more flexibility about the version they want to use.\nI'll add it to the docs.\n\nIs it possible to make it a build-time option? Not for any command, of course, but for golang libraries/tools such as Hugo.\nJust asking because you have a better big picture of the architecture. From my simplistic view, it is just a matter of replacing a function call to the shell/system with a call to a library. But I'm sure it can be much more complicated.. @hacdias, it works fine for me!\nExample:\ngit clone -b edit-everything https://github.com/filebrowser/filebrowser\ncd filebrowser\ndocker build -t filebrowser/filebrowser .\ndocker run --rm -itv $(pwd):/srv -p 80:80 filebrowser/filebrowser --no-auth -p 80\nNow Dockerfile can be edited.\n\nYet, you might want to make #358 optional, so that users willing to provide limited edition can configure it. I mean, I would not drop the existing feature.. Closing in favour of #252.. IMHO it'd be interesting to add \"web\" somewhere, since the main feature of the project is that it is a web-based file manager/browser: https://en.wikipedia.org/wiki/File_manager\nName: Web File Manager\nslug: wfm\nRelated to #342, possible repos:\n\nwfm/front-vue\nwfm/front-angularjs\nwfm/back-go\nwfm/back-ipfs\n\nwfm is not available ATM, but it seems to be a profile with very very little public activity. Shall you like the proposal, it might be worth mentioning him to politely ask if he would change his name to wfmurphy or any other, so that the organization can be created. If contacting him is not possible, GitHub staff can check it according to https://help.github.com/articles/name-squatting-policy/\nOtherwise, I'd just propose web-file-manager.. Closing in favour of #489, which has a wider scope.. @UnAfraid, if a user can upload a file, it means that there is write access. Therefore, the content can be browsed/seen. In this context, disabling the download button seems irrelevant, because you can always save the content you are able to see.\nPlease, provide some more info about the context:\n\nAre you suggesting to let a user upload files to a dir/scope but not be able to open the uploaded files afterwards?\nShould they be able to list the content but not to open it?\nHow would possible conflicts be managed (i.e. uploading a file that already exists) if the content cannot be checked?. @gmemstr, please see #483.. @joshk132 could please provide some more info so that we can reproduce the behaviour?. No, they are not hidden yet. Example on play-with-docker:\n\n\nHowever, this might be a duplicate of #349.\n. @bcardiff, @veteran29, @davidpelayo, @derekoharrow, this is now merged in master, along with other enhancements (#506). It will be available in the next release.\nYou can see implementation details in #504 -> #506. See also spf13/viper#working-with-environment-variables and precedence.. The relevant lines, which were introduced in #506, are cli/cmd/root.go#L65-L67. Note that it is the same as #504/files, with an additional replacement. Therefore the format is:\n\nPrefix FB_.\nConvert key/flag to uppercase.\nReplace . with _.\n\nThe first of the options you commented is correct: FB_SOME_CONFIG.\nAnyway, note that flags take precedence over environment variables. Values in the config file do not. E.g.:\nbash\n$ docker run --rm -it -p 5566:1234 -e FB_PORT=1234 -e FB_AUTH_METHOD=none filebrowser/filebrowser\n2018/08/23 00:34:16 Using config file: /.filebrowser.json\n2018/08/23 00:34:16 Listening on [::]:1234\nbash\n$ docker run --rm -it -p 5566:1234 -e FB_PORT=8888 -e FB_AUTH_METHOD=none filebrowser/filebrowser -p 1234\n2018/08/23 00:35:24 Using config file: /.filebrowser.json\n2018/08/23 00:35:24 Listening on [::]:1234\nLast, filebrowser/filebrowser:latest is now updated with each commit pushed to master (so it is a 'rolling' development image). Then, if you are using docker (and not caddy), you can already try this feature. Indeed, it would help us find possible bugs if you tried envvars that we have not tested yet.\n\n\nProbably it's on its way, but is hard to know the allowed config options. \n\nIt is not (yet). So, feel free to contribute by opening either an issue or a PR in filebrowser/filebrowser.github.io.. > @razaborg\n\nCurrently, filebrowser is run as root (at least for the docker version) and every file created through filebrowser is hence created as root too.\n\nFilebrowser is run as the user executing it. Therefore, if you execute it locally, permissions are those of your user. However, as you said, running containers as root (UID=0) is the default behaviour of docker. Filebrowser images are based on scratch so there is no configuration related to usernames inside them.\nThere are some mechanisms to run docker containers as a user available on the host (which is not root):\n\nhttps://medium.com/@mccode/understanding-how-uid-and-gid-work-in-docker-containers-c37a01d01cf\nhttps://docs.docker.com/engine/security/userns-remap/\nhttps://success.docker.com/article/introduction-to-user-namespaces-in-docker-engine\n\n@ppnchb, @alex-phillips, if you are ok with using a single non-root user, running the container with the USER flag can be enough for your use cases.\n\n@razaborg\nAnyway I think that would be more secure to use Unix permissions under the hood rather than the \"everything belongs to the same user\" model...\n\nAs you see, Unix permissions are always used under the hood. I think that the difficulty to implement your proposal resides in mapping multiple users automagically. The first of the references above can be a good starting point to wrap your head around it.\n\n@razaborg\nWould that be possible? Would that need a lot of modifications in the code?\nAnd if you don't have time for that, maybe you could tell me where I should start to look in your code to do that?\n\n\nDirectories and/or files are created in https://github.com/filebrowser/filebrowser/blob/master/http/resource.go#L184-L196\nThe struct that defines a user is https://github.com/filebrowser/filebrowser/blob/master/filebrowser.go#L363-L407\nUsers are stored in a database:\nhttps://github.com/filebrowser/filebrowser/blob/master/filebrowser.go#L56-L58\nhttps://github.com/filebrowser/filebrowser/blob/master/filebrowser.go#L183-L187\nhttps://github.com/filebrowser/filebrowser/blob/master/filebrowser.go#L189-L212\nHow to change the user from golang: https://stackoverflow.com/questions/21705950/running-external-commands-through-os-exec-under-another-user\n\nHowever, due to #257 and #439, should you want to start tinkering with the code, I think that it'd be sensible to explore a mechanism to programmatically add several users to filebrowser's database. Then, it would make sense to read these from the host system. And, last, make filebrowser create/read resources as different system users. AFAIK, users right now are only used to limit the scope.. Indeed, with #506 we removed possible inconsistencies between the config file, flags and envvars. Also a placeholder for database related CLI (sub)commands was added.\nTherefore, it is relatively straightforward to add default user and password fields to the config file, flags and envvars at the same time. The user is not a problem, but as commented by @hacdias in 371-issuecomment-370157182 it is not desirable at all to store passwords in plain text.\n\nWe might add several subcommands to filebrowser db:\n\nfilebrowser db init would initialize a db file (i.e. execute func Setup) without starting the server (i.e. do not execute func http.Serve).\nfilebrowser db set pass <user> could prompt for a password (twice) and update the database. \nfilebrowser db hash would take a string and execute HashPassword. Then, the user would use the hash in the config/flag/envvar when executing filebrowser serve. However, I don't know if this is secure enough.\n\n\nMoreover, a very demanded feature is to allow programmatically adding/removing/editing user entries in the database. A possible approach is to use a YAML file to define users and groups. E.g.:\nyaml\n- &g-admin\n  scope: \"/srv\"\n  allowCommands: true\n  commands:\n    - git\n    - svn\n    - wget\n- <<: *g-admin\n  name: admin\n  passwd: <hash>\n- <<: *g-admin\n  name: otheradmin\n  passwd: <hash>\n- &g-agroup\n  allowCommands: true\n  commands:\n    - ls\n- <<: *g-agroup\n  name: auser\n  passwd: <hash>\n  scope: \"/srv/auser\"\n- <<: *g-agroup\n  name: anotheruser\n  passwd: <hash>\n  scope: \"/srv/anotheruser\"\n- name: otheruser\n  passwd: <hash>\nIn this context, a single flag/envvar/config field would be required, which would point to the yaml file. Note that the admin or admins would be just entries in this file. Furthermore, the file could be automatically edited/removed by the backend after the content is used to init/sync the database. Also, this file would be provided to either filebrowser serve, filebrowser db init or to both of them.\nNevertheless, equivalent JSON or TOML versions of the YAML can be supported, although I think that those formats are much more verbose in this context.\nBut, I don't know how this scheme fits with Docker and Kubernetes secrets, as commented by @Jens-vd. Maybe --admin.user and --admin.pass can be optional flags for filebrowser db init only?. @hacdias, unfortunately I am also unsure about what the default should be. Nonetheless, this issue seems to be outdated. The 0776 in resource.go that @march1993 mentioned are now set to 0775 (see #441).\nWe might want to close this issue and continue the discussion in #300, as both seem to be tightly related.. Closing as duplicate of #224.. Well, it is not necessarily simpler/easier. Indeed, the objective of this issue/PR is to discuss it, as it seems that there is not info to help contribution (yet).\nRight now you assume that a contributor has nodejs, npm, go, git and docker. My final approach is to require docker and a shell. All the other (nodejs, npm/yarn, go and git) are distributed in a single container (filebrowser/filebrowser:dev): see this commit, that is one ahead of this PR.\nMy proposed workflow is: https://github.com/1138-4EB/community/blob/fa41dbb7036ee4958e0c4e16ad7eb0d0536f31dd/contributing.md If the user wants to install all the tools locally, build.sh can be used. If he/she wants to install nothing but docker, build_in_docker.sh produces exactly the same result. After the first execution of any of them, frontend will be checked out, so the user/contributor can edit any source (either from the frontend or the backend) and have everything rebuilt without internet connection.\nAlso, instead of downloading go dep and rice each time, these are part of the dev image. Moreover, when dep ensure is executed, the vendor folder is kept in the host, in order to avoid downloading all the dependencies each time.\nBesides, I find it really weird to use a package.json for the backend. Executing npm install in the filebrowser repo installs many resources in node_modules, apart from filebrowser-frontend, which is the single dependency. How are you supposed to edit something in the frontend and have it rebuilt along with the backend? Are you supposed to move to filebrowser/node_modules/filebrowser-frontend and run npm build there? Or do you edit the frontend in a different path, then push to GitHub and update from filebrowser?\nIn my proposal, frontend is a child of filebrowser, but it is directly cloned with git in a script. Therefore, the location is still fixed, but all the nodejs stuff is kept in frontend. On the whole, I find it more \"natural\" to move to subdir frontend in order to build the frontend and then move to filebrowser to build the backend.\n\n\n.sh scripts don't run natively on Windows, for example.\n\nA GitHub user/contributer is likely to have Git for Windows, MinGW, MSYS2, Cygwin... On Windows 10 there is even the Linux Subsystem available. Furthermore, any docker container can be used to run a shell script. If you think that it is required, I can add the equivalent to docker run --rm -tv $(pwd):/src -w /src -v /var/run/docker.sock:/var/run/docker.sock busybox sh -c \"./build_in_docker.sh in PowerShell.. > There is npm link/yarn link for this kind of cases.\nI didn't know about these. Then, if you prefer, I can revert https://github.com/1138-4EB/filebrowser/blob/3acc5fb43feabea42eefece9a4fda313b6155bbf/build.sh#L7-L15 and keep package.json. I still think that it can be slightly misleading, but that's just a very personal opinion. In the end, I think the most important contribution in this PR is to provide build_in_docker.sh, so that specific dependencies or compile sequences do no matter.\nLet's hear what @Equim-chan and others think about it!. > May the new Dockerfile breaks the automatic build?\nDo you mean the automatic build feature in hub.docker.com? If so, I think that you are ok, and this breaks it. There are two possible solutions:\n\nRename the Dockerfile I propose to Dockerfile.prod and keep an all-included Dockerfile to be used by hub.docker.com.\nUser travis-ci or any other CI service that allows to build and also run tests. On successful builds/tests, artifacts can be pushes to both GitHub releases and hub.docker.com.\n\nI like the second approach because it allows more flexibility and the local workflow can be reproduced. The first solution requires to keep two parallel workflows: an optimal one (from the network usage point of view) and the all-in-one.\nHowever, pushing images from travis from hub.docker.com requires to set a dockerid (user and password) through travis encrypted variables. It is a one-time configuration: https://github.com/ghdl/ghdl/blob/master/dist/linux/travis-enc-dockerhub.sh\nBTW, a organization named filebrowser can be created in hub.docker.com, just as you did here. That would make it easier to provide both development and production images. Also, it'd be straightforward to provide multiple production images from travis, e.g., one based on scratch and another one based on alpine.\n\nIs it a better idea to make frontend as a git submodule? Like, in this repo we make the frontend as a submodule locked on some release tag, and when developing we pull the submodule to its HEAD? When we are going to tag a release, we also tag the frontend and pull the submodule to the tag.\n\nI did not explicitly use the term 'submodule' because I have never used this feature of git. However, yes, I was thinking of a submodule when I moved frontend to be a subdir of filebrowser.\n\nAbout versions, note that the proposed changes include getting the latest available version of dep, not a hardcoded one. I don't know if this is ok or if you prefer to manually bump dependency versions.. @hacdias, @Equim-chan, this is going to be long, but I think it is worth. Please, bear with me.\nIn general, I think that moving the project to its own organization was a good idea, and we should stick with it. It provides a generic name, not linked to any specific user, so it is easier to remember. It is also coherent with many other projects in GitHub, such as ghdl/ghdl, VUnit/vunit or portainer/portainer.\nHowever, I believe that the migration to a organization structure is not finished yet. #342 was just the first step. Now, we need to improve and polish it, in order to make development and collaboration easier.\nWe might merge filebrowser/filebrowser and filebrowser/frontend back. That would make local development 'easier' at first sight. Yet, it wouldn't be 'clean'. Those two repos are clearly decoupled, as one contains frontend dependencies (Vue, Js, CSS, HTML) and the other one is the backend (Go). By keeping them separated we are stating that alternative implementations can be made for any of them. For example, a different frontend can be written using Angular, but keeping the same backend. Equally, a different backend can be written using Python or Ruby, but keeping the same frontend. This is very valuable, because it lets collaborators focus on/reuse only the parts the need, instead of forcing them to analyze the whole project. However, for it to be a real possibility we should provide a good documentation of the API between them (see #224). I think we should use some service such as Swagger (explore existing projects). That's just one option. Docker's API docs (docs.docker.com/engine/api/v1.30) used to be built with a Hugo Theme (moxiegirl/old-docs-base). An interesting up-to-date theme for Hugo is DocuAPI.\nFurthermore, it'd be desirable to create a third repo named filebrowser/caddy, in order to make it clear that filebrowser is a standalone application. I believe that many users might find it useful without Caddy, even though it is most known for being a plugin of it.\nIndeed, related to you comment about the name, I think that filebrowser is better than filemanager, because the most notable feature as a standalone app is that this is a web-based solution. But, at the same time, it makes sense to use 'filemanager' in the context of Caddy. Anyone using Caddy already knows that everything is web-based, so 'browser' is redundant. As a result, I would stick with filebrowser for the project name, but use filemanager as the name of the Caddy plugin. Then, the filebrowser/caddy repo proposed above could be named filebrowser/filemanager.\nShould we push in that direction, we need to ensure that contributing to any of the three legs feels comfortable enough. At least as comfortable as it was when all of them where hosted in a single repo. This is not hard to achieve, because there was no documentation at all, so the first contact has always been raw. Therefore, this is a good point to elaborate helper scripts until we get a pleasant experience, before actually writting and updating the docs to provide the first version of contribution guidelines.\n\nFollowing this motivation, and according to the conversation we had a couple of months ago (previous comments in this thread), I have further elaborated this PR:\n\nI created an organization in hub.docker.com/u/filebrowser. I am the owner now. But, if you want to take control over it, just let me know and I will transfer it to you.\nI set up travis-ci.com/1138-4EB/filebrowser for my fork. I cannot do it with this repo because I am neither a owner nor a collaborator.\nI encrypted my docker credentials with travis, in order to support pushing docker images from travis-ci.com to hub.docker.com. See ./build/enc-dockerhub.sh.\nI added the frontend repo as a git submodule of the backend. See https://blog.github.com/2016-02-01-working-with-submodules/#advice-on-using-submodules-or-not\nI explicitly separated the following tasks:\nGetting dependencies and building the frontend (build_assets.sh).\nBuilding the backend (build.sh).\nBuilding the docker image (build_img.sh).\nI created an image named filebrowser/dev, to support development/collaboration from hosts with a single dependency: docker. A script is provided to build it (build_img_dev.sh).\n\n\nThis is the proposed workflow:\n\nA CRON job in travis-ci builds filebrowser/dev once a week. If successful, it is pushed to hub.docker.com/r/filebrowser/dev. This is also executed when a new commit is pushed to branch img-dev.\nA CRON job in travis-ci builds filebrowser/filebrowser every day. If successful, it is pushed to hub.docker.com/r/filebrowser/filebrowser. This is also executed when a new commit is pushed to branch master.\n\nSee https://travis-ci.com/1138-4EB/filebrowser/builds\n\nWith the proposed scheme, all of the following development environments are supported:\nNo dependencies\nIf the developer does not want, or cannot, install any dependency at all, sources can be edited through GitHub.\nAll the dependencies\nIf the developer is willing to install nodejs, yarn, go, git, docker and bash:\n\n./build/build_assets.sh gets frontend and backend dependencies, builds the frontend and updates rice-box.go.\n./build/build.sh builds the backend.\n./build/build_img.sh builds the filebrowser/filebrowser image.\n\nAlternatively, a script named build_all.sh executes build_assets.sh and build.sh, one after the other.\nNOTE: the repo must be cloned in a path inside GOPATH.\nDocker and bash\nIf the developer wants to install docker and bash only:\n\nUSE_DOCKER=\"true\" ./build/build_all.sh executes build_assets.sh and build.sh inside a filebrowser/dev container, instead of running them on the host.\n./build/build_img.sh builds the filebrowser/filebrowser image.\n\nNOTE: the repo can be cloned anywhere.\nDocker and bash, interactive\nIf the developer wants to install docker and bash only, but desires to execute build_assets.sh and build.sh separately, he/she can work inside a container:\n```\n  WORKDIR=\"/go/src/github.com/filebrowser/filebrowser\"\n$(command -v winpty) docker run -it \\\n    -v /$(pwd):${WORKDIR}:z \\\n    -w /${WORKDIR} \\\n    -p 8000:80 \\\n    sh -c \"\\\n      cd build && \\\n      dos2unix build_assets.sh && \\\n      dos2unix build.sh \\\n      sh\n    \"\n```\nExposing a port allows to execute filebrowser inside the container after the execution of build.sh, and browse it from the host.\nNOTES:\n  - The repo can be cloned anywhere.\n  - Since the repo in the host is mounted inside the container, the developer can use any text editor/IDE in the host to edit the sources (say Atom, notepad++, Visual Studio Code, Sublime...)\nplay-with-docker\nAny of the three options above can be used in a play-with-docker playground.\nNo connection\nAfter a first execution of build_assets.sh, dependencies (vendor and frontend/node_modules) are saved in the host. Therefore, as long as filebrowser/dev is already pulled, no internet connection is required for development. This applies to any of the options above.\nPowerShell\nIf the developer is using a Windows box without any bash shell, the interactive option above can be used by slightly modifying the syntax. Then, there is a single dependency: docker.\n\nAdditional issues:\n\nIs goreleaser affected by any of these changes?\nHow is publish.sh affected by these changes?\nShould we modify build_img.sh in order to programmatically produce two copies of dockerfiles/filebrowser? One based on scratch and another one based on alpine. Only the first line (FROM) needs to be changed with sed.\nShould we provide ARM variants of the images? This can be applied to filebrowser/filebrowser and/or to filebrowser/dev.\nRight now, the latest versions of node_modules, vendor and dep are got. I don't know if this is desirable, or if it'd be better to use fixed/tagged versions and manually decide when to update dependencies.\n\nLast, I think that this message can be a valid starting point as a Contributing section, either in filebrowser/community or in filebrowser.github.io.\n\nUnfortunately, I am working abroad for some months, so I won't have much time to actively develop the other pending issues I have (see filebrowser/issues/created_by/1138-4EB and 1138-4EB/hwd-ide). However, I am open to discussing this PR and providing support to the issues that might arise as a result of merging it.\nIndeed, because this PR is already functional in my fork (1138-4EB/filebrowser and travis-ci.com/1138-4EB/filebrowser) you/we can start using it there to see how it works, before actually merging the PR here.\n\nCaveats:\n\ndockerfiles/dev relies on the GitHub API to retrieve the latest version of dep. If it is triggered frequently, it might hit the rate limit: https://developer.github.com/v3/rate_limit/ This is not critical, because it is set to run once a week. But I think it is good to point it out, just in case. A possible workaround is to fall back to a hardcoded version when it happens. However, I have not implemented this yet.. > Sorry for this delay. Now I finally have some time to dedicate to this project!\n\nI hope you had a good year!\n\nYes, you could add me permission for that Docker Hub thing, but you can stay there too, of course. :smile:\n\nYou should be in the 'owners' group/team now. Please, let me know if you can edit anything, e.g. https://hub.docker.com/u/filebrowser/dashboard/settings/\nAbout publish.sh, I think that a single line needs to be changed, because build.sh will not exists anymore when this PR is merged: https://github.com/filebrowser/filebrowser/blob/master/publish.sh#L5 It is a somehow minor issue, but let's not oversee it.\n\nHmm, why would we?\n\nThere are some use cases where having a shell in the container is desirable. See https://github.com/filebrowser/filebrowser/pull/441#issuecomment-400317290 and https://github.com/filebrowser/filebrowser/pull/441#issuecomment-400473947. I would go with the last option: provide a single scratch image and document how to create others. But I am open to any discussion about it.\n\nYes, but sometimes there are some problems compiling for some combinations of PLATFORM+ARM.\n\nThen, let's keep it apart for now. We can follow the discussion about building ARM variants in #440. Should you have any specific information about those conflicts/problems, please add references there.\n\nThe node_modules are set on the package.json so they are fixed. For Go, we have Gopkg.\n\nFor node_modules, I was considering to add yarn.lock to the frontend repo. Just as we do with Gopkg.lock for the backend.\nAlso, see the previous comment about getting the go dep binary:\n\ndockerfiles/dev relies on the GitHub API to retrieve the latest version of dep. If it is triggered frequently, it might hit the rate limit: developer.github.com/v3/rate_limit.... > @1138-4EB just noticed you ignored rice-box. That is something I really wanted to do. Although, what is holding me back is Caddy: it can't build the dependencies on the fly on the build server.\n\nYes, I did it because in the current proposed scheme the frontend is built in a travis stage (test) and, on releases, it is cached to be used in a different stage (release). As a result, goreleaser produced an error because it considered the repo to be in a dirty state.\nIt is possible to automatically push that rice-box to the new caddy repo, by using a deployment key. This would be desirable as it would allow to automatically trigger a build in caddy each time we push tag a to filebrowser. However, I need some more info about the caddy build server. Could you, please, point me in the right direction?\n\nBefore merging this PR, we should create a repository which holds the content of caddy folder and on each release, it must contain the most update rice-box possible.\n\nI already moved the content to the new caddy repo (locally). But I'll wait until I have a clear understanding of the big picture before pushing it.. I am thinking that a workaround for the caddy/rice-box thing can be to activate travis for the frontend too, and have the artifacts (a tarball of the 'static' folder and the rice-box file) deployed to GitHub Releases. But I don't know if caddy supports fetching files that are not in the git repo. Indeed, this problem affects not only rice-box, but filebrowser as a whole. If we can't add filebrowser as a submodule of caddy, it might be hard to update the plugin with each release. Any thoughts?. @benitogf, mostly because of npm/npm#18434 and npm/npm#17621. But I am not a js developer so I might be outdated. Any strong feeling to prefer npm?. @hacdias the last test I did was putting rice-box.goin filebrowser/caddy, instead of saving it in filebrowser/filebrowser. In the last proposed change for publish.sh (which is renamed (to build/release.sh](https://github.com/filebrowser/filebrowser/blob/develop/build/release.sh) in branch develop), the release procedure is as follows:\n\nManually tag the commit that is to be used in filebrowser/frontend.\nExecute release.sh, which will:\nCheck if the tag exists in filebrowser/frontend.\nUpdate the submodule to the tag.\nReplace untracked with the semver/tag in filebrowser.go (through sed).\nTag filebrowser/filebrowser.\nRevert the semver/tag in change in filebrowser.go and commit again.\nWhen the tag in filebrowser/filebrowser is pushed, travis-ci detects it and:\nThe frontend is built, thus rice-box.go is created.\nAll the releases are built and published with goreleaser.\nA single image is created, tagged/named twice and published with goreleaser.\n[HERE]\n\nTherefore we could add a last step in [HERE], that automatically adds a commit on top of filebrowser/caddy in order to add rice-box.go and do any other compatibility task.\nHowever, I have not been able to build filebrowser/caddy, being filebrowser/filebrowser a dependency of it (even without removing rice-box.go). Should you help me achieve this, I think that the next steps are quite straightforward.\nNote: once we get filebrowser/caddy and filebrowser/filebrowser decoupled, the semver/tag replacements with sed could be removed from release.sh and executed in travis.. @benitogf, as long as NPM 6 works as expected, I don't mind. Are the populated node_modules folders compatible? Is it possible to use both of them interchangeably?\nEdit: the proposed development image is based on golang:alpine, which is itself based on alpine. The latest nodejs version available now is 8.11.3, and npm 5.6.0. Moreover, in the official docker image for nodejs 10.6.0 based on alpine, yarn is still being installed:\n\nhttps://hub.docker.com/_/node/\nhttps://github.com/nodejs/docker-node/tree/master/10/alpine\n\nTherefore, should both tools not be compatible, as long as this PR is concerned, I think that we should wait until npm 6.x is introduced in alpine, before going back to npm.\nAlternatively, if the relevant content/layers from image node:alpine could be added to image golang:alpine, we would probably have npm 6.x available now.. @hacdias, the problem I had was due to conflicting vendor folders. If filebrowser/caddy is just a subdir of filebrowser/filebrowser, there is a single vendoring space. However, if it is split and dependencies are fetched for both of them, when you try to build/run filebrowser/caddy it complains.\nThis is my scheme:\n\nfilebrowser-hub/\ncaddy/\n.git/\n...\n\n\ncommunity/\n.git/\n...\n\n\nfilebrowser/\n.git/\nfrontend/\n.git/\n...\n...\n\n\nlogo/\n.git/\n...\n\n\n\nI start a golang:alpine container from filebrowser-hub:\nbash\ndocker run --rm -it \\\n  -v $(pwd):/go/src/github.com/filebrowser \\\n  -w /go/src/github.com/filebrowser/caddy/filemanager \\\n  golang:alpine sh\nJust apk add git and run go get ./...:\n``` bash\n/go/src/github.com/filebrowser/caddy/filemanager # apk add git\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.7/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.7/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing libssh2 (1.8.0-r2)\n(2/5) Installing libcurl (7.60.0-r1)\n(3/5) Installing expat (2.2.5-r0)\n(4/5) Installing pcre2 (10.30-r0)\n(5/5) Installing git (2.15.2-r0)\nExecuting busybox-1.27.2-r11.trigger\nOK: 19 MiB in 19 packages\n/go/src/github.com/filebrowser/caddy/filemanager # go get ./...\ngithub.com/filebrowser/caddy/parser\n../parser/parser.go:251:32: cannot use db (type \"github.com/asdine/storm\".DB) as type \"github.com/filebrowser/filebrowser/vendor/github.com/asdine/storm\".DB in field value\n../parser/parser.go:252:31: cannot use db (type \"github.com/asdine/storm\".DB) as type \"github.com/filebrowser/filebrowser/vendor/github.com/asdine/storm\".DB in field value\n../parser/parser.go:253:31: cannot use db (type \"github.com/asdine/storm\".DB) as type \"github.com/filebrowser/filebrowser/vendor/github.com/asdine/storm\".DB in field value\n```\nI can remove the vendor folder from filebrowser/filebrowser/vendor and it will then get dependencies successfully and also build:\nbash\n/go/src/github.com/filebrowser/caddy/filemanager # rm -rf ../../filebrowser/vendor/\n/go/src/github.com/filebrowser/caddy/filemanager # go get ./...\n/go/src/github.com/filebrowser/caddy/filemanager # go build filemanager.go\n/go/src/github.com/filebrowser/caddy/filemanager # ls /go/pkg/linux_amd64/github.com/filebrowser/caddy/\nfilemanager.a\nBut I don't know how to test that. Note that the library was built without building filebrowser itself. Indeed, rice-box does not exist, because the checked out version is master in my fork.\nI pushed the modified sources I am using to the develop branch in filebrowser/caddy, so that you can reproduce the setup I explained.. @hacdias, @mholt, my main doubt is not about vendor folders. Although not ideal, we can work around it by removing all of them and using \"absolute\" dependencies only. What I need to understand is how much of filemanager/filebrowser is required in order to build the plugin for Caddy. It seems that the plugin can be built even with an incomplete filebrowser codebase:\n\nhttps://github.com/filebrowser/filebrowser/pull/399#issuecomment-403868140\nNote that the library was built without building filebrowser itself. Indeed, rice-box does not exist, because the checked out version is master in my fork.\n\n/go/src/github.com/filebrowser/caddy/filemanager # go build filemanager.go\n/go/src/github.com/filebrowser/caddy/filemanager # ls /go/pkg/linux_amd64/github.com/filebrowser/caddy/\nfilemanager.a\nDoes this mean that Caddy builds the plugin and filebrowser separately? Or should we expect filebrowser to be completely embedded into Caddy?\nThe former would be ideal for us, since we would only need to instruct the Caddy builder to build filebrowser/caddy/filemanager and get the latest released binary from filebrowser/filebrowser. . I think I found a solution!\ndocker run --rm -itw /go/src/github.com/filebrowser -p 2015:2015 golang:alpine sh -c \"$(cat test.sh)\"\nwhere test.sh is:\n``` bash\napk update\napk add git vim\ngit clone --recurse-submodules https://github.com/filebrowser/filebrowser\nrm -rf filebrowser/caddy\ngit clone https://github.com/filebrowser/caddy\ncd caddy\ngo get -v ./...\nmv ../filebrowser/rice-box.go ./filemanager/\nsed -i.bak 's#package filebrowser#package filemanager#' ./filemanager/rice-box.go\ngo get -v github.com/mholt/caddy/caddy\ngo get -v github.com/caddyserver/builds\ncd /go/src/github.com/mholt/caddy/caddy\ngo get -v ./...\nsed -i.bak 's#// This is where other plugins get plugged in (imported)#_ \"github.com/filebrowser/caddy/filemanager\"#' caddymain/run.go\ngo run build.go\necho \"Hello world!\" > index.html\n./caddy -host localhost filemanager\n```\nTherefore, I think we can safely remove subdir caddy and rice-box.go from this repo, as long as rice-box.go is ensured to exist in filebrowser/caddy/filemanager. Now we need to decide how to update it when a new rice-box is built in travis:\n\nUse a encrypted deploy key to update the file and create a commit in filebrowser/caddy. This is potentially dangerous, as we are giving travis write access to that repo. We can push it to a different branch. E.g., we keep the development related commits in develop and master is where the rice-box.go is added.\nDeploy it to GitHub Releases of filebrowser/frontend. In order to support this, build.go in mholt/caddy/caddy should support copying the file at compile time.. > I think the first solution is the best: a commit to a branch and create a Pull Request automatically. We'd just need to approve it.\n\nAFAIK, that's not possible. The scope of 'Deploy keys' is the repository. These can be read-only or read/write, as if it was any other contributor/admin. There is no option to allow writing to a single branch.\nMoreover, I don't know how to automatically create a PR. What I propose is to create a pair of SSH keys locally, upload the public one to GitHub (settings of repo filebrowser/caddy); then, encrypt the private one and add it to the codebase in filebrowser/filebrowser; last, remove the created pair so that it does not exist unencrypted anymore. I don know if this SSH key would allow to create a PR. I suppose that it can be done with GitHub's API, but I believe that it requires a different workflow (such as a personal access token).\nIn order to achieve the behaviour you suggest, we would need to use two separate repos. The sources would be hosted in filebrowser/caddy and that's where the development would be done. Then, we would push to a different one, say filebrowser/filemanager. The latter would be a deployment-only repo (without issues or PRs), which means that we don't mind if the content is messed up, because we can always remove it without losing any relevant data.\nSee https://developer.github.com/v3/guides/managing-deploy-keys/#deploy-keys\n\nWe just need to make sure that key isn't able to commit to master to prevent someone to change Travis.yml and make a change on a pull request.\n\nThis is supposed not to be a problem, because encrypted variables and files do not work for PRs from forks. The risk would be maintainers not being cautious. We should take care when accepting PRs that change the build procedure (i.e. what is executed in travis). See:\n\nhttps://docs.travis-ci.com/user/encrypting-files/\nhttps://github.com/1138-4EB/ghdl-io/blob/master/travis/travis-enc-deploy.sh\nhttps://docs.travis-ci.com/user/pull-requests#Pull-Requests-and-Security-Restrictions\n\nNote that this is slightly different compared to how we encrypt docker credentials:\n\nhttps://docs.travis-ci.com/user/environment-variables/#defining-encrypted-variables-in-travisyml\n\nHowever, the risks concerning PRs and possibly wanted pushes are the same.\n\nThat for Filemanager plugin. WHat about Hugo and Jekyll? Would we need to replicate the file on three directories?\n\nI have never used those plugins, so I don't know what's the interface. Do they rely on the GUI of filebrowser or do they just execute commands after an API request?. > What if we create a user, like, FilebrowserBot, which has read and write access except to master?\nThat's a good idea. Indeed, it seems that Machine users are meant just for that. We can combine it with branch restrictions in order to let the bot write to a single branch. Furthermore, should we create it, we could use it for hub.docker.com too.\nHowever, we need an e-mail account in order to register the bot both in GitHub and in Docker. @hacdias can you please handle it?\n\nThe other plugins are basically the same as filemanager's but with other functionalities enabled so they also need the assets to run.\n\nI made some additional tests:\nFirst, I added the rice-box in /go/src/github.com/mholt/caddy/caddy, by slightly modifying the script I showed above. This works: fb_caddy.sh.txt\nThen, I did the same, but plugging in the three plugins (filemanager, hugo and jekyll): fb_caddy_all.sh.txt. It is properly compiled too. Could you please check if the functionality is correct?\nNote that, even though it might work, it is not a desirable solution, because we cannot push to mholt/caddy. It is just a test to verify that it doesn't really matter in which package we add the rice-box. It is only required for it to be compiled once into the binary.\nI also tried adding it three times, once in each of the plugins: fb_caddy_all_three.sh.txt. This does not work. The same content is embedded three times. Therefore, it compiles ok, but it fails at runtime:\n`` bash\npanic: EmbeddedBox with name./node_modules/filebrowser-frontend/dist` exists already\ngoroutine 1 [running]:\ngithub.com/GeertJohan/go.rice/embedded.RegisterEmbeddedBox(0x1078559, 0x28, 0xc4201fda80)\n    /go/src/github.com/GeertJohan/go.rice/embedded/embedded.go:77 +0x18d\ngithub.com/filebrowser/caddy/hugo.init.1()\n    /go/src/github.com/filebrowser/caddy/hugo/rice-box.go:221 +0x224b\n```\nSo, last, I tried adding the rice-box to filebrowser/caddy/parser: \nfb_caddy_all_parser.sh.txt. It is properly compiled and there is no error at runtime. I think that we should go with this solution. Do you agree?\n. Just a note to remember enabling gosec with excluded options (those related to using MD5):\n\nhttps://github.com/securego/gosec#selecting-rules\nhttps://github.com/securego/gosec/issues/148#issuecomment-355534317\n\nNeed to check how to provide options in .gometalinter.json.. @hacdias branch develop in this repo is a single commit ahead of branch master in my fork. So, it is/was meant for that. Anyway, I will:\n\nApply the commit on top of chore/build.\nRemove develop and master from my fork.\nPush branch img-dev from my fork to here as chore/devenv.\n\nThen, I will follow with encrypting the credentials of the bot, and have Travis properly set up.. I am using a windows box, but git should automatically handle it. Indeed, I am trying to change it, but as soon as I git add the files with LF line endings, they are changed and nothing is staged.\n\nNote that this only happens with markdown files, not with go sources. However, I used the same machine/context to submit both commits. Furthermore, with --ignore-space-change differences are properly shown.. @hacdias, I think that these markdown files have CRLF line endings, and I changed them to LF. This is the commit that changed previous LF endings to CRLF (oct 30): https://github.com/filebrowser/filebrowser/commit/99c8c92c6c6d1225380dbbfc5b61d4263a129156#diff-04c6e90faac2675aa89e2176d2eec7d8. 1. Please open a separate issue.\n2. Please open a separate issue.\n3. Yes. See https://github.com/filebrowser/filebrowser/issues/472#issuecomment-408590576.\n4. See #419.\n5. Please open a separate issue.\n6. See #208. Also, add a separate issue to suggest adding instructions.. @chenlm03 in the latest releases GOARM is used to produce multiple binaries for different ARM versions. Could you please try https://github.com/filebrowser/filebrowser/releases/download/v1.9.0/linux-armv7-filebrowser.tar.gz and let us know if it works for you?. @1kevin335200 did you try the armv5 version as suggested in golang/go#18483?. Great! I'm closing this, as it seems to be an issue with that specific model.. @wmjan did you want to request something as #244? If so, could you please close this issue?. Closed in favour of filebrowser/filebrowser.github.io#5.. Closing in favour of filebrowser/frontend#24.. @timonss the new logo is added to the master branch now. See https://github.com/filebrowser/filebrowser , https://github.com/filebrowser/filebrowser/tree/master/logo and #444.\nThanks for your contribution!. @DeAlexPesh since we are using git as a version control system, you can easily keep the old version. Just make a fork, and remove the commits you don't like. You can also add your own if you prefer (related to #420).. @DeAlexPesh I both agree with you and prefer the new design at the same time. The previous one was too simple for me and I considered it to be more of a placeholder than an actual logo that identifies the project uniquely. I think that the one we have now is an attractive logo for pads, smartphones, etc. (see filebrowser/frontend#9), even though it can be tricky as a favicon/icon.\nAnyway, as I said, I believe that #420 is the way to go, so that the base app can be tailored to different contexts. Indeed, I just saw that @hacdias created filebrowser/logo, which I believe is meant to push in that direction.. - https://en.wikipedia.org/wiki/Terminal_multiplexer\n- https://en.wikipedia.org/wiki/GNU_Screen. I'm closing this because multiple alternatives have already been given. Feel free to continue the discussion.. @hacdias, according to the README of go.rice, we can take advantage of the order of precedence to implement this. The default build embeds the logo and favicons as go source (rice-box.go). However, should these be left out and should we distribute them either as an appended ZIP or as a sibling dir, it should find them as well.\nAs a first step, we can move the logo and favicons from filebrowser/frontend to filebrowser/logo, and have them copied before building the frontend. This would allow any user to clone filebrowser/logo and modify the images. Then, the build process in #399 should work.\nFurthermore, we can split rice-box.go to rice-box.go and rice-logo.box, and provide two builds: one with rice-box.goonly and a second one with both of them. The latter would be equal to the current release.\nHowever, we still need to come up with a scheme that lets us merge #399 without breaking the integration with the caddy build server.. Hi @bonny1992, can you please open new separate issues for your requests?. @Benoit-Julien could please provide some more info so that we can reproduce the error? What messages do you get either in the browser console or in the terminal where filebrowser/caddy are being executed? Is the hard drive mounted in a dir inside the scope (i.e. /home/julien)?. Might this be closed in favour of #257?. @juan11perez, I think that the main issue here is not to save the password raw. Although it is not relevant for \"home users\", it seems that some users are expecting to use filebrowser as part of a (probably paid) service for third parties. Therefore, we should be careful about how we implement it so that we don't introduce a false feeling of security. Alternatively, a naive implementation is possible, but we should clearly state that it is not save for production.\nPersonally, I think that we should set --no-auth by default until we can ensure a save approach. Doing so would require a testsuite to evaluate it.. @juan11perez, there is no need to apologise at all. Your proposal is reasonable. I just wanted to point out the difference between doing something \"less unsecure\" or doing it \"really secure\".\nUnfortunately, @hacdias must be busy with his uni exams. Let's wait until he can sit down and think about this.\nMeanwhile, it'd be useful if you could partially document your approach in the referred issue. I think that offloading credential management to an external layer (reverse proxy) is a valid workaround and it can help to keep filebrowser simple. But I am not sure about the implications that such a solution would have in granularity.\nAnyway, if you want a solution, even though it might be not ideal, you can check https://github.com/filebrowser/filebrowser/issues/257#issuecomment-397765726 There is an existing proposal that uses environment variables.. There is an ongoing discussion about the build flow in #399.. @airtonix, do you have any working example of building an ARM image in travis or any other ci platform? If so, I'd be glad to accept a PR on top of #399.\nhttps://goreleaser.com/customization/#Docker, goreleaser/goreleaser#707 and goreleaser/goreleaser#530.. @rhyst, go dep is not used anymore. No vendoring solution is being used ATM. See https://github.com/filebrowser/filebrowser/pull/496#issuecomment-414877673. See also (#450):\n\nExtend goreleaser to build multiarch images. See goreleaser/goreleaser#707 and goreleaser/goreleaser#530.. @tokvv is changing from scratch to ubuntu compulsory? That seems to be a major change, not explicitly related to this issue. If so, we should probably discuss it in #300.. @tokvv, yes, please. I agree that in some contexts it can be useful to have a shell available (e.g. 1138-4EB/hwd-ide). However, I think that choosing Ubuntu to be the only one is a strong decision.\n\nOn the one hand, if a single one is offered I'd go with either Alpine or Deb\u00edan Buster Slim.\nOn the other hand, should we want to offer multiple ready-to-use images I'd extend #399 to provide five flavours: Scratch, Alpine, Deb\u00edan, Ubuntu and Fedora. See http://travis-ci.com/1138-4EB/filebrowser\nAnyway, I think that the most sensible approach is to provide the scratch version only and add an explanation in the docs about how to add file browser itself to any image with COPY --from=filebrowser/filebrowser. Or see https://github.com/1138-4EB/hwd-ide/blob/develop/filebrowser/Dockerfile. @tokvv, thanks. Unfortunately, I don't have write permissions. Let's ping @hacdias and @Equim-chan.. @DeAlexPesh , please have a look at #399 and feel free to join the discussion. We are duplicating work here.. @ifengchao any feedback about this? Should we keep the issue open?. Hi @gocpp , I'm glad to see that you reconsidered it and decided to reopen this issue. I'm replying to let you know that it is being read and that it is being taken as seriously as many other open issues in the project. However, as you may know, this project was started some years ago by a quite young student who started uni recently. No one is being paid to develop it and no one has enough free time to reply in three (weekend) days. Then, we need to be considerate with each other.\nOn my part, I'm trying my best to reorganize the content after the migration to a GitHub organization, in order to make it easier for new users to contribute (see filebrowser/community#1, #399 and #450). Hope it helps get some (wo)manpower involved in it!\nRegretfully, both my expertise and my main interest (#302) in this project are quite far from this specific issue. I use Hugo intensively for offline site generation, but not as a server itself; and I don't have a clear picture of how it should be handled in the context of File Browser (#310).\nSo, could please help me and any possible contributor to better understand your use case by providing reproducible steps to reach the limitations you found? E.g. by providing either the configuration files or the arguments you use to run filebrowser.\nAbout your second issue/bug, if I don't get it wrong you expect scopes to be recursive but they are not. Is it? If so, could you please open a new issue just asking that? I think that it might be easier to tackle it.. > (until now I have done most of my developing in C and C++)\nThen, I'm sure you'll pick the syntax very easily. It is so close to C. Not so much to C++. You can have a look at this preliminary version of the docs I wrote this weekend to welcome new contributors: https://github.com/1138-4EB/filebrowser-community/blob/patch-1/contributing.md If you want to go fast, just glance over https://tour.golang.org/ and then find your own way at https://github.com/golang/go/wiki/Learn This might also be interesting to you: http://crypto.stanford.edu/~blynn/c2go/\nOf course, let us know about the issues you might find while getting contact with either golang or Vue.js, as that will help us improve the docs.\n\nPerhaps I should indeed open a new issue for the second point.\n\nYes, please. Just cut it from here and paste it in a new thread. I always use filebrowser in --no-auth mode with a single user. But I'll definitely give it a try.. Also suggested in https://github.com/filebrowser/filebrowser/issues/314#issue-284780299.. Closing in favour of #419.. > @1138-4EB I dropped Travis because it was a lot slower than Circle and in that time it was easier to get the different phases on Circle.\nI expected that. Indeed, CircleCI should still be much faster than Travis, because the latter needs to spin up a \"virtual machine\" for each stage and then run docker on top of it, while CircleCI is designed to run docker images directly.\nHowever, I think that Travis is offering a better solution from the integration point of view:\n\nStages provide a similar functionality to the phases in CircleCI.\nBeing able to cache results from one stage to the next allows to build the frontend (rice-box) just once and share it with all the artifacts.\nChecks integration thanks to moving to GitHub Apps is a very interesting feature. See https://blog.travis-ci.com/2018-05-07-announcing-support-for-github-checks-api-on-travis-ci-com and e.g. https://github.com/Paebbels/JSON-for-VHDL/pull/8/checks\nI feel more comfortable with the Travis-GitHub Releases integration than having to create a GitHub API token for goreleaser to push artifacts.\n\nBTW, I am setting goreleaser to build docker images with it: https://goreleaser.com/customization/#Docker It seems that, in the very near future, we will be able to create multiarch images: goreleaser/goreleaser#530 So we might close #440 with #399.\nAnyway, should anyone know how to integrate everything in a CircleCI config which is equivalent to the .travis.yml I am writing in #399, please let me know.. @hacdias just a quick update to let you know that this is almost ready. The only missing part is the Caddy build server issue. I registered, but there is so little info about the build process. So merging #399 will have to wait until we can find a solution.. Not added by default. You need to add them to the frontend and build filebrowser yourself. See https://github.com/1138-4EB/filebrowser-frontend/commit/52b25589b2299e337279641cb02029a6900996ed. Hi @karim2001! Please, have a look at #411 and #418.\nAlso, if you use the docker image and launch a container with --restart always, every time the docker daemon is started the container will be started too. To have the docker daemon started on startup, you can enable it with sudo systemctl enable docker. For further info: https://docs.docker.com/config/daemon/systemd/. Closed in favour of filebrowser/filebrowser.github.io#5.. Please, provide as much info as you can:\n\nIf yes, when have you done that?\nWhat did you see instead (give full error messages and/or log)? Hint: either show the browser console or a screenshot.\n\nHow can someone who is starting from scratch reproduce this behaviour as minimally as possible?. @GRiverone can you reproduce this issue with the latest release?. Hello @GRiverone! This seems to be a configuration problem with nginx, not directly related to File Browser. It might be related to https://stackoverflow.com/questions/2056124/nginx-client-max-body-size-has-no-effect. Try $wget http://share.getpocket.in/25MB.test. See filebrowser/frontend#7.. It seems that the issue is solved, so I'm closing this. Feel free to open a new one to ask about how to configure nginx with filebrowser.. @wistarine, please, provide some more information about your setup and the issue you are facing.. @VLEFF Can we close this issue now that filebrowser/filebrowser#468 and filebrowser/frontend#18 are merged?. @mozzbozz , @EasyChris thanks for your report. I pushed a fix and it will be available as soon as it is merged and travis builds it.. @mozzbozz , @EasyChris this should be fixed now. Can you please try the latest image at https://hub.docker.com/r/filebrowser/filebrowser/tags/ and let us know if it works for you?. If I don't get it wrong, you are trying to:\n\n\nExecute filebrowser from a release binary.\n\nAccess filebrowser frontend in a browser.\nOpen a file in filebrowser.\nEdit the file and save it.\nExecute gofmt -w *.go in the 'Search box' of filebrowser, in order to have the edited file formatted.\n\nIf so, you should:\n\nEnable command gofmt in the config, not gofmt -w *.go.\nThen, write $gofmt -w *.go in the search box in order to execute it after you edited the file.\n\nPlease, let us know if this solves your issue. Should I misunderstood it, please reword the issue.\n@hacdias, I think that commands composed of multiple words are not supported, so this might be the underlying issue that produces the 'internal server error'. Can you confirm it? If so, do we want to add support for it? I.e., do we want to allow enabling the usage of a subset of the options available for a executable?. I can reproduce it. $gofmt -w *.go in the search box fails because *.go is not handled properly. Indeed, the internal server error is related to this:\n2018/07/29 19:46:37 [INFO] Blocking Command:\"gofmt -w *.txt\"\nstat *.txt: no such file or directory\n2018/07/29 19:46:37 /main.txt: 500 Internal Server Error\n2018/07/29 19:46:37 exit status 2\n@hacdias, should fielpath.Glob(pattern string) be used?\nI can also reproduce the limitation to edit the content of a .go file. This is a know issue. See filebrowser/filebrowser#358.. > So i have no idea how else to explain.\nCould you, please, provide the exact commands you are using to run both traefik and filebrowser. It'd be great if you could reproduce it in play-with-docker.\n\nMaybe it has something to do with the webserver from caddy itself and their setup?\n\nIt seems that you are not using filebrowser on its own, but rather using it with caddy, is it?. Reopening this and assigning it to me, just to remember adding a note to let users know which docker image to use.. Closing this because no info is provided. Please, reply to the questions in the template in order to let us know the context.. If I don't get it wrong, what you are suggesting would be potentially dangerous as it should only be used through a properly configured proxy. If not, any user providing any X-Forwarded-User will have access. Am I wrong?\nNevertheless, I think that this is an interesting feature. Should you be willing to contribute a PR to implement this, I suggest to please:\n\nBe explicit about the risk in the codebase.\nMake it default to be disabled.\nAdd a message/log when filebrowser starts in this mode.\nConsider adding an example configuration for a proxy such as NGINX or Traefik (or the one you are actually using).\n\nShould it be possible to use any mechanism that allows filebrowser to check whether it is being executed behind a (known) proxy, that'd be great. But I don't think this is compulsory.. > That would be the plan :) My question here would be: How do you want the options to look like? Should I create a new option \"proxy-auth\" in parallel to \"no-auth\" or should there be something like \"auth...\nAre these options mutually exclusive? no-auth is exclusive for sure, so I think we should keep it as a separate flag. Then, auth (which enables multi-user support) should have two possible values: default (current implementation) or proxy.\nHowever, should default and proxy be compatible (i.e. requests coming from a known proxy are accepted but any other requires a password), then auth should not exists and proxy should be added only. In this case, if no-auth and proxy are enabled at the same time, proxy would act as frontend to provide access to a single common instance to multiple users.\nAnyway, let's hear what @hacdias and @Equim-chan think about this.\n\nI would say that it is not the best idea to simply provide snippets that can be copy & pasted by people who do not know what they are doing.\n\nSure. I agree. I think that the best solution is to provide enough info so that a user that has already set up a proxy with access to a LDAP database (or any other source of credentials) finds just the additional references and snippets required to extend it to use filebrowser. This is why I mentioned a couple of common proxies. A new user with less experience will have to read the basic and intermediate references we would provide. I.e., it is perfectly ok to link to the NGINX manual and a few Stack Exchange Q&As.\n\nWould it be fine for you to simply describe the idea/concept behind this feature and do a PR for: filebrowser/filebrowser.github.io after the feature is available ?\n\nIt is perfectly ok. Indeed, this issue and the comment in the PR are enough to explain the idea/concept. Then, adding a slightly longer and more specific explanation can be done either in filebrowser.github.io or in filebrowser/community. I.e., the modifications in the options/flags should be changed in filebrowser.github.io. But references and comments about the risks and suggestions for users implementing it can be provided in the community repo (see https://github.com/filebrowser/community/pull/1/files). In the end, the sources of both repos are markdown, so it is easy to reorganize the content once it is written.\n\nThanks and best regards\n\nThanks to you! Please, let us know if you need any further information about how to build/test the app.. @hacdias would it be possible to bind some keyboard shortcut (which is unused in browsers) to this specific feature? E.g. Ctrl+Alt+H as in winscp.\nOn the one hand, settings are not accessible when notAuth is set to true. On the other hand, I think that it is desirable to be able to change this fast. For example, when browsing a repo, it is handy to hide/show config files easily. On the whole, I think that hidding/showing dot files/folders should be a complement to (dis)allowing them.. > [@yurividal]\n\nGreat idea. Ctrl Alt H or Ctrl shift H would really be awesome.\n\nIn Firefox Ctrl+Shift+H opens the History in a new window. Does Ctrl+Alt+H trigger anything in your browser?. Related #355.. Right now there is no such branch strategy. Everything goes directly to master. Then, @hacdias decides when to build the frontend locally and bump the version.\nThere are some major changes being done in #399 and #450. Indeed, branch develop implements those issues. See corresponding documentation at https://github.com/filebrowser/community/pull/1/files.\nSorry about the misunderstanding. Hope it is easier to get it once we get those issues solved.. @hugomassing, caddy includes all the plugins at build time (see https://github.com/filebrowser/filebrowser/pull/399#issuecomment-407251536). I.e. the codebase of the plugins is embedded in caddy, because all of them are built together. Therefore, AFAIK the is no way to update only filebrowser, you need to rebuilt caddy. However, I think that each release is pushed to GitHub releases and Caddy builder at the same time, so if you update Caddy regurlarly you should get the latest version. Might we know a little more about the context? \n@yurividal mviereck/x11docker/blob/master/#L1018-L1147 does this with a bash script. We can take it as a reference. Let's write a list of desired features:\n\n[ ] In the frontend, check either GitHub releases or Docker Hub periodically and show a message if a new version is found. When automatic update is supported, add a button to the message.\nMake it optional and let the user configure the frequency.\n[ ] Make filebrowser aware of the context: standalone, in a container or as a caddy plugin.\n[ ] Function and handler (API) to:\nRetrieve a specific version or the latest from GitHub.\nStop filebrowser, remove it and start the retrieved version with the same config file and options.\nIf a docker image is being used, and if the requested version is available as a docker image, remove the container, retrieve the new one and start it with the same options.\nIf filebrowser is being used as a caddy plugin, either:\nDisable this feature.\nSuggest updating caddy.\n\n\n[ ] Add a button to the frontend (probably in the settings) to send a request. This should contain the desired target version.\nCurrently, if no-auth is used, settings are not available. This should be changed, in order to support the automatic update.\n\nThe first task should be quite straightforward. Automatically updating filebrowser standalone might require a bit of work. The docker option seems tricky.. @VLEFF running the script again should overwrite it with the latest version from https://github.com/filebrowser/filebrowser/releases/latest.\nAlternatively, the binary should be located in /usr/local/bin. So you can just replace it manually. Download the tarball for your arch from the link above, extract it and copy/move the file named filebrowser.. We can install the ca-certificates from the latest alpine image by using multi-stage builds:\n```\nFROM alpine:latest as certs\nRUN apk --no-cache --update upgrade && apk --no-cache add ca-certificates\nFROM scratch\nCOPY --from=certs /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt\n```. Just for completeness, this is related to #415.. @hugomassing, can you please let us know which version of filebrowser are you using (is it a release or you built your own), and provide the config file and the execution command. That will help us reproduce the issue. . It's ok. Let's try to find the breaking point. Can you try with the latest release standalone? Just download the binary for your platform, execute it (use the default credentials admin/admin), set the 'After upload' command and try to upload a file. Let us know what output you get, both in the terminal and in the browser console.. I just tried the following in a play-with-docker node:\nbash\ngit clone https://github.com/filebrowser/filebrowser\ncd filebrowser\ncurl -L https://github.com/filebrowser/filebrowser/releases/download/v1.9.0/linux-386-filebrowser.tar.gz | tar xvz\ndocker run --rm -itv $(pwd):/src -w /src -p 8000:8000 alpine sh -c \"apk add -U git && ./filebrowser -p 8000\"\nAnd it works as expected. However, I had to ensure that:\n\ngit is installed in the box where filebrowser is being executed.\ngit is an allowed command in filebrowser.\ngit status is executed in a git repo, i.e. the file is uploaded to a git repo.\n\nMoreover, the test produces no output when the file is uploaded. I then executed $git status in the search box in order to check it.\n@hugomassing can you please check if your setup fulfills those requirements?. Please, provide an example script where you try to setup the FILE environment. Also, let us know what command are you actually putting in the 'After upload' field. Last, please copy any output you get in the terminal. If it crashes, the backend will tell why it crashed.. Then, try something like bash -c \"echo $FILE\".. It's the same. The point here is that commands are executed in filebrowser/golang by calling the system directly. If you need them to be executed in a shell environment/context (because you are using shell features such as envvars), you need to tell it explicitly.\nOne option is to use bash -c \"your_commands\" or sh -c \"your_commands\" as commented above. For the specific command you ask about, you will need to either escape the double quotes inside the command, or combine single and double quotes.\nAnother option is to write a script:\n```\n!/bin/sh\nyour_commands\n```\nThen, ensure that it is executable with chmod +x script.sh. Last, call it directly (./script.sh) or add it to the PATH. In order to add it the PATH, you can move the script to a folder that is already in the list (such as /usr/bin or /usr/local/bin) or you can edit the PATH to add the location of the script (PATH=$PATH:<location> or PATH=$PATH:$(pwd)).\nHINT: you can try $bash -c \"your_commands\" or $script in the search box of filebrowser, instead of editing the settings and uploading a file every time. It will make testing the script easier.\nI'm closing this issue because the original problem/question is solved. But feel free to continue the conversation.. This seems to be due to a somehow buggy implementation of the case sensitiveness. While searching for File3 produces the result you describe, if you write File3 case:sensitive in the search box it will provide a valid result.. The fix by @hugomassing is merged in master now. It will be available in the next release. Meanwhile, you can try the latest docker image (filebrowser/filebrowser:latest).. Hi @maweck! Can you please:\n\nMake a separate PR for the first commit (the one that modifies the Dockerfile).\nReordering the COPY, WORKDIR and RUN dep lines is OK, but note that you removed the 'ca-certificates' in RUN apk. Your should keep that line untouched.\nRun gofmt -w ./ in the root of the repo, to have the style of all the go sources automatically fixed.. Overall LGTM. Please, have a look at the comments and let me know what you think.\n\nBTW, did you build and test it with your proxy setup? Since I cannot test it, it is important that you test and try to 'break' it.\n@hacdias, can you please have a look and let us know if you find any caveat?. As @francislavoie commented, this seems to be a configuration issue with Apache. See, e.g.:\n\nhttps://stackoverflow.com/questions/29792372/apache2-websockets-reverse-proxy-on-same-url\nhttps://stackoverflow.com/questions/27526281/websockets-and-apache-proxy-how-to-configure-mod-proxy-wstunnel\nhttps://forum.mattermost.org/t/solved-apache2-reverseproxy-with-websocket-https/437/3\n\n@anothergituser I'm closing this because it seems not to be an issue with filebrowser itself. However, feel free to continue the conversation and let us know if you could solve it.. Please, can you provide some more info about the context so that we can reproduce it?\n\nWhich image and version are you using?\nWhich is the base OS?\nWith 'volume' you mean a 'docker volume' or a host directory?\nAre links created from folders in the volume to folders in the volume or is any of them pointing outside?. Well, that's how docker works. It has nothing to do with filebrowser or the filebrowser image specifically.\n\nDocker cannot follow symlinks outside of the volumes that are actually mounted/bind in the container. You created a symlink from /var/www/tmp in the host to /tmp. But, when the container reads /srv/tmp -> /tmp, it tries to follow the link to /tmp inside the container, which is empty. In order to achieve what you want, you should also mount/bind /tmp in the host to /tmp inside the container. See this example:\nbash\n$ mkdir test-dir\n$ cd test-dir\n$ mkdir test\n$ mkdir srv\n$ echo \"Hello\" > test/hello.md\n$ echo \"World\" > srv/world.md\n$ cd test\n$ ln -s ../srv srv_mnt\n$ docker run --rm -itv $(pwd):/test alpine sh -c \"ls -la /test && ls -la /test/srv_mnt/\"\ntotal 12\ndrwxrwxr-x    2 1000     1000          4096 Aug  2 12:54 .\ndrwxr-xr-x    1 root     root          4096 Aug  2 12:54 ..\n-rw-rw-r--    1 1000     1000             6 Aug  2 12:54 hello.md\nlrwxrwxrwx    1 1000     1000             6 Aug  2 12:54 srv_mnt -> ../srv\ntotal 8\ndrwxr-xr-x    2 root     root          4096 Jul  5 14:47 .\ndrwxr-xr-x    1 root     root          4096 Aug  2 12:54 ..\n$ docker run --rm -itv $(pwd):/test -v $(pwd)/../srv:/srv alpine sh -c \"ls -la /test && ls -la /test/srv_mnt/\"\ntotal 12\ndrwxrwxr-x    2 1000     1000          4096 Aug  2 12:54 .\ndrwxr-xr-x    1 root     root          4096 Aug  2 12:55 ..\n-rw-rw-r--    1 1000     1000             6 Aug  2 12:54 hello.md\nlrwxrwxrwx    1 1000     1000             6 Aug  2 12:54 srv_mnt -> ../srv\ntotal 12\ndrwxrwxr-x    2 1000     1000          4096 Aug  2 12:54 .\ndrwxr-xr-x    1 root     root          4096 Aug  2 12:55 ..\n-rw-rw-r--    1 1000     1000             6 Aug  2 12:54 world.md\n$ cd ../..\n$ rm -rf test-dir. @vitaliy-kuzmich, filebrowser can be used in windows too, and docker images are based on scratch, so we cannot ensure that standard unix/linux users exists in the host.. Let's better review the items once v2 is ready for release. Most of them will be already achieved, but I am not sure about all of them.. According to alecthomas/gometalinter#505 gas was renamed to gosec. So, we don't need gas anymore.. @xor-gate, thanks for pointing it out. Would you like to propose a PR?\nI am concerned with passing arguments to gosec, because we do not run it directly, but through gomeralinter.\n\nhttps://github.com/filebrowser/filebrowser/blob/master/.gometalinter.json\n\nhttps://github.com/filebrowser/filebrowser/blob/master/build/run_gometalinter.sh. This is no longer an issue, because spf13/cobra is used now (#506).. The current tagging/CI proposal is as follows:\n\n\nSome maintainer/user needs to manually tag a commit in filebrowser/frontend (which is a submodule of filebrowser/filebrowser).\n\nThen, he/she executes build/release.sh in filebrowser/filebrowser:\nIf the requested tag/semver exists in frontend, it is checked out. If not, it exits.\nThe version is substituted in filebrowser/filebrowser/filebrowser.go.\nA commit is added.\nThe commit is tagged.\nThe tag is pushed.\n\nWhen a tag is pushed to filebrowser/filebrowser, if the test stage in travis-ci is successful, a deployment stage is executed. In this one, the release binaries are built with goreleaser and rice-box is pushed to filebrowser/caddy with build/push_ricebox.sh:\n\nA branch named update-rice-box is created from master.\nassets/rice-box.go is replaced.\nA commit is added.\nThe commit is tagged.\nThe branch and tag are pushed to filebrowser/caddy.\n\nA maintainer is required in order to merge/squash/rebase this single commit to master.\n\nFurthermore, a PR could be automatically created by using the GitHub REST API: https://developer.github.com/v3/pulls/#create-a-pull-request. However, although creating the PR is quite easy, handling the authentication seems to be not so straightforward: https://developer.github.com/v3/auth/. Therefore, I prefer to keep it apart from this PR.\n\n@hacdias, please let know if you find any pending work to be done here.. Sure. I'll check it now.\nEDIT\nIt is fixed. It was a quite stupid error on my side: https://github.com/travis-ci/travis-ci/issues/7641. @chinglinwen thanks for testing. This PR should not affect the execution of commands without wildcards. Can you, please, try $gofmt -w main.go and $gofmt -w ./* in the 'search' box?. > It shows This is a not supported command. for both commands provided above.\nThis means that you didn't add gofmt to the list of supported commands. You need to do it either in the config file or in the user settings. Please, do it and try again.\n\nAlso my primary concern is automatic format on save. not execute command to format on search box manually.\n\nIf/when it works in the search box, it should also work in the hook (automatic execution on save).. I think we could have three radio buttons next to the search box in the new version. Those three buttons would be 'Search', 'Execute' and 'Shell'. Then, the user can easily choose the behaviour. Furthermore, the template for option 'Shell' could be configurable in the settings. Equivalently, each hook command would have a select box to choose between 'Execute' and 'Shell'.. @hacdias, after the screenshot you posted, would it be feasible to integrate xtermjs or some alternative?\nSee e.g. freman/goterm.. I think that the most straighforward solution is to enable it only if a shell is available on the host (let it be a container, or a native host). I.e., a runtime check as the one in this PR.. Styling with xtermsjs should not be needed, it is bind to a div. What we should handle is the styling of the other commands, which we need to do anyway, don't we?. Mostly format. Even if we are just running a command, not an interactive shell, xtermjs will format the output. Plus, when we really want an interactive experience, the interface is already there. E.g. Visual Studio Code's Terminal and Output tabs (which are based on xtermsjs BTW).. I didn't know about it. It seems very useful. Especially because it allows us to have a common entrypoint to manage all the repositories in the project. Let's use it.\nHowever, I am still missing some messaging/chat service. Does waffle.io provide any or does it rely on slack? I have used both slack and gitter previously, and I think that the latter provides a better integration with GitHub. However, the difference might be negligible depending on how does waffle integrate with slack. Anyway, I'd be also ok with some IRC room.. While I was organizing the content in waffle.io, I realized that it is quite similar to GitHub projects. @hacdias, did you try this? What advantages does waffle offer?\nAlthough I cannot see the 'Projects' tab here (yet), I think you can enable it by creating one in https://github.com/filebrowser/filebrowser/projects.. It looks interesting, but I have to read about it. Anyway, Go 1.11 is in beta yet, so we have some margin until we use it. @Equim-chan, should you have any handy reference about this go.mod approach, I'll like to have a look at it. I.e., are these produced by golang/dep or is there a new tool?. According to https://github.com/golang/go/wiki/Modules#semantic-import-versioning, we might need to take some further action to support go.mod considering the upcoming breaking changes (see #497, #506).\nAlso I did need to update Gopkg.lock in a different branch (see #505).\n@Equim-chan could you please have a look at these?. Now #505 and #506 (including #497) are merged.\nOn the one hand, as commented in https://github.com/filebrowser/filebrowser/pull/506#issuecomment-414395143:\n\nI had problems with dep ensure -vendor-only. Then, I removed dep, Gopkg* and vendor, in order to use go mod. However, building with go mod is failing too. So, master does not use any vendoring/module tool right now. go get -v ./... is used.\n\nOn the other hand, should we create a new branch v2 and move all the commits after v1.10.0 there?\n\n\n@Equim-chan:\nThe biggest benefit, in my opinion, is that you don't need to put it under GOPATH any more.\n\nI tried this, but it seems that we need to add import comments to most of the sources for it to work.\nEDIT: we are using go1.11 now (#530), but new modules are not being used, because the project is mounted in he GOPATH inside the docker container, and GO111MODULE=on is unset.. This PR modifies caddy/parser/parser.go, which is removed in #492.\n\nIf #492 is merged first, these changes need to be done in filebrowser/caddy directly.\nIf this PR is merged first, changes need to be done in filebrowser/caddy as soon (or before) #492 is merged. . A thought before actually reviewing it: since this is a breaking change, and the filebrowser docker image is automatically updated now, should we publish a release (`v.1.10.0) before merging this? That would provide users, who cannot update their configs ATM, a stable image to use.\n\nNOTE: when we publish a release now, a single docker image is created and it is tagged twice (latest and $version). So, if we publish a release now and a breaking one in a few days, we will have one tagged v.1.10.0 and another one tagged v2.0.0 and latest.\nFurthermore, I don't know if the changes introduced in #485 should be considered breaking changes too.. @hacdias, can you please have a look at the comment about BindPFlags in #506?\nAlso, I don't know if you prefer to merge this PR on its own, or as part of #506, since it is almost ready too.. Hi @yaskor! We changed it yesterday and we have not updated all the docs and references yet. It is now available in hub.docker.com/r/filebrowser/filebrowser. However, note that it is a \"rolling\" image, until we push the first release with the new CI scheme.\nSee #450 and #492.\nBTW, we would be so glad if you told us where you found (now) invalid references, so that we can fix them.. @Emeryao, as commented above, it is already available at https://hub.docker.com/r/filebrowser/filebrowser/tags/. What do you mean?. Yes. We are about to do it (see https://github.com/filebrowser/filebrowser/pull/497#issuecomment-411584661). But travis is not detecting our pushes right now, so we need to wait (see https://github.com/filebrowser/filebrowser/pull/505#issuecomment-411622451 and https://www.traviscistatus.com/).. @Emeryao tag v1.10.0 is available now. See https://hub.docker.com/r/filebrowser/filebrowser/tags/. @maweck thanks a lot!\nRelated to other enhancements in progress, flags/parameters with dots (#497) cannot be set through envvars. A replacement command is required. So, I already merged this commit into #506, and added the replacement there. . @maweck this is now merged in master, along with other enhancements (#506). Please, let us know if you find any problem with it. Thanks again!. We'd like to have some PRs merged before publishing a new release (i.e. #494, #496, #515). However, there are two options for you to test it:\n\nExecute USE_DOCKER=\"true\" ./build/build_all.sh in the root of the repo. A filebrowser binary will be generated.\nUse the latest docker image: filebrowser/filebrowser:latest.\n\nIn both cases you only need docker installed locally. So, alternatively, you can do it in play-with-docker.\nSee https://github.com/filebrowser/community/blob/master/development.md.. I don't know why, this and some other PRs (#497, #504) are not being executed in travis.. @hacdias, could you have a look and probably try this? It should be functionally equivalent to what we have now. Note that #497 is already merged here.. @Equim-chan, related to https://github.com/filebrowser/filebrowser/pull/497#issuecomment-411954704, see the 'db upgrade' placeholder added here.. @hacdias, yes, it is ready for review. Notes:\n\nPlease, check Short and Long fields of (sub)commands (root.go, serve.go, db.go and version.go in subdir cli).\nfilebrowser/caddy is not updated, yet. So, it will break as soon as this PR is merged.\nI had problems with dep ensure -vendor-only. Then, I removed dep, Gopkg* and vendor, in order to use go mod (see #496). However, building with go mod is failing too. So, this PR does not use any vendoring/module tool right now. go get -v ./... is used.\nI created a new branch in filebrowser/docker-dev, in order to try Go 1.11. The corresponding image is available as filebrowser/dev:rc: https://hub.docker.com/r/filebrowser/dev/tags/\n\n@Equim-chan, could you please try to rebase #496 on top of this PR?. @yurividal, see e.g. #208. Also, please consider opening a new issue to discuss either documenting style mods (probably in filebrowser/community) (also suggested in #407) or enhancing filebrowser to support multiple 'default' CSS and a dropdown select for each user.. #506 is merged now :smile:.. Fixed. Thanks!. Hi @chenfeichen. As @DeyV explained, removing the DB should restart filebrowser. However, your browser cache might be trying to use the old credentials. Can you try either cleaning the cache or opening a tab in incognito mode?\nIf it does still not work, please let us know about your context: whether you are using the docker image or caddy, which version of filebrowser is it, the plaform, etc.\nFor completeness, overwriting the password either through the config file or with a CLI option is in the roadmap, but no ETA yet. See #489.. Please, use the provided template: https://github.com/filebrowser/filebrowser/issues/new?template=feature_request.md. Closing as duplicate of #442. Please, write any additional suggestion there.. Hi @thedonquixotic, is there any reason to run filebrowser in WSL and not in Windows directly?. @thedonquixotic I could make some test in a Windows box. Conclusions:\n\nIn order to use filebrowser in MSYS/MinGW, you should download the windows-amd64 build: https://github.com/filebrowser/filebrowser/releases/download/v1.10.0/windows-amd64-filebrowser.zip It works ok.\nIn order to use filebrowser in WSL, you should download the linux-amd64 build: https://github.com/filebrowser/filebrowser/releases/download/v1.10.0/linux-amd64-filebrowser.tar.gz\n\nWhen you run it in WSL, the program is properly started (as you can see in your logs, Listening on [::]:13512), but it then fails because of how the VM underneath handles memory allocation. I could reproduce it in both WSL Debian and WSL Ubuntu. However, if you terminate it (Ctrl+C) and start it again, it works ok on the second or third try. From there on, every time you start it no error is produced. Please, let me know if this behaviour is the same in your box. Unfortunately, I cannot further investigate the underlying issue, because it does not fail anymore.\nMoreover, in WSL the hard drives are mounted in (/mnt/c, /mnt/d, etc.). So, you can optionally work in those dirs, and/or use symlinks. I.e., run filebrowser from MSYS/MinGW/PowerShell and set the scope to D:/workdir. Then, symlink ~/workdir to /mnt/d/workdir in WSL. Note that this approach would let you use the Windows File Explorer too. However, I have not tried any of these.. Great! Since you already got it working, I'm closing this issue. Anyway, feel free to continue the conversation and add any further test results that you'd like to share.. @hugomassing, can you please rebase this PR on top of master? Note that http/websockets.go is now located at lib/http/websockets.go.. Thanks @hugomassing! :wave:\nJust a note for future contributions: I ran gofmt lib/http/websockets.go on top of your commit in order to remove some whitespaces.. Hi @ChrisGet, v1.10.0 was released on 2018-08-16, and this fix was added on 2018-08-22. So it will be available in the next release.\nIf you want to have it now, you need to build filebrowser from sources. See https://github.com/filebrowser/community, build and development.\nAlternatively, you can use docker image filebrowser/filebrowser:latest, which is always built with the latest commit in branch master. So, the fix should be already applied there.. > Sorry I found the documentation. I'll try the docker method. Thanks.\nLet us know if you have any problem with it. The image should be automatically downloaded, so you just need to run a container.\n\nDo you have any idea when the next release will be published?\n\nThat is actually hard to reply at now. If you have a look at https://github.com/filebrowser/filebrowser/commits/master, you will see that, indeed, we released v1.10.0 a month ago because we were going to introduce some breaking changes (#506). Therefore, the next release should be v2.0.0, according to https://semver.org/. However, golang just released version 1.11 (#530), which introduces some changes about how packages/dependencies are handled: https://github.com/golang/go/wiki/Modules#semantic-import-versioning:\n\n(...) In contrast, a package that has opted in to modules must include the major version in the import path for any imported v2+ modules)\nThere are two ways to release a v2 or higher module version. Using the example of creating a v2.0.0 release, the two options are:\n- Update the go.mod file to include a /v2 at the end of the module path. Tag the release with v2.0.0.\n   - To avoid confusion with this approach, consider putting the v2.. commits on a separate v2 branch.\n   - If instead you have been previously releasing on master and would prefer to tag v2.0.0 on master, that is a viable option, but consider creating a v1 branch for any future v1 bug fixes.\n- Alternatively, create a new v2 subdirectory (e.g., my/module/v2) and place a new go.mod file in that subdirectory. The module path must end with /v2. Copy or move the code into the v2 subdirectory. Tag the release with v2.0.0.\n   - This provides greater backwards compatibility. In particular, Go versions older than 1.9.7 and 1.10.3 are also able to properly consume and build a v2 or higher module created using this approach.\n\nThis is yet to be solved in #496.\nAt the same time #532, so it is difficult to know when will other breaking changes be done.\nMeanwhile, we might cherry-pick some commits after v1.10.0 (#508, #514, this and #531) and either:\n\nApply them on top of tag v1.10.0 as hotfixes (v1.10.1).\nRebase/reorder master branch and tag/publish a new release (v1.10.1) just before the breaking changes.\n\nThe first option is not desirable, because we would have a bunch of duplicated commits, really close to each other. But, the second one requires to rebase the master branch.\n@hacdias , @Equim-chan , any ideas?. > How would we do the first one?\nWe can either cherry-pick or:\n``` bash\ngit checkout -b tmp origin/master\ngit rebase -i v1.10.0\nRemove the commits we don't want to keep in v1.10.1.\ngit tag v1.10.1\ngit checkout master\ngit branch -D tmp\ngit push origin v.1.10.1\n``. Thanks for reporting @yurividal! According to https://github.com/filebrowser/filebrowser.github.io/blob/master/get.sh#L53-L65,uname -m` is used to detect the arch. Can you please execute it in the RPi and tell us which is the output?. @yurividal can you please try https://raw.githubusercontent.com/filebrowser/filebrowser.github.io/e921a287e71f54fffd87a9db60201602d7380c4d/get.sh ?. @yurividal, there is a ongoing discussion about it in filebrowser/filebrowser.github.io#5.. Hi @chenfeichen! Have you tried checking other nginx related issues? https://github.com/filebrowser/filebrowser/issues?utf8=%E2%9C%93&q=is%3Aissue+sort%3Aupdated-desc+label%3Aproxy+ E.g. #400, #372, #458.. Hi @juan11perez! Thanks for reporting. Please, could you let us know the exact command you are using to start the container? I just tried it and it works as expected:\nbash\n$ docker pull filebrowser/filebrowser:latest\n$ docker run --rm -itv $(pwd)/srv:/srv -p 5566:80 filebrowser/filebrowser:latest -c /config.json\n2018/08/22 11:15:35 Using config file: /config.json\n2018/08/22 11:15:35 Listening on [::]:80. Indeed, -c is the shorthand for --config and it requires an argument behind, which should be a configuration file. c (without a hyphen) is not a flag, but interpreted as either a subcommand or a positional argument. Since positional arguments are not accepted/required, and no c subcommand exists, it shows the error.\nWhat were you trying to achieve with -- c?. BTW, note that the entrypoint in the container is filebrowser (https://github.com/filebrowser/filebrowser/blob/master/Dockerfile), and the default config file (https://github.com/filebrowser/filebrowser/blob/master/Docker.json) is /.filebrowser.json. Therefore, unless you set your own config file, flags or environment variables, the database is created in /database.db and the default config file is used.\nSo, in the docker-compose file above, this won't work:\n- /srv/docker/filebrowser/config.json:/etc/config.json\n    - /srv/docker/filebrowser/database.db:/etc/database.db\nYou should set /srv/docker/filebrowser/config.json:/.filebrowser.json and ensure that database is set to /etc/database.db in your config.json.\nAlternatively, you can keep the volumes untouched, and use command -c /etc/config.json.. In order to bind database.db and config.json inside the container, these must exists in the host:\n``` bash\n$ mkdir tmp-fb\n$ cd tmp-fb\n$ touch database.db\n$ vim config.json\nsee content below\n$ vim docker-compose.yml\nsee content below\n$ docker-compose up\nStarting filebrowser ... done\nAttaching to filebrowser\nfilebrowser    | 2018/08/29 13:47:59 Listening on [::]:80\nfilebrowser    | 2018/08/29 13:47:59 Using config file: /.filebrowser.json\n```\njson\n{\n  \"port\": 80,\n  \"address\": \"\",\n  \"database\": \"/etc/database.db\",\n  \"defaults\": {\n    \"scope\": \"/srv\",\n    \"allowCommands\": true,\n    \"allowEdit\": true,\n    \"allowNew\": true,\n    \"commands\": []\n  }\n}\nyml\nfilebrowser:\n   container_name: filebrowser\n   image: filebrowser/filebrowser #:v1.10.0\n   restart: unless-stopped\n   volumes:\n   - ./database.db:/etc/database.db\n   - ./config.json:/.filebrowser.json\n   - /:/srv\n   environment:\n   - PGID=1000\n   - PUID=1000\n   ports:\n   - \"1580:80\"\nHowever, I would not recommend exposing all the system with /:/srv.. Related to #367 and #446.. @helloray , in order to discuss the implementation and (hopefully) get help from other contributors, please open a PR in the corresponding repo. If only frontend sources are modified, the repo is filebrowser/frontend. If it requires some other modification in the backend, open another issue in this repo, and link both of them.. > Building my filebrowser executable with build_all.sh is working.\nI think that this is the point. Bear with me:\nfilebrowser is a repository, frontend is a subrepo/subdir, and caddy is an 'external' repo.\nPrior to #399 and #506, the procedure was:\n\nBuild filebrowser/frontend from filebrowser/frontend, which left the artifacts in filebrowser/frontend/dist.\nPack the content of filebrowser/frontend/dist to filebrowser/rice-box.go, by executing rice embed-go in filebrowser (the root of the repo).\nBuild caddy, which imported github.com/filebrowser/filebrowser, and consequently filebrowser/rice-box.go.\n\nTherefore, it was required that a maintainer built the frontend and pushed the rice-box to the filebrowser repo. This was not desirable, because the rice-box contains the artifacts from the frontend, so it is not a 'real' source file. Also, we wanted to have it completely automated.\nSo:\n\nIn #399, rice-box.go was removed from filebrowser. The frontend is now built in the CI environment, and it is used directly. When a tagged commit is pushed (a release), the rice-box.go is automatically pushed to caddy/assets (note that the first line is rewritten from package filebrowser to package assets). See (long) discussion about this starting from #399-issuecomment-401897721.\nIn #506, we refactored the sources of filebrowser to subdirs lib and cli. So now, rice embed-go is executed in filebrowser/lib (see build_assets.sh#L22-L23) and the file is generated as filebrowser/lib/rice-box.go (see build_all.sh#L45). Note that, as a result, when rice-box.go is pushed to caddy the first line is rewritten from package lib to package assets, also the name of the box changed from ./frontend/dist to ../frontend/dist.\n\n\nAs a result, if you execute build_all.sh and you then try to build caddy/filemanager, you have two copies of rice-box.go. One of them is located at filebrowser/lib/rice-box.go (ignored through .gitignore) and the other one is caddy/assets/rice-box.go. You cannot add two boxes with the same name. No matter if the content of the boxes is exactly the same (which is probably true), because they belong to different packages. That's the source of your error.\n\nThe most simple solution is to remove filebrowser/lib/rice-box.go. However, this is only an option if you don't mind/want the latest frontend, as the existing rice box in caddy/assets/rice-box.go will be used.\n\nThe second option, and the best solution in this context, is to execute this from caddy (assuming that caddy is a sibling of filebrowser):\nbash\nmv ../filebrowser/lib/rice-box.go ./assets/\nsed -i 's/package lib/package assets/g' assets/rice-box.go\nYou will have a single rice-box, built from the 'latest' frontend sources. This is equivalent to what is executed in the CI flow (see push_ricebox.sh#L15).\n\nAs a last approach, you can just remove parser.go#L22. It will ignore caddy/assets/rice-box.go, so that filebrowser/lib/rice-box.go is used. Note that you cannot remove caddy/assets/rice-box.go without editing parser.go, because it would be importing an empty dir/package. \nThis might be desirable if you want to make multiple consecutive builds of the frontend and test the results with caddy. You avoid executing mv and sed each time, but you need to remember resetting the changes to parser.go before you commit/leave.\n\nI hope that this explanation, although long, helps you grasp the details of the flow. I thought that it would be useful for you, as you are starting to dive into the project.\nAlso, I am sorry for the inconveniences that recent changes might have produced. Hopefully, these are for good.\nPlease, let us know if these solutions work for you.. @bcardiff thanks for reporting! It is fixed now.\n@hacdias, the underlying issue was that in #506 all the config keys where lowercased, in order to have them automatically identified by viper.BindPFlags. However, I forgot to change them in the frontend. Therefore, the fix to this issue was to rename BaseURL in frontend/build/config.js: https://github.com/filebrowser/frontend/commit/3ae9e518a30ec59e307f60f0225b8eb04433be08. Can you think of any other similar required modification off the top of your head?. I just tested it, and it works for me:\nbash\ndocker pull filebrowser/filebrowser\ndocker run --rm -it -p 5555:8000 filebrowser/filebrowser -b /admin -p 8000\nThen, browse localhost:5555 or curl localhost:5555/admin.. @bkanuka, you are ok. I did not replace it properly in all the javascript sources. As you say, BaseURL should be replaced with baseurl.\nIn order to test the fix, please see filebrowser/community. There you will find instructions about how to build the frontend first, then the backend and, last, test it all. For a quicker path, see https://github.com/filebrowser/community/blob/master/development.md.. @bkanuka we do not provide a file that does everything at once. But we provide a development docker image (filebrowser/dev) that can be used to build both the frontend and the backend, without installing any dependency in the host:\nbash\nUSE_DOCKER=\"true\" ./build/build_all.sh\ndocker build -t filebrowser/filebrowser .\nSee https://github.com/filebrowser/community/blob/master/development.md#docker-and-shell.\nSo, you can use build_all.sh and extend the reference Dockerfile to a multistage dockerfile if you wish:\n```\nFROM filebrowser/dev AS build\nRUN git clone --recurse-submodule https://github.com/filebrowser/filebrowser && \\\n cd filebrowser && \\\n ./build/build_all.sh && \\\n  mv filebrowser /tmp\nFROM scratch\nCOPY --from=filebrowser/dev /tmp/filebrowser /filebrowser\nCOPY --from=filebrowser/dev /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt\nVOLUME /tmp\nVOLUME /srv\nEXPOSE 80\nCOPY Docker.json /.filebrowser.json\nENTRYPOINT [\"/filebrowser\"]\n```. @HeavyHorst thanks for reporting. Would you like to open a PR with those changes?. Thanks to @HeavyHorst's contribution (filebrowser/frontend#40), this should be fixed now. So, I'm closing this issue.\nNevertheless, note that building the backend with latest dependencies is failing ATM (see #554). Should you want to try this fix, you need to build the assets only.. > In order to map database.db, you need to have a database.db file but as a new user where do you get this file from?\nIt can be an empty file: touch database.db.\n\nThe application then stores whatever config it needs in the config folder e.g. database.db, config.json etc.\n\nFilebrowser, by default, looks for a config file named .filebrowser.[ext] in either ., /etc/filebrowser/ or $HOME. So, if the default config file is moved to /config, it won't be found unless the path is explicitly given through flags or envvars.\nThen, changing https://github.com/filebrowser/filebrowser/blob/master/Dockerfile#L10 to COPY Docker.json /etc/filebrowser/.filebrowser.json is an option, should you want to propose a PR. If so, the database field in the default config should probably need to be changed too.\n\nThe application has logic, if database.db is present then use it, if nothing present -> then create a database.db for the new user\n\nThis is already the case. The underlying issue is that docker creates a database.db folder in the host if it does not exist as a file. Thus the need to touch it.\n\nMapping to a folder is much nicer than files\n\nYou can do it already: docker run -d -p 8888:80 -v /path/to/config:/config filebrowser/filebrowser -c /config/config.json. Given that you set database: \"/config/database.db\" in you config file.\n\nThe instructions could be clearer as well\nfilebrowser.github.io/installation/#docker\nIn one place the path is /etc/config.json and the other /config.json and /etc/database.db vs /database.db\n\nWe'd be glad to accept a PR in https://github.com/filebrowser/filebrowser.github.io, should you be willing to make it more coherent.\n\nWhat's the advantage of specifying multiple files over a single folder?\n\nMaking it explicit that two, and only two, files are used. Also, allowing the user to bind only one of them. For example, I normally bind the config file but I ignore the database, because I don't want it to be persistent.\nAnyway, specifying multiple files would still be possible if put in the same folder. So, it is possible to support both use cases.\n\nIf I keep it simple and just use docker volumes, how do I retain my settings on a different host?\n\nYou just export the volume and import it in the different host: https://docs.docker.com/storage/volumes/#backup-restore-or-migrate-data-volumes. I took the proposal by @dtwilliams10 as a reference, and I updated the descriptions of the two repos:\n\nhttps://hub.docker.com/r/filebrowser/filebrowser/\nhttps://hub.docker.com/r/filebrowser/dev/\n\nHowever, I could not add the icon/logo, because it seems that the only option is to do it through gravatar. @hacdias, can you please register filebrowserbot there with its email account?\n@dtwilliams10, @bdito, feel free to propose any additional refinement to the current descriptions.. It is fixed now. For some arbitrary reason related to curl, the last execution of https://travis-ci.com/filebrowser/docker-dev had failed. It was not started again because it is scheduled weekly. I triggered manually and now filebrowser/dev is based on go1.11.\nNow, there is a problem with yarn: https://travis-ci.com/filebrowser/filebrowser/builds/82754910. I don't know why it cannot connect to the yarn/npm registry. I can reproduce it locally, so it is not a travis issue.. Thanks @chinglinwen :+1: . > it'd be nice if I had the permissions required to close or label issues as I dig through the backlog\nYou can comment on those you are interested to fix, and we will close or relabel them correspondingly. Indeed, we rarely take actions without double approval. That is, even if an issue is to be closed, we comment there to ensure that it is solved. Then, if no reply is received in around a week, it is closed. However, if the issue is old, and no maintainer replied to it previously, we wait longer as the OP might have forgotten about it and some more time might be needed to come back.\nNonetheless, ATM we can read and respond to issues/questions, but new features won't be created and deep bugs might be hard to be fixed. So, it'd be great if you contributed to these topics.. @dtwilliams10, as @hacdias suggested, bugs have the highest priority. However, since you are not familiar with neither the languages nor the code, triaging can help you. With triaging I mean trying to reproduce issues reported by users. Doing so will let you gain insight into the build procedure and into the wide use space. Of course, it is also useful for us, in order to better label the issues. If you do so, please reply in the corresponding issue telling if you could reproduce it or, in case you couldn't, asking for additional info.\nAlso, please read https://github.com/filebrowser/community.\n@hugomassing looking forward for those fixes ;). Hi @dodekeract! Can you please tell us which version of filebrowser are you using? It'd be great if you could also paste the log of filebrowser.. If you do start the container as a daemon, you can get the log with docker log <container_name>. Also, I think that docker-compose --verbose up might show it.. @alx I just tried:\nbash\ndocker pull filebrowser/filebrowser\ndocker run --rm -it -p 5555:80 filebrowser/filebrowser --auth.method='none'\nand it works as expected. Can you provide more info about your context? How are you setting the authentication method?\n@rhjmoore, AFAIK there is no verbosity option for the log. What info do you expect to be logged which is not?. @dodekeract, I think that your issue might be related to #522, because you are using a custom baseurl. Can you please try setting the auth.method but keeping the default baseurl? If that works for you, we can close this issue an focus on #522.. Hi again @alx. I think that your issue might also be related to #522, as suggested in https://github.com/filebrowser/filebrowser/issues/534#issuecomment-427186998. Could you please try the same configuration without a custom baseurl?. @alx, a fix for #522 has been pushed to the frontend. Now, you should be able to build it and try your setup with a custom baseurl.. I'm closing this issue because it seems to be solved. However, feel free to comment if you happen to find it again.. Hi @techie879! Please, see #301 and #489.. Thanks @dtwilliams10 :heart:\nI'm closing this issue because I have manually copied the content to hub.docker.com. Let's continue the conversation in #528.. @rhjmoore, unfortunately, this seems to be a tricky issue to triage. On the one hand, you can try to reproduce the problem in a virtual/portable machine, such as a session in play-with-docker. That will allow other people to further analyze it. On the other hand, in order to get additional and specific log messages, you will need to add log.Println() instructions to the codebase and build filebrowser yourself.\nJust in case, did you already check the console log in the browser?. @glinuz, please answer the questions suggested in the template/form, in order to allow other users understand and reproduce your issue.. Hi @hufh. This project is actually being built with the latest go version:\nbash\ndocker run --rm -it filebrowser/dev go version\ngo version go1.11 linux/amd64\nAt the same time, all the builds pass successfully in the CI environment: https://travis-ci.com/filebrowser\nCan you, please, let us know which problem/error did you find? At the same time, could you provide any reference related to the requirement of having sources in subdir src?. The GOPATH is not the same as the root of the repository. The repositories are located in $GOPATH/src/filebrowser/*, indeed.\nAbout the error you are getting, did you build the frontend and execute rice prior to building the backend?. Please, have a look at:\n\nhttps://golang.org/doc/code.html\nhttps://github.com/golang/go/wiki/GOPATH. Thanks @idcm! I added a reference to this issue in filebrowser/community#2. I'm closing this issue, because there is nothing to fix. But feel free to continue the discussion either here or in any of the related issues.. Hello @shyal. Could you please provide some info about your context? How are you trying to load it? What alternatives have you considered?. Related to #496.. Hi @toddlerya. The PR seems to be failing the lint test. Could you please check and fill the PR template (https://github.com/filebrowser/filebrowser/blob/master/.github/PULL_REQUEST_TEMPLATE.md)? . Thanks @toddlerya! As @didiroesmana suggested, the CI error seems not to be related to your changes, but we need to fix it before we merge this.\n\nMeanwhile, after the comment by @helloray, would it be possible to make the number be either a constant variable or an additional parameter in https://github.com/filebrowser/filebrowser/blob/master/lib/filebrowser.go#L65-L109?. Overall, LGTM. However, let's wait until #522 is fixed, so that the CI tests can be properly executed.. Thanks @toddlerya!. Thanks for the proposal @Airmanbzh! This was requested in #257 and #381.\nI think that your implementation is a good starting point, but it would be better if viper was used. We are already using it to set multiple parameters either through configuration files, cli arguments or environment variables. Would you mind adapting it?\nYou can see how we use viper in:\n\nhttps://github.com/filebrowser/filebrowser/blob/master/cli/cmd/serve.go\nhttps://github.com/filebrowser/filebrowser/blob/master/cli/cmd/server.go. Hi @vitaliy-kuzmich! Does this PR have any follow-up? Was it closed because it was not functional?. > But when I run caddy with filemanager, it can be run well good.\n\nThis is interesting. How did you get the binaries? Were both of them (filebrowser and caddy) built in the same context?. The tarball for filebrowser is generated with goreleaser (see https://github.com/filebrowser/filebrowser/blob/master/.goreleaser.yml).\nHowever, the binary you get with goreleaser is slightly different from the one you get when building it yourself: https://github.com/filebrowser/filebrowser/blob/master/build/build.sh#L15\nLast, caddy is built with it's own procedure.\nTherefore, it can be tricky to find which is the difference that triggers this error.\n. I'm not really sure about what's going on here. Let me word what I understood:\n\nThe API of Hugo changed and that broke the build of filebrowser, because we are not using any vendoring/module system ATM.\nAt the same time, the archiver dependency also changed, so the build also broke.\nSome users have worked around it by cloning specific versions of hugo and archiver.\n\nIf that is ok, the most straigthforward solution would be #496. By using go modules, the build would work without further modifications.\nHowever, at the same time @hacdias suggested getting rid of hugo as a dependency. I think that it makes sense, because AFAIK it is only used for a slightly improved editing experience. I.e., should the site be served, hugo is required as an external dependency anyway.\nI am not sure about the relation between archiver and hugo. @hacdias, should these commits be split to separate PRs? Moreover, in the last comment you said that it is not working, yet. Is it because of the frontmatter/hugo part or because of the archiver?. Thanks @saveshodhan! Your are ok, the CI issue has nothing to do with this PR.. Thanks @helloray! Could you please fill the PR template? https://github.com/filebrowser/filebrowser/blob/master/.github/PULL_REQUEST_TEMPLATE.md. @mmahmoudian is ok. @rudymartinb, please open a new issue.. First off, wow! and thanks a lot for allocating time for this project. It is really exciting to see it moving forward!\nYou have been really busy this last week, so it is hard to grasp all the features that are being discussed here and modified in the related issues. I'll try to help by summarizing what I have understood so far, and providing my point of view on some of the issues.\n\nI agree with:\n\n@helloray\nAt the moment, the most important thing is to introduce vendor management for go. Without that, the project can not be compiled if any go lib changing their APIs. Other contributors can gain benefits from it too.\n\nThe most important and urgent issue is to add go mod support to either v1.10.0 or to the current master branch. That will allow users to use the old Filebrowser in a stable state. To do this, we need to decide:\n\nStabilize v1.10.0 as v1.10.1 and jump directly to v2.0.0 in february.\nStabilize the current master branch as v2.0.0 and jump to v3.0.0 in february.\nStabilize the current master branch as v1.11.0 (although it might not be fully semver compilant) and jump to v2.0.0 in february.\n\n\nAbout rewriting the frontend with React, I quite agree with:\n\n@helloray\nI don't know how much difference between VUE and React. If VUE works well, why spending so much time to rewrite it? Those frontend frameworks are almost changing everyday. The most popular framework can be die at any time. I suggest you keep working on features and bug fix. Do not rewrite it.\n\nAt the same time, @hacdias is young and this is a project he is doing in his spare time. Thus, I understand that he might want to try new technologies and frameworks to make the process more exciting for him, as learning new things is fun.\nOverall, the frontend is relatively simple, so if he thinks that rewriting it is worth, I'm ok with it.\n\n@hacdias\nWhy rewrite the front end? Again, lot of code that ... Well... Doesn't need to be there. A lot of old dependencies and updating them will be an hassle. The ideia is to revamp it and then install greenkeeper to maintain the dependencies up to date.\n\nHowever, I think that we need to make the change clean. Should we keep the vue frontend in a new branch in filebrowser/frontend? Or, should be rename filebrowser/frontend to filebrowser/vue and create a new filebrowser/react?\nIn the end, we split the frontend precisely in other to allow multiple implementations.\n\nAbout the DB, is it possible to implement a kind of plugin system so that it is easy to add interfaces to different DBs? A type that satisfies certain conditions, as a generic API. That would allow to use BoltDB, SQLite or any other without modifying the code base.\nAnyway, as @Equim-chan commented:\n\nBoltDB is fine. It's not active because it's stable enough for now.\n\nAlso,\n\n@hacdias\nI saw there's a fork with some fixes and such and even they recommend us to use it.\n\nThis https://github.com/etcd-io/bbolt ?\n\n\n@vitality-kuzmich\nDoes it costs to do so much effort into DB management(example mysql workbench) from console ? Are there workbenches for bolt DB ? Maybe replace with SQLlite and use some UI ? Here it is for bolt: evnix/boltdbweb but I did not test it...\n\nSome months ago I searched for GUI and/or CLI tools to explore/edit BoltDB files, but I didn't find any. I guess it is because such tools need to be too specific for the data types that are been saved. Fortunately, @hacdias has now implemented it:\n\nI've already implemented all the needed CLI commands.\n\n\n\n@hacdias\n- Add an interactive first run experience through the command line to configure the stuff on the database and get rid of almost all flags.\n  - This would still let users create instances through scripts, they would just need to provide the stuff in the same order as it is asked.\n  - Also add commands to interact with the DB programatically.\n@hacdias\nIf they use the commands from File Browser itself, they'll always make sure they have the correct DB structure. And lots of users have requested it already.\n\nAbout getting rid of CLI flags, the JSON configuration file and environment variables to replace all of them with subcommands, I don't think it is a good idea. I definitely want to see some subcommands that allow to initialize the DB. That's cool and very useful. But I think that a configuration file should also be supported.\nThis is because it is easier to deploy a file (say JSON) that deploying a script that must be executed. On the one hand, a third-party service might allow users to create filebrowser instances by providing the config file only, without letting them execute arbitrary code. On the other hand, writing an interactive process and suggesting to fake the interactivity with a script is not a clean solution.\nPlease, let me know if I misunderstood anything.\n\n\n@hacdias\nAlso, make filebrowser mainly a binary and move main.go to the root of the repo.\nThat would also block FileBrowser from being used as a middleware.\n\nI think it is useful to explicitly separate the core (lib) from CLI sources, as the core can be imported from third party projects, even though they don't use the CLI entrypoints.\nWhy do we need to break this setup? Did you have any compilation problem with the previous structure?\n\n\nUse github.com/spf13/afero as a FS layer instead of our own.\n\nSure.\n\n\n@helloray\nFolder upload(I can help to contribute it)\n\nThat's cool!\n\n\n@helloray\nScrollbar management(The scrollbar position should be recorded and restored when user go back to parent directory. After user change a file name, the scrollbar should also jump to that file related area. )\n\nI think that this should be extended to provide a mechanism to save user data in the browser: Client-Side Storage. E.g., we might want to remember what type of view did the user select (maybe for each directory/folder).\n\n\nand please replace the editor, monaco(?) or ACE definitely. Thanks!\n\nI am really interested in this. Do you have any reference to evaluate the alternatives? I suppose that better features have some impact on performance, so we should consider mobile devices before changing to a full-featured solution.\n\n\n@vitality-kuzmich\nJust thinking to implement file sharing, and put it as separate menu item, next to files listing.\n\nI think this is a frontend design related enhancement. Therefore it has less priority that structural modifications, but it is still interesting to have it in mind. @hacdias, how can be track this? Should @vitality-kuzmich open a new issue and you can include it in the rewrite if it suits you?\n\nAbout Caddy, I don't really know which are the implications of removing the integration. I have never used it. I have just tinkered with the build procedure.. We should maybe consider releasing 2.0.0-rc.1 and asking for users to try it and report back?. It has been harder than expected, but v2.0.0-rc.1 is out!. @nambrosch see https://github.com/filebrowser/filebrowser/issues/489#issuecomment-452224608 and #128.. > @1138-4EB hope you liked the merge of the scripts into one! Although there seems that for some reason it can't find wizard.sh but dos2unix works...\nIt looks good! I am having a look at that error. Unfortunately, I need to leave now. So I'll do it next year ;). Have a nice new years eve!. > Actually getopts is POSIX-compliant so it must be present on all POSIX-compliant systems. Reverted the changes to filebrowser/dev and replaces all == by =. Now there seems to be a permissions issue (?).\nIndeed. The original issue was that bash is not the default shell in Alpine Linux. So it failed because of the shebang. Moreover, bash is not always available. E.g., the Ubuntu version used in travis includes dash. Therefore, I think it is better to make the script the most general, instead of requiring bash.\n\nI just don't understand why we didn't have the errors before. Another question: why are we copying the files? Since we mounted the volume, wouldn't the files persist?\nEdit: for what I just analyzed we just need the filebrowser and rice-box.go files. I see you did this cp thingy to avoid the permissions issue caused by the commands inside of Docker running as root. But there must be another way of doing this.\n\nYou are ok:\n\nThe error is produced in those lines.\nYes, files persist because we mounted/bind the volume.\nYes, we only need filebrowser and rice-box.go. We copy dist and node_modules too because:\ndist: in case the user wants to distribute the frontend.\nnode_modules: to avoid downloading all the dependencies each time.\n\n\n\nCertainly the cp are redundant ATM. A few days ago the content was mounted/bind at /src inside the cointainer, but it was then copied to go/src/github.com/filebrowser/filebrowser. Therefore, it made sense to cp the artifacts. However, right now, we are trying to copy a directory on itself. That's probably the source of the error.\nEDIT\nI think it is fixed now. See branch fix-wizard.. > @1138-4EB @Equim-chan this only has a database and no configuration file. My suggestion for automated installations is to use a script or something like that to create the users and change the configuration. Most of the config options will now be accessible through the web interface too.\nI find it interesting to have access to all the config options through the interface.\nBut, as commented in #574, I think that supporting configuration files is desirable too. It is quite easy to get info from a form and generate a JSON/YAML with it. Requiring a custom script involves an intermediate step to translate the config data to a suitable set of instructions.\n\nIf anyone wants a config file back, we can think about it later, but this is a major release, so shouldn't mind about breaking changes because there are many.\n\nAs you say, we can add it later. For now, I think it is better that you work on your own until you feel the code to be ready for review. At that point we will evaluate if we should add config files before or after publishing v2.. It should not have any effect on dockerPushLatest. The single annoyance now is on GNU/Linux hosts: when the user wants to remove the artifacts (filebrowser, frontend/dist, rice-box.go...) root permissions are required. This is annorying because sudo should not be required to remove a repo you cloned just to build a binary. However, sudo privileges are required in order to run docker, so we can expect the user to be sudoer if he/she ran docker.. Excuse me @hacdias. I went to sleep and skipped your previous comment. I am going to work on filebrowser/dev now. On the one hand, I want to support running gometalinter, yarn and go without root privileges. On the other hand, I will add golangci-lint. I will keep you posted.. @hacdias I added -u $(id -u) to docker run. Now, all the commands are executed with the same user id as the one on the host. This ensures that the user will not require any privilege to remove the artifacts. Expectedly, both yarn and go complained about it:\n\nGo tried to create /.cache. I fixed it setting XDG_CACHE_HOME=//tmp/.cache. See docker-library/golang#225. However, it seems that we might need to use GOCACHE in future versions: https://github.com/golang/go/issues/26280#issuecomment-445294378\nYarn complains about Error: EACCES: permission denied, open '/.yarnrc'. Depite it, the build works. I did not find a solution yet, so I just used set +e.\n\nYou can see these changes in https://github.com/filebrowser/filebrowser/commit/895ecb1251656ec5c5f566fff8079dc54e4b4484. Docker only fails if you need user specific data/configs, which is not the case. In the end, the yarn error was similar to golang's: HOME is unset when the user is not defined. So I just set HOME=/tmp as a container envvar.. @hacdias, sure. I am going to publish v1.11.0 now, so that we have a stable v1 and we can move forward with v2 on master.\nAbout the pending task named fix: Docker image, is there anything I can help test/fix?. Well, the release stage did need some effort (because of filebrowser/docker-dev#3), but it is working ok now. Plus, the good news are that both golangci-lint and goreleaser work seamlessly when the repo is outside of GOPATH.\nI created a new branch named v1 to keep possible bugfixes there. Then, I merged master/v1 to rewrite, and named it v2.\nYou can now:\n\nForward rewrite to v2, and then merge this PR (forwarding master to v2).\nForward master to v2 and close this PR manually.. So fast! Nice!\n\nCertainly, we could remove both branches, v1 and v2, and use master only:\n\nv2 was just temporal, indeed.\nWith v1, we need to remember that any bugfix should start from 013ddf45c71248c6f1e451dc31f09744e43ae6aa, which is the commit next to the tagged one (v1.11.0). That's why I think it can be helpful to keep it. If we see that no critical fixes need to be applied, we can remove it in the future.. BTW, I tried the windows-amd64 binary and the docker image corresponding to v1.11.0. Both work as expected. However, caddy is failing because of some of the changes we did to filebrowser/dev (such as changing the linter tool). I'm going to fix it.. Ok. So, I will review the Dockerfile thing. I downloaded the latest filebrowser image (v2) and it refuses to start due to some problem with the entrypoint.. After having a quick look at it, I think that we should avoid docker-entrypoint.sh. If that feature is really required, it should be integrated in the golang codebase.. @laoshaw is it ok to add just the IP to the standard log? Or should it have a specific format to make it easier to read/parse? Moreover, is it reasonable to add a separate log file for this purporse?. I think that it should be either split, as you suggest, or fully integrated (so that no external binary is required). Now, it is both a build dependency and the binary is required. So removing the former sounds good.. @skyfaller, you can still use Hugo with Filebrowser. Just install it in the environment where filebrowser is executed (either a docker container or the host), and use commands/hooks to run either hugo or hugo serve with the desired parameters. Which feature are you missing?. > Unfortunately I'm a noob who doesn't understand what you just said.\n\nPlease, be more specific. Which terms did you not understand?\n\nI don't see any documentation on the website for replicating the old Caddy Hugo behavior.\n\nAs explained above, integration with static site generators was just a side feature. Since it has been removed, there is no explicit documentation, because it is not actively supported anymore.\nHowever, if you want to use File Browser to edit some Markdown sources which are then to be processed with hugo to generate a web site, that's something you can still do. Also, if you want to edit sources with File Browser and use hugo server to serve the site, you can do that too.\n\nI don't know what features I'm missing because I barely understand what Caddy Hugo did, how Hugo integration worked or what is lost now that it is gone. I haven't really run Hugo from the command line at all.\n\nYou might not know how did Caddy Hugo did what it did, and how did it integrate with hugo. However, no other but you can explain what did you use it for. You said you were using it on your personal websites, as well as a website for paying client. How do you call the service you are charging for? That might help us define what do you need. Also, how were you serving all those different sites? Were all of them served in the same url?\n\nWhat commands would I need to run to do the same things that Caddy Hugo did, and how do I set them up in the new File Browser?\n\nI did never use Caddy Hugo, because File Browser and Hugo as separate tools fit my needs. So I do not know the details about what Caddy Hugo did, and which of the features did you use.\nThis is the main site of project Hugo: https://gohugo.io/. There are a Quick Start and some other guides. The documentation can be found at https://gohugo.io/documentation/. The repo is https://github.com/gohugoio/hugo.. @hacdias, I could succesfully add go mod support. But gometalinter fails. Please, have a look at #586.. Thanks @anazhd!. Thanks @Airmanbzh!. > It seems that some packages are not imported correctly.\nYou mean in the lint stage, don't you?\n\nCan you go build this PR on your OS? Does it work?\n\nYes, I can. And, yes, it works.\n\nIf so, I'd say to ignore the error for now or even remove gometalinter for now until we finish #574.\n\ngometalinter might be a problem even after we finish #574, as it seems that go modules are not supported: alecthomas/gometalinter#521. Are you using gometalinter in the rewrite?. In the end, I could make gometalinter work. After running go get and go mod vendor with GO111MODULE=on, gometalinter can be executed with GO111MODULE=off without dependency issues.\nI am merging this. But I think we might consider changing to golangci/golangci-lint. See https://github.com/golangci/golangci-lint#comparison. @DovaMerith see https://github.com/filebrowser/filebrowser.github.io/pull/9#issuecomment-411735997.\n\n\n--auth.method it the method of authentication between 'none', 'default' and 'proxy' authentication. Defaults to \"default\".. I think that we can handle this situation as we did in v1: if no --port flag, FB_PORT envvar or configuration option is provided, the port defaults to 80. So the user only needs to set it if he/she wants a different port.\n\n\nI am more concerned about the location of the database. In docker-entrypoint.sh it deaults to /database.db, which I find to be ugly outside a container. It should probably default to ./database.db.. Despite the configuration being simplified, we should not constrain the deployment too much. For example, begin able to set runtime parameters such as the port, the address, the location of the DB, etc. should be easy. I.e., the default location of the database can be /database.db, but the user should be able to set it in any arbitrary path (either inside or outside of the container).. @XavierBouvard, see #604. In the next release there will be a root path, and all the relative locations will refer to it. Therefore, if you DB lies in that path, you will be able to share a single directory.. @XavierBouvard certainly, I am not sure about the purpose of declaring /tmp as a volume. @hacdias is it used internally?. @PixiBixi, see https://github.com/filebrowser/filebrowser/issues/587#issuecomment-451907670. @hacdias, as commented above, what is the purpose of declaring /tmp as a volume?. I have pulled the latest image and it looks good with the default user and password. It is so smooth, and the editor looks great.\nHowever, I found the following problem when trying to just start it with noauth:\n\nfilebrowser creates the database in /database.db, as set in .filebrowser.json. It is created with quickSetup, so the auth is set to JSONAuth.\nI cannot docker exec into the container, because there is no shell in it.\nI cannot change the setting from the GUI. Although this might be a possible solution.\n\nSo, I am kind of forced to make the database persistent, either by binding it to the host, or using a docker volume. That is because I need to call filebrowser multiple times (two, at least).. > I don't know. It was added by you \ud83d\ude1b\nNot really \ud83d\ude0b . I was the last one modifying those lines, but the content was there far before:\n\nhttps://github.com/filebrowser/filebrowser/commit/00da35b91d759378015105a020e09a1591f5a92c#diff-3254677a7917c6c01f55212f86c57fbf\nhttps://github.com/filebrowser/filebrowser/commit/6f394641304b9c51cc2928539eddc29d2382ce82#diff-3254677a7917c6c01f55212f86c57fbf\n\n\nI just left it there because... well... I didn't want to break anything.\nBut I think we should remove it. It doesn't make sense to me.\n\nIt seems to be because of #274. Are you sure that filebrowser does not need it anymore? If so, we can safely remove it.\n\n\nThere's no way of starting it automatically with no-auth. Please use config init for that or change using config set.\n\nI think this is a very valuable feature. Certainly, most of the time I use filebrowser I start it in noauth mode.\n\nI didn't change the existence or non-existence of shells on the Dockerfile. But please change that so there is \ud83d\ude04\n\nI don't think we need to do so. As I have commented in previous issues, I think that it would be interesting to distribute two images (filebrowser/filebrowser and filebrowser/filebrowser:alpine. But I would keep the one based on SCRATCH as the reference. I think it is very valuable to ensure what filberowser can do on it's own, as a static binary.\n\nOnly non-server and non-auth related settings are available from the UI.\n\nThat's ok. I was just considering alternative solutions.\n\nCan we consider auth related parameters to be server params and treat them equally?. > Can you try removing it and then download a file?\nSee #620.\n\nWe could add a flag for noauth that would only be used if in quick setup mode just as username and password. Not sure if we should add all auth params though. They all require a lot of configuration for their own so I think it's better to keep it in config commands.\nWe could add noauth just as a shortcut and let it be an exception. But just for quick setup mode. What do you think?-\n\nI might be missing some knowledge about the internals here. What configuration is required for auth settings? I was thinking about adding auth.method and auth.header to root:\n\nFor noauth, the later is not required.\nWith proxy, is anything more required?\nWith JSONAuth (default), \"username\" and \"password\" are used, \"admin\" being the default.\n\nWe can limit the available auth options in quick setup to those that are straighforward.. I thought that recaptcha settings were independent from JSON. Therefore, I agree with you. We can only allow auth methods that need no additional parameters. For now, it is only noauth.. I executed the following commands in this branch:\nbash\nUSE_DOCKER=\"true\" ./wizard.sh -b\ndocker build -t filebrowser/filebrowser .\nwinpty docker run --rm -it filebrowser/filebrowser version\nI get this output:\n``` bash\nError: unknown flag: --database /database.db\nUsage:\n  filebrowser [flags]\n  filebrowser [command]\nAvailable Commands:\n  cmds        Command runner management utility\n  config      Configuration management utility\n  help        Help about any command\n  import      Imports an old configuration\n  init        Initialize a new database\n  rules       Rules management utility\n  users       Users management utility\n  version     Print the version number\nFlags:\n  -a, --address string    address to listen on (default comes from database)\n  -c, --cert string       tls certificate (default comes from database)\n  -d, --database string   path to the database (default \"./filebrowser.db\")\n  -h, --help              help for filebrowser\n  -k, --key string        tls key (default comes from database)\n  -l, --log string        log output (default comes from database)\n  -p, --port int          port to listen on (default comes from database)\n  -s, --scope string      scope for users\nUse \"filebrowser [command] --help\" for more information about a command.\n2019/01/06 01:43:28 unknown flag: --database /database.db\n```\nThat's because ENTRYPOINT [ \"/filebrowser\", \"--database /database.db\" ] treats --database /database.db as a single argument. It should be ENTRYPOINT [ \"/filebrowser\", \"--database\", \"/database.db\" ].\n\n\nThe thing with this is:\n* `docker run filebrowser/filebrowser` == `filebrowser -d=/database.db -p=80 -s=/srv`\n* `docker run filebrowser/filebrowser --port 80` == `filebrowser -d=/database.db -s=/srv`\n\n\nI am not quite sure. I think the second one would be: docker run filebrowser/filebrowser --port 80 == filebrowser -d=/database.db -p=80. Unless you mean that -s=/srv is already set, because you assume that the first command has been executed earlier. That's not intuitive to me. IMHO, it would be easier if the initialization was done automatically when the provided database is empty (or it does not exist).\n\nMoreover, related to this, it seems that once the database is created the root of the scope is fixed (/srv in the example above). If so, can it be reworked so that it can be set at runtime. I.e., make all the refs in the DB relative to the root scope.\n. @hacdias, please have a look at https://github.com/filebrowser/filebrowser/compare/dockerfile...feat-viper. It is some WIP to set defaults with spf13/viper. At the same time, it allows to set 'quickSetup' params with either a config file, CLI flags or envvars. From there on, all of those that conflict with the DB are ignored, unless flag --force is used.. > @1138-4EB there was never a root scope, not in v1.11.0, neither here. The scope flag only exists for quick setup. After that it is considered the default scope for new users. You can set it on their settings.\n\nWe can, though, add a root scope to the global settings that will be prepended to users' scope on runtime. And that can be overwritten by the flags.\n\nCertainly, I did not try it with v1 neither. However, I feel it to be a cool feature to be able to rellocate either the database or the content/data. Having a root scope set on runtime, allows to move that folder without any modification to the DB.\n\nI feel this: dockerfile...feat-viper is overcomplicating. I agree we can use Viper to get the base command vars either from flags, config file and env vars, but isn't there a simpler way?\n\nI wish there was \ud83d\ude15 , but that's the simpler I could achieve. We need to define the flags, the defaults and bind the flags to viper. Nevertheless, I think that the tricky part is still to be written. I commented out serverVisitAndReplace, but it should be rewritten to take --force into account.\n\nAnd I see Viper has that bug that can't know if some setting was really set or not.\n\nUnfortunately... It works for cobra, so we can tell if a CLI flag was used. But it does not work for envvars. Anyway, we can work around it by checking against the defaults by ourselves and displaying a warning if they match. I believe there is no practical difference between a flag being unset (thus taking the default value) and the user setting a flag to a default value.\n\n@1138-4EB I merged your changes into this branch. Just to make sure: we're only adding Viper to root command right?\n\nFor now, yes. But should probably add it to config.go, import.go and users.go too.\n\nHow can you tell that a number is undefined for example? We have the PORT to run on. If the user sets it to zero themselves we cannot assume that it is undefined. Unless we could set it to a negative number.\n\nWith 'undefined' I mean 'Field not found in the DB'. For example, 'baseaddr', 'address' and 'port' might not exist in the DB. In that case, the runtime params can be used, if set. Otherwise, defaults are used. Overall, these runtime parameters could be written to the DB only when the values differ from defaults.\nI know that with your initialization procedures all the fields will always exist. So let's consider the paragraph above an error callback procedure, just to avoid panicking with incomplete DBs.\n\nI'll let you work on this PR. I'll make a PR for scopes being relative if a global scope is set and document it well.\n\nGreat.. I just listed the files which had flags. After checking the content, I agree that import flags are not worth. However, for config and users a configuration file might be useful. I am thinking of having an initialization config file. If I want to initialize an empty DB and set some branding, authorization and default permission, I'd prefer to have all that content in a JSON/YAML/TOML rather than a shell script with CLI args.. Wow mate! Hard to follow your rythm ;) Just an overall comment: I'm quite happy about how easily we are discussing and applying all these changes. Kudos to you!\n\nI find it annoying to print that info on other commands.\n\nThat's because initConfig is executed always, before any command. But we can move it or add some condition, so it is only shown when using a config file makes sense.\n\nBtw, if you think it's a good idea, we can remove the init command and do a quick setup on initConfig if the database doesn't exist.\n\nI think there is no need to remove init. I'd like the functionality to be available either in initConfig or in the root command (as fallback for an empty/non-existent DB). But I also think that some users will feel more comfortable executing init explicitly.\n\nAlthough I think it would be better to ask for user input if the command is not root.\nImagine someone is trying to list the users but has a mistake on their DB file: they don't want to generate a new database file. It was just a mistake.\n\nSure. I added it to initConfig because I was only testing the root command. But automatically setting the DB should only be done when rootCmd is executed.\n\n@1138-4EB I've commented the info about the current config file right now and will merge this. Although I hope to remove those TODOs and find a prettier solution. Will wait for your feedback!\n\nWill have a look at it.. About setting the default username and password, in the current master the password is expected to be given plain as a cli arg. However, in v1 the password hash is expected. See #591.. @hacdias, what's the difference between init, config init and quickSetup?. Then, we might remove init. I find config init more explicit, as init might mean to initialize a service.. No problem. But I don't get it. I mean, IsSet is provided by Viper. Furthermore, it does not work as expected, so we cannot rely on it.. > @1138-4EB please don't make any changed yet. :/ This will conflict with the changes I'm doing\nOk. Just remove the commits that don't fit and I'll test in a different branch meanwhile.. @hacdias I've been rebasing on top of your work. Can I force-push this branch before I focus on your last comment? Or are you actually working on top of this?. > @1138-4EB the idea I had doesn't work unfortunately. You know what you feel after making a lot of changes and in the end it doesn't work as expected \ud83d\ude2d\nI know...\n\nOne last thing about this PR: I think we should only use viper for the root command. The others don't make sense to make use of it.\n\nI limited it to root and config. All other sources rely on settings.RuntimeCfg. The procedure is as follows:\n\nIn initConfig, settings.RuntimeCfg is filled with v.GetString.\nIf quickSetup is executed, settings.RuntimeCfg is compared with settings.RuntimeDefaults to get a map of non-default parameters.\nThe resulting map is saved in the DB, in a new field named Runtime that replaces previous BaseURL, Key and Scope/Root.\nWhen the server is started, if --force is unset, some of the fields in settings.RuntimeCfg are update with Runtime from the DB.\n\nNote that force=true is not implemented ATM. So, we can remove the flag.\n\nYes, we should allow users to import config and users. So I believe we should create the following two commands:\nSame applies for export.\n\nI'll check the corresponding PR.\n\nAnd just read the files. Maybe see if viper exports their parser (or see which parser they use) because it's canse insensitive and it would be helpful for users. And only use Viper with the root command.\n\nI think we can use parsers directly for import/export functions. Viper is meant to handle configuration parameters from multiple sources, not for complex structures. I'll comment further in the PR.\n\nFor root command: find a better alternative than force. Can you create an issue about Viper and force before getting into it?\n\nPlease, check the comment above.\n. Also, note that this PR is not ready to merge yet. settings/storage.go and storage/bolt/importer/conf.go need a review.. > @1138-4EB still I don't think we need Viper for config. If we use config import there's no need for viper on config set/init. config import is capable of initing or replacing a database depending on its existence.\nIt is removed now.\n. Just because of curiosity, does this python thing have anything to do with the programming language?. It was driving me mad, trying to find any reference about golang and python on the net \ud83d\ude06.. I think we can extend it for a user to be able to be in multiple groups. For each resource, we evaluate the permissions of each of the groups and the ones of the user, resulting in the most permissive.\nSo, each user struct has a new field which is a list of groups. But I am not sure about how to implement groups. Would those be users without login? Or should be declare a new type? I think a new type would be better, because it would allow future extensions such as setting owners of the groups.. If I recall correctly, viper already does this with environment variables. I.e., each time viper.GetString is called, the corresponding envvar is evaluated. However, from our point of view is quite useless ATM, because we read the parameters just once (when starting the server). Even if viper changed the values (either because envvars are reset or because a config file change), the server would not be aware about it. Are you thinking about restarting the server when changes are detected?. Cool! However, I think I cannot edit the content. I mean, mark issues as wontfix/invalid.. I can see Code Climate in Settings > Applications > Authorized OAuth Apps. But, there is nothing to configure there.\nI cannot access File Browser Organization Settings in GitHub, because I am not an owner. But I can see other organizations there (which I own). Coherently, I can add repos from those organizations to Code Climate.\nTherefore, I think that it might be limited to organization owners. Unless there is some option in Code Climate to explicitly add some user.. For some reason my account was blocked. I'm trying to fix it.. At some point I tried to revoke access from GitHub and enable it again. But it didn't logout properly, so it created a user tied to my email account, with an unknown password. Now, if I try to login with GitHub it says that the email is already used.. It works now! I reset the account, linked it to GitHub, I can acces settings now.. If your are ok with the latest changes, I will publish a release as soon as this is tested.. I'd say that docker is running filebrowser ./filebrowser config cat. The command should be docker-compose exec filebrowser config cat.\nSince there is no other binary/executable in the container, it is ok for the entrypoint to be filebrowser. Overall, the container replaces the binary functionally, it is not a VM with some content.. I gave it a try, and I could partially reproduce the issue:\n``` bash\nwinpty docker run -it --rm --name=filebrowser filebrowser/filebrowser version\nFile Browser version v2.0.0\nwinpty docker run -it --rm --name=filebrowser filebrowser/filebrowser\n2019/01/16 16:16:34 Using config file: /.filebrowser.json\n2019/01/16 16:16:34 Listening on [::]:80\n```\nNow, in a different shell:\n``` bash\nwinpty docker exec -it filebrowser //filebrowser version\nFile Browser version v2.0.0\nwinpty docker exec -it filebrowser //filebrowser config cat\n2019/01/16 16:18:10 timeout\nwinpty docker exec -it filebrowser //filebrowser hash somepass\n$2a$10$cjIkU9xQw8dI81mB14I0o..onUW0o3RlUpeBfgKuzcigcUiTfzDv6\nwinpty docker exec -it filebrowser //filebrowser users ls\n2019/01/16 16:27:43 timeout\n```\nSo, it is not true that any command that you exec into the container will fail. However, we should identify why config cat and users ls do fail.. @hacdias, after the proof of concept by @alpetric, would it be possible to add support for communication between filebrowser instances?\n\nFilebrowser is executed once and, as usual, it gets access to the database. Additionally, it generates a lock (say an envvar or a file).\nWhen a subcommand (users, cmds, rules, etc.) is executed, the lock is checked.\nIf the lock does not exist, proceed as usual.\nIf the lock exists, do not open the database. Make a call to the main instance instead.\n\nSince all the calls to filebrowser are expected to be done with the same exact binary, we can add checks to somehow ensure that these admin calls are only produced by it.\nOptionally, the lock can be a pipe, so calls between filebrowser instances are done through it, instead of using the (local) network.. For this specific case, where the size of the DB is 0, I think that we can consider it equivalent to an unexisting DB file. It is almost the same situation; we just avoid the creation of the file.\nNevertheless, I think that adding some \"version\" info is an interesting feature. I am just not sure about all the contexts:\n\nDB file does not exist\nCreate and quicksetup.\n\n\nDB file does exist but size is 0\nquicksetup.\n\n\nDB file does exist, size is not 0, and there is a version field\nRun normally\nor update if version is old.\n\n\nDB file does exist, size is not 0, but there is no version field\nShould we remove the existing content? Write our own while keeping the existing data? Ask the user?. What a coincidence, I just opened a PR for it. Let's merge this.. I'm quite lost. I always use File Browser locally, i.e., with no-auth and without any proxy. If I did understand correctly, this issue is about handling authentication with a frontend (be it caddy or nginx). Then, maybe @maweck can help us here (see #485).. You need to build the frontend first, then generate the rice-box.go and last compile the backend. See https://docs.filebrowser.xyz/contributing#build. @blingblingyoyo, you can use some tool (such as screentogif) to record a screencast, in case that helps you describe the issue.. Now there is no mechanism to use config init to set a noauth instance with other custom options. At the same time, quick setup cannot be executed without starting the server inmediately (with some non-customized options).\n\n\n\nIn the previous version, you could run a quick setup (the default and single option), which would read a config file, and where you could provide all the parameters for noauth mode. The server would start with the parameters set by the user.. This is the config file that I was using with v1: https://github.com/1138-4EB/hwd-ide/blob/c0fcf1ef260f78546dcf2cd4b2d65ef21943d2a7/filebrowser/filebrowser.config.yml\nThis is the one for v2: https://github.com/1138-4EB/hwd-ide/blob/develop/filebrowser/filebrowser.config.yml. Note the list of allowed commands: filebrowser.config.yml#L22-L29\nWith custom parameters I mean e.g. the list of commands, which is supported in config, but not in quick setup. Conversely, in config commands can be provided, but --noauth does not work.\nEDIT\nWell, I found it now. With config the flag is not --noauth. The correct syntax is --auth.method=noauth: https://docs.filebrowser.xyz/configuration/authentication-method#no-authentication. Hi @Inlustra! Argument/option --auth.method=noauth corresponds to filebrowser config. It is not possible to do it in a single step anymore. Your command needs to be composed of multiple subcommands:\n\nInitialize a DB with filebrowser (quick setup) or filebrowser config init.\nConfigure all the desired options in the DB with filebrowser config set.\nStart Filebrowser.. Originally I saw this behaviour in filebrowser/docs#7. I could now reproduce it with:\n\n``` bash\ndocker pull filebrowser/filebrowser\ndocker build -t fb_tmp - <<-EOF\nFROM alpine\nCOPY --from=filebrowser/dev /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt\nCOPY --from=filebrowser/filebrowser /filebrowser /usr/local/bin/filebrowser\nEOF\ndrun=\"docker run --rm -v /$(pwd)/mydb.db://mydb.db\"\ntouch mydb.db\n$drun fb_tmp filebrowser config init -d //mydb.db\n$drun fb_tmp filebrowser users add -d //mydb.db user admin --commands '.*' --perm.admin\n$(command -v winpty) $drun -itp 8080:8080 fb_tmp filebrowser -d //mydb.db -a 0.0.0.0\ndocker rmi fb_tmp\n bash\nSending build context to Docker daemon  2.048kB\nStep 1/3 : FROM alpine\n ---> caf27325b298\nStep 2/3 : COPY --from=filebrowser/dev /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt\n ---> c5d4293376ef\nStep 3/3 : COPY --from=filebrowser/filebrowser /filebrowser /usr/local/bin/filebrowser\n ---> e3d6f4ce37b8\nSuccessfully built e3d6f4ce37b8\nSuccessfully tagged fb_tmp:latest\nSECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.\nCongratulations! You've set up your database to use with File Browser.\nNow add your first user via 'filebrowser users new' and then you just\nneed to call the main command to boot up the server.\nSign up:      false\nAuth method:  json\nShell:\nBranding:\n  Name:\n  Files override:\n  Disable external links:  false\nServer:\n  Log:       stdout\n  Port:      8080\n  Base URL:\n  Root:      .\n  Address:   127.0.0.1\n  TLS Cert:\n  TLS Key:\nDefaults:\n  Scope:      .\n  Locale:     en\n  View mode:  list\n  Commands:\n  Sorting:\n    By:   name\n    Asc:  false\n  Permissions:\n    Admin:     false\n    Execute:   true\n    Create:    true\n    Rename:    true\n    Modify:    true\n    Delete:    true\n    Share:     true\n    Download:  true\nAuther configuration (raw):\n{\n  \"recaptcha\": null\n}\nID  Username  Scope  Locale  V. Mode  Admin  Execute  Create  Rename  Modify  Delete  Share  Download  Pwd Lock\n1   user      .      en      list     true   true     true    true    true    true    true   true      false\n2019/02/07 04:24:08 No config file used\n2019/02/07 04:24:08 Listening on [::]:8080\n2019/02/07 04:24:23 /: 500 172.17.0.1:60284 fork/exec : no such file or directory\n2019/02/07 04:24:31 /: 500 172.17.0.1:60286 fork/exec : no such file or directory\n```\nThis is a Win10 host with Firefox 64.0.2 in a new private window. @kolaente, may I know which browser, binary and host did you try?\n. @YunYouJun we didn't guess which is the bug yet.. Please, fill the bug report template and provide as much info as you can. Are you using docker? Is it a remote server? Can you curl localhost:4000 in the same machine? Which version of filebrowser are you using? The configuration file seems to correspond to branch v1. If you are using filebrowser v2.0.0 or above, you need to update it.. You can have a look at: https://docs.filebrowser.xyz/upgrade-from-1.x. It can be because net.ipv6.bindv6only=1 in your CentOS. Can you check it and, if so, change if to 0? References:\n\nhttps://github.com/moby/moby/issues/2174\n\nhttps://github.com/golang/go/issues/679. I think it is a good idea. Precisely, it is similar to filebrowser/frontend#55, which are command bookmarks. Some thoughts about it:\n\n\nHow many lists of bookmarks will there be? A single one for all the users, one for each user, or one for each group of users?\n\nWho will be able to add/remove bookmarks? Only the admins? \nIf the list is per user/group, how can the admin see the list corresponding to each of them? I.e., does the field need to be added to the user settings in the frontend?\nShould the list(s) be modifiable through the CLI? Does it belong to subcommand config or users?\n\n\nMoreover, I'd like to bring some additional thoughts about the frontend. I think that the sidebar takes too much space for the functionality it offers. ATM, only five buttons are shown (along with the version and a link to the help). I think that buttom My files can be removed, and use the 'home' symbol of the filebrowser logo instead. The others can be moved to the top bar. We can add separators in the top bar if that helps.\nI'm bringing this now, because I think that 'Bookmarks' should be a button in the top bar, with a dropdown menu. The first item in the dropmenu would be to add the current location to the list. The other elements in the menu would be the items in the list (the bookmarks).. Hi @wozuishuai13768! There are three different issues here. Can you please split them?\n\nUnable to change a user's permission by following command. Open new issue. Try to reply the following questions there: What output do you get, if you get any at all? Are you sure that there is no other database file which can be being used? Is there any configuration file? Is the configuration file being used? How did you initialize the configuration? All these questions are related to #653.\nBtw, I cannot set up almost anything through your docs (maybe it's my fault), please give a more clear and detailed documentation, thank you. This is the issue that corresponds to the title. Please, elaborate. What do you find unclear? What were you searching for and you couldn't find? What do you know already and what do you want to learn?\ndocker would create a directory that has the same name, then an error occurred. Open new issue. Provide the command your are using to run the container.\n\nFor issues 1 and 3, please provide the version of filebrowser and the host OS.. @hacdias, although three issues were split, the topic of this one is not solved yet:\n\n@1138-4EB wrote:\nThis is the issue that corresponds to the title. Please, elaborate. What do you find unclear? What were you searching for and you couldn't find? What do you know already and what do you want to learn?\n\nSo, @wozuishuai13768, if you want to follow-up, don't hesitate to reply here.. Did you try executing ./wizard.sh -b from the root of this repo? Optionally, USE_DOCKER=\"true\" ./wizard.sh -b will execute everything in a docker container.\n\nhttps://github.com/filebrowser/filebrowser/blob/master/wizard.sh#L176-L212\nhttps://github.com/filebrowser/filebrowser/blob/master/wizard.sh#L79-L93\nhttps://github.com/filebrowser/filebrowser/blob/master/wizard.sh#L103-L110. > > Did you try executing ./wizard.sh -b from the root of this repo?\nYes, the same problem.\n\n\n\nIt seems that it can properly get the dependencies when they are missing (that's why it works inside the container). However, neither go mod download nor go get ./... seem to be able to checkout the proper version if you already have a different one.\nI am not sure. Maybe this is how go mod is expected to work. Can you run go mod vendor and build with it instead of the other locations in your host?\n\nIt works (there is another problem: it produces Linux binary, but I'm on Mac)\n\nSure. Just add GOOS and GOARCH flags to line wizard.sh#L108. We use a separate procedure (goreleaser) to generate all the artifacts for the different platforms.\n. > > Can you run go mod vendor\n\nDidn't help. Seems like it just copies the content of $GOPATH/pkg/mod\n\nNote that go mod vendor will only create and fill the subdir. Apparently, you need to run go build -mod vendor (line wizard.sh#L108) in order to use it. See https://www.reddit.com/r/golang/comments/9ai79z/correct_usage_of_go_modules_vendor_still_connects/.\n\nThank you for your help :)\n\nYou are welcome. I'm glad it worked in the end ;).\n. Thanks for reporting it. It should be fixed now. The correct URL is https://github.com/filebrowser/filebrowser/blob/master/.docker.json. Hi @wozuishuai13768! There is nothing wrong here. That is the expected behaviour of docker. When you try to bind a path on the host with -v <HOST_PATH>:/<CONTAINER_PATH>, if <HOST_PATH does not exist, a directory is created. You need to ensure that .filebrowser.json and filebrowser.db exist, if you want to bind them as files. See https://docs.docker.com/storage/bind-mounts/#differences-between--v-and---mount-behavior.\nHowever, note that there is already a .filebrowser.json file inside the container (/etc/filebrowser/.filebrowser.json). You don't need to provide another (empty) one. You only need to provide it if you want to use yours. The same applies to the database: unless you want to provide your own, it is not required to bind it. Moreover, if you bind the parent directory (/srv/test/filebrowser), you don't need to bind each file explicitly.\nLast, you don't need to use /srv as the folder on the host. That parameter corresponds to filebrowser inside the container. For example, to bind a subdir of wherever you are:\nbash\n$ mkdir -p filebrowser_data\n$ sudo docker run \\\n  -v $(pwd)/filebrowser_data:/srv\n  -p 21190:80 \\\n  filebrowser/filebrowser\nEDIT\nNote that there are three relevant paths inside the container:\n\nThe config file.\nThe database file.\nThe directory where the content to be served is saved.\n\nThe config file and the database file need not to be in the directory which is to be served. Otherwise, any user would have access to them. That's why the example in the docs provides three different binds. Nevertheless, it can also be achieved with a single bind. For example:\n- filebrowser_dir\n  - data\n  - filebrowser.db\n  - .filebrowser.json\nbash\n$ sudo docker run \\\n  -v $(pwd)/filebrowser_data:/srv\n  -p 21190:80 \\\n  filebrowser/filebrowser -c /srv/.filebrowser.json -d /srv/filebrowser.db -r /srv/data. The changes in the dependencies are quite similar to https://github.com/filebrowser/filebrowser/pull/664/files. In #663, we saw that there is no problem in a empty/clean go environment (that's why Travis CI does not fail). However, go mod does not behave as expected when some of the packages are already available on the host.\n\nso we need to keep track of its dependencies in our go.mod. I've updated the version of both github.com/mholt/archiver and github.com/pierrec/lz4 to fix this.\n\nCould you, please, elaborate on this? How did you update the version? Manually or with some go command? Shouldn't it be updated automatically by go get?\nI'm ok with merging this. I just want to understand the procedure and the motivation behind it, so that we can fix it when it happens again.. Thanks @kolaente!. > I think these build instructions used to be on the README at some point. If they weren't before, any chance we could get them added in the Install on the FB.xyz site so they are there for future?\nPlease, have a look at https://docs.filebrowser.xyz/contributing\n. > So in the contributing link it says at the end to do a go build.\nNot exactly. go build is the last step in a page with six of them. So, you are expected to read and execute it from the beginning. Jumping directly to go build without understanding the structure of the project is likely to fail.\n\nTBH I didn't even look in that page as I wasn't contributing to the code.\n\n'Contributing' is used as a synonym for 'Development'. Precisely, guessing how to build filebrowser for your platform (where it is failing now) is a contribution to the project, even if you don't expect to push it back to master.\n\nIf I create a pull request for the 'install' xyz page to add some of the points for manual install, will you add it to the page? \n\nSure, we are open to any enhancement to the docs. See https://github.com/filebrowser/docs. However, note that this issue is about 'building' filebrowser in order to obtain a binary. With 'install', we understand that the user does already have it.. > Compiling filebrowser from source on arm using 'go get'\nThis is not correct. You did download and build the backend only, not the frontend. That's why it is complaining. You need to first build it, so that html, js and css are available in frontend/dist. Then, you can either distribute that folder with your binary, or you can build the backend again with these sources embedded into it. Please have a look at https://docs.filebrowser.xyz/contributing#project-structure.\nI'm closing this issue. But feel free to continue the discussion if you have any further question.\nEDIT\nWith USE_DOCKER=\"true\" ./wizard.sh -b, everything will be properly built in a docker container and you will get a working binary.. > I don't use docker.\nThen, ensure that you have all the dependencies (see filebrowser/docker-dev:Dockerfile#L5 and get_deps.sh) and run ./wizard.sh -b (without the envvar).\n\nThat is why there should be a section in the installation page (not contributing) for building from source. Once this is all done I'll try to put together a set of steps for the install page.\n\nThat's wizard -b. See:\n\nhttps://github.com/filebrowser/filebrowser/blob/master/wizard.sh#L209-L210\nhttps://github.com/filebrowser/filebrowser/blob/master/wizard.sh#L79-L93\nhttps://github.com/filebrowser/filebrowser/blob/master/wizard.sh#L103-L110 \n. > Like I have a file.txt in ./files, it just can be download, it can not being preview and edit.\nBut test.txt in ./files/test can being preview and edit, and of course download too.\n\n\n\nIs it ./files/test or ./files/test.txt? What's the size of both test[.txt] files? Is it the same?. > Emmmm, my fault, wrong typing, it should be ./files/test.txt and ./files/test/test.txt.\nIt is ok. Filebrowser does check the extension of the files, so it could have been relevant.\n\nThis description just for issue example. It is not truly existence.\nThose file are not the same size. But they are text files.\n\nThe size is relevant. There were some recent 'fixes' to precisely avoid loading large text files. See #558 and #531.\n\nI though if you can login to my server, you can try it your self.\nPlease contact me via telegram if you can.\nI can create an user for you on testing.\n\nUnfortunately, we are just volunteer students in our spare time, and we cannot offer this kind of service. We need you to debug you own platform and provide enough information, context and example files here so that other users can reproduce the issue on their own. This helps us focus on issues/bugs in the code base, and not on user-specific settings.. Is any error shown in either the log of the backend or the console of the browser (frontend)?. @442hz thanks a lot for the finding. That's a very good hint, indeed. It seems a naive implementation that we can probably improve.\n\n@chinanoahli have you ever tried building filebrowser yourself instead of using the released bineries? If so, you can just replace utils.go#L4-L11 with return false. That would let us confirm that issue is with that function.\nAlternatively, you can scan the offending file and check if any of the char has a decimal value of 65533 or <= 8. If found, try removing just those chars from the file and opening it with filebrowser.. According to https://groups.google.com/forum/#!topic/golang-nuts/YeLL7L7SwWs, I wrote a fix that uses net/http.DetectContentType to detect the type. See this commit. This is available in branch fix-isbinary. Also, a docker image with this fix is available: filebrowser/filebrowser:issue-681.\n@442hz, @chinanoahli, please let us know it works for you, whenever you have time to test it.. @442hz, I think it is better in this use case to have false positives, rather than having false negatives, as we have now.\nThe GBK encoded SRT file seems to be a very specific example, as neither MIME nor file return the value you expect. Certainly, it seems to be a valid text, indeed, since the first three lines are shown equally with or without iconv. That means that it is not a non-text file, but a text file with some encoded content inside.\nWhich do you think that should be the correct MIME type? https://www.iana.org/assignments/media-types/media-types.xhtml. I don't really know which are the requirements for mimetypes to be available in a device. Isn't it possible that the golang implementation does it on it's own and does not rely on any resource on the host? I say it because the function does not return any error. Otherwise, we can just check if it is available and fall back to another method.\nDo you have any further reference about this?. IE is not officially supported (see https://github.com/filebrowser/filebrowser/issues/529#issuecomment-451727981). Please, can you try with any of these?. There are multiple options:\n\nThe service did stop at some point but the cache in your browser is showing the frontend. If you try to login, it should fail. If so, just clear the cache or use private mode.\nIf the computer where filebrowser was executed has not been restarted since then, just do it.\nIf the service is running and you don't want to restart the computer, find it in the list of active processes and kill it.. You can set a different port with -p. For example, ./filebrowser -p 9090. Plase, have a look at https://docs.filebrowser.xyz/cli.. That's expected. It is reproducible in any bash terminal; nothing to do with filebrowser. You need to quote the argument you are passing to mv.\n\nbash\nbash -c \"mv /mnt/CloudDisk/$FILE /mnt/CloudDisk/.trash\"\nis expanded to:\nbash\nbash -c \"mv /mnt/CloudDisk/Back to origins /mnt/CloudDisk/.trash\"\nSince you want:\nbash\nbash -c \"mv '/mnt/CloudDisk/Back to origins' /mnt/CloudDisk/.trash\"\nyou need something like:\nbash\nbash -c \"mv /mnt/CloudDisk/\\\"$FILE\\\"' /mnt/CloudDisk/.trash\"\nor\nbash\nbash -c 'mv /mnt/CloudDisk/'\"$FILE\"' /mnt/CloudDisk/.trash'. I just tested this:\ndocker build -t fb_tmp - <<-EOF\nFROM alpine\nCOPY --from=filebrowser/dev /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt\nCOPY --from=filebrowser/filebrowser /filebrowser /usr/local/bin/filebrowser\nEOF\nbash\ndocker run --rm -itp 8080:80 fb_tmp filebrowser\nIt works exactly as expected:\nsh -c \"export TEXT=hello; echo \\$TEXT world\"\nhello world. @hacdias, when I saw the issue I checked the IP that is shown in the logs: https://www.speedguide.net/ip/11.1.1.11 Which is quite strange to me. However, I don't know if it is because the configuration of the user (firewall, some VPN), if it is some configuration he is not aware about (using it in a company), or if it has nothing to do with the issue.. Up to my knowledge armv9 does not exists. The latest architecture is armv8, which includes AArch64, AArch32 (similar but not equal to armv7 and armhf) and Thumb. Please, see https://en.wikipedia.org/wiki/ARM_architecture#64/32-bit_architecture.\nWhat do you mean with Other arm versions are too old? RPi3B, for example, is 2-3 years old and it is armv8.. You might mean ARM9, instead of armv9. If so, the device is probably old (before 2006), but it might still be supported. According to https://en.wikipedia.org/wiki/ARM9, the armv5 version (linux-armv5-filebrowser.tar.gz) might work. Otherwise, I don't think we can do anything, because earlier versions are not supported by golang: https://github.com/golang/go/wiki/GoArm#supported-architectures.. Please, see option -p in https://docs.filebrowser.xyz/cli/filebrowser#options. Please, use one of the forms we provide: https://github.com/filebrowser/filebrowser/issues/new/choose. It seems that there are two possible bugs here:\n\n'before save' and 'after save' hooks are not being properly triggered.\n'before upload' and 'after upload' are being incorrectly triggered when a file is saved.\n\n@davidpelayo, can you please check the browser log, and provide it along with the backend log? It would be useful to have them in text format or in static images.. In order to push docker images from travis-ci to hub.docker.com, docker credentials need to be set. These are added as encrypted variables through the travis CLI (a ruby gem you use locally). Those two secure strings are the hashes corresponding to envvars $DOCKER_PASS and $DOCKER_USER. When a build is executed, travis decrypts those and \"ensures\" that are not shown in the logs.\nFor further info see (in this order):\n\nhttps://docs.travis-ci.com/user/docker/#Pushing-a-Docker-Image-to-a-Registry\nhttps://docs.travis-ci.com/user/environment-variables#Encrypting-environment-variables\nhttps://docs.travis-ci.com/user/build-stages/share-docker-image/. Related to the comment about secure envvars above:\n\nIt is to be noted that those specific hashes correspond to my repo and the docker user I am using. Therefore, when this PR is merged, two new hashes should be created by i) a GitHub user that has write permissions to write in this repo and ii) using a Docker user that has write permissions to hub.docker.com/u/filebrowser.\nThe same person needs to know both credentials, in order to avoid sharing passwords between different people. Therefore, you should be the one that does it, or you should temporally give write permissions in this repo to me.\nThis script (enc-dockerhub.sh) is meant to make this configuration step easier. The procedure should be as follows:\n\nRemove the secure part of the .travis.yml file.\nEither:\nPush the previous change to the repo and run this script as is.\nDo not push anything and modify the run command to mount the local folder.\nJust run the content of this script locally, i.e., install the travis CLI in your machine.\nFollow the interactive steps explained by the CLI.\n\nPush the resulting .travis.yml with the two new hash strings to the repo.. A couple of additional notes on this topic:\n\n\nEncrypted environment variables in travis only work for own branches, not for PRs. This ensures that third parties won't be able to push potentially harmful images to the docker hub.\n\nIn my fork I am using travis-ci.com, because they are migrating open-source projects that used to be hosted in travi-ci.org (see https://blog.travis-ci.com/2018-05-02-open-source-projects-on-travis-ci-com-with-github-apps). However, this repo still is active in travis-ci.org. I suggest to change this before creating the new hashes.. > You have write permissions to all repositories on this organisation :smile:\n\nHad not tried it. Thanks!\n\nJust disabled it on the .org website. Although, on .com, it still says it is active on .org. Maybe we need to wait.\n\nI dropped them an email.. I think this is an unnecessary branch. The previous if contains a return statement, so there is no need for an else here. The flow will automatically execute if c.AuthMethod == \"proxy\" after evaluating c.NoAuth to false. Please, remove else and start in a new line.. Can you merge the following lines here?\n// Checks if the user exists.\n    u, err := c.Store.Users.GetByUsername(cred.Username, c.NewFS)\n    if err != nil {\n        return http.StatusForbidden, nil\n    }\nI.e.:\n// Receive the Username from the Header and check if it exists.\n    u, err := c.Store.Users.GetByUsername(r.Header.Get(c.LoginHeader), c.NewFS)\n    if err != nil {\n        return http.StatusForbidden, nil\n    }\nThis will allow not to evaluate c.AuthMethod again. See below.\nFurthermore, if you put the return after the check, you can avoid the last else. See above.\nc.User = u\nreturn printToken(c, w). If the check and return instructions are added inside the previous block (see comment above), this additional condition needs not to be checked.. I think that you removed this line. So trying to use cred.Username and/or cred.ReCaptcha afterwards should fail.. They are sorted in alphabetical order now. I think this is because gofmt was used. Should we use goimports instead? See http://goinbigdata.com/goimports-vs-gofmt/. Sure. I replaced it with dist/*.*. This will include CHANGELOG.md and config.yaml too. Is it ok?\nbash\n$ ls dist/*.*\ndist/CHANGELOG.md                        dist/linux-armv5-filebrowser.tar.gz\ndist/config.yaml                         dist/linux-armv6-filebrowser.tar.gz\ndist/darwin-amd64-filebrowser.tar.gz     dist/linux-armv7-filebrowser.tar.gz\ndist/dragonfly-amd64-filebrowser.tar.gz  dist/netbsd-386-filebrowser.tar.gz\ndist/filebrowser_0.0.0_checksums.txt     dist/netbsd-amd64-filebrowser.tar.gz\ndist/freebsd-386-filebrowser.tar.gz      dist/openbsd-386-filebrowser.tar.gz\ndist/freebsd-amd64-filebrowser.tar.gz    dist/openbsd-amd64-filebrowser.tar.gz\ndist/linux-386-filebrowser.tar.gz        dist/solaris-amd64-filebrowser.tar.gz\ndist/linux-amd64-filebrowser.tar.gz      dist/windows-386-filebrowser.zip\ndist/linux-arm64-filebrowser.tar.gz      dist/windows-amd64-filebrowser.zip\nbash\n$ tree dist\ndist\n\u251c\u2500\u2500 CHANGELOG.md\n\u251c\u2500\u2500 config.yaml\n\u251c\u2500\u2500 darwin-amd64-filebrowser.tar.gz\n\u251c\u2500\u2500 dragonfly-amd64-filebrowser.tar.gz\n\u251c\u2500\u2500 filebrowser_0.0.0_checksums.txt\n\u251c\u2500\u2500 freebsd-386-filebrowser.tar.gz\n\u251c\u2500\u2500 freebsd-amd64-filebrowser.tar.gz\n\u251c\u2500\u2500 linux-386-filebrowser.tar.gz\n\u251c\u2500\u2500 linux-amd64-filebrowser.tar.gz\n\u251c\u2500\u2500 linux-arm64-filebrowser.tar.gz\n\u251c\u2500\u2500 linux-armv5-filebrowser.tar.gz\n\u251c\u2500\u2500 linux-armv6-filebrowser.tar.gz\n\u251c\u2500\u2500 linux-armv7-filebrowser.tar.gz\n\u251c\u2500\u2500 netbsd-386-filebrowser.tar.gz\n\u251c\u2500\u2500 netbsd-amd64-filebrowser.tar.gz\n\u251c\u2500\u2500 openbsd-386-filebrowser.tar.gz\n\u251c\u2500\u2500 openbsd-amd64-filebrowser.tar.gz\n\u251c\u2500\u2500 solaris-amd64-filebrowser.tar.gz\n\u251c\u2500\u2500 windows-386-filebrowser.zip\n\u251c\u2500\u2500 windows-amd64-filebrowser.zip\n\u251c\u2500\u2500 darwin_amd64\n\u2502   \u2514\u2500\u2500 filebrowser\n\u251c\u2500\u2500 dragonfly_amd64\n\u2502   \u2514\u2500\u2500 filebrowser\n\u251c\u2500\u2500 freebsd_386\n\u2502   \u2514\u2500\u2500 filebrowser\n\u251c\u2500\u2500 freebsd_amd64\n\u2502   \u2514\u2500\u2500 filebrowser\n\u251c\u2500\u2500 linux_386\n\u2502   \u2514\u2500\u2500 filebrowser\n\u251c\u2500\u2500 linux_amd64\n\u2502   \u2514\u2500\u2500 filebrowser\n\u251c\u2500\u2500 linux_arm_5\n\u2502   \u2514\u2500\u2500 filebrowser\n\u251c\u2500\u2500 linux_arm_6\n\u2502   \u2514\u2500\u2500 filebrowser\n\u251c\u2500\u2500 linux_arm64\n\u2502   \u2514\u2500\u2500 filebrowser\n\u251c\u2500\u2500 linux_arm_7\n\u2502   \u2514\u2500\u2500 filebrowser\n\u251c\u2500\u2500 netbsd_386\n\u2502   \u2514\u2500\u2500 filebrowser\n\u251c\u2500\u2500 netbsd_amd64\n\u2502   \u2514\u2500\u2500 filebrowser\n\u251c\u2500\u2500 openbsd_386\n\u2502   \u2514\u2500\u2500 filebrowser\n\u251c\u2500\u2500 openbsd_amd64\n\u2502   \u2514\u2500\u2500 filebrowser\n\u251c\u2500\u2500 solaris_amd64\n\u2502   \u2514\u2500\u2500 filebrowser\n\u251c\u2500\u2500 windows_386\n\u2502   \u2514\u2500\u2500 filebrowser.exe\n\u2514\u2500\u2500 windows_amd64\n    \u2514\u2500\u2500 filebrowser.exe. I am at it. Will push soon.\nhttps://godoc.org/github.com/spf13/pflag#FlagSet.MarkDeprecated. Done. See https://github.com/filebrowser/filebrowser/pull/506/commits/1314e432be7235af20c35b5d815b7b4a73cda059.. Should we really add this condition? Filebrowser can be executed inside MSYS/MinGW, where bash is available.. I fixed this condition.. If bash -c or sh -c are used, the original command must be passed as a single argument. I.e., command ls -la ./* should be executed as bash -c \"ls -la ./*\". Else, it is executed as bash -c ls. That's why I added strings.Join.. On windows, if autocrlf is set to true, git will replace LF with CRLF. So, when docker is used on windows, executing these scripts inside linux containers might fail. That's the rationale to use dos2unix.. This is mostly meant for Travis CI. Locally, the user should handle the login before running the script. This is because a specific version of docker-credential-pass is distributed inside filebrowser/dev. I.e., on Windows, dockerLogin will probably fail. It will also fail in any non-amd64 machine.\nSo, it is ok to keep this function here. But I think we should add a comment about it.. In filebrowser/dev envvar CGO_ENABLED=0 is set. See https://github.com/filebrowser/docker-dev/blob/master/Dockerfile#L12. Thus, this script will produce a portable binary when executed inside filebrowser/dev. Otherwise, the binary will be static but it will depend on the standard library available on the system.\nTherefore, it might be desirable to prefix line 88 with CGO_ENABLED=0.. Agree.. It is enabled by default for native builds, and disabled for cross-compilation. See: https://golang.org/cmd/cgo/\n\nThe cgo tool is enabled by default for native builds on systems where it is expected to work. It is disabled by default when cross-compiling. You can control this by setting the CGO_ENABLED environment variable when running the go tool: set it to 1 to enable the use of cgo, and to 0 to disable it.. Yes, they were. It should be fixed now.. I hoped that closing would be deferred until either st or s are not used anymore; but it applies to the scope of the function, as you say. So I fixed it by deferring outside.. I'd like to respect the idea that a DB is enough. So, if anyone configures an empty DB with config init and he/she does not need to change any settings, copying the DB should be enough to backup/reproduce the setup.\n\nOn top of that, config files are an optional complement to make setup and/or rellocation easier. However, if you are OK with making the config file necessary, we can keep it as it is now.. I think that someone might want to have the baseurl, cert and key fixed in the DB, but set port and address from a config file, while other fields are ignored. Then, for some one-time test the cert and key can be overset. This allows the user to try new configs without modifying the DB until the changes are proven to work.\nNevertheless, why do scope and baseurl need to be in the DB? The http handler could equally get those fields from viper, isn't it?. I'm sorry, I skipped these two comments.\nI am interested in that possible conflict to use File Browser as a middleware if we rely on viper. We can explicitly set values for keys in viper, even if no CLI args, no envvars and no config files are provided. However, if that is still a limiting factor, we can keep those runtime parameters in a global variable.\n\nWe could actually send the values to the HTTP handler without being in the Settings struct though.\n\nThis is my main concern. If you see my last commits, I'm trying to replace fields BaseURL, Key, Scope/Root in the DB with a Runtime field of type map[string]string. This change allows to save none or many runtime parameters in the DB (only those that differ from defaults). However, the implementation I was working on does not read those values from the DB each time. Instead, an initial check is performed in serveAndListen to explicitly set viper keys with DB content, if suitable.. ",
    "MarvBob": "I am very interested in this feature. Any idea about a possible release ?. I tried but there is not button to delete the \"admin\" account, even if I log out of it and log into the \"new\" admin account.. Yes, it is exactly the same problem (sorry for creating a new issue), I get redirected to /users/new when trying to edit the admin user.\nBut I did mount the 3 volumes (config.json, database.db and /srv). My filemanager is runnning in a stack, here is my docker-compose file (without my network and backend rules) if it can help:\nyaml\nfilemanager:\n    image: hacdias/filemanager:latest\n    volumes:\n      - ./data:/srv\n      - ./filemanager/config.json:/config.json\n      - ./filemanager/database.db:/database.db\nAlso here is my config.json, which is almost the default one:\njson\n{\n        \"port\": 80,\n        \"address\": \"\",\n        \"database\": \"/etc/database.db\",\n        \"scope\": \"/srv\",\n        \"allowCommands\": false,\n        \"allowEdit\": true,\n        \"allowNew\": true,\n        \"commands\": []\n} \nI don't really understand how the database.db file is supposed to be used though, mine remains empty. Maybe my configuration is wrong somewhere ?\nAlso, is there a way to get an access into the container? The bash executable is not found. (Maybe that's another issue/enhancement).. Well, the database.db file is not empty now, but I still cannot remove or edit the admin user.. Yes. I can already update password but I'd like to update the login: I don't want it to be called admin because it makes it easier to bruteforce the account as you already know the login. Not really urgent but I think it could be a security improvement.. No problem, as I said this is not urgent. I'll try to check my configuration again, if it's working for you I must have something wrong.. I don't know how to access the dev console within the docker container ?. Here is what seems to happen: I start from the user management page, I have 2 users, admin and Bob.\n- If I click on Bob's edit button, it loads /auth/renew and then /users/2 and I can edit Bob.\n- If I click on admin's edit button, it loads /auth/renew, then /users/1, then /auth/renew again and then /users/base, then I'm on the \"new user\" page.\nI don't see any error though, but I'm not very familiar with web debugging so maybe you'd like more information.. Yes, here is a screenshot. There is an error but I don't think it is the cause of my problem (I might be wrong though).\nThe red line shows what happens when I click on edit admin.\n\n. oh.. let me know if I can help. Great, no TypeError anymore, and I am finally able to update the admin login!\nThanks a lot!. ",
    "deanet": "any update of this issue ?. ",
    "DeyV": "I did this, but I'm not sure, that it is best method to do that. \nhttps://github.com/DeyV/filebrowser-dockercompose\n\nadded p7zip to docker\nsimple bash to unpack archives in directory and remove them\nthis bash as additional command  \"commands\": [\"unpack\"]\n. I suggest  change default behavior. Everyone use google and other search tools, and most of them is case insensitive. It is especially important in file search, when nobody think about letters size (excluding programmers)   . \n\nit should be **.git\nto ignore all .git in all subfolders\nhttps://github.com/filebrowser/filebrowser/commit/3d3191b1541710bb416d3bcf2e8b7e7682f1a0ab#r29813412. for future - can You tell as what is Your branch strategy?. Users and they password are saved in DB. \nPassword is saved as hash, so it's not possible to retrieve it. \nBut if You delete this DB and restart filebrowser, app will start with default admin account and password . ",
    "ferronrsmith": "Tested again with FF 57.0a1 (2017-09-04) (64-bit) (Ubuntu Linux) same issue. I only use FF. Got the same issue with FF 57.0a1 (2017-09-06) (64-bit) on my mac. I'm sure it has something to do with XMLHttpRequest.  If I have some time this weekend I'll submit a PR. Are you sure the default scope was set ? https://henriquedias.com/filemanager/configuration/. ",
    "lihuacai168": "@ferronrsmith I follow this sample .https://caddyserver.com/docs/http.filemanager\n\n. @hacdias Thank for your answer,it works. ",
    "dstreet26": "Command line:\nfilemanager -p 42634 --staticgen hugo. Just to be clear and helpful, I would want to enter something like this:\nfilemanager -p 8080 --staticgen hugo --baseurl \"/admin\"\nOr something like that. \nAlternatively, in the config file:\njson\n{\n  \"port\": 8080,\n  \"noAuth\": false,\n  \"address\": \"127.0.0.1\",\n  \"baseurl\": \"/admin\"\n}. Now the response that I get is 404 Not Found for the index page.\nI have tried:\n\n\"admin\"\n\"/admin\"\n\"admin/\"\n\"/admin/\"\n\nI have tried with both the docker version and the command-line version.\nI also went back and tried to proxy the normal docker container without the \"baseurl\" option and got the same result as before (index page loads, but all assets are 404)\nI can open up a separate issue...\n. I was able to get what I want with caddy.\n```\nhttps://mywebsite.com\ngzip\nlog caddylog.log\nroot public\nhugo\nfilemanager /admin\ntls {\n    dns digitalocean\n}\n```\n. Now I can't launch filemanager:\nfilemanager -p 42634 --staticgen hugo  --baseurl \"/admin\"\n```\nunable to redefine 'p' shorthand in \"filemanager\" flagset: it's already used for \"port\" flagpanic: unable to redefine 'p' shorthand in \"filemanager\" flagset: it's already used for \"port\" flag\ngoroutine 1 [running]:\ngithub.com/spf13/pflag.(FlagSet).AddFlag(0xc4200ea2d0, 0xc420196be0)\n        /home/travis/gopath/src/github.com/spf13/pflag/flag.go:827 +0x45a\ngithub.com/spf13/pflag.(FlagSet).VarPF(0xc4200ea2d0, 0x13c9b40, 0x14053a0, 0xabb812, 0x9, 0xab5a72, 0x1, 0xabc01a, 0xa, 0xc420196b40)\n        /home/travis/gopath/src/github.com/spf13/pflag/flag.go:784 +0x120\ngithub.com/spf13/pflag.(*FlagSet).VarP(0xc4200ea2d0, 0x13c9b40, 0x14053a0, 0xabb812, 0x9, 0xab5a72, 0x1, 0xabc01a, 0xa)\n        /home/travis/gopath/src/github.com/spf13/pflag/flag.go:790 +0x8e\ngithub.com/spf13/pflag.StringVarP(0x14053a0, 0xabb812, 0x9, 0xab5a72, 0x1, 0x0, 0x0, 0xabc01a, 0xa)\n        /home/travis/gopath/src/github.com/spf13/pflag/string.go:53 +0xaa\nmain.init.1()\n        /home/travis/gopath/src/github.com/hacdias/filemanager/cmd/filemanager/main.go:56 +0x378\nmain.init()\n        /home/travis/gopath/src/github.com/hacdias/filemanager/cmd/filemanager/main.go:244 +0x9d\n```. It works!\nFor other people who might have this problem, here is my nginx config and command-line settings:\n```\nserver {\n    listen 80;\n    server_name mywebsite.com www.mywebsite.com;\n    return 301 https://$host$request_uri;\n}\nserver {\n        listen 443 ssl;\n        server_name mywebsite.com www.mywebsite.com;\n    #<SSL Stuff\n\n    root /usr/share/nginx/html;\n    index index.html index.htm;\n    server_name localhost;\n\n\n    location / {\n        try_files $uri $uri/ =404;\n    }\n\n    location ~ /.well-known {\n            allow all;\n    }\n\n    location /admin {\n            proxy_pass http://localhost:42634;\n    }\n\n}\n```\nfilemanager -p 42634 --staticgen hugo  --baseurl \"/admin\". ",
    "Sharkkkk": "7z is ok. I only mean it can add a compress online function and a Multi-threaded download function......axel is Multi-threaded download in ubuntu..... Uh\uff0cmy English is no very good. Let me give an example. Now , I have a file call 123.rar and it need a passward to decompress. So , I add a command unar and run unar -p xxx 123.rar  in search box to decompress 123.rar. But ,every time I want to decompress a file. I need to write again.....You know it is cumbersome to use... Could you add a function to run it more easy? So we don't need to write the command every time...some useful command like rar unar axel...... Could you get an example for me? I am a beginner in Linux.  I don't quite understand what you mean.... Thank you. It is a good way to solve this problem. But, you konw different files may have different password and the terminal in the web is not very eary to run more one command....\nI am recommand a program to you and I hope we can use the same function in your filemanager oneday.\nhttps://github.com/genshen/sshWebConsole\n. ",
    "rigon": "It seems to be a a problem with Firefox (I'm using 55.0.3 (64-bit)). I tested on Chromium and works perfectly. Here is a screenshot of the problem:\n\n. Yeah, good! It easy to ask (as we say \"mandar bitaites\"), but when we have to implement is another story :P. I created a script on Gist that performs this task automatically:\nbuild-filemanager.sh\n. I think he is referring to Angular.js version 2 (https://angular.io)\nOn Oct 17, 2017 08:49, \"Henrique Dias\" notifications@github.com wrote:\n\nSorry \ud83d\ude1e what is a \"2.x angled application\"?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/hacdias/filemanager/issues/256#issuecomment-337147586,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ABDRyALcKS1DUO5JsGP26qN4g6Fs2oO2ks5stFv9gaJpZM4P528V\n.\n. This leads me into another question: why did you choose Vue.js?. \n",
    "jivank": "I think having tabs for commands would be a simple way to have a decent experience of adding functionality to this application. It appears you can already run multiple tasks in the background, but you can only see the progress of the last command.\nThe only idea I had in mind for a more advanced command system is a plugin system (for each whitelisted command like git, wget, aria2) that offers a seamless web interface for each command. Or the custom button functionality that can be tied to a command (as seen on one of the other tickets). . ",
    "bpt6576": "Success! File Manager shows up in the plugins list and the Caddyfile directive for it is working. I am able to login and use File Manager. Thank you! Please consider adding the github URL clarification to either https://henriquedias.com/filemanager/installation/#caddy or https://caddyserver.com/docs/http.filemanager. ",
    "haai": "I understand your point ... well consider this situation:\nyou have a terraform configuration automatically setting up a complete cloud VPS with a caddy webserver and the hugo plugin. So good so far... to keep track of the users changes during the lifetime of the node you would like to save the changes via git. but to setup the commands you need to manually set it in the config. therefore it would be good to have a possibility to set those commands in the configfile.\nwouldn't it be possible to parse the commands during start and save them in the db during parsetime? what do you think of it?. ",
    "sleepwood": "thanks.. ",
    "gdunstone": "Its cosmetic so no rush.\nI would fix it myself but I'm unfamiliar with the codebase.. ",
    "manyang901": "I am using Android phone right now  and I can only found a   mini developer console on my phone \nI found an error when requesting api at ws://()/app/command \nt=7918 [st=517] \nnet_error = -320 (ERR_INVALID_RESPONSE). I will check it on my computer as soon as possible. api.js:184 WebSocket connection to 'ws://\uff08\uff09/api/command/' failed: Error during WebSocket handshake: Unexpected response code: 400\non chrome developer console. I am using config file listing below: config.yml\n``````\nport: 38765\nbaseURL: ''\nnoAuth: false\naddress: 127.0.0.1\nreCaptchaKey: ''\nreCaptchaSecret: ''\ndatabase: \"/etc/filemanager/database.db\"\nlog: \"/etc/filemanager/filemanager.log\"\nplugin: ''\nscope: \"/root\"\nallowCommands: true\nallowEdit: true\nallowNew: true\ncommands:\n  - git\n  - svn\n  - ls\n  - wget\n``````\nAnd using a nginx reverse proxy \n``````\nserver {\n        listen 80;\n        listen [::]:80;\n        server_name ~^FQDN$;\n    location / {\n            proxy_pass http://127.0.0.1:38765;\n            proxy_set_header  X-Real-IP  $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header Referer http:127.0.0.1;\n            proxy_set_header Host $host;\n            proxy_set_header X-Forwarded-Proto $scheme;\n    }\n\n}\n. i get stuck at the first page. on my phone i get \nHTTP2_SESSION_CLOSE\n                --> description = \"Connection closed\"\n                --> net_error = -100 (ERR_CONNECTION_CLOSED)\nand the socket is now available. GET http://static/js/manifest.958a39dfce02a7147aaa.js net::ERR_ABORTED\nGET http://static/js/vendor.44036de40396f416cb9a.js net::ERR_ABORTED\nGET http://static/js/app.406156321387f703a1c2.js net::ERR_ABORTED\nGET http://static/css/app.c5b9e7a3a9bd879a746e038e82cfeb60.css net::ERR_ABORTED\nGET http://static/js/manifest.958a39dfce02a7147aaa.js net::ERR_ABORTED\nGET http://static/js/vendor.44036de40396f416cb9a.js net::ERR_ABORTED\nGET http://static/js/app.406156321387f703a1c2.js 502 (No data received from server or forwarder)\nGET http://static/img/icons/favicon-32x32.png 502 (No data received from server or forwarder)\nGET http://static/img/icons/favicon-16x16.png 502 (No data received from server or forwarder)\non chrome web console on my computer. it should be http://FQDN/staic..... I have tried adding it \nAnd when I use \n`````\nprefixurl: 'fqdn/'\nThe element still can't load and the url change to http://fqdn/fqdn///static.....\nWhen I delete the '/' behind \nStill can't load\nWhen I set base url to '' (blank)\nNo luck\n. I guess nginx has some magic rewrite logic . Thanks . Thanks , I'll try it.. ",
    "dream10201": "@manyang901 \n\u770b\u6765\u6211\u4eec\u78b0\u5230\u4e86\u540c\u4e00\u4e2a\u95ee\u9898\uff0cnginx\u53cd\u5411\u4ee3\u7406filemanager\uff0c\u8fd9\u662f\u6211\u76ee\u524d\u53ef\u7528\u7684\u914d\u7f6e\nnginx\n\nfilemanager\n\n\u4f46\u662f\u8fd8\u662f\u6709\u4e00\u4e9b\u95ee\u9898\uff0c\u6bd4\u5982\n\n\u548c\u767b\u5f55\u540e\u7684\u5730\u5740\u680f\n\n. A url\uff0cMultiple filemanager\nE.g\nabc.com/file1/\nabc.com/file2/. Multiple may not all be file managers. This will be a problem, some url will be reported 404\u3002Sorry, my English is poor, translated by translation software. My RaspberryPi is out of power today and can not give you an error message. I send an error message later, Beijing time around 7: 00-9: 00,thank you for your help. Now normal,If baseURL is not set, the following configuration is not available\nlocation /file/ { \n    proxy_pass http://192.168.123.15:8787/; \n}\napi.js:34 GET http://192.168.123.15:8787/api/resource/file/ 404 (Not Found). Use prefixURL error, the page can not be displayed\nmanifest.1491131e12a62bc1f331.js:1 Uncaught SyntaxError: Unexpected token <\nvendor.44036de40396f416cb9a.js:1 Uncaught SyntaxError: Unexpected token <\napp.a856f9102ba06a5b90a5.js:1 Uncaught SyntaxError: Unexpected token <\nThere seems to be no problem using baseURL. Communication is more difficult, but the problem was solved successfully, thank you for your help again. Create multiple users. Unable to reproduce\uff0ceverything is normal\nversion\uff1a1.10.0. \u5220\u9664filebrowser.db\u5c31\u53ef\u4ee5\u4e86. ",
    "dsnet": "I just noticed https://github.com/hacdias/filemanager/blob/master/http/share.go, which may be exactly what I'm asking for. Feel free to close if it is. I haven't look into what this actually is yet in detail.. ",
    "helloray": "Please also consider to add an auto complete for search. Just like google. . I guess the zipped file is generated on-the-fly,  so the file size is unable to be known.  . @Equim-chan Please consider adding armv5 to your official release. There are plenty of pogoplug devices using armv5 SOC. \n@higeon I have compiled an armv5 version for my pogoplug v4(armv5+128M ram). It runs smoothly.. It looks like a network issue. sorry. close it.. Try to google \"nohup\" or \"screen\". . Is it possible to use this simple progress bar with text below it? https://dzwillia.github.io/vue-simple-progress/examples/. I have made a demo but it looks ugly. \n\n. This simple feature was already supported. Select a file and click the pen icon.. Why not paste your folder name here? You said a lot but without your folder name, nobody can solve your problem.. I use filebrowser(arm/x86 version) with over 10000 files in a single directory. No crash happened. . 440M is too large for a browser. The local program such as notepad may be hard to open it too.. I use local vendor directory solve this issue.\ncd $GOPATH/src/github.com/filebrowser/filebrowser\nmkdir -p vendor/github.com/gohugoio\ncd vendor/github.com/gohugoio\ngit clone https://github.com/gohugoio/hugo -b release-0.49.2\nAfter that, everything is OK. Maybe the better way is to use dep for  dependency management.\n. 10240 may be too small.  I think you should use a larger value. . I can confirm mobile browser is working perfectly with filebrowser. I use android and tested with chrome/firefox.. Hi @hacdias \nI really like this project. Thanks for your great work. I really hope this project can be continued.\nBecause you are studying in the uni, I think you may not have so much time to rewrite the project. \nI don't know how much difference between VUE and React. If VUE works well, why spending so much time to rewrite it? Those frontend frameworks are almost changing everyday. The most popular framework can be die at any time. I suggest you keep working on features and bug fix. Do not rewrite it.\nAt the moment, the most important thing is to introduce vendor management for go. Without that,  the project can not be compiled if any go lib changing their APIs. Other contributors can gain benefits from it too.\nThey are still many features and improvements could be made for this project.\n1. Folder upload(I can help to contribute it)\n2. Scrollbar management(The scrollbar position should be recorded and restored when user go back to parent directory. After user change a file name, the scrollbar should also jump to that file related area. )\n3. Preview enhancement(Current preview fetches the directory content everytime when user click prev/next button. This is extremely slow when the directory contains many files. Is it possible to cache the directory content?)\n4.Thumbnails for Image/Video #128 (@vitaliy-kuzmich has made it.)\n5.Floating music/video player #233, #421(@vitaliy-kuzmich has made it. Is it possible to make the music not stopped when operating filebrowser?)\n6.Workaround for videos that can't stream in browser #465 \n7.Fail to make archive with filenames that are too long #341\n. Hi @hacdias\uff0c If you did not mean complete rewrite it, please go ahead. I'm glad that you can come back on this project. Thanks a lot.\nBTW, you mentioned remove the integration with Caddy, is it possible to add builtin https support? A single standalone binary is better than run two applications. If there is a lot of work to do, just ignore this request.\n. @hacdias @1138-4EB It seems search function is not working. Items in search results can not be opened by click. Another question: How to enable the builtin https? I tried the -t option,  but filebrowser was still using http not https.. In Linux, command \"ls\" also show 4096 as folder size. This is normal not a bug. . ",
    "GlauberF": "angularjs or angular version 2. @hacdias in the company that I work, the front already exists in angularjs 1.5, so for that I have to look for a filemanager for angularjs. yes @hacdias . ",
    "MikeMichel": "config via env vars would be also nice https://github.com/kelseyhightower/envconfig. this opens the download dialog. ",
    "jzaefferer": "@hacdias since you added the label, does that mean you approve the idea?\nCould you point me in the right direction for reading the username and password from the config?. Thanks for the pointers. I'll give that a try (or ask a colleague).. Its possible that the only required change is this: https://github.com/var2dan/filemanager/commit/351dd8ee1244e231eb77b6efec57cb95dc2ab07b\nNot sure if that still merges into current master; probably also needs updates to tests and docs.. ",
    "ncresswell": "Funny enough, im actually looking to use this project within Portainer as a way to provide users with a way to download files from existing containers persistent volumes.. We have actually already added filebrowser as a template in Portainer, but we want to get even closer integration.\nWhere is the username/password actually stored? Is it embedded in a db or encrypted file somewhere?\nRgds,\nNeil Cresswell\nOn 15/06/2018, at 4:09 PM, 1138-4EB notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=vF_MO7_bc6o-dwelDVAmy1PTrv5eH-Dy1q3IIw2C0FU&s=vuyWnkvmBHkesp59BSc5NmwkuUxo1uk7idCVv4HcpuM&e=, indeed, I got to know this project when you mentioned it in portainer/portainer#1380https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1380&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=vF_MO7_bc6o-dwelDVAmy1PTrv5eH-Dy1q3IIw2C0FU&s=Z45T5bcdKsf51tP1ccVPKlVYQfy4zFbRHSd-UmEl6IE&e= in november. Do you think that the know-how you have in portainer about this issue can be somehow ported here?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_filebrowser_filebrowser_issues_257-23issuecomment-2D397763906&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=vF_MO7_bc6o-dwelDVAmy1PTrv5eH-Dy1q3IIw2C0FU&s=icjMcN2vnYQaNew9Uc_Fhd3LTqaBkfXJqwv2gjuk5ac&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrleh5Vj1SETd0JONFTyVozdNwmteVks5t9D6ygaJpZM4P9VpX&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=vF_MO7_bc6o-dwelDVAmy1PTrv5eH-Dy1q3IIw2C0FU&s=Klj2RCCG6YCsc8pav2jW4lNTGLTC3uKXtMOFG5k46qo&e=.\n. Is there a list of supported search operators?\nRgds,\nNeil Cresswell\nOn 2/06/2018, at 7:44 PM, Henrique Dias notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=8_FVYz0i37uxn8teGIZNvSmTOBQp-9l8i1sOtYTimQ0&s=i5LNuMTjZoZphkxTWr8IntPOKVyBY7Sr6VV_SPCnFuw&e= actually, this is feature is kind of implemented: instead of raw, try the following: ?dl=1&inline=true\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_filebrowser_filebrowser_issues_430-23issuecomment-2D394067053&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=8_FVYz0i37uxn8teGIZNvSmTOBQp-9l8i1sOtYTimQ0&s=HjDgbMyARQtfs5eHjjqU5BJEWhaYlBaeAWVAv8gJULk&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlaCznlKOQ301cufl7iRwU61zQFoVks5t4kJOgaJpZM4UUU6c&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=8_FVYz0i37uxn8teGIZNvSmTOBQp-9l8i1sOtYTimQ0&s=rlSe0i_zaF4Tt4xUEQrSWUF8PEG2JkSFTx4KHrFlEOQ&e=.\n. ",
    "zxl777": "I think this is a bug in v1.3.9.\nWhen I double click on the file \"messages.xml\" will open edit view ,\nBut double click on the other file \"config.yml\" will open download view.\n\n\n. \n. Thank you. ",
    "magikstm": "I tested locally on a Windows 7 x64 laptop and I can confirm this issue.\nIt can be reproduced minimally with this Caddyfile:\n:2015 {\n    root C:/caddy-filemanager-test  # the folder where Hugo generates the website\n    hugo /admin /admin # enable the admin panel\n    basicauth /admin username password\n}\nI can also confirm these behavior:\n1) If I don't try a \"user\" & \"password\" and click \"Cancel\" I get \"401 Unauthorized\"\n2) If I enter the right \"user\" & \"password\" then click \"Ok\" I seem to get a loop that requests credentials\n3) If I enter the right \"user\" & \"password\" then click \"Cancel\" I see the FileManager\nThe issue seems to be the loop requesting credentials after a successful \"user\" & \"password\".. I can confirm the same behavior with filemanager.\nWith this minimal caddyfile:\n:2015 {\n    root C:/caddy-filemanager-test\n    filemanager /admin\n    basicauth /admin username password\n}. I tested the [no_auth] parameter with filemanager and hugo and it worked with my minimal tests.\nIt'll probably resolve OP's issue.\nI would suggest adding a few lines in the docs here about this possible issue with other auth plugins:\nhttps://henriquedias.com/filemanager/caddy/. The IE11 Developer Console mentions these:\nHTML1300: Navigation occurred.\nFile: files\nSCRIPT5022: [vuex] vuex requires a Promise polyfill in this browser.\nFile: vendor.44036de40396f416cb9a.js, Line: 1, Column: 52284\n\n. IE11 is still about 2.5% of users and it seems to affect other browsers a bit. I do have a few users still using this browser.\nCould it be resolved by adding a polyfill like this?\nhttps://maketips.net/tip/321/fix-vuex-requires-a-promise-polyfill-in-this-browser\nOr this?\nhttps://github.com/stefanpenner/es6-promise. ",
    "skyfaller": "Thank you folks, hacdias's suggested Caddyfile did indeed fix my problem.\nI'm not married to basicauth though, I'd be happy to use Filemanager's own auth system. How do you use it? More specifically, how do you set your username + password? I see no information on how to do that at https://henriquedias.com/filemanager/caddy/ . It says I should create a new user, but offers no info on how to do that.. I used the Caddy Hugo plugin on my personal websites, as well as a website for a paying client, and I had no idea until I went to update Caddy just now that this feature had gone away! I don't have a replacement GUI for my client to edit his Hugo pages, I am entirely reliant on caddy hugo. Is there any chance that Hugo integration could be brought back, or split out into its own project somehow?. Unfortunately I'm a noob who doesn't understand what you just said. I don't see any documentation on the website for replicating the old Caddy Hugo behavior. I don't know what features I'm missing because I barely understand what Caddy Hugo did, how Hugo integration worked or what is lost now that it is gone. I haven't really run Hugo from the command line at all.\nWhat commands would I need to run to do the same things that Caddy Hugo did, and how do I set them up in the new File Browser?. ",
    "drlifeng": "The same as you by use IE11 . It also Can not be displayed correctly with Chrome .It only works with Firefox.. ",
    "HenryQW": "Strange enough that my instance of filebrowser is not fully functioning on Safari (macOS 10.13.2), namely control multi-select. I tried disabling every safari extension with no luck. It works on Chrome though.. ",
    "vvyoko": "@hacdias \nanyone use the kindle pw3?\nit have the same errors like this.\ni think because it is not the latest browsers.,..\nthe kindle browser even cant suport ftp....\nso i search the http file share and find this.\nwhat sad~\nhope can suport this...\nsorry for my bad english.\n                                                 Best or Best Wishes\n\n. ",
    "Platway": "@hacdias , if Filebrowser is not meant to support IE (or certain version ranges of it), is it possible to pop up a msg box informing IE users that their browsers are not supported? Thank you and have a nice day!. @Equim-chan , I've just checked out Outdated Browser, and that is amazing! Thank you!. ",
    "vincywindy": "I tried some Chinese characters, some Chinese characters will have this BUG, some will not.\nHere are two Examples:\nD:\\\u8d22\u52a1\\       is works fine.\nD:\\\u6d4b\u8bd5\u6587\u4ef6\u5939\\    error.\nSo if you need example,please try \"D:\\\u6d4b\u8bd5\u6587\u4ef6\u5939\\\" . \n\nHere is the Chrome\u2018s Console,Maybe userful\n\u2019. ",
    "TUNER88": "@zxl777 we have created a small CLI tool for adding users, you can use it. Or just check the API calls we make, it's pretty straight forward.\nhttps://github.com/ironsharkde/filebrowser-usermanager. @hacdias shouldn't be a problem to rename our package as well, as soon you have released new version \ud83d\ude04 . Done filebrowser-usermanager v0.0.2 released \u2705 . ",
    "pandarong": "npm run build \nerror log:\nERROR in ./assets/src/router/index.js\nModule not found: Error: Can't resolve '@/views/Settings/User' in '/root/demo/filemanager/assets/src/router'\n @ ./assets/src/router/index.js 7:0-41\n @ ./assets/src/main.js\nERROR in ./assets/src/router/index.js\nModule not found: Error: Can't resolve '@/views/Settings/Users' in '/root/demo/filemanager/assets/src/router'\n @ ./assets/src/router/index.js 6:0-43\n @ ./assets/src/main.js\n. git clone https://github.com/gohugoio/hugo -b release-0.49.2\ngit clone https://github.com/mholt/archiver\ncd archiver\ngit tag -l\ngit checkout v2.1.0\nreplace the archiver ,hugo folder in gopatch,it will build successful.\ni will fix the filebrowser with Latest dependency options. \u8fd9\u4e2a\u9879\u76ee\u73b0\u5728\u7f3a\u5c11\u4eba\u7ef4\u62a4\u3002\u73b0\u5728\u8ba1\u5212\n1.\u589e\u52a0\u5bf9\u65b0\u7248\u672cgo 1.11 modules \u65b0\u529f\u80fd\u652f\u6301\uff0c\u7248\u672c\u7ba1\u63a7\n2.\u4f9d\u8d56\u5e93mholt/archiver 3.0\u4ee5\u4e0a\uff0chugo 5.0\u4ee5\u4e0a\u7248\u672c\u9002\u914d\n3.codemirror \u6539\u4e3a monaco-editor. ",
    "spawnia": "The new version works perfectly, it even enters right into the /srv directory when logging in. Clean and nice, thank you so much!. ",
    "luxorJD": "I use google authenticator for 2 step verification in other web applications. \nIs it possible to implement this ??. ",
    "ryubaisan": "i run this command in filemanager floder,nothing error and nothing binary file out.\nwhen i run \nGOOS=linux GOARCH=mipsle go build -v github.com/hacdias/filemanager/cmd/filemanager\nit shows\ngithub.com/boltdb/bolt\ngithub.com/boltdb/bolt\n../../boltdb/bolt/db.go:101:13: undefined: maxMapSize \n. who can help?. mips, mipsle (32-bit MIPS big- and little-endian)\n    Supports Linux binaries. New in 1.8 and not as well exercised as other ports.\nit should be this.. it works.many thanks to you.\nit will be better if you could provide a mipsle version when you update filemanager.\ni think many users will like it.  ^_^\n. sloved,thanks.\nbut it doesn't work when i try to hidden the hidden files.\ndisallow regex \\/\\..+. thanks~~^_^. disallow regex \\/\\..+\nthe example you gave in setting seems unvaild.\nit didn't change anything when i setted.. sloved\uff01thank you very much! ^_^. ",
    "tutley": "I'm experiencing the same thing. I believe this has something to do with the hugo plugin itself and the way it manages user scope. If you go in and change the user scope to \"./\" rather than the path to the directory with the hugo site, then using \"hugo new\" creates files in the content directory as you'd expect.. ",
    "pzmarzly": "I am totally new to Go, that's why I said \"possible\" (I may be just doing something wrong).. ",
    "NanerLee": "@hacdias No, I didn't. show you a screenshot\n\nBut after I logged in, the error disappeared.\nAlthough this error does not affect the function, but I think it is necessary to report this\n. Oh, I got it.\nThanks for your reply !. You can add a new admin account and delete the \"admin\" account.. ",
    "ahmelsayed": "FWIW, I'm was having the same issue when trying to edit the admin account while logged in as admin. \nI can however update the password for the account from the Profile Settings tab (there is a \"Change password\" card at the very bottom) rather than the User Management tab. \nps: thanks @hacdias for the neat utility.. Sorry I missed that you wanna change the name. I was unable to change the password for admin from user management due to the same issue and initially didn't see the change password part due to my crappy console resolution.. ",
    "geertvanheusden": "Yes, I am using the latest version running within Docker. I changed the original Dockerfile to use Debian instead of starting from \"scratch\", so all my necessary tools should be available.\nI don't mount a config file but use: --scope /data --port 80 --baseurl /filemanager --commands grep ls unzip --allow-commands true as the Docker cmd.\nIf I execute for example the zip command I get:\n\nAnd the same results for the other commands. Executing those commands from the CLI (using docker exec) work as expected... Am I missing something?. Ok, played around with the --commands param and I now use --commands 'ls grep unzip'. Result is different:\n\nBut still no output for all my commands I execute.. They look correct:\n\nDid you try from the Docker container (but starting from an OS like e.g Debian that has ls available). Ok, I think I found it...\n\nTraffic is going via an AWS Load Balancer and an HA Proxy. Probably something misconfigured over there.. @hacdias I need to verify this with our ops team tomorrow, probably related to:\nhttps://blog.jverkamp.com/2015/07/20/configuring-websockets-behind-an-aws-elb/. Ok, I managed to fix the issue by changing the ELB settings.\nTicket can be closed. Thanks.. ",
    "jdinocco": "Definitely related, I get the following record when I try to execute a command\n2017/12/12 11:22:40 websocket: the client is not using the websocket protocol: 'upgrade' token not found in 'Connection' header\nThis is the scenario, I have a server in an intranet and I access remote with other users, look for related information but I can not find it. :(. Yest, hope help\n\n. Sorry for that.... my bad!\nSo with no proxy I can execute a grep for any file with no errors\n\nBut I can't use a wildcard for the command\n\nThanks!\n. yes, now I not using any proxy.\nI start the service (no websocket message)\nroot@fs02:~# filemanager\nListening on [::]:43915\nI copy .bashrc to test.log,  in the terminal execute the command\n```\nroot@fs02:~# grep alias *.log\n alias ls='ls $LS_OPTIONS'\n alias ll='ls $LS_OPTIONS -l'\n alias l='ls $LS_OPTIONS -lA'\n alias apti='apt-get install -y'\n alias aptud='apt-get -y update'\n alias aptug='apt-get -y upgrade'\nSome more alias to avoid making mistakes:\nalias rm='rm -i'\n alias cp='cp -i'\n alias mv='mv -i'\n```\nOn the FM the same command\n\n. No problem and thanks for the help!! ;). ",
    "hdstar2009": "thanks\uff0cit works.. ",
    "llovvoll": "Hi hacdias,\nVery thanks your respond, it's work, Does not meet the practical application method :(\n. ",
    "tokvv": "The permissions of the newly created directory (test) in filemanager is 754 (drwxr-xr--). As a result, we can not run cd test user other than root in terminal (Permission denied).\nWe need to have permissions 755 (drwxr-xr-x) after the directory creation.\n. Yes, I'm sure.\nI launch it in Docker.. Hi @hacdias, \u0430re there any updates on this issue?\nThank you very much for your work!\n. Fixed error access to inside the docker container.. @1138-4EB It is not necessary to change from scratch to ubuntu. This is done in order to have access inside the container docker (there is not shell in scratch) and is not relevant to # 300. Maybe I need to make a new PR?. @1138-4EB , good, i revert changes for Dockerfile. Can you merge this PR?\nThanks.. What problem do these changes solve?. ",
    "eroak": "+1 Same problem here. Me too. Issue on docker too. ",
    "BrowncoatShadow": "It would also be nice to have a way to view and set permissions in the UI.. ",
    "ww7": "Same issue on Centos. \nAny workflow for this?. ",
    "adminrezo": "Same issue on Debian.. ",
    "nicedreams": "I'm on Debian and when I create files (ie: *.txt) the permissions are set to 755.  I have \"other\" group and rest of files set to 0700 since running filebrowser as user filebrowser, but files and folders still 755 when created through interface.  Would like files 644 or 640 for that matter instead.. Don't know if I can bump this post, but be a nice feature to have for security.  I'm afraid to open the port for long period of time on my cloud host since can't tell how many bots trying to access the login page.  I just see a bunch of \"403 Forbidden\" in the log, but no clue who or what is trying to login.  Unless there's another way to get this info I don't know about then can get fail2ban to start blocking these bots.. This is great.  Thank you!. ",
    "maweck": "I would also be quite interested in having the LDAP for Authorization to combine it with #471 \nSo in my case the username would be provided through a header, but the filebrowser instance would need to check all other properties (Full name, email, general access rights) from an LDAP. \nWe also have some snippets for an LDAP connection in GO available, but I think this ticket is more than just adding it and I guess it also includes some changes in the UI.\n@1138-4EB once you have some time to think about this, could you maybe provide some thoughts about the following points:\n- Should there be some kind of parameter that allows you to specify if the internal DB or an LDAP should be used as the user base?\n- What are the places where this switch has to happen?\n- From my point of view filebrowser should show the user management at all when LDAP is configured - Do you agree? (So adding and removing users would be disabled in that case -> It has to be done in the LDAP itself).. Hello @1138-4EB ,\nthank you once again for taking so much time for us :+1:  \n\nI don't think that the database can be replaced, because it contains more info than just usernames and passwords. \n\nYes, but I think when an LDAP is used, the Database should not manage users at all. I think LDAP should always be the single point of user management in your company.\n\nDisabling the addition of new users might be an option; but parameters for existing users should still be editable.\n\nYeah, that is also true - But that is something which the one decides who configures the LDAP -> Does he provide a read only account for the LDAP connection or can this account also write? In tools like Jira, Jira tries to write into the LDAP and returns an Error like \"LDAP is read-only\" if it is the configured LDAP user is not allowed to write.\n\nFurthermore, I think that it should be possible for LDAP and non-LDAP users to coexists in the DB. So LDAP would be an (optional) authentication option and password would be another (optional) authentication method. Indeed, this could be extended to the proxy 'authentication'.\n\nThis is exactly how a lot of tools do it, but I could expect that it is quite complex to implement. But in general: Would love to see that too.\n\nAs you can foresee, this is a not so easy task, because it requires diving into the codebase. \n\nYip, sad, but true :(. I guess authentication plugins are a way a lot of tools go for (e.g. Nexus3, Jira, ..). So providing this endpoint and a plugin mechanism in general is something that will for sure be useful.. Hay @1138-4EB , \n\nIf I don't get it wrong, what you are suggesting would be potentially dangerous [..] If not, any user providing any X-Forwarded-User will have access\n\nYes, if e.g. the proxy is not correctly configured or if the proxy can be bypassed. So I am more than fine with adding a warning about that feature.\n\nShould you be willing to contribute a PR to implement this\n\nThat would be the plan :) My question here would be: How do you want the options to look like? Should I create a new option \"proxy-auth\" in parallel to \"no-auth\" or should there be something like \"auth\" that can be set to:\n- no-auth\n- proxy-auth\n- ... maybe more to come?\n\nBe explicit about the risk in the codebase.\nMake it default to be disabled.\nAdd a message/log when filebrowser starts in this mode.\n\nFine with those :)\n\nConsider adding an example configuration for a proxy such as NGINX or Traefik (or the one you are actually using).\n\nHm, the setup is often not possible or quite complex with common proxy projects out of the box (see e.g. https://serverfault.com/questions/537425/ldap-auth-proxy-adding-headers-according-to-ldap-groups ). I would say that it is not the best idea to simply provide snippets that can be copy & pasted by people who do not know what they are doing. Would it be fine for you to simply describe the idea/concept behind this feature and do a PR for: https://github.com/filebrowser/filebrowser.github.io after the feature is available ? \nThanks and best regards. A quick test can e.g. be done by using a browser plugin like: https://chrome.google.com/webstore/detail/modify-headers-for-google/innpjfdalfhpcoinfnehdnbkglpmogdi. Docker change has been reverted\ngofmt has been executed.. Hello together,\nI hopefully implemented all the requested changes.\n@1138-4EB : I have build a new image locally and did some tests. Both, proxy and default seem to work as expected. You can also do a quick test on your own as stated earlier. Simply start the with \"--auth.method proxy\" and request its page with a \"X-Forwarded-User\" Header set to an existing username (e.g. admin). \nhttps://chrome.google.com/webstore/detail/modify-headers-for-google/innpjfdalfhpcoinfnehdnbkglpmogdi\nBest regards,\nMarvin. Hello @hacdias , hello @1138-4EB ,\nso I renamed the var and prepared the \"auth.method\" config to accept \"none\" as a parameter, but I do not feel like I am the correct person to remove the \"no-auth\" option right now, because I am not that deep in your code and I am not aware of side effects at all :/ Maybe this can be done in a separate pull request from someone who is more into the filebrowser code than me?. Looks very good! Thank you for the effort @1138-4EB - Do you have some kind of \"pre-release\" planned that can be tested?. Because that is how it is done in most of the tools I work with (Maven, SonarQube, Jenkins, ..... ). In addition it allows you to \"group\" specific configs. Here is a sample from SonarQube:\n\nsonar.web.sso.enable=false\nsonar.web.sso.loginHeader=X-Forwarded-Login\nsonar.web.sso.nameHeader=X-Forwarded-Name\nsonar.web.sso.emailHeader=X-Forwarded-Email\n...\nsonar.security.realm=LDAP\nldap.url=ldap://localhost:10389\nldap.bindDn=cn=sonar,ou=users,o=mycompany\n\nBut sure, I can change that if you want :). ",
    "lstrz": "Thanks for the quick action!\nI downloaded and (re)installed Caddy with curl https://getcaddy.com | bash -s personal http.cache,http.filemanager,http.forwardproxy,http.git,http.minify.\nIs that correct? Can I validate running the correct version of Filemanager?\nThe problem persists and indeed, htop shows memory usage climbing to 800+ MB and staying there for a while (swapping) before Caddy is killed.\nThe source code of io.Copy (io.copyBuffer) first tries using WriteTo or ReadFrom, before falling back to a 32K buffer. Could it be that WriteTo or ReadFrom are unbuffered?\nTake my Go knowledge with a big grain of salt.. Disabling Minify helped!\nHad no idea it tried to minify downloads as well.\nThank you very much!. ",
    "Alsan": "The scope is absolute path already.. @hacdias \n1. Not running under any container, just run it directly;\n2. I'm using a filemanager.yaml as my configuration file, and only have port, baseURL set inside, and I use ./filemanager in terminal to startup the app;\n3. Yes, I've check thoses settings, and there's no problem when first run with admin user, it's comming up after create and login with a new user (which has scope specified).\nI don't known about the error of virutalenv, I just saw it in terminal, it's about the python virtual environment I'm assume.. I'm happily to say that my problem is gone with the new version 1.4.4, which is just downloaded. I didn't noticed that there's a new version over there, and the problem I reported should be pinpoint to the version 1.4.3.. ",
    "Adagior": "i have same problem\ni can creat files  but it cant show anything       and it always said  Something really went wrong. {\n  \"port\": 8000,\n  \"noAuth\": false,\n  \"baseURL\": \"\",\n  \"reCaptchaKey\": \"\",\n  \"reCaptchaSecret\": \"\",\n  \"log\": \"stdout\",\n  \"plugin\": \"\",\n  \"database\":\"/etc/filemanager/filemanager.db\", \n  \"scope\":\"/srv\",\n  \"allowCommands\": true,\n  \"allowEdit\": true,\n  \"allowNew\": true,\n  \"commands\": [ ]\n}\ni cant download the get.sh from your blog now 0.0..............dont del it plz\n  . @hacdias        \nfirst time i install it works fine when i change the user password or scope  it goes like that\nand when it appear...i still can use the search to reach other files\nand 0.0 how can i go uplevel  of the folder. i think it need put in /usr/bin/\n. @hacdias\nsame with him.......\n\nhttps://github.com/Adagior/filemanager/raw/master/chrome_2018-01-09_18-46-44.png\n. with caddy in /usr/bin/ \n and  no_auth        but still cant open /var\nand some folders can be opened and some cant   i'm sure its 777 or 755\nhttps://github.com/Adagior/filemanager/raw/master/chrome_2018-01-09_18-52-08.png\n. @hacdias   at the my file site 0.0.............. is same as another user\nhttps://github.com/Adagior/filemanager/raw/master/2018-01-09_20-37-29.png\n. @hacdias  .....the the /usr/bin  access to /  working fine 0.0............\nand when this happened    i change scope to other folders it still show       some thing really went wrong\nand this  i can access to root\nhttps://github.com/Adagior/filemanager/raw/master/chrome_2018-01-09_20-50-46.png\n  . @hacdias \nhttps://github.com/Adagior/filemanager/raw/master/2018-01-09_20-56-53.png\n  . @hacdias \n\n). Provisional headers are shown\nAuthorization:Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJJRCI6MSwidXNlcm5hbWUiOiJhZG1pbiIsInBhc3N3b3JkIjoiIiwiYWRtaW4iOnRydWUsImZpbGVzeXN0ZW0iOiIvc3J2IiwicnVsZXMiOltdLCJjc3MiOiIiLCJsb2NhbGUiOiJlbiIsImxvY2tQYXNzd29yZCI6ZmFsc2UsImFsbG93TmV3Ijp0cnVlLCJhbGxvd0VkaXQiOnRydWUsImFsbG93Q29tbWFuZHMiOnRydWUsImFsbG93UHVibGlzaCI6dHJ1ZSwiY29tbWFuZHMiOlsiZ2l0Iiwic3ZuIl0sInZpZXdNb2RlIjoibW9zYWljIiwiZXhwIjoxNTE1NTg4NTg3LCJpc3MiOiJGaWxlIE1hbmFnZXIifQ.HJKNZRyOO3eksRJLV4BAyApTAv21DAB2qwn3zEEDva8\nReferer:http://207.246.127.187:8000/admin/files/\nUser-Agent:Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.84 Safari/537.36. @hacdias\nwhere is the cache 0.0\nnot work with \necho 3 > /proc/sys/vm/drop_caches\nyum clean all\nfirst  time i open filemanager  it works well ...when change the scope  it goes like that\n. 0.0\n. yes    always  works on the first time enter ,the second time it goes like that\ni use the vultr  vps 0.0. not try yet.                 O.O. I will try on bandwagon.   And Aliyun tomorrow~. @hacdias same problem........i can open the /root at the first time,    when i change the scope,,,,,,,403 forbidden\nand not work with reboot\nis there some other file created by filemanager?  or  caddy cache\nfilemanager\nfilemanager.json\ndatabass.db\ni delete the databass.db  it still like that\nand caddy with browser can read whole server   \ncan caddy browser  edit on files\ni think caddy leave some file cache in somewhere\nor...410 gone mean something wrong to connect with caddy?\n  . ",
    "805447391": "tks. ",
    "saghul": "Hi there! awesome work with filemanager, thanks!!! I just ran into this, but I'm not using auth, so there is no user settings section AFAIS... is there a way to hide dotfiles in this case? Thanks!. @hacdias Done! https://github.com/filebrowser/filebrowser/issues/349 Cheers.. ",
    "Nycrea": "I am experiencing the same issue but only for zipped downloads. Single file downloads correctly show file size in the download manager. . ",
    "ikwyl6": "Ability to add this in the config file?. I had same problem with Illegal Instruction and using @Equim-chan directions above https://github.com/filebrowser/filebrowser/issues/357#issuecomment-366625310 solved my issue with using pogoplug ARM. Runs very fast!. Ok will try later tonight. Using the most current version from arch. Thanks for info. I think these build instructions used to be on the README at some point. If they weren't before, any chance we could get them added in the Install on the FB.xyz site so they are there for future?. So in the contributing link it says at the end to do a go build. TBH I didn't even look in that page as I wasn't contributing to the code. If I create a pull request for the 'install' xyz page to add some of the points for manual install, will you add it to the page?. $ go version\ngo version go1.11.5 linux/arm. I did another git clone from github and then ran go get in filebrowser dir and same error.. These are the first 12 lines of storage/bolt/importer/users.go:\n```\npackage importer\nimport (\n   \"encoding/json\"\n   \"fmt\"\n\"github.com/asdine/storm\"\n   \"github.com/filebrowser/filebrowser/v2/rules\"\n   \"github.com/filebrowser/filebrowser/v2/storage\"\n   \"github.com/filebrowser/filebrowser/v2/users\"\n   \"go.etcd.io/bbolt\"\n)\n``. Doing ago cloneagain wasn't enough. I did ago pullwhich pulled all changes from the clone.. Removing thefilebrowser.dbfile now gives when I run$ filebrowser`\n```\n$ filebrowser \n2019/02/20 00:01:30 No config file used\npanic: could not locate box \"../frontend/dist\"\ngoroutine 1 [running]:\ngithub.com/GeertJohan/go%2erice.MustFindBox(0x5f2285, 0x10, 0x1)\n        /home/alarm/go/pkg/mod/github.com/!geert!johan/go.rice@v0.0.0-20170420135705-c02ca9a983da/box.go:110 +0x7c\ngithub.com/filebrowser/filebrowser/v2/http.getStaticHandlers(0xc0cd20, 0xe05b00, 0xe38980, 0xe22908, 0x0, 0x0)\n        /home/alarm/src/filebrowser/http/static.go:87 +0x24\ngithub.com/filebrowser/filebrowser/v2/http.NewHandler(0xc0cd20, 0xe05b00, 0xe426f0, 0xe, 0x6b2c48, 0xe22908)\n        /home/alarm/src/filebrowser/http/http.go:20 +0xd8\ngithub.com/filebrowser/filebrowser/v2/cmd.glob..func12(0xa852f8, 0xa9ca3c, 0x0, 0x0, 0x0, 0xc0cd20)\n        /home/alarm/src/filebrowser/cmd/root.go:122 +0x1cc\ngithub.com/filebrowser/filebrowser/v2/cmd.python.func1(0xa852f8, 0xa9ca3c, 0x0, 0x0)\n        /home/alarm/src/filebrowser/cmd/utils.go:102 +0x16c\ngithub.com/spf13/cobra.(Command).execute(0xa852f8, 0xc0e100, 0x0, 0x0, 0xa852f8, 0xc0e100)\n        /home/alarm/go/pkg/mod/github.com/spf13/cobra@v0.0.3/command.go:766 +0x20c\ngithub.com/spf13/cobra.(Command).ExecuteC(0xa852f8, 0x1, 0x17a1c, 0xa8c608)\n        /home/alarm/go/pkg/mod/github.com/spf13/cobra@v0.0.3/command.go:852 +0x210\ngithub.com/spf13/cobra.(*Command).Execute(0xa852f8, 0x4f2840, 0xa8c608)\n        /home/alarm/go/pkg/mod/github.com/spf13/cobra@v0.0.3/command.go:800 +0x1c\ngithub.com/filebrowser/filebrowser/v2/cmd.Execute()\n        /home/alarm/src/filebrowser/cmd/cmd.go:9 +0x20\nmain.main()\n        /home/alarm/src/filebrowser/main.go:11 +0x24\n``\nMyfilebrowserexecutable is in~/go/binwhere $GOPATH=~/go/ but my filebrowser source is~/src/filebrowser/. \nThere is no/frontend/dist/in my~/src/filebrowser/...just~/src/filebrowser/frontend` (No /dist directory).\n. I don't use docker. That is why there should be a section in the installation page (not contributing) for building from source. Once this is all done I'll try to put together a set of steps for the install page. . ",
    "joshk132": "I solved it by removing and reinstalling it a few times then rebooting nginx. Either the last install fixed it or the third reboot of nginx solved it. . I am not sure which ones to check.. \nI am running Ubuntu Server 16.04, nginx for web server and webmin so far. I am uploading to a raid 1 made using mdadm. Locally it works fine now (rebooted filemanager) but remote is still giving the 413 error. . No not behind anything, it is a local file server that I wanted web based access to remotely.. ",
    "andyhuai": "http\n    {\n      ...\n        server_names_hash_bucket_size 512;\n        client_header_buffer_size 32k;\n        large_client_header_buffers 4 32k;\n        client_max_body_size 10g;\n     ....\n}\nI've the same problem, but I changed my nginx like this, now everything is OK\n@joshk132 . Or U can tell me how to change it myself,. @Equim-chan \nOK, I'll try it, is there any templates?. @hacdias \nTo overwrite default CSS? Now, where is default CSS, then I may know how to mod it. ",
    "edgeux": "i have this problem using the docker image. is there no way to configure the container from the json file to increase the setting?. ",
    "byetoday": "I have the same problem.\nThis is my android browser\nhttps://play.google.com/store/apps/details?id=com.UCMobile.intl. ",
    "malikpiara": "Name: Cloudify\nSlug: cloudify. Name: Firefly\nSlug: firefly\nFirefly, the decentralized file browser.. ",
    "lm317379829": "I have solved this problem.\nThe reason is the absence of library.\nI copied the files ld-2.23.so libpthread.so.0 libc.so.6 from ubuntu to lede and then run the command, problem solved. ",
    "UnAfraid": "@1138-4EB thanks for the reply.\nI have this done with ftp, i have limited users to be able to upload files, not able to overwrite existing, not able to read even what they've uploaded.\nIts a global upload directory that we use to receive files from clients that we must check, therefore we don't want other clients to be able to download content of this folder.\n\nAre you suggesting to let a user upload files to a dir/scope but not be able to open the uploaded files afterwards?\n Yes\nShould they be able to list the content but not to open it?\n Yes\nHow would possible conflicts be managed (i.e. uploading a file that already exists) if the content cannot be checked?\n* Either auto-rename or deny the upload. Works fine for me. docker-compose.yml\n```yml\nversion: \"2.1\"\n\nservices:\n server:\n    image: hacdias/filebrowser\n    container_name: filebrowser\n    ports:\n      - 7080:80\n    volumes:\n      - ./data:/srv\n      - ./config:/config\n    restart: unless-stopped\n    entrypoint: /filebrowser --config /config/config.json\n```\nconfig/config.json\njson\n{\n  \"port\": 80,\n  \"address\": \"\",\n  \"baseurl\": \"https://files.mydomain.org\",\n  \"database\": \"/config/database.db\",\n  \"logfile\": \"/config/filemanager.log\",\n  \"scope\": \"/srv\",\n  \"viewMode\": \"list\",\n  \"allowCommands\": false,\n  \"allowEdit\": false,\n  \"allowNew\": true,\n  \"commands\": []\n}\nnginx/sites-enabled/files.mydomain.org.conf\n```nginx\nserver {\n        listen                                          80;\n        server_name                                     files.mydomain.org;\n        # enforce https\n        return                                          301     https://$server_name$request_uri;\n}\nserver {\n        server_name                                     files.mydomain.org;\n        # General SSL Configuration\n        include                                         snippets/ssl.conf;\n        ssl_certificate_key                             ssl/files.mydomain.org.key;\n        ssl_certificate                                 ssl/files.mydomain.org.crt;\n        client_max_body_size                            0;\n    location / {\n            proxy_pass                              http://localhost:7080;\n            proxy_set_header                        X-Forwarded-Host $host;\n            proxy_set_header                        X-Forwarded-Server $host;\n            proxy_set_header                        X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_http_version                      1.1;\n            proxy_set_header                        Upgrade $http_upgrade;\n            proxy_set_header                        Connection \"upgrade\";\n    }\n\n    add_header Strict-Transport-Security \"max-age=31536000; includeSubdomains;\";\n\n}\n```\nngins/snippets/ssl.conf\n```nginx\nlisten                                  443 ssl;\nlisten                                  [::]:443 ssl;\nkeepalive_timeout                       70;\naccess_log                              /var/log/nginx/$server_name-access.log;\nssl                                     on;\nssl_protocols                           TLSv1.2;\nssl_ciphers                             'EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH';\nssl_prefer_server_ciphers               on;\nssl_session_cache                       shared:SSL:10m;\nssl_session_timeout                     24h;\nssl_buffer_size                         4k;\nssl_session_tickets                     off;\nssl_ecdh_curve                          secp384r1;\nDiffie-Hellman parameter for DHE ciphersuites, recommended 2048 bits\nssl_dhparam                             ssl/dhparam.pem;\nenable ocsp stapling (mechanism by which a site can convey certificate revocation information to visitors in a privacy-preserving, scalable manner)\nhttp://blog.mozilla.org/security/2013/07/29/ocsp-stapling-in-firefox/\nresolver                                8.8.4.4 8.8.8.8 valid=300s;\nresolver_timeout                        10;\nssl_stapling                            on;\nssl_stapling_verify                     on;\nssl_trusted_certificate                 /etc/ssl/certs/DST_Root_CA_X3.pem;\nDisable gzip to avoid the removal of the ETag header\ngzip off;\nDisable requests by non handled ssl vhosts\nif ($host != $server_name) {\n        return 444;\n}\nadd_header X-Frame-Options SAMEORIGIN;\nadd_header X-Content-Type-Options nosniff;\nadd_header X-XSS-Protection \"1; mode=block\";\n. @mozzbozz comment updated, thanks for catching it.diff\ndiff --git a/lib/http/http.go b/lib/http/http.go\nindex cadc893..61e2940 100644\n--- a/lib/http/http.go\n+++ b/lib/http/http.go\n@@ -26,7 +26,7 @@ func Handler(m *fb.FileBrowser) http.Handler {\n                        w.WriteHeader(code)\n                    txt := http.StatusText(code)\n\n\nlog.Printf(\"%v: %v %v\\n\", r.URL.Path, code, txt)\nlog.Printf(\"%v: %v %s %v\\n\", r.URL.Path, code, r.RemoteAddr, txt)\n                        w.Write([]byte(txt + \"\\n\"))\n                }\n```\nThis should provide ip address in the logs for > 400 status code.\nShould i open up pull request also which branch should i target because i notice there is some revamp/rework in progress.. I need to know which branch to target with my PR. \n",
    "chanyk-joseph": "\nsudo is used to executed the filebrowser\nfilebrowser is working fine with other directory, eg: /home\n\nConsole log:\n[joseph@localhost Desktop]$ ls -ll /\ntotal 24\nlrwxrwxrwx.   1 root root    7 Sep 17 00:42 bin -> usr/bin\ndr-xr-xr-x.   5 root root 4096 Sep 17 23:18 boot\ndrwxr-xr-x.  20 root root 3240 Feb 16 12:23 dev\ndrwxr-xr-x. 138 root root 8192 Feb 16 12:24 etc\ndrwxr-xr-x.   3 root root   20 Sep 17 00:49 home\nlrwxrwxrwx.   1 root root    7 Sep 17 00:42 lib -> usr/lib\nlrwxrwxrwx.   1 root root    9 Sep 17 00:42 lib64 -> usr/lib64\ndrwxr-xr-x.   3 root root   30 Sep 17 16:06 media\ndrwxr-xr-x.   2 root root    6 Nov  5  2016 mnt\ndrwxr-xr-x.   4 root root   49 Sep 17 23:24 opt\ndr-xr-xr-x. 219 root root    0 Feb 16 12:23 proc\ndr-xr-x---.   7 root root  229 Sep 18 14:34 root\ndrwxr-xr-x.  41 root root 1260 Feb 16 12:25 run\nlrwxrwxrwx.   1 root root    8 Sep 17 00:42 sbin -> usr/sbin\ndrwxr-xr-x.   2 root root    6 Nov  5  2016 srv\ndr-xr-xr-x.  13 root root    0 Feb 16 12:23 sys\ndrwxrwxrwt.  14 root root 4096 Feb 16 12:25 tmp\ndrwxr-xr-x.  13 root root  155 Sep 17 00:42 usr\ndrwxr-xr-x.  21 root root 4096 Sep 17 00:51 var\n[joseph@localhost Desktop]$ sudo ./filebrowser --allow-edit --allow-new --no-auth --port 80 --scope=\"/\"\nListening on [::]:80\n2018/02/16 12:26:43 /: 410 Gone\n2018/02/16 12:26:43 stat bin: no such file or directory\nBrowser Log:\n\nWhen using direct URL of subdirectory, it is working fine:\n\n. Verified the fix on v1.5.4. ",
    "higeon": "How to build it on my armv5 debian NAS which has only poor 64MB ram? . ",
    "bcardiff": "Probably it's on its way, but is hard to know the allowed config options. Between  #504 and #506 I am a bit lost what is the current rule to map \"some.config\" to an env variable. Is it FB_SOME_CONFIG/FB_SOME__CONFIG/FB_SOME.CONFIG/FB_some.config? I am not used to the codebase and packages used. From a user perspective knowing the convention will be really helpful.\nThanks for resolving the issue and keep developing FB. I will eagerly wait for the next release.. Now that #360 is in master I can vote for this also :-). I was also interested in a one-click-install, in my case for rancher, but without admin password config option is not a good fit for public usage.. For the use case of one click installers simple docker deployment having a --admin.pass / FB_ADMIN_PASS would be enough. Ideally upon start up of the service the provided admin.pass should be used to initialize/override the admin user password and storing it as however is preferred. But it should be provided as clear text from a configuration perspective.\nThis is similar as how pg or mysql docker images allow root password to be setup.\nOnce an admin password is known users can be added from UI, from a simple docker deployment process that is enough in my experience.\nCurrently, admin already has a default password, changing where that that value comes from with the current architecture of users/password would allow one-click-install to move forward without the whole discussion of where to store them.\nI honestly don't mind if the admin.user is fixed to admin. Letting it be fixed simplify how to deal with overwriting existing installation admin password.. ",
    "cbf305": "I get the same thing trying to switch views, and the logs show the same error.\nI also downloaded the Caddy binary from the website with the filemanager plugin included, about 10 minutes ago.  No other plugins were selected.\nI am just running it directly from the CLI to play around with.  ./caddy filemanager. ",
    "svenio": "I'm currently attempting to set this up as my primary cloud UI and encountered this yesterday. To test, I [just now] re-downloaded Caddy with the plugin and can confirm on all accounts. Any of the following actions result in a \"Bad Request\" modal:\n\nChange password\nChange view\nEnter custom CSS\nCreate new user\nChange user scope\nChange user commands\netc.\n\nCaddy version: 0.10.11\nFile Browser version: 1.5.3\nMy Caddyfile:\n```\nlocalhost:8080  \nfilemanager / /tmp/caddy {\n    database            /tmp/caddy/data.db\n    no_auth     false\n    locale              en\n    allow_commands      true\n    allow_edit          true\n    allow_new           true\n    allow_publish       true\n}\n```\nExecuted with:\n./caddy -conf=/tmp/caddy/Caddyfile -log=stderr\nError msg:\n2018/02/22 13:43:02 /1: 400 Bad Request\n2018/02/22 13:43:02 json: cannot set embedded pointer to unexported struct: http.modifyRequest\n. Thanks. Any idea when 1.5.4 will be available for Caddy?\n\n. ",
    "la0wei": "@Equim-chan \nSeems related to 2 things.\n1.authorization\n2.path. ",
    "wjphero": "I log into the linux with root and  run filebrowser, so I think filebrowser has the root permission. And I run the command: ls -al\ndrwxr-xr-x.  21 root root  4096 Feb 25 20:18 var. yes, I got a result: \nif there are symbolic links(ln -s) in the directory and enter into the directory, then the filebrowser will show \"Something really went wrong.\". hi  Equim-chan , is there a document to show how to compile the filebrowser. I had compiled the filebrowser but run to got some error below:\n./example: line 1: syntax error near unexpected token newline'\n./example: line 1:!'\n. Thank you very much for the suggestion\uff0cand I have another question that why the binary I compiled is much bigger than the binary from yours, I have used  \"go build\" with the parameter -ldflags \"-s -w\"?. ",
    "Encrypt": "Hello @hacdias / @Equim-chan!\nI have been thinking about this and I may have found a solution.\nThe idea would be to drop the configuration file and keep the database only.\nWhen Filebrowser would start for the first time, you could interactively prompt the administrator to enter the different \"key\" parameters (baseURL, port, address...) via:\n- The command line (after typing \"filebrowser --config\" for instance)\n- Directly via the web interface (in that case, you would use a port by default on which the user could directly connect and set it up)\nThat way, the general configuration would also be in the database and any modification would be done directly via the interface.\nThat said, I'm not sure that is the best idea :stuck_out_tongue:. ",
    "maran": "Just dropping my two cents here as I see things from a different perspective, one you might want to ignore but I wanted to give it regardless \ud83d\ude1b\nSo I'm looking to do unattended installations of Filebrowser for my users. They simply click \"Install app\" and select \"Filebrowser\". They pick a password and that should it be for them. Having passwords in the database for me would be a bit annoying since my software would need to write to the boltdb database to get the password in as I can't (or rather prefer not to need any) have any console input. \nPerhaps users could be bootstrapped from the config file?\nyaml\nbootstrap:\n  users:\n    admin:\n      password: sha1#707e663f6af05f7cce3fa9c8009e3817f991c821\n      scope: /path/to/my/files\n      allowCommands: true\n      allowEdit: true\n      allowNew: true\n      commands:\n        - git\n        - svn\nIf on boot the bootstrap config is detected it imports this data into the database and removes it from the config file. Perhaps have some limitation as to when a bootstrap config will be imported for added security.\n  . ",
    "razaborg": "UPDATE\nWith this configuration I got something better. Filebrowser is now accessible through nginx-proxy, but only in HTTP, I've not yet figured out why.\n```\nversion: '2.1'\nservices:\n  nginx-proxy:\n    image: jwilder/nginx-proxy\n    container_name: nginx-proxy\n    hostname: nginx-proxy\n    volumes:\n      - '/mnt2/root/certs:/etc/nginx/certs:ro'\n      - '/var/run/docker.sock:/tmp/docker.sock:ro'\n    ports:\n      - 80:80\n      - 443:443\n    networks:\n      - web\nfilebrowser:\n    image: hacdias/filebrowser\n    container_name: filebrowser\n    hostname: filebrowser\n    volumes:\n      - /mnt2/data:/srv\n      - /tmp/filebrowser:/config\n    environment:\n      - VIRTUAL_HOST=files.mydoma.in\n      - VIRTUAL_PROTO=http\n    sysctls:\n      - net.ipv4.ip_unprivileged_port_start=0\n    command: \"-p 80 -s /srv -d /config/database.db\"\n    user: \"1002:50\"\n    networks:\n      - web\nnetworks:\n  web:\n    driver: bridge\n```. ",
    "mozzbozz": "@UnAfraid in your last comment, you have a typo: The docker-compose file binds the data volume to /svr while the config defines the scope to /srv.... Well, I think this thing is called \"filebrowser\", not \"static site generator\". So... I didn't even know filebrowser can do that - and as far as I read the comments in this ticket, the feature also seems a bit hacky, so I guess it's best to just drop it.. ",
    "ppnchb": "I'm having a same problem, too. I linked filebrowser running on my docker to a storage where I also connected to a samba server, and when I create a file or folder through filebrowser, the owner of file is set to root so I cannot access from a samba client.\nIn case of linuxserver/transmission, it lets you set uid/gid directly via environments. Maybe filebrowser can do the same, I guess?\nIt would be nice if admin can set permissions of different uid/gid for each users, but it can wait.\nBy the way, this project is so cool. I'd really love to use it if this issue is fixed.. ",
    "alex-phillips": "I second this. The FS I'm mounting to upload/download/edit is never owned by root:root.. The --user flag works fine for me. Thanks!. ",
    "alx": "Because I had a related issue, here is a docker-compose setup I've used to solve it (on filebrowser:v1.10.0), it might help someone else.\nUser with UID=1000 will be able to write in the filebrowser data directory, but you need to set a non-privileged port (>1024) for the server to start.\ndocker-compose.yml\nfilebrowser:\n    image: filebrowser/filebrowser:v1.10.0\n    user: 1000:1000\n    volumes:\n      - /opt/platform/data:/srv/data\n      - /opt/platform/filebrowser/database.db:/etc/database.db\n      - ./config/filebrowser/config.json:/config.json\n\nconfig/filebrowser/config.json\n{\n  \"noAuth\": true,\n  \"port\": 8888,\n  \"address\": \"\",\n  \"database\": \"/etc/database.db\",\n  \"scope\": \"/srv/data\",\n  \"allowCommands\": false,\n  \"allowEdit\": true,\n  \"allowNew\": true,\n  \"commands\": [],\n  \"baseURL\":\"/filebrowser\"\n}. Same issue here, I'm using File Browser version (dae992d4)\nI was not able to identify the issue with this auth flag, I had to revert to previous version v1.10.0 in docker-compose.yml image parameters\nfilebrowser:\n    container_name: eris_filebrowser\n    image: filebrowser/filebrowser:v1.10.0\n    volumes:\n      - /opt/platform:/srv\n      - ./config/tmp_filebrowser/database.db:/etc/database.db\n      - ./config/tmp_filebrowser/config.json:/config.json. Hi @1138-4EB \nThanks for your feedback.\nI'm using this docker-compose config (various paths might be uncorrect, I'm just copy/pasting the current working version without the v1.10.0 tag, but it's was setup more or less like this):\nfilebrowser:\n    container_name: eris_filebrowser\n    image: filebrowser/filebrowser\n    volumes:\n      - /opt/platform:/srv\n      - /opt/platform/filebrowser/database.db:/etc/database.db\n      - ./config/filebrowser/config.json:/config.json\nThe config.json contains the auth.method='none' parameter:\n{\n  auth: {\n    method: 'none'\n    ...\nI'll try to reproduce the complete setup of my defunc config when I've got time.\nI remember trying to use the command parameter in docker-compose to force the auth-method, but I had the same issue.. Hi,\nI had time to return on this issue today, and the --auth.method='none' flag configuration is indeed working fine.\nBut then I've got auth error in the frontend code, I'd go back to tag v1.10.0 until I've got more time to debug this one.\nbase64.js:153 Uncaught DOMException: Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.\n    at atob (http://eris:18104/filebrowser/static/js/app.b5d324c0f51da18413a4.js:23:123879)\n    at _decode (http://eris:18104/filebrowser/static/js/app.b5d324c0f51da18413a4.js:23:124223)\n    at Object.decode (http://eris:18104/filebrowser/static/js/app.b5d324c0f51da18413a4.js:23:124259)\n    at r (http://eris:18104/filebrowser/static/js/app.b5d324c0f51da18413a4.js:11:33648)\n    at XMLHttpRequest.n.onload (http://eris:18104/filebrowser/static/js/app.b5d324c0f51da18413a4.js:11:33984)\nIt seems to come from this place:\nhttps://github.com/filebrowser/frontend/blob/master/src/router/index.js#L127\nwhere the route '/*' is meta.requiresAuth = true\nThen it goes deeper and tries to parse a token that doesn't exist (it's parsing and html response): \nhttps://github.com/filebrowser/frontend/blob/master/src/utils/auth.js#L6\nwhere the string, in the decode function, equals jsonprovidesmetadatausedwhenyourwebappisaddedtothehomescreenonAndroid\n\nNot sure if it's related, of if I should open another ticket, but with the current config, I've got various types of path calling css/js files, somes contain with the baseurl, those in the <head> not \n<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content=\"IE=edge\"><meta name=viewport content=\"width=device-width,initial-scale=1,user-scalable=no\"><meta name=base content=\"\"><meta name=staticgen content=\"\"><meta name=noauth content=\"false\"><meta name=version content=\"(dae992d4)\"><meta name=recaptcha content=\"\"><title>File Browser</title><link rel=icon type=image/png sizes=32x32 href=\"/static/img/icons/favicon-32x32.png\"><link rel=icon type=image/png sizes=16x16 href=\"/static/img/icons/favicon-16x16.png\"><link rel=manifest href=\"/static/manifest.json\"><meta name=theme-color content=#2979ff><meta name=apple-mobile-web-app-capable content=yes><meta name=apple-mobile-web-app-status-bar-style content=black><meta name=apple-mobile-web-app-title content=assets><link rel=apple-touch-icon href=\"/static/img/icons/apple-touch-icon-152x152.png\"><meta name=msapplication-TileImage content=\"/static/img/icons/msapplication-icon-144x144.png\"><meta name=msapplication-TileColor content=#2979ff><script>CSS = \"\"</script><link rel=preload href=\"/static/js/app.b5d324c0f51da18413a4.js\" as=script><link rel=preload href=\"/static/css/app.91cd8ef5071f98059455a4174cb732ed.css\" as=style><link rel=preload href=\"/static/js/manifest.123220cb93b9d190f6f3.js\" as=script>...<script type=text/javascript src=\"/filebrowser/static/js/manifest.123220cb93b9d190f6f3.js\"></script><script type=text/javascript src=\"/filebrowser/static/js/app.b5d324c0f51da18413a4.js\"></script></body></html>\n\nHere is my config:\n\ndocker-compose.yml\n\nfilebrowser:\n    container_name: dev_filebrowser\n    image: filebrowser/filebrowser\n    volumes:\n      - /opt/platform:/srv\n      - /opt/platform/filebrowser/database.db:/database.db\n      - ./config/filebrowser/config.json:/.filebrowser.json\n\nfilebrowser.json\n\n{\n  \"port\": 80,\n  \"address\": \"\",\n  \"database\": \"/database.db\",\n  \"baseurl\": \"/filebrowser\",\n  \"auth\": {\n    \"method\": \"none\"\n  },\n  \"defaults\": {\n    \"scope\": \"/srv/data\",\n    \"allowCommands\": false,\n    \"allowEdit\": true,\n    \"allowNew\": true,\n    \"commands\": []\n  }\n}\n. Hi @1138-4EB thanks for your feedback.\nUnfortunatly, I really need a custom baseurl for my setup, so I won't be able to test a configuration without it.. Hi @1138-4EB and thanks for your feedback.\nI'll let you know if this issue is solved when I'll redeploy my container.. Hi @1138-4EB \nI finally have been able to review this issue, and I think you can re-open it, because I've got the same behavior:\n\nauth.method=none is working when baseurl is not set in filebrowser.json\nwhen baseurl is set up in the config, the login form appears and I'm not able to log in\n\nHere is how to reproduce it on http://localhost:1888 :\ndocker run \\\n    -v /opt/platform:/srv \\\n    -v /tmp/filebrowser.db:/database.db \\\n    -v /tmp/filebrowser.json:/.filebrowser.json \\\n    -p 1888:8888 \\\n    filebrowser/filebrowser\n/tmp/filebrowser.json :\n{\n  \"port\": 8888,\n  \"baseurl\":\"/filebrowser\",\n  \"address\": \"\",\n  \"database\": \"/etc/database.db\",\n  \"scope\": \"/srv/data\",\n  \"perm\": {\n    \"create\": true,\n    \"execute\": false,\n    \"modify\": true\n  },\n  \"auth\": {\n    \"method\": \"none\"\n  }\n}. Thanks @hacdias \nI've tried with your filebrowser.json example, but I still get the login form using it.\nHere is the log from the docker command:\n$ docker run \\     \n    -v /opt/platform:/srv \\\n    -v /tmp/filebrowser.db:/database.db \\\n    -v /tmp/filebrowser.json:/.filebrowser.json \\\n    -p 1888:8888 \\\n    filebrowser/filebrowser\n2019/02/15 13:14:01 Using config file: /.filebrowser.json\n2019/02/15 13:14:01 Listening on [::]:8888\n2019/02/15 13:14:05 /api/auth/renew: 404 Not Found\n2019/02/15 13:14:05 /api/auth/renew: 404 Not Found\n2019/02/15 13:14:05 /static/manifest.json: 404 Not Found\n2019/02/15 13:14:07 /sw.js: 404 Not Found. @hacdias thanks a lot for your help, it was an issue with the docker cache.. ",
    "yanggis": "Hi, thx for the fast response, but when I tried to install mailcap on ubuntu via the command \"apt install mailcap\", I got an error with info \"Package 'mailcap' has no installation candidate\", any idea to fix it? . ",
    "Degot": "Thanks. It helped.. ",
    "Jens-vd": "I also vote for this issue. The current solution with a default admin/admin user makes automated deployments impossible or unsafe. There is always a manual step required.\nI am deploying with Docker in Kubernetes and it's common to specify such information in a secret, which is then used to populate environment variables for the container.. ",
    "gkoerk": "Hey guys - has there been any progress on this? As far as I can tell, this limits a docker deployment, since every time the container/stack is recreated you lose any persisted changes. I don't see how the /etc/database.db can be mapped to the host before it gets created inside the application. ",
    "unquietwiki": "@Equim-chan sorry for not replying sooner on this!\nGopkg.toml.txt\n. @Equim-chan That seems to have worked; had to clear out some extra imports. Thank you so much for your help on this. \ud83d\udc4d \nGopkg.toml.txt\nmodules.txt\n. ",
    "march1993": "Also in the file resource.go, there are two '0776' permissions for files.  Won't it be 0644 or 0600?. ",
    "danielloader": "I just created a new user and only gave it \"Edit, rename and delete files or directories\" permissions, and the share function is enabled when I log in as that user. Disabled it on the administrators account for that user and logged back in as that user and the share function is missing.\nIs it reliant on being able to edit/delete the files? Was hoping to be able to share files from a read only user.. ",
    "zhentianxincun": "Many old videos are divx or xvid for avi containers. What are the simple solutions?. I sincerely hope to see such permission settings.\n\n. ",
    "hustarbor": "It's usually error, but sometimes downloading fine. I don't know why.. I think this is a question about \"IP+HTTP\". I tried \"domain + HTTPS\" and everything went fine.. ",
    "benitogf": "@1138-4EB  why use yarn instead of npm?. @1138-4EB not sure if those issues are active on old versions but on npm 6.1.0 / node 10.6.0 works fine perhaps indicating the required node/npm version would be enough?. ",
    "lewisxy": "Fixed with following nginx config file\n```\nserver {\n    add_header Strict-Transport-Security max-age=63072000;\n    #add_header X-Frame-Options DENY;\nserver_name files.myhost.com;\n\naccess_log /var/log/nginx/access.log;\nerror_log /var/log/nginx/error.log;\n\nlisten 443;\n\nssl on;\nssl_certificate /root/ssl/chained.pem;\nssl_certificate_key /root/ssl/domain.key;\nssl_session_timeout 5m;\nssl_protocols TLSv1 TLSv1.1 TLSv1.2;\nssl_ciphers ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA:ECDHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!3DES:!MD5:!PSK;\nssl_session_cache shared:SSL:50m;\nssl_prefer_server_ciphers on;\nssl_dhparam /root/ssl/dhparam.pem;\n\nlocation / {\n    client_max_body_size                    2048m;\n    proxy_read_timeout                      86400s;\n    proxy_send_timeout                      86400s;\n    proxy_set_header                        X-Forwarded-Host $host;\n    proxy_set_header                        X-Forwarded-Server $host;\n    proxy_set_header                        X-Real-IP $remote_addr;\n    proxy_set_header                        Host $host;\n    proxy_set_header                        X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_http_version                      1.1;\n    proxy_redirect                          off;\n    proxy_set_header                        Upgrade $http_upgrade;\n    proxy_set_header                        Connection \"upgrade\";\n    proxy_pass                              http://127.0.0.1:8082;\n}\n\n}\n```. ",
    "84ace": "This didn't work for me, all i ended up needed was to set the --baseurl option (--baseurl /filebrowser), as the reverse proxy config i have pointed it at http://site/filebrowser rather than http://site. ",
    "Darkham42": "I've the same issue...\nI launch filebrowser with : \n./filebrowser -c filebrowser.json\nMy filebrowser.json : \njson\n{\n  \"port\": 60605,\n  \"noAuth\": false,\n  \"alternativeReCaptcha\": false,\n  \"reCaptchaKey\": \"\",\n  \"reCaptchaSecret\": \"\",\n  \"baseURL\": \"/\",\n  \"address\": \"127.0.0.1\",\n  \"database\": \"/opt/filebrowser/filebrowser.db\",\n  \"log\": \"stdout\",\n  \"plugin\": \"\",\n  \"scope\": \"/var/www/files/\",\n  \"allowCommands\": true,\n  \"allowEdit\": true,\n  \"allowNew\": true,\n  \"commands\": [\n    \"git\",\n    \"svn\",\n    \"ls\",\n    \"wget\"\n  ]\n}\nand my nginx conf for my subdomain : \n```conf\nupstream filebrowser{\n    server 127.0.0.1:60605;\n}\nserver {\n    listen      80;\n    listen [::]:80;\nserver_name files.domain.com;\n\ninclude conf.d/_letsencrypt;\n\nlocation / {\n    return 301 https://files.domain.com$request_uri;\n}\n\n}\nserver {\n    listen      443 ssl http2;\n    listen [::]:443 ssl http2;\nadd_header Access-Control-Allow-Origin $http_origin;\nserver_name files.domain.com;\n\nlocation / {\n        proxy_pass http://filebrowser;\n}\n\nerror_log /var/log/nginx/files-error.log;\naccess_log off;\n\n# SSL\n\n}\n```\nI've tried what's above and still have the same errors as @lewisxy, anyone have an idea ?. Thanks to @hacdias I've found the error...\nIn my json config file : \njson\n\"baseURL\": \"\",\nAnd it's working right now ! Thanks a lot.. ",
    "paul-hammant": "FileBrowser (given its command line nature) is a server on localhost?   The screenshot shows a domain name of https://filemanager.web. That is something in your /etc/hosts file routing to 127.0.0.1 ?\nMuch is unclear, despite the effort you've gone to in the documentation.. OK, so couldn't install on an Apache somewhere? Nor a Nginx.  I could imagine wanting to do so, and host other apps on other directories within the same server.. Fine, documentation could be better if it were extended to say \"File Browser is not a WebDAV server, it is a standalone server-side web application that allows management of the files in a directory on the server. You can proxy from Apache/Nginx to it, but it maintains it's own user/password system\". ",
    "itsthejb": "Seeing this also. It appears to be a common problem with the material icons:\n\nhttps://github.com/bramstein/fontfaceobserver/issues/52\nhttps://github.com/google/material-design-lite/issues/4382. Great! I'll see if I can verify if this change fixes the issue as soon as possible. Confirmed from my end that icons are now working. Thanks a lot! Just one remaining style error I can see from the search box:\n\n\n. Fantastic! Didn't know this already exists. Not easy to find, though - seems like something that would be good to add to the docs?\nHere's the rule I used disallow \\/\\..*$. ",
    "fdegraeve": "same problem with Safari :/. ",
    "Cao-czy": "me too,Quark browser on mobile phone. ",
    "tufu9441": "And I encountered the same problem on IE11, Windows 10.. ",
    "1kevin335200": "It doesn't work for me with v1.10\nv1.9.0 tested, same problem\nIt seems like all versions > 1.0.1 don't work\nLinux R7000 2.6.36.4brcmarm #1 SMP PREEMPT Tue May 8 02:01:58 CST 2018 armv7l Merlin-Koolshare. Now yes and it seems to work. Thanks!. ",
    "michacassola": "I just tried on a fresh container (this time the underlaying system runs Ubuntu 18 with anewer kernel though) and it works with the curl method.\nMaybe it was something else I had installed? I think I might have had easyengine running in the container.... ",
    "ZXQ-Kyle": "\u8fd8\u6709\u624b\u673a\u5938\u514b\u6d4f\u89c8\u5668\u767b\u5f55\u65f6\u9875\u9762\u9519\u4e71. ",
    "the-eric-kwok": "\u8bf7\u4f7f\u7528\u82f1\u8bed\u6765\u62a5\u544abug\n\u6807\u9898\u63cf\u8ff0\u5f97\u4e0d\u6e05\u4e0d\u695a\u7684\uff0c\u914d\u7f6e\u6587\u4ef6\u4e5f\u6ca1\u8d34\u4e0a\uff0c\u8fd8\u7528\u4e2d\u6587\uff0c\u4f60\u8ba9\u5f00\u53d1\u8005\u600e\u4e48\u56de\u7b54\u4f60\u7684\u95ee\u9898\uff1f. Add a symbol & to the end of the command line\nlike\ncaddy -conf Caddyfile -root /tmp &\nor try screen. I changed my script to bash -c \"mv /mnt/CloudDisk/$FILE /mnt/CloudDisk/.trash\" and it works!. If this is a feature, I think we should at least mention it in the Document or in setting page. But not to let people guessing like how could I get it work!\n. @hacdias Thank you \ud83d\ude18. It doesn\u2019t work\nNow my script is\nbash -c \u2018mv \\\u201d/mnt/CloudDisk/$FILE\\\u201d /mnt/CloudDisk/.trash\u2019\nI still got the error like\n2019/02/25 23:23:32 [INFO] Blocking Command:\"bash -c mv /mnt/CloudDisk/$FILE /mnt/CloudDisk/.trash\"\nmv: cannot stat '/mnt/CloudDisk//\u7ffb\u8bd1/Kaden': No such file or directory\nmv: cannot stat 'Stone': No such file or directory\nmv: cannot stat '@dubbybmx': No such file or directory\nmv: cannot stat 'FILMED': No such file or directorymv: cannot stat '_': No such file or directory\nmv: cannot stat 'EDITED': No such file or directorymv: cannot stat '-': No such file or directory\nmv: cannot stat 'Adams': No such file or directory\nmv: cannot stat 'Sims.mp4': No such file or directory\n2019/02/25 23:23:32 /\u7ffb\u8bd1/Kaden Stone @dubbybmx FILMED _ EDITED - Adams Sims.mp4: 500 Internal Server Error\n2019/02/25 23:23:32 exit status 1\nSeems it can\u2019t actually deal with quotes mark.. I don\u2019t know. ",
    "bkanuka": "I opened issue #336 which, if implemented, would allow this and other search customization. Unfortunately I gave it my best shot and couldn't get it.. FYI the latest docker image created Sep 8 still does not have this fix.. You're right - the html returned by curl has the correct urls. The problem now is that not all the code from the js has the right url basename.  I'll find an example.... \nSo when I go to http://mydomain.com/files  I'm redirected to http://mydomain.com/login?redirect=%2Ffiles%2F  plus of course all the 404's you see on the debug panel - every 404 is because there's a request being sent without the files/ base directory.\nI too am running with docker and passing -b /files at the command.. The fix should be just search for every instance of BaseURL in the frontend code and replace it with baseurl.\nI would do this, but I know so little about Go and the frameworks used here. No idea how to even test this.. Okay - thanks for all the documentation!  Quick question: is there a Dockerfile that builds the whole thing? Rather than building on the host and moving the binary to the docker.. ",
    "osatien": "if i am inside a directory link i cant copy up from that directory. ",
    "timonss": "I created a logo icon for your project. If you want to use this icon in your project, then comment below, I will give you the source file. And if you want a change, then let me know and I'll change it.\n\n. I've created a logo, with different colors, what do you think? which one do you like?. Do you really choose that from the left (light blue). And which part do you think I need to change? The color it?. How about this?. If you like it, I will send you the original file.\n\n. Okay, I've uploaded that logo to the drive, you can download it on this link :\nhttps://drive.google.com/drive/folders/1GR2WDhgNPZ4ANg00ggo9vf_PGXhfKCeb. What do you mean: The outside circle I change to a light blue color and the inner circle I change to white color, is that so?. Is this what you mean ??\n\n\n. It looks more cool and beautiful to look at. \nWhat if I now uploaded the original file to the driver and there you can download it.. Sure, Here you can get it:\nhttps://drive.google.com/drive/folders/1gjsUgQeRCR6d1OeSVoePJYR4fvcsqMeN\nI feel happy if you use this logo on your project.\n. @1138-4EB .Very happy to contribute with you. \ud83d\ude01\ud83d\ude01. ",
    "DeAlexPesh": "sorry, but the old icon was better... @1138-4EB thanks, already saved the old version of icon.svg\nThe new logo has too many small details, in the future it will turn into a headache... @hacdias, PR. ",
    "Yusadolat": "You say?. ",
    "Korbeil": "You can also use something like supervisord which will restart the process if needed.. ",
    "cashflys": "I have accomplished some of the above through customs CSS in the various profiles.  This is adequate for my needs but not eloquent.  Since not all browsers treat overlay css the same (MS Edge...) it doesn't behave the same all the time.  I would still love to see some options in the code itself to support the above versus relying on css.  Best wishes, C . ",
    "saveshodhan": "On similar lines, is it possible to have a json file with a list of users and their respective settings imported in the app? we have hundreds of users right now, and it would be too much of work to do it manually... Hello folks,\nI have only changed the README, not sure why the build is failing because of that..\nThe Travis CI log says this:\nSkipping the install step, as specified in the configuration.\n$ ./build/run_gometalinter.sh\nUnable to find image 'filebrowser/dev:latest' locally\nlatest: Pulling from filebrowser/dev\nAnd the end of the log says this:\nThe command \"./build/run_gometalinter.sh\" exited with 2.. ",
    "hfel": "Came here to request the exact same feature! I've been using Encode Explorer to the same ends, but the design is a bit dated.. ",
    "ixjx": "THX,and this problem have been solved :)\nI just modified the baseURL from / to /file. ",
    "yumere": "@hacdias \nfilebrowser is a awesome tool for me. I, however, want to share pdf and then also want the user given link can see pdf directly in browser. I just wonder your plan when you'll make inline option?. ",
    "bonny1992": "Sorry for bringing up this old issue.\nWhat about multiple \"Share\" links? Like, you select multiple files, then by the share button you can get a compressed single link, or a list of links.\nAlso, is there any way to make it compatible with download managers like Jdownloader?. Sure, @1138-4EB ! Sorry for the hassle!. ",
    "kzw200015": "I face the same problem when I try to manager users.When I click \"save\",it showed the error message.Here is caddyfile\npan.***.top {\n    root /var/www/pan\n    gzip\n    timeouts none\n    tls ***@gmail.com\n    filemanager / /root/download {\n        database /var/www/pan/filemanager.db\n    }\n}. Problem solved.It is my fault.I set Protect Hometo true in the systemd unit.It causes that caddy can't read or write.. ",
    "juan11perez": "same question. basically we're looking for a persistent password. Is there a way to do it via the config.json file?. @1138-4EB thank you. any methodology that allows a persistent password. \na password file would be good.. @1138-4EB thank you. apologies if I oversimplified. Just commenting from a user perspective as frankly cant add much in the way of process. \nAs it stands, it's open. So some (initial) solution is progress.\nI tried blocking it with nginx password feature, but strangely enough it only works on Safari browsers. Meaning, when the dialog box pops up on chrome, firefox, etc and I type the user and password it effectively ignores it and keeps asking for it. Not the case with Safari. Works as intended.\n. thank you for your response. Im using docker-compose:\nfilebrowser:\n    container_name: filebrowser\n    image: filebrowser/filebrowser #:v1.10.0\n    restart: unless-stopped\n    volumes:\n    - /srv/docker/filebrowser/config.json:/etc/config.json\n    - /srv/docker/filebrowser/database.db:/etc/database.db\n    - /:/srv\n    environment:\n    - PGID=1000\n    - PUID=1000\n    ports:\n    - \"1580:80\"\n    command: -- c\nI believe my last line (command: --c) is incorrect and is creating the problem. I removed it and the container  is running. . thank you very much for your time and guidance. the use of the -c argument was poor understanding from my side. I understood that it had to be added as a command to \"activate\" the config file.\nI modified my compose in line wit your above feedback as such:\nfilebrowser:\n    container_name: filebrowser\n    image: filebrowser/filebrowser #:v1.10.0\n    restart: unless-stopped\n    volumes:\n    - /srv/docker/filebrowser/database.db:/etc/database.db\n    - /srv/docker/filebrowser/config.json:/.filebrowser.json\n    - /:/srv\n    environment:\n    - PGID=1000\n    - PUID=1000\n    ports:\n    - \"1580:80\"\nbut it wont start and it's producing this error:\ngoroutine 1 [running]:\ngithub.com/filebrowser/filebrowser/cli/cmd.initConfig()\n    /go/src/github.com/filebrowser/filebrowser/cli/cmd/root.go:71 +0x2ef\ngithub.com/spf13/cobra.(*Command).preRun(0x192f5e0)\n    /go/src/github.com/spf13/cobra/command.go:792 +0x49\ngithub.com/spf13/cobra.(*Command).execute(0x192f5e0, 0x19600f0, 0x0, 0x0, 0x192f5e0, 0x19600f0)\n    /go/src/github.com/spf13/cobra/command.go:728 +0x147\ngithub.com/spf13/cobra.(*Command).ExecuteC(0x192f120, 0x0, 0x0, 0x0)\n    /go/src/github.com/spf13/cobra/command.go:852 +0x30a\ngithub.com/spf13/cobra.(*Command).Execute(0x192f120, 0x0, 0xb5521b)\n    /go/src/github.com/spf13/cobra/command.go:800 +0x2b\ngithub.com/filebrowser/filebrowser/cli/cmd.Execute()\n    /go/src/github.com/filebrowser/filebrowser/cli/cmd/root.go:36 +0x32\nmain.main()\n    /go/src/github.com/filebrowser/filebrowser/cli/main.go:6 +0x20\n. Once again thank you very much for your help. It's now running as per your instructions.. ",
    "pltanton": "Why can't you just slightly change one line in Dockerfile by yourself?. ",
    "airtonix": "@pltanton Yes, I guess I could. But then the official Docker image for FileManager would still not be multi arch.\nalso this: https://stackoverflow.com/questions/39432668/travis-multi-architecture-buiilds. ",
    "rhyst": "\nWhy can't you just slightly change one line in Dockerfile by yourself?\n\nI would like to do this so I do not need to wait for this issue to be resolved, but I can't see a go dep build for arm? What did you have in mind?. Thanks @1138-4EB . I made an alpine docker image that uses the install script mentioned in the docs and that seems to work.\n```\nFROM arm32v6/alpine:3.7\nRUN apk add curl bash git\nRUN curl -fsSL https://filebrowser.github.io/get.sh | bash\nRUN mkdir /config\nCOPY config.json filebrowser.json\nRUN mkdir /db\nVOLUME [\"/db\"]\nEXPOSE 80\nENTRYPOINT [\"filebrowser\"]\n```. ",
    "salcedo": "Thank you for fixing the permissions issue. Is it possible to merge just that and move the discussion about switching from scratch to ubuntu elsewhere? I need the permissions fix ASAP.. :+1: @hacdias @tokvv . ",
    "ifengchao": "@hacdias Thanks you for your advice.. ",
    "rc452860": "@1138-4EB thanks. ",
    "yurividal": "I created a systemd service for filebrowser. Works perfectly. Check Method 4 in https://www.dexterindustries.com/howto/run-a-program-on-your-raspberry-pi-at-startup/. Thank you! Can't believe I missed that.\nHere is my block list now:\ndisallow regex [\\\\/]..+\ndisallow regex \\$RECYCLE.BIN\ndisallow regex System\\sVolume\\sInformation. Great idea. Ctrl Alt H or Ctrl shift H would really be awesome.. @1138-4EB not it Chrome. [offtopic] Speaking of stylesheets, could we have some examples of nice stylesheet mods, maybe posted to the readme?. pi@raspberrypi:~ $ uname -m\narmv7l\npi@raspberrypi:~ $. @1138-4EB it works thanks. . i added\n$sudo_cmd service filebrowser stop\n$sudo_cmd systemctl daemon-reload\n$sudo_cmd service filebrowser start\nBecause i use filebrowser as a service. Im not 100% sure if this is necessary, but just wanted to make sure. Dont know if this could be added to the script, maybe doing a check,. also, some MP4 play in chrome, but with no sound.. @hacdias that is SO SAD... =(\nI wish i had any knowledge in this programing field, to help... \nAnyways, thank you for all the hard-work . ",
    "waynemillskidals": "@karim2001 probably too late on this but we simply kept this running by running this script in cron every minute\nput the below in a file filebrowseractive.sh\nthen add to cron every minute\n```\nRun Filebrowser if not running\nLOG=\"/root/filebrowser.log.date +%d%m%Y\"\necho \"Delete log files older than 9 days\" >>$LOG\n                /usr/bin/find /root/filebrowser.log.* -type f -mtime +9 -exec rm -v {} \\; \necho \"date\" >>$LOG\nFILEBROWSER=ps -s |grep  'filebrowser --port 80' | wc -l\necho \"$FILEBROWSER\"\nif [ $FILEBROWSER -gt 1 ]\n        then\n               echo \"running\"\n    else\n            echo \"not running\"\n            /usr/local/bin/filebrowser --port 80 -a x.x.x.x -r /root/recordings/\n\nfi\necho \"Finish date\" >>$LOG\n```\nx.x.x.x = IP address of box running\nProbably not the prettiest, but it works :)\n. ",
    "CRIMSON501": "Here's the way I did it with a systemd service.\nnano /etc/systemd/system/filebrowser.service\n```\n[Unit]\nDescription=Filebrowser\nAfter=network-online.target\n[Service]\nUser=root\nGroup=root\nExecStart=/usr/local/bin/filebrowser -r /\n[Install]\nWantedBy=multi-user.target\n```\nsystemctl start filebrowser\nsystemctl enable filebrowser\nP.S. this would be a dangerous setup if your filebrowser is accessible via the public internet. In my case it is only listening on the private network.. ",
    "jsjcjsjc": "thank you so much for your kind help ;-)\nI have tested many times and find the problem. my port is 60000. if you use ip:60000 to log in ,everything  is perfect, but i use the  cong files below in nginx., then it will failed .\nit looks i have to use 80 port for filebrowser\n```\nupstream filebrowser{\n    server 127.0.0.1:60000;\n}\nserver {\n    listen       80;\n    server_name  cloud.getpocket.net;\nlocation / {\n    proxy_set_header Host $host;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_pass http://filebrowser;\n}\n\n}\n```. ",
    "wistarine": "thx a lot ....fixed my problems, coz frp sock configuration...  . ",
    "VLEFF": "Of course!. gofmt done, didn't know this command... (actually I didn't know Go at all yesterday, but it's a secret =p). I have installed it with https://filebrowser.github.io/get.sh, how can I update filebrowser for the moment?. Maybe this function is something you already have in some util lib?. ",
    "EasyChris": "I also can't find database.db . where can i load database.db?. ",
    "lordSeaworth": "Hmm i was using hacdias/filemanager:latest it seems. I changed it to hacdias/filebrowser:latest and it seems to work now.\nThis can be closed.. ",
    "robflate": "@lordSeaworth Sorry to post in a Closed thread but do you mind posting your compose file for filebrowser? I'm trying to get it to work through Traefik too. Also, has hacdias/filebrowser:latest become filebrowser/filebrowser:latest? Thanks. ",
    "hugomassing": "I'm currently searching a way to update only filebrowser with caddy? Is there a way to update without installing caddy again? . I tried with with one I build myself today, but it was not working with version 1.8 too. I'm quite a beginner with Caddy, but everything is working great so maybe the mistake is on my side. I tried this as well and got it working. I guess the issue is that it produced a 500 when the command resulted in a crash. Also I tried to make the $FILE environnement variable working after an Upload, with no success. I would love to treat every file uploaded with a script. Can you help me with this one?. I just did echo $FILE on After Upload and the terminal output was just $FILE.. Okay and if I want to execute a command like lltag --yes --mp3v2 --no-tagging --rename \"%a - %t\" $FILE?. I did a quick fix for this in #515.\nlet me know if this is OK for you!. Looks good now :). Okay, I got this working with method 2. Thank you so much for your help with this. Learned a lot using your code!. I can help as well for the frontend part! I have some commit with minor fixes! So sad because the tool is so good! . ",
    "PejmanNik": "In the last release 'v1.10.0' this bug still exists. ",
    "gdomod": "thanks for fast reply.\nin mount -v /var/www in docker image to /srv \nand at host i mount ln -s /tmp to /var/www \nin filemanager i see tmp but i got an error. is that maybe a docker protection ?\nbase os is ubuntu 18.04\n. ",
    "wdcossey": "Resolved by stopping the volume browser and starting it again (with new credentials). ",
    "xor-gate": "I think you can suppress this specific case with / #nosec /. It is very usefull to have gosec linter because it can catch some uncommon cases.. ",
    "nambrosch": "did anyone figure out a way to do this with filebrowser as-is or is it impossible?  i'd also like to disallow access to ^/.* globally and allow specific directories per-user.. thank you for all of the hard work, there is such a mixed bag of products in this space right now.  i was wondering if object previews (image thumbnails) or binding to an external ldap server is in filebrowser's future?. @hacdias perfect, thank you!  when i finish my setup i'll post the full apache config for others to use since there wasn't really any reference material for apache/httpd.. @mholt is your backend a linux system using pam?  if so you could expose those users to apache using mod_authnz_external. ",
    "chinglin": "                                                                                  Hi Henrique,FYI you're sending this to the wrong Ching Lin, you must have picked the wrong GitHub user.                                                                                                                                                                                                                                                                                                                                        Sent\u00a0from\u00a0my\u00a0BlackBerry\u00a010\u00a0smartphone.                                                                                                                                                                                                                .\n",
    "gedw99": "wafle existed before github added the projects functionality.\ngithub projects is much better and easier and integrates of course with github issues.. ",
    "yaskor": "Thx for the quick answer.\nIf found the reference on the offical github readme.md\n\nMoreover, the previously unique repo was split into multiple pieces: frontend, logo, caddy... At the same time, the official docker image was changed to hacdias/filebrowser. Users are encouraged to check their sources and update them accordingly.. \n",
    "Emeryao": "looking forward for the new docker image. can we push a versioned tag to docker hub besides of the latest ?. ",
    "chenfeichen": "thank you @1138-4EB @DeyV . ",
    "jcklpe": "@1138-4EB Well the reason for wanting to run it in WSL is two fold.: \n1. I tried installing on windows and it gave me some weird errors. \nbut more importantly \n2. I don't actually have a GUI solution for messing around with files in WSL right now so this would fill a niche for me that I really need! I can use MidnightCommander to transverse the CLI and copy files etc in a more visual way but this looks much nicer and like it would be a big help for when I want to look at a file that is in WSL. Files that are in WSL, as in actually considered a part of WSL etc, can't be manipulated by the Windows OS interface because it will mess up and corrupt the files. \nWhen I looked over the features for FileBrowser a little more, I really don't think it serves as a full replacement for what File Explorer, at least not yet, espc consider all the right click context menu integration I have built into File Explorer at this point, BUT it would be good for doing stuff with WSL I think! I just need to figure out what I'm doing wrong \ud83d\ude15. @1138-4EB Excellent. Worked liked a charm!\nIt launched me into the Windows home folder and not the WSL home folder. Which makes sense as that is what the terminal does also. I'll have to test to see if using symlinks is a viable way to get to that home folder. Though I think I might ultimately be better off just symlinking anything I need to edit etc out into the windows folders. That's what I do with my WP installations anyway so I don't think it makes a huge difference. . ",
    "ChrisGet": "I have just installed this great piece of software using the install script method:\ncurl -fsSL https://filebrowser.github.io/get.sh | bash\nVersion is 1.10 but I still have the search issue with results being all lower case so the links are not found. How can I include the fix as stated above?. @1138-4EB Thanks for your response. Do you have any idea when the next release will be published?\nI have tried using the install files build_all.sh but I am hitting problem after problem with installing go, rice, and everything else.\nI have managed to install docker. I am on Debian 8.10 Jessie. How do I use that docker image that you referred to? I have no experience with docker I'm afraid.\nThanks.. @1138-4EB Sorry I found the documentation. I'll try the docker method. Thanks.. ",
    "ericvolp12": "Hi @chenfeichen, this NGINX config file is incredibly noisy and should probably be stripped down to a listen, server_name, and location / clause to test if your reverse proxy statement in the location block is working, if that still gives you a 502 error, check your nginx error logs and post the relevant errors here, thanks.. MKV files are not supported natively on MacOS, you either have to download the file and open it in something like VLC player, or use a modern browser like Chrome that has codecs to decode the MKV containers. The MP4 issues are similar in that browsers don't have every audio/video codec required for consistent playback, please download the files and open them in VLC or some other video player.\nIf you want to be streaming video content from a server to your web browser, look at a project like Plex which performs live transcoding of your media to ensure it can properly playback in your browser.. I just realize this is also related to #465 so I'll tag it here.. This should probably be a feature request for user groups that can share permissions or for a multi-access user option.. Hey, I'll see if I can carve up some time to help out. I had a few commits way back when this was starting out but haven't touched the source in a while.. If you want to make me a maintainer I can dig through the issues and get rid of the noise of people who don't understand how web or golang or whatever works.... Hey @hacdias it'd be nice if I had the permissions required to close or label issues as I dig through the backlog. I do have a history of commits to the project for the record.. This contains no information we can action upon at all, this should be closed.. ",
    "HeavyHorst": "I executed \"find -type f -exec sed -i 's/BaseURL/baseurl/g' {} \\;\" in the frontend folder and then recreated the assets with \"build/build_assets.sh \". After that everything seems to work again.. ",
    "kolaente": "Isn't this already implemented?. I tried to reproduce this, wasn't able to. It worked without any issues even bevore updating the user via the gui.. @1138-4EB I did go get -u github.com/mholt/archiver and go get github.com/pierrec/lz4@master.\nAFAIK go get doesn't update anything unless you tell it to do so. Otherwise it just downloads the dependencies specified in go.mod and go.sum.. ",
    "brandonkal": "Why? The DB file does not need to exist on the host, it is created by the mount. Bind mounting a file is not any harder than a folder... Or just use docker volumes and keep it simple. Also it seems you are confusing docker daemon logic with application logic.. ",
    "flightlevel": "What's the advantage of specifying multiple files over a single folder?\nIf I keep it simple and just use docker volumes, how do I retain my settings on a different host?. @1138-4EB wow, thank you for such a helpful response\nI'll have a play and then create PR for the docs. ",
    "minhohihi": "@hacdias I'm sorry. That page is for internal and I thought this issue report site also internal page when I reported the issue. You can ignore this issue.. ",
    "dtwilliams10": "I can work this issue, just need permission to the repo in Docker Hub. . @hacdias Ok I'll get started, did you want to assign this issue to me? I'll open a PR when I'm done. . I would like to help, I haven't developed with Go or Vue but I do have full stack experience that I can try to help with. After looking through the issue log is there any priority or order that you would want things worked on?. ",
    "ldesousa": "@dream10201 Which part of \"to give access to the same resources to a large group of people\" did you miss?. ",
    "rhjmoore": "Do you need help maintaining the Go side or the web client side more?. Sorry to piggy back on this issue, but I'm trying to debug an issue i have with access to one particular folder. How can turn I up the verbosity of the log, either using the config.json file or in a command line option?. Hi,\nI have a folder that filebrowser won't open, and nothing (beyond the fact that filebrowser is listening to the port) is recorded in the log. Otherwise it performs wonderfully. I'll file a separate issue for specific guidance on how to resolve.\nThanks,\nRoss. The folder name is /media/Media/Resilio. I should add that, as the name suggests, this folder is synced via the Resilio software to other machines; but so are other folders that I can successfully view. So it's possible it's related to the Resilio software is some way, but unlikely given that all other work.. Understood that it is difficult to triage. I'm running the docker build; I'll have to have a go at building the code myself to then try adding the print statements you suggest. And yes, I've checked the log, just a note that the server is listening to the port. Thanks anyway.\nI'll open a new issue if I get it built, logged and have something more specific to report.. ",
    "wuzhefang": "fine. Begin to learning Go. . ",
    "IanDuncanT": "I would like to help develop this. I haven't learned go yet, but I will look at some issues and try to fix some.. ",
    "owgus": "@hacdias I want to help to develop & maintain this project. I have some free time. \ud83d\udc4d. ",
    "FlorianWendelborn": "@1138-4EB latest version that\u2019s published to Docker.\nWhere do I find the log files?. @1138-4EB\n```sh\nfb \u276f vi docker-compose.yml\ncopy-paste code from my repro\nfb \u276f vi Caddyfile\ncopy-paste code from my repo\nfb \u276f docker-compose up\nCreating network \"fb_default\" with the default driver\nPulling proxy (abiosoft/caddy:)...\nlatest: Pulling from abiosoft/caddy\n8e3ba11ec2a2: Already exists\n65e56e6ede27: Pull complete\nacae7731bd69: Pull complete\n38f2797390ad: Pull complete\ne4a08ad5278d: Pull complete\n9aa978fb5a6b: Pull complete\nDigest: sha256:918431577452be0f3117fa056b1280f0ef0cd2f002473f405f375495eed168f4\nStatus: Downloaded newer image for abiosoft/caddy:latest\nPulling filebrowser (filebrowser/filebrowser:)...\nlatest: Pulling from filebrowser/filebrowser\n65e0b2b1d200: Pull complete\neb25635ba1b5: Pull complete\n5e7f38ec4625: Pull complete\nDigest: sha256:2e7fa72db2cba55b1cd587152eeea65b9992b218906f23f1da2445ede5454abc\nStatus: Downloaded newer image for filebrowser/filebrowser:latest\nCreating fb_proxy_1 ... done\nCreating fb_filebrowser_1 ... done\nAttaching to fb_proxy_1, fb_filebrowser_1\nproxy_1        | Activating privacy features... done.\nproxy_1        | http://0.0.0.0\nfilebrowser_1  | 2018/10/04 07:47:02 Using config file: /.filebrowser.json\nproxy_1        | 2018/10/04 07:47:01 http://0.0.0.0\nfilebrowser_1  | 2018/10/04 07:47:02 Listening on [::]:80\nproxy_1        | 2018/10/04 07:47:02 [WARNING] Sending telemetry (attempt 1): telemetry server returned status code 403 - backing off and retrying\nproxy_1        | 2018/10/04 07:47:11 [NOTICE] Sending telemetry: we were too early; waiting 1h0m37.262646958s before trying again\n```\n\n. ",
    "dbeniamine": "I had the same issue, after pulling the latest filebrowser image on docker hub it works like a cham, thanks :+1: . Right after openning this issue I saw that the issue because of which I was stuck on 1.10 is solved, so I updated my image. Sadly this issue is still their with the last docker image File Browser v(4945635b). Sadly I cannot test as the last image does not accept the --auth.method='none' argument anymore:\n```\nUse \"filebrowser [command] --help\" for more information about a command.\n2019/01/07 11:20:22 unknown flag: --auth.method\n`\n. I spoke too quickly: withv1.11.0I can use the--auth.method=none` flags and I can open a directory with many files but it is quite slow:\n|number of csv| time to open|\n|------------------|-----------------|\n| 45                  | 15s              |\n| 180                | 36s              |\n| 315                |  killed after 5m |\n. Yes I am using docker.\nI'll wait for the 2.0 then, thanks for your help.\n. Now that I can use 2.0.x, I confirm that it fixed the issue for me. \nDirectories now open instantaneously, thanks for all the great work !. Hello @hacdias,\nI never mounted the db as I do not use filebrowser users, so I am running a brand new db.\nWith the provided configuration file I still have the same issue and noauth is not activated.\nMounting the db does not change anything .... I can see these lines on my reverse proxy:\nnginx\n172.26.0.1 - <user> [16/Jan/2019:10:31:59 +0000] \"GET /files/files/ HTTP/1.1\" 200 1142 \"-\" \"Mozilla/5.0 (X11; Linux x86_64; rv:64.0) Gecko/20100101 Firefox/64.0\"\n172.26.0.1 - <user> [16/Jan/2019:10:31:59 +0000] \"GET /files/static/css/chunk-vendors.43006785.css HTTP/1.1\" 200 7710 \"http://localhost:6080/files/files/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:64.0) Gecko/20100101 Firefox/64.0\"\n172.26.0.1 - <user> [16/Jan/2019:10:31:59 +0000] \"GET /files/static/css/app.02f31e4b.css HTTP/1.1\" 200 29917 \"http://localhost:6080/files/files/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:64.0) Gecko/20100101 Firefox/64.0\"\n172.26.0.1 - <user> [16/Jan/2019:10:31:59 +0000] \"GET /files/static/js/chunk-vendors.dc744398.js HTTP/1.1\" 200 948821 \"http://localhost:6080/files/files/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:64.0) Gecko/20100101 Firefox/64.0\"\n172.26.0.1 - <user> [16/Jan/2019:10:31:59 +0000] \"GET /files/static/js/app.10bf4a2d.js HTTP/1.1\" 200 251936 \"http://localhost:6080/files/files/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:64.0) Gecko/20100101 Firefox/64.0\"\n172.26.0.1 - - [16/Jan/2019:10:32:00 +0000] \"POST /files/api/renew HTTP/1.1\" 401 204 \"http://localhost:6080/files/files/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:64.0) Gecko/20100101 Firefox/64.0\"\n172.26.0.1 - <user> [16/Jan/2019:10:32:00 +0000] \"GET /files/static/img/logo.svg HTTP/1.1\" 200 5507 \"http://localhost:6080/files/login?redirect=%2Ffiles%2F\" \"Mozilla/5.0 (X11; Linux x86_64; rv:64.0) Gecko/20100101 Firefox/64.0\"\n172.26.0.1 - <user> [16/Jan/2019:10:32:00 +0000] \"GET /files/static/img/icons/apple-touch-icon-152x152.png HTTP/1.1\" 404 19 \"-\" \"Mozilla/5.0 (X11; Linux x86_64; rv:64.0) Gecko/20100101 Firefox/64.0\"\n172.26.0.1 - <user> [16/Jan/2019:10:32:00 +0000] \"GET /files/static/img/icons/favicon-16x16.png HTTP/1.1\" 200 843 \"-\" \"Mozilla/5.0 (X11; Linux x86_64; rv:64.0) Gecko/20100101 Firefox/64.0\"\nAs you can see the POST goes 401 and there is a 404 on apple-touch-icon\n. @efrecon  when I only provide the command line --noauth --baseurl=/files/ I indeed have the same error as you : 401 on /api/ressources\nSo I  added a port mapping to my docker-compose to access directly filebrowser and it works like a charm when I go directly on filebrowser port. But I still need to access it via my proxy, how can I make the proxy work ?. @hacdias there is a screenshot with visible headers:\n\n. @hacdias : I am using a nginx proxy with basic auth (pam_auth), I can add an auth header but I do not know which one to use and what value to pass, can you give me a configuration example ?. I just tested it with 2.0.2 and I confirm that it is fixed, thanks for your help :). @maxlaverse : thanks you so much, I confirm it was only a cookie issue => I'm closing this one. ",
    "seagochen": "I got it! Very thanks!. ",
    "laurencefass": "found in documentation. ",
    "glinuz": "WDescription\nWhen open a directory,with a lot of files,more than 400(my host),web show internal error. The console log : out of memory.\nExpected behaviour\nopen directory ,with a lot of files.\nWhat is happening instead?\nfatal error: runtime: out of memory\ngoroutine 19 [syscall]:\nos/signal.signal_recv(0x0)\n/usr/local/go/src/runtime/sigqueue.go:139 +0xa6\nos/signal.loop()\n/usr/local/go/src/os/signal/signal_unix.go:22 +0x22\ncreated by os/signal.init.0\n/usr/local/go/src/os/signal/signal_unix.go:28 +0x41\ngoroutine 20 [running]:\ngoroutine running on other thread; stack unavailable\ncreated by github.com/filebrowser/filebrowser/vendor/github.com/robfig/cron.(*Cron).Start\n/go/src/github.com/filebrowser/filebrowser/vendor/github.com/robfig/cron/cron.go:127 +0x43\nMy environment : Centos 7.4  64ibt v1.10.0 xfs,with more than 400 files. ",
    "hufh": "@1138-4EB Thanks for reply. I finally found this link https://github.com/filebrowser/community/blob/master/builds.md, followed the instruction and successfully compiled it. The document is not so easy to find, I'd suggest to move the document to filebrowser repo from community repo.\nBut i still have problem to get it running. I got following errors:\n[root@linux cli]# ./filebrowser\n2018/10/05 10:56:37 Listening on [::]:46229\npanic: could not locate box \"../frontend/dist\"\ngoroutine 1 [running]:\ngithub.com/GeertJohan/go%2erice.MustFindBox(0xda7824, 0x10, 0x744f05)\n    /usr/lib/golang/src/github.com/GeertJohan/go.rice/box.go:110 +0x97\ngithub.com/filebrowser/filebrowser/lib.(FileBrowser).Setup(0xc42012e1e0, 0x1, 0xd6cd06)\n    /usr/lib/golang/src/github.com/filebrowser/filebrowser/lib/filebrowser.go:138 +0x48\ngithub.com/filebrowser/filebrowser/cli/cmd.handler(0xc420199b80, 0x2)\n    /usr/lib/golang/src/github.com/filebrowser/filebrowser/cli/cmd/server.go:119 +0x9b9\ngithub.com/filebrowser/filebrowser/cli/cmd.Serve()\n    /usr/lib/golang/src/github.com/filebrowser/filebrowser/cli/cmd/server.go:72 +0x4c4\ngithub.com/filebrowser/filebrowser/cli/cmd.glob..func2(0x13c8de0, 0x13fa670, 0x0, 0x0)\n    /usr/lib/golang/src/github.com/filebrowser/filebrowser/cli/cmd/serve.go:17 +0x20\ngithub.com/spf13/cobra.(Command).execute(0x13c8de0, 0x13fa670, 0x0, 0x0, 0x13c8de0, 0x13fa670)\n    /usr/lib/golang/src/github.com/spf13/cobra/command.go:766 +0x2c1\ngithub.com/spf13/cobra.(Command).ExecuteC(0x13c8920, 0x0, 0x0, 0x0)\n    /usr/lib/golang/src/github.com/spf13/cobra/command.go:852 +0x334\ngithub.com/spf13/cobra.(Command).Execute(0x13c8920, 0xc420000260, 0x0)\n    /usr/lib/golang/src/github.com/spf13/cobra/command.go:800 +0x2b\ngithub.com/filebrowser/filebrowser/cli/cmd.Execute()\n    /usr/lib/golang/src/github.com/filebrowser/filebrowser/cli/cmd/root.go:36 +0x32\nmain.main()\n    /root/filebrowser/cli/main.go:6 +0x20\nMy OS is CentOS 7.2, 1511, and go version is 1.9.4. I also tried it with go 1.10 on another machine, but both failed.  I used native mode to compile rather than docker mode.\nCould you give me a hand?  Thanks.\n. @1138-4EB If you run \"go help gopath\", you can get following info:\n\n\"See https://golang.org/wiki/SettingGOPATH to set a custom GOPATH.\nEach directory listed in GOPATH must have a prescribed structure:\nThe src directory holds source code. The path below src\ndetermines the import path or executable name.\n......\nHere's an example directory layout:\nGOPATH=/home/user/go\n\n/home/user/go/\n    src/\n        foo/\n            bar/               (go code in package bar)\n                x.go\n            quux/              (go code in package main)\n                y.go\n    bin/\n        quux                   (installed command)\n    pkg/\n        linux_amd64/\n            foo/\n                bar.a          (installed package object)\n\n\nIt suggests that all the source code should be put under \"src\" folder. I am not sure if we should do so.\n. > The GOPATH is not the same as the root of the repository. The repositories are located in $GOPATH/src/filebrowser/*, indeed.\n\nAbout the error you are getting, did you build the frontend and execute rice prior to building the backend?\n\nYes, i did. My GOPATH is as follows. Is that correct?\n[root@linux filebrowser]# ls\nbuild  cli  Dockerfile  Docker.json  frontend  lib  LICENSE  README.md  src\n[root@linux filebrowser]# echo $GOPATH\n/root/filebrowser/\n[root@linux filebrowser]# pwd\n/root/filebrowser. > Please, have a look at:\n\n\nhttps://golang.org/doc/code.html\nhttps://github.com/golang/go/wiki/GOPATH\n\n\nThanks for reply. I double-checked the  procedure and got it recompiled sucessfully, but i still got following error:\n[root@bogon cli]# ./filebrowser\n2018/10/06 09:45:31 Listening on [::]:44910\npanic: could not locate box \"../frontend/dist\"\ngoroutine 1 [running]:\ngithub.com/GeertJohan/go%2erice.MustFindBox(0xd01ab7, 0x10, 0xc4201d15c0)\n    /root/github/filebrowser/src/github.com/GeertJohan/go.rice/box.go:110 +0x97\ngithub.com/filebrowser/filebrowser/lib.(FileBrowser).Setup(0xc4201661e0, 0x0, 0x0)\n    /root/github/filebrowser/src/github.com/filebrowser/filebrowser/lib/filebrowser.go:138 +0x48\ngithub.com/filebrowser/filebrowser/cli/cmd.handler(0xc42014db88, 0x2)\n    /root/github/filebrowser/src/github.com/filebrowser/filebrowser/cli/cmd/server.go:119 +0x755\ngithub.com/filebrowser/filebrowser/cli/cmd.Serve()\n    /root/github/filebrowser/src/github.com/filebrowser/filebrowser/cli/cmd/server.go:72 +0x480\ngithub.com/filebrowser/filebrowser/cli/cmd.glob..func2(0x128b620, 0x12bc1e0, 0x0, 0x0)\n    /root/github/filebrowser/src/github.com/filebrowser/filebrowser/cli/cmd/serve.go:17 +0x20\ngithub.com/spf13/cobra.(Command).execute(0x128b620, 0x12bc1e0, 0x0, 0x0, 0x128b620, 0x12bc1e0)\n    /root/github/filebrowser/src/github.com/spf13/cobra/command.go:766 +0x2c1\ngithub.com/spf13/cobra.(Command).ExecuteC(0x128b160, 0x0, 0x0, 0x0)\n    /root/github/filebrowser/src/github.com/spf13/cobra/command.go:852 +0x30a\ngithub.com/spf13/cobra.(Command).Execute(0x128b160, 0x0, 0xb5629b)\n    /root/github/filebrowser/src/github.com/spf13/cobra/command.go:800 +0x2b\ngithub.com/filebrowser/filebrowser/cli/cmd.Execute()\n    /root/github/filebrowser/src/github.com/filebrowser/filebrowser/cli/cmd/root.go:36 +0x32\nmain.main()\n    /root/github/filebrowser/src/github.com/filebrowser/cli/main.go:6 +0x20\nI understand that the original issue should be closed, should i open a new issue for this runtime error? Thanks for your patience.. ",
    "shyal": "Hi @1138-4EB. My context is that i am building a lightweight IDE, that'll at most have an Editor (CodeMirror), a Terminal (gotty) and a FileBrowser (filebrowser). I'm using an  tag for gotty and filebrowser, and the issue is, filebrowser won't load through an iframe.\nI tried removing the x-frame-options header:\n```diff\n--- a/lib/http/http.go\n+++ b/lib/http/http.go\n@@ -85,7 +85,7 @@ func serve(c fb.Context, w http.ResponseWriter, r http.Request) (int, error) {\n        }\n    // Any other request should show the index.html file.\n\n\nw.Header().Set(\"x-frame-options\", \"SAMEORIGIN\")\n// w.Header().Set(\"x-frame-options\", \"SAMEORIGIN\")\n        w.Header().Set(\"x-content-type-options\", \"nosniff\")\n        w.Header().Set(\"x-xss-protection\", \"1; mode=block\")\n```\n\nhowever it leads to Chrome displaying an error about filebrowser returning the incorrect response.. I'm also having issues with 2.0.x. I'm so grateful for this project... but at the same time, it seems there's a bit of common sense lacking. There's a command line interface, flags, a json config file, a database.. settings that can be modified via a UI.\nWhy not just have 1, and 1 only way of configuring filebrowser and be done with it?\nAlso the flags keep on changing with each update. I've spent so much time trying to configure filebrowser, and ended up pulling my hair out.. it's such a shame, because filebrowser is simply unique, and so valuable to its users.. ",
    "hitmax117": "I have the same problem in Organizr (iframe as well). Even if I set proxy_hide_header       x-frame-options; in nginx I keep getting the broken page when loading in an iframe Refused to display 'https://URL/' in a frame because it set 'X-Frame-Options' to 'sameorigin'. So it's a filebrowser specific problem.. ",
    "AciDCooL": "\u0336I\u0336 \u0336h\u0336a\u0336v\u0336e\u0336 \u0336t\u0336h\u0336e\u0336 \u0336s\u0336a\u0336m\u0336e\u0336 \u0336i\u0336s\u0336s\u0336u\u0336e\u0336 \u0336t\u0336h\u0336r\u0336o\u0336u\u0336g\u0336h\u0336 \u0336t\u0336r\u0336a\u0336e\u0336f\u0336i\u0336k\u0336 \u0336a\u0336s\u0336 \u0336p\u0336r\u0336o\u0336x\u0336y\u0336 \u0336a\u0336n\u0336d\u0336 \u0336t\u0336h\u0336e\u0336 \u0336o\u0336f\u0336f\u0336i\u0336c\u0336i\u0336a\u0336l\u0336 \u0336d\u0336o\u0336c\u0336k\u0336e\u0336r\u0336 \u0336i\u0336m\u0336a\u0336g\u0336e\u0336 \u0336(\u0336d\u0336o\u0336c\u0336k\u0336e\u0336r\u0336 \u0336p\u0336u\u0336l\u0336l\u0336 \u0336f\u0336i\u0336l\u0336e\u0336b\u0336r\u0336o\u0336w\u0336s\u0336e\u0336r\u0336/\u0336f\u0336i\u0336l\u0336e\u0336b\u0336r\u0336o\u0336w\u0336s\u0336e\u0336r\u0336)\u0336 \u0336i\u0336n\u0336 \u0336a\u0336n\u0336 \u0336i\u0336f\u0336r\u0336a\u0336m\u0336e\u0336 \u0336w\u0336i\u0336t\u0336h\u0336i\u0336n\u0336 \u0336t\u0336h\u0336e\u0336 \u0336o\u0336r\u0336g\u0336a\u0336n\u0336i\u0336z\u0336r\u0336 \u0336t\u0336a\u0336b\u0336s\u0336,\u0336 \u0336s\u0336o\u0336 \u0336i\u0336t\u0336'\u0336s\u0336 \u0336p\u0336r\u0336o\u0336b\u0336a\u0336b\u0336l\u0336y\u0336 \u0336f\u0336i\u0336l\u0336e\u0336b\u0336r\u0336o\u0336w\u0336s\u0336e\u0336r\u0336 \u0336s\u0336p\u0336e\u0336c\u0336i\u0336f\u0336i\u0336c\u0336.\u0336\n\u0336U\u0336s\u0336i\u0336n\u0336g\u0336 \u0336t\u0336h\u0336e\u0336s\u0336e\u0336 \u0336l\u0336a\u0336b\u0336e\u0336l\u0336s\u0336 \u0336w\u0336h\u0336i\u0336c\u0336h\u0336 \u0336w\u0336o\u0336r\u0336k\u0336 \u0336w\u0336i\u0336t\u0336h\u0336 \u0336m\u0336o\u0336s\u0336t\u0336 \u0336c\u0336o\u0336n\u0336t\u0336a\u0336i\u0336n\u0336e\u0336r\u0336s\u0336 \u0336b\u0336u\u0336t\u0336 \u0336n\u0336o\u0336t\u0336 \u0336w\u0336i\u0336t\u0336h\u0336 \u0336f\u0336i\u0336l\u0336e\u0336b\u0336r\u0336o\u0336w\u0336s\u0336e\u0336r\u0336.\u0336\n\u0336\u0336\u0336\u0336\n\u0336 \u0336 \u0336 \u0336 \u0336 \u0336 \u0336 \u0336 \u0336t\u0336r\u0336a\u0336e\u0336f\u0336i\u0336k\u0336.\u0336f\u0336r\u0336o\u0336n\u0336t\u0336e\u0336n\u0336d\u0336.\u0336h\u0336e\u0336a\u0336d\u0336e\u0336r\u0336s\u0336.\u0336S\u0336S\u0336L\u0336R\u0336e\u0336d\u0336i\u0336r\u0336e\u0336c\u0336t\u0336:\u0336 \u0336\"\u0336t\u0336r\u0336u\u0336e\u0336\"\u0336\n\u0336 \u0336 \u0336 \u0336 \u0336 \u0336 \u0336 \u0336 \u0336t\u0336r\u0336a\u0336e\u0336f\u0336i\u0336k\u0336.\u0336f\u0336r\u0336o\u0336n\u0336t\u0336e\u0336n\u0336d\u0336.\u0336p\u0336a\u0336s\u0336s\u0336H\u0336o\u0336s\u0336t\u0336H\u0336e\u0336a\u0336d\u0336e\u0336r\u0336:\u0336 \u0336\"\u0336t\u0336r\u0336u\u0336e\u0336\"\u0336\n\u0336 \u0336 \u0336 \u0336 \u0336 \u0336 \u0336 \u0336 \u0336t\u0336r\u0336a\u0336e\u0336f\u0336i\u0336k\u0336.\u0336f\u0336r\u0336o\u0336n\u0336t\u0336e\u0336n\u0336d\u0336.\u0336h\u0336e\u0336a\u0336d\u0336e\u0336r\u0336s\u0336.\u0336f\u0336r\u0336a\u0336m\u0336e\u0336D\u0336e\u0336n\u0336y\u0336:\u0336 \u0336\"\u0336t\u0336r\u0336u\u0336e\u0336\"\u0336\n\u0336 \u0336 \u0336 \u0336 \u0336 \u0336 \u0336 \u0336 \u0336t\u0336r\u0336a\u0336e\u0336f\u0336i\u0336k\u0336.\u0336f\u0336r\u0336o\u0336n\u0336t\u0336e\u0336n\u0336d\u0336.\u0336h\u0336e\u0336a\u0336d\u0336e\u0336r\u0336s\u0336.\u0336c\u0336u\u0336s\u0336t\u0336o\u0336m\u0336F\u0336r\u0336a\u0336m\u0336e\u0336O\u0336p\u0336t\u0336i\u0336o\u0336n\u0336s\u0336V\u0336a\u0336l\u0336u\u0336e\u0336:\u0336 \u0336\"\u0336a\u0336l\u0336l\u0336o\u0336w\u0336-\u0336f\u0336r\u0336o\u0336m\u0336 \u0336h\u0336t\u0336t\u0336p\u0336s\u0336:\u0336/\u0336/\u0336w\u0336w\u0336w\u0336.\u0336d\u0336o\u0336m\u0336a\u0336i\u0336n\u0336.\u0336c\u0336o\u0336m\u0336\"\u0336\n\u0336 \u0336 \u0336 \u0336 \u0336 \u0336 \u0336 \u0336 \u0336t\u0336r\u0336a\u0336e\u0336f\u0336i\u0336k\u0336.\u0336f\u0336r\u0336o\u0336n\u0336t\u0336e\u0336n\u0336d\u0336.\u0336h\u0336e\u0336a\u0336d\u0336e\u0336r\u0336s\u0336.\u0336c\u0336o\u0336n\u0336t\u0336e\u0336n\u0336t\u0336S\u0336e\u0336c\u0336u\u0336r\u0336i\u0336t\u0336y\u0336P\u0336o\u0336l\u0336i\u0336c\u0336y\u0336:\u0336 \u0336\"\u0336f\u0336r\u0336a\u0336m\u0336e\u0336-\u0336a\u0336n\u0336c\u0336e\u0336s\u0336t\u0336o\u0336r\u0336s\u0336 \u0336'\u0336s\u0336e\u0336l\u0336f\u0336'\u0336 \u0336d\u0336o\u0336m\u0336a\u0336i\u0336n\u0336.\u0336c\u0336o\u0336m\u0336 \u0336*\u0336.\u0336d\u0336o\u0336m\u0336a\u0336i\u0336n\u0336.\u0336c\u0336o\u0336m\u0336 \u0336;\u0336\"\u0336\n\u0336\u0336\u0336\u0336\n\u0336\n\u0336E\u0336r\u0336r\u0336o\u0336r\u0336:\u0336\n\u0336\u0336R\u0336e\u0336f\u0336u\u0336s\u0336e\u0336d\u0336 \u0336t\u0336o\u0336 \u0336d\u0336i\u0336s\u0336p\u0336l\u0336a\u0336y\u0336 \u0336'\u0336h\u0336t\u0336t\u0336p\u0336s\u0336:\u0336/\u0336/\u0336f\u0336i\u0336l\u0336e\u0336b\u0336r\u0336o\u0336w\u0336s\u0336e\u0336r\u0336.\u0336d\u0336o\u0336m\u0336a\u0336i\u0336n\u0336.\u0336c\u0336o\u0336m\u0336/\u0336'\u0336 \u0336i\u0336n\u0336 \u0336a\u0336 \u0336f\u0336r\u0336a\u0336m\u0336e\u0336 \u0336b\u0336e\u0336c\u0336a\u0336u\u0336s\u0336e\u0336 \u0336i\u0336t\u0336 \u0336s\u0336e\u0336t\u0336 \u0336'\u0336X\u0336-\u0336F\u0336r\u0336a\u0336m\u0336e\u0336-\u0336O\u0336p\u0336t\u0336i\u0336o\u0336n\u0336s\u0336'\u0336 \u0336t\u0336o\u0336 \u0336'\u0336s\u0336a\u0336m\u0336e\u0336o\u0336r\u0336i\u0336g\u0336i\u0336n\u0336'\u0336.\u0336\u0336\nEdit:\n@\u0336h\u0336i\u0336t\u0336m\u0336a\u0336x\u03361\u03361\u03367\u0336 \u0336T\u0336r\u0336y\u0336 \u0336c\u0336l\u0336e\u0336a\u0336r\u0336i\u0336n\u0336g\u0336 \u0336c\u0336a\u0336c\u0336h\u0336e\u0336 \u0336i\u0336n\u0336 \u0336y\u0336o\u0336u\u0336r\u0336 \u0336b\u0336r\u0336o\u0336w\u0336s\u0336e\u0336r\u0336 \u0336o\u0336r\u0336 \u0336g\u0336o\u0336 \u0336i\u0336n\u0336c\u0336o\u0336g\u0336n\u0336i\u0336t\u0336o\u0336.\u0336 \u0336T\u0336h\u0336a\u0336n\u0336k\u0336s\u0336 \u0336t\u0336o\u0336:\u0336 \u0336h\u0336t\u0336t\u0336p\u0336s\u0336:\u0336/\u0336/\u0336g\u0336i\u0336t\u0336h\u0336u\u0336b\u0336.\u0336c\u0336o\u0336m\u0336/\u0336c\u0336a\u0336u\u0336s\u0336e\u0336f\u0336x\u0336/\u0336O\u0336r\u0336g\u0336a\u0336n\u0336i\u0336z\u0336r\u0336/\u0336i\u0336s\u0336s\u0336u\u0336e\u0336s\u0336/\u03364\u03360\u03360\u0336#\u0336i\u0336s\u0336s\u0336u\u0336e\u0336c\u0336o\u0336m\u0336m\u0336e\u0336n\u0336t\u0336-\u03363\u03361\u03360\u03362\u03365\u03362\u03367\u03361\u03362\u0336\nEdit2: NVM\nDue to the service worker in chrome as far as I can debug. Have two working options.\n\n\nRemove the service worker entirely and iframe works once, since after a reload some js script (sw.js?) adds the worker again the response header x-frame-options goes back to sameorigin.\n\n\nSemi permanent workaround for testing:\nChrome --> F12 --> Application tab --> Service Workers --> check \"Bypass for network\" --> refresh iframe\n\n\nHeaders\nWith service worker:\ncontent-length: 3365\ncontent-type: text/html; charset=utf-8\ndate: Sat, 08 Dec 2018 23:54:35 GMT\nstatus: 200\nx-content-type-options: nosniff\nx-frame-options: SAMEORIGIN\nx-xss-protection: 1; mode=block\nWithout service worker:\ncontent-length: 3365\ncontent-security-policy: frame-ancestors 'self' domain.com *.domain.com ;\ncontent-type: text/html; charset=utf-8\ndate: Fri, 21 Dec 2018 00:37:11 GMT\nstatus: 200\nx-content-type-options: nosniff\nx-frame-options: allow-from https://www.domain.com\nx-xss-protection: 1; mode=block. ",
    "sprders": "@helloray It's not a file but almost 10 files . It always downloads txt file , which confuses me.. ",
    "benfff85": "Just a friendly inquiry, is this impacting the publication of an updated docker image? I tried this out locally and love it but #522 is preventing it from being used behind a reverse proxy. . ",
    "Syavne": "Docker build is indeed affected, the following command ends up with the error message:\ndocker build --build-arg plugins=filemanager github.com/abiosoft/caddy-docker.git\nI'm looking for a successful deploy pointing to a specific base URL, either with the Caddy plugin or a reverse proxy.. ",
    "hfte": "I see, related to  #523.. ",
    "toddlerya": "\nHi @toddlerya. The PR seems to be failing the lint test. Could you please check and fill the PR template (https://github.com/filebrowser/filebrowser/blob/master/.github/PULL_REQUEST_TEMPLATE.md)?\n\nok~\nI only changed one line of code, I don't know why the lint test failed. I learned how to use it and submit a PR again.. > Hi @toddlerya. The PR seems to be failing the lint test. Could you please check and fill the PR template (https://github.com/filebrowser/filebrowser/blob/master/.github/PULL_REQUEST_TEMPLATE.md)?\nHi~\nI checked the Building log and found that the parser.ReadFrom method of the \"github.com/gohugoio/hugo/parser\" library was reported incorrectly, but I don't know why this is, can you help me see it, thank you!\n```\ngithub.com/filebrowser/filebrowser/lib\n../lib/file.go:195:15: undefined: parser.ReadFrom\n```\nhttps://travis-ci.com/filebrowser/filebrowser/jobs/156381918. root@easy:~/GitHub/filebrowser/build# ./run_gometalinter.sh \nlib/file.go:195:22:error: ReadFrom not declared by package parser (gotype)\n../../../opt/go/src/os/user/lookup.go:53:9:warning: undeclared name: lookupGroupId (interfacer)\n../../../opt/go/src/os/user/lookup.go:47:9:warning: undeclared name: lookupGroup (interfacer)\n../../../opt/go/src/os/user/lookup.go:41:9:warning: undeclared name: lookupUserId (interfacer)\n../../../opt/go/src/os/user/lookup.go:32:9:warning: undeclared name: lookupUser (interfacer)\n../../../opt/go/src/os/user/lookup.go:11:41:warning: undeclared name: current (interfacer)\n../../../opt/go/src/os/user/lookup.go:58:9:warning: undeclared name: listGroups (interfacer)\nhttps://github.com/gohugoio/hugo/tree/master/parser\nThe newest github.com/gohugoio/hugo/parser couldn't find ReadFrom . > this one #554 ?\nyes, All checks have failed look like is seam resaon..... > Thanks @toddlerya! As @didiroesmana suggested, the CI error seems not to be related to your changes, but we need to fix it before we merge this.\n\nMeanwhile, after the comment by @helloray, would it be possible to make the number be either a constant variable or an additional parameter in https://github.com/filebrowser/filebrowser/blob/master/lib/filebrowser.go#L65-L109?\n\nOk~Good idea. I will update the code and create a new pull request.\nThe change detail: https://github.com/filebrowser/filebrowser/commit/57e122307b21e4a2c71676d40e88209f963a748a. ",
    "didiroesmana": "this one #554  ?. ",
    "mphz": "@helloray yeah, I can also confirm that, really weird, today it works. I think can close the issue.. thx. ",
    "ousui": "@1138-4EB No, I found them on the official website or github.com.\ncaddy: https://caddyserver.com/download/linux/arm5?plugins=http.filemanager&license=personal&telemetry=off (https://caddyserver.com/download)\nfilebrowser: https://github.com/filebrowser/filebrowser/releases/download/v1.10.0/linux-armv5-filebrowser.tar.gz (https://github.com/filebrowser/filebrowser/releases). > The tarball for filebrowser is generated with goreleaser (see https://github.com/filebrowser/filebrowser/blob/master/.goreleaser.yml).\n\nHowever, the binary you get with goreleaser is slightly different from the one you get when building it yourself: https://github.com/filebrowser/filebrowser/blob/master/build/build.sh#L15\nLast, caddy is built with it's own procedure.\nTherefore, it can be tricky to find which is the difference that triggers this error.\n\nThank you~. ",
    "daiaji": "It seems that the scope directive is only valid for the default value of the new user.. ",
    "mmahmoudian": "@rudymartinb I think what you commented here has little to do with what I intended to imply. It is indeed symlink related, but what you are addressing is about write permission (back-end) and what I'm pointing at is the sorting and icon in the file view part (front-end).. ",
    "laoshaw": "https with strong authentication mechanism to manage files via web browser is wonderful, really like this project. No I don't need php, nginx-reverse, mysql to do this, Go's one binary approach is the most elegant method.\nand please replace the editor, monaco(?) or ACE definitely. Thanks!. I did some google check between Monaco editor and ACE, based on the posts I read the consensus is that, Monaco is a better one:\n\nhttps://github.com/Microsoft/monaco-editor/issues/19\nhttps://blog.expo.io/building-a-code-editor-with-monaco-f84b3a06deaf\nhttps://microsoft.github.io/monaco-editor/\nhttps://ace.c9.io/\n\nAs far as Vue vs React goes,they're still competing fiercely, isolate frontend as mentioned above will be nice.. @1138-4EB  it will be great if the log can contain remote-IP, username, and a timestamp when login occurred. If this is too complicated to add, at least have remote-IP in the log file will help. As an example, below is a log line from gitea project(another golang project):\n2018/11/30 23:01:13 [I] Failed authentication attempt for gitea_user from 21.65.123.14\nThanks!. > ```diff\n\ndiff --git a/lib/http/http.go b/lib/http/http.go\nindex cadc893..61e2940 100644\n--- a/lib/http/http.go\n+++ b/lib/http/http.go\n@@ -26,7 +26,7 @@ func Handler(m *fb.FileBrowser) http.Handler {\n                        w.WriteHeader(code)\n                    txt := http.StatusText(code)\n\n\nlog.Printf(\"%v: %v %v\\n\", r.URL.Path, code, txt)\nlog.Printf(\"%v: %v %s %v\\n\", r.URL.Path, code, r.RemoteAddr, txt)\n                        w.Write([]byte(txt + \"\\n\"))\n                }\n```\n\nThis should provide ip address in the logs for > 400 status code.\nShould i open up pull request also which branch should i target because i notice there is some revamp/rework in progress.\n\nthis change seems non-intrusive, please make sure PR will be merged in next release. ",
    "zaichou": "\n\nFolder upload(I can help to contribute it)\n\n\ni need it, thank you.\n. ",
    "ptman": "I'm sorry, I don't know enough to make an informed decision. Would you kindly tell us some pros and cons?. ",
    "sinni800": "I'm not sure if I remember this right, but wasnt the hugo caddy plugin basically filebrowser with... some differences or something? \nHonestly I've actually never used staticgen, but all it is is just running static site generator programs as far as I could see. I think most users don't even know about the source here, which is a problem... I have no actual opinion on this, but I think the preview is something people probably don't want to lose!. ",
    "belimo": "Hosting Support told me, issue is also reproducible with the newest version of filebrowser.. @hacdias and @dtwilliams10, can you help reproducing this issue, and maybe mark is as a bug?\n@hugomassing I learned that you are frontent-developer and contributing to this project. Maybe you can look at it?. Thanks!. ",
    "XavierBouvard": "Hi,\nIf I may, I am also more concerned about the database file than the port.\nI agree with @1138-4EB: it is a good idea to naturally fallback to 80 if none specified in any kind of configuration.\n\nbut the user should be able to set it in any arbitrary path (either inside or outside of the container).\n\nThis is especially true when the application is not running in a container.\nWithin a container I would recommend to use a dedicated folder for all data so the configuration stays simple or remains open to more.\nWould it be possible to have a dedicated folder for datas ?\n@hacdias : envs variables refers to the environment in which the program is hosted while flags are more for the program's internal behaviour. That being said, it is often hard to balance between config file, flags and environment variables.\nHope this helps,\nXavier. > Would it be possible to have a dedicated folder for datas ?\nSorry if it wasn't clear. When setting up containers I prefer use directory for volumes instead of file.\nHere's an example: \nIn the current version, if I want to run the container, I run:\ndocker run -v /mnt/some-directory/filebrowser.db:/filebrowser.db [...]\nWhen i'd rather run:\ndocker run -v /mnt/filebrowser-data:/data [...]\nIn this case the data folder will contain the filebrowser.db (and maybe some other files in next versions).\nHoping this is clearer.\nThe new version looks much better to me :)\nBut shouldn't the default current scope be something else than \".\" since the db is in there by default ?\nI found '/srv' good enough though.\n. OK.\nThis makes me feel like I misunderstood the purposes of the two volumes declared in your Dockerfile.\nI though that /srv would old the directory I want to administrate (I think you call that default scope) and I was wandering about the /tmp\nAnyway, thanks for your answers, I'll take a look at #604 even if I have not worked in go yet, it'll be interesting to watch some :)\n. ",
    "PixiBixi": "Hi,\nI've no idea what i should edit to my docker-compose.yml to re-use filebrowser, can someone help me?\nguillaume_filebrowser:\n    image: filebrowser/filebrowser\n    container_name: guillaume_filebrowser\n    volumes:\n      - /home/guillaume/incoming:/srv\n      - /root/.apps/guillaume/filebrowser/database.db:/database.db\n      - /root/.apps/guillaume/filebrowser/tmp:/tmp\n    environment:\n      - LETSENCRYPT_HOST=fm.guillaume.x\n      - LETSENCRYPT_EMAIL=contact@x\n      - VIRTUAL_HOST=fm.guillaume.x\n      - VIRTUAL_PORT=80. ",
    "efrecon": "I actually second this and can reproduce it with minimal docker (no compose) on the latest v2.0.0 also. Try to create a fresh new and clean filebrowser like the following:\ndocker run -it --rm --name=filebrowser filebrowser/filebrowser:v2.0.0\nAny command that you exec into the container to operate on the local filebrowser instance will fail. Try the following for example (this is constructed as to execute in the container which name is filebrowser (from the command above) the only binary that exists in the image, i.e. /filebrowser)\ndocker exec -it filebrowser /filebrowser config cat\nI even tried with the following, since this is where filebrowser puts its configuration according to the Dockerfile. It does not work either.\ndocker exec -it filebrowser /filebrowser -c /.filebrowser.json config cat\nMaybe I have just missed something essential... Please advise . No sorry, I wasn't precise enough. Here are a few ones that fail with timeouts (given a running filebrowser as above):\ndocker exec -it filebrowser /filebrowser users find admin\ndocker exec -it filebrowser /filebrowser users update admin -u administrator\ndocker exec -it filebrowser /filebrowser cmds ls\ndocker exec -it filebrowser /filebrowser rules ls\nHope this helps a bit more.. I think that this is due to the noAuth key in the configuration (if that still is supported?). I have had similar issues when running with --noauth (which is supported as of the command-line help, I believe) and trying to protect through basic authentication in the reverse proxy instead. The log of my reverse proxy reports an error when accessing /api/resources as it does not carry the same username (probably meaning one of headers has been mangled). I am running behind caddy though, so this might be a different issue.. @hacdias Thanks. I was having this on a new non-existing database (technically in a newly created docker volume).. Yes. Basic auth behind caddy was what I was trying\nOn Sat, Jan 26, 2019 at 10:41 AM Henrique Dias notifications@github.com\nwrote:\n\nLet's also not deviate from this issue. @dbeniamine\nhttps://github.com/dbeniamine @efrecon https://github.com/efrecon are\nyou also using another auth method? Like basic auth?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/filebrowser/filebrowser/issues/634#issuecomment-457817379,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AJAaVGLxUtc0iVIYZERWzpYzugMVuDEwks5vHCLfgaJpZM4aBYAD\n.\n. \n",
    "alpetric": "Did a small experiment to isolate the issue:\nI wrote a simple Dockerfile:\n```Dockerfile\nFROM ubuntu:18.04\nMAINTAINER Inpher info@inpher.io\nInstall dependencies\nRUN apt-get update && apt-get install -y build-essential curl\nInstall filebrowser\nRUN curl -fsSL https://filebrowser.xyz/get.sh | bash\nEXPOSE 8080\n```\nUsing that file I:\n```\nbuild image\ndocker build --tag=fb-test\nrun image (bash)\ndocker run -it --rm --name=filebrowser fb-test -p 8080:8080 bash\n```\nNow I have a shell inside this vanilla image with filebrowser\n```\nroot@d39df38f4a93:/# filebrowser version\nFile Browser version v2.0.0\nTo be expected as I never ran filebrowser before\nroot@d39df38f4a93:/# filebrowser config cat\n2019/01/23 18:06:44 ./filebrowser.db does not exist. Please run 'filebrowser config init' first.\nrunning filebrowser\nroot@d39df38f4a93:/# filebrowser -a 0.0.0.0\n2019/01/23 18:07:27 No config file used\n2019/01/23 18:07:27 Listening on [::]:8080\ninterrupting it with  and running the users ls command (works)\nroot@d39df38f4a93:/# filebrowser users ls\nID  Username  Scope  Locale  V. Mode  Admin  Execute  Create  Rename  Modify  Delete  Share  Download  Pwd Lock\n1   admin     .      en      mosaic   true   true     true    true    true    true    true   true      false\nnow comes the interesting part\nrunning filebrowser in background\nroot@d39df38f4a93:/# filebrowser -a 0.0.0.0 &\n[1] 32\nroot@d39df38f4a93:/# 2019/01/23 18:09:20 No config file used\n2019/01/23 18:09:20 Listening on [::]:8080\nroot@d39df38f4a93:/# filebrowser users ls\n2019/01/23 18:11:08 timeout\n```\nMy suspicion is that this is not a Docker issue but in general, while a filebrowser instance is running, some commands will timeout when trying to modify/read the currently used db/config.\nMy tests basically show that you if you want to add users for example, you need to stop the filebrowser process, run the filebrowser users add command, then restart filebrowser. In my opinion, it would be great to have the ability to add users without restarting.. posting this if it helps anyone (or someone comes up with a better solution), I wrote a Dockerimage (not as tiny as the official one) that kind of works around this:\nDockerfile:\n```\nFROM alpine\nInstall dependencies\nRUN apk add curl npm bash\nRUN npm install -g pm2\nInstall filebrowser\nRUN curl -fsSL https://filebrowser.xyz/get.sh | bash\nCopy files/scripts\nCOPY config.json /.filebrowser.json\nCOPY startup.sh /startup.sh\nEXPOSE 80\nCMD [\"./startup.sh\"]\n```\nconfig.json\n{\n  \"port\": 80,\n  \"baseURL\": \"\",\n  \"address\": \"0.0.0.0\",\n  \"log\": \"stdout\",\n  \"database\": \"/database.db\",\n  \"root\": \"/srv\"\n}\nstartup.sh\n```\n!/bin/bash\npm2 start filebrowser\npm2 logs\n```\nnow if you want to execute some commands you can do the following:\n```\nExample Docker\nAdding user on a running container called \"filebrowser\"\ndocker exec filebrowser bash -c 'pm2 stop filebrowser && filebrowser users add john secret --perm.execute=false; pm2 start filebrowser'\nRemoving user\ndocker exec filebrowser bash -c 'pm2 stop filebrowser && filebrowser users rm john; pm2 start filebrowser'\n```. ",
    "luckman212": "I think I'm having the exact same issue with filebrowser installed as a plugin with the latest Caddy (0.11.2).  No idea how to troubleshoot this.. @hacdias not sure if your response was towards me or a previous post. I am still unable to get filebrowser to run when called via Caddy as a plugin. It just pauses for 3 seconds and then prints timeout :\n$ sudo caddy\nActivating privacy features... done.\n2019/01/29 10:36:24 timeout\nIf I comment out the filebrowser directive in ~/.caddy/Caddyfile, then it works fine and there's no timeout. My filebrowser config looks like this:\n```\n  filebrowser / ./ {\n    database            filebrowser.db\n  }\n```\nAm I doing something wrong? (update: still same problem as of Caddy 0.11.5). > i can't reproduce that in any way. Could you check if there is a filebrowser.db.lock?\n@hacdias Thanks, I'm still facing this issue, Caddy 0.11.5 now. There is no filebrowser.db.lock.. ",
    "kuuyee": "sorry. ",
    "huming2207": "Hi @hacdias , \nThanks for your reply. I've just found on my another laptop also have the same problem. It's running Windows 10 17763.253 and Google Chrome 71.0.3578.98. Then I cleared up the cache and turned off Adblock Plus, then the share button shows up.\nI guess my Adblock Plus rules are too strict, or maybe your implementation somehow triggered the Adblock Plus. \n\nRegards,\nJackson. Yea, I guess we might either document this issue and tell the user to either disable Adblock Plus for their FileBrowser sites, or disable the additional \"acceptable ads\" and \"block social media tracking\" functions. Or alternatively, we might rename the share button to \"Generate sharable download link\" though it sounds weird.... ",
    "fazo96": "hey @hacdias I am running the linux amd64 build on Arch Linux using this PKGBUILD https://aur.archlinux.org/packages/filebrowser-bin/\nI am still on Filebrowser 1.10 and I just noticed there is a new update, so I'll try that today. The problem persists on Filebrowser 1.11\nI thought maybe it was happening because the files are on an NTFS filesystem but it happens with ext4 too. ",
    "karlicoss": "Same as on @dbeniamine 's screenshot happens for me, even with noauth, the Authorisation header gets overridden by filebrowser... surely it should be left intact?. Yep, looks like it's added here unconditionally https://github.com/filebrowser/frontend/blob/b394540f535b5e9720d7948017bdefe05ef1c7dd/src/api/utils.js#L13. @hacdias thanks for a quick response!\nYep, I'm relying on basic http auth set in my nginx config. \nThing is, if I turn it off temporarily (and still use noauth in filebrowser), it just lets me through to see my file. So I guess I don't really understand what's this token for.... ",
    "liranbg": "I use nginx http as a reverse proxy to all webapps I have on my server. nginx is configured with basic auth and it seems I have the same issue that I cannot login.\nI saw in the configuration page, I can reverse proxy with different auth headers. but that doesn't work properly as well.\nI was wondering, if it is feasible to be implemented, so that instead of using 'Authorization' header I can provide a flag that overrides the name of the header so that filebrowser app can work properly behind nginx (reversed proxy) with basic auth enabled.\nWhat do you think?. ",
    "Ajef": "@hacdias: base url was empty.\nI removed the .htaccess- authorization requirement and now it works. I suspect the authorization is handed down to filebrowser somehow... strange that the download button in the top right still worked.\nAnyway this issue can be closed.. ",
    "memotype": "I am specifying it as an absolute path. The only reason I'm using ./style/... in my ADD statements is because they are relative to WORKDIR, which in this case is /. In my config.json I have files: \"/style\" which is the correct absolute path.. Maybe the problem is that I'm only adding a favicon.ico and not any of the other icons, i.e, favicon-16x16.png, etc? Sorry, I've been out of the web development game for about a decade, so I have no idea how favicons are selected by browsers. Do I need to provide versions of my logo for each image format?. Nevermind. I just derped and didn't set my admin user to have delete access.. ",
    "wcone": "@hacdias i figured out why... my machine A was running on a different time zone. After correcting the time it works seamlessly thank you.. ",
    "laleveille": "Same problem, but my machines are running on same time zone.\nCache and cookies cleared, everything is fine.. ",
    "leoleoasd": "I solved it by manually change GOOS and GOARCH in wizzard.sh and run it.. ",
    "zgqing": "i don't download the filebrowser binary file. ",
    "blingblingyoyo": "@hacdias \nYes, it happens to v2.01, I have tested it with Edge, Firefox or Chrome, they all show the same problem. \nAfter clicking on search result link, the file or directory is not opened, it refreshes and shows the root directory. To get the file or directory opened I have to click on \"refresh icon\" or \"F5 Key\"after that. \nI have also tested v1.11 (x64 or self-compiled mipsle ), it works well without such problem.. @1138-4EB \n\n. @hacdias \n\n\n. I think you should use \"go get\", not \"go build\".. ",
    "Inlustra": "@1138-4EB Has this changed recently? I added watchtower last night causing docker to update quite a few of my images and now neither --noauth or --auth.method=noauth is working anymore...\nUse \"filebrowser [command] --help\" for more information about a command.\n2019/03/18 14:33:21 unknown flag: --auth.method\nThis is my docker-compose\ndownload:\n    container_name: download\n    image: filebrowser/filebrowser\n    command: \"--auth.method=noauth --defaults.allowEdit=false --defaults.allowNew=false --defaults.allowCommands=false\"\n    volumes:\n      - ${CONFIG_DIR}/download/config.json:/etc/config.json\n      - ${CONFIG_DIR}/download/database.db:/etc/database.db\n    restart: unless-stopped. Thanks for getting back to me! \nI think for now I'll revert as I don't have too much time to setup new docker files to manage that!\nThanks again for all the work put in! . ",
    "YunYouJun": "I have the same problem, can you tell me how can I solve it?. ",
    "wasamisam0119": "@1138-4EB \nThank you for your reply.\n1. I am not using docker, it is on a remote server on Centos7\n2. I can get response from curl localhost:4000 in the same machine.\n3. I am using v2.0.2\n4. Could you please tell me how to update the config file and what it the right format?\nCheers\n. @1138-4EB \nThanks, but the problem is the page still can not accessed by public network, why it is binding on IPv6? I just can't figure out why...\nMany many thanks\nSam. @1138-4EB  doesn't really work..... ",
    "442hz": "@Casxt  maybe this is what you need: http://files.80x86.io/router/rom/opt/fb/\nI've added an \"Auto create user home dir\"  option in global settings.. @hacdias  OK,I've made some PR to this feature:\nhttps://github.com/filebrowser/filebrowser/pull/676\nhttps://github.com/filebrowser/frontend/pull/102\n. config related commands and users new support has been added.. this could be a key in filebrowser.db doest not exits. maybe the db is broken \nor you need to migratie from 1.x db to 2.x\nsimplest solution is remove the db.\n . maybe your txt file is not UTF-8 encoded.\nI've found this issue too.\nBut I do not think it is a Filebrowser problem.\n. > > maybe your txt file is not UTF-8 encoded.\n\n\nI've found this issue too.\nBut I do not think it is a Filebrowser problem.\n\nIt is an UTF-8 file.\n\nUTF-8 with BOM or not ?. maybe there is bug in func isBinary()\nhttps://github.com/filebrowser/filebrowser/blob/master/files/utils.go#L3\nif a txt file detected by this func and it return true, the txt file will not be editable.. @1138-4EB this fix (branch fix-isbinary) will not work as expected.\nbecuase text files which non-UTF-8 encoded, will also result in \"text\" format,  which makes filebrowser \nthinks this text file is editable. \nfor example.  a GBK encoded srt file:\n\nthis iconv comand can show it it a GBK file:\n\nand  http.DetectContentType() will result in a wrong  mime:\n\"text/plain; charset=utf-8\"\nLinux file command also returned a wrong type: Non-ISO extended-ASCII text\n\nThe.Secret.in.Their.Eyes.2009.BluRay.1080p.x265.10bit.MNHD-FRDS.chs.zip\n@chinanoahli you'd better attach your sample txt file to this issue, so that we can test it.. ",
    "mildred": "I was going for a list of bookmarks per user, and of course, each user could add or remove their bookmarks. Although mu use case involves global bookmarks, I don't believe that should how they should function. Bookmarks were always per-user, so I'm going for that in the implementation.\nThat being said, the per-user bookmarks are initialized from a the global configuration, but I'm not completely updated on how that global config works with the new version of filebrowser and how to change it.\n\nMoreover, I'd like to bring some additional thoughts about the frontend. I think that the sidebar takes too much space for the functionality it offers. ATM, only five buttons are shown (along with the version and a link to the help). I think that buttom My files can be removed, and use the 'home' symbol of the filebrowser logo instead. The others can be moved to the top bar. We can add separators in the top bar if that helps.\n\nI agree the sidebar takes too much space currently for what it offers, but I disagree with putting everything on the top bar without distinction. Everything there is an icon, and when items are selected in a folder view, there are many more icons and it's hard to know what they all do.\nPerhaps the multiple selection button could be completely removed and be replaced by a checkbox on each item on the folder view, a checkbox that can appear only after the first item has been selected.\nPerhaps actions that are relative to the current selection could appear visually different, on a menu opened by a blue button with \"N selected items\" label. Also, contextual actions (like download, upload, information, bookmark) should be separated from non contextual actions (switch view, multiple selection, open terminal)\nAnd I believe the sidebar is still nice for bookmarks and few other things as well, what about instead having a button to hide it when you don't want to see it?\nHere is a mockup I made for it\n\n\n![scan-browser-mockup](https://user-images.githubusercontent.com/33804/52204349-33affe00-2874-11e9-8c09-ae69b27ddab4.png)\n\n\nthe sidebar button left to the home button toggles the sidebar on and off\nthe sidebar contains only bookmarks for now\nthe toolbar is split\nthe top toolbar contains UI actions, on the left action relative to the folder view (switch view) and on the right, actions relative to the whole application (toggle terminal, and a menu button to settings and log-out)\nthe bottom bar is on the right of the breadcrumb contains slightly smaller buttons with actions relative to the current folder or the current selected item. The right part is about read-only actions, share button, ... On the left, we have a + button that opens up a menu that allows to add content (new empty file, new empty folder, upload file). Then, when a selection is made, a new menu appears with actions involving the selection (rename, copy, move, delete)\n\n\n\nI plan to keep the icons on the menus, I just did not draw them. ",
    "wozuishuai13768": "The issues are split to: #665 #666 #667, thanks for your answer and patient.. Thank you.\nI think it would be better to add something like filebrowser users update <username> --perm.create=false because users may try filebrowser users update <username> --perm.create=false and get an error.\nThat's all of it. Thank you for your patients.. ",
    "sibprogrammer": "\nDid you try executing ./wizard.sh -b from the root of this repo?\n\nYes, the same problem.\n\nOptionally, USE_DOCKER=\"true\" ./wizard.sh -b will execute everything in a docker container.\n\nIt works (there is another problem: it produces Linux binary, but I'm on Mac)\nHere is some additional information:\n\u276f go version\ngo version go1.11.5 darwin/amd64\n. > Can you run go mod vendor\nDidn't help. Seems like it just copies the content of $GOPATH/pkg/mod\nI decided to remove the whole $GOPATH/pkg directory and repeat go mod download\nIt helped (after two attempts). Seems like the problem is more about the stability of go mod and there is no reason in proposed patch (34b62f1)\nThank you for your help :). ",
    "MinGRn": "@hacdias \nThe filebrowser Just a file browser? Can't I upload files via Java or HTML client?\nI want to implement a function, which is to use File Browser as the File storage server. In addition, there is a client, such as Java, which can call the response API to upload files to the File storage server.\nMy browser documentation says this, but it doesn't say anything about it.  Will this feature be implemented later? I particularly wanted to be able to provide a responsive API for file uploads. ",
    "chinanoahli": "\n\nLike I have a file.txt in ./files, it just can be download, it can not being preview and edit.\nBut test.txt in ./files/test can being preview and edit, and of course download too.\n\nIs it ./files/test or ./files/test.txt? What's the size of both test[.txt] files? Is it the same?\n\nEmmmm, my fault, wrong typing, it should be ./files/test.txt and ./files/test/test.txt.\nThis description just for issue example. It is not truly existence.\nThose file are not the same size. But they are text files.\nI though if you can login to my server, you can try it your self.\nPlease contact me via telegram if you can.\nI can create an user for you on testing.. The files that can be edit and preview, size are 1.46KB and 1.03KB.\nLocated in ./files/\u526a\u8d34\u677f\u5bfc\u5165/\u7531iOS_Quantumult\u5bfc\u51fa.txt\nand ./files/\u526a\u8d34\u677f\u5bfc\u5165/\u7531PC_V2RayN\u5bfc\u51fa.txt\nURL is https://xxxx/files/files/%E5%89%AA%E8%B4%B4%E6%9D%BF%E5%AF%BC%E5%85%A5/%E7%94%B1iOS_Quantumult%E5%AF%BC%E5%87%BA.txt\nand https://xxxx/files/files/%E5%89%AA%E8%B4%B4%E6%9D%BF%E5%AF%BC%E5%85%A5/%E7%94%B1PC_V2RayN%E5%AF%BC%E5%87%BA.txt\nThe file can not be edit and preview, size is 1.08KB. No matter in what location, It just can not be edit and preview.\nLocated in ./files/\u5ba2\u6237\u7aef\u624b\u52a8\u8bbe\u7f6e/USA_Oregon.txt.\nURL is https://xxxx/files/files/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%89%8B%E5%8A%A8%E8%AE%BE%E7%BD%AE/USA_Oregon.txt\nAnd I am using the standalone version with nginx proxy_pass:\n```\nserver {\nlisten 443 http2 ssl;\n  listen [::]:443 http2 ssl;\nssl on;\nssl_certificate fullchain.pem;\n  ssl_certificate_key privkey.pem;\nssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;\n  ssl_ecdh_curve X25519:P-256:P-384:P-224:P-521;\n  ssl_ciphers 'EECDH+AESGCM:balabala';\n  ssl_prefer_server_ciphers on;\n# filebrowser location\n  location / {\n    proxy_redirect off;\n    proxy_pass http://127.0.0.1:8080;\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"upgrade\";\n    proxy_set_header Host $http_host;\n  }\n}\n```. > Is any error shown in either the log of the backend or the console of the browser (frontend)?\nBoth not.. > maybe your txt file is not UTF-8 encoded.\n\nI've found this issue too.\nBut I do not think it is a Filebrowser problem.\n\nIt is an UTF-8 file.. > > > maybe your txt file is not UTF-8 encoded.\n\n\n\nI've found this issue too.\nBut I do not think it is a Filebrowser problem.\n\nIt is an UTF-8 file.\n\nUTF-8 with BOM or not ?\n\nI runed hexdump and file for those file that has problem:\n$ hexdump -n 3 -C file.txt\nhexdump -n 3 -C file.txt\n00000000  e7 a6 81                                          |...|\n00000003\n$ file file.txt\nfile.txt: UTF-8 Unicode text\nIt seems they are not a UTF-8 file with BOM.\nI even tried to using Filebrowser create the file and copy the content in to the file and save it. After that reopen it in Filebrowser. It just not working.\nThe content contain sensitive data, I can not post it here.. > maybe there is bug in func isBinary()\n\nhttps://github.com/filebrowser/filebrowser/blob/master/files/utils.go#L3\nif a txt file detected by this func and it return true, the txt file will not be editable.\n\nEmmm, I see, Is there something I can do to avoid this issue. Like add some character before the file?. > @442hz thanks a lot for the finding. That's a very good hint, indeed. It seems a naive implementation that we can probably improve.\n\n@chinanoahli have you ever tried building filebrowser yourself instead of using the released bineries? If so, you can just replace utils.go#L4-L11 with return false. That would let us confirm that issue is with that function.\nAlternatively, you can scan the offending file and check if any of the char has a decimal value of 65533 or <= 8. If found, try removing just those chars from the file and opening it with filebrowser.\n\nI will try this this later. I have to having a long trip tomorrow. I will report the result ASAP.. ",
    "dylanlogann": "@1138-4EB @hacdias \nYeah I have just tested this and a quick CTRL+F5 done the job.\nSorry for any inconveniences.\nThanks.. ",
    "minos197": "I have been investigating this issue since I reported it and it appears to be quite hard to pinpoint the cause.\nSo far I have three theories.\n I have somehow messed up with the filebrowser database(each time I remove and recreate a user it's unique key increases,\n The fault is on the client side. Something is cached and there is a token miss-match.\n* There is some horrible DNS loop going on.\nThe device is  set as as an access point on WLAN0 which is why the address was set to 11.1.1.1. Normally it should not be connected to any network but for debugging purposes I connect the ethernet cable.\nDuring investigations:\n The filebrowser had a single user account\n Credentials were cached in browser so I do not manual type the password\n Testing happened in safe mode with cleaning the cache/cookies per retry\n Tried the log-in in both android device as well as a laptop and two browsers on each device.\n Tried different network back-ends, from home router (set for windows) , pfsense machine on a LInux network, as well as ddwrt in my home lab.\n Dig was used to verify the dns are resolved properly\ndnsmasq.conf contained\n~~~~~\ninterface=wlan0      # Use the require wireless interface - usually wlan0\n  address=/#/11.1.1.1\n  dhcp-range=11.1.1.1,11.1.1.11,255.255.255.0,1h\n~~~~~\nIt is specifically instructed only to work on the WiFI interface so ETH0 is on default behavior.\nThen since I realized that the issue was more common when using Windows laptops, I added those windows specific configurations to dnsmasq.conf\n~~~~~\n dhcp-option=19,0           # option ip-forwarding off\n  dhcp-option=44,0.0.0.0     # set netbios-over-TCP/IP nameserver(s) aka WINS server(s)\n  dhcp-option=45,0.0.0.0     # netbios datagram distribution server\n  dhcp-option=46,8             # netbios node type\n~~~~~\nWhich appeared to fix the log-in issue for a couple of days before it returned today.\nWhat database type is the filebrowser.db file? I would like to take a peek at the schema and see if there is something out of the ordinary.\nAlso in the case that there is a dns resolution race condition, what would happen if when the form loads the dns resolves to an ip iAA.AA.AA.AA and while the use fills in the username/password the domain is updated to  BB.BB.BB.BB.  When the submit button is pressed, does the code act like a normal html form and re-resolve the domain? Or the application domain-> ip picked up on startup and used throughout the application lifecycle?\nAt any rate, it is a unique use case, and you should not waste resources for it especially since its hard to reproduce. You may close the ticket. I will continue to investigate out of curiosity.\n. ",
    "maxlaverse": "Hi @dbeniamine !\nI had the same issue and tried several things. Sadly, it works now and I'm not sure which of my changes fixed it. \nSome additional information to your issue  maybe. I noticed that Firefox 65 was trying to set a cookie named auth with html content inside it which sounded weird. \nCookie: auth=<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content=\"IE=edge\"><meta name=viewport content=\"width=device-width,initial-scale=1,user-scalable=no\"><title>File Browser</title><link rel=icon type=image/png sizes=32x32 href=\"/static/img/icons/favicon-32x32.png\"><link rel=icon type=image/png sizes=16x16 href=\"/static/img/icons/favicon-16x16.png\"><link rel=manifest href=\"/static/manifest.json\"><meta name=theme-color content=#2979ff><meta name=apple-mobile-web-app-capable content=yes><meta name=apple-mobile-web-app-status-bar-style content=black><meta name=apple-mobile-web-app-title content=assets><link rel=apple-touch-icon href=\"/static/img/icons/apple-touch-icon-152x152.png\"><meta name=msapplication-TileImage content=\"/static/img/icons/msapplication-icon-144x144.png\"><meta name=msapplication-TileColor content=#2979ff><script>window.FileBrowser = JSON.parse(`{\nAlso, I could see in the access logs that this sw.js url was being called and answered with a 200. The frontend was working fine on Safari and there it wasn't trying to get this sw.js file.\nI compiled the project from the master branch, changed my reverse-proxy to set the Host header properly and finally removed all my cookies. I strongly suspect that clearing the cookies is what actually solved the problem. Might be worth giving it a try.\n. Hi @shyal !\nI have to disagree and I hope you won't mind me telling you this, but I don't find your issue very helpful. It sounds as if you just wanted to let the world know about your frustration.\nI have only been using filebrowser for a year or two. My opinion is completely different from yours. In comparison to other software, I find this project quite easy to set up (as most of the Go-based ones): download the binary, write a config file, a systemd unit and you're basically done.\nIf you want to contribute to this project and give it a chance to reach your expectations, I highly recommend you to write proper issues for each of the points you mentioned, with your point of view of the current situation, the problems you are facing and eventually suggestions on how to improve it. I'm sure you're also very welcomed by the maintainer of the project to open pull-requests and propose changes.\nEdit: And your title sounds very dramatic too. I'm sure you came across that issue before opening yours: https://github.com/filebrowser/filebrowser/issues/532\n. ",
    "bequt": ".....emmm  why. Close selinux, and it work. "
}