{
    "sj26": "Hey Michael,\n\nThat's just what I was planning! I've cherry-picked your changes a little to keep the bundle config out of the gem.\n\nThanks!\n. That's cool, I had meant to pop one in -- have done so now. Thanks!\n. Thanks for your interest!\n\nIt sounds like whatever you're using to send mail is doing some funky things with the protocol. You should only be sending a single \"MAIL\" command which includes the from address, then you can send as many \"RCPT TO\" commands as you like to add multiple unique senders. MailCatcher should handle that fine. Maybe check out the [SMTP RFC](http://tools.ietf.org/html/rfc2821) for details.\n. Glad you've found a solution.\n\nI don't want to build a workaround into MailCatcher for broken clients, perhaps you can patch SwiftMailer? In the meantime you know how to get it working. :-)\n. @pjb3 you can certainly send multiple MAIL commands, but it [should reset the state of the SMTP exchange](http://tools.ietf.org/html/rfc2821#section-4.1.1.2). The SwiftMailer client was sending multiple MAIL commands for a single message.\n\nYour issue is slightly different\u2014you should indeed be able to send multiple messages sequentially over the same connection. MailCatcher is set up to do so, the problem is in eventmachine. A repeat MAIL command should reset the state instead of the [current error-out behaviour](https://github.com/eventmachine/eventmachine/blob/v0.12.10/lib/em/protocols/smtpserver.rb#L354). They haven't fixed it [in master](https://github.com/eventmachine/eventmachine/blob/master/lib/em/protocols/smtpserver.rb#L447) either. Send a pull request! Should be simple to slice the state array and send a receive_reset, which should have the same semantic value.\n. Ah, it looks like daemonizing is a bit broken on Windows under Ruby 1.8.7.\n\nPlease run `mailcatcher --foreground` for now until I can release a workaround. :-)\n. @kimptoc, yeah looks like 1.8.7 has slightly different precedence rules and had a problem with the windows fix.\n\nI've tested on all the rubies I have now and it seems fine. 0.4.2! -.-\n. Thanks for the pull request but these things have already been resolved on master and in the latest MailCatcher gem. Please grab the latest gem or pull master on your git repo if you're still encountering issues on your end. Let me know if there are still problems!\n. Merged in 55790a91a41eb3db316217717364def1dc56bf05, thanks!\n. Could you please confirm this? It works fine for me in Chrome 12.0.742.112.\n. What about adding an accurate last-modified? This was always my intention.\n\nOn 11/06/2011, at 4:18 AM, pnc wrote:\n\n> Add HTML5 shim script so the app renders in IE8.\n> \n> Set an expires header for non-Websocket requests. This prevents IE8 from only loading the message JSON the first time the page loads and getting a 304 Not Modified thereafter.\n> \n> ## \n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/sj26/mailcatcher/pull/10\n. Closing due to inactivity. Will integrate new HTML5 shim at some point.\n. Okay, I've merged in something similar which also copes with (improbably) blank sender and recipient fields also. Thanks!\n\nAlso added guard gems in Gemfile and modified Guardfile to use compass instead of sass so stylesheets are regenerated properly. Apologies, the public development process was a bit crufty. :-/\n. Hmm? Where does it asplode? I don't directly require growl anywhere... if it asplodes for you it's a guard bug, or you need to bundle!\n. I was just about to suggest `--help`. :-)\n. Can you run the second command in Terminal? Do you have [growlnotify](http://growl.info/extras.php) installed? (It's normally inside the Growl installation DMG, just not installed by default.)\n\nYou shouldn't need to explicitly turn on Growl. If you are on OS X and have growlnotify installed, MailCatcher will detect it. The switch is there mainly as a guide and gives instructions on how to get it working.\n. Awesome! MailCatcher primarily deals with SMTP, so we're not listing the \"To\" field, but rather the recipients which includes CC and BCC addresses. Perhaps the message view should actually display the \"To\" and \"Cc\" fields? You won't be able to display BCC because these aren't listed in the message itself and will only be present as recipients on the SMTP side of things. Or maybe you can extrapolate who's BCC'd by doing a set exclusion?\n. Closing this; To/Cc/Bcc is actually irrelevant, recipients (\"To\" in the web interface) is a list of all recipients targeted via SMTP.\n. It lists all recipients that the application is sending to via SMTP. Keep in mind the SMTP server doesn't know the difference\u2014they are all just recipients. Perhaps I should rename the \"To\" field to \"Recipients\" and add a note or something.\n\nYour application or the library you're using to send SMTP messages should be turning your \"To\", \"Cc\" and \"Bcc\" fields into a list of recipients that are all addressed via SMTP.\n\ntl;dr: yes.\n. As above, cc and bcc fields are displayed when you view an email. This is already implemented.\n. BCC addresses should never appear in an email's message source, they are _Blind_ Carbon Copy addresses so you don't want to reveal them in the message.\r\n\r\nTo, CC, and BCC addresses do currently appear in the \"To\" recipients list in the MailCatcher interface. Although MailCatcher doesn't look in your message to find these, this is the list of addresses that your SMTP client has asked the message be delivered to. The \"To\" list is exactly the email addresses that your message will be delivered to.. Nice, thanks!\n. Yeah, I usually take those as read but should probably indeed be listed as gem deps. Thanks!\n. Nice one, cheers!\n. MailCatcher is not designed to be used inside rails but rather alongside. Use `gem install mailcatcher` and run with `mailcatcher`, do not include mailcatcher in your rails project's `Gemfile`.\n. Thanks Gregor, missed that one. I've been living in 1.9 land recently. :-)\n. Doable! Patches are very welcome. Otherwise I'll take a look when I get the chance.\n. Thanks!\n. Thanks! This is exactly what I was after. Fiddled with it a bit, will be in 0.5.5.\n. Thanks to #26 we can now display the fractal analysis in pretty HTML, so no need to pretty-print machine formats.\n. Great idea, I'll do so when I can. Pull requests are also welcome!\n. Offset change merged, made sure only valid dates are adjusted.\n\nThanks!\n. Perhaps the delivery methods are being stubbed out or you are using some test helpers preventing actual delivery of mail? Keep in mind that MailCatcher is just an SMTP server so as long as mail delivery is configured properly in your application it should work.\n\nWe use mailcatcher from rspec tests all the time and it works great. :-)\n. Thanks!\n. I'm not bumping the dependency until 1.0 is released, but I'll leave this issue open until this happens.\n\nFeel free to grab the source, test and post resutls! I don't use Windows.\n. No worries. :-)\n. Unfortunate that EventMachine hasn't released a stable release since 2009. :-(\n\nMaybe I should just bump the requirement...\n. Can you please check you're running the very latest versions of mail catcher and eventmachine? This shoul have been fixed by a couple of patches and their reaching 1.0.\n. I'm using [box-sizing](https://github.com/sj26/mailcatcher/blob/master/public/stylesheets/application.sass#L239) to size the iframe because traditional methods are not fun. Doesn't look like compass thinks opera supports this, I'll have a play when I get a chance to see if it does these days.\n\nI'm also happy to accept cross-browser patches.\n. Hi there!\n\nApart from the websocket hole, I'm not keen on adding authentication support explicitly to the project. I'd like to keep the application itself simple, and it's intended to be run by a developer on a single machine.\n\nI'd suggest firewalling and proxying the application (with something websocket enabled like Pound) if you have such a requirement.\n\nAn alternative would be to customise the MailCatcher startup script a little and insert your own authentication middleware into the stack, pretty sure Rack provides some standard some-such which should work.\n. Yeah, Debian's ruby scene is pretty broken. Check out http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/.\n. Ruby is an interesting thing on Ubuntu/Debian. You're probably better off installing some sort of ruby from scratch instead of using the apt versions. `gem install mailcatcher` should have covered everything.\n. Good catch! Will roll this into the next update.\n\nThat link's not working any more, but I found [the which_s function](https://github.com/mxcl/homebrew/blob/0dd5ad5360522e8fed294fc35b9364f4cce89546/Library/Homebrew/utils.rb#L151) which seems to be what you describe.\n. I like this idea!\n. Sorry yes, closed.\n. This sounds like a great addition! I'll take a look tonight.\n. Sorry I didn't get around to this yet. I think it underlies some things I wanted to investigate for notifications in general. Mountain Lion's UserNotificationCenter should be supported, and Growl support should be more comprehensive with clickbacks. Doing something on Windows would be cool, also. This is getting high on my TODO list, will keep you posted.\n. Possible that Firefox's websockets have become incompatible, I'll look into it.\n. Sorry this took a while, finally got a chance to check it out. Fixed in 0.5.7.2.\n. Hmm, I disagree about the difficulty of opening the URL\u2014especially with iTerm (try a command+click)\u2014but I like the idea in general. I don't like the inclusion of launchy, that has become very unwieldy where a simple `open`/`start /b` works fine. Let me see what I can do.\n. This looks awesome!\n. Sorry, this one slipped my mind! Will merge.\n. Please don't include mailcatcher in your Gemfile, it is a standalone application with it's own dependency set.\n\nThese changes would break forwards compatibility.\n\nMailcatcher should be installed as a separate gem (`gem install mailcatcher`) which is simply run as `mailcatcher`.\n\nGlad you're enjoying it, though! :-)\n. I don't understand why you'd use MailCatcher for automated testing? ActionMailer will store your deliveries locally in testing anyway in a way that makes it easy to run assertions.\n\nCheck the rails guide: http://guides.rubyonrails.org/action_mailer_basics.html#mailer-testing\n\nIf you have a more complex scenario I'd love to know how and why you're using MailCatcher, maybe we can make it easier!\n. You can assert the correctness of css selectors the same as you would asset the html structure and applied css of your normal page views, if that's what you actually want to test. Take a look at [email_spec](https://github.com/bmabey/email-spec) for instance which adds some more comprehensive introspection abilities for email bodies.\n\nIf you want to test the look and feel of your application I suspect you're trying to QA and you might like to consider something like [mail_view](https://github.com/37signals/mail_view) which lets you render each email without having to trigger it's generation and sending. You still need someone looking at the rendered emails and checking off a list.\n. If you want to use MailCatcher as the tool to enable this workflow please feel free, but in the same way you wouldn't put apache, nginx, passenger, pow, mysql, postgresql, etc in your Gemfile, you shouldn't put mailcatcher in there either.\n. Haha, yeah I'd rock that Gemfile hard.\n\nmail_view is probably better for a devsignment workflow.\n. Please don't include mailcatcher in your Gemfile, it is a standalone application with it's own dependency set.\n\nMailcatcher should be installed as a separate gem (`gem install mailcatcher`) which is simply run as `mailcatcher`.\n. I don't really want to tie into Rails at all, there are projects like `mail_view` for that... but I will definitely add something to the README. Thanks!\n. I don't think this is the responsibility of a process. Your process management tools should be able to monitor a started process' ID. I run mailcatcher using `launchd` on Mac OS X and using `upstart` on Ubuntu, both of which are capable of tracking (and maintaining, and stopping) a process in this manner.\n\nIf you don't want mailcatcher to go into the background use `--foreground`.\n\nIf you absolutely want to background the process and keep the pid, consider using something like [`start-stop-daemon`](http://man.he.net/man8/start-stop-daemon) to write out a pid file.\n. @pylebecq the initial line you posted should be sufficient, as long as your ruby environment is set up correctly. I suspect it will be an issue with how your ruby is installed and where you mailcatcher gem is installed. Could you open a new issue with full information with your ruby setup, where the gem is installed, and your full upstart config?\n. Quite right, I always forget how nerfed popen and friends were on 1.8.7. I'll update it to use open3 instead and re-release.\n. Fixed in [v0.5.7.1](https://rubygems.org/gems/mailcatcher/versions/0.5.7.1).\n. I'm having trouble replicating this issue. This is working fine on my machine:\n\n``` sh\n$ irb -r mail_catcher\nirb> MailCatcher::Mail.add_message <your gisted message hash>\n=> nil\nirb> MailCatcher::Mail.messages\n=> [{\"id\"=>1, \"sender\"=>\"...\", \"recipients\"=>[\"...\"], \"subject\"=>\"...\", \"size\"=>\"...\", \"created_at\"=>...}]\n```\n\nWhat version of ruby and sqlite3 are you using? Perhaps it's something in there. The exception is unforunately not very descriptive, and googling reveals it's fairly generic, but usually it means the database is missing. Considering this is an in-memory database it should never be missing. :-/\n\nOn my machine:\n\n``` sh\n$ ruby -v\nruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.3.0]\n```\n\n``` sh\n$ sqlite3 --version\n3.7.10 2012-01-16 13:28:40 ebd01a8deffb5024a5d7494eef800d2366d97204\n```\n. Mailcatcher is not multithreaded, there is a single reactor thread in EventMachine (afaict).\n\nIf you can provide a script replicating the issue I'll happily reopen and investigate.\n. Hi! Could you please confirm the version of mailcatcher you're running? The latest version is 0.5.7.2:\n\n``` console\n$ mailcatcher --version\nmailcatcher 0.5.7.2\n```\n. Ugh, _again_? I'll take a look. :-(\n. Looks like WebKit got stricter about websocket client protocols. Fixed in 0.5.8.\n. This is the sort of thing I expect `EventMachine::Protocols::SmtpServer` to take care of, but apparently it doesn't. Fixed in 20cf6e98f1362be06db9b3d83e758ca3af5df8a2, but I'm going to sit on the next version for a little while, but will be fixed for 0.5.9.\n. Mailcatcher binds to the local interface because the default use case is a developer running it on their local machine to test against and they only need local access. Binding to all interfaces could be a security issue for the default use case. Anybody with HTTP access to mailcatcher can clear all mail or quit. Mailcatcher also isn't hardened so running a public service by default could also expose potential attack vectors.\n\nThere is, however, an option to change the bind IP for just such cases as running a staging box:\n\n```\nmailcatcher --http-ip=0.0.0.0\n```\n\nThanks. :-)\n. Ah, that's weird. Looks like I accidentally removed it from the gem's manifest. Fixed in 5f05ea0d5d813e25c04f42f57e19e581dbb81df6.\n. Great idea, not sure how comfortable I am with the gmail integration. I'd be more inclined to just act like a first-class SMTP server, however that raises problems via ISPs. Also want the deliveree's address to be changeable in the web interface.\n. They finally released 1.0! Awesome, I've bumped requirements in skinny v0.2.2 and mailcatcher v0.5.9.\n. Ah, yes... more complex resolution would realise that skinny 0.2.2 is available and sates eventmachine ~> 1.0.0, but perhaps I'm assuming rubygems is smarter than it really is. Bundler certainly had no trouble, but it tends to be more considerate.\n\nI'll add a proper spermy requirement.\n. These dependencies have been tightened in 0.5.10 and shouldn't be a problem. Thanks, and let me know how you go!\n. This should be fixed by the referenced commit. Let me know if it's still breaking!\n. Hey guys, sorry about this, I haven't had a chance to look at it and have been [super busy](https://twitter.com/sj26/status/249383976572174336), but I'll take a look tonight. Looks like something subtle inside EventMachine has changed and broken the WebSocket support.\n. Okay, so I finally got to look at this. It's introduced by [this commit](https://github.com/eventmachine/eventmachine/commit/6d1cdc534fe36317b4dad766ae6122308be489cd) in eventmachine. I've added a workaround in skinny and the new versions should be out now. `gem install mailcatcher -v 0.5.10`\n. Hi! Looks like you've found something kinda gnarly. Can you attach the actual message? Or email it to me if it's sensitive. I need the full message with all parts including headers. <3\n. Without the message I can't investigate this issue, closing.\n. I'd like some specs as well, but given some major changes in the wings there doesn't seem to be much point specing at this point.\n\nWould merge with some acceptance specs for now, they should remain roughly the same.\n. I've taken some tentative steps toward including specs. There are a couple of minispec scenarios which do basic acceptance testing, I'll add more and get it running on Travis soon.\n. The dependencies have been tightened in 0.5.10, please try that. `gem install mailcatcher -v 0.5.10`\n. Could you elaborate on the problems you've been having?\n. Awesome!\n. I kinda have a rewrite in the wings that I was planning to implement this with... I do like the approach but stay tuned.\n. This is a bug introduced by the latest version of eventmachine, and was fixed in the latest version of mailcatcher. :-)\n. Thanks!\n. This is what `catchmail` is for.\n\nTry `bundle exec bin/catchmail examples/multipartmail`\n\nOr, for multiple messages try a shell loop. :-)\n. Nice!\n. Slid by me, but will merge now.\n. Would you be able to provide updated instructions? I no longer use rvm.\n. I've updated the guidelines in 327cd355 after installing RVM on a VM and playing a bit.\n. You don't need to run it with bundler. You've also installed it into an RVM gemset, so you must run it inside that gemset.\n\nTry using rvm-exec:\n\n``` sh\n/var/lib/jenkins/.rvm/bin/rvm-exec @mailcatcher mailcatcher\n```\n\nOr you could create a wrapper per the [README instructions](https://github.com/sj26/mailcatcher#rvm):\n\n``` console\n$ rvm default@mailcatcher --create gem install mailcatcher\n$ rvm wrapper default@mailcatcher --no-prefix mailcatcher catchmail\n```\n\nand use:\n\n``` sh\n/var/lib/jenkins/.rvm/bin/mailcatcher\n```\n\nIf you're running with process management (i.e. supervisord) you'll either have to make sure it follows the daemonization, or pass `--foreground` to mailcatcher.\n. It sounds like an ill-formed message, could you please attach the full source of the message? Feel free to anonymise it a bit if you like, or email it to me directly (as an attachment): sj26@sj26.com\n\nSounds like you might've found a bug in the mail gem. ;-)\n. Hey guys, sorry I've been a bit flat out, I'll take a look tonight and get back to you, but yeah it looks to me like an upstream problem, probably in the mail gem's parsing code.\n. I actually can't replicate this with the example email you supplied.\n\nWhat version of the mail gem are you both using when able to replicate the issue? That might be a clue.\n. Keep in mind mailcatcher runs as a ruby gem, outside of bundler, so it'll use whatever the latest compatible version of the mail gem you have installed is. Perhaps your devs have differing versions of mail? Try updating mail and see what happens.\n. OH okay. Your email doesn't have a Message-ID or part Content-IDs which are required in RFC 2822. Normally the mail gem just generates one for any parts without one, but for some reason it seems to be skipping in your case. How are you constructing this email? Whatever is generating it should be providing a content id.\n\nI think this breaks because mailcatcher use content ids (or CIDs) to load the different parts inside a multipart html and text email. I still can't replicate the failure on my machine. I initially had trouble replicating this because I used the mailcatcher's `catchmail` script which wraps the outgoing email in the mail gem before sending it off which adds content-ids and such required things before it hits mailcatcher:\n\n``` email\nDate: Mon, 07 Jan 2013 21:45:08 -0500\nFrom: General Assembly <course-from@example.com>\nTo: auz1@example.com\nMessage-ID: <50ebb207e14b6_453b3fe1c045c66c366e9@Bumblebee.local.mail>\nSubject: Confirmation for Front End Web Development\nMime-Version: 1.0\nContent-Type: multipart/alternative;\n boundary=\"--==_mimepart_50eb88343c171_57413ffbe1c35ad890373\";\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\n\n\n----==_mimepart_50eb88343c171_57413ffbe1c35ad890373\nDate: Mon, 07 Jan 2013 21:45:08 -0500\nMime-Version: 1.0\nContent-Type: text/plain;\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\nContent-ID: <50ebb207e050e_453b3fe1c045c66c36475@Bumblebee.local.mail>\n\nDear Auz Foo,\n\n...\n```\n\n(see `Content-ID: <50ebb207e050e_453b3fe1c045c66c36475@Bumblebee.local.mail>`)\n\nI've been explicitly writing out an SMTP session with the literal email you've posted, but still no failure.\n\nTry adding `Content-ID` to your source email and see if that fixes the error on your end. If it does, try to track down inside the mail gem why it's not populating content_id on the Part, which part it actually is in the message, etc. Even better, make a failing test case against the mail gem!\n. @thicksoup that's a different issue which I've never seen before. Could you please send me the MailCatcher log output and the full message source you are trying to send?\n. @thicksoup be careful, too, because \"Cannot receive from specified address <...>: Unauthenticated senders not allowed\" is not a message that I can see anywhere in eventmachine's SMTP handling, so you may not even be sending through mailcatcher.\n. @mmrobins without a repeatable trigger we can't really diagnose this. If you come up with a way to repeatedly trigger the error please let me know, but for now I'll close the issue.\n. @amree can you post an example which triggers the error please? Preferably the full source of an email body sent to mailcatcher, and any logs you get from mailcatcher in response.\n. @amree your [config/environments/development.rb](https://github.com/amree/bertukar/blob/master/config/environments/development.rb) does not appear to have the mail catcher config as you describe. If you added it then tried sending mail then you may have forgotten to restart rails. That you are seeing the message text in the rails logs means something in your application is misconfigured.\n. @ekurennyy check the various logs involved\u2014both client and server side.\n. @dounan that sounds like a [mail gem](https://github.com/mikel/mail) bug! It should be aware of the content encoding of the message and use compatible content-id. Maybe you could add an issue?. This is a rails configuration issues really, not a mailcatcher issue, but I'll try to help!\n\nMake sure you've got all of these in `config/environments/test.rb`:\n\n``` ruby\nconfig.action_mailer.perform_delivery = true\nconfig.action_mailer.delivery_method = :smtp\nconfig.action_mailer.smtp_settings = { :address => \"localhost\", :port => 1025 }\n```\n\nAdditionally, check inside your scenarios that mail is actually being sent. If it's not going to mailcatcher it should be going somewhere else, or being logged, or throwing an exception, etc.\n. Then something in your cucumber environment is overriding your mail settings.\n\nIs your cucumber definitely setup to use the \"test\" environment, or is it using the \"cucumber\" environment?\n. No, that's the port capybara uses to serve your web application to the browser.\n\nHonestly it's an environment issue which I can't debug for you without access to your codebase, and is not due to mailcatcher. If you'd like to contact me to have a look at your codebase I'd be happy to, but I'll close this issue.\n. That will not work\u2014websockets will break.\n. You can now [proxy websockets with nginx](http://nginx.org/en/docs/http/websocket.html). Here's a complete example configuration file:\n\nhttps://gist.github.com/sj26/9885403\n. This was fixed in an updated version of mailcatcher. Update and you should be fine.\n. @stefanahman that's a very old version of mailcatcher, please upgrade\n. Just run on different ports and you should be safe.\n\nOn 16/01/2013, at 7:01 PM, attiks notifications@github.com wrote:\n\n> I had a quick look at the code, but I'm not really a Ruby man so I might be wrong, but it looks like it isn't possible to run multiple instances (unless I duplicate the directory). I would be nice if I could specify an instance id on the command line so I could run multiple instances side by side\n> \n> mailcatcher --instance site1 --smtp-ip 127.0.0.1 --smtp-port 1025 --http-ip 0.0.0.0 --http-port 8025\n> mailcatcher --instance site2 --smtp-ip 127.0.0.1 --smtp-port 1025 --http-ip 0.0.0.0 --http-port 8025\n> I'll try to create a PR if this is something that might be added.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. Great point.\n. I'm unable to replicate this on ruby 1.9.3-p374 with foreman 0.61.0 and mailcatcher 0.5.10.\n\nWhat versions of ruby, foreman and mailcatcher are you using? Have you tried editing the mailcatcher gem to add `$stdout.sync = $stderr.sync = true` to confirm this is a solution to your problem?\n. Closed by #121.\n. I have no idea whether haml 12 will be supported, or activesupport 5, or mail 7.\n\nWere I to update mailcatcher to support the newer gems you'd like here, backwards compatibility might be broken, and we'd get issues from others in the same vein complaining that it was working fine with their versions of haml, activesupport, etc. but now they can't get newer versions.\n\nAs always, mailcatcher is an independent gem with its own requirements and you should be doing `gem install mailcatcher` and `mailcatcher` on the command line, or using tools like brew-gem. If you're using it in a project with a team, great, but I'd recommend putting it in the README, not the Gemfile.\n. Sorry, would you mind clarifying this issue?\n. I'm sorry but that's far outside the scope of mailcatcher.\n. Please don't include mailcatcher in your Gemfile, it is a standalone application with it's own dependency set. Mailcatcher should be installed as a separate gem (`gem install mailcatcher`) which is simply run as `mailcatcher`.\n\nTo document a dependency I suggest adding it to your README. :-)\n. I've relaxed the HAML requirement in 6605fc26. The put-it-in-the-Gemfile approach is widespread, so I'll adapt things as requested. Sorry for the trouble.\n. You shouldn't be loading mailcatcher with rails. [Please don't put it in your Gemfile.](http://mailcatcher.me/#bundler)\n\nI probably will upgrade the dependencies at some point when activesupport 4 is released with rails, though not to a prerelease.\n. I've isolated the dependency update in 6605fc26.\n. Nice catch, sorry it took a while for me to notice.\n. Well it needs to run inside EventMachine, and it needs websocket support. What in thin stops it running under jruby?\n. Closing this. We probably won't support jruby explicitly if thin doesn't work. The magic of mailcatcher is that it's a single process doing everything which requires eventmachine, and the easiest way to do web in eventmachine is thin.\n. http://mailcatcher.me/#bundler\n. Foreman is another utility that doesn't really belong in your Gemfile, or at least shouldn't be launched with a bundler binstub. Any ruby subprocess is susceptible to this problem, including things like `hub` and `gh`. Vagrant have had such issues with this that they no longer distribute as a rubygem but as a system installable package.\n\nYou have two options:\n1. Ask bundler to clean the environment before running mailcatcher:\n   \n   ```\n   web: thin ...  \n   mailcatcher: ruby -rbundler/setup -e \"Bundler.clean_exec('mailcatcher', '--foreground')\"  \n   ```\n   \n   (Example in gist: https://gist.github.com/sj26/8f638252ab64b1d0ecbb)\n2. `gem install foreman` and just `foreman` instead of `bundle exec foreman` and `bundle exec ...` or use bundle binstubs (`bin/...`) in your Procfile entries.\n. The point is: MailCatcher is a separate application or system utility, like Postgres or MySQL, not a library like haml or rails.\n. Thanks @rocknruby, I've corrected the typo of `Bundler`. I think the argument was being missed because I had wrapped them in an array, `clean_exec` seems to function like `Kernel#spawn` and wants a splat of args instead, also corrected.\n\nPassing arguments as an list is usually safer and cuts out parsing and subshells. ;-)\n. Do you get HTML when you `curl http://localhost:1080`\u00a0on the vagrant vm?\n\nIf it's a port forwarding issue I have no idea, sorry\u2014I don't use vagrant. Are you absolutely sure your port forwarding is correct, and in the correct direction?\n\nOn Wed, May 1, 2013 at 9:09 AM, Amin Meyghani notifications@github.com\nwrote:\n\n> I have installed the Mailcatcher gem (http://mailcatcher.me/) on my VM managed by Vagrant. And in the Vagrantfile I have set up the forwarding port:\n>     config.vm.forward_port 1080, 1080\n> I ssh to the guest, run the Mailcatcher on the guest, but when I go to: 127.0.0.1:1080 on my host, I don't see the Mailcather interface. All I get is:\n>     No data received.Unable to load the webpage because the server sent no data ...\n> Any ideas?\n> \n> ## Thanks in advance!\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/sj26/mailcatcher/issues/89\n. You could try running mailcatcher using:\n\n``` sh\n$ mailcatcher --ip=0.0.0.0\n```\n\nThis means you can access mailcatcher on your VM host using your VM's ip and port 1080, no vagrant forwarding required.\n. @joeyfrich there is [definitely an ip option](https://github.com/sj26/mailcatcher/blob/eff638f9205fe67359dc23e98e801d90f43beb9a/lib/mail_catcher.rb#L71-L73) so you may be using an old version. Try `gem install mailcatcher` to upgrade.\n. Thanks for the very thorough issue report! I have added a patch to remove mailcatcher's sensitivity to leading periods. I'd swear that EventMachine didn't do this for us at some point, but I couldn't be bothered tracing back into their subversion history.\n\nThanks again, this will be in the next release.\n. Mailcatcher runs on localhost by default. Try using `mailcatcher --ip=0.0.0.0`\n. Looks great, thanks!\n. `mailcacther` will log, so if you want to watch it run with `--foreground`.\n\n`catchmail` is actually what is generating your error, much like sendmail or your LTA would do when running PHP on the server. [RFC 2822 section 3.6.2](http://tools.ietf.org/html/rfc2822#section-3.6.2) requires a From header.\n. Note that the [PHP documentation](http://php.net/manual/en/function.mail.php) also says:\n\n> Note:\n> \n> When sending mail, the mail must contain a From header. This can be set with the additional_headers parameter, or a default can be set in php.ini.\n> \n> Failing to do this will result in an error message similar to Warning: mail(): \"sendmail_from\" not set in php.ini or custom \"From:\" header missing. The From header sets also Return-Path under Windows.\n. Yeah, sendmail on *nix will use the current user and host to generate a From for you, although this is far from correct.\n\nActually, more correct would be adding the `-f` option to catchmail. I've updated the documentation in that direction.\n. Are you including it in your Gemfile? [You shouldn't be](http://mailcatcher.me/#bundler).\n. Great idea!\n\nI think it might be better to simply decorate the plain text view with links, perhaps in javascript land. There's no real detriment. If people want a plaintext copy they can just \"Paste as Plaintext\" or whatever.\n. Great, thanks!\n. No worries, thanks. :smile:\n. Please edit the coffeescript source, not the raw javascript.\n. Sorry, but I don't see any difference in iPad functionality with these changes. Existing MailCatcher seems to work fine.\n. This should have been fixed by 44262f9.\n. I can't replicate this\u2014if you're still having this issue please re-open the issue with some example emails causing the problem.\n. I can't replicate this, the API seems to function as expected for me:\n\n``` sh\n$ bundle exec mailcatcher\n$ curl http://localhost:1080/messages\n[]\n$ bundle exec catchmail examples/multipartmail\n$ curl http://localhost:1080/messages\n[{\"id\":1,\"sender\":\"<me@sj26.com>\",\"recipients\":[\"<blah@blah.com>\"],\"subject\":\"Test Multipart Mail\",\"size\":\"631\",\"created_at\":\"2014-03-31T04:44:07+00:00\"}]\n$ bundle exec catchmail examples/multipartmail\n$ curl http://localhost:1080/messages\n[{\"id\":1,\"sender\":\"<me@sj26.com>\",\"recipients\":[\"<blah@blah.com>\"],\"subject\":\"Test Multipart Mail\",\"size\":\"631\",\"created_at\":\"2014-03-31T04:44:07+00:00\"},{\"id\":2,\"sender\":\"<me@sj26.com>\",\"recipients\":[\"<blah@blah.com>\"],\"subject\":\"Test Multipart Mail\",\"size\":\"631\",\"created_at\":\"2014-03-31T04:44:10+00:00\"}]\n$ curl -XDELETE http://localhost:1080/messages/1\n$ curl http://localhost:1080/messages\n[{\"id\":2,\"sender\":\"<me@sj26.com>\",\"recipients\":[\"<blah@blah.com>\"],\"subject\":\"Test Multipart Mail\",\"size\":\"631\",\"created_at\":\"2014-03-31T04:44:10+00:00\"}]\n$ curl -XDELETE http://localhost:1080/messages/2\n$ curl http://localhost:1080/messages\n[]\n$ curl -XDELETE http://localhost:1080/messages/1\n<html>\n  <body>\n    <h1>No Dice</h1>\n    <p>The message you were looking for does not exist, or doesn't have content of this type.</p>\n  </body>\n</html>\n```\n\nLet me know if you're still having this issue and, if so, see if you can provide a breaking example.\n. Closing; fixed by #110.\n. This breaks the failure scenario.\n. Disagree\u2014I want to be able to exactly replicate a problem with exactly the same gems as another developer, or be able to ask people to install from git to exactly replicate potential issues.\n. They're not going to be up to date now either, I'll do a recompile in a sec.\n. Nice addition.\n. The idea was to make it transparent, so no options should be involved really. My delay on this feature was just researching a nice way to find a platform-dependent location for the database.\n. I would prefer a `--database=URL` argument, using something like sequel, falling back to `ENV.fetch(\"DATABASE_URL\", \"sqlite://:memory:\")`, and with graceful migrations. This would work but would create a new migration path for which I'm not keen.\n. @fdrouet you can already run multiple instances of mailcatcher using different ports, the content just won't survive restarts. :-)\n. @fdrouet you might like to try https://github.com/mailhog/mailhog. It's written in go, has less dependencies and much less memory usage.\n. Thanks!\n. On ubuntu you will need to `sudo apt-get install libsqlite3-dev` first.\n. Have you checked that websockets still work, and that Thin boots correctly within the EventMachine loop? MailCatcher has a tight dependency on [Skinny](https://github.com/sj26/skinny) which heavily integrates with Thin.\n\nAlso, http://mailcatcher.me/#bundler\n. No, and I don't really think it should, although I'd like to know your use case.\n. Ah, that sounds like a simple purpose-built SMTP server might serve you better.\n. Haven't heard from you for a while, going to close this one for now.\n. Thanks!\n. Sorry, I can't replicate this. Could you perhaps attach a test email causing the problem?\n. @sancromeu nice investigation, albeit with frustrating results.\n\nThe whole point of prepared statements is to prepare them once then reuse them with varied bound data. This looks like an upstream bug that I can't really address except to remove an optimisation which should work for everybody.\n\nI'm afraid the resolution here is probably to fix the upstream sqlite package in centos, or recompile it, and these things are outside my control so closing this issue.\n. What browser and version are you using? Is there anything in the debug console?\n. Rubygems takes care of loading a graph of dependencies making sure all versions are compatible. Try running the below:\n\n``` sh\n$ ruby -r mail_catcher -e \"p(Gem.loaded_specs)\"\n{\"eventmachine\"=>#<Gem::Specification:0x3ff6aa44191c eventmachine-1.0.3>, \"haml\"=>#<Gem::Specification:0x3ff6a9c902b8 haml-4.0.5>, \"treetop\"=>#<Gem::Specification:0x3ff6aa058170 treetop-1.4.15>, \"mail\"=>#<Gem::Specification:0x3ff6aa407370 mail-2.5.4>, \"sqlite3\"=>#<Gem::Specification:0x3ff6a9c1629c sqlite3-1.3.8>, \"daemons\"=>#<Gem::Specification:0x3ff6aa44ddc0 daemons-1.1.9>, \"thin\"=>#<Gem::Specification:0x3ff6aa419778 thin-1.5.1>, \"skinny\"=>#<Gem::Specification:0x3ff6a9c1abf8 skinny-0.2.3>, \"mailcatcher\"=>#<Gem::Specification:0x3ff6aa035030 mailcatcher-0.5.12>, \"activesupport\"=>#<Gem::Specification:0x3ff6aa46865c activesupport-3.2.16>, \"i18n\"=>#<Gem::Specification:0x3ff6a9c22e84 i18n-0.6.9>, \"rack\"=>#<Gem::Specification:0x3ff6aa449c48 rack-1.5.2>, \"multi_json\"=>#<Gem::Specification:0x3ff6a9c37168 multi_json-1.8.4>, \"mime-types\"=>#<Gem::Specification:0x3ff6aa019448 mime-types-1.25.1>, \"tilt\"=>#<Gem::Specification:0x3ff6a9c3f0c0 tilt-1.4.1>, \"sinatra\"=>#<Gem::Specification:0x3ff6aa03088c sinatra-1.4.4>, \"rack-protection\"=>#<Gem::Specification:0x3ff6aa421ba8 rack-protection-1.5.2>}\n```\n\nI have tilt version 2.0.0 installed, yet it has correctly selected 1.4.1.\n\nIf you find rubygems is not doing the same for you then I suspect you have a broken ruby/rubygems install. Linux distributions sometimes do silly things with gems. If you find a fix please let me know, but for now this is not a bug in mailcatcher.\n. I still can't reproduce this issue exactly, but it can't hurt. Thanks! :-)\n. MailCatcher lists the SMTP receiver and senders in the list, but displays the mail body's \"To\", \"Cc\" and \"From\" headers when actually viewing an individual message. \"Bcc\" headers are stripped by your mail client/library so cannot appear in MailCatcher, but we still list all the people a message is actually being sent to. Do you have any suggested improvements?\n. This requires mixing the smtp and mail concerns and perhaps inferring too much. We cannot be sure that such recipients were indicated in a bcc field. We can assume, but such an assumption may be incorrect.\n\nI'm inclined to leave it as is, I'm afraid.\n. We should actually just append \"\\r\\n\" to every line as stipulated by the SMTP protocol. I'll take a look.\n. Great! That's why the `-f` flag is suggested for sendmail/catchmail. ^_^\n. Love the idea, but perhaps [favcount](http://chrishunt.co/favcount/) might suit better so that even when tabs get tiny the count can still be read? I've merged your change, fixed a few edge cases, and added favcount on master\u2014see what you think.\n. I love it. This has spurred me to actually complete some changes I had pending to the codebase, then I'll add a \"Transcript\" tab.\n\nAnother thought\u2014what about a failed SMTP session? Should I perhaps be exposing failures as \"messages\"? And what about SMTP sessions which submit multiple messages? Requires further mulling.\n. This is more work than it sounds like, and I'd like to deduplicate the data a little which requires a rethink of the database a little. First, I'd like to update the database itself to use ActiveRecord or something. Will put this on the back burner for now.\n. Thin is locked down because skinny hooks deeply into thin and allowing less strict requirements could have unknown effects.\n\nThe activesupport requirement is less strict and deeply coupled, and has been tested through the 3 series and into 4.0.\n\nIf you'd like to take the time to thoroughly test mailcatcher and, more importantly, skinny with later versions of thin I'd love to see the results and consider loosening the requirement.\n. Make sure you're just running `mailcatcher` and not `bundle exec mailcatcher`, and that you don't have a bundler binstub.\n. Well somehow ruby is loading bundler before running mailcatcher. It might be because of a stray bin stub or a weird environment variable or something.\n\nCan you check and post the output (sanitised if you like) of:\n1. `which mailcatcher`\n2. `env`\n3. Run it from a different directory, perhaps your home directory\n4. Run it in a different terminal\n. Well (1) is your problem. What's bundled_mailcatcher? Looks like something funky in your terminal setup, I've never seen such a thing. You need to follow that rabbit hole. What's `which bundled_mailcatcher` give you, etc?\n. Haven't heard for a couple of days, hope you've tracked down your problem, but as this isn't a MailCatcher issue per se I'll close this issue.\n. The readme already contains:\n\n> Command line options to override the default SMTP/HTTP IP and port settings.\n\nWhich should lead someone to run `mailcatcher --help` which reveals:\n\n```\nUsage: mailcatcher [options]\n        --ip IP                      Set the ip address of both servers\n        --smtp-ip IP                 Set the ip address of the smtp server\n        --smtp-port PORT             Set the port of the smtp server\n        --http-ip IP                 Set the ip address of the http server\n        --http-port PORT             Set the port address of the http server\n        --no-quit                    Don't allow quitting the process\n        --[no-]growl                 Growl to the local machine when a message arrives\n    -f, --foreground                 Run in the foreground\n    -b, --browse                     Open web browser\n    -v, --verbose                    Be more verbose\n    -h, --help                       Display this help information\n```\n\nDo you think there should be more?\n. ```\nsed -ir \"s@;\\?sendmail_path =.*@sendmail_path = \\\"/usr/bin/env $(which mailcatcher) -f local\\@host\\\"@\" /etc/php5/apache2/php.ini\n```\n\nshould be\n\n```\nsed -ir \"s@;\\?sendmail_path =.*@sendmail_path = \\\"/usr/bin/env $(which catchmail) -f local\\@host\\\"@\" /etc/php5/apache2/php.ini\n```\n. No worries, hope it's working for you. :-)\n. The table actually lists the SMTP sender and recipients as per the SMTP exchange, the RFC2822 `Return-Path` header in the actual email is just a way to tell the SMTP client which SMTP sender to use. You can also use the `-f` option to sendmail, for example.\n\nI'm not inclined to change it because the list is meant to reflect exactly where an email claims to come from and where it has been sent in the delivery process. The RFC2822 `From`, `To` and `Cc` headers as they would be displayed in an email client are listed in the message body below the table.\n. Do you have the xcode command line tools installed? Mailcatcher uses a gem which requires a compiler.\n. Please re-open the issue if you're still having issues.\n. Sorry guys, I don't have a windows machine to test this on. If you make any progress it would be great to hear your thoughts. Perhaps eventmachine needs an upgrade?\n. Have you tried this with eventmachine 1.0.4? Anyways, I'm going to close this issue, please reopen it if, with the latest gem versions, you still have the same issue.\n. Have you got any logs from PHP or your web server indicating why it is failing?\n. You'll probably need a wrapper like:\n\nhttp://mailcatcher.me/#rvm\n. Hi kalmanh,\n\nThanks for getting involed, but I've left the 1.8-style hashes on purpose\u2014mailcatcher still works on ruby 1.8.7 and I don't think changing hash syntaxes is enough of an incentive to break that compatibility yet.\n\nThanks though!\n. @der-flo that's not related to this pull request. master mailcatcher now has an asset server for development and precompiles the assets for gem publishing. Put `MAILCATCHER_ENV=development` in your ENV to hook it up.\n. (There's some major work waiting for me to get around to releasing 0.6.0)\n. Holy shit, hi @dirkkelly.\n\nThanks.\n. Agreed, this is going on the list.\n. This is not for HTTP, but for SMTP over TLS and STARTTLS, for testing your mail settings and libraries.\r\n\r\nI agree that reverse proxying from nginx is better for HTTPS, and I wouldn't recommend exposing mailcatcher itself outside a development environment without something else acting as a proxy with authentication. :-). There's some severe asset reworking in the latest master which might not work out of the box. You'll need to pull it locally and run `rake assets` or `export MAILCATCHER_ENV=development`. There will be a release when I can finish the changes.\n. The latest master has a big rework of the asset infrastructure. If you want the assets in a development checkout you'll need to either set an environment variable `MAILCATCHER_ENV=true` or run `rake assets`.\n. Not sure what this is about, but please reopen with issues if you need assistance.\n. You'll need those environment variables set in your PHP process which runs sendmail, or you can edit the `catchmail` shebang to include a `--encoding=utf8`.\n\nPlease reopen the issue if you have further problems.\n. Unfortunately because the versions of ruby vary so greatly in their treatment of encodings and it's rubygems creating the shim, not mailcatcher, there's little we can do from the gem.\n. Actually, I tell a lie. We could set the external encoding inside the script. I'll add a TODO.\n. Do you have any log output? It's probably having trouble locating the proper ruby or gem. Re-open with some output and I'll be happy to help you diagnose.\n. @enrichit if you can post the command you're using and the output you're seeing maybe I can help?\n. Sorry not sure what's going on here. Try upgrading all your gems? SQLite had some strangeness a while back. Please re-open if you're still seeing this issue.\n. Technically, characters outisde the ascii 1-127 range are not permitted unencoded in email messages. This will be causing an error when parsing your message and attempting to send. You will see errors in mail servers if you attempt to send them in the wild. Instead, make sure you're using a mail library which can encode these characters correctly using mime or quoted printable encodings.\n. Closing this, make sure you use `rbenv rehash` or whatever your environment configuration requires to find new gem binstubs. :-)\n. This is a complicated beast. I agree it would be nice to preview what emails might look like in different clients in mailcatcher, but which client? and how? what about compatibility problems between what mailcatcher thinks a client does and what it actually does?\n\nThere are many services that will do this for you, like [MailChimp's inbox inspector](http://mailchimp.com/features/inbox-inspector/), [Campaign Monitor's inbox preview](https://www.campaignmonitor.com/testing/), [Fractal](http://getfractal.com/), etc.\n\nIntegration with these services would be nice, but requires a lot of configuration which I'm not sure needs to be in mailcatcher. If you can think of a good way to do this please let me know!\n. SMTP doesn't natively support UTF-8 over the wire. This message, if transmitted raw, doesn't actually conform to the protocol. Some servers support an SMTP UTF-8 extension, but this must be negotiated with EHLO and mailcatcher doesn't support it.\n\nInstead, your mail client should be encoding your message body with  base64 or similar instead of transferring in straight 8-bit. I suspect the body is actually being munged on read then causing transcoding errors on jsonification. For me, this throws an exception at read time. (Encodings in ruby are awful at the best of times.)\n\nIf I send your raw email body with catchmail then the mail gem picks up the content and correctly encodes it as base64 and it comes out as expected:\n\n```\n{\n  \"id\":3,\n  \"sender\":\"\\u003ctesting@localhost.local\\u003e\",\n  \"recipients\":[\"\\u003creceiver@localhost.local\\u003e\"],\n  \"subject\":\"R\u00e4ksm\u00f6rg\u00e5s!\",\n  \"source\":\"Date: Mon, 18 Aug 2014 17:51:26 +0200\\r\\nFrom: Testing \\u003ctesting@localhost.local\\u003e\\r\\nTo: receiver@localhost.local\\r\\nMessage-ID: \\u003c53f220fe58644dfb827100d80a00020f@localhost.local\\u003e\\r\\nSubject: =?UTF-8?Q?R=C3=A4ksm=C3=B6rg=C3=A5s!?=\\r\\nMime-Version: 1.0\\r\\nContent-Type: text/plain;\\r\\n charset=UTF-8\\r\\nContent-Transfer-Encoding: base64\\r\\n\\r\\nSMOkbGzDtiB0w6RzdGluZyByw6Rrc23DtnJnw6VzIQo=\\r\\n\",\n  \"size\":\"368\",\n  \"type\":\"text/plain\",\n  \"created_at\":\"2015-01-17T05:44:07.000+00:00\",\n  \"formats\":[\"source\",\"plain\"],\n  \"attachments\":[]\n}\n```\n. Hey there, I didn't get a notice about this issue which is odd, sorry.\n\nThis is an odd issue. Looks like rubygems isn't doing its job properly:\n\n```\nirb(main):002:0> Gem.loaded_specs\n=> {}\nirb(main):003:0> gem \"mailcatcher\"\n=> true\nirb(main):004:0> Gem.loaded_specs\n=> {\"eventmachine\"=>#<Gem::Specification:0x3ff8e6fcd464 eventmachine-1.0.3>, \"haml\"=>#<Gem::Specification:0x3ff8e6a1d0c8 haml-4.0.5>, \"sqlite3\"=>#<Gem::Specification:0x3ff8e6e9d2ec sqlite3-1.3.9>, \"daemons\"=>#<Gem::Specification:0x3ff8e6b95914 daemons-1.1.9>, \"thin\"=>#<Gem::Specification:0x3ff8e6e7dce4 thin-1.5.1>, \"skinny\"=>#<Gem::Specification:0x3ff8e6cccf6c skinny-0.2.3>, \"mailcatcher\"=>#<Gem::Specification:0x3ff8e69343f0 mailcatcher-0.5.12>}\n```\n\n(notice activesupport and i18n are missing.)\n\nYou could work around by using rvm to install mailcatcher into a dedicated gemset and make the wrapper use that, so any conflicting versions installed by other things don't conflict.\n. @CamJN that won't fix the gem. To have the same effect in development mode, start mailcatcher with `bundle exec mailcatcher`.\n. Yep. Please remove any prerelease versions of i18n if you encounter this issue.\n. @jondoe1337 that looks like you've got activesurpport 4.2.7.rc1 installed which is causing havoc. Can you try:\n\n```\ngem uninstall activesupport -v 4.2.7.rc1\n```\n. You can run the git version with `MAILCATCHER_ENV=development` in your ENV. But I want a better solution to this to be sure.\n. Please use `bundle exec rake` or `bundle exec mailcatcher`, you don't need to unshift the library directory.\n\nActivesupport is another issue, will pull that commit.\n. Neat!\n\n`EXPOSE 25 80` won't work because not being bound as root.\n. Thanks, but I deliberately didn't include sinatra-contrib for various reasons though. This has been fixed with some content_type stanzas.\n. Please remove any prerelease versions of i18n to make this work. Mailcatcher works with the released version of i18n 0.7.0+\n. This is pretty old now so I'll close it. Please re-open if you still have this issue. You might like to try running `lsof -i -n` to see what processes are running on what ports to see if there's a collision.\n. Ah, right. You can always `lsof` or `ps` to find the mailcatcher process then `kill` it.\n. Closing this issue due to age. Please re-open if you're still experiencing this.\n. Run mailcatcher from foreman with `mailcatcher --foreground`. The daemonised mode is a convenience. I don't want to build service management semantics in -- that's your operating system's job. :-)\n. Ruby 2 is fine, but 2.1.x and eventmachine 1.0.4 specifically seems to have problems per #182. Please track them there.\n. This is very strange as I can't replicate this issue. Does it happen all the time, for every message?\n. I still can't reproduce this.\n\nPlease try upgading to 0.6.0 with `gem install mailcatcher`. If you're still having issues please feel free to reopen this issue.\n. This is due to #182. Mailcatcher doesn't seem to quit correctly when asked under Ruby 2.1.5.\n\nPlease try running mailcatcher in the foreground for now. You can `ps aux | grep mailcatcher` and `kill -9` the process if you run into this issue again in the meantime.\n. This seems to be related to #182, please track there.\n. 0.7.0 non-prerelease works fine. And restricting the gem requirements would just mean that this gem wouldn't update based on other dependency restrictions.\n. Yeah mailcatcher shouldn't be in your Gemfile, but I agree that a release is long overdue. First need to fix the eventmachine/2.1.5 issues.\n. Ah, I just pushed a change to build on latest of each minor version.\n. Ah, this must be something that has changed recently. I'll update the README.\n. Actually it looks like `php_value` should work: http://php.net/manual/en/configuration.changes.php\n\nPerhaps there's something overriding your configuration? Anyways, this seems like an administrative configuration issue, not an issue with the general guidelines.\n. No I didn't try it, but without the details you've just provided above there didn't seem a need to change something I had previously tried which had worked. Sorry my skim of the PHP docs didn't pick up these changes at first glance. With these details, though, I'm happy to make the change. Thanks!\n. It's a new feature not yet in a released version. :-)\n. Can you provide a full source message which produces this problem?\n. If you can supply a message which reproduces this problem please feel free to reopen the issue. :-)\n. From what I can see of the source you've posted this should work.\n\nCan you provide a full email source (like one from MailCatcher's Download button) which produces this problem?\n. I believe this is similar to many other issues about encoding. Your mail library is not correctly encoding these characters as quoted printable or similar. You should fix or update your mail library to get this working. Otherwise they may not appear correctly for your intended recipients, either!. Seems to be a bug in the latest version of EventMachine, sadly. -.-\n\nThe reason it doesn't daemonise until after the eventmachine loop is running is so that port failures can be reported to the user.\n\nI'll see what's going on upstream in eventmachine. But honestly eventmachine has become a major pain. May see if there's a feasible alternative, maybe even going back to the standard library with a custom select loop.\n. This does seem to be an eventmachine regression.\n\nPlease try [mailcatcher 0.6.0pre1](https://rubygems.org/gems/mailcatcher/versions/0.6.0pre1) (`gem install mailcatcher --pre`) which restricts eventmachine to != 1.0.4. This is only a temporary release until I can fix the eventmachine problem to fix ruby 2.2 compatiblity, or replace eventmachine with something else.\n. @matthewbarram please try mailcatcher 0.6.0pre1 (`gem install mailcatcher --pre`).\n. This has been worked around in 0.6.0, please upgrade with `gem install mailcatcher`.\n\nThe root cause of this has also been lodged as an issue upstream:\n\nhttps://github.com/eventmachine/eventmachine/issues/569\n. Ah, I see:\n\n```\neventmachine (1.0.5)\n```\n\nThey must have released a new version which has broken my fix. I'll look into it again.\n. mailcatcher 0.6.1 is out which works with eventmachine up to 1.0.5, and restricts future upgrades.\n. Localhost should always work, I suspect you have an environment problem. Sorry but I'd like to leave it as localhost.\n. The To field in the list of messages and the message header is the list of addresses that SMTP delivered to, not the contents of the To header in the actual email.\n\nCheck the Source version of your email for the To header.\n. Ruby 2.2 won't work yet because eventmachine 1.0.4 has bugs preventing mailcatcher working, and 1.0.3 doesn't support ruby 2.2. Will keep you posted.\n. (Make sure you're installing mailcatcher as a gem, not with bundler, and run mailcatcher with ruby < 2.2.)\n. Please upgrade to version 0.6.0 with `gem install mailcatcher`\n. Good point. Fixed on master.\n. What version of ruby are you using? `ruby --version`\n\nWhat OS/platform are you on?\n\nDo you have the json gem? `gem list`\n. No worries, sorry it didn't work for you.\n. Please try mailcatcher 0.6.0pre1 (`gem install mailcatcher --pre`)\n. mailcatcher 0.6.1 is out which works with eventmachine up to 1.0.5, and restricts future upgrades.\n. Are you using the mailcatcher web interface in an automated browser, or treating it as an API?\n\nIf the web interface, try reloading the page before making your assertions. Maybe the websockets aren't working as expected. If so, let me know when browser you're using.\n\nIf you're using it via an API then the email should be available as soon as your app has finished delivering it. I'd suggest watching the mailcatcher logs (the standard output, you might like to run it with `--foreground`) during delivery. There will be a message for every mail received the moment it is fully delivered. If you don't see a message when you expect then your app isn't completing the mail delivery when you expect.\n\nHope this helps.\n. Please try upgrading to version 0.6.0 with `gem install mailcatcher`\n\nIf you're still having issues feel free to reopen the issue.\n. Have you tried refreshing the page?\n. What do the rails logs show? Have you tried running `mailcatcher --foreground` and watching those logs?\n. Please try upgrading to version 0.6.0 with `gem install mailcatcher`\n\nIf you're still having issues please feel free to reopen the issue.\n. mailcatcher 0.6.1 is out which works with eventmachine up to 1.0.5, and restricts future upgrades.\n. @john-999 mailcatcher 0.6.1 should only load eventmachine < 1.0.5. Try running with `--foreground` and watch the logs.\n. Thanks! 1.0.4 is problematic, but if they fix the bugs we should still be compatible with `~> 1.0.0`, so I've added `!= 1.0.4` to the deps in 7533eb.\n. This isn't really relevant to mailcatcher, but is covered by the [Action Mailer rails guide](http://guides.rubyonrails.org/action_mailer_basics.html#generating-urls-in-action-mailer-views).\n\nFor instance, my host will be different to yours (I use pow), so a copy/paste will actually confuse things.\n. I don't really want to change the instructions everywhere, but I've added a known issue [in the readme](https://github.com/sj26/mailcatcher#ruby-22--smtp-not-working):\n\n> ### Ruby 2.2 / SMTP not working\n> \n> MailCatcher does not currently support Ruby 2.2. EventMachine added support in 1.0.4, but regressed other things so is unuseable, even on earlier rubies.\n> \n> Please use Ruby < 2.2 and EventMachine < 1.0.4. You can `gem install mailcatcher --pre` for a version which restricts to eventmachine < 1.0.4.\n. Don't include mailcatcher in your gemfile. Please see the readme.\n. Not quite, but close. I have a little script which scrapes the readme, renders it, and rewrites it a bit. Need to set it up with a git webhook at some point. Or use github pages.\n\nIn any case, done.\n. Hi Andy,\n\nThe \"to\" and \"from\" in Mailcatcher shows how your email is actually being sent; who is being sent a copy of your email via SMTP and where your app is claiming the email is from via SMTP. The headers are actually different.\n\nThis seems to cause a lot of confusion so I'm going to introduce an SMTP log tab soon showing the SMTP session log, and change these fields to \"recipients\" and \"/sender\"\n. MailCatcher needs to listen on SMTP too, rack is not enough. This cannot be done.\n. (If you would like something more rails integrated maybe try https://github.com/basecamp/mail_view)\n. (There is probably also room for another tool which integrates more deeply with rails and hijack's ActionMailer's delivery method in development and serves them via rack without using smtp at all. MailCatcher was designed as a more general solution to the problem, though.) \n. Can you provide an example message triggering this problem?\n\nSMTP only allows ASCII over the wire so mail messages as source should still be ASCII. Perhaps it is a strange title encoding or similar?\n. I'll happily accept a patch with test cases. The problem here is incompatibility arising from particular gem versions which is difficult to solve.\n. Please try v0.6.5 and create a new issue with a fresh backtrace and breaking source message if you continue having issues.\n. Mail messages generally have time inside them, or folks pipe output into logging tools which can time-tag lines if they like. Is there a compelling use-case to do so?\n. This will be done as part of #298.\n. Yeah this is a long standing issue. Individual deletes aren't replicated across instances either. Time to react/relay the whole thing? :P\n. By design. MailCatcher is an SMTP tool, so show the SMTP details in the table list. The \"From\" in the message display is the RFC822 From header.\n. From and Sender as you describe are both RFC822 headers, part of the message in the lower pane in MailCatcher. SMTP's FROM is provided in the SMTP exchange, per https://tools.ietf.org/html/rfc821#section-3.1. The upper table in MailCatcher is SMTP details, and is how/where the message would be delivered. The message details (the lower pane), like the From header, is how a message will be displayed in a mail client. If you want to see if there is a different From and Sender then I suggest looking at the message source which will show all headers.\n. This is a problem with the addon, not with mailcatcher.\n. I'd be happy to accept a patch improving JavaScript message retrieval.\n. Ah right. This should be fixed by #242, then.\n. This only works on systems with sysv init scripts. systemd, upstart and launchd users will need different configurations, among other possibilities. Adding instructions for how to start on every possible configuration would make the readme very long. Instead I'd rather leave people to google \"how to run service at system start up\" or similar and gain some knowledge about their particular systems.\n. It's been designed for development use, but you could probably use it in production if you really wished. Just be in mind that it uses an in-memory store.\n. Started: https://github.com/sj26/mailcatcher/releases\n. Unfortunately Ruby has a habit of leaking memory. In-memory SQLite and EventMachine probably just complicates the whole situation.\n\nGiven mailcatcher is intended to be a development tool, and not necessarily running _all the time_ this is enough for me. If you'd like to attack it with perftools then patches are welcome!\n. If you'd like something with a better resource profile, there's also [MailHog](https://github.com/mailhog/MailHog).\n. I'm not seeing a huge impact locally. If you folks would like to provide some profiling information to identify the source I'll happily address it.\n. Here are some memory profiling tools:\n\nhttps://github.com/SamSaffron/memory_profiler\nhttps://github.com/ruby-prof/ruby-prof\n\nIf you can run mailcatcher in the foreground using these tools and replicate the memory issues with profiling data then maybe we can figured out what's causing it and fix it. I don't see a lot of unexpected memory use when I use it, but will try and replicate as well.\n. @alexbowers sorry, as I've mentioned above I can't replicate this and nobody is contributing useful data with the suggested tools. Mailtrap seems reasonable for a hosted option. [MailHog](https://github.com/mailhog/MailHog) is another good alternative written in Go and locally hosted like mailcatcher.\n. Yes, it's probably an eventmachine leak.\n. Thanks for the patch!\n\nThe catchmail binary is actually unrelated to this change, but you're right about the erb template. Committed in d7a4737.\n. https://github.com/sj26/mailcatcher#bundler\n. Fixed in 134a99c9c1a2f75cbe1c94f75cbb58959a0176dc.\n. The icon count is working in Safari, Firefox and IE for me. The title doesn't have a count. Does it need one? In any case, this isn't a bug.\n. Sure, why not.\n. Sorry this should have been merged a while ago. We were overriding the header. -.-'\n. No, thank you. I consider this a non-feature of mailcatcher. Process supervision belongs to your operating system. See #46.\n\nTo daemonise as a system service which can be sent signals please use something like upstart, systemd, or launchctl, or [start-stop-daemon](http://man.he.net/man8/start-stop-daemon) in combination with `mailcatcher --foreground`.\n. This is a problem with the system configuration, not something mailcatcher can fix. If you have this issue, make sure you're using an absolute path to catchmail and that it uses an absolute path to ruby. The [RVM wrapper instructions](https://github.com/sj26/mailcatcher#rvm) should help.\n. Closed in favour of #227.\n. Thin 1.6 breaks mailcatcher exiting cleanly. This will need some more work.\n. Yeah I'm closing this in favour of removing Thin completely as part of #298\n. Nice idea.\n. I just added an `--http-path` option so you can add `--http-path=/mailcatcher` to mount mailcatcher with a path prefix of `/mailcatcher` for example. This has been released as 0.7.0.beta1, so you can `gem install mailcatcher --pre`. Give it a go?. This seems to pop up on some systems, and we haven't identified why. What operating system / ruby version / sqlite version is your system running?\n. Let's fix this by removing sqlite in #298.. Sorry, this is an error with your ruby/openssl install. Make sure `ruby -r digest/md5 -r openssl -e \"puts OpenSSL::VERSION\"` works on your system before trying MailCatcher. Re-open if the problem persists once openssl is working.\n. Should be fixed by #242\n. This should be fixed by #258 thanks to @grant-mccarriagher, included in v0.6.3. Please update and comment again if you have issues.\n. There have been plans to add persistence support by setting a database path or something for a while now, so we probably won't do this. Nice idea, though!\n. @kenorb that is not a solution for windows.\n\n@fede91it, @bezin: it sounds like your ruby and sqlite installations are having some issues, probably best tracked in the sqlite gem. Sounds like that issue has been resolved anyway so maybe try updating the sqlite gem and running mailcatcher again. Otherwise please follow up in the sqlite gem.\n. Odd! Sounds like a threading issue. Please try updating mailcatcher and see if it fixes your issues. If not, please comment again.\n. This is by design. Mailcatcher only keeps mail in memory while running.\n. (You could download the mail if you wish to keep it.)\n. They are being done in decoration and this should be fixed.\n. https://github.com/sj26/mailcatcher#api\n\n```\n# delete all messages\ncurl -X DELETE http://localhost:1080/messages\n\n# delete message 123\ncurl -X DELETE http://localhost:1080/messages/123\n```\n\nIf you have that many emails you may want to consider restarting mailcatcher, or clearing the emails occasionally. I'd prefer to keep it simple.\n. Quite right. Have you tested this across different browsers? Some get finnicky about iframe content.\n. /usr/local/bin (where gems usually install their scripts) may no longer be in your PATH thanks to OS X. Try using the full patch to catchmail (you can find it using `which catchmail` on your shell) instead of `/usr/bin/env catchmail` in your php configuration. If this doesn't resolve your issue feel free to re-open the issue.\n. Rvm does strange things to gem scripts. Have you tried following the instructions for rvm in the readme?\n. @tymat do you use homebrew on OS X El Capitan? If so, try:\n\n```\nPKG_CONFIG_PATH=\"$(brew --prefix openssl)/lib/pkgconfig\" gem install eventmachine -v \"1.0.8\"\n```\n. Please upgrade to 0.6.2.\n. Please upgrade and try 0.6.2. Re-open this issue if it does not resolve your issue.\n. See #210, and please try version 0.6.2.\n. Thanks, this sounds like a configuration issue. Closing.\n. Done on master.\n. Thanks. This sounds like an ipv6 configuration issue.\n. `env` has not moved in El Capitan:\n\n``` sh\n$ sw_vers\nProductName:    Mac OS X\nProductVersion: 10.11.1\nBuildVersion:   15B42\n\n$ which env\n/usr/bin/env\n```\n\nThe location of catchmail is dictated by your ruby setup. If you have the default system ruby, catchmail gets installed in /usr/local/bin:\n\n```\n$ export PATH=\"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin\"\n\n$ which ruby\n/usr/bin/ruby\n\n$ ruby --version\nruby 2.0.0p645 (2015-04-13 revision 50299) [universal.x86_64-darwin15]\n\n$ sudo gem install mailcatcher\nSuccessfully installed mailcatcher-0.6.1\n\n$ which catchmail\n/usr/local/bin/catchmail\n```\n\nI don't use rvm, so am unsure of the default location. I suggest you run `which catchmail` and use that instead of `/usr/bin/env catchmail` in your php configuration per the PHP/RVM instructions. Or you could add your RVM script path to your /etc/paths. But this is a problem with your specific environment I'm afraid.\n\nSadly I cannot accept this PR.\n. This is because OS X El Capitan doesn't include the OpenSSL headers any more (thanks apple).\n\nIf you've got OpenSSL in homebrew, please try:\n\n```\nPKG_CONFIG_PATH=\"$(brew --prefix openssl)/lib/pkgconfig\" gem install eventmachine -v \"1.0.8\"\n```\n. Linking openssl into a standard library lookup location means the binary libraries could be loaded by another application which hasn't been built with homebrew. This could have unintended consequences.\n\nI'd recommend instead compiling and linking things which need homebrew's ssl explicitly, like with the pkg config incantation.\n. Closing, please comment again if the command I posted above doesn't work for you.\n. _sigh_\n\nUnfortunately this is probably a leak in eventmachine somewhere. I am unable to diagnose it locally. Latest mailcatcher for me runs stably and even recovers resident memory after a little while.\n\nIf you'd care to do some delving with https://github.com/tmm1/stackprof and see what's happening that would be wonderful. Otherwise I have no way to reproduce or fix this.\n. No, thank you. I consider this a non-feature of mailcatcher. Process supervision belongs to your operating system. See #46.\n\nTo daemonise as a system service which can be sent signals please use something like upstart, systemd, or launchctl, or [start-stop-daemon](http://man.he.net/man8/start-stop-daemon) in combination with `mailcatcher --foreground`.\n. Oh! Nice catch, thank you.\n. (There is a more complicated issue. The MailCatcher UI can get out of sync, especially when multiple copies of the UI are open. Probably should investigate using something a little more resilient.)\n. Gemfile.lock has been removed in 433fad4e and we're now using new travis build infrastructure in 0c1a1e41.\n. Eventmachine has been bumped to 1.0.9.1 in 79e023ef and the Gemfile.lock removed in 433fad4e.\n. Mailcatcher does not support rails. We can't guarantee that MailCatcher will simultaneously retain compatibility with all versions of activesupport so it will track dependencies independently.\n\nPlease see https://github.com/sj26/mailcatcher#bundler\n. @ACPK sorry, my wording was a bit confusing!\n\nMailCatcher supports receiving email from rails. But it is an independent gem and should not be included in your Gemfile. Your rails application's dependencies may be entirely different to MailCatcher's, potentially conflicting.\n\nI hope that's clearer. :smile: \n. The solution is: don't put MailCatcher in your Gemfile. It is an independent tool. Install MailCatcher with `gem install mailcatcher`\n. For rails you could put it into your [`bin/setup` script](https://robots.thoughtbot.com/bin-setup). Think of MailCatcher like MySQL or Postgres, or your other application dependencies. :-). If you're running mailcatcher from github you'll need to `bundle install`. Make sure you `git pull origin master` first. Does that fix your issue?\n. I think this is because rubygems is terrible.\n\nI managed to replicate this by installing rails beta (have you done that too?) then installing mailcatcher and running mailcatcher. Thin quite happily activates rack-2.0.0.alpha (installed by rails 5), but sinatra requires \"~> 1.5\", hence why it can't activate and load sinatra.\n\nRubygems doesn't seem to lock activates gems dependencies before they're required. Mailcatcher explicitly specifies which gems it needs, and what versions they should be. Rubygems should be able to resolve a working set from these. But I guess it can't, and that's why we invented Bundler.\n\nArgh.\n. Right. So I've made mailcatcher explicitly activate its gem dependencies. Please install 0.6.4 and see if it solves your issues.\n. @NullVoxPopuli please see #267.\n. This isn't quite semantially correct. `4.9.9` is not the maximum version number before `5.0.0.beta1` or any other pre-release. Rubygems pre-release versioning is a bit strange.\n\nBut requiring `~> 4.0` should work because it converts pre-release versions to release versions for comparison. I've added this as a requirement on master. Please pull and try the latest master.\n. Can you provide an example email, full source, which triggers this error?\n. Please try v0.6.5 and reopen with a source message causing the error and fresh backtrace if you're still having issues.\n. You could do this by wrapping mailcatcher in a reverse proxy. I'm not sure I see a use case for putting it in the gem itself. What do you have in mind?\n. This looks like a rubygems bug, folks. Not sure what, I can't replicate it. What version of rubygems are you using? (Post the output of `gem environment`).\n. Can you also please post the full stack trace? The meaningful bit is probably in the middle somewhere.\n. Right. So I've made mailcatcher explicitly activate its gem dependencies. Please install 0.6.4 and see if it solves your issues.\n. I still can't reproduce this. It might be based on the combination of gems installed. Anybody affected could you please provide as much information as possible: what is your ruby version, how is it installed, the full output of `gem environment` and `gem list`.\n. I've just noticed: everybody seems to be using rvm, and gemsets. Have you tried installing without gemsets?\n. @GuillaumeLegendre I've installed the same version of rvm, ruby, created a gemset, and installed all the same gems and versions, but I don't see the error:\n\nhttps://gist.github.com/sj26/35dc5e343d45f0177a07\n\nAre your gems distributed between your gemsets? Which are in global versus investissement_pierre?\n. @jaydorsey thanks! That sounds exactly like the problem. It only seems to occur in rvm with gemsets. Seems rvm does some magic with bundler and bundler-unload. This sounds likely:\n\nhttps://github.com/rubygems/rubygems/issues/1420#issuecomment-167939914\n\nThere is a patch proposed:\n\nhttps://gist.github.com/mpapis/bac6163f8855e12f7833\n\nI haven't tried reproducing using bundler but I'll give it a go.\n. This is unfortunately a bug in the combination of Rubygems, Bundler and RVM, not something controllable within MailCatcher itself. @charazn's instructions per the README are the safest way to install MailCatcher with RVM.\n. [It doesn't](https://github.com/search?q=%22method_missing%27+undefined+method+this%22&type=Issues&ref=searchresults).\n\nIt seems to happen in a particular edge case with rubygems, rvm and bundler. MailCatcher being an independent gem often used within projects with similar dependencies using bundler seems to hit the edge case more often.\n. Please try upgrading rubygems and mailcatcher and open a new issue with a fresh backtrace if you're still having issues.\n. Not as part of the core project, no. I'd be open to a third party packager?\n\nI'll close this, reopen if you come up with a prototype or ideas.\n. Can you not filter in your consumer?\n. I'd consider adding this, but would prefer to do so carefully. If you'd like something which works already maybe try [MailHog](https://github.com/mailhog/MailHog) \u2014 they seem to have [a search endpoint](https://github.com/mailhog/MailHog/blob/91a9d8afe119dc96a6c9acfa94c997765c824908/docs/APIv2/swagger-2.0.json#L127).\n. Ah, I see the use case. Have you tried something like:\n\n``` ruby\nHTTParty.get(\"http://localhost:1080/messages\").any? { |message| message[\"sender\"].include? \"me@sj26.com\" }\n# => true\n```\n. Hmm, weird! Please try upgrading to v0.6.5, running with `mailcatcher --foreground` and see if the error still occurs. If so, please reopen with a fresh backtrace.\n. Please try v0.6.5 and reopen with a fresh backtrace if you're still having issues.\n. Sorry, after browsing the [codebeat page for mailcatcher](https://codebeat.co/projects/github-com-sj26-mailcatcher) there are no quick wins that I consider a problem, or for which I would probably accept a pull request. I like the size, simplicity, and encapsulation level of the `MailCatcher::Mail` module, and neither of the two repeated methods would be better extracted, imho.\n\nHappy to be proven wrong with a compelling change. :-)\n. This is a repository for MailCatcher, a ruby tool.\n\nFor help getting started with Ruby and Rails I suggest reaching out to [the Ruby on Rails community](http://rubyonrails.org/community/) asking your question on [Stack Overflow](http://stackoverflow.com/questions/tagged/ruby-on-rails), or jumping on the `#rubyonrails` IRC channel on `irc.freenode.net`.\n\nGood luck!\n. MailCatcher itself hasn't changed and remains compatible with Ruby 1.9. It seems upstream dependencies of the mail gem have precluded 1.9 and Rubygems isn't smart enough to limit its dependency resolution to the ruby version. :-(\n\nIf you manually install a mime-types-data gem version for 1.9 before installing mailcatcher it might work.\n. Try this, which worked for me on ruby 1.9.3-p551 with an empty gemset:\n\n```\n$ gem install mime-types --version \"< 3\"\nFetching: mime-types-2.99.1.gem (100%)\nSuccessfully installed mime-types-2.99.1\n1 gem installed\n\n$ gem install mailcatcher --conservative\nFetching: i18n-0.7.0.gem (100%)\nFetching: json-1.8.3.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: thread_safe-0.3.5.gem (100%)\nFetching: tzinfo-1.2.2.gem (100%)\nFetching: minitest-5.8.4.gem (100%)\nFetching: activesupport-4.2.6.gem (100%)\nFetching: eventmachine-1.0.9.1.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: mail-2.6.4.gem (100%)\nFetching: rack-1.6.4.gem (100%)\nFetching: tilt-2.0.2.gem (100%)\nFetching: rack-protection-1.5.3.gem (100%)\nFetching: sinatra-1.4.7.gem (100%)\nFetching: sqlite3-1.3.11.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: daemons-1.2.3.gem (100%)\nFetching: thin-1.5.1.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: skinny-0.2.4.gem (100%)\nFetching: mailcatcher-0.6.4.gem (100%)\nFetching: mime-types-data-3.2016.0221.gem (100%)\nERROR:  Error installing mailcatcher:\n    mime-types-data requires Ruby version >= 2.0.\n```\n\nDespite this error:\n\n```\n$ mailcatcher\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://127.0.0.1:1080\n```\n. There is already an issue in rubygems: rubygems/rubygems#968\n. MailCatcher still works on Ruby 1.9, see my instructions above. A better solution requires changes within rubygems which are unlikely soon, and over which I have no control.\n\nClosing because more +1s aren't useful and its outside mailcatcher's control.\n. To install on Ruby 1.9:\n\n```\ngem install mime-types --version \"< 3\"\ngem install --conservative mailcatcher\n```\n\nYou will get an error but it worked; try running `mailcatcher`.\n. If you have trouble installing mailcatcher on ruby 1.9, please try:\r\n\r\n```\r\ngem install mime-types --version \"< 3\"\r\ngem install --conservative mailcatcher\r\n```\r\n\r\nIf this doesn't work, please file a new issue.. Default behavior for action mailer in development is not to raise delivery errors. This is included in the default `config/environments/development.rb`:\n\n```\n  # Don't care if the mailer can't send.\n  config.action_mailer.raise_delivery_errors = false\n```\n\nHave you changed this setting?\n. Oh, you mean you would like a fallback method?\n. I've added this to the README under the Rails recommendation.\n. This feature doesn't currently work. I'll see if I can polish it up for release. This has been a common request, and it probably couldn't hurt.\n. I haven't had time to fix it up yet, sorry. Feel free to take a stab if you like.\n. Neat, thanks!\n. Oh no! \ud83d\ude35\n\nWhat version of linux, which browser are you using, and what is its version? And what version of windows, which browser, and its version?\n. Internet Explorer 9 does not support websockets, but it should still be polling. Have you tried refreshing the page? Are there any javascript errors?\n. Can you run `mailcatcher -f` and confirm that the output shows mailcatcher is receiving the message?\n. Just to clarify:\n\nYou're running MailCatcher on Linux, sending it email over smtp, viewing the web interface on your Linux computer in Firefox and the messages appear, and viewing the web interface on your Windows machine in Internet explorer but the messages do not appear, even if you refresh the page, except sometimes they appear after some time?\n\nI really am not sure what's going on here, sorry. :-(\n\nWeird browser caching by internet explorer? Have you tried a hard refresh, with Shift+F5?\n. Yeah, sorry I'm not sure I can fix this one. If you're able to provide some screenshots/logs from IE showing the failure maybe I can fix it, and reopen this if you do, but otherwise I'm unable to reproduce.\n. JSON is included in the ruby standard library, but is 1.8.something now I think. I wonder what is depending on \"~> 1.7\".\n\nThe docker build is actually broken for me because the ruby version is too old and mime-types-data won't install. I'll update the Dockerfile generally.\n. I've just used the ruby:2.3 base image and installed the gem. Works a treat!\n\nThanks for alerting to the issue.\n. (Note we can't use ruby:slim because it doesn't include enough headers for gem compilation, or things like sqlite3. We could probably slim down the image by uninstalling ruby development dependencies once the gems are installed then collapsing FS layers, but it works as-is.)\n. Ah, this is a duplicate of #227\n. Please try v0.6.5 and reopen with a fresh backtrace if you're still having issues.\n. Merged (manually)!\n. This is super difficult because your application could send multiple messages with the same Message-ID (although it shouldn't). This feature won't be added to MailCatcher core at the moment, although maybe in the future there will be a better search API.\n\nMaybe use the MailCatcher API to walk the messages and find the one you're after.\n. Please try v0.6.5 and reopen with a fresh backtrace if you're still having issues.\n. Oh no!\n\nCan you please provide a full example email which triggers this problem? You can just click Download in MailCatcher.\n. Please try v0.6.5 and see if it solves your problem. Otherwise please reopen with a full message source which triggers the error in MailCatcher. Thanks!\n. That's a very old version of mailcatcher: 0.2.4.\n\nPlease try upgrading: `gem install mailcatcher`\n. Nope, sorry, I consider this out of scope. This tool isn't mean to be Gmail, and doesn't purport to sandbox email because there's no hope we could ever get it right. This is why MailCatcher only binds to 127.0.0.1 by default.\n. Yeah, fair call. I've removed the activesupport dependency entirely which fixed encoding behaviour considerably, and also made mail and websocket handling more resilient so hopefully more of the encoding errors go away or at least give useful feedback. v0.6.5 released, get it while it's hot.\n. Thanks for your contribution!\n\nThese are locked down for reasons. Thin/skinny and sinatra all require pre 2.0 versions of rack.\n\nWhy does MailCatcher need gem compatibility with Rails 5? It [shouldn't be in your Gemfile](https://github.com/sj26/mailcatcher#bundler).\n. Bundler, sadly, is not designed as a generic distribution system, but as a specific application dependency manager. The interplay of installing first with Rubygems, then with Bundler, or magically bundling during gem post_install or something, seems cumbersome and error prone.\n\nI'm working on a version of MailCatcher which uses no compiled native gems and vendors all dependencies as this is the only way I can think of to remove this category of issue once and for all. I'll let you know when it's ready for beta. :-)\n. Rack 2+ is not compatible with mailcatcher at this time. This pull request breaks things.\r\n\r\nDo not put mailcatcher in your Gemfile. Put it in `bin/setup` in your rails projects.. Sorry you folks are having trouble. Windows and ruby is always a pain. Please try the latest rubyinstaller. Otherwise make sure you can `ruby -r sqlite3` from a console. You can also run mailcatcher in the foreground to see what it's doing if it seems to die silently with `mailcatcher --foreground`. Reopen this issue with more details from those commands if it's still affecting you.\n. Yeah the API is definitely the best bet. You could write a little mailcatcher cli gem if you like. But I probably won't roll it into mailcatcher core. Thanks!\n. This is more and more necessary given how EventMachine, Thin, and the whole ruby world have moved on.\r\n\r\nRefactoring into a pure-ruby threaded smtp + http server with some basic websocket support would probably be fine. I might take a look at this tonight while I'm on a plane. I've been procrastinating for far too long.. You need to `bundle exec`:\n\n```\nbundle exec rake assets\n```\n\nPackage the gem with rake, too:\n\n```\nbundle exec rake package\n```\n\nThere is a major rework in progress which will probably get rid of a lot of these issues.\n. Yeah sorry I pushed a fix for that to master.\n. See https://github.com/sj26/mailcatcher/issues/277#issuecomment-209154903. Try:\n\n```\ngem install mime-types --version \"< 3\"\ngem install --conservative mailcatcher\n```\n. No worries, it should probably go in the README or something, although I have a longer term fix in the works. ^_^\n. Good idea! There are a bunch of events which should be propagated client side which aren't, and this is one of them. I've got a clientside rework in progress which should fix this.\n. [Please don't put MailCatcher in your Gemfile](https://github.com/sj26/mailcatcher/blob/master/README.md#bundler). It is an application in its own right with its own dependencies that can't possibly interoperates with every version of rails.\n\nSimply:\n\n```\ngem install mailcatcher\nmailcatcher\n```\n\nYou can put the gem install in your `bin/setup` if you like.\n\nAlternately, I just removed activesupport as a dependency in the latest MailCatcher release. You could try upgrading.\n. That looks like you're sending utf-8 characters as part of a plain text encoding, which mail clients will expect to be ASCII. Can you try something like:\r\n\r\n```php\r\n$subject = 'Test';\r\n$headers = \"Content-Type: text/plain; charset=utf-8\"\r\n$body = '\u00e4\u00f6\u00fc';\r\n\r\nif(mail('test@test.com', $subject, $body, $headers)) {\r\n    echo 'sent';\r\n} else {\r\n    echo 'not sent';\r\n}\r\n```\r\n\r\nIf this doesn't work please re-open with a full message body as PHP sends it so I can reproduce.. Good point! If there were an easy, compatible way to make MailCatcher bind to the loopback interface addresses automagically I would, but it's not that easy. So this change is a good idea. Thanks!\n. Nice find! Shows how many folks use MailCatcher programmatically, haha. Thanks!\n. Oh no! I'm sorry that's not working for you.\n\nI've just tried this myself locally and I get the correct result:\n\n![screenshot 2016-09-15 10 17 28](https://cloud.githubusercontent.com/assets/14028/18534383/b808480c-7b2d-11e6-8f2b-be3a04dc0ca8.png)\n\nCould you confirm a few details for me?\n- What version of MailCatcher are you running? (`mailcatcher --version`)\n- What version of Ruby are you running? (`ruby --version`)\n- What gems do you have installed? (`gem list`)\n\nThis smells like a ruby version issue. Older ruby wasn't great at encodings.\n. @jbouzekri that's an older version of mailcatcher, and it looks like the docker image has moved on. Have you tried doing `docker pull schickling/mailcatcher`?\n\n```\n$ docker run --rm -it schickling/mailcatcher mailcatcher --version\nmailcatcher 0.6.5\n```\n. This should be fixed in the most recent version.. Anybody affected by this issue: could you please upload a message body which triggers this error so I can reproduce and perhaps fix this issue.. I'm sorry it's not working for you, but it works fine for me:\r\n\r\n![screenshot 2016-12-10 22 04 33](https://cloud.githubusercontent.com/assets/14028/21072897/b0e23ffc-bf24-11e6-814a-4e53ce655a80.png)\r\n\r\nCould you please provide an example message which doesn't work?\r\n\r\nHere's an example I tried using the Ruby mail gem (which is how mailcatcher reads email, too):\r\n\r\n```sh\r\n$ ruby --require mail\r\nirb> Mail.defaults { delivery_method :smtp, address: \"localhost\", port: 1025 }\r\nirb> Mail.new(to: \"foo@example.com\", from: \"bar@example.com\", subject: \"H\u00e9llo\", body: \"H\u00e9llo\").deliver\r\nNon US-ASCII detected and no charset defined.\r\nDefaulting to UTF-8, set your own if this is incorrect.\r\n=> #<Mail::Message:70286438842840, Multipart: false, Headers: <Date: Sat, 10 Dec 2016 22:03:55 +1100>, <From: bar@example.com>, <To: foo@example.com>, <Message-ID: <584be11b4fedf_f54e3fecd483f9b8284c8@Bumblebee.local.mail>>, <Subject: H\u00e9llo>, <Mime-Version: 1.0>, <Content-Type: text/plain>, <Content-Transfer-Encoding: base64>>\r\n```\r\n\r\nAnd the message body it sent:\r\n\r\n```http\r\nDate: Sat, 10 Dec 2016 22:03:55 +1100\r\nFrom: bar@example.com\r\nTo: foo@example.com\r\nMessage-ID: <584be11b4fedf_f54e3fecd483f9b8284c8@Bumblebee.local.mail>\r\nSubject: =?UTF-8?Q?H=C3=A9llo?=\r\nMime-Version: 1.0\r\nContent-Type: text/plain;\r\n charset=UTF-8\r\nContent-Transfer-Encoding: base64\r\n\r\nSMOpbGxv\r\n```\r\n\r\nThis also works:\r\n\r\n```http\r\nDate: Sat, 10 Dec 2016 22:03:55 +1100\r\nFrom: bar@example.com\r\nTo: foo@example.com\r\nMessage-ID: <584be11b4fedf_f54e3fecd483f9b8284c8@Bumblebee.local.mail>\r\nSubject: =?UTF-8?Q?H=C3=A9llo?=\r\nMime-Version: 1.0\r\nContent-Type: text/plain;\r\n charset=UTF-8\r\n\r\nH\u00e9llo\r\n```\r\n\r\nPerhaps you are missing a charset in your mail header?. I'm going to close this for now. If somebody has an issue with character encodings in mailcatcher please provide the full message body (with headers and mime) along with the errors it is triggering as a new issue.. Please upgrade rubygems:\n\n```\ngem update --system\n```\n. What about if the \"Clear\" button confirms the first time after page load, then just works silently from that point on?\r\n\r\nYour second suggestion I think would be covered by #266. I don't wish to constrict folks using newer ruby from running later versions of these gems. They might solve other issues and bugs.\r\n\r\nIt is an unfortunate caveat of rubygems that it doesn't consider ruby version compatibility when resolving dependencies. You can force it to by installing a compatible version of mime-types explicitly first, then mailcatcher:\r\n\r\n```\r\ngem install mime-types --version \"< 3\"\r\ngem install --conservative mailcatcher\r\n```. I'm sorry that you see a fix for your specific situation which you think should be applied here, but I do not believe it is an improvement for the whole.\r\n\r\nMailCatcher works on the latest Ruby with the latest mail and mime-type gems, and that's the way I recommend running it. The dependencies are open because it should work with future versions, given mail follows semantic versioning. The mail gem's message parsing and compatibility is always improving, so using the latest version is not an imagined improvement, but a real one.\r\n\r\nIf you want or need to constrict your ruby version to 1.9, I've made sure MailCatcher itself works with 1.9 and its dependencies have versions which are available there. How those dependencies are installed might be trickier, but there is a way to make it work.. Yes, please remove the gem from your gemfile and install with rubygems and run directly instead.. Sorry, I have no idea why this happens! Maybe you need to recompile your rbenv ruby? If you can figure it out and would like to contribute it would be most welcome.. You could also try: `gem pristine eventmachine`\r\n\r\nThis seems like a environment issue, closing without further details.. Because bumping minor versions of eventmachine breaks a lot of stuff, historically.\r\n\r\nI'll try out 1.2.1 some time and bump it if nothing breaks.. Thanks for the contribution!\r\n\r\nI don't want to allow all origins at everything all the time for everybody because it's a potential security hole. MailCatcher runs on a known port, so if I can get a visitor to come to a malicious page where I control javascript and probe port 1080 then I can start controlling your MailCatcher instance, and potentially probe for and exploit vulnerabilities.\r\n\r\nMaybe if it were opt-in?. Nice idea!. Ah, I can replicate this! But I had to netcat to mailcatcher directly to perform an SMTP exchange and paste your exact mail message:\r\n\r\n```\r\n$ nc localhost 1025\r\nEHLO localhost\r\n250-Ok EventMachine SMTP Server\r\n250-NO-SOLICITING\r\n250 SIZE 20000000\r\nMAIL FROM:<hidden@email.com>\r\n250 Ok\r\nRCPT TO:<hidden@email.com>\r\n250 Ok\r\nDATA\r\n354 Send it\r\nFrom: =?UTF-8?B?Q29tcHRhYmlsaXTDqSBPcm1pZWw=?= <hidden@email.com>\r\nTo: Name <hidden@email.com>\r\nDate: Thu, 29 Dec 2016 08:38:30 +0000\r\nMessage-ID: <43670e26007741bdbc30af51fb06d641@compta.local.phea.fr>\r\nSubject: [Ormiel] =?UTF-8?B?UsOpaW5pdGlhbGlzYXRpb24gZHUgbW90IGRlIHBhc3Nl?=\r\nMIME-Version: 1.0\r\nContent-Type: text/html; charset=UTF-8\r\nContent-Transfer-Encoding: 8bit\r\n\r\n<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01//EN\">\r\n<html>\r\n<head>\r\n    <title>Email/html</title>\r\n</head>\r\n<body>\r\n    <p>Bonjour Olivier,</p>\r\n\r\n<p>Vous avez demand\u00e9 un nouveau mot de passe pour le site Comptabilit\u00e9.</p>\r\n<p>Si vous n'avez pas fait cette demande, ignorez cette email.</p>\r\n<br>\r\n<p>Si vous souhaitez un nouveau mot de passe, cliquez sur le lien ci-dessous</p>\r\n<p><a href=\"http://compta.local.phea.fr/auth/renew/8d6a9c93\">Je r\u00e9initialise mon mot de passe</a></p>\r\n</body>\r\n</html>\r\n.\r\n250 Message accepted\r\nQUIT\r\n221 Ok\r\n```\r\n\r\nThe message is received and stored, but then I get the error you quote from the thread sending the websocket message:\r\n\r\n```\r\nException: \"\\xC3\" from ASCII-8BIT to UTF-8\r\n```\r\n\r\nThis is because Eventmachine's SMTP server has just read the message as a bunch of bytes and marked it as \"ASCII\" encoded (which is the correct default SMTP network encoding), stored it as such, and when we actually try to *use* the message for presentation it attempts to convert it to the JSON-compatible UTF-8 encoding, but it has invalid ASCII characters.\r\n\r\nIt took me a little while to figure this out: `Content-Transfer-Encoding: 8bit` is an [SMTP extension](https://tools.ietf.org/html/rfc6152). Eventmachine's SMTP server does not support it, and should be throwing an error earlier in the exchange. Your Mail/SMTP library is submitted an 8-bit encoded message to an SMTP server that is not advertising 8-bit compatibility. It should be formatting as quoted-printable or similar. Running this message through catchmail (which uses the mail gem which sanitizes quite a lot and respects SMTP capabilities) actually changes it to something the SMTP server supports:\r\n\r\n```\r\nDate: Thu, 29 Dec 2016 08:38:30 +0000\r\nFrom: =?UTF-8?B?Q29tcHRhYmlsaXTDqSBPcm1pZWw=?= <hidden@email.com>\r\nTo: Name <hidden@email.com>\r\nMessage-ID: <43670e26007741bdbc30af51fb06d641@compta.local.phea.fr>\r\nSubject: =?UTF-8?Q?[Ormiel]_R=C3=A9initialisation_du_mot_de_passe?=\r\nMime-Version: 1.0\r\nContent-Type: text/html;\r\n charset=UTF-8\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01//EN\">\r\n<html>\r\n<head>\r\n    <title>Email/html</title>\r\n</head>\r\n<body>\r\n    <p>Bonjour Olivier,</p>\r\n\r\n<p>Vous avez demand=C3=A9 un nouveau mot de passe pour le site Comptabili=\r\nt=C3=A9.</p>\r\n<p>Si vous n'avez pas fait cette demande, ignorez cette email.</p>\r\n<br>\r\n<p>Si vous souhaitez un nouveau mot de passe, cliquez sur le lien ci-dess=\r\nous</p>\r\n<p><a href=3D\"http://compta.local.phea.fr/auth/renew/8d6a9c93\">Je r=C3=A9=\r\ninitialise mon mot de passe</a></p>\r\n</body>\r\n</html>\r\n```\r\n\r\nBut the message content is exactly the same.\r\n\r\nIf you'd like to fix the SMTP server in Eventmachine to support 8-bit transfer encoding implicitly (which is kinda incorrect but lenient) then this might go away?. UTF-8 is not valid over the wire for SMTP unless the mail server advertises 8-bit encoding, which MailCatcher does not. If you a receiving errors here then I'm afraid you or your mail library is not correctly encoding your sent email and you should probably make sure that is fixed so your mail is received correctly.. @thebarty please re-open or file another issue if the latest version of mailcatcher and the above fix aren't working for you.. UTF-8 is not valid over the wire for SMTP unless the mail server advertises 8-bit encoding, which MailCatcher does not. If you a receiving errors here then I'm afraid you or your mail library is not correctly encoding your sent email and you should probably make sure that is fixed so your mail is received correctly.. See https://github.com/sj26/mailcatcher/issues/277#issuecomment-209154903. Hi @koalabear974, I don't have a Windows system to get this running myself but if you want to contribute a patch it would be most welcome! Otherwise I'm afraid I'm unable to fix this and will close.. UTF-8 is not valid over the wire for SMTP unless the mail server advertises 8-bit encoding, which MailCatcher does not. If you a receiving errors here then I'm afraid you or your mail library is not correctly encoding your sent email.. SMTP is by default a 7-bit protocol:\r\n\r\nhttps://tools.ietf.org/html/rfc821#page-3\r\n\r\nSo bodies containing bytes which require the high bit set must be encoded in some other form, usually quoted printable. The mail gem (used within rails) should probably be doing this for you transparently.\r\n\r\nSMTP was only extended later to 8-bit by [RFC5321](https://tools.ietf.org/html/rfc5321) and then only when the server advertises a `8BITMIME` capability which MailCatcher does not. . The `message[\"source\"]` is not decoded, it should be the literal SMTP transmitted message body which should be 7-bit ascii (which is valid utf-8). If you're getting an encoding error here then the message wasn't encoded properly and isn't a clean 7-bit subset of utf-8, so forcing it to be utf-8 by replacing bad characters is going to munge the source and lie about your message over json.. The only decoded part is that lines with double periods would be replaced with single periods.. The real solve here would be to make sure that the message source when received via SMTP contains only valid 7-bit bytes and raise the error earlier with clearer instructions on how to fix it in the sender.. (or just rewrite the whole smtp server and build in 8bit mime support supporting first-class encodings and again raising errors earlier in the smtp exchange when invalid content is supplied.). That's a very old version of sqlite3 ([over 10 years!](https://www.sqlite.org/chronology.html)). Sounds like the [sqlite3 gem](https://github.com/sparklemotion/sqlite3-ruby) isn't going to work with that version (\"Note that this module is only compatible with SQLite 3.6.16 or newer\"). Perhaps try upgrading it?. @tesmond you can try installing an earlier version, but it may not be easy to resolve all the interdependencies (ymmv).\r\n\r\nIt looks like https://github.com/sparklemotion/sqlite3-ruby/commit/f87fc04932d56c8d8f51706e511ef16bd5f0b253 documented the dependency corresponding to the v1.3.5 tag. Maybe try v1.3.4:\r\n\r\n```\r\n$ gem install sqlite3 -v 1.3.4\r\n```\r\n\r\nThen try installing mailcatcher again conservatively, it should work with any 1.3 version of the sqlite3 gem:\r\n\r\n```\r\n$ gem install mailcatcher --conservative\r\n```. Given there's been no activity here for a while I'll close this one.. Weird! Do you have any browser extensions installed?. Ah, `lprequeststart`, `lprequestend` and `lpsubmit` are solid hints \u2014 it's LastPass.. I'm not sure, sorry, but this seems like a LastPass bug. Maybe you can exclude MailCatcher from within LastPass? . This looks like a bug in LastPass (see #331).. Sorry, I don't know or use PHP. \ud83d\ude05 Can you copy the full source of the message from the _Source_ tab and paste it here?. Ah, so email headers finish and the body begins at the first double newline. So your headers are finishing at:\r\n\r\n```\r\nReply-To: mysite \r\n```\r\n\r\nSo the MIME and content-type headers are being seen as part of the body, so ignored. Perhaps you need to take a look at how you're calling the PHP mail function, or how you're appending those headers?. Both have open compatibility issues and subtly break skinny and mailcatcher unfortunately.\r\n\r\nIf somebody wants to do an upgrade and fix the compatibility in a PR that'd be great! I'm more inclined to semi-rewrite MailCatcher eschewing the C extensions for something a bit more portable with completely vendored gems, though. I had a wip a while back. I'm on a plane later today, might give it a crack.. (Also note that MailCatcher works fine in ruby 2.4, just issues warnings.). Puma doesn\u2019t use eventmachine so doesn\u2019t fit in event loop for smtp and websockets.. MailCatcher does not have an IMAP interface.\r\n\r\nYou might try using [the API](https://github.com/sj26/mailcatcher#api), though.. The _From_ is the `FROM` address supplied when the mail is sent via SMTP, not the value from the RFC822 `From` header (but the address component is usually the same if your mail-sending library is working correctly). If you want to double-check the From header take a look inside the `Source` tab. :-). Hi @samdjstevens! Sadly that sounds like it might be your script or mail library might be buffering the messages somehow. MailCatcher should display messages as soon as they are received over the SMTP connection.\r\n\r\nDo you have an example I can run to replicate the problem?. Ah, glad you got it sorted out! :-). I'd love to do this! But I have no idea how.\r\n\r\nI tried a while ago to offer integration with a service that did this, but then they wanted lots of money and this is an open source tool. Something like Litmus would be cool. But they're all paid services which require integration keys and things.\r\n\r\nThe best I could figure out was to offer a _Download_ button and let folks upload to their email testing service of choice.\r\n\r\nI'm going to close this for now, because I don't think we can do anything more, but if you think of a way to do this please comment further!. Does the current docker image not work for you?\r\n\r\n```\r\n$ docker run sj26/mailcatcher\r\nStarting MailCatcher\r\n==> smtp://0.0.0.0:1025\r\n==> http://0.0.0.0:1080\r\n```. Also, `gem install mailcatcher` should not be installing selenium, that's a dev-only dependency:\r\n\r\n```\r\n$ docker build .\r\nSending build context to Docker daemon 25.11 MB\r\nStep 1/7 : FROM ruby:2.4\r\n ---> 68de654ed5ee\r\nStep 2/7 : MAINTAINER Samuel Cochran <sj26@sj26.com>\r\n ---> Running in 00b0da31dc31\r\n ---> 01fd9d897cea\r\nRemoving intermediate container 00b0da31dc31\r\nStep 3/7 : RUN gem install mailcatcher\r\n ---> Running in 1802f2c92402\r\nBuilding native extensions.  This could take a while...\r\nSuccessfully installed eventmachine-1.0.9.1\r\nSuccessfully installed mime-types-data-3.2016.0521\r\nSuccessfully installed mime-types-3.1\r\nSuccessfully installed mail-2.6.6\r\nSuccessfully installed rack-1.6.8\r\nSuccessfully installed tilt-2.0.7\r\nSuccessfully installed rack-protection-1.5.3\r\nSuccessfully installed sinatra-1.4.8\r\nBuilding native extensions.  This could take a while...\r\nSuccessfully installed sqlite3-1.3.13\r\nSuccessfully installed daemons-1.2.4\r\nBuilding native extensions.  This could take a while...\r\nSuccessfully installed thin-1.5.1\r\nSuccessfully installed skinny-0.2.4\r\nSuccessfully installed mailcatcher-0.6.5\r\n13 gems installed\r\n ---> f92d6cc5c1bb\r\nRemoving intermediate container 1802f2c92402\r\nStep 4/7 : EXPOSE 1025\r\n ---> Running in 387c9799668a\r\n ---> 1ca36241b522\r\nRemoving intermediate container 387c9799668a\r\nStep 5/7 : EXPOSE 1080\r\n ---> Running in 52c8fd07114f\r\n ---> f82f2eb6c4eb\r\nRemoving intermediate container 52c8fd07114f\r\nStep 6/7 : ENTRYPOINT mailcatcher -f\r\n ---> Running in 1d03aa53d9f2\r\n ---> cd73300aeed0\r\nRemoving intermediate container 1d03aa53d9f2\r\nStep 7/7 : CMD --ip 0.0.0.0\r\n ---> Running in 17f5300e0244\r\n ---> c2a48b773a44\r\nRemoving intermediate container 17f5300e0244\r\nSuccessfully built c2a48b773a44\r\n```. Note that the split between CMD and ENTRYPOINT is designed so that you can `docker run sj26/mailcatcher` and it works fine, or you can override the arguments for more control like `docker run sj26/mailcatcher --ip 127.0.0.1`. Again, this seems to be working fine for me locally:\r\n\r\n```\r\n$ docker run sj26/mailcatcher --ip 127.0.0.1\r\nStarting MailCatcher\r\n==> smtp://127.0.0.1:1025\r\n==> http://127.0.0.1:1080\r\n```. I'm curious why it's not working for you, but afaik this is all working as intended, so I'll close this. Sounds like you've got a solve for you problem: using a forked Dockerfile. Thanks. :-). Latest thin breaks websockets. Can't merge.. I don't think the gems are even compatible here, I'm afraid. We've already tried this in #226.. Sadly there is no way to know. The underlying error message is:\r\n\r\n```\r\n#<RuntimeError: no acceptor (port is in use or requires root privileges)>\r\n```\r\n\r\nIf you can figure it out then patches are welcomed! :-). Mailcatcher is locked to a particular version of eventmachine because it tends to break very easily. Unfortunately rubygems doesn't seem to respect intergem dependencies very well so the wrong versions are often activated. :-(. Your solution here is the correct solution, for now:\r\n\r\n```\r\n$ gem uninstall eventmachine\r\n$ gem install eventmachine -v 1.0.9.1\r\n```\r\n\r\nLonger term this should be solved by #298. mailcatcher 0.6.5 runs just fine for me on macOS 10.12.6 using Ruby 2.4.1. Support for macOS and 2.4.x are fine.\r\n\r\nCould you please elaborate on \"The web portal won't load properly\" - what exactly does this mean \u2014\u00a0nothing loads at all? no messages are shown? the connection is interrupted?\r\n\r\nWhat version of macOS are you running? High Sierra has known problems with programs which daemonise, which MailCatcher does. Try running `mailcatcher --foreground` on High Sierra and see if that helps.\r\n\r\nIt does look like MailCatcher is failing to listen to the ports correctly or daemonise somehow.. Have you reinstalled ruby or something recently? It looks like your installed version of thin can't talk to your installed version of ruby.\r\n\r\nTry:\r\n\r\n```\r\ngem pristine --all\r\n```. Oh dear, that's no good \u2014 sorry!\r\n\r\nDo you have a full message body which when sent to MailCatcher triggers this behaviour? I need to reproduce it to fix it. :-). Hey Michael,\n\nThat's just what I was planning! I've cherry-picked your changes a little to keep the bundle config out of the gem.\n\nThanks!\n. That's cool, I had meant to pop one in -- have done so now. Thanks!\n. Thanks for your interest!\n\nIt sounds like whatever you're using to send mail is doing some funky things with the protocol. You should only be sending a single \"MAIL\" command which includes the from address, then you can send as many \"RCPT TO\" commands as you like to add multiple unique senders. MailCatcher should handle that fine. Maybe check out the [SMTP RFC](http://tools.ietf.org/html/rfc2821) for details.\n. Glad you've found a solution.\n\nI don't want to build a workaround into MailCatcher for broken clients, perhaps you can patch SwiftMailer? In the meantime you know how to get it working. :-)\n. @pjb3 you can certainly send multiple MAIL commands, but it [should reset the state of the SMTP exchange](http://tools.ietf.org/html/rfc2821#section-4.1.1.2). The SwiftMailer client was sending multiple MAIL commands for a single message.\n\nYour issue is slightly different\u2014you should indeed be able to send multiple messages sequentially over the same connection. MailCatcher is set up to do so, the problem is in eventmachine. A repeat MAIL command should reset the state instead of the [current error-out behaviour](https://github.com/eventmachine/eventmachine/blob/v0.12.10/lib/em/protocols/smtpserver.rb#L354). They haven't fixed it [in master](https://github.com/eventmachine/eventmachine/blob/master/lib/em/protocols/smtpserver.rb#L447) either. Send a pull request! Should be simple to slice the state array and send a receive_reset, which should have the same semantic value.\n. Ah, it looks like daemonizing is a bit broken on Windows under Ruby 1.8.7.\n\nPlease run `mailcatcher --foreground` for now until I can release a workaround. :-)\n. @kimptoc, yeah looks like 1.8.7 has slightly different precedence rules and had a problem with the windows fix.\n\nI've tested on all the rubies I have now and it seems fine. 0.4.2! -.-\n. Thanks for the pull request but these things have already been resolved on master and in the latest MailCatcher gem. Please grab the latest gem or pull master on your git repo if you're still encountering issues on your end. Let me know if there are still problems!\n. Merged in 55790a91a41eb3db316217717364def1dc56bf05, thanks!\n. Could you please confirm this? It works fine for me in Chrome 12.0.742.112.\n. What about adding an accurate last-modified? This was always my intention.\n\nOn 11/06/2011, at 4:18 AM, pnc wrote:\n\n> Add HTML5 shim script so the app renders in IE8.\n> \n> Set an expires header for non-Websocket requests. This prevents IE8 from only loading the message JSON the first time the page loads and getting a 304 Not Modified thereafter.\n> \n> ## \n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/sj26/mailcatcher/pull/10\n. Closing due to inactivity. Will integrate new HTML5 shim at some point.\n. Okay, I've merged in something similar which also copes with (improbably) blank sender and recipient fields also. Thanks!\n\nAlso added guard gems in Gemfile and modified Guardfile to use compass instead of sass so stylesheets are regenerated properly. Apologies, the public development process was a bit crufty. :-/\n. Hmm? Where does it asplode? I don't directly require growl anywhere... if it asplodes for you it's a guard bug, or you need to bundle!\n. I was just about to suggest `--help`. :-)\n. Can you run the second command in Terminal? Do you have [growlnotify](http://growl.info/extras.php) installed? (It's normally inside the Growl installation DMG, just not installed by default.)\n\nYou shouldn't need to explicitly turn on Growl. If you are on OS X and have growlnotify installed, MailCatcher will detect it. The switch is there mainly as a guide and gives instructions on how to get it working.\n. Awesome! MailCatcher primarily deals with SMTP, so we're not listing the \"To\" field, but rather the recipients which includes CC and BCC addresses. Perhaps the message view should actually display the \"To\" and \"Cc\" fields? You won't be able to display BCC because these aren't listed in the message itself and will only be present as recipients on the SMTP side of things. Or maybe you can extrapolate who's BCC'd by doing a set exclusion?\n. Closing this; To/Cc/Bcc is actually irrelevant, recipients (\"To\" in the web interface) is a list of all recipients targeted via SMTP.\n. It lists all recipients that the application is sending to via SMTP. Keep in mind the SMTP server doesn't know the difference\u2014they are all just recipients. Perhaps I should rename the \"To\" field to \"Recipients\" and add a note or something.\n\nYour application or the library you're using to send SMTP messages should be turning your \"To\", \"Cc\" and \"Bcc\" fields into a list of recipients that are all addressed via SMTP.\n\ntl;dr: yes.\n. As above, cc and bcc fields are displayed when you view an email. This is already implemented.\n. BCC addresses should never appear in an email's message source, they are _Blind_ Carbon Copy addresses so you don't want to reveal them in the message.\r\n\r\nTo, CC, and BCC addresses do currently appear in the \"To\" recipients list in the MailCatcher interface. Although MailCatcher doesn't look in your message to find these, this is the list of addresses that your SMTP client has asked the message be delivered to. The \"To\" list is exactly the email addresses that your message will be delivered to.. Nice, thanks!\n. Yeah, I usually take those as read but should probably indeed be listed as gem deps. Thanks!\n. Nice one, cheers!\n. MailCatcher is not designed to be used inside rails but rather alongside. Use `gem install mailcatcher` and run with `mailcatcher`, do not include mailcatcher in your rails project's `Gemfile`.\n. Thanks Gregor, missed that one. I've been living in 1.9 land recently. :-)\n. Doable! Patches are very welcome. Otherwise I'll take a look when I get the chance.\n. Thanks!\n. Thanks! This is exactly what I was after. Fiddled with it a bit, will be in 0.5.5.\n. Thanks to #26 we can now display the fractal analysis in pretty HTML, so no need to pretty-print machine formats.\n. Great idea, I'll do so when I can. Pull requests are also welcome!\n. Offset change merged, made sure only valid dates are adjusted.\n\nThanks!\n. Perhaps the delivery methods are being stubbed out or you are using some test helpers preventing actual delivery of mail? Keep in mind that MailCatcher is just an SMTP server so as long as mail delivery is configured properly in your application it should work.\n\nWe use mailcatcher from rspec tests all the time and it works great. :-)\n. Thanks!\n. I'm not bumping the dependency until 1.0 is released, but I'll leave this issue open until this happens.\n\nFeel free to grab the source, test and post resutls! I don't use Windows.\n. No worries. :-)\n. Unfortunate that EventMachine hasn't released a stable release since 2009. :-(\n\nMaybe I should just bump the requirement...\n. Can you please check you're running the very latest versions of mail catcher and eventmachine? This shoul have been fixed by a couple of patches and their reaching 1.0.\n. I'm using [box-sizing](https://github.com/sj26/mailcatcher/blob/master/public/stylesheets/application.sass#L239) to size the iframe because traditional methods are not fun. Doesn't look like compass thinks opera supports this, I'll have a play when I get a chance to see if it does these days.\n\nI'm also happy to accept cross-browser patches.\n. Hi there!\n\nApart from the websocket hole, I'm not keen on adding authentication support explicitly to the project. I'd like to keep the application itself simple, and it's intended to be run by a developer on a single machine.\n\nI'd suggest firewalling and proxying the application (with something websocket enabled like Pound) if you have such a requirement.\n\nAn alternative would be to customise the MailCatcher startup script a little and insert your own authentication middleware into the stack, pretty sure Rack provides some standard some-such which should work.\n. Yeah, Debian's ruby scene is pretty broken. Check out http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/.\n. Ruby is an interesting thing on Ubuntu/Debian. You're probably better off installing some sort of ruby from scratch instead of using the apt versions. `gem install mailcatcher` should have covered everything.\n. Good catch! Will roll this into the next update.\n\nThat link's not working any more, but I found [the which_s function](https://github.com/mxcl/homebrew/blob/0dd5ad5360522e8fed294fc35b9364f4cce89546/Library/Homebrew/utils.rb#L151) which seems to be what you describe.\n. I like this idea!\n. Sorry yes, closed.\n. This sounds like a great addition! I'll take a look tonight.\n. Sorry I didn't get around to this yet. I think it underlies some things I wanted to investigate for notifications in general. Mountain Lion's UserNotificationCenter should be supported, and Growl support should be more comprehensive with clickbacks. Doing something on Windows would be cool, also. This is getting high on my TODO list, will keep you posted.\n. Possible that Firefox's websockets have become incompatible, I'll look into it.\n. Sorry this took a while, finally got a chance to check it out. Fixed in 0.5.7.2.\n. Hmm, I disagree about the difficulty of opening the URL\u2014especially with iTerm (try a command+click)\u2014but I like the idea in general. I don't like the inclusion of launchy, that has become very unwieldy where a simple `open`/`start /b` works fine. Let me see what I can do.\n. This looks awesome!\n. Sorry, this one slipped my mind! Will merge.\n. Please don't include mailcatcher in your Gemfile, it is a standalone application with it's own dependency set.\n\nThese changes would break forwards compatibility.\n\nMailcatcher should be installed as a separate gem (`gem install mailcatcher`) which is simply run as `mailcatcher`.\n\nGlad you're enjoying it, though! :-)\n. I don't understand why you'd use MailCatcher for automated testing? ActionMailer will store your deliveries locally in testing anyway in a way that makes it easy to run assertions.\n\nCheck the rails guide: http://guides.rubyonrails.org/action_mailer_basics.html#mailer-testing\n\nIf you have a more complex scenario I'd love to know how and why you're using MailCatcher, maybe we can make it easier!\n. You can assert the correctness of css selectors the same as you would asset the html structure and applied css of your normal page views, if that's what you actually want to test. Take a look at [email_spec](https://github.com/bmabey/email-spec) for instance which adds some more comprehensive introspection abilities for email bodies.\n\nIf you want to test the look and feel of your application I suspect you're trying to QA and you might like to consider something like [mail_view](https://github.com/37signals/mail_view) which lets you render each email without having to trigger it's generation and sending. You still need someone looking at the rendered emails and checking off a list.\n. If you want to use MailCatcher as the tool to enable this workflow please feel free, but in the same way you wouldn't put apache, nginx, passenger, pow, mysql, postgresql, etc in your Gemfile, you shouldn't put mailcatcher in there either.\n. Haha, yeah I'd rock that Gemfile hard.\n\nmail_view is probably better for a devsignment workflow.\n. Please don't include mailcatcher in your Gemfile, it is a standalone application with it's own dependency set.\n\nMailcatcher should be installed as a separate gem (`gem install mailcatcher`) which is simply run as `mailcatcher`.\n. I don't really want to tie into Rails at all, there are projects like `mail_view` for that... but I will definitely add something to the README. Thanks!\n. I don't think this is the responsibility of a process. Your process management tools should be able to monitor a started process' ID. I run mailcatcher using `launchd` on Mac OS X and using `upstart` on Ubuntu, both of which are capable of tracking (and maintaining, and stopping) a process in this manner.\n\nIf you don't want mailcatcher to go into the background use `--foreground`.\n\nIf you absolutely want to background the process and keep the pid, consider using something like [`start-stop-daemon`](http://man.he.net/man8/start-stop-daemon) to write out a pid file.\n. @pylebecq the initial line you posted should be sufficient, as long as your ruby environment is set up correctly. I suspect it will be an issue with how your ruby is installed and where you mailcatcher gem is installed. Could you open a new issue with full information with your ruby setup, where the gem is installed, and your full upstart config?\n. Quite right, I always forget how nerfed popen and friends were on 1.8.7. I'll update it to use open3 instead and re-release.\n. Fixed in [v0.5.7.1](https://rubygems.org/gems/mailcatcher/versions/0.5.7.1).\n. I'm having trouble replicating this issue. This is working fine on my machine:\n\n``` sh\n$ irb -r mail_catcher\nirb> MailCatcher::Mail.add_message <your gisted message hash>\n=> nil\nirb> MailCatcher::Mail.messages\n=> [{\"id\"=>1, \"sender\"=>\"...\", \"recipients\"=>[\"...\"], \"subject\"=>\"...\", \"size\"=>\"...\", \"created_at\"=>...}]\n```\n\nWhat version of ruby and sqlite3 are you using? Perhaps it's something in there. The exception is unforunately not very descriptive, and googling reveals it's fairly generic, but usually it means the database is missing. Considering this is an in-memory database it should never be missing. :-/\n\nOn my machine:\n\n``` sh\n$ ruby -v\nruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.3.0]\n```\n\n``` sh\n$ sqlite3 --version\n3.7.10 2012-01-16 13:28:40 ebd01a8deffb5024a5d7494eef800d2366d97204\n```\n. Mailcatcher is not multithreaded, there is a single reactor thread in EventMachine (afaict).\n\nIf you can provide a script replicating the issue I'll happily reopen and investigate.\n. Hi! Could you please confirm the version of mailcatcher you're running? The latest version is 0.5.7.2:\n\n``` console\n$ mailcatcher --version\nmailcatcher 0.5.7.2\n```\n. Ugh, _again_? I'll take a look. :-(\n. Looks like WebKit got stricter about websocket client protocols. Fixed in 0.5.8.\n. This is the sort of thing I expect `EventMachine::Protocols::SmtpServer` to take care of, but apparently it doesn't. Fixed in 20cf6e98f1362be06db9b3d83e758ca3af5df8a2, but I'm going to sit on the next version for a little while, but will be fixed for 0.5.9.\n. Mailcatcher binds to the local interface because the default use case is a developer running it on their local machine to test against and they only need local access. Binding to all interfaces could be a security issue for the default use case. Anybody with HTTP access to mailcatcher can clear all mail or quit. Mailcatcher also isn't hardened so running a public service by default could also expose potential attack vectors.\n\nThere is, however, an option to change the bind IP for just such cases as running a staging box:\n\n```\nmailcatcher --http-ip=0.0.0.0\n```\n\nThanks. :-)\n. Ah, that's weird. Looks like I accidentally removed it from the gem's manifest. Fixed in 5f05ea0d5d813e25c04f42f57e19e581dbb81df6.\n. Great idea, not sure how comfortable I am with the gmail integration. I'd be more inclined to just act like a first-class SMTP server, however that raises problems via ISPs. Also want the deliveree's address to be changeable in the web interface.\n. They finally released 1.0! Awesome, I've bumped requirements in skinny v0.2.2 and mailcatcher v0.5.9.\n. Ah, yes... more complex resolution would realise that skinny 0.2.2 is available and sates eventmachine ~> 1.0.0, but perhaps I'm assuming rubygems is smarter than it really is. Bundler certainly had no trouble, but it tends to be more considerate.\n\nI'll add a proper spermy requirement.\n. These dependencies have been tightened in 0.5.10 and shouldn't be a problem. Thanks, and let me know how you go!\n. This should be fixed by the referenced commit. Let me know if it's still breaking!\n. Hey guys, sorry about this, I haven't had a chance to look at it and have been [super busy](https://twitter.com/sj26/status/249383976572174336), but I'll take a look tonight. Looks like something subtle inside EventMachine has changed and broken the WebSocket support.\n. Okay, so I finally got to look at this. It's introduced by [this commit](https://github.com/eventmachine/eventmachine/commit/6d1cdc534fe36317b4dad766ae6122308be489cd) in eventmachine. I've added a workaround in skinny and the new versions should be out now. `gem install mailcatcher -v 0.5.10`\n. Hi! Looks like you've found something kinda gnarly. Can you attach the actual message? Or email it to me if it's sensitive. I need the full message with all parts including headers. <3\n. Without the message I can't investigate this issue, closing.\n. I'd like some specs as well, but given some major changes in the wings there doesn't seem to be much point specing at this point.\n\nWould merge with some acceptance specs for now, they should remain roughly the same.\n. I've taken some tentative steps toward including specs. There are a couple of minispec scenarios which do basic acceptance testing, I'll add more and get it running on Travis soon.\n. The dependencies have been tightened in 0.5.10, please try that. `gem install mailcatcher -v 0.5.10`\n. Could you elaborate on the problems you've been having?\n. Awesome!\n. I kinda have a rewrite in the wings that I was planning to implement this with... I do like the approach but stay tuned.\n. This is a bug introduced by the latest version of eventmachine, and was fixed in the latest version of mailcatcher. :-)\n. Thanks!\n. This is what `catchmail` is for.\n\nTry `bundle exec bin/catchmail examples/multipartmail`\n\nOr, for multiple messages try a shell loop. :-)\n. Nice!\n. Slid by me, but will merge now.\n. Would you be able to provide updated instructions? I no longer use rvm.\n. I've updated the guidelines in 327cd355 after installing RVM on a VM and playing a bit.\n. You don't need to run it with bundler. You've also installed it into an RVM gemset, so you must run it inside that gemset.\n\nTry using rvm-exec:\n\n``` sh\n/var/lib/jenkins/.rvm/bin/rvm-exec @mailcatcher mailcatcher\n```\n\nOr you could create a wrapper per the [README instructions](https://github.com/sj26/mailcatcher#rvm):\n\n``` console\n$ rvm default@mailcatcher --create gem install mailcatcher\n$ rvm wrapper default@mailcatcher --no-prefix mailcatcher catchmail\n```\n\nand use:\n\n``` sh\n/var/lib/jenkins/.rvm/bin/mailcatcher\n```\n\nIf you're running with process management (i.e. supervisord) you'll either have to make sure it follows the daemonization, or pass `--foreground` to mailcatcher.\n. It sounds like an ill-formed message, could you please attach the full source of the message? Feel free to anonymise it a bit if you like, or email it to me directly (as an attachment): sj26@sj26.com\n\nSounds like you might've found a bug in the mail gem. ;-)\n. Hey guys, sorry I've been a bit flat out, I'll take a look tonight and get back to you, but yeah it looks to me like an upstream problem, probably in the mail gem's parsing code.\n. I actually can't replicate this with the example email you supplied.\n\nWhat version of the mail gem are you both using when able to replicate the issue? That might be a clue.\n. Keep in mind mailcatcher runs as a ruby gem, outside of bundler, so it'll use whatever the latest compatible version of the mail gem you have installed is. Perhaps your devs have differing versions of mail? Try updating mail and see what happens.\n. OH okay. Your email doesn't have a Message-ID or part Content-IDs which are required in RFC 2822. Normally the mail gem just generates one for any parts without one, but for some reason it seems to be skipping in your case. How are you constructing this email? Whatever is generating it should be providing a content id.\n\nI think this breaks because mailcatcher use content ids (or CIDs) to load the different parts inside a multipart html and text email. I still can't replicate the failure on my machine. I initially had trouble replicating this because I used the mailcatcher's `catchmail` script which wraps the outgoing email in the mail gem before sending it off which adds content-ids and such required things before it hits mailcatcher:\n\n``` email\nDate: Mon, 07 Jan 2013 21:45:08 -0500\nFrom: General Assembly <course-from@example.com>\nTo: auz1@example.com\nMessage-ID: <50ebb207e14b6_453b3fe1c045c66c366e9@Bumblebee.local.mail>\nSubject: Confirmation for Front End Web Development\nMime-Version: 1.0\nContent-Type: multipart/alternative;\n boundary=\"--==_mimepart_50eb88343c171_57413ffbe1c35ad890373\";\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\n\n\n----==_mimepart_50eb88343c171_57413ffbe1c35ad890373\nDate: Mon, 07 Jan 2013 21:45:08 -0500\nMime-Version: 1.0\nContent-Type: text/plain;\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\nContent-ID: <50ebb207e050e_453b3fe1c045c66c36475@Bumblebee.local.mail>\n\nDear Auz Foo,\n\n...\n```\n\n(see `Content-ID: <50ebb207e050e_453b3fe1c045c66c36475@Bumblebee.local.mail>`)\n\nI've been explicitly writing out an SMTP session with the literal email you've posted, but still no failure.\n\nTry adding `Content-ID` to your source email and see if that fixes the error on your end. If it does, try to track down inside the mail gem why it's not populating content_id on the Part, which part it actually is in the message, etc. Even better, make a failing test case against the mail gem!\n. @thicksoup that's a different issue which I've never seen before. Could you please send me the MailCatcher log output and the full message source you are trying to send?\n. @thicksoup be careful, too, because \"Cannot receive from specified address <...>: Unauthenticated senders not allowed\" is not a message that I can see anywhere in eventmachine's SMTP handling, so you may not even be sending through mailcatcher.\n. @mmrobins without a repeatable trigger we can't really diagnose this. If you come up with a way to repeatedly trigger the error please let me know, but for now I'll close the issue.\n. @amree can you post an example which triggers the error please? Preferably the full source of an email body sent to mailcatcher, and any logs you get from mailcatcher in response.\n. @amree your [config/environments/development.rb](https://github.com/amree/bertukar/blob/master/config/environments/development.rb) does not appear to have the mail catcher config as you describe. If you added it then tried sending mail then you may have forgotten to restart rails. That you are seeing the message text in the rails logs means something in your application is misconfigured.\n. @ekurennyy check the various logs involved\u2014both client and server side.\n. @dounan that sounds like a [mail gem](https://github.com/mikel/mail) bug! It should be aware of the content encoding of the message and use compatible content-id. Maybe you could add an issue?. This is a rails configuration issues really, not a mailcatcher issue, but I'll try to help!\n\nMake sure you've got all of these in `config/environments/test.rb`:\n\n``` ruby\nconfig.action_mailer.perform_delivery = true\nconfig.action_mailer.delivery_method = :smtp\nconfig.action_mailer.smtp_settings = { :address => \"localhost\", :port => 1025 }\n```\n\nAdditionally, check inside your scenarios that mail is actually being sent. If it's not going to mailcatcher it should be going somewhere else, or being logged, or throwing an exception, etc.\n. Then something in your cucumber environment is overriding your mail settings.\n\nIs your cucumber definitely setup to use the \"test\" environment, or is it using the \"cucumber\" environment?\n. No, that's the port capybara uses to serve your web application to the browser.\n\nHonestly it's an environment issue which I can't debug for you without access to your codebase, and is not due to mailcatcher. If you'd like to contact me to have a look at your codebase I'd be happy to, but I'll close this issue.\n. That will not work\u2014websockets will break.\n. You can now [proxy websockets with nginx](http://nginx.org/en/docs/http/websocket.html). Here's a complete example configuration file:\n\nhttps://gist.github.com/sj26/9885403\n. This was fixed in an updated version of mailcatcher. Update and you should be fine.\n. @stefanahman that's a very old version of mailcatcher, please upgrade\n. Just run on different ports and you should be safe.\n\nOn 16/01/2013, at 7:01 PM, attiks notifications@github.com wrote:\n\n> I had a quick look at the code, but I'm not really a Ruby man so I might be wrong, but it looks like it isn't possible to run multiple instances (unless I duplicate the directory). I would be nice if I could specify an instance id on the command line so I could run multiple instances side by side\n> \n> mailcatcher --instance site1 --smtp-ip 127.0.0.1 --smtp-port 1025 --http-ip 0.0.0.0 --http-port 8025\n> mailcatcher --instance site2 --smtp-ip 127.0.0.1 --smtp-port 1025 --http-ip 0.0.0.0 --http-port 8025\n> I'll try to create a PR if this is something that might be added.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. Great point.\n. I'm unable to replicate this on ruby 1.9.3-p374 with foreman 0.61.0 and mailcatcher 0.5.10.\n\nWhat versions of ruby, foreman and mailcatcher are you using? Have you tried editing the mailcatcher gem to add `$stdout.sync = $stderr.sync = true` to confirm this is a solution to your problem?\n. Closed by #121.\n. I have no idea whether haml 12 will be supported, or activesupport 5, or mail 7.\n\nWere I to update mailcatcher to support the newer gems you'd like here, backwards compatibility might be broken, and we'd get issues from others in the same vein complaining that it was working fine with their versions of haml, activesupport, etc. but now they can't get newer versions.\n\nAs always, mailcatcher is an independent gem with its own requirements and you should be doing `gem install mailcatcher` and `mailcatcher` on the command line, or using tools like brew-gem. If you're using it in a project with a team, great, but I'd recommend putting it in the README, not the Gemfile.\n. Sorry, would you mind clarifying this issue?\n. I'm sorry but that's far outside the scope of mailcatcher.\n. Please don't include mailcatcher in your Gemfile, it is a standalone application with it's own dependency set. Mailcatcher should be installed as a separate gem (`gem install mailcatcher`) which is simply run as `mailcatcher`.\n\nTo document a dependency I suggest adding it to your README. :-)\n. I've relaxed the HAML requirement in 6605fc26. The put-it-in-the-Gemfile approach is widespread, so I'll adapt things as requested. Sorry for the trouble.\n. You shouldn't be loading mailcatcher with rails. [Please don't put it in your Gemfile.](http://mailcatcher.me/#bundler)\n\nI probably will upgrade the dependencies at some point when activesupport 4 is released with rails, though not to a prerelease.\n. I've isolated the dependency update in 6605fc26.\n. Nice catch, sorry it took a while for me to notice.\n. Well it needs to run inside EventMachine, and it needs websocket support. What in thin stops it running under jruby?\n. Closing this. We probably won't support jruby explicitly if thin doesn't work. The magic of mailcatcher is that it's a single process doing everything which requires eventmachine, and the easiest way to do web in eventmachine is thin.\n. http://mailcatcher.me/#bundler\n. Foreman is another utility that doesn't really belong in your Gemfile, or at least shouldn't be launched with a bundler binstub. Any ruby subprocess is susceptible to this problem, including things like `hub` and `gh`. Vagrant have had such issues with this that they no longer distribute as a rubygem but as a system installable package.\n\nYou have two options:\n1. Ask bundler to clean the environment before running mailcatcher:\n   \n   ```\n   web: thin ...  \n   mailcatcher: ruby -rbundler/setup -e \"Bundler.clean_exec('mailcatcher', '--foreground')\"  \n   ```\n   \n   (Example in gist: https://gist.github.com/sj26/8f638252ab64b1d0ecbb)\n2. `gem install foreman` and just `foreman` instead of `bundle exec foreman` and `bundle exec ...` or use bundle binstubs (`bin/...`) in your Procfile entries.\n. The point is: MailCatcher is a separate application or system utility, like Postgres or MySQL, not a library like haml or rails.\n. Thanks @rocknruby, I've corrected the typo of `Bundler`. I think the argument was being missed because I had wrapped them in an array, `clean_exec` seems to function like `Kernel#spawn` and wants a splat of args instead, also corrected.\n\nPassing arguments as an list is usually safer and cuts out parsing and subshells. ;-)\n. Do you get HTML when you `curl http://localhost:1080`\u00a0on the vagrant vm?\n\nIf it's a port forwarding issue I have no idea, sorry\u2014I don't use vagrant. Are you absolutely sure your port forwarding is correct, and in the correct direction?\n\nOn Wed, May 1, 2013 at 9:09 AM, Amin Meyghani notifications@github.com\nwrote:\n\n> I have installed the Mailcatcher gem (http://mailcatcher.me/) on my VM managed by Vagrant. And in the Vagrantfile I have set up the forwarding port:\n>     config.vm.forward_port 1080, 1080\n> I ssh to the guest, run the Mailcatcher on the guest, but when I go to: 127.0.0.1:1080 on my host, I don't see the Mailcather interface. All I get is:\n>     No data received.Unable to load the webpage because the server sent no data ...\n> Any ideas?\n> \n> ## Thanks in advance!\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/sj26/mailcatcher/issues/89\n. You could try running mailcatcher using:\n\n``` sh\n$ mailcatcher --ip=0.0.0.0\n```\n\nThis means you can access mailcatcher on your VM host using your VM's ip and port 1080, no vagrant forwarding required.\n. @joeyfrich there is [definitely an ip option](https://github.com/sj26/mailcatcher/blob/eff638f9205fe67359dc23e98e801d90f43beb9a/lib/mail_catcher.rb#L71-L73) so you may be using an old version. Try `gem install mailcatcher` to upgrade.\n. Thanks for the very thorough issue report! I have added a patch to remove mailcatcher's sensitivity to leading periods. I'd swear that EventMachine didn't do this for us at some point, but I couldn't be bothered tracing back into their subversion history.\n\nThanks again, this will be in the next release.\n. Mailcatcher runs on localhost by default. Try using `mailcatcher --ip=0.0.0.0`\n. Looks great, thanks!\n. `mailcacther` will log, so if you want to watch it run with `--foreground`.\n\n`catchmail` is actually what is generating your error, much like sendmail or your LTA would do when running PHP on the server. [RFC 2822 section 3.6.2](http://tools.ietf.org/html/rfc2822#section-3.6.2) requires a From header.\n. Note that the [PHP documentation](http://php.net/manual/en/function.mail.php) also says:\n\n> Note:\n> \n> When sending mail, the mail must contain a From header. This can be set with the additional_headers parameter, or a default can be set in php.ini.\n> \n> Failing to do this will result in an error message similar to Warning: mail(): \"sendmail_from\" not set in php.ini or custom \"From:\" header missing. The From header sets also Return-Path under Windows.\n. Yeah, sendmail on *nix will use the current user and host to generate a From for you, although this is far from correct.\n\nActually, more correct would be adding the `-f` option to catchmail. I've updated the documentation in that direction.\n. Are you including it in your Gemfile? [You shouldn't be](http://mailcatcher.me/#bundler).\n. Great idea!\n\nI think it might be better to simply decorate the plain text view with links, perhaps in javascript land. There's no real detriment. If people want a plaintext copy they can just \"Paste as Plaintext\" or whatever.\n. Great, thanks!\n. No worries, thanks. :smile:\n. Please edit the coffeescript source, not the raw javascript.\n. Sorry, but I don't see any difference in iPad functionality with these changes. Existing MailCatcher seems to work fine.\n. This should have been fixed by 44262f9.\n. I can't replicate this\u2014if you're still having this issue please re-open the issue with some example emails causing the problem.\n. I can't replicate this, the API seems to function as expected for me:\n\n``` sh\n$ bundle exec mailcatcher\n$ curl http://localhost:1080/messages\n[]\n$ bundle exec catchmail examples/multipartmail\n$ curl http://localhost:1080/messages\n[{\"id\":1,\"sender\":\"<me@sj26.com>\",\"recipients\":[\"<blah@blah.com>\"],\"subject\":\"Test Multipart Mail\",\"size\":\"631\",\"created_at\":\"2014-03-31T04:44:07+00:00\"}]\n$ bundle exec catchmail examples/multipartmail\n$ curl http://localhost:1080/messages\n[{\"id\":1,\"sender\":\"<me@sj26.com>\",\"recipients\":[\"<blah@blah.com>\"],\"subject\":\"Test Multipart Mail\",\"size\":\"631\",\"created_at\":\"2014-03-31T04:44:07+00:00\"},{\"id\":2,\"sender\":\"<me@sj26.com>\",\"recipients\":[\"<blah@blah.com>\"],\"subject\":\"Test Multipart Mail\",\"size\":\"631\",\"created_at\":\"2014-03-31T04:44:10+00:00\"}]\n$ curl -XDELETE http://localhost:1080/messages/1\n$ curl http://localhost:1080/messages\n[{\"id\":2,\"sender\":\"<me@sj26.com>\",\"recipients\":[\"<blah@blah.com>\"],\"subject\":\"Test Multipart Mail\",\"size\":\"631\",\"created_at\":\"2014-03-31T04:44:10+00:00\"}]\n$ curl -XDELETE http://localhost:1080/messages/2\n$ curl http://localhost:1080/messages\n[]\n$ curl -XDELETE http://localhost:1080/messages/1\n<html>\n  <body>\n    <h1>No Dice</h1>\n    <p>The message you were looking for does not exist, or doesn't have content of this type.</p>\n  </body>\n</html>\n```\n\nLet me know if you're still having this issue and, if so, see if you can provide a breaking example.\n. Closing; fixed by #110.\n. This breaks the failure scenario.\n. Disagree\u2014I want to be able to exactly replicate a problem with exactly the same gems as another developer, or be able to ask people to install from git to exactly replicate potential issues.\n. They're not going to be up to date now either, I'll do a recompile in a sec.\n. Nice addition.\n. The idea was to make it transparent, so no options should be involved really. My delay on this feature was just researching a nice way to find a platform-dependent location for the database.\n. I would prefer a `--database=URL` argument, using something like sequel, falling back to `ENV.fetch(\"DATABASE_URL\", \"sqlite://:memory:\")`, and with graceful migrations. This would work but would create a new migration path for which I'm not keen.\n. @fdrouet you can already run multiple instances of mailcatcher using different ports, the content just won't survive restarts. :-)\n. @fdrouet you might like to try https://github.com/mailhog/mailhog. It's written in go, has less dependencies and much less memory usage.\n. Thanks!\n. On ubuntu you will need to `sudo apt-get install libsqlite3-dev` first.\n. Have you checked that websockets still work, and that Thin boots correctly within the EventMachine loop? MailCatcher has a tight dependency on [Skinny](https://github.com/sj26/skinny) which heavily integrates with Thin.\n\nAlso, http://mailcatcher.me/#bundler\n. No, and I don't really think it should, although I'd like to know your use case.\n. Ah, that sounds like a simple purpose-built SMTP server might serve you better.\n. Haven't heard from you for a while, going to close this one for now.\n. Thanks!\n. Sorry, I can't replicate this. Could you perhaps attach a test email causing the problem?\n. @sancromeu nice investigation, albeit with frustrating results.\n\nThe whole point of prepared statements is to prepare them once then reuse them with varied bound data. This looks like an upstream bug that I can't really address except to remove an optimisation which should work for everybody.\n\nI'm afraid the resolution here is probably to fix the upstream sqlite package in centos, or recompile it, and these things are outside my control so closing this issue.\n. What browser and version are you using? Is there anything in the debug console?\n. Rubygems takes care of loading a graph of dependencies making sure all versions are compatible. Try running the below:\n\n``` sh\n$ ruby -r mail_catcher -e \"p(Gem.loaded_specs)\"\n{\"eventmachine\"=>#<Gem::Specification:0x3ff6aa44191c eventmachine-1.0.3>, \"haml\"=>#<Gem::Specification:0x3ff6a9c902b8 haml-4.0.5>, \"treetop\"=>#<Gem::Specification:0x3ff6aa058170 treetop-1.4.15>, \"mail\"=>#<Gem::Specification:0x3ff6aa407370 mail-2.5.4>, \"sqlite3\"=>#<Gem::Specification:0x3ff6a9c1629c sqlite3-1.3.8>, \"daemons\"=>#<Gem::Specification:0x3ff6aa44ddc0 daemons-1.1.9>, \"thin\"=>#<Gem::Specification:0x3ff6aa419778 thin-1.5.1>, \"skinny\"=>#<Gem::Specification:0x3ff6a9c1abf8 skinny-0.2.3>, \"mailcatcher\"=>#<Gem::Specification:0x3ff6aa035030 mailcatcher-0.5.12>, \"activesupport\"=>#<Gem::Specification:0x3ff6aa46865c activesupport-3.2.16>, \"i18n\"=>#<Gem::Specification:0x3ff6a9c22e84 i18n-0.6.9>, \"rack\"=>#<Gem::Specification:0x3ff6aa449c48 rack-1.5.2>, \"multi_json\"=>#<Gem::Specification:0x3ff6a9c37168 multi_json-1.8.4>, \"mime-types\"=>#<Gem::Specification:0x3ff6aa019448 mime-types-1.25.1>, \"tilt\"=>#<Gem::Specification:0x3ff6a9c3f0c0 tilt-1.4.1>, \"sinatra\"=>#<Gem::Specification:0x3ff6aa03088c sinatra-1.4.4>, \"rack-protection\"=>#<Gem::Specification:0x3ff6aa421ba8 rack-protection-1.5.2>}\n```\n\nI have tilt version 2.0.0 installed, yet it has correctly selected 1.4.1.\n\nIf you find rubygems is not doing the same for you then I suspect you have a broken ruby/rubygems install. Linux distributions sometimes do silly things with gems. If you find a fix please let me know, but for now this is not a bug in mailcatcher.\n. I still can't reproduce this issue exactly, but it can't hurt. Thanks! :-)\n. MailCatcher lists the SMTP receiver and senders in the list, but displays the mail body's \"To\", \"Cc\" and \"From\" headers when actually viewing an individual message. \"Bcc\" headers are stripped by your mail client/library so cannot appear in MailCatcher, but we still list all the people a message is actually being sent to. Do you have any suggested improvements?\n. This requires mixing the smtp and mail concerns and perhaps inferring too much. We cannot be sure that such recipients were indicated in a bcc field. We can assume, but such an assumption may be incorrect.\n\nI'm inclined to leave it as is, I'm afraid.\n. We should actually just append \"\\r\\n\" to every line as stipulated by the SMTP protocol. I'll take a look.\n. Great! That's why the `-f` flag is suggested for sendmail/catchmail. ^_^\n. Love the idea, but perhaps [favcount](http://chrishunt.co/favcount/) might suit better so that even when tabs get tiny the count can still be read? I've merged your change, fixed a few edge cases, and added favcount on master\u2014see what you think.\n. I love it. This has spurred me to actually complete some changes I had pending to the codebase, then I'll add a \"Transcript\" tab.\n\nAnother thought\u2014what about a failed SMTP session? Should I perhaps be exposing failures as \"messages\"? And what about SMTP sessions which submit multiple messages? Requires further mulling.\n. This is more work than it sounds like, and I'd like to deduplicate the data a little which requires a rethink of the database a little. First, I'd like to update the database itself to use ActiveRecord or something. Will put this on the back burner for now.\n. Thin is locked down because skinny hooks deeply into thin and allowing less strict requirements could have unknown effects.\n\nThe activesupport requirement is less strict and deeply coupled, and has been tested through the 3 series and into 4.0.\n\nIf you'd like to take the time to thoroughly test mailcatcher and, more importantly, skinny with later versions of thin I'd love to see the results and consider loosening the requirement.\n. Make sure you're just running `mailcatcher` and not `bundle exec mailcatcher`, and that you don't have a bundler binstub.\n. Well somehow ruby is loading bundler before running mailcatcher. It might be because of a stray bin stub or a weird environment variable or something.\n\nCan you check and post the output (sanitised if you like) of:\n1. `which mailcatcher`\n2. `env`\n3. Run it from a different directory, perhaps your home directory\n4. Run it in a different terminal\n. Well (1) is your problem. What's bundled_mailcatcher? Looks like something funky in your terminal setup, I've never seen such a thing. You need to follow that rabbit hole. What's `which bundled_mailcatcher` give you, etc?\n. Haven't heard for a couple of days, hope you've tracked down your problem, but as this isn't a MailCatcher issue per se I'll close this issue.\n. The readme already contains:\n\n> Command line options to override the default SMTP/HTTP IP and port settings.\n\nWhich should lead someone to run `mailcatcher --help` which reveals:\n\n```\nUsage: mailcatcher [options]\n        --ip IP                      Set the ip address of both servers\n        --smtp-ip IP                 Set the ip address of the smtp server\n        --smtp-port PORT             Set the port of the smtp server\n        --http-ip IP                 Set the ip address of the http server\n        --http-port PORT             Set the port address of the http server\n        --no-quit                    Don't allow quitting the process\n        --[no-]growl                 Growl to the local machine when a message arrives\n    -f, --foreground                 Run in the foreground\n    -b, --browse                     Open web browser\n    -v, --verbose                    Be more verbose\n    -h, --help                       Display this help information\n```\n\nDo you think there should be more?\n. ```\nsed -ir \"s@;\\?sendmail_path =.*@sendmail_path = \\\"/usr/bin/env $(which mailcatcher) -f local\\@host\\\"@\" /etc/php5/apache2/php.ini\n```\n\nshould be\n\n```\nsed -ir \"s@;\\?sendmail_path =.*@sendmail_path = \\\"/usr/bin/env $(which catchmail) -f local\\@host\\\"@\" /etc/php5/apache2/php.ini\n```\n. No worries, hope it's working for you. :-)\n. The table actually lists the SMTP sender and recipients as per the SMTP exchange, the RFC2822 `Return-Path` header in the actual email is just a way to tell the SMTP client which SMTP sender to use. You can also use the `-f` option to sendmail, for example.\n\nI'm not inclined to change it because the list is meant to reflect exactly where an email claims to come from and where it has been sent in the delivery process. The RFC2822 `From`, `To` and `Cc` headers as they would be displayed in an email client are listed in the message body below the table.\n. Do you have the xcode command line tools installed? Mailcatcher uses a gem which requires a compiler.\n. Please re-open the issue if you're still having issues.\n. Sorry guys, I don't have a windows machine to test this on. If you make any progress it would be great to hear your thoughts. Perhaps eventmachine needs an upgrade?\n. Have you tried this with eventmachine 1.0.4? Anyways, I'm going to close this issue, please reopen it if, with the latest gem versions, you still have the same issue.\n. Have you got any logs from PHP or your web server indicating why it is failing?\n. You'll probably need a wrapper like:\n\nhttp://mailcatcher.me/#rvm\n. Hi kalmanh,\n\nThanks for getting involed, but I've left the 1.8-style hashes on purpose\u2014mailcatcher still works on ruby 1.8.7 and I don't think changing hash syntaxes is enough of an incentive to break that compatibility yet.\n\nThanks though!\n. @der-flo that's not related to this pull request. master mailcatcher now has an asset server for development and precompiles the assets for gem publishing. Put `MAILCATCHER_ENV=development` in your ENV to hook it up.\n. (There's some major work waiting for me to get around to releasing 0.6.0)\n. Holy shit, hi @dirkkelly.\n\nThanks.\n. Agreed, this is going on the list.\n. This is not for HTTP, but for SMTP over TLS and STARTTLS, for testing your mail settings and libraries.\r\n\r\nI agree that reverse proxying from nginx is better for HTTPS, and I wouldn't recommend exposing mailcatcher itself outside a development environment without something else acting as a proxy with authentication. :-). There's some severe asset reworking in the latest master which might not work out of the box. You'll need to pull it locally and run `rake assets` or `export MAILCATCHER_ENV=development`. There will be a release when I can finish the changes.\n. The latest master has a big rework of the asset infrastructure. If you want the assets in a development checkout you'll need to either set an environment variable `MAILCATCHER_ENV=true` or run `rake assets`.\n. Not sure what this is about, but please reopen with issues if you need assistance.\n. You'll need those environment variables set in your PHP process which runs sendmail, or you can edit the `catchmail` shebang to include a `--encoding=utf8`.\n\nPlease reopen the issue if you have further problems.\n. Unfortunately because the versions of ruby vary so greatly in their treatment of encodings and it's rubygems creating the shim, not mailcatcher, there's little we can do from the gem.\n. Actually, I tell a lie. We could set the external encoding inside the script. I'll add a TODO.\n. Do you have any log output? It's probably having trouble locating the proper ruby or gem. Re-open with some output and I'll be happy to help you diagnose.\n. @enrichit if you can post the command you're using and the output you're seeing maybe I can help?\n. Sorry not sure what's going on here. Try upgrading all your gems? SQLite had some strangeness a while back. Please re-open if you're still seeing this issue.\n. Technically, characters outisde the ascii 1-127 range are not permitted unencoded in email messages. This will be causing an error when parsing your message and attempting to send. You will see errors in mail servers if you attempt to send them in the wild. Instead, make sure you're using a mail library which can encode these characters correctly using mime or quoted printable encodings.\n. Closing this, make sure you use `rbenv rehash` or whatever your environment configuration requires to find new gem binstubs. :-)\n. This is a complicated beast. I agree it would be nice to preview what emails might look like in different clients in mailcatcher, but which client? and how? what about compatibility problems between what mailcatcher thinks a client does and what it actually does?\n\nThere are many services that will do this for you, like [MailChimp's inbox inspector](http://mailchimp.com/features/inbox-inspector/), [Campaign Monitor's inbox preview](https://www.campaignmonitor.com/testing/), [Fractal](http://getfractal.com/), etc.\n\nIntegration with these services would be nice, but requires a lot of configuration which I'm not sure needs to be in mailcatcher. If you can think of a good way to do this please let me know!\n. SMTP doesn't natively support UTF-8 over the wire. This message, if transmitted raw, doesn't actually conform to the protocol. Some servers support an SMTP UTF-8 extension, but this must be negotiated with EHLO and mailcatcher doesn't support it.\n\nInstead, your mail client should be encoding your message body with  base64 or similar instead of transferring in straight 8-bit. I suspect the body is actually being munged on read then causing transcoding errors on jsonification. For me, this throws an exception at read time. (Encodings in ruby are awful at the best of times.)\n\nIf I send your raw email body with catchmail then the mail gem picks up the content and correctly encodes it as base64 and it comes out as expected:\n\n```\n{\n  \"id\":3,\n  \"sender\":\"\\u003ctesting@localhost.local\\u003e\",\n  \"recipients\":[\"\\u003creceiver@localhost.local\\u003e\"],\n  \"subject\":\"R\u00e4ksm\u00f6rg\u00e5s!\",\n  \"source\":\"Date: Mon, 18 Aug 2014 17:51:26 +0200\\r\\nFrom: Testing \\u003ctesting@localhost.local\\u003e\\r\\nTo: receiver@localhost.local\\r\\nMessage-ID: \\u003c53f220fe58644dfb827100d80a00020f@localhost.local\\u003e\\r\\nSubject: =?UTF-8?Q?R=C3=A4ksm=C3=B6rg=C3=A5s!?=\\r\\nMime-Version: 1.0\\r\\nContent-Type: text/plain;\\r\\n charset=UTF-8\\r\\nContent-Transfer-Encoding: base64\\r\\n\\r\\nSMOkbGzDtiB0w6RzdGluZyByw6Rrc23DtnJnw6VzIQo=\\r\\n\",\n  \"size\":\"368\",\n  \"type\":\"text/plain\",\n  \"created_at\":\"2015-01-17T05:44:07.000+00:00\",\n  \"formats\":[\"source\",\"plain\"],\n  \"attachments\":[]\n}\n```\n. Hey there, I didn't get a notice about this issue which is odd, sorry.\n\nThis is an odd issue. Looks like rubygems isn't doing its job properly:\n\n```\nirb(main):002:0> Gem.loaded_specs\n=> {}\nirb(main):003:0> gem \"mailcatcher\"\n=> true\nirb(main):004:0> Gem.loaded_specs\n=> {\"eventmachine\"=>#<Gem::Specification:0x3ff8e6fcd464 eventmachine-1.0.3>, \"haml\"=>#<Gem::Specification:0x3ff8e6a1d0c8 haml-4.0.5>, \"sqlite3\"=>#<Gem::Specification:0x3ff8e6e9d2ec sqlite3-1.3.9>, \"daemons\"=>#<Gem::Specification:0x3ff8e6b95914 daemons-1.1.9>, \"thin\"=>#<Gem::Specification:0x3ff8e6e7dce4 thin-1.5.1>, \"skinny\"=>#<Gem::Specification:0x3ff8e6cccf6c skinny-0.2.3>, \"mailcatcher\"=>#<Gem::Specification:0x3ff8e69343f0 mailcatcher-0.5.12>}\n```\n\n(notice activesupport and i18n are missing.)\n\nYou could work around by using rvm to install mailcatcher into a dedicated gemset and make the wrapper use that, so any conflicting versions installed by other things don't conflict.\n. @CamJN that won't fix the gem. To have the same effect in development mode, start mailcatcher with `bundle exec mailcatcher`.\n. Yep. Please remove any prerelease versions of i18n if you encounter this issue.\n. @jondoe1337 that looks like you've got activesurpport 4.2.7.rc1 installed which is causing havoc. Can you try:\n\n```\ngem uninstall activesupport -v 4.2.7.rc1\n```\n. You can run the git version with `MAILCATCHER_ENV=development` in your ENV. But I want a better solution to this to be sure.\n. Please use `bundle exec rake` or `bundle exec mailcatcher`, you don't need to unshift the library directory.\n\nActivesupport is another issue, will pull that commit.\n. Neat!\n\n`EXPOSE 25 80` won't work because not being bound as root.\n. Thanks, but I deliberately didn't include sinatra-contrib for various reasons though. This has been fixed with some content_type stanzas.\n. Please remove any prerelease versions of i18n to make this work. Mailcatcher works with the released version of i18n 0.7.0+\n. This is pretty old now so I'll close it. Please re-open if you still have this issue. You might like to try running `lsof -i -n` to see what processes are running on what ports to see if there's a collision.\n. Ah, right. You can always `lsof` or `ps` to find the mailcatcher process then `kill` it.\n. Closing this issue due to age. Please re-open if you're still experiencing this.\n. Run mailcatcher from foreman with `mailcatcher --foreground`. The daemonised mode is a convenience. I don't want to build service management semantics in -- that's your operating system's job. :-)\n. Ruby 2 is fine, but 2.1.x and eventmachine 1.0.4 specifically seems to have problems per #182. Please track them there.\n. This is very strange as I can't replicate this issue. Does it happen all the time, for every message?\n. I still can't reproduce this.\n\nPlease try upgading to 0.6.0 with `gem install mailcatcher`. If you're still having issues please feel free to reopen this issue.\n. This is due to #182. Mailcatcher doesn't seem to quit correctly when asked under Ruby 2.1.5.\n\nPlease try running mailcatcher in the foreground for now. You can `ps aux | grep mailcatcher` and `kill -9` the process if you run into this issue again in the meantime.\n. This seems to be related to #182, please track there.\n. 0.7.0 non-prerelease works fine. And restricting the gem requirements would just mean that this gem wouldn't update based on other dependency restrictions.\n. Yeah mailcatcher shouldn't be in your Gemfile, but I agree that a release is long overdue. First need to fix the eventmachine/2.1.5 issues.\n. Ah, I just pushed a change to build on latest of each minor version.\n. Ah, this must be something that has changed recently. I'll update the README.\n. Actually it looks like `php_value` should work: http://php.net/manual/en/configuration.changes.php\n\nPerhaps there's something overriding your configuration? Anyways, this seems like an administrative configuration issue, not an issue with the general guidelines.\n. No I didn't try it, but without the details you've just provided above there didn't seem a need to change something I had previously tried which had worked. Sorry my skim of the PHP docs didn't pick up these changes at first glance. With these details, though, I'm happy to make the change. Thanks!\n. It's a new feature not yet in a released version. :-)\n. Can you provide a full source message which produces this problem?\n. If you can supply a message which reproduces this problem please feel free to reopen the issue. :-)\n. From what I can see of the source you've posted this should work.\n\nCan you provide a full email source (like one from MailCatcher's Download button) which produces this problem?\n. I believe this is similar to many other issues about encoding. Your mail library is not correctly encoding these characters as quoted printable or similar. You should fix or update your mail library to get this working. Otherwise they may not appear correctly for your intended recipients, either!. Seems to be a bug in the latest version of EventMachine, sadly. -.-\n\nThe reason it doesn't daemonise until after the eventmachine loop is running is so that port failures can be reported to the user.\n\nI'll see what's going on upstream in eventmachine. But honestly eventmachine has become a major pain. May see if there's a feasible alternative, maybe even going back to the standard library with a custom select loop.\n. This does seem to be an eventmachine regression.\n\nPlease try [mailcatcher 0.6.0pre1](https://rubygems.org/gems/mailcatcher/versions/0.6.0pre1) (`gem install mailcatcher --pre`) which restricts eventmachine to != 1.0.4. This is only a temporary release until I can fix the eventmachine problem to fix ruby 2.2 compatiblity, or replace eventmachine with something else.\n. @matthewbarram please try mailcatcher 0.6.0pre1 (`gem install mailcatcher --pre`).\n. This has been worked around in 0.6.0, please upgrade with `gem install mailcatcher`.\n\nThe root cause of this has also been lodged as an issue upstream:\n\nhttps://github.com/eventmachine/eventmachine/issues/569\n. Ah, I see:\n\n```\neventmachine (1.0.5)\n```\n\nThey must have released a new version which has broken my fix. I'll look into it again.\n. mailcatcher 0.6.1 is out which works with eventmachine up to 1.0.5, and restricts future upgrades.\n. Localhost should always work, I suspect you have an environment problem. Sorry but I'd like to leave it as localhost.\n. The To field in the list of messages and the message header is the list of addresses that SMTP delivered to, not the contents of the To header in the actual email.\n\nCheck the Source version of your email for the To header.\n. Ruby 2.2 won't work yet because eventmachine 1.0.4 has bugs preventing mailcatcher working, and 1.0.3 doesn't support ruby 2.2. Will keep you posted.\n. (Make sure you're installing mailcatcher as a gem, not with bundler, and run mailcatcher with ruby < 2.2.)\n. Please upgrade to version 0.6.0 with `gem install mailcatcher`\n. Good point. Fixed on master.\n. What version of ruby are you using? `ruby --version`\n\nWhat OS/platform are you on?\n\nDo you have the json gem? `gem list`\n. No worries, sorry it didn't work for you.\n. Please try mailcatcher 0.6.0pre1 (`gem install mailcatcher --pre`)\n. mailcatcher 0.6.1 is out which works with eventmachine up to 1.0.5, and restricts future upgrades.\n. Are you using the mailcatcher web interface in an automated browser, or treating it as an API?\n\nIf the web interface, try reloading the page before making your assertions. Maybe the websockets aren't working as expected. If so, let me know when browser you're using.\n\nIf you're using it via an API then the email should be available as soon as your app has finished delivering it. I'd suggest watching the mailcatcher logs (the standard output, you might like to run it with `--foreground`) during delivery. There will be a message for every mail received the moment it is fully delivered. If you don't see a message when you expect then your app isn't completing the mail delivery when you expect.\n\nHope this helps.\n. Please try upgrading to version 0.6.0 with `gem install mailcatcher`\n\nIf you're still having issues feel free to reopen the issue.\n. Have you tried refreshing the page?\n. What do the rails logs show? Have you tried running `mailcatcher --foreground` and watching those logs?\n. Please try upgrading to version 0.6.0 with `gem install mailcatcher`\n\nIf you're still having issues please feel free to reopen the issue.\n. mailcatcher 0.6.1 is out which works with eventmachine up to 1.0.5, and restricts future upgrades.\n. @john-999 mailcatcher 0.6.1 should only load eventmachine < 1.0.5. Try running with `--foreground` and watch the logs.\n. Thanks! 1.0.4 is problematic, but if they fix the bugs we should still be compatible with `~> 1.0.0`, so I've added `!= 1.0.4` to the deps in 7533eb.\n. This isn't really relevant to mailcatcher, but is covered by the [Action Mailer rails guide](http://guides.rubyonrails.org/action_mailer_basics.html#generating-urls-in-action-mailer-views).\n\nFor instance, my host will be different to yours (I use pow), so a copy/paste will actually confuse things.\n. I don't really want to change the instructions everywhere, but I've added a known issue [in the readme](https://github.com/sj26/mailcatcher#ruby-22--smtp-not-working):\n\n> ### Ruby 2.2 / SMTP not working\n> \n> MailCatcher does not currently support Ruby 2.2. EventMachine added support in 1.0.4, but regressed other things so is unuseable, even on earlier rubies.\n> \n> Please use Ruby < 2.2 and EventMachine < 1.0.4. You can `gem install mailcatcher --pre` for a version which restricts to eventmachine < 1.0.4.\n. Don't include mailcatcher in your gemfile. Please see the readme.\n. Not quite, but close. I have a little script which scrapes the readme, renders it, and rewrites it a bit. Need to set it up with a git webhook at some point. Or use github pages.\n\nIn any case, done.\n. Hi Andy,\n\nThe \"to\" and \"from\" in Mailcatcher shows how your email is actually being sent; who is being sent a copy of your email via SMTP and where your app is claiming the email is from via SMTP. The headers are actually different.\n\nThis seems to cause a lot of confusion so I'm going to introduce an SMTP log tab soon showing the SMTP session log, and change these fields to \"recipients\" and \"/sender\"\n. MailCatcher needs to listen on SMTP too, rack is not enough. This cannot be done.\n. (If you would like something more rails integrated maybe try https://github.com/basecamp/mail_view)\n. (There is probably also room for another tool which integrates more deeply with rails and hijack's ActionMailer's delivery method in development and serves them via rack without using smtp at all. MailCatcher was designed as a more general solution to the problem, though.) \n. Can you provide an example message triggering this problem?\n\nSMTP only allows ASCII over the wire so mail messages as source should still be ASCII. Perhaps it is a strange title encoding or similar?\n. I'll happily accept a patch with test cases. The problem here is incompatibility arising from particular gem versions which is difficult to solve.\n. Please try v0.6.5 and create a new issue with a fresh backtrace and breaking source message if you continue having issues.\n. Mail messages generally have time inside them, or folks pipe output into logging tools which can time-tag lines if they like. Is there a compelling use-case to do so?\n. This will be done as part of #298.\n. Yeah this is a long standing issue. Individual deletes aren't replicated across instances either. Time to react/relay the whole thing? :P\n. By design. MailCatcher is an SMTP tool, so show the SMTP details in the table list. The \"From\" in the message display is the RFC822 From header.\n. From and Sender as you describe are both RFC822 headers, part of the message in the lower pane in MailCatcher. SMTP's FROM is provided in the SMTP exchange, per https://tools.ietf.org/html/rfc821#section-3.1. The upper table in MailCatcher is SMTP details, and is how/where the message would be delivered. The message details (the lower pane), like the From header, is how a message will be displayed in a mail client. If you want to see if there is a different From and Sender then I suggest looking at the message source which will show all headers.\n. This is a problem with the addon, not with mailcatcher.\n. I'd be happy to accept a patch improving JavaScript message retrieval.\n. Ah right. This should be fixed by #242, then.\n. This only works on systems with sysv init scripts. systemd, upstart and launchd users will need different configurations, among other possibilities. Adding instructions for how to start on every possible configuration would make the readme very long. Instead I'd rather leave people to google \"how to run service at system start up\" or similar and gain some knowledge about their particular systems.\n. It's been designed for development use, but you could probably use it in production if you really wished. Just be in mind that it uses an in-memory store.\n. Started: https://github.com/sj26/mailcatcher/releases\n. Unfortunately Ruby has a habit of leaking memory. In-memory SQLite and EventMachine probably just complicates the whole situation.\n\nGiven mailcatcher is intended to be a development tool, and not necessarily running _all the time_ this is enough for me. If you'd like to attack it with perftools then patches are welcome!\n. If you'd like something with a better resource profile, there's also [MailHog](https://github.com/mailhog/MailHog).\n. I'm not seeing a huge impact locally. If you folks would like to provide some profiling information to identify the source I'll happily address it.\n. Here are some memory profiling tools:\n\nhttps://github.com/SamSaffron/memory_profiler\nhttps://github.com/ruby-prof/ruby-prof\n\nIf you can run mailcatcher in the foreground using these tools and replicate the memory issues with profiling data then maybe we can figured out what's causing it and fix it. I don't see a lot of unexpected memory use when I use it, but will try and replicate as well.\n. @alexbowers sorry, as I've mentioned above I can't replicate this and nobody is contributing useful data with the suggested tools. Mailtrap seems reasonable for a hosted option. [MailHog](https://github.com/mailhog/MailHog) is another good alternative written in Go and locally hosted like mailcatcher.\n. Yes, it's probably an eventmachine leak.\n. Thanks for the patch!\n\nThe catchmail binary is actually unrelated to this change, but you're right about the erb template. Committed in d7a4737.\n. https://github.com/sj26/mailcatcher#bundler\n. Fixed in 134a99c9c1a2f75cbe1c94f75cbb58959a0176dc.\n. The icon count is working in Safari, Firefox and IE for me. The title doesn't have a count. Does it need one? In any case, this isn't a bug.\n. Sure, why not.\n. Sorry this should have been merged a while ago. We were overriding the header. -.-'\n. No, thank you. I consider this a non-feature of mailcatcher. Process supervision belongs to your operating system. See #46.\n\nTo daemonise as a system service which can be sent signals please use something like upstart, systemd, or launchctl, or [start-stop-daemon](http://man.he.net/man8/start-stop-daemon) in combination with `mailcatcher --foreground`.\n. This is a problem with the system configuration, not something mailcatcher can fix. If you have this issue, make sure you're using an absolute path to catchmail and that it uses an absolute path to ruby. The [RVM wrapper instructions](https://github.com/sj26/mailcatcher#rvm) should help.\n. Closed in favour of #227.\n. Thin 1.6 breaks mailcatcher exiting cleanly. This will need some more work.\n. Yeah I'm closing this in favour of removing Thin completely as part of #298\n. Nice idea.\n. I just added an `--http-path` option so you can add `--http-path=/mailcatcher` to mount mailcatcher with a path prefix of `/mailcatcher` for example. This has been released as 0.7.0.beta1, so you can `gem install mailcatcher --pre`. Give it a go?. This seems to pop up on some systems, and we haven't identified why. What operating system / ruby version / sqlite version is your system running?\n. Let's fix this by removing sqlite in #298.. Sorry, this is an error with your ruby/openssl install. Make sure `ruby -r digest/md5 -r openssl -e \"puts OpenSSL::VERSION\"` works on your system before trying MailCatcher. Re-open if the problem persists once openssl is working.\n. Should be fixed by #242\n. This should be fixed by #258 thanks to @grant-mccarriagher, included in v0.6.3. Please update and comment again if you have issues.\n. There have been plans to add persistence support by setting a database path or something for a while now, so we probably won't do this. Nice idea, though!\n. @kenorb that is not a solution for windows.\n\n@fede91it, @bezin: it sounds like your ruby and sqlite installations are having some issues, probably best tracked in the sqlite gem. Sounds like that issue has been resolved anyway so maybe try updating the sqlite gem and running mailcatcher again. Otherwise please follow up in the sqlite gem.\n. Odd! Sounds like a threading issue. Please try updating mailcatcher and see if it fixes your issues. If not, please comment again.\n. This is by design. Mailcatcher only keeps mail in memory while running.\n. (You could download the mail if you wish to keep it.)\n. They are being done in decoration and this should be fixed.\n. https://github.com/sj26/mailcatcher#api\n\n```\n# delete all messages\ncurl -X DELETE http://localhost:1080/messages\n\n# delete message 123\ncurl -X DELETE http://localhost:1080/messages/123\n```\n\nIf you have that many emails you may want to consider restarting mailcatcher, or clearing the emails occasionally. I'd prefer to keep it simple.\n. Quite right. Have you tested this across different browsers? Some get finnicky about iframe content.\n. /usr/local/bin (where gems usually install their scripts) may no longer be in your PATH thanks to OS X. Try using the full patch to catchmail (you can find it using `which catchmail` on your shell) instead of `/usr/bin/env catchmail` in your php configuration. If this doesn't resolve your issue feel free to re-open the issue.\n. Rvm does strange things to gem scripts. Have you tried following the instructions for rvm in the readme?\n. @tymat do you use homebrew on OS X El Capitan? If so, try:\n\n```\nPKG_CONFIG_PATH=\"$(brew --prefix openssl)/lib/pkgconfig\" gem install eventmachine -v \"1.0.8\"\n```\n. Please upgrade to 0.6.2.\n. Please upgrade and try 0.6.2. Re-open this issue if it does not resolve your issue.\n. See #210, and please try version 0.6.2.\n. Thanks, this sounds like a configuration issue. Closing.\n. Done on master.\n. Thanks. This sounds like an ipv6 configuration issue.\n. `env` has not moved in El Capitan:\n\n``` sh\n$ sw_vers\nProductName:    Mac OS X\nProductVersion: 10.11.1\nBuildVersion:   15B42\n\n$ which env\n/usr/bin/env\n```\n\nThe location of catchmail is dictated by your ruby setup. If you have the default system ruby, catchmail gets installed in /usr/local/bin:\n\n```\n$ export PATH=\"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin\"\n\n$ which ruby\n/usr/bin/ruby\n\n$ ruby --version\nruby 2.0.0p645 (2015-04-13 revision 50299) [universal.x86_64-darwin15]\n\n$ sudo gem install mailcatcher\nSuccessfully installed mailcatcher-0.6.1\n\n$ which catchmail\n/usr/local/bin/catchmail\n```\n\nI don't use rvm, so am unsure of the default location. I suggest you run `which catchmail` and use that instead of `/usr/bin/env catchmail` in your php configuration per the PHP/RVM instructions. Or you could add your RVM script path to your /etc/paths. But this is a problem with your specific environment I'm afraid.\n\nSadly I cannot accept this PR.\n. This is because OS X El Capitan doesn't include the OpenSSL headers any more (thanks apple).\n\nIf you've got OpenSSL in homebrew, please try:\n\n```\nPKG_CONFIG_PATH=\"$(brew --prefix openssl)/lib/pkgconfig\" gem install eventmachine -v \"1.0.8\"\n```\n. Linking openssl into a standard library lookup location means the binary libraries could be loaded by another application which hasn't been built with homebrew. This could have unintended consequences.\n\nI'd recommend instead compiling and linking things which need homebrew's ssl explicitly, like with the pkg config incantation.\n. Closing, please comment again if the command I posted above doesn't work for you.\n. _sigh_\n\nUnfortunately this is probably a leak in eventmachine somewhere. I am unable to diagnose it locally. Latest mailcatcher for me runs stably and even recovers resident memory after a little while.\n\nIf you'd care to do some delving with https://github.com/tmm1/stackprof and see what's happening that would be wonderful. Otherwise I have no way to reproduce or fix this.\n. No, thank you. I consider this a non-feature of mailcatcher. Process supervision belongs to your operating system. See #46.\n\nTo daemonise as a system service which can be sent signals please use something like upstart, systemd, or launchctl, or [start-stop-daemon](http://man.he.net/man8/start-stop-daemon) in combination with `mailcatcher --foreground`.\n. Oh! Nice catch, thank you.\n. (There is a more complicated issue. The MailCatcher UI can get out of sync, especially when multiple copies of the UI are open. Probably should investigate using something a little more resilient.)\n. Gemfile.lock has been removed in 433fad4e and we're now using new travis build infrastructure in 0c1a1e41.\n. Eventmachine has been bumped to 1.0.9.1 in 79e023ef and the Gemfile.lock removed in 433fad4e.\n. Mailcatcher does not support rails. We can't guarantee that MailCatcher will simultaneously retain compatibility with all versions of activesupport so it will track dependencies independently.\n\nPlease see https://github.com/sj26/mailcatcher#bundler\n. @ACPK sorry, my wording was a bit confusing!\n\nMailCatcher supports receiving email from rails. But it is an independent gem and should not be included in your Gemfile. Your rails application's dependencies may be entirely different to MailCatcher's, potentially conflicting.\n\nI hope that's clearer. :smile: \n. The solution is: don't put MailCatcher in your Gemfile. It is an independent tool. Install MailCatcher with `gem install mailcatcher`\n. For rails you could put it into your [`bin/setup` script](https://robots.thoughtbot.com/bin-setup). Think of MailCatcher like MySQL or Postgres, or your other application dependencies. :-). If you're running mailcatcher from github you'll need to `bundle install`. Make sure you `git pull origin master` first. Does that fix your issue?\n. I think this is because rubygems is terrible.\n\nI managed to replicate this by installing rails beta (have you done that too?) then installing mailcatcher and running mailcatcher. Thin quite happily activates rack-2.0.0.alpha (installed by rails 5), but sinatra requires \"~> 1.5\", hence why it can't activate and load sinatra.\n\nRubygems doesn't seem to lock activates gems dependencies before they're required. Mailcatcher explicitly specifies which gems it needs, and what versions they should be. Rubygems should be able to resolve a working set from these. But I guess it can't, and that's why we invented Bundler.\n\nArgh.\n. Right. So I've made mailcatcher explicitly activate its gem dependencies. Please install 0.6.4 and see if it solves your issues.\n. @NullVoxPopuli please see #267.\n. This isn't quite semantially correct. `4.9.9` is not the maximum version number before `5.0.0.beta1` or any other pre-release. Rubygems pre-release versioning is a bit strange.\n\nBut requiring `~> 4.0` should work because it converts pre-release versions to release versions for comparison. I've added this as a requirement on master. Please pull and try the latest master.\n. Can you provide an example email, full source, which triggers this error?\n. Please try v0.6.5 and reopen with a source message causing the error and fresh backtrace if you're still having issues.\n. You could do this by wrapping mailcatcher in a reverse proxy. I'm not sure I see a use case for putting it in the gem itself. What do you have in mind?\n. This looks like a rubygems bug, folks. Not sure what, I can't replicate it. What version of rubygems are you using? (Post the output of `gem environment`).\n. Can you also please post the full stack trace? The meaningful bit is probably in the middle somewhere.\n. Right. So I've made mailcatcher explicitly activate its gem dependencies. Please install 0.6.4 and see if it solves your issues.\n. I still can't reproduce this. It might be based on the combination of gems installed. Anybody affected could you please provide as much information as possible: what is your ruby version, how is it installed, the full output of `gem environment` and `gem list`.\n. I've just noticed: everybody seems to be using rvm, and gemsets. Have you tried installing without gemsets?\n. @GuillaumeLegendre I've installed the same version of rvm, ruby, created a gemset, and installed all the same gems and versions, but I don't see the error:\n\nhttps://gist.github.com/sj26/35dc5e343d45f0177a07\n\nAre your gems distributed between your gemsets? Which are in global versus investissement_pierre?\n. @jaydorsey thanks! That sounds exactly like the problem. It only seems to occur in rvm with gemsets. Seems rvm does some magic with bundler and bundler-unload. This sounds likely:\n\nhttps://github.com/rubygems/rubygems/issues/1420#issuecomment-167939914\n\nThere is a patch proposed:\n\nhttps://gist.github.com/mpapis/bac6163f8855e12f7833\n\nI haven't tried reproducing using bundler but I'll give it a go.\n. This is unfortunately a bug in the combination of Rubygems, Bundler and RVM, not something controllable within MailCatcher itself. @charazn's instructions per the README are the safest way to install MailCatcher with RVM.\n. [It doesn't](https://github.com/search?q=%22method_missing%27+undefined+method+this%22&type=Issues&ref=searchresults).\n\nIt seems to happen in a particular edge case with rubygems, rvm and bundler. MailCatcher being an independent gem often used within projects with similar dependencies using bundler seems to hit the edge case more often.\n. Please try upgrading rubygems and mailcatcher and open a new issue with a fresh backtrace if you're still having issues.\n. Not as part of the core project, no. I'd be open to a third party packager?\n\nI'll close this, reopen if you come up with a prototype or ideas.\n. Can you not filter in your consumer?\n. I'd consider adding this, but would prefer to do so carefully. If you'd like something which works already maybe try [MailHog](https://github.com/mailhog/MailHog) \u2014 they seem to have [a search endpoint](https://github.com/mailhog/MailHog/blob/91a9d8afe119dc96a6c9acfa94c997765c824908/docs/APIv2/swagger-2.0.json#L127).\n. Ah, I see the use case. Have you tried something like:\n\n``` ruby\nHTTParty.get(\"http://localhost:1080/messages\").any? { |message| message[\"sender\"].include? \"me@sj26.com\" }\n# => true\n```\n. Hmm, weird! Please try upgrading to v0.6.5, running with `mailcatcher --foreground` and see if the error still occurs. If so, please reopen with a fresh backtrace.\n. Please try v0.6.5 and reopen with a fresh backtrace if you're still having issues.\n. Sorry, after browsing the [codebeat page for mailcatcher](https://codebeat.co/projects/github-com-sj26-mailcatcher) there are no quick wins that I consider a problem, or for which I would probably accept a pull request. I like the size, simplicity, and encapsulation level of the `MailCatcher::Mail` module, and neither of the two repeated methods would be better extracted, imho.\n\nHappy to be proven wrong with a compelling change. :-)\n. This is a repository for MailCatcher, a ruby tool.\n\nFor help getting started with Ruby and Rails I suggest reaching out to [the Ruby on Rails community](http://rubyonrails.org/community/) asking your question on [Stack Overflow](http://stackoverflow.com/questions/tagged/ruby-on-rails), or jumping on the `#rubyonrails` IRC channel on `irc.freenode.net`.\n\nGood luck!\n. MailCatcher itself hasn't changed and remains compatible with Ruby 1.9. It seems upstream dependencies of the mail gem have precluded 1.9 and Rubygems isn't smart enough to limit its dependency resolution to the ruby version. :-(\n\nIf you manually install a mime-types-data gem version for 1.9 before installing mailcatcher it might work.\n. Try this, which worked for me on ruby 1.9.3-p551 with an empty gemset:\n\n```\n$ gem install mime-types --version \"< 3\"\nFetching: mime-types-2.99.1.gem (100%)\nSuccessfully installed mime-types-2.99.1\n1 gem installed\n\n$ gem install mailcatcher --conservative\nFetching: i18n-0.7.0.gem (100%)\nFetching: json-1.8.3.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: thread_safe-0.3.5.gem (100%)\nFetching: tzinfo-1.2.2.gem (100%)\nFetching: minitest-5.8.4.gem (100%)\nFetching: activesupport-4.2.6.gem (100%)\nFetching: eventmachine-1.0.9.1.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: mail-2.6.4.gem (100%)\nFetching: rack-1.6.4.gem (100%)\nFetching: tilt-2.0.2.gem (100%)\nFetching: rack-protection-1.5.3.gem (100%)\nFetching: sinatra-1.4.7.gem (100%)\nFetching: sqlite3-1.3.11.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: daemons-1.2.3.gem (100%)\nFetching: thin-1.5.1.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: skinny-0.2.4.gem (100%)\nFetching: mailcatcher-0.6.4.gem (100%)\nFetching: mime-types-data-3.2016.0221.gem (100%)\nERROR:  Error installing mailcatcher:\n    mime-types-data requires Ruby version >= 2.0.\n```\n\nDespite this error:\n\n```\n$ mailcatcher\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://127.0.0.1:1080\n```\n. There is already an issue in rubygems: rubygems/rubygems#968\n. MailCatcher still works on Ruby 1.9, see my instructions above. A better solution requires changes within rubygems which are unlikely soon, and over which I have no control.\n\nClosing because more +1s aren't useful and its outside mailcatcher's control.\n. To install on Ruby 1.9:\n\n```\ngem install mime-types --version \"< 3\"\ngem install --conservative mailcatcher\n```\n\nYou will get an error but it worked; try running `mailcatcher`.\n. If you have trouble installing mailcatcher on ruby 1.9, please try:\r\n\r\n```\r\ngem install mime-types --version \"< 3\"\r\ngem install --conservative mailcatcher\r\n```\r\n\r\nIf this doesn't work, please file a new issue.. Default behavior for action mailer in development is not to raise delivery errors. This is included in the default `config/environments/development.rb`:\n\n```\n  # Don't care if the mailer can't send.\n  config.action_mailer.raise_delivery_errors = false\n```\n\nHave you changed this setting?\n. Oh, you mean you would like a fallback method?\n. I've added this to the README under the Rails recommendation.\n. This feature doesn't currently work. I'll see if I can polish it up for release. This has been a common request, and it probably couldn't hurt.\n. I haven't had time to fix it up yet, sorry. Feel free to take a stab if you like.\n. Neat, thanks!\n. Oh no! \ud83d\ude35\n\nWhat version of linux, which browser are you using, and what is its version? And what version of windows, which browser, and its version?\n. Internet Explorer 9 does not support websockets, but it should still be polling. Have you tried refreshing the page? Are there any javascript errors?\n. Can you run `mailcatcher -f` and confirm that the output shows mailcatcher is receiving the message?\n. Just to clarify:\n\nYou're running MailCatcher on Linux, sending it email over smtp, viewing the web interface on your Linux computer in Firefox and the messages appear, and viewing the web interface on your Windows machine in Internet explorer but the messages do not appear, even if you refresh the page, except sometimes they appear after some time?\n\nI really am not sure what's going on here, sorry. :-(\n\nWeird browser caching by internet explorer? Have you tried a hard refresh, with Shift+F5?\n. Yeah, sorry I'm not sure I can fix this one. If you're able to provide some screenshots/logs from IE showing the failure maybe I can fix it, and reopen this if you do, but otherwise I'm unable to reproduce.\n. JSON is included in the ruby standard library, but is 1.8.something now I think. I wonder what is depending on \"~> 1.7\".\n\nThe docker build is actually broken for me because the ruby version is too old and mime-types-data won't install. I'll update the Dockerfile generally.\n. I've just used the ruby:2.3 base image and installed the gem. Works a treat!\n\nThanks for alerting to the issue.\n. (Note we can't use ruby:slim because it doesn't include enough headers for gem compilation, or things like sqlite3. We could probably slim down the image by uninstalling ruby development dependencies once the gems are installed then collapsing FS layers, but it works as-is.)\n. Ah, this is a duplicate of #227\n. Please try v0.6.5 and reopen with a fresh backtrace if you're still having issues.\n. Merged (manually)!\n. This is super difficult because your application could send multiple messages with the same Message-ID (although it shouldn't). This feature won't be added to MailCatcher core at the moment, although maybe in the future there will be a better search API.\n\nMaybe use the MailCatcher API to walk the messages and find the one you're after.\n. Please try v0.6.5 and reopen with a fresh backtrace if you're still having issues.\n. Oh no!\n\nCan you please provide a full example email which triggers this problem? You can just click Download in MailCatcher.\n. Please try v0.6.5 and see if it solves your problem. Otherwise please reopen with a full message source which triggers the error in MailCatcher. Thanks!\n. That's a very old version of mailcatcher: 0.2.4.\n\nPlease try upgrading: `gem install mailcatcher`\n. Nope, sorry, I consider this out of scope. This tool isn't mean to be Gmail, and doesn't purport to sandbox email because there's no hope we could ever get it right. This is why MailCatcher only binds to 127.0.0.1 by default.\n. Yeah, fair call. I've removed the activesupport dependency entirely which fixed encoding behaviour considerably, and also made mail and websocket handling more resilient so hopefully more of the encoding errors go away or at least give useful feedback. v0.6.5 released, get it while it's hot.\n. Thanks for your contribution!\n\nThese are locked down for reasons. Thin/skinny and sinatra all require pre 2.0 versions of rack.\n\nWhy does MailCatcher need gem compatibility with Rails 5? It [shouldn't be in your Gemfile](https://github.com/sj26/mailcatcher#bundler).\n. Bundler, sadly, is not designed as a generic distribution system, but as a specific application dependency manager. The interplay of installing first with Rubygems, then with Bundler, or magically bundling during gem post_install or something, seems cumbersome and error prone.\n\nI'm working on a version of MailCatcher which uses no compiled native gems and vendors all dependencies as this is the only way I can think of to remove this category of issue once and for all. I'll let you know when it's ready for beta. :-)\n. Rack 2+ is not compatible with mailcatcher at this time. This pull request breaks things.\r\n\r\nDo not put mailcatcher in your Gemfile. Put it in `bin/setup` in your rails projects.. Sorry you folks are having trouble. Windows and ruby is always a pain. Please try the latest rubyinstaller. Otherwise make sure you can `ruby -r sqlite3` from a console. You can also run mailcatcher in the foreground to see what it's doing if it seems to die silently with `mailcatcher --foreground`. Reopen this issue with more details from those commands if it's still affecting you.\n. Yeah the API is definitely the best bet. You could write a little mailcatcher cli gem if you like. But I probably won't roll it into mailcatcher core. Thanks!\n. This is more and more necessary given how EventMachine, Thin, and the whole ruby world have moved on.\r\n\r\nRefactoring into a pure-ruby threaded smtp + http server with some basic websocket support would probably be fine. I might take a look at this tonight while I'm on a plane. I've been procrastinating for far too long.. You need to `bundle exec`:\n\n```\nbundle exec rake assets\n```\n\nPackage the gem with rake, too:\n\n```\nbundle exec rake package\n```\n\nThere is a major rework in progress which will probably get rid of a lot of these issues.\n. Yeah sorry I pushed a fix for that to master.\n. See https://github.com/sj26/mailcatcher/issues/277#issuecomment-209154903. Try:\n\n```\ngem install mime-types --version \"< 3\"\ngem install --conservative mailcatcher\n```\n. No worries, it should probably go in the README or something, although I have a longer term fix in the works. ^_^\n. Good idea! There are a bunch of events which should be propagated client side which aren't, and this is one of them. I've got a clientside rework in progress which should fix this.\n. [Please don't put MailCatcher in your Gemfile](https://github.com/sj26/mailcatcher/blob/master/README.md#bundler). It is an application in its own right with its own dependencies that can't possibly interoperates with every version of rails.\n\nSimply:\n\n```\ngem install mailcatcher\nmailcatcher\n```\n\nYou can put the gem install in your `bin/setup` if you like.\n\nAlternately, I just removed activesupport as a dependency in the latest MailCatcher release. You could try upgrading.\n. That looks like you're sending utf-8 characters as part of a plain text encoding, which mail clients will expect to be ASCII. Can you try something like:\r\n\r\n```php\r\n$subject = 'Test';\r\n$headers = \"Content-Type: text/plain; charset=utf-8\"\r\n$body = '\u00e4\u00f6\u00fc';\r\n\r\nif(mail('test@test.com', $subject, $body, $headers)) {\r\n    echo 'sent';\r\n} else {\r\n    echo 'not sent';\r\n}\r\n```\r\n\r\nIf this doesn't work please re-open with a full message body as PHP sends it so I can reproduce.. Good point! If there were an easy, compatible way to make MailCatcher bind to the loopback interface addresses automagically I would, but it's not that easy. So this change is a good idea. Thanks!\n. Nice find! Shows how many folks use MailCatcher programmatically, haha. Thanks!\n. Oh no! I'm sorry that's not working for you.\n\nI've just tried this myself locally and I get the correct result:\n\n![screenshot 2016-09-15 10 17 28](https://cloud.githubusercontent.com/assets/14028/18534383/b808480c-7b2d-11e6-8f2b-be3a04dc0ca8.png)\n\nCould you confirm a few details for me?\n- What version of MailCatcher are you running? (`mailcatcher --version`)\n- What version of Ruby are you running? (`ruby --version`)\n- What gems do you have installed? (`gem list`)\n\nThis smells like a ruby version issue. Older ruby wasn't great at encodings.\n. @jbouzekri that's an older version of mailcatcher, and it looks like the docker image has moved on. Have you tried doing `docker pull schickling/mailcatcher`?\n\n```\n$ docker run --rm -it schickling/mailcatcher mailcatcher --version\nmailcatcher 0.6.5\n```\n. This should be fixed in the most recent version.. Anybody affected by this issue: could you please upload a message body which triggers this error so I can reproduce and perhaps fix this issue.. I'm sorry it's not working for you, but it works fine for me:\r\n\r\n![screenshot 2016-12-10 22 04 33](https://cloud.githubusercontent.com/assets/14028/21072897/b0e23ffc-bf24-11e6-814a-4e53ce655a80.png)\r\n\r\nCould you please provide an example message which doesn't work?\r\n\r\nHere's an example I tried using the Ruby mail gem (which is how mailcatcher reads email, too):\r\n\r\n```sh\r\n$ ruby --require mail\r\nirb> Mail.defaults { delivery_method :smtp, address: \"localhost\", port: 1025 }\r\nirb> Mail.new(to: \"foo@example.com\", from: \"bar@example.com\", subject: \"H\u00e9llo\", body: \"H\u00e9llo\").deliver\r\nNon US-ASCII detected and no charset defined.\r\nDefaulting to UTF-8, set your own if this is incorrect.\r\n=> #<Mail::Message:70286438842840, Multipart: false, Headers: <Date: Sat, 10 Dec 2016 22:03:55 +1100>, <From: bar@example.com>, <To: foo@example.com>, <Message-ID: <584be11b4fedf_f54e3fecd483f9b8284c8@Bumblebee.local.mail>>, <Subject: H\u00e9llo>, <Mime-Version: 1.0>, <Content-Type: text/plain>, <Content-Transfer-Encoding: base64>>\r\n```\r\n\r\nAnd the message body it sent:\r\n\r\n```http\r\nDate: Sat, 10 Dec 2016 22:03:55 +1100\r\nFrom: bar@example.com\r\nTo: foo@example.com\r\nMessage-ID: <584be11b4fedf_f54e3fecd483f9b8284c8@Bumblebee.local.mail>\r\nSubject: =?UTF-8?Q?H=C3=A9llo?=\r\nMime-Version: 1.0\r\nContent-Type: text/plain;\r\n charset=UTF-8\r\nContent-Transfer-Encoding: base64\r\n\r\nSMOpbGxv\r\n```\r\n\r\nThis also works:\r\n\r\n```http\r\nDate: Sat, 10 Dec 2016 22:03:55 +1100\r\nFrom: bar@example.com\r\nTo: foo@example.com\r\nMessage-ID: <584be11b4fedf_f54e3fecd483f9b8284c8@Bumblebee.local.mail>\r\nSubject: =?UTF-8?Q?H=C3=A9llo?=\r\nMime-Version: 1.0\r\nContent-Type: text/plain;\r\n charset=UTF-8\r\n\r\nH\u00e9llo\r\n```\r\n\r\nPerhaps you are missing a charset in your mail header?. I'm going to close this for now. If somebody has an issue with character encodings in mailcatcher please provide the full message body (with headers and mime) along with the errors it is triggering as a new issue.. Please upgrade rubygems:\n\n```\ngem update --system\n```\n. What about if the \"Clear\" button confirms the first time after page load, then just works silently from that point on?\r\n\r\nYour second suggestion I think would be covered by #266. I don't wish to constrict folks using newer ruby from running later versions of these gems. They might solve other issues and bugs.\r\n\r\nIt is an unfortunate caveat of rubygems that it doesn't consider ruby version compatibility when resolving dependencies. You can force it to by installing a compatible version of mime-types explicitly first, then mailcatcher:\r\n\r\n```\r\ngem install mime-types --version \"< 3\"\r\ngem install --conservative mailcatcher\r\n```. I'm sorry that you see a fix for your specific situation which you think should be applied here, but I do not believe it is an improvement for the whole.\r\n\r\nMailCatcher works on the latest Ruby with the latest mail and mime-type gems, and that's the way I recommend running it. The dependencies are open because it should work with future versions, given mail follows semantic versioning. The mail gem's message parsing and compatibility is always improving, so using the latest version is not an imagined improvement, but a real one.\r\n\r\nIf you want or need to constrict your ruby version to 1.9, I've made sure MailCatcher itself works with 1.9 and its dependencies have versions which are available there. How those dependencies are installed might be trickier, but there is a way to make it work.. Yes, please remove the gem from your gemfile and install with rubygems and run directly instead.. Sorry, I have no idea why this happens! Maybe you need to recompile your rbenv ruby? If you can figure it out and would like to contribute it would be most welcome.. You could also try: `gem pristine eventmachine`\r\n\r\nThis seems like a environment issue, closing without further details.. Because bumping minor versions of eventmachine breaks a lot of stuff, historically.\r\n\r\nI'll try out 1.2.1 some time and bump it if nothing breaks.. Thanks for the contribution!\r\n\r\nI don't want to allow all origins at everything all the time for everybody because it's a potential security hole. MailCatcher runs on a known port, so if I can get a visitor to come to a malicious page where I control javascript and probe port 1080 then I can start controlling your MailCatcher instance, and potentially probe for and exploit vulnerabilities.\r\n\r\nMaybe if it were opt-in?. Nice idea!. Ah, I can replicate this! But I had to netcat to mailcatcher directly to perform an SMTP exchange and paste your exact mail message:\r\n\r\n```\r\n$ nc localhost 1025\r\nEHLO localhost\r\n250-Ok EventMachine SMTP Server\r\n250-NO-SOLICITING\r\n250 SIZE 20000000\r\nMAIL FROM:<hidden@email.com>\r\n250 Ok\r\nRCPT TO:<hidden@email.com>\r\n250 Ok\r\nDATA\r\n354 Send it\r\nFrom: =?UTF-8?B?Q29tcHRhYmlsaXTDqSBPcm1pZWw=?= <hidden@email.com>\r\nTo: Name <hidden@email.com>\r\nDate: Thu, 29 Dec 2016 08:38:30 +0000\r\nMessage-ID: <43670e26007741bdbc30af51fb06d641@compta.local.phea.fr>\r\nSubject: [Ormiel] =?UTF-8?B?UsOpaW5pdGlhbGlzYXRpb24gZHUgbW90IGRlIHBhc3Nl?=\r\nMIME-Version: 1.0\r\nContent-Type: text/html; charset=UTF-8\r\nContent-Transfer-Encoding: 8bit\r\n\r\n<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01//EN\">\r\n<html>\r\n<head>\r\n    <title>Email/html</title>\r\n</head>\r\n<body>\r\n    <p>Bonjour Olivier,</p>\r\n\r\n<p>Vous avez demand\u00e9 un nouveau mot de passe pour le site Comptabilit\u00e9.</p>\r\n<p>Si vous n'avez pas fait cette demande, ignorez cette email.</p>\r\n<br>\r\n<p>Si vous souhaitez un nouveau mot de passe, cliquez sur le lien ci-dessous</p>\r\n<p><a href=\"http://compta.local.phea.fr/auth/renew/8d6a9c93\">Je r\u00e9initialise mon mot de passe</a></p>\r\n</body>\r\n</html>\r\n.\r\n250 Message accepted\r\nQUIT\r\n221 Ok\r\n```\r\n\r\nThe message is received and stored, but then I get the error you quote from the thread sending the websocket message:\r\n\r\n```\r\nException: \"\\xC3\" from ASCII-8BIT to UTF-8\r\n```\r\n\r\nThis is because Eventmachine's SMTP server has just read the message as a bunch of bytes and marked it as \"ASCII\" encoded (which is the correct default SMTP network encoding), stored it as such, and when we actually try to *use* the message for presentation it attempts to convert it to the JSON-compatible UTF-8 encoding, but it has invalid ASCII characters.\r\n\r\nIt took me a little while to figure this out: `Content-Transfer-Encoding: 8bit` is an [SMTP extension](https://tools.ietf.org/html/rfc6152). Eventmachine's SMTP server does not support it, and should be throwing an error earlier in the exchange. Your Mail/SMTP library is submitted an 8-bit encoded message to an SMTP server that is not advertising 8-bit compatibility. It should be formatting as quoted-printable or similar. Running this message through catchmail (which uses the mail gem which sanitizes quite a lot and respects SMTP capabilities) actually changes it to something the SMTP server supports:\r\n\r\n```\r\nDate: Thu, 29 Dec 2016 08:38:30 +0000\r\nFrom: =?UTF-8?B?Q29tcHRhYmlsaXTDqSBPcm1pZWw=?= <hidden@email.com>\r\nTo: Name <hidden@email.com>\r\nMessage-ID: <43670e26007741bdbc30af51fb06d641@compta.local.phea.fr>\r\nSubject: =?UTF-8?Q?[Ormiel]_R=C3=A9initialisation_du_mot_de_passe?=\r\nMime-Version: 1.0\r\nContent-Type: text/html;\r\n charset=UTF-8\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01//EN\">\r\n<html>\r\n<head>\r\n    <title>Email/html</title>\r\n</head>\r\n<body>\r\n    <p>Bonjour Olivier,</p>\r\n\r\n<p>Vous avez demand=C3=A9 un nouveau mot de passe pour le site Comptabili=\r\nt=C3=A9.</p>\r\n<p>Si vous n'avez pas fait cette demande, ignorez cette email.</p>\r\n<br>\r\n<p>Si vous souhaitez un nouveau mot de passe, cliquez sur le lien ci-dess=\r\nous</p>\r\n<p><a href=3D\"http://compta.local.phea.fr/auth/renew/8d6a9c93\">Je r=C3=A9=\r\ninitialise mon mot de passe</a></p>\r\n</body>\r\n</html>\r\n```\r\n\r\nBut the message content is exactly the same.\r\n\r\nIf you'd like to fix the SMTP server in Eventmachine to support 8-bit transfer encoding implicitly (which is kinda incorrect but lenient) then this might go away?. UTF-8 is not valid over the wire for SMTP unless the mail server advertises 8-bit encoding, which MailCatcher does not. If you a receiving errors here then I'm afraid you or your mail library is not correctly encoding your sent email and you should probably make sure that is fixed so your mail is received correctly.. @thebarty please re-open or file another issue if the latest version of mailcatcher and the above fix aren't working for you.. UTF-8 is not valid over the wire for SMTP unless the mail server advertises 8-bit encoding, which MailCatcher does not. If you a receiving errors here then I'm afraid you or your mail library is not correctly encoding your sent email and you should probably make sure that is fixed so your mail is received correctly.. See https://github.com/sj26/mailcatcher/issues/277#issuecomment-209154903. Hi @koalabear974, I don't have a Windows system to get this running myself but if you want to contribute a patch it would be most welcome! Otherwise I'm afraid I'm unable to fix this and will close.. UTF-8 is not valid over the wire for SMTP unless the mail server advertises 8-bit encoding, which MailCatcher does not. If you a receiving errors here then I'm afraid you or your mail library is not correctly encoding your sent email.. SMTP is by default a 7-bit protocol:\r\n\r\nhttps://tools.ietf.org/html/rfc821#page-3\r\n\r\nSo bodies containing bytes which require the high bit set must be encoded in some other form, usually quoted printable. The mail gem (used within rails) should probably be doing this for you transparently.\r\n\r\nSMTP was only extended later to 8-bit by [RFC5321](https://tools.ietf.org/html/rfc5321) and then only when the server advertises a `8BITMIME` capability which MailCatcher does not. . The `message[\"source\"]` is not decoded, it should be the literal SMTP transmitted message body which should be 7-bit ascii (which is valid utf-8). If you're getting an encoding error here then the message wasn't encoded properly and isn't a clean 7-bit subset of utf-8, so forcing it to be utf-8 by replacing bad characters is going to munge the source and lie about your message over json.. The only decoded part is that lines with double periods would be replaced with single periods.. The real solve here would be to make sure that the message source when received via SMTP contains only valid 7-bit bytes and raise the error earlier with clearer instructions on how to fix it in the sender.. (or just rewrite the whole smtp server and build in 8bit mime support supporting first-class encodings and again raising errors earlier in the smtp exchange when invalid content is supplied.). That's a very old version of sqlite3 ([over 10 years!](https://www.sqlite.org/chronology.html)). Sounds like the [sqlite3 gem](https://github.com/sparklemotion/sqlite3-ruby) isn't going to work with that version (\"Note that this module is only compatible with SQLite 3.6.16 or newer\"). Perhaps try upgrading it?. @tesmond you can try installing an earlier version, but it may not be easy to resolve all the interdependencies (ymmv).\r\n\r\nIt looks like https://github.com/sparklemotion/sqlite3-ruby/commit/f87fc04932d56c8d8f51706e511ef16bd5f0b253 documented the dependency corresponding to the v1.3.5 tag. Maybe try v1.3.4:\r\n\r\n```\r\n$ gem install sqlite3 -v 1.3.4\r\n```\r\n\r\nThen try installing mailcatcher again conservatively, it should work with any 1.3 version of the sqlite3 gem:\r\n\r\n```\r\n$ gem install mailcatcher --conservative\r\n```. Given there's been no activity here for a while I'll close this one.. Weird! Do you have any browser extensions installed?. Ah, `lprequeststart`, `lprequestend` and `lpsubmit` are solid hints \u2014 it's LastPass.. I'm not sure, sorry, but this seems like a LastPass bug. Maybe you can exclude MailCatcher from within LastPass? . This looks like a bug in LastPass (see #331).. Sorry, I don't know or use PHP. \ud83d\ude05 Can you copy the full source of the message from the _Source_ tab and paste it here?. Ah, so email headers finish and the body begins at the first double newline. So your headers are finishing at:\r\n\r\n```\r\nReply-To: mysite \r\n```\r\n\r\nSo the MIME and content-type headers are being seen as part of the body, so ignored. Perhaps you need to take a look at how you're calling the PHP mail function, or how you're appending those headers?. Both have open compatibility issues and subtly break skinny and mailcatcher unfortunately.\r\n\r\nIf somebody wants to do an upgrade and fix the compatibility in a PR that'd be great! I'm more inclined to semi-rewrite MailCatcher eschewing the C extensions for something a bit more portable with completely vendored gems, though. I had a wip a while back. I'm on a plane later today, might give it a crack.. (Also note that MailCatcher works fine in ruby 2.4, just issues warnings.). Puma doesn\u2019t use eventmachine so doesn\u2019t fit in event loop for smtp and websockets.. MailCatcher does not have an IMAP interface.\r\n\r\nYou might try using [the API](https://github.com/sj26/mailcatcher#api), though.. The _From_ is the `FROM` address supplied when the mail is sent via SMTP, not the value from the RFC822 `From` header (but the address component is usually the same if your mail-sending library is working correctly). If you want to double-check the From header take a look inside the `Source` tab. :-). Hi @samdjstevens! Sadly that sounds like it might be your script or mail library might be buffering the messages somehow. MailCatcher should display messages as soon as they are received over the SMTP connection.\r\n\r\nDo you have an example I can run to replicate the problem?. Ah, glad you got it sorted out! :-). I'd love to do this! But I have no idea how.\r\n\r\nI tried a while ago to offer integration with a service that did this, but then they wanted lots of money and this is an open source tool. Something like Litmus would be cool. But they're all paid services which require integration keys and things.\r\n\r\nThe best I could figure out was to offer a _Download_ button and let folks upload to their email testing service of choice.\r\n\r\nI'm going to close this for now, because I don't think we can do anything more, but if you think of a way to do this please comment further!. Does the current docker image not work for you?\r\n\r\n```\r\n$ docker run sj26/mailcatcher\r\nStarting MailCatcher\r\n==> smtp://0.0.0.0:1025\r\n==> http://0.0.0.0:1080\r\n```. Also, `gem install mailcatcher` should not be installing selenium, that's a dev-only dependency:\r\n\r\n```\r\n$ docker build .\r\nSending build context to Docker daemon 25.11 MB\r\nStep 1/7 : FROM ruby:2.4\r\n ---> 68de654ed5ee\r\nStep 2/7 : MAINTAINER Samuel Cochran <sj26@sj26.com>\r\n ---> Running in 00b0da31dc31\r\n ---> 01fd9d897cea\r\nRemoving intermediate container 00b0da31dc31\r\nStep 3/7 : RUN gem install mailcatcher\r\n ---> Running in 1802f2c92402\r\nBuilding native extensions.  This could take a while...\r\nSuccessfully installed eventmachine-1.0.9.1\r\nSuccessfully installed mime-types-data-3.2016.0521\r\nSuccessfully installed mime-types-3.1\r\nSuccessfully installed mail-2.6.6\r\nSuccessfully installed rack-1.6.8\r\nSuccessfully installed tilt-2.0.7\r\nSuccessfully installed rack-protection-1.5.3\r\nSuccessfully installed sinatra-1.4.8\r\nBuilding native extensions.  This could take a while...\r\nSuccessfully installed sqlite3-1.3.13\r\nSuccessfully installed daemons-1.2.4\r\nBuilding native extensions.  This could take a while...\r\nSuccessfully installed thin-1.5.1\r\nSuccessfully installed skinny-0.2.4\r\nSuccessfully installed mailcatcher-0.6.5\r\n13 gems installed\r\n ---> f92d6cc5c1bb\r\nRemoving intermediate container 1802f2c92402\r\nStep 4/7 : EXPOSE 1025\r\n ---> Running in 387c9799668a\r\n ---> 1ca36241b522\r\nRemoving intermediate container 387c9799668a\r\nStep 5/7 : EXPOSE 1080\r\n ---> Running in 52c8fd07114f\r\n ---> f82f2eb6c4eb\r\nRemoving intermediate container 52c8fd07114f\r\nStep 6/7 : ENTRYPOINT mailcatcher -f\r\n ---> Running in 1d03aa53d9f2\r\n ---> cd73300aeed0\r\nRemoving intermediate container 1d03aa53d9f2\r\nStep 7/7 : CMD --ip 0.0.0.0\r\n ---> Running in 17f5300e0244\r\n ---> c2a48b773a44\r\nRemoving intermediate container 17f5300e0244\r\nSuccessfully built c2a48b773a44\r\n```. Note that the split between CMD and ENTRYPOINT is designed so that you can `docker run sj26/mailcatcher` and it works fine, or you can override the arguments for more control like `docker run sj26/mailcatcher --ip 127.0.0.1`. Again, this seems to be working fine for me locally:\r\n\r\n```\r\n$ docker run sj26/mailcatcher --ip 127.0.0.1\r\nStarting MailCatcher\r\n==> smtp://127.0.0.1:1025\r\n==> http://127.0.0.1:1080\r\n```. I'm curious why it's not working for you, but afaik this is all working as intended, so I'll close this. Sounds like you've got a solve for you problem: using a forked Dockerfile. Thanks. :-). Latest thin breaks websockets. Can't merge.. I don't think the gems are even compatible here, I'm afraid. We've already tried this in #226.. Sadly there is no way to know. The underlying error message is:\r\n\r\n```\r\n#<RuntimeError: no acceptor (port is in use or requires root privileges)>\r\n```\r\n\r\nIf you can figure it out then patches are welcomed! :-). Mailcatcher is locked to a particular version of eventmachine because it tends to break very easily. Unfortunately rubygems doesn't seem to respect intergem dependencies very well so the wrong versions are often activated. :-(. Your solution here is the correct solution, for now:\r\n\r\n```\r\n$ gem uninstall eventmachine\r\n$ gem install eventmachine -v 1.0.9.1\r\n```\r\n\r\nLonger term this should be solved by #298. mailcatcher 0.6.5 runs just fine for me on macOS 10.12.6 using Ruby 2.4.1. Support for macOS and 2.4.x are fine.\r\n\r\nCould you please elaborate on \"The web portal won't load properly\" - what exactly does this mean \u2014\u00a0nothing loads at all? no messages are shown? the connection is interrupted?\r\n\r\nWhat version of macOS are you running? High Sierra has known problems with programs which daemonise, which MailCatcher does. Try running `mailcatcher --foreground` on High Sierra and see if that helps.\r\n\r\nIt does look like MailCatcher is failing to listen to the ports correctly or daemonise somehow.. Have you reinstalled ruby or something recently? It looks like your installed version of thin can't talk to your installed version of ruby.\r\n\r\nTry:\r\n\r\n```\r\ngem pristine --all\r\n```. Oh dear, that's no good \u2014 sorry!\r\n\r\nDo you have a full message body which when sent to MailCatcher triggers this behaviour? I need to reproduce it to fix it. :-). ",
    "schlick": "Great. Sorry about the .bundle/config. I was lazy and simply did a git add all without looking to see what was going into the commit. Can I suggest you create a .gitignore for you project to exclude such files.\n\nCheers,\n\nMichael.\n. Great. Sorry about the .bundle/config. I was lazy and simply did a git add all without looking to see what was going into the commit. Can I suggest you create a .gitignore for you project to exclude such files.\n\nCheers,\n\nMichael.\n. ",
    "IngusSkaistkalns": "Check this => https://github.com/sj26/mailcatcher/pull/61\n. Check this => https://github.com/sj26/mailcatcher/pull/61\n. ",
    "crucialwebstudio": "Really liking mailcatcher so far. Not sure if this is the same issue, but I'm getting \"503 MAIL already given\" when trying to send to multiple unique recipients on the same connection. Would gladly help to sponsor this feature with a donation.\n\nThanks!\n. Thanks so much for the reply. I am using SwiftMailer (swiftmailer.org) for sending. When I change the smtp connection to use SendGrid (sendgrid.com) or another smtp server that I use, everything works out fine.\n\nSo I \"think\" everything should be fine with the protocol but I admit I can't see the exact commands being sent to the mail servers. I'll see if I can turn on some logging to see the exact commands and pass them along.\n. So SwiftMailer was indeed sending multiple MAIL FROM commands, which seemed to work fine with other smtp servers. The \"protocols/smtpserver.rb\" file of the EventMachine gem definitely does not allow this though. (http://eventmachine.rubyforge.org/svn/trunk/lib/protocols/smtpserver.rb) I commented out the 2 lines from the \"process_mail_from\" function that were checking for this, restarted Mailcatcher and everything worked great. I'm definitely not a ruby programmer but as far as I can tell I didn't break anything else.\n. Really liking mailcatcher so far. Not sure if this is the same issue, but I'm getting \"503 MAIL already given\" when trying to send to multiple unique recipients on the same connection. Would gladly help to sponsor this feature with a donation.\n\nThanks!\n. Thanks so much for the reply. I am using SwiftMailer (swiftmailer.org) for sending. When I change the smtp connection to use SendGrid (sendgrid.com) or another smtp server that I use, everything works out fine.\n\nSo I \"think\" everything should be fine with the protocol but I admit I can't see the exact commands being sent to the mail servers. I'll see if I can turn on some logging to see the exact commands and pass them along.\n. So SwiftMailer was indeed sending multiple MAIL FROM commands, which seemed to work fine with other smtp servers. The \"protocols/smtpserver.rb\" file of the EventMachine gem definitely does not allow this though. (http://eventmachine.rubyforge.org/svn/trunk/lib/protocols/smtpserver.rb) I commented out the 2 lines from the \"process_mail_from\" function that were checking for this, restarted Mailcatcher and everything worked great. I'm definitely not a ruby programmer but as far as I can tell I didn't break anything else.\n. ",
    "pjb3": "I just ran into this issue myself.  See a very simple example using net/smtp in this gist:\n\nhttps://gist.github.com/2236751\n\nWhere in the RFC does it state you can't send multiple MAIL commands? I see this in section 3.3\n\n> This command tells the SMTP-receiver that a new mail transaction is starting and to reset all its state tables and buffers, including any recipients or mail data.\n. FWIW, @crucialwebstudio's \"fix\" to comment out the lines in EM worked for me too.  Pretty sure this isn't an issue of a broken client but rather a broken implementation in EM.  I'll take it up with them.\n. I just ran into this issue myself.  See a very simple example using net/smtp in this gist:\n\nhttps://gist.github.com/2236751\n\nWhere in the RFC does it state you can't send multiple MAIL commands? I see this in section 3.3\n\n> This command tells the SMTP-receiver that a new mail transaction is starting and to reset all its state tables and buffers, including any recipients or mail data.\n. FWIW, @crucialwebstudio's \"fix\" to comment out the lines in EM worked for me too.  Pretty sure this isn't an issue of a broken client but rather a broken implementation in EM.  I'll take it up with them.\n. ",
    "talbright": "There is a pull request that fixes this issue: https://github.com/eventmachine/eventmachine/pull/288\n\nYMMV but commenting out the relevant lines in process_mail_from didn't work for me, but the pull request above worked fine for me.\n. There is a pull request that fixes this issue: https://github.com/eventmachine/eventmachine/pull/288\n\nYMMV but commenting out the relevant lines in process_mail_from didn't work for me, but the pull request above worked fine for me.\n. ",
    "dergachev": "We wanted to use mailcatcher to QA all outgoing mail, but still not block regular mail delivery. Here's what we did:\n\nFirst, create this wrapper script in `/var/build/scripts/multimail.rb`:\n\n``` ruby\n#!/usr/bin/ruby\n\n# This script multiplexes both STDIN and ARGV to two mail programs:\n# sendmail, and catchmail (for QA).\n\nhandlers = [\n  '/usr/sbin/sendmail -t -i',\n  '/usr/local/bin/catchmail',\n]\n\ncontents = $stdin.read\nhandlers.each do |cmd|\n  IO.popen(cmd.split + ARGV, 'w') do |f|\n    f.write(contents)\n  end\nend\n```\n\nThen we use it just like we use the `catchmail` wrapper (that it in turns wraps):\n\n```\nchmod ugo+x /var/build/scripts/multimail.rb\necho \"sendmail_path = /var/build/scripts/multimail.rb\" | sudo tee /etc/php5/mods-available/mailcatcher.ini\n```\n\nVery handy!\n. We wanted to use mailcatcher to QA all outgoing mail, but still not block regular mail delivery. Here's what we did:\n\nFirst, create this wrapper script in `/var/build/scripts/multimail.rb`:\n\n``` ruby\n#!/usr/bin/ruby\n\n# This script multiplexes both STDIN and ARGV to two mail programs:\n# sendmail, and catchmail (for QA).\n\nhandlers = [\n  '/usr/sbin/sendmail -t -i',\n  '/usr/local/bin/catchmail',\n]\n\ncontents = $stdin.read\nhandlers.each do |cmd|\n  IO.popen(cmd.split + ARGV, 'w') do |f|\n    f.write(contents)\n  end\nend\n```\n\nThen we use it just like we use the `catchmail` wrapper (that it in turns wraps):\n\n```\nchmod ugo+x /var/build/scripts/multimail.rb\necho \"sendmail_path = /var/build/scripts/multimail.rb\" | sudo tee /etc/php5/mods-available/mailcatcher.ini\n```\n\nVery handy!\n. ",
    "blimey85": "That worked. Thanks! I'd test this under 1.9.2 on Windows for you but I don't have it on this machine anymore. Was having too many issues with gems that didn't want to compile so I gave up and switched back to 1.8.7 which for me at least, seems to work much better 99% of the time.\n. That worked. Thanks! I'd test this under 1.9.2 on Windows for you but I don't have it on this machine anymore. Was having too many issues with gems that didn't want to compile so I gave up and switched back to 1.8.7 which for me at least, seems to work much better 99% of the time.\n. ",
    "kimptoc": "Hi,\n\nGetting this error in OSX - thinking it might be related to the windows patch:\n\n```\n/Users/kimptoc/.rvm/gems/ruby-1.8.7-p334@p-mailcatcher/gems/mailcatcher-0.4.1/lib/mail_catcher.rb:24: syntax error,   unexpected kUNLESS_MOD, expecting '}'\n :daemon => true unless windows?,\n                      ^\n    from /Users/kimptoc/.rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'\n    from /Users/kimptoc/.rvm/gems/ruby-1.8.7-p334@p-mailcatcher/gems/mailcatcher-0.4.1/bin/mailcatcher:3\n    from /Users/kimptoc/.rvm/gems/ruby-1.8.7-p334@p-mailcatcher/bin/mailcatcher:19:in `load'\n    from /Users/kimptoc/.rvm/gems/ruby-1.8.7-p334@p-mailcatcher/bin/mailcatcher:19\n```\n\nRegards,\nChris\n\nPS 0.4.0 works fine :)\n. Thanks - that works for me too :)\n. Hi,\n\nGetting this error in OSX - thinking it might be related to the windows patch:\n\n```\n/Users/kimptoc/.rvm/gems/ruby-1.8.7-p334@p-mailcatcher/gems/mailcatcher-0.4.1/lib/mail_catcher.rb:24: syntax error,   unexpected kUNLESS_MOD, expecting '}'\n :daemon => true unless windows?,\n                      ^\n    from /Users/kimptoc/.rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'\n    from /Users/kimptoc/.rvm/gems/ruby-1.8.7-p334@p-mailcatcher/gems/mailcatcher-0.4.1/bin/mailcatcher:3\n    from /Users/kimptoc/.rvm/gems/ruby-1.8.7-p334@p-mailcatcher/bin/mailcatcher:19:in `load'\n    from /Users/kimptoc/.rvm/gems/ruby-1.8.7-p334@p-mailcatcher/bin/mailcatcher:19\n```\n\nRegards,\nChris\n\nPS 0.4.0 works fine :)\n. Thanks - that works for me too :)\n. ",
    "pnc": "I like that a lot better. It might take me a few days, but I'll send another pull request.\nOn Jun 11, 2011, at 9:10 , sj26 wrote:\n\n> What about adding an accurate last-modified? This was always my intention.\n> \n> On 11/06/2011, at 4:18 AM, pnc wrote:\n> \n> > Add HTML5 shim script so the app renders in IE8.\n> > \n> > Set an expires header for non-Websocket requests. This prevents IE8 from only loading the message JSON the first time the page loads and getting a 304 Not Modified thereafter.\n> > \n> > ## \n> > \n> > Reply to this email directly or view it on GitHub:\n> > https://github.com/sj26/mailcatcher/pull/10\n> \n> ## \n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/sj26/mailcatcher/pull/10#issuecomment-1347725\n. I like that a lot better. It might take me a few days, but I'll send another pull request.\nOn Jun 11, 2011, at 9:10 , sj26 wrote:\n\n> What about adding an accurate last-modified? This was always my intention.\n> \n> On 11/06/2011, at 4:18 AM, pnc wrote:\n> \n> > Add HTML5 shim script so the app renders in IE8.\n> > \n> > Set an expires header for non-Websocket requests. This prevents IE8 from only loading the message JSON the first time the page loads and getting a 304 Not Modified thereafter.\n> > \n> > ## \n> > \n> > Reply to this email directly or view it on GitHub:\n> > https://github.com/sj26/mailcatcher/pull/10\n> \n> ## \n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/sj26/mailcatcher/pull/10#issuecomment-1347725\n. ",
    "j16r": "I see why you haven't included growl, but I think you could rescue the LoadError when trying to include it rather than just asploding!\n. I see why you haven't included growl, but I think you could rescue the LoadError when trying to include it rather than just asploding!\n. ",
    "danshort": "Never mind, found the --smtp-ip option in the .rb.\n. 1. The second command in Terminal works perfect.\n2. Yes, GrowlNotify is installed, and works perfect without the --growl flag from the Termainl\n3. GrownNotify _does not_ work if I _don't_ add the --growl flag in Automator. Something about the defaults is different (or not detected) for Growl if the script is run from Automator.\n\nI did, however, find the issue. The --growl notifier flag doesn't work under bin/bash. I changed the Automator action to run the script under the bin/zsh shell, and the growl notifications now work.\n. Never mind, found the --smtp-ip option in the .rb.\n. 1. The second command in Terminal works perfect.\n2. Yes, GrowlNotify is installed, and works perfect without the --growl flag from the Termainl\n3. GrownNotify _does not_ work if I _don't_ add the --growl flag in Automator. Something about the defaults is different (or not detected) for Growl if the script is run from Automator.\n\nI did, however, find the issue. The --growl notifier flag doesn't work under bin/bash. I changed the Automator action to run the script under the bin/zsh shell, and the growl notifications now work.\n. ",
    "javierjulio": "@sj26 so the \"To\" field in the web interface is showing all recipients including those listed in CC and BCC correct?\n. @sj26 awesome thanks! Just wanted to verify as I've been using MailCatcher on a project where we are making heavy use of BCC and other people use the app (including client, hence the verification). A change wouldn't hurt. The reason I bring it up is its easy to confuse \"To\" for the actual field whereas \"Recipients\" is clearer in this case.\n\nThanks for your work. Along with another developer where I work at we've enjoyed using the app for development rather than actually use a SMTP server (which originally we were).\n. @sj26 so the \"To\" field in the web interface is showing all recipients including those listed in CC and BCC correct?\n. @sj26 awesome thanks! Just wanted to verify as I've been using MailCatcher on a project where we are making heavy use of BCC and other people use the app (including client, hence the verification). A change wouldn't hurt. The reason I bring it up is its easy to confuse \"To\" for the actual field whereas \"Recipients\" is clearer in this case.\n\nThanks for your work. Along with another developer where I work at we've enjoyed using the app for development rather than actually use a SMTP server (which originally we were).\n. ",
    "BartlomiejSkwira": "+1 CC/BCC support would be great if it is ever implemented\n. +1 CC/BCC support would be great if it is ever implemented\n. ",
    "archanid": "+1 cc/bcc support\n. +1 cc/bcc support\n. ",
    "taiar": "@sj26  when you are sending a BCC e-mail, you must make sure that this address is not showed up. That said, differ the \"recipients\" to \"bcc recipients\" is a feature missing; not implemented. \n. I would love to have this feature but I cloned your repo and test your patch and it seems broke.\n\nWeb interface is broke here, look:\n\n![image](https://cloud.githubusercontent.com/assets/13353/17867205/f0dc9cac-687f-11e6-979d-55cde941483d.png)\n\nIt's actionmailer 4.2.5.\n. @sj26  when you are sending a BCC e-mail, you must make sure that this address is not showed up. That said, differ the \"recipients\" to \"bcc recipients\" is a feature missing; not implemented. \n. I would love to have this feature but I cloned your repo and test your patch and it seems broke.\n\nWeb interface is broke here, look:\n\n![image](https://cloud.githubusercontent.com/assets/13353/17867205/f0dc9cac-687f-11e6-979d-55cde941483d.png)\n\nIt's actionmailer 4.2.5.\n. ",
    "CHEWX": "Be great to have this support. You cannot debug a BCC issue as you cannot see them. Not even in the source.. Be great to have this support. You cannot debug a BCC issue as you cannot see them. Not even in the source.. ",
    "buddhamagnet": "Ah I see. Thanks.\n. Ah I see. Thanks.\n. ",
    "schmidt": "I am working on older Rails 2.3 projects where Ruby 1.8 is still the better option.\n\nThanks for merging it that quick. :)\n. I am working on older Rails 2.3 projects where Ruby 1.8 is still the better option.\n\nThanks for merging it that quick. :)\n. ",
    "rmontgomery429": "Cool. I'm glad I could help. I really like the tool.\n. :) funny - just committed a fix for this as well. I used xsl to transform the output from fractal.\n\nhttps://github.com/sj26/mailcatcher/pull/26\n. Cool. I'm glad I could help. I really like the tool.\n. :) funny - just committed a fix for this as well. I used xsl to transform the output from fractal.\n\nhttps://github.com/sj26/mailcatcher/pull/26\n. ",
    "PizzaPill": "Wow you are quick ;) Its not a urgent issue for me because I'm on a\nbig linux box usually, just wanted you to know. Thanks for\nimplementing this wonderful gem!\n. Wow you are quick ;) Its not a urgent issue for me because I'm on a\nbig linux box usually, just wanted you to know. Thanks for\nimplementing this wonderful gem!\n. ",
    "andreimoment": "Here's how I made it work on Windows 7: \n\nDownloaded the source for mailcatcher and skinny (a mailcatcher dependency, also dependent on eventmachine).\n\nChanged the reference to eventmachine to \"~> 1.0.0.beta.4.1\" in both\n\nDeleted and re-installed eventmachine using gem install eventmachine --pre\n\nBuilt and installed skinny, built and installed mailcatcher.\n\nThanks for creating such awesomeness!\n. Or create a windows7 version with a bumped requirement :)\n\nWhich may not be sufficient as skinny also requires eventmachine. \n\nHaving it run on windows is really nice. This gem is... a gem!\n. Here's how I made it work on Windows 7: \n\nDownloaded the source for mailcatcher and skinny (a mailcatcher dependency, also dependent on eventmachine).\n\nChanged the reference to eventmachine to \"~> 1.0.0.beta.4.1\" in both\n\nDeleted and re-installed eventmachine using gem install eventmachine --pre\n\nBuilt and installed skinny, built and installed mailcatcher.\n\nThanks for creating such awesomeness!\n. Or create a windows7 version with a bumped requirement :)\n\nWhich may not be sufficient as skinny also requires eventmachine. \n\nHaving it run on windows is really nice. This gem is... a gem!\n. ",
    "antonyoneill": "We came across this today, as one of our developers who runs Windows came back from holiday a month after we started using Mailcatcher - now we've had to disable it for now on his box, but is going to start causing problems real soon :(\n\nMight give the solution above from @aaandre a shot - will keep you posted.\n. Yep - it is working now. We had to `gem uninstall eventmachine` then `gem install mailcatcher` seemed to have sorted it.\n\nDoesn't look like installing the mailcatcher updated the existing eventmachine on the system.\n\nThanks!\n. We came across this today, as one of our developers who runs Windows came back from holiday a month after we started using Mailcatcher - now we've had to disable it for now on his box, but is going to start causing problems real soon :(\n\nMight give the solution above from @aaandre a shot - will keep you posted.\n. Yep - it is working now. We had to `gem uninstall eventmachine` then `gem install mailcatcher` seemed to have sorted it.\n\nDoesn't look like installing the mailcatcher updated the existing eventmachine on the system.\n\nThanks!\n. ",
    "barmstrong": "Same here.  Thanks Antony.\n. Same here.  Thanks Antony.\n. ",
    "sir-ko": "I currently steer around with opera to tweak my projects, I really like the idea of cross browser support but I need to make sure once in a while that it truly works. I'm still a bit sceptic, even though it should be supported :-\\\n\nAnyway, it seems that box-flex isn't supported by IE and Opera. Just a guess, but probably this is already the issue\n\nhttp://www.w3schools.com/cssref/css3_pr_box-flex.asp\n. I currently steer around with opera to tweak my projects, I really like the idea of cross browser support but I need to make sure once in a while that it truly works. I'm still a bit sceptic, even though it should be supported :-\\\n\nAnyway, it seems that box-flex isn't supported by IE and Opera. Just a guess, but probably this is already the issue\n\nhttp://www.w3schools.com/cssref/css3_pr_box-flex.asp\n. ",
    "leehambley": "I see this is fixed in HEAD, bundler must be refusing to update for some reason. Apologies\n. Sorry, thanks for looking into this, actually the problem is Ruby 2.1 when the message has no body (then the symbol on message is empty, and it blows up, with 1.9.x with no body, it doesn't blow up.)\n. I see this is fixed in HEAD, bundler must be refusing to update for some reason. Apologies\n. Sorry, thanks for looking into this, actually the problem is Ruby 2.1 when the message has no body (then the symbol on message is empty, and it blows up, with 1.9.x with no body, it doesn't blow up.)\n. ",
    "arussel": "add: sudo aptitude install ruby-tilt \n. problems are due to a bug in gem package that does not download the dependencies:\nsudo apt-get install rubygems\nsudo gem install rubygems-update\nsudo update_rubygems\nwill get a fixed gem that will download the dependecies without having to downlaod them via aptitude\n. thanks for the link. I will stop using apt for ruby, I just had a 2 hours fight for rmagick :-)\n. The error:\n$ mailcatcher\nInvalid gemspec in [/var/lib/gems/1.8/specifications/skinny-0.2.0.gemspec]: invalid date format in specification: \"2010-11-01 00:00:00.000000000Z\"\nInvalid gemspec in [/var/lib/gems/1.8/specifications/tilt-1.3.3.gemspec]: invalid date format in specification: \"2011-08-25 00:00:00.000000000Z\"\nIllegal option -s\nUsage: /usr/bin/which [-a] args\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n/usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in `gem_original_require': no such file to load -- tilt (LoadError)\n        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in`require'\n        from /var/lib/gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:3\n        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in `gem_original_require'\n        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in`require'\n        from /var/lib/gems/1.8/gems/sinatra-1.3.2/lib/sinatra.rb:4\n        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in `gem_original_require'\n        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in`require'\n        from /var/lib/gems/1.8/gems/mailcatcher-0.5.5/lib/mail_catcher/web.rb:1\n        from /var/lib/gems/1.8/gems/mailcatcher-0.5.5/lib/mail_catcher.rb:137:in `run!'\n        from /var/lib/gems/1.8/gems/mailcatcher-0.5.5/lib/mail_catcher.rb:160:in`rescue_port'\n        from /var/lib/gems/1.8/gems/mailcatcher-0.5.5/lib/mail_catcher.rb:136:in `run!'\n        from /var/lib/gems/1.8/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in`call'\n        from /var/lib/gems/1.8/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine'\n        from /var/lib/gems/1.8/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in`run'\n        from /var/lib/gems/1.8/gems/mailcatcher-0.5.5/lib/mail_catcher.rb:122:in `run!'\n        from /var/lib/gems/1.8/gems/mailcatcher-0.5.5/bin/mailcatcher:4\n        from /usr/local/bin/mailcatcher:19:in`load'\n        from /usr/local/bin/mailcatcher:19\n. fixed by:\nsudo aptitude install ruby-tilt \n. add: sudo aptitude install ruby-tilt \n. problems are due to a bug in gem package that does not download the dependencies:\nsudo apt-get install rubygems\nsudo gem install rubygems-update\nsudo update_rubygems\nwill get a fixed gem that will download the dependecies without having to downlaod them via aptitude\n. thanks for the link. I will stop using apt for ruby, I just had a 2 hours fight for rmagick :-)\n. The error:\n$ mailcatcher\nInvalid gemspec in [/var/lib/gems/1.8/specifications/skinny-0.2.0.gemspec]: invalid date format in specification: \"2010-11-01 00:00:00.000000000Z\"\nInvalid gemspec in [/var/lib/gems/1.8/specifications/tilt-1.3.3.gemspec]: invalid date format in specification: \"2011-08-25 00:00:00.000000000Z\"\nIllegal option -s\nUsage: /usr/bin/which [-a] args\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n/usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in `gem_original_require': no such file to load -- tilt (LoadError)\n        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in`require'\n        from /var/lib/gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:3\n        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in `gem_original_require'\n        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in`require'\n        from /var/lib/gems/1.8/gems/sinatra-1.3.2/lib/sinatra.rb:4\n        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in `gem_original_require'\n        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in`require'\n        from /var/lib/gems/1.8/gems/mailcatcher-0.5.5/lib/mail_catcher/web.rb:1\n        from /var/lib/gems/1.8/gems/mailcatcher-0.5.5/lib/mail_catcher.rb:137:in `run!'\n        from /var/lib/gems/1.8/gems/mailcatcher-0.5.5/lib/mail_catcher.rb:160:in`rescue_port'\n        from /var/lib/gems/1.8/gems/mailcatcher-0.5.5/lib/mail_catcher.rb:136:in `run!'\n        from /var/lib/gems/1.8/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in`call'\n        from /var/lib/gems/1.8/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine'\n        from /var/lib/gems/1.8/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in`run'\n        from /var/lib/gems/1.8/gems/mailcatcher-0.5.5/lib/mail_catcher.rb:122:in `run!'\n        from /var/lib/gems/1.8/gems/mailcatcher-0.5.5/bin/mailcatcher:4\n        from /usr/local/bin/mailcatcher:19:in`load'\n        from /usr/local/bin/mailcatcher:19\n. fixed by:\nsudo aptitude install ruby-tilt \n. ",
    "joshmcarthur": "Fair call, @sj26. I removed the stray console.log ;-)\n. This has been merged in now, right @sj26, so can be closed?\n. Fair call, @sj26. I removed the stray console.log ;-)\n. This has been merged in now, right @sj26, so can be closed?\n. ",
    "elgendy": "any possible solutions, i have the same error.\n. any possible solutions, i have the same error.\n. ",
    "Gonzih": "Same issue here, firefox v13.0.1, mailcatcher v0.5.5.\n. Same issue here, firefox v13.0.1, mailcatcher v0.5.5.\n. ",
    "daveworth": ":+1: I was just about to embark on adding this exact functionality when I realized I should check pull-requests and issues to see if this had already been started.  Well done @kulesa!\n. :+1: I was just about to embark on adding this exact functionality when I realized I should check pull-requests and issues to see if this had already been started.  Well done @kulesa!\n. ",
    "kulesa": "what about merging this? :)\n. what about merging this? :)\n. ",
    "craigmcnamara": "Do you know of a good way to make mailcatcher a runtime dependency? I want all of my actionmailer tests to deliver to mailcatcher locally while keeping config overhead low. Mail Catcher + Guard is the config I'm happy with, but other than putting it in the Gemfile I don't know how I'd make sure people get mailcatcher when they do a bundle install.\n. I'm trying to come up with a setup that will allow the same development velocity as a browser for building and debugging emails. Mailcatcher + Chrome + Guard is a great combination. I've got unit tests around my emailers, but you can't make assertions on the correctness of inline CSS that drives most emails. Making email development as fast and easy as a regular page is my goal here.\n. C'mon that sounds like a great Gemfile. \n\nThanks for the feedback, I'll take a look at mail_view, it looks more like what I was trying to get to.\n. Do you know of a good way to make mailcatcher a runtime dependency? I want all of my actionmailer tests to deliver to mailcatcher locally while keeping config overhead low. Mail Catcher + Guard is the config I'm happy with, but other than putting it in the Gemfile I don't know how I'd make sure people get mailcatcher when they do a bundle install.\n. I'm trying to come up with a setup that will allow the same development velocity as a browser for building and debugging emails. Mailcatcher + Chrome + Guard is a great combination. I've got unit tests around my emailers, but you can't make assertions on the correctness of inline CSS that drives most emails. Making email development as fast and easy as a regular page is my goal here.\n. C'mon that sounds like a great Gemfile. \n\nThanks for the feedback, I'll take a look at mail_view, it looks more like what I was trying to get to.\n. ",
    "linjunpop": "@sj26 Thanks for reply.\n\nMaybe there should be an mountable engine for rails to make it more convenient to use.\n\nAnd I think it would be better if you put `don't include mailcatcher in the Gemfile` in README file.\n\n:smile:\n. @sj26 Thanks for reply.\n\nMaybe there should be an mountable engine for rails to make it more convenient to use.\n\nAnd I think it would be better if you put `don't include mailcatcher in the Gemfile` in README file.\n\n:smile:\n. ",
    "fernandes": "Hi Samuel,\n\nMany daemons (Linux/Mac) actually write their PID to a file under /var/run.\n\n[God](http://www.godrb.com/) has a way to daemonize process that do not write, but it doesn't actually works well with mailcatcher I think its because the process change its PID during the execution on https://github.com/sj26/mailcatcher/blob/master/lib/mail_catcher.rb#L174\n\nMaybe I could change the commit so write the PID to a file would be optional, IMHO its a damm small modification that do not impact on mailcatcher and can save a lot of headaches.\n\nThank you for your reply\n. yeah.. just think write the pid to a file is a so simple solution to avoid hacks like these.. thank you for your comment ;)\n. Hi Samuel,\n\nMany daemons (Linux/Mac) actually write their PID to a file under /var/run.\n\n[God](http://www.godrb.com/) has a way to daemonize process that do not write, but it doesn't actually works well with mailcatcher I think its because the process change its PID during the execution on https://github.com/sj26/mailcatcher/blob/master/lib/mail_catcher.rb#L174\n\nMaybe I could change the commit so write the PID to a file would be optional, IMHO its a damm small modification that do not impact on mailcatcher and can save a lot of headaches.\n\nThank you for your reply\n. yeah.. just think write the pid to a file is a so simple solution to avoid hacks like these.. thank you for your comment ;)\n. ",
    "zhm": "@fernandes I was also trying to get mailcatcher to work with God and was having a little trouble. Here's the start command that ended up working for me:\n\n``` ruby\n  w.start = <<-EOS\n    nohup /usr/local/bin/mailcatcher -f &\n    echo $! > #{shared_root}/pids/mailcatcher.pid\n  EOS\n```\n. @fernandes I was also trying to get mailcatcher to work with God and was having a little trouble. Here's the start command that ended up working for me:\n\n``` ruby\n  w.start = <<-EOS\n    nohup /usr/local/bin/mailcatcher -f &\n    echo $! > #{shared_root}/pids/mailcatcher.pid\n  EOS\n```\n. ",
    "pylebecq": "@sj26 Could you post your upstart job file ? I can't make it work. I tried a simple \n\n```\nexec /usr/local/bin/mailcatcher --foreground\n```\n\nWhen I do `sudo start mailcatcher`, it does nothing. It does not even return to the prompt.\n\nI also tried :\n\n```\nexpect fork\nexec /usr/local/bin/mailcatcher\n```\n\nSame result.\n\nRegards.\n. @sj26 Mmmh, you were right. After rebooting this morning the first upstart script seems to work fine. I don't know why, maybe my many tests messed up upstart yesterday. I'm really sorry to have bothered you for nothing, and thanks for your work on mailcatcher, I love it.\n. @sj26 Could you post your upstart job file ? I can't make it work. I tried a simple \n\n```\nexec /usr/local/bin/mailcatcher --foreground\n```\n\nWhen I do `sudo start mailcatcher`, it does nothing. It does not even return to the prompt.\n\nI also tried :\n\n```\nexpect fork\nexec /usr/local/bin/mailcatcher\n```\n\nSame result.\n\nRegards.\n. @sj26 Mmmh, you were right. After rebooting this morning the first upstart script seems to work fine. I don't know why, maybe my many tests messed up upstart yesterday. I'm really sorry to have bothered you for nothing, and thanks for your work on mailcatcher, I love it.\n. ",
    "vjt": "**TL;DR** A cleaner option is to launch mailcatcher with the `--foreground` option and omit the `w.pid_file` setting from the `.god` file.\n\nThis causes mailcatcher not to `fork()` - `god` will `fork()` on its behalf, `exec()` mailcatcher, write its PID in `God.pid_file_directory` and `.wait()` on the child mailcatcher process. :godmode:\n\nConceptually, it's the [exact same pattern](http://cr.yp.to/daemontools.html) that DJB designed [in 2001](http://en.wikipedia.org/wiki/Daemontools), and it's the easiest way to manage a process tree, rather than following double forks. :spaghetti:\n. **TL;DR** A cleaner option is to launch mailcatcher with the `--foreground` option and omit the `w.pid_file` setting from the `.god` file.\n\nThis causes mailcatcher not to `fork()` - `god` will `fork()` on its behalf, `exec()` mailcatcher, write its PID in `God.pid_file_directory` and `.wait()` on the child mailcatcher process. :godmode:\n\nConceptually, it's the [exact same pattern](http://cr.yp.to/daemontools.html) that DJB designed [in 2001](http://en.wikipedia.org/wiki/Daemontools), and it's the easiest way to manage a process tree, rather than following double forks. :spaghetti:\n. ",
    "sandersch": "``` sh\n$ ruby -v\nruby 1.9.2p180 (2011-02-18 revision 30909) [x86_64-linux]\n```\n\n``` sh\n$ sqlite3\nSQLite version 3.3.6\n```\n\nCan you recommend a good way for me to further dig into the cause of the issue?\n. I was able to solve this issue by upgrading sqlite to version 3.6. I am closing this since it isn't really an issue with mailcatcher but you may want to add a note that sqlite 3.3 isn't supported.\n. ``` sh\n$ ruby -v\nruby 1.9.2p180 (2011-02-18 revision 30909) [x86_64-linux]\n```\n\n``` sh\n$ sqlite3\nSQLite version 3.3.6\n```\n\nCan you recommend a good way for me to further dig into the cause of the issue?\n. I was able to solve this issue by upgrading sqlite to version 3.6. I am closing this since it isn't really an issue with mailcatcher but you may want to add a note that sqlite 3.3 isn't supported.\n. ",
    "hkdennis2k": "I wish you may re-open this issue because it is not a bug of sqlite.\nOlder version of sqlite do not support multi-threading, which is used in mailcatcher.  (? please confirm if yes)\n\nI tried two SMTP connection, the first can send, and the second fail, because the resource is still locked by the first one.\n\nI am able to patch if compatible with sqllite 3.3, by simple stupid closing all sqlite query and connection after use, and reopen them for everytime.\n. I have no testcase for you but something different.\n\nAs I need it work for me now.\nI did some hotfix on  mail.rb to \"make to works\" (and dirty) on my Centos 5.2, sqlite3 3.3.6 and ruby1.9.3.\nhttp://pastebin.com/81TG21GQ\n\nThere are some rewrite and I am sure it is buggy and leak. But at least it works.\n. I wish you may re-open this issue because it is not a bug of sqlite.\nOlder version of sqlite do not support multi-threading, which is used in mailcatcher.  (? please confirm if yes)\n\nI tried two SMTP connection, the first can send, and the second fail, because the resource is still locked by the first one.\n\nI am able to patch if compatible with sqllite 3.3, by simple stupid closing all sqlite query and connection after use, and reopen them for everytime.\n. I have no testcase for you but something different.\n\nAs I need it work for me now.\nI did some hotfix on  mail.rb to \"make to works\" (and dirty) on my Centos 5.2, sqlite3 3.3.6 and ruby1.9.3.\nhttp://pastebin.com/81TG21GQ\n\nThere are some rewrite and I am sure it is buggy and leak. But at least it works.\n. ",
    "justinperkins": "That's what I'm running. Seems like Chrome changed how they deal with websockets out from underneath everyone.\n. That's what I'm running. Seems like Chrome changed how they deal with websockets out from underneath everyone.\n. ",
    "davekerber": "I really view mailcatcher as a development time only thing so security seems like a lower concern to me, but I understand.  The command line option works great so thanks.\n. I really view mailcatcher as a development time only thing so security seems like a lower concern to me, but I understand.  The command line option works great so thanks.\n. ",
    "jarofgreen": "For anyone finding this later, this didn't work for me - I had to put the actual IP of the machine. Then it was fine. (Mailcatcher was running on Mac OX 10.10 and I was trying to reach it from a VM in Virtualbox)\n\nGiven the rise of Virtual Machine environments for dev work, these options should maybe be mentioned on http://mailcatcher.me/ ? I do agree these are the best defaults for security reasons tho.\n\nThanks for the software - it's great!\n. For anyone finding this later, this didn't work for me - I had to put the actual IP of the machine. Then it was fine. (Mailcatcher was running on Mac OX 10.10 and I was trying to reach it from a VM in Virtualbox)\n\nGiven the rise of Virtual Machine environments for dev work, these options should maybe be mentioned on http://mailcatcher.me/ ? I do agree these are the best defaults for security reasons tho.\n\nThanks for the software - it's great!\n. ",
    "hundredwatt": "This is in response to sj26/mailcatcher#4\n. The current setup can take in any SMTP configuration. I chose to add GMail as the default SMTP configuration figuring it was relatively common and easiest to setup.\n\nFor the deliveree's address, what use case do you have in mind for wanting to change their address via the interface?\n. This is in response to sj26/mailcatcher#4\n. The current setup can take in any SMTP configuration. I chose to add GMail as the default SMTP configuration figuring it was relatively common and easiest to setup.\n\nFor the deliveree's address, what use case do you have in mind for wanting to change their address via the interface?\n. ",
    "sepehr": "+1, great idea.\n. FTR, running mailcatcher with -f worked for me. \n. +1, great idea.\n. FTR, running mailcatcher with -f worked for me. \n. ",
    "bogdal": "It would be great to have this merged.\n. It would be great to have this merged.\n. ",
    "jehon": "Great idea. When will it be merged?\n. That would be great !\nCould you add a apache config example in the documentation?\n. Great idea. When will it be merged?\n. That would be great !\nCould you add a apache config example in the documentation?\n. ",
    "thorstenk": "Works quite well for me. Thanks!\n. Works quite well for me. Thanks!\n. ",
    "djmichaelb": "Same issue here... pretty much exactly the same log file as well...\n. Same issue here... pretty much exactly the same log file as well...\n. ",
    "philtr": "I can confirm this error. I'm only seeing it when I refresh Safari or Chrome. Firefox doesn't crash the server on refreshing. But I also get this error immediately after sending email to the catchmail server.\n. Hi, to use the latest master branch in a Ruby project using Bundler, you can add this line to your Gemfile (probably in the development group):\n\n```\ngem \"mailcatcher\", github: \"sj26/mailcatcher\"\n```\n\nIf you want to build the latest from source:\n\n```\n$ git clone https://github.com/sj26/mailcatcher.git\n$ cd mailcatcher\n$ gem build mailcatcher.gemspec\n$ gem install mailcatcher-0.6.0.gem\n```\n\nAs always, there is a certain risk involved with using unreleased software!\n. I can confirm this error. I'm only seeing it when I refresh Safari or Chrome. Firefox doesn't crash the server on refreshing. But I also get this error immediately after sending email to the catchmail server.\n. Hi, to use the latest master branch in a Ruby project using Bundler, you can add this line to your Gemfile (probably in the development group):\n\n```\ngem \"mailcatcher\", github: \"sj26/mailcatcher\"\n```\n\nIf you want to build the latest from source:\n\n```\n$ git clone https://github.com/sj26/mailcatcher.git\n$ cd mailcatcher\n$ gem build mailcatcher.gemspec\n$ gem install mailcatcher-0.6.0.gem\n```\n\nAs always, there is a certain risk involved with using unreleased software!\n. ",
    "jkonowitch": "I am getting the same error - just to add evidence to case :)\n. Nice - cheers!\n\nOn Sep 30, 2012, at 6:45 AM, Samuel Cochran notifications@github.com\nwrote:\n\nOkay, so I finally got to look at this. It's introduced by this\ncommithttps://github.com/eventmachine/eventmachine/commit/6d1cdc534fe36317b4dad766ae6122308be489cdin\neventmachine. I've added a workaround in skinny and the new versions\nshould be out now. gem install mailcatcher -v 0.5.10\n\n\u2014\nReply to this email directly or view it on\nGitHubhttps://github.com/sj26/mailcatcher/issues/57#issuecomment-9012539.\n. I am getting the same error - just to add evidence to case :)\n. Nice - cheers!\n\nOn Sep 30, 2012, at 6:45 AM, Samuel Cochran notifications@github.com\nwrote:\n\nOkay, so I finally got to look at this. It's introduced by this\ncommithttps://github.com/eventmachine/eventmachine/commit/6d1cdc534fe36317b4dad766ae6122308be489cdin\neventmachine. I've added a workaround in skinny and the new versions\nshould be out now. gem install mailcatcher -v 0.5.10\n\n\u2014\nReply to this email directly or view it on\nGitHubhttps://github.com/sj26/mailcatcher/issues/57#issuecomment-9012539.\n. ",
    "ghost": "Same error here\n. :thumbsdown: This prevents running mail catcher with foreman, and is Bad Advice IMO\n. @sj26 ah, I didn't see that before. hm, okay, I'll consider that.\n. I haven't tested anything against Skinny, so gonna close this. thanks for the advice! \n. @danylevskyi Doesnt work for me. :(\n. Yep, just did the exact same thing an hour ago.\n\nSent from my iPhone\n\nOn Sep 24, 2014, at 6:25 PM, dreamhood notifications@github.com wrote:\n\n> Removing the i18n gem beta version worked for me.\n> \n> I had below versions.\n> i18n (0.7.0.beta1, 0.6.11)\n> mailcatcher (0.5.12)\n> \n> I did,\n> \n> gem uninstall i18n -v 0.7.0.beta1\n> And then it worked\n> \n> mailcatcher\n> \n> # => output\n> \n> Starting MailCatcher\n> ==> smtp://127.0.0.1:1025\n> ==> http://127.0.0.1:1080\n> **\\* MailCatcher runs as a daemon by default. Go to the web interface to quit.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. I'm not sure if this will work but try uninstalling the beta, run mail catcher and reinstall the beta.\n\nSent from my iPhone\n\nOn Sep 30, 2014, at 9:32 AM, tobinibot notifications@github.com wrote:\n\n> I'm not able to remove the i18n-0.7.0.beta1 version since the Rails 4.2 beta depends on it, and I'm assuming that the upcoming Rails 4.2 release will as well. I'm also using rbenv, not RVM/gemsets, so I can't create some little wrapper gemset.\n> \n> Is there an actual fix planned?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. I'm having the same problem. When I try to launch into console : \nphp -r \"mail('caffeinated@example.com', 'Mon Sujet', 'un envoi pour tester');\"\n\nI've got this in return : \n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/protocol.rb:158:in `rescue in rbuf_fill': Net::ReadTimeout (Net::ReadTimeout)\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/protocol.rb:152:in`rbuf_fill'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/protocol.rb:134:in `readuntil'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/protocol.rb:144:in`readline'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/smtp.rb:932:in `recv_response'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/smtp.rb:555:in`block in do_start'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/smtp.rb:942:in `critical'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/smtp.rb:555:in`do_start'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/smtp.rb:520:in `start'\n    from /Library/Ruby/Gems/2.0.0/gems/mail-2.6.3/lib/mail/network/delivery_methods/smtp.rb:112:in`deliver!'\n    from /Library/Ruby/Gems/2.0.0/gems/mail-2.6.3/lib/mail/message.rb:2141:in `do_delivery'\n    from /Library/Ruby/Gems/2.0.0/gems/mail-2.6.3/lib/mail/message.rb:238:in`deliver'\n    from /Library/Ruby/Gems/2.0.0/gems/mailcatcher-0.5.12/bin/catchmail:50:in `<top (required)>'\n    from /usr/bin/catchmail:23:in`load'\n    from /usr/bin/catchmail:23:in `<main>'\n. It's working for me too. Thanks. Please fix it anyway. This tool is very helpfull for me.\n. Same error here\n. :thumbsdown: This prevents running mail catcher with foreman, and is Bad Advice IMO\n. @sj26 ah, I didn't see that before. hm, okay, I'll consider that.\n. I haven't tested anything against Skinny, so gonna close this. thanks for the advice! \n. @danylevskyi Doesnt work for me. :(\n. Yep, just did the exact same thing an hour ago.\n\nSent from my iPhone\n\nOn Sep 24, 2014, at 6:25 PM, dreamhood notifications@github.com wrote:\n\n> Removing the i18n gem beta version worked for me.\n> \n> I had below versions.\n> i18n (0.7.0.beta1, 0.6.11)\n> mailcatcher (0.5.12)\n> \n> I did,\n> \n> gem uninstall i18n -v 0.7.0.beta1\n> And then it worked\n> \n> mailcatcher\n> \n> # => output\n> \n> Starting MailCatcher\n> ==> smtp://127.0.0.1:1025\n> ==> http://127.0.0.1:1080\n> **\\* MailCatcher runs as a daemon by default. Go to the web interface to quit.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. I'm not sure if this will work but try uninstalling the beta, run mail catcher and reinstall the beta.\n\nSent from my iPhone\n\nOn Sep 30, 2014, at 9:32 AM, tobinibot notifications@github.com wrote:\n\n> I'm not able to remove the i18n-0.7.0.beta1 version since the Rails 4.2 beta depends on it, and I'm assuming that the upcoming Rails 4.2 release will as well. I'm also using rbenv, not RVM/gemsets, so I can't create some little wrapper gemset.\n> \n> Is there an actual fix planned?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. I'm having the same problem. When I try to launch into console : \nphp -r \"mail('caffeinated@example.com', 'Mon Sujet', 'un envoi pour tester');\"\n\nI've got this in return : \n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/protocol.rb:158:in `rescue in rbuf_fill': Net::ReadTimeout (Net::ReadTimeout)\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/protocol.rb:152:in`rbuf_fill'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/protocol.rb:134:in `readuntil'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/protocol.rb:144:in`readline'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/smtp.rb:932:in `recv_response'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/smtp.rb:555:in`block in do_start'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/smtp.rb:942:in `critical'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/smtp.rb:555:in`do_start'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/smtp.rb:520:in `start'\n    from /Library/Ruby/Gems/2.0.0/gems/mail-2.6.3/lib/mail/network/delivery_methods/smtp.rb:112:in`deliver!'\n    from /Library/Ruby/Gems/2.0.0/gems/mail-2.6.3/lib/mail/message.rb:2141:in `do_delivery'\n    from /Library/Ruby/Gems/2.0.0/gems/mail-2.6.3/lib/mail/message.rb:238:in`deliver'\n    from /Library/Ruby/Gems/2.0.0/gems/mailcatcher-0.5.12/bin/catchmail:50:in `<top (required)>'\n    from /usr/bin/catchmail:23:in`load'\n    from /usr/bin/catchmail:23:in `<main>'\n. It's working for me too. Thanks. Please fix it anyway. This tool is very helpfull for me.\n. ",
    "juuso": "Confirming. Reloading with Safari crashes MailCatcher 0.5.9.\n. Confirming. Reloading with Safari crashes MailCatcher 0.5.9.\n. ",
    "907th": "Tried... But it has strange bugs and always get down... So i tried to switch to 0.5.8\n. It were problems with dependencies. Now its ok. Thanks for cool app!\n. Tried... But it has strange bugs and always get down... So i tried to switch to 0.5.8\n. It were problems with dependencies. Now its ok. Thanks for cool app!\n. ",
    "neoice": "would supporting alternate database backends be one method of implementing persistence?\n\nI'm currently using MailCatcher in \"single user development environments\": low activity, nightly database resets, regular daemon restarts. I'd like to deploy MailCatcher to our \"integration environment\", but the activity level there is much much higher. I don't want to restart MailCatcher every day so the in-memory SQLite DB doesn't balloon to an insane size. having MailCatcher write to MySQL solves persistence and long-term memory usage.\n. didn't mean to issue this against upstream, sorry.\n. would supporting alternate database backends be one method of implementing persistence?\n\nI'm currently using MailCatcher in \"single user development environments\": low activity, nightly database resets, regular daemon restarts. I'd like to deploy MailCatcher to our \"integration environment\", but the activity level there is much much higher. I don't want to restart MailCatcher every day so the in-memory SQLite DB doesn't balloon to an insane size. having MailCatcher write to MySQL solves persistence and long-term memory usage.\n. didn't mean to issue this against upstream, sorry.\n. ",
    "andrhamm": "Would love to see persistence make it into master :+1: \n. Would love to see persistence make it into master :+1: \n. ",
    "ghuntley": "+1 SQLite to disk would suffice w/configuration option to expire after x days or y messages.\n. This would be great to see as well!\n. +1 would love to see this.\n. Additionally here's a formula to automatically setup mailcatcher via SaltStack:\n\nhttps://github.com/saltstack-formulas/mailcatcher-formula\n. +1 SQLite to disk would suffice w/configuration option to expire after x days or y messages.\n. This would be great to see as well!\n. +1 would love to see this.\n. Additionally here's a formula to automatically setup mailcatcher via SaltStack:\n\nhttps://github.com/saltstack-formulas/mailcatcher-formula\n. ",
    "fdrouet": ":+1: \n. Any chance to have this PR merged ? Why not providing a default sqlite storage path so that it remain transparent by default and allowing this parameter to override it ?\n\nI need to launch several mailcatcher instances on the same server, so I really need to be able to have several sqlite persistance path.\n. @sj26 yes you are right but it is not sufficient in my case as I would like to use mailcatcher on an acceptance testing platform with lots of email sent and I would like to avoid consuming all the server memory with mailcatcher processes\n. Thanks for the hint \n. I agree that it is a painful limitation\n. that would be great !\n. :+1: \n. Any chance to have this PR merged ? Why not providing a default sqlite storage path so that it remain transparent by default and allowing this parameter to override it ?\n\nI need to launch several mailcatcher instances on the same server, so I really need to be able to have several sqlite persistance path.\n. @sj26 yes you are right but it is not sufficient in my case as I would like to use mailcatcher on an acceptance testing platform with lots of email sent and I would like to avoid consuming all the server memory with mailcatcher processes\n. Thanks for the hint \n. I agree that it is a painful limitation\n. that would be great !\n. ",
    "andreyev": ":+1:\n. :+1:\n. ",
    "neezer": "Nevermind, just realized that `gem install mailcatcher` decided to install `0.2.4` instead of `0.5.10`. Upgraded and I don't have an issue anymore. Weird.\n. Awesome, thanks!\n. Nevermind, just realized that `gem install mailcatcher` decided to install `0.2.4` instead of `0.5.10`. Upgraded and I don't have an issue anymore. Weird.\n. Awesome, thanks!\n. ",
    "toy": "I wrote it because:\n\n```\ndate; for i in {1..20}; do bundle exec bin/catchmail examples/multipartmail; done; date\n```\n\ntakes about 30 seconds and\n\n```\ndate; rake test:send[20]; date\n```\n\ntakes around only 1 second.\n. Also it is much more complicated to send random mails from examples directory.\n. Did you get notification about added commits?\n. I wrote it because:\n\n```\ndate; for i in {1..20}; do bundle exec bin/catchmail examples/multipartmail; done; date\n```\n\ntakes about 30 seconds and\n\n```\ndate; rake test:send[20]; date\n```\n\ntakes around only 1 second.\n. Also it is much more complicated to send random mails from examples directory.\n. Did you get notification about added commits?\n. ",
    "thrillcall": "+1\n. +1\n. ",
    "oscherler": "It\u2019s also a good idea to put `autorestart = true` in the Supervisor config, if you want MailCatcher to run at all times. Otherwise, clicking the \u201cQuit\u201d button in the web interface will exit it cleanly, and Supervisor won\u2019t see a reason to restart it.\n. It\u2019s also a good idea to put `autorestart = true` in the Supervisor config, if you want MailCatcher to run at all times. Otherwise, clicking the \u201cQuit\u201d button in the web interface will exit it cleanly, and Supervisor won\u2019t see a reason to restart it.\n. ",
    "phillbaker": "I started getting this same bug today. What's weird is that I didn't have the issue yesterday, and I didn't change the e-mail. @mmrobins or @sj26 any progress?\n. The only thing I can think of is config changes to my system (I restarted this morning)\n\nI also have a slightly different stacktrace (annoymized):\n\n```\n.../rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:948:in `check_response': 550 Message rejected (Net::SMTPFatalError)\n    from .../rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:902:in `data'\n    from .../rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:660:in `block in send_message'\n    from .../rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:849:in `rcptto_list'\n    from .../rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:660:in `send_message'\n    from .../ruby/1.9.1/gems/mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:145:in `block in deliver!'\n    from .../rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:520:in `start'\n    from .../ruby/1.9.1/gems/mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:144:in `deliver!'\n    from .../ruby/1.9.1/gems/mail-2.4.4/lib/mail/message.rb:2034:in `do_delivery'\n    from .../ruby/1.9.1/gems/mail-2.4.4/lib/mail/message.rb:229:in `block in deliver'\n    from .../ruby/1.9.1/gems/actionmailer-3.2.8/lib/action_mailer/base.rb:415:in `block in deliver_mail'\n    from .../ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'\n    from .../ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n    from .../ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'\n    from .../ruby/1.9.1/gems/actionmailer-3.2.8/lib/action_mailer/base.rb:413:in `deliver_mail'\n    from .../ruby/1.9.1/gems/mail-2.4.4/lib/mail/message.rb:229:in `deliver'\n    from tmp/test_mailcatcher.rb:36:in `<main>'\n```\n\nMessage source:\n\n```\nDate: Fri, 04 Jan 2013 17:53:10 -0500\nFrom: test@localhost\nTo: myemail@gmail.com\nSubject: testing mail\nMime-Version: 1.0\nContent-Type: multipart/alternative;\n boundary=\"--==_mimepart_50e75d56c7f2e_10d73fcfd8435ad46286f\";\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\n\n\n----==_mimepart_50e75d56c7f2e_10d73fcfd8435ad46286f\nDate: Fri, 04 Jan 2013 17:53:10 -0500\nMime-Version: 1.0\nContent-Type: text/plain;\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\ntext only e-mail\n\n----==_mimepart_50e75d56c7f2e_10d73fcfd8435ad46286f\nDate: Fri, 04 Jan 2013 17:53:10 -0500\nMime-Version: 1.0\nContent-Type: text/html;\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\n<html><body><p><b>hellowlrld</b>text</p></body></html>\n\n----==_mimepart_50e75d56c7f2e_10d73fcfd8435ad46286f--\n```\n. Simple test script to test via actionmailer\n\n[Updated to fix extra `end`]\n\n```\nrequire 'rubygems'\nrequire 'bundler/setup'\nrequire 'action_mailer'\n\n#http://stackoverflow.com/questions/4951310/actionmailer-3-without-rails\n#http://stackoverflow.com/questions/4805583/rails-mailer-without-view\n\nActionMailer::Base.raise_delivery_errors = true\nActionMailer::Base.delivery_method = :smtp\nActionMailer::Base.smtp_settings = {\n   :address   => \"localhost\",\n   :port      => 1025 #mailcatcher\n}\n# ActionMailer::Base.view_paths= File.dirname(__FILE__)\n\nclass Mailer < ActionMailer::Base\n\n  def daily_email\n    @var = \"var\"\n\n    mail(   :to      => \"myemail@gmail.com\",\n            :from    => \"test@localhost\",\n            :subject => \"testing mail\") do |format|\n              format.text do \n                render :text => \"text only e-mail\"\n              end\n              format.html do\n                render :text => \"<html><body><p><b>hellowlrld</b>text</p></body></html>\"\n              end\n    end\n  end\nend\n\nemail = Mailer.daily_email\nputs email\nemail.deliver\n```\n. @sj26, to follow up on this, do you think this is a bug outside of mailcathcher (in mail gem, rails, some system component)?\n\nWhat other information would help to track this down? OS/Ruby/Gemfiles? Could this be an encoding issue?\n. Thanks, I do appreciate the help.\n\nSo looks like latest mailcatcher specifies `mail ~> 2.3`, rails (actionmailer) 3.2.8 and 3.2.10 specify `~> 2.4.4`, so the chosen gem is mail (2.4.4). Current mail version is 2.5.3, about a month old. Looks like quite a few bugs have been patched.\n\nI'm on ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin12.2.1].\n\nThere are several other devs working on this exact same repo without this issue, so my guess is that it's not necessarily mailcatcher itself. \n. Ah, interesting. I actually `bundle exec mailcatcher`, so mail is only the bundled one. \n\nI did try with the following setup:\n\n```\n i18n (0.6.1) \n multi_json (1.5.0) \n activesupport (3.2.10) \n daemons (1.1.9) \n eventmachine (1.0.0) with native extensions \n haml (3.1.7) \n mime-types (1.19) \n polyglot (0.3.3) \n treetop (1.4.12) \n mail (2.5.3)  <- latest mail\n rack (1.4.3) \n rack-protection (1.3.2) \n tilt (1.3.3) \n sinatra (1.3.3) \n thin (1.5.0) with native extensions \n skinny (0.2.3) \n sqlite3 (1.3.6) with native extensions \n mailcatcher (0.5.10) \nUsing bundler (1.2.3) \n```\n\nSame error: \n\n```\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://127.0.0.1:1080\n*** Error receiving message: {:sender=>\"<course-from@example.com>\", :recipients=>[\"<auz1@example.com>\"], :source=>\"Date: Mon, 07 Jan 2013 21:45:08 -0500\\nFrom: General Assembly <course-from@example.com>\\nTo: auz1@example.com\\nSubject: Confirmation for Front End Web Development\\nMime-Version: 1.0\\nContent-Type: multipart/alternative;\\n boundary=\\\"--==_mimepart_50eb88343c171_57413ffbe1c35ad890373\\\";\\n charset=UTF-8\\nContent-Transfer-Encoding: 7bit\\n\\n\\n\\n----==_mimepart_50eb88343c171_57413ffbe1c35ad890373\\nDate: Mon, 07 Jan 2013 21:45:08 -0500\\nMime-Version: 1.0\\nContent-Type: text/plain;\\n charset=UTF-8\\nContent-Transfer-Encoding: 7bit\\n\\nDear Auz Foo,\\n\\nThanks for registering for our Front End Web Development course! This email confirms your acceptance into the course beginning on Tuesday,  1 January at\\n\\nGA Campus East,\\n902 Broadway, 4th Floor,\\nNew York,\\nNY 10010,\\nUSA\\n\\n\\nYour order confirmation number is 13. Your payment schedule is below. A separate email will be sent seven (7) days in advance of when each payment is due, with a link to the payment portal.\\n\\nYour Payment Schedule:\\n$333.33 due on 2013-01-15\\n$333.33 due on 2013-01-22\\n$333.34 due on 2013-01-29\\nTotal Cost of Tuition: $1,000.00\\n\\nMake a payment now: http://core.dev/store/payment/42\\n\\nPlease keep this email for your records in your record-keeping system of choice (email archive, file cabinet, shoe box, etc.).\\n\\nWe'll follow-up with a GA Student Welcome Kit and pre-class instructions a few days prior to the course start date. We look forward to seeing you in real life! \\n\\nEmail us at \\\"General Assembly\\\" <course-from@example.com> if you have any questions.\\n\\n----==_mimepart_50eb88343c171_57413ffbe1c35ad890373\\nDate: Mon, 07 Jan 2013 21:45:08 -0500\\nMime-Version: 1.0\\nContent-Type: text/html;\\n charset=UTF-8\\nContent-Transfer-Encoding: 7bit\\n\\n<html>\\n  <body>\\n    <div style=\\\"width: 500px; margin: 0 auto; font-size: 16px; line-height: 24px\\\">\\n      <div style=\\\"margin-top: 25px; margin-bottom: 35px; padding-bottom: 15px; border-bottom: 5px solid black\\\">\\n        <a href=\\\"http://generalassemb.ly\\\" style=\\\"color: #ff0033\\\">\\n         <img border=\\\"0\\\" src=\\\"http://image.mailbox.generalassemb.ly/lib/fe6515707166017f7d10/m/1/ga-logo.png\\\" alt=\\\"General Assembly\\\" />\\n        </a>\\n      </div>\\n      <div>\\n        <p>Dear Auz Foo,</p>\\n        \\n        <p>Thanks for registering for our <span style=\\\"font-weight: bold\\\">Front End Web Development</span> course! This email confirms your acceptance into the course beginning on <span style=\\\"font-weight: bold\\\">Tuesday,  1 January</span> in <span style=\\\"font-weight: bold\\\">GA Campus East,\\n902 Broadway, 4th Floor,\\nNew York,\\nNY 10010,\\nUSA\\n</span>.</p>\\n        \\n        <p><span style=\\\"font-weight: bold\\\">Your order confirmation number is 13</span>. Your payment schedule is below. A separate email will be sent seven (7) days in advance of when each payment is due, with a link to the payment portal.</p>\\n      </div>\\n      \\n      <div style=\\\"background: #f2f2f2; padding: 20px; margin: 30px auto;\\\">\\n        <p style=\\\"margin-top: 0; padding-top: 5px; font-size: 20px; text-align: center\\\">Your Payment Schedule:</p>\\n        <table cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" width=\\\"100%\\\">\\n          <thead>\\n            <tr>\\n              <td style=\\\"width: 84%; padding-bottom: 10px; font-weight: bold\\\">Date Due</td>\\n              <td style=\\\"width: 16%; padding-bottom: 10px; text-align: right; font-weight: bold\\\">Amount</td>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            <tr>\\n              <td style=\\\"width: 84%; padding-top: 10px; padding-bottom: 10px; border-top: 1px solid #666666\\\">2013-01-15</td>\\n              <td style=\\\"width: 16%; padding-top: 10px; padding-bottom: 10px; border-top: 1px solid #666666; text-align: right\\\">$333.33</td>\\n            </tr>\\n            <tr>\\n              <td style=\\\"width: 84%; padding-top: 10px; padding-bottom: 10px; border-top: 1px solid #666666\\\">2013-01-22</td>\\n              <td style=\\\"width: 16%; padding-top: 10px; padding-bottom: 10px; border-top: 1px solid #666666; text-align: right\\\">$333.33</td>\\n            </tr>\\n            <tr>\\n              <td style=\\\"width: 84%; padding-top: 10px; padding-bottom: 10px; border-top: 1px solid #666666\\\">2013-01-29</td>\\n              <td style=\\\"width: 16%; padding-top: 10px; padding-bottom: 10px; border-top: 1px solid #666666; text-align: right\\\">$333.34</td>\\n            </tr>\\n          </tbody>\\n          <tfoot>\\n            <td style=\\\"width: 84%; padding-top: 10px; border-top: 1px solid #666666; font-style: italic; text-align: right\\\">Total Cost of Tuition:</td>\\n            <td style=\\\"width: 16%; padding-top: 10px; border-top: 1px solid #666666; font-weight: bold; text-align: right\\\">$1,000.00</td>\\n            </tr>\\n          </tfoot>\\n        </table>\\n      <a href=\\\"http://core.dev/store/payment/42\\\" style=\\\"display: block; width: 210px; background: #ff0033; color: #ffffff; text-decoration: none; text-align: center; padding: 10px; font-family: arial; font-weight: bold; margin: 10px auto\\\">Make a Payment Now</a>\\n      </div>\\n\\n      <p>Please keep this email for your records in your record-keeping system of choice (email archive, file cabinet, shoe box, etc.).</p>\\n\\n      <p>We'll follow-up with a GA Student Welcome Kit and pre-class instructions a few days prior to the course start date. We look forward to seeing you in real life!</p> \\n\\n      <p><a href=\\\"mailto:&quot;General Assembly&quot; &lt;course-from@example.com&gt;\\\" style=\\\"color:#ff0033\\\">Email us</a> if you have any questions. </p>\\n\\n      <br />\\n    </div>\\n  </body>\\n</html>\\n\\n\\n\\n----==_mimepart_50eb88343c171_57413ffbe1c35ad890373--\\n\"}\n    Exception: undefined method `match' for nil:NilClass\n    Backtrace:\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/mail-2.5.3/lib/mail/utilities.rb:104:in `unbracket'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/mail-2.5.3/lib/mail/part.rb:29:in `cid'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/mailcatcher-0.5.10/lib/mail_catcher/mail.rb:51:in `block in add_message'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/mailcatcher-0.5.10/lib/mail_catcher/mail.rb:48:in `each'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/mailcatcher-0.5.10/lib/mail_catcher/mail.rb:48:in `add_message'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/mailcatcher-0.5.10/lib/mail_catcher/smtp.rb:45:in `receive_message'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/smtpserver.rb:532:in `process_data_line'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/smtpserver.rb:196:in `receive_line'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:64:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run_machine'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/mailcatcher-0.5.10/lib/mail_catcher.rb:134:in `run!'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/mailcatcher-0.5.10/bin/mailcatcher:4:in `<top (required)>'\n       ...mailcatcher/.bundle/ruby/1.9.1/bin/mailcatcher:23:in `load'\n       ...mailcatcher/.bundle/ruby/1.9.1/bin/mailcatcher:23:in `<main>'\n    Please submit this as an issue at http://github.com/sj26/mailcatcher/issues\n```\n. Fascinating, thanks for digging into this. Everything is generated using ActionMailer, so I'm puzzled why headers would be missing. I'll dig around and see.\n\nThanks!\n. Just for posterity sake, in my `config/environment/development.rb` I added:\n\n```\n  require 'digest/sha2'\n  ... \n  config.action_mailer.default = { 'Message-ID' => \"<#{Digest::SHA2.hexdigest(Time.now.to_i.to_s)}@example.com>\" }\n```\n\nwhich resolved the issue. Not sure why this is an issue on some setups of the same rails project, and not others.\n\nWe can probably close this issue, thanks @sj26!\n. @marktabler, fascinating. Were you able to reproduce the error with the test script? What OS/ruby/rails/etc. are you on? Does anyone else in the group have a similar issue?\n\nI'm curious to see if we can establish a common denominator.\n. I started getting this same bug today. What's weird is that I didn't have the issue yesterday, and I didn't change the e-mail. @mmrobins or @sj26 any progress?\n. The only thing I can think of is config changes to my system (I restarted this morning)\n\nI also have a slightly different stacktrace (annoymized):\n\n```\n.../rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:948:in `check_response': 550 Message rejected (Net::SMTPFatalError)\n    from .../rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:902:in `data'\n    from .../rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:660:in `block in send_message'\n    from .../rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:849:in `rcptto_list'\n    from .../rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:660:in `send_message'\n    from .../ruby/1.9.1/gems/mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:145:in `block in deliver!'\n    from .../rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:520:in `start'\n    from .../ruby/1.9.1/gems/mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:144:in `deliver!'\n    from .../ruby/1.9.1/gems/mail-2.4.4/lib/mail/message.rb:2034:in `do_delivery'\n    from .../ruby/1.9.1/gems/mail-2.4.4/lib/mail/message.rb:229:in `block in deliver'\n    from .../ruby/1.9.1/gems/actionmailer-3.2.8/lib/action_mailer/base.rb:415:in `block in deliver_mail'\n    from .../ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'\n    from .../ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n    from .../ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'\n    from .../ruby/1.9.1/gems/actionmailer-3.2.8/lib/action_mailer/base.rb:413:in `deliver_mail'\n    from .../ruby/1.9.1/gems/mail-2.4.4/lib/mail/message.rb:229:in `deliver'\n    from tmp/test_mailcatcher.rb:36:in `<main>'\n```\n\nMessage source:\n\n```\nDate: Fri, 04 Jan 2013 17:53:10 -0500\nFrom: test@localhost\nTo: myemail@gmail.com\nSubject: testing mail\nMime-Version: 1.0\nContent-Type: multipart/alternative;\n boundary=\"--==_mimepart_50e75d56c7f2e_10d73fcfd8435ad46286f\";\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\n\n\n----==_mimepart_50e75d56c7f2e_10d73fcfd8435ad46286f\nDate: Fri, 04 Jan 2013 17:53:10 -0500\nMime-Version: 1.0\nContent-Type: text/plain;\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\ntext only e-mail\n\n----==_mimepart_50e75d56c7f2e_10d73fcfd8435ad46286f\nDate: Fri, 04 Jan 2013 17:53:10 -0500\nMime-Version: 1.0\nContent-Type: text/html;\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\n<html><body><p><b>hellowlrld</b>text</p></body></html>\n\n----==_mimepart_50e75d56c7f2e_10d73fcfd8435ad46286f--\n```\n. Simple test script to test via actionmailer\n\n[Updated to fix extra `end`]\n\n```\nrequire 'rubygems'\nrequire 'bundler/setup'\nrequire 'action_mailer'\n\n#http://stackoverflow.com/questions/4951310/actionmailer-3-without-rails\n#http://stackoverflow.com/questions/4805583/rails-mailer-without-view\n\nActionMailer::Base.raise_delivery_errors = true\nActionMailer::Base.delivery_method = :smtp\nActionMailer::Base.smtp_settings = {\n   :address   => \"localhost\",\n   :port      => 1025 #mailcatcher\n}\n# ActionMailer::Base.view_paths= File.dirname(__FILE__)\n\nclass Mailer < ActionMailer::Base\n\n  def daily_email\n    @var = \"var\"\n\n    mail(   :to      => \"myemail@gmail.com\",\n            :from    => \"test@localhost\",\n            :subject => \"testing mail\") do |format|\n              format.text do \n                render :text => \"text only e-mail\"\n              end\n              format.html do\n                render :text => \"<html><body><p><b>hellowlrld</b>text</p></body></html>\"\n              end\n    end\n  end\nend\n\nemail = Mailer.daily_email\nputs email\nemail.deliver\n```\n. @sj26, to follow up on this, do you think this is a bug outside of mailcathcher (in mail gem, rails, some system component)?\n\nWhat other information would help to track this down? OS/Ruby/Gemfiles? Could this be an encoding issue?\n. Thanks, I do appreciate the help.\n\nSo looks like latest mailcatcher specifies `mail ~> 2.3`, rails (actionmailer) 3.2.8 and 3.2.10 specify `~> 2.4.4`, so the chosen gem is mail (2.4.4). Current mail version is 2.5.3, about a month old. Looks like quite a few bugs have been patched.\n\nI'm on ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin12.2.1].\n\nThere are several other devs working on this exact same repo without this issue, so my guess is that it's not necessarily mailcatcher itself. \n. Ah, interesting. I actually `bundle exec mailcatcher`, so mail is only the bundled one. \n\nI did try with the following setup:\n\n```\n i18n (0.6.1) \n multi_json (1.5.0) \n activesupport (3.2.10) \n daemons (1.1.9) \n eventmachine (1.0.0) with native extensions \n haml (3.1.7) \n mime-types (1.19) \n polyglot (0.3.3) \n treetop (1.4.12) \n mail (2.5.3)  <- latest mail\n rack (1.4.3) \n rack-protection (1.3.2) \n tilt (1.3.3) \n sinatra (1.3.3) \n thin (1.5.0) with native extensions \n skinny (0.2.3) \n sqlite3 (1.3.6) with native extensions \n mailcatcher (0.5.10) \nUsing bundler (1.2.3) \n```\n\nSame error: \n\n```\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://127.0.0.1:1080\n*** Error receiving message: {:sender=>\"<course-from@example.com>\", :recipients=>[\"<auz1@example.com>\"], :source=>\"Date: Mon, 07 Jan 2013 21:45:08 -0500\\nFrom: General Assembly <course-from@example.com>\\nTo: auz1@example.com\\nSubject: Confirmation for Front End Web Development\\nMime-Version: 1.0\\nContent-Type: multipart/alternative;\\n boundary=\\\"--==_mimepart_50eb88343c171_57413ffbe1c35ad890373\\\";\\n charset=UTF-8\\nContent-Transfer-Encoding: 7bit\\n\\n\\n\\n----==_mimepart_50eb88343c171_57413ffbe1c35ad890373\\nDate: Mon, 07 Jan 2013 21:45:08 -0500\\nMime-Version: 1.0\\nContent-Type: text/plain;\\n charset=UTF-8\\nContent-Transfer-Encoding: 7bit\\n\\nDear Auz Foo,\\n\\nThanks for registering for our Front End Web Development course! This email confirms your acceptance into the course beginning on Tuesday,  1 January at\\n\\nGA Campus East,\\n902 Broadway, 4th Floor,\\nNew York,\\nNY 10010,\\nUSA\\n\\n\\nYour order confirmation number is 13. Your payment schedule is below. A separate email will be sent seven (7) days in advance of when each payment is due, with a link to the payment portal.\\n\\nYour Payment Schedule:\\n$333.33 due on 2013-01-15\\n$333.33 due on 2013-01-22\\n$333.34 due on 2013-01-29\\nTotal Cost of Tuition: $1,000.00\\n\\nMake a payment now: http://core.dev/store/payment/42\\n\\nPlease keep this email for your records in your record-keeping system of choice (email archive, file cabinet, shoe box, etc.).\\n\\nWe'll follow-up with a GA Student Welcome Kit and pre-class instructions a few days prior to the course start date. We look forward to seeing you in real life! \\n\\nEmail us at \\\"General Assembly\\\" <course-from@example.com> if you have any questions.\\n\\n----==_mimepart_50eb88343c171_57413ffbe1c35ad890373\\nDate: Mon, 07 Jan 2013 21:45:08 -0500\\nMime-Version: 1.0\\nContent-Type: text/html;\\n charset=UTF-8\\nContent-Transfer-Encoding: 7bit\\n\\n<html>\\n  <body>\\n    <div style=\\\"width: 500px; margin: 0 auto; font-size: 16px; line-height: 24px\\\">\\n      <div style=\\\"margin-top: 25px; margin-bottom: 35px; padding-bottom: 15px; border-bottom: 5px solid black\\\">\\n        <a href=\\\"http://generalassemb.ly\\\" style=\\\"color: #ff0033\\\">\\n         <img border=\\\"0\\\" src=\\\"http://image.mailbox.generalassemb.ly/lib/fe6515707166017f7d10/m/1/ga-logo.png\\\" alt=\\\"General Assembly\\\" />\\n        </a>\\n      </div>\\n      <div>\\n        <p>Dear Auz Foo,</p>\\n        \\n        <p>Thanks for registering for our <span style=\\\"font-weight: bold\\\">Front End Web Development</span> course! This email confirms your acceptance into the course beginning on <span style=\\\"font-weight: bold\\\">Tuesday,  1 January</span> in <span style=\\\"font-weight: bold\\\">GA Campus East,\\n902 Broadway, 4th Floor,\\nNew York,\\nNY 10010,\\nUSA\\n</span>.</p>\\n        \\n        <p><span style=\\\"font-weight: bold\\\">Your order confirmation number is 13</span>. Your payment schedule is below. A separate email will be sent seven (7) days in advance of when each payment is due, with a link to the payment portal.</p>\\n      </div>\\n      \\n      <div style=\\\"background: #f2f2f2; padding: 20px; margin: 30px auto;\\\">\\n        <p style=\\\"margin-top: 0; padding-top: 5px; font-size: 20px; text-align: center\\\">Your Payment Schedule:</p>\\n        <table cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" width=\\\"100%\\\">\\n          <thead>\\n            <tr>\\n              <td style=\\\"width: 84%; padding-bottom: 10px; font-weight: bold\\\">Date Due</td>\\n              <td style=\\\"width: 16%; padding-bottom: 10px; text-align: right; font-weight: bold\\\">Amount</td>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            <tr>\\n              <td style=\\\"width: 84%; padding-top: 10px; padding-bottom: 10px; border-top: 1px solid #666666\\\">2013-01-15</td>\\n              <td style=\\\"width: 16%; padding-top: 10px; padding-bottom: 10px; border-top: 1px solid #666666; text-align: right\\\">$333.33</td>\\n            </tr>\\n            <tr>\\n              <td style=\\\"width: 84%; padding-top: 10px; padding-bottom: 10px; border-top: 1px solid #666666\\\">2013-01-22</td>\\n              <td style=\\\"width: 16%; padding-top: 10px; padding-bottom: 10px; border-top: 1px solid #666666; text-align: right\\\">$333.33</td>\\n            </tr>\\n            <tr>\\n              <td style=\\\"width: 84%; padding-top: 10px; padding-bottom: 10px; border-top: 1px solid #666666\\\">2013-01-29</td>\\n              <td style=\\\"width: 16%; padding-top: 10px; padding-bottom: 10px; border-top: 1px solid #666666; text-align: right\\\">$333.34</td>\\n            </tr>\\n          </tbody>\\n          <tfoot>\\n            <td style=\\\"width: 84%; padding-top: 10px; border-top: 1px solid #666666; font-style: italic; text-align: right\\\">Total Cost of Tuition:</td>\\n            <td style=\\\"width: 16%; padding-top: 10px; border-top: 1px solid #666666; font-weight: bold; text-align: right\\\">$1,000.00</td>\\n            </tr>\\n          </tfoot>\\n        </table>\\n      <a href=\\\"http://core.dev/store/payment/42\\\" style=\\\"display: block; width: 210px; background: #ff0033; color: #ffffff; text-decoration: none; text-align: center; padding: 10px; font-family: arial; font-weight: bold; margin: 10px auto\\\">Make a Payment Now</a>\\n      </div>\\n\\n      <p>Please keep this email for your records in your record-keeping system of choice (email archive, file cabinet, shoe box, etc.).</p>\\n\\n      <p>We'll follow-up with a GA Student Welcome Kit and pre-class instructions a few days prior to the course start date. We look forward to seeing you in real life!</p> \\n\\n      <p><a href=\\\"mailto:&quot;General Assembly&quot; &lt;course-from@example.com&gt;\\\" style=\\\"color:#ff0033\\\">Email us</a> if you have any questions. </p>\\n\\n      <br />\\n    </div>\\n  </body>\\n</html>\\n\\n\\n\\n----==_mimepart_50eb88343c171_57413ffbe1c35ad890373--\\n\"}\n    Exception: undefined method `match' for nil:NilClass\n    Backtrace:\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/mail-2.5.3/lib/mail/utilities.rb:104:in `unbracket'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/mail-2.5.3/lib/mail/part.rb:29:in `cid'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/mailcatcher-0.5.10/lib/mail_catcher/mail.rb:51:in `block in add_message'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/mailcatcher-0.5.10/lib/mail_catcher/mail.rb:48:in `each'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/mailcatcher-0.5.10/lib/mail_catcher/mail.rb:48:in `add_message'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/mailcatcher-0.5.10/lib/mail_catcher/smtp.rb:45:in `receive_message'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/smtpserver.rb:532:in `process_data_line'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/smtpserver.rb:196:in `receive_line'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:64:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run_machine'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/mailcatcher-0.5.10/lib/mail_catcher.rb:134:in `run!'\n       ...mailcatcher/.bundle/ruby/1.9.1/gems/mailcatcher-0.5.10/bin/mailcatcher:4:in `<top (required)>'\n       ...mailcatcher/.bundle/ruby/1.9.1/bin/mailcatcher:23:in `load'\n       ...mailcatcher/.bundle/ruby/1.9.1/bin/mailcatcher:23:in `<main>'\n    Please submit this as an issue at http://github.com/sj26/mailcatcher/issues\n```\n. Fascinating, thanks for digging into this. Everything is generated using ActionMailer, so I'm puzzled why headers would be missing. I'll dig around and see.\n\nThanks!\n. Just for posterity sake, in my `config/environment/development.rb` I added:\n\n```\n  require 'digest/sha2'\n  ... \n  config.action_mailer.default = { 'Message-ID' => \"<#{Digest::SHA2.hexdigest(Time.now.to_i.to_s)}@example.com>\" }\n```\n\nwhich resolved the issue. Not sure why this is an issue on some setups of the same rails project, and not others.\n\nWe can probably close this issue, thanks @sj26!\n. @marktabler, fascinating. Were you able to reproduce the error with the test script? What OS/ruby/rails/etc. are you on? Does anyone else in the group have a similar issue?\n\nI'm curious to see if we can establish a common denominator.\n. ",
    "mmrobins": "It actually went away for me briefly the other day when I upgraded my Rails app to 3.2.10, so I figured something there fixed it - but it's back today.  Also I reverted the Rails upgrade and tested it and still have this problem.  I emailed sj26 the full message source, and will anonymize the content so I can post it here.\n. @phillbaker That script triggers it for me too, nice.  I think there's an extra `end` in your script, but after I got rid of that I get the following:\n\n```\n\u2500 [0]% ruby mailer_test.rb                                                                                                                                                                                                                                \nDate: Fri, 04 Jan 2013 15:16:47 -0800                                                                                                                                                                                                                     \nFrom: test@localhost                                                                                                                                                                                                                                      \nTo: myemail@gmail.com                                                                                                                                                                                                                                     \nSubject: testing mail                                                                                                                                                                                                                                     \nMime-Version: 1.0                                                                                                                                                                                                                                         \nContent-Type: multipart/alternative;                                                                                                                                                                                                                      \n boundary=\"--==_mimepart_50e762df7edb5_5fef3ffa6d034ed441068\";                                                                                                                                                                                            \n charset=UTF-8                                                                                                                                                                                                                                            \nContent-Transfer-Encoding: 7bit                                                                                                                                                                                                                           \n\n\n\n----==_mimepart_50e762df7edb5_5fef3ffa6d034ed441068                                                                                                                                                                                                       \nDate: Fri, 04 Jan 2013 15:16:47 -0800                                                                                                                                                                                                                     \nMime-Version: 1.0                                                                                                                                                                                                                                         \nContent-Type: text/plain;                                                                                                                                                                                                                                 \n charset=UTF-8                                                                                                                                                                                                                                                Content-Transfer-Encoding: 7bit                                                                                                                                                                                                                           \n\ntext only e-mail                                                                                                                                                                                                                                          \n\n----==_mimepart_50e762df7edb5_5fef3ffa6d034ed441068                                                                                                                                                                                                       \nDate: Fri, 04 Jan 2013 15:16:47 -0800                                                                                                                                                                                                                     \nMime-Version: 1.0                                                                                                                                                                                                                                         \nContent-Type: text/html;                                                                                                                                                                                                                                  \n charset=UTF-8                                                                                                                                                                                                                                            \nContent-Transfer-Encoding: 7bit                                                                                                                                                                                                                           \n\n<html><body><p><b>hellowlrld</b>text</p></body></html>                                                                                                                                                                                                    \n\n----==_mimepart_50e762df7edb5_5fef3ffa6d034ed441068--                                                                                                                                                                                                     \n/Users/matt/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/smtp.rb:948:in `check_response': 550 Message rejected (Net::SMTPFatalError)                                                                                                                    \n        from /Users/matt/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/smtp.rb:902:in `data'                                                                                                                                                             \n        from /Users/matt/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/smtp.rb:660:in `block in send_message'                                                                                                                                            \n        from /Users/matt/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/smtp.rb:849:in `rcptto_list'                                                                                                                                                      \n        from /Users/matt/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/smtp.rb:660:in `send_message'                                                                                                                                                     \n        from /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:145:in `block in deliver!'                                                                                                                   \n        from /Users/matt/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/smtp.rb:520:in `start'                                                                                                                                                            \n        from /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:144:in `deliver!'                                                                                                                            \n        from /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mail-2.4.4/lib/mail/message.rb:2034:in `do_delivery'                                                                                                                                              \n        from /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mail-2.4.4/lib/mail/message.rb:229:in `block in deliver'                                                                                                                                          \n        from /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/actionmailer-3.2.9/lib/action_mailer/base.rb:415:in `block in deliver_mail'                                                                                                                       \n        from /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.9/lib/active_support/notifications.rb:123:in `block in instrument'                                                                                                              \n        from /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.9/lib/active_support/notifications/instrumenter.rb:20:in `instrument'                                                                                                           \n        from /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.9/lib/active_support/notifications.rb:123:in `instrument'                                                                                                                       \n        from /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/actionmailer-3.2.9/lib/action_mailer/base.rb:413:in `deliver_mail'                                                                                                                                \n        from /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mail-2.4.4/lib/mail/message.rb:229:in `deliver'                                                                                                                                                   \n        from mailer_test.rb:36:in `<main>'\n```\n\nAnd the mailcatcher logs:\n\n```\n\u2500 [0]% mailcatcher -f -vStarting MailCatcher==> smtp://127.0.0.1:1025==> http://127.0.0.1:1080                                                                                                                                                            \n*** Error receiving message: {:sender=>\"<test@localhost>\", :recipients=>[\"<myemail@gmail.com>\"], :source=>\"Date: Fri, 04 Jan 2013 15:15:13 -0800\\nFrom: test@localhost\\nTo: myemail@gmail.com\\nSubject: testing mail\\nMime-Version: 1.0\\nContent-Type: multipart/alternative;\\n boundary=\\\"--==_mimepart_50e7628178bca_5f763fdefd434ed423089\\\";\\n charset=UTF-8\\nContent-Transfer-Encoding: 7bit\\n\\n\\n\\n----==_mimepart_50e7628178bca_5f763fdefd434ed423089\\nDate: Fri, 04 Jan 2013 15:15:13 -0800\\nMime-Version: 1.0\\nContent-Type: text/plain;\\n charset=UTF-8\\nContent-Transfer-Encoding: 7bit\\n\\ntext only e-mail\\n\\n----==_mimepart_50e7628178bca_5f763fdefd434ed423089\\nDate: Fri, 04 Jan 2013 15:15:13 -0800\\nMime-Version: 1.0\\nContent-Type: text/html;\\n charset=UTF-8\\nContent-Transfer-Encoding: 7bit\\n\\n<html><body><p><b>hellowlrld</b>text</p></body></html>\\n\\n----==_mimepart_50e7628178bca_5f763fdefd434ed423089--\\n\"}                                                                                                                    Exception: undefined method `match' for nil:NilClass                                                                                                                                                                                                          Backtrace:                                                                                                                                                                                                                                                       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mail-2.4.4/lib/mail/utilities.rb:104:in `unbracket'                                                                                                                                                                /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mail-2.4.4/lib/mail/part.rb:29:in `cid'                                                                                                                                                                            /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/lib/mail_catcher/mail.rb:51:in `block in add_message'                                                                                                                                           /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/lib/mail_catcher/mail.rb:48:in `each'                                                                                                                                                           /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/lib/mail_catcher/mail.rb:48:in `add_message'                                                                                                                                                    /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/lib/mail_catcher/smtp.rb:45:in `receive_message'                                                                                                                                                /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/em/protocols/smtpserver.rb:532:in `process_data_line'                                                                                                                                       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/em/protocols/smtpserver.rb:196:in `receive_line'                                                                                                                                            /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:64:in `receive_data'                                                                                                                                              /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'                                                                                                                                              /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'                                                                                                                                              /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run_machine'                                                                                                                                                        /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run'                                                                                                                                                                /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/lib/mail_catcher.rb:134:in `run!'                                                                                                                                                               /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/bin/mailcatcher:4:in `<top (required)>'                                                                                                                                                         /Users/matt/.rvm/gems/ruby-1.9.3-p125/bin/mailcatcher:19:in `load'                                                                                                                                                                                            /Users/matt/.rvm/gems/ruby-1.9.3-p125/bin/mailcatcher:19:in `<main>'                                                                                                                                                                                       Please submit this as an issue at http://github.com/sj26/mailcatcher/issues                                                                                                                                                                               *** Error receiving message: {:sender=>\"<test@localhost>\", :recipients=>[\"<myemail@gmail.com>\"], :source=>\"Date: Fri, 04 Jan 2013 15:16:47 -0800\\nFrom: test@localhost\\nTo: myemail@gmail.com\\nSubject: testing mail\\nMime-Version: 1.0\\nContent-Type: multipart/alternative;\\n boundary=\\\"--==_mimepart_50e762df7edb5_5fef3ffa6d034ed441068\\\";\\n charset=UTF-8\\nContent-Transfer-Encoding: 7bit\\n\\n\\n\\n----==_mimepart_50e762df7edb5_5fef3ffa6d034ed441068\\nDate: Fri, 04 Jan 2013 15:16:47 -0800\\nMime-Version: 1.0\\nContent-Type: text/plain;\\n charset=UTF-8\\nContent-Transfer-Encoding: 7bit\\n\\ntext only e-mail\\n\\n----==_mimepart_50e762df7edb5_5fef3ffa6d034ed441068\\nDate: Fri, 04 Jan 2013 15:16:47 -0800\\nMime-Version: 1.0\\nContent-Type: text/html;\\n charset=UTF-8\\nContent-Transfer-Encoding: 7bit\\n\\n<html><body><p><b>hellowlrld</b>text</p></body></html>\\n\\n----==_mimepart_50e762df7edb5_5fef3ffa6d034ed441068--\\n\"}                                                                                                                    Exception: undefined method `match' for nil:NilClass                                                                                                                                                                                                          Backtrace:                                                                                                                                                                                                                                                       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mail-2.4.4/lib/mail/utilities.rb:104:in `unbracket'                                                                                                                                                     \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mail-2.4.4/lib/mail/part.rb:29:in `cid'                                                                                                                                                                            /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/lib/mail_catcher/mail.rb:51:in `block in add_message'                                                                                                                                           /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/lib/mail_catcher/mail.rb:48:in `each'                                                                                                                                                           /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/lib/mail_catcher/mail.rb:48:in `add_message'                                                                                                                                         \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/lib/mail_catcher/smtp.rb:45:in `receive_message'                                                                                                                                     \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/em/protocols/smtpserver.rb:532:in `process_data_line'                                                                                                                            \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/em/protocols/smtpserver.rb:196:in `receive_line'                                                                                                                                 \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:64:in `receive_data'                                                                                                                                   \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'                                                                                                                                   \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'                                                                                                                                   \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'                                                                                                                                   \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run_machine'                                                                                                                                             \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run'                                                                                                                                                     \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/lib/mail_catcher.rb:134:in `run!'                                                                                                                                                    \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/bin/mailcatcher:4:in `<top (required)>'                                                                                                                                              \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/bin/mailcatcher:19:in `load'                                                                                                                                                                                 \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/bin/mailcatcher:19:in `<main>'                                                                                                                                                                               \n    Please submit this as an issue at http://github.com/sj26/mailcatcher/issues            \n```\n. @sj26 Thanks for looking into it.  I don't even get the error anymore, so definitely don't know how to get it to be repeatable.  I have a hunch that it might had had something to do with a gemset that used at some point that I'm not using now.  That is I may have run mailcatcher from a directory where there was a problem with the other gems installed in an rvm gemset specified in the .rvmrc, but wherever I run mailcatcher from now doesn't have that problem.  If I figure anything out for how to get this to happen reliably I'll update here.\n. It actually went away for me briefly the other day when I upgraded my Rails app to 3.2.10, so I figured something there fixed it - but it's back today.  Also I reverted the Rails upgrade and tested it and still have this problem.  I emailed sj26 the full message source, and will anonymize the content so I can post it here.\n. @phillbaker That script triggers it for me too, nice.  I think there's an extra `end` in your script, but after I got rid of that I get the following:\n\n```\n\u2500 [0]% ruby mailer_test.rb                                                                                                                                                                                                                                \nDate: Fri, 04 Jan 2013 15:16:47 -0800                                                                                                                                                                                                                     \nFrom: test@localhost                                                                                                                                                                                                                                      \nTo: myemail@gmail.com                                                                                                                                                                                                                                     \nSubject: testing mail                                                                                                                                                                                                                                     \nMime-Version: 1.0                                                                                                                                                                                                                                         \nContent-Type: multipart/alternative;                                                                                                                                                                                                                      \n boundary=\"--==_mimepart_50e762df7edb5_5fef3ffa6d034ed441068\";                                                                                                                                                                                            \n charset=UTF-8                                                                                                                                                                                                                                            \nContent-Transfer-Encoding: 7bit                                                                                                                                                                                                                           \n\n\n\n----==_mimepart_50e762df7edb5_5fef3ffa6d034ed441068                                                                                                                                                                                                       \nDate: Fri, 04 Jan 2013 15:16:47 -0800                                                                                                                                                                                                                     \nMime-Version: 1.0                                                                                                                                                                                                                                         \nContent-Type: text/plain;                                                                                                                                                                                                                                 \n charset=UTF-8                                                                                                                                                                                                                                                Content-Transfer-Encoding: 7bit                                                                                                                                                                                                                           \n\ntext only e-mail                                                                                                                                                                                                                                          \n\n----==_mimepart_50e762df7edb5_5fef3ffa6d034ed441068                                                                                                                                                                                                       \nDate: Fri, 04 Jan 2013 15:16:47 -0800                                                                                                                                                                                                                     \nMime-Version: 1.0                                                                                                                                                                                                                                         \nContent-Type: text/html;                                                                                                                                                                                                                                  \n charset=UTF-8                                                                                                                                                                                                                                            \nContent-Transfer-Encoding: 7bit                                                                                                                                                                                                                           \n\n<html><body><p><b>hellowlrld</b>text</p></body></html>                                                                                                                                                                                                    \n\n----==_mimepart_50e762df7edb5_5fef3ffa6d034ed441068--                                                                                                                                                                                                     \n/Users/matt/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/smtp.rb:948:in `check_response': 550 Message rejected (Net::SMTPFatalError)                                                                                                                    \n        from /Users/matt/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/smtp.rb:902:in `data'                                                                                                                                                             \n        from /Users/matt/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/smtp.rb:660:in `block in send_message'                                                                                                                                            \n        from /Users/matt/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/smtp.rb:849:in `rcptto_list'                                                                                                                                                      \n        from /Users/matt/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/smtp.rb:660:in `send_message'                                                                                                                                                     \n        from /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:145:in `block in deliver!'                                                                                                                   \n        from /Users/matt/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/smtp.rb:520:in `start'                                                                                                                                                            \n        from /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:144:in `deliver!'                                                                                                                            \n        from /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mail-2.4.4/lib/mail/message.rb:2034:in `do_delivery'                                                                                                                                              \n        from /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mail-2.4.4/lib/mail/message.rb:229:in `block in deliver'                                                                                                                                          \n        from /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/actionmailer-3.2.9/lib/action_mailer/base.rb:415:in `block in deliver_mail'                                                                                                                       \n        from /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.9/lib/active_support/notifications.rb:123:in `block in instrument'                                                                                                              \n        from /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.9/lib/active_support/notifications/instrumenter.rb:20:in `instrument'                                                                                                           \n        from /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.9/lib/active_support/notifications.rb:123:in `instrument'                                                                                                                       \n        from /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/actionmailer-3.2.9/lib/action_mailer/base.rb:413:in `deliver_mail'                                                                                                                                \n        from /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mail-2.4.4/lib/mail/message.rb:229:in `deliver'                                                                                                                                                   \n        from mailer_test.rb:36:in `<main>'\n```\n\nAnd the mailcatcher logs:\n\n```\n\u2500 [0]% mailcatcher -f -vStarting MailCatcher==> smtp://127.0.0.1:1025==> http://127.0.0.1:1080                                                                                                                                                            \n*** Error receiving message: {:sender=>\"<test@localhost>\", :recipients=>[\"<myemail@gmail.com>\"], :source=>\"Date: Fri, 04 Jan 2013 15:15:13 -0800\\nFrom: test@localhost\\nTo: myemail@gmail.com\\nSubject: testing mail\\nMime-Version: 1.0\\nContent-Type: multipart/alternative;\\n boundary=\\\"--==_mimepart_50e7628178bca_5f763fdefd434ed423089\\\";\\n charset=UTF-8\\nContent-Transfer-Encoding: 7bit\\n\\n\\n\\n----==_mimepart_50e7628178bca_5f763fdefd434ed423089\\nDate: Fri, 04 Jan 2013 15:15:13 -0800\\nMime-Version: 1.0\\nContent-Type: text/plain;\\n charset=UTF-8\\nContent-Transfer-Encoding: 7bit\\n\\ntext only e-mail\\n\\n----==_mimepart_50e7628178bca_5f763fdefd434ed423089\\nDate: Fri, 04 Jan 2013 15:15:13 -0800\\nMime-Version: 1.0\\nContent-Type: text/html;\\n charset=UTF-8\\nContent-Transfer-Encoding: 7bit\\n\\n<html><body><p><b>hellowlrld</b>text</p></body></html>\\n\\n----==_mimepart_50e7628178bca_5f763fdefd434ed423089--\\n\"}                                                                                                                    Exception: undefined method `match' for nil:NilClass                                                                                                                                                                                                          Backtrace:                                                                                                                                                                                                                                                       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mail-2.4.4/lib/mail/utilities.rb:104:in `unbracket'                                                                                                                                                                /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mail-2.4.4/lib/mail/part.rb:29:in `cid'                                                                                                                                                                            /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/lib/mail_catcher/mail.rb:51:in `block in add_message'                                                                                                                                           /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/lib/mail_catcher/mail.rb:48:in `each'                                                                                                                                                           /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/lib/mail_catcher/mail.rb:48:in `add_message'                                                                                                                                                    /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/lib/mail_catcher/smtp.rb:45:in `receive_message'                                                                                                                                                /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/em/protocols/smtpserver.rb:532:in `process_data_line'                                                                                                                                       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/em/protocols/smtpserver.rb:196:in `receive_line'                                                                                                                                            /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:64:in `receive_data'                                                                                                                                              /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'                                                                                                                                              /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'                                                                                                                                              /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run_machine'                                                                                                                                                        /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run'                                                                                                                                                                /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/lib/mail_catcher.rb:134:in `run!'                                                                                                                                                               /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/bin/mailcatcher:4:in `<top (required)>'                                                                                                                                                         /Users/matt/.rvm/gems/ruby-1.9.3-p125/bin/mailcatcher:19:in `load'                                                                                                                                                                                            /Users/matt/.rvm/gems/ruby-1.9.3-p125/bin/mailcatcher:19:in `<main>'                                                                                                                                                                                       Please submit this as an issue at http://github.com/sj26/mailcatcher/issues                                                                                                                                                                               *** Error receiving message: {:sender=>\"<test@localhost>\", :recipients=>[\"<myemail@gmail.com>\"], :source=>\"Date: Fri, 04 Jan 2013 15:16:47 -0800\\nFrom: test@localhost\\nTo: myemail@gmail.com\\nSubject: testing mail\\nMime-Version: 1.0\\nContent-Type: multipart/alternative;\\n boundary=\\\"--==_mimepart_50e762df7edb5_5fef3ffa6d034ed441068\\\";\\n charset=UTF-8\\nContent-Transfer-Encoding: 7bit\\n\\n\\n\\n----==_mimepart_50e762df7edb5_5fef3ffa6d034ed441068\\nDate: Fri, 04 Jan 2013 15:16:47 -0800\\nMime-Version: 1.0\\nContent-Type: text/plain;\\n charset=UTF-8\\nContent-Transfer-Encoding: 7bit\\n\\ntext only e-mail\\n\\n----==_mimepart_50e762df7edb5_5fef3ffa6d034ed441068\\nDate: Fri, 04 Jan 2013 15:16:47 -0800\\nMime-Version: 1.0\\nContent-Type: text/html;\\n charset=UTF-8\\nContent-Transfer-Encoding: 7bit\\n\\n<html><body><p><b>hellowlrld</b>text</p></body></html>\\n\\n----==_mimepart_50e762df7edb5_5fef3ffa6d034ed441068--\\n\"}                                                                                                                    Exception: undefined method `match' for nil:NilClass                                                                                                                                                                                                          Backtrace:                                                                                                                                                                                                                                                       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mail-2.4.4/lib/mail/utilities.rb:104:in `unbracket'                                                                                                                                                     \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mail-2.4.4/lib/mail/part.rb:29:in `cid'                                                                                                                                                                            /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/lib/mail_catcher/mail.rb:51:in `block in add_message'                                                                                                                                           /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/lib/mail_catcher/mail.rb:48:in `each'                                                                                                                                                           /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/lib/mail_catcher/mail.rb:48:in `add_message'                                                                                                                                         \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/lib/mail_catcher/smtp.rb:45:in `receive_message'                                                                                                                                     \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/em/protocols/smtpserver.rb:532:in `process_data_line'                                                                                                                            \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/em/protocols/smtpserver.rb:196:in `receive_line'                                                                                                                                 \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:64:in `receive_data'                                                                                                                                   \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'                                                                                                                                   \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'                                                                                                                                   \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'                                                                                                                                   \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run_machine'                                                                                                                                             \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run'                                                                                                                                                     \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/lib/mail_catcher.rb:134:in `run!'                                                                                                                                                    \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/gems/mailcatcher-0.5.10/bin/mailcatcher:4:in `<top (required)>'                                                                                                                                              \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/bin/mailcatcher:19:in `load'                                                                                                                                                                                 \n       /Users/matt/.rvm/gems/ruby-1.9.3-p125/bin/mailcatcher:19:in `<main>'                                                                                                                                                                               \n    Please submit this as an issue at http://github.com/sj26/mailcatcher/issues            \n```\n. @sj26 Thanks for looking into it.  I don't even get the error anymore, so definitely don't know how to get it to be repeatable.  I have a hunch that it might had had something to do with a gemset that used at some point that I'm not using now.  That is I may have run mailcatcher from a directory where there was a problem with the other gems installed in an rvm gemset specified in the .rvmrc, but wherever I run mailcatcher from now doesn't have that problem.  If I figure anything out for how to get this to happen reliably I'll update here.\n. ",
    "marktabler": "Weighing in - I'm working in the same workgroup as @mmrobins above (on a different project), and I've had the coming/going 550 problem as well.  I tried the action_mailer default workaround @phillbaker suggested above, and didn't have any luck.  I'll try a few other solutions and share my findings, but it's the same missing message-id issue at its core.\n. Sorry for the delay in responding, but the problem has vanished again.  I can't begin to fathom why this is an intermittent issue; the environment and the code just aren't changing in any way that I'm aware.  Currently my emails go out and the test script runs, and that's with or without the workaround @phillbaker posted earlier.  If it comes back I'll try to catch more data, including test script results.\n. Weighing in - I'm working in the same workgroup as @mmrobins above (on a different project), and I've had the coming/going 550 problem as well.  I tried the action_mailer default workaround @phillbaker suggested above, and didn't have any luck.  I'll try a few other solutions and share my findings, but it's the same missing message-id issue at its core.\n. Sorry for the delay in responding, but the problem has vanished again.  I can't begin to fathom why this is an intermittent issue; the environment and the code just aren't changing in any way that I'm aware.  Currently my emails go out and the test script runs, and that's with or without the workaround @phillbaker posted earlier.  If it comes back I'll try to catch more data, including test script results.\n. ",
    "thicksoup": "I'm getting the same error code, but with a slightly different message:\n\n```\nNet::SMTPFatalError - 550 Cannot receive from specified address <blah@blah.com>: Unauthenticated senders not allowed\n:\n  /Users/stuey/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/net/smtp.rb:948:in `check_response'\n  /Users/stuey/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/net/smtp.rb:917:in `getok'\n  /Users/stuey/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/net/smtp.rb:832:in `mailfrom'\n  /Users/stuey/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/net/smtp.rb:659:in `send_message'\n  (gem) mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:145:in `block in deliver!'\n  /Users/stuey/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/net/smtp.rb:520:in `start'\n  (gem) mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:144:in `deliver!'\n  (gem) mail-2.4.4/lib/mail/message.rb:2034:in `do_delivery'\n  (gem) mail-2.4.4/lib/mail/message.rb:229:in `block in deliver'\n  (gem) actionmailer-3.2.11/lib/action_mailer/base.rb:415:in `block in deliver_mail'\n  (gem) activesupport-3.2.11/lib/active_support/notifications.rb:123:in `block in instrument'\n  (gem) activesupport-3.2.11/lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n  (gem) activesupport-3.2.11/lib/active_support/notifications.rb:123:in `instrument'\n  (gem) actionmailer-3.2.11/lib/action_mailer/base.rb:413:in `deliver_mail'\n  (gem) mail-2.4.4/lib/mail/message.rb:229:in `deliver'\n  app/controllers/messages_controller.rb:101:in `send_email'\n```\n\nI'm using Rails 3.2.11 on MRI 1.9.3-p374 on OS X 10.8.2\n\nI've tried @phillbaker's workaround but it didn't change the error. I've looked at the output for the emails in the log and it is generating Content IDs and a Message ID\n\nI've tested my code on my staging environment (Heroku with SendGrid) and messages are being sent without a problem.\n. I'm getting the same error code, but with a slightly different message:\n\n```\nNet::SMTPFatalError - 550 Cannot receive from specified address <blah@blah.com>: Unauthenticated senders not allowed\n:\n  /Users/stuey/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/net/smtp.rb:948:in `check_response'\n  /Users/stuey/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/net/smtp.rb:917:in `getok'\n  /Users/stuey/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/net/smtp.rb:832:in `mailfrom'\n  /Users/stuey/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/net/smtp.rb:659:in `send_message'\n  (gem) mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:145:in `block in deliver!'\n  /Users/stuey/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/net/smtp.rb:520:in `start'\n  (gem) mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:144:in `deliver!'\n  (gem) mail-2.4.4/lib/mail/message.rb:2034:in `do_delivery'\n  (gem) mail-2.4.4/lib/mail/message.rb:229:in `block in deliver'\n  (gem) actionmailer-3.2.11/lib/action_mailer/base.rb:415:in `block in deliver_mail'\n  (gem) activesupport-3.2.11/lib/active_support/notifications.rb:123:in `block in instrument'\n  (gem) activesupport-3.2.11/lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n  (gem) activesupport-3.2.11/lib/active_support/notifications.rb:123:in `instrument'\n  (gem) actionmailer-3.2.11/lib/action_mailer/base.rb:413:in `deliver_mail'\n  (gem) mail-2.4.4/lib/mail/message.rb:229:in `deliver'\n  app/controllers/messages_controller.rb:101:in `send_email'\n```\n\nI'm using Rails 3.2.11 on MRI 1.9.3-p374 on OS X 10.8.2\n\nI've tried @phillbaker's workaround but it didn't change the error. I've looked at the output for the emails in the log and it is generating Content IDs and a Message ID\n\nI've tested my code on my staging environment (Heroku with SendGrid) and messages are being sent without a problem.\n. ",
    "amree": "I'm getting the same error as @thicksoup. Should I open a new issue or post the info here?\n. I'm sorry, but I've forgotten where I saw the log. But the problem still exists. Mailcatcher didn't catch any email and there's no error at all in the mailcatcher log (I ran it using `mailcatcher -f -v`). I'm testing it using forgot password from Devise.\n\nI followed your guide from the main page and added these codes in `development.rb`:\n\n``` ruby\nconfig.action_mailer.delivery_method = :smtp\nconfig.action_mailer.smtp_settings = { :address => \"localhost\", :port => 1025 }\n```\n\nThis is the message from Rails server log:\n\n```\nSent mail to aurorius@gmail.com (3516ms)\nDate: Tue, 02 Jul 2013 20:50:08 +0800\nFrom: aurorius@gmail.com\nReply-To: aurorius@gmail.com\nTo: aurorius@gmail.com\nMessage-ID: <51d2cc80761fc_28483ff6a9c349e030060@eemacpro.local.mail>\nSubject: Reset password instructions\nMime-Version: 1.0\nContent-Type: text/html;\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\n<p>Hello aurorius@gmail.com!</p>\n\n<p>Someone has requested a link to change your password, and you can do this through the link below.</p>\n\n<p><a href=\"http://localhost:3000/users/password/edit?reset_password_token=QP4kFmTzSqMUH\">Change my password</a></p>\n\n<p>If you didn't request this, please ignore this email.</p>\n<p>Your password won't change until you access the link above and create a new one.</p>\n\nRedirected to http://localhost:3000/users/sign_in\nCompleted 302 Found in 3590ms (ActiveRecord: 0.0ms)\n```\n\nI tried sending email using plain old ruby with this script and it mailcatcher did catch it successfully:\n\n``` ruby\n#!/usr/bin/env ruby\n\nrequire 'net/smtp'\nrequire 'time'\n\ndef send_message(smtp, from, to)\n  msg = <<END_OF_MESSAGE\n  From: #{from}\n  Reply-to: #{from}\n  To: #{to}\n  Subject: Reset password instructions\n  Date: #{Time.now.rfc2822}\n  Message-ID: <51cb31c2b88e3_110ce3fe8b44349dc9484c@eemacpro.local.mail>\n  Mime-Version: 1.0\n  Content-Type: text/html; charset=UTF-8\n  Content-Transfer-Encoding: 7bit\n\n  Hello world!\nEND_OF_MESSAGE\n\n  smtp.send_message(msg, from, to)\nend\n\nNet::SMTP.start('localhost', 1025) do |smtp|\n  send_message(smtp, 'aurorius@gmail.com', 'aurorius@gmail.com')\nend\n```\n\nI tried checking `/var/log/mail.log` but there's nothing useful. By the way, the full source code for my app is available at [http://github.com/amree/bertukar/](http://github.com/amree/bertukar/).\n. Ah, I didn't mention it earlier, I'm still testing mailcatcher, so, the new codes haven't been pushed to the repo. But as I've mentioned earlier, I've added these two lines in the config:\n\n``` ruby\nconfig.action_mailer.delivery_method = :smtp\nconfig.action_mailer.smtp_settings = { :address => \"localhost\", :port => 1025 }\n```\n. I'm getting the same error as @thicksoup. Should I open a new issue or post the info here?\n. I'm sorry, but I've forgotten where I saw the log. But the problem still exists. Mailcatcher didn't catch any email and there's no error at all in the mailcatcher log (I ran it using `mailcatcher -f -v`). I'm testing it using forgot password from Devise.\n\nI followed your guide from the main page and added these codes in `development.rb`:\n\n``` ruby\nconfig.action_mailer.delivery_method = :smtp\nconfig.action_mailer.smtp_settings = { :address => \"localhost\", :port => 1025 }\n```\n\nThis is the message from Rails server log:\n\n```\nSent mail to aurorius@gmail.com (3516ms)\nDate: Tue, 02 Jul 2013 20:50:08 +0800\nFrom: aurorius@gmail.com\nReply-To: aurorius@gmail.com\nTo: aurorius@gmail.com\nMessage-ID: <51d2cc80761fc_28483ff6a9c349e030060@eemacpro.local.mail>\nSubject: Reset password instructions\nMime-Version: 1.0\nContent-Type: text/html;\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\n<p>Hello aurorius@gmail.com!</p>\n\n<p>Someone has requested a link to change your password, and you can do this through the link below.</p>\n\n<p><a href=\"http://localhost:3000/users/password/edit?reset_password_token=QP4kFmTzSqMUH\">Change my password</a></p>\n\n<p>If you didn't request this, please ignore this email.</p>\n<p>Your password won't change until you access the link above and create a new one.</p>\n\nRedirected to http://localhost:3000/users/sign_in\nCompleted 302 Found in 3590ms (ActiveRecord: 0.0ms)\n```\n\nI tried sending email using plain old ruby with this script and it mailcatcher did catch it successfully:\n\n``` ruby\n#!/usr/bin/env ruby\n\nrequire 'net/smtp'\nrequire 'time'\n\ndef send_message(smtp, from, to)\n  msg = <<END_OF_MESSAGE\n  From: #{from}\n  Reply-to: #{from}\n  To: #{to}\n  Subject: Reset password instructions\n  Date: #{Time.now.rfc2822}\n  Message-ID: <51cb31c2b88e3_110ce3fe8b44349dc9484c@eemacpro.local.mail>\n  Mime-Version: 1.0\n  Content-Type: text/html; charset=UTF-8\n  Content-Transfer-Encoding: 7bit\n\n  Hello world!\nEND_OF_MESSAGE\n\n  smtp.send_message(msg, from, to)\nend\n\nNet::SMTP.start('localhost', 1025) do |smtp|\n  send_message(smtp, 'aurorius@gmail.com', 'aurorius@gmail.com')\nend\n```\n\nI tried checking `/var/log/mail.log` but there's nothing useful. By the way, the full source code for my app is available at [http://github.com/amree/bertukar/](http://github.com/amree/bertukar/).\n. Ah, I didn't mention it earlier, I'm still testing mailcatcher, so, the new codes haven't been pushed to the repo. But as I've mentioned earlier, I've added these two lines in the config:\n\n``` ruby\nconfig.action_mailer.delivery_method = :smtp\nconfig.action_mailer.smtp_settings = { :address => \"localhost\", :port => 1025 }\n```\n. ",
    "ekurennyy": "I have the same error without using mailcatcher and still haven't any ideas why this happened. Tried to use gmail and Mandrill with different ENV configs and always have this problem.\n. I have the same error without using mailcatcher and still haven't any ideas why this happened. Tried to use gmail and Mandrill with different ENV configs and always have this problem.\n. ",
    "Xunzi229": " When\uff1a\r\n=============== Phusion Passenger Standalone web server started ===============\r\nEnvironment: production\r\n\r\nthere will be a mistake: Send E-mail\r\n[2016-12-24T16:03:08.167819 #2061]  INFO -- : [c3bbd1b9-167b-4e7c-8dfb-070e25950976] Completed 500 Internal Server Error in 1430ms (ActiveRecord: 16.9ms)\r\n FATAL -- : [c3bbd1b9-167b-4e7c-8dfb-070e25950976] Net::SMTPFatalError (553 authentication is required,126 smtp1,C8mowADnHOa6K15YNQFmAw--.10596S3 1482566588\r\n\r\nThe reason\uff1a\r\nI set the value of the variable system is wrong, should be set in the/etc/profile or/etc/environment, I set in ~ /. bashrc below\r\nCan't read \uff0clead to send mail mistakes.  When\uff1a\r\n=============== Phusion Passenger Standalone web server started ===============\r\nEnvironment: production\r\n\r\nthere will be a mistake: Send E-mail\r\n[2016-12-24T16:03:08.167819 #2061]  INFO -- : [c3bbd1b9-167b-4e7c-8dfb-070e25950976] Completed 500 Internal Server Error in 1430ms (ActiveRecord: 16.9ms)\r\n FATAL -- : [c3bbd1b9-167b-4e7c-8dfb-070e25950976] Net::SMTPFatalError (553 authentication is required,126 smtp1,C8mowADnHOa6K15YNQFmAw--.10596S3 1482566588\r\n\r\nThe reason\uff1a\r\nI set the value of the variable system is wrong, should be set in the/etc/profile or/etc/environment, I set in ~ /. bashrc below\r\nCan't read \uff0clead to send mail mistakes. ",
    "dounan": "Recently ran into this issue on mail 2.4.3 (not sure if it has been fixed yet), but the problem for me was that the auto generated content-id contains your computer hostname, and my computer hostname had an illegal character (apostrophe) in it, causing the auto generated content-id to fail at parsing.\r\n\r\nThe fix is to change your computer hostname to something without illegal characters. \r\nFor mac:\r\nscutil --set HostName YOUR_NEW_HOSTNAME. Done. https://github.com/mikel/mail/issues/1073. Recently ran into this issue on mail 2.4.3 (not sure if it has been fixed yet), but the problem for me was that the auto generated content-id contains your computer hostname, and my computer hostname had an illegal character (apostrophe) in it, causing the auto generated content-id to fail at parsing.\r\n\r\nThe fix is to change your computer hostname to something without illegal characters. \r\nFor mac:\r\nscutil --set HostName YOUR_NEW_HOSTNAME. Done. https://github.com/mikel/mail/issues/1073. ",
    "jondkinney": "Thanks for the note @sj26. I do have all those settings in test.rb. I can boot the test console and manually trigger a message delivery and it shows up in MailCatcher. However, from within a cucumber scenario they just don't show up for some reason. I can assert that they are sent (using pickle for that) so perhaps that's part of the problem (maybe they're getting stubbed out or something), but I can't seem to get past it :/ \n\nThe raw messages do show in the test.log...\n\nAny thoughts?\n\nThanks!\n. Just ran my full test suite and rspec seems to be working fine to send them to MailCatcher with my current settings, so it is definitely just cucumber...\n. I think cucumber is set to use test for the environment. If I run a scenario at the command line and inject PRY as one of the steps which lets me enter the console mid test, then type `Rails.env` it reports \"test\" back. Nothing in my env.rb for cucumber overrides any mailer settings though.\n. Hmm, only think I can think that could maybe do it would be this setting:\n\n`Capybara.server_port = 3333`\n\nI did that so when selenium connects it works better (lol... there was a reason, I just can't remember).\n\nDo you think that could have something to do with it?\n. Thanks for the note @sj26. I do have all those settings in test.rb. I can boot the test console and manually trigger a message delivery and it shows up in MailCatcher. However, from within a cucumber scenario they just don't show up for some reason. I can assert that they are sent (using pickle for that) so perhaps that's part of the problem (maybe they're getting stubbed out or something), but I can't seem to get past it :/ \n\nThe raw messages do show in the test.log...\n\nAny thoughts?\n\nThanks!\n. Just ran my full test suite and rspec seems to be working fine to send them to MailCatcher with my current settings, so it is definitely just cucumber...\n. I think cucumber is set to use test for the environment. If I run a scenario at the command line and inject PRY as one of the steps which lets me enter the console mid test, then type `Rails.env` it reports \"test\" back. Nothing in my env.rb for cucumber overrides any mailer settings though.\n. Hmm, only think I can think that could maybe do it would be this setting:\n\n`Capybara.server_port = 3333`\n\nI did that so when selenium connects it works better (lol... there was a reason, I just can't remember).\n\nDo you think that could have something to do with it?\n. ",
    "attiks": "@sj26 you're right, for the websockets nginx needs to be compiled with https://github.com/yaoweibin/nginx_tcp_proxy_module but it will work without it, you just need to refresh manually.\n\nWhen I find the time I'll try recompiling my nginx with websockets support.\n. Cool, thanks\n. @sj26 you're right, for the websockets nginx needs to be compiled with https://github.com/yaoweibin/nginx_tcp_proxy_module but it will work without it, you just need to refresh manually.\n\nWhen I find the time I'll try recompiling my nginx with websockets support.\n. Cool, thanks\n. ",
    "huglester": "Hello\n\nAny idea on how to achieve this? \n\nThank you!\n. Hello\n\nAny idea on how to achieve this? \n\nThank you!\n. ",
    "raskhadafi": "I used this config for nginx https://gist.github.com/raskhadafi/497e4d108e98aac26dca\nBut SMTP Forwarding is missing.\n. I used this config for nginx https://gist.github.com/raskhadafi/497e4d108e98aac26dca\nBut SMTP Forwarding is missing.\n. ",
    "gaving": ":+1: \n. :+1: \n. ",
    "thomasfedb": "Thanks.\n. Thanks.\n. ",
    "stefanahman": "Crashes for me as well using version 0.2.4\n\n```\ngems/eventmachine-1.0.4/lib/eventmachine.rb:1455:in `event_callback': undefined method `close' for 11:Fixnum (NoMethodError)\n```\n. Woops, sorry. Thanks.\n. Crashes for me as well using version 0.2.4\n\n```\ngems/eventmachine-1.0.4/lib/eventmachine.rb:1455:in `event_callback': undefined method `close' for 11:Fixnum (NoMethodError)\n```\n. Woops, sorry. Thanks.\n. ",
    "SachinRJadhav": "```\r\nStarting MailCatcher\r\n==> smtp://127.0.0.1:1025\r\n==> http://127.0.0.1:1080\r\nHaml::TempleEngine: Option :outvar is invalid\r\n/home/.rvm/gems/ruby-2.3.0/gems/eventmachine-1.2.3/lib/eventmachine.rb:1489:in `event_callback': undefined method `close' for 18:Fixnum (NoMethodError)\r\nDid you mean?  clone\r\n\tfrom /home/.rvm/gems/ruby-2.3.0/gems/eventmachine-1.2.3/lib/eventmachine.rb:194:in `run_machine'\r\n\tfrom /home/.rvm/gems/ruby-2.3.0/gems/eventmachine-1.2.3/lib/eventmachine.rb:194:in `run'\r\n\tfrom /home/.rvm/gems/ruby-2.3.0/gems/mailcatcher-0.2.4/lib/mail_catcher.rb:21:in `run'\r\n\tfrom /home/.rvm/gems/ruby-2.3.0/gems/mailcatcher-0.2.4/bin/mailcatcher:44:in `<top (required)>'\r\n\tfrom /home/.rvm/gems/ruby-2.3.0/bin/mailcatcher:23:in `load'\r\n\tfrom /home/.rvm/gems/ruby-2.3.0/bin/mailcatcher:23:in `<main>'\r\n\tfrom /home/.rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `eval'\r\n\tfrom /home/.rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `<main>'\r\n```. ```\r\nStarting MailCatcher\r\n==> smtp://127.0.0.1:1025\r\n==> http://127.0.0.1:1080\r\nHaml::TempleEngine: Option :outvar is invalid\r\n/home/.rvm/gems/ruby-2.3.0/gems/eventmachine-1.2.3/lib/eventmachine.rb:1489:in `event_callback': undefined method `close' for 18:Fixnum (NoMethodError)\r\nDid you mean?  clone\r\n\tfrom /home/.rvm/gems/ruby-2.3.0/gems/eventmachine-1.2.3/lib/eventmachine.rb:194:in `run_machine'\r\n\tfrom /home/.rvm/gems/ruby-2.3.0/gems/eventmachine-1.2.3/lib/eventmachine.rb:194:in `run'\r\n\tfrom /home/.rvm/gems/ruby-2.3.0/gems/mailcatcher-0.2.4/lib/mail_catcher.rb:21:in `run'\r\n\tfrom /home/.rvm/gems/ruby-2.3.0/gems/mailcatcher-0.2.4/bin/mailcatcher:44:in `<top (required)>'\r\n\tfrom /home/.rvm/gems/ruby-2.3.0/bin/mailcatcher:23:in `load'\r\n\tfrom /home/.rvm/gems/ruby-2.3.0/bin/mailcatcher:23:in `<main>'\r\n\tfrom /home/.rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `eval'\r\n\tfrom /home/.rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `<main>'\r\n```. ",
    "gondo": "this doesn't work upon refresh.\nif im just viewing localhost:1080 than emails are ordered properly, as they come they appear on the top.\nbut as soon as i refresh the page (habit, but reopening localhost:1080 will cause this as well) the order is wrong, the first message is the oldest one.\n. ok found an issue. basically i had to send From header, otherwise mailcatcher would just and there is nothing to log this error.\ni've managed to get error log by total accident (receiving mail from cron job)\n\n> /Library/Ruby/Gems/1.8/gems/mail-2.5.4/lib/mail/check_delivery_params.rb:5:in `check_delivery_params': An SMTP From address is required to send a message. Set the message smtp_envelope_from, return_path, sender, or from address. (ArgumentError)\n> from /Library/Ruby/Gems/1.8/gems/mail-2.5.4/lib/mail/network/delivery_methods/smtp.rb:98:in`deliver!'\n> from /Library/Ruby/Gems/1.8/gems/mail-2.5.4/lib/mail/message.rb:2129:in `do_delivery'\n> from /Library/Ruby/Gems/1.8/gems/mail-2.5.4/lib/mail/message.rb:234:in`deliver'\n> from /Library/Ruby/Gems/1.8/gems/mailcatcher-0.5.12/bin/catchmail:50\n> from /usr/bin/catchmail:19:in `load'\n> from /usr/bin/catchmail:19\n\nthe question still stands, is there any logging system in place?\nhow to debug similar issues in other languages?\nand additionally, is it really necessary to require From in every email?\nif so, it would be nice to mentioned this in documentation. i've created pull request for php #95\n. the problem is, that send_from is marked as Windows directive http://www.php.net/manual/en/mail.configuration.php#ini.sendmail-from\nso its not set (or not even used) on Linux or OS X.\nthe confusing part is, that sending mail via mail() without specifying From header works via sendmail.\n. OSX Yosemite use Ruby 2, so mailcatcher doesnt work unless Ruby version is changed\n. this doesn't work upon refresh.\nif im just viewing localhost:1080 than emails are ordered properly, as they come they appear on the top.\nbut as soon as i refresh the page (habit, but reopening localhost:1080 will cause this as well) the order is wrong, the first message is the oldest one.\n. ok found an issue. basically i had to send From header, otherwise mailcatcher would just and there is nothing to log this error.\ni've managed to get error log by total accident (receiving mail from cron job)\n\n> /Library/Ruby/Gems/1.8/gems/mail-2.5.4/lib/mail/check_delivery_params.rb:5:in `check_delivery_params': An SMTP From address is required to send a message. Set the message smtp_envelope_from, return_path, sender, or from address. (ArgumentError)\n> from /Library/Ruby/Gems/1.8/gems/mail-2.5.4/lib/mail/network/delivery_methods/smtp.rb:98:in`deliver!'\n> from /Library/Ruby/Gems/1.8/gems/mail-2.5.4/lib/mail/message.rb:2129:in `do_delivery'\n> from /Library/Ruby/Gems/1.8/gems/mail-2.5.4/lib/mail/message.rb:234:in`deliver'\n> from /Library/Ruby/Gems/1.8/gems/mailcatcher-0.5.12/bin/catchmail:50\n> from /usr/bin/catchmail:19:in `load'\n> from /usr/bin/catchmail:19\n\nthe question still stands, is there any logging system in place?\nhow to debug similar issues in other languages?\nand additionally, is it really necessary to require From in every email?\nif so, it would be nice to mentioned this in documentation. i've created pull request for php #95\n. the problem is, that send_from is marked as Windows directive http://www.php.net/manual/en/mail.configuration.php#ini.sendmail-from\nso its not set (or not even used) on Linux or OS X.\nthe confusing part is, that sending mail via mail() without specifying From header works via sendmail.\n. OSX Yosemite use Ruby 2, so mailcatcher doesnt work unless Ruby version is changed\n. ",
    "smith": "Thanks for your reply.\n\nI'm using 1.9.3-p194. My Procfile looks like:\n\n```\nmailcatcher: mailcatcher --foreground \n```\n\nand a Gemfile like:\n\n```\nsource :rubygems                                                                                                                                                                                                                                             \n\ngem 'foreman', '0.61.0'                                                          \ngem 'mailcatcher', '0.5.10'          \n```\n\nIf I do add the line you mentioned to ./bin/mailcatcher (when I `bundle --binstubs`) it does fix the problem for me, but otherwise it behaves as reported.\n. Thanks for your reply.\n\nI'm using 1.9.3-p194. My Procfile looks like:\n\n```\nmailcatcher: mailcatcher --foreground \n```\n\nand a Gemfile like:\n\n```\nsource :rubygems                                                                                                                                                                                                                                             \n\ngem 'foreman', '0.61.0'                                                          \ngem 'mailcatcher', '0.5.10'          \n```\n\nIf I do add the line you mentioned to ./bin/mailcatcher (when I `bundle --binstubs`) it does fix the problem for me, but otherwise it behaves as reported.\n. ",
    "PikachuEXE": "+1\nNow I am forced to use `0.2.4` since I have upgraded `haml` :S\n. I think most gems lock the dependency version using `~> xx` to avoid possible breaking changes like `haml 4.0`\nBut that also makes it harder to test against new versions of dependencies\n\nI like putting all things into `Gemfile` even it's dev tool\nSo that others know what tools are being used\n. +1\nNow I am forced to use `0.2.4` since I have upgraded `haml` :S\n. I think most gems lock the dependency version using `~> xx` to avoid possible breaking changes like `haml 4.0`\nBut that also makes it harder to test against new versions of dependencies\n\nI like putting all things into `Gemfile` even it's dev tool\nSo that others know what tools are being used\n. ",
    "matthewrudy": "that was my reason too @PikachuEXE \n\nI can't decide though if it should be in my gemfile at all,\nor just in my bin/setup\n. alternatively, we could set mailcatcher to have much looser dependencies.\n\nProbably;\n- haml >= 3.1\n- activesupport >= 3.0\n- mail >= 2.3\n- sinatra >= 1.2\n. indeed @sj26.\nit's in my bin/setup.dev\n. that was my reason too @PikachuEXE \n\nI can't decide though if it should be in my gemfile at all,\nor just in my bin/setup\n. alternatively, we could set mailcatcher to have much looser dependencies.\n\nProbably;\n- haml >= 3.1\n- activesupport >= 3.0\n- mail >= 2.3\n- sinatra >= 1.2\n. indeed @sj26.\nit's in my bin/setup.dev\n. ",
    "Bigdeal76": "I bought a wifi textme free app for my iPhone and I accidentally deleted a complete text log and need to retrieve it!\n. I bought a wifi textme free app for my iPhone and I accidentally deleted a complete text log and need to retrieve it!\n. ",
    "kellym": "If we had to manually install every developer tool we use, it would be a huge headache.  Adding `mailcatcher` to a `:development` group should be considered standard practice. \n\nRegardless of that opinion, an updated version supporting HAML 4 just makes sense.\n. If we had to manually install every developer tool we use, it would be a huge headache.  Adding `mailcatcher` to a `:development` group should be considered standard practice. \n\nRegardless of that opinion, an updated version supporting HAML 4 just makes sense.\n. ",
    "adamyonk": "I agree with @kellym.\n. I agree with @kellym.\n. ",
    "andrewpthorp": "If you are developing this as a standalone application that shouldn't be included in Gemfile's, (even though the whole idea of groups in Gemfiles is to solve this problem), I would suggest you follow the same pattern as others and release it as a standalone installer, and not package it up as a RubyGem.\n\nThat being said, this patch should be merged regardless, as it's simply updating a dependency of mailcatcher which doesn't break any backwards compatibility.\n. If you are developing this as a standalone application that shouldn't be included in Gemfile's, (even though the whole idea of groups in Gemfiles is to solve this problem), I would suggest you follow the same pattern as others and release it as a standalone installer, and not package it up as a RubyGem.\n\nThat being said, this patch should be merged regardless, as it's simply updating a dependency of mailcatcher which doesn't break any backwards compatibility.\n. ",
    "felixbuenemann": "Nice!\n\n@sj26: Can we get a new gem release with this fix?\n. @chrishough eventmachine 1.0.3 is not compatible with ruby 2.2, so you need to use ruby 2.1 or older.\n. Nice!\n\n@sj26: Can we get a new gem release with this fix?\n. @chrishough eventmachine 1.0.3 is not compatible with ruby 2.2, so you need to use ruby 2.1 or older.\n. ",
    "tomtaylor": "Ah OK. Thin uses a C extension, which doesn't seem to compile out of the box in JRuby 1.7.3. From a quick browse around, it sounds like it is possible to run it, but it's not recommended.\n. Ah OK. Thin uses a C extension, which doesn't seem to compile out of the box in JRuby 1.7.3. From a quick browse around, it sounds like it is possible to run it, but it's not recommended.\n. ",
    "camsong": "https://github.com/camsong/mailcatcher-jruby\nTry this, it works fine with JRuby on Windows/Linux/Max out of box, just install the gem `mailcatcher-jruby`\nIt replaced Thin with Puma, left websocket unimplemented, and fixed much more with JRuby.\n. https://github.com/camsong/mailcatcher-jruby\nTry this, it works fine with JRuby on Windows/Linux/Max out of box, just install the gem `mailcatcher-jruby`\nIt replaced Thin with Puma, left websocket unimplemented, and fixed much more with JRuby.\n. ",
    "ThiefMaster": "Update: Apparently this was caused by the old sqlite3 version (sqlite-devel-3.3.6-5.x86_64) on the machine. After downloading a sqlite3 tarball and building it from source and reinstalling the sqlite3 gem it seem to work.\n. Update: Apparently this was caused by the old sqlite3 version (sqlite-devel-3.3.6-5.x86_64) on the machine. After downloading a sqlite3 tarball and building it from source and reinstalling the sqlite3 gem it seem to work.\n. ",
    "hmaack": "Hi @sj26 there is a typo in your Procfile excerpt ( BundleR ) and I am using Bundler.clean_exec like this, your example wasnt starting mailcatcher in foreground. No matter, thank you at least for the right approach.  \nMy version overview: \n- bundler (1.6.3)\n- mailcatcher (0.5.12)\n- ruby 2.1.0p0 (2013-12-25 revision 44422) [x86_64-darwin12.0]\n\n``` ruby\n# Procfile\nweb: thin ...  \nmailcatcher: ruby -rbundler/setup -e \"Bundler.clean_exec('mailcatcher --foreground')\"\n```\n. Hi @sj26 there is a typo in your Procfile excerpt ( BundleR ) and I am using Bundler.clean_exec like this, your example wasnt starting mailcatcher in foreground. No matter, thank you at least for the right approach.  \nMy version overview: \n- bundler (1.6.3)\n- mailcatcher (0.5.12)\n- ruby 2.1.0p0 (2013-12-25 revision 44422) [x86_64-darwin12.0]\n\n``` ruby\n# Procfile\nweb: thin ...  \nmailcatcher: ruby -rbundler/setup -e \"Bundler.clean_exec('mailcatcher --foreground')\"\n```\n. ",
    "st32lthx": "Yes, I get the markup of the dashboard when I run curl. Can I use something like that to confirm my local test emails? Just curious :)\n\nAbout port forwarding: I run my rails app with port forwarding (for example: 3000, 8080) so the forwarding works there. It is kind of strange that Vagrant can't forward mailcatcher on 1080. Maybe I am doing something wrong. I read another article about setting up mailcatcher on a VM, and that article suggested another port, I tried it and still no success :(\n\nAll I need to do is to use Mailcatcher to confirm emails in my rails app in development mode.\n\nI would appreciate any help :) \n\nThanks again!\n. Awesome !!!! Thanks very much! I killed the process, and then I did what you said: (mailcatcher --ip=0.0.0.0) and I accessed it on the host on http://localhost:1080\n\nThanks again!\n. Yes, I get the markup of the dashboard when I run curl. Can I use something like that to confirm my local test emails? Just curious :)\n\nAbout port forwarding: I run my rails app with port forwarding (for example: 3000, 8080) so the forwarding works there. It is kind of strange that Vagrant can't forward mailcatcher on 1080. Maybe I am doing something wrong. I read another article about setting up mailcatcher on a VM, and that article suggested another port, I tried it and still no success :(\n\nAll I need to do is to use Mailcatcher to confirm emails in my rails app in development mode.\n\nI would appreciate any help :) \n\nThanks again!\n. Awesome !!!! Thanks very much! I killed the process, and then I did what you said: (mailcatcher --ip=0.0.0.0) and I accessed it on the host on http://localhost:1080\n\nThanks again!\n. ",
    "joeyfrich": "I tried the command above but got the error \"invalid option: --ip=0.0.0.0 (OptionParser::InvalidOption)\"\nInstead, this command worked for me:\n\n<pre>mailcatcher --http-ip=0.0.0.0</pre>\n. I tried the command above but got the error \"invalid option: --ip=0.0.0.0 (OptionParser::InvalidOption)\"\nInstead, this command worked for me:\n\n<pre>mailcatcher --http-ip=0.0.0.0</pre>\n. ",
    "augsteyer": "This may be a bit of an old thread, but I have somewhat the same issue. I get a connection refused (ERR_CONNECTION_REFUSED) when I try to login through the browser. However, when I curl, it outputs the correct HTML. Any reason why the browser can be blocking this call?\n\nFixed: just a matter of vagrant blocking ports to outside world, just need to forward port in Vagrant file like so \"config.vm.network :forwarded_port, guest: 1080, host: 1080\"\n. This may be a bit of an old thread, but I have somewhat the same issue. I get a connection refused (ERR_CONNECTION_REFUSED) when I try to login through the browser. However, when I curl, it outputs the correct HTML. Any reason why the browser can be blocking this call?\n\nFixed: just a matter of vagrant blocking ports to outside world, just need to forward port in Vagrant file like so \"config.vm.network :forwarded_port, guest: 1080, host: 1080\"\n. ",
    "herveguetin": "I confirm that, on a Vagrant Ubuntu VM it works by :\n- adding a port forwarding in Vagrantfile\n  => `config.vm.network :forwarded_port, host: 1080, guest: 1080`\n- launching mailcatcher\n  => `mailcatcher --http-ip=0.0.0.0`\n. I confirm that, on a Vagrant Ubuntu VM it works by :\n- adding a port forwarding in Vagrantfile\n  => `config.vm.network :forwarded_port, host: 1080, guest: 1080`\n- launching mailcatcher\n  => `mailcatcher --http-ip=0.0.0.0`\n. ",
    "mikedhart": "Thank you @sj26 \n. Thank you @sj26 \n. ",
    "Moulde": "Thanks, the command mailcatcher --ip=0.0.0.0 solved my issues. But i think in my issue it was nothing more than the mailcatcher daemon not running - i just didnt know you could start it using that command.\n. Thanks, the command mailcatcher --ip=0.0.0.0 solved my issues. But i think in my issue it was nothing more than the mailcatcher daemon not running - i just didnt know you could start it using that command.\n. ",
    "sgb-io": "thanks @sj26 !\n. @danlo +1, also fixed for me\n. thanks @sj26 !\n. @danlo +1, also fixed for me\n. ",
    "cristianfrasineanu": "Indeed the solution with the --http-ip flag did the trick, cheers!\n. Indeed the solution with the --http-ip flag did the trick, cheers!\n. ",
    "facundofarias": "I just did mailcatcher --ip 192.168.10.10, in which 192.168.10.10 is the VM IP.. I just did mailcatcher --ip 192.168.10.10, in which 192.168.10.10 is the VM IP.. ",
    "fschwahn": "Ah, I just ran into this issue, amazing bug report.\n@sj26 are you planning to release a new version with this fix? Thanks!\n. Ah, I just ran into this issue, amazing bug report.\n@sj26 are you planning to release a new version with this fix? Thanks!\n. ",
    "tylerlee": "Just hit (what I think) is a similar issue: had an image tag with a url where the period in the file extension \".jpg\" was right at the line break.\n\nwhen you view the source of the email in mailcatcher that period gets converted to an equal sign, obviously breaking that image link. rename that file to something where the period doesn't sit right on top of that break and the code renders correctly. just a heads up to anyone else hitting that issue.\n\nthanks for the work sj\n. Just hit (what I think) is a similar issue: had an image tag with a url where the period in the file extension \".jpg\" was right at the line break.\n\nwhen you view the source of the email in mailcatcher that period gets converted to an equal sign, obviously breaking that image link. rename that file to something where the period doesn't sit right on top of that break and the code renders correctly. just a heads up to anyone else hitting that issue.\n\nthanks for the work sj\n. ",
    "hoshposh": "Awesome, thanks! That worked great :)\n. Awesome, thanks! That worked great :)\n. ",
    "serg-kovalev": "good option!\n. good option!\n. ",
    "jirutka": "+1\n. +1\n. ",
    "dideler": "For reference in case it helps others.\n\nThe first time I tried to install it, I got a failure response after waiting a very long time:\n\n```\n$ gem install mailcatcher\nERROR:  While executing gem ... (Gem::RemoteFetcher::UnknownHostError)\n    no such name (https://api.rubygems.org/quick/Marshal.4.8/activesupport-3.1.9.gemspec.rz)\n```\n\nSecond time it worked:\n\n```\n$ gem install mailcatcher\nFetching: activesupport-3.2.16.gem (100%)\nSuccessfully installed activesupport-3.2.16\nFetching: rack-protection-1.5.2.gem (100%)\nSuccessfully installed rack-protection-1.5.2\nFetching: sinatra-1.4.4.gem (100%)\nSuccessfully installed sinatra-1.4.4\nFetching: thin-1.5.1.gem (100%)\nBuilding native extensions.  This could take a while...\nSuccessfully installed thin-1.5.1\nFetching: skinny-0.2.3.gem (100%)\nSuccessfully installed skinny-0.2.3\nFetching: mailcatcher-0.5.12.gem (100%)\nSuccessfully installed mailcatcher-0.5.12\n6 gems installed\n```\n. For reference in case it helps others.\n\nThe first time I tried to install it, I got a failure response after waiting a very long time:\n\n```\n$ gem install mailcatcher\nERROR:  While executing gem ... (Gem::RemoteFetcher::UnknownHostError)\n    no such name (https://api.rubygems.org/quick/Marshal.4.8/activesupport-3.1.9.gemspec.rz)\n```\n\nSecond time it worked:\n\n```\n$ gem install mailcatcher\nFetching: activesupport-3.2.16.gem (100%)\nSuccessfully installed activesupport-3.2.16\nFetching: rack-protection-1.5.2.gem (100%)\nSuccessfully installed rack-protection-1.5.2\nFetching: sinatra-1.4.4.gem (100%)\nSuccessfully installed sinatra-1.4.4\nFetching: thin-1.5.1.gem (100%)\nBuilding native extensions.  This could take a while...\nSuccessfully installed thin-1.5.1\nFetching: skinny-0.2.3.gem (100%)\nSuccessfully installed skinny-0.2.3\nFetching: mailcatcher-0.5.12.gem (100%)\nSuccessfully installed mailcatcher-0.5.12\n6 gems installed\n```\n. ",
    "igneus": "I removed the special format and moved the plain text html-decoration to the client side.\n\nAt the same time I moved to the client side the target attribute setting you had on the server side for the html format.\n. Which ruby version(s) is the memory-leak experienced on? I am trying hard to reproduce it, but without success.\n. Thanks.\n\nConcerning leaving for two days: I hoped I would be able to reproduce the \"+500kB per page refresh\" scenario described by @datamuc - it would be much easier to debug.\n. I removed the special format and moved the plain text html-decoration to the client side.\n\nAt the same time I moved to the client side the target attribute setting you had on the server side for the html format.\n. Which ruby version(s) is the memory-leak experienced on? I am trying hard to reproduce it, but without success.\n. Thanks.\n\nConcerning leaving for two days: I hoped I would be able to reproduce the \"+500kB per page refresh\" scenario described by @datamuc - it would be much easier to debug.\n. ",
    "mongrelion": "+1\n. +1\n. ",
    "tuttinator": "+1\n. Thank you! And thank you for all your work on this project - it is incredibly useful.\n. +1\n. Thank you! And thank you for all your work on this project - it is incredibly useful.\n. ",
    "lime": "Now that this is added, is there any roadmap to the 0.6.0 release? I'm updating to Rails 4, and will have to use the HEAD version of mailcatcher since 0.5.12 still requires activesupport ~> 3.0.\n\nIf there is something I can help with to get it done, I'd be glad to. :) Thanks for maintaining this great gem!\n. @der-flo, how are you installing the gem? I can replicate the issue by running `bin/mailcatcher` or building and installing the gem, but for me the assets won't load with the previous commit (2ad4ea3) either. Strange.\n\nSorry for pushing untried code, and possibly introducing a bug. I'll have a look and see if I can find the cause. :)\n. Thanks for the heads up @sj26, I guess I can stop my `git bisect`. :)\n. Now that this is added, is there any roadmap to the 0.6.0 release? I'm updating to Rails 4, and will have to use the HEAD version of mailcatcher since 0.5.12 still requires activesupport ~> 3.0.\n\nIf there is something I can help with to get it done, I'd be glad to. :) Thanks for maintaining this great gem!\n. @der-flo, how are you installing the gem? I can replicate the issue by running `bin/mailcatcher` or building and installing the gem, but for me the assets won't load with the previous commit (2ad4ea3) either. Strange.\n\nSorry for pushing untried code, and possibly introducing a bug. I'll have a look and see if I can find the cause. :)\n. Thanks for the heads up @sj26, I guess I can stop my `git bisect`. :)\n. ",
    "sb185219": "I'm experiencing this issue as well\n. I'm experiencing this issue as well\n. ",
    "tomichal": "I'm still seeing the issue - was the change 44262f9 meant to list the latest messages at the top? If yes, then changing the order to ASC does the opposite no?\n. I'm still seeing the issue - was the change 44262f9 meant to list the latest messages at the top? If yes, then changing the order to ASC does the opposite no?\n. ",
    "peterrus": "somewhat related to #28 \n. As WordPress' wp_mail() uses PHPMailer (https://github.com/PHPMailer/PHPMailer) there might be more affected situations\n. Really dirty workaround:\n\n```\nsudo nano /etc/php5/apache2/conf.d/mailcatcher.ini\n```\n\n```\n; Use MailCatcher for mail (http://mailcatcher.me/)\nsendmail_path = /opt/vagrant_ruby/bin/catchmail --smtp-port 25 #\n```\n\nPlace a **#** after the command so additional arguments are ignored. (In most shells **#** starts a comment)\n\n**Restart apache2 afterwards**\n. somewhat related to #28 \n. As WordPress' wp_mail() uses PHPMailer (https://github.com/PHPMailer/PHPMailer) there might be more affected situations\n. Really dirty workaround:\n\n```\nsudo nano /etc/php5/apache2/conf.d/mailcatcher.ini\n```\n\n```\n; Use MailCatcher for mail (http://mailcatcher.me/)\nsendmail_path = /opt/vagrant_ruby/bin/catchmail --smtp-port 25 #\n```\n\nPlace a **#** after the command so additional arguments are ignored. (In most shells **#** starts a comment)\n\n**Restart apache2 afterwards**\n. ",
    "maxgalbu": "Here's the updated gem, to install just download it and do\n\n```\ngem install mailcatcher.gem\n```\n\nhttp://maxgalbu.github.io/mailcatcher.gem\n. Here's the updated gem, to install just download it and do\n\n```\ngem install mailcatcher.gem\n```\n\nhttp://maxgalbu.github.io/mailcatcher.gem\n. ",
    "frankdejonge": "Just had the same issue, the after installing sqlite3 and libsqlite3-dev this was solves as mentioned above. I reckon this issue can be closed.\n. Just had the same issue, the after installing sqlite3 and libsqlite3-dev this was solves as mentioned above. I reckon this issue can be closed.\n. ",
    "cmosguy": "None of these resolved my issue.  I had to do this to get it installed on Ubuntu:\n\n``` bash\nsudo apt-get install ruby1.9.1-dev\n```\n. None of these resolved my issue.  I had to do this to get it installed on Ubuntu:\n\n``` bash\nsudo apt-get install ruby1.9.1-dev\n```\n. ",
    "yannickoo": "@cmosguy you made it! :+1: \n. @cmosguy you made it! :+1: \n. ",
    "robclancy": "Not sure why dependencies aren't noted on the website when installing the gem is building it natively with dependencies required...\n. Not sure why dependencies aren't noted on the website when installing the gem is building it natively with dependencies required...\n. ",
    "cordoval": "my use case was when i was testing swiftmailer php mailer in travis with this, there were some tests that require this, for functional test to be fixed\n. my use case was when i was testing swiftmailer php mailer in travis with this, there were some tests that require this, for functional test to be fixed\n. ",
    "dobermai": "I have exactly the same problem. Did you manage to resolve this issue in the meantime?\n. I'm also on CentOS5 and cannot upgrade. Very annoying problem but I don't have a clue where to start patching as I'm not a Ruby guy. :(\n. This is a serious issue for us and broke our development vagrant VMs. While slightly unrelated, how can this be fixed when using RVM? We're using the following commands for installing mailcatcher:\n\n```\nrvm default@mailcatcher --create do gem install mailcatcher\nrvm wrapper default@mailcatcher --no-prefix mailcatcher catchmail\ngem install mailcatcher\n```\n\nI can of course manually do \n\n```\ngem install i18n -v 0.6.11\ngem uninstall i18n -Ix --version '>0.6.11'\n```\n\nbut this won't help with the rvm wrapper scripts. Any idea how to fix this?\n. Just in case someone is interested, this is how I got it working with RVM:\n\n```\nrvm default@mailcatcher --create do gem install mailcatcher\nrvm wrapper default@mailcatcher --no-prefix mailcatcher catchmail\nrvm default@mailcatcher do gem install i18n -v 0.6.11\nrvm default@mailcatcher do gem uninstall i18n -Ix --version '>0.6.11\n```\n. I have exactly the same problem. Did you manage to resolve this issue in the meantime?\n. I'm also on CentOS5 and cannot upgrade. Very annoying problem but I don't have a clue where to start patching as I'm not a Ruby guy. :(\n. This is a serious issue for us and broke our development vagrant VMs. While slightly unrelated, how can this be fixed when using RVM? We're using the following commands for installing mailcatcher:\n\n```\nrvm default@mailcatcher --create do gem install mailcatcher\nrvm wrapper default@mailcatcher --no-prefix mailcatcher catchmail\ngem install mailcatcher\n```\n\nI can of course manually do \n\n```\ngem install i18n -v 0.6.11\ngem uninstall i18n -Ix --version '>0.6.11'\n```\n\nbut this won't help with the rvm wrapper scripts. Any idea how to fix this?\n. Just in case someone is interested, this is how I got it working with RVM:\n\n```\nrvm default@mailcatcher --create do gem install mailcatcher\nrvm wrapper default@mailcatcher --no-prefix mailcatcher catchmail\nrvm default@mailcatcher do gem install i18n -v 0.6.11\nrvm default@mailcatcher do gem uninstall i18n -Ix --version '>0.6.11\n```\n. ",
    "ajpierson": "nope, never figured it out, what OS are you using?  I'm on CentOS 5\n. it must be a problem with RedHat/Centos 5.  I'm using centos 5 in a vagrant\nbox.  I ended up just running mailcatcher on my mac and configuring my app\nto connect to it on the mac.  If you are able to get it figured out I'd\nlove to hear about it.\n\nOn Fri, Feb 28, 2014 at 9:11 AM, Jeremy Fairbank\nnotifications@github.comwrote:\n\n> I'm getting the same issue on my staging environment,RHEL 5. However, I\n> don't get the issue on my development environment, Ubuntu 12.04.\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/sj26/mailcatcher/issues/117#issuecomment-36365843\n> .\n. nope, never figured it out, what OS are you using?  I'm on CentOS 5\n. it must be a problem with RedHat/Centos 5.  I'm using centos 5 in a vagrant\nbox.  I ended up just running mailcatcher on my mac and configuring my app\nto connect to it on the mac.  If you are able to get it figured out I'd\nlove to hear about it.\n\nOn Fri, Feb 28, 2014 at 9:11 AM, Jeremy Fairbank\nnotifications@github.comwrote:\n\n> I'm getting the same issue on my staging environment,RHEL 5. However, I\n> don't get the issue on my development environment, Ubuntu 12.04.\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/sj26/mailcatcher/issues/117#issuecomment-36365843\n> .\n. ",
    "jfairbank": "I'm getting the same issue on my staging environment, RHEL 5.  However, I don't get the issue on my development environment, Ubuntu 12.04.\n. I'm curious if it's related to the libsqlite3 version?  I don't know enough about it to determine if it could be the cause.  I'll have to pull my development version tomorrow, but my staging environment currently runs an older 3.3.6.\n. > I'll have to pull my development version tomorrow\n\nAbout forgot to do this.  So, my dev version is 3.7.9.\n. I'm getting the same issue on my staging environment, RHEL 5.  However, I don't get the issue on my development environment, Ubuntu 12.04.\n. I'm curious if it's related to the libsqlite3 version?  I don't know enough about it to determine if it could be the cause.  I'll have to pull my development version tomorrow, but my staging environment currently runs an older 3.3.6.\n. > I'll have to pull my development version tomorrow\n\nAbout forgot to do this.  So, my dev version is 3.7.9.\n. ",
    "sancromeu": "I had this issue when using with RHEL. I finally got it to work.\nI am not submitting as a fix since this is rather a tweak. It looks like the issue is somewhere else, most likely in sqlite3 as _jfairbank_ mentioned.\n\n**Short Story**\nThis is caused by some of the conditional initializers **||=** used for SELECT prepared statements.\n\nThere is only one file to patch:\nhttps://github.com/sancromeu/mailcatcher/blob/0deddf8c335ba50e261baf0e23c94ac3110e43e1/lib/mail_catcher/mail.rb\nCheck out the diff:\nhttps://github.com/sancromeu/mailcatcher/commit/0deddf8c335ba50e261baf0e23c94ac3110e43e1\n\n**Long story**\n(for others that can further research the issue, possibly with sqlite3)\nI poked around, adding logging for DB events and narrowed this down to the conditional initializers **||=** used for some of the _SELECT_ prepared statements.\nFirst I thought it was related to not closing resultsets after _execute_ calls. So I tried handling these calls:\n\n```\n@query.execute.next\n```\n\ninstead as\n\n```\nresultset = @query.execute\nrow = resultset.next\nresultset.close\nrow\n```\n\nand these in a similar way:\n\n```\n@query.execute.map\n```\n\nBut no luck.\nSo I ended up removing _some_ conditional initializers for SELECT prepared statements. \nThe interesting thing is that the problem occurs only when executing these statements with:\n\n```\n@query.execute.next\n```\n\nbut not with:\n\n```\n@messages_query.execute.map\n```\n. I had this issue when using with RHEL. I finally got it to work.\nI am not submitting as a fix since this is rather a tweak. It looks like the issue is somewhere else, most likely in sqlite3 as _jfairbank_ mentioned.\n\n**Short Story**\nThis is caused by some of the conditional initializers **||=** used for SELECT prepared statements.\n\nThere is only one file to patch:\nhttps://github.com/sancromeu/mailcatcher/blob/0deddf8c335ba50e261baf0e23c94ac3110e43e1/lib/mail_catcher/mail.rb\nCheck out the diff:\nhttps://github.com/sancromeu/mailcatcher/commit/0deddf8c335ba50e261baf0e23c94ac3110e43e1\n\n**Long story**\n(for others that can further research the issue, possibly with sqlite3)\nI poked around, adding logging for DB events and narrowed this down to the conditional initializers **||=** used for some of the _SELECT_ prepared statements.\nFirst I thought it was related to not closing resultsets after _execute_ calls. So I tried handling these calls:\n\n```\n@query.execute.next\n```\n\ninstead as\n\n```\nresultset = @query.execute\nrow = resultset.next\nresultset.close\nrow\n```\n\nand these in a similar way:\n\n```\n@query.execute.map\n```\n\nBut no luck.\nSo I ended up removing _some_ conditional initializers for SELECT prepared statements. \nThe interesting thing is that the problem occurs only when executing these statements with:\n\n```\n@query.execute.next\n```\n\nbut not with:\n\n```\n@messages_query.execute.map\n```\n. ",
    "vishakhasawant": "I am getting error message on error console as\nnot able to establish connection at this.websocket = new WebSocket(\"\" + (secure ? 'wss' : 'ws') + \"://\" + window.location.host + \"/messages\");\nTrying to sort out with IT support team as it might be firewall issue.\nI am using Firefox 26\n. It was firewall issue as I was running it on localhost. Used --ip to run it on the specified ip and now it's working.\nThank you for your support \n. I am getting error message on error console as\nnot able to establish connection at this.websocket = new WebSocket(\"\" + (secure ? 'wss' : 'ws') + \"://\" + window.location.host + \"/messages\");\nTrying to sort out with IT support team as it might be firewall issue.\nI am using Firefox 26\n. It was firewall issue as I was running it on localhost. Used --ip to run it on the specified ip and now it's working.\nThank you for your support \n. ",
    "guilhermesimoes": "See #96.\n. You could also use the [`ref` or `tag` keys](http://bundler.io/v1.6/git.html) so that you don't exactly use master:\n\n``` ruby\ngem \"mailcatcher\", github: \"sj26/mailcatcher\", ref: \"eff638f\"\n```\n\nThis way, you can be sure that you'll always install the same code when you run `bundle install`.\n. See #96.\n. You could also use the [`ref` or `tag` keys](http://bundler.io/v1.6/git.html) so that you don't exactly use master:\n\n``` ruby\ngem \"mailcatcher\", github: \"sj26/mailcatcher\", ref: \"eff638f\"\n```\n\nThis way, you can be sure that you'll always install the same code when you run `bundle install`.\n. ",
    "elygre": "Encountered the same issue on a Oracle Linux server (= RHEL 6.5). This was my first ever ruby anything, so had to jump the learning curve :-). The explanation above helped me along, but for other newbies out there, this is what we ended up with:\n\n```\nyum install ruby ruby-devel sqlite-devel\ngem install tilt -v 1.3\ngem install mailcatcher\n```\n. Encountered the same issue on a Oracle Linux server (= RHEL 6.5). This was my first ever ruby anything, so had to jump the learning curve :-). The explanation above helped me along, but for other newbies out there, this is what we ended up with:\n\n```\nyum install ruby ruby-devel sqlite-devel\ngem install tilt -v 1.3\ngem install mailcatcher\n```\n. ",
    "jellymann": "I've got a similar problem. If I try use slim with sinatra I get issues with tilt. (uninitialized constant Tilt::CompileSite), Now in my Gemfile I specify tilt \">= 1.3.4\", \"~> 1.3\", which according to the latest versions of slim and sinatra should be fine.\n\nEDIT: removing tilt 2.0.0 fixed my problem\n. I've got a similar problem. If I try use slim with sinatra I get issues with tilt. (uninitialized constant Tilt::CompileSite), Now in my Gemfile I specify tilt \">= 1.3.4\", \"~> 1.3\", which according to the latest versions of slim and sinatra should be fine.\n\nEDIT: removing tilt 2.0.0 fixed my problem\n. ",
    "sbarex": "reading all the addresses (to, bcc) in the column to seems misleading to me, it might be better to put a bcc column, or in the alternative to leaving in To column only the visible recipients and in the mail detail add a bcc field\n. reading all the addresses (to, bcc) in the column to seems misleading to me, it might be better to put a bcc column, or in the alternative to leaving in To column only the visible recipients and in the mail detail add a bcc field\n. ",
    "cobbr2": "And I did screw up that etiquette. Closing this issue to avoid duplication. Sorry for the noise on your email channels.\n. And I did screw up that etiquette. Closing this issue to avoid duplication. Sorry for the noise on your email channels.\n. ",
    "mardon": "problem solved in php mail function must have from\n. problem solved in php mail function must have from\n. ",
    "vjeantet": "Like it\n. Like it\n. ",
    "eprothro": "Thanks for the information, makes perfect sense. If I get the chance to do this, I'll update this thread.\n. Thanks for the information, makes perfect sense. If I get the chance to do this, I'll update this thread.\n. ",
    "ricbermo": "yes I'm pretty sure that I'm running mailcatcher only.\n. Hi this is what I got:\n1. mailcatcher: aliased to bundled_mailcatcher\n2. SESSION_MANAGER=local/user-S500CA:@/tmp/.ICE-unix/1877,unix/user-S500CA:/tmp/.ICE-unix/1877\nXDG_SESSION_ID=c2\nLC_IDENTIFICATION=es_CO.UTF-8\nXDG_SEAT=seat0\nGIO_LAUNCHED_DESKTOP_FILE_PID=2623\nDISPLAY=:0\nUPSTART_JOB=gnome-session\nJOB=dbus\nCOLORTERM=gnome-terminal\nGNOME_KEYRING_CONTROL=/run/user/1000/keyring-wWOAIq\nGNOME_DESKTOP_SESSION_ID=this-is-deprecated\nDEFAULTS_PATH=/usr/share/gconf/ubuntu.default.path\nLOGNAME=user\nTEXTDOMAIN=im-config\nINSTANCE=\nLC_TIME=es_CO.UTF-8\nSHELL=/usr/bin/zsh\nPATH=/home/user/.rvm/gems/ruby-2.0.0-p353@some_project/bin:/home/user/.rvm/gems/ruby-2.0.0-p353@global/bin:/home/user/.rvm/rubies/ruby-2.0.0-p353/bin:/home/user/.rvm/bin:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games\nLC_NUMERIC=es_CO.UTF-8\nLC_PAPER=es_CO.UTF-8\nIM_CONFIG_PHASE=1\nQT4_IM_MODULE=xim\nCLUTTER_IM_MODULE=xim\nTEXTDOMAINDIR=/usr/share/locale/\nXDG_SESSION_PATH=/org/freedesktop/DisplayManager/Session0\nSESSION=ubuntu\nXDG_MENU_PREFIX=gnome-\nSSH_AUTH_SOCK=/run/user/1000/keyring-wWOAIq/ssh\nXAUTHORITY=/home/user/.Xauthority\nUPSTART_EVENTS=started xsession\nGDMSESSION=ubuntu\nXMODIFIERS=@im=none\nLC_ADDRESS=es_CO.UTF-8\nLC_MEASUREMENT=es_CO.UTF-8\nGIO_LAUNCHED_DESKTOP_FILE=/usr/share/applications/terminator.desktop\nXDG_CONFIG_DIRS=/etc/xdg/xdg-ubuntu:/usr/share/upstart/xdg:/etc/xdg\nMANDATORY_PATH=/usr/share/gconf/ubuntu.mandatory.path\nUPSTART_SESSION=unix:abstract=/com/ubuntu/upstart-session/1000/1785\nNODE_PATH=/usr/lib/nodejs:/usr/lib/node_modules:/usr/share/javascript\nDESKTOP_SESSION=ubuntu\nXDG_RUNTIME_DIR=/run/user/1000\nGTK_IM_MODULE=xim\nGTK_MODULES=overlay-scrollbar:unity-gtk-module\nUSER=user\nPWD=/home/user/projects/some_project\nTERMINATOR_UUID=urn:uuid:cdd15f14-0817-4ade-9822-431f01ee0b34\nLC_MONETARY=es_CO.UTF-8\nUPSTART_INSTANCE=\nHOME=/home/user\nORBIT_SOCKETDIR=/tmp/orbit-user\nXDG_SEAT_PATH=/org/freedesktop/DisplayManager/Seat0\nSSH_AGENT_PID=1839\nXDG_DATA_DIRS=/usr/share/ubuntu:/usr/share/gnome:/usr/local/share/:/usr/share/\nLANGUAGE=en_US\nCOMPIZ_BIN_PATH=/usr/bin/\nCOMPIZ_CONFIG_PROFILE=ubuntu\nLC_NAME=es_CO.UTF-8\nLANG=en_US.UTF-8\nGPG_AGENT_INFO=/run/user/1000/keyring-wWOAIq/gpg:0:1\nWINDOWID=62914564\nXDG_VTNR=7\nGDM_LANG=en_US\nUBUNTU_MENUPROXY=1\nSESSIONTYPE=gnome-session\nDBUS_SESSION_BUS_ADDRESS=unix:abstract=/tmp/dbus-wP33WeaDrn\nXDG_CURRENT_DESKTOP=Unity\nTERM=xterm\nGNOME_KEYRING_PID=1783\nLC_TELEPHONE=es_CO.UTF-8\nSHLVL=1\nOLDPWD=/home/user/projects/some_project\nGREP_OPTIONS=--exclude-dir=.cvs --exclude-dir=.git --exclude-dir=.hg --exclude-dir=.svn --color=auto\nGREP_COLOR=1;32\nPAGER=less\nLESS=-R\nLC_CTYPE=en_US.UTF-8\nLSCOLORS=Gxfxcxdxbxegedabagacad\nrvm_prefix=/home/user\nrvm_path=/home/user/.rvm\nrvm_bin_path=/home/user/.rvm/bin\n_system_type=Linux\n_system_name=Ubuntu\n_system_version=13.10\n_system_arch=x86_64\nrvm_version=1.25.14 (stable)\nGEM_HOME=/home/user/.rvm/gems/ruby-2.0.0-p353@some_project\nGEM_PATH=/home/user/.rvm/gems/ruby-2.0.0-p353@some_project:/home/user/.rvm/gems/ruby-2.0.0-p353@global\nIRBRC=/home/user/.rvm/rubies/ruby-2.0.0-p353/.irbrc\nrvm_alias_expanded=\nrvm_bin_flag=\nrvm_delete_flag=0\nrvm_docs_type=\nrvm_file_name=\nrvm_gemstone_package_file=\nrvm_gemstone_url=\nrvm_niceness=\nrvm_nightly_flag=\nrvm_only_path_flag=\nrvm_proxy=\nrvm_quiet_flag=\nrvm_ruby_alias=\nrvm_ruby_bits=\nrvm_ruby_file=\nrvm_ruby_make=\nrvm_ruby_make_install=\nrvm_ruby_mode=\nrvm_script_name=\nrvm_sdk=\nrvm_silent_flag=\nrvm_sticky_flag=\nrvm_system_flag=\nrvm_use_flag=\nrvm_user_flag=\nrvm_wrapper_name=\nMY_RUBY_HOME=/home/user/.rvm/rubies/ruby-2.0.0-p353\nRUBY_VERSION=ruby-2.0.0-p353\nrvm_ruby_string=ruby-2.0.0-p353\n_=/usr/bin/env\n3. I installed the gem in a different gemset and it worked\n4. the same output\n. Hi; I haven't find something that causes this issue, this is happening both on a MacBook Pro and and Asus with Ubuntu 13.10. The weird think here is that this started all of a suden, without changing any config or installing/uninstalling a software, script. I just hope I can find something\n. yes it worked, thanks. I'll open a new issue on `oh-my-zsh`\n. yes I'm pretty sure that I'm running mailcatcher only.\n. Hi this is what I got:\n1. mailcatcher: aliased to bundled_mailcatcher\n2. SESSION_MANAGER=local/user-S500CA:@/tmp/.ICE-unix/1877,unix/user-S500CA:/tmp/.ICE-unix/1877\nXDG_SESSION_ID=c2\nLC_IDENTIFICATION=es_CO.UTF-8\nXDG_SEAT=seat0\nGIO_LAUNCHED_DESKTOP_FILE_PID=2623\nDISPLAY=:0\nUPSTART_JOB=gnome-session\nJOB=dbus\nCOLORTERM=gnome-terminal\nGNOME_KEYRING_CONTROL=/run/user/1000/keyring-wWOAIq\nGNOME_DESKTOP_SESSION_ID=this-is-deprecated\nDEFAULTS_PATH=/usr/share/gconf/ubuntu.default.path\nLOGNAME=user\nTEXTDOMAIN=im-config\nINSTANCE=\nLC_TIME=es_CO.UTF-8\nSHELL=/usr/bin/zsh\nPATH=/home/user/.rvm/gems/ruby-2.0.0-p353@some_project/bin:/home/user/.rvm/gems/ruby-2.0.0-p353@global/bin:/home/user/.rvm/rubies/ruby-2.0.0-p353/bin:/home/user/.rvm/bin:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games\nLC_NUMERIC=es_CO.UTF-8\nLC_PAPER=es_CO.UTF-8\nIM_CONFIG_PHASE=1\nQT4_IM_MODULE=xim\nCLUTTER_IM_MODULE=xim\nTEXTDOMAINDIR=/usr/share/locale/\nXDG_SESSION_PATH=/org/freedesktop/DisplayManager/Session0\nSESSION=ubuntu\nXDG_MENU_PREFIX=gnome-\nSSH_AUTH_SOCK=/run/user/1000/keyring-wWOAIq/ssh\nXAUTHORITY=/home/user/.Xauthority\nUPSTART_EVENTS=started xsession\nGDMSESSION=ubuntu\nXMODIFIERS=@im=none\nLC_ADDRESS=es_CO.UTF-8\nLC_MEASUREMENT=es_CO.UTF-8\nGIO_LAUNCHED_DESKTOP_FILE=/usr/share/applications/terminator.desktop\nXDG_CONFIG_DIRS=/etc/xdg/xdg-ubuntu:/usr/share/upstart/xdg:/etc/xdg\nMANDATORY_PATH=/usr/share/gconf/ubuntu.mandatory.path\nUPSTART_SESSION=unix:abstract=/com/ubuntu/upstart-session/1000/1785\nNODE_PATH=/usr/lib/nodejs:/usr/lib/node_modules:/usr/share/javascript\nDESKTOP_SESSION=ubuntu\nXDG_RUNTIME_DIR=/run/user/1000\nGTK_IM_MODULE=xim\nGTK_MODULES=overlay-scrollbar:unity-gtk-module\nUSER=user\nPWD=/home/user/projects/some_project\nTERMINATOR_UUID=urn:uuid:cdd15f14-0817-4ade-9822-431f01ee0b34\nLC_MONETARY=es_CO.UTF-8\nUPSTART_INSTANCE=\nHOME=/home/user\nORBIT_SOCKETDIR=/tmp/orbit-user\nXDG_SEAT_PATH=/org/freedesktop/DisplayManager/Seat0\nSSH_AGENT_PID=1839\nXDG_DATA_DIRS=/usr/share/ubuntu:/usr/share/gnome:/usr/local/share/:/usr/share/\nLANGUAGE=en_US\nCOMPIZ_BIN_PATH=/usr/bin/\nCOMPIZ_CONFIG_PROFILE=ubuntu\nLC_NAME=es_CO.UTF-8\nLANG=en_US.UTF-8\nGPG_AGENT_INFO=/run/user/1000/keyring-wWOAIq/gpg:0:1\nWINDOWID=62914564\nXDG_VTNR=7\nGDM_LANG=en_US\nUBUNTU_MENUPROXY=1\nSESSIONTYPE=gnome-session\nDBUS_SESSION_BUS_ADDRESS=unix:abstract=/tmp/dbus-wP33WeaDrn\nXDG_CURRENT_DESKTOP=Unity\nTERM=xterm\nGNOME_KEYRING_PID=1783\nLC_TELEPHONE=es_CO.UTF-8\nSHLVL=1\nOLDPWD=/home/user/projects/some_project\nGREP_OPTIONS=--exclude-dir=.cvs --exclude-dir=.git --exclude-dir=.hg --exclude-dir=.svn --color=auto\nGREP_COLOR=1;32\nPAGER=less\nLESS=-R\nLC_CTYPE=en_US.UTF-8\nLSCOLORS=Gxfxcxdxbxegedabagacad\nrvm_prefix=/home/user\nrvm_path=/home/user/.rvm\nrvm_bin_path=/home/user/.rvm/bin\n_system_type=Linux\n_system_name=Ubuntu\n_system_version=13.10\n_system_arch=x86_64\nrvm_version=1.25.14 (stable)\nGEM_HOME=/home/user/.rvm/gems/ruby-2.0.0-p353@some_project\nGEM_PATH=/home/user/.rvm/gems/ruby-2.0.0-p353@some_project:/home/user/.rvm/gems/ruby-2.0.0-p353@global\nIRBRC=/home/user/.rvm/rubies/ruby-2.0.0-p353/.irbrc\nrvm_alias_expanded=\nrvm_bin_flag=\nrvm_delete_flag=0\nrvm_docs_type=\nrvm_file_name=\nrvm_gemstone_package_file=\nrvm_gemstone_url=\nrvm_niceness=\nrvm_nightly_flag=\nrvm_only_path_flag=\nrvm_proxy=\nrvm_quiet_flag=\nrvm_ruby_alias=\nrvm_ruby_bits=\nrvm_ruby_file=\nrvm_ruby_make=\nrvm_ruby_make_install=\nrvm_ruby_mode=\nrvm_script_name=\nrvm_sdk=\nrvm_silent_flag=\nrvm_sticky_flag=\nrvm_system_flag=\nrvm_use_flag=\nrvm_user_flag=\nrvm_wrapper_name=\nMY_RUBY_HOME=/home/user/.rvm/rubies/ruby-2.0.0-p353\nRUBY_VERSION=ruby-2.0.0-p353\nrvm_ruby_string=ruby-2.0.0-p353\n_=/usr/bin/env\n3. I installed the gem in a different gemset and it worked\n4. the same output\n. Hi; I haven't find something that causes this issue, this is happening both on a MacBook Pro and and Asus with Ubuntu 13.10. The weird think here is that this started all of a suden, without changing any config or installing/uninstalling a software, script. I just hope I can find something\n. yes it worked, thanks. I'll open a new issue on `oh-my-zsh`\n. ",
    "kryachkov": "Looks like `oh-my-zsh` bundler plugin causes this issue. I disabled it in my `.zshrc` file and now it works like a sharm\n. Looks like `oh-my-zsh` bundler plugin causes this issue. I disabled it in my `.zshrc` file and now it works like a sharm\n. ",
    "Zauberfisch": "I used the `-h` option to get to the `--ip`, but it was not the first thing I did, the first thing I did was consult the readme, which had no mention of how to get the commandline options.\n\n`-h` / `--help` is a convention, but I think we should work under the assumtion that there are people out there not aware of that. So I think we should add documentation for it.\nAt least something like:\n\n```\nUse `mailcatcher --help` to see the command line options\n```\n\n(actually, that is probably the best option, as it does not need maintenance in case options change)\n. ![facepalm](https://cloud.githubusercontent.com/assets/186158/2563822/5222cbd6-b88c-11e3-815a-b40514b1c3cc.jpg)\noh god ... \n\nthanks for the fast response.\n. working perfectly and making my life a lot easier - love it.\n. I used the `-h` option to get to the `--ip`, but it was not the first thing I did, the first thing I did was consult the readme, which had no mention of how to get the commandline options.\n\n`-h` / `--help` is a convention, but I think we should work under the assumtion that there are people out there not aware of that. So I think we should add documentation for it.\nAt least something like:\n\n```\nUse `mailcatcher --help` to see the command line options\n```\n\n(actually, that is probably the best option, as it does not need maintenance in case options change)\n. ![facepalm](https://cloud.githubusercontent.com/assets/186158/2563822/5222cbd6-b88c-11e3-815a-b40514b1c3cc.jpg)\noh god ... \n\nthanks for the fast response.\n. working perfectly and making my life a lot easier - love it.\n. ",
    "kswope": "By your reasoning then the column should be titled Sender, or envelope sender, or even bounce address, but From is misleading.  I haven't investigated it, but also by your reasoning the To column should contain the envelope recipient, and not the To header.  That would be just fine, but it would make a lot more sense if they were titled Sender and Recipient, and leave it to drilling down to the source to see the To and From headers.\n. By your reasoning then the column should be titled Sender, or envelope sender, or even bounce address, but From is misleading.  I haven't investigated it, but also by your reasoning the To column should contain the envelope recipient, and not the To header.  That would be just fine, but it would make a lot more sense if they were titled Sender and Recipient, and leave it to drilling down to the source to see the To and From headers.\n. ",
    "scicco": "i agree with @kswope. Please at least change column headers or add another column.\n. i agree with @kswope. Please at least change column headers or add another column.\n. ",
    "LouWii": "Same here :( \nOSX 10.9.2\n\nOK I found an answer somewhere on stackoverflow : http://stackoverflow.com/a/22427311/1740412\nThis does worked for me ;)\n. Same here :( \nOSX 10.9.2\n\nOK I found an answer somewhere on stackoverflow : http://stackoverflow.com/a/22427311/1740412\nThis does worked for me ;)\n. ",
    "federicokeen": "I'm having the same issue with ruby 2.1.2. If you are willing to downgrade to 1.9.X it works. Not a solution, but good to know...\n. I'm having the same issue with ruby 2.1.2. If you are willing to downgrade to 1.9.X it works. Not a solution, but good to know...\n. ",
    "adrianmak": "I did fail install on windows 8 machine too.\nmy ruby is 1.9.3p545 (2014-02-24) [i386-mingw32]\n. I did fail install on windows 8 machine too.\nmy ruby is 1.9.3p545 (2014-02-24) [i386-mingw32]\n. ",
    "rockitdev": "Followed the RVM instructions, and it worked like a charm. thanks!\n. Followed the RVM instructions, and it worked like a charm. thanks!\n. ",
    "kalmanh": "Makes sense.\n. Makes sense.\n. ",
    "der-flo": "@lime, in your branch the needed assets are not loading.\n. @sj26 thanks for your clarification!\n. @lime, in your branch the needed assets are not loading.\n. @sj26 thanks for your clarification!\n. ",
    "dirkkelly": "Oh hello @sj26 \n\nCheers\n. Oh hello @sj26 \n\nCheers\n. ",
    "grosser": "please release!\n. please release!\n. ",
    "andershal": "Did you find a solution? I'm having the exact same problem.\n. Thanks! I'm using MAMP PRO and have now added relayhost to my postfix configuration. It works perfectly!\n\n```\nrelayhost = 127.0.0.1:1025\n```\n. Did you find a solution? I'm having the exact same problem.\n. Thanks! I'm using MAMP PRO and have now added relayhost to my postfix configuration. It works perfectly!\n\n```\nrelayhost = 127.0.0.1:1025\n```\n. ",
    "fmagnan": "Hello,\n\nI didn't find a solution but I found a workaround. Before mailcatcher installation, I installed postfix with minimum configuration.\n\nhere is my debconf configuration for postfix:\n\n``` bash\npostfix postfix/main_mailer_type select 'No configuration'\npostfix postfix/mailname string local.guest.net\npostfix postfix/relayhost string 127.0.0.1:1025\n```\n\nSince this installation, everything works fine.\n. Nice!\n\nI think we can close this issue\n. Hello,\n\nI didn't find a solution but I found a workaround. Before mailcatcher installation, I installed postfix with minimum configuration.\n\nhere is my debconf configuration for postfix:\n\n``` bash\npostfix postfix/main_mailer_type select 'No configuration'\npostfix postfix/mailname string local.guest.net\npostfix postfix/relayhost string 127.0.0.1:1025\n```\n\nSince this installation, everything works fine.\n. Nice!\n\nI think we can close this issue\n. ",
    "chrispappas": "+1 would be very useful!\n. +1 would be very useful!\n. ",
    "styks1987": "+1 Yes, this would be very helpful. \n. +1 Yes, this would be very helpful. \n. ",
    "arosenhagen": ":+1: \n. :+1: \n. ",
    "dominh": "I'm not sure if I understand.\r\nConsider a case:\r\n1. Someone sniffing SSL connection. HTTP content is encrypted so he see nothing.\r\n2. However he has access to TCP/IP so he can get address and port of the packet destination\r\n3. he go this address and this port and get all data which was hidden by SSL\r\nSo isn't SSL pointless in mailcatcher?\r\n. @taiar hmm.. looks like typical issue with assets. Unfortunately I'm unable reproduce it. Could you give me more informations/details?\n. I'm not sure if I understand.\r\nConsider a case:\r\n1. Someone sniffing SSL connection. HTTP content is encrypted so he see nothing.\r\n2. However he has access to TCP/IP so he can get address and port of the packet destination\r\n3. he go this address and this port and get all data which was hidden by SSL\r\nSo isn't SSL pointless in mailcatcher?\r\n. @taiar hmm.. looks like typical issue with assets. Unfortunately I'm unable reproduce it. Could you give me more informations/details?\n. ",
    "djmaze": "@dominh Mostly. It would be a little more difficult for the man-in-the-middle if he had to guess the right hostname, in case of a SNI configuration.\r\n\r\nThis feature makes sense in combination with an additional (basic) auth protection. That could be implemented in mailcatcher as well. \r\n\r\nBut why not just run a reverse proxy (e.g. nginx) in front of it? That can be configured to do both the SSL termination and basic auth.. @dominh Mostly. It would be a little more difficult for the man-in-the-middle if he had to guess the right hostname, in case of a SNI configuration.\r\n\r\nThis feature makes sense in combination with an additional (basic) auth protection. That could be implemented in mailcatcher as well. \r\n\r\nBut why not just run a reverse proxy (e.g. nginx) in front of it? That can be configured to do both the SSL termination and basic auth.. ",
    "savornicesei": "Thanks guys!\n\nSo if I build it from source code I can install it through rvm by using \nrvm default@mailcatcher --create do gem install mailcatcher-0.6.0.gem\nrvm wrapper default@mailcatcher --no-prefix mailcatcher catchmail ? (this might sound like a dumb question but I'm not familiar enough with ruby).\n. Thanks guys!\n\nSo if I build it from source code I can install it through rvm by using \nrvm default@mailcatcher --create do gem install mailcatcher-0.6.0.gem\nrvm wrapper default@mailcatcher --no-prefix mailcatcher catchmail ? (this might sound like a dumb question but I'm not familiar enough with ruby).\n. ",
    "sunilkr": "You have gcc?\nTry 'apt-get install build-essential' before installing gem. \n. `ruby 1.9.3` is latest (i think) stable version in 1.9 branch and most people use this only. You don't need to update.\nTry  `gem install json:1.8.1` alone.\n. At this point I would suggest re-installing ruby.\nBetter use 'rvm' if possible.\n\n# \n\n```\n SunilKumar\n```\n\n---\n\nhttp://in.linkedin.com/in/sunilkr86/\n\n# http://30d4.blogspot.in/\n\nOn Wed, Jul 9, 2014 at 4:05 AM, Faison Zutavern notifications@github.com\nwrote:\n\n> So gem install json:1.8.1 didn't work, telling me that the repo didn't\n> exist anywhere. But google told me to try gem install json -v 1.8.1 and\n> that got further...\n> \n> sudo gem install json -v 1.8.1\n> Building native extensions.  This could take a while...\n> ERROR:  Error installing json:\n>         ERROR: Failed to build gem native extension.\n> \n> ```\n>     /usr/bin/ruby1.9.1 extconf.rb\n> ```\n> \n> /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)\n>         from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in`require'\n>         from extconf.rb:1:in `<main>'\n> \n> Any thoughts?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/sj26/mailcatcher/issues/144#issuecomment-48408146.\n. The gem is v0.5.12. It works.\nBut the latests tag v0.6 and not working.\n. You have gcc?\nTry 'apt-get install build-essential' before installing gem. \n. `ruby 1.9.3` is latest (i think) stable version in 1.9 branch and most people use this only. You don't need to update.\nTry  `gem install json:1.8.1` alone.\n. At this point I would suggest re-installing ruby.\nBetter use 'rvm' if possible.\n\n# \n\n```\n SunilKumar\n```\n\n---\n\nhttp://in.linkedin.com/in/sunilkr86/\n\n# http://30d4.blogspot.in/\n\nOn Wed, Jul 9, 2014 at 4:05 AM, Faison Zutavern notifications@github.com\nwrote:\n\n> So gem install json:1.8.1 didn't work, telling me that the repo didn't\n> exist anywhere. But google told me to try gem install json -v 1.8.1 and\n> that got further...\n> \n> sudo gem install json -v 1.8.1\n> Building native extensions.  This could take a while...\n> ERROR:  Error installing json:\n>         ERROR: Failed to build gem native extension.\n> \n> ```\n>     /usr/bin/ruby1.9.1 extconf.rb\n> ```\n> \n> /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)\n>         from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in`require'\n>         from extconf.rb:1:in `<main>'\n> \n> Any thoughts?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/sj26/mailcatcher/issues/144#issuecomment-48408146.\n. The gem is v0.5.12. It works.\nBut the latests tag v0.6 and not working.\n. ",
    "Faison": "Hi @sunilkr,\n\nI have gcc, and build-essential is installed and up-to-date:\n\n```\nbuild-essential is already the newest version.\n0 upgraded, 0 newly installed, 0 to remove and 49 not upgraded.\n```\n\nI did notice that my version of Ruby isn't up-to-date. Entering the command ruby --version gets me this:\n\n```\nruby 1.9.3p484 (2013-11-22 revision 43786) [x86_64-linux]\n```\n\nShould I update to the latest version of Ruby? Is there a good guide on how to do this (had trouble finding any)?\n\nThanks,\nFaison\n. So `gem install json:1.8.1` didn't work, telling me that the repo didn't exist anywhere. But google told me to try `gem install json -v 1.8.1` and that got further... \n\n```\nsudo gem install json -v 1.8.1\nBuilding native extensions.  This could take a while...\nERROR:  Error installing json:\n        ERROR: Failed to build gem native extension.\n\n        /usr/bin/ruby1.9.1 extconf.rb\n/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)\n        from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\n        from extconf.rb:1:in `<main>'\n```\n\nAny thoughts?\n. Oh, hi, I thought I responded.\n\nYour suggestion worked. I installed ruby 2.1.2 with rvm and I was able to install and run mailcatcher.\n\nThanks for the help!\nFaison\n. Marking the issue as closed.\n. Hi @sunilkr,\n\nI have gcc, and build-essential is installed and up-to-date:\n\n```\nbuild-essential is already the newest version.\n0 upgraded, 0 newly installed, 0 to remove and 49 not upgraded.\n```\n\nI did notice that my version of Ruby isn't up-to-date. Entering the command ruby --version gets me this:\n\n```\nruby 1.9.3p484 (2013-11-22 revision 43786) [x86_64-linux]\n```\n\nShould I update to the latest version of Ruby? Is there a good guide on how to do this (had trouble finding any)?\n\nThanks,\nFaison\n. So `gem install json:1.8.1` didn't work, telling me that the repo didn't exist anywhere. But google told me to try `gem install json -v 1.8.1` and that got further... \n\n```\nsudo gem install json -v 1.8.1\nBuilding native extensions.  This could take a while...\nERROR:  Error installing json:\n        ERROR: Failed to build gem native extension.\n\n        /usr/bin/ruby1.9.1 extconf.rb\n/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)\n        from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\n        from extconf.rb:1:in `<main>'\n```\n\nAny thoughts?\n. Oh, hi, I thought I responded.\n\nYour suggestion worked. I installed ruby 2.1.2 with rvm and I was able to install and run mailcatcher.\n\nThanks for the help!\nFaison\n. Marking the issue as closed.\n. ",
    "hanzixiaoshu": "thank you every much \n. thank you every much \n. ",
    "epi-log": "You have to install ruby-dev. It's working with the 1.9 version of ruby.\r\n. You have to install ruby-dev. It's working with the 1.9 version of ruby.\r\n. ",
    "bjellesma": "Thank you! This has helped me point me in the direction of using RVM to help install ruby on rails on Linux Mint\n. Thank you! This has helped me point me in the direction of using RVM to help install ruby on rails on Linux Mint\n. ",
    "kenorb": "I can confirm that installing `sudo apt-get install ruby-dev libsqlite3-dev` before `sudo gem install mailcatcher` worked fine.\n. You need to install `libsqlite3`, e.g.:\n\n```\nsudo apt-get install libsqlite3-dev\n```\n\nSee: #144\n. I can confirm that installing `sudo apt-get install ruby-dev libsqlite3-dev` before `sudo gem install mailcatcher` worked fine.\n. You need to install `libsqlite3`, e.g.:\n\n```\nsudo apt-get install libsqlite3-dev\n```\n\nSee: #144\n. ",
    "ajahongir": "https://github.com/flori/json/issues/253\n. https://github.com/flori/json/issues/253\n. ",
    "chlab": "Thanks @kenorb. This should really be part of the installation steps. I just spent about 45mins compiling ruby 2 and trying to install mailcatcher try & error style. This is the reason we have package managers.\n\nDon't want to complain though, thanks for the great work guys.\n. Nope, that's the debian package name, not necessarily the homebrew name.\nThis might do it for you: https://github.com/rbenv/rbenv\n. Thanks @kenorb. This should really be part of the installation steps. I just spent about 45mins compiling ruby 2 and trying to install mailcatcher try & error style. This is the reason we have package managers.\n\nDon't want to complain though, thanks for the great work guys.\n. Nope, that's the debian package name, not necessarily the homebrew name.\nThis might do it for you: https://github.com/rbenv/rbenv\n. ",
    "jorgeorpinel": "I had a similar problem with [Overcommit](https://github.com/brigade/overcommit). @kenorb 's instructions worked for me:\n\n> installing `sudo apt-get install ruby-dev` before `sudo gem install overcommit`\n. I had a similar problem with [Overcommit](https://github.com/brigade/overcommit). @kenorb 's instructions worked for me:\n\n> installing `sudo apt-get install ruby-dev` before `sudo gem install overcommit`\n. ",
    "martinverdejo": "> installing sudo `apt-get install ruby-dev` before sudo gem install overcommit\n\nDoes that mean `brew install ruby-dev` for osx? It says `No available formula with the name \"ruby-dev\"`\n. > installing sudo `apt-get install ruby-dev` before sudo gem install overcommit\n\nDoes that mean `brew install ruby-dev` for osx? It says `No available formula with the name \"ruby-dev\"`\n. ",
    "kkrieger85": "`sudo apt-get install ruby-dev` is working for me too. \n\nBut now I have to update Ruby to Version >= 2.0\n\n```\nFetching: mime-types-data-3.2016.0221.gem (100%)\nERROR:  Error installing mailcatcher:\n    mime-types-data requires Ruby version >= 2.0.\n```\n. `sudo apt-get install ruby-dev` is working for me too. \n\nBut now I have to update Ruby to Version >= 2.0\n\n```\nFetching: mime-types-data-3.2016.0221.gem (100%)\nERROR:  Error installing mailcatcher:\n    mime-types-data requires Ruby version >= 2.0.\n```\n. ",
    "awaistune": "sudo apt-get install ruby-dev is working for me too. \nThanks. :dancer: \n. sudo apt-get install ruby-dev is working for me too. \nThanks. :dancer: \n. ",
    "tersmitten": "@kkrieger85 See https://github.com/sj26/mailcatcher/issues/277#issuecomment-202617739\n. +1\n. @kkrieger85 See https://github.com/sj26/mailcatcher/issues/277#issuecomment-202617739\n. +1\n. ",
    "vhosakot": "I saw the error `Failed to build gem native extension` too on CentOS 7.3 and vagrant 1.8.7.\r\n\r\nI resolved it after installing ruby-devel and gcc (`yum -y install ruby-devel gcc`). I saw the error `Failed to build gem native extension` too on CentOS 7.3 and vagrant 1.8.7.\r\n\r\nI resolved it after installing ruby-devel and gcc (`yum -y install ruby-devel gcc`). ",
    "irekg": "Thanks guys. I was traing to install sass using `sudo gem install sass --no-user-install` and I have the same error. I'm doing it on Chrome OS / Chromebook in core linux installed using Crouton. I did what many of you suggest with one more thing.\r\n\r\n```\r\nsudo apt-get install ruby-dev libsqlite3-dev gcc man\r\n```. Thanks guys. I was traing to install sass using `sudo gem install sass --no-user-install` and I have the same error. I'm doing it on Chrome OS / Chromebook in core linux installed using Crouton. I did what many of you suggest with one more thing.\r\n\r\n```\r\nsudo apt-get install ruby-dev libsqlite3-dev gcc man\r\n```. ",
    "anuragagrawal0430": "Thanks alot guys. I'm also facing the same error with Linux Mint 18.2 and ruby 2.3.1 .`sudo apt-get install ruby-dev libsqlite3-dev gcc man` solved the issue for me. Thanks alot guys. I'm also facing the same error with Linux Mint 18.2 and ruby 2.3.1 .`sudo apt-get install ruby-dev libsqlite3-dev gcc man` solved the issue for me. ",
    "ellcs": "In case someone struggles with OpenSuse:\r\n\r\n```bash\r\n# ruby 2.1.x\r\nzypper in gcc make ruby2.1-devel ruby2.1-devel-extra\r\n# or ruby 2.2.x\r\nzypper in gcc make ruby2.2-devel ruby2.2-devel-extra\r\n```. In case someone struggles with OpenSuse:\r\n\r\n```bash\r\n# ruby 2.1.x\r\nzypper in gcc make ruby2.1-devel ruby2.1-devel-extra\r\n# or ruby 2.2.x\r\nzypper in gcc make ruby2.2-devel ruby2.2-devel-extra\r\n```. ",
    "ramanvirtual": "After running the following cmd, it  works fine for me:+\r\n sudo apt-get install ruby-full. After running the following cmd, it  works fine for me:+\r\n sudo apt-get install ruby-full. ",
    "wturrell": "Ubuntu 14.04.5 LTS (and using the standard \"Trusty\" package repositories in `/etc/apt/sources.list`)\r\n\r\nI *thought* I'd fixed this with:\r\n\r\n```\r\nsudo apt-get install ruby-dev ruby2.0 libsqlite3-dev\r\nsudo rm /usr/bin/ruby\r\nsudo ln -s /usr/bin/ruby2.0 /usr/bin/ruby\r\n```\r\n\r\nHowever, `sudo gem install mailcatcher` still gives:\r\n\r\n```\r\nERROR:  Error installing mailcatcher:\r\n        mime-types-data requires Ruby version >= 2.0.\r\n```\r\n\r\nDespite:\r\n\r\n```\r\n$ ruby --version\r\nruby 2.0.0p384 (2014-01-12) [x86_64-linux-gnu]\r\n```. Ubuntu 14.04.5 LTS (and using the standard \"Trusty\" package repositories in `/etc/apt/sources.list`)\r\n\r\nI *thought* I'd fixed this with:\r\n\r\n```\r\nsudo apt-get install ruby-dev ruby2.0 libsqlite3-dev\r\nsudo rm /usr/bin/ruby\r\nsudo ln -s /usr/bin/ruby2.0 /usr/bin/ruby\r\n```\r\n\r\nHowever, `sudo gem install mailcatcher` still gives:\r\n\r\n```\r\nERROR:  Error installing mailcatcher:\r\n        mime-types-data requires Ruby version >= 2.0.\r\n```\r\n\r\nDespite:\r\n\r\n```\r\n$ ruby --version\r\nruby 2.0.0p384 (2014-01-12) [x86_64-linux-gnu]\r\n```. ",
    "dasj19": "This is what worked for me:\r\n`apt remove ruby\r\n\r\napt install software-properties-common\r\n\r\napt-add-repository ppa:brightbox/ruby-ng\r\n\r\napt update\r\n\r\napt install ruby2.3 ruby2.3-dev libsqlite3-dev\r\n\r\ngem install mailcatcher`. This is what worked for me:\r\n`apt remove ruby\r\n\r\napt install software-properties-common\r\n\r\napt-add-repository ppa:brightbox/ruby-ng\r\n\r\napt update\r\n\r\napt install ruby2.3 ruby2.3-dev libsqlite3-dev\r\n\r\ngem install mailcatcher`. ",
    "rahilsondhi": "I have the same problem.\n. I couldn't rely on bundler to install mailcatcher because mailcatcher's gemspec is too strict. It's requiring activesupport 3 and I'm on a rails 4 app.\n\nMy solution:\n- Remove mailcatcher from gemfile\n- Install the gem without bundler by doing `gem install mailcatcher -v 0.5.12`\n- `mailcatcher --foreground --verbose`\n. I have the same problem.\n. I couldn't rely on bundler to install mailcatcher because mailcatcher's gemspec is too strict. It's requiring activesupport 3 and I'm on a rails 4 app.\n\nMy solution:\n- Remove mailcatcher from gemfile\n- Install the gem without bundler by doing `gem install mailcatcher -v 0.5.12`\n- `mailcatcher --foreground --verbose`\n. ",
    "richdonne": "Hi sorry must have push wrong button. \n. Hi sorry must have push wrong button. \n. ",
    "attachmentgenie": "you seem to have hit this problem => http://www.sandelman.ca/mcr/blog/2012/07/09/\n\nexport LC_ALL=en_US.UTF-8\nexport LANG=en_US.UTF-8\ngem install mailcatcher\n\nshould do the trick\n. you seem to have hit this problem => http://www.sandelman.ca/mcr/blog/2012/07/09/\n\nexport LC_ALL=en_US.UTF-8\nexport LANG=en_US.UTF-8\ngem install mailcatcher\n\nshould do the trick\n. ",
    "RemizZ": "Thank you for your quick answer :)\n\nSadly, it doesn't seem to change anything. I've tried en_US.UTF-8, my correct locale de_DE.UTF-8 and a few variations locale -a was giving me, but nothing changed the error.\n\nAs I understand the error message, a core extension named mail is failing, do I maybe need to reinstall anything else?\n\nFor reference, locale -a output:\n\n``` C\nC.UTF-8\nde_AT.utf8\nde_BE.utf8\nde_CH.utf8\nde_DE.utf8\nde_LI.utf8\nde_LU.utf8\nen_AG\nen_AG.utf8\nen_AU.utf8\nen_BW.utf8\nen_CA.utf8\nen_DK.utf8\nen_GB.utf8\nen_HK.utf8\nen_IE.utf8\nen_IN\nen_IN.utf8\nen_NG\nen_NG.utf8\nen_NZ.utf8\nen_PH.utf8\nen_SG.utf8\nen_US.utf8\nen_ZA.utf8\nen_ZM\nen_ZM.utf8\nen_ZW.utf8\nPOSIX\n```\n\nThanks again!\n. Thank you for your help, this finally fixed the issue for me.\n\nThere seems to be a small issue with your answer though, because `--encoding=utf8` resulted in an error for me. Using `--encoding=utf-8` fixed it for me. I don't know if this may vary from machine to machine, but I think it is worth noting.\n. Thank you for your quick answer :)\n\nSadly, it doesn't seem to change anything. I've tried en_US.UTF-8, my correct locale de_DE.UTF-8 and a few variations locale -a was giving me, but nothing changed the error.\n\nAs I understand the error message, a core extension named mail is failing, do I maybe need to reinstall anything else?\n\nFor reference, locale -a output:\n\n``` C\nC.UTF-8\nde_AT.utf8\nde_BE.utf8\nde_CH.utf8\nde_DE.utf8\nde_LI.utf8\nde_LU.utf8\nen_AG\nen_AG.utf8\nen_AU.utf8\nen_BW.utf8\nen_CA.utf8\nen_DK.utf8\nen_GB.utf8\nen_HK.utf8\nen_IE.utf8\nen_IN\nen_IN.utf8\nen_NG\nen_NG.utf8\nen_NZ.utf8\nen_PH.utf8\nen_SG.utf8\nen_US.utf8\nen_ZA.utf8\nen_ZM\nen_ZM.utf8\nen_ZW.utf8\nPOSIX\n```\n\nThanks again!\n. Thank you for your help, this finally fixed the issue for me.\n\nThere seems to be a small issue with your answer though, because `--encoding=utf8` resulted in an error for me. Using `--encoding=utf-8` fixed it for me. I don't know if this may vary from machine to machine, but I think it is worth noting.\n. ",
    "joetjen": "Looks like I have the same issue. I have a squeeze based vm in which I use RVM multi-user to install mailcatcher. Running catchmail manually and from within a simple PHP script it works all fine, but from within Drupal (which I unfortunately have to deal with) I get the aforementioned error message. I am not sure what Drupal is doing different to result in this error.\n. Looks like I have the same issue. I have a squeeze based vm in which I use RVM multi-user to install mailcatcher. Running catchmail manually and from within a simple PHP script it works all fine, but from within Drupal (which I unfortunately have to deal with) I get the aforementioned error message. I am not sure what Drupal is doing different to result in this error.\n. ",
    "mnapoli": "Same error for me, on Mac OS X. Adding `--encoding=utf-8` in the `catchmail` ruby script fixed it too, but maybe it could be included by default?\n. (FYI I was sending an email in french)\n. Same error for me, on Mac OS X. Adding `--encoding=utf-8` in the `catchmail` ruby script fixed it too, but maybe it could be included by default?\n. (FYI I was sending an email in french)\n. ",
    "kaliel86": "Hi, i'm having the same issue. Can someone tell me where to set the encoding to utf8 ? I put --encoding=utf-8 in the first shebang line of catchmail, but nothing..\n. Hi, i'm having the same issue. Can someone tell me where to set the encoding to utf8 ? I put --encoding=utf-8 in the first shebang line of catchmail, but nothing..\n. ",
    "richardvanbergen": "I'm not even receiving emails sent from the command line. :confused: \n. Thanks @sj26 but I already managed to get it resolved using --http-ip instead of --ip.\n\nhttps://github.com/sj26/mailcatcher/issues/152\n. Thank you! Seemed to work first time. Might be worth documenting.\n. I'm not even receiving emails sent from the command line. :confused: \n. Thanks @sj26 but I already managed to get it resolved using --http-ip instead of --ip.\n\nhttps://github.com/sj26/mailcatcher/issues/152\n. Thank you! Seemed to work first time. Might be worth documenting.\n. ",
    "dswitzer": "I was also having this issue under 0.5.2, but I can confirm the issue was resolved in 0.6.1.\n. I was also having this issue under 0.5.2, but I can confirm the issue was resolved in 0.6.1.\n. ",
    "Haza": "+1 here (with any special characters)\n\nAny idea how we can deal with that ?\n. +1 here (with any special characters)\n\nAny idea how we can deal with that ?\n. ",
    "dpdawson": "Same issue for me. OSX 10.9.5 using rbenv with gemsets.\n. It worked when I used the gem I built from the most recent master.\n. Same issue for me. OSX 10.9.5 using rbenv with gemsets.\n. It worked when I used the gem I built from the most recent master.\n. ",
    "dhenze": "Stumbled upon this as well, try \"rbenv rehash\" which solved it for me.\n. Stumbled upon this as well, try \"rbenv rehash\" which solved it for me.\n. ",
    "seeuser": "\"rbenv rehash\" worked for me also, Thanks!\n. \"rbenv rehash\" worked for me also, Thanks!\n. ",
    "ctf0": "i had the `command not found` at first ,then `rbenv rehash` fixed it but now its\n\n```\n/Users/Novo/.rbenv/versions/2.1.5/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- i18n/core_ext/string/interpolate (LoadError)\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/activesupport-3.2.21/lib/active_support/core_ext/string/interpolation.rb:2:in `<top (required)>'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/activesupport-3.2.21/lib/active_support/core_ext/string.rb:9:in `<top (required)>'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/activesupport-3.2.21/lib/active_support/core_ext.rb:2:in `block in <top (required)>'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/activesupport-3.2.21/lib/active_support/core_ext.rb:1:in `each'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/activesupport-3.2.21/lib/active_support/core_ext.rb:1:in `<top (required)>'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/mailcatcher-0.5.12/lib/mail_catcher.rb:1:in `<top (required)>'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/mailcatcher-0.5.12/bin/mailcatcher:3:in `<top (required)>'\n    from /Users/Novo/.rbenv/versions/2.1.5/bin/mailcatcher:23:in `load'\n    from /Users/Novo/.rbenv/versions/2.1.5/bin/mailcatcher:23:in `<main>'\n```\n. i had the `command not found` at first ,then `rbenv rehash` fixed it but now its\n\n```\n/Users/Novo/.rbenv/versions/2.1.5/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- i18n/core_ext/string/interpolate (LoadError)\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/activesupport-3.2.21/lib/active_support/core_ext/string/interpolation.rb:2:in `<top (required)>'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/activesupport-3.2.21/lib/active_support/core_ext/string.rb:9:in `<top (required)>'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/activesupport-3.2.21/lib/active_support/core_ext.rb:2:in `block in <top (required)>'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/activesupport-3.2.21/lib/active_support/core_ext.rb:1:in `each'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/activesupport-3.2.21/lib/active_support/core_ext.rb:1:in `<top (required)>'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/mailcatcher-0.5.12/lib/mail_catcher.rb:1:in `<top (required)>'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Novo/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/mailcatcher-0.5.12/bin/mailcatcher:3:in `<top (required)>'\n    from /Users/Novo/.rbenv/versions/2.1.5/bin/mailcatcher:23:in `load'\n    from /Users/Novo/.rbenv/versions/2.1.5/bin/mailcatcher:23:in `<main>'\n```\n. ",
    "maniempire": "'rbenv rehash' worked for me too.\n. 'rbenv rehash' worked for me too.\n. ",
    "leandromac": "'rbenv rehash' worked for me too =D\n. 'rbenv rehash' worked for me too =D\n. ",
    "colinxchristmas": "Worked for me 'rbenv rehash' as well. Rails 5 Ruby 2.3.1. Worked for me 'rbenv rehash' as well. Rails 5 Ruby 2.3.1. ",
    "karangloify": "'rbenv rehash' worked for me \ud83d\udc4d . 'rbenv rehash' worked for me \ud83d\udc4d . ",
    "tsjost": "Have you tried using --http-ip to only bind the web interface to the external interface, so the SMTP server can still listen on the loopback interface (which is likely where your PHP code and commandline is trying to connect)?\n. Have you tried using --http-ip to only bind the web interface to the external interface, so the SMTP server can still listen on the loopback interface (which is likely where your PHP code and commandline is trying to connect)?\n. ",
    "boxheed": "I am also getting this problem on Centos 6.5. It was working fine from an install about a week ago, just wiped my vm and started again and I now get this. I'm using rvm and ruby 1.9.3. It doesn't look to me like rvm has changed so I am assuming a gem has been updated but I have no idea which one.\n. I've compared the gems between the working set and the non working set.\n\n| gem | working version | broken version |\n| --- | --: | --: |\n| activesupport | 3.2.19 | 3.2.19 |\n| bigdecimal | 1.1.0 | 1.1.0 |\n| bundler | **1.6.5** | **1.7.0** |\n| bundler-unload | 1.0.2 | 1.0.2 |\n| daemons | 1.1.9 | 1.1.9 |\n| eventmachine | 1.0.3 | 1.0.3 |\n| executable-hooks | 1.3.2 | 1.3.2 |\n| gem-wrappers | 1.2.5 | 1.2.5 |\n| haml | 4.1.0.beta.1 | 4.1.0.beta.1 |\n| i18n | **0.6.11** | **0.7.0.beta1** |\n| io-console | 0.3 | 0.3 |\n| json | 1.5.5 | 1.5.5 |\n| mail | 2.6.1 | 2.6.1 |\n| mailcatcher | 0.5.12 | 0.5.12 |\n| mime-types | 2.3 | 2.3 |\n| minitest | 2.5.1 | 2.5.1 |\n| multi_json | 1.10.1 | 1.10.1 |\n| rack | **1.5.2** | **1.6.0.beta** |\n| rack-protection | 1.5.3 | 1.5.3 |\n| rake | 0.9.2.2 | 0.9.2.2 |\n| rdoc | 3.9.5 | 3.9.5 |\n| rubygems-bundler | 1.4.4 | 1.4.4 |\n| rvm | 1.11.3.9 | 1.11.3.9 |\n| sinatra | 1.4.5 | 1.4.5 |\n| skinny | 0.2.3 | 0.2.3 |\n| sqlite3 | 1.3.9 | 1.3.9 |\n| thin | 1.5.1 | 1.5.1 |\n| tilt | 1.4.1 | 1.4.1 |\n\nJudging from the error I would bet that it is the version of the i18n gem. I haven't tried altering the version of this yet.\n. I can confirm it's the version of the i18n gem. I removed it and then installed the 0.6.11 version and it now works.\n\n``` bash\ngem uninstall i18n\ngem install i18n -v 0.6.11\n```\n. Quick update I've done a clean install of ruby and the broken version of the i18n gem only gets installed when I install the mailcatcher gem.\n. I am also getting this problem on Centos 6.5. It was working fine from an install about a week ago, just wiped my vm and started again and I now get this. I'm using rvm and ruby 1.9.3. It doesn't look to me like rvm has changed so I am assuming a gem has been updated but I have no idea which one.\n. I've compared the gems between the working set and the non working set.\n\n| gem | working version | broken version |\n| --- | --: | --: |\n| activesupport | 3.2.19 | 3.2.19 |\n| bigdecimal | 1.1.0 | 1.1.0 |\n| bundler | **1.6.5** | **1.7.0** |\n| bundler-unload | 1.0.2 | 1.0.2 |\n| daemons | 1.1.9 | 1.1.9 |\n| eventmachine | 1.0.3 | 1.0.3 |\n| executable-hooks | 1.3.2 | 1.3.2 |\n| gem-wrappers | 1.2.5 | 1.2.5 |\n| haml | 4.1.0.beta.1 | 4.1.0.beta.1 |\n| i18n | **0.6.11** | **0.7.0.beta1** |\n| io-console | 0.3 | 0.3 |\n| json | 1.5.5 | 1.5.5 |\n| mail | 2.6.1 | 2.6.1 |\n| mailcatcher | 0.5.12 | 0.5.12 |\n| mime-types | 2.3 | 2.3 |\n| minitest | 2.5.1 | 2.5.1 |\n| multi_json | 1.10.1 | 1.10.1 |\n| rack | **1.5.2** | **1.6.0.beta** |\n| rack-protection | 1.5.3 | 1.5.3 |\n| rake | 0.9.2.2 | 0.9.2.2 |\n| rdoc | 3.9.5 | 3.9.5 |\n| rubygems-bundler | 1.4.4 | 1.4.4 |\n| rvm | 1.11.3.9 | 1.11.3.9 |\n| sinatra | 1.4.5 | 1.4.5 |\n| skinny | 0.2.3 | 0.2.3 |\n| sqlite3 | 1.3.9 | 1.3.9 |\n| thin | 1.5.1 | 1.5.1 |\n| tilt | 1.4.1 | 1.4.1 |\n\nJudging from the error I would bet that it is the version of the i18n gem. I haven't tried altering the version of this yet.\n. I can confirm it's the version of the i18n gem. I removed it and then installed the 0.6.11 version and it now works.\n\n``` bash\ngem uninstall i18n\ngem install i18n -v 0.6.11\n```\n. Quick update I've done a clean install of ruby and the broken version of the i18n gem only gets installed when I install the mailcatcher gem.\n. ",
    "g3d": "Same behaviour for me. I run inside vagrant on separate gemset & ruby-1.9.3-p547.\n. Same behaviour for me. I run inside vagrant on separate gemset & ruby-1.9.3-p547.\n. ",
    "paulbeattie": "The dependency for i18n comes from activesupport. \n\n`i18n (>= 0.6.4, ~> 0.6)`\n. Running RubyGems 2.2.2 on Ruby 2.1.2 I get both ActiveSupport and i18n loading. I upgraded to the latest RubyGems (2.4.1) and still get the same returned.\n\n```\nirb(main):001:0> Gem.loaded_specs\n=> {}\nirb(main):002:0> gem 'mailcatcher'\n=> true\nirb(main):003:0> Gem.loaded_specs\n=> {\"i18n\"=>#<Gem::Specification:0x1edbd76eb0 i18n-0.7.0.beta1>, \"multi_json\"=>#<Gem::Specification:0x1edbd1401c multi_json-1.10.1>, \"activesupport\"=>#<Gem::Specification:0x1edbb10144 activesupport-3.2.19>, \"eventmachine\"=>#<Gem::Specification:0x1edbc42300 eventmachine-1.0.3>, \"tilt\"=>#<Gem::Specification:0x1edbcb4bd0 tilt-1.4.1>, \"haml\"=>#<Gem::Specification:0x1edbd8ae24 haml-4.1.0.beta.1>, \"mime-types\"=>#<Gem::Specification:0x1edbd2a380 mime-types-2.3>, \"mail\"=>#<Gem::Specification:0x1edbd70f9c mail-2.6.1>, \"rack\"=>#<Gem::Specification:0x1edbd0a260 rack-1.6.0.beta>, \"rack-protection\"=>#<Gem::Specification:0x1edbcfa2e8 rack-protection-1.5.3>, \"sinatra\"=>#<Gem::Specification:0x1edbce6554 sinatra-1.4.5>, \"sqlite3\"=>#<Gem::Specification:0x1edbb22bc8 sqlite3-1.3.9>, \"daemons\"=>#<Gem::Specification:0x1edbb0b7ac daemons-1.1.9>, \"thin\"=>#<Gem::Specification:0x1edbb1a75c thin-1.5.1>, \"skinny\"=>#<Gem::Specification:0x1edbcda060 skinny-0.2.3>, \"mailcatcher\"=>#<Gem::Specification:0x1edbd4f20c mailcatcher-0.5.12>}\n```\n. This works for me out the box running Ruby 2.2.0 and letting Rubygems install i18n 0.7.0. It seems that it could be related to i18n v0.7.0 going final.\n. The dependency for i18n comes from activesupport. \n\n`i18n (>= 0.6.4, ~> 0.6)`\n. Running RubyGems 2.2.2 on Ruby 2.1.2 I get both ActiveSupport and i18n loading. I upgraded to the latest RubyGems (2.4.1) and still get the same returned.\n\n```\nirb(main):001:0> Gem.loaded_specs\n=> {}\nirb(main):002:0> gem 'mailcatcher'\n=> true\nirb(main):003:0> Gem.loaded_specs\n=> {\"i18n\"=>#<Gem::Specification:0x1edbd76eb0 i18n-0.7.0.beta1>, \"multi_json\"=>#<Gem::Specification:0x1edbd1401c multi_json-1.10.1>, \"activesupport\"=>#<Gem::Specification:0x1edbb10144 activesupport-3.2.19>, \"eventmachine\"=>#<Gem::Specification:0x1edbc42300 eventmachine-1.0.3>, \"tilt\"=>#<Gem::Specification:0x1edbcb4bd0 tilt-1.4.1>, \"haml\"=>#<Gem::Specification:0x1edbd8ae24 haml-4.1.0.beta.1>, \"mime-types\"=>#<Gem::Specification:0x1edbd2a380 mime-types-2.3>, \"mail\"=>#<Gem::Specification:0x1edbd70f9c mail-2.6.1>, \"rack\"=>#<Gem::Specification:0x1edbd0a260 rack-1.6.0.beta>, \"rack-protection\"=>#<Gem::Specification:0x1edbcfa2e8 rack-protection-1.5.3>, \"sinatra\"=>#<Gem::Specification:0x1edbce6554 sinatra-1.4.5>, \"sqlite3\"=>#<Gem::Specification:0x1edbb22bc8 sqlite3-1.3.9>, \"daemons\"=>#<Gem::Specification:0x1edbb0b7ac daemons-1.1.9>, \"thin\"=>#<Gem::Specification:0x1edbb1a75c thin-1.5.1>, \"skinny\"=>#<Gem::Specification:0x1edbcda060 skinny-0.2.3>, \"mailcatcher\"=>#<Gem::Specification:0x1edbd4f20c mailcatcher-0.5.12>}\n```\n. This works for me out the box running Ruby 2.2.0 and letting Rubygems install i18n 0.7.0. It seems that it could be related to i18n v0.7.0 going final.\n. ",
    "Hettomei": "Same problem here with ruby 2.1.2\n\nFor the people who start with ruby/gem and really need this one, you can install it from github :\n(maybe it works for me because I have i18n (0.7.0.beta1) installed)\n\n``` bash\ngit  clone git@github.com:sj26/mailcatcher.git\ncd mailcatcher\ngem build mailcatcher.gemspec\ngem install ./mailcatcher-0.6.0.gem\nrbenv rehash #(if using rbenv)\nmailcatcher\n```\n\nAs said in issue #156 it comes without assets\n. :+1: \n. Because I need master branch to run, if it help someone....\n\nTo add assets : \n\n``` bash\ncd path_to_git_clone\nbundle\nbundle exec rake assets \ngem which mailcatcher # display path to previously installed gem\ncp -R public/assets PATH_TO_GEM/public\n```\n. Same problem here with ruby 2.1.2\n\nFor the people who start with ruby/gem and really need this one, you can install it from github :\n(maybe it works for me because I have i18n (0.7.0.beta1) installed)\n\n``` bash\ngit  clone git@github.com:sj26/mailcatcher.git\ncd mailcatcher\ngem build mailcatcher.gemspec\ngem install ./mailcatcher-0.6.0.gem\nrbenv rehash #(if using rbenv)\nmailcatcher\n```\n\nAs said in issue #156 it comes without assets\n. :+1: \n. Because I need master branch to run, if it help someone....\n\nTo add assets : \n\n``` bash\ncd path_to_git_clone\nbundle\nbundle exec rake assets \ngem which mailcatcher # display path to previously installed gem\ncp -R public/assets PATH_TO_GEM/public\n```\n. ",
    "john-999": "+1, with:\n- Rails: 4.2.0.beta1\n- Ruby: 2.1.2p95\n- Rubygems: 2.2.2\n. For those who urgently need mails to work with Rails: 4.2.0.beta1, this worked great for me:\n\nhttps://github.com/ryanb/letter_opener\n. But it didn't for `i18n-0.7.0.beta1` ;-(\n. Yes, but unfortunately it didn't change anything.\n. I have installed mailcatcher (0.6.1), but it still doesn't catch any mails.\n\nI have noticed that my eventmachine is at 1.0.6 - if I understand you correctly, that would be the issue here?\n. +1, with:\n- Rails: 4.2.0.beta1\n- Ruby: 2.1.2p95\n- Rubygems: 2.2.2\n. For those who urgently need mails to work with Rails: 4.2.0.beta1, this worked great for me:\n\nhttps://github.com/ryanb/letter_opener\n. But it didn't for `i18n-0.7.0.beta1` ;-(\n. Yes, but unfortunately it didn't change anything.\n. I have installed mailcatcher (0.6.1), but it still doesn't catch any mails.\n\nI have noticed that my eventmachine is at 1.0.6 - if I understand you correctly, that would be the issue here?\n. ",
    "rebelwarrior": "same problem downgrading i18n fixed it.\n. same problem downgrading i18n fixed it.\n. ",
    "kwando": "Had the same problem to , downgrading `i18n` to 0.6.11 works.\n. Had the same problem to , downgrading `i18n` to 0.6.11 works.\n. ",
    "dwenaus": "@kwando your solution worked. \n. Just uninstalling did not work for me. I had to downgrade. \n`gem install i18n -v 0.6.11` \nthen it worked. This was suggested in the other open ticket https://github.com/sj26/mailcatcher/issues/155\n. @kwando your solution worked. \n. Just uninstalling did not work for me. I had to downgrade. \n`gem install i18n -v 0.6.11` \nthen it worked. This was suggested in the other open ticket https://github.com/sj26/mailcatcher/issues/155\n. ",
    "CamJN": "Apparently this can be fixed easily, can someone make a pull request with these changes?\n\nhttps://github.com/mortik/mailcatcher/commit/bdb0c9415b3ab664274b4ccc3469912b0abfcb34\n. Apparently this can be fixed easily, can someone make a pull request with these changes?\n\nhttps://github.com/mortik/mailcatcher/commit/bdb0c9415b3ab664274b4ccc3469912b0abfcb34\n. ",
    "pisaacs": "Been using mailcatcher for while now. Removing `i18n-0.7.0.beta1` worked for me!\n\n```\n$ gem list\n.....\ni18n (0.7.0.beta1, 0.6.11)\n```\n\n```\n$ gem uninstall i18n\n\nSelect gem to uninstall:\n 1. i18n-0.6.11\n 2. i18n-0.7.0.beta1\n 3. All versions\n> 2\n```\n\n```\n$ mailcatcher\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://127.0.0.1:1080\n*** MailCatcher runs as a daemon by default. Go to the web interface to quit.\n```\n. Been using mailcatcher for while now. Removing `i18n-0.7.0.beta1` worked for me!\n\n```\n$ gem list\n.....\ni18n (0.7.0.beta1, 0.6.11)\n```\n\n```\n$ gem uninstall i18n\n\nSelect gem to uninstall:\n 1. i18n-0.6.11\n 2. i18n-0.7.0.beta1\n 3. All versions\n> 2\n```\n\n```\n$ mailcatcher\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://127.0.0.1:1080\n*** MailCatcher runs as a daemon by default. Go to the web interface to quit.\n```\n. ",
    "esbanarango": "Thanks @pisaacs! Removing `i18n-0.7.0.beta1`also worked for me.\n. :+1: \n. Thanks @pisaacs! Removing `i18n-0.7.0.beta1`also worked for me.\n. :+1: \n. ",
    "abrambailey": "Well this isn't the best solution. \n\n```\nfunkdified@funktop ~/rails_projects/hearingtracker $ gem uninstall i18n\n\nSelect gem to uninstall:\n 1. i18n-0.6.11\n 2. i18n-0.7.0.beta1\n 3. All versions\n> 2\n\nYou have requested to uninstall the gem:\n    i18n-0.7.0.beta1\n\nactivesupport-4.2.0.rc2 depends on i18n (< 0.8, >= 0.7.0.beta1)\nIf you remove this gem, these dependencies will not be met.\nContinue with Uninstall? [yN]  y\nSuccessfully uninstalled i18n-0.7.0.beta1\nfunkdified@funktop ~/rails_projects/hearingtracker $ mailcatcher\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://127.0.0.1:1080\n*** MailCatcher runs as a daemon by default. Go to the web interface to quit.\n\nfunkdified@funktop ~/rails_projects/hearingtracker $ rails s\nCould not find i18n-0.7.0.beta1 in any of the sources\nRun `bundle install` to install missing gems.\n```\n\nSo now I need to remove the gem and boot up mailcatcher.. then bundle and  start my app.. Laborious!\n. To fix this problem, change this line in mailcatcher.rb\n\n`require 'active_support/core_ext/'`\n\nTO \n\n`require 'active_support/core_ext/object'`\n. This works if you are not using 4.2.0.rc2 .. otherwise error =\n\n`activesupport-4.2.0.rc2 depends on i18n (< 0.8, >= 0.7.0.beta1)`\n. Nevermind, fixed with \n\n``` bash\nrvm default@mailcatcher --create do gem install mailcatcher\nrvm wrapper default@mailcatcher --no-prefix mailcatcher catchmail\n```\n. Well this isn't the best solution. \n\n```\nfunkdified@funktop ~/rails_projects/hearingtracker $ gem uninstall i18n\n\nSelect gem to uninstall:\n 1. i18n-0.6.11\n 2. i18n-0.7.0.beta1\n 3. All versions\n> 2\n\nYou have requested to uninstall the gem:\n    i18n-0.7.0.beta1\n\nactivesupport-4.2.0.rc2 depends on i18n (< 0.8, >= 0.7.0.beta1)\nIf you remove this gem, these dependencies will not be met.\nContinue with Uninstall? [yN]  y\nSuccessfully uninstalled i18n-0.7.0.beta1\nfunkdified@funktop ~/rails_projects/hearingtracker $ mailcatcher\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://127.0.0.1:1080\n*** MailCatcher runs as a daemon by default. Go to the web interface to quit.\n\nfunkdified@funktop ~/rails_projects/hearingtracker $ rails s\nCould not find i18n-0.7.0.beta1 in any of the sources\nRun `bundle install` to install missing gems.\n```\n\nSo now I need to remove the gem and boot up mailcatcher.. then bundle and  start my app.. Laborious!\n. To fix this problem, change this line in mailcatcher.rb\n\n`require 'active_support/core_ext/'`\n\nTO \n\n`require 'active_support/core_ext/object'`\n. This works if you are not using 4.2.0.rc2 .. otherwise error =\n\n`activesupport-4.2.0.rc2 depends on i18n (< 0.8, >= 0.7.0.beta1)`\n. Nevermind, fixed with \n\n``` bash\nrvm default@mailcatcher --create do gem install mailcatcher\nrvm wrapper default@mailcatcher --no-prefix mailcatcher catchmail\n```\n. ",
    "AHaymond": "+1 for @pisaacs comment. Removing the `i18n-0.7.0.beta1` worked for me!\n. +1 for @pisaacs comment. Removing the `i18n-0.7.0.beta1` worked for me!\n. ",
    "bergerjac": "@CamJN the link in [your comment](https://github.com/sj26/mailcatcher/issues/155#issuecomment-61494096) is broken\n. Good point. Just thought it would be convenient to have the timestamp piped out by default. If I'm doing a lot of testing it's convenient to see it in the terminal.\n. true, MailCatcher is an SMTP tool. I just checked out the RFC822 and it shows that `From` and `Sender` are not always the same values.\n\nexample from http://www.w3.org/Protocols/rfc822/ A.2.7.\n\n```\n       George's secretary sends out a message which was authored\n   jointly by all the members of a committee.  Note that the name\n   of the committee cannot be specified, since <group> names  are\n   not permitted in the From field.\n\n       From:   Jones@Host,\n               Smith@Other-Host,\n               Doe@Somewhere-Else\n       Sender: Secy@SHost\n```\n\nMaybe you can help me understand :)\n. Thanks for your replies and the link to RCF821. I've got enough info to understand better.\n. @CamJN the link in [your comment](https://github.com/sj26/mailcatcher/issues/155#issuecomment-61494096) is broken\n. Good point. Just thought it would be convenient to have the timestamp piped out by default. If I'm doing a lot of testing it's convenient to see it in the terminal.\n. true, MailCatcher is an SMTP tool. I just checked out the RFC822 and it shows that `From` and `Sender` are not always the same values.\n\nexample from http://www.w3.org/Protocols/rfc822/ A.2.7.\n\n```\n       George's secretary sends out a message which was authored\n   jointly by all the members of a committee.  Note that the name\n   of the committee cannot be specified, since <group> names  are\n   not permitted in the From field.\n\n       From:   Jones@Host,\n               Smith@Other-Host,\n               Doe@Somewhere-Else\n       Sender: Secy@SHost\n```\n\nMaybe you can help me understand :)\n. Thanks for your replies and the link to RCF821. I've got enough info to understand better.\n. ",
    "jondoe1337": "Still having this issue with i18n 0.7.0:\n\n```\n# gem install mailcatcher\nFetching: i18n-0.7.0.gem (100%)\nSuccessfully installed i18n-0.7.0\nSuccessfully installed mailcatcher-0.6.4\nParsing documentation for i18n-0.7.0\nInstalling ri documentation for i18n-0.7.0\nParsing documentation for mailcatcher-0.6.4\nDone installing documentation for i18n, mailcatcher after 0 seconds\n2 gems installed\n\n# mailcatcher \n/usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- concurrent (LoadError)\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /var/lib/gems/2.1.0/gems/activesupport-4.2.7.rc1/lib/active_support/logger_thread_safe_level.rb:2:in `<top (required)>'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /var/lib/gems/2.1.0/gems/activesupport-4.2.7.rc1/lib/active_support/logger.rb:3:in `<top (required)>'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /var/lib/gems/2.1.0/gems/activesupport-4.2.7.rc1/lib/active_support.rb:27:in `<top (required)>'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /var/lib/gems/2.1.0/gems/activesupport-4.2.7.rc1/lib/active_support/all.rb:1:in `<top (required)>'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /var/lib/gems/2.1.0/gems/mailcatcher-0.6.4/lib/mail_catcher.rb:16:in `<top (required)>'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /var/lib/gems/2.1.0/gems/mailcatcher-0.6.4/bin/mailcatcher:3:in `<top (required)>'\n    from /usr/local/bin/mailcatcher:23:in `load'\n    from /usr/local/bin/mailcatcher:23:in `<main>'\n```\n. That worked for me - i replaced the version above with:\n\n```\ngem install activesupport -v 4.2.6\n```\n\nThanks!\n. Still having this issue with i18n 0.7.0:\n\n```\n# gem install mailcatcher\nFetching: i18n-0.7.0.gem (100%)\nSuccessfully installed i18n-0.7.0\nSuccessfully installed mailcatcher-0.6.4\nParsing documentation for i18n-0.7.0\nInstalling ri documentation for i18n-0.7.0\nParsing documentation for mailcatcher-0.6.4\nDone installing documentation for i18n, mailcatcher after 0 seconds\n2 gems installed\n\n# mailcatcher \n/usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- concurrent (LoadError)\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /var/lib/gems/2.1.0/gems/activesupport-4.2.7.rc1/lib/active_support/logger_thread_safe_level.rb:2:in `<top (required)>'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /var/lib/gems/2.1.0/gems/activesupport-4.2.7.rc1/lib/active_support/logger.rb:3:in `<top (required)>'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /var/lib/gems/2.1.0/gems/activesupport-4.2.7.rc1/lib/active_support.rb:27:in `<top (required)>'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /var/lib/gems/2.1.0/gems/activesupport-4.2.7.rc1/lib/active_support/all.rb:1:in `<top (required)>'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /var/lib/gems/2.1.0/gems/mailcatcher-0.6.4/lib/mail_catcher.rb:16:in `<top (required)>'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /var/lib/gems/2.1.0/gems/mailcatcher-0.6.4/bin/mailcatcher:3:in `<top (required)>'\n    from /usr/local/bin/mailcatcher:23:in `load'\n    from /usr/local/bin/mailcatcher:23:in `<main>'\n```\n. That worked for me - i replaced the version above with:\n\n```\ngem install activesupport -v 4.2.6\n```\n\nThanks!\n. ",
    "Paxa": "I forked and put it in git\n\n``` ruby\ngem 'mailcatcher', github: 'Paxa/mailcatcher', branch: 'with_assets', ref: '4fa41e39df'\n```\n. I forked and put it in git\n\n``` ruby\ngem 'mailcatcher', github: 'Paxa/mailcatcher', branch: 'with_assets', ref: '4fa41e39df'\n```\n. ",
    "veggiemonk": ":+1: \n. :+1: \n. ",
    "thaJeztah": "Made a quick gist: https://gist.github.com/thaJeztah/1d61ab063ee583345670 that\n- Puts the installs in alphabetic order (see https://docs.docker.com/articles/dockerfile_best-practices/)\n- Cleans up apt cache afterwards\n\nNot yet included the entrypoint idea\n. LOL you're fast. Thanks!\n. Hm, thinking about this; \n\n   EXPOSE 25 80\n\nand `--http-port 80 --smtp-port=25` Should be possible inside the Dockerfile. You'd be able to connect to the _standard_ SMTP ports of the container (e.g. when linked to another container).\n\nIf you need to expose those ports on the _host_ with the \"10XX\" ports, you can still do `docker run -p 1080:80 -p 1025:25 ....` \n. But better give it all a test, I'm writing \"out of my head\"\n\n(the ports should work though, that's how I have configured my mailcatcher Dockerfile)\n. Well, it _should_ work, because _inside the container_ you're running as root. _Publishing_ it to the host on ports 25/80 also, because the docker-daemon has root access.\n. Made a quick gist: https://gist.github.com/thaJeztah/1d61ab063ee583345670 that\n- Puts the installs in alphabetic order (see https://docs.docker.com/articles/dockerfile_best-practices/)\n- Cleans up apt cache afterwards\n\nNot yet included the entrypoint idea\n. LOL you're fast. Thanks!\n. Hm, thinking about this; \n\n   EXPOSE 25 80\n\nand `--http-port 80 --smtp-port=25` Should be possible inside the Dockerfile. You'd be able to connect to the _standard_ SMTP ports of the container (e.g. when linked to another container).\n\nIf you need to expose those ports on the _host_ with the \"10XX\" ports, you can still do `docker run -p 1080:80 -p 1025:25 ....` \n. But better give it all a test, I'm writing \"out of my head\"\n\n(the ports should work though, that's how I have configured my mailcatcher Dockerfile)\n. Well, it _should_ work, because _inside the container_ you're running as root. _Publishing_ it to the host on ports 25/80 also, because the docker-daemon has root access.\n. ",
    "bjaglin": "It turns out this is fixed in master! After some bisecting, I found out f8df981d96fbf02ef1ea2fea66c9fdc00b61c5f3 is to thank. That commit had the (expected) side-effect of bumping `activesupport` from `3.2.19` to `4.0.10`, which did the trick... Go figure out exactly why, but at least it works.\n. It turns out this is fixed in master! After some bisecting, I found out f8df981d96fbf02ef1ea2fea66c9fdc00b61c5f3 is to thank. That commit had the (expected) side-effect of bumping `activesupport` from `3.2.19` to `4.0.10`, which did the trick... Go figure out exactly why, but at least it works.\n. ",
    "carsonreinke": "Sounds like i18n is not installed in the gemset, what does `gem list` say?\n. Maybe related to https://github.com/sj26/mailcatcher/issues/155?\n. Sounds like i18n is not installed in the gemset, what does `gem list` say?\n. Maybe related to https://github.com/sj26/mailcatcher/issues/155?\n. ",
    "dziesig": "Just installed mailcatcher and have same bug. According to gem list,  i18n is installed as:  i18n (0.7.0.beta1, 0.6.11).\n\nI am running linux mint 17.\n. It sure is!!!! i18n beta breaks it.\n\nDon Z\n\nOn 09/20/2014 08:20 PM, Carson Reinke wrote:\n\n> Maybe related to #155 https://github.com/sj26/mailcatcher/issues/155?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub \n> https://github.com/sj26/mailcatcher/issues/164#issuecomment-56284526.\n. Just installed mailcatcher and have same bug. According to gem list,  i18n is installed as:  i18n (0.7.0.beta1, 0.6.11).\n\nI am running linux mint 17.\n. It sure is!!!! i18n beta breaks it.\n\nDon Z\n\nOn 09/20/2014 08:20 PM, Carson Reinke wrote:\n\n> Maybe related to #155 https://github.com/sj26/mailcatcher/issues/155?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub \n> https://github.com/sj26/mailcatcher/issues/164#issuecomment-56284526.\n. ",
    "danylevskyi": "Here is a way to make it work.\n\n```\nrvm default@mailcatcher --create do gem install mailcatcher\nrvm wrapper default@mailcatcher --no-prefix mailcatcher catchmail\nrvm default@mailcatcher do gem install i18n -v 0.6.11\nrvm default@mailcatcher do gem uninstall i18n -Ix --version '>0.6.11'\n```\n. Here is a way to make it work.\n\n```\nrvm default@mailcatcher --create do gem install mailcatcher\nrvm wrapper default@mailcatcher --no-prefix mailcatcher catchmail\nrvm default@mailcatcher do gem install i18n -v 0.6.11\nrvm default@mailcatcher do gem uninstall i18n -Ix --version '>0.6.11'\n```\n. ",
    "chanakasan": "Removing the i18n gem beta version worked for me.\n\nI had below versions.\ni18n (0.7.0.beta1, 0.6.11)\nmailcatcher (0.5.12)\n\nI did,\n\n```\ngem uninstall i18n -v 0.7.0.beta1\n```\n\nAnd then it worked\n\n```\nmailcatcher\n# => output\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://127.0.0.1:1080\n*** MailCatcher runs as a daemon by default. Go to the web interface to quit.\n\n```\n. Removing the i18n gem beta version worked for me.\n\nI had below versions.\ni18n (0.7.0.beta1, 0.6.11)\nmailcatcher (0.5.12)\n\nI did,\n\n```\ngem uninstall i18n -v 0.7.0.beta1\n```\n\nAnd then it worked\n\n```\nmailcatcher\n# => output\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://127.0.0.1:1080\n*** MailCatcher runs as a daemon by default. Go to the web interface to quit.\n\n```\n. ",
    "tobinibot": "I'm not able to remove the `i18n-0.7.0.beta1` version since the Rails 4.2 beta depends on it, and I'm assuming that the upcoming Rails 4.2 release will as well. I'm also using rbenv, not RVM/gemsets, so I can't create some little wrapper gemset.\n\nIs there an actual fix planned?\n. I\u2019m having this problem with mailcatcher, and I installed it as a gem (fresh install, too). I\u2019d be happy to supply more details if need be.\n\n```\n$ gem install mailcatcher\nFetching: mailcatcher-0.6.3.gem (100%)\nSuccessfully installed mailcatcher-0.6.3\n1 gem installed\n\n$ mailcatcher \n/usr/local/opt/rbenv/versions/2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:113:in `require': unable to find a version of 'sinatra' to activate (Gem::LoadError)\n    from /usr/local/opt/rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/mailcatcher-0.6.3/lib/mail_catcher/web/application.rb:5:in `<top (required)>'\n    from /usr/local/opt/rbenv/versions/2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:68:in `require'\n    from /usr/local/opt/rbenv/versions/2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:68:in `require'\n    from /usr/local/opt/rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/mailcatcher-0.6.3/lib/mail_catcher/web.rb:4:in `<top (required)>'\n    from /usr/local/opt/rbenv/versions/2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:68:in `require'\n    from /usr/local/opt/rbenv/versions/2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:68:in `require'\n    from /usr/local/opt/rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/mailcatcher-0.6.3/lib/mail_catcher.rb:20:in `<top (required)>'\n    from /usr/local/opt/rbenv/versions/2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:127:in `require'\n    from /usr/local/opt/rbenv/versions/2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:127:in `rescue in require'\n    from /usr/local/opt/rbenv/versions/2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:40:in `require'\n    from /usr/local/opt/rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/mailcatcher-0.6.3/bin/mailcatcher:3:in `<top (required)>'\n    from /usr/local/opt/rbenv/versions/2.3.0/bin/mailcatcher:22:in `load'\n    from /usr/local/opt/rbenv/versions/2.3.0/bin/mailcatcher:22:in `<main>'\n\n$ gem list\n\n*** LOCAL GEMS ***\n\nactioncable (5.0.0.beta1)\n\u2026\nsinatra (1.4.6, 1.4.4)\nsinatra-asset-pipeline (0.7.0, 0.4.0)\nsinatra-contrib (1.4.6, 1.4.2)\n\u2026\nwebsocket-driver (0.6.3)\nwebsocket-extensions (0.1.2)\n```\n. I'm not able to remove the `i18n-0.7.0.beta1` version since the Rails 4.2 beta depends on it, and I'm assuming that the upcoming Rails 4.2 release will as well. I'm also using rbenv, not RVM/gemsets, so I can't create some little wrapper gemset.\n\nIs there an actual fix planned?\n. I\u2019m having this problem with mailcatcher, and I installed it as a gem (fresh install, too). I\u2019d be happy to supply more details if need be.\n\n```\n$ gem install mailcatcher\nFetching: mailcatcher-0.6.3.gem (100%)\nSuccessfully installed mailcatcher-0.6.3\n1 gem installed\n\n$ mailcatcher \n/usr/local/opt/rbenv/versions/2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:113:in `require': unable to find a version of 'sinatra' to activate (Gem::LoadError)\n    from /usr/local/opt/rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/mailcatcher-0.6.3/lib/mail_catcher/web/application.rb:5:in `<top (required)>'\n    from /usr/local/opt/rbenv/versions/2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:68:in `require'\n    from /usr/local/opt/rbenv/versions/2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:68:in `require'\n    from /usr/local/opt/rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/mailcatcher-0.6.3/lib/mail_catcher/web.rb:4:in `<top (required)>'\n    from /usr/local/opt/rbenv/versions/2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:68:in `require'\n    from /usr/local/opt/rbenv/versions/2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:68:in `require'\n    from /usr/local/opt/rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/mailcatcher-0.6.3/lib/mail_catcher.rb:20:in `<top (required)>'\n    from /usr/local/opt/rbenv/versions/2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:127:in `require'\n    from /usr/local/opt/rbenv/versions/2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:127:in `rescue in require'\n    from /usr/local/opt/rbenv/versions/2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:40:in `require'\n    from /usr/local/opt/rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/mailcatcher-0.6.3/bin/mailcatcher:3:in `<top (required)>'\n    from /usr/local/opt/rbenv/versions/2.3.0/bin/mailcatcher:22:in `load'\n    from /usr/local/opt/rbenv/versions/2.3.0/bin/mailcatcher:22:in `<main>'\n\n$ gem list\n\n*** LOCAL GEMS ***\n\nactioncable (5.0.0.beta1)\n\u2026\nsinatra (1.4.6, 1.4.4)\nsinatra-asset-pipeline (0.7.0, 0.4.0)\nsinatra-contrib (1.4.6, 1.4.2)\n\u2026\nwebsocket-driver (0.6.3)\nwebsocket-extensions (0.1.2)\n```\n. ",
    "kibaekr": "+1 dreamhood's solution worked for me\n. +1 dreamhood's solution worked for me\n. ",
    "johanbaaij": "`mailcatcher --http-ip=0.0.0.0` works for me on nitrous.io. do you see anything when you visit the webinterface on port 1080?\n. `mailcatcher --http-ip=0.0.0.0` works for me on nitrous.io. do you see anything when you visit the webinterface on port 1080?\n. ",
    "MrSkinny": "Sorry for very late reply. I didn't realize I needed to do a server reboot to shut the daemon off and change the http-ip settings. Ordinarily you can use the web interface to quit the daemon -- but that's no good if you have no access to it in the first place.  Or is there a CLI option to turn mailcatcher off?\n. Sorry for very late reply. I didn't realize I needed to do a server reboot to shut the daemon off and change the http-ip settings. Ordinarily you can use the web interface to quit the daemon -- but that's no good if you have no access to it in the first place.  Or is there a CLI option to turn mailcatcher off?\n. ",
    "kapso": ":+1: \n. :+1: \n. ",
    "chrishough": ":+1: \n. Closed via: https://github.com/sj26/mailcatcher/issues/171\n. Unfortunately I have not @TiteiKo.  I have to kill and restart the server which is really annoying. \n. Yes, that was the issue, however,  **please note** in order to run mailcatcher using rbenv you have to start it outside your project folder, or you may get this error trying to start it:\n\n```\n/Users/chrishough/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/bundler-1.7.9/lib/bundler/rubygems_integration.rb:309:in `block in replace_bin_path': undefined method `name' for nil:NilClass (NoMethodError)\n    from .bundle/binstubs/mailcatcher:16:in `<main>'\n```\n\n![screen shot 2015-01-02 at 12 21 51 pm](https://cloud.githubusercontent.com/assets/744056/5599404/80a28776-927a-11e4-94ae-03b571566222.png)\n. I am getting the same problem on osx 10.10.1, rails 4.2, and ruby 2.2.0.  I tried @danlo's fix but that tossed another huge error for me: \n\n```\n\u279c  ~  gem install eventmachine -v 1.0.3\nBuilding native extensions.  This could take a while...\nERROR:  Error installing eventmachine:\n    ERROR: Failed to build gem native extension.\n\n    /Users/chrishough/.rbenv/versions/2.2.0/bin/ruby -r ./siteconf20150107-6357-13us0t8.rb extconf.rb\nchecking for rb_trap_immediate in ruby.h,rubysig.h... no\nchecking for rb_thread_blocking_region()... no\nchecking for inotify_init() in sys/inotify.h... no\nchecking for __NR_inotify_init in sys/syscall.h... no\nchecking for writev() in sys/uio.h... yes\nchecking for rb_wait_for_single_fd()... yes\nchecking for rb_enable_interrupt()... no\nchecking for rb_time_new()... yes\nchecking for sys/event.h... yes\nchecking for sys/queue.h... yes\ncreating Makefile\n\nmake \"DESTDIR=\" clean\n\nmake \"DESTDIR=\"\ncompiling binder.cpp\ncompiling cmain.cpp\ncompiling ed.cpp\ncompiling em.cpp\nem.cpp:827:9: error: use of undeclared identifier 'rb_thread_select'; did you mean 'rb_thread_fd_select'?\n        return EmSelect (maxsocket+1, &fdreads, &fdwrites, &fderrors, &tv);\n               ^~~~~~~~\n               rb_thread_fd_select\n./em.h:25:20: note: expanded from macro 'EmSelect'\n  #define EmSelect rb_thread_select\n                   ^\n/Users/chrishough/.rbenv/versions/2.2.0/include/ruby-2.2.0/ruby/intern.h:454:5: note: 'rb_thread_fd_select' declared here\nint rb_thread_fd_select(int, rb_fdset_t *, rb_fdset_t *, rb_fdset_t *, struct timeval *);\n    ^\nem.cpp:827:32: error: cannot initialize a parameter of type 'rb_fdset_t *' with an rvalue of type 'fd_set *'\n        return EmSelect (maxsocket+1, &fdreads, &fdwrites, &fderrors, &tv);\n                                      ^~~~~~~~\n/Users/chrishough/.rbenv/versions/2.2.0/include/ruby-2.2.0/ruby/intern.h:454:42: note: passing argument to parameter here\nint rb_thread_fd_select(int, rb_fdset_t *, rb_fdset_t *, rb_fdset_t *, struct timeval *);\n                                         ^\nem.cpp:946:6: error: use of undeclared identifier 'rb_thread_select'; did you mean 'rb_thread_fd_select'?\n                                        EmSelect (0, NULL, NULL, NULL, &tv);\n                                        ^~~~~~~~\n                                        rb_thread_fd_select\n./em.h:25:20: note: expanded from macro 'EmSelect'\n  #define EmSelect rb_thread_select\n                   ^\n/Users/chrishough/.rbenv/versions/2.2.0/include/ruby-2.2.0/ruby/intern.h:454:5: note: 'rb_thread_fd_select' declared here\nint rb_thread_fd_select(int, rb_fdset_t *, rb_fdset_t *, rb_fdset_t *, struct timeval *);\n    ^\n3 errors generated.\nmake: *** [em.o] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /Users/chrishough/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/eventmachine-1.0.3 for inspection.\nResults logged to /Users/chrishough/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/extensions/x86_64-darwin-14/2.2.0-static/eventmachine-1.0.3/gem_make.out\n```\n\nIf I run the gem as **mailcatcher -f -v** it works\n. ![screen shot 2015-01-29 at 9 12 45 am](https://cloud.githubusercontent.com/assets/744056/5962195/03345c42-a797-11e4-9beb-30b64659b660.png)\n\nConfirmed, thank you\n. :+1: \n. Closed via: https://github.com/sj26/mailcatcher/issues/171\n. Unfortunately I have not @TiteiKo.  I have to kill and restart the server which is really annoying. \n. Yes, that was the issue, however,  **please note** in order to run mailcatcher using rbenv you have to start it outside your project folder, or you may get this error trying to start it:\n\n```\n/Users/chrishough/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/bundler-1.7.9/lib/bundler/rubygems_integration.rb:309:in `block in replace_bin_path': undefined method `name' for nil:NilClass (NoMethodError)\n    from .bundle/binstubs/mailcatcher:16:in `<main>'\n```\n\n![screen shot 2015-01-02 at 12 21 51 pm](https://cloud.githubusercontent.com/assets/744056/5599404/80a28776-927a-11e4-94ae-03b571566222.png)\n. I am getting the same problem on osx 10.10.1, rails 4.2, and ruby 2.2.0.  I tried @danlo's fix but that tossed another huge error for me: \n\n```\n\u279c  ~  gem install eventmachine -v 1.0.3\nBuilding native extensions.  This could take a while...\nERROR:  Error installing eventmachine:\n    ERROR: Failed to build gem native extension.\n\n    /Users/chrishough/.rbenv/versions/2.2.0/bin/ruby -r ./siteconf20150107-6357-13us0t8.rb extconf.rb\nchecking for rb_trap_immediate in ruby.h,rubysig.h... no\nchecking for rb_thread_blocking_region()... no\nchecking for inotify_init() in sys/inotify.h... no\nchecking for __NR_inotify_init in sys/syscall.h... no\nchecking for writev() in sys/uio.h... yes\nchecking for rb_wait_for_single_fd()... yes\nchecking for rb_enable_interrupt()... no\nchecking for rb_time_new()... yes\nchecking for sys/event.h... yes\nchecking for sys/queue.h... yes\ncreating Makefile\n\nmake \"DESTDIR=\" clean\n\nmake \"DESTDIR=\"\ncompiling binder.cpp\ncompiling cmain.cpp\ncompiling ed.cpp\ncompiling em.cpp\nem.cpp:827:9: error: use of undeclared identifier 'rb_thread_select'; did you mean 'rb_thread_fd_select'?\n        return EmSelect (maxsocket+1, &fdreads, &fdwrites, &fderrors, &tv);\n               ^~~~~~~~\n               rb_thread_fd_select\n./em.h:25:20: note: expanded from macro 'EmSelect'\n  #define EmSelect rb_thread_select\n                   ^\n/Users/chrishough/.rbenv/versions/2.2.0/include/ruby-2.2.0/ruby/intern.h:454:5: note: 'rb_thread_fd_select' declared here\nint rb_thread_fd_select(int, rb_fdset_t *, rb_fdset_t *, rb_fdset_t *, struct timeval *);\n    ^\nem.cpp:827:32: error: cannot initialize a parameter of type 'rb_fdset_t *' with an rvalue of type 'fd_set *'\n        return EmSelect (maxsocket+1, &fdreads, &fdwrites, &fderrors, &tv);\n                                      ^~~~~~~~\n/Users/chrishough/.rbenv/versions/2.2.0/include/ruby-2.2.0/ruby/intern.h:454:42: note: passing argument to parameter here\nint rb_thread_fd_select(int, rb_fdset_t *, rb_fdset_t *, rb_fdset_t *, struct timeval *);\n                                         ^\nem.cpp:946:6: error: use of undeclared identifier 'rb_thread_select'; did you mean 'rb_thread_fd_select'?\n                                        EmSelect (0, NULL, NULL, NULL, &tv);\n                                        ^~~~~~~~\n                                        rb_thread_fd_select\n./em.h:25:20: note: expanded from macro 'EmSelect'\n  #define EmSelect rb_thread_select\n                   ^\n/Users/chrishough/.rbenv/versions/2.2.0/include/ruby-2.2.0/ruby/intern.h:454:5: note: 'rb_thread_fd_select' declared here\nint rb_thread_fd_select(int, rb_fdset_t *, rb_fdset_t *, rb_fdset_t *, struct timeval *);\n    ^\n3 errors generated.\nmake: *** [em.o] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /Users/chrishough/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/eventmachine-1.0.3 for inspection.\nResults logged to /Users/chrishough/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/extensions/x86_64-darwin-14/2.2.0-static/eventmachine-1.0.3/gem_make.out\n```\n\nIf I run the gem as **mailcatcher -f -v** it works\n. ![screen shot 2015-01-29 at 9 12 45 am](https://cloud.githubusercontent.com/assets/744056/5962195/03345c42-a797-11e4-9beb-30b64659b660.png)\n\nConfirmed, thank you\n. ",
    "numediaweb": "For windows users, you can stop/kill the mailcatcher by checking all running ruby tasks:\n\n```\ntasklist /FI \"Imagename eq ruby.exe\"\n```\n\nThis will show a table like:\n\n```\nImage Name                     PID Session Name        Session#    Mem Usage\n========================= ======== ================ =========== ============\nruby.exe                      5252 Console                    2     85,232 K\n```\n\nThen kill the ruby process with\n\n```\ntaskkill /F /pid 5252\n```\n. I created a [blog post](http://www.numediaweb.com/installing-mailcatcher-in-windows/1290) about this.\n. For windows users, you can stop/kill the mailcatcher by checking all running ruby tasks:\n\n```\ntasklist /FI \"Imagename eq ruby.exe\"\n```\n\nThis will show a table like:\n\n```\nImage Name                     PID Session Name        Session#    Mem Usage\n========================= ======== ================ =========== ============\nruby.exe                      5252 Console                    2     85,232 K\n```\n\nThen kill the ruby process with\n\n```\ntaskkill /F /pid 5252\n```\n. I created a [blog post](http://www.numediaweb.com/installing-mailcatcher-in-windows/1290) about this.\n. ",
    "justin808": "I could not get the 0.5.12 version to work with the latest Ruby. The master branch works great. Here's the exact steps I used, from my tweet at https://twitter.com/railsonmaui.\n\nYak shaving, troubleshooting MailCatcher after updating to Ruby 2.1.3? Missing emails? Here\u2019s the fix: http://forum.railsonmaui.com/t/yak-shaving-troubleshooting-with-mailcatcher/102 \n. I could not get the 0.5.12 version to work with the latest Ruby. The master branch works great. Here's the exact steps I used, from my tweet at https://twitter.com/railsonmaui.\n\nYak shaving, troubleshooting MailCatcher after updating to Ruby 2.1.3? Missing emails? Here\u2019s the fix: http://forum.railsonmaui.com/t/yak-shaving-troubleshooting-with-mailcatcher/102 \n. ",
    "allantokuda": "I see the same error. It prevents using the Delete key to delete a single message within the user interface as well. Occurs on Firefox, Safari, and Chrome, for Mailcatcher 0.5.12.\n. I see the same error. It prevents using the Delete key to delete a single message within the user interface as well. Occurs on Firefox, Safari, and Chrome, for Mailcatcher 0.5.12.\n. ",
    "btofel": "Yes, all the time and for every message I tried deleting (meaning: not even once deletion of a single message via API succeeded).\n\nWould attaching error page I get when calling API help in any way?\n. Yes, all the time and for every message I tried deleting (meaning: not even once deletion of a single message via API succeeded).\n\nWould attaching error page I get when calling API help in any way?\n. ",
    "mathbr": "There is a **Clear** button in the upper right corner for this.\n. There is a **Clear** button in the upper right corner for this.\n. ",
    "TiteiKo": "same here\n@chrishough did you find the problem (and fix) ?\n. same here\n@chrishough did you find the problem (and fix) ?\n. ",
    "eric1234": "I believe this is because you have mailcatcher in your Gemfile. Due to version constraints it is installing and using an old version of mailcatcher.\n\nAs the mailcatcher README suggests, don't put that in your Gemfile, just install manually. Just add something to your readme that it needs to be installed or you can expect to keep getting version conflict problems.\n. I believe this is because you have mailcatcher in your Gemfile. Due to version constraints it is installing and using an old version of mailcatcher.\n\nAs the mailcatcher README suggests, don't put that in your Gemfile, just install manually. Just add something to your readme that it needs to be installed or you can expect to keep getting version conflict problems.\n. ",
    "pollyrobin": "Alright i solved my own issue.\n\nI used -ip instead of --ip.\n\nHowerver i noticed that if you put something else as the syntax instead of -- it will generate the message \n\nso mailcatcher -ip \nmailcatcher foo\nmailcatcher bar\n\nwill all result in the \nStarting MailCatcher \n~~> ERROR: Something's using port 1025. Are you alreay running MailCatcher?\n\nMaybe adding a valid error message wil prevent people like me from doing stuff wrong?\n. Alright i solved my own issue.\n\nI used -ip instead of --ip.\n\nHowerver i noticed that if you put something else as the syntax instead of -- it will generate the message \n\nso mailcatcher -ip \nmailcatcher foo\nmailcatcher bar\n\nwill all result in the \nStarting MailCatcher \n~~> ERROR: Something's using port 1025. Are you alreay running MailCatcher?\n\nMaybe adding a valid error message wil prevent people like me from doing stuff wrong?\n. ",
    "carolmirakove": "I am experiencing this problem as well, but I have a few variations to report:\n- I am running mailcatcher 5.12 with Ruby 2.15 on Mac OS X Yosemite\n- I run `mailcatcher` with no arguments\n\nWhen I quit via the web interface and I return to the console, I get the same error message reported above:\n\n```\nStarting MailCatcher\n~~> ERROR: Something's using port 1025. Are you already running MailCatcher?\n```\n\nLike pollyrobin I cannot find any trace of mailcatcher running in the Console. \nThe only solution I've found is to restart my machine.\n. I am experiencing this problem as well, but I have a few variations to report:\n- I am running mailcatcher 5.12 with Ruby 2.15 on Mac OS X Yosemite\n- I run `mailcatcher` with no arguments\n\nWhen I quit via the web interface and I return to the console, I get the same error message reported above:\n\n```\nStarting MailCatcher\n~~> ERROR: Something's using port 1025. Are you already running MailCatcher?\n```\n\nLike pollyrobin I cannot find any trace of mailcatcher running in the Console. \nThe only solution I've found is to restart my machine.\n. ",
    "fatuhoku": "Got the same issue with Ruby 2.2.4 on Mac.\n\nmailcatcher does not stop at all even with `sudo kill <PID>`. `sudo kill -9 <PID>` did work however\n. Got the same issue with Ruby 2.2.4 on Mac.\n\nmailcatcher does not stop at all even with `sudo kill <PID>`. `sudo kill -9 <PID>` did work however\n. ",
    "rhuancarlos": "function here ... function here ... ",
    "delwaterman": "I am having this same problem. Can you please describe your solution in more detail? \n. I am having this same problem. Can you please describe your solution in more detail? \n. ",
    "josephecombs": "A workaround I found in the meantime is to run mailcatcher in the foreground with \"mailcatcher -f\", after which emails were caught and I would be able to view them on localhost:1080\n. A workaround I found in the meantime is to run mailcatcher in the foreground with \"mailcatcher -f\", after which emails were caught and I would be able to view them on localhost:1080\n. ",
    "j15e": "+1 for this fix, I am keeping a copy of old ruby 2.1.2 only to run mailcatcher\n. To trigger a new build you may push force a new version (append commit just to change time & create a new checksum)\n. +1 for this fix, I am keeping a copy of old ruby 2.1.2 only to run mailcatcher\n. To trigger a new build you may push force a new version (append commit just to change time & create a new checksum)\n. ",
    "zacstewart": "This fix looks good, and all the Travis workers passed except for one that had a network timeout and triggered an error. Can someone restart the build and merge if it passes?\n. This fix looks good, and all the Travis workers passed except for one that had a network timeout and triggered an error. Can someone restart the build and merge if it passes?\n. ",
    "anthonator": ":+1:  Have the same issue.\n. I posted a response to your SO question but the README specifically states to not put mailcatcher in your Gemfile.\n. :+1:  Have the same issue.\n. I posted a response to your SO question but the README specifically states to not put mailcatcher in your Gemfile.\n. ",
    "deepflame": "This is from the `README.md`\n\n> Please don't put mailcatcher into your Gemfile. It will conflict with your applications gems at some point.\n> \n> Instead, pop a note in your README stating you use mailcatcher. Simply run gem install mailcatcher then mailcatcher to get started.\n. This is from the `README.md`\n\n> Please don't put mailcatcher into your Gemfile. It will conflict with your applications gems at some point.\n> \n> Instead, pop a note in your README stating you use mailcatcher. Simply run gem install mailcatcher then mailcatcher to get started.\n. ",
    "albancrommer": "Thanks for the reply.\n\nAs much as I'd like to trust you, the PHP doc seems clear about the error.\n\nRefering to http://php.net/manual/en/configuration.changes.php\n\n```\n\"php_value ... Can be used only with PHP_INI_ALL and PHP_INI_PERDIR\"\n```\n\nAnd then this page ( http://php.net/manual/en/ini.list.php ) shows the option is not in this family\n\n```\n\"sendmail_path ...  PHP_INI_SYSTEM\"\n```\n\nAnd, indeed, as a sysadmin I wouldn't like every looney to be able to tweak sendmail_path in a htaccess.\n\nSorry to be a bit rough, just trying to help, but did you even test before closing the issue ?\n. Ok cool, more than happy I could help ;)\n. Thanks for the reply.\n\nAs much as I'd like to trust you, the PHP doc seems clear about the error.\n\nRefering to http://php.net/manual/en/configuration.changes.php\n\n```\n\"php_value ... Can be used only with PHP_INI_ALL and PHP_INI_PERDIR\"\n```\n\nAnd then this page ( http://php.net/manual/en/ini.list.php ) shows the option is not in this family\n\n```\n\"sendmail_path ...  PHP_INI_SYSTEM\"\n```\n\nAnd, indeed, as a sysadmin I wouldn't like every looney to be able to tweak sendmail_path in a htaccess.\n\nSorry to be a bit rough, just trying to help, but did you even test before closing the issue ?\n. Ok cool, more than happy I could help ;)\n. ",
    "marcosgdf": "Sure! https://gist.github.com/marcosgdf/c51f5abe3f4d99506865\n\n![captura de pantalla 2015-01-17 a las 16 13 19](https://cloud.githubusercontent.com/assets/168744/5789264/c5604548-9e63-11e4-9297-25ec0dfb1c5e.png)\n. Version: 0.6.1. Version 0.5.12 works OK.\n\nRequest URL:http://dolibarr.local:1080/messages/1.json\n\n```\nEncoding::UndefinedConversionError - \"\\xC3\" from ASCII-8BIT to UTF-8:\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:34:in `encode'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:34:in `to_json'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:34:in `to_json_with_active_support_encoder'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:56:in `to_json'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/json-1.8.2/lib/json/common.rb:223:in `generate'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/json-1.8.2/lib/json/common.rb:223:in `generate'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:96:in `stringify'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:34:in `encode'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:21:in `encode'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:37:in `to_json_with_active_support_encoder'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/mailcatcher-0.6.1/lib/mail_catcher/web/application.rb:87:in `block in <class:Application>'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1603:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1603:in `block in compile!'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:966:in `[]'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:966:in `block (3 levels) in route!'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:985:in `route_eval'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:966:in `block (2 levels) in route!'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1006:in `block in process_route'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1004:in `catch'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1004:in `process_route'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:964:in `block in route!'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:963:in `each'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:963:in `route!'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1076:in `block in dispatch!'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1058:in `block in invoke'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1058:in `catch'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1058:in `invoke'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1073:in `dispatch!'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:898:in `block in call!'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1058:in `block in invoke'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1058:in `catch'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1058:in `invoke'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:898:in `call!'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:886:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-protection-1.5.3/lib/rack/protection/xss_header.rb:18:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-protection-1.5.3/lib/rack/protection/path_traversal.rb:16:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-protection-1.5.3/lib/rack/protection/json_csrf.rb:18:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-protection-1.5.3/lib/rack/protection/base.rb:49:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-protection-1.5.3/lib/rack/protection/base.rb:49:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-protection-1.5.3/lib/rack/protection/frame_options.rb:31:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-1.6.0/lib/rack/nulllogger.rb:9:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-1.6.0/lib/rack/head.rb:13:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:180:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:2014:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1478:in `block in call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1788:in `synchronize'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1478:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-1.6.0/lib/rack/urlmap.rb:66:in `block in call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-1.6.0/lib/rack/urlmap.rb:50:in `each'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-1.6.0/lib/rack/urlmap.rb:50:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-1.6.0/lib/rack/builder.rb:153:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/mailcatcher-0.6.1/lib/mail_catcher/web.rb:19:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/thin-1.5.1/lib/thin/connection.rb:81:in `block in pre_process'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/thin-1.5.1/lib/thin/connection.rb:79:in `catch'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/thin-1.5.1/lib/thin/connection.rb:79:in `pre_process'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/thin-1.5.1/lib/thin/connection.rb:54:in `process'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/thin-1.5.1/lib/thin/connection.rb:39:in `receive_data'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/eventmachine-1.0.5/lib/eventmachine.rb:187:in `run_machine'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/eventmachine-1.0.5/lib/eventmachine.rb:187:in `run'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/mailcatcher-0.6.1/lib/mail_catcher.rb:155:in `run!'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/mailcatcher-0.6.1/bin/mailcatcher:5:in `<top (required)>'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/bin/mailcatcher:23:in `load'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/bin/mailcatcher:23:in `<main>'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/bin/ruby_executable_hooks:15:in `eval'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/bin/ruby_executable_hooks:15:in `<main>'\n```\n. Duplicated of #201 \n. Sure! https://gist.github.com/marcosgdf/c51f5abe3f4d99506865\n\n![captura de pantalla 2015-01-17 a las 16 13 19](https://cloud.githubusercontent.com/assets/168744/5789264/c5604548-9e63-11e4-9297-25ec0dfb1c5e.png)\n. Version: 0.6.1. Version 0.5.12 works OK.\n\nRequest URL:http://dolibarr.local:1080/messages/1.json\n\n```\nEncoding::UndefinedConversionError - \"\\xC3\" from ASCII-8BIT to UTF-8:\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:34:in `encode'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:34:in `to_json'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:34:in `to_json_with_active_support_encoder'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:56:in `to_json'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/json-1.8.2/lib/json/common.rb:223:in `generate'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/json-1.8.2/lib/json/common.rb:223:in `generate'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:96:in `stringify'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:34:in `encode'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:21:in `encode'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:37:in `to_json_with_active_support_encoder'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/mailcatcher-0.6.1/lib/mail_catcher/web/application.rb:87:in `block in <class:Application>'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1603:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1603:in `block in compile!'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:966:in `[]'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:966:in `block (3 levels) in route!'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:985:in `route_eval'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:966:in `block (2 levels) in route!'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1006:in `block in process_route'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1004:in `catch'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1004:in `process_route'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:964:in `block in route!'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:963:in `each'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:963:in `route!'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1076:in `block in dispatch!'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1058:in `block in invoke'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1058:in `catch'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1058:in `invoke'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1073:in `dispatch!'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:898:in `block in call!'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1058:in `block in invoke'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1058:in `catch'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1058:in `invoke'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:898:in `call!'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:886:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-protection-1.5.3/lib/rack/protection/xss_header.rb:18:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-protection-1.5.3/lib/rack/protection/path_traversal.rb:16:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-protection-1.5.3/lib/rack/protection/json_csrf.rb:18:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-protection-1.5.3/lib/rack/protection/base.rb:49:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-protection-1.5.3/lib/rack/protection/base.rb:49:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-protection-1.5.3/lib/rack/protection/frame_options.rb:31:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-1.6.0/lib/rack/nulllogger.rb:9:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-1.6.0/lib/rack/head.rb:13:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:180:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:2014:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1478:in `block in call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1788:in `synchronize'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/sinatra-1.4.5/lib/sinatra/base.rb:1478:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-1.6.0/lib/rack/urlmap.rb:66:in `block in call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-1.6.0/lib/rack/urlmap.rb:50:in `each'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-1.6.0/lib/rack/urlmap.rb:50:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rack-1.6.0/lib/rack/builder.rb:153:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/mailcatcher-0.6.1/lib/mail_catcher/web.rb:19:in `call'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/thin-1.5.1/lib/thin/connection.rb:81:in `block in pre_process'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/thin-1.5.1/lib/thin/connection.rb:79:in `catch'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/thin-1.5.1/lib/thin/connection.rb:79:in `pre_process'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/thin-1.5.1/lib/thin/connection.rb:54:in `process'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/thin-1.5.1/lib/thin/connection.rb:39:in `receive_data'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/eventmachine-1.0.5/lib/eventmachine.rb:187:in `run_machine'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/eventmachine-1.0.5/lib/eventmachine.rb:187:in `run'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/mailcatcher-0.6.1/lib/mail_catcher.rb:155:in `run!'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/gems/mailcatcher-0.6.1/bin/mailcatcher:5:in `<top (required)>'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/bin/mailcatcher:23:in `load'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/bin/mailcatcher:23:in `<main>'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/bin/ruby_executable_hooks:15:in `eval'\n    /usr/local/rvm/gems/ruby-1.9.3-p551/bin/ruby_executable_hooks:15:in `<main>'\n```\n. Duplicated of #201 \n. ",
    "istvano": "Please note I have tried different ports from 1025 like 2525 to see if this helps but. it does not. when running in daemon mode ( background ) the smtp does not work properly.\n. Thanks for the info. I will try to run it in the foreground and put it into bg as you suggested\n. Hi, I am changing my script to do this too. Although I was really worried as the only similar script is https://github.com/ian-kent/Go-MailHog and I really do not want to upgrade as in the project we use vagrant boxes for the devs and each has mailcatcher. \n\nIt would be nice to find out what breaks this. Unfortunatelly I am not a ruby guy and I can not see any log message anywherer.\n\nThanks\n. Please note I have tried different ports from 1025 like 2525 to see if this helps but. it does not. when running in daemon mode ( background ) the smtp does not work properly.\n. Thanks for the info. I will try to run it in the foreground and put it into bg as you suggested\n. Hi, I am changing my script to do this too. Although I was really worried as the only similar script is https://github.com/ian-kent/Go-MailHog and I really do not want to upgrade as in the project we use vagrant boxes for the devs and each has mailcatcher. \n\nIt would be nice to find out what breaks this. Unfortunatelly I am not a ruby guy and I can not see any log message anywherer.\n\nThanks\n. ",
    "cseeger": "+1, same issue as described.\n. +1, same issue as described.\n. ",
    "AntoineAugusti": "I think that it has something to do with the updated dependencies. Right, old and working ones. Left, new and not working ones.\n\nhttp://puu.sh/dGlWf/cb4b0e8dd9.png\n\nTemporary workaround: `mailcatcher -f > out.txt&`\n. I think that it has something to do with the updated dependencies. Right, old and working ones. Left, new and not working ones.\n\nhttp://puu.sh/dGlWf/cb4b0e8dd9.png\n\nTemporary workaround: `mailcatcher -f > out.txt&`\n. ",
    "rosstimson": "We encountered this issue today, it cause much hair pulling :)\n\nRunning in foreground workaround fixed it for us.\n. We encountered this issue today, it cause much hair pulling :)\n\nRunning in foreground workaround fixed it for us.\n. ",
    "r4m": "+1\n. +1\n. ",
    "yatsenko": "I have the same issue. Ubuntu 14.04\n. I have the same issue. Ubuntu 14.04\n. ",
    "liuruting": "+1, i am having the same issue as described.\n. +1, i am having the same issue as described.\n. ",
    "kevinsheffield": "+1\n. +1\n. ",
    "glebtv": "Problem is Process.daemon here:\nhttps://github.com/sj26/mailcatcher/blob/master/lib/mail_catcher.rb#L177\nI think it should be used before calling EM.run\nIf I move Process.daemon to beginning of that file, it works\n. Problem is Process.daemon here:\nhttps://github.com/sj26/mailcatcher/blob/master/lib/mail_catcher.rb#L177\nI think it should be used before calling EM.run\nIf I move Process.daemon to beginning of that file, it works\n. ",
    "bmishkin": "+1, 0.5.12, ruby 2.1.5, OS X 10.10.1\n\nrunning in foreground workaround works.\n. +1, 0.5.12, ruby 2.1.5, OS X 10.10.1\n\nrunning in foreground workaround works.\n. ",
    "vsubramanian": "+1, 0.5.12, ruby 2.1.5, OS X 10.10.1\n\nThe foreground workaround works for me too. \n. +1, 0.5.12, ruby 2.1.5, OS X 10.10.1\n\nThe foreground workaround works for me too. \n. ",
    "rubemz": "+1, ruby 2.1.2p95, , OS X 10.10.1\n\nThe foreground workaround works for me.\n. +1, ruby 2.1.2p95, , OS X 10.10.1\n\nThe foreground workaround works for me.\n. ",
    "corykeane": "+1 - super frustrating. Glad it at least works in the foreground.\n. +1 - super frustrating. Glad it at least works in the foreground.\n. ",
    "joshmanders": ":+1: \n. :+1: \n. ",
    "adahl": "+1\n. +1\n. ",
    "benjaminwood": ":+1: \n. Thanks @danlo, that does the trick!\n. :+1: \n. Thanks @danlo, that does the trick!\n. ",
    "soullivaneuh": "Exactly the same problem, and workaround.\n\nIn addition, if you run mailcatcher as daemon and try to quit from the interface, this will redirect you to mailcatcher homepage but won't kill the concerned process.\n. Exactly the same problem, and workaround.\n\nIn addition, if you run mailcatcher as daemon and try to quit from the interface, this will redirect you to mailcatcher homepage but won't kill the concerned process.\n. ",
    "soulim": "Just got the same issue, and seems like it somehow depends on Ruby version.\n\nThe mailcatcher as a daemon doesn't work on Ruby `2.1.5p273`, and everything works perfectly fine on Ruby `2.1.3p242`.\n\nI haven't changed anything on the project except Ruby version. The daemon stopped working after upgrade to Ruby 2.1.5.\n. Just got the same issue, and seems like it somehow depends on Ruby version.\n\nThe mailcatcher as a daemon doesn't work on Ruby `2.1.5p273`, and everything works perfectly fine on Ruby `2.1.3p242`.\n\nI haven't changed anything on the project except Ruby version. The daemon stopped working after upgrade to Ruby 2.1.5.\n. ",
    "danlo": "+1, I encountered this when upgrading from Rails 4.1.x to Rails 4.2. I traced it down to: net/smtp\n\nThe version of ruby remained the same: ruby 2.1.5p273\n\nRight before it sends the email\n\n```\n# byebug break point\nb /usr/local/lib/ruby/2.1.0/net/smtp.rb:555\nc\n```\n\nNet Smtp id file (/usr/local/lib/ruby/2.1.0/net/smtp.rb:555)\n    # $Id: smtp.rb 45111 2014-02-22 05:39:58Z naruse $\n\nActual code\n\n```\ndef do_start(helo_domain, user, secret, authtype)\n  raise IOError, 'SMTP session already started' if @started\n  if user or secret\n    check_auth_method(authtype || DEFAULT_AUTH_TYPE)\n    check_auth_args user, secret\n  end\n  s = Timeout.timeout(@open_timeout, Net::OpenTimeout) do\n    tcp_socket(@address, @port)\n  end\n  logging \"Connection opened: #{@address}:#{@port}\"\n  @socket = new_internet_message_io(tls? ? tlsconnect(s) : s)\n  check_response critical { recv_response() }  # <--- recv_response() doesn't get anything; ERGO; time out.\n```\n\nWhen running in the foreground (as above) the message received is: \n\n```\n\"220 EventMachine SMTP Server\"\n```\n\nWhen running in background mode; the message is not received\n. I solved the problem for myself by installing eventmachine 1.0.3\n\n```\n gem install eventmachine -v 1.0.3\n gem uninstall eventmachine -v 1.0.4\n```\n\nand then restarting mailcatcher.\n. @sj26 Someone mentioned on another thread; but could we have a new release of the existing code, but just forcing event machine at 1.0.3?\n. #182 ?\n. +1, I encountered this when upgrading from Rails 4.1.x to Rails 4.2. I traced it down to: net/smtp\n\nThe version of ruby remained the same: ruby 2.1.5p273\n\nRight before it sends the email\n\n```\n# byebug break point\nb /usr/local/lib/ruby/2.1.0/net/smtp.rb:555\nc\n```\n\nNet Smtp id file (/usr/local/lib/ruby/2.1.0/net/smtp.rb:555)\n    # $Id: smtp.rb 45111 2014-02-22 05:39:58Z naruse $\n\nActual code\n\n```\ndef do_start(helo_domain, user, secret, authtype)\n  raise IOError, 'SMTP session already started' if @started\n  if user or secret\n    check_auth_method(authtype || DEFAULT_AUTH_TYPE)\n    check_auth_args user, secret\n  end\n  s = Timeout.timeout(@open_timeout, Net::OpenTimeout) do\n    tcp_socket(@address, @port)\n  end\n  logging \"Connection opened: #{@address}:#{@port}\"\n  @socket = new_internet_message_io(tls? ? tlsconnect(s) : s)\n  check_response critical { recv_response() }  # <--- recv_response() doesn't get anything; ERGO; time out.\n```\n\nWhen running in the foreground (as above) the message received is: \n\n```\n\"220 EventMachine SMTP Server\"\n```\n\nWhen running in background mode; the message is not received\n. I solved the problem for myself by installing eventmachine 1.0.3\n\n```\n gem install eventmachine -v 1.0.3\n gem uninstall eventmachine -v 1.0.4\n```\n\nand then restarting mailcatcher.\n. @sj26 Someone mentioned on another thread; but could we have a new release of the existing code, but just forcing event machine at 1.0.3?\n. #182 ?\n. ",
    "juukie": "@danlo that worked for me too! :+1: \n. @danlo that worked for me too! :+1: \n. ",
    "eikes": ":+1: @danlo \n. :+1: @danlo \n. ",
    "drmikecrowe": ":+1: @danlo\n. @nanshu -- I'm not a ruby programmer, can you explain how to fix it?\n. :+1: @danlo\n. @nanshu -- I'm not a ruby programmer, can you explain how to fix it?\n. ",
    "kyleries": ":+1: @danlo \n. :+1: @danlo \n. ",
    "hube": ":+1: @danlo \n. :+1: @danlo \n. ",
    "Penderis": "Thank you for this, hours of reading articles where it just all about port 1080 and no one cares about 1025. This helped save my sanity. @danlo \n. Thank you for this, hours of reading articles where it just all about port 1080 and no one cares about 1025. This helped save my sanity. @danlo \n. ",
    "davidochoa": ":+1:  @danlo, thanks!\n. :+1:  @danlo, thanks!\n. ",
    "klein0r": "Nice solution @danlo ! Thanks!\n. This saved my life! Thank you so much :+1: \n. Nice solution @danlo ! Thanks!\n. This saved my life! Thank you so much :+1: \n. ",
    "BelkinaDasha": "@danlo, Thank you soo much!\n. @danlo, Thank you soo much!\n. ",
    "alextakitani": "@danlo, Thank you!!!\n. @danlo, Thank you!!!\n. ",
    "davidahopp": "I issued a pull request as a temporary fix that forces the version of eventmachine to be less than 1.0.4. If that is not used, eventmachine will default install 1.0.4 which will cause the timeout issue\n. I issued a pull request as a temporary fix that forces the version of eventmachine to be less than 1.0.4. If that is not used, eventmachine will default install 1.0.4 which will cause the timeout issue\n. ",
    "matthewbarram": "I have the same issue. Running as `mailcatcher -f` works for me too.\n. I have the same issue. Running as `mailcatcher -f` works for me too.\n. ",
    "JackEllis": "@sj26 Just came to report this exact bug. Brought in the 0.0.0pre1, as you suggested, and I can now run it fine without --foreground - thank you :+1: \n. @sj26 Just came to report this exact bug. Brought in the 0.0.0pre1, as you suggested, and I can now run it fine without --foreground - thank you :+1: \n. ",
    "BrizzleRocker": "@sj26 Sorry to jump-start this again but I don't think it's fixed and having spent the best part of 4 hours of unpaid work playing with this I'm cross! This was a completely clean install this morning.\n\nruby 1.9.3p484 (2013-11-22 revision 43786) [x86_64-linux]\n\nClean install today and updated to 0.6.0\n**\\* LOCAL GEMS ***\n\nactivesupport (4.2.0)\ndaemons (1.1.9)\neventmachine (1.0.5)\ni18n (0.7.0)\njson (1.8.2)\nmail (2.6.3)\nmailcatcher (0.6.0)\nmime-types (2.4.3)\nminitest (5.5.1)\nrack (1.6.0)\nrack-protection (1.5.3)\nsinatra (1.4.5)\nskinny (0.2.3)\nsqlite3 (1.3.10)\nthin (1.5.1)\nthread_safe (0.3.4)\ntilt (1.4.1)\ntzinfo (1.2.2)\n\nIt's working with the -f -v options but nada in the background.\n\n/usr/lib/ruby/1.9.1/net/protocol.rb:146:in `rescue in rbuf_fill': Timeout::Error (Timeout::Error)\n    from /usr/lib/ruby/1.9.1/net/protocol.rb:140:in`rbuf_fill'\n    from /usr/lib/ruby/1.9.1/net/protocol.rb:122:in `readuntil'\n    from /usr/lib/ruby/1.9.1/net/protocol.rb:132:in`readline'\n    from /usr/lib/ruby/1.9.1/net/smtp.rb:929:in `recv_response'\n    from /usr/lib/ruby/1.9.1/net/smtp.rb:552:in`block in do_start'\n    from /usr/lib/ruby/1.9.1/net/smtp.rb:939:in `critical'\n    from /usr/lib/ruby/1.9.1/net/smtp.rb:552:in`do_start'\n    from /usr/lib/ruby/1.9.1/net/smtp.rb:519:in `start'\n    from /var/lib/gems/1.9.1/gems/mail-2.6.3/lib/mail/network/delivery_methods/smtp.rb:112:in`deliver!'\n    from /var/lib/gems/1.9.1/gems/mail-2.6.3/lib/mail/message.rb:2141:in `do_delivery'\n    from /var/lib/gems/1.9.1/gems/mail-2.6.3/lib/mail/message.rb:238:in`deliver'\n    from /var/lib/gems/1.9.1/gems/mailcatcher-0.6.0/bin/catchmail:71:in `<top (required)>'\n    from /usr/local/bin/catchmail:23:in`load'\n    from /usr/local/bin/catchmail:23:in `<main>'\n. @sj26 downloading now and will report back, many thanks for monitoring this, great response.\n. @sj26 It works! Thanks again for your timely update.\n. @sj26 Sorry to jump-start this again but I don't think it's fixed and having spent the best part of 4 hours of unpaid work playing with this I'm cross! This was a completely clean install this morning.\n\nruby 1.9.3p484 (2013-11-22 revision 43786) [x86_64-linux]\n\nClean install today and updated to 0.6.0\n**\\* LOCAL GEMS ***\n\nactivesupport (4.2.0)\ndaemons (1.1.9)\neventmachine (1.0.5)\ni18n (0.7.0)\njson (1.8.2)\nmail (2.6.3)\nmailcatcher (0.6.0)\nmime-types (2.4.3)\nminitest (5.5.1)\nrack (1.6.0)\nrack-protection (1.5.3)\nsinatra (1.4.5)\nskinny (0.2.3)\nsqlite3 (1.3.10)\nthin (1.5.1)\nthread_safe (0.3.4)\ntilt (1.4.1)\ntzinfo (1.2.2)\n\nIt's working with the -f -v options but nada in the background.\n\n/usr/lib/ruby/1.9.1/net/protocol.rb:146:in `rescue in rbuf_fill': Timeout::Error (Timeout::Error)\n    from /usr/lib/ruby/1.9.1/net/protocol.rb:140:in`rbuf_fill'\n    from /usr/lib/ruby/1.9.1/net/protocol.rb:122:in `readuntil'\n    from /usr/lib/ruby/1.9.1/net/protocol.rb:132:in`readline'\n    from /usr/lib/ruby/1.9.1/net/smtp.rb:929:in `recv_response'\n    from /usr/lib/ruby/1.9.1/net/smtp.rb:552:in`block in do_start'\n    from /usr/lib/ruby/1.9.1/net/smtp.rb:939:in `critical'\n    from /usr/lib/ruby/1.9.1/net/smtp.rb:552:in`do_start'\n    from /usr/lib/ruby/1.9.1/net/smtp.rb:519:in `start'\n    from /var/lib/gems/1.9.1/gems/mail-2.6.3/lib/mail/network/delivery_methods/smtp.rb:112:in`deliver!'\n    from /var/lib/gems/1.9.1/gems/mail-2.6.3/lib/mail/message.rb:2141:in `do_delivery'\n    from /var/lib/gems/1.9.1/gems/mail-2.6.3/lib/mail/message.rb:238:in`deliver'\n    from /var/lib/gems/1.9.1/gems/mailcatcher-0.6.0/bin/catchmail:71:in `<top (required)>'\n    from /usr/local/bin/catchmail:23:in`load'\n    from /usr/local/bin/catchmail:23:in `<main>'\n. @sj26 downloading now and will report back, many thanks for monitoring this, great response.\n. @sj26 It works! Thanks again for your timely update.\n. ",
    "ianks": ":+1:\n. :+1:\n. ",
    "sebasjimenez10": "@danlo :+1: \n. @danlo :+1: \n. ",
    "jmnewman": "not sure if this is still open, but I am running into this problem where mailcatcher has stopped working. Nothing that I know of has changed (other than switching between a lot of branches) and I can't find any error messages showing where something might be breaking. right now in development I can see the emails being sent in the logs, but they're not popping up in mailcatcher. here's my set up\n- Rails 4.2.6\n- ruby 2.2.2p95\n- mailcatcher 0.6.4\n\nI have tried @danlo tip and it didn't work (ended with a result similar to @chrishough) and tried running with `mailcatcher -f -v` and installing `gem install mailcatcher --pre` and still am not getting it to work. are there any other workarounds?\n. not sure if this is still open, but I am running into this problem where mailcatcher has stopped working. Nothing that I know of has changed (other than switching between a lot of branches) and I can't find any error messages showing where something might be breaking. right now in development I can see the emails being sent in the logs, but they're not popping up in mailcatcher. here's my set up\n- Rails 4.2.6\n- ruby 2.2.2p95\n- mailcatcher 0.6.4\n\nI have tried @danlo tip and it didn't work (ended with a result similar to @chrishough) and tried running with `mailcatcher -f -v` and installing `gem install mailcatcher --pre` and still am not getting it to work. are there any other workarounds?\n. ",
    "pedro-stanaka": "I still have this problem, only able to use it in foreground. Otherwise it simply crashes the smtp interface.\nI'm using:\n- ruby 2.3.0p0 (with rvm)\n- mailcatcher 0.6.4\n- eventmachine 1.0.9.1\n. I still have this problem, only able to use it in foreground. Otherwise it simply crashes the smtp interface.\nI'm using:\n- ruby 2.3.0p0 (with rvm)\n- mailcatcher 0.6.4\n- eventmachine 1.0.9.1\n. ",
    "ryanburnette": "I saw that. Thanks.\n\nI wish I was able to add it and have Rails ignore it though. Right now we have to manually remember to install `mailcatcher` as a system Gem. Doesn't seem optimal.\n. I saw that. Thanks.\n\nI wish I was able to add it and have Rails ignore it though. Right now we have to manually remember to install `mailcatcher` as a system Gem. Doesn't seem optimal.\n. ",
    "rpocklin": "Same here, I added it as a development dependency.  It simply shouldn't default to thin, why?\n. Same here, I added it as a development dependency.  It simply shouldn't default to thin, why?\n. ",
    "leolandotan": "I'm getting this error and not receiving emails in mailcatcher from Drupal. i just did an:\n1. ubuntu 14.04 install and got latest updates\n2. lamp-server\n3. installed RVM (stable)\n4. rvm default@mailcatcher --create do gem install mailcatcher\n5. rvm wrapper default@mailcatcher --no-prefix mailcatcher catchmail\n6. upadted /etc/php5/apache2/php.ini with sendmail_path = \"/home/leotan/.rvm/bin/catchmail\"\n7. updated /etc/php5/apache2/php.ini with smtp_port = 1025\n\n/home/leotan/.rvm/gems/ruby-2.2.0@mailcatcher/gems/activesupport-3.2.21/lib/active_support/values/time_zone.rb:270: warning: circular argument reference - now\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://127.0.0.1:1080\n**\\* MailCatcher runs as a daemon by default. Go to the web interface to quit.\n. Sorry to ask this but is it the same process still when using RVM? or before doing the steps i should use ruby 1.9?\n. I'm getting this error and not receiving emails in mailcatcher from Drupal. i just did an:\n1. ubuntu 14.04 install and got latest updates\n2. lamp-server\n3. installed RVM (stable)\n4. rvm default@mailcatcher --create do gem install mailcatcher\n5. rvm wrapper default@mailcatcher --no-prefix mailcatcher catchmail\n6. upadted /etc/php5/apache2/php.ini with sendmail_path = \"/home/leotan/.rvm/bin/catchmail\"\n7. updated /etc/php5/apache2/php.ini with smtp_port = 1025\n\n/home/leotan/.rvm/gems/ruby-2.2.0@mailcatcher/gems/activesupport-3.2.21/lib/active_support/values/time_zone.rb:270: warning: circular argument reference - now\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://127.0.0.1:1080\n**\\* MailCatcher runs as a daemon by default. Go to the web interface to quit.\n. Sorry to ask this but is it the same process still when using RVM? or before doing the steps i should use ruby 1.9?\n. ",
    "thiagogsr": "+1. The emails coming not using Rails :/\n. +1. The emails coming not using Rails :/\n. ",
    "goddamnyouryan": "+1 Using rails 4.1.9 and Ruby 2.2 and mails aren't being delivered.\n. +1 Using rails 4.1.9 and Ruby 2.2 and mails aren't being delivered.\n. ",
    "AdaevK": "+1 mails are not delivered, Ruby 2.2\n. +1 mails are not delivered, Ruby 2.2\n. ",
    "macinjosh": "The syntax Pear Mail uses to call sendmail is like this:\n\n```\n/usr/bin/env catchmail -i -f'no-reply@example.com' -- 'test@example.com' < email.txt\n```\n\nIt seems that mailcatcher is unable to parse this input.\n\n```\n/var/lib/gems/1.9.1/gems/mailcatcher-0.5.12/bin/catchmail:48:in `read': No such file or directory - test@example.com (Errno::ENOENT)\n    from /var/lib/gems/1.9.1/gems/mailcatcher-0.5.12/bin/catchmail:48:in `<top (required)>'\n    from /usr/local/bin/catchmail:23:in `load'\n    from /usr/local/bin/catchmail:23:in `<main>'\n```\n\nsendmail on OS X accepts this as an input and correctly delivers the message.\n. The syntax Pear Mail uses to call sendmail is like this:\n\n```\n/usr/bin/env catchmail -i -f'no-reply@example.com' -- 'test@example.com' < email.txt\n```\n\nIt seems that mailcatcher is unable to parse this input.\n\n```\n/var/lib/gems/1.9.1/gems/mailcatcher-0.5.12/bin/catchmail:48:in `read': No such file or directory - test@example.com (Errno::ENOENT)\n    from /var/lib/gems/1.9.1/gems/mailcatcher-0.5.12/bin/catchmail:48:in `<top (required)>'\n    from /usr/local/bin/catchmail:23:in `load'\n    from /usr/local/bin/catchmail:23:in `<main>'\n```\n\nsendmail on OS X accepts this as an input and correctly delivers the message.\n. ",
    "SebSept": "Sorry for late answer (I'm on another computer)\nI've added json gem, plus another json package added (I google about a previous error)\nI'm on fedora 19.\n\n(I'll give more nfo tomorrow)\n. I switched to fedora 21 but did not tried mailcatcher.\nI had to find an alternative solution to mailcatcher faster.\nMaybe I'll retry another day ...\n\nThanks for your project, thanks for sharing. \n. Sorry for late answer (I'm on another computer)\nI've added json gem, plus another json package added (I google about a previous error)\nI'm on fedora 19.\n\n(I'll give more nfo tomorrow)\n. I switched to fedora 21 but did not tried mailcatcher.\nI had to find an alternative solution to mailcatcher faster.\nMaybe I'll retry another day ...\n\nThanks for your project, thanks for sharing. \n. ",
    "hoang1417": ":+1: @danlo. Yes, it is. I thought the issue was different, thanks!\n. For who having same issue: both 2 below solutions work:\n\nRun in the **foreground**\n\n``` ruby\nmailcatcher -f -v\n```\n\nor make sure you're using **eventmachine version 1.0.3**\n\n``` ruby\ngem uninstall eventmachine -v 1.0.4\ngem install eventmachine -v 1.0.3\n```\n. Yes, mailcatcher (0.6.1) works with eventmachine (1.0.5). Thanks @sj26 :+1: \n. :+1: @danlo. Yes, it is. I thought the issue was different, thanks!\n. For who having same issue: both 2 below solutions work:\n\nRun in the **foreground**\n\n``` ruby\nmailcatcher -f -v\n```\n\nor make sure you're using **eventmachine version 1.0.3**\n\n``` ruby\ngem uninstall eventmachine -v 1.0.4\ngem install eventmachine -v 1.0.3\n```\n. Yes, mailcatcher (0.6.1) works with eventmachine (1.0.5). Thanks @sj26 :+1: \n. ",
    "kartikluke": "Can we have this fixed by setting the dependency on the right version of eventmachine. @sj26 \n. Can we have this fixed by setting the dependency on the right version of eventmachine. @sj26 \n. ",
    "davity": "mailcatcher 0.6.0pre1 working fine\n. mailcatcher 0.6.0pre1 working fine\n. ",
    "lancedikson": "So, I have the same issue :(\n\nEnvironment: \n- Rails 4.1.7\n- ruby 2.1.5p273 (2014-11-13 revision 48405) [x86_64-darwin14.0]\n- mailcatcher 0.6.1\n\nI send 2 messages async with sidekiq:\n\n```\nUserMailer.delay.debt_manager(model.terminal.user_id, model.id)\nUserMailer.delay.debt_assistant(model.terminal.user_id, model.id)\n```\n\nand it works pretty:\n\n```\n2015-02-06T14:49:36.531Z 10008 TID-ox0xokpb0 Sidekiq::Extensions::DelayedMailer JID-9c1255a5873768a6eccc0d25 INFO: start\n2015-02-06T14:49:36.539Z 10008 TID-ox0xoo8ao Sidekiq::Extensions::DelayedMailer JID-d655b32f9f366ef6ab7a0dcf INFO: start\n2015-02-06T14:49:39.768Z 10008 TID-ox0xokpb0 Sidekiq::Extensions::DelayedMailer JID-9c1255a5873768a6eccc0d25 INFO: done: 3.236 sec\n2015-02-06T14:49:40.231Z 10008 TID-ox0xoo8ao Sidekiq::Extensions::DelayedMailer JID-d655b32f9f366ef6ab7a0dcf INFO: done: 3.691 sec\n```\n\nBut, mailcatcher doesn't catch any mails. Key `--foreground` doesn't help somehow \u2014 it doesn't write any errors or info messages:\n\n```\niMac:adrenaline-server lancedikson$ mailcatcher\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://127.0.0.1:1080\n```\n. So, I have the same issue :(\n\nEnvironment: \n- Rails 4.1.7\n- ruby 2.1.5p273 (2014-11-13 revision 48405) [x86_64-darwin14.0]\n- mailcatcher 0.6.1\n\nI send 2 messages async with sidekiq:\n\n```\nUserMailer.delay.debt_manager(model.terminal.user_id, model.id)\nUserMailer.delay.debt_assistant(model.terminal.user_id, model.id)\n```\n\nand it works pretty:\n\n```\n2015-02-06T14:49:36.531Z 10008 TID-ox0xokpb0 Sidekiq::Extensions::DelayedMailer JID-9c1255a5873768a6eccc0d25 INFO: start\n2015-02-06T14:49:36.539Z 10008 TID-ox0xoo8ao Sidekiq::Extensions::DelayedMailer JID-d655b32f9f366ef6ab7a0dcf INFO: start\n2015-02-06T14:49:39.768Z 10008 TID-ox0xokpb0 Sidekiq::Extensions::DelayedMailer JID-9c1255a5873768a6eccc0d25 INFO: done: 3.236 sec\n2015-02-06T14:49:40.231Z 10008 TID-ox0xoo8ao Sidekiq::Extensions::DelayedMailer JID-d655b32f9f366ef6ab7a0dcf INFO: done: 3.691 sec\n```\n\nBut, mailcatcher doesn't catch any mails. Key `--foreground` doesn't help somehow \u2014 it doesn't write any errors or info messages:\n\n```\niMac:adrenaline-server lancedikson$ mailcatcher\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://127.0.0.1:1080\n```\n. ",
    "rusikf": "If you use another host/port, it can be changed in default uri options and set in readme this note, but ok , if you don't want it, it will be so)\n. If you use another host/port, it can be changed in default uri options and set in readme this note, but ok , if you don't want it, it will be so)\n. ",
    "jvanbaarsen": "Ah, it might be as simple as just creating a new Git tag of the latest release :)\n. Ah, it might be as simple as just creating a new Git tag of the latest release :)\n. ",
    "andywenk": "Hi Samuel,\n\nthanks a lot for your fast reply. Yes this is confusing because obviously two different things are named the same way - namely 'From'.\n\nThanks for your work on this.\n\nCheers\n\nAndy\n. Hi Samuel,\n\nthanks a lot for your fast reply. Yes this is confusing because obviously two different things are named the same way - namely 'From'.\n\nThanks for your work on this.\n\nCheers\n\nAndy\n. ",
    "pineapplethief": "+1 for that\n. +1 for that\n. ",
    "nanshu": "@drmikecrowe I've forked this repository and implemented my fix there. I am not sure if the fix covers all the places that needs patch but you may try to see if it works for you. nanshu/mailcatcher\n. @drmikecrowe I've forked this repository and implemented my fix there. I am not sure if the fix covers all the places that needs patch but you may try to see if it works for you. nanshu/mailcatcher\n. ",
    "eexit": "It looks like I have somewhat the same error here:\n\n```\nmailcatcher -vf\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://0.0.0.0:1080\n==> SMTP: Received message from '<noreply@foobar.com>' (15665 bytes)\n/home/vagrant/.rvm/gems/ruby-2.2.0/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:34:in `encode': \"\\xC2\" from ASCII-8BIT to UTF-8 (Encoding::UndefinedConversionError)\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:34:in `to_json'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:34:in `to_json_with_active_support_encoder'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:56:in `to_json'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/json-1.8.2/lib/json/common.rb:223:in `generate'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/json-1.8.2/lib/json/common.rb:223:in `generate'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:96:in `stringify'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:34:in `encode'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:21:in `encode'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:37:in `to_json_with_active_support_encoder'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/mailcatcher-0.6.1/lib/mail_catcher/web/application.rb:67:in `block (3 levels) in <class:Application>'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/em/channel.rb:43:in `call'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/em/channel.rb:43:in `block (3 levels) in push'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/em/channel.rb:43:in `each'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/em/channel.rb:43:in `block (2 levels) in push'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/em/channel.rb:43:in `each'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/em/channel.rb:43:in `block in push'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/eventmachine.rb:248:in `call'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/eventmachine.rb:248:in `schedule'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/em/channel.rb:43:in `push'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/mailcatcher-0.6.1/lib/mail_catcher/mail.rb:57:in `block in add_message'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/eventmachine.rb:968:in `call'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/eventmachine.rb:968:in `block in run_deferred_callbacks'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/eventmachine.rb:965:in `times'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/eventmachine.rb:965:in `run_deferred_callbacks'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/eventmachine.rb:187:in `run_machine'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/eventmachine.rb:187:in `run'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/mailcatcher-0.6.1/lib/mail_catcher.rb:155:in `run!'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/mailcatcher-0.6.1/bin/mailcatcher:5:in `<top (required)>'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/bin/mailcatcher:23:in `load'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/bin/mailcatcher:23:in `<main>'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `eval'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'\nzsh: exit 1     mailcatcher --http-ip=0.0.0.0 -vf\n```\n\n**EDIT**: I downgraded to `v0.5.12` and it works. Seems to be a BCB...\n. @dmromanov did you also remove all dependencies?\n\nBy the way, the auto-refresh feature doesn't work when downgrading. I got this warning when launching mailcatcher:\n\n```\nmailcatcher\n/home/vagrant/.rvm/gems/ruby-2.2.0/gems/activesupport-3.2.21/lib/active_support/values/time_zone.rb:270: warning: circular argument reference - now\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://0.0.0.0:1080\n*** MailCatcher runs as a daemon by default. Go to the web interface to quit.\n```\n. @sj26 I don't send particular odd characters but there's obviously a regression.\n. @ollietreend or you can downgrade to 0.5.12 :)\n. Problem is that this tool looks to be not maintained anymore... :(\n. It looks like I have somewhat the same error here:\n\n```\nmailcatcher -vf\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://0.0.0.0:1080\n==> SMTP: Received message from '<noreply@foobar.com>' (15665 bytes)\n/home/vagrant/.rvm/gems/ruby-2.2.0/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:34:in `encode': \"\\xC2\" from ASCII-8BIT to UTF-8 (Encoding::UndefinedConversionError)\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:34:in `to_json'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:34:in `to_json_with_active_support_encoder'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:56:in `to_json'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/json-1.8.2/lib/json/common.rb:223:in `generate'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/json-1.8.2/lib/json/common.rb:223:in `generate'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:96:in `stringify'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:34:in `encode'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:21:in `encode'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:37:in `to_json_with_active_support_encoder'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/mailcatcher-0.6.1/lib/mail_catcher/web/application.rb:67:in `block (3 levels) in <class:Application>'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/em/channel.rb:43:in `call'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/em/channel.rb:43:in `block (3 levels) in push'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/em/channel.rb:43:in `each'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/em/channel.rb:43:in `block (2 levels) in push'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/em/channel.rb:43:in `each'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/em/channel.rb:43:in `block in push'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/eventmachine.rb:248:in `call'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/eventmachine.rb:248:in `schedule'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/em/channel.rb:43:in `push'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/mailcatcher-0.6.1/lib/mail_catcher/mail.rb:57:in `block in add_message'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/eventmachine.rb:968:in `call'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/eventmachine.rb:968:in `block in run_deferred_callbacks'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/eventmachine.rb:965:in `times'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/eventmachine.rb:965:in `run_deferred_callbacks'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/eventmachine.rb:187:in `run_machine'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.4/lib/eventmachine.rb:187:in `run'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/mailcatcher-0.6.1/lib/mail_catcher.rb:155:in `run!'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/gems/mailcatcher-0.6.1/bin/mailcatcher:5:in `<top (required)>'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/bin/mailcatcher:23:in `load'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/bin/mailcatcher:23:in `<main>'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `eval'\n    from /home/vagrant/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'\nzsh: exit 1     mailcatcher --http-ip=0.0.0.0 -vf\n```\n\n**EDIT**: I downgraded to `v0.5.12` and it works. Seems to be a BCB...\n. @dmromanov did you also remove all dependencies?\n\nBy the way, the auto-refresh feature doesn't work when downgrading. I got this warning when launching mailcatcher:\n\n```\nmailcatcher\n/home/vagrant/.rvm/gems/ruby-2.2.0/gems/activesupport-3.2.21/lib/active_support/values/time_zone.rb:270: warning: circular argument reference - now\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://0.0.0.0:1080\n*** MailCatcher runs as a daemon by default. Go to the web interface to quit.\n```\n. @sj26 I don't send particular odd characters but there's obviously a regression.\n. @ollietreend or you can downgrade to 0.5.12 :)\n. Problem is that this tool looks to be not maintained anymore... :(\n. ",
    "dmromanov": "@eexit downgrading did not work\n. @eexit downgrading did not work\n. ",
    "simaks": "Downgrading to v0.5.12 worked, thanks\n. Downgrading to v0.5.12 worked, thanks\n. ",
    "issei-m": "I have same issue. also 0.5.\\* works fine.\n. I have same issue. also 0.5.\\* works fine.\n. ",
    "TiMESPLiNTER": "Also troubles with random crahses with the following PHP-Code:\n\n``` php\n<?php var_dump(mail('from@provider.ch', 'Hall\u00f6llele', 'Ey du Gr\u00f6li')) ?>\n```\n\nIt seems to be because of the `\u00f6`s. Strange is that it sometimes works sometimes not.\n\n```\n==> smtp://127.0.0.1:1025\n==> http://127.0.0.1:1080\n==> SMTP: Received message from '<sas@localhost.localhost>' (316 bytes)\n/Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:34:in `encode': \"\\xC3\" from ASCII-8BIT to UTF-8 (Encoding::UndefinedConversionError)\nfrom /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:34:in `to_json'\nfrom /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:34:in `to_json_with_active_support_encoder'\nfrom /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:56:in `to_json'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/json/common.rb:224:in `generate'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/json/common.rb:224:in `generate'\nfrom /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:96:in `stringify'\nfrom /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:34:in `encode'\nfrom /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:21:in `encode'\nfrom /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:37:in `to_json_with_active_support_encoder'\nfrom /Library/Ruby/Gems/2.0.0/gems/mailcatcher-0.6.1/lib/mail_catcher/web/application.rb:67:in `block (3 levels) in <class:Application>'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `call'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `block (3 levels) in push'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `each'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `block (2 levels) in push'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `each'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `block in push'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/eventmachine.rb:248:in `call'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/eventmachine.rb:248:in `schedule'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `push'\nfrom /Library/Ruby/Gems/2.0.0/gems/mailcatcher-0.6.1/lib/mail_catcher/mail.rb:57:in `block in add_message'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/eventmachine.rb:968:in `call'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/eventmachine.rb:968:in `block in run_deferred_callbacks'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/eventmachine.rb:965:in `times'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/eventmachine.rb:965:in `run_deferred_callbacks'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/eventmachine.rb:187:in `run_machine'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/eventmachine.rb:187:in `run'\nfrom /Library/Ruby/Gems/2.0.0/gems/mailcatcher-0.6.1/lib/mail_catcher.rb:155:in `run!'\nfrom /Library/Ruby/Gems/2.0.0/gems/mailcatcher-0.6.1/bin/mailcatcher:5:in `<top (required)>'\nfrom /usr/bin/mailcatcher:23:in `load'\nfrom /usr/bin/mailcatcher:23:in `<main>'\n```\n. Also troubles with random crahses with the following PHP-Code:\n\n``` php\n<?php var_dump(mail('from@provider.ch', 'Hall\u00f6llele', 'Ey du Gr\u00f6li')) ?>\n```\n\nIt seems to be because of the `\u00f6`s. Strange is that it sometimes works sometimes not.\n\n```\n==> smtp://127.0.0.1:1025\n==> http://127.0.0.1:1080\n==> SMTP: Received message from '<sas@localhost.localhost>' (316 bytes)\n/Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:34:in `encode': \"\\xC3\" from ASCII-8BIT to UTF-8 (Encoding::UndefinedConversionError)\nfrom /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:34:in `to_json'\nfrom /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:34:in `to_json_with_active_support_encoder'\nfrom /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:56:in `to_json'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/json/common.rb:224:in `generate'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/json/common.rb:224:in `generate'\nfrom /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:96:in `stringify'\nfrom /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:34:in `encode'\nfrom /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.0/lib/active_support/json/encoding.rb:21:in `encode'\nfrom /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.0/lib/active_support/core_ext/object/json.rb:37:in `to_json_with_active_support_encoder'\nfrom /Library/Ruby/Gems/2.0.0/gems/mailcatcher-0.6.1/lib/mail_catcher/web/application.rb:67:in `block (3 levels) in <class:Application>'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `call'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `block (3 levels) in push'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `each'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `block (2 levels) in push'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `each'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `block in push'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/eventmachine.rb:248:in `call'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/eventmachine.rb:248:in `schedule'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `push'\nfrom /Library/Ruby/Gems/2.0.0/gems/mailcatcher-0.6.1/lib/mail_catcher/mail.rb:57:in `block in add_message'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/eventmachine.rb:968:in `call'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/eventmachine.rb:968:in `block in run_deferred_callbacks'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/eventmachine.rb:965:in `times'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/eventmachine.rb:965:in `run_deferred_callbacks'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/eventmachine.rb:187:in `run_machine'\nfrom /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.5/lib/eventmachine.rb:187:in `run'\nfrom /Library/Ruby/Gems/2.0.0/gems/mailcatcher-0.6.1/lib/mail_catcher.rb:155:in `run!'\nfrom /Library/Ruby/Gems/2.0.0/gems/mailcatcher-0.6.1/bin/mailcatcher:5:in `<top (required)>'\nfrom /usr/bin/mailcatcher:23:in `load'\nfrom /usr/bin/mailcatcher:23:in `<main>'\n```\n. ",
    "kusmierz": "0.5.12 works like a charm. I had problems with 0.6.1 and polish chars with diacritics (\u017c\u00f3\u0142\u0107\u0119\u015b\u0105\u017a\u0144).\n. 0.5.12 works like a charm. I had problems with 0.6.1 and polish chars with diacritics (\u017c\u00f3\u0142\u0107\u0119\u015b\u0105\u017a\u0144).\n. ",
    "fero8": "Same problem with 0.6.1 even without any special characters.\n\n``````\n==> SMTP: Received message from '<test@example.com>' (2654 bytes)\n/Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.1/lib/active_support/core_ext/object/json.rb:34:in `encode': \"\\xC5\" from ASCII-8BIT to UTF-8 (Encoding::UndefinedConversionError)\n    from /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.1/lib/active_support/core_ext/object/json.rb:34:in `to_json'\n    from /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.1/lib/active_support/core_ext/object/json.rb:34:in `to_json_with_active_support_encoder'\n    from /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.1/lib/active_support/json/encoding.rb:56:in `to_json'\n    from /Library/Ruby/Gems/2.0.0/gems/json-1.8.2/lib/json/common.rb:223:in `generate'\n    from /Library/Ruby/Gems/2.0.0/gems/json-1.8.2/lib/json/common.rb:223:in `generate'\n    from /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.1/lib/active_support/json/encoding.rb:96:in `stringify'\n    from /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.1/lib/active_support/json/encoding.rb:34:in `encode'\n    from /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.1/lib/active_support/json/encoding.rb:21:in `encode'\n    from /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.1/lib/active_support/core_ext/object/json.rb:37:in `to_json_with_active_support_encoder'\n    from /Library/Ruby/Gems/2.0.0/gems/mailcatcher-0.6.1/lib/mail_catcher/web/application.rb:67:in `block (3 levels) in <class:Application>'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/em/channel.rb:43:in `call'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/em/channel.rb:43:in `block (3 levels) in push'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/em/channel.rb:43:in `each'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/em/channel.rb:43:in `block (2 levels) in push'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/em/channel.rb:43:in `each'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/em/channel.rb:43:in `block in push'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/eventmachine.rb:248:in `call'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/eventmachine.rb:248:in `schedule'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/em/channel.rb:43:in `push'\n    from /Library/Ruby/Gems/2.0.0/gems/mailcatcher-0.6.1/lib/mail_catcher/mail.rb:57:in `block in add_message'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/eventmachine.rb:959:in `call'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/eventmachine.rb:959:in `block in run_deferred_callbacks'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/eventmachine.rb:956:in `times'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/eventmachine.rb:956:in `run_deferred_callbacks'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/eventmachine.rb:187:in `run_machine'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/eventmachine.rb:187:in `run'\n    from /Library/Ruby/Gems/2.0.0/gems/mailcatcher-0.6.1/lib/mail_catcher.rb:155:in `run!'\n    from /Library/Ruby/Gems/2.0.0/gems/mailcatcher-0.6.1/bin/mailcatcher:5:in `<top (required)>'\n    from /usr/bin/mailcatcher:23:in `load'\n    from /usr/bin/mailcatcher:23:in `<main>'```\n``````\n. Same problem with 0.6.1 even without any special characters.\n\n``````\n==> SMTP: Received message from '<test@example.com>' (2654 bytes)\n/Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.1/lib/active_support/core_ext/object/json.rb:34:in `encode': \"\\xC5\" from ASCII-8BIT to UTF-8 (Encoding::UndefinedConversionError)\n    from /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.1/lib/active_support/core_ext/object/json.rb:34:in `to_json'\n    from /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.1/lib/active_support/core_ext/object/json.rb:34:in `to_json_with_active_support_encoder'\n    from /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.1/lib/active_support/json/encoding.rb:56:in `to_json'\n    from /Library/Ruby/Gems/2.0.0/gems/json-1.8.2/lib/json/common.rb:223:in `generate'\n    from /Library/Ruby/Gems/2.0.0/gems/json-1.8.2/lib/json/common.rb:223:in `generate'\n    from /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.1/lib/active_support/json/encoding.rb:96:in `stringify'\n    from /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.1/lib/active_support/json/encoding.rb:34:in `encode'\n    from /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.1/lib/active_support/json/encoding.rb:21:in `encode'\n    from /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.1/lib/active_support/core_ext/object/json.rb:37:in `to_json_with_active_support_encoder'\n    from /Library/Ruby/Gems/2.0.0/gems/mailcatcher-0.6.1/lib/mail_catcher/web/application.rb:67:in `block (3 levels) in <class:Application>'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/em/channel.rb:43:in `call'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/em/channel.rb:43:in `block (3 levels) in push'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/em/channel.rb:43:in `each'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/em/channel.rb:43:in `block (2 levels) in push'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/em/channel.rb:43:in `each'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/em/channel.rb:43:in `block in push'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/eventmachine.rb:248:in `call'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/eventmachine.rb:248:in `schedule'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/em/channel.rb:43:in `push'\n    from /Library/Ruby/Gems/2.0.0/gems/mailcatcher-0.6.1/lib/mail_catcher/mail.rb:57:in `block in add_message'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/eventmachine.rb:959:in `call'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/eventmachine.rb:959:in `block in run_deferred_callbacks'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/eventmachine.rb:956:in `times'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/eventmachine.rb:956:in `run_deferred_callbacks'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/eventmachine.rb:187:in `run_machine'\n    from /Library/Ruby/Gems/2.0.0/gems/eventmachine-1.0.3/lib/eventmachine.rb:187:in `run'\n    from /Library/Ruby/Gems/2.0.0/gems/mailcatcher-0.6.1/lib/mail_catcher.rb:155:in `run!'\n    from /Library/Ruby/Gems/2.0.0/gems/mailcatcher-0.6.1/bin/mailcatcher:5:in `<top (required)>'\n    from /usr/bin/mailcatcher:23:in `load'\n    from /usr/bin/mailcatcher:23:in `<main>'```\n``````\n. ",
    "ollietreend": ":thumbsup: +1 experiencing the same issues using mailcatcher with UTF-8 encoded emails.\n. Until this bug is resolved I'm getting good results with the free package from [Mailtrap.io](https://mailtrap.io). It's working nicely. The only annoyance so far is the 2 messages per second limit which only really becomes a problem when testing batch email scripts.\n. @eexit Oh! I didn't realise that. Would you mind explaining how to downgrade it? Unfortunately I'm not too experienced with the ruby gems package manager.\n. @arnov That was easier than expected.. thanks!\n. :thumbsup: +1 experiencing the same issues using mailcatcher with UTF-8 encoded emails.\n. Until this bug is resolved I'm getting good results with the free package from [Mailtrap.io](https://mailtrap.io). It's working nicely. The only annoyance so far is the 2 messages per second limit which only really becomes a problem when testing batch email scripts.\n. @eexit Oh! I didn't realise that. Would you mind explaining how to downgrade it? Unfortunately I'm not too experienced with the ruby gems package manager.\n. @arnov That was easier than expected.. thanks!\n. ",
    "DmitriyS": "Confirm this issue with v 0.6.1\n. Confirm this issue with v 0.6.1\n. ",
    "nilsglow": "I also confirm issue with 0.6.1, whereas it works with 0.5.12\n. I also confirm issue with 0.6.1, whereas it works with 0.5.12\n. ",
    "npanasenko": "Confirming this issues as well with v 0.6.1\n. Confirming this issues as well with v 0.6.1\n. ",
    "newcron": "same here. it seems to be unable to handle utf-8 encoded e-mails.\n. same here. it seems to be unable to handle utf-8 encoded e-mails.\n. ",
    "entr": "same for me 0.6.1\n. Downgrading to 0.5.12 confirmed to work so far.\n\nOn 4 May 2015 at 15:25, Joris Berthelot notifications@github.com wrote:\n\n> @ollietreend https://github.com/ollietreend or you can downgrade to\n> 0.5.12 :)\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/sj26/mailcatcher/issues/201#issuecomment-98692272.\n. same for me 0.6.1\n. Downgrading to 0.5.12 confirmed to work so far.\n\nOn 4 May 2015 at 15:25, Joris Berthelot notifications@github.com wrote:\n\n> @ollietreend https://github.com/ollietreend or you can downgrade to\n> 0.5.12 :)\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/sj26/mailcatcher/issues/201#issuecomment-98692272.\n. ",
    "arnov": "gem uninstall mailcatcher\ngem install mailcatcher -v 0.5.12\n. gem uninstall mailcatcher\ngem install mailcatcher -v 0.5.12\n. ",
    "zeroedin": "Running into this issue as well.\n. Running into this issue as well.\n. ",
    "plista-mp": "different user - same problem, 0.5.12 works great\n. different user - same problem, 0.5.12 works great\n. ",
    "t0xicCode": "I updated activesupport to 4.2.3 and json to 1.8.3, and I wasn't able to reproduce the error any more.\n. I updated activesupport to 4.2.3 and json to 1.8.3, and I wasn't able to reproduce the error any more.\n. ",
    "arunkumarg": "Thanks alot.  0.5.12 working great.\n. Thanks alot.  0.5.12 working great.\n. ",
    "Erwane": "Updating gem json to 1.8.3 works fine (errors but no crash)\n\nEDIT : Oops ... it crash at the second utf8 mail ...\n. This solution is working fine ;)\nPatch or create a pull-request ?\n. you can't define a min an max versions of dependencies ? like in composer ?\n. I'm using CakePHP 3.3 Mailer\\Email library for sending emails. \r\n\r\n```php\r\n    /**\r\n     * Charset the email body is sent in\r\n     *\r\n     * @var string\r\n     */\r\n    public $charset = 'utf-8';\r\n\r\n    /**\r\n     * 8Bit character sets\r\n     *\r\n     * @var array\r\n     */\r\n    protected $_charset8bit = ['UTF-8', 'SHIFT_JIS'];\r\n\r\n    /**\r\n     * Return the Content-Transfer Encoding value based on the set charset\r\n     *\r\n     * @return string\r\n     */\r\n    protected function _getContentTransferEncoding()\r\n    {\r\n        $charset = strtoupper($this->charset);\r\n        if (in_array($charset, $this->_charset8bit)) {\r\n            return '8bit';\r\n        }\r\n\r\n        return '7bit';\r\n    }\r\n\r\n    public function getHeaders(array $include = [])\r\n    {\r\n         // (snip code)\r\n         $headers['Content-Transfer-Encoding'] = $this->_getContentTransferEncoding();\r\n    }\r\n```\r\n\r\n8bit is not a common way ?. Same email with PHPMailer and base64 or quoted-printable Encoding work perfectly.\r\n\r\nI confirm problem is with 7bit & 8bit . . Oops : https://en.wikipedia.org/wiki/Extended_SMTP#8BITMIME\r\nSo mailcatcher does not support BUT it is a mailcatcher pb, not mail library.\r\nBut it's okay, the thing is to known that limitation.. same as #322. Updating gem json to 1.8.3 works fine (errors but no crash)\n\nEDIT : Oops ... it crash at the second utf8 mail ...\n. This solution is working fine ;)\nPatch or create a pull-request ?\n. you can't define a min an max versions of dependencies ? like in composer ?\n. I'm using CakePHP 3.3 Mailer\\Email library for sending emails. \r\n\r\n```php\r\n    /**\r\n     * Charset the email body is sent in\r\n     *\r\n     * @var string\r\n     */\r\n    public $charset = 'utf-8';\r\n\r\n    /**\r\n     * 8Bit character sets\r\n     *\r\n     * @var array\r\n     */\r\n    protected $_charset8bit = ['UTF-8', 'SHIFT_JIS'];\r\n\r\n    /**\r\n     * Return the Content-Transfer Encoding value based on the set charset\r\n     *\r\n     * @return string\r\n     */\r\n    protected function _getContentTransferEncoding()\r\n    {\r\n        $charset = strtoupper($this->charset);\r\n        if (in_array($charset, $this->_charset8bit)) {\r\n            return '8bit';\r\n        }\r\n\r\n        return '7bit';\r\n    }\r\n\r\n    public function getHeaders(array $include = [])\r\n    {\r\n         // (snip code)\r\n         $headers['Content-Transfer-Encoding'] = $this->_getContentTransferEncoding();\r\n    }\r\n```\r\n\r\n8bit is not a common way ?. Same email with PHPMailer and base64 or quoted-printable Encoding work perfectly.\r\n\r\nI confirm problem is with 7bit & 8bit . . Oops : https://en.wikipedia.org/wiki/Extended_SMTP#8BITMIME\r\nSo mailcatcher does not support BUT it is a mailcatcher pb, not mail library.\r\nBut it's okay, the thing is to known that limitation.. same as #322. ",
    "Stex": "Using the [activesupport-json_encoder](https://github.com/rails/activesupport-json_encoder) gem seems to fix these problems. It breaks the test cases though.\n\nIf someone wants to try it, add the following lines to the specified files:\n\n``` ruby\n# mailcatcher.gemspec\ns.add_dependency 'activesupport-json_encoder', '~> 1.1.0'\n\n# lib/mail_catcher/mail_catcher.rb\nrequire 'activesupport/json_encoder'\n```\n. Using the [activesupport-json_encoder](https://github.com/rails/activesupport-json_encoder) gem seems to fix these problems. It breaks the test cases though.\n\nIf someone wants to try it, add the following lines to the specified files:\n\n``` ruby\n# mailcatcher.gemspec\ns.add_dependency 'activesupport-json_encoder', '~> 1.1.0'\n\n# lib/mail_catcher/mail_catcher.rb\nrequire 'activesupport/json_encoder'\n```\n. ",
    "iandunn": "IMO, this is really counter-intuitive. I expected the label to match the header being displayed next to it, and I think the vast majority of users would too.\n\nPreviously: #199, #133\n. IMO, this is really counter-intuitive. I expected the label to match the header being displayed next to it, and I think the vast majority of users would too.\n\nPreviously: #199, #133\n. ",
    "Flyingmana": "thats possible, but it does not add this snippet to everything, So I assumed its easy to fix on mailcatchers side by adjusting the js/fetching method.\n. providing a patch will not be possible for me, as iam not experienced with ruby applications and how to run them locally.\n\nBut I think I found the causing part of the code here:\nhttps://github.com/sj26/mailcatcher/blob/f80a80ea9c587191b755112bfa9b55a7cf8e4e94/assets/javascripts/mailcatcher.js.coffee#L278\n\nwhat exactly should this replace do?\n\nThe problem occurs, because the plugin already injected the <script> tag when `message_iframe.text()` happens. But text() removes script tags, without removing the content of them.\n\nWhy does the script tag land there at all? because its an iframe, and it injects the script tag on document load I assume.\n\nIt seems for me, as there is in general an odd handling of script tags. Why not remove them fully, or encode them?\nAlso it lets trough other html tags like strong and span, so I would not assume thats meant as a filter.\n. thats possible, but it does not add this snippet to everything, So I assumed its easy to fix on mailcatchers side by adjusting the js/fetching method.\n. providing a patch will not be possible for me, as iam not experienced with ruby applications and how to run them locally.\n\nBut I think I found the causing part of the code here:\nhttps://github.com/sj26/mailcatcher/blob/f80a80ea9c587191b755112bfa9b55a7cf8e4e94/assets/javascripts/mailcatcher.js.coffee#L278\n\nwhat exactly should this replace do?\n\nThe problem occurs, because the plugin already injected the <script> tag when `message_iframe.text()` happens. But text() removes script tags, without removing the content of them.\n\nWhy does the script tag land there at all? because its an iframe, and it injects the script tag on document load I assume.\n\nIt seems for me, as there is in general an odd handling of script tags. Why not remove them fully, or encode them?\nAlso it lets trough other html tags like strong and span, so I would not assume thats meant as a filter.\n. ",
    "zymsys": "I think this is a great idea. I had to change the lines that execute mailcatcher to use $MAILCATCHER_EXEC instead of just MAILCATCHER, and I tweaked the -http-ip to be -ip for both services, and I used my staging server's IP address so open it up to our private network for devs and QA to access. I ran it on Ubuntu 12.04 just fine.\n. I think this is a great idea. I had to change the lines that execute mailcatcher to use $MAILCATCHER_EXEC instead of just MAILCATCHER, and I tweaked the -http-ip to be -ip for both services, and I used my staging server's IP address so open it up to our private network for devs and QA to access. I ran it on Ubuntu 12.04 just fine.\n. ",
    "dooblem": "I had to add PATH for which command to work in init script. (otherwise the init script is working from interactive shell, but not at boot)\n\nComplete script:\n\n```\n#! /bin/sh\n### BEGIN INIT INFO\n# Provides: mailcatcher\n# Required-Start: $remote_fs $syslog\n# Required-Stop: $remote_fs $syslog\n# Default-Start: 2 3 4 5\n# Default-Stop: 0 1 6\n# Short-Description: mailcatcher\n# Description: This file starts and stops mailcatcher daemon\n# \n### END INIT INFO\n\nPATH=/usr/local/bin:/usr/bin:/bin\nMAILCATCHER_EXEC=`which mailcatcher`\n\ncase \"$1\" in\n start)\n   MAILCATCHER --http-ip 0.0.0.0\n   ;;\n stop)\n   killall mailcatcher\n   sleep 5\n   ;;\n restart)\n   killall mailcatcher\n   sleep 5\n   MAILCATCHER --http-ip 0.0.0.0\n   ;;\n *)\n   echo \"Usage: mailcatcher {start|stop|restart}\" >&2\n   exit 3\n   ;;\nesac\n```\n. I had to add PATH for which command to work in init script. (otherwise the init script is working from interactive shell, but not at boot)\n\nComplete script:\n\n```\n#! /bin/sh\n### BEGIN INIT INFO\n# Provides: mailcatcher\n# Required-Start: $remote_fs $syslog\n# Required-Stop: $remote_fs $syslog\n# Default-Start: 2 3 4 5\n# Default-Stop: 0 1 6\n# Short-Description: mailcatcher\n# Description: This file starts and stops mailcatcher daemon\n# \n### END INIT INFO\n\nPATH=/usr/local/bin:/usr/bin:/bin\nMAILCATCHER_EXEC=`which mailcatcher`\n\ncase \"$1\" in\n start)\n   MAILCATCHER --http-ip 0.0.0.0\n   ;;\n stop)\n   killall mailcatcher\n   sleep 5\n   ;;\n restart)\n   killall mailcatcher\n   sleep 5\n   MAILCATCHER --http-ip 0.0.0.0\n   ;;\n *)\n   echo \"Usage: mailcatcher {start|stop|restart}\" >&2\n   exit 3\n   ;;\nesac\n```\n. ",
    "xelaris": ":+1: for wrapping the content in a `pre` tag\n. :+1: for wrapping the content in a `pre` tag\n. ",
    "AaronLasseigne": ":+1: \n. :+1: \n. ",
    "Muffinman": "Yeah I have to restart Mailcatcher every few days after it fills my entire RAM. Great app but slightly annoying!\n. Yeah I have to restart Mailcatcher every few days after it fills my entire RAM. Great app but slightly annoying!\n. ",
    "granbebe": "I have the exact same issue with a little bit more of impacts.\nI use mailcatcher on a test server. I have Apache in front to prevent a free access from anyone.\nAnd mailcatcher consumes RAM every second without me doing anything.\n. I have the exact same issue with a little bit more of impacts.\nI use mailcatcher on a test server. I have Apache in front to prevent a free access from anyone.\nAnd mailcatcher consumes RAM every second without me doing anything.\n. ",
    "DrRoach": "Yep getting the exact same issue here using cent OS\n\nOutput of `top`:\n![screen shot 2015-03-24 at 14 10 10](https://cloud.githubusercontent.com/assets/5173524/6803461/8e0152c2-d22f-11e4-9aba-88a7398b7dc9.png)\n\nProof it's mailcatcher:\n![screen shot 2015-03-24 at 14 11 08](https://cloud.githubusercontent.com/assets/5173524/6803479/acf1f1fa-d22f-11e4-89e6-e53aa60bf395.png)\n. @shakycode Unfortunately I don't know ruby so I can't provide any in code info all I can offer are the images that I posted further up that showed mailcatcher using 42% of a 2GB servers' memory after an hour.\n. Yep getting the exact same issue here using cent OS\n\nOutput of `top`:\n![screen shot 2015-03-24 at 14 10 10](https://cloud.githubusercontent.com/assets/5173524/6803461/8e0152c2-d22f-11e4-9aba-88a7398b7dc9.png)\n\nProof it's mailcatcher:\n![screen shot 2015-03-24 at 14 11 08](https://cloud.githubusercontent.com/assets/5173524/6803479/acf1f1fa-d22f-11e4-89e6-e53aa60bf395.png)\n. @shakycode Unfortunately I don't know ruby so I can't provide any in code info all I can offer are the images that I posted further up that showed mailcatcher using 42% of a 2GB servers' memory after an hour.\n. ",
    "alexbowers-tecmark": "And on ubuntu 14.04\n. And on ubuntu 14.04\n. ",
    "fruit": "+1 (CentOS 6.6), version MailCatcher v0.6.1 (via gem), installed on VirtualBox via [puphpet.com](https://puphpet.com/#mail) site.\nMailCatcher runs with default settings.\n. +1 (CentOS 6.6), version MailCatcher v0.6.1 (via gem), installed on VirtualBox via [puphpet.com](https://puphpet.com/#mail) site.\nMailCatcher runs with default settings.\n. ",
    "alexbowers": "![image](https://cloud.githubusercontent.com/assets/842974/6899757/565fbe42-d6fa-11e4-8d78-770fd6317bbd.png)\n. These are both the same process - One is the parent of the other, but the point is, it is using 48% of my memory.\n. Still getting continually worse; doesn't seem to have an upper limit on the memory it uses (I guess until it crashes?)\n\n![image](https://cloud.githubusercontent.com/assets/842974/6936924/40085cca-d84f-11e4-9e03-477f412f5c33.png)\n. @sj26 Any input on this please? Or maybe guidance as to where the issue may lie so someone can look into it?\n. @sj26 We are running this on a CI machine, and so running all the time is sort of a requirement (though I  guess we could force restart every day or something).\n. 1.9 and 2.1\n. Just leave it in the background unused for about 2 days. I did mine in a vagrant machine.\n. Ah, i never refreshed the page, or sent emails to it. just it running in the background caused it to use a significant part of memory up. Sorry i cant pin it down more than that\nIf you have anything that i can use on my machine to track ruby memory usage or whatever ill install it to help you out, but other than that, im not going to be much help im afraid.\n. At this point, it looks like it wont be fixed.\n\nI'd recommend going to Mailtrap.io, the free version should suit you perfectly for most needs. It does us quite well, and is reasonably easy to setup.\n. ![image](https://cloud.githubusercontent.com/assets/842974/6899757/565fbe42-d6fa-11e4-8d78-770fd6317bbd.png)\n. These are both the same process - One is the parent of the other, but the point is, it is using 48% of my memory.\n. Still getting continually worse; doesn't seem to have an upper limit on the memory it uses (I guess until it crashes?)\n\n![image](https://cloud.githubusercontent.com/assets/842974/6936924/40085cca-d84f-11e4-9e03-477f412f5c33.png)\n. @sj26 Any input on this please? Or maybe guidance as to where the issue may lie so someone can look into it?\n. @sj26 We are running this on a CI machine, and so running all the time is sort of a requirement (though I  guess we could force restart every day or something).\n. 1.9 and 2.1\n. Just leave it in the background unused for about 2 days. I did mine in a vagrant machine.\n. Ah, i never refreshed the page, or sent emails to it. just it running in the background caused it to use a significant part of memory up. Sorry i cant pin it down more than that\nIf you have anything that i can use on my machine to track ruby memory usage or whatever ill install it to help you out, but other than that, im not going to be much help im afraid.\n. At this point, it looks like it wont be fixed.\n\nI'd recommend going to Mailtrap.io, the free version should suit you perfectly for most needs. It does us quite well, and is reasonably easy to setup.\n. ",
    "derekjkeller": ":+1: \n. chronial's right -- pretty easy to reproduce this behavior using that box and those commands.\n. :+1: \n. chronial's right -- pretty easy to reproduce this behavior using that box and those commands.\n. ",
    "jekakm": "@sj26 But many people use it inside docker containers. For example: we have automated system, that runs stagings for our projects inside docker containers. And I have situation when 4 containers fill all memory cause mailcatcher\n. @sj26 But many people use it inside docker containers. For example: we have automated system, that runs stagings for our projects inside docker containers. And I have situation when 4 containers fill all memory cause mailcatcher\n. ",
    "pierre-pretorius": "We use this gem on our QA server with foreman/upstart.  After it runs a few days it uses 2gb+ memory with about 20 mails.  It's actually the most memory consumption I've seen in all Ruby apps I've ran.  I agree it's a development tool, would be pretty awesome as a general tool too though.  For now we will add a cron daily restart.\n. We use this gem on our QA server with foreman/upstart.  After it runs a few days it uses 2gb+ memory with about 20 mails.  It's actually the most memory consumption I've seen in all Ruby apps I've ran.  I agree it's a development tool, would be pretty awesome as a general tool too though.  For now we will add a cron daily restart.\n. ",
    "acutemedical": "Having the same problem in OS X.  Noticed mailcatcher was running for two days with no activity and consumed approximately 2.8GB.  Had to kill it and restart.  Not a huge problem but would be nice if it didn't leak.  \n. Having the same problem in OS X.  Noticed mailcatcher was running for two days with no activity and consumed approximately 2.8GB.  Had to kill it and restart.  Not a huge problem but would be nice if it didn't leak.  \n. ",
    "maccman": "We're seeing a huge memory leak too. I don't think it can be explained away by \"ruby is bad with memory\". \n. We're seeing a huge memory leak too. I don't think it can be explained away by \"ruby is bad with memory\". \n. ",
    "nynhex": "Has anyone been able to provide any useful data for @sj26?  Mailcatcher is causing Ruby to bloat to nearly 3GB if I leave it running.  I'm to the point now where I run a cron job on my macbook to kill and restart it every 12 hours to kill the leak.\n. I'm on 1.9.3 and 2.1.1 and I see the memory leaks too.  I haven't tried installing it against 2.2.2 which has better GC.  But mailcatcher is definitely leaking..\n. Awesome that we're able to see a possible leak finally. \n. This is a change in Ruby 2.4.0.  Install mailcatcher with the latest 2.3.x Ruby version to get rid of the deprecation warnings and/or wait until mailcatcher is compatible with 2.4.0. Has anyone been able to provide any useful data for @sj26?  Mailcatcher is causing Ruby to bloat to nearly 3GB if I leave it running.  I'm to the point now where I run a cron job on my macbook to kill and restart it every 12 hours to kill the leak.\n. I'm on 1.9.3 and 2.1.1 and I see the memory leaks too.  I haven't tried installing it against 2.2.2 which has better GC.  But mailcatcher is definitely leaking..\n. Awesome that we're able to see a possible leak finally. \n. This is a change in Ruby 2.4.0.  Install mailcatcher with the latest 2.3.x Ruby version to get rid of the deprecation warnings and/or wait until mailcatcher is compatible with 2.4.0. ",
    "datamuc": "Hi,\n\n```\n$ mailcatcher --version\nmailcatcher 0.6.1\n$ ruby -v\nruby 2.1.1p76 (2014-02-24 revision 45161) [x86_64-linux]\n```\n\nstill leaking per request.\n. I have played with memory_profiler a bit:\n\nhttps://gist.github.com/datamuc/168e9266044ca3e30f96\n. Hi,\n\n```\n$ mailcatcher --version\nmailcatcher 0.6.1\n$ ruby -v\nruby 2.1.1p76 (2014-02-24 revision 45161) [x86_64-linux]\n```\n\nstill leaking per request.\n. I have played with memory_profiler a bit:\n\nhttps://gist.github.com/datamuc/168e9266044ca3e30f96\n. ",
    "perk11": "Also experiencing this:\n\n```\n$ mailcatcher --version\nmailcatcher 0.6.1\n$ ruby -v\nruby 1.9.3p484 (2013-11-22 revision 43786) [x86_64-linux]\n```\n. ```\n#bundle exec rake assets\n\n[!] There was an error parsing `Gemfile`: undefined method `ruby_version' for Bundler:Module. Bundler cannot continue.\n\n #  from /home/perk11/mailcatcher/Gemfile:6\n #  -------------------------------------------\n #  # mime-types 3+, required by mail, requires ruby 2.0+\n >  gem \"mime-types\", \"< 3\" if Bundler.ruby_version.gem_version < Gem::Version.new(\"2\")\n #  \n #  -------------------------------------------\n```\n. It worked fine when I commented out `gem \"mime-types\", \"< 3\" if Bundler.ruby_version.gem_version < Gem::Version.new(\"2\")` line in Gemfile, but not sure if that's right thing to do.\n. Also experiencing this:\n\n```\n$ mailcatcher --version\nmailcatcher 0.6.1\n$ ruby -v\nruby 1.9.3p484 (2013-11-22 revision 43786) [x86_64-linux]\n```\n. ```\n#bundle exec rake assets\n\n[!] There was an error parsing `Gemfile`: undefined method `ruby_version' for Bundler:Module. Bundler cannot continue.\n\n #  from /home/perk11/mailcatcher/Gemfile:6\n #  -------------------------------------------\n #  # mime-types 3+, required by mail, requires ruby 2.0+\n >  gem \"mime-types\", \"< 3\" if Bundler.ruby_version.gem_version < Gem::Version.new(\"2\")\n #  \n #  -------------------------------------------\n```\n. It worked fine when I commented out `gem \"mime-types\", \"< 3\" if Bundler.ruby_version.gem_version < Gem::Version.new(\"2\")` line in Gemfile, but not sure if that's right thing to do.\n. ",
    "infabo": "Jep.\nWindows 8.1, Ruby 2.2.1 and this leak is HUGE! It filled up my machines whole RAM (16GB of RAM btw) - completely! Windows actually started closing applications just to keep up....until I found out in task manager that ruby.exe just had allocated several GIGS of my RAM.....\n. Jep.\nWindows 8.1, Ruby 2.2.1 and this leak is HUGE! It filled up my machines whole RAM (16GB of RAM btw) - completely! Windows actually started closing applications just to keep up....until I found out in task manager that ruby.exe just had allocated several GIGS of my RAM.....\n. ",
    "jaybeaton": "I'm seeing this on a Mac, as well.  It was using 3GB of memory after several days.\n\n```\n$ mailcatcher --version\nmailcatcher 0.6.1\n$ ruby -v\nruby 2.0.0p481 (2014-05-08 revision 45883) [universal.x86_64-darwin14]\n```\n. I'm seeing this on a Mac, as well.  It was using 3GB of memory after several days.\n\n```\n$ mailcatcher --version\nmailcatcher 0.6.1\n$ ruby -v\nruby 2.0.0p481 (2014-05-08 revision 45883) [universal.x86_64-darwin14]\n```\n. ",
    "SkylerRogers": "Confirmed on mailcatcher version 0.6.1 (running on Ruby version 2.1.2p95 via Mac OS X Yosemite).\n\nBTW - I usually run mailcatcher with the foreground flag like so:\n\n```\n$ mailcatcher -f\n```\n\nNot sure if any of this makes a difference in regards to causation but I know every detail helps when it comes to debugging...\n. Confirmed on mailcatcher version 0.6.1 (running on Ruby version 2.1.2p95 via Mac OS X Yosemite).\n\nBTW - I usually run mailcatcher with the foreground flag like so:\n\n```\n$ mailcatcher -f\n```\n\nNot sure if any of this makes a difference in regards to causation but I know every detail helps when it comes to debugging...\n. ",
    "davidchua": "I'm on 0.6.1 (Ruby 2.2.0 Linuxmint Rebecca) and I've also noticed a high memory usage even though I'm not actively using it.\n\nMailcatcher only have been opened for a couple of days in the background\n\n```\n# smem output\n$ smem -s swap\n27148 davidc   ruby /home/davidc/.rvm/gems     1.7G   355.7M   355.7M   355.9M \n```\n\n```\n# ps grepping\n$ ps auwx | grep 27148\ndavidc   27148  0.0  4.4 2338128 364432 ?      Sl   Oct02   3:35 ruby /home/davidc/.rvm/gems/ruby-2.2.0/bin/mailcatcher   \n```\n. I'm on 0.6.1 (Ruby 2.2.0 Linuxmint Rebecca) and I've also noticed a high memory usage even though I'm not actively using it.\n\nMailcatcher only have been opened for a couple of days in the background\n\n```\n# smem output\n$ smem -s swap\n27148 davidc   ruby /home/davidc/.rvm/gems     1.7G   355.7M   355.7M   355.9M \n```\n\n```\n# ps grepping\n$ ps auwx | grep 27148\ndavidc   27148  0.0  4.4 2338128 364432 ?      Sl   Oct02   3:35 ruby /home/davidc/.rvm/gems/ruby-2.2.0/bin/mailcatcher   \n```\n. ",
    "opensourceame": "It would be a nice gesture to add a warning about this memory problem to the caveats section of the readme. I'm sure I'm not the first person to install this useful tool across a whole lot of development servers only to discover much later that it's killing the machines. It would nice to be forewarned about such a situation.\n\nOf course we wouldn't want to discourage people from using the gem so the warning could be worded something like:\n\n\"In some situations mailcatcher is can consume a lot of memory. We advise you to monitor the process and restart it at regular intervals.\"\n. It would be a nice gesture to add a warning about this memory problem to the caveats section of the readme. I'm sure I'm not the first person to install this useful tool across a whole lot of development servers only to discover much later that it's killing the machines. It would nice to be forewarned about such a situation.\n\nOf course we wouldn't want to discourage people from using the gem so the warning could be worded something like:\n\n\"In some situations mailcatcher is can consume a lot of memory. We advise you to monitor the process and restart it at regular intervals.\"\n. ",
    "Chronial": "@sj26 I'm getting this issue on a fresh vagrant box based on `ubuntu/trusty64`, with just\n\n```\napt-get install -y ruby-dev libsqlite3-dev\ngem install mailcatcher --no-ri --no-rdoc\nmailcatcher --http-ip=0.0.0.0\n```\n. For anybody who needs a solution to this _now_: Have a look at [mailhog](https://github.com/mailhog/MailHog) \u2013 it provides the same functionality. They offer [precompiled releases](https://github.com/mailhog/MailHog/releases) for basically any system.\n\nMailhog does not daemonize itself like mailcatcher. You should start it via init.d/systemd/supervisord. But if you're lazy like me, you can also do `nohup mailhog > /dev/null 2>&1 &`.\n. @sj26 I'm getting this issue on a fresh vagrant box based on `ubuntu/trusty64`, with just\n\n```\napt-get install -y ruby-dev libsqlite3-dev\ngem install mailcatcher --no-ri --no-rdoc\nmailcatcher --http-ip=0.0.0.0\n```\n. For anybody who needs a solution to this _now_: Have a look at [mailhog](https://github.com/mailhog/MailHog) \u2013 it provides the same functionality. They offer [precompiled releases](https://github.com/mailhog/MailHog/releases) for basically any system.\n\nMailhog does not daemonize itself like mailcatcher. You should start it via init.d/systemd/supervisord. But if you're lazy like me, you can also do `nohup mailhog > /dev/null 2>&1 &`.\n. ",
    "Vincent--": "+1\n. +1\n. ",
    "junxy": "Up 42 hours, memory: `789 MB` on docker\n\n``` sh\n# ruby -v\nruby 2.2.3p173 (2015-08-18 revision 51636) [x86_64-linux-gnu]\n```\n. Up 42 hours, memory: `789 MB` on docker\n\n``` sh\n# ruby -v\nruby 2.2.3p173 (2015-08-18 revision 51636) [x86_64-linux-gnu]\n```\n. ",
    "aarnaud": "Up\nUbuntu 14.04\nmailcatcher 0.6.1\nruby 2.1.5p273 (2014-11-13) [x86_64-linux-gnu]\n. Or MailDev  https://github.com/djfarrelly/MailDev\n. Up\nUbuntu 14.04\nmailcatcher 0.6.1\nruby 2.1.5p273 (2014-11-13) [x86_64-linux-gnu]\n. Or MailDev  https://github.com/djfarrelly/MailDev\n. ",
    "jsirex": "Looks like this one doesn't leak:\n\n```\nruby 1.9.3p484 (2013-11-22 revision 43786) [x86_64-linux]\nmailcatcher (0.5.12)\n```\n\nAnd this does:\n\n```\nruby 2.1.6p336 (2015-04-13 revision 50298) [x86_64-linux\nmailcatcher (0.6.1)\n```\n. Looks like this one doesn't leak:\n\n```\nruby 1.9.3p484 (2013-11-22 revision 43786) [x86_64-linux]\nmailcatcher (0.5.12)\n```\n\nAnd this does:\n\n```\nruby 2.1.6p336 (2015-04-13 revision 50298) [x86_64-linux\nmailcatcher (0.6.1)\n```\n. ",
    "tsakamiya": "I've try update  eventmachine to 1.0.8 and it works fine for me.\n. I've try update  eventmachine to 1.0.8 and it works fine for me.\n. ",
    "CloCkWeRX": "https://github.com/eventmachine/eventmachine/pull/586 seems a possible cause\n. #210\n. https://github.com/eventmachine/eventmachine/pull/586 seems a possible cause\n. #210\n. ",
    "bla-kw": "Got it to work in CentOS6 with ruby 1.8.7 with this combination:\n\n```\n$ /usr/bin/gem install --no-rdoc mailcatcher:0.5.12 i18n:0.6.11 eventmachine:1.0.3\n```\n\nHad to go back to 0.5.12 otherwise it always wanted a i18n that is not compatible, eventmachine was needed for the background operation which was fixed in mailcatcher 0.6.1 (Issue #182).\n. I had to put mailcatcher as last argument, otherwise I had to run the command twice, but it works still. I have CentOS6 with:\n\n```\n$ ruby --version\nruby 1.8.7 (2013-06-27 patchlevel 374) [x86_64-linux]\n$ gem --version\n2.4.6\n$ gem uninstall mailcatcher i18n eventmachine\n$ gem install --no-rdoc --no-ri i18n:0.6.11 eventmachine:1.0.3 mailcatcher:0.5.12\nFetching: i18n-0.6.11.gem (100%)\nSuccessfully installed i18n-0.6.11\nFetching: eventmachine-1.0.3.gem (100%)\nBuilding native extensions.  This could take a while...\nSuccessfully installed eventmachine-1.0.3\nFetching: mailcatcher-0.5.12.gem (100%)\nSuccessfully installed mailcatcher-0.5.12\n3 gems installed\n```\n\nDo you have network connection and internet to fetch them?\n. Got it to work in CentOS6 with ruby 1.8.7 with this combination:\n\n```\n$ /usr/bin/gem install --no-rdoc mailcatcher:0.5.12 i18n:0.6.11 eventmachine:1.0.3\n```\n\nHad to go back to 0.5.12 otherwise it always wanted a i18n that is not compatible, eventmachine was needed for the background operation which was fixed in mailcatcher 0.6.1 (Issue #182).\n. I had to put mailcatcher as last argument, otherwise I had to run the command twice, but it works still. I have CentOS6 with:\n\n```\n$ ruby --version\nruby 1.8.7 (2013-06-27 patchlevel 374) [x86_64-linux]\n$ gem --version\n2.4.6\n$ gem uninstall mailcatcher i18n eventmachine\n$ gem install --no-rdoc --no-ri i18n:0.6.11 eventmachine:1.0.3 mailcatcher:0.5.12\nFetching: i18n-0.6.11.gem (100%)\nSuccessfully installed i18n-0.6.11\nFetching: eventmachine-1.0.3.gem (100%)\nBuilding native extensions.  This could take a while...\nSuccessfully installed eventmachine-1.0.3\nFetching: mailcatcher-0.5.12.gem (100%)\nSuccessfully installed mailcatcher-0.5.12\n3 gems installed\n```\n\nDo you have network connection and internet to fetch them?\n. ",
    "gusdecool": "tried your solution and got this:\n\n```\ngem install --no-rdoc mailcatcher:0.5.12 i18n:0.6.11 eventmachine:1.0.3\nERROR:  Could not find a valid gem 'mailcatcher:0.5.12' (>= 0) in any repository\nERROR:  Could not find a valid gem 'i18n:0.6.11' (>= 0) in any repository\nERROR:  Could not find a valid gem 'eventmachine:1.0.3' (>= 0) in any repository\n```\n. yes i do have internet connection.\n\nIn the end, i use RVM with ruby 1.9.x and install mailcatcher 0.6.1.\nNow it's working perfectly.\n. tried your solution and got this:\n\n```\ngem install --no-rdoc mailcatcher:0.5.12 i18n:0.6.11 eventmachine:1.0.3\nERROR:  Could not find a valid gem 'mailcatcher:0.5.12' (>= 0) in any repository\nERROR:  Could not find a valid gem 'i18n:0.6.11' (>= 0) in any repository\nERROR:  Could not find a valid gem 'eventmachine:1.0.3' (>= 0) in any repository\n```\n. yes i do have internet connection.\n\nIn the end, i use RVM with ruby 1.9.x and install mailcatcher 0.6.1.\nNow it's working perfectly.\n. ",
    "mehulkar": "Errr, that's weird, I added `gem mailcatcher` to my Gemfile, and ran `bundle install` and it installed `0.2.4` for me. Which has the old dependency.. \n\nIs that a bundler problem for me locally?\n. Closing this as it's not actually an issue. \n. Touch\u00e9. My fault. Thanks Sam!\n\nOn Wednesday, March 11, 2015, Samuel Cochran notifications@github.com\nwrote:\n\n> https://github.com/sj26/mailcatcher#bundler\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/sj26/mailcatcher/issues/215#issuecomment-78404783.\n\n## \n\n---\n\nMehul Kar\n@mehulkar\n. Errr, that's weird, I added `gem mailcatcher` to my Gemfile, and ran `bundle install` and it installed `0.2.4` for me. Which has the old dependency.. \n\nIs that a bundler problem for me locally?\n. Closing this as it's not actually an issue. \n. Touch\u00e9. My fault. Thanks Sam!\n\nOn Wednesday, March 11, 2015, Samuel Cochran notifications@github.com\nwrote:\n\n> https://github.com/sj26/mailcatcher#bundler\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/sj26/mailcatcher/issues/215#issuecomment-78404783.\n\n## \n\n---\n\nMehul Kar\n@mehulkar\n. ",
    "espen": "Mailcatcher already does this.\n. Sorry, it is already displaying this in favicon - not in title. The favicon works for me in Firefox though.\n. What browser version? Works fine for me. Latest FF on OSX.\n. Mailcatcher already does this.\n. Sorry, it is already displaying this in favicon - not in title. The favicon works for me in Firefox though.\n. What browser version? Works fine for me. Latest FF on OSX.\n. ",
    "h0jeZvgoxFepBQ2C": "I don't know... For me it didn't work in Firefox?\nI added a pull request for this some time ago...\n\nhttps://github.com/sj26/mailcatcher/pull/219\n. Ah, you are right. Didn't see this before, thanks. But I would prefer this number also in the page title, since its easier to read from my point of view.\n. Also for me it looks like that the favicon solution doesn't work properly. I have f.e. 2 Mails in my inbox and the favicon still shows only one....\n\n![bildschirmfoto 2015-04-17 um 13 01 40](https://cloud.githubusercontent.com/assets/10075/7200898/f062a71a-e501-11e4-8767-effd41cb8488.png)\n. Only when I reload the page completely with clearing the cache, the favicon updates again... Normal reload doesn't update the favicon to the correct mail count.\n. I don't know... For me it didn't work in Firefox?\nI added a pull request for this some time ago...\n\nhttps://github.com/sj26/mailcatcher/pull/219\n. Ah, you are right. Didn't see this before, thanks. But I would prefer this number also in the page title, since its easier to read from my point of view.\n. Also for me it looks like that the favicon solution doesn't work properly. I have f.e. 2 Mails in my inbox and the favicon still shows only one....\n\n![bildschirmfoto 2015-04-17 um 13 01 40](https://cloud.githubusercontent.com/assets/10075/7200898/f062a71a-e501-11e4-8767-effd41cb8488.png)\n. Only when I reload the page completely with clearing the cache, the favicon updates again... Normal reload doesn't update the favicon to the correct mail count.\n. ",
    "JamesChevalier": "I apologize, the failure is actually occurring during the `eventmachine` installation. It doesn't seem directly tied to mailcatcher at all. I've tried installing the latest version of that (1.0.7), but it fails in the same manner. I've also got a coworker on Mac OS X 10.10.3 who was able to install mailcatcher just fine, so I'm not expecting there to be anything you'll be able to do here.\n\nThanks for a great tool!\n. OK, I just figured out a fix for my similar issue ... Just in case it's helpful - I had to install `Command Line Tools (OS X 10.10) for Xcode - Xcode 6.2` from the Download for Apple Developers page ... the version for Xcode 6.3 did not work for me.\n. Quick update for anyone who happens across this now...\n\nXcode 6.3.1 was released, which fixes this. Also Command Line Tools 6.3 with a release date of Apr 21, 2015 will fix this.\n. I apologize, the failure is actually occurring during the `eventmachine` installation. It doesn't seem directly tied to mailcatcher at all. I've tried installing the latest version of that (1.0.7), but it fails in the same manner. I've also got a coworker on Mac OS X 10.10.3 who was able to install mailcatcher just fine, so I'm not expecting there to be anything you'll be able to do here.\n\nThanks for a great tool!\n. OK, I just figured out a fix for my similar issue ... Just in case it's helpful - I had to install `Command Line Tools (OS X 10.10) for Xcode - Xcode 6.2` from the Download for Apple Developers page ... the version for Xcode 6.3 did not work for me.\n. Quick update for anyone who happens across this now...\n\nXcode 6.3.1 was released, which fixes this. Also Command Line Tools 6.3 with a release date of Apr 21, 2015 will fix this.\n. ",
    "henrik": "@JamesChevalier Thank you! Got the same error and updating Command Line Tools version 6.3 via App Store (id didn't offer me 6.3.1) fixed it.\n\nThis wasn't with mailcatcher, just unf_ext depended on by another lib, but I got here via Google anyway.\n. @JamesChevalier Thank you! Got the same error and updating Command Line Tools version 6.3 via App Store (id didn't offer me 6.3.1) fixed it.\n\nThis wasn't with mailcatcher, just unf_ext depended on by another lib, but I got here via Google anyway.\n. ",
    "potomak": "@JamesChevalier Thanks.\n. @JamesChevalier Thanks.\n. ",
    "daccle": "+1 It seems like we are seeing the same issue here:\n\n```\nvagrant@vagrant-ubuntu-trusty-32:~$ mailcatcher --foreground --http-ip=0.0.0.0 --smtp-ip=127.0.0.1 --no-quit\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://0.0.0.0:1080\n==> SMTP: Received message from '<noreply@orderbird.com> size=12813' (13174 bytes)\n==> SMTP: Received message from '<noreply@orderbird.com> size=13138' (13502 bytes)\n/var/lib/gems/1.9.1/gems/activesupport-4.2.1/lib/active_support/core_ext/object/json.rb:34:in `encode': \"\\xC3\" from ASCII-8BIT to UTF-8 (Encoding::UndefinedConversionError)\n    from /var/lib/gems/1.9.1/gems/activesupport-4.2.1/lib/active_support/core_ext/object/json.rb:34:in `to_json'\n    from /var/lib/gems/1.9.1/gems/activesupport-4.2.1/lib/active_support/core_ext/object/json.rb:34:in `to_json_with_active_support_encoder'\n    from /var/lib/gems/1.9.1/gems/activesupport-4.2.1/lib/active_support/json/encoding.rb:56:in `to_json'\n    from /var/lib/gems/1.9.1/gems/json-1.8.2/lib/json/common.rb:223:in `generate'\n    from /var/lib/gems/1.9.1/gems/json-1.8.2/lib/json/common.rb:223:in `generate'\n    from /var/lib/gems/1.9.1/gems/activesupport-4.2.1/lib/active_support/json/encoding.rb:96:in `stringify'\n    from /var/lib/gems/1.9.1/gems/activesupport-4.2.1/lib/active_support/json/encoding.rb:34:in `encode'\n    from /var/lib/gems/1.9.1/gems/activesupport-4.2.1/lib/active_support/json/encoding.rb:21:in `encode'\n    from /var/lib/gems/1.9.1/gems/activesupport-4.2.1/lib/active_support/core_ext/object/json.rb:37:in `to_json_with_active_support_encoder'\n    from /var/lib/gems/1.9.1/gems/mailcatcher-0.6.1/lib/mail_catcher/web/application.rb:67:in `block (3 levels) in <class:Application>'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `call'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `block (3 levels) in push'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `each'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `block (2 levels) in push'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `each'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `block in push'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/eventmachine.rb:248:in `call'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/eventmachine.rb:248:in `schedule'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `push'\n    from /var/lib/gems/1.9.1/gems/mailcatcher-0.6.1/lib/mail_catcher/mail.rb:57:in `block in add_message'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/eventmachine.rb:968:in `call'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/eventmachine.rb:968:in `block in run_deferred_callbacks'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/eventmachine.rb:965:in `times'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/eventmachine.rb:965:in `run_deferred_callbacks'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/eventmachine.rb:187:in `run_machine'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/eventmachine.rb:187:in `run'\n    from /var/lib/gems/1.9.1/gems/mailcatcher-0.6.1/lib/mail_catcher.rb:155:in `run!'\n    from /var/lib/gems/1.9.1/gems/mailcatcher-0.6.1/bin/mailcatcher:5:in `<top (required)>'\n    from /usr/local/bin/mailcatcher:23:in `load'\n    from /usr/local/bin/mailcatcher:23:in `<main>'\n```\n. +1 It seems like we are seeing the same issue here:\n\n```\nvagrant@vagrant-ubuntu-trusty-32:~$ mailcatcher --foreground --http-ip=0.0.0.0 --smtp-ip=127.0.0.1 --no-quit\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://0.0.0.0:1080\n==> SMTP: Received message from '<noreply@orderbird.com> size=12813' (13174 bytes)\n==> SMTP: Received message from '<noreply@orderbird.com> size=13138' (13502 bytes)\n/var/lib/gems/1.9.1/gems/activesupport-4.2.1/lib/active_support/core_ext/object/json.rb:34:in `encode': \"\\xC3\" from ASCII-8BIT to UTF-8 (Encoding::UndefinedConversionError)\n    from /var/lib/gems/1.9.1/gems/activesupport-4.2.1/lib/active_support/core_ext/object/json.rb:34:in `to_json'\n    from /var/lib/gems/1.9.1/gems/activesupport-4.2.1/lib/active_support/core_ext/object/json.rb:34:in `to_json_with_active_support_encoder'\n    from /var/lib/gems/1.9.1/gems/activesupport-4.2.1/lib/active_support/json/encoding.rb:56:in `to_json'\n    from /var/lib/gems/1.9.1/gems/json-1.8.2/lib/json/common.rb:223:in `generate'\n    from /var/lib/gems/1.9.1/gems/json-1.8.2/lib/json/common.rb:223:in `generate'\n    from /var/lib/gems/1.9.1/gems/activesupport-4.2.1/lib/active_support/json/encoding.rb:96:in `stringify'\n    from /var/lib/gems/1.9.1/gems/activesupport-4.2.1/lib/active_support/json/encoding.rb:34:in `encode'\n    from /var/lib/gems/1.9.1/gems/activesupport-4.2.1/lib/active_support/json/encoding.rb:21:in `encode'\n    from /var/lib/gems/1.9.1/gems/activesupport-4.2.1/lib/active_support/core_ext/object/json.rb:37:in `to_json_with_active_support_encoder'\n    from /var/lib/gems/1.9.1/gems/mailcatcher-0.6.1/lib/mail_catcher/web/application.rb:67:in `block (3 levels) in <class:Application>'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `call'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `block (3 levels) in push'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `each'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `block (2 levels) in push'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `each'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `block in push'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/eventmachine.rb:248:in `call'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/eventmachine.rb:248:in `schedule'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/em/channel.rb:43:in `push'\n    from /var/lib/gems/1.9.1/gems/mailcatcher-0.6.1/lib/mail_catcher/mail.rb:57:in `block in add_message'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/eventmachine.rb:968:in `call'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/eventmachine.rb:968:in `block in run_deferred_callbacks'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/eventmachine.rb:965:in `times'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/eventmachine.rb:965:in `run_deferred_callbacks'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/eventmachine.rb:187:in `run_machine'\n    from /var/lib/gems/1.9.1/gems/eventmachine-1.0.5/lib/eventmachine.rb:187:in `run'\n    from /var/lib/gems/1.9.1/gems/mailcatcher-0.6.1/lib/mail_catcher.rb:155:in `run!'\n    from /var/lib/gems/1.9.1/gems/mailcatcher-0.6.1/bin/mailcatcher:5:in `<top (required)>'\n    from /usr/local/bin/mailcatcher:23:in `load'\n    from /usr/local/bin/mailcatcher:23:in `<main>'\n```\n. ",
    "smmoosavi": "+1 mailcatcher crash every time receive utf-8 message \n. +1 mailcatcher crash every time receive utf-8 message \n. ",
    "ekho": "+1\n. +1\n. ",
    "das-peter": "Look here form more information: #201\n. Look here form more information: #201\n. ",
    "mgates": "Total PEBCAK, sorry about that.\n. Total PEBCAK, sorry about that.\n. ",
    "Cervajz": ":+1: Totally agree.\n. :+1: Totally agree.\n. ",
    "mslabko": "Confirm this issue for my instance \nUbuntu 14.04.1 LTS, php-fpm 5.6.14\n\nAt the same time from cli it working from beginning. \n. Confirm this issue for my instance \nUbuntu 14.04.1 LTS, php-fpm 5.6.14\n\nAt the same time from cli it working from beginning. \n. ",
    "m1foley": "This is the PR over at the Skinny gem: https://github.com/sj26/skinny/pull/3\n. This is the PR over at the Skinny gem: https://github.com/sj26/skinny/pull/3\n. ",
    "Baklap4": "@sj26 How far is this away from being implemented? We'd love to have this so our containers behind traefic will work nicely again!. @sj26 How far is this away from being implemented? We'd love to have this so our containers behind traefic will work nicely again!. ",
    "andrewnicols": "I've just been hitting the same issue - would be great to see a solution to this if possible!. I just switched to MailHog. Just need the ProxyPass, ProxyReversePass, and a second ProxyPass for the websocket. I've just been hitting the same issue - would be great to see a solution to this if possible!. I just switched to MailHog. Just need the ProxyPass, ProxyReversePass, and a second ProxyPass for the websocket. ",
    "liamjones": "If it's helpful for anyone else; until this is complete I've been working around it with an nginx container in my docker-compose setup that rewrites the responses using the following location config:\r\n\r\n````\r\n\tlocation /mail {\r\n\t\tproxy_pass http://127.0.0.1:40130/;\r\n\t\tproxy_http_version 1.1;\r\n\t\tproxy_set_header Upgrade $http_upgrade;\r\n\t\tproxy_set_header Connection \"upgrade\";\r\n\t\tproxy_read_timeout 1d;\r\n\t\tsub_filter 'src=\"/'     'src=\"/mail/';\r\n\t\tsub_filter 'href=\"/'    'href=\"/mail/';\r\n\t\tsub_filter 'url(/'      'url(/mail/';\r\n\t\tsub_filter '\"/messages' '\"/mail/messages';\r\n\t\tsub_filter_types text/html text/css application/javascript;\r\n\t\tsub_filter_once off;\r\n\t}\r\n````. If it's helpful for anyone else; until this is complete I've been working around it with an nginx container in my docker-compose setup that rewrites the responses using the following location config:\r\n\r\n````\r\n\tlocation /mail {\r\n\t\tproxy_pass http://127.0.0.1:40130/;\r\n\t\tproxy_http_version 1.1;\r\n\t\tproxy_set_header Upgrade $http_upgrade;\r\n\t\tproxy_set_header Connection \"upgrade\";\r\n\t\tproxy_read_timeout 1d;\r\n\t\tsub_filter 'src=\"/'     'src=\"/mail/';\r\n\t\tsub_filter 'href=\"/'    'href=\"/mail/';\r\n\t\tsub_filter 'url(/'      'url(/mail/';\r\n\t\tsub_filter '\"/messages' '\"/mail/messages';\r\n\t\tsub_filter_types text/html text/css application/javascript;\r\n\t\tsub_filter_once off;\r\n\t}\r\n````. ",
    "jgrasl": "Hi @sj26 . Awesome change. One thing seems to be not working for me tough. Every link changed to /mailcatcher except the attachment link for the mail. For me it's still goes to /messages/1/ instead of /mailcatcher/messages/1/.. Hi @sj26 . Awesome change. One thing seems to be not working for me tough. Every link changed to /mailcatcher except the attachment link for the mail. For me it's still goes to /messages/1/ instead of /mailcatcher/messages/1/.. ",
    "MacroMackie": "I also seem to be experiencing similar issues while using DELETE requests:\n\n```\ncurl -XGET http://localhost:1080/messages/1.source\nMIME-Version: 1.0\nDate: 2015-07-29 11:29:06 -0400\nMessage-ID: <63154712.136.1438183747128.JavaMail.root@be80daa0dd10>\nSubject: Default subject line.\n```\n\n```\ncurl -XDELETE http://localhost:1080/messages/1\nSQLite3::RangeException: bind or column index out of range\n    /var/lib/gems/1.9.1/gems/sqlite3-1.3.10/lib/sqlite3/statement.rb:41:in `bind_param'\n    /var/lib/gems/1.9.1/gems/sqlite3-1.3.10/lib/sqlite3/statement.rb:41:in `block in bind_params'\n    /var/lib/gems/1.9.1/gems/sqlite3-1.3.10/lib/sqlite3/statement.rb:37:in `each'\n    /var/lib/gems/1.9.1/gems/sqlite3-1.3.10/lib/sqlite3/statement.rb:37:in `bind_params'\n    /var/lib/gems/1.9.1/gems/sqlite3-1.3.10/lib/sqlite3/statement.rb:64:in `execute'\n    /var/lib/gems/1.9.1/gems/mailcatcher-0.5.12/lib/mail_catcher/mail.rb:157:in `delete_message!'\n    /var/lib/gems/1.9.1/gems/mailcatcher-0.5.12/lib/mail_catcher/web.rb:138:in `block in <class:Web>'\n    ...                                             \n```\n\nI am currently running mailcatcher in a docker container, which may be related to this issue? It seems strange the get requests are fine for specific messages, but the delete requests are not.\n\nThis is the method that is failing:\n\n``` ruby\ndelete \"/messages/:id\" do\n  id = params[:id].to_i\n  if message = Mail.message(id)\n    Mail.delete_message!(id)\n    status 204\n  else\n    not_found\n  end\nend\n```\n. Looks like this was related to the issue:\n\n``` ruby\ndef delete!\n    @delete_messages_query ||= db.prepare \"DELETE FROM message\"\n    @delete_message_parts_query ||= db.prepare \"DELETE FROM message_part\"\n\n    @delete_messages_query.execute and\n    @delete_message_parts_query.execute\n  end\n```\n\n``` ruby\n  def delete_message!(message_id)\n    @delete_messages_query ||= db.prepare \"DELETE FROM message WHERE id = ?\"\n    @delete_message_parts_query ||= db.prepare \"DELETE FROM message_part WHERE message_id = ?\"\n    @delete_messages_query.execute(message_id) and\n    @delete_message_parts_query.execute(message_id)\n```\n\n`@delete_messages_query` and `@delete_message_parts_query` are shared across both delete! and delete_message!, which may have been what was causing the `SQLite3::RangeException: bind or column index out of range`\n\nSwitching the former to `@delete_all_messages_query` and `@delete_all_message_parts_query` seems to have fixed the issue for me.\n\nI'll continue testing and see if the old issue still occurs.\n. I also seem to be experiencing similar issues while using DELETE requests:\n\n```\ncurl -XGET http://localhost:1080/messages/1.source\nMIME-Version: 1.0\nDate: 2015-07-29 11:29:06 -0400\nMessage-ID: <63154712.136.1438183747128.JavaMail.root@be80daa0dd10>\nSubject: Default subject line.\n```\n\n```\ncurl -XDELETE http://localhost:1080/messages/1\nSQLite3::RangeException: bind or column index out of range\n    /var/lib/gems/1.9.1/gems/sqlite3-1.3.10/lib/sqlite3/statement.rb:41:in `bind_param'\n    /var/lib/gems/1.9.1/gems/sqlite3-1.3.10/lib/sqlite3/statement.rb:41:in `block in bind_params'\n    /var/lib/gems/1.9.1/gems/sqlite3-1.3.10/lib/sqlite3/statement.rb:37:in `each'\n    /var/lib/gems/1.9.1/gems/sqlite3-1.3.10/lib/sqlite3/statement.rb:37:in `bind_params'\n    /var/lib/gems/1.9.1/gems/sqlite3-1.3.10/lib/sqlite3/statement.rb:64:in `execute'\n    /var/lib/gems/1.9.1/gems/mailcatcher-0.5.12/lib/mail_catcher/mail.rb:157:in `delete_message!'\n    /var/lib/gems/1.9.1/gems/mailcatcher-0.5.12/lib/mail_catcher/web.rb:138:in `block in <class:Web>'\n    ...                                             \n```\n\nI am currently running mailcatcher in a docker container, which may be related to this issue? It seems strange the get requests are fine for specific messages, but the delete requests are not.\n\nThis is the method that is failing:\n\n``` ruby\ndelete \"/messages/:id\" do\n  id = params[:id].to_i\n  if message = Mail.message(id)\n    Mail.delete_message!(id)\n    status 204\n  else\n    not_found\n  end\nend\n```\n. Looks like this was related to the issue:\n\n``` ruby\ndef delete!\n    @delete_messages_query ||= db.prepare \"DELETE FROM message\"\n    @delete_message_parts_query ||= db.prepare \"DELETE FROM message_part\"\n\n    @delete_messages_query.execute and\n    @delete_message_parts_query.execute\n  end\n```\n\n``` ruby\n  def delete_message!(message_id)\n    @delete_messages_query ||= db.prepare \"DELETE FROM message WHERE id = ?\"\n    @delete_message_parts_query ||= db.prepare \"DELETE FROM message_part WHERE message_id = ?\"\n    @delete_messages_query.execute(message_id) and\n    @delete_message_parts_query.execute(message_id)\n```\n\n`@delete_messages_query` and `@delete_message_parts_query` are shared across both delete! and delete_message!, which may have been what was causing the `SQLite3::RangeException: bind or column index out of range`\n\nSwitching the former to `@delete_all_messages_query` and `@delete_all_message_parts_query` seems to have fixed the issue for me.\n\nI'll continue testing and see if the old issue still occurs.\n. ",
    "alexrussell": "I don't know if I have updated mailcatcher and it's now working, but I can now delete singly or a batch 'purge' from the UI. As such, I'm closing this issue.\n. (Just checked - I haven't updated, still 0.6.1. Weird!)\n. You know what, I now have this issue again. As such, I'll reopen but obviously we're very much needing a reproducible test case here. How can I have the problem, it goes away, and then it comes back?\n. I get it on and off. Sometimes both deletion actions work, sometimes delete single is the only command that works (whereas clear all doesn't) and sometimes the other way around. But it feels like this is relatively impossible to work out, so I dunno how helpful I can be.\n. I don't know if I have updated mailcatcher and it's now working, but I can now delete singly or a batch 'purge' from the UI. As such, I'm closing this issue.\n. (Just checked - I haven't updated, still 0.6.1. Weird!)\n. You know what, I now have this issue again. As such, I'll reopen but obviously we're very much needing a reproducible test case here. How can I have the problem, it goes away, and then it comes back?\n. I get it on and off. Sometimes both deletion actions work, sometimes delete single is the only command that works (whereas clear all doesn't) and sometimes the other way around. But it feels like this is relatively impossible to work out, so I dunno how helpful I can be.\n. ",
    "timothyasp": "I'm still having this problem, where making a request to delete a single message fails with a 500.\n. I've forked it and am working on a fix.\n. I'm still having this problem, where making a request to delete a single message fails with a 500.\n. I've forked it and am working on a fix.\n. ",
    "duduribeiro": "@alexrussell still with the problem? I tested on master and on v0.6.1 (0179a92) and worked fine for me =/\n\nThanks\n. @alexrussell still with the problem? I tested on master and on v0.6.1 (0179a92) and worked fine for me =/\n\nThanks\n. ",
    "everblut": "Something like this?\n\n![example](https://cloud.githubusercontent.com/assets/1256959/19711687/17f1c704-9afd-11e6-9478-789055b5ebdb.png)\n. Hey @taiar the assets thing it's solved with the `rake assets` task.\n\nIt works great.\n. Something like this?\n\n![example](https://cloud.githubusercontent.com/assets/1256959/19711687/17f1c704-9afd-11e6-9478-789055b5ebdb.png)\n. Hey @taiar the assets thing it's solved with the `rake assets` task.\n\nIt works great.\n. ",
    "onshop": "It was a long time ago so I don't quite recall the circumstances but I wasn't aware that my browser had JS disabled so something more explicit provided by the UI would be great.\n. It was a long time ago so I don't quite recall the circumstances but I wasn't aware that my browser had JS disabled so something more explicit provided by the UI would be great.\n. ",
    "bogdanRada": "nevermind. Seems my version was outdated. \n. nevermind. Seems my version was outdated. \n. ",
    "iammote": "I'm already test it\ncreat php file and run.  \n\n<?php $headers = 'From: webmaster@example.com'; mail('nobody@example.com', 'Test email using PHP', 'This is a test email message', $headers, '-fwebmaster@example.com'); ?>\n. I'm already test it\ncreat php file and run.  \n\n<?php $headers = 'From: webmaster@example.com'; mail('nobody@example.com', 'Test email using PHP', 'This is a test email message', $headers, '-fwebmaster@example.com'); ?>\n. ",
    "bezin": "Same for me. According to some sources, this is due to an incompatability of sqlite and newer Ruby versions. As far as I oversee things, there is no fix available yet except compiling sqlite yourself.\n\nhttps://github.com/sparklemotion/sqlite3-ruby/issues/150\nhttps://www.ruby-forum.com/topic/6874307\n. Same for me. According to some sources, this is due to an incompatability of sqlite and newer Ruby versions. As far as I oversee things, there is no fix available yet except compiling sqlite yourself.\n\nhttps://github.com/sparklemotion/sqlite3-ruby/issues/150\nhttps://www.ruby-forum.com/topic/6874307\n. ",
    "salmanasiddiqui": "@sj26 Thanks.\n. @sj26 Thanks.\n. ",
    "buehmann": "I tested this in Firefox and also Chrome if I remember correctly. Cannot say anything about other browsers.\n. I tested this in Firefox and also Chrome if I remember correctly. Cannot say anything about other browsers.\n. ",
    "brichards": "I'm experiencing the same thing and am also on OS X 11.11. Prior to upgrading (just this last week) Mailcatcher worked perfectly well.\n. Related: #246 \n. I'm experiencing the same thing and am also on OS X 11.11. Prior to upgrading (just this last week) Mailcatcher worked perfectly well.\n. Related: #246 \n. ",
    "soniCaH": "\u250c\u2500[kevin.vanransbeeck]\n\u2514\u2500\u25aa which catchmail\n/Users/kevin.vanransbeeck/.rvm/rubies/ruby-2.2.1/bin/catchmail\n\nSet this as my sendmail_path, no luck there. Also tried /usr/local/bin/catchmail but same result.\n\n(can't re-open)\n. I tried about every instruction there + on google one by one :)\n. \u250c\u2500[kevin.vanransbeeck]\n\u2514\u2500\u25aa which catchmail\n/Users/kevin.vanransbeeck/.rvm/rubies/ruby-2.2.1/bin/catchmail\n\nSet this as my sendmail_path, no luck there. Also tried /usr/local/bin/catchmail but same result.\n\n(can't re-open)\n. I tried about every instruction there + on google one by one :)\n. ",
    "chickenland": "I've just installed mailcatcher and I'm getting this issue too.  I've set the following in PHP.ini\r\n\r\nsendmail_path = /Users/douglasradburn/.rvm/rubies/ruby-2.4.0/bin/catchmail -f some@from.address\r\n\r\nI can send email perfectly fine at CLI (returns TRUE), but it returns FALSE when run in a browser.  Any further suggestions here?. I've just installed mailcatcher and I'm getting this issue too.  I've set the following in PHP.ini\r\n\r\nsendmail_path = /Users/douglasradburn/.rvm/rubies/ruby-2.4.0/bin/catchmail -f some@from.address\r\n\r\nI can send email perfectly fine at CLI (returns TRUE), but it returns FALSE when run in a browser.  Any further suggestions here?. ",
    "sanddevil": "Googling brought me here. I had the same issue but editing my /etc/php/5.6/fpm/php.ini file to this got me working: \r\n`sendmail_path = /usr/local/bin/catchmail -f noreply@mydomain.com`. Googling brought me here. I had the same issue but editing my /etc/php/5.6/fpm/php.ini file to this got me working: \r\n`sendmail_path = /usr/local/bin/catchmail -f noreply@mydomain.com`. ",
    "equinoxmatt": "I am also having this issue.  Any ideas? The above doesn't work for me, my path is: /usr/local/rvm/gems/ruby-2.3.1/bin/catchmail -f noreply@mydomain.com. Fixed this by using the wrapper, found via SO:\r\n\r\nhttps://stackoverflow.com/questions/24741681/mailcatcher-php-mail-function-returns-false\r\n\r\nsendmail_path = /usr/local/rvm/wrappers/default/catchmail. I am also having this issue.  Any ideas? The above doesn't work for me, my path is: /usr/local/rvm/gems/ruby-2.3.1/bin/catchmail -f noreply@mydomain.com. Fixed this by using the wrapper, found via SO:\r\n\r\nhttps://stackoverflow.com/questions/24741681/mailcatcher-php-mail-function-returns-false\r\n\r\nsendmail_path = /usr/local/rvm/wrappers/default/catchmail. ",
    "sharfaz": "@equinoxmatt \r\n\r\nThanks for the answer. After googling and fixing so many hours this works for me.. @equinoxmatt \r\n\r\nThanks for the answer. After googling and fixing so many hours this works for me.. ",
    "diffractometer": "`gem install eventmachine -v '1.0.5' -- --with-cppflags=-I/usr/local/opt/openssl/include` fixes the issue.\n. `gem install eventmachine -v '1.0.5' -- --with-cppflags=-I/usr/local/opt/openssl/include` fixes the issue.\n. ",
    "tymat": "@diffractometer no it doesn't.\n. @diffractometer no it doesn't.\n. ",
    "emilepetrone": "@sj26  that solved it for me. Thanks!\n. @sj26  that solved it for me. Thanks!\n. ",
    "dariuszmaciejewski": ":+1: \n. :+1: \n. ",
    "JessHyde": "Thanks a lot, this was driving me crazy!\n. Thanks a lot, this was driving me crazy!\n. ",
    "abashirnz": "Thanks for this man \ud83d\udc4d \ud83d\udc4d \n. Thanks for this man \ud83d\udc4d \ud83d\udc4d \n. ",
    "fr-olivier": "Thank you so much, just spent an hour wondering wtf it doesn't work...\n. Thank you so much, just spent an hour wondering wtf it doesn't work...\n. ",
    "robertkent": "this is the answer - perfect thanks!. this is the answer - perfect thanks!. ",
    "awortham": "Has anyone else been having this issue? Potentially could be an El Capitan issue?\n. Has anyone else been having this issue? Potentially could be an El Capitan issue?\n. ",
    "afomi": "I'm seeing this very recently as well. \n\nUsing `ruby 2.2.3p173`.\n\n### Update:\n\nI was able to resolve this issue, and it was due to my configuration, not due to `Mailcatcher`.\n1. In `development.rb`, I specified `config.action_mailer.raise_delivery_errors = true` so I could see what was going on. Turns out this error was occuring `mailcatcher Net::SMTPFatalError (550 Unauthenticated senders not allowed`.\n2. In my `environment.rb` I was also calling XXXXX::Application.initialize! before setting `smtp_settings`, which caused the `Unauthenticated` error above. Initializing after setting `smtp_settings` took care of the issue and Mailcatcher started catching emails again.\n. I'm seeing this very recently as well. \n\nUsing `ruby 2.2.3p173`.\n\n### Update:\n\nI was able to resolve this issue, and it was due to my configuration, not due to `Mailcatcher`.\n1. In `development.rb`, I specified `config.action_mailer.raise_delivery_errors = true` so I could see what was going on. Turns out this error was occuring `mailcatcher Net::SMTPFatalError (550 Unauthenticated senders not allowed`.\n2. In my `environment.rb` I was also calling XXXXX::Application.initialize! before setting `smtp_settings`, which caused the `Unauthenticated` error above. Initializing after setting `smtp_settings` took care of the issue and Mailcatcher started catching emails again.\n. ",
    "rvola": "thanks\n. thanks\n. ",
    "connorshea": "Running `brew link openssl --force` fixed the problem for me, not sure if it has any unintended consequences for others though.\n. Running `brew link openssl --force` fixed the problem for me, not sure if it has any unintended consequences for others though.\n. ",
    "murraybiscuit": "Understood. I'm not a Ruby guy, I'll see what I can do.\n. Understood. I'm not a Ruby guy, I'll see what I can do.\n. ",
    "amenzhinsky": "https://github.com/sj26/mailcatcher/issues/223\n. That's bad, it would be nice feture to have :smile: \n. https://github.com/sj26/mailcatcher/issues/223\n. That's bad, it would be nice feture to have :smile: \n. ",
    "febeling": "@sj26 I had to remove the Gemfile.lock after updating bundler; looks like the [bundler bug](bundler/bundler#3559) was also tripping up other open PRs for mailcatcher on Travis. Not sure what the story is about the .lock file being version-controlled, I think general rule is gems don't bring it along, but that might be different for command line tools? Tell me if any other change is needed before you see mergability.\n. @sj26 I had to remove the Gemfile.lock after updating bundler; looks like the [bundler bug](bundler/bundler#3559) was also tripping up other open PRs for mailcatcher on Travis. Not sure what the story is about the .lock file being version-controlled, I think general rule is gems don't bring it along, but that might be different for command line tools? Tell me if any other change is needed before you see mergability.\n. ",
    "ACPK": "@sj26 - If it doesn't support Rails, why are there instructions on using it with Rails?\n. @sj26 - If it doesn't support Rails, why are there instructions on using it with Rails?\n. ",
    "wadestuart": "Hi sj26,  wanted to say thank you for all the work you have put into mailcatcher it is a lifesaver.  Sorry to reopen this up but I am in a situation where I am starting to migrate an app to rails 5 in prep for the release and to enable some actioncable functionality.   I understand your point for not supporting rails dependencies directly but I have to point out that the mailcatcher dependencies have either master or releases that have been updated to deconflict with rails 5 versions and mailcatcher's dependencies are locked t versions that enforce conflicts. \n\nLong story short,  when working on migrating to rails 5 (which happens in development and where mailcatcher is useful) mailcatcher has locked dependency versions that conflict with the versions of gems that are required for rails 5.   For instance there is a newer version of sinatra that resolves rack version dependency issues but mailcatcher still is forcing an older version of sinatra.\n\nIt would be nice if the many people working to migrate to rails 5 along with the release could continue to rely on mailcatcher during the rework of their codebase.  Without updating the hard locks on gems the only solutions are really to either personal fork and force versioning or remove the gem and find a different solution for catching mail in dev.\n\nJust looking for a way to allow this gem to continue working for me while on this migration. Let me know if this makes sense. \n. Hi sj26,  wanted to say thank you for all the work you have put into mailcatcher it is a lifesaver.  Sorry to reopen this up but I am in a situation where I am starting to migrate an app to rails 5 in prep for the release and to enable some actioncable functionality.   I understand your point for not supporting rails dependencies directly but I have to point out that the mailcatcher dependencies have either master or releases that have been updated to deconflict with rails 5 versions and mailcatcher's dependencies are locked t versions that enforce conflicts. \n\nLong story short,  when working on migrating to rails 5 (which happens in development and where mailcatcher is useful) mailcatcher has locked dependency versions that conflict with the versions of gems that are required for rails 5.   For instance there is a newer version of sinatra that resolves rack version dependency issues but mailcatcher still is forcing an older version of sinatra.\n\nIt would be nice if the many people working to migrate to rails 5 along with the release could continue to rely on mailcatcher during the rework of their codebase.  Without updating the hard locks on gems the only solutions are really to either personal fork and force versioning or remove the gem and find a different solution for catching mail in dev.\n\nJust looking for a way to allow this gem to continue working for me while on this migration. Let me know if this makes sense. \n. ",
    "aymericbouzy": "Does anyone have a suggestion on where to put it instead ? When someone new joins the team, I would like to be able to simply tell them \"git clone, bundle install, and you're ready to go!\". Having to add this step breaks this process ...\r\n\r\nAlso, it happened that I had to reinstall my ruby version, loosing all my gems in the process. Remembering all the gems that I had installed without a Gemfile was painful, and I promised myself to always include them in a Gemfile from now on.\r\n\r\nThanks for sharing the tips you may have on this matter!. Thanks ! I added the following lines : \r\n```ruby\r\nputs \"\\n== Installing MailCatcher ==\"\r\nsystem! 'gem install mailcatcher'\r\n```. Does anyone have a suggestion on where to put it instead ? When someone new joins the team, I would like to be able to simply tell them \"git clone, bundle install, and you're ready to go!\". Having to add this step breaks this process ...\r\n\r\nAlso, it happened that I had to reinstall my ruby version, loosing all my gems in the process. Remembering all the gems that I had installed without a Gemfile was painful, and I promised myself to always include them in a Gemfile from now on.\r\n\r\nThanks for sharing the tips you may have on this matter!. Thanks ! I added the following lines : \r\n```ruby\r\nputs \"\\n== Installing MailCatcher ==\"\r\nsystem! 'gem install mailcatcher'\r\n```. ",
    "oelmekki": "Same for me, mailcatcher stopped working from gem, even after updating it \nand making sure to have sinatra installed and up to date.\n\nRunning mailcatcher from latest master (to date) indeed works, provided \nit is executed within bundler:\n\n```\n$ git clone https://github.com/sj26/mailcatcher.git\n$ cd mailcatcher\n$ bundle\n$ bundle exec ./bin/mailcatcher -f\n```\n\nEDIT: but then, it fails to load js and css. Same when checking out \nv0.6.2. No solution, sorry :)\n. Same for me, mailcatcher stopped working from gem, even after updating it \nand making sure to have sinatra installed and up to date.\n\nRunning mailcatcher from latest master (to date) indeed works, provided \nit is executed within bundler:\n\n```\n$ git clone https://github.com/sj26/mailcatcher.git\n$ cd mailcatcher\n$ bundle\n$ bundle exec ./bin/mailcatcher -f\n```\n\nEDIT: but then, it fails to load js and css. Same when checking out \nv0.6.2. No solution, sorry :)\n. ",
    "liquid1982": "@sj26 it worked! thank you so much!\n. @sj26 it worked! thank you so much!\n. ",
    "NullVoxPopuli": "I'me having this problem. how do I fix it?\n\n```\n$ gem install mailcatcher -v 0.6.4\nFetching: mailcatcher-0.6.4.gem (100%)\nSuccessfully installed mailcatcher-0.6.4\nParsing documentation for mailcatcher-0.6.4\nInstalling ri documentation for mailcatcher-0.6.4\nDone installing documentation for mailcatcher after 0 seconds\n1 gem installed\n$ mailcatcher\n/home/me/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:2158:in `method_missing': undefined method `this' for #<Gem::Specification:0x10d180c mailcatcher-0.6.4> (NoMethodError)\n```\n\nhere is my rvm info:\n\n```\n\n$ rvm info\n\nruby-2.3.0@aeonvera:\n\n  system:\n    uname:       \"Linux Orithyia 4.0.0-040000-generic #201504121935 SMP Sun Apr 12 23:36:33 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\"\n    system:      \"ubuntu/15.04/x86_64\"\n    bash:        \"/bin/bash => GNU bash, version 4.3.30(1)-release (x86_64-pc-linux-gnu)\"\n    zsh:         \" => not installed\"\n\n  rvm:\n    version:      \"rvm 1.26.9 (latest) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]\"\n    updated:      \"1 year 2 months 2 days 9 hours 30 minutes 50 seconds ago\"\n    path:         \"/home/me/.rvm\"\n\n  ruby:\n    interpreter:  \"ruby\"\n    version:      \"2.3.0p0\"\n    date:         \"2015-12-25\"\n    platform:     \"x86_64-linux\"\n    patchlevel:   \"2015-12-25 revision 53290\"\n    full_version: \"ruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-linux]\"\n\n  homes:\n    gem:          \"/home/me/.rvm/gems/ruby-2.3.0@aeonvera\"\n    ruby:         \"/home/me/.rvm/rubies/ruby-2.3.0\"\n\n  binaries:\n    ruby:         \"/home/me/.rvm/rubies/ruby-2.3.0/bin/ruby\"\n    irb:          \"/home/me/.rvm/rubies/ruby-2.3.0/bin/irb\"\n    gem:          \"/home/me/.rvm/rubies/ruby-2.3.0/bin/gem\"\n    rake:         \"/home/me/.rvm/gems/ruby-2.3.0@aeonvera/bin/rake\"\n\n  environment:\n    PATH:         \"/home/me/.rvm/gems/ruby-2.3.0@aeonvera/bin:/home/me/.rvm/gems/ruby-2.3.0@global/bin:/home/me/.rvm/rubies/ruby-2.3.0/bin:/home/me/.rvm/bin:/home/me/.nvm/versions/node/v4.3.1/bin:/usr/lib/ccache:/usr/local/heroku/bin:/home/me/apps/phantomjs/bin:/home/me/scripts/system-utils:/home/me/scripts/rails:/home/me/scripts:/usr/lib/ccache:/usr/local/heroku/bin:/home/me/apps/phantomjs/bin:/home/me/scripts/system-utils:/home/me/scripts/rails:/home/me/scripts:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/home/me/Development/ardupilot/Tools/autotest:/usr/local/lib/python2.7/dist-packages/MAVProxy:/usr/local/lib/python2.7/dist-packages/pymavlink/examples:/home/me/Development/jsbsim/src:/home/me/Development/ardupilot/Tools/autotest:/usr/local/lib/python2.7/dist-packages/MAVProxy:/usr/local/lib/python2.7/dist-packages/pymavlink/examples:/home/me/Development/jsbsim/src\"\n    GEM_HOME:     \"/home/me/.rvm/gems/ruby-2.3.0@aeonvera\"\n    GEM_PATH:     \"/home/me/.rvm/gems/ruby-2.3.0@aeonvera:/home/me/.rvm/gems/ruby-2.3.0@global\"\n    MY_RUBY_HOME: \"/home/me/.rvm/rubies/ruby-2.3.0\"\n    IRBRC:        \"/home/me/.rvm/rubies/ruby-2.3.0/.irbrc\"\n    RUBYOPT:      \"\"\n    gemset:       \"aeonvera\"\n\n\n```\n. why does this seem to only happen with mailcatcher, and no other gem?\n. I'me having this problem. how do I fix it?\n\n```\n$ gem install mailcatcher -v 0.6.4\nFetching: mailcatcher-0.6.4.gem (100%)\nSuccessfully installed mailcatcher-0.6.4\nParsing documentation for mailcatcher-0.6.4\nInstalling ri documentation for mailcatcher-0.6.4\nDone installing documentation for mailcatcher after 0 seconds\n1 gem installed\n$ mailcatcher\n/home/me/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:2158:in `method_missing': undefined method `this' for #<Gem::Specification:0x10d180c mailcatcher-0.6.4> (NoMethodError)\n```\n\nhere is my rvm info:\n\n```\n\n$ rvm info\n\nruby-2.3.0@aeonvera:\n\n  system:\n    uname:       \"Linux Orithyia 4.0.0-040000-generic #201504121935 SMP Sun Apr 12 23:36:33 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\"\n    system:      \"ubuntu/15.04/x86_64\"\n    bash:        \"/bin/bash => GNU bash, version 4.3.30(1)-release (x86_64-pc-linux-gnu)\"\n    zsh:         \" => not installed\"\n\n  rvm:\n    version:      \"rvm 1.26.9 (latest) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]\"\n    updated:      \"1 year 2 months 2 days 9 hours 30 minutes 50 seconds ago\"\n    path:         \"/home/me/.rvm\"\n\n  ruby:\n    interpreter:  \"ruby\"\n    version:      \"2.3.0p0\"\n    date:         \"2015-12-25\"\n    platform:     \"x86_64-linux\"\n    patchlevel:   \"2015-12-25 revision 53290\"\n    full_version: \"ruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-linux]\"\n\n  homes:\n    gem:          \"/home/me/.rvm/gems/ruby-2.3.0@aeonvera\"\n    ruby:         \"/home/me/.rvm/rubies/ruby-2.3.0\"\n\n  binaries:\n    ruby:         \"/home/me/.rvm/rubies/ruby-2.3.0/bin/ruby\"\n    irb:          \"/home/me/.rvm/rubies/ruby-2.3.0/bin/irb\"\n    gem:          \"/home/me/.rvm/rubies/ruby-2.3.0/bin/gem\"\n    rake:         \"/home/me/.rvm/gems/ruby-2.3.0@aeonvera/bin/rake\"\n\n  environment:\n    PATH:         \"/home/me/.rvm/gems/ruby-2.3.0@aeonvera/bin:/home/me/.rvm/gems/ruby-2.3.0@global/bin:/home/me/.rvm/rubies/ruby-2.3.0/bin:/home/me/.rvm/bin:/home/me/.nvm/versions/node/v4.3.1/bin:/usr/lib/ccache:/usr/local/heroku/bin:/home/me/apps/phantomjs/bin:/home/me/scripts/system-utils:/home/me/scripts/rails:/home/me/scripts:/usr/lib/ccache:/usr/local/heroku/bin:/home/me/apps/phantomjs/bin:/home/me/scripts/system-utils:/home/me/scripts/rails:/home/me/scripts:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/home/me/Development/ardupilot/Tools/autotest:/usr/local/lib/python2.7/dist-packages/MAVProxy:/usr/local/lib/python2.7/dist-packages/pymavlink/examples:/home/me/Development/jsbsim/src:/home/me/Development/ardupilot/Tools/autotest:/usr/local/lib/python2.7/dist-packages/MAVProxy:/usr/local/lib/python2.7/dist-packages/pymavlink/examples:/home/me/Development/jsbsim/src\"\n    GEM_HOME:     \"/home/me/.rvm/gems/ruby-2.3.0@aeonvera\"\n    GEM_PATH:     \"/home/me/.rvm/gems/ruby-2.3.0@aeonvera:/home/me/.rvm/gems/ruby-2.3.0@global\"\n    MY_RUBY_HOME: \"/home/me/.rvm/rubies/ruby-2.3.0\"\n    IRBRC:        \"/home/me/.rvm/rubies/ruby-2.3.0/.irbrc\"\n    RUBYOPT:      \"\"\n    gemset:       \"aeonvera\"\n\n\n```\n. why does this seem to only happen with mailcatcher, and no other gem?\n. ",
    "camfindlay": "+1\n. +1\n. ",
    "stephaneerard": "Hello, main goal to me is ease of use for developers.\n\nI have published a mailcatcher gem suffixed with -CORS.\nThank you !\n. Hello, main goal to me is ease of use for developers.\n\nI have published a mailcatcher gem suffixed with -CORS.\nThank you !\n. ",
    "tuomasj": "Found out about this identical idea right after submitting this #309 \n\n(It has a mockup screenshot)\n. Duplicate of #266, closing\n. Found out about this identical idea right after submitting this #309 \n\n(It has a mockup screenshot)\n. Duplicate of #266, closing\n. ",
    "wassimk": "I'm having the same issue. Any tips are appreciated. Mine doesn't actually mention ActiveSupport if that makes a difference:\n\n``` bash\nvagrant@vagrant-ubuntu-trusty-64:/vagrant$ mailcatcher --ip 0.0.0.0\n/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:2158:in `method_missing': undefined method `this' for #<Gem::Specification:0xbed4f8 mailcatcher-0.6.1> (NoMethodError)\n```\n. Hi @sj26 , thanks for working on this. I've got v0.6.4 installed and getting this still:\n\n``` bash\nvagrant@vagrant-ubuntu-trusty-64:/vagrant$ mailcatcher\n\n/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:2158:in `method_missing': undefined method `this' for #<Gem::Specification:0xcaf724 mailcatcher-0.6.4> (NoMethodError)\n    from /usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:1057:in `find_active_stub_by_path'\n    from /usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:64:in `require'\n    from /usr/local/rvm/gems/ruby-2.3.0@unique/gems/mailcatcher-0.6.4/bin/mailcatcher:3:in `<top (required)>'\n    from /usr/local/rvm/gems/ruby-2.3.0@unique/bin/mailcatcher:23:in `load'\n    from /usr/local/rvm/gems/ruby-2.3.0@unique/bin/mailcatcher:23:in `<main>'\n    from /usr/local/rvm/gems/ruby-2.3.0@unique/bin/ruby_executable_hooks:15:in `eval'\n    from /usr/local/rvm/gems/ruby-2.3.0@unique/bin/ruby_executable_hooks:15:in `<main>'\n```\n. @kendrikat can you help me understand? What is different in your old gemset allowing it work?\n. @cameronstanley , that worked for me even when rebuilding the Vagrant VM didn't work. Thanks!\n. I'm having the same issue. Any tips are appreciated. Mine doesn't actually mention ActiveSupport if that makes a difference:\n\n``` bash\nvagrant@vagrant-ubuntu-trusty-64:/vagrant$ mailcatcher --ip 0.0.0.0\n/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:2158:in `method_missing': undefined method `this' for #<Gem::Specification:0xbed4f8 mailcatcher-0.6.1> (NoMethodError)\n```\n. Hi @sj26 , thanks for working on this. I've got v0.6.4 installed and getting this still:\n\n``` bash\nvagrant@vagrant-ubuntu-trusty-64:/vagrant$ mailcatcher\n\n/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:2158:in `method_missing': undefined method `this' for #<Gem::Specification:0xcaf724 mailcatcher-0.6.4> (NoMethodError)\n    from /usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:1057:in `find_active_stub_by_path'\n    from /usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:64:in `require'\n    from /usr/local/rvm/gems/ruby-2.3.0@unique/gems/mailcatcher-0.6.4/bin/mailcatcher:3:in `<top (required)>'\n    from /usr/local/rvm/gems/ruby-2.3.0@unique/bin/mailcatcher:23:in `load'\n    from /usr/local/rvm/gems/ruby-2.3.0@unique/bin/mailcatcher:23:in `<main>'\n    from /usr/local/rvm/gems/ruby-2.3.0@unique/bin/ruby_executable_hooks:15:in `eval'\n    from /usr/local/rvm/gems/ruby-2.3.0@unique/bin/ruby_executable_hooks:15:in `<main>'\n```\n. @kendrikat can you help me understand? What is different in your old gemset allowing it work?\n. @cameronstanley , that worked for me even when rebuilding the Vagrant VM didn't work. Thanks!\n. ",
    "kendrikat": "Same Issue here after `bundle update` ... So workaround for me is using a different (i.e. the old) gemset - Create a separate directory with `.ruby-gemset` and `.ruby-version` and install/launch it there. \n. Same Issue here after `bundle update` ... So workaround for me is using a different (i.e. the old) gemset - Create a separate directory with `.ruby-gemset` and `.ruby-version` and install/launch it there. \n. ",
    "bengolden": "> $ gem environment\n> RubyGems Environment:\n> - RUBYGEMS VERSION: 2.5.1\n\n---\n\n> $ gem install mailcatcher\n> Successfully installed mailcatcher-0.6.4\n\n---\n\n> $ mailcatcher\n> /Users/bengolden/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:2158:in `method_missing': undefined method`this' for #<Gem::Specification:0x3fec7981888c mailcatcher-0.6.4> (NoMethodError)\n>     from /Users/bengolden/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:1057:in `find_active_stub_by_path'\n>     from /Users/bengolden/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:64:in`require'\n>     from /Users/bengolden/.rvm/gems/ruby-2.3.0/gems/mailcatcher-0.6.4/bin/mailcatcher:3:in `<top (required)>'\n>     from /Users/bengolden/.rvm/gems/ruby-2.3.0/bin/mailcatcher:23:in`load'\n>     from /Users/bengolden/.rvm/gems/ruby-2.3.0/bin/mailcatcher:23:in `<main>'\n>     from /Users/bengolden/.rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in`eval'\n>     from /Users/bengolden/.rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `<main>'\n. > $ gem environment\n> RubyGems Environment:\n> - RUBYGEMS VERSION: 2.5.1\n\n---\n\n> $ gem install mailcatcher\n> Successfully installed mailcatcher-0.6.4\n\n---\n\n> $ mailcatcher\n> /Users/bengolden/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:2158:in `method_missing': undefined method`this' for #<Gem::Specification:0x3fec7981888c mailcatcher-0.6.4> (NoMethodError)\n>     from /Users/bengolden/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:1057:in `find_active_stub_by_path'\n>     from /Users/bengolden/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:64:in`require'\n>     from /Users/bengolden/.rvm/gems/ruby-2.3.0/gems/mailcatcher-0.6.4/bin/mailcatcher:3:in `<top (required)>'\n>     from /Users/bengolden/.rvm/gems/ruby-2.3.0/bin/mailcatcher:23:in`load'\n>     from /Users/bengolden/.rvm/gems/ruby-2.3.0/bin/mailcatcher:23:in `<main>'\n>     from /Users/bengolden/.rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in`eval'\n>     from /Users/bengolden/.rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `<main>'\n. ",
    "HelenFanZhang": "RubyGems Environment:\n- RUBYGEMS VERSION: 2.5.2\n- RUBY VERSION: 2.2.2 (2015-04-13 patchlevel 95) [x86_64-darwin14]\n\nRubyGems Environment:\n- RUBYGEMS VERSION: 2.5.1\n- RUBY VERSION: 2.2.3 (2015-08-18 patchlevel 173) [x86_64-darwin14]\n\nBoth are not working for me =(\n. RubyGems Environment:\n- RUBYGEMS VERSION: 2.5.2\n- RUBY VERSION: 2.2.2 (2015-04-13 patchlevel 95) [x86_64-darwin14]\n\nRubyGems Environment:\n- RUBYGEMS VERSION: 2.5.1\n- RUBY VERSION: 2.2.3 (2015-08-18 patchlevel 173) [x86_64-darwin14]\n\nBoth are not working for me =(\n. ",
    "jslag": "same / similar bug here:\n\n```\n$ mailcatcher\n/Users/joe/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:2158:in `method_missing': undefined method `this' for #<Gem::Specification:0x3fec1208eac4 mailcatcher-0.6.4> (NoMethodError)\n    from /Users/joe/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:1057:in `find_active_stub_by_path'\n    from /Users/joe/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:64:in `require'\n    from /Users/joe/.rvm/gems/ruby-2.3.0@giftticket/gems/mailcatcher-0.6.4/bin/mailcatcher:3:in `<top (required)>'\n    from /Users/joe/.rvm/gems/ruby-2.3.0@giftticket/bin/mailcatcher:23:in `load'\n    from /Users/joe/.rvm/gems/ruby-2.3.0@giftticket/bin/mailcatcher:23:in `<main>'\n    from /Users/joe/.rvm/gems/ruby-2.3.0@giftticket/bin/ruby_executable_hooks:15:in `eval'\n    from /Users/joe/.rvm/gems/ruby-2.3.0@giftticket/bin/ruby_executable_hooks:15:in `<main>'\n\n$ gem --version\n2.5.1\n\n```\n. same / similar bug here:\n\n```\n$ mailcatcher\n/Users/joe/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:2158:in `method_missing': undefined method `this' for #<Gem::Specification:0x3fec1208eac4 mailcatcher-0.6.4> (NoMethodError)\n    from /Users/joe/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:1057:in `find_active_stub_by_path'\n    from /Users/joe/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:64:in `require'\n    from /Users/joe/.rvm/gems/ruby-2.3.0@giftticket/gems/mailcatcher-0.6.4/bin/mailcatcher:3:in `<top (required)>'\n    from /Users/joe/.rvm/gems/ruby-2.3.0@giftticket/bin/mailcatcher:23:in `load'\n    from /Users/joe/.rvm/gems/ruby-2.3.0@giftticket/bin/mailcatcher:23:in `<main>'\n    from /Users/joe/.rvm/gems/ruby-2.3.0@giftticket/bin/ruby_executable_hooks:15:in `eval'\n    from /Users/joe/.rvm/gems/ruby-2.3.0@giftticket/bin/ruby_executable_hooks:15:in `<main>'\n\n$ gem --version\n2.5.1\n\n```\n. ",
    "jnamkung": "I get these same errors when I try to run mailcatcher from my Rails root. Runs ok if I call the direct path to mailcatcher AND I run it from my home directory:\n\n```\nju@Dullhead:~$ which mailcatcher\n/Users/ju/.rvm/gems/ruby-2.3.0@tasks/bin/mailcatcher\nju@Dullhead:~$ pwd\n/Users/ju\nju@Dullhead:~$ /Users/ju/.rvm/gems/ruby-2.3.0@tasks/bin/mailcatcher\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://127.0.0.1:1080\n*** MailCatcher runs as a daemon by default. Go to the web interface to quit.\n```\n. I get these same errors when I try to run mailcatcher from my Rails root. Runs ok if I call the direct path to mailcatcher AND I run it from my home directory:\n\n```\nju@Dullhead:~$ which mailcatcher\n/Users/ju/.rvm/gems/ruby-2.3.0@tasks/bin/mailcatcher\nju@Dullhead:~$ pwd\n/Users/ju\nju@Dullhead:~$ /Users/ju/.rvm/gems/ruby-2.3.0@tasks/bin/mailcatcher\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://127.0.0.1:1080\n*** MailCatcher runs as a daemon by default. Go to the web interface to quit.\n```\n. ",
    "cameronstanley": "I ran in to this error when trying to run use the travis gem. Running `gem pristine --all` fixed it for me.\n. I ran in to this error when trying to run use the travis gem. Running `gem pristine --all` fixed it for me.\n. ",
    "godzilla74": "@jnamkung , that worked for me.  My specs match @bengolden \n. @jnamkung , that worked for me.  My specs match @bengolden \n. ",
    "KonstantinReido": "RubyGems Environment:\n- RUBYGEMS VERSION: 2.5.2\n- RUBY VERSION: 2.3.0 (2015-12-25 patchlevel 0) [x86_64-darwin15]\n\n:(\n. RubyGems Environment:\n- RUBYGEMS VERSION: 2.5.2\n- RUBY VERSION: 2.3.0 (2015-12-25 patchlevel 0) [x86_64-darwin15]\n\n:(\n. ",
    "p12y": "I'm getting this error too, cameronstanley's fix didn't work for me.\n. I'm getting this error too, cameronstanley's fix didn't work for me.\n. ",
    "GuillaumeLegendre": "Let me know if anything else could help you.\n\u2717 ruby -v\nruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-darwin15]\n\n\u2717 rvm -v\nrvm 1.26.11 (latest) by Wayne E. Seguin wayneeseguin@gmail.com, Michal Papis mpapis@gmail.com [https://rvm.io/]\n\n\u2717 gem list\n\n**\\* LOCAL GEMS ***\n\naasm (4.7.0)\nactionmailer (4.2.5)\nactionpack (4.2.5)\nactionview (4.2.5)\nactivejob (4.2.5)\nactivemodel (4.2.5)\nactiverecord (4.2.5)\nactivesupport (4.2.5)\nacts_as_list (0.7.2)\naddressable (2.4.0)\narel (6.0.3)\nautoprefixer-rails (6.3.1)\nbcrypt (3.1.10)\nbigdecimal (1.2.8)\nbinding_of_caller (0.7.2)\nbootstrap-multiselect-rails (0.9.9)\nbootstrap-sass (3.3.4.1)\nbuilder (3.2.2)\nbundle (0.0.1)\nbundler (1.11.2)\nbundler-unload (1.0.2)\nbyebug (8.2.1)\ncancancan (1.13.1)\ncapistrano (2.15.7)\ncapybara (2.6.0)\nclimate_control (0.0.3)\ncocaine (0.5.8)\ncoffee-rails (4.1.1)\ncoffee-script (2.4.1)\ncoffee-script-source (1.10.0)\nconcurrent-ruby (1.0.0)\ndaemons (1.2.3)\ndatabase_cleaner (1.5.1)\ndebug_inspector (0.0.2)\ndelayed_job (4.1.1)\ndelayed_job_active_record (4.1.0)\ndevise (3.4.1)\ndid_you_mean (1.0.0)\ndiff-lcs (1.2.5)\nemail_spec (2.0.0)\nerubis (2.7.0)\neventmachine (1.0.9.1)\nexception_notification (4.1.4)\nexecjs (2.6.0)\nexecutable-hooks (1.3.2)\nfactory_girl (4.5.0)\nfactory_girl_rails (4.5.0)\ngem-wrappers (1.2.7)\nglobalid (0.3.6)\nhighline (1.7.8)\nhtmlentities (4.3.4)\nhttparty (0.13.7)\ni18n (0.7.0)\nio-console (0.4.5)\njbuilder (2.4.0)\njquery-rails (4.1.0)\njson (1.8.3)\nlaunchy (2.4.3)\nloofah (2.0.3)\nmail (2.6.3)\nmailcatcher (0.6.4)\nmime-types (2.99)\nmini_portile2 (2.0.0)\nminitest (5.8.4, 5.8.3)\nmulti_json (1.11.2)\nmulti_xml (0.5.5)\nnet-scp (1.2.1)\nnet-sftp (2.1.2)\nnet-ssh (3.0.2)\nnet-ssh-gateway (1.2.0)\nnet-telnet (0.1.1)\nnokogiri (1.6.7.2)\norm_adapter (0.5.0)\npaperclip (4.2.4)\npg (0.18.4)\npower_assert (0.2.6)\npsych (2.0.17)\nrack (1.6.4)\nrack-protection (1.5.3)\nrack-test (0.6.3)\nrails (4.2.5)\nrails-deprecated_sanitizer (1.0.3)\nrails-dom-testing (1.0.7)\nrails-html-sanitizer (1.0.2)\nrailties (4.2.5)\nrake (10.5.0, 10.4.2)\nrdoc (4.2.1)\nresponders (2.1.1)\nroo (2.0.1)\nrspec-core (3.4.1)\nrspec-expectations (3.4.0)\nrspec-mocks (3.4.1)\nrspec-rails (3.4.0)\nrspec-support (3.4.1)\nrubygems-bundler (1.4.4)\nrubyzip (1.1.7)\nrvm (1.11.3.9)\nrvm-capistrano (1.5.6)\nsass (3.4.21)\nsass-rails (5.0.4)\nsdoc (0.4.1)\nsinatra (1.4.7)\nskinny (0.2.4)\nslim (3.0.6)\nspring (1.6.2)\nsprockets (3.5.2)\nsprockets-rails (3.0.0)\nsqlite3 (1.3.11)\ntemping (3.3.0)\ntemple (0.7.6)\ntest-unit (3.1.5)\nthin (1.5.1)\nthor (0.19.1)\nthread_safe (0.3.5)\ntilt (2.0.2)\nturbolinks (2.5.3)\ntzinfo (1.2.2)\nuglifier (2.7.2)\nwarden (1.2.4)\nweb-console (2.2.1)\nwill_paginate (3.0.7)\nwill_paginate-bootstrap (1.0.1)\nwrite_xlsx (0.83.0)\nxpath (2.0.0)\nzip-zip (0.3)\n\n\u2717 gem environment\nRubyGems Environment:\n- RUBYGEMS VERSION: 2.5.1\n- RUBY VERSION: 2.3.0 (2015-12-25 patchlevel 0) [x86_64-darwin15]\n- INSTALLATION DIRECTORY: /Users/guillaumelegendre/.rvm/gems/ruby-2.3.0@investissement_pierre\n- USER INSTALLATION DIRECTORY: /Users/guillaumelegendre/.gem/ruby/2.3.0\n- RUBY EXECUTABLE: /Users/guillaumelegendre/.rvm/rubies/ruby-2.3.0/bin/ruby\n- EXECUTABLE DIRECTORY: /Users/guillaumelegendre/.rvm/gems/ruby-2.3.0@investissement_pierre/bin\n- SPEC CACHE DIRECTORY: /Users/guillaumelegendre/.gem/specs\n- SYSTEM CONFIGURATION DIRECTORY: /Users/guillaumelegendre/.rvm/rubies/ruby-2.3.0/etc\n- RUBYGEMS PLATFORMS:\n  - ruby\n  - x86_64-darwin-15\n- GEM PATHS:\n  - /Users/guillaumelegendre/.rvm/gems/ruby-2.3.0@investissement_pierre\n  - /Users/guillaumelegendre/.rvm/gems/ruby-2.3.0@global\n- GEM CONFIGURATION:\n  - :update_sources => true\n  - :verbose => true\n  - :backtrace => false\n  - :bulk_threshold => 1000\n  - \"gem\" => \"--no-document\"\n- REMOTE SOURCES:\n  - https://rubygems.org/\n- SHELL PATH:\n  - /Users/guillaumelegendre/.rvm/gems/ruby-2.3.0@investissement_pierre/bin\n  - /Users/guillaumelegendre/.rvm/gems/ruby-2.3.0@global/bin\n  - /Users/guillaumelegendre/.rvm/rubies/ruby-2.3.0/bin\n  - /Users/guillaumelegendre/.rvm/bin\n  - /usr/local/bin\n  - /usr/bin\n  - /bin\n  - /usr/sbin\n  - /sbin\n. No I didn't and i'm not on my personnal computer so I don't want to mess around with the config. But it works in other gemsets. I used them currently to use mailcatcher. So the version of ruby changes and the gem list change but rvm is the same.\n. Let me know if anything else could help you.\n\u2717 ruby -v\nruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-darwin15]\n\n\u2717 rvm -v\nrvm 1.26.11 (latest) by Wayne E. Seguin wayneeseguin@gmail.com, Michal Papis mpapis@gmail.com [https://rvm.io/]\n\n\u2717 gem list\n\n**\\* LOCAL GEMS ***\n\naasm (4.7.0)\nactionmailer (4.2.5)\nactionpack (4.2.5)\nactionview (4.2.5)\nactivejob (4.2.5)\nactivemodel (4.2.5)\nactiverecord (4.2.5)\nactivesupport (4.2.5)\nacts_as_list (0.7.2)\naddressable (2.4.0)\narel (6.0.3)\nautoprefixer-rails (6.3.1)\nbcrypt (3.1.10)\nbigdecimal (1.2.8)\nbinding_of_caller (0.7.2)\nbootstrap-multiselect-rails (0.9.9)\nbootstrap-sass (3.3.4.1)\nbuilder (3.2.2)\nbundle (0.0.1)\nbundler (1.11.2)\nbundler-unload (1.0.2)\nbyebug (8.2.1)\ncancancan (1.13.1)\ncapistrano (2.15.7)\ncapybara (2.6.0)\nclimate_control (0.0.3)\ncocaine (0.5.8)\ncoffee-rails (4.1.1)\ncoffee-script (2.4.1)\ncoffee-script-source (1.10.0)\nconcurrent-ruby (1.0.0)\ndaemons (1.2.3)\ndatabase_cleaner (1.5.1)\ndebug_inspector (0.0.2)\ndelayed_job (4.1.1)\ndelayed_job_active_record (4.1.0)\ndevise (3.4.1)\ndid_you_mean (1.0.0)\ndiff-lcs (1.2.5)\nemail_spec (2.0.0)\nerubis (2.7.0)\neventmachine (1.0.9.1)\nexception_notification (4.1.4)\nexecjs (2.6.0)\nexecutable-hooks (1.3.2)\nfactory_girl (4.5.0)\nfactory_girl_rails (4.5.0)\ngem-wrappers (1.2.7)\nglobalid (0.3.6)\nhighline (1.7.8)\nhtmlentities (4.3.4)\nhttparty (0.13.7)\ni18n (0.7.0)\nio-console (0.4.5)\njbuilder (2.4.0)\njquery-rails (4.1.0)\njson (1.8.3)\nlaunchy (2.4.3)\nloofah (2.0.3)\nmail (2.6.3)\nmailcatcher (0.6.4)\nmime-types (2.99)\nmini_portile2 (2.0.0)\nminitest (5.8.4, 5.8.3)\nmulti_json (1.11.2)\nmulti_xml (0.5.5)\nnet-scp (1.2.1)\nnet-sftp (2.1.2)\nnet-ssh (3.0.2)\nnet-ssh-gateway (1.2.0)\nnet-telnet (0.1.1)\nnokogiri (1.6.7.2)\norm_adapter (0.5.0)\npaperclip (4.2.4)\npg (0.18.4)\npower_assert (0.2.6)\npsych (2.0.17)\nrack (1.6.4)\nrack-protection (1.5.3)\nrack-test (0.6.3)\nrails (4.2.5)\nrails-deprecated_sanitizer (1.0.3)\nrails-dom-testing (1.0.7)\nrails-html-sanitizer (1.0.2)\nrailties (4.2.5)\nrake (10.5.0, 10.4.2)\nrdoc (4.2.1)\nresponders (2.1.1)\nroo (2.0.1)\nrspec-core (3.4.1)\nrspec-expectations (3.4.0)\nrspec-mocks (3.4.1)\nrspec-rails (3.4.0)\nrspec-support (3.4.1)\nrubygems-bundler (1.4.4)\nrubyzip (1.1.7)\nrvm (1.11.3.9)\nrvm-capistrano (1.5.6)\nsass (3.4.21)\nsass-rails (5.0.4)\nsdoc (0.4.1)\nsinatra (1.4.7)\nskinny (0.2.4)\nslim (3.0.6)\nspring (1.6.2)\nsprockets (3.5.2)\nsprockets-rails (3.0.0)\nsqlite3 (1.3.11)\ntemping (3.3.0)\ntemple (0.7.6)\ntest-unit (3.1.5)\nthin (1.5.1)\nthor (0.19.1)\nthread_safe (0.3.5)\ntilt (2.0.2)\nturbolinks (2.5.3)\ntzinfo (1.2.2)\nuglifier (2.7.2)\nwarden (1.2.4)\nweb-console (2.2.1)\nwill_paginate (3.0.7)\nwill_paginate-bootstrap (1.0.1)\nwrite_xlsx (0.83.0)\nxpath (2.0.0)\nzip-zip (0.3)\n\n\u2717 gem environment\nRubyGems Environment:\n- RUBYGEMS VERSION: 2.5.1\n- RUBY VERSION: 2.3.0 (2015-12-25 patchlevel 0) [x86_64-darwin15]\n- INSTALLATION DIRECTORY: /Users/guillaumelegendre/.rvm/gems/ruby-2.3.0@investissement_pierre\n- USER INSTALLATION DIRECTORY: /Users/guillaumelegendre/.gem/ruby/2.3.0\n- RUBY EXECUTABLE: /Users/guillaumelegendre/.rvm/rubies/ruby-2.3.0/bin/ruby\n- EXECUTABLE DIRECTORY: /Users/guillaumelegendre/.rvm/gems/ruby-2.3.0@investissement_pierre/bin\n- SPEC CACHE DIRECTORY: /Users/guillaumelegendre/.gem/specs\n- SYSTEM CONFIGURATION DIRECTORY: /Users/guillaumelegendre/.rvm/rubies/ruby-2.3.0/etc\n- RUBYGEMS PLATFORMS:\n  - ruby\n  - x86_64-darwin-15\n- GEM PATHS:\n  - /Users/guillaumelegendre/.rvm/gems/ruby-2.3.0@investissement_pierre\n  - /Users/guillaumelegendre/.rvm/gems/ruby-2.3.0@global\n- GEM CONFIGURATION:\n  - :update_sources => true\n  - :verbose => true\n  - :backtrace => false\n  - :bulk_threshold => 1000\n  - \"gem\" => \"--no-document\"\n- REMOTE SOURCES:\n  - https://rubygems.org/\n- SHELL PATH:\n  - /Users/guillaumelegendre/.rvm/gems/ruby-2.3.0@investissement_pierre/bin\n  - /Users/guillaumelegendre/.rvm/gems/ruby-2.3.0@global/bin\n  - /Users/guillaumelegendre/.rvm/rubies/ruby-2.3.0/bin\n  - /Users/guillaumelegendre/.rvm/bin\n  - /usr/local/bin\n  - /usr/bin\n  - /bin\n  - /usr/sbin\n  - /sbin\n. No I didn't and i'm not on my personnal computer so I don't want to mess around with the config. But it works in other gemsets. I used them currently to use mailcatcher. So the version of ruby changes and the gem list change but rvm is the same.\n. ",
    "crwhitesides": "@cameronstanley, that worked for me. Thanks!\n. @cameronstanley, that worked for me. Thanks!\n. ",
    "NielsKSchjoedt": "+1 not working for me neither\n. +1 not working for me neither\n. ",
    "charazn": "This worked for me.\n$ gem uninstall mailcatcher (from your local gemset)\n\nAs per the instructions on mailcatcher.me, run the following two lines:\n$ rvm default@mailcatcher --create do gem install mailcatcher\n$ rvm wrapper default@mailcatcher --no-prefix mailcatcher catchmail \n\n$ mailcatcher\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://127.0.0.1:1080\n**\\* MailCatcher runs as a daemon by default. Go to the web interface to quit.\n. This worked for me.\n$ gem uninstall mailcatcher (from your local gemset)\n\nAs per the instructions on mailcatcher.me, run the following two lines:\n$ rvm default@mailcatcher --create do gem install mailcatcher\n$ rvm wrapper default@mailcatcher --no-prefix mailcatcher catchmail \n\n$ mailcatcher\nStarting MailCatcher\n==> smtp://127.0.0.1:1025\n==> http://127.0.0.1:1080\n**\\* MailCatcher runs as a daemon by default. Go to the web interface to quit.\n. ",
    "jaydorsey": "For reference, this issue appears related: https://github.com/rubygems/rubygems/issues/1420\n\nThere are a few other possible solutions noted\n. For reference, this issue appears related: https://github.com/rubygems/rubygems/issues/1420\n\nThere are a few other possible solutions noted\n. ",
    "adambair": "@charazn - thanks, worked great for me -- most appreciated.\n. @charazn - thanks, worked great for me -- most appreciated.\n. ",
    "pjc": "I had the same issue and fixed it by re-installing mailcatcher in the way @charazn describes above.\n\nFor reference my issue started after upgrading bundler.\n. I had the same issue and fixed it by re-installing mailcatcher in the way @charazn describes above.\n\nFor reference my issue started after upgrading bundler.\n. ",
    "amitdotagarwal": "It's a bug in rubygems, may be below listed help you.\n1) Open file  rubygems/specification.rb\n     /Users/amitagarwal/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb\n2) add method \n `def this; self; end`\nin the end of file \n3) rvm reload \n4) restart your application \n. It's a bug in rubygems, may be below listed help you.\n1) Open file  rubygems/specification.rb\n     /Users/amitagarwal/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb\n2) add method \n `def this; self; end`\nin the end of file \n3) rvm reload \n4) restart your application \n. ",
    "rnickmccandless": "I was able to fix this error by upgrading rubygems to the latest version\n\n```\ngem update --system\n```\n. I was able to fix this error by upgrading rubygems to the latest version\n\n```\ngem update --system\n```\n. ",
    "Sohair63": "@rnmccandless  isn't this will effect the other apps in the system\n. @rnmccandless  isn't this will effect the other apps in the system\n. ",
    "andrewhavens": "I guess there's also http://electron.atom.io/ for creating cross-platform apps (using Node.js). Might be a better option, even though I prefer RubyMotion.\n. I guess there's also http://electron.atom.io/ for creating cross-platform apps (using Node.js). Might be a better option, even though I prefer RubyMotion.\n. ",
    "vreemt": "If it's a webview wrapper you want, I've heard good things about https://github.com/jiahaog/nativefier (this is electron based and works like this `nativefier maps.google.com`, you need Node.js installed)\n. If it's a webview wrapper you want, I've heard good things about https://github.com/jiahaog/nativefier (this is electron based and works like this `nativefier maps.google.com`, you need Node.js installed)\n. ",
    "amenophis": "This is my use case,\nI just want to know if a known mail gots new mail.\n\nIf i can filter by recipient, i can easily count the result.\nFor the moment, i need to iterate over each messages and put in a list for each recipient, and then count the a specific recipient. Not really friendly ...\n\nDo you see the use case ?\n. So, i did like this in groovy, and the solution is OK ;)\n\nThanks !\n. This is my use case,\nI just want to know if a known mail gots new mail.\n\nIf i can filter by recipient, i can easily count the result.\nFor the moment, i need to iterate over each messages and put in a list for each recipient, and then count the a specific recipient. Not really friendly ...\n\nDo you see the use case ?\n. So, i did like this in groovy, and the solution is OK ;)\n\nThanks !\n. ",
    "bunam": "i'm on the same trouble, CentOS 5 two\n. i'm on the same trouble, CentOS 5 two\n. ",
    "malford": "Yes we are having the same issue here. Very unfortunate as I don't see us moving to Ruby 2.0 to be able to support Mailcatcher. :confused: \n. Yes we are having the same issue here. Very unfortunate as I don't see us moving to Ruby 2.0 to be able to support Mailcatcher. :confused: \n. ",
    "matejvelikonja": "I'm also experiencing the same issue. Hope it's fixed soon.\n. I'm also experiencing the same issue. Hope it's fixed soon.\n. ",
    "wujku": "+1\n. +1\n. ",
    "jeeftor": "+1\n. +1\n. ",
    "rogamoore": "There should be a link in the docs to this issue or a quick summary of the workaround. :)\n. There should be a link in the docs to this issue or a quick summary of the workaround. :)\n. ",
    "mhagenbruch": "Hey there... its a little bit ot but...\nI followed sj26's instruction and mailcatcher works. But the 127.0.0.1:1080 is not reachable.\nI have all this in Vagrant and in my vagrantfile i have the port_forwarding. But ERR_EMPTY_RESPONSE appears in browser.\n. Hey, if fixed it. it was the startgin from mailcatcher hat to start it with the ip 0.0.0.0\n. Hey there... its a little bit ot but...\nI followed sj26's instruction and mailcatcher works. But the 127.0.0.1:1080 is not reachable.\nI have all this in Vagrant and in my vagrantfile i have the port_forwarding. But ERR_EMPTY_RESPONSE appears in browser.\n. Hey, if fixed it. it was the startgin from mailcatcher hat to start it with the ip 0.0.0.0\n. ",
    "bascht": "@mhagenbruch So \u2013 it does work from inside the VM but not via the Vagrant Port Forwarding?\n. @mhagenbruch So \u2013 it does work from inside the VM but not via the Vagrant Port Forwarding?\n. ",
    "loren-osborn": "@bryantebeek, is there a way to do this within [your chef recipe](https://github.com/bryantebeek/chef-mailcatcher)? What would this look like? (Sorry, I'm new to chef.)\n. @bryantebeek, is there a way to do this within [your chef recipe](https://github.com/bryantebeek/chef-mailcatcher)? What would this look like? (Sorry, I'm new to chef.)\n. ",
    "whitehat101": "I ran into this, and fixed it. https://github.com/whitehat101/mailcatcher-ruby19\r\n\r\nInstead of `gem install mailcatcher` try `gem install mailcatcher-ruby19`.\r\n\r\nIt literally is a no code gem, that simply depends on `mailcatcher` and a version of mime-types that will install on 1.9.\r\n\r\n```ruby\r\n  spec.add_dependency \"mime-types\", \"<3\"\r\n  spec.add_dependency \"mailcatcher\", \"~>0\"\r\n```\r\n\r\nThis gem, `mailcatcher-ruby19`, also installs without issue on Ruby 2.3. . You're imagining hypothetical future bugs, and citing that as a reason for not fixing real bugs that exist today.\r\n\r\nI really don't see this as a flaw of RubyGems, I see a gemspec that isn't specific enough, and fails to install on an allegedly supported version of Ruby.\r\n\r\n[Way back in 2011](https://github.com/sj26/mailcatcher/commit/08ab0c5f695689b794a6a74a07990ba272bcabff), you put this in the gemspec:\r\n\r\n```ruby\r\n  s.add_dependency \"mail\", \"~> 2.3\"\r\n```\r\n\r\nIf instead, you had put:\r\n\r\n```ruby\r\n  s.add_dependency \"mail\", \"~> 2.3.0\"\r\n```\r\n\r\nThen this bug would have **never existed**!\r\n\r\nMail 2.3.3 works fine in mailcatcher today. If you would like to take advantage of features in more recent versions of mail, then you should depend on that version.\r\n\r\nYou say having a loose version constraint \"might solve other issues and bugs,\" but really the opposite is true. Having tight version constraints prevents issues and bugs by limiting the dependencies to known good versions. \r\n\r\nIf you look at #277, you can see a couple dozen +1s, and I couldn't even count the number of times this was mentioned in other GitHub issues linking back to #277. You made a large number of people waste time developing a workaround, while blaming RubyGems architecture, when the real solution is to be specific about your dependencies.. I ran into this, and fixed it. https://github.com/whitehat101/mailcatcher-ruby19\r\n\r\nInstead of `gem install mailcatcher` try `gem install mailcatcher-ruby19`.\r\n\r\nIt literally is a no code gem, that simply depends on `mailcatcher` and a version of mime-types that will install on 1.9.\r\n\r\n```ruby\r\n  spec.add_dependency \"mime-types\", \"<3\"\r\n  spec.add_dependency \"mailcatcher\", \"~>0\"\r\n```\r\n\r\nThis gem, `mailcatcher-ruby19`, also installs without issue on Ruby 2.3. . You're imagining hypothetical future bugs, and citing that as a reason for not fixing real bugs that exist today.\r\n\r\nI really don't see this as a flaw of RubyGems, I see a gemspec that isn't specific enough, and fails to install on an allegedly supported version of Ruby.\r\n\r\n[Way back in 2011](https://github.com/sj26/mailcatcher/commit/08ab0c5f695689b794a6a74a07990ba272bcabff), you put this in the gemspec:\r\n\r\n```ruby\r\n  s.add_dependency \"mail\", \"~> 2.3\"\r\n```\r\n\r\nIf instead, you had put:\r\n\r\n```ruby\r\n  s.add_dependency \"mail\", \"~> 2.3.0\"\r\n```\r\n\r\nThen this bug would have **never existed**!\r\n\r\nMail 2.3.3 works fine in mailcatcher today. If you would like to take advantage of features in more recent versions of mail, then you should depend on that version.\r\n\r\nYou say having a loose version constraint \"might solve other issues and bugs,\" but really the opposite is true. Having tight version constraints prevents issues and bugs by limiting the dependencies to known good versions. \r\n\r\nIf you look at #277, you can see a couple dozen +1s, and I couldn't even count the number of times this was mentioned in other GitHub issues linking back to #277. You made a large number of people waste time developing a workaround, while blaming RubyGems architecture, when the real solution is to be specific about your dependencies.. ",
    "kvokka": "The problem was in eventmachine gem. After deleting all versions and reinstalling gem all works good. \n. Yes :)\nYou'll get mail anyway and get error anyway.\n\nBecause if you switch off   `raise_delivery_errors` in future you can forget about it and spend a lot of time, thinking that mail delivers.\nI just try to prevent my previous fault\n. The problem was in eventmachine gem. After deleting all versions and reinstalling gem all works good. \n. Yes :)\nYou'll get mail anyway and get error anyway.\n\nBecause if you switch off   `raise_delivery_errors` in future you can forget about it and spend a lot of time, thinking that mail delivers.\nI just try to prevent my previous fault\n. ",
    "sdurrheimer": "@sj26 Hi there, do we have any chance to see this feature being merged ? It is really painful to run mailcatcher behind a proxy without this.\n. @sj26 Any news ?\n. @sj26 Hi there, do we have any chance to see this feature being merged ? It is really painful to run mailcatcher behind a proxy without this.\n. @sj26 Any news ?\n. ",
    "twe4ked": ":+1: :smile: \n. :+1: :smile: \n. ",
    "LionbridgeLifeSciences": "CentOs 6.7 with Firefox 38.6.1 (Running mailCatcher and my Ruby app)\nWindows Server 2208 R2 Standart with Explorer 9\n\nand this morning, when I logged in the windows machine, I notice that I did receive the email from yesterday. please help :) \n\nThank you!\n. I did many refresh and I don't get any JS errors. Still now email. Anything else that could cause a delay of several hours?\n. Mailcatcher is receiving the message, and I do receive the email on the linux machine, but not on the windows machine\n. _UPDATE_\n\nI do receive the emails, but on my windows machine it take about 30 minutes ... Any Idea why?\n. Yes I did the hard refresh. and yes, it's pretty much this situation\n\nThank you for your time! :+1: \n. CentOs 6.7 with Firefox 38.6.1 (Running mailCatcher and my Ruby app)\nWindows Server 2208 R2 Standart with Explorer 9\n\nand this morning, when I logged in the windows machine, I notice that I did receive the email from yesterday. please help :) \n\nThank you!\n. I did many refresh and I don't get any JS errors. Still now email. Anything else that could cause a delay of several hours?\n. Mailcatcher is receiving the message, and I do receive the email on the linux machine, but not on the windows machine\n. _UPDATE_\n\nI do receive the emails, but on my windows machine it take about 30 minutes ... Any Idea why?\n. Yes I did the hard refresh. and yes, it's pretty much this situation\n\nThank you for your time! :+1: \n. ",
    "bradjones1": "Thanks for the prompt reply! It is weird, huh? If you're updating the Dockerfile it might be worth checking out what I ended up with on the above-referenced project... I copied an alpine-based build from a pull request on another image and it's pretty small.\n. Thanks for the prompt reply! It is weird, huh? If you're updating the Dockerfile it might be worth checking out what I ended up with on the above-referenced project... I copied an alpine-based build from a pull request on another image and it's pretty small.\n. ",
    "jkrehm": "I'm looking to do the same thing. How did you make it work, if you don't mind sharing?\n. I'm looking to do the same thing. How did you make it work, if you don't mind sharing?\n. ",
    "mikaelkundert": "Well after a while, I didn't get it completely working :(\n. Well after a while, I didn't get it completely working :(\n. ",
    "jiripudil": "This seems kinda related http://stackoverflow.com/questions/23309669/ruby-encode-xc3-from-ascii-8bit-to-utf-8-encodingundefinedconversionerr\n. This seems kinda related http://stackoverflow.com/questions/23309669/ruby-encode-xc3-from-ascii-8bit-to-utf-8-encodingundefinedconversionerr\n. ",
    "lucaspiller": "I spend too much time debugging this exception last week (unrelated to Mailcatcher) - it is raised when ActiveSupport tries to encode a string that is ASCII encoded, but contains UTF-8 characters (i.e. the character encoding on the string is wrong). It only happens if you use the ActiveSupport 4+ JSON encoder - if you use have Yajl/Oj/ActiveSupport < 4 it works fine.\n\nIn my case I was making HTTP requests that returned UTF-8 characters, but all the Ruby HTTP libraries return the response as ASCII (ignoring any content type response headers) - the fix was to add `.force_encoding('UTF-8')` to the string as I knew it would always be UTF-8. Maybe something like that is going on here?\n. I spend too much time debugging this exception last week (unrelated to Mailcatcher) - it is raised when ActiveSupport tries to encode a string that is ASCII encoded, but contains UTF-8 characters (i.e. the character encoding on the string is wrong). It only happens if you use the ActiveSupport 4+ JSON encoder - if you use have Yajl/Oj/ActiveSupport < 4 it works fine.\n\nIn my case I was making HTTP requests that returned UTF-8 characters, but all the Ruby HTTP libraries return the response as ASCII (ignoring any content type response headers) - the fix was to add `.force_encoding('UTF-8')` to the string as I knew it would always be UTF-8. Maybe something like that is going on here?\n. ",
    "sliceofcode": "Not sure if it's related, but we had the same problem on 0.6.4 and it's happening when a user is viewing the mailcatcher web interface (there is an active web socket) and a mail is sent via mailcatcher.\n\nA workaround until this is really resolved that worked for us:\n\n**Edit**: `/var/lib/gems/2.1.0/gems/mailcatcher-0.6.4/public/assets/mailcatcher.js`\n_(note: replace 2.1.0 and 0.6.4 with the respective versions)_\n\nAdd `WebSocket=undefined;` in the beginning of the file.\n\nThis will disable web sockets and fallback to normal http requests. Messages list will be updated every second.\n. Not sure if it's related, but we had the same problem on 0.6.4 and it's happening when a user is viewing the mailcatcher web interface (there is an active web socket) and a mail is sent via mailcatcher.\n\nA workaround until this is really resolved that worked for us:\n\n**Edit**: `/var/lib/gems/2.1.0/gems/mailcatcher-0.6.4/public/assets/mailcatcher.js`\n_(note: replace 2.1.0 and 0.6.4 with the respective versions)_\n\nAdd `WebSocket=undefined;` in the beginning of the file.\n\nThis will disable web sockets and fallback to normal http requests. Messages list will be updated every second.\n. ",
    "longwave": "Sounds like the same problem as #201?\n. Sounds like the same problem as #201?\n. ",
    "enpfeff": "![image](https://cloud.githubusercontent.com/assets/7192978/15545127/6ea2119e-2258-11e6-9b93-59d9ea2b8522.png)\n\nEmail has file attached\n\n![image](https://cloud.githubusercontent.com/assets/7192978/15545146/82abd206-2258-11e6-8912-5188f3fcc46e.png)\nDownloads successfully\n\n![image](https://cloud.githubusercontent.com/assets/7192978/15545153/8d8acc90-2258-11e6-9b30-957921ee4afa.png)\nCorrupted\n\nThe actual file is 300+ KB \n. ![image](https://cloud.githubusercontent.com/assets/7192978/15545127/6ea2119e-2258-11e6-9b93-59d9ea2b8522.png)\n\nEmail has file attached\n\n![image](https://cloud.githubusercontent.com/assets/7192978/15545146/82abd206-2258-11e6-8912-5188f3fcc46e.png)\nDownloads successfully\n\n![image](https://cloud.githubusercontent.com/assets/7192978/15545153/8d8acc90-2258-11e6-9b30-957921ee4afa.png)\nCorrupted\n\nThe actual file is 300+ KB \n. ",
    "tuanphpvn-bluecom": "Mailcatcher have some  seriously problems. For example. It can work on cli environment but it is not work on web environment.\n\nSo I move to Mailhog. It is perfect fine now. Cheer.\n. Mailcatcher have some  seriously problems. For example. It can work on cli environment but it is not work on web environment.\n\nSo I move to Mailhog. It is perfect fine now. Cheer.\n. ",
    "douglasresende": "Try this: `bundle exec mailcatcher --http-ip 0.0.0.0`\n. Try this: `bundle exec mailcatcher --http-ip 0.0.0.0`\n. ",
    "lesliev": "According to the Readme: \"Please don't put mailcatcher into your Gemfile\"\n. Mailcatcher is not supposed to be in your Gemfile, and you don't run it through `bundle exec`. I'm running v0.6.4 on a Rails 5 project with `gem install mailcatcher` and then `mailcatcher`. \nHave you tried that?\n. According to the Readme: \"Please don't put mailcatcher into your Gemfile\"\n. Mailcatcher is not supposed to be in your Gemfile, and you don't run it through `bundle exec`. I'm running v0.6.4 on a Rails 5 project with `gem install mailcatcher` and then `mailcatcher`. \nHave you tried that?\n. ",
    "gregoirenovel": "You're right, it's not supposed to be in the Gemfile (which the README states, but that I had missed for some reason). I did as you suggested and it works perfectly well. Thanks!\n. You're right, it's not supposed to be in the Gemfile (which the README states, but that I had missed for some reason). I did as you suggested and it works perfectly well. Thanks!\n. ",
    "radar": "Before you do that, you might want to look at #294 first.\n. I followed that advice today and got this:\n\n```\nmailcatcher\n/Users/ryanbigg/.rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:2274:in `check_version_conflict': can't activate json-1.8.2, already activated json-1.8.3 (Gem::LoadError)\n```\n\nI think this is something that Bundler could solve.\n. Before you do that, you might want to look at #294 first.\n. I followed that advice today and got this:\n\n```\nmailcatcher\n/Users/ryanbigg/.rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:2274:in `check_version_conflict': can't activate json-1.8.2, already activated json-1.8.3 (Gem::LoadError)\n```\n\nI think this is something that Bundler could solve.\n. ",
    "gdubicki": "Yeah, please release 0.6.5 that will have the UTF-8 issue fixed.\n. Yeah, please release 0.6.5 that will have the UTF-8 issue fixed.\n. ",
    "brunowego": "Please @sj26, consider accept this pull request.. Please @sj26, consider accept this pull request.. ",
    "thany": "A bit of time has passed. I found a workaround where compiling sqlite3 manually would fix the problem. Well, the error doesn't occur anymore. In fact, nothing occurs anymore. After running `mailcatcher`, it exists immediately, and sure enough 127.0.0.1:1080 is not reachable.\n. A bit of time has passed. I found a workaround where compiling sqlite3 manually would fix the problem. Well, the error doesn't occur anymore. In fact, nothing occurs anymore. After running `mailcatcher`, it exists immediately, and sure enough 127.0.0.1:1080 is not reachable.\n. ",
    "abr4xas": "I have the same problem with a fresh install\n\n``` bash\n$ mailcatcher --help\n/usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:126:in `require': cannot load such file -- concurrent (LoadError)\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:126:in `require'\n    from /var/lib/gems/2.1.0/gems/activesupport-4.2.7.rc1/lib/active_support/logger_thread_safe_level.rb:2:in `<top (required)>'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n    from /var/lib/gems/2.1.0/gems/activesupport-4.2.7.rc1/lib/active_support/logger.rb:3:in `<top (required)>'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n    from /var/lib/gems/2.1.0/gems/activesupport-4.2.7.rc1/lib/active_support.rb:27:in `<top (required)>'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n    from /var/lib/gems/2.1.0/gems/activesupport-4.2.7.rc1/lib/active_support/all.rb:1:in `<top (required)>'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n    from /var/lib/gems/2.1.0/gems/mailcatcher-0.6.4/lib/mail_catcher.rb:16:in `<top (required)>'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n    from /var/lib/gems/2.1.0/gems/mailcatcher-0.6.4/bin/mailcatcher:3:in `<top (required)>'\n    from /usr/local/bin/mailcatcher:23:in `load'\n    from /usr/local/bin/mailcatcher:23:in `<main>'\n```\n. I have the same problem with a fresh install\n\n``` bash\n$ mailcatcher --help\n/usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:126:in `require': cannot load such file -- concurrent (LoadError)\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:126:in `require'\n    from /var/lib/gems/2.1.0/gems/activesupport-4.2.7.rc1/lib/active_support/logger_thread_safe_level.rb:2:in `<top (required)>'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n    from /var/lib/gems/2.1.0/gems/activesupport-4.2.7.rc1/lib/active_support/logger.rb:3:in `<top (required)>'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n    from /var/lib/gems/2.1.0/gems/activesupport-4.2.7.rc1/lib/active_support.rb:27:in `<top (required)>'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n    from /var/lib/gems/2.1.0/gems/activesupport-4.2.7.rc1/lib/active_support/all.rb:1:in `<top (required)>'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n    from /var/lib/gems/2.1.0/gems/mailcatcher-0.6.4/lib/mail_catcher.rb:16:in `<top (required)>'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n    from /usr/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n    from /var/lib/gems/2.1.0/gems/mailcatcher-0.6.4/bin/mailcatcher:3:in `<top (required)>'\n    from /usr/local/bin/mailcatcher:23:in `load'\n    from /usr/local/bin/mailcatcher:23:in `<main>'\n```\n. ",
    "wipflash": "Same here with fresh install\n\n```\n`C:/Ruby23-x64/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- sqlite3/sqlite3_native (LoadError)\n        from C:/Ruby23-x64/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/sqlite3-1.3.11-x64-mingw32/lib/sqlite3.rb:6:in `rescue in <top (required)>'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/sqlite3-1.3.11-x64-mingw32/lib/sqlite3.rb:2:in `<top (required)>'\n        from C:/Ruby23-x64/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from C:/Ruby23-x64/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/mailcatcher-0.6.4/lib/mail_catcher/mail.rb:4:in `<top (required)>'\n        from C:/Ruby23-x64/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from C:/Ruby23-x64/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/mailcatcher-0.6.4/lib/mail_catcher.rb:29:in `<top (required)>'\n        from C:/Ruby23-x64/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from C:/Ruby23-x64/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/mailcatcher-0.6.4/bin/mailcatcher:3:in `<top (required)>'\n        from C:/Ruby23-x64/bin/mailcatcher:22:in `load'\n        from C:/Ruby23-x64/bin/mailcatcher:22:in `<main>'`\n```\n. Same here with fresh install\n\n```\n`C:/Ruby23-x64/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- sqlite3/sqlite3_native (LoadError)\n        from C:/Ruby23-x64/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/sqlite3-1.3.11-x64-mingw32/lib/sqlite3.rb:6:in `rescue in <top (required)>'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/sqlite3-1.3.11-x64-mingw32/lib/sqlite3.rb:2:in `<top (required)>'\n        from C:/Ruby23-x64/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from C:/Ruby23-x64/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/mailcatcher-0.6.4/lib/mail_catcher/mail.rb:4:in `<top (required)>'\n        from C:/Ruby23-x64/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from C:/Ruby23-x64/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/mailcatcher-0.6.4/lib/mail_catcher.rb:29:in `<top (required)>'\n        from C:/Ruby23-x64/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from C:/Ruby23-x64/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/mailcatcher-0.6.4/bin/mailcatcher:3:in `<top (required)>'\n        from C:/Ruby23-x64/bin/mailcatcher:22:in `load'\n        from C:/Ruby23-x64/bin/mailcatcher:22:in `<main>'`\n```\n. ",
    "luka-zitnik": "@thany, @wipflash, if that's an option for you, start from a Ruby 2.2.X installer, still recommended by rubyinstaller.org, and it should work.\n. @thany, @wipflash, if that's an option for you, start from a Ruby 2.2.X installer, still recommended by rubyinstaller.org, and it should work.\n. ",
    "schmkr": "You could query the mailcatcher \"api\" (`http://localhost:1080/messages`) and see if the mail is in the list?\nEven clear out the whole list of messages with a `DELETE` request on that same messages url after each test case that triggered sending emails should make sure you always have a clean state to start from.\n. You could query the mailcatcher \"api\" (`http://localhost:1080/messages`) and see if the mail is in the list?\nEven clear out the whole list of messages with a `DELETE` request on that same messages url after each test case that triggered sending emails should make sure you always have a clean state to start from.\n. ",
    "xi-ao": "It works, thanks. Sorry I did not find the thread you mention when looking for a solution.\n. It works, thanks. Sorry I did not find the thread you mention when looking for a solution.\n. ",
    "Aasaimani-Arumugam": "How to update the ruby >2.0 . How to update the ruby >2.0 . ",
    "Rubytastic2": "I managed to get this to work using a global gems with older rails version.\nBut its unconvient , is there any plans to make this compatible with rails5? I think the problem lays there\n. I managed to get this to work using a global gems with older rails version.\nBut its unconvient , is there any plans to make this compatible with rails5? I think the problem lays there\n. ",
    "fabwu": "Here is an example stacktrace from version 6.5.0:\n\n``` ruby\nSep 20 15:25:42 sxdev mailcatcher[27098]: ==> SMTP: Received message from '<test@test.ch>' (282944 bytes)\nSep 20 15:25:42 sxdev mailcatcher[27098]: *** Error sending message through websocket: \nSep 20 15:25:42 sxdev mailcatcher[27098]: Exception: \"\\xC3\" from ASCII-8BIT to UTF-8\nSep 20 15:25:42 sxdev mailcatcher[27098]: Backtrace:\nSep 20 15:25:42 sxdev mailcatcher[27098]: /usr/lib/ruby/2.1.0/json/common.rb:223:in `encode'\nSep 20 15:25:42 sxdev mailcatcher[27098]: /usr/lib/ruby/2.1.0/json/common.rb:223:in `generate'\nSep 20 15:25:42 sxdev mailcatcher[27098]: /usr/lib/ruby/2.1.0/json/common.rb:223:in `generate'\nSep 20 15:25:42 sxdev mailcatcher[27098]: mailcatcher (0.6.5) lib/mail_catcher/web/application.rb:69:in `block (3 levels) in <class:Application>'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/em/channel.rb:43:in `call'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block (3 levels) in push'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/em/channel.rb:43:in `each'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block (2 levels) in push'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/em/channel.rb:43:in `each'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block in push'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/eventmachine.rb:256:in `call'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/eventmachine.rb:256:in `schedule'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/em/channel.rb:43:in `push'\nSep 20 15:25:42 sxdev mailcatcher[27098]: mailcatcher (0.6.5) lib/mail_catcher/mail.rb:57:in `block in add_message'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/eventmachine.rb:981:in `call'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/eventmachine.rb:981:in `block in run_deferred_callbacks'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/eventmachine.rb:978:in `times'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/eventmachine.rb:978:in `run_deferred_callbacks'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/eventmachine.rb:193:in `run_machine'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/eventmachine.rb:193:in `run'\nSep 20 15:25:42 sxdev mailcatcher[27098]: mailcatcher (0.6.5) lib/mail_catcher.rb:173:in `run!'\nSep 20 15:25:42 sxdev mailcatcher[27098]: mailcatcher (0.6.5) bin/mailcatcher:5:in `<top (required)>'\nSep 20 15:25:42 sxdev mailcatcher[27098]: /usr/local/bin/mailcatcher:23:in `load'\nSep 20 15:25:42 sxdev mailcatcher[27098]: /usr/local/bin/mailcatcher:23:in `<main>'\nSep 20 15:25:42 sxdev mailcatcher[27098]: Please submit this as an issue at http://github.com/sj26/mailcatcher/issues\n```\n\nWhen I refresh the page the mails show up but the HTML is not rendered. When I switch from plain text to HTML the email is rendered correctly.\n. Here is an example stacktrace from version 6.5.0:\n\n``` ruby\nSep 20 15:25:42 sxdev mailcatcher[27098]: ==> SMTP: Received message from '<test@test.ch>' (282944 bytes)\nSep 20 15:25:42 sxdev mailcatcher[27098]: *** Error sending message through websocket: \nSep 20 15:25:42 sxdev mailcatcher[27098]: Exception: \"\\xC3\" from ASCII-8BIT to UTF-8\nSep 20 15:25:42 sxdev mailcatcher[27098]: Backtrace:\nSep 20 15:25:42 sxdev mailcatcher[27098]: /usr/lib/ruby/2.1.0/json/common.rb:223:in `encode'\nSep 20 15:25:42 sxdev mailcatcher[27098]: /usr/lib/ruby/2.1.0/json/common.rb:223:in `generate'\nSep 20 15:25:42 sxdev mailcatcher[27098]: /usr/lib/ruby/2.1.0/json/common.rb:223:in `generate'\nSep 20 15:25:42 sxdev mailcatcher[27098]: mailcatcher (0.6.5) lib/mail_catcher/web/application.rb:69:in `block (3 levels) in <class:Application>'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/em/channel.rb:43:in `call'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block (3 levels) in push'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/em/channel.rb:43:in `each'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block (2 levels) in push'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/em/channel.rb:43:in `each'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block in push'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/eventmachine.rb:256:in `call'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/eventmachine.rb:256:in `schedule'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/em/channel.rb:43:in `push'\nSep 20 15:25:42 sxdev mailcatcher[27098]: mailcatcher (0.6.5) lib/mail_catcher/mail.rb:57:in `block in add_message'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/eventmachine.rb:981:in `call'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/eventmachine.rb:981:in `block in run_deferred_callbacks'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/eventmachine.rb:978:in `times'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/eventmachine.rb:978:in `run_deferred_callbacks'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/eventmachine.rb:193:in `run_machine'\nSep 20 15:25:42 sxdev mailcatcher[27098]: eventmachine (1.0.9.1) lib/eventmachine.rb:193:in `run'\nSep 20 15:25:42 sxdev mailcatcher[27098]: mailcatcher (0.6.5) lib/mail_catcher.rb:173:in `run!'\nSep 20 15:25:42 sxdev mailcatcher[27098]: mailcatcher (0.6.5) bin/mailcatcher:5:in `<top (required)>'\nSep 20 15:25:42 sxdev mailcatcher[27098]: /usr/local/bin/mailcatcher:23:in `load'\nSep 20 15:25:42 sxdev mailcatcher[27098]: /usr/local/bin/mailcatcher:23:in `<main>'\nSep 20 15:25:42 sxdev mailcatcher[27098]: Please submit this as an issue at http://github.com/sj26/mailcatcher/issues\n```\n\nWhen I refresh the page the mails show up but the HTML is not rendered. When I switch from plain text to HTML the email is rendered correctly.\n. ",
    "JoeWoodward": "Upgraded and resolved the issue\n. Upgraded and resolved the issue\n. ",
    "jbouzekri": "@sj26 thanks for your quick answer and your detailed tests. I am using the docker image `schickling/mailcatcher`.\n\n```\njobou@jonathan:~$ docker run -ti schickling/mailcatcher /bin/bash\nroot@c98f455f7cf0:/# mailcatcher --version\nmailcatcher 0.6.1\nroot@c98f455f7cf0:/# ruby --version\nruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]\nroot@c98f455f7cf0:/# gem list\n\n*** LOCAL GEMS ***\n\nactivesupport (4.2.5)\ndaemons (1.2.3)\neventmachine (1.0.5)\ni18n (0.7.0)\njson (1.8.3)\nmail (2.6.3)\nmailcatcher (0.6.1)\nmime-types (2.99)\nminitest (5.8.3)\nrack (1.6.4)\nrack-protection (1.5.3)\nsinatra (1.4.6)\nskinny (0.2.3)\nsqlite3 (1.3.11)\nthin (1.5.1)\nthread_safe (0.3.5)\ntilt (2.0.1)\ntzinfo (1.2.2)\n```\n. Just tried after having done a `docker pull` and I have the same issue.\n\nThis is the result of the command you asked : \n\n```\nroot@5a1e39abc5f1:/# mailcatcher --version\nmailcatcher 0.6.5\nroot@5a1e39abc5f1:/# ruby --version\nruby 2.2.5p319 (2016-04-26 revision 54774) [x86_64-linux]\nroot@5a1e39abc5f1:/# gem list\n\n*** LOCAL GEMS ***\n\nbigdecimal (default: 1.2.6)\nbundler (1.12.5)\ndaemons (1.2.4)\neventmachine (1.0.9.1)\nio-console (default: 0.4.3)\njson (default: 1.8.1)\nmail (2.6.4)\nmailcatcher (0.6.5)\nmime-types (3.1)\nmime-types-data (3.2016.0521)\nminitest (5.4.3)\npower_assert (0.2.2)\npsych (default: 2.0.8)\nrack (1.6.4)\nrack-protection (1.5.3)\nrake (default: 10.4.2)\nrdoc (default: 4.2.0)\nrubygems-update (2.6.6)\nsinatra (1.4.7)\nskinny (0.2.4)\nsqlite3 (1.3.11)\ntest-unit (3.0.8)\nthin (1.5.1)\ntilt (2.0.5)\n```\n. I am closing this issue because I found out what went wrong.\n\nIf you look into my `Subject` header, you will see that there is a carriage return at the end. So the `From` header does not stuck to it. When I trim my subject to remove the carriage return, everything works correctly.\n\nThanks for your help and this amazing development tools (I am especially in love with the docker container. Easy to install, easy to run) \n. Hi, Thanks for you feedback. Yes, I saw it in the `Source` tab but I was hoping to preview in the list as it would be displayed in a imap/pop client. But I understand that you want to stay focused on the `SMTP` part of things.. @sj26 thanks for your quick answer and your detailed tests. I am using the docker image `schickling/mailcatcher`.\n\n```\njobou@jonathan:~$ docker run -ti schickling/mailcatcher /bin/bash\nroot@c98f455f7cf0:/# mailcatcher --version\nmailcatcher 0.6.1\nroot@c98f455f7cf0:/# ruby --version\nruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]\nroot@c98f455f7cf0:/# gem list\n\n*** LOCAL GEMS ***\n\nactivesupport (4.2.5)\ndaemons (1.2.3)\neventmachine (1.0.5)\ni18n (0.7.0)\njson (1.8.3)\nmail (2.6.3)\nmailcatcher (0.6.1)\nmime-types (2.99)\nminitest (5.8.3)\nrack (1.6.4)\nrack-protection (1.5.3)\nsinatra (1.4.6)\nskinny (0.2.3)\nsqlite3 (1.3.11)\nthin (1.5.1)\nthread_safe (0.3.5)\ntilt (2.0.1)\ntzinfo (1.2.2)\n```\n. Just tried after having done a `docker pull` and I have the same issue.\n\nThis is the result of the command you asked : \n\n```\nroot@5a1e39abc5f1:/# mailcatcher --version\nmailcatcher 0.6.5\nroot@5a1e39abc5f1:/# ruby --version\nruby 2.2.5p319 (2016-04-26 revision 54774) [x86_64-linux]\nroot@5a1e39abc5f1:/# gem list\n\n*** LOCAL GEMS ***\n\nbigdecimal (default: 1.2.6)\nbundler (1.12.5)\ndaemons (1.2.4)\neventmachine (1.0.9.1)\nio-console (default: 0.4.3)\njson (default: 1.8.1)\nmail (2.6.4)\nmailcatcher (0.6.5)\nmime-types (3.1)\nmime-types-data (3.2016.0521)\nminitest (5.4.3)\npower_assert (0.2.2)\npsych (default: 2.0.8)\nrack (1.6.4)\nrack-protection (1.5.3)\nrake (default: 10.4.2)\nrdoc (default: 4.2.0)\nrubygems-update (2.6.6)\nsinatra (1.4.7)\nskinny (0.2.4)\nsqlite3 (1.3.11)\ntest-unit (3.0.8)\nthin (1.5.1)\ntilt (2.0.5)\n```\n. I am closing this issue because I found out what went wrong.\n\nIf you look into my `Subject` header, you will see that there is a carriage return at the end. So the `From` header does not stuck to it. When I trim my subject to remove the carriage return, everything works correctly.\n\nThanks for your help and this amazing development tools (I am especially in love with the docker container. Easy to install, easy to run) \n. Hi, Thanks for you feedback. Yes, I saw it in the `Source` tab but I was hoping to preview in the list as it would be displayed in a imap/pop client. But I understand that you want to stay focused on the `SMTP` part of things.. ",
    "tombu": "Hi, I can confirm this issue still persists in 0.6.5.\n. Hi, I can confirm this issue still persists in 0.6.5.\n. ",
    "roneichiarandi": "```\r\nException: \"\\xC3\" from ASCII-8BIT to UTF-8\r\n    Backtrace:\r\n       /usr/lib/ruby/2.1.0/json/common.rb:223:in `encode'\r\n       /usr/lib/ruby/2.1.0/json/common.rb:223:in `generate'\r\n       /usr/lib/ruby/2.1.0/json/common.rb:223:in `generate'\r\n       mailcatcher (0.6.5) lib/mail_catcher/web/application.rb:69:in `block (3 levels) in <class:Application>'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `call'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block (3 levels) in push'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `each'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block (2 levels) in push'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `each'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block in push'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:256:in `call'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:256:in `schedule'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `push'\r\n       mailcatcher (0.6.5) lib/mail_catcher/mail.rb:57:in `block in add_message'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:981:in `call'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:981:in `block in run_deferred_callbacks'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:978:in `times'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:978:in `run_deferred_callbacks'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:193:in `run_machine'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:193:in `run'\r\n       mailcatcher (0.6.5) lib/mail_catcher.rb:173:in `run!'\r\n       mailcatcher (0.6.5) bin/mailcatcher:5:in `<top (required)>'\r\n       /usr/local/bin/mailcatcher:23:in `load'\r\n       /usr/local/bin/mailcatcher:23:in `<main>'\r\n```\r\n\r\nThe problem persists when send special characters, but the application don't crash/stop more.... @sj26 The error happens when the message body has special characters like **\"\u00e1\"**. ```\r\nException: \"\\xC3\" from ASCII-8BIT to UTF-8\r\n    Backtrace:\r\n       /usr/lib/ruby/2.1.0/json/common.rb:223:in `encode'\r\n       /usr/lib/ruby/2.1.0/json/common.rb:223:in `generate'\r\n       /usr/lib/ruby/2.1.0/json/common.rb:223:in `generate'\r\n       mailcatcher (0.6.5) lib/mail_catcher/web/application.rb:69:in `block (3 levels) in <class:Application>'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `call'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block (3 levels) in push'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `each'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block (2 levels) in push'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `each'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block in push'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:256:in `call'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:256:in `schedule'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `push'\r\n       mailcatcher (0.6.5) lib/mail_catcher/mail.rb:57:in `block in add_message'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:981:in `call'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:981:in `block in run_deferred_callbacks'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:978:in `times'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:978:in `run_deferred_callbacks'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:193:in `run_machine'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:193:in `run'\r\n       mailcatcher (0.6.5) lib/mail_catcher.rb:173:in `run!'\r\n       mailcatcher (0.6.5) bin/mailcatcher:5:in `<top (required)>'\r\n       /usr/local/bin/mailcatcher:23:in `load'\r\n       /usr/local/bin/mailcatcher:23:in `<main>'\r\n```\r\n\r\nThe problem persists when send special characters, but the application don't crash/stop more.... @sj26 The error happens when the message body has special characters like **\"\u00e1\"**. ",
    "rbliss": "@sysadm-prs-de was running into this same issue. Appears to be a bug in older versions of rubygems: https://github.com/rubygems/rubygems/issues/1420\n. @sysadm-prs-de was running into this same issue. Appears to be a bug in older versions of rubygems: https://github.com/rubygems/rubygems/issues/1420\n. ",
    "M1chael": "Confirm. Is there any fix for that?\n. Confirm. Is there any fix for that?\n. ",
    "chalmagean": "same thing here\r\n\r\nthis helps https://github.com/sj26/mailcatcher/issues/261 (remove the gem from your Gemfile)\r\n. same thing here\r\n\r\nthis helps https://github.com/sj26/mailcatcher/issues/261 (remove the gem from your Gemfile)\r\n. ",
    "njt1982": "Ahh :) Makes sense. Thanks!. Ahh :) Makes sense. Thanks!. ",
    "scara": "Hi @saveyour,\r\nit's actually based on sqlite3 but it is set as _in-memory_: https://github.com/sj26/mailcatcher/blob/2e27c830b1f9c43534dc7dd5bc0ab090404d8226/lib/mail_catcher/mail.rb#L9.\r\n\r\nMore details in https://www.sqlite.org/inmemorydb.html.\r\n\r\nHTH,\r\nMatteo. You're welcome!\r\nLet's make a reference to that pull too: #61.. Hi @tesmond,\r\ndid you check for `sqlite-devel` being installed too?\r\n\r\nHTH,\r\nMatteo. Hi @saveyour,\r\nit's actually based on sqlite3 but it is set as _in-memory_: https://github.com/sj26/mailcatcher/blob/2e27c830b1f9c43534dc7dd5bc0ab090404d8226/lib/mail_catcher/mail.rb#L9.\r\n\r\nMore details in https://www.sqlite.org/inmemorydb.html.\r\n\r\nHTH,\r\nMatteo. You're welcome!\r\nLet's make a reference to that pull too: #61.. Hi @tesmond,\r\ndid you check for `sqlite-devel` being installed too?\r\n\r\nHTH,\r\nMatteo. ",
    "saveyour": "thanks, this is exactly what i was looking for!  \r\n\r\nalso, if anyone finds there way here, i used: https://github.com/sj26/mailcatcher/pull/61/files . thanks, this is exactly what i was looking for!  \r\n\r\nalso, if anyone finds there way here, i used: https://github.com/sj26/mailcatcher/pull/61/files . ",
    "matthewsmith-io": "I got this same error (also on OSX 10.11.6) and eventually got it running.\r\n\r\nA [Stack Overflow thread](http://stackoverflow.com/questions/39302619/missing-symbol-when-installing-ruby-2-3-0-on-os-x-10-11-6-by-rvm) said to run ```xcode-select --install``` which didn't work.\r\n\r\nReinstalling eventmachine worked for me:\r\n```\r\ngem uninstall eventmachine\r\ngem install eventmachine\r\ngem install eventmachine -v '1.0.9.1'\r\n```\r\n\r\n I'm not sure if ```xcode-select --install``` had anything to do with it.. I got this same error (also on OSX 10.11.6) and eventually got it running.\r\n\r\nA [Stack Overflow thread](http://stackoverflow.com/questions/39302619/missing-symbol-when-installing-ruby-2-3-0-on-os-x-10-11-6-by-rvm) said to run ```xcode-select --install``` which didn't work.\r\n\r\nReinstalling eventmachine worked for me:\r\n```\r\ngem uninstall eventmachine\r\ngem install eventmachine\r\ngem install eventmachine -v '1.0.9.1'\r\n```\r\n\r\n I'm not sure if ```xcode-select --install``` had anything to do with it.. ",
    "martineng": "@matthewsmith-io\r\nThanks for the solution. I experienced the same issue and executed the reinstallation.\r\nHowever from my testing, without executing `xcode-select --install`, the error will remain.\r\nBy running `xcode-select --install` first and reinstalling `gem install eventmachine -v '1.0.9.1'` fixed the issue.\r\nThanks!. @matthewsmith-io\r\nThanks for the solution. I experienced the same issue and executed the reinstallation.\r\nHowever from my testing, without executing `xcode-select --install`, the error will remain.\r\nBy running `xcode-select --install` first and reinstalling `gem install eventmachine -v '1.0.9.1'` fixed the issue.\r\nThanks!. ",
    "amorev": "I have same issue too. I have same issue too. ",
    "199911": "I got the same problem. Btw I am using this docker image\r\nand the error message is\r\n\r\n```\r\n2017-02-07 09:17:44 - Encoding::UndefinedConversionError - \"\\xE2\" from ASCII-8BIT to UTF-8:\r\n\t/usr/lib/ruby/2.1.0/json/common.rb:223:in `encode'\r\n\t/usr/lib/ruby/2.1.0/json/common.rb:223:in `generate'\r\n\t/usr/lib/ruby/2.1.0/json/common.rb:223:in `generate'\r\n\t/var/lib/gems/2.1.0/gems/mailcatcher-0.6.5/lib/mail_catcher/web/application.rb:94:in `block in <class:Application>'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1611:in `call'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1611:in `block in compile!'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:975:in `[]'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:975:in `block (3 levels) in route!'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:994:in `route_eval'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:975:in `block (2 levels) in route!'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1015:in `block in process_route'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1013:in `catch'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1013:in `process_route'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:973:in `block in route!'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:972:in `each'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:972:in `route!'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1085:in `block in dispatch!'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1067:in `block in invoke'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1067:in `catch'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1067:in `invoke'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1082:in `dispatch!'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:907:in `block in call!'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1067:in `block in invoke'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1067:in `catch'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1067:in `invoke'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:907:in `call!'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:895:in `call'\r\n\t/var/lib/gems/2.1.0/gems/rack-protection-1.5.3/lib/rack/protection/xss_header.rb:18:in `call'\r\n\t/var/lib/gems/2.1.0/gems/rack-protection-1.5.3/lib/rack/protection/path_traversal.rb:16:in `call'\r\n\t/var/lib/gems/2.1.0/gems/rack-protection-1.5.3/lib/rack/protection/json_csrf.rb:18:in `call'\r\n\t/var/lib/gems/2.1.0/gems/rack-protection-1.5.3/lib/rack/protection/base.rb:49:in `call'\r\n\t/var/lib/gems/2.1.0/gems/rack-protection-1.5.3/lib/rack/protection/base.rb:49:in `call'\r\n\t/var/lib/gems/2.1.0/gems/rack-protection-1.5.3/lib/rack/protection/frame_options.rb:31:in `call'\r\n\t/var/lib/gems/2.1.0/gems/rack-1.6.4/lib/rack/nulllogger.rb:9:in `call'\r\n\t/var/lib/gems/2.1.0/gems/rack-1.6.4/lib/rack/head.rb:13:in `call'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:182:in `call'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:2013:in `call'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1487:in `block in call'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1787:in `synchronize'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1487:in `call'\r\n\t/var/lib/gems/2.1.0/gems/rack-1.6.4/lib/rack/urlmap.rb:66:in `block in call'\r\n\t/var/lib/gems/2.1.0/gems/rack-1.6.4/lib/rack/urlmap.rb:50:in `each'\r\n\t/var/lib/gems/2.1.0/gems/rack-1.6.4/lib/rack/urlmap.rb:50:in `call'\r\n\t/var/lib/gems/2.1.0/gems/rack-1.6.4/lib/rack/builder.rb:153:in `call'\r\n\t/var/lib/gems/2.1.0/gems/mailcatcher-0.6.5/lib/mail_catcher/web.rb:19:in `call'\r\n\t/var/lib/gems/2.1.0/gems/thin-1.5.1/lib/thin/connection.rb:81:in `block in pre_process'\r\n\t/var/lib/gems/2.1.0/gems/thin-1.5.1/lib/thin/connection.rb:79:in `catch'\r\n\t/var/lib/gems/2.1.0/gems/thin-1.5.1/lib/thin/connection.rb:79:in `pre_process'\r\n\t/var/lib/gems/2.1.0/gems/thin-1.5.1/lib/thin/connection.rb:54:in `process'\r\n\t/var/lib/gems/2.1.0/gems/thin-1.5.1/lib/thin/connection.rb:39:in `receive_data'\r\n\t/var/lib/gems/2.1.0/gems/eventmachine-1.0.9.1/lib/eventmachine.rb:193:in `run_machine'\r\n\t/var/lib/gems/2.1.0/gems/eventmachine-1.0.9.1/lib/eventmachine.rb:193:in `run'\r\n\t/var/lib/gems/2.1.0/gems/mailcatcher-0.6.5/lib/mail_catcher.rb:173:in `run!'\r\n\t/var/lib/gems/2.1.0/gems/mailcatcher-0.6.5/bin/mailcatcher:5:in `<top (required)>'\r\n\t/usr/local/bin/mailcatcher:23:in `load'\r\n\t/usr/local/bin/mailcatcher:23:in `<main>'\r\n```. Seems related to php mailer's update. Are you guys also using php mailer?. I got the same problem. Btw I am using this docker image\r\nand the error message is\r\n\r\n```\r\n2017-02-07 09:17:44 - Encoding::UndefinedConversionError - \"\\xE2\" from ASCII-8BIT to UTF-8:\r\n\t/usr/lib/ruby/2.1.0/json/common.rb:223:in `encode'\r\n\t/usr/lib/ruby/2.1.0/json/common.rb:223:in `generate'\r\n\t/usr/lib/ruby/2.1.0/json/common.rb:223:in `generate'\r\n\t/var/lib/gems/2.1.0/gems/mailcatcher-0.6.5/lib/mail_catcher/web/application.rb:94:in `block in <class:Application>'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1611:in `call'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1611:in `block in compile!'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:975:in `[]'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:975:in `block (3 levels) in route!'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:994:in `route_eval'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:975:in `block (2 levels) in route!'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1015:in `block in process_route'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1013:in `catch'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1013:in `process_route'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:973:in `block in route!'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:972:in `each'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:972:in `route!'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1085:in `block in dispatch!'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1067:in `block in invoke'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1067:in `catch'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1067:in `invoke'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1082:in `dispatch!'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:907:in `block in call!'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1067:in `block in invoke'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1067:in `catch'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1067:in `invoke'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:907:in `call!'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:895:in `call'\r\n\t/var/lib/gems/2.1.0/gems/rack-protection-1.5.3/lib/rack/protection/xss_header.rb:18:in `call'\r\n\t/var/lib/gems/2.1.0/gems/rack-protection-1.5.3/lib/rack/protection/path_traversal.rb:16:in `call'\r\n\t/var/lib/gems/2.1.0/gems/rack-protection-1.5.3/lib/rack/protection/json_csrf.rb:18:in `call'\r\n\t/var/lib/gems/2.1.0/gems/rack-protection-1.5.3/lib/rack/protection/base.rb:49:in `call'\r\n\t/var/lib/gems/2.1.0/gems/rack-protection-1.5.3/lib/rack/protection/base.rb:49:in `call'\r\n\t/var/lib/gems/2.1.0/gems/rack-protection-1.5.3/lib/rack/protection/frame_options.rb:31:in `call'\r\n\t/var/lib/gems/2.1.0/gems/rack-1.6.4/lib/rack/nulllogger.rb:9:in `call'\r\n\t/var/lib/gems/2.1.0/gems/rack-1.6.4/lib/rack/head.rb:13:in `call'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:182:in `call'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:2013:in `call'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1487:in `block in call'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1787:in `synchronize'\r\n\t/var/lib/gems/2.1.0/gems/sinatra-1.4.7/lib/sinatra/base.rb:1487:in `call'\r\n\t/var/lib/gems/2.1.0/gems/rack-1.6.4/lib/rack/urlmap.rb:66:in `block in call'\r\n\t/var/lib/gems/2.1.0/gems/rack-1.6.4/lib/rack/urlmap.rb:50:in `each'\r\n\t/var/lib/gems/2.1.0/gems/rack-1.6.4/lib/rack/urlmap.rb:50:in `call'\r\n\t/var/lib/gems/2.1.0/gems/rack-1.6.4/lib/rack/builder.rb:153:in `call'\r\n\t/var/lib/gems/2.1.0/gems/mailcatcher-0.6.5/lib/mail_catcher/web.rb:19:in `call'\r\n\t/var/lib/gems/2.1.0/gems/thin-1.5.1/lib/thin/connection.rb:81:in `block in pre_process'\r\n\t/var/lib/gems/2.1.0/gems/thin-1.5.1/lib/thin/connection.rb:79:in `catch'\r\n\t/var/lib/gems/2.1.0/gems/thin-1.5.1/lib/thin/connection.rb:79:in `pre_process'\r\n\t/var/lib/gems/2.1.0/gems/thin-1.5.1/lib/thin/connection.rb:54:in `process'\r\n\t/var/lib/gems/2.1.0/gems/thin-1.5.1/lib/thin/connection.rb:39:in `receive_data'\r\n\t/var/lib/gems/2.1.0/gems/eventmachine-1.0.9.1/lib/eventmachine.rb:193:in `run_machine'\r\n\t/var/lib/gems/2.1.0/gems/eventmachine-1.0.9.1/lib/eventmachine.rb:193:in `run'\r\n\t/var/lib/gems/2.1.0/gems/mailcatcher-0.6.5/lib/mail_catcher.rb:173:in `run!'\r\n\t/var/lib/gems/2.1.0/gems/mailcatcher-0.6.5/bin/mailcatcher:5:in `<top (required)>'\r\n\t/usr/local/bin/mailcatcher:23:in `load'\r\n\t/usr/local/bin/mailcatcher:23:in `<main>'\r\n```. Seems related to php mailer's update. Are you guys also using php mailer?. ",
    "elik-ru": "This patch fixes the issue. \r\n\r\nhttps://github.com/sj26/mailcatcher/pull/329  \r\n. I'm using regular Rails 5 mailer. Of cause it's transfer encoding is quoted-printable ascii. But inside it has one html part with utf8 encoding. What's wrong ?. Looks like ruby 1.9.3 is not supported by selenium any more.. I'm using regular Rails 5 mailer. Of cause it's transfer encoding is  quoted-printable ascii. But inside it has one html part with utf8 encoding. What's wrong ?. OK, fine. I said this above - rails 5 generates a letter with quoted printable ascii encoding. Over SMTP you receive quoted printable ascii encoding.\r\nBut after decoding it you will get plain-text and html parts with utf8 encoding.\r\nAnd everything works fine, but String is marked as ASCII-8BIT and JSON crashes in a try to convert it to utf8.. This patch fixes the issue. \r\n\r\nhttps://github.com/sj26/mailcatcher/pull/329  \r\n. I'm using regular Rails 5 mailer. Of cause it's transfer encoding is quoted-printable ascii. But inside it has one html part with utf8 encoding. What's wrong ?. Looks like ruby 1.9.3 is not supported by selenium any more.. I'm using regular Rails 5 mailer. Of cause it's transfer encoding is  quoted-printable ascii. But inside it has one html part with utf8 encoding. What's wrong ?. OK, fine. I said this above - rails 5 generates a letter with quoted printable ascii encoding. Over SMTP you receive quoted printable ascii encoding.\r\nBut after decoding it you will get plain-text and html parts with utf8 encoding.\r\nAnd everything works fine, but String is marked as ASCII-8BIT and JSON crashes in a try to convert it to utf8.. ",
    "lrezende": "Same as #322 \r\n\r\nSolved with some treatment before sending mail... Basically encoding the text and sending Content-Transfer-Encoding=quoted-printable. Is this just a websocket problem? Is there an option to disable it?. Same as #322 \r\n\r\nSolved with some treatment before sending mail... Basically encoding the text and sending Content-Transfer-Encoding=quoted-printable. Is this just a websocket problem? Is there an option to disable it?. ",
    "BrendaEgeland": "This patch fixed the problem for me.. This patch fixed the problem for me.. ",
    "tesmond": "It claims to be installed:\r\n\r\nPackage sqlite-devel-3.3.6-7.x86_64 already installed and latest version\r\nPackage sqlite-devel-3.3.6-7.i386 already installed and latest version. My harddrive died taking out the Dev environment that I had. I have previously installed mailcatcher a year ago on this exact vagrant box without encountering these issues, perhaps mailcatcher is on a newer version that has new dependencies? It is not viable to upgrade the SQL lite above the OS supported version as this would start moving my dev box away from the production environment, which obviously increases the probability of incompatible Dev/Production code.. It claims to be installed:\r\n\r\nPackage sqlite-devel-3.3.6-7.x86_64 already installed and latest version\r\nPackage sqlite-devel-3.3.6-7.i386 already installed and latest version. My harddrive died taking out the Dev environment that I had. I have previously installed mailcatcher a year ago on this exact vagrant box without encountering these issues, perhaps mailcatcher is on a newer version that has new dependencies? It is not viable to upgrade the SQL lite above the OS supported version as this would start moving my dev box away from the production environment, which obviously increases the probability of incompatible Dev/Production code.. ",
    "GeorgeDewar": "Yes, you're right - I just disabled LastPass and the issue is gone. I wonder why it wants to inject JavaScript in there. It seems to be directly into the body of an iframe, which makes no sense to me.... I'll look into that. Thanks for your help. I should have thought to check\nthe extensions!\n\nOn 23/02/2017 12:51, \"Samuel Cochran\" <notifications@github.com> wrote:\n\n> I'm not sure, sorry, but this seems like a LastPass bug. Maybe you can\n> blacklist MailCatcher from within LastPass?\n>\n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/sj26/mailcatcher/issues/331#issuecomment-281844155>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AFGMoUveDrvqt9KlYeUW80Mk4vt_BK6iks5rfMobgaJpZM4MJV5t>\n> .\n>\n. Yes, you're right - I just disabled LastPass and the issue is gone. I wonder why it wants to inject JavaScript in there. It seems to be directly into the body of an iframe, which makes no sense to me.... I'll look into that. Thanks for your help. I should have thought to check\nthe extensions!\n\nOn 23/02/2017 12:51, \"Samuel Cochran\" <notifications@github.com> wrote:\n\n> I'm not sure, sorry, but this seems like a LastPass bug. Maybe you can\n> blacklist MailCatcher from within LastPass?\n>\n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/sj26/mailcatcher/issues/331#issuecomment-281844155>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AFGMoUveDrvqt9KlYeUW80Mk4vt_BK6iks5rfMobgaJpZM4MJV5t>\n> .\n>\n. ",
    "jonniedarko": "Sure, here you go\r\n```\r\nReceived: by mysite.com (sSMTP sendmail emulation); Mon, 27 Feb 2017 19:41:09 +0000\r\nFrom: \"Apache\" <apache@mysite.com>\r\nDate: Mon, 27 Feb 2017 19:41:09 +0000\r\nTo: j7@huh.com\r\nSubject: Welcome to mysite!\r\nX-PHP-Originating-Script: 48:email.php\r\nReply-To: mysite \r\n\r\nMIME-Version: 1.0\r\n\r\nContent-Type: text/html\r\n\r\nContent-type: text/html; charset=ISO-8859-1\r\n\r\n<html><head>\r\n<meta http-equiv=\"content-type\" content=\"text/html; charset=UTF-8\">\r\n    <title>Welcome to mysite</title>\r\n</head>\r\n<body bgcolor=\"ffffff\">\r\n\r\n            <!--Header-->\r\n            <table style=\"margin: 50px auto 40px;\" align=\"center\" border=\"0px\" width=\"640px\">\r\n                <tbody><tr>\r\n                    <td style=\"text-align: center;\">\r\n                        <a href=\"http://www.mysite.com/?ref=invite_email\"><img src=\"http://mysite.com/images/email/logo_header.png\" alt=\"mysite\" border=\"0\"></a>\r\n                    </td>\r\n                </tr>\r\n            </tbody></table>\r\n\r\n            <!--Content-->\r\n            <table style=\"background: #f3f3f3; margin-top: 0px; margin-bottom: 50px; font-family:Avenir, HelveticaNeue-Light, Helvetica, Arial, sans-serif;font-size:14px; color:#333333; text-align:left;\" align=\"center\" border=\"0px\" width=\"600px\">\r\n                <tbody><tr>\r\n                    <td style=\"padding:50px 25px 25px 25px;\">\r\n                        Hi j7, <br><br>\r\n                        Thank you for activating your mysite account! We have provided some links below to you get started. If you have any questions please contact your account manager or contact us at <a href=\"mailto:support@mysite.com\" style=\"color:#1082ff; text-decoration:none;\">support@mysite.com</a><br /><br /><br />\r\n           \r\n            <img src=\"http://mysite.com/images/email/laptop.png\" />    \r\n           <br /><br />\r\n           <br />\r\n           \r\n           \r\n\r\n           \r\n           \r\n\r\n        </td>\r\n    </tr>\r\n</table>\r\n <!-- Footer Content -->\r\n            <table border=\"0px\" align=\"center\" style=\"color:#333333; text-align:center; text-transform:uppercase; margin-top:25px;font-size:14px; font-family:Avenir, HelveticaNeue-Light, Helvetica, Arial, sans-serif;\">\r\n                <tr>\r\n                <td>\r\n                <a href=\"http://www.mysite.com/?ref=invite_email\"><img src=\"email/logo_footer.png\" alt=\"mysite\" border=\"0\" style=\"padding-right: 5px;\"></a>\r\n                    <!--<a href=\"http://www.mysite.com/?ref=invite_email\"><img src=\"http://mysite.com/images/email/logo_footer.png\" alt=\"mysite\" border=\"0\" height=\"42\" width=\"209\"></a> -->\r\n                </td>\r\n                <td style=\"color:#f3f3f3; font-family:Avenir-Light, HelveticaNeue-Light;font-size:20px;\">\r\n                    |\r\n                </td>\r\n                <td style=\"text-align: left;font-size:10px;padding-left: 5px;\">\r\n                    40 Broad St, Boston, MA 02109 <br />\r\n                        <a href=\"https://www.mysite.com\" style=\"color:#1082ff; text-decoration:none; \">www.mysite.com</a>&nbsp;&nbsp;<span style=\"color:#f3f3f3; font-family:Avenir-Light, HelveticaNeue-Light;\">|</span> &nbsp;<a href=\"mailto:support@mysite.com\" style=\"color:#1082ff; text-decoration:none;\">support@mysite.com</a>\r\n                      </td>\r\n                </tr>\r\n            </table>\r\n\r\n</body>\r\n</html>\r\n```. Oh I see, I was using a snippet that had both `\\r` & `\\n` instead of just one after each of my headers. So Was not an issue with mailCatcher. \r\nThank you. Sure, here you go\r\n```\r\nReceived: by mysite.com (sSMTP sendmail emulation); Mon, 27 Feb 2017 19:41:09 +0000\r\nFrom: \"Apache\" <apache@mysite.com>\r\nDate: Mon, 27 Feb 2017 19:41:09 +0000\r\nTo: j7@huh.com\r\nSubject: Welcome to mysite!\r\nX-PHP-Originating-Script: 48:email.php\r\nReply-To: mysite \r\n\r\nMIME-Version: 1.0\r\n\r\nContent-Type: text/html\r\n\r\nContent-type: text/html; charset=ISO-8859-1\r\n\r\n<html><head>\r\n<meta http-equiv=\"content-type\" content=\"text/html; charset=UTF-8\">\r\n    <title>Welcome to mysite</title>\r\n</head>\r\n<body bgcolor=\"ffffff\">\r\n\r\n            <!--Header-->\r\n            <table style=\"margin: 50px auto 40px;\" align=\"center\" border=\"0px\" width=\"640px\">\r\n                <tbody><tr>\r\n                    <td style=\"text-align: center;\">\r\n                        <a href=\"http://www.mysite.com/?ref=invite_email\"><img src=\"http://mysite.com/images/email/logo_header.png\" alt=\"mysite\" border=\"0\"></a>\r\n                    </td>\r\n                </tr>\r\n            </tbody></table>\r\n\r\n            <!--Content-->\r\n            <table style=\"background: #f3f3f3; margin-top: 0px; margin-bottom: 50px; font-family:Avenir, HelveticaNeue-Light, Helvetica, Arial, sans-serif;font-size:14px; color:#333333; text-align:left;\" align=\"center\" border=\"0px\" width=\"600px\">\r\n                <tbody><tr>\r\n                    <td style=\"padding:50px 25px 25px 25px;\">\r\n                        Hi j7, <br><br>\r\n                        Thank you for activating your mysite account! We have provided some links below to you get started. If you have any questions please contact your account manager or contact us at <a href=\"mailto:support@mysite.com\" style=\"color:#1082ff; text-decoration:none;\">support@mysite.com</a><br /><br /><br />\r\n           \r\n            <img src=\"http://mysite.com/images/email/laptop.png\" />    \r\n           <br /><br />\r\n           <br />\r\n           \r\n           \r\n\r\n           \r\n           \r\n\r\n        </td>\r\n    </tr>\r\n</table>\r\n <!-- Footer Content -->\r\n            <table border=\"0px\" align=\"center\" style=\"color:#333333; text-align:center; text-transform:uppercase; margin-top:25px;font-size:14px; font-family:Avenir, HelveticaNeue-Light, Helvetica, Arial, sans-serif;\">\r\n                <tr>\r\n                <td>\r\n                <a href=\"http://www.mysite.com/?ref=invite_email\"><img src=\"email/logo_footer.png\" alt=\"mysite\" border=\"0\" style=\"padding-right: 5px;\"></a>\r\n                    <!--<a href=\"http://www.mysite.com/?ref=invite_email\"><img src=\"http://mysite.com/images/email/logo_footer.png\" alt=\"mysite\" border=\"0\" height=\"42\" width=\"209\"></a> -->\r\n                </td>\r\n                <td style=\"color:#f3f3f3; font-family:Avenir-Light, HelveticaNeue-Light;font-size:20px;\">\r\n                    |\r\n                </td>\r\n                <td style=\"text-align: left;font-size:10px;padding-left: 5px;\">\r\n                    40 Broad St, Boston, MA 02109 <br />\r\n                        <a href=\"https://www.mysite.com\" style=\"color:#1082ff; text-decoration:none; \">www.mysite.com</a>&nbsp;&nbsp;<span style=\"color:#f3f3f3; font-family:Avenir-Light, HelveticaNeue-Light;\">|</span> &nbsp;<a href=\"mailto:support@mysite.com\" style=\"color:#1082ff; text-decoration:none;\">support@mysite.com</a>\r\n                      </td>\r\n                </tr>\r\n            </table>\r\n\r\n</body>\r\n</html>\r\n```. Oh I see, I was using a snippet that had both `\\r` & `\\n` instead of just one after each of my headers. So Was not an issue with mailCatcher. \r\nThank you. ",
    "bytehead": "Thank you! Just noticed it - not really high prio to fix \ud83d\ude09 . Thank you! Just noticed it - not really high prio to fix \ud83d\ude09 . ",
    "mikelkew": "@sj26 Can you please consider releasing a small update to bump **thin** (and perhaps **eventmachine**) dependencies in both **mailcatcher** and **skinny**?. @sj26 Can you please consider releasing a small update to bump **thin** (and perhaps **eventmachine**) dependencies in both **mailcatcher** and **skinny**?. ",
    "edwardmp": "@sj26 \r\nWouldn't it be easier to just swap Thin for Puma? I can definitely submit a PR for that.. Encountered the same issue here today. @sj26 \r\nWouldn't it be easier to just swap Thin for Puma? I can definitely submit a PR for that.. Encountered the same issue here today. ",
    "jgrau": "Yup. I am having the same issue.. Yup. I am having the same issue.. ",
    "caugner": "Similar issue here, running `mailcatcher` using Ruby 2.3.3 (x64) on Windows 10:\r\n\r\n```\r\n    Exception: \"\\xC3\" from ASCII-8BIT to UTF-8\r\n    Backtrace:\r\n       json (2.1.0) lib/json/common.rb:224:in `encode'\r\n       json (2.1.0) lib/json/common.rb:224:in `generate'\r\n       json (2.1.0) lib/json/common.rb:224:in `generate'\r\n       mailcatcher (0.6.5) lib/mail_catcher/web/application.rb:69:in `block (3 levels) in <class:Application>'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block (3 levels) in push'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `each'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block (2 levels) in push'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `each'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block in push'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:256:in `schedule'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `push'\r\n       mailcatcher (0.6.5) lib/mail_catcher/mail.rb:57:in `block in add_message'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:981:in `block in run_deferred_callbacks'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:978:in `times'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:978:in `run_deferred_callbacks'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:193:in `run_machine'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:193:in `run'\r\n       mailcatcher (0.6.5) lib/mail_catcher.rb:173:in `run!'\r\n       mailcatcher (0.6.5) bin/mailcatcher:5:in `<top (required)>'\r\n       C:/Ruby23-x64/bin/mailcatcher:22:in `load'\r\n       C:/Ruby23-x64/bin/mailcatcher:22:in `<main>'\r\n```. Similar issue here, running `mailcatcher` using Ruby 2.3.3 (x64) on Windows 10:\r\n\r\n```\r\n    Exception: \"\\xC3\" from ASCII-8BIT to UTF-8\r\n    Backtrace:\r\n       json (2.1.0) lib/json/common.rb:224:in `encode'\r\n       json (2.1.0) lib/json/common.rb:224:in `generate'\r\n       json (2.1.0) lib/json/common.rb:224:in `generate'\r\n       mailcatcher (0.6.5) lib/mail_catcher/web/application.rb:69:in `block (3 levels) in <class:Application>'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block (3 levels) in push'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `each'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block (2 levels) in push'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `each'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block in push'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:256:in `schedule'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `push'\r\n       mailcatcher (0.6.5) lib/mail_catcher/mail.rb:57:in `block in add_message'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:981:in `block in run_deferred_callbacks'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:978:in `times'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:978:in `run_deferred_callbacks'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:193:in `run_machine'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:193:in `run'\r\n       mailcatcher (0.6.5) lib/mail_catcher.rb:173:in `run!'\r\n       mailcatcher (0.6.5) bin/mailcatcher:5:in `<top (required)>'\r\n       C:/Ruby23-x64/bin/mailcatcher:22:in `load'\r\n       C:/Ruby23-x64/bin/mailcatcher:22:in `<main>'\r\n```. ",
    "fnxnet": "Same here on ruby 2.1.5p273 (2014-11-13) [x86_64-linux-gnu]\r\n\r\n```\r\nException: \"\\xC5\" from ASCII-8BIT to UTF-8\r\n    Backtrace:\r\n       /usr/lib/ruby/2.1.0/json/common.rb:223:in `encode'\r\n       /usr/lib/ruby/2.1.0/json/common.rb:223:in `generate'\r\n       /usr/lib/ruby/2.1.0/json/common.rb:223:in `generate'\r\n       mailcatcher (0.6.5) lib/mail_catcher/web/application.rb:69:in `block (3 levels) in <class:Application>'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `call'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block (3 levels) in push'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `each'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block (2 levels) in push'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `each'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block in push'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:256:in `call'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:256:in `schedule'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `push'\r\n       mailcatcher (0.6.5) lib/mail_catcher/mail.rb:57:in `block in add_message'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:981:in `call'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:981:in `block in run_deferred_callbacks'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:978:in `times'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:978:in `run_deferred_callbacks'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:193:in `run_machine'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:193:in `run'\r\n       mailcatcher (0.6.5) lib/mail_catcher.rb:173:in `run!'\r\n       mailcatcher (0.6.5) bin/mailcatcher:5:in `<top (required)>'\r\n       /usr/local/bin/mailcatcher:23:in `load'\r\n       /usr/local/bin/mailcatcher:23:in `<main>'\r\n    Please submit this as an issue at http://github.com/sj26/mailcatcher/issues. Same here on ruby 2.1.5p273 (2014-11-13) [x86_64-linux-gnu]\r\n\r\n```\r\nException: \"\\xC5\" from ASCII-8BIT to UTF-8\r\n    Backtrace:\r\n       /usr/lib/ruby/2.1.0/json/common.rb:223:in `encode'\r\n       /usr/lib/ruby/2.1.0/json/common.rb:223:in `generate'\r\n       /usr/lib/ruby/2.1.0/json/common.rb:223:in `generate'\r\n       mailcatcher (0.6.5) lib/mail_catcher/web/application.rb:69:in `block (3 levels) in <class:Application>'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `call'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block (3 levels) in push'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `each'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block (2 levels) in push'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `each'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `block in push'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:256:in `call'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:256:in `schedule'\r\n       eventmachine (1.0.9.1) lib/em/channel.rb:43:in `push'\r\n       mailcatcher (0.6.5) lib/mail_catcher/mail.rb:57:in `block in add_message'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:981:in `call'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:981:in `block in run_deferred_callbacks'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:978:in `times'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:978:in `run_deferred_callbacks'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:193:in `run_machine'\r\n       eventmachine (1.0.9.1) lib/eventmachine.rb:193:in `run'\r\n       mailcatcher (0.6.5) lib/mail_catcher.rb:173:in `run!'\r\n       mailcatcher (0.6.5) bin/mailcatcher:5:in `<top (required)>'\r\n       /usr/local/bin/mailcatcher:23:in `load'\r\n       /usr/local/bin/mailcatcher:23:in `<main>'\r\n    Please submit this as an issue at http://github.com/sj26/mailcatcher/issues. ",
    "znz": "I think it is bug of mail sender, not mailcatcher.\r\nsee https://github.com/sj26/mailcatcher/issues/322. I think it is bug of mail sender, not mailcatcher.\r\nsee https://github.com/sj26/mailcatcher/issues/322. ",
    "samdjstevens": "That's exactly what is happening :man_facepalming: \r\n\r\nSymfony (the framework I'm using with this) has an option to spool all emails sent in memory until the kernel/script terminates, and this is turned on in the default configuration shipped with the standard distribution. Disabling this spooling fires the emails over straight away.\r\n\r\nCheers for the look in!. That's exactly what is happening :man_facepalming: \r\n\r\nSymfony (the framework I'm using with this) has an option to spool all emails sent in memory until the kernel/script terminates, and this is turned on in the default configuration shipped with the standard distribution. Disabling this spooling fires the emails over straight away.\r\n\r\nCheers for the look in!. ",
    "rorpage": "@sj26 It looks like my build and others are failing because of an older version of Ruby, which `selenium-webdriver` says it doesn't support any longer. Any chance we could remove it?. @sj26 I pulled the repo and did a `docker build -t rorpage/mailcatcher .` and then tried to run that. It acted like it didn't want to start.\r\n\r\nThe selenium dependency is loading during the Travis CI build, and it looks like my PR and others before it have been failing because `selenium-webdriver 3.4.3` requires Ruby >= 2.0.\r\n\r\nI am 100% okay with abandoning this PR if you feel it's unwarranted. I just needed to make these changes to make it work locally. Thanks for your feedback!. @sj26 It looks like my build and others are failing because of an older version of Ruby, which `selenium-webdriver` says it doesn't support any longer. Any chance we could remove it?. @sj26 I pulled the repo and did a `docker build -t rorpage/mailcatcher .` and then tried to run that. It acted like it didn't want to start.\r\n\r\nThe selenium dependency is loading during the Travis CI build, and it looks like my PR and others before it have been failing because `selenium-webdriver 3.4.3` requires Ruby >= 2.0.\r\n\r\nI am 100% okay with abandoning this PR if you feel it's unwarranted. I just needed to make these changes to make it work locally. Thanks for your feedback!. ",
    "spaquet": "Here you are https://github.com/spaquet/alpinemailcatcher to about ~36MB.... Here you are https://github.com/spaquet/alpinemailcatcher to about ~36MB.... ",
    "Rapid0s": "My bad  same as [#322](https://github.com/sj26/mailcatcher/issues/322)\r\nIt would be nice to be able to read correctly the entire email ... but it is what it is :). My bad  same as [#322](https://github.com/sj26/mailcatcher/issues/322)\r\nIt would be nice to be able to read correctly the entire email ... but it is what it is :). ",
    "dampfklon": "you could simpy check if the given port is <=1024 and mailcatcher is not running as root. you could simpy check if the given port is <=1024 and mailcatcher is not running as root. ",
    "michaelschmitz": "Same here - thanks for the solution. Seems like mailcatcher is set to fixed 1.0.9.1 instead of max version. Everytime I update my gems I now have to run this workaround. Might be time to change the dependency in mailcatcher.. Same here - thanks for the solution. Seems like mailcatcher is set to fixed 1.0.9.1 instead of max version. Everytime I update my gems I now have to run this workaround. Might be time to change the dependency in mailcatcher.. ",
    "halilim": "Do you mean that it doesn't respond to Ctrl+C by \"freezes\"? If so I'm having that part since for a while with Ruby 2.3.4 too (on both macOS Sierra & High Sierra for what it's worth), having to `kill -9` it.. Oh, please completely forget what I have said. And thanks much @sj26! Trying `mailcatcher --foreground` allowed me to see my problem:\r\n\r\n```\r\n$ mailcatcher --foreground\r\n/usr/local/opt/rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/mailcatcher-0.2.4/bin/mailcatcher:42:in `<top (required)>': invalid option: --foreground (OptionParser::InvalidOption)\r\n\tfrom /usr/local/opt/rbenv/versions/2.4.2/bin/mailcatcher:23:in `load'\r\n\tfrom /usr/local/opt/rbenv/versions/2.4.2/bin/mailcatcher:23:in `<main>'\r\n```\r\n\r\nYeah, somehow I was running 0.2.4 all the time. The reason is probably the rbenv mishaps I had some time ago. I'm putting this here rather than deleting the original comment in case somebody else has the same problem.\r\n\r\nTalking about versions, I think showing the mailcatcher (and Ruby?) version in the output would be useful.. Do you mean that it doesn't respond to Ctrl+C by \"freezes\"? If so I'm having that part since for a while with Ruby 2.3.4 too (on both macOS Sierra & High Sierra for what it's worth), having to `kill -9` it.. Oh, please completely forget what I have said. And thanks much @sj26! Trying `mailcatcher --foreground` allowed me to see my problem:\r\n\r\n```\r\n$ mailcatcher --foreground\r\n/usr/local/opt/rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/mailcatcher-0.2.4/bin/mailcatcher:42:in `<top (required)>': invalid option: --foreground (OptionParser::InvalidOption)\r\n\tfrom /usr/local/opt/rbenv/versions/2.4.2/bin/mailcatcher:23:in `load'\r\n\tfrom /usr/local/opt/rbenv/versions/2.4.2/bin/mailcatcher:23:in `<main>'\r\n```\r\n\r\nYeah, somehow I was running 0.2.4 all the time. The reason is probably the rbenv mishaps I had some time ago. I'm putting this here rather than deleting the original comment in case somebody else has the same problem.\r\n\r\nTalking about versions, I think showing the mailcatcher (and Ruby?) version in the output would be useful.. ",
    "bandanh": "wow, that fixed it, thank you so much. wow, that fixed it, thank you so much. "
}