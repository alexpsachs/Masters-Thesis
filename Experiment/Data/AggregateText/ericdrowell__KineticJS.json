{
    "ericdrowell": "Awesome!  I've been meaning to do that.  I'll probably pull these changes in this weekend.  \n. great questions!  Yes, I haven't made this Github project official yet because I'm still new to Github and getting my feet wet :)\n\n1) I'll be making the Github project official very soon, probably within a week or so.\n\n2) I do already have plans to document the config object more fully (it's also already documented on html5canvastutorials.com)\n\n3) I use jsdoc toolkit now (as of like a few days ago) and it's been working out great.  Here's the new docs page: http://www.kineticjs.com/docs/symbols/Kinetic.Stage.php\n\n4) I still haven't decided yet about the best place to report bugs.  I'm leaning towards using Github and removing the Bugs Forum\n\n5) haven't put thought into tagging yet\n\n6) absolutely.  I'm setting things up on Github because a lot of people are requesting it (so they can manage forks) and so people can help contribute and get more involved (KineticJS is growing very rapidly and it's becoming too big of a project to be managed by one person)\n\nCheers!\n. Antoine, I was going to message you with a request, but it appears that you don't have messaging enabled on GitHub, or maybe you don't have an email address tied to your account.  At any rate, if you're able to see this message even after the pull request is closed, I wanted to see if you could do these:\n\n1) modify the rake file so that all of the comments are stripped out correctly for the minified version (for some reason the GlobalObject comments are still there)\n\n2) is it possible to add a version number to the build command, something like \"3.8.3\" and the rake file can auto update the license.js page, perhaps with a token (i.e. @version@)\n\n3) is it also possible to automatically update the date in the license.js file?\n\nCheers\n. Awesome, that sounds great!  Thanks so much for putting this together.  Would also be cool if after we pass in a version number \"e.g. 3.8.3\", it would also rename the dist files like this:\n\nkinetic-v3.8.3.js\nkinetic-v3.8.3.min.js\n\nCheers!\n. Brilliant!  Works perfectly!\n. Great suggestion.  This is something that's been on my mind for awhile, and have been planning on adding soon.  Any special requests on how you'd like for it to be handled?  To keep things simple, I don't think I'll be supporting event capturing (only event bubbling).  I figured we could do something like this:\n\nshape.on(\"click\", function(e) {\n    // do stuff\n    e.stopPropagation();\n}\n\nDo you think this is sufficient?\n. Sounds good!  Hopefully I'll get this added in soon.\n. Hiya!  Have you tried using Groups?  Groups enables you to create complex shapes by grouping multiple regular shapes.  In essence, a group is a shape that can have multiple paths.  Here's an example:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-a-group-with-kineticjs/\n. Yes, I investigated this technique a long time ago because on the surface it sounds like a great idea.  However, the performance is horrible.  In fact, if you start using more than like 10 images, the whole app will start to break down pretty rapidly. \n. That's a pretty good idea (storing the pixel data for an image once and reusing the array).\n\nI just realized that it would be awesome to add a new property to the Kinetic.Image object, \"detectionType\", which could be set to \"path\" or \"pixel\".  This way developers can choose.  Thanks for the discussion, and great demo btw!\n. Thanks for posting this!  This is a known bug that hasn't been fixed yet - it's slightly lower on the priority list at the moment, but should hopefully get put in soon.\n\nCheers!\n. Well in that case, I'll have the issue fixed by this weekend and bundle it with the v3.8.4 release :)\n. oh and by the way, if you need the fix even faster, you can try making a change in the _getContainerPosition() method in Stage.js.  This method is not taking into account div scroll offsets, only the window scroll offset :)\n. sweet, if you drop by the Bay area let me know and I'll take you up on that!  Btw the fix for this has been checked in :)\n. Can you post your code on a web server somewhere so I can take a look at it there? (since you're saying that the code works on jsfiddle but not your local) KineticJS should be supporting scrollable containers and scrollable parent DOMS.  Thanks!\n. ah, you're not the first person to have problems with the styling of the container node (non dispay:relative styles).  I'll look into this a bit more.\n. great!  glad you got it working\n. have you tried using the dragBounds property?\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-bounds-tutorial-with-kineticjs/\n. right, and that was sort of my thinking.  In other words, I'm trying to keep KineticJS as light as possible so I don't want to implement everything, but I do want to implement things that have a light foot print and is commonly used (like rectangular bounds).  For more special cases, like creating circular bounds, devs could create plugins for that :)\n. Agreed.  I think drag and drop, constraints, and bounds, still need a ton of improvements :)\n. Sweet!  I've been meaning to add a mimeType to the toDataURL method.  Thanks!\n. done and done :)\n. You rock!!  Kudos on updating the unit tests too, I appreciate that :)\n. it's okay, everything's good to go\n. This issue has been addressed in the forums - no fix needed\n. yep, they sure don't :)  The stage is the only Node object that isn't tied to a layer, and currently transitions are tied to each layer for performance reasons.  Originally, I was going to add support for Stage transitions for the next release by tweaking the transition code a bit for the Stage node, but now, I've recently come up with a better way to manage animations + transitions with relation to layers, so I'll be taking that approach now instead.  The new approach will also enable stage transitions for the next release.  Stay tuned!!\n. Following up with this issue - stage transitions are now supported as of v3.9.2\n. No prob!  I'll keep this open for awhile\n. Closing this pull request - If I do end up implementing a full screen method, it will probably leverage the HTML5 full screen API\n. ah, yes Firefox appears to be failing for me.  I'll look into this thanks!!\n. oh, I'm a dope :)  The same text in Firefox and Chrome has slightly different text sizes (due to implementation), so my unit tests shouldn't test for a specific text width.  Thanks!\n. Oh and in regards to the pixel detection, you really can't use a bounding box (because parent nodes can be transformed, causing the child node to be way outside the bounding box)\n\nAlthough, it actually performs pretty nicely for me because I've enabled the developer to decide when to save the pixel data with the save() method (very expensive).  If you choose good times to save the data, I think the performance should be okay.  What sort of test case were you using?\n\nmy example: http://www.html5canvastutorials.com/labs/html5-canvas-animals-on-the-beach-game-with-kineticjs/\n. After a bit of exploration, I found that the root problem was with the getAbsolutePosition() method.  It should not have been taking into account center offset transforms.  Issue is now fixed :)\n. Perfect!  I had plans on implementing rounded corners in exactly the way that you've done (I wanted it to be a config property, not a new shape).  I'll pull this in soon.  Thanks!\n. Your work made it to v3.9.4 and I gave you credit in the change log.  Thanks again!\n. This is good stuff!  However, is it possible that you could move most of this logic to Kinetic.Line, and add a new line property called \"lineStyle\" that's defaulted to \"normal\", and devs can set it to \"dashed\" if they want a dashed line.  I'd like for KineticJS to have as few shapes as possible.\n\nIn the future, I also wanted to add support for lineStyle: \"dotted\" which would draw small circles instead of lines along the line path.\n\nCheers!\n. status update - I'm currently doing a little bit of research to see what other implementations look like, and will most likely be merging some of your work with some other ideas I've been finding as well.  I really like that you have the ability to animate the dashed line, pretty slick.  \n. I ended up using a method by Phrogz which is only about 30 lines of code, and enables an unlimited amount of dashed and dotted lines with varying dash lengths and spacings for each alternate.  This will provide quite a bit of flexibility. \n\nThanks so much for digging into this with me!\n. Nicely done!!!  I was planning on working on Node.js support at some point.  As soon as I get a chance, I'll look over the changes and pull in it.\n\nThanks again!\n. added these changes to the nodejs branch.  I'll spend a little time later doing further testing and taking a closer look.  Very exciting stuff!!\n. Hiya!  It hasn't really been supported, as of yet.  If I understand correctly, there's not too much effort that has to go in to get it working.  I've had plans to add support, along with a suite of unit tests, but other priorities have been bubbling on top of it.  Hopefully I'll have this addressed soon (possibly with the next release or so)\n. sorry for the headache guys.  Really hoping to officially add node.js support soon.\n. absolutely possible, just a matter of time :)\n. Yea, I've taken a couple weeks off from KineticJS dev.  I have a whole slew of things that I'll be working on during xmas break :P\n. well, turns out that the native max width w3c spec really sucks.  I don't like that the text scales rather than being cut off (similar to html text inside of a div element with a max width).  Also, the changes didn't incorporate the bounding box dimensions.\n\nso, I ended up reworking the logic to use clipping rather than the native text scaling.\n\nhttps://github.com/ericdrowell/KineticJS/commit/05df07829533fa1de3b6a6e23da05845586c1a2f\n\nThanks for getting these changes rolling!\n\nCheers\n. Thanks for this!  After a bit more thought, I've decided that the API should look like this:\n\ncornerRadius:5 -> causes all 4 corners to have radius of 5\n\ncornerRadius: [1,2,3,4] -> causes top left corner radius to be 1, top right to be 2, etc.  \n\nI'll put together a mashup of some of your work plus this API.  \n\nThanks again!\n. still not fully following your use case.  Could you expand on it a bit?\n\nCheers!\n. Follow up:\n\nI've replaced the Circle Shape with Ellipse, which enables you to define a radius like this for circles:\n\nradius: 10\n\nand a radius like this for ovals:\n\nradius: {\n   x: 10,\n   y: 5\n}\n\nIt's much cleaner to transform the context than to connect several bezier curves.  Check out the Ellipse shape in the source to see how it looks\n\nCheers!\n. hi thanks for looking into this!  It turns out that I'm in the process of exposing attr change events internally and externally, which means that KineticJS is becoming more event driven.  I've added a widthChange and heightChange listener to the stage that listens for dimension changes, and when they occur, the DOM dimensions are synced.  This enables us keep a lot of node specific logic out of the setAttrs method and greatly decouples the code base\n\nCheers!\n. updated on this issue - I've added an on size change listener that updates the DOM dimensions whenever the stage dimensions change, so this issue should be resolved :)\n\nCheers!\n. very nice changes!  As soon as I get a chance, I'll look into pulling these in and check out the code a bit more closely.  Great work!\n. Thanks for this!  You've done some great work.  Unfortunately though, I've already begun a total Kinetic.Text rewrite.  Now that (I think) I fully understand what most people need from the Text shape, I decided to do a full rewrite of the shape to make it very clean and elegant.  Word wrap will be added very soon.  \n\nCheers!\n. Hiya!  This problem should be resolved with the latest version of KineticJS.  I went though and cleaned up undefined, null, 0, and empty string usage.  If you now set any attr to undefined, nothing will happen.  If you set an attr to null, 0, or empty string, the attr will be disregarded.\n\ne.g. if you set image to null, it won't be drawn.\n. Hi again, this issue has been resolved with v3.10.2\n\nif you set any attr to null, 0, or '', the attr will be ignored.  If you set an attr to undefined, nothing will happen.\n\nCheers!\n. I'll take a look at this one as soon as I get a chance!\n\nCheers!\n\nEric\n. adding this to the next release.  Thanks!\n. There still seems to be some issues with remove() in general, so I'm going to do a full blown reinvestigation of it.  Sorry for this!  All of the issues should be resolved by the next version, 4.3.1.  I think that I get more bug reports related to remove() than anything else, so it's clearly not designed well.  Thanks for being patient! \n. very likely.  I also have a todo item for the next release that involves creating some memory performance tests around remove().  Hopefully we'lll get it cleaned up and working seamlessly soon\n. wait, did you mean layer.remove() doesn't work?  the remove method does not take in an argument:\n\nhttp://kineticjs.com/docs/symbols/Kinetic.Node.php#remove\n\nI looked very closely at my layer.remove() tests, and they are passing correctly\n. hiya!  Are you referring to animations specifically?  The event stress tests seem to performing well still.  I'll look into this asap!\n. Here's some eventing stress tests which still seem to perform well:\n\nhttp://www.html5canvastutorials.com/labs/html5-canvas-10000-shape-stress-test-with-kineticjs/\nhttp://www.html5canvastutorials.com/labs/html5-canvas-kineticjs-drag-and-drop-stress-test-with-1000-shapes/\n. sweet!  Glad to hear.\n\nP.S. The current build has +7% drawing performance, and I have a lot of other peformance improvements lined up for the next few releases.  i.e. KineticJS should keep getting faster and faster :)\n. Thanks!  this change looks really good.  As soon as I get the chance I'll pull it in and create some unit tests for it\n. ah good one.  Thanks for letting me know!  I'll get this one fixed up asap.\n\nCheers!\n. Just tested this use case, and the problem seems to have been resolved.  Please let me know if you're still experiencing this problem!\n. Hiya!  Thanks for this.  I've actually already begun re-writing the Text shape, including a new API for alignment.  align and verticalAlign now refer to the text's alignment relative to its containing text box (which makes a heck of a lot more sense).  Rounded corners are also now available since the Text shape is now a Group which utilizes the Rect shape for the text box.  Word wrap will be coming soon as well.\n. Hiya!  This is technically a bug because the attribute is present in the code, but is not used yet.  It will be working by v4.3.3\n. Awesome point!  That does really suck.  I'll add this to my todo list.\n\nCheers!\n\nEric\n. fixed in v3.10.2!  Thanks again for pointing that out\n\nCheers!\n\nEric\n. Hiya!  Yea, I noticed that before - my formatter for some reason screws up that line.  I tried multiple variations without success.  Went ahead and changed the else if to an else, and inside the else block used an if block.  Very strange!\n. Great point.  I'll look into a better solution asap\n\nCheers!\n. Fixed!  At first glance, I thought that John's inheritance implementation was too complex for what I needed, but after trying to implement it myself I realized that it was spot on.  I added his Class function to Class.js in the util folder and am now extending all parent nodes with it.  Works like a charm!\n\nCheers!\n. great idea.  I'll add this the todo list\n. following up with this thread - Kinetic.Text added support for the \\n character to force word wrap.  Here's an example:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-text-tutorial/\n. Great point!  Assuming that Shapes are typically the node whose visibility is toggled on and off (in contrary to to groups, layers, or stage), this would certainly be nice performance improvement.  Just pushed to change and gave you props.\n\nThanks!\n. cool work!  I like where you're going with this, but isn't the concept of your Style class the same thing as just storing styles as an object like this:\n\n```\nvar myStyle = {\n    fill: 'blue',\n    stroke: 'red'\n}\n```\n\nand then applying that style to any node via setAttrs\n\n```\ncircle.setAttrs(myStyle);\n```\n\nI've been meaning to create a clone method, and what you have is pretty close to what I had imagined as well, with the exception that the clone method might also need to clone event handlers and other non attr properties.  I'll take a closer look at this when I get a chance\n\nThanks for looking into this!\n\nEric\n. Thanks for getting the ball rolling!  There's quite a few things that still needed to change, so I went ahead and created my version of the clone method here:\n\nhttps://github.com/ericdrowell/KineticJS/commit/a8ab9a253348f9628e60727bf67f0839aeb58253\n\nI'll mention you in the change log for getting this rolling\n\nHere are a few things that needed to change with your implementation:\n- we don't want to copy over all of the object properties (such as _id, because this is a unique node identifier)\n- we also don't want to directly copy over the eventListeners property because some of the listeners are generated from class constructors, and we don't want to override these handlers with the original objects handlers\n- I wanted to make sure that the constructor is called for proper object initialization using the 'new' keyword\n- we don't need to manually do a deep copy to copy over the attrs because each class initializer uses the setAttrs method to set the attrs, which automatically does a deep copy\n\nThanks again!\n\nCheers\n. Hiya!  Actually KineticJS works very similarly to that.  Check out this tutorial\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-remove-event-listener-by-name-with-kineticjs/\n. right, that makes sense.  I think that's a reasonable request :)  I'll add it to my todo list\n\nCheers!\n. Hey sorry, this is still in my todo list but it's been lower in priority than other tasks. It'll get in there I promise. In the meantime, would you be interested in making th change for us, and submitting a pull request?\n. fixed as of v4.0.3 courtesy of Davonium.  Thanks!\n. hi there!  All shape radii should be centered on the shape's perimeter, such that the shape radius should be equal to or larger than the inner stroke radius.  Is this what you're referring to?  If not, maybe you could create a jsfiddle showing the behavior, or provide a screenshot.\n\nCheers!\n. Ellipse strokes seem to be working fine in FF now http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-ellipse-tutorial/\n. Hiya!  Thanks for looking into this.  At the time being, I don't really want to support automatic image loading, because different apps may need to load images in different ways depending on what's needed, and I don't want to go down the route of supporting all kinds of different image loading strategies (e.g. load all images, then draw the whole stage at once, draw each image as soon as it's available and manage layering and redrawing, combinations of the two, etc.)\n\nI've found that it's much more straight forward to let the developer manage image loading and drawing themselves.  Plus, I'm trying to keep KineticJS as light weight as possible, and since image loading really has nothing to do with canvas (there are hundreds of other image loading libraries out there), I feel like adding the logic would add extra bloat.\n\nI'll keep an open mind though - may need to revisit this and incorporate image loading at a later time\n\nCheers!\n. hey Jason, I pulled in the new TextShape (awesome by the way), and moved the non-primitive shapes to the plugins folder.  Was wondering if you could possibly make a few changes to the Path and TextPath shape, if you get the chance.  If not, I can take a look sometime next week:\n\n1) I would like for Shape drawFunc functions to not be overridden by children classes (the TextPath class extends Path, but then overrides its drawing function).  In other words, if something were to extend a particular shape, it shouldn't override anything in its initializer, it should only add or modify methods.\n\nThat being said, maybe it's more appropriate if the TextPath shape directly extends Shape like all of the other shapes, but simply inherits some of the Path methods\n\n2) I noticed that you made the Path shape much heavier in preparation for TextPath support.  I would like for the Path shape to be as lean as possible, and not assume that another class will be using it for something.  Is it possible for all of the extra logic you added to reside in the TextPath shape somehow?  It feels like the Path class suddenly became very bloated, and I was actually hoping to spend some time later on improving on its performance\n\n3) is it possible you could also use jslint or jshint on the shapes so that the JS code style is similar to the other plugins? (What you and I are building here are the officially supported KineticJS plugins)\n\nWhat do you think?\n. awesome. keep rockin :)\n. Whoops, you're right, we should add them to Kinetic.Plugins\n. wow guys that's a lot of +1's!  I'll take this a bit more seriously and revisit\n. finally getting around to looking into this again :)\n\nthanks for the patience\n. Thanks for getting this rolling!  I ended up using a more generic technique for supporting AMD + node.js with one shim from this:\n\nhttps://github.com/umdjs/umd/blob/master/returnExports.js\n\nand here's the AMD support commit + special test:\n\nhttps://github.com/ericdrowell/KineticJS/commit/ab19b442a00a3261c68c71683eb5b80a0558a5b3\nhttps://github.com/ericdrowell/KineticJS/commit/266026c76f5d16788c0fe48303c81332071b2a72\n\nPlease let me know if this looks good to you, or if any further changes need to be made.  Thanks!\n. Hiya!  Thanks for the detailed response.\n\nYes, I've been thinking about how to handle the global access for users who\ndon't use AMD (which I'm assuming is most users), and I realized that I can\njust define Kinetic in the global namespace only if AMD or node are not\nbeing used.  I'll make this change soon.\n\nCheers!\n\nEric\n\nOn Mon, Dec 3, 2012 at 10:44 PM, michaelgilley notifications@github.comwrote:\n\n> Hey Eric, thank you for supporting this. There are a few issues though.\n> These are non-critical but still yet they should be addressed. If you'd\n> like me to add these as new issues just let me know.\n> \n> First, the Kinetic should be hidden from the global namespace. It looks\n> like in Global.js line 31 Kinetic is left outside of the wrapper. Part of\n> the power of AMD (requirejs) is to contain libraries/modules within the AMD\n> wrapper and be used through direct require instead of reference to the root\n> namespace. This is why the UMD spec you included defaults to assigning\n> Kinetic to the root (window) namespace IF define and exports are undefined.\n> If define is a function then Kinetic should not be accessible via the\n> window object, only through requiring the module.\n> \n> If you'd like to keep Kinetic in the global namespace independent of\n> whether define exists or not that's fine. Plenty of libraries/frameworks do\n> this (e.g., jQuery, Underscore, etc.) You can see an UMD example of this at\n> https://github.com/umdjs/umd/blob/master/returnExportsGlobal.js. However,\n> it would be best practice to also provide a noConflict method to the\n> library for developers who would prefer to remove its footprint from the\n> global namespace and thus save from any potential library naming conflicts.\n> \n> Second, now when loading Kinetic without AMD it stores a reverence to the\n> library under window.returnExports (Global.js line 110). This needs to be\n> changed to root.Kinetic. The UMD spec did not intend for returnExports to\n> actually be used. Again, this is why var Kinetic should be contained\n> within the factory function scope referenced in Global.js line 112. It's\n> intended to be made global on this line if exports and define prove\n> undefined.\n> \n> Third, as is Kinetic is stored under root and so makes irrelevant the\n> wrapper functions on each Kinetic module. I assume you added these for the\n> custom build feature you offer on your site? If they are treated as\n> individual modules this is where you can truly leverage the power of AMD by\n> using a define function with each of those modules and requiring their\n> dependencies respectively.\n> \n> Thanks for all the work!\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/pull/47#issuecomment-10986235.\n. Just so I don't forget, could you open up a bug and copy and paste your comment?  This way, when I make changes, you'll now where to find them\n. P.S. I absolutely don't want to include the require.js library within KineticJS because its 12K (in order to leverage it for dependency management), so I definitely won't be using it internally.\n. This is a great change!  Thanks so much for fixing this, and for adding a nicely constructed unit test.\n\nCheers!\n. Have you tried the demo in it's own window? (click open in new window).  Sometimes the Flash ads can temporarily slow down page.\n\nWhat browser are you using?\n. ah yes.  Unfortunately, I've been battling with Chrome to get some performance issues fixed that were introduced a few months ago (via bug reports), but they are still having some issues.  In fact, I introduced the layer throttling logic specifically to fix Chrome's issue (or at least greatly improve it).  Even with the throttling in place, I've noticed that in some situations, the cursor can lag behind a shape when dragging and dropping in Chrome.  I may need to dig into it a bit deeper to see if there's something else can be done. (P.S. I bet if you try the demo in Firefox, Safari, and believe it or not IE9, you won't see the lagging).\n. tell me about it.  it's a real downer\n\nthe layer throttling logic is KineticJS specific logic that's applied to non animation situations, such as drag and drop.\n. One of their releases killed canvas performance, so if you try to draw something simple say 200 times per second, it starts to lag behind (this can occur with drag and drop because shapes are redrawn each time the mousemove event is fired).  To remedy the problem, I added layer throttling which reduces layer draws if they start exceeding a certain threshold.  This is why sometimes you may start to see lagging every now and then when using Chrome, in which case the throttling kicks in and the layer draws are dynamically reduced.\n. Has anyone else tried the KineticJS demos lately with v4?  v4 made tremendous performance improvements since v3\n. Thank you so much for looking into this!  And sorry I wasn't able to address this sooner, there's been a million things going on with KineticJS since this pull request.  Since the Animation logic has changed so drastically, I'll take another look at this soon and make sure that the race condition has been resolved.  thanks again!!\n. Hiya!  I actually have plans to add chaining in lots of different places, but it's been lower on my priority list at the moment.  stay tuned!\n. Nice!!  Thanks so much for this\n. remember, that since custom shapes have no point of reference, their position is relative to the top left corner of the canvas context.  To define its center, you need to draw the custom shape around the top left corner of the canvas context\n. fixed!  Thanks for catching this\n. Thanks!  I missed that one\n. ah, microsoft!  Why are they implementing non w3c standard events?  I almost don't want to add support for them just because they aren't standard.  Will have to put some thought into this :)\n. haha true.  Well it's on my todo list, so hopefully I'll add it in soon.  It probably won't be too much effort\n\nCheers!\n. great idea, I'll put some thought into this.\n. as a side note, don't forget that you can scale the entire stage.  In other words, I think it's fairly common for people to create fixed size stages, and then set the canvas width and height via `setWidth()` and `setHeight()`, and then scale the context via `setScale()` so that the stage filles up the screen.  This would be more predictable, and have better performance, then trying to calculate the relative heights, widths, offsets, nested translations, etc., for every shape on the stage\n. I've had several people bring this up, so maybe it would make more sense for me to create a tutorial on how to do this :)\n. somethings wonky with this pull request - it's showing that every line in Path was modified.  I'll commit the change.  Thanks!\n. So very very sorry - I haven't forgotten about this pull request, just put it on the back burner because filters were lower priority a couple months ago.  Will look at this soon!\n. Oh yea, I was planning on eventually having a dozen or so Filters.  Just haven't gotten around to getting them put together.  I also need to add support for passing parameters in, so there's a bit of work left to do.\n. Thanks for getting this started!  Since the Filter API changed a bit, I went ahead and reimplemented it from scratch.  Will still give you credit in the change log for getting this going.\n\nhttps://github.com/ericdrowell/KineticJS/commit/b76cc09742b6d7ea81596b810f1277d2cbe34be3\n\nThanks!!\n. Actually this is up to the developer.  Filters are used to modify the current image.  If a developer wants to store images before and after, they can save it as a variable.\n. would you mind trying out v4.0.0?  The filter logic was rewritten so the problem may be resolved.\n\nJust let me know!\n\nCheers\n. coming soon :)\n. nice catch!  I hadn't thought of that scenario\n. I like where you're going with this, but there are a couple of big changes that I'd like to make:\n\n1) I want to create a reusable rounded corner path method in the Rect shape that Image can leverage when doing the clipping.\n\n2) I want the rounded corners to be specified as an array rather than an object, like [12, 0, 10, 15], or [12, 10], or 12 for  all corners to be rounded with a 12px radius.\n. not yet, this is bit of a lower priority than other items.\n. I'll be adding all of the corner radius enhancements in the next release, v4.4.4.  Hopefully, I'll be able to find a clean, consistent solution to handle corner radius for rect, image, and Label, without adding overhead.  Thanks again for working on this with me!\n. This is super interesting!!!!  I'll take a look as soon as I get a chance\n. nice work!  This is working exactly as I had hoped.  merging soon :)\n. heya, I believe that this issue was fixed with this commit:\n\nhttps://github.com/ericdrowell/KineticJS/commit/8883e80bfe88cbe2c92c1de027eb4fd166294e6b\n. could you post a jsfiddle demo showing the behavior?  I need to see some code :)\n. Coming soon! :)\n. thanks for this!  I'll add this to my todo list\n\nCheers\n. Haven't forgotten about this thread - I'll try to get this fixed up for the next release.  Thanks!\n. After looking into this, I won't fix this after all.  add() and remove() do much more than just add and remove a node from a parent node.  add() updates the global id counter, updates the temp node array, updates the id and name hashes, and updates the pull nodes array.  This logic is intended purely for new nodes added to the stage.  remove() does similar things.  It's purpose it to completely remove a node from the stage.  Therefore, these methods should not be used to move a node from one container into another one.\n\nWhat exactly are you trying to do?\n. yep, KineticJS is event driven, which mean you have access to all attr changes.  e.g.\n\nshape.on('xChange yChange scaleChange rotationChange', function() {\n  // do something\n});\n. Isn't this the correct behavior?\n\nIf you click in the area that intersects the blue circle and the red circle, only the blue circle's event handler and the blue circle's layer's handler should be executed because the blue circle is on top of the red circle.  Node nesting in KineticJS was modeled after DOM nodes.  if you click on a div that's on top of another div, only the top div event handlers will be executed.\n\nThoughts?\n. thanks for this!  I'll take a look asap.\n\nAbout the Forums - I have quite a bit of threads to catch up on.  It's not dead, I'm just really behind :)\n\nAlso, planning on removing the bug forum and utilizing Github for bug tickets.\n\nCheers!\n. This issue was fixed awhile back, closing this ticket.  If it's still an issue, please reopen :)\n. interesting use case.  I'll add this to my todo list\n. Hiya.  In an effort to make the sprite sheets more flexible, I didn't want to assume that each sprite image would be the same size (the sprite tutorial on html5canvastutorials.com is a good example)  Also, some people implement sprite sheets radially, like for sprites that walk up, right, down, left, and diagonally.  I didn't want to force people to change their sprite sheets to use Kinetic.\n. This was done intentionally.  You're assuming that all sprite sheets are put together in the same way, which is incorrect.  \n\nI actually expect developers, currently, to write something similar to what you have done to handle the sprite sheets in whatever format that they have them.\n. no worries!  I've been thinking about possibly creating plugins like this for Sprite, but haven't gotten around to it yet :)\n. Update on this thread: based on Davonium's concept, I created a drawBufferFunc which enables devs to create custom hit detection functions.  Here's an example functional test:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/tests/js/functionalTests.js#L862\n. pls see comment with Layer.js pull request\n. what might make more sense is for a node to have a toJSON method and load() method (this will take care of the stage, layers, groups, and shapes).  I'll look into this as soon as I can.  Thanks for putting thought into this!!!!\n\nEric\n. fixed :)\n. np :)\n\nv4.0.0 had huge architectural changes, and unfortunately a few nasty bugs like this one snuck past my unit tests.  v4.0.1 is shaping up to be super solid\n. fixed as of v4.0.2\n. you read my mind.  I don't particularly like how multiple stages are currently handled either, and haven't put too much thought into it since as of yet it's been lower on my priority list.  Now that Kinetic is looking pretty solid, I'd like to relook into this.\n\nWhat if you could manage your stages like this:\n\nKinetic.remove(stage);\n. added it to the top of my todo list here:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Todo-List\n\nCheers!\n. This should be working as of v4.3.1 via the destroy() method which should work with stages\n\nstage.destroy();\n\nIf you still run into issues, please reopen this ticket :)\n. have you tried moving the image to its own layer when dragging and dropping?  This greatly improves performance.  Here's an example:\n\nhttp://www.html5canvastutorials.com/labs/html5-canvas-kineticjs-drag-and-drop-stress-test-with-1000-shapes/\n. but to your point, I'll look into the FF issue as soon as I get a chance.\n. v4.0.5 is already looking pretty heavy, so this issue will probably be addressed with a later version (mostly because it seems to be a FF bug)\n. Although there have been a lot of performance improvements made with drag and drop, this issue is ultimately dependent on the FF Canvas API implementation.  Dragging and dropping a shape filled with a pattern actually performed pretty well for me in FF.\n. Currently I have no plans to support IE8 - this would involve creating an SVG renderer.  If KineticJS becomes popular enough, and there's a huge demand for older browser support, may be forced to support SVG in the future.  Hopefully though, we won't have to do that :)\n. Sorry for the late response!  Seriously.\n\nI think the correct fix for this is to combine the touchPos and mousePos attributes into a single one, pointerPos.  I'll do that today.\n. That should fix it up.  Let me know if this doesn't solve your problem - assuming that you're still working with KineticJS a year later ;)\n. I'm afraid that enabling devs to specify image sources in addition to image objects will end up causing more confusion - If people are getting confused about the async nature of loading images (this is like JavaScript 101), then they will probably also not understand why images are being drawn out of order when using src. \n\nfor example, if someone draws a square, an image, and then a triangle, they will end up seeing a square, triangle, and then image.  I'm pretty sure that this would be more confusing.\n\nI don't think the library should decide for the developer when an image should be rendered.  The developer should control that.\n\nThoughts?\n. Agreed, if anything, we could add a loader utility in the Utilities directory.  I had considered doing that before, but wanted to keep the library as light weight as possible so I didn't add it in.  But, now that I have plans to create a configurator which will custom builds which just includes the modules that are needed, it may make sense to go ahead and provide the loader, and devs can use it if they want\n. Definitely agree that we need a way to specify which canvas to draw onto for performance reasons - willl look closer at this one soon\n. Haven't forgotten about this thread, and still realize it's very important :)\n\nHopefully I'll be able to put more thought into this and have a solution by v4.0.5\n. Shoot, I just realized that this is technically already supported.  Just set the listening property to false like this:\n\nrect.setListening(false);\n\nNode's that aren't listening to events are not drawn onto the buffer canvas.  Is this an acceptable solution?  \n\nIn regards to drag and drop - you're right, I could auto stop listening for events while dragging, and then reable listening when drag ends.\n. btw I haven't forgotten about this pull request.  I'm currently rewriting the setAttrs logic in Node to improve the OO design there as.  Once that's set up and working, I plan on making similar changes to the ones that you've suggested here.\n\nCheers,\n\nEric\n. Thanks again Davonium, I think overtime most of your suggestions have been accounted for.  Improving the OO design also really helped modularization when it came to supporting the configurator:\n\nhttp://www.kineticjs.com/configurator.php\n\nClosing this pull request - if you find more OO improvements, would you mind submitting a new request?  Thanks!\n. nice work.  I like how the children logic resides in the container rather than inside the clone() method in Node.  very clean\n. heya!  Yea I know that it works, but the thing is, I was planning on setting something up that would work for all methods, not just a select few.  e.g.\n\nshapes.setX(5);\nnodes.transitionTo(...);\n\netc.  I'll keep thinking on this\n. Heya!  This is what I was sort of looking for:\n\nhttps://github.com/ericdrowell/KineticJS/commit/8d6103d1e052196ae8958f4fe91c1116a1555e39\n\nI wanted the extended Array to be a class so that the methods are space efficient, and I wanted all of the node methods to be attached to the prototype.  I'll still give you props in the change log for getting the ball rolling.\n\nCheers!\n. can you be more specific?  I'm going to guess that you were referring to mousemove specifically.  There have been huge performance improvements in the past 4 months, so I would recommend downloading the most current version of KineticJS and trying again.  If you still have issues, please reopen this ticket :)\n. I think that this issue has been resolved with some of the work I did related to layer hide/show.  Could you verify for me if the problem is fixed, or if it's still an issue?\n\nThanks!\n. yep you're right, it's still an issue\n. Thanks Adam!  I made a small change to your logic, but will stil give you credit in the change log.  \n\nThanks again!\n. @Davonium ah yes, must have missed that note.  You brought up a good point, and it was something I had thought about but forgot to act on :)\n\nIt might be cleaner to hide and show the buffer canvas as well\n. also, why are we needing to hide the actual canvas element via display: none?  KineticJS automatically clears the canvas in preparation for the next drawing.  I can't think of a reason why we would also have to remove the canvas element from the document flow with display:none\n. I see where you're going.  Another issue though is that it breaks the pattern of show hide for other node types.  For example, to hide a shape, you would do:\n\nshape.hide();\nlayer.draw();\n\nbut to hide a layer, you would just do\n\nlayer.hide();\n\nbut, I do really like the idea of having a super high performance mechanism for hiding an entire layer, could be really useful.  I'll take a second look at this later tonight and will probably merge in your changes, thanks!\n. Thanks again for suggesting this change!  I ended up moving the layer specific logic to the Layer class to decouple the Layer and Node modules.  Here's the change:\n\nhttps://github.com/ericdrowell/KineticJS/commit/d0a1b2870e9975aa226dc78b6938450c0d067bf2\n\nStill gave you credit in the change log.  Keep on rockin!\n. not quite what I had in mind.  I'll double check that the getIntersections method is performing well - not sure how it would be slow just for the mousewheel event.  Thanks!\n. will do! Thanks\n. fixed, thanks!\n. I'll put together a tutorial that shows how to extend KineticJS objects and make sure that it's working as expected.  stay tuned!\n. +1 that's absolutely correct\n. Excellent!  I had intended on making those exact changes once I was sure that this was the approach I wanted to take (using apply())\n\nThanks for enhancing the each method as well\n\nCheers\n. What is your Twitter handle btw?  I need to be giving you some major props\n. agh, wish I had fixed this earlier.  I'm adding it to the v4.3.4 release right now.\n. fixed!  Thanks for reporting.  The change will be in the 4.4.0 release this weekend.\n. Ah, I see what you mean.  I actually misunderstood my own code!  After taking a second look at get(), I realized that it was in dire need of refactoring (the code paths were pretty odd).  Just checked in that change.  Now it contains specific code blocks for node type selectors, id selectors, and name selectors.\n. thanks for rocking all these fixes David!  I'm working on some new cool KineticJS t-shirt designs -I need to send one to you and Jason soon :)\n. This pull request is a bit tricky because there's a lot of stuff that's already been added in terms of OO design improvements.  I do like the changes made to get(), and also glad to see the new ability to select by node type.  May end up cherry picking some of the changes. \n. hiya!  This is on my todo list here:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Todo-List\n\nWill be fixed with the next release :)\n\nCheers,\n\nEric\n. fixed!  https://github.com/ericdrowell/KineticJS/commit/3f8801a4941ea8344845e5b1b6402eb2e3faab38\n. @BlackScorp Thanks for the help!\n. @0xE1 actually it's the same thing.  To hook into before/after redraw for shapes, just do this:\n\nshape.getLayer().beforeDraw(...);\n\nin order to redraw a shape, it's entire layer has to be redrawn (this is why KineticJS enables you to create user defined layers so that you can group shapes intelligently)\n. This issue should be fixed because KineticJS now automatically moves shapes to a temporary top layer when dragging.  Try downloading the latest version and see if you're still having this issue.  If you are, please reopen this ticket :)\n. all points attrs now can be set with an array of integers, an array of arrays which contain two elements each, or an array of point objects:\n\nhttp://kineticjs.com/docs/symbols/Kinetic.Polygon.php#getPoints\n. Interesting stuff.  We can leave this issue open so that I can come back to it later\n. Following up with this thread - This is no longer an issue because remove() now removes a Node from the node tree without destroying it as of v4.3.1:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n\nto destroy a node, you now use destroy();\n. Thank you so much for this!  You rock.  Nice job on the thorough unit tests.\n. whoops you're right, thanks\n. Heya, KineticJS supports Animation key frames and 16 different kinds of Transitions right out of the box.\n\ntransitions: http://www.html5canvastutorials.com/kineticjs/html5-canvas-linear-transition-tutorial-with-kineticjs/\n\nanimation: http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-animate-position-tutorial/\n. drag and drop bounds has been rewritten as of v4.0.2:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n\nWhen in doubt, also don't forget to checkout the Docs here:\n\nhttp://www.kineticjs.com/docs/symbols/Kinetic.php\n\nand the tutorials.  Here is the tutorial you're looking for:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-bounds-tutorial-with-kineticjs/\n. KineticJS is still evolving fairly rapidly so always check the change log when upgrading :)\n. Hi there!  KineticJS and GreenSock have recently partnered up, meaning that all of the transition issues should be resolved.  Check out the tutorials again for an update on the API.\n\nThanks!\n. don't do that!  I may need to hardcode styles inside the canvas tags so that people's canvas styles don't interfere with the stage DOM.\n\nThis problem isn't unique to KineticJS, but any widget from any library.  If users override widget CSS styling, the widget UI may be compromised. \n. On second thought, I'll go ahead and hardcode positional styles (e.g. margins, padding, display, position, etc) and hook those changes into this issue.\n\nThanks!\n. so new canvases will now be have inline position, width, height, margin, border, padding, and background defaults.  Anything other styles we should worry about?\n. fixed:\n\nhttps://github.com/ericdrowell/KineticJS/commit/ca0d3790b287f3dec2a76fd3a3c948d37a12bf3f\n. sorry, the framework has been evolving rapidly since it began :)\n\nFortunately, KineticJS is now reaching a mature state, so I don't foresee any new radical API changes.  And at least, if there are, there's a higher chance now that I will add backwards compatibility. \n. Still need to add support for this - I would like for us to be able to pass in an array of integers as well.  Stay tuned.\n. touching base - this is still on my todo list :)\n. Kinetic Transitions have been deprecated in favor of Tweens.  Tweens now also support points transitions.  \n. Interesting thread!  Thoughts:\n\n1) okay, the buffer canvas.  Every shape is assigned a unique color code for the purpose of _really_ fast hit detection.  When shapes are antialiased around the edges of a shape, the alpha component of the RGBA color is not equal to 1, and therefore is ignored by the hit detection algorithm.  I don't personally see this as a bug, because this case only occurs within a fraction of a pixel around the edges of a shape.\n\n2) canvas border used in Html5CanvasTutorials.com - very interesting!  This whole time, I had no idea that border sizes were offsetting the hit detection.  Will definitely look into this.\n. This isn't really an issue any more - The Kinetic.Text hit graph now renders a rectangle in place of the text to make the hit detection easier.  Also, the Kinetic tutorials have removed the one pixel border so there shouldn't be an issue there anymore.\n\nAlso, since KineticJS is building the canvas elements dynamically, we shouldn't be modifying the styles of those elements.\n. Hiya!  Will review this as soon as I get a chance.  Thanks for the pull request!\n. Thanks for getting this started!  I ended up adding all transformation attrs to the pattern fill object:\n\nhttps://github.com/ericdrowell/KineticJS/commit/01c5f4f7ca4e4ca03f497f7908b07e11885bb86e\n. interesting, I'll look into this one.  Thanks for reporting!\n. yes, if you have a need to stop event propagation after the Kinetic container element (the one that you pass into the stage) then you need to bind a listener to your container that uses \n\nevent.cancelBubble = true\n\nor you could use the jQuery stopPropagation method as well.\n. hiya!  I've seen that behavior too, and unfortunately that's a side effect of using the requestAnimationFrame that's build into the browser.  The browser uses a dynamic frame rate, and sometimes I've noticed that animations can be glitchy because of this.  I'm currently investing a custom request animation frame solution that may remedy this problem.  Stay tuned!\n. The issue is related to the iOS requestAnimationFrame implementation. Still investigating :)\n\nSent from my iPhone\n\nOn Oct 30, 2012, at 10:55 AM, Chris Jennison notifications@github.com wrote:\n\n> Is there any update on the bug fix, Eric?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. I did identify and fix a major issue with transitions that greatly improves performance for multiple transitions, but I'm still looking into improving it even more, possibly with a custom implementation of requestAnimationFrame.  maybe you could help me take a look :)\n. KineticJS currently uses the requestAnimFrame shim.  Fixed framerates will crash mobile devices.\n. Heya - I made several big animation and transition performance improvements with v4.0.5.  Could you give it a whirl and see if this resolves the problem?\n\nCheers,\n\nEric\n. There's been a ton more perf enhancements since v4.0.x (we are now on v.4.5.0), plus KineticJS is using the GreenSock TweenLite library which is very fast as well.  Closing this ticket for now.\n. interesting, you're right this looks like a bug.  After looking through the clone unit tests, I noticed that the tests are instantiating objects that use a shadow object, which has an offset property, so my guess is that if you include an empty shadow object like this:\n\nvar rect = new Rect({shadow:{}});\n\nthat this may provide a work around for now.  I'll have this fixed in the next release, v4.0.5\n\nThanks!!!\n. I don't think I have unit tests that clone sprites - ill look into that. Thanks!!\n\nSent from my iPhone\n\nOn Oct 30, 2012, at 9:50 AM, Wazabii notifications@github.com wrote:\n\n> Hi again.. Not sure if this is a bug or not. Since I stick with kinetic 4.0.1, I've been trying to clone a sprite object as well. But the result: cloned object seems to be a shape rather than a sprite. Is it suppose to be like that?\n> \n> Thanks\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. sorry for the pain guys!  Yes, it will be fixed by v4.0.5\n. I created a jsfiddle that creates a rectangle and clones it without any issues (not using shadows or offsets).  Check it out:\n\nhttp://jsfiddle.net/hz77b/\n\nAm I missing something?  If so, could you modify the jsfiddle to break the clone method?\n. P.S. you're right about Sprite shapes (unrelated to the first bug you mentioned), the Sprites class wasn't defining the shapeType which meant that the clone method couldn't figure out that it was a Sprite.  this issue will be fixed and added to the upcoming release - thanks!!\n. @macl this sounds like the expected behavior.  The whole point of Shape classes was to provide draw functions for you.  Doesn't seem to make sense to overwrite them.  If there are particular methods in a Shape class that you'd like to reuse, you could create a new class and reference those methods.  A good example is the TextPath shape which references methods from Text and Path.\n. follow up with this thread - Sprite cloning has been fixed as of v4.0.5\n. okay guys, there's a lot going on with this ticket, and since a lot of these issues have been resolved, I'm closing this one for now.  If you're still having problems with clone(), please open up a new ticket so it that can be tracked, and also provide a jsfiddle demonstrating the problem.  I've been unable to reproduce the error mentioned in the first comment, or a black transparent image.  I provided a jsfiddle in one of my earlier comments that demonstrates cloning a node without a shadow or offset.\n\nThanks!\n. @macl sure, but the drawFunc attr for Shapes was never intended to be editable (if this were Java, it would have been a private attribute)\n\nFunny thing is, the Rect shape actually doesn't even have any methods that you could reuse:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/shapes/Rect.js\n\nIt really would make more sense to create a custom shape for what you're doing.  Also, if you want to make a hole inside of something, you should look into leveraging the winding rule, rather than xor.\n. I'll probably go ahead and add logic to each Shape class to make sure it doesn't overwrite a user defined drawFunc though, because several other people have had similar problems.\n\nCheers!\n. use 'dragend'.  Here's a list of the supported events:\n\nhttps://github.com/ericdrowell/KineticJS/wiki\n. np!  no, the drag end event is fired immediately after a redraw:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/DragAndDrop.js#L51\n\nso if you want to do something and then draw the layer again on drag end, you'll have to use draw();\n. Yes, this is an issue with older versions of android:\n\nhttp://www.html5gamedevs.com/topic/114-canvasclearrect-bug-in-android-stock-browser/\n\nthe simplest work around is to create your stage and layer, and then add the layer to the stage after a timeout (50ms worked for me)\n. This is the correct behavior since a dbl click is defined by two clicks... You just need to add logic in your event handlers to do whatever is is you're trying to do.  For example, you could add a timer in your click handler that waits 300ms before doing whatever it's supposed to do, and cancel that action if a double click occurs.\n. lines don't support cornerRadius, although they do support lineJoin: 'round'.  This will produce rounded connections at steep angles.  cornerRadius is just for Kinetic.Rect, and will eventually be used with Images as well.  Here's the line docs:\n\nhttp://www.kineticjs.com/docs/symbols/Kinetic.Line.php\n. if you want dramatic curves where the lines connect, you might consider creating an SVG path shape instead.  Here's an example of that:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-path-tutorial/\n. Thanks for the pull request, and also thanks Davonium for helping me look at these :)\n. Currently, I'm not planning on supporting composite operations via an API, although I may later.  Closing this for now, but I may come back to it.  Thanks for this though!\n. yikes, sounds like a bug.  I'll add this to my todo list. \n\nThanks!\n. Actually, it looks like the setDrawFunc is working correctly.  Here's a jsfiddle that alters a Rect draw function:\n\nhttp://jsfiddle.net/wJ36T/\n\nIn regards to extending Line - I don't think it quite makes sense to enable passing drawing functions into the Line constructor, since the whole purpose of Shape classes is to have a drawing function predefined.  If you want to reuse methods of Line, you can extend the methods instead of the whole class (this pattern is very common inside the KineticJS codebase).  Here's an example of the TextPath shape extending a method from Text:\n\n```\nsetText: function(text) {\n    Kinetic.Text.prototype.setText.call(this, text);\n},\n```\n. This is the correct behavior.  remember that transformations are applied after a shape is drawn.  We wouldn't want the height and width to take into account scale, or else scaling a node would have no effect.\n\nI would suggest either not scaling the node, and placing it in a different layer that's not scaled, or if it's absolutely necessary, you could include the scale with your setWidth() and setHeigh() usage.  i.e.\n\nnode.setWidth(100 / node.getScale().x);\n. this is very, very interesting.  The idea of having separate scene and buffer draw functions is very compelling... Might even make sense for every default shape to include a sceneDraw and bufferDraw method.  Devs could then also override the bufferDraw method with something customized if desired.  Such a change would also fit in nicely with the request to not render the buffer graph during animations.  I'll work on this for the next release :)\n\nP.S. thanks so much for putting so much thought into this!  I'm inspired\n. follow up with this thread - I've done a ton of work in regards to graph drawing logic, including the ability to define custom hit drawing functions via the drawHitFunc attr.  In addition, the drawing performance in general has been greatly improved, because there are now three different drawing functions - scene, hit, and buffer graph drawing functions.  This enables each draw function to be optimized for its purpose.  I'll have tutorials up within a week or so.\n. super interesting.  I've also been thinking about applying the winding rule to do stuff like this.  I currently have a todo item to create inner shadows, and I think using the winding rule would be an excellent approach.  The only problem, though, is that if users can create inner shadows for rectangles, they would also expect them for all other shapes.  It sounds like it would be quite a task to construct winding drawing procedures for all shapes.  And how would this work for images and sprites?  What do you think?\n. I'm not entirely convinced that every Kinetic shape should be able to support the winding rule to cut holes in them.  Wouldn't it make more sense to create shape plugins?  I.e. you could create a doughnut shape, Kinetic.Doughnut, which people download.  I intend to eventually provide a gallery of 3rd party plugins that people can download.\n\nThoughts? \n. Thanks!\n. I've had several requests to provide some sort of clipping functionality that would do exactly what you're asking for - I'll add it to my todo list :)\n\nThanks!\n. It'll be in the next release:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n\n\"container clipping function\"\n. Follow up - Clipping regions are now fully supported as of v4.4.0\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log#440-mar-26-2013\n. I'm actually not able to replicate this. Check out this jsfiddle:\n\nhttp://jsfiddle.net/KdM55/\n\nI wrapped a console.warn() with two alerts so that I can detect if perhaps IE9 fails when executing console.warn() if the console window isn't open. Not able to get a failure.\n\nAlso, console.warn() is working correctly for me when the console window is open as well.\n\nDoes the jsfiddle work for you?\n. AH that's the problem.  IE9 running on Windows 7 64 bit is notorious for having problems :)\n\nI'll go ahead and make this change, thank you!\n. I wasn't able to auto merge the pull request because of some changes made to the dist files, so I went and just added the window.console part locally and committed it here:\n\nhttps://github.com/ericdrowell/KineticJS/commit/b3e7e26248ec3a2d86653bf567aaa92c2b3523ac\n\nI'll still give you credit for the fix in the changelog though :)\n\nP.S., if you find any other bugs in IE9 on Windows7 64bit please let me know because I don't have that environment for testing.  Thanks!\n. dang IE10.  did you test on IE9, Safari, Firefox, Chrome, iOS, and Android?\n. might be a bug with IE10 because the getBoundingClientRect JS method is supposed to take into account all of the CSS styling of itself and ancestor nodes\n. haven't forgotten about this, will get to it asap :)\n. Hey Jason, closing this pull request for now because I haven't had anyone else mentioning this - I'll keep track of it though in my todo list.  I'm still waiting for MS to send me some test devices ;)\n. would you mind testing this in FF, Safari, and iOS if possible?  I'd like to pull in the change, but I'm currently unable to test on windows devices.  If you give me the thumbs up, I can just pull it in.\n. ah okay.  When I get a chance, I'll just pull it in, and if it works on all the devices that I'm able to test on, I'll commit it back to the repo\n. yes, you can use a clipping region, and then convert to the node to an image with toImage().  Here's a tutorial on clipping\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-clipping-functions-with-kineticjs/\n\nI would suggest, however, to use an Ellipse shape with an image fill.  This will produce smoother edges.  Tutorial on fills here:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/\n. have to agree wtih @lazerblade01 on this one - generally, in JavaScript, if you want to delete an object (such as a KineticJS Shape), it's not necessary to null out, or delete all of the object's properties.  Instead, you just need to remove all references to it, and the JavaScript garbage collector will do the rest.\n. Actually, here's another issue related to this one that makes a great point:\n\nhttps://github.com/ericdrowell/KineticJS/issues/29\n\nI'll spend a little time re-investigating this one.  Thanks!\n. nice, thanks!!\n. update on this thread: you can now create custom hit detection functions.  Here's an example functional test:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/tests/js/functionalTests.js#L862\n\nThis is pretty powerful because it gives us unlimited flexibility in terms of how standard shapes, or custom shapes, are detectable.  Furthermore, it also enables us to create high performance hit detection functions. \n. BlackScorp, did you try upgrading ruby?\n. Exactly.  Was going to mention that actually, all shapes support borders, including images, via the stroke property.  Here's a tutorial:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-set-stroke-with-kineticjs/\n. I'll have to think on this one - not sure if I want to repurpose the Circle shape to support wedge shapes via an angle property.  From a code line count point of view, it makes sense.  From a pure OO point of view, circles aren't defined by an angle property.  At the moment I'm kind of leaning towards creating a Kinetic.Wedge shape instead.  Thoughts?\n. A full circle makes sense, that's what I would expect.  I'm also planning on making an Arc shape, and a Ring Shape, with a similar relationship between Wedge and Circle\n. Ring shape will be coming soon.  Closing this ticket for now\n. great catch!  Not sure how this was missed\n. oh I see how it was missed, the buffer canvas is immediately resized afterwards with _resizeDOM()\n. fixed it up - thanks!\n\nhttps://github.com/ericdrowell/KineticJS/commit/908fa24b8e9b217ed6bbd8d75cec5ac04323f222\n. Actually, KineticJS used to throttle drag and drop, but this created a laggy drag and drop experience which most people didn't like.  We want the drag and drop to be as snappy as possible.\n\nI don't think the issue is necessarily the fact that drag and drop operations trigger redraws 60 frames per second, but that the getIntersections() algorithm should be revisisted.\n\nIf I were personally in your shoes, I would throttle the use of getIntersections().  In other words, on my dragmove handler, I would trigger a getintersections at about 10 frames per second or so as chris has suggested.\n. shoot didn't mean to close this one because getIntersections does need to be worked on.\n\nTo explain a bit further, I basically did a trade.  KineticJS hit detections are now nearly instantaneously fast.  The new algorithm, unfortunately, makes the getIntersections() method a bit slower.  Since the 99% use case is regular hit detection, this is a good trade off though.\n. okay, to be clear, there are two ways to get an intersected shape based on mouse position:\n\n1) getIntersection() - preferred\n2) getIntersections() - very slow, and should be used for special situations\n\nthe getIntersection() method is blazingly fast, and returns an object containing information about the intersection point, such as a reference to a KineticJS shape if one is there, or pixel color information.  \n\nthe getIntersections() method does the same thing, except that it iterates through and redraws every single node in the stage in order to return a collection of intersections that may have been layered on top of eachother. \n\n99 times out of a 100, you're probably just interested in the visible intersected node which is at the top of nodes beneath it.\n\nI've actually considered removing the getIntersections() method entirely, but haven't because there are some special situations when you actually do need a collection of intersections.  At this time, I haven't been able to find a way to speed up getIntersections, although I'll keep looking into it.\n. Closing this ticket for now.\n. is it possible you could set up a jsfiddle demonstrating the problem?  It's a bit hard to debug something like this without seeing it in action.\n\nThanks!\n. @eduardo ditto, looks good to me in latests version of Chrome.  What OS are you using?  32bit 64bit?\n. classic JavaScript closure problem.\n\nhttp://stackoverflow.com/questions/111102/how-do-javascript-closures-work\n\nhttp://www.mennovanslooten.nl/blog/post/62\n. drawFunc should never add or remove nodes.  Its purpose is solely for rendering.  Try hooking into an attr event, or a draw event, to remove a shape.  Also, tons of performance improvements have been made since these versions, so I'd recommend trying out the latest release\n. yep that's right, you cannot put layers inside layers.  If you want to layer things inside of a layer, you need to use groups.  Layers are like groups, except they are tied to a physical canvas element for rendering.  Be sure and read over the how it works page here:\n\nhttps://github.com/ericdrowell/KineticJS/wiki\n\nHere's an example Node hierarchy:\n\n```\n    /*\n     *        Stage(0)\n     *          |\n     *        Layer(1)\n     *          |\n     *    +-----+-----+\n     *    |           |\n     *   G1(2)       G2(3)\n     *    |           |\n     *    +       +---+---+\n     *    |       |       |\n     *   S1(4)   G3(5)  G4(6)\n     *            |\n     *            +\n     *            |\n     *           S2(7)\n     */\n```\n\nG stands for Group, and S stands for Shape.  I'll try to make this more clear as soon as possible, thanks!\n. np!\n. A KineticJS shape can only have one fill and one stroke.  When creating more complex nodes, you need to use groups.  Here's an example of that:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-complex-shapes-using-groups-with-kineticjs/\n. oh snap, okay I'll take a second look.  Thanks!\n. Follow up: Just checked your code with the latest version of KineticJS, and it's working correctly:\n\nhttp://jsfiddle.net/JrCbx/\n\nMust have been fixed somewhere a long the way :)\n. Haven't forgotten about this - filters have been somewhat of a lower priority lately so I haven't gotten to this.  Hang in there :)\n. Thanks again for this!  I made your change here:\n\nhttps://github.com/ericdrowell/KineticJS/commit/0c38e3cf391e80195af29bc2b75e3e967748c62b\n. planning on using Rob's excellent spline tutorial to enable curve smoothing for the Line shape\n\nhttp://scaledinnovation.com/analytics/splines/aboutSplines.html\n\nDo you think this will be sufficient?\n. Agree very much with you there.  Will keep doing my best to keep up with documentation.  Thanks!\n. Update on this thread:\n\n1) yes, the documentation has been updated\n2) The Spline shape has been created and works great.  Here's a tutorial:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-spline-tutorial/\n\n3) The spline shape is great for creating  curved shapes based on points, but sometimes people don't actually want a spline, they want rounded corner connections (as was the original reason for this thread).  After a bit more thought, I think it makes sense to keep the Spline shape as is, and also add cornerRadius functionality to Line, afterall.  macfreak, I'll take another look at the work you did some 9 months ago.\n\nv4.6.1 is purely for bug fixes at the moment, so I'll try to get this feature added into v4.6.2\n\nReopening the ticket.\n. This will get into the code base soon.  I'm actually now planning on supporting rounded corners for all shapes, including rect, polygon, star, regularPolygon, line, etc.  This will most likely make it to v4.7.1 or 4.7.2 depending on other priorities (I'm currently working on splitting the Canvas class into a Canvas and Context class, adding context tracing, fixing some major bugs, and migrating unit tests over to Mocha, which will be in v4.7.0)\n. update on this thread.  All shapes will support rounded corners with v4.8.0.  This will definitely make it into that release.  Stay tuned.\n. This is the expected behavior.  Drag and drop modifies the translation of the entire shape, not the position of the points relative to the translation.  You can get the translation with the getPosition(), getX(), or getY() methods.\n. getPosition() works correctly for me after dragging a line (it returns non-zero result).  Can you setup a jsfiddle showing the behavior?\n. clicking on a shape inside of a group, which is inside of a group, which is inside of a layer, which is inside of the stage, works for me:\n\nhttp://jsfiddle.net/8gAW4/\n\nclosing this ticket.\n. this is definitely an event bubbling issue.  I'll look into this as soon as I can.\n. ah okay.  the stage is using evt.preventDefault() to prevent the page from scrolling when you try to drag and drop.  Come to think of it though, it doesn't make much sense to use evt.preventDefault() everytime (i.e. for cases when you are not trying to drag and drop).  I'll look into this\n. This is possible today.  just make the whole stage draggable.  This enables panning.  Here's a tutorial:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-the-stage-with-kineticjs/\n. hm, isn't that what scrolling is?  when you scroll downwards, you're panning the stage upwards, right?  If you're looking to implement scrollbars, here's a lab that shows a way to accomplish this:\n\nhttp://www.html5canvastutorials.com/labs/html5-canvas-simple-scrollbars-with-kineticjs/\n. This has been fixed and will be included in v4.5.5.  Please see this issue:\n\nhttps://github.com/ericdrowell/KineticJS/pull/510\n. I believe this issue is now resolved - please try out the latest version of KineticJS and let me know if it's fixed for you.  The shadow properties have been flattened, and now look like this:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shadows/\n. eek!  That's very unusual.  I'll fix this today and release a hot fix, v4.1.1.  Thanks everyone for the heads up\n. SO sorry for the inconvenience guys.  Cross browser issues have virtually been non existent lately, so I didn't test FF or IE.  The problem was the '#' symbol :)\n\nReleased v4.1.1 which you can get on the homepage now: http://kineticjs.com/\n. that sounds very unusual.  Can you provide a jsfiddle demo, and also the OS and browser that you're using?\n. Strange, your demo works great for me on Windows 7 Chrome as well.  Are you using 64bit by chance?  It's notorious for having browser related problems.\n\nAlso, you should try out the latest version, v4.1.1, which greatly improved drag and drop performance by skipping the hit graph draws.\n\nLet me know what you find!\n. hi there!  interesting - I suppose IE9 is really inefficient about obtaining text metrics (no surprise).  Okay, to fix this, I need to cache the text metrics so that it doesn't have to be read over and over (probably should have done that anyways).  I'll see what I can do to get this fixed for the next release, and if not, it will definitely be in the following release.  sorry for the frustration!!\n. Thanks for the kind words!  So with v4.3.3, I made several Text performance enhancements which should help speed things up.  At the end of the day, the root problem is that the fillText() method of the HTML5 Canvas API is just darn slow.  This is a browser implementation issue, not a KineticJS one.  However, KineticJS can come to the rescue with node caching.  Check out this tutorial which runs pretty smoothly by caching text shapes:\n\nhttp://www.html5canvastutorials.com/labs/html5-canvas-wheel-of-fortune/\n. hi I need more info.  Can you post a jsfiddle demonstrating the behavior?  Thanks!\n. yea, looks like a context problem inside the on() method.  I'll add this to my todo list.  Thanks!!\n. fixed!  The problem was that the drag and drop module still had a reference to the node that was removed which caused things to blow (in other words, this problem only occurred if your shape was draggable:true).  Here's the change:\n\nhttps://github.com/ericdrowell/KineticJS/commit/5e16b3d7d0538dce04d35a91acebc288918be51c\n. it fixed the jsfiddle mentioned in the issue:\n\nhttp://jsfiddle.net/9YfSc/\n\nif there are other conditions where the problem occurs, can you create a new ticket?\n. try this: \n- resize the stage with setSize()\n- scale the stage\n- redraw\n- get the stage image with toImage() or toDataURL(),\n- set the stage size back with setSize()\n- scale the stage back\n- redraw\n. Hiya, unfortunately there's nothing KineticJS can do about this - KineticJS is using the requestAnimationFrame JS method, which means that the animation rendering is up to the browser implementation.\n. not sure where you're going with this, KineticJS already supports on and off, with those features.  Have you checked out the events tutorials?\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-path-mouseover/\n\nAlso, why do you feel that it's necessary to create an Observer and Mediator class?\n\nKineticJS already supports the Observer pattern because devs have access to attr change events, and custom events\n. actually that doesn't quite make sense... there should be no reason to pass in a handler to the off method.  a namespace, or event type should be enough\n. currently, you can only directly use on() and off() on an array of nodes.  You can also use the apply() method to apply a method to an array of nodes:\n\nhttp://kineticjs.com/docs/symbols/Kinetic.Collection.php\n\nIt would be a big overhead for Kinetic.Collection to support all Node methods directly.  I would be willing to do it if there's enough of a demand, but currently there are much bigger fish to fry :)\n. ctx.stroke() will not work.  You must use canvas.stroke(this) in order for hit detection to work property.  The canvas variable points to both the scene graph renderer, and the hit graph renderer. \n\nIf you modify the tutorial with canvas.stroke(this), events are working correctly\n. following up with this thread - this issue has been fixed as of v4.5.5\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log#455-july-28-2013\n. Hiya!  most of those errors are happening because you need to run the unit test suite on a web server in order for image data related stuff to pass due to security constraints.  Thanks for bringing this up, just realized that I need to mention that they should be ran on a web server :)\n\nas for the \"Problem with node and shape type selector\" error, that definitely shouldn't be happening, it's passing for me locally.  are you running the latest source files?  Have you made any changes to the selector logic?\n. OH.  got it.  I just checked the test, which is line 632 of the containerTests.js file, and test() should be warn() so that the failed dataUrl comparison doesn't block the rest of the tests (should be a soft test).  I'll fix this and check it in right now\n. fixed!\n\nhttps://github.com/ericdrowell/KineticJS/commit/5705d909e59ee802a9f1c5ed937db9d81f4ead95\n\nAlso added more README info\n. sorry for the confusion, I cleaned up the Testing instructions here: https://github.com/ericdrowell/KineticJS\n. ah yes, I've seen this before but haven't gotten to it yet.  There's definitely some weirdness that goes on when you change tabs.  The problem isn't actually KineticJS, per say, but with the requestAnimationFrame implementation of the browser.  I do certainly need to add something in that prevents this from happening, perhaps some logic that detects if a new tab was activated, and then halt the animation until focus is returned.  Not sure if this is even possible though.\n. Thanks for this!  Will take a look as soon as possible\n. Closing this pull request because I'm planning on rewriting how touch events work soon (in order to cleanly support multi touch + gestures).  Thanks for looking into this!!\n. I remember really struggling with this, because each browser places the text in a slightly different position.  I remember that I had to use vertical align center to best normalize the inconsistent placements.  Have you tested your fix in Chrome, Firefox, Safari, and IE9?\n\nIn Chrome, it's actually placed in the correct spot.\n. Hi again!  Unfortunately, each browser positions text slightly differently based on different configurations (Canvas API issue, not KineticJS).  I remember that I had spent a lot of time trying to figure out the best way to get all of the text to line up consistently across all browsers, and I ened up with the vertical align middle style as part of the solution.  \n\nI'm closing this ticket for now, but will keep it in mind.  Whenever I get the time, I'd like to reinvestigate text positioning across all browsers to see if things have changed.\n\nThanks again!\n. unfortunately, Windows 7 does not support touchstart, touchmove, and touchend (like every other browser that supports touch).  This is currently on my todo list, but haven't had enough demand for it to increase the priority.\n. oh actually there were was a slight problem that I fixed here:\n\nhttps://github.com/ericdrowell/KineticJS/commit/df63558686c3b7ab65f427c5749534e80b6df253\nhttps://github.com/ericdrowell/KineticJS/commit/bec7f5450b45d429dd0e3999b9e92f946902f9d1\n\n1) the frame width and height should override the shape level width and height, not the other way around\n. in the end, decided not to take the change after all.  The frame width and height should be defined by the width and height properties in the frame object, not the shape level width and height.  In the context of sprites, the shape level width and height have no meaning because the width and height of the shape actually changes depending on the frame because each frame can have different widths and heights.  Here's a good example of that:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-sprite-tutorial/\n. hiya!  This will added to the next release.  Thanks!\n. done and done:\n\nhttps://github.com/ericdrowell/KineticJS/commit/01c5f4f7ca4e4ca03f497f7908b07e11885bb86e\n. works perfectly for me:\n\nhttp://jsfiddle.net/xQSMe/\n. oh I see your problem.  The rotation property is a node property, which means that it's a property of the entire shape.  Frame objects do not have a rotation property.\n\nIf you want to rotate the whole shape for specific frame indices, you might try hooking into the afterFrame event via the afterFrame() method, and then rotate the whole shape accordingly:\n\nhttp://kineticjs.com/docs/symbols/Kinetic.Sprite.php#afterFrame\n. can you provide a screenshot with the output you're trying to create?  You might be able to use a single shape with a pattern to generate the 10x10 grid\n. are you sure that it's only slow once you do stage.add(layer), and not when you're adding shapes to the layer?   Did you measure the time for the double for loop as well?\n. interesting.  btw, when you do stage.add(layer), the layer is rendered.  So the ~3000ms is the time it takes to render the whole layer (which in your case is the whole stage)\n. have you tried not using clone() ?  just instantiate a new rectangle directly with Kinetic.Rect\n. Also, I'd like to see the code that you're using for the cloned shape.  That info will reveal where the slow down is occurring\n. Thanks for this!\n\n1) Shear transform is spot on, that's exactly how I planned on implementing it\n2) Arc shape - I have plans to implement this slightly differently.  I plan on having Arc extending Shape, and Wedge extending Arc\n3) Spline shape - I released my own version of Spline in v4.3.0, which extends Line, and also has a tension attr that lets you define the interpolation.\n\nSince the Shear code is a few lines, I'll manually put those in and give you credit in the change logs :)\n\nSeriously really appreciate the work you put into this\n\nCheers!\n. Haven't forgotten about this - will add it in as soon as I get the chance (been pretty swamped lately)\n. Will look into this before the next release. Thanks!!\n. ah, this is because the hit graph is no longer redrawn during drag and drop operations to improve performance.  Will have to put some thought into this.  Thanks!\n. yes, dragend should work as a work around for now.  I'll try and see if I can sneak this into the next release\n. ah okay thanks for the heads up.  I'll have this fixed by the next version, v4.3.2.  Thanks!!\n. Thanks! As i mentioned before, the problem is just that the hit graph doesn't redraw during drag and drop, so when the mouseup event triggers, the hit graph rendering isn't there to pick up the event.  The fix should be pretty easy, and will be in the v4.3.2 release sometime this week.\n\nHang in there,\n\nEric\n. Fixed!  Thanks guys for all of your help.  The fix will be included with the 4.3.2 release coming out this week.\n. This will hopefully be addressed soon.  I plan to eventually support multi touch in KineticJS, which should resolve issues like this.\n. very interesting stuff!  will take a look as soon as I can\n. for this use case, wouldn't it be simpler to stack sprites on top of eachother?  i.e. you could have a character sprite, an armor sprite, a weapon sprite, etc., inside of a common group.  That way, you can hot swap out armor and weapons by changing the corresponding sprites.  \n\nClosing this for now because I haven't had anyone else needing this feature.  I'll keep in mind though.\n\nThanks again!!\n. fixed this yesterday, thanks! (check the disqus comments at the bottom)\n. heya!  You're absolutely not coming across as a downer, totally appreciate it.  I want all of the tutorials and labs to be perfect :)\n\nI'll take a second look as soon as I get a chance, thanks!!\n\nEric\n. This has been fixed - it was a problem with the lab, not KineticJS\n. I believe this is more of an issue with implementation, not a bug inside KineticJS.  Your logic should never allow multiple circles to be \"active\".  touchstart should flag a circle as \"active\", and then you could have a function or method that synchronizes the drawing based on the active circle (model view pattern).\n\nIn regards to forcing a touchend when you touchmove out of the stage, I'm not sure that this is something KineticJS should enforce.  When this situation occurs, you can simulate a touchend like this:\n\nstage.simulate('touchend');\n\nor just trigger touchend directly:\n\nstage.fire('touchend');\n\nWhat do you think?\n\nP.S. your graphic looks really neat :)\n. this is the correct behavior.  the touchend event should be called only when you touchend over the shape that you bound the event to.\n\nIt sounds like you want the contentTouchend event.  This will fire anytime a touchend event is triggered, regardless if you're over a shape or not.  Try this:\n\nstage.on('contentTouchend', function() {...});\n\nLet me know if this doesn't work for you.\n. Yea, I was expecting this to be a problem :(\n\nThe thing is, I want KineticJS to move forward.  Previously, KineticJS only supported dashed straight lines.  If we hook into the native dash line support (only chrome supports this right now), then any stroke can be dashed, including splines (which is coming for the next release).\n\nI don't want browsers who aren't implementing the spec to hold us back.  Just like today in web development, if you're using IE6, you won't get pretty rounded corners.  This is a form of graceful degradation.  I fully expect most browsers (especially FF and Safari) to implement dashed lines soon.\n\nIt is true that I could put in logic that sometimes draws dashed lines when its possible, manually, in browsers that dont support dashed lines (like straight lines, or straight strokes in IE9), but this is effectively adding bloat to the framework in order to make up for browsers not keeping up.  Also, since dashed lines are purely aesthetic, it shouldn't break applications.\n\nWhat do you think?\n. FF is usually pretty good with keeping up.  I would be really surprised if they don't implement it within the next couple of months\n. For the time being, I don't have plans to reintroduce the lineDash logic just for the Line shape, because I'm fairly certain it will cause more confusion for people than its worth.  In doing so, line dashes will work in all browsers, but will only work for general strokes for browsers that have implemented lineDash.  It's easier to understand if its all or nothing, if a browser always supports it, or doesn't at all.\n\nTo me, the lineDash attribute is a lot like the border-radius CSS property.  When creating a website, you can use border-radius to get nice rounded corners in modern browsers, while knowing that older browsers will just render the sharp corners.  It won't break the app.  This is a form of graceful degradation.\n\nIf more people make a ruckus about this I'll consider putting it back in, but currently I have a lot of bigger fish to fry in regards to bugz and enhancements :)\n. what do you mean by \"break\"?  is a JavaScript error thrown?\n. This is the expected behavior.  When two shape perimeters intersect and are antialiased, how is KineticJS supposed to know which shape belongs to the pixel if its color key doesn't match either shape?  There's really no need to try and add extra logic to figure out antialiased pixel mappings :).  Antialiased pixels are simply not part of the hit region.\n. can you explain a bit further?  what do you mean by thumbnails?  Images?  what's broken?  JavaScript errors?\n. Would you mind posting this problem in Stackoverflow?  I'm really sorry, but I don't have time at the moment to walk through your code and pinpoint the problem.  There's a lot going on there.\n. KineticJS doesn't support \"drop\" and \"dragenter\" events.  Here's a list of the currently supported events:\n\nhttps://github.com/ericdrowell/KineticJS/wiki\n\nthis behavior can be implemented using the intersects() and getIntersections() method.  Thoughts?\n. heya!  interesting - yes.  However, I haven't had much demand for events like these, so they would be put lower in the priority list.  As you mentioned, there's a lot of complexity with drop and drag enter events, in regards to how different users would expect it to work, which implies a lot of configurations, which implies a lot of complexity.  For now, I think it's best if left to the user to roll their own drop or drag enter logic, unless a lot of people start asking for it.\n\nCheers!\n. Github issues are mostly for bugs. I would suggest re-posting this on Stackoverflow so the community can help you there: http://stackoverflow.com/questions/tagged/kineticjs\n. the code is a bit buggy... Github issues are mostly for bugs.  I would suggest re-posting this on Stackoverflow so the community can help you there: http://stackoverflow.com/questions/tagged/kineticjs\n. your problem is here:\n\ncontext.fillText(\"I\", parseInt(width/2), parseInt(height/2));\n\nneed to use canvas.fillText().\n\nI would also recommend just combining a Kinetic.Rect with rounded corners and a Kinetic.Text shape.  Here's a tutorial on grouping:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-complex-shapes-using-groups-with-kineticjs/\n. yep, just set the listening attribute to false with setListening(false).  Here's a tutorial:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-listen-or-dont-listen-to-events-with-kineticjs/\n. Yep, pass an object as the second parameter. Here's the docs: http://kineticjs.com/docs/symbols/Kinetic.Node.php#simulate\n. yep, you're absolutely correct, thanks!  There's a lot to document, so there's a high chance there are other errors like this sneaking around the code base.  Fixed!\n. I believe what you need is the once() method - this is currently on my todo list.\n. Thanks!  This will hopefully be addressed with the next release\n. This is really strange code - why is a reference to the Rectangle stored after you've deleted it?  When you remove a node with remove(), all of its references in the stage are removed, including event handlers.  You should instantiate a new rectangle each time with new Kinetic.Rect();\n. ah, I see the confusion here.  the setAttr method shouldn't be public.  You need to set the draggable property with the setDraggable() method.  The code is here:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/DragAndDrop.js#L138\n\nYou'll notice that this method invokes additional logic other than just setting the attribute.  I need to investigate whether I should change setAttr to _setAttr to indicate that it shouldn't be used (it's already not documented), or if I should allow developers to use the method, and add an overhead of attr event listeners to run extra logic for special attrs like draggable.  \n. np!  It's a legitimate issue\n. cool app.  Though, there's no way I would have time to go through all of the code to find the issue.  Can you put together a simpler jsfiddle to demonstrate the problem?  It would be much easier for me to fix something there.  No one else has mentioned a problem with clicks not firing, so I'm guessing that you have something setup with jquery that's stopping event propagation. \n. Closing this for now.  Chrome has had lots of problems over the months related to canvas, so this may be resolved by now.  Please reopen if this is still an issue.\n. layer.get('.testText') returns an array of nodes, not a single node.  Here's the docs:\n\nhttp://kineticjs.com/docs/symbols/Kinetic.Container.php#get\n\nand here's a tutorial:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-select-shapes-by-name-with-kineticjs/\n. Hiya!  Believe it or not, this is the expected behavior.  The override coordinates in the dragBoundFunc are absolute coordinates, meaning that they will not be affected by transforms such as scales.  If you want the dragBoundFunc to adapt to the stage after it scales, the function will need to take the stage scale into account.\n\nCheers!\n. I made significant changes to remove() with v4.3.1, including a counterpart destroy() method.  Try it out and let me know if this resolves your issue.  Thanks!\n. great!\n. yep, have plans for that.  I'll try to get the change in for the v4.3.1 release. \n. Here you go!\n\nhttps://github.com/ericdrowell/KineticJS/commit/4136ddb398f2138d8942bbe42024351a9d13e49b\n. I believe the problem you're seeing is that you're expecting drag events to bubble, which currently they do not.  dragstart, dragmove, and dragend events will bubble with the next version v4.3.2\n. correction, drag events will bubble with v4.3.4 which will be released next month\n. drag event bubbling was added in v4.4.0\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log#440-mar-26-2013\n. does anyone know if this issue has been resolved?  I haven't heard of any issues like this in months.  (If mousemove was broken in FF, I'm certain that people would be filing more bugs left and right).  Please reopen this if it's still an issue.\n. This is not a bug with KineticJS.  The tutorial just needs to be updated\n. Probably will not work because it looks like hammer only works with DOM nodes. Kineticjs has plans for multi touch support, but its lower in priority at the moment. You can, however, do some of the multi touch work in your app. Check out this lab - http://www.html5canvastutorials.com/labs/html5-canvas-multi-touch-scale-shape-with-kineticjs/\n. Heya!  A few bugs were fixed with drag and drop with version 4.3.1.  can you give it a try and see if you're still having issues?\n. Wow that's pretty in depth, thanks!  My thoughts:\n- isEmpty --> great idea, I'll add something like this, or hasChildren()\n- global to local --> you can use getAbsolutePosition() and setAbsolutePosition()\n- too many shortcuts adds an unnecessary overhead to the library, both in size and maintenance, so I probably won't be adding much of those unless there's a really big demand for them.\n- good idea about an option for keeping an image width and height in proportion, although this could be extended to work with any node using size.  I'll add this to my todo list\n- chrisrittter has a good point in regards to the opacity comment, although it may make more sense to use a cloaking method (already on my todo list) which sets a shape visibility to false, but keeps the shape detectable.\n- very interesting about accelerated canvases!  I'll add this to my todo list as well\n\nThanks for all of your suggestions!!\n. The tutorial just needs to be updated.  Not a KineicJS bug.\n. Thanks chris!\n. don't use jquery to add events to KineticJS - KineticJS nodes are virtual nodes, not DOM nodes.  jQuery is a DOM library.  you need to use KineticJS event binding, e.g.\n\nshape.on('click', ...);\n. ah interesting okay, that makes more sense.  Does jQuery do this?  I suppose this is needed in order to make destructors?  Reopening ticket, thanks.\n. yep, Have plans to create a plugin like this as soon as the fundamental stuff is completed.  Maybe you could create one and publish it :)\n. Once KineticJS core is set in stone, I want to get the community involved with creating plugins.  I was also hoping that someone might be willing to create a KineticJS plugins website (I don't have the time to manage one at the moment)\n. This is the expected behavior - Ironically (and as expected) I made this change because a lot of people complained about the previous behavior.  There are only two options\n\n1)  If the mouse ever leaves the stage, force drag end and stop the drag and drop operation (this is how it used to work)  A lot of people complained about this when their app had draggable elements near the stage edge\n\n2) keep drag and drop alive when the mouse goes outside of the stage (current) with the caveat that if you mouseup outside of the stage, and then move the mouse back into the stage, the drag and drop operation is still alive.  The only way to overcome this is to add a mouseup listener outside of the stage - however, this should definitely not be done, because a widget should never bind listeners to DOM elements outside of its container.\n\nThoughts?\n. The general consensus is that this is the expected behavior (other software that implements drag and drop works exactly the same way).\n\nIf you'd like to force drag and drop to end, you can just do this:\n\nshape.stopDrag();\n\nhere's the docs:\n\nhttp://kineticjs.com/docs/Kinetic.Node.html\n. Yikes!!  This is pretty serious.  When using linear or radial gradients, it appears that shadows are also being applied to the stroke if one is defined (if you don't define a stroke, you don't get the double shadow)  I'll fix this up by the next release, v4.3.2\n. Fixed:\n\nhttps://github.com/ericdrowell/KineticJS/commit/624ec25c2991aa5bf611b44562aa5d8d054efbab\n\nA logic problem was introduced when the fill attr was flattened.  This fix will go out with version 4.3.2 that I'm hoping will be released this weekend or next week.\n. Don't forget that under the covers, KineticJS is using the Canvas API, which means it's under the mercy of the browser implementation. \n\nHave you tried scaling the image instead?  image.setScale(2);\n. Okay, I'll keep this one in the back of my mind in case something comes up where this can be addressed client-side.  Thanks!!\n. Actually, the problem is that the API for setSize() changed.  in v5.0.1, you have to pass in an object literal.  In v5.0.2, I'll be adding back in the option for passing in two arguments via setSize(width, height).  Lab is updated.\n. Hiya!  Unfortunately, I believe that Microsoft has created new Event types (not in the w3c spec) that they expect all developers to use in order to handle touch events on wp8.  I haven't had a chance to look into it yet, and actually pretty annoyed with them in general.  The only reason I would consider supporting wp8 is because you fine folks are requesting it :)\n\nI'll keep you posted\n. +1 Samurai\n\nVery sorry for this, but Kinetic.Text needed an API do-over.  It's much cleaner and consistent now.  Here's the updated Kinetic.Text tutorial:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-text-tutorial/\n. cool!  I'll look into this as soon as I get a chance\n. Nice job!!  It works great\n. whoops forgot to update this!!  Adding it to the next release todo list right now :)\n. https://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n. yikes, this is more than a typo, it's a logical error,  The intent was for clockwise to be defaulted to false.  Fixed up now.  Thanks for catching this!\n. thanks, I'll look into this.  It's possible that the method was changed for some reason.  Thanks!\n. yep, stage.remove() will remove the stage.  if you want to remove a layer, use layer.remove() (this doesn't destroy the layer but just unhooks it from the node tree).  If you want to actually destroy the layer, use layer.destroy()\n. You guys are correct.  I finally had a chance to look at the lab, and there is indeed a problem with this scenario:\n\nappears to be a problem with .get() when trying to select children of the parent of a node that is being dragged and dropped, with dragOnTop = true. See drag and drop with resize lab\n\nThe quickest work around for the lab is to set dragOnTop = false for the anchors.  I've updated the lab and it's working again.  I'll address the problem with get() by the next release.\n\nThanks guys!\n. Fixed - the dynamic drag layer now does a deep copy for the Groups and Layers that are reconstructed (which means they now also pick up ids and names and should play well with selectors).  The change will be available with the 4.3.2 release this week.  Thanks!\n. you should be able to clear the fill color with:\n\nsetFill(null)\n\nhave you tried this yet?\n. Even so, this is an unexpected behavior, so I'll get this fixed by v4.3.2.  Whenever a fill type is set, KineticJS should clear the other fill types.  Thanks!\n. Okay so I put a bit of thought into this.  I don't like the idea of the fill rendering style being determined by the order of setting fill configurations.  First off, it creates a huge logic overhead everytime a fill attribute is set (will be a performance hit).  Second, it's inconsistent with all the other KineticJS attributes.\n\nWhat I've done instead, is created a mechanism that makes it really easy to toggle between different fill types, if you choose to set multiple fill types.  You will now be able to use the fillPriority attribute, which can be color, pattern, linear-gradient, or radial-gradient.  \n\nLet's say that you want to toggle between a color fill, and a radial gradient fill.  When instantiating the shape, you can set both the fill property, and the radial gradient fill properties.  If you want the shape to start out with the radial gradient fill, then set fillPriority = 'radial-gradient'.  Then, if you want to toggle to the color fill, just use shape.setFillPriority('color').  \n\nThoughts?\n\nP.S. setting the other fill attributes to null does work, and is essentially another way to coerce fill type priority.\n. This is probably related to the issue people are having related to the mouseup event not being detectable during drag and drop after some rendering optimizations that I made.  I'll address this issue by the next release:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule/_edit\n. haven't forgotten about this issue - it'l just take a little time to get to it.\n. interesting thanks!  I'll fix this up before the next release.\n\nThanks!\n. Thanks!  Fixed up now.\n. You have two options:\n\n1) fork the project and do a build\n2) wait and download the official release sometime this week (will be v4.3.2)\n. np!\n. thanks firebluetom for the initial assist :)\n. This is a known issue - I just need to update the tutorial.\n\nThanks!\n. I'm marking this as invalid now because the dragOnTop functionality has been deprecated because it was causing too many issues.  \n. Hiya, if you're still looking into this, I would suggest reposting on Stackoverflow because the community support is really great there\n. hiya, I'll be creating a public method to programmatically stop drag and drop soon - until then, you can do:\n\nKinetic.DD._endDrag();\n\nThat should stop the drag and drop.\n\nAlso, a lot of changes were made to drag and drop with v4.3.2.  These may resolve your issue as well.  Please reopen this ticket if it does not.\n\nThanks!\n. I think it's a bit cleaner, and more consistent, to call the callback with the context of the node, so that the node is accessed via the \"this\" keyword, similar to drawFunc.  Here's the commit:\n\nhttps://github.com/ericdrowell/KineticJS/commit/9160b694ae24413319e53796af8d75321d0860b2\n\nThanks for bringing this to my attention!!\n. The fill attr has been flattened. When in doubt, check the change log\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n\nOr check out the updated tutorial\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/\n. drats you're absolutely right.  I'll get this fixed by the next release.  Thank you!\n. Fixed up, the change will make it to the 4.3.2 release this week.  Thanks!\n. Cool! I created something just like this for a client some months ago, and used event delegation to handle the resizing for shapes that had the resizable=true flag.  I don't have any tutorials up for plugins at the moment, but the general idea will be for your code to live in the Plugins namespace.  Essentially, you would create a new file, and do something like this:\n\nKinetic.Plugins.Resizable = function(....)\n\nand do your magic there.  Then host your file on a personal website, or as a Github project.  Eventually, I plan to create a gallery where people can submit plugins.  When people want to use your plugin, they will just include your JS file.  The best plugins are the ones that are seamless, such that users don't have to do much extra work, if any.  In my case, simply adding the JS file, and then adding resizable=true to shape configs made them resizable.\n\nCheers!\n\n*\\* Update **\n\noh and almost forgot, if you get this up and running, be sure to send me a link so I can link to it from kineticjs.com\n. Cool!  I'm planning on building a community plugin gallery in a few months. Keep your eye out for it (although, I'd actually prefer if someone else managed a plugin gallery). Well see how it goes\n. absolutely, that would be awesome\n. This is probably related to the new drag and drop performance optimizations that were made recently.  I'll have this addressed by the next release, thanks!\n. Hi again!  It turns out that you've surfaced an even bigger problem with KineticJS (whether you meant to or not).  When both a node and its ancestors are set to draggable=true, currently KineticJS gives the oldest ancestor priority over any of the descendants.  This isn't a very good design.  I made a change that now gives nodes priority over its ancestors.  So now, if both the stage and a shape is set to draggable = true, when you drag and drop a shape, just the shape moves, and when you drag and drop the stage, the whole stage moves.  This will eliminate all the mouseover and mouseout logic you were adding to achieve this behavior.  \n\nThanks again!\n. Each stage can contain multiple layers, and each layer has its own canvas.  You can access the canvas element with:\n\nlayer.getCanvas().getElement();\n\nHere are the docs of interest:\n\nhttp://kineticjs.com/docs/symbols/Kinetic.Layer.php#getCanvas\nhttp://kineticjs.com/docs/symbols/Kinetic.Canvas.php#getElement\n. interesting, I believe this may be a result of an optimization I made with the transitionTo method.  I bet the callback is being executed after the first Tween is completed (a Transition is made up of several tweens).  I'll look into this one.  In the meantime, you should be able to work around this by adding a small timeout in your callback function, say 50ms or so to be safe.\n. great!  Sorry for the headache\n. This should be fixed now, because the transition callback is executed after the last tween has finished, instead of the first.  This logic change will be in the v4.4.0 release coming out this weekend.\n. hmph haven't heard about this.  I've added it as a todo item for the 4.3.2 release because it sounds pretty serious.  stay tuned.\n. Actually, all of the mouseout and mouseleave unit tests are passing fine, and I did several manual tests verifying the functionality as well.  Could you post a jsfiddle demonstrating the problem?  \n\nThanks!\n. Hiya!! ah, the problem is your custom shape.  A custom shape can only have one path, here's an example:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shape-tutorial/\n\nIf the bg rendering needs to have events tied to each element, you should combine a Line with a Rect using groups:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-complex-shapes-using-groups-with-kineticjs/\n\nIf you don't need events, and just want to use the canvas API, you can create a separate layer just for the background rendering, and then draw directly onto the canvas element.\n\n---- About sponsoring\n\nSweet!  KineticJS has lots of code created by the community, so would love to see any pull requests you come up with.  Typically, small enhancements and bug fixes are the most likely pull requests to be accepted.  If you'd like to sponsor the project financially, here's the sponsor page:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Sponsor-the-KineticJS-Project\n\nCheers!\n. Each shape can only have one path for two reasons:\n\n1) The high performance hit detection algorithm requires that each shape has one path (this is how KineticJS is so fast)\n2) Shapes are defined as primitives.  Anything that's composed of multiple primitives should be a Group.\n\nHere's an example of drawing directly onto the layer canvas (check out the curved lines)\n\nhttp://www.html5canvastutorials.com/labs/html5-canvas-modify-curves-with-anchor-points-using-kineticjs/\n. Exactly!  All languages have primitive and complex data types.  With KineticJS, all Shapes are primitives, and you can combine multiple shapes to create complex shapes (like complex data types)\n\nIn regards to inheritance, I know.  I was originally using a more robust inheritance pattern, that enabled developers to easy extend any Node in the framework.  This, however, comes at quite a performance cost (as much as 2x).  KineticJS uses a very high performance inheritance pattern, which in turn makes it harder for developers to extend Nodes.\n\nThinking about it now, I could easily create a public extend() method that automatically propogates properties and methods to children nodes when extending a parent Node.  I'll add this to my todo list!\n\nI only have one branch, the trunk.  Currently, I only make new branches for experimental stuff.\n. that's the KineticJS specific extender.  The modules are loaded in such a way that methods and properties will automatically propagate to children nodes.  I need to create a new public extend method that traverses children and sets those methods and properties regardless of the module load order.  This extend() method will turn into a private _extend() method.\n. hiya!  Can you create a jsfiddle for me so that it's easy to try out?  Thanks!\n\nAlso, have you checked the changelog? https://github.com/ericdrowell/KineticJS/wiki/Change-Log\n. +1 Thanks firebluetom!          \n. Heya, originally I was going to use NodeJS for the build, but someone created the Ruby build for me early on, and it's been working great so far.  Don't think it's really a big deal to put in an effort to ditch Ruby at the moment, but if I'm convinced that it's needed, I'll let you know :)\n. hiya, this is a known issue.  rotationDeg is actually a special attribute that converts the degree and maps it to the rotation attribute.  I have plans in the near future to hook the transition config object into this mapping.\n. The transition class has been deprecated in favor of Tween, which does now support rotationDeg.\n. you have a couple of options:\n\n1) apply a slight shadow to the line such that it creates a 1px border\n2) create two overlapping lines, such that the bottom line is a bit thicker than the top line, which creates a border around the top line.\n\nThere's no plans at this point to support line fills.  But this could change if enough people request it.\n. drats!!  This was a side effect of some major Kinetic.Text refactoring that was bundled with the release.  I'll fix this up and put out another release this weekend (I would put out a release out tonight, but I want to wait and see if any other problems come up).  I'll add a new set of text functional tests so this doesn't happen again.\n\nThanks so much!\n. fixed!  This will be pushed out sometime this week as v4.3.3\n. this is the new expected behavior.  \n\nI don't understand, you want the whole stage to be pannable, and also have shapes drag and droppable?  Only one thing can happen at a time.  Can you expand a bit further?\n. As soon as I get a chance, I'll try and backfill older versions in the version archive.\n\nv4.3.1 is the last version to support text drag and drop.  A bug with text drag and drop was introduced in 4.3.2, which will be fixed this weekend with 4.3.3\n. so all of the versions are now in the CDN (including v1.0.0).  I just need to go through and update the links to them.  \n. could you possibly setup a jsfiddle demo?  You've explained the problem great, it would just help me save a bit of time.  Thanks!\n. I just did a lot of testing on different browsers, including Firefox, and transitioning the layer opacity to 0 works correctly for me, even when its containing a circle and text.  Closing this ticket for now - if this is still an issue for you, please create a jsfiddle to demonstrate the problem.  It might be related to the way you're building the stage.\n\nCheers\n. You're right, it shouldn't be running that slow.  Is each sector track an individual shape?\n. I'll go ahead and create a lab that's similar to what you're doing (mine will be a wheel of fortune demo) and I'll check out the performance there.  You're use case just doesn't really have anything that should be slowing the Kinetic engine down.  I'll get back to you later tonight.\n. Well got to the bottom of it.  Strangely, I never saw this happening, but KineticJS appears to have a major performance issue when animating nodes nested inside other transformed nodes, which is only surfaced when we're animating lots of groups.  And, I believe I know the root cause - I've been wanting to revisit how I construct transformation matrices for nested nodes, and it looks like now may be a good time to do this.  I'll have this addressed by v4.3.4.  Stay tuned!\n. p.s. as a work around for your use case, I would recommend not nesting shapes inside one another with groups, unless you can wait until the end of next month for this issue to be addressed.\n. Update: after more digging, I discovered that the culprit is actually Kinetic.Text.  Nested groups still render lighting fast, the problem is just text.  I believe the problem is related to the fact that I'm not caching text metrics - I'll keep digging.\n. After further digging, I've found that the root problem is really just the fillText method of the canvas context.  Basically, drawing text is just really slow with HTML5 canvas.  This isn't a KineticJS specific issue.  To improve performance (I'm talking about getting the FPS back up to 40fps+), you can cache the text node as an image.  Here's a tutorial on that:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-shape-caching-with-kineticjs/\n\nI'm currently working on a lab that does just this, so I'll let you know when it's published so that you can use it as a guide.\n. exactly.  Groups nested in groups nested in groups perform great.  drawing text with HTML5 canvas does not.  Hopefully, when I get this lab out, it'l be a bit more clear on what you need to do to dramatically boost the FPS.\n. Here you go sir, cached text nested inside of a group, which is nested inside of another group:\n\nhttp://www.html5canvastutorials.com/labs/html5-canvas-wheel-of-fortune/\n\nShould be somewhat similar to what you are doing\n. There's lots of ways to animate colors, I typically increment the rgb components of a color (0-255) and then set the fill to 'rgb(x,x,x)'\n. This is by design.  If you don't want the drag and dropped shape to go to the top layer, you can set dragOnTop = false\n\nhttp://kineticjs.com/docs/symbols/Kinetic.Node.php#setDragOnTop\n. why is draggable being toggled on and off on mousedown and up?\n. It sounds like the root problem is that right and middle click should not trigger and drag and drop.  I'll fix this up.\n. this ticket has not been closed which means that it hasn't been worked on yet :)\n. It's been added to the release schedule\n. would definitely be cool.  I have big plans to eventually open up a community gallery page where people can submit 3rd party plugins like this.  If you're interested, by all means, setup a github project page and build it out.  I could link to it from the homepage for now.\n\nCheers!\n. You're absolutely right, this is a bug.  I'll have this fixed up with the next release, v4.3.4.  Thanks for catching this!\n. Thanks for the assist Chris!  Yes, I'm planning on doing a release mid March\n. that sounds reasonable.  I committed some refactored code that fixed the dragend / mouseup ordering bug:\n\nhttps://github.com/ericdrowell/KineticJS/commit/966ebf2a326fb32911d38d79f3c3ac68ade5c347\n\nI'll also prevent the click event from firing once the drag and drop operation has started\n. on second thought, I think I'll keep it the way it is for now.  The definition of a click is when a user mouses down inside of an element, and then mouses up inside that same element.  There might be cases where someone intends to click on an element, and if they accidentally drag the element by 1px, we don't want to prevent the click event from firing.  I think it makes more sense for you to add logic on your end to prevent the click when the user is in drag and drop mode.  I'm open to keeping this discussion open though :)\n. Hiya!  Since this isn't a KineticJS specific issue, would you mind reposting this on Stackoverflow?  I'm currently using Stackoverflow for the discussion forum:\n\nhttp://stackoverflow.com/questions/tagged/kineticjs\n. very interesting, this does indeed look like a bug.  I'll address this one with the next release (v4.3.4)\n. as a work around, you can set the dragOnTop property to false.  There appears to be a problem with the layer cloning step with the dynamic drag and drop layer.  \n\nhttp://jsfiddle.net/HHfMG/\n. by default, the dragOnTop property is set to true, which means that when you drag and drop something, KineticJS dynamically builds a temporary drag and drop layer, moves the node to that layer, and then animates the drag and drop.  When finished, the dynamic layer is destroyed, and the node is moved back to its original container.  Super complex, but it provides a pretty big performance boost because only the node being dragged and dropped is redrawn for each frame, rather than its entire associated layer.\n. I double checked that this is no longer an issue.\n. Most likely a geographic issue.  KineticJS is using Godaddy hosting, and this isn't the first time that people have seen down time in different areas.\n. I've seen this before - it's actually a byproduct of the browser implementation of path fills in relation to context translations.  I'll add this to my todo list and investigate further.\n\nThanks!\n. Closing this one for now, please let me know if this is still an issue. GoDaddy typically gets these types of outages resolved fairly quickly.\n. Heya, I have plans to go through the codebase and add return this to the appropriate methods, but haven't had a chance yet.  Stay tuned!\n. I looked very carefully at your jsfiddles, and the positioning of everything looks correct.  Maybe you are mis understanding absolute position?  Here are the positioning rules:\n\n1) x and y are always relative to the parent container\n2) when you use setAbsolutePosition, this method calculates the relative x and y that you need in order to position the node absolutely.  If you update the position of a parent container, the child container position will move as well because its x and y position are still relative to its parent\n\nThoughts?\n. Oh and, not sure if you knew this, but you can also set the absolute position when an object is created like this:\n\nvar sqr3 = new Kinetic.Rect({\n            width: 50,\n            height: 50,\n            fill: '#FFFFFF',\n            stroke: '#00FF00',\n            strokeWidth: .4,\n            id: 'sqr3',\n            name: 'sqr3',\n            absolutePosition: [10, 120]\n        });\n\nThe sqr3 shape's position will change, however, the moment you change the position of one of its ancestors (this is by design).\n\nIf you truly wanted a shape to be fixed in a specific position, you shouldn't nest it inside of a group.  Just add it directly to a layer, and don't change the position of the layer.\n. hiya! Nope, it's on my todo list.  Kinetic.Text has been heavily refactored over the months, and support was temporarily dropped.  It will be added back in the v4.3.5 release\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n\nSorry for the confusion!\n. this never made it to the codebase, unfortunately.  It is still on my todo list.  Priorities keep pushing it down the list.  Stay tuned.\n. After more thought, I've decided not to support none 2d contexts.  It just doesn't make sense with KineticJS.  I created several variants of  KineticJS + Three.js, and I found that the easiest thing to do is to just overlay a KineticJS stage on top of a Three.js canvas, or vice versa.  There's just absolutely no benefit to having this built into KineticJS.  I'll put up a lab on html5canvastutorials.com that shows a clean way to combine KineticJS and Three.js.  Thanks!\n. Ah, this is a regression bug, which occurred when the remove() behavior changed to just removing a node from the node tree, rather than fully destroying it.  The reset() method should call a new method called destroyChildren().  I'll fix this up by the next release.\n. Also, I'll be sure to add better unit tests around the reset() method to make sure this doesn't happen again.  Thanks for catching this!\n. Hiya!  As of v4.3.4, I'll be removing the reset() method entirely, because it is essentially the same thing as stage.destroy() and new Kinetic.Stage().\n\nThanks!\n. thanks for looking into this!  I'll try and get this in asap\n. interesting, I'll have this fixed up soon\n. Following up with this thread - I don't believe that I should be validating all inputs.  Where would I draw the line?  Param validation will degrade performance, which doesn't seem to be worthwhile when most people are sending the correct data types.  I think it makes more sense for the developer to send the right data type into a method as described by the docs, at least for now.  i.e. you should use shape.move(parseInt(x), parseInt(y));\n\nP.S. I'm still open to adding validation to all methods, I would just need to have enough of the community wanting that feature, and I'd have to make sure the perf consequences arn't too bad.\n. the getDOM method was deprecated and replaced with getContent() in v4.3.1.  Here's the change log:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n. I don't believe that performance has gone down, but there is a bug related to drag and drop on mobile devices that causes a flicker.  Is this in reference to drag and drop?  If so, the work around is to set dragOnTop: false in the shape config.  This particular issue will be fixed with the next version, v4.3.4\n. yes, please reopen if this is still an issue.  the dragOnTop property was deprecated.  Drag and drop should perform quite well now because a lot of optimizations have been made since this ticket was filed.\n. this doesn't quite look right. e is an array that should look like this:\n\n[0, 'blue', 1, 'red']\n\nare you using the correct format for the colorStop property?  Here's an example\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/\n. no, you have a valid point.  I came up with the single array idea to try and make the config as easy as possible.  Perhaps, as you've suggested, a 2d array might make sense, or even some other notation.  Keep the ideas coming.\n. odd, your jsfiddle is actually working correctly for me in Chrome on Windows7.  What browser and OS are you seeing the problem?\n. might also be related to Ubuntu.  This would be a pretty serious issue, and I haven't had anyone else reporting a similar issue, so there might be something going with the Ubuntu Chrome combo\n. ah interesting!  Sorry about this - the interpolated control points are set when points is set, which is dependent on tension.  As you've noted, if tension isn't yet defined, the control points won't be set correctly.  The control points should be set if either points or tension is set, and the other property is available.  I'll have this fixed up soon.\n. I created a unit test for this case, and it appears to be fixed now.  I've done several refactorings of the points and tension attr handling, so it was probably fixed a long the way.  Try out v4.5.5 when you get a chance and let me know if it works for you.\n. Hiya!  First off, I'd recommend upgrading to the latest version, v4.3.3.  Quite a bit has changed since v3.10.0 - here's the change log:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n\nI'm closing this ticket in Github since it's not related to a bug with the library.  You may try reposting on Stackoverflow - the KJS community is pretty helpful there:\n\nhttp://stackoverflow.com/questions/tagged/kineticjs\n. do you mean an exception is thrown if you fire a custom event when nothing is listening for it?  If so that definitely sounds like a bug.  I'll add this to my todo list.  Thanks!\n. fixed!  This will be a part of the 4.4.0 release coming this weekend.  Thanks for reporting!\n. did you post the right link?  It's pointing to an example of toImage, which appears to be working correctly.\n. can you expand a bit more on what you're expecting, vs. what is happening?  I checked the jsfiddle in chrome on OSX, and I correctly see two images (the second image was produced with toImage).  Thanks\n. what exactly is your use case?  Are you destroying the node after dragend, or while drag and drop is occurring? \n. great!  Okay I'll have this fixed by the next release.\n\nCheers!\n. Fixed!  This will go out with th 4.4.2 release.  Thanks!\n. Hate to say this, but it is now createImageHitRegion()\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-pixel-detection-with-kineticjs/\n. great!\n. can you show me the code that you used to generate the text?  a jsfiddle would be best\n. the demo runs really smoothly for me in FF 19 on MacOS.  What OS are you using?\n\nAlso, why are you using such a large canvas?\n\nP.S., KineticJS will soon support clipping functions at container levels (such as layers and groups), and this can be used to optimize render performance.  So if for some reason a particular rendering is slow, this would be one way to alleviate it.\n. First off, have you guys:\n\n1) created multiple layers, and grouped things together inside layers that are redrawn frequently, or together?\n2) reduced the amount of text and shadows for intense animations? (this is a canvas rendering constraint, not a KineticJS one)\n3) tried out node caching?  caching greatly improves performance, because it essentially converts any piece of your drawing into an image.\n\nThe next release of KineticJS will now have clipping built into all containers so that you can define clipping paths around particular regions of interest on a layer to further tweak performance.\n\nIf you're seeing a problem exclusively with FF, there's a good chance it's just FF not performing well.  I'll keep on eye on this.\n. Thank you Jason!\n. Awesome thanks.  Yea, I've gotten into the habit of running mocha-phantomjs test/runner.html before committing to make sure everything passes\n. looking into this right now :)\n. This isn't a complete solution, because there's actually 3 different variants of toDataURL.  One for Stage, one for Layer, and one for Node, which covers Shape + Group.  The fix for this problem will have to be a bit more generic.  Still looking into it.\n. So a couple of things:\n\n#1 I'm not able to reproduce this problem, toDataURL() is working correctly for me with non 1 pixel ratio devices (like iOS)\n#2 you submitted this pull request about a month ago.  A lot has changed since then, and I've fixed up some pixel ratio issues as of version 4.3.3.  \n\nI'm closing this ticket for now because I believe this should already be fixed.  Try out the latest version and see if you still have problems.  If you do, reopen this ticket.\n\nThanks!\n. Unless of course, you are testing on Android.  I do recall seeing some people having pixel ratio issues on Android devices\n. Reopening this because I can't replicate the issue for older versions of KineticJS.  I'm assuming that you're using an Android device correct?\n. ahh okay.  Thanks!\n. hi again!  I did some more research, and there appears to be an inconsistency between chrome and Safari on devices with retina display (like the macbook pro with retina display).  I don't currently have a laptop with retina display, so would you mind checking both Chrome and Safari?  From what I've read, I'm guessing that the problem you're seeing will occur in only one of these browsers, while the other browser will work correctly.  Thanks!\n. okay I got to the bottom of this.  The problem occurs if you don't specify a width and height.  (as a work around, if you specify the width and height properties in the dataURL config, it works correctly.  Thanks!\n. Agreed.  I'll start tagging versions starting with the next release, v4.3.4.  Thanks!\n. One thing that has changed with the newer versions is that drag and dropped shapes are moved to a temporary layer for performance reasons.  I bet the problem is related to that change.  As a work around, you can use dragOnTop:false to keep the shape in the same layer.  This should fix your problem.\n. would you mind reposting this on stack overflow?  This is not a KineticJS bug, it's an implementation question.  Thanks!\n\nhttp://stackoverflow.com/questions/tagged/kineticjs\n. cool idea.  I'll add it to my todo list\n. This sounds very promising!!  Thanks for doing this.  I'll take a look as soon as I get a chance.\n. sweet!  Can't wait to pull this in and try it out.  \n. Works like a charm!  Beautiful work.  Thank you so much for fixing up the text wrapping problems (this was on my todo list but I just hadn't gotten around to fixing it up yet).\n. Thanks again for your work.  Attribution is in a few places here:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n. very interesting.  I agree, the dragstart event should use the event object generated from mousedown.  I'll add this to my todo list.\n. actually, after putting a bit more thought into it, I don't think we should pass the mousedown event object into drag start.  For now, I would recommend storing a reference to the event object, or the evt.button, for use with subsequent events such as dragstart and dragmove.  I'll still keep thinking on this though.\n\nThe reason is that, as you pointed out, dragstart is triggered by mousemove.  It would be odd for a user to mousedown, wait 2 seconds, and then start dragging (which triggers drag start),  and then pass a mousedown event object to dragstart.\n. this is just the effects of anti-aliasing.  You can  use a custom hit function to reduce the hit region.  Here's an example\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-custom-hit-function-tutorial/\n. Thanks for bringing this up!  It turns out that the uniformity isn't really an issue.  The idea of the getRandomColor() key is to return a (probably) unique rgb value as fast as possible.  After some investigation, I discovered that Math.round() and Math.floor() are actually quite slow.  Using a bitwise or operation is much faster.  More on that:\n\nhttp://jsperf.com/math-floor-vs-math-round-vs-parseint/2\n\njust committed the change.  \n\nThanks!\n. +! nitriques.  There are lots of ways to load and preload images, and I didn't want to bloat KineticJS with logic not related to canvas.  For simple cases, use image.onload = function() to instantiate your image.  Here's an example\n\n http://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/\n. this is incorrect.  the arguments variable is a reference to the arguments array.  The arguments are referenced this way because the number of arguments is not known ahead of time.  Here's some reading:\n\nhttps://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments\n. yep, this wasn't over looked, it just hasn't been implemented yet.  It will get in there soon.\n. @lavtron Tweens no longer support complex objects.  You have to define each component.  Here's a working example:\n\nhttp://jsfiddle.net/5jbyw/\n\nso you need to do:\n\nvar tween = new Kinetic.Tween({\n node : node,\n duration : 1,\n offsetX: 2,\n offsetY: 2\n});\ntween.play();\n. I used to support complex objects, but the Tween class started to get really huge, and really complex, and really coupled to KineticJS attribute types (x, y, width, height, r, g, b, points, etc).  To keep the Tween class light weight, I decided that for complex objects, you have to pass in each component individually.  This keeps the Tween class much more decoupled\n. agreed.  \n. Ah, the problem is that the id attr is being copied over to the temporary drag and drop layer (since you have draggable:true), which results in an override of the layer id in the id hash.  As a work around, use draggable:false, or dragOnTop:false\n\nhttp://jsfiddle.net/RNCXz/4/\n\nI'll add this to my todo list, thanks!!\n. This would break many, many things in KineticJS if I allowed developers to pass in their own canvas elements (I looked into this to investigate the possibility of passing in Three.js contexts into a KineticJS layer).  At the end of the day, it's much cleaner, and simpler, if you just overlay a KineticJS stage on top of your own canvas element, if you're doing something special (or vice versa)\n. Side note, KineticJS is a bit more complex than EaselJS, because it automatically handles the canvas elements for you - one scene canvas and one hit canvas per layer.\n. I don't believe that there are any 2d canvas libraries which are also compatible with excanvas.  If you're requirement is to use a graphics library which works in all browsers, you might consider going with Raphael.js, which has an SVG and VML renderer, but is much slower and less feature rich than a canvas library.\n. what is the use case here?  You need the time to be set back to zero?\n. sounds like you should be using Tweens.  Here's what you're looking for:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-stop-and-resume-transitions-with-kineticjs/\n. That is correct.  Currently, stage.toDataURL requires a callback.  I will be changing that soon though (trying to make everything synchronous)\n. you can also access past versions here:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Version-Archive\n. and sorry for the confusion.  I intended for most developers to use kineticjs.com as a portal to downloads, docs, and tutorials.  I use github for advanced stuff.\n. Thank you!\n. You're absolutely right, some things could be done to be more minification friendly.  I'll get to this as soon as I can, although it's a bit lower in priority than other items.\n. Heya.  In the future, please post implementation questions like this on stack overflow.  Also, your problem is JavaScript closures :)\n. you're not supposed to initialize containers.  it's an abstract class.  You can initialize Stages, Layers, and Groups, which extend Container\n. Ubuntu or Linux?\n. This was a problem with Google Chrome.  the latest update broke versions of KineticJS for 4.3.1 and below.  The best way to fix the issue is to upgrade to a recent version of KineticJS.  Sorry for the headache :(\n. @nitriques yes, I push KineticJS versions to the Amazon Cloud Front CDN\n. +1 chrisritter, nice!  That totally makes sense.\n. @3tcubed truly sorry for that.  now that the event target can be any node type, the name of the property needed to change.  KineticJS currently supports no backwards compatibility since it's still evolving.  I can say, at least, that these types of API changes will become less and less frequent.\n. Understand.  Perhaps I can at least start a new section in the change log\ntitled \"API changes\" to make upgrading easier.\n\nCheers,\n\nEric\n\nOn Thu, Apr 4, 2013 at 10:42 AM, 3tcubed notifications@github.com wrote:\n\n> No problems, understand forward progress.\n> Just identifying necessary changes, versus stumbling upon features not\n> working after upgrading, would have been better for deprecated shape (or\n> any obsolete feature) to throw an error versus just being undefined (if at\n> all possible).\n> \n> Again keep up the outstanding work.\n> \n> On Thu, Apr 4, 2013 at 10:33 AM, Eric Rowell notifications@github.comwrote:\n> \n> > @3tcubed https://github.com/3tcubed truly sorry for that. now that\n> > the\n> > event target can be any node type, the name of the property needed to\n> > change. KineticJS currently supports no backwards compatibility since\n> > it's\n> > still evolving. I can say, at least, that these types of API changes\n> > will\n> > become less and less frequent.\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub<\n> > https://github.com/ericdrowell/KineticJS/issues/334#issuecomment-15911799>\n> > \n> > .\n> \n> ## \n> \n> ---\n> \n> Tim Regan\n> Tcubed - Owner\n> Phone: (602) 992-2570\n> \n> \u2014\n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/334#issuecomment-15912350\n> .\n. ah, I knew exactly where to look the moment I read the title of this issue.  replace line 482 in Stage.js with this:\n\nif(this.isDraggable() && !dd.node) {\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Stage.js#L482\n\nand that should fix the issue.  I'll put this fix in with the next release\n. This has been fixed and will be a part of the 4.4.1 release this weekend.  Thanks!\n. Thanks louis!  I missed this as well.  Yes, it appears that the last word auto wraps regardless if it fits or not.\n. this is currently fixed.  The patch will be released as v4.4.1 this weekend:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n. you're using the method incorrectly.  When in doubt check the docs:\n\nhttp://kineticjs.com/docs/symbols/Kinetic.Node.php#remove\n\nyou can also use destroy() if you want to comletely destroy the node\n\nhttp://kineticjs.com/docs/symbols/Kinetic.Node.php#destroy\n\nWhat you want to do is just yellowGroup.remove()\n. Here's the official tutorial on labels (which can be used for tooltips):\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-label-tutorial/\n. this was done intentionally.  I believe that the current w3c spec for CSS index handling is critically flawed.  As an experienced web developer, I can't tell you how many times I've seen other developers break applications because of z-index issues (z-index conflicts, and developers trying to create the highest z-index, so you see z-indices of like 9999 and 99999).  I think KineticJS's spec is much cleaner.\n. Also note, that if you want to get the absolute z Index (like the CSS spec), you can use getAbsoluteZIndex()\n. Hey @ruionwriting !  I specifically did not want KineticJS index to work like CSS z index, because quite frankly, I feel that the w3c spec for z indices is just weird.\n\nYour approach is the right one - just use shape.moveToTop() to move a node to the top of its siblings.  Or, if you have a separate layer dedicated for drag and drop stuff, you can do shape.moveTo(layer).\n\nThis example of drag and drop does something similar:\n\nhttp://www.html5canvastutorials.com/labs/html5-canvas-kineticjs-drag-and-drop-stress-test-with-1000-shapes/\n. Thanks for this!  One other question - would you mind looking into padding as well?  It looks like horizontal padding isn't taking affect with text wrapping\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-text-tutorial/\n\nIf not just let me know, and I can take a look :)\n\nThanks!\n. Hiya!  After taking a second look at your pull request, it looks like you're now correctly taking padding into account.  Great!  I'll do some more testing before I release a patch this weekend.\n\nP.S. don't fret this - the 4.4.0 release was a big one which introduced a few regressions anyways.  We'll have everything up to snuff soon :)\n. This is working correctly for me in Both Chrome and Firefox:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-shape-layering-with-kineticjs/\n\nCan you be more specific when you say \"moveToTop doesn't work\".  Very hard to debug that :)\n\nAlso, to be clear, moveToTop moves a node to the top of its siblings inside a common parent, not to the top of all nodes in the stage.  i.e. if you have two layers, and some shapes in the bottom layers, calling moveToTop() on one of those shapes will place the shape at the top of the siblings in the bottom layer.  The shapes in the top layer will still be  above the shape that was just moved to the top.\n. No problem!  Great.  This ticket scared me because that would have been a major bug ;)\n. Chrome seems to have introduced some bugs with older versions of KineticJS.  These problems are not present with the latest release, v4.4.0\n. Unfortunately there's nothing I can do about this - The update broke older versions of KineticJS (v4.4.1 and below).  You'll have to upgrade to a newer version.  Sorry for the headache!!\n. +1.  I definitely recommend to try and keep your KineticJS version as up to date as possible.  Browsers (especially chrome) tend to break things quite often.  When this happens, KineticJS typically has a hot fix release to overcome whatever was broken.\n. Hiya!  The drag layer was removed with v4.4.0 because it was causing too many problems.  Here's the change log:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n\nalso, the afterDraw() method has been removed, in favor of .on('draw').  \n\nSince the drag layer logic has been removed, I believe you can remove all of the code mentioned in your ticket.  The shape will stay in its layer as you drag and drop, so there's no reason to keep it in sync.  if you want to update another layer as you drag, you could do this:\n\nlayer.on('draw', function() {\n  layer2.draw();\n}\n. ah must have missed this - I'll have this fixed in the next release which is going out in about a week (v4.4.1).  Sorry for the headache!\n. Is this specific to v4.4.0?  Does this work in earlier versions?\n. interesting - does KineticJS fail in some situations?  I'll look into this soon.  Thanks!\n. could you possibly create a simple jsfiddle demonstrating the problem?  That would be very helpful :)\n. I don't believe I have any unit tests that cover stage.destroy().  I'll look into this soon\n. I'll be looking into this soon.  My guess (without looking at the code) is that the hit graph is not being redrawn correctly, since a LOT of refactoring was done in regards to scene and hit graph rendering.  This will be fixed by the weekend.  stay tuned.\n. no prob!\n. this is the expected behavior.  Although, it doesn't look like this is spelled out explicitly in the documentation.  I'll update that asap.  When stage draggable is true, the stage is in panning mode.  Here's a tutorial on that:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-the-stage-with-kineticjs/\n\nThanks\n. help with debugging and implementation issues need to be on stack overflow.  Github tickets are for cases when you can demonstrate that there's a problem with KineticJS itself\n. guys, just listen for events on the container DOM element with addEventListener(), jQuery, YUI, etc.  At that point, you need DOM events, not KineticJS shape events\n. added this to the release schedule, thanks!\n. Hiya, yes, this should be fixed up by v4.5.2.  Here's the todo list for that release:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule#452-mid-june-2013\n. priorities.  Be sure to check the release schedule to get an idea of when bug fixes / features will be released:\n\nCurrently this issue is scheduled to be released in the middle of July, assuming that no other urgent issues pop up, and push it into August:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule#455-mid-july-2013\n. Thanks again for starting this thread!  Finally got around to fixing this one.\n. Thanks so much for looking at this!  It turns out that the way default attrs is handled was rewritten, and the index default was lost.  The problem is that we shouldn't be accessing the index property directly, we need to use the getter method so that the default is returned, i.e. getIndex()\n. thanks!  The getters and setters are dynamically generated at here:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/shapes/Sprite.js#L113\n. I believe you're misunderstanding what stage.on() does.  stage.on('mouseup') does not fire a mouseup event anytime you mouseup inside the stage.  It fires a mouseup event when you mouseup inside of a shape (all events are relative to shapes).  It sounds like what you want, is to listen for mouseup on the container DOM element instead\n. Here's a (more concise) demo that shows that a rect background is working.  There's too much going on in your code for me to take a close look.\n\nhttp://jsfiddle.net/mCGQC/\n. Thanks for looking into this!  It turns out that what you proposed was very close to what I was looking for, but there were a few additional things that I needed.  Thank you!!!\n. shoot!  Yes, arrays are modified by reference in JavaScript.  I hadn't taken that into account with handling the default.  I'll take a look at this soon.\n. Hiya!  Thanks for looking into this.  I still believe that if the developer wants to hook into general events for the stage, they should do so at the DOM level by adding events to the container, or the content DOM element.\n. I'll keep in mind.\n\nFor your second use case, if you want to detect events on spaces where there's not a node, you can add an event listener to the container DOM element, and also do this:\n\nstage.on('mouseup', function(evt) {\n  evt.cancelBubble = true;\n});\n\nThis will prevent the event object from bubbling up to the container DOM element, and therefore will not fire the event handler bound to the container\n. you can use stage.getPointerPosition() at anytime to get the pointer position.\n. This looks really cool!  Can you explain a bit more on what exactly it does and how it works?\n. Awesome!  Do you think it would make sense to change the filter name to Mask?\n. hiya.  I would need to see some code :)  Perhaps you could post something in jsfiddle or stackoverflow\n. Hi all, please upgrade to the latest version of KineticJS.  This issue was fixed with v4.4.2. The problem was occurring with a .bind() method that was added with a pull request. iOS 5.1 and below does not support bind().  Change log:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n. hiya!  Are you using the latest version of KineticJS?  A recent release of Chrome broke older versions of Kinetic\n. Great!  Thanks for verifying \n. Thanks everyone for helping eachother!  KineticJS is truly a community project :)\n. Isn't it already a module?\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Global.js#L157\n. Thanks @lavrton !\n. Hiya, \n\n#1 you're custom shape doesn't have context.beginPath().  this fixes the drag and drop issue:\n\nhttp://jsfiddle.net/D9tzR/\n\n#2 this is a pretty small issue, since people shouldn't be setting the radius to 0.  I'll take a look none the less :)  Thanks!\n. Glad to hear!  I've spent a lot of time on it :)\n. Heya!  This was fixed last night actually.  the v4.4.1 patch will be going out this weekend.  stay tuned!\n. Interesting, I'll have to put some thought into this.  As a temporary work around, have you tried replacing the ids with names instead?  If you keep the names unique, it should still function as a unique identifier\n. Currently no, although it's on my todo list :)\n. On second thought, I'll add these to the next release, v4.4.2.  Thanks!\n. The problem is that clone should not also clone ids, since they are unique identifiers.  This change is scheduled to get in pretty soon.  \n\nIf this is urgent, you can modify the KineticJS source code here:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Node.js#L954\n\nand we'll need to create a new attrs object that doesn't contain the id key.  That new object should be used to instantiate the cloned object.\n\nStay tuned.\n. These methods were deprecated.  Please use the beforeDraw and draw events instead.  i.e.\n\n```\nlayer.on('beforeDraw', function(){...});\nlayer.on('draw', function() {...});\n```\n. Thanks!\n. Heya, I ended up removing the before funcs completely, which means that we don't need to add the this.afterDrawFunc on line 54.  Closing this one.  Thanks!\n. can you create a jsfiddle showing the problem?  The tutorials on html5canvastutorials are working great.\n. this is really strange.  in my local copy, it is capitalized, in the repo, it's lower cased, but Git doesn't detect the difference.  Looking into this.\n. heya!\n\nin response to \"There is also the potential problem of having an anti-aliased (and thus unpredictable) pixel color value mapping to an entirely different shape color key just by chance alone.\" - This is actually untrue.   Anti-aliased pixels are not different colors, they simply have opacities that are less than 1.  Anti-aliased pixels will never trigger other shapes\n\nOne way to solve your particular problem is to create custom hit regions.  You actually have full control of the hit region paths.  For example, you could increase the hit region by a pixel around your shape.  Here's an example:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-custom-hit-function-tutorial/\n\nI will however, spend some time investigating this further to see if there's a high performance solution to the problem.  I'd like to note though, that my impression is that this isn't a problem for 99.9% of KJS users, which has made it slightly lower priority than other things.  I'll keep the ticket opened.  Stay tuned!\n. @tomg7 I don't think your test results are proving what you believe to be happening - are you picking out the pixel color from the scene graph or the hit graph canvas?  KineticJS uses a hidden hit graph which is rendered with completely different rules than the scene graph, as defined in the Canvas.js renderer class (for example, full opacity is always used)\n. @tomg7 also, each browser produces slightly different results for all canvas renderings.  pixels will be slightly different from browser to browser.\n. That's a great suggestion fogbrain.  would you mind trying it out and submitting a pull request?  Otherwise I can add this to my todo list to further investigate\n. Hi Jason, not sure where you're going with this - KineticJS doesn't use the bind method anywhere in the codebase.  Could you expand a bit?\n\n@vc05946 can you be more specific as to what the problem is?  JS error? \n. wow okay.  I think that probably snuck in with a pull request.  I'll take a closer look at this.\n. can you guys do me a favor - I don't currently have access to an iOS 5.1 device - could you apply the change made with the fix above to your version of KineticJS, and let me know if it resolves the issue?  Thanks!\n. scratch that, I came up with a cleaner solution that completely removes the bind() dependency all together.  It didn't need to be there in the first place.  This will be included with the v4.4.2 release.\n. I don't believe this is an issue - the Label plugin is actually a group that contains Text and a special Custom Rect shape.  the Text shape itself will not have the idea - the group will.  You need to do this:\n\nvar id = evt.targetNode.getParent().getId();\n. great!\n. I'll look at this as soon as I can.  Will be adding webgl support this weekend.\n. Hi guys.  After a lot of careful thought and prototyping, I've unfortunately decided not to support non 2d contexts.  It's actually pretty easy to combine KineticJS with other contexts anyways, such as Three.js.  More on that here\n\nhttps://github.com/ericdrowell/KineticJS/pull/282#issuecomment-16328614\n. you're absolutely right.  the remove() method in Shape is supposed to be destroy.  fixing that right now.\n. yep, it will be removed.  Shape extends Node, so Shape has access to all of Node's methods.\n. could you possibly setup a jsfiddle demonstrating the problem?  That would really help me fix this faster.\n. drats, I'll fix this up today and release a 4.4.3 patch.  Looks like my regression tests missed this one.  As a temp work around, you just need to add the utility back to Type.js:\n\nhttps://github.com/ericdrowell/KineticJS/blob/v4.4.1/src/util/Type.js#L286\n\nThanks!\n. hiya, have you looked at this lab?\n\nhttp://www.html5canvastutorials.com/labs/html5-canvas-world-map-svg-path-with-kineticjs/\n\nDo you have a special highlight layer setup, so that you don't have to redraw the whole map each time?\n. P.S awesome demo.  Can I link to it from the kineticjs homepage?\n. it's not an event detection issue - it's probably a redraw issue.  are you drawing the regions on mousemove or mouseover?\n. Great!  No worries, I have yet to put up some KineitcJS performance tips on the HCT tutorials.  \n. do you have a div id = \"Frame\" ?\n. are you sure that the backbone view executes after the DOM has loaded (i.e. on dom ready).\n\nbefore initializing the stage, you can do a test:\n\nconsole.log(document.getElementById('Frame'));\n\nto see if the Frame div is available or not.\n. the .bind method has been removed because older browsers don't support it.  It snuck in with a pull request about a week ago.  Update to the latest version of KineticJS and that error should go away.\n. I don't believe this is a bug.  isDraggable returns the draggable property, which is set to true or false.  when you use startDrag, you are forcing drag and drop regardless if the shape is draggable or not.  Forcing it to drag and drop should not auto set draggable to true\n. yep, this is absolutely a bug.  Thanks for pointing it out!  I'll have it fixed with the next release\n. you shouldn't have to do anything special to remove an image from memory.  KineticJS should remove all of the references to the image object, which means that the JavaScrip engine should auto garbage collect, unless of course your app still has a lingering reference to the image object\n. This issue has been fixed as of v4.5.4.  It will be released this weekend.  Thanks!!\n. here's the readme for unit testing:\n\nhttps://github.com/ericdrowell/KineticJS#testing\n\nlet me know if that doesn't clear things up\n. np!\n. I think you're misunderstanding remove vs. destroy.\n\nremove() removes a node from the stage, but keeps it intact, in case you want to re add it later, or even add it to another stage.\n\ndestroy() calls remove() to detach it from the stage, and then actually destroys the node so that it's no longer accessible\n. what you need is destroyAll, which will be added to the next release\n. you're looking at the minified code.  Here's the method in the source:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Global.js#L121\n\ncan you be more specific as to what doesn't look correct?\n. #1 you're still focusing on the minified code (you shouldn't, you should be looking at the sourcE).  #2 the minified code reads like this:\n\nif(c!==undefined){for(var d=0;d<c.length;d++)\n\nwhich is valid\n. as a side note, you can also hide the shadow with the shadowEnabled = false property so that you can preserve your shadow configs when toggling it on or off.\n\nhttp://kineticjs.com/docs/symbols/Kinetic.Shape.php\n. Nonetheless, I'll take a look.  Opacity = 0 should work.\n. fixed: https://github.com/ericdrowell/KineticJS/commit/85c99c1bb9c482fcca2008cf47f8dff644fa9ed7\n. Everything seems to be running great in FF and IE for me.  Can you please post your working code into a jsfiddle so I can take a look there?  I also need to know exactly at what point things are breaking.  It's likely an implementation issue since no one else has reported problems like this.\n. KineticJS doesn't support text gradients at the moment, although it will soon.  Stay tuned.\n. common technique for proper scoping in JavaScript.  Look online for information about anonymous functions.\n. will look at this as soon as I get the chance, thanks for posting :)\n. I've promoted this ticket in priority.  I'll try to get this fixed for v4.6.1\n. @edplus you are correct, I demonstrated the hit canvas issue by forking the jsfiddle here:\n\nhttp://jsfiddle.net/37pG3/\n. another update on this thread: I'm actually in the process of putting together the 4.7.0 release.  This bug is still present.  It will be fixed along with some other hit graph enhancements in v4.7.1.\n. drats, you're right, the augmented methods will be lost after serialization.  I'll have this fixed by the next release.   Thank you!\n. Image properties are serializable, but not the images themselves.  It's mentioned in the tutorials and the docs:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-load-complex-stage-with-kineticjs/\n\nImages aren't serializable because you'd essentially have to store giant data URLs in the json, which is just silly.\n. you can do that.  just set a custom attribute like this:\n\nvar image = new Kinetic.Image({\n  image: ...,\n  src: 'image-src.png'\n});\n\nor you can set it like this:\n\nimage.setAttr('src', 'image-src.png');\n\nwhen you call toJSON(), your custom src attr will be picked up.\n. strange.  Is this for v4.4.3?  \n. Thanks!  I'll have this fixed up by the next release.\n. Thanks @lavrton.  @SneakyBobito please reopen this ticket if it's still as issue.\n. You cannot add layers inside layers.  You should be adding groups to the layers.  Here's an overview:\n\nhttps://github.com/ericdrowell/KineticJS/wiki\n. I can see how it would work, since both Layer and Group extend Container.\n\nI was thinking the same thing.  I'll add some logic that prevents layers from being added to layers.\n. that's expected.  You should always call layer.draw().  if you call group.draw() or shape.draw(), the layer will not be cleared, and you will just be drawing on top of the layer.\n. Thanks for doing this!  I'll be adding the skew transform in the next release.  I'm planning on adding these methods:\n\nsetSkew()\nsetSkewX()\nsetSkewY()\ngetSkew()\ngetSkewX()\ngetSkewY()\n\nrather than working with angles.  These methods can be auto generated with the new addPointGetterSetter methods.\n\nAs a side note, this means that I'll have to change the skew() method in the Transform class, such that it accepts an x and y component, rather than an x and y angle.\n\nReally clean code btw :)\n. This will be supported eventually, stay tuned!\n. Thank you!!\n. It's working for me.  Can you post a jsfiddle of some sample code?\n. +1 yes this is working for me.  Here's a simpler use case:\n\nhttp://jsfiddle.net/R94ZP/1/\n. You're absolutely right, it does fail.  The work around for now is that you can immediately set visible=false after instantiating\n\nlayer.setVisible(false);\n\nI'll have this fixed by v4.4.4\n. This issue is on the road map for v4.5.2:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n. Hiya!  This is already fixed in the github repo.  It will be released with v4.5.0.  The problem was that the dynamic point getters were being defaulted to an object literal containing an x and y property, and all of the nodes that were defaulted with the object literal were sharing that same object (objects are modified by reference in JavaScript).  Thanks for hanging in there!\n\nEric\n. Not enough info here.  please repost this with more context (more code) on stackoverflow.  Thanks!\n. This is not a bug. You need to call layer.draw() to redraw the layer\n. Thanks for this!\n\n#1 will be fixed with the next release\n\n#2 will be solved immediately if I incorporate Green Sock transitions into KineticJS (may be coming very soon)\n. Yes, priorities shifted every so slightly.  It turns out that I'm going to release 4.5.1 with a new Tweening class, because I'm no longer going to recommend developers to use GreenSock by default.  #2 will be addressed with the new Tweening class as well (working on this right now)\n\n#1 will make it into 4.5.2, which will be released sometime next month :)\n. KineticJS tweens now support tweening point arrays (v4.5.4).  This includes tweening Lines, Splines, Blobs, and Polygons.\n. here's an example: http://www.html5canvastutorials.com/labs/html5-canvas-animated-clown-face/\n. you're forgetting layer.draw().  Here's an example:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/\n. can you submit this as a pull request?  Just create an RGBA filter in the Filters folder.  You can use the other filters as a template.  Thanks!\n. Hiya!  Performance depends on so many factors, I can't really provide you with any specific, especially without seeing your code (but, it sounds like it's a complex app, which means that I wouldn't have the time to look through it).  Would you mind reposting this on stack overflow, along with some code snippets?  If I don't get time to help you there, the stackoverflow community is usually pretty good about responding quickly.  Post a link to it from this ticket :)\n. Hiya!  This should be resolved in the latest source, which will be a part of the 4.5.0 release later this month.  The extend method no loner accepts object literals or arrays (which can be modified by reference).  If you need an immediate fix, you could pull in the source code from git, and build the library at its current state.\n\nSorry for the headache!\n. I'll add this to my todo list, although it's a bit lower in priority than most of the other items on the list.  Thanks!!\n. on second though, this is a pretty easy change.  I'll try and have this fixed by the next release, or the following release.  I just need to check if the node has a parent when adding it to a container.  If it does, automatically run remove() :)\n. if you build from source, that's considered bleeding edge, because there could potentially be big bugs that haven't been addressed yet.  any of the published versions are stable releases.  Are you having any issues with v4.5.4?  If so, please reopen this ticket :)\n. Two things that kill performance on mobile is Text + Shadows.  Have you tried removing shadows for the mobile experience?\n. P.S. cool demo, I'll be linking to it from the homepage soon :)\n. are you redrawing the layer afterwards?\n\nshape.destroy();\nlayer.draw();\n. I believe this was fixed with v4.5.4, because I fixed some issues with .remove() and .destroy() in which children were not correctly being destroyed.  Can you try with this version and see if you still have an issue?  If you do, please reopen this ticket :)\n. This is an issue with anti-aliasing.  It'l be addressed with the next release\n. This is all fixed up.  Thanks!!\n. Hiya!  I'm about to release v4.5.0.  This issue will be addressed in 4.5.1.  Stay tuned!\n. sorry, this hasn't been addressed yet.  I just need to add a check to make sure that nodes aren't added multiple times.  Should go in for the next release.  Until then, just make sure that you don't add something multiple times ;)\n. this logic has not been added in yet.  As a work around, can't you just make sure that you don't add a node twice to the stage?  Shouldn't be that hard.  if node.getParent() !== undefined, don't add it to the stage again.  That's pretty much the logic that will be added in.\n. hiya!  Are you seeing any JavaScript errors?  I'm not familiar with Qt\n. Ah okay, this means that Qt is using an older version of webkit which doesnt support requestAnimationFrame.  I have a ticket open right now to fix this for older versions of Safari, which would also resolve your problem.  The fix will be included with v4.5.1, which will be released next month.\n\nIf you need the fix faster, delete the RAF code block:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Animation.js#L200\n\nand set the raf variable here to FRAF.  get rid of the ternary\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Animation.js#L214\n. scratch that.  the problem is this line:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Animation.js#L206\n\nwhich should be returning FRAF, not Animation.fixedRequestAnimFrame, which doesn't exist\n. Fixed:\n\nhttps://github.com/ericdrowell/KineticJS/commit/ddee366f96f7374cbf7517f90ded1fa2cd43f080\n\nYou can either clone this github repo and do a build a yourself, or just modify the kinetic js file with this change.  Let me know if this doesn't resolve your problem\n. :)\n. Don't have the time to look through your code, but I can tell you that I've seen several really complex apps run smoothly on mobile devices with KineticJS.  Your app crashed my iPhone as well, and  I've never had it crash before :)\n\nCould you repost this on stackoverflow so that the community can chip in?\n\nis it possible to use a smaller canvas size?  I know that even if you use say a 200 \\* 400px sized stage on iOS, the viewport can still resize such that the stage is full screen.  Are you using caching?\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-shape-caching-with-kineticjs/\n\nClosing this ticket in favor of you creating a stackoverflow thread.\n. ah, you should never have been setting attrs directly to the attrs object.  It prevents a lot of things from happening, that need to happen, under the covers.  I'm surprised that your app was working before!\n\nIn short, you just need to go through and use setter methods.\n. for example, when setting x and y, some optimizations are made to improve draw performance by handling matrix caching.  This can only happen if you use the setX() method.\n. wow this sounds pretty serious.\n\naccording to my perf tests, GS actually ran a bit faster than my original implementation of Transition.  Is it possible that your patch introduced a perf hit?\n\nOne cool thing about using a 3rd party transition library is that it only updates properties, it doesn't handle the redraws.  KineticJS still fully controls the animation engine, and the redraw logic.  I'll take a look at this.\n\nAnd in terms of the license.  How can I say this.  Holy crap.  I was under the impression that GS did not require a license for use under any condition.  From this alone, I'll have to to pull it back out (won't be too much trouble).\n\nThanks for pointing this out!  Looks like I'll be releasing v4.5.1 soon.\n. I'm working on a new Tween class that's similar to my old Transition class.  It will be like a Lite version of TweenLite, optimized specifically for KineticJS.  It's nearly complete.  The API will be consistent with Kinetic.Animation and Kinetic filters.  The api will look like this:\n\nvar tween = new Kinetic.Tween({\n  node: rect,\n  x: 300,\n  ease: Kinetic.Eases.EaseInOut,\n  duration: 1\n});\n\ntween.play();\ntween.pause();\ntween.reverse();\ntween.reset();\ntween.finish();\ntween.kill();\ntween.goto(time);\n\nsimilar to Kinetic filters, the ease property will point directly to a function, not a key that maps to a function.  This will make it easier for developers to create their own easings, or even pull in easings from other libraries.\n\nThis will come packaged with KineticJS v4.5.1 (or it can be removed using the custom build).  It will not provide methods for tweening along curves, or controling tweening order via Timelines.  For these types of advanced use cases, I'll point people to GS. As Jack points out, most people won't need to purchase a license.  But I absolutely don't want people to create an app with KineticJS + GS, and then later find out that they need to buy a license for the GS portion, especially if they are just doing some basic tweens.\n\nSince this is a rewrite, I'm expecting the performance to be screaming.  stay tuned.\n. Thanks for hangin in there!  4.5.1 will be released this weekend.\n. Done.  Here's the commit:\n\nhttps://github.com/ericdrowell/KineticJS/commit/622041aeafb9b5bfe4108b89e9f6c156c4f55ec8\n\nand here's an example usage:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/tests/js/manualTests.js#L173\n\nI also added the ability to yoyo with a yoyo property.  I didn't have a need for a kill() method.  Anytime the tween pauses, the corresponding KineticJS animation auto stops.  If you remove a reference to the tween instance, the JS garbage collector will auto remove it from memory.\n\nOne last tweak that I need to add, is tween overrides.  When two tweens are tweening the same property of the same node, the last tween needs to take precedence.  I'll have a follow up commit with this tomorrow.\n. The new Tween class is a full rewrite.  The old Transition class was a port that someone from the community submitted.  There were a lot of things that I didn't like about it, such as the \"onFinished\" event name.  This has changed to \"onFinish\" to be consistent with other event types, such as onClick, onMouseover, etc.  I took out the \"ed\" :)\n. hey guys, it does turn out that a bug was introduced when refactoring the Animation class - the setTimeout fallback was lost.  It's been fixed and will be a part of 4.5.1:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule#451-apr-11-2013\n\n@mihhail-lapushkin can you verify if a JS error was being thrown? \n. Thanks!  I changed the onFinished key to onFinish\n\nthe 4.5 animation issue will affect all browers using an older version of webkit.  I believe CocoonJS uses webit, correct?\n. right, it uses accelerated canvas.  Okay.  I didn't think that KineticJS every worked wth accelerated canvas.  It's already on my todo list.\n. It is done.  v4.5.1 is live.  Here's a tutorial that shows off the new API:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-stop-and-resume-transitions-with-kineticjs/\n\nSorry for the confusion!\n\nP.S., I still fully believe that GreenSock is the best Tween library on the planet.  for more advanced use cases, drop the Tween class and go with GS.\n. transitions didn't \"stop working\" in 4.5.0, they were removed in favor of GS transitions.  Here's the changelog:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n\nfortunately, I've decided to drop this as well, and put back in a new Tween class that will perform better than Transition.  This will be added back into 4.5.1.  Sorry for the confusion!  stay tuned.\n. No problemo!  Wait until 4.5.1 is released.  It'l be released tonight.  \n\nThe old transition class was pretty limited.  The new Tween class is looking pretty slick so far :)\n. It is done.  v4.5.1 is live.  Here's a tutorial that shows off the new API:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-stop-and-resume-transitions-with-kineticjs/\n\nSorry for the confusion!\n\nP.S., I still fully believe that GreenSock is the best Tween library on the planet.  for more advanced use cases, drop the Tween class and go with GS.\n. the problem with back pat is that it bloats the code base over time.  KineticJS is still evolving pretty rapdily, so I'm not quite ready to start adding back compat in newer versions (getting close to that point though)\n. Thanks :)\n. I'll fix this up tonight.  stay tuned.\n. interesting.  I'll take a close look at this and see what's slowing down setX().  Stay tuned!\n. Hi again, could you try something for me?  comment out these two lines of code from the unminified source:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Node.js#L946\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Node.js#L948\n\nThis prevents the handling of attr change logic.  If this is the culprit, I need to consider handling attr change events differently.\n. I'll do some perf tests when I get a chance.  I'll let you know what I find.\n. This says it all:\n\nhttp://jsperf.com/kineticjs-setter-perf\n\nI knew that the attr change logic would add a little bit  of overhead, but not a 25% overhead.  I'll fix this up by requiring devs to explicitly subscribe to different attr change events via subscribe().  If an event has not been subscribed to, KineticJS won't bother traversing ancestors to see if an event handler exists.\n. and here's v4.5.2-beta (much faster)\n\nhttp://jsperf.com/kineticjs-4-5-1-vs-4-5-2-beta-render\n. yep.  I turned off event bubbling for attr changes.  It's kind of a weird thing to bubble anyways.\n. Interesting.  Okay thanks for this!\n\nP.S. I'm currently investing a whole slew of potential performance enhancements, because although KineticJS is blazingly fast on desktop apps, I want it to be as fast as possible on mobile.  Stay tuned :)\n. yes you need to use images.  the jaggedness of fill patterns is controlled by the browser rendering engine.  Not much we can do there.\n. just do this:\n\nshape.on('click', function(evt) {\n  var target = evt.targetNode;\n  var nodeType = target.nodeType;\n  var shapeType = target.shapeType;\n}\n. ah, yes, I'll fix this up soon.  Thanks!\n. fixed as of v4.5.2.  Thanks!\n. interesting.  This is a valid use case.  I'll add this to the release schedule for v4.5.3.  Thank you!\n. The Tween class was re written in v4.5.4.  Kinetic Tweens are no longer made up of an array of tweens.  Now, a single value is tweened between 0 and 1, and the change is applied to all of the properties.  This should resolve the problem you're seeing with v4.5.3.  Let me know if it does not.\n\nThanks!!\n. that sounds reasonable.  I'll add this to my todo list, thank you!\n. unfortunately, I believe that sub domains still count as different domains.  Don't ask me, I wasn't part of the WHATWG group :)\n. I'll have this fixed by the next release.  stay tuned!\n. great!  I was going to recommend moving the entire stage.\n\nstage.getContent().addEventListener('touchmove', function(evt) {\n  stage.setPosition(touchX, touchY);\n  stage.getChildren().each(function(layer){\n    layer.batchDraw();\n  });\n});\n. I see where you're going with this, but I don't think the solution is to create a new node attribute.  You might want to alternate between buttons, or you might want to enable several buttons.  Also, this doesn't really have a parallel for mobile devices (touch events)\n\nIf you want drag and drop to only work with specific mouse buttons, you have several options\n\n1) on the drag handler, you could cancel drag and drop if the mousebutton isn't the one you want by calling node.stopDrag()\n2) you could cancel event propagation on mousedown if the mouse button type isn't the one you want\n3) you could manually trigger drag and drop by hooking into mousedown, checking for the button type, and then calling startDrag()\n4) there are probably several others\n. fixed.  The algorithm now looks at the pixels around the pixel of interest if it's anti-aliased. https://github.com/ericdrowell/KineticJS/commit/aa78d632dbc89ace518890946dfc3947bcd74d89\n. which areas?  I'm able to see the click event when clicking on multiple regions\n. I see what's happening.  You're hitting anti-aliased pixels.  I updated your jsfiddle to show the hit graph below the circle:\n\nhttp://jsfiddle.net/GXWFY/20/\n\nnot quite sure how to solve this at the moment... very interesting edge case.\n. As a work around, if you ensure that the text is positioned at whole number pixels, anti-aliasing won't occur in the hit graph.  see if you can replicate the problem with this jsfiddle:\n\nhttp://jsfiddle.net/GXWFY/21/\n. I'm closing this ticket for now, although I will be investigating anti-alias issues at some point.  be on the watch for that.\n. Thank you sir!!\n. It might be browser / OS specific.  Which browser OS are you using?  are you able to repo the problem in other browsers?\n. Yes this appears to be related to newer versions of chrome.  The problem is that Chrome takes over the mouseevent, and assumes you are trying to drag and drop the canvas element offscreen as an image.  Here's the work around:\n\nstage.getContent().addEventListener('mousedown', function(evt) {\n        evt.preventDefault();\n      });\n\nThis will prevent chrome from taking over the event.  I'll add this to the next release.\n. fixed.  Releasing a patch tonight, v4.5.3\n. please repost this on stackoverflow.  Make sure you don't have a JS closure problem :)\n. Yes, please check out the revamped docs + new tutorials\n\nThe new Tween class is much more robust than transitionTo\n. how odd, thanks I'll look into this today\n. Thank you!\n. I'm planning on hooking jshint up to my build, but haven't had the time quite yet :)\n. I tried modifying the following tutorial to tween brightness, and it worked as expected:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-tween-blur-filter-with-kineticjs/\n\nCan you do the same and let me know if you can repo the problem?  \n\nCan you post an example on your own website showing the problem?  Try to create the simplest demo (I won't have the time to look through a lot of code).  As you've pointed out, the Brighten filter doesn't touch alphla values, so I can only suspect that something else is going on in your code.\n. Hi there!  will try my best to look into this soon.  As you might guess, I have hundreds of todo items on my plate at any moment in time.  I do offer support licenses, if you're interested, which gets you dedicated help and priority bug fixes:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Purchase-a-Support-License\n\nstay tuned\n. by the way, I've added a new Brighten filter tutorial here:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-brighten-or-darken-image-tutorial/\n\nwhich doesn't seem to have any problems with opacity.\n\nI'm closing this ticket for now because I'm just not able to reproduce it.  I'll keep an eye out for this, and if I come across it, I'll reopen the ticket.\n. Thanks for the clarification!  I didn't realize that the problem was specific to pngs.  thank you!\n. ah interesting.  Do you think it would be a better solution to just clear the existing filter canvas?  I'm sure that will perform better than creating a new canvas each time.\n. sounds like a memory leak with destroy().  Will look into it soon, thanks!\n. ah yes, that makes sense.  It just so happens that the remove() method doesn't correctly remove children.  This is on my todo list for the next release.  Since destroy() uses remove(), calling destroy() will also fail to destroy the children, causing the memory leak that you've experienced.  Stay tuned!\n. This should be fixed now.  The latest release, v4.5.4, now correctly removes and destroys children:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log#454-june-9-2013-current\n\nPlease reopen this ticket if this does not fix your issue!\n\nEric\n. transitionTo was replaced with Tween.  Here's the changelog:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n\nHere's updated tutorials:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-linear-transition-tutorial-with-kineticjs/\n. sorry about this, I'll have this fixed up soon.  The truth is, I've dropped the ball lately in terms of testing different build combinations to make sure things work as expected.  I need to create a solid suite of tests that test every build combination.  Quite a feat, but needs to be done :)\n\nEric\n. added this task for the next release.\n. Newer versions of Chrome broke older versions of Kinetic.  Are things working correctly for you now that you've updated to the latest KineticJS version?\n. OS?  Fill and DD work for me on Mac OSX\n. In my experience, 64 bit windows 7 is very buggy in general.  I'll look into this as soon as I can though\n. Umesh, did you verify if drag and drop is working on the tutorials:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-an-image-tutorial/\n\nif so, then it's likely an issue with your code\n. Umesh, also, it's nearly impossible for circles to be rendered as rectangles.  Very likely it's an issue with your code\n. to be clear, are these problems only happening on Windows 7 64bit Chrome?\n. The latest versions of Chrome have been very buggy in regards to HTML5 canvas.  It's not a KineticJS issue.  I did however make some adustments to help with a circle fill issue in Chrome 27, which is part of v4.5.4 released last night.  Try out that version to see if it helps your case.\n. surely you don't mean \"any parameter\".  x?  y?  offsetX?  offsetY? width? height? etc\n. I've tested several tweens in Firefox with starting numeric values of 0, and they all work fine.  Could you please create a jsfiddle demonstrating the problem?  Thanks!\n. The API changed.  please see the changelog:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n\nAnd the updated tutorial:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-label-tutorial/\n. This is a bug with early versions of Android.  \n\nhttp://www.html5gamedevs.com/topic/114-canvasclearrect-bug-in-android-stock-browser/\n\nThe workaround is to define your stage and layer, but then add the layer to the stage after a timeout (I've used 50ms with success)\n. no, you have to create the layer, and THEN draw with a timeout, or else the timeout won't do any good.  The bug with Android is that the first thing that's drawn onto the canvas is stuck there forever, and can't be cleared.  So, if you create a layer, and add it to the stage with no shapes in it, then canvas in the layer will render with nothing in it.  Subsequent draws will be clearable. \n\nvar stage = new Kinetic.Stage(conf);\nvar layer = new Kinetic.Layer();\n\nstage.add(layer);\n\nsetTimeout(function(){\n  // add shapes to the layer and then do layer.draw()\n}, 50);\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/test/unit/DragAndDrop-test.js#L17\n. what do you mean by \"too many global variables\"?  They aren't actually global.  They are scoped to the anonymous function wrapping the module.\n. gotchya, that's what I thought you meant.  I'll clean up the JS Hint errors by v4.5.3 :)\n. thanks!  After adding a jshint task to the build, I discovered quite a few of those.  All fixed up now\n. Thanks for doing this!  I'll take a look soon.\n. Thank you for looking into this!  The _setTextLine method has been refactored quite a bit, and getWidth() now appears to be working as expected for wrapped text.  Please reopen this pull request if the latest version of KineticJS doesn't handle getWidth() correctly.\n\nThanks!!\n. setX and setY works fine for text objects.  Can you create a simple jsfiddle demonstrating the problem?\n\nremember that x and y of the text is relative to its container, the group.  Therefore, if the group is positioned, it will affect the origin of the text.  If you want to override this behavior, you can set the absolute position via setAbsolutePosition().  Close this for now, but please reopen after you've put together a jsfiddle.\n. this was a bug with a recent release of Google Chrome.  The issue has been resolved in newer versions of KineticJS.    If you upgrade to v4.6.0, drag and drop in Chrome will work as expected.\n. that is correct.  It hasn't been implemented yet.\n. sorry guys, I'm hoping to get this added in by the next version, v4.7.3\n. Thanks for this!  It turns out, however, that you should not be calling applyFilter.  It's handled automatically inside draw() for caching reasons.  I need to put a couple of underscores in front of it to designate it as a private method.\n. yep, I have plans to eventually create an Arrow plugin, unless someone from the community creates one first :)\n. example in the docs here:\n\nhttp://kineticjs.com/docs/Kinetic.Circle.html\n\nwill create a tutorial on it as well soon\n. Thanks for doing this!  Sorry it took me so long (infinitely busy these days)\n. will look at this as soon as I get another Android device :)\n. I was able to replicate this - I'm shocked that more people weren't complaining about this.  Looking into it.\n. Which version of android?  This appears to be an Android bug.  Stuff drawn on the canvas element isn't able to be cleared after the first draw:\n\nhttp://www.html5gamedevs.com/topic/114-canvasclearrect-bug-in-android-stock-browser/\n. okay, the work around here (for Android 4.1.1 and 4.1.2) is to not immediately draw onto the canvas.  set a small timeout (50ms works for me) before adding layers to the stage.  I believe that this is no longer an issue with recent versions of Android.\n. I've actually never used Telerik MVC.  are there JS errors?  can you be a bit more descriptive when you say \"don't work any more\"? \n\nThanks!\n. precisely, I do have plans to auto toggle the listening property based on both user input (setters) and usage (on() method).  coming soon \n. update on this thread: For optimal performance, you may give the new FastLayers a try.  When you just want to draw stuff as fast as possible, and you don't care about mouse interactions, node nesting, event pub/sub, etc, FastLayers are a really good choice.  You instantiate them like this:\n\nvar layer = new FastLayer();\n\nI think this is an even better solution than managing the overhead of checking for situations when creating a hit canvas is required.\n\nStill, there may be cases where you want some shapes to be listened to, and others not, and for some reason you need them all in the same layer.  In this case, the hit graph will still need to be generated for the shapes that need it, and Kinetic could auto toggle off listening for shapes that have no handlers bound to them.\n. yes, the majority of the jshint problems are coming from pull requests that I've taken in.  Haven't had time to clean those up yet. It's okay if jshint doesn't pass at the moment since there's a lot of things not passing today.\n. Just wanted to note that I haven't forgotten about this thread.  some other priorities are a bit more pressing, but I'll definitely get back to this.\n. sorry it took me awhile to get this.  I setup a jshintrc file and added it to the repo:\n\nhttps://github.com/ericdrowell/KineticJS/commit/1dec988c27b85b3de4000479930a77ff49a62b96\n\nI have quite a bit of work ahead to cleanup all the jshint errors, and then hook jshint into travis CI.  That will come in time.  In the meantime, having the jshintrc file in the repo at least defines the standard of coding that's expected, and it allows people (like you) to modify the jshintrc file to enforce or relax code quality.\n\nThanks again!\n. your jsfiddle is wrong.  the two2 function sets listening to false again, instead of true.\n. This should all be fixed up now.  I made several fixes to Android touch events + drag and drop this morning.  \n. Thanks for looking into this!  I'm currently working on a change that will enable corner radius for all shapes, including label tags.  This will be released with v4.8.0.  This way, we don't have to implement corner radius logic in each shape separately.\n\nThank you!\n. its in the change log here:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log#452-may-21-2013\n\nyou want to use getType() or getClassName() instead.\n. that's odd.  I found that the chrome 27 bug was occurring when you draw an arc with a stroke, in which the angle difference between the start angle and end angle was exactly 360 degrees.  I found that if it was slightly off, like 359.9999999, Chrome 27 rendered the circles correctly.  This was the fix that I put in.  May have to revisit it again.\n. I'll look into this as soon as I get a chance.  A lot of people have been asking for this.  Stay tuned!\n\nEric\n. you're incorrect.  take a look at this line:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Animation.js#L200\n\nonly one animation loop is used for all animations. \n. Oh I see what you mean, you're referring to the FRAF exclusively.  okay thanks, I'll take a closer look at this :)\n. you should use the least amount of layers as possible, while grouping things together intelligently.  Things that aren't updated often should be placed into one layer, while things that are updated regularly, and with other shapes, should be grouped together in their own layers.  Typically, most KineticJS apps will use between 2 and 10 layers.\n. That is correct.  I ultimately decided to use an inheritance pattern that was dead fast, in exchange for less flexibiilty.  I have a todo item to revisit the inheritance mechanism to address some of these issues, and I'll take a close look at lavrton's solution as well :)\n\nThanks for this!!\n. by the way, forgot to mention that you can use the getClassName() to get the class name of any node.  you can also use getType() to get the type of node.\n\nI'm closing this ticket for now, but have added a link to it from my todo list when I get around to taking a look at the inheritance model again.  Thank you for this!\n. it's necessary - you shouldn't ever be manually putting things into the stage container.  Just overlay the stage container on top of your image.\n. yes, Chrome 27 is very very buggy in regards to html5 canvas.  So far it doesn't appear to be KineticJS related.  staty tuned on this.\n. I made several fixes to Android touch events + drag and drop this morning, so we should be good.  Please reopen this ticket if there are still issues.\n. This was done intentionally in order to create smooth drag and drop operations.  If we were to continually stop and restart the animation, you would notice a slight lag each time you moved the mouse.  Closing this for now, but I'll put more thought into it.\n. yep, KineticJS ignores the anti-aliased pixels.  If you're drawing a 1px diagonal line, and you want it to be detectable, you need to create a custom hit function to define the hit region.  You probably will want to create a hit region that's a line which is about 5px thick or so.  Here's an example on creating custom hit regions:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-custom-hit-function-tutorial/\n. hi there, actually, KineticJS mimics native JS events and jQuery events exactly.  What you want is the \"mouseenter\" and \"mouseleave\" events, which KineticJS supports.  For more info about the difference, just do an online search for mouseover vs. mouseenter\n. it's a problem with your code.  1 out of 5 times, your randomized color index is out of bounds and returns undefined.  you need to use (len - 1) instead of len.  Updated it here http://jsfiddle.net/HCV8b/59/\n. can you create a jsfiddle showing the problem?  my unit tests are passing for id selectors\n. nice!  makes sense.  I'll pull this in soon.\n. Thanks again Gabriel.  I had to make some changes to the logic, because it turns out that we do also need preventDefault() for certain desktop browsers because the drag and drop operation triggers a drag and drop of the whole canvas element for the html5 drag and drop API which has undesired effects.  I couldn't merge in this pull request due to the extensive changes, but I still gave you credit in the change log.  Thanks!\n. ah, yes, this has been resolved.  There were some antialias issuese with the event detection awhile back but they were resolved with this block of code:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Layer.js#L14\n. when clicking on a circle, move it to its own layer first.  i.e. you need to create a layer specfiically for animations, such as animLayer = new Kinetic.Layer();  Also, windows phones will generally be a bit slower than apple or Android\n. This is very cool!  I'll look closer into this soon.\n. Hi again!  I was just looking at this pull request again - what do you think about creating a new distortion transformation that all nodes can use, not just images?  Currently KineticJS supports translate, rotate, scale, and skew.  We could do something like this:\n\nvar circle = new Kinetic.Circle({\n  radius: 5,\n  fill: 'red',\n  distortion: [0, 0, 10, 50, 10, 100, 0, 10]\n});\n\nWhat doyou think?\n. I'll take a crack at integrating the distortion transform into Node sometime this weekend and I'll let you know what I find.  Stay tuned!\n. Thanks for this!  I'm going to tweak it a little bit such that selectors are separated by commas to mirror CSS selector rules.\n. hey gaddie, it looks like the change broke the unit tests.  There were several problems with the logic that was introduced.  I fixed them up, and cleaned up the get method even further:\n\nhttps://github.com/ericdrowell/KineticJS/commit/e6a9324d50c98c97292b062131f984729792dc35\n. no worries!  Thanks again for getting this rolling\n. +1\n. you need to redraw the layer with layer.draw()\n. for performance reasons, I chose not to auto redraw the hitgraph, for the same reasons that I do not redraw the scene graph whenever you update node properties.  to redraw the hitgraph, you should be able to do the following:\n\nlayer.drawHit()\n\nlet me know if this doesn't work for you\n. currently no, you need to do something like this:\n\nlayer.add(child);\nchild.setZIndex(5);\n. +1 Jason Follas made some changes awhile back that addressed this issue.  Should be fixed.  Please reopen if it's still an issue.\n. don't add layers inside layers.  you need to add groups inside layers.\n. Thank you for doing this!  Looking at this right now.\n. At a quick glance, these look like great changes!  I've been meaning to add color / convolution filters.  I'll go ahead and pull this in and play around with it and let you know what I find.\n\nAs a site note, KineticJS is starting to get a bit filter heavy, so I probably need to create separate builds just for the filters.  Stay tuned on that one.\n. nice work!  The filters look great.\n. you should update the Filter files with the @author tag for credits\n. Hi again, I was looking more into your code and you've done some really awesome work!  A few questions / comments:\n\n1) did you notice that the convolve related filters create a black border around the image?\n\n2) is there a difference between your Lighten / Darken and the currently existing Brighten filter?  Brighten can take positive values to brighten the image, and negative values to darken it\n\n3) You've put a lot of filters inside the same file, because they all use the same functions, but with different params.  Perhaps we should change Convolution to ConvolutePack, to indicate that the file includes multiple filters.  Same comment for the Colors filter. Maybe it could be ColorizePack.  This will be helpful when people create custom builds: http://kineticjs.com/configurator.php.  On the topic of naming conventions, you'll notice that all of the currently existing filters are verbs for consistency.  Can we do the same for yours?\n\n4) Another neat thing about filters is that they are tweenable.  Here's an example: http://www.html5canvastutorials.com/kineticjs/html5-canvas-tween-blur-filter-with-kineticjs/.  This is only possible if the filter params are numbers.  Do you think its possible to create wrappers around your existing Filter functions to allow numeric parameters?  This way we could tween your filters, such as Emboss and Sharpen.  i.e. an emboss value of 0 could mean no Emboss, and a value of 100 could mean a lot of Emboss.\n\n5) is there a difference between your blurring functions, and the currently existing Blur filter?  Should the Blur filter be removed in favor of your filters?\n\nThanks again for your awesome work!  If you don't have time to work on these any further, no worries.  I'd still like to get your thoughts.\n. KineticJS handles this automatically if you use the Kinetic.Animation for your loop.  Everything hooks into the KineticJS animation engine, which means that layers are only redrawn once per frame, no matter how many animations are tied to a particular layer.  \n. don't do that, it will trigger a redraw hundreds of times per second.  you need to use batchDraw().  I'll be releasing a new version soon with an improved version of batchDraw that performs much better than the current version.  It will be apart of v4.6.0.  Watch out for that.  When it's released, you should replace stage.draw() with stage.batchDraw();\n. absolutely.  stage.batchDraw() will be perfect for this case as well.  just keep checking for v4.5.5 to be released.  Should be released in the next couple of weeks.\n\nIn fact, you could technically always use stage.batchDraw(), unless it's absolutely necessary to redraw something immediately.\n. now that Kinetic supports batchDraw, closing this ticket.  Here's the tutorial:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-batch-draw/\n. Interesting, I'll add this to my todo list.  Thank you!\n. That's pretty interesting.  I've had several other requests that are similar to this one.  Perhaps any attribute could be set to a function.  I'll add this to my todo list.  My only concern is the possibility that it could impact performance when constantly checking if things are functions are not.  stay tuned.\n. can you provide a screenshot or jsfiddle?  KineticJS automatically handles pixel ratio adjustments by increasing the stage width and scale to create a sharp image.  Are you saying that the canvas appears to be twice as big as it should be, or just has a style that's set to twice the amount that you're expecting?\n. ah shoot, that's too bad.  The quick fix would be to disable the pixelRatio by just hard coding it to 1.  I'll look into creating a public way of setting or retrieving the current device pixel ratio.\n. Closing this ticket for now because I'm in the process of adding more docs to explain pixel ratio.\n. mobile events are working for me on this page:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-mobile-events/\n\nI'm using iOS.  What device are you using?  what code are you using?  jsfiddle demo?\n. you need to read through the change logs to see what changed, or go through the tutorials\n\nwww.kineticjs.com\n. can you create a simple jsfiddle showing the problem?  It will be easier to debug there.\n. great observation.  I'll take a look, as there are probably several solutions to this.\n. Thanks guys for bringing this up.  It will be addressed soon.\n. @hohmann that will definitely help, but may not be ideal, because it means that the first tween will render immediately, and the other tweens will have to wait for the next animation loop to start tweening.  This could result in the first tween jumping ahead at first.\n. no updates so far.  The fix will be in the next release, v4.7.3, which will be released sometime next month.\n. This is by design. the dragstart event should not be fired until the mousedown event has occurred, and the mouse has started to move.  It sounds like you should just be hooking into the mousedown event instead.\n. Thanks for looking into this!  I'll take a look as soon as I get a chance.  KineticJS v4.6.1 will resolve all of the pixel ratio issues\n. thank you!  this is the same fix that I came up with.  It turns out that I also did some refactoring for the clip() method so I couldn't pull in your request.  I'll still credit you in the change log though.\n\nThanks again!\n. Haven't forgotten about this, will take a look as soon as I get a chance.  This definitely needs to be addressed one way or another.\n. question: is it true that checking the 4 pixels around a pixel with an alpha < 255 is accurate?  I would think that it's possible that adjacent pixels could also have an alpha < 255 depending on the angle of the edge.  We could go to all 8 pixels, but I wonder if that's accurate as well.  I'll try to manually merge this in since it's been awhile. (sorry about that)\n. Okay, here's the deal.  I started reviewing my code for getIntersection, and I was horrified.  There's lots of bad stuff in there.  You are definitely on the right track, and I like your unit tests.  However, rather than merging in what you have, I've chosen to rewrite the getIntersection methods, and pull in some of your logic (I'll give you credit in the change logs).  Stay tuned!\n. fixed.  The algorithm now looks at the pixels around the pixel of interest if it's anti-aliased. https://github.com/ericdrowell/KineticJS/commit/aa78d632dbc89ace518890946dfc3947bcd74d89\n. Thank you so much for getting this started!  I'll add your name to the release schedule.\n. and this one: https://github.com/ericdrowell/KineticJS/commit/658064b5ef1d22a85b6fe7f507a0b6851a5cf216\n. node._id is a Kinetic generated id for each node that shouldn't really be useful for you.  Also, you should not use spaces for names and ids (think CSS selectors).  you can use \"-\" or \"_\"\n. +1 support for this was added with v5.0.0.  I have yet to create a tutorial for it.\n. Here's a lab that uses an array of filters:\n\nhttp://www.html5canvastutorials.com/labs/html5-canvas-animals-on-the-beach-game-with-kineticjs/\n\nOn mouseover, a brighten + blur filter is applied\n. +1 you can now cache any node, and apply filters to any node, including layers, groups, and shapes.  I believe this was introduced with v5.0.0\n. here's an updated filter example:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-invert-image-tutorial/\n\nIn this tutorial, we're applying a filter to an image, but you can apply filters to anything.\n. exactly.  This is a constraint of the w3c spec for where strokes are positioned, so the rules are a bit different than Photoshop.\n. will do, as soon as I get a chance.\n. Thanks for looking into this.  And yes, these are some of the things that I've addressed with v4.6.0.\n\n1) yes, the getStage() method has to walk up the node tree everytime it's called.  I was considering adding this to the new caching system\n\n2) clear() is a bit expensive, as expected.  The cost of clearing can be reduced with the new clip feature that's being added in 4.6.0\n\n3) the _fireAndBubble method was being called hundreds of times per redraw because draw events were bubbling. draw events no longer bubble as of 4.6.0\n\n4) this is the getter method used for all attributes.  It only shows up in your results because it's called so often.  It's a fast method\n\n5) this is the getParent method.  Same as number 4, it's fast, just called often\n\n6) the visible attr has already been added to the new caching system.  Previously, it would crawl up the node tree to calculate visibility every time it was called.\n\n7) drawScene was further optimized with 4.6.0.  the _applyAncestorTransforms method is much faster, because I'm now double caching matrix transforms.  I'm caching the transform matrix at the node level, as well as the absolute transform matrix.  This has sped things up quite a bit.  This is also where the draw events were being fired, which was expensive in 4.5.5\n\n8) _applyAncestorTransform, as mentioned above, this is no longer an issue because the transforms are cached.  Here's what it looks like if you're interested:\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Node.js#L863\n\nThanks again for looking into these!  These findings validate all of the work that I've been working on this weekend.  So far, KineticJS is a little over 10% faster with all of these fixes.  The only one that I haven't addressed yet is number 1, but I'll do that before I release 4.6.6\n\nCheers,\n\nEric\n. Hi there!  Did you get my message about possibly joining the KineticJS team?  You've done some fantastic work with the filters, so we'd love to have you.\n. This is an interesting idea, although I'm not sure it would fit cleanly into the KineticJS node tree model.  I.e., it might be odd to set text properties on a stage or layer node.\n. I have a todo item for the next release (v4.6.0) to reinvestigate the text default logic, so I'll definitely keep this in mind when I get there.\n. this is the expected behavior.  if you want to scale the line and circle together, you need to scale its container (the layer).  You could also create a scaled group, and then add the shapes to that group. \n\nvar layer = new Kinetic.Layer({\n  scale: 2\n});\n. Truly sorry for the headache.  This issue will be fixed by v4.6.1 or v4.6.2, depending on priorities.  Thanks for hanging in there!\n. good to know, thanks!  I'm planning on knocking out all of the device pixel ratio issues in the next release, v4.6.1.  Thanks for the heads up!\n. Interesting, this appears to be a bug with Firefox, which they've marked as WON'T FIX\n\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=809788\n\nIt's not KineticJS specific, and there's not really a clean way to work around this.  The Firefox devs seem to be a bit stubborn about this issue.  I'm closing this for now, but will keep it in mind.\n\nBtw, the point of the pixel ratio adjustments is to ensure sharp drawings.  On devices with a pixel ratio != 1, the canvas drawings will appear blurry without the adjustments.  Overall, it's very good to have this in place, because it effects many mobile devices, tablets, iMacs, etc.\n. As a reference, there does appear to be a possible solution to obtain the  Firefox zoom level\n\nhttp://stackoverflow.com/questions/1713771/how-to-detect-page-zoom-level-in-all-modern-browsers\n\nBut it's extremely hacky, and may possibly have unwanted side effects.  If you really need this, you could try and detect when the zoom has changed:\n\nhttp://stackoverflow.com/questions/6163174/detect-page-zoom-change-with-jquery-in-safari\n\nand then try out the above approach to get the zoom level, adjust the pixel ratio accordingly, and then recreate the layer canvases.\n\nIt's a lot of hoops to jump throug to work around a Firefox bug :(\n. Thanks!  Fixed: https://github.com/ericdrowell/KineticJS/commit/ae66350d7f7c6d96653ef321c7a5ee833ed6d82e\n. I don't think this is an elegant solution.  As pointed out by the person asking the question, it would make sense to have a way to apply a transform to a node, such as shape.setTransform().  I'll add this to my todo list, thanks!\n. you were using ids incorrectly.  Like DOM, ids must be unique.  you were using an id=overlay for multiple shapes, so only the last id was accessible.  I changed the id to a name.\n\nhttp://jsfiddle.net/7YJMv/\n\nAs a side note, you can also select nodes by type, such as Layer.get('Group'), or group.get('Rect').  This way, you don't have to add names to everything.  Also, you'll see improved performance if you use event delegation.  example here:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-get-event-shape-with-kineticjs/\n. Thanks!  Each of the browsers handle dash arrays differently, so I probably just need to update the dash array logic.  That can be found here:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Canvas.js#L385\n\nI'll try to get this fixed up by the next version.\n. ah yes, IE9 and IE10 do not support line dashes, so KineticJS falls back to a solid stroke.  IE11, however, will support line dashes.  Safari currently does not support line dashes, although I believe they plan to with the webkitLineDash property.  It does not work as of today.  Here's the KineticJS code that handles the cross browser compat:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Context.js#L297\n\nSo long story short, as of today, dashed lines are only supported in Chrome and Firefox, and will be supported soon with IE11.\n. I'll have this setup for v5.0.1, coming out in a couple of weeks.  I need to auto update the bower package info with the grunt build.  Stay tuned on that.\n. done.  The bower json file generation has been hooked into the grunt build, and the kineticjs minified file has been added to root.  Let me know if this doesn't work for you guys.\n. there's actually not much desktop specific code at all.  You'll only find a little bit in Stage.js, about 100 lines.  compared to the 14,000 lines that makes up KineticJS, this is pretty insignificant. \n. actually I don't believe this is necessary.  Do you know of any articles discussing <!DOCTYPE> vs. <!DOCTYPE html>?\n. Closing this because the test suite has been rewritten.\n. ah.  Very interesting use case.  Do you think an array of box objects would work? i.e.\n\ngroup.setClip([\n  [0, 0, 100, 50],\n  [0, 50, 50, 100]\n]);\n\nI can add this functionality to an upcoming release.\n. I'm unable to replicate this.  I think there must be something else going on.  can you create a jsfiddle demonstrating the problem?\n. scratch that, I am able to replicate the issue.  It only occurs if you have an offset.  I'll get this fixed up with v4.6.1.  Thanks!\n. precisely.  I ust wonder if we can hook into the native support for performance reasons.  I haven't had a chance to look into this one.\n. It turns out that this is a Chrome specific issue with HTML5 canvas.  It's not an issue with KineticJS, and I don't believe there's any way to correctly resolve the issue from KineticJS's end.\n\nFor the time being, the work around is to not use huge scale factors, but instead scale the position of each point that makes up the line.\n. Thank you!\n. yes, I need to add an attr blacklist to the clone method to make sure I don't clone the id.  This fix will probably make it ot the v4.7.1 release\n. Thanks everyone!\n\nGoogle Chrome clearly doesn't have any unit tests for canvas changes.  They break stuff every other release.\n. Google Chrome is notorious for releasing canvas bugs.  It seems like every release breaks something.  Let's give this a couple days to see if they resolve the issue.\n. This logic is already built into the getHeight() method.  Check it out here:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/shapes/Text.js#L167\n\nYou should always use getHeight to get the height of the text object because it does all of the calculations for you.\n. The confusion is my fault for not writing better docs for the method.  I'll fix this soon.\n. ah yes, great catch.  fixing now.\n. Sorry guys, this is fixed. It will be in the next release in about a week\n. you're overwriting the drawFunc with a method that doesn't use the canvas renderer methods, so you lose out on events.  You have two options:\n\n1) use the Kinetic.Path method and pass in SVG data like the path tutorial here:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-path-tutorial/\n\n2) create a Kinetic.Image and set the image attr to your svg shape, and then use createImageHitRegion to create a hit region, like this tutorial\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-pixel-detection-with-kineticjs/\n. It should. If it does not, you could try scaling it with setScale()\n. Thank you!  I'll try this out as soon as I get a chance.\n. as per the documentation, functions are not serializable (security constraints).  You'll have to reapply the filters after you've deserialized the JSON.\n. Thanks Jason \n. very cool!  At some point soon, I plan on adding a gallery of extensions to the KineticJS website.  These extensions (plugins) should be hosted on individual github accounts, and KineticJS will link to them (along with user reviews).  So to answer your question, you should create a separate github project, with documentation about how to use your plugin.  \n\nThanks so much for putting this together!  I'll keep this ticket open until I've built the gallery page.\n. Good call. This will definitely get fixed, it's just a question of when\n. +1 yes this is a bug with Chrome and HTML5 Canvas.  Hopefully they resolve this soon.\n. By the way, the width of text varies from browser to browser.  You should be taking text.getWidth() into account for the next x calculation.  I believe this is what you're seeing.  Please reopen if this doesn't help.\n. Let me clarify a bit on what's happening.  Currently, when you drag and drop a shape, the hit graph is not redrawn on each animation frame to help improve drag performance.  As a result, shapes are temporarily undetectable. \n\nWhat you really need is true collision detection + dragover / dragout.  I have plans to support these, but haven't gotten around to it yet.\n. This is fixed with v5.0.0 which will be released this week.  Here's the changelog\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n. just to clarify, this does appear to be related to TextPath specifically.  If you just use Text, everything works correctly:\n\nhttp://jsfiddle.net/BaTxP/\n\nYou mentioned that there may be missing restores, so I'll check out the TextPath draw func.  Also, you use layer.getContext().getTrace() if you want to see strict trace string, or layer.getContext().getTrace(true) for the relaxed trace string\n. fixed.  You were right Jason, somehow I deleted a restore() from the text path draw func.  Fixed it up, and added a test that uses the new nifty context trace :)\n. Hiya, there's three different topics in this ticket:\n\n1) Retina display: can you explain what you mean by \"works fine on non-retina, but not on Retina\"  What exactly is not working?  is the problem being caused by the JS error that you mentioned?  If there is a problem, it's probably related to pixel ratio calculations.  Retina displays typically have a pixel ratio of 2.  Try setting Kinetic.pixelRatio = 1 before you've instantiated any layers.  This will prevent pixel ratio calculations.\n\n2) \"Unable to create image hit region\" This warning is thrown if you've created an image hit region for an image that's not on the same domain as the code executing it.  In other words, your app needs to be running on a web server. It won't work locally.  This is a security constraint set by the w3c.\n\n3) the event.layerX error is probably related to a logic change that was made recently with the setMousePosition method.  We'll look into this.\n. I was thinking the same thing.  the current logic isn't sound anyways, because if evt.layerX is zero, we are still falling back to the _getContentPosition() block on line 580.  we should split the logic up into if else blocks, and also cache some of the variables.  I'll take a look real quick\n. it appears that this is a jQuery warning, not an error:\n\nhttps://drupal.org/node/1420984\n\nare you using jQuery on the page as well?\n. scratch that, it's just a Chrome warning.  There's a lot of jquery threads about this because people who are using jQuery are seeing this warning as well.\n. perhaps we should just check for the layerX case at the end of the ternary.  I'll keep looking.\n. @ellenm1 what device are you using?\n. @jfollas what do you think of this commit above?\n. @jfollas actually, I think we can remove evt.layerX/Y entirely.  FF appears to support evt.pageX/Y.  Check the commit above.  what do you think?\n. @jfollas okay what do you think of the above commit.  We are using UA detection now.\n. This should be fixed up now.  I resolved several pixel ratio issues.  They will be added to the 4.7.3 release going out this weekend.  Please reopen this ticket if your issues are still not resolved.\n. is this working now?  What was the issue?\n. greensock is really nice.  Definitely recommend checking it out.\n. KineticJS core will probably never support inertial scrolling.  This is more appropriate as a plugin (like the Greensock plugin)\n. you need to just use this.clear().  The clear() method is now in the Context class.  i.e. you can clear the canvas doing one of these:\n\nlayer.clear();\n\nor\n\nlayer.getCanvas().getContext().clear()  \n. ahhh, I see what you mean.  This is a very, very bad bug!  Just fixed it up.  layer.clear() now also correctly clears the hit context, and I added unit tests to make sure this doesn't happen again.\n\nThanks guys!\n. I'll release 4.7.1 sometime today or tomorrow with the fix.\n. replaced fill() with fillShape() in the hit draw function for Sprite.  This was a regression introduced with the major refactorings done for 4.7.0\n. Haven't been able to look into this yet, but one thing you can try is to force the pixel ratio to 1 like this:\n\nKinetic.pixelRatio = 1;\n\nand you'll need to do that before you instantiate any layers.  Devices with retina displays have a pixel ratio of 2, which means that KineticJS has to do a bit of extra work to sharpen the scene graph.  Setting it to 1 prevents all of this extra work from happening.\n. I can look into this when I get a chance (won't be for awhile though, unless someone else from the team gets a chance).  It's probably pixel ratio related.  As a work around, you can set Kinetic.pixelRatio = 1.  You can also use the Kinetic.UA object if you need browser or device dection.\n. Thanks for looking into this!  Not sure if I'm entirely sold on bringing in 200 lines of JS to fix a problem with iOS 6 and 7 for very large images.  I'll think on it\n. Let's do it.  Would you like to submit a pull request?  You can use Kinetic.UA to detect the user agent\n. this will make it to the next release, which will be later this month, or early December.  The suggested fixes in this thread are on the right track, if you need a quick fix.\n. nice work!  This is a very interesting idea.  Originally I was supporting user defined drawing functions which is very flexible, but requires a bit more work to setup.  It seemed like 99% of people who were interested in using clip functions just needed a rect, so I removed the user defined functions, and added the clipping bounding box.  This also makes it easy to transition.  At any rate, I'll keep this in mind, and I'll come back to this in the near future.\n. Closing this one for now.  I believe that if I decide to support custom clipping shapes in the future, it would be cool if it could hook into an actual arbitrary shape node (like a Star for example) so that the clipping function can be updated, animated, and tweened.  Thanks again for bringing this up!\n. that's odd.  I have an Android 4.1.1 Samsung Galaxy Tab 2, and it seems to be working great.  what happens on your device?  Exactly which device do you have?\n. you need to use groups.\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-complex-shapes-using-groups-with-kineticjs/\n. hiya!  One thing that changed form 4.6.0 to 4.7.2 is the way that nodes are rendered who have both a fill and stroke, and an opacity or shadow.  Before 4.7.2, nodes with both a fill and stroke who also had an opacity or shadow were not rendered correctly due to the canvas spec.  I.e., if you have a shape with both a fill and stroke, and an opacity was applied to the shape, you could see the fill beneath the stroke, because the canvas applies opacities to both the stroke and fill.  v4.7.2 addresses this use case by rendering those shapes onto a buffer canvas, copying the result onto the scene canvas, and then applies an opacity to the whole shape.  This means that performance will suffer a bit for those use cases.\n\nDoes your application have any shapes with both a fill and stroke, and also has an opacity or shadow applied?  If so, you'll see much better performance if you remove one of these properties (stroke, opacity, or shadow).  If not, you could use toImage() to cache a shape as image so that it doesn't have to be redrawn.\n\nThoughts?\n. yes, Ill add a config option that enables \"lazy opacity and shadows\" to help boost performance, if the dev doesn't care about the stroke / fill problem with canvas.  This will be added to v4.7.3\n. 4.7.3 schedule: https://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n. @villabolo that is correct.  in v4.7.3, I'll add a config option that improves performance but degrades the rendering quality if so desired (essentailly making things render as they did before 4.7.2)\n. i.e., I was thinking of adding a new strokeShadowEnabled=false, which means that the shadow is only applied to the filled portion of a shape, which improves performance (this is the way shadows worked automatically in v4.7.1 and earlier).  \n\nLikewise, I may add another attribute that reduces opacity rendering quality for shapes with both a stroke and fill to further improve performance (as it was before v4.7.2)\n. Later this month.   I released v4.7.3 early because there were a lot of pixel ratio issues that needed to be hot fixed.\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n. the answer to this one is pretty straightforward - you should never append DOM elements to containers that a library has created for you.  The kinetic-content element is for KineticJS elements only.  you need to do this instead:\n\n```\n<div>\n  <div id=\"container\">\n    <!-- Kinetic adds stuff here -->\n  </div>\n  <!-- you can add more stuff here -->\n</div>\n```\n. the hit context should not render shadows.  This is by design.  Can you be more specific as to how you are getting an error?  can you copy and paste the exact error you're getting?\n. clipping works correctly in v4.7.2 as far as I can tell.  can you create a jsfiddle that demonstrates the problem?  I suspect that there's something in your code causing the issue.\n. never mind, I was able to replicate the issue.  Clipping isn't working correctly when the container has shapes with shadows.  I'll get this fixed up by the next release.  Thanks!\n. the API slightly changed.  if you want to hook into a click event that's anywhere on the stage, you need to use:\n\nstage.on('contentClick', function(){...});\n. Thank you!\n. v 4.7.0 and 4.7.2 are working correctly for me.  What browser and device are you using?  can you be more specific than \"it bugs out\".\n\nAlso, try v 4.7.2.  There were some pixel ratio issues with 4.7.0, that may be causing you problems on a device with retina displayl\n. fixed!  This will be in the 4.7.3 release going out this weekend.\n. can you post the code on jsfiddle?\n. Are you using Firefox with the zoom != 100%?\n. I think you guys are misunderstanding mouseover, mouseout, vs mouseenter and mouseleave.  Do you guys have experience with those events when managing DOM?  KineitcJS matches DOM event behavior exactly (as well as jQuery).  I updated the jsfiddle to use mouseenter and mouseleave instead\n\nhttp://jsfiddle.net/5eQDM/\n\nDo a search online for mouseenter and mouseleave and tell me what you think.\n. are you attaching mouseenter and mouseleave to the container node? i.e. a group or layer.  Attaching mouseenter or mouseleave directly on a shape will have the same result as mouseover or mouseout.\n. Thanks @kzhdev I'll take a look as soon as I get a chance.  BTW thanks for looking into all these issues.\n. fixed!  https://github.com/ericdrowell/KineticJS/pull/623\n. Yep this was the issue.  fixed + some refactoring with this commit: https://github.com/ericdrowell/KineticJS/commit/224436aa182a87a6f54a7eafd2f771d13ac7e119\n\nThis will be in v4.7.3 released this weekend.\n. Here, I created a JS fiddle for you and everything seems to be working correctly:\n\nhttp://jsfiddle.net/6KSbv/\n\nI suspect that there's something weird going on with your code to cause the error.  Try and see if you can update the jsfiddle to replicate your issue.  If you can, please reopen this.\n. a fixed request animation frame (FRAF) yields better performance for drag and drop.  Without it, the node that you're dragging and dropping will lag a bit behind the cursor.\n. It looks like you're running into a very slim edge case.  It looks like KineticJS is storing an invalid click start position because you're creating the rectangle on mousedown.  When the mouseup event is triggered, the error is thrown there.  As a work around for now (you should be doing this anyways for performance) you can add listening: false to the rectangle so that it's not detectable.  Here's the working fiddle:\n\nhttp://jsfiddle.net/JtZ8c/\n. Thanks @pdille I was able to repro this as well.  I was thinking of the same fix that you've proposed.  This should make it to the next release.\n. done!  Thanks guys for your patience.  I have a crazy todo list for v5.0.0 coming out soon, so I've been neglecting the issue list temporarily :P\n. It sounds like we need to create a remove() extender for Images to make sure filter stuff is cleaned up.  Similarly to the Layer extender here:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Layer.js#L202\n. yes, this is a known issue that will be addressed with the next release (v4.3.3).  Thanks!\n. I suppose this could be added in an as enhancements.  It would be a bit of a lower priority compared to the other issues, to it might take a few versions to get it in.\n. Thanks for fixing this Andrew!\n. At some point I need to hook jshint into the build & Travis CI\n. This isn't a bug with KineticJS.  The lab that you're referring to is just that, a lab.  It wasn't built to support that use case.  The lab code needs to change (if your requirement is added in), not KineticJS\n. Can you put together a simple jsfiddle that demonstrates the problem?  My guess is that we are making assumptions based on how the lab is coded\n. I'm not sure you know what I meant - the purpose of creating a JS fiddle is to creating the simplest possible example that demonstrates a problem.  I created this fiddle for us:\n\nhttp://jsfiddle.net/MBQxm/\n\nIt's a simple group that contains two shapes.  If you uncomment the commented out line, the group is correctly offset, and the shapes are in the correct location.  You proposed that changing the offset of a group affects its children position, which isn't true for this jsfiddle.  Am I missing something?\n. thanks @ippo615 !\n. @kzhdev I agree with you that the docs aren't perfect.  Doing my best to continually improve them :)\n. I believe the issue is that we do not need to force the pixelRatio to be 1, and should instead allow the computed pixel ratio to take affect (this happens in the canvas constructor).  i.e., rather than setting pixelRatio=2 for your case, we just need to delete that line entirely.  I'll do some testing and check in the fix if it works.\n. This is fixed up now.  Thanks for taking a look!\n. You need to upgrade to v4.7.4.  Pixel ratio issues were addressed in v4.7.3\n. Closing this for now. Please reopen if v4.7.4 does not resolve the issue\n. +1 this is not a bug, you should not be modifying the transform object directly because you bypass the caching system.  use move(), setX(), setY(), setPosition(), or setAbsolutePosition()\n. Interesting, I'll take a look as soon as I get a chance\n. you cannot run start() until the shape is added to the group, the group is added to a layer, and the layer is added to the stage.  Please reopen this ticket with a code snippet if this doesn't solve your problem.\n. I'll take a look at this when I can.  The right way to go is to to do something like this in Kinetic.Image:\n\nif (Kinetic.UA.browser === 'ios') {\n  // override some methods\n}\n\nthis way the logic is only executed once, when KineticJS is first setup\n. Thanks, I'll look at this again this week.  Stay tuned.\n. Hiya, yes, with v5.0.0.  Here's the release schedule:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n. I'm still in the process of wrapping up the new documentation for all of the API changes in v5.0.0.  It's the biggest release in KineticJS's history.  Since this seems like a pretty burning issue, I'll still try to get this fix in before I release.  I plan to build a beta release and start doing integration testing with Html5CanvasTutorials by the end of this week.  If things go smoothly, v5.0.0 should be released during the weekend, maybe sooner.\n. v5.0.0 was too big of a release, so I had to cut out a lot of things that I was planning on putting in (including a fix for this ticket).\n\nI'm planning on taking a week off and letting v5.0.0 stew a bit more to see if there are any issues (there's already one that I just fixed).  I'll release v5.0.1 the following week (end of January) which will be a small patch that only contains high priority bug fixes.  Here's the revised release schedule so far:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n\nStay tuned!\n. Haven't forgotten about this thread.  I spent a few minutes looking into this, and it's pretty clear that this change could have a lot of side effects.  I feel that it's a fairly high risk change, which means that I need to spend a solid couple of nights reverse engineering stomita's library, and making sure that it doesn't cause side effects with pixel ratio adjustments, event handling, caching, data urls, the toImage method, filters, image size getters, etc.  \n\nIn the past, these types of hacky work arounds for a bug with a specific device, browser, or OS often times aren't worth the effort because they eventually get fixed.  However, there's a lot of people on this thread that clearly need a fix, so I will continue to investigate.\n\nI don't want this to hold back the 5.0.1 patch, which fixes a lot of issues that affects everyone.  So, unfortunately I'll have to push this fix to 5.0.2 and I will get to it asap. \n\nFor those of you that need a fix now, the changes in this pull request look like they are in the right direction.  I'd suggest forking the KineticJS repo and trying to pull the changes in, and see if it fixes your issues.  Even if it does cause side effects, you might not notice them depending on the features of KineticJS that you're using. \n. Thanks!  This is a known issue.  Will hopefully be fixed up soon.\n. *\\* copied from above **\n\nnever mind, I created a JS fiddle which shows that this is working correctly:\n\nhttp://jsfiddle.net/X9U4H/\n\nI created a custom class, instantiated it, cloned it, and ran a method on the clone. It's working as expected.\n\nPlease reopen this ticket if you feel that this is still an issue.\n. no problemo!  \n. agreed, this is something that I've been needed to work on, but it's been de-prioritized.  Would you like to give it a shot?\n. The challenging part is that the defaults are stored inside each getter method.  In order for the toObject method to know about these defaults, we'd have to pull all of them out into some kind of default map that getters can access, and toObject() can access. (not a walk in the park)\n. very smart!  I like that approach\n. can you submit a pull request with this change?  I think this is a great solution.\n. nicely done!!!\n. Thanks for looking into this!  It turns out that I will soon be deprecating the beforeFrame func, and I'll also remove the function deletion behavior.  Soon, you'll be able to do this:\n\nsprite.on('frameChange', function(evt) {\n  if (evt.frame === 2) {\n    // do whatever you want\n  }\n});\n\nThis will be much more flexible, and consistent with other event bindings.\n. Done!  You need to use this instead:\n\nsprite.on('indexChange', function(evt) {\n  var oldVal = evt.oldVal;\n  var newVal = evt.newVal;\n});\n\nThis is available today, and is much more flexibile than afterFrame().  afterFrame has now been removed.\n. Class.extend has been deprecated.  Please use Kinetic.Util.extend instead.  Here's an example class that extends the Shape class:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/shapes/Circle.js\n. +1 v3.x was using a very slow class extender.  It has since been replaced with Kinetic.Util.extend.  Please take a look at some sample shape classes for examples:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/shapes/Circle.js\n. Actually, this is a legit issue:\n\nhttp://jsfiddle.net/qPWja/\n\nneed to call getTextWidth()\n. right.  if you set the width and height property, you're essentially defining a bounding box that the text must fit inside (like a max width and height).  It's not called maxWidth and maxHeight, though, for consistency.  getTextWidth() returns the width of the longest text string in a multi line string.  getWidth() returns the width set by the user, or the calculated width which takes into account padding. \n. cool app!\n\nCurrently I do not intend to support the capturing phase.  Your use case could be easily handled by listening for an event on a Kinetic Node, and then attaching an event handler that traverses the children and does something with each, like this:\n\nnode.getChildren().each(function(child) {\n  // do something with each child, or traverse downwards further\n});\n. Thanks!  I squeaked this one into 4.7.4 because I had to release a hotfix.\n. how odd, I'll fix this and release v4.7.4 this weekend if there's an issue.  Strangely, I have several unit tests that cover touch events which are passing.  Stay tuned.\n. figured it out.  It turns out that KineticJS techincially has had this bug all along, but it never surfaced until the _setPointerPosition() method was refactored in v4.7.3.  The problem was that I was assuming that the touchend event returns a touches array from the event obect which contains one touch element, which contains the touch position.  This is incorrect.  After the refactor, since the touches array length is zero for the touchend event, the x and y coordinates were being defaulted to 0, which does not intersect your shape (unless your shape intersects 0,0) and therefore doesn't execute the touchend event.\n\nI'm adding some tests around this use case and will psh out v4.7.4 shortly.\n\nThanks!\n. v4.7.4 is now available on kineticjs.com.\n\nThanks again!\n. this would be a great stackoverflow question.  Can you repost this there?  Github issues are for bugz\n. btw, I think you're looking for drag bounds: http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-bounds-tutorial-with-kineticjs/\n. Try updating to the latest version and see if it's still an issue.\n. Thank you for this!  This is quite involved, so I'll need to look closely as soon as I get a chance.  Stay tuned.\n. This is actually a bug with chrome - it doesn't apply shadows correctly to elements copied from a buffer canvas (while all other browsers do).  The next version of kinetic will offer some options to get around this, but ultimately it's an issue with Chrome.\n. 4.7.2 includes logic to essentially fix a bug with the w3c spec in regards to shadows.  If you draw a shape that has both a stroke and fill, and you apply a shadow, the shadow is applied to the stroke and fill separately.  For this case, 4.7.2 draws the shape onto a buffer canvas, copies the result onto the visible canvas, and then applies a shadow.  While this produces the correct result, it's slower than drawing directly onto the scene canvas.\n\nTo remedy this, 4.7.4 will offer a config option to lazily render shadows, such that the result isn't quite correct, but it's performant.\n\nHere is the logic that determines if a buffer canvas is needed:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Shape.js#L221\n\nIn the meantime, if you avoid this condition, you can avoid using the buffer canvas copy.  You can also get around this by caching your shapes with toImage().  \n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-shape-caching-with-kineticjs/\n. Way cool!  I'll take a look as soon as I can\n\nEric\n\nSent from my iPad\n\nOn Nov 6, 2013, at 9:41 PM, Anton Lavrenov notifications@github.com wrote:\n\n> Hello. I made a little plugin that helps me to display html inside canvas.\n> Reason: it is hard to display some html elements inside kineticjs stage, because:\n> 1. I have to create element and take care about positions.\n> 2. It is REALLY hard to make it draggable - I have to use external libs.\n> \n> https://github.com/slash-system/KineticJS.HTML\n> Demo: http://jsfiddle.net/lavrton/3Tybj/\n> Note: html is displaying as IMAGE!\n> \n> Does it usefull for someone else?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. Can you create a demo page for ths?\n. Thank you!\n. This isn't a bug with Kinetic.  It's a bug with earlier versions of Android:\n\nhttp://www.html5gamedevs.com/topic/114-canvasclearrect-bug-in-android-stock-browser/\n\nThe work around is to define your layer and stage, and then add layers to the stage with a timeout (I used 50ms and this worked for me)\n. I can verify that drag and drop on Android is messed up right now - it's buggy and jumps.  I discovered that the problem is that touchmove and mousemove and interfering with one another (on Android, apparently both are firing).  Also, drag and drop leaves behind a ghost shape.  Looking into this.\n. fixed:\n\nhttps://github.com/ericdrowell/KineticJS/commit/8fcd882ba5d2da288c846d9a76911729e7d56728\n\nI didn't realize this, but Android was detecting both touch and mouse events which was causing issues. Also added touchmove throttling to improve drag and drop performance.\n. Thanks again!\n. thank you!\n. can you be a bit more specific here?  what exactly is not working as expected?\n. did you mean to close this ticket?  Reopening it just in case.\n. can you repost this on Stackoverflow so that other people can see the answer? (this is a general question, not a bug)\n. reopening because I still want to track this.\n. Thank you guys for looking into this. I'll have a patch for this soon. Chrome seems to break canvas functionality on a pretty regular basis. I guess they don't do any testing before releases\n. sorry guys, haven't been able to look into this yet.  I'm planning on taking a look tomorrow.  Sorry for the delay!\n. unfortunately, I can confirm that Google Chrome is the buggiest browser out there in regards to HTML5 Canvas.  They seem to break things with every release.  Even simple things like drawing circles!\n. +1\n. thank you!\n. You're correct, assuming that there are no other animations running alongside the sprites.  For cases when you are running other animations, tweens, or dragging and dropping stuff, while sprites are animating, you don't want to only refresh a layer when a sprite is updated.  Also, for people who are using Sprites with different frame rates, the layer redraw rate is no longer constant.\n\nEssentially, you have a special use case, in which the only thing driving layer redraws are sprite animations, and each of your sprites have the same frame rate.  What I need to do, is to add logic that detects this condition, and then redraws layers only when the sprites update.  The moment that another animation or tween is detected on the same layer, Kinetic would have to switch to the current model.  I'll add this to my todo list, thanks!\n. Thank you!\n. I'm not sure if I ever tested stage cloning.  I'll add this to my todo list, thanks!\n. Yikes that looks pretty awful.  I'll try and take a look tonight or tomorrow to see what's going on.\n. I am SO glad you brought this up.  Thank you!\n\nSo first off, I do have some perf tests in place, but they don't benchmark performance for really old versions of Kinetic (v3.6.2 is ancient).  So I haven't seen the extreme perf difference.  You are right, newer versions of Kinetic are about 2-4x slower than 3.6.2.  Believe it or not, v4.7.4 is a bit faster than 3.6.2 if it weren't for a few features.  On my system, your 3.6.2 test was running at about 36fps, and the 4.7.4 was running at 8fps.  Here's a breakdown of new features that are causing the perf issue:\n\n1) each layer redraw actually draws the shape on two canvases, a scene canvas and a hit canvas.  This enables nearly instantaneous event detection.  Event detection was extremely slow in versions prior to 4.0.  However, this can be disabled by setting listening = false for each shape, or at the stage level.  This brought the fps up to 14\n\n2) newer versions of Kinetic support grouping and node nesting, and therefore theres a bit of transformation matrix math that's needed for each redraw each time a transformation property is changed (i.e. position).  Disabling grouping gets us up to 22fps (this is not yet a feature built into KineticJS)\n\n3) newer versions of KineticJS support event pub/sub, which means that you can hook into attr changes.  Each time an attribute changes, a before and after event is emitted.  disabling these events gets us up to 24 fps (not yet a feature in KineticJS)\n\n4) setPosition() is a lot more flexible now.  you can do setPosition(x, y), setPosition([x, y]), setPosition({x: y}), and even setPosition(n) which sets both x and y.  While convenient, this incurs a per overhead.  Disabling this features saves another 2fps and gets usu up to 26fps\n\n5) Now for the big perf problem.  Newer versions of KineticJS support all kinds of different stroke and fill styling options which older versions of Kinetic would drool over.  This logic is handled in the _fill and _stroke methods here:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Context.js#L492\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Context.js#L526\n\nnone of these options were available with v3.6.2.  if youw anted to swap out or change stroke and fill styles, you'd have to do so in your custom draw function.  This means that the developer would have to do a lot more work.  Disabling _fill and _stroke, and just filling the rectangle directly saves us a whopping 13fps, which gets us up to 39fps\n\nso, technically you can bypass stroke and fill by doing something like this:\n\n```\n      return new Kinetic.Shape({\n        drawFunc: function(context) {\n          var _context = context._context;\n          _context.beginPath();\n          _context.rect(0, 0, 10, 10);\n          _context.closePath();\n          _context.fillStyle = 'red';\n          _context.fill();\n        },\n        listening: false\n      });\n```\n\nyou can access the raw context of the KineticJS context with _context.  So, if you don't want the convenience of all the styling options with 4.7.4, you can draw your stuff manually with native canvas methods\n\nSummary:\n\nyou've already avoided the fillStrokeShape(this) method in your tests, so you can gain another perf improvement by setting listening: false on the stage.  This should get you another 6fps.  This is soemthing that I've been meaning to do automatically.  When there's no events bound to an element, it should automatically not be listening.  I'll make this chagne soon\n\nThe transformation matrix logic is heavy.  That killed 8fps.  I might consider giving developers the option to disable node nesting and bypass the transformation matrix logic entirely.  This would be a huge effort, but might be worth it\n\nDisabling automatic event firing will get us another 2fps.  I may need to introduce a mode where you have to explicitly subscribe to events.  This would be a lower ROI effort so it might be awhile before I get to this one.\n\nFinally, the overloaded functions, and automatic conversion of different arguments with setPosition (and other methods) reduces our fps by about 2.  While convenient, maybe it's not totally necessary.  I might remove this entirely and just force people to use a certain format.\n\nLooks like I have a lot of work in store :P\n. uncommenting context.fillStyle just means that the html5 canvas context is doing more work because it's setting the fill style over and over (which is needed if you want colored rectangles)  This isn't a side effect of KineticJS, it's just plain old canvas.\n\nfor now, the easiest way to get a perf boost is to set listening=false on each shape.\n\nP.S. this ticket has inspired me to release v5.0.0.  I'm currently working on addressing each of the issues mentioned in our discussion.\n\nStay tuned\n. v5.0.0 is now more than 2x faster than v4.7.4, and is even faster than v3.6.2.\n\nCheck the change log for some of those changes:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n. I haven't updated the performance tutorials yet, but you can get huge perf boosts by..\n- setting transformsEnabled = 'position' on the shape\n- setting hitGraphEnabled = false\n- caching where possible\n. Just so happens I'm planning on doing something very similar for v4.8.0 :)\n. +1 yep, I added the new cache() method as requested :P\n. I'll have to look into this.  Each layer has its own canvas.  after creating a layer, you could try setting the canvas with layer.getCanvas()._canvas = yourCanvas.  the \"_canvas\" property points to a native canvas element.\n. Cool!  Thank you!  I'll probably rename this to Arc, though.\n. You rock!  Thanks again for the high quality pull requests.  I've been meaning to add a ring shape but hadn't gotten to it yet.\n\nThank you!!\n. This is awesome!  However, this is more appropriate as a 3rd party plugin.  KineticJS is made up of:\n\n1) core shapes\n2) KineticJS managed plugins\n3) 3rd party plugins\n\nA cross hair would fit much better as a 3rd party plugin.  Would it be possible for you to create a github repo for this, and I can link to it from KineticJS?  I will be putting together a plugin gallery soon.\n\nThanks!\n. this is technically a bug with chrome.  The w3c spec for shadows is very wonky.  If you create a shape with both a fill and stroke, and you apply a shadow, you'll get a double shadow.  KineticJS fixes this bug in the spec by creating a temporary buffer canvas.  Google chrome, unfortunately, doesn't apply the shadow blur correctly to things drawn onto a buffer canvas.  This only occurs if your shape has both a fill and stroke.  I'll have a work around for chrome in v5.0.2\n. You can do this:\n\nshape.setFill('rgba(255, 100, 113, 0.5');\n\nYou also have access to the RGB components directly.  Here are a few examples:\n\nshape.setFillRGB({\n  r: 255,\n  g: 12,\n  b: 100\n});\n\nshape.setFillR(255);\nshape.setStrokeG(114);\n\nHere's the shape docs:\n\nhttp://kineticjs.com/docs/Kinetic.Shape.html\n\nIn version 5.0.0, or 5.0.1, I plan on adding support for alpha as well.\n. it's impossible to serialize a JavaScript function, as mentioned in the docs and tutorials.  You have to reset images and functions after deserializing a JSON string.\n\nyou can set the dragBoundFunc like this:\n\nnode.dragBoundFunc(...);\n\nDocs are here:\n\nhttp://kineticjs.com/docs/Kinetic.Node.html#dragBoundFunc\n. right, when I said 'impossible\" I really meant \"not logical\"  - you serialize data, not code.  Why not just serialize all of the JavaScript for your whole app?\n\nEric\n. wow!  Thank you for taking a look at these.  I'm planning on doing a 5.0.1 release in a couple of weeks, so I'll definitely include these.  I'll pull this in about a week\n\nThanks again!\n. Excellent work!  Thanks again so much for doing this.\n. I want to stay away from cascading because I think it will cause more problems than it solves.\n\nIf you take advantage of Kinetic.Collections, which is similar to jQuery, you can do:\n\ngroup.find('Image').each(function(node) {\n  node.width(9);\n});\n\nsoon, I plan to support this:\n\ngroup.find('Image').width(9);\n\nbut I haven't set that up yet.\n. Hi guys.  Believe it or not, there was alot of requests for this.  In order to lighten the KineticJS API, I wanted to support a single unit for all attrs.  This also greatly simplified lots of portions of the code base.  Most people seemed to want degrees for rotation.  I looked at a lot of people's code on stackoverflow and other places, and I saw a lot of people using rotateDeg() or rotationDeg().  It seemed natural to make the default unit in degrees to accommodate most people's use case.  \n\nThere have been many other threads with people unhappy with this change.  This is one of those topics where there is so much backlash that may have to go back and support both cases again :/\n\nI'll add this to our todo list, but it's a sucky change \n. Thanks @jfollas . And to re-iterate, I've heard loud and clear that a lot of people are upset about the radian to degree change.  But again, I think most people are frustrated by the change because it required lots of changes to their codebase, and not because it was necessarily a bad change.  I'm still keeping a close eye on this topic, don't worry.\n. @jfollas had a brilliant idea - we introduced a new config option that lets you choose which angle unit you'd like to use.  the default is degrees, but you can switch to radians if you like.  You can change to radians like this:\n\nKinetic.angleDeg = false;\n\nhere's the change: https://github.com/ericdrowell/KineticJS/commit/e5562f5dbbef8de248d2046131172c3c5a27cc70\n. agreed - this is something that's not fully quite worked out yet.  The idea is to have a transform option that ignores parent transforms for performance reasons.  I may need to introduce another option like:\n\nshape.ignoreParentTransforms();\n\nor something.  Stay tuned on that one.\n. update on this thread - the transformsEnabled property is now deprecated.  In v5.0.0, I was moving into a direction where devs have to configure lots of individual properties to tweak performance.  This doesn't scale.  In v5.1.0, you can now use fast layers, which render about 2x faster than normal layers.  All of the performance tweaks are done automatically.  You can create a fast layer like this:\n\nvar layer = new Kinetic.FastLayer();\n. v5.0.0 had several API changes.  please check the changelog, docs, and tutorials.\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/\n. yep, check the change log:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n\nKinetic promoted to a new major version because there are a lot of API changes.  Please check the tutorials for updated examples:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/\n. that's incorrect - the docs say that the rotation should be in degrees:\n\nhttp://kineticjs.com/docs/Kinetic.Shape.html#fillPatternRotation\n\nThe tutorials on HCT are probably out of date though - I still need to get those updated.\n\nThanks!\n. This is now fixed via: https://github.com/ericdrowell/KineticJS/commit/e5562f5dbbef8de248d2046131172c3c5a27cc70\n\nThanks for catching this!\n. shoot I thought this was handled.  I'll add this to the 5.0.1 release which is a patch coming out soon\n\nThanks!\n. 1) This is the expected behavior.  the Cache bounding box x,y is relative to the default position, which for the case of a circle, is the center point.  Take a look at the cache tutorial here:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-shape-caching-with-kineticjs/\n\nYou'll notice that you need to set the x,y position of the cache, along with the star offset.\n\n2) that's expected behavior.  the cache bounds that you set need to account for stroke width.  This can't be done automatically because of several stroke side effects such as line Join, and tensions.\n\n3) expected behavior\n\nThanks!\n. Thanks for looking into this!  I was hoping that this could be solved without adding pixel ratio logic to the Node class.  The Canvas class should contain all pixel ratio adjustments.  I'll take a look as soon as I get a chance.\n\nThanks!\n. I guys, just wanted to let you know that I've verified this is a problem.  It's a pixel ratio issue.  As a work around, before you create any stages or layers, you can set the pixel ratio to 1:\n\nKinetic.pixelRatio = 1;\n. This is fixed now:\n\nhttps://github.com/ericdrowell/KineticJS/commit/c2e138c6f4625a084c1e8d732e3f888ff968feda\n\nso here's the deal.  When users change the zoom level, it affects the pixel ratio, and causes artifacts on the canvas.  As of today, there does not appear to be a way to reliably detect user zoom levels with JavaScript for modern browsers.  There are a few libraries out there that are able to do it for older browsers, but not newer ones.  Therefore, for desktop browsers, I'll force the pixel ratio to 1.  For mobile experiences, the pixel ratio will be calculated and used to create crisper renderings on devices with a pixel ratio > 1.\n\nThis will be included with the next release.  Until then, just use Kinetic.pixelRatio = 1 as described above.\n. @nicolasloupias this is supported as of v4.7.0\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log#wiki-470-sep-16-2013\n\nI would suggest biting the bullet and upgrading to v5.0.1 before you get too behind\n. The next release will be v5.0.2 or v5.1.0, depending if I introduce the new FastLayers or not.\n. I don't believe the zoom issue a problem for mobile.  Is that correct?\n. yikes, you're right.  I was planning on using an alternative to rgbToHex anyways.  I'll get this fixed up.\n. It's probably not optimized. Kinetic can run at nearly native speeds. Ill take a look soon. \n. Haven't forgotten about this thread - I need to put together a demo for you guys.\n\nBy default, KineticJS has a lot of stuff enabled that will slow down performance, like node nesting and event handling.  \"faster\" libraries probably don't handle these by default.  With Kinetic, however, you can disable these features to produce nearly native speeds.  I still need to get some more perf tutorials out there for you guys - just slammed with a million other things :P\n. First of all - awesome demo!  Do you mind if I repost this on HTML5 Canvas Tutorials?  I would just need your twitter handle, author bio, gravatar link for your image, and a link to your website if you have one.\n\nSecond of all - nice job, you did a pretty good job of fine turning performance.  The disableHitGraph is actually a layer property, but it doesn't matter in your case sense your using drawScene()\n\nAlso, on my macbook air, it was running at 30fps for 1000 bunnies.\n\nSomething else to watch for every soon - v5.02 will support something called a StaticLayer.  Static layers are like normal layers, except they don't handle node transforms or events.  For people who just want to draw a ton of stuff on the canvas and don't care about interactivity, StaticLayers will provide the fastest rendering performance possible.  \n\nI might go as far as to create a StaticStage, which has no layers either.  It would basically be the KineticJS api that draws directly onto a single canvas.\n. agreed - I'd like to keep the event support as minimal as possible, and users can use something like HammerJS if they want additional events.\n. yep this is a bug, and will be fixed with the 5.0.1 patch coming out in about a week or so. \n\nThanks!\n. scratch that, I forgot that it's already fixed in Github.  when 5.0.1 comes up, just upgrade and you should be good to go.  \n\nIf you need a quick fix, be sure to manually set your fillPatternScaleX and fillPatternScaleY values.  Otherwise they are defaulted to 0, which causes the shape to be invisible.\n. Thanks for this!  I'll take a look as soon as I get a chance.\n. can you please provide a jsfiddle example?\n. can you repost this on stackoverflow, with a jsfiddle?  for implementation questions, stack overflow is a much better forum than github.  Also, I noticed that you're passing arguments to the draw() method.  The draw method takes no arguments.\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Node.js#L1465\n. hah, there's a typo here:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Shape.js#L46\n\nthis line listens for shadow changes, and then clears the hasShadow cache when one occurs.  It's listening for shadowEnabledChanged instead of shadowEnabledChange :P\n\nI'll fix this up by the next version\n. scaling with a negative value works for me.  It's working in this tutorial as well:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-scale-animation-tutorial/\n\ncan you post a jsfiddle?  There's probably something else wrong.\n. Thanks for reporting this!  Your solution of getter.call(this, {attrs: {}}) doesn't quite work because you're calling the getter method from the \"this\" context, but passing the \"{attrs: {}}\" object as an argument, which will be ignored (getter methods don't require arguments)\n\nThe fix is to remove the attr from attrs, use getter.call(this) to extract the default value from the getter method, and then restore the attr.  I added a unit test as well.\n\nThank you!!!\n. nice @lavrton!\n\nCurrently, I don't have plans to archive old documentation.  This may change if enough people demand it :P\n\nHopefully (keeping fingers crossed) v5.x is the last big API change to the library.  It's now very close to my vision of what KineticJS should be, so I don't suspect it will change much from here on out.\n. +1 @kzhdev \n. Thank you!\n. currently, the plan is to keep all getters and setters.  This enables you to override specific getters and setters, and the overloaded methods will keep working.  The overloaded methods, like stroke(), in turn call setStroke() and getStroke()\n. in other words, the getters and setters are the source of truth, and the overloaded methods are just convenience methods.  However, I purposely took out the explicit getters and setters from the documentation in order to cut it down in half.  The docs were getting huge, and I want the API to be as simple as possible.\n. you need to use layer.draw() to redraw layers.  Here's an example:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-set-alpha-with-kineticjs/\n. I think circle.draw() used to in turn do a layer.draw for you, but I believe this was removed.  \n. This was just fixed along with a new flag that lets devs choose if angles are in degrees or radians.  Thanks for catching this:\n\nchange: https://github.com/ericdrowell/KineticJS/commit/e5562f5dbbef8de248d2046131172c3c5a27cc70\n. Thanks!!\n. taking a quick look right now.\n. Can you give us more information about how your app works?  This isn't enough.\n\nHow many stages?  how many layers?  how many groups?  What kind of images?  How big are they?  Can they be put into a sprite image?\n. oh, the problem is when you're including your custom filter.  You currently can't just add it after you include the kineticjs file.  Filters must be defined after the Node class is defined, but before the Image class.\n\nThis is something that I need to fix or else other people will have the same headache.  I'll have a fix for this in the next version\n. for a work around, just use this instead:\n\nKinetic.Factory.addGetterSetter(Kinetic.Image, 'myFilterVal', 0, null, Kinetic.Factory.afterSetFilter);\n\nsince you are using an image, this will add the myFilterVal attribute directly to the Image class.\n. This should be fixed now.  please refer to this ticket for more info:\n\nhttps://github.com/ericdrowell/KineticJS/issues/753\n. Thanks @lavrton \n\nSorry for the confusion guys.  In an effort to simplify the KineticJS api, and improve performance, I removed support for Number and Array inputs.\n. Thank you guys!\n. Heya!\n\n1) you're right, looks like this missed\n\n2) it was done for performance reasons\n\n3) you're not the only one who dislikes the change - I'm considering changing it back\n. The performance cost of detecting the user input and converting very large arrays of points to another format is actually noticeably expensive when you're dealing thousands of data points that are updated several times per second :P\n\nThere are also lots of cases when you just want to change a single point inside the array of hundreds of points.  Since the input is guaranteed to be an array of integers, with no conversion, this gives people the opportunity to change a single point by reference, without resetting the entire array each time.\n\ni.e.\n\nvar points = []; // huge array of points\n\npolygon.setPoints(points);\n\npoints[9998] = 5;\npoints[9999] = 6;\npolygon._clearCache('points');\nlayer.draw();\n\nAlso, I wanted it to be easier to configure points, i.e.\n\nvar polygon = new Kinetic.Polygon({\n  points: [{\n    x: 1,\n    y: 2\n  },\n  {\n    x: 3,\n    y: 4\n  }]\n};\n\nvs.\n\nvar polygon = new Kinetic.Polygon({\n  points = [1,2,3,4];\n});\n\nor\n\nvar polygon = new Kinetic.Polygon({\n  points = [\n    // x, y\n    1,2,\n    3,4\n  ];\n});\n\nThis is one of those cases where I was trying to balance flexibility vs. performance.  I'm still open to changing it back, however, if more people speak up about this.  Let's give it a little more time.\n. Here's another idea - maybe this will be a win win situation.\n\nWhat if I provide array methods that enable you to modify the points array?  i.e.\n\npolygon.push(point);\npolygon.pop();\npolygon.shift();\npolygon.unshift(point);\npolygon.insert(point, position);\npolygon.remove(position);\npolygon.concat(arraOfPoints);\n\netc.\n\nThoughts?\n. you got it.\n. Common question. You need to use mouseenter and mouseleave events.  jquery does the same thing \n. +1 this is the expected behavior.  This is a typical pattern for libraries/frameworks - i.e. the framework should not modify the container element in anyway, or any other DOM elements outside of the container.  Everything inside the container, though, is fair game.  You need to move your content outside of the KineticJS container.\n. Hey @lavrton, can you explain what exactly is slow?  Are you just referring to drag and drop?  The event detection algo is actually much faster than other libraries.  It can detect shape intersections for millions of nodes on the screen.\n. Look into the hit graph and scene graphs.  When things are drawn with Kinetic, shapes are drawn on both a scene graph (what you see) and a  hit graph (used for event detection)\n. interesting, okay.  I don't believe the problem is getIntersection itself, but rather the frequency that it's called.  i.e., we can play around with throttling the getIntersection call on touchmove.  For that matter, maybe we should throttle all touchmove events, since we know they will be used with mobile devices.  Do you want to take a look at this?  Maybe we could create a throttle function and put it in Kinetic.Util (something similar to underscore's throttle, or maybe even the exact same one) and then hook it up with the touchmove fire event here:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Stage.js#L539\n. no don't do that, you're essentially indirectly throttling the event detection.  If people are listening for the draggableChange event, they will get some very odd results\n. I'll take a look at throttling, and might hook it into the batchDraw function as well (which is technically doing throttling)\n. yea, I know you were doing it for testing purposes, but just wanted to make sure.\n. really cool jsfiddle demo btw!  Can I make a lab out of that (you would be the author)\n. no no, I like the comparison\n. here it is:\n\nhttps://github.com/ericdrowell/KineticJS/commit/8fcd882ba5d2da288c846d9a76911729e7d56728\n\nSo I've been working on Android issues this morning, and made a lot of improvements.  I discovered that Android was listening for both touch and mouse events, which not only caused some weird issues from time to time, but also really hurt performance.  I added throttling to both mousemove and touchmove.  I think both of these should help with Android perf a lot.  Can you pull the latest changes and give it a try on your device?\n. for drag and drop, I wonder if we can avoid it entirely.  I think at one point I was, but I don't remember why I put it back in.  i.e., there's no reason to detect for events on other shapes when you're dragging and dropping.\n. Also, in your hack, you were essentially throttling down to 50ms.  My throttle is 17ms.  You could try changing 17 to 50.\n. Cool!  Thanks!\n. cool thank you!\n. +1\n. +1 Thanks @lavrton.  This is my fault, I didn't have any tutorials that covered the setAttr() method.  I'll revamp the KineticJS tutorials soon.\n. yes, odd, I'm not sure how this could be happening - each time the scene function is executed for the  Line class, it just loops through the points array and then closes the shape at the end:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/shapes/Line.js#L75\n\nAs @ippo615  mentioned, a jsfiddle would be most helpful here.\n. Ah, I think it makes sense for opacity to affect cached shapes.  I'll fix this up.\n. can you repost this on stackoverflow?  This is an implementation question.  I would like for other people to see the answer.\n. stackoverflow.  It's linked to from the kineticjs homepage.\n. Can you try v5.0.2 or v5.1.0?  Those should be a bit better\n. ah yes.  Except, I don't like that we are tacking on the event type as a second argument.  It either needs to be added to the native event object as some other key (like eventType) or we need to split up the native event object from the Kinetic event object.  I'm favoring the latter at the moment.  Still thinking on this.\n. On second though, I think we should continue to reuse the native event object, but add a kinetic namespace to it.  I'll make that change soon\n. fixed. \n\n@lavrton using two arguments gets weird when you are trying to fire custom events with the fire() API.  \n\nKinetic will now pass around a Kinetic event object, which has a reference to the native event object, if it's needed.  i.e.\n\n```\nevt = {\n  target: Kinetic.Circle,\n  type: 'tap',\n  evt: NativeEventObj\n};\n```\n. @lavrton  can you take a look at the dispatchEvent that you added for HammerJS and let me know if it looks okay to you?\n. change: https://github.com/ericdrowell/KineticJS/commit/47ecb4559de2891c2687a42cd49eb0ce5ff209db\n. and here's a unit test that shows what the API looks like now:\n\nhttps://github.com/ericdrowell/KineticJS/commit/ddf34d0af9b84b217e1a4d9d4e8e43b932901b00\n. agreed this is a big API change.  Luckily, we are already releasing an API change version (5.1.0) so we can sneak it in.  I'll be sure to address this clearly in the change log under the API section.\n. Thanks!  Sounds logical.\n. Thanks @lavrton !  I'll be releasing v5.1.0 within about 3 or 4 days which will patch up any regression issues with v5.0.2\n. @lavrton what do you think?\n. yep!\n\nJust saw that and changed it.  https://github.com/ericdrowell/KineticJS/commit/0800f1e31ab1848920b1733daa255930b7e9941e\n. Upgrade to v5.1.0, which was released yesterday - it fixes the drag and drop perf problem on Android.  Please reopen this ticket if there's still an issue.\n. oh shoot, I meant v5.0.2.  I'll look at this.\n. oh, for mobile devices, the pixel ratio is automatically taken into account.  To disable this adjustment, you can set Kinetic.pixelRatio = 1.  Let me know if this fixes the issue.\n. I'm pretty sure this is the issue so I'm going to go ahead and close this one while I'm here.  Please reopen if this doesn't help.\n. You should place it at the top of your app, before you create any stages or layers.  It's a global KineticJS config.  I'll look into this as well to see if I'm missing something.\n. Cool!  no problemo.  Rest assured that KineticJS will continue to get faster and faster :P\n\nEric\n. will do, sorry about that!\n. done.\n. Can you explain a bit more?  What exactly are you wanting to do?\n. Hiya!  This isn't a bug, it's an implementation question.  Can you repost this on stackoverflow.com?  That way, others can see the answer (plus you'll get more responses)\n. Awesome!  I've been meaning to do that.  I'll probably pull these changes in this weekend.  \n. great questions!  Yes, I haven't made this Github project official yet because I'm still new to Github and getting my feet wet :)\n\n1) I'll be making the Github project official very soon, probably within a week or so.\n\n2) I do already have plans to document the config object more fully (it's also already documented on html5canvastutorials.com)\n\n3) I use jsdoc toolkit now (as of like a few days ago) and it's been working out great.  Here's the new docs page: http://www.kineticjs.com/docs/symbols/Kinetic.Stage.php\n\n4) I still haven't decided yet about the best place to report bugs.  I'm leaning towards using Github and removing the Bugs Forum\n\n5) haven't put thought into tagging yet\n\n6) absolutely.  I'm setting things up on Github because a lot of people are requesting it (so they can manage forks) and so people can help contribute and get more involved (KineticJS is growing very rapidly and it's becoming too big of a project to be managed by one person)\n\nCheers!\n. Antoine, I was going to message you with a request, but it appears that you don't have messaging enabled on GitHub, or maybe you don't have an email address tied to your account.  At any rate, if you're able to see this message even after the pull request is closed, I wanted to see if you could do these:\n\n1) modify the rake file so that all of the comments are stripped out correctly for the minified version (for some reason the GlobalObject comments are still there)\n\n2) is it possible to add a version number to the build command, something like \"3.8.3\" and the rake file can auto update the license.js page, perhaps with a token (i.e. @version@)\n\n3) is it also possible to automatically update the date in the license.js file?\n\nCheers\n. Awesome, that sounds great!  Thanks so much for putting this together.  Would also be cool if after we pass in a version number \"e.g. 3.8.3\", it would also rename the dist files like this:\n\nkinetic-v3.8.3.js\nkinetic-v3.8.3.min.js\n\nCheers!\n. Brilliant!  Works perfectly!\n. Great suggestion.  This is something that's been on my mind for awhile, and have been planning on adding soon.  Any special requests on how you'd like for it to be handled?  To keep things simple, I don't think I'll be supporting event capturing (only event bubbling).  I figured we could do something like this:\n\nshape.on(\"click\", function(e) {\n    // do stuff\n    e.stopPropagation();\n}\n\nDo you think this is sufficient?\n. Sounds good!  Hopefully I'll get this added in soon.\n. Hiya!  Have you tried using Groups?  Groups enables you to create complex shapes by grouping multiple regular shapes.  In essence, a group is a shape that can have multiple paths.  Here's an example:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-a-group-with-kineticjs/\n. Yes, I investigated this technique a long time ago because on the surface it sounds like a great idea.  However, the performance is horrible.  In fact, if you start using more than like 10 images, the whole app will start to break down pretty rapidly. \n. That's a pretty good idea (storing the pixel data for an image once and reusing the array).\n\nI just realized that it would be awesome to add a new property to the Kinetic.Image object, \"detectionType\", which could be set to \"path\" or \"pixel\".  This way developers can choose.  Thanks for the discussion, and great demo btw!\n. Thanks for posting this!  This is a known bug that hasn't been fixed yet - it's slightly lower on the priority list at the moment, but should hopefully get put in soon.\n\nCheers!\n. Well in that case, I'll have the issue fixed by this weekend and bundle it with the v3.8.4 release :)\n. oh and by the way, if you need the fix even faster, you can try making a change in the _getContainerPosition() method in Stage.js.  This method is not taking into account div scroll offsets, only the window scroll offset :)\n. sweet, if you drop by the Bay area let me know and I'll take you up on that!  Btw the fix for this has been checked in :)\n. Can you post your code on a web server somewhere so I can take a look at it there? (since you're saying that the code works on jsfiddle but not your local) KineticJS should be supporting scrollable containers and scrollable parent DOMS.  Thanks!\n. ah, you're not the first person to have problems with the styling of the container node (non dispay:relative styles).  I'll look into this a bit more.\n. great!  glad you got it working\n. have you tried using the dragBounds property?\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-bounds-tutorial-with-kineticjs/\n. right, and that was sort of my thinking.  In other words, I'm trying to keep KineticJS as light as possible so I don't want to implement everything, but I do want to implement things that have a light foot print and is commonly used (like rectangular bounds).  For more special cases, like creating circular bounds, devs could create plugins for that :)\n. Agreed.  I think drag and drop, constraints, and bounds, still need a ton of improvements :)\n. Sweet!  I've been meaning to add a mimeType to the toDataURL method.  Thanks!\n. done and done :)\n. You rock!!  Kudos on updating the unit tests too, I appreciate that :)\n. it's okay, everything's good to go\n. This issue has been addressed in the forums - no fix needed\n. yep, they sure don't :)  The stage is the only Node object that isn't tied to a layer, and currently transitions are tied to each layer for performance reasons.  Originally, I was going to add support for Stage transitions for the next release by tweaking the transition code a bit for the Stage node, but now, I've recently come up with a better way to manage animations + transitions with relation to layers, so I'll be taking that approach now instead.  The new approach will also enable stage transitions for the next release.  Stay tuned!!\n. Following up with this issue - stage transitions are now supported as of v3.9.2\n. No prob!  I'll keep this open for awhile\n. Closing this pull request - If I do end up implementing a full screen method, it will probably leverage the HTML5 full screen API\n. ah, yes Firefox appears to be failing for me.  I'll look into this thanks!!\n. oh, I'm a dope :)  The same text in Firefox and Chrome has slightly different text sizes (due to implementation), so my unit tests shouldn't test for a specific text width.  Thanks!\n. Oh and in regards to the pixel detection, you really can't use a bounding box (because parent nodes can be transformed, causing the child node to be way outside the bounding box)\n\nAlthough, it actually performs pretty nicely for me because I've enabled the developer to decide when to save the pixel data with the save() method (very expensive).  If you choose good times to save the data, I think the performance should be okay.  What sort of test case were you using?\n\nmy example: http://www.html5canvastutorials.com/labs/html5-canvas-animals-on-the-beach-game-with-kineticjs/\n. After a bit of exploration, I found that the root problem was with the getAbsolutePosition() method.  It should not have been taking into account center offset transforms.  Issue is now fixed :)\n. Perfect!  I had plans on implementing rounded corners in exactly the way that you've done (I wanted it to be a config property, not a new shape).  I'll pull this in soon.  Thanks!\n. Your work made it to v3.9.4 and I gave you credit in the change log.  Thanks again!\n. This is good stuff!  However, is it possible that you could move most of this logic to Kinetic.Line, and add a new line property called \"lineStyle\" that's defaulted to \"normal\", and devs can set it to \"dashed\" if they want a dashed line.  I'd like for KineticJS to have as few shapes as possible.\n\nIn the future, I also wanted to add support for lineStyle: \"dotted\" which would draw small circles instead of lines along the line path.\n\nCheers!\n. status update - I'm currently doing a little bit of research to see what other implementations look like, and will most likely be merging some of your work with some other ideas I've been finding as well.  I really like that you have the ability to animate the dashed line, pretty slick.  \n. I ended up using a method by Phrogz which is only about 30 lines of code, and enables an unlimited amount of dashed and dotted lines with varying dash lengths and spacings for each alternate.  This will provide quite a bit of flexibility. \n\nThanks so much for digging into this with me!\n. Nicely done!!!  I was planning on working on Node.js support at some point.  As soon as I get a chance, I'll look over the changes and pull in it.\n\nThanks again!\n. added these changes to the nodejs branch.  I'll spend a little time later doing further testing and taking a closer look.  Very exciting stuff!!\n. Hiya!  It hasn't really been supported, as of yet.  If I understand correctly, there's not too much effort that has to go in to get it working.  I've had plans to add support, along with a suite of unit tests, but other priorities have been bubbling on top of it.  Hopefully I'll have this addressed soon (possibly with the next release or so)\n. sorry for the headache guys.  Really hoping to officially add node.js support soon.\n. absolutely possible, just a matter of time :)\n. Yea, I've taken a couple weeks off from KineticJS dev.  I have a whole slew of things that I'll be working on during xmas break :P\n. well, turns out that the native max width w3c spec really sucks.  I don't like that the text scales rather than being cut off (similar to html text inside of a div element with a max width).  Also, the changes didn't incorporate the bounding box dimensions.\n\nso, I ended up reworking the logic to use clipping rather than the native text scaling.\n\nhttps://github.com/ericdrowell/KineticJS/commit/05df07829533fa1de3b6a6e23da05845586c1a2f\n\nThanks for getting these changes rolling!\n\nCheers\n. Thanks for this!  After a bit more thought, I've decided that the API should look like this:\n\ncornerRadius:5 -> causes all 4 corners to have radius of 5\n\ncornerRadius: [1,2,3,4] -> causes top left corner radius to be 1, top right to be 2, etc.  \n\nI'll put together a mashup of some of your work plus this API.  \n\nThanks again!\n. still not fully following your use case.  Could you expand on it a bit?\n\nCheers!\n. Follow up:\n\nI've replaced the Circle Shape with Ellipse, which enables you to define a radius like this for circles:\n\nradius: 10\n\nand a radius like this for ovals:\n\nradius: {\n   x: 10,\n   y: 5\n}\n\nIt's much cleaner to transform the context than to connect several bezier curves.  Check out the Ellipse shape in the source to see how it looks\n\nCheers!\n. hi thanks for looking into this!  It turns out that I'm in the process of exposing attr change events internally and externally, which means that KineticJS is becoming more event driven.  I've added a widthChange and heightChange listener to the stage that listens for dimension changes, and when they occur, the DOM dimensions are synced.  This enables us keep a lot of node specific logic out of the setAttrs method and greatly decouples the code base\n\nCheers!\n. updated on this issue - I've added an on size change listener that updates the DOM dimensions whenever the stage dimensions change, so this issue should be resolved :)\n\nCheers!\n. very nice changes!  As soon as I get a chance, I'll look into pulling these in and check out the code a bit more closely.  Great work!\n. Thanks for this!  You've done some great work.  Unfortunately though, I've already begun a total Kinetic.Text rewrite.  Now that (I think) I fully understand what most people need from the Text shape, I decided to do a full rewrite of the shape to make it very clean and elegant.  Word wrap will be added very soon.  \n\nCheers!\n. Hiya!  This problem should be resolved with the latest version of KineticJS.  I went though and cleaned up undefined, null, 0, and empty string usage.  If you now set any attr to undefined, nothing will happen.  If you set an attr to null, 0, or empty string, the attr will be disregarded.\n\ne.g. if you set image to null, it won't be drawn.\n. Hi again, this issue has been resolved with v3.10.2\n\nif you set any attr to null, 0, or '', the attr will be ignored.  If you set an attr to undefined, nothing will happen.\n\nCheers!\n. I'll take a look at this one as soon as I get a chance!\n\nCheers!\n\nEric\n. adding this to the next release.  Thanks!\n. There still seems to be some issues with remove() in general, so I'm going to do a full blown reinvestigation of it.  Sorry for this!  All of the issues should be resolved by the next version, 4.3.1.  I think that I get more bug reports related to remove() than anything else, so it's clearly not designed well.  Thanks for being patient! \n. very likely.  I also have a todo item for the next release that involves creating some memory performance tests around remove().  Hopefully we'lll get it cleaned up and working seamlessly soon\n. wait, did you mean layer.remove() doesn't work?  the remove method does not take in an argument:\n\nhttp://kineticjs.com/docs/symbols/Kinetic.Node.php#remove\n\nI looked very closely at my layer.remove() tests, and they are passing correctly\n. hiya!  Are you referring to animations specifically?  The event stress tests seem to performing well still.  I'll look into this asap!\n. Here's some eventing stress tests which still seem to perform well:\n\nhttp://www.html5canvastutorials.com/labs/html5-canvas-10000-shape-stress-test-with-kineticjs/\nhttp://www.html5canvastutorials.com/labs/html5-canvas-kineticjs-drag-and-drop-stress-test-with-1000-shapes/\n. sweet!  Glad to hear.\n\nP.S. The current build has +7% drawing performance, and I have a lot of other peformance improvements lined up for the next few releases.  i.e. KineticJS should keep getting faster and faster :)\n. Thanks!  this change looks really good.  As soon as I get the chance I'll pull it in and create some unit tests for it\n. ah good one.  Thanks for letting me know!  I'll get this one fixed up asap.\n\nCheers!\n. Just tested this use case, and the problem seems to have been resolved.  Please let me know if you're still experiencing this problem!\n. Hiya!  Thanks for this.  I've actually already begun re-writing the Text shape, including a new API for alignment.  align and verticalAlign now refer to the text's alignment relative to its containing text box (which makes a heck of a lot more sense).  Rounded corners are also now available since the Text shape is now a Group which utilizes the Rect shape for the text box.  Word wrap will be coming soon as well.\n. Hiya!  This is technically a bug because the attribute is present in the code, but is not used yet.  It will be working by v4.3.3\n. Awesome point!  That does really suck.  I'll add this to my todo list.\n\nCheers!\n\nEric\n. fixed in v3.10.2!  Thanks again for pointing that out\n\nCheers!\n\nEric\n. Hiya!  Yea, I noticed that before - my formatter for some reason screws up that line.  I tried multiple variations without success.  Went ahead and changed the else if to an else, and inside the else block used an if block.  Very strange!\n. Great point.  I'll look into a better solution asap\n\nCheers!\n. Fixed!  At first glance, I thought that John's inheritance implementation was too complex for what I needed, but after trying to implement it myself I realized that it was spot on.  I added his Class function to Class.js in the util folder and am now extending all parent nodes with it.  Works like a charm!\n\nCheers!\n. great idea.  I'll add this the todo list\n. following up with this thread - Kinetic.Text added support for the \\n character to force word wrap.  Here's an example:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-text-tutorial/\n. Great point!  Assuming that Shapes are typically the node whose visibility is toggled on and off (in contrary to to groups, layers, or stage), this would certainly be nice performance improvement.  Just pushed to change and gave you props.\n\nThanks!\n. cool work!  I like where you're going with this, but isn't the concept of your Style class the same thing as just storing styles as an object like this:\n\n```\nvar myStyle = {\n    fill: 'blue',\n    stroke: 'red'\n}\n```\n\nand then applying that style to any node via setAttrs\n\n```\ncircle.setAttrs(myStyle);\n```\n\nI've been meaning to create a clone method, and what you have is pretty close to what I had imagined as well, with the exception that the clone method might also need to clone event handlers and other non attr properties.  I'll take a closer look at this when I get a chance\n\nThanks for looking into this!\n\nEric\n. Thanks for getting the ball rolling!  There's quite a few things that still needed to change, so I went ahead and created my version of the clone method here:\n\nhttps://github.com/ericdrowell/KineticJS/commit/a8ab9a253348f9628e60727bf67f0839aeb58253\n\nI'll mention you in the change log for getting this rolling\n\nHere are a few things that needed to change with your implementation:\n- we don't want to copy over all of the object properties (such as _id, because this is a unique node identifier)\n- we also don't want to directly copy over the eventListeners property because some of the listeners are generated from class constructors, and we don't want to override these handlers with the original objects handlers\n- I wanted to make sure that the constructor is called for proper object initialization using the 'new' keyword\n- we don't need to manually do a deep copy to copy over the attrs because each class initializer uses the setAttrs method to set the attrs, which automatically does a deep copy\n\nThanks again!\n\nCheers\n. Hiya!  Actually KineticJS works very similarly to that.  Check out this tutorial\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-remove-event-listener-by-name-with-kineticjs/\n. right, that makes sense.  I think that's a reasonable request :)  I'll add it to my todo list\n\nCheers!\n. Hey sorry, this is still in my todo list but it's been lower in priority than other tasks. It'll get in there I promise. In the meantime, would you be interested in making th change for us, and submitting a pull request?\n. fixed as of v4.0.3 courtesy of Davonium.  Thanks!\n. hi there!  All shape radii should be centered on the shape's perimeter, such that the shape radius should be equal to or larger than the inner stroke radius.  Is this what you're referring to?  If not, maybe you could create a jsfiddle showing the behavior, or provide a screenshot.\n\nCheers!\n. Ellipse strokes seem to be working fine in FF now http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-ellipse-tutorial/\n. Hiya!  Thanks for looking into this.  At the time being, I don't really want to support automatic image loading, because different apps may need to load images in different ways depending on what's needed, and I don't want to go down the route of supporting all kinds of different image loading strategies (e.g. load all images, then draw the whole stage at once, draw each image as soon as it's available and manage layering and redrawing, combinations of the two, etc.)\n\nI've found that it's much more straight forward to let the developer manage image loading and drawing themselves.  Plus, I'm trying to keep KineticJS as light weight as possible, and since image loading really has nothing to do with canvas (there are hundreds of other image loading libraries out there), I feel like adding the logic would add extra bloat.\n\nI'll keep an open mind though - may need to revisit this and incorporate image loading at a later time\n\nCheers!\n. hey Jason, I pulled in the new TextShape (awesome by the way), and moved the non-primitive shapes to the plugins folder.  Was wondering if you could possibly make a few changes to the Path and TextPath shape, if you get the chance.  If not, I can take a look sometime next week:\n\n1) I would like for Shape drawFunc functions to not be overridden by children classes (the TextPath class extends Path, but then overrides its drawing function).  In other words, if something were to extend a particular shape, it shouldn't override anything in its initializer, it should only add or modify methods.\n\nThat being said, maybe it's more appropriate if the TextPath shape directly extends Shape like all of the other shapes, but simply inherits some of the Path methods\n\n2) I noticed that you made the Path shape much heavier in preparation for TextPath support.  I would like for the Path shape to be as lean as possible, and not assume that another class will be using it for something.  Is it possible for all of the extra logic you added to reside in the TextPath shape somehow?  It feels like the Path class suddenly became very bloated, and I was actually hoping to spend some time later on improving on its performance\n\n3) is it possible you could also use jslint or jshint on the shapes so that the JS code style is similar to the other plugins? (What you and I are building here are the officially supported KineticJS plugins)\n\nWhat do you think?\n. awesome. keep rockin :)\n. Whoops, you're right, we should add them to Kinetic.Plugins\n. wow guys that's a lot of +1's!  I'll take this a bit more seriously and revisit\n. finally getting around to looking into this again :)\n\nthanks for the patience\n. Thanks for getting this rolling!  I ended up using a more generic technique for supporting AMD + node.js with one shim from this:\n\nhttps://github.com/umdjs/umd/blob/master/returnExports.js\n\nand here's the AMD support commit + special test:\n\nhttps://github.com/ericdrowell/KineticJS/commit/ab19b442a00a3261c68c71683eb5b80a0558a5b3\nhttps://github.com/ericdrowell/KineticJS/commit/266026c76f5d16788c0fe48303c81332071b2a72\n\nPlease let me know if this looks good to you, or if any further changes need to be made.  Thanks!\n. Hiya!  Thanks for the detailed response.\n\nYes, I've been thinking about how to handle the global access for users who\ndon't use AMD (which I'm assuming is most users), and I realized that I can\njust define Kinetic in the global namespace only if AMD or node are not\nbeing used.  I'll make this change soon.\n\nCheers!\n\nEric\n\nOn Mon, Dec 3, 2012 at 10:44 PM, michaelgilley notifications@github.comwrote:\n\n> Hey Eric, thank you for supporting this. There are a few issues though.\n> These are non-critical but still yet they should be addressed. If you'd\n> like me to add these as new issues just let me know.\n> \n> First, the Kinetic should be hidden from the global namespace. It looks\n> like in Global.js line 31 Kinetic is left outside of the wrapper. Part of\n> the power of AMD (requirejs) is to contain libraries/modules within the AMD\n> wrapper and be used through direct require instead of reference to the root\n> namespace. This is why the UMD spec you included defaults to assigning\n> Kinetic to the root (window) namespace IF define and exports are undefined.\n> If define is a function then Kinetic should not be accessible via the\n> window object, only through requiring the module.\n> \n> If you'd like to keep Kinetic in the global namespace independent of\n> whether define exists or not that's fine. Plenty of libraries/frameworks do\n> this (e.g., jQuery, Underscore, etc.) You can see an UMD example of this at\n> https://github.com/umdjs/umd/blob/master/returnExportsGlobal.js. However,\n> it would be best practice to also provide a noConflict method to the\n> library for developers who would prefer to remove its footprint from the\n> global namespace and thus save from any potential library naming conflicts.\n> \n> Second, now when loading Kinetic without AMD it stores a reverence to the\n> library under window.returnExports (Global.js line 110). This needs to be\n> changed to root.Kinetic. The UMD spec did not intend for returnExports to\n> actually be used. Again, this is why var Kinetic should be contained\n> within the factory function scope referenced in Global.js line 112. It's\n> intended to be made global on this line if exports and define prove\n> undefined.\n> \n> Third, as is Kinetic is stored under root and so makes irrelevant the\n> wrapper functions on each Kinetic module. I assume you added these for the\n> custom build feature you offer on your site? If they are treated as\n> individual modules this is where you can truly leverage the power of AMD by\n> using a define function with each of those modules and requiring their\n> dependencies respectively.\n> \n> Thanks for all the work!\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/pull/47#issuecomment-10986235.\n. Just so I don't forget, could you open up a bug and copy and paste your comment?  This way, when I make changes, you'll now where to find them\n. P.S. I absolutely don't want to include the require.js library within KineticJS because its 12K (in order to leverage it for dependency management), so I definitely won't be using it internally.\n. This is a great change!  Thanks so much for fixing this, and for adding a nicely constructed unit test.\n\nCheers!\n. Have you tried the demo in it's own window? (click open in new window).  Sometimes the Flash ads can temporarily slow down page.\n\nWhat browser are you using?\n. ah yes.  Unfortunately, I've been battling with Chrome to get some performance issues fixed that were introduced a few months ago (via bug reports), but they are still having some issues.  In fact, I introduced the layer throttling logic specifically to fix Chrome's issue (or at least greatly improve it).  Even with the throttling in place, I've noticed that in some situations, the cursor can lag behind a shape when dragging and dropping in Chrome.  I may need to dig into it a bit deeper to see if there's something else can be done. (P.S. I bet if you try the demo in Firefox, Safari, and believe it or not IE9, you won't see the lagging).\n. tell me about it.  it's a real downer\n\nthe layer throttling logic is KineticJS specific logic that's applied to non animation situations, such as drag and drop.\n. One of their releases killed canvas performance, so if you try to draw something simple say 200 times per second, it starts to lag behind (this can occur with drag and drop because shapes are redrawn each time the mousemove event is fired).  To remedy the problem, I added layer throttling which reduces layer draws if they start exceeding a certain threshold.  This is why sometimes you may start to see lagging every now and then when using Chrome, in which case the throttling kicks in and the layer draws are dynamically reduced.\n. Has anyone else tried the KineticJS demos lately with v4?  v4 made tremendous performance improvements since v3\n. Thank you so much for looking into this!  And sorry I wasn't able to address this sooner, there's been a million things going on with KineticJS since this pull request.  Since the Animation logic has changed so drastically, I'll take another look at this soon and make sure that the race condition has been resolved.  thanks again!!\n. Hiya!  I actually have plans to add chaining in lots of different places, but it's been lower on my priority list at the moment.  stay tuned!\n. Nice!!  Thanks so much for this\n. remember, that since custom shapes have no point of reference, their position is relative to the top left corner of the canvas context.  To define its center, you need to draw the custom shape around the top left corner of the canvas context\n. fixed!  Thanks for catching this\n. Thanks!  I missed that one\n. ah, microsoft!  Why are they implementing non w3c standard events?  I almost don't want to add support for them just because they aren't standard.  Will have to put some thought into this :)\n. haha true.  Well it's on my todo list, so hopefully I'll add it in soon.  It probably won't be too much effort\n\nCheers!\n. great idea, I'll put some thought into this.\n. as a side note, don't forget that you can scale the entire stage.  In other words, I think it's fairly common for people to create fixed size stages, and then set the canvas width and height via `setWidth()` and `setHeight()`, and then scale the context via `setScale()` so that the stage filles up the screen.  This would be more predictable, and have better performance, then trying to calculate the relative heights, widths, offsets, nested translations, etc., for every shape on the stage\n. I've had several people bring this up, so maybe it would make more sense for me to create a tutorial on how to do this :)\n. somethings wonky with this pull request - it's showing that every line in Path was modified.  I'll commit the change.  Thanks!\n. So very very sorry - I haven't forgotten about this pull request, just put it on the back burner because filters were lower priority a couple months ago.  Will look at this soon!\n. Oh yea, I was planning on eventually having a dozen or so Filters.  Just haven't gotten around to getting them put together.  I also need to add support for passing parameters in, so there's a bit of work left to do.\n. Thanks for getting this started!  Since the Filter API changed a bit, I went ahead and reimplemented it from scratch.  Will still give you credit in the change log for getting this going.\n\nhttps://github.com/ericdrowell/KineticJS/commit/b76cc09742b6d7ea81596b810f1277d2cbe34be3\n\nThanks!!\n. Actually this is up to the developer.  Filters are used to modify the current image.  If a developer wants to store images before and after, they can save it as a variable.\n. would you mind trying out v4.0.0?  The filter logic was rewritten so the problem may be resolved.\n\nJust let me know!\n\nCheers\n. coming soon :)\n. nice catch!  I hadn't thought of that scenario\n. I like where you're going with this, but there are a couple of big changes that I'd like to make:\n\n1) I want to create a reusable rounded corner path method in the Rect shape that Image can leverage when doing the clipping.\n\n2) I want the rounded corners to be specified as an array rather than an object, like [12, 0, 10, 15], or [12, 10], or 12 for  all corners to be rounded with a 12px radius.\n. not yet, this is bit of a lower priority than other items.\n. I'll be adding all of the corner radius enhancements in the next release, v4.4.4.  Hopefully, I'll be able to find a clean, consistent solution to handle corner radius for rect, image, and Label, without adding overhead.  Thanks again for working on this with me!\n. This is super interesting!!!!  I'll take a look as soon as I get a chance\n. nice work!  This is working exactly as I had hoped.  merging soon :)\n. heya, I believe that this issue was fixed with this commit:\n\nhttps://github.com/ericdrowell/KineticJS/commit/8883e80bfe88cbe2c92c1de027eb4fd166294e6b\n. could you post a jsfiddle demo showing the behavior?  I need to see some code :)\n. Coming soon! :)\n. thanks for this!  I'll add this to my todo list\n\nCheers\n. Haven't forgotten about this thread - I'll try to get this fixed up for the next release.  Thanks!\n. After looking into this, I won't fix this after all.  add() and remove() do much more than just add and remove a node from a parent node.  add() updates the global id counter, updates the temp node array, updates the id and name hashes, and updates the pull nodes array.  This logic is intended purely for new nodes added to the stage.  remove() does similar things.  It's purpose it to completely remove a node from the stage.  Therefore, these methods should not be used to move a node from one container into another one.\n\nWhat exactly are you trying to do?\n. yep, KineticJS is event driven, which mean you have access to all attr changes.  e.g.\n\nshape.on('xChange yChange scaleChange rotationChange', function() {\n  // do something\n});\n. Isn't this the correct behavior?\n\nIf you click in the area that intersects the blue circle and the red circle, only the blue circle's event handler and the blue circle's layer's handler should be executed because the blue circle is on top of the red circle.  Node nesting in KineticJS was modeled after DOM nodes.  if you click on a div that's on top of another div, only the top div event handlers will be executed.\n\nThoughts?\n. thanks for this!  I'll take a look asap.\n\nAbout the Forums - I have quite a bit of threads to catch up on.  It's not dead, I'm just really behind :)\n\nAlso, planning on removing the bug forum and utilizing Github for bug tickets.\n\nCheers!\n. This issue was fixed awhile back, closing this ticket.  If it's still an issue, please reopen :)\n. interesting use case.  I'll add this to my todo list\n. Hiya.  In an effort to make the sprite sheets more flexible, I didn't want to assume that each sprite image would be the same size (the sprite tutorial on html5canvastutorials.com is a good example)  Also, some people implement sprite sheets radially, like for sprites that walk up, right, down, left, and diagonally.  I didn't want to force people to change their sprite sheets to use Kinetic.\n. This was done intentionally.  You're assuming that all sprite sheets are put together in the same way, which is incorrect.  \n\nI actually expect developers, currently, to write something similar to what you have done to handle the sprite sheets in whatever format that they have them.\n. no worries!  I've been thinking about possibly creating plugins like this for Sprite, but haven't gotten around to it yet :)\n. Update on this thread: based on Davonium's concept, I created a drawBufferFunc which enables devs to create custom hit detection functions.  Here's an example functional test:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/tests/js/functionalTests.js#L862\n. pls see comment with Layer.js pull request\n. what might make more sense is for a node to have a toJSON method and load() method (this will take care of the stage, layers, groups, and shapes).  I'll look into this as soon as I can.  Thanks for putting thought into this!!!!\n\nEric\n. fixed :)\n. np :)\n\nv4.0.0 had huge architectural changes, and unfortunately a few nasty bugs like this one snuck past my unit tests.  v4.0.1 is shaping up to be super solid\n. fixed as of v4.0.2\n. you read my mind.  I don't particularly like how multiple stages are currently handled either, and haven't put too much thought into it since as of yet it's been lower on my priority list.  Now that Kinetic is looking pretty solid, I'd like to relook into this.\n\nWhat if you could manage your stages like this:\n\nKinetic.remove(stage);\n. added it to the top of my todo list here:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Todo-List\n\nCheers!\n. This should be working as of v4.3.1 via the destroy() method which should work with stages\n\nstage.destroy();\n\nIf you still run into issues, please reopen this ticket :)\n. have you tried moving the image to its own layer when dragging and dropping?  This greatly improves performance.  Here's an example:\n\nhttp://www.html5canvastutorials.com/labs/html5-canvas-kineticjs-drag-and-drop-stress-test-with-1000-shapes/\n. but to your point, I'll look into the FF issue as soon as I get a chance.\n. v4.0.5 is already looking pretty heavy, so this issue will probably be addressed with a later version (mostly because it seems to be a FF bug)\n. Although there have been a lot of performance improvements made with drag and drop, this issue is ultimately dependent on the FF Canvas API implementation.  Dragging and dropping a shape filled with a pattern actually performed pretty well for me in FF.\n. Currently I have no plans to support IE8 - this would involve creating an SVG renderer.  If KineticJS becomes popular enough, and there's a huge demand for older browser support, may be forced to support SVG in the future.  Hopefully though, we won't have to do that :)\n. Sorry for the late response!  Seriously.\n\nI think the correct fix for this is to combine the touchPos and mousePos attributes into a single one, pointerPos.  I'll do that today.\n. That should fix it up.  Let me know if this doesn't solve your problem - assuming that you're still working with KineticJS a year later ;)\n. I'm afraid that enabling devs to specify image sources in addition to image objects will end up causing more confusion - If people are getting confused about the async nature of loading images (this is like JavaScript 101), then they will probably also not understand why images are being drawn out of order when using src. \n\nfor example, if someone draws a square, an image, and then a triangle, they will end up seeing a square, triangle, and then image.  I'm pretty sure that this would be more confusing.\n\nI don't think the library should decide for the developer when an image should be rendered.  The developer should control that.\n\nThoughts?\n. Agreed, if anything, we could add a loader utility in the Utilities directory.  I had considered doing that before, but wanted to keep the library as light weight as possible so I didn't add it in.  But, now that I have plans to create a configurator which will custom builds which just includes the modules that are needed, it may make sense to go ahead and provide the loader, and devs can use it if they want\n. Definitely agree that we need a way to specify which canvas to draw onto for performance reasons - willl look closer at this one soon\n. Haven't forgotten about this thread, and still realize it's very important :)\n\nHopefully I'll be able to put more thought into this and have a solution by v4.0.5\n. Shoot, I just realized that this is technically already supported.  Just set the listening property to false like this:\n\nrect.setListening(false);\n\nNode's that aren't listening to events are not drawn onto the buffer canvas.  Is this an acceptable solution?  \n\nIn regards to drag and drop - you're right, I could auto stop listening for events while dragging, and then reable listening when drag ends.\n. btw I haven't forgotten about this pull request.  I'm currently rewriting the setAttrs logic in Node to improve the OO design there as.  Once that's set up and working, I plan on making similar changes to the ones that you've suggested here.\n\nCheers,\n\nEric\n. Thanks again Davonium, I think overtime most of your suggestions have been accounted for.  Improving the OO design also really helped modularization when it came to supporting the configurator:\n\nhttp://www.kineticjs.com/configurator.php\n\nClosing this pull request - if you find more OO improvements, would you mind submitting a new request?  Thanks!\n. nice work.  I like how the children logic resides in the container rather than inside the clone() method in Node.  very clean\n. heya!  Yea I know that it works, but the thing is, I was planning on setting something up that would work for all methods, not just a select few.  e.g.\n\nshapes.setX(5);\nnodes.transitionTo(...);\n\netc.  I'll keep thinking on this\n. Heya!  This is what I was sort of looking for:\n\nhttps://github.com/ericdrowell/KineticJS/commit/8d6103d1e052196ae8958f4fe91c1116a1555e39\n\nI wanted the extended Array to be a class so that the methods are space efficient, and I wanted all of the node methods to be attached to the prototype.  I'll still give you props in the change log for getting the ball rolling.\n\nCheers!\n. can you be more specific?  I'm going to guess that you were referring to mousemove specifically.  There have been huge performance improvements in the past 4 months, so I would recommend downloading the most current version of KineticJS and trying again.  If you still have issues, please reopen this ticket :)\n. I think that this issue has been resolved with some of the work I did related to layer hide/show.  Could you verify for me if the problem is fixed, or if it's still an issue?\n\nThanks!\n. yep you're right, it's still an issue\n. Thanks Adam!  I made a small change to your logic, but will stil give you credit in the change log.  \n\nThanks again!\n. @Davonium ah yes, must have missed that note.  You brought up a good point, and it was something I had thought about but forgot to act on :)\n\nIt might be cleaner to hide and show the buffer canvas as well\n. also, why are we needing to hide the actual canvas element via display: none?  KineticJS automatically clears the canvas in preparation for the next drawing.  I can't think of a reason why we would also have to remove the canvas element from the document flow with display:none\n. I see where you're going.  Another issue though is that it breaks the pattern of show hide for other node types.  For example, to hide a shape, you would do:\n\nshape.hide();\nlayer.draw();\n\nbut to hide a layer, you would just do\n\nlayer.hide();\n\nbut, I do really like the idea of having a super high performance mechanism for hiding an entire layer, could be really useful.  I'll take a second look at this later tonight and will probably merge in your changes, thanks!\n. Thanks again for suggesting this change!  I ended up moving the layer specific logic to the Layer class to decouple the Layer and Node modules.  Here's the change:\n\nhttps://github.com/ericdrowell/KineticJS/commit/d0a1b2870e9975aa226dc78b6938450c0d067bf2\n\nStill gave you credit in the change log.  Keep on rockin!\n. not quite what I had in mind.  I'll double check that the getIntersections method is performing well - not sure how it would be slow just for the mousewheel event.  Thanks!\n. will do! Thanks\n. fixed, thanks!\n. I'll put together a tutorial that shows how to extend KineticJS objects and make sure that it's working as expected.  stay tuned!\n. +1 that's absolutely correct\n. Excellent!  I had intended on making those exact changes once I was sure that this was the approach I wanted to take (using apply())\n\nThanks for enhancing the each method as well\n\nCheers\n. What is your Twitter handle btw?  I need to be giving you some major props\n. agh, wish I had fixed this earlier.  I'm adding it to the v4.3.4 release right now.\n. fixed!  Thanks for reporting.  The change will be in the 4.4.0 release this weekend.\n. Ah, I see what you mean.  I actually misunderstood my own code!  After taking a second look at get(), I realized that it was in dire need of refactoring (the code paths were pretty odd).  Just checked in that change.  Now it contains specific code blocks for node type selectors, id selectors, and name selectors.\n. thanks for rocking all these fixes David!  I'm working on some new cool KineticJS t-shirt designs -I need to send one to you and Jason soon :)\n. This pull request is a bit tricky because there's a lot of stuff that's already been added in terms of OO design improvements.  I do like the changes made to get(), and also glad to see the new ability to select by node type.  May end up cherry picking some of the changes. \n. hiya!  This is on my todo list here:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Todo-List\n\nWill be fixed with the next release :)\n\nCheers,\n\nEric\n. fixed!  https://github.com/ericdrowell/KineticJS/commit/3f8801a4941ea8344845e5b1b6402eb2e3faab38\n. @BlackScorp Thanks for the help!\n. @0xE1 actually it's the same thing.  To hook into before/after redraw for shapes, just do this:\n\nshape.getLayer().beforeDraw(...);\n\nin order to redraw a shape, it's entire layer has to be redrawn (this is why KineticJS enables you to create user defined layers so that you can group shapes intelligently)\n. This issue should be fixed because KineticJS now automatically moves shapes to a temporary top layer when dragging.  Try downloading the latest version and see if you're still having this issue.  If you are, please reopen this ticket :)\n. all points attrs now can be set with an array of integers, an array of arrays which contain two elements each, or an array of point objects:\n\nhttp://kineticjs.com/docs/symbols/Kinetic.Polygon.php#getPoints\n. Interesting stuff.  We can leave this issue open so that I can come back to it later\n. Following up with this thread - This is no longer an issue because remove() now removes a Node from the node tree without destroying it as of v4.3.1:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n\nto destroy a node, you now use destroy();\n. Thank you so much for this!  You rock.  Nice job on the thorough unit tests.\n. whoops you're right, thanks\n. Heya, KineticJS supports Animation key frames and 16 different kinds of Transitions right out of the box.\n\ntransitions: http://www.html5canvastutorials.com/kineticjs/html5-canvas-linear-transition-tutorial-with-kineticjs/\n\nanimation: http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-animate-position-tutorial/\n. drag and drop bounds has been rewritten as of v4.0.2:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n\nWhen in doubt, also don't forget to checkout the Docs here:\n\nhttp://www.kineticjs.com/docs/symbols/Kinetic.php\n\nand the tutorials.  Here is the tutorial you're looking for:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-bounds-tutorial-with-kineticjs/\n. KineticJS is still evolving fairly rapidly so always check the change log when upgrading :)\n. Hi there!  KineticJS and GreenSock have recently partnered up, meaning that all of the transition issues should be resolved.  Check out the tutorials again for an update on the API.\n\nThanks!\n. don't do that!  I may need to hardcode styles inside the canvas tags so that people's canvas styles don't interfere with the stage DOM.\n\nThis problem isn't unique to KineticJS, but any widget from any library.  If users override widget CSS styling, the widget UI may be compromised. \n. On second thought, I'll go ahead and hardcode positional styles (e.g. margins, padding, display, position, etc) and hook those changes into this issue.\n\nThanks!\n. so new canvases will now be have inline position, width, height, margin, border, padding, and background defaults.  Anything other styles we should worry about?\n. fixed:\n\nhttps://github.com/ericdrowell/KineticJS/commit/ca0d3790b287f3dec2a76fd3a3c948d37a12bf3f\n. sorry, the framework has been evolving rapidly since it began :)\n\nFortunately, KineticJS is now reaching a mature state, so I don't foresee any new radical API changes.  And at least, if there are, there's a higher chance now that I will add backwards compatibility. \n. Still need to add support for this - I would like for us to be able to pass in an array of integers as well.  Stay tuned.\n. touching base - this is still on my todo list :)\n. Kinetic Transitions have been deprecated in favor of Tweens.  Tweens now also support points transitions.  \n. Interesting thread!  Thoughts:\n\n1) okay, the buffer canvas.  Every shape is assigned a unique color code for the purpose of _really_ fast hit detection.  When shapes are antialiased around the edges of a shape, the alpha component of the RGBA color is not equal to 1, and therefore is ignored by the hit detection algorithm.  I don't personally see this as a bug, because this case only occurs within a fraction of a pixel around the edges of a shape.\n\n2) canvas border used in Html5CanvasTutorials.com - very interesting!  This whole time, I had no idea that border sizes were offsetting the hit detection.  Will definitely look into this.\n. This isn't really an issue any more - The Kinetic.Text hit graph now renders a rectangle in place of the text to make the hit detection easier.  Also, the Kinetic tutorials have removed the one pixel border so there shouldn't be an issue there anymore.\n\nAlso, since KineticJS is building the canvas elements dynamically, we shouldn't be modifying the styles of those elements.\n. Hiya!  Will review this as soon as I get a chance.  Thanks for the pull request!\n. Thanks for getting this started!  I ended up adding all transformation attrs to the pattern fill object:\n\nhttps://github.com/ericdrowell/KineticJS/commit/01c5f4f7ca4e4ca03f497f7908b07e11885bb86e\n. interesting, I'll look into this one.  Thanks for reporting!\n. yes, if you have a need to stop event propagation after the Kinetic container element (the one that you pass into the stage) then you need to bind a listener to your container that uses \n\nevent.cancelBubble = true\n\nor you could use the jQuery stopPropagation method as well.\n. hiya!  I've seen that behavior too, and unfortunately that's a side effect of using the requestAnimationFrame that's build into the browser.  The browser uses a dynamic frame rate, and sometimes I've noticed that animations can be glitchy because of this.  I'm currently investing a custom request animation frame solution that may remedy this problem.  Stay tuned!\n. The issue is related to the iOS requestAnimationFrame implementation. Still investigating :)\n\nSent from my iPhone\n\nOn Oct 30, 2012, at 10:55 AM, Chris Jennison notifications@github.com wrote:\n\n> Is there any update on the bug fix, Eric?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. I did identify and fix a major issue with transitions that greatly improves performance for multiple transitions, but I'm still looking into improving it even more, possibly with a custom implementation of requestAnimationFrame.  maybe you could help me take a look :)\n. KineticJS currently uses the requestAnimFrame shim.  Fixed framerates will crash mobile devices.\n. Heya - I made several big animation and transition performance improvements with v4.0.5.  Could you give it a whirl and see if this resolves the problem?\n\nCheers,\n\nEric\n. There's been a ton more perf enhancements since v4.0.x (we are now on v.4.5.0), plus KineticJS is using the GreenSock TweenLite library which is very fast as well.  Closing this ticket for now.\n. interesting, you're right this looks like a bug.  After looking through the clone unit tests, I noticed that the tests are instantiating objects that use a shadow object, which has an offset property, so my guess is that if you include an empty shadow object like this:\n\nvar rect = new Rect({shadow:{}});\n\nthat this may provide a work around for now.  I'll have this fixed in the next release, v4.0.5\n\nThanks!!!\n. I don't think I have unit tests that clone sprites - ill look into that. Thanks!!\n\nSent from my iPhone\n\nOn Oct 30, 2012, at 9:50 AM, Wazabii notifications@github.com wrote:\n\n> Hi again.. Not sure if this is a bug or not. Since I stick with kinetic 4.0.1, I've been trying to clone a sprite object as well. But the result: cloned object seems to be a shape rather than a sprite. Is it suppose to be like that?\n> \n> Thanks\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. sorry for the pain guys!  Yes, it will be fixed by v4.0.5\n. I created a jsfiddle that creates a rectangle and clones it without any issues (not using shadows or offsets).  Check it out:\n\nhttp://jsfiddle.net/hz77b/\n\nAm I missing something?  If so, could you modify the jsfiddle to break the clone method?\n. P.S. you're right about Sprite shapes (unrelated to the first bug you mentioned), the Sprites class wasn't defining the shapeType which meant that the clone method couldn't figure out that it was a Sprite.  this issue will be fixed and added to the upcoming release - thanks!!\n. @macl this sounds like the expected behavior.  The whole point of Shape classes was to provide draw functions for you.  Doesn't seem to make sense to overwrite them.  If there are particular methods in a Shape class that you'd like to reuse, you could create a new class and reference those methods.  A good example is the TextPath shape which references methods from Text and Path.\n. follow up with this thread - Sprite cloning has been fixed as of v4.0.5\n. okay guys, there's a lot going on with this ticket, and since a lot of these issues have been resolved, I'm closing this one for now.  If you're still having problems with clone(), please open up a new ticket so it that can be tracked, and also provide a jsfiddle demonstrating the problem.  I've been unable to reproduce the error mentioned in the first comment, or a black transparent image.  I provided a jsfiddle in one of my earlier comments that demonstrates cloning a node without a shadow or offset.\n\nThanks!\n. @macl sure, but the drawFunc attr for Shapes was never intended to be editable (if this were Java, it would have been a private attribute)\n\nFunny thing is, the Rect shape actually doesn't even have any methods that you could reuse:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/shapes/Rect.js\n\nIt really would make more sense to create a custom shape for what you're doing.  Also, if you want to make a hole inside of something, you should look into leveraging the winding rule, rather than xor.\n. I'll probably go ahead and add logic to each Shape class to make sure it doesn't overwrite a user defined drawFunc though, because several other people have had similar problems.\n\nCheers!\n. use 'dragend'.  Here's a list of the supported events:\n\nhttps://github.com/ericdrowell/KineticJS/wiki\n. np!  no, the drag end event is fired immediately after a redraw:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/DragAndDrop.js#L51\n\nso if you want to do something and then draw the layer again on drag end, you'll have to use draw();\n. Yes, this is an issue with older versions of android:\n\nhttp://www.html5gamedevs.com/topic/114-canvasclearrect-bug-in-android-stock-browser/\n\nthe simplest work around is to create your stage and layer, and then add the layer to the stage after a timeout (50ms worked for me)\n. This is the correct behavior since a dbl click is defined by two clicks... You just need to add logic in your event handlers to do whatever is is you're trying to do.  For example, you could add a timer in your click handler that waits 300ms before doing whatever it's supposed to do, and cancel that action if a double click occurs.\n. lines don't support cornerRadius, although they do support lineJoin: 'round'.  This will produce rounded connections at steep angles.  cornerRadius is just for Kinetic.Rect, and will eventually be used with Images as well.  Here's the line docs:\n\nhttp://www.kineticjs.com/docs/symbols/Kinetic.Line.php\n. if you want dramatic curves where the lines connect, you might consider creating an SVG path shape instead.  Here's an example of that:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-path-tutorial/\n. Thanks for the pull request, and also thanks Davonium for helping me look at these :)\n. Currently, I'm not planning on supporting composite operations via an API, although I may later.  Closing this for now, but I may come back to it.  Thanks for this though!\n. yikes, sounds like a bug.  I'll add this to my todo list. \n\nThanks!\n. Actually, it looks like the setDrawFunc is working correctly.  Here's a jsfiddle that alters a Rect draw function:\n\nhttp://jsfiddle.net/wJ36T/\n\nIn regards to extending Line - I don't think it quite makes sense to enable passing drawing functions into the Line constructor, since the whole purpose of Shape classes is to have a drawing function predefined.  If you want to reuse methods of Line, you can extend the methods instead of the whole class (this pattern is very common inside the KineticJS codebase).  Here's an example of the TextPath shape extending a method from Text:\n\n```\nsetText: function(text) {\n    Kinetic.Text.prototype.setText.call(this, text);\n},\n```\n. This is the correct behavior.  remember that transformations are applied after a shape is drawn.  We wouldn't want the height and width to take into account scale, or else scaling a node would have no effect.\n\nI would suggest either not scaling the node, and placing it in a different layer that's not scaled, or if it's absolutely necessary, you could include the scale with your setWidth() and setHeigh() usage.  i.e.\n\nnode.setWidth(100 / node.getScale().x);\n. this is very, very interesting.  The idea of having separate scene and buffer draw functions is very compelling... Might even make sense for every default shape to include a sceneDraw and bufferDraw method.  Devs could then also override the bufferDraw method with something customized if desired.  Such a change would also fit in nicely with the request to not render the buffer graph during animations.  I'll work on this for the next release :)\n\nP.S. thanks so much for putting so much thought into this!  I'm inspired\n. follow up with this thread - I've done a ton of work in regards to graph drawing logic, including the ability to define custom hit drawing functions via the drawHitFunc attr.  In addition, the drawing performance in general has been greatly improved, because there are now three different drawing functions - scene, hit, and buffer graph drawing functions.  This enables each draw function to be optimized for its purpose.  I'll have tutorials up within a week or so.\n. super interesting.  I've also been thinking about applying the winding rule to do stuff like this.  I currently have a todo item to create inner shadows, and I think using the winding rule would be an excellent approach.  The only problem, though, is that if users can create inner shadows for rectangles, they would also expect them for all other shapes.  It sounds like it would be quite a task to construct winding drawing procedures for all shapes.  And how would this work for images and sprites?  What do you think?\n. I'm not entirely convinced that every Kinetic shape should be able to support the winding rule to cut holes in them.  Wouldn't it make more sense to create shape plugins?  I.e. you could create a doughnut shape, Kinetic.Doughnut, which people download.  I intend to eventually provide a gallery of 3rd party plugins that people can download.\n\nThoughts? \n. Thanks!\n. I've had several requests to provide some sort of clipping functionality that would do exactly what you're asking for - I'll add it to my todo list :)\n\nThanks!\n. It'll be in the next release:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n\n\"container clipping function\"\n. Follow up - Clipping regions are now fully supported as of v4.4.0\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log#440-mar-26-2013\n. I'm actually not able to replicate this. Check out this jsfiddle:\n\nhttp://jsfiddle.net/KdM55/\n\nI wrapped a console.warn() with two alerts so that I can detect if perhaps IE9 fails when executing console.warn() if the console window isn't open. Not able to get a failure.\n\nAlso, console.warn() is working correctly for me when the console window is open as well.\n\nDoes the jsfiddle work for you?\n. AH that's the problem.  IE9 running on Windows 7 64 bit is notorious for having problems :)\n\nI'll go ahead and make this change, thank you!\n. I wasn't able to auto merge the pull request because of some changes made to the dist files, so I went and just added the window.console part locally and committed it here:\n\nhttps://github.com/ericdrowell/KineticJS/commit/b3e7e26248ec3a2d86653bf567aaa92c2b3523ac\n\nI'll still give you credit for the fix in the changelog though :)\n\nP.S., if you find any other bugs in IE9 on Windows7 64bit please let me know because I don't have that environment for testing.  Thanks!\n. dang IE10.  did you test on IE9, Safari, Firefox, Chrome, iOS, and Android?\n. might be a bug with IE10 because the getBoundingClientRect JS method is supposed to take into account all of the CSS styling of itself and ancestor nodes\n. haven't forgotten about this, will get to it asap :)\n. Hey Jason, closing this pull request for now because I haven't had anyone else mentioning this - I'll keep track of it though in my todo list.  I'm still waiting for MS to send me some test devices ;)\n. would you mind testing this in FF, Safari, and iOS if possible?  I'd like to pull in the change, but I'm currently unable to test on windows devices.  If you give me the thumbs up, I can just pull it in.\n. ah okay.  When I get a chance, I'll just pull it in, and if it works on all the devices that I'm able to test on, I'll commit it back to the repo\n. yes, you can use a clipping region, and then convert to the node to an image with toImage().  Here's a tutorial on clipping\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-clipping-functions-with-kineticjs/\n\nI would suggest, however, to use an Ellipse shape with an image fill.  This will produce smoother edges.  Tutorial on fills here:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/\n. have to agree wtih @lazerblade01 on this one - generally, in JavaScript, if you want to delete an object (such as a KineticJS Shape), it's not necessary to null out, or delete all of the object's properties.  Instead, you just need to remove all references to it, and the JavaScript garbage collector will do the rest.\n. Actually, here's another issue related to this one that makes a great point:\n\nhttps://github.com/ericdrowell/KineticJS/issues/29\n\nI'll spend a little time re-investigating this one.  Thanks!\n. nice, thanks!!\n. update on this thread: you can now create custom hit detection functions.  Here's an example functional test:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/tests/js/functionalTests.js#L862\n\nThis is pretty powerful because it gives us unlimited flexibility in terms of how standard shapes, or custom shapes, are detectable.  Furthermore, it also enables us to create high performance hit detection functions. \n. BlackScorp, did you try upgrading ruby?\n. Exactly.  Was going to mention that actually, all shapes support borders, including images, via the stroke property.  Here's a tutorial:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-set-stroke-with-kineticjs/\n. I'll have to think on this one - not sure if I want to repurpose the Circle shape to support wedge shapes via an angle property.  From a code line count point of view, it makes sense.  From a pure OO point of view, circles aren't defined by an angle property.  At the moment I'm kind of leaning towards creating a Kinetic.Wedge shape instead.  Thoughts?\n. A full circle makes sense, that's what I would expect.  I'm also planning on making an Arc shape, and a Ring Shape, with a similar relationship between Wedge and Circle\n. Ring shape will be coming soon.  Closing this ticket for now\n. great catch!  Not sure how this was missed\n. oh I see how it was missed, the buffer canvas is immediately resized afterwards with _resizeDOM()\n. fixed it up - thanks!\n\nhttps://github.com/ericdrowell/KineticJS/commit/908fa24b8e9b217ed6bbd8d75cec5ac04323f222\n. Actually, KineticJS used to throttle drag and drop, but this created a laggy drag and drop experience which most people didn't like.  We want the drag and drop to be as snappy as possible.\n\nI don't think the issue is necessarily the fact that drag and drop operations trigger redraws 60 frames per second, but that the getIntersections() algorithm should be revisisted.\n\nIf I were personally in your shoes, I would throttle the use of getIntersections().  In other words, on my dragmove handler, I would trigger a getintersections at about 10 frames per second or so as chris has suggested.\n. shoot didn't mean to close this one because getIntersections does need to be worked on.\n\nTo explain a bit further, I basically did a trade.  KineticJS hit detections are now nearly instantaneously fast.  The new algorithm, unfortunately, makes the getIntersections() method a bit slower.  Since the 99% use case is regular hit detection, this is a good trade off though.\n. okay, to be clear, there are two ways to get an intersected shape based on mouse position:\n\n1) getIntersection() - preferred\n2) getIntersections() - very slow, and should be used for special situations\n\nthe getIntersection() method is blazingly fast, and returns an object containing information about the intersection point, such as a reference to a KineticJS shape if one is there, or pixel color information.  \n\nthe getIntersections() method does the same thing, except that it iterates through and redraws every single node in the stage in order to return a collection of intersections that may have been layered on top of eachother. \n\n99 times out of a 100, you're probably just interested in the visible intersected node which is at the top of nodes beneath it.\n\nI've actually considered removing the getIntersections() method entirely, but haven't because there are some special situations when you actually do need a collection of intersections.  At this time, I haven't been able to find a way to speed up getIntersections, although I'll keep looking into it.\n. Closing this ticket for now.\n. is it possible you could set up a jsfiddle demonstrating the problem?  It's a bit hard to debug something like this without seeing it in action.\n\nThanks!\n. @eduardo ditto, looks good to me in latests version of Chrome.  What OS are you using?  32bit 64bit?\n. classic JavaScript closure problem.\n\nhttp://stackoverflow.com/questions/111102/how-do-javascript-closures-work\n\nhttp://www.mennovanslooten.nl/blog/post/62\n. drawFunc should never add or remove nodes.  Its purpose is solely for rendering.  Try hooking into an attr event, or a draw event, to remove a shape.  Also, tons of performance improvements have been made since these versions, so I'd recommend trying out the latest release\n. yep that's right, you cannot put layers inside layers.  If you want to layer things inside of a layer, you need to use groups.  Layers are like groups, except they are tied to a physical canvas element for rendering.  Be sure and read over the how it works page here:\n\nhttps://github.com/ericdrowell/KineticJS/wiki\n\nHere's an example Node hierarchy:\n\n```\n    /*\n     *        Stage(0)\n     *          |\n     *        Layer(1)\n     *          |\n     *    +-----+-----+\n     *    |           |\n     *   G1(2)       G2(3)\n     *    |           |\n     *    +       +---+---+\n     *    |       |       |\n     *   S1(4)   G3(5)  G4(6)\n     *            |\n     *            +\n     *            |\n     *           S2(7)\n     */\n```\n\nG stands for Group, and S stands for Shape.  I'll try to make this more clear as soon as possible, thanks!\n. np!\n. A KineticJS shape can only have one fill and one stroke.  When creating more complex nodes, you need to use groups.  Here's an example of that:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-complex-shapes-using-groups-with-kineticjs/\n. oh snap, okay I'll take a second look.  Thanks!\n. Follow up: Just checked your code with the latest version of KineticJS, and it's working correctly:\n\nhttp://jsfiddle.net/JrCbx/\n\nMust have been fixed somewhere a long the way :)\n. Haven't forgotten about this - filters have been somewhat of a lower priority lately so I haven't gotten to this.  Hang in there :)\n. Thanks again for this!  I made your change here:\n\nhttps://github.com/ericdrowell/KineticJS/commit/0c38e3cf391e80195af29bc2b75e3e967748c62b\n. planning on using Rob's excellent spline tutorial to enable curve smoothing for the Line shape\n\nhttp://scaledinnovation.com/analytics/splines/aboutSplines.html\n\nDo you think this will be sufficient?\n. Agree very much with you there.  Will keep doing my best to keep up with documentation.  Thanks!\n. Update on this thread:\n\n1) yes, the documentation has been updated\n2) The Spline shape has been created and works great.  Here's a tutorial:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-spline-tutorial/\n\n3) The spline shape is great for creating  curved shapes based on points, but sometimes people don't actually want a spline, they want rounded corner connections (as was the original reason for this thread).  After a bit more thought, I think it makes sense to keep the Spline shape as is, and also add cornerRadius functionality to Line, afterall.  macfreak, I'll take another look at the work you did some 9 months ago.\n\nv4.6.1 is purely for bug fixes at the moment, so I'll try to get this feature added into v4.6.2\n\nReopening the ticket.\n. This will get into the code base soon.  I'm actually now planning on supporting rounded corners for all shapes, including rect, polygon, star, regularPolygon, line, etc.  This will most likely make it to v4.7.1 or 4.7.2 depending on other priorities (I'm currently working on splitting the Canvas class into a Canvas and Context class, adding context tracing, fixing some major bugs, and migrating unit tests over to Mocha, which will be in v4.7.0)\n. update on this thread.  All shapes will support rounded corners with v4.8.0.  This will definitely make it into that release.  Stay tuned.\n. This is the expected behavior.  Drag and drop modifies the translation of the entire shape, not the position of the points relative to the translation.  You can get the translation with the getPosition(), getX(), or getY() methods.\n. getPosition() works correctly for me after dragging a line (it returns non-zero result).  Can you setup a jsfiddle showing the behavior?\n. clicking on a shape inside of a group, which is inside of a group, which is inside of a layer, which is inside of the stage, works for me:\n\nhttp://jsfiddle.net/8gAW4/\n\nclosing this ticket.\n. this is definitely an event bubbling issue.  I'll look into this as soon as I can.\n. ah okay.  the stage is using evt.preventDefault() to prevent the page from scrolling when you try to drag and drop.  Come to think of it though, it doesn't make much sense to use evt.preventDefault() everytime (i.e. for cases when you are not trying to drag and drop).  I'll look into this\n. This is possible today.  just make the whole stage draggable.  This enables panning.  Here's a tutorial:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-the-stage-with-kineticjs/\n. hm, isn't that what scrolling is?  when you scroll downwards, you're panning the stage upwards, right?  If you're looking to implement scrollbars, here's a lab that shows a way to accomplish this:\n\nhttp://www.html5canvastutorials.com/labs/html5-canvas-simple-scrollbars-with-kineticjs/\n. This has been fixed and will be included in v4.5.5.  Please see this issue:\n\nhttps://github.com/ericdrowell/KineticJS/pull/510\n. I believe this issue is now resolved - please try out the latest version of KineticJS and let me know if it's fixed for you.  The shadow properties have been flattened, and now look like this:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shadows/\n. eek!  That's very unusual.  I'll fix this today and release a hot fix, v4.1.1.  Thanks everyone for the heads up\n. SO sorry for the inconvenience guys.  Cross browser issues have virtually been non existent lately, so I didn't test FF or IE.  The problem was the '#' symbol :)\n\nReleased v4.1.1 which you can get on the homepage now: http://kineticjs.com/\n. that sounds very unusual.  Can you provide a jsfiddle demo, and also the OS and browser that you're using?\n. Strange, your demo works great for me on Windows 7 Chrome as well.  Are you using 64bit by chance?  It's notorious for having browser related problems.\n\nAlso, you should try out the latest version, v4.1.1, which greatly improved drag and drop performance by skipping the hit graph draws.\n\nLet me know what you find!\n. hi there!  interesting - I suppose IE9 is really inefficient about obtaining text metrics (no surprise).  Okay, to fix this, I need to cache the text metrics so that it doesn't have to be read over and over (probably should have done that anyways).  I'll see what I can do to get this fixed for the next release, and if not, it will definitely be in the following release.  sorry for the frustration!!\n. Thanks for the kind words!  So with v4.3.3, I made several Text performance enhancements which should help speed things up.  At the end of the day, the root problem is that the fillText() method of the HTML5 Canvas API is just darn slow.  This is a browser implementation issue, not a KineticJS one.  However, KineticJS can come to the rescue with node caching.  Check out this tutorial which runs pretty smoothly by caching text shapes:\n\nhttp://www.html5canvastutorials.com/labs/html5-canvas-wheel-of-fortune/\n. hi I need more info.  Can you post a jsfiddle demonstrating the behavior?  Thanks!\n. yea, looks like a context problem inside the on() method.  I'll add this to my todo list.  Thanks!!\n. fixed!  The problem was that the drag and drop module still had a reference to the node that was removed which caused things to blow (in other words, this problem only occurred if your shape was draggable:true).  Here's the change:\n\nhttps://github.com/ericdrowell/KineticJS/commit/5e16b3d7d0538dce04d35a91acebc288918be51c\n. it fixed the jsfiddle mentioned in the issue:\n\nhttp://jsfiddle.net/9YfSc/\n\nif there are other conditions where the problem occurs, can you create a new ticket?\n. try this: \n- resize the stage with setSize()\n- scale the stage\n- redraw\n- get the stage image with toImage() or toDataURL(),\n- set the stage size back with setSize()\n- scale the stage back\n- redraw\n. Hiya, unfortunately there's nothing KineticJS can do about this - KineticJS is using the requestAnimationFrame JS method, which means that the animation rendering is up to the browser implementation.\n. not sure where you're going with this, KineticJS already supports on and off, with those features.  Have you checked out the events tutorials?\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-path-mouseover/\n\nAlso, why do you feel that it's necessary to create an Observer and Mediator class?\n\nKineticJS already supports the Observer pattern because devs have access to attr change events, and custom events\n. actually that doesn't quite make sense... there should be no reason to pass in a handler to the off method.  a namespace, or event type should be enough\n. currently, you can only directly use on() and off() on an array of nodes.  You can also use the apply() method to apply a method to an array of nodes:\n\nhttp://kineticjs.com/docs/symbols/Kinetic.Collection.php\n\nIt would be a big overhead for Kinetic.Collection to support all Node methods directly.  I would be willing to do it if there's enough of a demand, but currently there are much bigger fish to fry :)\n. ctx.stroke() will not work.  You must use canvas.stroke(this) in order for hit detection to work property.  The canvas variable points to both the scene graph renderer, and the hit graph renderer. \n\nIf you modify the tutorial with canvas.stroke(this), events are working correctly\n. following up with this thread - this issue has been fixed as of v4.5.5\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log#455-july-28-2013\n. Hiya!  most of those errors are happening because you need to run the unit test suite on a web server in order for image data related stuff to pass due to security constraints.  Thanks for bringing this up, just realized that I need to mention that they should be ran on a web server :)\n\nas for the \"Problem with node and shape type selector\" error, that definitely shouldn't be happening, it's passing for me locally.  are you running the latest source files?  Have you made any changes to the selector logic?\n. OH.  got it.  I just checked the test, which is line 632 of the containerTests.js file, and test() should be warn() so that the failed dataUrl comparison doesn't block the rest of the tests (should be a soft test).  I'll fix this and check it in right now\n. fixed!\n\nhttps://github.com/ericdrowell/KineticJS/commit/5705d909e59ee802a9f1c5ed937db9d81f4ead95\n\nAlso added more README info\n. sorry for the confusion, I cleaned up the Testing instructions here: https://github.com/ericdrowell/KineticJS\n. ah yes, I've seen this before but haven't gotten to it yet.  There's definitely some weirdness that goes on when you change tabs.  The problem isn't actually KineticJS, per say, but with the requestAnimationFrame implementation of the browser.  I do certainly need to add something in that prevents this from happening, perhaps some logic that detects if a new tab was activated, and then halt the animation until focus is returned.  Not sure if this is even possible though.\n. Thanks for this!  Will take a look as soon as possible\n. Closing this pull request because I'm planning on rewriting how touch events work soon (in order to cleanly support multi touch + gestures).  Thanks for looking into this!!\n. I remember really struggling with this, because each browser places the text in a slightly different position.  I remember that I had to use vertical align center to best normalize the inconsistent placements.  Have you tested your fix in Chrome, Firefox, Safari, and IE9?\n\nIn Chrome, it's actually placed in the correct spot.\n. Hi again!  Unfortunately, each browser positions text slightly differently based on different configurations (Canvas API issue, not KineticJS).  I remember that I had spent a lot of time trying to figure out the best way to get all of the text to line up consistently across all browsers, and I ened up with the vertical align middle style as part of the solution.  \n\nI'm closing this ticket for now, but will keep it in mind.  Whenever I get the time, I'd like to reinvestigate text positioning across all browsers to see if things have changed.\n\nThanks again!\n. unfortunately, Windows 7 does not support touchstart, touchmove, and touchend (like every other browser that supports touch).  This is currently on my todo list, but haven't had enough demand for it to increase the priority.\n. oh actually there were was a slight problem that I fixed here:\n\nhttps://github.com/ericdrowell/KineticJS/commit/df63558686c3b7ab65f427c5749534e80b6df253\nhttps://github.com/ericdrowell/KineticJS/commit/bec7f5450b45d429dd0e3999b9e92f946902f9d1\n\n1) the frame width and height should override the shape level width and height, not the other way around\n. in the end, decided not to take the change after all.  The frame width and height should be defined by the width and height properties in the frame object, not the shape level width and height.  In the context of sprites, the shape level width and height have no meaning because the width and height of the shape actually changes depending on the frame because each frame can have different widths and heights.  Here's a good example of that:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-sprite-tutorial/\n. hiya!  This will added to the next release.  Thanks!\n. done and done:\n\nhttps://github.com/ericdrowell/KineticJS/commit/01c5f4f7ca4e4ca03f497f7908b07e11885bb86e\n. works perfectly for me:\n\nhttp://jsfiddle.net/xQSMe/\n. oh I see your problem.  The rotation property is a node property, which means that it's a property of the entire shape.  Frame objects do not have a rotation property.\n\nIf you want to rotate the whole shape for specific frame indices, you might try hooking into the afterFrame event via the afterFrame() method, and then rotate the whole shape accordingly:\n\nhttp://kineticjs.com/docs/symbols/Kinetic.Sprite.php#afterFrame\n. can you provide a screenshot with the output you're trying to create?  You might be able to use a single shape with a pattern to generate the 10x10 grid\n. are you sure that it's only slow once you do stage.add(layer), and not when you're adding shapes to the layer?   Did you measure the time for the double for loop as well?\n. interesting.  btw, when you do stage.add(layer), the layer is rendered.  So the ~3000ms is the time it takes to render the whole layer (which in your case is the whole stage)\n. have you tried not using clone() ?  just instantiate a new rectangle directly with Kinetic.Rect\n. Also, I'd like to see the code that you're using for the cloned shape.  That info will reveal where the slow down is occurring\n. Thanks for this!\n\n1) Shear transform is spot on, that's exactly how I planned on implementing it\n2) Arc shape - I have plans to implement this slightly differently.  I plan on having Arc extending Shape, and Wedge extending Arc\n3) Spline shape - I released my own version of Spline in v4.3.0, which extends Line, and also has a tension attr that lets you define the interpolation.\n\nSince the Shear code is a few lines, I'll manually put those in and give you credit in the change logs :)\n\nSeriously really appreciate the work you put into this\n\nCheers!\n. Haven't forgotten about this - will add it in as soon as I get the chance (been pretty swamped lately)\n. Will look into this before the next release. Thanks!!\n. ah, this is because the hit graph is no longer redrawn during drag and drop operations to improve performance.  Will have to put some thought into this.  Thanks!\n. yes, dragend should work as a work around for now.  I'll try and see if I can sneak this into the next release\n. ah okay thanks for the heads up.  I'll have this fixed by the next version, v4.3.2.  Thanks!!\n. Thanks! As i mentioned before, the problem is just that the hit graph doesn't redraw during drag and drop, so when the mouseup event triggers, the hit graph rendering isn't there to pick up the event.  The fix should be pretty easy, and will be in the v4.3.2 release sometime this week.\n\nHang in there,\n\nEric\n. Fixed!  Thanks guys for all of your help.  The fix will be included with the 4.3.2 release coming out this week.\n. This will hopefully be addressed soon.  I plan to eventually support multi touch in KineticJS, which should resolve issues like this.\n. very interesting stuff!  will take a look as soon as I can\n. for this use case, wouldn't it be simpler to stack sprites on top of eachother?  i.e. you could have a character sprite, an armor sprite, a weapon sprite, etc., inside of a common group.  That way, you can hot swap out armor and weapons by changing the corresponding sprites.  \n\nClosing this for now because I haven't had anyone else needing this feature.  I'll keep in mind though.\n\nThanks again!!\n. fixed this yesterday, thanks! (check the disqus comments at the bottom)\n. heya!  You're absolutely not coming across as a downer, totally appreciate it.  I want all of the tutorials and labs to be perfect :)\n\nI'll take a second look as soon as I get a chance, thanks!!\n\nEric\n. This has been fixed - it was a problem with the lab, not KineticJS\n. I believe this is more of an issue with implementation, not a bug inside KineticJS.  Your logic should never allow multiple circles to be \"active\".  touchstart should flag a circle as \"active\", and then you could have a function or method that synchronizes the drawing based on the active circle (model view pattern).\n\nIn regards to forcing a touchend when you touchmove out of the stage, I'm not sure that this is something KineticJS should enforce.  When this situation occurs, you can simulate a touchend like this:\n\nstage.simulate('touchend');\n\nor just trigger touchend directly:\n\nstage.fire('touchend');\n\nWhat do you think?\n\nP.S. your graphic looks really neat :)\n. this is the correct behavior.  the touchend event should be called only when you touchend over the shape that you bound the event to.\n\nIt sounds like you want the contentTouchend event.  This will fire anytime a touchend event is triggered, regardless if you're over a shape or not.  Try this:\n\nstage.on('contentTouchend', function() {...});\n\nLet me know if this doesn't work for you.\n. Yea, I was expecting this to be a problem :(\n\nThe thing is, I want KineticJS to move forward.  Previously, KineticJS only supported dashed straight lines.  If we hook into the native dash line support (only chrome supports this right now), then any stroke can be dashed, including splines (which is coming for the next release).\n\nI don't want browsers who aren't implementing the spec to hold us back.  Just like today in web development, if you're using IE6, you won't get pretty rounded corners.  This is a form of graceful degradation.  I fully expect most browsers (especially FF and Safari) to implement dashed lines soon.\n\nIt is true that I could put in logic that sometimes draws dashed lines when its possible, manually, in browsers that dont support dashed lines (like straight lines, or straight strokes in IE9), but this is effectively adding bloat to the framework in order to make up for browsers not keeping up.  Also, since dashed lines are purely aesthetic, it shouldn't break applications.\n\nWhat do you think?\n. FF is usually pretty good with keeping up.  I would be really surprised if they don't implement it within the next couple of months\n. For the time being, I don't have plans to reintroduce the lineDash logic just for the Line shape, because I'm fairly certain it will cause more confusion for people than its worth.  In doing so, line dashes will work in all browsers, but will only work for general strokes for browsers that have implemented lineDash.  It's easier to understand if its all or nothing, if a browser always supports it, or doesn't at all.\n\nTo me, the lineDash attribute is a lot like the border-radius CSS property.  When creating a website, you can use border-radius to get nice rounded corners in modern browsers, while knowing that older browsers will just render the sharp corners.  It won't break the app.  This is a form of graceful degradation.\n\nIf more people make a ruckus about this I'll consider putting it back in, but currently I have a lot of bigger fish to fry in regards to bugz and enhancements :)\n. what do you mean by \"break\"?  is a JavaScript error thrown?\n. This is the expected behavior.  When two shape perimeters intersect and are antialiased, how is KineticJS supposed to know which shape belongs to the pixel if its color key doesn't match either shape?  There's really no need to try and add extra logic to figure out antialiased pixel mappings :).  Antialiased pixels are simply not part of the hit region.\n. can you explain a bit further?  what do you mean by thumbnails?  Images?  what's broken?  JavaScript errors?\n. Would you mind posting this problem in Stackoverflow?  I'm really sorry, but I don't have time at the moment to walk through your code and pinpoint the problem.  There's a lot going on there.\n. KineticJS doesn't support \"drop\" and \"dragenter\" events.  Here's a list of the currently supported events:\n\nhttps://github.com/ericdrowell/KineticJS/wiki\n\nthis behavior can be implemented using the intersects() and getIntersections() method.  Thoughts?\n. heya!  interesting - yes.  However, I haven't had much demand for events like these, so they would be put lower in the priority list.  As you mentioned, there's a lot of complexity with drop and drag enter events, in regards to how different users would expect it to work, which implies a lot of configurations, which implies a lot of complexity.  For now, I think it's best if left to the user to roll their own drop or drag enter logic, unless a lot of people start asking for it.\n\nCheers!\n. Github issues are mostly for bugs. I would suggest re-posting this on Stackoverflow so the community can help you there: http://stackoverflow.com/questions/tagged/kineticjs\n. the code is a bit buggy... Github issues are mostly for bugs.  I would suggest re-posting this on Stackoverflow so the community can help you there: http://stackoverflow.com/questions/tagged/kineticjs\n. your problem is here:\n\ncontext.fillText(\"I\", parseInt(width/2), parseInt(height/2));\n\nneed to use canvas.fillText().\n\nI would also recommend just combining a Kinetic.Rect with rounded corners and a Kinetic.Text shape.  Here's a tutorial on grouping:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-complex-shapes-using-groups-with-kineticjs/\n. yep, just set the listening attribute to false with setListening(false).  Here's a tutorial:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-listen-or-dont-listen-to-events-with-kineticjs/\n. Yep, pass an object as the second parameter. Here's the docs: http://kineticjs.com/docs/symbols/Kinetic.Node.php#simulate\n. yep, you're absolutely correct, thanks!  There's a lot to document, so there's a high chance there are other errors like this sneaking around the code base.  Fixed!\n. I believe what you need is the once() method - this is currently on my todo list.\n. Thanks!  This will hopefully be addressed with the next release\n. This is really strange code - why is a reference to the Rectangle stored after you've deleted it?  When you remove a node with remove(), all of its references in the stage are removed, including event handlers.  You should instantiate a new rectangle each time with new Kinetic.Rect();\n. ah, I see the confusion here.  the setAttr method shouldn't be public.  You need to set the draggable property with the setDraggable() method.  The code is here:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/DragAndDrop.js#L138\n\nYou'll notice that this method invokes additional logic other than just setting the attribute.  I need to investigate whether I should change setAttr to _setAttr to indicate that it shouldn't be used (it's already not documented), or if I should allow developers to use the method, and add an overhead of attr event listeners to run extra logic for special attrs like draggable.  \n. np!  It's a legitimate issue\n. cool app.  Though, there's no way I would have time to go through all of the code to find the issue.  Can you put together a simpler jsfiddle to demonstrate the problem?  It would be much easier for me to fix something there.  No one else has mentioned a problem with clicks not firing, so I'm guessing that you have something setup with jquery that's stopping event propagation. \n. Closing this for now.  Chrome has had lots of problems over the months related to canvas, so this may be resolved by now.  Please reopen if this is still an issue.\n. layer.get('.testText') returns an array of nodes, not a single node.  Here's the docs:\n\nhttp://kineticjs.com/docs/symbols/Kinetic.Container.php#get\n\nand here's a tutorial:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-select-shapes-by-name-with-kineticjs/\n. Hiya!  Believe it or not, this is the expected behavior.  The override coordinates in the dragBoundFunc are absolute coordinates, meaning that they will not be affected by transforms such as scales.  If you want the dragBoundFunc to adapt to the stage after it scales, the function will need to take the stage scale into account.\n\nCheers!\n. I made significant changes to remove() with v4.3.1, including a counterpart destroy() method.  Try it out and let me know if this resolves your issue.  Thanks!\n. great!\n. yep, have plans for that.  I'll try to get the change in for the v4.3.1 release. \n. Here you go!\n\nhttps://github.com/ericdrowell/KineticJS/commit/4136ddb398f2138d8942bbe42024351a9d13e49b\n. I believe the problem you're seeing is that you're expecting drag events to bubble, which currently they do not.  dragstart, dragmove, and dragend events will bubble with the next version v4.3.2\n. correction, drag events will bubble with v4.3.4 which will be released next month\n. drag event bubbling was added in v4.4.0\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log#440-mar-26-2013\n. does anyone know if this issue has been resolved?  I haven't heard of any issues like this in months.  (If mousemove was broken in FF, I'm certain that people would be filing more bugs left and right).  Please reopen this if it's still an issue.\n. This is not a bug with KineticJS.  The tutorial just needs to be updated\n. Probably will not work because it looks like hammer only works with DOM nodes. Kineticjs has plans for multi touch support, but its lower in priority at the moment. You can, however, do some of the multi touch work in your app. Check out this lab - http://www.html5canvastutorials.com/labs/html5-canvas-multi-touch-scale-shape-with-kineticjs/\n. Heya!  A few bugs were fixed with drag and drop with version 4.3.1.  can you give it a try and see if you're still having issues?\n. Wow that's pretty in depth, thanks!  My thoughts:\n- isEmpty --> great idea, I'll add something like this, or hasChildren()\n- global to local --> you can use getAbsolutePosition() and setAbsolutePosition()\n- too many shortcuts adds an unnecessary overhead to the library, both in size and maintenance, so I probably won't be adding much of those unless there's a really big demand for them.\n- good idea about an option for keeping an image width and height in proportion, although this could be extended to work with any node using size.  I'll add this to my todo list\n- chrisrittter has a good point in regards to the opacity comment, although it may make more sense to use a cloaking method (already on my todo list) which sets a shape visibility to false, but keeps the shape detectable.\n- very interesting about accelerated canvases!  I'll add this to my todo list as well\n\nThanks for all of your suggestions!!\n. The tutorial just needs to be updated.  Not a KineicJS bug.\n. Thanks chris!\n. don't use jquery to add events to KineticJS - KineticJS nodes are virtual nodes, not DOM nodes.  jQuery is a DOM library.  you need to use KineticJS event binding, e.g.\n\nshape.on('click', ...);\n. ah interesting okay, that makes more sense.  Does jQuery do this?  I suppose this is needed in order to make destructors?  Reopening ticket, thanks.\n. yep, Have plans to create a plugin like this as soon as the fundamental stuff is completed.  Maybe you could create one and publish it :)\n. Once KineticJS core is set in stone, I want to get the community involved with creating plugins.  I was also hoping that someone might be willing to create a KineticJS plugins website (I don't have the time to manage one at the moment)\n. This is the expected behavior - Ironically (and as expected) I made this change because a lot of people complained about the previous behavior.  There are only two options\n\n1)  If the mouse ever leaves the stage, force drag end and stop the drag and drop operation (this is how it used to work)  A lot of people complained about this when their app had draggable elements near the stage edge\n\n2) keep drag and drop alive when the mouse goes outside of the stage (current) with the caveat that if you mouseup outside of the stage, and then move the mouse back into the stage, the drag and drop operation is still alive.  The only way to overcome this is to add a mouseup listener outside of the stage - however, this should definitely not be done, because a widget should never bind listeners to DOM elements outside of its container.\n\nThoughts?\n. The general consensus is that this is the expected behavior (other software that implements drag and drop works exactly the same way).\n\nIf you'd like to force drag and drop to end, you can just do this:\n\nshape.stopDrag();\n\nhere's the docs:\n\nhttp://kineticjs.com/docs/Kinetic.Node.html\n. Yikes!!  This is pretty serious.  When using linear or radial gradients, it appears that shadows are also being applied to the stroke if one is defined (if you don't define a stroke, you don't get the double shadow)  I'll fix this up by the next release, v4.3.2\n. Fixed:\n\nhttps://github.com/ericdrowell/KineticJS/commit/624ec25c2991aa5bf611b44562aa5d8d054efbab\n\nA logic problem was introduced when the fill attr was flattened.  This fix will go out with version 4.3.2 that I'm hoping will be released this weekend or next week.\n. Don't forget that under the covers, KineticJS is using the Canvas API, which means it's under the mercy of the browser implementation. \n\nHave you tried scaling the image instead?  image.setScale(2);\n. Okay, I'll keep this one in the back of my mind in case something comes up where this can be addressed client-side.  Thanks!!\n. Actually, the problem is that the API for setSize() changed.  in v5.0.1, you have to pass in an object literal.  In v5.0.2, I'll be adding back in the option for passing in two arguments via setSize(width, height).  Lab is updated.\n. Hiya!  Unfortunately, I believe that Microsoft has created new Event types (not in the w3c spec) that they expect all developers to use in order to handle touch events on wp8.  I haven't had a chance to look into it yet, and actually pretty annoyed with them in general.  The only reason I would consider supporting wp8 is because you fine folks are requesting it :)\n\nI'll keep you posted\n. +1 Samurai\n\nVery sorry for this, but Kinetic.Text needed an API do-over.  It's much cleaner and consistent now.  Here's the updated Kinetic.Text tutorial:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-text-tutorial/\n. cool!  I'll look into this as soon as I get a chance\n. Nice job!!  It works great\n. whoops forgot to update this!!  Adding it to the next release todo list right now :)\n. https://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n. yikes, this is more than a typo, it's a logical error,  The intent was for clockwise to be defaulted to false.  Fixed up now.  Thanks for catching this!\n. thanks, I'll look into this.  It's possible that the method was changed for some reason.  Thanks!\n. yep, stage.remove() will remove the stage.  if you want to remove a layer, use layer.remove() (this doesn't destroy the layer but just unhooks it from the node tree).  If you want to actually destroy the layer, use layer.destroy()\n. You guys are correct.  I finally had a chance to look at the lab, and there is indeed a problem with this scenario:\n\nappears to be a problem with .get() when trying to select children of the parent of a node that is being dragged and dropped, with dragOnTop = true. See drag and drop with resize lab\n\nThe quickest work around for the lab is to set dragOnTop = false for the anchors.  I've updated the lab and it's working again.  I'll address the problem with get() by the next release.\n\nThanks guys!\n. Fixed - the dynamic drag layer now does a deep copy for the Groups and Layers that are reconstructed (which means they now also pick up ids and names and should play well with selectors).  The change will be available with the 4.3.2 release this week.  Thanks!\n. you should be able to clear the fill color with:\n\nsetFill(null)\n\nhave you tried this yet?\n. Even so, this is an unexpected behavior, so I'll get this fixed by v4.3.2.  Whenever a fill type is set, KineticJS should clear the other fill types.  Thanks!\n. Okay so I put a bit of thought into this.  I don't like the idea of the fill rendering style being determined by the order of setting fill configurations.  First off, it creates a huge logic overhead everytime a fill attribute is set (will be a performance hit).  Second, it's inconsistent with all the other KineticJS attributes.\n\nWhat I've done instead, is created a mechanism that makes it really easy to toggle between different fill types, if you choose to set multiple fill types.  You will now be able to use the fillPriority attribute, which can be color, pattern, linear-gradient, or radial-gradient.  \n\nLet's say that you want to toggle between a color fill, and a radial gradient fill.  When instantiating the shape, you can set both the fill property, and the radial gradient fill properties.  If you want the shape to start out with the radial gradient fill, then set fillPriority = 'radial-gradient'.  Then, if you want to toggle to the color fill, just use shape.setFillPriority('color').  \n\nThoughts?\n\nP.S. setting the other fill attributes to null does work, and is essentially another way to coerce fill type priority.\n. This is probably related to the issue people are having related to the mouseup event not being detectable during drag and drop after some rendering optimizations that I made.  I'll address this issue by the next release:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule/_edit\n. haven't forgotten about this issue - it'l just take a little time to get to it.\n. interesting thanks!  I'll fix this up before the next release.\n\nThanks!\n. Thanks!  Fixed up now.\n. You have two options:\n\n1) fork the project and do a build\n2) wait and download the official release sometime this week (will be v4.3.2)\n. np!\n. thanks firebluetom for the initial assist :)\n. This is a known issue - I just need to update the tutorial.\n\nThanks!\n. I'm marking this as invalid now because the dragOnTop functionality has been deprecated because it was causing too many issues.  \n. Hiya, if you're still looking into this, I would suggest reposting on Stackoverflow because the community support is really great there\n. hiya, I'll be creating a public method to programmatically stop drag and drop soon - until then, you can do:\n\nKinetic.DD._endDrag();\n\nThat should stop the drag and drop.\n\nAlso, a lot of changes were made to drag and drop with v4.3.2.  These may resolve your issue as well.  Please reopen this ticket if it does not.\n\nThanks!\n. I think it's a bit cleaner, and more consistent, to call the callback with the context of the node, so that the node is accessed via the \"this\" keyword, similar to drawFunc.  Here's the commit:\n\nhttps://github.com/ericdrowell/KineticJS/commit/9160b694ae24413319e53796af8d75321d0860b2\n\nThanks for bringing this to my attention!!\n. The fill attr has been flattened. When in doubt, check the change log\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n\nOr check out the updated tutorial\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/\n. drats you're absolutely right.  I'll get this fixed by the next release.  Thank you!\n. Fixed up, the change will make it to the 4.3.2 release this week.  Thanks!\n. Cool! I created something just like this for a client some months ago, and used event delegation to handle the resizing for shapes that had the resizable=true flag.  I don't have any tutorials up for plugins at the moment, but the general idea will be for your code to live in the Plugins namespace.  Essentially, you would create a new file, and do something like this:\n\nKinetic.Plugins.Resizable = function(....)\n\nand do your magic there.  Then host your file on a personal website, or as a Github project.  Eventually, I plan to create a gallery where people can submit plugins.  When people want to use your plugin, they will just include your JS file.  The best plugins are the ones that are seamless, such that users don't have to do much extra work, if any.  In my case, simply adding the JS file, and then adding resizable=true to shape configs made them resizable.\n\nCheers!\n\n*\\* Update **\n\noh and almost forgot, if you get this up and running, be sure to send me a link so I can link to it from kineticjs.com\n. Cool!  I'm planning on building a community plugin gallery in a few months. Keep your eye out for it (although, I'd actually prefer if someone else managed a plugin gallery). Well see how it goes\n. absolutely, that would be awesome\n. This is probably related to the new drag and drop performance optimizations that were made recently.  I'll have this addressed by the next release, thanks!\n. Hi again!  It turns out that you've surfaced an even bigger problem with KineticJS (whether you meant to or not).  When both a node and its ancestors are set to draggable=true, currently KineticJS gives the oldest ancestor priority over any of the descendants.  This isn't a very good design.  I made a change that now gives nodes priority over its ancestors.  So now, if both the stage and a shape is set to draggable = true, when you drag and drop a shape, just the shape moves, and when you drag and drop the stage, the whole stage moves.  This will eliminate all the mouseover and mouseout logic you were adding to achieve this behavior.  \n\nThanks again!\n. Each stage can contain multiple layers, and each layer has its own canvas.  You can access the canvas element with:\n\nlayer.getCanvas().getElement();\n\nHere are the docs of interest:\n\nhttp://kineticjs.com/docs/symbols/Kinetic.Layer.php#getCanvas\nhttp://kineticjs.com/docs/symbols/Kinetic.Canvas.php#getElement\n. interesting, I believe this may be a result of an optimization I made with the transitionTo method.  I bet the callback is being executed after the first Tween is completed (a Transition is made up of several tweens).  I'll look into this one.  In the meantime, you should be able to work around this by adding a small timeout in your callback function, say 50ms or so to be safe.\n. great!  Sorry for the headache\n. This should be fixed now, because the transition callback is executed after the last tween has finished, instead of the first.  This logic change will be in the v4.4.0 release coming out this weekend.\n. hmph haven't heard about this.  I've added it as a todo item for the 4.3.2 release because it sounds pretty serious.  stay tuned.\n. Actually, all of the mouseout and mouseleave unit tests are passing fine, and I did several manual tests verifying the functionality as well.  Could you post a jsfiddle demonstrating the problem?  \n\nThanks!\n. Hiya!! ah, the problem is your custom shape.  A custom shape can only have one path, here's an example:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shape-tutorial/\n\nIf the bg rendering needs to have events tied to each element, you should combine a Line with a Rect using groups:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-complex-shapes-using-groups-with-kineticjs/\n\nIf you don't need events, and just want to use the canvas API, you can create a separate layer just for the background rendering, and then draw directly onto the canvas element.\n\n---- About sponsoring\n\nSweet!  KineticJS has lots of code created by the community, so would love to see any pull requests you come up with.  Typically, small enhancements and bug fixes are the most likely pull requests to be accepted.  If you'd like to sponsor the project financially, here's the sponsor page:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Sponsor-the-KineticJS-Project\n\nCheers!\n. Each shape can only have one path for two reasons:\n\n1) The high performance hit detection algorithm requires that each shape has one path (this is how KineticJS is so fast)\n2) Shapes are defined as primitives.  Anything that's composed of multiple primitives should be a Group.\n\nHere's an example of drawing directly onto the layer canvas (check out the curved lines)\n\nhttp://www.html5canvastutorials.com/labs/html5-canvas-modify-curves-with-anchor-points-using-kineticjs/\n. Exactly!  All languages have primitive and complex data types.  With KineticJS, all Shapes are primitives, and you can combine multiple shapes to create complex shapes (like complex data types)\n\nIn regards to inheritance, I know.  I was originally using a more robust inheritance pattern, that enabled developers to easy extend any Node in the framework.  This, however, comes at quite a performance cost (as much as 2x).  KineticJS uses a very high performance inheritance pattern, which in turn makes it harder for developers to extend Nodes.\n\nThinking about it now, I could easily create a public extend() method that automatically propogates properties and methods to children nodes when extending a parent Node.  I'll add this to my todo list!\n\nI only have one branch, the trunk.  Currently, I only make new branches for experimental stuff.\n. that's the KineticJS specific extender.  The modules are loaded in such a way that methods and properties will automatically propagate to children nodes.  I need to create a new public extend method that traverses children and sets those methods and properties regardless of the module load order.  This extend() method will turn into a private _extend() method.\n. hiya!  Can you create a jsfiddle for me so that it's easy to try out?  Thanks!\n\nAlso, have you checked the changelog? https://github.com/ericdrowell/KineticJS/wiki/Change-Log\n. +1 Thanks firebluetom!          \n. Heya, originally I was going to use NodeJS for the build, but someone created the Ruby build for me early on, and it's been working great so far.  Don't think it's really a big deal to put in an effort to ditch Ruby at the moment, but if I'm convinced that it's needed, I'll let you know :)\n. hiya, this is a known issue.  rotationDeg is actually a special attribute that converts the degree and maps it to the rotation attribute.  I have plans in the near future to hook the transition config object into this mapping.\n. The transition class has been deprecated in favor of Tween, which does now support rotationDeg.\n. you have a couple of options:\n\n1) apply a slight shadow to the line such that it creates a 1px border\n2) create two overlapping lines, such that the bottom line is a bit thicker than the top line, which creates a border around the top line.\n\nThere's no plans at this point to support line fills.  But this could change if enough people request it.\n. drats!!  This was a side effect of some major Kinetic.Text refactoring that was bundled with the release.  I'll fix this up and put out another release this weekend (I would put out a release out tonight, but I want to wait and see if any other problems come up).  I'll add a new set of text functional tests so this doesn't happen again.\n\nThanks so much!\n. fixed!  This will be pushed out sometime this week as v4.3.3\n. this is the new expected behavior.  \n\nI don't understand, you want the whole stage to be pannable, and also have shapes drag and droppable?  Only one thing can happen at a time.  Can you expand a bit further?\n. As soon as I get a chance, I'll try and backfill older versions in the version archive.\n\nv4.3.1 is the last version to support text drag and drop.  A bug with text drag and drop was introduced in 4.3.2, which will be fixed this weekend with 4.3.3\n. so all of the versions are now in the CDN (including v1.0.0).  I just need to go through and update the links to them.  \n. could you possibly setup a jsfiddle demo?  You've explained the problem great, it would just help me save a bit of time.  Thanks!\n. I just did a lot of testing on different browsers, including Firefox, and transitioning the layer opacity to 0 works correctly for me, even when its containing a circle and text.  Closing this ticket for now - if this is still an issue for you, please create a jsfiddle to demonstrate the problem.  It might be related to the way you're building the stage.\n\nCheers\n. You're right, it shouldn't be running that slow.  Is each sector track an individual shape?\n. I'll go ahead and create a lab that's similar to what you're doing (mine will be a wheel of fortune demo) and I'll check out the performance there.  You're use case just doesn't really have anything that should be slowing the Kinetic engine down.  I'll get back to you later tonight.\n. Well got to the bottom of it.  Strangely, I never saw this happening, but KineticJS appears to have a major performance issue when animating nodes nested inside other transformed nodes, which is only surfaced when we're animating lots of groups.  And, I believe I know the root cause - I've been wanting to revisit how I construct transformation matrices for nested nodes, and it looks like now may be a good time to do this.  I'll have this addressed by v4.3.4.  Stay tuned!\n. p.s. as a work around for your use case, I would recommend not nesting shapes inside one another with groups, unless you can wait until the end of next month for this issue to be addressed.\n. Update: after more digging, I discovered that the culprit is actually Kinetic.Text.  Nested groups still render lighting fast, the problem is just text.  I believe the problem is related to the fact that I'm not caching text metrics - I'll keep digging.\n. After further digging, I've found that the root problem is really just the fillText method of the canvas context.  Basically, drawing text is just really slow with HTML5 canvas.  This isn't a KineticJS specific issue.  To improve performance (I'm talking about getting the FPS back up to 40fps+), you can cache the text node as an image.  Here's a tutorial on that:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-shape-caching-with-kineticjs/\n\nI'm currently working on a lab that does just this, so I'll let you know when it's published so that you can use it as a guide.\n. exactly.  Groups nested in groups nested in groups perform great.  drawing text with HTML5 canvas does not.  Hopefully, when I get this lab out, it'l be a bit more clear on what you need to do to dramatically boost the FPS.\n. Here you go sir, cached text nested inside of a group, which is nested inside of another group:\n\nhttp://www.html5canvastutorials.com/labs/html5-canvas-wheel-of-fortune/\n\nShould be somewhat similar to what you are doing\n. There's lots of ways to animate colors, I typically increment the rgb components of a color (0-255) and then set the fill to 'rgb(x,x,x)'\n. This is by design.  If you don't want the drag and dropped shape to go to the top layer, you can set dragOnTop = false\n\nhttp://kineticjs.com/docs/symbols/Kinetic.Node.php#setDragOnTop\n. why is draggable being toggled on and off on mousedown and up?\n. It sounds like the root problem is that right and middle click should not trigger and drag and drop.  I'll fix this up.\n. this ticket has not been closed which means that it hasn't been worked on yet :)\n. It's been added to the release schedule\n. would definitely be cool.  I have big plans to eventually open up a community gallery page where people can submit 3rd party plugins like this.  If you're interested, by all means, setup a github project page and build it out.  I could link to it from the homepage for now.\n\nCheers!\n. You're absolutely right, this is a bug.  I'll have this fixed up with the next release, v4.3.4.  Thanks for catching this!\n. Thanks for the assist Chris!  Yes, I'm planning on doing a release mid March\n. that sounds reasonable.  I committed some refactored code that fixed the dragend / mouseup ordering bug:\n\nhttps://github.com/ericdrowell/KineticJS/commit/966ebf2a326fb32911d38d79f3c3ac68ade5c347\n\nI'll also prevent the click event from firing once the drag and drop operation has started\n. on second thought, I think I'll keep it the way it is for now.  The definition of a click is when a user mouses down inside of an element, and then mouses up inside that same element.  There might be cases where someone intends to click on an element, and if they accidentally drag the element by 1px, we don't want to prevent the click event from firing.  I think it makes more sense for you to add logic on your end to prevent the click when the user is in drag and drop mode.  I'm open to keeping this discussion open though :)\n. Hiya!  Since this isn't a KineticJS specific issue, would you mind reposting this on Stackoverflow?  I'm currently using Stackoverflow for the discussion forum:\n\nhttp://stackoverflow.com/questions/tagged/kineticjs\n. very interesting, this does indeed look like a bug.  I'll address this one with the next release (v4.3.4)\n. as a work around, you can set the dragOnTop property to false.  There appears to be a problem with the layer cloning step with the dynamic drag and drop layer.  \n\nhttp://jsfiddle.net/HHfMG/\n. by default, the dragOnTop property is set to true, which means that when you drag and drop something, KineticJS dynamically builds a temporary drag and drop layer, moves the node to that layer, and then animates the drag and drop.  When finished, the dynamic layer is destroyed, and the node is moved back to its original container.  Super complex, but it provides a pretty big performance boost because only the node being dragged and dropped is redrawn for each frame, rather than its entire associated layer.\n. I double checked that this is no longer an issue.\n. Most likely a geographic issue.  KineticJS is using Godaddy hosting, and this isn't the first time that people have seen down time in different areas.\n. I've seen this before - it's actually a byproduct of the browser implementation of path fills in relation to context translations.  I'll add this to my todo list and investigate further.\n\nThanks!\n. Closing this one for now, please let me know if this is still an issue. GoDaddy typically gets these types of outages resolved fairly quickly.\n. Heya, I have plans to go through the codebase and add return this to the appropriate methods, but haven't had a chance yet.  Stay tuned!\n. I looked very carefully at your jsfiddles, and the positioning of everything looks correct.  Maybe you are mis understanding absolute position?  Here are the positioning rules:\n\n1) x and y are always relative to the parent container\n2) when you use setAbsolutePosition, this method calculates the relative x and y that you need in order to position the node absolutely.  If you update the position of a parent container, the child container position will move as well because its x and y position are still relative to its parent\n\nThoughts?\n. Oh and, not sure if you knew this, but you can also set the absolute position when an object is created like this:\n\nvar sqr3 = new Kinetic.Rect({\n            width: 50,\n            height: 50,\n            fill: '#FFFFFF',\n            stroke: '#00FF00',\n            strokeWidth: .4,\n            id: 'sqr3',\n            name: 'sqr3',\n            absolutePosition: [10, 120]\n        });\n\nThe sqr3 shape's position will change, however, the moment you change the position of one of its ancestors (this is by design).\n\nIf you truly wanted a shape to be fixed in a specific position, you shouldn't nest it inside of a group.  Just add it directly to a layer, and don't change the position of the layer.\n. hiya! Nope, it's on my todo list.  Kinetic.Text has been heavily refactored over the months, and support was temporarily dropped.  It will be added back in the v4.3.5 release\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n\nSorry for the confusion!\n. this never made it to the codebase, unfortunately.  It is still on my todo list.  Priorities keep pushing it down the list.  Stay tuned.\n. After more thought, I've decided not to support none 2d contexts.  It just doesn't make sense with KineticJS.  I created several variants of  KineticJS + Three.js, and I found that the easiest thing to do is to just overlay a KineticJS stage on top of a Three.js canvas, or vice versa.  There's just absolutely no benefit to having this built into KineticJS.  I'll put up a lab on html5canvastutorials.com that shows a clean way to combine KineticJS and Three.js.  Thanks!\n. Ah, this is a regression bug, which occurred when the remove() behavior changed to just removing a node from the node tree, rather than fully destroying it.  The reset() method should call a new method called destroyChildren().  I'll fix this up by the next release.\n. Also, I'll be sure to add better unit tests around the reset() method to make sure this doesn't happen again.  Thanks for catching this!\n. Hiya!  As of v4.3.4, I'll be removing the reset() method entirely, because it is essentially the same thing as stage.destroy() and new Kinetic.Stage().\n\nThanks!\n. thanks for looking into this!  I'll try and get this in asap\n. interesting, I'll have this fixed up soon\n. Following up with this thread - I don't believe that I should be validating all inputs.  Where would I draw the line?  Param validation will degrade performance, which doesn't seem to be worthwhile when most people are sending the correct data types.  I think it makes more sense for the developer to send the right data type into a method as described by the docs, at least for now.  i.e. you should use shape.move(parseInt(x), parseInt(y));\n\nP.S. I'm still open to adding validation to all methods, I would just need to have enough of the community wanting that feature, and I'd have to make sure the perf consequences arn't too bad.\n. the getDOM method was deprecated and replaced with getContent() in v4.3.1.  Here's the change log:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n. I don't believe that performance has gone down, but there is a bug related to drag and drop on mobile devices that causes a flicker.  Is this in reference to drag and drop?  If so, the work around is to set dragOnTop: false in the shape config.  This particular issue will be fixed with the next version, v4.3.4\n. yes, please reopen if this is still an issue.  the dragOnTop property was deprecated.  Drag and drop should perform quite well now because a lot of optimizations have been made since this ticket was filed.\n. this doesn't quite look right. e is an array that should look like this:\n\n[0, 'blue', 1, 'red']\n\nare you using the correct format for the colorStop property?  Here's an example\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/\n. no, you have a valid point.  I came up with the single array idea to try and make the config as easy as possible.  Perhaps, as you've suggested, a 2d array might make sense, or even some other notation.  Keep the ideas coming.\n. odd, your jsfiddle is actually working correctly for me in Chrome on Windows7.  What browser and OS are you seeing the problem?\n. might also be related to Ubuntu.  This would be a pretty serious issue, and I haven't had anyone else reporting a similar issue, so there might be something going with the Ubuntu Chrome combo\n. ah interesting!  Sorry about this - the interpolated control points are set when points is set, which is dependent on tension.  As you've noted, if tension isn't yet defined, the control points won't be set correctly.  The control points should be set if either points or tension is set, and the other property is available.  I'll have this fixed up soon.\n. I created a unit test for this case, and it appears to be fixed now.  I've done several refactorings of the points and tension attr handling, so it was probably fixed a long the way.  Try out v4.5.5 when you get a chance and let me know if it works for you.\n. Hiya!  First off, I'd recommend upgrading to the latest version, v4.3.3.  Quite a bit has changed since v3.10.0 - here's the change log:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n\nI'm closing this ticket in Github since it's not related to a bug with the library.  You may try reposting on Stackoverflow - the KJS community is pretty helpful there:\n\nhttp://stackoverflow.com/questions/tagged/kineticjs\n. do you mean an exception is thrown if you fire a custom event when nothing is listening for it?  If so that definitely sounds like a bug.  I'll add this to my todo list.  Thanks!\n. fixed!  This will be a part of the 4.4.0 release coming this weekend.  Thanks for reporting!\n. did you post the right link?  It's pointing to an example of toImage, which appears to be working correctly.\n. can you expand a bit more on what you're expecting, vs. what is happening?  I checked the jsfiddle in chrome on OSX, and I correctly see two images (the second image was produced with toImage).  Thanks\n. what exactly is your use case?  Are you destroying the node after dragend, or while drag and drop is occurring? \n. great!  Okay I'll have this fixed by the next release.\n\nCheers!\n. Fixed!  This will go out with th 4.4.2 release.  Thanks!\n. Hate to say this, but it is now createImageHitRegion()\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-pixel-detection-with-kineticjs/\n. great!\n. can you show me the code that you used to generate the text?  a jsfiddle would be best\n. the demo runs really smoothly for me in FF 19 on MacOS.  What OS are you using?\n\nAlso, why are you using such a large canvas?\n\nP.S., KineticJS will soon support clipping functions at container levels (such as layers and groups), and this can be used to optimize render performance.  So if for some reason a particular rendering is slow, this would be one way to alleviate it.\n. First off, have you guys:\n\n1) created multiple layers, and grouped things together inside layers that are redrawn frequently, or together?\n2) reduced the amount of text and shadows for intense animations? (this is a canvas rendering constraint, not a KineticJS one)\n3) tried out node caching?  caching greatly improves performance, because it essentially converts any piece of your drawing into an image.\n\nThe next release of KineticJS will now have clipping built into all containers so that you can define clipping paths around particular regions of interest on a layer to further tweak performance.\n\nIf you're seeing a problem exclusively with FF, there's a good chance it's just FF not performing well.  I'll keep on eye on this.\n. Thank you Jason!\n. Awesome thanks.  Yea, I've gotten into the habit of running mocha-phantomjs test/runner.html before committing to make sure everything passes\n. looking into this right now :)\n. This isn't a complete solution, because there's actually 3 different variants of toDataURL.  One for Stage, one for Layer, and one for Node, which covers Shape + Group.  The fix for this problem will have to be a bit more generic.  Still looking into it.\n. So a couple of things:\n\n#1 I'm not able to reproduce this problem, toDataURL() is working correctly for me with non 1 pixel ratio devices (like iOS)\n#2 you submitted this pull request about a month ago.  A lot has changed since then, and I've fixed up some pixel ratio issues as of version 4.3.3.  \n\nI'm closing this ticket for now because I believe this should already be fixed.  Try out the latest version and see if you still have problems.  If you do, reopen this ticket.\n\nThanks!\n. Unless of course, you are testing on Android.  I do recall seeing some people having pixel ratio issues on Android devices\n. Reopening this because I can't replicate the issue for older versions of KineticJS.  I'm assuming that you're using an Android device correct?\n. ahh okay.  Thanks!\n. hi again!  I did some more research, and there appears to be an inconsistency between chrome and Safari on devices with retina display (like the macbook pro with retina display).  I don't currently have a laptop with retina display, so would you mind checking both Chrome and Safari?  From what I've read, I'm guessing that the problem you're seeing will occur in only one of these browsers, while the other browser will work correctly.  Thanks!\n. okay I got to the bottom of this.  The problem occurs if you don't specify a width and height.  (as a work around, if you specify the width and height properties in the dataURL config, it works correctly.  Thanks!\n. Agreed.  I'll start tagging versions starting with the next release, v4.3.4.  Thanks!\n. One thing that has changed with the newer versions is that drag and dropped shapes are moved to a temporary layer for performance reasons.  I bet the problem is related to that change.  As a work around, you can use dragOnTop:false to keep the shape in the same layer.  This should fix your problem.\n. would you mind reposting this on stack overflow?  This is not a KineticJS bug, it's an implementation question.  Thanks!\n\nhttp://stackoverflow.com/questions/tagged/kineticjs\n. cool idea.  I'll add it to my todo list\n. This sounds very promising!!  Thanks for doing this.  I'll take a look as soon as I get a chance.\n. sweet!  Can't wait to pull this in and try it out.  \n. Works like a charm!  Beautiful work.  Thank you so much for fixing up the text wrapping problems (this was on my todo list but I just hadn't gotten around to fixing it up yet).\n. Thanks again for your work.  Attribution is in a few places here:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n. very interesting.  I agree, the dragstart event should use the event object generated from mousedown.  I'll add this to my todo list.\n. actually, after putting a bit more thought into it, I don't think we should pass the mousedown event object into drag start.  For now, I would recommend storing a reference to the event object, or the evt.button, for use with subsequent events such as dragstart and dragmove.  I'll still keep thinking on this though.\n\nThe reason is that, as you pointed out, dragstart is triggered by mousemove.  It would be odd for a user to mousedown, wait 2 seconds, and then start dragging (which triggers drag start),  and then pass a mousedown event object to dragstart.\n. this is just the effects of anti-aliasing.  You can  use a custom hit function to reduce the hit region.  Here's an example\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-custom-hit-function-tutorial/\n. Thanks for bringing this up!  It turns out that the uniformity isn't really an issue.  The idea of the getRandomColor() key is to return a (probably) unique rgb value as fast as possible.  After some investigation, I discovered that Math.round() and Math.floor() are actually quite slow.  Using a bitwise or operation is much faster.  More on that:\n\nhttp://jsperf.com/math-floor-vs-math-round-vs-parseint/2\n\njust committed the change.  \n\nThanks!\n. +! nitriques.  There are lots of ways to load and preload images, and I didn't want to bloat KineticJS with logic not related to canvas.  For simple cases, use image.onload = function() to instantiate your image.  Here's an example\n\n http://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/\n. this is incorrect.  the arguments variable is a reference to the arguments array.  The arguments are referenced this way because the number of arguments is not known ahead of time.  Here's some reading:\n\nhttps://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments\n. yep, this wasn't over looked, it just hasn't been implemented yet.  It will get in there soon.\n. @lavtron Tweens no longer support complex objects.  You have to define each component.  Here's a working example:\n\nhttp://jsfiddle.net/5jbyw/\n\nso you need to do:\n\nvar tween = new Kinetic.Tween({\n node : node,\n duration : 1,\n offsetX: 2,\n offsetY: 2\n});\ntween.play();\n. I used to support complex objects, but the Tween class started to get really huge, and really complex, and really coupled to KineticJS attribute types (x, y, width, height, r, g, b, points, etc).  To keep the Tween class light weight, I decided that for complex objects, you have to pass in each component individually.  This keeps the Tween class much more decoupled\n. agreed.  \n. Ah, the problem is that the id attr is being copied over to the temporary drag and drop layer (since you have draggable:true), which results in an override of the layer id in the id hash.  As a work around, use draggable:false, or dragOnTop:false\n\nhttp://jsfiddle.net/RNCXz/4/\n\nI'll add this to my todo list, thanks!!\n. This would break many, many things in KineticJS if I allowed developers to pass in their own canvas elements (I looked into this to investigate the possibility of passing in Three.js contexts into a KineticJS layer).  At the end of the day, it's much cleaner, and simpler, if you just overlay a KineticJS stage on top of your own canvas element, if you're doing something special (or vice versa)\n. Side note, KineticJS is a bit more complex than EaselJS, because it automatically handles the canvas elements for you - one scene canvas and one hit canvas per layer.\n. I don't believe that there are any 2d canvas libraries which are also compatible with excanvas.  If you're requirement is to use a graphics library which works in all browsers, you might consider going with Raphael.js, which has an SVG and VML renderer, but is much slower and less feature rich than a canvas library.\n. what is the use case here?  You need the time to be set back to zero?\n. sounds like you should be using Tweens.  Here's what you're looking for:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-stop-and-resume-transitions-with-kineticjs/\n. That is correct.  Currently, stage.toDataURL requires a callback.  I will be changing that soon though (trying to make everything synchronous)\n. you can also access past versions here:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Version-Archive\n. and sorry for the confusion.  I intended for most developers to use kineticjs.com as a portal to downloads, docs, and tutorials.  I use github for advanced stuff.\n. Thank you!\n. You're absolutely right, some things could be done to be more minification friendly.  I'll get to this as soon as I can, although it's a bit lower in priority than other items.\n. Heya.  In the future, please post implementation questions like this on stack overflow.  Also, your problem is JavaScript closures :)\n. you're not supposed to initialize containers.  it's an abstract class.  You can initialize Stages, Layers, and Groups, which extend Container\n. Ubuntu or Linux?\n. This was a problem with Google Chrome.  the latest update broke versions of KineticJS for 4.3.1 and below.  The best way to fix the issue is to upgrade to a recent version of KineticJS.  Sorry for the headache :(\n. @nitriques yes, I push KineticJS versions to the Amazon Cloud Front CDN\n. +1 chrisritter, nice!  That totally makes sense.\n. @3tcubed truly sorry for that.  now that the event target can be any node type, the name of the property needed to change.  KineticJS currently supports no backwards compatibility since it's still evolving.  I can say, at least, that these types of API changes will become less and less frequent.\n. Understand.  Perhaps I can at least start a new section in the change log\ntitled \"API changes\" to make upgrading easier.\n\nCheers,\n\nEric\n\nOn Thu, Apr 4, 2013 at 10:42 AM, 3tcubed notifications@github.com wrote:\n\n> No problems, understand forward progress.\n> Just identifying necessary changes, versus stumbling upon features not\n> working after upgrading, would have been better for deprecated shape (or\n> any obsolete feature) to throw an error versus just being undefined (if at\n> all possible).\n> \n> Again keep up the outstanding work.\n> \n> On Thu, Apr 4, 2013 at 10:33 AM, Eric Rowell notifications@github.comwrote:\n> \n> > @3tcubed https://github.com/3tcubed truly sorry for that. now that\n> > the\n> > event target can be any node type, the name of the property needed to\n> > change. KineticJS currently supports no backwards compatibility since\n> > it's\n> > still evolving. I can say, at least, that these types of API changes\n> > will\n> > become less and less frequent.\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub<\n> > https://github.com/ericdrowell/KineticJS/issues/334#issuecomment-15911799>\n> > \n> > .\n> \n> ## \n> \n> ---\n> \n> Tim Regan\n> Tcubed - Owner\n> Phone: (602) 992-2570\n> \n> \u2014\n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/334#issuecomment-15912350\n> .\n. ah, I knew exactly where to look the moment I read the title of this issue.  replace line 482 in Stage.js with this:\n\nif(this.isDraggable() && !dd.node) {\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Stage.js#L482\n\nand that should fix the issue.  I'll put this fix in with the next release\n. This has been fixed and will be a part of the 4.4.1 release this weekend.  Thanks!\n. Thanks louis!  I missed this as well.  Yes, it appears that the last word auto wraps regardless if it fits or not.\n. this is currently fixed.  The patch will be released as v4.4.1 this weekend:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n. you're using the method incorrectly.  When in doubt check the docs:\n\nhttp://kineticjs.com/docs/symbols/Kinetic.Node.php#remove\n\nyou can also use destroy() if you want to comletely destroy the node\n\nhttp://kineticjs.com/docs/symbols/Kinetic.Node.php#destroy\n\nWhat you want to do is just yellowGroup.remove()\n. Here's the official tutorial on labels (which can be used for tooltips):\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-label-tutorial/\n. this was done intentionally.  I believe that the current w3c spec for CSS index handling is critically flawed.  As an experienced web developer, I can't tell you how many times I've seen other developers break applications because of z-index issues (z-index conflicts, and developers trying to create the highest z-index, so you see z-indices of like 9999 and 99999).  I think KineticJS's spec is much cleaner.\n. Also note, that if you want to get the absolute z Index (like the CSS spec), you can use getAbsoluteZIndex()\n. Hey @ruionwriting !  I specifically did not want KineticJS index to work like CSS z index, because quite frankly, I feel that the w3c spec for z indices is just weird.\n\nYour approach is the right one - just use shape.moveToTop() to move a node to the top of its siblings.  Or, if you have a separate layer dedicated for drag and drop stuff, you can do shape.moveTo(layer).\n\nThis example of drag and drop does something similar:\n\nhttp://www.html5canvastutorials.com/labs/html5-canvas-kineticjs-drag-and-drop-stress-test-with-1000-shapes/\n. Thanks for this!  One other question - would you mind looking into padding as well?  It looks like horizontal padding isn't taking affect with text wrapping\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-text-tutorial/\n\nIf not just let me know, and I can take a look :)\n\nThanks!\n. Hiya!  After taking a second look at your pull request, it looks like you're now correctly taking padding into account.  Great!  I'll do some more testing before I release a patch this weekend.\n\nP.S. don't fret this - the 4.4.0 release was a big one which introduced a few regressions anyways.  We'll have everything up to snuff soon :)\n. This is working correctly for me in Both Chrome and Firefox:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-shape-layering-with-kineticjs/\n\nCan you be more specific when you say \"moveToTop doesn't work\".  Very hard to debug that :)\n\nAlso, to be clear, moveToTop moves a node to the top of its siblings inside a common parent, not to the top of all nodes in the stage.  i.e. if you have two layers, and some shapes in the bottom layers, calling moveToTop() on one of those shapes will place the shape at the top of the siblings in the bottom layer.  The shapes in the top layer will still be  above the shape that was just moved to the top.\n. No problem!  Great.  This ticket scared me because that would have been a major bug ;)\n. Chrome seems to have introduced some bugs with older versions of KineticJS.  These problems are not present with the latest release, v4.4.0\n. Unfortunately there's nothing I can do about this - The update broke older versions of KineticJS (v4.4.1 and below).  You'll have to upgrade to a newer version.  Sorry for the headache!!\n. +1.  I definitely recommend to try and keep your KineticJS version as up to date as possible.  Browsers (especially chrome) tend to break things quite often.  When this happens, KineticJS typically has a hot fix release to overcome whatever was broken.\n. Hiya!  The drag layer was removed with v4.4.0 because it was causing too many problems.  Here's the change log:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n\nalso, the afterDraw() method has been removed, in favor of .on('draw').  \n\nSince the drag layer logic has been removed, I believe you can remove all of the code mentioned in your ticket.  The shape will stay in its layer as you drag and drop, so there's no reason to keep it in sync.  if you want to update another layer as you drag, you could do this:\n\nlayer.on('draw', function() {\n  layer2.draw();\n}\n. ah must have missed this - I'll have this fixed in the next release which is going out in about a week (v4.4.1).  Sorry for the headache!\n. Is this specific to v4.4.0?  Does this work in earlier versions?\n. interesting - does KineticJS fail in some situations?  I'll look into this soon.  Thanks!\n. could you possibly create a simple jsfiddle demonstrating the problem?  That would be very helpful :)\n. I don't believe I have any unit tests that cover stage.destroy().  I'll look into this soon\n. I'll be looking into this soon.  My guess (without looking at the code) is that the hit graph is not being redrawn correctly, since a LOT of refactoring was done in regards to scene and hit graph rendering.  This will be fixed by the weekend.  stay tuned.\n. no prob!\n. this is the expected behavior.  Although, it doesn't look like this is spelled out explicitly in the documentation.  I'll update that asap.  When stage draggable is true, the stage is in panning mode.  Here's a tutorial on that:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-the-stage-with-kineticjs/\n\nThanks\n. help with debugging and implementation issues need to be on stack overflow.  Github tickets are for cases when you can demonstrate that there's a problem with KineticJS itself\n. guys, just listen for events on the container DOM element with addEventListener(), jQuery, YUI, etc.  At that point, you need DOM events, not KineticJS shape events\n. added this to the release schedule, thanks!\n. Hiya, yes, this should be fixed up by v4.5.2.  Here's the todo list for that release:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule#452-mid-june-2013\n. priorities.  Be sure to check the release schedule to get an idea of when bug fixes / features will be released:\n\nCurrently this issue is scheduled to be released in the middle of July, assuming that no other urgent issues pop up, and push it into August:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule#455-mid-july-2013\n. Thanks again for starting this thread!  Finally got around to fixing this one.\n. Thanks so much for looking at this!  It turns out that the way default attrs is handled was rewritten, and the index default was lost.  The problem is that we shouldn't be accessing the index property directly, we need to use the getter method so that the default is returned, i.e. getIndex()\n. thanks!  The getters and setters are dynamically generated at here:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/shapes/Sprite.js#L113\n. I believe you're misunderstanding what stage.on() does.  stage.on('mouseup') does not fire a mouseup event anytime you mouseup inside the stage.  It fires a mouseup event when you mouseup inside of a shape (all events are relative to shapes).  It sounds like what you want, is to listen for mouseup on the container DOM element instead\n. Here's a (more concise) demo that shows that a rect background is working.  There's too much going on in your code for me to take a close look.\n\nhttp://jsfiddle.net/mCGQC/\n. Thanks for looking into this!  It turns out that what you proposed was very close to what I was looking for, but there were a few additional things that I needed.  Thank you!!!\n. shoot!  Yes, arrays are modified by reference in JavaScript.  I hadn't taken that into account with handling the default.  I'll take a look at this soon.\n. Hiya!  Thanks for looking into this.  I still believe that if the developer wants to hook into general events for the stage, they should do so at the DOM level by adding events to the container, or the content DOM element.\n. I'll keep in mind.\n\nFor your second use case, if you want to detect events on spaces where there's not a node, you can add an event listener to the container DOM element, and also do this:\n\nstage.on('mouseup', function(evt) {\n  evt.cancelBubble = true;\n});\n\nThis will prevent the event object from bubbling up to the container DOM element, and therefore will not fire the event handler bound to the container\n. you can use stage.getPointerPosition() at anytime to get the pointer position.\n. This looks really cool!  Can you explain a bit more on what exactly it does and how it works?\n. Awesome!  Do you think it would make sense to change the filter name to Mask?\n. hiya.  I would need to see some code :)  Perhaps you could post something in jsfiddle or stackoverflow\n. Hi all, please upgrade to the latest version of KineticJS.  This issue was fixed with v4.4.2. The problem was occurring with a .bind() method that was added with a pull request. iOS 5.1 and below does not support bind().  Change log:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n. hiya!  Are you using the latest version of KineticJS?  A recent release of Chrome broke older versions of Kinetic\n. Great!  Thanks for verifying \n. Thanks everyone for helping eachother!  KineticJS is truly a community project :)\n. Isn't it already a module?\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Global.js#L157\n. Thanks @lavrton !\n. Hiya, \n\n#1 you're custom shape doesn't have context.beginPath().  this fixes the drag and drop issue:\n\nhttp://jsfiddle.net/D9tzR/\n\n#2 this is a pretty small issue, since people shouldn't be setting the radius to 0.  I'll take a look none the less :)  Thanks!\n. Glad to hear!  I've spent a lot of time on it :)\n. Heya!  This was fixed last night actually.  the v4.4.1 patch will be going out this weekend.  stay tuned!\n. Interesting, I'll have to put some thought into this.  As a temporary work around, have you tried replacing the ids with names instead?  If you keep the names unique, it should still function as a unique identifier\n. Currently no, although it's on my todo list :)\n. On second thought, I'll add these to the next release, v4.4.2.  Thanks!\n. The problem is that clone should not also clone ids, since they are unique identifiers.  This change is scheduled to get in pretty soon.  \n\nIf this is urgent, you can modify the KineticJS source code here:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Node.js#L954\n\nand we'll need to create a new attrs object that doesn't contain the id key.  That new object should be used to instantiate the cloned object.\n\nStay tuned.\n. These methods were deprecated.  Please use the beforeDraw and draw events instead.  i.e.\n\n```\nlayer.on('beforeDraw', function(){...});\nlayer.on('draw', function() {...});\n```\n. Thanks!\n. Heya, I ended up removing the before funcs completely, which means that we don't need to add the this.afterDrawFunc on line 54.  Closing this one.  Thanks!\n. can you create a jsfiddle showing the problem?  The tutorials on html5canvastutorials are working great.\n. this is really strange.  in my local copy, it is capitalized, in the repo, it's lower cased, but Git doesn't detect the difference.  Looking into this.\n. heya!\n\nin response to \"There is also the potential problem of having an anti-aliased (and thus unpredictable) pixel color value mapping to an entirely different shape color key just by chance alone.\" - This is actually untrue.   Anti-aliased pixels are not different colors, they simply have opacities that are less than 1.  Anti-aliased pixels will never trigger other shapes\n\nOne way to solve your particular problem is to create custom hit regions.  You actually have full control of the hit region paths.  For example, you could increase the hit region by a pixel around your shape.  Here's an example:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-custom-hit-function-tutorial/\n\nI will however, spend some time investigating this further to see if there's a high performance solution to the problem.  I'd like to note though, that my impression is that this isn't a problem for 99.9% of KJS users, which has made it slightly lower priority than other things.  I'll keep the ticket opened.  Stay tuned!\n. @tomg7 I don't think your test results are proving what you believe to be happening - are you picking out the pixel color from the scene graph or the hit graph canvas?  KineticJS uses a hidden hit graph which is rendered with completely different rules than the scene graph, as defined in the Canvas.js renderer class (for example, full opacity is always used)\n. @tomg7 also, each browser produces slightly different results for all canvas renderings.  pixels will be slightly different from browser to browser.\n. That's a great suggestion fogbrain.  would you mind trying it out and submitting a pull request?  Otherwise I can add this to my todo list to further investigate\n. Hi Jason, not sure where you're going with this - KineticJS doesn't use the bind method anywhere in the codebase.  Could you expand a bit?\n\n@vc05946 can you be more specific as to what the problem is?  JS error? \n. wow okay.  I think that probably snuck in with a pull request.  I'll take a closer look at this.\n. can you guys do me a favor - I don't currently have access to an iOS 5.1 device - could you apply the change made with the fix above to your version of KineticJS, and let me know if it resolves the issue?  Thanks!\n. scratch that, I came up with a cleaner solution that completely removes the bind() dependency all together.  It didn't need to be there in the first place.  This will be included with the v4.4.2 release.\n. I don't believe this is an issue - the Label plugin is actually a group that contains Text and a special Custom Rect shape.  the Text shape itself will not have the idea - the group will.  You need to do this:\n\nvar id = evt.targetNode.getParent().getId();\n. great!\n. I'll look at this as soon as I can.  Will be adding webgl support this weekend.\n. Hi guys.  After a lot of careful thought and prototyping, I've unfortunately decided not to support non 2d contexts.  It's actually pretty easy to combine KineticJS with other contexts anyways, such as Three.js.  More on that here\n\nhttps://github.com/ericdrowell/KineticJS/pull/282#issuecomment-16328614\n. you're absolutely right.  the remove() method in Shape is supposed to be destroy.  fixing that right now.\n. yep, it will be removed.  Shape extends Node, so Shape has access to all of Node's methods.\n. could you possibly setup a jsfiddle demonstrating the problem?  That would really help me fix this faster.\n. drats, I'll fix this up today and release a 4.4.3 patch.  Looks like my regression tests missed this one.  As a temp work around, you just need to add the utility back to Type.js:\n\nhttps://github.com/ericdrowell/KineticJS/blob/v4.4.1/src/util/Type.js#L286\n\nThanks!\n. hiya, have you looked at this lab?\n\nhttp://www.html5canvastutorials.com/labs/html5-canvas-world-map-svg-path-with-kineticjs/\n\nDo you have a special highlight layer setup, so that you don't have to redraw the whole map each time?\n. P.S awesome demo.  Can I link to it from the kineticjs homepage?\n. it's not an event detection issue - it's probably a redraw issue.  are you drawing the regions on mousemove or mouseover?\n. Great!  No worries, I have yet to put up some KineitcJS performance tips on the HCT tutorials.  \n. do you have a div id = \"Frame\" ?\n. are you sure that the backbone view executes after the DOM has loaded (i.e. on dom ready).\n\nbefore initializing the stage, you can do a test:\n\nconsole.log(document.getElementById('Frame'));\n\nto see if the Frame div is available or not.\n. the .bind method has been removed because older browsers don't support it.  It snuck in with a pull request about a week ago.  Update to the latest version of KineticJS and that error should go away.\n. I don't believe this is a bug.  isDraggable returns the draggable property, which is set to true or false.  when you use startDrag, you are forcing drag and drop regardless if the shape is draggable or not.  Forcing it to drag and drop should not auto set draggable to true\n. yep, this is absolutely a bug.  Thanks for pointing it out!  I'll have it fixed with the next release\n. you shouldn't have to do anything special to remove an image from memory.  KineticJS should remove all of the references to the image object, which means that the JavaScrip engine should auto garbage collect, unless of course your app still has a lingering reference to the image object\n. This issue has been fixed as of v4.5.4.  It will be released this weekend.  Thanks!!\n. here's the readme for unit testing:\n\nhttps://github.com/ericdrowell/KineticJS#testing\n\nlet me know if that doesn't clear things up\n. np!\n. I think you're misunderstanding remove vs. destroy.\n\nremove() removes a node from the stage, but keeps it intact, in case you want to re add it later, or even add it to another stage.\n\ndestroy() calls remove() to detach it from the stage, and then actually destroys the node so that it's no longer accessible\n. what you need is destroyAll, which will be added to the next release\n. you're looking at the minified code.  Here's the method in the source:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Global.js#L121\n\ncan you be more specific as to what doesn't look correct?\n. #1 you're still focusing on the minified code (you shouldn't, you should be looking at the sourcE).  #2 the minified code reads like this:\n\nif(c!==undefined){for(var d=0;d<c.length;d++)\n\nwhich is valid\n. as a side note, you can also hide the shadow with the shadowEnabled = false property so that you can preserve your shadow configs when toggling it on or off.\n\nhttp://kineticjs.com/docs/symbols/Kinetic.Shape.php\n. Nonetheless, I'll take a look.  Opacity = 0 should work.\n. fixed: https://github.com/ericdrowell/KineticJS/commit/85c99c1bb9c482fcca2008cf47f8dff644fa9ed7\n. Everything seems to be running great in FF and IE for me.  Can you please post your working code into a jsfiddle so I can take a look there?  I also need to know exactly at what point things are breaking.  It's likely an implementation issue since no one else has reported problems like this.\n. KineticJS doesn't support text gradients at the moment, although it will soon.  Stay tuned.\n. common technique for proper scoping in JavaScript.  Look online for information about anonymous functions.\n. will look at this as soon as I get the chance, thanks for posting :)\n. I've promoted this ticket in priority.  I'll try to get this fixed for v4.6.1\n. @edplus you are correct, I demonstrated the hit canvas issue by forking the jsfiddle here:\n\nhttp://jsfiddle.net/37pG3/\n. another update on this thread: I'm actually in the process of putting together the 4.7.0 release.  This bug is still present.  It will be fixed along with some other hit graph enhancements in v4.7.1.\n. drats, you're right, the augmented methods will be lost after serialization.  I'll have this fixed by the next release.   Thank you!\n. Image properties are serializable, but not the images themselves.  It's mentioned in the tutorials and the docs:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-load-complex-stage-with-kineticjs/\n\nImages aren't serializable because you'd essentially have to store giant data URLs in the json, which is just silly.\n. you can do that.  just set a custom attribute like this:\n\nvar image = new Kinetic.Image({\n  image: ...,\n  src: 'image-src.png'\n});\n\nor you can set it like this:\n\nimage.setAttr('src', 'image-src.png');\n\nwhen you call toJSON(), your custom src attr will be picked up.\n. strange.  Is this for v4.4.3?  \n. Thanks!  I'll have this fixed up by the next release.\n. Thanks @lavrton.  @SneakyBobito please reopen this ticket if it's still as issue.\n. You cannot add layers inside layers.  You should be adding groups to the layers.  Here's an overview:\n\nhttps://github.com/ericdrowell/KineticJS/wiki\n. I can see how it would work, since both Layer and Group extend Container.\n\nI was thinking the same thing.  I'll add some logic that prevents layers from being added to layers.\n. that's expected.  You should always call layer.draw().  if you call group.draw() or shape.draw(), the layer will not be cleared, and you will just be drawing on top of the layer.\n. Thanks for doing this!  I'll be adding the skew transform in the next release.  I'm planning on adding these methods:\n\nsetSkew()\nsetSkewX()\nsetSkewY()\ngetSkew()\ngetSkewX()\ngetSkewY()\n\nrather than working with angles.  These methods can be auto generated with the new addPointGetterSetter methods.\n\nAs a side note, this means that I'll have to change the skew() method in the Transform class, such that it accepts an x and y component, rather than an x and y angle.\n\nReally clean code btw :)\n. This will be supported eventually, stay tuned!\n. Thank you!!\n. It's working for me.  Can you post a jsfiddle of some sample code?\n. +1 yes this is working for me.  Here's a simpler use case:\n\nhttp://jsfiddle.net/R94ZP/1/\n. You're absolutely right, it does fail.  The work around for now is that you can immediately set visible=false after instantiating\n\nlayer.setVisible(false);\n\nI'll have this fixed by v4.4.4\n. This issue is on the road map for v4.5.2:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n. Hiya!  This is already fixed in the github repo.  It will be released with v4.5.0.  The problem was that the dynamic point getters were being defaulted to an object literal containing an x and y property, and all of the nodes that were defaulted with the object literal were sharing that same object (objects are modified by reference in JavaScript).  Thanks for hanging in there!\n\nEric\n. Not enough info here.  please repost this with more context (more code) on stackoverflow.  Thanks!\n. This is not a bug. You need to call layer.draw() to redraw the layer\n. Thanks for this!\n\n#1 will be fixed with the next release\n\n#2 will be solved immediately if I incorporate Green Sock transitions into KineticJS (may be coming very soon)\n. Yes, priorities shifted every so slightly.  It turns out that I'm going to release 4.5.1 with a new Tweening class, because I'm no longer going to recommend developers to use GreenSock by default.  #2 will be addressed with the new Tweening class as well (working on this right now)\n\n#1 will make it into 4.5.2, which will be released sometime next month :)\n. KineticJS tweens now support tweening point arrays (v4.5.4).  This includes tweening Lines, Splines, Blobs, and Polygons.\n. here's an example: http://www.html5canvastutorials.com/labs/html5-canvas-animated-clown-face/\n. you're forgetting layer.draw().  Here's an example:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/\n. can you submit this as a pull request?  Just create an RGBA filter in the Filters folder.  You can use the other filters as a template.  Thanks!\n. Hiya!  Performance depends on so many factors, I can't really provide you with any specific, especially without seeing your code (but, it sounds like it's a complex app, which means that I wouldn't have the time to look through it).  Would you mind reposting this on stack overflow, along with some code snippets?  If I don't get time to help you there, the stackoverflow community is usually pretty good about responding quickly.  Post a link to it from this ticket :)\n. Hiya!  This should be resolved in the latest source, which will be a part of the 4.5.0 release later this month.  The extend method no loner accepts object literals or arrays (which can be modified by reference).  If you need an immediate fix, you could pull in the source code from git, and build the library at its current state.\n\nSorry for the headache!\n. I'll add this to my todo list, although it's a bit lower in priority than most of the other items on the list.  Thanks!!\n. on second though, this is a pretty easy change.  I'll try and have this fixed by the next release, or the following release.  I just need to check if the node has a parent when adding it to a container.  If it does, automatically run remove() :)\n. if you build from source, that's considered bleeding edge, because there could potentially be big bugs that haven't been addressed yet.  any of the published versions are stable releases.  Are you having any issues with v4.5.4?  If so, please reopen this ticket :)\n. Two things that kill performance on mobile is Text + Shadows.  Have you tried removing shadows for the mobile experience?\n. P.S. cool demo, I'll be linking to it from the homepage soon :)\n. are you redrawing the layer afterwards?\n\nshape.destroy();\nlayer.draw();\n. I believe this was fixed with v4.5.4, because I fixed some issues with .remove() and .destroy() in which children were not correctly being destroyed.  Can you try with this version and see if you still have an issue?  If you do, please reopen this ticket :)\n. This is an issue with anti-aliasing.  It'l be addressed with the next release\n. This is all fixed up.  Thanks!!\n. Hiya!  I'm about to release v4.5.0.  This issue will be addressed in 4.5.1.  Stay tuned!\n. sorry, this hasn't been addressed yet.  I just need to add a check to make sure that nodes aren't added multiple times.  Should go in for the next release.  Until then, just make sure that you don't add something multiple times ;)\n. this logic has not been added in yet.  As a work around, can't you just make sure that you don't add a node twice to the stage?  Shouldn't be that hard.  if node.getParent() !== undefined, don't add it to the stage again.  That's pretty much the logic that will be added in.\n. hiya!  Are you seeing any JavaScript errors?  I'm not familiar with Qt\n. Ah okay, this means that Qt is using an older version of webkit which doesnt support requestAnimationFrame.  I have a ticket open right now to fix this for older versions of Safari, which would also resolve your problem.  The fix will be included with v4.5.1, which will be released next month.\n\nIf you need the fix faster, delete the RAF code block:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Animation.js#L200\n\nand set the raf variable here to FRAF.  get rid of the ternary\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Animation.js#L214\n. scratch that.  the problem is this line:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Animation.js#L206\n\nwhich should be returning FRAF, not Animation.fixedRequestAnimFrame, which doesn't exist\n. Fixed:\n\nhttps://github.com/ericdrowell/KineticJS/commit/ddee366f96f7374cbf7517f90ded1fa2cd43f080\n\nYou can either clone this github repo and do a build a yourself, or just modify the kinetic js file with this change.  Let me know if this doesn't resolve your problem\n. :)\n. Don't have the time to look through your code, but I can tell you that I've seen several really complex apps run smoothly on mobile devices with KineticJS.  Your app crashed my iPhone as well, and  I've never had it crash before :)\n\nCould you repost this on stackoverflow so that the community can chip in?\n\nis it possible to use a smaller canvas size?  I know that even if you use say a 200 \\* 400px sized stage on iOS, the viewport can still resize such that the stage is full screen.  Are you using caching?\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-shape-caching-with-kineticjs/\n\nClosing this ticket in favor of you creating a stackoverflow thread.\n. ah, you should never have been setting attrs directly to the attrs object.  It prevents a lot of things from happening, that need to happen, under the covers.  I'm surprised that your app was working before!\n\nIn short, you just need to go through and use setter methods.\n. for example, when setting x and y, some optimizations are made to improve draw performance by handling matrix caching.  This can only happen if you use the setX() method.\n. wow this sounds pretty serious.\n\naccording to my perf tests, GS actually ran a bit faster than my original implementation of Transition.  Is it possible that your patch introduced a perf hit?\n\nOne cool thing about using a 3rd party transition library is that it only updates properties, it doesn't handle the redraws.  KineticJS still fully controls the animation engine, and the redraw logic.  I'll take a look at this.\n\nAnd in terms of the license.  How can I say this.  Holy crap.  I was under the impression that GS did not require a license for use under any condition.  From this alone, I'll have to to pull it back out (won't be too much trouble).\n\nThanks for pointing this out!  Looks like I'll be releasing v4.5.1 soon.\n. I'm working on a new Tween class that's similar to my old Transition class.  It will be like a Lite version of TweenLite, optimized specifically for KineticJS.  It's nearly complete.  The API will be consistent with Kinetic.Animation and Kinetic filters.  The api will look like this:\n\nvar tween = new Kinetic.Tween({\n  node: rect,\n  x: 300,\n  ease: Kinetic.Eases.EaseInOut,\n  duration: 1\n});\n\ntween.play();\ntween.pause();\ntween.reverse();\ntween.reset();\ntween.finish();\ntween.kill();\ntween.goto(time);\n\nsimilar to Kinetic filters, the ease property will point directly to a function, not a key that maps to a function.  This will make it easier for developers to create their own easings, or even pull in easings from other libraries.\n\nThis will come packaged with KineticJS v4.5.1 (or it can be removed using the custom build).  It will not provide methods for tweening along curves, or controling tweening order via Timelines.  For these types of advanced use cases, I'll point people to GS. As Jack points out, most people won't need to purchase a license.  But I absolutely don't want people to create an app with KineticJS + GS, and then later find out that they need to buy a license for the GS portion, especially if they are just doing some basic tweens.\n\nSince this is a rewrite, I'm expecting the performance to be screaming.  stay tuned.\n. Thanks for hangin in there!  4.5.1 will be released this weekend.\n. Done.  Here's the commit:\n\nhttps://github.com/ericdrowell/KineticJS/commit/622041aeafb9b5bfe4108b89e9f6c156c4f55ec8\n\nand here's an example usage:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/tests/js/manualTests.js#L173\n\nI also added the ability to yoyo with a yoyo property.  I didn't have a need for a kill() method.  Anytime the tween pauses, the corresponding KineticJS animation auto stops.  If you remove a reference to the tween instance, the JS garbage collector will auto remove it from memory.\n\nOne last tweak that I need to add, is tween overrides.  When two tweens are tweening the same property of the same node, the last tween needs to take precedence.  I'll have a follow up commit with this tomorrow.\n. The new Tween class is a full rewrite.  The old Transition class was a port that someone from the community submitted.  There were a lot of things that I didn't like about it, such as the \"onFinished\" event name.  This has changed to \"onFinish\" to be consistent with other event types, such as onClick, onMouseover, etc.  I took out the \"ed\" :)\n. hey guys, it does turn out that a bug was introduced when refactoring the Animation class - the setTimeout fallback was lost.  It's been fixed and will be a part of 4.5.1:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule#451-apr-11-2013\n\n@mihhail-lapushkin can you verify if a JS error was being thrown? \n. Thanks!  I changed the onFinished key to onFinish\n\nthe 4.5 animation issue will affect all browers using an older version of webkit.  I believe CocoonJS uses webit, correct?\n. right, it uses accelerated canvas.  Okay.  I didn't think that KineticJS every worked wth accelerated canvas.  It's already on my todo list.\n. It is done.  v4.5.1 is live.  Here's a tutorial that shows off the new API:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-stop-and-resume-transitions-with-kineticjs/\n\nSorry for the confusion!\n\nP.S., I still fully believe that GreenSock is the best Tween library on the planet.  for more advanced use cases, drop the Tween class and go with GS.\n. transitions didn't \"stop working\" in 4.5.0, they were removed in favor of GS transitions.  Here's the changelog:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n\nfortunately, I've decided to drop this as well, and put back in a new Tween class that will perform better than Transition.  This will be added back into 4.5.1.  Sorry for the confusion!  stay tuned.\n. No problemo!  Wait until 4.5.1 is released.  It'l be released tonight.  \n\nThe old transition class was pretty limited.  The new Tween class is looking pretty slick so far :)\n. It is done.  v4.5.1 is live.  Here's a tutorial that shows off the new API:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-stop-and-resume-transitions-with-kineticjs/\n\nSorry for the confusion!\n\nP.S., I still fully believe that GreenSock is the best Tween library on the planet.  for more advanced use cases, drop the Tween class and go with GS.\n. the problem with back pat is that it bloats the code base over time.  KineticJS is still evolving pretty rapdily, so I'm not quite ready to start adding back compat in newer versions (getting close to that point though)\n. Thanks :)\n. I'll fix this up tonight.  stay tuned.\n. interesting.  I'll take a close look at this and see what's slowing down setX().  Stay tuned!\n. Hi again, could you try something for me?  comment out these two lines of code from the unminified source:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Node.js#L946\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Node.js#L948\n\nThis prevents the handling of attr change logic.  If this is the culprit, I need to consider handling attr change events differently.\n. I'll do some perf tests when I get a chance.  I'll let you know what I find.\n. This says it all:\n\nhttp://jsperf.com/kineticjs-setter-perf\n\nI knew that the attr change logic would add a little bit  of overhead, but not a 25% overhead.  I'll fix this up by requiring devs to explicitly subscribe to different attr change events via subscribe().  If an event has not been subscribed to, KineticJS won't bother traversing ancestors to see if an event handler exists.\n. and here's v4.5.2-beta (much faster)\n\nhttp://jsperf.com/kineticjs-4-5-1-vs-4-5-2-beta-render\n. yep.  I turned off event bubbling for attr changes.  It's kind of a weird thing to bubble anyways.\n. Interesting.  Okay thanks for this!\n\nP.S. I'm currently investing a whole slew of potential performance enhancements, because although KineticJS is blazingly fast on desktop apps, I want it to be as fast as possible on mobile.  Stay tuned :)\n. yes you need to use images.  the jaggedness of fill patterns is controlled by the browser rendering engine.  Not much we can do there.\n. just do this:\n\nshape.on('click', function(evt) {\n  var target = evt.targetNode;\n  var nodeType = target.nodeType;\n  var shapeType = target.shapeType;\n}\n. ah, yes, I'll fix this up soon.  Thanks!\n. fixed as of v4.5.2.  Thanks!\n. interesting.  This is a valid use case.  I'll add this to the release schedule for v4.5.3.  Thank you!\n. The Tween class was re written in v4.5.4.  Kinetic Tweens are no longer made up of an array of tweens.  Now, a single value is tweened between 0 and 1, and the change is applied to all of the properties.  This should resolve the problem you're seeing with v4.5.3.  Let me know if it does not.\n\nThanks!!\n. that sounds reasonable.  I'll add this to my todo list, thank you!\n. unfortunately, I believe that sub domains still count as different domains.  Don't ask me, I wasn't part of the WHATWG group :)\n. I'll have this fixed by the next release.  stay tuned!\n. great!  I was going to recommend moving the entire stage.\n\nstage.getContent().addEventListener('touchmove', function(evt) {\n  stage.setPosition(touchX, touchY);\n  stage.getChildren().each(function(layer){\n    layer.batchDraw();\n  });\n});\n. I see where you're going with this, but I don't think the solution is to create a new node attribute.  You might want to alternate between buttons, or you might want to enable several buttons.  Also, this doesn't really have a parallel for mobile devices (touch events)\n\nIf you want drag and drop to only work with specific mouse buttons, you have several options\n\n1) on the drag handler, you could cancel drag and drop if the mousebutton isn't the one you want by calling node.stopDrag()\n2) you could cancel event propagation on mousedown if the mouse button type isn't the one you want\n3) you could manually trigger drag and drop by hooking into mousedown, checking for the button type, and then calling startDrag()\n4) there are probably several others\n. fixed.  The algorithm now looks at the pixels around the pixel of interest if it's anti-aliased. https://github.com/ericdrowell/KineticJS/commit/aa78d632dbc89ace518890946dfc3947bcd74d89\n. which areas?  I'm able to see the click event when clicking on multiple regions\n. I see what's happening.  You're hitting anti-aliased pixels.  I updated your jsfiddle to show the hit graph below the circle:\n\nhttp://jsfiddle.net/GXWFY/20/\n\nnot quite sure how to solve this at the moment... very interesting edge case.\n. As a work around, if you ensure that the text is positioned at whole number pixels, anti-aliasing won't occur in the hit graph.  see if you can replicate the problem with this jsfiddle:\n\nhttp://jsfiddle.net/GXWFY/21/\n. I'm closing this ticket for now, although I will be investigating anti-alias issues at some point.  be on the watch for that.\n. Thank you sir!!\n. It might be browser / OS specific.  Which browser OS are you using?  are you able to repo the problem in other browsers?\n. Yes this appears to be related to newer versions of chrome.  The problem is that Chrome takes over the mouseevent, and assumes you are trying to drag and drop the canvas element offscreen as an image.  Here's the work around:\n\nstage.getContent().addEventListener('mousedown', function(evt) {\n        evt.preventDefault();\n      });\n\nThis will prevent chrome from taking over the event.  I'll add this to the next release.\n. fixed.  Releasing a patch tonight, v4.5.3\n. please repost this on stackoverflow.  Make sure you don't have a JS closure problem :)\n. Yes, please check out the revamped docs + new tutorials\n\nThe new Tween class is much more robust than transitionTo\n. how odd, thanks I'll look into this today\n. Thank you!\n. I'm planning on hooking jshint up to my build, but haven't had the time quite yet :)\n. I tried modifying the following tutorial to tween brightness, and it worked as expected:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-tween-blur-filter-with-kineticjs/\n\nCan you do the same and let me know if you can repo the problem?  \n\nCan you post an example on your own website showing the problem?  Try to create the simplest demo (I won't have the time to look through a lot of code).  As you've pointed out, the Brighten filter doesn't touch alphla values, so I can only suspect that something else is going on in your code.\n. Hi there!  will try my best to look into this soon.  As you might guess, I have hundreds of todo items on my plate at any moment in time.  I do offer support licenses, if you're interested, which gets you dedicated help and priority bug fixes:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Purchase-a-Support-License\n\nstay tuned\n. by the way, I've added a new Brighten filter tutorial here:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-brighten-or-darken-image-tutorial/\n\nwhich doesn't seem to have any problems with opacity.\n\nI'm closing this ticket for now because I'm just not able to reproduce it.  I'll keep an eye out for this, and if I come across it, I'll reopen the ticket.\n. Thanks for the clarification!  I didn't realize that the problem was specific to pngs.  thank you!\n. ah interesting.  Do you think it would be a better solution to just clear the existing filter canvas?  I'm sure that will perform better than creating a new canvas each time.\n. sounds like a memory leak with destroy().  Will look into it soon, thanks!\n. ah yes, that makes sense.  It just so happens that the remove() method doesn't correctly remove children.  This is on my todo list for the next release.  Since destroy() uses remove(), calling destroy() will also fail to destroy the children, causing the memory leak that you've experienced.  Stay tuned!\n. This should be fixed now.  The latest release, v4.5.4, now correctly removes and destroys children:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log#454-june-9-2013-current\n\nPlease reopen this ticket if this does not fix your issue!\n\nEric\n. transitionTo was replaced with Tween.  Here's the changelog:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n\nHere's updated tutorials:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-linear-transition-tutorial-with-kineticjs/\n. sorry about this, I'll have this fixed up soon.  The truth is, I've dropped the ball lately in terms of testing different build combinations to make sure things work as expected.  I need to create a solid suite of tests that test every build combination.  Quite a feat, but needs to be done :)\n\nEric\n. added this task for the next release.\n. Newer versions of Chrome broke older versions of Kinetic.  Are things working correctly for you now that you've updated to the latest KineticJS version?\n. OS?  Fill and DD work for me on Mac OSX\n. In my experience, 64 bit windows 7 is very buggy in general.  I'll look into this as soon as I can though\n. Umesh, did you verify if drag and drop is working on the tutorials:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-an-image-tutorial/\n\nif so, then it's likely an issue with your code\n. Umesh, also, it's nearly impossible for circles to be rendered as rectangles.  Very likely it's an issue with your code\n. to be clear, are these problems only happening on Windows 7 64bit Chrome?\n. The latest versions of Chrome have been very buggy in regards to HTML5 canvas.  It's not a KineticJS issue.  I did however make some adustments to help with a circle fill issue in Chrome 27, which is part of v4.5.4 released last night.  Try out that version to see if it helps your case.\n. surely you don't mean \"any parameter\".  x?  y?  offsetX?  offsetY? width? height? etc\n. I've tested several tweens in Firefox with starting numeric values of 0, and they all work fine.  Could you please create a jsfiddle demonstrating the problem?  Thanks!\n. The API changed.  please see the changelog:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n\nAnd the updated tutorial:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-label-tutorial/\n. This is a bug with early versions of Android.  \n\nhttp://www.html5gamedevs.com/topic/114-canvasclearrect-bug-in-android-stock-browser/\n\nThe workaround is to define your stage and layer, but then add the layer to the stage after a timeout (I've used 50ms with success)\n. no, you have to create the layer, and THEN draw with a timeout, or else the timeout won't do any good.  The bug with Android is that the first thing that's drawn onto the canvas is stuck there forever, and can't be cleared.  So, if you create a layer, and add it to the stage with no shapes in it, then canvas in the layer will render with nothing in it.  Subsequent draws will be clearable. \n\nvar stage = new Kinetic.Stage(conf);\nvar layer = new Kinetic.Layer();\n\nstage.add(layer);\n\nsetTimeout(function(){\n  // add shapes to the layer and then do layer.draw()\n}, 50);\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/test/unit/DragAndDrop-test.js#L17\n. what do you mean by \"too many global variables\"?  They aren't actually global.  They are scoped to the anonymous function wrapping the module.\n. gotchya, that's what I thought you meant.  I'll clean up the JS Hint errors by v4.5.3 :)\n. thanks!  After adding a jshint task to the build, I discovered quite a few of those.  All fixed up now\n. Thanks for doing this!  I'll take a look soon.\n. Thank you for looking into this!  The _setTextLine method has been refactored quite a bit, and getWidth() now appears to be working as expected for wrapped text.  Please reopen this pull request if the latest version of KineticJS doesn't handle getWidth() correctly.\n\nThanks!!\n. setX and setY works fine for text objects.  Can you create a simple jsfiddle demonstrating the problem?\n\nremember that x and y of the text is relative to its container, the group.  Therefore, if the group is positioned, it will affect the origin of the text.  If you want to override this behavior, you can set the absolute position via setAbsolutePosition().  Close this for now, but please reopen after you've put together a jsfiddle.\n. this was a bug with a recent release of Google Chrome.  The issue has been resolved in newer versions of KineticJS.    If you upgrade to v4.6.0, drag and drop in Chrome will work as expected.\n. that is correct.  It hasn't been implemented yet.\n. sorry guys, I'm hoping to get this added in by the next version, v4.7.3\n. Thanks for this!  It turns out, however, that you should not be calling applyFilter.  It's handled automatically inside draw() for caching reasons.  I need to put a couple of underscores in front of it to designate it as a private method.\n. yep, I have plans to eventually create an Arrow plugin, unless someone from the community creates one first :)\n. example in the docs here:\n\nhttp://kineticjs.com/docs/Kinetic.Circle.html\n\nwill create a tutorial on it as well soon\n. Thanks for doing this!  Sorry it took me so long (infinitely busy these days)\n. will look at this as soon as I get another Android device :)\n. I was able to replicate this - I'm shocked that more people weren't complaining about this.  Looking into it.\n. Which version of android?  This appears to be an Android bug.  Stuff drawn on the canvas element isn't able to be cleared after the first draw:\n\nhttp://www.html5gamedevs.com/topic/114-canvasclearrect-bug-in-android-stock-browser/\n. okay, the work around here (for Android 4.1.1 and 4.1.2) is to not immediately draw onto the canvas.  set a small timeout (50ms works for me) before adding layers to the stage.  I believe that this is no longer an issue with recent versions of Android.\n. I've actually never used Telerik MVC.  are there JS errors?  can you be a bit more descriptive when you say \"don't work any more\"? \n\nThanks!\n. precisely, I do have plans to auto toggle the listening property based on both user input (setters) and usage (on() method).  coming soon \n. update on this thread: For optimal performance, you may give the new FastLayers a try.  When you just want to draw stuff as fast as possible, and you don't care about mouse interactions, node nesting, event pub/sub, etc, FastLayers are a really good choice.  You instantiate them like this:\n\nvar layer = new FastLayer();\n\nI think this is an even better solution than managing the overhead of checking for situations when creating a hit canvas is required.\n\nStill, there may be cases where you want some shapes to be listened to, and others not, and for some reason you need them all in the same layer.  In this case, the hit graph will still need to be generated for the shapes that need it, and Kinetic could auto toggle off listening for shapes that have no handlers bound to them.\n. yes, the majority of the jshint problems are coming from pull requests that I've taken in.  Haven't had time to clean those up yet. It's okay if jshint doesn't pass at the moment since there's a lot of things not passing today.\n. Just wanted to note that I haven't forgotten about this thread.  some other priorities are a bit more pressing, but I'll definitely get back to this.\n. sorry it took me awhile to get this.  I setup a jshintrc file and added it to the repo:\n\nhttps://github.com/ericdrowell/KineticJS/commit/1dec988c27b85b3de4000479930a77ff49a62b96\n\nI have quite a bit of work ahead to cleanup all the jshint errors, and then hook jshint into travis CI.  That will come in time.  In the meantime, having the jshintrc file in the repo at least defines the standard of coding that's expected, and it allows people (like you) to modify the jshintrc file to enforce or relax code quality.\n\nThanks again!\n. your jsfiddle is wrong.  the two2 function sets listening to false again, instead of true.\n. This should all be fixed up now.  I made several fixes to Android touch events + drag and drop this morning.  \n. Thanks for looking into this!  I'm currently working on a change that will enable corner radius for all shapes, including label tags.  This will be released with v4.8.0.  This way, we don't have to implement corner radius logic in each shape separately.\n\nThank you!\n. its in the change log here:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log#452-may-21-2013\n\nyou want to use getType() or getClassName() instead.\n. that's odd.  I found that the chrome 27 bug was occurring when you draw an arc with a stroke, in which the angle difference between the start angle and end angle was exactly 360 degrees.  I found that if it was slightly off, like 359.9999999, Chrome 27 rendered the circles correctly.  This was the fix that I put in.  May have to revisit it again.\n. I'll look into this as soon as I get a chance.  A lot of people have been asking for this.  Stay tuned!\n\nEric\n. you're incorrect.  take a look at this line:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Animation.js#L200\n\nonly one animation loop is used for all animations. \n. Oh I see what you mean, you're referring to the FRAF exclusively.  okay thanks, I'll take a closer look at this :)\n. you should use the least amount of layers as possible, while grouping things together intelligently.  Things that aren't updated often should be placed into one layer, while things that are updated regularly, and with other shapes, should be grouped together in their own layers.  Typically, most KineticJS apps will use between 2 and 10 layers.\n. That is correct.  I ultimately decided to use an inheritance pattern that was dead fast, in exchange for less flexibiilty.  I have a todo item to revisit the inheritance mechanism to address some of these issues, and I'll take a close look at lavrton's solution as well :)\n\nThanks for this!!\n. by the way, forgot to mention that you can use the getClassName() to get the class name of any node.  you can also use getType() to get the type of node.\n\nI'm closing this ticket for now, but have added a link to it from my todo list when I get around to taking a look at the inheritance model again.  Thank you for this!\n. it's necessary - you shouldn't ever be manually putting things into the stage container.  Just overlay the stage container on top of your image.\n. yes, Chrome 27 is very very buggy in regards to html5 canvas.  So far it doesn't appear to be KineticJS related.  staty tuned on this.\n. I made several fixes to Android touch events + drag and drop this morning, so we should be good.  Please reopen this ticket if there are still issues.\n. This was done intentionally in order to create smooth drag and drop operations.  If we were to continually stop and restart the animation, you would notice a slight lag each time you moved the mouse.  Closing this for now, but I'll put more thought into it.\n. yep, KineticJS ignores the anti-aliased pixels.  If you're drawing a 1px diagonal line, and you want it to be detectable, you need to create a custom hit function to define the hit region.  You probably will want to create a hit region that's a line which is about 5px thick or so.  Here's an example on creating custom hit regions:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-custom-hit-function-tutorial/\n. hi there, actually, KineticJS mimics native JS events and jQuery events exactly.  What you want is the \"mouseenter\" and \"mouseleave\" events, which KineticJS supports.  For more info about the difference, just do an online search for mouseover vs. mouseenter\n. it's a problem with your code.  1 out of 5 times, your randomized color index is out of bounds and returns undefined.  you need to use (len - 1) instead of len.  Updated it here http://jsfiddle.net/HCV8b/59/\n. can you create a jsfiddle showing the problem?  my unit tests are passing for id selectors\n. nice!  makes sense.  I'll pull this in soon.\n. Thanks again Gabriel.  I had to make some changes to the logic, because it turns out that we do also need preventDefault() for certain desktop browsers because the drag and drop operation triggers a drag and drop of the whole canvas element for the html5 drag and drop API which has undesired effects.  I couldn't merge in this pull request due to the extensive changes, but I still gave you credit in the change log.  Thanks!\n. ah, yes, this has been resolved.  There were some antialias issuese with the event detection awhile back but they were resolved with this block of code:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Layer.js#L14\n. when clicking on a circle, move it to its own layer first.  i.e. you need to create a layer specfiically for animations, such as animLayer = new Kinetic.Layer();  Also, windows phones will generally be a bit slower than apple or Android\n. This is very cool!  I'll look closer into this soon.\n. Hi again!  I was just looking at this pull request again - what do you think about creating a new distortion transformation that all nodes can use, not just images?  Currently KineticJS supports translate, rotate, scale, and skew.  We could do something like this:\n\nvar circle = new Kinetic.Circle({\n  radius: 5,\n  fill: 'red',\n  distortion: [0, 0, 10, 50, 10, 100, 0, 10]\n});\n\nWhat doyou think?\n. I'll take a crack at integrating the distortion transform into Node sometime this weekend and I'll let you know what I find.  Stay tuned!\n. Thanks for this!  I'm going to tweak it a little bit such that selectors are separated by commas to mirror CSS selector rules.\n. hey gaddie, it looks like the change broke the unit tests.  There were several problems with the logic that was introduced.  I fixed them up, and cleaned up the get method even further:\n\nhttps://github.com/ericdrowell/KineticJS/commit/e6a9324d50c98c97292b062131f984729792dc35\n. no worries!  Thanks again for getting this rolling\n. +1\n. you need to redraw the layer with layer.draw()\n. for performance reasons, I chose not to auto redraw the hitgraph, for the same reasons that I do not redraw the scene graph whenever you update node properties.  to redraw the hitgraph, you should be able to do the following:\n\nlayer.drawHit()\n\nlet me know if this doesn't work for you\n. currently no, you need to do something like this:\n\nlayer.add(child);\nchild.setZIndex(5);\n. +1 Jason Follas made some changes awhile back that addressed this issue.  Should be fixed.  Please reopen if it's still an issue.\n. don't add layers inside layers.  you need to add groups inside layers.\n. Thank you for doing this!  Looking at this right now.\n. At a quick glance, these look like great changes!  I've been meaning to add color / convolution filters.  I'll go ahead and pull this in and play around with it and let you know what I find.\n\nAs a site note, KineticJS is starting to get a bit filter heavy, so I probably need to create separate builds just for the filters.  Stay tuned on that one.\n. nice work!  The filters look great.\n. you should update the Filter files with the @author tag for credits\n. Hi again, I was looking more into your code and you've done some really awesome work!  A few questions / comments:\n\n1) did you notice that the convolve related filters create a black border around the image?\n\n2) is there a difference between your Lighten / Darken and the currently existing Brighten filter?  Brighten can take positive values to brighten the image, and negative values to darken it\n\n3) You've put a lot of filters inside the same file, because they all use the same functions, but with different params.  Perhaps we should change Convolution to ConvolutePack, to indicate that the file includes multiple filters.  Same comment for the Colors filter. Maybe it could be ColorizePack.  This will be helpful when people create custom builds: http://kineticjs.com/configurator.php.  On the topic of naming conventions, you'll notice that all of the currently existing filters are verbs for consistency.  Can we do the same for yours?\n\n4) Another neat thing about filters is that they are tweenable.  Here's an example: http://www.html5canvastutorials.com/kineticjs/html5-canvas-tween-blur-filter-with-kineticjs/.  This is only possible if the filter params are numbers.  Do you think its possible to create wrappers around your existing Filter functions to allow numeric parameters?  This way we could tween your filters, such as Emboss and Sharpen.  i.e. an emboss value of 0 could mean no Emboss, and a value of 100 could mean a lot of Emboss.\n\n5) is there a difference between your blurring functions, and the currently existing Blur filter?  Should the Blur filter be removed in favor of your filters?\n\nThanks again for your awesome work!  If you don't have time to work on these any further, no worries.  I'd still like to get your thoughts.\n. KineticJS handles this automatically if you use the Kinetic.Animation for your loop.  Everything hooks into the KineticJS animation engine, which means that layers are only redrawn once per frame, no matter how many animations are tied to a particular layer.  \n. don't do that, it will trigger a redraw hundreds of times per second.  you need to use batchDraw().  I'll be releasing a new version soon with an improved version of batchDraw that performs much better than the current version.  It will be apart of v4.6.0.  Watch out for that.  When it's released, you should replace stage.draw() with stage.batchDraw();\n. absolutely.  stage.batchDraw() will be perfect for this case as well.  just keep checking for v4.5.5 to be released.  Should be released in the next couple of weeks.\n\nIn fact, you could technically always use stage.batchDraw(), unless it's absolutely necessary to redraw something immediately.\n. now that Kinetic supports batchDraw, closing this ticket.  Here's the tutorial:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-batch-draw/\n. Interesting, I'll add this to my todo list.  Thank you!\n. That's pretty interesting.  I've had several other requests that are similar to this one.  Perhaps any attribute could be set to a function.  I'll add this to my todo list.  My only concern is the possibility that it could impact performance when constantly checking if things are functions are not.  stay tuned.\n. can you provide a screenshot or jsfiddle?  KineticJS automatically handles pixel ratio adjustments by increasing the stage width and scale to create a sharp image.  Are you saying that the canvas appears to be twice as big as it should be, or just has a style that's set to twice the amount that you're expecting?\n. ah shoot, that's too bad.  The quick fix would be to disable the pixelRatio by just hard coding it to 1.  I'll look into creating a public way of setting or retrieving the current device pixel ratio.\n. Closing this ticket for now because I'm in the process of adding more docs to explain pixel ratio.\n. mobile events are working for me on this page:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-mobile-events/\n\nI'm using iOS.  What device are you using?  what code are you using?  jsfiddle demo?\n. you need to read through the change logs to see what changed, or go through the tutorials\n\nwww.kineticjs.com\n. can you create a simple jsfiddle showing the problem?  It will be easier to debug there.\n. great observation.  I'll take a look, as there are probably several solutions to this.\n. Thanks guys for bringing this up.  It will be addressed soon.\n. @hohmann that will definitely help, but may not be ideal, because it means that the first tween will render immediately, and the other tweens will have to wait for the next animation loop to start tweening.  This could result in the first tween jumping ahead at first.\n. no updates so far.  The fix will be in the next release, v4.7.3, which will be released sometime next month.\n. This is by design. the dragstart event should not be fired until the mousedown event has occurred, and the mouse has started to move.  It sounds like you should just be hooking into the mousedown event instead.\n. Thanks for looking into this!  I'll take a look as soon as I get a chance.  KineticJS v4.6.1 will resolve all of the pixel ratio issues\n. thank you!  this is the same fix that I came up with.  It turns out that I also did some refactoring for the clip() method so I couldn't pull in your request.  I'll still credit you in the change log though.\n\nThanks again!\n. Haven't forgotten about this, will take a look as soon as I get a chance.  This definitely needs to be addressed one way or another.\n. question: is it true that checking the 4 pixels around a pixel with an alpha < 255 is accurate?  I would think that it's possible that adjacent pixels could also have an alpha < 255 depending on the angle of the edge.  We could go to all 8 pixels, but I wonder if that's accurate as well.  I'll try to manually merge this in since it's been awhile. (sorry about that)\n. Okay, here's the deal.  I started reviewing my code for getIntersection, and I was horrified.  There's lots of bad stuff in there.  You are definitely on the right track, and I like your unit tests.  However, rather than merging in what you have, I've chosen to rewrite the getIntersection methods, and pull in some of your logic (I'll give you credit in the change logs).  Stay tuned!\n. fixed.  The algorithm now looks at the pixels around the pixel of interest if it's anti-aliased. https://github.com/ericdrowell/KineticJS/commit/aa78d632dbc89ace518890946dfc3947bcd74d89\n. Thank you so much for getting this started!  I'll add your name to the release schedule.\n. and this one: https://github.com/ericdrowell/KineticJS/commit/658064b5ef1d22a85b6fe7f507a0b6851a5cf216\n. node._id is a Kinetic generated id for each node that shouldn't really be useful for you.  Also, you should not use spaces for names and ids (think CSS selectors).  you can use \"-\" or \"_\"\n. +1 support for this was added with v5.0.0.  I have yet to create a tutorial for it.\n. Here's a lab that uses an array of filters:\n\nhttp://www.html5canvastutorials.com/labs/html5-canvas-animals-on-the-beach-game-with-kineticjs/\n\nOn mouseover, a brighten + blur filter is applied\n. +1 you can now cache any node, and apply filters to any node, including layers, groups, and shapes.  I believe this was introduced with v5.0.0\n. here's an updated filter example:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-invert-image-tutorial/\n\nIn this tutorial, we're applying a filter to an image, but you can apply filters to anything.\n. exactly.  This is a constraint of the w3c spec for where strokes are positioned, so the rules are a bit different than Photoshop.\n. will do, as soon as I get a chance.\n. Thanks for looking into this.  And yes, these are some of the things that I've addressed with v4.6.0.\n\n1) yes, the getStage() method has to walk up the node tree everytime it's called.  I was considering adding this to the new caching system\n\n2) clear() is a bit expensive, as expected.  The cost of clearing can be reduced with the new clip feature that's being added in 4.6.0\n\n3) the _fireAndBubble method was being called hundreds of times per redraw because draw events were bubbling. draw events no longer bubble as of 4.6.0\n\n4) this is the getter method used for all attributes.  It only shows up in your results because it's called so often.  It's a fast method\n\n5) this is the getParent method.  Same as number 4, it's fast, just called often\n\n6) the visible attr has already been added to the new caching system.  Previously, it would crawl up the node tree to calculate visibility every time it was called.\n\n7) drawScene was further optimized with 4.6.0.  the _applyAncestorTransforms method is much faster, because I'm now double caching matrix transforms.  I'm caching the transform matrix at the node level, as well as the absolute transform matrix.  This has sped things up quite a bit.  This is also where the draw events were being fired, which was expensive in 4.5.5\n\n8) _applyAncestorTransform, as mentioned above, this is no longer an issue because the transforms are cached.  Here's what it looks like if you're interested:\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Node.js#L863\n\nThanks again for looking into these!  These findings validate all of the work that I've been working on this weekend.  So far, KineticJS is a little over 10% faster with all of these fixes.  The only one that I haven't addressed yet is number 1, but I'll do that before I release 4.6.6\n\nCheers,\n\nEric\n. Hi there!  Did you get my message about possibly joining the KineticJS team?  You've done some fantastic work with the filters, so we'd love to have you.\n. This is an interesting idea, although I'm not sure it would fit cleanly into the KineticJS node tree model.  I.e., it might be odd to set text properties on a stage or layer node.\n. I have a todo item for the next release (v4.6.0) to reinvestigate the text default logic, so I'll definitely keep this in mind when I get there.\n. this is the expected behavior.  if you want to scale the line and circle together, you need to scale its container (the layer).  You could also create a scaled group, and then add the shapes to that group. \n\nvar layer = new Kinetic.Layer({\n  scale: 2\n});\n. Truly sorry for the headache.  This issue will be fixed by v4.6.1 or v4.6.2, depending on priorities.  Thanks for hanging in there!\n. good to know, thanks!  I'm planning on knocking out all of the device pixel ratio issues in the next release, v4.6.1.  Thanks for the heads up!\n. Interesting, this appears to be a bug with Firefox, which they've marked as WON'T FIX\n\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=809788\n\nIt's not KineticJS specific, and there's not really a clean way to work around this.  The Firefox devs seem to be a bit stubborn about this issue.  I'm closing this for now, but will keep it in mind.\n\nBtw, the point of the pixel ratio adjustments is to ensure sharp drawings.  On devices with a pixel ratio != 1, the canvas drawings will appear blurry without the adjustments.  Overall, it's very good to have this in place, because it effects many mobile devices, tablets, iMacs, etc.\n. As a reference, there does appear to be a possible solution to obtain the  Firefox zoom level\n\nhttp://stackoverflow.com/questions/1713771/how-to-detect-page-zoom-level-in-all-modern-browsers\n\nBut it's extremely hacky, and may possibly have unwanted side effects.  If you really need this, you could try and detect when the zoom has changed:\n\nhttp://stackoverflow.com/questions/6163174/detect-page-zoom-change-with-jquery-in-safari\n\nand then try out the above approach to get the zoom level, adjust the pixel ratio accordingly, and then recreate the layer canvases.\n\nIt's a lot of hoops to jump throug to work around a Firefox bug :(\n. Thanks!  Fixed: https://github.com/ericdrowell/KineticJS/commit/ae66350d7f7c6d96653ef321c7a5ee833ed6d82e\n. I don't think this is an elegant solution.  As pointed out by the person asking the question, it would make sense to have a way to apply a transform to a node, such as shape.setTransform().  I'll add this to my todo list, thanks!\n. you were using ids incorrectly.  Like DOM, ids must be unique.  you were using an id=overlay for multiple shapes, so only the last id was accessible.  I changed the id to a name.\n\nhttp://jsfiddle.net/7YJMv/\n\nAs a side note, you can also select nodes by type, such as Layer.get('Group'), or group.get('Rect').  This way, you don't have to add names to everything.  Also, you'll see improved performance if you use event delegation.  example here:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-get-event-shape-with-kineticjs/\n. Thanks!  Each of the browsers handle dash arrays differently, so I probably just need to update the dash array logic.  That can be found here:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Canvas.js#L385\n\nI'll try to get this fixed up by the next version.\n. ah yes, IE9 and IE10 do not support line dashes, so KineticJS falls back to a solid stroke.  IE11, however, will support line dashes.  Safari currently does not support line dashes, although I believe they plan to with the webkitLineDash property.  It does not work as of today.  Here's the KineticJS code that handles the cross browser compat:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Context.js#L297\n\nSo long story short, as of today, dashed lines are only supported in Chrome and Firefox, and will be supported soon with IE11.\n. I'll have this setup for v5.0.1, coming out in a couple of weeks.  I need to auto update the bower package info with the grunt build.  Stay tuned on that.\n. done.  The bower json file generation has been hooked into the grunt build, and the kineticjs minified file has been added to root.  Let me know if this doesn't work for you guys.\n. there's actually not much desktop specific code at all.  You'll only find a little bit in Stage.js, about 100 lines.  compared to the 14,000 lines that makes up KineticJS, this is pretty insignificant. \n. actually I don't believe this is necessary.  Do you know of any articles discussing <!DOCTYPE> vs. <!DOCTYPE html>?\n. Closing this because the test suite has been rewritten.\n. ah.  Very interesting use case.  Do you think an array of box objects would work? i.e.\n\ngroup.setClip([\n  [0, 0, 100, 50],\n  [0, 50, 50, 100]\n]);\n\nI can add this functionality to an upcoming release.\n. I'm unable to replicate this.  I think there must be something else going on.  can you create a jsfiddle demonstrating the problem?\n. scratch that, I am able to replicate the issue.  It only occurs if you have an offset.  I'll get this fixed up with v4.6.1.  Thanks!\n. precisely.  I ust wonder if we can hook into the native support for performance reasons.  I haven't had a chance to look into this one.\n. It turns out that this is a Chrome specific issue with HTML5 canvas.  It's not an issue with KineticJS, and I don't believe there's any way to correctly resolve the issue from KineticJS's end.\n\nFor the time being, the work around is to not use huge scale factors, but instead scale the position of each point that makes up the line.\n. Thank you!\n. yes, I need to add an attr blacklist to the clone method to make sure I don't clone the id.  This fix will probably make it ot the v4.7.1 release\n. Thanks everyone!\n\nGoogle Chrome clearly doesn't have any unit tests for canvas changes.  They break stuff every other release.\n. Google Chrome is notorious for releasing canvas bugs.  It seems like every release breaks something.  Let's give this a couple days to see if they resolve the issue.\n. This logic is already built into the getHeight() method.  Check it out here:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/shapes/Text.js#L167\n\nYou should always use getHeight to get the height of the text object because it does all of the calculations for you.\n. The confusion is my fault for not writing better docs for the method.  I'll fix this soon.\n. ah yes, great catch.  fixing now.\n. Sorry guys, this is fixed. It will be in the next release in about a week\n. you're overwriting the drawFunc with a method that doesn't use the canvas renderer methods, so you lose out on events.  You have two options:\n\n1) use the Kinetic.Path method and pass in SVG data like the path tutorial here:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-path-tutorial/\n\n2) create a Kinetic.Image and set the image attr to your svg shape, and then use createImageHitRegion to create a hit region, like this tutorial\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-pixel-detection-with-kineticjs/\n. It should. If it does not, you could try scaling it with setScale()\n. Thank you!  I'll try this out as soon as I get a chance.\n. as per the documentation, functions are not serializable (security constraints).  You'll have to reapply the filters after you've deserialized the JSON.\n. Thanks Jason \n. very cool!  At some point soon, I plan on adding a gallery of extensions to the KineticJS website.  These extensions (plugins) should be hosted on individual github accounts, and KineticJS will link to them (along with user reviews).  So to answer your question, you should create a separate github project, with documentation about how to use your plugin.  \n\nThanks so much for putting this together!  I'll keep this ticket open until I've built the gallery page.\n. Good call. This will definitely get fixed, it's just a question of when\n. +1 yes this is a bug with Chrome and HTML5 Canvas.  Hopefully they resolve this soon.\n. By the way, the width of text varies from browser to browser.  You should be taking text.getWidth() into account for the next x calculation.  I believe this is what you're seeing.  Please reopen if this doesn't help.\n. Let me clarify a bit on what's happening.  Currently, when you drag and drop a shape, the hit graph is not redrawn on each animation frame to help improve drag performance.  As a result, shapes are temporarily undetectable. \n\nWhat you really need is true collision detection + dragover / dragout.  I have plans to support these, but haven't gotten around to it yet.\n. This is fixed with v5.0.0 which will be released this week.  Here's the changelog\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n. just to clarify, this does appear to be related to TextPath specifically.  If you just use Text, everything works correctly:\n\nhttp://jsfiddle.net/BaTxP/\n\nYou mentioned that there may be missing restores, so I'll check out the TextPath draw func.  Also, you use layer.getContext().getTrace() if you want to see strict trace string, or layer.getContext().getTrace(true) for the relaxed trace string\n. fixed.  You were right Jason, somehow I deleted a restore() from the text path draw func.  Fixed it up, and added a test that uses the new nifty context trace :)\n. Hiya, there's three different topics in this ticket:\n\n1) Retina display: can you explain what you mean by \"works fine on non-retina, but not on Retina\"  What exactly is not working?  is the problem being caused by the JS error that you mentioned?  If there is a problem, it's probably related to pixel ratio calculations.  Retina displays typically have a pixel ratio of 2.  Try setting Kinetic.pixelRatio = 1 before you've instantiated any layers.  This will prevent pixel ratio calculations.\n\n2) \"Unable to create image hit region\" This warning is thrown if you've created an image hit region for an image that's not on the same domain as the code executing it.  In other words, your app needs to be running on a web server. It won't work locally.  This is a security constraint set by the w3c.\n\n3) the event.layerX error is probably related to a logic change that was made recently with the setMousePosition method.  We'll look into this.\n. I was thinking the same thing.  the current logic isn't sound anyways, because if evt.layerX is zero, we are still falling back to the _getContentPosition() block on line 580.  we should split the logic up into if else blocks, and also cache some of the variables.  I'll take a look real quick\n. it appears that this is a jQuery warning, not an error:\n\nhttps://drupal.org/node/1420984\n\nare you using jQuery on the page as well?\n. scratch that, it's just a Chrome warning.  There's a lot of jquery threads about this because people who are using jQuery are seeing this warning as well.\n. perhaps we should just check for the layerX case at the end of the ternary.  I'll keep looking.\n. @ellenm1 what device are you using?\n. @jfollas what do you think of this commit above?\n. @jfollas actually, I think we can remove evt.layerX/Y entirely.  FF appears to support evt.pageX/Y.  Check the commit above.  what do you think?\n. @jfollas okay what do you think of the above commit.  We are using UA detection now.\n. This should be fixed up now.  I resolved several pixel ratio issues.  They will be added to the 4.7.3 release going out this weekend.  Please reopen this ticket if your issues are still not resolved.\n. is this working now?  What was the issue?\n. greensock is really nice.  Definitely recommend checking it out.\n. KineticJS core will probably never support inertial scrolling.  This is more appropriate as a plugin (like the Greensock plugin)\n. you need to just use this.clear().  The clear() method is now in the Context class.  i.e. you can clear the canvas doing one of these:\n\nlayer.clear();\n\nor\n\nlayer.getCanvas().getContext().clear()  \n. ahhh, I see what you mean.  This is a very, very bad bug!  Just fixed it up.  layer.clear() now also correctly clears the hit context, and I added unit tests to make sure this doesn't happen again.\n\nThanks guys!\n. I'll release 4.7.1 sometime today or tomorrow with the fix.\n. replaced fill() with fillShape() in the hit draw function for Sprite.  This was a regression introduced with the major refactorings done for 4.7.0\n. Haven't been able to look into this yet, but one thing you can try is to force the pixel ratio to 1 like this:\n\nKinetic.pixelRatio = 1;\n\nand you'll need to do that before you instantiate any layers.  Devices with retina displays have a pixel ratio of 2, which means that KineticJS has to do a bit of extra work to sharpen the scene graph.  Setting it to 1 prevents all of this extra work from happening.\n. I can look into this when I get a chance (won't be for awhile though, unless someone else from the team gets a chance).  It's probably pixel ratio related.  As a work around, you can set Kinetic.pixelRatio = 1.  You can also use the Kinetic.UA object if you need browser or device dection.\n. Thanks for looking into this!  Not sure if I'm entirely sold on bringing in 200 lines of JS to fix a problem with iOS 6 and 7 for very large images.  I'll think on it\n. Let's do it.  Would you like to submit a pull request?  You can use Kinetic.UA to detect the user agent\n. this will make it to the next release, which will be later this month, or early December.  The suggested fixes in this thread are on the right track, if you need a quick fix.\n. nice work!  This is a very interesting idea.  Originally I was supporting user defined drawing functions which is very flexible, but requires a bit more work to setup.  It seemed like 99% of people who were interested in using clip functions just needed a rect, so I removed the user defined functions, and added the clipping bounding box.  This also makes it easy to transition.  At any rate, I'll keep this in mind, and I'll come back to this in the near future.\n. Closing this one for now.  I believe that if I decide to support custom clipping shapes in the future, it would be cool if it could hook into an actual arbitrary shape node (like a Star for example) so that the clipping function can be updated, animated, and tweened.  Thanks again for bringing this up!\n. that's odd.  I have an Android 4.1.1 Samsung Galaxy Tab 2, and it seems to be working great.  what happens on your device?  Exactly which device do you have?\n. you need to use groups.\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-complex-shapes-using-groups-with-kineticjs/\n. hiya!  One thing that changed form 4.6.0 to 4.7.2 is the way that nodes are rendered who have both a fill and stroke, and an opacity or shadow.  Before 4.7.2, nodes with both a fill and stroke who also had an opacity or shadow were not rendered correctly due to the canvas spec.  I.e., if you have a shape with both a fill and stroke, and an opacity was applied to the shape, you could see the fill beneath the stroke, because the canvas applies opacities to both the stroke and fill.  v4.7.2 addresses this use case by rendering those shapes onto a buffer canvas, copying the result onto the scene canvas, and then applies an opacity to the whole shape.  This means that performance will suffer a bit for those use cases.\n\nDoes your application have any shapes with both a fill and stroke, and also has an opacity or shadow applied?  If so, you'll see much better performance if you remove one of these properties (stroke, opacity, or shadow).  If not, you could use toImage() to cache a shape as image so that it doesn't have to be redrawn.\n\nThoughts?\n. yes, Ill add a config option that enables \"lazy opacity and shadows\" to help boost performance, if the dev doesn't care about the stroke / fill problem with canvas.  This will be added to v4.7.3\n. 4.7.3 schedule: https://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n. @villabolo that is correct.  in v4.7.3, I'll add a config option that improves performance but degrades the rendering quality if so desired (essentailly making things render as they did before 4.7.2)\n. i.e., I was thinking of adding a new strokeShadowEnabled=false, which means that the shadow is only applied to the filled portion of a shape, which improves performance (this is the way shadows worked automatically in v4.7.1 and earlier).  \n\nLikewise, I may add another attribute that reduces opacity rendering quality for shapes with both a stroke and fill to further improve performance (as it was before v4.7.2)\n. Later this month.   I released v4.7.3 early because there were a lot of pixel ratio issues that needed to be hot fixed.\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n. the answer to this one is pretty straightforward - you should never append DOM elements to containers that a library has created for you.  The kinetic-content element is for KineticJS elements only.  you need to do this instead:\n\n```\n<div>\n  <div id=\"container\">\n    <!-- Kinetic adds stuff here -->\n  </div>\n  <!-- you can add more stuff here -->\n</div>\n```\n. the hit context should not render shadows.  This is by design.  Can you be more specific as to how you are getting an error?  can you copy and paste the exact error you're getting?\n. clipping works correctly in v4.7.2 as far as I can tell.  can you create a jsfiddle that demonstrates the problem?  I suspect that there's something in your code causing the issue.\n. never mind, I was able to replicate the issue.  Clipping isn't working correctly when the container has shapes with shadows.  I'll get this fixed up by the next release.  Thanks!\n. the API slightly changed.  if you want to hook into a click event that's anywhere on the stage, you need to use:\n\nstage.on('contentClick', function(){...});\n. Thank you!\n. v 4.7.0 and 4.7.2 are working correctly for me.  What browser and device are you using?  can you be more specific than \"it bugs out\".\n\nAlso, try v 4.7.2.  There were some pixel ratio issues with 4.7.0, that may be causing you problems on a device with retina displayl\n. fixed!  This will be in the 4.7.3 release going out this weekend.\n. can you post the code on jsfiddle?\n. Are you using Firefox with the zoom != 100%?\n. I think you guys are misunderstanding mouseover, mouseout, vs mouseenter and mouseleave.  Do you guys have experience with those events when managing DOM?  KineitcJS matches DOM event behavior exactly (as well as jQuery).  I updated the jsfiddle to use mouseenter and mouseleave instead\n\nhttp://jsfiddle.net/5eQDM/\n\nDo a search online for mouseenter and mouseleave and tell me what you think.\n. are you attaching mouseenter and mouseleave to the container node? i.e. a group or layer.  Attaching mouseenter or mouseleave directly on a shape will have the same result as mouseover or mouseout.\n. Thanks @kzhdev I'll take a look as soon as I get a chance.  BTW thanks for looking into all these issues.\n. fixed!  https://github.com/ericdrowell/KineticJS/pull/623\n. Yep this was the issue.  fixed + some refactoring with this commit: https://github.com/ericdrowell/KineticJS/commit/224436aa182a87a6f54a7eafd2f771d13ac7e119\n\nThis will be in v4.7.3 released this weekend.\n. Here, I created a JS fiddle for you and everything seems to be working correctly:\n\nhttp://jsfiddle.net/6KSbv/\n\nI suspect that there's something weird going on with your code to cause the error.  Try and see if you can update the jsfiddle to replicate your issue.  If you can, please reopen this.\n. a fixed request animation frame (FRAF) yields better performance for drag and drop.  Without it, the node that you're dragging and dropping will lag a bit behind the cursor.\n. It looks like you're running into a very slim edge case.  It looks like KineticJS is storing an invalid click start position because you're creating the rectangle on mousedown.  When the mouseup event is triggered, the error is thrown there.  As a work around for now (you should be doing this anyways for performance) you can add listening: false to the rectangle so that it's not detectable.  Here's the working fiddle:\n\nhttp://jsfiddle.net/JtZ8c/\n. Thanks @pdille I was able to repro this as well.  I was thinking of the same fix that you've proposed.  This should make it to the next release.\n. done!  Thanks guys for your patience.  I have a crazy todo list for v5.0.0 coming out soon, so I've been neglecting the issue list temporarily :P\n. It sounds like we need to create a remove() extender for Images to make sure filter stuff is cleaned up.  Similarly to the Layer extender here:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Layer.js#L202\n. yes, this is a known issue that will be addressed with the next release (v4.3.3).  Thanks!\n. I suppose this could be added in an as enhancements.  It would be a bit of a lower priority compared to the other issues, to it might take a few versions to get it in.\n. Thanks for fixing this Andrew!\n. At some point I need to hook jshint into the build & Travis CI\n. This isn't a bug with KineticJS.  The lab that you're referring to is just that, a lab.  It wasn't built to support that use case.  The lab code needs to change (if your requirement is added in), not KineticJS\n. Can you put together a simple jsfiddle that demonstrates the problem?  My guess is that we are making assumptions based on how the lab is coded\n. I'm not sure you know what I meant - the purpose of creating a JS fiddle is to creating the simplest possible example that demonstrates a problem.  I created this fiddle for us:\n\nhttp://jsfiddle.net/MBQxm/\n\nIt's a simple group that contains two shapes.  If you uncomment the commented out line, the group is correctly offset, and the shapes are in the correct location.  You proposed that changing the offset of a group affects its children position, which isn't true for this jsfiddle.  Am I missing something?\n. thanks @ippo615 !\n. @kzhdev I agree with you that the docs aren't perfect.  Doing my best to continually improve them :)\n. I believe the issue is that we do not need to force the pixelRatio to be 1, and should instead allow the computed pixel ratio to take affect (this happens in the canvas constructor).  i.e., rather than setting pixelRatio=2 for your case, we just need to delete that line entirely.  I'll do some testing and check in the fix if it works.\n. This is fixed up now.  Thanks for taking a look!\n. You need to upgrade to v4.7.4.  Pixel ratio issues were addressed in v4.7.3\n. Closing this for now. Please reopen if v4.7.4 does not resolve the issue\n. +1 this is not a bug, you should not be modifying the transform object directly because you bypass the caching system.  use move(), setX(), setY(), setPosition(), or setAbsolutePosition()\n. Interesting, I'll take a look as soon as I get a chance\n. you cannot run start() until the shape is added to the group, the group is added to a layer, and the layer is added to the stage.  Please reopen this ticket with a code snippet if this doesn't solve your problem.\n. I'll take a look at this when I can.  The right way to go is to to do something like this in Kinetic.Image:\n\nif (Kinetic.UA.browser === 'ios') {\n  // override some methods\n}\n\nthis way the logic is only executed once, when KineticJS is first setup\n. Thanks, I'll look at this again this week.  Stay tuned.\n. Hiya, yes, with v5.0.0.  Here's the release schedule:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n. I'm still in the process of wrapping up the new documentation for all of the API changes in v5.0.0.  It's the biggest release in KineticJS's history.  Since this seems like a pretty burning issue, I'll still try to get this fix in before I release.  I plan to build a beta release and start doing integration testing with Html5CanvasTutorials by the end of this week.  If things go smoothly, v5.0.0 should be released during the weekend, maybe sooner.\n. v5.0.0 was too big of a release, so I had to cut out a lot of things that I was planning on putting in (including a fix for this ticket).\n\nI'm planning on taking a week off and letting v5.0.0 stew a bit more to see if there are any issues (there's already one that I just fixed).  I'll release v5.0.1 the following week (end of January) which will be a small patch that only contains high priority bug fixes.  Here's the revised release schedule so far:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n\nStay tuned!\n. Haven't forgotten about this thread.  I spent a few minutes looking into this, and it's pretty clear that this change could have a lot of side effects.  I feel that it's a fairly high risk change, which means that I need to spend a solid couple of nights reverse engineering stomita's library, and making sure that it doesn't cause side effects with pixel ratio adjustments, event handling, caching, data urls, the toImage method, filters, image size getters, etc.  \n\nIn the past, these types of hacky work arounds for a bug with a specific device, browser, or OS often times aren't worth the effort because they eventually get fixed.  However, there's a lot of people on this thread that clearly need a fix, so I will continue to investigate.\n\nI don't want this to hold back the 5.0.1 patch, which fixes a lot of issues that affects everyone.  So, unfortunately I'll have to push this fix to 5.0.2 and I will get to it asap. \n\nFor those of you that need a fix now, the changes in this pull request look like they are in the right direction.  I'd suggest forking the KineticJS repo and trying to pull the changes in, and see if it fixes your issues.  Even if it does cause side effects, you might not notice them depending on the features of KineticJS that you're using. \n. Thanks!  This is a known issue.  Will hopefully be fixed up soon.\n. *\\* copied from above **\n\nnever mind, I created a JS fiddle which shows that this is working correctly:\n\nhttp://jsfiddle.net/X9U4H/\n\nI created a custom class, instantiated it, cloned it, and ran a method on the clone. It's working as expected.\n\nPlease reopen this ticket if you feel that this is still an issue.\n. no problemo!  \n. agreed, this is something that I've been needed to work on, but it's been de-prioritized.  Would you like to give it a shot?\n. The challenging part is that the defaults are stored inside each getter method.  In order for the toObject method to know about these defaults, we'd have to pull all of them out into some kind of default map that getters can access, and toObject() can access. (not a walk in the park)\n. very smart!  I like that approach\n. can you submit a pull request with this change?  I think this is a great solution.\n. nicely done!!!\n. Thanks for looking into this!  It turns out that I will soon be deprecating the beforeFrame func, and I'll also remove the function deletion behavior.  Soon, you'll be able to do this:\n\nsprite.on('frameChange', function(evt) {\n  if (evt.frame === 2) {\n    // do whatever you want\n  }\n});\n\nThis will be much more flexible, and consistent with other event bindings.\n. Done!  You need to use this instead:\n\nsprite.on('indexChange', function(evt) {\n  var oldVal = evt.oldVal;\n  var newVal = evt.newVal;\n});\n\nThis is available today, and is much more flexibile than afterFrame().  afterFrame has now been removed.\n. Class.extend has been deprecated.  Please use Kinetic.Util.extend instead.  Here's an example class that extends the Shape class:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/shapes/Circle.js\n. +1 v3.x was using a very slow class extender.  It has since been replaced with Kinetic.Util.extend.  Please take a look at some sample shape classes for examples:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/shapes/Circle.js\n. Actually, this is a legit issue:\n\nhttp://jsfiddle.net/qPWja/\n\nneed to call getTextWidth()\n. right.  if you set the width and height property, you're essentially defining a bounding box that the text must fit inside (like a max width and height).  It's not called maxWidth and maxHeight, though, for consistency.  getTextWidth() returns the width of the longest text string in a multi line string.  getWidth() returns the width set by the user, or the calculated width which takes into account padding. \n. cool app!\n\nCurrently I do not intend to support the capturing phase.  Your use case could be easily handled by listening for an event on a Kinetic Node, and then attaching an event handler that traverses the children and does something with each, like this:\n\nnode.getChildren().each(function(child) {\n  // do something with each child, or traverse downwards further\n});\n. Thanks!  I squeaked this one into 4.7.4 because I had to release a hotfix.\n. how odd, I'll fix this and release v4.7.4 this weekend if there's an issue.  Strangely, I have several unit tests that cover touch events which are passing.  Stay tuned.\n. figured it out.  It turns out that KineticJS techincially has had this bug all along, but it never surfaced until the _setPointerPosition() method was refactored in v4.7.3.  The problem was that I was assuming that the touchend event returns a touches array from the event obect which contains one touch element, which contains the touch position.  This is incorrect.  After the refactor, since the touches array length is zero for the touchend event, the x and y coordinates were being defaulted to 0, which does not intersect your shape (unless your shape intersects 0,0) and therefore doesn't execute the touchend event.\n\nI'm adding some tests around this use case and will psh out v4.7.4 shortly.\n\nThanks!\n. v4.7.4 is now available on kineticjs.com.\n\nThanks again!\n. this would be a great stackoverflow question.  Can you repost this there?  Github issues are for bugz\n. btw, I think you're looking for drag bounds: http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-bounds-tutorial-with-kineticjs/\n. Try updating to the latest version and see if it's still an issue.\n. Thank you for this!  This is quite involved, so I'll need to look closely as soon as I get a chance.  Stay tuned.\n. This is actually a bug with chrome - it doesn't apply shadows correctly to elements copied from a buffer canvas (while all other browsers do).  The next version of kinetic will offer some options to get around this, but ultimately it's an issue with Chrome.\n. 4.7.2 includes logic to essentially fix a bug with the w3c spec in regards to shadows.  If you draw a shape that has both a stroke and fill, and you apply a shadow, the shadow is applied to the stroke and fill separately.  For this case, 4.7.2 draws the shape onto a buffer canvas, copies the result onto the visible canvas, and then applies a shadow.  While this produces the correct result, it's slower than drawing directly onto the scene canvas.\n\nTo remedy this, 4.7.4 will offer a config option to lazily render shadows, such that the result isn't quite correct, but it's performant.\n\nHere is the logic that determines if a buffer canvas is needed:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Shape.js#L221\n\nIn the meantime, if you avoid this condition, you can avoid using the buffer canvas copy.  You can also get around this by caching your shapes with toImage().  \n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-shape-caching-with-kineticjs/\n. Way cool!  I'll take a look as soon as I can\n\nEric\n\nSent from my iPad\n\nOn Nov 6, 2013, at 9:41 PM, Anton Lavrenov notifications@github.com wrote:\n\n> Hello. I made a little plugin that helps me to display html inside canvas.\n> Reason: it is hard to display some html elements inside kineticjs stage, because:\n> 1. I have to create element and take care about positions.\n> 2. It is REALLY hard to make it draggable - I have to use external libs.\n> \n> https://github.com/slash-system/KineticJS.HTML\n> Demo: http://jsfiddle.net/lavrton/3Tybj/\n> Note: html is displaying as IMAGE!\n> \n> Does it usefull for someone else?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. Can you create a demo page for ths?\n. Thank you!\n. This isn't a bug with Kinetic.  It's a bug with earlier versions of Android:\n\nhttp://www.html5gamedevs.com/topic/114-canvasclearrect-bug-in-android-stock-browser/\n\nThe work around is to define your layer and stage, and then add layers to the stage with a timeout (I used 50ms and this worked for me)\n. I can verify that drag and drop on Android is messed up right now - it's buggy and jumps.  I discovered that the problem is that touchmove and mousemove and interfering with one another (on Android, apparently both are firing).  Also, drag and drop leaves behind a ghost shape.  Looking into this.\n. fixed:\n\nhttps://github.com/ericdrowell/KineticJS/commit/8fcd882ba5d2da288c846d9a76911729e7d56728\n\nI didn't realize this, but Android was detecting both touch and mouse events which was causing issues. Also added touchmove throttling to improve drag and drop performance.\n. Thanks again!\n. thank you!\n. can you be a bit more specific here?  what exactly is not working as expected?\n. did you mean to close this ticket?  Reopening it just in case.\n. can you repost this on Stackoverflow so that other people can see the answer? (this is a general question, not a bug)\n. reopening because I still want to track this.\n. Thank you guys for looking into this. I'll have a patch for this soon. Chrome seems to break canvas functionality on a pretty regular basis. I guess they don't do any testing before releases\n. sorry guys, haven't been able to look into this yet.  I'm planning on taking a look tomorrow.  Sorry for the delay!\n. unfortunately, I can confirm that Google Chrome is the buggiest browser out there in regards to HTML5 Canvas.  They seem to break things with every release.  Even simple things like drawing circles!\n. +1\n. thank you!\n. You're correct, assuming that there are no other animations running alongside the sprites.  For cases when you are running other animations, tweens, or dragging and dropping stuff, while sprites are animating, you don't want to only refresh a layer when a sprite is updated.  Also, for people who are using Sprites with different frame rates, the layer redraw rate is no longer constant.\n\nEssentially, you have a special use case, in which the only thing driving layer redraws are sprite animations, and each of your sprites have the same frame rate.  What I need to do, is to add logic that detects this condition, and then redraws layers only when the sprites update.  The moment that another animation or tween is detected on the same layer, Kinetic would have to switch to the current model.  I'll add this to my todo list, thanks!\n. Thank you!\n. I'm not sure if I ever tested stage cloning.  I'll add this to my todo list, thanks!\n. Yikes that looks pretty awful.  I'll try and take a look tonight or tomorrow to see what's going on.\n. I am SO glad you brought this up.  Thank you!\n\nSo first off, I do have some perf tests in place, but they don't benchmark performance for really old versions of Kinetic (v3.6.2 is ancient).  So I haven't seen the extreme perf difference.  You are right, newer versions of Kinetic are about 2-4x slower than 3.6.2.  Believe it or not, v4.7.4 is a bit faster than 3.6.2 if it weren't for a few features.  On my system, your 3.6.2 test was running at about 36fps, and the 4.7.4 was running at 8fps.  Here's a breakdown of new features that are causing the perf issue:\n\n1) each layer redraw actually draws the shape on two canvases, a scene canvas and a hit canvas.  This enables nearly instantaneous event detection.  Event detection was extremely slow in versions prior to 4.0.  However, this can be disabled by setting listening = false for each shape, or at the stage level.  This brought the fps up to 14\n\n2) newer versions of Kinetic support grouping and node nesting, and therefore theres a bit of transformation matrix math that's needed for each redraw each time a transformation property is changed (i.e. position).  Disabling grouping gets us up to 22fps (this is not yet a feature built into KineticJS)\n\n3) newer versions of KineticJS support event pub/sub, which means that you can hook into attr changes.  Each time an attribute changes, a before and after event is emitted.  disabling these events gets us up to 24 fps (not yet a feature in KineticJS)\n\n4) setPosition() is a lot more flexible now.  you can do setPosition(x, y), setPosition([x, y]), setPosition({x: y}), and even setPosition(n) which sets both x and y.  While convenient, this incurs a per overhead.  Disabling this features saves another 2fps and gets usu up to 26fps\n\n5) Now for the big perf problem.  Newer versions of KineticJS support all kinds of different stroke and fill styling options which older versions of Kinetic would drool over.  This logic is handled in the _fill and _stroke methods here:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Context.js#L492\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Context.js#L526\n\nnone of these options were available with v3.6.2.  if youw anted to swap out or change stroke and fill styles, you'd have to do so in your custom draw function.  This means that the developer would have to do a lot more work.  Disabling _fill and _stroke, and just filling the rectangle directly saves us a whopping 13fps, which gets us up to 39fps\n\nso, technically you can bypass stroke and fill by doing something like this:\n\n```\n      return new Kinetic.Shape({\n        drawFunc: function(context) {\n          var _context = context._context;\n          _context.beginPath();\n          _context.rect(0, 0, 10, 10);\n          _context.closePath();\n          _context.fillStyle = 'red';\n          _context.fill();\n        },\n        listening: false\n      });\n```\n\nyou can access the raw context of the KineticJS context with _context.  So, if you don't want the convenience of all the styling options with 4.7.4, you can draw your stuff manually with native canvas methods\n\nSummary:\n\nyou've already avoided the fillStrokeShape(this) method in your tests, so you can gain another perf improvement by setting listening: false on the stage.  This should get you another 6fps.  This is soemthing that I've been meaning to do automatically.  When there's no events bound to an element, it should automatically not be listening.  I'll make this chagne soon\n\nThe transformation matrix logic is heavy.  That killed 8fps.  I might consider giving developers the option to disable node nesting and bypass the transformation matrix logic entirely.  This would be a huge effort, but might be worth it\n\nDisabling automatic event firing will get us another 2fps.  I may need to introduce a mode where you have to explicitly subscribe to events.  This would be a lower ROI effort so it might be awhile before I get to this one.\n\nFinally, the overloaded functions, and automatic conversion of different arguments with setPosition (and other methods) reduces our fps by about 2.  While convenient, maybe it's not totally necessary.  I might remove this entirely and just force people to use a certain format.\n\nLooks like I have a lot of work in store :P\n. uncommenting context.fillStyle just means that the html5 canvas context is doing more work because it's setting the fill style over and over (which is needed if you want colored rectangles)  This isn't a side effect of KineticJS, it's just plain old canvas.\n\nfor now, the easiest way to get a perf boost is to set listening=false on each shape.\n\nP.S. this ticket has inspired me to release v5.0.0.  I'm currently working on addressing each of the issues mentioned in our discussion.\n\nStay tuned\n. v5.0.0 is now more than 2x faster than v4.7.4, and is even faster than v3.6.2.\n\nCheck the change log for some of those changes:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n. I haven't updated the performance tutorials yet, but you can get huge perf boosts by..\n- setting transformsEnabled = 'position' on the shape\n- setting hitGraphEnabled = false\n- caching where possible\n. Just so happens I'm planning on doing something very similar for v4.8.0 :)\n. +1 yep, I added the new cache() method as requested :P\n. I'll have to look into this.  Each layer has its own canvas.  after creating a layer, you could try setting the canvas with layer.getCanvas()._canvas = yourCanvas.  the \"_canvas\" property points to a native canvas element.\n. Cool!  Thank you!  I'll probably rename this to Arc, though.\n. You rock!  Thanks again for the high quality pull requests.  I've been meaning to add a ring shape but hadn't gotten to it yet.\n\nThank you!!\n. This is awesome!  However, this is more appropriate as a 3rd party plugin.  KineticJS is made up of:\n\n1) core shapes\n2) KineticJS managed plugins\n3) 3rd party plugins\n\nA cross hair would fit much better as a 3rd party plugin.  Would it be possible for you to create a github repo for this, and I can link to it from KineticJS?  I will be putting together a plugin gallery soon.\n\nThanks!\n. this is technically a bug with chrome.  The w3c spec for shadows is very wonky.  If you create a shape with both a fill and stroke, and you apply a shadow, you'll get a double shadow.  KineticJS fixes this bug in the spec by creating a temporary buffer canvas.  Google chrome, unfortunately, doesn't apply the shadow blur correctly to things drawn onto a buffer canvas.  This only occurs if your shape has both a fill and stroke.  I'll have a work around for chrome in v5.0.2\n. You can do this:\n\nshape.setFill('rgba(255, 100, 113, 0.5');\n\nYou also have access to the RGB components directly.  Here are a few examples:\n\nshape.setFillRGB({\n  r: 255,\n  g: 12,\n  b: 100\n});\n\nshape.setFillR(255);\nshape.setStrokeG(114);\n\nHere's the shape docs:\n\nhttp://kineticjs.com/docs/Kinetic.Shape.html\n\nIn version 5.0.0, or 5.0.1, I plan on adding support for alpha as well.\n. it's impossible to serialize a JavaScript function, as mentioned in the docs and tutorials.  You have to reset images and functions after deserializing a JSON string.\n\nyou can set the dragBoundFunc like this:\n\nnode.dragBoundFunc(...);\n\nDocs are here:\n\nhttp://kineticjs.com/docs/Kinetic.Node.html#dragBoundFunc\n. right, when I said 'impossible\" I really meant \"not logical\"  - you serialize data, not code.  Why not just serialize all of the JavaScript for your whole app?\n\nEric\n. wow!  Thank you for taking a look at these.  I'm planning on doing a 5.0.1 release in a couple of weeks, so I'll definitely include these.  I'll pull this in about a week\n\nThanks again!\n. Excellent work!  Thanks again so much for doing this.\n. I want to stay away from cascading because I think it will cause more problems than it solves.\n\nIf you take advantage of Kinetic.Collections, which is similar to jQuery, you can do:\n\ngroup.find('Image').each(function(node) {\n  node.width(9);\n});\n\nsoon, I plan to support this:\n\ngroup.find('Image').width(9);\n\nbut I haven't set that up yet.\n. Hi guys.  Believe it or not, there was alot of requests for this.  In order to lighten the KineticJS API, I wanted to support a single unit for all attrs.  This also greatly simplified lots of portions of the code base.  Most people seemed to want degrees for rotation.  I looked at a lot of people's code on stackoverflow and other places, and I saw a lot of people using rotateDeg() or rotationDeg().  It seemed natural to make the default unit in degrees to accommodate most people's use case.  \n\nThere have been many other threads with people unhappy with this change.  This is one of those topics where there is so much backlash that may have to go back and support both cases again :/\n\nI'll add this to our todo list, but it's a sucky change \n. Thanks @jfollas . And to re-iterate, I've heard loud and clear that a lot of people are upset about the radian to degree change.  But again, I think most people are frustrated by the change because it required lots of changes to their codebase, and not because it was necessarily a bad change.  I'm still keeping a close eye on this topic, don't worry.\n. @jfollas had a brilliant idea - we introduced a new config option that lets you choose which angle unit you'd like to use.  the default is degrees, but you can switch to radians if you like.  You can change to radians like this:\n\nKinetic.angleDeg = false;\n\nhere's the change: https://github.com/ericdrowell/KineticJS/commit/e5562f5dbbef8de248d2046131172c3c5a27cc70\n. agreed - this is something that's not fully quite worked out yet.  The idea is to have a transform option that ignores parent transforms for performance reasons.  I may need to introduce another option like:\n\nshape.ignoreParentTransforms();\n\nor something.  Stay tuned on that one.\n. update on this thread - the transformsEnabled property is now deprecated.  In v5.0.0, I was moving into a direction where devs have to configure lots of individual properties to tweak performance.  This doesn't scale.  In v5.1.0, you can now use fast layers, which render about 2x faster than normal layers.  All of the performance tweaks are done automatically.  You can create a fast layer like this:\n\nvar layer = new Kinetic.FastLayer();\n. v5.0.0 had several API changes.  please check the changelog, docs, and tutorials.\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/\n. yep, check the change log:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n\nKinetic promoted to a new major version because there are a lot of API changes.  Please check the tutorials for updated examples:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/\n. that's incorrect - the docs say that the rotation should be in degrees:\n\nhttp://kineticjs.com/docs/Kinetic.Shape.html#fillPatternRotation\n\nThe tutorials on HCT are probably out of date though - I still need to get those updated.\n\nThanks!\n. This is now fixed via: https://github.com/ericdrowell/KineticJS/commit/e5562f5dbbef8de248d2046131172c3c5a27cc70\n\nThanks for catching this!\n. shoot I thought this was handled.  I'll add this to the 5.0.1 release which is a patch coming out soon\n\nThanks!\n. 1) This is the expected behavior.  the Cache bounding box x,y is relative to the default position, which for the case of a circle, is the center point.  Take a look at the cache tutorial here:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-shape-caching-with-kineticjs/\n\nYou'll notice that you need to set the x,y position of the cache, along with the star offset.\n\n2) that's expected behavior.  the cache bounds that you set need to account for stroke width.  This can't be done automatically because of several stroke side effects such as line Join, and tensions.\n\n3) expected behavior\n\nThanks!\n. Thanks for looking into this!  I was hoping that this could be solved without adding pixel ratio logic to the Node class.  The Canvas class should contain all pixel ratio adjustments.  I'll take a look as soon as I get a chance.\n\nThanks!\n. I guys, just wanted to let you know that I've verified this is a problem.  It's a pixel ratio issue.  As a work around, before you create any stages or layers, you can set the pixel ratio to 1:\n\nKinetic.pixelRatio = 1;\n. This is fixed now:\n\nhttps://github.com/ericdrowell/KineticJS/commit/c2e138c6f4625a084c1e8d732e3f888ff968feda\n\nso here's the deal.  When users change the zoom level, it affects the pixel ratio, and causes artifacts on the canvas.  As of today, there does not appear to be a way to reliably detect user zoom levels with JavaScript for modern browsers.  There are a few libraries out there that are able to do it for older browsers, but not newer ones.  Therefore, for desktop browsers, I'll force the pixel ratio to 1.  For mobile experiences, the pixel ratio will be calculated and used to create crisper renderings on devices with a pixel ratio > 1.\n\nThis will be included with the next release.  Until then, just use Kinetic.pixelRatio = 1 as described above.\n. @nicolasloupias this is supported as of v4.7.0\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log#wiki-470-sep-16-2013\n\nI would suggest biting the bullet and upgrading to v5.0.1 before you get too behind\n. The next release will be v5.0.2 or v5.1.0, depending if I introduce the new FastLayers or not.\n. I don't believe the zoom issue a problem for mobile.  Is that correct?\n. yikes, you're right.  I was planning on using an alternative to rgbToHex anyways.  I'll get this fixed up.\n. It's probably not optimized. Kinetic can run at nearly native speeds. Ill take a look soon. \n. Haven't forgotten about this thread - I need to put together a demo for you guys.\n\nBy default, KineticJS has a lot of stuff enabled that will slow down performance, like node nesting and event handling.  \"faster\" libraries probably don't handle these by default.  With Kinetic, however, you can disable these features to produce nearly native speeds.  I still need to get some more perf tutorials out there for you guys - just slammed with a million other things :P\n. First of all - awesome demo!  Do you mind if I repost this on HTML5 Canvas Tutorials?  I would just need your twitter handle, author bio, gravatar link for your image, and a link to your website if you have one.\n\nSecond of all - nice job, you did a pretty good job of fine turning performance.  The disableHitGraph is actually a layer property, but it doesn't matter in your case sense your using drawScene()\n\nAlso, on my macbook air, it was running at 30fps for 1000 bunnies.\n\nSomething else to watch for every soon - v5.02 will support something called a StaticLayer.  Static layers are like normal layers, except they don't handle node transforms or events.  For people who just want to draw a ton of stuff on the canvas and don't care about interactivity, StaticLayers will provide the fastest rendering performance possible.  \n\nI might go as far as to create a StaticStage, which has no layers either.  It would basically be the KineticJS api that draws directly onto a single canvas.\n. agreed - I'd like to keep the event support as minimal as possible, and users can use something like HammerJS if they want additional events.\n. yep this is a bug, and will be fixed with the 5.0.1 patch coming out in about a week or so. \n\nThanks!\n. scratch that, I forgot that it's already fixed in Github.  when 5.0.1 comes up, just upgrade and you should be good to go.  \n\nIf you need a quick fix, be sure to manually set your fillPatternScaleX and fillPatternScaleY values.  Otherwise they are defaulted to 0, which causes the shape to be invisible.\n. Thanks for this!  I'll take a look as soon as I get a chance.\n. can you please provide a jsfiddle example?\n. can you repost this on stackoverflow, with a jsfiddle?  for implementation questions, stack overflow is a much better forum than github.  Also, I noticed that you're passing arguments to the draw() method.  The draw method takes no arguments.\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Node.js#L1465\n. hah, there's a typo here:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Shape.js#L46\n\nthis line listens for shadow changes, and then clears the hasShadow cache when one occurs.  It's listening for shadowEnabledChanged instead of shadowEnabledChange :P\n\nI'll fix this up by the next version\n. scaling with a negative value works for me.  It's working in this tutorial as well:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-scale-animation-tutorial/\n\ncan you post a jsfiddle?  There's probably something else wrong.\n. Thanks for reporting this!  Your solution of getter.call(this, {attrs: {}}) doesn't quite work because you're calling the getter method from the \"this\" context, but passing the \"{attrs: {}}\" object as an argument, which will be ignored (getter methods don't require arguments)\n\nThe fix is to remove the attr from attrs, use getter.call(this) to extract the default value from the getter method, and then restore the attr.  I added a unit test as well.\n\nThank you!!!\n. nice @lavrton!\n\nCurrently, I don't have plans to archive old documentation.  This may change if enough people demand it :P\n\nHopefully (keeping fingers crossed) v5.x is the last big API change to the library.  It's now very close to my vision of what KineticJS should be, so I don't suspect it will change much from here on out.\n. +1 @kzhdev \n. Thank you!\n. currently, the plan is to keep all getters and setters.  This enables you to override specific getters and setters, and the overloaded methods will keep working.  The overloaded methods, like stroke(), in turn call setStroke() and getStroke()\n. in other words, the getters and setters are the source of truth, and the overloaded methods are just convenience methods.  However, I purposely took out the explicit getters and setters from the documentation in order to cut it down in half.  The docs were getting huge, and I want the API to be as simple as possible.\n. you need to use layer.draw() to redraw layers.  Here's an example:\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-set-alpha-with-kineticjs/\n. I think circle.draw() used to in turn do a layer.draw for you, but I believe this was removed.  \n. This was just fixed along with a new flag that lets devs choose if angles are in degrees or radians.  Thanks for catching this:\n\nchange: https://github.com/ericdrowell/KineticJS/commit/e5562f5dbbef8de248d2046131172c3c5a27cc70\n. Thanks!!\n. taking a quick look right now.\n. Can you give us more information about how your app works?  This isn't enough.\n\nHow many stages?  how many layers?  how many groups?  What kind of images?  How big are they?  Can they be put into a sprite image?\n. oh, the problem is when you're including your custom filter.  You currently can't just add it after you include the kineticjs file.  Filters must be defined after the Node class is defined, but before the Image class.\n\nThis is something that I need to fix or else other people will have the same headache.  I'll have a fix for this in the next version\n. for a work around, just use this instead:\n\nKinetic.Factory.addGetterSetter(Kinetic.Image, 'myFilterVal', 0, null, Kinetic.Factory.afterSetFilter);\n\nsince you are using an image, this will add the myFilterVal attribute directly to the Image class.\n. This should be fixed now.  please refer to this ticket for more info:\n\nhttps://github.com/ericdrowell/KineticJS/issues/753\n. Thanks @lavrton \n\nSorry for the confusion guys.  In an effort to simplify the KineticJS api, and improve performance, I removed support for Number and Array inputs.\n. Thank you guys!\n. Heya!\n\n1) you're right, looks like this missed\n\n2) it was done for performance reasons\n\n3) you're not the only one who dislikes the change - I'm considering changing it back\n. The performance cost of detecting the user input and converting very large arrays of points to another format is actually noticeably expensive when you're dealing thousands of data points that are updated several times per second :P\n\nThere are also lots of cases when you just want to change a single point inside the array of hundreds of points.  Since the input is guaranteed to be an array of integers, with no conversion, this gives people the opportunity to change a single point by reference, without resetting the entire array each time.\n\ni.e.\n\nvar points = []; // huge array of points\n\npolygon.setPoints(points);\n\npoints[9998] = 5;\npoints[9999] = 6;\npolygon._clearCache('points');\nlayer.draw();\n\nAlso, I wanted it to be easier to configure points, i.e.\n\nvar polygon = new Kinetic.Polygon({\n  points: [{\n    x: 1,\n    y: 2\n  },\n  {\n    x: 3,\n    y: 4\n  }]\n};\n\nvs.\n\nvar polygon = new Kinetic.Polygon({\n  points = [1,2,3,4];\n});\n\nor\n\nvar polygon = new Kinetic.Polygon({\n  points = [\n    // x, y\n    1,2,\n    3,4\n  ];\n});\n\nThis is one of those cases where I was trying to balance flexibility vs. performance.  I'm still open to changing it back, however, if more people speak up about this.  Let's give it a little more time.\n. Here's another idea - maybe this will be a win win situation.\n\nWhat if I provide array methods that enable you to modify the points array?  i.e.\n\npolygon.push(point);\npolygon.pop();\npolygon.shift();\npolygon.unshift(point);\npolygon.insert(point, position);\npolygon.remove(position);\npolygon.concat(arraOfPoints);\n\netc.\n\nThoughts?\n. you got it.\n. Common question. You need to use mouseenter and mouseleave events.  jquery does the same thing \n. +1 this is the expected behavior.  This is a typical pattern for libraries/frameworks - i.e. the framework should not modify the container element in anyway, or any other DOM elements outside of the container.  Everything inside the container, though, is fair game.  You need to move your content outside of the KineticJS container.\n. Hey @lavrton, can you explain what exactly is slow?  Are you just referring to drag and drop?  The event detection algo is actually much faster than other libraries.  It can detect shape intersections for millions of nodes on the screen.\n. Look into the hit graph and scene graphs.  When things are drawn with Kinetic, shapes are drawn on both a scene graph (what you see) and a  hit graph (used for event detection)\n. interesting, okay.  I don't believe the problem is getIntersection itself, but rather the frequency that it's called.  i.e., we can play around with throttling the getIntersection call on touchmove.  For that matter, maybe we should throttle all touchmove events, since we know they will be used with mobile devices.  Do you want to take a look at this?  Maybe we could create a throttle function and put it in Kinetic.Util (something similar to underscore's throttle, or maybe even the exact same one) and then hook it up with the touchmove fire event here:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Stage.js#L539\n. no don't do that, you're essentially indirectly throttling the event detection.  If people are listening for the draggableChange event, they will get some very odd results\n. I'll take a look at throttling, and might hook it into the batchDraw function as well (which is technically doing throttling)\n. yea, I know you were doing it for testing purposes, but just wanted to make sure.\n. really cool jsfiddle demo btw!  Can I make a lab out of that (you would be the author)\n. no no, I like the comparison\n. here it is:\n\nhttps://github.com/ericdrowell/KineticJS/commit/8fcd882ba5d2da288c846d9a76911729e7d56728\n\nSo I've been working on Android issues this morning, and made a lot of improvements.  I discovered that Android was listening for both touch and mouse events, which not only caused some weird issues from time to time, but also really hurt performance.  I added throttling to both mousemove and touchmove.  I think both of these should help with Android perf a lot.  Can you pull the latest changes and give it a try on your device?\n. for drag and drop, I wonder if we can avoid it entirely.  I think at one point I was, but I don't remember why I put it back in.  i.e., there's no reason to detect for events on other shapes when you're dragging and dropping.\n. Also, in your hack, you were essentially throttling down to 50ms.  My throttle is 17ms.  You could try changing 17 to 50.\n. Cool!  Thanks!\n. cool thank you!\n. +1\n. +1 Thanks @lavrton.  This is my fault, I didn't have any tutorials that covered the setAttr() method.  I'll revamp the KineticJS tutorials soon.\n. yes, odd, I'm not sure how this could be happening - each time the scene function is executed for the  Line class, it just loops through the points array and then closes the shape at the end:\n\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/shapes/Line.js#L75\n\nAs @ippo615  mentioned, a jsfiddle would be most helpful here.\n. Ah, I think it makes sense for opacity to affect cached shapes.  I'll fix this up.\n. can you repost this on stackoverflow?  This is an implementation question.  I would like for other people to see the answer.\n. stackoverflow.  It's linked to from the kineticjs homepage.\n. Can you try v5.0.2 or v5.1.0?  Those should be a bit better\n. ah yes.  Except, I don't like that we are tacking on the event type as a second argument.  It either needs to be added to the native event object as some other key (like eventType) or we need to split up the native event object from the Kinetic event object.  I'm favoring the latter at the moment.  Still thinking on this.\n. On second though, I think we should continue to reuse the native event object, but add a kinetic namespace to it.  I'll make that change soon\n. fixed. \n\n@lavrton using two arguments gets weird when you are trying to fire custom events with the fire() API.  \n\nKinetic will now pass around a Kinetic event object, which has a reference to the native event object, if it's needed.  i.e.\n\n```\nevt = {\n  target: Kinetic.Circle,\n  type: 'tap',\n  evt: NativeEventObj\n};\n```\n. @lavrton  can you take a look at the dispatchEvent that you added for HammerJS and let me know if it looks okay to you?\n. change: https://github.com/ericdrowell/KineticJS/commit/47ecb4559de2891c2687a42cd49eb0ce5ff209db\n. and here's a unit test that shows what the API looks like now:\n\nhttps://github.com/ericdrowell/KineticJS/commit/ddf34d0af9b84b217e1a4d9d4e8e43b932901b00\n. agreed this is a big API change.  Luckily, we are already releasing an API change version (5.1.0) so we can sneak it in.  I'll be sure to address this clearly in the change log under the API section.\n. Thanks!  Sounds logical.\n. Thanks @lavrton !  I'll be releasing v5.1.0 within about 3 or 4 days which will patch up any regression issues with v5.0.2\n. @lavrton what do you think?\n. yep!\n\nJust saw that and changed it.  https://github.com/ericdrowell/KineticJS/commit/0800f1e31ab1848920b1733daa255930b7e9941e\n. Upgrade to v5.1.0, which was released yesterday - it fixes the drag and drop perf problem on Android.  Please reopen this ticket if there's still an issue.\n. oh shoot, I meant v5.0.2.  I'll look at this.\n. oh, for mobile devices, the pixel ratio is automatically taken into account.  To disable this adjustment, you can set Kinetic.pixelRatio = 1.  Let me know if this fixes the issue.\n. I'm pretty sure this is the issue so I'm going to go ahead and close this one while I'm here.  Please reopen if this doesn't help.\n. You should place it at the top of your app, before you create any stages or layers.  It's a global KineticJS config.  I'll look into this as well to see if I'm missing something.\n. Cool!  no problemo.  Rest assured that KineticJS will continue to get faster and faster :P\n\nEric\n. will do, sorry about that!\n. done.\n. Can you explain a bit more?  What exactly are you wanting to do?\n. Hiya!  This isn't a bug, it's an implementation question.  Can you repost this on stackoverflow.com?  That way, others can see the answer (plus you'll get more responses)\n. ",
    "magicienap": "When will a link to the GitHub project be made on the official website?\n\nAlso, woud it be a great idea to document the config object in the official documentation? If the answer is yes, I can document it (with the tables in the tutorials).\n\nHow do you generate the documentation with JSDoc? It would be possible to put it in the Rakefile, so the user could generate the documentation (maybe in the /doc directory).\n\nWhen the GitHub project will be \"official\", should we create bug reports in the \"Issues\" section or continue to post them on the forum?\n\nWill there be tags for each version?\n\nLast question: was it OK to find this GitHub repository and propose this pull request?\n\nEdit: Would it be more appropriate to use Thor in place of Rake?\n. I'm going to do that. I think I will switch to Thor, because it can take parameters from the command line. I will send you a new pull request when it will be done.\n. See #2! I updated it!\n. When will a link to the GitHub project be made on the official website?\n\nAlso, woud it be a great idea to document the config object in the official documentation? If the answer is yes, I can document it (with the tables in the tutorials).\n\nHow do you generate the documentation with JSDoc? It would be possible to put it in the Rakefile, so the user could generate the documentation (maybe in the /doc directory).\n\nWhen the GitHub project will be \"official\", should we create bug reports in the \"Issues\" section or continue to post them on the forum?\n\nWill there be tags for each version?\n\nLast question: was it OK to find this GitHub repository and propose this pull request?\n\nEdit: Would it be more appropriate to use Thor in place of Rake?\n. I'm going to do that. I think I will switch to Thor, because it can take parameters from the command line. I will send you a new pull request when it will be done.\n. See #2! I updated it!\n. ",
    "diakopter": "Yeah.  before passing the event to the event handlers, you might want to wrap the original stopPropagation method so you can store a reserved attribute marker (propagationStopped or whatever) on the event, unless it already does something like that in the browsers (I don't remember).\n. Yeah.  before passing the event to the event handlers, you might want to wrap the original stopPropagation method so you can store a reserved attribute marker (propagationStopped or whatever) on the event, unless it already does something like that in the browsers (I don't remember).\n. ",
    "yusufsafak": "Hi,\nI think it would be useful for mouse event detection on transparent area of an image.I patched kineticjs code like that https://github.com/yusufsafak/KineticJS/commit/cc578cc4a80c3e54dd0cd7d6f2d5bd9b33882902 and  my image plugin demo link http://yusufsafak.github.com/KineticJS_experiments/canvas_image_transparent/\n. Hi Eric,\n\nI said that adding extensible isPointInPath feature we have a chance to change event detection. I only demonstrated mouse event detection on transparent area of an image using this feature maybe someone will use different areas.\n\nI also agree with you ,ctx.getImageData technique is less performance. But in my demo, I convert each image data to a simple array only at the first draw (Kinetic.GlobalObject.ImagesData[shape.name][row][column]=1(not transparent) or 0(transparent) as AvesEngine did http://www.youtube.com/watch?v=_RRnyChxijA#t=28m30s )  and  using  off screen canvas technique a huge performance gain when drawing and getting image data (http://io-2011-html5-games-hr.appspot.com/#46 , http://www.html5rocks.com/en/tutorials/canvas/performance/). Then  I use this array on every event  for checking mouse event position pixel is transparent or not on each my image shape. \n\nI created a new quick demo using 100 images with no huge performance decrease. (http://yusufsafak.github.com/KineticJS_experiments/canvas_image_transparent/)\n\nThanks. \n. Ok I changed my code as you said.\n\nAbout pixel detection maybe you are right. \n\nI have a one question about dragging and event detection process. While dragging process, we know which shape is dragging but we continue checking which shape is under mouse position in _detectEvent function. Why? I found a [discussion](http://www.kineticjs.com/forum/viewtopic.php?f=4&t=214) related to this issue but I didn't see any change about event detection issue.\n\nThanks\n. Hi,\nI think it would be useful for mouse event detection on transparent area of an image.I patched kineticjs code like that https://github.com/yusufsafak/KineticJS/commit/cc578cc4a80c3e54dd0cd7d6f2d5bd9b33882902 and  my image plugin demo link http://yusufsafak.github.com/KineticJS_experiments/canvas_image_transparent/\n. Hi Eric,\n\nI said that adding extensible isPointInPath feature we have a chance to change event detection. I only demonstrated mouse event detection on transparent area of an image using this feature maybe someone will use different areas.\n\nI also agree with you ,ctx.getImageData technique is less performance. But in my demo, I convert each image data to a simple array only at the first draw (Kinetic.GlobalObject.ImagesData[shape.name][row][column]=1(not transparent) or 0(transparent) as AvesEngine did http://www.youtube.com/watch?v=_RRnyChxijA#t=28m30s )  and  using  off screen canvas technique a huge performance gain when drawing and getting image data (http://io-2011-html5-games-hr.appspot.com/#46 , http://www.html5rocks.com/en/tutorials/canvas/performance/). Then  I use this array on every event  for checking mouse event position pixel is transparent or not on each my image shape. \n\nI created a new quick demo using 100 images with no huge performance decrease. (http://yusufsafak.github.com/KineticJS_experiments/canvas_image_transparent/)\n\nThanks. \n. Ok I changed my code as you said.\n\nAbout pixel detection maybe you are right. \n\nI have a one question about dragging and event detection process. While dragging process, we know which shape is dragging but we continue checking which shape is under mouse position in _detectEvent function. Why? I found a [discussion](http://www.kineticjs.com/forum/viewtopic.php?f=4&t=214) related to this issue but I didn't see any change about event detection issue.\n\nThanks\n. ",
    "mzj": "Eric, thank you for responding so quickly. I'm literally unable to use this (great) framework, on the project I'm currently working on, because of this issue. \nAnd my Javascript/Kinetic knowledge isn't that good to actually try and fix the issue myself.\n. Wow thank you! You just made my day/week :)\n\nActually your hint was enough. It was pretty simple after knowing where to look :)\n\nAfter changing these two lines:\ntop  += obj.offsetTop;\nleft += obj.offsetLeft;\n\nto this:\ntop  += obj.offsetTop  - obj.scrollTop;\nleft += obj.offsetLeft - obj.scrollLeft;\n\nAlthough now, I need to make it work with jScrollPane. But that's another story.\n\nAnyway thank you again, I owe you a beer or two :)\n. Eric, thank you for responding so quickly. I'm literally unable to use this (great) framework, on the project I'm currently working on, because of this issue. \nAnd my Javascript/Kinetic knowledge isn't that good to actually try and fix the issue myself.\n. Wow thank you! You just made my day/week :)\n\nActually your hint was enough. It was pretty simple after knowing where to look :)\n\nAfter changing these two lines:\ntop  += obj.offsetTop;\nleft += obj.offsetLeft;\n\nto this:\ntop  += obj.offsetTop  - obj.scrollTop;\nleft += obj.offsetLeft - obj.scrollLeft;\n\nAlthough now, I need to make it work with jScrollPane. But that's another story.\n\nAnyway thank you again, I owe you a beer or two :)\n. ",
    "gzoller": "Guys, I'm also dead-stop with this issue.  As of 3.9.3 it's not working for me.  If I use the jsfiddle example above (in jsfiddle's site) it works fine.  If I cut 'n paste into a local file and call it up on my browser (FF/Chrome) it's not working.  I can scroll the window and the circle is detected where it was before the scroll, not after.\n. Got it.  There was one subtle difference that made all the difference:\nposition:relative set on the container div.\nWithout it the scroll behavior doesn't work.  With it things work fine.\n\nOn Wed, Apr 18, 2012 at 4:03 PM, ericdrowell <\nreply@reply.github.com\n\n> wrote:\n> \n> Can you post your code on a web server somewhere so I can take a look at\n> it there? (since you're saying that the code works on jsfiddle but not your\n> local) KineticJS should be supporting scrollable containers and scrollable\n> parent DOMS.  Thanks!\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/ericdrowell/KineticJS/issues/5#issuecomment-5208719\n. Guys, I'm also dead-stop with this issue.  As of 3.9.3 it's not working for me.  If I use the jsfiddle example above (in jsfiddle's site) it works fine.  If I cut 'n paste into a local file and call it up on my browser (FF/Chrome) it's not working.  I can scroll the window and the circle is detected where it was before the scroll, not after.\n. Got it.  There was one subtle difference that made all the difference:\nposition:relative set on the container div.\nWithout it the scroll behavior doesn't work.  With it things work fine.\n\nOn Wed, Apr 18, 2012 at 4:03 PM, ericdrowell <\nreply@reply.github.com\n\n> wrote:\n> \n> Can you post your code on a web server somewhere so I can take a look at\n> it there? (since you're saying that the code works on jsfiddle but not your\n> local) KineticJS should be supporting scrollable containers and scrollable\n> parent DOMS.  Thanks!\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/ericdrowell/KineticJS/issues/5#issuecomment-5208719\n. ",
    "ayansg": "I dont have much insight of this great and flexible framework but I was facing the same issue!\n\nI had some wrapper div around the container which was responsible for scrolling:\n\n<div id=\"wrapper\" style=\"height: 600px; overflow: auto;\">\n        <div id=\"container\">\n        </div>\n</div>\n\n\nOne little trick that worked for me was adding position:relative; to the wrapper div and it worked like a magic, at least on FF and Chrome!\n. I dont have much insight of this great and flexible framework but I was facing the same issue!\n\nI had some wrapper div around the container which was responsible for scrolling:\n\n<div id=\"wrapper\" style=\"height: 600px; overflow: auto;\">\n        <div id=\"container\">\n        </div>\n</div>\n\n\nOne little trick that worked for me was adding position:relative; to the wrapper div and it worked like a magic, at least on FF and Chrome!\n. ",
    "cemo": "Eric, I have tried dragBounds but this is not addressing my issue. \n\nLet me to share my use case. I have done a image cropper with KineticJS. It istotally based on canvas api and features such as resize, rotate and crop. The inner rectangle is my cropping area. It has points around the cropper. The points and rectangle are part of the cropper group. So the bounds are depending group and image. \n\nI believe that for advanced cases such a feature could be great. Current solution for boundaries can address many issues but many issues can not solved by it. For example, if the boundary shape is not rectangle, like circle, current solution is very difficult to implement. \n\nThanks   \n. I share my idea at forum Eric as you suggested. :) Thanks.\n\nhttp://www.kineticjs.com/forum/viewtopic.php?f=5&t=408&p=1543#p1543\n. Eric, this issue might be reconsidered. What I need now is aspect ratio for resize. For example consider [this example](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/) . I need either a function to stop dragging of circles or bound them. Can you elaborate on this issue or please help me to change necessary places. I am not sure but seems that [_prepareDrag](https://github.com/ericdrowell/KineticJS/blob/master/src/Stage.js#L789) method will be slightly changed to support a drag bound function or a drag condition function. Drag support is awesome for KineticJS but controlling it is very troublesome. \n. It seems that latest release might addressed this issue If I understand correct.\n\n>  you can now cancel drag and drop during a drag and drop operation using setDraggable(false);\n. Eric, I have tried dragBounds but this is not addressing my issue. \n\nLet me to share my use case. I have done a image cropper with KineticJS. It istotally based on canvas api and features such as resize, rotate and crop. The inner rectangle is my cropping area. It has points around the cropper. The points and rectangle are part of the cropper group. So the bounds are depending group and image. \n\nI believe that for advanced cases such a feature could be great. Current solution for boundaries can address many issues but many issues can not solved by it. For example, if the boundary shape is not rectangle, like circle, current solution is very difficult to implement. \n\nThanks   \n. I share my idea at forum Eric as you suggested. :) Thanks.\n\nhttp://www.kineticjs.com/forum/viewtopic.php?f=5&t=408&p=1543#p1543\n. Eric, this issue might be reconsidered. What I need now is aspect ratio for resize. For example consider [this example](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/) . I need either a function to stop dragging of circles or bound them. Can you elaborate on this issue or please help me to change necessary places. I am not sure but seems that [_prepareDrag](https://github.com/ericdrowell/KineticJS/blob/master/src/Stage.js#L789) method will be slightly changed to support a drag bound function or a drag condition function. Drag support is awesome for KineticJS but controlling it is very troublesome. \n. It seems that latest release might addressed this issue If I understand correct.\n\n>  you can now cancel drag and drop during a drag and drop operation using setDraggable(false);\n. ",
    "christophercurrie": "+1 on this. I get the convenience of having \"FontFamily\" and \"FontSize\" functions, but the current implementation does not allow for alternate font size units (I can't specify pixels or ems, even though canvas supports both), nor font-weight, font-style, etc. From the spec:\n\n> For example, after the following statement:\n> \n> ```\n> context.font = 'italic 400 12px/2 Unknown Font, sans-serif';\n> ```\n> \n> ...the expression context.font would evaluate to the string \"italic 12px \"Unknown Font\", sans-serif\". The \"400\" font-weight doesn't appear because that is the default value. The line-height doesn't appear because it is forced to \"normal\", the default value.\n\nIn the short term, I would rather see the separate functions dropped in favor of \"setFont\" that took values like the above. Yes it'd be more work for the end user, but the extra power would be worth it. Convenience functions that parse the font value could be added later.\n. Sounds good, I look forward to the result.\n. That tutorial is kind of the opposite of what I want. (I did actually try what I _do_ want first, before filing the issue).\n\nThe tutorial demonstrates removing all events of the same type, such as all \"click\" events or all \"mousemove\" events. What I want is to remove all events in the same namespace, regardless of event type. If I've bound \"click.type1\", \"mouseup.type1\" \"click.type2\", and \"click.type3\", and I call `node.off(\".type1\")` (note the leading period), I would want the first two events to be removed (different types but the same namespace), but the last two \"click\" events in different namespaces to be left alone.\n\nDoes this make sense?\n. Is there an open issue for this request, that I can track, or can we reopen this one?\n. No worries, I understand. It's ok if it's lower priority, I just didn't want it to get missed because the issue was closed. \n\nUnfortunately, I'm not free to look at a fix right away, but hopefully in the near future.\n. I understand the sentiment, but not implementing them will severely reduce the utility of KineticJS on the new Surface tablets; I'd have to take steps to somehow trap the Microsoft events and then fake the w3c ones. I somehow doubt that MS will see the light and start implementing the W3C events anytime before Windows 9.\n. +1 on this. I get the convenience of having \"FontFamily\" and \"FontSize\" functions, but the current implementation does not allow for alternate font size units (I can't specify pixels or ems, even though canvas supports both), nor font-weight, font-style, etc. From the spec:\n\n> For example, after the following statement:\n> \n> ```\n> context.font = 'italic 400 12px/2 Unknown Font, sans-serif';\n> ```\n> \n> ...the expression context.font would evaluate to the string \"italic 12px \"Unknown Font\", sans-serif\". The \"400\" font-weight doesn't appear because that is the default value. The line-height doesn't appear because it is forced to \"normal\", the default value.\n\nIn the short term, I would rather see the separate functions dropped in favor of \"setFont\" that took values like the above. Yes it'd be more work for the end user, but the extra power would be worth it. Convenience functions that parse the font value could be added later.\n. Sounds good, I look forward to the result.\n. That tutorial is kind of the opposite of what I want. (I did actually try what I _do_ want first, before filing the issue).\n\nThe tutorial demonstrates removing all events of the same type, such as all \"click\" events or all \"mousemove\" events. What I want is to remove all events in the same namespace, regardless of event type. If I've bound \"click.type1\", \"mouseup.type1\" \"click.type2\", and \"click.type3\", and I call `node.off(\".type1\")` (note the leading period), I would want the first two events to be removed (different types but the same namespace), but the last two \"click\" events in different namespaces to be left alone.\n\nDoes this make sense?\n. Is there an open issue for this request, that I can track, or can we reopen this one?\n. No worries, I understand. It's ok if it's lower priority, I just didn't want it to get missed because the issue was closed. \n\nUnfortunately, I'm not free to look at a fix right away, but hopefully in the near future.\n. I understand the sentiment, but not implementing them will severely reduce the utility of KineticJS on the new Surface tablets; I'd have to take steps to somehow trap the Microsoft events and then fake the w3c ones. I somehow doubt that MS will see the light and start implementing the W3C events anytime before Windows 9.\n. ",
    "yacomink": "Sorry, I wasn't able to update the minified version in this commit so it doesn't have the changes. I'm not a ruby dev and had problems getting the build script to work.\n. Sorry, I wasn't able to update the minified version in this commit so it doesn't have the changes. I'm not a ruby dev and had problems getting the build script to work.\n. ",
    "jfollas": "The security exception being thrown by FF3.6 is due to the quality parameter - their implementation was before that parameter was introduced in the spec/recommendation.  \n\nI first thought of having cascading logic that takes out one parameter at a time, but thought that code may have been too messy for the limited audience that it would serve.  If interested, the code would have resembled:\n\n``` javascript\ntry {\n    // If this call fails (due to browser bug, like in Firefox 3.6),\n    // then revert to previous no-parameter image/png behavior\n    callback(bufferLayer.getCanvas().toDataURL(mimeType, quality));\n}\ncatch(exception)\n{\n    try {\n        callback(bufferLayer.getCanvas().toDataURL(mimeType)); // Try with just mimeType\n    }\n    catch(exception)\n    {\n        callback(bufferLayer.getCanvas().toDataURL()); // If all else fails, this is the original behavior\n    }\n}\n```\n. May want to consider changing the name of the Kinetic.Path attr from \"command\" to \"data\" to match nomenclature used by SVG (i.e., their html syntax is &lt;path d='M1,2...'&gt;)\n. Looks like the elliptical arc curve is the only svg path command not implemented here yet.  \n\nhttp://www.w3.org/TR/SVG/paths.html#PathDataEllipticalArcCommands\n. Weird bug! \n\nIn a pinch, you could use a Path shape with two elliptical arcs (i.e., one for each half):\n\nhttp://jsfiddle.net/jfollas/tdar8/\n\nFor a ellipse with radius [20, 40] centered at 100,200, something like:\n\n```\nvar ellipse3 = new Kinetic.Path({\n    x: 100,\n    y: 200,\n    fill: \"#777\",\n    stroke: \"black\",\n    data: \"m -20 0 a 20 40 0 1 0 40 0 a 20 40 0 0 0 -40 0 z\"\n});\n```\n. Shape pack makes absolute sense.  No need to bloat the core API with functionality that most people won't need (and can easily be added by means of a 2nd script tag)\n. 1) Path and TextPath share the same core path parsing logic, so I was looking for a way to keep from duplicating all of that code.  The implementation tried to replicate how the other various shapes extended Shape (in this case, I was trying to extend a shape that already extends Shape), but since the draw logic is different, I needed a way to render the TextPath after path parsing took place.  \n\nThat being said, I recognize the need to refactor and simplify, so will look into it.\n\n2) The code bloat in Path is functionality that is needed by TextPath, but could also be used with Path if desired (things that the Canvas doesn't yet provide, like point-on-curve and path length).  With a cleaner separation of the two shapes (#1 above), these functions can be moved into TextPath itself, or externalized somehow (maybe similar to Tween), but TextPath does need them in order to calculate the location and rotation of each glyph.\n\n3) Sure!\n. Do you want to namespace things in the plugins folder?  Meaning, should they be named Kinetic.Plugins.Foo, or just Kinetic.Foo?\n. Ok, I added the empty Kinetic.Plugins object to Global (just like Kinetic.Filters).\n. I should have included this forum link where it was reported:\n\nhttp://www.kineticjs.com/forum/viewtopic.php?f=8&t=1042\n. Does anyone have a jsFiddle that demonstrates the issue?  I like to convert these into unit tests within the codebase.\n. In my testing, Firefox is the only browser that will respect the opacity when rendering a SVG as an image.  Chrome and Internet Explorer will render SVG-as-images to the Canvas, but ignore the globalAlpha setting on the Canvas context at the time that drawImage() is invoked.  I have not found bug reports yet to this effect, but have proven it with testing (i.e., set globalAlpha and then draw an image - any file type other than svg will have transparency).\n\nNote: A tip that I found to ensure that browsers can render SVG-as-images consistently is to ensure that the svg markup has width, height, and viewBox attributes all defined.  If any are missing, you'll have different behavior among the various browser versions.\n\nClosing because there doesn't appear to be anything that Kinetic itself can do since the behavior is at the native code level of the browser's canvas implementation.\n. Nice catch!\n. It's not just iOS. I've seen the same symptom at least with IE10 (Windows 8 apps). I always assumed it was a memory management issue/garbage collection/etc because it only became apparent after many animations.  Perhaps in my case, those types of issues lead to an inconsistent frame rate with requestAnimationFrame.\n. :) I just keep adding it back into my local version of Kinetic when my\nshapes stop responding to clicks. ;)\nOn Nov 15, 2012 2:55 PM, \"Eric Rowell\" notifications@github.com wrote:\n\n> haven't forgotten about this, will get to it asap :)\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/pull/141#issuecomment-10422772.\n. Nah, it's still needed.  :-)\n\nI finally crafted an example to show you the problem.  My fault for being\nlazy before.\n\nhttp://jsfiddle.net/HpBRf/11/ http://jsfiddle.net/jfollas/HpBRf/8/\n\nThe container is 3D transformed.  You should be able to drag the circle\nlocated in the center (coordinates 200,200).  But, because of the\ntransform, Kinetic thinks the circle is down and to the left (green).  In\nfact, if you drag within the green circle, you'll see the center circle\nmove.\n\nThe correct action is to use offsetX and offsetY if available, which at\nleast Chrome and IE support (not sure about FF).  That's what the pull\nrequest represented, and is the fix that I have to manually add back into\nKinetic after each release.\n\nOn Mon, Apr 22, 2013 at 12:34 PM, Eric Rowell notifications@github.comwrote:\n\n> Hey Jason, closing this pull request for now because I haven't had anyone\n> else mentioning this - I'll keep track of it though in my todo list. I'm\n> still waiting for MS to send me some test devices ;)\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/pull/141#issuecomment-16799622\n> .\n. Not possible in Safari or iOS here.  I'll try on FF on another machine.\n\nOn Mon, Apr 22, 2013 at 9:43 PM, Eric Rowell notifications@github.comwrote:\n\n> would you mind testing this in FF, Safari, and iOS if possible? I'd like\n> to pull in the change, but I'm currently unable to test on windows devices.\n> If you give me the thumbs up, I can just pull it in.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/pull/141#issuecomment-16834594\n> .\n. Integrating as a separate commit from this pull request\n. What's not working on Windows Phone 8?  Have you tried it recently with the latest version of Kinetic to see if enhancements made in the past 10 months have improved things?\n\nI am assuming that you're referring to opening a web page in IE10 on WP8, and not creating an HTML5 application.  I can say that I have tested Kinetic on WP8 with success (sometimes, just need tweaking, but that's primarily to the HTML, not the Kinetic/canvas code).\n\nAs for what @ericdrowell referred to, IE10 introduced the MSPointerEvent that brings mouse, touch, and pen events all into one single event.  This has since been committed to webkit and firefox as \"pointerevent\", so expect to use it everywhere in the future.\n\nThe nice thing, though, is if a MSPointerEvent is not handled, it elevates to a normal mouse event (so I don't even try to handle the new event in my Kinetic apps).\n. I closed it due to no response. Guessing that it's probably related to this (which is still open):\n\nhttps://github.com/ericdrowell/KineticJS/issues/880\n. [Finally] added this fix to the codebase.  Thanks for researching the issue and providing the code!\n. Fixing this by rendering the text (glyphs) to the hit canvas.\n. CI doesn't like the changes I made to the test. Still getting familiar with the new test framework...\n\nEdit: Fixed the test, CI passes.\n. Since MSPointer events automatically elevate to Mouse events if they aren't handled, is this still a concern?  My Win8 apps have been working fine with the first touch elevating to a mouse event.\n. In IE10/11, you need to tell the browser that you will be handling touch events for a container (else, it will try to interpret touch as an action for the browser to perform, like panning or zooming, etc).\n\nIf you want to try it out, edit the Drag/Drop tutorial that you referenced to add a style to the container div (did you know that the code in those tutorials are in a live editor?):\n\n``` html\n<div id=\"container\" style=\"-ms-touch-action: none;\"></div>\n```\n\nReference: http://msdn.microsoft.com/en-us/library/ie/hh772044(v=vs.85).aspx\n. Do you have a jsFiddle or something that exhibits the issue so that I can take a look in IE9?\n. If this is still a problem with > 4.7.2, then reopen this issue.\n. Oh, are you trying to use the DataURI as the address of the web page?  (Sorry, haven't opened your example yet).  IE9 won't allow this, but you can create a img src=\"your data uri\" in the popup window.\n\nLook at how I handle a popup window here (code at bottom) as an example that works in IE9:\n\nhttps://github.com/jfollas/CanvasKineticDemo/blob/master/kineticDemos/6.1.toDataURL.htm\n. When you say \"SVG Image\", is that using Kinetic.Image to draw a picture onto the canvas (using svg as a source of that image), or is it using a SVG path in conjunction with the Kinetic.Path shape?  Do you have a jsFiddle that exhibits this issue so we can keep an eye on it (especially if an upcoming browser fix could positively affect the results)?\n. We can't do anything about #98 because it's native browser rendering issue.  Apparently,at the moment, only Firefox will respect the Canvas context's opacity setting when SVG is used as an image (Chrome and IE ignores opacity when it renders the SVG using drawImage(), while correctly rendering any other image format using the very same code).\n\nBy the same token, because it's native code in the browser that renders the image, I don't believe that we have control over anti-aliasing from Kinetic, which seems to be the cause of the issue that you are reporting here (\"jagged\" rendering).  I think we'll just need to wait for Firefox 24 as @fuzzley reported above.\n. I had to review the Path code, but I think I see the culprit.  At the end of drawing all of the vectors, it's doing a fill and stroke operation.  The fill part of that operation will close the path, which is giving it area between the endpoints of your curve - Kinetic is picking up this invisible area as being part of the shape.\n\nI can probably break up the fillStroke() into a separate fill and stroke operation, and only perform the fill operation if there's something to fill with.\n\nMaybe Eric will have another suggestion for handling stroke-only scenarios to prevent the inside of the shape from being detected by Kinetic.\n. Committed the fix.  If the shape's \"fill\" is not defined, then it will only Stroke() the path.\n. Wonder what the range of browser support is... \n\nSVG is neat because you can use it as the src of an img right in your HTML, so it doesn't surprise me that there are browsers that can render SVG onto a canvas (using context.drawImage), treating it as just another image format.\n\nKinetic's Path shape isn't intended to replace SVG, or even render SVG.  I created it just for reusing the terse Path syntax since Canvas didn't have an equivalent yet (the latest [WhatWG spec](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#the-canvas-element) shows a lot of SVG being brought into Canvas, including native Path support).  \n\nBefore Kinetic.Path, my alternative was a custom Shape with Canvas API commands to perform each operation that was represented within the SVG Path data (moveTo, lineTo, etc).\n. I've reproduced your code as a JSFiddle: http://jsfiddle.net/KBnYM/\n\nThe problem with issues like this is that Kinetic has no control over how the browser handles rendering - Kinetic simply tells the browser what to do, and the browser performs the rendering of pixels to the screen using native code.  Firefox and Internet Explorer both correctly anti-alias your rotated image, but Chrome (at least the current version) does not when 2D acceleration is enabled.\n\nBut, if you were to \"Disable accelerated 2D canvas\" (from URL: chrome://flags/#disable-accelerated-2d-canvas), then Chrome's software renderer correctly anti-aliases the image on my machine.  This would suggest a bug with Chrome's accelerated 2D canvas implementation.  \n\nUnfortunately, I don't think there's anything that we can do in Kinetic to this handle bad behavior that exists only in versions of Chrome.\n. I believe these are Chromium bugs that may cover the bad behavior that you are seeing: \nhttps://code.google.com/p/chromium/issues/detail?id=7508\nhttps://code.google.com/p/chromium/issues/detail?id=82268\n. You have to click the \"Enable\" link to turn on the \"Disable accelerated 2D canvas\", and then click the Relaunch button at the bottom.  Not saying this is the recommended fix to solve your issue, but that this demonstrates that it's an issue with Chrome's 2D GPU accelerated canvas implementation.\n\nDefault:\n![Default](https://f.cloud.github.com/assets/1516231/1086466/56c31d30-15fd-11e3-99c5-08fc2aaa03da.PNG)\n\n2D Accelerated Canvas Disabled:\n![2D Acceleration Disabled](https://f.cloud.github.com/assets/1516231/1086467/5a936104-15fd-11e3-8415-470b0bc61fa4.PNG)\n. I believe this is a bug in the current version of Chrome. I can confirm similar behavior after a while of using a canvas on a page.\n\n-----Original Message-----\nFrom: \"nvikram\" notifications@github.com\nSent: \u200e9/\u200e7/\u200e2013 2:14 AM\nTo: \"ericdrowell/KineticJS\" KineticJS@noreply.github.com\nSubject: [KineticJS] Canvas goes blank quite often (#598)\n\nQuite often the canvas goes blank and does not render the shape or the shape maybe rendered but not the fill colors. This makes the canvas looks empty. Check screenshot of kineticjs tutorial page.\nTested in Chrome Version 29.0.1547.66 m\n\n\u2014\nReply to this email directly or view it on GitHub.\n. Note: It's the layer.draw() that is causing the offset issue, not the inclusion of additional textpath elements in the group.\n\nhttp://jsfiddle.net/BBWE3/5/\n\nEric: Looks like there's an extra context save() that is not being restored when you look at the trace:\n\n   {\n      \"property\": \"textAlign\",\n      \"val\": \"left\"\n   },\n   {\n      \"method\": \"save\",\n      \"args\": []\n   },\n       {\n          \"method\": \"save\",\n          \"args\": []\n       },\n. layerX and layerY were added for Firefox support (because they don't use offsetX and offsetY).  Betting that Safari/webkit is detecting layerX/Y in the ternary expression, even if that part of the expression is not in the evaluation path.\n\nMaybe we should separate the ternary into an actual if/else block?  Would Safari/webkit still throw an error if the code is not executed?  I don't have Safari (or half-eaten fruit devices) to test, but could whip together a JSFiddle.\n. TextPath has a similar issue that I haven't researched yet. As if the text isn't rendering to the hit canvas.\n\n-----Original Message-----\nFrom: \"Eric Rowell\" notifications@github.com\nSent: \u200e10/\u200e4/\u200e2013 4:44 PM\nTo: \"ericdrowell/KineticJS\" KineticJS@noreply.github.com\nSubject: Re: [KineticJS] Click on Kinetic.Text doesn't fire mousedown event.(#627)\n\ncan you post the code on jsfiddle?\n\u2014\nReply to this email directly or view it on GitHub.\n. I modified your example a bit to show the hit canvas, make the shape larger by scaling the group (my eyes hurt trying to mouseover that small shape on my screen), and to change the fill of the inside rectangle upon mouseover/mouseout.  \n\nDo you still see the bad behavior with my modifications?\n\nhttp://jsfiddle.net/jfollas/hKqPD/\n. What is the use case for this?\n\nOn Thu, Oct 10, 2013 at 7:51 PM, mikagenic notifications@github.com wrote:\n\n> dragstart and dragend events are not being clled when dragging on an empty\n> layer (although they do for the stage!)\n> \n> I know this can be overcome with a transparent rect etc but these solution\n> are hackish and error prone.\n> \n> It would be good to make the layer resposive to these events.\n> \n> Thank you!\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/638\n> .\n. Do you have a jsFiddle that we can build upon?\n\nOn Mon, Oct 14, 2013 at 2:33 AM, mikagenic notifications@github.com wrote:\n\n> ericdrowell & jfollas, I would be grateful if you can look at my question\n> at\n> http://stackoverflow.com/questions/19354602/kineticjs-drawing-shapes-with-drag-drop\n> which is what I'm really trying to achieve and what prompted this question.\n> \n> Thank you!\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/638#issuecomment-26237795\n> .\n. This was due to a bug fix from somebody trying to get the opposite results\nof you... They had a path that they just needed to be stroked, but it was\nbeing filled.  We corrected the offending behavior, which you noticed.\n\nOn Thu, Oct 17, 2013 at 5:39 AM, Simon notifications@github.com wrote:\n\n> after comparing with the example, found that adding a terminating 'z' to\n> the data string will make it work with v4.7.2\n> \n> data: 'm 35,30 c 20,-10 -16,-13 12,-2 3,-2 25,-10z',\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/647#issuecomment-26490827\n> .\n. I don't think this is a bug in Path, per se... But it looks like an issue\nwith the order of which objects are instantiated and added to containers.\n Maybe Eric has more input.\n\nBut, look at this fork of your fiddle: http://jsfiddle.net/hUTJW/\n\nI add the layer to the stage before adding the Paths to the layer, and it\nworked.\n\nOn Tue, Oct 29, 2013 at 12:44 PM, La\u00e9rcio de Sousa <notifications@github.com\n\n> wrote:\n> \n> Please consider this example: http://jsfiddle.net/lbssousa/rMHrU/\n> \n> If I try to set both stroke and fill in my Path shapes (uncomment the\n> \"fill: ...\" attributes in the fiddle), the script fails (at least in my\n> tests).\n> \n> Tested with KineticJS 4.7.2 on Google Chrome 30.0.1599.114 for Linux.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/663\n> .\n. Depending on your platform, it may be easier to defer gesture handling to\nthe underlying HTML (i.e., at the container DIV level instead of within\nKinetic).\n\nOn Mon, Nov 11, 2013 at 11:26 AM, Anton Lavrenov\nnotifications@github.comwrote:\n\n> I added pinch event to my project (that is using kineticjs).\n> I made first implemantation from here:\n> http://www.html5canvastutorials.com/labs/html5-canvas-multi-touch-scale-stage-with-kineticjs/\n> But I had some problems, so I moved to using hammer.js. It so easy and\n> clean http://eightmedia.github.io/hammer.js/\n> \n> My code example:\n> \n> //get stage document element and listen itvar transformer = Hammer(this.getStage().getContainer());\n> var startScale = null;transformer.on(\"transformstart\", function(e) {\n>   startScale = _this.getCamera().getScale();\n> });transformer.on(\"transform\", function(e) {\n>   return _this.getCamera().setScale(startScale \\* e.gesture.scale);\n>   // or stage.setScale(...) or... Whatever you want});\n> \n> You can do the same for swipe event.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/682#issuecomment-28214210\n> .\n. Correct that it's by design. We had the opposite bug filed where an open shape was incorrectly filling when they just wanted it stroked, so this seems the most appropriate behavior.\n\n-----Original Message-----\nFrom: \"Dieter Luypaert\" notifications@github.com\nSent: \u200e2/\u200e10/\u200e2014 3:28 PM\nTo: \"ericdrowell/KineticJS\" KineticJS@noreply.github.com\nSubject: Re: [KineticJS] Kinetic.Path cannot be open with a fill (#721)\n\nChecking the code, it seems to be intentionally.\n            if (closedPath) {\n                context.fillStrokeShape(this);\n            }\n            else {\n                context.strokeShape(this);\n            }\nYou can do a checkout, modify src/plugins/Path.js:86 and change it to:\n            context.fillStrokeShape(this);\n\u2014\nReply to this email directly or view it on GitHub.\n. Add a \",z\" to the end of your path to close the path (necessary for\nfilling).\n\nOn Tue, Oct 28, 2014 at 1:06 PM, Bernardo F. Domingues <\nnotifications@github.com> wrote:\n\n> If I may comment on this issue with an example, why this path\n> http://jsfiddle.net/bernardofd/vvd87737/ can't be filled like this\n> (made with free-drawing on FabricJS)?\n> [image: image]\n> https://cloud.githubusercontent.com/assets/2365802/4812964/84b89632-5ec4-11e4-9fea-4d72c6424dc9.png\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/ericdrowell/KineticJS/issues/721#issuecomment-60792480\n> .\n. It's not an easy problem to solve universally. Unfortunately, SVG Path\nsupport in Kinetic does not attempt to handle all edge cases.  As you\ndiscovered, you may need to manually split the path into multiple shapes to\nhave different behavior for different parts.\n\nOr, maybe before closing the path with a z command, you can try to M to\nyour first point (so closing won't create that line connecting to the first\npoint).\n\nOn Tue, Oct 28, 2014 at 1:34 PM, Bernardo F. Domingues <\nnotifications@github.com> wrote:\n\n> @jfollas https://github.com/jfollas Yes, indeed. Thank you for your\n> response. But this might not be the end result that the user may want,\n> since it creates a black line that closes the polygon. In order to\n> reproduce exactly, I may have to create two overlapping paths, one with the\n> stroke and other with the fill, as seen here\n> http://jsfiddle.net/bernardofd/vvd87737/2/ (enhanced).\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/ericdrowell/KineticJS/issues/721#issuecomment-60797285\n> .\n. As Eric mentioned above, Kinetic attempts to correct an issue with a double-shadow being applied by utilizing a temporary canvas, and then copying the temporary canvas to the final canvas.  Chrome has had a bug for a long time now with \"using drawImage to copy from one canvas to another, when the source canvas had transparent areas\".  The Chromium bug at fault appears to be this one, if you want to track status or provide feedback to Chrome about their bug: https://code.google.com/p/chromium/issues/detail?id=100703\n\nOne possible workaround would be to bypass this buffering technique by overriding a helper function in Shape.js named _useBufferCanvas.  If this function returns false, then the \"old\" way will be used, which may result in the double shadow issue, depending on the browser and your shapes.\n\nYou can override on a per-shape basis as follows:\n\n``` javascript\nvar rect4 = new Kinetic.Rect({ ... });\n\nrect4._useBufferCanvas = function () {\n    return false;\n};\n```\n\nOr, another possible patch would be to override globally for a given type of shape (Rect, Circle, etc) with User Agent detection (include the following code before instantiating any shapes of the type that you specify as the first argument):\n\n``` javascript\nKinetic.Util.addMethods(Kinetic.Rect, {\n    _useBufferCanvas: function () {\n        if (Kinetic.UA.browser === 'chrome')\n            return false;\n        else\n            return (this.hasShadow() || this.getAbsoluteOpacity() !== 1) && this.hasFill() && this.hasStroke() && this.getStage();\n    }\n});\n```\n\nThe point of mentioning these workarounds is that you can do this in your own application code without waiting for the next official release of Kinetic.\n\nSee this Fiddle for results: http://jsfiddle.net/ae3A4/1/\n. I can understand the frustration that comes from having an API change from underneath you, but it's not really fair to lay into Eric so hard about this.  He puts so much time into producing a free and open source library to make it easier to do cool things with the canvas, and doesn't deserve to be chastised over a decision that he made based on feedback that he received.\n\nInstead of going back to 4.5.5, it may be easier to just change your project's version of Kinetic 5.x to use radians, since Kinetic is fully open source.  This would have a benefit of your code not needing changed yet again when support for radian angles are restored.\n\nAfter a quick look through the code, there's only one line in node.js (1145, part of _getTransform) that would seem to be the culprit.  Remove the conversion from degrees to radians there, and you can then supply all of your rotations in radians.\n\nTest providing radian angle for rotation: http://jsfiddle.net/mjg6r/1/\nModified 5.0.1: http://pastebin.com/raw.php?i=WXaHyd1R\n. For the record: I'm still in favor of the old/separate .rotation (for\nradians) and .rotationDeg (for degrees), with one just being a convenience\nmethod to set the other.  Not sure what kind of impact this has on the\nbackend stuff, like tweens, etc...\n\nOn Mon, Mar 17, 2014 at 12:47 AM, Paul van Dinther <notifications@github.com\n\n> wrote:\n> \n> No, it is definitely a bad change. The only bad one really. The changes to\n> setPosition, scale and offset also forced me to do a lot of code changes\n> but I can see why you did it.\n> As long as the javascript Math unit handles angles in radians you should do\n> the same. But if you feel very strongly about it and insist to go non\n> standard then I hope you provide a setRotationRad and rotateRad\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/743#issuecomment-37784932\n> .\n. You're looking for a bounding box function.  The Path plugin does not have\nanything today can do this for you.\n\nI'm not sure that using X/Y coordinates from the path itself will give you\neverything that you need to roll your own.  Some path components are vector\ncommands, like elliptical arcs and B\u00e9zier curves.  These will be defined\nusing a few X/Y coordinates, but rendered with points that may be far from\nthose control points.\n\nI'm wondering if a generalized bounding box algorithm could be produced for\nany shape, using pixel-detection data from the hit canvas....  Might not be\nthe best performing code to do a brute-force search for pixels from the\nbitmap data, but is would at least be one possible solution.\n\nOn Sun, Mar 2, 2014 at 7:42 PM, wiregrasscoder notifications@github.comwrote:\n\n> Folks,\n> \n> Is it possible to retrieve min/max x/y values from a path created in\n> KineticJS? When using path code exported from Adobe Illustrator (and\n> ai2canvas), a feature like this would be _extremely_ helpful.\n> \n> At the moment, my workaround is to manually look through the path code and\n> pull out min/max x/y values by hand. Obviously this is time consuming.\n> \n> Thanks!\n> wiregrasscoder\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/834\n> .\n. Kinetic doesn't actually draw every pixel of arcs and curves - it simply\ntells the browser \"I need this curve\", and native code in the browser\nrenders the pixels.  So, we don't actually know the x/y of the individual\npixels that are rendered without calculating them ourselves.\n\nBut, when I wrote the TextPath shape, I needed to find points along the\npath to know where to render glyphs.  So, some undocumented functions that\nmay be of assistance to you if you wanted to attempt to write your own\nbounding box algorithm using path traversal:\n\nKinetic.Path.getPointOnCubicBezier(pct, P1x, P1y, P2x, P2y, P3x, P3y, P4x,\nP4y)\nKinetic.Path.getPointOnQuadraticBezier(pct, P1x, P1y, P2x, P2y, P3x, P3y)\nKinetic.Path.getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi)\n\nThese functions return a point object (i.e.,  { x: 123, y: 456} ).  You\nwould just need to traverse the curve by iterating the pct from 0 to 1.0\nusing some increment (i.e., 0.1 to get each point 10% along the path), and\ntrack the min/max over all of the parts of the path.  For arcs, you iterate\nthe theta property from the starting angle to the ending angle.\n\nA parsed version of the path string can be found in your instance's\nPath.dataArray.  Refer to the findSegmentToFitCharacter function within\nTextPath.prototype._setTextData for how to used the parsed data in\nconjunction with these functions.\n\nIf you're successful in implementing this, feel free to submit a pull\nrequest!\n\n-Jason\n\nOn Sun, Mar 2, 2014 at 10:18 PM, wiregrasscoder notifications@github.comwrote:\n\n> Thanks jfollas. In my case, the paths use both lines and Bezier curves,\n> however, the shapes are such that it would suffice to just know the min/max\n> x/y values used to create the path. That's all I would need for an accurate\n> bounding box.\n> \n> It would be great if KineticJS could tuck path coordinates away and return\n> max/min of a shape. It may not work on every shape, but I've seen others\n> performing elaborate workarounds with regex and eval statements to\n> accomplish this.\n> \n> I think I may be able to roll my own bezierCurveTo and lineTo methods that\n> track max/min values per path...\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/834#issuecomment-36478766\n> .\n. The reason is because Internet Explorer 10+ doesn't recognize the iOS touch events, but instead uses the pointer events (http://www.w3.org/TR/pointerevents/). \n\nHammer is a polyfill, so that's another solution that could be used as a work around (though I still prefer to just let pointer events elevate into mouse events... in which case, the Kinetic mobile flag needs to be false for it to work on the phone).\n. I've been experimenting with my own private kinetic script to see what\nworks the best. I think I have a decent solution, just need to add it to\nthe github project.\n\nOn Wed, May 7, 2014 at 10:00 AM, Anton Lavrenov notifications@github.comwrote:\n\n> May be we can insert some polyfill to KineticJS? For example\n> https://github.com/WebReflection/ie-touch#ie-touch? Or add some note tp\n> documentation (or readme, or wiki, hmmm)?\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/880#issuecomment-42430136\n> .\n. You can adjust the offset. I think what you're going for is this:\n\nhttp://jsfiddle.net/eL2rr/2/\n\nOn Tue, Apr 8, 2014 at 6:35 PM, AlvinPLeung notifications@github.comwrote:\n\n> The x, y of a circle is not scaled correctly.\n> http://jsfiddle.net/eL2rr/\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/886\n> .\n. Confirmed: The canvas is resizing, but the red DIV, as a block element,\ntakes up the entire width. Anton's \"inline-block\" suggestion would reduce\nthe surrounding div to the size of its contents, which is what I think you\nwere expecting.\n\nOn Thu, Apr 17, 2014 at 11:47 AM, Anton Lavrenov\nnotifications@github.comwrote:\n\n> Why do use think it is not working?\n> \n> Use display : inline-block; css for container.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/898#issuecomment-40729177\n> .\n. Can you explain? Resizing the stage does not affect the scaling used, so if\nyour image's X coordinate is 200 but the stage is only 100 wide, then the\nimage will be drawn off stage.\n\nOn Thu, Apr 17, 2014 at 12:04 PM, Confile notifications@github.com wrote:\n\n> Well there is still an issue, because the content is not resized with the\n> resize of the stage.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/898#issuecomment-40731104\n> .\n. Were you maybe expecting this behavior: http://jsfiddle.net/7QTmz/1/\n\nOn Thu, Apr 17, 2014 at 12:07 PM, Jason Follas jfollas@gmail.com wrote:\n\n> Can you explain? Resizing the stage does not affect the scaling used, so\n> if your image's X coordinate is 200 but the stage is only 100 wide, then\n> the image will be drawn off stage.\n> \n> On Thu, Apr 17, 2014 at 12:04 PM, Confile notifications@github.comwrote:\n> \n> > Well there is still an issue, because the content is not resized with the\n> > resize of the stage.\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/898#issuecomment-40731104\n> > .\n. You'll probably want to use offsetX and offsetY instead of offset (which takes an object now with x and y properties). And, while it doesn't appear that the stage supports this tween (in my few minutes of playing around), you can definitely tween a layer:\n\nhttp://jsfiddle.net/PQ9um/\n. It appears that the built in tweening engine can only go as low as the layer (which directly maps to a canvas in the DOM).\n\nNothing stops you from using an external tweening engine, such as the GreenSock Animation Platform (http://www.greensock.com/get-started-js/).  \n\nCheck out this modified version of that fiddle:\n\nhttp://jsfiddle.net/PQ9um/2/\n\n(Just be aware that each canvas is being redrawn with each frame, so performance may become an issue, especially if the rendering logic and/or garbage collection takes longer than a frame's timeslice to execute).\n. I discovered today that there's a Greensock plugin for Kinetic: http://api.greensock.com/js/com/greensock/plugins/KineticPlugin.html\n. You can use an external tweening library, like GreenSock (http://www.greensock.com/gsap-js/) with it's ColorProps plugin (http://api.greensock.com/js/com/greensock/plugins/ColorPropsPlugin.html) to tween colors and then apply them to the Kinetic shape on each frame update:\n\nhttp://jsfiddle.net/ZH2AS/2/\n. No plans for direct support of tweening color stops on a gradient fill. \n\nI would consider this tween to be an outlier that would justify the use of an external library, since it's easy enough to implement with something like Greensock, and deferring complex/outlier tweens to an external engine does not inflate the Kinetic library's size (and potential slow down built-in tween animations in the process for everyone else who just need simple tweens). Once you have justification for using Greensock for a complex tween, then you can actually use it for all of your tweens.\n\nSent from my Windows Phone\n\n-----Original Message-----\nFrom: \"AxoInsanit\" notifications@github.com\nSent: \u200e4/\u200e20/\u200e2014 3:48 PM\nTo: \"ericdrowell/KineticJS\" KineticJS@noreply.github.com\nCc: \"jfollas\" jfollas@gmail.com\nSubject: Re: [KineticJS] How can I tween shape gradient fill stops? (#901)\n\nThanks for the reply, my question was \"s there way to do this with the current Tween object?\"\nSo I guess that's a no?\nAre there plans to add support for this on Tween? the whole idea of using something like KineticJS is not having to resort to other libraries...\n\u2014\nReply to this email directly or view it on GitHub.\n. You have to add the group's x/y to the rect's x/y then. \n\nThe group is a container that can be moved, and shapes within a group are placed relative to the group.  So if your group is at 50,50, and a rect within the group is at 0,0, that rect will appear at 50,50 when rendered.\n\n-----Original Message-----\nFrom: \"nitirajrathore\" notifications@github.com\nSent: \u200e4/\u200e20/\u200e2014 1:37 PM\nTo: \"ericdrowell/KineticJS\" KineticJS@noreply.github.com\nSubject: [KineticJS] Rectangle's x and y coordinates don't change if it is ina group and group is draged (#902)\n\nHi,\nI have found that if the a Kinetic.Rect is inside and group and the group is dragged then the x and y coordinates of the Rect don't change (see fiddle http://jsfiddle.net/nitirajrathore/kXqaL/ ) . But if the Rect is not inside any group and the Rect is dragged then its x and y coordinates changes properly (see fiddle http://jsfiddle.net/nitirajrathore/GqMTG/1/ )\nI actually needed the new coordinates of Rect in my work even if it is in a group. I think its a bug.\n\u2014\nReply to this email directly or view it on GitHub.\n. I remembered seeing a `.getAbsolutePosition()` function once, and just converted your fiddle to use it - seems to work as expected.\n\nhttp://jsfiddle.net/kXqaL/2/\n. Try overriding the mobile flag for now if the browser is Internet Explorer:\n\nhttps://github.com/ericdrowell/KineticJS/issues/880\n. Some background first, for anyone else coming to this thread:\n\nIE10 still reported itself in the user agent as \"MSIE\". But, because people were [wrongly] trying to apply IE6/7/8 semantics if they detected any version of IE, MSFT has altered the user agent for IE11 to just look like a Mozilla-compatible browser (no mention of \"MSIE\" in the user agent).  This starts with Windows 8.1 and Windows Phone 8.1.\n\nI first patched the UA detection and implemented the touch workaround for mobile IE 10/11 here:\nhttps://github.com/ericdrowell/KineticJS/commit/f9f7b89c3f8522868bab3a857c687b7487bd2f10\n\nand then corrected a bug here:\nhttps://github.com/ericdrowell/KineticJS/commit/8d5298d7ca8e36ee433fd1a121103f74e737ddf2\n\nUnfortunately, I only have Windows Phone 8.1 devices/emulators (IE11) now to verify that the patches work.  Which means there could still be an issue with mobile IE10.\n. One immediate solution would be to use Greensock for your tweens, which\noffers such ability (as well as a much richer animation feature set, such\nas timelines).\n\nGreenSock Animation Platform:\nhttp://www.greensock.com/\n\nDocs for the Kinetic plugin for GSAP:\nhttp://api.greensock.com/js/com/greensock/plugins/KineticPlugin.html\n\nOn Fri, May 9, 2014 at 4:30 AM, Michael Dobekidis\nnotifications@github.comwrote:\n\n> Hello,\n> \n> I think it would be extremely beneficial if we had an \"onUpdate\" callback\n> function within tweens, because sometimes it is needed to \"check\" things\n> while the animation is running. If someone has implemented this please\n> share how.\n> \n> Thanks.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/922\n> .\n. The bug is in Chrome itself (related to shadows on images not having alpha channel support). You can find a workaround in this thread: https://github.com/ericdrowell/KineticJS/issues/726\n. The Kinetic Context object is a proxy to the HTML5 Canvas Context, so it does not implement 100% of the browser's Canvas API.  You can get a reference to the actual browser context using Context._context, as in:\n\n``` javascript\nlayer.getContext()._context.globalCompositeOperation = \"source-atop\";\n```\n. This is probably due to RequestAnimationFrame, which is letting the browser tell the program when it's ready to draw the next frame. It makes sense for RAF to not fire when the browser tab does not have focus, since that would be rendering frames that are never displayed.\n\nYou may need to look into using a Tween engine with more sophistication, like GreenSock Animation Platform (which has a Kinetic Plugin and a Timeline object, which is handy for coordinating many different tweens that need to work together, etc)\n\n-----Original Message-----\nFrom: \"Martin Velchevski\" notifications@github.com\nSent: \u200e5/\u200e29/\u200e2014 3:55 PM\nTo: \"ericdrowell/KineticJS\" KineticJS@noreply.github.com\nSubject: [KineticJS] Tween not animating when it's browser window loosesfocus. (#943)\n\nSo I have a tween which I'm calling each second with setTimeout()... Everything works like a charm, however when I switch to another tab and wait for some time to pass, upon returning to the tween tab the animation continues from where I left off. \nIs there any way around this? I really want to stick with KineticJS! :)\n\u2014\nReply to this email directly or view it on GitHub.\n. toImage() relies on the same functionality in the undelying Canvas API.\nWhen it generates an image, only the visible parts are included (which\nmakes sense, because that's all that is expected to be displayed to the\nuser).\n\nOn Tue, Jul 1, 2014 at 12:19 PM, DigitalFlux notifications@github.com\nwrote:\n\n> I have a layer which I would like to cache via toImage. Caching it works\n> great for when all of the objects for the application are already in view,\n> but for any objects that are either off-screen or partially off-screen, the\n> parts that are not in view are clipped when the layer is cached. This\n> becomes very apparent when you drag, and the half of the object that was\n> off-screen is non-existent until mouseup restores the hidden layers with\n> the actual objects. I tried using setClip() in the event that layer\n> clipping defaulted to the size of the viewable window, to no avail (I am\n> starting to think that the layers do not concern themselves with what is\n> \"outside\" the stage bounds, even when specified, when you call toImage()).\n> \n> Is this a limitation of toImage(), a bug, or am I just missing something\n> to do before calling toImage() on a layer?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/ericdrowell/KineticJS/issues/965.\n. I reached out to Eric through another channel about this.\n\nIn the meantime, try the way back machine: Archive.org\n\nSent from my Windows Phone\n\n-----Original Message-----\nFrom: \"Theophile MORIN\" notifications@github.com\nSent: \u200e7/\u200e30/\u200e2014 7:50 AM\nTo: \"ericdrowell/KineticJS\" KineticJS@noreply.github.com\nSubject: Re: [KineticJS] Website is down (#986)\n\nIt seems yes.\nHard to code without documentation...\ni'm encountering a 403 Forbidden error too.\n\u2014\nReply to this email directly or view it on GitHub.\n. Eric took a hiatus due to being burned out. It was consuming all of his\nspare time to maintain the project. He left it in a pretty stable state,\nand Anton was great about committing bug fixes after the last official\nrelease (caveat: these fixes are in GitHub, but not in an official release).\n\nIf I had to guess, Eric will return to the project and make another\nofficial version release. But in the meantime, if Kinetic satisfied a need\nfor your project, then there's nothing that will stop you from continuing\nto use it (or fork it to add your own features or fix bugs that you find,\netc).\n\nOn Tue, Dec 2, 2014 at 11:24 AM, nmehlei notifications@github.com wrote:\n\n> Are these just rumors or is it official that KineticJS is not supported\n> anymore? Any word from the author?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/ericdrowell/KineticJS/issues/1048#issuecomment-65257863\n> .\n. The security exception being thrown by FF3.6 is due to the quality parameter - their implementation was before that parameter was introduced in the spec/recommendation.  \n\nI first thought of having cascading logic that takes out one parameter at a time, but thought that code may have been too messy for the limited audience that it would serve.  If interested, the code would have resembled:\n\n``` javascript\ntry {\n    // If this call fails (due to browser bug, like in Firefox 3.6),\n    // then revert to previous no-parameter image/png behavior\n    callback(bufferLayer.getCanvas().toDataURL(mimeType, quality));\n}\ncatch(exception)\n{\n    try {\n        callback(bufferLayer.getCanvas().toDataURL(mimeType)); // Try with just mimeType\n    }\n    catch(exception)\n    {\n        callback(bufferLayer.getCanvas().toDataURL()); // If all else fails, this is the original behavior\n    }\n}\n```\n. May want to consider changing the name of the Kinetic.Path attr from \"command\" to \"data\" to match nomenclature used by SVG (i.e., their html syntax is &lt;path d='M1,2...'&gt;)\n. Looks like the elliptical arc curve is the only svg path command not implemented here yet.  \n\nhttp://www.w3.org/TR/SVG/paths.html#PathDataEllipticalArcCommands\n. Weird bug! \n\nIn a pinch, you could use a Path shape with two elliptical arcs (i.e., one for each half):\n\nhttp://jsfiddle.net/jfollas/tdar8/\n\nFor a ellipse with radius [20, 40] centered at 100,200, something like:\n\n```\nvar ellipse3 = new Kinetic.Path({\n    x: 100,\n    y: 200,\n    fill: \"#777\",\n    stroke: \"black\",\n    data: \"m -20 0 a 20 40 0 1 0 40 0 a 20 40 0 0 0 -40 0 z\"\n});\n```\n. Shape pack makes absolute sense.  No need to bloat the core API with functionality that most people won't need (and can easily be added by means of a 2nd script tag)\n. 1) Path and TextPath share the same core path parsing logic, so I was looking for a way to keep from duplicating all of that code.  The implementation tried to replicate how the other various shapes extended Shape (in this case, I was trying to extend a shape that already extends Shape), but since the draw logic is different, I needed a way to render the TextPath after path parsing took place.  \n\nThat being said, I recognize the need to refactor and simplify, so will look into it.\n\n2) The code bloat in Path is functionality that is needed by TextPath, but could also be used with Path if desired (things that the Canvas doesn't yet provide, like point-on-curve and path length).  With a cleaner separation of the two shapes (#1 above), these functions can be moved into TextPath itself, or externalized somehow (maybe similar to Tween), but TextPath does need them in order to calculate the location and rotation of each glyph.\n\n3) Sure!\n. Do you want to namespace things in the plugins folder?  Meaning, should they be named Kinetic.Plugins.Foo, or just Kinetic.Foo?\n. Ok, I added the empty Kinetic.Plugins object to Global (just like Kinetic.Filters).\n. I should have included this forum link where it was reported:\n\nhttp://www.kineticjs.com/forum/viewtopic.php?f=8&t=1042\n. Does anyone have a jsFiddle that demonstrates the issue?  I like to convert these into unit tests within the codebase.\n. In my testing, Firefox is the only browser that will respect the opacity when rendering a SVG as an image.  Chrome and Internet Explorer will render SVG-as-images to the Canvas, but ignore the globalAlpha setting on the Canvas context at the time that drawImage() is invoked.  I have not found bug reports yet to this effect, but have proven it with testing (i.e., set globalAlpha and then draw an image - any file type other than svg will have transparency).\n\nNote: A tip that I found to ensure that browsers can render SVG-as-images consistently is to ensure that the svg markup has width, height, and viewBox attributes all defined.  If any are missing, you'll have different behavior among the various browser versions.\n\nClosing because there doesn't appear to be anything that Kinetic itself can do since the behavior is at the native code level of the browser's canvas implementation.\n. Nice catch!\n. It's not just iOS. I've seen the same symptom at least with IE10 (Windows 8 apps). I always assumed it was a memory management issue/garbage collection/etc because it only became apparent after many animations.  Perhaps in my case, those types of issues lead to an inconsistent frame rate with requestAnimationFrame.\n. :) I just keep adding it back into my local version of Kinetic when my\nshapes stop responding to clicks. ;)\nOn Nov 15, 2012 2:55 PM, \"Eric Rowell\" notifications@github.com wrote:\n\n> haven't forgotten about this, will get to it asap :)\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/pull/141#issuecomment-10422772.\n. Nah, it's still needed.  :-)\n\nI finally crafted an example to show you the problem.  My fault for being\nlazy before.\n\nhttp://jsfiddle.net/HpBRf/11/ http://jsfiddle.net/jfollas/HpBRf/8/\n\nThe container is 3D transformed.  You should be able to drag the circle\nlocated in the center (coordinates 200,200).  But, because of the\ntransform, Kinetic thinks the circle is down and to the left (green).  In\nfact, if you drag within the green circle, you'll see the center circle\nmove.\n\nThe correct action is to use offsetX and offsetY if available, which at\nleast Chrome and IE support (not sure about FF).  That's what the pull\nrequest represented, and is the fix that I have to manually add back into\nKinetic after each release.\n\nOn Mon, Apr 22, 2013 at 12:34 PM, Eric Rowell notifications@github.comwrote:\n\n> Hey Jason, closing this pull request for now because I haven't had anyone\n> else mentioning this - I'll keep track of it though in my todo list. I'm\n> still waiting for MS to send me some test devices ;)\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/pull/141#issuecomment-16799622\n> .\n. Not possible in Safari or iOS here.  I'll try on FF on another machine.\n\nOn Mon, Apr 22, 2013 at 9:43 PM, Eric Rowell notifications@github.comwrote:\n\n> would you mind testing this in FF, Safari, and iOS if possible? I'd like\n> to pull in the change, but I'm currently unable to test on windows devices.\n> If you give me the thumbs up, I can just pull it in.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/pull/141#issuecomment-16834594\n> .\n. Integrating as a separate commit from this pull request\n. What's not working on Windows Phone 8?  Have you tried it recently with the latest version of Kinetic to see if enhancements made in the past 10 months have improved things?\n\nI am assuming that you're referring to opening a web page in IE10 on WP8, and not creating an HTML5 application.  I can say that I have tested Kinetic on WP8 with success (sometimes, just need tweaking, but that's primarily to the HTML, not the Kinetic/canvas code).\n\nAs for what @ericdrowell referred to, IE10 introduced the MSPointerEvent that brings mouse, touch, and pen events all into one single event.  This has since been committed to webkit and firefox as \"pointerevent\", so expect to use it everywhere in the future.\n\nThe nice thing, though, is if a MSPointerEvent is not handled, it elevates to a normal mouse event (so I don't even try to handle the new event in my Kinetic apps).\n. I closed it due to no response. Guessing that it's probably related to this (which is still open):\n\nhttps://github.com/ericdrowell/KineticJS/issues/880\n. [Finally] added this fix to the codebase.  Thanks for researching the issue and providing the code!\n. Fixing this by rendering the text (glyphs) to the hit canvas.\n. CI doesn't like the changes I made to the test. Still getting familiar with the new test framework...\n\nEdit: Fixed the test, CI passes.\n. Since MSPointer events automatically elevate to Mouse events if they aren't handled, is this still a concern?  My Win8 apps have been working fine with the first touch elevating to a mouse event.\n. In IE10/11, you need to tell the browser that you will be handling touch events for a container (else, it will try to interpret touch as an action for the browser to perform, like panning or zooming, etc).\n\nIf you want to try it out, edit the Drag/Drop tutorial that you referenced to add a style to the container div (did you know that the code in those tutorials are in a live editor?):\n\n``` html\n<div id=\"container\" style=\"-ms-touch-action: none;\"></div>\n```\n\nReference: http://msdn.microsoft.com/en-us/library/ie/hh772044(v=vs.85).aspx\n. Do you have a jsFiddle or something that exhibits the issue so that I can take a look in IE9?\n. If this is still a problem with > 4.7.2, then reopen this issue.\n. Oh, are you trying to use the DataURI as the address of the web page?  (Sorry, haven't opened your example yet).  IE9 won't allow this, but you can create a img src=\"your data uri\" in the popup window.\n\nLook at how I handle a popup window here (code at bottom) as an example that works in IE9:\n\nhttps://github.com/jfollas/CanvasKineticDemo/blob/master/kineticDemos/6.1.toDataURL.htm\n. When you say \"SVG Image\", is that using Kinetic.Image to draw a picture onto the canvas (using svg as a source of that image), or is it using a SVG path in conjunction with the Kinetic.Path shape?  Do you have a jsFiddle that exhibits this issue so we can keep an eye on it (especially if an upcoming browser fix could positively affect the results)?\n. We can't do anything about #98 because it's native browser rendering issue.  Apparently,at the moment, only Firefox will respect the Canvas context's opacity setting when SVG is used as an image (Chrome and IE ignores opacity when it renders the SVG using drawImage(), while correctly rendering any other image format using the very same code).\n\nBy the same token, because it's native code in the browser that renders the image, I don't believe that we have control over anti-aliasing from Kinetic, which seems to be the cause of the issue that you are reporting here (\"jagged\" rendering).  I think we'll just need to wait for Firefox 24 as @fuzzley reported above.\n. I had to review the Path code, but I think I see the culprit.  At the end of drawing all of the vectors, it's doing a fill and stroke operation.  The fill part of that operation will close the path, which is giving it area between the endpoints of your curve - Kinetic is picking up this invisible area as being part of the shape.\n\nI can probably break up the fillStroke() into a separate fill and stroke operation, and only perform the fill operation if there's something to fill with.\n\nMaybe Eric will have another suggestion for handling stroke-only scenarios to prevent the inside of the shape from being detected by Kinetic.\n. Committed the fix.  If the shape's \"fill\" is not defined, then it will only Stroke() the path.\n. Wonder what the range of browser support is... \n\nSVG is neat because you can use it as the src of an img right in your HTML, so it doesn't surprise me that there are browsers that can render SVG onto a canvas (using context.drawImage), treating it as just another image format.\n\nKinetic's Path shape isn't intended to replace SVG, or even render SVG.  I created it just for reusing the terse Path syntax since Canvas didn't have an equivalent yet (the latest [WhatWG spec](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#the-canvas-element) shows a lot of SVG being brought into Canvas, including native Path support).  \n\nBefore Kinetic.Path, my alternative was a custom Shape with Canvas API commands to perform each operation that was represented within the SVG Path data (moveTo, lineTo, etc).\n. I've reproduced your code as a JSFiddle: http://jsfiddle.net/KBnYM/\n\nThe problem with issues like this is that Kinetic has no control over how the browser handles rendering - Kinetic simply tells the browser what to do, and the browser performs the rendering of pixels to the screen using native code.  Firefox and Internet Explorer both correctly anti-alias your rotated image, but Chrome (at least the current version) does not when 2D acceleration is enabled.\n\nBut, if you were to \"Disable accelerated 2D canvas\" (from URL: chrome://flags/#disable-accelerated-2d-canvas), then Chrome's software renderer correctly anti-aliases the image on my machine.  This would suggest a bug with Chrome's accelerated 2D canvas implementation.  \n\nUnfortunately, I don't think there's anything that we can do in Kinetic to this handle bad behavior that exists only in versions of Chrome.\n. I believe these are Chromium bugs that may cover the bad behavior that you are seeing: \nhttps://code.google.com/p/chromium/issues/detail?id=7508\nhttps://code.google.com/p/chromium/issues/detail?id=82268\n. You have to click the \"Enable\" link to turn on the \"Disable accelerated 2D canvas\", and then click the Relaunch button at the bottom.  Not saying this is the recommended fix to solve your issue, but that this demonstrates that it's an issue with Chrome's 2D GPU accelerated canvas implementation.\n\nDefault:\n![Default](https://f.cloud.github.com/assets/1516231/1086466/56c31d30-15fd-11e3-99c5-08fc2aaa03da.PNG)\n\n2D Accelerated Canvas Disabled:\n![2D Acceleration Disabled](https://f.cloud.github.com/assets/1516231/1086467/5a936104-15fd-11e3-8415-470b0bc61fa4.PNG)\n. I believe this is a bug in the current version of Chrome. I can confirm similar behavior after a while of using a canvas on a page.\n\n-----Original Message-----\nFrom: \"nvikram\" notifications@github.com\nSent: \u200e9/\u200e7/\u200e2013 2:14 AM\nTo: \"ericdrowell/KineticJS\" KineticJS@noreply.github.com\nSubject: [KineticJS] Canvas goes blank quite often (#598)\n\nQuite often the canvas goes blank and does not render the shape or the shape maybe rendered but not the fill colors. This makes the canvas looks empty. Check screenshot of kineticjs tutorial page.\nTested in Chrome Version 29.0.1547.66 m\n\n\u2014\nReply to this email directly or view it on GitHub.\n. Note: It's the layer.draw() that is causing the offset issue, not the inclusion of additional textpath elements in the group.\n\nhttp://jsfiddle.net/BBWE3/5/\n\nEric: Looks like there's an extra context save() that is not being restored when you look at the trace:\n\n   {\n      \"property\": \"textAlign\",\n      \"val\": \"left\"\n   },\n   {\n      \"method\": \"save\",\n      \"args\": []\n   },\n       {\n          \"method\": \"save\",\n          \"args\": []\n       },\n. layerX and layerY were added for Firefox support (because they don't use offsetX and offsetY).  Betting that Safari/webkit is detecting layerX/Y in the ternary expression, even if that part of the expression is not in the evaluation path.\n\nMaybe we should separate the ternary into an actual if/else block?  Would Safari/webkit still throw an error if the code is not executed?  I don't have Safari (or half-eaten fruit devices) to test, but could whip together a JSFiddle.\n. TextPath has a similar issue that I haven't researched yet. As if the text isn't rendering to the hit canvas.\n\n-----Original Message-----\nFrom: \"Eric Rowell\" notifications@github.com\nSent: \u200e10/\u200e4/\u200e2013 4:44 PM\nTo: \"ericdrowell/KineticJS\" KineticJS@noreply.github.com\nSubject: Re: [KineticJS] Click on Kinetic.Text doesn't fire mousedown event.(#627)\n\ncan you post the code on jsfiddle?\n\u2014\nReply to this email directly or view it on GitHub.\n. I modified your example a bit to show the hit canvas, make the shape larger by scaling the group (my eyes hurt trying to mouseover that small shape on my screen), and to change the fill of the inside rectangle upon mouseover/mouseout.  \n\nDo you still see the bad behavior with my modifications?\n\nhttp://jsfiddle.net/jfollas/hKqPD/\n. What is the use case for this?\n\nOn Thu, Oct 10, 2013 at 7:51 PM, mikagenic notifications@github.com wrote:\n\n> dragstart and dragend events are not being clled when dragging on an empty\n> layer (although they do for the stage!)\n> \n> I know this can be overcome with a transparent rect etc but these solution\n> are hackish and error prone.\n> \n> It would be good to make the layer resposive to these events.\n> \n> Thank you!\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/638\n> .\n. Do you have a jsFiddle that we can build upon?\n\nOn Mon, Oct 14, 2013 at 2:33 AM, mikagenic notifications@github.com wrote:\n\n> ericdrowell & jfollas, I would be grateful if you can look at my question\n> at\n> http://stackoverflow.com/questions/19354602/kineticjs-drawing-shapes-with-drag-drop\n> which is what I'm really trying to achieve and what prompted this question.\n> \n> Thank you!\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/638#issuecomment-26237795\n> .\n. This was due to a bug fix from somebody trying to get the opposite results\nof you... They had a path that they just needed to be stroked, but it was\nbeing filled.  We corrected the offending behavior, which you noticed.\n\nOn Thu, Oct 17, 2013 at 5:39 AM, Simon notifications@github.com wrote:\n\n> after comparing with the example, found that adding a terminating 'z' to\n> the data string will make it work with v4.7.2\n> \n> data: 'm 35,30 c 20,-10 -16,-13 12,-2 3,-2 25,-10z',\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/647#issuecomment-26490827\n> .\n. I don't think this is a bug in Path, per se... But it looks like an issue\nwith the order of which objects are instantiated and added to containers.\n Maybe Eric has more input.\n\nBut, look at this fork of your fiddle: http://jsfiddle.net/hUTJW/\n\nI add the layer to the stage before adding the Paths to the layer, and it\nworked.\n\nOn Tue, Oct 29, 2013 at 12:44 PM, La\u00e9rcio de Sousa <notifications@github.com\n\n> wrote:\n> \n> Please consider this example: http://jsfiddle.net/lbssousa/rMHrU/\n> \n> If I try to set both stroke and fill in my Path shapes (uncomment the\n> \"fill: ...\" attributes in the fiddle), the script fails (at least in my\n> tests).\n> \n> Tested with KineticJS 4.7.2 on Google Chrome 30.0.1599.114 for Linux.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/663\n> .\n. Depending on your platform, it may be easier to defer gesture handling to\nthe underlying HTML (i.e., at the container DIV level instead of within\nKinetic).\n\nOn Mon, Nov 11, 2013 at 11:26 AM, Anton Lavrenov\nnotifications@github.comwrote:\n\n> I added pinch event to my project (that is using kineticjs).\n> I made first implemantation from here:\n> http://www.html5canvastutorials.com/labs/html5-canvas-multi-touch-scale-stage-with-kineticjs/\n> But I had some problems, so I moved to using hammer.js. It so easy and\n> clean http://eightmedia.github.io/hammer.js/\n> \n> My code example:\n> \n> //get stage document element and listen itvar transformer = Hammer(this.getStage().getContainer());\n> var startScale = null;transformer.on(\"transformstart\", function(e) {\n>   startScale = _this.getCamera().getScale();\n> });transformer.on(\"transform\", function(e) {\n>   return _this.getCamera().setScale(startScale \\* e.gesture.scale);\n>   // or stage.setScale(...) or... Whatever you want});\n> \n> You can do the same for swipe event.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/682#issuecomment-28214210\n> .\n. Correct that it's by design. We had the opposite bug filed where an open shape was incorrectly filling when they just wanted it stroked, so this seems the most appropriate behavior.\n\n-----Original Message-----\nFrom: \"Dieter Luypaert\" notifications@github.com\nSent: \u200e2/\u200e10/\u200e2014 3:28 PM\nTo: \"ericdrowell/KineticJS\" KineticJS@noreply.github.com\nSubject: Re: [KineticJS] Kinetic.Path cannot be open with a fill (#721)\n\nChecking the code, it seems to be intentionally.\n            if (closedPath) {\n                context.fillStrokeShape(this);\n            }\n            else {\n                context.strokeShape(this);\n            }\nYou can do a checkout, modify src/plugins/Path.js:86 and change it to:\n            context.fillStrokeShape(this);\n\u2014\nReply to this email directly or view it on GitHub.\n. Add a \",z\" to the end of your path to close the path (necessary for\nfilling).\n\nOn Tue, Oct 28, 2014 at 1:06 PM, Bernardo F. Domingues <\nnotifications@github.com> wrote:\n\n> If I may comment on this issue with an example, why this path\n> http://jsfiddle.net/bernardofd/vvd87737/ can't be filled like this\n> (made with free-drawing on FabricJS)?\n> [image: image]\n> https://cloud.githubusercontent.com/assets/2365802/4812964/84b89632-5ec4-11e4-9fea-4d72c6424dc9.png\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/ericdrowell/KineticJS/issues/721#issuecomment-60792480\n> .\n. It's not an easy problem to solve universally. Unfortunately, SVG Path\nsupport in Kinetic does not attempt to handle all edge cases.  As you\ndiscovered, you may need to manually split the path into multiple shapes to\nhave different behavior for different parts.\n\nOr, maybe before closing the path with a z command, you can try to M to\nyour first point (so closing won't create that line connecting to the first\npoint).\n\nOn Tue, Oct 28, 2014 at 1:34 PM, Bernardo F. Domingues <\nnotifications@github.com> wrote:\n\n> @jfollas https://github.com/jfollas Yes, indeed. Thank you for your\n> response. But this might not be the end result that the user may want,\n> since it creates a black line that closes the polygon. In order to\n> reproduce exactly, I may have to create two overlapping paths, one with the\n> stroke and other with the fill, as seen here\n> http://jsfiddle.net/bernardofd/vvd87737/2/ (enhanced).\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/ericdrowell/KineticJS/issues/721#issuecomment-60797285\n> .\n. As Eric mentioned above, Kinetic attempts to correct an issue with a double-shadow being applied by utilizing a temporary canvas, and then copying the temporary canvas to the final canvas.  Chrome has had a bug for a long time now with \"using drawImage to copy from one canvas to another, when the source canvas had transparent areas\".  The Chromium bug at fault appears to be this one, if you want to track status or provide feedback to Chrome about their bug: https://code.google.com/p/chromium/issues/detail?id=100703\n\nOne possible workaround would be to bypass this buffering technique by overriding a helper function in Shape.js named _useBufferCanvas.  If this function returns false, then the \"old\" way will be used, which may result in the double shadow issue, depending on the browser and your shapes.\n\nYou can override on a per-shape basis as follows:\n\n``` javascript\nvar rect4 = new Kinetic.Rect({ ... });\n\nrect4._useBufferCanvas = function () {\n    return false;\n};\n```\n\nOr, another possible patch would be to override globally for a given type of shape (Rect, Circle, etc) with User Agent detection (include the following code before instantiating any shapes of the type that you specify as the first argument):\n\n``` javascript\nKinetic.Util.addMethods(Kinetic.Rect, {\n    _useBufferCanvas: function () {\n        if (Kinetic.UA.browser === 'chrome')\n            return false;\n        else\n            return (this.hasShadow() || this.getAbsoluteOpacity() !== 1) && this.hasFill() && this.hasStroke() && this.getStage();\n    }\n});\n```\n\nThe point of mentioning these workarounds is that you can do this in your own application code without waiting for the next official release of Kinetic.\n\nSee this Fiddle for results: http://jsfiddle.net/ae3A4/1/\n. I can understand the frustration that comes from having an API change from underneath you, but it's not really fair to lay into Eric so hard about this.  He puts so much time into producing a free and open source library to make it easier to do cool things with the canvas, and doesn't deserve to be chastised over a decision that he made based on feedback that he received.\n\nInstead of going back to 4.5.5, it may be easier to just change your project's version of Kinetic 5.x to use radians, since Kinetic is fully open source.  This would have a benefit of your code not needing changed yet again when support for radian angles are restored.\n\nAfter a quick look through the code, there's only one line in node.js (1145, part of _getTransform) that would seem to be the culprit.  Remove the conversion from degrees to radians there, and you can then supply all of your rotations in radians.\n\nTest providing radian angle for rotation: http://jsfiddle.net/mjg6r/1/\nModified 5.0.1: http://pastebin.com/raw.php?i=WXaHyd1R\n. For the record: I'm still in favor of the old/separate .rotation (for\nradians) and .rotationDeg (for degrees), with one just being a convenience\nmethod to set the other.  Not sure what kind of impact this has on the\nbackend stuff, like tweens, etc...\n\nOn Mon, Mar 17, 2014 at 12:47 AM, Paul van Dinther <notifications@github.com\n\n> wrote:\n> \n> No, it is definitely a bad change. The only bad one really. The changes to\n> setPosition, scale and offset also forced me to do a lot of code changes\n> but I can see why you did it.\n> As long as the javascript Math unit handles angles in radians you should do\n> the same. But if you feel very strongly about it and insist to go non\n> standard then I hope you provide a setRotationRad and rotateRad\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/743#issuecomment-37784932\n> .\n. You're looking for a bounding box function.  The Path plugin does not have\nanything today can do this for you.\n\nI'm not sure that using X/Y coordinates from the path itself will give you\neverything that you need to roll your own.  Some path components are vector\ncommands, like elliptical arcs and B\u00e9zier curves.  These will be defined\nusing a few X/Y coordinates, but rendered with points that may be far from\nthose control points.\n\nI'm wondering if a generalized bounding box algorithm could be produced for\nany shape, using pixel-detection data from the hit canvas....  Might not be\nthe best performing code to do a brute-force search for pixels from the\nbitmap data, but is would at least be one possible solution.\n\nOn Sun, Mar 2, 2014 at 7:42 PM, wiregrasscoder notifications@github.comwrote:\n\n> Folks,\n> \n> Is it possible to retrieve min/max x/y values from a path created in\n> KineticJS? When using path code exported from Adobe Illustrator (and\n> ai2canvas), a feature like this would be _extremely_ helpful.\n> \n> At the moment, my workaround is to manually look through the path code and\n> pull out min/max x/y values by hand. Obviously this is time consuming.\n> \n> Thanks!\n> wiregrasscoder\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/834\n> .\n. Kinetic doesn't actually draw every pixel of arcs and curves - it simply\ntells the browser \"I need this curve\", and native code in the browser\nrenders the pixels.  So, we don't actually know the x/y of the individual\npixels that are rendered without calculating them ourselves.\n\nBut, when I wrote the TextPath shape, I needed to find points along the\npath to know where to render glyphs.  So, some undocumented functions that\nmay be of assistance to you if you wanted to attempt to write your own\nbounding box algorithm using path traversal:\n\nKinetic.Path.getPointOnCubicBezier(pct, P1x, P1y, P2x, P2y, P3x, P3y, P4x,\nP4y)\nKinetic.Path.getPointOnQuadraticBezier(pct, P1x, P1y, P2x, P2y, P3x, P3y)\nKinetic.Path.getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi)\n\nThese functions return a point object (i.e.,  { x: 123, y: 456} ).  You\nwould just need to traverse the curve by iterating the pct from 0 to 1.0\nusing some increment (i.e., 0.1 to get each point 10% along the path), and\ntrack the min/max over all of the parts of the path.  For arcs, you iterate\nthe theta property from the starting angle to the ending angle.\n\nA parsed version of the path string can be found in your instance's\nPath.dataArray.  Refer to the findSegmentToFitCharacter function within\nTextPath.prototype._setTextData for how to used the parsed data in\nconjunction with these functions.\n\nIf you're successful in implementing this, feel free to submit a pull\nrequest!\n\n-Jason\n\nOn Sun, Mar 2, 2014 at 10:18 PM, wiregrasscoder notifications@github.comwrote:\n\n> Thanks jfollas. In my case, the paths use both lines and Bezier curves,\n> however, the shapes are such that it would suffice to just know the min/max\n> x/y values used to create the path. That's all I would need for an accurate\n> bounding box.\n> \n> It would be great if KineticJS could tuck path coordinates away and return\n> max/min of a shape. It may not work on every shape, but I've seen others\n> performing elaborate workarounds with regex and eval statements to\n> accomplish this.\n> \n> I think I may be able to roll my own bezierCurveTo and lineTo methods that\n> track max/min values per path...\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/834#issuecomment-36478766\n> .\n. The reason is because Internet Explorer 10+ doesn't recognize the iOS touch events, but instead uses the pointer events (http://www.w3.org/TR/pointerevents/). \n\nHammer is a polyfill, so that's another solution that could be used as a work around (though I still prefer to just let pointer events elevate into mouse events... in which case, the Kinetic mobile flag needs to be false for it to work on the phone).\n. I've been experimenting with my own private kinetic script to see what\nworks the best. I think I have a decent solution, just need to add it to\nthe github project.\n\nOn Wed, May 7, 2014 at 10:00 AM, Anton Lavrenov notifications@github.comwrote:\n\n> May be we can insert some polyfill to KineticJS? For example\n> https://github.com/WebReflection/ie-touch#ie-touch? Or add some note tp\n> documentation (or readme, or wiki, hmmm)?\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/880#issuecomment-42430136\n> .\n. You can adjust the offset. I think what you're going for is this:\n\nhttp://jsfiddle.net/eL2rr/2/\n\nOn Tue, Apr 8, 2014 at 6:35 PM, AlvinPLeung notifications@github.comwrote:\n\n> The x, y of a circle is not scaled correctly.\n> http://jsfiddle.net/eL2rr/\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/886\n> .\n. Confirmed: The canvas is resizing, but the red DIV, as a block element,\ntakes up the entire width. Anton's \"inline-block\" suggestion would reduce\nthe surrounding div to the size of its contents, which is what I think you\nwere expecting.\n\nOn Thu, Apr 17, 2014 at 11:47 AM, Anton Lavrenov\nnotifications@github.comwrote:\n\n> Why do use think it is not working?\n> \n> Use display : inline-block; css for container.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/898#issuecomment-40729177\n> .\n. Can you explain? Resizing the stage does not affect the scaling used, so if\nyour image's X coordinate is 200 but the stage is only 100 wide, then the\nimage will be drawn off stage.\n\nOn Thu, Apr 17, 2014 at 12:04 PM, Confile notifications@github.com wrote:\n\n> Well there is still an issue, because the content is not resized with the\n> resize of the stage.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/898#issuecomment-40731104\n> .\n. Were you maybe expecting this behavior: http://jsfiddle.net/7QTmz/1/\n\nOn Thu, Apr 17, 2014 at 12:07 PM, Jason Follas jfollas@gmail.com wrote:\n\n> Can you explain? Resizing the stage does not affect the scaling used, so\n> if your image's X coordinate is 200 but the stage is only 100 wide, then\n> the image will be drawn off stage.\n> \n> On Thu, Apr 17, 2014 at 12:04 PM, Confile notifications@github.comwrote:\n> \n> > Well there is still an issue, because the content is not resized with the\n> > resize of the stage.\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/898#issuecomment-40731104\n> > .\n. You'll probably want to use offsetX and offsetY instead of offset (which takes an object now with x and y properties). And, while it doesn't appear that the stage supports this tween (in my few minutes of playing around), you can definitely tween a layer:\n\nhttp://jsfiddle.net/PQ9um/\n. It appears that the built in tweening engine can only go as low as the layer (which directly maps to a canvas in the DOM).\n\nNothing stops you from using an external tweening engine, such as the GreenSock Animation Platform (http://www.greensock.com/get-started-js/).  \n\nCheck out this modified version of that fiddle:\n\nhttp://jsfiddle.net/PQ9um/2/\n\n(Just be aware that each canvas is being redrawn with each frame, so performance may become an issue, especially if the rendering logic and/or garbage collection takes longer than a frame's timeslice to execute).\n. I discovered today that there's a Greensock plugin for Kinetic: http://api.greensock.com/js/com/greensock/plugins/KineticPlugin.html\n. You can use an external tweening library, like GreenSock (http://www.greensock.com/gsap-js/) with it's ColorProps plugin (http://api.greensock.com/js/com/greensock/plugins/ColorPropsPlugin.html) to tween colors and then apply them to the Kinetic shape on each frame update:\n\nhttp://jsfiddle.net/ZH2AS/2/\n. No plans for direct support of tweening color stops on a gradient fill. \n\nI would consider this tween to be an outlier that would justify the use of an external library, since it's easy enough to implement with something like Greensock, and deferring complex/outlier tweens to an external engine does not inflate the Kinetic library's size (and potential slow down built-in tween animations in the process for everyone else who just need simple tweens). Once you have justification for using Greensock for a complex tween, then you can actually use it for all of your tweens.\n\nSent from my Windows Phone\n\n-----Original Message-----\nFrom: \"AxoInsanit\" notifications@github.com\nSent: \u200e4/\u200e20/\u200e2014 3:48 PM\nTo: \"ericdrowell/KineticJS\" KineticJS@noreply.github.com\nCc: \"jfollas\" jfollas@gmail.com\nSubject: Re: [KineticJS] How can I tween shape gradient fill stops? (#901)\n\nThanks for the reply, my question was \"s there way to do this with the current Tween object?\"\nSo I guess that's a no?\nAre there plans to add support for this on Tween? the whole idea of using something like KineticJS is not having to resort to other libraries...\n\u2014\nReply to this email directly or view it on GitHub.\n. You have to add the group's x/y to the rect's x/y then. \n\nThe group is a container that can be moved, and shapes within a group are placed relative to the group.  So if your group is at 50,50, and a rect within the group is at 0,0, that rect will appear at 50,50 when rendered.\n\n-----Original Message-----\nFrom: \"nitirajrathore\" notifications@github.com\nSent: \u200e4/\u200e20/\u200e2014 1:37 PM\nTo: \"ericdrowell/KineticJS\" KineticJS@noreply.github.com\nSubject: [KineticJS] Rectangle's x and y coordinates don't change if it is ina group and group is draged (#902)\n\nHi,\nI have found that if the a Kinetic.Rect is inside and group and the group is dragged then the x and y coordinates of the Rect don't change (see fiddle http://jsfiddle.net/nitirajrathore/kXqaL/ ) . But if the Rect is not inside any group and the Rect is dragged then its x and y coordinates changes properly (see fiddle http://jsfiddle.net/nitirajrathore/GqMTG/1/ )\nI actually needed the new coordinates of Rect in my work even if it is in a group. I think its a bug.\n\u2014\nReply to this email directly or view it on GitHub.\n. I remembered seeing a `.getAbsolutePosition()` function once, and just converted your fiddle to use it - seems to work as expected.\n\nhttp://jsfiddle.net/kXqaL/2/\n. Try overriding the mobile flag for now if the browser is Internet Explorer:\n\nhttps://github.com/ericdrowell/KineticJS/issues/880\n. Some background first, for anyone else coming to this thread:\n\nIE10 still reported itself in the user agent as \"MSIE\". But, because people were [wrongly] trying to apply IE6/7/8 semantics if they detected any version of IE, MSFT has altered the user agent for IE11 to just look like a Mozilla-compatible browser (no mention of \"MSIE\" in the user agent).  This starts with Windows 8.1 and Windows Phone 8.1.\n\nI first patched the UA detection and implemented the touch workaround for mobile IE 10/11 here:\nhttps://github.com/ericdrowell/KineticJS/commit/f9f7b89c3f8522868bab3a857c687b7487bd2f10\n\nand then corrected a bug here:\nhttps://github.com/ericdrowell/KineticJS/commit/8d5298d7ca8e36ee433fd1a121103f74e737ddf2\n\nUnfortunately, I only have Windows Phone 8.1 devices/emulators (IE11) now to verify that the patches work.  Which means there could still be an issue with mobile IE10.\n. One immediate solution would be to use Greensock for your tweens, which\noffers such ability (as well as a much richer animation feature set, such\nas timelines).\n\nGreenSock Animation Platform:\nhttp://www.greensock.com/\n\nDocs for the Kinetic plugin for GSAP:\nhttp://api.greensock.com/js/com/greensock/plugins/KineticPlugin.html\n\nOn Fri, May 9, 2014 at 4:30 AM, Michael Dobekidis\nnotifications@github.comwrote:\n\n> Hello,\n> \n> I think it would be extremely beneficial if we had an \"onUpdate\" callback\n> function within tweens, because sometimes it is needed to \"check\" things\n> while the animation is running. If someone has implemented this please\n> share how.\n> \n> Thanks.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/922\n> .\n. The bug is in Chrome itself (related to shadows on images not having alpha channel support). You can find a workaround in this thread: https://github.com/ericdrowell/KineticJS/issues/726\n. The Kinetic Context object is a proxy to the HTML5 Canvas Context, so it does not implement 100% of the browser's Canvas API.  You can get a reference to the actual browser context using Context._context, as in:\n\n``` javascript\nlayer.getContext()._context.globalCompositeOperation = \"source-atop\";\n```\n. This is probably due to RequestAnimationFrame, which is letting the browser tell the program when it's ready to draw the next frame. It makes sense for RAF to not fire when the browser tab does not have focus, since that would be rendering frames that are never displayed.\n\nYou may need to look into using a Tween engine with more sophistication, like GreenSock Animation Platform (which has a Kinetic Plugin and a Timeline object, which is handy for coordinating many different tweens that need to work together, etc)\n\n-----Original Message-----\nFrom: \"Martin Velchevski\" notifications@github.com\nSent: \u200e5/\u200e29/\u200e2014 3:55 PM\nTo: \"ericdrowell/KineticJS\" KineticJS@noreply.github.com\nSubject: [KineticJS] Tween not animating when it's browser window loosesfocus. (#943)\n\nSo I have a tween which I'm calling each second with setTimeout()... Everything works like a charm, however when I switch to another tab and wait for some time to pass, upon returning to the tween tab the animation continues from where I left off. \nIs there any way around this? I really want to stick with KineticJS! :)\n\u2014\nReply to this email directly or view it on GitHub.\n. toImage() relies on the same functionality in the undelying Canvas API.\nWhen it generates an image, only the visible parts are included (which\nmakes sense, because that's all that is expected to be displayed to the\nuser).\n\nOn Tue, Jul 1, 2014 at 12:19 PM, DigitalFlux notifications@github.com\nwrote:\n\n> I have a layer which I would like to cache via toImage. Caching it works\n> great for when all of the objects for the application are already in view,\n> but for any objects that are either off-screen or partially off-screen, the\n> parts that are not in view are clipped when the layer is cached. This\n> becomes very apparent when you drag, and the half of the object that was\n> off-screen is non-existent until mouseup restores the hidden layers with\n> the actual objects. I tried using setClip() in the event that layer\n> clipping defaulted to the size of the viewable window, to no avail (I am\n> starting to think that the layers do not concern themselves with what is\n> \"outside\" the stage bounds, even when specified, when you call toImage()).\n> \n> Is this a limitation of toImage(), a bug, or am I just missing something\n> to do before calling toImage() on a layer?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/ericdrowell/KineticJS/issues/965.\n. I reached out to Eric through another channel about this.\n\nIn the meantime, try the way back machine: Archive.org\n\nSent from my Windows Phone\n\n-----Original Message-----\nFrom: \"Theophile MORIN\" notifications@github.com\nSent: \u200e7/\u200e30/\u200e2014 7:50 AM\nTo: \"ericdrowell/KineticJS\" KineticJS@noreply.github.com\nSubject: Re: [KineticJS] Website is down (#986)\n\nIt seems yes.\nHard to code without documentation...\ni'm encountering a 403 Forbidden error too.\n\u2014\nReply to this email directly or view it on GitHub.\n. Eric took a hiatus due to being burned out. It was consuming all of his\nspare time to maintain the project. He left it in a pretty stable state,\nand Anton was great about committing bug fixes after the last official\nrelease (caveat: these fixes are in GitHub, but not in an official release).\n\nIf I had to guess, Eric will return to the project and make another\nofficial version release. But in the meantime, if Kinetic satisfied a need\nfor your project, then there's nothing that will stop you from continuing\nto use it (or fork it to add your own features or fix bugs that you find,\netc).\n\nOn Tue, Dec 2, 2014 at 11:24 AM, nmehlei notifications@github.com wrote:\n\n> Are these just rumors or is it official that KineticJS is not supported\n> anymore? Any word from the author?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/ericdrowell/KineticJS/issues/1048#issuecomment-65257863\n> .\n. ",
    "trey-jones": "That is better.  One outstanding TODO I'll get to another day will be to calculate only the important points on the line, rather than all of them.  Dotted line could be done in a similar fashion.\n. That is better.  One outstanding TODO I'll get to another day will be to calculate only the important points on the line, rather than all of them.  Dotted line could be done in a similar fashion.\n. ",
    "aom": "Has the support for Node.js been maintained after these initial commits or was it dropped?\n\nStrangely this is about the only relative result in Google. Possibly because Node.js refers to something else inside Kinetic.\n. Ok thanks for the update! \n\nI need to create Kinetic Canvas element server-side and render it to image. It's related to an urgent feature so I'm gonna go and fork Kinetic and try some of @bpartridge solutions. \n\nLet's see if it gets good enough for a new pull request.\n. Thanks @bpartridge. Module.js has been removed but Global.js actually has some sort of headless support in it.\n\nPhantomJS might be a fastlane in my case but I've already got Kinetic running with node-canvas and js-dom with minimum changes. Unit tests pass as well but I've crippled support for other headless browsers in Global.js.\n. Has the support for Node.js been maintained after these initial commits or was it dropped?\n\nStrangely this is about the only relative result in Google. Possibly because Node.js refers to something else inside Kinetic.\n. Ok thanks for the update! \n\nI need to create Kinetic Canvas element server-side and render it to image. It's related to an urgent feature so I'm gonna go and fork Kinetic and try some of @bpartridge solutions. \n\nLet's see if it gets good enough for a new pull request.\n. Thanks @bpartridge. Module.js has been removed but Global.js actually has some sort of headless support in it.\n\nPhantomJS might be a fastlane in my case but I've already got Kinetic running with node-canvas and js-dom with minimum changes. Unit tests pass as well but I've crippled support for other headless browsers in Global.js.\n. ",
    "bpartridge": "Afraid that my project took a bit of a technology pivot, so I'm no longer actively using Kinetic in production or development (though I still love the idea of Kinetic and hope to use it in the future, and it seems like it's gotten even better in the past year!). Feel free to fork my repo, although it seems like Module.js has disappeared entirely from Kinetic in the past year, so you wouldn't be able to use any of the newer features or bugfixes with my version. As far as I can tell, the functionality [here](https://github.com/bpartridge/KineticJS/blob/713eb133491dc260a87dabbb9c00d2097d48d016/src/Module.js#L29) hasn't been included in upstream master, namely using [node-canvas](https://github.com/LearnBoost/node-canvas) in a way that works with Kinetic. If this is a truly urgent feature, you might get more mileage out of running the latest upstream version through PhantomJS.\n. Afraid that my project took a bit of a technology pivot, so I'm no longer actively using Kinetic in production or development (though I still love the idea of Kinetic and hope to use it in the future, and it seems like it's gotten even better in the past year!). Feel free to fork my repo, although it seems like Module.js has disappeared entirely from Kinetic in the past year, so you wouldn't be able to use any of the newer features or bugfixes with my version. As far as I can tell, the functionality [here](https://github.com/bpartridge/KineticJS/blob/713eb133491dc260a87dabbb9c00d2097d48d016/src/Module.js#L29) hasn't been included in upstream master, namely using [node-canvas](https://github.com/LearnBoost/node-canvas) in a way that works with Kinetic. If this is a truly urgent feature, you might get more mileage out of running the latest upstream version through PhantomJS.\n. ",
    "jack-guy": "Is this still a possibility? It'd be very useful for my application.\n. Is this still a possibility? It'd be very useful for my application.\n. ",
    "ghost": "What a coincidence, I've been browsing this project for the last couple days, trying to get it working for my own purposes. Really glad to hear you're still developing!\n. yes this does relate to both drag and drop and the 'pinch' gesture \nscaling. Thanks for the workaround ill try it.\n\nOn 21/02/2013 18:02, Eric Rowell wrote:\n\n> I don't believe that performance has gone down, but there is a bug \n> related to drag and drop on mobile devices that causes a flicker. Is \n> this in reference to drag and drop? If so, the work around is to set \n> dragOnTop: false in the shape config. This particular issue will be \n> fixed with the next version, v4.3.4\n> \n> \u2014\n> Reply to this email directly or view it on GitHub \n> https://github.com/ericdrowell/KineticJS/issues/288#issuecomment-13899990. \n. Well, since this is an anti alias problem, it should be only one pixel wide.  So if the getIntersection code checked near the hit coordinates it should find something.  Could we modify getIntersection to search the 8 surrounding pixels if it finds alpha != 0 but does not find a matching shape?  In this case finding something slowly would be better than finding something quickly i think.\n. Happy too.  I will submit a pull after I finish all the corner cases.\n Literally.\n\nDavid\n\nOn Sat, Jul 20, 2013 at 7:21 PM, Eric Rowell notifications@github.comwrote:\n\n> That's a great suggestion fogbrain. would you mind trying it out and\n> submitting a pull request? Otherwise I can add this to my todo list to\n> further investigate\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/382#issuecomment-21303913\n> .\n. Hi Eric, Thanks for the response. And yes v4.5.4 worked without a hitch.\n. I have the same problem with 4.5.3.\n. Hey folks,\n\nI worked around this by first adding a \"shim\" layer with a big white rectangle (my background is white). My canvas size is 800x600, so you should adjust for your canvas size. Next, I added a separate layer for my draggable items. \n\nHope this helps some poor soul. I wrestled with it for quite a while. \n\n```\n  var layerShim = new Kinetic.Layer({\n        id: 'layerShim',\n        name: 'layerShimName',\n        clearBeforeDraw: false\n  });      \n\n  var layerDraggableStuff = new Kinetic.Layer({\n        id: 'layerDraggableStuff',\n        name: 'layerDraggableStuff',\n        clearBeforeDraw: true\n  });      \n\n  var rect = new Kinetic.Rect({\n    x: 0,\n    y: 0,\n    width: 800,\n    height: 600,\n    fill: 'white',\n    stroke: 'white',\n    strokeWidth: 4\n  });\n  layerShim.add(rect);\n  layerShim.draw();\n\n  // Add shim layer\n  stage.add(layerShim);\n\n  // Add nodes to draggables layer here... \n\n  // Add draggables layer\n  stage.add(layerDraggables);\n```\n. I'm running Android 4.3, so it looks like the Android bug is still lingering. Thanks for the workaround, @ericdrowell. Much cleaner than my elaborate hack. \n. Thank you Eric, Telerik MVC (http://demos.telerik.com/aspnet-mvc/slider) dropdown or sliders do not work. Maybe, there could be a conflict with Telerik ScriptRegistrar!  By-the-way, thanks for HTML Canvas Cookbook, very helpful.\n. I don't think so.  The most important case for users of the library is\nprobably 2 shapes which clearly overlap.  When you click you should\nalways hit one or the other.  The current anti-aliasing causes the\ndividing line between them to be in neither which is the big\ncomplaint.\n\nOn 11/27/13, Eric Rowell notifications@github.com wrote:\n\n> question: is it true that checking the 4 pixels around a pixel with an alpha\n> < 255 is accurate?  I would think that it's possible that adjacent pixels\n> could also have an alpha < 255 depending on the angle of the edge.  We could\n> go to all 8 pixels, but I wonder if that's accurate as well.  I'll try to\n> manually merge this in since it's been awhile. (sorry about that)\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/ericdrowell/KineticJS/pull/545#issuecomment-29426491\n. Yes, this is annoying. I think this is related with anti aliasing.\n\nI've created example: http://jsfiddle.net/LwRnj/\nMove the curosr between the squares.\n. @lavrton I never had any issue loading it with requirejs. Only with Dojo. My assumption is that KineticJS optimizations in the compressed code ends up breaking some of the AMD-detection code. The Dojo AMD loader successfully loads uncompressed KineticJS, but simply returns an empty object if I use the compressed version of KineticJS.\n. I agree with binoculars. I'd prefer to set the rotation in radians instead of degrees. It is more natural in mathematical calculations.\n. It can be vaguely expressed. If you set the rotation in degrees, the result is bad.\nSee: http://jsfiddle.net/klatecki/s3wCz/2/\n. Thanks jfollas. In my case, the paths use both lines and Bezier curves, however, the shapes are such that it would suffice to just know the min/max x/y values used to create the path. That's all I would need for an accurate bounding box.\n\nIt would be great if KineticJS could tuck path coordinates away and return max/min of a shape. It may not work on every shape, but I've seen others performing elaborate workarounds with regex and eval statements to accomplish this. \n\nI think I may be able to roll my own bezierCurveTo and lineTo methods that track max/min values per path...\n. Did this ever get merged in?  I'm using KineticJS 5.1.0 and can't get mousewheel to work on shapes.\n. Thanks for the quick response, that was the problem!\n. Hi, I'm facing the same problem, the reason behind this is that the touch coordinate is not scaled with the canvas. Currently I have overriden the _setTouchPosition methode, so that the touch position also be transformed.\n. ``` javascript\nsetZoomLevel: function(zoomLevel){\n       this.zoomLevel = zoomLevel;\n },\n getZoomLevel : function(){\n      return this.zoomLevel;\n },\n_setTouchPosition: function(evt) {\n            var touch, touchX, touchY;\n\n            if(evt.touches !== undefined && evt.touches.length === 1) {\n                // one finger\n                touch = evt.touches[0];\n\n                // get the information for finger #1\n                touchX = touch.clientX - this._getContentPosition().left;\n                touchY = touch.clientY - this._getContentPosition().top;\n                var zLevel = this.getZoomLevel() == undefined ? 1 : this.getZoomLevel();\n                this.touchPos = {\n                    x: touchX/zLevel,\n                    y: touchY/zLevel\n                };\n            }\n}\n```\n\nI have recomputed the touch position using the scale level this way. Maybe there is a better solution.\n. Oops, duplicate of #1071 . What a coincidence, I've been browsing this project for the last couple days, trying to get it working for my own purposes. Really glad to hear you're still developing!\n. yes this does relate to both drag and drop and the 'pinch' gesture \nscaling. Thanks for the workaround ill try it.\n\nOn 21/02/2013 18:02, Eric Rowell wrote:\n\n> I don't believe that performance has gone down, but there is a bug \n> related to drag and drop on mobile devices that causes a flicker. Is \n> this in reference to drag and drop? If so, the work around is to set \n> dragOnTop: false in the shape config. This particular issue will be \n> fixed with the next version, v4.3.4\n> \n> \u2014\n> Reply to this email directly or view it on GitHub \n> https://github.com/ericdrowell/KineticJS/issues/288#issuecomment-13899990. \n. Well, since this is an anti alias problem, it should be only one pixel wide.  So if the getIntersection code checked near the hit coordinates it should find something.  Could we modify getIntersection to search the 8 surrounding pixels if it finds alpha != 0 but does not find a matching shape?  In this case finding something slowly would be better than finding something quickly i think.\n. Happy too.  I will submit a pull after I finish all the corner cases.\n Literally.\n\nDavid\n\nOn Sat, Jul 20, 2013 at 7:21 PM, Eric Rowell notifications@github.comwrote:\n\n> That's a great suggestion fogbrain. would you mind trying it out and\n> submitting a pull request? Otherwise I can add this to my todo list to\n> further investigate\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/382#issuecomment-21303913\n> .\n. Hi Eric, Thanks for the response. And yes v4.5.4 worked without a hitch.\n. I have the same problem with 4.5.3.\n. Hey folks,\n\nI worked around this by first adding a \"shim\" layer with a big white rectangle (my background is white). My canvas size is 800x600, so you should adjust for your canvas size. Next, I added a separate layer for my draggable items. \n\nHope this helps some poor soul. I wrestled with it for quite a while. \n\n```\n  var layerShim = new Kinetic.Layer({\n        id: 'layerShim',\n        name: 'layerShimName',\n        clearBeforeDraw: false\n  });      \n\n  var layerDraggableStuff = new Kinetic.Layer({\n        id: 'layerDraggableStuff',\n        name: 'layerDraggableStuff',\n        clearBeforeDraw: true\n  });      \n\n  var rect = new Kinetic.Rect({\n    x: 0,\n    y: 0,\n    width: 800,\n    height: 600,\n    fill: 'white',\n    stroke: 'white',\n    strokeWidth: 4\n  });\n  layerShim.add(rect);\n  layerShim.draw();\n\n  // Add shim layer\n  stage.add(layerShim);\n\n  // Add nodes to draggables layer here... \n\n  // Add draggables layer\n  stage.add(layerDraggables);\n```\n. I'm running Android 4.3, so it looks like the Android bug is still lingering. Thanks for the workaround, @ericdrowell. Much cleaner than my elaborate hack. \n. Thank you Eric, Telerik MVC (http://demos.telerik.com/aspnet-mvc/slider) dropdown or sliders do not work. Maybe, there could be a conflict with Telerik ScriptRegistrar!  By-the-way, thanks for HTML Canvas Cookbook, very helpful.\n. I don't think so.  The most important case for users of the library is\nprobably 2 shapes which clearly overlap.  When you click you should\nalways hit one or the other.  The current anti-aliasing causes the\ndividing line between them to be in neither which is the big\ncomplaint.\n\nOn 11/27/13, Eric Rowell notifications@github.com wrote:\n\n> question: is it true that checking the 4 pixels around a pixel with an alpha\n> < 255 is accurate?  I would think that it's possible that adjacent pixels\n> could also have an alpha < 255 depending on the angle of the edge.  We could\n> go to all 8 pixels, but I wonder if that's accurate as well.  I'll try to\n> manually merge this in since it's been awhile. (sorry about that)\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/ericdrowell/KineticJS/pull/545#issuecomment-29426491\n. Yes, this is annoying. I think this is related with anti aliasing.\n\nI've created example: http://jsfiddle.net/LwRnj/\nMove the curosr between the squares.\n. @lavrton I never had any issue loading it with requirejs. Only with Dojo. My assumption is that KineticJS optimizations in the compressed code ends up breaking some of the AMD-detection code. The Dojo AMD loader successfully loads uncompressed KineticJS, but simply returns an empty object if I use the compressed version of KineticJS.\n. I agree with binoculars. I'd prefer to set the rotation in radians instead of degrees. It is more natural in mathematical calculations.\n. It can be vaguely expressed. If you set the rotation in degrees, the result is bad.\nSee: http://jsfiddle.net/klatecki/s3wCz/2/\n. Thanks jfollas. In my case, the paths use both lines and Bezier curves, however, the shapes are such that it would suffice to just know the min/max x/y values used to create the path. That's all I would need for an accurate bounding box.\n\nIt would be great if KineticJS could tuck path coordinates away and return max/min of a shape. It may not work on every shape, but I've seen others performing elaborate workarounds with regex and eval statements to accomplish this. \n\nI think I may be able to roll my own bezierCurveTo and lineTo methods that track max/min values per path...\n. Did this ever get merged in?  I'm using KineticJS 5.1.0 and can't get mousewheel to work on shapes.\n. Thanks for the quick response, that was the problem!\n. Hi, I'm facing the same problem, the reason behind this is that the touch coordinate is not scaled with the canvas. Currently I have overriden the _setTouchPosition methode, so that the touch position also be transformed.\n. ``` javascript\nsetZoomLevel: function(zoomLevel){\n       this.zoomLevel = zoomLevel;\n },\n getZoomLevel : function(){\n      return this.zoomLevel;\n },\n_setTouchPosition: function(evt) {\n            var touch, touchX, touchY;\n\n            if(evt.touches !== undefined && evt.touches.length === 1) {\n                // one finger\n                touch = evt.touches[0];\n\n                // get the information for finger #1\n                touchX = touch.clientX - this._getContentPosition().left;\n                touchY = touch.clientY - this._getContentPosition().top;\n                var zLevel = this.getZoomLevel() == undefined ? 1 : this.getZoomLevel();\n                this.touchPos = {\n                    x: touchX/zLevel,\n                    y: touchY/zLevel\n                };\n            }\n}\n```\n\nI have recomputed the touch position using the scale level this way. Maybe there is a better solution.\n. Oops, duplicate of #1071 . ",
    "netgfx": "Support for server-side Kinetic would be great, and I can already think of 1-2 ways to use it.\n. Support for server-side Kinetic would be great, and I can already think of 1-2 ways to use it.\n. ",
    "lavrton": "I think for current moment KineticJS has almost full support of NodeJS. All tests is passing. See `nodejs-demo.js` file as example.\n. If you need `moveTo` node to another layer on `dragstart` you may do this:\n\n``` javascript\nrect.on(\"dragstart\",function(){\n  rect.stopDrag();\n  rect.moveTo(tempLayer);\n  rect.startDrag();\n  layer.draw();\n});\nrect.on(\"dragend\",function(){\n  rect.moveTo(layer);\n});\n```\n. Currently `stage.toDataURL` should work as expected. If you still have problems, please, provide jsfiddle example.\n. Currently `stage.toDataURL` should work as expected. If you still have problems, please, provide jsfiddle example.\n. Resolved on fork. https://github.com/lavrton/KineticJS\n. http://jsfiddle.net/lavrton/bKq2y/2/ Tested with FireFox 27. Works fine. Reopen if need.\n. I don't think that `Kinetic` should be hidden from global namespace while using AMD. It is easier to use KineticJS with third party plugins if Kinetic in global namesapce (for example BackboneJS do same thing).\nAdding UMD patter to each plugin (or module) is defently bad idea. `returnExports` is fixed, thx!\n. I added this with nodejs support commit.\n. You should not use `fill` configuration for images. Use `fillPatternImage` instead. This example http://jsbin.com/hohir/1/edit demonstrate that in this case `toJSON` will work.\n. Not yet. @ericdrowell I think this feature must be with highest priority after FastLayer.\n. I made a demo with drop events support (drop, dragenter, dragleave, dragover). http://lavrton.github.io/KineticJS/Drag_and_Drop/Drop_Events.html\n. All suggestions are resolved. I added proportional feature to TODO list. I will close the issue. If need, please, create separate issues for features, bugs.\n. close by https://github.com/ericdrowell/KineticJS/commit/16511a9aefa28eb1102fe85b39335359e4cf3c6a\n. Does it work now?\n. Close via https://github.com/ericdrowell/KineticJS/commit/0b93e21e0b9e11165dfed7574dbafa0ae2a144e0.\n\n``` javascript\nKinetic.dragDistance = 5;\n// or\nnode.dragDistance(5);\n```\n. Currently works as expected http://jsfiddle.net/lavrton/CxgPN/2/.\nReopen if you have problems.\n. I tested examples (IE9) and for now they works very well.\n. I think the issue is not actual with latest KineticJS version and new cache mechanism. Please, reopen if need.\n. What you expected here? Rectangle is bigger than image. Please, repost your question to stackoverflow.\n. Is this workaround working for you?\n\n``` javascript\nimage.onload = function() {\n  if (!image.complete) {\n    image.src = image.src;\n    return;\n  }\n  // Insert your code here\n};\n```\n. I think that including such workaround with `try`:\n\n``` javascript\ntry {\n        if(a.length === 5) {\n            context.drawImage(a[0], a[1], a[2], a[3], a[4]);\n        }\n        else if(a.length === 9) {\n            context.drawImage(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n        }\n} catch(err) {}\n```\n\nis bad idea. Thoughts:\n1. It may break performance\n2. Unexpected \"invisible\" image.\n\nIf you want to check is image is ok, you may do this:\n\n``` javascript\nlayer.add(image);\ntry {\n  layer.draw();\n} catch (e) {\n  // ops...\n}\n```\n. Also you can use this small snippet:\n\n``` javascript\nif (Kinetic.UA.browser === \"mozilla\") {\n        var originDraw = Kinetic.Context.prototype.drawImage;\n        Kinetic.HitContext.prototype.drawImage = Kinetic.SceneContext.prototype.drawImage = function() {\n          try {\n            originDraw.apply(this, arguments);\n          } catch (e) {\n             console.log(e);\n          }\n        };\n      }\n```\n. Please, reopen if problem still exists and you have code example.\n. Hey! I will close the issue. I can't reproduce the problem on my Ubuntu station. So many chrome version was published after this issue, so I think problem is resolved. If not, please, reopen issue!\n. Problem is resolved. I will close the issue.\n. The problem was with firefox browser, and currnly is solved. Issue is closed.\n. Is this issue actual? You can define `dash` property of line as you wish, so line may look like  transition from one dash array to another.\n. Currently `onFinish` callback will be called even if node is destroyed. (with using `Tween` API )\n. Close as duplicate https://github.com/ericdrowell/KineticJS/issues/193\n. The issue is resolved. If you still have problems post your question on stackoverflow.\n. Currently drag&drop is going on the same layer. So this problem is not actual. I will close the issue.\n. With new KineticJS version `timeDiff` (in `Kinetic.Animation` callback) will be  floating-point number too.\n. As `transitionTo` is deprecated by `Tween` class, problem still exists. Currently this will not work:\n\n``` javascript\nvar tween = new Kinetic.Tween({\n node : node,\n duration : 1,\n offset: {\n  x : 2,\n  y : 2\n }\n});\ntween.play();\n```\n. I think that information that `Tween` is not support objects should be placed at documentation.\n. Issue can be closed, because currently nodes are dragging on same layer.\n. Should be fixed.\n. Can't reproduce bug with latest version: http://jsbin.com/xoqex/1/edit\n. I will close the issue. If it still actual for you, please, reopen with jsfiddle example.\n. @dchhetri , it is not working, because if call draw, it also call drawHit. Result: you have backgroud on bottom, line on top, so mouseup will fire on line shape, but not on background. As I know, Kineticjs has specal canvas for events. If you are calling \"layer.drawScene\", this canvas is not updating, so events for line not fire, but fire for background.\n. Also If you need some events on stage you can use this tip. Create invisible background rectangle and listen events on it (or in stage, while events are bubbling):\n\n``` javascript\nvar back = new Kinetic.Rect({\n    draggable : true,\n    // disable move on dragging\n    dragBoundFunc : function() {\n        return {x : 0, y : 0};\n    }\n});\nlayer.add(back);\nback.on(\"click tap\", () => { \n    // some code\n});\n```\n. Resolved issue. I will close it.\n. Currenly KineticJS works fine with AMD. I will close the issue.\n. I think issue can be closed. Currently opera works as expected.\n. If you need validation you may try to use debugging plugin: https://github.com/ericdrowell/KineticJS/issues/658#issuecomment-36724160\n. Clone method now don't clone id. https://github.com/ericdrowell/KineticJS/commit/e5db9115a09e22dea2d0f0b97296ec9131addd70\n. Now you can do this with `drawHitFromCache` function using `alphaThreshold` parameter.\n. Demo for bug: http://jsbin.com/cuqas/1/edit\nOk for rect, not ok for text.\n. Hit canvas is not updating while dragging (for performance reasons).\nAs a workaround you may draw layer on dragend.\n\n``` javascript\nkItems.lowerLayer.on(\"dragend\", function() {\n    kItems.upperLayer.draw();  // or just drawHit()\n});\n```\n\nUpdated demo: http://jsfiddle.net/lavrton/37pG3/1/\n. Fixed at fork. https://github.com/lavrton/KineticJS\n. Currently it is fixed.\n. Thanks! But perfomance is bad for me. Waiting for native support.\n. Close as duplicate https://github.com/ericdrowell/KineticJS/issues/193\n. v5.0.1 dblcick event works: http://jsfiddle.net/lavrton/a69V9/\nBut this is bad use case, because dblcick, actually, should not trigger on circle. Because after each click a new circle is created, so second click happens on NEW node.\n. Your use case is very strange. You should not use \"private\" properties. Please, repost you question to stackoverflow, if it still actual.\n. You may add text to layer before converting.\nOr you have to set {x, y} in `toImage` params: http://jsfiddle.net/lavrton/TMML9/1/\n. Should be resolved with latest version. Also with this fix https://github.com/ericdrowell/KineticJS/commit/6c46e44bbd2ba88fd3d8f63f71d8f9fa1606f8a1\n. http://jsfiddle.net/ajzhG/40/\nThis demo will not work on ipad3 with retina display.\nBecause KineticJS automatically resolve high resolution device and increase canvas size twice.\nIf you don't need such behaviour use this:\n\n``` javascript\nKinetic.pixelRatio = 1;\n```\n. Fixed: https://github.com/ericdrowell/KineticJS/commit/74060ce9355a8d977ac7da5ebdddd426a7331293\n. ```\nclass Navigation{\n     myOtherClass: MyOtherClass;\n\n     constructor(myOtherClass){\n         this.myOtherClass = myOtherClass;\n         this.wireEvents();\n     }\n\n     wireEvents(){\n         var that = this;\n         this.buttonPrevious.on(\"click\", function(): void {\n             that.myOtherClass.myFunction();\n         });\n    }\n}\n```\n. similar: https://github.com/ericdrowell/KineticJS/issues/411\n. I will close the issue. Currently there are no errors with multitouch - shape just stops dragging. There is issue for full multitouch drag support: https://github.com/ericdrowell/KineticJS/issues/411\n. I think then preventing event propagation to DOM is bad idea.\n. As one way:\n\n``` javascript\nimage.on('dragend', function(e){\n  $(e.evt.target).data('dragend', Date.now());\n});\n$('#con').on('click', function(e){\n  var time = $(e.target).data('dragend');\n  if (Date.now() - time < 2) {\n    console.log('prevent')\n  } else {\n    console.log('click');\n  }\n});\n```\n\nhttp://jsbin.com/pulof/1/edit\n. @nicktgr15 try latest version from master branch.\n. This chrome issue is resolved. Closing it!\n. Instead of this:\n\n``` javascript\nvar stage = new Kinetic.Stage(conf);\nvar layer = new Kinetic.Layer();\nstage.add(layer);\n// other stuff\n```\n\nWe have to do this:\n\n``` javascript\nvar stage = new Kinetic.Stage(conf);\nsetTimeout(function(){\n  var layer = new Kinetic.Layer();\n  stage.add(layer);\n  // other stuff\n}, 50);\n```\n\n@ericdrowell , am I right?\n. 1 You may try to use `throttle` function http://underscorejs.org/#throttle (or any alternative) to save performance\n\n``` javascript\nstage.on('contentTouchmove', _.throttle(function(evt) {\n  layer.moveToTop();\n}, 300);\n```\n\n2 Also look at other hacks: http://slash-system.com/en/how-to-fix-android-html5-canvas-issues/\n. `getTextWidth` is fixed. Currently `getTextHeight` returns fontSize, if you need multiline support use `getHeight` instead.\n. +1 May be create special \"arrow\" shape?\n. I will close this issue. If you still have problems, please, create jsfiddle to demonstrate problem and reopen issue.\n. I think we should not do this. Main reason is event bubbling. User may listen events on parent, not on shape. So library code will be too complicated if we will add such functionality. It is MUCH easier to manually use `shape.listening(false)`\n. I am closing the issue as you have an answer on stackoverflow. I am not sure can we do something here with `KineticJS` codebase.\n. Looks like problem is resolved.\n. Currently KineticJS has bower sopport.\n. Also it solves this issue: http://stackoverflow.com/questions/17002932/extend-kinetc-shape-and-all-derived-shapes\n. I will close this issue. If you still have problems with latest KineticJS, please, provide jsfiddle as demo.\n. Clone method now don't clone id. https://github.com/ericdrowell/KineticJS/commit/e5db9115a09e22dea2d0f0b97296ec9131addd70\n. I can't reproduce with latest version. Reopen if problem still exists.\n. Using KineticJS in this case is incorrect. You should not draw to context manualy by yourself (excepts using custom shape and related use cases: http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shape-tutorial/ ).\n. It works as expected with latest version.\n. Such behavior maybe unexpected, but DOM elements are working in the same way. See demo: http://jsbin.com/poqec/1/edit\n@ThomasRuby children are not placed in the stage after `group.remove()`. `removeChildren` just prevent event bubbling, so `mouseleave` will be fired on mouse, but not in group, because circle is not in group any more.\n. Problem still exists. I made small fiddle for demonstration: http://jsfiddle.net/lavrton/h927F/\n. Fixed at fork. https://github.com/lavrton/KineticJS\n. Currently KineticJS (v5.0.1) has not support of this.\nYou can do this:\n- Find intersection by yourself. (You have to know math very good)\n- Or you may place node on different layers, then loop over all points of layers and check intersection with node. (`getIntersection` function).\n. Can't reproduce with latest version: http://jsfiddle.net/lavrton/huLJ9/1/\nReopen if need.\n. Reopen if need with demo.\n. The issue must go away with latest chrome and kineticjs. If not, please, reopen issue with jsfiddle example.\n. Bug fix for this issue is closed, because solution already in code, so I will close the issue.\n. See: http://kineticjs.com/docs/Kinetic.Node.html#filters\n. Now you can do this:\n\n``` javascript\nnode.cache();\nnode.filters([Kinetic.Filters.Invert]);\n```\n. Should work as expected. Reopen with fiddle if need.\n. Works as expected with latest version. http://jsfiddle.net/lavrton/GFRNz/\n. Now you may use `grunt docs`\n. Please cleanup your question if it still actual. And repost your question to stackoverflow.\n. I will close the issue as old Chrome related bug. For now everything should be fine. Reopen if need.\n. All Chrome related issues should be fixed with new Chrome releases. Reopen if problem still exists.\n. This is browser bug. See: http://stackoverflow.com/questions/18430482/html5-canvas-text-stroke-for-large-font-size-not-drawn-properly\nKIneticJS can do nothing here. As a workaround you may scale a text.\n. If you need to take clip region into account you should use parent's draw function: `group.draw()` or `layer.draw()`\n. Also I think it will be very helpful to create page with kineticjs related stuff such as: ide tools, snippets, articles, plugins, tips, etc.\nMy suggestion: create special github repo \"KineticJS stuff\", with readme file with this related information.\nIt is very easy to add new plugins, articles via pull request in this case.\n\nFor example I created [Backbone plugin](https://github.com/slash-system/backbone.kineticview) that helps me work with KineticJS. May be it can be usefull for someone else.\n. Also someone created this interesting tool: https://github.com/soloproyectos/jquery.transformtool\nDemo: http://jsfiddle.net/cequiel/hkjtM/\n. Now `sprite.start()` works as expected. Also I added `isRunning` method for sprite object. (https://github.com/ericdrowell/KineticJS/commit/53ac9329de63d01f11822975a17932828085e877)\n. If you know coordinates of your line you can calculate coordinates of text manually. If this question is still actual, please, post it to stackoverfow.\n. :+1: Really need to such stuff as detect drop shape. I think best realisation is events \"dragover\", \"dragout\".\n. You can move draggable shape to temporary layer on dragstart, then call `getIntersection` to detect collision. See demo: http://jsbin.com/pecor/1/edit\n. I think we should implement easy way to change layer while dragging and add `drawHitOnDrag` configuration.\nAs dirty workaroud look there: http://jsbin.com/pecor/3/edit\n. I believe I found the problem. Original issue is fixed.\nBut we have new issue with cache system: http://jsfiddle.net/LwRnj/49/. Problem is related to aliasing. KineticJS is taking aliasing into account. But only for 1 pixel. If you will cache node then scale it a lot, aliasing area will bigger than 1 pixel.\n\nCurrently I have no idea how to fix problem in this case... Your thoughts, guys?\n. Close via: https://github.com/ericdrowell/KineticJS/commit/243904031677382c6b8945fdb6c72d250ba6a8bf\n\nCheck again, please, with your system. Reopen if need.\n. I have an interesting bug too. Performance is really good on landskape mode. But it is very poor on portrait mode. I will try to localize this bug with jsfiddle example.\n. Jsfiddle for tests: http://jsfiddle.net/lavrton/JYqJp/2/show/ (from kineticjs lab)\nYou can try landskape mode. Then go to  portrait mode and refresh the page.\n. I am closing the issue as this is not KineticJS bug.\nChange pixel ratio for better performance:\n\n``` javascript\nKinetic.pixelRatio = 1;\n```\n. @icaliman look there https://github.com/ericdrowell/KineticJS/pull/654#issuecomment-40284966\n. I tested with latest KineticJS version. Works as expected: http://jsbin.com/dixup/1/edit\n. I believe problem is resolved with last commit (https://github.com/ericdrowell/KineticJS/commit/243904031677382c6b8945fdb6c72d250ba6a8bf). @kzhdev can you test on your last demo? Reopen issue if need.\n. I will close the issue. If you still need help, please repost question to stackoverflow with more specific information.\n. `destroyChildren` works fine. If you still have problems, please, reopen the issue with more specific information and jsfiddle demo.\n. Close as fixed.\n. Works as expected with v5.0.1\n. I think this is a bad idea to use many libraries in the same canvas.\nFor example kineticjs take full controll of canvas element. It can clean and redraw it whatever it want.\nAlso kineticjs has good mechanism with layers and creating more canvases for performance reasons.\n. You may use `offset` for this purpose. Please, post your question to stackoverflow if you still have it.\n. You can use `Kinetic.Shape` to draw object with context access. See example: http://jsbin.com/kixeq/2/edit \n. Works for me for latest kineticjs version with requirejs.\n. May be helpful: http://stackoverflow.com/questions/11929099/html5-canvas-drawimage-ratio-bug-ios\n. Hello, folks! Update on this thread. As we know this is a REAL bug of iOS webview. And as @ericdrowell said it may be dangerous to include such workarounds to `KineticJS` codebase.\n\nBUT! I found very good solution. You should know, that you can pass not only `Image` objects to `Kinetic.Image`. Also you may pass `<canvas>` element! So there is working way:\n1. Create special 'buffer' canvas (with same size as original image)\n2. Draw the image into the canvas with some extra workarounds\n3. Create `Kinetic.Image` with the canvas.\n\nCode:\n\n``` javascript\n    // detect scale ratio\n    function detectVerticalSquash(img) {\n      var iw = img.width, ih = img.height;\n      var canvas = document.createElement('canvas');\n      canvas.width = 1;\n      canvas.height = ih;\n      var ctx = canvas.getContext('2d');\n      ctx.drawImage(img, 0, 0);\n      var data = ctx.getImageData(0, 0, 1, ih).data;\n      // search image edge pixel position in case it is squashed vertically.\n      var sy = 0;\n      var ey = ih;\n      var py = ih;\n      while (py > sy) {\n          var alpha = data[(py - 1) * 4 + 3];\n          if (alpha === 0) {\n              ey = py;\n          } else {\n              sy = py;\n          }\n          py = (ey + sy) >> 1;\n      }\n      var ratio = (py / ih);\n      return (ratio===0)?1:ratio;\n    }\n\n    // create canvas to replace with image\n    function generateCanvas(image){\n        var canvas = document.createElement('canvas');\n        var context = canvas.getContext('2d');\n        canvas.width = image.width;\n        canvas.height = image.height;\n        var vertSquashRatio = detectVerticalSquash(image);\n        console.log(image);\n        context.drawImage(image, 0, 0, \n                           image.width, image.height / vertSquashRatio);\n        return(canvas);\n    }\n\n    var img = new Image();\n    img.onload = function() {\n      var stage = new Kinetic.Stage({\n          container: 'con',\n          width: 1000,\n          height: 1000\n      });\n      var layer = new Kinetic.Layer();\n      stage.add(layer);\n      var image = new Kinetic.Image({\n        image : generateCanvas(img),\n        width : 200,\n        height : 200,\n        draggable : true\n      });\n      layer.add(image);\n      layer.draw();\n    }\n    img.src = 'diana2.jpg';\n```\n\nI tested this code on iPad, and it is fixing the bug. Can someone approve?\n. @icaliman I tested my solution on iPad - and problem was gone. Do you have any errors?\n. What is value of `vertSquashRatio`? What are you expecting? Did you try my way with replacing image object by fixed canvas object?\n. 0.375 is not correct? May be wrong calculation if image has transparent area on left edge.\n. Fixed: https://github.com/ericdrowell/KineticJS/commit/6c46e44bbd2ba88fd3d8f63f71d8f9fa1606f8a1\n. I think too that kineticjs must have ways to detect such probems. For example:\n\n```\nKinetic.setDebugLevel(\"all\");\n```\n. KineticJS has no validation of parameters for performance reasons. But is some cases validation might be VERY helpful. I was thinking to add some `debug mode` to KineticJS.\nIn this mode all set methods will be overwriting with validation step. It may slow down performance, but this is just developer tool and you will be able to do something like `Kinetic.debugModeOff()`.\n\nWhat do you think?\n. Good news everyone!\nI made this small script to support full validation of parameters for KineticJS.\nhttps://gist.github.com/lavrton/9363432\n\nUsage:\n1. Add `kinetic.debug.js` script after `kinetic.js` in your html\n2. Somewhere in your code: `Kinetic.debugModeOn();`\n\nSee example: http://jsbin.com/kujef/1/edit\nIs it awesome?\n. Plugin is available there https://github.com/lavrton/kineticjs-tips-and-tools/tree/master/debug\n. Looks like bug is fixed with latest version: http://jsfiddle.net/lavrton/mTZEP/1/\n. Now works fine: http://jsbin.com/kojaci/1/edit. Reopen if issue still exists.\n. As expected. `toImage` is async function. You should use `img` inside callback function.\n@ericdrowell, I think you should remove from docs `var image =` because it can lead to confusion.\n. Use Kinetic.Util.extend\n. A layer is creating new canvas element. This is expected behaviors. You should carefully read http://www.html5canvastutorials.com/kineticjs/html5-canvas-layer-management-with-kineticjs/\n. Works fine : http://jsfiddle.net/lavrton/T43NK/1/\n. Ups, sorry, my mistake. Setting width of text is working as max width, right?\n. Works with latest version: http://jsfiddle.net/lavrton/44reA/1/\n. API for now is\n\n```\nvar html = new Kinetic.HTML({\n    html : \"<content>\",\n    callback : function() {}   //callback here is bad\n});\n```\n\nMay be it wiil be more usefull with this API:\n\n```\nKinetic.htmlToImage({\n    html : \"<content>\",\n    callback : function(img) {\n       var image = new Kinetic.Image({\n           image : img\n       });\n   }\n});\n```\n. Also, if someone interesting, this may be helpfull: https://github.com/niklasvh/html2canvas\n. I added pinch event to my project (that is using kineticjs).\nI made first implemantation from here: http://www.html5canvastutorials.com/labs/html5-canvas-multi-touch-scale-stage-with-kineticjs/\nBut I had some problems, so I moved to using hammer.js. It so easy and clean http://eightmedia.github.io/hammer.js/\n\nMy code example:\n\n``` javascript\n//get stage document element and listen it\nvar transformer = Hammer(this.getStage().getContainer());    \n\nvar startScale = null;\ntransformer.on(\"transformstart\", function(e) {\n  startScale = _this.getCamera().getScale();\n\n});\ntransformer.on(\"transform\", function(e) {\n  return _this.getCamera().setScale(startScale * e.gesture.scale);\n  // or stage.setScale(...) or... Whatever you want\n});\n```\n\nYou can do the same for swipe event.\n. That is because hammer.js know nothing about kineticjs objects. It can't pass kineticjs targer node in event param.\nAll is posible here is define or find target node by youself.\n. HammerJS support for KineticJS's nodes will be added with next release. See example: http://jsfiddle.net/lavrton/qQeH6/\n. I added pull request https://github.com/ericdrowell/KineticJS/pull/684 with new test.\n. How to try multitouch on object? Scale, move?\nKineticJS currently handle only one touch for dragging.\n. Of couse I can add shape to some cache layer.\n\nBut I will still have problems if shape size is bigger than stage size.\nShape wil be cutted: http://jsfiddle.net/lavrton/TFW9T/1/\n\n(But (!) will not cuted with not shadow and stroke: http://jsfiddle.net/lavrton/TFW9T/2/)\n. For tests: http://jsfiddle.net/lavrton/T43NK/6/\nAs @CyranX said :  try to drag red rect to top left corner.\n. In my machine latest example http://jsfiddle.net/lavrton/T43NK/6/ (Chrome) works as expected. I will close the issue.\n. Fixed.\n. The error is somewhere else.\nProperty position doesn't matter. http://jsfiddle.net/lavrton/7BjGg/\n. Currently with Chrome 33 examples work as expected. I think Chrome problem is resolved and I can close the issue.\n. run `grunt dev` before opening page.\n. Now you can apply filters in order you want: http://jsbin.com/novej/1/edit\n. You can convert shape to image with `toImage` function then apply filter.\n. Now you can use filters for all shapes. I will close the issue.\n. You may use `event.changedTouches.length`\n. Lates version works as expected.\n. I will close the issue. If it still actual for you, please, repost it to stackoverflow. (Demo works fine, just clarify what you are expecting)\n. `remove` function is not destroying object, only remove it from parent container. You should use `destroy` if you want permanently kill object. Post you question to stackoverfow if you still have problems.\n. Hmm.. Looks like browsers have very bad support of `toBlob` function.\n. Awesome! @ericdrowell please look at this. I think it is important request. It is VERY hard to do `dbltap` on some devices, because every time you tapped on node it is moving little bit, and that is prevent `tap` and `dbltap`. I set dragDistance = 3 in my main application. Much better.\n\n``` javascript\nKinetic.dragDistance = 3;\n// or\nnode.dragDistance(3);\n```\n. Fixed via: https://github.com/ericdrowell/KineticJS/commit/e5db9115a09e22dea2d0f0b97296ec9131addd70\n. Fixed. Thx.\n. You should not set node's zIndex before adding to container. Only after.\nFix: https://github.com/ericdrowell/KineticJS/commit/cadcb91fbc368d129c6a9e7261276625d1cd1d8c  Now zIndex will be ignored (with warn message) in this case.\n. You can cancel event propagation in this way:\n\n``` javascript\nrect.on(\"dragstart\", function(e){\n  e.cancelBubble = true;\n});\n```\n. Actually, if you REALLY need this you can do some javascript hacks with Function constructor (still bad way, because JSON - is only data, no code!):\n\n``` javascript\nKinetic.Rect.prototype.toJSONFull = function() {\n    var obj = this.toObject();\n    obj.attrs.dragBoundFunc = this.getDragBoundFunc();\n    return JSON.stringify(obj, function (key, value) {\n        if (typeof value === 'function') {\n            return value.toString();\n        }\n        return value;\n    });\n};\n\nKinetic.Node.createFixed = function(json, container) {\n        var passed = JSON.parse(json, function (key, value) {\n            if (value \n                && typeof value === \"string\" \n                && value.substr(0,8) == \"function\") {\n                var startBody = value.indexOf('{') + 1;\n                var endBody = value.lastIndexOf('}');\n                var startArgs = value.indexOf('(') + 1;\n                var endArgs = value.indexOf(')');\n\n               return new Function(value.substring(startArgs, endArgs)\n                                 , value.substring(startBody, endBody));\n            }\n            return value;\n        });\n        return this._createNode(passed, container);\n};\n```\n\nThen using:\n\n``` javascript\nvar rect2 = Kinetic.Node.createFixed(rect.toJSONFull());\n```\n\nExample: http://jsfiddle.net/lavrton/7chvS/\n. I can't reproduce the bug. Please, reopen the issue if you still have problems.\n. Do you use offset? Looks like yes, because after scale image should be placed at same position (same top left point). May be you need to take offset into account.\n. Can't reproduce: http://jsbin.com/nonul/1/edit\n. After some time and testing I will make pull request to https://github.com/borisyankov/DefinitelyTyped\n. I found one more. Without pull request: https://github.com/ericdrowell/KineticJS/blob/master/src/Node.js#L118\n`showBorder` -> `drawBorder`\n. Hint errors are resolved.\n. I can't reproduce the bug (Chrome Version 33.0.1750.117) http://jsfiddle.net/lavrton/k8zf5/4/. Reopen if need, please.\n. :+1: @ericdrowell, your thoughts?\n. Are you sure that quality of non-cached shapes is bad? Everything is good for me. (tested on iPad)\n. There are two dependencies need for NodeJS: `jsdom` and `canvas`.\n1. We need to add them to package.json\n2. Change travis configuration to install only dev dependiences.\n3. Publish KineticJS to npm.\n@ericdrowell, can you do this?\n. grunt dev\n. `npm install kinetic`\n. Firefox don't understand color like `590b0a` only `#590b0a`, but chrome understand.\n@ericdrowell, is it expected behavior:\n\n```\nKinetic.Util._rgbToHex(89, 11, 10)\n\"590b0a\"\n```\n. Sure, for 10 items, right? Try to add more by clicking on stage. See fps and compare with other examples.\n. You right. it may use WebGL. But in my tests browser has no WebGL support, so Pixi was using 2d canvas.\n. Yah, more tutorials! I wrote some tips, that you already noticed: https://github.com/lavrton/kineticjs-tips-and-tools#performance (like `transformsEnabled` and `hitGraphEnabled`params).\n. I updated fiddle (http://jsfiddle.net/lavrton/Yc73v/6/) with `transformsEnabled: 'position', hitGraphEnabled: false` and using previous position API (getX, setX) instead of overloaded. Better, but not to much. (+ 5 fps for 1000 BUNNIES in my machine)\n. With new `cache` function from v5.0.0 `KineticJS` getting much faster.\n. No need after HammerJS support.\n. Wait until image loaded:\n\n``` javascript\nvar heating_on3= new Image();\nheating_on3.src = \"icons/heating_on.png\";\nheating_on3.onload = function() {\n    this.heating = new Kinetic.Rect({\n        x: 100,\n        y: 200,\n        height: 100,\n        width: 100,\n        fillPatternImage: heating_on3,\n        stroke:\"black\",\n        strokeWidth:10\n    });    \n};\n```\n\n@ericdrowell, I think KineticJS should have some out of the box ways to wait loading.\n. Really looks like a bug. You must set fillPatternScaleX and fillPatternScaleY:\nhttp://jsfiddle.net/lavrton/33Zet/1/\n. @ericdrowell,\n\n``` javascript\nKinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillPatternScaleX', 0);\n```\n\nShould it be:\n\n``` javascript\nKinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillPatternScaleX', 1);\n```\n\n?\n. Tested with latest version: http://jsfiddle.net/lavrton/Vm52D/\nWoks fine everywhere. Can you make a fiddle example?\n. Looks like a bug. Demo: http://jsfiddle.net/lavrton/uT5Zb/\n. http://web.archive.org/web/20130917231605/http://kineticjs.com/docs/ :+1: \n. Look at this demo: http://jsfiddle.net/lavrton/qQeH6/show\nTry to transform with multitouch! Awesome, is it?\nSo easy to setup:\n\n``` javascript\nvar startScale = 1;\nvar startRotate = 0;\n\nvar hammertime = Hammer(rect)\n.on(\"transformstart\", function(e) {\n    startScale = rect.scaleX();\n    startRotate = rect.rotation();\n}).on(\"transform\", function(e) {\n    rect.scale({\n        x : startScale * e.gesture.scale,\n        y : startScale * e.gesture.scale,\n    });\n    rect.rotation(startRotate + e.gesture.rotation)\n});\n```\n. Updated for swipe event. http://jsfiddle.net/lavrton/qQeH6/show\n. What you mean \"it's hard\"? Do you mean it is hard to implement all multitouch events INSIDE KineticJS?\n\nIn example above you may test that all events are supported via hammerjs. (and some little patch to kineticjs). I will make pull request for this soon.\n. No. It is only adding more events for one node.\n. Done: https://github.com/ericdrowell/KineticJS/commit/61542ea6cce360218a7a34f50d749d00411c5438\n\nBut currently it is not possible to remove specific handler:\n\n``` javascript\nhammerInstance.off(\"event\", handler);\n```\n\nyou may use namespace for this case:\n\n``` javascript\nhammerInstance.off(\"event.namespace\");\n```\n. I think this is good workflow. I also added same behaviour for `touchmove`. That will increase dragging performance on some android devices a lot (https://github.com/ericdrowell/KineticJS/issues/821)! Thanks!\n. May be it will be useful if group will find width by itself.\n. You can use `node.strokeEnabled` function.\n. ``` javascript\nstage.setSize({\n   width : params.width,\n   height : params.height\n});\n```\n. My thoughts:\n1. Do not use cache - each `cache` function is new canvas element in memory.\n2. Try to use as less number of layers as possible. 75 - is TOO MANY! I think that 10 is max.\n. I don't think this is useful commit:\n1. We have very good support for `requestAnimationFrame` http://caniuse.com/requestanimationframe\n2. You will get wrong behaviour if you call multiple `FRAF` at once. Example:\n\n``` javascript\nvar callback = function() {\n    console.log(Date.now());\n}\n\nfor (var i = 0; i < 100; i++) {\n    FRAF(callback);\n}\n```\n. Please, repost your question to stackoverflow with jsfiddle example.\n. Hint errors are resolved.\n. http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shape-tutorial/\n. Thank you! I think this algorithm https://github.com/ericdrowell/KineticJS/issues/807 is much cleaner and easier to understood; so I added it.\n. Fixed: https://github.com/ericdrowell/KineticJS/commit/a524ba9ec12fc23fbb774739947c567628752c4f\n. Thx! https://github.com/ericdrowell/KineticJS/commit/3a5b6eb76618a8b5bb6bca6bfafb6fe9e06fac2a\n. Close via: https://github.com/ericdrowell/KineticJS/commit/243904031677382c6b8945fdb6c72d250ba6a8bf\n\nCheck again, please, with your system. Reopen if need.\n. API changes:\n\n``` javascript\nstage.setScale({\n x : scale,\n y : scale\n});\nstage.setSize({\n  width : width,\n  height : height\n});\n```\n. Looks like tutorial is not updated (@ericdrowell, please look at this).  It is not working on my device.\n. ```\nstage.setSize({\n  width : newWidth,\n  height : newHeight\n});\n```\n. You may prevent using `cache()` function for Image but hit graph will have rectangle shape in this case. It is not possible to create hit graph with same shape as image without `cache()`.\n\n@m73 currently cached node does not support changing opacity value. Will be fixed soon.\n. Bug here. Opacity will be applied twice (if cached object already has opacity).\n. May be we can reset opacity before caching (`cache` function):\n\n``` javascript\nvar prevOpacity = this.getOpacity();\nthis.setOpacity(1);\nthis.drawScene(cachedSceneCanvas);\nthis.drawHit(cachedHitCanvas);\nthis.setOpacity(prevOpacity);\n```\n\nthen apply opacity to cache\n. close by https://github.com/ericdrowell/KineticJS/commit/cb52be6dc0e62fa526579762d45e92d08b434d23\n. You should not touch built in methods of KineticJS's nodes. Just use another variable\n. Thx. But I think this is very specific use case. You can do this manually. As example:\n\n``` javascript\nvar isOk = true;\nstage.getChildren().each(function(layer){\n    if (!layer.toDataURL()) {\n        isOk = false;\n    }\n});\nif (!isOk) {\n   // something\n}\n```\n. I made this set of tests for different ways of drawing objects: http://jsfiddle.net/lavrton/TwAh3/show/\nNo difference on desktop, but different on android devices.\n\nAlso I founde little hack that helps solve subject :\n\n``` javascript\n        var oldFunc = this.layer._getIntersection;\n        node.on(\"dragstart\", () => {\n            this.layer._getIntersection = function(){\n                return node;\n            }\n        });\n        node.on(\"dragend\", () => {\n            this.layer._getIntersection = oldFunc;\n        });\n```\n\nUsual usage: http://jsfiddle.net/lavrton/Yp8gP/show/\nWith hack: http://jsfiddle.net/lavrton/ANJ98/show/\nDo you feel difference on android devices?\n. This problem is relative to drag&drop. While dragging, every `touchmove` event will call `getIntersectrion` function. By design of KineticJS intersections are finding via native context `getImageData` function. As I explained at first post problem only on android devices, where this function (`getImageData`) is slow.\n. Profiling on Asus Transformer TF101G (Android). (while dragging one star)\nUsual Kinetic usage (http://jsfiddle.net/lavrton/Yp8gP/show/):\n![usual](https://f.cloud.github.com/assets/1443320/2265552/3a710692-9e83-11e3-8c15-594f818a6807.png)\n\nAfter disable `_getIntersection` (http://jsfiddle.net/lavrton/ANJ98/show/) (plus 5-10 fps):\n![hack](https://f.cloud.github.com/assets/1443320/2265562/5fe2078c-9e83-11e3-872a-d80ba0ae43e9.png)\n. > no don't do that, you're essentially indirectly throttling the event detection.\n\nDo you mean my small hack?\n. Sure! There is a full version of demo: http://jsfiddle.net/lavrton/TwAh3/show/\nI can make only for KineticJS if need with code cleaning.\n. In my case looks faster (plus 2-4 fps), but `getImageData` is still bottleneck function. Not sure can we do something here more. I think I will use the hack in my project. I added it to https://github.com/lavrton/kineticjs-tips-and-tools/blob/master/README.md#mobile-tips, because it may be usefull in small set of KineticJS applications.\n. @ericdrowell I mean this hack:\n\n``` javascript\n     var oldFunc = this.layer._getIntersection;\n        node.on(\"dragstart\", () => {\n            this.layer._getIntersection = function(){\n                return node;\n            }\n        });\n        node.on(\"dragend\", () => {\n            this.layer._getIntersection = oldFunc;\n        });\n```\n\nNot this (@Pe443):\n\n```\nmoveStage(mousePos) {\n    ... code  ...\n    this._mainStage.draggable(false);\n    setTimeout(() => {\n        this._mainStage.draggable(true);\n    }, 50);\n}\n```\n\nThere is reason to detect events when you want to drag several nodes at same time by multi touch. (Currently KineticJS has not this support, but I hope it will)\n. Performance may be different depend on type of your application. Canvas on android has many bugs. You should try to use all performace tips available to you. See: https://github.com/lavrton/kineticjs-tips-and-tools/blob/master/README.md#performance\n. Close by https://github.com/ericdrowell/KineticJS/pull/777.\n. There are no bugs. Here bitwise operation is using for rounding.\nI think `Math.round` will be much cleaner https://github.com/ericdrowell/KineticJS/commit/347e4d697fbc5fd1431e55a9f873b82385d36fd4. It has almost same performance: http://jsperf.com/math-floor-vs-math-round-vs-parseint/2\n. ``` javascript\nfunction isCircleOnScreen(circle) {\n    var center = circle.position(); // you can define center as you need. You may have offset or shape, where x, y of position is not center (as Rect)\n    // then find width and height of shape. Remember that by default group has 0 width and height\n    var width = circle.raduis() * 2;\n    var height = circle.raduis() * 2;\n\n    if (center.x < - width / 2 || center.x > stage.getWidth() + width / 2 || center.y < - height / 2 || center.y > stage.getHeight() + height / 2) {\n        return false;\n    } else {\n        return true;\n    }\n}\n```\n. Can you provide fiddle? I can't reproduce: http://jsbin.com/kaped/1/edit\n. This is browser bug:\n1. https://code.google.com/p/chromium/issues/detail?id=161464\n2. http://stackoverflow.com/questions/14538743/what-to-do-if-mousemove-and-click-events-fire-simultaneously\n3. https://code.google.com/p/chromium/issues/detail?id=312305\n\nYou can do this trick:\n\n``` javascript\nif (!((typeof e.webkitMovementX != 'undefined' || typeof e.webkitMovementY != 'undefined') && e.webkitMovementY === 0 && e.webkitMovementX === 0)) {\n      console.log(\"real mousemove\");\n}\n```\n\nSee: http://jsbin.com/hequhiya/6/edit\nShould the fix be inside KineticJS? Hmmm....\n. Can you be more specific what problems do you have?\n. Done.\n. You have to add layers to stage BEFORE using `moveToTop()`, `moveToBottom()`.\nMay be KineticJS should throw error (like \"Add object to container before using this function\") or log warn message in this case.\n. The answer on stackoverflow: http://stackoverflow.com/a/22140094/512042. I will close the issue.\n. I don't see any useful use case here, so I am closing the pull.\n. fixed here: http://lavrton.github.io/KineticJS/Filters/Brighten.html\n. You may add `viewport` meta tag to your html, and install it with your properties.\nI am using this in my application:\n`<meta name=\"viewport\" content=\"initial-scale=1,minimum-scale=1,maximum-scale=1,width=device-width,height=device-height,target-densitydpi=medium-dpi,user-scalable=0\"/>`\n. I think there is not KineticJS bugs, something with you code. One thing that i found:\n\n``` javascript\n        var x = $('form#frmProperties #lineX2').val();\n        var y = $('form#frmProperties #lineY2').val();\n```\n\n`val()` returns `String` not a `Number`. So code should be:\n\n``` javascript\n        var x = parseInt($('form#frmProperties #lineX2').val());\n        var y = parseInt($('form#frmProperties #lineY2').val());\n```\n\nRepost you question to stackoverfow, if you still have problems.\n. @kzhdev can you write unit test for this?\n. Can you provide any jsfiddle?\n. Try latest build. With this pull (https://github.com/ericdrowell/KineticJS/pull/777) performance on androind should be much better.\n. `context` that you have from function parameters is not real canvas context. It is KineticJS's wrapper. Try this (use `setAttr`):\n\n``` javascript\nvar reveal=new Kinetic.Shape({\n    drawFunc: function(context){\n        var comprobar=0;\n\n        context.beginPath();\n        context.setAttr('fillStyle', 'black');\n\n        context.setAttr('globalCompositeOperation', \"destination-out\");\n        for (var i=0;i<arrayaux.length;i++){\n            if (i==primeros[comprobar]){\n\n                context.moveTo(arrayaux[i].x, arrayaux[i].y);\n                comprobar++;\n            }\n            else{\n                context.lineTo(arrayaux[i].x, arrayaux[i].y);\n            }                       \n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n});\n```\n. It is very easy to convert dataURL to blob. For example https://gist.github.com/davoclavo/4424731\nI think we shouldn't include this functionality to library.\n. may be this:\n\n``` javascript\nwindow.URL = window.URL || window.webkitURL;\n```\n\nTry it. Please, repost you question to stackoverflow if need .\n. Can you provide any jsfiddle demo? This example works as expected for me: http://jsbin.com/jotud/1/edit what about your system?\n. Currently you can't change opacity of cached node. You need `clearCache` before setting opacity. @ericdrowell look at https://github.com/ericdrowell/KineticJS/pull/787 please. It is related with current issue.\n. You are using `drawHitFromCache`, right? You can:\n1. Create image with opacity 1\n2. Create hit\n3. only THEN set opacity to 0\nSee demo: http://jsbin.com/yaqap/1/edit\n. Oh. Looks like it will not work in this way, because after `clearCache` hitFunc also cleared\n. You may use ultra hack: set opacity to `0.01` - invisible for you, but visiable for hit! http://jsbin.com/yaqap/2/edit\n. fixed https://github.com/ericdrowell/KineticJS/commit/cb52be6dc0e62fa526579762d45e92d08b434d23\n. Just for advertisement try to use debugger plugin: https://github.com/ericdrowell/KineticJS/issues/658#issuecomment-36724160\n\n`setSize` has another specification:\n\n``` javascript\nstage.setSize({\n  width: window.innerWidth,\n  height: this.window.innerHeight\n});\n```\n. Can you provide more information with fiddle? Adding new node while dragging http://jsbin.com/goxon/1/edit\n. Why not. But it will but much easier if you will localize the problem and provide small demo.\n. I tested MultiTouch, works really cool. But I don't believe that native drag drop is slower. Because it have MANY optimizations. Can you provide any demo?\n. Each frame of your sprite may have different width or height.\nWhen you are setting width of `Kinetic.Image` it is working as scaling, but I think this behavior is not expected for `Sprite` object. For example we have one `sprite` with two frames. One has 100 width, another one has 200 width. What you mean, if you are doing `sprite.width(150)`? \n. Why not to use scaling?\n. ``` javascript\nsprite.scaleX(134/123);\nsprite.scaleY(22/21);\n```\n\nno?\n. Can you provide any example? This demo is working: http://jsbin.com/lujan/2/edit\n. I see. May be KineticJS should say (throw or warn) that caching `Stage` is not allowed (it has no his own canvas). Try to cache each Layers: http://jsbin.com/cetosabo/2/edit\n\n``` javascript\nstage.on(\"dragstart\", function(){\n  stage.getChildren().each(function(layer) {\n    layer.cache({\n      x : stage.x(),\n      y : stage.y(),\n      width : stage.width(),\n      height : stage.height()\n    });\n  });\n});\nstage.on(\"dragend\", function(){\n  stage.getChildren().each(function(layer) {\n    layer.clearCache();\n  });\n  stage.draw();\n});\n```\n. Yep, this is a bug. As workaround until bug is fixed you may also do this:\n\n``` javascript\nstage.on(\"dragstart\", function(){\n  stage.setScaleX(1);\n  stage.setScaleY(1);\n  stage.getChildren().each(function(layer) {\n    layer.cache({\n      x : stage.x(),\n      y : stage.y(),\n      width : stage.width(),\n      height : stage.height()\n    });\n  });\n  stage.setScaleX(1.5);\n  stage.setScaleY(1.5);\n\n});\n```\n\nhttp://jsbin.com/cetosabo/4/edit\n. Possible way:\n1. Every time you have changes on stage cache it to image, then draw this image to hidden layer.\n2. On `dragstart` hide every layer except layer with the image.\n3. On `dragend` hide layer with image and make other layers visible.\n. You have a bug in your code. You are adding layer to stage on button click. But layer is already on stage.\n. What kind of error you are expecting there?\n. Emmm... You want to add error, right? Are you sure? Do not do this! Any program already have a lot of bugs.\n`ajax` have error callback because many things may happen: wrong url, no network etc. `stage.toDataURL` is local function. And it should not have any errors. But if it will it is just KineticJS bug.\n. Actually HammerJS support is not required. You can do this in \"pure\" KineticJS. (http://www.html5canvastutorials.com/labs/html5-canvas-multi-touch-scale-stage-with-kineticjs/)\n\nWith HammerJS example: http://jsfiddle.net/lavrton/6P4fc/2/\n. Can you post your code example with KineticJS?\n. But I think that tracking event type as a second arguments is good idea. It is not easy to include event type to native event object. For example code:\n\n``` javascript\nshape._fireAndBubble(MOUSEOVER, evt, this.targetShape);\nshape._fireAndBubble(MOUSEENTER, evt, this.targetShape);\n```\n\nHere we have same event object for different events. How to insert event type here? If will do something like this:\n\n``` javascript\nevt.kineticEventType = MOUSEOVER;\nshape._fireAndBubble(MOUSEOVER, evt, this.targetShape);\nevt.kineticEventType = MOUSEENTER;\nshape._fireAndBubble(MOUSEENTER, evt, this.targetShape)\n```\n\nWe will have unexpected behavior in this case:\n\n```\nnode.on('mouseover',function(e){\n   setTimeout(function(){\n      console.log(e.kineticEventType);  // why mouseenter?\n  });\n});\n```\n\nWe can clone event object for every event - but this may be expensive action. Thoughts?\n. WOW! I think this is good way. But actually this is VERY BIG API changes. I think many developers use many properties from native event object (as I do). So with this new API I have to do some refactor work. This changes should be documented and described at Change Log very well.\n\nI updated and tested `dispatchEvent` and `addEventListener` (but in this case `addEventListener` will use old API)\n. This is the bug of new version.\n`remove` function of `BaseLayer` Class:\n\n``` javascript\nvar stage = this.getStage();\n// then\nif(stage && _canvas && Kinetic.Util._isInDocument(_canvas)) {\n   // bla bla\n}\n```\n\n`stage` will be `undefined`, because while `removeChildren` function is working it delete parent referance from child node (for performace reasons). I am fixing the bug.\n. Nice. Also we don't need overloaded `removeChildren` and `destroyChildren` functions at `Stage.js`. I think unit test - is best way here.\n. You have to use `touches` property.\n\n``` javascript\n// for example for first finger\nvar clientX = evt.evt.touches[0].clientX;\n```\n. You getting right position. Repost your question to stackoverflow, if it still actual.\n. We can not use adventure options because it will break API. You may use closure compiler with this options for your whole project.\n. Is it working on usual browser?\n. Ok. First try to set timeout to 300ms:\n\n``` javascript\nvar stage = new Kinetic.Stage(conf);\nvar layer = new Kinetic.Layer();\n\nstage.add(layer);\n\nsetTimeout(function(){\n    // add shapes to the layer and then do layer.draw()\n}, 300);\n```\n\nIf it is not helpful try second (insert before your code):\n\n``` javascript\nvar updateCanvas = function(canvas){\n    canvas.style.opacity = 0.9;\n    setTimeout(function() {\n        canvas.style.opacity = 1;\n    });\n};\n\nvar oldDraw = Kinetic.Layer.prototype.draw;\nKinetic.Layer.prototype.draw = function(){\n    updateCanvas(this.canvas._canvas);\n    oldDraw.apply(this, arguments);\n    return this;\n};\n```\n. Currently `KineticJS` supports dragging only for one shape at same time. So I don't understand how both shapes are dragging in you case. May be you are dragging group or layer?\nI will close the issue. Please, go to stackoverflow if you need a help.\n. Look at this demo http://jsfiddle.net/lavrton/qQeH6/. Just use image instead of the rectagle.\n. Too much code! Looks like you get wrong json from server. You should:\n1. Save somewhere json that you get from server\n2. Create simplest jsfiddle demo with this json\n3. Post your question to stackoverflow. (I am sure there are no KineticJS bug here)\n. I see `\"className\" : \"Kinetic.Group\"`, but should be ``\"className\" : \"Group\"` in your JSON. After fixing works fine: http://jsbin.com/dibas/1/edit\n. Which problem you mean?\nAlso you should use `layer.draw()` instead of `node.draw()` (layer is not clearing in this way).\n. Close via: https://github.com/ericdrowell/KineticJS/commit/243904031677382c6b8945fdb6c72d250ba6a8bf\n. Also I want to add some note there. Might be related.\nI was testing KineticJS on desktop with windows 8. Testing device support both mouse and touch manipulations. Mouse events work fine, but touch - no. Also I accidentally discovered that touch event had start working after I added `HammerJS` to stage container.\n\n``` javascript\nvar hammer = new Hammer(stage.getContainer());\n```\n. May be we can insert some polyfill to `KineticJS`? For example https://github.com/WebReflection/ie-touch#ie-touch? Or add some note to documentation (or readme, or wiki, hmmm)?\n. But `TouchEvent` is not defined in some browsers. http://caniuse.com/touch\n. It is not reproducing on a real device. I tested on ipad 3. So I am not sure it is a bug.\n. What is not correct? What are you expecting?\n. By design scaling don't affect `x` and `y` properties, only \"size\" properties - like width, height. Green line is moved because scale affect `points` property like size properties.\n. 1. No. This information is incorrect. Fixed: https://github.com/ericdrowell/KineticJS/commit/3b14818ac57f658c2f9cc930f19a18095af434bd\n2. How you get this error? Code?\n. You are right. It was bug. Fixed now. Thanks.\n. Can you provide demo? This example works fine: http://jsbin.com/garas/1/edit\n. You are right. My demo using v5.0.1. Same bug with v5.1.0\n. Answered on stackoverflow.\n. When you are executing `stage.find('.column')` it returns collection (array) of 3 element with name 'column'. Then you are adding `click` event handler only to this 3 objects. When you are creating more columns they have no such event handler. An you are right - instead of creating new `Rect` you may clone existent `Rect`. Cloning action is also copying event handlers.\n. It is not a bug. This is design solution.\n. This is a bug. I will fix it soon.\n. Fixed, thanks.\n. This may be helpful: http://stackoverflow.com/questions/12886286/addeventlistener-for-keydown-on-canvas\n\nAlso look at this demo: http://jsbin.com/tojof/1/edit\n. I think best use case is listen all keydown events:\n\n```\nwindow.addEventListener(\"keydown\", handle, true);\n```\n. Try my demo. I thinks that is what you need.\n. I thinks yes - user should know what stage is current. Also you may focus element on other events: any application event, on scrolling etc.\n. It may be iframe issue. \"Pure\" page works fine: http://jsbin.com/bipociqo/1\n. ``` javascript\nvar node = new Kinetic.Shape({\n  offset : {\n    x : 10,\n    y : 10\n  }\n  // or\n  // offsetX : 10,\n  // offsetY : 10\n});\n```\n. Do you understand warning message?\n\nLayer's `getWidth()` and `getHeight()` return 0 (maybe they should return stage values...). So caching is not working.\n. Currently KineticJS can't handle width or height of groups (or layers) automatically. So you have to calculate them by yourself or use stage size values.\n\n``` javascript\nlayer.cache({\n   width : stage.getWidth(),\n   height : stage.getHeight()\n});\n```\n. I think KineticJS should not care about this problem.\n1. The downsized image has \"strange\" quality, but not bad quality\n2. Including such downsizing algorithm may drop performance a lot\n3. Also is is hard to integrate this algorithm when we want to have different from original image width/height ratio.\n4. Also tweening.\n\nAnytime you can downsize image to canvas element, then pass the canvas to `Kinetic.Image`\n. Why do use think it is not working?\n\nUse `display : inline-block;` css for `container`.\n. `visible` is working: http://jsbin.com/buzix/1/edit\nWhy do you need width and height for layer?\n. I will update docs for supported params for FastLayer. If you need to change `x` or `y` of FastLayer just change such properties for each children.\nAlso if you will set `hitGraphEnabled` to `false` for Layer you will have almost FastLayer.\n. Do you meen color or point position?\n. Can you provide demo?\n. I see. You are resizing stage content manually, don't do this. Because KineticJS can not handle such behaviour. If you need to change size of a stage you should do something like this:\n\n``` javascript\nstage.scale({\n   x : scaleFactor,\n   y : scaleFactor\n});\nstage.width(yourWidth);\nstage.height(yourHeight);\n```\n\nSo. There are no KineticJS bugs here. If you need more information or help, please, repost your question to stackoverflow.\n. Fixed. :+1: \n. Close as answered.\n. Close as issue is not a bug. Use stackoverflow.\n. Create background rectangle and use it for events:\n\n``` javascript\nvar text = new Kinetic.Text(config);\nvar back = new Kinetic.Rect({\n x : text.x(),\n y : text.y(),\n width : text.width(),\n height : text.height()\n});\nback.on('mouseleave', callback);\n```\n. This is expected behaviour of `cache` function.\n. Fixed by https://github.com/ericdrowell/KineticJS/commit/243904031677382c6b8945fdb6c72d250ba6a8bf. Can you download latest `kinetic.js` from repo and test?\n. I made unit test for this case. Just for example updated demo works fine: http://jsfiddle.net/fy6LQ/4/\n. Ops...\n. Thanks!\n. Thanks!\n. I believe this plugin https://github.com/lavrton/kineticjs-tips-and-tools/tree/master/debug may help you find problem by yourself. Add https://rawgithub.com/lavrton/kineticjs-tips-and-tools/master/debug/kinetic.debug.js after `kinetic.js`.\n. Can you provide more information about \"losing pixel\"? Screenshots?\n. I have ubuntu with chrome 34 and I don't see any difference. What is your system?\n. I think it is related to https://github.com/ericdrowell/KineticJS/issues/819 and https://github.com/ericdrowell/KineticJS/issues/750.\n. Interesting. But sometimes user may call `draw` method for shape (not for whole layer). Also may be it is possible to move such functionality to `Context` class.\n. I made this test: http://jsperf.com/dh-getimagedata-pixel-by-pixel-or-all-image/5\nIs it correct? I don't see any profit here.\n. I updated test. Looks like performance is much better.\n. May be we can make this in this way:\n1 Clear cache on ANY `drawHit` (on any node):\n\n```\nvar layer = this.getLayer()\nif (layer) {\n    layer.hitCache = undefined;\n}\n```\n\n2 Create hitCache on first (after `drawHit`) `getIntersection` call (layer method):\n\n``` javascript\nif (this.hitCache) {\n   // get data from cache\n} else {\n    // 1. create hitCache\n    // 2. return this.getIntersection(args);\n}\n```\n. Thanks. I also added unit test https://github.com/ericdrowell/KineticJS/commit/acac6e402f98ca5dc4ab662df11b8b8704c6b847#diff-9f8320baecfa172311b90096f1144d7cR297.\n. I disabled such caching awhile. I was testing on big project - it has many side effects. `getImageData` is very slow if values of `width` and `height` are large.\n. Of course it depend on application. If layer has animation - we will call `getImageData` every mouse move. Also I was testing on iOS. Dragging performance is dropped: when you created stage cache is empty. On `dragstart` new cache are creating - but that action is very slow.\n. Can you, please, repost your question to stackoverflow?\n. Ok. I will answer you here. Objects are rotating relative to their \"center\" point {x, y}. Your line object has no `x` and `y` attrs at configuration - that means they equal 0. So your line rotate relative top left canvas point. You may draw your shape near \"center\" point, then move your shape anywhere by changing `x` and `y` attrs (not `points` array). Also you may use `offset` attributes to move \"center\". May be demo will be more descriptive then my answear: http://jsbin.com/nuhaf/2/edit\n. Opacity - you are right, it is fixed (test latest build).\nOffset and rotation - are working fine. You need to apply rotation and offset AFTER `cache()` function is called to get best result or config `x`, `y`, `width` and `height` arguments of `cache` function manually.\n. ``` javascript\nhexagon.draw();\nlayer.getContext().setAttr('globalCompositeOperation',\"source-atop\");\nrect.draw();\n```\n\nhttp://jsbin.com/kufas/1/edit\nI think it is better to use `Kinetic.Shape` here. Use `context.setAttr('globalCompositeOperation',\"source-atop\");` at `drawFunc`.\n. What is use case? Container may have many children. But any node has only one parent.\nSearch in all parent, grandparent, ...? I don't think this function is very useful.\n. ``` javascript\nnode.visible(state);\n```\n. http://stackoverflow.com/a/23787397/512042\n. Float mouse position?! WAT?!\n. http://stackoverflow.com/a/23787397/512042\n. Convert it on server side and use converted png on client or look there https://code.google.com/p/canvg/\n. I was not testing. But I guess it should work (library works as parser). https://code.google.com/p/canvg/#Potential_uses\n. You have to move node to tween layer BEFORE creating `Tween` instance. http://jsfiddle.net/CLBkm/2/\n. Cursor position has no offset. If you scaled stage you should take scale into account when you are creating new line on mousedown. http://jsfiddle.net/448Nc/1/\n. `html5 canvas stroke always draws half-inside / half-outside the stroke's path`\nThat means you have 2 antialiased pixels stroke.\n. You may add `Kinetic.Rect` on bottom of you stage with your fill.\n. I am sure that `KineticJS` should not care about this. You have strange and very specific use case. You may replace `layerX` and `layerY` with \"correct\" values while faking events.\n. Looks like you are right. But function `_merge` is old and currently not using in KineticJS. So i guess it will be removed.\n\nAlso you should not use private methods (starts with underscore).\n. Yes, site is not working for me too. As I know @ericdrowell is upgrading it.\n. I think `dragDistance` should be relative to `dragBoundFunc`. Do you have an example where your behaviour is important?\n. Can you create any jsfiddle?\n. Canvas element still has problems with drawing svg files. Look there: http://stackoverflow.com/questions/5495952/draw-svg-on-html5-canvas-with-support-for-font-element/5505861#5505861.\n. > it means drawHitFromCache() with Local domain svg is bugged and will never support IE10 ?\n\nCorrect. Just try not to use svg inside canvas.\nAs workaround use png instead of svg.\n. I don't know ways to solve the bug inside `KineticJS`.\n. fixed. You may take latest version from from repo. `kinetic.js` or `kinetic.min.js` files.\n. Set scale after cache. Or pass width and height params to cache function (\nheight = imageHeight \\* scaleX, same for width)\n. This is design solution. All transform functions are disabled for `FastLayer`.\n. fixed\n. Fixed on latest dev version.\n. All tutorials are repaired in new homepage. http://lavrton.github.io/KineticJS/Getting_Started.html\n. Can you provide jsfiddle? If you are calling `draw` on any node (except `Layer` and `Stage`) it will not remove \"old\" node from canvas. Just draw new on top of canvas.\n. http://www.zeali.net/mirrors/html5canvastutorials/kineticjs/html5-canvas-events-tutorials-introduction-with-kineticjs/index.html\n. All tutorials are repaired in new homepage. http://lavrton.github.io/KineticJS/Getting_Started.html\n. Do you have demo? Test is passing:\n\n``` javascript\nvar ring = new Kinetic.Ring({\n          x: stage.getWidth() / 2,\n          y: stage.getHeight() / 2,\n          innerRadius: 50,\n          outerRadius: 90,\n          fill: 'green',\n          stroke: 'black',\n          strokeWidth: 4,\n          draggable: true\n});\nvar clone = ring.clone();\nassert.equal(clone.outerRadius(), ring.outerRadius());\n```\n. Yep. It is strange that you have `width`, `height` and `outerRadius` together. `width` (and `height`) should be = `outerRadius * 2`. Look https://github.com/ericdrowell/KineticJS/blob/master/src/shapes/Ring.js#L52. In your case while cloning `width` (or `height`) was applying after `outerRadius` attribute so it was change `outerRadius` value.\n. Yep. I made small mistake while publishing first version to npm. I can't publish 5.1.0 to npm. So 5.0.6 (on npm) is newer then 5.1.0 (last stable release). Will fixed with new release.\n. While link is not working, It will be very nice if you will make pull requests with any demo to there: https://github.com/lavrton/kineticjs-tips-and-tools#applications\n. Now should work. http://jsbin.com/mitis/3/edit\n\nA lot of API changes from 4.x version.\n. Can you create unit tests for this?\n. I think it will be better to test with node, not \"private\" method. \n\n> For example you could name a circle: 'red circle' and a square: 'red square', and now stage.find('.red') will return both elements, but stage.find('.square') will return just the square.\n\nThis is VERY good test case.\n. All tutorials are repaired in new homepage. http://lavrton.github.io/KineticJS/Getting_Started.html\n. `context` argument is not native canvas context. It is KineticJS wrapper. Use: `context.setAttr('fillStyle', 'red');`\n. 1. Try to use latest dev version from master.\n2. Make any jsfiddle.\n. prevent context menu:\n\n``` javascript\ndocument.getElementById(\"con\").addEventListener('contextmenu', function (event) {\n  event.preventDefault();\n});\n```\n\nthen listen `click` or `mousedown` events:\n\n``` javascript\ngroup.on('click', function(e) {\n  if (e.evt.button === 2) {\n    alert('Right click');\n  }\n});\n```\n\nhttp://jsbin.com/qedez/1/edit\n. New version is not released yet.\n. All tutorials are repaired in new homepage. http://lavrton.github.io/KineticJS/Getting_Started.html\n. Closed as not related to KineticJS.\n. Can you provide any fiddle?\n\nThis one is working with latest build: http://jsbin.com/bivuce/1/edit\n. Fixed.\n. It return `this` for chainable code:\n\n```\nlayer.add(rect).add(circle);\n```\n. Do you mean bad performance while dragging?\nTry latest version from master. How it works for you?\n. I don't think this is a bug. Moving canvas from kinetic container is unexpected behaviour.\n. Can you create jsfiddle?\n. Hello, guys! I was contributing to KineticJS awhile. I made many fixed, but I don't want to tag new version as I am not a maintainer. I was thinking about future developing, but for my project KineticJS is on very good state and improving it is not required. May be I will continue contributing soon, just for experience and practicing.\n. FabricJS and EaselJS are very close to KineticJS. If you are developing game - look at PhaserJS\n. As I know all of them have very good support. In my tests EaselJS has very good performance. But it is really depends on type of application, so you should test youself.\n. @confile you can use `toImage` approach if you have many issues with `cache`. About Phaser - I guess yes. Go to examples page.\n. Phaser JS is based on Pixi. It adds game specific stuff such as camera, physics, sounds, etc. Do you need it? Yes - Phaser JS. No - Pixi. Also one of the main feature of Pixi (Phaser) against Kinetic, Fabric, Easel is that Pixi have awesome build in WebGL support. So if all of your objects on canvas might be represented as picture - you must try it.\n. I will maintain KineticJS in a fork: https://github.com/lavrton/KineticJS\n. API changes:\n\n``` javascript\nvar wave =  new Kinetic.Star({\n  x: 100,\n  y: 200,\n  numPoints: 5,\n  innerRadius: 70,\n  outerRadius: 70,\n  stroke: 'black',\n  strokeWidth: 4,\n  fillLinearGradientStartPoint: {\n    x : 0, y : 0\n  },\n  fillLinearGradientEndPoint: {x : 20, y : 20},\n  fillLinearGradientColorStops: [0, \"#EA493B\", 1, \"#E32486\"]\n});\n```\n\nhttp://jsbin.com/toqexe/1/edit\n. Also you can get documentation from downloads: https://github.com/ericdrowell/KineticJS/releases\n. http://lavrton.github.io/KineticJS/api/Kinetic.html\n. Hello everyone. I decided to create a fork. As a contributor of current repo I think I can support KineticJS in a new fork. Repo and link will be ready in ~ one week.\n. @confile agree, PIXI (and Phaser) is really great. But it is different framework. In my opinion PIXI is best for games. But if you need a lot of \"vector\" graphics (such as text) you will have problems. This is my experience. I was thinking to move to Phaser in my main mind map application. In the app I need to draw a lot of nodes (with text) on canvas. It is possible to create custom graphics with PIXI. But for each graphics PIXI has separate canvas element in memory (You can not just draw text into webgl context, you have to convert text to image first, then you can display that image). So I had big memory leak. I was not able to find solution for this case.\n. Hello everyone. I made a fork. https://github.com/konvajs/konva\nThe homepage is http://konvajs.github.io/\n. Ops. I am really sad to see this... Waiting Eric's answer.\n. https://github.com/ericdrowell/KineticJS/releases/download/v5.1.0/documentation.zip\n. All forks may be merged in any repo (as in personal as in org).\n\nBut sure that is might be very good idea. Are there any other active forks?\nPS: hmm. all good name already taken.\n. As it is hart to evolve project under old name I decided to rename fork to `Konva` project. Fork is available in this organization: https://github.com/konvajs\n. What an issue? Second tap event is not expected?\n. Usual DOM works is same way: http://jsbin.com/tejohe/1/edit?html,js,output.\nSecond tap is still `tap` event, so event should be fired.\n\nYou can implement simple workaround:\n\n``` javascript\nvar wasDblClick = false;\nrect.on('click tap', function() {\n        setTimeout(function() {\n         if (wasDblClick) {\n             wasDblClick = false;\n             return;\n         }\n          console.log('click');\n}, 10);\n});\n\nrect.on('dblclick dbltap', function() {\n  wasDblClick = true;\n  console.log('dblclick');\n});\n```\n. `var dbltap = false;` should be outside of `wireKineticEventSafe` function.\n. Works nice for me: http://jsbin.com/bipoke/13/edit?js,output\n. Now sure how long it will be available here: http://lavrton.github.io/KineticJS/api/\nBut I suggest you to switch to KineticJS fork: http://konvajs.github.io/\n. @zuoRambo right. + template https://github.com/terryweiss/docstrap\n. I think for current moment KineticJS has almost full support of NodeJS. All tests is passing. See `nodejs-demo.js` file as example.\n. If you need `moveTo` node to another layer on `dragstart` you may do this:\n\n``` javascript\nrect.on(\"dragstart\",function(){\n  rect.stopDrag();\n  rect.moveTo(tempLayer);\n  rect.startDrag();\n  layer.draw();\n});\nrect.on(\"dragend\",function(){\n  rect.moveTo(layer);\n});\n```\n. Currently `stage.toDataURL` should work as expected. If you still have problems, please, provide jsfiddle example.\n. Currently `stage.toDataURL` should work as expected. If you still have problems, please, provide jsfiddle example.\n. Resolved on fork. https://github.com/lavrton/KineticJS\n. http://jsfiddle.net/lavrton/bKq2y/2/ Tested with FireFox 27. Works fine. Reopen if need.\n. I don't think that `Kinetic` should be hidden from global namespace while using AMD. It is easier to use KineticJS with third party plugins if Kinetic in global namesapce (for example BackboneJS do same thing).\nAdding UMD patter to each plugin (or module) is defently bad idea. `returnExports` is fixed, thx!\n. I added this with nodejs support commit.\n. You should not use `fill` configuration for images. Use `fillPatternImage` instead. This example http://jsbin.com/hohir/1/edit demonstrate that in this case `toJSON` will work.\n. Not yet. @ericdrowell I think this feature must be with highest priority after FastLayer.\n. I made a demo with drop events support (drop, dragenter, dragleave, dragover). http://lavrton.github.io/KineticJS/Drag_and_Drop/Drop_Events.html\n. All suggestions are resolved. I added proportional feature to TODO list. I will close the issue. If need, please, create separate issues for features, bugs.\n. close by https://github.com/ericdrowell/KineticJS/commit/16511a9aefa28eb1102fe85b39335359e4cf3c6a\n. Does it work now?\n. Close via https://github.com/ericdrowell/KineticJS/commit/0b93e21e0b9e11165dfed7574dbafa0ae2a144e0.\n\n``` javascript\nKinetic.dragDistance = 5;\n// or\nnode.dragDistance(5);\n```\n. Currently works as expected http://jsfiddle.net/lavrton/CxgPN/2/.\nReopen if you have problems.\n. I tested examples (IE9) and for now they works very well.\n. I think the issue is not actual with latest KineticJS version and new cache mechanism. Please, reopen if need.\n. What you expected here? Rectangle is bigger than image. Please, repost your question to stackoverflow.\n. Is this workaround working for you?\n\n``` javascript\nimage.onload = function() {\n  if (!image.complete) {\n    image.src = image.src;\n    return;\n  }\n  // Insert your code here\n};\n```\n. I think that including such workaround with `try`:\n\n``` javascript\ntry {\n        if(a.length === 5) {\n            context.drawImage(a[0], a[1], a[2], a[3], a[4]);\n        }\n        else if(a.length === 9) {\n            context.drawImage(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n        }\n} catch(err) {}\n```\n\nis bad idea. Thoughts:\n1. It may break performance\n2. Unexpected \"invisible\" image.\n\nIf you want to check is image is ok, you may do this:\n\n``` javascript\nlayer.add(image);\ntry {\n  layer.draw();\n} catch (e) {\n  // ops...\n}\n```\n. Also you can use this small snippet:\n\n``` javascript\nif (Kinetic.UA.browser === \"mozilla\") {\n        var originDraw = Kinetic.Context.prototype.drawImage;\n        Kinetic.HitContext.prototype.drawImage = Kinetic.SceneContext.prototype.drawImage = function() {\n          try {\n            originDraw.apply(this, arguments);\n          } catch (e) {\n             console.log(e);\n          }\n        };\n      }\n```\n. Please, reopen if problem still exists and you have code example.\n. Hey! I will close the issue. I can't reproduce the problem on my Ubuntu station. So many chrome version was published after this issue, so I think problem is resolved. If not, please, reopen issue!\n. Problem is resolved. I will close the issue.\n. The problem was with firefox browser, and currnly is solved. Issue is closed.\n. Is this issue actual? You can define `dash` property of line as you wish, so line may look like  transition from one dash array to another.\n. Currently `onFinish` callback will be called even if node is destroyed. (with using `Tween` API )\n. Close as duplicate https://github.com/ericdrowell/KineticJS/issues/193\n. The issue is resolved. If you still have problems post your question on stackoverflow.\n. Currently drag&drop is going on the same layer. So this problem is not actual. I will close the issue.\n. With new KineticJS version `timeDiff` (in `Kinetic.Animation` callback) will be  floating-point number too.\n. As `transitionTo` is deprecated by `Tween` class, problem still exists. Currently this will not work:\n\n``` javascript\nvar tween = new Kinetic.Tween({\n node : node,\n duration : 1,\n offset: {\n  x : 2,\n  y : 2\n }\n});\ntween.play();\n```\n. I think that information that `Tween` is not support objects should be placed at documentation.\n. Issue can be closed, because currently nodes are dragging on same layer.\n. Should be fixed.\n. Can't reproduce bug with latest version: http://jsbin.com/xoqex/1/edit\n. I will close the issue. If it still actual for you, please, reopen with jsfiddle example.\n. @dchhetri , it is not working, because if call draw, it also call drawHit. Result: you have backgroud on bottom, line on top, so mouseup will fire on line shape, but not on background. As I know, Kineticjs has specal canvas for events. If you are calling \"layer.drawScene\", this canvas is not updating, so events for line not fire, but fire for background.\n. Also If you need some events on stage you can use this tip. Create invisible background rectangle and listen events on it (or in stage, while events are bubbling):\n\n``` javascript\nvar back = new Kinetic.Rect({\n    draggable : true,\n    // disable move on dragging\n    dragBoundFunc : function() {\n        return {x : 0, y : 0};\n    }\n});\nlayer.add(back);\nback.on(\"click tap\", () => { \n    // some code\n});\n```\n. Resolved issue. I will close it.\n. Currenly KineticJS works fine with AMD. I will close the issue.\n. I think issue can be closed. Currently opera works as expected.\n. If you need validation you may try to use debugging plugin: https://github.com/ericdrowell/KineticJS/issues/658#issuecomment-36724160\n. Clone method now don't clone id. https://github.com/ericdrowell/KineticJS/commit/e5db9115a09e22dea2d0f0b97296ec9131addd70\n. Now you can do this with `drawHitFromCache` function using `alphaThreshold` parameter.\n. Demo for bug: http://jsbin.com/cuqas/1/edit\nOk for rect, not ok for text.\n. Hit canvas is not updating while dragging (for performance reasons).\nAs a workaround you may draw layer on dragend.\n\n``` javascript\nkItems.lowerLayer.on(\"dragend\", function() {\n    kItems.upperLayer.draw();  // or just drawHit()\n});\n```\n\nUpdated demo: http://jsfiddle.net/lavrton/37pG3/1/\n. Fixed at fork. https://github.com/lavrton/KineticJS\n. Currently it is fixed.\n. Thanks! But perfomance is bad for me. Waiting for native support.\n. Close as duplicate https://github.com/ericdrowell/KineticJS/issues/193\n. v5.0.1 dblcick event works: http://jsfiddle.net/lavrton/a69V9/\nBut this is bad use case, because dblcick, actually, should not trigger on circle. Because after each click a new circle is created, so second click happens on NEW node.\n. Your use case is very strange. You should not use \"private\" properties. Please, repost you question to stackoverflow, if it still actual.\n. You may add text to layer before converting.\nOr you have to set {x, y} in `toImage` params: http://jsfiddle.net/lavrton/TMML9/1/\n. Should be resolved with latest version. Also with this fix https://github.com/ericdrowell/KineticJS/commit/6c46e44bbd2ba88fd3d8f63f71d8f9fa1606f8a1\n. http://jsfiddle.net/ajzhG/40/\nThis demo will not work on ipad3 with retina display.\nBecause KineticJS automatically resolve high resolution device and increase canvas size twice.\nIf you don't need such behaviour use this:\n\n``` javascript\nKinetic.pixelRatio = 1;\n```\n. Fixed: https://github.com/ericdrowell/KineticJS/commit/74060ce9355a8d977ac7da5ebdddd426a7331293\n. ```\nclass Navigation{\n     myOtherClass: MyOtherClass;\n\n     constructor(myOtherClass){\n         this.myOtherClass = myOtherClass;\n         this.wireEvents();\n     }\n\n     wireEvents(){\n         var that = this;\n         this.buttonPrevious.on(\"click\", function(): void {\n             that.myOtherClass.myFunction();\n         });\n    }\n}\n```\n. similar: https://github.com/ericdrowell/KineticJS/issues/411\n. I will close the issue. Currently there are no errors with multitouch - shape just stops dragging. There is issue for full multitouch drag support: https://github.com/ericdrowell/KineticJS/issues/411\n. I think then preventing event propagation to DOM is bad idea.\n. As one way:\n\n``` javascript\nimage.on('dragend', function(e){\n  $(e.evt.target).data('dragend', Date.now());\n});\n$('#con').on('click', function(e){\n  var time = $(e.target).data('dragend');\n  if (Date.now() - time < 2) {\n    console.log('prevent')\n  } else {\n    console.log('click');\n  }\n});\n```\n\nhttp://jsbin.com/pulof/1/edit\n. @nicktgr15 try latest version from master branch.\n. This chrome issue is resolved. Closing it!\n. Instead of this:\n\n``` javascript\nvar stage = new Kinetic.Stage(conf);\nvar layer = new Kinetic.Layer();\nstage.add(layer);\n// other stuff\n```\n\nWe have to do this:\n\n``` javascript\nvar stage = new Kinetic.Stage(conf);\nsetTimeout(function(){\n  var layer = new Kinetic.Layer();\n  stage.add(layer);\n  // other stuff\n}, 50);\n```\n\n@ericdrowell , am I right?\n. 1 You may try to use `throttle` function http://underscorejs.org/#throttle (or any alternative) to save performance\n\n``` javascript\nstage.on('contentTouchmove', _.throttle(function(evt) {\n  layer.moveToTop();\n}, 300);\n```\n\n2 Also look at other hacks: http://slash-system.com/en/how-to-fix-android-html5-canvas-issues/\n. `getTextWidth` is fixed. Currently `getTextHeight` returns fontSize, if you need multiline support use `getHeight` instead.\n. +1 May be create special \"arrow\" shape?\n. I will close this issue. If you still have problems, please, create jsfiddle to demonstrate problem and reopen issue.\n. I think we should not do this. Main reason is event bubbling. User may listen events on parent, not on shape. So library code will be too complicated if we will add such functionality. It is MUCH easier to manually use `shape.listening(false)`\n. I am closing the issue as you have an answer on stackoverflow. I am not sure can we do something here with `KineticJS` codebase.\n. Looks like problem is resolved.\n. Currently KineticJS has bower sopport.\n. Also it solves this issue: http://stackoverflow.com/questions/17002932/extend-kinetc-shape-and-all-derived-shapes\n. I will close this issue. If you still have problems with latest KineticJS, please, provide jsfiddle as demo.\n. Clone method now don't clone id. https://github.com/ericdrowell/KineticJS/commit/e5db9115a09e22dea2d0f0b97296ec9131addd70\n. I can't reproduce with latest version. Reopen if problem still exists.\n. Using KineticJS in this case is incorrect. You should not draw to context manualy by yourself (excepts using custom shape and related use cases: http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shape-tutorial/ ).\n. It works as expected with latest version.\n. Such behavior maybe unexpected, but DOM elements are working in the same way. See demo: http://jsbin.com/poqec/1/edit\n@ThomasRuby children are not placed in the stage after `group.remove()`. `removeChildren` just prevent event bubbling, so `mouseleave` will be fired on mouse, but not in group, because circle is not in group any more.\n. Problem still exists. I made small fiddle for demonstration: http://jsfiddle.net/lavrton/h927F/\n. Fixed at fork. https://github.com/lavrton/KineticJS\n. Currently KineticJS (v5.0.1) has not support of this.\nYou can do this:\n- Find intersection by yourself. (You have to know math very good)\n- Or you may place node on different layers, then loop over all points of layers and check intersection with node. (`getIntersection` function).\n. Can't reproduce with latest version: http://jsfiddle.net/lavrton/huLJ9/1/\nReopen if need.\n. Reopen if need with demo.\n. The issue must go away with latest chrome and kineticjs. If not, please, reopen issue with jsfiddle example.\n. Bug fix for this issue is closed, because solution already in code, so I will close the issue.\n. See: http://kineticjs.com/docs/Kinetic.Node.html#filters\n. Now you can do this:\n\n``` javascript\nnode.cache();\nnode.filters([Kinetic.Filters.Invert]);\n```\n. Should work as expected. Reopen with fiddle if need.\n. Works as expected with latest version. http://jsfiddle.net/lavrton/GFRNz/\n. Now you may use `grunt docs`\n. Please cleanup your question if it still actual. And repost your question to stackoverflow.\n. I will close the issue as old Chrome related bug. For now everything should be fine. Reopen if need.\n. All Chrome related issues should be fixed with new Chrome releases. Reopen if problem still exists.\n. This is browser bug. See: http://stackoverflow.com/questions/18430482/html5-canvas-text-stroke-for-large-font-size-not-drawn-properly\nKIneticJS can do nothing here. As a workaround you may scale a text.\n. If you need to take clip region into account you should use parent's draw function: `group.draw()` or `layer.draw()`\n. Also I think it will be very helpful to create page with kineticjs related stuff such as: ide tools, snippets, articles, plugins, tips, etc.\nMy suggestion: create special github repo \"KineticJS stuff\", with readme file with this related information.\nIt is very easy to add new plugins, articles via pull request in this case.\n\nFor example I created [Backbone plugin](https://github.com/slash-system/backbone.kineticview) that helps me work with KineticJS. May be it can be usefull for someone else.\n. Also someone created this interesting tool: https://github.com/soloproyectos/jquery.transformtool\nDemo: http://jsfiddle.net/cequiel/hkjtM/\n. Now `sprite.start()` works as expected. Also I added `isRunning` method for sprite object. (https://github.com/ericdrowell/KineticJS/commit/53ac9329de63d01f11822975a17932828085e877)\n. If you know coordinates of your line you can calculate coordinates of text manually. If this question is still actual, please, post it to stackoverfow.\n. :+1: Really need to such stuff as detect drop shape. I think best realisation is events \"dragover\", \"dragout\".\n. You can move draggable shape to temporary layer on dragstart, then call `getIntersection` to detect collision. See demo: http://jsbin.com/pecor/1/edit\n. I think we should implement easy way to change layer while dragging and add `drawHitOnDrag` configuration.\nAs dirty workaroud look there: http://jsbin.com/pecor/3/edit\n. I believe I found the problem. Original issue is fixed.\nBut we have new issue with cache system: http://jsfiddle.net/LwRnj/49/. Problem is related to aliasing. KineticJS is taking aliasing into account. But only for 1 pixel. If you will cache node then scale it a lot, aliasing area will bigger than 1 pixel.\n\nCurrently I have no idea how to fix problem in this case... Your thoughts, guys?\n. Close via: https://github.com/ericdrowell/KineticJS/commit/243904031677382c6b8945fdb6c72d250ba6a8bf\n\nCheck again, please, with your system. Reopen if need.\n. I have an interesting bug too. Performance is really good on landskape mode. But it is very poor on portrait mode. I will try to localize this bug with jsfiddle example.\n. Jsfiddle for tests: http://jsfiddle.net/lavrton/JYqJp/2/show/ (from kineticjs lab)\nYou can try landskape mode. Then go to  portrait mode and refresh the page.\n. I am closing the issue as this is not KineticJS bug.\nChange pixel ratio for better performance:\n\n``` javascript\nKinetic.pixelRatio = 1;\n```\n. @icaliman look there https://github.com/ericdrowell/KineticJS/pull/654#issuecomment-40284966\n. I tested with latest KineticJS version. Works as expected: http://jsbin.com/dixup/1/edit\n. I believe problem is resolved with last commit (https://github.com/ericdrowell/KineticJS/commit/243904031677382c6b8945fdb6c72d250ba6a8bf). @kzhdev can you test on your last demo? Reopen issue if need.\n. I will close the issue. If you still need help, please repost question to stackoverflow with more specific information.\n. `destroyChildren` works fine. If you still have problems, please, reopen the issue with more specific information and jsfiddle demo.\n. Close as fixed.\n. Works as expected with v5.0.1\n. I think this is a bad idea to use many libraries in the same canvas.\nFor example kineticjs take full controll of canvas element. It can clean and redraw it whatever it want.\nAlso kineticjs has good mechanism with layers and creating more canvases for performance reasons.\n. You may use `offset` for this purpose. Please, post your question to stackoverflow if you still have it.\n. You can use `Kinetic.Shape` to draw object with context access. See example: http://jsbin.com/kixeq/2/edit \n. Works for me for latest kineticjs version with requirejs.\n. May be helpful: http://stackoverflow.com/questions/11929099/html5-canvas-drawimage-ratio-bug-ios\n. Hello, folks! Update on this thread. As we know this is a REAL bug of iOS webview. And as @ericdrowell said it may be dangerous to include such workarounds to `KineticJS` codebase.\n\nBUT! I found very good solution. You should know, that you can pass not only `Image` objects to `Kinetic.Image`. Also you may pass `<canvas>` element! So there is working way:\n1. Create special 'buffer' canvas (with same size as original image)\n2. Draw the image into the canvas with some extra workarounds\n3. Create `Kinetic.Image` with the canvas.\n\nCode:\n\n``` javascript\n    // detect scale ratio\n    function detectVerticalSquash(img) {\n      var iw = img.width, ih = img.height;\n      var canvas = document.createElement('canvas');\n      canvas.width = 1;\n      canvas.height = ih;\n      var ctx = canvas.getContext('2d');\n      ctx.drawImage(img, 0, 0);\n      var data = ctx.getImageData(0, 0, 1, ih).data;\n      // search image edge pixel position in case it is squashed vertically.\n      var sy = 0;\n      var ey = ih;\n      var py = ih;\n      while (py > sy) {\n          var alpha = data[(py - 1) * 4 + 3];\n          if (alpha === 0) {\n              ey = py;\n          } else {\n              sy = py;\n          }\n          py = (ey + sy) >> 1;\n      }\n      var ratio = (py / ih);\n      return (ratio===0)?1:ratio;\n    }\n\n    // create canvas to replace with image\n    function generateCanvas(image){\n        var canvas = document.createElement('canvas');\n        var context = canvas.getContext('2d');\n        canvas.width = image.width;\n        canvas.height = image.height;\n        var vertSquashRatio = detectVerticalSquash(image);\n        console.log(image);\n        context.drawImage(image, 0, 0, \n                           image.width, image.height / vertSquashRatio);\n        return(canvas);\n    }\n\n    var img = new Image();\n    img.onload = function() {\n      var stage = new Kinetic.Stage({\n          container: 'con',\n          width: 1000,\n          height: 1000\n      });\n      var layer = new Kinetic.Layer();\n      stage.add(layer);\n      var image = new Kinetic.Image({\n        image : generateCanvas(img),\n        width : 200,\n        height : 200,\n        draggable : true\n      });\n      layer.add(image);\n      layer.draw();\n    }\n    img.src = 'diana2.jpg';\n```\n\nI tested this code on iPad, and it is fixing the bug. Can someone approve?\n. @icaliman I tested my solution on iPad - and problem was gone. Do you have any errors?\n. What is value of `vertSquashRatio`? What are you expecting? Did you try my way with replacing image object by fixed canvas object?\n. 0.375 is not correct? May be wrong calculation if image has transparent area on left edge.\n. Fixed: https://github.com/ericdrowell/KineticJS/commit/6c46e44bbd2ba88fd3d8f63f71d8f9fa1606f8a1\n. I think too that kineticjs must have ways to detect such probems. For example:\n\n```\nKinetic.setDebugLevel(\"all\");\n```\n. KineticJS has no validation of parameters for performance reasons. But is some cases validation might be VERY helpful. I was thinking to add some `debug mode` to KineticJS.\nIn this mode all set methods will be overwriting with validation step. It may slow down performance, but this is just developer tool and you will be able to do something like `Kinetic.debugModeOff()`.\n\nWhat do you think?\n. Good news everyone!\nI made this small script to support full validation of parameters for KineticJS.\nhttps://gist.github.com/lavrton/9363432\n\nUsage:\n1. Add `kinetic.debug.js` script after `kinetic.js` in your html\n2. Somewhere in your code: `Kinetic.debugModeOn();`\n\nSee example: http://jsbin.com/kujef/1/edit\nIs it awesome?\n. Plugin is available there https://github.com/lavrton/kineticjs-tips-and-tools/tree/master/debug\n. Looks like bug is fixed with latest version: http://jsfiddle.net/lavrton/mTZEP/1/\n. Now works fine: http://jsbin.com/kojaci/1/edit. Reopen if issue still exists.\n. As expected. `toImage` is async function. You should use `img` inside callback function.\n@ericdrowell, I think you should remove from docs `var image =` because it can lead to confusion.\n. Use Kinetic.Util.extend\n. A layer is creating new canvas element. This is expected behaviors. You should carefully read http://www.html5canvastutorials.com/kineticjs/html5-canvas-layer-management-with-kineticjs/\n. Works fine : http://jsfiddle.net/lavrton/T43NK/1/\n. Ups, sorry, my mistake. Setting width of text is working as max width, right?\n. Works with latest version: http://jsfiddle.net/lavrton/44reA/1/\n. API for now is\n\n```\nvar html = new Kinetic.HTML({\n    html : \"<content>\",\n    callback : function() {}   //callback here is bad\n});\n```\n\nMay be it wiil be more usefull with this API:\n\n```\nKinetic.htmlToImage({\n    html : \"<content>\",\n    callback : function(img) {\n       var image = new Kinetic.Image({\n           image : img\n       });\n   }\n});\n```\n. Also, if someone interesting, this may be helpfull: https://github.com/niklasvh/html2canvas\n. I added pinch event to my project (that is using kineticjs).\nI made first implemantation from here: http://www.html5canvastutorials.com/labs/html5-canvas-multi-touch-scale-stage-with-kineticjs/\nBut I had some problems, so I moved to using hammer.js. It so easy and clean http://eightmedia.github.io/hammer.js/\n\nMy code example:\n\n``` javascript\n//get stage document element and listen it\nvar transformer = Hammer(this.getStage().getContainer());    \n\nvar startScale = null;\ntransformer.on(\"transformstart\", function(e) {\n  startScale = _this.getCamera().getScale();\n\n});\ntransformer.on(\"transform\", function(e) {\n  return _this.getCamera().setScale(startScale * e.gesture.scale);\n  // or stage.setScale(...) or... Whatever you want\n});\n```\n\nYou can do the same for swipe event.\n. That is because hammer.js know nothing about kineticjs objects. It can't pass kineticjs targer node in event param.\nAll is posible here is define or find target node by youself.\n. HammerJS support for KineticJS's nodes will be added with next release. See example: http://jsfiddle.net/lavrton/qQeH6/\n. I added pull request https://github.com/ericdrowell/KineticJS/pull/684 with new test.\n. How to try multitouch on object? Scale, move?\nKineticJS currently handle only one touch for dragging.\n. Of couse I can add shape to some cache layer.\n\nBut I will still have problems if shape size is bigger than stage size.\nShape wil be cutted: http://jsfiddle.net/lavrton/TFW9T/1/\n\n(But (!) will not cuted with not shadow and stroke: http://jsfiddle.net/lavrton/TFW9T/2/)\n. For tests: http://jsfiddle.net/lavrton/T43NK/6/\nAs @CyranX said :  try to drag red rect to top left corner.\n. In my machine latest example http://jsfiddle.net/lavrton/T43NK/6/ (Chrome) works as expected. I will close the issue.\n. Fixed.\n. The error is somewhere else.\nProperty position doesn't matter. http://jsfiddle.net/lavrton/7BjGg/\n. Currently with Chrome 33 examples work as expected. I think Chrome problem is resolved and I can close the issue.\n. run `grunt dev` before opening page.\n. Now you can apply filters in order you want: http://jsbin.com/novej/1/edit\n. You can convert shape to image with `toImage` function then apply filter.\n. Now you can use filters for all shapes. I will close the issue.\n. You may use `event.changedTouches.length`\n. Lates version works as expected.\n. I will close the issue. If it still actual for you, please, repost it to stackoverflow. (Demo works fine, just clarify what you are expecting)\n. `remove` function is not destroying object, only remove it from parent container. You should use `destroy` if you want permanently kill object. Post you question to stackoverfow if you still have problems.\n. Hmm.. Looks like browsers have very bad support of `toBlob` function.\n. Awesome! @ericdrowell please look at this. I think it is important request. It is VERY hard to do `dbltap` on some devices, because every time you tapped on node it is moving little bit, and that is prevent `tap` and `dbltap`. I set dragDistance = 3 in my main application. Much better.\n\n``` javascript\nKinetic.dragDistance = 3;\n// or\nnode.dragDistance(3);\n```\n. Fixed via: https://github.com/ericdrowell/KineticJS/commit/e5db9115a09e22dea2d0f0b97296ec9131addd70\n. Fixed. Thx.\n. You should not set node's zIndex before adding to container. Only after.\nFix: https://github.com/ericdrowell/KineticJS/commit/cadcb91fbc368d129c6a9e7261276625d1cd1d8c  Now zIndex will be ignored (with warn message) in this case.\n. You can cancel event propagation in this way:\n\n``` javascript\nrect.on(\"dragstart\", function(e){\n  e.cancelBubble = true;\n});\n```\n. Actually, if you REALLY need this you can do some javascript hacks with Function constructor (still bad way, because JSON - is only data, no code!):\n\n``` javascript\nKinetic.Rect.prototype.toJSONFull = function() {\n    var obj = this.toObject();\n    obj.attrs.dragBoundFunc = this.getDragBoundFunc();\n    return JSON.stringify(obj, function (key, value) {\n        if (typeof value === 'function') {\n            return value.toString();\n        }\n        return value;\n    });\n};\n\nKinetic.Node.createFixed = function(json, container) {\n        var passed = JSON.parse(json, function (key, value) {\n            if (value \n                && typeof value === \"string\" \n                && value.substr(0,8) == \"function\") {\n                var startBody = value.indexOf('{') + 1;\n                var endBody = value.lastIndexOf('}');\n                var startArgs = value.indexOf('(') + 1;\n                var endArgs = value.indexOf(')');\n\n               return new Function(value.substring(startArgs, endArgs)\n                                 , value.substring(startBody, endBody));\n            }\n            return value;\n        });\n        return this._createNode(passed, container);\n};\n```\n\nThen using:\n\n``` javascript\nvar rect2 = Kinetic.Node.createFixed(rect.toJSONFull());\n```\n\nExample: http://jsfiddle.net/lavrton/7chvS/\n. I can't reproduce the bug. Please, reopen the issue if you still have problems.\n. Do you use offset? Looks like yes, because after scale image should be placed at same position (same top left point). May be you need to take offset into account.\n. Can't reproduce: http://jsbin.com/nonul/1/edit\n. After some time and testing I will make pull request to https://github.com/borisyankov/DefinitelyTyped\n. I found one more. Without pull request: https://github.com/ericdrowell/KineticJS/blob/master/src/Node.js#L118\n`showBorder` -> `drawBorder`\n. Hint errors are resolved.\n. I can't reproduce the bug (Chrome Version 33.0.1750.117) http://jsfiddle.net/lavrton/k8zf5/4/. Reopen if need, please.\n. :+1: @ericdrowell, your thoughts?\n. Are you sure that quality of non-cached shapes is bad? Everything is good for me. (tested on iPad)\n. There are two dependencies need for NodeJS: `jsdom` and `canvas`.\n1. We need to add them to package.json\n2. Change travis configuration to install only dev dependiences.\n3. Publish KineticJS to npm.\n@ericdrowell, can you do this?\n. grunt dev\n. `npm install kinetic`\n. Firefox don't understand color like `590b0a` only `#590b0a`, but chrome understand.\n@ericdrowell, is it expected behavior:\n\n```\nKinetic.Util._rgbToHex(89, 11, 10)\n\"590b0a\"\n```\n. Sure, for 10 items, right? Try to add more by clicking on stage. See fps and compare with other examples.\n. You right. it may use WebGL. But in my tests browser has no WebGL support, so Pixi was using 2d canvas.\n. Yah, more tutorials! I wrote some tips, that you already noticed: https://github.com/lavrton/kineticjs-tips-and-tools#performance (like `transformsEnabled` and `hitGraphEnabled`params).\n. I updated fiddle (http://jsfiddle.net/lavrton/Yc73v/6/) with `transformsEnabled: 'position', hitGraphEnabled: false` and using previous position API (getX, setX) instead of overloaded. Better, but not to much. (+ 5 fps for 1000 BUNNIES in my machine)\n. With new `cache` function from v5.0.0 `KineticJS` getting much faster.\n. No need after HammerJS support.\n. Wait until image loaded:\n\n``` javascript\nvar heating_on3= new Image();\nheating_on3.src = \"icons/heating_on.png\";\nheating_on3.onload = function() {\n    this.heating = new Kinetic.Rect({\n        x: 100,\n        y: 200,\n        height: 100,\n        width: 100,\n        fillPatternImage: heating_on3,\n        stroke:\"black\",\n        strokeWidth:10\n    });    \n};\n```\n\n@ericdrowell, I think KineticJS should have some out of the box ways to wait loading.\n. Really looks like a bug. You must set fillPatternScaleX and fillPatternScaleY:\nhttp://jsfiddle.net/lavrton/33Zet/1/\n. @ericdrowell,\n\n``` javascript\nKinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillPatternScaleX', 0);\n```\n\nShould it be:\n\n``` javascript\nKinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillPatternScaleX', 1);\n```\n\n?\n. Tested with latest version: http://jsfiddle.net/lavrton/Vm52D/\nWoks fine everywhere. Can you make a fiddle example?\n. Looks like a bug. Demo: http://jsfiddle.net/lavrton/uT5Zb/\n. http://web.archive.org/web/20130917231605/http://kineticjs.com/docs/ :+1: \n. Look at this demo: http://jsfiddle.net/lavrton/qQeH6/show\nTry to transform with multitouch! Awesome, is it?\nSo easy to setup:\n\n``` javascript\nvar startScale = 1;\nvar startRotate = 0;\n\nvar hammertime = Hammer(rect)\n.on(\"transformstart\", function(e) {\n    startScale = rect.scaleX();\n    startRotate = rect.rotation();\n}).on(\"transform\", function(e) {\n    rect.scale({\n        x : startScale * e.gesture.scale,\n        y : startScale * e.gesture.scale,\n    });\n    rect.rotation(startRotate + e.gesture.rotation)\n});\n```\n. Updated for swipe event. http://jsfiddle.net/lavrton/qQeH6/show\n. What you mean \"it's hard\"? Do you mean it is hard to implement all multitouch events INSIDE KineticJS?\n\nIn example above you may test that all events are supported via hammerjs. (and some little patch to kineticjs). I will make pull request for this soon.\n. No. It is only adding more events for one node.\n. Done: https://github.com/ericdrowell/KineticJS/commit/61542ea6cce360218a7a34f50d749d00411c5438\n\nBut currently it is not possible to remove specific handler:\n\n``` javascript\nhammerInstance.off(\"event\", handler);\n```\n\nyou may use namespace for this case:\n\n``` javascript\nhammerInstance.off(\"event.namespace\");\n```\n. I think this is good workflow. I also added same behaviour for `touchmove`. That will increase dragging performance on some android devices a lot (https://github.com/ericdrowell/KineticJS/issues/821)! Thanks!\n. May be it will be useful if group will find width by itself.\n. You can use `node.strokeEnabled` function.\n. ``` javascript\nstage.setSize({\n   width : params.width,\n   height : params.height\n});\n```\n. My thoughts:\n1. Do not use cache - each `cache` function is new canvas element in memory.\n2. Try to use as less number of layers as possible. 75 - is TOO MANY! I think that 10 is max.\n. I don't think this is useful commit:\n1. We have very good support for `requestAnimationFrame` http://caniuse.com/requestanimationframe\n2. You will get wrong behaviour if you call multiple `FRAF` at once. Example:\n\n``` javascript\nvar callback = function() {\n    console.log(Date.now());\n}\n\nfor (var i = 0; i < 100; i++) {\n    FRAF(callback);\n}\n```\n. Please, repost your question to stackoverflow with jsfiddle example.\n. Hint errors are resolved.\n. http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shape-tutorial/\n. Thank you! I think this algorithm https://github.com/ericdrowell/KineticJS/issues/807 is much cleaner and easier to understood; so I added it.\n. Fixed: https://github.com/ericdrowell/KineticJS/commit/a524ba9ec12fc23fbb774739947c567628752c4f\n. Thx! https://github.com/ericdrowell/KineticJS/commit/3a5b6eb76618a8b5bb6bca6bfafb6fe9e06fac2a\n. Close via: https://github.com/ericdrowell/KineticJS/commit/243904031677382c6b8945fdb6c72d250ba6a8bf\n\nCheck again, please, with your system. Reopen if need.\n. API changes:\n\n``` javascript\nstage.setScale({\n x : scale,\n y : scale\n});\nstage.setSize({\n  width : width,\n  height : height\n});\n```\n. Looks like tutorial is not updated (@ericdrowell, please look at this).  It is not working on my device.\n. ```\nstage.setSize({\n  width : newWidth,\n  height : newHeight\n});\n```\n. You may prevent using `cache()` function for Image but hit graph will have rectangle shape in this case. It is not possible to create hit graph with same shape as image without `cache()`.\n\n@m73 currently cached node does not support changing opacity value. Will be fixed soon.\n. Bug here. Opacity will be applied twice (if cached object already has opacity).\n. May be we can reset opacity before caching (`cache` function):\n\n``` javascript\nvar prevOpacity = this.getOpacity();\nthis.setOpacity(1);\nthis.drawScene(cachedSceneCanvas);\nthis.drawHit(cachedHitCanvas);\nthis.setOpacity(prevOpacity);\n```\n\nthen apply opacity to cache\n. close by https://github.com/ericdrowell/KineticJS/commit/cb52be6dc0e62fa526579762d45e92d08b434d23\n. You should not touch built in methods of KineticJS's nodes. Just use another variable\n. Thx. But I think this is very specific use case. You can do this manually. As example:\n\n``` javascript\nvar isOk = true;\nstage.getChildren().each(function(layer){\n    if (!layer.toDataURL()) {\n        isOk = false;\n    }\n});\nif (!isOk) {\n   // something\n}\n```\n. I made this set of tests for different ways of drawing objects: http://jsfiddle.net/lavrton/TwAh3/show/\nNo difference on desktop, but different on android devices.\n\nAlso I founde little hack that helps solve subject :\n\n``` javascript\n        var oldFunc = this.layer._getIntersection;\n        node.on(\"dragstart\", () => {\n            this.layer._getIntersection = function(){\n                return node;\n            }\n        });\n        node.on(\"dragend\", () => {\n            this.layer._getIntersection = oldFunc;\n        });\n```\n\nUsual usage: http://jsfiddle.net/lavrton/Yp8gP/show/\nWith hack: http://jsfiddle.net/lavrton/ANJ98/show/\nDo you feel difference on android devices?\n. This problem is relative to drag&drop. While dragging, every `touchmove` event will call `getIntersectrion` function. By design of KineticJS intersections are finding via native context `getImageData` function. As I explained at first post problem only on android devices, where this function (`getImageData`) is slow.\n. Profiling on Asus Transformer TF101G (Android). (while dragging one star)\nUsual Kinetic usage (http://jsfiddle.net/lavrton/Yp8gP/show/):\n![usual](https://f.cloud.github.com/assets/1443320/2265552/3a710692-9e83-11e3-8c15-594f818a6807.png)\n\nAfter disable `_getIntersection` (http://jsfiddle.net/lavrton/ANJ98/show/) (plus 5-10 fps):\n![hack](https://f.cloud.github.com/assets/1443320/2265562/5fe2078c-9e83-11e3-872a-d80ba0ae43e9.png)\n. > no don't do that, you're essentially indirectly throttling the event detection.\n\nDo you mean my small hack?\n. Sure! There is a full version of demo: http://jsfiddle.net/lavrton/TwAh3/show/\nI can make only for KineticJS if need with code cleaning.\n. In my case looks faster (plus 2-4 fps), but `getImageData` is still bottleneck function. Not sure can we do something here more. I think I will use the hack in my project. I added it to https://github.com/lavrton/kineticjs-tips-and-tools/blob/master/README.md#mobile-tips, because it may be usefull in small set of KineticJS applications.\n. @ericdrowell I mean this hack:\n\n``` javascript\n     var oldFunc = this.layer._getIntersection;\n        node.on(\"dragstart\", () => {\n            this.layer._getIntersection = function(){\n                return node;\n            }\n        });\n        node.on(\"dragend\", () => {\n            this.layer._getIntersection = oldFunc;\n        });\n```\n\nNot this (@Pe443):\n\n```\nmoveStage(mousePos) {\n    ... code  ...\n    this._mainStage.draggable(false);\n    setTimeout(() => {\n        this._mainStage.draggable(true);\n    }, 50);\n}\n```\n\nThere is reason to detect events when you want to drag several nodes at same time by multi touch. (Currently KineticJS has not this support, but I hope it will)\n. Performance may be different depend on type of your application. Canvas on android has many bugs. You should try to use all performace tips available to you. See: https://github.com/lavrton/kineticjs-tips-and-tools/blob/master/README.md#performance\n. Close by https://github.com/ericdrowell/KineticJS/pull/777.\n. There are no bugs. Here bitwise operation is using for rounding.\nI think `Math.round` will be much cleaner https://github.com/ericdrowell/KineticJS/commit/347e4d697fbc5fd1431e55a9f873b82385d36fd4. It has almost same performance: http://jsperf.com/math-floor-vs-math-round-vs-parseint/2\n. ``` javascript\nfunction isCircleOnScreen(circle) {\n    var center = circle.position(); // you can define center as you need. You may have offset or shape, where x, y of position is not center (as Rect)\n    // then find width and height of shape. Remember that by default group has 0 width and height\n    var width = circle.raduis() * 2;\n    var height = circle.raduis() * 2;\n\n    if (center.x < - width / 2 || center.x > stage.getWidth() + width / 2 || center.y < - height / 2 || center.y > stage.getHeight() + height / 2) {\n        return false;\n    } else {\n        return true;\n    }\n}\n```\n. Can you provide fiddle? I can't reproduce: http://jsbin.com/kaped/1/edit\n. This is browser bug:\n1. https://code.google.com/p/chromium/issues/detail?id=161464\n2. http://stackoverflow.com/questions/14538743/what-to-do-if-mousemove-and-click-events-fire-simultaneously\n3. https://code.google.com/p/chromium/issues/detail?id=312305\n\nYou can do this trick:\n\n``` javascript\nif (!((typeof e.webkitMovementX != 'undefined' || typeof e.webkitMovementY != 'undefined') && e.webkitMovementY === 0 && e.webkitMovementX === 0)) {\n      console.log(\"real mousemove\");\n}\n```\n\nSee: http://jsbin.com/hequhiya/6/edit\nShould the fix be inside KineticJS? Hmmm....\n. Can you be more specific what problems do you have?\n. Done.\n. You have to add layers to stage BEFORE using `moveToTop()`, `moveToBottom()`.\nMay be KineticJS should throw error (like \"Add object to container before using this function\") or log warn message in this case.\n. The answer on stackoverflow: http://stackoverflow.com/a/22140094/512042. I will close the issue.\n. I don't see any useful use case here, so I am closing the pull.\n. fixed here: http://lavrton.github.io/KineticJS/Filters/Brighten.html\n. You may add `viewport` meta tag to your html, and install it with your properties.\nI am using this in my application:\n`<meta name=\"viewport\" content=\"initial-scale=1,minimum-scale=1,maximum-scale=1,width=device-width,height=device-height,target-densitydpi=medium-dpi,user-scalable=0\"/>`\n. I think there is not KineticJS bugs, something with you code. One thing that i found:\n\n``` javascript\n        var x = $('form#frmProperties #lineX2').val();\n        var y = $('form#frmProperties #lineY2').val();\n```\n\n`val()` returns `String` not a `Number`. So code should be:\n\n``` javascript\n        var x = parseInt($('form#frmProperties #lineX2').val());\n        var y = parseInt($('form#frmProperties #lineY2').val());\n```\n\nRepost you question to stackoverfow, if you still have problems.\n. @kzhdev can you write unit test for this?\n. Can you provide any jsfiddle?\n. Try latest build. With this pull (https://github.com/ericdrowell/KineticJS/pull/777) performance on androind should be much better.\n. `context` that you have from function parameters is not real canvas context. It is KineticJS's wrapper. Try this (use `setAttr`):\n\n``` javascript\nvar reveal=new Kinetic.Shape({\n    drawFunc: function(context){\n        var comprobar=0;\n\n        context.beginPath();\n        context.setAttr('fillStyle', 'black');\n\n        context.setAttr('globalCompositeOperation', \"destination-out\");\n        for (var i=0;i<arrayaux.length;i++){\n            if (i==primeros[comprobar]){\n\n                context.moveTo(arrayaux[i].x, arrayaux[i].y);\n                comprobar++;\n            }\n            else{\n                context.lineTo(arrayaux[i].x, arrayaux[i].y);\n            }                       \n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n});\n```\n. It is very easy to convert dataURL to blob. For example https://gist.github.com/davoclavo/4424731\nI think we shouldn't include this functionality to library.\n. may be this:\n\n``` javascript\nwindow.URL = window.URL || window.webkitURL;\n```\n\nTry it. Please, repost you question to stackoverflow if need .\n. Can you provide any jsfiddle demo? This example works as expected for me: http://jsbin.com/jotud/1/edit what about your system?\n. Currently you can't change opacity of cached node. You need `clearCache` before setting opacity. @ericdrowell look at https://github.com/ericdrowell/KineticJS/pull/787 please. It is related with current issue.\n. You are using `drawHitFromCache`, right? You can:\n1. Create image with opacity 1\n2. Create hit\n3. only THEN set opacity to 0\nSee demo: http://jsbin.com/yaqap/1/edit\n. Oh. Looks like it will not work in this way, because after `clearCache` hitFunc also cleared\n. You may use ultra hack: set opacity to `0.01` - invisible for you, but visiable for hit! http://jsbin.com/yaqap/2/edit\n. fixed https://github.com/ericdrowell/KineticJS/commit/cb52be6dc0e62fa526579762d45e92d08b434d23\n. Just for advertisement try to use debugger plugin: https://github.com/ericdrowell/KineticJS/issues/658#issuecomment-36724160\n\n`setSize` has another specification:\n\n``` javascript\nstage.setSize({\n  width: window.innerWidth,\n  height: this.window.innerHeight\n});\n```\n. Can you provide more information with fiddle? Adding new node while dragging http://jsbin.com/goxon/1/edit\n. Why not. But it will but much easier if you will localize the problem and provide small demo.\n. I tested MultiTouch, works really cool. But I don't believe that native drag drop is slower. Because it have MANY optimizations. Can you provide any demo?\n. Each frame of your sprite may have different width or height.\nWhen you are setting width of `Kinetic.Image` it is working as scaling, but I think this behavior is not expected for `Sprite` object. For example we have one `sprite` with two frames. One has 100 width, another one has 200 width. What you mean, if you are doing `sprite.width(150)`? \n. Why not to use scaling?\n. ``` javascript\nsprite.scaleX(134/123);\nsprite.scaleY(22/21);\n```\n\nno?\n. Can you provide any example? This demo is working: http://jsbin.com/lujan/2/edit\n. I see. May be KineticJS should say (throw or warn) that caching `Stage` is not allowed (it has no his own canvas). Try to cache each Layers: http://jsbin.com/cetosabo/2/edit\n\n``` javascript\nstage.on(\"dragstart\", function(){\n  stage.getChildren().each(function(layer) {\n    layer.cache({\n      x : stage.x(),\n      y : stage.y(),\n      width : stage.width(),\n      height : stage.height()\n    });\n  });\n});\nstage.on(\"dragend\", function(){\n  stage.getChildren().each(function(layer) {\n    layer.clearCache();\n  });\n  stage.draw();\n});\n```\n. Yep, this is a bug. As workaround until bug is fixed you may also do this:\n\n``` javascript\nstage.on(\"dragstart\", function(){\n  stage.setScaleX(1);\n  stage.setScaleY(1);\n  stage.getChildren().each(function(layer) {\n    layer.cache({\n      x : stage.x(),\n      y : stage.y(),\n      width : stage.width(),\n      height : stage.height()\n    });\n  });\n  stage.setScaleX(1.5);\n  stage.setScaleY(1.5);\n\n});\n```\n\nhttp://jsbin.com/cetosabo/4/edit\n. Possible way:\n1. Every time you have changes on stage cache it to image, then draw this image to hidden layer.\n2. On `dragstart` hide every layer except layer with the image.\n3. On `dragend` hide layer with image and make other layers visible.\n. You have a bug in your code. You are adding layer to stage on button click. But layer is already on stage.\n. What kind of error you are expecting there?\n. Emmm... You want to add error, right? Are you sure? Do not do this! Any program already have a lot of bugs.\n`ajax` have error callback because many things may happen: wrong url, no network etc. `stage.toDataURL` is local function. And it should not have any errors. But if it will it is just KineticJS bug.\n. Actually HammerJS support is not required. You can do this in \"pure\" KineticJS. (http://www.html5canvastutorials.com/labs/html5-canvas-multi-touch-scale-stage-with-kineticjs/)\n\nWith HammerJS example: http://jsfiddle.net/lavrton/6P4fc/2/\n. Can you post your code example with KineticJS?\n. But I think that tracking event type as a second arguments is good idea. It is not easy to include event type to native event object. For example code:\n\n``` javascript\nshape._fireAndBubble(MOUSEOVER, evt, this.targetShape);\nshape._fireAndBubble(MOUSEENTER, evt, this.targetShape);\n```\n\nHere we have same event object for different events. How to insert event type here? If will do something like this:\n\n``` javascript\nevt.kineticEventType = MOUSEOVER;\nshape._fireAndBubble(MOUSEOVER, evt, this.targetShape);\nevt.kineticEventType = MOUSEENTER;\nshape._fireAndBubble(MOUSEENTER, evt, this.targetShape)\n```\n\nWe will have unexpected behavior in this case:\n\n```\nnode.on('mouseover',function(e){\n   setTimeout(function(){\n      console.log(e.kineticEventType);  // why mouseenter?\n  });\n});\n```\n\nWe can clone event object for every event - but this may be expensive action. Thoughts?\n. WOW! I think this is good way. But actually this is VERY BIG API changes. I think many developers use many properties from native event object (as I do). So with this new API I have to do some refactor work. This changes should be documented and described at Change Log very well.\n\nI updated and tested `dispatchEvent` and `addEventListener` (but in this case `addEventListener` will use old API)\n. This is the bug of new version.\n`remove` function of `BaseLayer` Class:\n\n``` javascript\nvar stage = this.getStage();\n// then\nif(stage && _canvas && Kinetic.Util._isInDocument(_canvas)) {\n   // bla bla\n}\n```\n\n`stage` will be `undefined`, because while `removeChildren` function is working it delete parent referance from child node (for performace reasons). I am fixing the bug.\n. Nice. Also we don't need overloaded `removeChildren` and `destroyChildren` functions at `Stage.js`. I think unit test - is best way here.\n. You have to use `touches` property.\n\n``` javascript\n// for example for first finger\nvar clientX = evt.evt.touches[0].clientX;\n```\n. You getting right position. Repost your question to stackoverflow, if it still actual.\n. We can not use adventure options because it will break API. You may use closure compiler with this options for your whole project.\n. Is it working on usual browser?\n. Ok. First try to set timeout to 300ms:\n\n``` javascript\nvar stage = new Kinetic.Stage(conf);\nvar layer = new Kinetic.Layer();\n\nstage.add(layer);\n\nsetTimeout(function(){\n    // add shapes to the layer and then do layer.draw()\n}, 300);\n```\n\nIf it is not helpful try second (insert before your code):\n\n``` javascript\nvar updateCanvas = function(canvas){\n    canvas.style.opacity = 0.9;\n    setTimeout(function() {\n        canvas.style.opacity = 1;\n    });\n};\n\nvar oldDraw = Kinetic.Layer.prototype.draw;\nKinetic.Layer.prototype.draw = function(){\n    updateCanvas(this.canvas._canvas);\n    oldDraw.apply(this, arguments);\n    return this;\n};\n```\n. Currently `KineticJS` supports dragging only for one shape at same time. So I don't understand how both shapes are dragging in you case. May be you are dragging group or layer?\nI will close the issue. Please, go to stackoverflow if you need a help.\n. Look at this demo http://jsfiddle.net/lavrton/qQeH6/. Just use image instead of the rectagle.\n. Too much code! Looks like you get wrong json from server. You should:\n1. Save somewhere json that you get from server\n2. Create simplest jsfiddle demo with this json\n3. Post your question to stackoverflow. (I am sure there are no KineticJS bug here)\n. I see `\"className\" : \"Kinetic.Group\"`, but should be ``\"className\" : \"Group\"` in your JSON. After fixing works fine: http://jsbin.com/dibas/1/edit\n. Which problem you mean?\nAlso you should use `layer.draw()` instead of `node.draw()` (layer is not clearing in this way).\n. Close via: https://github.com/ericdrowell/KineticJS/commit/243904031677382c6b8945fdb6c72d250ba6a8bf\n. Also I want to add some note there. Might be related.\nI was testing KineticJS on desktop with windows 8. Testing device support both mouse and touch manipulations. Mouse events work fine, but touch - no. Also I accidentally discovered that touch event had start working after I added `HammerJS` to stage container.\n\n``` javascript\nvar hammer = new Hammer(stage.getContainer());\n```\n. May be we can insert some polyfill to `KineticJS`? For example https://github.com/WebReflection/ie-touch#ie-touch? Or add some note to documentation (or readme, or wiki, hmmm)?\n. But `TouchEvent` is not defined in some browsers. http://caniuse.com/touch\n. It is not reproducing on a real device. I tested on ipad 3. So I am not sure it is a bug.\n. What is not correct? What are you expecting?\n. By design scaling don't affect `x` and `y` properties, only \"size\" properties - like width, height. Green line is moved because scale affect `points` property like size properties.\n. 1. No. This information is incorrect. Fixed: https://github.com/ericdrowell/KineticJS/commit/3b14818ac57f658c2f9cc930f19a18095af434bd\n2. How you get this error? Code?\n. You are right. It was bug. Fixed now. Thanks.\n. Can you provide demo? This example works fine: http://jsbin.com/garas/1/edit\n. You are right. My demo using v5.0.1. Same bug with v5.1.0\n. Answered on stackoverflow.\n. When you are executing `stage.find('.column')` it returns collection (array) of 3 element with name 'column'. Then you are adding `click` event handler only to this 3 objects. When you are creating more columns they have no such event handler. An you are right - instead of creating new `Rect` you may clone existent `Rect`. Cloning action is also copying event handlers.\n. It is not a bug. This is design solution.\n. This is a bug. I will fix it soon.\n. Fixed, thanks.\n. This may be helpful: http://stackoverflow.com/questions/12886286/addeventlistener-for-keydown-on-canvas\n\nAlso look at this demo: http://jsbin.com/tojof/1/edit\n. I think best use case is listen all keydown events:\n\n```\nwindow.addEventListener(\"keydown\", handle, true);\n```\n. Try my demo. I thinks that is what you need.\n. I thinks yes - user should know what stage is current. Also you may focus element on other events: any application event, on scrolling etc.\n. It may be iframe issue. \"Pure\" page works fine: http://jsbin.com/bipociqo/1\n. ``` javascript\nvar node = new Kinetic.Shape({\n  offset : {\n    x : 10,\n    y : 10\n  }\n  // or\n  // offsetX : 10,\n  // offsetY : 10\n});\n```\n. Do you understand warning message?\n\nLayer's `getWidth()` and `getHeight()` return 0 (maybe they should return stage values...). So caching is not working.\n. Currently KineticJS can't handle width or height of groups (or layers) automatically. So you have to calculate them by yourself or use stage size values.\n\n``` javascript\nlayer.cache({\n   width : stage.getWidth(),\n   height : stage.getHeight()\n});\n```\n. I think KineticJS should not care about this problem.\n1. The downsized image has \"strange\" quality, but not bad quality\n2. Including such downsizing algorithm may drop performance a lot\n3. Also is is hard to integrate this algorithm when we want to have different from original image width/height ratio.\n4. Also tweening.\n\nAnytime you can downsize image to canvas element, then pass the canvas to `Kinetic.Image`\n. Why do use think it is not working?\n\nUse `display : inline-block;` css for `container`.\n. `visible` is working: http://jsbin.com/buzix/1/edit\nWhy do you need width and height for layer?\n. I will update docs for supported params for FastLayer. If you need to change `x` or `y` of FastLayer just change such properties for each children.\nAlso if you will set `hitGraphEnabled` to `false` for Layer you will have almost FastLayer.\n. Do you meen color or point position?\n. Can you provide demo?\n. I see. You are resizing stage content manually, don't do this. Because KineticJS can not handle such behaviour. If you need to change size of a stage you should do something like this:\n\n``` javascript\nstage.scale({\n   x : scaleFactor,\n   y : scaleFactor\n});\nstage.width(yourWidth);\nstage.height(yourHeight);\n```\n\nSo. There are no KineticJS bugs here. If you need more information or help, please, repost your question to stackoverflow.\n. Fixed. :+1: \n. Close as answered.\n. Close as issue is not a bug. Use stackoverflow.\n. Create background rectangle and use it for events:\n\n``` javascript\nvar text = new Kinetic.Text(config);\nvar back = new Kinetic.Rect({\n x : text.x(),\n y : text.y(),\n width : text.width(),\n height : text.height()\n});\nback.on('mouseleave', callback);\n```\n. This is expected behaviour of `cache` function.\n. Fixed by https://github.com/ericdrowell/KineticJS/commit/243904031677382c6b8945fdb6c72d250ba6a8bf. Can you download latest `kinetic.js` from repo and test?\n. I made unit test for this case. Just for example updated demo works fine: http://jsfiddle.net/fy6LQ/4/\n. Ops...\n. Thanks!\n. Thanks!\n. I believe this plugin https://github.com/lavrton/kineticjs-tips-and-tools/tree/master/debug may help you find problem by yourself. Add https://rawgithub.com/lavrton/kineticjs-tips-and-tools/master/debug/kinetic.debug.js after `kinetic.js`.\n. Can you provide more information about \"losing pixel\"? Screenshots?\n. I have ubuntu with chrome 34 and I don't see any difference. What is your system?\n. I think it is related to https://github.com/ericdrowell/KineticJS/issues/819 and https://github.com/ericdrowell/KineticJS/issues/750.\n. Interesting. But sometimes user may call `draw` method for shape (not for whole layer). Also may be it is possible to move such functionality to `Context` class.\n. I made this test: http://jsperf.com/dh-getimagedata-pixel-by-pixel-or-all-image/5\nIs it correct? I don't see any profit here.\n. I updated test. Looks like performance is much better.\n. May be we can make this in this way:\n1 Clear cache on ANY `drawHit` (on any node):\n\n```\nvar layer = this.getLayer()\nif (layer) {\n    layer.hitCache = undefined;\n}\n```\n\n2 Create hitCache on first (after `drawHit`) `getIntersection` call (layer method):\n\n``` javascript\nif (this.hitCache) {\n   // get data from cache\n} else {\n    // 1. create hitCache\n    // 2. return this.getIntersection(args);\n}\n```\n. Thanks. I also added unit test https://github.com/ericdrowell/KineticJS/commit/acac6e402f98ca5dc4ab662df11b8b8704c6b847#diff-9f8320baecfa172311b90096f1144d7cR297.\n. I disabled such caching awhile. I was testing on big project - it has many side effects. `getImageData` is very slow if values of `width` and `height` are large.\n. Of course it depend on application. If layer has animation - we will call `getImageData` every mouse move. Also I was testing on iOS. Dragging performance is dropped: when you created stage cache is empty. On `dragstart` new cache are creating - but that action is very slow.\n. Can you, please, repost your question to stackoverflow?\n. Ok. I will answer you here. Objects are rotating relative to their \"center\" point {x, y}. Your line object has no `x` and `y` attrs at configuration - that means they equal 0. So your line rotate relative top left canvas point. You may draw your shape near \"center\" point, then move your shape anywhere by changing `x` and `y` attrs (not `points` array). Also you may use `offset` attributes to move \"center\". May be demo will be more descriptive then my answear: http://jsbin.com/nuhaf/2/edit\n. Opacity - you are right, it is fixed (test latest build).\nOffset and rotation - are working fine. You need to apply rotation and offset AFTER `cache()` function is called to get best result or config `x`, `y`, `width` and `height` arguments of `cache` function manually.\n. ``` javascript\nhexagon.draw();\nlayer.getContext().setAttr('globalCompositeOperation',\"source-atop\");\nrect.draw();\n```\n\nhttp://jsbin.com/kufas/1/edit\nI think it is better to use `Kinetic.Shape` here. Use `context.setAttr('globalCompositeOperation',\"source-atop\");` at `drawFunc`.\n. What is use case? Container may have many children. But any node has only one parent.\nSearch in all parent, grandparent, ...? I don't think this function is very useful.\n. ``` javascript\nnode.visible(state);\n```\n. http://stackoverflow.com/a/23787397/512042\n. Float mouse position?! WAT?!\n. http://stackoverflow.com/a/23787397/512042\n. Convert it on server side and use converted png on client or look there https://code.google.com/p/canvg/\n. I was not testing. But I guess it should work (library works as parser). https://code.google.com/p/canvg/#Potential_uses\n. You have to move node to tween layer BEFORE creating `Tween` instance. http://jsfiddle.net/CLBkm/2/\n. Cursor position has no offset. If you scaled stage you should take scale into account when you are creating new line on mousedown. http://jsfiddle.net/448Nc/1/\n. `html5 canvas stroke always draws half-inside / half-outside the stroke's path`\nThat means you have 2 antialiased pixels stroke.\n. You may add `Kinetic.Rect` on bottom of you stage with your fill.\n. I am sure that `KineticJS` should not care about this. You have strange and very specific use case. You may replace `layerX` and `layerY` with \"correct\" values while faking events.\n. Looks like you are right. But function `_merge` is old and currently not using in KineticJS. So i guess it will be removed.\n\nAlso you should not use private methods (starts with underscore).\n. Yes, site is not working for me too. As I know @ericdrowell is upgrading it.\n. I think `dragDistance` should be relative to `dragBoundFunc`. Do you have an example where your behaviour is important?\n. Can you create any jsfiddle?\n. Canvas element still has problems with drawing svg files. Look there: http://stackoverflow.com/questions/5495952/draw-svg-on-html5-canvas-with-support-for-font-element/5505861#5505861.\n. > it means drawHitFromCache() with Local domain svg is bugged and will never support IE10 ?\n\nCorrect. Just try not to use svg inside canvas.\nAs workaround use png instead of svg.\n. I don't know ways to solve the bug inside `KineticJS`.\n. fixed. You may take latest version from from repo. `kinetic.js` or `kinetic.min.js` files.\n. Set scale after cache. Or pass width and height params to cache function (\nheight = imageHeight \\* scaleX, same for width)\n. This is design solution. All transform functions are disabled for `FastLayer`.\n. fixed\n. Fixed on latest dev version.\n. All tutorials are repaired in new homepage. http://lavrton.github.io/KineticJS/Getting_Started.html\n. Can you provide jsfiddle? If you are calling `draw` on any node (except `Layer` and `Stage`) it will not remove \"old\" node from canvas. Just draw new on top of canvas.\n. http://www.zeali.net/mirrors/html5canvastutorials/kineticjs/html5-canvas-events-tutorials-introduction-with-kineticjs/index.html\n. All tutorials are repaired in new homepage. http://lavrton.github.io/KineticJS/Getting_Started.html\n. Do you have demo? Test is passing:\n\n``` javascript\nvar ring = new Kinetic.Ring({\n          x: stage.getWidth() / 2,\n          y: stage.getHeight() / 2,\n          innerRadius: 50,\n          outerRadius: 90,\n          fill: 'green',\n          stroke: 'black',\n          strokeWidth: 4,\n          draggable: true\n});\nvar clone = ring.clone();\nassert.equal(clone.outerRadius(), ring.outerRadius());\n```\n. Yep. It is strange that you have `width`, `height` and `outerRadius` together. `width` (and `height`) should be = `outerRadius * 2`. Look https://github.com/ericdrowell/KineticJS/blob/master/src/shapes/Ring.js#L52. In your case while cloning `width` (or `height`) was applying after `outerRadius` attribute so it was change `outerRadius` value.\n. Yep. I made small mistake while publishing first version to npm. I can't publish 5.1.0 to npm. So 5.0.6 (on npm) is newer then 5.1.0 (last stable release). Will fixed with new release.\n. While link is not working, It will be very nice if you will make pull requests with any demo to there: https://github.com/lavrton/kineticjs-tips-and-tools#applications\n. Now should work. http://jsbin.com/mitis/3/edit\n\nA lot of API changes from 4.x version.\n. Can you create unit tests for this?\n. I think it will be better to test with node, not \"private\" method. \n\n> For example you could name a circle: 'red circle' and a square: 'red square', and now stage.find('.red') will return both elements, but stage.find('.square') will return just the square.\n\nThis is VERY good test case.\n. All tutorials are repaired in new homepage. http://lavrton.github.io/KineticJS/Getting_Started.html\n. `context` argument is not native canvas context. It is KineticJS wrapper. Use: `context.setAttr('fillStyle', 'red');`\n. 1. Try to use latest dev version from master.\n2. Make any jsfiddle.\n. prevent context menu:\n\n``` javascript\ndocument.getElementById(\"con\").addEventListener('contextmenu', function (event) {\n  event.preventDefault();\n});\n```\n\nthen listen `click` or `mousedown` events:\n\n``` javascript\ngroup.on('click', function(e) {\n  if (e.evt.button === 2) {\n    alert('Right click');\n  }\n});\n```\n\nhttp://jsbin.com/qedez/1/edit\n. New version is not released yet.\n. All tutorials are repaired in new homepage. http://lavrton.github.io/KineticJS/Getting_Started.html\n. Closed as not related to KineticJS.\n. Can you provide any fiddle?\n\nThis one is working with latest build: http://jsbin.com/bivuce/1/edit\n. Fixed.\n. It return `this` for chainable code:\n\n```\nlayer.add(rect).add(circle);\n```\n. Do you mean bad performance while dragging?\nTry latest version from master. How it works for you?\n. I don't think this is a bug. Moving canvas from kinetic container is unexpected behaviour.\n. Can you create jsfiddle?\n. Hello, guys! I was contributing to KineticJS awhile. I made many fixed, but I don't want to tag new version as I am not a maintainer. I was thinking about future developing, but for my project KineticJS is on very good state and improving it is not required. May be I will continue contributing soon, just for experience and practicing.\n. FabricJS and EaselJS are very close to KineticJS. If you are developing game - look at PhaserJS\n. As I know all of them have very good support. In my tests EaselJS has very good performance. But it is really depends on type of application, so you should test youself.\n. @confile you can use `toImage` approach if you have many issues with `cache`. About Phaser - I guess yes. Go to examples page.\n. Phaser JS is based on Pixi. It adds game specific stuff such as camera, physics, sounds, etc. Do you need it? Yes - Phaser JS. No - Pixi. Also one of the main feature of Pixi (Phaser) against Kinetic, Fabric, Easel is that Pixi have awesome build in WebGL support. So if all of your objects on canvas might be represented as picture - you must try it.\n. I will maintain KineticJS in a fork: https://github.com/lavrton/KineticJS\n. API changes:\n\n``` javascript\nvar wave =  new Kinetic.Star({\n  x: 100,\n  y: 200,\n  numPoints: 5,\n  innerRadius: 70,\n  outerRadius: 70,\n  stroke: 'black',\n  strokeWidth: 4,\n  fillLinearGradientStartPoint: {\n    x : 0, y : 0\n  },\n  fillLinearGradientEndPoint: {x : 20, y : 20},\n  fillLinearGradientColorStops: [0, \"#EA493B\", 1, \"#E32486\"]\n});\n```\n\nhttp://jsbin.com/toqexe/1/edit\n. Also you can get documentation from downloads: https://github.com/ericdrowell/KineticJS/releases\n. http://lavrton.github.io/KineticJS/api/Kinetic.html\n. Hello everyone. I decided to create a fork. As a contributor of current repo I think I can support KineticJS in a new fork. Repo and link will be ready in ~ one week.\n. @confile agree, PIXI (and Phaser) is really great. But it is different framework. In my opinion PIXI is best for games. But if you need a lot of \"vector\" graphics (such as text) you will have problems. This is my experience. I was thinking to move to Phaser in my main mind map application. In the app I need to draw a lot of nodes (with text) on canvas. It is possible to create custom graphics with PIXI. But for each graphics PIXI has separate canvas element in memory (You can not just draw text into webgl context, you have to convert text to image first, then you can display that image). So I had big memory leak. I was not able to find solution for this case.\n. Hello everyone. I made a fork. https://github.com/konvajs/konva\nThe homepage is http://konvajs.github.io/\n. Ops. I am really sad to see this... Waiting Eric's answer.\n. https://github.com/ericdrowell/KineticJS/releases/download/v5.1.0/documentation.zip\n. All forks may be merged in any repo (as in personal as in org).\n\nBut sure that is might be very good idea. Are there any other active forks?\nPS: hmm. all good name already taken.\n. As it is hart to evolve project under old name I decided to rename fork to `Konva` project. Fork is available in this organization: https://github.com/konvajs\n. What an issue? Second tap event is not expected?\n. Usual DOM works is same way: http://jsbin.com/tejohe/1/edit?html,js,output.\nSecond tap is still `tap` event, so event should be fired.\n\nYou can implement simple workaround:\n\n``` javascript\nvar wasDblClick = false;\nrect.on('click tap', function() {\n        setTimeout(function() {\n         if (wasDblClick) {\n             wasDblClick = false;\n             return;\n         }\n          console.log('click');\n}, 10);\n});\n\nrect.on('dblclick dbltap', function() {\n  wasDblClick = true;\n  console.log('dblclick');\n});\n```\n. `var dbltap = false;` should be outside of `wireKineticEventSafe` function.\n. Works nice for me: http://jsbin.com/bipoke/13/edit?js,output\n. Now sure how long it will be available here: http://lavrton.github.io/KineticJS/api/\nBut I suggest you to switch to KineticJS fork: http://konvajs.github.io/\n. @zuoRambo right. + template https://github.com/terryweiss/docstrap\n. ",
    "ollym": "Build fails and this doesn't even work - missing a comma after _wrapText function.\nAlso text is immediately wrapped to a tiny size.\n\nShame - I need fixed text alignment.\n. Build fails and this doesn't even work - missing a comma after _wrapText function.\nAlso text is immediately wrapped to a tiny size.\n\nShame - I need fixed text alignment.\n. ",
    "nrichards": "Thank you for writing this framework - and I'd like to +1 the unsetting of Node.parent on remove.  \n\nI'm building a Canvas where I want to render thousands of Images, just a few at a time, and my unparenting is not behaving as I'd desire it to.  (For performance reasons I must do something about all the non-visible images.  I started hiding the offscreen ones, but the app is on mobile, and the time for draw() to check even hidden elements is significant, ~20ms for a few hundred just to not paint them.  So I'm switching to removing the Image child from the parent Group, to hopefully avoid that 20ms penalty, and found this issue.)\n\nSo it's a need for me.  I'm developing a workaround now, but for the future I'd like to have the feature (#1) Mr Currie raised.\n\nThanks again!\n. Thank you for writing this framework - and I'd like to +1 the unsetting of Node.parent on remove.  \n\nI'm building a Canvas where I want to render thousands of Images, just a few at a time, and my unparenting is not behaving as I'd desire it to.  (For performance reasons I must do something about all the non-visible images.  I started hiding the offscreen ones, but the app is on mobile, and the time for draw() to check even hidden elements is significant, ~20ms for a few hundred just to not paint them.  So I'm switching to removing the Image child from the parent Group, to hopefully avoid that 20ms penalty, and found this issue.)\n\nSo it's a need for me.  I'm developing a workaround now, but for the future I'd like to have the feature (#1) Mr Currie raised.\n\nThanks again!\n. ",
    "eranimo": "This is still a problem. Calling layer.remove(childLayer) does not work.\n. Thanks! There seems to be a performance problem as well. Making several dozen layers then removing them does not return memory to the previous size, not by a long shot. (Testing in Chrome) Maybe remove isn't removing everything?\n. This looks pretty useful. There's some merge conflicts though, which I guess are preventing a merge.\n. Is there a backup of some kind?\n. http://www.zeali.net/mirrors/html5canvastutorials/kineticjs/html5-canvas-events-tutorials-introduction-with-kineticjs/index.html\n. http://www.zeali.net/mirrors/html5canvastutorials/kineticjs/html5-canvas-events-tutorials-introduction-with-kineticjs/index.html\n. This is still a problem. Calling layer.remove(childLayer) does not work.\n. Thanks! There seems to be a performance problem as well. Making several dozen layers then removing them does not return memory to the previous size, not by a long shot. (Testing in Chrome) Maybe remove isn't removing everything?\n. This looks pretty useful. There's some merge conflicts though, which I guess are preventing a merge.\n. Is there a backup of some kind?\n. http://www.zeali.net/mirrors/html5canvastutorials/kineticjs/html5-canvas-events-tutorials-introduction-with-kineticjs/index.html\n. http://www.zeali.net/mirrors/html5canvastutorials/kineticjs/html5-canvas-events-tutorials-introduction-with-kineticjs/index.html\n. ",
    "Delapouite": "The speed issue is solved in 3.10.1, with your draggable changes. Thanks Eric.\n. +1 I'm in favor of the AMD support. I had to go the shim way with Require.js 2.x until now.\n. The speed issue is solved in 3.10.1, with your draggable changes. Thanks Eric.\n. +1 I'm in favor of the AMD support. I had to go the shim way with Require.js 2.x until now.\n. ",
    "abrkn": "\"verticalAlign\" is mentioned only one place in the code in 4.3.0. is it supposed to do anything? i'm hoping to middle-align a text inside its rect.\n. \"verticalAlign\" is mentioned only one place in the code in 4.3.0. is it supposed to do anything? i'm hoping to middle-align a text inside its rect.\n. ",
    "matteodelabre": "I've commited the fork.\n\n-- I've deleted the Styler class, in consideration of your remarks. I think she's useless, thinking about clone method now.\n-- clone() method now copy all attributes of the referenced object. But I have a problem : if I clone the Node into two others, it seems the two copy makes one (when I set properties of the second, the first is also setted).\n\nI've added some manual tests to let you see the problem.\n. Okay. Found the bug at all.\n\nMy function was copying the reference of the objects in the node (like attrs object), and not copying them ourselves. So, I turned the algorithm into a recursive function, see my code for more informations.\n\nclone() function is now ready !\n. I've commited the fork.\n\n-- I've deleted the Styler class, in consideration of your remarks. I think she's useless, thinking about clone method now.\n-- clone() method now copy all attributes of the referenced object. But I have a problem : if I clone the Node into two others, it seems the two copy makes one (when I set properties of the second, the first is also setted).\n\nI've added some manual tests to let you see the problem.\n. Okay. Found the bug at all.\n\nMy function was copying the reference of the objects in the node (like attrs object), and not copying them ourselves. So, I turned the algorithm into a recursive function, see my code for more informations.\n\nclone() function is now ready !\n. ",
    "bryanbcheng": "Although clone performs a deep copy for the attributes because of the method setAttrs, this does not clone any of the children. Would it be a good idea to modify this method to recursively clone the children as well? Or is there another way to do that?\n. See https://github.com/ericdrowell/KineticJS/pull/86\n. Although clone performs a deep copy for the attributes because of the method setAttrs, this does not clone any of the children. Would it be a good idea to modify this method to recursively clone the children as well? Or is there another way to do that?\n. See https://github.com/ericdrowell/KineticJS/pull/86\n. ",
    "BlackScorp": "whoa seems you got many support contacts;) suddenly you take a look at issues :D\n. dont worry iam not even sure if this filter works with newest version, pulled it at 3.10 :P btw check this out http://www.html5rocks.com/en/tutorials/canvas/imagefilters/\n\nblur and stuffs\n. well you need to pass them;) you can config filter vars in shape like i did it on the brighness filter\n. dont foget to save original image to restore the filters\n. http://jsfiddle.net/T7gWx/3/  well apply filter does not work anymore, did i made something wrong?\n. True seems to be fixed now\n. https://github.com/ericdrowell/KineticJS/blob/master/src/Node.js#L118  add here return this;\n. also for quicker use you could do animation Map, which means you define your animations like this\n\nvar animation = {\n'walk':[0,2,5]\n}\nthis means, a walk animation is running on X from 0_spriteWidth until 5_spriteWidth and it uses 2*spriteHeight so i dont need to define every frame like on current sprite animation.\n\nas example https://raw.github.com/clintbellanger/flare/master/art_src/characters/wyvern/wyvern_air.png\n\nin your current sprite animation i need to define every frame in this image it would be too much, it would much easier if i say\n\nvar animation = {\n'idleWest':[0,0,7],\n'idleNorthWest':[0,1,7],\n'flyWest':[8,0,17]\n//and so on\n}\n\nsee it is more compact and easier to read\n. uhm i wanted to say, it would be cool to add this possibility, if you disable the require for animation array i could use a function which gegenrate me the animation array like\n\nvar sprite = new Kinetic.SpriteAnimation({some configs});\nsprite.setSpriteMap(animation); \niam still able to use the usual animation array in the configs also this way i could extend the current animation array with the spritemap so i could define some special frames + frames with same width/height\n. Eric you could write an exportert for http://www.codeandweb.com/texturepacker with this you can reduce the amount of HTTP Requests on mobile clients\n. this just show and hide and canvas but object will be still drawn on it, you need to setup visible attribute to true or false , else the stage will draw the layer even it is hidden\n. yeah there is some bug with FF but i dont know where, because of my map\n\nhttp://blackscorp.github.com/tiled2crafty/kinetic/\n\ndraw process takes 22ms on FF, on Chrome/IE/Opera/Safari 0-1 ms basicly i just copy offscreen layer into the screen wonder what is going on there\n. can someone check this on other browser please? http://jsperf.com/simple-draw  wish to look if its a kinetic or ff problem\n. @0xE1 you mean something like this? http://jsfiddle.net/MrXyQ/embedded/result/\n\nbtw http://jsfiddle.net/GwjcJ/1/  why dont just change images instead of change src?\n. @0xE1 my loader class call a callback function when ALL images are loaded. and also it allowes you to call a function on each image so you can add a progessbar or do other stuffs. the loader just use {id:\"id\",url:\"url\"} as parameter because of later, i wish to add audio files to the loader so i have to use multiple urls(mp3,AAC,ogg files). after using my loader you also have a global variable Kinetic.Assets.id or Kinetic.Assets['id'].\n. @v1r http://jsfiddle.net/RNLxb/4/  you have to draw your layers, setup an Composite  method and draw the layer again\n. thank you for KineticJS @ericdrowell  :P\n. i just tryed it on the jsfiddle you can call stage.draw() anywhere i gues there must be some problems with your code\n. why not just setup the compositeoperation in beforedraw function of layers or groups? stage.draw basicly just loop through layers and call draw functions, each layer loop throught children(Nodes/Groups) and call their draw functions, so layer.beforeDraw(function(){this.getContext().globalCompositeOperation = \"xor\"}); could maybe fix it\n. tween is already implemented see snorkl tweens example http://snorkl.tv/dev/kineticJS/\n. if you create custom animation frame rate, so please allow to modify maximum FrameRate  take a look at interpolation gameloop\n\nhttp://dewitters.koonsolo.com/gameloop.html\n\nalso, need a \"Snap to Grid\" function which means disable to draw shapes on floated positions to improve performance\n. eric just setup a fixed framerate or take a look at paul irish rAF(google)\n. i mean the user can setup the fix framerate, usual canvas drawing is bad on mobiles anyways, more prefer crosscompiler or doing native apps instead of html5 apps\n. what about to get a delta time from the animation object so i can calculate it into my positions, like on threejs but you need definitly a possibility to disable floating point positions on shapes on drawing\n. its not that easy on Ubuntu, my current version is ruby 1.8.7 (2012-02-08 patchlevel 358) [x86_64-linux]\n. why dont you just create a kinetic group and add the image + border (kinetic.rect) there and show/hide the rect\n. jep, just close it;)\n. there are not nested layers but Kinetic has groups where you can add shapes. http://www.html5canvastutorials.com/kineticjs/html5-canvas-move-shape-to-another-container-with-kineticjs/\n. just wonder why do you need canvas text? simple span placed somewhere would be easier?\n. just wanted t say, KineticJS has some more critical issues, so until the fix, youre able to use pure HTML;)  its just, many KineticJS Users forget about to use HTML and CSS:D \n. its not a bug, use image.src AFTER onload function http://jsfiddle.net/PSV9R/1/\n. @f0rmiga you could hide the invisible nodes instead of removing them\n. well @f0rmiga curreltny iam trying to render a map with kinetcJS as well, ive created a custom offscreen canvas render all images on it then copy a part of the offscreen into the screen canvas. currently it is bugged, but maybe you will take a look at it, because of performance\n\nhttp://blackscorp.github.com/tiled2crafty/kinetic/\n\nand here a repo with cleaner code but less functionality\n\nhttp://blackscorp.github.com/iso_map/\n. @f0rmiga restored method is funny cause it makes the same like rect.clone()\n. or version branches would be cool as well so i could just git clone -b 3.0.0/master for example\n. Well i have one, but it is not working correctly ;) http://blackscorp.github.com/tiled2crafty/kinetic/\n\nalso i had a preloader on jsfiddle :D \n. whoa seems you got many support contacts;) suddenly you take a look at issues :D\n. dont worry iam not even sure if this filter works with newest version, pulled it at 3.10 :P btw check this out http://www.html5rocks.com/en/tutorials/canvas/imagefilters/\n\nblur and stuffs\n. well you need to pass them;) you can config filter vars in shape like i did it on the brighness filter\n. dont foget to save original image to restore the filters\n. http://jsfiddle.net/T7gWx/3/  well apply filter does not work anymore, did i made something wrong?\n. True seems to be fixed now\n. https://github.com/ericdrowell/KineticJS/blob/master/src/Node.js#L118  add here return this;\n. also for quicker use you could do animation Map, which means you define your animations like this\n\nvar animation = {\n'walk':[0,2,5]\n}\nthis means, a walk animation is running on X from 0_spriteWidth until 5_spriteWidth and it uses 2*spriteHeight so i dont need to define every frame like on current sprite animation.\n\nas example https://raw.github.com/clintbellanger/flare/master/art_src/characters/wyvern/wyvern_air.png\n\nin your current sprite animation i need to define every frame in this image it would be too much, it would much easier if i say\n\nvar animation = {\n'idleWest':[0,0,7],\n'idleNorthWest':[0,1,7],\n'flyWest':[8,0,17]\n//and so on\n}\n\nsee it is more compact and easier to read\n. uhm i wanted to say, it would be cool to add this possibility, if you disable the require for animation array i could use a function which gegenrate me the animation array like\n\nvar sprite = new Kinetic.SpriteAnimation({some configs});\nsprite.setSpriteMap(animation); \niam still able to use the usual animation array in the configs also this way i could extend the current animation array with the spritemap so i could define some special frames + frames with same width/height\n. Eric you could write an exportert for http://www.codeandweb.com/texturepacker with this you can reduce the amount of HTTP Requests on mobile clients\n. this just show and hide and canvas but object will be still drawn on it, you need to setup visible attribute to true or false , else the stage will draw the layer even it is hidden\n. yeah there is some bug with FF but i dont know where, because of my map\n\nhttp://blackscorp.github.com/tiled2crafty/kinetic/\n\ndraw process takes 22ms on FF, on Chrome/IE/Opera/Safari 0-1 ms basicly i just copy offscreen layer into the screen wonder what is going on there\n. can someone check this on other browser please? http://jsperf.com/simple-draw  wish to look if its a kinetic or ff problem\n. @0xE1 you mean something like this? http://jsfiddle.net/MrXyQ/embedded/result/\n\nbtw http://jsfiddle.net/GwjcJ/1/  why dont just change images instead of change src?\n. @0xE1 my loader class call a callback function when ALL images are loaded. and also it allowes you to call a function on each image so you can add a progessbar or do other stuffs. the loader just use {id:\"id\",url:\"url\"} as parameter because of later, i wish to add audio files to the loader so i have to use multiple urls(mp3,AAC,ogg files). after using my loader you also have a global variable Kinetic.Assets.id or Kinetic.Assets['id'].\n. @v1r http://jsfiddle.net/RNLxb/4/  you have to draw your layers, setup an Composite  method and draw the layer again\n. thank you for KineticJS @ericdrowell  :P\n. i just tryed it on the jsfiddle you can call stage.draw() anywhere i gues there must be some problems with your code\n. why not just setup the compositeoperation in beforedraw function of layers or groups? stage.draw basicly just loop through layers and call draw functions, each layer loop throught children(Nodes/Groups) and call their draw functions, so layer.beforeDraw(function(){this.getContext().globalCompositeOperation = \"xor\"}); could maybe fix it\n. tween is already implemented see snorkl tweens example http://snorkl.tv/dev/kineticJS/\n. if you create custom animation frame rate, so please allow to modify maximum FrameRate  take a look at interpolation gameloop\n\nhttp://dewitters.koonsolo.com/gameloop.html\n\nalso, need a \"Snap to Grid\" function which means disable to draw shapes on floated positions to improve performance\n. eric just setup a fixed framerate or take a look at paul irish rAF(google)\n. i mean the user can setup the fix framerate, usual canvas drawing is bad on mobiles anyways, more prefer crosscompiler or doing native apps instead of html5 apps\n. what about to get a delta time from the animation object so i can calculate it into my positions, like on threejs but you need definitly a possibility to disable floating point positions on shapes on drawing\n. its not that easy on Ubuntu, my current version is ruby 1.8.7 (2012-02-08 patchlevel 358) [x86_64-linux]\n. why dont you just create a kinetic group and add the image + border (kinetic.rect) there and show/hide the rect\n. jep, just close it;)\n. there are not nested layers but Kinetic has groups where you can add shapes. http://www.html5canvastutorials.com/kineticjs/html5-canvas-move-shape-to-another-container-with-kineticjs/\n. just wonder why do you need canvas text? simple span placed somewhere would be easier?\n. just wanted t say, KineticJS has some more critical issues, so until the fix, youre able to use pure HTML;)  its just, many KineticJS Users forget about to use HTML and CSS:D \n. its not a bug, use image.src AFTER onload function http://jsfiddle.net/PSV9R/1/\n. @f0rmiga you could hide the invisible nodes instead of removing them\n. well @f0rmiga curreltny iam trying to render a map with kinetcJS as well, ive created a custom offscreen canvas render all images on it then copy a part of the offscreen into the screen canvas. currently it is bugged, but maybe you will take a look at it, because of performance\n\nhttp://blackscorp.github.com/tiled2crafty/kinetic/\n\nand here a repo with cleaner code but less functionality\n\nhttp://blackscorp.github.com/iso_map/\n. @f0rmiga restored method is funny cause it makes the same like rect.clone()\n. or version branches would be cool as well so i could just git clone -b 3.0.0/master for example\n. Well i have one, but it is not working correctly ;) http://blackscorp.github.com/tiled2crafty/kinetic/\n\nalso i had a preloader on jsfiddle :D \n. ",
    "davideickhoff": "Here is fiddle: http://jsfiddle.net/dme2103/7Bxtc/1/  - it works fine in chrome and safari, but not in firefox. Hope this helps!\n. and a screenshot of that fiddle: http://davideickhoff.de/ellipse.png\n. Thank's a lot! \n. Here is fiddle: http://jsfiddle.net/dme2103/7Bxtc/1/  - it works fine in chrome and safari, but not in firefox. Hope this helps!\n. and a screenshot of that fiddle: http://davideickhoff.de/ellipse.png\n. Thank's a lot! \n. ",
    "imakewebthings": "@michaelgilley's last comment is spot on, and his patch looks good. (Although I'd say libraries rarely **gain** attention by adding AMD support, it's delightful when they do and we don't need to shim.) Hope this pull goes through sooner or later. Thanks for the great library.\n. @michaelgilley's last comment is spot on, and his patch looks good. (Although I'd say libraries rarely **gain** attention by adding AMD support, it's delightful when they do and we don't need to shim.) Hope this pull goes through sooner or later. Thanks for the great library.\n. ",
    "michaelgilley": "@imakewebthings I agree that was a bit of an overstatement on my part. :) Still, it'd be a huge plus to the library.\n. Hey Eric, thank you for supporting this. There are a few issues though. These are non-critical but still yet they should be addressed. If you'd like me to add these as new issues just let me know.\n\nFirst, the Kinetic should be hidden from the global namespace. It looks like in Global.js line 31 Kinetic is left outside of the wrapper. Part of the power of AMD (requirejs) is to contain libraries/modules within the AMD wrapper and be used through direct require instead of reference to the root namespace. This is why the UMD spec you included defaults to assigning Kinetic to the root (window) namespace IF define and exports are undefined. If define is a function then Kinetic should not be accessible via the window object, only through requiring the module.\n\nIf you'd like to keep Kinetic in the global namespace independent of whether define exists or not that's fine. Plenty of libraries/frameworks do this (e.g., jQuery, Underscore, etc.) You can see an UMD example of this at https://github.com/umdjs/umd/blob/master/returnExportsGlobal.js. However, it would be best practice to also provide a noConflict method to the library for developers who would prefer to remove its footprint from the global namespace and thus save from any potential library naming conflicts.\n\nSecond, now when loading Kinetic without AMD it stores a reverence to the library under `window.returnExports` (Global.js line 110). This needs to be changed to `root.Kinetic`. The UMD spec did not intend for `returnExports` to actually be used. Again, this is why `var Kinetic` should be contained within the factory function scope referenced in Global.js line 112. It's intended to be made global on this line if exports and define prove undefined.\n\nThird, as is Kinetic is stored under root and so makes irrelevant the wrapper functions on each Kinetic module. I assume you added these for the custom build feature you offer on your site? If they are treated as individual modules this is where you can truly leverage the power of AMD by using a define function with each of those modules and requiring their dependencies respectively.\n\nThanks for all the work!\n. No problem Eric. Just opened the new ticket.\n\nYou shouldn't include requireJS with Kinetic. It's only one of several AMD library solutions that users might use. AMD is quite agnostic in this sense. RequireJS is also bloated for production use since it includes a lot of development time loading capabilities that are unnecessary once everything is optimized. To run an AMD built app you'd only need the smallest AMD shim that met the spec. See https://github.com/jrburke/almond for this.\n\nIt probably would be in your best interest to go ahead and write Kinetic to the root object to retain backwards compatibility for folks who have relied on it being under root up till now. But I'd also provide a quick noConflict method to remove it from root for those who would prefer that. An example of this method might be:\n\n``` js\n// _Kinetic is the previously stored value of root.Kinetic (usually undefined)\nnoConflict: function() {\n    root.Kinetic = _Kinetic;\n    return Kinetic;\n}\n```\n. @imakewebthings I agree that was a bit of an overstatement on my part. :) Still, it'd be a huge plus to the library.\n. Hey Eric, thank you for supporting this. There are a few issues though. These are non-critical but still yet they should be addressed. If you'd like me to add these as new issues just let me know.\n\nFirst, the Kinetic should be hidden from the global namespace. It looks like in Global.js line 31 Kinetic is left outside of the wrapper. Part of the power of AMD (requirejs) is to contain libraries/modules within the AMD wrapper and be used through direct require instead of reference to the root namespace. This is why the UMD spec you included defaults to assigning Kinetic to the root (window) namespace IF define and exports are undefined. If define is a function then Kinetic should not be accessible via the window object, only through requiring the module.\n\nIf you'd like to keep Kinetic in the global namespace independent of whether define exists or not that's fine. Plenty of libraries/frameworks do this (e.g., jQuery, Underscore, etc.) You can see an UMD example of this at https://github.com/umdjs/umd/blob/master/returnExportsGlobal.js. However, it would be best practice to also provide a noConflict method to the library for developers who would prefer to remove its footprint from the global namespace and thus save from any potential library naming conflicts.\n\nSecond, now when loading Kinetic without AMD it stores a reverence to the library under `window.returnExports` (Global.js line 110). This needs to be changed to `root.Kinetic`. The UMD spec did not intend for `returnExports` to actually be used. Again, this is why `var Kinetic` should be contained within the factory function scope referenced in Global.js line 112. It's intended to be made global on this line if exports and define prove undefined.\n\nThird, as is Kinetic is stored under root and so makes irrelevant the wrapper functions on each Kinetic module. I assume you added these for the custom build feature you offer on your site? If they are treated as individual modules this is where you can truly leverage the power of AMD by using a define function with each of those modules and requiring their dependencies respectively.\n\nThanks for all the work!\n. No problem Eric. Just opened the new ticket.\n\nYou shouldn't include requireJS with Kinetic. It's only one of several AMD library solutions that users might use. AMD is quite agnostic in this sense. RequireJS is also bloated for production use since it includes a lot of development time loading capabilities that are unnecessary once everything is optimized. To run an AMD built app you'd only need the smallest AMD shim that met the spec. See https://github.com/jrburke/almond for this.\n\nIt probably would be in your best interest to go ahead and write Kinetic to the root object to retain backwards compatibility for folks who have relied on it being under root up till now. But I'd also provide a quick noConflict method to remove it from root for those who would prefer that. An example of this method might be:\n\n``` js\n// _Kinetic is the previously stored value of root.Kinetic (usually undefined)\nnoConflict: function() {\n    root.Kinetic = _Kinetic;\n    return Kinetic;\n}\n```\n. ",
    "landongn": "+1 for AMD support.  Shimming this thing is a pain.\n. +1 for AMD support.  Shimming this thing is a pain.\n. ",
    "earlPeriscopic": "+1 for AMD Support.\n. +1 for AMD Support.\n. ",
    "ronbuchanan": "+1 for AMD Support.\n. +1 for AMD Support.\n. ",
    "samreid": "+1 for AMD support for me too.\n. +1 for AMD support for me too.\n. ",
    "lemonzi": "What would be the best workflow when working with Kinetic and new shapes are needed, then? Make an AMD module that depends on Kinetic and directly exports the plugin?\nIt kind of breaks the possibility of seamlessly mixing core and custom plugins.\n. Absolutely! It speeds development operations up a lot. It'd be good to remind developers that the Kinetic page offers a custom build, though. It's much more efficient in production.\nThe problem here is that the repository does not store a compiled version of the library... So it should be added either in a separate branch, or in a separate repository, and then it should be built on every commit,\n. What would be the best workflow when working with Kinetic and new shapes are needed, then? Make an AMD module that depends on Kinetic and directly exports the plugin?\nIt kind of breaks the possibility of seamlessly mixing core and custom plugins.\n. Absolutely! It speeds development operations up a lot. It'd be good to remind developers that the Kinetic page offers a custom build, though. It's much more efficient in production.\nThe problem here is that the repository does not store a compiled version of the library... So it should be added either in a separate branch, or in a separate repository, and then it should be built on every commit,\n. ",
    "weepy": "Yes I did try in a new window. This is in recent Chrome.\n\nOn Tue, Jul 10, 2012 at 8:14 PM, ericdrowell\nreply@reply.github.com\nwrote:\n\n> Have you tried the demo in it's own window? (click open in new window).  Sometimes the Flash ads can temporarily slow down page.\n> \n> What browser are you using?\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/ericdrowell/KineticJS/issues/49#issuecomment-6885696\n. yes - it's definitely better in safari. real shame about chrome's perf since it's the most used browser ! \n. \" layer throttling logic \" --- is this requestAnimationFrame type stuff ?\n. so what's the issue with chrome ? I noticed some drag and drop\nperforms better than others\n. So - seems the problem is when they moved canvas rendering to the GPU\n- seems performance is worse on my older mac (even though it's fast) -\n  it probably has a slow GPU\n\nWhen the frame rate is only 50 fps, why would you want to draw\nsomething 200 times per second ? The typical way is to use\nrequestAnimationFrame and then only draw then. Perhaps this is similar\nto what you are doing essentially.\n\nStill it surprises me that the stars demo is slow - it doesn't seem to\nbe very complicated. What in particular is slow ?\n\nJ\n\nOn Thu, Jul 12, 2012 at 7:06 AM, ericdrowell\nreply@reply.github.com\nwrote:\n\n> One of their releases killed canvas performance, so if you try to draw something simple say 200 times per second, it starts to lag behind (this can occur with drag and drop because shapes are redrawn each time the mousemove event is fired).  To remedy the problem, I added layer throttling which reduces layer draws if they start exceeding a certain threshold.  This is why sometimes you may start to see lagging every now and then when using Chrome, in which case the throttling kicks in and the layer draws are dynamically reduced.\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/ericdrowell/KineticJS/issues/49#issuecomment-6927731\n. Yes I did try in a new window. This is in recent Chrome.\n\nOn Tue, Jul 10, 2012 at 8:14 PM, ericdrowell\nreply@reply.github.com\nwrote:\n\n> Have you tried the demo in it's own window? (click open in new window).  Sometimes the Flash ads can temporarily slow down page.\n> \n> What browser are you using?\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/ericdrowell/KineticJS/issues/49#issuecomment-6885696\n. yes - it's definitely better in safari. real shame about chrome's perf since it's the most used browser ! \n. \" layer throttling logic \" --- is this requestAnimationFrame type stuff ?\n. so what's the issue with chrome ? I noticed some drag and drop\nperforms better than others\n. So - seems the problem is when they moved canvas rendering to the GPU\n- seems performance is worse on my older mac (even though it's fast) -\n  it probably has a slow GPU\n\nWhen the frame rate is only 50 fps, why would you want to draw\nsomething 200 times per second ? The typical way is to use\nrequestAnimationFrame and then only draw then. Perhaps this is similar\nto what you are doing essentially.\n\nStill it surprises me that the stars demo is slow - it doesn't seem to\nbe very complicated. What in particular is slow ?\n\nJ\n\nOn Thu, Jul 12, 2012 at 7:06 AM, ericdrowell\nreply@reply.github.com\nwrote:\n\n> One of their releases killed canvas performance, so if you try to draw something simple say 200 times per second, it starts to lag behind (this can occur with drag and drop because shapes are redrawn each time the mousemove event is fired).  To remedy the problem, I added layer throttling which reduces layer draws if they start exceeding a certain threshold.  This is why sometimes you may start to see lagging every now and then when using Chrome, in which case the throttling kicks in and the layer draws are dynamically reduced.\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/ericdrowell/KineticJS/issues/49#issuecomment-6927731\n. ",
    "alippai": "Oh, this would be cool.\n. Oh, this would be cool.\n. ",
    "davonium": "This is a problem that's hard to try in a jsfiddle, pixel modifications on canvas does not work when using cross-origin image data...\n. http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-image-tutorial/ this example works when changing to the newest library, so I don't think this is an issue.\n. Updated exampel with circle limits:\nconstraint on circle edge: http://jsfiddle.net/jjR55/2/\nbound within circle: http://jsfiddle.net/jjR55/3/\n. I've used kinetik to draw link in an app that should work also on an iPad. These links should be clickable (or tappable), but a link with just the width och 2 px is very har to hit on the ipad (specially if its zoomed out). If you look at how links are handled in safari-mobile the \"tap-zone\" is much bigger than the anchor itself, I was trying to make something similar.\n\nBefore I changed the line's width when before I called the saveImageData() and later restored it before the layer was drawn. (Did this in a beforeDraw-function). But since the new implementation of the buffer this is no longer possible.\n\nBut if the drawfunction was to know when it was called for drawing the buffer you can customize it to add som pixels for the line on the buffer.\nhttp://jsfiddle.net/qsGSA/\n\nAlso someone in the forum just pointed out that if you make a custom shape that has more than one color, you also risk to break the buffer. This can be used to solve that as well. se Forum post:\nhttp://www.kineticjs.com/forum/viewtopic.php?f=8&t=1131\n. What is you opinion about this?\nI see no other good option for making it possible / easier for touchscreen users to tap small shapes.\n. My plan was to give another option for the developers, and often the developers don't care about which order the images are created.\n\nBut you probably right, if there is a simple way to do things no one would bother to do it the \"right way\" maybe it would be better to create some tools for helping developers.\n\nMaybe something like this:\n\nKinetic.Load(function (images) {\n    var stage = new Kinetic.Stage(config);\n    [...]\n    var image = new Kinetic.Image({image: images.cat, [...]});\n    [...]\n},\n{\n    cat: \"http://example.com/cat.png\",\n    dog: \"http://example.com/dog.png\"\n});\n. What if isAncestorOf could be recursive?\nisAncestorOf: function(node) {\n    if (this._id == node._id) return true;\n    if (node.getParent()) return this.isAncestorOf(node.getParent());\n    return false;\n}\n\nIt would change the behavior a bit like:\ngroup1.isAncestorOf(group1); would always return true. What is the expected value in this situation?\nThe original value could be obtained by:\n\nisAncestorOf: function(node) {\n    if (!node.getParent()) return false;\n    if (node.getParent()._id == this._id) return true;\n    return this.isAncestorOf(node.getParent());\n}\n\nThe special case for stage (if it should exist) is handled from the stage type.\n. I think it works great! But I couldn't gather the energy to write any automated tests...\nhttp://jsfiddle.net/mLRzM/\n. OK, not really sure what you're after...\nDid two more examples but didn't check them in (extended manually from a jsfiddle instead)\nhttp://jsfiddle.net/GAbvk/ - This one calls whatever attribute dynamically\nhttp://jsfiddle.net/w2h2P/ - This one extends the array with all the functions of its children (when it's extended)\n\nI dont like the way you call the first one, but i don't like to loop everything, or that you can't add anything avter extendArray is called as in the second one.\n\nMaybe its possible to do a combination. The basic stuff is added like i suggested earlier, and the more advanced stuff is added by a handle-method. I can't think of any more ways of doing it ;)\n. Eric: don't you get notifications of comments to checkins and line notes? I have at least made some code review of your checkins that way. For instance on:\nhttps://github.com/ericdrowell/KineticJS/commit/d0a1b2870e9975aa226dc78b6938450c0d067bf2\nwhere I questioned wether you change would have any effect on the event triggering.\n. The problem of the suggested code is that the _initImage must be renamed to _initScaledImage (or similar). In the example you will have a recursive loop since the image constructor will call back on this._initImage.\n. Should have used a new branch to leave out the old history.. Sorry for that.\n. Glad you liked it ;)\nI don't use twitter (mainly because I was to dissapointed to find my usual nick already taken...)\n. This is mentioned in http://www.kineticjs.com/forum/viewtopic.php?t=1205\n. hmm, something looks really strange with this pull request.. must have mistakenly merged an old branch or something? Ill take a look at it...\n. Here's a clean version of the pull request:\nhttps://github.com/ericdrowell/KineticJS/pull/115\n. Sounds like you should set the beforedraw of the shapes to use composition. And then restore in afterdraw.\n. I think I have a solution, but it includes som coding. Let me try it then I'll be back with the result ;)\n. Ok, sorry if keeping you waiting.\n\nHere's my suggestion:\nhttp://jsfiddle.net/davonium/RNLxb/7/\n\nYou can send any shape to the makeShapeComposite-function and it will be \"updated\" to use the compositeOperation you specify.\n. Just realised that this might mess up the buffer layer as well.. \n. http://jsfiddle.net/cZLnM/3/\nSince the setAttrs is refactored you need to write the points as xy-objects. Not sure if this is by design or not..\n. I have noticed this before. The reason is that the remove command removes the nodes colorkey from the stage, and that's why it can trigger events. You can manually insert the color key in the stage's list. I've done this but don't remember the code right now, but it shouldn't be to har to figure out.\nI saw one workaround: instead of adding the node after it's removed, add a clone of the node. The clone will have a new colorkey.\n\nFinally I would suggest to Eric to solve this by re-adding the remove to containers, but don't let it remove the colorkey and instead have a .destroy() on the node (that removes the node, the colorkey and maybe unsets other values). This way the add/remove analogue would remain intact.\n. Yes, the move to would do what you need. But i've seen some cases where a developer wants to have an undo-method for deleting object, and then there are no way to first remove it from an object, and then put it back without using remove(), so i still think it's a bit of a problem.\n\nAnd since the colorkey of the object is created when the object is created (and not added to the stage) it shouldn't really be deleted when you do a remove. This is still not expected, i would say. But probably not very high priority either...\n. Glad to be able to give something back ;)\nBtw, from the changelog: \"get() now also supports node type selectors\", think you mean shape type selectors...\n. The remove-function is changed since 4.0.2. Instead of layer.remove(node) just write node.remove().\n. I see two reasons for this problem.\n\n1# The canvas is offset by 1px because of the border (almost all exampled on html5canvastutorials have this problem)\n2# The font is anti-aliasing causing the buffer layer to be a different colour at the edges - This is very hard to fix, I've ben looking in to it before, but found no solution. While the is no shape behind the color is correct but the opacity is not 1.0, but when there is something behind the color will be a mix of the to shapes colorkey...\n\n---\n\nThere is also another problem for me with this (obviously not showing in Chrome): all texts (maybe even all shapes?) will have a solid fill in the buffer layer even when not set in the config. This is probably caused when white-/blacklisting members of the attars before the shape is drawn on the buffer. This is probably not very hard to solve, but I haven't had time to look into it. Maybe Eric can take a look?\n. @v1r: the reason you're not seeing this in win might be what i described at the end. I have one temporary workaround to make the first problems more visible:\nInclude the setting \"image: true\" in the config of the simpleText, then after the node is created add (to a new line):\nsimpleText.imageBuffer = true\n\nlike in this version:\nhttp://jsfiddle.net/davonium/tDTfr/1/\n. stopPropagation() is a jQuery method (that only works on jQuery events). Kinetic is not using jQuery, so it will have np effect. The preventDefault() is working as expected though.\n\nIf you need to be able to stop propagation you could do something like this:\nhttp://jsfiddle.net/davonium/k3sN8/8/\n. This is a problem that's hard to try in a jsfiddle, pixel modifications on canvas does not work when using cross-origin image data...\n. http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-image-tutorial/ this example works when changing to the newest library, so I don't think this is an issue.\n. Updated exampel with circle limits:\nconstraint on circle edge: http://jsfiddle.net/jjR55/2/\nbound within circle: http://jsfiddle.net/jjR55/3/\n. I've used kinetik to draw link in an app that should work also on an iPad. These links should be clickable (or tappable), but a link with just the width och 2 px is very har to hit on the ipad (specially if its zoomed out). If you look at how links are handled in safari-mobile the \"tap-zone\" is much bigger than the anchor itself, I was trying to make something similar.\n\nBefore I changed the line's width when before I called the saveImageData() and later restored it before the layer was drawn. (Did this in a beforeDraw-function). But since the new implementation of the buffer this is no longer possible.\n\nBut if the drawfunction was to know when it was called for drawing the buffer you can customize it to add som pixels for the line on the buffer.\nhttp://jsfiddle.net/qsGSA/\n\nAlso someone in the forum just pointed out that if you make a custom shape that has more than one color, you also risk to break the buffer. This can be used to solve that as well. se Forum post:\nhttp://www.kineticjs.com/forum/viewtopic.php?f=8&t=1131\n. What is you opinion about this?\nI see no other good option for making it possible / easier for touchscreen users to tap small shapes.\n. My plan was to give another option for the developers, and often the developers don't care about which order the images are created.\n\nBut you probably right, if there is a simple way to do things no one would bother to do it the \"right way\" maybe it would be better to create some tools for helping developers.\n\nMaybe something like this:\n\nKinetic.Load(function (images) {\n    var stage = new Kinetic.Stage(config);\n    [...]\n    var image = new Kinetic.Image({image: images.cat, [...]});\n    [...]\n},\n{\n    cat: \"http://example.com/cat.png\",\n    dog: \"http://example.com/dog.png\"\n});\n. What if isAncestorOf could be recursive?\nisAncestorOf: function(node) {\n    if (this._id == node._id) return true;\n    if (node.getParent()) return this.isAncestorOf(node.getParent());\n    return false;\n}\n\nIt would change the behavior a bit like:\ngroup1.isAncestorOf(group1); would always return true. What is the expected value in this situation?\nThe original value could be obtained by:\n\nisAncestorOf: function(node) {\n    if (!node.getParent()) return false;\n    if (node.getParent()._id == this._id) return true;\n    return this.isAncestorOf(node.getParent());\n}\n\nThe special case for stage (if it should exist) is handled from the stage type.\n. I think it works great! But I couldn't gather the energy to write any automated tests...\nhttp://jsfiddle.net/mLRzM/\n. OK, not really sure what you're after...\nDid two more examples but didn't check them in (extended manually from a jsfiddle instead)\nhttp://jsfiddle.net/GAbvk/ - This one calls whatever attribute dynamically\nhttp://jsfiddle.net/w2h2P/ - This one extends the array with all the functions of its children (when it's extended)\n\nI dont like the way you call the first one, but i don't like to loop everything, or that you can't add anything avter extendArray is called as in the second one.\n\nMaybe its possible to do a combination. The basic stuff is added like i suggested earlier, and the more advanced stuff is added by a handle-method. I can't think of any more ways of doing it ;)\n. Eric: don't you get notifications of comments to checkins and line notes? I have at least made some code review of your checkins that way. For instance on:\nhttps://github.com/ericdrowell/KineticJS/commit/d0a1b2870e9975aa226dc78b6938450c0d067bf2\nwhere I questioned wether you change would have any effect on the event triggering.\n. The problem of the suggested code is that the _initImage must be renamed to _initScaledImage (or similar). In the example you will have a recursive loop since the image constructor will call back on this._initImage.\n. Should have used a new branch to leave out the old history.. Sorry for that.\n. Glad you liked it ;)\nI don't use twitter (mainly because I was to dissapointed to find my usual nick already taken...)\n. This is mentioned in http://www.kineticjs.com/forum/viewtopic.php?t=1205\n. hmm, something looks really strange with this pull request.. must have mistakenly merged an old branch or something? Ill take a look at it...\n. Here's a clean version of the pull request:\nhttps://github.com/ericdrowell/KineticJS/pull/115\n. Sounds like you should set the beforedraw of the shapes to use composition. And then restore in afterdraw.\n. I think I have a solution, but it includes som coding. Let me try it then I'll be back with the result ;)\n. Ok, sorry if keeping you waiting.\n\nHere's my suggestion:\nhttp://jsfiddle.net/davonium/RNLxb/7/\n\nYou can send any shape to the makeShapeComposite-function and it will be \"updated\" to use the compositeOperation you specify.\n. Just realised that this might mess up the buffer layer as well.. \n. http://jsfiddle.net/cZLnM/3/\nSince the setAttrs is refactored you need to write the points as xy-objects. Not sure if this is by design or not..\n. I have noticed this before. The reason is that the remove command removes the nodes colorkey from the stage, and that's why it can trigger events. You can manually insert the color key in the stage's list. I've done this but don't remember the code right now, but it shouldn't be to har to figure out.\nI saw one workaround: instead of adding the node after it's removed, add a clone of the node. The clone will have a new colorkey.\n\nFinally I would suggest to Eric to solve this by re-adding the remove to containers, but don't let it remove the colorkey and instead have a .destroy() on the node (that removes the node, the colorkey and maybe unsets other values). This way the add/remove analogue would remain intact.\n. Yes, the move to would do what you need. But i've seen some cases where a developer wants to have an undo-method for deleting object, and then there are no way to first remove it from an object, and then put it back without using remove(), so i still think it's a bit of a problem.\n\nAnd since the colorkey of the object is created when the object is created (and not added to the stage) it shouldn't really be deleted when you do a remove. This is still not expected, i would say. But probably not very high priority either...\n. Glad to be able to give something back ;)\nBtw, from the changelog: \"get() now also supports node type selectors\", think you mean shape type selectors...\n. The remove-function is changed since 4.0.2. Instead of layer.remove(node) just write node.remove().\n. I see two reasons for this problem.\n\n1# The canvas is offset by 1px because of the border (almost all exampled on html5canvastutorials have this problem)\n2# The font is anti-aliasing causing the buffer layer to be a different colour at the edges - This is very hard to fix, I've ben looking in to it before, but found no solution. While the is no shape behind the color is correct but the opacity is not 1.0, but when there is something behind the color will be a mix of the to shapes colorkey...\n\n---\n\nThere is also another problem for me with this (obviously not showing in Chrome): all texts (maybe even all shapes?) will have a solid fill in the buffer layer even when not set in the config. This is probably caused when white-/blacklisting members of the attars before the shape is drawn on the buffer. This is probably not very hard to solve, but I haven't had time to look into it. Maybe Eric can take a look?\n. @v1r: the reason you're not seeing this in win might be what i described at the end. I have one temporary workaround to make the first problems more visible:\nInclude the setting \"image: true\" in the config of the simpleText, then after the node is created add (to a new line):\nsimpleText.imageBuffer = true\n\nlike in this version:\nhttp://jsfiddle.net/davonium/tDTfr/1/\n. stopPropagation() is a jQuery method (that only works on jQuery events). Kinetic is not using jQuery, so it will have np effect. The preventDefault() is working as expected though.\n\nIf you need to be able to stop propagation you could do something like this:\nhttp://jsfiddle.net/davonium/k3sN8/8/\n. ",
    "thewriteleague": "Has any further work on this item been completed? Haven't seen any updates here or in the docs and would love to be using the array version that you mentioned Eric.\n. I figured. If i was able to help out i would. Thanks for the message.Eric Rowell notifications@github.com wrote:not yet, this is bit of a lower priority than other items.\n\n\u2014\nReply to this email directly or view it on GitHub.\n. Has any further work on this item been completed? Haven't seen any updates here or in the docs and would love to be using the array version that you mentioned Eric.\n. I figured. If i was able to help out i would. Thanks for the message.Eric Rowell notifications@github.com wrote:not yet, this is bit of a lower priority than other items.\n\n\u2014\nReply to this email directly or view it on GitHub.\n. ",
    "asciimoo": "nice!\n. nice!\n. ",
    "coolhome": "Very nice! Works just as expected.\n. Very nice! Works just as expected.\n. ",
    "chrisritter": "Eric, can we pull this into master?\n. +1\n. Thanks Eric!\n. +1 for this feature\n. I'd suggest throttling your call to getIntersections\n\nSee: http://underscorejs.org/#throttle\n. Eric we may want to reopen this one.\n\nI did a little research...\n\nhttp://jsfiddle.net/2KXmz/1/\nWith Kinetic JS 3.10.5 on my netbook I get 6-7ms average response time for getIntersections\n\nhttp://jsfiddle.net/2KXmz/2/\nWith Kinetic JS 4.0.5 on my netbook I get 370ms average response time for getIntersections\n. @pesek Suggestion would be to do you own boundary checking for now.\n\nif (shape.getX() >= pos.x &&  pos.x <= shape.getX() + shape.getWidth() && \nshape.getY() >= pos.y &&  pos.y <= shape.getY() + shape.getHeight()) {\n//for rectangles and approx. hit detection this is all you need to do\n//if you have a ellipse/complex shape do shape.intersects(pos) here as a secondary step\n}\n\nThis turns out to be much faster in my own internal testing -- 10-100x\n. Love to see this in master.\n. Eric, what do you think?\n. This is causing me problems as well... I think this is a duplicate of #177.\n. Same here...\n\nFiddle to verify:\nhttp://jsfiddle.net/zADxm/\n\nIE9 Fails\nChrome 23 Pass\nFirefox 16 Fails\nSafari Mobile Pass\n. @juliat \"false\" is a string, you want to setDraggable(false)\n\nThat does/will work in WebKit (Chrome/Safari).\n. @ericdrowell can we do this instead:\n\nif((Kinetic.DD && this.attrs.draggable) || (obj && obj.shape)) {\n     evt.preventDefault(); \n}\n. _touchmove likewise would obviously be\nif((obj && obj.shape) || dd) {\n     evt.preventDefault(); \n}\n. This appears fixed. Tested in FireFox 17.\n\nJS Fiddle: http://jsfiddle.net/bKq2y/1/\n. Tested in Chrome 23 (Stable) and FireFox 15 and the demo worked for me.\n. My only concern is Mozilla Firefox/mobile users, I think users on IE9 are used to graceful degradation but I worry that Firefox and mobile users expect the same experience as Google Chrome users.\n\nThat said if shimming support for other browsers adds too much complexity/blocks innovation, then I'm all for it.\n. @brian-c \n\nYeah, I just downloaded Mozilla Firefox  Nightly 20.0a1 (three versions ahead of the current version) and setLineDash is still not supported.\n. That's fine -- we'll survive without line dashes in Firefox :)\n. I have a dragover method (equivalent of dragenter) and dragout functionality in an abstraction layer over KineticJS.\n\nIn implementing that functionality I realized that getIntersections was slow and did boundary checking first and only if that the boundary checking returns true did I actually call shape.intersects. This still adds between 1-5ms overhead on slower devices, but works for my use case (it may not work when you have 1000s of shapes on screen since this requires an O(n) search).\n\nJust an idea -- Eric, would you support official KineticJS plugins? (issue #197 is also probably best implemented as a plug in because of the bloat)\n. Makes sense.\n. My only concern would be that treating 0 Opacity = hidden could be dangerous/ break existing code. My use case (and a common use case) for opacity 0 is for hit detection / intersection testing.\n\nIn your use case: you could override setOpacity to automatically set the node to hidden.\n\nHave you every thought about writing an ActionScript to KineticJS tutorial? -- it'd be an interesting read and maybe help convert more Flash developers to KineticJS\n. This is a duplicate of #197. I'll quote @ericdrowell \n\n\"For the time being, I don't have plans to reintroduce the lineDash logic just for the Line shape, because I'm fairly certain it will cause more confusion for people than its worth. In doing so, line dashes will work in all browsers, but will only work for general strokes for browsers that have implemented lineDash. It's easier to understand if its all or nothing, if a browser always supports it, or doesn't at all.\n\nTo me, the lineDash attribute is a lot like the border-radius CSS property. When creating a website, you can use border-radius to get nice rounded corners in modern browsers, while knowing that older browsers will just render the sharp corners. It won't break the app. This is a form of graceful degradation.\n\nIf more people make a ruckus about this I'll consider putting it back in, but currently I have a lot of bigger fish to fry in regards to bugz and enhancements :)\"\n. The ones I know of:\nhttp://www.html5canvastutorials.com/libraries/kinetic-v4.0.1.js\nhttp://www.html5canvastutorials.com/libraries/kinetic-v4.1.0.js\nhttp://www.html5canvastutorials.com/libraries/kinetic-v4.1.1.js\nhttp://www.html5canvastutorials.com/libraries/kinetic-v4.1.2.js\nhttp://www.html5canvastutorials.com/libraries/kinetic-v4.2.0.js\nhttp://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.3.0.js\nhttp://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.3.1.js\nhttp://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.3.2.js\n. Working for me - try switching to Google DNS.\n\nOn Wednesday, February 13, 2013, Kevin Beauregard wrote:\n\n> Is the site down? I know this isnt a code issue per say, but I can no\n> longer access the reference docs. I've tried multiple networks and devices\n> as well as flushing DNS. Thanks\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/277.\n\n## \n\nChristopher Ritter\nDirector of Software Development\nSPEC Innovations\nP. 571-485-7807 | F. 571-485-7801\nwww.specinnovations.com\n. Our team figured out a nice workaround.\n\ncontext.fill(context) needs to be changed to just context.fill()\n\nThis fix should work in all versions of KineticJS 4.0.1 forward.\n. Our team figured out a nice workaround.\n\ncontext.fill(context) needs to be changed to just context.fill()\n\nThis fix should work in all versions of KineticJS 4.0.1 forward.\n. If you're stuck on an older version:\n\nReplace: context.fill(context) to just context.fill() in the KineticJS source.\n. Our team figured out a nice workaround.\n\ncontext.fill(context) needs to be changed to just context.fill()\n\nThis fix should work in all versions of KineticJS 4.0.1 forward.\n. Any chance of this merging into master? I'm interested in WebGL with KineticJS as well.\n. Great news!\n. #585 gives an easy to produce test\n. Star this issue:\nhttps://code.google.com/p/chromium/issues/detail?id=280153&thanks=280153&ts=1377616231\n. Eric, can we pull this into master?\n. +1\n. Thanks Eric!\n. +1 for this feature\n. I'd suggest throttling your call to getIntersections\n\nSee: http://underscorejs.org/#throttle\n. Eric we may want to reopen this one.\n\nI did a little research...\n\nhttp://jsfiddle.net/2KXmz/1/\nWith Kinetic JS 3.10.5 on my netbook I get 6-7ms average response time for getIntersections\n\nhttp://jsfiddle.net/2KXmz/2/\nWith Kinetic JS 4.0.5 on my netbook I get 370ms average response time for getIntersections\n. @pesek Suggestion would be to do you own boundary checking for now.\n\nif (shape.getX() >= pos.x &&  pos.x <= shape.getX() + shape.getWidth() && \nshape.getY() >= pos.y &&  pos.y <= shape.getY() + shape.getHeight()) {\n//for rectangles and approx. hit detection this is all you need to do\n//if you have a ellipse/complex shape do shape.intersects(pos) here as a secondary step\n}\n\nThis turns out to be much faster in my own internal testing -- 10-100x\n. Love to see this in master.\n. Eric, what do you think?\n. This is causing me problems as well... I think this is a duplicate of #177.\n. Same here...\n\nFiddle to verify:\nhttp://jsfiddle.net/zADxm/\n\nIE9 Fails\nChrome 23 Pass\nFirefox 16 Fails\nSafari Mobile Pass\n. @juliat \"false\" is a string, you want to setDraggable(false)\n\nThat does/will work in WebKit (Chrome/Safari).\n. @ericdrowell can we do this instead:\n\nif((Kinetic.DD && this.attrs.draggable) || (obj && obj.shape)) {\n     evt.preventDefault(); \n}\n. _touchmove likewise would obviously be\nif((obj && obj.shape) || dd) {\n     evt.preventDefault(); \n}\n. This appears fixed. Tested in FireFox 17.\n\nJS Fiddle: http://jsfiddle.net/bKq2y/1/\n. Tested in Chrome 23 (Stable) and FireFox 15 and the demo worked for me.\n. My only concern is Mozilla Firefox/mobile users, I think users on IE9 are used to graceful degradation but I worry that Firefox and mobile users expect the same experience as Google Chrome users.\n\nThat said if shimming support for other browsers adds too much complexity/blocks innovation, then I'm all for it.\n. @brian-c \n\nYeah, I just downloaded Mozilla Firefox  Nightly 20.0a1 (three versions ahead of the current version) and setLineDash is still not supported.\n. That's fine -- we'll survive without line dashes in Firefox :)\n. I have a dragover method (equivalent of dragenter) and dragout functionality in an abstraction layer over KineticJS.\n\nIn implementing that functionality I realized that getIntersections was slow and did boundary checking first and only if that the boundary checking returns true did I actually call shape.intersects. This still adds between 1-5ms overhead on slower devices, but works for my use case (it may not work when you have 1000s of shapes on screen since this requires an O(n) search).\n\nJust an idea -- Eric, would you support official KineticJS plugins? (issue #197 is also probably best implemented as a plug in because of the bloat)\n. Makes sense.\n. My only concern would be that treating 0 Opacity = hidden could be dangerous/ break existing code. My use case (and a common use case) for opacity 0 is for hit detection / intersection testing.\n\nIn your use case: you could override setOpacity to automatically set the node to hidden.\n\nHave you every thought about writing an ActionScript to KineticJS tutorial? -- it'd be an interesting read and maybe help convert more Flash developers to KineticJS\n. This is a duplicate of #197. I'll quote @ericdrowell \n\n\"For the time being, I don't have plans to reintroduce the lineDash logic just for the Line shape, because I'm fairly certain it will cause more confusion for people than its worth. In doing so, line dashes will work in all browsers, but will only work for general strokes for browsers that have implemented lineDash. It's easier to understand if its all or nothing, if a browser always supports it, or doesn't at all.\n\nTo me, the lineDash attribute is a lot like the border-radius CSS property. When creating a website, you can use border-radius to get nice rounded corners in modern browsers, while knowing that older browsers will just render the sharp corners. It won't break the app. This is a form of graceful degradation.\n\nIf more people make a ruckus about this I'll consider putting it back in, but currently I have a lot of bigger fish to fry in regards to bugz and enhancements :)\"\n. The ones I know of:\nhttp://www.html5canvastutorials.com/libraries/kinetic-v4.0.1.js\nhttp://www.html5canvastutorials.com/libraries/kinetic-v4.1.0.js\nhttp://www.html5canvastutorials.com/libraries/kinetic-v4.1.1.js\nhttp://www.html5canvastutorials.com/libraries/kinetic-v4.1.2.js\nhttp://www.html5canvastutorials.com/libraries/kinetic-v4.2.0.js\nhttp://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.3.0.js\nhttp://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.3.1.js\nhttp://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.3.2.js\n. Working for me - try switching to Google DNS.\n\nOn Wednesday, February 13, 2013, Kevin Beauregard wrote:\n\n> Is the site down? I know this isnt a code issue per say, but I can no\n> longer access the reference docs. I've tried multiple networks and devices\n> as well as flushing DNS. Thanks\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/277.\n\n## \n\nChristopher Ritter\nDirector of Software Development\nSPEC Innovations\nP. 571-485-7807 | F. 571-485-7801\nwww.specinnovations.com\n. Our team figured out a nice workaround.\n\ncontext.fill(context) needs to be changed to just context.fill()\n\nThis fix should work in all versions of KineticJS 4.0.1 forward.\n. Our team figured out a nice workaround.\n\ncontext.fill(context) needs to be changed to just context.fill()\n\nThis fix should work in all versions of KineticJS 4.0.1 forward.\n. If you're stuck on an older version:\n\nReplace: context.fill(context) to just context.fill() in the KineticJS source.\n. Our team figured out a nice workaround.\n\ncontext.fill(context) needs to be changed to just context.fill()\n\nThis fix should work in all versions of KineticJS 4.0.1 forward.\n. Any chance of this merging into master? I'm interested in WebGL with KineticJS as well.\n. Great news!\n. #585 gives an easy to produce test\n. Star this issue:\nhttps://code.google.com/p/chromium/issues/detail?id=280153&thanks=280153&ts=1377616231\n. ",
    "darkii": "I fixed it on my own. I dont know how, but i have done it. Looks like stage was in the previous kinetic.js builds a global and since 3.10.3 not. \n. I fixed it on my own. I dont know how, but i have done it. Looks like stage was in the previous kinetic.js builds a global and since 3.10.3 not. \n. ",
    "ins0mniaque": "What I'm doing is implementing a layer that tracks it's children's dirty and opaque regions to dramatically increasing redrawing time by only redrawing invalidated regions in the layer through clipping. To make things work seamlessly, I invalidate regions when an object is added/removed/z-ordered. However, without being able to be notified of those changes, I have to compare an old (previous) list of node to a current one to detect changes. Not having to do this would further improve drawing times.\n\nWhile on the subject, would there be a better way to track if nodes have changed than comparing their previous and current transformation matrixes ?\n. What I'm doing is implementing a layer that tracks it's children's dirty and opaque regions to dramatically increasing redrawing time by only redrawing invalidated regions in the layer through clipping. To make things work seamlessly, I invalidate regions when an object is added/removed/z-ordered. However, without being able to be notified of those changes, I have to compare an old (previous) list of node to a current one to detect changes. Not having to do this would further improve drawing times.\n\nWhile on the subject, would there be a better way to track if nodes have changed than comparing their previous and current transformation matrixes ?\n. ",
    "levram": "Okay, you convinced me! Thanks!\n. Okay, you convinced me! Thanks!\n. ",
    "sdsaunders": "While KineticJS does rearrange its internal representation of the layer's zIndex values - it does not do so on the canvas DOM elements. In my example I added a stage.clear() and stage.draw() and watched the layers get 'drawn' in the correct order - however the canvas layers had not rearranged and therefore the layers still were not ordered correctly.\n. Looking at version 3.10.3 there is code in _setChildrenIndices for actually rearranging the layers - in versions after this the code is no longer there.\n. wow\n. thanks Eric for all the hard work!\n. While KineticJS does rearrange its internal representation of the layer's zIndex values - it does not do so on the canvas DOM elements. In my example I added a stage.clear() and stage.draw() and watched the layers get 'drawn' in the correct order - however the canvas layers had not rearranged and therefore the layers still were not ordered correctly.\n. Looking at version 3.10.3 there is code in _setChildrenIndices for actually rearranging the layers - in versions after this the code is no longer there.\n. wow\n. thanks Eric for all the hard work!\n. ",
    "vincentbriglia": "could perhaps in the `drawFunc` of `Kinetic.Sprite` the following change be made:\n\n``` javascript\nwidth = f.width || this.getWidth(),\nheight = f.width || this.getHeight();\n\nif (image) {\n    context.drawImage(image, f.x, f.y, width, height, 0, 0, width, height);\n}\n```\n\nthen at least, we can define the sprite size on the sprite level, rather than on each animation. this is a small fix but reduces repeating width and height values each time. Plus this is a non-breaking change.\n\nsame should be applied to the `drawHitFunc` ofcourse\n. Eric, perhaps I wasn't entirely clear and I apologize for any confusion there. I do realize that not all sprites are put together in the same way, as you explained above. but just in case they are, the proposed fix does little to prevent people from still defining their sprites in different sizes. I shouldn't have hijacked this bug. \n. it's to be noted, that these jshint tests don't pass at the moment, as this pull request is a motivation to get the ball rolling. \n. could perhaps in the `drawFunc` of `Kinetic.Sprite` the following change be made:\n\n``` javascript\nwidth = f.width || this.getWidth(),\nheight = f.width || this.getHeight();\n\nif (image) {\n    context.drawImage(image, f.x, f.y, width, height, 0, 0, width, height);\n}\n```\n\nthen at least, we can define the sprite size on the sprite level, rather than on each animation. this is a small fix but reduces repeating width and height values each time. Plus this is a non-breaking change.\n\nsame should be applied to the `drawHitFunc` ofcourse\n. Eric, perhaps I wasn't entirely clear and I apologize for any confusion there. I do realize that not all sprites are put together in the same way, as you explained above. but just in case they are, the proposed fix does little to prevent people from still defining their sprites in different sizes. I shouldn't have hijacked this bug. \n. it's to be noted, that these jshint tests don't pass at the moment, as this pull request is a motivation to get the ball rolling. \n. ",
    "fitzalon": "I have implemented the 'hit detection' drawFunc solution that I outlined in my comments in \nhttp://www.kineticjs.com/forum/viewtopic.php?f=8&t=1131\n\nThis solution also includes the worthy \"pass boolean\" solution that DAVID proposed in that discussion thread.   You have the option of defining a special purpose 'hit detection' drawFunc [as another 'attrs' parameter, 'hitDrawFunc'], or simply to code your drawFunc to look at the second parameter passed to it... which is the value of the Shape's colorKey.   If it is passed, then the draw is to the hit detection buffer, and I use the value of colorKey in all my fills and strokes.  This gives me great flexibility to create composite Shapes with multiple colored bits and pieces without having to create separate Shapes for each of the bits.  This is conceptually much cleaner from a design viewpoint, and frees me to create all sorts of multi-colored Shapes without being restricted to a single fill and stroke color.  \n\nThe solution also encompasses the current solution in Eric's code which currently implements the very restrictive rule of 'one shape can only have one fill or stroke color'.  The solution also opens up the possibility to have a very different 'hit draw' pattern than the pattern of the actual shape.   For example, you can draw a 'fatter hit line' for a narrow line so that your users will be able to select it easily.   This is what Davonium in the above comment is wanting.  \n\nTo use this solution, simply include the new Kinetic.Shape.prototype.draw below in a separate JS file that is included AFTER Eric's KineticJS file.  It will override Eric's Kinetic.Shape.prototype.draw function for Custom Shapes ONLY.   His other Shapes will continue to use his  Kinetic.Shape.prototype.draw function [because his code extends those Shapes with his generic Shape functions before my new Kinetic.Shape.prototype.draw function is encountered in a later file].  You could overwrite his  Kinetic.Shape.prototype.draw function, but that is not recommended until he agrees to adopt this solution or to implement a similar one.  Keep his code clean.. he is the gatekeeper for the inclusion of new ideas.\n\nAs feedback on my use of this solution, I have used both the hitDrawFunc variation and the detection of the colorKey parameter in a single drawFunc.   When I want a very different hit draw pattern, I have used the hitDrawFunc.  When I want the same pattern with only a substitution of my fill color for the Shape's colorKey, I have used the same drawFunc with a simple detection of the colorKey parameter to tell me to substitute it in my fills. \n\n---\n\n```\nKinetic.Shape.prototype.draw = function(canvas) {\n    if(this.attrs.drawFunc && Kinetic.Node.prototype._shouldDraw.call(this, canvas)) {\n        var stage = this.getStage();\n        var context = canvas.getContext();\n        var family = [];\n        var parent = this.parent;\n\n        family.unshift(this);\n        while(parent) {\n            family.unshift(parent);\n            parent = parent.parent;\n        }\n\n        context.save();\n        for(var n = 0; n < family.length; n++) {\n            var node = family[n];\n            var t = node.getTransform();\n            var m = t.getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n        }\n\n        this.applyOpacity(context);\n        this.applyLineJoin(context);\n        this.applyLineCap(context);\n\n        // draw the shape\n        this.appliedShadow = false;\n\n        var wl = Kinetic.Global.BUFFER_WHITELIST;\n        var bl = Kinetic.Global.BUFFER_BLACKLIST;\n        var attrs = {};\n\n        if(canvas.name === 'buffer') {\n            for(var n = 0; n < wl.length; n++) {\n                var key = wl[n];\n                attrs[key] = this.attrs[key];\n                if(this.attrs[key] || (key === 'fill' && !this.attrs.stroke && !('image' in this.attrs))) {\n                    this.attrs[key] = '#' + this.colorKey;\n                }\n            }\n            for(var n = 0; n < bl.length; n++) {\n                var key = bl[n];\n                attrs[key] = this.attrs[key];\n                this.attrs[key] = '';\n            }\n            // image is a special case\n            if('image' in this.attrs) {\n                attrs.image = this.attrs.image;\n                if(this.imageBuffer) {\n                    this.attrs.image = this.imageBuffer;\n                }\n                else {\n                    this.attrs.image = null;\n                    this.attrs.fill = '#' + this.colorKey;\n                }\n            }\n            context.globalAlpha = 1;\n            if (!!this.attrs.hitDrawFunc) this.attrs.hitDrawFunc.call(this, context, this.colorKey);\n            else this.attrs.drawFunc.call(this, context, this.colorKey);\n\n            var bothLists = wl.concat(bl);\n            for(var n = 0; n < bothLists.length; n++) {\n                var key = bothLists[n];\n                this.attrs[key] = attrs[key];\n            }\n            // image is a special case\n            this.attrs.image = attrs.image;\n\n        } else this.attrs.drawFunc.call(this, context); //This is a draw to the real display buffer\n\n        context.restore();\n    }\n}\nKinetic.Shape.prototype.setHitDrawFunc = function(hitDrawFunc) { //This is only if you don't want to include the 'hitDrawFunc' as a attrs parameter in your Shape constructor call.\n        this.attrs['hitDrawFunc'] = hitDrawFunc ;\n        return this ; \n}\n```\n\n---\n. Bravo, Eric.  Having you implement will be so much better integrated than any of our workarounds, (and less dangerous).\nSee also... https://github.com/ericdrowell/KineticJS/issues/145\nCheers Mate,\nFitzalon\n. Hi Ckristijan,\nYour case is just another instance of the current untenable restriction of forcing Eric's otherwise-excellent hit-detection system on the functioning of the drawFunc.  I have implemented a design solution that enables the user to separate the hit-detection functioning from the drawFunc on a if-desireable basis. Have a look my solution at the following:\n\nhttps://github.com/ericdrowell/KineticJS/issues/136\n\nLet me know if it solves your issues and frees you to do as many setFill()s as you want in your drawFuncs without any loss of event detection.  \n\nNeedless to say, this design flaw needs to be fixed.\nCheers Mate.\n. Hi Ckristijan, \n  Don't use setFill; instead directly use the context.setFillStyle() as illustrated below and you will be OK.  \n\nif(colorKey) context.setFillStyle(colorKey);\nelse context.setFillStyle(\"#FAFAFA\");\n\nRemember that you will need to implement the instructions at https://github.com/ericdrowell/KineticJS/issues/136\n\nAlso, don't go back to version 3.10.5 that uses an older inferior hit-detection system.   Keep up with Eric's new versions as he is continuously introducing improvements, and you want to keep your code compatible.  \n\nHe will eventually fix this design flaw and free us to create rich multi-colored Shapes with variant hit-detection mechanisms that can be independent of the Shapes drawing (... the hitDrawFunc idea).\n\nMy drawFunc functions work perfectly.  Here is an example---------\n\n```\n//This draw function draws a simple circle representing a node in my application, \n//but its display could vary for a variety of different situations in the application. \n//It has different stroke color depending whether it is \"locked on\" or not, or whether \n//it represents a \"Right-Hand (RH)\" node or not. \n//Or if it represents a \"Phantom\" node, it will be faded (globalAlpha=0.3)\n//The example illustrates that there is a real need to be able to vary the display color,\n//via FILL and STROKE changes.  I'm sure that lots of applications will need this\n//flexibility, independent of hit-detection restrictions.\n//Note that the hit FILLs the circle, but the display only STROKEs it (no fill) \nthis.drawSplotch = function(ctx,colorKey) {\n    var splotchRadius = this.radius ;\n    var assocNode = this.assocNode ;\n    var X = assocNode.getX() ;  \n    var Y = assocNode.getY() ;  \n    var drawColoredSplotch = function(splotchColor) {\n            var lockedOn = assocNode.getLockedON() ;\n            if (lockedOn || !assocNode.getPreviousNode()) {\n                ctx.lineWidth = 3 ;  \n                ctx.strokeStyle = (lockedOn? \"orange\": \"white\") ;\n            } else \n                if (assocNode.isRHnode()) {\n                    ctx.lineWidth = 2 ;  \n                    ctx.strokeStyle = \"red\";\n                } else {\n                    ctx.lineWidth = 1 ;\n                    ctx.strokeStyle = makeHexColor(splotchColor) ;\n                }\n            if (assocNode.notPhantomNode()) \n                ctx.globalAlpha = 1.0 ;\n                else ctx.globalAlpha = 0.3;  \n            ctx.beginPath() ;\n            ctx.arc(X, Y, splotchRadius, 0, 2 * Math.PI, false);\n            ctx.stroke() ;//No Fill, only stroke\n            ctx.closePath();\n        }\n    if (!!colorKey) {//draw hit region... notice the fill rather than stroke\n        ctx.fillStyle = colorKey ;\n        ctx.beginPath() ;\n        ctx.arc(X, Y, splotchRadius, 0, 2 * Math.PI, false);\n        ctx.fill() ;\n        ctx.closePath();\n    } else {\n        drawColoredSplotch(this.splotchColor) ;\n    }\n}\n```\n. I have implemented the 'hit detection' drawFunc solution that I outlined in my comments in \nhttp://www.kineticjs.com/forum/viewtopic.php?f=8&t=1131\n\nThis solution also includes the worthy \"pass boolean\" solution that DAVID proposed in that discussion thread.   You have the option of defining a special purpose 'hit detection' drawFunc [as another 'attrs' parameter, 'hitDrawFunc'], or simply to code your drawFunc to look at the second parameter passed to it... which is the value of the Shape's colorKey.   If it is passed, then the draw is to the hit detection buffer, and I use the value of colorKey in all my fills and strokes.  This gives me great flexibility to create composite Shapes with multiple colored bits and pieces without having to create separate Shapes for each of the bits.  This is conceptually much cleaner from a design viewpoint, and frees me to create all sorts of multi-colored Shapes without being restricted to a single fill and stroke color.  \n\nThe solution also encompasses the current solution in Eric's code which currently implements the very restrictive rule of 'one shape can only have one fill or stroke color'.  The solution also opens up the possibility to have a very different 'hit draw' pattern than the pattern of the actual shape.   For example, you can draw a 'fatter hit line' for a narrow line so that your users will be able to select it easily.   This is what Davonium in the above comment is wanting.  \n\nTo use this solution, simply include the new Kinetic.Shape.prototype.draw below in a separate JS file that is included AFTER Eric's KineticJS file.  It will override Eric's Kinetic.Shape.prototype.draw function for Custom Shapes ONLY.   His other Shapes will continue to use his  Kinetic.Shape.prototype.draw function [because his code extends those Shapes with his generic Shape functions before my new Kinetic.Shape.prototype.draw function is encountered in a later file].  You could overwrite his  Kinetic.Shape.prototype.draw function, but that is not recommended until he agrees to adopt this solution or to implement a similar one.  Keep his code clean.. he is the gatekeeper for the inclusion of new ideas.\n\nAs feedback on my use of this solution, I have used both the hitDrawFunc variation and the detection of the colorKey parameter in a single drawFunc.   When I want a very different hit draw pattern, I have used the hitDrawFunc.  When I want the same pattern with only a substitution of my fill color for the Shape's colorKey, I have used the same drawFunc with a simple detection of the colorKey parameter to tell me to substitute it in my fills. \n\n---\n\n```\nKinetic.Shape.prototype.draw = function(canvas) {\n    if(this.attrs.drawFunc && Kinetic.Node.prototype._shouldDraw.call(this, canvas)) {\n        var stage = this.getStage();\n        var context = canvas.getContext();\n        var family = [];\n        var parent = this.parent;\n\n        family.unshift(this);\n        while(parent) {\n            family.unshift(parent);\n            parent = parent.parent;\n        }\n\n        context.save();\n        for(var n = 0; n < family.length; n++) {\n            var node = family[n];\n            var t = node.getTransform();\n            var m = t.getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n        }\n\n        this.applyOpacity(context);\n        this.applyLineJoin(context);\n        this.applyLineCap(context);\n\n        // draw the shape\n        this.appliedShadow = false;\n\n        var wl = Kinetic.Global.BUFFER_WHITELIST;\n        var bl = Kinetic.Global.BUFFER_BLACKLIST;\n        var attrs = {};\n\n        if(canvas.name === 'buffer') {\n            for(var n = 0; n < wl.length; n++) {\n                var key = wl[n];\n                attrs[key] = this.attrs[key];\n                if(this.attrs[key] || (key === 'fill' && !this.attrs.stroke && !('image' in this.attrs))) {\n                    this.attrs[key] = '#' + this.colorKey;\n                }\n            }\n            for(var n = 0; n < bl.length; n++) {\n                var key = bl[n];\n                attrs[key] = this.attrs[key];\n                this.attrs[key] = '';\n            }\n            // image is a special case\n            if('image' in this.attrs) {\n                attrs.image = this.attrs.image;\n                if(this.imageBuffer) {\n                    this.attrs.image = this.imageBuffer;\n                }\n                else {\n                    this.attrs.image = null;\n                    this.attrs.fill = '#' + this.colorKey;\n                }\n            }\n            context.globalAlpha = 1;\n            if (!!this.attrs.hitDrawFunc) this.attrs.hitDrawFunc.call(this, context, this.colorKey);\n            else this.attrs.drawFunc.call(this, context, this.colorKey);\n\n            var bothLists = wl.concat(bl);\n            for(var n = 0; n < bothLists.length; n++) {\n                var key = bothLists[n];\n                this.attrs[key] = attrs[key];\n            }\n            // image is a special case\n            this.attrs.image = attrs.image;\n\n        } else this.attrs.drawFunc.call(this, context); //This is a draw to the real display buffer\n\n        context.restore();\n    }\n}\nKinetic.Shape.prototype.setHitDrawFunc = function(hitDrawFunc) { //This is only if you don't want to include the 'hitDrawFunc' as a attrs parameter in your Shape constructor call.\n        this.attrs['hitDrawFunc'] = hitDrawFunc ;\n        return this ; \n}\n```\n\n---\n. Bravo, Eric.  Having you implement will be so much better integrated than any of our workarounds, (and less dangerous).\nSee also... https://github.com/ericdrowell/KineticJS/issues/145\nCheers Mate,\nFitzalon\n. Hi Ckristijan,\nYour case is just another instance of the current untenable restriction of forcing Eric's otherwise-excellent hit-detection system on the functioning of the drawFunc.  I have implemented a design solution that enables the user to separate the hit-detection functioning from the drawFunc on a if-desireable basis. Have a look my solution at the following:\n\nhttps://github.com/ericdrowell/KineticJS/issues/136\n\nLet me know if it solves your issues and frees you to do as many setFill()s as you want in your drawFuncs without any loss of event detection.  \n\nNeedless to say, this design flaw needs to be fixed.\nCheers Mate.\n. Hi Ckristijan, \n  Don't use setFill; instead directly use the context.setFillStyle() as illustrated below and you will be OK.  \n\nif(colorKey) context.setFillStyle(colorKey);\nelse context.setFillStyle(\"#FAFAFA\");\n\nRemember that you will need to implement the instructions at https://github.com/ericdrowell/KineticJS/issues/136\n\nAlso, don't go back to version 3.10.5 that uses an older inferior hit-detection system.   Keep up with Eric's new versions as he is continuously introducing improvements, and you want to keep your code compatible.  \n\nHe will eventually fix this design flaw and free us to create rich multi-colored Shapes with variant hit-detection mechanisms that can be independent of the Shapes drawing (... the hitDrawFunc idea).\n\nMy drawFunc functions work perfectly.  Here is an example---------\n\n```\n//This draw function draws a simple circle representing a node in my application, \n//but its display could vary for a variety of different situations in the application. \n//It has different stroke color depending whether it is \"locked on\" or not, or whether \n//it represents a \"Right-Hand (RH)\" node or not. \n//Or if it represents a \"Phantom\" node, it will be faded (globalAlpha=0.3)\n//The example illustrates that there is a real need to be able to vary the display color,\n//via FILL and STROKE changes.  I'm sure that lots of applications will need this\n//flexibility, independent of hit-detection restrictions.\n//Note that the hit FILLs the circle, but the display only STROKEs it (no fill) \nthis.drawSplotch = function(ctx,colorKey) {\n    var splotchRadius = this.radius ;\n    var assocNode = this.assocNode ;\n    var X = assocNode.getX() ;  \n    var Y = assocNode.getY() ;  \n    var drawColoredSplotch = function(splotchColor) {\n            var lockedOn = assocNode.getLockedON() ;\n            if (lockedOn || !assocNode.getPreviousNode()) {\n                ctx.lineWidth = 3 ;  \n                ctx.strokeStyle = (lockedOn? \"orange\": \"white\") ;\n            } else \n                if (assocNode.isRHnode()) {\n                    ctx.lineWidth = 2 ;  \n                    ctx.strokeStyle = \"red\";\n                } else {\n                    ctx.lineWidth = 1 ;\n                    ctx.strokeStyle = makeHexColor(splotchColor) ;\n                }\n            if (assocNode.notPhantomNode()) \n                ctx.globalAlpha = 1.0 ;\n                else ctx.globalAlpha = 0.3;  \n            ctx.beginPath() ;\n            ctx.arc(X, Y, splotchRadius, 0, 2 * Math.PI, false);\n            ctx.stroke() ;//No Fill, only stroke\n            ctx.closePath();\n        }\n    if (!!colorKey) {//draw hit region... notice the fill rather than stroke\n        ctx.fillStyle = colorKey ;\n        ctx.beginPath() ;\n        ctx.arc(X, Y, splotchRadius, 0, 2 * Math.PI, false);\n        ctx.fill() ;\n        ctx.closePath();\n    } else {\n        drawColoredSplotch(this.splotchColor) ;\n    }\n}\n```\n. ",
    "sendel": "Resolved! I have insert functions in  \n\nKinetic.Layer.prototype = {\n\n```\nhide: function(){\n    this.canvas.getElement().style.display = 'none';\n},\nshow: function(){\n    this.canvas.getElement().style.display = 'block';\n},\n```\n. see https://github.com/ericdrowell/KineticJS/issues/421\n. new implementation (fast set to end of tween) for Sprite need also\n\n/***/\n\n```\n    onEnterFrame: function() {\n        var t = this.getTimer() - this._startTime;\n        if(getHidden() && t < this.duration && t>=0)\n        {\n            t = this.duration;\n\n        }\n        if(this.state === PLAYING) {\n            this.setTime(t);\n        }\n        else if (this.state === REVERSING) {\n            this.setTime(this.duration - t);\n        }\n    },\n```\n. for Sprite (not full test)\n\n/***/\n\n```\n     _updateIndex: function() {\n        var index = this.getIndex(),\n            animation = this.getAnimation(),\n            animations = this.getAnimations(),\n            anim = animations[animation], \n            len = anim.length;\n        if(getHidden())\n        {\n            index = len - 1;\n\n        }            \n        if(index < len - 1) {\n            this.setIndex(index + 1);\n        }\n        else {\n            this.setIndex(0);\n        }\n    }\n```\n. full solution \nhttps://github.com/sendel/KineticJS/commit/a9036d138c011cbddd82ac2870aee5786283ed84\n&&\nhttps://github.com/sendel/KineticJS/commit/e68ba39aa85e0fde45f9daf7fca7b8cac54c4072\n. not only scale... any parameter transition with 0 when begin or end. Opera 12.15 affected too.\nBut in Chrome work good.\n. yes... y,x... etc\n. http://jsfiddle.net/tzenQ/6/\n\nfor firefox try 0.000001 instad 0.0 for work right. /_Firefox 21 for Linux_/\n. Code:\nfor(var i in layer.getChildren())\n        console.log(layer.getChildren()[i]);\n\nResult:\nKinetic.Group {nodeType: \"Group\", attrs: Object, children: Kinetic.Collection[4], _id: 162, eventListeners: Object\u2026}\n get_js:1458\nKinetic.Group {nodeType: \"Group\", attrs: Object, children: Kinetic.Collection[4], _id: 167, eventListeners: Object\u2026}\n get_js:1458\nKinetic.Group {nodeType: \"Group\", attrs: Object, children: Kinetic.Collection[4], _id: 172, eventListeners: Object\u2026}\n get_js:1458\nKinetic.Group {nodeType: \"Group\", attrs: Object, children: Kinetic.Collection[4], _id: 177, eventListeners: Object\u2026}\n get_js:1458\n4 get_js:1458\nfunction (func) {\n        for(var n = 0; n < this.length; n++) {\n            func(this[n], n);\n        }\n    } get_js:1458\nfunction () {\n        var arr = [];\n        for(var n = 0; n < this.length; n++) {\n            arr.push(this[n]);\n        }\n        return arr;\n    } get_js:1458\nfunction () {\n                    var len = this.length,\n                        i;\n\n```\n                args = [].slice.call(arguments);\n                for(i = 0; i < len; i++) {\n                    this[i][method].apply(this[i], args);\n                }        \n            } get_js:1458\n```\n\nfunction () {\n                    var len = this.length,\n                        i;\n\n```\n                args = [].slice.call(arguments);\n                for(i = 0; i < len; i++) {\n                    this[i][method].apply(this[i], args);\n                }        \n            } get_js:1458\n```\n\nfunction () {\n                    var len = this.length,\n                        i;\n\n```\n                args = [].slice.call(arguments);\n                for(i = 0; i < len; i++) {\n                    this[i][method].apply(this[i], args);\n                }        \n            } get_js:1458\n```\n. Children has wrong objects:\n\n[Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, each: function, toArray: function, on: function, off: function, remove: function\u2026]\n. Ohh, children is Kinetic.Collection ... but it has metods and they append to array... May be need other things for this?\nIn 4.4.x this simple array and work well;\n. var any1 = new Animation();\n...\nvar anyN = new Animation();\n\nfor every anyN will call this function! When its RAF (window.requestAnimationFrame ) that ok, but if set FRAF (setTimeout) for each objects will create self timer!\n. Resolved! I have insert functions in  \n\nKinetic.Layer.prototype = {\n\n```\nhide: function(){\n    this.canvas.getElement().style.display = 'none';\n},\nshow: function(){\n    this.canvas.getElement().style.display = 'block';\n},\n```\n. see https://github.com/ericdrowell/KineticJS/issues/421\n. new implementation (fast set to end of tween) for Sprite need also\n\n/***/\n\n```\n    onEnterFrame: function() {\n        var t = this.getTimer() - this._startTime;\n        if(getHidden() && t < this.duration && t>=0)\n        {\n            t = this.duration;\n\n        }\n        if(this.state === PLAYING) {\n            this.setTime(t);\n        }\n        else if (this.state === REVERSING) {\n            this.setTime(this.duration - t);\n        }\n    },\n```\n. for Sprite (not full test)\n\n/***/\n\n```\n     _updateIndex: function() {\n        var index = this.getIndex(),\n            animation = this.getAnimation(),\n            animations = this.getAnimations(),\n            anim = animations[animation], \n            len = anim.length;\n        if(getHidden())\n        {\n            index = len - 1;\n\n        }            \n        if(index < len - 1) {\n            this.setIndex(index + 1);\n        }\n        else {\n            this.setIndex(0);\n        }\n    }\n```\n. full solution \nhttps://github.com/sendel/KineticJS/commit/a9036d138c011cbddd82ac2870aee5786283ed84\n&&\nhttps://github.com/sendel/KineticJS/commit/e68ba39aa85e0fde45f9daf7fca7b8cac54c4072\n. not only scale... any parameter transition with 0 when begin or end. Opera 12.15 affected too.\nBut in Chrome work good.\n. yes... y,x... etc\n. http://jsfiddle.net/tzenQ/6/\n\nfor firefox try 0.000001 instad 0.0 for work right. /_Firefox 21 for Linux_/\n. Code:\nfor(var i in layer.getChildren())\n        console.log(layer.getChildren()[i]);\n\nResult:\nKinetic.Group {nodeType: \"Group\", attrs: Object, children: Kinetic.Collection[4], _id: 162, eventListeners: Object\u2026}\n get_js:1458\nKinetic.Group {nodeType: \"Group\", attrs: Object, children: Kinetic.Collection[4], _id: 167, eventListeners: Object\u2026}\n get_js:1458\nKinetic.Group {nodeType: \"Group\", attrs: Object, children: Kinetic.Collection[4], _id: 172, eventListeners: Object\u2026}\n get_js:1458\nKinetic.Group {nodeType: \"Group\", attrs: Object, children: Kinetic.Collection[4], _id: 177, eventListeners: Object\u2026}\n get_js:1458\n4 get_js:1458\nfunction (func) {\n        for(var n = 0; n < this.length; n++) {\n            func(this[n], n);\n        }\n    } get_js:1458\nfunction () {\n        var arr = [];\n        for(var n = 0; n < this.length; n++) {\n            arr.push(this[n]);\n        }\n        return arr;\n    } get_js:1458\nfunction () {\n                    var len = this.length,\n                        i;\n\n```\n                args = [].slice.call(arguments);\n                for(i = 0; i < len; i++) {\n                    this[i][method].apply(this[i], args);\n                }        \n            } get_js:1458\n```\n\nfunction () {\n                    var len = this.length,\n                        i;\n\n```\n                args = [].slice.call(arguments);\n                for(i = 0; i < len; i++) {\n                    this[i][method].apply(this[i], args);\n                }        \n            } get_js:1458\n```\n\nfunction () {\n                    var len = this.length,\n                        i;\n\n```\n                args = [].slice.call(arguments);\n                for(i = 0; i < len; i++) {\n                    this[i][method].apply(this[i], args);\n                }        \n            } get_js:1458\n```\n. Children has wrong objects:\n\n[Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, Kinetic.Shape, each: function, toArray: function, on: function, off: function, remove: function\u2026]\n. Ohh, children is Kinetic.Collection ... but it has metods and they append to array... May be need other things for this?\nIn 4.4.x this simple array and work well;\n. var any1 = new Animation();\n...\nvar anyN = new Animation();\n\nfor every anyN will call this function! When its RAF (window.requestAnimationFrame ) that ok, but if set FRAF (setTimeout) for each objects will create self timer!\n. ",
    "tianxu0836": "Sounds good!\n. Sounds good!\n. ",
    "Wazabii": "additional info.. i found out that not only drag and drop causes issue, but also with transition. So basically if we try to move the shapes that contains image, the movement will cause memory leaks in firefox AND iOS.\n\nCheers\n. Ah yes.. i tried using that and it works great in improving the drag and drop. But the firefox crashing issue is still there. If I try to drag more than one object at the same time, FF will crash (I'm currently using FF 15.0.1).\n\nI believe it has something to do with the fill property.\n\nThanks.\n. Hi @ericdrowell . Just wondering whether this issue will be patched in the next version of KineticJS?\n\nTHanks.\n. I've tried including shadow to the rect object and it didn't solve the problem.\n\nHere's what i did with the rect with more attributes:\n\nBLOCK_WIDTH = 50; BLOCK_HEIGHT = 50\n\nhighlight = new Kinetic.Rect(\n    {\n        x:0,\n        y:0,\n        width: BLOCK_WIDTH -2,\n        height: BLOCK_HEIGHT -2,\n        stroke: 'red',\n        strokeWidth: 2,\n        opacity:0,\n        cornerRadius: 15,\n        offset: [(BLOCK_WIDTH -2)/2, (BLOCK_HEIGHT -2)/2],\n        shadow:{}\n    });\n\nthen this is what i do with my clone:\n\nvar newHighlight = highlight.clone({stroke: 'green', shadow:{}});\n\nI was thinking to force the clone to not have a shadow but it's not working as i intended.\nHope it can be fixed soon\n\nThanks\n. Hi again.. Not sure if this is a bug or not. Since I stick with kinetic 4.0.1, I've been trying to clone a sprite object as well. But the result: cloned object seems to be a shape rather than a sprite. Is it suppose to be like that?\n\nThanks\n. Wow that would be great. I'm not familiar with github as well so it would be nice if you can deliver it somwhow.. Thanks\n. Edit: Ok i misunderstood your explanation before. 4.7's click event didn't work properly.\n. additional info.. i found out that not only drag and drop causes issue, but also with transition. So basically if we try to move the shapes that contains image, the movement will cause memory leaks in firefox AND iOS.\n\nCheers\n. Ah yes.. i tried using that and it works great in improving the drag and drop. But the firefox crashing issue is still there. If I try to drag more than one object at the same time, FF will crash (I'm currently using FF 15.0.1).\n\nI believe it has something to do with the fill property.\n\nThanks.\n. Hi @ericdrowell . Just wondering whether this issue will be patched in the next version of KineticJS?\n\nTHanks.\n. I've tried including shadow to the rect object and it didn't solve the problem.\n\nHere's what i did with the rect with more attributes:\n\nBLOCK_WIDTH = 50; BLOCK_HEIGHT = 50\n\nhighlight = new Kinetic.Rect(\n    {\n        x:0,\n        y:0,\n        width: BLOCK_WIDTH -2,\n        height: BLOCK_HEIGHT -2,\n        stroke: 'red',\n        strokeWidth: 2,\n        opacity:0,\n        cornerRadius: 15,\n        offset: [(BLOCK_WIDTH -2)/2, (BLOCK_HEIGHT -2)/2],\n        shadow:{}\n    });\n\nthen this is what i do with my clone:\n\nvar newHighlight = highlight.clone({stroke: 'green', shadow:{}});\n\nI was thinking to force the clone to not have a shadow but it's not working as i intended.\nHope it can be fixed soon\n\nThanks\n. Hi again.. Not sure if this is a bug or not. Since I stick with kinetic 4.0.1, I've been trying to clone a sprite object as well. But the result: cloned object seems to be a shape rather than a sprite. Is it suppose to be like that?\n\nThanks\n. Wow that would be great. I'm not familiar with github as well so it would be nice if you can deliver it somwhow.. Thanks\n. Edit: Ok i misunderstood your explanation before. 4.7's click event didn't work properly.\n. ",
    "akbr": "I can confirm FF-specific issues when using image fills. FF's memory usage absolutely explodes when rapidly redrawing layers containing multiple image fills. Too much redrawing (e.g., dragging a layer for 5+ seconds) inevitably leads to a crash.\n\nChrome handles the same with no problem.\n. I voice support for something like this. Turning off the buffers yields _big_ performance gains when animating layers with many nodes. (I've been manually toggling off and on the buffers in my own code for awhile now.)\n\nRelatedly, it might be sensible to have buffers off while dragging by default.\n. I can confirm FF-specific issues when using image fills. FF's memory usage absolutely explodes when rapidly redrawing layers containing multiple image fills. Too much redrawing (e.g., dragging a layer for 5+ seconds) inevitably leads to a crash.\n\nChrome handles the same with no problem.\n. I voice support for something like this. Turning off the buffers yields _big_ performance gains when animating layers with many nodes. (I've been manually toggling off and on the buffers in my own code for awhile now.)\n\nRelatedly, it might be sensible to have buffers off while dragging by default.\n. ",
    "memeyou": "KineticJS uses .on(events, handler) to add event listeners...\n. what i'm stuck on is how to eloquently reverse the operations without doubling the size of all the drawFuncs or using some eval() evil. if we could separate the beginpath/fill from the drawFuncs, we could pass an instance of any shape through attrs.  sprite and image would be handled the same as rect.\n. KineticJS uses .on(events, handler) to add event listeners...\n. what i'm stuck on is how to eloquently reverse the operations without doubling the size of all the drawFuncs or using some eval() evil. if we could separate the beginpath/fill from the drawFuncs, we could pass an instance of any shape through attrs.  sprite and image would be handled the same as rect.\n. ",
    "v1r": "Canvas element is not supported in IE8.  \n. cheers bro! \n. nice one davonium\n. Thanks, adding a hook for this will be awesome! \n. Great! Nothing else as far as I know.\n. Weird! The problem does not occur in win7/chrome\n. @davonium  hmm i understand.  \n. Try to drag it from the border of the shape, it should work. The shape in this case is considered the border  not what inside. \n. 23.0.1271.64  I don't see any of what u mentioned.\n. Canvas element is not supported in IE8.  \n. cheers bro! \n. nice one davonium\n. Thanks, adding a hook for this will be awesome! \n. Great! Nothing else as far as I know.\n. Weird! The problem does not occur in win7/chrome\n. @davonium  hmm i understand.  \n. Try to drag it from the border of the shape, it should work. The shape in this case is considered the border  not what inside. \n. 23.0.1271.64  I don't see any of what u mentioned.\n. ",
    "island205": "@ericdrowell i see, thank you.\n. @ericdrowell i see, thank you.\n. ",
    "0xE1": "Well, for images loading purposes, i've created object that will call callback function when all images are loaded.\nIt is also used to store and access images by image name.\nIf anyone need, i can share it.\n. Well, yes similar, except without visual demonstration and with callback function which will be called when _all_ images were loaded.\n. Well yeah, it's not how i made it at first, it was more like other events, but that's how it ended so it would work.\nI've made it before i have applied changes from https://github.com/ericdrowell/KineticJS/pull/93\nAs for performance, i had 36 images (big images i should say) at once with other elements, that's when getIntersections was slow.\n. There's a problem with this method, if you call stage.draw(); anywhere, this option isn't stored anywhere, so it will be drawn with default composition.\nOther way is to define drawFunc where you will change Composite method and call default shape draw method.\n. Seems it can various on situation, in my case i'm changing stage size, maybe in that case it's being redrawn and this happens.\nI have solved this problem with setDrawFunc method which targets function like this:\nfunction comp_xor(ctx) { ctx.save(); ctx.globalCompositeOperation = \"xor\"; this.drawFunc(ctx); ctx.restore(); }\n\nAlso, if you change globalCompositeOperation somewhere after, stage will be drawn by last set composite option.\n\np.s. in my case there's a lot of manipulations with stage (resizing), layers (hiding, showing, opacity), groups (moving, hiding, showing, opacity) and shapes (all above + resizing), so there's a lot of redrawing...\n. I've tried that, and it turned out horribly because all shapes in layer was drawn with this option, not only those i needed.\nI need to apply compositeoperation to single shape, not whole layer.\nLike i need to apply a linear gradient on top of complex image with transparency, than there's a way with filters, or composite operation.\nIf you need to make this gradient to move, easiest way to do it, is composite operation, if not only.\n. Well yes, except there's no before/afterdraw for shapes. It's only available for layers.\n. Still, not same as i said =)\nKeyword is \"shapes\" as you said, i don't need all shapes, i need single particular shape to be affected.\nif you change glogalCompositeOperation before draw and restore after, it will be applied to ALL shapes within layer.\nif you define drawFunc, it will be applied to exactly this shape.\n. Ah, i see now. Something like that should be mentioned in Change logs since it breaks older realizations.\n. Well, for images loading purposes, i've created object that will call callback function when all images are loaded.\nIt is also used to store and access images by image name.\nIf anyone need, i can share it.\n. Well, yes similar, except without visual demonstration and with callback function which will be called when _all_ images were loaded.\n. Well yeah, it's not how i made it at first, it was more like other events, but that's how it ended so it would work.\nI've made it before i have applied changes from https://github.com/ericdrowell/KineticJS/pull/93\nAs for performance, i had 36 images (big images i should say) at once with other elements, that's when getIntersections was slow.\n. There's a problem with this method, if you call stage.draw(); anywhere, this option isn't stored anywhere, so it will be drawn with default composition.\nOther way is to define drawFunc where you will change Composite method and call default shape draw method.\n. Seems it can various on situation, in my case i'm changing stage size, maybe in that case it's being redrawn and this happens.\nI have solved this problem with setDrawFunc method which targets function like this:\nfunction comp_xor(ctx) { ctx.save(); ctx.globalCompositeOperation = \"xor\"; this.drawFunc(ctx); ctx.restore(); }\n\nAlso, if you change globalCompositeOperation somewhere after, stage will be drawn by last set composite option.\n\np.s. in my case there's a lot of manipulations with stage (resizing), layers (hiding, showing, opacity), groups (moving, hiding, showing, opacity) and shapes (all above + resizing), so there's a lot of redrawing...\n. I've tried that, and it turned out horribly because all shapes in layer was drawn with this option, not only those i needed.\nI need to apply compositeoperation to single shape, not whole layer.\nLike i need to apply a linear gradient on top of complex image with transparency, than there's a way with filters, or composite operation.\nIf you need to make this gradient to move, easiest way to do it, is composite operation, if not only.\n. Well yes, except there's no before/afterdraw for shapes. It's only available for layers.\n. Still, not same as i said =)\nKeyword is \"shapes\" as you said, i don't need all shapes, i need single particular shape to be affected.\nif you change glogalCompositeOperation before draw and restore after, it will be applied to ALL shapes within layer.\nif you define drawFunc, it will be applied to exactly this shape.\n. Ah, i see now. Something like that should be mentioned in Change logs since it breaks older realizations.\n. ",
    "amw": "Moved to a topic branch.\n. Just tested master. The issue is still present there.\n. Because it allows you to avoid redrawing the layer if all you need is to hide its shapes for a while and then bring it back in its current state.\n. Moved to a topic branch.\n. Just tested master. The issue is still present there.\n. Because it allows you to avoid redrawing the layer if all you need is to hide its shapes for a while and then bring it back in its current state.\n. ",
    "robodude": "I've experienced this as well in the Chrome v. 28.0.1500.95 m\n![chrome svg](https://f.cloud.github.com/assets/1719221/969524/22b795f0-05bf-11e3-83a9-0f5a62ca8211.png)\n\nSeems to work as you'd expect in Firefox 23 though\n![ff svg](https://f.cloud.github.com/assets/1719221/969527/270285de-05bf-11e3-9550-90f3097578e5.png)\n\nThis is using kinetic-v4.6.0.min.js\n. @eduplus Thanks for mentioning which version it wasn't reproducible in.\n\nI've experienced something similar in 4.5.2 so I had to revert to 4.3.3 in the mean time. \n. I've noticed this affecting lines as well.\n\nTake this for instance: \n\nhttp://jsfiddle.net/Robodude/VNwW5/1/\nLines aren't being drawn in chrome: \nFirefox and IE it works fine\n\nI'm about to uninstall chrome and test it out in an older version of the browser\n\nJust tested it out in Version 26.0.1410.43 of Chrome on Win 7 64 bit and the colorfull lines are there but not in newer versions of the browser.\n. Yeah, the SVG image is the source for the Kinetic.Image. Unfortunately, I don't have a jsfiddle ready to display this, but I'll put up a small demo up asap.\n. Here's a fiddle: http://jsfiddle.net/4SBMg/1/\n\nIt also demonstrates this issue: https://github.com/ericdrowell/KineticJS/issues/98\n. Yeah I read through #98 but, I just wanted to reference it for posterity. Sounds good though, thanks for the update! :)\n. Great, thanks for the response! The app does make heavy use of shadows and opacity so I'll start converting everything over to use toImage wherever I can.\n. I've experienced this as well in the Chrome v. 28.0.1500.95 m\n![chrome svg](https://f.cloud.github.com/assets/1719221/969524/22b795f0-05bf-11e3-83a9-0f5a62ca8211.png)\n\nSeems to work as you'd expect in Firefox 23 though\n![ff svg](https://f.cloud.github.com/assets/1719221/969527/270285de-05bf-11e3-9550-90f3097578e5.png)\n\nThis is using kinetic-v4.6.0.min.js\n. @eduplus Thanks for mentioning which version it wasn't reproducible in.\n\nI've experienced something similar in 4.5.2 so I had to revert to 4.3.3 in the mean time. \n. I've noticed this affecting lines as well.\n\nTake this for instance: \n\nhttp://jsfiddle.net/Robodude/VNwW5/1/\nLines aren't being drawn in chrome: \nFirefox and IE it works fine\n\nI'm about to uninstall chrome and test it out in an older version of the browser\n\nJust tested it out in Version 26.0.1410.43 of Chrome on Win 7 64 bit and the colorfull lines are there but not in newer versions of the browser.\n. Yeah, the SVG image is the source for the Kinetic.Image. Unfortunately, I don't have a jsfiddle ready to display this, but I'll put up a small demo up asap.\n. Here's a fiddle: http://jsfiddle.net/4SBMg/1/\n\nIt also demonstrates this issue: https://github.com/ericdrowell/KineticJS/issues/98\n. Yeah I read through #98 but, I just wanted to reference it for posterity. Sounds good though, thanks for the update! :)\n. Great, thanks for the response! The app does make heavy use of shadows and opacity so I'll start converting everything over to use toImage wherever I can.\n. ",
    "mreq": "Oh, I see. Thanks!\n. Oh, I see. Thanks!\n. ",
    "kanimaru": "Is there some news to this problem? This is once bad thing in this awesome framework :]\n. Is there some news to this problem? This is once bad thing in this awesome framework :]\n. ",
    "macl": "Thanks for that piece of code, davonium. I'm trying to make this work for a model (a shape group that I need to repeat x times), that is composed in javascript and then cloned and added to the layer. I invoke the compositing like this:\n\nvar model = new Kinetic.Group();\nvar sourceShape= new Kinetic.Rect(...);\n// This should make a hole over the previous shape\nvar destShape = makeShapeComposite(new Kinetic.Rect(...),\"xor\"); \n\nstage.add(layer);\nmodel.add(sourceShape);\nmodel.add(destShape);\nfor (var i=0;i<config.numShapes;i++) {\n______ layer.add(model.clone());\n}\nlayer.draw();\n\n(It's quite simplified, I'll try to explain myself better later with a fiddle) When used like that, the compose operation does not work as expected, just draws every shape in normal composition. But if I add the original composed model to the layer, not a clone of it, it draws the way i'm looking for (I can see the background through the other shape).\n\nI guess cloned models lack a context in the moment of cloning, and then use the default mode for composing. Any help on how could this be achieved?\n\nSorry for the long comment and thanks in advance\n. I've found a different, but maybe related, bug in the clone() method. I don't know if I should write this here or file a new issue. If this is not the place, please excuse me. Just tell me and I'll create a new issue for it.\n\nI tried to clone a group where one of the Rects had a custom drawFunc declared. When I cloned the group, the custom drawFunc was lost even from the source object!\n\nAfter pulling my hair for some time with different tests, by tracing the clone process with Firebug, I think I've found the problem to rely on line 4481 of the 4.0.5 source (in the case of Rects):\n\n``` javascript\n     config.drawFunc = this.drawFunc;\n```\n\nThe _initRect function receives the config data from the source, and then overwrites the original config.drawFunc with the default prototype drawFunc, which overwrites the reference to the custom function. My solution has been quite simple, sure there's a better or more elegant way:\n\n``` javascript\nif (!config.drawFunc) {\n     config.drawFunc = this.drawFunc;\n}\n```\n\nThe same should be done for every Shape derivatives prototype, so they can be cloned along with their custom function.\n\nBeing quite a newbie in Javascript, I maybe totally wrong. But I did not find another way to use clone() for my purposes. Hope it helps.\n. @ericdrowell thanks for your answer. In my case, I am creating somewhat complex objects based on numeric parameters, one of which should have a hole in the middle that should allow to see the background through it. It's quite useful for me to use the default rectangular method, but I need to be change the context composition mode to xor beforehand. That's what my custom draw function does. As you can see, there are several scenarios where cloning this function would be useful for the developer. \n\nI can understand this to be a design criteria. Anyway, I don't get to see how cloning a shape should overwrite the _source_ function. I suppose you agree with me on that one. \n. Thanks for this. I was scratching my head for some time about this problem. Where can the fixed source be downloaded? I keep getting the old code when I download it from the main page (http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.3.1.js).\n\nIn the meantime, apart from line 672, the same correction should be applied in lines 691, 701, 711 and 796, in order to make it work on Chrome 26.0.1397.2 dev-m. It still works in Firefox 18 and IE9. Hope this helps.\n. OK, thanks. I thought it was already patched on the source. I'll stick with my corrections until next release. Thanks again.\n. Thanks for that piece of code, davonium. I'm trying to make this work for a model (a shape group that I need to repeat x times), that is composed in javascript and then cloned and added to the layer. I invoke the compositing like this:\n\nvar model = new Kinetic.Group();\nvar sourceShape= new Kinetic.Rect(...);\n// This should make a hole over the previous shape\nvar destShape = makeShapeComposite(new Kinetic.Rect(...),\"xor\"); \n\nstage.add(layer);\nmodel.add(sourceShape);\nmodel.add(destShape);\nfor (var i=0;i<config.numShapes;i++) {\n______ layer.add(model.clone());\n}\nlayer.draw();\n\n(It's quite simplified, I'll try to explain myself better later with a fiddle) When used like that, the compose operation does not work as expected, just draws every shape in normal composition. But if I add the original composed model to the layer, not a clone of it, it draws the way i'm looking for (I can see the background through the other shape).\n\nI guess cloned models lack a context in the moment of cloning, and then use the default mode for composing. Any help on how could this be achieved?\n\nSorry for the long comment and thanks in advance\n. I've found a different, but maybe related, bug in the clone() method. I don't know if I should write this here or file a new issue. If this is not the place, please excuse me. Just tell me and I'll create a new issue for it.\n\nI tried to clone a group where one of the Rects had a custom drawFunc declared. When I cloned the group, the custom drawFunc was lost even from the source object!\n\nAfter pulling my hair for some time with different tests, by tracing the clone process with Firebug, I think I've found the problem to rely on line 4481 of the 4.0.5 source (in the case of Rects):\n\n``` javascript\n     config.drawFunc = this.drawFunc;\n```\n\nThe _initRect function receives the config data from the source, and then overwrites the original config.drawFunc with the default prototype drawFunc, which overwrites the reference to the custom function. My solution has been quite simple, sure there's a better or more elegant way:\n\n``` javascript\nif (!config.drawFunc) {\n     config.drawFunc = this.drawFunc;\n}\n```\n\nThe same should be done for every Shape derivatives prototype, so they can be cloned along with their custom function.\n\nBeing quite a newbie in Javascript, I maybe totally wrong. But I did not find another way to use clone() for my purposes. Hope it helps.\n. @ericdrowell thanks for your answer. In my case, I am creating somewhat complex objects based on numeric parameters, one of which should have a hole in the middle that should allow to see the background through it. It's quite useful for me to use the default rectangular method, but I need to be change the context composition mode to xor beforehand. That's what my custom draw function does. As you can see, there are several scenarios where cloning this function would be useful for the developer. \n\nI can understand this to be a design criteria. Anyway, I don't get to see how cloning a shape should overwrite the _source_ function. I suppose you agree with me on that one. \n. Thanks for this. I was scratching my head for some time about this problem. Where can the fixed source be downloaded? I keep getting the old code when I download it from the main page (http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.3.1.js).\n\nIn the meantime, apart from line 672, the same correction should be applied in lines 691, 701, 711 and 796, in order to make it work on Chrome 26.0.1397.2 dev-m. It still works in Firefox 18 and IE9. Hope this helps.\n. OK, thanks. I thought it was already patched on the source. I'll stick with my corrections until next release. Thanks again.\n. ",
    "fmoggia": "Thanks for your reply. So you're saying that the semantic of remove is currently to destroy the node.\nSo probably I should be using the node method moveTo instead of removing and adding the node.\nIf this is the case the issue can be closed just by adding a comment under the remove method that clarifies the behavior and reference moveTo.\n. Thanks for your reply. So you're saying that the semantic of remove is currently to destroy the node.\nSo probably I should be using the node method moveTo instead of removing and adding the node.\nIf this is the case the issue can be closed just by adding a comment under the remove method that clarifies the behavior and reference moveTo.\n. ",
    "peonone": "Thanks,now it's ok.\nI referenced  the API Documentation (v3.8.2).\n. Thanks,now it's ok.\nI referenced  the API Documentation (v3.8.2).\n. ",
    "vorpalhex": "Hey, can we re-open this issue? Hardcoded width and heights break responsive layouts. It'd be great if we could disable default styles so we can write our own without having to do overrides.\n. Hey, can we re-open this issue? Hardcoded width and heights break responsive layouts. It'd be great if we could disable default styles so we can write our own without having to do overrides.\n. ",
    "ginhanlabs": "I'm getting a similar problem with the behaviour also. I can get it to alert, inside the onclick without the imageBuffer statements. The problem is when I try to use txt.setText within onclick function, it can't see the txt object. i'm using kinetic-v4.0.3\n. I'm getting a similar problem with the behaviour also. I can get it to alert, inside the onclick without the imageBuffer statements. The problem is when I try to use txt.setText within onclick function, it can't see the txt object. i'm using kinetic-v4.0.3\n. ",
    "nitinhayaran": "thanks @davonium with this hack I can achieve the desired result. \n\nAbout stopPropagation(), its supported by browsers, not just jQuery. You can check it at \nhttps://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation \nand http://www.quirksmode.org/js/events_order.html\n\nSo i think it should work atleast on supported browsers \n. thanks @davonium with this hack I can achieve the desired result. \n\nAbout stopPropagation(), its supported by browsers, not just jQuery. You can check it at \nhttps://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation \nand http://www.quirksmode.org/js/events_order.html\n\nSo i think it should work atleast on supported browsers \n. ",
    "cjennison": "Is there any update on the bug fix, Eric?\n. Is there any update on the bug fix, Eric?\n. ",
    "lazerblade01": "I've noticed this issue as well. The easiest fix is simply to modify your existing KineticJS file to include the following:\n\nLine 4144 - \n\nchange:\n    if(config.offset !== undefined) {\nto:\n    if(config && config.offset !== undefined) {\n\nand line 4164 -\nchange:\n    if(fill.offset !== undefined) {\nto:\n    if(fill && fill.offset !== undefined) {\n\nThese changes should be included in the next release as a fix for this (please, Eric).\n\nPS: Line numbers correspond to version 4.0.3. Do a search to locate them in 4.0.4 if you've updated.\n. Same problem here. Cloning really doesn't work the way one might think. It almost seems to work better to get the object you wish to clone and simply use its more common properties, or the ones you really want, to sort of \"duplicate\" it. Transparent .png's are horrible cloned - they turn all black! I think at this point perhaps clone needs to be revisited and there needs to be a separation of user-defined values and default / auto values, so when you DO clone, you're basically just copying previously-set values.\n. @ericdrowell I think the bigger issue with cloning is the way it clones png images with transparency. I have a glass image with highlights around the edges but most of the image is almost transparent (approx. 10% transparency with a white base). The clone looks like it's basically black, though the pure white highlights where there's no transparency do show up.\n. I actually have group clipping working, at least as much as I need it to. Since the forums have been removed, I can't post code there or provide a plugin, but I do have the code to do this. And I'm not very familiar with github so I'm not sure how to submit code for review and inclusion.\n\nThe code I have isn't true group clipping since groups don't have a width or height, but my code includes the creating of a clipping rectangle to \"define\" the group's width and height, and includes the ability to clip a group within the clip group. The only issue with this is that the shapes must be moved, instead of moving the group. I have code to do that as well though.\n\nLet me know if you want to review the code, and perhaps I'll look around here and figure out how to commit code.\n. I would think this is actually a logical response, since removing the parent also removes all children contained within it. This applies to groups and layers both. Once the parent is removed, assigning the child to a variable or console logging the child would result in an undefined value. I don't think KineticJS should have to test for whether a shape is defined or not before removing it - that's up to the coder using the library.\n. @soulBit I believe I understand what you're saying, but here's the question I guess - are you saying that when a parent or container is removed, the children should still be accessible? Granted, when you create a group or layer and add children to that layer, each child is a variable (object), and that variable exists in whatever scope it was originally set, but technically if it is added to a container then the container is removed, the child should NOT have a reference within the stage. The variable may still exist, but only as a collection of values, not as an actual reference to an object / container / shape on the stage. Think of it in simpler terms - if this were jQuery and you created a div, then added an image to the div, then removed the div - all using jQuery - if you then tried to reference the image (NOT the variable used to create the image but the \"physical\" image in the DOM), would you get a similar response?\n. Sorry but I don't follow. Why would a bound event work fine on a group that only contains objects (Kinetic shapes with draw functions) but not on a group that contains groups, each of which contains shapes?\n. I'm not seeing any issues with using custom non-standard fonts. The one I'm using shows up fine. One thing you may need to consider is that an @font-face font has to load a file in order to display, so if you're changing your font using a select but the font isn't loaded when you change it, it won't show up the way it should. I've found that adding a hidden or offscreen div with a single period (.) in it and a class that utilizes the font for each @font-face font I wish to include in the stage works quite well - it forces the DOM to load all of your font files on document.ready.\n\nAs for anti-aliasing, the fonts I've used so far show up perfectly. Are you sure the font you're using, and the browser you're using, should display the font crisper? Maybe do a side-by-side comparison of the text you're displaying - one in a div, the other on the canvas.\n. Unfortunately, I'm using a Mac at work and in Chrome everything looks fine. However, assuming you're using a PC doesn't really matter, as the text should render the same both in the canvas and in the DOM.\n\nCan you provide the @font-face CSS code as you're using it? Perhaps you missed something. Also, which font are you using? I noticed that Chrome doesn't like the format tag in @font-face (adding it actually broke my font). Too bad too, you almost have to use some sort of browser selection / distinction when using any CSS these days. They all render different and all seem to follow their own rules when it comes to the newer W3C stuff (CSS3 / HTML5). And in some cases, even the old stuff (pixel alignment is a pain when using position:absolute).\n. These can be set in the css for the page.\n\n```\n@font-face {\nfont-family: 'Exo';\nsrc: url('/css/fonts/Exo-Medium-webfont.eot');\nsrc: url('/css/fonts/Exo-Medium-webfont.eot?#iefix') format('embedded-opentype'),\n     url('/css/fonts/Exo-Medium-webfont.woff') format('woff'),\n     url('/css/fonts/Exo-Medium.otf') format('opentype'),\n     url('/css/fonts/Exo-Medium-webfont.svg') format('svg');\nfont-weight: normal;\nfont-style: normal;\n}\n@font-face {\nfont-family: 'Exo';\nsrc: url('/css/fonts/Exo-Bold-webfont..eot');\nsrc: url('/css/fonts/Exo-Bold-webfont.eot?#iefix') format('embedded-opentype'),\n     url('/css/fonts/Exo-Bold-webfont.woff') format('woff'),\n     url('/css/fonts/Exo-Bold.otf') format('opentype'),\n     url('/css/fonts/Exo-Bold-webfont.svg') format('svg');\nfont-weight: bold;\nfont-style: normal;\n}\n```\n. Sorry, Eric, I think we both misunderstood. Of course Kinetic doesn't use jQuery, what I meant was Kinetic has similar functions to jQuery in that it uses both on() and off() for event handlers. What I was proposing was that Kinetic not require a space-separated list of events previously bound using on() in order to remove them using off(), and instead it simply assumes that if no string is supplied (typesStr) that it remove all user-attached events from the Node.\n. Yes. jQuery uses off() to clear all, or off(event) to clear a single\nlistener. Ironically, because jQuery also uses selectors, your\nevent.nameworks in the same way jQuery does as well. I ran into this\nissue when\nremoving a group that shared its name with another group where the removed\ngroup had events attached. My functions were still listening, so I tried\noff() prior to removing and because I didn't pass named events it threw an\nerror. So I tried my fix but before doing so I checked the eventListeners\nnode so I didn't remove something I hadn't set myself. Sorry for the\nconfusion.\nOn Jan 15, 2013 4:43 PM, \"Eric Rowell\" notifications@github.com wrote:\n\n> ah interesting okay, that makes more sense. Does jQuery do this? I suppose\n> this is needed in order to make destructors? Reopening ticket, thanks.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/229#issuecomment-12290998.\n. I've noticed this issue as well. The easiest fix is simply to modify your existing KineticJS file to include the following:\n\nLine 4144 - \n\nchange:\n    if(config.offset !== undefined) {\nto:\n    if(config && config.offset !== undefined) {\n\nand line 4164 -\nchange:\n    if(fill.offset !== undefined) {\nto:\n    if(fill && fill.offset !== undefined) {\n\nThese changes should be included in the next release as a fix for this (please, Eric).\n\nPS: Line numbers correspond to version 4.0.3. Do a search to locate them in 4.0.4 if you've updated.\n. Same problem here. Cloning really doesn't work the way one might think. It almost seems to work better to get the object you wish to clone and simply use its more common properties, or the ones you really want, to sort of \"duplicate\" it. Transparent .png's are horrible cloned - they turn all black! I think at this point perhaps clone needs to be revisited and there needs to be a separation of user-defined values and default / auto values, so when you DO clone, you're basically just copying previously-set values.\n. @ericdrowell I think the bigger issue with cloning is the way it clones png images with transparency. I have a glass image with highlights around the edges but most of the image is almost transparent (approx. 10% transparency with a white base). The clone looks like it's basically black, though the pure white highlights where there's no transparency do show up.\n. I actually have group clipping working, at least as much as I need it to. Since the forums have been removed, I can't post code there or provide a plugin, but I do have the code to do this. And I'm not very familiar with github so I'm not sure how to submit code for review and inclusion.\n\nThe code I have isn't true group clipping since groups don't have a width or height, but my code includes the creating of a clipping rectangle to \"define\" the group's width and height, and includes the ability to clip a group within the clip group. The only issue with this is that the shapes must be moved, instead of moving the group. I have code to do that as well though.\n\nLet me know if you want to review the code, and perhaps I'll look around here and figure out how to commit code.\n. I would think this is actually a logical response, since removing the parent also removes all children contained within it. This applies to groups and layers both. Once the parent is removed, assigning the child to a variable or console logging the child would result in an undefined value. I don't think KineticJS should have to test for whether a shape is defined or not before removing it - that's up to the coder using the library.\n. @soulBit I believe I understand what you're saying, but here's the question I guess - are you saying that when a parent or container is removed, the children should still be accessible? Granted, when you create a group or layer and add children to that layer, each child is a variable (object), and that variable exists in whatever scope it was originally set, but technically if it is added to a container then the container is removed, the child should NOT have a reference within the stage. The variable may still exist, but only as a collection of values, not as an actual reference to an object / container / shape on the stage. Think of it in simpler terms - if this were jQuery and you created a div, then added an image to the div, then removed the div - all using jQuery - if you then tried to reference the image (NOT the variable used to create the image but the \"physical\" image in the DOM), would you get a similar response?\n. Sorry but I don't follow. Why would a bound event work fine on a group that only contains objects (Kinetic shapes with draw functions) but not on a group that contains groups, each of which contains shapes?\n. I'm not seeing any issues with using custom non-standard fonts. The one I'm using shows up fine. One thing you may need to consider is that an @font-face font has to load a file in order to display, so if you're changing your font using a select but the font isn't loaded when you change it, it won't show up the way it should. I've found that adding a hidden or offscreen div with a single period (.) in it and a class that utilizes the font for each @font-face font I wish to include in the stage works quite well - it forces the DOM to load all of your font files on document.ready.\n\nAs for anti-aliasing, the fonts I've used so far show up perfectly. Are you sure the font you're using, and the browser you're using, should display the font crisper? Maybe do a side-by-side comparison of the text you're displaying - one in a div, the other on the canvas.\n. Unfortunately, I'm using a Mac at work and in Chrome everything looks fine. However, assuming you're using a PC doesn't really matter, as the text should render the same both in the canvas and in the DOM.\n\nCan you provide the @font-face CSS code as you're using it? Perhaps you missed something. Also, which font are you using? I noticed that Chrome doesn't like the format tag in @font-face (adding it actually broke my font). Too bad too, you almost have to use some sort of browser selection / distinction when using any CSS these days. They all render different and all seem to follow their own rules when it comes to the newer W3C stuff (CSS3 / HTML5). And in some cases, even the old stuff (pixel alignment is a pain when using position:absolute).\n. These can be set in the css for the page.\n\n```\n@font-face {\nfont-family: 'Exo';\nsrc: url('/css/fonts/Exo-Medium-webfont.eot');\nsrc: url('/css/fonts/Exo-Medium-webfont.eot?#iefix') format('embedded-opentype'),\n     url('/css/fonts/Exo-Medium-webfont.woff') format('woff'),\n     url('/css/fonts/Exo-Medium.otf') format('opentype'),\n     url('/css/fonts/Exo-Medium-webfont.svg') format('svg');\nfont-weight: normal;\nfont-style: normal;\n}\n@font-face {\nfont-family: 'Exo';\nsrc: url('/css/fonts/Exo-Bold-webfont..eot');\nsrc: url('/css/fonts/Exo-Bold-webfont.eot?#iefix') format('embedded-opentype'),\n     url('/css/fonts/Exo-Bold-webfont.woff') format('woff'),\n     url('/css/fonts/Exo-Bold.otf') format('opentype'),\n     url('/css/fonts/Exo-Bold-webfont.svg') format('svg');\nfont-weight: bold;\nfont-style: normal;\n}\n```\n. Sorry, Eric, I think we both misunderstood. Of course Kinetic doesn't use jQuery, what I meant was Kinetic has similar functions to jQuery in that it uses both on() and off() for event handlers. What I was proposing was that Kinetic not require a space-separated list of events previously bound using on() in order to remove them using off(), and instead it simply assumes that if no string is supplied (typesStr) that it remove all user-attached events from the Node.\n. Yes. jQuery uses off() to clear all, or off(event) to clear a single\nlistener. Ironically, because jQuery also uses selectors, your\nevent.nameworks in the same way jQuery does as well. I ran into this\nissue when\nremoving a group that shared its name with another group where the removed\ngroup had events attached. My functions were still listening, so I tried\noff() prior to removing and because I didn't pass named events it threw an\nerror. So I tried my fix but before doing so I checked the eventListeners\nnode so I didn't remove something I hadn't set myself. Sorry for the\nconfusion.\nOn Jan 15, 2013 4:43 PM, \"Eric Rowell\" notifications@github.com wrote:\n\n> ah interesting okay, that makes more sense. Does jQuery do this? I suppose\n> this is needed in order to make destructors? Reopening ticket, thanks.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/229#issuecomment-12290998.\n. ",
    "KorvinSzanto": "This issue was causing a bit of trouble for me, lazerblade's fix seemed to fix it though. \n\n@ericdrowell, is there a better way to store states than cloning  the entire object? It seems like this ends up being a bit heavy what with dom injection and subsequent dom removal...\n\nCheck out my [stackoverflow question](http://stackoverflow.com/questions/13183722/unable-to-create-accurate-copy-of-a-kinetic-js-stage-layer/13184468#13184468), the clone issue was resolved after finding this issue, but with it working, it seems quite heavy. any ideas?\n. @lazerblade01, interestingly, I'm getting shadows applied to every child of the layers I'm cloning.\n. I wasn't so much thinking of changing the functionality of getWidth, but rather adding a function for getDrawnWidth or something similar.\n\nWouldn't `node.setWidth(100 / node.getScale().x);` scale the node twice?\n. Yeah, sorry check it in chrome.\n. Also, I would've done toDataURL, but I'd just be recreating toImage by creating an image object and throwing it on the page.\n. Chrome: \n![whatiget](https://f.cloud.github.com/assets/1007419/193947/18b9acfe-7f97-11e2-9489-f41b7af67fdf.png)\nFirefox:\n![whatiwant](https://f.cloud.github.com/assets/1007419/193948/18ce0b7c-7f97-11e2-9d0e-8a2d3fc7dead.png)\n\nThe image should be an exact representation of the canvas, instead, it's a representation at 4x scale width 2x width and height.\n. Was this clear enough?\n. I was getting this issue all day yesterday, after a restart of my retina mbp, it works fine...\nClosing for now.\n. Can you reproduce this in a jsfiddle?\n. @ericdrowell I have figured out the exact cause of this issue; rendering on a retina display causes the save to fail, rendering on a standard display works as expected.\nhttp://jsfiddle.net/x7XUd/\n. Were the other computers the same OS? I run a large canvas without speed issues on ff and chrome.\n. This may simply be the way that your application is written, can you reproduce this in a minimal jsfiddle?\n. Can you get a video of this happening? I'm not sure I understand exactly what your issue is.\n. What is a use case for this?\n. Can you reproduce this in a jsfiddle so that I can better understand your issue?\n. This is a fix for issue #298 \n. @ericdrowell, are you going to fix this? This is a serious issue for our use case.\n. No, retina display macbook pro.\nOn Apr 13, 2013 1:22 AM, \"Eric Rowell\" notifications@github.com wrote:\n\n> Reopening this because I can't replicate the issue for older versions of\n> KineticJS. I'm assuming that you're using an Android device correct?\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/pull/303#issuecomment-16329565\n> .\n. This does appear to be fixed in http://kinetic.com/dist/kinetic-vcurrent.js. \nThank you very much!\n. I see the issue, this looks to be because `dd.node` is undefined. What you are trying to do in this jsfiddle is not going to work under ideal circumstances however, because if you're dragging, you won't be firing \"mouseover\" as it only fires when the mouse enters the element.\n\nTo achieve what you want, you should use `dragstart` and `dragend`: http://jsfiddle.net/hWzJ4/15/\n\nI'll get this fix in soon.\n. If https://github.com/ericdrowell/KineticJS/blob/master/src/Node.js#L1083-L1094 can serve a clone of the default object, this would not be an issue.\n. This issue was causing a bit of trouble for me, lazerblade's fix seemed to fix it though. \n\n@ericdrowell, is there a better way to store states than cloning  the entire object? It seems like this ends up being a bit heavy what with dom injection and subsequent dom removal...\n\nCheck out my [stackoverflow question](http://stackoverflow.com/questions/13183722/unable-to-create-accurate-copy-of-a-kinetic-js-stage-layer/13184468#13184468), the clone issue was resolved after finding this issue, but with it working, it seems quite heavy. any ideas?\n. @lazerblade01, interestingly, I'm getting shadows applied to every child of the layers I'm cloning.\n. I wasn't so much thinking of changing the functionality of getWidth, but rather adding a function for getDrawnWidth or something similar.\n\nWouldn't `node.setWidth(100 / node.getScale().x);` scale the node twice?\n. Yeah, sorry check it in chrome.\n. Also, I would've done toDataURL, but I'd just be recreating toImage by creating an image object and throwing it on the page.\n. Chrome: \n![whatiget](https://f.cloud.github.com/assets/1007419/193947/18b9acfe-7f97-11e2-9489-f41b7af67fdf.png)\nFirefox:\n![whatiwant](https://f.cloud.github.com/assets/1007419/193948/18ce0b7c-7f97-11e2-9d0e-8a2d3fc7dead.png)\n\nThe image should be an exact representation of the canvas, instead, it's a representation at 4x scale width 2x width and height.\n. Was this clear enough?\n. I was getting this issue all day yesterday, after a restart of my retina mbp, it works fine...\nClosing for now.\n. Can you reproduce this in a jsfiddle?\n. @ericdrowell I have figured out the exact cause of this issue; rendering on a retina display causes the save to fail, rendering on a standard display works as expected.\nhttp://jsfiddle.net/x7XUd/\n. Were the other computers the same OS? I run a large canvas without speed issues on ff and chrome.\n. This may simply be the way that your application is written, can you reproduce this in a minimal jsfiddle?\n. Can you get a video of this happening? I'm not sure I understand exactly what your issue is.\n. What is a use case for this?\n. Can you reproduce this in a jsfiddle so that I can better understand your issue?\n. This is a fix for issue #298 \n. @ericdrowell, are you going to fix this? This is a serious issue for our use case.\n. No, retina display macbook pro.\nOn Apr 13, 2013 1:22 AM, \"Eric Rowell\" notifications@github.com wrote:\n\n> Reopening this because I can't replicate the issue for older versions of\n> KineticJS. I'm assuming that you're using an Android device correct?\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/pull/303#issuecomment-16329565\n> .\n. This does appear to be fixed in http://kinetic.com/dist/kinetic-vcurrent.js. \nThank you very much!\n. I see the issue, this looks to be because `dd.node` is undefined. What you are trying to do in this jsfiddle is not going to work under ideal circumstances however, because if you're dragging, you won't be firing \"mouseover\" as it only fires when the mouse enters the element.\n\nTo achieve what you want, you should use `dragstart` and `dragend`: http://jsfiddle.net/hWzJ4/15/\n\nI'll get this fix in soon.\n. If https://github.com/ericdrowell/KineticJS/blob/master/src/Node.js#L1083-L1094 can serve a clone of the default object, this would not be an issue.\n. ",
    "TimoWillemsen": "I'm so sorry, that's right. I used dragend. Is it supposed to draw after dragend?\n. I'm so sorry, that's right. I used dragend. Is it supposed to draw after dragend?\n. ",
    "numbers1311407": "This problem isn't specific to KineticJS.  I found it to happen in EaselJS as well (which I'd moved to for different reasons), which suggests that it may be a bug with Android 4.x's handling of canvas.\n\nIf you're still having problems, check out [this stackoverflow question](http://stackoverflow.com/questions/12804710/android-4-html5-canvas-not-redrawing).  An answerer found, using KineticJS, that drawing the draggable shape on top of a background eliminated the problem.  The same solution worked for me with EaselJS.\n. This problem isn't specific to KineticJS.  I found it to happen in EaselJS as well (which I'd moved to for different reasons), which suggests that it may be a bug with Android 4.x's handling of canvas.\n\nIf you're still having problems, check out [this stackoverflow question](http://stackoverflow.com/questions/12804710/android-4-html5-canvas-not-redrawing).  An answerer found, using KineticJS, that drawing the draggable shape on top of a background eliminated the problem.  The same solution worked for me with EaselJS.\n. ",
    "hur0n": "Thank you for the hint. I'll check it out. If other projects face the same behaviour then it seems like this is an Android bug/issue but could it be fixed inside the KineticJS lib? I mean wouldn't it be easier to fix it at this level? (for the user) \n. I can confirm this. I am also working with stage sizes near fullscreen size and FF (regardless of version) performs very bad. Chrome works best, followed by IE9 (IE10 needs to be tested), Safari, Opera and then FF.\n\nIt does not matter if I test on Linux X86/X64 or Windows XP/7. FF lags on all platforms, Chrome does not. If I had to guess, then I'd say there is something wrong with hardware acceleration in FF.\n. Same issues here with 27.0.1453.94 m on W7x64.\nNo issues with 27.0.1453.93 on Mint Linux 13 :)\n. I do have the same issue (https://github.com/ericdrowell/KineticJS/issues/130). I cant use my application on Android.\n\nThe problem exists in every version of Android 4.0.4+ and Google does not give a damn about this :(\nDo you use KineticJS in a WebView?\n\nI asked this once but ... Is it possible to fix this issue directly in KineticJS? I guess its possible but would require too much time!? \n. Thank you for the hint. I'll check it out. If other projects face the same behaviour then it seems like this is an Android bug/issue but could it be fixed inside the KineticJS lib? I mean wouldn't it be easier to fix it at this level? (for the user) \n. I can confirm this. I am also working with stage sizes near fullscreen size and FF (regardless of version) performs very bad. Chrome works best, followed by IE9 (IE10 needs to be tested), Safari, Opera and then FF.\n\nIt does not matter if I test on Linux X86/X64 or Windows XP/7. FF lags on all platforms, Chrome does not. If I had to guess, then I'd say there is something wrong with hardware acceleration in FF.\n. Same issues here with 27.0.1453.94 m on W7x64.\nNo issues with 27.0.1453.93 on Mint Linux 13 :)\n. I do have the same issue (https://github.com/ericdrowell/KineticJS/issues/130). I cant use my application on Android.\n\nThe problem exists in every version of Android 4.0.4+ and Google does not give a damn about this :(\nDo you use KineticJS in a WebView?\n\nI asked this once but ... Is it possible to fix this issue directly in KineticJS? I guess its possible but would require too much time!? \n. ",
    "maliberty": "Would you say something about why you aren't \"planning on supporting composite operations via an API\"?  \n. Would you say something about why you aren't \"planning on supporting composite operations via an API\"?  \n. ",
    "jethroflanagan": "I think other systems use an extrusion technique. For each angle where 2 lines meet, you can calculate a \"normal\" facing away from the fill (based on the shape winding or something) of X pixels length. Once you've calculated all of these extrusion points, you can join them as another shape, subtract the actual object shape from it (in case the shape has opacity at any point) and fill it.\n\nThe same can be done for inner fill, just point the normals inwards. This can probably be extended to work with bezier angles although the calculations would be pretty heavy to recalculate the bezier control points based on the \"normal\" vertices' distance vs original shape vertices' distance.\n. Sure, if it can be done via plugin, that keeps the API leaner and tidier. \n. I think other systems use an extrusion technique. For each angle where 2 lines meet, you can calculate a \"normal\" facing away from the fill (based on the shape winding or something) of X pixels length. Once you've calculated all of these extrusion points, you can join them as another shape, subtract the actual object shape from it (in case the shape has opacity at any point) and fill it.\n\nThe same can be done for inner fill, just point the normals inwards. This can probably be extended to work with bezier angles although the calculations would be pretty heavy to recalculate the bezier control points based on the \"normal\" vertices' distance vs original shape vertices' distance.\n. Sure, if it can be done via plugin, that keeps the API leaner and tidier. \n. ",
    "ImranBug": "This plugin seriously need better clipping techniques -- specially for custom shapes.\n. I was having similar problems with clipping -- since we cant use custom shapes for clipping on images.\nI created a custom shape and used fill property... check this **[FIDDLE](jsfiddle.net/LNeML/419/)**\n\nYou can also check my question & answer on **[Stack overflow](http://stackoverflow.com/questions/23931463/kineticjs-custom-shape-cliping-masking-image-animating-clipped-area/23932537?noredirect=1#comment36863494_23932537)**.\n\nHope this help.\n. This plugin seriously need better clipping techniques -- specially for custom shapes.\n. I was having similar problems with clipping -- since we cant use custom shapes for clipping on images.\nI created a custom shape and used fill property... check this **[FIDDLE](jsfiddle.net/LNeML/419/)**\n\nYou can also check my question & answer on **[Stack overflow](http://stackoverflow.com/questions/23931463/kineticjs-custom-shape-cliping-masking-image-animating-clipped-area/23932537?noredirect=1#comment36863494_23932537)**.\n\nHope this help.\n. ",
    "soulBit": "Thanks for taking a look - I tested that fiddle and still get [the same error](http://i.imgur.com/vJanw.jpg) if I have not opened the debugger yet. Once it's been opened (even if I have chosen \"stop debugging\") then it will work correctly and I have [the alerts appear](http://i.imgur.com/va8JV.jpg) as expected. Updating the fiddle to include the extra \"window.console\" check also [fixes the issue](http://jsfiddle.net/4aED9/3/) for me.\n\nI'm on Windows 7, 64bit if that helps.\n. Will do, thanks!\n. @lazerblade01 I think I probably didn't provide enough detail here - the issue is that when \"container.remove()\" is called, it removes the Node from its children, but the reference to the parent is never unset from the child. Then when \"child.remove()\" is called, an error is thrown because it thinks that it is still the child of the container (and tries to access an out of bounds index in there. The ideal behaviour would be for the container to also clear the reference in each of its children, and simply not do anything when \"child.remove()\" is called if it has already been removed.\n. It's true that when a container is removed the children shouldn't be accessible from the stage, but I think what I was hoping for was that this change would also be reflected in the \"Node.parent\" property (by setting to null or otherwise). I've already coded around this like you mentioned above, so it isn't too much issue - it just seemed a bit inconsistent that's all.\n. Thanks for taking a look at this - the particular case I was experiencing issues with was when trying to test out different sizes for some assets that I am pulling from Sprite sheets (all using the same frame sizes). Whilst I can resize them manually by scaling the sheets themselves, it's pretty time consuming since I have 10 or more that are used. I see the width/height override as only being useful in cases like this, and for normal Sprite usage like in your example this would be left unset so that the frame size is used instead.\n\nMaybe these properties would be better named as \"overrideWidth\" and \"overrideHeight\"?\n. Thanks for taking a look - I tested that fiddle and still get [the same error](http://i.imgur.com/vJanw.jpg) if I have not opened the debugger yet. Once it's been opened (even if I have chosen \"stop debugging\") then it will work correctly and I have [the alerts appear](http://i.imgur.com/va8JV.jpg) as expected. Updating the fiddle to include the extra \"window.console\" check also [fixes the issue](http://jsfiddle.net/4aED9/3/) for me.\n\nI'm on Windows 7, 64bit if that helps.\n. Will do, thanks!\n. @lazerblade01 I think I probably didn't provide enough detail here - the issue is that when \"container.remove()\" is called, it removes the Node from its children, but the reference to the parent is never unset from the child. Then when \"child.remove()\" is called, an error is thrown because it thinks that it is still the child of the container (and tries to access an out of bounds index in there. The ideal behaviour would be for the container to also clear the reference in each of its children, and simply not do anything when \"child.remove()\" is called if it has already been removed.\n. It's true that when a container is removed the children shouldn't be accessible from the stage, but I think what I was hoping for was that this change would also be reflected in the \"Node.parent\" property (by setting to null or otherwise). I've already coded around this like you mentioned above, so it isn't too much issue - it just seemed a bit inconsistent that's all.\n. Thanks for taking a look at this - the particular case I was experiencing issues with was when trying to test out different sizes for some assets that I am pulling from Sprite sheets (all using the same frame sizes). Whilst I can resize them manually by scaling the sheets themselves, it's pretty time consuming since I have 10 or more that are used. I see the width/height override as only being useful in cases like this, and for normal Sprite usage like in your example this would be left unset so that the frame size is used instead.\n\nMaybe these properties would be better named as \"overrideWidth\" and \"overrideHeight\"?\n. ",
    "rbardini": "I can also confirm this issue. I'm the developer of a KineticJS-powered game whose stage container scales according to the browser viewport size, using CSS 2D transforms. When the container scales down to fit within an smaller viewport, mouse and (specially) touch events get lost. You can check it up in [this fiddle](http://jsfiddle.net/rYFE8/1/): when the transform is applied, mouse clicks are detected outside the circle shape, near the stage's bottom right edge.\n\nI came up with the same solution as @jfollas, although I have a couple more points to add:\n- Firefox seems to use the deprecated `layerX` and `layerY` properties instead of the standard `offsetX` and `offsetY`. These should also be added to the mouse position evaluations;\n- Touch events are still broken, both in mobile devices as well as in desktop browsers with touchscreen support (e.g. Chrome with _Enable touch events_ feature activated in [chrome://flags](chrome://flags)). I haven't found a solution for this one yet.\n. I can also confirm this issue. I'm the developer of a KineticJS-powered game whose stage container scales according to the browser viewport size, using CSS 2D transforms. When the container scales down to fit within an smaller viewport, mouse and (specially) touch events get lost. You can check it up in [this fiddle](http://jsfiddle.net/rYFE8/1/): when the transform is applied, mouse clicks are detected outside the circle shape, near the stage's bottom right edge.\n\nI came up with the same solution as @jfollas, although I have a couple more points to add:\n- Firefox seems to use the deprecated `layerX` and `layerY` properties instead of the standard `offsetX` and `offsetY`. These should also be added to the mouse position evaluations;\n- Touch events are still broken, both in mobile devices as well as in desktop browsers with touchscreen support (e.g. Chrome with _Enable touch events_ feature activated in [chrome://flags](chrome://flags)). I haven't found a solution for this one yet.\n. ",
    "ckristijan": "@v1r Yes indeed, dragging from the border works. But what about other events? I updated the test case with the following:\n\ntriangle.on(\"click\", function(ev){\n      console.log(\"click\");\n });\n\nhttp://jsfiddle.net/xKLPm/18/\n\nThis event won't fire if there is a setFill() call from the drawFunction.\n. @fitzalon Ah, after reading all the comments regarding this issue on the now discontinued kineticjs forum (http://www.kineticjs.com/forum/viewtopic.php?f=8&t=1131), I understand the problem now.\nI tried your proposed workaround, but it doesn't seem to help. I am probably just using it wrong.\n\nI tried this:\n\ndrawFunction : function(context, colorKey){\n........\n if(colorKey) this.setFill(colorKey);\n else this.setFill(\"#FAFAFA\");\n..........  \n}\n\nI will probably end up refactoring my code or fall back to version 3.10.5 until Eric makes his call about this issue. \n\nThanks \n. Thanks Eric, this is great news!\n. I think you need ruby 1.9.x  for thorfile to work.\n. @v1r Yes indeed, dragging from the border works. But what about other events? I updated the test case with the following:\n\ntriangle.on(\"click\", function(ev){\n      console.log(\"click\");\n });\n\nhttp://jsfiddle.net/xKLPm/18/\n\nThis event won't fire if there is a setFill() call from the drawFunction.\n. @fitzalon Ah, after reading all the comments regarding this issue on the now discontinued kineticjs forum (http://www.kineticjs.com/forum/viewtopic.php?f=8&t=1131), I understand the problem now.\nI tried your proposed workaround, but it doesn't seem to help. I am probably just using it wrong.\n\nI tried this:\n\ndrawFunction : function(context, colorKey){\n........\n if(colorKey) this.setFill(colorKey);\n else this.setFill(\"#FAFAFA\");\n..........  \n}\n\nI will probably end up refactoring my code or fall back to version 3.10.5 until Eric makes his call about this issue. \n\nThanks \n. Thanks Eric, this is great news!\n. I think you need ruby 1.9.x  for thorfile to work.\n. ",
    "JunaidQadirB": "Thanks BaclScorp,\nI got my solution another way by using `.setStrokeWidth()` and `.setStroke()` functions on the Kinetic.Image object.\nI was unable to find regarding borders on Image in the official documentation in the `Kinetic.Image` Section.\n\nShould I close the issue?\n. Ok,thanks, I'll give it a try.\nWhat about the second issue i have mentioned regarding events?\nsame stuff work in Opera, FF and even IE 10 but in chrome events (mousemve, mouseover click) don'twork\n. Thanks BaclScorp,\nI got my solution another way by using `.setStrokeWidth()` and `.setStroke()` functions on the Kinetic.Image object.\nI was unable to find regarding borders on Image in the official documentation in the `Kinetic.Image` Section.\n\nShould I close the issue?\n. Ok,thanks, I'll give it a try.\nWhat about the second issue i have mentioned regarding events?\nsame stuff work in Opera, FF and even IE 10 but in chrome events (mousemve, mouseover click) don'twork\n. ",
    "laszlourszuly": "That sounds like a valid point, indeed. I took me the liberty of pushing a new commit where I move the circle segment to it's own shape, initially called \"Wedge\" (as proposed by you). I have also altered the unit tests accordingly.\n\nI'm also a bit unsure of how you'd like the Wedge to behave on a full 360 degrees angle. As it is now it will become a seamless full-circle due to the if-test in the drawFunc method. If I were to omit the if-test then there would be solid line where the start and end angle meet (maybe it's easier for you to test IRL than trying to decrypt my poor description :-) ).\n. That sounds like a valid point, indeed. I took me the liberty of pushing a new commit where I move the circle segment to it's own shape, initially called \"Wedge\" (as proposed by you). I have also altered the unit tests accordingly.\n\nI'm also a bit unsure of how you'd like the Wedge to behave on a full 360 degrees angle. As it is now it will become a seamless full-circle due to the if-test in the drawFunc method. If I were to omit the if-test then there would be solid line where the start and end angle meet (maybe it's easier for you to test IRL than trying to decrypt my poor description :-) ).\n. ",
    "FoxGit": "Will the Wedges' thickness (I mean the difference between the outer and inner radius) be customizable or would that be a \"Ring Shape\"? If that would be a ring shape, do you have a timetable for the release of such a shape? :) Something like this:\n![wedge](https://f.cloud.github.com/assets/3040743/13035/e48e62ac-45db-11e2-86f2-60c0f98fdd4b.png)\n\n(I know I can draw such a shape with the arc and lineTo functions but having a \"disc\" shape would make things easier. Drawing it with the arc and stroke function is no option as I need touch recognition on that shape.)\n. Will the Wedges' thickness (I mean the difference between the outer and inner radius) be customizable or would that be a \"Ring Shape\"? If that would be a ring shape, do you have a timetable for the release of such a shape? :) Something like this:\n![wedge](https://f.cloud.github.com/assets/3040743/13035/e48e62ac-45db-11e2-86f2-60c0f98fdd4b.png)\n\n(I know I can draw such a shape with the arc and lineTo functions but having a \"disc\" shape would make things easier. Drawing it with the arc and stroke function is no option as I need touch recognition on that shape.)\n. ",
    "gabrielflorit": "+1 on Arc / Ring shapes\n. Creating a transition from one dash array to another.\n. Nice - thanks again for KineticJS!!!\n. +1 on Arc / Ring shapes\n. Creating a transition from one dash array to another.\n. Nice - thanks again for KineticJS!!!\n. ",
    "eduplus": "+1 on Ring shape!\n. We have this issue as well. Touchend is never called if touch goes out of the listening node. We have callback code in touchend listener that should be called, so it doesn't work. This behaviour can be seen in the mobile events example. If you start touching inside circle, then drag outside circle and stop touch - touchend is never called.\n\nI think it could fire one is still touching, but the touch goes outside of the object. At the very least, there should be something to hook up own implementation. That way there would be a place to call stage.simulate('touchend')\n\nWhat do you think Eric?\n. Yes, that workaround worked for now. Thanks for the quick response.\n. I think I have a similar problem. I noticed that dragging a layer sometimes cleared hit canvas for other shape not related at all. I made a hack to draw that hit canvas when dragging ends, but it would be nice to get a proper fix for this. This was introduced in 4.4.0, it's not reproducable with 4.3.3\n. We are still having this happen on v.4.7.4 - any updates on this?\n. I updated this to work with 4.7.0, but I'm not sure how I can update this pull request. I tried pushing to the same branch, but all I get is this error message: \n\nerror: The requested URL returned error: 403 while accessing https://eduplus@git\nhub.com/ericdrowell/KineticJS.git/info/refs?service=git-receive-pack\nfatal: HTTP request failed\n\nIf someone can help me out, I will update the pull request.\n. This happens to me as well, using Win7 64bit and Chrome 27. It is quite serious DD problem. It is working as expected on IE10 and Firefox 21.\n. transitionTo was removed, there is now Tween class, check out the docs for that, you can do the same things using that and it seems to have some extra features as well.\n. Thanks Eric for the quick response. Here is a quick and dirty example of what's happening:\n\nhttp://www.oppimispeli.fi/kinetic_bright/\n\nThe forest tile is the actual effect I am going for. You can see the pixels with some opacity to stay white. The green rectangle is a slider to apply brighten effect (0-255) to 2x2 to pixels (scaled 20 times) and up in the left corner it logs the RGBA values of those pixels. On the right there is a gradient image, with the upper half using opacity and lower half using fading to background color. Here you see the effect the best: In the ideal situation, they would work the same. But as you can observe, the gradient part goes super bright and stays that way due to the opacity values getting out of hand. That's at least what I think is happening from observing this from the debugging. clearFilter() get's it back to normal, so I definitely think it's due to the filter, but I'm lost where that happens since the filter isn't touching alpha values.\n\nHope this helps, let me know if I can be of more help.\n. Eric, did you get a chance to try my example? Sorry to ask again, I know you have your hands full, but it would really help to get confirmation of why this is happening and whether it's something that is gonna get fixed. This is blocking us to use images with alpha + brighten filter, which we use to highlight selection.\n. Thank you for the quick example. Of course your example doesn't have problems with opacity, jpeg doesn't have any opacity! I copied the example exactly, added a black background and switched to our test image (png) and I am able to reproduce easily. I can attach the image here and you can see it for yourself easily.\n\n![gradients](https://f.cloud.github.com/assets/2563512/647124/bcf17d24-d3f7-11e2-9870-8c5a9662282c.png)\n\nGoing from slider to right (255) and back to center (0) works as expected on the lower bar, since it doesn't have opacity. But the higher bar, which has opacity, gets messed up. Here is a screenshot of the end situation:\n\n![example](https://f.cloud.github.com/assets/2563512/647134/3fb039a8-d3f8-11e2-9497-1b83aa2a985d.png)\n\nBoth bars should look the same, but as you can see, they clearly are not.\n\nHere is the code (your example with the added background and changed image reference):\n\nhttp://notepad.cc/hoqoozbe13\n. Chrome 26 seems to be fine for us as well, 27 is having this issue and also the drag & drop issue. These should be submitted to Chrome team.\n. So it seems KineticJS is now listed. I just tried Bower and it finds KineticJS, but uses 4.5.2, not the newest version. Is there a way to get it always use the latest version? It would be really nice to be able to use Bower for dependency management with KineticJS.\n. We have observed this same thing. Glad this is under consideration.\n. I just tried Bower and it finds KineticJS, but uses 4.5.2, not the newest version. Is there a way to get it always use the latest version? It would be really nice to be able to use Bower for dependency management with KineticJS.\n. HTML-tags got cut inside the append, here it is:\n\ninput type=\"text\" style=\"position:absolute; left:300px; top:300px\";\n. Okay thanks, that works. I tried to the container div, but then it didn't work and didn't think of making a new parent div. \n. This might be interesting for me as well. I have tried using my KineticJS project inside CocoonJS wrapper and there is a special way to scale the canvas:\n\ncanvas.style.cssText=\"idtkscale:SCALE_TYPE;\";\n\nBut if KineticJS creates the canvas, I haven't found a way to get that to work. If there was a way to create the canvas first myself - it might at least make it easier to use that property of CocoonJS.\n. This is very welcome addition, it helps with unwanted drag & drops that prevented tap/click actions triggering. I hope it is integrated to KineticJS. Thanks for the pull request.\n. We are also experiencing major problems in our canvas game if the user uses minus browser zoom. There are some graphics being drawn wrong while dragging and hit areas are not working as expected.\n\n![zoom_graphic bug](https://f.cloud.github.com/assets/2563512/1953765/8e2de86a-81c6-11e3-91e5-329c4babaa36.jpg)\n. I like the proposed array methods to handle the points array.\n. This also happens for me. It is because pixelRatio != 1 for retina iPad and I guess clipping is not working correctly for > 1 pixelRatio. I forced the pixelRatio to be 1 and touch starts working even on retina iPad. Any chance to get this fixed for other pixelRatios as well?\n. +1 on Ring shape!\n. We have this issue as well. Touchend is never called if touch goes out of the listening node. We have callback code in touchend listener that should be called, so it doesn't work. This behaviour can be seen in the mobile events example. If you start touching inside circle, then drag outside circle and stop touch - touchend is never called.\n\nI think it could fire one is still touching, but the touch goes outside of the object. At the very least, there should be something to hook up own implementation. That way there would be a place to call stage.simulate('touchend')\n\nWhat do you think Eric?\n. Yes, that workaround worked for now. Thanks for the quick response.\n. I think I have a similar problem. I noticed that dragging a layer sometimes cleared hit canvas for other shape not related at all. I made a hack to draw that hit canvas when dragging ends, but it would be nice to get a proper fix for this. This was introduced in 4.4.0, it's not reproducable with 4.3.3\n. We are still having this happen on v.4.7.4 - any updates on this?\n. I updated this to work with 4.7.0, but I'm not sure how I can update this pull request. I tried pushing to the same branch, but all I get is this error message: \n\nerror: The requested URL returned error: 403 while accessing https://eduplus@git\nhub.com/ericdrowell/KineticJS.git/info/refs?service=git-receive-pack\nfatal: HTTP request failed\n\nIf someone can help me out, I will update the pull request.\n. This happens to me as well, using Win7 64bit and Chrome 27. It is quite serious DD problem. It is working as expected on IE10 and Firefox 21.\n. transitionTo was removed, there is now Tween class, check out the docs for that, you can do the same things using that and it seems to have some extra features as well.\n. Thanks Eric for the quick response. Here is a quick and dirty example of what's happening:\n\nhttp://www.oppimispeli.fi/kinetic_bright/\n\nThe forest tile is the actual effect I am going for. You can see the pixels with some opacity to stay white. The green rectangle is a slider to apply brighten effect (0-255) to 2x2 to pixels (scaled 20 times) and up in the left corner it logs the RGBA values of those pixels. On the right there is a gradient image, with the upper half using opacity and lower half using fading to background color. Here you see the effect the best: In the ideal situation, they would work the same. But as you can observe, the gradient part goes super bright and stays that way due to the opacity values getting out of hand. That's at least what I think is happening from observing this from the debugging. clearFilter() get's it back to normal, so I definitely think it's due to the filter, but I'm lost where that happens since the filter isn't touching alpha values.\n\nHope this helps, let me know if I can be of more help.\n. Eric, did you get a chance to try my example? Sorry to ask again, I know you have your hands full, but it would really help to get confirmation of why this is happening and whether it's something that is gonna get fixed. This is blocking us to use images with alpha + brighten filter, which we use to highlight selection.\n. Thank you for the quick example. Of course your example doesn't have problems with opacity, jpeg doesn't have any opacity! I copied the example exactly, added a black background and switched to our test image (png) and I am able to reproduce easily. I can attach the image here and you can see it for yourself easily.\n\n![gradients](https://f.cloud.github.com/assets/2563512/647124/bcf17d24-d3f7-11e2-9870-8c5a9662282c.png)\n\nGoing from slider to right (255) and back to center (0) works as expected on the lower bar, since it doesn't have opacity. But the higher bar, which has opacity, gets messed up. Here is a screenshot of the end situation:\n\n![example](https://f.cloud.github.com/assets/2563512/647134/3fb039a8-d3f8-11e2-9497-1b83aa2a985d.png)\n\nBoth bars should look the same, but as you can see, they clearly are not.\n\nHere is the code (your example with the added background and changed image reference):\n\nhttp://notepad.cc/hoqoozbe13\n. Chrome 26 seems to be fine for us as well, 27 is having this issue and also the drag & drop issue. These should be submitted to Chrome team.\n. So it seems KineticJS is now listed. I just tried Bower and it finds KineticJS, but uses 4.5.2, not the newest version. Is there a way to get it always use the latest version? It would be really nice to be able to use Bower for dependency management with KineticJS.\n. We have observed this same thing. Glad this is under consideration.\n. I just tried Bower and it finds KineticJS, but uses 4.5.2, not the newest version. Is there a way to get it always use the latest version? It would be really nice to be able to use Bower for dependency management with KineticJS.\n. HTML-tags got cut inside the append, here it is:\n\ninput type=\"text\" style=\"position:absolute; left:300px; top:300px\";\n. Okay thanks, that works. I tried to the container div, but then it didn't work and didn't think of making a new parent div. \n. This might be interesting for me as well. I have tried using my KineticJS project inside CocoonJS wrapper and there is a special way to scale the canvas:\n\ncanvas.style.cssText=\"idtkscale:SCALE_TYPE;\";\n\nBut if KineticJS creates the canvas, I haven't found a way to get that to work. If there was a way to create the canvas first myself - it might at least make it easier to use that property of CocoonJS.\n. This is very welcome addition, it helps with unwanted drag & drops that prevented tap/click actions triggering. I hope it is integrated to KineticJS. Thanks for the pull request.\n. We are also experiencing major problems in our canvas game if the user uses minus browser zoom. There are some graphics being drawn wrong while dragging and hit areas are not working as expected.\n\n![zoom_graphic bug](https://f.cloud.github.com/assets/2563512/1953765/8e2de86a-81c6-11e3-91e5-329c4babaa36.jpg)\n. I like the proposed array methods to handle the points array.\n. This also happens for me. It is because pixelRatio != 1 for retina iPad and I guess clipping is not working correctly for > 1 pixelRatio. I forced the pixelRatio to be 1 and touch starts working even on retina iPad. Any chance to get this fixed for other pixelRatios as well?\n. ",
    "pesek": "Can confirm this problem, especially on Firefox.\n\nRan into it today since I needed gameboard-like rectangle table with hovering and the performance makes v4 unusable. I slightly modified Chris's example to my usage: http://jsfiddle.net/2KXmz/11/ (you can modify number of rows x cols in the cycles; FF on v4 can't handle even 10x12 though, Chrome seems to be a little better (getting slow around 25x12), IE9 seems to be doing surprisingly good even when 45x12; however, on v3 all the browsers are handling this without a problem even for 45x12 or bigger).\n\nSome profiling with Firebug showed that the biggest problem seems to be this line in GetIntersection():\n\nvar p = layer.hitCanvas.context.getImageData(Math.round(pos.x), Math.round(pos.y), 1, 1).data;\n\nTried to play with the code there for a while, unfortunately my skills apparently aren't good enough to figure way how to fix it, so I'm just switching to v3 for now with this project.\n\nPS: The same problem seems to be affecting also this example in lab: http://www.html5canvastutorials.com/labs/html5-canvas-world-map-svg-path-with-kineticjs/ (works fine on all browsers except FF, where the hovering is slow)\n. Can confirm this problem, especially on Firefox.\n\nRan into it today since I needed gameboard-like rectangle table with hovering and the performance makes v4 unusable. I slightly modified Chris's example to my usage: http://jsfiddle.net/2KXmz/11/ (you can modify number of rows x cols in the cycles; FF on v4 can't handle even 10x12 though, Chrome seems to be a little better (getting slow around 25x12), IE9 seems to be doing surprisingly good even when 45x12; however, on v3 all the browsers are handling this without a problem even for 45x12 or bigger).\n\nSome profiling with Firebug showed that the biggest problem seems to be this line in GetIntersection():\n\nvar p = layer.hitCanvas.context.getImageData(Math.round(pos.x), Math.round(pos.y), 1, 1).data;\n\nTried to play with the code there for a while, unfortunately my skills apparently aren't good enough to figure way how to fix it, so I'm just switching to v3 for now with this project.\n\nPS: The same problem seems to be affecting also this example in lab: http://www.html5canvastutorials.com/labs/html5-canvas-world-map-svg-path-with-kineticjs/ (works fine on all browsers except FF, where the hovering is slow)\n. ",
    "langtu": "Hi,\nI had the same problem (not only with FF) with version 4.3.1.\nWhen profiling by chrome, I also seen that getIntersections() take more than 30%. And the root cause is in method _bindContentEvents:\n\n( function() {\n                    var event = pubEvent;\n                    that.content.addEventListener(event, function(evt) {\n                        that['_' + event](evt);\n                    }, false);\n                }());\n\nThis anonymous method always call when mouse moving (although I do not subscriber to any mousemove events).\n\nWhen I remove 'mousemove' from list events in the _bindContentEvents, it works great!\n\nResult when disable 'mousemove':\nChrome's profile show all my script and kineticjs take about <5%. And CPU usage in task manager reduce from 15% to <5% (a good result with few animations in my app -- I render all animations by manual update shapes's position, rotations in a gameloop by Kinetic.Animation)\n\nMy app does not subscribe 'mousemove' events, so it is enough for me. But hope that this issue will be resolve in next Kinetic versions. (I planed to create more apps by Kineticjs -- thanks Eric for this cool canvas framework)\n. Hi,\nI had the same problem (not only with FF) with version 4.3.1.\nWhen profiling by chrome, I also seen that getIntersections() take more than 30%. And the root cause is in method _bindContentEvents:\n\n( function() {\n                    var event = pubEvent;\n                    that.content.addEventListener(event, function(evt) {\n                        that['_' + event](evt);\n                    }, false);\n                }());\n\nThis anonymous method always call when mouse moving (although I do not subscriber to any mousemove events).\n\nWhen I remove 'mousemove' from list events in the _bindContentEvents, it works great!\n\nResult when disable 'mousemove':\nChrome's profile show all my script and kineticjs take about <5%. And CPU usage in task manager reduce from 15% to <5% (a good result with few animations in my app -- I render all animations by manual update shapes's position, rotations in a gameloop by Kinetic.Animation)\n\nMy app does not subscribe 'mousemove' events, so it is enough for me. But hope that this issue will be resolve in next Kinetic versions. (I planed to create more apps by Kineticjs -- thanks Eric for this cool canvas framework)\n. ",
    "programedia": "Any news on this issue? I\u00b4m having performance problems in a drag n drop based app. When using the js-profiler in Chrome the Kinetic.Stage._mousemove is using alot more than anything else (around 25-30%). I\u00b4m just setting my objects as draggable when creating them and then creating my own bounds. When i try it on my iPad it crashes the browser after a few drags. Same thing when trying on slower machines without Chrome.\n\n``` javascript\ndraggable: true,\ndragBoundFunc: function(pos) {\n        if(pos.y > main.sink.getY() + minMarginTop && pos.y < main.sinkY2 - minMarginBottom - theHeight * settings.stageScale ){\n          var newY = pos.y\n        }else if(pos.y <= main.sink.getY() + minMarginTop){\n          var newY = main.sink.getY() + minMarginTop;\n        }else{\n          var newY = main.sinkY2 - minMarginBottom - theHeight * settings.stageScale;\n        }\n        if(pos.x > main.sink.getX() + minMarginLeft && pos.x < main.sinkX2 - minMarginRight - theWidth * settings.stageScale ){\n          var newX = pos.x\n        }else if(pos.x <= main.sink.getX() + minMarginLeft){\n          var newX = main.sink.getX() + minMarginLeft;\n        }else{\n          var newX = main.sinkX2 - minMarginRight - theWidth * settings.stageScale;\n        }\n        return {\n          x: newX,\n          y: newY\n        };\n```\n. Any news on this issue? I\u00b4m having performance problems in a drag n drop based app. When using the js-profiler in Chrome the Kinetic.Stage._mousemove is using alot more than anything else (around 25-30%). I\u00b4m just setting my objects as draggable when creating them and then creating my own bounds. When i try it on my iPad it crashes the browser after a few drags. Same thing when trying on slower machines without Chrome.\n\n``` javascript\ndraggable: true,\ndragBoundFunc: function(pos) {\n        if(pos.y > main.sink.getY() + minMarginTop && pos.y < main.sinkY2 - minMarginBottom - theHeight * settings.stageScale ){\n          var newY = pos.y\n        }else if(pos.y <= main.sink.getY() + minMarginTop){\n          var newY = main.sink.getY() + minMarginTop;\n        }else{\n          var newY = main.sinkY2 - minMarginBottom - theHeight * settings.stageScale;\n        }\n        if(pos.x > main.sink.getX() + minMarginLeft && pos.x < main.sinkX2 - minMarginRight - theWidth * settings.stageScale ){\n          var newX = pos.x\n        }else if(pos.x <= main.sink.getX() + minMarginLeft){\n          var newX = main.sink.getX() + minMarginLeft;\n        }else{\n          var newX = main.sinkX2 - minMarginRight - theWidth * settings.stageScale;\n        }\n        return {\n          x: newX,\n          y: newY\n        };\n```\n. ",
    "vsouto": "He is right.\nBut if you use Chrome or Firefox you will see the error message, wich is \"DOM Exception 18\"\n\nUse as example, this code on:\nhttp://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/\n\nand then if you try to capture it with toDataUrl, you will get this error.\n\nApparently, the problem is when we use the canvas.draw() function, but im not sure.\nAny tips?\n. Yes that was the case, however not the cause of the problem. \nI just brought the image to local and nothing changed.\n\nI stoped using the Kinetic.Group resource and it started to work. I dont know why the Group method is not compatible with the toDataUrl, and because of that i kinda lost some good resources.\n\nHowever, even playing it simple, the toDataUrl is still capturing only the first layer, not all of the layers !\n\nHere is my code:\n\n window.onload = function() {\n        var stage = new Kinetic.Stage({\n            container: 'container',\n            width: 578,\n            height: 200\n        });\n        var layer = new Kinetic.Layer();\n        var rectX = stage.getWidth() / 2 - 50;\n        var rectY = stage.getHeight() / 2 - 25;\n\n```\n    image = new Image();\n    image.src = \"<?php echo Router::url('/img/caneca.jpg',true); ?>\";\n\n    var produto = new Kinetic.Image({\n        x: 170,\n        y: 40,\n        image: image,\n        width: 200,\n        height: 138,\n    });\n\n    image = new Image();\n    image.src = \"<?php echo Router::url('/img/cereal.jpg',true); ?>\";\n\n    var foto = new Kinetic.Image({\n        x: 0,\n        y: 0,\n        image: image,\n        width: 200,\n        height: 138,\n        name: \"image\",\n        draggable: true,\n    });\n\n    produto.on('mouseover', function() {\n        document.body.style.cursor = 'pointer';\n    });\n\n    produto.on('mouseout', function() {\n        document.body.style.cursor = 'default';\n    });\n\n    // Adiciona o produto na layer\n    layer.add(produto);\n\n    // Adiciona a foto na layer 2\n    var layer2 = new Kinetic.Layer();\n    layer2.add(foto);\n\n    // Adiciona a layer completa\n    stage.add(layer);\n    stage.add(layer2);\n\n    $('#capturar').click(function() {\n\n        //var dataURL = stage.toDataURL();\n        var canvas = document.getElementsByTagName('canvas')[0];\n\n        var dataUrl = canvas.toDataURL();\n\n        //alert(dataUrl);\n        window.open(dataUrl);\n    });\n\n};\n```\n. I'm not sure, cause it's been a long time that i resolved this.\n\nBut i guess the problem was that my workspace was composed by some multiple canvas and divs on top of each other. So whe you use toDataUrl() method, he only captures the resources from the current canvas, not all of them.\n. He is right.\nBut if you use Chrome or Firefox you will see the error message, wich is \"DOM Exception 18\"\n\nUse as example, this code on:\nhttp://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/\n\nand then if you try to capture it with toDataUrl, you will get this error.\n\nApparently, the problem is when we use the canvas.draw() function, but im not sure.\nAny tips?\n. Yes that was the case, however not the cause of the problem. \nI just brought the image to local and nothing changed.\n\nI stoped using the Kinetic.Group resource and it started to work. I dont know why the Group method is not compatible with the toDataUrl, and because of that i kinda lost some good resources.\n\nHowever, even playing it simple, the toDataUrl is still capturing only the first layer, not all of the layers !\n\nHere is my code:\n\n window.onload = function() {\n        var stage = new Kinetic.Stage({\n            container: 'container',\n            width: 578,\n            height: 200\n        });\n        var layer = new Kinetic.Layer();\n        var rectX = stage.getWidth() / 2 - 50;\n        var rectY = stage.getHeight() / 2 - 25;\n\n```\n    image = new Image();\n    image.src = \"<?php echo Router::url('/img/caneca.jpg',true); ?>\";\n\n    var produto = new Kinetic.Image({\n        x: 170,\n        y: 40,\n        image: image,\n        width: 200,\n        height: 138,\n    });\n\n    image = new Image();\n    image.src = \"<?php echo Router::url('/img/cereal.jpg',true); ?>\";\n\n    var foto = new Kinetic.Image({\n        x: 0,\n        y: 0,\n        image: image,\n        width: 200,\n        height: 138,\n        name: \"image\",\n        draggable: true,\n    });\n\n    produto.on('mouseover', function() {\n        document.body.style.cursor = 'pointer';\n    });\n\n    produto.on('mouseout', function() {\n        document.body.style.cursor = 'default';\n    });\n\n    // Adiciona o produto na layer\n    layer.add(produto);\n\n    // Adiciona a foto na layer 2\n    var layer2 = new Kinetic.Layer();\n    layer2.add(foto);\n\n    // Adiciona a layer completa\n    stage.add(layer);\n    stage.add(layer2);\n\n    $('#capturar').click(function() {\n\n        //var dataURL = stage.toDataURL();\n        var canvas = document.getElementsByTagName('canvas')[0];\n\n        var dataUrl = canvas.toDataURL();\n\n        //alert(dataUrl);\n        window.open(dataUrl);\n    });\n\n};\n```\n. I'm not sure, cause it's been a long time that i resolved this.\n\nBut i guess the problem was that my workspace was composed by some multiple canvas and divs on top of each other. So whe you use toDataUrl() method, he only captures the resources from the current canvas, not all of them.\n. ",
    "eduardo-matos": "Are you trying to generate a dataUrl from a canvas with an image from a different domain? If that's your case, then there is nothing you can do on the front-end. A proxy on your back-end may be the solution.\n. @vsouto you are trying to get the data URL directly from the canvas tag, but that's not how KineticJS works. Take a look at this example: http://www.html5canvastutorials.com/kineticjs/html5-canvas-stage-data-url-with-kineticjs/\n\nThis is the way you may convert you KineticJS to data URL..\n\nInspecting the DOM you can see that the KineticJS library creates a lot of canvas elements (1 per layer I believe).\n. I've tested in five machines, and three of them had the same problem. I've tested in incognito and disabled all extensions.\n\nMaybe it's specific to these Chrome installations (same network).\n\nPlease close this thread. If I have more details, then I open a new one.\n\nSorry for that.\n. Are you trying to generate a dataUrl from a canvas with an image from a different domain? If that's your case, then there is nothing you can do on the front-end. A proxy on your back-end may be the solution.\n. @vsouto you are trying to get the data URL directly from the canvas tag, but that's not how KineticJS works. Take a look at this example: http://www.html5canvastutorials.com/kineticjs/html5-canvas-stage-data-url-with-kineticjs/\n\nThis is the way you may convert you KineticJS to data URL..\n\nInspecting the DOM you can see that the KineticJS library creates a lot of canvas elements (1 per layer I believe).\n. I've tested in five machines, and three of them had the same problem. I've tested in incognito and disabled all extensions.\n\nMaybe it's specific to these Chrome installations (same network).\n\nPlease close this thread. If I have more details, then I open a new one.\n\nSorry for that.\n. ",
    "vscott59": "vsouto, did  you ever get this problem solved? I am having the same issue. I have a stage with several layers and when I try to send the stage to a Url (dataURL = stage.toDataURL()) it only captures the first layer.\n. vsouto, did  you ever get this problem solved? I am having the same issue. I have a stage with several layers and when I try to send the stage to a Url (dataURL = stage.toDataURL()) it only captures the first layer.\n. ",
    "magicDamo": "i am seeing a serious delay once getting the dataURL. to be clear , the dataURL string comes back rather quickly, but there seems to be a serious LAG that the web app needs to time recover. has anyone else experienced this?\n. i am seeing a serious delay once getting the dataURL. to be clear , the dataURL string comes back rather quickly, but there seems to be a serious LAG that the web app needs to time recover. has anyone else experienced this?\n. ",
    "cjyar": "Thanks for the quick response and clarification.\n. The code example I included uses a group, actually. The group contains a line and a polygon. The line and the polygon share the same gradient. The gradient isn't rendered correctly.\n. Thanks for the quick response and clarification.\n. The code example I included uses a group, actually. The group contains a line and a polygon. The line and the polygon share the same gradient. The gradient isn't rendered correctly.\n. ",
    "hobbs": "Need to do some more testing on this...\n. I think we fixed by replacing context.Fill(context) with context.Fill(), and context.Stroke(context) with context.Stroke()\n. Need to do some more testing on this...\n. I think we fixed by replacing context.Fill(context) with context.Fill(), and context.Stroke(context) with context.Stroke()\n. ",
    "rsperlazza": "I would as well. I ask about this a few weeks ago.\n. +1 \n\nThis is really bad and happening for my apps in production. \n. I would as well. I ask about this a few weeks ago.\n. +1 \n\nThis is really bad and happening for my apps in production. \n. ",
    "macfreek": "There seems interest, so I'm following up. Rough results of speed tests for a line with 1000 points:\n- lineTo (current code, no corners): 135 \u00b1 5 ms\n- arcTo (d194f14, no correction for small corners): 200 \u00b1 5 ms\n- arcTo with corrected radius (8c48884, smaller radius for very acute angles): 210 \u00b1 10 ms\n- arc instead of arcTo (12019cc): 180 \u00b1 10 ms\n\nI anticipated that my code (lots of if/then and trigonometry) would severely reduce the speed, but that's not really the case. The arc itself had a drawback. Given that the lineTo is called if the cornerRadius is 0, there is no significant speed penalty for current lines, and thus the code can be merged as soon as I rewrote the arcTo() to a regular arc(). I presume this is requested, right?\n. @ericdrowell These three commits are my contribution. I'm sure you like to reformat the code to your code conventions (sorry, I could not find the guidelines). If you like to refactor the code (e.g. because you like to reuse it for other shapes), I'm happy to explain some things. I tried to add a bunch of in-line comments, but I needed a picture. I you like that, just let me know.\n\n(The trigonometry was fun, but it is a bit annoying that Javascript -the Math.atan2() function- uses a different coordinate system than what HTML5 canvas uses. The picture at http://www.html5canvastutorials.com/tutorials/html5-canvas-arcs/ helped. Thanks. FYI, Math.atan2() returns 0 rad for a line pointing south, the range is -\u03c0 to +\u03c0 and the numbers are going counter clockwise. While for arc() 0 rad is pointing East, the range is 0 to 2\u03c0, and it is going clockwise. Try explaining that to my wife when I was cursing when the angles didn't work out at first...)\n. Two comments:\n- I would very much welcome the addition of Bezier-curves to KineticJS, either as part of a Line or a new Shape.\n- If you're not going to support rounded corners, please remove them from the documentation. [They are currently there](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-line-tutorial/), and from a users perspective it is annoying that something is documented but isn't implemented.\n. I would appreciate the inclusion of this feature.\n\nA small recommendation: While writing the code about a year ago, I was thinking that if would be useful to create a few more functions. For example, the Line object had multiple points, and is actually a open (non-closed) Polygon. When drawing such an object with both rounded corners and dashed lines, I would say there should be three steps: (1) calculate arcs and lines based on rounded corners property; (2) calculate arc- and line-segments based on dashed property; (3) actually draw to canvas. When I made the patch, all functions where in the same method, and I was not able to re-use the code to draw dashed arcs (that's presumably present in the Circle object).\n\nI haven't used KineticJS in a while, so I won't be able to help much, and I'm not sure how much of the above still applies. Let me know if you have any questions on the patches, when I'm back from holiday, I'll try to answer them.\n. There seems interest, so I'm following up. Rough results of speed tests for a line with 1000 points:\n- lineTo (current code, no corners): 135 \u00b1 5 ms\n- arcTo (d194f14, no correction for small corners): 200 \u00b1 5 ms\n- arcTo with corrected radius (8c48884, smaller radius for very acute angles): 210 \u00b1 10 ms\n- arc instead of arcTo (12019cc): 180 \u00b1 10 ms\n\nI anticipated that my code (lots of if/then and trigonometry) would severely reduce the speed, but that's not really the case. The arc itself had a drawback. Given that the lineTo is called if the cornerRadius is 0, there is no significant speed penalty for current lines, and thus the code can be merged as soon as I rewrote the arcTo() to a regular arc(). I presume this is requested, right?\n. @ericdrowell These three commits are my contribution. I'm sure you like to reformat the code to your code conventions (sorry, I could not find the guidelines). If you like to refactor the code (e.g. because you like to reuse it for other shapes), I'm happy to explain some things. I tried to add a bunch of in-line comments, but I needed a picture. I you like that, just let me know.\n\n(The trigonometry was fun, but it is a bit annoying that Javascript -the Math.atan2() function- uses a different coordinate system than what HTML5 canvas uses. The picture at http://www.html5canvastutorials.com/tutorials/html5-canvas-arcs/ helped. Thanks. FYI, Math.atan2() returns 0 rad for a line pointing south, the range is -\u03c0 to +\u03c0 and the numbers are going counter clockwise. While for arc() 0 rad is pointing East, the range is 0 to 2\u03c0, and it is going clockwise. Try explaining that to my wife when I was cursing when the angles didn't work out at first...)\n. Two comments:\n- I would very much welcome the addition of Bezier-curves to KineticJS, either as part of a Line or a new Shape.\n- If you're not going to support rounded corners, please remove them from the documentation. [They are currently there](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-line-tutorial/), and from a users perspective it is annoying that something is documented but isn't implemented.\n. I would appreciate the inclusion of this feature.\n\nA small recommendation: While writing the code about a year ago, I was thinking that if would be useful to create a few more functions. For example, the Line object had multiple points, and is actually a open (non-closed) Polygon. When drawing such an object with both rounded corners and dashed lines, I would say there should be three steps: (1) calculate arcs and lines based on rounded corners property; (2) calculate arc- and line-segments based on dashed property; (3) actually draw to canvas. When I made the patch, all functions where in the same method, and I was not able to re-use the code to draw dashed arcs (that's presumably present in the Circle object).\n\nI haven't used KineticJS in a while, so I won't be able to help much, and I'm not sure how much of the above still applies. Let me know if you have any questions on the patches, when I'm back from holiday, I'll try to answer them.\n. ",
    "djmccormick": "Did this ever happen?\n. +1\n. This is great! Thank you.\n. Did this ever happen?\n. +1\n. This is great! Thank you.\n. ",
    "mkrutsky": "Hi, did this feature ever made it to release? It's 5.1.0 now and I can't seem to find it in documentation...\n. Hi, did this feature ever made it to release? It's 5.1.0 now and I can't seem to find it in documentation...\n. ",
    "romannikov": "getPosition() returns zero (0) after dragging, so it's not a solution\n. getAbsolutePosition is a solution\n. khm, I've updated kiniticjs to 4.1.0 and can not reproduce anymore, so it might be a outdated issue. Anyway getPosition returns correct retuls in new version. \n. js code with bug: http://jsfiddle.net/PSV9R/\n. bug actual for chrome, can not reproduce in ff\n. It does not fix the error\n. getPosition() returns zero (0) after dragging, so it's not a solution\n. getAbsolutePosition is a solution\n. khm, I've updated kiniticjs to 4.1.0 and can not reproduce anymore, so it might be a outdated issue. Anyway getPosition returns correct retuls in new version. \n. js code with bug: http://jsfiddle.net/PSV9R/\n. bug actual for chrome, can not reproduce in ff\n. It does not fix the error\n. ",
    "pavelpower": "problem is not in a group event\n\n``` javascript\n     on: function(typesStr, handler) {\n            var types = typesStr.split(' ');\n            var len = types.length;\n\n           // as it is simply a enumeration in cycle\n            for(var n = 0; n < len; n++) {\n                var type = types[n];\n                var event = type;\n                var parts = event.split('.');\n                var baseEvent = parts[0];\n                var name = parts.length > 1 ? parts[1] : '';\n\n                if(!this.eventListeners[baseEvent]) {\n                    this.eventListeners[baseEvent] = [];\n                }\n\n                this.eventListeners[baseEvent].push({\n                    name: name,\n                    handler: handler\n                });\n            }\n        },\n```\n. and in this I agree with you\n. observer it is the order!\n\ndon't support the unbinding of the type \"obj.off(eventname, handler);\"\nfor remove event with the specified handler\n. you right\n. I wish you as many chances!\n. cool!\n\n2013/2/15 Eric Rowell notifications@github.com\n\n> Nice job!! It works great\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/pull/237#issuecomment-13592491.\n\n## \n\n\u00f3 \u00f5\u00d7\u00c1\u00d6\u00c5\u00ce\u00c9\u00c5\u00cd, \u00e1\u00c8\u00cd\u00c5\u00d4\u00de\u00c1\u00ce\u00cf\u00d7 \u00f0\u00c1\u00d7\u00c5\u00cc.\n. this bug is fixed, how - i d'ont now\n. much better to use **gulp** http://gulpjs.com/\nits syntax is simple and much better, running faster than grunt\nthere are a lot of plugins\nand for minification  **gulp-uglify** \nand for concatenation     **gulp-concat**\nand for test **gulp-mocha**\nthere is even **gulp-jshint**\n\nyou can see http://gulpjs.com/plugins/\n. and look this **gulp-tag-version**\n. problem is not in a group event\n\n``` javascript\n     on: function(typesStr, handler) {\n            var types = typesStr.split(' ');\n            var len = types.length;\n\n           // as it is simply a enumeration in cycle\n            for(var n = 0; n < len; n++) {\n                var type = types[n];\n                var event = type;\n                var parts = event.split('.');\n                var baseEvent = parts[0];\n                var name = parts.length > 1 ? parts[1] : '';\n\n                if(!this.eventListeners[baseEvent]) {\n                    this.eventListeners[baseEvent] = [];\n                }\n\n                this.eventListeners[baseEvent].push({\n                    name: name,\n                    handler: handler\n                });\n            }\n        },\n```\n. and in this I agree with you\n. observer it is the order!\n\ndon't support the unbinding of the type \"obj.off(eventname, handler);\"\nfor remove event with the specified handler\n. you right\n. I wish you as many chances!\n. cool!\n\n2013/2/15 Eric Rowell notifications@github.com\n\n> Nice job!! It works great\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/pull/237#issuecomment-13592491.\n\n## \n\n\u00f3 \u00f5\u00d7\u00c1\u00d6\u00c5\u00ce\u00c9\u00c5\u00cd, \u00e1\u00c8\u00cd\u00c5\u00d4\u00de\u00c1\u00ce\u00cf\u00d7 \u00f0\u00c1\u00d7\u00c5\u00cc.\n. this bug is fixed, how - i d'ont now\n. much better to use **gulp** http://gulpjs.com/\nits syntax is simple and much better, running faster than grunt\nthere are a lot of plugins\nand for minification  **gulp-uglify** \nand for concatenation     **gulp-concat**\nand for test **gulp-mocha**\nthere is even **gulp-jshint**\n\nyou can see http://gulpjs.com/plugins/\n. and look this **gulp-tag-version**\n. ",
    "blueshirts": "I am able to work around this issue by extending the default Stage class only calling evt.preventDefault() when I am on a mobile device.  Not sure what bad effects this may cause though so far seem to meet my usage.  It would be nice if there were an easier way to modify the default behavior.\n\n```\nKinetic.Global.extend(MyStage, Kinetic.Stage);\nfunction MyStage(mobile, config) {\n    this.mobile = mobile;\n    this._initStage(config);\n}\nMyStage.prototype._touchstart = function(evt) {\n    this._setUserPosition(evt);\n    if (!this.mobile) {\n        evt.preventDefault();\n    }\n    var obj = this.getIntersection(this.getUserPosition());\n\n    if(obj && obj.shape) {\n        var shape = obj.shape;\n        this.tapStart = true;\n        shape._handleEvent('touchstart', evt);\n    }\n\n    /*\n                         * init stage drag and drop\n                         */\n    if(Kinetic.DD && this.attrs.draggable) {\n        this._initDrag();\n    }\n}\nMyStage.prototype._touchmove = function(evt) { // Override the default touchmove handler.\n    this._setUserPosition(evt);\n    var dd = Kinetic.DD;\n    if (!this.mobile) {\n        evt.preventDefault();\n    }\n    var obj = this.getIntersection(this.getUserPosition());\n    if(obj && obj.shape) {\n        var shape = obj.shape;\n        shape._handleEvent('touchmove', evt);\n    }\n\n    // start drag and drop\n    if(dd) {\n        dd._startDrag(evt);\n    }\n}\n```\n. Took me a bit to get back around to this though I tried the cancelBubble and it didn't seem to work.\n\nvar stage = new Kinetic.Stage({ container: 'container', width: width, height: height }); \nstage.on(\"touchmove\", function(evt) {\n               evt.cancelBubble = true; \n            }); \nstage.on(\"touchstart\", function(evt) {\n               evt.cancelBubble = true; \n            });\n\nWhen I try and scroll on a mobile device nothing happens.\u00a0 Oddly enough when there is a dialog over the canvas it does scroll.\u00a0 Not sure what that means, probably not helpful.\n\nI think the issue is evt.preventDefault()call.\u00a0 It seems to stop the mobile browsers from performing the default scrolling behavior.\u00a0 There are ways to register with the framework to implement scrolling on your own though all of the solutions would be rather complicated so I'd prefer to let the browser do its thing.\n\nI am still working around this by creating my own stage class.\u00a0 Not a very elegant solution though it seems to work.\u00a0 Is there something specific that Kinetic requires the preventDefault() for?\n\n/**\n\u00a0\\* Extend the default Kinetic stage.\n\u00a0_/\nKinetic.Global.extend(MyStage, Kinetic.Stage);\nfunction MyStage(mobile, config) {\n\u00a0\u00a0\u00a0 this.mobile = mobile;\n\u00a0\u00a0\u00a0 this._initStage(config);\n}\n/_*\n\u00a0\\* Overrided the default touchstart implementation.\n\u00a0*/\nMyStage.prototype._touchstart = function(evt) {\n\u00a0\u00a0\u00a0 this._setUserPosition(evt);\n\u00a0\u00a0\u00a0 if (!this.mobile) {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 evt.preventDefault();\n\u00a0\u00a0\u00a0 }\n\u00a0\u00a0\u00a0 var obj = this.getIntersection(this.getUserPosition());\n\n\u00a0\u00a0\u00a0 if(obj && obj.shape) {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 var shape = obj.shape;\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 this.tapStart = true;\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 shape._handleEvent('touchstart', evt);\n\u00a0\u00a0\u00a0 }\n\n\u00a0\u00a0\u00a0 /*\n\u00a0\u00a0\u00a0\u00a0 \\* init stage drag and drop\n\u00a0\u00a0\u00a0\u00a0 _/\n\u00a0\u00a0\u00a0 if(Kinetic.DD && this.attrs.draggable) {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 this._initDrag();\n\u00a0\u00a0\u00a0 }\n}\n/_*\n\u00a0\\* Override the default touchmove implementation.\n\u00a0*/\nMyStage.prototype._touchmove = function(evt) { // Override the default touchmove handler.\n\u00a0\u00a0\u00a0 this._setUserPosition(evt);\n\u00a0\u00a0\u00a0 var dd = Kinetic.DD;\n\u00a0\u00a0\u00a0 if (!this.mobile) {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 evt.preventDefault();\n\u00a0\u00a0\u00a0 }\n\u00a0\u00a0\u00a0 var obj = this.getIntersection(this.getUserPosition());\n\u00a0\u00a0\u00a0 if(obj && obj.shape) {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 var shape = obj.shape;\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 shape._handleEvent('touchmove', evt);\n\u00a0\u00a0\u00a0 }\n\n\u00a0\u00a0\u00a0 // start drag and drop\n\u00a0\u00a0\u00a0 if(dd) {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 dd._startDrag(evt);\n\u00a0\u00a0\u00a0 }\n}\n\n---\n\n From: Eric Rowell notifications@github.com\nTo: ericdrowell/KineticJS KineticJS@noreply.github.com \nCc: blueshirts milanoa@yahoo.com \nSent: Wednesday, December 12, 2012 10:33 PM\nSubject: Re: [KineticJS] Issue With Default iPad/iPod Scrolling (#162)\n\nthis is an event bubbling issue.  have you guys tried canceling the event propagation at the stage level?  try something like this:\nstage.on('touchmove', function(evt) {\nevt.cancelBubble = true;\n});\nor you can also try preventing the default action by adding listeners to the stage dom (stage.getDOM()), the body element of the page, and you also have options with meta tags for mobile devices.  If you guys are still stumped, I'll take a look at this one as soon as I get a chance.  Just let me know.\n\u2014\nReply to this email directly or view it on GitHub.\n. Sure though I am still just working around the issue as I posted earlier in this thread.  It's not an ideal workaround though it works.\n. I am able to work around this issue by extending the default Stage class only calling evt.preventDefault() when I am on a mobile device.  Not sure what bad effects this may cause though so far seem to meet my usage.  It would be nice if there were an easier way to modify the default behavior.\n\n```\nKinetic.Global.extend(MyStage, Kinetic.Stage);\nfunction MyStage(mobile, config) {\n    this.mobile = mobile;\n    this._initStage(config);\n}\nMyStage.prototype._touchstart = function(evt) {\n    this._setUserPosition(evt);\n    if (!this.mobile) {\n        evt.preventDefault();\n    }\n    var obj = this.getIntersection(this.getUserPosition());\n\n    if(obj && obj.shape) {\n        var shape = obj.shape;\n        this.tapStart = true;\n        shape._handleEvent('touchstart', evt);\n    }\n\n    /*\n                         * init stage drag and drop\n                         */\n    if(Kinetic.DD && this.attrs.draggable) {\n        this._initDrag();\n    }\n}\nMyStage.prototype._touchmove = function(evt) { // Override the default touchmove handler.\n    this._setUserPosition(evt);\n    var dd = Kinetic.DD;\n    if (!this.mobile) {\n        evt.preventDefault();\n    }\n    var obj = this.getIntersection(this.getUserPosition());\n    if(obj && obj.shape) {\n        var shape = obj.shape;\n        shape._handleEvent('touchmove', evt);\n    }\n\n    // start drag and drop\n    if(dd) {\n        dd._startDrag(evt);\n    }\n}\n```\n. Took me a bit to get back around to this though I tried the cancelBubble and it didn't seem to work.\n\nvar stage = new Kinetic.Stage({ container: 'container', width: width, height: height }); \nstage.on(\"touchmove\", function(evt) {\n               evt.cancelBubble = true; \n            }); \nstage.on(\"touchstart\", function(evt) {\n               evt.cancelBubble = true; \n            });\n\nWhen I try and scroll on a mobile device nothing happens.\u00a0 Oddly enough when there is a dialog over the canvas it does scroll.\u00a0 Not sure what that means, probably not helpful.\n\nI think the issue is evt.preventDefault()call.\u00a0 It seems to stop the mobile browsers from performing the default scrolling behavior.\u00a0 There are ways to register with the framework to implement scrolling on your own though all of the solutions would be rather complicated so I'd prefer to let the browser do its thing.\n\nI am still working around this by creating my own stage class.\u00a0 Not a very elegant solution though it seems to work.\u00a0 Is there something specific that Kinetic requires the preventDefault() for?\n\n/**\n\u00a0\\* Extend the default Kinetic stage.\n\u00a0_/\nKinetic.Global.extend(MyStage, Kinetic.Stage);\nfunction MyStage(mobile, config) {\n\u00a0\u00a0\u00a0 this.mobile = mobile;\n\u00a0\u00a0\u00a0 this._initStage(config);\n}\n/_*\n\u00a0\\* Overrided the default touchstart implementation.\n\u00a0*/\nMyStage.prototype._touchstart = function(evt) {\n\u00a0\u00a0\u00a0 this._setUserPosition(evt);\n\u00a0\u00a0\u00a0 if (!this.mobile) {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 evt.preventDefault();\n\u00a0\u00a0\u00a0 }\n\u00a0\u00a0\u00a0 var obj = this.getIntersection(this.getUserPosition());\n\n\u00a0\u00a0\u00a0 if(obj && obj.shape) {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 var shape = obj.shape;\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 this.tapStart = true;\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 shape._handleEvent('touchstart', evt);\n\u00a0\u00a0\u00a0 }\n\n\u00a0\u00a0\u00a0 /*\n\u00a0\u00a0\u00a0\u00a0 \\* init stage drag and drop\n\u00a0\u00a0\u00a0\u00a0 _/\n\u00a0\u00a0\u00a0 if(Kinetic.DD && this.attrs.draggable) {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 this._initDrag();\n\u00a0\u00a0\u00a0 }\n}\n/_*\n\u00a0\\* Override the default touchmove implementation.\n\u00a0*/\nMyStage.prototype._touchmove = function(evt) { // Override the default touchmove handler.\n\u00a0\u00a0\u00a0 this._setUserPosition(evt);\n\u00a0\u00a0\u00a0 var dd = Kinetic.DD;\n\u00a0\u00a0\u00a0 if (!this.mobile) {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 evt.preventDefault();\n\u00a0\u00a0\u00a0 }\n\u00a0\u00a0\u00a0 var obj = this.getIntersection(this.getUserPosition());\n\u00a0\u00a0\u00a0 if(obj && obj.shape) {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 var shape = obj.shape;\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 shape._handleEvent('touchmove', evt);\n\u00a0\u00a0\u00a0 }\n\n\u00a0\u00a0\u00a0 // start drag and drop\n\u00a0\u00a0\u00a0 if(dd) {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 dd._startDrag(evt);\n\u00a0\u00a0\u00a0 }\n}\n\n---\n\n From: Eric Rowell notifications@github.com\nTo: ericdrowell/KineticJS KineticJS@noreply.github.com \nCc: blueshirts milanoa@yahoo.com \nSent: Wednesday, December 12, 2012 10:33 PM\nSubject: Re: [KineticJS] Issue With Default iPad/iPod Scrolling (#162)\n\nthis is an event bubbling issue.  have you guys tried canceling the event propagation at the stage level?  try something like this:\nstage.on('touchmove', function(evt) {\nevt.cancelBubble = true;\n});\nor you can also try preventing the default action by adding listeners to the stage dom (stage.getDOM()), the body element of the page, and you also have options with meta tags for mobile devices.  If you guys are still stumped, I'll take a look at this one as soon as I get a chance.  Just let me know.\n\u2014\nReply to this email directly or view it on GitHub.\n. Sure though I am still just working around the issue as I posted earlier in this thread.  It's not an ideal workaround though it works.\n. ",
    "Furmantation": "Is there a definitive solution / workaround to this issue?  I've tried both the cancelBubble and the class extension with no luck.  On an iPad, I'm only able to scroll the canvas using the very outer edges, which is very unintuitive for users.  Any guidance is appreciated.\n. Blueshirts - may I contact you to discuss your fix?  Thx.\n. Much appreciated, I'm adam at furmantation.com. Understand it's not an\nideal solution, but definitely sounds to be an improvement over the current\nuser experience for this particular issue.  Thanks.\n\nOn Fri, Apr 5, 2013 at 8:32 AM, blueshirts notifications@github.com wrote:\n\n> Sure though I am still just working around the issue as I posted earlier\n> in this thread. It's not an ideal workaround though it works.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/162#issuecomment-15962760\n> .\n. Thanks Eric, much appreciated.  Great work on KineticJS.  I did get\nBlueShirts workaround to work, but it does prevent dragging and dropping\nitems on the stage.  It also interferes with touching items on stage,\ncausing what appears similar to a screen flicker / flash.  Do you think it\nwill be possible to make the stage draggable by using areas that do not\ncontain a node?\n\nOn Sat, Apr 6, 2013 at 10:53 PM, Eric Rowell notifications@github.comwrote:\n\n> ah okay. the stage is using evt.preventDefault() to prevent the page from\n> scrolling when you try to drag and drop. Come to think of it though, it\n> doesn't make much sense to use evt.preventDefault() everytime (i.e. for\n> cases when you are not trying to drag and drop). I'll look into this\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/162#issuecomment-16010035\n> .\n. Yes, but won't this also cause all of the objects on the stage to move\nalong with the stage (as per the example)?  I'm only interested to make the\nstage scrollable (not pannable) so that it is possible to view elements\nthat extend beyond the viewing area on an iPad.\n\nOn Sun, Apr 7, 2013 at 9:14 PM, Eric Rowell notifications@github.comwrote:\n\n> This is possible today. just make the whole stage draggable. This enables\n> panning. Here's a tutorial:\n> \n> http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-the-stage-with-kineticjs/\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/162#issuecomment-16031791\n> .\n. Sure, that is one form of scrolling.  I'll give this approach a try and\nprovide feedback.  Thanks.\n\nOn Sun, Apr 7, 2013 at 9:44 PM, Eric Rowell notifications@github.comwrote:\n\n> hm, isn't that what scrolling is? when you scroll downwards, you're\n> panning the stage upwards, right? If you're looking to implement\n> scrollbars, here's a lab that shows a way to accomplish this:\n> \n> http://www.html5canvastutorials.com/labs/html5-canvas-simple-scrollbars-with-kineticjs/\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/162#issuecomment-16032307\n> .\n. Hi Eric - this approach does make the stage draggable, but does not\naccomplish the correct result on an iPad.  The rest of the document does\nnot scroll with the stage moving, it simply allows the user to drag the\nstage, yet content below the stage (off screen) stays hidden.  Any other\nsuggestions to try? Thanks.\n\nOn Sun, Apr 7, 2013 at 9:54 PM, Adam Furman afurman@furmantation.comwrote:\n\n> Sure, that is one form of scrolling.  I'll give this approach a try and\n> provide feedback.  Thanks.\n> \n> On Sun, Apr 7, 2013 at 9:44 PM, Eric Rowell notifications@github.comwrote:\n> \n> > hm, isn't that what scrolling is? when you scroll downwards, you're\n> > panning the stage upwards, right? If you're looking to implement\n> > scrollbars, here's a lab that shows a way to accomplish this:\n> > \n> > http://www.html5canvastutorials.com/labs/html5-canvas-simple-scrollbars-with-kineticjs/\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/162#issuecomment-16032307\n> > .\n. Is there a definitive solution / workaround to this issue?  I've tried both the cancelBubble and the class extension with no luck.  On an iPad, I'm only able to scroll the canvas using the very outer edges, which is very unintuitive for users.  Any guidance is appreciated.\n. Blueshirts - may I contact you to discuss your fix?  Thx.\n. Much appreciated, I'm adam at furmantation.com. Understand it's not an\nideal solution, but definitely sounds to be an improvement over the current\nuser experience for this particular issue.  Thanks.\n\nOn Fri, Apr 5, 2013 at 8:32 AM, blueshirts notifications@github.com wrote:\n\n> Sure though I am still just working around the issue as I posted earlier\n> in this thread. It's not an ideal workaround though it works.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/162#issuecomment-15962760\n> .\n. Thanks Eric, much appreciated.  Great work on KineticJS.  I did get\nBlueShirts workaround to work, but it does prevent dragging and dropping\nitems on the stage.  It also interferes with touching items on stage,\ncausing what appears similar to a screen flicker / flash.  Do you think it\nwill be possible to make the stage draggable by using areas that do not\ncontain a node?\n\nOn Sat, Apr 6, 2013 at 10:53 PM, Eric Rowell notifications@github.comwrote:\n\n> ah okay. the stage is using evt.preventDefault() to prevent the page from\n> scrolling when you try to drag and drop. Come to think of it though, it\n> doesn't make much sense to use evt.preventDefault() everytime (i.e. for\n> cases when you are not trying to drag and drop). I'll look into this\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/162#issuecomment-16010035\n> .\n. Yes, but won't this also cause all of the objects on the stage to move\nalong with the stage (as per the example)?  I'm only interested to make the\nstage scrollable (not pannable) so that it is possible to view elements\nthat extend beyond the viewing area on an iPad.\n\nOn Sun, Apr 7, 2013 at 9:14 PM, Eric Rowell notifications@github.comwrote:\n\n> This is possible today. just make the whole stage draggable. This enables\n> panning. Here's a tutorial:\n> \n> http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-the-stage-with-kineticjs/\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/162#issuecomment-16031791\n> .\n. Sure, that is one form of scrolling.  I'll give this approach a try and\nprovide feedback.  Thanks.\n\nOn Sun, Apr 7, 2013 at 9:44 PM, Eric Rowell notifications@github.comwrote:\n\n> hm, isn't that what scrolling is? when you scroll downwards, you're\n> panning the stage upwards, right? If you're looking to implement\n> scrollbars, here's a lab that shows a way to accomplish this:\n> \n> http://www.html5canvastutorials.com/labs/html5-canvas-simple-scrollbars-with-kineticjs/\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/162#issuecomment-16032307\n> .\n. Hi Eric - this approach does make the stage draggable, but does not\naccomplish the correct result on an iPad.  The rest of the document does\nnot scroll with the stage moving, it simply allows the user to drag the\nstage, yet content below the stage (off screen) stays hidden.  Any other\nsuggestions to try? Thanks.\n\nOn Sun, Apr 7, 2013 at 9:54 PM, Adam Furman afurman@furmantation.comwrote:\n\n> Sure, that is one form of scrolling.  I'll give this approach a try and\n> provide feedback.  Thanks.\n> \n> On Sun, Apr 7, 2013 at 9:44 PM, Eric Rowell notifications@github.comwrote:\n> \n> > hm, isn't that what scrolling is? when you scroll downwards, you're\n> > panning the stage upwards, right? If you're looking to implement\n> > scrollbars, here's a lab that shows a way to accomplish this:\n> > \n> > http://www.html5canvastutorials.com/labs/html5-canvas-simple-scrollbars-with-kineticjs/\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/162#issuecomment-16032307\n> > .\n. ",
    "timgolding": "What I really need/ want is a way to allow ipad users to zoom and scroll and still detect the touch events. If i comment out evt.preventDefault() from the kinetic js script then i can zoom and scroll around the canvas. As soon as one scrolls or zooms with the ipad default behaviour then the touch events stop working properly. I have to zoom completely out for the touch event to be registered. If i leave the evt.preventDefault()  code in the script i can't zoom or scroll from the canvas. but i can still scroll / zoom from anywhere else on the page. As soon as i do this though i can't click the shape etc. What i really need is a way to be able to allow ipad to zoom in and scroll with the defaults over the canvas but still register the touch events. If that's possible?\n. I edited kinetic-v3.8.3.js\nI commented out the lines\n\nevt.preventDefault();\n\nThis was in three places for events touchstart, touchmove, touchend.\n\nCommenting these lines out from the kinetic js class has allowed the resizing and scrolling to work on the ipad at least. Also tested on android. I use this technique in conjunction with a browser detection script found at \n\nhttp://techpatterns.com/downloads/php_browser_detection.php\n\nThat way i can serve one script for desktops with mouse events and one for mobile / tablets applications with touch events. \n. What I really need/ want is a way to allow ipad users to zoom and scroll and still detect the touch events. If i comment out evt.preventDefault() from the kinetic js script then i can zoom and scroll around the canvas. As soon as one scrolls or zooms with the ipad default behaviour then the touch events stop working properly. I have to zoom completely out for the touch event to be registered. If i leave the evt.preventDefault()  code in the script i can't zoom or scroll from the canvas. but i can still scroll / zoom from anywhere else on the page. As soon as i do this though i can't click the shape etc. What i really need is a way to be able to allow ipad to zoom in and scroll with the defaults over the canvas but still register the touch events. If that's possible?\n. I edited kinetic-v3.8.3.js\nI commented out the lines\n\nevt.preventDefault();\n\nThis was in three places for events touchstart, touchmove, touchend.\n\nCommenting these lines out from the kinetic js class has allowed the resizing and scrolling to work on the ipad at least. Also tested on android. I use this technique in conjunction with a browser detection script found at \n\nhttp://techpatterns.com/downloads/php_browser_detection.php\n\nThat way i can serve one script for desktops with mouse events and one for mobile / tablets applications with touch events. \n. ",
    "bxxfxxx": "Sorry for the weird font size, first time i use github. not quite sure how i achieved this ...\n. As it was written in the issue #128, i tried to change 'if (config.offset !== undefined)' in 'if (config && config.offset !== undefined)' and the clone method actually succeeded.\n\nI read that this bug was fixed in v 4.0.5.\nBut it seems it's still roaming around.\n\nAm i doing something wrong ?\n\nI can try to post an example of my code if i'm not understandable.\n\nAnd sorry for my poor english by the way !\n. hi there,\nnot sure this commit was actually added to the official build.\nstill have the draggable bug in 4.7.4 version.\nbut perhaps i misunderstood something :p\n. Sorry for the weird font size, first time i use github. not quite sure how i achieved this ...\n. As it was written in the issue #128, i tried to change 'if (config.offset !== undefined)' in 'if (config && config.offset !== undefined)' and the clone method actually succeeded.\n\nI read that this bug was fixed in v 4.0.5.\nBut it seems it's still roaming around.\n\nAm i doing something wrong ?\n\nI can try to post an example of my code if i'm not understandable.\n\nAnd sorry for my poor english by the way !\n. hi there,\nnot sure this commit was actually added to the official build.\nstill have the draggable bug in 4.7.4 version.\nbut perhaps i misunderstood something :p\n. ",
    "CSI68": "Yes, with the 4.1.0 release the drag seems to fail on IE, Firefox but for me on Chrome all works fine.\n. Thanks Eric for your fast update, works fine now.\n. lazerblade01, thx to your answer.\n\nYou right for the font load, I need to 'precache' fonts before using in canvas. There is a lot of tool for that \nhttps://developers.google.com/webfonts/docs/webfont_loader?hl=fr\n\nFor the second thing, it does not work, I have inserted in a div the same text with the same font in the same size and the anti-aliasing is ok on all browsers. But not on my canvas except in firefox and IE. Chrome fail anti aliasing on canvas.\n. Here is my code (from fontssquirrel) :\n\n@font-face {\n    font-family: 'CalligraffitiRegular';\n    src: url('../../fonts/Calligraffiti.eot');\n    src: url('../../fonts/Calligraffiti.eot?#iefix') format('embedded-opentype'),\n         url('../../fonts/Calligraffiti.woff') format('woff'),\n         url('../../fonts/Calligraffiti.ttf') format('truetype'),\n         url('../../fonts/Calligraffiti.svg#CalligraffitiRegular') format('svg');\n    font-weight: normal;\n    font-style: normal;\n}\n\nAll fonts are wrong in my canvas in Chrome (arial, times ...) but in a div or a p, it's fine...\n\nlazerblade01 thx for your help\n. When I save image via toDataUrl function, the result is different on IE and Chrome, same thing on Chrome no anti aliasing...\n. I'm not really sure on what you want to do, but I've try this :\n\nSave a stage to an png file with ajax call and PHP GD \n\n// JS SCRIPT\nstage.toDataURL({\n    callback: function(dataUrl) {\n        var imgURL = dataUrl; // keep the entire url\n       $.ajax({\n           type: \"POST\",\n           url: \"/modules/customize/controllers/front/ajax_save_stage.php\", \n           data: ({imgData : imgURL}),\n           cache: false,\n           success: function(result){\n              window.open(dataUrl); // Show result stage in a new window\n              alert(result); // show php error if exists\n           }\n        });\n     }\n});\n\n// PHP SCRIPT\n$img = imagecreatefrompng($_POST['imgData']);\nimagepng($img, 'toto.png', 9); // your image name, dir and quality\nimagedestroy($img);\n\nTested and works fine on IE9, Firefox and Chrome\n. Hello bertrandg,\n\nI confirm that is the best way to do that. Upscale your stage - save it with toImage or toDataUrl - downscale to origin.\nFor better result I draw a blank layer over the stage during loading to avoid seeing iverflow element...\n. Yes I know I have the same behaviour on big image generation. But it seems normal because it's the browser is working for that. I've no solution for that, perhaps eric has an another way ?\n. Oups, sorry for that. Thanks lavrton for your answer I will that.\n. I ve found a part of answer...\nI use image.cache() for brightness parameter. So when I upscale the scene, the image keep the small image cache...\nI try this after upscale to recreate image cache : \nimage.clearCache();\nimage.cache({\n    x:-1_image.getWidth()/2,\n    y: -1_image.getHeight()/2,\n    width: image.getWidth()_scale,\n    height: image.getHeight()_scale\n});\nimage.drawHitFromCache();\nimage.filters([Kinetic.Filters.Brighten]);\n\nBut didn't work, the image is always small and resolution bad...\n. Yes, with the 4.1.0 release the drag seems to fail on IE, Firefox but for me on Chrome all works fine.\n. Thanks Eric for your fast update, works fine now.\n. lazerblade01, thx to your answer.\n\nYou right for the font load, I need to 'precache' fonts before using in canvas. There is a lot of tool for that \nhttps://developers.google.com/webfonts/docs/webfont_loader?hl=fr\n\nFor the second thing, it does not work, I have inserted in a div the same text with the same font in the same size and the anti-aliasing is ok on all browsers. But not on my canvas except in firefox and IE. Chrome fail anti aliasing on canvas.\n. Here is my code (from fontssquirrel) :\n\n@font-face {\n    font-family: 'CalligraffitiRegular';\n    src: url('../../fonts/Calligraffiti.eot');\n    src: url('../../fonts/Calligraffiti.eot?#iefix') format('embedded-opentype'),\n         url('../../fonts/Calligraffiti.woff') format('woff'),\n         url('../../fonts/Calligraffiti.ttf') format('truetype'),\n         url('../../fonts/Calligraffiti.svg#CalligraffitiRegular') format('svg');\n    font-weight: normal;\n    font-style: normal;\n}\n\nAll fonts are wrong in my canvas in Chrome (arial, times ...) but in a div or a p, it's fine...\n\nlazerblade01 thx for your help\n. When I save image via toDataUrl function, the result is different on IE and Chrome, same thing on Chrome no anti aliasing...\n. I'm not really sure on what you want to do, but I've try this :\n\nSave a stage to an png file with ajax call and PHP GD \n\n// JS SCRIPT\nstage.toDataURL({\n    callback: function(dataUrl) {\n        var imgURL = dataUrl; // keep the entire url\n       $.ajax({\n           type: \"POST\",\n           url: \"/modules/customize/controllers/front/ajax_save_stage.php\", \n           data: ({imgData : imgURL}),\n           cache: false,\n           success: function(result){\n              window.open(dataUrl); // Show result stage in a new window\n              alert(result); // show php error if exists\n           }\n        });\n     }\n});\n\n// PHP SCRIPT\n$img = imagecreatefrompng($_POST['imgData']);\nimagepng($img, 'toto.png', 9); // your image name, dir and quality\nimagedestroy($img);\n\nTested and works fine on IE9, Firefox and Chrome\n. Hello bertrandg,\n\nI confirm that is the best way to do that. Upscale your stage - save it with toImage or toDataUrl - downscale to origin.\nFor better result I draw a blank layer over the stage during loading to avoid seeing iverflow element...\n. Yes I know I have the same behaviour on big image generation. But it seems normal because it's the browser is working for that. I've no solution for that, perhaps eric has an another way ?\n. Oups, sorry for that. Thanks lavrton for your answer I will that.\n. I ve found a part of answer...\nI use image.cache() for brightness parameter. So when I upscale the scene, the image keep the small image cache...\nI try this after upscale to recreate image cache : \nimage.clearCache();\nimage.cache({\n    x:-1_image.getWidth()/2,\n    y: -1_image.getHeight()/2,\n    width: image.getWidth()_scale,\n    height: image.getHeight()_scale\n});\nimage.drawHitFromCache();\nimage.filters([Kinetic.Filters.Brighten]);\n\nBut didn't work, the image is always small and resolution bad...\n. ",
    "juliat": "I have drag and drop working, but once an object is draggable, setDraggable('false') has no effect.\n. @chrisritter Thanks! That worked. Then the only issue I have to comment on is that the docs look like they need an update over here: http://kineticjs.com/docs/symbols/Kinetic.Node.php#setDraggable\n. I have drag and drop working, but once an object is draggable, setDraggable('false') has no effect.\n. @chrisritter Thanks! That worked. Then the only issue I have to comment on is that the docs look like they need an update over here: http://kineticjs.com/docs/symbols/Kinetic.Node.php#setDraggable\n. ",
    "gamecubate": "I use Google Web Fonts and the font-weight attribute (fontWeight in Kinetic parlance) would help a lot.\n\nFor example, needing the Dosis font in weights 400 (default in Kinetic) and 800 (extra chunky; nice for headers) as well as the Rufina font in the default of 400, the link/api call would then be:\n<link href='http://fonts.googleapis.com/css?family=Dosis:400,800|Rufina' rel='stylesheet' type='text/css'>\n. I use Google Web Fonts and the font-weight attribute (fontWeight in Kinetic parlance) would help a lot.\n\nFor example, needing the Dosis font in weights 400 (default in Kinetic) and 800 (extra chunky; nice for headers) as well as the Rufina font in the default of 400, the link/api call would then be:\n<link href='http://fonts.googleapis.com/css?family=Dosis:400,800|Rufina' rel='stylesheet' type='text/css'>\n. ",
    "Elyx0": "Had the same problem here. As Kinetic 4.5.1 i first had to draw my shape and it's not until I try to animate it that the custom font kicks in and is cached. \n\nhttp://jsfiddle.net/hAWvr/2/ \n\nEvent with the preloading of an element with this font before any script it won't be ready on first run when Domready is called.\n\nhttp://jsfiddle.net/hAWvr/4/\n\nThe only option is to delay all drawings for the first time the font is loaded in this tab.\n\nhttp://jsfiddle.net/hAWvr/5/\n\nFor a much accurate delay I used google webfont loader: http://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js\n\nthen specify\n\n``` javascript\n    WebFontConfig = {\n      custom: { families: ['cabinregular'],\n      urls: [ './styles.css' ] },\n      active: function(){\n        //do whatever you want here, init cloud & stuff.\n      }\n    };\n```\n. To avoid messing with redefinitions of the `this` variable, you could define `var that = this;` before the `.on(\"click\")`\n. Had the same problem here. As Kinetic 4.5.1 i first had to draw my shape and it's not until I try to animate it that the custom font kicks in and is cached. \n\nhttp://jsfiddle.net/hAWvr/2/ \n\nEvent with the preloading of an element with this font before any script it won't be ready on first run when Domready is called.\n\nhttp://jsfiddle.net/hAWvr/4/\n\nThe only option is to delay all drawings for the first time the font is loaded in this tab.\n\nhttp://jsfiddle.net/hAWvr/5/\n\nFor a much accurate delay I used google webfont loader: http://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js\n\nthen specify\n\n``` javascript\n    WebFontConfig = {\n      custom: { families: ['cabinregular'],\n      urls: [ './styles.css' ] },\n      active: function(){\n        //do whatever you want here, init cloud & stuff.\n      }\n    };\n```\n. To avoid messing with redefinitions of the `this` variable, you could define `var that = this;` before the `.on(\"click\")`\n. ",
    "josearagon": "Thanks for your help CSI68, \n\nbut stage.toDataURL({  not work in Chrome, work perfectly in Mozilla and IExplorer but when i trace my code in Chrome, stop in the line stage.toDataURL({\n. Thanks for your help CSI68, \n\nbut stage.toDataURL({  not work in Chrome, work perfectly in Mozilla and IExplorer but when i trace my code in Chrome, stop in the line stage.toDataURL({\n. ",
    "Vixt": "Sure, here is a fiddle that does cause problems for me.\nhttp://jsfiddle.net/6C92G/4/\n\nHere is the same fiddle, but with layer.setListening(false) added. It does not cause problems for me.\nhttp://jsfiddle.net/y2632/1/\n\nI can also remove layer.draw() from my draw() function to achieve the same effect while still allowing the stars to be moved around.\nhttp://jsfiddle.net/Wgd5a/1/\n\nI am using Windows 7 and Chrome (latest). I have GPU acceleration turned on via chrome://flags. \n\nThis issue seems to be specific to chrome only. Everything works fine in IE9.\n\nEDIT: I turned off GPU acceleration in chrome and I could only get about 14 FPS, but no slowdown was present when moving the mouse. Must just be a odd combination of unsupported hardware. I'll continue development in IE or possibly firefox till Chrome gets its act together. \n\nThanks for the quick response time, I'm really enjoying developing with KineticJS, it's amazing!\n. Still experiencing the problem in 4.1.1. I am using 64 bit Windows.\n\nI think the issue is that my graphics card is blacklisted by chrome and I have to turn on GPU acceleration manually. For whatever reason GPU acceleration on my unsupported hardware causes this issue in chrome, as it is not present when I turn off GPU acceleration. (Although everything is unusable due to low frame rates.) \n\nWith GPU acceleration disabled: In the first fiddle I posted I get around 30 FPS with no drop in frame rates when moving the mouse across the canvas. (When not dragging anything), and about 5 FPS drop when dragging. \n\nThe last fiddle I posted gets 60 FPS with no drop in frame rates when moving the mouse across the screen (not dragging), and about 30 FPS when dragging. \n\nWith GPU acceleration: First fiddle gets 60 FPS, 30 fps drop when moving mouse and 30 fps drop when dragging. / Third fiddle gets 60 FPS, no drop when moving mouse ~30 FPS drop when dragging. \n\nI'm seeings the same results with 4.0.5 and 4.1.1.\n\nI'd just chalk this up to a odd combination of Chrome/64 bit/unsupported hardware.\n. Sure, here is a fiddle that does cause problems for me.\nhttp://jsfiddle.net/6C92G/4/\n\nHere is the same fiddle, but with layer.setListening(false) added. It does not cause problems for me.\nhttp://jsfiddle.net/y2632/1/\n\nI can also remove layer.draw() from my draw() function to achieve the same effect while still allowing the stars to be moved around.\nhttp://jsfiddle.net/Wgd5a/1/\n\nI am using Windows 7 and Chrome (latest). I have GPU acceleration turned on via chrome://flags. \n\nThis issue seems to be specific to chrome only. Everything works fine in IE9.\n\nEDIT: I turned off GPU acceleration in chrome and I could only get about 14 FPS, but no slowdown was present when moving the mouse. Must just be a odd combination of unsupported hardware. I'll continue development in IE or possibly firefox till Chrome gets its act together. \n\nThanks for the quick response time, I'm really enjoying developing with KineticJS, it's amazing!\n. Still experiencing the problem in 4.1.1. I am using 64 bit Windows.\n\nI think the issue is that my graphics card is blacklisted by chrome and I have to turn on GPU acceleration manually. For whatever reason GPU acceleration on my unsupported hardware causes this issue in chrome, as it is not present when I turn off GPU acceleration. (Although everything is unusable due to low frame rates.) \n\nWith GPU acceleration disabled: In the first fiddle I posted I get around 30 FPS with no drop in frame rates when moving the mouse across the canvas. (When not dragging anything), and about 5 FPS drop when dragging. \n\nThe last fiddle I posted gets 60 FPS with no drop in frame rates when moving the mouse across the screen (not dragging), and about 30 FPS when dragging. \n\nWith GPU acceleration: First fiddle gets 60 FPS, 30 fps drop when moving mouse and 30 fps drop when dragging. / Third fiddle gets 60 FPS, no drop when moving mouse ~30 FPS drop when dragging. \n\nI'm seeings the same results with 4.0.5 and 4.1.1.\n\nI'd just chalk this up to a odd combination of Chrome/64 bit/unsupported hardware.\n. ",
    "lcoffey": "O.K, still have an issue with this. \nIE9 with large amounts of text spends a huge amount of time on _initText -> _setTextData -> _getTextSize -> measureText . \nCount of 70 at 1,892 exclusive time.\n. Is nobody else having this exclusive time issue with IE9 and measureText canvas method in Kinetic.Text?\n. Thank you for your reply BlackScorp, but unless there is something I am not familiar with canvas and/or KineticJS your comment isn't relevant to the issue. I have not painted a larger picture because I am reporting an issue with a very specific part of KineticJS, a very easy issue to replicate. There are things we do with this canvas instance that I do not go into and don't actually interact with the issue at hand, so why confuse the situation?\n. Great, thanks Eric, you do awesome work.\nAnd it isn't a source of frustration, been too many years in all flavors of programming to get frustrated about interoperability; and it certainly isn't anybody's fault other than the pleb at ms who fashioned the method.\n\nI have been using JCanvas for a while and although it is a good library, it cannot compare to the performance of this one.\n. O.K, still have an issue with this. \nIE9 with large amounts of text spends a huge amount of time on _initText -> _setTextData -> _getTextSize -> measureText . \nCount of 70 at 1,892 exclusive time.\n. Is nobody else having this exclusive time issue with IE9 and measureText canvas method in Kinetic.Text?\n. Thank you for your reply BlackScorp, but unless there is something I am not familiar with canvas and/or KineticJS your comment isn't relevant to the issue. I have not painted a larger picture because I am reporting an issue with a very specific part of KineticJS, a very easy issue to replicate. There are things we do with this canvas instance that I do not go into and don't actually interact with the issue at hand, so why confuse the situation?\n. Great, thanks Eric, you do awesome work.\nAnd it isn't a source of frustration, been too many years in all flavors of programming to get frustrated about interoperability; and it certainly isn't anybody's fault other than the pleb at ms who fashioned the method.\n\nI have been using JCanvas for a while and although it is a good library, it cannot compare to the performance of this one.\n. ",
    "stewartl60": "Follow up to this one, the error is actually triggered on the mouseout event, after meeting the above conditions:\n\nelement.on('mouseout', function(){\n   //do something here\n   this.getLayer().draw();\n});\n\nthis.getLayer() throws the error\n. Proposed fix did not solve the issue, same error as before.\n. The trouble I have is that dd.moving evaluates to true on the node's _mouseup event. The _endDrag is the last function to execute. \n\nTemporary work around, store the coordinates on _mousedown. Then on _mouseup you can define a tolerance check if dd.moving is true. Selected 5 pixels for now. Code below if anyone is interested, note you need to fire _endDrag before handling the click event.\n\nvar click_position  = this.getUserPosition();\nvar diff_x          = Math.abs(this.click_position.x - click_position.x);\nvar diff_y          = Math.abs(this.click_position.y - click_position.y);\nthis.click_position = false;\n\n//give user a 5 pixel click tolerance to fire\nif(diff_y <= 5 || diff_x <= 5)\n{\n  this.clickStart = false;\n\n // end drag and drop\n if(dd) {\n  dd._endDrag(evt);\n }\n\n shape._handleEvent('click', evt);\n}\n. Follow up to this one, the error is actually triggered on the mouseout event, after meeting the above conditions:\n\nelement.on('mouseout', function(){\n   //do something here\n   this.getLayer().draw();\n});\n\nthis.getLayer() throws the error\n. Proposed fix did not solve the issue, same error as before.\n. The trouble I have is that dd.moving evaluates to true on the node's _mouseup event. The _endDrag is the last function to execute. \n\nTemporary work around, store the coordinates on _mousedown. Then on _mouseup you can define a tolerance check if dd.moving is true. Selected 5 pixels for now. Code below if anyone is interested, note you need to fire _endDrag before handling the click event.\n\nvar click_position  = this.getUserPosition();\nvar diff_x          = Math.abs(this.click_position.x - click_position.x);\nvar diff_y          = Math.abs(this.click_position.y - click_position.y);\nthis.click_position = false;\n\n//give user a 5 pixel click tolerance to fire\nif(diff_y <= 5 || diff_x <= 5)\n{\n  this.clickStart = false;\n\n // end drag and drop\n if(dd) {\n  dd._endDrag(evt);\n }\n\n shape._handleEvent('click', evt);\n}\n. ",
    "charlesbodman": "I am getting a similar issue.\n\nFix would be great, thanks.\n. I am getting a similar issue.\n\nFix would be great, thanks.\n. ",
    "danshultz": "Here is a js fiddle of the error\nhttp://jsfiddle.net/m2sUr/3/\n\nUnfortunately, inside js fiddle, the click event does not fire (not sure why) so please view it here --> http://jsfiddle.net/m2sUr/3/embedded/result/\n\nI'll try and get more info on why this is happening a bit later\n. As an aside, if I get into the nextTick by wrapping a setTimeout around the remove, things are fine.\n\n``` javascript\n\nsetTimeout(function () {\n  square.remove();\n}, 0);\n\n```\n. Here is a js fiddle of the error\nhttp://jsfiddle.net/m2sUr/3/\n\nUnfortunately, inside js fiddle, the click event does not fire (not sure why) so please view it here --> http://jsfiddle.net/m2sUr/3/embedded/result/\n\nI'll try and get more info on why this is happening a bit later\n. As an aside, if I get into the nextTick by wrapping a setTimeout around the remove, things are fine.\n\n``` javascript\n\nsetTimeout(function () {\n  square.remove();\n}, 0);\n\n```\n. ",
    "dkulagin": "Unfortunatelly got the same issue, when object \"looses\" its parent inside .transitionTo method. Had to rollback to v4.0.5\n\nP.S. Happens only on \"concurrent\" runs. I.e. if I run another transitionTo before previous has been done.\n. Unfortunatelly got the same issue, when object \"looses\" its parent inside .transitionTo method. Had to rollback to v4.0.5\n\nP.S. Happens only on \"concurrent\" runs. I.e. if I run another transitionTo before previous has been done.\n. ",
    "eddielee6": "I am getting the exact issue @mrgoodcat has described \"if I run another transitionTo before previous has been done.\" with v4.2.0\n. I am getting the exact issue @mrgoodcat has described \"if I run another transitionTo before previous has been done.\" with v4.2.0\n. ",
    "ashokpd": "I am getting the this.getParent()  undefined error message. I am deleting an array with groups(having shapes) and shapes(line, rect etc) as its elements. Individual shapes are getting deleted but the error occurs if there is any one group inside that array. Thanks !!!\n. I am getting the this.getParent()  undefined error message. I am deleting an array with groups(having shapes) and shapes(line, rect etc) as its elements. Individual shapes are getting deleted but the error occurs if there is any one group inside that array. Thanks !!!\n. ",
    "bertrandg": "hi,\nCan someone confirm we have to do that to export images bigger than canvas size with the latest kinetic version (5.1.0) ?\n\nI see `toDataUrl` function directly on `Kinetic.Image` in the api but it's not working.. \nhttp://kineticjs.com/docs/Kinetic.Image.html#toDataURL\n. thx CSI68, I did it and it works well.\n\nI just have a little freeze during `toDataUrl` for biggest images (around 2500x1700). Do you have any advices to avoid that?\n. hi,\nCan someone confirm we have to do that to export images bigger than canvas size with the latest kinetic version (5.1.0) ?\n\nI see `toDataUrl` function directly on `Kinetic.Image` in the api but it's not working.. \nhttp://kineticjs.com/docs/Kinetic.Image.html#toDataURL\n. thx CSI68, I did it and it works well.\n\nI just have a little freeze during `toDataUrl` for biggest images (around 2500x1700). Do you have any advices to avoid that?\n. ",
    "jhr007": "FWIW I just found the .each method on the object returned by get. \n\nLeaving open as a suggestion\n. FWIW I just found the .each method on the object returned by get. \n\nLeaving open as a suggestion\n. ",
    "mciastek": "The problem wasn't fixed even in version 5.1.1. Still you need disable evt.preventDefault for mobile devices to enable scrolling on Kinetic.Stage which has layer with events, like this: \n`if (shape.isListening() && evt.preventDefault && !Kinetic.UA.mobile) {\n       evt.preventDefault();\n    }`\n. The problem wasn't fixed even in version 5.1.1. Still you need disable evt.preventDefault for mobile devices to enable scrolling on Kinetic.Stage which has layer with events, like this: \n`if (shape.isListening() && evt.preventDefault && !Kinetic.UA.mobile) {\n       evt.preventDefault();\n    }`\n. ",
    "PaulDMendoza": "Thanks for the quick response! \n\nI haven't made any changes to any code yet. I just pulled down the code locally 20 minutes ago and followed your instructions for installing Ruby and Rubygems and building the code. I was going to try and fix the transitionTo problem but since the tests didn't pass I figured I should get the tests passing before I go modifying stuff.\n\nI'm running in the latest version of Chrome btw on Windows 8 if that helps.\n\nIs it possible that the failure of the async tests caused the failure of the \"node and shape type selector\"?\n. Yeah, looks like all the tests worked fine now except for the async issues but I won't worry about those for now. \n. Actually, I think the solution is to bind to the draw/tick event for Kinetic for each frame instead instead of using setInterval() to manage my game state. I'll give that a shot.\n. Thanks for the quick response! \n\nI haven't made any changes to any code yet. I just pulled down the code locally 20 minutes ago and followed your instructions for installing Ruby and Rubygems and building the code. I was going to try and fix the transitionTo problem but since the tests didn't pass I figured I should get the tests passing before I go modifying stuff.\n\nI'm running in the latest version of Chrome btw on Windows 8 if that helps.\n\nIs it possible that the failure of the async tests caused the failure of the \"node and shape type selector\"?\n. Yeah, looks like all the tests worked fine now except for the async issues but I won't worry about those for now. \n. Actually, I think the solution is to bind to the draw/tick event for Kinetic for each frame instead instead of using setInterval() to manage my game state. I'll give that a shot.\n. ",
    "baelter": "The proposed fix break drag and drop. Working on new fix...\n. Instead change _setTouchPosition to:\n\n``` /**\n     * set touch position for mobile apps\n     * @param {Event} evt\n     */\n    _setTouchPosition: function(evt, ignore) {\n        if(evt.touches !== undefined && (evt.touches.length === 1 || this.touchPos === undefined)) {\n            // one finger\n            var touch = evt.touches[0];\n            // Get the information for finger #1\n            var touchX = touch.clientX - this._getContentPosition().left;\n            var touchY = touch.clientY - this._getContentPosition().top;\n\n            this.touchPos = {\n                x: touchX,\n                y: touchY\n            };\n        }\n    },\n```\n. The proposed fix break drag and drop. Working on new fix...\n. Instead change _setTouchPosition to:\n\n``` /**\n     * set touch position for mobile apps\n     * @param {Event} evt\n     */\n    _setTouchPosition: function(evt, ignore) {\n        if(evt.touches !== undefined && (evt.touches.length === 1 || this.touchPos === undefined)) {\n            // one finger\n            var touch = evt.touches[0];\n            // Get the information for finger #1\n            var touchX = touch.clientX - this._getContentPosition().left;\n            var touchY = touch.clientY - this._getContentPosition().top;\n\n            this.touchPos = {\n                x: touchX,\n                y: touchY\n            };\n        }\n    },\n```\n. ",
    "rtfeldman": "Admittedly I've only tried it in Chrome, but I'm definitely able to reproduce the original problem in Chrome on OS X using only the html5canvastutorials.com tutorial modified as described above.\n\nGiven that fonts are involved, I wonder if it's an OS issue--are you by chance trying to reproduce in Chrome on Windows or Linux?\n. Admittedly I've only tried it in Chrome, but I'm definitely able to reproduce the original problem in Chrome on OS X using only the html5canvastutorials.com tutorial modified as described above.\n\nGiven that fonts are involved, I wonder if it's an OS issue--are you by chance trying to reproduce in Chrome on Windows or Linux?\n. ",
    "lhwparis": "thanks for your answers. thats not correct chrome under windows7 with a touchscreen DOES support touchstart, touchend and touchmove we used it a lot in this specific project. the only thing not working correctly are the kinetic events tap and dbltap :/\n. thanks for your answers. thats not correct chrome under windows7 with a touchscreen DOES support touchstart, touchend and touchmove we used it a lot in this specific project. the only thing not working correctly are the kinetic events tap and dbltap :/\n. ",
    "rbluer": "Actually it does not work. Please let me provide more information. \n\nIn your example you are not using the rotation or rotationDeg parameters that are defined in the Sprite animation config data.\n\nI modified your animations configuration to include the rotationDeg attribute.  See below.  Please retest with with new configuration and you will see that it is not actually rotating the individual sprite frames.\n\nThanks for the example on jsfiddle.net; that resource makes it much easier to share and illustrate these issues:\n  http://jsfiddle.net/Scottt/aeG36/2/\n\nThis example needs to rotate and offset some of the sprite frames, not all of them.  I am not trying to rotate the whole animation but just trying to rotate and offset a few of the sprite frames so they are all aligned.  I think this example will better illustrate what I'm trying to do and where the issues are.  I'm displaying the whole sprite sheet to show how some of the sprite frames are not all aligned, but would need to be rotated 270 degrees.  Since the rotation occurs at point [0,0] of the sprite frame, then it will have to be offset to align it with the other frames.\n\nI should note that I'm basing the Sprite animation configuration capabilities upon the following URL:\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-sprite-tutorial/\n\n  Thanks so much for your time and help!\n   Scott\n\n'''\n var animations = {\n        idle: [{\n          x: 2,\n          y: 2,\n          width: 70,\n          height: 119,\n          rotationDeg: 90\n        }, {\n          x: 71,\n          y: 2,\n          width: 74,\n          height: 119,\n          rotationDeg: 90\n        }, {\n          x: 146,\n          y: 2,\n          width: 81,\n          height: 119,\n          rotationDeg: 90\n        }, {\n          x: 226,\n          y: 2,\n          width: 76,\n          height: 119,\n          rotationDeg: 90\n        }],\n        punch: [{\n          x: 2,\n          y: 138,\n          width: 74,\n          height: 122,\n          rotationDeg: 90\n        }, {\n          x: 76,\n          y: 138,\n          width: 84,\n          height: 122,\n          rotationDeg: 90\n        }, {\n          x: 346,\n          y: 138,\n          width: 120,\n          height: 122,\n          rotationDeg: 90\n        }]\n      };\n'''\n. Thanks Eric for the tips.  I'll pursue that as a possible solution.\n\nI really liked the tutorial at:\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-sprite-tutorial/\n\nThe table of commands have three horizontal rules and I must have incorrectly assumed that the third section applied to the animation configurations; wishful thinking I suppose.  Now that you mention it, I do see that all those properties have nothing to do with the animation configurations.\n\nThe only challenge that I see with using afterFrame is that there could be dozens if not hundreds of possible sprite animation combinations that it may be a bit tricky to setup an afterFrame function dynamically upon user selection.  What I have played around with so far is to extend the Sprite object's drawFunction to handle the sprite frame rotation and offset, but I'm needing to address the offsets.\n\nThanks greatly for clarifying those details and providing a few other possible routes!\n. Actually it does not work. Please let me provide more information. \n\nIn your example you are not using the rotation or rotationDeg parameters that are defined in the Sprite animation config data.\n\nI modified your animations configuration to include the rotationDeg attribute.  See below.  Please retest with with new configuration and you will see that it is not actually rotating the individual sprite frames.\n\nThanks for the example on jsfiddle.net; that resource makes it much easier to share and illustrate these issues:\n  http://jsfiddle.net/Scottt/aeG36/2/\n\nThis example needs to rotate and offset some of the sprite frames, not all of them.  I am not trying to rotate the whole animation but just trying to rotate and offset a few of the sprite frames so they are all aligned.  I think this example will better illustrate what I'm trying to do and where the issues are.  I'm displaying the whole sprite sheet to show how some of the sprite frames are not all aligned, but would need to be rotated 270 degrees.  Since the rotation occurs at point [0,0] of the sprite frame, then it will have to be offset to align it with the other frames.\n\nI should note that I'm basing the Sprite animation configuration capabilities upon the following URL:\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-sprite-tutorial/\n\n  Thanks so much for your time and help!\n   Scott\n\n'''\n var animations = {\n        idle: [{\n          x: 2,\n          y: 2,\n          width: 70,\n          height: 119,\n          rotationDeg: 90\n        }, {\n          x: 71,\n          y: 2,\n          width: 74,\n          height: 119,\n          rotationDeg: 90\n        }, {\n          x: 146,\n          y: 2,\n          width: 81,\n          height: 119,\n          rotationDeg: 90\n        }, {\n          x: 226,\n          y: 2,\n          width: 76,\n          height: 119,\n          rotationDeg: 90\n        }],\n        punch: [{\n          x: 2,\n          y: 138,\n          width: 74,\n          height: 122,\n          rotationDeg: 90\n        }, {\n          x: 76,\n          y: 138,\n          width: 84,\n          height: 122,\n          rotationDeg: 90\n        }, {\n          x: 346,\n          y: 138,\n          width: 120,\n          height: 122,\n          rotationDeg: 90\n        }]\n      };\n'''\n. Thanks Eric for the tips.  I'll pursue that as a possible solution.\n\nI really liked the tutorial at:\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-sprite-tutorial/\n\nThe table of commands have three horizontal rules and I must have incorrectly assumed that the third section applied to the animation configurations; wishful thinking I suppose.  Now that you mention it, I do see that all those properties have nothing to do with the animation configurations.\n\nThe only challenge that I see with using afterFrame is that there could be dozens if not hundreds of possible sprite animation combinations that it may be a bit tricky to setup an afterFrame function dynamically upon user selection.  What I have played around with so far is to extend the Sprite object's drawFunction to handle the sprite frame rotation and offset, but I'm needing to address the offsets.\n\nThanks greatly for clarifying those details and providing a few other possible routes!\n. ",
    "mparpaillon": "Ok that's weird... it's lightning fast on IE9 (~400ms).\nIs that a bug in Chrome or a compatibility issue ?\n. ...Aaaaaand lightning fast on Firefox too. Ok there's definitely an issue on Chrome\n. Hi Eric, thanks for your answer,\n\nActually I can't create a single pattern because I have many different textures (grass, sand, earth, sea, lake, etc). Furthermore my map is dynamic (The player will be able to interact with it).\n\nBut it's ok now. The performance are actually great (400ms). It's just Chrome I guess...\n. Actually if I comment this single line (\"stage.add(layer)\"), the canvas loads in ~200ms (instead of ~3000ms). So I guess this is it (Although I don't really know how the stage.add works).\n\nFinally, all the benchmarks on my code indicate that Chrome is faster (about 3 times) than Firefox or IE9... except for this single line which takes a year to execute on Chrome\n. Ok here is my situation.\nI have a png file with all my tiles (5 textures for now). I have a loop to crop it so I can use each tile separately. So i had this in nested loops:\n\n``` javascript\nvar texture, kind;\nvar fieldsImg = new Image();\nfieldsImg.src = tiles.fields.img;\nfieldsImg.onload = function() {\n    for(var i in tiles.fields.texture) {\n        texture = tiles.fields.texture[i];\n        self.fields[texture] = new Array();\n        self.fields[texture][\"core\"] = new Kinetic.Image({\n            image: fieldsImg,\n            width: tiles.w,\n            height: tiles.h,\n            crop: {\n                x: 0,\n                y: i * tiles.h,\n                width: tiles.w,\n                height: tiles.h\n            }\n        });\n    }\n\n    self.tilesLoaded = true;\n    self._drawMap();\n}\n\n```\n\nSo i could do this \n\n``` javascript\nself.layer.add(self.fields[\"lake\"][\"core\"].clone({x: x, y: y}));\n```\n\nNow I'vechanged it so I don't use clone() anymore. So I just store the config like this in my loop:\n\n``` javascript\nself.fields[texture][\"core\"] = {\n    image: fieldsImg,\n    width: tiles.w/2,\n    height: tiles.h/2,\n    crop: {\n        x: (j * tiles.w) + shift.x,\n        y: (i * tiles.h) + shift.y,\n        width: tiles.w/2,\n        height: tiles.h/2\n    }\n};\n```\n\n...to use it like this\n\n``` javascript\ncore = new Kinetic.Image(self.fields[\"grass\"][\"core\"]);\ncore.move(x, y);\n\nself.layer.add(core);\n```\n. Issue closed. Chrome has apparently fixed the bug (I didn't update my Kinetic library)\n. Ok that's weird... it's lightning fast on IE9 (~400ms).\nIs that a bug in Chrome or a compatibility issue ?\n. ...Aaaaaand lightning fast on Firefox too. Ok there's definitely an issue on Chrome\n. Hi Eric, thanks for your answer,\n\nActually I can't create a single pattern because I have many different textures (grass, sand, earth, sea, lake, etc). Furthermore my map is dynamic (The player will be able to interact with it).\n\nBut it's ok now. The performance are actually great (400ms). It's just Chrome I guess...\n. Actually if I comment this single line (\"stage.add(layer)\"), the canvas loads in ~200ms (instead of ~3000ms). So I guess this is it (Although I don't really know how the stage.add works).\n\nFinally, all the benchmarks on my code indicate that Chrome is faster (about 3 times) than Firefox or IE9... except for this single line which takes a year to execute on Chrome\n. Ok here is my situation.\nI have a png file with all my tiles (5 textures for now). I have a loop to crop it so I can use each tile separately. So i had this in nested loops:\n\n``` javascript\nvar texture, kind;\nvar fieldsImg = new Image();\nfieldsImg.src = tiles.fields.img;\nfieldsImg.onload = function() {\n    for(var i in tiles.fields.texture) {\n        texture = tiles.fields.texture[i];\n        self.fields[texture] = new Array();\n        self.fields[texture][\"core\"] = new Kinetic.Image({\n            image: fieldsImg,\n            width: tiles.w,\n            height: tiles.h,\n            crop: {\n                x: 0,\n                y: i * tiles.h,\n                width: tiles.w,\n                height: tiles.h\n            }\n        });\n    }\n\n    self.tilesLoaded = true;\n    self._drawMap();\n}\n\n```\n\nSo i could do this \n\n``` javascript\nself.layer.add(self.fields[\"lake\"][\"core\"].clone({x: x, y: y}));\n```\n\nNow I'vechanged it so I don't use clone() anymore. So I just store the config like this in my loop:\n\n``` javascript\nself.fields[texture][\"core\"] = {\n    image: fieldsImg,\n    width: tiles.w/2,\n    height: tiles.h/2,\n    crop: {\n        x: (j * tiles.w) + shift.x,\n        y: (i * tiles.h) + shift.y,\n        width: tiles.w/2,\n        height: tiles.h/2\n    }\n};\n```\n\n...to use it like this\n\n``` javascript\ncore = new Kinetic.Image(self.fields[\"grass\"][\"core\"]);\ncore.move(x, y);\n\nself.layer.add(core);\n```\n. Issue closed. Chrome has apparently fixed the bug (I didn't update my Kinetic library)\n. ",
    "danielkur": "I have added two new shapes: Arc and Spline. Commits also include units test.\nRegards!\n. I have added two new shapes: Arc and Spline. Commits also include units test.\nRegards!\n. ",
    "fbrussa": "I solved using the \"dragend\" event too.\n. Thanks Eric\n. Yes Eric, sorry, this should not go here.\n. I solved using the \"dragend\" event too.\n. Thanks Eric\n. Yes Eric, sorry, this should not go here.\n. ",
    "hakhak": "I commented this in other issue but another problem is that if your drag ends so that the cursor is above a group/shape that is under the dragged element (in z-index) you get a mouseup event for the lower not dragged element which is very confusing too. You can test this with http://jsfiddle.net/SWj9m/3/ and look the javascript console for events text. So I had to refractor my code to use dragend only because one can not trust the mouseup event to be correct.\n. Hi,\n\nSo I figured out the problem in my code. Seems to be something changed with the mouse event handling. Running this in Chrome. There is a small example on http://jsfiddle.net/SWj9m/20/. Just examine the event codes in javascript console.\n\nSo if I have to groups with rectangle shapes in them and I drag the one on top (in z-index). I get the mousedown event for it. When I end the drag so that the cursor is above the lower rectange (in z-index) I don't get the mouseup for the dragged element but the lower element that was not moved. So combinig this with some handling in code trusting the events you can get your application messed up for good. In earlier versions you go the mouseup event for the dragged element.\n. I commented this in other issue but another problem is that if your drag ends so that the cursor is above a group/shape that is under the dragged element (in z-index) you get a mouseup event for the lower not dragged element which is very confusing too. You can test this with http://jsfiddle.net/SWj9m/3/ and look the javascript console for events text. So I had to refractor my code to use dragend only because one can not trust the mouseup event to be correct.\n. Hi,\n\nSo I figured out the problem in my code. Seems to be something changed with the mouse event handling. Running this in Chrome. There is a small example on http://jsfiddle.net/SWj9m/20/. Just examine the event codes in javascript console.\n\nSo if I have to groups with rectangle shapes in them and I drag the one on top (in z-index). I get the mousedown event for it. When I end the drag so that the cursor is above the lower rectange (in z-index) I don't get the mouseup for the dragged element but the lower element that was not moved. So combinig this with some handling in code trusting the events you can get your application messed up for good. In earlier versions you go the mouseup event for the dragged element.\n. ",
    "docusync": "Was not able to solve this using dragend, but subscription on mouseup of the canvas placeholder DIV element helped.\n. Was not able to solve this using dragend, but subscription on mouseup of the canvas placeholder DIV element helped.\n. ",
    "tomg7": "I have created a very simple fiddle to see what is happening, because this prevents me to upgrade to more recent versions : http://jsfiddle.net/2N7CP/3/\n1. You can see that the mouseup event is not fired for the shapes when dragging the shapes (as described in the first post).\n2. Drag and drop the blue rect over the yellow rect: \"you get a mouseup event for the lower not dragged element\" as noted by hakhak.\n3. In some special cases shapes stays on the dragLayer after dragging:\n  a. Start dragging the yellow rect\n  b. Move the mouse cursor outside the canvas and release the mouse button\n  c. Move back the mouse cursor (and therefore the yellow rect) over the blue rect (mouse button is still up) and click: the yellow rect disappears. \n  d. Start dragging the blue rect: the yellow rect appears while you are dragging the blue rect.\nHope this very simple fiddle helps to fix/test these issues.\n. I think that it is not a big problem that the shape is still being dragged after the mouse button is released outside of the canvas. I think most users will quickly figure out what is going on and try to drop the shape by clicking the mouse button at the desired location.\nThe problem is that when you click on another shape (with the still dragged shape) KineticJS does not move back the shape from the dragLayer to the original layer. see: http://jsfiddle.net/gDXA5/3/\nFor me it would be sufficient to fix only this problem. I prefer the new drag-and-drop behaviour of KineticJS.\n. I had the same problem. A workaround is to set draggable to false in 'dragstart' instead of 'mousedown'.\n\nI tried to debug this problem and found that in the '_executeHandlers' function events.length = 2, but by the time events[i].handler.apply(this, [evt]) is executed the second time in the for loop, this.eventListeners['mousedown'] contains only one handler. By that time the second handler with name: 'kinetic' is deleted.\n. I ran into the same problem and created a test to see what is going on: \nhttp://jsfiddle.net/dfHgb/\n\nMove the mouse pointer around the edge of the top rectangle to see that the mousemove event is not fired for some of the pixels. Press the mouse button to display the neighboring pixel values.\n\nThe above test shows that anti-aliased pixels are indeed give different color values. I get this on my notebook for example: http://imgur.com/O8mThjy\n\nThe problem exists without scaling applied and it is happening in all four browsers I tried.\n\nI think Eric is right that this issue is rarely a problem, but in a few cases it can be quite annoying. Like in a game when the player has only one shot to click on an object (one object put together from primitive shapes like in the above test or there are several overlapping shapes on the screen) and the click is ignored.\n\nI do not have an idea how to address this on the shape level better than atis' proposal (to check neighboring pixels). However, as kind of a workaround, layer events could fire regardless of the colorKey. I think this would only cause a small performance hit, but it would provide a way for the developer to deal with this issue without hacking the kineticjs source files.\n. There is something reallly strange regarding the opacity values. On my notebook I always get 255 as opacity value even for anti-aliased pixels (tried three different browsers under Win7 and two browsers under OSX running on virtualBox). On another computer Chrome shows 254 value for AA pixels while IE9 shows 255 for the same pixels.\n. @ericdrowell I use _layer.hitCanvas.context.getImageData_ in my test (copied the code from the _getIntersection_ function) so I believe that I am picking out the pixel color from the hit graph.\n. I have created a very simple fiddle to see what is happening, because this prevents me to upgrade to more recent versions : http://jsfiddle.net/2N7CP/3/\n1. You can see that the mouseup event is not fired for the shapes when dragging the shapes (as described in the first post).\n2. Drag and drop the blue rect over the yellow rect: \"you get a mouseup event for the lower not dragged element\" as noted by hakhak.\n3. In some special cases shapes stays on the dragLayer after dragging:\n  a. Start dragging the yellow rect\n  b. Move the mouse cursor outside the canvas and release the mouse button\n  c. Move back the mouse cursor (and therefore the yellow rect) over the blue rect (mouse button is still up) and click: the yellow rect disappears. \n  d. Start dragging the blue rect: the yellow rect appears while you are dragging the blue rect.\nHope this very simple fiddle helps to fix/test these issues.\n. I think that it is not a big problem that the shape is still being dragged after the mouse button is released outside of the canvas. I think most users will quickly figure out what is going on and try to drop the shape by clicking the mouse button at the desired location.\nThe problem is that when you click on another shape (with the still dragged shape) KineticJS does not move back the shape from the dragLayer to the original layer. see: http://jsfiddle.net/gDXA5/3/\nFor me it would be sufficient to fix only this problem. I prefer the new drag-and-drop behaviour of KineticJS.\n. I had the same problem. A workaround is to set draggable to false in 'dragstart' instead of 'mousedown'.\n\nI tried to debug this problem and found that in the '_executeHandlers' function events.length = 2, but by the time events[i].handler.apply(this, [evt]) is executed the second time in the for loop, this.eventListeners['mousedown'] contains only one handler. By that time the second handler with name: 'kinetic' is deleted.\n. I ran into the same problem and created a test to see what is going on: \nhttp://jsfiddle.net/dfHgb/\n\nMove the mouse pointer around the edge of the top rectangle to see that the mousemove event is not fired for some of the pixels. Press the mouse button to display the neighboring pixel values.\n\nThe above test shows that anti-aliased pixels are indeed give different color values. I get this on my notebook for example: http://imgur.com/O8mThjy\n\nThe problem exists without scaling applied and it is happening in all four browsers I tried.\n\nI think Eric is right that this issue is rarely a problem, but in a few cases it can be quite annoying. Like in a game when the player has only one shot to click on an object (one object put together from primitive shapes like in the above test or there are several overlapping shapes on the screen) and the click is ignored.\n\nI do not have an idea how to address this on the shape level better than atis' proposal (to check neighboring pixels). However, as kind of a workaround, layer events could fire regardless of the colorKey. I think this would only cause a small performance hit, but it would provide a way for the developer to deal with this issue without hacking the kineticjs source files.\n. There is something reallly strange regarding the opacity values. On my notebook I always get 255 as opacity value even for anti-aliased pixels (tried three different browsers under Win7 and two browsers under OSX running on virtualBox). On another computer Chrome shows 254 value for AA pixels while IE9 shows 255 for the same pixels.\n. @ericdrowell I use _layer.hitCanvas.context.getImageData_ in my test (copied the code from the _getIntersection_ function) so I believe that I am picking out the pixel color from the hit graph.\n. ",
    "djfm": "Hi Eric, am I doing something wrong or did this bug just reappear? Please see example here: http://jsfiddle.net/NY4QK/10/\n. Hi Eric, am I doing something wrong or did this bug just reappear? Please see example here: http://jsfiddle.net/NY4QK/10/\n. ",
    "yumyam": "I'm having very similar issues here:\nhttp://jsfiddle.net/SWj9m/\n\n(must be on ipad) and click and hold on one circle, and then click and hold another circle at the same time, the touchend event never gets called and you're screwed. If the touch isn't just a mere 'tap' then it seems kinetic js goes whack.\n. Even on the touch tutorial on the site:\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-mobile-events/\n\nopen this up on your ipad, touch the red circle, and drag your finger off\u2014the touchstart event stays until you touch the circle again.\n\nMaybe there is some way to creat a script that says 'if touchmove goes out of canvas, then touchend'?\n. Thanks Eric, is it possible for you to expand this tutorial to show an in-use example of how you'd make the circle not continue the touchstart state if you drag your finger off?\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-mobile-events/\n. I'm having very similar issues here:\nhttp://jsfiddle.net/SWj9m/\n\n(must be on ipad) and click and hold on one circle, and then click and hold another circle at the same time, the touchend event never gets called and you're screwed. If the touch isn't just a mere 'tap' then it seems kinetic js goes whack.\n. Even on the touch tutorial on the site:\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-mobile-events/\n\nopen this up on your ipad, touch the red circle, and drag your finger off\u2014the touchstart event stays until you touch the circle again.\n\nMaybe there is some way to creat a script that says 'if touchmove goes out of canvas, then touchend'?\n. Thanks Eric, is it possible for you to expand this tutorial to show an in-use example of how you'd make the circle not continue the touchstart state if you drag your finger off?\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-mobile-events/\n. ",
    "atomictag": "I have shared a small experiment I did on Kinetic + Multi Touch [here](https://github.com/atomictag/Kinetic.MultiTouch). Have a look - perhaps it can help\n. I have shared a small experiment I did on Kinetic + Multi Touch [here](https://github.com/atomictag/Kinetic.MultiTouch). Have a look - perhaps it can help until \"real\" multitouch becomes available in Kinetic\n. I've been using GS with Kinetic for a while now (before 4.5) and I honestly can say its performance is amazing. It also allows a better control of transitions and animations that eventually makes code simpler and more reusable, so I am not planning to move back to other tweening solutions.\n\nSaid that, it makes a lot of sense for Kinetic to provide its own transitions in order to:\n- make the framework complete (every user will expect some form of transitions handling to be built-in)\n- keep Kinetic dependency-free\n- lower the learning curve for new comers (who otherwise have to learn GS as well)\n- allow any sort of distribution options under the Kinetic MIT license\n\n+1 for pulling back transitions into the framework\n+1 to allow developers to rely on GS if they want/can do so\n. I have seen this also on Chrome 27.0.1453.93 on OSX (circles rendering as rectangles if a stroke is specified).\nIn the attempt to reproduce a reduced testcase I restarted the browser and noticed that the problem went away.\nIt still sporadically reappears (esp. after a zillion refreshes of the page I am working on) - but then if I open a new tab to the very same content it does not show up again there (the problem does not go away on the tab that showed the problem no matter how many refreshes). So, IMO, this is a Chrome rendering bug and it has nothing to do with Kinetic or wrong code. It seems at some point the canvas rendering gets all messed up. BTW, I has similar issues with some mouse events disappearing altogether - also in that case a restart of the browser fixed the issue. Glad to know I haven't had hallucinations, though :)\n. I found many posts around that refer to this issue - which is not a Kinetic issue, for what I can tell, but a problem with Android browsers not implementing clearRect correctly. A work-around that seems to work is to use fillRect instead of clearRect on `clear` - but that of course assumes you know which fill to use and, in my tests, degrades performance quite a bit. Another hack that seems to do the trick is to reset the canvas width - which, depending on the browser, could be disastrous performance-wise or acceptable (but I haven't really tried that)\n. Probably related to #469 \n. I assume listening:false prevents the hitCanvas from being updated, which can be quite a performance saving in some cases (especially if you are not drawing simple primitives). By default I tend to set listening:false to all nodes unless they _really_ need to handle events. It kinda feels like mouse/touch event listening behaviour could be defined in Kinetic the other way around: disabled by default and activated on the nodes that require user interaction (IIRC that's kinda what EaselJS does).\n. I have shared a small experiment I did on Kinetic + Multi Touch [here](https://github.com/atomictag/Kinetic.MultiTouch). Have a look - perhaps it can help\n. I have shared a small experiment I did on Kinetic + Multi Touch [here](https://github.com/atomictag/Kinetic.MultiTouch). Have a look - perhaps it can help until \"real\" multitouch becomes available in Kinetic\n. I've been using GS with Kinetic for a while now (before 4.5) and I honestly can say its performance is amazing. It also allows a better control of transitions and animations that eventually makes code simpler and more reusable, so I am not planning to move back to other tweening solutions.\n\nSaid that, it makes a lot of sense for Kinetic to provide its own transitions in order to:\n- make the framework complete (every user will expect some form of transitions handling to be built-in)\n- keep Kinetic dependency-free\n- lower the learning curve for new comers (who otherwise have to learn GS as well)\n- allow any sort of distribution options under the Kinetic MIT license\n\n+1 for pulling back transitions into the framework\n+1 to allow developers to rely on GS if they want/can do so\n. I have seen this also on Chrome 27.0.1453.93 on OSX (circles rendering as rectangles if a stroke is specified).\nIn the attempt to reproduce a reduced testcase I restarted the browser and noticed that the problem went away.\nIt still sporadically reappears (esp. after a zillion refreshes of the page I am working on) - but then if I open a new tab to the very same content it does not show up again there (the problem does not go away on the tab that showed the problem no matter how many refreshes). So, IMO, this is a Chrome rendering bug and it has nothing to do with Kinetic or wrong code. It seems at some point the canvas rendering gets all messed up. BTW, I has similar issues with some mouse events disappearing altogether - also in that case a restart of the browser fixed the issue. Glad to know I haven't had hallucinations, though :)\n. I found many posts around that refer to this issue - which is not a Kinetic issue, for what I can tell, but a problem with Android browsers not implementing clearRect correctly. A work-around that seems to work is to use fillRect instead of clearRect on `clear` - but that of course assumes you know which fill to use and, in my tests, degrades performance quite a bit. Another hack that seems to do the trick is to reset the canvas width - which, depending on the browser, could be disastrous performance-wise or acceptable (but I haven't really tried that)\n. Probably related to #469 \n. I assume listening:false prevents the hitCanvas from being updated, which can be quite a performance saving in some cases (especially if you are not drawing simple primitives). By default I tend to set listening:false to all nodes unless they _really_ need to handle events. It kinda feels like mouse/touch event listening behaviour could be defined in Kinetic the other way around: disabled by default and activated on the nodes that require user interaction (IIRC that's kinda what EaselJS does).\n. ",
    "dvsmaximaa": "hi\n\nAny one know how to get finger count in touch devices..\nBefore i get finger count using \"event.touches.length\" but now in updated version its not working. please help me its very critical for me.\n\nthanks.\n. hello , i am also getting same ERROR using kinetic js-v4.7.2 , is there any solution for this type of issue. ? please reply me..i am frustate due to this error. thanx\n. Which kind of changes i do to solved this error becuase still i am getting same ERROR using kinetic js-v5.0.1 , is there any solution for this type of issue. ? please reply me\n. when will Release kinetic version 5.1.0 ?? any one know..??\n. lavrton.. this example is gud but i want to know is it possible to put image,audio and video tag oh html5 ??\n. i dont want to used other js. i want this pinch event using kineticjs.  I added pinch event to my project (that is using kineticjs).  http://www.html5canvastutorials.com/labs/html5-canvas-multi-touch-scale-stage-with-kineticjs/ but not work smooth in firefox. \n. me also implement hammer.js but not work properly.\n\nvar transformer = Hammer(stage.getStage().getContainer());  \n    transformer.on(\"transform\", function(e) {\n      if(isZoom>0){\n            var shape = e.targetNode;\n            var requestedPage = shape.getName();\n            pageZoomIn(requestedPage ); // page ZoomIN\n        }\n        else{\n            pageZoomout(requestedPage ); // page ZoomOut\n        }\n    });\n. Except this any other solution for pinch event in kineticjs?  If  Mr.Ericdrowell or someone else implement pinch event for zoom and swipe event then its great for webapp development. I know many of them want these features hope so any one focus on this features.\n. I want Zooming feature on shape(Image) with bounding and while Zooming image should be bounded to layer or group width and height. Zooming and Zooomout should work on mouse scroll as well as pinch event. also if Zooming is possible at the point of cursor. would be great..\n\nThanks lavrton \n. hi\n\nAny one know how to get finger count in touch devices..\nBefore i get finger count using \"event.touches.length\" but now in updated version its not working. please help me its very critical for me.\n\nthanks.\n. hello , i am also getting same ERROR using kinetic js-v4.7.2 , is there any solution for this type of issue. ? please reply me..i am frustate due to this error. thanx\n. Which kind of changes i do to solved this error becuase still i am getting same ERROR using kinetic js-v5.0.1 , is there any solution for this type of issue. ? please reply me\n. when will Release kinetic version 5.1.0 ?? any one know..??\n. lavrton.. this example is gud but i want to know is it possible to put image,audio and video tag oh html5 ??\n. i dont want to used other js. i want this pinch event using kineticjs.  I added pinch event to my project (that is using kineticjs).  http://www.html5canvastutorials.com/labs/html5-canvas-multi-touch-scale-stage-with-kineticjs/ but not work smooth in firefox. \n. me also implement hammer.js but not work properly.\n\nvar transformer = Hammer(stage.getStage().getContainer());  \n    transformer.on(\"transform\", function(e) {\n      if(isZoom>0){\n            var shape = e.targetNode;\n            var requestedPage = shape.getName();\n            pageZoomIn(requestedPage ); // page ZoomIN\n        }\n        else{\n            pageZoomout(requestedPage ); // page ZoomOut\n        }\n    });\n. Except this any other solution for pinch event in kineticjs?  If  Mr.Ericdrowell or someone else implement pinch event for zoom and swipe event then its great for webapp development. I know many of them want these features hope so any one focus on this features.\n. I want Zooming feature on shape(Image) with bounding and while Zooming image should be bounded to layer or group width and height. Zooming and Zooomout should work on mouse scroll as well as pinch event. also if Zooming is possible at the point of cursor. would be great..\n\nThanks lavrton \n. ",
    "steffimueller": "I multi touch working now with kineticjs?\n. I multi touch working now with kineticjs?\n. ",
    "PAEz": "Great....but, um....sorry (please dont hate me;) but theres still an error on that example.\nThis one is harder to spot, but keep selecting and moving circles.\nWhen you do move the selected circles to near each other.\nKeep your eye on where you move them to.\nSooner or later the zindex (I think thats whats happening its hard to tell) of circles where you move to changes....not just the one that your moving.\nThis change will happen when you click on/select a circle, so watch as you press down on the mouse button.\nOnly tested this one in Chrome so far.\n\nSorry if Im coming across as a downer ;) but I think its important your demos work....and this one is real impressive so Id like to see it totally work.\n. When I tried to replicate what Jonke said they dont even have to be close together.\nDrag out ten or so circles in a line.\nThen just try clicking on the ones you pulled out and they will vanish.\n\nOr, open the example in a new window.\nPull out 10 or what ever.\nIn the console do stage.draw()\nEverything's fine.\nNow click on one of the ones you pulled out.\nNow put stage.draw() in the console\nThe one you clicked on will vanish.\n.\n. Great....but, um....sorry (please dont hate me;) but theres still an error on that example.\nThis one is harder to spot, but keep selecting and moving circles.\nWhen you do move the selected circles to near each other.\nKeep your eye on where you move them to.\nSooner or later the zindex (I think thats whats happening its hard to tell) of circles where you move to changes....not just the one that your moving.\nThis change will happen when you click on/select a circle, so watch as you press down on the mouse button.\nOnly tested this one in Chrome so far.\n\nSorry if Im coming across as a downer ;) but I think its important your demos work....and this one is real impressive so Id like to see it totally work.\n. When I tried to replicate what Jonke said they dont even have to be close together.\nDrag out ten or so circles in a line.\nThen just try clicking on the ones you pulled out and they will vanish.\n\nOr, open the example in a new window.\nPull out 10 or what ever.\nIn the console do stage.draw()\nEverything's fine.\nNow click on one of the ones you pulled out.\nNow put stage.draw() in the console\nThe one you clicked on will vanish.\n.\n. ",
    "Jonke": "When I tried to replicate  PAEz issue I dragged out 10 circles out of the big bunch. Then I moved just those ten around. If I placed one circle very close or in fact almost over another circle, the bottom circle 'vanished' visually.\n\nI'm just guessing but maybe stage.on('mouseup',   stage.on('mouseover mousemove dragmove',\nfires for all circles under the mouse?\n. When I tried to replicate  PAEz issue I dragged out 10 circles out of the big bunch. Then I moved just those ten around. If I placed one circle very close or in fact almost over another circle, the bottom circle 'vanished' visually.\n\nI'm just guessing but maybe stage.on('mouseup',   stage.on('mouseover mousemove dragmove',\nfires for all circles under the mouse?\n. ",
    "brian-c": "In what way is this \"moving forward\" if it breaks the library in current browsers?\n\nI'd understand if this were breaking in even slightly older versions of Firefox, but matching a spec means nothing if it's not supported by the current implementations.\n. Sorry. I mean the mouse passes right through the layer where one shape overlaps another. Neither shape's mouse events are handled.\n\nThere's a bit in `getIntersection` that goes\n\n``` js\nif(p[3] === 255) {\n    var colorKey = Kinetic.Type._rgbToHex(p[0], p[1], p[2]);\n    shape = Kinetic.Global.shapes[colorKey];\n```\n\nbut when `p` is an anti-aliasing pixel between two shapes, `colorKey` doesn't match any of the global shapes, so `shape` returns as undefined even though the pixel is solid.\n\nI believe the holes end up looking something like this:\n\n![hitCanvas-holes](https://f.cloud.github.com/assets/464389/22075/72d838d4-49e8-11e2-8418-e0b8464a0245.png)\n. In what way is this \"moving forward\" if it breaks the library in current browsers?\n\nI'd understand if this were breaking in even slightly older versions of Firefox, but matching a spec means nothing if it's not supported by the current implementations.\n. Sorry. I mean the mouse passes right through the layer where one shape overlaps another. Neither shape's mouse events are handled.\n\nThere's a bit in `getIntersection` that goes\n\n``` js\nif(p[3] === 255) {\n    var colorKey = Kinetic.Type._rgbToHex(p[0], p[1], p[2]);\n    shape = Kinetic.Global.shapes[colorKey];\n```\n\nbut when `p` is an anti-aliasing pixel between two shapes, `colorKey` doesn't match any of the global shapes, so `shape` returns as undefined even though the pixel is solid.\n\nI believe the holes end up looking something like this:\n\n![hitCanvas-holes](https://f.cloud.github.com/assets/464389/22075/72d838d4-49e8-11e2-8418-e0b8464a0245.png)\n. ",
    "lehni": "http://github.com/paperjs/paper.js has emulation of dashed lines at pretty decent speed. It chops curves into the bits that are to be rendered and uses bezier commands to draw them. Most of the code is in \n\nhttps://github.com/paperjs/paper.js/blob/master/src/path/PathFlattener.js\n\nAnd here you see how this class is used to draw:\n\nhttps://github.com/paperjs/paper.js/blob/master/src/path/Path.js#L1937\n. http://github.com/paperjs/paper.js has emulation of dashed lines at pretty decent speed. It chops curves into the bits that are to be rendered and uses bezier commands to draw them. Most of the code is in \n\nhttps://github.com/paperjs/paper.js/blob/master/src/path/PathFlattener.js\n\nAnd here you see how this class is used to draw:\n\nhttps://github.com/paperjs/paper.js/blob/master/src/path/Path.js#L1937\n. ",
    "akhiyadav": "Please see this fiddle I have pasted my code.\nhttp://jsfiddle.net/akhiyadav1/LmM4K/1/#run\ntry to load an image through file browser and click on it it will be loaded on stage.\n\nProblem is I am using kinetic-v3.6.0.js it works fine but in latest version its not working.........\n. Please see this fiddle I have pasted my code.\nhttp://jsfiddle.net/akhiyadav1/LmM4K/1/#run\ntry to load an image through file browser and click on it it will be loaded on stage.\n\nProblem is I am using kinetic-v3.6.0.js it works fine but in latest version its not working.........\n. ",
    "EdokiAcademy": "Thanks for the answer Eric, I didn't know about the intersection methods, it does the job.\n\nThe 'drop' event would be a convenient option in my opinion. Perhaps one subject would be to provide a way to declare what groups/containers/layers listen to what shapes regarding drop events, if optimization or reducing noise is needed. One other concern is that a shape may be dropped on several others due to overlapping...\n\nDo you think providing these additional features would be interesting?\n. Thanks for the answer Eric, I didn't know about the intersection methods, it does the job.\n\nThe 'drop' event would be a convenient option in my opinion. Perhaps one subject would be to provide a way to declare what groups/containers/layers listen to what shapes regarding drop events, if optimization or reducing noise is needed. One other concern is that a shape may be dropped on several others due to overlapping...\n\nDo you think providing these additional features would be interesting?\n. ",
    "Verron": "The issue only seems to be present within my Virtual Machine. After running the code in a browser outside of the VM, every thing checked out okay.\n. Disabling hardware acceleration in Firefox fixed the issue for me. Options > Advanced > \"Use Hardware Acceleration When Available\"\n\nAfter doing this, Firefox performed just as well as Chrome. Kind of weird that this did the trick, though.\n. Also, it seems shape._id can be different from shape.attrs.id. Is shape._id unique? if it is, Layer.get would be awesome if you can search via this _id property.\n. The issue only seems to be present within my Virtual Machine. After running the code in a browser outside of the VM, every thing checked out okay.\n. Disabling hardware acceleration in Firefox fixed the issue for me. Options > Advanced > \"Use Hardware Acceleration When Available\"\n\nAfter doing this, Firefox performed just as well as Chrome. Kind of weird that this did the trick, though.\n. Also, it seems shape._id can be different from shape.attrs.id. Is shape._id unique? if it is, Layer.get would be awesome if you can search via this _id property.\n. ",
    "maxw3st": "Have you tried correcting the spelling errors: \n\n```\n$(function() { \nnode.on('update.1', function() {\n    node.off('update.1');\n}); \n```\n\nCheck *funciton and *upadate.1  above. If your code is written that way it probably isn't working.     \n. I've been having a lot of problems with Chrome lately. They're in no way KineticJS related. For instance, as of today it won't load pages to URLs from links on my site. The links all work fine in Firefox. Just checked, and they also work in Safari. I would see if you can reproduce the problem in Firefox then Safari.\n. I'm on a Win7/64 machine, the game map is draggable for me, and the various objects on the map (trees, portals) show tooltips. Also, the example triangle (posted as a problem) and its associated KineticJS tutorial are working as intended. Probably not much help here as I'm not seeing the bugs reported.\n. This sounds like the plugin Scriptographer came out with for Illustrator. It's one of the failings of Illustrator that once you put text in a text field, re\u2013sizing the field distorts the text. Apparently their plugin resolves that problem. The same function may be applicable here.\n. Your example lets me drag and drop the image by clicking/holding/dragging it. If I click on the \"handles\" at the corners of either image I can resize them. The only limits I run into are the dimensions of your canvas. I'm using FF 18.01 and an Nvidia graphics card on a Win7/64bit machine\n. Could you perhaps set the stage as draggable, and then create a sprite (container) for your would be draggable circles. Set the sprite to be not draggable, and the circles to be draggable. If your sprite is the same dimensions as the stage you should then be able to drage the stage or the circles independent of each other.\n\nI'm assuming this all works something like AS3.0. If it is then what you're currently experiencing makes sense. Your stage is the container for your circles at the moment. If you drag the stage, the circles should go with it. \n. Have you tried correcting the spelling errors: \n\n```\n$(function() { \nnode.on('update.1', function() {\n    node.off('update.1');\n}); \n```\n\nCheck *funciton and *upadate.1  above. If your code is written that way it probably isn't working.     \n. I've been having a lot of problems with Chrome lately. They're in no way KineticJS related. For instance, as of today it won't load pages to URLs from links on my site. The links all work fine in Firefox. Just checked, and they also work in Safari. I would see if you can reproduce the problem in Firefox then Safari.\n. I'm on a Win7/64 machine, the game map is draggable for me, and the various objects on the map (trees, portals) show tooltips. Also, the example triangle (posted as a problem) and its associated KineticJS tutorial are working as intended. Probably not much help here as I'm not seeing the bugs reported.\n. This sounds like the plugin Scriptographer came out with for Illustrator. It's one of the failings of Illustrator that once you put text in a text field, re\u2013sizing the field distorts the text. Apparently their plugin resolves that problem. The same function may be applicable here.\n. Your example lets me drag and drop the image by clicking/holding/dragging it. If I click on the \"handles\" at the corners of either image I can resize them. The only limits I run into are the dimensions of your canvas. I'm using FF 18.01 and an Nvidia graphics card on a Win7/64bit machine\n. Could you perhaps set the stage as draggable, and then create a sprite (container) for your would be draggable circles. Set the sprite to be not draggable, and the circles to be draggable. If your sprite is the same dimensions as the stage you should then be able to drage the stage or the circles independent of each other.\n\nI'm assuming this all works something like AS3.0. If it is then what you're currently experiencing makes sense. Your stage is the container for your circles at the moment. If you drag the stage, the circles should go with it. \n. ",
    "f0rmiga": "Ok, at first look it is strange. I'm writing a only-visible-screen render to a real-time mmo game. The point is the performance, that I need to remove the nodes that is not visible on screen. But I need to re-add and remove every time. The rects are based on information in a map file. It is much easier to only use .add and .remove instead always create a new rectangle or image and makes more sense. Thank you for your attention!\n\nEric Rowell notifications@github.com escreveu:\n\n> This is really strange code - why is a reference to the Rectangle stored after you've deleted it? When you remove a node with remove(), all of its references in the stage are removed, including event handlers. You should instantiate a new rectangle each time with new Kinetic.Rect();\n> \n> \u2014\n> Reply to this email directly or view it on GitHub. \n> \n> \ufffc \n. just hide does not improve performance, specially in firefox, but thanks for your attention!\n. @BlackScorp, nice code! For a while, I solved my problem with the Stackoverflow help. Here it is: http://stackoverflow.com/questions/14075859/kineticjs-add-rect-remove-rect-then-add-again-not-working-mouseover\n\nBut the .remove() still bugged on my guess.\n. But it gives me greater control of the map.                       \n. Ok, at first look it is strange. I'm writing a only-visible-screen render to a real-time mmo game. The point is the performance, that I need to remove the nodes that is not visible on screen. But I need to re-add and remove every time. The rects are based on information in a map file. It is much easier to only use .add and .remove instead always create a new rectangle or image and makes more sense. Thank you for your attention!\n\nEric Rowell notifications@github.com escreveu:\n\n> This is really strange code - why is a reference to the Rectangle stored after you've deleted it? When you remove a node with remove(), all of its references in the stage are removed, including event handlers. You should instantiate a new rectangle each time with new Kinetic.Rect();\n> \n> \u2014\n> Reply to this email directly or view it on GitHub. \n> \n> \ufffc \n. just hide does not improve performance, specially in firefox, but thanks for your attention!\n. @BlackScorp, nice code! For a while, I solved my problem with the Stackoverflow help. Here it is: http://stackoverflow.com/questions/14075859/kineticjs-add-rect-remove-rect-then-add-again-not-working-mouseover\n\nBut the .remove() still bugged on my guess.\n. But it gives me greater control of the map.                       \n. ",
    "chiragnirmal": "I had the same issue with IE 10 and Windows 8. Any fixes?\nIt works fine if I setup IE 10 to work in IE 9 compatibility mode.\n. I had the same issue with IE 10 and Windows 8. Any fixes?\nIt works fine if I setup IE 10 to work in IE 9 compatibility mode.\n. ",
    "etherid": "oh, I see. Sry for making a big deal out of nothing then and thank you for responding so nicely :)\n. oh, I see. Sry for making a big deal out of nothing then and thank you for responding so nicely :)\n. ",
    "kbolontzakis": "I tried it and it works. You are amazing. Thank you.\n. I tried it and it works. You are amazing. Thank you.\n. ",
    "ssj-gz": "Hi  there,\n\nI'm not a Kinetic user, and stumbled on this issue report when searching for a solution to a very similar bug I'm seeing with emscripten-qt.  In short: I think https://bugzilla.mozilla.org/show_bug.cgi?id=612695 is probably the culprit here - at the very least, it is not Kinetic-specific. See also https://bugzilla.mozilla.org/show_bug.cgi?id=602303.\n\nBest wishes,\nSimon\n. Hi  there,\n\nI'm not a Kinetic user, and stumbled on this issue report when searching for a solution to a very similar bug I'm seeing with emscripten-qt.  In short: I think https://bugzilla.mozilla.org/show_bug.cgi?id=612695 is probably the culprit here - at the very least, it is not Kinetic-specific. See also https://bugzilla.mozilla.org/show_bug.cgi?id=602303.\n\nBest wishes,\nSimon\n. ",
    "ericmandel": "We have to be a bit careful here: most seemingly related FF reports are about the canvas not being updated. Here, we have offered an example where a textarea element is also not being updated. In addition, Kinetic calls can produce incorrect behavior in scenarios where pure canvas calls do not.\n\nSo, while this does appear to be a FF issue, verification is needed that Kinetic is not exacerbating a FF problem. Beyond that, the Kinetic-based examples might be more easily reproducible by FF experts than previously reported problems, implying that Kinetic experts might be able to help shed light on the problem.\n\nEric\n. Its good information to know that upgrading graphics drivers can fix the problem on some machines. But without knowing the decisions being made by FF regarding mousemove events (if indeed decisions are being made!) and whether Kinetic might be doing anything to exacerbate  the FF problem, the question of whether a given machine works with Kinetic can only have a random answer: a) today we tested a Linux Mint 13 machine which worked using FF 17, but failed spectacularly as soon as we upgraded to FF 18. b) we re-tested a CenOs machine that failed in the past but worked under a very light load. c) we tested a pretty powerful Ubuntu machine that worked fine, where previously it seemed that Ubuntu mostly failed.\n\nThe Linux Mint case (FF17 works, FF18 broken) is distressing because the graphics is handled by the integrated intel chip, so (to our knowledge) no driver update is available -- hence no driver upgrade fix. That's going in the wrong direction ....\n\nEric\n. Good news. We have fixed this problem on all previously broken Debian/Ubuntu machines (one CentOS outlier left to test) by setting  \u201cgfx.xrender.enabled\u201d to \u201cfalse\u201d in Firefox's about:config, as described here:\n\nhttp://www.hackermusings.com/2012/05/firefoxs-graphics-performance-on-x11/\n\n```\nIt\u2019s been long known that a vocal minority (or perhaps even\nmajority) of Firefox users have had issues with rendering\nperformance on X11, but nobody has quite pinpointed what the\nissue is.\n\nRecently Nicolas Silva landed a change in mozilla-central to\nadd a preference to allow for disabling the use of the RENDER\nextension when drawing using Cairo on X11. I\u2019d like to call on\nany Firefox/Linux users who have been experiencing speed\nissues to download the latest nightly and go to about:config\nand set \u201cgfx.xrender.enabled\u201d to \u201cfalse\u201d. If you could also\nlet me know what hardware and drivers you\u2019re running that\u2019d\nalso be great.\n```\n\nIn addition, Mac Firefox 18 appears to fix the related problem that occurs when hw acceleration is turned off in the Mac Firefox Preferences (see original report above).\n\nThis fix seems to span our full problem space, is simple to document, and is less invasive than upgrading hardware and/or drivers. Thus, we are closing our internal investigation, at least for the time being.\n\nEric\n. The bug reported in https://bugzilla.mozilla.org/show_bug.cgi?id=835064 could be of the same class. Recall that, for us, the problem was solved differently on the Mac than on Debian-derived machines (including Ubuntu), so it's likely not a single problem with a single solution.\n\nOn the Ubuntu machine I am testing right now, correct behavior of our Kinetic-enabled app requires setting  \u201cgfx.xrender.enabled\u201d (which became available sometime after v14) to \u201cfalse\u201d. The new suggestion, setting \"gfx.canvas.azure.enabled\" to \"false\", has no effect at all on our app running under Ubuntu. It does, however, fix the test page attached to that bug report.\n\nWe have one CentOs machine which was not fixed by setting \u201cgfx.xrender.enabled\u201d to \u201cfalse\u201d. I will test this new suggestion on Monday on that still-broken machine.\n\nGiven the fact that our Debian-derived machines were all fixed with the \u201cgfx.xrender.enabled\u201d work-around, but Macs were fixed with an upgrade to v18, the generic class of problem seems to be that Firefox's attempt to optimize rendering actually slows it down. If the problem depends on what type of optimization is being attempted (xrendr vs azure vs Mac),  the fix will require side-stepping the specific optimization code.\n\nRegards,\n\nEric\n. Sorry, Nevin, I don't have any specific insight: my shape-resizing code is modeled after the broken tutorial and, of course, is now broken in 4.3.1. My fear (not insight) is that the new use of a temporary top layer for drag/drop has broken the connection between the moving anchor and the rest of the shapes in the group, but it's not based on any data ....\n\nI could not get the v3.10.0 tutorial you mentioned to work in my local file:// environment using kinetic 4.1.2 or kinetic 4.3.1. I'm not sure why, but only a single horizontal line is displayed. Anyway, I do notice that \"your\" tutorial puts the anchors in one layer and the triangle in another, while \"my\" tutorial groups the anchors and the primary shape into a single group in one layer, so that the whole group can be displayed, removed, etc. in one operation. So if you can get \"your\" tutorial to work but not \"mine\", the separation of anchors and primary shape might be a clue.\n\nEric\n. Yes, I see that your triangle_test.html does work. But it is significantly different from the tutorial I pointed out at:\n\nhttp://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images\n\nAll of the anchors and the triangle in triangle_test are separate shapes on a layer, while the broken tutorial above puts the anchors and primary shape (or image) into a group. \n\nNote that the fiddle you created does contain anchors at all and therefore is not relevant to the current problem, so far as I can see. I was not saying the image won't move, but rather that it does not resize as the anchors move.\n\nIt seems to me that the original question is still open: what changes must be made to the original (group-enabled)  tutorial to get it to work? As I said, this might not be a bug, just a change in API or a change in proper technique.\nSo I'm not sure how to proceed: it might be worthwhile modifying your triangle_test to put the anchors and triangle in a group, or it might be simpler to fix the original tutorial. Do you need me to check whether the triangle_test works with groups before you look at the original tutorial?\n\nEric\n. OK, thanks, I'll await your further investigations using the yoda tutorial page. For when you get back to it ... I see now that the bottomRight anchor works fine (resizes the image), but the other three are broken.\n\n> using stage.get instead of this.get\n\nAlso, the yoda code calls group.get(), not stage.get(), so if an API change was made (I don't see it in the changelog) that could be a problem.\n\nThanks for helping,\n\nEric\n. Good catch, your fix may be pointing to the root of the problem ... since it implies that this code does not work:\n\n```\n    var topLeft = group.get(\".topLeft\")[0];\n    var topRight = group.get(\".topRight\")[0];\n```\n\n... which either is a bug or a change to the API that we don't understand. Hopefully, an expert will weigh in.\n\nEric\n. Thanks, Eric, this fix works for me -- but only if I set dragOnTop to false for each shape in a group, not just the anchors. Otherwise, only some components of the group move, leaving others behind. If there is a way to turn off dragOnTop globally, please let me know: better to have a one-line fix than to change all of the many groups that I create. (Note that setting dragOnTop to false at the group level did not work -- each component had to be set).\n\nEric\n. Yes, of course. Perhaps I was not clear: the shape usually is erased, but every so often it is not erased, even though its destroyed (i.e. can no longer be dragged).\n\nEric\n. So you are saying that the fact that a call to group.setOffset() can change the position of a shape within the group is expected behavior? That sort of side effect sounds like a bug to me, but OK ... \n\nOn Nov 3, 2013, at 1:53 AM, Eric Rowell wrote:\n\n> This isn't a bug with KineticJS. The lab that you're referring to is just that, a lab. It wasn't built to support that use case. The lab code needs to change (if your requirement is added in), not KineticJS\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. Sure, you can play with this:\n\nhttp://jsfiddle.net/Pwnzd/\n\nBut its only a simplified version of your lab (one rectangle instead of two images). Still, if you comment out the group.setOffset() call on line 41, then moving any anchor causes the two adjacent anchors to move, leaving the opposite one fixed, as expected. If that setOffset call is left in, then moving any anchor moves all three other anchors, which is one more than would be expected from the code.\n\nEric\n\nOn Nov 3, 2013, at 7:43 PM, Eric Rowell wrote:\n\n> Can you put together a simple jsfiddle that demonstrates the problem? My guess is that we are making assumptions based on how the lab is coded\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. @CyranX: thanks for pointing this out. I have verified that Version 33.0.1720.0 of canary Chrome displays our shapes correctly once again.\n\n@ericdrowell: Eric, since there is no obvious release date by which the fix will propagate into the stable release, do you have any advice about work-arounds? We can skip calling disableStrokeScale() for Chrome 31 as the least bad alternative, but of course this causes our shape borders to thicken inappropriately as we scale up. Other ideas?\n\nRegards,\n\nEric\n. @AlvinPLeung : Thanks very much, yes, that is a viable work-around. The problem is that it requires a call to setStrokeWidth(n/scale) in the re-scaling code when the scale changes, i.e., a place widely separated from the shape creation code where the disableStrokeScale() call is made. It also requires saving the original scale value or else keeping track of the relative scale. I was hoping for a work-around at the point of the bug itself, to keep the changes contained.\n. We have to be a bit careful here: most seemingly related FF reports are about the canvas not being updated. Here, we have offered an example where a textarea element is also not being updated. In addition, Kinetic calls can produce incorrect behavior in scenarios where pure canvas calls do not.\n\nSo, while this does appear to be a FF issue, verification is needed that Kinetic is not exacerbating a FF problem. Beyond that, the Kinetic-based examples might be more easily reproducible by FF experts than previously reported problems, implying that Kinetic experts might be able to help shed light on the problem.\n\nEric\n. Its good information to know that upgrading graphics drivers can fix the problem on some machines. But without knowing the decisions being made by FF regarding mousemove events (if indeed decisions are being made!) and whether Kinetic might be doing anything to exacerbate  the FF problem, the question of whether a given machine works with Kinetic can only have a random answer: a) today we tested a Linux Mint 13 machine which worked using FF 17, but failed spectacularly as soon as we upgraded to FF 18. b) we re-tested a CenOs machine that failed in the past but worked under a very light load. c) we tested a pretty powerful Ubuntu machine that worked fine, where previously it seemed that Ubuntu mostly failed.\n\nThe Linux Mint case (FF17 works, FF18 broken) is distressing because the graphics is handled by the integrated intel chip, so (to our knowledge) no driver update is available -- hence no driver upgrade fix. That's going in the wrong direction ....\n\nEric\n. Good news. We have fixed this problem on all previously broken Debian/Ubuntu machines (one CentOS outlier left to test) by setting  \u201cgfx.xrender.enabled\u201d to \u201cfalse\u201d in Firefox's about:config, as described here:\n\nhttp://www.hackermusings.com/2012/05/firefoxs-graphics-performance-on-x11/\n\n```\nIt\u2019s been long known that a vocal minority (or perhaps even\nmajority) of Firefox users have had issues with rendering\nperformance on X11, but nobody has quite pinpointed what the\nissue is.\n\nRecently Nicolas Silva landed a change in mozilla-central to\nadd a preference to allow for disabling the use of the RENDER\nextension when drawing using Cairo on X11. I\u2019d like to call on\nany Firefox/Linux users who have been experiencing speed\nissues to download the latest nightly and go to about:config\nand set \u201cgfx.xrender.enabled\u201d to \u201cfalse\u201d. If you could also\nlet me know what hardware and drivers you\u2019re running that\u2019d\nalso be great.\n```\n\nIn addition, Mac Firefox 18 appears to fix the related problem that occurs when hw acceleration is turned off in the Mac Firefox Preferences (see original report above).\n\nThis fix seems to span our full problem space, is simple to document, and is less invasive than upgrading hardware and/or drivers. Thus, we are closing our internal investigation, at least for the time being.\n\nEric\n. The bug reported in https://bugzilla.mozilla.org/show_bug.cgi?id=835064 could be of the same class. Recall that, for us, the problem was solved differently on the Mac than on Debian-derived machines (including Ubuntu), so it's likely not a single problem with a single solution.\n\nOn the Ubuntu machine I am testing right now, correct behavior of our Kinetic-enabled app requires setting  \u201cgfx.xrender.enabled\u201d (which became available sometime after v14) to \u201cfalse\u201d. The new suggestion, setting \"gfx.canvas.azure.enabled\" to \"false\", has no effect at all on our app running under Ubuntu. It does, however, fix the test page attached to that bug report.\n\nWe have one CentOs machine which was not fixed by setting \u201cgfx.xrender.enabled\u201d to \u201cfalse\u201d. I will test this new suggestion on Monday on that still-broken machine.\n\nGiven the fact that our Debian-derived machines were all fixed with the \u201cgfx.xrender.enabled\u201d work-around, but Macs were fixed with an upgrade to v18, the generic class of problem seems to be that Firefox's attempt to optimize rendering actually slows it down. If the problem depends on what type of optimization is being attempted (xrendr vs azure vs Mac),  the fix will require side-stepping the specific optimization code.\n\nRegards,\n\nEric\n. Sorry, Nevin, I don't have any specific insight: my shape-resizing code is modeled after the broken tutorial and, of course, is now broken in 4.3.1. My fear (not insight) is that the new use of a temporary top layer for drag/drop has broken the connection between the moving anchor and the rest of the shapes in the group, but it's not based on any data ....\n\nI could not get the v3.10.0 tutorial you mentioned to work in my local file:// environment using kinetic 4.1.2 or kinetic 4.3.1. I'm not sure why, but only a single horizontal line is displayed. Anyway, I do notice that \"your\" tutorial puts the anchors in one layer and the triangle in another, while \"my\" tutorial groups the anchors and the primary shape into a single group in one layer, so that the whole group can be displayed, removed, etc. in one operation. So if you can get \"your\" tutorial to work but not \"mine\", the separation of anchors and primary shape might be a clue.\n\nEric\n. Yes, I see that your triangle_test.html does work. But it is significantly different from the tutorial I pointed out at:\n\nhttp://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images\n\nAll of the anchors and the triangle in triangle_test are separate shapes on a layer, while the broken tutorial above puts the anchors and primary shape (or image) into a group. \n\nNote that the fiddle you created does contain anchors at all and therefore is not relevant to the current problem, so far as I can see. I was not saying the image won't move, but rather that it does not resize as the anchors move.\n\nIt seems to me that the original question is still open: what changes must be made to the original (group-enabled)  tutorial to get it to work? As I said, this might not be a bug, just a change in API or a change in proper technique.\nSo I'm not sure how to proceed: it might be worthwhile modifying your triangle_test to put the anchors and triangle in a group, or it might be simpler to fix the original tutorial. Do you need me to check whether the triangle_test works with groups before you look at the original tutorial?\n\nEric\n. OK, thanks, I'll await your further investigations using the yoda tutorial page. For when you get back to it ... I see now that the bottomRight anchor works fine (resizes the image), but the other three are broken.\n\n> using stage.get instead of this.get\n\nAlso, the yoda code calls group.get(), not stage.get(), so if an API change was made (I don't see it in the changelog) that could be a problem.\n\nThanks for helping,\n\nEric\n. Good catch, your fix may be pointing to the root of the problem ... since it implies that this code does not work:\n\n```\n    var topLeft = group.get(\".topLeft\")[0];\n    var topRight = group.get(\".topRight\")[0];\n```\n\n... which either is a bug or a change to the API that we don't understand. Hopefully, an expert will weigh in.\n\nEric\n. Thanks, Eric, this fix works for me -- but only if I set dragOnTop to false for each shape in a group, not just the anchors. Otherwise, only some components of the group move, leaving others behind. If there is a way to turn off dragOnTop globally, please let me know: better to have a one-line fix than to change all of the many groups that I create. (Note that setting dragOnTop to false at the group level did not work -- each component had to be set).\n\nEric\n. Yes, of course. Perhaps I was not clear: the shape usually is erased, but every so often it is not erased, even though its destroyed (i.e. can no longer be dragged).\n\nEric\n. So you are saying that the fact that a call to group.setOffset() can change the position of a shape within the group is expected behavior? That sort of side effect sounds like a bug to me, but OK ... \n\nOn Nov 3, 2013, at 1:53 AM, Eric Rowell wrote:\n\n> This isn't a bug with KineticJS. The lab that you're referring to is just that, a lab. It wasn't built to support that use case. The lab code needs to change (if your requirement is added in), not KineticJS\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. Sure, you can play with this:\n\nhttp://jsfiddle.net/Pwnzd/\n\nBut its only a simplified version of your lab (one rectangle instead of two images). Still, if you comment out the group.setOffset() call on line 41, then moving any anchor causes the two adjacent anchors to move, leaving the opposite one fixed, as expected. If that setOffset call is left in, then moving any anchor moves all three other anchors, which is one more than would be expected from the code.\n\nEric\n\nOn Nov 3, 2013, at 7:43 PM, Eric Rowell wrote:\n\n> Can you put together a simple jsfiddle that demonstrates the problem? My guess is that we are making assumptions based on how the lab is coded\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. @CyranX: thanks for pointing this out. I have verified that Version 33.0.1720.0 of canary Chrome displays our shapes correctly once again.\n\n@ericdrowell: Eric, since there is no obvious release date by which the fix will propagate into the stable release, do you have any advice about work-arounds? We can skip calling disableStrokeScale() for Chrome 31 as the least bad alternative, but of course this causes our shape borders to thicken inappropriately as we scale up. Other ideas?\n\nRegards,\n\nEric\n. @AlvinPLeung : Thanks very much, yes, that is a viable work-around. The problem is that it requires a call to setStrokeWidth(n/scale) in the re-scaling code when the scale changes, i.e., a place widely separated from the shape creation code where the disableStrokeScale() call is made. It also requires saving the original scale value or else keeping track of the relative scale. I was hoping for a work-around at the point of the bug itself, to keep the changes contained.\n. ",
    "Nibbels": "Thanks for sharing your experience. It helped me a lot!\n\nI use JKinetic kinetic-v3.8.3.js in some little Game. Yes, I use Canvas.\nThere are several Users which cannot play as like interact in this Game within Firefox Version 18.\n\nExample-Site: http://downfight.de/attmap/?level=17\nThere should be Tooltips and Menus on several Objects. That is the Problem.\n\nIt seems that Firefox 18 with functional Hardwareacceleration allways works well.\nFirefox 17 works well.\nCrome works well.\nInternetexplorer 10 works well.\n\nIt seems like Firefox 18 with deactivated or non supported Hardwareacceleration does not work well. There are no onmousemoves, etc. http://img833.imageshack.us/img833/7637/7020b402a6bf47189ee5347.png\nOn some Systems even with Hardware-Acceleration-Checkbox checked it seems Hardware-Acceleration is not turned on, because of something. (Graphicsdriver, ...)\nI found your Article and compared the Hardware-Acceleration-Configs:\n\nSource: chrome://gpu/\nSource: about:support\n\nSystem 1 in which it always works:\nCrome: http://img208.imageshack.us/img208/4681/6cd5b7b613564f7aa33dd52.png\nFirefox 18: http://img843.imageshack.us/img843/6840/4d27ccc77adb4df8a463b13.png\n\nSystem 2 in which it doesnt work on Firefox 18:\nCrome: http://i.imgur.com/Riw93.png\nFirefox 18: http://i.imgur.com/zT0xn.png Error!\nFirefox 17: http://img40.imageshack.us/img40/6355/3e34666e47cc4c818189f91.png Works!\n\nI hope that I helped back. I would be glad if anyone knows what to do here ;)\n\nGreetings Nibbels\n. I talked some Users into a Graphicsdriver Update.\n\nIt worked. Firefox 18 is now accepting Hardware-Acceleration again like in Version 17 and the Problems are gone.\nhttp://img204.imageshack.us/img204/2712/a28c24b715604292b7e5b27.png : tells the user to upgrade to higher version.\nhttp://i.imgur.com/gQyzO.png : Same here.\n. Thanks again for your answer.\n\nI cannot tell much about Linux-Machines or different Loads. I only tested one single defined software/amount of objects with many PCs.\n\nTill now I got over 7 replays from users. They all installed some new graphics-driver and now it works. 2 went back to Firefox 17, because they didnt want to or they didnt know how to install drivers. If seven give an answer, the number of people following should be much higher...\nAfter I told them what to do, not anybody complained about the situation anymore.\n\nSeems like Firefox 18 got a little picky about graphics. \n\nWhen I startet with JKinetic, I put in around 5000 Objects. All with mouseover. Little circles. I did that to test how far I can go.\nThree close people told my that their Computers really crashed with a frozen and scrambled picture. One PC-crash I saw with my own eyes and I could not believe that my website was able to do such a thing. In my world that was not possible :) They had to press the resetbutton to hardreset their systems. \n\nMaybe Firefox figured out some faulty board/driver combinations and disabled them for use. \nAnd maybe they did that in some rush. \nI would love some workaround to force Firefox using Hardware-Acceleration just as it is. Therewith we could test stability by our owns.\n\nI think its weird that people now have to care about graphicboards and driverstuff to visit Websites :dart: \n\nEdit: I found something :+1: On the bottom of the Website there are ways to force Firefox using blocked drivers. I suppose so.\nSee also: https://wiki.mozilla.org/Blocklisting/Blocked_Graphics_Drivers\n\nEdit: Finally in my eyes the last question still is why I really need Hardware-Accelleration. Why Canvas doesnt work without it? That could really be some Firefox-Bug.\n. Good morning!\n\nI read the article word by word: Whats new for me is that \"gfx.canvas.azure.enabled\" may fix it.\nIn fact, i have seen one Laptop with a Nvidia 9300M GS, that wouldnt even work after newest driver install.\nSo far.. it seemed so within my short time analysis.\nI would love to test your \"gfx.canvas.azure.enabled\"-fix on it to see if we get some same fixing-behaviour. But I'm afraid that It is not available till monday.\n\n[On my Systems I couldn't find \"gfx.xrender.enabled\" (like ericmandel described) just some consimilar settings. Thatwhy I couldnt test this.]\n\nOne Idea:\nIf you render the link i posted as example-site (http://downfight.de/attmap/?level=1)\nAND if you see some rounded area with points and circles: \nAND if you experience --no-- tooltips at those Points/nonworking Machine, \nTHEN we could have seen the same bug.\n\nWorking excample on a good machine, http://prntscr.com/r1h72\nFirefox 18.0.1: http://prntscr.com/r1h9k\nabout:config: http://prntscr.com/r1hb6 -> not by me, maybe ATI driver did this.\nabout:config: http://prntscr.com/r1hcr\n\nAs far as I know my users just don't play my \"nonworking\" game or use Crome instead. Only some know the fix with driverupdates and they tell others. A real Fix by Firefox would be awsome!\n. Your Attachment works on this good machine: http://prntscr.com/r1hi2\n\nGreetings Stefan\n. Me again. I sent your Attachment to some User who still had my bug.\nHe gave answer: It is not well working on this machine.\n\nMy Code: Not working.\nYour Code: Not working.\n\nMy Code: He cant even move the \"map\" by dragging.\nYour Code: He is able to move the \"text\" but only if he klicks like 2-3 cm below it and drags.\n\nGreetings Stefan\n. Thanks for sharing your experience. It helped me a lot!\n\nI use JKinetic kinetic-v3.8.3.js in some little Game. Yes, I use Canvas.\nThere are several Users which cannot play as like interact in this Game within Firefox Version 18.\n\nExample-Site: http://downfight.de/attmap/?level=17\nThere should be Tooltips and Menus on several Objects. That is the Problem.\n\nIt seems that Firefox 18 with functional Hardwareacceleration allways works well.\nFirefox 17 works well.\nCrome works well.\nInternetexplorer 10 works well.\n\nIt seems like Firefox 18 with deactivated or non supported Hardwareacceleration does not work well. There are no onmousemoves, etc. http://img833.imageshack.us/img833/7637/7020b402a6bf47189ee5347.png\nOn some Systems even with Hardware-Acceleration-Checkbox checked it seems Hardware-Acceleration is not turned on, because of something. (Graphicsdriver, ...)\nI found your Article and compared the Hardware-Acceleration-Configs:\n\nSource: chrome://gpu/\nSource: about:support\n\nSystem 1 in which it always works:\nCrome: http://img208.imageshack.us/img208/4681/6cd5b7b613564f7aa33dd52.png\nFirefox 18: http://img843.imageshack.us/img843/6840/4d27ccc77adb4df8a463b13.png\n\nSystem 2 in which it doesnt work on Firefox 18:\nCrome: http://i.imgur.com/Riw93.png\nFirefox 18: http://i.imgur.com/zT0xn.png Error!\nFirefox 17: http://img40.imageshack.us/img40/6355/3e34666e47cc4c818189f91.png Works!\n\nI hope that I helped back. I would be glad if anyone knows what to do here ;)\n\nGreetings Nibbels\n. I talked some Users into a Graphicsdriver Update.\n\nIt worked. Firefox 18 is now accepting Hardware-Acceleration again like in Version 17 and the Problems are gone.\nhttp://img204.imageshack.us/img204/2712/a28c24b715604292b7e5b27.png : tells the user to upgrade to higher version.\nhttp://i.imgur.com/gQyzO.png : Same here.\n. Thanks again for your answer.\n\nI cannot tell much about Linux-Machines or different Loads. I only tested one single defined software/amount of objects with many PCs.\n\nTill now I got over 7 replays from users. They all installed some new graphics-driver and now it works. 2 went back to Firefox 17, because they didnt want to or they didnt know how to install drivers. If seven give an answer, the number of people following should be much higher...\nAfter I told them what to do, not anybody complained about the situation anymore.\n\nSeems like Firefox 18 got a little picky about graphics. \n\nWhen I startet with JKinetic, I put in around 5000 Objects. All with mouseover. Little circles. I did that to test how far I can go.\nThree close people told my that their Computers really crashed with a frozen and scrambled picture. One PC-crash I saw with my own eyes and I could not believe that my website was able to do such a thing. In my world that was not possible :) They had to press the resetbutton to hardreset their systems. \n\nMaybe Firefox figured out some faulty board/driver combinations and disabled them for use. \nAnd maybe they did that in some rush. \nI would love some workaround to force Firefox using Hardware-Acceleration just as it is. Therewith we could test stability by our owns.\n\nI think its weird that people now have to care about graphicboards and driverstuff to visit Websites :dart: \n\nEdit: I found something :+1: On the bottom of the Website there are ways to force Firefox using blocked drivers. I suppose so.\nSee also: https://wiki.mozilla.org/Blocklisting/Blocked_Graphics_Drivers\n\nEdit: Finally in my eyes the last question still is why I really need Hardware-Accelleration. Why Canvas doesnt work without it? That could really be some Firefox-Bug.\n. Good morning!\n\nI read the article word by word: Whats new for me is that \"gfx.canvas.azure.enabled\" may fix it.\nIn fact, i have seen one Laptop with a Nvidia 9300M GS, that wouldnt even work after newest driver install.\nSo far.. it seemed so within my short time analysis.\nI would love to test your \"gfx.canvas.azure.enabled\"-fix on it to see if we get some same fixing-behaviour. But I'm afraid that It is not available till monday.\n\n[On my Systems I couldn't find \"gfx.xrender.enabled\" (like ericmandel described) just some consimilar settings. Thatwhy I couldnt test this.]\n\nOne Idea:\nIf you render the link i posted as example-site (http://downfight.de/attmap/?level=1)\nAND if you see some rounded area with points and circles: \nAND if you experience --no-- tooltips at those Points/nonworking Machine, \nTHEN we could have seen the same bug.\n\nWorking excample on a good machine, http://prntscr.com/r1h72\nFirefox 18.0.1: http://prntscr.com/r1h9k\nabout:config: http://prntscr.com/r1hb6 -> not by me, maybe ATI driver did this.\nabout:config: http://prntscr.com/r1hcr\n\nAs far as I know my users just don't play my \"nonworking\" game or use Crome instead. Only some know the fix with driverupdates and they tell others. A real Fix by Firefox would be awsome!\n. Your Attachment works on this good machine: http://prntscr.com/r1hi2\n\nGreetings Stefan\n. Me again. I sent your Attachment to some User who still had my bug.\nHe gave answer: It is not well working on this machine.\n\nMy Code: Not working.\nYour Code: Not working.\n\nMy Code: He cant even move the \"map\" by dragging.\nYour Code: He is able to move the \"text\" but only if he klicks like 2-3 cm below it and drags.\n\nGreetings Stefan\n. ",
    "programmin1": "Can anyone confirm whether or not this is the same bug as https://bugzilla.mozilla.org/show_bug.cgi?id=835064 ?\n. Just checking in to ask, was this option added back in any recent version? Thanks.. Can anyone confirm whether or not this is the same bug as https://bugzilla.mozilla.org/show_bug.cgi?id=835064 ?\n. Just checking in to ask, was this option added back in any recent version? Thanks.. ",
    "savantltd": "Thanks Eric!\n\nFrom: Eric Rowell [mailto:notifications@github.com]\nSent: Friday, January 11, 2013 6:09 PM\nTo: ericdrowell/KineticJS\nCc: Wilson,Tom\nSubject: Re: [KineticJS] latency on anchor drag with v4.3.0 (#222)\n\nThis is not a bug with KineticJS. The tutorial just needs to be updated\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/222#issuecomment-12168086.\n. Eric,\n\nI am trying to integrate hammer.js with kineticjs.  Need to handle multitouch events.  Is this possible without events interfering with one another?\nThanks\n\nFrom: Eric Rowell [mailto:notifications@github.com]\nSent: Friday, January 11, 2013 6:09 PM\nTo: ericdrowell/KineticJS\nCc: Wilson,Tom\nSubject: Re: [KineticJS] latency on anchor drag with v4.3.0 (#222)\n\nThis is not a bug with KineticJS. The tutorial just needs to be updated\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/222#issuecomment-12168086.\n. Yes, I have seen the multi touch examples but cannot get them to behave all the time on all platforms. I look forward to when you have multi touch support.  Thanks\n\nFrom: Eric Rowell [mailto:notifications@github.com]\nSent: Sunday, January 27, 2013 12:35 PM\nTo: ericdrowell/KineticJS\nCc: Wilson,Tom\nSubject: Re: [KineticJS] latency on anchor drag with v4.3.0 (#222)\n\nProbably will not work because it looks like hammer only works with DOM nodes. Kineticjs has plans for multi touch support, but its lower in priority at the moment. You can, however, do some of the multi touch work in your app. Check out this lab - http://www.html5canvastutorials.com/labs/html5-canvas-multi-touch-scale-shape-with-kineticjs/\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/222#issuecomment-12757806.\n. Hi Eric,\n\nNeed some help with keeping the object centered around my fingers when I use two finger zoom.  I based on one of your multi-touch examples.  The object jumps off the screen and I am not sure why.  Also, what is the best way to rotate a kinetic object?  Appreciate any help with this, I know you have other things to do.\n\nThanks\n\nThomas Wilson\nSignage Architect\nwww.GotSignage.com\n\n[cid:image001.gif@01CE005E.DD5A6DE0]\n230 Clearfield Ave, Suite 113\nVirginia Beach, VA  23462\n757.463.9120 (O)\n757.652.6893 (M)\ntwilson@savantltd.com\n\nFrom: Eric Rowell [mailto:notifications@github.com]\nSent: Sunday, January 27, 2013 12:35 PM\nTo: ericdrowell/KineticJS\nCc: Wilson,Tom\nSubject: Re: [KineticJS] latency on anchor drag with v4.3.0 (#222)\n\nProbably will not work because it looks like hammer only works with DOM nodes. Kineticjs has plans for multi touch support, but its lower in priority at the moment. You can, however, do some of the multi touch work in your app. Check out this lab - http://www.html5canvastutorials.com/labs/html5-canvas-multi-touch-scale-shape-with-kineticjs/\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/222#issuecomment-12757806.\n. Eric,\n\nIs it possible to play a video inside of a shape or image?  If so, do you have any examples of where you might have tried it.\nThanks\n\nTom\n\nFrom: Eric Rowell [mailto:notifications@github.com]\nSent: Sunday, January 27, 2013 12:35 PM\nTo: ericdrowell/KineticJS\nCc: Wilson,Tom\nSubject: Re: [KineticJS] latency on anchor drag with v4.3.0 (#222)\n\nProbably will not work because it looks like hammer only works with DOM nodes. Kineticjs has plans for multi touch support, but its lower in priority at the moment. You can, however, do some of the multi touch work in your app. Check out this lab - http://www.html5canvastutorials.com/labs/html5-canvas-multi-touch-scale-shape-with-kineticjs/\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/222#issuecomment-12757806.\n. Thanks Eric!\n\nFrom: Eric Rowell [mailto:notifications@github.com]\nSent: Friday, January 11, 2013 6:09 PM\nTo: ericdrowell/KineticJS\nCc: Wilson,Tom\nSubject: Re: [KineticJS] latency on anchor drag with v4.3.0 (#222)\n\nThis is not a bug with KineticJS. The tutorial just needs to be updated\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/222#issuecomment-12168086.\n. Eric,\n\nI am trying to integrate hammer.js with kineticjs.  Need to handle multitouch events.  Is this possible without events interfering with one another?\nThanks\n\nFrom: Eric Rowell [mailto:notifications@github.com]\nSent: Friday, January 11, 2013 6:09 PM\nTo: ericdrowell/KineticJS\nCc: Wilson,Tom\nSubject: Re: [KineticJS] latency on anchor drag with v4.3.0 (#222)\n\nThis is not a bug with KineticJS. The tutorial just needs to be updated\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/222#issuecomment-12168086.\n. Yes, I have seen the multi touch examples but cannot get them to behave all the time on all platforms. I look forward to when you have multi touch support.  Thanks\n\nFrom: Eric Rowell [mailto:notifications@github.com]\nSent: Sunday, January 27, 2013 12:35 PM\nTo: ericdrowell/KineticJS\nCc: Wilson,Tom\nSubject: Re: [KineticJS] latency on anchor drag with v4.3.0 (#222)\n\nProbably will not work because it looks like hammer only works with DOM nodes. Kineticjs has plans for multi touch support, but its lower in priority at the moment. You can, however, do some of the multi touch work in your app. Check out this lab - http://www.html5canvastutorials.com/labs/html5-canvas-multi-touch-scale-shape-with-kineticjs/\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/222#issuecomment-12757806.\n. Hi Eric,\n\nNeed some help with keeping the object centered around my fingers when I use two finger zoom.  I based on one of your multi-touch examples.  The object jumps off the screen and I am not sure why.  Also, what is the best way to rotate a kinetic object?  Appreciate any help with this, I know you have other things to do.\n\nThanks\n\nThomas Wilson\nSignage Architect\nwww.GotSignage.com\n\n[cid:image001.gif@01CE005E.DD5A6DE0]\n230 Clearfield Ave, Suite 113\nVirginia Beach, VA  23462\n757.463.9120 (O)\n757.652.6893 (M)\ntwilson@savantltd.com\n\nFrom: Eric Rowell [mailto:notifications@github.com]\nSent: Sunday, January 27, 2013 12:35 PM\nTo: ericdrowell/KineticJS\nCc: Wilson,Tom\nSubject: Re: [KineticJS] latency on anchor drag with v4.3.0 (#222)\n\nProbably will not work because it looks like hammer only works with DOM nodes. Kineticjs has plans for multi touch support, but its lower in priority at the moment. You can, however, do some of the multi touch work in your app. Check out this lab - http://www.html5canvastutorials.com/labs/html5-canvas-multi-touch-scale-shape-with-kineticjs/\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/222#issuecomment-12757806.\n. Eric,\n\nIs it possible to play a video inside of a shape or image?  If so, do you have any examples of where you might have tried it.\nThanks\n\nTom\n\nFrom: Eric Rowell [mailto:notifications@github.com]\nSent: Sunday, January 27, 2013 12:35 PM\nTo: ericdrowell/KineticJS\nCc: Wilson,Tom\nSubject: Re: [KineticJS] latency on anchor drag with v4.3.0 (#222)\n\nProbably will not work because it looks like hammer only works with DOM nodes. Kineticjs has plans for multi touch support, but its lower in priority at the moment. You can, however, do some of the multi touch work in your app. Check out this lab - http://www.html5canvastutorials.com/labs/html5-canvas-multi-touch-scale-shape-with-kineticjs/\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/222#issuecomment-12757806.\n. ",
    "Villabolo": "Regarding touchscreen gesture support mentioned above.\nStrongly suggest you make it a higher priority. I to was about to use hammer.js with kinetic, but clearly it isn't possible.\n\nI would think better touchscreen support would greatly increase the use of KineticJS across platforms and we just can't ignore touchscreen now. It's become an essential feature.\n. It has occured a number of times on my PC.\nLast time I had a chance to investigate, I isolated it to the animation class, or at least the actions my app was doing in that class.\nHowever since upgrading to the current version of Kinetic I haven't noticed the problem.\nWas wondering if it was related to the fill/stroke combined with shadow/opacity.\n\nIf it happens again and am able to pinpoint the source more precisely I'll post again here.\n. Current version (4.7.2) exhibits the same issue. Occured again.\nThe problem I have is that when it occurs on my system, I often don't have the time to investigate it and the conditions to trigger it are unknown.\n. Have I got this correct...\n\nThe problem occurs when a fill and stroke are applied, combined with either opacity or shadow?\nBut if you only have a fill, then combining it with opacity or shadow is OK?\n. Regarding touchscreen gesture support mentioned above.\nStrongly suggest you make it a higher priority. I to was about to use hammer.js with kinetic, but clearly it isn't possible.\n\nI would think better touchscreen support would greatly increase the use of KineticJS across platforms and we just can't ignore touchscreen now. It's become an essential feature.\n. It has occured a number of times on my PC.\nLast time I had a chance to investigate, I isolated it to the animation class, or at least the actions my app was doing in that class.\nHowever since upgrading to the current version of Kinetic I haven't noticed the problem.\nWas wondering if it was related to the fill/stroke combined with shadow/opacity.\n\nIf it happens again and am able to pinpoint the source more precisely I'll post again here.\n. Current version (4.7.2) exhibits the same issue. Occured again.\nThe problem I have is that when it occurs on my system, I often don't have the time to investigate it and the conditions to trigger it are unknown.\n. Have I got this correct...\n\nThe problem occurs when a fill and stroke are applied, combined with either opacity or shadow?\nBut if you only have a fill, then combining it with opacity or shadow is OK?\n. ",
    "firebluetom": "works fine in 4.2.0\n. Thanks for adding dragOnTop attr, this fixes the issue.\n. Can you create a jsfiddle demonstrating the problem?\n. I've already addressed this issue on stackoverflow, this is an issue of logical flow rather than anything with kineticjs. \n\n//////////////// from stack overflow ///////////////////////////\nhttp://jsfiddle.net/tbYLe/2/\n\nYou have to add an extra attribute to your groups 'dragOnTop' (use with 4.3.1)\n\n```\nvar grp1 = new Kinetic.Group(\n{\n    id: 'grp1',\n    name: 'grp1',\n    height: 100,\n    width: 100,\n    draggable: true,\n    dragOnTop: false   //<-- right here is what you need, add this to your other group too\n});\n```\n\nThis prevents the element from being placed in a new layer while dragging and will fix your disappearing square issue.\n\nRegarding Absolute Position:\n\nYou need to set the absolute position after you have nested your groups, not after creating them. Take a look:\n\n```\ngrp1.add(sqr1);\ngrp2.add(sqr2);\n\ngrp1.add(grp2);                      //nested groups\n\ngrp1.setAbsolutePosition(100, 100);  //set absolute position after nesting groups\ngrp2.setAbsolutePosition(110, 110);  //set absolute position after nesting groups\n\nlayer.add(grp1);\n```\n. works fine in 4.2.0\n. Thanks for adding dragOnTop attr, this fixes the issue.\n. Can you create a jsfiddle demonstrating the problem?\n. I've already addressed this issue on stackoverflow, this is an issue of logical flow rather than anything with kineticjs. \n\n//////////////// from stack overflow ///////////////////////////\nhttp://jsfiddle.net/tbYLe/2/\n\nYou have to add an extra attribute to your groups 'dragOnTop' (use with 4.3.1)\n\n```\nvar grp1 = new Kinetic.Group(\n{\n    id: 'grp1',\n    name: 'grp1',\n    height: 100,\n    width: 100,\n    draggable: true,\n    dragOnTop: false   //<-- right here is what you need, add this to your other group too\n});\n```\n\nThis prevents the element from being placed in a new layer while dragging and will fix your disappearing square issue.\n\nRegarding Absolute Position:\n\nYou need to set the absolute position after you have nested your groups, not after creating them. Take a look:\n\n```\ngrp1.add(sqr1);\ngrp2.add(sqr2);\n\ngrp1.add(grp2);                      //nested groups\n\ngrp1.setAbsolutePosition(100, 100);  //set absolute position after nesting groups\ngrp2.setAbsolutePosition(110, 110);  //set absolute position after nesting groups\n\nlayer.add(grp1);\n```\n. ",
    "mihhail-lapushkin": "OK, fair enough.\n\nWell, I am not a Flash developer, I've used Flash only once to create a small game for university subject. I needed those functions in my current project, so I implemented them based on my own ideas, but if you want to get some ideas about porting Flash to JS I would recommend EaselJS, since it is a one-to-one port of Flash's object model to Canvas. It also has some cool features like blur filter, but it is still not as good as Kinetic.\n. thx for the quick reply!\n\ngetAbsolutePosition- did not notice that, thx!\n\nI am using setListening extensively, so I would be really glad to shortcut it, lack of others I can accept =)\n. Hi,\n\nwith version 1.3 only this is needed:\n    **Kinetic.Stage**.prototype._getContentPosition = function() {\n        var rect = this.content.getBoundingClientRect ? this.content.getBoundingClientRect() : { top : 0, left : 0 };\n        return { top: rect.top, left: rect.left };\n    };\n\ncheck out my project:\nhttps://github.com/mihhail-lapushkin/Ancient-Riddle\n\nit is a real working game for cocoonjs\nmaybe you will find something useful there, but I can't remember any other modifications that are I've made to make it work\n. sorry, did not understand what you meant by \"per quested net\"\n\nyeah, I've had your problem also when I've used the full version of kineticjs, but for mobile I use a custom build, which excludes lots of the stuff I don't need, so I did not address this issue so much\nthe problem is coming from drag&drop code line 3079 as the console suggests, so if you are not planning to use drag&drop you can make a custom build without it\nif you want to use it you will need to make some kind of a workaround for this issue\n. new version is out, but this tiny issue is still there =)\n. 1) still not in 4.5 :)\n. the patch does not affect animation code, so it can't affect the speed\n\n```\nvar redrawNode = this.nodeType === 'Stage' ? this : this.getLayer();\nvar duration = config.duration;\n\nvar vars = {\n  onUpdate: function() { redrawNode.batchDraw(); },\n  onComplete: config.callback ? config.callback.bind(this) : undefined,\n  ease: easingMap[config.easing ? config.easing : 'linear']\n};\n\ndelete config.duration;\ndelete config.callback;\ndelete config.easing;\n\nfor (var prop in config) {\n  var val = config[prop];\n\n  if (typeof val === 'object') {\n    for (var p in val) {\n      vars['set' + capitalize(prop) + capitalize(p)] = val[p];\n    }\n  } else {\n    vars['set' + capitalize(prop)] = val;\n  }\n}\n\nTweenLite.killTweensOf(this);\n\nreturn TweenLite.to(this, duration, vars);\n```\n\n+1 to port transition control logic from GS to KJS :)\n\nThanks for quick reply!\n. Hi Jack,\n\nI have no doubts that GS is better in all possible means. The code that I showed runs only once to start the animation, but the problem was that the animation itself was a bit less smooth, although both performed quite good and even the CPU usage was the same. On a faster computer or the one with SSD or even in a faster browser like Chrome the difference is not noticeable, but that does not help me, since I make the game for mobile devices, where every bit of FPS makes sense.\nMaybe the problem was really in the updated KJS or how I had to make tiny adjustments to some parts of the game to make it compatible with 4.5, I don't know. It was a pretty clear comparison on a real product: same codebase with different engines.\nI will try to test it in CocoonJS on a really old device to see if results repeat. There the difference is more noticeable.\n\nThanks for the great discussion!\n. Thanks for your hard work Eric!\n\nI did a few more tests on desktop and actually have not found any significant differences in performance. From the visual point of view both engines performed identical.\nRegarding CocoonJS, I was not able to test it, because 4.5 version had some serious problems with animations, although it worked fine on desktop. Properties were tweening, but only one redraw was being executed though the whole tween. Maybe it has something to do with batchDraw, CJS delays RAF or something. Anyway, if 4.5.1 won't fix this I will investigate it more deeply.\n. Thanks for your comment Jack!\n\nEric, onFinished seems to not work.\n. Well, in the blacklist you still have onFinished and I don't see any onFinish events fired...\n\nAre you asking about those 4.5 animation problems? I experienced not in Safari, but in CocoonJS and I am not sure if they are even related to this bug.\n. nope, you're mistaking with PhoneGap\nCocoonJS is separate browser-like emulator for canvas only\n. OK, I got it.\n\nI changed one very performance critical setter from attrs.x/y to setX/Y. Before I was using attrs.x/y directly, since in that place true setters were giving a huge impact on performance with those pre and post actions.\nTo solve this I use direct setting through attrs and manually clear cachedTransform on every node before the draw. This works, but it is of course bad in terms of encapsulation.\nWith that fix performance wise everything seems to be OK and maybe even better in some places, so good job!\n. mm, no, I am saying that using node.attrs.x = x is faster than node.setX(x)\n. Yes, like I mentioned earlier there is a lot of stuff happening in those setters so for performance critical stuff they are a bit of an overkill.\nIf I comment out those things than a lot of my logic would not work, so the test would not show much, but I see no other reasons why setters could be slow. The core reason seems to be that the event is propagated though the whole tree, but generally you don't need that to happen anyway.\n. OK, I'll give it a try today.\n\nWouldn't making change events with cancelBubble = true by default be better? I mean, why would some upper level node want to know if some lower node changed it's property or not. If it really wants to, then it would be better to pass a reference to this node and listen only on this node for the event.\n. Well, my mobile tests showed that things improved, but setting properties directly is still a bit faster. I guess it is just a really performance critical part of the app, where every tiny bit of CPU matters.\n. initially I think the framework had a proper class system, but it was dropped in v4.0.1 (see changelog):\n- Dependency on Class utility has been removed because it was really slowing down Node instantiations. New custom solution is about 2x faster\n. That's so awesome!\nJust a few days ago had this idea.\n\nI am starting a new Kinetic project with TypeScript, so I would definitely give it a try!\n\nPS- make sure you include it here: https://github.com/borisyankov/DefinitelyTyped\n. OK, fair enough.\n\nWell, I am not a Flash developer, I've used Flash only once to create a small game for university subject. I needed those functions in my current project, so I implemented them based on my own ideas, but if you want to get some ideas about porting Flash to JS I would recommend EaselJS, since it is a one-to-one port of Flash's object model to Canvas. It also has some cool features like blur filter, but it is still not as good as Kinetic.\n. thx for the quick reply!\n\ngetAbsolutePosition- did not notice that, thx!\n\nI am using setListening extensively, so I would be really glad to shortcut it, lack of others I can accept =)\n. Hi,\n\nwith version 1.3 only this is needed:\n    **Kinetic.Stage**.prototype._getContentPosition = function() {\n        var rect = this.content.getBoundingClientRect ? this.content.getBoundingClientRect() : { top : 0, left : 0 };\n        return { top: rect.top, left: rect.left };\n    };\n\ncheck out my project:\nhttps://github.com/mihhail-lapushkin/Ancient-Riddle\n\nit is a real working game for cocoonjs\nmaybe you will find something useful there, but I can't remember any other modifications that are I've made to make it work\n. sorry, did not understand what you meant by \"per quested net\"\n\nyeah, I've had your problem also when I've used the full version of kineticjs, but for mobile I use a custom build, which excludes lots of the stuff I don't need, so I did not address this issue so much\nthe problem is coming from drag&drop code line 3079 as the console suggests, so if you are not planning to use drag&drop you can make a custom build without it\nif you want to use it you will need to make some kind of a workaround for this issue\n. new version is out, but this tiny issue is still there =)\n. 1) still not in 4.5 :)\n. the patch does not affect animation code, so it can't affect the speed\n\n```\nvar redrawNode = this.nodeType === 'Stage' ? this : this.getLayer();\nvar duration = config.duration;\n\nvar vars = {\n  onUpdate: function() { redrawNode.batchDraw(); },\n  onComplete: config.callback ? config.callback.bind(this) : undefined,\n  ease: easingMap[config.easing ? config.easing : 'linear']\n};\n\ndelete config.duration;\ndelete config.callback;\ndelete config.easing;\n\nfor (var prop in config) {\n  var val = config[prop];\n\n  if (typeof val === 'object') {\n    for (var p in val) {\n      vars['set' + capitalize(prop) + capitalize(p)] = val[p];\n    }\n  } else {\n    vars['set' + capitalize(prop)] = val;\n  }\n}\n\nTweenLite.killTweensOf(this);\n\nreturn TweenLite.to(this, duration, vars);\n```\n\n+1 to port transition control logic from GS to KJS :)\n\nThanks for quick reply!\n. Hi Jack,\n\nI have no doubts that GS is better in all possible means. The code that I showed runs only once to start the animation, but the problem was that the animation itself was a bit less smooth, although both performed quite good and even the CPU usage was the same. On a faster computer or the one with SSD or even in a faster browser like Chrome the difference is not noticeable, but that does not help me, since I make the game for mobile devices, where every bit of FPS makes sense.\nMaybe the problem was really in the updated KJS or how I had to make tiny adjustments to some parts of the game to make it compatible with 4.5, I don't know. It was a pretty clear comparison on a real product: same codebase with different engines.\nI will try to test it in CocoonJS on a really old device to see if results repeat. There the difference is more noticeable.\n\nThanks for the great discussion!\n. Thanks for your hard work Eric!\n\nI did a few more tests on desktop and actually have not found any significant differences in performance. From the visual point of view both engines performed identical.\nRegarding CocoonJS, I was not able to test it, because 4.5 version had some serious problems with animations, although it worked fine on desktop. Properties were tweening, but only one redraw was being executed though the whole tween. Maybe it has something to do with batchDraw, CJS delays RAF or something. Anyway, if 4.5.1 won't fix this I will investigate it more deeply.\n. Thanks for your comment Jack!\n\nEric, onFinished seems to not work.\n. Well, in the blacklist you still have onFinished and I don't see any onFinish events fired...\n\nAre you asking about those 4.5 animation problems? I experienced not in Safari, but in CocoonJS and I am not sure if they are even related to this bug.\n. nope, you're mistaking with PhoneGap\nCocoonJS is separate browser-like emulator for canvas only\n. OK, I got it.\n\nI changed one very performance critical setter from attrs.x/y to setX/Y. Before I was using attrs.x/y directly, since in that place true setters were giving a huge impact on performance with those pre and post actions.\nTo solve this I use direct setting through attrs and manually clear cachedTransform on every node before the draw. This works, but it is of course bad in terms of encapsulation.\nWith that fix performance wise everything seems to be OK and maybe even better in some places, so good job!\n. mm, no, I am saying that using node.attrs.x = x is faster than node.setX(x)\n. Yes, like I mentioned earlier there is a lot of stuff happening in those setters so for performance critical stuff they are a bit of an overkill.\nIf I comment out those things than a lot of my logic would not work, so the test would not show much, but I see no other reasons why setters could be slow. The core reason seems to be that the event is propagated though the whole tree, but generally you don't need that to happen anyway.\n. OK, I'll give it a try today.\n\nWouldn't making change events with cancelBubble = true by default be better? I mean, why would some upper level node want to know if some lower node changed it's property or not. If it really wants to, then it would be better to pass a reference to this node and listen only on this node for the event.\n. Well, my mobile tests showed that things improved, but setting properties directly is still a bit faster. I guess it is just a really performance critical part of the app, where every tiny bit of CPU matters.\n. initially I think the framework had a proper class system, but it was dropped in v4.0.1 (see changelog):\n- Dependency on Class utility has been removed because it was really slowing down Node instantiations. New custom solution is about 2x faster\n. That's so awesome!\nJust a few days ago had this idea.\n\nI am starting a new Kinetic project with TypeScript, so I would definitely give it a try!\n\nPS- make sure you include it here: https://github.com/borisyankov/DefinitelyTyped\n. ",
    "perqa": "Hello, I am currently trying to use KineticJS in combination with CocoonJS, and as you say, it doesn't work. I tried adding the changes mihhail-lapushkin suggested above, but it still doesn't work. In that code, it says \"State.prototype\", and yes I have tried that as well as \"Stage.prototype\", since I assumed it was a typo. \n\nDo you happen to have any more, or updated, information on how to get it working? Grateful for any help or pointers in this. \n. Thanks for taking the time to reply! Beautiful game. I have looked at it, but only scratching the surface so far. I tried the code you sent. I run the code snippet when window.onload triggers, so Kinetic should already be loaded. The app works fine in Chrome, but not in the CocoonJS Launcher App on iOS. I am using the latest version 1.3. I attach a screenshot here. You are welcome to email me directly at per &lt;at&gt; quested &lt;dot&gt; net, if you wish, to keep this thread on topic.\n\n![KineticCocoonErrors](https://f.cloud.github.com/assets/960796/253864/f37f979c-8be3-11e2-9e8b-ffdd215dd650.png)\n. Hello, I am currently trying to use KineticJS in combination with CocoonJS, and as you say, it doesn't work. I tried adding the changes mihhail-lapushkin suggested above, but it still doesn't work. In that code, it says \"State.prototype\", and yes I have tried that as well as \"Stage.prototype\", since I assumed it was a typo. \n\nDo you happen to have any more, or updated, information on how to get it working? Grateful for any help or pointers in this. \n. Thanks for taking the time to reply! Beautiful game. I have looked at it, but only scratching the surface so far. I tried the code you sent. I run the code snippet when window.onload triggers, so Kinetic should already be loaded. The app works fine in Chrome, but not in the CocoonJS Launcher App on iOS. I am using the latest version 1.3. I attach a screenshot here. You are welcome to email me directly at per &lt;at&gt; quested &lt;dot&gt; net, if you wish, to keep this thread on topic.\n\n![KineticCocoonErrors](https://f.cloud.github.com/assets/960796/253864/f37f979c-8be3-11e2-9e8b-ffdd215dd650.png)\n. ",
    "sarath2": "Thanks Eric.\n. Thanks Eric.\n. ",
    "mazavr": "Sorry, \"dragOnTop:false\" solves the problem.\n. FYI If you use chrome incognito mode for the first time, you get correct behaviour.\n. Sorry, \"dragOnTop:false\" solves the problem.\n. FYI If you use chrome incognito mode for the first time, you get correct behaviour.\n. ",
    "ashish-y": "I'll try and see what I can do!\nThanks\n. Dimensions of a canvas are not important..you can resize it to whatever you want.\nJust trying to make a plugin to make things simpler :smile: \n. Hey Eric..\nM done making the plugin..\nSHould I just upload it somewhere on the web or send it to you first or something?\n. If it works for you\nI can create a static web page with all kineticJs plugins ..just let me know\n. Alright! Cool.. Will keep u updated\n. @michaelDotco2 : I did make something long back and haven't worked on it ever since.\nyou can check out the link here. I haven't tested it for other version for kineticJS so don't know if it'll work for you or not but nonethe less have a look: https://github.com/ashish-y/Kinetic.plugin.resizable\n. @namnn89 : you can download a 5.0.1.tar from http://www.kineticjs.com/ and accordingly include it in your project.\n. Hey \n\nI stopped working on it .\nI made it for kinetic-v4.3.3, haven't really updated anything on this after that.\nBut it works fine with shapes/polygons and I don't think you need to change much to make it work with the new library.\n\nThanks\n. For now I have added a dictionary to get the unique ids and I'm iterating over those Ids and getting the desired result.\nI can't really make a jsfiddle for this.\nThanks anyway :)\n. Hey\nYa I know ..\nYou have the old example with you?\nThe one with 4.0.1\nCause if I start updating my code to 4.3.3\nIt will take a hell lot of time ,will have to re write most of the stuff.\nThat's why ..looking for the old tutorial one with createbufferimage \n. Never mind \nGot it \n\nhttp://web.archive.org/web/*/http://html5canvastutorials.com\n\n:)\n. Got it!\nSomething to do with the Layer I was creating..\n. I'll try and see what I can do!\nThanks\n. Dimensions of a canvas are not important..you can resize it to whatever you want.\nJust trying to make a plugin to make things simpler :smile: \n. Hey Eric..\nM done making the plugin..\nSHould I just upload it somewhere on the web or send it to you first or something?\n. If it works for you\nI can create a static web page with all kineticJs plugins ..just let me know\n. Alright! Cool.. Will keep u updated\n. @michaelDotco2 : I did make something long back and haven't worked on it ever since.\nyou can check out the link here. I haven't tested it for other version for kineticJS so don't know if it'll work for you or not but nonethe less have a look: https://github.com/ashish-y/Kinetic.plugin.resizable\n. @namnn89 : you can download a 5.0.1.tar from http://www.kineticjs.com/ and accordingly include it in your project.\n. Hey \n\nI stopped working on it .\nI made it for kinetic-v4.3.3, haven't really updated anything on this after that.\nBut it works fine with shapes/polygons and I don't think you need to change much to make it work with the new library.\n\nThanks\n. For now I have added a dictionary to get the unique ids and I'm iterating over those Ids and getting the desired result.\nI can't really make a jsfiddle for this.\nThanks anyway :)\n. Hey\nYa I know ..\nYou have the old example with you?\nThe one with 4.0.1\nCause if I start updating my code to 4.3.3\nIt will take a hell lot of time ,will have to re write most of the stuff.\nThat's why ..looking for the old tutorial one with createbufferimage \n. Never mind \nGot it \n\nhttp://web.archive.org/web/*/http://html5canvastutorials.com\n\n:)\n. Got it!\nSomething to do with the Layer I was creating..\n. ",
    "fcxcode": "Thanks eric.\n\nIs there a setting that allows us to turn on/off option #1 ?\n\nAlso, can it be made so that if an item is already being dragged, then any out click or mousedown will just re-select that item instead?\n. Thanks eric.\n\nIs there a setting that allows us to turn on/off option #1 ?\n\nAlso, can it be made so that if an item is already being dragged, then any out click or mousedown will just re-select that item instead?\n. ",
    "ncurrin": "Thanks Eric, helped me to understand it better... but saying \"The only way to overcome this is (...) - however, this should definitely not be done, because (...)\" kinda leaves nothing.\n\nIs there anyone who has already solved this issue? Or how do I \" force drag end and stop the drag and drop operation\"? I need some help with this one.\n\nThanks.\n. Thanks Eric, helped me to understand it better... but saying \"The only way to overcome this is (...) - however, this should definitely not be done, because (...)\" kinda leaves nothing.\n\nIs there anyone who has already solved this issue? Or how do I \" force drag end and stop the drag and drop operation\"? I need some help with this one.\n\nThanks.\n. ",
    "ximonn": "I agree it depends on the browser. Though I would like to keep this issue open for a while to monitor.\n\nUsing scale instead of widht/height doesnt make a difference.\nI tried 'forcing' antialiasing by changing in Kinetics library all occurences of 'getting' the 2d context:\n\n```\nvar context = canvas.getContext('2d', {antialias:true});\n```\n\nit doesnt make a difference.\n\nSafari 5 on Mac - antialiasing a downscaled image works by default, no 'tricks' needed!\nSafari 6 on Mac -> doesnt work\nChrome/Firefox/Opera on Mac and on Linux -> doesnt work.\n\nThe only workaround seems to be to downscale the image on the server.\n. Lets close it, workaround to downscale the image on the server is fine.\n. If you have a jsfiddle which reproduces it? you can try out one of the work arounds.\nFor myself I havent seen the issue in a while, Im using kinetic-v4.5.1.js\n. @dvsmaximaa did you try the workaround? use the uncompressed kinetics 4.7.2 file and lookup the _drawImage function and do the same change. \n. after comparing with the example, found that adding a terminating 'z' to the data string will make it work with v4.7.2\n\ndata: 'm 35,30 c 20,-10 -16,-13 12,-2 3,-2 25,-10z',\n. Ok, only thing what makes me wonder is that I used the data as it was exported from adobes vector drawing program.\nSo I guess some others will run into the issue that they need to put this 'z' at the end of the data string.\nFor me its fine, so I'll close this issue.\n. I agree it depends on the browser. Though I would like to keep this issue open for a while to monitor.\n\nUsing scale instead of widht/height doesnt make a difference.\nI tried 'forcing' antialiasing by changing in Kinetics library all occurences of 'getting' the 2d context:\n\n```\nvar context = canvas.getContext('2d', {antialias:true});\n```\n\nit doesnt make a difference.\n\nSafari 5 on Mac - antialiasing a downscaled image works by default, no 'tricks' needed!\nSafari 6 on Mac -> doesnt work\nChrome/Firefox/Opera on Mac and on Linux -> doesnt work.\n\nThe only workaround seems to be to downscale the image on the server.\n. Lets close it, workaround to downscale the image on the server is fine.\n. If you have a jsfiddle which reproduces it? you can try out one of the work arounds.\nFor myself I havent seen the issue in a while, Im using kinetic-v4.5.1.js\n. @dvsmaximaa did you try the workaround? use the uncompressed kinetics 4.7.2 file and lookup the _drawImage function and do the same change. \n. after comparing with the example, found that adding a terminating 'z' to the data string will make it work with v4.7.2\n\ndata: 'm 35,30 c 20,-10 -16,-13 12,-2 3,-2 25,-10z',\n. Ok, only thing what makes me wonder is that I used the data as it was exported from adobes vector drawing program.\nSo I guess some others will run into the issue that they need to put this 'z' at the end of the data string.\nFor me its fine, so I'll close this issue.\n. ",
    "grapefruit623": "I also meet this bug. It seems like the group's children didn't send to function \"update\" totally.\n. I also meet this bug. It seems like the group's children didn't send to function \"update\" totally.\n. ",
    "denishanson": "See the comments for issue #241 for one solution to the drag issue.  You could also use 4.3.1 and set dragOnTop: false for the circles.\n. I experienced the same problems in my resize code based on that tutorial. The tutorial is failing because the circle being dragged is not a member of the group when the update method is called.  One of the group.get calls is returning undefined.  I believe the \"missing\" circle is in the new drag layer when update is called. \n. A quick fix is to add a line to each switch case in update.\ncase \"topLeft\":\n    topLeft = activeAnchor;\n    ....\ncase \"topRight\":\n    topRight = activeAnchor;\n    ....\n. See the comments for issue #241 for one solution to the drag issue.  You could also use 4.3.1 and set dragOnTop: false for the circles.\n. I experienced the same problems in my resize code based on that tutorial. The tutorial is failing because the circle being dragged is not a member of the group when the update method is called.  One of the group.get calls is returning undefined.  I believe the \"missing\" circle is in the new drag layer when update is called. \n. A quick fix is to add a line to each switch case in update.\ncase \"topLeft\":\n    topLeft = activeAnchor;\n    ....\ncase \"topRight\":\n    topRight = activeAnchor;\n    ....\n. ",
    "nevkatz": "Good to know.  Until it's fixed maybe you could put in a user agent script that launches a \"try another device\" message when the user is using a Windows phone. \n. Okay, I figured it out - the line of code had to do with stage.remove(layer) command.  I'm wondering if I should do layer.destroy() method instead?  \n\nThanks!\n\nNevin\n. Thanks for letting us know.  How about this tutorial with similar functionality - \n\nhttp://tech.joshuacummings.com/2012/07/scalable-draggable-anchored-triangle-in.html\n\nI'll probably be testing this later this week in 4.3.1, but if you have any insight on whether it needs to be updated for the new build (and how), do let us know.  Thanks!\n\nNevin\n. Thanks for letting me know.  I'm going to try getting this to work shortly and perhaps try having everything in one layer.  And I'm not sure this relates to either of our tutorials, but half the time I've found that the problem is that I neglect to call layer.draw() at the appropriate time, so that might be something else to watch out for with this (or other) scripts.  \n\nNevin\n. Okay, I got the triangle working in 4.3.1  - \n\nhttp://webdev.edtechleaders.org/classroom_applet/triangle_test.html\n\nI surmise you could get the polygon image to work by adding an additional point, and then using the fillPatternImage attribute as in this JSFiddle - \n\nhttp://jsfiddle.net/LNeML/12/\n\nHope that helps!\n\nN.\n. Hmmm, very good points.  In my view, I think it would be best to work with the existing tutorial and revise it, since most of the time when I have migrated from an early kineticjs version to the current one, it has just been about changing the syntax.  For instance, have needed to swap in new lines of code for gradient fills, getting objects (using stage.get instead of this.get), and how I remove layers.   I have also noticed that as far as I've seen you cannot have groups within groups in 4.3.0 and up, though I'm not sure if that's relevant to this tutorial.\n\nI'm actually finishing a project for work and don't necessarily have time to work on the image tutorial now, but if I have time later in the week, I'll see if I can tackle it!   My approach would be to just add the code to a new file and have it pull in 4.3.1 from the beginning - then I'd just keep tweaking the code until I get it to work.  Apologies for not being able to do more at the moment, but I hope that helps. \n\nNevin\n. Good to know.  Until it's fixed maybe you could put in a user agent script that launches a \"try another device\" message when the user is using a Windows phone. \n. Okay, I figured it out - the line of code had to do with stage.remove(layer) command.  I'm wondering if I should do layer.destroy() method instead?  \n\nThanks!\n\nNevin\n. Thanks for letting us know.  How about this tutorial with similar functionality - \n\nhttp://tech.joshuacummings.com/2012/07/scalable-draggable-anchored-triangle-in.html\n\nI'll probably be testing this later this week in 4.3.1, but if you have any insight on whether it needs to be updated for the new build (and how), do let us know.  Thanks!\n\nNevin\n. Thanks for letting me know.  I'm going to try getting this to work shortly and perhaps try having everything in one layer.  And I'm not sure this relates to either of our tutorials, but half the time I've found that the problem is that I neglect to call layer.draw() at the appropriate time, so that might be something else to watch out for with this (or other) scripts.  \n\nNevin\n. Okay, I got the triangle working in 4.3.1  - \n\nhttp://webdev.edtechleaders.org/classroom_applet/triangle_test.html\n\nI surmise you could get the polygon image to work by adding an additional point, and then using the fillPatternImage attribute as in this JSFiddle - \n\nhttp://jsfiddle.net/LNeML/12/\n\nHope that helps!\n\nN.\n. Hmmm, very good points.  In my view, I think it would be best to work with the existing tutorial and revise it, since most of the time when I have migrated from an early kineticjs version to the current one, it has just been about changing the syntax.  For instance, have needed to swap in new lines of code for gradient fills, getting objects (using stage.get instead of this.get), and how I remove layers.   I have also noticed that as far as I've seen you cannot have groups within groups in 4.3.0 and up, though I'm not sure if that's relevant to this tutorial.\n\nI'm actually finishing a project for work and don't necessarily have time to work on the image tutorial now, but if I have time later in the week, I'll see if I can tackle it!   My approach would be to just add the code to a new file and have it pull in 4.3.1 from the beginning - then I'd just keep tweaking the code until I get it to work.  Apologies for not being able to do more at the moment, but I hope that helps. \n\nNevin\n. ",
    "franksongca": "Thanks Eric for replying. I agree they do things in odd way^_^.\n\nI identified some issues already(find a way it works) but there is still other things need to get rid of. Probably something not related with KineticJS but need to be done carefully in certain way. See how lucky I would be.\n\nKineticJS is a great framework that can be used to develop native apps that can be expected crossing the devices. I am trying to do so.  \n\nCheers,\nFrank\n\nDate: Mon, 21 Jan 2013 13:25:02 -0800\nFrom: notifications@github.com\nTo: KineticJS@noreply.github.com\nCC: songfrank@hotmail.com\nSubject: Re: [KineticJS] KineticJS not working on windows phone 8 (#235)\n\nHiya!  Unfortunately, I believe that Microsoft has created new Event types (not in the w3c spec) that they expect all developers to use in order to handle touch events on wp8.  I haven't had a chance to look into it yet, and actually pretty annoyed with them in general.  I almost don't want to add support for wp8 :)\n\nI'll keep you posted\n\n```\n          \u2014\n\n          Reply to this email directly or view it on GitHub.\n```\n. Thanks a lot!\n\nYu Song\n\nDate: Mon, 21 Jan 2013 09:08:01 -0800\nFrom: notifications@github.com\nTo: KineticJS@noreply.github.com\nCC: songfrank@hotmail.com\nSubject: Re: [KineticJS] KineticJS not working on windows phone 8 (#235)\n\nGood to know.  Until it's fixed maybe you could put in a user agent script that launches a \"try another device\" message when the user is using a Windows phone. \n\n```\n          \u2014\n\n          Reply to this email directly or view it on GitHub.\n```\n. Think it over, it's not a bug. Sorry for the mistake.\n\nFrank\n\nDate: Mon, 11 Feb 2013 07:42:00 -0800\nFrom: notifications@github.com\nTo: KineticJS@noreply.github.com\nCC: songfrank@hotmail.com\nSubject: Re: [KineticJS] setPosition() not working as expect (#247)\n\nCan you create a jsfiddle demonstrating the problem?\n\n```\n          \u2014\n\n          Reply to this email directly or view it on GitHub..\n```\n. Thanks Eric for replying. I agree they do things in odd way^_^.\n\nI identified some issues already(find a way it works) but there is still other things need to get rid of. Probably something not related with KineticJS but need to be done carefully in certain way. See how lucky I would be.\n\nKineticJS is a great framework that can be used to develop native apps that can be expected crossing the devices. I am trying to do so.  \n\nCheers,\nFrank\n\nDate: Mon, 21 Jan 2013 13:25:02 -0800\nFrom: notifications@github.com\nTo: KineticJS@noreply.github.com\nCC: songfrank@hotmail.com\nSubject: Re: [KineticJS] KineticJS not working on windows phone 8 (#235)\n\nHiya!  Unfortunately, I believe that Microsoft has created new Event types (not in the w3c spec) that they expect all developers to use in order to handle touch events on wp8.  I haven't had a chance to look into it yet, and actually pretty annoyed with them in general.  I almost don't want to add support for wp8 :)\n\nI'll keep you posted\n\n```\n          \u2014\n\n          Reply to this email directly or view it on GitHub.\n```\n. Thanks a lot!\n\nYu Song\n\nDate: Mon, 21 Jan 2013 09:08:01 -0800\nFrom: notifications@github.com\nTo: KineticJS@noreply.github.com\nCC: songfrank@hotmail.com\nSubject: Re: [KineticJS] KineticJS not working on windows phone 8 (#235)\n\nGood to know.  Until it's fixed maybe you could put in a user agent script that launches a \"try another device\" message when the user is using a Windows phone. \n\n```\n          \u2014\n\n          Reply to this email directly or view it on GitHub.\n```\n. Think it over, it's not a bug. Sorry for the mistake.\n\nFrank\n\nDate: Mon, 11 Feb 2013 07:42:00 -0800\nFrom: notifications@github.com\nTo: KineticJS@noreply.github.com\nCC: songfrank@hotmail.com\nSubject: Re: [KineticJS] setPosition() not working as expect (#247)\n\nCan you create a jsfiddle demonstrating the problem?\n\n```\n          \u2014\n\n          Reply to this email directly or view it on GitHub..\n```\n. ",
    "SamuraiPrinciple": "try with fill instead of textFill\n. check https://github.com/ericdrowell/KineticJS/wiki/Change-Log, under \"4.3.0 Jan 06 2013 -> big changes to Kinetic.Text shape...\"\n. Brilliant - that seems to be exactly what we're after.\n\nMany thanks,\ndamjan\n. try with fill instead of textFill\n. check https://github.com/ericdrowell/KineticJS/wiki/Change-Log, under \"4.3.0 Jan 06 2013 -> big changes to Kinetic.Text shape...\"\n. Brilliant - that seems to be exactly what we're after.\n\nMany thanks,\ndamjan\n. ",
    "akademik": "+1 same issue. Once fill property set, setFillPatterImage not replaces fill with image even if I am trying to remove fill with setFill('none')\n. +1 same issue. Once fill property set, setFillPatterImage not replaces fill with image even if I am trying to remove fill with setFill('none')\n. ",
    "nirojsapkota": "Thankyou mitsuhiko . You saved my day .. Gratitude\n. Thankyou mitsuhiko . You saved my day .. Gratitude\n. ",
    "hoangnhien137": "Thank you so much @mitsuhiko , your solution saved me a lot of time !\n. Thank you so much @mitsuhiko , your solution saved me a lot of time !\n. ",
    "SainiMukesh": "Thanks mitsuhiko ,\nit's working now, Really helpful.\n. Thanks mitsuhiko ,\nit's working now, Really helpful.\n. ",
    "ChristianHeckl": "Hi, I second that issue. Fix solved my problem. Thanks a lot, you've made my day :)\n. Hi, I second that issue. Fix solved my problem. Thanks a lot, you've made my day :)\n. ",
    "Kajakske": "Hello Eric,\n\nAnd what would be the way to resolve this?\ni can't seem to find it :-)\n\nCheers,\nTom\n\nOn Thu, Jan 24, 2013 at 4:05 PM, Eric Rowell notifications@github.comwrote:\n\n> This is a known issue - I just need to update the tutorial.\n> \n> Thanks!\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/250#issuecomment-12654933.\n. Hello Eric,\n\nAnd what would be the way to resolve this?\ni can't seem to find it :-)\n\nCheers,\nTom\n\nOn Thu, Jan 24, 2013 at 4:05 PM, Eric Rowell notifications@github.comwrote:\n\n> This is a known issue - I just need to update the tutorial.\n> \n> Thanks!\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/250#issuecomment-12654933.\n. ",
    "michaelDotco2": "Hi is this plugin released?\n. DOes this work with shapes and polygons?\n. Hi is this plugin released?\n. DOes this work with shapes and polygons?\n. ",
    "namnn89": "Hi guy, \nhttp://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v5.0.1.min.js\npage not found\n. Hi guy, \nhttp://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v5.0.1.min.js\npage not found\n. ",
    "nitriques": ">  Could you post a jsfiddle demonstrating the problem?\n\nI will do that right now.\n. Bug reproduced here: http://jsfiddle.net/HZfNC/4/. Try to hover on the yellow circle. See the event firing in the div below the container.\n\nSee the comments in the javascript file. Basically, the hit testing on opaque background is not working.\n\nI will try to install ruby in order to play with the code (and run the tests too)...\n\nBTW, we would like to sponsor your project by contributing to it. We do lots of interactive experiences and Kinetic is really a nice piece of code and we plan to use it a lot. I read your release plans, and would be happy to help. To dot hesitate to contact me if you are interested. \n. I tried setting a size to my custom shape and separate background layer from circle layer and the problem is still there.\n. Thanks for your help. We definitively will send some PR. As per the financial sponsoring, I will see what I can do.\n\nThis is kind of sad, the limitation of one path. Why/how did this constraint have been set ?\n\nLike I said, I tried to separate the background layer from the other ones, but it does not resolve the problem. Are you saying that I should not use a custom shape for my background ? Can I draw directly on the layer ? How ?\n\nThanks again.\n. Thanks for your answer. Well performance is a no brainer, I should have thought about it.\n\nSo we use shapes just as we used integers and boolean, and should create Groups just like we create Classes! Nice!\n\n---\n\nJust for reference, this is the working fiddle: http://jsfiddle.net/HZfNC/6/ (not working in Chrome Canary though, the 'empty filled' shape is being considered \"outside\")\n\nIt works by creating a new extended class from the Layer.\n\n---\n\nThere is one thing that's been bothering me since I started to play with Kinetic. Extending classes created with prototype sucks hard. (see the anonynous function in the fiddle) Would you like to have a better way to extend base classes ? Something a little by like jQuery's `extends` method ? Then each shape could be extended easily.\n\nI send a PR on that maybe later today.\n. And I just forked the project... Which branch contains the \"dev\" code ? Which branch to you prefer to get PR in ?\n. Look at this:\n\n``` javascript\nKinetic.extend = function(base, members, ctor) {\n    var C = ctor || function () {};\n    C.prototype = new base();\n    C.prototype.constructor = C;\n    $.extend(C.prototype, members);\n    return C;\n};\n```\n\n**EDIT:** Note that $.extend is jQuery extends. It could be a simple object's member copy.\n\nAnd after that, in other classes:\n\n``` javascript\nKinetic.Layer.extend = function(members, ctor) {\n    return Kinetic.extend(Kinetic.Layer, members, ctor);\n};\n```\n\nWould this affect performance a lot ???\nI use this pattern in my current project in other to create a \"extended\" layer. And it looks great.\n\n``` javascript\nBackgroundLayer = Kinetic.Layer.extend({\n    drawScene: function() {\n        ...\n    }\n};\nvar bg = new BackgroundLayer();\n```\n. Great :)\n. Good. Well in the mean time, I will try to install Ruby... :(\n. Good!\n. Damn. I should've RTFM.\n\nSorry about that. I just hate representing the array like that. I would prefer [[0, 'blue'], [0, 'black']].\n. Yeah I really like the idea about the 2d array (just the same as points in a line).\nThis makes the code really easier to read. Thanks.\n. This is normal. You have to wait for the image to be loaded first. Please check the onload event of the image before adding your fill pattern to the scene.\n. > and I didn't want to bloat KineticJS with logic not related to canvas\n\nYou are absolutely right. You can even use jquery for this\n\n``` javascript\nvar i = new Image();\n$(i).load(function () { ... });\ni.src = '/path/to/image';\n```\n\nAlways remember to add the load handler BEFORE you set the src.\n. I have the same problem here, see: http://printemps.onf.ca/ and compare with firefox/safari/IE.\n\n25 worked like a charm, in 26 fills are broken. It is still broken in my Canary install (28), both on Windows 7 x64.\n\nWTF Google... WHY !?!?!\n. @ericdrowell Are you the one that push kinetics to cdnjs ?\n. @ericdrowell Thanks man. But I meant http://cdnjs.com/. 4.4.0 is not there yet.\n\nAnd do you know why 26 broke all those things ?\n. Use 'mouseover' event.\n. @vvMINOvv  Yeah that's one solution. Or, you could try to group the nodes into a 'group' and listen on that too.\n. @vvMINOvv Actually, mouseover only fires 'on enter'.\n. Absolutely!\n. @ericdrowell Thanks you so much for your time eric.\n. Awesome!!!\n. >  Could you post a jsfiddle demonstrating the problem?\n\nI will do that right now.\n. Bug reproduced here: http://jsfiddle.net/HZfNC/4/. Try to hover on the yellow circle. See the event firing in the div below the container.\n\nSee the comments in the javascript file. Basically, the hit testing on opaque background is not working.\n\nI will try to install ruby in order to play with the code (and run the tests too)...\n\nBTW, we would like to sponsor your project by contributing to it. We do lots of interactive experiences and Kinetic is really a nice piece of code and we plan to use it a lot. I read your release plans, and would be happy to help. To dot hesitate to contact me if you are interested. \n. I tried setting a size to my custom shape and separate background layer from circle layer and the problem is still there.\n. Thanks for your help. We definitively will send some PR. As per the financial sponsoring, I will see what I can do.\n\nThis is kind of sad, the limitation of one path. Why/how did this constraint have been set ?\n\nLike I said, I tried to separate the background layer from the other ones, but it does not resolve the problem. Are you saying that I should not use a custom shape for my background ? Can I draw directly on the layer ? How ?\n\nThanks again.\n. Thanks for your answer. Well performance is a no brainer, I should have thought about it.\n\nSo we use shapes just as we used integers and boolean, and should create Groups just like we create Classes! Nice!\n\n---\n\nJust for reference, this is the working fiddle: http://jsfiddle.net/HZfNC/6/ (not working in Chrome Canary though, the 'empty filled' shape is being considered \"outside\")\n\nIt works by creating a new extended class from the Layer.\n\n---\n\nThere is one thing that's been bothering me since I started to play with Kinetic. Extending classes created with prototype sucks hard. (see the anonynous function in the fiddle) Would you like to have a better way to extend base classes ? Something a little by like jQuery's `extends` method ? Then each shape could be extended easily.\n\nI send a PR on that maybe later today.\n. And I just forked the project... Which branch contains the \"dev\" code ? Which branch to you prefer to get PR in ?\n. Look at this:\n\n``` javascript\nKinetic.extend = function(base, members, ctor) {\n    var C = ctor || function () {};\n    C.prototype = new base();\n    C.prototype.constructor = C;\n    $.extend(C.prototype, members);\n    return C;\n};\n```\n\n**EDIT:** Note that $.extend is jQuery extends. It could be a simple object's member copy.\n\nAnd after that, in other classes:\n\n``` javascript\nKinetic.Layer.extend = function(members, ctor) {\n    return Kinetic.extend(Kinetic.Layer, members, ctor);\n};\n```\n\nWould this affect performance a lot ???\nI use this pattern in my current project in other to create a \"extended\" layer. And it looks great.\n\n``` javascript\nBackgroundLayer = Kinetic.Layer.extend({\n    drawScene: function() {\n        ...\n    }\n};\nvar bg = new BackgroundLayer();\n```\n. Great :)\n. Good. Well in the mean time, I will try to install Ruby... :(\n. Good!\n. Damn. I should've RTFM.\n\nSorry about that. I just hate representing the array like that. I would prefer [[0, 'blue'], [0, 'black']].\n. Yeah I really like the idea about the 2d array (just the same as points in a line).\nThis makes the code really easier to read. Thanks.\n. This is normal. You have to wait for the image to be loaded first. Please check the onload event of the image before adding your fill pattern to the scene.\n. > and I didn't want to bloat KineticJS with logic not related to canvas\n\nYou are absolutely right. You can even use jquery for this\n\n``` javascript\nvar i = new Image();\n$(i).load(function () { ... });\ni.src = '/path/to/image';\n```\n\nAlways remember to add the load handler BEFORE you set the src.\n. I have the same problem here, see: http://printemps.onf.ca/ and compare with firefox/safari/IE.\n\n25 worked like a charm, in 26 fills are broken. It is still broken in my Canary install (28), both on Windows 7 x64.\n\nWTF Google... WHY !?!?!\n. @ericdrowell Are you the one that push kinetics to cdnjs ?\n. @ericdrowell Thanks man. But I meant http://cdnjs.com/. 4.4.0 is not there yet.\n\nAnd do you know why 26 broke all those things ?\n. Use 'mouseover' event.\n. @vvMINOvv  Yeah that's one solution. Or, you could try to group the nodes into a 'group' and listen on that too.\n. @vvMINOvv Actually, mouseover only fires 'on enter'.\n. Absolutely!\n. @ericdrowell Thanks you so much for your time eric.\n. Awesome!!!\n. ",
    "quackemi": "Thank you very much.  The dragOnTop solution will work fine for me.  Unfortunately the need to set the position after adding the group would require me to re-write my entire application as I have hundreds of objects all being organized in groups .  So instead I have simply added a custom attribute to the group that remembers the original position and then calculates an absolute position as another custom attribute after each drag.  I also find that if you add items to a group, i.e. text or a rectangle, and then drag the group, the positions of the items in the group have a similar issue.  I have added the same custom attributes to the other objects.  \n\nAgain, thank you very much.  Now that I understand what is happening, I will be able to change my way of creating future work.  \n. And just to make it easier...here is a jsfiddle of the original issue, where if I set all of the positions as the items are created, the positions are not returned correctly.  Just so that you don't have to go back and find it in the other issue.\n\nhttp://jsfiddle.net/quackemi/v4yNn/2/\n. And finally, a more realistic example of the kind of things that I have to do:\n\nhttp://jsfiddle.net/quackemi/Qn4qN/3/\n. My understanding of the absolute position is that it is relative to the stage, not the parent container.  Per your documentation: \n\ngetAbsolutePosition() \nget absolute position relative to the top left corner of the stage container div \n\nIn the examples that I show though (except for the first one above where it works correctly), the items are either placed incorrectly with respect to the stage, or report the wrong position with respect to the stage after their parent group has been moved (if they are in a nested group).\n\nI actually have to add it to a group in order for most of my stuff to work, because the items in the groups all have to move together.  \n\nThank you for your help.\n. I have coded a workaround for this situation.  If you would like to see the general idea, you can find it at:\n\nhttp://jsfiddle.net/quackemi/b3b7a/2/\n. Thank you very much.  The dragOnTop solution will work fine for me.  Unfortunately the need to set the position after adding the group would require me to re-write my entire application as I have hundreds of objects all being organized in groups .  So instead I have simply added a custom attribute to the group that remembers the original position and then calculates an absolute position as another custom attribute after each drag.  I also find that if you add items to a group, i.e. text or a rectangle, and then drag the group, the positions of the items in the group have a similar issue.  I have added the same custom attributes to the other objects.  \n\nAgain, thank you very much.  Now that I understand what is happening, I will be able to change my way of creating future work.  \n. And just to make it easier...here is a jsfiddle of the original issue, where if I set all of the positions as the items are created, the positions are not returned correctly.  Just so that you don't have to go back and find it in the other issue.\n\nhttp://jsfiddle.net/quackemi/v4yNn/2/\n. And finally, a more realistic example of the kind of things that I have to do:\n\nhttp://jsfiddle.net/quackemi/Qn4qN/3/\n. My understanding of the absolute position is that it is relative to the stage, not the parent container.  Per your documentation: \n\ngetAbsolutePosition() \nget absolute position relative to the top left corner of the stage container div \n\nIn the examples that I show though (except for the first one above where it works correctly), the items are either placed incorrectly with respect to the stage, or report the wrong position with respect to the stage after their parent group has been moved (if they are in a nested group).\n\nI actually have to add it to a group in order for most of my stuff to work, because the items in the groups all have to move together.  \n\nThank you for your help.\n. I have coded a workaround for this situation.  If you would like to see the general idea, you can find it at:\n\nhttp://jsfiddle.net/quackemi/b3b7a/2/\n. ",
    "allenhwkim": "@ericdrowell , I did not mean dragging stage and circle at the same time. I meant when I drag a circle, it drag circle only. when I drag stage, it drag stage only, without changing around draggable of the stage.\n. @ericdrowell , I did not mean dragging stage and circle at the same time. I meant when I drag a circle, it drag circle only. when I drag stage, it drag stage only, without changing around draggable of the stage.\n. ",
    "Luke-SF": "Thanks! I wasn't refering to the bug in newer Kinetic.js though, I was referring to a bug that is currently only happening in Firefox with an old version of Kinetic.js: https://bugzilla.mozilla.org/show_bug.cgi?id=835064\n. 3.10.1 had this feature, hope this can be added back in soon, as it is messing up backward-compatibility in newer version.\n. Thanks! I wasn't refering to the bug in newer Kinetic.js though, I was referring to a bug that is currently only happening in Firefox with an old version of Kinetic.js: https://bugzilla.mozilla.org/show_bug.cgi?id=835064\n. 3.10.1 had this feature, hope this can be added back in soon, as it is messing up backward-compatibility in newer version.\n. ",
    "aminnaggar": "Yea, they're each their own object, with a bunch of simple functions like (animateToOn, animateToOff etc..)\n\nBad code design you think?\n. They actually are each a custom \"Group\" class. and then I have all 12 in a custom \"Group\" class, which in turn is in the \"Sector\" (Which ...naturally is a custom \"Group\").\n\nMaybe I'm just too used to ActionScript 3 where everything is nicely nested together. Let me know if there's a better method please.\n. Thank you so much Eric, you're a boss!\n\nDoes that mean I can keep my groups so long as I cache my text?\nI'll test your findings on my project and I'll keep you up to date with the results. Cheers!\n. What a boss! thank's again.\n. ps. what do you use to animate colour?\nis what I'm doing bad practice?\n. I can't thank you enough Eric, that demo is awesome!!\n. Thank's for taking the time, and your patience with me. I appreciate it :smile: \n. that's true, but I want a nice smooth animation :smile: (although, I could probably hit that, after it's done, so I'm not wasting redraws?)\n. finally got around to it. Check this http://jsfiddle.net/ua5JW/\n. ps. surprizingly enough \"mouseleave\" seems to work with no problems\n. Thank's @nitriques but I tried that earlier, and it wasn't much of a step up from \"mousemove\", since I have nested nodes in the group, which means, that if I have a circle inside of a square. Then I attach a listener to the square, I'd get a fire the second the mouse becomes \"over\" the square, but I also get a fire every time the mouse is \"over\" the circle.\n\nMy temporary solution for those who want to know btw, was to disable listening to the events of any of the child nodes using `<someNode>.setListening(false);` \n. @nitriques but I'd still have the same problem with false firings using the 'mouseover' technique.\nGenerally speaking 'mouseenter' does exactly what I want, but it doesn't work for me, so then I have to emulate it using 'mouseover'\n. @nitriques you're awesome for helping! Give me till tomorrow, to make you a quick jsfiddle, to show you the problem, (it's really hard to explain with words :s )\n. Yea, they're each their own object, with a bunch of simple functions like (animateToOn, animateToOff etc..)\n\nBad code design you think?\n. They actually are each a custom \"Group\" class. and then I have all 12 in a custom \"Group\" class, which in turn is in the \"Sector\" (Which ...naturally is a custom \"Group\").\n\nMaybe I'm just too used to ActionScript 3 where everything is nicely nested together. Let me know if there's a better method please.\n. Thank you so much Eric, you're a boss!\n\nDoes that mean I can keep my groups so long as I cache my text?\nI'll test your findings on my project and I'll keep you up to date with the results. Cheers!\n. What a boss! thank's again.\n. ps. what do you use to animate colour?\nis what I'm doing bad practice?\n. I can't thank you enough Eric, that demo is awesome!!\n. Thank's for taking the time, and your patience with me. I appreciate it :smile: \n. that's true, but I want a nice smooth animation :smile: (although, I could probably hit that, after it's done, so I'm not wasting redraws?)\n. finally got around to it. Check this http://jsfiddle.net/ua5JW/\n. ps. surprizingly enough \"mouseleave\" seems to work with no problems\n. Thank's @nitriques but I tried that earlier, and it wasn't much of a step up from \"mousemove\", since I have nested nodes in the group, which means, that if I have a circle inside of a square. Then I attach a listener to the square, I'd get a fire the second the mouse becomes \"over\" the square, but I also get a fire every time the mouse is \"over\" the circle.\n\nMy temporary solution for those who want to know btw, was to disable listening to the events of any of the child nodes using `<someNode>.setListening(false);` \n. @nitriques but I'd still have the same problem with false firings using the 'mouseover' technique.\nGenerally speaking 'mouseenter' does exactly what I want, but it doesn't work for me, so then I have to emulate it using 'mouseover'\n. @nitriques you're awesome for helping! Give me till tomorrow, to make you a quick jsfiddle, to show you the problem, (it's really hard to explain with words :s )\n. ",
    "Treeeater": "Thanks! However, the error doesn't go away - if you try to drag 'box1' multiple times, there's an error logged in the console each time after the first.\n. so I am creating a card game GUI, and I want the user to only be able to use left mouse click to drag, and middle mouse click to enlarge the card. While enlarging the card, if the user moves the mouse, I don't want the card to be moved.\n\nMy previous solution is to disable drag when middle button is pressed (onmousedown), and reenable drag when middle button is released. However, this refused to work after 4.3.1 I think. \n\nthanks\n. @tomg7 Hi- Your solution does remove the error, but there's a little glitch - if you set draggable to false on dragstart, the image already moved slightly. Currently I'm still setting draggable to false on mousedown, the error is only visible in console, and has no functionality impact to my app. I'm just waiting for eric to fix this in the next version.\n. Sounds good to me. thanks eric\n. Seems like this problem is still here in the newest version....\n. Thanks! However, the error doesn't go away - if you try to drag 'box1' multiple times, there's an error logged in the console each time after the first.\n. so I am creating a card game GUI, and I want the user to only be able to use left mouse click to drag, and middle mouse click to enlarge the card. While enlarging the card, if the user moves the mouse, I don't want the card to be moved.\n\nMy previous solution is to disable drag when middle button is pressed (onmousedown), and reenable drag when middle button is released. However, this refused to work after 4.3.1 I think. \n\nthanks\n. @tomg7 Hi- Your solution does remove the error, but there's a little glitch - if you set draggable to false on dragstart, the image already moved slightly. Currently I'm still setting draggable to false on mousedown, the error is only visible in console, and has no functionality impact to my app. I'm just waiting for eric to fix this in the next version.\n. Sounds good to me. thanks eric\n. Seems like this problem is still here in the newest version....\n. ",
    "Chris-Rogers": "Hi Eric, do you have any rough idea of when v4.3.4 might be released?  (eg - are we talking a week?  a month? etc)\nI am also encountering this issue - and am just deciding whether or not to bother making a workaround... if it's going to be fixed really soon, then I'll just wait.\nThanks!\n. Love your work Eric. Thanks!\nFor anyone interested in a workaround prior to v4.3.4 - by noting the timestamp at the moment of dragend, I was able to ignore any click event which occurred within a very short timeframe (eg 50ms).\n. Hi Eric, do you have any rough idea of when v4.3.4 might be released?  (eg - are we talking a week?  a month? etc)\nI am also encountering this issue - and am just deciding whether or not to bother making a workaround... if it's going to be fixed really soon, then I'll just wait.\nThanks!\n. Love your work Eric. Thanks!\nFor anyone interested in a workaround prior to v4.3.4 - by noting the timestamp at the moment of dragend, I was able to ignore any click event which occurred within a very short timeframe (eg 50ms).\n. ",
    "thematlin": "Chris-Rogers, if you have a look at the [Release Schedule](https://github.com/ericdrowell/KineticJS/wiki/Release-Schedule) you'll see that the 4.3.4 release is scheduled to be released mid March.\n. Hi Eric!\n\nI just wanted to clarify this issue because I checked out the Release Schedule and I saw you summarized it as \"dragend fired before click\". Isn't the issue that click is fired?\n\nWhen dragging I do not expect click event to be fired at all.\n. If you aren't looking for older versions of the library there is a non-minified version on the KineticJS homepage: www.kineticjs.com just below the big Download button there's a link to \"Download source\".\n. Chris-Rogers, if you have a look at the [Release Schedule](https://github.com/ericdrowell/KineticJS/wiki/Release-Schedule) you'll see that the 4.3.4 release is scheduled to be released mid March.\n. Hi Eric!\n\nI just wanted to clarify this issue because I checked out the Release Schedule and I saw you summarized it as \"dragend fired before click\". Isn't the issue that click is fired?\n\nWhen dragging I do not expect click event to be fired at all.\n. If you aren't looking for older versions of the library there is a non-minified version on the KineticJS homepage: www.kineticjs.com just below the big Download button there's a link to \"Download source\".\n. ",
    "martindevans": "That looks like it fixes it, thanks :)\n\nWhat exactly does the dragOnTop property mean?\n. Ah I see, that makes sense.\n. That looks like it fixes it, thanks :)\n\nWhat exactly does the dragOnTop property mean?\n. Ah I see, that makes sense.\n. ",
    "iameli": "Down for me as well, DNS is resolving the IP correctly to 97.74.215.195. \n\nWeirdly, I'm able to connect if I create an EC2 instance in the North Virginia region and SSH proxy through that. The Oregon region didn't work--consistent with my location, I'm in Seattle.\n\nSome kind of geographical routing problem?\n. Down for me as well, DNS is resolving the IP correctly to 97.74.215.195. \n\nWeirdly, I'm able to connect if I create an EC2 instance in the North Virginia region and SSH proxy through that. The Oregon region didn't work--consistent with my location, I'm in Seattle.\n\nSome kind of geographical routing problem?\n. ",
    "kevinbeauregard": "I messed with it for a while, Google DNS is inconsistent, Open DNS is inconsistent, my router defaults fail every time, but if I bridge my 3g from my phone I can hit it. \n\nOn Feb 14, 2013, at 12:03 AM, Eli Mallon notifications@github.com wrote:\n\n> Down for me as well, DNS is resolving the IP correctly to 97.74.215.195.\n> \n> Weirdly, I'm able to connect if I create an EC2 instance in the North Virginia region and SSH proxy through that. The Oregon region didn't work--consistent with my location, I'm in Seattle.\n> \n> Some kind of geographical routing problem?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. This is true with all retina displays for my code, but if I just try to transition a single object, it works fine. I'm thinking it has to do with images being dynamically resized and then being transitioned on apples 2/1 pixel screen. Will have to look more into it, but closing this ticket.\n. This error also occurs on iphone 4, iOS 5. Definitely have it isolated to Kinetic Stage call as well. \n. Thanks Eric. Will do.\n. I messed with it for a while, Google DNS is inconsistent, Open DNS is inconsistent, my router defaults fail every time, but if I bridge my 3g from my phone I can hit it. \n\nOn Feb 14, 2013, at 12:03 AM, Eli Mallon notifications@github.com wrote:\n\n> Down for me as well, DNS is resolving the IP correctly to 97.74.215.195.\n> \n> Weirdly, I'm able to connect if I create an EC2 instance in the North Virginia region and SSH proxy through that. The Oregon region didn't work--consistent with my location, I'm in Seattle.\n> \n> Some kind of geographical routing problem?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. This is true with all retina displays for my code, but if I just try to transition a single object, it works fine. I'm thinking it has to do with images being dynamically resized and then being transitioned on apples 2/1 pixel screen. Will have to look more into it, but closing this ticket.\n. This error also occurs on iphone 4, iOS 5. Definitely have it isolated to Kinetic Stage call as well. \n. Thanks Eric. Will do.\n. ",
    "itgeorge": "Both KineticJS and html5canvastutorials seem down (I see you're the registrant on both), returning 403 Forbidden.\nNot opening from my machine (Bulgaria), from hidemyass proxy as well as:\nhttp://www.downforeveryoneorjustme.com/kineticjs.com\nhttp://www.downforeveryoneorjustme.com/html5canvastutorials.com\nand\nhttp://www.isitdownrightnow.com/kineticjs.com.html\nhttp://www.isitdownrightnow.com/html5canvastutorials.com.html\n\nSorry if I've missed some announcement (html5canvastutorials was up yesterday), I tried to look around but couldn't find anything except your hiatus message\n. Both KineticJS and html5canvastutorials seem down (I see you're the registrant on both), returning 403 Forbidden.\nNot opening from my machine (Bulgaria), from hidemyass proxy as well as:\nhttp://www.downforeveryoneorjustme.com/kineticjs.com\nhttp://www.downforeveryoneorjustme.com/html5canvastutorials.com\nand\nhttp://www.isitdownrightnow.com/kineticjs.com.html\nhttp://www.isitdownrightnow.com/html5canvastutorials.com.html\n\nSorry if I've missed some announcement (html5canvastutorials was up yesterday), I tried to look around but couldn't find anything except your hiatus message\n. ",
    "AwaisRai": "Let's suppose, if I want to draw image in a shape at center of that shape. Then it will be distorted. Do you have any solution for that issues? \n. Let's suppose, if I want to draw image in a shape at center of that shape. Then it will be distorted. Do you have any solution for that issues? \n. ",
    "ToxicCrack": "That's exactly the problem.. and still unresolved.\n. Hi Eric,\n\nyes, that would do it i think. Thank you!\n\n## \n\nViele Gr\u00fc\u00dfe,\nDaniel Lichtblau\n\n## \n\nSch\u00fchlmann IT-Solutions\nIngenieurb\u00fcro f\u00fcr Informations-&  Softwaretechnologie\n\nTel:   02204 / 30 50 58\nFax:   02204 / 30 63 06\nHandy: 0179  / 83 79 872\n\nOlefant 14b\n51427 Bergisch Gladbach\n\n---\n\nInet:  http://www.schuehlmann.eu\neMail: d.lichtblau@schuehlmann.eu\n\nInhaber: Dipl.Ing. Martin Sch\u00fchlmann\nUSt.ID:  DE189533911\n\n---\n\nDer Inhalt dieser eMail kann vertrauliche Daten beinhalten, die nur an\nspezielle Adressaten weitergegeben werden d\u00fcrfen. Falls Sie nicht zu diesem\nvertraulichen Kreis geh\u00f6ren und diese eMail offensichtlich versehentlich\nerhalten haben, informieren Sie den Absender und l\u00f6schen diese eMail\n\n## bitte unverz\u00fcglich.\n\nAm 21.08.2013 16:07, schrieb Eric Rowell:\n\n> ah. Very interesting use case. Do you think an array of box objects\n> would work? i.e.\n> \n> group.setClip([\n> [0, 0, 100, 50],\n> [0, 50, 50, 100]\n> ]);\n> \n> I can add this functionality to an upcoming release.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/ericdrowell/KineticJS/issues/575#issuecomment-23019365.\n. When would this fix be released? At the moment we are stuck to Version 4.5.3 because of the missing multiple clipping areas.\n. That's exactly the problem.. and still unresolved.\n. Hi Eric,\n\nyes, that would do it i think. Thank you!\n\n## \n\nViele Gr\u00fc\u00dfe,\nDaniel Lichtblau\n\n## \n\nSch\u00fchlmann IT-Solutions\nIngenieurb\u00fcro f\u00fcr Informations-&  Softwaretechnologie\n\nTel:   02204 / 30 50 58\nFax:   02204 / 30 63 06\nHandy: 0179  / 83 79 872\n\nOlefant 14b\n51427 Bergisch Gladbach\n\n---\n\nInet:  http://www.schuehlmann.eu\neMail: d.lichtblau@schuehlmann.eu\n\nInhaber: Dipl.Ing. Martin Sch\u00fchlmann\nUSt.ID:  DE189533911\n\n---\n\nDer Inhalt dieser eMail kann vertrauliche Daten beinhalten, die nur an\nspezielle Adressaten weitergegeben werden d\u00fcrfen. Falls Sie nicht zu diesem\nvertraulichen Kreis geh\u00f6ren und diese eMail offensichtlich versehentlich\nerhalten haben, informieren Sie den Absender und l\u00f6schen diese eMail\n\n## bitte unverz\u00fcglich.\n\nAm 21.08.2013 16:07, schrieb Eric Rowell:\n\n> ah. Very interesting use case. Do you think an array of box objects\n> would work? i.e.\n> \n> group.setClip([\n> [0, 0, 100, 50],\n> [0, 50, 50, 100]\n> ]);\n> \n> I can add this functionality to an upcoming release.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/ericdrowell/KineticJS/issues/575#issuecomment-23019365.\n. When would this fix be released? At the moment we are stuck to Version 4.5.3 because of the missing multiple clipping areas.\n. ",
    "fervanrijswijk": " back already? can't find anything in the docs...\nIt's pretty usefull for aligning multiple line text in buttons etc.\n\nTIA\n. I've did a test something simular to test this one (on iPad3). I added a new layer on each click. With Kinetic each layer is a new canvas.\n\nI creaded a stage of 500 x 500. Max layers i could create 52, than the safari crashed.\n\nAs a canvas is basicly nothing more than an image I've did the same test with some divs containg a same sized image: same result...\n\nMy guess is that is has nothing to do with Kinetic / Canvas, but the resource limitations of iDivece(s)\n. Nice job! Looking forward to :)\n. I have a same issue on tabs. Destroying layers and creating new ones eventually causes my device to crash. It also seems to come in some kind of loop where it is destroying and hiding the layers i was working with (the canvas ellements are visible in the DOM but are flashing in my browser view)\n. I experience only issues at a Samsung Galaxy Note Tab. It seems it simply does not receive/handles touch input with Kinetic. (i've tried the tutorials and labs on KineticJS.com as well). \n. I expierience the same problem. What i DO se is that the interaction is still available! (hitregions are being drawn)\n\nI guess it's a chrome issue though...\n. Tahks for the reply,\n\nBut clearing the cache and setting the opacity to 0 will resolve into an non-clickable region because all pixels have 0 opacity.\n. Is it possible to manually replace the image data (stripped with opacity pixels)\n. Thanks. I was experimenting with that already. I think i'll wait for the update. Nothing is broken yet.. :-)\n.  back already? can't find anything in the docs...\nIt's pretty usefull for aligning multiple line text in buttons etc.\n\nTIA\n. I've did a test something simular to test this one (on iPad3). I added a new layer on each click. With Kinetic each layer is a new canvas.\n\nI creaded a stage of 500 x 500. Max layers i could create 52, than the safari crashed.\n\nAs a canvas is basicly nothing more than an image I've did the same test with some divs containg a same sized image: same result...\n\nMy guess is that is has nothing to do with Kinetic / Canvas, but the resource limitations of iDivece(s)\n. Nice job! Looking forward to :)\n. I have a same issue on tabs. Destroying layers and creating new ones eventually causes my device to crash. It also seems to come in some kind of loop where it is destroying and hiding the layers i was working with (the canvas ellements are visible in the DOM but are flashing in my browser view)\n. I experience only issues at a Samsung Galaxy Note Tab. It seems it simply does not receive/handles touch input with Kinetic. (i've tried the tutorials and labs on KineticJS.com as well). \n. I expierience the same problem. What i DO se is that the interaction is still available! (hitregions are being drawn)\n\nI guess it's a chrome issue though...\n. Tahks for the reply,\n\nBut clearing the cache and setting the opacity to 0 will resolve into an non-clickable region because all pixels have 0 opacity.\n. Is it possible to manually replace the image data (stripped with opacity pixels)\n. Thanks. I was experimenting with that already. I think i'll wait for the update. Nothing is broken yet.. :-)\n. ",
    "heqiao": "Would you add it back soon?  A very useful feature.\n. `var text = new Kinetic.Text();`\n`text.setFontStyle('bold italic');`\n. I can confirm this. No version of IE works.\n. Would you add it back soon?  A very useful feature.\n. `var text = new Kinetic.Text();`\n`text.setFontStyle('bold italic');`\n. I can confirm this. No version of IE works.\n. ",
    "tpetrina": "I look forward to that tutorial since I was unable to do it cleanly myself. Adding support for special layers seemed like the best idea.\n. Great :)\n. I look forward to that tutorial since I was unable to do it cleanly myself. Adding support for special layers seemed like the best idea.\n. Great :)\n. ",
    "umesh25": "hello , i also getting same ERROR using kinetic js-v4.3.3 , is there any solution for this type of issue. ? please reply asap.. thanx\n. hello , i also getting same ERROR using kinetic js-v4.3.3 , is there any solution for this type of issue. ? please reply asap.. thanx\n. ",
    "prasadKodeInCloud": "Hi,\nPlz fix this issue.our tool is in trouble bcs of this\n. Hi,\nPlz fix this issue.our tool is in trouble bcs of this\n. ",
    "HemanthFromIndia": "Hi, same problem here. Please give the patch for the same.\n. I have tried with multiple layers but not with multiple groups, i will try this once and let you know. Also i have updated the version to 5.0.1 but i am not able to see much improvement. Even now sometimes firefox will crash.\n. @marekhrabe \nI got a doubt here, r u asking me to add layers to groups or the other way around. Because i found that groups can be added to layers but not the other way around.\n. @marekhrabe : Grouping of images wont serve my purpose since i need to drag n drop every image over the canvas, so what i did is by creating multiple layers,i added added 5 images to each layer. But still more or less the same result. Also rendering time to render 600 images is more than 4mins which is not acceptable at enterprise level application.\n. @ericdrowell Can you look into this issue once, i am running out of the time limits.\n. Hi @ericdrowell , Its a web application, i am using tomcat server. My application is a hierarchical view comprising of images and links.\n For every 10 images i am using a single layer, but i am keeping a limit of 75 layers. Also Every image is connected by a link(Kinetic.Line). For links also i am using the same logic of 10:1 relation as that of the images.\nImages are with extension \".png\".\nI dont know what does sprite image means.   \n. @ericdrowell  and @marekhrabe : I got to know about sprite images, thanks for that this was a good learning curve. However that doesn't serve my purpose for greater extents.\n\nIn Firefox sometimes i am getting following exceptions in kinetic.js file:-\nNS_ERROR_FAILURE:\nthis._context.transform(a[0], a[1], a[2], a[3], a[4], a[5]);\nNS_ERROR_FAILURE: \n... = this.hitCanvas.context._context.getImageData(pos.x | 0, pos.y | 0, 1, 1).data\nOnce if i get the above exceptions, then even if i just move the mouse cursor over canvas number of bug count increases in firebug.\nPlease help me i am fed up with this issue.\n. HI @marekhrabe  and @ericdrowell : My canvas width and height is 1700. I have attached a snapshot for you reference.\n. Hi @ericdrowell  and @marekhrabe , any updates on this bug? I am running out of time, please help me.\n. Hi @ericdrowell : Any update on this bug ?\n. Hi @marekhrabe  any updates on this bug?\n. Hi, same problem here. Please give the patch for the same.\n. I have tried with multiple layers but not with multiple groups, i will try this once and let you know. Also i have updated the version to 5.0.1 but i am not able to see much improvement. Even now sometimes firefox will crash.\n. @marekhrabe \nI got a doubt here, r u asking me to add layers to groups or the other way around. Because i found that groups can be added to layers but not the other way around.\n. @marekhrabe : Grouping of images wont serve my purpose since i need to drag n drop every image over the canvas, so what i did is by creating multiple layers,i added added 5 images to each layer. But still more or less the same result. Also rendering time to render 600 images is more than 4mins which is not acceptable at enterprise level application.\n. @ericdrowell Can you look into this issue once, i am running out of the time limits.\n. Hi @ericdrowell , Its a web application, i am using tomcat server. My application is a hierarchical view comprising of images and links.\n For every 10 images i am using a single layer, but i am keeping a limit of 75 layers. Also Every image is connected by a link(Kinetic.Line). For links also i am using the same logic of 10:1 relation as that of the images.\nImages are with extension \".png\".\nI dont know what does sprite image means.   \n. @ericdrowell  and @marekhrabe : I got to know about sprite images, thanks for that this was a good learning curve. However that doesn't serve my purpose for greater extents.\n\nIn Firefox sometimes i am getting following exceptions in kinetic.js file:-\nNS_ERROR_FAILURE:\nthis._context.transform(a[0], a[1], a[2], a[3], a[4], a[5]);\nNS_ERROR_FAILURE: \n... = this.hitCanvas.context._context.getImageData(pos.x | 0, pos.y | 0, 1, 1).data\nOnce if i get the above exceptions, then even if i just move the mouse cursor over canvas number of bug count increases in firebug.\nPlease help me i am fed up with this issue.\n. HI @marekhrabe  and @ericdrowell : My canvas width and height is 1700. I have attached a snapshot for you reference.\n. Hi @ericdrowell  and @marekhrabe , any updates on this bug? I am running out of time, please help me.\n. Hi @ericdrowell : Any update on this bug ?\n. Hi @marekhrabe  any updates on this bug?\n. ",
    "mattslocum": "It happens for me in kinetic-v5.1.0.js:1713\nIt appears to be when when FF is having performance trouble. Images that are already loaded in memory become not ready. From what I can tell FF has had this problem for many years now. https://bugzilla.mozilla.org/show_bug.cgi?id=574330\n\nFF memory consuption spikes to around 1.8GB during this problem, and then drops back down to 200MB or so when it catches back up. \nAdding:\nif (!a[0].complete) return '';\nstopped FF from throwing the error and causeing weird rendering artifacts. \n\nI'm wondering if before return ''; we should throttle back the frameRate until FF catches up, since it would be clear that FF is having performance problems when that condition happens.\n. For me the problem is not with the image. The image is already loaded and being used in the canvas. The problem happens during animation ticks. It feels like sometimes Firefox has performance issues and isn't able to deliver the image during the redraw of the animation tick.\n\nI like your solution with the Kinetic.UA.browser === \"mozilla\" for now. I might do a variation on that until I have a better solution.\n. There you go. Unit tests for Kinetic._addName. I just used a string to represent the node because it could be any object for a unit test.\n. I removed the change to Global.test.js and added a test to Container-test.js\n. It happens for me in kinetic-v5.1.0.js:1713\nIt appears to be when when FF is having performance trouble. Images that are already loaded in memory become not ready. From what I can tell FF has had this problem for many years now. https://bugzilla.mozilla.org/show_bug.cgi?id=574330\n\nFF memory consuption spikes to around 1.8GB during this problem, and then drops back down to 200MB or so when it catches back up. \nAdding:\nif (!a[0].complete) return '';\nstopped FF from throwing the error and causeing weird rendering artifacts. \n\nI'm wondering if before return ''; we should throttle back the frameRate until FF catches up, since it would be clear that FF is having performance problems when that condition happens.\n. For me the problem is not with the image. The image is already loaded and being used in the canvas. The problem happens during animation ticks. It feels like sometimes Firefox has performance issues and isn't able to deliver the image during the redraw of the animation tick.\n\nI like your solution with the Kinetic.UA.browser === \"mozilla\" for now. I might do a variation on that until I have a better solution.\n. There you go. Unit tests for Kinetic._addName. I just used a string to represent the node because it could be any object for a unit test.\n. I removed the change to Global.test.js and added a test to Container-test.js\n. ",
    "hermanschaaf": "I'm running Chromium on Ubuntu 12.04, and like I said, it seems to only happen when the console is open. Perhaps it (the browser) is catching mousedown events for the console logging and not returning it to the code properly. It might be an issue in that specific version of Chromium, since it works for me on Chrome in OS X too. Strange. I'll have to do some further investigation later.\n. I fiddled with this for about an hour now, and all-in-all, it's pretty bizarre. I haven't read the Kinetic JS code well enough to know whether there is any significant difference between `mouseup` and `mousedown` bindings. Is there? If not, I will conclude that the bug lies with Chromium. \n\nHere's a summary of what I found:\n- `mouseup` always works\n- `mousedown` works as long as the console is not open\n- as soon as I open the console, `mousedown` stops working\n- both `mousedown` and `mouseup` work at all times if I attatch it using jQuery (to a `div` like in KineticJS, or a `canvas`, no matter - I haven't tried a `div` over a canvas yet though...)\n- adding breakpoints to the event listeners under the Sources tab in the chrome console causes the breakpoint to be called on `mouseup`, but not on `mousedown`. This suggests that the `mousedown` event is never fired at all (most likely), or that it never bubbles down far enough to get to KineticJS (also possible, but I specifically disabled all plugins and extensions while testing this), or that there is some difference in the way that KineticJS attaches its listeners between `mouseup` and `mousedown`. \n- There is a really old ticket on the Chromium mailing list that has seen some recent development, and it looks particularly similar to what I'm seeing: http://code.google.com/p/chromium/issues/detail?id=14204 (except that it's the opposite: `mousedown` works, but not `mouseup`). Maybe this is related in some way.\n\nSo except for the point on jQuery working fine, unless there is evidence of `mousedown` doing something particularly different from `mouseup` that might cause the event not to bubble down when the console is open, I'd more likely write this off as a bug in Chromium itself. Comments?\n. I'm running Chromium on Ubuntu 12.04, and like I said, it seems to only happen when the console is open. Perhaps it (the browser) is catching mousedown events for the console logging and not returning it to the code properly. It might be an issue in that specific version of Chromium, since it works for me on Chrome in OS X too. Strange. I'll have to do some further investigation later.\n. I fiddled with this for about an hour now, and all-in-all, it's pretty bizarre. I haven't read the Kinetic JS code well enough to know whether there is any significant difference between `mouseup` and `mousedown` bindings. Is there? If not, I will conclude that the bug lies with Chromium. \n\nHere's a summary of what I found:\n- `mouseup` always works\n- `mousedown` works as long as the console is not open\n- as soon as I open the console, `mousedown` stops working\n- both `mousedown` and `mouseup` work at all times if I attatch it using jQuery (to a `div` like in KineticJS, or a `canvas`, no matter - I haven't tried a `div` over a canvas yet though...)\n- adding breakpoints to the event listeners under the Sources tab in the chrome console causes the breakpoint to be called on `mouseup`, but not on `mousedown`. This suggests that the `mousedown` event is never fired at all (most likely), or that it never bubbles down far enough to get to KineticJS (also possible, but I specifically disabled all plugins and extensions while testing this), or that there is some difference in the way that KineticJS attaches its listeners between `mouseup` and `mousedown`. \n- There is a really old ticket on the Chromium mailing list that has seen some recent development, and it looks particularly similar to what I'm seeing: http://code.google.com/p/chromium/issues/detail?id=14204 (except that it's the opposite: `mousedown` works, but not `mouseup`). Maybe this is related in some way.\n\nSo except for the point on jQuery working fine, unless there is evidence of `mousedown` doing something particularly different from `mouseup` that might cause the event not to bubble down when the console is open, I'd more likely write this off as a bug in Chromium itself. Comments?\n. ",
    "logic-8": "I can confirm what hermanschaaf has found.  I'm having the same problem on chrome 25.0.1364.97 on win-7.  \"mousedown\" only works with the console closed.  (kinetic.js v4.3.3)\n\nEDIT: it seems to only happen with the 'Emulate Touch Events' override active -- disabling the override allows the event to travel normally with the console open.\n. I can confirm what hermanschaaf has found.  I'm having the same problem on chrome 25.0.1364.97 on win-7.  \"mousedown\" only works with the console closed.  (kinetic.js v4.3.3)\n\nEDIT: it seems to only happen with the 'Emulate Touch Events' override active -- disabling the override allows the event to travel normally with the console open.\n. ",
    "c-ice": "exactly\n. Yes its fail when I dragging some shape and call destroy().\n. Sorry I forgot that you are re-adding that circle and its typed in your headline (when I realized it I remove my comment :( ). I can confirm this issue, maybe another solution will be move setting colorKey from Shape constructor to container \"add\" function.\n. Hi someone know some workaround ? I dont find any solution... event.preventDefault() didnt work for me\n. @wighawag  \n\ndoesn't work if you hearing for click event on DOM canvas element (stage.content) in my case I use what u suggest me but little different in way of your last comment. I commented //dd.isDragging = false; in _beforeEndDrag function and instead of add dd.isDragging = false; into DOM click event.\n. exactly\n. Yes its fail when I dragging some shape and call destroy().\n. Sorry I forgot that you are re-adding that circle and its typed in your headline (when I realized it I remove my comment :( ). I can confirm this issue, maybe another solution will be move setting colorKey from Shape constructor to container \"add\" function.\n. Hi someone know some workaround ? I dont find any solution... event.preventDefault() didnt work for me\n. @wighawag  \n\ndoesn't work if you hearing for click event on DOM canvas element (stage.content) in my case I use what u suggest me but little different in way of your last comment. I commented //dd.isDragging = false; in _beforeEndDrag function and instead of add dd.isDragging = false; into DOM click event.\n. ",
    "AlgoTrader": "This happens when I drag something and it is destroyed programmatically by some external event.\nI have a workaround. I call item.setDraggable(false) every time I want to destroy the shape. It makes KJS happy.\nAs a quick and simple fix we can call setDraggable(false) from destroy/remove.\n\nThanks for the exellent lib, the code is clean and readable\n. destroy calls stop for transition internally, but it does not fire finish callback. If I call stop myself, there is no problem, but when KineticJS calls transition stop, I have no way to know about it. calling stop for transition should trigger completion callback I think\n. Got a workaround.\n\n```\nitem.transitonTo(... duration:1.0, callback: function() {...});\n```\n\nis replaced with\n\n```\nitem.transitonTo(... duration:1.0);\nsetTimeout(function() {...}, 1.0)\n```\n\nsetTimeout is much more reliable than transitionTo callback that can either happen or not.\n. This happens when I drag something and it is destroyed programmatically by some external event.\nI have a workaround. I call item.setDraggable(false) every time I want to destroy the shape. It makes KJS happy.\nAs a quick and simple fix we can call setDraggable(false) from destroy/remove.\n\nThanks for the exellent lib, the code is clean and readable\n. destroy calls stop for transition internally, but it does not fire finish callback. If I call stop myself, there is no problem, but when KineticJS calls transition stop, I have no way to know about it. calling stop for transition should trigger completion callback I think\n. Got a workaround.\n\n```\nitem.transitonTo(... duration:1.0, callback: function() {...});\n```\n\nis replaced with\n\n```\nitem.transitonTo(... duration:1.0);\nsetTimeout(function() {...}, 1.0)\n```\n\nsetTimeout is much more reliable than transitionTo callback that can either happen or not.\n. ",
    "lfmunoz4": "Thanks for looking into this. I am using debian linux but I also tried it on windows 8. It runs smoothly for me on chrome, but not firefox. I confirmed the laggyness on two different computers. I changed the canvas size to 2500x2500, you are telling me that still runs smooth using firefox?  I think you must have  8 cores running at 3 Ghz, 12 Gig memory? Can you please confirm that you don't have a super computer, maybe try it on a virtual box with 4 gig mem constraint?\n\nI am designing a diagram tool and some diagrams need a lot of space.\n. Alright thank you\n. thank you\n. Thanks for looking into this. I am using debian linux but I also tried it on windows 8. It runs smoothly for me on chrome, but not firefox. I confirmed the laggyness on two different computers. I changed the canvas size to 2500x2500, you are telling me that still runs smooth using firefox?  I think you must have  8 cores running at 3 Ghz, 12 Gig memory? Can you please confirm that you don't have a super computer, maybe try it on a virtual box with 4 gig mem constraint?\n\nI am designing a diagram tool and some diagrams need a lot of space.\n. Alright thank you\n. thank you\n. ",
    "fenixphp": "http://jsfiddle.net/3cUBr/3/\n. is anybody alive?\n. I was guided by based on reading in the dock.\nhttp://kineticjs.com/docs/symbols/Kinetic.Node.php#toDataURL\n. Now with all objects it operates without callbacks?\n. ok thanks.\n. http://jsfiddle.net/3cUBr/3/\n. is anybody alive?\n. I was guided by based on reading in the dock.\nhttp://kineticjs.com/docs/symbols/Kinetic.Node.php#toDataURL\n. Now with all objects it operates without callbacks?\n. ok thanks.\n. ",
    "RobGraham": "UPDATE: It seems this is only a bug on a shape that has draggable:true. When i comment out draggable:true, two finger tap no longer effects the shape and stays visible. I need to be able to drag shapes though. \n. After countless hours i decided to use an older version of the library because i couldn't reproduce the issue with examples provided on http://www.html5canvastutorials.com. I noticed they were using an older version, and it works now. I'm using 4.2.0 instead of 4.3.1. No shapes disappearing now.\n\nUpdate: 4.3.3 (newest current release) also has fixed the issue.\n. Eric, per the jsFiddle request of my code, would it still be something that's necessary to share if it's not an issue in pre and post 4.3.1 versions?\n. UPDATE: It seems this is only a bug on a shape that has draggable:true. When i comment out draggable:true, two finger tap no longer effects the shape and stays visible. I need to be able to drag shapes though. \n. After countless hours i decided to use an older version of the library because i couldn't reproduce the issue with examples provided on http://www.html5canvastutorials.com. I noticed they were using an older version, and it works now. I'm using 4.2.0 instead of 4.3.1. No shapes disappearing now.\n\nUpdate: 4.3.3 (newest current release) also has fixed the issue.\n. Eric, per the jsFiddle request of my code, would it still be something that's necessary to share if it's not an issue in pre and post 4.3.1 versions?\n. ",
    "sw360cab": "did you have any update about that?\n. did you have any update about that?\n. ",
    "raneri": "No, sorry :(\n. No, sorry :(\n. ",
    "CoryG89": "Here is a screenshot of the [**fill tutorial**](http://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/) when I run it in Chrome on Windows 8. Does everyone else have this same problem? It works fine in Firefox. Does it work in other versions of Windows?\n\n![fill_bug](https://f.cloud.github.com/assets/1627957/251165/0a3824bc-8b5e-11e2-96c0-f34de7f4a3a4.png)\n. OK, so I noticed that the tutorials I have been viewing were using the same KineticJS version as I was which was v4.3.1  \n\nI didn't realize a newer version was out, sorry about this. Someone should really try to update the tutorials KineticJS version as it is not working for Chrome Win8 users.\n. Here is a [**YouTube video**](http://youtu.be/Gd8gArR5RO0) showing what I mean. My clicks are highlighted, but Camtasia Studio does not allow me to highlight when the mouse is being held or not. I added annotations to show when the problem occurs. During normal use this only happens probably about 10% of drag attempts with a mouse, less on a trackpad. I don't think it occurs on a touch screen, but the testing I've done on it with a tablet has been minimal.\n\nDoes anyone else have problems with drag and drop similar to this?\n. It seems you're right. I am using the latest regular Chrome build on Windows 8. I booted up Firefox and game my demo a shot and I was unable to reproduce the problem. I also tried to do it inside my Windows 8 app and the problem does not appear there either.\n. ```\nstage.getContent().addEventListener('mousedown', function(evt) {\n   evt.preventDefault();\n});\n```\n\nNice, I just decided to give this a try on my [**demo**](http://coryg89.github.io/PegGame). I just added that right after I create my stage object and it works out of the box. The drag and drop is now working perfectly in Chrome again. I wonder if the default behavior for Chrome would need to be blocked in any of the other mouse events or such in order to ensure drag and drop will work correctly in all cases. Probably best to just handle it when it crops up rather than just go disabled things without reason.\n. I was using the workaround Eric posted on my [**Peg Game demo**](http://coryg89.github.io/PegGame) (source at [**`CoryG89/PegGame`**](https://github.com/CoryG89/PegGame)).\n\n```\nstage.content.addEventListener('mousedown', function (event) {\n    event.preventDefault();\n});\n```\n\nWhich fixed the issue for me. When I saw his post here that he had released v4.5.3, I downloaded the new patched version and updated the Kinetic version in my app. I removed the workaround and I haven't been able to reproduce the issue anymore. What OS / Browser combo are you using? I cannot reproduce the issue on your fiddle in Windows 8 / Chrome 64-bit. The drag and drop is behaving perfectly for me. If I remove the workaround code above from your fiddle then the issue crops up again.\n\nYour demo is working fine for me. I notice you aren't using the latest patched version v4.5.3, but rather v4.5.2, however if you are still getting the issue with the workaround I'm not sure it will fix it. Do you get the same issue in your particular browser/OS for my patched demo?\n. I have a little open source game http://github.com/CoryG89/PegGame which I made into a Windows Store app and I get the same performance if not better when running in Chrome as I do with my Windows App Store version. Splitting that demo up into multiple layers will increase performance, but I expect the increase will be on the same order for both the Windows and browser version.\n. Here is a screenshot of the [**fill tutorial**](http://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/) when I run it in Chrome on Windows 8. Does everyone else have this same problem? It works fine in Firefox. Does it work in other versions of Windows?\n\n![fill_bug](https://f.cloud.github.com/assets/1627957/251165/0a3824bc-8b5e-11e2-96c0-f34de7f4a3a4.png)\n. OK, so I noticed that the tutorials I have been viewing were using the same KineticJS version as I was which was v4.3.1  \n\nI didn't realize a newer version was out, sorry about this. Someone should really try to update the tutorials KineticJS version as it is not working for Chrome Win8 users.\n. Here is a [**YouTube video**](http://youtu.be/Gd8gArR5RO0) showing what I mean. My clicks are highlighted, but Camtasia Studio does not allow me to highlight when the mouse is being held or not. I added annotations to show when the problem occurs. During normal use this only happens probably about 10% of drag attempts with a mouse, less on a trackpad. I don't think it occurs on a touch screen, but the testing I've done on it with a tablet has been minimal.\n\nDoes anyone else have problems with drag and drop similar to this?\n. It seems you're right. I am using the latest regular Chrome build on Windows 8. I booted up Firefox and game my demo a shot and I was unable to reproduce the problem. I also tried to do it inside my Windows 8 app and the problem does not appear there either.\n. ```\nstage.getContent().addEventListener('mousedown', function(evt) {\n   evt.preventDefault();\n});\n```\n\nNice, I just decided to give this a try on my [**demo**](http://coryg89.github.io/PegGame). I just added that right after I create my stage object and it works out of the box. The drag and drop is now working perfectly in Chrome again. I wonder if the default behavior for Chrome would need to be blocked in any of the other mouse events or such in order to ensure drag and drop will work correctly in all cases. Probably best to just handle it when it crops up rather than just go disabled things without reason.\n. I was using the workaround Eric posted on my [**Peg Game demo**](http://coryg89.github.io/PegGame) (source at [**`CoryG89/PegGame`**](https://github.com/CoryG89/PegGame)).\n\n```\nstage.content.addEventListener('mousedown', function (event) {\n    event.preventDefault();\n});\n```\n\nWhich fixed the issue for me. When I saw his post here that he had released v4.5.3, I downloaded the new patched version and updated the Kinetic version in my app. I removed the workaround and I haven't been able to reproduce the issue anymore. What OS / Browser combo are you using? I cannot reproduce the issue on your fiddle in Windows 8 / Chrome 64-bit. The drag and drop is behaving perfectly for me. If I remove the workaround code above from your fiddle then the issue crops up again.\n\nYour demo is working fine for me. I notice you aren't using the latest patched version v4.5.3, but rather v4.5.2, however if you are still getting the issue with the workaround I'm not sure it will fix it. Do you get the same issue in your particular browser/OS for my patched demo?\n. I have a little open source game http://github.com/CoryG89/PegGame which I made into a Windows Store app and I get the same performance if not better when running in Chrome as I do with my Windows App Store version. Splitting that demo up into multiple layers will increase performance, but I expect the increase will be on the same order for both the Windows and browser version.\n. ",
    "Andrioden": "/sign\n\nThis would be great. Much prettier than doing an forEach and taking it from there.\n. /sign\n\nThis would be great. Much prettier than doing an forEach and taking it from there.\n. ",
    "louisj": "Happy to help you build a great library, thanks  :+1:\n. It seems i'm the one to blame for that, sorry.\nBy 'strange things' do you mean that the wrapping is not exactly done at the same text positions than before ?\nAt first glance, the problem is probably that the 'width' padding is not taken into account anymore. I will check that and propose a fix.\n. ok, thanks for pointing that out.\ni'm working on a fix:  http://dfj3cq698j5hw.cloudfront.net/kinetic-vcurrent.js\n. I think that's because the Kinetic.Text shape does not have a background rect anymore in the latest releases. You will need to add one yourself like in this example http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-text-tutorial/\n. Well, as far as i've tested it, the horizontal padding issue is also resolved with this fix (that was a silly oversight). Do you still experience buggy results ? If that's the case i would be happy to have a deeper look into it.\n. pull request #472 should fix the getTextWidth issue.\nRegarding getTextHeight, it does in fact always return the fontSize. It could easily be fixed to be the actual text height, but as i'm not sure of what was intented in the first place for this method, i kept it that way for now.\n. Happy to help you build a great library, thanks  :+1:\n. It seems i'm the one to blame for that, sorry.\nBy 'strange things' do you mean that the wrapping is not exactly done at the same text positions than before ?\nAt first glance, the problem is probably that the 'width' padding is not taken into account anymore. I will check that and propose a fix.\n. ok, thanks for pointing that out.\ni'm working on a fix:  http://dfj3cq698j5hw.cloudfront.net/kinetic-vcurrent.js\n. I think that's because the Kinetic.Text shape does not have a background rect anymore in the latest releases. You will need to add one yourself like in this example http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-text-tutorial/\n. Well, as far as i've tested it, the horizontal padding issue is also resolved with this fix (that was a silly oversight). Do you still experience buggy results ? If that's the case i would be happy to have a deeper look into it.\n. pull request #472 should fix the getTextWidth issue.\nRegarding getTextHeight, it does in fact always return the fontSize. It could easily be fixed to be the actual text height, but as i'm not sure of what was intented in the first place for this method, i kept it that way for now.\n. ",
    "atis--": "After thinking about this though I can see where the confusion comes from. \"dragstart\" and \"dragmove\" events are generated from \"mousemove\" event which may not be associated with a specific mouse button (depending on underlying event implementation). Still, would be nice to have some clarification on this in the docs. \"dragend\" however is generated from \"mouseup\" and therefore will have a valid .button number in it.\n. Yeah I see now that having a button number associated with dragstart may not actually be necessary or even desirable. However, when I started first using the dragstart event, it was my naive expectation to find a .button number there. The worst part is that the number is actually there but may be different depending on which browser/system is used. It is very plausible that someone else is going to run into the same problem and have this unexpected surprise ruin his or her day.\n\nSo I think that ideally the .button property (if possible) should be removed from the dragstart event object and some information about this issue added to its tutorial/documentation page.\n. There's three things that I notice:\n- The last word always ends up on a line by itself, even if it could have fit inside the previous line. You can alter the example multi-line text to see that this is indeed so.\n- As you point out, looks like there's some issue with the width/padding -- although it's a pretty subtle difference.\n- In the example when switching between 4.4.0 and 4.3.0-beta2, the vertical position of \"Simple Text\" message appears to be changing by a few pixels. But again, that's a pretty subtle effect.\n\nOf course when it comes to the subtle width and vertical position issues, without knowing more about it, there's no guarantee that the past behavior was the correct one..\n. I agree, the mapping to an unrelated shape may be untrue. From my experiments the color values did change though, but the alpha value is always less than 1 in that case so the p[3]==255 condition takes care of that.\n\nCustom hit regions would still have blurry edges, so that doesn't make much difference.\n\nI think it became a problem for me because I have implemented a zoom feature in my application. The zoom is done by scaling the containing layer. When you scale things down (make 'em smaller), suddenly the anti-aliasing starts playing a bigger role since there's a lot more of it going on, and the likelihood of hitting an anti-aliased pixel increases.\n\nAlso this is only ever a problem when two shapes overlap (and both are listening for mouse events).\n. I can confirm this issue on Windows 7 64-bit.\n\nTo add some info: it is not that the stroke isn't drawn, but\n`context.save();`\n`context.setTransform(1, 0, 0, 1, 0, 0);`\n\nsequence that is used to achieve this effect, seems to screw up the intended transform. The stroke is there but is rendered offscreen. If the shape happens to be near the origin, you can get a glimpse of the stroke. Here's a version of your fiddle that demonstrates it:\n  http://jsfiddle.net/m2mzk/2/\n. By the way you can also observe the missing stroke in this Canvas Tutorial page:\n  http://www.html5canvastutorials.com/kineticjs/html5-canvas-listen-or-dont-listen-to-events-with-kineticjs/\n. This looks like the same old hitCanvas antialiasing problem. See here:\n  https://github.com/ericdrowell/KineticJS/issues/198\n  https://github.com/ericdrowell/KineticJS/pull/545\n  https://github.com/ericdrowell/KineticJS/issues/382\n\nThere's a commit by Eric that supposedly fixes this\n  https://github.com/ericdrowell/KineticJS/commit/aa78d632dbc89ace518890946dfc3947bcd74d89\n\nbut for some reason the problem still exists!\n. This looks like the same old hitCanvas antialiasing problem. See here:\n  https://github.com/ericdrowell/KineticJS/issues/198\n  https://github.com/ericdrowell/KineticJS/pull/545\n  https://github.com/ericdrowell/KineticJS/issues/382\n\nThere's a commit by Eric that supposedly fixes this\n  https://github.com/ericdrowell/KineticJS/commit/aa78d632dbc89ace518890946dfc3947bcd74d89\n\nbut for some reason the problem still exists!\n. There's an option to ignore all shape events {listening: false}.\n\nBut if you have the time, you could investigate the behavior of Layer.getIntersection() method -- maybe there's a way to make it work correctly (at least in your case).\n. You could also try putting the line grid on a separate layer. That way if a hit is not registered on it, then it could still hit something on the bottom layer(s).\n. After thinking about this though I can see where the confusion comes from. \"dragstart\" and \"dragmove\" events are generated from \"mousemove\" event which may not be associated with a specific mouse button (depending on underlying event implementation). Still, would be nice to have some clarification on this in the docs. \"dragend\" however is generated from \"mouseup\" and therefore will have a valid .button number in it.\n. Yeah I see now that having a button number associated with dragstart may not actually be necessary or even desirable. However, when I started first using the dragstart event, it was my naive expectation to find a .button number there. The worst part is that the number is actually there but may be different depending on which browser/system is used. It is very plausible that someone else is going to run into the same problem and have this unexpected surprise ruin his or her day.\n\nSo I think that ideally the .button property (if possible) should be removed from the dragstart event object and some information about this issue added to its tutorial/documentation page.\n. There's three things that I notice:\n- The last word always ends up on a line by itself, even if it could have fit inside the previous line. You can alter the example multi-line text to see that this is indeed so.\n- As you point out, looks like there's some issue with the width/padding -- although it's a pretty subtle difference.\n- In the example when switching between 4.4.0 and 4.3.0-beta2, the vertical position of \"Simple Text\" message appears to be changing by a few pixels. But again, that's a pretty subtle effect.\n\nOf course when it comes to the subtle width and vertical position issues, without knowing more about it, there's no guarantee that the past behavior was the correct one..\n. I agree, the mapping to an unrelated shape may be untrue. From my experiments the color values did change though, but the alpha value is always less than 1 in that case so the p[3]==255 condition takes care of that.\n\nCustom hit regions would still have blurry edges, so that doesn't make much difference.\n\nI think it became a problem for me because I have implemented a zoom feature in my application. The zoom is done by scaling the containing layer. When you scale things down (make 'em smaller), suddenly the anti-aliasing starts playing a bigger role since there's a lot more of it going on, and the likelihood of hitting an anti-aliased pixel increases.\n\nAlso this is only ever a problem when two shapes overlap (and both are listening for mouse events).\n. I can confirm this issue on Windows 7 64-bit.\n\nTo add some info: it is not that the stroke isn't drawn, but\n`context.save();`\n`context.setTransform(1, 0, 0, 1, 0, 0);`\n\nsequence that is used to achieve this effect, seems to screw up the intended transform. The stroke is there but is rendered offscreen. If the shape happens to be near the origin, you can get a glimpse of the stroke. Here's a version of your fiddle that demonstrates it:\n  http://jsfiddle.net/m2mzk/2/\n. By the way you can also observe the missing stroke in this Canvas Tutorial page:\n  http://www.html5canvastutorials.com/kineticjs/html5-canvas-listen-or-dont-listen-to-events-with-kineticjs/\n. This looks like the same old hitCanvas antialiasing problem. See here:\n  https://github.com/ericdrowell/KineticJS/issues/198\n  https://github.com/ericdrowell/KineticJS/pull/545\n  https://github.com/ericdrowell/KineticJS/issues/382\n\nThere's a commit by Eric that supposedly fixes this\n  https://github.com/ericdrowell/KineticJS/commit/aa78d632dbc89ace518890946dfc3947bcd74d89\n\nbut for some reason the problem still exists!\n. This looks like the same old hitCanvas antialiasing problem. See here:\n  https://github.com/ericdrowell/KineticJS/issues/198\n  https://github.com/ericdrowell/KineticJS/pull/545\n  https://github.com/ericdrowell/KineticJS/issues/382\n\nThere's a commit by Eric that supposedly fixes this\n  https://github.com/ericdrowell/KineticJS/commit/aa78d632dbc89ace518890946dfc3947bcd74d89\n\nbut for some reason the problem still exists!\n. There's an option to ignore all shape events {listening: false}.\n\nBut if you have the time, you could investigate the behavior of Layer.getIntersection() method -- maybe there's a way to make it work correctly (at least in your case).\n. You could also try putting the line grid on a separate layer. That way if a hit is not registered on it, then it could still hit something on the bottom layer(s).\n. ",
    "Rulexec": "Try this (insert somewhere before any canvas usage and after FlashCanvas loading):\n\n``` javascript\n(function(){\n    var createElement = document.createElement;\n    document.createElement = function(name) {\n        var el = createElement.apply(document, arguments);\n        if (name === 'canvas' && typeof FlashCanvas !== 'undefined') {\n            FlashCanvas.initElement(el);\n        }\n        return el;\n    };\n})();\n```\n. Just before `new Kinetic.Stage`, I think.\n. Sorry, I'm can't help you, because didn't have IE and have no ways to test solutions.\n\nAnd also\u2026 EalselJS is not KineticJS, right? :)\n. Source code looks like callback property does not used. And just `window.open(layer.toDataURL());` [works well](http://jsfiddle.net/bAeEA/4/).\n. As I can understand, for nodes and layers .toDataURL works without callbacks, and for Stage with callback.\n. Try this (insert somewhere before any canvas usage and after FlashCanvas loading):\n\n``` javascript\n(function(){\n    var createElement = document.createElement;\n    document.createElement = function(name) {\n        var el = createElement.apply(document, arguments);\n        if (name === 'canvas' && typeof FlashCanvas !== 'undefined') {\n            FlashCanvas.initElement(el);\n        }\n        return el;\n    };\n})();\n```\n. Just before `new Kinetic.Stage`, I think.\n. Sorry, I'm can't help you, because didn't have IE and have no ways to test solutions.\n\nAnd also\u2026 EalselJS is not KineticJS, right? :)\n. Source code looks like callback property does not used. And just `window.open(layer.toDataURL());` [works well](http://jsfiddle.net/bAeEA/4/).\n. As I can understand, for nodes and layers .toDataURL works without callbacks, and for Stage with callback.\n. ",
    "francisstalin": "could u pls tell me where i have to place this code inside kineticjs or inside my script ah\n1-flashcanvas.js\n2-kineticjs.js\n3-myscript.js\ni have insert library like this here myscript is my canvas code \n. SCRIPT5007: Unable to get value of the property 'contains': object is null or undefined \nflashcanvas.js, line 26 character 44\ni got this error in ie7\n. is it possible like this\nvar canvas = document.getElementById('canvas');\nvar stage = new createjs.Stage(canvas);\n. in ealseljs they pass the canvas element into stage like that is it possible in kineticjs. if kineticjs has one more constructor which accept canvas as argument then that is useful for me\n. do u have any idea about ie 7 & 8 support\n\nexcanvas also not working in kineticjs,, pls make ur kineticjs work with ie older version because most of the users still using that old version of ie\n\npls let me know if anyother  library (like excanvas) which make ur kineticjs work with ie olderversion\n. could u pls tell me where i have to place this code inside kineticjs or inside my script ah\n1-flashcanvas.js\n2-kineticjs.js\n3-myscript.js\ni have insert library like this here myscript is my canvas code \n. SCRIPT5007: Unable to get value of the property 'contains': object is null or undefined \nflashcanvas.js, line 26 character 44\ni got this error in ie7\n. is it possible like this\nvar canvas = document.getElementById('canvas');\nvar stage = new createjs.Stage(canvas);\n. in ealseljs they pass the canvas element into stage like that is it possible in kineticjs. if kineticjs has one more constructor which accept canvas as argument then that is useful for me\n. do u have any idea about ie 7 & 8 support\n\nexcanvas also not working in kineticjs,, pls make ur kineticjs work with ie older version because most of the users still using that old version of ie\n\npls let me know if anyother  library (like excanvas) which make ur kineticjs work with ie olderversion\n. ",
    "xperali": "I tried to use Kinetic Js library in my project, but after doing some tests I found that it's not compatible with ie8 and ie7, and even ie9 (not worked for my complex test : mousover, click...), I have to test Raphael now, it's sad :(\n. I tried to use Kinetic Js library in my project, but after doing some tests I found that it's not compatible with ie8 and ie7, and even ie9 (not worked for my complex test : mousover, click...), I have to test Raphael now, it's sad :(\n. ",
    "drwestco": "Yes. In my case, I'm using an animation to pulse the drawing properties of some shapes in response to an event. I figured I'd create the event once, call start() when the event occurs, and call stop() within the frame callback once the desired duration is reached.\n. Yes. In my case, I'm using an animation to pulse the drawing properties of some shapes in response to an event. I figured I'd create the event once, call start() when the event occurs, and call stop() within the frame callback once the desired duration is reached.\n. ",
    "dave-ledsign": "A reset would be very helpful for me - tweens won't do. I have had to implement my own timer count, which is not a big deal, but it seems like a work-around when a reset would be so much simpler and clearer.\n. Seems to work in FireFox and IE10.\n. I re-installed Chrome and it now appears to be working. I guess this can be marked as not-a-problem.\n. I am using it as a critical part of a large project. Everything is working but I am nervous and am thinking about a rewrite of the critical part unless someone else is willing to pick up the ball.  I don't want to write any more code for kineticjs just in case it breaks with future browser versions.\n. I hadn't heard of PixiJS before @confile, so I can't comment on its quality, but a quick look suggests it will have the future support I am looking for. WebGL is an example of the advancement in browsers that I need to keep up with, and I am guessing kineticjs is already behind and probably can't catch up now.\n. Text in all kinds of fonts is the main thing I need. If Pixi is not great with text then that would be a deciding factor. I would like to help with Kinetic support if I can, at least until I know more about Pixi and/or other frameworks.  I will be running my own tests and would like to hear as much as possible about anyone else trying out other frameworks.\n. If I could add something to the wish list for future work in Kinetic, it would be more documentation.  Not just method names and parameters, but what methods actually do below the surface, what are best practises and why, and as many \"Hello World + one feature at a time\" examples and tests as possible.  I should stress that everything is working for me at the moment (thx Eric), it is the long-term for Kinetic and my project that I am thinking about.\n. Bitmap text would not work for me. I need vectors so users can play in real-time with fill color, transparency and gradients, stroke width and color, shadows, etc. I am fine with converting fonts to vectors, but after that I need what Kinetic is currently doing for me.  Can anyone comment on PixiJS vectors, or is it 100% raster at this time?\n. A reset would be very helpful for me - tweens won't do. I have had to implement my own timer count, which is not a big deal, but it seems like a work-around when a reset would be so much simpler and clearer.\n. Seems to work in FireFox and IE10.\n. I re-installed Chrome and it now appears to be working. I guess this can be marked as not-a-problem.\n. I am using it as a critical part of a large project. Everything is working but I am nervous and am thinking about a rewrite of the critical part unless someone else is willing to pick up the ball.  I don't want to write any more code for kineticjs just in case it breaks with future browser versions.\n. I hadn't heard of PixiJS before @confile, so I can't comment on its quality, but a quick look suggests it will have the future support I am looking for. WebGL is an example of the advancement in browsers that I need to keep up with, and I am guessing kineticjs is already behind and probably can't catch up now.\n. Text in all kinds of fonts is the main thing I need. If Pixi is not great with text then that would be a deciding factor. I would like to help with Kinetic support if I can, at least until I know more about Pixi and/or other frameworks.  I will be running my own tests and would like to hear as much as possible about anyone else trying out other frameworks.\n. If I could add something to the wish list for future work in Kinetic, it would be more documentation.  Not just method names and parameters, but what methods actually do below the surface, what are best practises and why, and as many \"Hello World + one feature at a time\" examples and tests as possible.  I should stress that everything is working for me at the moment (thx Eric), it is the long-term for Kinetic and my project that I am thinking about.\n. Bitmap text would not work for me. I need vectors so users can play in real-time with fill color, transparency and gradients, stroke width and color, shadows, etc. I am fine with converting fonts to vectors, but after that I need what Kinetic is currently doing for me.  Can anyone comment on PixiJS vectors, or is it 100% raster at this time?\n. ",
    "masashiGMS": "ericdrowell, you should fix the document on v4.7.4 as soon as possible.\nI was caught this trap and I spent time couple of hours!\n. ericdrowell, you should fix the document on v4.7.4 as soon as possible.\nI was caught this trap and I spent time couple of hours!\n. ",
    "thulka": "I see! \"source\" = \"non-minified js\".Ok thats fine.I was so sure \"source\" leads to github hat I did not even try the link.\n. np.\n\ntried all big canvas libraries and had troubles to find the non minified version again and again, for easel i think there is not even one. Anyway, you might consider a hint on http://kineticjs.com/ that \"download\" = kinetic.min.js and \"source\" = kinetic.js. Or, simply place a link to js/min.js in the readme at github.\n. I see! \"source\" = \"non-minified js\".Ok thats fine.I was so sure \"source\" leads to github hat I did not even try the link.\n. np.\n\ntried all big canvas libraries and had troubles to find the non minified version again and again, for easel i think there is not even one. Anyway, you might consider a hint on http://kineticjs.com/ that \"download\" = kinetic.min.js and \"source\" = kinetic.js. Or, simply place a link to js/min.js in the readme at github.\n. ",
    "carlschooff": "Thanks for the quick follow-up\n\nMac OSX 10.8.2\n. Thanks for the quick follow-up\n\nMac OSX 10.8.2\n. ",
    "cfiorini": "i have the same problem, chrome 26.0.1410.43 was released 2 days and i updated this morning and nothing is working with the fill background, i'm using kineticjs 4.0.4 \n\ngoogle chrome release from blog\n\nhttp://googlechromereleases.blogspot.it/2013/03/stable-channel-update_26.html\n. today i spent less then an half day porting my app from kineticjs 4.0.4 to kineticjs 4.4.0 and now everything works fine\n. i have the same problem, chrome 26.0.1410.43 was released 2 days and i updated this morning and nothing is working with the fill background, i'm using kineticjs 4.0.4 \n\ngoogle chrome release from blog\n\nhttp://googlechromereleases.blogspot.it/2013/03/stable-channel-update_26.html\n. today i spent less then an half day porting my app from kineticjs 4.0.4 to kineticjs 4.4.0 and now everything works fine\n. ",
    "3tcubed": "I can confirm the same from Windows 7; Fill/Opacity not working with Chrome: Version 26.0.1410.43 m; working fine in FF & IE; v25 was fine.  \n\n**\\* I have now upgraded to version 4.4.0 of KineticJS and Fill is working fine again - Well done Eric!!! \n**\\* and thank you to cfiorini for pointing out the new version\n. Appreciate your quick fix; BTW could have made the release notes more\nobvious about the evt.shape -> evt.targetNode change; only when I looked at\nchanged Lab examples did I catch the change; then after re-reading the\nrelease notes I caught significance of the change.  Anyway keep up the\ngreat work; really appreciate your brilliant efforts.\n\nOn Wed, Apr 3, 2013 at 10:01 AM, Eric Rowell notifications@github.comwrote:\n\n> This was a problem with Google Chrome. the latest update broke versions of\n> KineticJS for 4.3.1 and below. The best way to fix the issue is to upgrade\n> to a recent version of KineticJS. Sorry for the headache :(\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/334#issuecomment-15849387\n> .\n\n## \n\n---\n\nTim Regan\nTcubed - Owner\nPhone: (602) 992-2570\n. No problems, understand forward progress.\nJust identifying necessary changes, versus stumbling upon features not\nworking after upgrading, would have been better for deprecated shape (or\nany obsolete feature) to throw an error versus just being undefined (if at\nall possible).\n\nAgain keep up the outstanding work.\n\nOn Thu, Apr 4, 2013 at 10:33 AM, Eric Rowell notifications@github.comwrote:\n\n> @3tcubed https://github.com/3tcubed truly sorry for that. now that the\n> event target can be any node type, the name of the property needed to\n> change. KineticJS currently supports no backwards compatibility since it's\n> still evolving. I can say, at least, that these types of API changes will\n> become less and less frequent.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/334#issuecomment-15911799\n> .\n\n## \n\n---\n\nTim Regan\nTcubed - Owner\nPhone: (602) 992-2570\n. I can confirm the same from Windows 7; Fill/Opacity not working with Chrome: Version 26.0.1410.43 m; working fine in FF & IE; v25 was fine.  \n\n**\\* I have now upgraded to version 4.4.0 of KineticJS and Fill is working fine again - Well done Eric!!! \n**\\* and thank you to cfiorini for pointing out the new version\n. Appreciate your quick fix; BTW could have made the release notes more\nobvious about the evt.shape -> evt.targetNode change; only when I looked at\nchanged Lab examples did I catch the change; then after re-reading the\nrelease notes I caught significance of the change.  Anyway keep up the\ngreat work; really appreciate your brilliant efforts.\n\nOn Wed, Apr 3, 2013 at 10:01 AM, Eric Rowell notifications@github.comwrote:\n\n> This was a problem with Google Chrome. the latest update broke versions of\n> KineticJS for 4.3.1 and below. The best way to fix the issue is to upgrade\n> to a recent version of KineticJS. Sorry for the headache :(\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/334#issuecomment-15849387\n> .\n\n## \n\n---\n\nTim Regan\nTcubed - Owner\nPhone: (602) 992-2570\n. No problems, understand forward progress.\nJust identifying necessary changes, versus stumbling upon features not\nworking after upgrading, would have been better for deprecated shape (or\nany obsolete feature) to throw an error versus just being undefined (if at\nall possible).\n\nAgain keep up the outstanding work.\n\nOn Thu, Apr 4, 2013 at 10:33 AM, Eric Rowell notifications@github.comwrote:\n\n> @3tcubed https://github.com/3tcubed truly sorry for that. now that the\n> event target can be any node type, the name of the property needed to\n> change. KineticJS currently supports no backwards compatibility since it's\n> still evolving. I can say, at least, that these types of API changes will\n> become less and less frequent.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/334#issuecomment-15911799\n> .\n\n## \n\n---\n\nTim Regan\nTcubed - Owner\nPhone: (602) 992-2570\n. ",
    "wighawag": "Cool, just tested and it works :)\n\nMy workaround had its own problem when releasing mouse outside the stage\n\nThanks\n. Hi Hackencrash\n\nThe original source (look in github) are spread into separate files. \nThis is line 482 of Stage.js\nBut as you said it is line 5176 in the generated js file\n\nHope that make sense\n. OK\n\nI understand stage behavior and I think this is a behavior that makes sense except maybe the word \"draggable\"\n\nBut regarding layer, since like stage it also act as a container only, I expected it behave similarly than stage regarding the draggable property.\n\nThe problem can be stated as follow:\nThe main reason someone want to pan the stage is when you have a set of objects that span more space than the viewport (stage width and height). As soon as you want to add a static layer on top of it you cannot anymore use (stage {draggable : true}) because this would pan this layer as well. Making layer panable individually would work though (but maybe this will add other issues?).\n\nmaybe we could add an option. or have another property name. If you can give me some pointer I could have a look at implementing it myself and make a pull request\n\nFor now, the one workarround I can see for achieving what I want is to make the UI coordinate follow the stage coordinate by applying an inverse transition but I was hoping there were another more elegant solution\n\nThanks\n. Hi Eric\n\nThanks for your quick replies\n\nYour solution using dom handler seems indeed possible, \n\nbut then in the dom event handler we have no information regarding the event in term of Kinetic state. For example I might want to do something different whether the click is on a node or not \nWithout Kinetic providing an API for that I would need to do it myself, maybe by calling Kinetic specific function (getIntersection)\n\n``` javascript\ncontainer.addEventListener(\"click\", function(e){\n//how do I know whether it was click on empty space or a node ?\nobj = stage.getIntersection(mousePosition);\n//...\n})\n```\n\non the other with kinetic support, i would be able to do in a much cleaner way without the need to know Kinetic internals:\n\n``` javascript\nstage.on(\"click\", function(e){\nif(e.targetNode == stage) {//or null ?\n///create an shape on the pointer position\n}else{\n///delete the shape (e.targetNode) \n}\n})\n```\n\nwhat do you think?\n. I decided to have a go at implementing it my self, see the pull request : https://github.com/ericdrowell/KineticJS/pull/364\n. Hi Eric\n\nI took a look at the source code while debugging and the issue is that _endDrag\\* functions are called before the mouseup event so when the execution reach mouseup, Kinetic js is not anymore in state of dragging. Thus the click event is fired\n\nthe following condition is thus true \nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Stage.js\nline 445-449:\n\n``` javascript\n                    /*\n                     * if dragging and dropping, or if click doesn't map to \n                     * the correct shape, don't fire click or dbl click event\n                     */\n                    if(!go.isDragging() && shape._id === this.clickStartShape._id) {\n```\n\nI also found this code with the relevant comment:\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/DragAndDrop.js \nline 224\n\n``` javascript\n    // listen for capturing phase so that the _endDrag* methods are\n    // called before the stage mouseup event is triggered in order\n    // to render the hit graph just in time to pick up the event\n    var html = document.getElementsByTagName('html')[0];\n    html.addEventListener('mouseup', Kinetic.DD._endDragBefore, true);\n    html.addEventListener('touchend', Kinetic.DD._endDragBefore, true);\n\n    html.addEventListener('mouseup', Kinetic.DD._endDragAfter, false);\n    html.addEventListener('touchend', Kinetic.DD._endDragAfter, false);\n```\n\nSo I am not sure what to do here :)\n\nHope that it helps\n. @c-ice\n\nAs a workaround you can use a stageDragging variable that you set and unset on dragstart and dragend events\n\nsee http://jsfiddle.net/um4a2/\n. @ericdrowell \n\nI did not tested and read the code correctly :p\n_endDragBefore is called before\nbut _endDragAfter is called after\n\nmake sense :)\n\nso this means I just had to move \n\n``` javascript\ndd.isDragging = false;  \n```\n\n to the _endDragAfter function and it seems to have fixed it\n. HI Eric\n\nDid you read my comment on https://github.com/ericdrowell/KineticJS/issues/356 ?\n\nIn other words : how in Kinetic can I listen for events that happen on stage but not on any node ?\n\nThere are some valid use case for this. One of them is dragging and this is why in your current code you need to have special if statement to deal with dragging the stage. \nOn the other hand with stage events as you can see in my pull request there is no more need for special stage dragging code.\n\nAnother use case is when you want to do something when you click on empty space (add a new circle for example) and something different when you click on a particular node (select it for example)\n\nOf course this can be achieved using DOM events and some special code to know whether the pointer is not above any node but would not be nicer if this was part of Kinetic (look at the code example in the comment  on https://github.com/ericdrowell/KineticJS/issues/356)?\n\nI understand if you want to keep as it is, I just want to make sure you understand the possible use case :)\n\nThanks for your work\n. that would work, but this is not as nice as with my modif. \nI might just keep my fork :)\n\nthanks anyway\n. Cool, just tested and it works :)\n\nMy workaround had its own problem when releasing mouse outside the stage\n\nThanks\n. Hi Hackencrash\n\nThe original source (look in github) are spread into separate files. \nThis is line 482 of Stage.js\nBut as you said it is line 5176 in the generated js file\n\nHope that make sense\n. OK\n\nI understand stage behavior and I think this is a behavior that makes sense except maybe the word \"draggable\"\n\nBut regarding layer, since like stage it also act as a container only, I expected it behave similarly than stage regarding the draggable property.\n\nThe problem can be stated as follow:\nThe main reason someone want to pan the stage is when you have a set of objects that span more space than the viewport (stage width and height). As soon as you want to add a static layer on top of it you cannot anymore use (stage {draggable : true}) because this would pan this layer as well. Making layer panable individually would work though (but maybe this will add other issues?).\n\nmaybe we could add an option. or have another property name. If you can give me some pointer I could have a look at implementing it myself and make a pull request\n\nFor now, the one workarround I can see for achieving what I want is to make the UI coordinate follow the stage coordinate by applying an inverse transition but I was hoping there were another more elegant solution\n\nThanks\n. Hi Eric\n\nThanks for your quick replies\n\nYour solution using dom handler seems indeed possible, \n\nbut then in the dom event handler we have no information regarding the event in term of Kinetic state. For example I might want to do something different whether the click is on a node or not \nWithout Kinetic providing an API for that I would need to do it myself, maybe by calling Kinetic specific function (getIntersection)\n\n``` javascript\ncontainer.addEventListener(\"click\", function(e){\n//how do I know whether it was click on empty space or a node ?\nobj = stage.getIntersection(mousePosition);\n//...\n})\n```\n\non the other with kinetic support, i would be able to do in a much cleaner way without the need to know Kinetic internals:\n\n``` javascript\nstage.on(\"click\", function(e){\nif(e.targetNode == stage) {//or null ?\n///create an shape on the pointer position\n}else{\n///delete the shape (e.targetNode) \n}\n})\n```\n\nwhat do you think?\n. I decided to have a go at implementing it my self, see the pull request : https://github.com/ericdrowell/KineticJS/pull/364\n. Hi Eric\n\nI took a look at the source code while debugging and the issue is that _endDrag\\* functions are called before the mouseup event so when the execution reach mouseup, Kinetic js is not anymore in state of dragging. Thus the click event is fired\n\nthe following condition is thus true \nhttps://github.com/ericdrowell/KineticJS/blob/master/src/Stage.js\nline 445-449:\n\n``` javascript\n                    /*\n                     * if dragging and dropping, or if click doesn't map to \n                     * the correct shape, don't fire click or dbl click event\n                     */\n                    if(!go.isDragging() && shape._id === this.clickStartShape._id) {\n```\n\nI also found this code with the relevant comment:\nhttps://github.com/ericdrowell/KineticJS/blob/master/src/DragAndDrop.js \nline 224\n\n``` javascript\n    // listen for capturing phase so that the _endDrag* methods are\n    // called before the stage mouseup event is triggered in order\n    // to render the hit graph just in time to pick up the event\n    var html = document.getElementsByTagName('html')[0];\n    html.addEventListener('mouseup', Kinetic.DD._endDragBefore, true);\n    html.addEventListener('touchend', Kinetic.DD._endDragBefore, true);\n\n    html.addEventListener('mouseup', Kinetic.DD._endDragAfter, false);\n    html.addEventListener('touchend', Kinetic.DD._endDragAfter, false);\n```\n\nSo I am not sure what to do here :)\n\nHope that it helps\n. @c-ice\n\nAs a workaround you can use a stageDragging variable that you set and unset on dragstart and dragend events\n\nsee http://jsfiddle.net/um4a2/\n. @ericdrowell \n\nI did not tested and read the code correctly :p\n_endDragBefore is called before\nbut _endDragAfter is called after\n\nmake sense :)\n\nso this means I just had to move \n\n``` javascript\ndd.isDragging = false;  \n```\n\n to the _endDragAfter function and it seems to have fixed it\n. HI Eric\n\nDid you read my comment on https://github.com/ericdrowell/KineticJS/issues/356 ?\n\nIn other words : how in Kinetic can I listen for events that happen on stage but not on any node ?\n\nThere are some valid use case for this. One of them is dragging and this is why in your current code you need to have special if statement to deal with dragging the stage. \nOn the other hand with stage events as you can see in my pull request there is no more need for special stage dragging code.\n\nAnother use case is when you want to do something when you click on empty space (add a new circle for example) and something different when you click on a particular node (select it for example)\n\nOf course this can be achieved using DOM events and some special code to know whether the pointer is not above any node but would not be nicer if this was part of Kinetic (look at the code example in the comment  on https://github.com/ericdrowell/KineticJS/issues/356)?\n\nI understand if you want to keep as it is, I just want to make sure you understand the possible use case :)\n\nThanks for your work\n. that would work, but this is not as nice as with my modif. \nI might just keep my fork :)\n\nthanks anyway\n. ",
    "Hackencrash": "Thank you - fixed my problem too by replacing this if statement, although I found it to be on line 5176 of kinetic-v4.4.0.js (not line 482)\n. I'm seeing multiple issues with this version of Chrome on ICS 4.0.3 with many of the tutorials not working, touch events not working and lines not rendering at all.\n. Just to confirm, I've gone back to Chrome v26.0.1410.58 by installing the APK file and can confirm that this version is OK with v4.5.4 (not tested v4.5.2).  I also tried the beta version of Chrome v28.0.1500.45 and this fails in the same way as v27 on Android\n. Looks like it's Chrome issue 231082 - https://code.google.com/p/chromium/issues/detail?id=231082\n\nThis is an issue with Android devices using the Mali 400 GPU chip (which my device is).  The workaround they give is to browse to chrome://flags and disable accelerated 2D canvas.  I did this and kineticjs worked for Chrome 28 beta (very slowly), so I'm assuming this fix will also work with Android Chrome v27.\n\nThey state the Mali 400 GPU is in many Samsung products like the Tab and Siii (although my device is 97FC).  The effect I see without changing this flag is no lines or polygons are drawn at all - so it's quite serious!\n\nNot sure how you could programatically detect the GPU type and turn-off hardware acceleration in kineticjs though!\n. It's in the _resizeDOM: function().  You've declared the other variables in scope but not 'layer', meaning that every time you resize the stage (e.g. when iPad orientation is changed from portrait to landscape to make the contents fit properly), the value of layer returned back to the app using js is always the last layer created (because of the for loop on line 6400 in kjs 4.5.4)\n. Fabulous, thank you\n. I get a JS error \"Object doesn't support property or method '_applyShadow'\" in IE & Chrome Win 8.1 in v4.7.4.js at line 5778\n\ncontext.applyShadow(this);\n. Confirmed this working OK with Chrome Beta 32.0.1700.55 on Windows 8.1 64-bit but broken on current v31 release as all my shape outlines are all over the place with this version!  No issues with IE11, FF or Safari on iOS7.04.  Chrome used to be the only browser that consistently worked with KJS, now it's the worst by far!\n. Thank you - fixed my problem too by replacing this if statement, although I found it to be on line 5176 of kinetic-v4.4.0.js (not line 482)\n. I'm seeing multiple issues with this version of Chrome on ICS 4.0.3 with many of the tutorials not working, touch events not working and lines not rendering at all.\n. Just to confirm, I've gone back to Chrome v26.0.1410.58 by installing the APK file and can confirm that this version is OK with v4.5.4 (not tested v4.5.2).  I also tried the beta version of Chrome v28.0.1500.45 and this fails in the same way as v27 on Android\n. Looks like it's Chrome issue 231082 - https://code.google.com/p/chromium/issues/detail?id=231082\n\nThis is an issue with Android devices using the Mali 400 GPU chip (which my device is).  The workaround they give is to browse to chrome://flags and disable accelerated 2D canvas.  I did this and kineticjs worked for Chrome 28 beta (very slowly), so I'm assuming this fix will also work with Android Chrome v27.\n\nThey state the Mali 400 GPU is in many Samsung products like the Tab and Siii (although my device is 97FC).  The effect I see without changing this flag is no lines or polygons are drawn at all - so it's quite serious!\n\nNot sure how you could programatically detect the GPU type and turn-off hardware acceleration in kineticjs though!\n. It's in the _resizeDOM: function().  You've declared the other variables in scope but not 'layer', meaning that every time you resize the stage (e.g. when iPad orientation is changed from portrait to landscape to make the contents fit properly), the value of layer returned back to the app using js is always the last layer created (because of the for loop on line 6400 in kjs 4.5.4)\n. Fabulous, thank you\n. I get a JS error \"Object doesn't support property or method '_applyShadow'\" in IE & Chrome Win 8.1 in v4.7.4.js at line 5778\n\ncontext.applyShadow(this);\n. Confirmed this working OK with Chrome Beta 32.0.1700.55 on Windows 8.1 64-bit but broken on current v31 release as all my shape outlines are all over the place with this version!  No issues with IE11, FF or Safari on iOS7.04.  Chrome used to be the only browser that consistently worked with KJS, now it's the worst by far!\n. ",
    "bensampaio": "Hey guys! Do you already have any fix for this? If not when do you think it would be available? I tried the fix you provided, it solved the problem but gave me other problems on things that were working correctly before.\n. Hey guys! Do you already have any fix for this? If not when do you think it would be available? I tried the fix you provided, it solved the problem but gave me other problems on things that were working correctly before.\n. ",
    "hsalokor": "Thanks!\n. Thanks!\n. ",
    "ludviglindblom": "Are you running Chrome 26?\nThere seems to be an issue with fill (colors as well as gradients) in that version.\n\nIf you go to http://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/ do you see any color beside white inside the polygons? If not, try another browser.\n. Are you running Chrome 26?\nThere seems to be an issue with fill (colors as well as gradients) in that version.\n\nIf you go to http://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/ do you see any color beside white inside the polygons? If not, try another browser.\n. ",
    "ing4prg": "what you wrote is correct, but it is not my case. i want on mouse over polygon to display a tooltip with a text inside and to move it while mouse is moving over that polygon. i can display tooltip, set text inside, but unable to fill it with a color, and set borders of it. background is transparent and no border.\n\ni saw this example http://www.html5canvastutorials.com/labs/html5-canvas-10000-shape-stress-test-with-kineticjs/, but looks like with the last version of your library tooltip doesn't work.\n. what you wrote is correct, but it is not my case. i want on mouse over polygon to display a tooltip with a text inside and to move it while mouse is moving over that polygon. i can display tooltip, set text inside, but unable to fill it with a color, and set borders of it. background is transparent and no border.\n\ni saw this example http://www.html5canvastutorials.com/labs/html5-canvas-10000-shape-stress-test-with-kineticjs/, but looks like with the last version of your library tooltip doesn't work.\n. ",
    "ruionwriting": "@ericdrowell it's a shame setAbsoluteZIndex() is not available. Not saying that the current implementation makes no sense, but...\n\nI've a scenario where I have draggable groups of shapes that contains one shape (a connector line) that I want to keep on the exact same level. The reason is simple I don't want to have lines on the top of my custom labels.\n\nMy current solution was to add that one shape to a separate layer an than I move it on the group 'dragmove' event.\n\nAny ideas or suggestions for a better or more elegant solution?\n. Hi @ericdrowell! I've finished my implementation based on the approach we have discussed. Must say that this way of managing layers and z-index is what makes more sense in order to keep things of getting to messy to manage.\n\nI've decided also to aggregate layers in a single object with initialization. Part of this for future reference:\n\n``` javascript\n// keep all layers in a simple manageable object\nvar layers = {\n    Cue: new Kinetic.Layer(),\n    Edit: new Kinetic.Layer(),\n    Axis: new Kinetic.Layer(),\n    ConnectorLines: new Kinetic.Layer(),\n    Labels: new Kinetic.Layer(),\n    Tootips: new Kinetic.Layer()\n};\n\n// on my init function\n// add all layers to stage, 1st has the lowest absolute z-index\nfor (var layer in layers) {\n    stage.add(layers[layer]);\n}\n\n// and the application main action stuff\n// adding shapes or groups\nlayers.Labels.add(mylabel);\nlayers.Labels.draw();\n```\n\nThank you for your support. \n. @ericdrowell it's a shame setAbsoluteZIndex() is not available. Not saying that the current implementation makes no sense, but...\n\nI've a scenario where I have draggable groups of shapes that contains one shape (a connector line) that I want to keep on the exact same level. The reason is simple I don't want to have lines on the top of my custom labels.\n\nMy current solution was to add that one shape to a separate layer an than I move it on the group 'dragmove' event.\n\nAny ideas or suggestions for a better or more elegant solution?\n. Hi @ericdrowell! I've finished my implementation based on the approach we have discussed. Must say that this way of managing layers and z-index is what makes more sense in order to keep things of getting to messy to manage.\n\nI've decided also to aggregate layers in a single object with initialization. Part of this for future reference:\n\n``` javascript\n// keep all layers in a simple manageable object\nvar layers = {\n    Cue: new Kinetic.Layer(),\n    Edit: new Kinetic.Layer(),\n    Axis: new Kinetic.Layer(),\n    ConnectorLines: new Kinetic.Layer(),\n    Labels: new Kinetic.Layer(),\n    Tootips: new Kinetic.Layer()\n};\n\n// on my init function\n// add all layers to stage, 1st has the lowest absolute z-index\nfor (var layer in layers) {\n    stage.add(layers[layer]);\n}\n\n// and the application main action stuff\n// adding shapes or groups\nlayers.Labels.add(mylabel);\nlayers.Labels.draw();\n```\n\nThank you for your support. \n. ",
    "kgaut": "not working for me too.\n\nas for all moveToX methods in a shape context.\n\nFirefox 20 (not tested on other browsers)\nkineticjs V4.4.3\n. ok, cheers !\n\n> > Also, to be clear, moveToTop moves a node to the top of its siblings inside a common parent,\n\nso it's not a bug, it's a feature ! ;)\n\nI was, as you said trying to move shape from different layers. I'll try to act on layers directly\n\nThanks a lot anyway for your quick answer and your amazing work.\n. Acting on Layer is working for me, as you suggested!\n\nThanks a lot.\n\nHope this may help people like who misread the documentation !\n. not working for me too.\n\nas for all moveToX methods in a shape context.\n\nFirefox 20 (not tested on other browsers)\nkineticjs V4.4.3\n. ok, cheers !\n\n> > Also, to be clear, moveToTop moves a node to the top of its siblings inside a common parent,\n\nso it's not a bug, it's a feature ! ;)\n\nI was, as you said trying to move shape from different layers. I'll try to act on layers directly\n\nThanks a lot anyway for your quick answer and your amazing work.\n. Acting on Layer is working for me, as you suggested!\n\nThanks a lot.\n\nHope this may help people like who misread the documentation !\n. ",
    "amia1": "The same happened to me. \n. The same happened to me. \n. ",
    "nkarki": "I don't know if I should be writing this here, but right about the same time I noticed this bug introduced by Chrome,  drag events were being passed through transparent portions of a layer on top of another layer containing a draggable group, containing an image. That stopped as well after the chrome upgrade.  However it still worked on firefox.  I haven't checked after this fix, but I will report if I see the problem again.\n. I don't know if I should be writing this here, but right about the same time I noticed this bug introduced by Chrome,  drag events were being passed through transparent portions of a layer on top of another layer containing a draggable group, containing an image. That stopped as well after the chrome upgrade.  However it still worked on firefox.  I haven't checked after this fix, but I will report if I see the problem again.\n. ",
    "pperliti": "It works, thank you!\n. It works, thank you!\n. ",
    "allenmoatallen": "I get the same behavior in v4.3.3 as well. My function is the following:\n\n``` javascript\ndragBoundFunc: function(pos, stuff, cool) {\n                var constrain = {\n                    x: 0,\n                    y: 0\n                };\n                if (pos.x < 0) {\n                    constrain.x = 0;\n                } else if (pos.x > stage.getWidth()) {\n                    constrain.x = stage.getWidth();\n                } else {\n                    constrain.x = pos.x;\n                }\n\n                if (pos.y < 0) {\n                    constrain.y = 0;\n                } else if (pos.y > stage.getHeight()) {\n                    constrain.y = stage.getHeight();\n                } else {\n                    constrain.y = pos.y;\n                }\n                return {\n                    x: constrain.x,\n                    y: constrain.y\n                };\n            },\n```\n. I don't ever use stage.destroy(). In this case it would be Kinetic.Image.remove().\n. Hit the wrong button.\n. Has anyone else run into this?\n. I updated from 4.5.4 to 4.7.2 this morning and still the same behavior...\n\nI don't have a jsFiddle, but if you go to my application at http://www.adaweb.net/barberpark/floorplan in IE9 and override the display:none css on #print than you can see the it will open a window/tab using the data url and will be blank.\n. I am trying to open a new pop up using the datauri. Only way I know so far is setting the window location. Is there a better way?\n\nSent from my iPhone\n\n> On Oct 9, 2013, at 2:32 PM, jfollas notifications@github.com wrote:\n> \n> Oh, are you trying to use the DataURI as the address of the web page? (Sorry, haven't opened your example yet). IE9 won't allow this, but you can create a  in the popup window.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. I get the same behavior in v4.3.3 as well. My function is the following:\n\n``` javascript\ndragBoundFunc: function(pos, stuff, cool) {\n                var constrain = {\n                    x: 0,\n                    y: 0\n                };\n                if (pos.x < 0) {\n                    constrain.x = 0;\n                } else if (pos.x > stage.getWidth()) {\n                    constrain.x = stage.getWidth();\n                } else {\n                    constrain.x = pos.x;\n                }\n\n                if (pos.y < 0) {\n                    constrain.y = 0;\n                } else if (pos.y > stage.getHeight()) {\n                    constrain.y = stage.getHeight();\n                } else {\n                    constrain.y = pos.y;\n                }\n                return {\n                    x: constrain.x,\n                    y: constrain.y\n                };\n            },\n```\n. I don't ever use stage.destroy(). In this case it would be Kinetic.Image.remove().\n. Hit the wrong button.\n. Has anyone else run into this?\n. I updated from 4.5.4 to 4.7.2 this morning and still the same behavior...\n\nI don't have a jsFiddle, but if you go to my application at http://www.adaweb.net/barberpark/floorplan in IE9 and override the display:none css on #print than you can see the it will open a window/tab using the data url and will be blank.\n. I am trying to open a new pop up using the datauri. Only way I know so far is setting the window location. Is there a better way?\n\nSent from my iPhone\n\n> On Oct 9, 2013, at 2:32 PM, jfollas notifications@github.com wrote:\n> \n> Oh, are you trying to use the DataURI as the address of the web page? (Sorry, haven't opened your example yet). IE9 won't allow this, but you can create a  in the popup window.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. ",
    "VAlbir": "I replaced stage.reset() to the following:\n\nstage.destroy();\nstage = new Kinetic.Stage({\n...\n});\n\nIt seems to work fine but there are 2 particular calls where it detects no children for the stage, but still deletes Id, hash, drag&drop and transitions.\n\nThe new stage is correctly drawn but it's pushed below the former one.\n. I replaced stage.reset() to the following:\n\nstage.destroy();\nstage = new Kinetic.Stage({\n...\n});\n\nIt seems to work fine but there are 2 particular calls where it detects no children for the stage, but still deletes Id, hash, drag&drop and transitions.\n\nThe new stage is correctly drawn but it's pushed below the former one.\n. ",
    "cogpie": "@c-ice this is just a test example to show the effect at a more simple level, imagine it is part of a bigger project where shapes are added and removed to a layer over the course of a layer's life eg. a windowing system, a gallery, a game\n. No problem - yes that may also work, I guess it depends on why it is being deleted here; a quick skim of the code seemed to suggest that the `shapes` object in `Kinetic.Global` is set when a Shape is initialised, when it is removed (this example), and when is used to return the Shape for handling an event - however, the event is only handled if the Shape is on the layer in the first place, so I guess I'm wondering why it need be deleted from the `Kinetic.Global.shapes` in the remove() method - surely a destroy() would make more sense where the Shape could not be used again, in any case.\n. @ericdrowell thanks for looking at that, I'm sure you have but I'll also check this new version works with my code and report back; I'm working a lot more with your library so I may have a few more reports - thank you!\n. @c-ice this is just a test example to show the effect at a more simple level, imagine it is part of a bigger project where shapes are added and removed to a layer over the course of a layer's life eg. a windowing system, a gallery, a game\n. No problem - yes that may also work, I guess it depends on why it is being deleted here; a quick skim of the code seemed to suggest that the `shapes` object in `Kinetic.Global` is set when a Shape is initialised, when it is removed (this example), and when is used to return the Shape for handling an event - however, the event is only handled if the Shape is on the layer in the first place, so I guess I'm wondering why it need be deleted from the `Kinetic.Global.shapes` in the remove() method - surely a destroy() would make more sense where the Shape could not be used again, in any case.\n. @ericdrowell thanks for looking at that, I'm sure you have but I'll also check this new version works with my code and report back; I'm working a lot more with your library so I may have a few more reports - thank you!\n. ",
    "jaydenseric": "This feature would make things much simpler for me too. I have had to add a background rectangle matching the stage size as a workaround. I wanted to deselect the current selected element when the user clicks/touches on an empty part of the canvas.\n. This feature would make things much simpler for me too. I have had to add a background rectangle matching the stage size as a workaround. I wanted to deselect the current selected element when the user clicks/touches on an empty part of the canvas.\n. ",
    "tingasaurus": "afaik addEventListener does not guarantee the order, what i did is move dd._endDragBefore and dd._endDragAfter to the end of the _mouseup function, that way i can check whether it was a drag or a click before calling those enddrag functions.\n. afaik addEventListener does not guarantee the order, what i did is move dd._endDragBefore and dd._endDragAfter to the end of the _mouseup function, that way i can check whether it was a drag or a click before calling those enddrag functions.\n. ",
    "magic890": "I've the same issue on 4.5.1.\n\nCan you help me?\nI wrote my problem here: https://github.com/ericdrowell/KineticJS/issues/454\n. Same issue on 4.5.4.\nHere the JSFiddle: http://jsfiddle.net/9z2kB/\nWhy isn't this fixed yet?\n. It's a sample code: http://jsfiddle.net/wNXmD/\nusing draggable: false it doesn't enter into dblclick event but it draws a new circle on layer.\n. Have you discovered something?\n. So what's your idea? How can I prevent event propagation?\n. I've the same issue on 4.5.1.\n\nCan you help me?\nI wrote my problem here: https://github.com/ericdrowell/KineticJS/issues/454\n. Same issue on 4.5.4.\nHere the JSFiddle: http://jsfiddle.net/9z2kB/\nWhy isn't this fixed yet?\n. It's a sample code: http://jsfiddle.net/wNXmD/\nusing draggable: false it doesn't enter into dblclick event but it draws a new circle on layer.\n. Have you discovered something?\n. So what's your idea? How can I prevent event propagation?\n. ",
    "MRdNk": "Changed to use the getter and setter. \nUnfortunately there doesn't seem to be one for the this.attrs.index.\n. So adding attrs with a default index value seems like the wrong way to do things.\n\nSeems sensible to me, to have a _update method that takes this.attrs and uses the setter for each of the values. \n\nWhat do you think?\n. Sorry finally got it. It's already setting the values from attrs. \nI can tidy it up into a smaller commit, if you wish, just let me know.\n. Closed as tidier commits, sent in #362\n. OK that looks good, thanks for implementing it.\n. Changed to use the getter and setter. \nUnfortunately there doesn't seem to be one for the this.attrs.index.\n. So adding attrs with a default index value seems like the wrong way to do things.\n\nSeems sensible to me, to have a _update method that takes this.attrs and uses the setter for each of the values. \n\nWhat do you think?\n. Sorry finally got it. It's already setting the values from attrs. \nI can tidy it up into a smaller commit, if you wish, just let me know.\n. Closed as tidier commits, sent in #362\n. OK that looks good, thanks for implementing it.\n. ",
    "dchhetri": "@ericdrowell  Hey thanks for clarifying. I think the problem persist for shapes as well. Take a look here http://jsfiddle.net/aTeRF/6/. Instead of using the stage as event handler, I use Shape object, this time the shape object acts like a background, in line 78. Should that work? Or am I not understanding it?\n. @ericdrowell \n\nCan you explain something for me please. Which is more preferrable, layer.draw() or layer.drawScene? In this fiddle http://jsfiddle.net/aTeRF/8/ , in line 44,  when I use drawScene, events seems to be fired consistently and correctly, but if I use layer.draw then event does not seem to be fired consistently. And If I don't call either, then events fire as normal. If you have some time, can you explain why this is to me? Thanks.\n. @ericdrowell  Hey thanks for clarifying. I think the problem persist for shapes as well. Take a look here http://jsfiddle.net/aTeRF/6/. Instead of using the stage as event handler, I use Shape object, this time the shape object acts like a background, in line 78. Should that work? Or am I not understanding it?\n. @ericdrowell \n\nCan you explain something for me please. Which is more preferrable, layer.draw() or layer.drawScene? In this fiddle http://jsfiddle.net/aTeRF/8/ , in line 44,  when I use drawScene, events seems to be fired consistently and correctly, but if I use layer.draw then event does not seem to be fired consistently. And If I don't call either, then events fire as normal. If you have some time, can you explain why this is to me? Thanks.\n. ",
    "grahamee": "I have a very similar problem in an app I'm writing. I've found that if you increase the strokeWidth of the lines being drawn in the fiddle above the problem is reduced. At a strokeWidth of 1 the problem always occurs, as you increase it becomes intermittent and at 10 it disappears.\n\nIn my app I'm drawing a \"drag-select\" rectangle and seeing the same behaviour, except luckily in my case it fails at strokeWidth 1 but works OK at strokeWidth 2. Odd.\n. I have a very similar problem in an app I'm writing. I've found that if you increase the strokeWidth of the lines being drawn in the fiddle above the problem is reduced. At a strokeWidth of 1 the problem always occurs, as you increase it becomes intermittent and at 10 it disappears.\n\nIn my app I'm drawing a \"drag-select\" rectangle and seeing the same behaviour, except luckily in my case it fails at strokeWidth 1 but works OK at strokeWidth 2. Odd.\n. ",
    "m1erickson": "Issue resolved after reading this comment on a similar issue by Eric Drowell: I believe you're misunderstanding what stage.on() does. stage.on('mouseup') does not fire a mouseup event anytime you mouseup inside the stage. It fires a mouseup event when you mouseup inside of a shape (all events are relative to shapes). It sounds like what you want, is to listen for mouseup on the container DOM element instead.\n. Understood that layer.draw() will redraw layers, but is node.draw() is no\nlonger available for shapes like circle, rect, etc (I'm thinking back to\n4.4 when myCircle.draw() was available?\n\nOn Thu, Jan 23, 2014 at 5:53 PM, Eric Rowell notifications@github.comwrote:\n\n> Closed #778 https://github.com/ericdrowell/KineticJS/issues/778.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/778\n> .\n. Issue resolved after reading this comment on a similar issue by Eric Drowell: I believe you're misunderstanding what stage.on() does. stage.on('mouseup') does not fire a mouseup event anytime you mouseup inside the stage. It fires a mouseup event when you mouseup inside of a shape (all events are relative to shapes). It sounds like what you want, is to listen for mouseup on the container DOM element instead.\n. Understood that layer.draw() will redraw layers, but is node.draw() is no\nlonger available for shapes like circle, rect, etc (I'm thinking back to\n4.4 when myCircle.draw() was available?\n\nOn Thu, Jan 23, 2014 at 5:53 PM, Eric Rowell notifications@github.comwrote:\n\n> Closed #778 https://github.com/ericdrowell/KineticJS/issues/778.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/778\n> .\n. ",
    "javierjmx": "What if I want to get the pointer position to draw a shape right there? I totally agree with @wighawag.\n. Damn!! That's right!! Thanks, man. This JS is so cool!\n. What if I want to get the pointer position to draw a shape right there? I totally agree with @wighawag.\n. Damn!! That's right!! Thanks, man. This JS is so cool!\n. ",
    "nicomlas": "The filter works as follow :\n1/ Measure the 4 corner pixels RGB coordinates\n2/ If the 4 corners have similar color, all other similar pixels are detected providing a mask. Else image stays unchanged.\n2.1/ An erode/dilate processing is applyed on mask to enhance the segmentation\n2.2/ A smooth edge filter is applied to enhance the visual result\n\nEnhancements :\n- Translate in a more human sensitive color space (HSL) for color distance\n- Use more than one pixel in corners to evaluate the unicolor background image\n\nEx: You can test on http://www.rueviolette.com/boutique/edition.html dragging product pictures into the draw area.\n. No matter the name. I choose Crop to allow new cropping feature (based on edge detection, etc...) but Mask sounds great as well.\n. The filter works as follow :\n1/ Measure the 4 corner pixels RGB coordinates\n2/ If the 4 corners have similar color, all other similar pixels are detected providing a mask. Else image stays unchanged.\n2.1/ An erode/dilate processing is applyed on mask to enhance the segmentation\n2.2/ A smooth edge filter is applied to enhance the visual result\n\nEnhancements :\n- Translate in a more human sensitive color space (HSL) for color distance\n- Use more than one pixel in corners to evaluate the unicolor background image\n\nEx: You can test on http://www.rueviolette.com/boutique/edition.html dragging product pictures into the draw area.\n. No matter the name. I choose Crop to allow new cropping feature (based on edge detection, etc...) but Mask sounds great as well.\n. ",
    "dougmartin": "I'm seeing the same error - I've isolated it to the call to Kinetic.Stage().  Here is a simple test case:\n\nhttp://dougmart.in/bugs/issue_366/\n\nYou should see an alert popup with the error.  If you see text rendered on the stage you aren't seeing the issue.\n\nThe mobile Safari console debugger doesn't give any more into that the initial report above.  I tried setting a window.onerror handler to see if I could get the line number but I got no new information.  I also tried inlining the unminimized Javascript on the page to see if I could get the line number but that didn't work either.\n\nI'm using an old iPad 1 (iOS version 5.1).  My user agent says AppleWebKit/534.46 Safari/7534.48.3.\n. I've also created a version of the same code that uses 4.3.3.  It loads fine on my iPad:\n\nhttp://dougmart.in/bugs/issue_366/4.3.3.html\n. I'm seeing the same error - I've isolated it to the call to Kinetic.Stage().  Here is a simple test case:\n\nhttp://dougmart.in/bugs/issue_366/\n\nYou should see an alert popup with the error.  If you see text rendered on the stage you aren't seeing the issue.\n\nThe mobile Safari console debugger doesn't give any more into that the initial report above.  I tried setting a window.onerror handler to see if I could get the line number but I got no new information.  I also tried inlining the unminimized Javascript on the page to see if I could get the line number but that didn't work either.\n\nI'm using an old iPad 1 (iOS version 5.1).  My user agent says AppleWebKit/534.46 Safari/7534.48.3.\n. I've also created a version of the same code that uses 4.3.3.  It loads fine on my iPad:\n\nhttp://dougmart.in/bugs/issue_366/4.3.3.html\n. ",
    "linwenwei": "my dear friends, the problem is how now?I found  ericdrowell today updated version 4.4.1!!\n. Tomorrow I get the IPAD3 test the problem \uff01\n. run in t the ipad when my html file contain the javascript code :\n        var stage = new Kinetic.Stage({\n            container: 'container',\n            width: 1024,\n            height: 768\n        });\nIt generates the above-mentioned error\uff01\n. my dear friend,it run very good now,thank you~~\n. my dear friends, the problem is how now?I found  ericdrowell today updated version 4.4.1!!\n. Tomorrow I get the IPAD3 test the problem \uff01\n. run in t the ipad when my html file contain the javascript code :\n        var stage = new Kinetic.Stage({\n            container: 'container',\n            width: 1024,\n            height: 768\n        });\nIt generates the above-mentioned error\uff01\n. my dear friend,it run very good now,thank you~~\n. ",
    "mrsalt": "Yes, I'm on version 4.4.0.  I made sure to update and re-test before logging the bug.\n\nDoes the bug make sense?  It seems to be a design oversight.  All the pixels of each shape drawn in the hit layer need to be a single color, right?  After doing the fill, when we stroke the border pixels then end up being a different color from the rest of the rectangle.  You can see this in the image I've attached above (if you zoom in).\n\nI think doing the stroke step for shapes drawn in the hit layer shouldn't be needed but I'd like to make the change then run tests to see if anything breaks.  (I've checked out the source but wasn't sure how to use KineticJS from a developer -- not just a user -- point of view - package, deploy, run tests)\n\nWhat do you think?\n. I tested version 4.6.0 and the problem does not occur, so I'm closing this issue.  I think this change in version 4.5.5 fixed my issue:\n\nmouse and touch events can now be bound directly to the stage, i.e. mousedown, mouseup, click, dblclick, etc. ex. stage.on('click', ...), when clicking on the an empty space on the stage, you will still get a click event fired, whose target node is the stage.\n. No, thank you for fixing it!  :)\n\nOn Sun, Sep 15, 2013 at 9:55 PM, Eric Rowell notifications@github.comwrote:\n\n> Great! Thanks for verifying\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/367#issuecomment-24487859\n> .\n. I believe this issue is a duplicate of the issue I logged a little more than a week ago:\nhttps://github.com/ericdrowell/KineticJS/issues/367\n\nWhich appears to be a duplicate of https://github.com/ericdrowell/KineticJS/issues/198.\n\nWhat about the idea of not doing a stroke, just a fill when composing the hit layer?  Maybe that wouldn't solve the problem, but it wasn't until the stroking that the anti-aliased pixels showed up for me.\n\nOne test that could help prevent the problem once a solution is found:\nDraw a variety of shapes, then test every pixel in the hit layer.  Each pixel that has an alpha value of 255 (which  indicates a shape is there) needs to have a pixel RGB value that is one of the registered shapes.  If not, it indicates a problem with how the hit layer was drawn.\n\nMaybe one of these days I'll try out some different ideas to see if I can fix this hit layer drawing issue...\n. Thinking about this another way - perhaps it's incorrect that the color key is un-registered in the remove method, given that the color key is registered in the first place when the shape is created.  Perhaps the color key should not be un-registered until the shape is destroyed.\n. Thanks Eric!  I see you changed the remove function to destroy.  With your fix when I call remove the parent class (Node) removes the shape from the layer?  (Shape no longer implements remove).\n\nI worded the title of this bug porrly.  I should have said \"after a shape is removed and then added back in, it cannot be clicked\".\n. Yes, I'm on version 4.4.0.  I made sure to update and re-test before logging the bug.\n\nDoes the bug make sense?  It seems to be a design oversight.  All the pixels of each shape drawn in the hit layer need to be a single color, right?  After doing the fill, when we stroke the border pixels then end up being a different color from the rest of the rectangle.  You can see this in the image I've attached above (if you zoom in).\n\nI think doing the stroke step for shapes drawn in the hit layer shouldn't be needed but I'd like to make the change then run tests to see if anything breaks.  (I've checked out the source but wasn't sure how to use KineticJS from a developer -- not just a user -- point of view - package, deploy, run tests)\n\nWhat do you think?\n. I tested version 4.6.0 and the problem does not occur, so I'm closing this issue.  I think this change in version 4.5.5 fixed my issue:\n\nmouse and touch events can now be bound directly to the stage, i.e. mousedown, mouseup, click, dblclick, etc. ex. stage.on('click', ...), when clicking on the an empty space on the stage, you will still get a click event fired, whose target node is the stage.\n. No, thank you for fixing it!  :)\n\nOn Sun, Sep 15, 2013 at 9:55 PM, Eric Rowell notifications@github.comwrote:\n\n> Great! Thanks for verifying\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/367#issuecomment-24487859\n> .\n. I believe this issue is a duplicate of the issue I logged a little more than a week ago:\nhttps://github.com/ericdrowell/KineticJS/issues/367\n\nWhich appears to be a duplicate of https://github.com/ericdrowell/KineticJS/issues/198.\n\nWhat about the idea of not doing a stroke, just a fill when composing the hit layer?  Maybe that wouldn't solve the problem, but it wasn't until the stroking that the anti-aliased pixels showed up for me.\n\nOne test that could help prevent the problem once a solution is found:\nDraw a variety of shapes, then test every pixel in the hit layer.  Each pixel that has an alpha value of 255 (which  indicates a shape is there) needs to have a pixel RGB value that is one of the registered shapes.  If not, it indicates a problem with how the hit layer was drawn.\n\nMaybe one of these days I'll try out some different ideas to see if I can fix this hit layer drawing issue...\n. Thinking about this another way - perhaps it's incorrect that the color key is un-registered in the remove method, given that the color key is registered in the first place when the shape is created.  Perhaps the color key should not be un-registered until the shape is destroyed.\n. Thanks Eric!  I see you changed the remove function to destroy.  With your fix when I call remove the parent class (Node) removes the shape from the layer?  (Shape no longer implements remove).\n\nI worded the title of this bug porrly.  I should have said \"after a shape is removed and then added back in, it cannot be clicked\".\n. ",
    "NightmaresWithin": "I'm new here, and a bit new to interacting on GitHub, but I can say that this fiddle project is using an old version of KineticJS and the code works perfectly using version 4.4.0 on the specified version of chrome.  I almost decided not to use the library due to the amount of bug #'s rolling into my email, until I actually started testing them.  Please update.\n. I'm new here, and a bit new to interacting on GitHub, but I can say that this fiddle project is using an old version of KineticJS and the code works perfectly using version 4.4.0 on the specified version of chrome.  I almost decided not to use the library due to the amount of bug #'s rolling into my email, until I actually started testing them.  Please update.\n. ",
    "ScottKelly": "I'm having the same issue with Chrome Version 26.0.1410.43 and that chrisritter's fix worked for me.\n. @ktocdev It should be in the kinetic.js file. What version are you using? \n. Try this. This is 4.1.1 with the hotfix applied. http://pastebin.com/4ZbawQHu\n. I'm having the same issue with Chrome Version 26.0.1410.43 and that chrisritter's fix worked for me.\n. @ktocdev It should be in the kinetic.js file. What version are you using? \n. Try this. This is 4.1.1 with the hotfix applied. http://pastebin.com/4ZbawQHu\n. ",
    "ktocdev": "Hi chrisritter, where do we make the edit that you provided? Is it in kinetic.js file, or would it be in our SVG mapping code? We can't find 'context.fill(context)' in the kinetic.js file, and we have not used it in our code either. Updating kinetic.js to the newest version corrected the issue, but there is a lot baked into the SVG mapping js, and I believe the update is breaking some of the other functionality. What would you recommend? \n. @ScottKelly, we are using 4.1.2 minified. I am having a heard time finding an unminified version. I've tried searching 'context.fill', etc, and can't find that piece in the minified file. \n. Thanks so much Scott, looks like it is working now :)\n. Hi chrisritter, where do we make the edit that you provided? Is it in kinetic.js file, or would it be in our SVG mapping code? We can't find 'context.fill(context)' in the kinetic.js file, and we have not used it in our code either. Updating kinetic.js to the newest version corrected the issue, but there is a lot baked into the SVG mapping js, and I believe the update is breaking some of the other functionality. What would you recommend? \n. @ScottKelly, we are using 4.1.2 minified. I am having a heard time finding an unminified version. I've tried searching 'context.fill', etc, and can't find that piece in the minified file. \n. Thanks so much Scott, looks like it is working now :)\n. ",
    "tmhpfnr": "@chrisritter Tyvm!\n\nBtw: Here you can find the fixed v4.0.0 http://pastebin.com/JC1ZnzGD\n. @chrisritter Tyvm!\n\nBtw: Here you can find the fixed v4.0.0 http://pastebin.com/JC1ZnzGD\n. ",
    "adamski52": "Yeah - i looked and looked and somehow didnt see that. Disregard, sorry!\n\nEric Rowell notifications@github.com wrote:\n\n> Isn't it already a module?\n> \n> https://github.com/ericdrowell/KineticJS/blob/master/src/Global.js#L157\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/ericdrowell/KineticJS/issues/370#issuecomment-15938858\n\n## \n\nSent from my Android phone with K-9 Mail. Please excuse my brevity.\n. Yeah - i looked and looked and somehow didnt see that. Disregard, sorry!\n\nEric Rowell notifications@github.com wrote:\n\n> Isn't it already a module?\n> \n> https://github.com/ericdrowell/KineticJS/blob/master/src/Global.js#L157\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/ericdrowell/KineticJS/issues/370#issuecomment-15938858\n\n## \n\nSent from my Android phone with K-9 Mail. Please excuse my brevity.\n. ",
    "binoculars": "Thanks. I totally missed that beginPath()! Sorry for the erroneous bug report.\n\nBy the way, I love this library. It's extremely useful.\n. No prob :-)\n. Ya, Arc sounds better\n\nOn Dec 13, 2013, at 12:01 AM, Eric Rowell notifications@github.com wrote:\n\n> Cool! Thank you! I'll probably rename this to Arc, though.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. No prob. I must have just had an evening of clarity--hopefully not a fluke\n:-)\n\nI didn't even realize that The Hobbit 2 is out today.\n\nI really appreciate all of the work you've done. You taught me everything\nfrom your html5canvastutorials.com site. Outstanding work and I'm glad that\nI can at least contribute back in some small way.\n\nOn Fri, Dec 13, 2013 at 2:11 PM, Eric Rowell notifications@github.comwrote:\n\n> Merged #720 https://github.com/ericdrowell/KineticJS/pull/720.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/pull/720\n> .\n. Definitely. I started https://github.com/binoculars/KineticJS-plugins\n\nI tried to keep it in line with the structure of your main repo.\n. Thanks. I totally missed that beginPath()! Sorry for the erroneous bug report.\n\nBy the way, I love this library. It's extremely useful.\n. No prob :-)\n. Ya, Arc sounds better\n\nOn Dec 13, 2013, at 12:01 AM, Eric Rowell notifications@github.com wrote:\n\n> Cool! Thank you! I'll probably rename this to Arc, though.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. No prob. I must have just had an evening of clarity--hopefully not a fluke\n:-)\n\nI didn't even realize that The Hobbit 2 is out today.\n\nI really appreciate all of the work you've done. You taught me everything\nfrom your html5canvastutorials.com site. Outstanding work and I'm glad that\nI can at least contribute back in some small way.\n\nOn Fri, Dec 13, 2013 at 2:11 PM, Eric Rowell notifications@github.comwrote:\n\n> Merged #720 https://github.com/ericdrowell/KineticJS/pull/720.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/pull/720\n> .\n. Definitely. I started https://github.com/binoculars/KineticJS-plugins\n\nI tried to keep it in line with the structure of your main repo.\n. ",
    "rwdalpe": "I should add that manually copying and pasting the above code from the master version of Layer.js into the 4.4.0 source file's Layer prototype fixes the shadowing issue.\n. Great to hear! Looking forward to the patch.\n\nThank you.\n. Thank you. It turns out that I can do the synchronization and modifications without cloning in this case. I use the name for something else in my application, so I'm not sure if that workaround will be applicable to my situation. Can a Node have multiple names?\n. I should add that manually copying and pasting the above code from the master version of Layer.js into the 4.4.0 source file's Layer prototype fixes the shadowing issue.\n. Great to hear! Looking forward to the patch.\n\nThank you.\n. Thank you. It turns out that I can do the synchronization and modifications without cloning in this case. I use the name for something else in my application, so I'm not sure if that workaround will be applicable to my situation. Can a Node have multiple names?\n. ",
    "Foxhunt": "Im having a simlilar problem with a cloned Node moved to another Layer.\nI described the Pr0blem in issue #508?\nI cant realy get to the core of this problem...\n. Im Having a similar Problem.\n\nI cant get the ID of a node selected via a on click event.\n\nhttp://jsfiddle.net/EUE9u/1\n\ni create some nodes start selecting them everything works just fine\nafter i clone a node to another layer hide the old one play a tween on the new created layer destroy it and show the old layer again things start to get funny\n\nto see the result select a rect press start and return again\n\ni changed the way my nodes get selected from KineticJS 4.5.5 to 4.7.4\n\nthe interesting stuff hapens beneth //Select Level i have a 4.5.5 and a 4.7.4 version\n. Im having a simlilar problem with a cloned Node moved to another Layer.\nI described the Pr0blem in issue #508?\nI cant realy get to the core of this problem...\n. Im Having a similar Problem.\n\nI cant get the ID of a node selected via a on click event.\n\nhttp://jsfiddle.net/EUE9u/1\n\ni create some nodes start selecting them everything works just fine\nafter i clone a node to another layer hide the old one play a tween on the new created layer destroy it and show the old layer again things start to get funny\n\nto see the result select a rect press start and return again\n\ni changed the way my nodes get selected from KineticJS 4.5.5 to 4.7.4\n\nthe interesting stuff hapens beneth //Select Level i have a 4.5.5 and a 4.7.4 version\n. ",
    "tjouan": "Thanks!\n\nMaybe you're using a filesystem that is case insensitive for filenames and at some time the change wasn't noticed (couldn't in fact).\n. Thanks!\n\nMaybe you're using a filesystem that is case insensitive for filenames and at some time the change wasn't noticed (couldn't in fact).\n. ",
    "urandom": "I'd like to suggest another approach to fixing the antialiasing issues. \n\nWhen we are over a semi-transparent pixel, we have either passed through a shape or an empty section of the canvas. If we always keep track of the last shape we have passed over (and clear that reference when we go over an empty section), it is a good guess that even though the current semi-transparent pixel doesn't match the any shape, it belongs to the last remembered one, and we can treat it as part of it.\n. I'd like to suggest another approach to fixing the antialiasing issues. \n\nWhen we are over a semi-transparent pixel, we have either passed through a shape or an empty section of the canvas. If we always keep track of the last shape we have passed over (and clear that reference when we go over an empty section), it is a good guess that even though the current semi-transparent pixel doesn't match the any shape, it belongs to the last remembered one, and we can treat it as part of it.\n. ",
    "j5kay-glympse": "This is a result of the changes to the event handling system, where the\nnewer Function.prototype.bind method was utilized. Unfortunately, Safari on\niOS 5.1 doesn't properly support bind, so you'll need to supply a polyfill\nin your app to properly use 4.4.0 for iOS 5.1/Safari. A couple of\nreferences that work decently (but aren't perfect in my testing):\n\nhttps://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind\nhttps://github.com/kriskowal/es5-shim/blob/master/es5-shim.js (you'll have\nto dig it out if you don't want to whole shim lib)\n\nGood luck!\n-jason\n\nOn Sun, Apr 7, 2013 at 10:42 PM, vc05946 notifications@github.com wrote:\n\n> Hi!\n> \n> It seems that KinetcJS ver 4.4.0 does not work in iOS 5.1, now I\n> temporarily use ver 4.2.0. Would there be any update for supporting in iOS\n> 5.1 or iOS version before 6?\n> \n> Regards.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/383\n> .\n. The bind call I'm referring to is in Stage.js, line 360:\n\nthat.content.addEventListener(pubEvent, f.bind(that), false);\n\nAm I missing something? It was causing problems with iOS5.1/Safari without\nthe polyfill\n\nOn Sun, Apr 7, 2013 at 11:29 PM, Eric Rowell notifications@github.comwrote:\n\n> Hi Jason, not sure where you're going with this - KineticJS doesn't use\n> the bind method anywhere in the codebase. Could you expand a bit?\n> \n> @vc05946 https://github.com/vc05946 can you be more specific as to what\n> the problem is? JS error?\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/383#issuecomment-16034626\n> .\n. This is a result of the changes to the event handling system, where the\nnewer Function.prototype.bind method was utilized. Unfortunately, Safari on\niOS 5.1 doesn't properly support bind, so you'll need to supply a polyfill\nin your app to properly use 4.4.0 for iOS 5.1/Safari. A couple of\nreferences that work decently (but aren't perfect in my testing):\n\nhttps://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind\nhttps://github.com/kriskowal/es5-shim/blob/master/es5-shim.js (you'll have\nto dig it out if you don't want to whole shim lib)\n\nGood luck!\n-jason\n\nOn Sun, Apr 7, 2013 at 10:42 PM, vc05946 notifications@github.com wrote:\n\n> Hi!\n> \n> It seems that KinetcJS ver 4.4.0 does not work in iOS 5.1, now I\n> temporarily use ver 4.2.0. Would there be any update for supporting in iOS\n> 5.1 or iOS version before 6?\n> \n> Regards.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/383\n> .\n. The bind call I'm referring to is in Stage.js, line 360:\n\nthat.content.addEventListener(pubEvent, f.bind(that), false);\n\nAm I missing something? It was causing problems with iOS5.1/Safari without\nthe polyfill\n\nOn Sun, Apr 7, 2013 at 11:29 PM, Eric Rowell notifications@github.comwrote:\n\n> Hi Jason, not sure where you're going with this - KineticJS doesn't use\n> the bind method anywhere in the codebase. Could you expand a bit?\n> \n> @vc05946 https://github.com/vc05946 can you be more specific as to what\n> the problem is? JS error?\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/383#issuecomment-16034626\n> .\n. ",
    "vc05946": "@JasonGlympse Thanks for your suggestion! Let me have a look first.\n\n@ericdrowell It is a JavaScript Error which show as \" 'undefined' is not a function\". As iPad iOS5.1 Safari Console does not tell the line number and other information, I cannot find out more on the error yet. But it seems that even the tutorial example also give such an JS error which may be more traceable of the error.\n\nThanks for your attentions~\n. @JasonGlympse Thanks for your suggestion! Let me have a look first.\n\n@ericdrowell It is a JavaScript Error which show as \" 'undefined' is not a function\". As iPad iOS5.1 Safari Console does not tell the line number and other information, I cannot find out more on the error yet. But it seems that even the tutorial example also give such an JS error which may be more traceable of the error.\n\nThanks for your attentions~\n. ",
    "isdito": "Hello. I have also problems with this. I see the canvas with kinectjs very nice  in chrome,firefox,safary, opera in computer, but no in the ipad and I can not see the bug , and very slow in the movil.\n\nit is normal?\n. Hello. I have the same problem. I see canvas in firefox,opera,chrome,safary,.. in computer all but in the ipad I not see nothing and in the Galaxy go very slow and mousemove and mouseenter not work.\n. Good morning:\nbut in this example of Eric\nhttp://www.html5canvastutorials.com/labs/html5-canvas-multi-touch-scale-stage-with-kineticjs/\n\n```\n    var scale = stage.getScale().x * dist / lastDist;\n\n      stage.setScale(scale);\n      stage.draw();\n      lastDist = dist;\n    }\n```\n\nChange the values, the same than me. I change with 2 floats.\nsorry my bad english.\n. Please if you dont mind say me, who  I have to call setScale with a example to change.\n\nI'm blocked\nSorry my bad english and thank you\n. OK thank you resolved.\nI find this information, for the next person that have problems.\nhttp://stackoverflow.com/questions/21182054/zoom-doesnt-work-in-5-0-0-like-in-version-bevor\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n. Hello Marek and thank you. The problem is not the autoresize it is another thing that I not detect\nI applied a resize formula like this, but the height is descompensate.\n\n```\n     function resize() {\n        var __canvasWidth = document.getElementById(\"Container\").parentElement.offsetWidth;\n        stage.setOffset({x: 0, y: 0});\n        stage.setPosition({x: 0, y: 0});\n        var aspec =parseFloat(540) / parseFloat(820);\n        var __canvasHeight =  aspec * __canvasWidth;\n        //__scaleFactor = Math.min(__canvasWidth / 820,  __canvasHeight /  540);\n        __scaleFactor = __canvasWidth / 820.0\n        stage.escala= __scaleFactor;\n        stage.setScale({x: __scaleFactor, y: __scaleFactor});\n        stage.setSize({x:__canvasWidth, y: __canvasHeight});\n        stage.draw();\n\n    };\n```\n\nAnd applied in orientationchange and resize. \n\nSorry my bad english\n. Hello. I have also problems with this. I see the canvas with kinectjs very nice  in chrome,firefox,safary, opera in computer, but no in the ipad and I can not see the bug , and very slow in the movil.\n\nit is normal?\n. Hello. I have the same problem. I see canvas in firefox,opera,chrome,safary,.. in computer all but in the ipad I not see nothing and in the Galaxy go very slow and mousemove and mouseenter not work.\n. Good morning:\nbut in this example of Eric\nhttp://www.html5canvastutorials.com/labs/html5-canvas-multi-touch-scale-stage-with-kineticjs/\n\n```\n    var scale = stage.getScale().x * dist / lastDist;\n\n      stage.setScale(scale);\n      stage.draw();\n      lastDist = dist;\n    }\n```\n\nChange the values, the same than me. I change with 2 floats.\nsorry my bad english.\n. Please if you dont mind say me, who  I have to call setScale with a example to change.\n\nI'm blocked\nSorry my bad english and thank you\n. OK thank you resolved.\nI find this information, for the next person that have problems.\nhttp://stackoverflow.com/questions/21182054/zoom-doesnt-work-in-5-0-0-like-in-version-bevor\nhttps://github.com/ericdrowell/KineticJS/wiki/Change-Log\n. Hello Marek and thank you. The problem is not the autoresize it is another thing that I not detect\nI applied a resize formula like this, but the height is descompensate.\n\n```\n     function resize() {\n        var __canvasWidth = document.getElementById(\"Container\").parentElement.offsetWidth;\n        stage.setOffset({x: 0, y: 0});\n        stage.setPosition({x: 0, y: 0});\n        var aspec =parseFloat(540) / parseFloat(820);\n        var __canvasHeight =  aspec * __canvasWidth;\n        //__scaleFactor = Math.min(__canvasWidth / 820,  __canvasHeight /  540);\n        __scaleFactor = __canvasWidth / 820.0\n        stage.escala= __scaleFactor;\n        stage.setScale({x: __scaleFactor, y: __scaleFactor});\n        stage.setSize({x:__canvasWidth, y: __canvasHeight});\n        stage.draw();\n\n    };\n```\n\nAnd applied in orientationchange and resize. \n\nSorry my bad english\n. ",
    "JohnBicknell": "Got so used to chrome auto updating on desktop, presumed the same on Android (2 month old Nexus 7 from Google). Manually updated, now on chrome 26.0.1, issue gone. \n. Got so used to chrome auto updating on desktop, presumed the same on Android (2 month old Nexus 7 from Google). Manually updated, now on chrome 26.0.1, issue gone. \n. ",
    "thigh": "Excellent, thanks.  Had to go up two levels from the target node (getParent().getParent()) in order to obtain the id.\n. Excellent, thanks.  Had to go up two levels from the target node (getParent().getParent()) in order to obtain the id.\n. ",
    "Elmapul": "I guess the problem is how IE threats touch event, maybe if you use javascript ignore default behavior.\non jquery\n\nevent.preventDefault()\n\nnot sure how to in raw javascript.\n. I guess the problem is how IE threats touch event, maybe if you use javascript ignore default behavior.\non jquery\n\nevent.preventDefault()\n\nnot sure how to in raw javascript.\n. ",
    "kurtschindler": "I can confirm '-ms-touch-action: none;' enables drag & drop as one would expect. This issue should probably be closed.\n. I'm experiencing similar issues: Chrome Version 27.0.1453.94 m, Kinetic v4.5.2, Windows 8.\n\nThe following code renders a blue rectangle:\n\nvar chip = new Kinetic.Circle({\n            x: x,\n            y: y,\n            radius: 20,\n            fill: 'white',\n            stroke: 'blue',\n            strokeWidth: 5\n        });\n\nRemove the stroke and strokeWidth and it renders a proper white circle, so the stroke has something to do with it. It renders correctly in IE. It also rendered correctly in the previous version of Chrome. \n\nNaturally, the Circle tutorial http://www.html5canvastutorials.com/demos/kineticjs/html5-canvas-kineticjs-circle-tutorial/index.php is properly rendering as a circle, so I don't know what to think.\n. For what it's worth, those circles are rendering properly for me in Version 29.0.1521.0 canary, so it would appear that this issue is on the Chrome end.\n. I can confirm '-ms-touch-action: none;' enables drag & drop as one would expect. This issue should probably be closed.\n. I'm experiencing similar issues: Chrome Version 27.0.1453.94 m, Kinetic v4.5.2, Windows 8.\n\nThe following code renders a blue rectangle:\n\nvar chip = new Kinetic.Circle({\n            x: x,\n            y: y,\n            radius: 20,\n            fill: 'white',\n            stroke: 'blue',\n            strokeWidth: 5\n        });\n\nRemove the stroke and strokeWidth and it renders a proper white circle, so the stroke has something to do with it. It renders correctly in IE. It also rendered correctly in the previous version of Chrome. \n\nNaturally, the Circle tutorial http://www.html5canvastutorials.com/demos/kineticjs/html5-canvas-kineticjs-circle-tutorial/index.php is properly rendering as a circle, so I don't know what to think.\n. For what it's worth, those circles are rendering properly for me in Version 29.0.1521.0 canary, so it would appear that this issue is on the Chrome end.\n. ",
    "stephskardal": "This is still an issue, but I'm seeing it on Chrome and not Firefox (not sure about IE). The general setup is this:\nGiven a path on with strokeScaleEnabled set to false, with a strokeWidth of approximately 2. The path has a background image set. As the fillpatternscale value is modified, the path stroke scale also goes up and down (the path outline shifts up and down in size), however, this does not happen in Firefox. The stroke width does not change. See attached image - the stroke should still outline the green section rather than change in scale.\n![chrome](https://f.cloud.github.com/assets/43792/1818740/911653fc-7026-11e3-9501-f98eb80d59a5.png)\n\nIs this planned to be fixed? Thanks.\n. This is still an issue, but I'm seeing it on Chrome and not Firefox (not sure about IE). The general setup is this:\nGiven a path on with strokeScaleEnabled set to false, with a strokeWidth of approximately 2. The path has a background image set. As the fillpatternscale value is modified, the path stroke scale also goes up and down (the path outline shifts up and down in size), however, this does not happen in Firefox. The stroke width does not change. See attached image - the stroke should still outline the green section rather than change in scale.\n![chrome](https://f.cloud.github.com/assets/43792/1818740/911653fc-7026-11e3-9501-f98eb80d59a5.png)\n\nIs this planned to be fixed? Thanks.\n. ",
    "filad": "Well, yes you can link to it from the kineticjs homepage :)   (to http://riskmap.filkor.org/, not to the old one). I will keep it online then.\n\nYes, I don't have to redraw the whole map each time.. I have a \"grey-map.jpg\" and I load it once (backgroundLayer), then I draw the territories onto this map (mapLayer). But I'm not a KineticJS expert so maybe one could do this better. Basically I made this map for myself to demonstrate the path detection issues.\n\nThe problem, as I said is with Firefox. It is slow. (when you look at http://riskmap.filkor.org/) And I don't really know why... I don't see this performance loss with the older versions of kineticjs. (only on Firefox. With Chrome everything is ok)  \n. Okay I solved it. \nThanks for that lab link, it really helped a lot.\n\nI had to insert a 'topLayer' and move between this layer and the 'mapLayer'. \nNow Firefox and Chrome are both superfast, thanks again, I need to learn more about KineticJS next time before I write here..and yeah, it was a drawing issue.\n\nOh and I see you already put the link on the kineticjs homepage. \nI wrote a short tut how I made this custom interactive map, because I tend to forget these things soon, so if anyone interested: http://dev.filkor.org/2013/04/14/create-an-interactive-map-using-javascript-and-html-5-canvas/\n. Well, yes you can link to it from the kineticjs homepage :)   (to http://riskmap.filkor.org/, not to the old one). I will keep it online then.\n\nYes, I don't have to redraw the whole map each time.. I have a \"grey-map.jpg\" and I load it once (backgroundLayer), then I draw the territories onto this map (mapLayer). But I'm not a KineticJS expert so maybe one could do this better. Basically I made this map for myself to demonstrate the path detection issues.\n\nThe problem, as I said is with Firefox. It is slow. (when you look at http://riskmap.filkor.org/) And I don't really know why... I don't see this performance loss with the older versions of kineticjs. (only on Firefox. With Chrome everything is ok)  \n. Okay I solved it. \nThanks for that lab link, it really helped a lot.\n\nI had to insert a 'topLayer' and move between this layer and the 'mapLayer'. \nNow Firefox and Chrome are both superfast, thanks again, I need to learn more about KineticJS next time before I write here..and yeah, it was a drawing issue.\n\nOh and I see you already put the link on the kineticjs homepage. \nI wrote a short tut how I made this custom interactive map, because I tend to forget these things soon, so if anyone interested: http://dev.filkor.org/2013/04/14/create-an-interactive-map-using-javascript-and-html-5-canvas/\n. ",
    "roycehaynes": "Yes. Im using inside a backbone view, but the div#Frame exists in the base template.\n\u2014\nSent on the go\n\nOn Sun, Apr 14, 2013 at 8:29 AM, Eric Rowell notifications@github.com\nwrote:\n\n> ## do you have a div id = \"Frame\" ?\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/ericdrowell/KineticJS/issues/393#issuecomment-16351899\n. Yes, it executes after the DOM. The issue has passed, and now it spits on an TypeError. Thoughts? \n\n![Screen Shot 2013-04-17 at 5 24 18 PM](https://f.cloud.github.com/assets/463577/394259/f345de06-a7b5-11e2-9c60-68ac51f900a0.png)\n. Yes. Im using inside a backbone view, but the div#Frame exists in the base template.\n\u2014\nSent on the go\n\nOn Sun, Apr 14, 2013 at 8:29 AM, Eric Rowell notifications@github.com\nwrote:\n\n> ## do you have a div id = \"Frame\" ?\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/ericdrowell/KineticJS/issues/393#issuecomment-16351899\n. Yes, it executes after the DOM. The issue has passed, and now it spits on an TypeError. Thoughts? \n\n![Screen Shot 2013-04-17 at 5 24 18 PM](https://f.cloud.github.com/assets/463577/394259/f345de06-a7b5-11e2-9c60-68ac51f900a0.png)\n. ",
    "JeroenJSmit": "That sounds great, thank you.\n\nIs explicitely deleting the image within a Kinetic.Image also something that would fit in the core code or do I need to implement it myself for quicker garbage collection.\n. Super, thank you!\n\nBest regards,\nJeroen\n\nFrom: Eric Rowell [mailto:notifications@github.com]\nSent: Friday, June 07, 2013 7:52 AM\nTo: ericdrowell/KineticJS\nCc: Jeroen Smit\nSubject: Re: [KineticJS] Kinetic.Group doesn't remove its children when it is removed (#395)\n\nThis issue has been fixed as of v4.5.4. It will be released this weekend. Thanks!!\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/395#issuecomment-19090208.\n. I forgot to add that when I reset the parent for all images before the call to destroyChildren (              child.parent = null) it takes no time at all so I guess the time is spent in the remove procedure where after every child is removed all child index properties are updated.\n. Notices I forgot to include that last implementation I mentioned:\n\n```\n    destroyChildren: function() {\n        var children = Kinetic.Collection.toCollection(this.children);\n        var child;\n        for (var i = 0; i < children.length; i++) {\n            child = children[i];\n            child.parent = null;\n            child.index = 0;\n            child.destroy();\n        }\n        children = null;\n        this.children = new Kinetic.Collection();\n        return this;\n    },\n```\n. That sounds great, thank you.\n\nIs explicitely deleting the image within a Kinetic.Image also something that would fit in the core code or do I need to implement it myself for quicker garbage collection.\n. Super, thank you!\n\nBest regards,\nJeroen\n\nFrom: Eric Rowell [mailto:notifications@github.com]\nSent: Friday, June 07, 2013 7:52 AM\nTo: ericdrowell/KineticJS\nCc: Jeroen Smit\nSubject: Re: [KineticJS] Kinetic.Group doesn't remove its children when it is removed (#395)\n\nThis issue has been fixed as of v4.5.4. It will be released this weekend. Thanks!!\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/395#issuecomment-19090208.\n. I forgot to add that when I reset the parent for all images before the call to destroyChildren (              child.parent = null) it takes no time at all so I guess the time is spent in the remove procedure where after every child is removed all child index properties are updated.\n. Notices I forgot to include that last implementation I mentioned:\n\n```\n    destroyChildren: function() {\n        var children = Kinetic.Collection.toCollection(this.children);\n        var child;\n        for (var i = 0; i < children.length; i++) {\n            child = children[i];\n            child.parent = null;\n            child.index = 0;\n            child.destroy();\n        }\n        children = null;\n        this.children = new Kinetic.Collection();\n        return this;\n    },\n```\n. ",
    "mrs99mrs99": "I'd think that the for statement would have to have another semicolon and a closing parenthsis\n\nlike\n\nfor(var d=0;d0; )\n. thanks.  I was drawing the with the wrong object; textobject instead of layer object.\n\nThanks so much\n. Not quite sure what you mean.  here is the code:\n\nclass Navigation\n{\n    constructor()\n    {\n\n```\n}\n```\n. Not quite sure what you mean. Where would I put that = this?  here is the code:\n\nclass Navigation\n {\n    myOtherClass: MyOtherClass;\n\n  constructor(myOtherClass)\n  {\n      this.myOtherClass = myOtherClass;\n      this.wireEvents();\n  }\n\n  wireEvents()\n  {\n        this.buttonPrevious.on(\"click\", function(): void {\n\n```\n            this.myOtherClass.myFunction();\n    });\n```\n\n  }\n}\n. I'd think that the for statement would have to have another semicolon and a closing parenthsis\n\nlike\n\nfor(var d=0;d0; )\n. thanks.  I was drawing the with the wrong object; textobject instead of layer object.\n\nThanks so much\n. Not quite sure what you mean.  here is the code:\n\nclass Navigation\n{\n    constructor()\n    {\n\n```\n}\n```\n. Not quite sure what you mean. Where would I put that = this?  here is the code:\n\nclass Navigation\n {\n    myOtherClass: MyOtherClass;\n\n  constructor(myOtherClass)\n  {\n      this.myOtherClass = myOtherClass;\n      this.wireEvents();\n  }\n\n  wireEvents()\n  {\n        this.buttonPrevious.on(\"click\", function(): void {\n\n```\n            this.myOtherClass.myFunction();\n    });\n```\n\n  }\n}\n. ",
    "Corandy": "Thanks for the fast reply, I have Discovered that it worked properly on the earlier versions where 2 different things weren't combined yet. It's a huge lap of code. I will investigate a little more for a more specific information.\n. @ericdrowell When I use fill: 'white' instead of\n\n```\n                                    fillRadialGradientStartPoint: 0,\n                fillRadialGradientStartRadius: 0,\n                fillRadialGradientEndPoint: 0,\n                fillRadialGradientEndRadius: 800,\n                fillRadialGradientColorStops: [0, '#262834', 1, '0f1114'],\n```\n\nThat is placed in 'background' Rect that scales with the browserheight I got no erros in IE 10, 9 and FF.\n\nBut why is it happen only with fillRadialGradient and only in IE and FF? It has a connection with the error I mentioned before:\n\n h.addColorStop(g[i],g[i+1])\non kineticJS.js, line 28 character 7356\n\nWhat it makes more strange is that I have another object with radialgradientfill which works fine in FF and IE.\n\nvar lichtrondje = new Kinetic.Circle({\n                  x: 0,\n                  y: 0,\n                  radius: 90,\n                  fillRadialGradientStartPoint: 0,\n                  fillRadialGradientStartRadius: 0,\n                  fillRadialGradientEndPoint: 0,\n                  fillRadialGradientEndRadius: 90,\n                  fillRadialGradientColorStops: [0, '#DDD', 1, 'rgba(0,0,0, 0.0)'],\n                  opacity: 1,\n                  id: 'lichtrondje' + x,\n                  name: 'lichtrondje'\n            });\n\nI have found out that the result looks different between the Chrome version and the FF and IE version. The right one is what its intended.\n\n![error](https://f.cloud.github.com/assets/3442878/409635/8daa9580-ab59-11e2-847f-64f42b01a85d.jpg)\n. The bug was that i forgot to have a '#' sign in the fillRadialGradientColorStops array.\nChrome was less strict in it (making it more confusing) Thanks Eric for the help on stackoverflow!\n. Everything worked when you save the objects within a group object instead of a layer\n. I got the same issue that the circle is displayed as rectangle. Strangely I have this only on my last project and not my previous which both uses the latest KineticJS. I have debugged and I am pretty sure I haven't made mistakes. I use 64-bit Windows 8 with chrome.\n\nOw now I have updated to the latest (27.0.1453.94) it's working perfectly again!\n. I have posted that I didn't had issues anymore with the Chrome (27.0.1453.94) version but now my circles are rectangles again :/ Strangely 2 other projects with the same latest KineticJS works still perfectly on the (27.0.1453.94) Chrome version\n. No, It did also occur on Windows 8 64bit Chrome. But now again it works fine and when it previous did happen it didn't happen on all my projects with my latest KineticJS version. \n. Thanks for the fast reply, I have Discovered that it worked properly on the earlier versions where 2 different things weren't combined yet. It's a huge lap of code. I will investigate a little more for a more specific information.\n. @ericdrowell When I use fill: 'white' instead of\n\n```\n                                    fillRadialGradientStartPoint: 0,\n                fillRadialGradientStartRadius: 0,\n                fillRadialGradientEndPoint: 0,\n                fillRadialGradientEndRadius: 800,\n                fillRadialGradientColorStops: [0, '#262834', 1, '0f1114'],\n```\n\nThat is placed in 'background' Rect that scales with the browserheight I got no erros in IE 10, 9 and FF.\n\nBut why is it happen only with fillRadialGradient and only in IE and FF? It has a connection with the error I mentioned before:\n\n h.addColorStop(g[i],g[i+1])\non kineticJS.js, line 28 character 7356\n\nWhat it makes more strange is that I have another object with radialgradientfill which works fine in FF and IE.\n\nvar lichtrondje = new Kinetic.Circle({\n                  x: 0,\n                  y: 0,\n                  radius: 90,\n                  fillRadialGradientStartPoint: 0,\n                  fillRadialGradientStartRadius: 0,\n                  fillRadialGradientEndPoint: 0,\n                  fillRadialGradientEndRadius: 90,\n                  fillRadialGradientColorStops: [0, '#DDD', 1, 'rgba(0,0,0, 0.0)'],\n                  opacity: 1,\n                  id: 'lichtrondje' + x,\n                  name: 'lichtrondje'\n            });\n\nI have found out that the result looks different between the Chrome version and the FF and IE version. The right one is what its intended.\n\n![error](https://f.cloud.github.com/assets/3442878/409635/8daa9580-ab59-11e2-847f-64f42b01a85d.jpg)\n. The bug was that i forgot to have a '#' sign in the fillRadialGradientColorStops array.\nChrome was less strict in it (making it more confusing) Thanks Eric for the help on stackoverflow!\n. Everything worked when you save the objects within a group object instead of a layer\n. I got the same issue that the circle is displayed as rectangle. Strangely I have this only on my last project and not my previous which both uses the latest KineticJS. I have debugged and I am pretty sure I haven't made mistakes. I use 64-bit Windows 8 with chrome.\n\nOw now I have updated to the latest (27.0.1453.94) it's working perfectly again!\n. I have posted that I didn't had issues anymore with the Chrome (27.0.1453.94) version but now my circles are rectangles again :/ Strangely 2 other projects with the same latest KineticJS works still perfectly on the (27.0.1453.94) Chrome version\n. No, It did also occur on Windows 8 64bit Chrome. But now again it works fine and when it previous did happen it didn't happen on all my projects with my latest KineticJS version. \n. ",
    "pamba": "I am using 4.3.3 due this issue as well and would love use the latest version. :(\n. I am using 4.3.3 due this issue as well and would love use the latest version. :(\n. ",
    "markcallen": "Having the same problem with large number of layers in 4.6.0, have reverted to 4.3.3 as well.\n. Having the same problem with large number of layers in 4.6.0, have reverted to 4.3.3 as well.\n. ",
    "mefhisto": "You're welcome. I've just noticed that ImageObject for Kinetic.Image is not serialized either.\n. Yes, it's quite clear, but how about holding src attribute of this image, so later on it can load automatically with new Image object with this src attribute? That's what i was holding in my mind about this.\n. You're welcome. I've just noticed that ImageObject for Kinetic.Image is not serialized either.\n. Yes, it's quite clear, but how about holding src attribute of this image, so later on it can load automatically with new Image object with this src attribute? That's what i was holding in my mind about this.\n. ",
    "gsouf": "I used the button \"custom build\" on the home yesterday. So i think so.\n\nHere is my custom build : Canvas=on&Collection=on&Container=on&Global=on&Group=on&Layer=on&Node=on&Shape=on&Stage=on&Transform=on&Type=on&Rect=on&Text=on&Line=on&Label=on\n\nI tryed the same code by replacing my custom build by the full lib. Error doesnt happens with full lib.\n. Ok if you leave me give you a advice, I would recommand to throw an error when layer is added into a layer !  Because basically it works. Shapes are renderred.\n\nBy the way thanks\n. I used the button \"custom build\" on the home yesterday. So i think so.\n\nHere is my custom build : Canvas=on&Collection=on&Container=on&Global=on&Group=on&Layer=on&Node=on&Shape=on&Stage=on&Transform=on&Type=on&Rect=on&Text=on&Line=on&Label=on\n\nI tryed the same code by replacing my custom build by the full lib. Error doesnt happens with full lib.\n. Ok if you leave me give you a advice, I would recommand to throw an error when layer is added into a layer !  Because basically it works. Shapes are renderred.\n\nBy the way thanks\n. ",
    "dwhipps": "Eric,\n\nNo sweat. KineticJS is fantastic. Thanks you for creating it. Keep up the great work.\n- Dave\n. Eric,\n\nNo sweat. KineticJS is fantastic. Thanks you for creating it. Keep up the great work.\n- Dave\n. ",
    "jthrilly": "@ericdrowell: is there a roadmap for when this will be supported? Many of us are using Kinetic to create complex interfaces, where multi-touch is essential. \n. This is working really well on my application too...thanks for the great feature! If I could suggest an improvement, it would be to also use this drag distance threshold within dragmove events. This way, when the user holds an object in the 'same' place (+/- the threshold), the object does not visibly jitter on the screen. \n. Would this enable simultaneous events on different objects (for example, dragging two nodes at once)?\n. @ericdrowell: is there a roadmap for when this will be supported? Many of us are using Kinetic to create complex interfaces, where multi-touch is essential. \n. This is working really well on my application too...thanks for the great feature! If I could suggest an improvement, it would be to also use this drag distance threshold within dragmove events. This way, when the user holds an object in the 'same' place (+/- the threshold), the object does not visibly jitter on the screen. \n. Would this enable simultaneous events on different objects (for example, dragging two nodes at once)?\n. ",
    "austinhappel": "FYI this issue still persists in v4.5.1. \n\nSince I was not thinking and didn't search the github issues first, I wrote my own fiddle that's essentially the same as what kkokus supplied. So as to not let those precious bits go to waste, I present you my fiddle: http://jsfiddle.net/austinhappel/s797n/\n\nIn the meantime I'll implement the workaround, but it would be nice to get a better fix. Thanks much!\n\n**UPDATE**: \n\nAlso, this issue affects the .clone() method as well. My workaround in this case is to:\n1. delete the attrs.visible property from the layer being cloned\n2. clone the layer\n3. run setVisible() method on the layer to re-set the visible attr.\n\nMy fiddle has been updated to demonstrate how steps 1 & 2 fix the issue.\n. FYI this issue still persists in v4.5.1. \n\nSince I was not thinking and didn't search the github issues first, I wrote my own fiddle that's essentially the same as what kkokus supplied. So as to not let those precious bits go to waste, I present you my fiddle: http://jsfiddle.net/austinhappel/s797n/\n\nIn the meantime I'll implement the workaround, but it would be nice to get a better fix. Thanks much!\n\n**UPDATE**: \n\nAlso, this issue affects the .clone() method as well. My workaround in this case is to:\n1. delete the attrs.visible property from the layer being cloned\n2. clone the layer\n3. run setVisible() method on the layer to re-set the visible attr.\n\nMy fiddle has been updated to demonstrate how steps 1 & 2 fix the issue.\n. ",
    "kkokus": "Waiting for the fix to come. In the meantime I just wanted to say thx for such a great framework. I'm using it for a project at my university where our team is developing an interactive map web application for people to find university buildings and rooms inside them. It's in German but if anybody is interessted to see: https://navigator.tu-dresden.de/\n. Waiting for the fix to come. In the meantime I just wanted to say thx for such a great framework. I'm using it for a project at my university where our team is developing an interactive map web application for people to find university buildings and rooms inside them. It's in German but if anybody is interessted to see: https://navigator.tu-dresden.de/\n. ",
    "bencao": "Also I found calling \"layer.transitionTo({visible: true})\" can show the Text and Rect, but now I can't hide the layer.\nText and Rect will always show there when I switch to other layers.\n. Also I found calling \"layer.transitionTo({visible: true})\" can show the Text and Rect, but now I can't hide the layer.\nText and Rect will always show there when I switch to other layers.\n. ",
    "solitud": "No, it's not the iPhone in my case. I can create Canvas the old school way without KineticJS that exceed the 1310580 Pixel Limit and it will be displayed on iPad/iPhone.\n\nI am wondering nobody else has this issue? I know my canvas is big but not HUGE.\nMy project has to deal with dynamically sized canvas based on user created images, so my workaround for now is to crop them.\n\nNonetheless I love KineticJS for the ease of use. I never would be able to deal with all the dragndrop without the framework, so thank you Eric for creating it!\n\nBTW: this is my project:\nhttp://modulargrid.net/e/patches/view/92\n. I disable the shadows on dragstart and enable them later on dragend. It works pretty well on desktop browsers.\nBut the problem on iOS is not a bad performance... there isn't ANY performance at all because nothing is displayed (white screen) if the Stage exceeds the magic ca. 1310580 pixels barrier...\nI appreciate the link and of course your awesome work!\n. To make things clearer I have created a simple  jsFiddle which draws a Circle with and without KineticJS.\nThis Test fails on iOS devices.\nFind it here:\nhttp://jsfiddle.net/solitud/ajzhG/\n. I think you guys nailed it. Im using a custom build of KineticJS 4.5.4 and adapted Elliots Gist.\nCanvas is now properly rendered on iOS Devices. I experienced some browser crashes on iPhone on very large Canvases, but overall it works like a charm! This should make it in the main distribution. \nReally appreciate it, thanks a ton!\n. No, it's not the iPhone in my case. I can create Canvas the old school way without KineticJS that exceed the 1310580 Pixel Limit and it will be displayed on iPad/iPhone.\n\nI am wondering nobody else has this issue? I know my canvas is big but not HUGE.\nMy project has to deal with dynamically sized canvas based on user created images, so my workaround for now is to crop them.\n\nNonetheless I love KineticJS for the ease of use. I never would be able to deal with all the dragndrop without the framework, so thank you Eric for creating it!\n\nBTW: this is my project:\nhttp://modulargrid.net/e/patches/view/92\n. I disable the shadows on dragstart and enable them later on dragend. It works pretty well on desktop browsers.\nBut the problem on iOS is not a bad performance... there isn't ANY performance at all because nothing is displayed (white screen) if the Stage exceeds the magic ca. 1310580 pixels barrier...\nI appreciate the link and of course your awesome work!\n. To make things clearer I have created a simple  jsFiddle which draws a Circle with and without KineticJS.\nThis Test fails on iOS devices.\nFind it here:\nhttp://jsfiddle.net/solitud/ajzhG/\n. I think you guys nailed it. Im using a custom build of KineticJS 4.5.4 and adapted Elliots Gist.\nCanvas is now properly rendered on iOS Devices. I experienced some browser crashes on iPhone on very large Canvases, but overall it works like a charm! This should make it in the main distribution. \nReally appreciate it, thanks a ton!\n. ",
    "felipehaack": "Hello... i have the same problem, thanks for Solitud's exemplo... I used kinectjs version 4.5.3 in the ios 6.1.3 but test fail, now I change the version to kinectjs 4.0.3 and it's make fine :)\n. Hello... After I try a lot of \"solution\" to fix duplicate canvas with kineticjs, like:\n\n1 - Set all parent's div to overflow: visible; Fail\n2 - Set all parent's div to position: relative; Fail\n3 - Set canvas to position: relative; Fail\n4 - setInterval of the 0 or 1ms with the function that transform canvas opacity between 0.99 and 1; Fail\n5 - setTimeout 50ms; Fail\n6 - more and more...\n\nWell, I go to my android code and change the sequence of my set webview and settings and it's work, I don't know why, but it's work :)\n\nwebView = (WebView) findViewById(R.id.webView);\nwebView.getSettings().setJavaScriptEnabled(true);\nwebView.getSettings().setAllowFileAccess(true);\nwebView.getSettings().setLoadWithOverviewMode(true);\nwebView.getSettings().setUseWideViewPort(true);\nwebView.getSettings().setSupportZoom(false);\nwebview.setBackgroundColor(Color.TRANSPARENT);\nwebView.setWebChromeClient(new WebChromeClient());\nwebView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);\n\nif(savedInstanceState == null)\n    webView.loadUrl(\"file:///android_asset/index.html\");\n\nGood luck (\\- _ - )/\n. Just desktop browser, safari mobile browser (safari webview work too) it work fine. I tried Chrome and default browser in the Android 4.+ and sometimes the canvas is duplicate or it doesn't draw. Of course, it happen with webview android...\n. Thanks so much for you help, but, it doesn't work :/ ... I'll try to change the webview settings. \nPs: I tried with chrome mobile an default browser android 4.+, and with this examples the canvas draw, but, the duplicate canvas still happening. With android webview doesn't happen the duplicate canvas, but, it's doesn't draw, like I say 2 successes against 15 losses.\n. Hello... i have the same problem, thanks for Solitud's exemplo... I used kinectjs version 4.5.3 in the ios 6.1.3 but test fail, now I change the version to kinectjs 4.0.3 and it's make fine :)\n. Hello... After I try a lot of \"solution\" to fix duplicate canvas with kineticjs, like:\n\n1 - Set all parent's div to overflow: visible; Fail\n2 - Set all parent's div to position: relative; Fail\n3 - Set canvas to position: relative; Fail\n4 - setInterval of the 0 or 1ms with the function that transform canvas opacity between 0.99 and 1; Fail\n5 - setTimeout 50ms; Fail\n6 - more and more...\n\nWell, I go to my android code and change the sequence of my set webview and settings and it's work, I don't know why, but it's work :)\n\nwebView = (WebView) findViewById(R.id.webView);\nwebView.getSettings().setJavaScriptEnabled(true);\nwebView.getSettings().setAllowFileAccess(true);\nwebView.getSettings().setLoadWithOverviewMode(true);\nwebView.getSettings().setUseWideViewPort(true);\nwebView.getSettings().setSupportZoom(false);\nwebview.setBackgroundColor(Color.TRANSPARENT);\nwebView.setWebChromeClient(new WebChromeClient());\nwebView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);\n\nif(savedInstanceState == null)\n    webView.loadUrl(\"file:///android_asset/index.html\");\n\nGood luck (\\- _ - )/\n. Just desktop browser, safari mobile browser (safari webview work too) it work fine. I tried Chrome and default browser in the Android 4.+ and sometimes the canvas is duplicate or it doesn't draw. Of course, it happen with webview android...\n. Thanks so much for you help, but, it doesn't work :/ ... I'll try to change the webview settings. \nPs: I tried with chrome mobile an default browser android 4.+, and with this examples the canvas draw, but, the duplicate canvas still happening. With android webview doesn't happen the duplicate canvas, but, it's doesn't draw, like I say 2 successes against 15 losses.\n. ",
    "Max-Wong": "Hi, solitud, I have encountered this problem too. My kinectjs version is v4.5.5 and run in my iPhone 4s, ios 6.1.3.\nAnd I've found a way to solve this problem temporarily:\n1. download the source file(not the .min file) from KineticJs.com\n2. replace \"_pixelRatio = devicePixelRatio / backingStoreRatio;\" as \"_pixelRatio = 1\".\n(OR replace \"e=c/d\" as \"e=1\" in kinetic-v4.5.5.min.js)\n\nActually, the issue caused by this segment:\n![image](https://f.cloud.github.com/assets/5156021/906126/1bff886e-fc71-11e2-9e0c-f18593750caf.png)\n\nThis code may help us for zooming the canvas to the best ratio automatically, but when our backingStoreRatio is too big, as you said, 1310580 pixels is the barrier, _pixelRatio might be zero. So, our browser wouldn't render any thing.\n. Hi, solitud, I have encountered this problem too. My kinectjs version is v4.5.5 and run in my iPhone 4s, ios 6.1.3.\nAnd I've found a way to solve this problem temporarily:\n1. download the source file(not the .min file) from KineticJs.com\n2. replace \"_pixelRatio = devicePixelRatio / backingStoreRatio;\" as \"_pixelRatio = 1\".\n(OR replace \"e=c/d\" as \"e=1\" in kinetic-v4.5.5.min.js)\n\nActually, the issue caused by this segment:\n![image](https://f.cloud.github.com/assets/5156021/906126/1bff886e-fc71-11e2-9e0c-f18593750caf.png)\n\nThis code may help us for zooming the canvas to the best ratio automatically, but when our backingStoreRatio is too big, as you said, 1310580 pixels is the barrier, _pixelRatio might be zero. So, our browser wouldn't render any thing.\n. ",
    "ElliotChong": "I've created a Gist that overwrites KineticJS's automatic pixel ratio detection without having to edit the source (so you could use the minified version if you prefer and be upgrade-proofed until the API changes.) Thought you might find it helpful!\n\nhttps://gist.github.com/ElliotChong/6107722\n. +1 - My application's logic has also been affected by this change.\n\nI'd argue that the original way that it was working was correct, a mouseout event should be fired by the node before another node fires its mouseover event.\n\nNow the new node is in a mouseover state before the original node reaches its mouseout state.\n\nMany thanks for the awesome library and ongoing support Eric!\n. This is how Photoshop treats a stroke and why I had expected the behavior shown above:\n![image](https://f.cloud.github.com/assets/270706/956317/124b49bc-043b-11e3-9eb6-fe0762fcb9ed.png)\n\n![image](https://f.cloud.github.com/assets/270706/956322/33067866-043b-11e3-9899-0737f8cdff5f.png)\n\nAnyways, thanks for the awesome library!\n. Actually, the real issue is the stroke position... Switching from Outside to Center produces the Kinetic-style stroking.\n\n![image](https://f.cloud.github.com/assets/270706/956346/abdc4d42-043b-11e3-8dce-99ebbe988e82.png)\n\nFrom a quick search, it appears that canvas only supports drawing with a 'center' positioned stroke.\n. I've created a Gist that overwrites KineticJS's automatic pixel ratio detection without having to edit the source (so you could use the minified version if you prefer and be upgrade-proofed until the API changes.) Thought you might find it helpful!\n\nhttps://gist.github.com/ElliotChong/6107722\n. +1 - My application's logic has also been affected by this change.\n\nI'd argue that the original way that it was working was correct, a mouseout event should be fired by the node before another node fires its mouseover event.\n\nNow the new node is in a mouseover state before the original node reaches its mouseout state.\n\nMany thanks for the awesome library and ongoing support Eric!\n. This is how Photoshop treats a stroke and why I had expected the behavior shown above:\n![image](https://f.cloud.github.com/assets/270706/956317/124b49bc-043b-11e3-9eb6-fe0762fcb9ed.png)\n\n![image](https://f.cloud.github.com/assets/270706/956322/33067866-043b-11e3-9899-0737f8cdff5f.png)\n\nAnyways, thanks for the awesome library!\n. Actually, the real issue is the stroke position... Switching from Outside to Center produces the Kinetic-style stroking.\n\n![image](https://f.cloud.github.com/assets/270706/956346/abdc4d42-043b-11e3-8dce-99ebbe988e82.png)\n\nFrom a quick search, it appears that canvas only supports drawing with a 'center' positioned stroke.\n. ",
    "valeroAlbatera": "Sorry, Im using kinetics 4.7.2 and Elliots Gist...and my problem with iphone5 is not solved!! Any help, please?\n. Sorry...Im having the same problem...any idea how fix finally the problem in iphone 5 or ios 7?? \n\nthanks!\n. Hi ericdrowell, I see that there are a new version 4.7.4 for kinetics, this version solves the problem with canvas ios6 & ios 7 ?? \nRegards\n. I have the same problem...when I add a image in a canvas image with kinetics...my image is squashed in iphone 5\n. Any help?\n. Hi, thanks for your answer!!\nIm novice in programming also more with kinetics, I cant overrride methods because It is so difficult for me.\nI achieved to fix the problem with the squash canvas image with this:\nfunction detectVerticalSquash(img) {                    var iw = img.naturalWidth, ih = img.naturalHeight;                    var canvas = document.createElement('canvas');                    canvas.width = 1;                    canvas.height = ih;                    var ctx = canvas.getContext('2d');                    ctx.drawImage(img, 0, 0);                    var data = ctx.getImageData(0, 0, 1, ih).data;                    // search image edge pixel position in case it is squashed vertically.                    var sy = 0;                    var ey = ih;                    var py = ih;                    while (py > sy) {                        var alpha = data[(py - 1) \\* 4 + 3];                        if (alpha === 0) {                            ey = py;                        } else {                            sy = py;                        }                        py = (ey + sy) >> 1;                    }                    var ratio = (py / ih);                    return (ratio===0)?1:ratio;                }var verticalSquashRatio = detectVerticalSquash(img);var testHeight = 332.598425197 / verticalSquashRatio;\nvar image1 = new Kinetic.Image({                                    x: 9,                                   y: 8,                                   width: 238.11023622,                                    height: testHeight,                                 name: \"image\",                                  image:img,                                  crop: [getX, getY, getWidth, getHeight]                             });\n\nBut....When I add text to the canvas image I have also the same problems and I dont know how fix....it is strange!!\nThanks&Regards!!\n\nDate: Sun, 3 Nov 2013 16:48:53 -0800\nFrom: notifications@github.com\nTo: KineticJS@noreply.github.com\nCC: valero_albatera@hotmail.com\nSubject: Re: [KineticJS] Fix Issue Where Large Images Get Vertically Squashed In iOS6 & iOS7 (#654)\n\nI'll take a look at this when I can.  The right way to go is to to do something like this in Kinetic.Image:\n\nif (Kinetic.UA.browser === 'ios') {\n\n  // override some methods\n\n}\n\nthis way the logic is only executed once, when KineticJS is first setup\n\n\u2014\nReply to this email directly or view it on GitHub.                    \n. Sorry ericdrowell, do you know when the problems with ios7 should be fix?? Thanks\n. Amm...Ok. ericdrowell...more or less the day? do you have a beta version? Im working in a personal project and I need it to finish and fix the problem with ios7 !! x(\n\nKind Regards\n. Hi ericdrowell, I see that there are not any solution for ios problem in v5.0.0 ? We have to wait until March? \n. Sorry, Im using kinetics 4.7.2 and Elliots Gist...and my problem with iphone5 is not solved!! Any help, please?\n. Sorry...Im having the same problem...any idea how fix finally the problem in iphone 5 or ios 7?? \n\nthanks!\n. Hi ericdrowell, I see that there are a new version 4.7.4 for kinetics, this version solves the problem with canvas ios6 & ios 7 ?? \nRegards\n. I have the same problem...when I add a image in a canvas image with kinetics...my image is squashed in iphone 5\n. Any help?\n. Hi, thanks for your answer!!\nIm novice in programming also more with kinetics, I cant overrride methods because It is so difficult for me.\nI achieved to fix the problem with the squash canvas image with this:\nfunction detectVerticalSquash(img) {                    var iw = img.naturalWidth, ih = img.naturalHeight;                    var canvas = document.createElement('canvas');                    canvas.width = 1;                    canvas.height = ih;                    var ctx = canvas.getContext('2d');                    ctx.drawImage(img, 0, 0);                    var data = ctx.getImageData(0, 0, 1, ih).data;                    // search image edge pixel position in case it is squashed vertically.                    var sy = 0;                    var ey = ih;                    var py = ih;                    while (py > sy) {                        var alpha = data[(py - 1) \\* 4 + 3];                        if (alpha === 0) {                            ey = py;                        } else {                            sy = py;                        }                        py = (ey + sy) >> 1;                    }                    var ratio = (py / ih);                    return (ratio===0)?1:ratio;                }var verticalSquashRatio = detectVerticalSquash(img);var testHeight = 332.598425197 / verticalSquashRatio;\nvar image1 = new Kinetic.Image({                                    x: 9,                                   y: 8,                                   width: 238.11023622,                                    height: testHeight,                                 name: \"image\",                                  image:img,                                  crop: [getX, getY, getWidth, getHeight]                             });\n\nBut....When I add text to the canvas image I have also the same problems and I dont know how fix....it is strange!!\nThanks&Regards!!\n\nDate: Sun, 3 Nov 2013 16:48:53 -0800\nFrom: notifications@github.com\nTo: KineticJS@noreply.github.com\nCC: valero_albatera@hotmail.com\nSubject: Re: [KineticJS] Fix Issue Where Large Images Get Vertically Squashed In iOS6 & iOS7 (#654)\n\nI'll take a look at this when I can.  The right way to go is to to do something like this in Kinetic.Image:\n\nif (Kinetic.UA.browser === 'ios') {\n\n  // override some methods\n\n}\n\nthis way the logic is only executed once, when KineticJS is first setup\n\n\u2014\nReply to this email directly or view it on GitHub.                    \n. Sorry ericdrowell, do you know when the problems with ios7 should be fix?? Thanks\n. Amm...Ok. ericdrowell...more or less the day? do you have a beta version? Im working in a personal project and I need it to finish and fix the problem with ios7 !! x(\n\nKind Regards\n. Hi ericdrowell, I see that there are not any solution for ios problem in v5.0.0 ? We have to wait until March? \n. ",
    "rajmohanperiyasamy": "Thank you so much guys...Bcz of you all, i have saved my time lot...I was facing the issue that canvas size gets doubled in ipad and i phones series when i was using kineticjs v4.4.1...later i updated from v4.4.1 to v4.4.3...Now everything works fine...\n. Thank you so much guys...Bcz of you all, i have saved my time lot...I was facing the issue that canvas size gets doubled in ipad and i phones series when i was using kineticjs v4.4.1...later i updated from v4.4.1 to v4.4.3...Now everything works fine...\n. ",
    "bethanyhub": "Hi Eric, Has this issue been addressed? I have an app that has the same image object being uploaded multiple times with a different src, each on a new layer.  When I destroy layers I freeze the browser.  I'm sure there's a better way I could do it but I'm a noob and surprised I got this far. Thanks!\n. Quick response! Thanks Eric, I was actually running into the browser crash on removeChildren() and thought it was related to this issue, but I don't think it is.  I've been playing around with a few things and just one layer.destroy(); cleared my stage of many layers. I think it's because I keep adding the same layer variable with the same image variable- but with a different source each time. So when I destroy 'layer' it's getting them all, I think.\n\n```\n    layer.add(mynewphotoGroup); \n    stage.add(layer);\n```\n\nBTW I absolutely love kinetic.js, I have no idea how I would have done my app without it!\n. Thank you so much! It works!!\n. Hi Eric, Has this issue been addressed? I have an app that has the same image object being uploaded multiple times with a different src, each on a new layer.  When I destroy layers I freeze the browser.  I'm sure there's a better way I could do it but I'm a noob and surprised I got this far. Thanks!\n. Quick response! Thanks Eric, I was actually running into the browser crash on removeChildren() and thought it was related to this issue, but I don't think it is.  I've been playing around with a few things and just one layer.destroy(); cleared my stage of many layers. I think it's because I keep adding the same layer variable with the same image variable- but with a different source each time. So when I destroy 'layer' it's getting them all, I think.\n\n```\n    layer.add(mynewphotoGroup); \n    stage.add(layer);\n```\n\nBTW I absolutely love kinetic.js, I have no idea how I would have done my app without it!\n. Thank you so much! It works!!\n. ",
    "akuma": "This is very helpful for me. Thanks.\n. Will this modification be merged to master?\n. It's a chrome bug. In chrome 28.0.1500.95 is good.\n. This is very helpful for me. Thanks.\n. Will this modification be merged to master?\n. It's a chrome bug. In chrome 28.0.1500.95 is good.\n. ",
    "ippo615": "Thanks! I merged the code from #527 which seemed like the same issue. It's in commit 8b7b3db9ef.\n. The filtered image was being drawn in a temporary canvas where it was\npreviously drawn. With each draw, the alpha-values of the image increased\nuntil they hit 255 (effectively removing the alpha channel).\n\nTo fix it: I created a clear canvas each time the filter is applied. This fix\nshould be in the latest commit.\n. That was my first attempt - I used something like `context.clearRect(0,0,width,height)` but it didn't fix the problem. Perhaps I put that code in the wrong spot...\n. 1) Yes. That happens because the convolution matrix is looking for pixels that are past the edge of the image. I should either make it \"tile-able\" or just extend those edge pixels. I wasn't sure which would be more appropriate. Perhaps a 'filterIsTileable' flag to determine which the user wants?\n\n2) Ah, I didn't realize Brighten could do that. That sounds like a better option (and probably faster) than mine.\n\n3) Yes I could change that to ConvolutePack and similar for ColorPack. Would it be desirable to break them down further? or would that require a different file structure and too much repetitive code? About the verb naming convention: I was trying to name them verbs but didn't do a good job (shoulda got a thesaurus :-), I'd love to hear your suggestions.\n\n4) That's awesome! I'll work on restructuring those filters so that they are tweenable with 0 meaning no effect and 100 being the max. Is [0-100] the range you've been using (with negatives allowed when appropriate)?\n\n5) The my blur function should be the same as the existing Blur filter. My \"soft blur\" is slightly different than a \"regular\" blur. A soft blur first blurs the image then blends it with the unblurred image. I handle a soft blur as 1 operation, if we implemented it with the existing filter it would take blurring time + blending time which I'm guessing would be a bit slower than mine. I think mine is easier to maintain and would keep the files smaller but I don't know which performs better.\n\nI think KineticJS is an awesome project and I'm happy to help out! I'll try to work on these but probably won't get to it anything until Tuesday night so if you want to start some edits or send more suggestions that's cool.\n. Thanks!\n. Hi! Sorry, I didn't see any message about joining the KineticJS team but I'd like to talk with you about it. I put my personal email address in my profile so you can contact me using that address.\n. Thanks!\n. I'm not sure what your goal is but here are some things I noticed.\n\nIn http://jsfiddle.net/SLrTj/2/ in line 77 in the JavaScript you have `PageListS[0]`. I think you want `pageListS[0]` (lower case `p` at the beginning).\n\nCheck out Mozilla's Array documentation for using two-dimensional arrays:\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array\n\nThe section on 2d arrays in near the end but basically, I think you want something like:\n\n```\n// Create an array of 2 arrays\npageList = [[],[]];\n// Access the 3rd element of the 0th array\npageList[0][3] \n// As you had:\npageList[0][i] // similar to your pageList[0+i*2]\npageList[1][i] // similar to your pageList[1+i*2]\n```\n. Currently, `textHeight` is the height of an individual character and `lineHeight` is a ratio controlling how tall the line is compared to a character.\n\nFor example a `textHeight` of `16` and a `lineHeight` of `2` gives a line which is `2*16=32` units tall and has characters which are `16` units tall (there will be some space between the lines). A `textHeight` of `12` and a `lineHeight` of `0.5` creates lines 6 units tall with the characters are 12 units tall (ie lines will overlap slightly).\n\nYou can determine how many lines of text you have with `yourStringObj.split('\\n').length` or `kineticTextObj.textArr.length`. You can determine the total height of your block of text by multiplying by both the `lineHeight` and `textHeight`. The following should give you the height of your text block (similar to the width):\n\n```\ntext.getTextHeight()*text.getLineHeight()*text.textArr.length\n```\n\n`text` is your `Kinetic.Text` object.\n. Hi, I think you need to round your stage width like so:\n\n```\n//Defining Stage\nvar stage = new Kinetic.Stage({\n    container : 'container',\n    width : Math.floor(viewportWidth*.75) + 100,\n    height : viewportHeight + 26,\n    name : 'container',\n    id : 'stageWindow'\n});\n```\n\nYou are specifying a canvas to be a fractional number (1366*0.75 = 1024.5) of pixels wide. That fractional part is probably what's making your line blurry. (And make sure your browser's zoom is set to 100%, took me a while to realize 125% zoom makes everything blurry ;-)\n\nClose this if that fixes it for you.\n. Glad you could figure it out!\n. Thanks! It's been merged\n. Hi (nice report)! Instead of removing children, try destroying them:\n\n```\nkLayer.destroyChildren();\n```\n\nWhen I ran your code with `removeChildren()` - my memory usage kept increasing (I managed to push it over 1 gig) however, it was cleared once I closed the tab.\n\nI also ran your code with `destroyChildren()` and my memory usage also increased but it eventually levelled off (around a few 100 mB).\n\nI think we're trying to be conservative with our filter handling code but I'll double check to make sure we haven't overlooked anything.\n. To summarize this: use `kLayer.destroyChildren();` in your code.\n\nThis is what you should expect: If you're clicking the button only occasionally - your memory usage should be effectively constant. However, if you're clicking the button really fast (more than once ever 20 seconds in my tests) the memory usage will rise until you don't click the button for a while. Then it should drop to a level just above where it was when your image didn't have a filter.\n\nReopen or start a new issue if something else bugs you.\n. Thank you! These should be fixed now\n. Don't change the width or height of the DOM image. Use temporary variables to store the width and height of your image, for example:\n\n```\nvar w = img.width;\nvar h = img.height\nif(w > scaleWidth) {\n    h = scaleWidth / (img.width / img.height);\n    w = scaleWidth;\n}\n_userPicImg = new Kinetic.Image({\n    x: 0,\n    y: 0,\n    image: img,\n    name: \"image\",\n    width:w,\n    height:h\n});\n```\n\nCheck it out in this fiddle: http://jsfiddle.net/n2veK/\n. Thanks for doing this!\n. There is no way to apply a filter to a shape; however, I am working on adding support for filters to be applied to layers. You could put all of the shapes you want to filter on one layer and then apply the filter to the layer in the layer's \"draw\" event. NOTE: this is only in the latest version on Github.\n\nYou can look through some of the unit tests for examples of applying a filter to a layer: https://github.com/ericdrowell/KineticJS/tree/master/test/unit/filters \n\nHere's a quick example which pixelates the left half of a layer:\n\n```\nlayer.on('draw', function () {\n  var imageData = this.getContext().getImageData(0, 0, this.getCanvas().width/2, this.getCanvas().height);\n  var scratchData = this.getContext().createImageData(imageData); // only size copied\n  Kinetic.Filters.Pixelate(imageData,scratchData,{pixelWidth:8,pixelHeight:16});\n  this.getContext().putImageData(scratchData,0,0);\n});\n```\n\nLet me know if you have suggestions, feedback or questions. I may not have updated the interface for the particular filter you want to use - let me know which one and I'll move it to the top of my priority list.\n. Could you create a jsfiddle for us? I think there may be a problem where you compute `index` or `midpointX`/`Y`.\n\nYou seem to be adding points the correct way. You can verify that by going to the polygon example: http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-polygon-tutorial/ and then adding this code to the end:\n\n```\nvar points = poly.points();\npoints.splice(6,0,420,36);\npoly.draw();\n```\n. You could call `.removeChildren()` on each layer, then redraw the stage:\n\n```\nlayer.removeChildren();\nlayer2.removeChildren();\nstage.draw();\n```\n\nOr you could redraw each layer after removing them:\n\n  stage.removeChildren();\n  layer.draw();\n  layer2.draw();\n\nOn Thu, Mar 27, 2014 at 4:49 AM, JercSi notifications@github.com wrote:\n\n> I have an issue with new version - 5.0.2.\n> stage.removeChildren() removes the layers (stage.getChildren().length ==\n> 0), but it still shows the object on the stage.\n> \n> Example: http://jsbin.com/tiyiyada/1/edit\n> Version 5.0.2 is still showing two Rectangle objects\n> Version 5.0.1 does not show anything\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/866\n> .\n. Is this what you want? http://jsfiddle.net/eL2rr/1/\nI set the `x` and `y` to the same value for each object. Then I needed to adjust the `points` so instead of being absolute on the canvas they were relative to the `x`, `y` of the line.\n. I believe you want to use `.on('frameIndexChange', ...` for example:\n\n```\nsprite.on('frameIndexChange', function(evt) {\n    if( evt.newVal === 0 ){\n        console.log('Animation Started');\n    }\n});\n```\n\nSee http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-sprite-tutorial/ for more info. Hope this helps!\n. First of all, you're trying to applying Kinetic getters/setters to a HTML image. This is wrong:\n\n```\nvar imagj = new Image();\nimagj.onload = function() {\n    var x = new Kinetic.Image(/* ... */);\n    // ...\n};\nimagj.cache();\nimagj.filters([Kinetic.Filters.RGB]);\nimagj.blue(bleu);\nimagj.red(rouge);\nimagj.green(vert);\n```\n\nThis is correct:\n\n```\nvar imagj = new Image();\nimagj.onload = function() {\n    var x = new Kinetic.Image(/* ... */);\n\n    // ...\n\n    x.cache();\n    x.filters([Kinetic.Filters.RGB]);\n    x.blue(bleu);\n    x.red(rouge);\n    x.green(vert);\n\n    // ...\n\n    layerB.draw();\n};\n```\n\nSecondly, you're using an image from the domain: http://kineticjs.com/ but you're running the code on the domain: http://jsfiddle.net This is a security problem. Your console will say \"Kinetic warning: Unable to apply filter. The operation is insecure.\" To fix that I would just make sure your image is coming from the same domain that your code is running on.\n\nThe weird part is that even after I updated your fiddle it still is gives the security warning http://jsfiddle.net/5gF2c/4/ but that is fine because you can see it working elsewhere.\n\nTo see the example working goto http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-invert-image-tutorial/ and put the following code in the script tag of the code editor:\n\n```\nvar imagj = new Image();\nimagj.onload = function() {\n    var stage = new Kinetic.Stage({\n      container: 'container',\n      width: 400,\n      height: 500\n    });\n\n    var layerB = new Kinetic.Layer();\n\n    var kineticImage = new Kinetic.Image({\n      x: 0,\n      y: 0,\n      image: imagj,\n      draggable: true\n    });\n\n    layerB.add(kineticImage);\n    stage.add(layerB);\n\n    kineticImage.cache();\n    kineticImage.filters([Kinetic.Filters.RGB]);\n    kineticImage.red(0);\n    kineticImage.green(255);\n    kineticImage.blue(0);\n\n    layerB.draw(); \n};\nimagj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg';\n```\n\nHope this helps!\n. I'd make 2 tiny changes which will make your function reusable:\n\n1) You can get which layer to redraw from the image with `kineticImage.getLayer()`. This prevents you from having to change the layer (`layerB`) if you draw the image on a different layer.\n\n2) I would pass `kineticImage` as an argument so that you can use this function for any image. Right now you may only be using this for one image, but what if you wanted to apply it to several images? This will make it easier for you to do that.\n\nHere's how I would write the function:\n\n```\nfunction rbg(kineticImage,red,blue,green){\n    kineticImage.cache();\n    kineticImage.filters([Kinetic.Filters.RGB]);\n    kineticImage.red(red);\n    kineticImage.green(green);\n    kineticImage.blue(blue);\n    kineticImage.getLayer().draw();\n}\n```\n\nThen don't forget to pass the extra argument, for example: `rgb(kineticImage,0,255,0);`.\n\nYou can also chain the methods for a more compact syntax:\n\n```\nkineticImage.red(0).green(255).blue(0);\n```\n\nYou may not like the look of it but it is a nice trick to use when your code gets long ;-)\n. My guess is you are removing the RGB filter when you apply the brightness filter. Here is a working example:\n\n```\nvar imageObj = new Image();\nimageObj.onload = function() {\n\n    var stage = new Kinetic.Stage({\n      container: 'container',\n      width: 578,\n      height: 300\n    });\n\n    var layer = new Kinetic.Layer();\n    darth = new Kinetic.Image({\n      x: 10,\n      y: 10,\n      image: imageObj,\n      draggable: true\n    });\n\n    layer.add(darth);\n    stage.add(layer);\n\n    darth.cache();\n    darth.red(128).green(0).blue(0);\n\n    // Note: brightness values are between -1.0 (makes image black)\n    // and +1.0 (makes image white); 0.0 does not change image\n    darth.brightness(-0.8);\n\n    // Notice how an array is passed to filters\n    // the array has both filters that we want to apply\n    darth.filters([Kinetic.Filters.Brighten,Kinetic.Filters.RGB]);\n\n    darth.getLayer().draw(); \n};\nimageObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg';\n```\n\nYou can place that in script tag on http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-brighten-or-darken-image-tutorial/ to see it working.\n\nYou need to pass BOTH filters to `.filters([...])`. Make sure you're using `kineticImage.filters([Kinetic.Filters.RGB,Kinetic.Filters.Brighten]);`\n\nHope this helps! (if it doesn't, post some code or a fiddle)\n. I think I see what you want to do: in that function you're saving the red, green, blue, and brightness values then applying them if your function is not passed a new parameter. Try this:\n\n```\n// These global variables are no longer needed becuase\n// kineticImage remembers the value\n// var red, green, blue, alphix;\nfunction rgb(kineticImage, rouge, vert, bleu, alpha) {\n\n    // No worries, I left this part in for you ;-)\n    if (kineticImage === undefined) {\n        kineticImage = testImage;\n    }\n\n    kineticImage.cache();\n    kineticImage.filters([Kinetic.Filters.Brighten, Kinetic.Filters.RGB]);\n\n    // Only update the properties that were passed as arguments\n    if (alpha !== undefined) {\n        kineticImage.brightness(alpha / 50.0);\n    }\n    if (rouge !== undefined) {\n        kineticImage.red(rouge);\n    }\n    if (vert !== undefined) {\n        kineticImage.green(vert);\n    }\n    if (bleu !== undefined) {\n        kineticImage.blue(bleu);\n    }\n\n    kineticImage.getLayer().draw();\n}\n```\n\nKinetic stores the values (red,green,blue,brightness,x,y, etc...) for you so you don't have to worry about storing or resetting them. All you have to do is change them when you need to.\n\nHere's an example of it working. For 5 seconds you should see a \"regular\" image, then it will change to a blue image with a little bit of brightness added, and then the filter will add some red in so it will look like a purple image:\n\n```\n<!DOCTYPE HTML>\n<html>\n  <head></head>\n  <body>\n    <div id=\"container\"></div>\n    <script src=\"http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v5.1.0.min.js\"></script>\n    <script defer=\"defer\">\n        // These global variables are no longer needed becuase\n        // kineticImage should remember the value\n        // var red, green, blue, alphix;\n        function rgb(kineticImage, rouge, vert, bleu, alpha) {\n\n            // No worries, I left this part in for you ;-)\n            if (kineticImage === undefined) {\n                kineticImage = testImage;\n            }\n\n            kineticImage.cache();\n            kineticImage.filters([Kinetic.Filters.Brighten, Kinetic.Filters.RGB]);\n\n            // Only update the properties that were passed as arguments\n            if (alpha !== undefined) {\n                kineticImage.brightness(alpha / 50.0);\n            }\n            if (rouge !== undefined) {\n                kineticImage.red(rouge);\n            }\n            if (vert !== undefined) {\n                kineticImage.green(vert);\n            }\n            if (bleu !== undefined) {\n                kineticImage.blue(bleu);\n            }\n\n            kineticImage.getLayer().draw();\n        }\n\n        // Example of rgb function being used\n\n        var imageObj = new Image();\n        var testImage;\n\n        imageObj.onload = function () {\n            var stage = new Kinetic.Stage({\n                container: 'container',\n                width: 578,\n                height: 300\n            });\n            var layer = new Kinetic.Layer();\n            testImage = new Kinetic.Image({\n                x: 10,\n                y: 10,\n                image: imageObj,\n                draggable: true\n            });\n\n            layer.add(testImage);\n            stage.add(layer);\n        };\n\n        // After 5 seconds make the image blue and a little brighter\n        setTimeout(function () {\n            rgb(testImage, undefined, undefined, 255, 25.0);\n        }, 5000);\n\n        // After 10 seconds add some red to the image\n        setTimeout(function () {\n            rgb(testImage, 255, undefined, undefined, undefined);\n        }, 10000);\n\n        imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg';\n    </script>\n  </body>\n</html>\n```\n\nNotice how I finally remembered to use version 5.1.0 ;-)\n\nYou can copy and paste all of that code into the editor on http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-invert-image-tutorial/ to see it working. \n\nLet me know if this works for you (or if I missed something).\n. So my `rgb` implementation did not work as you wanted? Maybe I misunderstood what you wanted to do. I don't see any obvious way to make it shorter but I belive you meant `blue` in the last conditional:\n\n```\nelse if (blue !== undefined) { // there was a `green` there\n    kineticImage.blue(blue);\n}\n```\n\nYou want to adjust the red, green, and blue channels individually, correct? Kinetic's RGB filter recolors the entire image so that each pixel retains its \"darkness or lightness\" but is the red, green, blue that you specify.\n\nI created a new filter for you. Add this to your code (somewhere at the beginning):\n\n```\n(function () {\n    Kinetic.Filters.rgbAdjust = function (imageData) {\n        var rAdj = this.red(),\n            gAdj = this.green(),\n            bAdj = this.blue(),\n            data = imageData.data,\n            len = data.length,\n            i,r,g,b;\n\n        for (i = 0; i < len; i += 4) {\n            r = data[i] + rAdj;\n            g = data[i+1] + gAdj;\n            b = data[i+2] + bAdj;\n            data[i] = (r>255)?255:(r<0)?0:r;\n            data[i+1] = (g>255)?255:(g<0)?0:g;\n            data[i+2] = (b>255)?255:(b<0)?0:b;\n        }\n    };\n})();\n```\n\nIt uses `.red()`, `.green()`, and `.blue()` to adjust the color levels in your image. For example:\n\n```\nkineticImage.cache();\nkineticImage.filters([Kinetic.Filters.rgbAdjust]);\nkineticImage.red(20);    // add some red\nkineticImage.green(-30); // remove some green\nkineticImage.getLayer().draw();\n```\n\nNote that this will adjust the image based on the original image. If you want it to \"add\" to what you've done (ie `red += 10`) then you can do something like:\n\n```\nkineticImage.cache();\nkineticImage.filters([Kinetic.Filters.rgbAdjust]);\nkineticImage.red( kineticImage.red() + 20 );   // add some more red\nkineticImage.blue( kineticImage.blue() - 10 ); // remove some more blue\nkineticImage.getLayer().draw();\n```\n\nAnother warning: the `.red()`, `.green()`, and `.blue()` that are being using are the same ones which are used in `Kinetic.Filters.RGB` so you should not use `Kinetic.Filters.RGB` and `Kinetic.Filters.rgbAdjust` on the same image.\n\nHere's a full example:\n\n```\n<!DOCTYPE HTML>\n<html>\n<head></head>\n<body>\n    <div id=\"container\"></div>\n    <script src=\"http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v5.1.0.min.js\"></script>\n    <script defer=\"defer\">\n        (function () {\n            Kinetic.Filters.rgbAdjust = function (imageData) {\n                var rAdj = this.red(),\n                    gAdj = this.green(),\n                    bAdj = this.blue(),\n                    data = imageData.data,\n                    len = data.length,\n                    i,r,g,b;\n\n                for (i = 0; i < len; i += 4) {\n                    r = data[i] + rAdj;\n                    g = data[i+1] + gAdj;\n                    b = data[i+2] + bAdj;\n                    data[i] = (r>255)?255:(r<0)?0:r;\n                    data[i+1] = (g>255)?255:(g<0)?0:g;\n                    data[i+2] = (b>255)?255:(b<0)?0:b;\n                }\n            };\n        })();\n\n        var imageObj = new Image();\n        imageObj.onload = function () {\n            var stage = new Kinetic.Stage({\n                container: 'container',\n                width: 578,\n                height: 300\n            });\n            var layer = new Kinetic.Layer();\n            darth = new Kinetic.Image({\n                x: 10,\n                y: 10,\n                image: imageObj,\n                draggable: true\n            });\n\n            layer.add(darth);\n            stage.add(layer);\n\n            setInterval(function () {\n                darth.cache();\n                darth.filters([Kinetic.Filters.rgbAdjust]);\n                darth.red(darth.red() + 1);\n                darth.blue(darth.blue() + 2);\n                darth.getLayer().draw();\n            }, 50);\n        };\n        imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg';\n    </script>\n</body>\n</html>\n```\n\nLet me know if you have more questions ^_^ \n. Try running the following:\n\n```\n<!DOCTYPE HTML>\n<html>\n\n<head>\n    <style>\n        body {\n            margin: 0px;\n            padding: 0px;\n        }\n        input {\n            position: absolute;\n            left: 20px;\n        }\n        label {\n            position: absolute;\n            left: 200px;\n        }\n        #slide-brightness,\n        #label-brightness {\n            top: 20px;\n        }\n        #slide-red,\n        #label-red {\n            top: 40px;\n        }\n        #slide-green,\n        #label-green {\n            top: 60px;\n        }\n        #slide-blue,\n        #label-blue {\n            top: 80px;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"container\"></div>\n\n    <!-- Sliders to adjust the red, green, blue, and brightness levels of an image -->\n    <input id=\"slide-brightness\" type=\"range\" min=\"-1\" max=\"1\" step=\"0.05\" value=\"0\">\n    <label id=\"label-brightness\" for=\"slide-brightness\">Brightness</label>\n\n    <input id=\"slide-red\" type=\"range\" min=\"0\" max=\"255\" step=\"1\" value=\"127\" />\n    <label id=\"label-red\" for=\"slide-red\">Red</label>\n\n    <input id=\"slide-green\" type=\"range\" min=\"0\" max=\"255\" step=\"1\" value=\"127\" />\n    <label id=\"label-green\" for=\"slide-green\">Green</label>\n\n    <input id=\"slide-blue\" type=\"range\" min=\"0\" max=\"255\" step=\"1\" value=\"127\" />\n    <label id=\"label-blue\" for=\"slide-blue\">Blue</label>\n\n    <script src=\"http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v5.1.0.min.js\"></script>\n    <script defer=\"defer\">\n        // Custom filter for adding or subtraction r,g,b colors\n        Kinetic.Filters.rgbAdjust = function (imageData) {\n            var rAdj = this.red() - 127,\n                gAdj = this.green() - 127,\n                bAdj = this.blue() - 127,\n                data = imageData.data,\n                len = data.length,\n                i, r, g, b;\n            for (i = 0; i < len; i += 4) {\n                r = data[i] + rAdj * 2;\n                g = data[i + 1] + gAdj * 2;\n                b = data[i + 2] + bAdj * 2;\n                data[i] = (r > 255) ? 255 : (r < 0) ? 0 : r;\n                data[i + 1] = (g > 255) ? 255 : (g < 0) ? 0 : g;\n                data[i + 2] = (b > 255) ? 255 : (b < 0) ? 0 : b;\n            }\n        };\n\n        var imageObj = new Image();\n        imageObj.onload = function () {\n\n            // Create the stage and layer to show the image\n            var stage = new Kinetic.Stage({\n                container: 'container',\n                width: 578,\n                height: 300\n            });\n            var layer = new Kinetic.Layer();\n            darth = new Kinetic.Image({\n                x: 10,\n                y: 10,\n                image: imageObj,\n                draggable: true\n            });\n            layer.add(darth);\n            stage.add(layer);\n\n            // Read the inputs, apply them to the image, and redraw the layer\n            function redraw() {\n                darth.cache();\n                darth.filters([Kinetic.Filters.rgbAdjust, Kinetic.Filters.Brighten]);\n                darth.brightness(document.getElementById('slide-brightness').value);\n                darth.red(document.getElementById('slide-red').value);\n                darth.green(document.getElementById('slide-green').value);\n                darth.blue(document.getElementById('slide-blue').value);\n                darth.getLayer().draw();\n            }\n\n            // Automatically redraw the image when the sliders change\n            document.getElementById('slide-brightness').onchange = redraw;\n            document.getElementById('slide-red').onchange = redraw;\n            document.getElementById('slide-green').onchange = redraw;\n            document.getElementById('slide-blue').onchange = redraw;\n\n            // Draw the image with the default slider values\n            redraw();\n        };\n        imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg';\n    </script>\n</body>\n</html>\n```\n\nI changed `rgbAdjust`. There was a sight bug where negative values were being treating as 0. I changed the range so that 0 removes all the r,g,b and 255 increases it to the max.\n\nI would use the sliders to store the r,g,b values that you want to use. This way you don't have to worry about storing/adding/subtracting \"stock\" values, you can just read the value from the slider.\n\nLet me know how this works for you!\n. Luckily, I was curious about hue, saturation and luminance so there already is a filter for that in Kinetic:\n\n```\nkineticImage.cache();\nkineticImage.filters([Kinetic.Filters.HSL]);\nkineticImage.hue(180);        // 180 degree hue shift\nkineticImage.saturation(1.0); // more color, less grey\nkineticImage.luminance(-0.5); // darker\nkineticImage.getLayer().draw();\n```\n\n`hue` is between 0 and 360. `saturation` can be any number: -1.0 halves the saturation of the image (makes it more grey) and +1.0 doubles the saturation (makes it more colorful). Similarly, `luminance` can be any number: -1.0 halves the luminance of the image (makes it more darker) and +1.0 doubles the luminance (makes it brighter).\n\nIt should be easy for you to add that to your code but you may also find a complete example below ;-)\n\n```\n<!DOCTYPE HTML>\n<html>\n\n<head>\n    <style>\n        body { margin: 0px; padding: 0px; }\n        input { position: absolute; left: 20px; }\n        label { position: absolute; left: 200px; }\n        #slide-red, #label-red { top: 20px; }\n        #slide-green, #label-green { top: 40px; }\n        #slide-blue, #label-blue { top: 60px; }\n        #slide-hue, #label-hue { top: 80px; }\n        #slide-saturation, #label-saturation { top: 100px; }\n        #slide-luminance, #label-luminance { top: 120px; }\n    </style>\n</head>\n\n<body>\n    <div id=\"container\"></div>\n\n    <!-- Sliders to adjust the red, green, blue, and brightness levels of an image -->\n\n    <input id=\"slide-red\" type=\"range\" min=\"0\" max=\"255\" step=\"1\" value=\"127\" />\n    <label id=\"label-red\" for=\"slide-red\">Red</label>\n\n    <input id=\"slide-green\" type=\"range\" min=\"0\" max=\"255\" step=\"1\" value=\"127\" />\n    <label id=\"label-green\" for=\"slide-green\">Green</label>\n\n    <input id=\"slide-blue\" type=\"range\" min=\"0\" max=\"255\" step=\"1\" value=\"127\" />\n    <label id=\"label-blue\" for=\"slide-blue\">Blue</label>\n\n    <input id=\"slide-hue\" type=\"range\" min=\"0\" max=\"360\" step=\"1\" value=\"0\">\n    <label id=\"label-hue\" for=\"slide-hue\">Hue</label>\n\n    <input id=\"slide-saturation\" type=\"range\" min=\"-2\" max=\"2\" step=\"0.05\" value=\"0\">\n    <label id=\"label-saturation\" for=\"slide-saturation\">Saturation</label>\n\n    <input id=\"slide-luminance\" type=\"range\" min=\"-2\" max=\"2\" step=\"0.05\" value=\"0\">\n    <label id=\"label-luminance\" for=\"slide-luminance\">Luminance</label>\n\n    <script src=\"http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v5.1.0.min.js\"></script>\n    <script defer=\"defer\">\n        // Custom filter for adding or subtraction r,g,b colors\n        Kinetic.Filters.rgbAdjust = function (imageData) {\n            var rAdj = this.red() - 127,\n                gAdj = this.green() - 127,\n                bAdj = this.blue() - 127,\n                data = imageData.data,\n                len = data.length,\n                i, r, g, b;\n            for (i = 0; i < len; i += 4) {\n                r = data[i] + rAdj * 2;\n                g = data[i + 1] + gAdj * 2;\n                b = data[i + 2] + bAdj * 2;\n                data[i] = (r > 255) ? 255 : (r < 0) ? 0 : r;\n                data[i + 1] = (g > 255) ? 255 : (g < 0) ? 0 : g;\n                data[i + 2] = (b > 255) ? 255 : (b < 0) ? 0 : b;\n            }\n        };\n\n        var imageObj = new Image();\n        imageObj.onload = function () {\n\n            // Create the stage and layer to show the image\n            var stage = new Kinetic.Stage({\n                container: 'container',\n                width: 578,\n                height: 300\n            });\n            var layer = new Kinetic.Layer();\n            darth = new Kinetic.Image({\n                x: 10,\n                y: 10,\n                image: imageObj,\n                draggable: true\n            });\n            layer.add(darth);\n            stage.add(layer);\n\n            // Read the inputs, apply them to the image, and redraw the layer\n            function redraw() {\n                darth.cache();\n                darth.filters([Kinetic.Filters.rgbAdjust, Kinetic.Filters.HSL]);\n                darth.red(document.getElementById('slide-red').value);\n                darth.green(document.getElementById('slide-green').value);\n                darth.blue(document.getElementById('slide-blue').value);\n                darth.hue(document.getElementById('slide-hue').value);\n                darth.saturation(document.getElementById('slide-saturation').value);\n                darth.luminance(document.getElementById('slide-luminance').value);\n                darth.getLayer().draw();\n            }\n\n            // Automatically redraw the image when the sliders change\n            document.getElementById('slide-red').onchange = redraw;\n            document.getElementById('slide-green').onchange = redraw;\n            document.getElementById('slide-blue').onchange = redraw;\n            document.getElementById('slide-hue').onchange = redraw;\n            document.getElementById('slide-saturation').onchange = redraw;\n            document.getElementById('slide-luminance').onchange = redraw;\n\n            // Draw the image with the default slider values\n            redraw();\n        };\n        imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg';\n    </script>\n</body>\n</html>\n```\n\nHope this helps!\n. Thanks! I merged the code from #527 which seemed like the same issue. It's in commit 8b7b3db9ef.\n. The filtered image was being drawn in a temporary canvas where it was\npreviously drawn. With each draw, the alpha-values of the image increased\nuntil they hit 255 (effectively removing the alpha channel).\n\nTo fix it: I created a clear canvas each time the filter is applied. This fix\nshould be in the latest commit.\n. That was my first attempt - I used something like `context.clearRect(0,0,width,height)` but it didn't fix the problem. Perhaps I put that code in the wrong spot...\n. 1) Yes. That happens because the convolution matrix is looking for pixels that are past the edge of the image. I should either make it \"tile-able\" or just extend those edge pixels. I wasn't sure which would be more appropriate. Perhaps a 'filterIsTileable' flag to determine which the user wants?\n\n2) Ah, I didn't realize Brighten could do that. That sounds like a better option (and probably faster) than mine.\n\n3) Yes I could change that to ConvolutePack and similar for ColorPack. Would it be desirable to break them down further? or would that require a different file structure and too much repetitive code? About the verb naming convention: I was trying to name them verbs but didn't do a good job (shoulda got a thesaurus :-), I'd love to hear your suggestions.\n\n4) That's awesome! I'll work on restructuring those filters so that they are tweenable with 0 meaning no effect and 100 being the max. Is [0-100] the range you've been using (with negatives allowed when appropriate)?\n\n5) The my blur function should be the same as the existing Blur filter. My \"soft blur\" is slightly different than a \"regular\" blur. A soft blur first blurs the image then blends it with the unblurred image. I handle a soft blur as 1 operation, if we implemented it with the existing filter it would take blurring time + blending time which I'm guessing would be a bit slower than mine. I think mine is easier to maintain and would keep the files smaller but I don't know which performs better.\n\nI think KineticJS is an awesome project and I'm happy to help out! I'll try to work on these but probably won't get to it anything until Tuesday night so if you want to start some edits or send more suggestions that's cool.\n. Thanks!\n. Hi! Sorry, I didn't see any message about joining the KineticJS team but I'd like to talk with you about it. I put my personal email address in my profile so you can contact me using that address.\n. Thanks!\n. I'm not sure what your goal is but here are some things I noticed.\n\nIn http://jsfiddle.net/SLrTj/2/ in line 77 in the JavaScript you have `PageListS[0]`. I think you want `pageListS[0]` (lower case `p` at the beginning).\n\nCheck out Mozilla's Array documentation for using two-dimensional arrays:\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array\n\nThe section on 2d arrays in near the end but basically, I think you want something like:\n\n```\n// Create an array of 2 arrays\npageList = [[],[]];\n// Access the 3rd element of the 0th array\npageList[0][3] \n// As you had:\npageList[0][i] // similar to your pageList[0+i*2]\npageList[1][i] // similar to your pageList[1+i*2]\n```\n. Currently, `textHeight` is the height of an individual character and `lineHeight` is a ratio controlling how tall the line is compared to a character.\n\nFor example a `textHeight` of `16` and a `lineHeight` of `2` gives a line which is `2*16=32` units tall and has characters which are `16` units tall (there will be some space between the lines). A `textHeight` of `12` and a `lineHeight` of `0.5` creates lines 6 units tall with the characters are 12 units tall (ie lines will overlap slightly).\n\nYou can determine how many lines of text you have with `yourStringObj.split('\\n').length` or `kineticTextObj.textArr.length`. You can determine the total height of your block of text by multiplying by both the `lineHeight` and `textHeight`. The following should give you the height of your text block (similar to the width):\n\n```\ntext.getTextHeight()*text.getLineHeight()*text.textArr.length\n```\n\n`text` is your `Kinetic.Text` object.\n. Hi, I think you need to round your stage width like so:\n\n```\n//Defining Stage\nvar stage = new Kinetic.Stage({\n    container : 'container',\n    width : Math.floor(viewportWidth*.75) + 100,\n    height : viewportHeight + 26,\n    name : 'container',\n    id : 'stageWindow'\n});\n```\n\nYou are specifying a canvas to be a fractional number (1366*0.75 = 1024.5) of pixels wide. That fractional part is probably what's making your line blurry. (And make sure your browser's zoom is set to 100%, took me a while to realize 125% zoom makes everything blurry ;-)\n\nClose this if that fixes it for you.\n. Glad you could figure it out!\n. Thanks! It's been merged\n. Hi (nice report)! Instead of removing children, try destroying them:\n\n```\nkLayer.destroyChildren();\n```\n\nWhen I ran your code with `removeChildren()` - my memory usage kept increasing (I managed to push it over 1 gig) however, it was cleared once I closed the tab.\n\nI also ran your code with `destroyChildren()` and my memory usage also increased but it eventually levelled off (around a few 100 mB).\n\nI think we're trying to be conservative with our filter handling code but I'll double check to make sure we haven't overlooked anything.\n. To summarize this: use `kLayer.destroyChildren();` in your code.\n\nThis is what you should expect: If you're clicking the button only occasionally - your memory usage should be effectively constant. However, if you're clicking the button really fast (more than once ever 20 seconds in my tests) the memory usage will rise until you don't click the button for a while. Then it should drop to a level just above where it was when your image didn't have a filter.\n\nReopen or start a new issue if something else bugs you.\n. Thank you! These should be fixed now\n. Don't change the width or height of the DOM image. Use temporary variables to store the width and height of your image, for example:\n\n```\nvar w = img.width;\nvar h = img.height\nif(w > scaleWidth) {\n    h = scaleWidth / (img.width / img.height);\n    w = scaleWidth;\n}\n_userPicImg = new Kinetic.Image({\n    x: 0,\n    y: 0,\n    image: img,\n    name: \"image\",\n    width:w,\n    height:h\n});\n```\n\nCheck it out in this fiddle: http://jsfiddle.net/n2veK/\n. Thanks for doing this!\n. There is no way to apply a filter to a shape; however, I am working on adding support for filters to be applied to layers. You could put all of the shapes you want to filter on one layer and then apply the filter to the layer in the layer's \"draw\" event. NOTE: this is only in the latest version on Github.\n\nYou can look through some of the unit tests for examples of applying a filter to a layer: https://github.com/ericdrowell/KineticJS/tree/master/test/unit/filters \n\nHere's a quick example which pixelates the left half of a layer:\n\n```\nlayer.on('draw', function () {\n  var imageData = this.getContext().getImageData(0, 0, this.getCanvas().width/2, this.getCanvas().height);\n  var scratchData = this.getContext().createImageData(imageData); // only size copied\n  Kinetic.Filters.Pixelate(imageData,scratchData,{pixelWidth:8,pixelHeight:16});\n  this.getContext().putImageData(scratchData,0,0);\n});\n```\n\nLet me know if you have suggestions, feedback or questions. I may not have updated the interface for the particular filter you want to use - let me know which one and I'll move it to the top of my priority list.\n. Could you create a jsfiddle for us? I think there may be a problem where you compute `index` or `midpointX`/`Y`.\n\nYou seem to be adding points the correct way. You can verify that by going to the polygon example: http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-polygon-tutorial/ and then adding this code to the end:\n\n```\nvar points = poly.points();\npoints.splice(6,0,420,36);\npoly.draw();\n```\n. You could call `.removeChildren()` on each layer, then redraw the stage:\n\n```\nlayer.removeChildren();\nlayer2.removeChildren();\nstage.draw();\n```\n\nOr you could redraw each layer after removing them:\n\n  stage.removeChildren();\n  layer.draw();\n  layer2.draw();\n\nOn Thu, Mar 27, 2014 at 4:49 AM, JercSi notifications@github.com wrote:\n\n> I have an issue with new version - 5.0.2.\n> stage.removeChildren() removes the layers (stage.getChildren().length ==\n> 0), but it still shows the object on the stage.\n> \n> Example: http://jsbin.com/tiyiyada/1/edit\n> Version 5.0.2 is still showing two Rectangle objects\n> Version 5.0.1 does not show anything\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/866\n> .\n. Is this what you want? http://jsfiddle.net/eL2rr/1/\nI set the `x` and `y` to the same value for each object. Then I needed to adjust the `points` so instead of being absolute on the canvas they were relative to the `x`, `y` of the line.\n. I believe you want to use `.on('frameIndexChange', ...` for example:\n\n```\nsprite.on('frameIndexChange', function(evt) {\n    if( evt.newVal === 0 ){\n        console.log('Animation Started');\n    }\n});\n```\n\nSee http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-sprite-tutorial/ for more info. Hope this helps!\n. First of all, you're trying to applying Kinetic getters/setters to a HTML image. This is wrong:\n\n```\nvar imagj = new Image();\nimagj.onload = function() {\n    var x = new Kinetic.Image(/* ... */);\n    // ...\n};\nimagj.cache();\nimagj.filters([Kinetic.Filters.RGB]);\nimagj.blue(bleu);\nimagj.red(rouge);\nimagj.green(vert);\n```\n\nThis is correct:\n\n```\nvar imagj = new Image();\nimagj.onload = function() {\n    var x = new Kinetic.Image(/* ... */);\n\n    // ...\n\n    x.cache();\n    x.filters([Kinetic.Filters.RGB]);\n    x.blue(bleu);\n    x.red(rouge);\n    x.green(vert);\n\n    // ...\n\n    layerB.draw();\n};\n```\n\nSecondly, you're using an image from the domain: http://kineticjs.com/ but you're running the code on the domain: http://jsfiddle.net This is a security problem. Your console will say \"Kinetic warning: Unable to apply filter. The operation is insecure.\" To fix that I would just make sure your image is coming from the same domain that your code is running on.\n\nThe weird part is that even after I updated your fiddle it still is gives the security warning http://jsfiddle.net/5gF2c/4/ but that is fine because you can see it working elsewhere.\n\nTo see the example working goto http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-invert-image-tutorial/ and put the following code in the script tag of the code editor:\n\n```\nvar imagj = new Image();\nimagj.onload = function() {\n    var stage = new Kinetic.Stage({\n      container: 'container',\n      width: 400,\n      height: 500\n    });\n\n    var layerB = new Kinetic.Layer();\n\n    var kineticImage = new Kinetic.Image({\n      x: 0,\n      y: 0,\n      image: imagj,\n      draggable: true\n    });\n\n    layerB.add(kineticImage);\n    stage.add(layerB);\n\n    kineticImage.cache();\n    kineticImage.filters([Kinetic.Filters.RGB]);\n    kineticImage.red(0);\n    kineticImage.green(255);\n    kineticImage.blue(0);\n\n    layerB.draw(); \n};\nimagj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg';\n```\n\nHope this helps!\n. I'd make 2 tiny changes which will make your function reusable:\n\n1) You can get which layer to redraw from the image with `kineticImage.getLayer()`. This prevents you from having to change the layer (`layerB`) if you draw the image on a different layer.\n\n2) I would pass `kineticImage` as an argument so that you can use this function for any image. Right now you may only be using this for one image, but what if you wanted to apply it to several images? This will make it easier for you to do that.\n\nHere's how I would write the function:\n\n```\nfunction rbg(kineticImage,red,blue,green){\n    kineticImage.cache();\n    kineticImage.filters([Kinetic.Filters.RGB]);\n    kineticImage.red(red);\n    kineticImage.green(green);\n    kineticImage.blue(blue);\n    kineticImage.getLayer().draw();\n}\n```\n\nThen don't forget to pass the extra argument, for example: `rgb(kineticImage,0,255,0);`.\n\nYou can also chain the methods for a more compact syntax:\n\n```\nkineticImage.red(0).green(255).blue(0);\n```\n\nYou may not like the look of it but it is a nice trick to use when your code gets long ;-)\n. My guess is you are removing the RGB filter when you apply the brightness filter. Here is a working example:\n\n```\nvar imageObj = new Image();\nimageObj.onload = function() {\n\n    var stage = new Kinetic.Stage({\n      container: 'container',\n      width: 578,\n      height: 300\n    });\n\n    var layer = new Kinetic.Layer();\n    darth = new Kinetic.Image({\n      x: 10,\n      y: 10,\n      image: imageObj,\n      draggable: true\n    });\n\n    layer.add(darth);\n    stage.add(layer);\n\n    darth.cache();\n    darth.red(128).green(0).blue(0);\n\n    // Note: brightness values are between -1.0 (makes image black)\n    // and +1.0 (makes image white); 0.0 does not change image\n    darth.brightness(-0.8);\n\n    // Notice how an array is passed to filters\n    // the array has both filters that we want to apply\n    darth.filters([Kinetic.Filters.Brighten,Kinetic.Filters.RGB]);\n\n    darth.getLayer().draw(); \n};\nimageObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg';\n```\n\nYou can place that in script tag on http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-brighten-or-darken-image-tutorial/ to see it working.\n\nYou need to pass BOTH filters to `.filters([...])`. Make sure you're using `kineticImage.filters([Kinetic.Filters.RGB,Kinetic.Filters.Brighten]);`\n\nHope this helps! (if it doesn't, post some code or a fiddle)\n. I think I see what you want to do: in that function you're saving the red, green, blue, and brightness values then applying them if your function is not passed a new parameter. Try this:\n\n```\n// These global variables are no longer needed becuase\n// kineticImage remembers the value\n// var red, green, blue, alphix;\nfunction rgb(kineticImage, rouge, vert, bleu, alpha) {\n\n    // No worries, I left this part in for you ;-)\n    if (kineticImage === undefined) {\n        kineticImage = testImage;\n    }\n\n    kineticImage.cache();\n    kineticImage.filters([Kinetic.Filters.Brighten, Kinetic.Filters.RGB]);\n\n    // Only update the properties that were passed as arguments\n    if (alpha !== undefined) {\n        kineticImage.brightness(alpha / 50.0);\n    }\n    if (rouge !== undefined) {\n        kineticImage.red(rouge);\n    }\n    if (vert !== undefined) {\n        kineticImage.green(vert);\n    }\n    if (bleu !== undefined) {\n        kineticImage.blue(bleu);\n    }\n\n    kineticImage.getLayer().draw();\n}\n```\n\nKinetic stores the values (red,green,blue,brightness,x,y, etc...) for you so you don't have to worry about storing or resetting them. All you have to do is change them when you need to.\n\nHere's an example of it working. For 5 seconds you should see a \"regular\" image, then it will change to a blue image with a little bit of brightness added, and then the filter will add some red in so it will look like a purple image:\n\n```\n<!DOCTYPE HTML>\n<html>\n  <head></head>\n  <body>\n    <div id=\"container\"></div>\n    <script src=\"http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v5.1.0.min.js\"></script>\n    <script defer=\"defer\">\n        // These global variables are no longer needed becuase\n        // kineticImage should remember the value\n        // var red, green, blue, alphix;\n        function rgb(kineticImage, rouge, vert, bleu, alpha) {\n\n            // No worries, I left this part in for you ;-)\n            if (kineticImage === undefined) {\n                kineticImage = testImage;\n            }\n\n            kineticImage.cache();\n            kineticImage.filters([Kinetic.Filters.Brighten, Kinetic.Filters.RGB]);\n\n            // Only update the properties that were passed as arguments\n            if (alpha !== undefined) {\n                kineticImage.brightness(alpha / 50.0);\n            }\n            if (rouge !== undefined) {\n                kineticImage.red(rouge);\n            }\n            if (vert !== undefined) {\n                kineticImage.green(vert);\n            }\n            if (bleu !== undefined) {\n                kineticImage.blue(bleu);\n            }\n\n            kineticImage.getLayer().draw();\n        }\n\n        // Example of rgb function being used\n\n        var imageObj = new Image();\n        var testImage;\n\n        imageObj.onload = function () {\n            var stage = new Kinetic.Stage({\n                container: 'container',\n                width: 578,\n                height: 300\n            });\n            var layer = new Kinetic.Layer();\n            testImage = new Kinetic.Image({\n                x: 10,\n                y: 10,\n                image: imageObj,\n                draggable: true\n            });\n\n            layer.add(testImage);\n            stage.add(layer);\n        };\n\n        // After 5 seconds make the image blue and a little brighter\n        setTimeout(function () {\n            rgb(testImage, undefined, undefined, 255, 25.0);\n        }, 5000);\n\n        // After 10 seconds add some red to the image\n        setTimeout(function () {\n            rgb(testImage, 255, undefined, undefined, undefined);\n        }, 10000);\n\n        imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg';\n    </script>\n  </body>\n</html>\n```\n\nNotice how I finally remembered to use version 5.1.0 ;-)\n\nYou can copy and paste all of that code into the editor on http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-invert-image-tutorial/ to see it working. \n\nLet me know if this works for you (or if I missed something).\n. So my `rgb` implementation did not work as you wanted? Maybe I misunderstood what you wanted to do. I don't see any obvious way to make it shorter but I belive you meant `blue` in the last conditional:\n\n```\nelse if (blue !== undefined) { // there was a `green` there\n    kineticImage.blue(blue);\n}\n```\n\nYou want to adjust the red, green, and blue channels individually, correct? Kinetic's RGB filter recolors the entire image so that each pixel retains its \"darkness or lightness\" but is the red, green, blue that you specify.\n\nI created a new filter for you. Add this to your code (somewhere at the beginning):\n\n```\n(function () {\n    Kinetic.Filters.rgbAdjust = function (imageData) {\n        var rAdj = this.red(),\n            gAdj = this.green(),\n            bAdj = this.blue(),\n            data = imageData.data,\n            len = data.length,\n            i,r,g,b;\n\n        for (i = 0; i < len; i += 4) {\n            r = data[i] + rAdj;\n            g = data[i+1] + gAdj;\n            b = data[i+2] + bAdj;\n            data[i] = (r>255)?255:(r<0)?0:r;\n            data[i+1] = (g>255)?255:(g<0)?0:g;\n            data[i+2] = (b>255)?255:(b<0)?0:b;\n        }\n    };\n})();\n```\n\nIt uses `.red()`, `.green()`, and `.blue()` to adjust the color levels in your image. For example:\n\n```\nkineticImage.cache();\nkineticImage.filters([Kinetic.Filters.rgbAdjust]);\nkineticImage.red(20);    // add some red\nkineticImage.green(-30); // remove some green\nkineticImage.getLayer().draw();\n```\n\nNote that this will adjust the image based on the original image. If you want it to \"add\" to what you've done (ie `red += 10`) then you can do something like:\n\n```\nkineticImage.cache();\nkineticImage.filters([Kinetic.Filters.rgbAdjust]);\nkineticImage.red( kineticImage.red() + 20 );   // add some more red\nkineticImage.blue( kineticImage.blue() - 10 ); // remove some more blue\nkineticImage.getLayer().draw();\n```\n\nAnother warning: the `.red()`, `.green()`, and `.blue()` that are being using are the same ones which are used in `Kinetic.Filters.RGB` so you should not use `Kinetic.Filters.RGB` and `Kinetic.Filters.rgbAdjust` on the same image.\n\nHere's a full example:\n\n```\n<!DOCTYPE HTML>\n<html>\n<head></head>\n<body>\n    <div id=\"container\"></div>\n    <script src=\"http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v5.1.0.min.js\"></script>\n    <script defer=\"defer\">\n        (function () {\n            Kinetic.Filters.rgbAdjust = function (imageData) {\n                var rAdj = this.red(),\n                    gAdj = this.green(),\n                    bAdj = this.blue(),\n                    data = imageData.data,\n                    len = data.length,\n                    i,r,g,b;\n\n                for (i = 0; i < len; i += 4) {\n                    r = data[i] + rAdj;\n                    g = data[i+1] + gAdj;\n                    b = data[i+2] + bAdj;\n                    data[i] = (r>255)?255:(r<0)?0:r;\n                    data[i+1] = (g>255)?255:(g<0)?0:g;\n                    data[i+2] = (b>255)?255:(b<0)?0:b;\n                }\n            };\n        })();\n\n        var imageObj = new Image();\n        imageObj.onload = function () {\n            var stage = new Kinetic.Stage({\n                container: 'container',\n                width: 578,\n                height: 300\n            });\n            var layer = new Kinetic.Layer();\n            darth = new Kinetic.Image({\n                x: 10,\n                y: 10,\n                image: imageObj,\n                draggable: true\n            });\n\n            layer.add(darth);\n            stage.add(layer);\n\n            setInterval(function () {\n                darth.cache();\n                darth.filters([Kinetic.Filters.rgbAdjust]);\n                darth.red(darth.red() + 1);\n                darth.blue(darth.blue() + 2);\n                darth.getLayer().draw();\n            }, 50);\n        };\n        imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg';\n    </script>\n</body>\n</html>\n```\n\nLet me know if you have more questions ^_^ \n. Try running the following:\n\n```\n<!DOCTYPE HTML>\n<html>\n\n<head>\n    <style>\n        body {\n            margin: 0px;\n            padding: 0px;\n        }\n        input {\n            position: absolute;\n            left: 20px;\n        }\n        label {\n            position: absolute;\n            left: 200px;\n        }\n        #slide-brightness,\n        #label-brightness {\n            top: 20px;\n        }\n        #slide-red,\n        #label-red {\n            top: 40px;\n        }\n        #slide-green,\n        #label-green {\n            top: 60px;\n        }\n        #slide-blue,\n        #label-blue {\n            top: 80px;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"container\"></div>\n\n    <!-- Sliders to adjust the red, green, blue, and brightness levels of an image -->\n    <input id=\"slide-brightness\" type=\"range\" min=\"-1\" max=\"1\" step=\"0.05\" value=\"0\">\n    <label id=\"label-brightness\" for=\"slide-brightness\">Brightness</label>\n\n    <input id=\"slide-red\" type=\"range\" min=\"0\" max=\"255\" step=\"1\" value=\"127\" />\n    <label id=\"label-red\" for=\"slide-red\">Red</label>\n\n    <input id=\"slide-green\" type=\"range\" min=\"0\" max=\"255\" step=\"1\" value=\"127\" />\n    <label id=\"label-green\" for=\"slide-green\">Green</label>\n\n    <input id=\"slide-blue\" type=\"range\" min=\"0\" max=\"255\" step=\"1\" value=\"127\" />\n    <label id=\"label-blue\" for=\"slide-blue\">Blue</label>\n\n    <script src=\"http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v5.1.0.min.js\"></script>\n    <script defer=\"defer\">\n        // Custom filter for adding or subtraction r,g,b colors\n        Kinetic.Filters.rgbAdjust = function (imageData) {\n            var rAdj = this.red() - 127,\n                gAdj = this.green() - 127,\n                bAdj = this.blue() - 127,\n                data = imageData.data,\n                len = data.length,\n                i, r, g, b;\n            for (i = 0; i < len; i += 4) {\n                r = data[i] + rAdj * 2;\n                g = data[i + 1] + gAdj * 2;\n                b = data[i + 2] + bAdj * 2;\n                data[i] = (r > 255) ? 255 : (r < 0) ? 0 : r;\n                data[i + 1] = (g > 255) ? 255 : (g < 0) ? 0 : g;\n                data[i + 2] = (b > 255) ? 255 : (b < 0) ? 0 : b;\n            }\n        };\n\n        var imageObj = new Image();\n        imageObj.onload = function () {\n\n            // Create the stage and layer to show the image\n            var stage = new Kinetic.Stage({\n                container: 'container',\n                width: 578,\n                height: 300\n            });\n            var layer = new Kinetic.Layer();\n            darth = new Kinetic.Image({\n                x: 10,\n                y: 10,\n                image: imageObj,\n                draggable: true\n            });\n            layer.add(darth);\n            stage.add(layer);\n\n            // Read the inputs, apply them to the image, and redraw the layer\n            function redraw() {\n                darth.cache();\n                darth.filters([Kinetic.Filters.rgbAdjust, Kinetic.Filters.Brighten]);\n                darth.brightness(document.getElementById('slide-brightness').value);\n                darth.red(document.getElementById('slide-red').value);\n                darth.green(document.getElementById('slide-green').value);\n                darth.blue(document.getElementById('slide-blue').value);\n                darth.getLayer().draw();\n            }\n\n            // Automatically redraw the image when the sliders change\n            document.getElementById('slide-brightness').onchange = redraw;\n            document.getElementById('slide-red').onchange = redraw;\n            document.getElementById('slide-green').onchange = redraw;\n            document.getElementById('slide-blue').onchange = redraw;\n\n            // Draw the image with the default slider values\n            redraw();\n        };\n        imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg';\n    </script>\n</body>\n</html>\n```\n\nI changed `rgbAdjust`. There was a sight bug where negative values were being treating as 0. I changed the range so that 0 removes all the r,g,b and 255 increases it to the max.\n\nI would use the sliders to store the r,g,b values that you want to use. This way you don't have to worry about storing/adding/subtracting \"stock\" values, you can just read the value from the slider.\n\nLet me know how this works for you!\n. Luckily, I was curious about hue, saturation and luminance so there already is a filter for that in Kinetic:\n\n```\nkineticImage.cache();\nkineticImage.filters([Kinetic.Filters.HSL]);\nkineticImage.hue(180);        // 180 degree hue shift\nkineticImage.saturation(1.0); // more color, less grey\nkineticImage.luminance(-0.5); // darker\nkineticImage.getLayer().draw();\n```\n\n`hue` is between 0 and 360. `saturation` can be any number: -1.0 halves the saturation of the image (makes it more grey) and +1.0 doubles the saturation (makes it more colorful). Similarly, `luminance` can be any number: -1.0 halves the luminance of the image (makes it more darker) and +1.0 doubles the luminance (makes it brighter).\n\nIt should be easy for you to add that to your code but you may also find a complete example below ;-)\n\n```\n<!DOCTYPE HTML>\n<html>\n\n<head>\n    <style>\n        body { margin: 0px; padding: 0px; }\n        input { position: absolute; left: 20px; }\n        label { position: absolute; left: 200px; }\n        #slide-red, #label-red { top: 20px; }\n        #slide-green, #label-green { top: 40px; }\n        #slide-blue, #label-blue { top: 60px; }\n        #slide-hue, #label-hue { top: 80px; }\n        #slide-saturation, #label-saturation { top: 100px; }\n        #slide-luminance, #label-luminance { top: 120px; }\n    </style>\n</head>\n\n<body>\n    <div id=\"container\"></div>\n\n    <!-- Sliders to adjust the red, green, blue, and brightness levels of an image -->\n\n    <input id=\"slide-red\" type=\"range\" min=\"0\" max=\"255\" step=\"1\" value=\"127\" />\n    <label id=\"label-red\" for=\"slide-red\">Red</label>\n\n    <input id=\"slide-green\" type=\"range\" min=\"0\" max=\"255\" step=\"1\" value=\"127\" />\n    <label id=\"label-green\" for=\"slide-green\">Green</label>\n\n    <input id=\"slide-blue\" type=\"range\" min=\"0\" max=\"255\" step=\"1\" value=\"127\" />\n    <label id=\"label-blue\" for=\"slide-blue\">Blue</label>\n\n    <input id=\"slide-hue\" type=\"range\" min=\"0\" max=\"360\" step=\"1\" value=\"0\">\n    <label id=\"label-hue\" for=\"slide-hue\">Hue</label>\n\n    <input id=\"slide-saturation\" type=\"range\" min=\"-2\" max=\"2\" step=\"0.05\" value=\"0\">\n    <label id=\"label-saturation\" for=\"slide-saturation\">Saturation</label>\n\n    <input id=\"slide-luminance\" type=\"range\" min=\"-2\" max=\"2\" step=\"0.05\" value=\"0\">\n    <label id=\"label-luminance\" for=\"slide-luminance\">Luminance</label>\n\n    <script src=\"http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v5.1.0.min.js\"></script>\n    <script defer=\"defer\">\n        // Custom filter for adding or subtraction r,g,b colors\n        Kinetic.Filters.rgbAdjust = function (imageData) {\n            var rAdj = this.red() - 127,\n                gAdj = this.green() - 127,\n                bAdj = this.blue() - 127,\n                data = imageData.data,\n                len = data.length,\n                i, r, g, b;\n            for (i = 0; i < len; i += 4) {\n                r = data[i] + rAdj * 2;\n                g = data[i + 1] + gAdj * 2;\n                b = data[i + 2] + bAdj * 2;\n                data[i] = (r > 255) ? 255 : (r < 0) ? 0 : r;\n                data[i + 1] = (g > 255) ? 255 : (g < 0) ? 0 : g;\n                data[i + 2] = (b > 255) ? 255 : (b < 0) ? 0 : b;\n            }\n        };\n\n        var imageObj = new Image();\n        imageObj.onload = function () {\n\n            // Create the stage and layer to show the image\n            var stage = new Kinetic.Stage({\n                container: 'container',\n                width: 578,\n                height: 300\n            });\n            var layer = new Kinetic.Layer();\n            darth = new Kinetic.Image({\n                x: 10,\n                y: 10,\n                image: imageObj,\n                draggable: true\n            });\n            layer.add(darth);\n            stage.add(layer);\n\n            // Read the inputs, apply them to the image, and redraw the layer\n            function redraw() {\n                darth.cache();\n                darth.filters([Kinetic.Filters.rgbAdjust, Kinetic.Filters.HSL]);\n                darth.red(document.getElementById('slide-red').value);\n                darth.green(document.getElementById('slide-green').value);\n                darth.blue(document.getElementById('slide-blue').value);\n                darth.hue(document.getElementById('slide-hue').value);\n                darth.saturation(document.getElementById('slide-saturation').value);\n                darth.luminance(document.getElementById('slide-luminance').value);\n                darth.getLayer().draw();\n            }\n\n            // Automatically redraw the image when the sliders change\n            document.getElementById('slide-red').onchange = redraw;\n            document.getElementById('slide-green').onchange = redraw;\n            document.getElementById('slide-blue').onchange = redraw;\n            document.getElementById('slide-hue').onchange = redraw;\n            document.getElementById('slide-saturation').onchange = redraw;\n            document.getElementById('slide-luminance').onchange = redraw;\n\n            // Draw the image with the default slider values\n            redraw();\n        };\n        imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg';\n    </script>\n</body>\n</html>\n```\n\nHope this helps!\n. ",
    "michaeldurland": "Yes, when I try to drag an object I see an error in the console:\n\nTypeError: 'undefined' is not a function (evaluating 'raf(callback)')     kinetic-v4.5.0.js:3207\n. That fixed it, thanks!\n. Yes, when I try to drag an object I see an error in the console:\n\nTypeError: 'undefined' is not a function (evaluating 'raf(callback)')     kinetic-v4.5.0.js:3207\n. That fixed it, thanks!\n. ",
    "vn11": "\"Viewport\" was actually the solution of all my problems. This little code snipped saved my day ;) \n\n`<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=no\">`\n\nThank you so much for answering so fast, and thank you for the most awesome html5 canvas framework ;)\n. It works awesomly well, but in my case it doesn't seem to adjust the hit-regions. Am I missing something?\n. \"Viewport\" was actually the solution of all my problems. This little code snipped saved my day ;) \n\n`<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=no\">`\n\nThank you so much for answering so fast, and thank you for the most awesome html5 canvas framework ;)\n. It works awesomly well, but in my case it doesn't seem to adjust the hit-regions. Am I missing something?\n. ",
    "jackdoyle": "Thanks for sharing the concerns, guys. Of course I applaud Eric's decision to recommend GSAP as the animation tool of choice in KineticJS (not that I'm biased or anything) because there are HUGE workflow benefits, plus a bunch of added capabilities and even enhanced speed. It's a bold move that I think benefits users quite a bit, but I totally understand the push-back about dependencies and even licensing. Eric and I are discussing that now. \n\nIf the native stuff is left in, not only is there a file size and API bloat cost, but Eric would have to enhance and maintain that stuff too over time. And it just can't compare to all the stuff GSAP can do, so ultimately do you guys feel it's wise to keep it in there? Every minute Eric works on transition-related stuff is a minute he's not spending on another feature or bug fix. \n\nJust to clarify, virtually all uses (including most commercial uses) are covered under the standard no-charge license. See http://www.greensock.com/licensing/ for details. It's extremely rare that folks need the special license (I'd guess 2% or less of users). And that license is responsible for getting the engine to where it's at today maturity-wise. GSAP represents many thousands of hours of development, refinement, optimization, documentation, support, etc.\n\nThanks for chiming in, atomictag, with your experience. \n\nmihhail-lapushkin, one of the reasons your version might be running a bit slower is because you're doing a few expensive tasks in there, like \"delete\" three times and 2 nested for...in loops. In all my tests, TweenLite was faster than the native transition stuff in KineticJS, sometimes by a wide margin. I'd be curious to see a simple demo that indicates otherwise (not arguing - just genuinely curious).\n. By the way, mihhail-lapushkin, you said that v4.5 had some major issues in CocoonJS on mobile, right? As if RAF wasn't working correctly? I haven't looked at the KineticJS source, so I cannot confirm this (Eric, please chime in), but I do know that iOS Safari has a bug (the browser itself) that causes requestAnimationFrame to only fire a few times initially and then suddenly stop. I wonder if something like that is at play here. This only happens the first time you load a page, but when you refresh, things work fine. GSAP has a workaround in place (it automatically falls back to using setTimeout() in this scenario) so that should work seamlessly, but if KineticJS isn't working around that bug with the RAF, that could explain why the batchDraw() stuff seemed to cut out. If you're using GSAP, you can add a \"tick\" listener to TweenLite.ticker to drive whatever you want, and it should work consistently (instead of relying directly on RAF). \n\nTo be clear, normal polyfills don't work around that particular bug because the browser technically does support RAF but it just breaks at times. \n\nMaybe none of this is the least bit applicable here - I just figured I'd mention it in case it's helpful somehow. \n. Thanks for sharing the concerns, guys. Of course I applaud Eric's decision to recommend GSAP as the animation tool of choice in KineticJS (not that I'm biased or anything) because there are HUGE workflow benefits, plus a bunch of added capabilities and even enhanced speed. It's a bold move that I think benefits users quite a bit, but I totally understand the push-back about dependencies and even licensing. Eric and I are discussing that now. \n\nIf the native stuff is left in, not only is there a file size and API bloat cost, but Eric would have to enhance and maintain that stuff too over time. And it just can't compare to all the stuff GSAP can do, so ultimately do you guys feel it's wise to keep it in there? Every minute Eric works on transition-related stuff is a minute he's not spending on another feature or bug fix. \n\nJust to clarify, virtually all uses (including most commercial uses) are covered under the standard no-charge license. See http://www.greensock.com/licensing/ for details. It's extremely rare that folks need the special license (I'd guess 2% or less of users). And that license is responsible for getting the engine to where it's at today maturity-wise. GSAP represents many thousands of hours of development, refinement, optimization, documentation, support, etc.\n\nThanks for chiming in, atomictag, with your experience. \n\nmihhail-lapushkin, one of the reasons your version might be running a bit slower is because you're doing a few expensive tasks in there, like \"delete\" three times and 2 nested for...in loops. In all my tests, TweenLite was faster than the native transition stuff in KineticJS, sometimes by a wide margin. I'd be curious to see a simple demo that indicates otherwise (not arguing - just genuinely curious).\n. By the way, mihhail-lapushkin, you said that v4.5 had some major issues in CocoonJS on mobile, right? As if RAF wasn't working correctly? I haven't looked at the KineticJS source, so I cannot confirm this (Eric, please chime in), but I do know that iOS Safari has a bug (the browser itself) that causes requestAnimationFrame to only fire a few times initially and then suddenly stop. I wonder if something like that is at play here. This only happens the first time you load a page, but when you refresh, things work fine. GSAP has a workaround in place (it automatically falls back to using setTimeout() in this scenario) so that should work seamlessly, but if KineticJS isn't working around that bug with the RAF, that could explain why the batchDraw() stuff seemed to cut out. If you're using GSAP, you can add a \"tick\" listener to TweenLite.ticker to drive whatever you want, and it should work consistently (instead of relying directly on RAF). \n\nTo be clear, normal polyfills don't work around that particular bug because the browser technically does support RAF but it just breaks at times. \n\nMaybe none of this is the least bit applicable here - I just figured I'd mention it in case it's helpful somehow. \n. ",
    "rapPayne": "Sorry.  I didn't see \"transtionTo()\" in the release notes.  Thanks for clarifying it.\n\nWhile I appreciate the active improvements, can I make a suggestion?  Keep the old methods around in the API for backward compatibility.  You can simply alias the old ones to your new methods but our code will still work.\n\nWe should be able to upgrade to the newest version without worrying about something breaking, IMHO.\n\nOn May 10, 2013, at 8:00 PM, Eric Rowell wrote:\n\n> transitions didn't \"stop working\" in 4.5.0, they were removed in favor of GS transitions. Here's the changelog:\n> \n> https://github.com/ericdrowell/KineticJS/wiki/Change-Log\n> \n> fortunately, I've decided to drop this as well, and put back in a new Tween class that will perform better than Transition. This will be added back into 4.5.1. Sorry for the confusion! stay tuned.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. Sorry.  I didn't see \"transtionTo()\" in the release notes.  Thanks for clarifying it.\n\nWhile I appreciate the active improvements, can I make a suggestion?  Keep the old methods around in the API for backward compatibility.  You can simply alias the old ones to your new methods but our code will still work.\n\nWe should be able to upgrade to the newest version without worrying about something breaking, IMHO.\n\nOn May 10, 2013, at 8:00 PM, Eric Rowell wrote:\n\n> transitions didn't \"stop working\" in 4.5.0, they were removed in favor of GS transitions. Here's the changelog:\n> \n> https://github.com/ericdrowell/KineticJS/wiki/Change-Log\n> \n> fortunately, I've decided to drop this as well, and put back in a new Tween class that will perform better than Transition. This will be added back into 4.5.1. Sorry for the confusion! stay tuned.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n. ",
    "silently": "Hello Eric,\n\nI think re-introducing Node#transitionTo would be a good idea not to break existing apps between 4.4.x and 4.5.x KineticJS versions. Under the hood, transitionTo could link to your new Kinetic.Tween class rather than the old Kinetic.Transition one, so this would be a win-win regarding backward compatibility and 4.5.x improvements.\n. Hello Eric,\n\nI think re-introducing Node#transitionTo would be a good idea not to break existing apps between 4.4.x and 4.5.x KineticJS versions. Under the hood, transitionTo could link to your new Kinetic.Tween class rather than the old Kinetic.Transition one, so this would be a win-win regarding backward compatibility and 4.5.x improvements.\n. ",
    "peterp": "Are you saying that using setX/Y is faster than using the constructor options?\n\nCould you mention why?\n. Fill pattern images seem pretty \"jagged\" when animating. Do you have any performance tips for this? \n\nI eventually improved the smoothness of the animation by converting the shapes into images.\n. Are you saying that using setX/Y is faster than using the constructor options?\n\nCould you mention why?\n. Fill pattern images seem pretty \"jagged\" when animating. Do you have any performance tips for this? \n\nI eventually improved the smoothness of the animation by converting the shapes into images.\n. ",
    "sirsquall": "kinetic-v4.5.1.js:5766   \n\nYou only set the position if the length is === 1 so when the user use those two finger the touchPos is not setted, is for that we have this error.\n\nWhy limit the drag to only one finger  ?\n. Okey thanks :+1:  nice job \n. kinetic-v4.5.1.js:5766   \n\nYou only set the position if the length is === 1 so when the user use those two finger the touchPos is not setted, is for that we have this error.\n\nWhy limit the drag to only one finger  ?\n. Okey thanks :+1:  nice job \n. ",
    "yoonchulkoh": "I have solved by myself. \nhttp://jsfiddle.net/5ZgyP/1/\n. Oops!Sorry.\nThis was the solution of another problem...\nThis problem is not solved. \n. I want to scroll the whole screen of iPhone. \nI do not want to carry out scrolling in canvas area. \n. I have solved by myself. \nhttp://jsfiddle.net/5ZgyP/1/\n. Oops!Sorry.\nThis was the solution of another problem...\nThis problem is not solved. \n. I want to scroll the whole screen of iPhone. \nI do not want to carry out scrolling in canvas area. \n. ",
    "dandyling": "I updated the fiddle to include a 'mousemove' event.  \nhttp://jsfiddle.net/GXWFY/13/\n\nThe click event is not triggered around these areas. \n[91, 96], [93, 94]\n\nI am not sure of the exact coordinate, because the 'mousemove' event doesnt seem to capture every single pixel change, but clicking around the coordinates above for a lot of times should yield the 'bug' region.   \n. Hi,\n\n  I tested this on the new 4.5.2 release and I can still reproduce the bug.  The following is the fiddle.  \nhttp://jsfiddle.net/GXWFY/19/\n\n  I can still triggle it around this area [93, 94]\n. I zoomed in on the hit graph and see what you mean by the anti-aliased pixels.  \n\nThank you very much for the workaround, it seems to work.\n. Same confusion happened to me, thought that cornerRadius for Kinetic.Tag had been implemented.  Isit possible to put a note on the Docs page http://kineticjs.com/docs/Kinetic.Tag.html that it has yet to be implemented to avoid confusion to other users?  Thank you :)\n. I encountered the same problem as described in the opening post, caused by a group formed by a shape and a text.  This is most likely a replicate of issue 455, which is due to anti-alias pixels.\n\nhttps://github.com/ericdrowell/KineticJS/issues/455#issuecomment-18070469\n. I updated the fiddle to include a 'mousemove' event.  \nhttp://jsfiddle.net/GXWFY/13/\n\nThe click event is not triggered around these areas. \n[91, 96], [93, 94]\n\nI am not sure of the exact coordinate, because the 'mousemove' event doesnt seem to capture every single pixel change, but clicking around the coordinates above for a lot of times should yield the 'bug' region.   \n. Hi,\n\n  I tested this on the new 4.5.2 release and I can still reproduce the bug.  The following is the fiddle.  \nhttp://jsfiddle.net/GXWFY/19/\n\n  I can still triggle it around this area [93, 94]\n. I zoomed in on the hit graph and see what you mean by the anti-aliased pixels.  \n\nThank you very much for the workaround, it seems to work.\n. Same confusion happened to me, thought that cornerRadius for Kinetic.Tag had been implemented.  Isit possible to put a note on the Docs page http://kineticjs.com/docs/Kinetic.Tag.html that it has yet to be implemented to avoid confusion to other users?  Thank you :)\n. I encountered the same problem as described in the opening post, caused by a group formed by a shape and a text.  This is most likely a replicate of issue 455, which is due to anti-alias pixels.\n\nhttps://github.com/ericdrowell/KineticJS/issues/455#issuecomment-18070469\n. ",
    "nicktgr15": "I had a similar issue while trying to make a button using a Group containing a Rect and a Path (on top of the Rect). Since the SVG path was scaled I think antialiasing couldn't be avoided and the 'click' event was not firing on specific pixels. \n\nAs a workaround I used an \"overlay\" Rect with zero opacity on top of the original Rect and Path elements.  (the listener for the 'click' event is now on the 'overlay' Rect)\n. I had a similar issue while trying to make a button using a Group containing a Rect and a Path (on top of the Rect). Since the SVG path was scaled I think antialiasing couldn't be avoided and the 'click' event was not firing on specific pixels. \n\nAs a workaround I used an \"overlay\" Rect with zero opacity on top of the original Rect and Path elements.  (the listener for the 'click' event is now on the 'overlay' Rect)\n. ",
    "hosamshahin": "@nicktgr15 :thumbsup:\n. @nicktgr15 :thumbsup:\n. ",
    "aparmar06": "Hi Eric, still getting this issue. Tried to edit the example of the drag and drop, with no luck.\n\nhttp://jsfiddle.net/tqZeN/\n. Hi Cory\n\nSO I am on Chrome 27, Windows 7 64 bit. I have had no luck with that patch, I have updated the jsfiddle to v4.5.3 and it still doesnt work. Any help would be much appreciated.\n. Hi Eric, still getting this issue. Tried to edit the example of the drag and drop, with no luck.\n\nhttp://jsfiddle.net/tqZeN/\n. Hi Cory\n\nSO I am on Chrome 27, Windows 7 64 bit. I have had no luck with that patch, I have updated the jsfiddle to v4.5.3 and it still doesnt work. Any help would be much appreciated.\n. ",
    "srycroft": "For those interested, I changed the program to not destroy/create the layer on a refresh, but instead called .destroy() on all of the layer's children individually and re-added the shapes to the same layer.  (Could probably use a .destroyChildren() type function on the layer instead of having to do it manually).\n\nI am no longer getting the storage error in IE 10 after this change, but the original issue is still there when destroying/recreating the layer.\n. For those interested, I changed the program to not destroy/create the layer on a refresh, but instead called .destroy() on all of the layer's children individually and re-added the shapes to the same layer.  (Could probably use a .destroyChildren() type function on the layer instead of having to do it manually).\n\nI am no longer getting the storage error in IE 10 after this change, but the original issue is still there when destroying/recreating the layer.\n. ",
    "UmeshKanyal": "I found the alternate to transitionTo(), i.e. Tween() which resolved my problem.\nThank You\nUmesh \n. No, it is not working... The above mentioned issues are still there with v4.5.2.\n. OS is 64 bit Windows 7 Professional\n. Do you have any known issues with 64 bit windows 7?\n. I have already submitted this issue to chrome but didn't got any reply from them...\n. Today I updated my chrome version to (27.0.1453.94 m), the above stated issues by me i.e. circle fillcolor and drag event associated to circle were working perfectly fine, however got another issue where as stated below:-\n\nI have created a second layer over my background image, containing a group (having + and - images) to zoom in and zoom out the map. These images are not visible so cannot zoom in and zoom out the map..\n. Image drag drop is also not working...\n. Eric, I have tested the image drag and drop functionality on other browsers i.e.IE9 and Firefox 20 and it is working perfectly fine but in chrome 27 the images are not draggable. The newer versions of chrome i.e. 26 and 27 broke the drag drop functionality in chrome, it was working fine in older versions of chrome as well.\nThe other issue is, I have created a second layer over my background image, containing a group (having + and - images) to zoom in and zoom out the map. These images are not visible so cannot zoom in and zoom out the map. This feature is also working fine in IE9 and Firefox 20 but not in chrome 27.\n. Eric, I am not getting the issue for circle rendering as rectangles in chrome 27.0.1453.94. Kurt and corandy have faced this issue.\n. Thanks Eric, I downloaded the KineticJS v4.5.4 and the issues which I have reported related to Chrome are now resolved.\n. I found the alternate to transitionTo(), i.e. Tween() which resolved my problem.\nThank You\nUmesh \n. No, it is not working... The above mentioned issues are still there with v4.5.2.\n. OS is 64 bit Windows 7 Professional\n. Do you have any known issues with 64 bit windows 7?\n. I have already submitted this issue to chrome but didn't got any reply from them...\n. Today I updated my chrome version to (27.0.1453.94 m), the above stated issues by me i.e. circle fillcolor and drag event associated to circle were working perfectly fine, however got another issue where as stated below:-\n\nI have created a second layer over my background image, containing a group (having + and - images) to zoom in and zoom out the map. These images are not visible so cannot zoom in and zoom out the map..\n. Image drag drop is also not working...\n. Eric, I have tested the image drag and drop functionality on other browsers i.e.IE9 and Firefox 20 and it is working perfectly fine but in chrome 27 the images are not draggable. The newer versions of chrome i.e. 26 and 27 broke the drag drop functionality in chrome, it was working fine in older versions of chrome as well.\nThe other issue is, I have created a second layer over my background image, containing a group (having + and - images) to zoom in and zoom out the map. These images are not visible so cannot zoom in and zoom out the map. This feature is also working fine in IE9 and Firefox 20 but not in chrome 27.\n. Eric, I am not getting the issue for circle rendering as rectangles in chrome 27.0.1453.94. Kurt and corandy have faced this issue.\n. Thanks Eric, I downloaded the KineticJS v4.5.4 and the issues which I have reported related to Chrome are now resolved.\n. ",
    "reapersa": "Experiencing the same issue. Noticed Rects not displaying at all (Windows 7 x64). Uninstalled Chrome (was at Version 27.0.1453.94 m), reboot, re-install (same version). Now, _some_ Rects are drawing, but Circles are now rendering as unfilled Rects.... totally breaks Kinetic for me. Also, looks like some mouse event handling (click) is broken (though I haven't confirmed that this isn't caused by me somewhere).\n\nUPDATE: So, played around with my code, changing Circle stroke property from \"white\" or \"#ffffff\" to \"#fffffe\" renderers correctly (as opposed to solid white rectangle)... strange. Some Rects still missing.\n\nUPDATE 2: Definitely chrome issue. Responsible for mouse events issue, as well. Running chrome with --disable-accelerated-2d-canvas fixes all issues.\n. Experiencing the same issue. Noticed Rects not displaying at all (Windows 7 x64). Uninstalled Chrome (was at Version 27.0.1453.94 m), reboot, re-install (same version). Now, _some_ Rects are drawing, but Circles are now rendering as unfilled Rects.... totally breaks Kinetic for me. Also, looks like some mouse event handling (click) is broken (though I haven't confirmed that this isn't caused by me somewhere).\n\nUPDATE: So, played around with my code, changing Circle stroke property from \"white\" or \"#ffffff\" to \"#fffffe\" renderers correctly (as opposed to solid white rectangle)... strange. Some Rects still missing.\n\nUPDATE 2: Definitely chrome issue. Responsible for mouse events issue, as well. Running chrome with --disable-accelerated-2d-canvas fixes all issues.\n. ",
    "garrinmf": "So, I'm seeing the exact same thing where things aren't rendering, lines and rectangles specifically, in Chrome 27.  I experience the exact thing that robodude demonstrates in his jsfiddle where lines don't show up as well as a bg rectangle not showing up.  It works in firefox/IE/chrome < 27, but fails in Chrome 27.\n\nIn an effort to debug I've recreated how I create things in my application, just on a much simpler scale.  Still creating a custom group, still grouping, but basic.  I've found that the basics work just fine:\n\nhttp://jsfiddle.net/tR8Fd/13/\n\nI then took the relevant bits from the fiddle and manually added them to my application via the Chrome console, and it started not rendering everything, only the circles show up like before.  \n\nI've taken the toJSON from my application's stage and loaded it in a jsfiddle and while in my application the stage in question only renders the circles, in the fiddle it renders just fine.\nhttp://jsfiddle.net/j7YNK/1/\n\nIt would seem to be my code, yet at the same time, using reapersa's update on starting Chrome with the --disable-accelerated-2d-canvas arg fixed everything for me too. \n\nSo it's a Chrome problem, that I might be able to fix via code changes in my application and/or kineticjs?  Unfortunately I can't expose my application.\n. So, I'm seeing the exact same thing where things aren't rendering, lines and rectangles specifically, in Chrome 27.  I experience the exact thing that robodude demonstrates in his jsfiddle where lines don't show up as well as a bg rectangle not showing up.  It works in firefox/IE/chrome < 27, but fails in Chrome 27.\n\nIn an effort to debug I've recreated how I create things in my application, just on a much simpler scale.  Still creating a custom group, still grouping, but basic.  I've found that the basics work just fine:\n\nhttp://jsfiddle.net/tR8Fd/13/\n\nI then took the relevant bits from the fiddle and manually added them to my application via the Chrome console, and it started not rendering everything, only the circles show up like before.  \n\nI've taken the toJSON from my application's stage and loaded it in a jsfiddle and while in my application the stage in question only renders the circles, in the fiddle it renders just fine.\nhttp://jsfiddle.net/j7YNK/1/\n\nIt would seem to be my code, yet at the same time, using reapersa's update on starting Chrome with the --disable-accelerated-2d-canvas arg fixed everything for me too. \n\nSo it's a Chrome problem, that I might be able to fix via code changes in my application and/or kineticjs?  Unfortunately I can't expose my application.\n. ",
    "Xav68": "Yes, rectangles instead of circles phenomen also happens on Mac OSX. But it seems to be solved with the last version of Chrome !\n\nEDIT : Actually not... The bug reappears just now I don't know why yet. I am going to investigate. \n. Yes, rectangles instead of circles phenomen also happens on Mac OSX. But it seems to be solved with the last version of Chrome !\n\nEDIT : Actually not... The bug reappears just now I don't know why yet. I am going to investigate. \n. ",
    "paullexen": "Looks like the circle-rendering-as-rectangle issue is a chrome canvas bug: http://code.google.com/p/chromium/issues/detail?id=243996\n\nHere's an example of a non-kineticjs app with this issue:\nhttp://www.instantatlas.com/demos/v6/v661/HTML/UK/sm_advanced_pie_chart/atlas.html\n. Looks like the circle-rendering-as-rectangle issue is a chrome canvas bug: http://code.google.com/p/chromium/issues/detail?id=243996\n\nHere's an example of a non-kineticjs app with this issue:\nhttp://www.instantatlas.com/demos/v6/v661/HTML/UK/sm_advanced_pie_chart/atlas.html\n. ",
    "jarrettroth": "I am also have issues, with chrome and line drawing.  It draws on all browsers reliably except for chrome (latest) on mac os.  I have noticed that if you disable hardware acceleration in the chrome advanced settings, everything works as normal.   I first noticed this on line drawing, but it seems that it also affects fill on circles as well.  Strangely enough I've seem to have success drawing lines when i use 3 points in a flat array of numbers for the points [x1, y1, x2, y2, x3, y3], but when i use only points [x1, y1, x2, y2].   The line doesn't draw.  \n\nI'm not sure what to do either.  Was there ever a resolution to this?\n. I actually wasn't knocking your library,  i just noticed that the lines would seem to draw if i did what I mentioned above.  Everything works wonderfully in other browsers.  It seems to be something with the hardware acceleration in chrome. I will test out the latest release tonight.  \n. I am also have issues, with chrome and line drawing.  It draws on all browsers reliably except for chrome (latest) on mac os.  I have noticed that if you disable hardware acceleration in the chrome advanced settings, everything works as normal.   I first noticed this on line drawing, but it seems that it also affects fill on circles as well.  Strangely enough I've seem to have success drawing lines when i use 3 points in a flat array of numbers for the points [x1, y1, x2, y2, x3, y3], but when i use only points [x1, y1, x2, y2].   The line doesn't draw.  \n\nI'm not sure what to do either.  Was there ever a resolution to this?\n. I actually wasn't knocking your library,  i just noticed that the lines would seem to draw if i did what I mentioned above.  Everything works wonderfully in other browsers.  It seems to be something with the hardware acceleration in chrome. I will test out the latest release tonight.  \n. ",
    "thomastai": "Tried official examples with Samsung Note and Note 2 using Android Chrome browser, none of them work...\n. Tried official examples with Samsung Note and Note 2 using Android Chrome browser, none of them work...\n. ",
    "jjhester": "I am trying to work this through using KineticJS, but this is how I resolved a simple canvas. Assuming you are using jQuery, simply detach the canvas element from the DOM and add it back. Seems to minimally impact performance at all. Worked for me when the canvas.width and clearRect failed.\n\n``` javascript\nfunction fixCanvasDrawBug(canvas) {\n        var parent = $(canvas).parent();\n        var copy = $(canvas).detach();\n        parent.append(copy);\n}\n```\n. I am trying to work this through using KineticJS, but this is how I resolved a simple canvas. Assuming you are using jQuery, simply detach the canvas element from the DOM and add it back. Seems to minimally impact performance at all. Worked for me when the canvas.width and clearRect failed.\n\n``` javascript\nfunction fixCanvasDrawBug(canvas) {\n        var parent = $(canvas).parent();\n        var copy = $(canvas).detach();\n        parent.append(copy);\n}\n```\n. ",
    "JV1988": "The suggested work-arounds don't seem to work form me.\n\nLooks like this is the best solution I've found so far:\n\n$(window).resize(function (e) {\n        if (e.target == window) {\n            //android fix canvas duplicate issue\n            $('canvas').css('opacity', 0.99);\n            setTimeout(function () {\n                $('canvas').css('opacity', 1);\n            }, 0);\n        }\n    });\n\nBut I'm not sure this fixed the problem 100%, so please do share any other solutions\n. The suggested work-arounds don't seem to work form me.\n\nLooks like this is the best solution I've found so far:\n\n$(window).resize(function (e) {\n        if (e.target == window) {\n            //android fix canvas duplicate issue\n            $('canvas').css('opacity', 0.99);\n            setTimeout(function () {\n                $('canvas').css('opacity', 1);\n            }, 0);\n        }\n    });\n\nBut I'm not sure this fixed the problem 100%, so please do share any other solutions\n. ",
    "jeremib": "Thanks @jjhester, that work around worked for me for now.\n. Thanks @jjhester, that work around worked for me for now.\n. ",
    "dbelay22": "Hi people,\nI had the same issue dragging a group with an image and a couple of shapes inside. The timeout workaround didn't work for me and I only was able to solve it moving the draggable layer to the top on the contentTouchMove event:\n\n this.stage.on('contentTouchmove', function(evt) { selectedGroup.getLayer().moveToTop(); }\n\nI'll keep searching for a better solution as this may kill performance.\n\nHope this helps.\n. Hi people,\nI had the same issue dragging a group with an image and a couple of shapes inside. The timeout workaround didn't work for me and I only was able to solve it moving the draggable layer to the top on the contentTouchMove event:\n\n<code>\nthis.stage.on('contentTouchmove', function(evt) {\nselectedGroup.getLayer().moveToTop();\n}\n<code>\n\nI'll keep searching for a better solution as this may kill performance.\n\nHope this helps.\n. Hi people,\nI had the same issue dragging a group with an image and a couple of shapes inside. The timeout workaround didn't work for me and I only was able to solve it moving the draggable layer to the top on the contentTouchMove event:\n\n this.stage.on('contentTouchmove', function(evt) { selectedGroup.getLayer().moveToTop(); }\n\nI'll keep searching for a better solution as this may kill performance.\n\nHope this helps.\n. Hi people,\nI had the same issue dragging a group with an image and a couple of shapes inside. The timeout workaround didn't work for me and I only was able to solve it moving the draggable layer to the top on the contentTouchMove event:\n\n<code>\nthis.stage.on('contentTouchmove', function(evt) {\nselectedGroup.getLayer().moveToTop();\n}\n<code>\n\nI'll keep searching for a better solution as this may kill performance.\n\nHope this helps.\n. ",
    "wangyanxi": "``` JavaScript\n// forgot var \nRAF = (function() {\n```\n\n``` JavaScript\n// forgot comma\nTOUCHSTART = 'touchstart'\nTOUCHEND = 'touchend'\nTAP = 'tap',    \n```\n. @ericdrowell , they became global because there are some mistake. you can see my comment before. \n\nand try it yourself with http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.5.2.js\n. sorry, the title is a bit confusing. \n. ``` JavaScript\n// forgot var \nRAF = (function() {\n```\n\n``` JavaScript\n// forgot comma\nTOUCHSTART = 'touchstart'\nTOUCHEND = 'touchend'\nTAP = 'tap',    \n```\n. @ericdrowell , they became global because there are some mistake. you can see my comment before. \n\nand try it yourself with http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.5.2.js\n. sorry, the title is a bit confusing. \n. ",
    "ururk": "Ah, ok. I didn't see that in the documentation, so thought this was a bug.\n. I switched - and it still has extra events (Safari 7.0.1 (9537.73.11)):\n\nhttp://jsfiddle.net/ururk/FvMPA/4/\n\nHover over the border between the oval and the rect and move the mouse back and forth several times. Not every time, but sometimes groupEnter / groupLeave is being incremented. I based this off of jQuery's example: https://api.jquery.com/mouseenter/\n. I saw #198 and thought it might be related. Also - I didn't test this extensively, but it may be that the automated tests pass because the mouse cursor speed in the testing machine isn't the same as a person.\n. Ah, ok. I didn't see that in the documentation, so thought this was a bug.\n. I switched - and it still has extra events (Safari 7.0.1 (9537.73.11)):\n\nhttp://jsfiddle.net/ururk/FvMPA/4/\n\nHover over the border between the oval and the rect and move the mouse back and forth several times. Not every time, but sometimes groupEnter / groupLeave is being incremented. I based this off of jQuery's example: https://api.jquery.com/mouseenter/\n. I saw #198 and thought it might be related. Also - I didn't test this extensively, but it may be that the automated tests pass because the mouse cursor speed in the testing machine isn't the same as a person.\n. ",
    "bernardofd": "I can vouch for this issue as well. I have a non-interactive application over KineticJS and all my tweens in a scene duplicate objects with a little offset in the Y axis (even if the tween is over the X axis). I'm attaching a screenshot taken on a Samsung Galaxy Tab 2 7.0 running Jelly Bean (4.1.1) on the Android Browser.\n![screenshot_2013-06-28-12-15-56](https://f.cloud.github.com/assets/2365802/722725/5b0eb7b8-e007-11e2-9011-a35ffff2e148.png)\n. If I may comment on this issue with an example, why [this path](http://jsfiddle.net/bernardofd/vvd87737/) can't be filled like this (made with free-drawing on FabricJS)?\n![image](https://cloud.githubusercontent.com/assets/2365802/4812964/84b89632-5ec4-11e4-9fea-4d72c6424dc9.png)\n. @jfollas Yes, indeed. Thank you for your response. But this might not be the end result that the user may want, since it creates a black line that closes the polygon. In order to reproduce exactly, I may have to create two overlapping paths, one with the stroke and other with the fill, as seen [here](http://jsfiddle.net/bernardofd/vvd87737/2/) (enhanced).\n. @jfollas Very nice. It did the trick. For my application, creating two Paths was not a viable solution.\n\nThank you.\n. +1 for legacy documentation. I froze KineticJS version on production on v4.5.4 and because the v5 changed the API a lot, is really troublesome finding documentation on older versions.\n\nMy suggestion: do it like the ExpressJS site: they have the [current version doc (v3+)](http://expressjs.com/guide.html) but keep a [v2.x.x version of the docs](http://expressjs.com/2x/guide.html). So a v4.x.x documentation page would be sufficient (only major versions).\n. THANK YOU! It is SO SIMPLE! :)\n\nI even had to dig into the source code and I couldn't find the reason why it wouldn't work. You're a life saver, Mr. @lavrton! :)\n. I can vouch for this issue as well. I have a non-interactive application over KineticJS and all my tweens in a scene duplicate objects with a little offset in the Y axis (even if the tween is over the X axis). I'm attaching a screenshot taken on a Samsung Galaxy Tab 2 7.0 running Jelly Bean (4.1.1) on the Android Browser.\n![screenshot_2013-06-28-12-15-56](https://f.cloud.github.com/assets/2365802/722725/5b0eb7b8-e007-11e2-9011-a35ffff2e148.png)\n. If I may comment on this issue with an example, why [this path](http://jsfiddle.net/bernardofd/vvd87737/) can't be filled like this (made with free-drawing on FabricJS)?\n![image](https://cloud.githubusercontent.com/assets/2365802/4812964/84b89632-5ec4-11e4-9fea-4d72c6424dc9.png)\n. @jfollas Yes, indeed. Thank you for your response. But this might not be the end result that the user may want, since it creates a black line that closes the polygon. In order to reproduce exactly, I may have to create two overlapping paths, one with the stroke and other with the fill, as seen [here](http://jsfiddle.net/bernardofd/vvd87737/2/) (enhanced).\n. @jfollas Very nice. It did the trick. For my application, creating two Paths was not a viable solution.\n\nThank you.\n. +1 for legacy documentation. I froze KineticJS version on production on v4.5.4 and because the v5 changed the API a lot, is really troublesome finding documentation on older versions.\n\nMy suggestion: do it like the ExpressJS site: they have the [current version doc (v3+)](http://expressjs.com/guide.html) but keep a [v2.x.x version of the docs](http://expressjs.com/2x/guide.html). So a v4.x.x documentation page would be sufficient (only major versions).\n. THANK YOU! It is SO SIMPLE! :)\n\nI even had to dig into the source code and I couldn't find the reason why it wouldn't work. You're a life saver, Mr. @lavrton! :)\n. ",
    "sebastianovide": "this is what I see in my device... after dragging a rectangle\n\n![screenshot from 2013-08-27 23 52 33](https://f.cloud.github.com/assets/1496395/1038997/1814ec2a-0f73-11e3-90ef-2a046cf22f79.png)\n. this is what I see in my device... after dragging a rectangle\n\n![screenshot from 2013-08-27 23 52 33](https://f.cloud.github.com/assets/1496395/1038997/1814ec2a-0f73-11e3-90ef-2a046cf22f79.png)\n. ",
    "scheng2013": "Hi everyone,\n\nWas this resolved? Now I am also in this hole. Does anyone have a proper solution to fix it?\n. Hi guys, what's the plan on fixing this issue? We need IOS. Thanks.\n. Hi guys, When will we meet the next release?\n. Do you have another way to resolve it now?\n. Hi ericdrowell,\n\nThank you for this information. \n\nThanks,\n\nSean\n\nDate: Tue, 7 Jan 2014 16:15:15 -0800\nFrom: notifications@github.com\nTo: KineticJS@noreply.github.com\nCC: xf_cheng@hotmail.com\nSubject: Re: [KineticJS] Fix Issue Where Large Images Get Vertically Squashed In iOS6 & iOS7 (#654)\n\nI'm still in the process of wrapping up the new documentation for all of the API changes in v5.0.0. It's the biggest release in KineticJS's history. Since this seems like a pretty burning issue, I'll still try to get this fix in before I release. I plan to build a beta release and start doing integration testing with Html5CanvasTutorials by the end of this week. If things go smoothly, v5.0.0 should be released during the weekend, maybe sooner.\n\n\u00a1\u00aa\nReply to this email directly or view it on GitHub.                    \n. Hi Eric,\n\nLet's say it. Is this issue caused by IOS or KineticJS? Can we use viewport attribute to solve it? Any feedback?\n\nThanks,\n\nSean\n\nDate: Sun, 12 Jan 2014 02:45:25 -0800\nFrom: notifications@github.com\nTo: KineticJS@noreply.github.com\nCC: xf_cheng@hotmail.com\nSubject: Re: [KineticJS] Fix Issue Where Large Images Get Vertically Squashed In iOS6 & iOS7 (#654)\n\nHi ericdrowell, I see that there are not any solution for ios problem in v5.0.0 ? We have to wait until March? \n\n\u00a1\u00aa\nReply to this email directly or view it on GitHub.                    \n. Got it.\n\nDate: Sun, 12 Jan 2014 21:58:02 -0800\nFrom: notifications@github.com\nTo: KineticJS@noreply.github.com\nCC: xf_cheng@hotmail.com\nSubject: Re: [KineticJS] Fix Issue Where Large Images Get Vertically Squashed In iOS6 & iOS7 (#654)\n\nv5.0.0 was too big of a release, so I had to cut out a lot of things that I was planning on putting in (including a fix for this ticket).\n\nI'm planning on taking a week off and letting v5.0.0 stew a bit more to see if there are any issues (there's already one that I just fixed). I'll release v5.0.1 the following week (end of January) which will be a small patch that only contains high priority bug fixes. Here's the revised release schedule so far:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n\nStay tuned!\n\n\u00a1\u00aa\nReply to this email directly or view it on GitHub.                    \n. Eric,\n\nYou know IOS is a big eco-system, so it's important to me about our project. Can you schedule the version 5.0.2 in middle of Feb? Thanks.\n\nMay you build a seperate version for IOS squash image issue?\n. lavrton,\n\nThank you for this thread. You know we use Kimage class of kineticjs framework, so we need to know how to use this 3rd js to solve it and where the good place in kineticjs code is?\n. lavrton,\n\nThank you for this thread. You know we use Kimage class of kineticjs framework, so we need to know how to use this 3rd js to solve it and where the good place in kineticjs code is?\n. Really good!\n. Hi,\n\nBelow is the related information.\n\nV4.7.3 + IOS 7\n\nThe canvas is not big, it's equal to the width and height of your screen, but i load a big image into layer into this stage. Image is 3295 \\* 2900. \n\nThanks.\n. This problem was resolved. When i create a instance of kinetic.image, and then call setImage method to load image, it didn't work for me, but i put image object in parameters in constructor of kinetic.image, it works well.\n\nThanks.\n. Hi everyone,\n\nWas this resolved? Now I am also in this hole. Does anyone have a proper solution to fix it?\n. Hi guys, what's the plan on fixing this issue? We need IOS. Thanks.\n. Hi guys, When will we meet the next release?\n. Do you have another way to resolve it now?\n. Hi ericdrowell,\n\nThank you for this information. \n\nThanks,\n\nSean\n\nDate: Tue, 7 Jan 2014 16:15:15 -0800\nFrom: notifications@github.com\nTo: KineticJS@noreply.github.com\nCC: xf_cheng@hotmail.com\nSubject: Re: [KineticJS] Fix Issue Where Large Images Get Vertically Squashed In iOS6 & iOS7 (#654)\n\nI'm still in the process of wrapping up the new documentation for all of the API changes in v5.0.0. It's the biggest release in KineticJS's history. Since this seems like a pretty burning issue, I'll still try to get this fix in before I release. I plan to build a beta release and start doing integration testing with Html5CanvasTutorials by the end of this week. If things go smoothly, v5.0.0 should be released during the weekend, maybe sooner.\n\n\u00a1\u00aa\nReply to this email directly or view it on GitHub.                    \n. Hi Eric,\n\nLet's say it. Is this issue caused by IOS or KineticJS? Can we use viewport attribute to solve it? Any feedback?\n\nThanks,\n\nSean\n\nDate: Sun, 12 Jan 2014 02:45:25 -0800\nFrom: notifications@github.com\nTo: KineticJS@noreply.github.com\nCC: xf_cheng@hotmail.com\nSubject: Re: [KineticJS] Fix Issue Where Large Images Get Vertically Squashed In iOS6 & iOS7 (#654)\n\nHi ericdrowell, I see that there are not any solution for ios problem in v5.0.0 ? We have to wait until March? \n\n\u00a1\u00aa\nReply to this email directly or view it on GitHub.                    \n. Got it.\n\nDate: Sun, 12 Jan 2014 21:58:02 -0800\nFrom: notifications@github.com\nTo: KineticJS@noreply.github.com\nCC: xf_cheng@hotmail.com\nSubject: Re: [KineticJS] Fix Issue Where Large Images Get Vertically Squashed In iOS6 & iOS7 (#654)\n\nv5.0.0 was too big of a release, so I had to cut out a lot of things that I was planning on putting in (including a fix for this ticket).\n\nI'm planning on taking a week off and letting v5.0.0 stew a bit more to see if there are any issues (there's already one that I just fixed). I'll release v5.0.1 the following week (end of January) which will be a small patch that only contains high priority bug fixes. Here's the revised release schedule so far:\n\nhttps://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n\nStay tuned!\n\n\u00a1\u00aa\nReply to this email directly or view it on GitHub.                    \n. Eric,\n\nYou know IOS is a big eco-system, so it's important to me about our project. Can you schedule the version 5.0.2 in middle of Feb? Thanks.\n\nMay you build a seperate version for IOS squash image issue?\n. lavrton,\n\nThank you for this thread. You know we use Kimage class of kineticjs framework, so we need to know how to use this 3rd js to solve it and where the good place in kineticjs code is?\n. lavrton,\n\nThank you for this thread. You know we use Kimage class of kineticjs framework, so we need to know how to use this 3rd js to solve it and where the good place in kineticjs code is?\n. Really good!\n. Hi,\n\nBelow is the related information.\n\nV4.7.3 + IOS 7\n\nThe canvas is not big, it's equal to the width and height of your screen, but i load a big image into layer into this stage. Image is 3295 \\* 2900. \n\nThanks.\n. This problem was resolved. When i create a instance of kinetic.image, and then call setImage method to load image, it didn't work for me, but i put image object in parameters in constructor of kinetic.image, it works well.\n\nThanks.\n. ",
    "anissen": "I also experienced this problem on my HTC One using Chrome. However, it still works fine when the canvas is on a separate page (e.g. as on http://www.html5canvastutorials.com/demos/kineticjs/html5-canvas-mobile-events/index.php).\n\n_(As a side-note: Thank you, @ericdrowell, for your continued work on this brilliant project.)_\n. In that case, please change the following text in the \"[HTML5 Canvas Shape Layering with KineticJS](http://www.html5canvastutorials.com/kineticjs/html5-canvas-shape-layering-with-kineticjs/)\" layering tutorial:\n\n> You can also layer groups _and layers_.\n\nAlso, I too have been struggling with problems when trying to add layers to layers. It would be very nice to get some warning instead of just failing silently.\n. Awesome, this fixes my problems with the order of enter/leave events in my groups! \n\nThe problem can also be observed in the [layering tutorial](http://www.html5canvastutorials.com/kineticjs/html5-canvas-shape-layering-with-kineticjs/); the mouse cursor is changed back to normal when moving the cursor between elements of the group.\n\nThanks! :)\n. I have been having difficulties similar to those @ElliotChong describe. \n\nFor instance, in [this fiddle](http://jsfiddle.net/9Qqjz/2/) I would expect the texts with and without stroke to look the same on the left side, and the stroke only to be visible on the right side. Otherwise, it would be nice (if at all possible) with a property that would allow me to get that effect.\n. :+1: for Bower support!\n. Greensock has a library for creating draggable elements. Demo here: http://www.greensock.com/draggable/\n. It can manipulate any javascript object; DOM, objects being rendered through canvas, whatever. I'm using the Greensock Timeline system for my animation-heavy project and it is absolutely brilliant :)\n. I also experienced this problem on my HTC One using Chrome. However, it still works fine when the canvas is on a separate page (e.g. as on http://www.html5canvastutorials.com/demos/kineticjs/html5-canvas-mobile-events/index.php).\n\n_(As a side-note: Thank you, @ericdrowell, for your continued work on this brilliant project.)_\n. In that case, please change the following text in the \"[HTML5 Canvas Shape Layering with KineticJS](http://www.html5canvastutorials.com/kineticjs/html5-canvas-shape-layering-with-kineticjs/)\" layering tutorial:\n\n> You can also layer groups _and layers_.\n\nAlso, I too have been struggling with problems when trying to add layers to layers. It would be very nice to get some warning instead of just failing silently.\n. Awesome, this fixes my problems with the order of enter/leave events in my groups! \n\nThe problem can also be observed in the [layering tutorial](http://www.html5canvastutorials.com/kineticjs/html5-canvas-shape-layering-with-kineticjs/); the mouse cursor is changed back to normal when moving the cursor between elements of the group.\n\nThanks! :)\n. I have been having difficulties similar to those @ElliotChong describe. \n\nFor instance, in [this fiddle](http://jsfiddle.net/9Qqjz/2/) I would expect the texts with and without stroke to look the same on the left side, and the stroke only to be visible on the right side. Otherwise, it would be nice (if at all possible) with a property that would allow me to get that effect.\n. :+1: for Bower support!\n. Greensock has a library for creating draggable elements. Demo here: http://www.greensock.com/draggable/\n. It can manipulate any javascript object; DOM, objects being rendered through canvas, whatever. I'm using the Greensock Timeline system for my animation-heavy project and it is absolutely brilliant :)\n. ",
    "mitsui850711": "I try the site (http://www.html5canvastutorials.com/demos/kineticjs/html5-canvas-mobile-events/index.php) on my phone, only the \"touchmove\" event is bonded and it's response quite weak. \"touchstart\" and \"touchend\" didn't give any response.\n\nI try replace touch with mouse and click, didn't work in my android......\n\nWill it be android version too old causing the issue?\n. may i know what is \"Chrome 27 bug\"?\n. I try the site (http://www.html5canvastutorials.com/demos/kineticjs/html5-canvas-mobile-events/index.php) on my phone, only the \"touchmove\" event is bonded and it's response quite weak. \"touchstart\" and \"touchend\" didn't give any response.\n\nI try replace touch with mouse and click, didn't work in my android......\n\nWill it be android version too old causing the issue?\n. may i know what is \"Chrome 27 bug\"?\n. ",
    "sktehSnakeKing": "try @Hackencrash comment on https://github.com/ericdrowell/KineticJS/issues/499, disable accelerated 2D canvas and the issue is gone.\n\nwaiting for chrome update to fix the accelerated 2D canvas issue.\n. try @Hackencrash comment on https://github.com/ericdrowell/KineticJS/issues/499, disable accelerated 2D canvas and the issue is gone.\n\nwaiting for chrome update to fix the accelerated 2D canvas issue.\n. ",
    "magirtopcu": "When you apply stroke for a circle , it is drawn a rectangle instead of it.  Also when I apply  drawFunc that use \"context.arc\"  for a custom  shape , nothing is drawn. \n. Yeah. After turning angle difference value Math.PI_2 into Math.PI_1.99 , it started to run. \n. When you apply stroke for a circle , it is drawn a rectangle instead of it.  Also when I apply  drawFunc that use \"context.arc\"  for a custom  shape , nothing is drawn. \n. Yeah. After turning angle difference value Math.PI_2 into Math.PI_1.99 , it started to run. \n. ",
    "mudkipme": "It would be nice to install KineticJS with Bower.\nBower is a pretty convenient package manager for the web.\n. It would be nice to install KineticJS with Bower.\nBower is a pretty convenient package manager for the web.\n. ",
    "chrisfinch": "As a quick fix I added a url in to my bower.json dependancies like so:\n\n`\"KineticJS\": \"http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.5.5.min.js\"`\n\nA quick test shows that previous versions of kinetic using the same URL structure resolve so that url should be good for a while at least until Kinetic is correctly registered as a package...\n. As a quick fix I added a url in to my bower.json dependancies like so:\n\n`\"KineticJS\": \"http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.5.5.min.js\"`\n\nA quick test shows that previous versions of kinetic using the same URL structure resolve so that url should be good for a while at least until Kinetic is correctly registered as a package...\n. ",
    "rodss": "I'm having the same problem on Chrome 33.0.1750.166 on my Galaxy Tab 3 with Android 4.2.2. The touch events doesn't work well and chashes sometimes, even on the tutorials. When I disabled the 2D acceleration, like Hackencrash, everything worked. And I'm using the 5.0.2 Kinetic version.\n. I have the same problem.\n. I'm having the same problem on Chrome 33.0.1750.166 on my Galaxy Tab 3 with Android 4.2.2. The touch events doesn't work well and chashes sometimes, even on the tutorials. When I disabled the 2D acceleration, like Hackencrash, everything worked. And I'm using the 5.0.2 Kinetic version.\n. I have the same problem.\n. ",
    "riyuk": "@ericdrowell \nI can confirm this problem on a Nexus 4, Nexus 5, Nexus 7 and Nexus 10 all updated to the latest versions. (i.e. on Nexus 5: Chrome 34.0.1847.114, Android 4.4)\n\n\"touchstart\", \"touchend\" works as expected.\n\n\"touchmove\" DOESN'T work at all on any Android device.\nHowever it DOES work on iOS.\n. @ericdrowell \nI can confirm this problem on a Nexus 4, Nexus 5, Nexus 7 and Nexus 10 all updated to the latest versions. (i.e. on Nexus 5: Chrome 34.0.1847.114, Android 4.4)\n\n\"touchstart\", \"touchend\" works as expected.\n\n\"touchmove\" DOESN'T work at all on any Android device.\nHowever it DOES work on iOS.\n. ",
    "confilemg": "+1\n. I also wondering if something is going on here. @ericdrowell could you please make a statement?\n. This would be great\n. @lavrton @ericdrowell I also have this problem on retina as well as on hdpi devices. the Stage.toDataUrl() method set pixelRatio: 1 this might cause the problem.\n\nHope this fix get merged soon.\n. To fix this bug you can also use this lib: https://github.com/stomita/ios-imagefile-megapixel\n\nI had problems on some Android browsers when using this lib. On iOS it works fine.\n. +1\n. +1\n. @ericdrowell is this issuce still open. Since you clain it is fixed in 5.0.1 and now 5.1.0 is released?\n. I have the same problem. The quality is very bad. The the worst quality is when I downscale an image.\n. @ericdrowell @lavrton What is the current state of the art. I also figure out performance problems on Android standard browser when dealing with full size camera images.\n. I fixed it replace: \n\n```\nvar scale = activeShape.getScale().x * dist / lastDist;\n```\n\nwith\n\n```\nvar scale = activeShape.scaleX() * dist / lastDist;\n```\n\nand this\n\n```\nactiveShape.setScale(scale);\n```\n\nwith \n\n```\nactiveShape.scale({\n              x: scale,\n              y: scale\n            });\n```\n. Well yes it is easy, but you often need that if you want to transfer data not in JSON format to the server.\n. @lavrton This work but when you look here http://caniuse.com/#feat=bloburls Blob() is sometimes supported with the webkit prefix. I could not find an example hat to fix it. I mean I need something like: \n\n```\nvar _URL = URL || webkitURL;\n```\n\nThe preview vor the Blob(). I don't know how to include the webkit fallback. Can you give me some help please?\n. The URL was an example :-) I want to do it for the Blob()\n. Okay done. Here is the question http://stackoverflow.com/questions/22306947/kineticjs-image-stoke-is-not-available-when-using-hit-region\n. This lib solves the problem: https://github.com/stomita/ios-imagefile-megapixel\n. I use it with my gwt-kinetic lib: https://github.com/confile/gwt-kinetic in GWT.\n\nHere is the code: \n\n```\nvar files = inputFile.files;\n\nif (!files || !files.length) \n    return\n\nvar myFile = files[0];\n\nvar createFileReader = $entry(function() {\n    return new FileReader();\n});\nvar reader = createFileReader();\n\nvar createMegaPixImage = $entry(function(file) {\n    return new $wnd.MegaPixImage(file);\n});\n\nvar mpImg = createMegaPixImage(myFile);\n\nvar _URL = $wnd.URL || $wnd.webkitURL;\n\nimage.onload = function() {\n    callbackDone(\"done\");\n};      \n\n\nvar callbackDone = $entry(function(file) {  \n    callback.@com.google.gwt.core.client.Callback::onSuccess(Ljava/lang/Object;)(file);\n});\n\n\nreader.onload = function(event) {\n    var file = reader.result\n\n    var orientationFunction = $entry(function(file) {\n        return @mobile.client.app.CanvasHelper::getOrientation(Ljava/lang/Object;)(file);\n    });\n\n    var orient = parseInt(orientationFunction(file));\n\n    mpImg.render(image, { maxWidth: 2000, maxHeight: 2000, quality: 1.0, orientation: orient });\n\n}   \nreader.readAsBinaryString(myFile);\n```\n\nThe orientation you get from: https://github.com/jseidelin/exif-js\n\n```\n    public static int getOrientation(Object file) {\n        ExifJso exif = ExifJso.create(file);\n        return exif.getOrientation();\n    }\n```\n\n I works perfect for me. Be carefull to use MegaPixel only if the EXIF stores an orientation. This is only the case for iOS devices. Then you can get it in the right orientation.\nYou do not need to do it when EXIF does not provide orientation. This is true for Android devices.\n\n Hope that helps you.\n. I got 30% less file size uncompressed with the advanced option. That is great.\n. +1 I have the same problem\n. Well there is still an issue, because the content is not resized with the resize of the stage.\n. @jfollas yes that is what I expected. Okay may be it is not a bug. I will close this issue.\n. I made a demo here: http://jsfiddle.net/confile/p6Eey/\n\nAs you can see in the exported image the edges are very crispy and not very sharp.\n. @lavrton Convert image to png with canvas is not working because auf security concerns.\n. @lavrton Why should canvg solve the security problem?\n. I works only with Canvg https://code.google.com/p/canvg/ on Safari and ios.\n. What do you mean by raster?\n. PNG does not change anything. Still slow.\n. is there a plan for release?\n. +1\n. I am also thinking that this project might not be supported anymore.\n. Are the any similar alternative projects? What would you recommend?\n. Which one is the best for mobile use?\n. Does any of them support layers like KineticJS?\n. Caching in the current version of KineticJS is a hugh problem. There are many issues that are open. We consider to change the project.\n. @lavrton PhaserJS has the most stars on github is this also good for image manipulation, rotation, layers, filters?\n. @lavrton Would you recommend PhaserJS or PixiJS for my case?\n. @lavrton Does PixiJS also has a layer system like KineticJS?\n. It is very said. I will move on to Pixi.js it seems to me to be the best alternative. Good bye KineticJS.\n\n-1\n. At least we should write a migration guide from KineticJS to PixiJS (http://www.pixijs.com/) Pixi uses WebGL Renderer with canvas fallback so it is much faster than Kinetic. What do you think of my idea?\n. As you can see here: http://jsperf.com/js-anim/28 Pixijs performs most of the time much better than any other lib especially KineticJs. \n\nI suggest we open a github project which documents how to migrate to PixiJs. \n\nI created a project for this purpose here: https://github.com/confile/Kinetic2Pixi\n\nAnyone how wants to join can contact me and I make you a collaborator on this project.\n. I think moving to PixiJs is much more promising because Pixi has a much greater support audience. Pixi also has WebGL support which makes you app super fast. \n\nSo feel free to join our project to migrate a KineticJS app to PixiJS https://github.com/confile/Kinetic2Pixi\n. Okay I suppose this is the new base repo https://github.com/lavrton/KineticJS\n\n@lavrton How active will you be in development and bugfixing?\n. @lavrton  So kineticJS is now KonvaJS right?\n. +1\n. +1\n. I also wondering if something is going on here. @ericdrowell could you please make a statement?\n. This would be great\n. @lavrton @ericdrowell I also have this problem on retina as well as on hdpi devices. the Stage.toDataUrl() method set pixelRatio: 1 this might cause the problem.\n\nHope this fix get merged soon.\n. To fix this bug you can also use this lib: https://github.com/stomita/ios-imagefile-megapixel\n\nI had problems on some Android browsers when using this lib. On iOS it works fine.\n. +1\n. +1\n. @ericdrowell is this issuce still open. Since you clain it is fixed in 5.0.1 and now 5.1.0 is released?\n. I have the same problem. The quality is very bad. The the worst quality is when I downscale an image.\n. @ericdrowell @lavrton What is the current state of the art. I also figure out performance problems on Android standard browser when dealing with full size camera images.\n. I fixed it replace: \n\n```\nvar scale = activeShape.getScale().x * dist / lastDist;\n```\n\nwith\n\n```\nvar scale = activeShape.scaleX() * dist / lastDist;\n```\n\nand this\n\n```\nactiveShape.setScale(scale);\n```\n\nwith \n\n```\nactiveShape.scale({\n              x: scale,\n              y: scale\n            });\n```\n. Well yes it is easy, but you often need that if you want to transfer data not in JSON format to the server.\n. @lavrton This work but when you look here http://caniuse.com/#feat=bloburls Blob() is sometimes supported with the webkit prefix. I could not find an example hat to fix it. I mean I need something like: \n\n```\nvar _URL = URL || webkitURL;\n```\n\nThe preview vor the Blob(). I don't know how to include the webkit fallback. Can you give me some help please?\n. The URL was an example :-) I want to do it for the Blob()\n. Okay done. Here is the question http://stackoverflow.com/questions/22306947/kineticjs-image-stoke-is-not-available-when-using-hit-region\n. This lib solves the problem: https://github.com/stomita/ios-imagefile-megapixel\n. I use it with my gwt-kinetic lib: https://github.com/confile/gwt-kinetic in GWT.\n\nHere is the code: \n\n```\nvar files = inputFile.files;\n\nif (!files || !files.length) \n    return\n\nvar myFile = files[0];\n\nvar createFileReader = $entry(function() {\n    return new FileReader();\n});\nvar reader = createFileReader();\n\nvar createMegaPixImage = $entry(function(file) {\n    return new $wnd.MegaPixImage(file);\n});\n\nvar mpImg = createMegaPixImage(myFile);\n\nvar _URL = $wnd.URL || $wnd.webkitURL;\n\nimage.onload = function() {\n    callbackDone(\"done\");\n};      \n\n\nvar callbackDone = $entry(function(file) {  \n    callback.@com.google.gwt.core.client.Callback::onSuccess(Ljava/lang/Object;)(file);\n});\n\n\nreader.onload = function(event) {\n    var file = reader.result\n\n    var orientationFunction = $entry(function(file) {\n        return @mobile.client.app.CanvasHelper::getOrientation(Ljava/lang/Object;)(file);\n    });\n\n    var orient = parseInt(orientationFunction(file));\n\n    mpImg.render(image, { maxWidth: 2000, maxHeight: 2000, quality: 1.0, orientation: orient });\n\n}   \nreader.readAsBinaryString(myFile);\n```\n\nThe orientation you get from: https://github.com/jseidelin/exif-js\n\n```\n    public static int getOrientation(Object file) {\n        ExifJso exif = ExifJso.create(file);\n        return exif.getOrientation();\n    }\n```\n\n I works perfect for me. Be carefull to use MegaPixel only if the EXIF stores an orientation. This is only the case for iOS devices. Then you can get it in the right orientation.\nYou do not need to do it when EXIF does not provide orientation. This is true for Android devices.\n\n Hope that helps you.\n. I got 30% less file size uncompressed with the advanced option. That is great.\n. +1 I have the same problem\n. Well there is still an issue, because the content is not resized with the resize of the stage.\n. @jfollas yes that is what I expected. Okay may be it is not a bug. I will close this issue.\n. I made a demo here: http://jsfiddle.net/confile/p6Eey/\n\nAs you can see in the exported image the edges are very crispy and not very sharp.\n. @lavrton Convert image to png with canvas is not working because auf security concerns.\n. @lavrton Why should canvg solve the security problem?\n. I works only with Canvg https://code.google.com/p/canvg/ on Safari and ios.\n. What do you mean by raster?\n. PNG does not change anything. Still slow.\n. is there a plan for release?\n. +1\n. I am also thinking that this project might not be supported anymore.\n. Are the any similar alternative projects? What would you recommend?\n. Which one is the best for mobile use?\n. Does any of them support layers like KineticJS?\n. Caching in the current version of KineticJS is a hugh problem. There are many issues that are open. We consider to change the project.\n. @lavrton PhaserJS has the most stars on github is this also good for image manipulation, rotation, layers, filters?\n. @lavrton Would you recommend PhaserJS or PixiJS for my case?\n. @lavrton Does PixiJS also has a layer system like KineticJS?\n. It is very said. I will move on to Pixi.js it seems to me to be the best alternative. Good bye KineticJS.\n\n-1\n. At least we should write a migration guide from KineticJS to PixiJS (http://www.pixijs.com/) Pixi uses WebGL Renderer with canvas fallback so it is much faster than Kinetic. What do you think of my idea?\n. As you can see here: http://jsperf.com/js-anim/28 Pixijs performs most of the time much better than any other lib especially KineticJs. \n\nI suggest we open a github project which documents how to migrate to PixiJs. \n\nI created a project for this purpose here: https://github.com/confile/Kinetic2Pixi\n\nAnyone how wants to join can contact me and I make you a collaborator on this project.\n. I think moving to PixiJs is much more promising because Pixi has a much greater support audience. Pixi also has WebGL support which makes you app super fast. \n\nSo feel free to join our project to migrate a KineticJS app to PixiJS https://github.com/confile/Kinetic2Pixi\n. Okay I suppose this is the new base repo https://github.com/lavrton/KineticJS\n\n@lavrton How active will you be in development and bugfixing?\n. @lavrton  So kineticJS is now KonvaJS right?\n. +1\n. ",
    "LDKwak": "Definitely it's an annoying bug !\n\nYou can check this issue in the following link :\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-a-group-with-kineticjs/\n\nEDIT : A possible workaround is to use mouseenter and mouseleave !\n. Definitely it's an annoying bug !\n\nYou can check this issue in the following link :\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-a-group-with-kineticjs/\n\nEDIT : A possible workaround is to use mouseenter and mouseleave !\n. ",
    "umar320": "I Resolved the issue. Actually I set the position with a dynamic value which was not parsed . So If the drag is required then everyone should parse the value into int before setting the element position within an event like dragend or dragmove etc. \n. I Resolved the issue. Actually I set the position with a dynamic value which was not parsed . So If the drag is required then everyone should parse the value into int before setting the element position within an event like dragend or dragmove etc. \n. ",
    "Xeli": "For anyone else reading this:\nI only got this working once I added stage.setListening(false);\n\nEven on version 4.5.5\n. For anyone else reading this:\nI only got this working once I added stage.setListening(false);\n\nEven on version 4.5.5\n. ",
    "SoulGit": "I'm still struggling with this issue.  Creating the stage with listening: false results in proper scrolling, pinching, zooming on the iPad.  However, items on top of the stage are no longer clickable, neither on the iPad nor desktop.  Setting the individual items to listening: true during creation doesn't seem to make a difference.  Am I understanding this functionality correctly and if so, any thoughts on what I'm missing?  Many thanks.\n\nUpdate: using version 4.6.0.\n. I'm still struggling with this issue.  Creating the stage with listening: false results in proper scrolling, pinching, zooming on the iPad.  However, items on top of the stage are no longer clickable, neither on the iPad nor desktop.  Setting the individual items to listening: true during creation doesn't seem to make a difference.  Am I understanding this functionality correctly and if so, any thoughts on what I'm missing?  Many thanks.\n\nUpdate: using version 4.6.0.\n. ",
    "filiplarsen": "I fixed this on version 4.7.4 with\n\n``` javascript\n// Allow default drag behavior on touch events\nstage.on('touchstart toucheend touchmove', function(evt) {\n  evt.preventDefault = null;\n});\n```\n\nWe use it on a mobile app where the canvas is embedded in a potential long vertical list that needs scrolling and where drag-and-drop is not used, only click and tap handlers. So far we haven't had any issues on WebKit-based browsers with touch events becoming drag-and-drop events.\n. I fixed this on version 4.7.4 with\n\n``` javascript\n// Allow default drag behavior on touch events\nstage.on('touchstart toucheend touchmove', function(evt) {\n  evt.preventDefault = null;\n});\n```\n\nWe use it on a mobile app where the canvas is embedded in a potential long vertical list that needs scrolling and where drag-and-drop is not used, only click and tap handlers. So far we haven't had any issues on WebKit-based browsers with touch events becoming drag-and-drop events.\n. ",
    "powellke": "I thought that maybe it was clicking \"through\" the two rectangles so I tried placing a rectangle behind the others. The click doesn't get through to the behind rectangle.\n. I thought that maybe it was clicking \"through\" the two rectangles so I tried placing a rectangle behind the others. The click doesn't get through to the behind rectangle.\n. ",
    "OnurYIL": "I did what Eric told, first splitted circles into different layers up to 75 circle per layer. Then moved the circle onto a new layer for animation and it's working perfectly now. Thank you. \n\nHere is the new thing: http://jsfiddle.net/rnSKp/2/\n. I did what Eric told, first splitted circles into different layers up to 75 circle per layer. Then moved the circle onto a new layer for animation and it's working perfectly now. Thank you. \n\nHere is the new thing: http://jsfiddle.net/rnSKp/2/\n. ",
    "rradonic": "I think it's a great idea!\n\nYou'll notice that in the current implementation of image distortion, I check for the distortion parameter at the beginning of drawFunc in the Image prototype, and if it's found I skip the rest of the function and call _drawDistorted instead, where I draw the image myself. This isn't the nicest way to do it, as it doesn't leverage the existing code in drawFunc.\n\nI'd like to rely on existing code as much as possible, and making this a basic KineticJS transformation sounds like the right way to achieve that.\n\nThere's an issue though: this isn't actually one affine transformation, it's four different ones, one for each triangular section of the image. I notice that, in nodes, you apply all of the node's transformations to a single matrix m, via the functions in Kinetic.Transform. This will need to be implemented differently, as it can't be applied to the same matrix.\n\nThe way it's done right now is at draw time. I save the context's currently active transformation with context.save(), then I do my thing, and then I restore everything with context.restore(). I do that four times, for the four triangular sections, each with its own transformation.\n\nTo integrate this with Kinetic.Node, I could add a new field to go along with the others (scale, rotation, etc.), calling it distortion or something, where I can store distortion coordinates like the ones you suggested above, and add a method to the Kinetic.Transform prototype, which calculates the four transformations based on these coordinates. Then, at draw time, I can apply these transformations before calling the shape's draw function, and undo them after the drawing.\n\nWhat do you think?\n\nIs there a logical place to do this stuff right before drawing a shape? Maybe a function common to all shapes that calls the actual shape's drawing function? The drawScene function in Kinetic.Shape looks like it might be a good place to do this.\n. Awesome, I'll be interested in hearing it! And let me know if I can help of course.\n. Hey guys,\n\nJust wondering about the current state of the project. I see the hiatus message, which I assume is from Eric, on the project's main GitHub page. The message is a bit out of date, saying he's taking a hiatus until July 2014, and it's now November.\n\nI see other people have been committing a bunch recently, has the project changed leadership?\n\nIn either case, my other question is about this pull request. Is there still interest for an image distortion implementation? If so, I imagine this pull request will need to be modified to work with the new version of Kinetic.\n. I think it's a great idea!\n\nYou'll notice that in the current implementation of image distortion, I check for the distortion parameter at the beginning of drawFunc in the Image prototype, and if it's found I skip the rest of the function and call _drawDistorted instead, where I draw the image myself. This isn't the nicest way to do it, as it doesn't leverage the existing code in drawFunc.\n\nI'd like to rely on existing code as much as possible, and making this a basic KineticJS transformation sounds like the right way to achieve that.\n\nThere's an issue though: this isn't actually one affine transformation, it's four different ones, one for each triangular section of the image. I notice that, in nodes, you apply all of the node's transformations to a single matrix m, via the functions in Kinetic.Transform. This will need to be implemented differently, as it can't be applied to the same matrix.\n\nThe way it's done right now is at draw time. I save the context's currently active transformation with context.save(), then I do my thing, and then I restore everything with context.restore(). I do that four times, for the four triangular sections, each with its own transformation.\n\nTo integrate this with Kinetic.Node, I could add a new field to go along with the others (scale, rotation, etc.), calling it distortion or something, where I can store distortion coordinates like the ones you suggested above, and add a method to the Kinetic.Transform prototype, which calculates the four transformations based on these coordinates. Then, at draw time, I can apply these transformations before calling the shape's draw function, and undo them after the drawing.\n\nWhat do you think?\n\nIs there a logical place to do this stuff right before drawing a shape? Maybe a function common to all shapes that calls the actual shape's drawing function? The drawScene function in Kinetic.Shape looks like it might be a good place to do this.\n. Awesome, I'll be interested in hearing it! And let me know if I can help of course.\n. Hey guys,\n\nJust wondering about the current state of the project. I see the hiatus message, which I assume is from Eric, on the project's main GitHub page. The message is a bit out of date, saying he's taking a hiatus until July 2014, and it's now November.\n\nI see other people have been committing a bunch recently, has the project changed leadership?\n\nIn either case, my other question is about this pull request. Is there still interest for an image distortion implementation? If so, I imagine this pull request will need to be modified to work with the new version of Kinetic.\n. ",
    "yechoua": "When does this featur will be available? \nI really whant to use it. Did you integrate this feature with the ability to place the points \"on the fly\" ? \nit can be really interesting. (check also the pull request conflict ;-) )\n. I actually make something about it for the actual version BUT it won't work properly, if  someone whant to take a look on this : \nhttp://stackoverflow.com/questions/26118032/kineticjs-image-shape-layer-distortion\n\nI know it's not really clean but it's work, I havn't add the support of changing the src (the distortion don't want to work after that), in the post you can find the source and other stuff.\nreally, if it's helped you, think about help me to finish this function.\nhave a good day and \"sorry for my english\"\n. I think he wan't to add for some node a property wich will give the possibilitty to the user to scale and rotate (like you've done for the drag function)\n. The filter work but i want to apply a filter not on the initialisation but like the image source, outside of the function.\nI want to do somethink like\nimagj.fill('rbg(0,0,250)');\nin the http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-invert-image-tutorial/, i can't reproduce the same situation: security issue about using the version 5.1.0 of kineticjs.\nI found out a new way:\n\n<pre>\n<code>\n     var red;\n     var blue;\n     var green;\n     var imagj = new Image();\n     imagj.onload = function() {\n     var stage = new Kinetic.Stage({\n     container: 'container',\n     width: 400,\n     height: 500\n     });\n     var layerB = new Kinetic.Layer();\n     var kineticImage = new Kinetic.Image({\n      x: 0,\n      y: 0,\n      image: imagj,\n      draggable: true\n       });\n    layerB.add(kineticImage);\n    stage.add(layerB);\n    kineticImage.cache();\n    kineticImage.filters([Kinetic.Filters.RGB]);\n    kineticImage.red(red );\n    kineticImage.green(green );\n    kineticImage.blue(blue );\n    layerB.draw(); \n    };\nimagj.src = 'a_pic.jpg';\nfunction rbg(){\n    green = 0;\n    red = 255;\n    blue = 0;\n    layerB.draw();\n}\n</code>\n</pre>\n\nlike this, i can manipulate the rbg of the layer without all the probl\u00e9matique stuff :) \nis it the good way to do it?\nthanks a lot\n. Found a better way!\n\n<pre>\n<code>\n    //her the big difference, if I put it her i can access all the kinetic Image methode and function after\n     var kineticImage;\n     var imagj = new Image();\n     imagj.onload = function() {\n     var stage = new Kinetic.Stage({\n     container: 'container',\n     width: 400,\n     height: 500\n     });\n     var layerB = new Kinetic.Layer();\n     kineticImage = new Kinetic.Image({\n      x: 0,\n      y: 0,\n      image: imagj,\n      draggable: true\n       });\n    layerB.add(kineticImage);\n    stage.add(layerB);\n    layerB.draw(); \n    };\nimagj.src = 'a_pic.jpg';\nfunction rbg(red,blue,green){\n    //besauce i don't put the \"var kineticImage\" in a function (onload) i can access it her, and knwo i can do this:\n     // it's a lot more easier and friendly,  \nkineticImage.cache();\n    kineticImage.filters([Kinetic.Filters.RGB]);\n    kineticImage.red(red );\n    kineticImage.green(green );\n    kineticImage.blue(blue );\n    layerB.draw();\n}\n</code>\n</pre>\n\nI did this beacause i wanted to access to rbg filter easily, and now it's done!\nthanks (if you have any suggestion or amelioration or may be a better way to do it i'll be happy to try your method :) )\n. thanks a lot, i'll try your solution, but for the synthax I can't use kineticImage.red(0).green(255).blue(0), and her the reason:\nIf I whant to apply a blue filter only (without changing the other color) I can't use your syntaxe beacause I'll forced to redo the red and green calibration and this take to much time, specially when i can work with an other kind of code ;)\n. after your post i did this:\n\n<pre>\n<code>\n//some variables, needed in the rbg function\nvar red,green,blue,alphix;\nfunction rgb(kineticImage, rouge, vert, bleu, alpha){\n//this verification is needed, like this i can run this function without giving the kineticimage parameter, it's just for the testing phase, don't worry ;)\n  if (kineticImage === undefined) {\n    kineticImage = testImage;\n  }\n  kineticImage.cache();\n \n  if ((red !== undefined || green !== undefined || blue !== undefined) && (alphix !== undefined)) {\n    console.log(\"1 ---- rouge:\"+ red+ \" vert: \"+green+\" bleu :\"+blue+\" alpha:\"+ alphix);\n    console.log(\"Brighten + RGB\");\n    kineticImage.filters([Kinetic.Filters.Brighten,Kinetic.Filters.RGB]);\n  }\n  if ((red !== undefined || green !== undefined || blue !== undefined) && (alphix === undefined)) {\n    console.log(\"2 ---- rouge:\"+ red+ \" vert: \"+green+\" bleu :\"+blue+\" alpha:\"+ alphix);\n    console.log(\"RGB\");\n    kineticImage.filters([Kinetic.Filters.RGB]);\n  }\n  if ((red === undefined || green === undefined || blue === undefined) && (alphix !== undefined)) {\n    console.log(\"3 ---- rouge:\"+ red+ \" vert: \"+green+\" bleu :\"+blue+\" alpha:\"+ alphix);\n    console.log(\"Brighten\");\n    kineticImage.filters([Kinetic.Filters.Brighten]);\n  }\n  if (alpha!== undefined) {\n    var t = alpha/50;\n    alphix = t;\n    kineticImage.brightness(t);\n  }\n  else if (alphix !== undefined) {\n      kineticImage.brightness(alphix);\n  }\n  else{\n    kineticImage.brightness(0);\n  }\n  if(rouge !== undefined){\n    red = rouge;\n    kineticImage.red(rouge);\n  }\n  else if (red!== undefined) {\n      kineticImage.red(red);\n  }\n  else{\n    kineticImage.red(kineticImage.red());\n  }\n  if(vert!==undefined){\n    green = vert;\n    kineticImage.green(vert);\n  }\n  else if (green !== undefined) {\n      kineticImage.green(green);\n  }\n  else{\n    kineticImage.green(kineticImage.green());\n  }\n  if(bleu !== undefined){\n    blue = bleu;\n    kineticImage.blue(bleu);\n  }\n  else if (green !== undefined) {\n      kineticImage.blue(blue);\n  }\n  else{\n    kineticImage.blue(kineticImage.blue());\n  }\n  kineticImage.getLayer().draw();\n}\n</code>\n</pre>\n\ni'm staying with a issue, i success to apply the two filter but the rgb filter and the brigh filter don't work properly:\nif i up or down the brightness, it work\nif i up or down a color (just the color without touching the brightness) its work\nif i up or down the brightness and whant to apply a color, the color don't work while i've not moving the 3 color, so if i just whant to add a little red filter color i can't...\nif i up or down a color (not the tree) and whant to apply brightness isn't work, only the brightness  filter stay and the color filter disapear (if i up or down the three color it's work)\n\nso now her m'y issue: how can i make it work properly?\n\n(i'm using kineticjs 5.1.0 and not 5.0.2 ther's a big difference ;) )\n\njust a think, if this function can be added (after he sure work fine!) in kineticjs it can help a lot of person that whant to apply some filter easily ;)\n. actualy the color work fine, the value stay like you sayed, just one think, i can't apply brightness without color, if I whant to apply brigthness only the image go all in black color, an idea?\n. <pre>\nvar red,green,blue,alphix; \n \nfunction rgb(kineticImage, rouge, vert, bleu, alpha){\n  if (kineticImage === undefined) {\n    kineticImage = testimage;\n  }\n  kineticImage.cache();\n \n  if ((red !== undefined) || (green !== undefined) || (blue !== undefined) && (alphix === undefined)) {\n    console.log(\"2 ---- rouge:\"+ red+ \" vert: \"+green+\" bleu :\"+blue+\" alpha:\"+ alphix);\n    console.log(\"RGB\");\n    kineticImage.filters([Kinetic.Filters.RGB]);\n  }\n  if ((red === undefined || green === undefined || blue === undefined) && (alphix !== undefined)) {\n    console.log(\"3 ---- rouge:\"+ red+ \" vert: \"+green+\" bleu :\"+blue+\" alpha:\"+ alphix);\n    console.log(\"Brighten\");\n    kineticImage.filters([Kinetic.Filters.Brighten]);\n  }\n  if ((red !== undefined || green !== undefined || blue !== undefined) && (alphix !== undefined)) {\n    console.log(\"1 ---- rouge:\"+ red+ \" vert: \"+green+\" bleu :\"+blue+\" alpha:\"+ alphix);\n    console.log(\"Brighten + RGB\");\n    kineticImage.filters([Kinetic.Filters.Brighten,Kinetic.Filters.RGB]);\n  }\n  if (alpha !== undefined) {\n    var t = alpha/50;\n    alphix = t;\n    kineticImage.brightness(t);\n  }\n  else if (alphix !== undefined) {\n      kineticImage.brightness(alphix);\n  }\n  else{\n    kineticImage.brightness(0);\n  }\n  if(rouge !== undefined){\n    red = rouge;\n    kineticImage.red(rouge);\n  }\n  else if (red!== undefined) {\n      kineticImage.red(red);\n  }\n  if(vert!==undefined){\n    green = vert;\n    kineticImage.green(vert);\n  }\n  else if (green !== undefined) {\n      kineticImage.green(green);\n  }\n  if(bleu !== undefined){\n    blue = bleu;\n    kineticImage.blue(bleu);\n  }\n  else if (green !== undefined) {\n      kineticImage.blue(blue);\n  }\n  kineticImage.getLayer().draw();\n}\n</pre>\n\nThis code work perfectly\nguess what's the diffence...\ni've juste changed the place of the if condition, did'nt think it can pass in all of them^^'\nmay be you can propose a better code? (shorter)\n. just an other question (yes one more^^ !) with kineticjs is it possible to change the current blue value?\nlike: i have an image and want to lower a color on it or to up a color, like with the brighness, the default value of the brightness is 0 so i can up or down the brightness i whant to do the same with the rbg, like \n\n<pre>kineticImage.red += 50;</pre> like this i can add more red in the pic and why not \n<pre>kineticImage.blue -= 30;</pre> \n\nlike in photoshp :)\nthanks a lot for all of what you help me\n. yeah this function is more like what I whant :)\nI tried to make a function to use this function with a slider (like in photoshop) and her what I did\n\n<pre>\n<code>\nvar stockRed,stockGreen,stockBlue,alphix; \nfunction rgb(kineticImage, rouge, vert, bleu, alpha){\n    if (kineticImage === undefined) {    kineticImage = testImage;  }  \n  kineticImage.cache();\n  if ((stockRed !== undefined) || (stockGreen !== undefined) || (stockBlue !== undefined) && (alphix === undefined)) {\n    kineticImage.filters([Kinetic.Filters.rgbAdjust]);\n  }\n  if ((stockRed === undefined || stockGreen === undefined || stockBlue === undefined) && (alphix !== undefined)) {\n    kineticImage.filters([Kinetic.Filters.Brighten]);\n  }\n  if ((stockRed !== undefined || stockGreen !== undefined || stockBlue !== undefined) && (alphix !== undefined)) {\n    kineticImage.filters([Kinetic.Filters.Brighten,Kinetic.Filters.rgbAdjust]);\n  }\nif (alpha !== undefined) {\n    var t = alpha/50;\n    alphix = t;\n    kineticImage.brightness(t);\n  }\n  else if (alphix !== undefined) {\n      kineticImage.brightness(alphix);\n  }\n  else{\n    kineticImage.brightness(0);\n  }\n  //RED\n  if(stockRed === undefined){\n    stockRed = rouge;\n      kineticImage.red(kineticImage.red() + (rouge));\n  }\n  else{\n    //incase of up\n    if (rouge>stockRed) {\n      console.log(\"rouge defini, up \"+ (rouge-stockRed));\n      kineticImage.red(kineticImage.red()+(rouge-stockRed));\n      stockRed=rouge;\n    }\n    //incase of down\n    if (stockRed>rouge ) {\n      console.log(\"rouge defini, down \"+ (stockRed-rouge));\n      kineticImage.red(kineticImage.red() -(stockRed-rouge));\n      stockRed=rouge;\n    }\n  }\n//GREEN\nif(stockGreen === undefined){\n    stockGreen = vert;\n      kineticImage.green(kineticImage.green() + (vert));\n  }\n  else{\n    //incase of up\n    if (vert>stockGreen) {\n      console.log(\"vert defini, up \"+ (vert-stockGreen));\n      kineticImage.green(kineticImage.green()+(vert-stockGreen));\n      stockGreen=vert;\n    }\n    //incase of down\n    if (stockGreen>vert) {\n      console.log(\"vert defini, down \"+ (stockGreen-vert));\n      kineticImage.green(kineticImage.green() -(stockGreen-vert));\n      stockGreen=vert;\n    }\n  }\n  //BLUE\n  if(stockBlue === undefined){\n      stockBlue = bleu;\n        kineticImage.blue(kineticImage.blue() + (bleu));\n    }\n    else{\n    //incase of up\n      if (bleu>stockBlue) {\n        console.log(\"bleu defini, up \"+ (bleu-stockBlue));\n        kineticImage.blue(kineticImage.blue()+(bleu-stockBlue));\n        stockBlue=bleu;\n      }\n    //incase of down\n      if (stockBlue>bleu) {\n        console.log(\"bleu defini, down \"+ (stockBlue-bleu));\n        kineticImage.blue(kineticImage.blue() -(stockBlue-bleu));\n        stockBlue=bleu;\n      }\n    }\n  kineticImage.getLayer().draw();\n}\n</code>\n</pre>\n\nbut I get a new issu: i can only apply one filter color, try it with 4 slider (one for the blue,red,green and for the alpha) set their value between -125 and 125 and set the default value to 0.\nthe function don't work well, if i don't do the check and all the substraction with the \"stock\" value it'll get exponotially upward so,\nif you comment 2 colours (like comment the green and blue like you can see in the comments)\nthe code will work perfectly\nbut if i let an other color be in the code, i'll get only one available color to \"play\" with it, the other will be innefficiant and the one who work will get some bug (like getting some 50 value more Oo)\n. well this is exactly what I wanted. \nthanks a lot.\ncan I also ask a question that can be a litle annoying?\nI need a tool that can transform the color (like this one) but it'll change the color with the color balance like her: \nhttp://www.linternaute.com/photo_numerique/prise-de-vue/reussir-ses-photos-de-paysage/retouches-des-couleurs-et-saturations.shtml\nsorry it's in french but the the picture explain good what i'm trying to make, a tool that allow the user to play with color on a canvas\ndid you think it's possible to reuse the same code to make the same tool?\n. yes this help me a lot thank for all of these explication :)\nsorry for my bad english, isn't my native language :/\n. Here a jsfiddle with what i've done, i'll open a new issue bill because of the drag fonction\nhttp://jsfiddle.net/junkees/tf7m3/1/\n. When does this featur will be available? \nI really whant to use it. Did you integrate this feature with the ability to place the points \"on the fly\" ? \nit can be really interesting. (check also the pull request conflict ;-) )\n. I actually make something about it for the actual version BUT it won't work properly, if  someone whant to take a look on this : \nhttp://stackoverflow.com/questions/26118032/kineticjs-image-shape-layer-distortion\n\nI know it's not really clean but it's work, I havn't add the support of changing the src (the distortion don't want to work after that), in the post you can find the source and other stuff.\nreally, if it's helped you, think about help me to finish this function.\nhave a good day and \"sorry for my english\"\n. I think he wan't to add for some node a property wich will give the possibilitty to the user to scale and rotate (like you've done for the drag function)\n. The filter work but i want to apply a filter not on the initialisation but like the image source, outside of the function.\nI want to do somethink like\nimagj.fill('rbg(0,0,250)');\nin the http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-invert-image-tutorial/, i can't reproduce the same situation: security issue about using the version 5.1.0 of kineticjs.\nI found out a new way:\n\n<pre>\n<code>\n     var red;\n     var blue;\n     var green;\n     var imagj = new Image();\n     imagj.onload = function() {\n     var stage = new Kinetic.Stage({\n     container: 'container',\n     width: 400,\n     height: 500\n     });\n     var layerB = new Kinetic.Layer();\n     var kineticImage = new Kinetic.Image({\n      x: 0,\n      y: 0,\n      image: imagj,\n      draggable: true\n       });\n    layerB.add(kineticImage);\n    stage.add(layerB);\n    kineticImage.cache();\n    kineticImage.filters([Kinetic.Filters.RGB]);\n    kineticImage.red(red );\n    kineticImage.green(green );\n    kineticImage.blue(blue );\n    layerB.draw(); \n    };\nimagj.src = 'a_pic.jpg';\nfunction rbg(){\n    green = 0;\n    red = 255;\n    blue = 0;\n    layerB.draw();\n}\n</code>\n</pre>\n\nlike this, i can manipulate the rbg of the layer without all the probl\u00e9matique stuff :) \nis it the good way to do it?\nthanks a lot\n. Found a better way!\n\n<pre>\n<code>\n    //her the big difference, if I put it her i can access all the kinetic Image methode and function after\n     var kineticImage;\n     var imagj = new Image();\n     imagj.onload = function() {\n     var stage = new Kinetic.Stage({\n     container: 'container',\n     width: 400,\n     height: 500\n     });\n     var layerB = new Kinetic.Layer();\n     kineticImage = new Kinetic.Image({\n      x: 0,\n      y: 0,\n      image: imagj,\n      draggable: true\n       });\n    layerB.add(kineticImage);\n    stage.add(layerB);\n    layerB.draw(); \n    };\nimagj.src = 'a_pic.jpg';\nfunction rbg(red,blue,green){\n    //besauce i don't put the \"var kineticImage\" in a function (onload) i can access it her, and knwo i can do this:\n     // it's a lot more easier and friendly,  \nkineticImage.cache();\n    kineticImage.filters([Kinetic.Filters.RGB]);\n    kineticImage.red(red );\n    kineticImage.green(green );\n    kineticImage.blue(blue );\n    layerB.draw();\n}\n</code>\n</pre>\n\nI did this beacause i wanted to access to rbg filter easily, and now it's done!\nthanks (if you have any suggestion or amelioration or may be a better way to do it i'll be happy to try your method :) )\n. thanks a lot, i'll try your solution, but for the synthax I can't use kineticImage.red(0).green(255).blue(0), and her the reason:\nIf I whant to apply a blue filter only (without changing the other color) I can't use your syntaxe beacause I'll forced to redo the red and green calibration and this take to much time, specially when i can work with an other kind of code ;)\n. after your post i did this:\n\n<pre>\n<code>\n//some variables, needed in the rbg function\nvar red,green,blue,alphix;\nfunction rgb(kineticImage, rouge, vert, bleu, alpha){\n//this verification is needed, like this i can run this function without giving the kineticimage parameter, it's just for the testing phase, don't worry ;)\n  if (kineticImage === undefined) {\n    kineticImage = testImage;\n  }\n  kineticImage.cache();\n \n  if ((red !== undefined || green !== undefined || blue !== undefined) && (alphix !== undefined)) {\n    console.log(\"1 ---- rouge:\"+ red+ \" vert: \"+green+\" bleu :\"+blue+\" alpha:\"+ alphix);\n    console.log(\"Brighten + RGB\");\n    kineticImage.filters([Kinetic.Filters.Brighten,Kinetic.Filters.RGB]);\n  }\n  if ((red !== undefined || green !== undefined || blue !== undefined) && (alphix === undefined)) {\n    console.log(\"2 ---- rouge:\"+ red+ \" vert: \"+green+\" bleu :\"+blue+\" alpha:\"+ alphix);\n    console.log(\"RGB\");\n    kineticImage.filters([Kinetic.Filters.RGB]);\n  }\n  if ((red === undefined || green === undefined || blue === undefined) && (alphix !== undefined)) {\n    console.log(\"3 ---- rouge:\"+ red+ \" vert: \"+green+\" bleu :\"+blue+\" alpha:\"+ alphix);\n    console.log(\"Brighten\");\n    kineticImage.filters([Kinetic.Filters.Brighten]);\n  }\n  if (alpha!== undefined) {\n    var t = alpha/50;\n    alphix = t;\n    kineticImage.brightness(t);\n  }\n  else if (alphix !== undefined) {\n      kineticImage.brightness(alphix);\n  }\n  else{\n    kineticImage.brightness(0);\n  }\n  if(rouge !== undefined){\n    red = rouge;\n    kineticImage.red(rouge);\n  }\n  else if (red!== undefined) {\n      kineticImage.red(red);\n  }\n  else{\n    kineticImage.red(kineticImage.red());\n  }\n  if(vert!==undefined){\n    green = vert;\n    kineticImage.green(vert);\n  }\n  else if (green !== undefined) {\n      kineticImage.green(green);\n  }\n  else{\n    kineticImage.green(kineticImage.green());\n  }\n  if(bleu !== undefined){\n    blue = bleu;\n    kineticImage.blue(bleu);\n  }\n  else if (green !== undefined) {\n      kineticImage.blue(blue);\n  }\n  else{\n    kineticImage.blue(kineticImage.blue());\n  }\n  kineticImage.getLayer().draw();\n}\n</code>\n</pre>\n\ni'm staying with a issue, i success to apply the two filter but the rgb filter and the brigh filter don't work properly:\nif i up or down the brightness, it work\nif i up or down a color (just the color without touching the brightness) its work\nif i up or down the brightness and whant to apply a color, the color don't work while i've not moving the 3 color, so if i just whant to add a little red filter color i can't...\nif i up or down a color (not the tree) and whant to apply brightness isn't work, only the brightness  filter stay and the color filter disapear (if i up or down the three color it's work)\n\nso now her m'y issue: how can i make it work properly?\n\n(i'm using kineticjs 5.1.0 and not 5.0.2 ther's a big difference ;) )\n\njust a think, if this function can be added (after he sure work fine!) in kineticjs it can help a lot of person that whant to apply some filter easily ;)\n. actualy the color work fine, the value stay like you sayed, just one think, i can't apply brightness without color, if I whant to apply brigthness only the image go all in black color, an idea?\n. <pre>\nvar red,green,blue,alphix; \n \nfunction rgb(kineticImage, rouge, vert, bleu, alpha){\n  if (kineticImage === undefined) {\n    kineticImage = testimage;\n  }\n  kineticImage.cache();\n \n  if ((red !== undefined) || (green !== undefined) || (blue !== undefined) && (alphix === undefined)) {\n    console.log(\"2 ---- rouge:\"+ red+ \" vert: \"+green+\" bleu :\"+blue+\" alpha:\"+ alphix);\n    console.log(\"RGB\");\n    kineticImage.filters([Kinetic.Filters.RGB]);\n  }\n  if ((red === undefined || green === undefined || blue === undefined) && (alphix !== undefined)) {\n    console.log(\"3 ---- rouge:\"+ red+ \" vert: \"+green+\" bleu :\"+blue+\" alpha:\"+ alphix);\n    console.log(\"Brighten\");\n    kineticImage.filters([Kinetic.Filters.Brighten]);\n  }\n  if ((red !== undefined || green !== undefined || blue !== undefined) && (alphix !== undefined)) {\n    console.log(\"1 ---- rouge:\"+ red+ \" vert: \"+green+\" bleu :\"+blue+\" alpha:\"+ alphix);\n    console.log(\"Brighten + RGB\");\n    kineticImage.filters([Kinetic.Filters.Brighten,Kinetic.Filters.RGB]);\n  }\n  if (alpha !== undefined) {\n    var t = alpha/50;\n    alphix = t;\n    kineticImage.brightness(t);\n  }\n  else if (alphix !== undefined) {\n      kineticImage.brightness(alphix);\n  }\n  else{\n    kineticImage.brightness(0);\n  }\n  if(rouge !== undefined){\n    red = rouge;\n    kineticImage.red(rouge);\n  }\n  else if (red!== undefined) {\n      kineticImage.red(red);\n  }\n  if(vert!==undefined){\n    green = vert;\n    kineticImage.green(vert);\n  }\n  else if (green !== undefined) {\n      kineticImage.green(green);\n  }\n  if(bleu !== undefined){\n    blue = bleu;\n    kineticImage.blue(bleu);\n  }\n  else if (green !== undefined) {\n      kineticImage.blue(blue);\n  }\n  kineticImage.getLayer().draw();\n}\n</pre>\n\nThis code work perfectly\nguess what's the diffence...\ni've juste changed the place of the if condition, did'nt think it can pass in all of them^^'\nmay be you can propose a better code? (shorter)\n. just an other question (yes one more^^ !) with kineticjs is it possible to change the current blue value?\nlike: i have an image and want to lower a color on it or to up a color, like with the brighness, the default value of the brightness is 0 so i can up or down the brightness i whant to do the same with the rbg, like \n\n<pre>kineticImage.red += 50;</pre> like this i can add more red in the pic and why not \n<pre>kineticImage.blue -= 30;</pre> \n\nlike in photoshp :)\nthanks a lot for all of what you help me\n. yeah this function is more like what I whant :)\nI tried to make a function to use this function with a slider (like in photoshop) and her what I did\n\n<pre>\n<code>\nvar stockRed,stockGreen,stockBlue,alphix; \nfunction rgb(kineticImage, rouge, vert, bleu, alpha){\n    if (kineticImage === undefined) {    kineticImage = testImage;  }  \n  kineticImage.cache();\n  if ((stockRed !== undefined) || (stockGreen !== undefined) || (stockBlue !== undefined) && (alphix === undefined)) {\n    kineticImage.filters([Kinetic.Filters.rgbAdjust]);\n  }\n  if ((stockRed === undefined || stockGreen === undefined || stockBlue === undefined) && (alphix !== undefined)) {\n    kineticImage.filters([Kinetic.Filters.Brighten]);\n  }\n  if ((stockRed !== undefined || stockGreen !== undefined || stockBlue !== undefined) && (alphix !== undefined)) {\n    kineticImage.filters([Kinetic.Filters.Brighten,Kinetic.Filters.rgbAdjust]);\n  }\nif (alpha !== undefined) {\n    var t = alpha/50;\n    alphix = t;\n    kineticImage.brightness(t);\n  }\n  else if (alphix !== undefined) {\n      kineticImage.brightness(alphix);\n  }\n  else{\n    kineticImage.brightness(0);\n  }\n  //RED\n  if(stockRed === undefined){\n    stockRed = rouge;\n      kineticImage.red(kineticImage.red() + (rouge));\n  }\n  else{\n    //incase of up\n    if (rouge>stockRed) {\n      console.log(\"rouge defini, up \"+ (rouge-stockRed));\n      kineticImage.red(kineticImage.red()+(rouge-stockRed));\n      stockRed=rouge;\n    }\n    //incase of down\n    if (stockRed>rouge ) {\n      console.log(\"rouge defini, down \"+ (stockRed-rouge));\n      kineticImage.red(kineticImage.red() -(stockRed-rouge));\n      stockRed=rouge;\n    }\n  }\n//GREEN\nif(stockGreen === undefined){\n    stockGreen = vert;\n      kineticImage.green(kineticImage.green() + (vert));\n  }\n  else{\n    //incase of up\n    if (vert>stockGreen) {\n      console.log(\"vert defini, up \"+ (vert-stockGreen));\n      kineticImage.green(kineticImage.green()+(vert-stockGreen));\n      stockGreen=vert;\n    }\n    //incase of down\n    if (stockGreen>vert) {\n      console.log(\"vert defini, down \"+ (stockGreen-vert));\n      kineticImage.green(kineticImage.green() -(stockGreen-vert));\n      stockGreen=vert;\n    }\n  }\n  //BLUE\n  if(stockBlue === undefined){\n      stockBlue = bleu;\n        kineticImage.blue(kineticImage.blue() + (bleu));\n    }\n    else{\n    //incase of up\n      if (bleu>stockBlue) {\n        console.log(\"bleu defini, up \"+ (bleu-stockBlue));\n        kineticImage.blue(kineticImage.blue()+(bleu-stockBlue));\n        stockBlue=bleu;\n      }\n    //incase of down\n      if (stockBlue>bleu) {\n        console.log(\"bleu defini, down \"+ (stockBlue-bleu));\n        kineticImage.blue(kineticImage.blue() -(stockBlue-bleu));\n        stockBlue=bleu;\n      }\n    }\n  kineticImage.getLayer().draw();\n}\n</code>\n</pre>\n\nbut I get a new issu: i can only apply one filter color, try it with 4 slider (one for the blue,red,green and for the alpha) set their value between -125 and 125 and set the default value to 0.\nthe function don't work well, if i don't do the check and all the substraction with the \"stock\" value it'll get exponotially upward so,\nif you comment 2 colours (like comment the green and blue like you can see in the comments)\nthe code will work perfectly\nbut if i let an other color be in the code, i'll get only one available color to \"play\" with it, the other will be innefficiant and the one who work will get some bug (like getting some 50 value more Oo)\n. well this is exactly what I wanted. \nthanks a lot.\ncan I also ask a question that can be a litle annoying?\nI need a tool that can transform the color (like this one) but it'll change the color with the color balance like her: \nhttp://www.linternaute.com/photo_numerique/prise-de-vue/reussir-ses-photos-de-paysage/retouches-des-couleurs-et-saturations.shtml\nsorry it's in french but the the picture explain good what i'm trying to make, a tool that allow the user to play with color on a canvas\ndid you think it's possible to reuse the same code to make the same tool?\n. yes this help me a lot thank for all of these explication :)\nsorry for my bad english, isn't my native language :/\n. Here a jsfiddle with what i've done, i'll open a new issue bill because of the drag fonction\nhttp://jsfiddle.net/junkees/tf7m3/1/\n. ",
    "gaddie-3": "Sounds great! I hadn't thought about using commas, though I don't use CSS as much as I used to.\n\nFunny, I was pretty sure the unit tests ran fully when I submitted the request. Sorry about that. \n\nThanks for the merge!\n. Sounds great! I hadn't thought about using commas, though I don't use CSS as much as I used to.\n\nFunny, I was pretty sure the unit tests ran fully when I submitted the request. Sorry about that. \n\nThanks for the merge!\n. ",
    "AIRIA": "it's very nice! thanks!\n. it's very nice! thanks!\n. ",
    "agamemnus": "If I had to guess I would say that it is using jquery's event handling code, which don't account for css rotation.\n. I need the same functionality.. :-(\n. I found a StackOverflow reply that says essentially it's just not coded.\n\nI've created a workaround which might help you:\n1) First, I convert the path shape to an image, picking a reasonable buffer for the shape.\n2) Then, I trim empty spaces with this function that I made:\n\n```\nfunction canvas_trim_empty_space (source_canvas) {\n var canvas_initial_width = source_canvas.width, canvas_initial_height = source_canvas.height\n var ctx = source_canvas.getContext ('2d')\n var canvas_data = ctx.getImageData(0, 0, canvas_initial_width, canvas_initial_height)\n var canvas_data_data = canvas_data.data\n var curlen = canvas_data_data.length\n var x0=0, x1=canvas_initial_width, y0=0, y1=canvas_initial_height\n for (var y = 0; y < canvas_initial_height; y++) {\n  var y_address = y*canvas_initial_width\n  var all_empty = true\n  for (var x = 0; x < canvas_initial_width; x++) {\n   var a = canvas_data_data[(y_address + x)*4+3]\n   if (a != 0) {all_empty = false; break}\n  }\n  if (all_empty == false) {y0 = y; break}\n }\n for (var y = canvas_initial_height - 1; y >= 0; y--) {\n  var y_address = y*canvas_initial_width\n  var all_empty = true\n  for (var x = 0; x < canvas_initial_width; x++) {\n   var a = canvas_data_data[(y_address + x)*4+3]\n   if (a != 0) {all_empty = false; break}\n  }\n  if (all_empty == false) {y1 = y; break}\n }\n for (var x = 0; x < canvas_initial_width; x++) {\n  var all_empty = true\n  for (var y = 0; y < canvas_initial_height; y++) {\n   var a = canvas_data_data[(y*canvas_initial_width + x)*4+3]\n   if (a != 0) {all_empty = false; break}\n  }\n  if (all_empty == false) {x0 = x; break}\n }\n for (var x = canvas_initial_width - 1; x >= 0; x--) {\n  var all_empty = true\n  for (var y = 0; y < canvas_initial_height; y++) {\n   var a = canvas_data_data[(y*canvas_initial_width + x)*4+3]\n   if (a != 0) {all_empty = false; break}\n  }\n  if (all_empty == false) {x1 = x; break}\n }\n var new_width = x1-x0+1, new_height = y1-y0+1\n var target_canvas = document.createElement ('canvas')\n var target_ctx = target_canvas.getContext ('2d')\n target_canvas.width  = new_width\n target_canvas.height = new_height\n target_ctx.drawImage (source_canvas, x0, y0, new_width, new_height, 0, 0, new_width, new_height)\n return target_canvas\n}\n```\n. The actual canvas element is twice the size on mobile... so it is 512x512 instead of 256x256... not styling or anything.\n\nPerhaps you could document this behavior, and create a flag to prevent it... I spent a long time trying to figure out why my collision map was off!\n\n(I needed kineticjs for the svg renderer for a jigsaw game.. both for collisions and for pieces. Ultimately I just took a portion of the Path plugin code and used vanilla canvas.)\n. If I had to guess I would say that it is using jquery's event handling code, which don't account for css rotation.\n. I need the same functionality.. :-(\n. I found a StackOverflow reply that says essentially it's just not coded.\n\nI've created a workaround which might help you:\n1) First, I convert the path shape to an image, picking a reasonable buffer for the shape.\n2) Then, I trim empty spaces with this function that I made:\n\n```\nfunction canvas_trim_empty_space (source_canvas) {\n var canvas_initial_width = source_canvas.width, canvas_initial_height = source_canvas.height\n var ctx = source_canvas.getContext ('2d')\n var canvas_data = ctx.getImageData(0, 0, canvas_initial_width, canvas_initial_height)\n var canvas_data_data = canvas_data.data\n var curlen = canvas_data_data.length\n var x0=0, x1=canvas_initial_width, y0=0, y1=canvas_initial_height\n for (var y = 0; y < canvas_initial_height; y++) {\n  var y_address = y*canvas_initial_width\n  var all_empty = true\n  for (var x = 0; x < canvas_initial_width; x++) {\n   var a = canvas_data_data[(y_address + x)*4+3]\n   if (a != 0) {all_empty = false; break}\n  }\n  if (all_empty == false) {y0 = y; break}\n }\n for (var y = canvas_initial_height - 1; y >= 0; y--) {\n  var y_address = y*canvas_initial_width\n  var all_empty = true\n  for (var x = 0; x < canvas_initial_width; x++) {\n   var a = canvas_data_data[(y_address + x)*4+3]\n   if (a != 0) {all_empty = false; break}\n  }\n  if (all_empty == false) {y1 = y; break}\n }\n for (var x = 0; x < canvas_initial_width; x++) {\n  var all_empty = true\n  for (var y = 0; y < canvas_initial_height; y++) {\n   var a = canvas_data_data[(y*canvas_initial_width + x)*4+3]\n   if (a != 0) {all_empty = false; break}\n  }\n  if (all_empty == false) {x0 = x; break}\n }\n for (var x = canvas_initial_width - 1; x >= 0; x--) {\n  var all_empty = true\n  for (var y = 0; y < canvas_initial_height; y++) {\n   var a = canvas_data_data[(y*canvas_initial_width + x)*4+3]\n   if (a != 0) {all_empty = false; break}\n  }\n  if (all_empty == false) {x1 = x; break}\n }\n var new_width = x1-x0+1, new_height = y1-y0+1\n var target_canvas = document.createElement ('canvas')\n var target_ctx = target_canvas.getContext ('2d')\n target_canvas.width  = new_width\n target_canvas.height = new_height\n target_ctx.drawImage (source_canvas, x0, y0, new_width, new_height, 0, 0, new_width, new_height)\n return target_canvas\n}\n```\n. The actual canvas element is twice the size on mobile... so it is 512x512 instead of 256x256... not styling or anything.\n\nPerhaps you could document this behavior, and create a flag to prevent it... I spent a long time trying to figure out why my collision map was off!\n\n(I needed kineticjs for the svg renderer for a jigsaw game.. both for collisions and for pieces. Ultimately I just took a portion of the Path plugin code and used vanilla canvas.)\n. ",
    "ThomasRuby": "Hi,\n\nare you sure that it's a bug ? Because the mouseLeave event are fired because the children still exist in the stage. When you remove the group, it didn't cancel the propagation of any event related to the children. So if you want to stop the event from being fired, you should try to remove the child from the group rather than remove the group from its parent.\n\nhave a look at this fix :\nhttp://jsfiddle.net/dC7vy/4/\n. I think it's not a bug, and without response from @alabalanitza, i suggest closing this issue...\n\nBest regards\n. I think hasShadow is not what you expected, it \"returns whether or not a shadow will be rendered\"\n\nSo if you use getShadowEnabled() it works : http://jsfiddle.net/uT5Zb/3/\n\nBut i don't understand why the hasShadow() on console.log cancel the next shadowEnabled(false) on your demo...\n. Oh sorry ! Indeed, a test was necessary... ^^'\n. Hi,\n\nare you sure that it's a bug ? Because the mouseLeave event are fired because the children still exist in the stage. When you remove the group, it didn't cancel the propagation of any event related to the children. So if you want to stop the event from being fired, you should try to remove the child from the group rather than remove the group from its parent.\n\nhave a look at this fix :\nhttp://jsfiddle.net/dC7vy/4/\n. I think it's not a bug, and without response from @alabalanitza, i suggest closing this issue...\n\nBest regards\n. I think hasShadow is not what you expected, it \"returns whether or not a shadow will be rendered\"\n\nSo if you use getShadowEnabled() it works : http://jsfiddle.net/uT5Zb/3/\n\nBut i don't understand why the hasShadow() on console.log cancel the next shadowEnabled(false) on your demo...\n. Oh sorry ! Indeed, a test was necessary... ^^'\n. ",
    "BlakeHancock": "I have the same issue, only it effects Chrome and Opera 15 only and having a filter doesn't matter. If a crop value is set, the image will not show up.\n. I have the same issue, only it effects Chrome and Opera 15 only and having a filter doesn't matter. If a crop value is set, the image will not show up.\n. ",
    "pmhofer": "ok. sounds perfect. but I also tried another code which should be working, because it redraws the stage only once. Should I still use the batch.Draw() with this one?\n\n```\n         $(window).bind('resizeEnd', function() {\n\n         OutShapes();\n         stage.setWidth(window.innerWidth);\n         stage.setHeight(window.innerHeight);\n\n          });\n\n\n         $(window).resize(function() {\n\n          if(this.resizeTO) clearTimeout(this.resizeTO);\n          this.resizeTO = setTimeout(function() {\n          $(this).trigger('resizeEnd');\n          }, 500);\n\n          })            \n```\n. ok. sounds perfect. but I also tried another code which should be working, because it redraws the stage only once. Should I still use the batch.Draw() with this one?\n\n```\n         $(window).bind('resizeEnd', function() {\n\n         OutShapes();\n         stage.setWidth(window.innerWidth);\n         stage.setHeight(window.innerHeight);\n\n          });\n\n\n         $(window).resize(function() {\n\n          if(this.resizeTO) clearTimeout(this.resizeTO);\n          this.resizeTO = setTimeout(function() {\n          $(this).trigger('resizeEnd');\n          }, 500);\n\n          })            \n```\n. ",
    "jth0024": "I have box = new Kinetic.Rect() and line = new Kinetic.Line() and I was using line.setX(box.getX()) to move the line for box.on(dragmove)...If I'm redrawing the layer inside the dragmove function, would this also cause a similar crash? I'm trying to debug a safari mobile crash. \n. This occurs in safari as well, by the way.  \n. I have box = new Kinetic.Rect() and line = new Kinetic.Line() and I was using line.setX(box.getX()) to move the line for box.on(dragmove)...If I'm redrawing the layer inside the dragmove function, would this also cause a similar crash? I'm trying to debug a safari mobile crash. \n. This occurs in safari as well, by the way.  \n. ",
    "yuchaosydney": "Awsome answers!\n. Awsome answers!\n. ",
    "javlonsodikov": "same here. \n\nAlso When I draw custom sketches on existing layers, after saving they are disappears. \ni am using sketch.js by binding it to existing Kineticjs layer. \n. same here. \n\nAlso When I draw custom sketches on existing layers, after saving they are disappears. \ni am using sketch.js by binding it to existing Kineticjs layer. \n. ",
    "MarkusLeth": "I have been testing your framework pretty thoroughly and in my first attempt I ended up with events firing all over the place and a lot of attributes changing back and forth as the state changed in the application.\n\nIn my second attempt I decided to go for a more functional programming approach where shapes loaded attributes from other shapes, for example this shape x = other shape x + 5.\n\nI started to extend your types and overload the attributes that had dependencies to other objects. This gave me really clean code without complex event handlers.\n\nMy point being that I could do all this without changing the Kineticjs-source (which is great). The first time I run into problems was when I wanted to add a line between two shapes (points calculated from the coordinates from the other shapes). Then, the point array was hidden from me inside Kineticjs.\n\nSo from my point of view, passing functions to all attributes is not as important as getting better access to the point array. The fact that this was the first time I had to make changes to your source proves that :)\n\nI totally agree that performance is a big issue. I have been thinking about checking the attributes in the constructor. Then you know once and for all if the attribute is a function.\n\nAgain, Kineticjs is absolutely brilliant.\n. I have been testing your framework pretty thoroughly and in my first attempt I ended up with events firing all over the place and a lot of attributes changing back and forth as the state changed in the application.\n\nIn my second attempt I decided to go for a more functional programming approach where shapes loaded attributes from other shapes, for example this shape x = other shape x + 5.\n\nI started to extend your types and overload the attributes that had dependencies to other objects. This gave me really clean code without complex event handlers.\n\nMy point being that I could do all this without changing the Kineticjs-source (which is great). The first time I run into problems was when I wanted to add a line between two shapes (points calculated from the coordinates from the other shapes). Then, the point array was hidden from me inside Kineticjs.\n\nSo from my point of view, passing functions to all attributes is not as important as getting better access to the point array. The fact that this was the first time I had to make changes to your source proves that :)\n\nI totally agree that performance is a big issue. I have been thinking about checking the attributes in the constructor. Then you know once and for all if the attribute is a function.\n\nAgain, Kineticjs is absolutely brilliant.\n. ",
    "babuj1980": "Thanks\n. Thanks\n. ",
    "joker-ltd": "On 18 August 2013 23:48, Eric Rowell notifications@github.com wrote:\n\n> can you create a simple jsfiddle showing the problem? It will be easier to\n> debug there.\n\nThank's a lot but we have do another kind of choice. We have turned all the\nproject in pure js (with jQuery help) cause the deadline of the project.\nI think that kinectjs remain a great framework but maybe isn't the better\nchoice for our complex project.\n\n## Carlos\n\n\"Siamo coloro che impastano, eppure non abbiamo pane,\nsiamo coloro che scavano il carbone, eppure abbiamo freddo\nSiamo coloro che non hanno nulla, e stiamo venendo a prendere il mondo.\"\nTassos Livaditis (Poeta greco, 1922, 1988)\n. On 18 August 2013 23:48, Eric Rowell notifications@github.com wrote:\n\n> can you create a simple jsfiddle showing the problem? It will be easier to\n> debug there.\n\nThank's a lot but we have do another kind of choice. We have turned all the\nproject in pure js (with jQuery help) cause the deadline of the project.\nI think that kinectjs remain a great framework but maybe isn't the better\nchoice for our complex project.\n\n## Carlos\n\n\"Siamo coloro che impastano, eppure non abbiamo pane,\nsiamo coloro che scavano il carbone, eppure abbiamo freddo\nSiamo coloro che non hanno nulla, e stiamo venendo a prendere il mondo.\"\nTassos Livaditis (Poeta greco, 1922, 1988)\n. ",
    "hohmann": "I think I stumbled on this problem as well.  Not a clue if it was the right thing to do, but I ended up replacing the draw with a batchdraw and my performance went up significantly.\n. I think I stumbled on this problem as well.  Not a clue if it was the right thing to do, but I ended up replacing the draw with a batchdraw and my performance went up significantly.\n. ",
    "bensquire": "@ericdrowell Stumbled across this today, any updates? Thanks in advance!\n. +1\n. Thank @kzhdev, I figured as much, however why would this be the default behaviour? I would imagine most people would simply end up writing a function to loop over each child finding its max/min Y coordinate, to work out the groups height...\n. I'm in a similar position to @dave-ledsign and @Arduinology , kineticJs plays a pivotal role in quite a complex system... It'll take many many hours to port the existing codebase over. I suspect we'll end up running the current version until it becomes completely unfit for purpose.\n. @lavrton Many thanks for picking up the mantle, If I can help somehow then just let me know.\n. We're developing a tool that allows users to proof read (markup) documents. Which means we have potentially hundreds of shapes grouped which can be manipulated (moved, resized, have events attached to them). We render vector shapes and text on the canvas and rely on the ability to stack the canvases as well. The whole thing is then wrapped up inside angularjs.\n\n![screen shot 2015-01-09 at 14 51 17](https://cloud.githubusercontent.com/assets/600237/5681285/14eae0e2-980f-11e4-9fc6-bb242cb5dac2.png)\n. It did have a link up until 3 hours ago, but @ericdrowell seems to have removed it?\n. @kathir26 You might want to check out the repo landing page. Its ceased development...\n. I'm just someone that follows the repo... that said it has been forked [here](https://github.com/konvajs/konva) and they have documentation for [animation](http://konvajs.github.io/docs/animations/Moving.html) as well. Hope that helps.\n. @kathir26 Well I doubt @ericdrowell will patch this repo. So the best thing you can do is raise a bug request with Konva, with a lot more detail and code samples...\n. @ericdrowell Stumbled across this today, any updates? Thanks in advance!\n. +1\n. Thank @kzhdev, I figured as much, however why would this be the default behaviour? I would imagine most people would simply end up writing a function to loop over each child finding its max/min Y coordinate, to work out the groups height...\n. I'm in a similar position to @dave-ledsign and @Arduinology , kineticJs plays a pivotal role in quite a complex system... It'll take many many hours to port the existing codebase over. I suspect we'll end up running the current version until it becomes completely unfit for purpose.\n. @lavrton Many thanks for picking up the mantle, If I can help somehow then just let me know.\n. We're developing a tool that allows users to proof read (markup) documents. Which means we have potentially hundreds of shapes grouped which can be manipulated (moved, resized, have events attached to them). We render vector shapes and text on the canvas and rely on the ability to stack the canvases as well. The whole thing is then wrapped up inside angularjs.\n\n![screen shot 2015-01-09 at 14 51 17](https://cloud.githubusercontent.com/assets/600237/5681285/14eae0e2-980f-11e4-9fc6-bb242cb5dac2.png)\n. It did have a link up until 3 hours ago, but @ericdrowell seems to have removed it?\n. @kathir26 You might want to check out the repo landing page. Its ceased development...\n. I'm just someone that follows the repo... that said it has been forked [here](https://github.com/konvajs/konva) and they have documentation for [animation](http://konvajs.github.io/docs/animations/Moving.html) as well. Hope that helps.\n. @kathir26 Well I doubt @ericdrowell will patch this repo. So the best thing you can do is raise a bug request with Konva, with a lot more detail and code samples...\n. ",
    "maxim432": "Didn't know it is by design, thought it would be cleaner to have the starting position at dragstart and the new one on dragmove which is fired immediately after position update. Mousedown/touchstart should work too. Thanks!\n. Didn't know it is by design, thought it would be cleaner to have the starting position at dragstart and the new one on dragmove which is fired immediately after position update. Mousedown/touchstart should work too. Thanks!\n. ",
    "mrksmts": "This fix was specifically targeted to the clip function in a visual way, I'll try to look into the hit region when I have the time.\n. No problem, happy you came up with the same fix, it means I'm not a complete noob ;-)\n. This fix was specifically targeted to the clip function in a visual way, I'll try to look into the hit region when I have the time.\n. No problem, happy you came up with the same fix, it means I'm not a complete noob ;-)\n. ",
    "chrisnicola": "Yeah ran into this too. Anyone want to comment on what the inline-block style is for?\n. Yeah ran into this too. Anyone want to comment on what the inline-block style is for?\n. ",
    "Wexcode": "Another quick fix would be to add `font-size: 0` or `line-height: 0` to the container you pass to the stage.\n. Another quick fix would be to add `font-size: 0` or `line-height: 0` to the container you pass to the stage.\n. ",
    "jonathanazulay": "Can confirm this issue too (v5.1.0), my container is 5px higher than .kineticjs-content. line-height: 0 or setting .kineticjs-content to display: block works.\n\nAlso wondering why it has to be an inline-block?\n. Thanks for your interest in here :+1: \n\nIndeed a Kinetic event object that wraps the DOM event object is the best way. But it breaks a lot of code and should be on a future version in my opinion. \n\nI still like the idea of having it as a second argument (maybe we can even pass the new Kinetic event object as second argument instead). It's backwards compatible and something other libraries do to. About the fire() issue, wouldn't it be possible to rewrite it to fix that? I'm not sure but something like this..\n\n```\nobj.fire('eventname', [evt, moredata, evenmoredata], true); // bubble it\nobj.on('eventname', function (evt, moredata, evenmoredata) { console.log('Lots of data!'); });\n```\n\nAnd if the second argument is not an array it will just become the first argument\n\nBut yeah your solution makes more sense, it will just break a lot of code but it's easily fixed and easy to track down what the problem is.\n. Tried reproducing it in a jsfiddle and it actually worked like I expected, so no problem here :) Something else wrong, trying to figure it out..\n. Can confirm this issue too (v5.1.0), my container is 5px higher than .kineticjs-content. line-height: 0 or setting .kineticjs-content to display: block works.\n\nAlso wondering why it has to be an inline-block?\n. Thanks for your interest in here :+1: \n\nIndeed a Kinetic event object that wraps the DOM event object is the best way. But it breaks a lot of code and should be on a future version in my opinion. \n\nI still like the idea of having it as a second argument (maybe we can even pass the new Kinetic event object as second argument instead). It's backwards compatible and something other libraries do to. About the fire() issue, wouldn't it be possible to rewrite it to fix that? I'm not sure but something like this..\n\n```\nobj.fire('eventname', [evt, moredata, evenmoredata], true); // bubble it\nobj.on('eventname', function (evt, moredata, evenmoredata) { console.log('Lots of data!'); });\n```\n\nAnd if the second argument is not an array it will just become the first argument\n\nBut yeah your solution makes more sense, it will just break a lot of code but it's easily fixed and easy to track down what the problem is.\n. Tried reproducing it in a jsfiddle and it actually worked like I expected, so no problem here :) Something else wrong, trying to figure it out..\n. ",
    "pronebird": "Can this be fixed on KineticJS side? I get scrollbars on fullscreen canvas.\n. It is a bug. Can we apply scale the way translate is applied on cached canvas?\n. Is it the same if you use raster?\n. You use SVG image as I can see, is it possible to use PNG to see if it affects performance?\n. Thanks :+1: \n. I think it's a false alarm caused by livereload..\n. Can this be fixed on KineticJS side? I get scrollbars on fullscreen canvas.\n. It is a bug. Can we apply scale the way translate is applied on cached canvas?\n. Is it the same if you use raster?\n. You use SVG image as I can see, is it possible to use PNG to see if it affects performance?\n. Thanks :+1: \n. I think it's a false alarm caused by livereload..\n. ",
    "ConTrast77": "Shape.get('#25')[0]\nGroup.get('#20')[0]\nLayer.get('#22')[0]\nStage.get('#21')[0]\n// only single (unique)\n\nvar shapeObjects = Layer.get('Shape'); // get objects in Type\nvar shapeObject = shapeObjects.toArray()[0]; // get first object\n. Thank you for your help, the error is partially.\nThis line is needed: var pageList = [[], []];\n. A similar problem.\nIf you are using: Google chrome \"and refresh the page several times - canvas ceases to give an image.\nThis problem manifests itself in the many bookmarks.\nVersion Chrome 29.0.1547.62 m, or lower.\n\nUsing Opera 12.16 b1860 - Ok.\n. Shape.get('#25')[0]\nGroup.get('#20')[0]\nLayer.get('#22')[0]\nStage.get('#21')[0]\n// only single (unique)\n\nvar shapeObjects = Layer.get('Shape'); // get objects in Type\nvar shapeObject = shapeObjects.toArray()[0]; // get first object\n. Thank you for your help, the error is partially.\nThis line is needed: var pageList = [[], []];\n. A similar problem.\nIf you are using: Google chrome \"and refresh the page several times - canvas ceases to give an image.\nThis problem manifests itself in the many bookmarks.\nVersion Chrome 29.0.1547.62 m, or lower.\n\nUsing Opera 12.16 b1860 - Ok.\n. ",
    "Jamesgt": "Its working for me, using v4.7.4\n. Its working for me, using v4.7.4\n. ",
    "drewhendrickson": "Worked great, thanks!\n. Worked great, thanks!\n. ",
    "tarunbatta": "Not a bug.\n. Not a bug.\n. ",
    "jasongaylord": "What did you do to solve this?\n. What did you do to solve this?\n. ",
    "moberemk": "Maybe it would work better if it weren't so much setting explicit properties as just default values for them to inherit? Alternatively, making the default font pull from whatever the containing tag uses would improve cross-platform consistency.\n. Maybe it would work better if it weren't so much setting explicit properties as just default values for them to inherit? Alternatively, making the default font pull from whatever the containing tag uses would improve cross-platform consistency.\n. ",
    "rylanhalteman": "I should mention that I'm using a custom download with Core, Image, Rect, Text, Animation, and DragAndDrop.\n. Looking forward to the fix; thanks for all your hard work!\n. I should mention that I'm using a custom download with Core, Image, Rect, Text, Animation, and DragAndDrop.\n. Looking forward to the fix; thanks for all your hard work!\n. ",
    "ravenblackx": "Isn't blurring only a problem if devicePixelRatio is >1? When that's the\ncase Firefox works fine, it's only a devicePixelRatio less than one that\ncauses a problem, and there I don't think the output is blurry. So changing\nthat initialization function to\ndevicePixelRatio=max(1,window.devicePixelRatio) might be a relatively\nharmless workaround? (Note: Chrome doesn't seem to return a\nwindow.devicePixelRatio less than one.)\n\nThere's also possibly an issue that the value is only set on load, so\nzooming after it's set can still result in blurring.\n\nOn Mon, Aug 26, 2013 at 2:05 AM, Eric Rowell notifications@github.comwrote:\n\n> Interesting, this appears to be a bug with Firefox, which they've marked\n> as WON'T FIX\n> \n> https://bugzilla.mozilla.org/show_bug.cgi?id=809788\n> \n> It's not KineticJS specific, and there's not really a clean way to work\n> around this. The Firefox devs seem to be a bit stubborn about this issue.\n> I'm closing this for now, but will keep it in mind.\n> \n> Btw, the point of the pixel ratio adjustments is to ensure sharp drawings.\n> On devices with a pixel ratio != 1, the canvas drawings will appear blurry\n> without the adjustments. Overall, it's very good to have this in place,\n> because it effects many mobile devices, tablets, iMacs, etc.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/563#issuecomment-23245004\n> .\n. Isn't blurring only a problem if devicePixelRatio is >1? When that's the\ncase Firefox works fine, it's only a devicePixelRatio less than one that\ncauses a problem, and there I don't think the output is blurry. So changing\nthat initialization function to\ndevicePixelRatio=max(1,window.devicePixelRatio) might be a relatively\nharmless workaround? (Note: Chrome doesn't seem to return a\nwindow.devicePixelRatio less than one.)\n\nThere's also possibly an issue that the value is only set on load, so\nzooming after it's set can still result in blurring.\n\nOn Mon, Aug 26, 2013 at 2:05 AM, Eric Rowell notifications@github.comwrote:\n\n> Interesting, this appears to be a bug with Firefox, which they've marked\n> as WON'T FIX\n> \n> https://bugzilla.mozilla.org/show_bug.cgi?id=809788\n> \n> It's not KineticJS specific, and there's not really a clean way to work\n> around this. The Firefox devs seem to be a bit stubborn about this issue.\n> I'm closing this for now, but will keep it in mind.\n> \n> Btw, the point of the pixel ratio adjustments is to ensure sharp drawings.\n> On devices with a pixel ratio != 1, the canvas drawings will appear blurry\n> without the adjustments. Overall, it's very good to have this in place,\n> because it effects many mobile devices, tablets, iMacs, etc.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/563#issuecomment-23245004\n> .\n. ",
    "fuzzley": "That's a known issue in firefox. According to [this thread](http://stackoverflow.com/questions/8954028/firefox-svg-graphics-blurry), this issue should be fixed within the next month or two.\n. That's a known issue in firefox. According to [this thread](http://stackoverflow.com/questions/8954028/firefox-svg-graphics-blurry), this issue should be fixed within the next month or two.\n. ",
    "aniruddha-loya": "Thanks! \nthere already is an _setTransform() method, but using that does not affect the rendering because it is not considered as part of it and is overridden. So a method to setTransform() will essentially have to do something similar to suggested solution in order to override draw method, or there is an option to set individual properties like setAbsolutePosition(), setAbsoluteRotation(), etc. so that the end effect is same. Looking forward to see your update on this in future version :)\n. Thanks! \nthere already is an _setTransform() method, but using that does not affect the rendering because it is not considered as part of it and is overridden. So a method to setTransform() will essentially have to do something similar to suggested solution in order to override draw method, or there is an option to set individual properties like setAbsolutePosition(), setAbsoluteRotation(), etc. so that the end effect is same. Looking forward to see your update on this in future version :)\n. ",
    "jpbochi": ":+1:\n. :+1:\n. ",
    "stbaer": "+1\n. I made a bower package that only includes the dist folder. \nWill try to keep it up to date until it's in the original KineticJS package.\nPackage name is KineticJS_dist (bower install KineticJS_dist ... ).\n. Good news. Thank you.\n. +1\n. I made a bower package that only includes the dist folder. \nWill try to keep it up to date until it's in the original KineticJS package.\nPackage name is KineticJS_dist (bower install KineticJS_dist ... ).\n. Good news. Thank you.\n. ",
    "kzhdev": "+1.\n\nPlease also remove the version number. \n. My shape has shadow. Here is my code:\n\nlayer.setClip([x, y, width, height]);\nlayer.draw();\n1. Uncaught TypeError: Object #<Object> has no method '_applyShadow'\n   kinetic.js?t=1380822358:5764http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   1. Kinetic.Util.addMethods.drawScenekinetic.js?t=1380822358:5764http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   2. (anonymous\n      function)kinetic.js?t=1380822358:5393http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   3. Kinetic.Collection.eachkinetic.js?t=1380822358:506http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   4. Kinetic.Util.addMethods._drawChildrenkinetic.js?t=1380822358:5392http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   5. Kinetic.Util.addMethods.drawScenekinetic.js?t=1380822358:5385http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   6. (anonymous\n      function)kinetic.js?t=1380822358:5393http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   7. Kinetic.Collection.eachkinetic.js?t=1380822358:506http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   8. Kinetic.Util.addMethods._drawChildrenkinetic.js?t=1380822358:5392http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   9. Kinetic.Context._clipkinetic.js?t=1380822358:1695http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   10. Kinetic.Util.addMethods.drawHitkinetic.js?t=1380822358:5406http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   11. Kinetic.Util.addMethods.drawHitkinetic.js?t=1380822358:7667http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   12. Kinetic.Util.addMethods.drawkinetic.js?t=1380822358:3583http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   13. addBlockcontroller.js?t=1380822358:268http://localhost:5000/s/scripts/lib/adl/controller.js?t=1380822358\n   14. Backbone.View.extend.onBlockDoubleClick\n       block-panel-view.js?t=1380822358:80http://localhost:5000/s/scripts/widgets/adl/views/block-panel-view.js?t=1380822358\n   15. boundlodash.js?t=1380822358:483http://localhost:5000/s/scripts/lib/lodash/lodash.js?t=1380822358\n   16. Kinetic.Util.addMethods._firekinetic.js?t=1380822358:3571http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   17. Kinetic.Util.addMethods._fireAndBubblekinetic.js?t=1380822358:3551http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   18. Kinetic.Util.addMethods._fireAndBubblekinetic.js?t=1380822358:3559http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   19. Kinetic.Util.addMethods._mouseupkinetic.js?t=1380822358:7385http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   20. (anonymous function)\n       \n       I believe there is a bug somewhere in\n       hitCanvas.getContext()._clip(this).\n\nOn Thu, Oct 3, 2013 at 12:31 PM, Eric Rowell notifications@github.comwrote:\n\n> the hit context should not render shadows. This is by design. Can you be\n> more specific as to how you are getting an error? can you copy and paste\n> the exact error you're getting?\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/620#issuecomment-25640920\n> .\n. Once I extracted the code out, it worked fine. I'm trying to reproduce it on a simplified code, but have no luck yet. \n. I believe the problem could be in layer.getIntersection. I encountered another issue where mouseout event was fired incorrectly. In that case, I have a small rectangle (8x8), it listened to mouseout event, but the event sometimes fired when the mouse was still inside the rectangle. In both case, the layer.getIntersection wasn't return the shape.\n\nI am also suspect that the point position was not correct because in mouseout event, I logged the pointer position, the y value was slightly off when the mouse was still in the rectangle.\n. I'm using chrome v29 and no zooming applied.\n\nOn Fri, Oct 4, 2013 at 10:30 PM, Eric Rowell notifications@github.comwrote:\n\n> Are you using Firefox with the zoom != 100%?\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/627#issuecomment-25741220\n> .\n. Here is the jsfiddle to reproduce the wrong mouseout event.\n\nhttp://jsfiddle.net/kzhdev/Sty66/17/\n\nopen develop tool, move the mouse inside the grey border, the mouse out event fired.\n. Thanks, it looks much better now.\n\nOnce the mouse moved into the inner rectangle, the mouseout event fired.\n. Thanks for pointing that out. However, in my project, using mouseenter/mouseleave the behavior still not quite right. When mouse moving across the inner rectangle border, the mouseleave event fired. I can't replicate in jsfiddle.\n. Yes, I attached the events to a group\n\nOn Mon, Oct 7, 2013 at 12:45 PM, Eric Rowell notifications@github.comwrote:\n\n> are you attaching mouseenter and mouseleave to the container node? i.e. a\n> group or layer\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/627#issuecomment-25829241\n> .\n. Here is the live example:\n\nhttp://kzhdev.github.io/index.html\n\nMoving mouse around the 0, you will see that mouseleave event was fired.\n. This seems only an issue on MacBook Pro w/ retina display. It works fine on window machines. Don't if or not it works on MacBook Pro w/o retina display.\n. I found a article. It might be the cause of this issue.\n\nhttp://www.html5rocks.com/en/tutorials/canvas/hidpi/\n. Here is the fix: bb51ffe701a84483bf82adca5618337e1b54f400\n. Thanks that worked, but why dragging from top-left towards to bottom-right\ndidn't throw the error?\n\nOn Tue, Oct 8, 2013 at 7:27 PM, Eric Rowell notifications@github.comwrote:\n\n> It looks like you're running into a very slim edge case. It looks like\n> KineticJS is storing an invalid click start position because you're\n> creating the rectangle on mousedown. When the mouseup event is triggered,\n> the error is thrown there. As a work around for now (you should be doing\n> this anyways for performance) you can add listening: false to the rectangle\n> so that it's not detectable. Here's the working fiddle:\n> \n> http://jsfiddle.net/JtZ8c/\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/634#issuecomment-25938775\n> .\n. The problem is still there. Actually, 5.1.0 is worse, not just the cashed image, the quality of non-cached shape is bad too.\n. Set the pixelRatio to 1 for desktops is really bad. It made everything blur in high resolution computers, like Mac Book Pro with Retina display. Here is the comments:\n\n```\n    As of 02/26/2014, there doesn't seem to be a way\n    // to reliably calculate the browser zoom for modern browsers, which is why we just set\n    // the pixel ratio to 1 for desktops\n```\n\nI don't know why you care browser zoom? Browser zoom wouldn't matter, it apply after the canvas drawing.\n. 100% sure. \nHere is the image in 5.1.0, left side is non-cached shape, right side is cached shape.\n http://jsfiddle.net/kzhdev/43tfG/18/\n\nThis is the original in 5.0.1\nhttp://jsfiddle.net/kzhdev/43tfG/8/\n\nThis is my fix:\nhttp://jsfiddle.net/kzhdev/43tfG/17/\n. On iPad is OK because it was on mobile, its pixelRatio is 2. On desktop, like Mac Book with Retina display, the pixelRation is 1, that bad.\n. The fix want't quite right. Closed.\n. I updated the jsFiddle. The cache doesn't have a hit at all.\n. If moved the cache.cache() after layer.add(cache), the cache now has a hit.\n\nhere is the jsFiddle.\nhttp://jsfiddle.net/kzhdev/y4acp/10/\n\nHowever, the mouse over event on the text doesn't fire on the cache. It would be nice\n. getMousePosition and getTouchPosition are gone. You should use getPointerPosition instead.\n. I re-fixed this issue because the first attempt failed layer unit test. Please ignore commit 9975fc1.\n. For a group you need to explicitly set the width and hight, otherwise it always returns 0.\n. Please ignore commit 4da39ed.\n\nthe issue is re-fixed in 5431917.\nBoth #785 and #780 are now fixed.\n. The cache mechanism has a bug in nested groups. You can get the fix from #787.\n. This was take care in pull request #787. We need to apply relative\nopacity and scale to the cache not the absolute opacity.\n\nOn Wed, Mar 5, 2014 at 8:40 PM, Anton Lavrenov notifications@github.comwrote:\n\n> May be we can reset opacity before caching (cache function):\n> \n> var prevOpacity = this.getOpacity();this.setOpacity(1);this.drawScene(cachedSceneCanvas);this.drawHit(cachedHitCanvas);this.setOpacity(prevOpacity);\n> \n> then apply opacity to cache\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/pull/816#issuecomment-36819455\n> .\n. No problem. I'll add unit test for that.\n\nOn Tue, Mar 4, 2014 at 8:31 PM, Anton Lavrenov notifications@github.comwrote:\n\n> @kzhdev https://github.com/kzhdev can you write unit test for this?\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/pull/838#issuecomment-36704163\n> .\n. added unit test\n. +1.\n\nPlease also remove the version number. \n. My shape has shadow. Here is my code:\n\nlayer.setClip([x, y, width, height]);\nlayer.draw();\n1. Uncaught TypeError: Object #<Object> has no method '_applyShadow'\n   kinetic.js?t=1380822358:5764http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   1. Kinetic.Util.addMethods.drawScenekinetic.js?t=1380822358:5764http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   2. (anonymous\n      function)kinetic.js?t=1380822358:5393http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   3. Kinetic.Collection.eachkinetic.js?t=1380822358:506http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   4. Kinetic.Util.addMethods._drawChildrenkinetic.js?t=1380822358:5392http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   5. Kinetic.Util.addMethods.drawScenekinetic.js?t=1380822358:5385http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   6. (anonymous\n      function)kinetic.js?t=1380822358:5393http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   7. Kinetic.Collection.eachkinetic.js?t=1380822358:506http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   8. Kinetic.Util.addMethods._drawChildrenkinetic.js?t=1380822358:5392http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   9. Kinetic.Context._clipkinetic.js?t=1380822358:1695http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   10. Kinetic.Util.addMethods.drawHitkinetic.js?t=1380822358:5406http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   11. Kinetic.Util.addMethods.drawHitkinetic.js?t=1380822358:7667http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   12. Kinetic.Util.addMethods.drawkinetic.js?t=1380822358:3583http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   13. addBlockcontroller.js?t=1380822358:268http://localhost:5000/s/scripts/lib/adl/controller.js?t=1380822358\n   14. Backbone.View.extend.onBlockDoubleClick\n       block-panel-view.js?t=1380822358:80http://localhost:5000/s/scripts/widgets/adl/views/block-panel-view.js?t=1380822358\n   15. boundlodash.js?t=1380822358:483http://localhost:5000/s/scripts/lib/lodash/lodash.js?t=1380822358\n   16. Kinetic.Util.addMethods._firekinetic.js?t=1380822358:3571http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   17. Kinetic.Util.addMethods._fireAndBubblekinetic.js?t=1380822358:3551http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   18. Kinetic.Util.addMethods._fireAndBubblekinetic.js?t=1380822358:3559http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   19. Kinetic.Util.addMethods._mouseupkinetic.js?t=1380822358:7385http://localhost:5000/s/scripts/lib/kinetic/kinetic.js?t=1380822358\n   20. (anonymous function)\n       \n       I believe there is a bug somewhere in\n       hitCanvas.getContext()._clip(this).\n\nOn Thu, Oct 3, 2013 at 12:31 PM, Eric Rowell notifications@github.comwrote:\n\n> the hit context should not render shadows. This is by design. Can you be\n> more specific as to how you are getting an error? can you copy and paste\n> the exact error you're getting?\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/620#issuecomment-25640920\n> .\n. Once I extracted the code out, it worked fine. I'm trying to reproduce it on a simplified code, but have no luck yet. \n. I believe the problem could be in layer.getIntersection. I encountered another issue where mouseout event was fired incorrectly. In that case, I have a small rectangle (8x8), it listened to mouseout event, but the event sometimes fired when the mouse was still inside the rectangle. In both case, the layer.getIntersection wasn't return the shape.\n\nI am also suspect that the point position was not correct because in mouseout event, I logged the pointer position, the y value was slightly off when the mouse was still in the rectangle.\n. I'm using chrome v29 and no zooming applied.\n\nOn Fri, Oct 4, 2013 at 10:30 PM, Eric Rowell notifications@github.comwrote:\n\n> Are you using Firefox with the zoom != 100%?\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/627#issuecomment-25741220\n> .\n. Here is the jsfiddle to reproduce the wrong mouseout event.\n\nhttp://jsfiddle.net/kzhdev/Sty66/17/\n\nopen develop tool, move the mouse inside the grey border, the mouse out event fired.\n. Thanks, it looks much better now.\n\nOnce the mouse moved into the inner rectangle, the mouseout event fired.\n. Thanks for pointing that out. However, in my project, using mouseenter/mouseleave the behavior still not quite right. When mouse moving across the inner rectangle border, the mouseleave event fired. I can't replicate in jsfiddle.\n. Yes, I attached the events to a group\n\nOn Mon, Oct 7, 2013 at 12:45 PM, Eric Rowell notifications@github.comwrote:\n\n> are you attaching mouseenter and mouseleave to the container node? i.e. a\n> group or layer\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/627#issuecomment-25829241\n> .\n. Here is the live example:\n\nhttp://kzhdev.github.io/index.html\n\nMoving mouse around the 0, you will see that mouseleave event was fired.\n. This seems only an issue on MacBook Pro w/ retina display. It works fine on window machines. Don't if or not it works on MacBook Pro w/o retina display.\n. I found a article. It might be the cause of this issue.\n\nhttp://www.html5rocks.com/en/tutorials/canvas/hidpi/\n. Here is the fix: bb51ffe701a84483bf82adca5618337e1b54f400\n. Thanks that worked, but why dragging from top-left towards to bottom-right\ndidn't throw the error?\n\nOn Tue, Oct 8, 2013 at 7:27 PM, Eric Rowell notifications@github.comwrote:\n\n> It looks like you're running into a very slim edge case. It looks like\n> KineticJS is storing an invalid click start position because you're\n> creating the rectangle on mousedown. When the mouseup event is triggered,\n> the error is thrown there. As a work around for now (you should be doing\n> this anyways for performance) you can add listening: false to the rectangle\n> so that it's not detectable. Here's the working fiddle:\n> \n> http://jsfiddle.net/JtZ8c/\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/634#issuecomment-25938775\n> .\n. The problem is still there. Actually, 5.1.0 is worse, not just the cashed image, the quality of non-cached shape is bad too.\n. Set the pixelRatio to 1 for desktops is really bad. It made everything blur in high resolution computers, like Mac Book Pro with Retina display. Here is the comments:\n\n```\n    As of 02/26/2014, there doesn't seem to be a way\n    // to reliably calculate the browser zoom for modern browsers, which is why we just set\n    // the pixel ratio to 1 for desktops\n```\n\nI don't know why you care browser zoom? Browser zoom wouldn't matter, it apply after the canvas drawing.\n. 100% sure. \nHere is the image in 5.1.0, left side is non-cached shape, right side is cached shape.\n http://jsfiddle.net/kzhdev/43tfG/18/\n\nThis is the original in 5.0.1\nhttp://jsfiddle.net/kzhdev/43tfG/8/\n\nThis is my fix:\nhttp://jsfiddle.net/kzhdev/43tfG/17/\n. On iPad is OK because it was on mobile, its pixelRatio is 2. On desktop, like Mac Book with Retina display, the pixelRation is 1, that bad.\n. The fix want't quite right. Closed.\n. I updated the jsFiddle. The cache doesn't have a hit at all.\n. If moved the cache.cache() after layer.add(cache), the cache now has a hit.\n\nhere is the jsFiddle.\nhttp://jsfiddle.net/kzhdev/y4acp/10/\n\nHowever, the mouse over event on the text doesn't fire on the cache. It would be nice\n. getMousePosition and getTouchPosition are gone. You should use getPointerPosition instead.\n. I re-fixed this issue because the first attempt failed layer unit test. Please ignore commit 9975fc1.\n. For a group you need to explicitly set the width and hight, otherwise it always returns 0.\n. Please ignore commit 4da39ed.\n\nthe issue is re-fixed in 5431917.\nBoth #785 and #780 are now fixed.\n. The cache mechanism has a bug in nested groups. You can get the fix from #787.\n. This was take care in pull request #787. We need to apply relative\nopacity and scale to the cache not the absolute opacity.\n\nOn Wed, Mar 5, 2014 at 8:40 PM, Anton Lavrenov notifications@github.comwrote:\n\n> May be we can reset opacity before caching (cache function):\n> \n> var prevOpacity = this.getOpacity();this.setOpacity(1);this.drawScene(cachedSceneCanvas);this.drawHit(cachedHitCanvas);this.setOpacity(prevOpacity);\n> \n> then apply opacity to cache\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/pull/816#issuecomment-36819455\n> .\n. No problem. I'll add unit test for that.\n\nOn Tue, Mar 4, 2014 at 8:31 PM, Anton Lavrenov notifications@github.comwrote:\n\n> @kzhdev https://github.com/kzhdev can you write unit test for this?\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/pull/838#issuecomment-36704163\n> .\n. added unit test\n. ",
    "carnevalle": "+1\n. +1\n. ",
    "MrSaints": "+1\n. +1\n. ",
    "jamesearl": "Hero\n. Hero\n. ",
    "proyb2": "Findings show that it's Windows-specific issue, not KineticJS. As Mac and Linux were able to display glyphs correctly.\n. Findings show that it's Windows-specific issue, not KineticJS. As Mac and Linux were able to display glyphs correctly.\n. ",
    "chrisritterc9": "Wanted to update everyone -- the fix has been made and will be pushed to end users at the next Chrome stable release -- as to when that is no one seems to know\n. Posted this issue:\nhttps://code.google.com/p/chromium/issues/detail?id=280153&thanks=280153&ts=1377616231\n. Wanted to update everyone -- the fix has been made and will be pushed to end users at the next Chrome stable release -- as to when that is no one seems to know\n. Wanted to update everyone -- the fix has been made and will be pushed to end users at the next Chrome stable release -- as to when that is no one seems to know\n. Posted this issue:\nhttps://code.google.com/p/chromium/issues/detail?id=280153&thanks=280153&ts=1377616231\n. Wanted to update everyone -- the fix has been made and will be pushed to end users at the next Chrome stable release -- as to when that is no one seems to know\n. ",
    "Nanzikambe": "Confirming, all my apps using Kineticjs (tested all versions from 4.3.1 to 4.6.0) have this issue with Chrome 29.0.1547.62 m - none are able to see the stress page canvas after a refresh.\n. Appears to be related to this bug:\nhttps://code.google.com/p/chromium/issues/detail?id=278940&q=Canvas%20refresh&sort=-modified&colspec=ID%20Pri%20M%20Iteration%20ReleaseBlock%20Cr%20Status%20Owner%20Summary%20OS%20Modified\n\nI confirmed I no longer experience the issue when I resize the Canvas to 200 x 200, but larger (fullscreen) Canvas don't  refresh on 29.0.1547.62\n. Confirming, all my apps using Kineticjs (tested all versions from 4.3.1 to 4.6.0) have this issue with Chrome 29.0.1547.62 m - none are able to see the stress page canvas after a refresh.\n. Appears to be related to this bug:\nhttps://code.google.com/p/chromium/issues/detail?id=278940&q=Canvas%20refresh&sort=-modified&colspec=ID%20Pri%20M%20Iteration%20ReleaseBlock%20Cr%20Status%20Owner%20Summary%20OS%20Modified\n\nI confirmed I no longer experience the issue when I resize the Canvas to 200 x 200, but larger (fullscreen) Canvas don't  refresh on 29.0.1547.62\n. ",
    "erichlof": "I have Version 31.0.1612.1 Chrome Canary Aura and it is working fine.  I refreshed multiple times and the canvas reloads and the drag-and-drop still functions.  Maybe Google got wind of this somehow and have fixed it?  Maybe they could roll back the fix a couple of versions so the current version of stable Chrome will work properly.  Not sure how all that works.  Good luck!\n. I have Version 31.0.1612.1 Chrome Canary Aura and it is working fine.  I refreshed multiple times and the canvas reloads and the drag-and-drop still functions.  Maybe Google got wind of this somehow and have fixed it?  Maybe they could roll back the fix a couple of versions so the current version of stable Chrome will work properly.  Not sure how all that works.  Good luck!\n. ",
    "jochen42": "nice solution. thx!\n. nice solution. thx!\n. ",
    "kenny1har": "I also experience the same thing.\n1. add a group\n2. rotate the group ( .setRotation(x); )\n3. getAbsolutePosition() is always increasing in number\n. the browser is chrome.\n. ```\n var stage = new Kinetic.Stage({\n    container: 'container',\n    width: 578,\n    height: 200\n  });\n  var layer = new Kinetic.Layer();\n\n  var imageObj = new Image();\n  imageObj.onload = function() {\n    var yoda = new Kinetic.Image({\n      x: 200,\n      y: 50,\n      image: imageObj,\n      width: 106,\n      height: 118,\n      rotation: 0.1 // this will produce rough edges\n    });\n\n    // add the shape to the layer\n    layer.add(yoda);\n\n    // add the layer to the stage\n    stage.add(layer);\n  };\n  imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/yoda.jpg';\n```\n. does KineticJS have setting to enable image smothing for webkit ?\nhttp://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-imagesmoothingenabled\n\nhttps://code.google.com/p/chromium/issues/detail?id=131850\n. I am not sure the \"Disable accelerated 2D canvas\" default value because I tested JSFiddle http://jsfiddle.net/KBnYM/ in other computer and it has anti-alias by default.\n. I also experience the same thing.\n1. add a group\n2. rotate the group ( .setRotation(x); )\n3. getAbsolutePosition() is always increasing in number\n. the browser is chrome.\n. ```\n var stage = new Kinetic.Stage({\n    container: 'container',\n    width: 578,\n    height: 200\n  });\n  var layer = new Kinetic.Layer();\n\n  var imageObj = new Image();\n  imageObj.onload = function() {\n    var yoda = new Kinetic.Image({\n      x: 200,\n      y: 50,\n      image: imageObj,\n      width: 106,\n      height: 118,\n      rotation: 0.1 // this will produce rough edges\n    });\n\n    // add the shape to the layer\n    layer.add(yoda);\n\n    // add the layer to the stage\n    stage.add(layer);\n  };\n  imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/yoda.jpg';\n```\n. does KineticJS have setting to enable image smothing for webkit ?\nhttp://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-imagesmoothingenabled\n\nhttps://code.google.com/p/chromium/issues/detail?id=131850\n. I am not sure the \"Disable accelerated 2D canvas\" default value because I tested JSFiddle http://jsfiddle.net/KBnYM/ in other computer and it has anti-alias by default.\n. ",
    "tengfeingoo": "Further testing reveals that getAbsolutePosition is now completely unreliable. The absolute position is always increasing with no reason whatsoever.\n. Further testing reveals that getAbsolutePosition is now completely unreliable. The absolute position is always increasing with no reason whatsoever.\n. ",
    "jaisonjustus": "@ericdrowell if i use Kinetic.Image and when i resize it, does it maintain the quality.\n. @ericdrowell if i use Kinetic.Image and when i resize it, does it maintain the quality.\n. ",
    "vutran": "I'm having to reapply the filters manually as of now on my application based on an active filter attribute value but I think it may make better sense to also save a filterType string for this purpose and applying on Node creation based on the stored filterType.\n. Sorry.\n\nI'm running Chrome Version 30.0.1599.69 on a Macbook Retina.\n\nWhen I mouse over the lion, the text only displays on some parts of the lion. I can replicate the issue with 4.7.0, 4.7.1, and 4.7.2.\n\nI was looking up the past issues regarding similar problems you've mentioned about the pixelRatio and tried setting `Kinetic.pixelRatio = 1` before the stage is instantiated and that seems to fix the problem in that demo page.\n\nHope that helps.\n. I'm having to reapply the filters manually as of now on my application based on an active filter attribute value but I think it may make better sense to also save a filterType string for this purpose and applying on Node creation based on the stored filterType.\n. Sorry.\n\nI'm running Chrome Version 30.0.1599.69 on a Macbook Retina.\n\nWhen I mouse over the lion, the text only displays on some parts of the lion. I can replicate the issue with 4.7.0, 4.7.1, and 4.7.2.\n\nI was looking up the past issues regarding similar problems you've mentioned about the pixelRatio and tried setting `Kinetic.pixelRatio = 1` before the stage is instantiated and that seems to fix the problem in that demo page.\n\nHope that helps.\n. ",
    "ghetolay": "Ok I had to work on anything else for a while but I'll then create a full dedicated project.\nHope you'll be following this project because I could use your expertise to get things nicely done.\n. Ho looks like we are doing the same thing. It makes me sad but it looks like better than mine :)\nI'll get in touch with him. \n. Ok I had to work on anything else for a while but I'll then create a full dedicated project.\nHope you'll be following this project because I could use your expertise to get things nicely done.\n. Ho looks like we are doing the same thing. It makes me sad but it looks like better than mine :)\nI'll get in touch with him. \n. ",
    "gotdan": "Thanks Eric - I suspected it might be a performance optimization. \n\nAdding collision detection with \"dragover\" and \"dragout\" would be really useful!  For now, I'm getting the mouse position on each \"dragmove\" event  and looping through the drop targets to find any overlap (I suspect this is pretty inefficient, but it seems to work ok in my small project :)\n. Thanks Eric - I suspected it might be a performance optimization. \n\nAdding collision detection with \"dragover\" and \"dragout\" would be really useful!  For now, I'm getting the mouse position on each \"dragmove\" event  and looping through the drop targets to find any overlap (I suspect this is pretty inefficient, but it seems to work ok in my small project :)\n. ",
    "danieldunderfelt": "The tempCanvas method doesn't seem to work anymore, at least not using that jsbin code. The stopDrag and startDrag methods seem to make the dragstart (and dragend) event behave like dragmove, ie it fires all the time during the drag, which messes things up. And I didn't get it to work without those drag methods.\n\nIs there a way to turn on the hitgraph during dragging?\n. The tempCanvas method doesn't seem to work anymore, at least not using that jsbin code. The stopDrag and startDrag methods seem to make the dragstart (and dragend) event behave like dragmove, ie it fires all the time during the drag, which messes things up. And I didn't get it to work without those drag methods.\n\nIs there a way to turn on the hitgraph during dragging?\n. ",
    "flogiston": "Thanks @lavrton for the workaround. Saved me a lot of frustration :-)\n. Thanks @lavrton for the workaround. Saved me a lot of frustration :-)\n. ",
    "Arturszott": "It still happens to me in 4.7.4. The jsfiddle above illustrates this example very well.\n. It still happens to me in 4.7.4. The jsfiddle above illustrates this example very well.\n. ",
    "Sjiep": "Did this bug get fixed?\nIt seems to be listed in the Bug Fixes for v5.0.0:\n\nshape edge anti-aliased pixel event detection now works correctly. Thanks fogbrain99 for getting this started!\n\nHowever, I'm still experiencing the behaviour described by OP.\n. The original issue still seems to be a problem in my case: http://jsfiddle.net/LwRnj/52/ So it doesn't seem specifically related to scaling or caching.\n\nThe way I fixed it is by setting the listening property of shapes that trigger this to false. Not the most clean solution, but it works. \n\nEDIT: I'm actually talking about the mouseenter and mouseleave event (and not mouseout and mouseenter as mentioned in title)\n. This seems to be the same issue as posted here: https://github.com/ericdrowell/KineticJS/issues/603#\n. Did this bug get fixed?\nIt seems to be listed in the Bug Fixes for v5.0.0:\n\nshape edge anti-aliased pixel event detection now works correctly. Thanks fogbrain99 for getting this started!\n\nHowever, I'm still experiencing the behaviour described by OP.\n. The original issue still seems to be a problem in my case: http://jsfiddle.net/LwRnj/52/ So it doesn't seem specifically related to scaling or caching.\n\nThe way I fixed it is by setting the listening property of shapes that trigger this to false. Not the most clean solution, but it works. \n\nEDIT: I'm actually talking about the mouseenter and mouseleave event (and not mouseout and mouseenter as mentioned in title)\n. This seems to be the same issue as posted here: https://github.com/ericdrowell/KineticJS/issues/603#\n. ",
    "Migiyaka": "Gotta ask the same question - did this bug get fixed, because I'm experiencing the same (bugged) behavior with 5.0.1 - when moving the mouse in between elements of a Group (which are also Groups which contain Shapes, if that matters), you sometimes get mouseleave trigger even though the event is set for the whole Group. It works fine in Firefox though, it doesn't work in other browsers.\n\nEDIT: Doesn't work in 5.1.0 as well.\n. Ok, I was messing around with the kinetic.js file, and I've noticed 2 things that might help you with solving this issue:\n\n1) The .min file is not the same as the source file\n2) I've fixed the problem by deleting the line if(!b.antialiased)return null from the .min file (version 5.1.0)\n\nNow I have no idea what this line does, or if it will have long-term consequences, but for now, and for me, it solves the issue, and I hope it might help you solve the issue on the bigger scale.\n. Sorry, didn't mention it, but this is that latest kinetic.js. It fixed the issue with antialiasing as you can see here http://jsfiddle.net/LwRnj/54/ but this bug (if it's a bug) is still present. Both this and the jsfiddle in the opening post use the same version of kinetic.js Basically, it works fine with shapes inside groups, but doesn't work with groups inside groups.\n. My bad, the links are http://jsfiddle.net/LwRnj/54/ for the example with shapes inside groups (works fine) and http://jsfiddle.net/fy6LQ/3/ for the example with groups inside groups (doesn't work). Both examples have the same, latest version of kinetic.js from repo.\n. Gotta ask the same question - did this bug get fixed, because I'm experiencing the same (bugged) behavior with 5.0.1 - when moving the mouse in between elements of a Group (which are also Groups which contain Shapes, if that matters), you sometimes get mouseleave trigger even though the event is set for the whole Group. It works fine in Firefox though, it doesn't work in other browsers.\n\nEDIT: Doesn't work in 5.1.0 as well.\n. Ok, I was messing around with the kinetic.js file, and I've noticed 2 things that might help you with solving this issue:\n\n1) The .min file is not the same as the source file\n2) I've fixed the problem by deleting the line if(!b.antialiased)return null from the .min file (version 5.1.0)\n\nNow I have no idea what this line does, or if it will have long-term consequences, but for now, and for me, it solves the issue, and I hope it might help you solve the issue on the bigger scale.\n. Sorry, didn't mention it, but this is that latest kinetic.js. It fixed the issue with antialiasing as you can see here http://jsfiddle.net/LwRnj/54/ but this bug (if it's a bug) is still present. Both this and the jsfiddle in the opening post use the same version of kinetic.js Basically, it works fine with shapes inside groups, but doesn't work with groups inside groups.\n. My bad, the links are http://jsfiddle.net/LwRnj/54/ for the example with shapes inside groups (works fine) and http://jsfiddle.net/fy6LQ/3/ for the example with groups inside groups (doesn't work). Both examples have the same, latest version of kinetic.js from repo.\n. ",
    "IndyIndyIndy": "Same here. This leads to obscure errors. \nOne some PCs (Firefox 24.0), the browser crashes after a little while, when using a simple Kinect.Animation().\nOne another PC i tested (again Firefox 24.0), the browser does not crash, but the app runs very slow and some animations are shown twice with no recognizable pattern behind this. Also a lot of ghosting.\n. Same here. This leads to obscure errors. \nOne some PCs (Firefox 24.0), the browser crashes after a little while, when using a simple Kinect.Animation().\nOne another PC i tested (again Firefox 24.0), the browser does not crash, but the app runs very slow and some animations are shown twice with no recognizable pattern behind this. Also a lot of ghosting.\n. ",
    "ellenm1": "Hi, thank you for your responses! I'll try to be more specific.\n\nI did see the issue with pixel ratio, and tried that change in several versions of kinetic.js, to no avail. The image of the red anesthesia cart loads, and the blue circle target is drawn. At that point,no amount of touching, tapping or whatever seems to affect anything on the screen. Normally, I would expect to be able to click any drawer handle on the cart and have that action trigger an animation where the corresponding drawer layer would smoothly move down from out-of-frame onto the middle of the stage, so you could see the objects in it. Clicking the drawer handle should also make the drawer handle highlight to show that it is active. Neither of those 2 things happen.\n\nYesterday, after reading a lot of possibly related messages, I removed all but one of the drawer layers from the game, and set its initial position to inside the stage boundaries. I also changed to kinetic.js v. 1.7.1 and adjusted the code so that pixelratio would always be \"1\". it worked exactly once, sort of: the animations were very very slow, as was the drag motion when I would drag one of the findable objects. I am not sure what I did to make it work, and what I did to make it no longer work. I will try to figure that out the instant I can.\n\nRegarding devices: I am using a brand new ipad  running  iOS 6, retina display, model MD510LL/A\nThe other devices that DO work with the game include Safari, Firefox, Chrome on various machines, and older non-retina iPads. \n\nI have put up a zip of the game here: \nhttp://thedesignspace.net/misc/treasurehuntHTML5.zip\nI'm sorry, I know you very much prefer a jsfiddle, but I have not yet had time to isolate the cause enough to do a minimal test without images.\n. Note that this is based in large part on your animals on the beach game, with the addition of the drawer animations and scoring - I noted that your animals game works fine on the ipad, so it should be possible to strip my game down to the point where it works on the ipad, which is what I intend to do soon as I have a free moment.\n. Just got back to this project, examined the code, and realized: the retina ipad requires the touchstart and touchend events specified:\n\nThis works on desktop browsers that understand HTML5, ipad 1, non-retina ipad 2 \n    item.on('mousedown',function(){ \n                        closealldrawers(drawerkey);  \n                        drawerOpen(drawerkey);  \n                    });           \n\nThis works on retina ipad:\n    item.on('mousedown touchstart',function(){ \n                        closealldrawers(drawerkey);  \n                        drawerOpen(drawerkey);  \n                    });           \n. Hi, thank you for your responses! I'll try to be more specific.\n\nI did see the issue with pixel ratio, and tried that change in several versions of kinetic.js, to no avail. The image of the red anesthesia cart loads, and the blue circle target is drawn. At that point,no amount of touching, tapping or whatever seems to affect anything on the screen. Normally, I would expect to be able to click any drawer handle on the cart and have that action trigger an animation where the corresponding drawer layer would smoothly move down from out-of-frame onto the middle of the stage, so you could see the objects in it. Clicking the drawer handle should also make the drawer handle highlight to show that it is active. Neither of those 2 things happen.\n\nYesterday, after reading a lot of possibly related messages, I removed all but one of the drawer layers from the game, and set its initial position to inside the stage boundaries. I also changed to kinetic.js v. 1.7.1 and adjusted the code so that pixelratio would always be \"1\". it worked exactly once, sort of: the animations were very very slow, as was the drag motion when I would drag one of the findable objects. I am not sure what I did to make it work, and what I did to make it no longer work. I will try to figure that out the instant I can.\n\nRegarding devices: I am using a brand new ipad  running  iOS 6, retina display, model MD510LL/A\nThe other devices that DO work with the game include Safari, Firefox, Chrome on various machines, and older non-retina iPads. \n\nI have put up a zip of the game here: \nhttp://thedesignspace.net/misc/treasurehuntHTML5.zip\nI'm sorry, I know you very much prefer a jsfiddle, but I have not yet had time to isolate the cause enough to do a minimal test without images.\n. Note that this is based in large part on your animals on the beach game, with the addition of the drawer animations and scoring - I noted that your animals game works fine on the ipad, so it should be possible to strip my game down to the point where it works on the ipad, which is what I intend to do soon as I have a free moment.\n. Just got back to this project, examined the code, and realized: the retina ipad requires the touchstart and touchend events specified:\n\nThis works on desktop browsers that understand HTML5, ipad 1, non-retina ipad 2 \n    item.on('mousedown',function(){ \n                        closealldrawers(drawerkey);  \n                        drawerOpen(drawerkey);  \n                    });           \n\nThis works on retina ipad:\n    item.on('mousedown touchstart',function(){ \n                        closealldrawers(drawerkey);  \n                        drawerOpen(drawerkey);  \n                    });           \n. ",
    "codepushr": "Actually I'm already working on a big project with Kinetic.js and using it's integrated dragging feature so I'm not exactly looking for another lib to merge it with :).\nBtw Greensock is DOM manipulation and not canvas, right?\n. Actually I'm already working on a big project with Kinetic.js and using it's integrated dragging feature so I'm not exactly looking for another lib to merge it with :).\nBtw Greensock is DOM manipulation and not canvas, right?\n. ",
    "chabou-san": "I think what fenixphp meant was that :\nlayer.clear() currently doesn't work since it's just calling 'this.getCanvas().clear()' instead of calling what you propose, that is 'this.getCanvas().getContext().clear()'.\n. I think what fenixphp meant was that :\nlayer.clear() currently doesn't work since it's just calling 'this.getCanvas().clear()' instead of calling what you propose, that is 'this.getCanvas().getContext().clear()'.\n. ",
    "viesti": "Hmm, so this could be related to the item in the roadmap for 4.7.3 https://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n\n```\nAlso, it is currently not possible to detect mouse events on shapes that are animating\n```\n\nBut funny thing is that in the above example, event handlers attached to the layer or stage don't also work.\n. Updated the issue description (mentioned that you should get a popup when clicking on the sprite).\n\nHmm, my Chrome (30.0.1599.47 beta) and Firefox (23.0.1) both don't show the popup when clicking on the sprite with version 4.7.\n. Hmm, so this could be related to the item in the roadmap for 4.7.3 https://github.com/ericdrowell/KineticJS/wiki/Release-Schedule\n\n```\nAlso, it is currently not possible to detect mouse events on shapes that are animating\n```\n\nBut funny thing is that in the above example, event handlers attached to the layer or stage don't also work.\n. Updated the issue description (mentioned that you should get a popup when clicking on the sprite).\n\nHmm, my Chrome (30.0.1599.47 beta) and Firefox (23.0.1) both don't show the popup when clicking on the sprite with version 4.7.\n. ",
    "Maxim-Chugaev": "I think I have another problem. http://stackoverflow.com/questions/15753373/improving-slow-canvas-animation-on-retina-ipad-kineticjs\n. In the example in jsfiddle really low performance in portrait mode, but i not think in landscape mode is good perfomance. Yes, perfomance in landscape mode is better, but not so better so i cant say that is good perfomance. Sorry my english language is bad. I hope you understand me.\n. I will be grateful to you if you help me to solve my problem. Now i use code from stackoverflow, but my program look blurred on retina ipad.\n. This is funny, but i solved the problem. Trouble not in framework, it in ipad problem. Gpu accelerated not work if canvas take more memory than the operating system allows. Canvas size must be not more 1023 \\* 768 pixels.\n. really is not a typo! it is very strangely, but it work. Maximum canvas size 1023 \\* 768!\n. I develop mobile application based on phonegap, and of course app support fullscreen mode.\n. I don't know what the problem is, but now performance on ipad with retina display is OK. I did not change Kinetic.pixelRatio, but just changed the size of the canvas. It helped me.\n. I think I have another problem. http://stackoverflow.com/questions/15753373/improving-slow-canvas-animation-on-retina-ipad-kineticjs\n. In the example in jsfiddle really low performance in portrait mode, but i not think in landscape mode is good perfomance. Yes, perfomance in landscape mode is better, but not so better so i cant say that is good perfomance. Sorry my english language is bad. I hope you understand me.\n. I will be grateful to you if you help me to solve my problem. Now i use code from stackoverflow, but my program look blurred on retina ipad.\n. This is funny, but i solved the problem. Trouble not in framework, it in ipad problem. Gpu accelerated not work if canvas take more memory than the operating system allows. Canvas size must be not more 1023 \\* 768 pixels.\n. really is not a typo! it is very strangely, but it work. Maximum canvas size 1023 \\* 768!\n. I develop mobile application based on phonegap, and of course app support fullscreen mode.\n. I don't know what the problem is, but now performance on ipad with retina display is OK. I did not change Kinetic.pixelRatio, but just changed the size of the canvas. It helped me.\n. ",
    "nmehlei": "is that a typo or do you really mean 1023 as horizontal resolution? As far as I know, the native resolution would be 1024 (and with retina twice that, but I guess not from our perspective because of automatic upscaling etc.)\n. strange indeed. Does mobile safari support complete fullscreen mode (as in w/o the header with current power level, clock, etc.) ? If yes, then this height limitation could suck ;)\n. It seems like it can be avoided with a library like https://github.com/JenniferSimonds/FontDetect, which can be used to delay the start of all graphical activities until all fonts are loaded, albeit in a sort of hacky style ;) would be awesome if kinetic could rerender automatically as soon as the font is available (like with css fonts) or at least warn if the font wasn't found during draw execution.\n. Are these just rumors or is it official that KineticJS is not supported anymore? Any word from the author?\n. Thanks for clearing that up. We use KineticJS quite successfully at the moment, so long-term support (changes due to Browser updates etc.) is quite important to us, but as you said, currently it is very stable.\n. Same for me, I decided between all the alternatives and chose KineticJS. As continued support and fast bugfixes (like KineticJS needed in the past due to Chrome bugs, if I remember correctly) are critical for us, we don't really have a choice than to plan migrating to a different library in the mid- or long-term.\n. is that a typo or do you really mean 1023 as horizontal resolution? As far as I know, the native resolution would be 1024 (and with retina twice that, but I guess not from our perspective because of automatic upscaling etc.)\n. strange indeed. Does mobile safari support complete fullscreen mode (as in w/o the header with current power level, clock, etc.) ? If yes, then this height limitation could suck ;)\n. It seems like it can be avoided with a library like https://github.com/JenniferSimonds/FontDetect, which can be used to delay the start of all graphical activities until all fonts are loaded, albeit in a sort of hacky style ;) would be awesome if kinetic could rerender automatically as soon as the font is available (like with css fonts) or at least warn if the font wasn't found during draw execution.\n. Are these just rumors or is it official that KineticJS is not supported anymore? Any word from the author?\n. Thanks for clearing that up. We use KineticJS quite successfully at the moment, so long-term support (changes due to Browser updates etc.) is quite important to us, but as you said, currently it is very stable.\n. Same for me, I decided between all the alternatives and chose KineticJS. As continued support and fast bugfixes (like KineticJS needed in the past due to Chrome bugs, if I remember correctly) are critical for us, we don't really have a choice than to plan migrating to a different library in the mid- or long-term.\n. ",
    "mpchadwick": "I am having a similar issue here. I have noticed it on both iOS 7.0.2 mobile safari and the iOS simulator on OS X 10.8.5 with KineticJS v4.7.2.\n\nVisit this link on your iPhone with iOS 7. `width` and `height` are being scaled proportionately, which works fine on most browsers. But in iOS 7 mobile safari the image gets squished. \n\nhttp://jsfiddle.net/Ju6YT/17/. \n\nIs this a bug with Safari on iOS 7? If so, are there any ideas for a workaround?\n. It seems that there is a known issue with mobile Safari vertically squashing images when they get past a certain threshold. It actually has nothing to do with scaling the image. The image will get squashed at even if it is not scaled.\n\nIt has been an issue since iOS6. It is mentioned in the following threads on Stack Overflow...\n\nhttp://stackoverflow.com/questions/11929099/html5-canvas-drawimage-ratio-bug-ios\nhttp://stackoverflow.com/questions/12554947/mobile-safari-renders-img-src-dataimage-jpegbase64-scaled-on-canvas/12615436#12615436\n\nThere was actually a library developed to deal with the issue (and an issue with image sub-sampling) here...\nhttps://github.com/stomita/ios-imagefile-megapixel\n\nI think it would be nice if KineticJS took care of this issue for you. @ericdrowell do you agree? If so I'd like to take a shot at building it in.\n. I know that many won't run into this issue. \n\nI am using KineticJS in a Phonegap app that allows users to add images to the canvas from their file system. The iPhone 5 camera takes photos at 2448 x 3264. This could also happen with mobile web apps that allow users to upload files from their iPhones and add them to the canvas.\n\nAlso, I don't think we will need the entire library. We should only need to run the image through the `detectVerticalSquash()` function, and then use the return value to fix any issue. See this answer to one of the Stack Overflow threads above...\n\nhttp://stackoverflow.com/a/17086329\n\nI'm thinking it might also make sense to only do this if the User Agent indicates iOS 6 or iOS7.\n. I'll aim to submit a pull request by the end of the weekend. Thanks! :smiley: \n. I've been thinking that this might actually make more sense as an option...\n\n```\nvar img = new Kinetic.Image({\n    fixIOSVerticalSquash: true\n})\n```\n\nThen we can take out the conditional logic and eliminate the processing overhead for users who don't need to worry about this. For those who do have the issue they'll be able to address it easily without having to integrate another library into their code.\n\n@ericdrowell - Your thoughts?\n\nIf you agree I can update this PR.\n. @ericdrowell Good point. I had the logic in `drawFunc()` where it would be executed multiple times.\n\nI have modified this PR so that the logic is executed only once in the `___init()` at which point height is modified accordingly, if necessary.\n\nIn addition to checking `Kinetic.UA.browser` (which returns 'webkit' on iOS rather than 'ios'), we also need to make sure that the image source is not an SVG and that it isn't cross origin as `detectVerticalSquash()` uses `ctx.getImageData()` and will raise a security exception in those instances.\n\nLet me know if anything else needs to modified here or if this is good to go. Thanks.\n. This issue can be solved by removing `this.restore();`, the last line in the `_clip()` function of Context.js\n\nThis fiddle references a build where that line has been commented out (http://mpchadwick.github.io/KineticJS/kinetic-make-shape-not-draggable-outside-clipping-mask.js)\n\nhttp://jsfiddle.net/mpchadwick/kJa3H/\n\nAll the tests still pass when the line is removed, so I'm not sure what it's doing other than making the shape draggable outside of the clipping area.\n\n@ericdrowell - Let me know your thoughts on this. Assuming `this.restore();` isn't doing something essential that I'm misunderstanding, I'd be happy to put together a pull request if you agree that shapes being draggable outside of their clipping mask is unexpected behavior (especially per the previous example mentioned above).\n. I should've said...\n\n> This issue _seems like it_ can be solved by removing `this.restore();`, the last line in the `_clip()` function of Context.js\n\nThe key words here are _seems like_. It turns out removing that line is causing other issues as I continue to develop my app.\n\nI would like to find a way to have the draggable's target node correctly selected, given the clipping paths that contain the shapes.\n\nWhile I know this would be possible, I'd hate to have to do something like...\n\n```\nstage.on('touchmove', function(event) {\n// Determine target node based on touch position\n// Re-implement drag method\n});\n```\n\n@ericdrowell  - Should I move this discussion over to stackoverflow, or do you think it's appropriate here? If you think it's appropriate here, could you offer any insight as to how this might be accomplished. \n. What operating system / version are you using? Can you post a jsfiddle or similar demonstrating the issue? How big is your canvas? This may be related to #430 \n. I am having a similar issue here. I have noticed it on both iOS 7.0.2 mobile safari and the iOS simulator on OS X 10.8.5 with KineticJS v4.7.2.\n\nVisit this link on your iPhone with iOS 7. `width` and `height` are being scaled proportionately, which works fine on most browsers. But in iOS 7 mobile safari the image gets squished. \n\nhttp://jsfiddle.net/Ju6YT/17/. \n\nIs this a bug with Safari on iOS 7? If so, are there any ideas for a workaround?\n. It seems that there is a known issue with mobile Safari vertically squashing images when they get past a certain threshold. It actually has nothing to do with scaling the image. The image will get squashed at even if it is not scaled.\n\nIt has been an issue since iOS6. It is mentioned in the following threads on Stack Overflow...\n\nhttp://stackoverflow.com/questions/11929099/html5-canvas-drawimage-ratio-bug-ios\nhttp://stackoverflow.com/questions/12554947/mobile-safari-renders-img-src-dataimage-jpegbase64-scaled-on-canvas/12615436#12615436\n\nThere was actually a library developed to deal with the issue (and an issue with image sub-sampling) here...\nhttps://github.com/stomita/ios-imagefile-megapixel\n\nI think it would be nice if KineticJS took care of this issue for you. @ericdrowell do you agree? If so I'd like to take a shot at building it in.\n. I know that many won't run into this issue. \n\nI am using KineticJS in a Phonegap app that allows users to add images to the canvas from their file system. The iPhone 5 camera takes photos at 2448 x 3264. This could also happen with mobile web apps that allow users to upload files from their iPhones and add them to the canvas.\n\nAlso, I don't think we will need the entire library. We should only need to run the image through the `detectVerticalSquash()` function, and then use the return value to fix any issue. See this answer to one of the Stack Overflow threads above...\n\nhttp://stackoverflow.com/a/17086329\n\nI'm thinking it might also make sense to only do this if the User Agent indicates iOS 6 or iOS7.\n. I'll aim to submit a pull request by the end of the weekend. Thanks! :smiley: \n. I've been thinking that this might actually make more sense as an option...\n\n```\nvar img = new Kinetic.Image({\n    fixIOSVerticalSquash: true\n})\n```\n\nThen we can take out the conditional logic and eliminate the processing overhead for users who don't need to worry about this. For those who do have the issue they'll be able to address it easily without having to integrate another library into their code.\n\n@ericdrowell - Your thoughts?\n\nIf you agree I can update this PR.\n. @ericdrowell Good point. I had the logic in `drawFunc()` where it would be executed multiple times.\n\nI have modified this PR so that the logic is executed only once in the `___init()` at which point height is modified accordingly, if necessary.\n\nIn addition to checking `Kinetic.UA.browser` (which returns 'webkit' on iOS rather than 'ios'), we also need to make sure that the image source is not an SVG and that it isn't cross origin as `detectVerticalSquash()` uses `ctx.getImageData()` and will raise a security exception in those instances.\n\nLet me know if anything else needs to modified here or if this is good to go. Thanks.\n. This issue can be solved by removing `this.restore();`, the last line in the `_clip()` function of Context.js\n\nThis fiddle references a build where that line has been commented out (http://mpchadwick.github.io/KineticJS/kinetic-make-shape-not-draggable-outside-clipping-mask.js)\n\nhttp://jsfiddle.net/mpchadwick/kJa3H/\n\nAll the tests still pass when the line is removed, so I'm not sure what it's doing other than making the shape draggable outside of the clipping area.\n\n@ericdrowell - Let me know your thoughts on this. Assuming `this.restore();` isn't doing something essential that I'm misunderstanding, I'd be happy to put together a pull request if you agree that shapes being draggable outside of their clipping mask is unexpected behavior (especially per the previous example mentioned above).\n. I should've said...\n\n> This issue _seems like it_ can be solved by removing `this.restore();`, the last line in the `_clip()` function of Context.js\n\nThe key words here are _seems like_. It turns out removing that line is causing other issues as I continue to develop my app.\n\nI would like to find a way to have the draggable's target node correctly selected, given the clipping paths that contain the shapes.\n\nWhile I know this would be possible, I'd hate to have to do something like...\n\n```\nstage.on('touchmove', function(event) {\n// Determine target node based on touch position\n// Re-implement drag method\n});\n```\n\n@ericdrowell  - Should I move this discussion over to stackoverflow, or do you think it's appropriate here? If you think it's appropriate here, could you offer any insight as to how this might be accomplished. \n. What operating system / version are you using? Can you post a jsfiddle or similar demonstrating the issue? How big is your canvas? This may be related to #430 \n. ",
    "NachoVarga": "I found that the proposed solution on stackoverflow only worked when you displayed the whole image, but not if you displayed only part of the image - in that case, the image got displaced. I edited the answer with a corrected version: \nhttp://stackoverflow.com/a/17086329/3195597\nYou might want to correct the implementation in Kinetic.js as well ... :-)\n. @ericdrowell: I discovered that this fix \n\n```\nctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh / vertSquashRatio);\n```\n\nis only working correctly when you display the whole image. As soon as you display only part of the image, there will be a displacement on the canvas.\n\nIf you fix it like this\n\n```\nctx.drawImage(img, sx * vertSquashRatio, sy * vertSquashRatio, \n                   sw * vertSquashRatio, sh * vertSquashRatio, \n                   dx, dy, dw, dh );\n```\n\nit will work in both cases. (I edited the comment on stackoverflow accordingly.)\n\nI am brand new to github and have no experiences with pull request, etc. Also, it seems the release date is approaching rapidly. So I just leave a comment here and hope there is still time to include it in the next release.\n. I found that the proposed solution on stackoverflow only worked when you displayed the whole image, but not if you displayed only part of the image - in that case, the image got displaced. I edited the answer with a corrected version: \nhttp://stackoverflow.com/a/17086329/3195597\nYou might want to correct the implementation in Kinetic.js as well ... :-)\n. @ericdrowell: I discovered that this fix \n\n```\nctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh / vertSquashRatio);\n```\n\nis only working correctly when you display the whole image. As soon as you display only part of the image, there will be a displacement on the canvas.\n\nIf you fix it like this\n\n```\nctx.drawImage(img, sx * vertSquashRatio, sy * vertSquashRatio, \n                   sw * vertSquashRatio, sh * vertSquashRatio, \n                   dx, dy, dw, dh );\n```\n\nit will work in both cases. (I edited the comment on stackoverflow accordingly.)\n\nI am brand new to github and have no experiences with pull request, etc. Also, it seems the release date is approaching rapidly. So I just leave a comment here and hope there is still time to include it in the next release.\n. ",
    "icaliman": "I am having this issue in Kinetic@5.1.0, on iPhone 3GS, iOS 6.1.6.\n. @lavrton I tested your fix. Big images are not drawn on stage on iPhone 3GS, iOS 6.1.6\n. I can not see the console from my iPhone but, I don't think there are errors. I am drawing many things on canvas but only big images are not visible. Small images are shown.\n. @lavrton  I just discovered http://jsconsole.com/ and debugged with it. There are no errors.\n. @lavrton on my iPhone `detectVerticalSquash` returns incorect vertical squash.\n. I am fixing this issue like so:\n\n``` javascript\nvar image = new Kinetic.Image({\n  image: imageObj\n});\n\nvar vertSquashRatio = detectVerticalSquash(imageObj);\nif (vertSquashRatio != 1) {\n  var h = image.height();\n  image.___height = image.height;\n  image.height = function() {\n    return arguments.length ? image.___height(arguments[0] / vertSquashRatio) : image.___height() * vertSquashRatio\n  }\n  image.height(h);\n}\n```\n\nbut `vertSquashRatio` seems to be incorrect, and the image is scaled incorrectly.\n@lavrton can you check my code?\n. I tried your fix but it does not work on my iPhone https://github.com/ericdrowell/KineticJS/pull/654#issuecomment-43608359\n\nValue of `vertSquashRatio` for some images is `0.5` and this is correct, but for others it is `0.375`.\n. Yes 0.375 is not correct. Images are taken by iPhone, they don't have transparent area.\n\nIt is another problem, I have images that was taken in landscape and portrait mode but all of them are drawn on canvas in landscape mode (why?). And here appears the problem: for images that was taken in portrait mode `vertSquashRatio` is `0.375`.\n. I am having this issue in Kinetic@5.1.0, on iPhone 3GS, iOS 6.1.6.\n. @lavrton I tested your fix. Big images are not drawn on stage on iPhone 3GS, iOS 6.1.6\n. I can not see the console from my iPhone but, I don't think there are errors. I am drawing many things on canvas but only big images are not visible. Small images are shown.\n. @lavrton  I just discovered http://jsconsole.com/ and debugged with it. There are no errors.\n. @lavrton on my iPhone `detectVerticalSquash` returns incorect vertical squash.\n. I am fixing this issue like so:\n\n``` javascript\nvar image = new Kinetic.Image({\n  image: imageObj\n});\n\nvar vertSquashRatio = detectVerticalSquash(imageObj);\nif (vertSquashRatio != 1) {\n  var h = image.height();\n  image.___height = image.height;\n  image.height = function() {\n    return arguments.length ? image.___height(arguments[0] / vertSquashRatio) : image.___height() * vertSquashRatio\n  }\n  image.height(h);\n}\n```\n\nbut `vertSquashRatio` seems to be incorrect, and the image is scaled incorrectly.\n@lavrton can you check my code?\n. I tried your fix but it does not work on my iPhone https://github.com/ericdrowell/KineticJS/pull/654#issuecomment-43608359\n\nValue of `vertSquashRatio` for some images is `0.5` and this is correct, but for others it is `0.375`.\n. Yes 0.375 is not correct. Images are taken by iPhone, they don't have transparent area.\n\nIt is another problem, I have images that was taken in landscape and portrait mode but all of them are drawn on canvas in landscape mode (why?). And here appears the problem: for images that was taken in portrait mode `vertSquashRatio` is `0.375`.\n. ",
    "jesiggar": "I have been using ios-imagefile-megapixel.js for a while to deal with this nasty bug, but with the latest versions of IOS (8), the images started to be vertically squashed again. I added an ugly fix to the library that seems to work well, but I'm wondering if Apple has in his roadmap some time to dedicate to fix this bug that is following us since IOS6.\n. I have been using ios-imagefile-megapixel.js for a while to deal with this nasty bug, but with the latest versions of IOS (8), the images started to be vertically squashed again. I added an ugly fix to the library that seems to work well, but I'm wondering if Apple has in his roadmap some time to dedicate to fix this bug that is following us since IOS6.\n. ",
    "applegrew": "![droidatscreen-105](https://f.cloud.github.com/assets/434574/1235029/90f78038-2997-11e3-82b0-a0ec06b27877.png)\n![droidatscreen-106](https://f.cloud.github.com/assets/434574/1235030/90fa66c2-2997-11e3-83a6-40cb52f54a0c.png)\n\nOn my device the animation is limited to these to phases only. From the small circle it jumps to the final stage and then back to small and keeps on shuttering like that for the duration of the animation.\n\nWhen I touch a wedge then the wedge is supposed to move radially out, but instead they again shutter as it did when the pie loaded.\n\nAt the end of the shuttering the final size of pie is sometimes the small one, and sometimes the big one.\n. BTW I am actually running a Cynogen 10.1 based Mod called Legacy Xperia.\n. ![droidatscreen-105](https://f.cloud.github.com/assets/434574/1235029/90f78038-2997-11e3-82b0-a0ec06b27877.png)\n![droidatscreen-106](https://f.cloud.github.com/assets/434574/1235030/90fa66c2-2997-11e3-83a6-40cb52f54a0c.png)\n\nOn my device the animation is limited to these to phases only. From the small circle it jumps to the final stage and then back to small and keeps on shuttering like that for the duration of the animation.\n\nWhen I touch a wedge then the wedge is supposed to move radially out, but instead they again shutter as it did when the pie loaded.\n\nAt the end of the shuttering the final size of pie is sometimes the small one, and sometimes the big one.\n. BTW I am actually running a Cynogen 10.1 based Mod called Legacy Xperia.\n. ",
    "gilst": "Hi!\n\nI am also trying to build somekind of calendar with KineticJS.\nIt's beginning to work pretty decent.\nI have about 20 objects on the canvas with fill stroke opacity and shadow.\nIn 4.7.0 (did not try 4.7.1) it all worked pretty fast.\n\nSince 4.7.2 i think its about 10 to 20 times slower.\nIn 4.7.0 it took a few seconds to render and since 4.7.2 its almost half a minute, and on top of that it all looks the same :)\nCould it be possible to look at it again or otherwise choose the new or the old rendering ?\n\nThanks for your time and for the great product you are making.\n. Hi, \nI think that's a great idea.\n\nIn my example i have a very small stroke line and very little shadow, just to add some small effect.\nIn this case you really can't see the difference, just the difference in performance.\nBut i can imagine for other examples it makes a huge difference.\n\nSo if it is an option that can fit your needs that will be great.\n. Hi!\n\nI am also trying to build somekind of calendar with KineticJS.\nIt's beginning to work pretty decent.\nI have about 20 objects on the canvas with fill stroke opacity and shadow.\nIn 4.7.0 (did not try 4.7.1) it all worked pretty fast.\n\nSince 4.7.2 i think its about 10 to 20 times slower.\nIn 4.7.0 it took a few seconds to render and since 4.7.2 its almost half a minute, and on top of that it all looks the same :)\nCould it be possible to look at it again or otherwise choose the new or the old rendering ?\n\nThanks for your time and for the great product you are making.\n. Hi, \nI think that's a great idea.\n\nIn my example i have a very small stroke line and very little shadow, just to add some small effect.\nIn this case you really can't see the difference, just the difference in performance.\nBut i can imagine for other examples it makes a huge difference.\n\nSo if it is an option that can fit your needs that will be great.\n. ",
    "jschro": "@ericdrowell did these options make it into the 4.7.3 release? If not, when can we expect to see these attributes added?\n. Thanks for the quick response! Keep up the great work.\n. @ericdrowell did these options make it into the 4.7.3 release? If not, when can we expect to see these attributes added?\n. Thanks for the quick response! Keep up the great work.\n. ",
    "TonyK1": "Why is it taking so long to get this issue fixed?  The config option promised for 4.7.3 is now scheduled for late June.\n. Is this a problem with Chrome or KineticJS?  The latest version of Chrome still has the problem, but if you use the non-Kinetic example, it does work in Chrome.\nUse http://www.html5canvastutorials.com/advanced/html5-canvas-shadow-offset-tutorial/\nThen add a stroke to mimic the Kinetic example. Shadow blurs OK.\nTake the Kinetic example and remove the stroke and the shadow also blurs OK. It looks it has something to do with adding a shadow to the stroke.\n. What happend to the option that you promised way back for 4.7.3 which would allow the original shadow functionality to be selected as we also have the problem with incredibly slow performance when using shadows on shapes that have fill and stroke (https://github.com/ericdrowell/KineticJS/issues/617)\n\nThis may \"technically\" be a bug with Chome, but Kinetic used to work up to version 4.6, so it was your changes to shadows that introduced the bugs to previously working Kinetic applications. The same thing happened to dashed line handling a while ago.\n. This is good. works very well apart from when you want to remove an event handler.\nCan you add a removeEventListener method to correspond to the addEventListener method?\n. What is it about groups that prevents them from working in a FastLayer?\n. Why is it taking so long to get this issue fixed?  The config option promised for 4.7.3 is now scheduled for late June.\n. Is this a problem with Chrome or KineticJS?  The latest version of Chrome still has the problem, but if you use the non-Kinetic example, it does work in Chrome.\nUse http://www.html5canvastutorials.com/advanced/html5-canvas-shadow-offset-tutorial/\nThen add a stroke to mimic the Kinetic example. Shadow blurs OK.\nTake the Kinetic example and remove the stroke and the shadow also blurs OK. It looks it has something to do with adding a shadow to the stroke.\n. What happend to the option that you promised way back for 4.7.3 which would allow the original shadow functionality to be selected as we also have the problem with incredibly slow performance when using shadows on shapes that have fill and stroke (https://github.com/ericdrowell/KineticJS/issues/617)\n\nThis may \"technically\" be a bug with Chome, but Kinetic used to work up to version 4.6, so it was your changes to shadows that introduced the bugs to previously working Kinetic applications. The same thing happened to dashed line handling a while ago.\n. This is good. works very well apart from when you want to remove an event handler.\nCan you add a removeEventListener method to correspond to the addEventListener method?\n. What is it about groups that prevents them from working in a FastLayer?\n. ",
    "bbsalsero": "hey!\nwhat about this lazy options?\n\ni do understand you whant to improve the code but, for a lot of people it was a regresion.\n\nso please could you do something?\n. hey!\nwhat about this lazy options?\n\ni do understand you whant to improve the code but, for a lot of people it was a regresion.\n\nso please could you do something?\n. ",
    "anandanand84": "yeah.. that fixed it.. thanks man.. closing this\n. Here is the plunkr..\n\nhttp://plnkr.co/edit/CMt7hvTsmqui65EtwT1Y?p=preview\n\nlet me know what needs to be changed\n. okay.. so the context that is being passed is the wrapped and the native context... I need to get the native context using _context...?\n. yeah.. that fixed it.. thanks man.. closing this\n. Here is the plunkr..\n\nhttp://plnkr.co/edit/CMt7hvTsmqui65EtwT1Y?p=preview\n\nlet me know what needs to be changed\n. okay.. so the context that is being passed is the wrapped and the native context... I need to get the native context using _context...?\n. ",
    "perchten": "Hey, any progress on this? Or workarounds?\n. Hey, any progress on this? Or workarounds?\n. ",
    "ChoodyNorris": "finally i know why this bug is happen. It's cause that wraping didn't erase white space. And if i ann simply space to end my string text will display normally. I think this is easy to rapair ;)\n. finally i know why this bug is happen. It's cause that wraping didn't erase white space. And if i ann simply space to end my string text will display normally. I think this is easy to rapair ;)\n. ",
    "pdille": "I'm unconvinced that this is a \"slim edge case\" because placing an object on the canvas with a mouse click seems like a fairly common use case. But more importantly, this was not problem in 4.7.0 (or any version prior to 4.7.1 for that matter). Here is a jsfiddle that places a rectangle on the canvas wherever you clicked. This first version uses v 4.7.0 and the second uses 4.7.1.\n\n4.7.0: http://jsfiddle.net/q5KWz/\n4.7.1: http://jsfiddle.net/q5KWz/1/\n\nYou'll see that in the first, no js error is thrown in the console when you click on the canvas. In the second link, you'll see that the following error is thrown:\n\nUncaught TypeError: Cannot read property '_id' of undefined --- line 7347\n\nLooking at the code (specifically in version 4.7.1 but 4.7.2 has the exact same problem), the issue is that 'this.clickStartShape' in the _mouseup function is undefined and you're trying to check a property on it. The reason it is undefined is because on line 7306 of _mousedown you set shape to undefined if no object was detected. Since we haven't created the shape yet, this will obviously be set to undefined. This wasn't a problem in 4.7.0 because rather than setting it to undefined if no shape was found, it was set to \"this\", which would be the stage itself. \n\nI'm not entirely sure why 'this' was changed to 'undefined' but either way, a simple fix would be to check that this.clickStartShape in _mouseup exists before actually checking a property on it.\n\nChange:\n\nif(Kinetic.listenClickTap && shape._id === this.clickStartShape._id)\n\nTo:\nif(Kinetic.listenClickTap && this.clickStartShape && shape._id === this.clickStartShape._id)\n\nThis works for me and no js errors are thrown when a shape is created on mousedown.\n\nAnd to answer you last question, kzhdev, I think the reason is because it depends upon when you mouseup during your mousemove. So one direction might be more likely than another to mouseup over the shape that was created. I'm not entirely sure, but I can indeed reproduce the behavior you're describing.\n. Bump. Is this going to make it into an upcoming release? I will admit I haven't tested with 4.7.4 but if it is fixed, clearing away bug reports is always good. :)\n. Awesome. Thanks, Eric!\n\nAnd looks like lots of good things in store for 5.0.0. Looking forward to it all and best of luck!\n. I'm unconvinced that this is a \"slim edge case\" because placing an object on the canvas with a mouse click seems like a fairly common use case. But more importantly, this was not problem in 4.7.0 (or any version prior to 4.7.1 for that matter). Here is a jsfiddle that places a rectangle on the canvas wherever you clicked. This first version uses v 4.7.0 and the second uses 4.7.1.\n\n4.7.0: http://jsfiddle.net/q5KWz/\n4.7.1: http://jsfiddle.net/q5KWz/1/\n\nYou'll see that in the first, no js error is thrown in the console when you click on the canvas. In the second link, you'll see that the following error is thrown:\n\nUncaught TypeError: Cannot read property '_id' of undefined --- line 7347\n\nLooking at the code (specifically in version 4.7.1 but 4.7.2 has the exact same problem), the issue is that 'this.clickStartShape' in the _mouseup function is undefined and you're trying to check a property on it. The reason it is undefined is because on line 7306 of _mousedown you set shape to undefined if no object was detected. Since we haven't created the shape yet, this will obviously be set to undefined. This wasn't a problem in 4.7.0 because rather than setting it to undefined if no shape was found, it was set to \"this\", which would be the stage itself. \n\nI'm not entirely sure why 'this' was changed to 'undefined' but either way, a simple fix would be to check that this.clickStartShape in _mouseup exists before actually checking a property on it.\n\nChange:\n\nif(Kinetic.listenClickTap && shape._id === this.clickStartShape._id)\n\nTo:\nif(Kinetic.listenClickTap && this.clickStartShape && shape._id === this.clickStartShape._id)\n\nThis works for me and no js errors are thrown when a shape is created on mousedown.\n\nAnd to answer you last question, kzhdev, I think the reason is because it depends upon when you mouseup during your mousemove. So one direction might be more likely than another to mouseup over the shape that was created. I'm not entirely sure, but I can indeed reproduce the behavior you're describing.\n. Bump. Is this going to make it into an upcoming release? I will admit I haven't tested with 4.7.4 but if it is fixed, clearing away bug reports is always good. :)\n. Awesome. Thanks, Eric!\n\nAnd looks like lots of good things in store for 5.0.0. Looking forward to it all and best of luck!\n. ",
    "ivmartel": "Hi. Would it be worth applying this fix to the `_touchend` method too? [Stage.js#L571](https://github.com/ericdrowell/KineticJS/blob/master/src/Stage.js#L571) could become:\n\n`if(Kinetic.listenClickTap && this.tapStartShape && shape._id === this.tapStartShape._id) {`\n\nOn the other side, it's because I had the error that I added `listening: false` to my shapes...\n. Hi, I have a similar issue (slow rendering) on Android but with Firefox (Fennec), Chrome behaves well. I tried @lavrton's tips but without noticeable speed-ups. Do you know anything about this?\n. Hi. Would it be worth applying this fix to the `_touchend` method too? [Stage.js#L571](https://github.com/ericdrowell/KineticJS/blob/master/src/Stage.js#L571) could become:\n\n`if(Kinetic.listenClickTap && this.tapStartShape && shape._id === this.tapStartShape._id) {`\n\nOn the other side, it's because I had the error that I added `listening: false` to my shapes...\n. Hi, I have a similar issue (slow rendering) on Android but with Firefox (Fennec), Chrome behaves well. I tried @lavrton's tips but without noticeable speed-ups. Do you know anything about this?\n. ",
    "kofifus": "Looking at Kinetic code, creating a new filter issues this.filterCanvas = new Kinetic.SceneCanvas, so I assume the memory is taken when this new canvas is not released.\n\nI managed to solve this also with issuing clearFilter() before removeChildren(). But adding this to destroyChildren() is much better, thanks!\n. that would be great, thank you!\n. this can be useful for line drawing with the mouse on an empty layer for example, dragstart marks the first point and dragmoves mark the other end of the line\n. ericdrowell & jfollas, I would be grateful if you can look at my question at http://stackoverflow.com/questions/19354602/kineticjs-drawing-shapes-with-drag-drop \nwhich is what I'm really trying to achieve and what prompted this question.\n\nThank you!\n. I'm sorry jfollas, I don't because I don't know how to solve this. If you can direct me to a solution I'll be happy to create one.\n\nHere http://stackoverflow.com/questions/12311535/kineticjs-drawing-lines-with-mouse you can see a solution that works but is relying on the stage mousedown/mousemove/mouseup, as I wrote I am trying to see if it's possible to solve this with the new shape's (in this case line) own dragmove/dragend \n\nthanks!\n. I actually found hammerjs to be buggy and caused me endless headache (seems I'm def not the only one). \n\nI ended up writing my own function, supporting touchstart, touchmove, touchend, touchpinchstart, touchpinchmove, touchpinchend, touchholdstart, touchholdmove, touchholdend.\n\nIt will also also adding positioning data to the event (offset0, offset1, distance, center). Below is the code and a pich to zoom example ... hope this helps:\n\n```\n// registerGestures simplifies handling touch gestures for kineticjs stages (or any element)\n// adds support for touchholdstart, touchholdmove, touchholdend\n// adds offset0, offset1, distance & center to the event object where relevant\n//     elem - use kineticStage.getContent()\n//     callbacks - dictionary of callback functions, keys can be touchstart, touchmove, touchend, touchpinchstart, touchpinchmove, touchpinchend, touchholdstart, touchholdmove, touchholdend\n//     recieverArg - optional reciever for the callbacks \nfunction registerGestures(elem, callbacks, recieverArg) {\n    var reciever = recieverArg || window,\n        touchduration = 1000;\n\n    $.data(elem, 'gestureData', {\n        longTouchTimer: null,\n        touchPinchOn: false,\n        touchHoldOn: false,\n        touchstartpos: null,\n        lastTouchMoveTouches: null\n    });\n\n    function calcTouchEventData(touches) {\n        var res = {};\n        if (touches[0]) res.offset0 = makePos(touches[0].pageX - $(touches[0].target).offset().left, touches[0].pageY - $(touches[0].target).offset().top);\n        if (touches[1]) res.offset1 = makePos(touches[1].pageX - $(touches[1].target).offset().left, touches[1].pageY - $(touches[1].target).offset().top);\n        if (touches[0] && touches[1]) {\n            res.distance = Math.sqrt(Math.pow((res.offset1.x - res.offset0.x), 2) + Math.pow((res.offset1.y - res.offset0.y), 2));\n            res.center = makePos(Math.abs((res.offset0.x + res.offset1.x) / 2), Math.abs((res.offset0.y + res.offset1.y) / 2));\n        }\n        return res;\n    }\n\n    function clearTimer() {\n        var timer = $.data(elem, 'gestureData').longTouchTimer;\n        if (timer) clearTimeout(timer);\n        timer = null;\n    }\n\n    elem.addEventListener('touchstart', function(e) {\n        e.preventDefault();\n        $.extend(e, calcTouchEventData(e.touches));\n        clearTimer();\n        var data = $.data(elem, 'gestureData');\n        data.touchstartpos = e.offset0;\n\n        if (e.touches[0] && e.touches[1]) {\n            data.touchPinchOn = true;\n            data.touchHoldOn = false;\n            if (callbacks.touchpinchstart) callbacks.touchpinchstart.call(reciever, e);\n\n        } else {\n\n            if (callbacks.touchholdstart || callbacks.touchholdmove || callbacks.touchholdend) {\n                data.longTouchTimer = setTimeout(function() {\n                    clearTimer();\n                    data.touchPinchOn = false;\n                    data.touchHoldOn = true;\n                    if (callbacks.touchholdstart) callbacks.touchholdstart.call(reciever, e);\n                }, touchduration);\n            }\n\n            if (callbacks.touchstart) callbacks.touchstart.call(reciever, e);\n        }\n    });\n\n    elem.addEventListener('touchmove', function(e) {\n        e.preventDefault(); // prevent iPAD panning\n        $.extend(e, calcTouchEventData(e.touches));\n        var data = $.data(elem, 'gestureData');\n        // if we got a move in the same location of start before the timeout run out ignore it (as we may still get a hold)\n        if (data.longTouchTimer && data.touchstartpos.x === e.offset0.x && data.touchstartpos.y === e.offset0.y) return;\n        clearTimer();\n\n        if (e.touches[0] && e.touches[1]) {\n            if (callbacks.touchpinchmove) callbacks.touchpinchmove.call(reciever, e);\n        } else if (data.touchHoldOn) {\n            if (callbacks.touchholdmove) callbacks.touchholdmove.call(reciever, e);\n        } else {\n            if (callbacks.touchmove) callbacks.touchmove.call(reciever, e);\n        }\n\n        data.lastTouchMoveTouches = e.touches;\n    });\n\n    elem.addEventListener('touchend', function(e) {\n        e.preventDefault();\n        clearTimer();\n        var data = $.data(elem, 'gestureData');\n        // for some reason touchend has an empty touches array so using lastTouchMoveTouches\n        $.extend(e, calcTouchEventData(data.lastTouchMoveTouches));\n\n        if (data.touchPinchOn) {\n            if (callbacks.touchpinchend) callbacks.touchpinchend.call(reciever, e);\n        } else if (data.touchHoldOn) {\n            if (callbacks.touchholdend) callbacks.touchholdend.call(reciever, e);\n        } else {\n            if (callbacks.touchend) callbacks.touchend.call(reciever, e);\n        }\n        data.touchHoldOn = false;\n        data.touchPinchOn = false;\n    });\n}\n```\n\nHere is sample usage to show using pinch to zoom around center:\n\n```\nvar pinchLastDist, pinchStartCenter;\n\nregisterGestures(kineticStage.getContent(), {\n    touchpinchmove: function(e) {\n        if (!pinchLastDist) pinchLastDist = e.distance;\n        if (!pinchStartCenter) pinchStartCenter = e.center;\n        var newscale = kineticLayer.getScale().x * e.distance / pinchLastDist;\n        pinchLastDist = e.distance;\n        zoom(newscale, pinchStartCenter);\n    },\n    touchpinchend: function(e) {\n        pinchLastDist = pinchStartCenter = 0;\n    },\n    touchholdstart: function(e) {\n        console.log('touchholdstart');\n    },\n    touchholdmove: function(e) {\n        console.log('touchholdmove');\n    },\n});\n\n\nfunction zoom(scaleTo, center) { // zoom around center\n    var mx = center.x - kineticLayer.getX(),\n        my = center.y - kineticLayer.getY();\n\nvar zoomOrigin = kineticLayer.getOffset(),\n                oldscale = kineticLayer.getScaleX();\n            zoomOrigin = makePos(mx / oldscale + zoomOrigin.x - mx / newscale, my / oldscale + zoomOrigin.y - my / newscale);\n\n    kineticLayer.offset(makePos(zoomOrigin.x, zoomOrigin.y));\n\n    kineticLayer.scale({\n        x: scaleTo,\n        y: scaleTo\n    });\n    kineticStage.draw();\n}\n```\n. After tracing through the code I managed to get this to work by adding the two lines:\n        Kinetic.Util.extend(Kinetic.Shape, Kinetic.Node);\n    Kinetic.Util.extend(Kinetic.Image, Kinetic.Shape);\nAfter the line \n       Kinetic.Factory.addGetterSetter(Kinetic.Node, 'myFilterVal', 0, null, Kinetic.Factory.afterSetFilter);\n\nHowever I don't know if this is the right/safe solution ?\n. thanks Eric that works. Would be good to get a more full solution/documented solution to adding filters.\n\nI also realized I have to call image.cache(); before changing my parameter or the filter is not called, which is not intuitive.\n\nThank you\n. Also, it seems the structure of the line points array that getPoints returns has changed in v5 ??\nwhat used to be [ { x: x1, y: y1 }, { x: x2, y: y2 }] is now [x1, y1, x2, y2] ??\n\nI can't find this in the changelog and it breaks a big part of my code :(\n. Thanks Moeriki\n. Thx Lavrton ! yes I am aware of solutions by catching keydown on the document level and passing it down to the stage but they are hackish  and do not scale well once you have a big project with lots of events/stages ... I am looking to contain the keydown event handler in the stage code as I tried above.\n. Great thx! so canvas.focus(); is essential for this to work. However in my situation I have more than one stages/layers, does that mean I have to focus the canvas on mouse over etc ?\n. ok. I just realized your solution doesn't work on firefox :( does focus works differently there ? I don't see the blue frame \n. Ok great, thx a lot, I also posted the answer to http://stackoverflow.com/a/23003139/460084\n. Looking at Kinetic code, creating a new filter issues this.filterCanvas = new Kinetic.SceneCanvas, so I assume the memory is taken when this new canvas is not released.\n\nI managed to solve this also with issuing clearFilter() before removeChildren(). But adding this to destroyChildren() is much better, thanks!\n. that would be great, thank you!\n. this can be useful for line drawing with the mouse on an empty layer for example, dragstart marks the first point and dragmoves mark the other end of the line\n. ericdrowell & jfollas, I would be grateful if you can look at my question at http://stackoverflow.com/questions/19354602/kineticjs-drawing-shapes-with-drag-drop \nwhich is what I'm really trying to achieve and what prompted this question.\n\nThank you!\n. I'm sorry jfollas, I don't because I don't know how to solve this. If you can direct me to a solution I'll be happy to create one.\n\nHere http://stackoverflow.com/questions/12311535/kineticjs-drawing-lines-with-mouse you can see a solution that works but is relying on the stage mousedown/mousemove/mouseup, as I wrote I am trying to see if it's possible to solve this with the new shape's (in this case line) own dragmove/dragend \n\nthanks!\n. I actually found hammerjs to be buggy and caused me endless headache (seems I'm def not the only one). \n\nI ended up writing my own function, supporting touchstart, touchmove, touchend, touchpinchstart, touchpinchmove, touchpinchend, touchholdstart, touchholdmove, touchholdend.\n\nIt will also also adding positioning data to the event (offset0, offset1, distance, center). Below is the code and a pich to zoom example ... hope this helps:\n\n```\n// registerGestures simplifies handling touch gestures for kineticjs stages (or any element)\n// adds support for touchholdstart, touchholdmove, touchholdend\n// adds offset0, offset1, distance & center to the event object where relevant\n//     elem - use kineticStage.getContent()\n//     callbacks - dictionary of callback functions, keys can be touchstart, touchmove, touchend, touchpinchstart, touchpinchmove, touchpinchend, touchholdstart, touchholdmove, touchholdend\n//     recieverArg - optional reciever for the callbacks \nfunction registerGestures(elem, callbacks, recieverArg) {\n    var reciever = recieverArg || window,\n        touchduration = 1000;\n\n    $.data(elem, 'gestureData', {\n        longTouchTimer: null,\n        touchPinchOn: false,\n        touchHoldOn: false,\n        touchstartpos: null,\n        lastTouchMoveTouches: null\n    });\n\n    function calcTouchEventData(touches) {\n        var res = {};\n        if (touches[0]) res.offset0 = makePos(touches[0].pageX - $(touches[0].target).offset().left, touches[0].pageY - $(touches[0].target).offset().top);\n        if (touches[1]) res.offset1 = makePos(touches[1].pageX - $(touches[1].target).offset().left, touches[1].pageY - $(touches[1].target).offset().top);\n        if (touches[0] && touches[1]) {\n            res.distance = Math.sqrt(Math.pow((res.offset1.x - res.offset0.x), 2) + Math.pow((res.offset1.y - res.offset0.y), 2));\n            res.center = makePos(Math.abs((res.offset0.x + res.offset1.x) / 2), Math.abs((res.offset0.y + res.offset1.y) / 2));\n        }\n        return res;\n    }\n\n    function clearTimer() {\n        var timer = $.data(elem, 'gestureData').longTouchTimer;\n        if (timer) clearTimeout(timer);\n        timer = null;\n    }\n\n    elem.addEventListener('touchstart', function(e) {\n        e.preventDefault();\n        $.extend(e, calcTouchEventData(e.touches));\n        clearTimer();\n        var data = $.data(elem, 'gestureData');\n        data.touchstartpos = e.offset0;\n\n        if (e.touches[0] && e.touches[1]) {\n            data.touchPinchOn = true;\n            data.touchHoldOn = false;\n            if (callbacks.touchpinchstart) callbacks.touchpinchstart.call(reciever, e);\n\n        } else {\n\n            if (callbacks.touchholdstart || callbacks.touchholdmove || callbacks.touchholdend) {\n                data.longTouchTimer = setTimeout(function() {\n                    clearTimer();\n                    data.touchPinchOn = false;\n                    data.touchHoldOn = true;\n                    if (callbacks.touchholdstart) callbacks.touchholdstart.call(reciever, e);\n                }, touchduration);\n            }\n\n            if (callbacks.touchstart) callbacks.touchstart.call(reciever, e);\n        }\n    });\n\n    elem.addEventListener('touchmove', function(e) {\n        e.preventDefault(); // prevent iPAD panning\n        $.extend(e, calcTouchEventData(e.touches));\n        var data = $.data(elem, 'gestureData');\n        // if we got a move in the same location of start before the timeout run out ignore it (as we may still get a hold)\n        if (data.longTouchTimer && data.touchstartpos.x === e.offset0.x && data.touchstartpos.y === e.offset0.y) return;\n        clearTimer();\n\n        if (e.touches[0] && e.touches[1]) {\n            if (callbacks.touchpinchmove) callbacks.touchpinchmove.call(reciever, e);\n        } else if (data.touchHoldOn) {\n            if (callbacks.touchholdmove) callbacks.touchholdmove.call(reciever, e);\n        } else {\n            if (callbacks.touchmove) callbacks.touchmove.call(reciever, e);\n        }\n\n        data.lastTouchMoveTouches = e.touches;\n    });\n\n    elem.addEventListener('touchend', function(e) {\n        e.preventDefault();\n        clearTimer();\n        var data = $.data(elem, 'gestureData');\n        // for some reason touchend has an empty touches array so using lastTouchMoveTouches\n        $.extend(e, calcTouchEventData(data.lastTouchMoveTouches));\n\n        if (data.touchPinchOn) {\n            if (callbacks.touchpinchend) callbacks.touchpinchend.call(reciever, e);\n        } else if (data.touchHoldOn) {\n            if (callbacks.touchholdend) callbacks.touchholdend.call(reciever, e);\n        } else {\n            if (callbacks.touchend) callbacks.touchend.call(reciever, e);\n        }\n        data.touchHoldOn = false;\n        data.touchPinchOn = false;\n    });\n}\n```\n\nHere is sample usage to show using pinch to zoom around center:\n\n```\nvar pinchLastDist, pinchStartCenter;\n\nregisterGestures(kineticStage.getContent(), {\n    touchpinchmove: function(e) {\n        if (!pinchLastDist) pinchLastDist = e.distance;\n        if (!pinchStartCenter) pinchStartCenter = e.center;\n        var newscale = kineticLayer.getScale().x * e.distance / pinchLastDist;\n        pinchLastDist = e.distance;\n        zoom(newscale, pinchStartCenter);\n    },\n    touchpinchend: function(e) {\n        pinchLastDist = pinchStartCenter = 0;\n    },\n    touchholdstart: function(e) {\n        console.log('touchholdstart');\n    },\n    touchholdmove: function(e) {\n        console.log('touchholdmove');\n    },\n});\n\n\nfunction zoom(scaleTo, center) { // zoom around center\n    var mx = center.x - kineticLayer.getX(),\n        my = center.y - kineticLayer.getY();\n\nvar zoomOrigin = kineticLayer.getOffset(),\n                oldscale = kineticLayer.getScaleX();\n            zoomOrigin = makePos(mx / oldscale + zoomOrigin.x - mx / newscale, my / oldscale + zoomOrigin.y - my / newscale);\n\n    kineticLayer.offset(makePos(zoomOrigin.x, zoomOrigin.y));\n\n    kineticLayer.scale({\n        x: scaleTo,\n        y: scaleTo\n    });\n    kineticStage.draw();\n}\n```\n. After tracing through the code I managed to get this to work by adding the two lines:\n        Kinetic.Util.extend(Kinetic.Shape, Kinetic.Node);\n    Kinetic.Util.extend(Kinetic.Image, Kinetic.Shape);\nAfter the line \n       Kinetic.Factory.addGetterSetter(Kinetic.Node, 'myFilterVal', 0, null, Kinetic.Factory.afterSetFilter);\n\nHowever I don't know if this is the right/safe solution ?\n. thanks Eric that works. Would be good to get a more full solution/documented solution to adding filters.\n\nI also realized I have to call image.cache(); before changing my parameter or the filter is not called, which is not intuitive.\n\nThank you\n. Also, it seems the structure of the line points array that getPoints returns has changed in v5 ??\nwhat used to be [ { x: x1, y: y1 }, { x: x2, y: y2 }] is now [x1, y1, x2, y2] ??\n\nI can't find this in the changelog and it breaks a big part of my code :(\n. Thanks Moeriki\n. Thx Lavrton ! yes I am aware of solutions by catching keydown on the document level and passing it down to the stage but they are hackish  and do not scale well once you have a big project with lots of events/stages ... I am looking to contain the keydown event handler in the stage code as I tried above.\n. Great thx! so canvas.focus(); is essential for this to work. However in my situation I have more than one stages/layers, does that mean I have to focus the canvas on mouse over etc ?\n. ok. I just realized your solution doesn't work on firefox :( does focus works differently there ? I don't see the blue frame \n. Ok great, thx a lot, I also posted the answer to http://stackoverflow.com/a/23003139/460084\n. ",
    "lukaszpy": "For me too. \nEverything works in 4.7.1 but not in 4.7.2\n. For me too. \nEverything works in 4.7.1 but not in 4.7.2\n. ",
    "adyster": "Cool, that did the trick. Thanks for that!\n. Cool, that did the trick. Thanks for that!\n. ",
    "orlandov": "I suspect, after some git bisecting and running a little test, that it's been broken since this commit: a8cbc2321dbeb78c1894105f40c70b485866fec4\n. Interestingly, I noticed that if I view the the object with opacity on an Apple (30\", I think) cinema display it behaves as I would expect. However, when I use the built in MBP retina sreen, the strange scaling/positioning problem occurs.\n. Hey! Just wanted to mention that I've also noticed this behaviour (and filed #646 for it). However in my case it only happened on Chrome on my Macbook Pro, but not on Safari on the same machine, or the same version of Chrome on Windows.\n. I suspect, after some git bisecting and running a little test, that it's been broken since this commit: a8cbc2321dbeb78c1894105f40c70b485866fec4\n. Interestingly, I noticed that if I view the the object with opacity on an Apple (30\", I think) cinema display it behaves as I would expect. However, when I use the built in MBP retina sreen, the strange scaling/positioning problem occurs.\n. Hey! Just wanted to mention that I've also noticed this behaviour (and filed #646 for it). However in my case it only happened on Chrome on my Macbook Pro, but not on Safari on the same machine, or the same version of Chrome on Windows.\n. ",
    "HaitoBe": "This problem is not resolved in version 4.7.4.\n. This problem is not resolved in version 4.7.4.\n. ",
    "madjake": "New to kineticJS but it looks getTransform is just providing you with a decoupled object describing that shapes position.  Using the `move` method directly on the object works:\n\n```\ndocument.getElementById('btn1').addEventListener('click', function() {\n        rect1.move(50, 50);\n        layer.draw();\n    }, false\n);\n```\n. New to kineticJS but it looks getTransform is just providing you with a decoupled object describing that shapes position.  Using the `move` method directly on the object works:\n\n```\ndocument.getElementById('btn1').addEventListener('click', function() {\n        rect1.move(50, 50);\n        layer.draw();\n    }, false\n);\n```\n. ",
    "eventlistener": "But what if I need to manipulate the transform object? For example, this is the only way to apply custom transformation matrix in Kinetic.\n. But what if I need to manipulate the transform object? For example, this is the only way to apply custom transformation matrix in Kinetic.\n. ",
    "FabrizioM": "I encountered the same issue, but only with Firefox (i'm on ver. 24.0). No problem with Safari and Chrome.\n. I encountered the same issue, but only with Firefox (i'm on ver. 24.0). No problem with Safari and Chrome.\n. ",
    "chechedotmx": "Confirming, it happens only on Firefox, I also have ver. 24.0, No problem with Safari, Chrome and Internet Explorer 9 & 10\n. Confirming, it happens only on Firefox, I also have ver. 24.0, No problem with Safari, Chrome and Internet Explorer 9 & 10\n. ",
    "alexandredees": "Hey all. I had the same problem and noticed the shift (due to an opacity lower to 1) seems to be proportional with the devicePixelRatio...\n. Hey all. I had the same problem and noticed the shift (due to an opacity lower to 1) seems to be proportional with the devicePixelRatio...\n. ",
    "mjhasbach": "Previously, I was having the same issue with RequireJS. I tried the latest [kinetic.min.js](https://github.com/ericdrowell/KineticJS/blob/d8a429ac8560add4da79b3f23dceb3e6c5eac9f7/kinetic.min.js), and the problem appears to be resolved.\n. Actually, this has [already been fixed](https://github.com/ericdrowell/KineticJS/commit/9c2347fcaab3f35a19e8774c7beecb25708b25b3).\n. Previously, I was having the same issue with RequireJS. I tried the latest [kinetic.min.js](https://github.com/ericdrowell/KineticJS/blob/d8a429ac8560add4da79b3f23dceb3e6c5eac9f7/kinetic.min.js), and the problem appears to be resolved.\n. Actually, this has [already been fixed](https://github.com/ericdrowell/KineticJS/commit/9c2347fcaab3f35a19e8774c7beecb25708b25b3).\n. ",
    "franAlbatera": "Hi ericdrowell,\n\nAny idea when kinetics is finally updated?? I need it!! Regards!!\n. Hi ericdrowell,\n\nAny idea when kinetics is finally updated?? I need it!! Regards!!\n. ",
    "drvic10k": "Thanks for the comment, I modified the pull according to your suggestions.\n. Damn, you are right, I forgot to set the `className` of my custom class.\n\nSorry for wasting your time. :(\n. Thanks for the comment, I modified the pull according to your suggestions.\n. Damn, you are right, I forgot to set the `className` of my custom class.\n\nSorry for wasting your time. :(\n. ",
    "blabno": "How about this?\n\n```\n toObject: function() {\n            var type = Kinetic.Util,\n                obj = {},\n                attrs = this.getAttrs(),\n                key, val;\n\n            obj.attrs = {};\n\n            // serialize only attributes that are not function, image, DOM, or objects with methods\n            for(key in attrs) {\n                val = attrs[key];\n                if(!type._isFunction(val) && !type._isElement(val) && !(type._isObject(val) && type._hasMethods(val))) {\n                    var getter = this[GET + Kinetic.Util._capitalize(key)];\n                    var defaultValue = null == getter ? null : getter.call({attrs: {}});\n                    if (defaultValue != val) {\n                        obj.attrs[key] = val;\n                    }\n                }\n            }\n```\n\nConstruct getter based on key, then invoke getter on some blank object. That will return default value.\n. How about this?\n\n```\n toObject: function() {\n            var type = Kinetic.Util,\n                obj = {},\n                attrs = this.getAttrs(),\n                key, val;\n\n            obj.attrs = {};\n\n            // serialize only attributes that are not function, image, DOM, or objects with methods\n            for(key in attrs) {\n                val = attrs[key];\n                if(!type._isFunction(val) && !type._isElement(val) && !(type._isObject(val) && type._hasMethods(val))) {\n                    var getter = this[GET + Kinetic.Util._capitalize(key)];\n                    var defaultValue = null == getter ? null : getter.call({attrs: {}});\n                    if (defaultValue != val) {\n                        obj.attrs[key] = val;\n                    }\n                }\n            }\n```\n\nConstruct getter based on key, then invoke getter on some blank object. That will return default value.\n. ",
    "abuelezz": "I use it as below:\nblob is my sprite object \n\n```\n      blob.on('indexChange', function(evt) {\n        var oldVal = evt.oldVal;\n        var newVal = evt.newVal;\n});\n```\n\nnot working, what I missed?\n. I use it as below:\nblob is my sprite object \n\n```\n      blob.on('indexChange', function(evt) {\n        var oldVal = evt.oldVal;\n        var newVal = evt.newVal;\n});\n```\n\nnot working, what I missed?\n. ",
    "codeboyInGitHub": "Kinetic.Topology = Kinetic.Class.extend\n. Kinetic.Topology = Kinetic.Class.extend\n. ",
    "sanielfishawy": "Yup. Thanks. That is exactly what I did.\n\nSani\n\nOn Sat, Nov 2, 2013 at 12:48 PM, Eric Rowell notifications@github.comwrote:\n\n> cool app!\n> \n> Currently I do not intend to support the capturing phase. Your use case\n> could be easily handled by listening for an event on a Kinetic Node, and\n> then attaching an event handler that traverses the children and does\n> something with each, like this:\n> \n> node.getChildren().each(function(child) {\n> // do something with each child, or traverse downwards further\n> });\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/671#issuecomment-27630863\n> .\n\n## \n\nSani El-Fishawy\nelfishawy.sani@gmail.com\n650-245-3537\n. Yup. Thanks. That is exactly what I did.\n\nSani\n\nOn Sat, Nov 2, 2013 at 12:48 PM, Eric Rowell notifications@github.comwrote:\n\n> cool app!\n> \n> Currently I do not intend to support the capturing phase. Your use case\n> could be easily handled by listening for an event on a Kinetic Node, and\n> then attaching an event handler that traverses the children and does\n> something with each, like this:\n> \n> node.getChildren().each(function(child) {\n> // do something with each child, or traverse downwards further\n> });\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/671#issuecomment-27630863\n> .\n\n## \n\nSani El-Fishawy\nelfishawy.sani@gmail.com\n650-245-3537\n. ",
    "jmas": "We have updated our app to KineticJS 4.7.3 and now only two events is working: touchstart, touchmove.\n\nI have next code for testing:\n\n``` javascript\nimage.on('mouseover mousemove mouseout mouseenter mouseleave mousedown mouseup click dblclick touchstart touchmove touchend tap dbltap dragstart dragmove dragend contentMouseover contentMousemove contentMouseout contentMousedown contentMouseup contentClick contentDblclick contentTouchstart contentTouchmove contentTouchend contentTap contentDblTap', function(event) {\n    console.log(event.type);\n});\n```\n. Any information about this issue?\n. For version 4.7.2 when we have tap with two fingers on draggable object - KineticJS do not dragging object.\nBut in version 4.7.4 when we have tap with two fingers on object - KeneticJS provide dragging object, but have bug with \"jumping\" object from first position to second.\n. Do you need more information about this bug? I can capture video for displaying it.\n. Bump this bug.\n. We have updated our app to KineticJS 4.7.3 and now only two events is working: touchstart, touchmove.\n\nI have next code for testing:\n\n``` javascript\nimage.on('mouseover mousemove mouseout mouseenter mouseleave mousedown mouseup click dblclick touchstart touchmove touchend tap dbltap dragstart dragmove dragend contentMouseover contentMousemove contentMouseout contentMousedown contentMouseup contentClick contentDblclick contentTouchstart contentTouchmove contentTouchend contentTap contentDblTap', function(event) {\n    console.log(event.type);\n});\n```\n. Any information about this issue?\n. For version 4.7.2 when we have tap with two fingers on draggable object - KineticJS do not dragging object.\nBut in version 4.7.4 when we have tap with two fingers on object - KeneticJS provide dragging object, but have bug with \"jumping\" object from first position to second.\n. Do you need more information about this bug? I can capture video for displaying it.\n. Bump this bug.\n. ",
    "pizapadmin": "Thanks Eric, you rock! :-)\n. Thanks Eric, you rock! :-)\n. ",
    "Moeriki": "I'm still learning Git/Github still so you can ignore the other changes.\n\nI will create branches and make smaller pull requests at points where I'd like to improve the code.\n. You are missing something.\n- First undefined: circle isn't in group, but in layer\n- Second undefined: you didn't add the group to the layer.\n. A Line is defined by its points array. It wouldn't make sense for it to have a size.\n\nThat being said, it is possible. But you'll have to do it manually. Although in most cases it probably won't make much sense to do so.\n. Checking the code, it seems to be intentionally.\n\n``` javascript\n            if (closedPath) {\n                context.fillStrokeShape(this);\n            }\n            else {\n                context.strokeShape(this);\n            }\n```\n\nYou can do a checkout, modify src/plugins/Path.js:86 and change it to always do a fill:\n\n``` javascript\n            context.fillStrokeShape(this);\n```\n. I don't agree with this choice.\n\nYou can set fillEnabled to false in your application logic when deemed necessary. Like it is now, there is no way to have a fill on an open shape.\n\nAlso conveying to the SVG logic, a fill should work on an open path.\nhttp://jsfiddle.net/XxCa5/1/\n. Third that. I don't get the change really.\n. It's true that Pixi is insanely fast. But if I'm correct those libs default to WebGL rendering, which is faster than Canvas whatsoever.\n. That could be fun.\n\nThis would be a good starting point.\nhttps://github.com/Moeriki/KineticJS/compare/fx-custom-events-layer\n\nThere is a whole bunch of logic in the events layer of Kinetic (regarding DD, performance optimisation, etc\u2026) that is surpassed by doing this. It's hard to tell at this point how feasible your wish is. Yet I'd like to try this too.\n\nThere is a point _true multi touch_ on the roadmap under pending. But that may be still far off.\n. This is in the changelog.\n\n```\nall multi-dimensional inputs and outputs must be object literals for performance reasons. i.e. shape.setScale(1) will no longer work. You need to use shape.setScale({x: 1, y: 1});\n```\n\nAs for the setter:\n\n``` javascript\nshape.setOffset( { x: 0, y: 0 } );\n```\n\nis exactly the same as\n\n``` javascript\nshape.offset( { x: 0, y: 0 } );\n```\n\nWhere the latter is the new shorter unified getter/setter. If you pass an argument it's a setter, otherwise it's a getter.\n- You seem to be correct about absolutePosition. ~~I'm not sure why that is. I'll create a pull request in case it was just forgotten.~~ Actually it makes sense, as there is no setter for an absolute position. You'll have to do with just the getter.\n. Grunt can easily use the _.jshintrc_ with these settings.\n\n``` javascript\n    jshint: {\n      jshintrc: '.jshintrc',\n      all: ['src/{,*/}*.js']\n    },\n```\n. I'm still learning Git/Github still so you can ignore the other changes.\n\nI will create branches and make smaller pull requests at points where I'd like to improve the code.\n. You are missing something.\n- First undefined: circle isn't in group, but in layer\n- Second undefined: you didn't add the group to the layer.\n. A Line is defined by its points array. It wouldn't make sense for it to have a size.\n\nThat being said, it is possible. But you'll have to do it manually. Although in most cases it probably won't make much sense to do so.\n. Checking the code, it seems to be intentionally.\n\n``` javascript\n            if (closedPath) {\n                context.fillStrokeShape(this);\n            }\n            else {\n                context.strokeShape(this);\n            }\n```\n\nYou can do a checkout, modify src/plugins/Path.js:86 and change it to always do a fill:\n\n``` javascript\n            context.fillStrokeShape(this);\n```\n. I don't agree with this choice.\n\nYou can set fillEnabled to false in your application logic when deemed necessary. Like it is now, there is no way to have a fill on an open shape.\n\nAlso conveying to the SVG logic, a fill should work on an open path.\nhttp://jsfiddle.net/XxCa5/1/\n. Third that. I don't get the change really.\n. It's true that Pixi is insanely fast. But if I'm correct those libs default to WebGL rendering, which is faster than Canvas whatsoever.\n. That could be fun.\n\nThis would be a good starting point.\nhttps://github.com/Moeriki/KineticJS/compare/fx-custom-events-layer\n\nThere is a whole bunch of logic in the events layer of Kinetic (regarding DD, performance optimisation, etc\u2026) that is surpassed by doing this. It's hard to tell at this point how feasible your wish is. Yet I'd like to try this too.\n\nThere is a point _true multi touch_ on the roadmap under pending. But that may be still far off.\n. This is in the changelog.\n\n```\nall multi-dimensional inputs and outputs must be object literals for performance reasons. i.e. shape.setScale(1) will no longer work. You need to use shape.setScale({x: 1, y: 1});\n```\n\nAs for the setter:\n\n``` javascript\nshape.setOffset( { x: 0, y: 0 } );\n```\n\nis exactly the same as\n\n``` javascript\nshape.offset( { x: 0, y: 0 } );\n```\n\nWhere the latter is the new shorter unified getter/setter. If you pass an argument it's a setter, otherwise it's a getter.\n- You seem to be correct about absolutePosition. ~~I'm not sure why that is. I'll create a pull request in case it was just forgotten.~~ Actually it makes sense, as there is no setter for an absolute position. You'll have to do with just the getter.\n. Grunt can easily use the _.jshintrc_ with these settings.\n\n``` javascript\n    jshint: {\n      jshintrc: '.jshintrc',\n      all: ['src/{,*/}*.js']\n    },\n```\n. ",
    "shorttermproject": "Have you added a workaround for this issue?\n. Have you added a workaround for this issue?\n. ",
    "SirHenry": "Is the \"lazily render shadows\" option available in 5.0.1?\n\ngrz\nhenry\n. Is the \"lazily render shadows\" option available in 5.0.1?\n\ngrz\nhenry\n. ",
    "kidino": "I am not into canvas web app yet. But I have been considering this. And one of my requirement is it has to be able to render HTML in Canvas. Having this inside KineticJS makes it much more awesome because it'll be easy for manipulation. Thanks!\n. I am not into canvas web app yet. But I have been considering this. And one of my requirement is it has to be able to render HTML in Canvas. Having this inside KineticJS makes it much more awesome because it'll be easy for manipulation. Thanks!\n. ",
    "WolfspiritM": "It's only visible after a few times.\n\nHere you can see a demo:\nhttp://wolfspirit.eu/imagetest2/demo.html\nJust click on the Demo button and wait. It'll do \"toimage\" for the white fur,\nthen replace the white fur with the new image.\nDoing that the number of times you define on the right. (default 100)\nAfter a while you'll notice black pixels like here:\n![qualityissue](https://f.cloud.github.com/assets/5904171/1511556/470947e0-4ab2-11e3-9a09-b86d3834d789.png)\n\nAnd here you can see it in action:\nhttp://wolfspirit.eu/imagetest2/\n(Click on Add Layer -> \"Black Fur\",\n      then Add Layer -> \"Husky Markings,\n      afterwards click on the left site on \"White Fur\" to make it blue/active\n      then draw at the right side on the image for a few times)\n. It's only visible after a few times.\n\nHere you can see a demo:\nhttp://wolfspirit.eu/imagetest2/demo.html\nJust click on the Demo button and wait. It'll do \"toimage\" for the white fur,\nthen replace the white fur with the new image.\nDoing that the number of times you define on the right. (default 100)\nAfter a while you'll notice black pixels like here:\n![qualityissue](https://f.cloud.github.com/assets/5904171/1511556/470947e0-4ab2-11e3-9a09-b86d3834d789.png)\n\nAnd here you can see it in action:\nhttp://wolfspirit.eu/imagetest2/\n(Click on Add Layer -> \"Black Fur\",\n      then Add Layer -> \"Husky Markings,\n      afterwards click on the left site on \"White Fur\" to make it blue/active\n      then draw at the right side on the image for a few times)\n. ",
    "sunraymax": "it also happens on kinetic.animation...\n. it also happens on kinetic.animation...\n. ",
    "maggiolino6v": "Sorry, maybe this is a duplicate of issue #640 fixed by Moeriki:\nhttps://github.com/ericdrowell/KineticJS/issues/640#ref-commit-0829d73\n. Sorry, maybe this is a duplicate of issue #640 fixed by Moeriki:\nhttps://github.com/ericdrowell/KineticJS/issues/640#ref-commit-0829d73\n. ",
    "CyranX": "There seems to be a problem with stroke offset when strokeScaleEnabled:false is set and setScale is used. I've just tried drawing a rectangle in the middle of canvas layer and made it drag-able, when i moved it to the top left corner of the canvas, stroke started moving in in another direction like it was mirrored diagonally.\n. I haven't dabbled much but problem seems to happen after applying this.setTransform(1, 0, 0, 1, 0, 0); at line 1976. No clue what changed in latest chrome build but seems it affects all versions (stable, beta, dev and canary) from 31.0.1650.57 (14th Nov. edition and up). Weird thing is that works perfect in other browsers\n. They seem to have fixed this particular issue in their latest canary build and hopefully it will propagate to normal version soon enough. Thanks for this wonderful framework @ericdrowell :) \n\n@andynemzek : https://code.google.com/p/chromium/issues/detail?id=319541#c6\n. There seems to be a problem with stroke offset when strokeScaleEnabled:false is set and setScale is used. I've just tried drawing a rectangle in the middle of canvas layer and made it drag-able, when i moved it to the top left corner of the canvas, stroke started moving in in another direction like it was mirrored diagonally.\n. I haven't dabbled much but problem seems to happen after applying this.setTransform(1, 0, 0, 1, 0, 0); at line 1976. No clue what changed in latest chrome build but seems it affects all versions (stable, beta, dev and canary) from 31.0.1650.57 (14th Nov. edition and up). Weird thing is that works perfect in other browsers\n. They seem to have fixed this particular issue in their latest canary build and hopefully it will propagate to normal version soon enough. Thanks for this wonderful framework @ericdrowell :) \n\n@andynemzek : https://code.google.com/p/chromium/issues/detail?id=319541#c6\n. ",
    "andynemzek": "I ran into this problem as well.  My app relies on drawing lines that need to stay the same width while scaling...I just about died when the chrome update happened...ha!\n\nHere's what I've observed.  I can verify that the issue appears to be at line 1976 as stated above.  An easy way to reproduce the issue: just go to the kineticjs tutorial here and add the strokeScaleEnabled to the rectangle.  Toggle it between true and false to see the results.\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-rect-tutorial/\n\nIn chrome, setting the value to false now causes the stroke to disappear.  At first I was convinced that this was purely a chrome bug, however, it looks like FF behaves strangely too.  If you do the above in FF, the stroke will stick around, but its width will vary even when scale=1...weird!  \n\nHope this helps.  I'm going to try to work around it by dividing my default line widths by the current scale and using that as the current line width.\n. This chrome bug _may_ be related to this...looks like it was just fixed.\nhttps://code.google.com/p/chromium/issues/detail?id=319541#c6\n. I ran into this problem as well.  My app relies on drawing lines that need to stay the same width while scaling...I just about died when the chrome update happened...ha!\n\nHere's what I've observed.  I can verify that the issue appears to be at line 1976 as stated above.  An easy way to reproduce the issue: just go to the kineticjs tutorial here and add the strokeScaleEnabled to the rectangle.  Toggle it between true and false to see the results.\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-rect-tutorial/\n\nIn chrome, setting the value to false now causes the stroke to disappear.  At first I was convinced that this was purely a chrome bug, however, it looks like FF behaves strangely too.  If you do the above in FF, the stroke will stick around, but its width will vary even when scale=1...weird!  \n\nHope this helps.  I'm going to try to work around it by dividing my default line widths by the current scale and using that as the current line width.\n. This chrome bug _may_ be related to this...looks like it was just fixed.\nhttps://code.google.com/p/chromium/issues/detail?id=319541#c6\n. ",
    "Almenit": "Enable/disable shadow is not working after a node is added to the layer. \n. No I didn't. I'm new here so I missunderstood \"close & comment\"\n. I wrapped the code in the _mousemove function  in kineticjs with the if statement mention above. It solved my problems with Chrome.\n\n``` javascript\n_mousemove: function (evt) {\n            if (!((typeof evt.webkitMovementX != 'undefined' || typeof evt.webkitMovementY != 'undefined') && evt.webkitMovementY === 0 && evt.webkitMovementX === 0)) {\n                this._setPointerPosition(evt);\n                var dd = Kinetic.DD,\n                    shape = this.getIntersection(this.getPointerPosition());\n```\n. Enable/disable shadow is not working after a node is added to the layer. \n. No I didn't. I'm new here so I missunderstood \"close & comment\"\n. I wrapped the code in the _mousemove function  in kineticjs with the if statement mention above. It solved my problems with Chrome.\n\n``` javascript\n_mousemove: function (evt) {\n            if (!((typeof evt.webkitMovementX != 'undefined' || typeof evt.webkitMovementY != 'undefined') && evt.webkitMovementY === 0 && evt.webkitMovementX === 0)) {\n                this._setPointerPosition(evt);\n                var dd = Kinetic.DD,\n                    shape = this.getIntersection(this.getPointerPosition());\n```\n. ",
    "darkv": "Same here, I have set up a jsfiddle where you can see the problem: http://jsfiddle.net/4DevZ/\n. Same here, I have set up a jsfiddle where you can see the problem: http://jsfiddle.net/4DevZ/\n. ",
    "gchumillas": "That's true. I couldn't reproduce the error. But it was there yesterday :)\n. That's true. I couldn't reproduce the error. But it was there yesterday :)\n. ",
    "Leise": "I had that problem just a couple of days ago.\nI had both a text and a polygon, and opacity didn't seem to affect them if they had shadow on them.\nI solved it by setting both simpleText.setOpacity(0); and simpleText.setShadowOpacity(0); when needed.\nI don't use Tweens so not sure that it fixes completely your problem, but it's worth a try.\n. I had that problem just a couple of days ago.\nI had both a text and a polygon, and opacity didn't seem to affect them if they had shadow on them.\nI solved it by setting both simpleText.setOpacity(0); and simpleText.setShadowOpacity(0); when needed.\nI don't use Tweens so not sure that it fixes completely your problem, but it's worth a try.\n. ",
    "Gromerlin": "Ok, thank you for this, it works and also with tweens.\nI add property shadowOpacity: 1 when creating an instance of Kinetic.Text()\n. It seems to be a browser problem. In FireFox 26 all colors stay black on my system. In Chrome all is ok.\n. Ok, thank you for this, it works and also with tweens.\nI add property shadowOpacity: 1 when creating an instance of Kinetic.Text()\n. It seems to be a browser problem. In FireFox 26 all colors stay black on my system. In Chrome all is ok.\n. ",
    "AlvinPLeung": "This \nTo get around this problem, set strokeScaleEnabled:true and strokeWidth: 5 / scale.\n. I expect the two objects with same scale factor on the same layer to retain their relative position.\n\nAlvin  \n\nOn Apr 8, 2014, at 6:25 PM, Anton Lavrenov notifications@github.com wrote:\n\n> What is not correct? What are you expecting?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n.    Just need to multiply x and y position of the circle by the scale factor, then the position of the two objects will line up.  At this moment, the line object behave like the entire layer is scaled.  Only radius of the circle object is scaled.  \n\nAlvin\n\nOn Apr 8, 2014, at 7:09 PM, jfollas notifications@github.com wrote:\n\n> You can adjust the offset. I think what you're going for is this:\n> \n> http://jsfiddle.net/eL2rr/2/\n> \n> On Tue, Apr 8, 2014 at 6:35 PM, AlvinPLeung notifications@github.comwrote:\n> \n> > The x, y of a circle is not scaled correctly.\n> > http://jsfiddle.net/eL2rr/\n> > \n> > ## \n> > \n> > Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/886\n> > .\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub.\n. Sorry.  I thought layer and group inherit container they should behave the\nsame.  Please close the ticket.\n\nAlvin\n\nOn Wed, Apr 9, 2014 at 5:54 AM, Andrew Ippoliti notifications@github.comwrote:\n\n> Is this what you want? http://jsfiddle.net/eL2rr/1/\n> I set the x and y to the same value for each object. Then I needed to\n> adjust the points so instead of being absolute on the canvas they were\n> relative to the x, y of the line.\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/886#issuecomment-39960032\n> .\n. I use it for a microchip company internal project.\n.    My corporate internal app requires similar capability for Anton's mind\nmap app.  Rich event model is a must.  Bitmap text with memory leak is a no\ngo.   I need the browser to stay healthy.  It does not make sense to force\nmy users to quit their browsers after using my web app.\n\nAlvin\n\nOn Fri, Jan 9, 2015 at 9:06 AM, dave-ledsign notifications@github.com\nwrote:\n\n> Bitmap text would not work for me. I need vectors so users can play in\n> real-time with fill color, transparency and gradients, stroke width and\n> color, shadows, etc. I am fine with converting fonts to vectors, but after\n> that I need what Kinetic is currently doing for me. Can anyone comment on\n> PixiJS vectors, or is it 100% raster at this time?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/ericdrowell/KineticJS/issues/1052#issuecomment-69364462\n> .\n. This \nTo get around this problem, set strokeScaleEnabled:true and strokeWidth: 5 / scale.\n. I expect the two objects with same scale factor on the same layer to retain their relative position.\n\nAlvin  \n\nOn Apr 8, 2014, at 6:25 PM, Anton Lavrenov notifications@github.com wrote:\n\n> What is not correct? What are you expecting?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n.    Just need to multiply x and y position of the circle by the scale factor, then the position of the two objects will line up.  At this moment, the line object behave like the entire layer is scaled.  Only radius of the circle object is scaled.  \n\nAlvin\n\nOn Apr 8, 2014, at 7:09 PM, jfollas notifications@github.com wrote:\n\n> You can adjust the offset. I think what you're going for is this:\n> \n> http://jsfiddle.net/eL2rr/2/\n> \n> On Tue, Apr 8, 2014 at 6:35 PM, AlvinPLeung notifications@github.comwrote:\n> \n> > The x, y of a circle is not scaled correctly.\n> > http://jsfiddle.net/eL2rr/\n> > \n> > ## \n> > \n> > Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/886\n> > .\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub.\n. Sorry.  I thought layer and group inherit container they should behave the\nsame.  Please close the ticket.\n\nAlvin\n\nOn Wed, Apr 9, 2014 at 5:54 AM, Andrew Ippoliti notifications@github.comwrote:\n\n> Is this what you want? http://jsfiddle.net/eL2rr/1/\n> I set the x and y to the same value for each object. Then I needed to\n> adjust the points so instead of being absolute on the canvas they were\n> relative to the x, y of the line.\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/886#issuecomment-39960032\n> .\n. I use it for a microchip company internal project.\n.    My corporate internal app requires similar capability for Anton's mind\nmap app.  Rich event model is a must.  Bitmap text with memory leak is a no\ngo.   I need the browser to stay healthy.  It does not make sense to force\nmy users to quit their browsers after using my web app.\n\nAlvin\n\nOn Fri, Jan 9, 2015 at 9:06 AM, dave-ledsign notifications@github.com\nwrote:\n\n> Bitmap text would not work for me. I need vectors so users can play in\n> real-time with fill color, transparency and gradients, stroke width and\n> color, shadows, etc. I am fine with converting fonts to vectors, but after\n> that I need what Kinetic is currently doing for me. Can anyone comment on\n> PixiJS vectors, or is it 100% raster at this time?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/ericdrowell/KineticJS/issues/1052#issuecomment-69364462\n> .\n. ",
    "ylazarov": "Something like this http://fabricjs.com/test/misc/itext.html\n. This is not a solution because I want to manipulate objects under the mask.\n. Something like this http://fabricjs.com/test/misc/itext.html\n. This is not a solution because I want to manipulate objects under the mask.\n. ",
    "rmorse": "Hey @lavrton & @ippo615 just a heads up on a bug with this...\n\nI tried to use the pixelate function for ages from a regular download package (maybe from your website) but could not get it to work - it was being shown as v 5.1.0.\n\nDownloading from github and the unit tests I was able to figure out that there is a different version of kinetic js being bundled here but also being reported as v 5.1.0.\n\nBasically, the version of kinetic here on github works properly with the pixelate filter but from your website it does not work... but they are reported as being the exact same version.\n\nThe version that does not work has 14534 lines of code and the one here that does work has 14529 lines of code :)\n\nThanks for the great library & resource!\n. Hey @lavrton & @ippo615 just a heads up on a bug with this...\n\nI tried to use the pixelate function for ages from a regular download package (maybe from your website) but could not get it to work - it was being shown as v 5.1.0.\n\nDownloading from github and the unit tests I was able to figure out that there is a different version of kinetic js being bundled here but also being reported as v 5.1.0.\n\nBasically, the version of kinetic here on github works properly with the pixelate filter but from your website it does not work... but they are reported as being the exact same version.\n\nThe version that does not work has 14534 lines of code and the one here that does work has 14529 lines of code :)\n\nThanks for the great library & resource!\n. ",
    "zwatermelon": "Thank you for your reply , In the beginning , I want to sava  layer  picture use the method \" layer.toDataURL() \", but there is no success . As if there is no this method .  so  I  backup the stage data use the stage.clone()  , then remove zhe needless layer  , use the method  \"stage.toDataURL()\" to sava my needed layer picture . In the end I get the  above problems . I'm very confused now, do not know how to do. There are other ways  to  sava the layer  picture? looking forward to your reply,thank you very much. \n. Thank you for your reply , In the beginning , I want to sava  layer  picture use the method \" layer.toDataURL() \", but there is no success . As if there is no this method .  so  I  backup the stage data use the stage.clone()  , then remove zhe needless layer  , use the method  \"stage.toDataURL()\" to sava my needed layer picture . In the end I get the  above problems . I'm very confused now, do not know how to do. There are other ways  to  sava the layer  picture? looking forward to your reply,thank you very much. \n. ",
    "nodecode": "I have just created an example that illustrates the problem:\nhttp://nodecode.de/files/kineticjs.html\n\nThe right image consists of a green and a red rectangle.\nThe green rectangle has an opacity of 100%.\nThe green rectangle has an opacity of 90%.\nIn the green rectangle, the event does not work.\n. Resolved in 5.0.0\n. I have the same problem. I my case, I am developing a browser game with KineticJS in which it is important that <code>dragBoundFunc</code> is only called when an object was actually moved. \n\nAlthough I could also take a detour via \"drag move\" and realize my own <code>dragBoundFunc</code>-alternative, but this would mean a lot of effort for me. It would be great if this bug will be fixed in the next version of KineticJS.\n\n@lavrton If there are also uses for relative behavior, then there should be an option for this. Currently behaves <code>dragDistance</code> not relative to <code>dragBoundFunc</code>.\n. I have just created an example that illustrates the problem:\nhttp://nodecode.de/files/kineticjs.html\n\nThe right image consists of a green and a red rectangle.\nThe green rectangle has an opacity of 100%.\nThe green rectangle has an opacity of 90%.\nIn the green rectangle, the event does not work.\n. Resolved in 5.0.0\n. I have the same problem. I my case, I am developing a browser game with KineticJS in which it is important that <code>dragBoundFunc</code> is only called when an object was actually moved. \n\nAlthough I could also take a detour via \"drag move\" and realize my own <code>dragBoundFunc</code>-alternative, but this would mean a lot of effort for me. It would be great if this bug will be fixed in the next version of KineticJS.\n\n@lavrton If there are also uses for relative behavior, then there should be an option for this. Currently behaves <code>dragDistance</code> not relative to <code>dragBoundFunc</code>.\n. ",
    "theicfire": "In response to \"the main culprit is probably the way that Kinetic 4.7.4 handles shadows and opacity. The newer technique creates higher quality shadows and correct opacity behaviors, at the expense of a perf drop. In v4.8.0, you'll be able to choose high quality shadows and opacity, or lower quality with better performance.\n\nDoes your app use a lot of opacity and shadows?\"\n\n# \n\nAh interesting. I was hoping to have a single opacity value per shape\n(either semi-transparent or opaque), and 500-1000 points moving at a\nreasonable frame rate on a slower computer. What do you mean by better\nquality? 3.6.2 seems to do fine with _context.fillStyle =\n'rgba(255,0,0,.1)';_\n\nI need to get this done before Christmas; I think I might just use the\ncurrent version for now and just let it be slow until an update comes. Or\nmaybe you could direct me to the bit and I could try and hack it up myself\n:)\n\nThanks Eric!\n\nOn Thu, Nov 28, 2013 at 10:15 PM, Eric Rowell notifications@github.comwrote:\n\n> the main culprit is probably the way that Kinetic 4.7.4 handles shadows\n> and opacity. The newer technique creates higher quality shadows and correct\n> opacity behaviors, at the expense of a perf drop. In v4.8.0, you'll be able\n> to choose high quality shadows and opacity, or lower quality with better\n> performance.\n> \n> Does your app use a lot of opacity and shadows?\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/711#issuecomment-29493856\n> .\n. Whew! Awesome write up! I'm trying out the _context stuff and I can't find the perf improvements you're talking about. See http://codepen.io/theicfire/pen/Ibkew\n\nSide note - uncomment \"//_context.fillStyle = 'red';\" and you'll see the fps plummet. I think this is due to Kinetic? I can't see the same problem with normal canvas.\n\nThanks for all the ass kicking!\n. Right; that makes sense. I've also been able to get a good mix between the\ntwo - I've turned off listening for animations, and turn it back on when\nI've \"paused the animation\". Glad to hear about 5.0!!\n\nOn Sat, Nov 30, 2013 at 5:39 PM, Eric Rowell notifications@github.comwrote:\n\n> uncommenting context.fillStyle just means that the html5 canvas context is\n> doing more work because it's setting the fill style over and over (which is\n> needed if you want colored rectangles) This isn't a side effect of\n> KineticJS, it's just plain old canvas.\n> \n> for now, the easiest way to get a perf boost is to set listening=false on\n> each shape.\n> \n> P.S. this ticket has inspired me to release v5.0.0. I'm currently working\n> on addressing each of the issues mentioned in our discussion.\n> \n> Stay tuned\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/711#issuecomment-29562719\n> .\n. :D \n. Took me awhile to get back to this but I've gone ahead and put v5 in:\nhttp://chasediscs.com/gists/kinect/v5-kinetic.html\n\nIt's much faster (50ish fps), but not faster than 3.6.2. (57ish fps). My guess is it's due to a more powerful position() and events, as you mentioned above.\n\nMy changes were:\nturn off hitGraphEnabled\ntransformsEnabled('position')\n\nBut going back to your points above:\n1 and 2 are fixed from these two changes\n3 is probably still a problem (I didn't change anything with events)\n4 might be fixed by v5, as the setPosition api has now changed to position\n5 has been changed to use drawFunc.\n\nThanks for the great update!! \n. Yep; did that. Thanks! Hopefully this will be useful to others till then.\n. In response to \"the main culprit is probably the way that Kinetic 4.7.4 handles shadows and opacity. The newer technique creates higher quality shadows and correct opacity behaviors, at the expense of a perf drop. In v4.8.0, you'll be able to choose high quality shadows and opacity, or lower quality with better performance.\n\nDoes your app use a lot of opacity and shadows?\"\n\n# \n\nAh interesting. I was hoping to have a single opacity value per shape\n(either semi-transparent or opaque), and 500-1000 points moving at a\nreasonable frame rate on a slower computer. What do you mean by better\nquality? 3.6.2 seems to do fine with _context.fillStyle =\n'rgba(255,0,0,.1)';_\n\nI need to get this done before Christmas; I think I might just use the\ncurrent version for now and just let it be slow until an update comes. Or\nmaybe you could direct me to the bit and I could try and hack it up myself\n:)\n\nThanks Eric!\n\nOn Thu, Nov 28, 2013 at 10:15 PM, Eric Rowell notifications@github.comwrote:\n\n> the main culprit is probably the way that Kinetic 4.7.4 handles shadows\n> and opacity. The newer technique creates higher quality shadows and correct\n> opacity behaviors, at the expense of a perf drop. In v4.8.0, you'll be able\n> to choose high quality shadows and opacity, or lower quality with better\n> performance.\n> \n> Does your app use a lot of opacity and shadows?\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/711#issuecomment-29493856\n> .\n. Whew! Awesome write up! I'm trying out the _context stuff and I can't find the perf improvements you're talking about. See http://codepen.io/theicfire/pen/Ibkew\n\nSide note - uncomment \"//_context.fillStyle = 'red';\" and you'll see the fps plummet. I think this is due to Kinetic? I can't see the same problem with normal canvas.\n\nThanks for all the ass kicking!\n. Right; that makes sense. I've also been able to get a good mix between the\ntwo - I've turned off listening for animations, and turn it back on when\nI've \"paused the animation\". Glad to hear about 5.0!!\n\nOn Sat, Nov 30, 2013 at 5:39 PM, Eric Rowell notifications@github.comwrote:\n\n> uncommenting context.fillStyle just means that the html5 canvas context is\n> doing more work because it's setting the fill style over and over (which is\n> needed if you want colored rectangles) This isn't a side effect of\n> KineticJS, it's just plain old canvas.\n> \n> for now, the easiest way to get a perf boost is to set listening=false on\n> each shape.\n> \n> P.S. this ticket has inspired me to release v5.0.0. I'm currently working\n> on addressing each of the issues mentioned in our discussion.\n> \n> Stay tuned\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/711#issuecomment-29562719\n> .\n. :D \n. Took me awhile to get back to this but I've gone ahead and put v5 in:\nhttp://chasediscs.com/gists/kinect/v5-kinetic.html\n\nIt's much faster (50ish fps), but not faster than 3.6.2. (57ish fps). My guess is it's due to a more powerful position() and events, as you mentioned above.\n\nMy changes were:\nturn off hitGraphEnabled\ntransformsEnabled('position')\n\nBut going back to your points above:\n1 and 2 are fixed from these two changes\n3 is probably still a problem (I didn't change anything with events)\n4 might be fixed by v5, as the setPosition api has now changed to position\n5 has been changed to use drawFunc.\n\nThanks for the great update!! \n. Yep; did that. Thanks! Hopefully this will be useful to others till then.\n. ",
    "lnut101": "I got Kinetic running on a single canvas like this:\n\n``` javascript\nKinetic.SceneCanvas.prototype.init = function(config) {\n    var conf = config || {};\n\n    this.pixelRatio = 1;\n    this._canvas = config.useRealCanvas ? Kinetic.Util.useRealCanvasElement() : Kinetic.Util.createCanvasElement();\n\n    // set inline styles\n    this._canvas.style.padding = 0;\n    this._canvas.style.margin = 0;\n    this._canvas.style.border = 0;\n    this._canvas.style.background = 'transparent';\n    this._canvas.style.position = 'absolute';\n    this._canvas.style.top = 0;\n    this._canvas.style.left = 0;\n};\n\nvar canvas = null;\n\nKinetic.Util.useRealCanvasElement = function() {\n    if (!canvas) canvas = document.getElementById('#realcanvas');\n    // on some environments canvas.style is readonly\n    try {\n        canvas.style = canvas.style || {};\n    } catch (e) {\n    }\n    return canvas;\n};\n\nKinetic.Layer.prototype.____init = function (config) {\n    this.nodeType = 'Layer';\n    this.canvas = new Kinetic.SceneCanvas({useRealCanvas: true});\n    this.hitCanvas = new Kinetic.HitCanvas();\n    // call super constructor\n    Kinetic.BaseLayer.call(this, config);\n}\n```\n\nOf course I had to make sure only one layer was created and used.\n. I got Kinetic running on a single canvas like this:\n\n``` javascript\nKinetic.SceneCanvas.prototype.init = function(config) {\n    var conf = config || {};\n\n    this.pixelRatio = 1;\n    this._canvas = config.useRealCanvas ? Kinetic.Util.useRealCanvasElement() : Kinetic.Util.createCanvasElement();\n\n    // set inline styles\n    this._canvas.style.padding = 0;\n    this._canvas.style.margin = 0;\n    this._canvas.style.border = 0;\n    this._canvas.style.background = 'transparent';\n    this._canvas.style.position = 'absolute';\n    this._canvas.style.top = 0;\n    this._canvas.style.left = 0;\n};\n\nvar canvas = null;\n\nKinetic.Util.useRealCanvasElement = function() {\n    if (!canvas) canvas = document.getElementById('#realcanvas');\n    // on some environments canvas.style is readonly\n    try {\n        canvas.style = canvas.style || {};\n    } catch (e) {\n    }\n    return canvas;\n};\n\nKinetic.Layer.prototype.____init = function (config) {\n    this.nodeType = 'Layer';\n    this.canvas = new Kinetic.SceneCanvas({useRealCanvas: true});\n    this.hitCanvas = new Kinetic.HitCanvas();\n    // call super constructor\n    Kinetic.BaseLayer.call(this, config);\n}\n```\n\nOf course I had to make sure only one layer was created and used.\n. ",
    "dpbevin": "I'm not going to debate which is the \"most appropriate behaviour\", however, not being able to fill an open path is a lack of functionality that I simply cannot do without (I'd have to switch to another framework).\n\nI'm happy to rework the changes to add a special \"fillOpenPath\" attribute. The default for this would be false (to maintain backward compatibility). The rendering logic would then be:\n\n```\nif (closedPath || fillOpenPath) {\n    context.fillStrokeShape(this);\n} else {\n    context.strokeShape(this);\n}\n```\n. I'm not going to debate which is the \"most appropriate behaviour\", however, not being able to fill an open path is a lack of functionality that I simply cannot do without (I'd have to switch to another framework).\n\nI'm happy to rework the changes to add a special \"fillOpenPath\" attribute. The default for this would be false (to maintain backward compatibility). The rendering logic would then be:\n\n```\nif (closedPath || fillOpenPath) {\n    context.fillStrokeShape(this);\n} else {\n    context.strokeShape(this);\n}\n```\n. ",
    "sdc-": "Just FYI, v5.0.2 never happened, you're up to 5.1.0 now, and the \"no blur\" in Desktop Chrome issue is still present. (just checked). Although the the blur works just fine in iOS Chrome. Definitely seems like a Chrome bug due to that. Maybe you could submit for them to standardize their handling of blurs . . . \n. Appreciate it guys! My app is getting way complex, I love learning to code. Appreciate the library! And the tips. I wouldn't have figured it out.\n. I take this back -- after doing further testing, the disableStroke() does work in a simple test environment, even though upgrading to the new library still throws the error.  I'll conclude it must be something wrong in my code... \n\n---\n. Just FYI, v5.0.2 never happened, you're up to 5.1.0 now, and the \"no blur\" in Desktop Chrome issue is still present. (just checked). Although the the blur works just fine in iOS Chrome. Definitely seems like a Chrome bug due to that. Maybe you could submit for them to standardize their handling of blurs . . . \n. Appreciate it guys! My app is getting way complex, I love learning to code. Appreciate the library! And the tips. I wouldn't have figured it out.\n. I take this back -- after doing further testing, the disableStroke() does work in a simple test environment, even though upgrading to the new library still throws the error.  I'll conclude it must be something wrong in my code... \n\n---\n. ",
    "lln7777": "Version: v4.7.4\n. Sorry, it's my fault. I add a prototype method in my product before v4.4.0, and it worked until v5.0.0. In v5.0.0, it doesn't work any more.\n\n``` js\nKinetic.Group.prototype.getAttr = function(name) {\n  return this.attrs[name];\n};\n```\n. Version: v4.7.4\n. Sorry, it's my fault. I add a prototype method in my product before v4.4.0, and it worked until v5.0.0. In v5.0.0, it doesn't work any more.\n\n``` js\nKinetic.Group.prototype.getAttr = function(name) {\n  return this.attrs[name];\n};\n```\n. ",
    "MischaWeerwag": "There is a workaround for this: Divide your absoluteposition by your scale.\ngetAbsolutePosition().x / scale.x\nThis gives you the correct position.\n. There is a workaround for this: Divide your absoluteposition by your scale.\ngetAbsolutePosition().x / scale.x\nThis gives you the correct position.\n. ",
    "samsieber": "I also agree. It seems like an abitrary change that a) breaks code and b) goes against the grain of the native javascript ecosystem. Can I ask why it was made?\n. I also agree. It seems like an abitrary change that a) breaks code and b) goes against the grain of the native javascript ecosystem. Can I ask why it was made?\n. ",
    "dinther": "Besides the fact that every library does rotation using radians by default. Your change just wasted a few hours of my time wading though my code to figure out why it would no longer work after updating the source from 4.something to 5.0.1 (Many changes, most of which make sense. Not this one)\n\nMy math calculates the angle in radians in an animation. Converting to degrees only to have it turned to radians somewhere internally is a waste of CPU time.\n\nI would argue you do away with anything supporting degrees if you wish to simplify the API.\n. Still messing about with this in my KineticJS based animated instrument library. Pretty pissed about this deg thing actually. Rotation data stored in databases, JSON based object definitions, everything is now wrong. Getters and setters. You should not have done this Eric. I am going to roll back to 4.5.5 till you make this right. It means changing all the new offset definitions back from {x:, y:} to [x,y] but so be it.\n. You are right. I'm sorry. I had a bad weekend dealing with other library\nupdates as well for some commercial projects. To make programming fun again\nI decided to spend today on my pet project and tripped up over this stuff.\nI already reverted back as there were a lot of other issues with the new\nlibrary such as getScale returning {x:{x:1,y:1},y:{x:2,y:2}} surely that\nshould have been {x:1,y:2}?\nBut I do appreciate your email and efforts to get me going on the latest\nkineticjs library.\n\nI am close to release a free Google Maps based shipsimulator game that\nmakes extensive use of Kineticjs as I build an animated instrument library\non top of Kineticjs. Hopefully it will attract the same amount of attention\nas my older Google Earth based ship simulator.\n\nYes, I do think Eric is doing an amazing job.\n\n[image: Inline image 1]\n\nOn Mon, Mar 17, 2014 at 3:48 PM, jfollas notifications@github.com wrote:\n\n> I can understand the frustration that comes from having an API change from\n> underneath you, but it's not really fair to lay into Eric so hard about\n> this. He puts so much time into producing a free and open source library to\n> make it easier to do cool things with the canvas, and doesn't deserve to be\n> chastised over a decision that he made based on feedback that he received.\n> \n> Instead of going back to 4.5.5, it may be easier to just change your\n> project's version of Kinetic 5.x to use radians, since Kinetic is fully\n> open source. This would have a benefit of your code not needing changed yet\n> again when support for radian angles are restored.\n> \n> After a quick look through the code, there's only one line in node.js\n> (1145, part of _getTransform) that would seem to be the culprit. Remove the\n> conversion from degrees to radians there, and you can then supply all of\n> your rotations in radians.\n> \n> Test providing radian angle for rotation: http://jsfiddle.net/mjg6r/\n> Modified 5.0.1: http://pastebin.com/raw.php?i=WXaHyd1R\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/743#issuecomment-37781232\n> .\n\n## \n\nRegards\n\nPaul van Dinther\nOur Google Earth creations at www.planetinaction.com\n. No, it is definitely a bad change. The only bad one really. The changes to\nsetPosition, scale and offset also forced me to do a lot of code changes\nbut I can see why you did it.\nAs long as the javascript Math unit handles angles in radians you should do\nthe same. But if you feel very strongly about it and insist to go non\nstandard then I hope you provide a setRotationRad and rotateRad\n. Besides the fact that every library does rotation using radians by default. Your change just wasted a few hours of my time wading though my code to figure out why it would no longer work after updating the source from 4.something to 5.0.1 (Many changes, most of which make sense. Not this one)\n\nMy math calculates the angle in radians in an animation. Converting to degrees only to have it turned to radians somewhere internally is a waste of CPU time.\n\nI would argue you do away with anything supporting degrees if you wish to simplify the API.\n. Still messing about with this in my KineticJS based animated instrument library. Pretty pissed about this deg thing actually. Rotation data stored in databases, JSON based object definitions, everything is now wrong. Getters and setters. You should not have done this Eric. I am going to roll back to 4.5.5 till you make this right. It means changing all the new offset definitions back from {x:, y:} to [x,y] but so be it.\n. You are right. I'm sorry. I had a bad weekend dealing with other library\nupdates as well for some commercial projects. To make programming fun again\nI decided to spend today on my pet project and tripped up over this stuff.\nI already reverted back as there were a lot of other issues with the new\nlibrary such as getScale returning {x:{x:1,y:1},y:{x:2,y:2}} surely that\nshould have been {x:1,y:2}?\nBut I do appreciate your email and efforts to get me going on the latest\nkineticjs library.\n\nI am close to release a free Google Maps based shipsimulator game that\nmakes extensive use of Kineticjs as I build an animated instrument library\non top of Kineticjs. Hopefully it will attract the same amount of attention\nas my older Google Earth based ship simulator.\n\nYes, I do think Eric is doing an amazing job.\n\n[image: Inline image 1]\n\nOn Mon, Mar 17, 2014 at 3:48 PM, jfollas notifications@github.com wrote:\n\n> I can understand the frustration that comes from having an API change from\n> underneath you, but it's not really fair to lay into Eric so hard about\n> this. He puts so much time into producing a free and open source library to\n> make it easier to do cool things with the canvas, and doesn't deserve to be\n> chastised over a decision that he made based on feedback that he received.\n> \n> Instead of going back to 4.5.5, it may be easier to just change your\n> project's version of Kinetic 5.x to use radians, since Kinetic is fully\n> open source. This would have a benefit of your code not needing changed yet\n> again when support for radian angles are restored.\n> \n> After a quick look through the code, there's only one line in node.js\n> (1145, part of _getTransform) that would seem to be the culprit. Remove the\n> conversion from degrees to radians there, and you can then supply all of\n> your rotations in radians.\n> \n> Test providing radian angle for rotation: http://jsfiddle.net/mjg6r/\n> Modified 5.0.1: http://pastebin.com/raw.php?i=WXaHyd1R\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/743#issuecomment-37781232\n> .\n\n## \n\nRegards\n\nPaul van Dinther\nOur Google Earth creations at www.planetinaction.com\n. No, it is definitely a bad change. The only bad one really. The changes to\nsetPosition, scale and offset also forced me to do a lot of code changes\nbut I can see why you did it.\nAs long as the javascript Math unit handles angles in radians you should do\nthe same. But if you feel very strongly about it and insist to go non\nstandard then I hope you provide a setRotationRad and rotateRad\n. ",
    "chops888": "![ss](https://f.cloud.github.com/assets/6743470/2226020/8a970786-9a99-11e3-911c-8e3c641af8a1.jpg)\nI'm also experiencing the same thing. Artifacting when a user has zoomed out.\n. Im a dummy. I wish I could delete this haha....\n. ![ss](https://f.cloud.github.com/assets/6743470/2226020/8a970786-9a99-11e3-911c-8e3c641af8a1.jpg)\nI'm also experiencing the same thing. Artifacting when a user has zoomed out.\n. Im a dummy. I wish I could delete this haha....\n. ",
    "bhagwatchouhan": "The same issue is faced by one of our major application. The exact scenario is - \n\nThis issue occur when we load our application for Browser Zoom Out state.\n\nIf browser is in normal state and zoom out happen, the application is working fine. As soon as we load our app for browsers in zoom-out state, the distortion happen. It also listen for mouse action within the limited area.\n\nExample:\n1. Stage dimension is 400 pixel X 300 pixel\n2. Create an Layer and added to stage\n3. Created an Image Object and added to the Layer.\n\nWhen we load application for Browser zoom out state - 70%, the mouse interactivity and movement is restricted within the boundary of 280 pixel X 210 pixel. i.e. exactly 70 % of Stage dimension.\n. The exact issue is -> The drawing area is being limited to the ratio of zoomed out dimensions. Hence redraw happen only for the zoomed out dimensions.\n. Similarly mouse listening is happening only within the zoomed out dimensions.\n. Example: \n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-tutorial/\n\nZoom out to 70% and than reload the page. When we do some movement by dragging the rectangle, we can see that the mvoement is fine within the 70% area, but it's blurry and no redraw for rest of the area.\n\n![pixelation](https://f.cloud.github.com/assets/3871877/2267724/ac2662ca-9ebd-11e3-9e98-acfc28258fc0.jpg)\n.  v5.0.1 with Kinetic.pixelRatio = 1;\n\nIt works like charm. No issues.\n\nPlease let us know whether this fix will work for mobile too ?\n. The same issue is faced by one of our major application. The exact scenario is - \n\nThis issue occur when we load our application for Browser Zoom Out state.\n\nIf browser is in normal state and zoom out happen, the application is working fine. As soon as we load our app for browsers in zoom-out state, the distortion happen. It also listen for mouse action within the limited area.\n\nExample:\n1. Stage dimension is 400 pixel X 300 pixel\n2. Create an Layer and added to stage\n3. Created an Image Object and added to the Layer.\n\nWhen we load application for Browser zoom out state - 70%, the mouse interactivity and movement is restricted within the boundary of 280 pixel X 210 pixel. i.e. exactly 70 % of Stage dimension.\n. The exact issue is -> The drawing area is being limited to the ratio of zoomed out dimensions. Hence redraw happen only for the zoomed out dimensions.\n. Similarly mouse listening is happening only within the zoomed out dimensions.\n. Example: \n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-tutorial/\n\nZoom out to 70% and than reload the page. When we do some movement by dragging the rectangle, we can see that the mvoement is fine within the 70% area, but it's blurry and no redraw for rest of the area.\n\n![pixelation](https://f.cloud.github.com/assets/3871877/2267724/ac2662ca-9ebd-11e3-9e98-acfc28258fc0.jpg)\n.  v5.0.1 with Kinetic.pixelRatio = 1;\n\nIt works like charm. No issues.\n\nPlease let us know whether this fix will work for mobile too ?\n. ",
    "nicolasloupias": "Is this supported for all kineticjs version?\nI tried:\n\nKinetic.pixelRatio = 1;\nthis.stage = new Kinetic.Stage(\n {\n      container: 'kineticContainer\"\n});\n\nI am still getting the same issue.\nI am using the version 4.5.2\n. Is this supported for all kineticjs version?\nI tried:\n\nKinetic.pixelRatio = 1;\nthis.stage = new Kinetic.Stage(\n {\n      container: 'kineticContainer\"\n});\n\nI am still getting the same issue.\nI am using the version 4.5.2\n. ",
    "maxleiko": "Ok, I'll use bower =)\n. I'll leave it open 'til you release a 5.0.0 tag :p\n. Ok, I'll use bower =)\n. I'll leave it open 'til you release a 5.0.0 tag :p\n. ",
    "abxaz92": "I downloaded the archive from gitHub, and when i try run node server, i see this messages:\nError: Cannot find module './dist/kinetic-dev'\n    at Function.Module._resolveFilename (module.js:338:15)\n\n##     at Function.Module._load (module.js:280:25).\n\nwhere can I find this file \n. I downloaded the archive from gitHub, and when i try run node server, i see this messages:\nError: Cannot find module './dist/kinetic-dev'\n    at Function.Module._resolveFilename (module.js:338:15)\n\n##     at Function.Module._load (module.js:280:25).\n\nwhere can I find this file \n. ",
    "marekhrabe": "I had exactly the same problem. See changelog, behavior of changeOffset changed and now it takes Object with x and y properties instead of two arguments. Change that and you will be fine\n. Hey, I am doing exactly the same thing in my project and this is how I dealt with that:\n\n```\nmyStage.getContent().addEventListener('mousewheel', function (e) {\n    var mouseX = e.clientX;\n    var mouseY = e.clientY;\n});\n```\n. You can probably make use of putting images into groups and then calling group.cache(), which will internaly merge those images into one image and using that one to draw to stage. You are then basicly drawing one image instead of all that you put into the group and there is no limit for number of images or number of groups. And if you are not doing any animations in whole layer you can call .cache() even on whole layer\n\nAlso I recomend you reading throught the changelog here on github wiki. Especially in 5.0.0 there were introduced a lot of optimizations you may not know about yet. \n. Oh, sorry, I meant add your \"images\" instead of \"layers\". I updated the original comment to reflect that.\n. What resolution your canvas is and what are the dimensions of images? Can you maybe post a screenshot of app to get the idea of what image data you are dealing with?\n\nI [found out](http://stackoverflow.com/questions/12642222/canvascontext-fillrect-throws-ns-error-failure-exception-in-firefox) that `NS_ERROR_FAILURE` is almost only thrown when you are drawing on really huge canvas.  The solution may be to use more smaller canvases positioned next to each other.\n. Can't think of anything that will solve the problem magically, sorry. This is probably really complex app. Do you have any experience with this kind of \"overcrowded\" stage, @ericdrowell?\n\nIf I understand well, the square icons are draggable and the drag causes the arrows to redraw themselves, right? You can try some optimizations like splitting the icons and arrows to two `Kinetic.Layer`s and caching the one with arrows. And after drag&dropping of square icons clear the cache of arrows layer, redraw them once and cache them again. With this workflow the arrows won't be updating realtime while dragging, but only when you stop moving the icon. \n. I think that this is expected behavior and the previous one is a bug. Container of `Kinetic.Stage` should be leaved just for Kinetics purposes. \n\nYou should make a DOM sibiling of `Kinetic.Stage` and put your dynamic elements there and position properly to overlay the original container.\n. You are probably looking for something like this: \n\n```\nwindow.addEventListener('resize', function () {\n    kinetic.stage.setWidth(window.innerWidth - 300); // compensate for the sidebar\n    kinetic.stage.setHeight(window.innerHeight);\n});\n```\n\nThis code will resize the stage after chage of windows size.\n. I had exactly the same problem. See changelog, behavior of changeOffset changed and now it takes Object with x and y properties instead of two arguments. Change that and you will be fine\n. Hey, I am doing exactly the same thing in my project and this is how I dealt with that:\n\n```\nmyStage.getContent().addEventListener('mousewheel', function (e) {\n    var mouseX = e.clientX;\n    var mouseY = e.clientY;\n});\n```\n. You can probably make use of putting images into groups and then calling group.cache(), which will internaly merge those images into one image and using that one to draw to stage. You are then basicly drawing one image instead of all that you put into the group and there is no limit for number of images or number of groups. And if you are not doing any animations in whole layer you can call .cache() even on whole layer\n\nAlso I recomend you reading throught the changelog here on github wiki. Especially in 5.0.0 there were introduced a lot of optimizations you may not know about yet. \n. Oh, sorry, I meant add your \"images\" instead of \"layers\". I updated the original comment to reflect that.\n. What resolution your canvas is and what are the dimensions of images? Can you maybe post a screenshot of app to get the idea of what image data you are dealing with?\n\nI [found out](http://stackoverflow.com/questions/12642222/canvascontext-fillrect-throws-ns-error-failure-exception-in-firefox) that `NS_ERROR_FAILURE` is almost only thrown when you are drawing on really huge canvas.  The solution may be to use more smaller canvases positioned next to each other.\n. Can't think of anything that will solve the problem magically, sorry. This is probably really complex app. Do you have any experience with this kind of \"overcrowded\" stage, @ericdrowell?\n\nIf I understand well, the square icons are draggable and the drag causes the arrows to redraw themselves, right? You can try some optimizations like splitting the icons and arrows to two `Kinetic.Layer`s and caching the one with arrows. And after drag&dropping of square icons clear the cache of arrows layer, redraw them once and cache them again. With this workflow the arrows won't be updating realtime while dragging, but only when you stop moving the icon. \n. I think that this is expected behavior and the previous one is a bug. Container of `Kinetic.Stage` should be leaved just for Kinetics purposes. \n\nYou should make a DOM sibiling of `Kinetic.Stage` and put your dynamic elements there and position properly to overlay the original container.\n. You are probably looking for something like this: \n\n```\nwindow.addEventListener('resize', function () {\n    kinetic.stage.setWidth(window.innerWidth - 300); // compensate for the sidebar\n    kinetic.stage.setHeight(window.innerHeight);\n});\n```\n\nThis code will resize the stage after chage of windows size.\n. ",
    "bijaybhandari1989": "Thanks for your response...\n. Thanks for your response...\n. ",
    "twixed-RU": "Works perfectly at 60 fps (in Chrome) for me. IE11 gives 65-67 fps. O_o\n. Oh... Now I see what you're talking about...\n. You saved my day! Thank you!\n. Mostly in getters/setters.\ngetFill() -> fill()\ngetPosition() -> position()\ngetWidth() -> width()\ngetHeight() -> height()\netc.\n\nRefer to documentation.\n. Works perfectly at 60 fps (in Chrome) for me. IE11 gives 65-67 fps. O_o\n. Oh... Now I see what you're talking about...\n. You saved my day! Thank you!\n. Mostly in getters/setters.\ngetFill() -> fill()\ngetPosition() -> position()\ngetWidth() -> width()\ngetHeight() -> height()\netc.\n\nRefer to documentation.\n. ",
    "masterofeye": "Thx lavtron, \n\nbut i cant see any picture.\n. Thx lavtron, \n\nbut i cant see any picture.\n. ",
    "MaximilianoRicoTabo": "Which fillPatternScaleX and fillPatternScaleY values are suitable to fit an image avoiding mosaic behavior. ?\n\nI want to place an image inside an hexagon and let client drag image in order to fit it to given area . Is it possible with this approach ? Leave the mock I received from designer to better understand.\n\nThanks in advance \n\n![image](https://f.cloud.github.com/assets/1678457/2423486/4649ffea-ab9a-11e3-862a-9c81892256b6.png)\n. I think I solved this layering, setting top layer event listener to false, I just need how to get context from shape and set globalComposite  destination out. It seems to changed in version 5 and I couldn't found any tutorial or stackoverflow answer.\n\nhttp://stackoverflow.com/questions/18583431/globalcompositeoperation-with-kineticjs \n\nIsn't working i guess. Any help to achieve this is appreciate. Thanks.\n. Hey ! I could solve it, I left a fiddle very commented  just in case could help to others. By the way amazing tool I didn't know. I have learnt a lot between yesterday and today :smile: \n\nThanks a lot for it.\n\nhttp://jsfiddle.net/L7eLR/\n. Which fillPatternScaleX and fillPatternScaleY values are suitable to fit an image avoiding mosaic behavior. ?\n\nI want to place an image inside an hexagon and let client drag image in order to fit it to given area . Is it possible with this approach ? Leave the mock I received from designer to better understand.\n\nThanks in advance \n\n![image](https://f.cloud.github.com/assets/1678457/2423486/4649ffea-ab9a-11e3-862a-9c81892256b6.png)\n. I think I solved this layering, setting top layer event listener to false, I just need how to get context from shape and set globalComposite  destination out. It seems to changed in version 5 and I couldn't found any tutorial or stackoverflow answer.\n\nhttp://stackoverflow.com/questions/18583431/globalcompositeoperation-with-kineticjs \n\nIsn't working i guess. Any help to achieve this is appreciate. Thanks.\n. Hey ! I could solve it, I left a fiddle very commented  just in case could help to others. By the way amazing tool I didn't know. I have learnt a lot between yesterday and today :smile: \n\nThanks a lot for it.\n\nhttp://jsfiddle.net/L7eLR/\n. ",
    "05bca054": "Hi Eric,\n\nThanks for your time and consideration.\n\nBut it wont work on JSfiddle because it use PHP script for generating \ncoloured png file each time drop-downs changes their value via ajax \nrequest.\n\nSo i send you zip file you just extract it on php server(GD library \nenabled) and check this for all the the browser chrome and safari works \n(May be they use webkit) and firefox ,opera and IE isn't give any error \neither but still it wont work.\n\n-Naitik\n\nOn 2014-01-20 12:43, Eric Rowell wrote:\n\n> can you repost this on stackoverflow, with a jsfiddle? for\n> implementation questions, stack overflow is a much better forum than\n> github. Also, I noticed that you're passing arguments to the draw()\n> method. The draw method takes no arguments.\n> \n> https://github.com/ericdrowell/KineticJS/blob/master/src/Node.js#L1465 \n> [1]\n> \n> ## \n> \n> Reply to this email directly or view it on GitHub [2].\n> \n> ## Links:\n> \n> [1] \n> https://github.com/ericdrowell/KineticJS/blob/master/src/Node.js#L1465\n> [2] \n> https://github.com/ericdrowell/KineticJS/issues/766#issuecomment-32785621\n. Hi Eric,\n\nPlease open attache URL given below in Chrome as well as Firefox you get better idea of problem.\n\nhttp://ringinghost.com/shutter/ \n\nIn Firefox image changes only once(First time) when changing value of first drop down and work fine in chrome.\n\n-Naitik\n. Hi Eric,\n\nThanks for your time and consideration.\n\nBut it wont work on JSfiddle because it use PHP script for generating \ncoloured png file each time drop-downs changes their value via ajax \nrequest.\n\nSo i send you zip file you just extract it on php server(GD library \nenabled) and check this for all the the browser chrome and safari works \n(May be they use webkit) and firefox ,opera and IE isn't give any error \neither but still it wont work.\n\n-Naitik\n\nOn 2014-01-20 12:43, Eric Rowell wrote:\n\n> can you repost this on stackoverflow, with a jsfiddle? for\n> implementation questions, stack overflow is a much better forum than\n> github. Also, I noticed that you're passing arguments to the draw()\n> method. The draw method takes no arguments.\n> \n> https://github.com/ericdrowell/KineticJS/blob/master/src/Node.js#L1465 \n> [1]\n> \n> ## \n> \n> Reply to this email directly or view it on GitHub [2].\n> \n> ## Links:\n> \n> [1] \n> https://github.com/ericdrowell/KineticJS/blob/master/src/Node.js#L1465\n> [2] \n> https://github.com/ericdrowell/KineticJS/issues/766#issuecomment-32785621\n. Hi Eric,\n\nPlease open attache URL given below in Chrome as well as Firefox you get better idea of problem.\n\nhttp://ringinghost.com/shutter/ \n\nIn Firefox image changes only once(First time) when changing value of first drop down and work fine in chrome.\n\n-Naitik\n. ",
    "ze8520": "Ok, sorry for my mistake.\nI realized that my problem was in the shape offset. Can you explain why\nthe redHex has offsetX: 70?\nThe shapes I was working had offsetX and offsetY to the center of the\nshape, and with that, scaling to -1 for example had no effect.\nI've tried to change the offset in my shapes but it doesn't work as well as\nin your tutorial. I can't figure it out what offset shoud be used in order\nto flip the shapes correctly.\n\nThanks\n\n2014/1/20 Eric Rowell notifications@github.com\n\n> scaling with a negative value works for me. It's working in this tutorial\n> as well:\n> \n> http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-scale-animation-tutorial/\n> \n> can you post a jsfiddle? There's probably something else wrong.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/768#issuecomment-32785224\n> .\n\n## \n\nJos\u00e9 A. F. de Oliveira\nAveiro\n. Ok I got It. Offset equals to shape width.\n\nThanks and sorry for my incorrect bug report.\nCheers\n\n2014/1/20 Jos\u00e9 Oliveira ze8520@gmail.com\n\n> Ok, sorry for my mistake.\n> I realized that my problem was in the shape offset. Can you explain why\n> the redHex has offsetX: 70?\n> The shapes I was working had offsetX and offsetY to the center of the\n> shape, and with that, scaling to -1 for example had no effect.\n> I've tried to change the offset in my shapes but it doesn't work as well\n> as in your tutorial. I can't figure it out what offset shoud be used in\n> order to flip the shapes correctly.\n> \n> Thanks\n> \n> 2014/1/20 Eric Rowell notifications@github.com\n> \n> > scaling with a negative value works for me. It's working in this tutorial\n> > as well:\n> > \n> > http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-scale-animation-tutorial/\n> > \n> > can you post a jsfiddle? There's probably something else wrong.\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/768#issuecomment-32785224\n> > .\n> \n> ## \n> \n> Jos\u00e9 A. F. de Oliveira\n> Aveiro\n\n## \n\nJos\u00e9 A. F. de Oliveira\nAveiro\n. Ok, sorry for my mistake.\nI realized that my problem was in the shape offset. Can you explain why\nthe redHex has offsetX: 70?\nThe shapes I was working had offsetX and offsetY to the center of the\nshape, and with that, scaling to -1 for example had no effect.\nI've tried to change the offset in my shapes but it doesn't work as well as\nin your tutorial. I can't figure it out what offset shoud be used in order\nto flip the shapes correctly.\n\nThanks\n\n2014/1/20 Eric Rowell notifications@github.com\n\n> scaling with a negative value works for me. It's working in this tutorial\n> as well:\n> \n> http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-scale-animation-tutorial/\n> \n> can you post a jsfiddle? There's probably something else wrong.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/768#issuecomment-32785224\n> .\n\n## \n\nJos\u00e9 A. F. de Oliveira\nAveiro\n. Ok I got It. Offset equals to shape width.\n\nThanks and sorry for my incorrect bug report.\nCheers\n\n2014/1/20 Jos\u00e9 Oliveira ze8520@gmail.com\n\n> Ok, sorry for my mistake.\n> I realized that my problem was in the shape offset. Can you explain why\n> the redHex has offsetX: 70?\n> The shapes I was working had offsetX and offsetY to the center of the\n> shape, and with that, scaling to -1 for example had no effect.\n> I've tried to change the offset in my shapes but it doesn't work as well\n> as in your tutorial. I can't figure it out what offset shoud be used in\n> order to flip the shapes correctly.\n> \n> Thanks\n> \n> 2014/1/20 Eric Rowell notifications@github.com\n> \n> > scaling with a negative value works for me. It's working in this tutorial\n> > as well:\n> > \n> > http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-scale-animation-tutorial/\n> > \n> > can you post a jsfiddle? There's probably something else wrong.\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/768#issuecomment-32785224\n> > .\n> \n> ## \n> \n> Jos\u00e9 A. F. de Oliveira\n> Aveiro\n\n## \n\nJos\u00e9 A. F. de Oliveira\nAveiro\n. ",
    "cheng470": "**You save my day, too!!!**\n**Great Thanks!!!**\n. **You save my day, too!!!**\n**Great Thanks!!!**\n. ",
    "maurigalvez": "Thansks for your help! I will give both methods a try.\n. Thansks for your help! I will give both methods a try.\n. ",
    "ericbeyeler": "I'm really liking this. We are using KineticJS and are targeting mobile devices and this is exactly what we need! Let me know if I can be of any help.\n. I'm really liking this. We are using KineticJS and are targeting mobile devices and this is exactly what we need! Let me know if I can be of any help.\n. ",
    "brainee": "as i know,kinetic has been changed as Konva,won't you know that?\n. as i know,kinetic has been changed as Konva,won't you know that?\n. ",
    "josesayago": "That's it! thanks for your prompt response @lavrton \n. Aha, got it. In my original code I didn't add a layer first. So the first time I add a string I also add a layer, then I just check if the layer exists and draw the stage. For the record, I avoid text duplication like this:\n`\nflyerSheets.add( myText );\nif( flyerStage.getLayers().length < 1 ) {\n     flyerStage.add( flyerSheets );\n}\nflyerStage.draw();\n`\n\nThanks @lavrton for your prompt answer.\n\nCheers!\n. Hello @lavrton, I've made two fiddles but I was unable to reproduce the same behavior as explained here. The only difference with my app is I'm exporting images through AJAX, and forcing them to be downloaded using PHP.\n\nIn my app I export using toDataURL and toImage, the issue explained before just happens on the image resulting from the toDataURL + AJAX + PHP download.\n\njsFiddle [Export in v5.0.1](http://jsfiddle.net/laelitenetwork/nVPz3/)\njsFiddle [Export in v5.1.1](http://jsfiddle.net/laelitenetwork/4q7c7/)\n\nI'll close this topic because I was unable to reproduce it, I'll keep investigating my own app to see if I can figure this out.\n\nCheers,\nJos\u00e9 SAYAGO.\n. Hello @lavrton, thank you for your prompt response. I have checked your example, and noticed the reason my code wasn't working.\n\nSee this example where I assigned a numeric value instead of a string to the name: http://jsbin.com/girefelunewa/1/edit?html,js,console,output\n\nThis breaks the code. I was assigning numbers instead of strings, I solved this issue by appending `.toString()` at the end of the variable.\n\nHowever, this indeed changed since the last update and would be great if you could inform about this somewhere. Thanks again for helping me out.\n\nBest regards.\n. That's it! thanks for your prompt response @lavrton \n. Aha, got it. In my original code I didn't add a layer first. So the first time I add a string I also add a layer, then I just check if the layer exists and draw the stage. For the record, I avoid text duplication like this:\n`\nflyerSheets.add( myText );\nif( flyerStage.getLayers().length < 1 ) {\n     flyerStage.add( flyerSheets );\n}\nflyerStage.draw();\n`\n\nThanks @lavrton for your prompt answer.\n\nCheers!\n. Hello @lavrton, I've made two fiddles but I was unable to reproduce the same behavior as explained here. The only difference with my app is I'm exporting images through AJAX, and forcing them to be downloaded using PHP.\n\nIn my app I export using toDataURL and toImage, the issue explained before just happens on the image resulting from the toDataURL + AJAX + PHP download.\n\njsFiddle [Export in v5.0.1](http://jsfiddle.net/laelitenetwork/nVPz3/)\njsFiddle [Export in v5.1.1](http://jsfiddle.net/laelitenetwork/4q7c7/)\n\nI'll close this topic because I was unable to reproduce it, I'll keep investigating my own app to see if I can figure this out.\n\nCheers,\nJos\u00e9 SAYAGO.\n. Hello @lavrton, thank you for your prompt response. I have checked your example, and noticed the reason my code wasn't working.\n\nSee this example where I assigned a numeric value instead of a string to the name: http://jsbin.com/girefelunewa/1/edit?html,js,console,output\n\nThis breaks the code. I was assigning numbers instead of strings, I solved this issue by appending `.toString()` at the end of the variable.\n\nHowever, this indeed changed since the last update and would be great if you could inform about this somewhere. Thanks again for helping me out.\n\nBest regards.\n. ",
    "urielhdz": "Is already implemented within the Native API, no plugins: http://blogs.adobe.com/webplatform/2014/02/24/using-blend-modes-in-html-canvas/ \n. Is already implemented within the Native API, no plugins: http://blogs.adobe.com/webplatform/2014/02/24/using-blend-modes-in-html-canvas/ \n. ",
    "kalpeshgiri": "Hi Eric,\n\ni am working around Games in HTML5 and i have below code ready in HTML5 for the car movement.\n\n<script type=\"text/javascript\">\n$(document).ready(function(){\n// Canvas Variables\nvar canvas = $('#canvas');\nvar context = canvas.get(0).getContext('2d');\nvar canvasWidth = canvas.width();\nvar canvasHeight = canvas.height();\n// Keyboard Variables\nvar leftKey = 37;\nvar upKey = 38;\nvar rightKey = 39;\nvar downKey = 40;\n// Keyboard Key Press Event Listener\n$(window).keydown(function(e){\n    var keyCode = e.keyCode;\n    if(keyCode == leftKey){\n        car.left = true;\n    } else if(keyCode == upKey){\n        car.forward = true;\n    } else if(keyCode == rightKey){\n        car.right = true;\n    } else if (keyCode == downKey){\n        car.backward = true;\n    }\n});\n// Keyboard Key Release Event Listener\n$(window).keyup(function(e){\n    var keyCode = e.keyCode;\n    if(keyCode == leftKey){\n        car.left = false;\n    } else if(keyCode == upKey){\n        car.forward = false;\n    } else if(keyCode == rightKey){\n        car.right = false;\n    } else if (keyCode == downKey){\n        car.backward = false;\n    }\n});\nfunction initialise(){\n    initStageObjects(); // Initialized Car object\n    drawStageObjects(); // \n    updateStage();\n}\nfunction Car(src, x, y){        \n    this.image = new Image();\n    this.image.src = src;\n    \n    this.x = x;\n    this.y = y;\n    this.vx = 0;\n    this.vy = 0;\n    this.angle = 90;\n    this.topSpeed = 15;\n    this.acceleration = 0.1;\n    this.reverse = 0.1;\n    this.brakes = 0.3;\n    this.friction = 0.05;\n    this.handeling = 15;\n    this.grip = 15;\n    this.minGrip = 5;\n    this.speed = 0;\n    this.drift = 0;\n    this.left = false;\n    this.up = false;\n    this.right = false;\n    this.down = false;\n}\n        \n// Create any objects needed for animation        \nfunction initStageObjects(){\n    car = new Car('images/car.png',canvas.width()/2,canvas.height()/2);\n    context.shadowColor = '#999999';\n    context.shadowBlur = 7;\n    context.shadowOffsetX = 10;\n    context.shadowOffsetY = -4;\n    context.fill();\n}\nfunction drawStageObjects(){\n    context.save();\n    context.translate(car.x,car.y);\n    context.rotate((car.angle + car.drift) * Math.PI/180);    \n    context.drawImage(car.image, -25 , (-47 + (Math.abs(car.drift / 3))));    \n    context.restore();\n}\nfunction clearCanvas(){\n    context.clearRect(0, 0, canvasWidth, canvasHeight);  \n    context.beginPath();\n}\nfunction updateStageObjects(){\n    \n    // Faster the car is going, the worse it handels\n    if(car.handeling > car.minGrip){\n        car.handeling = car.grip - car.speed;\n    }\n    else{\n        car.handeling = car.minGrip + 1;\n    }\n    \n    \n    // Car acceleration to top speed\n    if(car.forward){\n        if(car.speed < car.topSpeed){\n            car.speed = car.speed + car.acceleration;\n        }            \n    }        \n    else if(car.backward){\n        if(car.speed < 1){\n            car.speed = car.speed - car.reverse;    \n        }\n        else if(car.speed > 1){\n            car.speed = car.speed - car.brakes;\n        }\n    }\n    \n    \n    // Car drifting logic (it's crap, needs work)\n    if(car.forward && car.left){\n        if(car.drift > -35){\n            //car.drift = car.drift - 3;    \n        }\n    }\n    else if(car.forward && car.right){\n        if(car.drift < 35){\n            //car.drift = car.drift + 3;    \n        }\n    }\n    else if(car.forward && !car.left && car.drift > -40 && car.drift < -3){\n        car.drift = car.drift + 3;\n    }\n    else if(car.forward && !car.right && car.drift < 40 && car.drift > 3){\n        car.drift = car.drift - 3;\n    }\n    \n    if(car.drift > 3){\n        if(!car.forward && !car.left){\n            car.drift = car.drift - 4;\n        }\n    }\n    else if(car.drift > -40 && car.drift < -3){\n        if(!car.forward && !car.right){\n            car.drift = car.drift + 4;\n        }\n    }\n    \n    // General Car handeling while turning\n    if(car.left){\n        car.angle = car.angle - (car.handeling * car.speed/car.topSpeed);\n        \n    } else if(car.right){\n        car.angle = car.angle + (car.handeling * car.speed/car.topSpeed);    \n    }\n    \n    // Constant applying friction / Air resistance\n    if(car.speed > 0){\n        car.speed = car.speed - car.friction;\n        \n    } else if(car.speed < 0) {\n        car.speed = car.speed + car.friction;\n        \n    }\n    // Update car velocity (speed + direction)\n    car.vy = -Math.cos(car.angle * Math.PI / 180) * car.speed;\n    car.vx = Math.sin(car.angle * Math.PI / 180) * car.speed;    \n    \n    // Plot the new velocity into x and y cords\n    car.y = car.y + car.vy;\n    car.x = car.x + car.vx;\n    // Use this div to display any info I need to see visually\n    //$('#stats').html(car.speed);\n}\n// Main animation loop\nfunction updateStage(){\n    clearCanvas();\n    updateStageObjects();\n    drawStageObjects();        \n    setTimeout(updateStage, 25);\n}\n// Initialise the animation loop\ninitialise();\n    \n});    \n</script>\n\nIt's working fine with HTML5 inbuild functions like save(), translate(), drawImage() & restore(), but i want the same code transfered in Kineticjs framework as i have preapred Maps in Kineticjs (specially Car object).\n\nCould you please help me around this?\n\nThanks in advance..!!\n. Thanks man,\n\nBut what i am finding is creating constructor & defining custom attributes of car object, Could you please provide me an example of that?\n. Hi Eric,\n\ni am working around Games in HTML5 and i have below code ready in HTML5 for the car movement.\n\n<script type=\"text/javascript\">\n$(document).ready(function(){\n// Canvas Variables\nvar canvas = $('#canvas');\nvar context = canvas.get(0).getContext('2d');\nvar canvasWidth = canvas.width();\nvar canvasHeight = canvas.height();\n// Keyboard Variables\nvar leftKey = 37;\nvar upKey = 38;\nvar rightKey = 39;\nvar downKey = 40;\n// Keyboard Key Press Event Listener\n$(window).keydown(function(e){\n    var keyCode = e.keyCode;\n    if(keyCode == leftKey){\n        car.left = true;\n    } else if(keyCode == upKey){\n        car.forward = true;\n    } else if(keyCode == rightKey){\n        car.right = true;\n    } else if (keyCode == downKey){\n        car.backward = true;\n    }\n});\n// Keyboard Key Release Event Listener\n$(window).keyup(function(e){\n    var keyCode = e.keyCode;\n    if(keyCode == leftKey){\n        car.left = false;\n    } else if(keyCode == upKey){\n        car.forward = false;\n    } else if(keyCode == rightKey){\n        car.right = false;\n    } else if (keyCode == downKey){\n        car.backward = false;\n    }\n});\nfunction initialise(){\n    initStageObjects(); // Initialized Car object\n    drawStageObjects(); // \n    updateStage();\n}\nfunction Car(src, x, y){        \n    this.image = new Image();\n    this.image.src = src;\n    \n    this.x = x;\n    this.y = y;\n    this.vx = 0;\n    this.vy = 0;\n    this.angle = 90;\n    this.topSpeed = 15;\n    this.acceleration = 0.1;\n    this.reverse = 0.1;\n    this.brakes = 0.3;\n    this.friction = 0.05;\n    this.handeling = 15;\n    this.grip = 15;\n    this.minGrip = 5;\n    this.speed = 0;\n    this.drift = 0;\n    this.left = false;\n    this.up = false;\n    this.right = false;\n    this.down = false;\n}\n        \n// Create any objects needed for animation        \nfunction initStageObjects(){\n    car = new Car('images/car.png',canvas.width()/2,canvas.height()/2);\n    context.shadowColor = '#999999';\n    context.shadowBlur = 7;\n    context.shadowOffsetX = 10;\n    context.shadowOffsetY = -4;\n    context.fill();\n}\nfunction drawStageObjects(){\n    context.save();\n    context.translate(car.x,car.y);\n    context.rotate((car.angle + car.drift) * Math.PI/180);    \n    context.drawImage(car.image, -25 , (-47 + (Math.abs(car.drift / 3))));    \n    context.restore();\n}\nfunction clearCanvas(){\n    context.clearRect(0, 0, canvasWidth, canvasHeight);  \n    context.beginPath();\n}\nfunction updateStageObjects(){\n    \n    // Faster the car is going, the worse it handels\n    if(car.handeling > car.minGrip){\n        car.handeling = car.grip - car.speed;\n    }\n    else{\n        car.handeling = car.minGrip + 1;\n    }\n    \n    \n    // Car acceleration to top speed\n    if(car.forward){\n        if(car.speed < car.topSpeed){\n            car.speed = car.speed + car.acceleration;\n        }            \n    }        \n    else if(car.backward){\n        if(car.speed < 1){\n            car.speed = car.speed - car.reverse;    \n        }\n        else if(car.speed > 1){\n            car.speed = car.speed - car.brakes;\n        }\n    }\n    \n    \n    // Car drifting logic (it's crap, needs work)\n    if(car.forward && car.left){\n        if(car.drift > -35){\n            //car.drift = car.drift - 3;    \n        }\n    }\n    else if(car.forward && car.right){\n        if(car.drift < 35){\n            //car.drift = car.drift + 3;    \n        }\n    }\n    else if(car.forward && !car.left && car.drift > -40 && car.drift < -3){\n        car.drift = car.drift + 3;\n    }\n    else if(car.forward && !car.right && car.drift < 40 && car.drift > 3){\n        car.drift = car.drift - 3;\n    }\n    \n    if(car.drift > 3){\n        if(!car.forward && !car.left){\n            car.drift = car.drift - 4;\n        }\n    }\n    else if(car.drift > -40 && car.drift < -3){\n        if(!car.forward && !car.right){\n            car.drift = car.drift + 4;\n        }\n    }\n    \n    // General Car handeling while turning\n    if(car.left){\n        car.angle = car.angle - (car.handeling * car.speed/car.topSpeed);\n        \n    } else if(car.right){\n        car.angle = car.angle + (car.handeling * car.speed/car.topSpeed);    \n    }\n    \n    // Constant applying friction / Air resistance\n    if(car.speed > 0){\n        car.speed = car.speed - car.friction;\n        \n    } else if(car.speed < 0) {\n        car.speed = car.speed + car.friction;\n        \n    }\n    // Update car velocity (speed + direction)\n    car.vy = -Math.cos(car.angle * Math.PI / 180) * car.speed;\n    car.vx = Math.sin(car.angle * Math.PI / 180) * car.speed;    \n    \n    // Plot the new velocity into x and y cords\n    car.y = car.y + car.vy;\n    car.x = car.x + car.vx;\n    // Use this div to display any info I need to see visually\n    //$('#stats').html(car.speed);\n}\n// Main animation loop\nfunction updateStage(){\n    clearCanvas();\n    updateStageObjects();\n    drawStageObjects();        \n    setTimeout(updateStage, 25);\n}\n// Initialise the animation loop\ninitialise();\n    \n});    \n</script>\n\nIt's working fine with HTML5 inbuild functions like save(), translate(), drawImage() & restore(), but i want the same code transfered in Kineticjs framework as i have preapred Maps in Kineticjs (specially Car object).\n\nCould you please help me around this?\n\nThanks in advance..!!\n. Thanks man,\n\nBut what i am finding is creating constructor & defining custom attributes of car object, Could you please provide me an example of that?\n. ",
    "kennknowles": "Gotcha. I figured it was done for performance reasons, but wasn't sure if there was more to it.\n\nPerhaps the more performant representation can be internal and the setter can convert it if necessary. Paying this cost in the constructor/setter shouldn't be so bad. And actually it isn't even really a performance loss in my case -- I have to do that conversion anyhow since the input data for building the line comes in the form of an array of objects like `[{x: ..., y: ...}, ...]`\n. Fair enough. I'm not saying it is an easy problem :-)\n\nHow about exposing the internal array so it can be mutated?\n\n``` javascript\nvar points = []; // huge array of points\n\npolygon.setPoints(points);\npolygon.pointcoords[9998] = 5;\npolygon.pointcoords[9999] = 6;\n```\n\nSeems slighty more benign than counting on an object's internals being aliased to the initialization value you pass in. But that's just one idea.\n\nI get that JS perf is such that you don't always have the luxury of high level programming, so I can live with whatever happens.\n\nI just would loudly call out places where the API is less than ideal for performance reasons, in the permanent docs as well.  And definitely when it is a flat array of coordinates that are paired up implicitly, call it \"an array of coordinates paired up implicitly\" rather than the less accurate \"array of points\".\n. So to build a shape from the positions of other stuff, it would look like:\n\n```\npolygon = Kinetic.Line({\n    closed: true,\n    points: []\n    stroke: 'red',\n    strokeWidth: 2\n});\npolygon.push(draggable1.position());\npolygon.push(draggable2.position());\npolygon.push(draggable3.position());\n...\n```\n\nIn the body of a drag handler you'd need a `set(index, point)` method to replace just the point that moved, or else would need to clear the array and rebuild. Seems OK.\n. Gotcha. I figured it was done for performance reasons, but wasn't sure if there was more to it.\n\nPerhaps the more performant representation can be internal and the setter can convert it if necessary. Paying this cost in the constructor/setter shouldn't be so bad. And actually it isn't even really a performance loss in my case -- I have to do that conversion anyhow since the input data for building the line comes in the form of an array of objects like `[{x: ..., y: ...}, ...]`\n. Fair enough. I'm not saying it is an easy problem :-)\n\nHow about exposing the internal array so it can be mutated?\n\n``` javascript\nvar points = []; // huge array of points\n\npolygon.setPoints(points);\npolygon.pointcoords[9998] = 5;\npolygon.pointcoords[9999] = 6;\n```\n\nSeems slighty more benign than counting on an object's internals being aliased to the initialization value you pass in. But that's just one idea.\n\nI get that JS perf is such that you don't always have the luxury of high level programming, so I can live with whatever happens.\n\nI just would loudly call out places where the API is less than ideal for performance reasons, in the permanent docs as well.  And definitely when it is a flat array of coordinates that are paired up implicitly, call it \"an array of coordinates paired up implicitly\" rather than the less accurate \"array of points\".\n. So to build a shape from the positions of other stuff, it would look like:\n\n```\npolygon = Kinetic.Line({\n    closed: true,\n    points: []\n    stroke: 'red',\n    strokeWidth: 2\n});\npolygon.push(draggable1.position());\npolygon.push(draggable2.position());\npolygon.push(draggable3.position());\n...\n```\n\nIn the body of a drag handler you'd need a `set(index, point)` method to replace just the point that moved, or else would need to clear the array and rebuild. Seems OK.\n. ",
    "apcro": "So an active change from\n\n```\nimage.setSize(newWidth, newHeight);\n```\n\nto\n\n```\nimage.setSize({width: newWidth, height: newHeight});\n```\n\nwhen calling the method?\n\nThis works, but it is a change in the way the method call works between versions, and the documentation is not particularly clear, nor could I find any reference to the paramter type being changed anywhere.\n. So an active change from\n\n```\nimage.setSize(newWidth, newHeight);\n```\n\nto\n\n```\nimage.setSize({width: newWidth, height: newHeight});\n```\n\nwhen calling the method?\n\nThis works, but it is a change in the way the method call works between versions, and the documentation is not particularly clear, nor could I find any reference to the paramter type being changed anywhere.\n. ",
    "straumer": "I want to know this too. I have a lot of images on which I had createImageHitRegion before.\n. To add to that, I am using GSAP to tween groups containing groups containing the images. But when I cache an image and then tween an ancestor group, the image does not follow along. I am tweening the opacity in my case. It would help if I wouldn't have to cache it at all. Then it wouldn't be an issue.\n. This is exactly what I needed! I tested and it works nicely.\n. I want to know this too. I have a lot of images on which I had createImageHitRegion before.\n. To add to that, I am using GSAP to tween groups containing groups containing the images. But when I cache an image and then tween an ancestor group, the image does not follow along. I am tweening the opacity in my case. It would help if I wouldn't have to cache it at all. Then it wouldn't be an issue.\n. This is exactly what I needed! I tested and it works nicely.\n. ",
    "YiuriV": "edit: this problem seems to occur only on laptops with Windows 8. Has anyone else problems with using Kineticjs on Windows 8?\n. edit: this problem seems to occur only on laptops with Windows 8. Has anyone else problems with using Kineticjs on Windows 8?\n. ",
    "ckosmowski": "Okay, thanks for the information so far. But if i'm having the 1px version and i manage the lines to be exactly on the real pixels position so i get 1px non-antialiased lines. Shouldn't they be fireing events correctly?\n. Is there a way of making a shape \"transparent\" for click events so that click events will fire on the shape behing it. That would help at least in my case.\n. I just made it work for me with setting hitFunc: function() {} on the lines. That seems to make sure that the lines will have no hit region and the events gets fired on the objects behind them. But listening: false seems to be a better approach since i can set it on the group. Since the lines in my case are nothing the user should interact with it will work for me. If i would want the user to interact i would possibly have to redefine the hitFunc?\n. Okay, thanks for the information so far. But if i'm having the 1px version and i manage the lines to be exactly on the real pixels position so i get 1px non-antialiased lines. Shouldn't they be fireing events correctly?\n. Is there a way of making a shape \"transparent\" for click events so that click events will fire on the shape behing it. That would help at least in my case.\n. I just made it work for me with setting hitFunc: function() {} on the lines. That seems to make sure that the lines will have no hit region and the events gets fired on the objects behind them. But listening: false seems to be a better approach since i can set it on the group. Since the lines in my case are nothing the user should interact with it will work for me. If i would want the user to interact i would possibly have to redefine the hitFunc?\n. ",
    "toomuchpete": "This is, I think, the same issue:\n\nIn both Chrome, Firefox, and Safari on OSX 10.8.5, KineticJS v5.1.0 sets the pixelRatio to 1 instead of 2, even though window.devicePixelRatio is 2. Manually setting the pixel ratio on the canvas sharpens up rendering\n. This is, I think, the same issue:\n\nIn both Chrome, Firefox, and Safari on OSX 10.8.5, KineticJS v5.1.0 sets the pixelRatio to 1 instead of 2, even though window.devicePixelRatio is 2. Manually setting the pixel ratio on the canvas sharpens up rendering\n. ",
    "Pe443": "Hi,\n\nI think it is the frequency when events fire ups.\n\nOn my \"slow\" Android I make the following and it speeds up the dragging behavior a lot.\n\n```\nmoveStage(mousePos) {\n    ... code  ...\n    this._mainStage.draggable(false);\n    setTimeout(() => {\n        this._mainStage.draggable(true);\n    }, 50);\n}\n```\n. Hi,\n\nI think it is the frequency when events fire ups.\n\nOn my \"slow\" Android I make the following and it speeds up the dragging behavior a lot.\n\n```\nmoveStage(mousePos) {\n    ... code  ...\n    this._mainStage.draggable(false);\n    setTimeout(() => {\n        this._mainStage.draggable(true);\n    }, 50);\n}\n```\n. ",
    "rainchen": "@lavrton THANKS,\nI also figure out a solution:\n\n``` coffee\n  # for checking a node is visible for the stage or not\n  isOutOfState: (node)->\n    isInsideState = ((node.x() - node.radius()) < @stage.width() && (node.y() - node.radius()) < @stage.height())\n    !isInsideState\n```\n. @lavrton THANKS,\nI also figure out a solution:\n\n``` coffee\n  # for checking a node is visible for the stage or not\n  isOutOfState: (node)->\n    isInsideState = ((node.x() - node.radius()) < @stage.width() && (node.y() - node.radius()) < @stage.height())\n    !isInsideState\n```\n. ",
    "dtritus": "Hi,\nI can confirm this, have the same issue with Chrome 32-33.\n. http://jsbin.com/hequhiya/2/edit\n\nMove mouse to the rectangle, than start click it without moving mouse.\nIn Chrome 33.0.1750.146 I'm getting 'mousemove' event for each click, and also sometimes i'm getting a few 'mousemove' events without 'click' event.\nIn Firefox 27.0.1 i'm getting only 'click' event without any 'mousemove' events.\n\nP.S.: I'm using Windows 7.\n. Thanks for the trick.\nBut it can help only if I need to prevent false 'mousemove' events.\nWhat to do with missed click event?\nAlso KineticJS fires false 'dragstart' and 'dragend' events.\nSee: http://jsbin.com/hequhiya/7/edit\n\nSo, I think fix should be inside KineticJS, until it fixed in webkit.\n. Hi,\nI can confirm this, have the same issue with Chrome 32-33.\n. http://jsbin.com/hequhiya/2/edit\n\nMove mouse to the rectangle, than start click it without moving mouse.\nIn Chrome 33.0.1750.146 I'm getting 'mousemove' event for each click, and also sometimes i'm getting a few 'mousemove' events without 'click' event.\nIn Firefox 27.0.1 i'm getting only 'click' event without any 'mousemove' events.\n\nP.S.: I'm using Windows 7.\n. Thanks for the trick.\nBut it can help only if I need to prevent false 'mousemove' events.\nWhat to do with missed click event?\nAlso KineticJS fires false 'dragstart' and 'dragend' events.\nSee: http://jsbin.com/hequhiya/7/edit\n\nSo, I think fix should be inside KineticJS, until it fixed in webkit.\n. ",
    "kishore25kumar": "Thank. It solved my issue :)\n. Thank. It solved my issue :)\n. ",
    "NickPadilla": "Hello!  \n\nCan we get the latest version pushed out to bower?  I'd really like to start testing the mobile improvements.  Let me know!  Also, quick question - the release schedule showed 5.1.0 but it looks like it was released as 5.0.2; same release different name or different release?\n\nThanks for all the hard work!\n. @lavrton bump..\n. Hey guys!  Thanks so much for responding so quickly!  \n\nIt does seem you guys were right about my logic, it does work as expected.  The problem was with an event on dragend - it was updating the line.  This was where the problem was.  I'll close out this issue, just working it through on JSFiddle I was able to pin point the problem.  I'll have to get in the habit of using that app more often - thanks for the direction!  Here is a working fiddle that does what I was talking about successfully. \n\nhttp://jsfiddle.net/ej2BH/\n. Hello!  \n\nCan we get the latest version pushed out to bower?  I'd really like to start testing the mobile improvements.  Let me know!  Also, quick question - the release schedule showed 5.1.0 but it looks like it was released as 5.0.2; same release different name or different release?\n\nThanks for all the hard work!\n. @lavrton bump..\n. Hey guys!  Thanks so much for responding so quickly!  \n\nIt does seem you guys were right about my logic, it does work as expected.  The problem was with an event on dragend - it was updating the line.  This was where the problem was.  I'll close out this issue, just working it through on JSFiddle I was able to pin point the problem.  I'll have to get in the habit of using that app more often - thanks for the direction!  Here is a working fiddle that does what I was talking about successfully. \n\nhttp://jsfiddle.net/ej2BH/\n. ",
    "pbear": "Ah! Makes sense. I can call the operations on the layers now if they're added first.\n\nBut is there a reason I can call **moveToBottom()** on a Circle right after adding it to a layer (and before the layers are added to the stage, and it works; but not if I call it after all that? Conceivably I might want to change index order arbitrarily (as I have in mind for a certain application) after all has been added. \n\nFor instance, if I call this after adding the layers to the stage:\n**layerTwo.moveUp();**\n**circleTwoMiddle.moveUp();**\n... the layer changes, but the middle circle stays in the middle. \n. gah, **layerTwo.draw();** to update... move along, move along... :)\n. Ah! Makes sense. I can call the operations on the layers now if they're added first.\n\nBut is there a reason I can call **moveToBottom()** on a Circle right after adding it to a layer (and before the layers are added to the stage, and it works; but not if I call it after all that? Conceivably I might want to change index order arbitrarily (as I have in mind for a certain application) after all has been added. \n\nFor instance, if I call this after adding the layers to the stage:\n**layerTwo.moveUp();**\n**circleTwoMiddle.moveUp();**\n... the layer changes, but the middle circle stays in the middle. \n. gah, **layerTwo.draw();** to update... move along, move along... :)\n. ",
    "iskiselev": "I tried to cache group using `.cache()` method and was unable to cache it with scale. Here is an example: http://jsfiddle.net/qDPq8/1/. At the same time, I was able to cache just Rect with proper scale: http://jsfiddle.net/qDPq8/2/.\nIs it possible to solve this problem with current KineticJS? Looks like in #763 was suggestion to add quality param to cache settings.\n. I tried to cache group using `.cache()` method and was unable to cache it with scale. Here is an example: http://jsfiddle.net/qDPq8/1/. At the same time, I was able to cache just Rect with proper scale: http://jsfiddle.net/qDPq8/2/.\nIs it possible to solve this problem with current KineticJS? Looks like in #763 was suggestion to add quality param to cache settings.\n. ",
    "FireMuse": "I will.  Got to extract it as an example.\n. Of course it works now that I extracted it to a fiddle: http://jsfiddle.net/CvE7e/\n. I will.  Got to extract it as an example.\n. Of course it works now that I extracted it to a fiddle: http://jsfiddle.net/CvE7e/\n. ",
    "flxf": "I'm running OSX 10.7 and Chrome. Did some more digging, appears to reproduce always for me when running locally?\n. I'm running OSX 10.7 and Chrome. Did some more digging, appears to reproduce always for me when running locally?\n. ",
    "larsgk": "I'll try to get it \"not working\" later today :) - I am using a group -\nmaybe that's where the problem is coming from? (it's part of a larger\nsystem that we didn't release yet - so can't publish the code ... but I can\nsend it in PM to you if you'd like to see?)\n\nOn Tue, Mar 11, 2014 at 10:42 AM, Anton Lavrenov\nnotifications@github.comwrote:\n\n> Can you provide more information with fiddle? Adding new node while\n> dragging http://jsbin.com/goxon/1/edit\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/850#issuecomment-37277738\n> .\n. Ok - I will try\nOn Mar 11, 2014 11:53 AM, \"Anton Lavrenov\" notifications@github.com wrote:\n\n> Why not. But it is will but much easier if you will localize the problem\n> and provide small demo.\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/850#issuecomment-37283261\n> .\n. That was fast :) - I'll pull and try\n. I'll try to get it \"not working\" later today :) - I am using a group -\nmaybe that's where the problem is coming from? (it's part of a larger\nsystem that we didn't release yet - so can't publish the code ... but I can\nsend it in PM to you if you'd like to see?)\n\nOn Tue, Mar 11, 2014 at 10:42 AM, Anton Lavrenov\nnotifications@github.comwrote:\n\n> Can you provide more information with fiddle? Adding new node while\n> dragging http://jsbin.com/goxon/1/edit\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/850#issuecomment-37277738\n> .\n. Ok - I will try\nOn Mar 11, 2014 11:53 AM, \"Anton Lavrenov\" notifications@github.com wrote:\n\n> Why not. But it is will but much easier if you will localize the problem\n> and provide small demo.\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/850#issuecomment-37283261\n> .\n. That was fast :) - I'll pull and try\n. ",
    "zhouzian": "I encountered the same issue in both 5.0.2 and 5.1.0. The problem is related to fill, stroke and shadow attributes.\nThe canvas size is 1920*1080 as a testing case. Only 2 circles on the canvas.\nThe following attributes are toggled: \n1. fill, stroke, shadow  => very slow\n2. fill, stroke => fast\n3. fill, shadow => fast\n4. stroke, shadow => fast\nIn the source code, I commented out  _applyShadow() to make the canvas smooth.\n. I encountered the same issue in both 5.0.2 and 5.1.0. The problem is related to fill, stroke and shadow attributes.\nThe canvas size is 1920*1080 as a testing case. Only 2 circles on the canvas.\nThe following attributes are toggled: \n1. fill, stroke, shadow  => very slow\n2. fill, stroke => fast\n3. fill, shadow => fast\n4. stroke, shadow => fast\nIn the source code, I commented out  _applyShadow() to make the canvas smooth.\n. ",
    "wedow": "I'm sure this will drive me mad at some point... it seems to be some sort of cross-browser bug which, once it appears, ties itself to a domain.  localhost:8080 triggers the bug but 127.0.0.1:8080 does not.  \n\nSo it doesn't seem related to KineticJS unless Kinetic uses some super secret cookie/cache/local storage that I'm not aware of.\n. I'm sure this will drive me mad at some point... it seems to be some sort of cross-browser bug which, once it appears, ties itself to a domain.  localhost:8080 triggers the bug but 127.0.0.1:8080 does not.  \n\nSo it doesn't seem related to KineticJS unless Kinetic uses some super secret cookie/cache/local storage that I'm not aware of.\n. ",
    "maciej-czekala": "Thanks for the replay. All make sense. But it cause some problems for me. What I'm trying to do is to creat button with states (normal, over, pressed) and sprite looks like the best way to do so but I have to change width on demand. Any ideas on how to work around it?\n\nApart from that, for me it could work in a way that you change width and height of each frame, so that would solve the general problem with different sizes of images for each frame.\n. Can't define properly what will be the final outcome. If I have image 123x21px and want to make it 134x22 it will be very hard to do so if not impossible. \n\nIt's a specific situation I know.\n. Maybe you are right.... I'll check it out :)\n. Thanks for the replay. All make sense. But it cause some problems for me. What I'm trying to do is to creat button with states (normal, over, pressed) and sprite looks like the best way to do so but I have to change width on demand. Any ideas on how to work around it?\n\nApart from that, for me it could work in a way that you change width and height of each frame, so that would solve the general problem with different sizes of images for each frame.\n. Can't define properly what will be the final outcome. If I have image 123x21px and want to make it 134x22 it will be very hard to do so if not impossible. \n\nIt's a specific situation I know.\n. Maybe you are right.... I'll check it out :)\n. ",
    "JercSi": "Click on this url: http://www.mojekarte.si/en/basket/add/84766 This will add you event to the basket and show the venue. Then drag the venue and it will return you error.\n\nSource code files are:\nhttp://www.mojekarte.si/js/venue/stage.js (Venue - Stage)\nhttp://www.mojekarte.si/js/venue/venue-min.js?v=201403135 (Venue - minified lib)\nhttp://www.mojekarte.si/js/venue/kinetic-v5.0.1.min.js (KineticJS)\n. I checked your demo.\nI replicated a bug: http://jsbin.com/cetosabo/1/edit (i hope link is ok) if not, then just set on the Stage: draggable: true and remove from layers draggable\n. Error is not returned, but the result is worse. On dragstart my venue is probably 1.5x larger. on dragend it's back normal.\nI think something similar is reported here: #836 \n\nExample (http://jsbin.com/cetosabo/3/edit) was updated with two new lines:\nstage.setScaleX(1.5);\nstage.setScaleY(1.5);\n. Problem solved on my development version.\nBut the dragging is still very slow my phone. Is there any other solution how to speed up dragging?\n. Then this \"bug\" is present since version 4 and noone didn't notice it? Or maybe I don't understand the meaning of .removeChildren() on the stage.\n\nIf you call stage.getChildren() after stage.removeChildren() you get empty array. So children (layers) of the stage were removed.\n. Click on this url: http://www.mojekarte.si/en/basket/add/84766 This will add you event to the basket and show the venue. Then drag the venue and it will return you error.\n\nSource code files are:\nhttp://www.mojekarte.si/js/venue/stage.js (Venue - Stage)\nhttp://www.mojekarte.si/js/venue/venue-min.js?v=201403135 (Venue - minified lib)\nhttp://www.mojekarte.si/js/venue/kinetic-v5.0.1.min.js (KineticJS)\n. I checked your demo.\nI replicated a bug: http://jsbin.com/cetosabo/1/edit (i hope link is ok) if not, then just set on the Stage: draggable: true and remove from layers draggable\n. Error is not returned, but the result is worse. On dragstart my venue is probably 1.5x larger. on dragend it's back normal.\nI think something similar is reported here: #836 \n\nExample (http://jsbin.com/cetosabo/3/edit) was updated with two new lines:\nstage.setScaleX(1.5);\nstage.setScaleY(1.5);\n. Problem solved on my development version.\nBut the dragging is still very slow my phone. Is there any other solution how to speed up dragging?\n. Then this \"bug\" is present since version 4 and noone didn't notice it? Or maybe I don't understand the meaning of .removeChildren() on the stage.\n\nIf you call stage.getChildren() after stage.removeChildren() you get empty array. So children (layers) of the stage were removed.\n. ",
    "Vintage-2212": "I am also an Israeli using your KineticJS work, and as hillai said, it's fantastic, but I also noticed the missing attribute, and I agree that it would be very helpful to have it.\nThanks you very much\n. I am also an Israeli using your KineticJS work, and as hillai said, it's fantastic, but I also noticed the missing attribute, and I agree that it would be very helpful to have it.\nThanks you very much\n. ",
    "vmichnowicz": "Does [this](http://stackoverflow.com/questions/8961636/html5-canvas-filltext-with-right-to-left-string) work?\n\n```\n<canvas dir=\"rtl\">\n```\n. Yeah, it should be merged in. But it was after the official 5.1.0 build. The [latest build](https://raw.githubusercontent.com/ericdrowell/KineticJS/master/kinetic.min.js) should have it.\n. To give you a rough idea of the performance improvement here are two JS Fiddles that I have tested on my Mac:\n\n**KineticJS 5.1.0**\n\nhttp://jsfiddle.net/A3X5h/1/\n\n~2500 ms in Chrome 34.0.1847.131\n~40 ms Firefox 29.0.1\n~225 ms Safari 7.0.3\n\n**KineticJS with this pull request**\n\nhttp://jsfiddle.net/cJbZS/\n\n~50 ms Chrome 34.0.1847.131\n~20 ms Firefox 29.0.1\n~140 ms Safari 7.0.3\n\nThe Firefox result is surprising because Firefox on Windows was really lagging with my application when calls to `getIntersection` were made. Maybe there are some Mac optimizations in place. I'll have to look into this. I'll look into those two points you mentioned above.\n. I updated the pull request with [this commit](https://github.com/vmichnowicz/KineticJS/commit/70564cc1e4928df406295f2663ffe508bc93b6ad). I believe this resolves your first point.\n\nI don't quite understand your second point, however. I am new to the inner workings of KineticJS, but I think I am already achieving the same effect. The `getImageData` cache should only be created after the first `getIntersection` call after a call to `drawHit`.\n. What issues exactly are you seeing with the cached image data? My app has around 7 layers and the stage is about 1300 x 500 px. The caching has made things way faster and I have not noticed any side affects so far.\n. Does [this](http://stackoverflow.com/questions/8961636/html5-canvas-filltext-with-right-to-left-string) work?\n\n```\n<canvas dir=\"rtl\">\n```\n. Yeah, it should be merged in. But it was after the official 5.1.0 build. The [latest build](https://raw.githubusercontent.com/ericdrowell/KineticJS/master/kinetic.min.js) should have it.\n. To give you a rough idea of the performance improvement here are two JS Fiddles that I have tested on my Mac:\n\n**KineticJS 5.1.0**\n\nhttp://jsfiddle.net/A3X5h/1/\n\n~2500 ms in Chrome 34.0.1847.131\n~40 ms Firefox 29.0.1\n~225 ms Safari 7.0.3\n\n**KineticJS with this pull request**\n\nhttp://jsfiddle.net/cJbZS/\n\n~50 ms Chrome 34.0.1847.131\n~20 ms Firefox 29.0.1\n~140 ms Safari 7.0.3\n\nThe Firefox result is surprising because Firefox on Windows was really lagging with my application when calls to `getIntersection` were made. Maybe there are some Mac optimizations in place. I'll have to look into this. I'll look into those two points you mentioned above.\n. I updated the pull request with [this commit](https://github.com/vmichnowicz/KineticJS/commit/70564cc1e4928df406295f2663ffe508bc93b6ad). I believe this resolves your first point.\n\nI don't quite understand your second point, however. I am new to the inner workings of KineticJS, but I think I am already achieving the same effect. The `getImageData` cache should only be created after the first `getIntersection` call after a call to `drawHit`.\n. What issues exactly are you seeing with the cached image data? My app has around 7 layers and the stage is about 1300 x 500 px. The caching has made things way faster and I have not noticed any side affects so far.\n. ",
    "hillai": "Not with KineticJS it doesn't.\n. Not with KineticJS it doesn't.\n. ",
    "crazyoung": "orginal code\n\nstage.toDataURL({\ncallback: function (dataUrl) {\nalert(dataUrl)\n});\n\nI want to add error\n\nstage.toDataURL({\ncallback: function (dataUrl) {\nalert(dataUrl)\n},\nerror:function(er)\n{ alert(er)}});\n\nHow to add code to an error in the kinetic part\n\nexample\n$.ajax({\n        type: 'POST',\n        cache: false,\n        url:url,\n        contentType: 'application/json; charset=utf-8',  \n        success: function (myresult) {  \n        },\n        error: function (xhr, textStatus, error) {\n            console.log(xhr.statusText + '_' + textStatus + '_' + error);\n\n```\n    }\n});\n```\n. emmm ok thank you\n. orginal code\n\nstage.toDataURL({\ncallback: function (dataUrl) {\nalert(dataUrl)\n});\n\nI want to add error\n\nstage.toDataURL({\ncallback: function (dataUrl) {\nalert(dataUrl)\n},\nerror:function(er)\n{ alert(er)}});\n\nHow to add code to an error in the kinetic part\n\nexample\n$.ajax({\n        type: 'POST',\n        cache: false,\n        url:url,\n        contentType: 'application/json; charset=utf-8',  \n        success: function (myresult) {  \n        },\n        error: function (xhr, textStatus, error) {\n            console.log(xhr.statusText + '_' + textStatus + '_' + error);\n\n```\n    }\n});\n```\n. emmm ok thank you\n. ",
    "SaladDressing": "In the example http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-an-image-tutorial/ where should I best place the \"Kinetic.pixelRatio = 1\" code?\n. Unless I'm not coding it correctly, \"Kinetic.pixelRatio = 1\" changes nothing to the performance issue described above. I set the pixelRatio=5 just as a test and got the app to crawl on my workstation as well as vector art without anti-aliasing.\n. Yes, that's where I placed it.\n. I have now achieved a consistent frame rate of roughly 30 to 40 fps on both mobile and desktop modes on the Samsung tablet mentioned above.\n\nThe big change came from restructuring my game code which erroneously called init() several times (about 6 times) instead of just once, each time instantiating the stage and the multiple images.  I do also use \"Kinetic.pixelRatio = 1\" at the top of the code and a \"Kinetic.FastLayer()\" for my static background artwork.\n\nThank you for your time spent on this problem, apologies for my ignorance, and thank you for KineticJS!\n. That may be so, but I'm asking how to implement it correctly, please. I have no example to work from.\n\nShould I then explicitly set the layer's dimensions before trying to cache it? I imagined that as images are added to a layer it's dimensions automatically increase.\n. Aaah... OK, I understand. Thank you for explaining it and for the code snippet to clarify!\n. Thanks again!\n\nIt's working now!  Here's what I did...\n\n```\nTHUMBlayer.brightness(-0.2);\nTHUMBlayer.blurRadius(20);\nTHUMBlayer.cache({\n    width : stage.getWidth(),\n    height : stage.getHeight()\n});\nTHUMBlayer.filters([Kinetic.Filters.Blur, Kinetic.Filters.Brighten]);\nTHUMBlayer.draw();\n```\n. In the example http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-an-image-tutorial/ where should I best place the \"Kinetic.pixelRatio = 1\" code?\n. Unless I'm not coding it correctly, \"Kinetic.pixelRatio = 1\" changes nothing to the performance issue described above. I set the pixelRatio=5 just as a test and got the app to crawl on my workstation as well as vector art without anti-aliasing.\n. Yes, that's where I placed it.\n. I have now achieved a consistent frame rate of roughly 30 to 40 fps on both mobile and desktop modes on the Samsung tablet mentioned above.\n\nThe big change came from restructuring my game code which erroneously called init() several times (about 6 times) instead of just once, each time instantiating the stage and the multiple images.  I do also use \"Kinetic.pixelRatio = 1\" at the top of the code and a \"Kinetic.FastLayer()\" for my static background artwork.\n\nThank you for your time spent on this problem, apologies for my ignorance, and thank you for KineticJS!\n. That may be so, but I'm asking how to implement it correctly, please. I have no example to work from.\n\nShould I then explicitly set the layer's dimensions before trying to cache it? I imagined that as images are added to a layer it's dimensions automatically increase.\n. Aaah... OK, I understand. Thank you for explaining it and for the code snippet to clarify!\n. Thanks again!\n\nIt's working now!  Here's what I did...\n\n```\nTHUMBlayer.brightness(-0.2);\nTHUMBlayer.blurRadius(20);\nTHUMBlayer.cache({\n    width : stage.getWidth(),\n    height : stage.getHeight()\n});\nTHUMBlayer.filters([Kinetic.Filters.Blur, Kinetic.Filters.Brighten]);\nTHUMBlayer.draw();\n```\n. ",
    "tstillwater": "With a totally fresh install and project (KineticJS version 5.1.0) the pixel ratio trick saved me from a very slow mobile redraw on a project with a retina resolution background png and an animated png in a second layer on top. Thanks!\n. With a totally fresh install and project (KineticJS version 5.1.0) the pixel ratio trick saved me from a very slow mobile redraw on a project with a retina resolution background png and an animated png in a second layer on top. Thanks!\n. ",
    "sahar19": "Edit: I tried this http://jsfiddle.net/GLFxF/16/\nI can move both images+ the rect, but the drop target is not the right layer, it's anywhere on the canvas. \nIssues:\n- cloning has a very weird behavior,\n- drop target,\n- grouping the objects, etc...\n  HELP me.\n. Edit: I tried this http://jsfiddle.net/GLFxF/16/\nI can move both images+ the rect, but the drop target is not the right layer, it's anywhere on the canvas. \nIssues:\n- cloning has a very weird behavior,\n- drop target,\n- grouping the objects, etc...\n  HELP me.\n. ",
    "SivaDCI": "Hi Iavrton,\n\n Thank you for your reply...\n. Hi Iavrton,\n\ncould you plz check with following value for json and load into container \n\nI am getting the same error again\n\njson value is\n\n\"{\\\"attrs\\\":{\\\"width\\\":747,\\\"height\\\":450},\\\"className\\\":\\\"Stage\\\",\\\"children\\\":[{\\\"attrs\\\":{},\\\"className\\\":\\\"Layer\\\",\\\"children\\\":[{\\\"attrs\\\":{\\\"id\\\":\\\"imgG\\\"},\\\"className\\\":\\\"Group\\\",\\\"children\\\":[{\\\"attrs\\\":{\\\"x\\\":10,\\\"y\\\":10,\\\"width\\\":747,\\\"height\\\":450},\\\"className\\\":\\\"Image\\\"}]}]},{\\\"attrs\\\":{},\\\"className\\\":\\\"Layer\\\",\\\"children\\\":[{\\\"attrs\\\":{\\\"x\\\":310,\\\"y\\\":68,\\\"draggable\\\":true,\\\"id\\\":\\\"dvg\\\"},\\\"className\\\":\\\"Kinetic.Group\\\",\\\"children\\\":[{\\\"attrs\\\":{\\\"x\\\":-31,\\\"y\\\":-18,\\\"width\\\":298,\\\"height\\\":192,\\\"fill\\\":\\\"#FF80AA\\\",\\\"stroke\\\":\\\"#29FF4C\\\",\\\"opacity\\\":0.2,\\\"name\\\":\\\"rect\\\",\\\"listening\\\":true},\\\"className\\\":\\\"Rect\\\"},{\\\"attrs\\\":{\\\"x\\\":267,\\\"y\\\":-18,\\\"stroke\\\":\\\"#666\\\",\\\"fill\\\":\\\"#ddd\\\",\\\"radius\\\":8,\\\"name\\\":\\\"topRight\\\",\\\"opacity\\\":0.8,\\\"draggable\\\":true,\\\"dragOnTop\\\":false,\\\"id\\\":\\\"rect\\\",\\\"visible\\\":false},\\\"className\\\":\\\"Circle\\\"},{\\\"attrs\\\":{\\\"x\\\":-31,\\\"y\\\":174,\\\"stroke\\\":\\\"#666\\\",\\\"fill\\\":\\\"#ddd\\\",\\\"radius\\\":8,\\\"name\\\":\\\"bottomLeft\\\",\\\"opacity\\\":0.8,\\\"draggable\\\":true,\\\"dragOnTop\\\":false,\\\"id\\\":\\\"rect\\\",\\\"visible\\\":false},\\\"className\\\":\\\"Circle\\\"},{\\\"attrs\\\":{\\\"x\\\":267,\\\"y\\\":174,\\\"stroke\\\":\\\"#666\\\",\\\"fill\\\":\\\"#ddd\\\",\\\"radius\\\":8,\\\"name\\\":\\\"bottomRight\\\",\\\"opacity\\\":0.8,\\\"draggable\\\":true,\\\"dragOnTop\\\":false,\\\"id\\\":\\\"rect\\\",\\\"visible\\\":false},\\\"className\\\":\\\"Circle\\\"},{\\\"attrs\\\":{\\\"x\\\":-31,\\\"y\\\":-18,\\\"stroke\\\":\\\"#666\\\",\\\"fill\\\":\\\"#ddd\\\",\\\"radius\\\":8,\\\"name\\\":\\\"topLeft\\\",\\\"opacity\\\":0.8,\\\"draggable\\\":true,\\\"dragOnTop\\\":false,\\\"id\\\":\\\"rect\\\",\\\"visible\\\":false},\\\"className\\\":\\\"Circle\\\"}]},{\\\"attrs\\\":{\\\"x\\\":143,\\\"y\\\":117,\\\"draggable\\\":true,\\\"id\\\":\\\"cirG\\\"},\\\"className\\\":\\\"Kinetic.Group\\\",\\\"children\\\":[{\\\"attrs\\\":{\\\"radius\\\":56,\\\"fill\\\":\\\"#FF80AA\\\",\\\"stroke\\\":\\\"#29FF4C\\\",\\\"opacity\\\":0.3,\\\"strokeWidth\\\":1,\\\"name\\\":\\\"circle\\\"},\\\"className\\\":\\\"Circle\\\"},{\\\"attrs\\\":{\\\"stroke\\\":\\\"#666\\\",\\\"fill\\\":\\\"#ddd\\\",\\\"radius\\\":8,\\\"name\\\":\\\"circleradius\\\",\\\"opacity\\\":0.8,\\\"draggable\\\":true,\\\"dragOnTop\\\":false,\\\"id\\\":\\\"circle\\\",\\\"visible\\\":false},\\\"className\\\":\\\"Circle\\\"}]}]},{\\\"attrs\\\":{},\\\"className\\\":\\\"Layer\\\",\\\"children\\\":[{\\\"attrs\\\":{\\\"x\\\":310,\\\"y\\\":68,\\\"draggable\\\":true,\\\"id\\\":\\\"dvg\\\"},\\\"className\\\":\\\"Kinetic.Group\\\",\\\"children\\\":[{\\\"attrs\\\":{\\\"x\\\":-31,\\\"y\\\":-18,\\\"width\\\":298,\\\"height\\\":192,\\\"fill\\\":\\\"#FF80AA\\\",\\\"stroke\\\":\\\"#29FF4C\\\",\\\"opacity\\\":0.2,\\\"name\\\":\\\"rect\\\",\\\"listening\\\":true},\\\"className\\\":\\\"Rect\\\"},{\\\"attrs\\\":{\\\"x\\\":267,\\\"y\\\":-18,\\\"stroke\\\":\\\"#666\\\",\\\"fill\\\":\\\"#ddd\\\",\\\"radius\\\":8,\\\"name\\\":\\\"topRight\\\",\\\"opacity\\\":0.8,\\\"draggable\\\":true,\\\"dragOnTop\\\":false,\\\"id\\\":\\\"rect\\\",\\\"visible\\\":false},\\\"className\\\":\\\"Circle\\\"},{\\\"attrs\\\":{\\\"x\\\":-31,\\\"y\\\":174,\\\"stroke\\\":\\\"#666\\\",\\\"fill\\\":\\\"#ddd\\\",\\\"radius\\\":8,\\\"name\\\":\\\"bottomLeft\\\",\\\"opacity\\\":0.8,\\\"draggable\\\":true,\\\"dragOnTop\\\":false,\\\"id\\\":\\\"rect\\\",\\\"visible\\\":false},\\\"className\\\":\\\"Circle\\\"},{\\\"attrs\\\":{\\\"x\\\":267,\\\"y\\\":174,\\\"stroke\\\":\\\"#666\\\",\\\"fill\\\":\\\"#ddd\\\",\\\"radius\\\":8,\\\"name\\\":\\\"bottomRight\\\",\\\"opacity\\\":0.8,\\\"draggable\\\":true,\\\"dragOnTop\\\":false,\\\"id\\\":\\\"rect\\\",\\\"visible\\\":false},\\\"className\\\":\\\"Circle\\\"},{\\\"attrs\\\":{\\\"x\\\":-31,\\\"y\\\":-18,\\\"stroke\\\":\\\"#666\\\",\\\"fill\\\":\\\"#ddd\\\",\\\"radius\\\":8,\\\"name\\\":\\\"topLeft\\\",\\\"opacity\\\":0.8,\\\"draggable\\\":true,\\\"dragOnTop\\\":false,\\\"id\\\":\\\"rect\\\",\\\"visible\\\":false},\\\"className\\\":\\\"Circle\\\"}]},{\\\"attrs\\\":{\\\"x\\\":143,\\\"y\\\":117,\\\"draggable\\\":true,\\\"id\\\":\\\"cirG\\\"},\\\"className\\\":\\\"Kinetic.Group\\\",\\\"children\\\":[{\\\"attrs\\\":{\\\"radius\\\":56,\\\"fill\\\":\\\"#FF80AA\\\",\\\"stroke\\\":\\\"#29FF4C\\\",\\\"opacity\\\":0.3,\\\"strokeWidth\\\":1,\\\"name\\\":\\\"circle\\\"},\\\"className\\\":\\\"Circle\\\"},{\\\"attrs\\\":{\\\"stroke\\\":\\\"#666\\\",\\\"fill\\\":\\\"#ddd\\\",\\\"radius\\\":8,\\\"name\\\":\\\"circleradius\\\",\\\"opacity\\\":0.8,\\\"draggable\\\":true,\\\"dragOnTop\\\":false,\\\"id\\\":\\\"circle\\\",\\\"visible\\\":false},\\\"className\\\":\\\"Circle\\\"}]}]}]}\"\n. I got my Issue Fixed.\nThank you lavrton for your valuable guidance.\n\nBY \nSiva \n. okay ericdrowell thanks for your suggestion and i got solution too(\n http://stackoverflow.com/questions/22861589/how-to-resize-the-line-using-kineticjs).\n. Recently i have identified reason of this problem. It happens when browser zoom level lesser than 100% or higher then 100%. If lesser than 100% shows view like above image, if zoom level higher means it happens but not visible. This problem won't happen when browser zoom level is 100%.\nIs there any possibility to solve this problem?\n. Hi All,\n\nI am waiting for your valuable suggestion, please help me to solve this.\n. Hi all,\nI got solution for this problem,\nI have changed devicePixelRatio = window.devicePixelRatio || 1, this line to devicePixelRatio = 1, in kinetic-v5.0.1.js file now its working good for me. \n. Hi Iavrton,\n\n Thank you for your reply...\n. Hi Iavrton,\n\ncould you plz check with following value for json and load into container \n\nI am getting the same error again\n\njson value is\n\n\"{\\\"attrs\\\":{\\\"width\\\":747,\\\"height\\\":450},\\\"className\\\":\\\"Stage\\\",\\\"children\\\":[{\\\"attrs\\\":{},\\\"className\\\":\\\"Layer\\\",\\\"children\\\":[{\\\"attrs\\\":{\\\"id\\\":\\\"imgG\\\"},\\\"className\\\":\\\"Group\\\",\\\"children\\\":[{\\\"attrs\\\":{\\\"x\\\":10,\\\"y\\\":10,\\\"width\\\":747,\\\"height\\\":450},\\\"className\\\":\\\"Image\\\"}]}]},{\\\"attrs\\\":{},\\\"className\\\":\\\"Layer\\\",\\\"children\\\":[{\\\"attrs\\\":{\\\"x\\\":310,\\\"y\\\":68,\\\"draggable\\\":true,\\\"id\\\":\\\"dvg\\\"},\\\"className\\\":\\\"Kinetic.Group\\\",\\\"children\\\":[{\\\"attrs\\\":{\\\"x\\\":-31,\\\"y\\\":-18,\\\"width\\\":298,\\\"height\\\":192,\\\"fill\\\":\\\"#FF80AA\\\",\\\"stroke\\\":\\\"#29FF4C\\\",\\\"opacity\\\":0.2,\\\"name\\\":\\\"rect\\\",\\\"listening\\\":true},\\\"className\\\":\\\"Rect\\\"},{\\\"attrs\\\":{\\\"x\\\":267,\\\"y\\\":-18,\\\"stroke\\\":\\\"#666\\\",\\\"fill\\\":\\\"#ddd\\\",\\\"radius\\\":8,\\\"name\\\":\\\"topRight\\\",\\\"opacity\\\":0.8,\\\"draggable\\\":true,\\\"dragOnTop\\\":false,\\\"id\\\":\\\"rect\\\",\\\"visible\\\":false},\\\"className\\\":\\\"Circle\\\"},{\\\"attrs\\\":{\\\"x\\\":-31,\\\"y\\\":174,\\\"stroke\\\":\\\"#666\\\",\\\"fill\\\":\\\"#ddd\\\",\\\"radius\\\":8,\\\"name\\\":\\\"bottomLeft\\\",\\\"opacity\\\":0.8,\\\"draggable\\\":true,\\\"dragOnTop\\\":false,\\\"id\\\":\\\"rect\\\",\\\"visible\\\":false},\\\"className\\\":\\\"Circle\\\"},{\\\"attrs\\\":{\\\"x\\\":267,\\\"y\\\":174,\\\"stroke\\\":\\\"#666\\\",\\\"fill\\\":\\\"#ddd\\\",\\\"radius\\\":8,\\\"name\\\":\\\"bottomRight\\\",\\\"opacity\\\":0.8,\\\"draggable\\\":true,\\\"dragOnTop\\\":false,\\\"id\\\":\\\"rect\\\",\\\"visible\\\":false},\\\"className\\\":\\\"Circle\\\"},{\\\"attrs\\\":{\\\"x\\\":-31,\\\"y\\\":-18,\\\"stroke\\\":\\\"#666\\\",\\\"fill\\\":\\\"#ddd\\\",\\\"radius\\\":8,\\\"name\\\":\\\"topLeft\\\",\\\"opacity\\\":0.8,\\\"draggable\\\":true,\\\"dragOnTop\\\":false,\\\"id\\\":\\\"rect\\\",\\\"visible\\\":false},\\\"className\\\":\\\"Circle\\\"}]},{\\\"attrs\\\":{\\\"x\\\":143,\\\"y\\\":117,\\\"draggable\\\":true,\\\"id\\\":\\\"cirG\\\"},\\\"className\\\":\\\"Kinetic.Group\\\",\\\"children\\\":[{\\\"attrs\\\":{\\\"radius\\\":56,\\\"fill\\\":\\\"#FF80AA\\\",\\\"stroke\\\":\\\"#29FF4C\\\",\\\"opacity\\\":0.3,\\\"strokeWidth\\\":1,\\\"name\\\":\\\"circle\\\"},\\\"className\\\":\\\"Circle\\\"},{\\\"attrs\\\":{\\\"stroke\\\":\\\"#666\\\",\\\"fill\\\":\\\"#ddd\\\",\\\"radius\\\":8,\\\"name\\\":\\\"circleradius\\\",\\\"opacity\\\":0.8,\\\"draggable\\\":true,\\\"dragOnTop\\\":false,\\\"id\\\":\\\"circle\\\",\\\"visible\\\":false},\\\"className\\\":\\\"Circle\\\"}]}]},{\\\"attrs\\\":{},\\\"className\\\":\\\"Layer\\\",\\\"children\\\":[{\\\"attrs\\\":{\\\"x\\\":310,\\\"y\\\":68,\\\"draggable\\\":true,\\\"id\\\":\\\"dvg\\\"},\\\"className\\\":\\\"Kinetic.Group\\\",\\\"children\\\":[{\\\"attrs\\\":{\\\"x\\\":-31,\\\"y\\\":-18,\\\"width\\\":298,\\\"height\\\":192,\\\"fill\\\":\\\"#FF80AA\\\",\\\"stroke\\\":\\\"#29FF4C\\\",\\\"opacity\\\":0.2,\\\"name\\\":\\\"rect\\\",\\\"listening\\\":true},\\\"className\\\":\\\"Rect\\\"},{\\\"attrs\\\":{\\\"x\\\":267,\\\"y\\\":-18,\\\"stroke\\\":\\\"#666\\\",\\\"fill\\\":\\\"#ddd\\\",\\\"radius\\\":8,\\\"name\\\":\\\"topRight\\\",\\\"opacity\\\":0.8,\\\"draggable\\\":true,\\\"dragOnTop\\\":false,\\\"id\\\":\\\"rect\\\",\\\"visible\\\":false},\\\"className\\\":\\\"Circle\\\"},{\\\"attrs\\\":{\\\"x\\\":-31,\\\"y\\\":174,\\\"stroke\\\":\\\"#666\\\",\\\"fill\\\":\\\"#ddd\\\",\\\"radius\\\":8,\\\"name\\\":\\\"bottomLeft\\\",\\\"opacity\\\":0.8,\\\"draggable\\\":true,\\\"dragOnTop\\\":false,\\\"id\\\":\\\"rect\\\",\\\"visible\\\":false},\\\"className\\\":\\\"Circle\\\"},{\\\"attrs\\\":{\\\"x\\\":267,\\\"y\\\":174,\\\"stroke\\\":\\\"#666\\\",\\\"fill\\\":\\\"#ddd\\\",\\\"radius\\\":8,\\\"name\\\":\\\"bottomRight\\\",\\\"opacity\\\":0.8,\\\"draggable\\\":true,\\\"dragOnTop\\\":false,\\\"id\\\":\\\"rect\\\",\\\"visible\\\":false},\\\"className\\\":\\\"Circle\\\"},{\\\"attrs\\\":{\\\"x\\\":-31,\\\"y\\\":-18,\\\"stroke\\\":\\\"#666\\\",\\\"fill\\\":\\\"#ddd\\\",\\\"radius\\\":8,\\\"name\\\":\\\"topLeft\\\",\\\"opacity\\\":0.8,\\\"draggable\\\":true,\\\"dragOnTop\\\":false,\\\"id\\\":\\\"rect\\\",\\\"visible\\\":false},\\\"className\\\":\\\"Circle\\\"}]},{\\\"attrs\\\":{\\\"x\\\":143,\\\"y\\\":117,\\\"draggable\\\":true,\\\"id\\\":\\\"cirG\\\"},\\\"className\\\":\\\"Kinetic.Group\\\",\\\"children\\\":[{\\\"attrs\\\":{\\\"radius\\\":56,\\\"fill\\\":\\\"#FF80AA\\\",\\\"stroke\\\":\\\"#29FF4C\\\",\\\"opacity\\\":0.3,\\\"strokeWidth\\\":1,\\\"name\\\":\\\"circle\\\"},\\\"className\\\":\\\"Circle\\\"},{\\\"attrs\\\":{\\\"stroke\\\":\\\"#666\\\",\\\"fill\\\":\\\"#ddd\\\",\\\"radius\\\":8,\\\"name\\\":\\\"circleradius\\\",\\\"opacity\\\":0.8,\\\"draggable\\\":true,\\\"dragOnTop\\\":false,\\\"id\\\":\\\"circle\\\",\\\"visible\\\":false},\\\"className\\\":\\\"Circle\\\"}]}]}]}\"\n. I got my Issue Fixed.\nThank you lavrton for your valuable guidance.\n\nBY \nSiva \n. okay ericdrowell thanks for your suggestion and i got solution too(\n http://stackoverflow.com/questions/22861589/how-to-resize-the-line-using-kineticjs).\n. Recently i have identified reason of this problem. It happens when browser zoom level lesser than 100% or higher then 100%. If lesser than 100% shows view like above image, if zoom level higher means it happens but not visible. This problem won't happen when browser zoom level is 100%.\nIs there any possibility to solve this problem?\n. Hi All,\n\nI am waiting for your valuable suggestion, please help me to solve this.\n. Hi all,\nI got solution for this problem,\nI have changed devicePixelRatio = window.devicePixelRatio || 1, this line to devicePixelRatio = 1, in kinetic-v5.0.1.js file now its working good for me. \n. ",
    "catsAND": "Yes, layer.draw() solved this problem.\n. Yes, layer.draw() solved this problem.\n. ",
    "darrin": "I'm a total newbie to kineticjs but I came across the quarter circle caching issue raised above... in the interest of time I'm turning off caching for this shape since I don't expect it to be a real performance issue for me... \n. I'm a total newbie to kineticjs but I came across the quarter circle caching issue raised above... in the interest of time I'm turning off caching for this shape since I don't expect it to be a real performance issue for me... \n. ",
    "csuwildcat": "@lavrton that's the whole point: if you check for the instance instead of duck-typing, you can avoid conflicts.\n. @lavrton that's the whole point: if you check for the instance instead of duck-typing, you can avoid conflicts.\n. ",
    "zachkinstner": "I am able to reproduce this on my iPhone and iPad devices (both have Retina screens).\n\nI wrote a new demo to ensure we're looking at the same thing -- available [here](http://www.aestheticinteractive.com/test/kinetic.884.html). The mouse/touch event changes the `box` color rather than using `console.log()`. Also, this demo does not set `Kinetic.pixelRatio` directly. Instead, the `actualHitArea` shape scales by the value of `window.devicePixelRatio` to predict where the hit area will be.\n\n**Note:** the original HTML code demonstrates the issue regardless of the device's native `pixelRatio` (because it forces the value to be 2). This new HTML code only demonstrates the issue when viewing on a device that has a native `pixelRatio` that is not equal to 1.\n\nThe new demo code:\n\n``` html\n<html>\n\n    <head>\n        <title>PixelRatio Hit Area Issue</title>\n        <script src=\"kinetic-v5.1.0.js\"></script>\n    </head>\n\n    <body>\n        <div id=\"container\">\n        </div>\n    </body>\n\n    <script type=\"text/javascript\">\n        var stage = new Kinetic.Stage({\n            container: 'container',\n            width: 400,\n            height: 400\n        });\n\n        var layer = new Kinetic.Layer();\n        stage.add(layer);\n\n        var group = new Kinetic.Group({\n            clip: {\n                x: 0,\n                y: 0,\n                width: 400,\n                height: 400\n            }\n        });\n        layer.add(group);\n\n        var box = new Kinetic.Rect({\n            x: 60,\n            y: 30,\n            width: 40,\n            height: 40,\n            fill: '#0f0'\n        });\n\n        var hitFunc = function() {\n            box.fill(box.fill() == '#00f' ? '#0f0' : '#00f');\n            stage.draw();\n        };\n\n        box.on('touchstart', hitFunc);\n        box.on('mousedown', hitFunc);\n        group.add(box);\n\n        var pr = window.devicePixelRatio;\n\n        var actualHitArea = new Kinetic.Rect({\n            x: box.x()*pr,\n            y: box.y()*pr,\n            width: box.width()*pr,\n            height: box.height()*pr,\n            fill: '#eee'\n        });\n        group.add(actualHitArea);\n        actualHitArea.moveToBottom();\n\n        stage.draw();\n    </script>\n\n</html>\n```\n. I've tried a few different ideas for a fix, but they always create side-effect issues. Here is something that I noticed -- maybe it will be helpful.\n\nFirst, I added `this.isHit = true` to `Kinetic.HitCanvas` for use with the debug output. When I add the following outputs to the `Container.js` code...\n\n``` js\n        _drawChildren: function(canvas, drawMethod, top) {\n            [...]\n\n            if (hasClip && layer) {\n                console.log('hit='+(canvas.isHit==true)+' / pr='+canvas.getPixelRatio());\n                console.log(context._context.mozCurrentTransform || context._context);\n\n                clipX = this.getClipX();\n                clipY = this.getClipY();\n\n                context.save();\n                layer._applyTransform(this, context);\n                context.beginPath();\n                [...]\n```\n\n...it produces this output (in Firefox):\n\n``` text\nhit=false / pr=2\n[2, 0, 0, 2, 0, 0]\nhit=true / pr=2\n[1, 0, 0, 1, 0, 0]\n```\n\nPerhaps the scene/hit contexts are supposed to have the same transformation state here? I'm not sure if `mozCurrentTransform` is reliable, but I couldn't find another way to access this information.\n. Hi @kaplag, that fix also seemed to work for me. It was the end result of my earlier pull request:\nhttps://github.com/ericdrowell/KineticJS/pull/885/files\n\nHowever, that pull request caused some failed test cases, so I closed it.\n. @kaplag, this was my first look into the internals of the KineticJS project, so I can't say for sure what side-effects that fix might have.  \n\nMy _guess_ is that this change causes the \"hit canvas\" to render at a `pixelRatio` of 1, and (somehow) the \"hit canvas\" scales up to match the size of the \"draw canvas\" (which has a `pixelRatio` of 2). The result would be that, while the two canvases have the same dimensions, the drawing resolution of the \"hit canvas\" is not as good. (Again, my guess is...) This may cause issues for the hit-states of thin lines or shapes with lots of fine-grained detail.\n. The following change to `Kinetic.HitCanvas` (independent of the change in the pull request) also seemed to fix the issue for me:\n\n```\nKinetic.HitCanvas = function(config) {\n    config = config || {};\n    config.pixelRatio = 1; //force a pixelRatio of 1 for the hit canvas\n    [...]\n```\n. I just ran across a side-effect issue caused by this change (removing the `reset()` call). Please don't accept this pull request in its current state.\n\nThis code shows the issue -- the `boxGetsRotatedAgain` shape is incorrectly rotated twice.\n\n``` js\nvar stage = new Kinetic.Stage({\n    container: 'container',\n    width: 400,\n    height: 400\n});\n\nvar layer = new Kinetic.Layer();\nstage.add(layer);\n\nvar group = new Kinetic.Group({\n    rotation: 10,\n    x: 30\n});\nlayer.add(group);\n\nvar box = new Kinetic.Rect({\n    x: 50,\n    y: 50,\n    width: 100,\n    height: 100,\n    fill: '#0f0'\n});\ngroup.add(box);\n\nvar clippedGroup = new Kinetic.Group({\n    clip: {\n        x: 20,\n        y: 20,\n        width: 360,\n        height: 360\n    }\n});\ngroup.add(clippedGroup);\n\nvar boxGetsRotatedAgain = new Kinetic.Rect({\n    x: 200,\n    y: 50,\n    width: 100,\n    height: 100,\n    fill: '#00f'\n});\nclippedGroup.add(boxGetsRotatedAgain);\n\nstage.draw();\n```\n. These latest changes make the build fail in Travis. I'm going to close this pull request.\n. These old/unresolved issues seem relevant:\n- https://bugzilla.mozilla.org/show_bug.cgi?id=399668\n- https://bugzilla.mozilla.org/show_bug.cgi?id=564886\n. I am able to reproduce this on my iPhone and iPad devices (both have Retina screens).\n\nI wrote a new demo to ensure we're looking at the same thing -- available [here](http://www.aestheticinteractive.com/test/kinetic.884.html). The mouse/touch event changes the `box` color rather than using `console.log()`. Also, this demo does not set `Kinetic.pixelRatio` directly. Instead, the `actualHitArea` shape scales by the value of `window.devicePixelRatio` to predict where the hit area will be.\n\n**Note:** the original HTML code demonstrates the issue regardless of the device's native `pixelRatio` (because it forces the value to be 2). This new HTML code only demonstrates the issue when viewing on a device that has a native `pixelRatio` that is not equal to 1.\n\nThe new demo code:\n\n``` html\n<html>\n\n    <head>\n        <title>PixelRatio Hit Area Issue</title>\n        <script src=\"kinetic-v5.1.0.js\"></script>\n    </head>\n\n    <body>\n        <div id=\"container\">\n        </div>\n    </body>\n\n    <script type=\"text/javascript\">\n        var stage = new Kinetic.Stage({\n            container: 'container',\n            width: 400,\n            height: 400\n        });\n\n        var layer = new Kinetic.Layer();\n        stage.add(layer);\n\n        var group = new Kinetic.Group({\n            clip: {\n                x: 0,\n                y: 0,\n                width: 400,\n                height: 400\n            }\n        });\n        layer.add(group);\n\n        var box = new Kinetic.Rect({\n            x: 60,\n            y: 30,\n            width: 40,\n            height: 40,\n            fill: '#0f0'\n        });\n\n        var hitFunc = function() {\n            box.fill(box.fill() == '#00f' ? '#0f0' : '#00f');\n            stage.draw();\n        };\n\n        box.on('touchstart', hitFunc);\n        box.on('mousedown', hitFunc);\n        group.add(box);\n\n        var pr = window.devicePixelRatio;\n\n        var actualHitArea = new Kinetic.Rect({\n            x: box.x()*pr,\n            y: box.y()*pr,\n            width: box.width()*pr,\n            height: box.height()*pr,\n            fill: '#eee'\n        });\n        group.add(actualHitArea);\n        actualHitArea.moveToBottom();\n\n        stage.draw();\n    </script>\n\n</html>\n```\n. I've tried a few different ideas for a fix, but they always create side-effect issues. Here is something that I noticed -- maybe it will be helpful.\n\nFirst, I added `this.isHit = true` to `Kinetic.HitCanvas` for use with the debug output. When I add the following outputs to the `Container.js` code...\n\n``` js\n        _drawChildren: function(canvas, drawMethod, top) {\n            [...]\n\n            if (hasClip && layer) {\n                console.log('hit='+(canvas.isHit==true)+' / pr='+canvas.getPixelRatio());\n                console.log(context._context.mozCurrentTransform || context._context);\n\n                clipX = this.getClipX();\n                clipY = this.getClipY();\n\n                context.save();\n                layer._applyTransform(this, context);\n                context.beginPath();\n                [...]\n```\n\n...it produces this output (in Firefox):\n\n``` text\nhit=false / pr=2\n[2, 0, 0, 2, 0, 0]\nhit=true / pr=2\n[1, 0, 0, 1, 0, 0]\n```\n\nPerhaps the scene/hit contexts are supposed to have the same transformation state here? I'm not sure if `mozCurrentTransform` is reliable, but I couldn't find another way to access this information.\n. Hi @kaplag, that fix also seemed to work for me. It was the end result of my earlier pull request:\nhttps://github.com/ericdrowell/KineticJS/pull/885/files\n\nHowever, that pull request caused some failed test cases, so I closed it.\n. @kaplag, this was my first look into the internals of the KineticJS project, so I can't say for sure what side-effects that fix might have.  \n\nMy _guess_ is that this change causes the \"hit canvas\" to render at a `pixelRatio` of 1, and (somehow) the \"hit canvas\" scales up to match the size of the \"draw canvas\" (which has a `pixelRatio` of 2). The result would be that, while the two canvases have the same dimensions, the drawing resolution of the \"hit canvas\" is not as good. (Again, my guess is...) This may cause issues for the hit-states of thin lines or shapes with lots of fine-grained detail.\n. The following change to `Kinetic.HitCanvas` (independent of the change in the pull request) also seemed to fix the issue for me:\n\n```\nKinetic.HitCanvas = function(config) {\n    config = config || {};\n    config.pixelRatio = 1; //force a pixelRatio of 1 for the hit canvas\n    [...]\n```\n. I just ran across a side-effect issue caused by this change (removing the `reset()` call). Please don't accept this pull request in its current state.\n\nThis code shows the issue -- the `boxGetsRotatedAgain` shape is incorrectly rotated twice.\n\n``` js\nvar stage = new Kinetic.Stage({\n    container: 'container',\n    width: 400,\n    height: 400\n});\n\nvar layer = new Kinetic.Layer();\nstage.add(layer);\n\nvar group = new Kinetic.Group({\n    rotation: 10,\n    x: 30\n});\nlayer.add(group);\n\nvar box = new Kinetic.Rect({\n    x: 50,\n    y: 50,\n    width: 100,\n    height: 100,\n    fill: '#0f0'\n});\ngroup.add(box);\n\nvar clippedGroup = new Kinetic.Group({\n    clip: {\n        x: 20,\n        y: 20,\n        width: 360,\n        height: 360\n    }\n});\ngroup.add(clippedGroup);\n\nvar boxGetsRotatedAgain = new Kinetic.Rect({\n    x: 200,\n    y: 50,\n    width: 100,\n    height: 100,\n    fill: '#00f'\n});\nclippedGroup.add(boxGetsRotatedAgain);\n\nstage.draw();\n```\n. These latest changes make the build fail in Travis. I'm going to close this pull request.\n. These old/unresolved issues seem relevant:\n- https://bugzilla.mozilla.org/show_bug.cgi?id=399668\n- https://bugzilla.mozilla.org/show_bug.cgi?id=564886\n. ",
    "kaplag": "Have you found any issues adding only this line? it seems to fix the issue for me \n\n``` javascript\nKinetic.HitCanvas = function(config) {\n    config = config || {};\n    config.pixelRatio = 1; //force a pixelRatio of 1 for the hit canvas\n    [...]\n```\n. @zachkinstner, ah ok. I thought the other change in that pull was what caused issues. So this doesn't fully solve the problem but works for some cases? Thank you for posting it. It made a big difference to the quality of our project.\n. @zachkinstner, If that is the only down side it's not bad. The only work around we had before was setting `pixelRatio` to 1 anyway so both the \"draw canvas\" and \"hit canvas\" would have equally bad resolution. I don't think this would make to much of a difference on a touch device but I\"ll post findings to here as we test more. My project is dependent on moving small shapes sometimes.\n\nI'm surprised this didn't make it into the next milestone. Hdpi is now the norm and using clipping masks is common enough.\n. @ftzeng, have you tried the solution @zachkinstner came up with? it works for me on retina iPad. Haven't tried it on laptop. The problem seems to be the `hitCanvas` is being drawn at twice the resolution but is not being scaled down properly like the `drawCanvas` so all of the hit shapes are there but off. The work around seems to be editing the library to force only the `Kinetic.HitCanvas` to `pixelRatio 1`. The `drawCanvas` can then be left alone to automatically detect `pixelRatio` and will show retina quality.\n\nUnfortunately I do not know where to add this in the min version of kinetic. Any idea?\n. Have you found any issues adding only this line? it seems to fix the issue for me \n\n``` javascript\nKinetic.HitCanvas = function(config) {\n    config = config || {};\n    config.pixelRatio = 1; //force a pixelRatio of 1 for the hit canvas\n    [...]\n```\n. @zachkinstner, ah ok. I thought the other change in that pull was what caused issues. So this doesn't fully solve the problem but works for some cases? Thank you for posting it. It made a big difference to the quality of our project.\n. @zachkinstner, If that is the only down side it's not bad. The only work around we had before was setting `pixelRatio` to 1 anyway so both the \"draw canvas\" and \"hit canvas\" would have equally bad resolution. I don't think this would make to much of a difference on a touch device but I\"ll post findings to here as we test more. My project is dependent on moving small shapes sometimes.\n\nI'm surprised this didn't make it into the next milestone. Hdpi is now the norm and using clipping masks is common enough.\n. @ftzeng, have you tried the solution @zachkinstner came up with? it works for me on retina iPad. Haven't tried it on laptop. The problem seems to be the `hitCanvas` is being drawn at twice the resolution but is not being scaled down properly like the `drawCanvas` so all of the hit shapes are there but off. The work around seems to be editing the library to force only the `Kinetic.HitCanvas` to `pixelRatio 1`. The `drawCanvas` can then be left alone to automatically detect `pixelRatio` and will show retina quality.\n\nUnfortunately I do not know where to add this in the min version of kinetic. Any idea?\n. ",
    "frnsys": "I'm having this issue as well. Working on a Retina MBPr and trying to clip a Group containing an Image.  I'm unable to detect events over the Image unless I set `Kinetic.pixelRatio = 1`.\n. @kaplag, I haven't tried that solution cause I want to avoid editing the library itself if I can...for now, I'll just go with overriding the `pixelRatio` to be 1.\n. I'm having this issue as well. Working on a Retina MBPr and trying to clip a Group containing an Image.  I'm unable to detect events over the Image unless I set `Kinetic.pixelRatio = 1`.\n. @kaplag, I haven't tried that solution cause I want to avoid editing the library itself if I can...for now, I'll just go with overriding the `pixelRatio` to be 1.\n. ",
    "vincentEuloge": "We can't redefine width of a canvas (where a FastLayer is added) ?\n\nI have : \nTypeError: Cannot call method 'setSize' of undefined\n    at Kinetic.Util.addMethods._resizeDOM (kinetic-v5.1.0.min.js:4:12260)\n    at Kinetic.Util.addMethods.setWidth (kinetic-v5.1.0.min.js:4:10659)\n    at c.(anonymous function) [as width](kinetic-v5.1.0.min.js:2:19642)\n. 2 . http://jsfiddle.net/pof83/85HYn/\nIf you replace FastLayer to Layer, that work\n. :) thanks to you\n. We can't redefine width of a canvas (where a FastLayer is added) ?\n\nI have : \nTypeError: Cannot call method 'setSize' of undefined\n    at Kinetic.Util.addMethods._resizeDOM (kinetic-v5.1.0.min.js:4:12260)\n    at Kinetic.Util.addMethods.setWidth (kinetic-v5.1.0.min.js:4:10659)\n    at c.(anonymous function) [as width](kinetic-v5.1.0.min.js:2:19642)\n. 2 . http://jsfiddle.net/pof83/85HYn/\nIf you replace FastLayer to Layer, that work\n. :) thanks to you\n. ",
    "RabieZahid": "Thanks eduplus. Yes, it works after setting the pixelRatio to one.\n. Thanks eduplus. Yes, it works after setting the pixelRatio to one.\n. ",
    "pfautrero": "Here it is :\nhttp://jsfiddle.net/3YV4t/\n. really great idea ! I had to deal with such a case in one of my projects. If you implement it, I will try it immediatly.\n. According to me, there are two solutions :\n1. drawHitFromCache\n   Just cache your image and call drawHitFromCache.\n2. Do it yourself with hitFunc\n   http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-custom-hit-function-tutorial/\n   You just have to play with context and getImageData, putImageData\n. Well, it is not really on drag and drop feature. Let's look at these examples. Help the rabbit to catch the carrot.\nThis version is kinetic 5.1.0 I modified on _getIntersection :\nhttp://pascal-fautrero.ac-versailles.fr/kinetic/test510modified/\n\nThis one is the 5.1.1 I compiled some days ago :\nhttp://pascal-fautrero.ac-versailles.fr/kinetic/test511/\n\nubuntu or debian with firefox :\nLook at the pointer when you leave the rabbit. Switching to default pointer is not immediat with 5.1.1. With 5.1.0, the switch is immediat.\n. Here it is :\nhttp://jsfiddle.net/3YV4t/\n. really great idea ! I had to deal with such a case in one of my projects. If you implement it, I will try it immediatly.\n. According to me, there are two solutions :\n1. drawHitFromCache\n   Just cache your image and call drawHitFromCache.\n2. Do it yourself with hitFunc\n   http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-custom-hit-function-tutorial/\n   You just have to play with context and getImageData, putImageData\n. Well, it is not really on drag and drop feature. Let's look at these examples. Help the rabbit to catch the carrot.\nThis version is kinetic 5.1.0 I modified on _getIntersection :\nhttp://pascal-fautrero.ac-versailles.fr/kinetic/test510modified/\n\nThis one is the 5.1.1 I compiled some days ago :\nhttp://pascal-fautrero.ac-versailles.fr/kinetic/test511/\n\nubuntu or debian with firefox :\nLook at the pointer when you leave the rabbit. Switching to default pointer is not immediat with 5.1.1. With 5.1.0, the switch is immediat.\n. ",
    "betofigueiredo": "Maybe the solution to do this is to use clones, like this example here: http://jsfiddle.net/m1erickson/8A9sP/\n. Maybe the solution to do this is to use clones, like this example here: http://jsfiddle.net/m1erickson/8A9sP/\n. ",
    "davidstanley01": "I know this is an old and closed issue, but just a point of clarification...\n\nEssentially, take the large image, downsize it on a regular canvas object, and then pass that canvas object as the \"image\" property in the Kinetic.Image() config value?\n\nThanks!\n. I know this is an old and closed issue, but just a point of clarification...\n\nEssentially, take the large image, downsize it on a regular canvas object, and then pass that canvas object as the \"image\" property in the Kinetic.Image() config value?\n\nThanks!\n. ",
    "polymeris": "Yes, that was a typo, I meant offsetX.\n\nThe thing is, I already have multiple layers. How can I tween them all simultaneously? is there some sort of layer-container? Neither Container nor Group seems to work.\n\nThanks for your help!\n. Thanks. That seems like a good workaround.\n. Yes, that was a typo, I meant offsetX.\n\nThe thing is, I already have multiple layers. How can I tween them all simultaneously? is there some sort of layer-container? Neither Container nor Group seems to work.\n\nThanks for your help!\n. Thanks. That seems like a good workaround.\n. ",
    "aczekajski": "Ok, i didn't check `visible`, but it's not present in docs (http://kineticjs.com/docs/Kinetic.FastLayer.html).\n\nIntuitively, content of layer with `width` and `height` set, should be clipped (but, in fact, it doesn't, even with Layer). Good thing that `clip()` works both for Layer and FastLayer.\n\nHowever, using Layer instead of FastLayer just because I want my layer to be somewhere else (not at `x:0, y:0`) feels kinda bad.\n. Ok, i didn't check `visible`, but it's not present in docs (http://kineticjs.com/docs/Kinetic.FastLayer.html).\n\nIntuitively, content of layer with `width` and `height` set, should be clipped (but, in fact, it doesn't, even with Layer). Good thing that `clip()` works both for Layer and FastLayer.\n\nHowever, using Layer instead of FastLayer just because I want my layer to be somewhere else (not at `x:0, y:0`) feels kinda bad.\n. ",
    "AxoInsanit": "Color \n. Thanks for the reply, my question was \"is there way to do this with the current Tween object?\"\nSo I guess that's a no?\nAre there plans to add support for this on Tween? the whole idea of using something like KineticJS is not having to resort to other libraries...\n. Color \n. Thanks for the reply, my question was \"is there way to do this with the current Tween object?\"\nSo I guess that's a no?\nAre there plans to add support for this on Tween? the whole idea of using something like KineticJS is not having to resort to other libraries...\n. ",
    "strajk-": "Sure, please bear with the terrible code though, I'm not a webdev but I'm very interested in this framework:\n\nhttp://s000.tinyupload.com/?file_id=53739405152387749799\n\nThe artifacting does not happen in IE 11, I'm having problems with Chrome.\n. Sure, please bear with the terrible code though, I'm not a webdev but I'm very interested in this framework:\n\nhttp://s000.tinyupload.com/?file_id=53739405152387749799\n\nThe artifacting does not happen in IE 11, I'm having problems with Chrome.\n. ",
    "ECAbrahamse": "Thanks for the quick response!\n. Funny.  Firefox v29.0 was just released.  I cannot reproduce the problem anymore when using the updated browser...  :-)\nThis seems a browser-related bug in Firefox v28.0.\n. Thanks for the quick response!\n. Funny.  Firefox v29.0 was just released.  I cannot reproduce the problem anymore when using the updated browser...  :-)\nThis seems a browser-related bug in Firefox v28.0.\n. ",
    "pgrodrigues": "After all images have been loaded and added to the layer, you can use moveToBottom() method on the background image, to produce the desired effect.\n. Hey dbsima,\n\nSome methods were changed in v5.0.0. For example:\n.getX() is now .x()\n.setSize(100, 100) is now .size({width: 100, height: 100})\n\nI changed your jsfiddle, and it seems to be working now\nhttp://jsfiddle.net/5d2M3/5/\n. Try to ask this question in KonvaJS github (KineticJS fork), maybe someone can help you there.\n. After all images have been loaded and added to the layer, you can use moveToBottom() method on the background image, to produce the desired effect.\n. Hey dbsima,\n\nSome methods were changed in v5.0.0. For example:\n.getX() is now .x()\n.setSize(100, 100) is now .size({width: 100, height: 100})\n\nI changed your jsfiddle, and it seems to be working now\nhttp://jsfiddle.net/5d2M3/5/\n. Try to ask this question in KonvaJS github (KineticJS fork), maybe someone can help you there.\n. ",
    "stefek99": "OK, got it, new syntax:\n\n```\nvar group = new Kinetic.Group({\n        clip: {\n          x: 100, \n          y: 40, \n          width: 200, \n          height: 100\n        },\n        draggable: true\n      });\n```\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-clipping-functions-with-kineticjs/\n. OK, got it, new syntax:\n\n```\nvar group = new Kinetic.Group({\n        clip: {\n          x: 100, \n          y: 40, \n          width: 200, \n          height: 100\n        },\n        draggable: true\n      });\n```\n\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-clipping-functions-with-kineticjs/\n. ",
    "homeyer": "Anything we can do @ Waffle to make the badge more useful for you?\n. Anything we can do @ Waffle to make the badge more useful for you?\n. ",
    "kartou": "Thanks! It seems to work. \nI'm still experiencing problems with Nokia Lumia 1520 (Windows Phone 8). The fix does not seem to work there. Its running Internet Explorer 10. Any ideas?\n. Thanks! It seems to work. \nI'm still experiencing problems with Nokia Lumia 1520 (Windows Phone 8). The fix does not seem to work there. Its running Internet Explorer 10. Any ideas?\n. ",
    "fizker": "Yeah, sorry about that. I probably should have looked closer at the browserify docs before pushing.\n\nBTW, I don't mind squashing the commits before the final merge, if you want it. I will leave it as individual commits for the sake of conversation.\n. Yeah, sorry about that. I probably should have looked closer at the browserify docs before pushing.\n\nBTW, I don't mind squashing the commits before the final merge, if you want it. I will leave it as individual commits for the sake of conversation.\n. ",
    "dbsima": "@pgrodrigues I knew about those changes. My problem is that the images with v5.1 don't have de pixel-ratio as with v4.5.\n. @lavrton just look at the 2 jsfinddles  http://jsfiddle.net/dbsima/5d2M3/ and http://jsfiddle.net/5d2M3/1/ the images in the first one look better.\n. I think that the difference is because of the retina display. I checked on PC with no retina display and there's no difference.\n. Yeah. Same problem. Sorry I didn't saw them.\n. @pgrodrigues I knew about those changes. My problem is that the images with v5.1 don't have de pixel-ratio as with v4.5.\n. @lavrton just look at the 2 jsfinddles  http://jsfiddle.net/dbsima/5d2M3/ and http://jsfiddle.net/5d2M3/1/ the images in the first one look better.\n. I think that the difference is because of the retina display. I checked on PC with no retina display and there's no difference.\n. Yeah. Same problem. Sorry I didn't saw them.\n. ",
    "DaAwesomeP": "I've had some very bad experiences with Stack Overflow. People like to report duplicates - I bet someone's going to say this is a duplicate of a general \"how do I rotate with KineticJS\" question just to get points. I'll do it anyways though.\n. **Actually, I got banned for asking questions!** On my first post someone said to repost on another site, which got be suspended and banned.\n![screenshot_051014_095100_am](https://cloud.githubusercontent.com/assets/4472083/2936251/87286e7c-d852-11e3-94d5-6d100fec6845.jpg)\n.  I see, so `x` and `y` set the rotation origin. This is more of what I want: http://jsbin.com/sobuvosa/1/edit. Where i the space between the origin and object coming from? It is going around the center and not touching it.\n. I changed the shape to a triangle (got rid of `(15, 35)`. And it seems to work how I want it to now. Thanks!\n. I've had some very bad experiences with Stack Overflow. People like to report duplicates - I bet someone's going to say this is a duplicate of a general \"how do I rotate with KineticJS\" question just to get points. I'll do it anyways though.\n. **Actually, I got banned for asking questions!** On my first post someone said to repost on another site, which got be suspended and banned.\n![screenshot_051014_095100_am](https://cloud.githubusercontent.com/assets/4472083/2936251/87286e7c-d852-11e3-94d5-6d100fec6845.jpg)\n.  I see, so `x` and `y` set the rotation origin. This is more of what I want: http://jsbin.com/sobuvosa/1/edit. Where i the space between the origin and object coming from? It is going around the center and not touching it.\n. I changed the shape to a triangle (got rid of `(15, 35)`. And it seems to work how I want it to now. Thanks!\n. ",
    "bernalmurcia": "Hi, could you post the specific changes that you applied to the method to make it work? I would very much appreciate it. Thanks!\n. It works great, thanks!!\n. Hi, could you post the specific changes that you applied to the method to make it work? I would very much appreciate it. Thanks!\n. It works great, thanks!!\n. ",
    "ahmadwaqaskhilji": "Hi jfollas\nthank you for the reply. now i got the context . Thank you so much. \nI cannot tell you , how much i am great full to you.\n. now i am getting the context correctly but when i apply \"source-atop\" not getting the required output. A blank screen comes instead of Source-atop output.\n\nvar oval = new Kinetic.Ellipse({\n                    x : stage.getWidth() / 2,\n                    y : stage.getHeight() / 2,\n                    radius : {\n                        x : 100,\n                        y : 50\n                    },\n                    fill : 'yellow',\n                    stroke : 'black',\n                    strokeWidth : 4\n                });\n\n```\n            var rect = new Kinetic.Rect({\n\n                x : (stage.getWidth() / 2),\n                y : stage.getHeight() / 2,\n                width : 100,\n                height : 100,\n                draggable : true,\n                fill : 'green'\n            });\n\n            // add the shape to the layer\n\n            // draw rectangle (destination)\n            layer.add(rect);\n\n\n\n            layer.getContext()._context.globalCompositeOperation = \"source-atop\";\n\n\n            //Source\n            layer.add(oval);\n            layer.draw();\n```\n. Hi jfollas\nthank you for the reply. now i got the context . Thank you so much. \nI cannot tell you , how much i am great full to you.\n. now i am getting the context correctly but when i apply \"source-atop\" not getting the required output. A blank screen comes instead of Source-atop output.\n\nvar oval = new Kinetic.Ellipse({\n                    x : stage.getWidth() / 2,\n                    y : stage.getHeight() / 2,\n                    radius : {\n                        x : 100,\n                        y : 50\n                    },\n                    fill : 'yellow',\n                    stroke : 'black',\n                    strokeWidth : 4\n                });\n\n```\n            var rect = new Kinetic.Rect({\n\n                x : (stage.getWidth() / 2),\n                y : stage.getHeight() / 2,\n                width : 100,\n                height : 100,\n                draggable : true,\n                fill : 'green'\n            });\n\n            // add the shape to the layer\n\n            // draw rectangle (destination)\n            layer.add(rect);\n\n\n\n            layer.getContext()._context.globalCompositeOperation = \"source-atop\";\n\n\n            //Source\n            layer.add(oval);\n            layer.draw();\n```\n. ",
    "moniuch": "The use case is when an object is within many containers. The function is\nas much useful as its jQuery companion. I missed it just a minute ago.\nOn May 20, 2014 11:15 AM, \"Anton Lavrenov\" notifications@github.com wrote:\n\n> What is use case? Container may have many children. But any node has only\n> one parent.\n> Search in all parent, grandparent, ...? I don't think this function is\n> very useful.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/931#issuecomment-43603131\n> .\n. Imagine having a main container (Group) consisting of other nested containers. They all receive clicks, but the handler has to check for an attribute (say: isEnabled) that is defined on the main container level only. How would I step up the container tree and stop at a given level?\n\nThe preferred way would be something like\n\n```\n    shape.getParents(function(node){\n        return node.getClassName() === 'Group' && typeof node.getAttr('isEnabled') === true\n    })`.\n```\n\nAgreed? Do you have a better solution?\n. The use case is when an object is within many containers. The function is\nas much useful as its jQuery companion. I missed it just a minute ago.\nOn May 20, 2014 11:15 AM, \"Anton Lavrenov\" notifications@github.com wrote:\n\n> What is use case? Container may have many children. But any node has only\n> one parent.\n> Search in all parent, grandparent, ...? I don't think this function is\n> very useful.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ericdrowell/KineticJS/issues/931#issuecomment-43603131\n> .\n. Imagine having a main container (Group) consisting of other nested containers. They all receive clicks, but the handler has to check for an attribute (say: isEnabled) that is defined on the main container level only. How would I step up the container tree and stop at a given level?\n\nThe preferred way would be something like\n\n```\n    shape.getParents(function(node){\n        return node.getClassName() === 'Group' && typeof node.getAttr('isEnabled') === true\n    })`.\n```\n\nAgreed? Do you have a better solution?\n. ",
    "emnkoksal": "If you are using cache (ie. mySprite.cache()), stroke won't be displayed.\n. As I told, I had re-written find method to work-around the problem, but this created another problem, as I told here:\n\nhttps://github.com/ericdrowell/KineticJS/issues/963\n\nSo, this problem continues.\n- Suddenly, Kinetic.ids loses one of its node without reason.\n- When I add by hand again (ie. Kinetic.ids['ID'] = myNode), find method again works, but, that node does not listen to events. Somehow it becomes corrupted.\n\nAny idea?\n. If you are using cache (ie. mySprite.cache()), stroke won't be displayed.\n. As I told, I had re-written find method to work-around the problem, but this created another problem, as I told here:\n\nhttps://github.com/ericdrowell/KineticJS/issues/963\n\nSo, this problem continues.\n- Suddenly, Kinetic.ids loses one of its node without reason.\n- When I add by hand again (ie. Kinetic.ids['ID'] = myNode), find method again works, but, that node does not listen to events. Somehow it becomes corrupted.\n\nAny idea?\n. ",
    "velchevski": "Hey @jfollas thank you for the quick reply man! I was quite sure RAF was causing the trouble, however I was secretly hoping there's some sort of workaround within Kinetic itself. I would most certainly look into GreenSock. Thank you for your suggestion once again!\n. Hey @jfollas thank you for the quick reply man! I was quite sure RAF was causing the trouble, however I was secretly hoping there's some sort of workaround within Kinetic itself. I would most certainly look into GreenSock. Thank you for your suggestion once again!\n. ",
    "stumo": "Incidentally - on the no-scale example, Firefox and Chrome's vertical position differ. (I didn't see that on 4.3.1) \n. Incidentally - on the no-scale example, Firefox and Chrome's vertical position differ. (I didn't see that on 4.3.1) \n. ",
    "hekexue": "hi, Iavrton , Thanks for the reply. I know that's not right to use the private methods but the project that I'm working on had bring in a lot of common js libs which makes the html page load too many js resource files. So,when I'm working on my own Kineticjs extenstions, I want to keep them clean and only rely on kineticjs, not rely on other libs and not even rely on jQuery. Anyway, I will update my codes if you really will remove the _merge method. Thank you again.\n\nBy the way ,the tutorials page is no longer working, here is the link:\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-events-tutorials-introduction-with-kineticjs/\n\nPS:Because I'm living in China, so may be the reason why the tutorials page is not working is bacause the network I'm using is blocked by China's Internet firewall. \n. hi, Iavrton , Thanks for the reply. I know that's not right to use the private methods but the project that I'm working on had bring in a lot of common js libs which makes the html page load too many js resource files. So,when I'm working on my own Kineticjs extenstions, I want to keep them clean and only rely on kineticjs, not rely on other libs and not even rely on jQuery. Anyway, I will update my codes if you really will remove the _merge method. Thank you again.\n\nBy the way ,the tutorials page is no longer working, here is the link:\nhttp://www.html5canvastutorials.com/kineticjs/html5-canvas-events-tutorials-introduction-with-kineticjs/\n\nPS:Because I'm living in China, so may be the reason why the tutorials page is not working is bacause the network I'm using is blocked by China's Internet firewall. \n. ",
    "songoo": "Hello, i do not use svg image outside of domain.\n\nStackowerlow link you posted is not my case, i use Local svg , like \".src = 'monkey.svg' \" , as its written in demo links which is pure basic kinetic js demo, where svg have no problem with draw, but problem starts when 'drawHitFromCache' is called, my blind guess is that cache image is created from original one by some way causing IE think its from other domain . \n\nWhy got this issue closed, it means drawHitFromCache() with Local domain svg is bugged and will never support IE10 ? \n\nIs there any alternative i can get mouse detection uppon svg image ignoring transparent bacground ? (i have several of svg above each other ,with same width/height and would need detect click on nontransparent part of specific svg)\n. Oh :( , but thnx for answer. I am changing color of svg , and that cant be done with png, but maybe if i try change svg color first and then transform svg to png and then do drawHitFromCache() .\n. Workaround way worked with help of canvg and live svgToPng (http://stackoverflow.com/questions/24281638/kineticjs-local-svg-drawhitfromcache-internet-explorer-10-securityerror/24510544#24510544)\n. Well, we throwed out  kinetic \"dragable\" from all objects and programed our own dragging manually so it does not cal draw functions at own will causing performance problems ....\n. Hello, i do not use svg image outside of domain.\n\nStackowerlow link you posted is not my case, i use Local svg , like \".src = 'monkey.svg' \" , as its written in demo links which is pure basic kinetic js demo, where svg have no problem with draw, but problem starts when 'drawHitFromCache' is called, my blind guess is that cache image is created from original one by some way causing IE think its from other domain . \n\nWhy got this issue closed, it means drawHitFromCache() with Local domain svg is bugged and will never support IE10 ? \n\nIs there any alternative i can get mouse detection uppon svg image ignoring transparent bacground ? (i have several of svg above each other ,with same width/height and would need detect click on nontransparent part of specific svg)\n. Oh :( , but thnx for answer. I am changing color of svg , and that cant be done with png, but maybe if i try change svg color first and then transform svg to png and then do drawHitFromCache() .\n. Workaround way worked with help of canvg and live svgToPng (http://stackoverflow.com/questions/24281638/kineticjs-local-svg-drawhitfromcache-internet-explorer-10-securityerror/24510544#24510544)\n. Well, we throwed out  kinetic \"dragable\" from all objects and programed our own dragging manually so it does not cal draw functions at own will causing performance problems ....\n. ",
    "sebob": "Hi Siva, \nmaybe you try something like http://jsfiddle.net/FnwS5/78/ zoom on container, more example http://jsfiddle.net/FnwS5/117/\n\ntry and let as know if this solves the problem\n. Hi Siva, \nmaybe you try something like http://jsfiddle.net/FnwS5/78/ zoom on container, more example http://jsfiddle.net/FnwS5/117/\n\ntry and let as know if this solves the problem\n. ",
    "bordeux": "any ideas?\n. is't this bug? I fixed it in _cache function:\nhttps://gist.github.com/bordeux/d72f8d41996129780762\n. 1000 issue! \n\n![](http://www.webweaver.nu/clipart/img/entertainment/party/balloon-bunch.png)\n. My temporary resolve: \n\n``` javascript\n        _getContextFont: function() {\n            var fontVariant = this.getFontVariant().replace(\"normal\", \"\");\n            return this.getFontStyle() + SPACE + fontVariant + SPACE + this.getFontSize() + PX_SPACE + this.getFontFamily();\n        },<\n```\n. any ideas?\n. is't this bug? I fixed it in _cache function:\nhttps://gist.github.com/bordeux/d72f8d41996129780762\n. 1000 issue! \n\n![](http://www.webweaver.nu/clipart/img/entertainment/party/balloon-bunch.png)\n. My temporary resolve: \n\n``` javascript\n        _getContextFont: function() {\n            var fontVariant = this.getFontVariant().replace(\"normal\", \"\");\n            return this.getFontStyle() + SPACE + fontVariant + SPACE + this.getFontSize() + PX_SPACE + this.getFontFamily();\n        },<\n```\n. ",
    "agilest": "I think this is related to #499 and #930. My device is a Nexus 4.\n. I think this is related to #499 and #930. My device is a Nexus 4.\n. ",
    "Kirill89": "Same issue in IE10, but only in strict mode.\n. Same issue in IE10, but only in strict mode.\n. ",
    "DigitalFlux": "Thanks for the quick response. I think my best course of action is to create a hidden element with a canvas that can be sized to what is needed and have toImage() called on it in order to get the caching done as needed. \n. Thanks for the quick response. I think my best course of action is to create a hidden element with a canvas that can be sized to what is needed and have toImage() called on it in order to get the caching done as needed. \n. ",
    "jwueller": "Can confirm. It has been broken for at least several days now.\n. Can confirm. It has been broken for at least several days now.\n. ",
    "madroneropaulo": "I found a mirror here http://www.zeali.net/mirrors/html5canvastutorials/kineticjs/html5-canvas-events-tutorials-introduction-with-kineticjs/index.html\n. I confirm this issue on chrome for android 4.2. Changing the image size to 100x100 makes the drag acceptable, but stills a bit slow. On default browser the drag is normal.\n. I found a mirror here http://www.zeali.net/mirrors/html5canvastutorials/kineticjs/html5-canvas-events-tutorials-introduction-with-kineticjs/index.html\n. I confirm this issue on chrome for android 4.2. Changing the image size to 100x100 makes the drag acceptable, but stills a bit slow. On default browser the drag is normal.\n. ",
    "asweigart": "This is a simple fix, but kind of a huge inconvenience and detrimental to KinectJS. Is this going to be fixed soon?\n. Nix that. API change.\n. This is a simple fix, but kind of a huge inconvenience and detrimental to KinectJS. Is this going to be fixed soon?\n. Nix that. API change.\n. ",
    "pmuston": "New site looks excellent!!\n\nOn 13 January 2015 at 08:36, Anton Lavrenov notifications@github.com\nwrote:\n\n> Closed #980 https://github.com/ericdrowell/KineticJS/issues/980.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/ericdrowell/KineticJS/issues/980#event-217889529.\n. After Eric's fantastic work, it would be brilliant to see the project live on supported by a vibrant community. I am very nervous about relying on an abandoned project.\nI have been pondering about looking elsewhere, or to invest time in creating my project that is a subset.\nI only use a subset of the functionality and feel Kinetec would be too complex to maintain my own fork.\nOf course my prefered option would be for the project to get a new, active \"owner\"? I am not sure how these things works on github. Perhaps I could contribute.\nI am using Kinetec to build an internal tool which is very simple pipeline editor hooking together dataflows between predefined functions. I see myself extending and adapting it as requirements grow.\n. Excellent news. I spent a few days porting my code base to FabricJS, while discovering it was a poor fit for my use.\nKineticJS's rich eventing model works better for my use case (an object graph editor), allowing parents and children within the visual hierarchy to have different handlers. The convenience of switching on and off layers is a wonderful trick to be able to employ.\nWhile these techniques are reproducible in Fabric, but I found myself creating many more ancillary structures in my view model not related to my underlying model but to manage click targets when in a particular state and to compensate for Fabric's less rich event model. Eric did push forward the state of canvas frameworks to abstract this.\nSo I'm on board to continue with this great project.\n. @lavrton from your use case, our needs are somewhat similar - graphs (of the nodes and edges variety). WebGL based frameworks do not fit my use case at all. If the gamers are going to split off to PIXI then it would inform the future direction of Kinetic if we had a good idea of how the remaining Kinetic tribe are using it. I could be an active (i.e. useful) contributor if the project's abstraction was to further advance support for its role as a \"direct manipulation interface\" view controller, rather than to say adding WebGL support. For example, I am using Kinetic as a view controller (rendering, hit testing and subsequent modal interaction) hooked up to my underlying domain model which holds the ultimate truth. An example is dragging from one connector to another creating an edge between nodes in the model. Adding native support for a model (beyond the visual hierarchy, as in MVC) would be an excellent direction.\n. @bensquire very nice!\n. New site looks excellent!!\n\nOn 13 January 2015 at 08:36, Anton Lavrenov notifications@github.com\nwrote:\n\n> Closed #980 https://github.com/ericdrowell/KineticJS/issues/980.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/ericdrowell/KineticJS/issues/980#event-217889529.\n. After Eric's fantastic work, it would be brilliant to see the project live on supported by a vibrant community. I am very nervous about relying on an abandoned project.\nI have been pondering about looking elsewhere, or to invest time in creating my project that is a subset.\nI only use a subset of the functionality and feel Kinetec would be too complex to maintain my own fork.\nOf course my prefered option would be for the project to get a new, active \"owner\"? I am not sure how these things works on github. Perhaps I could contribute.\nI am using Kinetec to build an internal tool which is very simple pipeline editor hooking together dataflows between predefined functions. I see myself extending and adapting it as requirements grow.\n. Excellent news. I spent a few days porting my code base to FabricJS, while discovering it was a poor fit for my use.\nKineticJS's rich eventing model works better for my use case (an object graph editor), allowing parents and children within the visual hierarchy to have different handlers. The convenience of switching on and off layers is a wonderful trick to be able to employ.\nWhile these techniques are reproducible in Fabric, but I found myself creating many more ancillary structures in my view model not related to my underlying model but to manage click targets when in a particular state and to compensate for Fabric's less rich event model. Eric did push forward the state of canvas frameworks to abstract this.\nSo I'm on board to continue with this great project.\n. @lavrton from your use case, our needs are somewhat similar - graphs (of the nodes and edges variety). WebGL based frameworks do not fit my use case at all. If the gamers are going to split off to PIXI then it would inform the future direction of Kinetic if we had a good idea of how the remaining Kinetic tribe are using it. I could be an active (i.e. useful) contributor if the project's abstraction was to further advance support for its role as a \"direct manipulation interface\" view controller, rather than to say adding WebGL support. For example, I am using Kinetic as a view controller (rendering, hit testing and subsequent modal interaction) hooked up to my underlying domain model which holds the ultimate truth. An example is dragging from one connector to another creating an edge between nodes in the model. Adding native support for a model (beyond the visual hierarchy, as in MVC) would be an excellent direction.\n. @bensquire very nice!\n. ",
    "MarcosTMT": "I solve this problem... in the next version (5.1.1, now only in github) include this error solved.\n\nthanks\n. I solve this problem... in the next version (5.1.1, now only in github) include this error solved.\n\nthanks\n. ",
    "SET001": "BTW are there any other manuals for beginners? It is totally unclear how to start working with this library.\n. BTW are there any other manuals for beginners? It is totally unclear how to start working with this library.\n. ",
    "TheophileMorin": "It seems yes.\nHard to code without documentation...\ni'm encountering a  403 Forbidden error too.\n. It seems yes.\nHard to code without documentation...\ni'm encountering a  403 Forbidden error too.\n. ",
    "besterlabs": "Here is an example:\n         var stage1 = new Kinetic.Stage({\n           container: \"scr1\",\n           width: 395,\n           height: 249\n         });\n\n```\n     var layer1 = new Kinetic.Layer();\n\n       var obj = new Kinetic.Ring \n```\n\n({name:'ring',x:30,y:50,width:50,height:50,innerRadius:15,outerRadius:30,fill:'green',stroke:'black',strokeWidth:4,\n           draggable: true\n       });\n\n```\n   var cring = obj.clone();\n   console.log(obj.outerRadius(),cring.outerRadius());\n   cring.x(obj.x()+100);\n   layer1.add(obj);\n   layer1.add(cring);\n  stage1.add(layer1);\n  layer1.draw();\n```\n\nThe console.log gives (30,25) for the radii and the cloned ring also \ndraws with a smaller outer radius.\n\nUpdate:\n\nI just tested it without the height and width parameters i.e.\n   var obj = new Kinetic.Ring \n({name:'ring',x:30,y:50,innerRadius:15,outerRadius:30,fill:'green',stroke:'black',strokeWidth:4,\n           draggable: true\n       });\n\nand cloning works correctly in this case, so it seems important to not \ninclude width and height when instanced.\n\nOn 10/08/14 07:56, Anton Lavrenov wrote:\n\n> Do you have demo? Test is passing:\n> \n> var  ring  =  new  Kinetic.Ring({\n>            x:  stage.getWidth()  /  2,\n>            y:  stage.getHeight()  /  2,\n>            innerRadius:  50,\n>            outerRadius:  90,\n>            fill:  'green',\n>            stroke:  'black',\n>            strokeWidth:  4,\n>            draggable:  true\n> });\n> var  clone  =  ring.clone();\n> assert.equal(clone.outerRadius(),  ring.outerRadius());\n> \n> \u2014\n> Reply to this email directly or view it on GitHub \n> https://github.com/ericdrowell/KineticJS/issues/987#issuecomment-51707925.\n. I use a 'type' parameter to define which kind of node has to be drawn \nwhen retrieved from a database, so width and height may or may not be \ndefined.  From what you say it is important then to suppress or define \nthe optional width and height parameters according to 2*outerRadius when \none has a star or ring object. It may be helpful to mention this in the \ndocumentation or just do it automatically so that outerRadius overrides \nwidth and height during the creation of the ring or star instance.\nThanks for making this clear.\nOn 11/08/14 01:34, Anton Lavrenov wrote:\n\n> Yep. It is strange that you have |width|, |height| and |outerRadius| \n> together. |width| (and |height|) should be = |outerRadius \\* 2|. Look \n> https://github.com/ericdrowell/KineticJS/blob/master/src/shapes/Ring.js#L52. \n> In your case while cloning |width| (or |height|) was applying after \n> |outerRadius| attribute so it was change |outerRadius| value.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub \n> https://github.com/ericdrowell/KineticJS/issues/987#issuecomment-51732645.\n. Here is an example:\n         var stage1 = new Kinetic.Stage({\n           container: \"scr1\",\n           width: 395,\n           height: 249\n         });\n\n```\n     var layer1 = new Kinetic.Layer();\n\n       var obj = new Kinetic.Ring \n```\n\n({name:'ring',x:30,y:50,width:50,height:50,innerRadius:15,outerRadius:30,fill:'green',stroke:'black',strokeWidth:4,\n           draggable: true\n       });\n\n```\n   var cring = obj.clone();\n   console.log(obj.outerRadius(),cring.outerRadius());\n   cring.x(obj.x()+100);\n   layer1.add(obj);\n   layer1.add(cring);\n  stage1.add(layer1);\n  layer1.draw();\n```\n\nThe console.log gives (30,25) for the radii and the cloned ring also \ndraws with a smaller outer radius.\n\nUpdate:\n\nI just tested it without the height and width parameters i.e.\n   var obj = new Kinetic.Ring \n({name:'ring',x:30,y:50,innerRadius:15,outerRadius:30,fill:'green',stroke:'black',strokeWidth:4,\n           draggable: true\n       });\n\nand cloning works correctly in this case, so it seems important to not \ninclude width and height when instanced.\n\nOn 10/08/14 07:56, Anton Lavrenov wrote:\n\n> Do you have demo? Test is passing:\n> \n> var  ring  =  new  Kinetic.Ring({\n>            x:  stage.getWidth()  /  2,\n>            y:  stage.getHeight()  /  2,\n>            innerRadius:  50,\n>            outerRadius:  90,\n>            fill:  'green',\n>            stroke:  'black',\n>            strokeWidth:  4,\n>            draggable:  true\n> });\n> var  clone  =  ring.clone();\n> assert.equal(clone.outerRadius(),  ring.outerRadius());\n> \n> \u2014\n> Reply to this email directly or view it on GitHub \n> https://github.com/ericdrowell/KineticJS/issues/987#issuecomment-51707925.\n. I use a 'type' parameter to define which kind of node has to be drawn \nwhen retrieved from a database, so width and height may or may not be \ndefined.  From what you say it is important then to suppress or define \nthe optional width and height parameters according to 2*outerRadius when \none has a star or ring object. It may be helpful to mention this in the \ndocumentation or just do it automatically so that outerRadius overrides \nwidth and height during the creation of the ring or star instance.\nThanks for making this clear.\nOn 11/08/14 01:34, Anton Lavrenov wrote:\n\n> Yep. It is strange that you have |width|, |height| and |outerRadius| \n> together. |width| (and |height|) should be = |outerRadius \\* 2|. Look \n> https://github.com/ericdrowell/KineticJS/blob/master/src/shapes/Ring.js#L52. \n> In your case while cloning |width| (or |height|) was applying after \n> |outerRadius| attribute so it was change |outerRadius| value.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub \n> https://github.com/ericdrowell/KineticJS/issues/987#issuecomment-51732645.\n. ",
    "oncletom": "You should change the version in package.json to match 5.1.0 and republish, even if it is the same code. Otherwise people sticking with `~5.0.6` will not get bugfix provided by 5.1.1 for example.\n\nAnd you should eventually publish a 5.0.7 which is not breaking compatibility between with the rest of the 5.0.x branch. \n. Could you please republish Kinetic in npm please?\n\nBecause today `^5.0.0` will be satisfied with `5.1.1` and not with `5.0.6`.\n\nRe-publishing `5.0.6` as `5.1.2` is very acceptable and would make happy node-semver, so as people expecting the branch 5.1.x as the latest version :-)\n\nThanks!\n. You should change the version in package.json to match 5.1.0 and republish, even if it is the same code. Otherwise people sticking with `~5.0.6` will not get bugfix provided by 5.1.1 for example.\n\nAnd you should eventually publish a 5.0.7 which is not breaking compatibility between with the rest of the 5.0.x branch. \n. Could you please republish Kinetic in npm please?\n\nBecause today `^5.0.0` will be satisfied with `5.1.1` and not with `5.0.6`.\n\nRe-publishing `5.0.6` as `5.1.2` is very acceptable and would make happy node-semver, so as people expecting the branch 5.1.x as the latest version :-)\n\nThanks!\n. ",
    "rauls": "Not found :(\n\nStill not fixed, how embarrassing, and for a #1000 error too. \n\nIf you do a whois on the domain, you can get his details there btw.\n\nerowell83@gmail.com\n. Not found :(\n\nStill not fixed, how embarrassing, and for a #1000 error too. \n\nIf you do a whois on the domain, you can get his details there btw.\n\nerowell83@gmail.com\n. ",
    "SLyHuy": "Thanks, Lavrton.\n. Thanks, Lavrton.\n. ",
    "jadpole": "I had the same problem. Interestingly, it works when using `kinetic.js`, but doesn't with the minified version. You should use the non-minified file (at least during development phase), and remove the comments when you want to redistribute your app.\nI guess the problem is in the minifier, not Kinetic itself.\nHoping that helped!\n. I had the same problem. Interestingly, it works when using `kinetic.js`, but doesn't with the minified version. You should use the non-minified file (at least during development phase), and remove the comments when you want to redistribute your app.\nI guess the problem is in the minifier, not Kinetic itself.\nHoping that helped!\n. ",
    "timgiesenberg": "Okay, the issue was never a real issue.\nIt was a misunderstanding of how stuff works.\nThe jsfiddle shows a correct solution of the original problem.\n\nMarked as closed\n. Okay, the issue was never a real issue.\nIt was a misunderstanding of how stuff works.\nThe jsfiddle shows a correct solution of the original problem.\n\nMarked as closed\n. ",
    "eric79": "Okay ... it was just interesting that it worked with the mouse, but not with touch.\n. Okay ... it was just interesting that it worked with the mouse, but not with touch.\n. ",
    "leohenning": "I'd like to keep using it. Is the community large enough to self support?\n. Seems very stable to me too. \n. It is in a good state currently and meets my needs. I feel each browser release brings improved performance. I think the need for kineticjs is still growing.\n. I'd like to keep using it. Is the community large enough to self support?\n. Seems very stable to me too. \n. It is in a good state currently and meets my needs. I feel each browser release brings improved performance. I think the need for kineticjs is still growing.\n. ",
    "zenix": "Ok. Maybe it's time to see other projects..\n. Ok. Maybe it's time to see other projects..\n. ",
    "petersaints": "I would love to see this project continued. I mean... a few months ago I was selecting a good Canvas library for a project and among the biggest contenders were KineticJS, EaselJS and Fabric.js. I ended up choosing KineticJS due to its very good documentation and examples and its sad that is now unmaintained. I mean... the biggest issue that may arise in the future is the lack of browser support. So even if it was only maintenance mode project I'd love to see some sort of support for this awesome library.\n\nIf I knew this would happen I would probably have selected EaselJS. I mean Fabric.js is also fine but I think it is not as generic and robust as EaselJS and KineticJS (any opinions for future reference?)\n. I mean. I can map most of the things I've done with KineticJS to something like EaselJS, but it will still be a considerable amount if time and effort to port everything. So for now I'll KineticJS and hope for the best. I mean... I'm not asking for more features, just bug fixes and compatibility updates would be more than fine for me.\n. I have been using Google Cache but I'd love to have a more permanent and official solution.\n. I would love to see this project continued. I mean... a few months ago I was selecting a good Canvas library for a project and among the biggest contenders were KineticJS, EaselJS and Fabric.js. I ended up choosing KineticJS due to its very good documentation and examples and its sad that is now unmaintained. I mean... the biggest issue that may arise in the future is the lack of browser support. So even if it was only maintenance mode project I'd love to see some sort of support for this awesome library.\n\nIf I knew this would happen I would probably have selected EaselJS. I mean Fabric.js is also fine but I think it is not as generic and robust as EaselJS and KineticJS (any opinions for future reference?)\n. I mean. I can map most of the things I've done with KineticJS to something like EaselJS, but it will still be a considerable amount if time and effort to port everything. So for now I'll KineticJS and hope for the best. I mean... I'm not asking for more features, just bug fixes and compatibility updates would be more than fine for me.\n. I have been using Google Cache but I'd love to have a more permanent and official solution.\n. ",
    "speedy32": "I can set it up on my hosting if you like. I just need a domain transfer from you. Would you like to do the transfer? \nI think that there are more people then only me who would like to continue this project and fix the bugs. Did you think about It?\n. I can set it up on my hosting if you like. I just need a domain transfer from you. Would you like to do the transfer? \nI think that there are more people then only me who would like to continue this project and fix the bugs. Did you think about It?\n. I can set it up on my hosting if you like. I just need a domain transfer from you. Would you like to do the transfer? \nI think that there are more people then only me who would like to continue this project and fix the bugs. Did you think about It?\n. I can set it up on my hosting if you like. I just need a domain transfer from you. Would you like to do the transfer? \nI think that there are more people then only me who would like to continue this project and fix the bugs. Did you think about It?\n. ",
    "DavidPesta": "To uphold the world's confidence in FOSS, it is important for Eric to find a maintainer and point the domain to one of their servers to keep the project alive. KineticJS has become way too popular to just disappear like this.\n. To uphold the world's confidence in FOSS, it is important for Eric to find a maintainer and point the domain to one of their servers to keep the project alive. KineticJS has become way too popular to just disappear like this.\n. ",
    "kangax": "I'd be interested to hear what Fabric is missing comparing to Kinetic (aside from support for seamless layering, which I always loved in Kinetic and which we're planning to add to Fabric in a near future).\n. I'd be interested to hear what Fabric is missing comparing to Kinetic (aside from support for seamless layering, which I always loved in Kinetic and which we're planning to add to Fabric in a near future).\n. ",
    "yeldarby": "Agree! Can you please put that back up on the site even if it's no longer maintained?\n. @ashepherd89 - good tip, I just built and uploaded those to S3 for anyone else looking for them: http://kineticjs.s3-website-us-west-2.amazonaws.com\n\nIf I recall correctly, the `kineticjs.com` site had more docs than that (or at least linked someplace else) to them. Having access to the old site would be a godsend. Can it be restored to `archive.kineticjs.com` or something?\n. Agree! Can you please put that back up on the site even if it's no longer maintained?\n. @ashepherd89 - good tip, I just built and uploaded those to S3 for anyone else looking for them: http://kineticjs.s3-website-us-west-2.amazonaws.com\n\nIf I recall correctly, the `kineticjs.com` site had more docs than that (or at least linked someplace else) to them. Having access to the old site would be a godsend. Can it be restored to `archive.kineticjs.com` or something?\n. ",
    "locuturus-dev": "I just used Grunt to generate the documentation.  Anyone else wishing to generate the documentation will have to download and install npm.  Use npm from the command prompt to install Grunt to the Kinetic JS master directory that you extracted after downloading from this Git repo.  You simply run 'grunt docs' while CD'd to the kineticjs-master directory. (If you are on windows then you will have to fix some file paths in the gruntfile in the root of the kineticjs-master directory.\n. I just used Grunt to generate the documentation.  Anyone else wishing to generate the documentation will have to download and install npm.  Use npm from the command prompt to install Grunt to the Kinetic JS master directory that you extracted after downloading from this Git repo.  You simply run 'grunt docs' while CD'd to the kineticjs-master directory. (If you are on windows then you will have to fix some file paths in the gruntfile in the root of the kineticjs-master directory.\n. ",
    "yousifalyousifi": "Thanks @yeldarby for the docs!\nAnother thing I was wondering, what about the \"Labs\" \"Tutorials\" and \"KineticJS\" section that I remember included a lot of demo scripts.\nAre those available anywhere?\n. Thanks @yeldarby for the docs!\nAnother thing I was wondering, what about the \"Labs\" \"Tutorials\" and \"KineticJS\" section that I remember included a lot of demo scripts.\nAre those available anywhere?\n. ",
    "syhpoon": "Here's a site mirror I use: http://www.zeali.net/mirrors/html5canvastutorials/kineticjs/html5-canvas-events-tutorials-introduction-with-kineticjs/index.html\n. Here's a site mirror I use: http://www.zeali.net/mirrors/html5canvastutorials/kineticjs/html5-canvas-events-tutorials-introduction-with-kineticjs/index.html\n. ",
    "Pmleader": "I am currently in process of converting one of our companies main products to a webbased app where we heavily rely on Kinetic.\n\nSo far everything has been going perfectly with Kinetic as canvas framework. \nBut I am scared for the future if Kinetic has no continued support and development.\n. Hello,\nI'm very happy to read this!\nOur project is run completely with KineticJS and rewriting it would take A LOT of time.\nMuch appreciated that you are taking initiative with continuing this great project!\n. I am currently in process of converting one of our companies main products to a webbased app where we heavily rely on Kinetic.\n\nSo far everything has been going perfectly with Kinetic as canvas framework. \nBut I am scared for the future if Kinetic has no continued support and development.\n. Hello,\nI'm very happy to read this!\nOur project is run completely with KineticJS and rewriting it would take A LOT of time.\nMuch appreciated that you are taking initiative with continuing this great project!\n. ",
    "Arduinology": "Same boat as @dave-ledsign , we as a community should come together and support this. Just noticed today that their site is all but gone along with the documentation I relied on. Lets get this moving, how can I help?\n. I had not heard of PixiJS before either, can anyone comment on their experiences with this? What sort of work would it take to migrate to it?\n. Right now I am at an impasse, PixiJS has more performance (WebGL is just fast) but it does have issues with text. That being said I was able to get bitmap text in fairly easily once I found the tool for the job. The problem with PixiJS is that the text doesn't scale well, it is a linear scale for WebGL, this is supposedly going to be fixed but that was over a year ago. Text support just seems poor.\n. Same boat as @dave-ledsign , we as a community should come together and support this. Just noticed today that their site is all but gone along with the documentation I relied on. Lets get this moving, how can I help?\n. I had not heard of PixiJS before either, can anyone comment on their experiences with this? What sort of work would it take to migrate to it?\n. Right now I am at an impasse, PixiJS has more performance (WebGL is just fast) but it does have issues with text. That being said I was able to get bitmap text in fairly easily once I found the tool for the job. The problem with PixiJS is that the text doesn't scale well, it is a linear scale for WebGL, this is supposedly going to be fixed but that was over a year ago. Text support just seems poor.\n. ",
    "maxkorp": "Has anybody talked with Eric regarding posting a link in the readme? \n. Has anybody talked with Eric regarding posting a link in the readme? \n. ",
    "chris-rock": "great work @lavrton !\n. great work @lavrton !\n. ",
    "kathir26": "@bensquire Could you please send any sprite animation example for latest version.\n. Ok thank you for your help @bensquire \n. @bensquire I think both plugins are same but name is different instead of kinetic its konva. But sprite animation is not working \n. @bensquire Ok thank you for your information.\n. @bensquire Could you please send any sprite animation example for latest version.\n. Ok thank you for your help @bensquire \n. @bensquire I think both plugins are same but name is different instead of kinetic its konva. But sprite animation is not working \n. @bensquire Ok thank you for your information.\n. ",
    "deostroll": "Yes the 2nd tap event is causing problems\n. Hi,\n\nI've tried your suggestion, but I am getting incorrect behaviour. I am sharing code + log:\n\n```\nvar wireKineticEventSafe = function (obj, evtname, callback) {            \n  var dbltap = false;\n  if(evtname && typeof(evtname) === 'string'\n    && callback && typeof(callback) === 'function'\n      && typeof(obj) === 'object' && obj.on) {\n    switch(evtname) {\n      case 'tap':\n        obj.on('tap', function(evt) {\n          _console('tap event fired');\n          setTimeout(function(){\n            _console('tap timeout fired');\n            if (dbltap) {\n              dbltap = false;\n              return;\n            }\n            callback.call(obj, evt);\n          }, 10);\n\n        });\n        break;\n      case 'dbltap':\n        obj.on('dbltap', function(evt){\n          _console('dbltap event fired');\n          dbltap = true;\n          callback.call(obj, evt);\n        });\n        break;\n      default:\n        //wire others as usual\n        obj.on(evtname, callback);\n        break;\n    }//end switch\n  }//end if\n};\n\nfunction _console(){\n  var args = arguments;\n  var dt = Date.now();\n  var s = [];\n\n  var dtFormat = function(dt){\n    var h = dt.getHours(),\n      m = dt.getMinutes(),\n      s = dt.getSeconds();\n\n    var pad = function(n) { return n < 10? '0' + n : n};\n    return [h,m,s].map(pad).join(':');\n  }\n  if(!_console.calledOnce){\n    _console.calledOnce = true;\n    _console.tick = dtFormat(new Date());\n    setInterval(function(){\n      _console.tick = dtFormat(new Date());\n    }, 500);    \n  }\n\n  var show = function(msg){\n    //console.log('show: ' + typeof _console.show);\n    if(typeof _console.show === 'undefined') {\n      _console.show = _console.tick;\n      console.log(msg);\n      return;\n    }\n\n    if(_console.show !== _console.tick) {\n      _console.show = _console.tick;\n      console.log(msg);\n    }\n  };\n\n  show('@: ' + _console.tick);\n\n  if(args.length > 1){\n    for(var i = 0, j = args.length; i < j; i++){\n      s.push(JSON.stringify(args[i], null, 4));\n    }\n    //console.log(\"tick start: \" + dt);\n    s.forEach(function(str){\n      console.log(str);\n    });\n    //console.log(\"tick end: \" + dt);\n  }\n  else {\n    //console.log(\"tick start: \" + dt);\n    console.log(JSON.stringify(args[0], null, 4));\n    //console.log(\"tick end: \" + dt);\n  }\n\n}\napp.initialize();\n\nvar stage = new Kinetic.Stage({\n    height:300,\n    width:300,\n    container:'deviceready'\n});\n\nvar layer = new Kinetic.Layer();\n\nvar rect = new Kinetic.Rect({\n    height:300,\n    width: 300,\n    stroke:'black'\n});\n\nlayer.add(rect);\n\n// layer.on('tap', function onLayerTapFn(){\n//     _console('onLayerTapFn');\n// });\n\n// layer.on('dbltap', function onLayerDblTap(){\n//     _console('onLayerDblTap');\n// });\n\nwireKineticEventSafe(layer, 'tap', function(){\n  _console('tap');\n});\n\nwireKineticEventSafe(layer, 'dbltap', function(){\n  _console(\"dbltap\");\n});\n\nstage.add(layer);\n```\n\nLogFile:\n\n```\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 111 : @: 05:56:09\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 129 : \"tap event fired\"\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 129 : \"tap timeout fired\"\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 129 : \"tap\"\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 111 : @: 05:56:21\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 129 : \"tap event fired\"\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 129 : \"tap timeout fired\"\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 129 : \"tap\"\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 129 : \"tap event fired\"\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 129 : \"dbltap event fired\"\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 129 : \"dbltap\"\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 129 : \"tap timeout fired\"\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 129 : \"tap\"\n```\n\nPerhaps I am doing something wrong but the sequence of events fired is incorrect. Any ideas on correcting this?\n. Thanks for making me realize the bug in the above post. Had to fix it by using memoization. \n. Yes the 2nd tap event is causing problems\n. Hi,\n\nI've tried your suggestion, but I am getting incorrect behaviour. I am sharing code + log:\n\n```\nvar wireKineticEventSafe = function (obj, evtname, callback) {            \n  var dbltap = false;\n  if(evtname && typeof(evtname) === 'string'\n    && callback && typeof(callback) === 'function'\n      && typeof(obj) === 'object' && obj.on) {\n    switch(evtname) {\n      case 'tap':\n        obj.on('tap', function(evt) {\n          _console('tap event fired');\n          setTimeout(function(){\n            _console('tap timeout fired');\n            if (dbltap) {\n              dbltap = false;\n              return;\n            }\n            callback.call(obj, evt);\n          }, 10);\n\n        });\n        break;\n      case 'dbltap':\n        obj.on('dbltap', function(evt){\n          _console('dbltap event fired');\n          dbltap = true;\n          callback.call(obj, evt);\n        });\n        break;\n      default:\n        //wire others as usual\n        obj.on(evtname, callback);\n        break;\n    }//end switch\n  }//end if\n};\n\nfunction _console(){\n  var args = arguments;\n  var dt = Date.now();\n  var s = [];\n\n  var dtFormat = function(dt){\n    var h = dt.getHours(),\n      m = dt.getMinutes(),\n      s = dt.getSeconds();\n\n    var pad = function(n) { return n < 10? '0' + n : n};\n    return [h,m,s].map(pad).join(':');\n  }\n  if(!_console.calledOnce){\n    _console.calledOnce = true;\n    _console.tick = dtFormat(new Date());\n    setInterval(function(){\n      _console.tick = dtFormat(new Date());\n    }, 500);    \n  }\n\n  var show = function(msg){\n    //console.log('show: ' + typeof _console.show);\n    if(typeof _console.show === 'undefined') {\n      _console.show = _console.tick;\n      console.log(msg);\n      return;\n    }\n\n    if(_console.show !== _console.tick) {\n      _console.show = _console.tick;\n      console.log(msg);\n    }\n  };\n\n  show('@: ' + _console.tick);\n\n  if(args.length > 1){\n    for(var i = 0, j = args.length; i < j; i++){\n      s.push(JSON.stringify(args[i], null, 4));\n    }\n    //console.log(\"tick start: \" + dt);\n    s.forEach(function(str){\n      console.log(str);\n    });\n    //console.log(\"tick end: \" + dt);\n  }\n  else {\n    //console.log(\"tick start: \" + dt);\n    console.log(JSON.stringify(args[0], null, 4));\n    //console.log(\"tick end: \" + dt);\n  }\n\n}\napp.initialize();\n\nvar stage = new Kinetic.Stage({\n    height:300,\n    width:300,\n    container:'deviceready'\n});\n\nvar layer = new Kinetic.Layer();\n\nvar rect = new Kinetic.Rect({\n    height:300,\n    width: 300,\n    stroke:'black'\n});\n\nlayer.add(rect);\n\n// layer.on('tap', function onLayerTapFn(){\n//     _console('onLayerTapFn');\n// });\n\n// layer.on('dbltap', function onLayerDblTap(){\n//     _console('onLayerDblTap');\n// });\n\nwireKineticEventSafe(layer, 'tap', function(){\n  _console('tap');\n});\n\nwireKineticEventSafe(layer, 'dbltap', function(){\n  _console(\"dbltap\");\n});\n\nstage.add(layer);\n```\n\nLogFile:\n\n```\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 111 : @: 05:56:09\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 129 : \"tap event fired\"\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 129 : \"tap timeout fired\"\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 129 : \"tap\"\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 111 : @: 05:56:21\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 129 : \"tap event fired\"\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 129 : \"tap timeout fired\"\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 129 : \"tap\"\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 129 : \"tap event fired\"\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 129 : \"dbltap event fired\"\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 129 : \"dbltap\"\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 129 : \"tap timeout fired\"\n\nD/CordovaLog( 2786): file:///android_asset/www/js/index.js: Line 129 : \"tap\"\n```\n\nPerhaps I am doing something wrong but the sequence of events fired is incorrect. Any ideas on correcting this?\n. Thanks for making me realize the bug in the above post. Had to fix it by using memoization. \n. ",
    "zuoRambo": "thank you a lot, @lavrton man, even your code is not none of the bussiness about  the 'Image drag funciton' . i have find the solution how to fix my bug!do you have an api documention about kinetic js?\n\n```\nvar image = new Kinetic.Image(conf);\nimage.on('mousedown',function(e){\n    t.isImageDrage = true;\n    this.dragBoundFunc(function(pos){\n        if(e.evt.altKey)\n            return {\n                x: pos.x,\n                y: this.getAbsolutePosition().y,\n            }\n        else if(e.evt.shiftKey)\n            return {\n                x: this.getAbsolutePosition().x,\n                y: pos.y,\n            }\n        else\n            return pos;\n    });\n});\n```\n\nthanks again for your help!\n. @lavrton wow! the api is amazing! how do you make it? jsDOC_toolkit?\n. thank you a lot, @lavrton man, even your code is not none of the bussiness about  the 'Image drag funciton' . i have find the solution how to fix my bug!do you have an api documention about kinetic js?\n\n```\nvar image = new Kinetic.Image(conf);\nimage.on('mousedown',function(e){\n    t.isImageDrage = true;\n    this.dragBoundFunc(function(pos){\n        if(e.evt.altKey)\n            return {\n                x: pos.x,\n                y: this.getAbsolutePosition().y,\n            }\n        else if(e.evt.shiftKey)\n            return {\n                x: this.getAbsolutePosition().x,\n                y: pos.y,\n            }\n        else\n            return pos;\n    });\n});\n```\n\nthanks again for your help!\n. @lavrton wow! the api is amazing! how do you make it? jsDOC_toolkit?\n. ",
    "DMIAOCHEN": "maybe this variable should be defined in for loop?\n\n``` javascript\nvar continueSearch = false;\n```\n. maybe this variable should be defined in for loop?\n\n``` javascript\nvar continueSearch = false;\n```\n. ",
    "cihadturhan": "@nodecode Thanks for posting this. I was about to ask if there is an alternative to Kinetic.js.\n. @nodecode Thanks for posting this. I was about to ask if there is an alternative to Kinetic.js.\n. ",
    "leesei": "@ericdrowell care to put a link to konvasjs to README for forward those interested in Kinetic.js?\n. @ericdrowell care to put a link to konvasjs to README for forward those interested in Kinetic.js?\n. ",
    "vkshrestha": "it did not work in android lollipop browsers as well\n. it did not work in android lollipop browsers as well\n. ",
    "mojovski": "similar issue here with fullscreen. did you find a solution?\n. similar issue here with fullscreen. did you find a solution?\n. ",
    "dreamyguy": "For the record, I could only reproduce it on iOS. It failed on all these:\r\n\r\nmacOS Simulator (iOS 9.2 Safari)\r\niOS 10.2.1 Safari\r\niOS 10.2.1 Chrome\r\niOS 10.2.1 Firefox\r\niOS 10.2.1 Firefox Focus\r\niOS 10.2.1 Mercury\r\n\r\nI tested it on a Samsung (Chrome) and could not reproduce the problem.. For the record, I could only reproduce it on iOS. It failed on all these:\r\n\r\nmacOS Simulator (iOS 9.2 Safari)\r\niOS 10.2.1 Safari\r\niOS 10.2.1 Chrome\r\niOS 10.2.1 Firefox\r\niOS 10.2.1 Firefox Focus\r\niOS 10.2.1 Mercury\r\n\r\nI tested it on a Samsung (Chrome) and could not reproduce the problem.. "
}